import{u as C,a as I,r as L,b as S,c as B,d as D,e as A,f as z,g as m,j as e,F as x,I as p,O as g,T as t,h as P,G as n,L as c,B as F,A as E,i as W,s as q,k as T,l as V,m as M,S as H,D as O}from"./index-7fPD5qIa.js";import{I as $,V as G,a as U,F as K,C as N,b as Q,A as R,c as J}from"./VisibilityOff-BdTRM5tO.js";function X(){const o=C(),l=I(),[i,j]=L.useState(!1),w=()=>j(r=>!r),y=r=>r.preventDefault(),{enqueueSnackbar:d}=S(),f=B(),b=D(r=>r.auth),v=async(r,{setSubmitting:k})=>{var u,h;delete r.keepLoggedIn;try{const a=await Q.post("/auth/login",r);a.status===200&&(d("Login successful!",{variant:"success"}),f(q({user:a.data.data.user,token:a.data.data.tokens.access.token})),localStorage.setItem("token",a.data.data.tokens.access.token),setTimeout(()=>{l("/dashboard")},500))}catch(a){d(((h=(u=a.response)==null?void 0:u.data)==null?void 0:h.message)||"Login failed. Please try again.",{variant:"error"})}finally{k(!1)}},s=A({initialValues:{email:"",password:"",keepLoggedIn:!0},validationSchema:z({email:m().email("Invalid email").required("Email is required"),password:m().required("Password is required")}),onSubmit:v});return e.jsxs("form",{noValidate:!0,onSubmit:s.handleSubmit,children:[e.jsxs(x,{fullWidth:!0,sx:{...o.typography.customInput},error:s.touched.email&&!!s.errors.email,children:[e.jsx(p,{onClick:()=>console.log(b),htmlFor:"email",children:"Email Address / Username"}),e.jsx(g,{id:"email",type:"email",value:s.values.email,name:"email",onBlur:s.handleBlur,onChange:s.handleChange,label:"Email Address / Username"})]}),s.touched.email&&s.errors.email&&e.jsx(t,{color:"error",variant:"caption",children:s.errors.email}),e.jsxs(x,{fullWidth:!0,sx:{...o.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(p,{htmlFor:"password",children:"Password"}),e.jsx(g,{id:"password",type:i?"text":"password",value:s.values.password,name:"password",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx($,{position:"end",children:e.jsx(P,{"aria-label":"toggle password visibility",onClick:w,onMouseDown:y,edge:"end",size:"large",children:i?e.jsx(G,{}):e.jsx(U,{})})}),label:"Password"})]}),s.touched.password&&s.errors.password&&e.jsx(t,{color:"error",variant:"caption",children:s.errors.password}),e.jsxs(n,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(n,{item:!0,children:e.jsx(K,{control:e.jsx(N,{checked:s.values.keepLoggedIn,onChange:s.handleChange,name:"keepLoggedIn",color:"primary"}),label:"Keep me logged in"})}),e.jsx(n,{item:!0,children:e.jsx(t,{variant:"subtitle1",component:c,to:"/forgot-password",color:"secondary",sx:{textDecoration:"none"},children:"Forgot Password?"})})]}),e.jsx(F,{sx:{mt:2},children:e.jsx(E,{children:e.jsx(W,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Log In"})})})]})}function _(){const o=T(),l=V(i=>i.breakpoints.down("md"));return e.jsx(R,{children:e.jsx(n,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(n,{size:12,children:e.jsx(n,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(n,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(J,{children:e.jsxs(n,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(n,{sx:{mb:3},children:e.jsx(c,{to:"#","aria-label":"logo",children:e.jsx(M,{})})}),e.jsx(n,{size:12,children:e.jsx(n,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(n,{children:e.jsxs(H,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(t,{gutterBottom:!0,variant:l?"h3":"h2",sx:{color:"secondary.main"},children:"Hi, Welcome Back"}),e.jsx(t,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Enter your credentials to continue"})]})})})}),e.jsx(n,{size:12,children:e.jsx(X,{})}),e.jsx(n,{size:12,children:e.jsx(O,{})}),e.jsx(n,{size:12,children:e.jsx(n,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(t,{component:c,to:"/register",variant:"subtitle1",sx:{textDecoration:"underline",textDecorationColor:o.palette.secondary[200],color:"inherit","&:hover":{textDecorationColor:o.palette.secondary[800]}},children:"Don't have an account?"})})})]})})})})})})})}export{_ as default};
