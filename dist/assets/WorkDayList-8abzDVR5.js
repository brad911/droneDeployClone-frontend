import{r as g,bo as gt,bp as Re,bq as bt,br as xt,bs as Ge,bt as Oe,bu as Ze,bv as vt,bw as et,bx as _e,ao as yt,an as St,j as t,aq as Fe,ap as kt,b6 as jt,by as he,N as ke,at as be,ar as wt,au as Le,av as He,bz as ct,aw as Ct,E as dt,$ as Tt,a0 as Lt,a1 as zt,B,bA as It,T as xe,a2 as At,l as ge,u as Mt,b as Pt,d as Rt,Q as Ft,S as tt,Y as $t,F as at,I as Nt,y as rt,M as nt,a5 as Et,bg as Wt,bh as Dt,bi as Vt,bj as qe,bb as P,bk as Ot,aE as Je,_ as _t,m as me}from"./index-fXMhcizO.js";function Ut(e,a,i=(o,b)=>o===b){return e.length===a.length&&e.every((o,b)=>i(o,a[b]))}const Yt=2;function Te(e,a,i,o,b){return i===1?Math.min(e+a,b):Math.max(e-a,o)}function ut(e,a){return e-a}function ot(e,a){const{index:i}=e.reduce((o,b,I)=>{const $=Math.abs(a-b);return o===null||$<o.distance||$===o.distance?{distance:$,index:I}:o},null)??{};return i}function Ee(e,a){if(a.current!==void 0&&e.changedTouches){const i=e;for(let o=0;o<i.changedTouches.length;o+=1){const b=i.changedTouches[o];if(b.identifier===a.current)return{x:b.clientX,y:b.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ue(e,a,i){return(e-a)*100/(i-a)}function Bt(e,a,i){return(i-a)*e+a}function Kt(e){if(Math.abs(e)<1){const i=e.toExponential().split("e-"),o=i[0].split(".")[1];return(o?o.length:0)+parseInt(i[1],10)}const a=e.toString().split(".")[1];return a?a.length:0}function Xt(e,a,i){const o=Math.round((e-i)/a)*a+i;return Number(o.toFixed(Kt(a)))}function st({values:e,newValue:a,index:i}){const o=e.slice();return o[i]=a,o.sort(ut)}function We({sliderRef:e,activeIndex:a,setActive:i}){var b,I,$;const o=Oe(e.current);(!((b=e.current)!=null&&b.contains(o.activeElement))||Number((I=o==null?void 0:o.activeElement)==null?void 0:I.getAttribute("data-index"))!==a)&&(($=e.current)==null||$.querySelector(`[type="range"][data-index="${a}"]`).focus()),i&&i(a)}function De(e,a){return typeof e=="number"&&typeof a=="number"?e===a:typeof e=="object"&&typeof a=="object"?Ut(e,a):!1}const Gt={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Zt=e=>e;let Ve;function it(){return Ve===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ve=CSS.supports("touch-action","none"):Ve=!0),Ve}function qt(e){const{"aria-labelledby":a,defaultValue:i,disabled:o=!1,disableSwap:b=!1,isRtl:I=!1,marks:$=!1,max:w=100,min:S=0,name:R,onChange:O,onChangeCommitted:Z,orientation:q="horizontal",rootRef:ze,scale:je=Zt,step:U=1,shiftStep:de=10,tabIndex:ue,value:Ie}=e,_=g.useRef(void 0),[X,E]=g.useState(-1),[$e,te]=g.useState(-1),[J,Q]=g.useState(!1),G=g.useRef(0),pe=g.useRef(null),[W,h]=gt({controlled:Ie,default:i??S,name:"Slider"}),m=O&&((r,s,c)=>{const f=r.nativeEvent||r,y=new f.constructor(f.type,f);Object.defineProperty(y,"target",{writable:!0,value:{value:s,name:R}}),pe.current=s,O(y,s,c)}),ae=Array.isArray(W);let T=ae?W.slice().sort(ut):[W];T=T.map(r=>r==null?S:Re(r,S,w));const ve=$===!0&&U!==null?[...Array(Math.floor((w-S)/U)+1)].map((r,s)=>({value:S+U*s})):$||[],L=ve.map(r=>r.value),[H,fe]=g.useState(-1),C=g.useRef(null),ee=bt(ze,C),Ae=r=>s=>{var f;const c=Number(s.currentTarget.getAttribute("data-index"));et(s.target)&&fe(c),te(c),(f=r==null?void 0:r.onFocus)==null||f.call(r,s)},Me=r=>s=>{var c;et(s.target)||fe(-1),te(-1),(c=r==null?void 0:r.onBlur)==null||c.call(r,s)},we=(r,s)=>{const c=Number(r.currentTarget.getAttribute("data-index")),f=T[c],y=L.indexOf(f);let d=s;if(ve&&U==null){const j=L[L.length-1];d>=j?d=j:d<=L[0]?d=L[0]:d=d<f?L[y-1]:L[y+1]}if(d=Re(d,S,w),ae){b&&(d=Re(d,T[c-1]||-1/0,T[c+1]||1/0));const j=d;d=st({values:T,newValue:d,index:c});let V=c;b||(V=d.indexOf(j)),We({sliderRef:C,activeIndex:V})}h(d),fe(c),m&&!De(d,W)&&m(r,d,c),Z&&Z(r,pe.current??d)},Pe=r=>s=>{var c;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(s.key)){s.preventDefault();const f=Number(s.currentTarget.getAttribute("data-index")),y=T[f];let d=null;if(U!=null){const j=s.shiftKey?de:U;switch(s.key){case"ArrowUp":d=Te(y,j,1,S,w);break;case"ArrowRight":d=Te(y,j,I?-1:1,S,w);break;case"ArrowDown":d=Te(y,j,-1,S,w);break;case"ArrowLeft":d=Te(y,j,I?1:-1,S,w);break;case"PageUp":d=Te(y,de,1,S,w);break;case"PageDown":d=Te(y,de,-1,S,w);break;case"Home":d=S;break;case"End":d=w;break}}else if(ve){const j=L[L.length-1],V=L.indexOf(y),A=[I?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Y=[I?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];A.includes(s.key)?V===0?d=L[0]:d=L[V-1]:Y.includes(s.key)&&(V===L.length-1?d=j:d=L[V+1])}d!=null&&we(s,d)}(c=r==null?void 0:r.onKeyDown)==null||c.call(r,s)};xt(()=>{var r;o&&C.current.contains(document.activeElement)&&((r=document.activeElement)==null||r.blur())},[o]),o&&X!==-1&&E(-1),o&&H!==-1&&fe(-1);const Ce=r=>s=>{var c;(c=r.onChange)==null||c.call(r,s),we(s,s.target.valueAsNumber)},re=g.useRef(void 0);let ne=q;I&&q==="horizontal"&&(ne+="-reverse");const oe=({finger:r,move:s=!1})=>{const{current:c}=C,{width:f,height:y,bottom:d,left:j}=c.getBoundingClientRect();let V;ne.startsWith("vertical")?V=(d-r.y)/y:V=(r.x-j)/f,ne.includes("-reverse")&&(V=1-V);let A;if(A=Bt(V,S,w),U)A=Xt(A,U,S);else{const Se=ot(L,A);A=L[Se]}A=Re(A,S,w);let Y=0;if(ae){s?Y=re.current:Y=ot(T,A),b&&(A=Re(A,T[Y-1]||-1/0,T[Y+1]||1/0));const Se=A;A=st({values:T,newValue:A,index:Y}),b&&s||(Y=A.indexOf(Se),re.current=Y)}return{newValue:A,activeIndex:Y}},se=Ge(r=>{const s=Ee(r,_);if(!s)return;if(G.current+=1,r.type==="mousemove"&&r.buttons===0){n(r);return}const{newValue:c,activeIndex:f}=oe({finger:s,move:!0});We({sliderRef:C,activeIndex:f,setActive:E}),h(c),!J&&G.current>Yt&&Q(!0),m&&!De(c,W)&&m(r,c,f)}),n=Ge(r=>{const s=Ee(r,_);if(Q(!1),!s)return;const{newValue:c}=oe({finger:s,move:!0});E(-1),r.type==="touchend"&&te(-1),Z&&Z(r,pe.current??c),_.current=void 0,v()}),l=Ge(r=>{if(o)return;it()||r.preventDefault();const s=r.changedTouches[0];s!=null&&(_.current=s.identifier);const c=Ee(r,_);if(c!==!1){const{newValue:y,activeIndex:d}=oe({finger:c});We({sliderRef:C,activeIndex:d,setActive:E}),h(y),m&&!De(y,W)&&m(r,y,d)}G.current=0;const f=Oe(C.current);f.addEventListener("touchmove",se,{passive:!0}),f.addEventListener("touchend",n,{passive:!0})}),v=g.useCallback(()=>{const r=Oe(C.current);r.removeEventListener("mousemove",se),r.removeEventListener("mouseup",n),r.removeEventListener("touchmove",se),r.removeEventListener("touchend",n)},[n,se]);g.useEffect(()=>{const{current:r}=C;return r.addEventListener("touchstart",l,{passive:it()}),()=>{r.removeEventListener("touchstart",l),v()}},[v,l]),g.useEffect(()=>{o&&v()},[o,v]);const p=r=>s=>{var y;if((y=r.onMouseDown)==null||y.call(r,s),o||s.defaultPrevented||s.button!==0)return;s.preventDefault();const c=Ee(s,_);if(c!==!1){const{newValue:d,activeIndex:j}=oe({finger:c});We({sliderRef:C,activeIndex:j,setActive:E}),h(d),m&&!De(d,W)&&m(s,d,j)}G.current=0;const f=Oe(C.current);f.addEventListener("mousemove",se,{passive:!0}),f.addEventListener("mouseup",n)},x=Ue(ae?T[0]:S,S,w),u=Ue(T[T.length-1],S,w)-x,z=(r={})=>{const s=Ze(r),c={onMouseDown:p(s||{})},f={...s,...c};return{...r,ref:ee,...f}},k=r=>s=>{var f;(f=r.onMouseOver)==null||f.call(r,s);const c=Number(s.currentTarget.getAttribute("data-index"));te(c)},F=r=>s=>{var c;(c=r.onMouseLeave)==null||c.call(r,s),te(-1)},ye=(r={})=>{const s=Ze(r),c={onMouseOver:k(s||{}),onMouseLeave:F(s||{})};return{...r,...s,...c}},D=r=>({pointerEvents:X!==-1&&X!==r?"none":void 0});let ie;return q==="vertical"&&(ie=I?"vertical-rl":"vertical-lr"),{active:X,axis:ne,axisProps:Gt,dragging:J,focusedThumbIndex:H,getHiddenInputProps:(r={})=>{const s=Ze(r),c={onChange:Ce(s||{}),onFocus:Ae(s||{}),onBlur:Me(s||{}),onKeyDown:Pe(s||{})},f={...s,...c};return{tabIndex:ue,"aria-labelledby":a,"aria-orientation":q,"aria-valuemax":je(w),"aria-valuemin":je(S),name:R,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:o,...r,...f,style:{...vt,direction:I?"rtl":"ltr",width:"100%",height:"100%",writingMode:ie}}},getRootProps:z,getThumbProps:ye,marks:ve,open:$e,range:ae,rootRef:ee,trackLeap:u,trackOffset:x,values:T,getThumbStyle:D}}const Jt=e=>!e||!_e(e);function Qt(e){return St("MuiSlider",e)}const K=yt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ht=e=>{const{open:a}=e;return{offset:Fe(a&&K.valueLabelOpen),circle:K.valueLabelCircle,label:K.valueLabelLabel}};function ea(e){const{children:a,className:i,value:o}=e,b=Ht(e);return a?g.cloneElement(a,{className:a.props.className},t.jsxs(g.Fragment,{children:[a.props.children,t.jsx("span",{className:Fe(b.offset,i),"aria-hidden":!0,children:t.jsx("span",{className:b.circle,children:t.jsx("span",{className:b.label,children:o})})})]})):null}function lt(e){return e}const ta=ke("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:i}=e;return[a.root,a[`color${be(i.color)}`],i.size!=="medium"&&a[`size${be(i.size)}`],i.marked&&a.marked,i.orientation==="vertical"&&a.vertical,i.track==="inverted"&&a.trackInverted,i.track===!1&&a.trackFalse]}})(Le(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${K.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${K.dragging}`]:{[`& .${K.thumb}, & .${K.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(He()).map(([a])=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),aa=ke("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),ra=ke("span",{name:"MuiSlider",slot:"Track"})(Le(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(He()).map(([a])=>({props:{color:a,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:{backgroundColor:e.lighten(e.palette[a].main,.62),borderColor:e.lighten(e.palette[a].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[a].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[a].main,.5)})}}}))]}))),na=ke("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,a)=>{const{ownerState:i}=e;return[a.thumb,a[`thumbColor${be(i.color)}`],i.size!=="medium"&&a[`thumbSize${be(i.size)}`]]}})(Le(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${K.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(He()).map(([a])=>({props:{color:a},style:{[`&:hover, &.${K.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[a].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${K.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[a].main,.16)}`}}}))]}))),oa=ke(ea,{name:"MuiSlider",slot:"ValueLabel"})(Le(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${K.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${K.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),sa=ke("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ct(e)&&e!=="markActive",overridesResolver:(e,a)=>{const{markActive:i}=e;return[a.mark,i&&a.markActive]}})(Le(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),ia=ke("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ct(e)&&e!=="markLabelActive"})(Le(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),la=e=>{const{disabled:a,dragging:i,marked:o,orientation:b,track:I,classes:$,color:w,size:S}=e,R={root:["root",a&&"disabled",i&&"dragging",o&&"marked",b==="vertical"&&"vertical",I==="inverted"&&"trackInverted",I===!1&&"trackFalse",w&&`color${be(w)}`,S&&`size${be(S)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",S&&`thumbSize${be(S)}`,w&&`thumbColor${be(w)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return wt(R,Qt,$)},ca=({children:e})=>e,da=g.forwardRef(function(a,i){const o=kt({props:a,name:"MuiSlider"}),b=jt(),{"aria-label":I,"aria-valuetext":$,"aria-labelledby":w,component:S="span",components:R={},componentsProps:O={},color:Z="primary",classes:q,className:ze,disableSwap:je=!1,disabled:U=!1,getAriaLabel:de,getAriaValueText:ue,marks:Ie=!1,max:_=100,min:X=0,name:E,onChange:$e,onChangeCommitted:te,orientation:J="horizontal",shiftStep:Q=10,size:G="medium",step:pe=1,scale:W=lt,slotProps:h,slots:m,tabIndex:ae,track:T="normal",value:ve,valueLabelDisplay:L="off",valueLabelFormat:H=lt,...fe}=o,C={...o,isRtl:b,max:_,min:X,classes:q,disabled:U,disableSwap:je,orientation:J,marks:Ie,color:Z,size:G,step:pe,shiftStep:Q,scale:W,track:T,valueLabelDisplay:L,valueLabelFormat:H},{axisProps:ee,getRootProps:Ae,getHiddenInputProps:Me,getThumbProps:we,open:Pe,active:Ce,axis:re,focusedThumbIndex:ne,range:oe,dragging:se,marks:n,values:l,trackOffset:v,trackLeap:p,getThumbStyle:x}=qt({...C,rootRef:i});C.marked=n.length>0&&n.some(M=>M.label),C.dragging=se,C.focusedThumbIndex=ne;const u=la(C),z=(m==null?void 0:m.root)??R.Root??ta,k=(m==null?void 0:m.rail)??R.Rail??aa,F=(m==null?void 0:m.track)??R.Track??ra,ye=(m==null?void 0:m.thumb)??R.Thumb??na,D=(m==null?void 0:m.valueLabel)??R.ValueLabel??oa,ie=(m==null?void 0:m.mark)??R.Mark??sa,le=(m==null?void 0:m.markLabel)??R.MarkLabel??ia,r=(m==null?void 0:m.input)??R.Input??"input",s=(h==null?void 0:h.root)??O.root,c=(h==null?void 0:h.rail)??O.rail,f=(h==null?void 0:h.track)??O.track,y=(h==null?void 0:h.thumb)??O.thumb,d=(h==null?void 0:h.valueLabel)??O.valueLabel,j=(h==null?void 0:h.mark)??O.mark,V=(h==null?void 0:h.markLabel)??O.markLabel,A=(h==null?void 0:h.input)??O.input,Y=he({elementType:z,getSlotProps:Ae,externalSlotProps:s,externalForwardedProps:fe,additionalProps:{...Jt(z)&&{as:S}},ownerState:{...C,...s==null?void 0:s.ownerState},className:[u.root,ze]}),Se=he({elementType:k,externalSlotProps:c,ownerState:C,className:u.rail}),ft=he({elementType:F,externalSlotProps:f,additionalProps:{style:{...ee[re].offset(v),...ee[re].leap(p)}},ownerState:{...C,...f==null?void 0:f.ownerState},className:u.track}),Ye=he({elementType:ye,getSlotProps:we,externalSlotProps:y,ownerState:{...C,...y==null?void 0:y.ownerState},className:u.thumb}),ht=he({elementType:D,externalSlotProps:d,ownerState:{...C,...d==null?void 0:d.ownerState},className:u.valueLabel}),Be=he({elementType:ie,externalSlotProps:j,ownerState:C,className:u.mark}),Ke=he({elementType:le,externalSlotProps:V,ownerState:C,className:u.markLabel}),mt=he({elementType:r,getSlotProps:Me,externalSlotProps:A,ownerState:C});return t.jsxs(z,{...Y,children:[t.jsx(k,{...Se}),t.jsx(F,{...ft}),n.filter(M=>M.value>=X&&M.value<=_).map((M,N)=>{const Xe=Ue(M.value,X,_),Ne=ee[re].offset(Xe);let ce;return T===!1?ce=l.includes(M.value):ce=T==="normal"&&(oe?M.value>=l[0]&&M.value<=l[l.length-1]:M.value<=l[0])||T==="inverted"&&(oe?M.value<=l[0]||M.value>=l[l.length-1]:M.value>=l[0]),t.jsxs(g.Fragment,{children:[t.jsx(ie,{"data-index":N,...Be,...!_e(ie)&&{markActive:ce},style:{...Ne,...Be.style},className:Fe(Be.className,ce&&u.markActive)}),M.label!=null?t.jsx(le,{"aria-hidden":!0,"data-index":N,...Ke,...!_e(le)&&{markLabelActive:ce},style:{...Ne,...Ke.style},className:Fe(u.markLabel,Ke.className,ce&&u.markLabelActive),children:M.label}):null]},N)}),l.map((M,N)=>{const Xe=Ue(M,X,_),Ne=ee[re].offset(Xe),ce=L==="off"?ca:D;return t.jsx(ce,{...!_e(ce)&&{valueLabelFormat:H,valueLabelDisplay:L,value:typeof H=="function"?H(W(M),N):H,index:N,open:Pe===N||Ce===N||L==="on",disabled:U},...ht,children:t.jsx(ye,{"data-index":N,...Ye,className:Fe(u.thumb,Ye.className,Ce===N&&u.active,ne===N&&u.focusVisible),style:{...Ne,...x(N),...Ye.style},children:t.jsx(r,{"data-index":N,"aria-label":de?de(N):I,"aria-valuenow":W(M),"aria-labelledby":w,"aria-valuetext":ue?ue(W(M),N):$,value:l[N],...mt})})},N)})]})});/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pt=Ct("outline","photo-edit","IconPhotoEdit",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4",key:"svg-1"}],["path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596",key:"svg-3"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-4"}]]);const ua=dt(t.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Qe=dt(t.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),pa=({confirmDialog:e,generateTilesLoading:a,handleCancelGenerateTiles:i,handleConfirmGenerateTiles:o})=>{const[b,I]=g.useState(18),$=(S,R)=>{I(R)},w=()=>{o(b)};return t.jsxs(Tt,{open:e.open,onClose:a?void 0:i,"aria-labelledby":"generate-tiles-dialog-title",PaperProps:{sx:{borderRadius:2,minWidth:420,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[t.jsx(Lt,{id:"generate-tiles-dialog-title",sx:{bgcolor:"primary.main",color:"white",fontWeight:600,fontSize:"1.1rem",mb:2},children:"🧱 Generate Raster Tiles"}),t.jsx(zt,{sx:{pt:3,pb:2},children:a?t.jsxs(B,{sx:{textAlign:"center",py:4},children:[t.jsx(It,{}),t.jsx(xe,{variant:"h6",sx:{fontWeight:600,mt:2,mb:1},children:"Starting background job..."}),t.jsxs(xe,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.6,maxWidth:300,mx:"auto"},children:["Your raster tile generation has started. You can track progress in the ",t.jsx("strong",{children:"“Comment”"})," section of this workday."]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(B,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[t.jsx(B,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.jsx(pt,{size:26})}),t.jsx(B,{children:t.jsx(xe,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.6},children:"This process may take few hours depending on image size. Once started, it will run safely in the background — you can monitor progress in the comment box."})})]}),t.jsxs(B,{sx:{mt:4},children:[t.jsxs(xe,{variant:"body2",sx:{fontWeight:500,mb:1},children:["Maximum Zoom Level: ",t.jsx("strong",{children:b})]}),t.jsx(da,{value:b,onChange:$,min:10,max:24,step:1,marks:!0,valueLabelDisplay:"auto"})]})]})}),t.jsxs(At,{sx:{p:3,pt:1,gap:1},children:[t.jsx(ge,{onClick:i,variant:"outlined",disabled:a,sx:{color:"error.main",borderColor:"error.main",fontWeight:500,px:3,"&:hover":{bgcolor:"error.50"}},children:"Cancel"}),t.jsx(ge,{onClick:w,variant:"contained",disabled:a,sx:{bgcolor:"primary.main",color:"white",fontWeight:500,px:3,"&:hover":{bgcolor:"secondary.light",color:"black"}},children:a?"Starting...":"Start Job"})]})]})},fa=[{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],ha=[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],ga=()=>{const e=g.useRef(null),a=g.useRef(null),i=Mt(),{enqueueSnackbar:o}=Pt(),[b,I]=g.useState([]),[$,w]=g.useState(!0),[S,R]=g.useState(null),[O,Z]=g.useState(1),[q]=g.useState(10),[ze,je]=g.useState(0),[U,de]=g.useState(""),[ue,Ie]=g.useState("createdAt:desc"),[_,X]=g.useState(""),E=Rt(n=>n.auth.token),[$e,te]=g.useState({}),J=g.useRef(null),[Q,G]=g.useState({type:"",workDay:null}),[pe,W]=g.useState({}),[h,m]=g.useState({}),[ae,T]=g.useState({open:!1,workDayId:null}),[ve,L]=g.useState(!1);g.useEffect(()=>{(async()=>{var l,v,p,x,u,z;w(!0),R(null);try{const k={page:O,limit:q,sortBy:ue};_&&(k.name=_);const F=await me.get("/work-day",{params:k,headers:{Authorization:E}});I(((l=F.data.data)==null?void 0:l.results)||[]),je(((v=F.data.data)==null?void 0:v.totalResults)||0)}catch(k){console.log(k,"<===== error fetching workdays"),R(((x=(p=k.response)==null?void 0:p.data)==null?void 0:x.message)||k.message),o(((z=(u=k.response)==null?void 0:u.data)==null?void 0:z.message)||k.message||"Failed to fetch work days",{variant:"error"})}finally{w(!1)}})()},[E,O,q,ue,_,o]);const H=n=>n?n.url?n.url:n.Location?n.Location:null:null,fe=async n=>{var v,p,x;const l=n.rawFile;if(!l){o("No file found to download",{variant:"warning"});return}try{const z=(v=(await me.get(`/work-day/get-download-url/${l}`,{headers:{Authorization:E}})).data)==null?void 0:v.data;z?(window.open(z,"_blank"),o("Download started",{variant:"success"})):o("No download link available.",{variant:"warning"})}catch(u){o(((x=(p=u.response)==null?void 0:p.data)==null?void 0:x.message)||u.message||"Download failed",{variant:"error"})}},C=async(n,l)=>{var v,p;te(x=>({...x,[n._id||n.id]:!0}));try{await me.patch(`/work-day/${n._id||n.id}`,{status:l},{headers:{Authorization:E}}),I(x=>x.map(u=>(u._id||u.id)===(n._id||n.id)?{...u,status:l}:u)),o("Status updated!",{variant:"success"})}catch(x){o(((p=(v=x.response)==null?void 0:v.data)==null?void 0:p.message)||x.message||"Failed to update status",{variant:"error"})}finally{te(x=>({...x,[n._id||n.id]:!1}))}},ee=()=>{Z(1),X(U)},Ae=(n,l)=>{G({workDay:n,type:l}),J.current&&J.current.click()},Me=async n=>{var z,k,F,ye;const l=(z=n.target.files)==null?void 0:z[0];if(!l||!Q.type||!Q.workDay)return;const{type:v,workDay:p}=Q,x=l.name.split(".").pop().toLowerCase(),u=`${p.id||p._id}_${v}`;if(v==="tiff"&&x!=="tiff"||v==="zip"&&x!=="zip"){o(`Only .${v.toUpperCase()} files are allowed`,{variant:"error"});return}m(D=>({...D,[u]:!0})),W(D=>({...D,[u]:0}));try{const ie=(await me.post("/work-day/upload-resultFile",{workDayId:p.id||p._id,type:v,filename:l.name,contentType:l.type,size:l.size},{headers:{Authorization:E}})).data.data;console.log(ie,"<=== upload response");const{parts:le,uploadId:r,key:s,partSize:c}=ie,f=[];let y=0;for(;y<l.size;){const j=Math.min(y+c,l.size);f.push(l.slice(y,j)),y=j}const d=[];for(let j=0;j<le.length;j++){const A=(k=(await fetch(le[j].url,{method:"PUT",body:f[j]})).headers.get("ETag"))==null?void 0:k.replace(/"/g,"");d.push({PartNumber:le[j].partNumber,ETag:A});const Y=Math.round((j+1)/le.length*100);W(Se=>({...Se,[u]:Y}))}await me.post("/work-day/complete-upload",{workDayId:p.id||p._id,type:v,key:s,uploadId:r,parts:d},{headers:{Authorization:E}}),o(`${v.toUpperCase()} uploaded successfully (multipart)`,{variant:"success"})}catch(D){o(((ye=(F=D.response)==null?void 0:F.data)==null?void 0:ye.message)||D.message||"Upload failed",{variant:"error"})}finally{m(D=>({...D,[u]:!1})),setTimeout(()=>{W(D=>({...D,[u]:0}))},2e3),J.current&&(J.current.value=""),G({type:"",workDay:null})}},we=n=>{const l=b.find(p=>(p._id||p.id)===n);if(!l){o("Work day not found",{variant:"error"});return}if(!(l.tiffFile&&l.tiffFile.trim()!=="")){o("Please upload .tiff first before generating tiles.",{variant:"warning"});return}T({open:!0,workDayId:n})},Pe=async n=>{var v,p,x;const{workDayId:l}=ae;L(!0);try{(v=(await me.get(`/work-day/generate-tiles/${l}`,{headers:{Authorization:E},params:{maxzoom:n}})).data)!=null&&v.success?(o("Tile generation started successfully! This process will take at least 10 minutes to complete.",{variant:"success"}),T({open:!1,workDayId:null})):o("Failed to start tile generation",{variant:"error"})}catch(u){o(((x=(p=u.response)==null?void 0:p.data)==null?void 0:x.message)||u.message||"Failed to generate tiles",{variant:"error"})}finally{L(!1)}},Ce=()=>{T({open:!1,workDayId:null})},re=n=>{G({workDay:n,type:"dxf"}),e.current&&e.current.click()},ne=n=>{G({workDay:n,type:"zip"}),a.current&&a.current.click()},oe=async()=>{var x,u,z,k;const{workDay:n}=Q,l=(u=(x=e.current)==null?void 0:x.files)==null?void 0:u[0];if(!l){o("Please select a .dxf file",{variant:"warning"});return}if(l.name.split(".").pop().toLowerCase()!=="dxf"){o("Only .dxf files are allowed",{variant:"error"});return}o("Uploading DXF file",{variant:"info"});const p=new FormData;p.append("file",l);try{await me.post(`/mapFeature/overlayUpload/${n._id||n.id}`,p,{headers:{Authorization:E,"Content-Type":"multipart/form-data"}}),o("DXF uploaded successfully!",{variant:"success"}),e.current&&(e.current.value="")}catch(F){console.error("DXF upload failed",F),o(((k=(z=F.response)==null?void 0:z.data)==null?void 0:k.message)||F.message,{variant:"error"})}},se=async()=>{var x,u,z,k;const{workDay:n}=Q,l=(u=(x=a.current)==null?void 0:x.files)==null?void 0:u[0];if(console.log(l,"<=== cad file"),!l){o("Please select a .zip for shapes overlay upload format",{variant:"warning"});return}const v=l.name.split(".").pop().toLowerCase();if(console.log(v,"<=== ext cad"),v!=="zip"){o("Only .zip files are allowed",{variant:"error"});return}o("Uploading Zip file",{variant:"info"});const p=new FormData;p.append("file",l);try{await me.post(`/mapFeature/shapeOverlayUpload/${n._id||n.id}`,p,{headers:{Authorization:E,"Content-Type":"multipart/form-data"}}),o("Shapes uploaded successfully!",{variant:"success"}),a.current&&(a.current.value="")}catch(F){console.error("CAD zip file upload failed",F),o(((k=(z=F.response)==null?void 0:z.data)==null?void 0:k.message)||F.message,{variant:"error"})}};return t.jsxs(Ft,{children:[t.jsx(B,{children:t.jsx(xe,{variant:"h2",mb:2,gutterBottom:!0,children:"Historical Work Days"})}),t.jsxs(tt,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,alignItems:"center",children:[t.jsx($t,{label:"Search by Project",size:"small",value:U,onChange:n=>de(n.target.value),onKeyDown:n=>{n.key==="Enter"&&ee()}}),t.jsx(ge,{variant:"contained",onClick:ee,sx:{minWidth:100},children:"Search"}),t.jsxs(at,{size:"small",sx:{minWidth:150},children:[t.jsx(Nt,{children:"Sort By"}),t.jsx(rt,{value:ue,label:"Sort By",onChange:n=>{Ie(n.target.value),Z(1)},children:ha.map(n=>t.jsx(nt,{value:n.value,children:n.label},n.value))})]})]}),$?t.jsx(xe,{variant:"body1",children:"Loading work days..."}):S?t.jsx(xe,{color:"error",children:S}):t.jsx(t.Fragment,{children:t.jsxs(Et,{sx:{p:3,mx:"auto",mt:3},children:[t.jsx(Wt,{children:t.jsxs(Dt,{size:"small",children:[t.jsx(Vt,{children:t.jsxs(qe,{sx:{bgcolor:i.palette.primary.light},children:[t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Time Stamp"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Historical Date"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Project Name"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Project"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Owner"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Status"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Tiff"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Progress Status"}),t.jsx(P,{sx:{color:i.palette.primary.contrastText},children:"Action"})]})}),t.jsx(Ot,{children:b.length===0?t.jsx(qe,{children:t.jsx(P,{colSpan:7,align:"center",children:"No work days found."})}):b.map(n=>{var z;const l=(z=n.resultFiles)==null?void 0:z[0],v=!!H(l),p=n._id||n.id,x=n.projectId||{},u=x.owner||{};return t.jsxs(qe,{children:[t.jsx(P,{children:n.createdAt?Je(n.createdAt).format("DD/MM/YYYY"):n.name}),t.jsx(P,{children:Je(n.name,"YYYY-MM-DD",!0).isValid()?Je(n.name).format("DD/MM/YYYY"):n.name||"-"}),t.jsx(P,{children:x.name||"-"}),t.jsx(P,{children:x.location||"-"}),t.jsx(P,{children:u.firstName||u.lastName?`${u.firstName||""} ${u.lastName||""}`.trim():u.email||"-"}),t.jsx(P,{children:t.jsx(at,{size:"small",sx:{minWidth:120},children:t.jsx(rt,{value:n.status||"",onChange:k=>C(n,k.target.value),disabled:$e[p],children:fa.map(k=>t.jsx(nt,{value:k.value,children:k.label},k.value))})})}),t.jsx(P,{children:n.tiffFile?n.tiffFile.split("-")[5]:"-"}),t.jsx(P,{children:n!=null&&n.comment?n==null?void 0:n.comment:"-"}),t.jsx(P,{children:t.jsxs(tt,{spacing:1,sx:{minWidth:200},children:[t.jsx(ge,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(ua,{}),onClick:()=>fe(n),disabled:!v&&!n.rawFile,fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Download"}),t.jsxs(B,{children:[t.jsx(ge,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(Qe,{}),onClick:()=>Ae(n,"jpg"),disabled:h[`${p}_jpg`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload Tiff"}),h[`${p}_jpg`]&&t.jsxs(B,{sx:{mt:.5},children:[t.jsxs(xe,{variant:"caption",color:"text.secondary",children:["Uploading..."," ",pe[`${p}_jpg`]||0,"%"]}),t.jsx(B,{sx:{width:"100%",mt:.5},children:t.jsx(B,{sx:{height:3,bgcolor:"grey.200",borderRadius:1.5,overflow:"hidden"},children:t.jsx(B,{sx:{width:`${pe[`${p}_jpg`]||0}%`,height:"100%",bgcolor:"secondary.main",transition:"width 0.3s ease"}})})})]})]}),t.jsx(ge,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(Qe,{}),onClick:()=>re(n),disabled:h[`${n._id||n.id}_dxf`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload DXF"}),t.jsx(ge,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(Qe,{}),onClick:()=>ne(n),disabled:h[`${n._id||n.id}_dxf`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload CAD zip file"}),t.jsx(ge,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(pt,{}),onClick:()=>we(p),disabled:h[`${p}_jpg`]||h[`${p}_kml`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Generate Tiles"})]})})]},p)})})]})}),t.jsx(B,{display:"flex",justifyContent:"center",mt:2,children:t.jsx(_t,{count:Math.ceil(ze/q),page:O,onChange:(n,l)=>Z(l),color:"primary"})})]})}),t.jsx("input",{type:"file",ref:J,style:{display:"none"},onChange:Me}),t.jsx("input",{type:"file",ref:e,style:{display:"none"},accept:".dxf",onChange:oe}),t.jsx("input",{type:"file",ref:a,style:{display:"none"},accept:".zip",onChange:se}),t.jsx(pa,{confirmDialog:ae,generateTilesLoading:ve,handleCancelGenerateTiles:Ce,handleConfirmGenerateTiles:Pe})]})};export{ga as default};
