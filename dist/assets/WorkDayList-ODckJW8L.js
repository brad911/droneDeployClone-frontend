import{r as g,bo as gt,bp as Ne,bq as bt,br as xt,bs as Ge,bt as Oe,bu as qe,bv as vt,bw as He,bx as _e,ao as yt,an as kt,j as t,aq as $e,ap as St,b6 as jt,by as pe,N as ye,at as fe,ar as wt,au as Le,av as Qe,bz as ct,aw as Ct,E as dt,$ as Tt,a0 as Lt,a1 as zt,B as K,bA as It,T as me,a2 as At,l as ve,u as Mt,b as Pt,d as Rt,Q as Nt,S as et,Y as $t,F as tt,I as Ft,y as at,M as rt,a5 as Et,bg as Wt,bh as Dt,bi as Vt,bj as Ze,bb as R,bk as Ot,aE as Je,_ as _t,m as xe}from"./index-D8LqObyy.js";function Ut(e,a,s=(l,b)=>l===b){return e.length===a.length&&e.every((l,b)=>s(l,a[b]))}const Yt=2;function Te(e,a,s,l,b){return s===1?Math.min(e+a,b):Math.max(e-a,l)}function ut(e,a){return e-a}function nt(e,a){const{index:s}=e.reduce((l,b,z)=>{const N=Math.abs(a-b);return l===null||N<l.distance||N===l.distance?{distance:N,index:z}:l},null)??{};return s}function Ee(e,a){if(a.current!==void 0&&e.changedTouches){const s=e;for(let l=0;l<s.changedTouches.length;l+=1){const b=s.changedTouches[l];if(b.identifier===a.current)return{x:b.clientX,y:b.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ue(e,a,s){return(e-a)*100/(s-a)}function Bt(e,a,s){return(s-a)*e+a}function Kt(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),l=s[0].split(".")[1];return(l?l.length:0)+parseInt(s[1],10)}const a=e.toString().split(".")[1];return a?a.length:0}function Xt(e,a,s){const l=Math.round((e-s)/a)*a+s;return Number(l.toFixed(Kt(a)))}function ot({values:e,newValue:a,index:s}){const l=e.slice();return l[s]=a,l.sort(ut)}function We({sliderRef:e,activeIndex:a,setActive:s}){var b,z,N;const l=Oe(e.current);(!((b=e.current)!=null&&b.contains(l.activeElement))||Number((z=l==null?void 0:l.activeElement)==null?void 0:z.getAttribute("data-index"))!==a)&&((N=e.current)==null||N.querySelector(`[type="range"][data-index="${a}"]`).focus()),s&&s(a)}function De(e,a){return typeof e=="number"&&typeof a=="number"?e===a:typeof e=="object"&&typeof a=="object"?Ut(e,a):!1}const Gt={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},qt=e=>e;let Ve;function st(){return Ve===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ve=CSS.supports("touch-action","none"):Ve=!0),Ve}function Zt(e){const{"aria-labelledby":a,defaultValue:s,disabled:l=!1,disableSwap:b=!1,isRtl:z=!1,marks:N=!1,max:j=100,min:v=0,name:M,onChange:O,onChangeCommitted:G,orientation:oe="horizontal",rootRef:ze,scale:he=qt,step:_=1,shiftStep:q=10,tabIndex:ke,value:ge}=e,U=g.useRef(void 0),[$,se]=g.useState(-1),[Ie,Y]=g.useState(-1),[Q,ie]=g.useState(!1),H=g.useRef(0),ee=g.useRef(null),[F,x]=gt({controlled:ge,default:s??v,name:"Slider"}),h=O&&((r,o,i)=>{const u=r.nativeEvent||r,S=new u.constructor(u.type,u);Object.defineProperty(S,"target",{writable:!0,value:{value:o,name:M}}),ee.current=o,O(S,o,i)}),Z=Array.isArray(F);let L=Z?F.slice().sort(ut):[F];L=L.map(r=>r==null?v:Ne(r,v,j));const le=N===!0&&_!==null?[...Array(Math.floor((j-v)/_)+1)].map((r,o)=>({value:v+_*o})):N||[],T=le.map(r=>r.value),[J,ce]=g.useState(-1),k=g.useRef(null),te=bt(ze,k),Ae=r=>o=>{var u;const i=Number(o.currentTarget.getAttribute("data-index"));He(o.target)&&ce(i),Y(i),(u=r==null?void 0:r.onFocus)==null||u.call(r,o)},Me=r=>o=>{var i;He(o.target)||ce(-1),Y(-1),(i=r==null?void 0:r.onBlur)==null||i.call(r,o)},Se=(r,o)=>{const i=Number(r.currentTarget.getAttribute("data-index")),u=L[i],S=T.indexOf(u);let c=o;if(le&&_==null){const I=T[T.length-1];c>=I?c=I:c<=T[0]?c=T[0]:c=c<u?T[S-1]:T[S+1]}if(c=Ne(c,v,j),Z){b&&(c=Ne(c,L[i-1]||-1/0,L[i+1]||1/0));const I=c;c=ot({values:L,newValue:c,index:i});let W=i;b||(W=c.indexOf(I)),We({sliderRef:k,activeIndex:W})}x(c),ce(i),h&&!De(c,F)&&h(r,c,i),G&&G(r,ee.current??c)},Pe=r=>o=>{var i;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(o.key)){o.preventDefault();const u=Number(o.currentTarget.getAttribute("data-index")),S=L[u];let c=null;if(_!=null){const I=o.shiftKey?q:_;switch(o.key){case"ArrowUp":c=Te(S,I,1,v,j);break;case"ArrowRight":c=Te(S,I,z?-1:1,v,j);break;case"ArrowDown":c=Te(S,I,-1,v,j);break;case"ArrowLeft":c=Te(S,I,z?1:-1,v,j);break;case"PageUp":c=Te(S,q,1,v,j);break;case"PageDown":c=Te(S,q,-1,v,j);break;case"Home":c=v;break;case"End":c=j;break}}else if(le){const I=T[T.length-1],W=T.indexOf(S),P=[z?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],B=[z?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];P.includes(o.key)?W===0?c=T[0]:c=T[W-1]:B.includes(o.key)&&(W===T.length-1?c=I:c=T[W+1])}c!=null&&Se(o,c)}(i=r==null?void 0:r.onKeyDown)==null||i.call(r,o)};xt(()=>{var r;l&&k.current.contains(document.activeElement)&&((r=document.activeElement)==null||r.blur())},[l]),l&&$!==-1&&se(-1),l&&J!==-1&&ce(-1);const je=r=>o=>{var i;(i=r.onChange)==null||i.call(r,o),Se(o,o.target.valueAsNumber)},ae=g.useRef(void 0);let n=oe;z&&oe==="horizontal"&&(n+="-reverse");const f=({finger:r,move:o=!1})=>{const{current:i}=k,{width:u,height:S,bottom:c,left:I}=i.getBoundingClientRect();let W;n.startsWith("vertical")?W=(c-r.y)/S:W=(r.x-I)/u,n.includes("-reverse")&&(W=1-W);let P;if(P=Bt(W,v,j),_)P=Xt(P,_,v);else{const Re=nt(T,P);P=T[Re]}P=Ne(P,v,j);let B=0;if(Z){o?B=ae.current:B=nt(L,P),b&&(P=Ne(P,L[B-1]||-1/0,L[B+1]||1/0));const Re=P;P=ot({values:L,newValue:P,index:B}),b&&o||(B=P.indexOf(Re),ae.current=B)}return{newValue:P,activeIndex:B}},y=Ge(r=>{const o=Ee(r,U);if(!o)return;if(H.current+=1,r.type==="mousemove"&&r.buttons===0){d(r);return}const{newValue:i,activeIndex:u}=f({finger:o,move:!0});We({sliderRef:k,activeIndex:u,setActive:se}),x(i),!Q&&H.current>Yt&&ie(!0),h&&!De(i,F)&&h(r,i,u)}),d=Ge(r=>{const o=Ee(r,U);if(ie(!1),!o)return;const{newValue:i}=f({finger:o,move:!0});se(-1),r.type==="touchend"&&Y(-1),G&&G(r,ee.current??i),U.current=void 0,m()}),p=Ge(r=>{if(l)return;st()||r.preventDefault();const o=r.changedTouches[0];o!=null&&(U.current=o.identifier);const i=Ee(r,U);if(i!==!1){const{newValue:S,activeIndex:c}=f({finger:i});We({sliderRef:k,activeIndex:c,setActive:se}),x(S),h&&!De(S,F)&&h(r,S,c)}H.current=0;const u=Oe(k.current);u.addEventListener("touchmove",y,{passive:!0}),u.addEventListener("touchend",d,{passive:!0})}),m=g.useCallback(()=>{const r=Oe(k.current);r.removeEventListener("mousemove",y),r.removeEventListener("mouseup",d),r.removeEventListener("touchmove",y),r.removeEventListener("touchend",d)},[d,y]);g.useEffect(()=>{const{current:r}=k;return r.addEventListener("touchstart",p,{passive:st()}),()=>{r.removeEventListener("touchstart",p),m()}},[m,p]),g.useEffect(()=>{l&&m()},[l,m]);const E=r=>o=>{var S;if((S=r.onMouseDown)==null||S.call(r,o),l||o.defaultPrevented||o.button!==0)return;o.preventDefault();const i=Ee(o,U);if(i!==!1){const{newValue:c,activeIndex:I}=f({finger:i});We({sliderRef:k,activeIndex:I,setActive:se}),x(c),h&&!De(c,F)&&h(o,c,I)}H.current=0;const u=Oe(k.current);u.addEventListener("mousemove",y,{passive:!0}),u.addEventListener("mouseup",d)},w=Ue(Z?L[0]:v,v,j),C=Ue(L[L.length-1],v,j)-w,de=(r={})=>{const o=qe(r),i={onMouseDown:E(o||{})},u={...o,...i};return{...r,ref:te,...u}},V=r=>o=>{var u;(u=r.onMouseOver)==null||u.call(r,o);const i=Number(o.currentTarget.getAttribute("data-index"));Y(i)},be=r=>o=>{var i;(i=r.onMouseLeave)==null||i.call(r,o),Y(-1)},re=(r={})=>{const o=qe(r),i={onMouseOver:V(o||{}),onMouseLeave:be(o||{})};return{...r,...o,...i}},we=r=>({pointerEvents:$!==-1&&$!==r?"none":void 0});let ue;return oe==="vertical"&&(ue=z?"vertical-rl":"vertical-lr"),{active:$,axis:n,axisProps:Gt,dragging:Q,focusedThumbIndex:J,getHiddenInputProps:(r={})=>{const o=qe(r),i={onChange:je(o||{}),onFocus:Ae(o||{}),onBlur:Me(o||{}),onKeyDown:Pe(o||{})},u={...o,...i};return{tabIndex:ke,"aria-labelledby":a,"aria-orientation":oe,"aria-valuemax":he(j),"aria-valuemin":he(v),name:M,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:l,...r,...u,style:{...vt,direction:z?"rtl":"ltr",width:"100%",height:"100%",writingMode:ue}}},getRootProps:de,getThumbProps:re,marks:le,open:Ie,range:Z,rootRef:te,trackLeap:C,trackOffset:w,values:L,getThumbStyle:we}}const Jt=e=>!e||!_e(e);function Qt(e){return kt("MuiSlider",e)}const X=yt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ht=e=>{const{open:a}=e;return{offset:$e(a&&X.valueLabelOpen),circle:X.valueLabelCircle,label:X.valueLabelLabel}};function ea(e){const{children:a,className:s,value:l}=e,b=Ht(e);return a?g.cloneElement(a,{className:a.props.className},t.jsxs(g.Fragment,{children:[a.props.children,t.jsx("span",{className:$e(b.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:b.circle,children:t.jsx("span",{className:b.label,children:l})})})]})):null}function it(e){return e}const ta=ye("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,a[`color${fe(s.color)}`],s.size!=="medium"&&a[`size${fe(s.size)}`],s.marked&&a.marked,s.orientation==="vertical"&&a.vertical,s.track==="inverted"&&a.trackInverted,s.track===!1&&a.trackFalse]}})(Le(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${X.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${X.dragging}`]:{[`& .${X.thumb}, & .${X.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),aa=ye("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),ra=ye("span",{name:"MuiSlider",slot:"Track"})(Le(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:{backgroundColor:e.lighten(e.palette[a].main,.62),borderColor:e.lighten(e.palette[a].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[a].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[a].main,.5)})}}}))]}))),na=ye("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.thumb,a[`thumbColor${fe(s.color)}`],s.size!=="medium"&&a[`thumbSize${fe(s.size)}`]]}})(Le(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${X.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a},style:{[`&:hover, &.${X.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[a].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${X.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[a].main,.16)}`}}}))]}))),oa=ye(ea,{name:"MuiSlider",slot:"ValueLabel"})(Le(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),sa=ye("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ct(e)&&e!=="markActive",overridesResolver:(e,a)=>{const{markActive:s}=e;return[a.mark,s&&a.markActive]}})(Le(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),ia=ye("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ct(e)&&e!=="markLabelActive"})(Le(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),la=e=>{const{disabled:a,dragging:s,marked:l,orientation:b,track:z,classes:N,color:j,size:v}=e,M={root:["root",a&&"disabled",s&&"dragging",l&&"marked",b==="vertical"&&"vertical",z==="inverted"&&"trackInverted",z===!1&&"trackFalse",j&&`color${fe(j)}`,v&&`size${fe(v)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",v&&`thumbSize${fe(v)}`,j&&`thumbColor${fe(j)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return wt(M,Qt,N)},ca=({children:e})=>e,da=g.forwardRef(function(a,s){const l=St({props:a,name:"MuiSlider"}),b=jt(),{"aria-label":z,"aria-valuetext":N,"aria-labelledby":j,component:v="span",components:M={},componentsProps:O={},color:G="primary",classes:oe,className:ze,disableSwap:he=!1,disabled:_=!1,getAriaLabel:q,getAriaValueText:ke,marks:ge=!1,max:U=100,min:$=0,name:se,onChange:Ie,onChangeCommitted:Y,orientation:Q="horizontal",shiftStep:ie=10,size:H="medium",step:ee=1,scale:F=it,slotProps:x,slots:h,tabIndex:Z,track:L="normal",value:le,valueLabelDisplay:T="off",valueLabelFormat:J=it,...ce}=l,k={...l,isRtl:b,max:U,min:$,classes:oe,disabled:_,disableSwap:he,orientation:Q,marks:ge,color:G,size:H,step:ee,shiftStep:ie,scale:F,track:L,valueLabelDisplay:T,valueLabelFormat:J},{axisProps:te,getRootProps:Ae,getHiddenInputProps:Me,getThumbProps:Se,open:Pe,active:je,axis:ae,focusedThumbIndex:n,range:f,dragging:y,marks:d,values:p,trackOffset:m,trackLeap:E,getThumbStyle:w}=Zt({...k,rootRef:s});k.marked=d.length>0&&d.some(A=>A.label),k.dragging=y,k.focusedThumbIndex=n;const C=la(k),de=(h==null?void 0:h.root)??M.Root??ta,V=(h==null?void 0:h.rail)??M.Rail??aa,be=(h==null?void 0:h.track)??M.Track??ra,re=(h==null?void 0:h.thumb)??M.Thumb??na,we=(h==null?void 0:h.valueLabel)??M.ValueLabel??oa,ue=(h==null?void 0:h.mark)??M.Mark??sa,Ce=(h==null?void 0:h.markLabel)??M.MarkLabel??ia,r=(h==null?void 0:h.input)??M.Input??"input",o=(x==null?void 0:x.root)??O.root,i=(x==null?void 0:x.rail)??O.rail,u=(x==null?void 0:x.track)??O.track,S=(x==null?void 0:x.thumb)??O.thumb,c=(x==null?void 0:x.valueLabel)??O.valueLabel,I=(x==null?void 0:x.mark)??O.mark,W=(x==null?void 0:x.markLabel)??O.markLabel,P=(x==null?void 0:x.input)??O.input,B=pe({elementType:de,getSlotProps:Ae,externalSlotProps:o,externalForwardedProps:ce,additionalProps:{...Jt(de)&&{as:v}},ownerState:{...k,...o==null?void 0:o.ownerState},className:[C.root,ze]}),Re=pe({elementType:V,externalSlotProps:i,ownerState:k,className:C.rail}),ft=pe({elementType:be,externalSlotProps:u,additionalProps:{style:{...te[ae].offset(m),...te[ae].leap(E)}},ownerState:{...k,...u==null?void 0:u.ownerState},className:C.track}),Ye=pe({elementType:re,getSlotProps:Se,externalSlotProps:S,ownerState:{...k,...S==null?void 0:S.ownerState},className:C.thumb}),mt=pe({elementType:we,externalSlotProps:c,ownerState:{...k,...c==null?void 0:c.ownerState},className:C.valueLabel}),Be=pe({elementType:ue,externalSlotProps:I,ownerState:k,className:C.mark}),Ke=pe({elementType:Ce,externalSlotProps:W,ownerState:k,className:C.markLabel}),ht=pe({elementType:r,getSlotProps:Me,externalSlotProps:P,ownerState:k});return t.jsxs(de,{...B,children:[t.jsx(V,{...Re}),t.jsx(be,{...ft}),d.filter(A=>A.value>=$&&A.value<=U).map((A,D)=>{const Xe=Ue(A.value,$,U),Fe=te[ae].offset(Xe);let ne;return L===!1?ne=p.includes(A.value):ne=L==="normal"&&(f?A.value>=p[0]&&A.value<=p[p.length-1]:A.value<=p[0])||L==="inverted"&&(f?A.value<=p[0]||A.value>=p[p.length-1]:A.value>=p[0]),t.jsxs(g.Fragment,{children:[t.jsx(ue,{"data-index":D,...Be,...!_e(ue)&&{markActive:ne},style:{...Fe,...Be.style},className:$e(Be.className,ne&&C.markActive)}),A.label!=null?t.jsx(Ce,{"aria-hidden":!0,"data-index":D,...Ke,...!_e(Ce)&&{markLabelActive:ne},style:{...Fe,...Ke.style},className:$e(C.markLabel,Ke.className,ne&&C.markLabelActive),children:A.label}):null]},D)}),p.map((A,D)=>{const Xe=Ue(A,$,U),Fe=te[ae].offset(Xe),ne=T==="off"?ca:we;return t.jsx(ne,{...!_e(ne)&&{valueLabelFormat:J,valueLabelDisplay:T,value:typeof J=="function"?J(F(A),D):J,index:D,open:Pe===D||je===D||T==="on",disabled:_},...mt,children:t.jsx(re,{"data-index":D,...Ye,className:$e(C.thumb,Ye.className,je===D&&C.active,n===D&&C.focusVisible),style:{...Fe,...w(D),...Ye.style},children:t.jsx(r,{"data-index":D,"aria-label":q?q(D):z,"aria-valuenow":F(A),"aria-labelledby":j,"aria-valuetext":ke?ke(F(A),D):N,value:p[D],...ht})})},D)})]})});/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pt=Ct("outline","photo-edit","IconPhotoEdit",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4",key:"svg-1"}],["path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596",key:"svg-3"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-4"}]]);const ua=dt(t.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),lt=dt(t.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),pa=({confirmDialog:e,generateTilesLoading:a,handleCancelGenerateTiles:s,handleConfirmGenerateTiles:l})=>{const[b,z]=g.useState(18),N=(v,M)=>{z(M)},j=()=>{l(b)};return t.jsxs(Tt,{open:e.open,onClose:a?void 0:s,"aria-labelledby":"generate-tiles-dialog-title",PaperProps:{sx:{borderRadius:2,minWidth:420,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[t.jsx(Lt,{id:"generate-tiles-dialog-title",sx:{bgcolor:"primary.main",color:"white",fontWeight:600,fontSize:"1.1rem",mb:2},children:"🧱 Generate Raster Tiles"}),t.jsx(zt,{sx:{pt:3,pb:2},children:a?t.jsxs(K,{sx:{textAlign:"center",py:4},children:[t.jsx(It,{}),t.jsx(me,{variant:"h6",sx:{fontWeight:600,mt:2,mb:1},children:"Starting background job..."}),t.jsxs(me,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.6,maxWidth:300,mx:"auto"},children:["Your raster tile generation has started. You can track progress in the ",t.jsx("strong",{children:"“Comment”"})," section of this workday."]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(K,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[t.jsx(K,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.jsx(pt,{size:26})}),t.jsx(K,{children:t.jsx(me,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.6},children:"This process may take few hours depending on image size. Once started, it will run safely in the background — you can monitor progress in the comment box."})})]}),t.jsxs(K,{sx:{mt:4},children:[t.jsxs(me,{variant:"body2",sx:{fontWeight:500,mb:1},children:["Maximum Zoom Level: ",t.jsx("strong",{children:b})]}),t.jsx(da,{value:b,onChange:N,min:10,max:24,step:1,marks:!0,valueLabelDisplay:"auto"})]})]})}),t.jsxs(At,{sx:{p:3,pt:1,gap:1},children:[t.jsx(ve,{onClick:s,variant:"outlined",disabled:a,sx:{color:"error.main",borderColor:"error.main",fontWeight:500,px:3,"&:hover":{bgcolor:"error.50"}},children:"Cancel"}),t.jsx(ve,{onClick:j,variant:"contained",disabled:a,sx:{bgcolor:"primary.main",color:"white",fontWeight:500,px:3,"&:hover":{bgcolor:"secondary.light",color:"black"}},children:a?"Starting...":"Start Job"})]})]})},fa=[{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],ma=[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],ga=()=>{const e=g.useRef(null),a=Mt(),{enqueueSnackbar:s}=Pt(),[l,b]=g.useState([]),[z,N]=g.useState(!0),[j,v]=g.useState(null),[M,O]=g.useState(1),[G]=g.useState(10),[oe,ze]=g.useState(0),[he,_]=g.useState(""),[q,ke]=g.useState("createdAt:desc"),[ge,U]=g.useState(""),$=Rt(n=>n.auth.token),[se,Ie]=g.useState({}),Y=g.useRef(null),[Q,ie]=g.useState({type:"",workDay:null}),[H,ee]=g.useState({}),[F,x]=g.useState({}),[h,Z]=g.useState({open:!1,workDayId:null}),[L,le]=g.useState(!1);g.useEffect(()=>{(async()=>{var f,y,d,p,m,E;N(!0),v(null);try{const w={page:M,limit:G,sortBy:q};ge&&(w.name=ge);const C=await xe.get("/work-day",{params:w,headers:{Authorization:$}});b(((f=C.data.data)==null?void 0:f.results)||[]),ze(((y=C.data.data)==null?void 0:y.totalResults)||0)}catch(w){console.log(w,"<===== error fetching workdays"),v(((p=(d=w.response)==null?void 0:d.data)==null?void 0:p.message)||w.message),s(((E=(m=w.response)==null?void 0:m.data)==null?void 0:E.message)||w.message||"Failed to fetch work days",{variant:"error"})}finally{N(!1)}})()},[$,M,G,q,ge,s]);const T=n=>n?n.url?n.url:n.Location?n.Location:null:null,J=async n=>{var y,d,p;const f=n.rawFile;if(!f){s("No file found to download",{variant:"warning"});return}try{const E=(y=(await xe.get(`/work-day/get-download-url/${f}`,{headers:{Authorization:$}})).data)==null?void 0:y.data;E?(window.open(E,"_blank"),s("Download started",{variant:"success"})):s("No download link available.",{variant:"warning"})}catch(m){s(((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.message)||m.message||"Download failed",{variant:"error"})}},ce=async(n,f)=>{var y,d;Ie(p=>({...p,[n._id||n.id]:!0}));try{await xe.patch(`/work-day/${n._id||n.id}`,{status:f},{headers:{Authorization:$}}),b(p=>p.map(m=>(m._id||m.id)===(n._id||n.id)?{...m,status:f}:m)),s("Status updated!",{variant:"success"})}catch(p){s(((d=(y=p.response)==null?void 0:y.data)==null?void 0:d.message)||p.message||"Failed to update status",{variant:"error"})}finally{Ie(p=>({...p,[n._id||n.id]:!1}))}},k=()=>{O(1),U(he)},te=(n,f)=>{ie({workDay:n,type:f}),Y.current&&Y.current.click()},Ae=async n=>{var E,w,C,de;const f=(E=n.target.files)==null?void 0:E[0];if(!f||!Q.type||!Q.workDay)return;const{type:y,workDay:d}=Q,p=f.name.split(".").pop().toLowerCase(),m=`${d.id||d._id}_${y}`;if(y==="tiff"&&p!=="tiff"){s(`Only .${y.toUpperCase()} files are allowed`,{variant:"error"});return}x(V=>({...V,[m]:!0})),ee(V=>({...V,[m]:0}));try{const be=(await xe.post("/work-day/upload-resultFile",{workDayId:d.id||d._id,type:y,filename:f.name,contentType:f.type,size:f.size},{headers:{Authorization:$}})).data.data;console.log(be,"<=== upload response");const{parts:re,uploadId:we,key:ue,partSize:Ce}=be,r=[];let o=0;for(;o<f.size;){const u=Math.min(o+Ce,f.size);r.push(f.slice(o,u)),o=u}const i=[];for(let u=0;u<re.length;u++){const c=(w=(await fetch(re[u].url,{method:"PUT",body:r[u]})).headers.get("ETag"))==null?void 0:w.replace(/"/g,"");i.push({PartNumber:re[u].partNumber,ETag:c});const I=Math.round((u+1)/re.length*100);ee(W=>({...W,[m]:I}))}await xe.post("/work-day/complete-upload",{workDayId:d.id||d._id,type:y,key:ue,uploadId:we,parts:i},{headers:{Authorization:$}}),s(`${y.toUpperCase()} uploaded successfully (multipart)`,{variant:"success"})}catch(V){s(((de=(C=V.response)==null?void 0:C.data)==null?void 0:de.message)||V.message||"Upload failed",{variant:"error"})}finally{x(V=>({...V,[m]:!1})),setTimeout(()=>{ee(V=>({...V,[m]:0}))},2e3),Y.current&&(Y.current.value=""),ie({type:"",workDay:null})}},Me=n=>{const f=l.find(d=>(d._id||d.id)===n);if(!f){s("Work day not found",{variant:"error"});return}if(!(f.tiffFile&&f.tiffFile.trim()!=="")){s("Please upload .tiff first before generating tiles.",{variant:"warning"});return}Z({open:!0,workDayId:n})},Se=async n=>{var y,d,p;const{workDayId:f}=h;le(!0);try{(y=(await xe.get(`/work-day/generate-tiles/${f}`,{headers:{Authorization:$},params:{maxzoom:n}})).data)!=null&&y.success?(s("Tile generation started successfully! This process will take at least 10 minutes to complete.",{variant:"success"}),Z({open:!1,workDayId:null})):s("Failed to start tile generation",{variant:"error"})}catch(m){s(((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.message)||m.message||"Failed to generate tiles",{variant:"error"})}finally{le(!1)}},Pe=()=>{Z({open:!1,workDayId:null})},je=n=>{ie({workDay:n,type:"dxf"}),e.current&&e.current.click()},ae=async()=>{var p,m,E,w;const{workDay:n}=Q,f=(m=(p=e.current)==null?void 0:p.files)==null?void 0:m[0];if(!f){s("Please select a .dxf file",{variant:"warning"});return}if(f.name.split(".").pop().toLowerCase()!=="dxf"){s("Only .dxf files are allowed",{variant:"error"});return}s("Uploading DXF file",{variant:"info"});const d=new FormData;d.append("file",f);try{await xe.post(`/mapFeature/overlayUpload/${n._id||n.id}`,d,{headers:{Authorization:$,"Content-Type":"multipart/form-data"}}),s("DXF uploaded successfully!",{variant:"success"}),e.current&&(e.current.value="")}catch(C){console.error("DXF upload failed",C),s(((w=(E=C.response)==null?void 0:E.data)==null?void 0:w.message)||C.message,{variant:"error"})}};return t.jsxs(Nt,{children:[t.jsx(K,{children:t.jsx(me,{variant:"h2",mb:2,gutterBottom:!0,children:"Historical Work Days"})}),t.jsxs(et,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,alignItems:"center",children:[t.jsx($t,{label:"Search by Project",size:"small",value:he,onChange:n=>_(n.target.value),onKeyDown:n=>{n.key==="Enter"&&k()}}),t.jsx(ve,{variant:"contained",onClick:k,sx:{minWidth:100},children:"Search"}),t.jsxs(tt,{size:"small",sx:{minWidth:150},children:[t.jsx(Ft,{children:"Sort By"}),t.jsx(at,{value:q,label:"Sort By",onChange:n=>{ke(n.target.value),O(1)},children:ma.map(n=>t.jsx(rt,{value:n.value,children:n.label},n.value))})]})]}),z?t.jsx(me,{variant:"body1",children:"Loading work days..."}):j?t.jsx(me,{color:"error",children:j}):t.jsx(t.Fragment,{children:t.jsxs(Et,{sx:{p:3,mx:"auto",mt:3},children:[t.jsx(Wt,{children:t.jsxs(Dt,{size:"small",children:[t.jsx(Vt,{children:t.jsxs(Ze,{sx:{bgcolor:a.palette.primary.light},children:[t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Time Stamp"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Historical Date"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Project Name"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Project"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Owner"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Status"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Tiff"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Progress Status"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Action"})]})}),t.jsx(Ot,{children:l.length===0?t.jsx(Ze,{children:t.jsx(R,{colSpan:7,align:"center",children:"No work days found."})}):l.map(n=>{var E;const f=(E=n.resultFiles)==null?void 0:E[0],y=!!T(f),d=n._id||n.id,p=n.projectId||{},m=p.owner||{};return t.jsxs(Ze,{children:[t.jsx(R,{children:n.createdAt?Je(n.createdAt).format("DD/MM/YYYY"):n.name}),t.jsx(R,{children:Je(n.name,"YYYY-MM-DD",!0).isValid()?Je(n.name).format("DD/MM/YYYY"):n.name||"-"}),t.jsx(R,{children:p.name||"-"}),t.jsx(R,{children:p.location||"-"}),t.jsx(R,{children:m.firstName||m.lastName?`${m.firstName||""} ${m.lastName||""}`.trim():m.email||"-"}),t.jsx(R,{children:t.jsx(tt,{size:"small",sx:{minWidth:120},children:t.jsx(at,{value:n.status||"",onChange:w=>ce(n,w.target.value),disabled:se[d],children:fa.map(w=>t.jsx(rt,{value:w.value,children:w.label},w.value))})})}),t.jsx(R,{children:n.tiffFile?n.tiffFile.split("-")[5]:"-"}),t.jsx(R,{children:n!=null&&n.comment?n==null?void 0:n.comment:"-"}),t.jsx(R,{children:t.jsxs(et,{spacing:1,sx:{minWidth:200},children:[t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(ua,{}),onClick:()=>J(n),disabled:!y&&!n.rawFile,fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Download"}),t.jsxs(K,{children:[t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(lt,{}),onClick:()=>te(n,"jpg"),disabled:F[`${d}_jpg`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload Tiff"}),F[`${d}_jpg`]&&t.jsxs(K,{sx:{mt:.5},children:[t.jsxs(me,{variant:"caption",color:"text.secondary",children:["Uploading..."," ",H[`${d}_jpg`]||0,"%"]}),t.jsx(K,{sx:{width:"100%",mt:.5},children:t.jsx(K,{sx:{height:3,bgcolor:"grey.200",borderRadius:1.5,overflow:"hidden"},children:t.jsx(K,{sx:{width:`${H[`${d}_jpg`]||0}%`,height:"100%",bgcolor:"secondary.main",transition:"width 0.3s ease"}})})})]})]}),t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(lt,{}),onClick:()=>je(n),disabled:F[`${n._id||n.id}_dxf`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload DXF"}),t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(pt,{}),onClick:()=>Me(d),disabled:F[`${d}_jpg`]||F[`${d}_kml`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Generate Tiles"})]})})]},d)})})]})}),t.jsx(K,{display:"flex",justifyContent:"center",mt:2,children:t.jsx(_t,{count:Math.ceil(oe/G),page:M,onChange:(n,f)=>O(f),color:"primary"})})]})}),t.jsx("input",{type:"file",ref:Y,style:{display:"none"},onChange:Ae}),t.jsx("input",{type:"file",ref:e,style:{display:"none"},accept:".dxf",onChange:ae}),t.jsx(pa,{confirmDialog:h,generateTilesLoading:L,handleCancelGenerateTiles:Pe,handleConfirmGenerateTiles:Se})]})};export{ga as default};
