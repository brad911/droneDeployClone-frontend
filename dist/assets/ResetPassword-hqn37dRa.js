import{u as S,a as z,r as A,b as D,e as R,f as q,g as x,p as L,j as e,T as i,G as r,B as $,A as F,q as V,h as W,i as M,k as O,l as T,m as Q,L as p,n as E,S as G,D as H}from"./index-CXTiRXnN.js";import{V as w,a as j}from"./VisibilityOff-Di1Osey0.js";import{F as f,O as g}from"./OutlinedInput-DiNMEi7e.js";import{I as y,B as Z}from"./InputLabel-Dkfgapct.js";import{I as P}from"./InputAdornment-0SwVTTu4.js";import{I as b}from"./IconButton-DffSpnyN.js";function N(){const a=S(),t=z(),[o,v]=A.useState(!1),c=()=>v(n=>!n),d=n=>n.preventDefault(),{enqueueSnackbar:l}=D(),C=/^(?=.*[A-Z])(?=.*\d)(?=.*[@!#$%^&*])[A-Za-z\d@!#$%^&*]{12,}$/,I=new URLSearchParams(V().search).get("token"),k=async(n,{setSubmitting:B})=>{var u,h;try{(await W.post("auth/reset-password",n,{params:{token:I}})).status===200&&(l("Password has been succcessfully changed!",{variant:"success"}),t("/login"))}catch(m){l(((h=(u=m.response)==null?void 0:u.data)==null?void 0:h.message)||"Login failed. Please try again.",{variant:"error"})}finally{B(!1)}},s=R({initialValues:{password:"",confirmPassword:""},validationSchema:q({password:x().required("Password is required").matches(C,"Password must be at least 12 characters and include an uppercase letter, a number, and a special character (@!#$%^&*)"),confirmPassword:x().required("Confirm Password is required").oneOf([L("password"),null],"Passwords must match")}),onSubmit:k});return e.jsxs("form",{noValidate:!0,onSubmit:s.handleSubmit,children:[e.jsxs(f,{fullWidth:!0,sx:{...a.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(y,{htmlFor:"password",children:"Password"}),e.jsx(g,{id:"password",type:o?"text":"password",value:s.values.password,name:"password",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(P,{position:"end",children:e.jsx(b,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:d,edge:"end",size:"large",children:o?e.jsx(w,{}):e.jsx(j,{})})}),label:"Password"}),s.touched.password&&s.errors.password&&e.jsx(i,{color:"error",variant:"caption",children:s.errors.password})]}),e.jsxs(f,{fullWidth:!0,sx:{...a.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(y,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(g,{id:"confirmPassword",type:o?"text":"password",value:s.values.confirmPassword,name:"confirmPassword",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(P,{position:"end",children:e.jsx(b,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:d,edge:"end",size:"large",children:o?e.jsx(w,{}):e.jsx(j,{})})}),label:"confirmPassword"})]}),s.touched.confirmPassword&&s.errors.confirmPassword&&e.jsx(i,{color:"error",variant:"caption",children:s.errors.confirmPassword}),e.jsx(r,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"}}),e.jsx($,{sx:{mt:2},children:e.jsx(F,{children:e.jsx(Z,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Reset Password"})})})]})}function re(){const a=M();return O(t=>t.breakpoints.down("md")),e.jsx(T,{children:e.jsx(r,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(r,{size:12,children:e.jsx(r,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 38px)"},children:e.jsx(r,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(Q,{children:e.jsxs(r,{container:!0,spacing:0,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{sx:{mb:3},children:e.jsx(p,{style:{textDecoration:"none"},to:"#","aria-label":"theme logo",children:e.jsx(E,{})})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(r,{children:e.jsx(G,{spacing:1,sx:{alignItems:"center",justifyContent:"center"}})})})}),e.jsx(r,{size:12,children:e.jsx(N,{})}),e.jsx(r,{size:12,children:e.jsx(H,{})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(i,{component:p,to:"/login",variant:"subtitle1",sx:{textDecoration:"underline",textDecorationColor:a.palette.secondary[200],color:"inherit","&:hover":{textDecorationColor:a.palette.secondary[800]}},children:"Already have an account?"})})})]})})})})})})})}export{re as default};
