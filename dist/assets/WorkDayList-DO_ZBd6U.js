import{r as g,bo as vt,bp as $e,bq as yt,b0 as St,b5 as Ge,b6 as Oe,br as Ze,bs as kt,bt as He,bu as _e,am as wt,al as jt,j as t,ao as Ne,an as Ct,b3 as Tt,b4 as pe,N as ye,ar as fe,ap as Lt,as as Le,av as Qe,au as et,at as tt,bv as at,bw as pt,aw as zt,E as ft,$ as It,a0 as At,a1 as Mt,B as K,bx as Pt,T as me,a2 as Rt,l as ve,u as $t,b as Nt,d as Ft,Q as Et,S as rt,Y as Wt,F as nt,I as Dt,y as st,M as ot,a6 as Vt,bg as Ot,bh as _t,bi as Ut,bj as qe,bb as R,bk as Yt,aE as Je,_ as Bt,m as xe}from"./index-9_Qr9l7c.js";function Kt(e,a,o=(l,b)=>l===b){return e.length===a.length&&e.every((l,b)=>o(l,a[b]))}const Xt=2;function Te(e,a,o,l,b){return o===1?Math.min(e+a,b):Math.max(e-a,l)}function mt(e,a){return e-a}function it(e,a){const{index:o}=e.reduce((l,b,z)=>{const $=Math.abs(a-b);return l===null||$<l.distance||$===l.distance?{distance:$,index:z}:l},null)??{};return o}function Ee(e,a){if(a.current!==void 0&&e.changedTouches){const o=e;for(let l=0;l<o.changedTouches.length;l+=1){const b=o.changedTouches[l];if(b.identifier===a.current)return{x:b.clientX,y:b.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ue(e,a,o){return(e-a)*100/(o-a)}function Gt(e,a,o){return(o-a)*e+a}function Zt(e){if(Math.abs(e)<1){const o=e.toExponential().split("e-"),l=o[0].split(".")[1];return(l?l.length:0)+parseInt(o[1],10)}const a=e.toString().split(".")[1];return a?a.length:0}function qt(e,a,o){const l=Math.round((e-o)/a)*a+o;return Number(l.toFixed(Zt(a)))}function lt({values:e,newValue:a,index:o}){const l=e.slice();return l[o]=a,l.sort(mt)}function We({sliderRef:e,activeIndex:a,setActive:o}){var b,z,$;const l=Oe(e.current);(!((b=e.current)!=null&&b.contains(l.activeElement))||Number((z=l==null?void 0:l.activeElement)==null?void 0:z.getAttribute("data-index"))!==a)&&(($=e.current)==null||$.querySelector(`[type="range"][data-index="${a}"]`).focus()),o&&o(a)}function De(e,a){return typeof e=="number"&&typeof a=="number"?e===a:typeof e=="object"&&typeof a=="object"?Kt(e,a):!1}const Jt={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Qt=e=>e;let Ve;function ct(){return Ve===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ve=CSS.supports("touch-action","none"):Ve=!0),Ve}function Ht(e){const{"aria-labelledby":a,defaultValue:o,disabled:l=!1,disableSwap:b=!1,isRtl:z=!1,marks:$=!1,max:w=100,min:v=0,name:M,onChange:O,onChangeCommitted:G,orientation:se="horizontal",rootRef:ze,scale:he=Qt,step:_=1,shiftStep:Z=10,tabIndex:Se,value:ge}=e,U=g.useRef(void 0),[N,oe]=g.useState(-1),[Ie,Y]=g.useState(-1),[Q,ie]=g.useState(!1),H=g.useRef(0),ee=g.useRef(null),[F,x]=vt({controlled:ge,default:o??v,name:"Slider"}),h=O&&((r,s,i)=>{const u=r.nativeEvent||r,k=new u.constructor(u.type,u);Object.defineProperty(k,"target",{writable:!0,value:{value:s,name:M}}),ee.current=s,O(k,s,i)}),q=Array.isArray(F);let L=q?F.slice().sort(mt):[F];L=L.map(r=>r==null?v:$e(r,v,w));const le=$===!0&&_!==null?[...Array(Math.floor((w-v)/_)+1)].map((r,s)=>({value:v+_*s})):$||[],T=le.map(r=>r.value),[J,ce]=g.useState(-1),S=g.useRef(null),te=yt(ze,S),Ae=r=>s=>{var u;const i=Number(s.currentTarget.getAttribute("data-index"));He(s.target)&&ce(i),Y(i),(u=r==null?void 0:r.onFocus)==null||u.call(r,s)},Me=r=>s=>{var i;He(s.target)||ce(-1),Y(-1),(i=r==null?void 0:r.onBlur)==null||i.call(r,s)},ke=(r,s)=>{const i=Number(r.currentTarget.getAttribute("data-index")),u=L[i],k=T.indexOf(u);let c=s;if(le&&_==null){const I=T[T.length-1];c>=I?c=I:c<=T[0]?c=T[0]:c=c<u?T[k-1]:T[k+1]}if(c=$e(c,v,w),q){b&&(c=$e(c,L[i-1]||-1/0,L[i+1]||1/0));const I=c;c=lt({values:L,newValue:c,index:i});let W=i;b||(W=c.indexOf(I)),We({sliderRef:S,activeIndex:W})}x(c),ce(i),h&&!De(c,F)&&h(r,c,i),G&&G(r,ee.current??c)},Pe=r=>s=>{var i;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(s.key)){s.preventDefault();const u=Number(s.currentTarget.getAttribute("data-index")),k=L[u];let c=null;if(_!=null){const I=s.shiftKey?Z:_;switch(s.key){case"ArrowUp":c=Te(k,I,1,v,w);break;case"ArrowRight":c=Te(k,I,z?-1:1,v,w);break;case"ArrowDown":c=Te(k,I,-1,v,w);break;case"ArrowLeft":c=Te(k,I,z?1:-1,v,w);break;case"PageUp":c=Te(k,Z,1,v,w);break;case"PageDown":c=Te(k,Z,-1,v,w);break;case"Home":c=v;break;case"End":c=w;break}}else if(le){const I=T[T.length-1],W=T.indexOf(k),P=[z?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],B=[z?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];P.includes(s.key)?W===0?c=T[0]:c=T[W-1]:B.includes(s.key)&&(W===T.length-1?c=I:c=T[W+1])}c!=null&&ke(s,c)}(i=r==null?void 0:r.onKeyDown)==null||i.call(r,s)};St(()=>{var r;l&&S.current.contains(document.activeElement)&&((r=document.activeElement)==null||r.blur())},[l]),l&&N!==-1&&oe(-1),l&&J!==-1&&ce(-1);const we=r=>s=>{var i;(i=r.onChange)==null||i.call(r,s),ke(s,s.target.valueAsNumber)},ae=g.useRef(void 0);let n=se;z&&se==="horizontal"&&(n+="-reverse");const f=({finger:r,move:s=!1})=>{const{current:i}=S,{width:u,height:k,bottom:c,left:I}=i.getBoundingClientRect();let W;n.startsWith("vertical")?W=(c-r.y)/k:W=(r.x-I)/u,n.includes("-reverse")&&(W=1-W);let P;if(P=Gt(W,v,w),_)P=qt(P,_,v);else{const Re=it(T,P);P=T[Re]}P=$e(P,v,w);let B=0;if(q){s?B=ae.current:B=it(L,P),b&&(P=$e(P,L[B-1]||-1/0,L[B+1]||1/0));const Re=P;P=lt({values:L,newValue:P,index:B}),b&&s||(B=P.indexOf(Re),ae.current=B)}return{newValue:P,activeIndex:B}},y=Ge(r=>{const s=Ee(r,U);if(!s)return;if(H.current+=1,r.type==="mousemove"&&r.buttons===0){d(r);return}const{newValue:i,activeIndex:u}=f({finger:s,move:!0});We({sliderRef:S,activeIndex:u,setActive:oe}),x(i),!Q&&H.current>Xt&&ie(!0),h&&!De(i,F)&&h(r,i,u)}),d=Ge(r=>{const s=Ee(r,U);if(ie(!1),!s)return;const{newValue:i}=f({finger:s,move:!0});oe(-1),r.type==="touchend"&&Y(-1),G&&G(r,ee.current??i),U.current=void 0,m()}),p=Ge(r=>{if(l)return;ct()||r.preventDefault();const s=r.changedTouches[0];s!=null&&(U.current=s.identifier);const i=Ee(r,U);if(i!==!1){const{newValue:k,activeIndex:c}=f({finger:i});We({sliderRef:S,activeIndex:c,setActive:oe}),x(k),h&&!De(k,F)&&h(r,k,c)}H.current=0;const u=Oe(S.current);u.addEventListener("touchmove",y,{passive:!0}),u.addEventListener("touchend",d,{passive:!0})}),m=g.useCallback(()=>{const r=Oe(S.current);r.removeEventListener("mousemove",y),r.removeEventListener("mouseup",d),r.removeEventListener("touchmove",y),r.removeEventListener("touchend",d)},[d,y]);g.useEffect(()=>{const{current:r}=S;return r.addEventListener("touchstart",p,{passive:ct()}),()=>{r.removeEventListener("touchstart",p),m()}},[m,p]),g.useEffect(()=>{l&&m()},[l,m]);const E=r=>s=>{var k;if((k=r.onMouseDown)==null||k.call(r,s),l||s.defaultPrevented||s.button!==0)return;s.preventDefault();const i=Ee(s,U);if(i!==!1){const{newValue:c,activeIndex:I}=f({finger:i});We({sliderRef:S,activeIndex:I,setActive:oe}),x(c),h&&!De(c,F)&&h(s,c,I)}H.current=0;const u=Oe(S.current);u.addEventListener("mousemove",y,{passive:!0}),u.addEventListener("mouseup",d)},j=Ue(q?L[0]:v,v,w),C=Ue(L[L.length-1],v,w)-j,de=(r={})=>{const s=Ze(r),i={onMouseDown:E(s||{})},u={...s,...i};return{...r,ref:te,...u}},V=r=>s=>{var u;(u=r.onMouseOver)==null||u.call(r,s);const i=Number(s.currentTarget.getAttribute("data-index"));Y(i)},be=r=>s=>{var i;(i=r.onMouseLeave)==null||i.call(r,s),Y(-1)},re=(r={})=>{const s=Ze(r),i={onMouseOver:V(s||{}),onMouseLeave:be(s||{})};return{...r,...s,...i}},je=r=>({pointerEvents:N!==-1&&N!==r?"none":void 0});let ue;return se==="vertical"&&(ue=z?"vertical-rl":"vertical-lr"),{active:N,axis:n,axisProps:Jt,dragging:Q,focusedThumbIndex:J,getHiddenInputProps:(r={})=>{const s=Ze(r),i={onChange:we(s||{}),onFocus:Ae(s||{}),onBlur:Me(s||{}),onKeyDown:Pe(s||{})},u={...s,...i};return{tabIndex:Se,"aria-labelledby":a,"aria-orientation":se,"aria-valuemax":he(w),"aria-valuemin":he(v),name:M,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:l,...r,...u,style:{...kt,direction:z?"rtl":"ltr",width:"100%",height:"100%",writingMode:ue}}},getRootProps:de,getThumbProps:re,marks:le,open:Ie,range:q,rootRef:te,trackLeap:C,trackOffset:j,values:L,getThumbStyle:je}}const ea=e=>!e||!_e(e);function ta(e){return jt("MuiSlider",e)}const X=wt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),aa=e=>{const{open:a}=e;return{offset:Ne(a&&X.valueLabelOpen),circle:X.valueLabelCircle,label:X.valueLabelLabel}};function ra(e){const{children:a,className:o,value:l}=e,b=aa(e);return a?g.cloneElement(a,{className:a.props.className},t.jsxs(g.Fragment,{children:[a.props.children,t.jsx("span",{className:Ne(b.offset,o),"aria-hidden":!0,children:t.jsx("span",{className:b.circle,children:t.jsx("span",{className:b.label,children:l})})})]})):null}function dt(e){return e}const na=ye("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,a[`color${fe(o.color)}`],o.size!=="medium"&&a[`size${fe(o.size)}`],o.marked&&a.marked,o.orientation==="vertical"&&a.vertical,o.track==="inverted"&&a.trackInverted,o.track===!1&&a.trackFalse]}})(Le(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${X.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${X.dragging}`]:{[`& .${X.thumb}, & .${X.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),sa=ye("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),oa=ye("span",{name:"MuiSlider",slot:"Track"})(Le(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:{backgroundColor:et(e.palette[a].main,.62),borderColor:et(e.palette[a].main,.62),...e.applyStyles("dark",{backgroundColor:tt(e.palette[a].main,.5)}),...e.applyStyles("dark",{borderColor:tt(e.palette[a].main,.5)})}}}))]}))),ia=ye("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.thumb,a[`thumbColor${fe(o.color)}`],o.size!=="medium"&&a[`thumbSize${fe(o.size)}`]]}})(Le(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${X.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a},style:{[`&:hover, &.${X.focusVisible}`]:{...e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${at(e.palette[a].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${X.active}`]:{...e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${at(e.palette[a].main,.16)}`}}}}))]}))),la=ye(ra,{name:"MuiSlider",slot:"ValueLabel"})(Le(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),ca=ye("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>pt(e)&&e!=="markActive",overridesResolver:(e,a)=>{const{markActive:o}=e;return[a.mark,o&&a.markActive]}})(Le(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),da=ye("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>pt(e)&&e!=="markLabelActive"})(Le(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),ua=e=>{const{disabled:a,dragging:o,marked:l,orientation:b,track:z,classes:$,color:w,size:v}=e,M={root:["root",a&&"disabled",o&&"dragging",l&&"marked",b==="vertical"&&"vertical",z==="inverted"&&"trackInverted",z===!1&&"trackFalse",w&&`color${fe(w)}`,v&&`size${fe(v)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",v&&`thumbSize${fe(v)}`,w&&`thumbColor${fe(w)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Lt(M,ta,$)},pa=({children:e})=>e,fa=g.forwardRef(function(a,o){const l=Ct({props:a,name:"MuiSlider"}),b=Tt(),{"aria-label":z,"aria-valuetext":$,"aria-labelledby":w,component:v="span",components:M={},componentsProps:O={},color:G="primary",classes:se,className:ze,disableSwap:he=!1,disabled:_=!1,getAriaLabel:Z,getAriaValueText:Se,marks:ge=!1,max:U=100,min:N=0,name:oe,onChange:Ie,onChangeCommitted:Y,orientation:Q="horizontal",shiftStep:ie=10,size:H="medium",step:ee=1,scale:F=dt,slotProps:x,slots:h,tabIndex:q,track:L="normal",value:le,valueLabelDisplay:T="off",valueLabelFormat:J=dt,...ce}=l,S={...l,isRtl:b,max:U,min:N,classes:se,disabled:_,disableSwap:he,orientation:Q,marks:ge,color:G,size:H,step:ee,shiftStep:ie,scale:F,track:L,valueLabelDisplay:T,valueLabelFormat:J},{axisProps:te,getRootProps:Ae,getHiddenInputProps:Me,getThumbProps:ke,open:Pe,active:we,axis:ae,focusedThumbIndex:n,range:f,dragging:y,marks:d,values:p,trackOffset:m,trackLeap:E,getThumbStyle:j}=Ht({...S,rootRef:o});S.marked=d.length>0&&d.some(A=>A.label),S.dragging=y,S.focusedThumbIndex=n;const C=ua(S),de=(h==null?void 0:h.root)??M.Root??na,V=(h==null?void 0:h.rail)??M.Rail??sa,be=(h==null?void 0:h.track)??M.Track??oa,re=(h==null?void 0:h.thumb)??M.Thumb??ia,je=(h==null?void 0:h.valueLabel)??M.ValueLabel??la,ue=(h==null?void 0:h.mark)??M.Mark??ca,Ce=(h==null?void 0:h.markLabel)??M.MarkLabel??da,r=(h==null?void 0:h.input)??M.Input??"input",s=(x==null?void 0:x.root)??O.root,i=(x==null?void 0:x.rail)??O.rail,u=(x==null?void 0:x.track)??O.track,k=(x==null?void 0:x.thumb)??O.thumb,c=(x==null?void 0:x.valueLabel)??O.valueLabel,I=(x==null?void 0:x.mark)??O.mark,W=(x==null?void 0:x.markLabel)??O.markLabel,P=(x==null?void 0:x.input)??O.input,B=pe({elementType:de,getSlotProps:Ae,externalSlotProps:s,externalForwardedProps:ce,additionalProps:{...ea(de)&&{as:v}},ownerState:{...S,...s==null?void 0:s.ownerState},className:[C.root,ze]}),Re=pe({elementType:V,externalSlotProps:i,ownerState:S,className:C.rail}),gt=pe({elementType:be,externalSlotProps:u,additionalProps:{style:{...te[ae].offset(m),...te[ae].leap(E)}},ownerState:{...S,...u==null?void 0:u.ownerState},className:C.track}),Ye=pe({elementType:re,getSlotProps:ke,externalSlotProps:k,ownerState:{...S,...k==null?void 0:k.ownerState},className:C.thumb}),bt=pe({elementType:je,externalSlotProps:c,ownerState:{...S,...c==null?void 0:c.ownerState},className:C.valueLabel}),Be=pe({elementType:ue,externalSlotProps:I,ownerState:S,className:C.mark}),Ke=pe({elementType:Ce,externalSlotProps:W,ownerState:S,className:C.markLabel}),xt=pe({elementType:r,getSlotProps:Me,externalSlotProps:P,ownerState:S});return t.jsxs(de,{...B,children:[t.jsx(V,{...Re}),t.jsx(be,{...gt}),d.filter(A=>A.value>=N&&A.value<=U).map((A,D)=>{const Xe=Ue(A.value,N,U),Fe=te[ae].offset(Xe);let ne;return L===!1?ne=p.includes(A.value):ne=L==="normal"&&(f?A.value>=p[0]&&A.value<=p[p.length-1]:A.value<=p[0])||L==="inverted"&&(f?A.value<=p[0]||A.value>=p[p.length-1]:A.value>=p[0]),t.jsxs(g.Fragment,{children:[t.jsx(ue,{"data-index":D,...Be,...!_e(ue)&&{markActive:ne},style:{...Fe,...Be.style},className:Ne(Be.className,ne&&C.markActive)}),A.label!=null?t.jsx(Ce,{"aria-hidden":!0,"data-index":D,...Ke,...!_e(Ce)&&{markLabelActive:ne},style:{...Fe,...Ke.style},className:Ne(C.markLabel,Ke.className,ne&&C.markLabelActive),children:A.label}):null]},D)}),p.map((A,D)=>{const Xe=Ue(A,N,U),Fe=te[ae].offset(Xe),ne=T==="off"?pa:je;return t.jsx(ne,{...!_e(ne)&&{valueLabelFormat:J,valueLabelDisplay:T,value:typeof J=="function"?J(F(A),D):J,index:D,open:Pe===D||we===D||T==="on",disabled:_},...bt,children:t.jsx(re,{"data-index":D,...Ye,className:Ne(C.thumb,Ye.className,we===D&&C.active,n===D&&C.focusVisible),style:{...Fe,...j(D),...Ye.style},children:t.jsx(r,{"data-index":D,"aria-label":Z?Z(D):z,"aria-valuenow":F(A),"aria-labelledby":w,"aria-valuetext":Se?Se(F(A),D):$,value:p[D],...xt})})},D)})]})});/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ht=zt("outline","photo-edit","IconPhotoEdit",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4",key:"svg-1"}],["path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596",key:"svg-3"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-4"}]]);const ma=ft(t.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),ut=ft(t.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),ha=({confirmDialog:e,generateTilesLoading:a,handleCancelGenerateTiles:o,handleConfirmGenerateTiles:l})=>{const[b,z]=g.useState(18),$=(v,M)=>{z(M)},w=()=>{l(b)};return t.jsxs(It,{open:e.open,onClose:a?void 0:o,"aria-labelledby":"generate-tiles-dialog-title",PaperProps:{sx:{borderRadius:2,minWidth:420,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[t.jsx(At,{id:"generate-tiles-dialog-title",sx:{bgcolor:"primary.main",color:"white",fontWeight:600,fontSize:"1.1rem",mb:2},children:"ðŸ§± Generate Raster Tiles"}),t.jsx(Mt,{sx:{pt:3,pb:2},children:a?t.jsxs(K,{sx:{textAlign:"center",py:4},children:[t.jsx(Pt,{}),t.jsx(me,{variant:"h6",sx:{fontWeight:600,mt:2,mb:1},children:"Starting background job..."}),t.jsxs(me,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.6,maxWidth:300,mx:"auto"},children:["Your raster tile generation has started. You can track progress in the ",t.jsx("strong",{children:"â€œCommentâ€"})," section of this workday."]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(K,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[t.jsx(K,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t.jsx(ht,{size:26})}),t.jsx(K,{children:t.jsx(me,{variant:"body2",sx:{color:"text.secondary",lineHeight:1.6},children:"This process may take few hours depending on image size. Once started, it will run safely in the background â€” you can monitor progress in the comment box."})})]}),t.jsxs(K,{sx:{mt:4},children:[t.jsxs(me,{variant:"body2",sx:{fontWeight:500,mb:1},children:["Maximum Zoom Level: ",t.jsx("strong",{children:b})]}),t.jsx(fa,{value:b,onChange:$,min:10,max:24,step:1,marks:!0,valueLabelDisplay:"auto"})]})]})}),t.jsxs(Rt,{sx:{p:3,pt:1,gap:1},children:[t.jsx(ve,{onClick:o,variant:"outlined",disabled:a,sx:{color:"error.main",borderColor:"error.main",fontWeight:500,px:3,"&:hover":{bgcolor:"error.50"}},children:"Cancel"}),t.jsx(ve,{onClick:w,variant:"contained",disabled:a,sx:{bgcolor:"primary.main",color:"white",fontWeight:500,px:3,"&:hover":{bgcolor:"secondary.light",color:"black"}},children:a?"Starting...":"Start Job"})]})]})},ga=[{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],ba=[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],va=()=>{const e=g.useRef(null),a=$t(),{enqueueSnackbar:o}=Nt(),[l,b]=g.useState([]),[z,$]=g.useState(!0),[w,v]=g.useState(null),[M,O]=g.useState(1),[G]=g.useState(10),[se,ze]=g.useState(0),[he,_]=g.useState(""),[Z,Se]=g.useState("createdAt:desc"),[ge,U]=g.useState(""),N=Ft(n=>n.auth.token),[oe,Ie]=g.useState({}),Y=g.useRef(null),[Q,ie]=g.useState({type:"",workDay:null}),[H,ee]=g.useState({}),[F,x]=g.useState({}),[h,q]=g.useState({open:!1,workDayId:null}),[L,le]=g.useState(!1);g.useEffect(()=>{(async()=>{var f,y,d,p,m,E;$(!0),v(null);try{const j={page:M,limit:G,sortBy:Z};ge&&(j.name=ge);const C=await xe.get("/work-day",{params:j,headers:{Authorization:N}});b(((f=C.data.data)==null?void 0:f.results)||[]),ze(((y=C.data.data)==null?void 0:y.totalResults)||0)}catch(j){console.log(j,"<===== error fetching workdays"),v(((p=(d=j.response)==null?void 0:d.data)==null?void 0:p.message)||j.message),o(((E=(m=j.response)==null?void 0:m.data)==null?void 0:E.message)||j.message||"Failed to fetch work days",{variant:"error"})}finally{$(!1)}})()},[N,M,G,Z,ge,o]);const T=n=>n?n.url?n.url:n.Location?n.Location:null:null,J=async n=>{var y,d,p;const f=n.rawFile;if(!f){o("No file found to download",{variant:"warning"});return}try{const E=(y=(await xe.get(`/work-day/get-download-url/${f}`,{headers:{Authorization:N}})).data)==null?void 0:y.data;E?(window.open(E,"_blank"),o("Download started",{variant:"success"})):o("No download link available.",{variant:"warning"})}catch(m){o(((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.message)||m.message||"Download failed",{variant:"error"})}},ce=async(n,f)=>{var y,d;Ie(p=>({...p,[n._id||n.id]:!0}));try{await xe.patch(`/work-day/${n._id||n.id}`,{status:f},{headers:{Authorization:N}}),b(p=>p.map(m=>(m._id||m.id)===(n._id||n.id)?{...m,status:f}:m)),o("Status updated!",{variant:"success"})}catch(p){o(((d=(y=p.response)==null?void 0:y.data)==null?void 0:d.message)||p.message||"Failed to update status",{variant:"error"})}finally{Ie(p=>({...p,[n._id||n.id]:!1}))}},S=()=>{O(1),U(he)},te=(n,f)=>{ie({workDay:n,type:f}),Y.current&&Y.current.click()},Ae=async n=>{var E,j,C,de;const f=(E=n.target.files)==null?void 0:E[0];if(!f||!Q.type||!Q.workDay)return;const{type:y,workDay:d}=Q,p=f.name.split(".").pop().toLowerCase(),m=`${d.id||d._id}_${y}`;if(y==="tiff"&&p!=="tiff"){o(`Only .${y.toUpperCase()} files are allowed`,{variant:"error"});return}x(V=>({...V,[m]:!0})),ee(V=>({...V,[m]:0}));try{const be=(await xe.post("/work-day/upload-resultFile",{workDayId:d.id||d._id,type:y,filename:f.name,contentType:f.type,size:f.size},{headers:{Authorization:N}})).data.data;console.log(be,"<=== upload response");const{parts:re,uploadId:je,key:ue,partSize:Ce}=be,r=[];let s=0;for(;s<f.size;){const u=Math.min(s+Ce,f.size);r.push(f.slice(s,u)),s=u}const i=[];for(let u=0;u<re.length;u++){const c=(j=(await fetch(re[u].url,{method:"PUT",body:r[u]})).headers.get("ETag"))==null?void 0:j.replace(/"/g,"");i.push({PartNumber:re[u].partNumber,ETag:c});const I=Math.round((u+1)/re.length*100);ee(W=>({...W,[m]:I}))}await xe.post("/work-day/complete-upload",{workDayId:d.id||d._id,type:y,key:ue,uploadId:je,parts:i},{headers:{Authorization:N}}),o(`${y.toUpperCase()} uploaded successfully (multipart)`,{variant:"success"})}catch(V){o(((de=(C=V.response)==null?void 0:C.data)==null?void 0:de.message)||V.message||"Upload failed",{variant:"error"})}finally{x(V=>({...V,[m]:!1})),setTimeout(()=>{ee(V=>({...V,[m]:0}))},2e3),Y.current&&(Y.current.value=""),ie({type:"",workDay:null})}},Me=n=>{const f=l.find(d=>(d._id||d.id)===n);if(!f){o("Work day not found",{variant:"error"});return}if(!(f.tiffFile&&f.tiffFile.trim()!=="")){o("Please upload .tiff first before generating tiles.",{variant:"warning"});return}q({open:!0,workDayId:n})},ke=async n=>{var y,d,p;const{workDayId:f}=h;le(!0);try{(y=(await xe.get(`/work-day/generate-tiles/${f}`,{headers:{Authorization:N},params:{maxzoom:n}})).data)!=null&&y.success?(o("Tile generation started successfully! This process will take at least 10 minutes to complete.",{variant:"success"}),q({open:!1,workDayId:null})):o("Failed to start tile generation",{variant:"error"})}catch(m){o(((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.message)||m.message||"Failed to generate tiles",{variant:"error"})}finally{le(!1)}},Pe=()=>{q({open:!1,workDayId:null})},we=n=>{ie({workDay:n,type:"dxf"}),e.current&&e.current.click()},ae=async()=>{var p,m,E,j;const{workDay:n}=Q,f=(m=(p=e.current)==null?void 0:p.files)==null?void 0:m[0];if(!f){o("Please select a .dxf file",{variant:"warning"});return}if(f.name.split(".").pop().toLowerCase()!=="dxf"){o("Only .dxf files are allowed",{variant:"error"});return}o("Uploading DXF file",{variant:"info"});const d=new FormData;d.append("file",f);try{await xe.post(`/mapFeature/overlayUpload/${n._id||n.id}`,d,{headers:{Authorization:N,"Content-Type":"multipart/form-data"}}),o("DXF uploaded successfully!",{variant:"success"}),e.current&&(e.current.value="")}catch(C){console.error("DXF upload failed",C),o(((j=(E=C.response)==null?void 0:E.data)==null?void 0:j.message)||C.message,{variant:"error"})}};return t.jsxs(Et,{children:[t.jsx(K,{children:t.jsx(me,{variant:"h2",mb:2,gutterBottom:!0,children:"Historical Work Days"})}),t.jsxs(rt,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,alignItems:"center",children:[t.jsx(Wt,{label:"Search by Project",size:"small",value:he,onChange:n=>_(n.target.value),onKeyDown:n=>{n.key==="Enter"&&S()}}),t.jsx(ve,{variant:"contained",onClick:S,sx:{minWidth:100},children:"Search"}),t.jsxs(nt,{size:"small",sx:{minWidth:150},children:[t.jsx(Dt,{children:"Sort By"}),t.jsx(st,{value:Z,label:"Sort By",onChange:n=>{Se(n.target.value),O(1)},children:ba.map(n=>t.jsx(ot,{value:n.value,children:n.label},n.value))})]})]}),z?t.jsx(me,{variant:"body1",children:"Loading work days..."}):w?t.jsx(me,{color:"error",children:w}):t.jsx(t.Fragment,{children:t.jsxs(Vt,{sx:{p:3,mx:"auto",mt:3},children:[t.jsx(Ot,{children:t.jsxs(_t,{size:"small",children:[t.jsx(Ut,{children:t.jsxs(qe,{sx:{bgcolor:a.palette.primary.light},children:[t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Time Stamp"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Historical Date"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Project Name"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Project"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Owner"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Status"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Tiff"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Progress Status"}),t.jsx(R,{sx:{color:a.palette.primary.contrastText},children:"Action"})]})}),t.jsx(Yt,{children:l.length===0?t.jsx(qe,{children:t.jsx(R,{colSpan:7,align:"center",children:"No work days found."})}):l.map(n=>{var E;const f=(E=n.resultFiles)==null?void 0:E[0],y=!!T(f),d=n._id||n.id,p=n.projectId||{},m=p.owner||{};return t.jsxs(qe,{children:[t.jsx(R,{children:n.createdAt?Je(n.createdAt).format("DD/MM/YYYY"):n.name}),t.jsx(R,{children:Je(n.name,"YYYY-MM-DD",!0).isValid()?Je(n.name).format("DD/MM/YYYY"):n.name||"-"}),t.jsx(R,{children:p.name||"-"}),t.jsx(R,{children:p.location||"-"}),t.jsx(R,{children:m.firstName||m.lastName?`${m.firstName||""} ${m.lastName||""}`.trim():m.email||"-"}),t.jsx(R,{children:t.jsx(nt,{size:"small",sx:{minWidth:120},children:t.jsx(st,{value:n.status||"",onChange:j=>ce(n,j.target.value),disabled:oe[d],children:ga.map(j=>t.jsx(ot,{value:j.value,children:j.label},j.value))})})}),t.jsx(R,{children:n.tiffFile?n.tiffFile.split("-")[5]:"-"}),t.jsx(R,{children:n!=null&&n.comment?n==null?void 0:n.comment:"-"}),t.jsx(R,{children:t.jsxs(rt,{spacing:1,sx:{minWidth:200},children:[t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(ma,{}),onClick:()=>J(n),disabled:!y&&!n.rawFile,fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Download"}),t.jsxs(K,{children:[t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(ut,{}),onClick:()=>te(n,"jpg"),disabled:F[`${d}_jpg`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload Tiff"}),F[`${d}_jpg`]&&t.jsxs(K,{sx:{mt:.5},children:[t.jsxs(me,{variant:"caption",color:"text.secondary",children:["Uploading..."," ",H[`${d}_jpg`]||0,"%"]}),t.jsx(K,{sx:{width:"100%",mt:.5},children:t.jsx(K,{sx:{height:3,bgcolor:"grey.200",borderRadius:1.5,overflow:"hidden"},children:t.jsx(K,{sx:{width:`${H[`${d}_jpg`]||0}%`,height:"100%",bgcolor:"secondary.main",transition:"width 0.3s ease"}})})})]})]}),t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(ut,{}),onClick:()=>we(n),disabled:F[`${n._id||n.id}_dxf`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload DXF"}),t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(ht,{}),onClick:()=>Me(d),disabled:F[`${d}_jpg`]||F[`${d}_kml`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Generate Tiles"})]})})]},d)})})]})}),t.jsx(K,{display:"flex",justifyContent:"center",mt:2,children:t.jsx(Bt,{count:Math.ceil(se/G),page:M,onChange:(n,f)=>O(f),color:"primary"})})]})}),t.jsx("input",{type:"file",ref:Y,style:{display:"none"},onChange:Ae}),t.jsx("input",{type:"file",ref:e,style:{display:"none"},accept:".dxf",onChange:ae}),t.jsx(ha,{confirmDialog:h,generateTilesLoading:L,handleCancelGenerateTiles:Pe,handleConfirmGenerateTiles:ke})]})};export{va as default};
