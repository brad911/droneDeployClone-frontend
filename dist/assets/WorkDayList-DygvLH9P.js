import{r as b,$ as yt,b3 as Ne,a1 as vt,a2 as kt,a0 as Ke,ae as Oe,b4 as Ze,b5 as et,V as St,U as wt,j as t,Y as $e,ar as jt,W as Ct,X as he,y as ke,a7 as be,Z as Tt,at as Te,aw as Qe,av as tt,au as at,a4 as rt,b6 as mt,ax as Lt,t as ft,B as _,T as se,b7 as zt,u as It,b as At,d as Pt,M as Mt,S as nt,af as Rt,h as ge}from"./index-CIAJF67w.js";import{d as qe}from"./dayjs.min-KsXLAtIO.js";import{a as Nt,b as $t,D as Dt}from"./DialogContent-ChEWhMWx.js";import{D as Ft}from"./DialogTitle--gwF_X1z.js";import{v as Et}from"./visuallyHidden-Dan1xhjv.js";import{i as _e,F as ot}from"./OutlinedInput-CxqV9Cl2.js";import{B as ve,I as Wt}from"./InputLabel-B7IqUM18.js";import{T as Vt}from"./TextField-R7W4xjGq.js";import{S as st}from"./Select-D7icJJNK.js";import{M as it}from"./MenuItem-C11zRyuj.js";import{a as Ot,b as _t,c as Ut,d as Je,T as W,e as Yt}from"./TableRow-BQlenJW0.js";import{P as Bt}from"./Pagination-BXhRNFXl.js";import"./FormHelperText-CRPvSBO4.js";import"./LastPage-CdJ7qIuV.js";function Xt(e,a,s=(l,x)=>l===x){return e.length===a.length&&e.every((l,x)=>s(l,a[x]))}const Gt=2;function Ce(e,a,s,l,x){return s===1?Math.min(e+a,x):Math.max(e-a,l)}function ht(e,a){return e-a}function lt(e,a){const{index:s}=e.reduce((l,x,z)=>{const R=Math.abs(a-x);return l===null||R<l.distance||R===l.distance?{distance:R,index:z}:l},null)??{};return s}function Fe(e,a){if(a.current!==void 0&&e.changedTouches){const s=e;for(let l=0;l<s.changedTouches.length;l+=1){const x=s.changedTouches[l];if(x.identifier===a.current)return{x:x.clientX,y:x.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ue(e,a,s){return(e-a)*100/(s-a)}function Kt(e,a,s){return(s-a)*e+a}function Zt(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),l=s[0].split(".")[1];return(l?l.length:0)+parseInt(s[1],10)}const a=e.toString().split(".")[1];return a?a.length:0}function qt(e,a,s){const l=Math.round((e-s)/a)*a+s;return Number(l.toFixed(Zt(a)))}function ct({values:e,newValue:a,index:s}){const l=e.slice();return l[s]=a,l.sort(ht)}function Ee({sliderRef:e,activeIndex:a,setActive:s}){var x,z,R;const l=Oe(e.current);(!((x=e.current)!=null&&x.contains(l.activeElement))||Number((z=l==null?void 0:l.activeElement)==null?void 0:z.getAttribute("data-index"))!==a)&&((R=e.current)==null||R.querySelector(`[type="range"][data-index="${a}"]`).focus()),s&&s(a)}function We(e,a){return typeof e=="number"&&typeof a=="number"?e===a:typeof e=="object"&&typeof a=="object"?Xt(e,a):!1}const Jt={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Ht=e=>e;let Ve;function dt(){return Ve===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ve=CSS.supports("touch-action","none"):Ve=!0),Ve}function Qt(e){const{"aria-labelledby":a,defaultValue:s,disabled:l=!1,disableSwap:x=!1,isRtl:z=!1,marks:R=!1,max:w=100,min:k=0,name:M,onChange:O,onChangeCommitted:Z,orientation:ie="horizontal",rootRef:Le,scale:xe=Ht,step:U=1,shiftStep:q=10,tabIndex:Se,value:ye}=e,Y=b.useRef(void 0),[N,le]=b.useState(-1),[ze,B]=b.useState(-1),[te,ce]=b.useState(!1),ae=b.useRef(0),J=b.useRef(null),[$,v]=yt({controlled:ye,default:s??k,name:"Slider"}),g=O&&((r,o,i)=>{const f=r.nativeEvent||r,h=new f.constructor(f.type,f);Object.defineProperty(h,"target",{writable:!0,value:{value:o,name:M}}),J.current=o,O(h,o,i)}),H=Array.isArray($);let L=H?$.slice().sort(ht):[$];L=L.map(r=>r==null?k:Ne(r,k,w));const de=R===!0&&U!==null?[...Array(Math.floor((w-k)/U)+1)].map((r,o)=>({value:k+U*o})):R||[],T=de.map(r=>r.value),[Q,ue]=b.useState(-1),S=b.useRef(null),re=vt(Le,S),Ie=r=>o=>{var f;const i=Number(o.currentTarget.getAttribute("data-index"));et(o.target)&&ue(i),B(i),(f=r==null?void 0:r.onFocus)==null||f.call(r,o)},Ae=r=>o=>{var i;et(o.target)||ue(-1),B(-1),(i=r==null?void 0:r.onBlur)==null||i.call(r,o)},we=(r,o)=>{const i=Number(r.currentTarget.getAttribute("data-index")),f=L[i],h=T.indexOf(f);let c=o;if(de&&U==null){const A=T[T.length-1];c>=A?c=A:c<=T[0]?c=T[0]:c=c<f?T[h-1]:T[h+1]}if(c=Ne(c,k,w),H){x&&(c=Ne(c,L[i-1]||-1/0,L[i+1]||1/0));const A=c;c=ct({values:L,newValue:c,index:i});let F=i;x||(F=c.indexOf(A)),Ee({sliderRef:S,activeIndex:F})}v(c),ue(i),g&&!We(c,$)&&g(r,c,i),Z&&Z(r,J.current??c)},Pe=r=>o=>{var i;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(o.key)){o.preventDefault();const f=Number(o.currentTarget.getAttribute("data-index")),h=L[f];let c=null;if(U!=null){const A=o.shiftKey?q:U;switch(o.key){case"ArrowUp":c=Ce(h,A,1,k,w);break;case"ArrowRight":c=Ce(h,A,z?-1:1,k,w);break;case"ArrowDown":c=Ce(h,A,-1,k,w);break;case"ArrowLeft":c=Ce(h,A,z?1:-1,k,w);break;case"PageUp":c=Ce(h,q,1,k,w);break;case"PageDown":c=Ce(h,q,-1,k,w);break;case"Home":c=k;break;case"End":c=w;break}}else if(de){const A=T[T.length-1],F=T.indexOf(h),I=[z?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],G=[z?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];I.includes(o.key)?F===0?c=T[0]:c=T[F-1]:G.includes(o.key)&&(F===T.length-1?c=A:c=T[F+1])}c!=null&&we(o,c)}(i=r==null?void 0:r.onKeyDown)==null||i.call(r,o)};kt(()=>{var r;l&&S.current.contains(document.activeElement)&&((r=document.activeElement)==null||r.blur())},[l]),l&&N!==-1&&le(-1),l&&Q!==-1&&ue(-1);const je=r=>o=>{var i;(i=r.onChange)==null||i.call(r,o),we(o,o.target.valueAsNumber)},ne=b.useRef(void 0);let n=ie;z&&ie==="horizontal"&&(n+="-reverse");const d=({finger:r,move:o=!1})=>{const{current:i}=S,{width:f,height:h,bottom:c,left:A}=i.getBoundingClientRect();let F;n.startsWith("vertical")?F=(c-r.y)/h:F=(r.x-A)/f,n.includes("-reverse")&&(F=1-F);let I;if(I=Kt(F,k,w),U)I=qt(I,U,k);else{const Re=lt(T,I);I=T[Re]}I=Ne(I,k,w);let G=0;if(H){o?G=ne.current:G=lt(L,I),x&&(I=Ne(I,L[G-1]||-1/0,L[G+1]||1/0));const Re=I;I=ct({values:L,newValue:I,index:G}),x&&o||(G=I.indexOf(Re),ne.current=G)}return{newValue:I,activeIndex:G}},y=Ke(r=>{const o=Fe(r,Y);if(!o)return;if(ae.current+=1,r.type==="mousemove"&&r.buttons===0){u(r);return}const{newValue:i,activeIndex:f}=d({finger:o,move:!0});Ee({sliderRef:S,activeIndex:f,setActive:le}),v(i),!te&&ae.current>Gt&&ce(!0),g&&!We(i,$)&&g(r,i,f)}),u=Ke(r=>{const o=Fe(r,Y);if(ce(!1),!o)return;const{newValue:i}=d({finger:o,move:!0});le(-1),r.type==="touchend"&&B(-1),Z&&Z(r,J.current??i),Y.current=void 0,m()}),p=Ke(r=>{if(l)return;dt()||r.preventDefault();const o=r.changedTouches[0];o!=null&&(Y.current=o.identifier);const i=Fe(r,Y);if(i!==!1){const{newValue:h,activeIndex:c}=d({finger:i});Ee({sliderRef:S,activeIndex:c,setActive:le}),v(h),g&&!We(h,$)&&g(r,h,c)}ae.current=0;const f=Oe(S.current);f.addEventListener("touchmove",y,{passive:!0}),f.addEventListener("touchend",u,{passive:!0})}),m=b.useCallback(()=>{const r=Oe(S.current);r.removeEventListener("mousemove",y),r.removeEventListener("mouseup",u),r.removeEventListener("touchmove",y),r.removeEventListener("touchend",u)},[u,y]);b.useEffect(()=>{const{current:r}=S;return r.addEventListener("touchstart",p,{passive:dt()}),()=>{r.removeEventListener("touchstart",p),m()}},[m,p]),b.useEffect(()=>{l&&m()},[l,m]);const D=r=>o=>{var h;if((h=r.onMouseDown)==null||h.call(r,o),l||o.defaultPrevented||o.button!==0)return;o.preventDefault();const i=Fe(o,Y);if(i!==!1){const{newValue:c,activeIndex:A}=d({finger:i});Ee({sliderRef:S,activeIndex:A,setActive:le}),v(c),g&&!We(c,$)&&g(o,c,A)}ae.current=0;const f=Oe(S.current);f.addEventListener("mousemove",y,{passive:!0}),f.addEventListener("mouseup",u)},j=Ue(H?L[0]:k,k,w),C=Ue(L[L.length-1],k,w)-j,pe=(r={})=>{const o=Ze(r),i={onMouseDown:D(o||{})},f={...o,...i};return{...r,ref:re,...f}},V=r=>o=>{var f;(f=r.onMouseOver)==null||f.call(r,o);const i=Number(o.currentTarget.getAttribute("data-index"));B(i)},Me=r=>o=>{var i;(i=r.onMouseLeave)==null||i.call(r,o),B(-1)},me=(r={})=>{const o=Ze(r),i={onMouseOver:V(o||{}),onMouseLeave:Me(o||{})};return{...r,...o,...i}},X=r=>({pointerEvents:N!==-1&&N!==r?"none":void 0});let ee;return ie==="vertical"&&(ee=z?"vertical-rl":"vertical-lr"),{active:N,axis:n,axisProps:Jt,dragging:te,focusedThumbIndex:Q,getHiddenInputProps:(r={})=>{const o=Ze(r),i={onChange:je(o||{}),onFocus:Ie(o||{}),onBlur:Ae(o||{}),onKeyDown:Pe(o||{})},f={...o,...i};return{tabIndex:Se,"aria-labelledby":a,"aria-orientation":ie,"aria-valuemax":xe(w),"aria-valuemin":xe(k),name:M,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:l,...r,...f,style:{...Et,direction:z?"rtl":"ltr",width:"100%",height:"100%",writingMode:ee}}},getRootProps:pe,getThumbProps:me,marks:de,open:ze,range:H,rootRef:re,trackLeap:C,trackOffset:j,values:L,getThumbStyle:X}}const ea=e=>!e||!_e(e);function ta(e){return wt("MuiSlider",e)}const K=St("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),aa=e=>{const{open:a}=e;return{offset:$e(a&&K.valueLabelOpen),circle:K.valueLabelCircle,label:K.valueLabelLabel}};function ra(e){const{children:a,className:s,value:l}=e,x=aa(e);return a?b.cloneElement(a,{className:a.props.className},t.jsxs(b.Fragment,{children:[a.props.children,t.jsx("span",{className:$e(x.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:x.circle,children:t.jsx("span",{className:x.label,children:l})})})]})):null}function ut(e){return e}const na=ke("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,a[`color${be(s.color)}`],s.size!=="medium"&&a[`size${be(s.size)}`],s.marked&&a.marked,s.orientation==="vertical"&&a.vertical,s.track==="inverted"&&a.trackInverted,s.track===!1&&a.trackFalse]}})(Te(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${K.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${K.dragging}`]:{[`& .${K.thumb}, & .${K.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),oa=ke("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),sa=ke("span",{name:"MuiSlider",slot:"Track"})(Te(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:{backgroundColor:tt(e.palette[a].main,.62),borderColor:tt(e.palette[a].main,.62),...e.applyStyles("dark",{backgroundColor:at(e.palette[a].main,.5)}),...e.applyStyles("dark",{borderColor:at(e.palette[a].main,.5)})}}}))]}))),ia=ke("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.thumb,a[`thumbColor${be(s.color)}`],s.size!=="medium"&&a[`thumbSize${be(s.size)}`]]}})(Te(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${K.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Qe()).map(([a])=>({props:{color:a},style:{[`&:hover, &.${K.focusVisible}`]:{...e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${rt(e.palette[a].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${K.active}`]:{...e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${rt(e.palette[a].main,.16)}`}}}}))]}))),la=ke(ra,{name:"MuiSlider",slot:"ValueLabel"})(Te(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${K.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${K.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),ca=ke("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>mt(e)&&e!=="markActive",overridesResolver:(e,a)=>{const{markActive:s}=e;return[a.mark,s&&a.markActive]}})(Te(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),da=ke("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>mt(e)&&e!=="markLabelActive"})(Te(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),ua=e=>{const{disabled:a,dragging:s,marked:l,orientation:x,track:z,classes:R,color:w,size:k}=e,M={root:["root",a&&"disabled",s&&"dragging",l&&"marked",x==="vertical"&&"vertical",z==="inverted"&&"trackInverted",z===!1&&"trackFalse",w&&`color${be(w)}`,k&&`size${be(k)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",k&&`thumbSize${be(k)}`,w&&`thumbColor${be(w)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Tt(M,ta,R)},pa=({children:e})=>e,ma=b.forwardRef(function(a,s){const l=jt({props:a,name:"MuiSlider"}),x=Ct(),{"aria-label":z,"aria-valuetext":R,"aria-labelledby":w,component:k="span",components:M={},componentsProps:O={},color:Z="primary",classes:ie,className:Le,disableSwap:xe=!1,disabled:U=!1,getAriaLabel:q,getAriaValueText:Se,marks:ye=!1,max:Y=100,min:N=0,name:le,onChange:ze,onChangeCommitted:B,orientation:te="horizontal",shiftStep:ce=10,size:ae="medium",step:J=1,scale:$=ut,slotProps:v,slots:g,tabIndex:H,track:L="normal",value:de,valueLabelDisplay:T="off",valueLabelFormat:Q=ut,...ue}=l,S={...l,isRtl:x,max:Y,min:N,classes:ie,disabled:U,disableSwap:xe,orientation:te,marks:ye,color:Z,size:ae,step:J,shiftStep:ce,scale:$,track:L,valueLabelDisplay:T,valueLabelFormat:Q},{axisProps:re,getRootProps:Ie,getHiddenInputProps:Ae,getThumbProps:we,open:Pe,active:je,axis:ne,focusedThumbIndex:n,range:d,dragging:y,marks:u,values:p,trackOffset:m,trackLeap:D,getThumbStyle:j}=Qt({...S,rootRef:s});S.marked=u.length>0&&u.some(P=>P.label),S.dragging=y,S.focusedThumbIndex=n;const C=ua(S),pe=(g==null?void 0:g.root)??M.Root??na,V=(g==null?void 0:g.rail)??M.Rail??oa,Me=(g==null?void 0:g.track)??M.Track??sa,me=(g==null?void 0:g.thumb)??M.Thumb??ia,X=(g==null?void 0:g.valueLabel)??M.ValueLabel??la,ee=(g==null?void 0:g.mark)??M.Mark??ca,fe=(g==null?void 0:g.markLabel)??M.MarkLabel??da,r=(g==null?void 0:g.input)??M.Input??"input",o=(v==null?void 0:v.root)??O.root,i=(v==null?void 0:v.rail)??O.rail,f=(v==null?void 0:v.track)??O.track,h=(v==null?void 0:v.thumb)??O.thumb,c=(v==null?void 0:v.valueLabel)??O.valueLabel,A=(v==null?void 0:v.mark)??O.mark,F=(v==null?void 0:v.markLabel)??O.markLabel,I=(v==null?void 0:v.input)??O.input,G=he({elementType:pe,getSlotProps:Ie,externalSlotProps:o,externalForwardedProps:ue,additionalProps:{...ea(pe)&&{as:k}},ownerState:{...S,...o==null?void 0:o.ownerState},className:[C.root,Le]}),Re=he({elementType:V,externalSlotProps:i,ownerState:S,className:C.rail}),gt=he({elementType:Me,externalSlotProps:f,additionalProps:{style:{...re[ne].offset(m),...re[ne].leap(D)}},ownerState:{...S,...f==null?void 0:f.ownerState},className:C.track}),Ye=he({elementType:me,getSlotProps:we,externalSlotProps:h,ownerState:{...S,...h==null?void 0:h.ownerState},className:C.thumb}),bt=he({elementType:X,externalSlotProps:c,ownerState:{...S,...c==null?void 0:c.ownerState},className:C.valueLabel}),Be=he({elementType:ee,externalSlotProps:A,ownerState:S,className:C.mark}),Xe=he({elementType:fe,externalSlotProps:F,ownerState:S,className:C.markLabel}),xt=he({elementType:r,getSlotProps:Ae,externalSlotProps:I,ownerState:S});return t.jsxs(pe,{...G,children:[t.jsx(V,{...Re}),t.jsx(Me,{...gt}),u.filter(P=>P.value>=N&&P.value<=Y).map((P,E)=>{const Ge=Ue(P.value,N,Y),De=re[ne].offset(Ge);let oe;return L===!1?oe=p.includes(P.value):oe=L==="normal"&&(d?P.value>=p[0]&&P.value<=p[p.length-1]:P.value<=p[0])||L==="inverted"&&(d?P.value<=p[0]||P.value>=p[p.length-1]:P.value>=p[0]),t.jsxs(b.Fragment,{children:[t.jsx(ee,{"data-index":E,...Be,...!_e(ee)&&{markActive:oe},style:{...De,...Be.style},className:$e(Be.className,oe&&C.markActive)}),P.label!=null?t.jsx(fe,{"aria-hidden":!0,"data-index":E,...Xe,...!_e(fe)&&{markLabelActive:oe},style:{...De,...Xe.style},className:$e(C.markLabel,Xe.className,oe&&C.markLabelActive),children:P.label}):null]},E)}),p.map((P,E)=>{const Ge=Ue(P,N,Y),De=re[ne].offset(Ge),oe=T==="off"?pa:X;return t.jsx(oe,{...!_e(oe)&&{valueLabelFormat:Q,valueLabelDisplay:T,value:typeof Q=="function"?Q($(P),E):Q,index:E,open:Pe===E||je===E||T==="on",disabled:U},...bt,children:t.jsx(me,{"data-index":E,...Ye,className:$e(C.thumb,Ye.className,je===E&&C.active,n===E&&C.focusVisible),style:{...De,...j(E),...Ye.style},children:t.jsx(r,{"data-index":E,"aria-label":q?q(E):z,"aria-valuenow":$(P),"aria-labelledby":w,"aria-valuetext":Se?Se($(P),E):R,value:p[E],...xt})})},E)})]})});/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var He=Lt("outline","photo-edit","IconPhotoEdit",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4",key:"svg-1"}],["path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596",key:"svg-3"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-4"}]]);const fa=ft(t.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),pt=ft(t.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),ha=({confirmDialog:e,generateTilesLoading:a,handleCancelGenerateTiles:s,handleConfirmGenerateTiles:l})=>{const[x,z]=b.useState(18),R=(k,M)=>{z(M)},w=()=>{l(x)};return t.jsxs(Nt,{open:e.open,onClose:a?void 0:s,"aria-labelledby":"generate-tiles-dialog-title","aria-describedby":"generate-tiles-dialog-description",PaperProps:{sx:{borderRadius:2,minWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[t.jsx(Ft,{id:"generate-tiles-dialog-title",sx:{bgcolor:"primary.light",color:"warning.contrastText",fontWeight:600,fontSize:"1.1rem"},children:"⚠️ Confirmation"}),t.jsx($t,{sx:{pt:3,pb:2},children:a?t.jsxs(_,{sx:{textAlign:"center",py:4},children:[t.jsx(_,{sx:{width:64,height:64,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:t.jsx(He,{sx:{color:"primary.light",fontSize:32}})}),t.jsx(se,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Generating Tiles..."}),t.jsx(se,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6,mb:3},children:"Please wait while we process your request. This may take several minutes."}),t.jsx(_,{sx:{width:"100%",maxWidth:300,mx:"auto"},children:t.jsx(zt,{})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(_,{sx:{display:"flex",alignItems:"flex-start",gap:2,mt:2},children:[t.jsx(_,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,mt:.5},children:t.jsx(He,{sx:{color:"primary.light",fontSize:24}})}),t.jsxs(_,{children:[t.jsx(se,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Time-Intensive Operation"}),t.jsxs(se,{variant:"body1",id:"generate-tiles-dialog-description",sx:{color:"text.secondary",lineHeight:1.6},children:["This tile generation process will take at least"," ",t.jsx("strong",{children:"10 minutes"})," to complete. The system will process your data in the background."]})]})]}),t.jsxs(_,{sx:{mt:4},children:[t.jsxs(se,{variant:"body2",sx:{fontWeight:500,mb:1},children:["Maximum Zoom Level: ",t.jsx("strong",{children:x})]}),t.jsx(ma,{value:x,onChange:R,min:10,max:24,step:1,marks:!0,valueLabelDisplay:"auto"})]})]})}),t.jsxs(Dt,{sx:{p:3,pt:1,gap:1},children:[t.jsx(ve,{onClick:s,variant:"outlined",disabled:a,sx:{color:"error.main",borderColor:"error.main",fontWeight:500,px:3,py:1,"&:hover":{bgcolor:"error.50",borderColor:"error.dark"},"&:disabled":{color:"grey.400",borderColor:"grey.300"}},children:"Cancel"}),t.jsx(ve,{onClick:w,variant:"contained",disabled:a,sx:{bgcolor:"primary.main",color:"white",fontWeight:500,px:3,py:1,"&:hover":{bgcolor:"secondary.light",color:"black"},"&:focus":{bgcolor:"primary.main"},"&:disabled":{bgcolor:"grey.300",color:"grey.500"}},children:a?"Processing...":"Proceed"})]})]})},ga=[{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],ba=[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],Ma=()=>{const e=b.useRef(null),a=It(),{enqueueSnackbar:s}=At(),[l,x]=b.useState([]),[z,R]=b.useState(!0),[w,k]=b.useState(null),[M,O]=b.useState(1),[Z]=b.useState(10),[ie,Le]=b.useState(0),[xe,U]=b.useState(""),[q,Se]=b.useState("createdAt:desc"),[ye,Y]=b.useState(""),N=Pt(n=>n.auth.token),[le,ze]=b.useState({}),B=b.useRef(null),[te,ce]=b.useState({type:"",workDay:null}),[ae,J]=b.useState({}),[$,v]=b.useState({}),[g,H]=b.useState({open:!1,workDayId:null}),[L,de]=b.useState(!1);b.useEffect(()=>{(async()=>{var d,y,u,p,m,D;R(!0),k(null);try{const j={page:M,limit:Z,sortBy:q};ye&&(j.name=ye);const C=await ge.get("/work-day",{params:j,headers:{Authorization:N}});x(((d=C.data.data)==null?void 0:d.results)||[]),Le(((y=C.data.data)==null?void 0:y.totalResults)||0)}catch(j){console.log(j,"<===== error fetching workdays"),k(((p=(u=j.response)==null?void 0:u.data)==null?void 0:p.message)||j.message),s(((D=(m=j.response)==null?void 0:m.data)==null?void 0:D.message)||j.message||"Failed to fetch work days",{variant:"error"})}finally{R(!1)}})()},[N,M,Z,q,ye,s]);const T=n=>n?n.url?n.url:n.Location?n.Location:null:null,Q=async n=>{var y,u,p;const d=n.rawFile;if(!d){s("No file found to download",{variant:"warning"});return}try{const D=(y=(await ge.get(`/work-day/get-download-url/${d}`,{headers:{Authorization:N}})).data)==null?void 0:y.data;D?(window.open(D,"_blank"),s("Download started",{variant:"success"})):s("No download link available.",{variant:"warning"})}catch(m){s(((p=(u=m.response)==null?void 0:u.data)==null?void 0:p.message)||m.message||"Download failed",{variant:"error"})}},ue=async(n,d)=>{var y,u;ze(p=>({...p,[n._id||n.id]:!0}));try{await ge.patch(`/work-day/${n._id||n.id}`,{status:d},{headers:{Authorization:N}}),x(p=>p.map(m=>(m._id||m.id)===(n._id||n.id)?{...m,status:d}:m)),s("Status updated!",{variant:"success"})}catch(p){s(((u=(y=p.response)==null?void 0:y.data)==null?void 0:u.message)||p.message||"Failed to update status",{variant:"error"})}finally{ze(p=>({...p,[n._id||n.id]:!1}))}},S=()=>{O(1),Y(xe)},re=(n,d)=>{ce({workDay:n,type:d}),B.current&&B.current.click()},Ie=async n=>{var D,j,C,pe;const d=(D=n.target.files)==null?void 0:D[0];if(!d||!te.type||!te.workDay)return;const{type:y,workDay:u}=te,p=d.name.split(".").pop().toLowerCase(),m=`${u.id||u._id}_${y}`;if(y==="tiff"&&p!=="tiff"&&p!=="tiff"){s(`Only .${y.toUpperCase()} files are allowed`,{variant:"error"});return}v(V=>({...V,[m]:!0})),J(V=>({...V,[m]:0}));try{const me=(await ge.post("/work-day/upload-resultFile",{workDayId:u.id||u._id,type:y,filename:d.name,contentType:d.type,size:d.size},{headers:{Authorization:N}})).data.data;if(y==="kml"||y==="jpg"&&d.size<=52428800)await ge.put(me.url,d,{headers:{"Content-Type":d.type},onUploadProgress:X=>{const ee=Math.round(X.loaded*100/X.total);J(fe=>({...fe,[m]:ee}))}}),s(`${y.toUpperCase()} uploaded successfully`,{variant:"success"});else if(y==="jpg"&&d.size>52428800){console.log(y,d.size,"<==="),console.log(me,"<==== wow owowowo");const{parts:X,uploadId:ee,key:fe,partSize:r}=me,o=[];let i=0;for(;i<d.size;){const h=Math.min(i+r,d.size);o.push(d.slice(i,h)),i=h}const f=[];for(let h=0;h<X.length;h++){const A=(j=(await fetch(X[h].url,{method:"PUT",body:o[h]})).headers.get("ETag"))==null?void 0:j.replace(/"/g,"");f.push({PartNumber:X[h].partNumber,ETag:A});const F=Math.round((h+1)/X.length*100);J(I=>({...I,[m]:F}))}await ge.post("/work-day/complete-upload",{workDayId:u.id||u._id,type:y,key:fe,uploadId:ee,parts:f},{headers:{Authorization:N}}),s("JPG uploaded successfully (multipart)",{variant:"success"})}}catch(V){s(((pe=(C=V.response)==null?void 0:C.data)==null?void 0:pe.message)||V.message||"Upload failed",{variant:"error"})}finally{v(V=>({...V,[m]:!1})),setTimeout(()=>{J(V=>({...V,[m]:0}))},2e3),B.current&&(B.current.value=""),ce({type:"",workDay:null})}},Ae=n=>{const d=l.find(u=>(u._id||u.id)===n);if(!d){s("Work day not found",{variant:"error"});return}if(!(d.tiffFile&&d.tiffFile.trim()!=="")){s("Please upload .tiff first before generating tiles.",{variant:"warning"});return}H({open:!0,workDayId:n})},we=async n=>{var y,u,p;const{workDayId:d}=g;de(!0);try{(y=(await ge.get(`/work-day/generate-tiles/${d}`,{headers:{Authorization:N},params:{maxzoom:n}})).data)!=null&&y.success?(s("Tile generation started successfully! This process will take at least 10 minutes to complete.",{variant:"success"}),H({open:!1,workDayId:null})):s("Failed to start tile generation",{variant:"error"})}catch(m){s(((p=(u=m.response)==null?void 0:u.data)==null?void 0:p.message)||m.message||"Failed to generate tiles",{variant:"error"})}finally{de(!1)}},Pe=()=>{H({open:!1,workDayId:null})},je=n=>{ce({workDay:n,type:"dxf"}),e.current&&e.current.click()},ne=async()=>{var p,m,D,j;const{workDay:n}=te,d=(m=(p=e.current)==null?void 0:p.files)==null?void 0:m[0];if(!d){s("Please select a .dxf file",{variant:"warning"});return}if(d.name.split(".").pop().toLowerCase()!=="dxf"){s("Only .dxf files are allowed",{variant:"error"});return}s("Uploading DXF file",{variant:"info"});const u=new FormData;u.append("file",d);try{await ge.post(`/mapFeature/overlayUpload/${n._id||n.id}`,u,{headers:{Authorization:N,"Content-Type":"multipart/form-data"}}),s("DXF uploaded successfully!",{variant:"success"}),e.current&&(e.current.value="")}catch(C){console.error("DXF upload failed",C),s(((j=(D=C.response)==null?void 0:D.data)==null?void 0:j.message)||C.message,{variant:"error"})}};return t.jsxs(Mt,{children:[t.jsx(_,{children:t.jsx(se,{variant:"h2",mb:2,gutterBottom:!0,children:"Historical Work Days"})}),t.jsxs(nt,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,alignItems:"center",children:[t.jsx(Vt,{label:"Search by Project",size:"small",value:xe,onChange:n=>U(n.target.value),onKeyDown:n=>{n.key==="Enter"&&S()}}),t.jsx(ve,{variant:"contained",onClick:S,sx:{minWidth:100},children:"Search"}),t.jsxs(ot,{size:"small",sx:{minWidth:150},children:[t.jsx(Wt,{children:"Sort By"}),t.jsx(st,{value:q,label:"Sort By",onChange:n=>{Se(n.target.value),O(1)},children:ba.map(n=>t.jsx(it,{value:n.value,children:n.label},n.value))})]})]}),z?t.jsx(se,{variant:"body1",children:"Loading work days..."}):w?t.jsx(se,{color:"error",children:w}):t.jsx(t.Fragment,{children:t.jsxs(Rt,{sx:{p:3,mx:"auto",mt:3},children:[t.jsx(Ot,{children:t.jsxs(_t,{size:"small",children:[t.jsx(Ut,{children:t.jsxs(Je,{sx:{bgcolor:a.palette.primary.light},children:[t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Time Stamp"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Historical Date"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Project Name"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Project"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Owner"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Status"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Tiff"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Action"})]})}),t.jsx(Yt,{children:l.length===0?t.jsx(Je,{children:t.jsx(W,{colSpan:7,align:"center",children:"No work days found."})}):l.map(n=>{var D;const d=(D=n.resultFiles)==null?void 0:D[0],y=!!T(d),u=n._id||n.id,p=n.projectId||{},m=p.owner||{};return t.jsxs(Je,{children:[t.jsx(W,{children:n.createdAt?qe(n.createdAt).format("DD/MM/YYYY"):n.name}),t.jsx(W,{children:qe(n.name,"YYYY-MM-DD",!0).isValid()?qe(n.name).format("DD/MM/YYYY"):n.name||"-"}),t.jsx(W,{children:p.name||"-"}),t.jsx(W,{children:p.location||"-"}),t.jsx(W,{children:m.firstName||m.lastName?`${m.firstName||""} ${m.lastName||""}`.trim():m.email||"-"}),t.jsx(W,{children:t.jsx(ot,{size:"small",sx:{minWidth:120},children:t.jsx(st,{value:n.status||"",onChange:j=>ue(n,j.target.value),disabled:le[u],children:ga.map(j=>t.jsx(it,{value:j.value,children:j.label},j.value))})})}),t.jsx(W,{children:n.tiffFile?n.tiffFile.split("-")[5]:"-"}),t.jsx(W,{children:t.jsxs(nt,{spacing:1,sx:{minWidth:200},children:[t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(fa,{}),onClick:()=>Q(n),disabled:!y&&!n.rawFile,fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Download"}),t.jsxs(_,{children:[t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(pt,{}),onClick:()=>re(n,"jpg"),disabled:$[`${u}_jpg`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload Tiff"}),$[`${u}_jpg`]&&t.jsxs(_,{sx:{mt:.5},children:[t.jsxs(se,{variant:"caption",color:"text.secondary",children:["Uploading..."," ",ae[`${u}_jpg`]||0,"%"]}),t.jsx(_,{sx:{width:"100%",mt:.5},children:t.jsx(_,{sx:{height:3,bgcolor:"grey.200",borderRadius:1.5,overflow:"hidden"},children:t.jsx(_,{sx:{width:`${ae[`${u}_jpg`]||0}%`,height:"100%",bgcolor:"secondary.main",transition:"width 0.3s ease"}})})})]})]}),t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(pt,{}),onClick:()=>je(n),disabled:$[`${n._id||n.id}_dxf`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload DXF"}),t.jsx(ve,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(He,{}),onClick:()=>Ae(u),disabled:$[`${u}_jpg`]||$[`${u}_kml`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Generate Tiles"})]})})]},u)})})]})}),t.jsx(_,{display:"flex",justifyContent:"center",mt:2,children:t.jsx(Bt,{count:Math.ceil(ie/Z),page:M,onChange:(n,d)=>O(d),color:"primary"})})]})}),t.jsx("input",{type:"file",ref:B,style:{display:"none"},onChange:Ie}),t.jsx("input",{type:"file",ref:e,style:{display:"none"},accept:".dxf",onChange:ne}),t.jsx(ha,{confirmDialog:g,generateTilesLoading:L,handleCancelGenerateTiles:Pe,handleConfirmGenerateTiles:we})]})};export{Ma as default};
