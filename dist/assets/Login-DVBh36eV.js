import{u as L,a as S,r as B,b as D,c as z,d as A,e as P,f as F,g as x,j as e,T as o,G as t,L as d,B as W,A as E,h as G,s as T,i as q,k as V,l as M,m as R,n as H,S as p,D as O}from"./index-B3qUXRAV.js";import{V as $,a as U}from"./VisibilityOff-B87uaKJs.js";import{F as g,O as j}from"./OutlinedInput-BYYlpLgi.js";import{I as f,B as N}from"./InputLabel-aQBoxI21.js";import{I as Q}from"./InputAdornment-Dq_srtK9.js";import{I as J}from"./IconButton-Cpfr-B-N.js";import{F as K,C as X}from"./FormControlLabel-aHygUa4K.js";function Y(){const a=L(),l=S(),[i,c]=B.useState(!1),w=()=>c(r=>!r),y=r=>r.preventDefault(),{enqueueSnackbar:u}=D(),b=z(),C=A(r=>r.auth),v=async(r,{setSubmitting:k})=>{var h,m;const I={email:r.email,password:r.password};try{const n=await G.post("/auth/login",I);n.status===200&&(u("Login successful!",{variant:"success"}),b(T({user:n.data.data.user,token:n.data.data.tokens.access.token})),localStorage.setItem("token",n.data.data.tokens.access.token),setTimeout(()=>{l("/project")},500))}catch(n){u(((m=(h=n.response)==null?void 0:h.data)==null?void 0:m.message)||"Login failed. Please try again.",{variant:"error"})}finally{k(!1)}},s=P({initialValues:{email:"",password:"",keepLoggedIn:!0},validationSchema:F({email:x().email("Invalid email").required("Email is required"),password:x().required("Password is required")}),onSubmit:v});return e.jsxs("form",{noValidate:!0,onSubmit:s.handleSubmit,children:[e.jsxs(g,{fullWidth:!0,sx:{...a.typography.customInput},error:s.touched.email&&!!s.errors.email,children:[e.jsx(f,{onClick:()=>console.log(C),htmlFor:"email",children:"Email Address / Username"}),e.jsx(j,{id:"email",type:"email",value:s.values.email,name:"email",onBlur:s.handleBlur,onChange:s.handleChange,label:"Email Address / Username"})]}),s.touched.email&&s.errors.email&&e.jsx(o,{color:"error",variant:"caption",children:s.errors.email}),e.jsxs(g,{fullWidth:!0,sx:{...a.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(f,{htmlFor:"password",children:"Password"}),e.jsx(j,{id:"password",type:i?"text":"password",value:s.values.password,name:"password",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(Q,{position:"end",children:e.jsx(J,{"aria-label":"toggle password visibility",onClick:w,onMouseDown:y,edge:"end",size:"large",children:i?e.jsx($,{}):e.jsx(U,{})})}),label:"Password"})]}),s.touched.password&&s.errors.password&&e.jsx(o,{color:"error",variant:"caption",children:s.errors.password}),e.jsxs(t,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(t,{item:!0,children:e.jsx(K,{control:e.jsx(X,{checked:s.values.keepLoggedIn,onChange:s.handleChange,name:"keepLoggedIn",color:"primary"}),label:"Remember me"})}),e.jsx(t,{item:!0,children:e.jsx(o,{variant:"subtitle1",component:d,to:"/forget-password",color:"secondary",sx:{textDecoration:"none"},children:"Forgot Password?"})})]}),e.jsx(W,{sx:{mt:2},children:e.jsx(E,{children:e.jsx(N,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Log In"})})})]})}function oe(){const a=q(),l=V(c=>c.breakpoints.down("md")),i=()=>{console.log("Trigger Google Login")};return e.jsx(M,{children:e.jsx(t,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(t,{size:12,children:e.jsx(t,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(t,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(R,{children:e.jsxs(t,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(t,{sx:{mb:3,textDecoration:"none"},children:e.jsx(d,{style:{textDecoration:"none"},to:"/","aria-label":"logo",children:e.jsx(H,{})})}),e.jsx(t,{size:12,children:e.jsx(t,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(t,{children:e.jsxs(p,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(o,{gutterBottom:!0,variant:l?"h3":"h2",sx:{color:"secondary.main"},children:"Hi, Welcome Back"}),e.jsx(o,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Enter your credentials to continue"})]})})})}),e.jsxs(t,{size:12,children:[e.jsx(Y,{}),e.jsx(t,{sx:{mt:4},item:!0,xs:12,children:e.jsx(p,{direction:"row",justifyContent:"center",children:e.jsxs("button",{onClick:i,style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#fff",cursor:"pointer",fontWeight:500,fontSize:"14px"},children:[e.jsx("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google logo",style:{width:20,height:20,marginRight:10}}),"Login with Google"]})})})]}),e.jsx(t,{size:12,children:e.jsx(O,{})}),e.jsx(t,{size:12,children:e.jsx(t,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(o,{component:d,to:"/register",variant:"subtitle1",sx:{textDecoration:"underline",textDecorationColor:a.palette.secondary[200],color:"inherit","&:hover":{textDecorationColor:a.palette.secondary[800]}},children:"Don't have an account?"})})})]})})})})})})})}export{oe as default};
