import{u as z,a as B,r as A,b as D,e as R,f as q,g as m,w as L,j as e,F as p,I as w,O as j,h as f,i as g,T as i,G as r,B as $,A as F,l as V,z as W,m as M,n as O,o as T,p as Q,q as E,L as y,t as G,S as H,D as Z}from"./index-CbE7U_Jx.js";import{V as P,a as b}from"./VisibilityOff-3HvViA3c.js";function N(){const a=z(),t=B(),[o,v]=A.useState(!1),c=()=>v(n=>!n),d=n=>n.preventDefault(),{enqueueSnackbar:l}=D(),C=/^(?=.*[A-Z])(?=.*\d)(?=.*[@!#$%^&*])[A-Za-z\d@!#$%^&*]{12,}$/,I=new URLSearchParams(W().search).get("token"),k=async(n,{setSubmitting:S})=>{var u,h;try{(await M.post("auth/reset-password",n,{params:{token:I}})).status===200&&(l("Password has been succcessfully changed!",{variant:"success"}),t("/login"))}catch(x){l(((h=(u=x.response)==null?void 0:u.data)==null?void 0:h.message)||"Login failed. Please try again.",{variant:"error"})}finally{S(!1)}},s=R({initialValues:{password:"",confirmPassword:""},validationSchema:q({password:m().required("Password is required").matches(C,"Password must be at least 12 characters and include an uppercase letter, a number, and a special character (@!#$%^&*)"),confirmPassword:m().required("Confirm Password is required").oneOf([L("password"),null],"Passwords must match")}),onSubmit:k});return e.jsxs("form",{noValidate:!0,onSubmit:s.handleSubmit,children:[e.jsxs(p,{fullWidth:!0,sx:{...a.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(w,{htmlFor:"password",children:"Password"}),e.jsx(j,{id:"password",type:o?"text":"password",value:s.values.password,name:"password",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(f,{position:"end",children:e.jsx(g,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:d,edge:"end",size:"large",children:o?e.jsx(P,{}):e.jsx(b,{})})}),label:"Password"}),s.touched.password&&s.errors.password&&e.jsx(i,{color:"error",variant:"caption",children:s.errors.password})]}),e.jsxs(p,{fullWidth:!0,sx:{...a.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(w,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(j,{id:"confirmPassword",type:o?"text":"password",value:s.values.confirmPassword,name:"confirmPassword",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(f,{position:"end",children:e.jsx(g,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:d,edge:"end",size:"large",children:o?e.jsx(P,{}):e.jsx(b,{})})}),label:"confirmPassword"})]}),s.touched.confirmPassword&&s.errors.confirmPassword&&e.jsx(i,{color:"error",variant:"caption",children:s.errors.confirmPassword}),e.jsx(r,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"}}),e.jsx($,{sx:{mt:2},children:e.jsx(F,{children:e.jsx(V,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Reset Password"})})})]})}function Y(){const a=O();return T(t=>t.breakpoints.down("md")),e.jsx(Q,{children:e.jsx(r,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(r,{size:12,children:e.jsx(r,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 38px)"},children:e.jsx(r,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(E,{children:e.jsxs(r,{container:!0,spacing:0,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{sx:{mb:3},children:e.jsx(y,{style:{textDecoration:"none"},to:"#","aria-label":"theme logo",children:e.jsx(G,{})})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(r,{children:e.jsx(H,{spacing:1,sx:{alignItems:"center",justifyContent:"center"}})})})}),e.jsx(r,{size:12,children:e.jsx(N,{})}),e.jsx(r,{size:12,children:e.jsx(Z,{})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(i,{component:y,to:"/login",variant:"subtitle1",sx:{textDecoration:"underline",textDecorationColor:a.palette.secondary[200],color:"inherit","&:hover":{textDecorationColor:a.palette.secondary[800]}},children:"Already have an account?"})})})]})})})})})})})}export{Y as default};
