const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Login-iHRm4bmY.js","./VisibilityOff-DeQ5tdCq.js","./Register-TnlvPOXs.js","./Typography-B6awIVZf.js","./CardSecondaryAction-huwsuJvY.js","./Color-D86CJ3YJ.js","./Shadow-DERwX7Aa.js"])))=>i.map(i=>d[i]);
var Ise=Object.defineProperty;var kse=(e,t,n)=>t in e?Ise(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Or=(e,t,n)=>kse(e,typeof t!="symbol"?t+"":t,n);function Ose(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(r,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function _a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lse(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var uI={exports:{}},zw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yU;function zse(){if(yU)return zw;yU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,c){var h=null;if(c!==void 0&&(h=""+c),s.key!==void 0&&(h=""+s.key),"key"in s){c={};for(var i in s)i!=="key"&&(c[i]=s[i])}else c=s;return s=c.ref,{$$typeof:e,type:r,key:h,ref:s!==void 0?s:null,props:c}}return zw.Fragment=t,zw.jsx=n,zw.jsxs=n,zw}var vU;function Fse(){return vU||(vU=1,uI.exports=zse()),uI.exports}var $=Fse(),dI={exports:{}},Fw={},hI={exports:{}},fI={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _U;function Bse(){return _U||(_U=1,function(e){function t(Se,qe){var it=Se.length;Se.push(qe);e:for(;0<it;){var tt=it-1>>>1,Oe=Se[tt];if(0<s(Oe,qe))Se[tt]=qe,Se[it]=Oe,it=tt;else break e}}function n(Se){return Se.length===0?null:Se[0]}function r(Se){if(Se.length===0)return null;var qe=Se[0],it=Se.pop();if(it!==qe){Se[0]=it;e:for(var tt=0,Oe=Se.length,Je=Oe>>>1;tt<Je;){var yt=2*(tt+1)-1,wt=Se[yt],$t=yt+1,It=Se[$t];if(0>s(wt,it))$t<Oe&&0>s(It,wt)?(Se[tt]=It,Se[$t]=it,tt=$t):(Se[tt]=wt,Se[yt]=it,tt=yt);else if($t<Oe&&0>s(It,it))Se[tt]=It,Se[$t]=it,tt=$t;else break e}}return qe}function s(Se,qe){var it=Se.sortIndex-qe.sortIndex;return it!==0?it:Se.id-qe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var h=Date,i=h.now();e.unstable_now=function(){return h.now()-i}}var g=[],w=[],T=1,A=null,D=3,k=!1,I=!1,F=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function K(Se){for(var qe=n(w);qe!==null;){if(qe.callback===null)r(w);else if(qe.startTime<=Se)r(w),qe.sortIndex=qe.expirationTime,t(g,qe);else break;qe=n(w)}}function ee(Se){if(F=!1,K(Se),!I)if(n(g)!==null)I=!0,se||(se=!0,Te());else{var qe=n(w);qe!==null&&He(ee,qe.startTime-Se)}}var se=!1,he=-1,ye=5,_e=-1;function ae(){return j?!0:!(e.unstable_now()-_e<ye)}function be(){if(j=!1,se){var Se=e.unstable_now();_e=Se;var qe=!0;try{e:{I=!1,F&&(F=!1,W(he),he=-1),k=!0;var it=D;try{t:{for(K(Se),A=n(g);A!==null&&!(A.expirationTime>Se&&ae());){var tt=A.callback;if(typeof tt=="function"){A.callback=null,D=A.priorityLevel;var Oe=tt(A.expirationTime<=Se);if(Se=e.unstable_now(),typeof Oe=="function"){A.callback=Oe,K(Se),qe=!0;break t}A===n(g)&&r(g),K(Se)}else r(g);A=n(g)}if(A!==null)qe=!0;else{var Je=n(w);Je!==null&&He(ee,Je.startTime-Se),qe=!1}}break e}finally{A=null,D=it,k=!1}qe=void 0}}finally{qe?Te():se=!1}}}var Te;if(typeof Z=="function")Te=function(){Z(be)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Re=Ae.port2;Ae.port1.onmessage=be,Te=function(){Re.postMessage(null)}}else Te=function(){V(be,0)};function He(Se,qe){he=V(function(){Se(e.unstable_now())},qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Se){Se.callback=null},e.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<Se?Math.floor(1e3/Se):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_next=function(Se){switch(D){case 1:case 2:case 3:var qe=3;break;default:qe=D}var it=D;D=qe;try{return Se()}finally{D=it}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(Se,qe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var it=D;D=Se;try{return qe()}finally{D=it}},e.unstable_scheduleCallback=function(Se,qe,it){var tt=e.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?tt+it:tt):it=tt,Se){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=it+Oe,Se={id:T++,callback:qe,priorityLevel:Se,startTime:it,expirationTime:Oe,sortIndex:-1},it>tt?(Se.sortIndex=it,t(w,Se),n(g)===null&&Se===n(w)&&(F?(W(he),he=-1):F=!0,He(ee,it-tt))):(Se.sortIndex=Oe,t(g,Se),I||k||(I=!0,se||(se=!0,Te()))),Se},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(Se){var qe=D;return function(){var it=D;D=qe;try{return Se.apply(this,arguments)}finally{D=it}}}}(fI)),fI}var xU;function Nse(){return xU||(xU=1,hI.exports=Bse()),hI.exports}var pI={exports:{}},Ji={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU;function jse(){if(bU)return Ji;bU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function D(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=A&&Oe[A]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,F={};function j(Oe,Je,yt){this.props=Oe,this.context=Je,this.refs=F,this.updater=yt||k}j.prototype.isReactComponent={},j.prototype.setState=function(Oe,Je){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,Je,"setState")},j.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function V(){}V.prototype=j.prototype;function W(Oe,Je,yt){this.props=Oe,this.context=Je,this.refs=F,this.updater=yt||k}var Z=W.prototype=new V;Z.constructor=W,I(Z,j.prototype),Z.isPureReactComponent=!0;var K=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function he(Oe,Je,yt,wt,$t,It){return yt=It.ref,{$$typeof:e,type:Oe,key:Je,ref:yt!==void 0?yt:null,props:It}}function ye(Oe,Je){return he(Oe.type,Je,void 0,void 0,void 0,Oe.props)}function _e(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===e}function ae(Oe){var Je={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(yt){return Je[yt]})}var be=/\/+/g;function Te(Oe,Je){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?ae(""+Oe.key):Je.toString(36)}function Ae(){}function Re(Oe){switch(Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason;default:switch(typeof Oe.status=="string"?Oe.then(Ae,Ae):(Oe.status="pending",Oe.then(function(Je){Oe.status==="pending"&&(Oe.status="fulfilled",Oe.value=Je)},function(Je){Oe.status==="pending"&&(Oe.status="rejected",Oe.reason=Je)})),Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason}}throw Oe}function He(Oe,Je,yt,wt,$t){var It=typeof Oe;(It==="undefined"||It==="boolean")&&(Oe=null);var vt=!1;if(Oe===null)vt=!0;else switch(It){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(Oe.$$typeof){case e:case t:vt=!0;break;case T:return vt=Oe._init,He(vt(Oe._payload),Je,yt,wt,$t)}}if(vt)return $t=$t(Oe),vt=wt===""?"."+Te(Oe,0):wt,K($t)?(yt="",vt!=null&&(yt=vt.replace(be,"$&/")+"/"),He($t,Je,yt,"",function(yn){return yn})):$t!=null&&(_e($t)&&($t=ye($t,yt+($t.key==null||Oe&&Oe.key===$t.key?"":(""+$t.key).replace(be,"$&/")+"/")+vt)),Je.push($t)),1;vt=0;var sn=wt===""?".":wt+":";if(K(Oe))for(var Rn=0;Rn<Oe.length;Rn++)wt=Oe[Rn],It=sn+Te(wt,Rn),vt+=He(wt,Je,yt,It,$t);else if(Rn=D(Oe),typeof Rn=="function")for(Oe=Rn.call(Oe),Rn=0;!(wt=Oe.next()).done;)wt=wt.value,It=sn+Te(wt,Rn++),vt+=He(wt,Je,yt,It,$t);else if(It==="object"){if(typeof Oe.then=="function")return He(Re(Oe),Je,yt,wt,$t);throw Je=String(Oe),Error("Objects are not valid as a React child (found: "+(Je==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":Je)+"). If you meant to render a collection of children, use an array instead.")}return vt}function Se(Oe,Je,yt){if(Oe==null)return Oe;var wt=[],$t=0;return He(Oe,wt,"","",function(It){return Je.call(yt,It,$t++)}),wt}function qe(Oe){if(Oe._status===-1){var Je=Oe._result;Je=Je(),Je.then(function(yt){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=yt)},function(yt){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=yt)}),Oe._status===-1&&(Oe._status=0,Oe._result=Je)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var it=typeof reportError=="function"?reportError:function(Oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Je=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Oe=="object"&&Oe!==null&&typeof Oe.message=="string"?String(Oe.message):String(Oe),error:Oe});if(!window.dispatchEvent(Je))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Oe);return}console.error(Oe)};function tt(){}return Ji.Children={map:Se,forEach:function(Oe,Je,yt){Se(Oe,function(){Je.apply(this,arguments)},yt)},count:function(Oe){var Je=0;return Se(Oe,function(){Je++}),Je},toArray:function(Oe){return Se(Oe,function(Je){return Je})||[]},only:function(Oe){if(!_e(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}},Ji.Component=j,Ji.Fragment=n,Ji.Profiler=s,Ji.PureComponent=W,Ji.StrictMode=r,Ji.Suspense=g,Ji.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Ji.__COMPILER_RUNTIME={__proto__:null,c:function(Oe){return ee.H.useMemoCache(Oe)}},Ji.cache=function(Oe){return function(){return Oe.apply(null,arguments)}},Ji.cloneElement=function(Oe,Je,yt){if(Oe==null)throw Error("The argument must be a React element, but you passed "+Oe+".");var wt=I({},Oe.props),$t=Oe.key,It=void 0;if(Je!=null)for(vt in Je.ref!==void 0&&(It=void 0),Je.key!==void 0&&($t=""+Je.key),Je)!se.call(Je,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&Je.ref===void 0||(wt[vt]=Je[vt]);var vt=arguments.length-2;if(vt===1)wt.children=yt;else if(1<vt){for(var sn=Array(vt),Rn=0;Rn<vt;Rn++)sn[Rn]=arguments[Rn+2];wt.children=sn}return he(Oe.type,$t,void 0,void 0,It,wt)},Ji.createContext=function(Oe){return Oe={$$typeof:h,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null},Oe.Provider=Oe,Oe.Consumer={$$typeof:c,_context:Oe},Oe},Ji.createElement=function(Oe,Je,yt){var wt,$t={},It=null;if(Je!=null)for(wt in Je.key!==void 0&&(It=""+Je.key),Je)se.call(Je,wt)&&wt!=="key"&&wt!=="__self"&&wt!=="__source"&&($t[wt]=Je[wt]);var vt=arguments.length-2;if(vt===1)$t.children=yt;else if(1<vt){for(var sn=Array(vt),Rn=0;Rn<vt;Rn++)sn[Rn]=arguments[Rn+2];$t.children=sn}if(Oe&&Oe.defaultProps)for(wt in vt=Oe.defaultProps,vt)$t[wt]===void 0&&($t[wt]=vt[wt]);return he(Oe,It,void 0,void 0,null,$t)},Ji.createRef=function(){return{current:null}},Ji.forwardRef=function(Oe){return{$$typeof:i,render:Oe}},Ji.isValidElement=_e,Ji.lazy=function(Oe){return{$$typeof:T,_payload:{_status:-1,_result:Oe},_init:qe}},Ji.memo=function(Oe,Je){return{$$typeof:w,type:Oe,compare:Je===void 0?null:Je}},Ji.startTransition=function(Oe){var Je=ee.T,yt={};ee.T=yt;try{var wt=Oe(),$t=ee.S;$t!==null&&$t(yt,wt),typeof wt=="object"&&wt!==null&&typeof wt.then=="function"&&wt.then(tt,it)}catch(It){it(It)}finally{ee.T=Je}},Ji.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Ji.use=function(Oe){return ee.H.use(Oe)},Ji.useActionState=function(Oe,Je,yt){return ee.H.useActionState(Oe,Je,yt)},Ji.useCallback=function(Oe,Je){return ee.H.useCallback(Oe,Je)},Ji.useContext=function(Oe){return ee.H.useContext(Oe)},Ji.useDebugValue=function(){},Ji.useDeferredValue=function(Oe,Je){return ee.H.useDeferredValue(Oe,Je)},Ji.useEffect=function(Oe,Je,yt){var wt=ee.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return wt.useEffect(Oe,Je)},Ji.useId=function(){return ee.H.useId()},Ji.useImperativeHandle=function(Oe,Je,yt){return ee.H.useImperativeHandle(Oe,Je,yt)},Ji.useInsertionEffect=function(Oe,Je){return ee.H.useInsertionEffect(Oe,Je)},Ji.useLayoutEffect=function(Oe,Je){return ee.H.useLayoutEffect(Oe,Je)},Ji.useMemo=function(Oe,Je){return ee.H.useMemo(Oe,Je)},Ji.useOptimistic=function(Oe,Je){return ee.H.useOptimistic(Oe,Je)},Ji.useReducer=function(Oe,Je,yt){return ee.H.useReducer(Oe,Je,yt)},Ji.useRef=function(Oe){return ee.H.useRef(Oe)},Ji.useState=function(Oe){return ee.H.useState(Oe)},Ji.useSyncExternalStore=function(Oe,Je,yt){return ee.H.useSyncExternalStore(Oe,Je,yt)},Ji.useTransition=function(){return ee.H.useTransition()},Ji.version="19.1.0",Ji}var wU;function mh(){return wU||(wU=1,pI.exports=jse()),pI.exports}var mI={exports:{}},sc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SU;function Vse(){if(SU)return sc;SU=1;var e=mh();function t(g){var w="https://react.dev/errors/"+g;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)w+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(g,w,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:A==null?null:""+A,children:g,containerInfo:w,implementation:T}}var h=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(g,w){if(g==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return sc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sc.createPortal=function(g,w){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(t(299));return c(g,w,null,T)},sc.flushSync=function(g){var w=h.T,T=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=w,r.p=T,r.d.f()}},sc.preconnect=function(g,w){typeof g=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,r.d.C(g,w))},sc.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},sc.preinit=function(g,w){if(typeof g=="string"&&w&&typeof w.as=="string"){var T=w.as,A=i(T,w.crossOrigin),D=typeof w.integrity=="string"?w.integrity:void 0,k=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;T==="style"?r.d.S(g,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:A,integrity:D,fetchPriority:k}):T==="script"&&r.d.X(g,{crossOrigin:A,integrity:D,fetchPriority:k,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},sc.preinitModule=function(g,w){if(typeof g=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var T=i(w.as,w.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&r.d.M(g)},sc.preload=function(g,w){if(typeof g=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var T=w.as,A=i(T,w.crossOrigin);r.d.L(g,T,{crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},sc.preloadModule=function(g,w){if(typeof g=="string")if(w){var T=i(w.as,w.crossOrigin);r.d.m(g,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else r.d.m(g)},sc.requestFormReset=function(g){r.d.r(g)},sc.unstable_batchedUpdates=function(g,w){return g(w)},sc.useFormState=function(g,w,T){return h.H.useFormState(g,w,T)},sc.useFormStatus=function(){return h.H.useHostTransitionStatus()},sc.version="19.1.0",sc}var TU;function MY(){if(TU)return mI.exports;TU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mI.exports=Vse(),mI.exports}var EU;function Use(){if(EU)return Fw;EU=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=Nse(),t=mh(),n=MY();function r(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function c(p){var _=p,C=p;if(p.alternate)for(;_.return;)_=_.return;else{p=_;do _=p,(_.flags&4098)!==0&&(C=_.return),p=_.return;while(p)}return _.tag===3?C:null}function h(p){if(p.tag===13){var _=p.memoizedState;if(_===null&&(p=p.alternate,p!==null&&(_=p.memoizedState)),_!==null)return _.dehydrated}return null}function i(p){if(c(p)!==p)throw Error(r(188))}function g(p){var _=p.alternate;if(!_){if(_=c(p),_===null)throw Error(r(188));return _!==p?null:p}for(var C=p,z=_;;){var X=C.return;if(X===null)break;var oe=X.alternate;if(oe===null){if(z=X.return,z!==null){C=z;continue}break}if(X.child===oe.child){for(oe=X.child;oe;){if(oe===C)return i(X),p;if(oe===z)return i(X),_;oe=oe.sibling}throw Error(r(188))}if(C.return!==z.return)C=X,z=oe;else{for(var Ce=!1,Ge=X.child;Ge;){if(Ge===C){Ce=!0,C=X,z=oe;break}if(Ge===z){Ce=!0,z=X,C=oe;break}Ge=Ge.sibling}if(!Ce){for(Ge=oe.child;Ge;){if(Ge===C){Ce=!0,C=oe,z=X;break}if(Ge===z){Ce=!0,z=oe,C=X;break}Ge=Ge.sibling}if(!Ce)throw Error(r(189))}}if(C.alternate!==z)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?p:_}function w(p){var _=p.tag;if(_===5||_===26||_===27||_===6)return p;for(p=p.child;p!==null;){if(_=w(p),_!==null)return _;p=p.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function Te(p){return p===null||typeof p!="object"?null:(p=be&&p[be]||p["@@iterator"],typeof p=="function"?p:null)}var Ae=Symbol.for("react.client.reference");function Re(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===Ae?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case I:return"Fragment";case j:return"Profiler";case F:return"StrictMode";case ee:return"Suspense";case se:return"SuspenseList";case _e:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case k:return"Portal";case Z:return(p.displayName||"Context")+".Provider";case W:return(p._context.displayName||"Context")+".Consumer";case K:var _=p.render;return p=p.displayName,p||(p=_.displayName||_.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case he:return _=p.displayName||null,_!==null?_:Re(p.type)||"Memo";case ye:_=p._payload,p=p._init;try{return Re(p(_))}catch{}}return null}var He=Array.isArray,Se=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},tt=[],Oe=-1;function Je(p){return{current:p}}function yt(p){0>Oe||(p.current=tt[Oe],tt[Oe]=null,Oe--)}function wt(p,_){Oe++,tt[Oe]=p.current,p.current=_}var $t=Je(null),It=Je(null),vt=Je(null),sn=Je(null);function Rn(p,_){switch(wt(vt,_),wt(It,p),wt($t,null),_.nodeType){case 9:case 11:p=(p=_.documentElement)&&(p=p.namespaceURI)?bx(p):0;break;default:if(p=_.tagName,_=_.namespaceURI)_=bx(_),p=wx(_,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}yt($t),wt($t,p)}function yn(){yt($t),yt(It),yt(vt)}function Qt(p){p.memoizedState!==null&&wt(sn,p);var _=$t.current,C=wx(_,p.type);_!==C&&(wt(It,p),wt($t,C))}function Jt(p){It.current===p&&(yt($t),yt(It)),sn.current===p&&(yt(sn),Ty._currentValue=it)}var fn=Object.prototype.hasOwnProperty,Bt=e.unstable_scheduleCallback,Kt=e.unstable_cancelCallback,_n=e.unstable_shouldYield,an=e.unstable_requestPaint,Ft=e.unstable_now,kn=e.unstable_getCurrentPriorityLevel,Yn=e.unstable_ImmediatePriority,wn=e.unstable_UserBlockingPriority,Vn=e.unstable_NormalPriority,ut=e.unstable_LowPriority,gn=e.unstable_IdlePriority,Rt=e.log,Wt=e.unstable_setDisableYieldValue,zn=null,Un=null;function mr(p){if(typeof Rt=="function"&&Wt(p),Un&&typeof Un.setStrictMode=="function")try{Un.setStrictMode(zn,p)}catch{}}var Xn=Math.clz32?Math.clz32:Fr,or=Math.log,En=Math.LN2;function Fr(p){return p>>>=0,p===0?32:31-(or(p)/En|0)|0}var Er=256,_r=4194304;function nr(p){var _=p&42;if(_!==0)return _;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Wr(p,_,C){var z=p.pendingLanes;if(z===0)return 0;var X=0,oe=p.suspendedLanes,Ce=p.pingedLanes;p=p.warmLanes;var Ge=z&134217727;return Ge!==0?(z=Ge&~oe,z!==0?X=nr(z):(Ce&=Ge,Ce!==0?X=nr(Ce):C||(C=Ge&~p,C!==0&&(X=nr(C))))):(Ge=z&~oe,Ge!==0?X=nr(Ge):Ce!==0?X=nr(Ce):C||(C=z&~p,C!==0&&(X=nr(C)))),X===0?0:_!==0&&_!==X&&(_&oe)===0&&(oe=X&-X,C=_&-_,oe>=C||oe===32&&(C&4194048)!==0)?_:X}function wr(p,_){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&_)===0}function Rr(p,_){switch(p){case 1:case 2:case 4:case 8:case 64:return _+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(){var p=Er;return Er<<=1,(Er&4194048)===0&&(Er=256),p}function Wo(){var p=_r;return _r<<=1,(_r&62914560)===0&&(_r=4194304),p}function ko(p){for(var _=[],C=0;31>C;C++)_.push(p);return _}function Ro(p,_){p.pendingLanes|=_,_!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function bl(p,_,C,z,X,oe){var Ce=p.pendingLanes;p.pendingLanes=C,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=C,p.entangledLanes&=C,p.errorRecoveryDisabledLanes&=C,p.shellSuspendCounter=0;var Ge=p.entanglements,mt=p.expirationTimes,en=p.hiddenUpdates;for(C=Ce&~C;0<C;){var Dn=31-Xn(C),qn=1<<Dn;Ge[Dn]=0,mt[Dn]=-1;var cn=en[Dn];if(cn!==null)for(en[Dn]=null,Dn=0;Dn<cn.length;Dn++){var hn=cn[Dn];hn!==null&&(hn.lane&=-536870913)}C&=~qn}z!==0&&oa(p,z,0),oe!==0&&X===0&&p.tag!==0&&(p.suspendedLanes|=oe&~(Ce&~_))}function oa(p,_,C){p.pendingLanes|=_,p.suspendedLanes&=~_;var z=31-Xn(_);p.entangledLanes|=_,p.entanglements[z]=p.entanglements[z]|1073741824|C&4194090}function dn(p,_){var C=p.entangledLanes|=_;for(p=p.entanglements;C;){var z=31-Xn(C),X=1<<z;X&_|p[z]&_&&(p[z]|=_),C&=~X}}function Hs(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function Pr(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function De(){var p=qe.p;return p!==0?p:(p=window.event,p===void 0?32:Cy(p.type))}function re(p,_){var C=qe.p;try{return qe.p=p,_()}finally{qe.p=C}}var le=Math.random().toString(36).slice(2),xe="__reactFiber$"+le,ke="__reactProps$"+le,Ne="__reactContainer$"+le,Xe="__reactEvents$"+le,We="__reactListeners$"+le,Ke="__reactHandles$"+le,at="__reactResources$"+le,ft="__reactMarker$"+le;function st(p){delete p[xe],delete p[ke],delete p[Xe],delete p[We],delete p[Ke]}function zt(p){var _=p[xe];if(_)return _;for(var C=p.parentNode;C;){if(_=C[Ne]||C[xe]){if(C=_.alternate,_.child!==null||C!==null&&C.child!==null)for(p=yp(p);p!==null;){if(C=p[xe])return C;p=yp(p)}return _}p=C,C=p.parentNode}return null}function ln(p){if(p=p[xe]||p[Ne]){var _=p.tag;if(_===5||_===6||_===13||_===26||_===27||_===3)return p}return null}function xn(p){var _=p.tag;if(_===5||_===26||_===27||_===6)return p.stateNode;throw Error(r(33))}function ir(p){var _=p[at];return _||(_=p[at]={hoistableStyles:new Map,hoistableScripts:new Map}),_}function er(p){p[ft]=!0}var tr=new Set,kr={};function bi(p,_){Ir(p,_),Ir(p+"Capture",_)}function Ir(p,_){for(kr[p]=_,p=0;p<_.length;p++)tr.add(_[p])}var li=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kr={},wi={};function zi(p){return fn.call(wi,p)?!0:fn.call(Kr,p)?!1:li.test(p)?wi[p]=!0:(Kr[p]=!0,!1)}function $i(p,_,C){if(zi(_))if(C===null)p.removeAttribute(_);else{switch(typeof C){case"undefined":case"function":case"symbol":p.removeAttribute(_);return;case"boolean":var z=_.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){p.removeAttribute(_);return}}p.setAttribute(_,""+C)}}function bo(p,_,C){if(C===null)p.removeAttribute(_);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(_);return}p.setAttribute(_,""+C)}}function Zr(p,_,C,z){if(z===null)p.removeAttribute(C);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(C);return}p.setAttributeNS(_,C,""+z)}}var lo,Is;function Oo(p){if(lo===void 0)try{throw Error()}catch(C){var _=C.stack.trim().match(/\n( *(at )?)/);lo=_&&_[1]||"",Is=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lo+p+Is}var is=!1;function Pi(p,_){if(!p||is)return"";is=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(_){var qn=function(){throw Error()};if(Object.defineProperty(qn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qn,[])}catch(hn){var cn=hn}Reflect.construct(p,[],qn)}else{try{qn.call()}catch(hn){cn=hn}p.call(qn.prototype)}}else{try{throw Error()}catch(hn){cn=hn}(qn=p())&&typeof qn.catch=="function"&&qn.catch(function(){})}}catch(hn){if(hn&&cn&&typeof hn.stack=="string")return[hn.stack,cn.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var X=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");X&&X.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var oe=z.DetermineComponentFrameRoot(),Ce=oe[0],Ge=oe[1];if(Ce&&Ge){var mt=Ce.split(`
`),en=Ge.split(`
`);for(X=z=0;z<mt.length&&!mt[z].includes("DetermineComponentFrameRoot");)z++;for(;X<en.length&&!en[X].includes("DetermineComponentFrameRoot");)X++;if(z===mt.length||X===en.length)for(z=mt.length-1,X=en.length-1;1<=z&&0<=X&&mt[z]!==en[X];)X--;for(;1<=z&&0<=X;z--,X--)if(mt[z]!==en[X]){if(z!==1||X!==1)do if(z--,X--,0>X||mt[z]!==en[X]){var Dn=`
`+mt[z].replace(" at new "," at ");return p.displayName&&Dn.includes("<anonymous>")&&(Dn=Dn.replace("<anonymous>",p.displayName)),Dn}while(1<=z&&0<=X);break}}}finally{is=!1,Error.prepareStackTrace=C}return(C=p?p.displayName||p.name:"")?Oo(C):""}function Yo(p){switch(p.tag){case 26:case 27:case 5:return Oo(p.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 15:return Pi(p.type,!1);case 11:return Pi(p.type.render,!1);case 1:return Pi(p.type,!0);case 31:return Oo("Activity");default:return""}}function Qa(p){try{var _="";do _+=Yo(p),p=p.return;while(p);return _}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function As(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Of(p){var _=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Lf(p){var _=Of(p)?"checked":"value",C=Object.getOwnPropertyDescriptor(p.constructor.prototype,_),z=""+p[_];if(!p.hasOwnProperty(_)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var X=C.get,oe=C.set;return Object.defineProperty(p,_,{configurable:!0,get:function(){return X.call(this)},set:function(Ce){z=""+Ce,oe.call(this,Ce)}}),Object.defineProperty(p,_,{enumerable:C.enumerable}),{getValue:function(){return z},setValue:function(Ce){z=""+Ce},stopTracking:function(){p._valueTracker=null,delete p[_]}}}}function xh(p){p._valueTracker||(p._valueTracker=Lf(p))}function zf(p){if(!p)return!1;var _=p._valueTracker;if(!_)return!0;var C=_.getValue(),z="";return p&&(z=Of(p)?p.checked?"true":"false":p.value),p=z,p!==C?(_.setValue(p),!0):!1}function Xc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var am=/[\n"\\]/g;function Ja(p){return p.replace(am,function(_){return"\\"+_.charCodeAt(0).toString(16)+" "})}function wl(p,_,C,z,X,oe,Ce,Ge){p.name="",Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?p.type=Ce:p.removeAttribute("type"),_!=null?Ce==="number"?(_===0&&p.value===""||p.value!=_)&&(p.value=""+As(_)):p.value!==""+As(_)&&(p.value=""+As(_)):Ce!=="submit"&&Ce!=="reset"||p.removeAttribute("value"),_!=null?ba(p,Ce,As(_)):C!=null?ba(p,Ce,As(C)):z!=null&&p.removeAttribute("value"),X==null&&oe!=null&&(p.defaultChecked=!!oe),X!=null&&(p.checked=X&&typeof X!="function"&&typeof X!="symbol"),Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"?p.name=""+As(Ge):p.removeAttribute("name")}function jg(p,_,C,z,X,oe,Ce,Ge){if(oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(p.type=oe),_!=null||C!=null){if(!(oe!=="submit"&&oe!=="reset"||_!=null))return;C=C!=null?""+As(C):"",_=_!=null?""+As(_):C,Ge||_===p.value||(p.value=_),p.defaultValue=_}z=z??X,z=typeof z!="function"&&typeof z!="symbol"&&!!z,p.checked=Ge?p.checked:!!z,p.defaultChecked=!!z,Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"&&(p.name=Ce)}function ba(p,_,C){_==="number"&&Xc(p.ownerDocument)===p||p.defaultValue===""+C||(p.defaultValue=""+C)}function wa(p,_,C,z){if(p=p.options,_){_={};for(var X=0;X<C.length;X++)_["$"+C[X]]=!0;for(C=0;C<p.length;C++)X=_.hasOwnProperty("$"+p[C].value),p[C].selected!==X&&(p[C].selected=X),X&&z&&(p[C].defaultSelected=!0)}else{for(C=""+As(C),_=null,X=0;X<p.length;X++){if(p[X].value===C){p[X].selected=!0,z&&(p[X].defaultSelected=!0);return}_!==null||p[X].disabled||(_=p[X])}_!==null&&(_.selected=!0)}}function Zc(p,_,C){if(_!=null&&(_=""+As(_),_!==p.value&&(p.value=_),C==null)){p.defaultValue!==_&&(p.defaultValue=_);return}p.defaultValue=C!=null?""+As(C):""}function jl(p,_,C,z){if(_==null){if(z!=null){if(C!=null)throw Error(r(92));if(He(z)){if(1<z.length)throw Error(r(93));z=z[0]}C=z}C==null&&(C=""),_=C}C=As(_),p.defaultValue=C,z=p.textContent,z===C&&z!==""&&z!==null&&(p.value=z)}function el(p,_){if(_){var C=p.firstChild;if(C&&C===p.lastChild&&C.nodeType===3){C.nodeValue=_;return}}p.textContent=_}var Vl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ff(p,_,C){var z=_.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?z?p.setProperty(_,""):_==="float"?p.cssFloat="":p[_]="":z?p.setProperty(_,C):typeof C!="number"||C===0||Vl.has(_)?_==="float"?p.cssFloat=C:p[_]=(""+C).trim():p[_]=C+"px"}function Vg(p,_,C){if(_!=null&&typeof _!="object")throw Error(r(62));if(p=p.style,C!=null){for(var z in C)!C.hasOwnProperty(z)||_!=null&&_.hasOwnProperty(z)||(z.indexOf("--")===0?p.setProperty(z,""):z==="float"?p.cssFloat="":p[z]="");for(var X in _)z=_[X],_.hasOwnProperty(X)&&C[X]!==z&&Ff(p,X,z)}else for(var oe in _)_.hasOwnProperty(oe)&&Ff(p,oe,_[oe])}function wc(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dd(p){return wv.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var Gs=null;function Bf(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var wu=null,Sc=null;function Sv(p){var _=ln(p);if(_&&(p=_.stateNode)){var C=p[ke]||null;e:switch(p=_.stateNode,_.type){case"input":if(wl(p,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),_=C.name,C.type==="radio"&&_!=null){for(C=p;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+Ja(""+_)+'"][type="radio"]'),_=0;_<C.length;_++){var z=C[_];if(z!==p&&z.form===p.form){var X=z[ke]||null;if(!X)throw Error(r(90));wl(z,X.value,X.defaultValue,X.defaultValue,X.checked,X.defaultChecked,X.type,X.name)}}for(_=0;_<C.length;_++)z=C[_],z.form===p.form&&zf(z)}break e;case"textarea":Zc(p,C.value,C.defaultValue);break e;case"select":_=C.value,_!=null&&wa(p,!!C.multiple,_,!1)}}}var Nf=!1;function cm(p,_,C){if(Nf)return p(_,C);Nf=!0;try{var z=p(_);return z}finally{if(Nf=!1,(wu!==null||Sc!==null)&&(qu(),wu&&(_=wu,p=Sc,Sc=wu=null,Sv(_),p)))for(_=0;_<p.length;_++)Sv(p[_])}}function si(p,_){var C=p.stateNode;if(C===null)return null;var z=C[ke]||null;if(z===null)return null;C=z[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(p=p.type,z=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!z;break e;default:p=!1}if(p)return null;if(C&&typeof C!="function")throw Error(r(231,_,typeof C));return C}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hd=!1;if(tl)try{var um={};Object.defineProperty(um,"passive",{get:function(){hd=!0}}),window.addEventListener("test",um,um),window.removeEventListener("test",um,um)}catch{hd=!1}var Su=null,Tu=null,Tc=null;function bh(){if(Tc)return Tc;var p,_=Tu,C=_.length,z,X="value"in Su?Su.value:Su.textContent,oe=X.length;for(p=0;p<C&&_[p]===X[p];p++);var Ce=C-p;for(z=1;z<=Ce&&_[C-z]===X[oe-z];z++);return Tc=X.slice(p,1<z?1-z:void 0)}function dm(p){var _=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&_===13&&(p=13)):p=_,p===10&&(p=13),32<=p||p===13?p:0}function jf(){return!0}function fd(){return!1}function Ws(p){function _(C,z,X,oe,Ce){this._reactName=C,this._targetInst=X,this.type=z,this.nativeEvent=oe,this.target=Ce,this.currentTarget=null;for(var Ge in p)p.hasOwnProperty(Ge)&&(C=p[Ge],this[Ge]=C?C(oe):oe[Ge]);return this.isDefaultPrevented=(oe.defaultPrevented!=null?oe.defaultPrevented:oe.returnValue===!1)?jf:fd,this.isPropagationStopped=fd,this}return T(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=jf)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=jf)},persist:function(){},isPersistent:jf}),_}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=Ws(Ul),Sh=T({},Ul,{view:0,detail:0}),nl=Ws(Sh),Kc,hm,Th,Eh=T({},Sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Th&&(Th&&p.type==="mousemove"?(Kc=p.screenX-Th.screenX,hm=p.screenY-Th.screenY):hm=Kc=0,Th=p),Kc)},movementY:function(p){return"movementY"in p?p.movementY:hm}}),pd=Ws(Eh),rl=T({},Eh,{dataTransfer:0}),Tv=Ws(rl),Ug=T({},Sh,{relatedTarget:0}),Ch=Ws(Ug),_i=T({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),X0=Ws(_i),ar=T({},Ul,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Z0=Ws(ar),$g=T({},Ul,{data:0}),fm=Ws($g),pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$l={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function md(p){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(p):(p=Ah[p])?!!_[p]:!1}function Jn(){return md}var Bi=T({},Sh,{key:function(p){if(p.key){var _=pm[p.key]||p.key;if(_!=="Unidentified")return _}return p.type==="keypress"?(p=dm(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?$l[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(p){return p.type==="keypress"?dm(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?dm(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Ai=Ws(Bi),Fa=T({},Eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eu=Ws(Fa),Ci=T({},Sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn}),Mh=Ws(Ci),mm=T({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),gm=Ws(mm),Sa=T({},Eh,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Jo=Ws(Sa),D1=T({},Ul,{newState:0,oldState:0}),ym=Ws(D1),Ev=[9,13,27,32],gd=tl&&"CompositionEvent"in window,ql=null;tl&&"documentMode"in document&&(ql=document.documentMode);var qg=tl&&"TextEvent"in window&&!ql,sa=tl&&(!gd||ql&&8<ql&&11>=ql),Hl=" ",Ta=!1;function Cv(p,_){switch(p){case"keyup":return Ev.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rh(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Lo=!1;function Ea(p,_){switch(p){case"compositionend":return Rh(_);case"keypress":return _.which!==32?null:(Ta=!0,Hl);case"textInput":return p=_.data,p===Hl&&Ta?null:p;default:return null}}function Nr(p,_){if(Lo)return p==="compositionend"||!gd&&Cv(p,_)?(p=bh(),Tc=Tu=Su=null,Lo=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return sa&&_.locale!=="ko"?null:_.data;default:return null}}var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(p){var _=p&&p.nodeName&&p.nodeName.toLowerCase();return _==="input"?!!Bn[p.type]:_==="textarea"}function yr(p,_,C,z){wu?Sc?Sc.push(z):Sc=[z]:wu=z,_=yx(_,"onChange"),0<_.length&&(C=new wh("onChange","change",null,C,z),p.push({event:C,listeners:_}))}var Ec=null,Qc=null;function xr(p){LE(p,0)}function vm(p){var _=xn(p);if(zf(_))return p}function Gl(p,_){if(p==="change")return _}var Av=!1;if(tl){var Uf;if(tl){var ks="oninput"in document;if(!ks){var aa=document.createElement("div");aa.setAttribute("oninput","return;"),ks=typeof aa.oninput=="function"}Uf=ks}else Uf=!1;Av=Uf&&(!document.documentMode||9<document.documentMode)}function Dh(){Ec&&(Ec.detachEvent("onpropertychange",Cu),Qc=Ec=null)}function Cu(p){if(p.propertyName==="value"&&vm(Qc)){var _=[];yr(_,Qc,p,Bf(p)),cm(xr,_)}}function Ph(p,_,C){p==="focusin"?(Dh(),Ec=_,Qc=C,Ec.attachEvent("onpropertychange",Cu)):p==="focusout"&&Dh()}function Ih(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return vm(Qc)}function Ca(p,_){if(p==="click")return vm(_)}function _m(p,_){if(p==="input"||p==="change")return vm(_)}function xm(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var Sl=typeof Object.is=="function"?Object.is:xm;function Tl(p,_){if(Sl(p,_))return!0;if(typeof p!="object"||p===null||typeof _!="object"||_===null)return!1;var C=Object.keys(p),z=Object.keys(_);if(C.length!==z.length)return!1;for(z=0;z<C.length;z++){var X=C[z];if(!fn.call(_,X)||!Sl(p[X],_[X]))return!1}return!0}function Hg(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Cc(p,_){var C=Hg(p);p=0;for(var z;C;){if(C.nodeType===3){if(z=p+C.textContent.length,p<=_&&z>=_)return{node:C,offset:_-p};p=z}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Hg(C)}}function Gg(p,_){return p&&_?p===_?!0:p&&p.nodeType===3?!1:_&&_.nodeType===3?Gg(p,_.parentNode):"contains"in p?p.contains(_):p.compareDocumentPosition?!!(p.compareDocumentPosition(_)&16):!1:!1}function Au(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var _=Xc(p.document);_ instanceof p.HTMLIFrameElement;){try{var C=typeof _.contentWindow.location.href=="string"}catch{C=!1}if(C)p=_.contentWindow;else break;_=Xc(p.document)}return _}function Mv(p){var _=p&&p.nodeName&&p.nodeName.toLowerCase();return _&&(_==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||_==="textarea"||p.contentEditable==="true")}var P1=tl&&"documentMode"in document&&11>=document.documentMode,kh=null,Wg=null,bm=null,$f=!1;function Rv(p,_,C){var z=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;$f||kh==null||kh!==Xc(z)||(z=kh,"selectionStart"in z&&Mv(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),bm&&Tl(bm,z)||(bm=z,z=yx(Wg,"onSelect"),0<z.length&&(_=new wh("onSelect","select",null,_,C),p.push({event:_,listeners:z}),_.target=kh)))}function il(p,_){var C={};return C[p.toLowerCase()]=_.toLowerCase(),C["Webkit"+p]="webkit"+_,C["Moz"+p]="moz"+_,C}var Oh={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionrun:il("Transition","TransitionRun"),transitionstart:il("Transition","TransitionStart"),transitioncancel:il("Transition","TransitionCancel"),transitionend:il("Transition","TransitionEnd")},Yg={},Jc={};tl&&(Jc=document.createElement("div").style,"AnimationEvent"in window||(delete Oh.animationend.animation,delete Oh.animationiteration.animation,delete Oh.animationstart.animation),"TransitionEvent"in window||delete Oh.transitionend.transition);function Ac(p){if(Yg[p])return Yg[p];if(!Oh[p])return p;var _=Oh[p],C;for(C in _)if(_.hasOwnProperty(C)&&C in Jc)return Yg[p]=_[C];return p}var Xg=Ac("animationend"),El=Ac("animationiteration"),Lh=Ac("animationstart"),qf=Ac("transitionrun"),Dv=Ac("transitionstart"),Zg=Ac("transitioncancel"),ol=Ac("transitionend"),wm=new Map,vn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vn.push("scrollEnd");function Cl(p,_){wm.set(p,_),bi(_,[p])}var Sm=new WeakMap;function Ba(p,_){if(typeof p=="object"&&p!==null){var C=Sm.get(p);return C!==void 0?C:(_={value:p,source:_,stack:Qa(_)},Sm.set(p,_),_)}return{value:p,source:_,stack:Qa(_)}}var sl=[],Wl=0,al=0;function Mu(){for(var p=Wl,_=al=Wl=0;_<p;){var C=sl[_];sl[_++]=null;var z=sl[_];sl[_++]=null;var X=sl[_];sl[_++]=null;var oe=sl[_];if(sl[_++]=null,z!==null&&X!==null){var Ce=z.pending;Ce===null?X.next=X:(X.next=Ce.next,Ce.next=X),z.pending=X}oe!==0&&Fh(C,X,oe)}}function Mc(p,_,C,z){sl[Wl++]=p,sl[Wl++]=_,sl[Wl++]=C,sl[Wl++]=z,al|=z,p.lanes|=z,p=p.alternate,p!==null&&(p.lanes|=z)}function zh(p,_,C,z){return Mc(p,_,C,z),Qr(p)}function Yl(p,_){return Mc(p,null,null,_),Qr(p)}function Fh(p,_,C){p.lanes|=C;var z=p.alternate;z!==null&&(z.lanes|=C);for(var X=!1,oe=p.return;oe!==null;)oe.childLanes|=C,z=oe.alternate,z!==null&&(z.childLanes|=C),oe.tag===22&&(p=oe.stateNode,p===null||p._visibility&1||(X=!0)),p=oe,oe=oe.return;return p.tag===3?(oe=p.stateNode,X&&_!==null&&(X=31-Xn(C),p=oe.hiddenUpdates,z=p[X],z===null?p[X]=[_]:z.push(_),_.lane=C|536870912),oe):null}function Qr(p){if(50<pl)throw pl=0,Pl=null,Error(r(185));for(var _=p.return;_!==null;)p=_,_=p.return;return p.tag===3?p.stateNode:null}var yd={};function I1(p,_,C,z){this.tag=p,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ll(p,_,C,z){return new I1(p,_,C,z)}function Tm(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Rc(p,_){var C=p.alternate;return C===null?(C=ll(p.tag,_,p.key,p.mode),C.elementType=p.elementType,C.type=p.type,C.stateNode=p.stateNode,C.alternate=p,p.alternate=C):(C.pendingProps=_,C.type=p.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=p.flags&65011712,C.childLanes=p.childLanes,C.lanes=p.lanes,C.child=p.child,C.memoizedProps=p.memoizedProps,C.memoizedState=p.memoizedState,C.updateQueue=p.updateQueue,_=p.dependencies,C.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},C.sibling=p.sibling,C.index=p.index,C.ref=p.ref,C.refCleanup=p.refCleanup,C}function go(p,_){p.flags&=65011714;var C=p.alternate;return C===null?(p.childLanes=0,p.lanes=_,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=C.childLanes,p.lanes=C.lanes,p.child=C.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=C.memoizedProps,p.memoizedState=C.memoizedState,p.updateQueue=C.updateQueue,p.type=C.type,_=C.dependencies,p.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),p}function Kg(p,_,C,z,X,oe){var Ce=0;if(z=p,typeof p=="function")Tm(p)&&(Ce=1);else if(typeof p=="string")Ce=gP(p,C,$t.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case _e:return p=ll(31,C,_,X),p.elementType=_e,p.lanes=oe,p;case I:return Bh(C.children,X,oe,_);case F:Ce=8,X|=24;break;case j:return p=ll(12,C,_,X|2),p.elementType=j,p.lanes=oe,p;case ee:return p=ll(13,C,_,X),p.elementType=ee,p.lanes=oe,p;case se:return p=ll(19,C,_,X),p.elementType=se,p.lanes=oe,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case V:case Z:Ce=10;break e;case W:Ce=9;break e;case K:Ce=11;break e;case he:Ce=14;break e;case ye:Ce=16,z=null;break e}Ce=29,C=Error(r(130,p===null?"null":typeof p,"")),z=null}return _=ll(Ce,C,_,X),_.elementType=p,_.type=z,_.lanes=oe,_}function Bh(p,_,C,z){return p=ll(7,p,z,_),p.lanes=C,p}function Pv(p,_,C){return p=ll(6,p,null,_),p.lanes=C,p}function Qg(p,_,C){return _=ll(4,p.children!==null?p.children:[],p.key,_),_.lanes=C,_.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},_}var Hf=[],Ru=0,Jg=null,Em=0,cl=[],Na=0,Du=null,ja=1,Dc="";function vd(p,_){Hf[Ru++]=Em,Hf[Ru++]=Jg,Jg=p,Em=_}function Nh(p,_,C){cl[Na++]=ja,cl[Na++]=Dc,cl[Na++]=Du,Du=p;var z=ja;p=Dc;var X=32-Xn(z)-1;z&=~(1<<X),C+=1;var oe=32-Xn(_)+X;if(30<oe){var Ce=X-X%5;oe=(z&(1<<Ce)-1).toString(32),z>>=Ce,X-=Ce,ja=1<<32-Xn(_)+X|C<<X|z,Dc=oe+p}else ja=1<<oe|C<<X|z,Dc=p}function jh(p){p.return!==null&&(vd(p,1),Nh(p,1,0))}function Gf(p){for(;p===Jg;)Jg=Hf[--Ru],Hf[Ru]=null,Em=Hf[--Ru],Hf[Ru]=null;for(;p===Du;)Du=cl[--Na],cl[Na]=null,Dc=cl[--Na],cl[Na]=null,ja=cl[--Na],cl[Na]=null}var Ys=null,zo=null,co=!1,Pu=null,Pc=!1,Cm=Error(r(519));function eu(p){var _=Error(r(418,""));throw Zf(Ba(_,p)),Cm}function Wf(p){var _=p.stateNode,C=p.type,z=p.memoizedProps;switch(_[xe]=p,_[ke]=z,C){case"dialog":oo("cancel",_),oo("close",_);break;case"iframe":case"object":case"embed":oo("load",_);break;case"video":case"audio":for(C=0;C<m_.length;C++)oo(m_[C],_);break;case"source":oo("error",_);break;case"img":case"image":case"link":oo("error",_),oo("load",_);break;case"details":oo("toggle",_);break;case"input":oo("invalid",_),jg(_,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),xh(_);break;case"select":oo("invalid",_);break;case"textarea":oo("invalid",_),jl(_,z.value,z.defaultValue,z.children),xh(_)}C=z.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||_.textContent===""+C||z.suppressHydrationWarning===!0||_y(_.textContent,C)?(z.popover!=null&&(oo("beforetoggle",_),oo("toggle",_)),z.onScroll!=null&&oo("scroll",_),z.onScrollEnd!=null&&oo("scrollend",_),z.onClick!=null&&(_.onclick=v_),_=!0):_=!1,_||eu(p)}function Iv(p){for(Ys=p.return;Ys;)switch(Ys.tag){case 5:case 13:Pc=!1;return;case 27:case 3:Pc=!0;return;default:Ys=Ys.return}}function Yf(p){if(p!==Ys)return!1;if(!co)return Iv(p),co=!0,!1;var _=p.tag,C;if((C=_!==3&&_!==27)&&((C=_===5)&&(C=p.type,C=!(C!=="form"&&C!=="button")||Sx(p.type,p.memoizedProps)),C=!C),C&&zo&&eu(p),Iv(p),_===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,_=0;p;){if(p.nodeType===8)if(C=p.data,C==="/$"){if(_===0){zo=Yu(p.nextSibling);break e}_--}else C!=="$"&&C!=="$!"&&C!=="$?"||_++;p=p.nextSibling}zo=null}}else _===27?(_=zo,df(p.type)?(p=Y1,Y1=null,zo=p):zo=_):zo=Ys?Yu(p.stateNode.nextSibling):null;return!0}function Xf(){zo=Ys=null,co=!1}function Vh(){var p=Pu;return p!==null&&(pi===null?pi=p:pi.push.apply(pi,p),Pu=null),p}function Zf(p){Pu===null?Pu=[p]:Pu.push(p)}var kv=Je(null),Iu=null,ku=null;function Ic(p,_,C){wt(kv,_._currentValue),_._currentValue=C}function kc(p){p._currentValue=kv.current,yt(kv)}function Am(p,_,C){for(;p!==null;){var z=p.alternate;if((p.childLanes&_)!==_?(p.childLanes|=_,z!==null&&(z.childLanes|=_)):z!==null&&(z.childLanes&_)!==_&&(z.childLanes|=_),p===C)break;p=p.return}}function Mm(p,_,C,z){var X=p.child;for(X!==null&&(X.return=p);X!==null;){var oe=X.dependencies;if(oe!==null){var Ce=X.child;oe=oe.firstContext;e:for(;oe!==null;){var Ge=oe;oe=X;for(var mt=0;mt<_.length;mt++)if(Ge.context===_[mt]){oe.lanes|=C,Ge=oe.alternate,Ge!==null&&(Ge.lanes|=C),Am(oe.return,C,p),z||(Ce=null);break e}oe=Ge.next}}else if(X.tag===18){if(Ce=X.return,Ce===null)throw Error(r(341));Ce.lanes|=C,oe=Ce.alternate,oe!==null&&(oe.lanes|=C),Am(Ce,C,p),Ce=null}else Ce=X.child;if(Ce!==null)Ce.return=X;else for(Ce=X;Ce!==null;){if(Ce===p){Ce=null;break}if(X=Ce.sibling,X!==null){X.return=Ce.return,Ce=X;break}Ce=Ce.return}X=Ce}}function Uh(p,_,C,z){p=null;for(var X=_,oe=!1;X!==null;){if(!oe){if((X.flags&524288)!==0)oe=!0;else if((X.flags&262144)!==0)break}if(X.tag===10){var Ce=X.alternate;if(Ce===null)throw Error(r(387));if(Ce=Ce.memoizedProps,Ce!==null){var Ge=X.type;Sl(X.pendingProps.value,Ce.value)||(p!==null?p.push(Ge):p=[Ge])}}else if(X===sn.current){if(Ce=X.alternate,Ce===null)throw Error(r(387));Ce.memoizedState.memoizedState!==X.memoizedState.memoizedState&&(p!==null?p.push(Ty):p=[Ty])}X=X.return}p!==null&&Mm(_,p,C,z),_.flags|=262144}function Kf(p){for(p=p.firstContext;p!==null;){if(!Sl(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Xl(p){Iu=p,ku=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function vs(p){return Ov(Iu,p)}function Ou(p,_){return Iu===null&&Xl(p),Ov(p,_)}function Ov(p,_){var C=_._currentValue;if(_={context:_,memoizedValue:C,next:null},ku===null){if(p===null)throw Error(r(308));ku=_,p.dependencies={lanes:0,firstContext:_},p.flags|=524288}else ku=ku.next=_;return C}var Va=typeof AbortController<"u"?AbortController:function(){var p=[],_=this.signal={aborted:!1,addEventListener:function(C,z){p.push(z)}};this.abort=function(){_.aborted=!0,p.forEach(function(C){return C()})}},Rm=e.unstable_scheduleCallback,ey=e.unstable_NormalPriority,ds={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new Va,data:new Map,refCount:0}}function _d(p){p.refCount--,p.refCount===0&&Rm(ey,function(){p.controller.abort()})}var $h=null,Jf=0,xd=0,Lu=null;function Dm(p,_){if($h===null){var C=$h=[];Jf=0,xd=U1(),Lu={status:"pending",value:void 0,then:function(z){C.push(z)}}}return Jf++,_.then(ep,ep),_}function ep(){if(--Jf===0&&$h!==null){Lu!==null&&(Lu.status="fulfilled");var p=$h;$h=null,xd=0,Lu=null;for(var _=0;_<p.length;_++)(0,p[_])()}}function K0(p,_){var C=[],z={status:"pending",value:null,reason:null,then:function(X){C.push(X)}};return p.then(function(){z.status="fulfilled",z.value=_;for(var X=0;X<C.length;X++)(0,C[X])(_)},function(X){for(z.status="rejected",z.reason=X,X=0;X<C.length;X++)(0,C[X])(void 0)}),z}var bd=Se.S;Se.S=function(p,_){typeof _=="object"&&_!==null&&typeof _.then=="function"&&Dm(p,_),bd!==null&&bd(p,_)};var qh=Je(null);function Lv(){var p=qh.current;return p!==null?p:Lr.pooledCache}function Pm(p,_){_===null?wt(qh,qh.current):wt(qh,_.pool)}function zv(){var p=Lv();return p===null?null:{parent:ds._currentValue,pool:p}}var Im=Error(r(460)),Q0=Error(r(474)),tp=Error(r(542)),Hh={then:function(){}};function Fv(p){return p=p.status,p==="fulfilled"||p==="rejected"}function tu(){}function Bv(p,_,C){switch(C=p[C],C===void 0?p.push(_):C!==_&&(_.then(tu,tu),_=C),_.status){case"fulfilled":return _.value;case"rejected":throw p=_.reason,km(p),p;default:if(typeof _.status=="string")_.then(tu,tu);else{if(p=Lr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=_,p.status="pending",p.then(function(z){if(_.status==="pending"){var X=_;X.status="fulfilled",X.value=z}},function(z){if(_.status==="pending"){var X=_;X.status="rejected",X.reason=z}})}switch(_.status){case"fulfilled":return _.value;case"rejected":throw p=_.reason,km(p),p}throw np=_,Im}}var np=null;function ty(){if(np===null)throw Error(r(459));var p=np;return np=null,p}function km(p){if(p===Im||p===tp)throw Error(r(483))}var Ua=!1;function ny(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $a(p,_){p=p.updateQueue,_.updateQueue===p&&(_.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function nu(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Oc(p,_,C){var z=p.updateQueue;if(z===null)return null;if(z=z.shared,(cr&2)!==0){var X=z.pending;return X===null?_.next=_:(_.next=X.next,X.next=_),z.pending=_,_=Qr(p),Fh(p,null,C),_}return Mc(p,z,_,C),Qr(p)}function rp(p,_,C){if(_=_.updateQueue,_!==null&&(_=_.shared,(C&4194048)!==0)){var z=_.lanes;z&=p.pendingLanes,C|=z,_.lanes=C,dn(p,C)}}function Om(p,_){var C=p.updateQueue,z=p.alternate;if(z!==null&&(z=z.updateQueue,C===z)){var X=null,oe=null;if(C=C.firstBaseUpdate,C!==null){do{var Ce={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};oe===null?X=oe=Ce:oe=oe.next=Ce,C=C.next}while(C!==null);oe===null?X=oe=_:oe=oe.next=_}else X=oe=_;C={baseState:z.baseState,firstBaseUpdate:X,lastBaseUpdate:oe,shared:z.shared,callbacks:z.callbacks},p.updateQueue=C;return}p=C.lastBaseUpdate,p===null?C.firstBaseUpdate=_:p.next=_,C.lastBaseUpdate=_}var ip=!1;function wd(){if(ip){var p=Lu;if(p!==null)throw p}}function op(p,_,C,z){ip=!1;var X=p.updateQueue;Ua=!1;var oe=X.firstBaseUpdate,Ce=X.lastBaseUpdate,Ge=X.shared.pending;if(Ge!==null){X.shared.pending=null;var mt=Ge,en=mt.next;mt.next=null,Ce===null?oe=en:Ce.next=en,Ce=mt;var Dn=p.alternate;Dn!==null&&(Dn=Dn.updateQueue,Ge=Dn.lastBaseUpdate,Ge!==Ce&&(Ge===null?Dn.firstBaseUpdate=en:Ge.next=en,Dn.lastBaseUpdate=mt))}if(oe!==null){var qn=X.baseState;Ce=0,Dn=en=mt=null,Ge=oe;do{var cn=Ge.lane&-536870913,hn=cn!==Ge.lane;if(hn?(sr&cn)===cn:(z&cn)===cn){cn!==0&&cn===xd&&(ip=!0),Dn!==null&&(Dn=Dn.next={lane:0,tag:Ge.tag,payload:Ge.payload,callback:null,next:null});e:{var Ei=p,gi=Ge;cn=_;var Ho=C;switch(gi.tag){case 1:if(Ei=gi.payload,typeof Ei=="function"){qn=Ei.call(Ho,qn,cn);break e}qn=Ei;break e;case 3:Ei.flags=Ei.flags&-65537|128;case 0:if(Ei=gi.payload,cn=typeof Ei=="function"?Ei.call(Ho,qn,cn):Ei,cn==null)break e;qn=T({},qn,cn);break e;case 2:Ua=!0}}cn=Ge.callback,cn!==null&&(p.flags|=64,hn&&(p.flags|=8192),hn=X.callbacks,hn===null?X.callbacks=[cn]:hn.push(cn))}else hn={lane:cn,tag:Ge.tag,payload:Ge.payload,callback:Ge.callback,next:null},Dn===null?(en=Dn=hn,mt=qn):Dn=Dn.next=hn,Ce|=cn;if(Ge=Ge.next,Ge===null){if(Ge=X.shared.pending,Ge===null)break;hn=Ge,Ge=hn.next,hn.next=null,X.lastBaseUpdate=hn,X.shared.pending=null}}while(!0);Dn===null&&(mt=qn),X.baseState=mt,X.firstBaseUpdate=en,X.lastBaseUpdate=Dn,oe===null&&(X.shared.lanes=0),Wi|=Ce,p.lanes=Ce,p.memoizedState=qn}}function Lm(p,_){if(typeof p!="function")throw Error(r(191,p));p.call(_)}function Sd(p,_){var C=p.callbacks;if(C!==null)for(p.callbacks=null,p=0;p<C.length;p++)Lm(C[p],_)}var Gh=Je(null),ry=Je(0);function ru(p,_){p=di,wt(ry,p),wt(Gh,_),di=p|_.baseLanes}function Nv(){wt(ry,di),wt(Gh,Gh.current)}function zm(){di=ry.current,yt(Gh),yt(ry)}var Lc=0,Mi=null,uo=null,Xo=null,Td=!1,iu=!1,ou=!1,sp=0,Ed=0,Cd=null,ap=0;function Zo(){throw Error(r(321))}function In(p,_){if(_===null)return!1;for(var C=0;C<_.length&&C<p.length;C++)if(!Sl(p[C],_[C]))return!1;return!0}function Wh(p,_,C,z,X,oe){return Lc=oe,Mi=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Se.H=p===null||p.memoizedState===null?tf:dy,ou=!1,oe=C(z,X),ou=!1,iu&&(oe=zu(_,C,z,X)),Ad(p),oe}function Ad(p){Se.H=ef;var _=uo!==null&&uo.next!==null;if(Lc=0,Xo=uo=Mi=null,Td=!1,Ed=0,Cd=null,_)throw Error(r(300));p===null||Ms||(p=p.dependencies,p!==null&&Kf(p)&&(Ms=!0))}function zu(p,_,C,z){Mi=p;var X=0;do{if(iu&&(Cd=null),Ed=0,iu=!1,25<=X)throw Error(r(301));if(X+=1,Xo=uo=null,p.updateQueue!=null){var oe=p.updateQueue;oe.lastEffect=null,oe.events=null,oe.stores=null,oe.memoCache!=null&&(oe.memoCache.index=0)}Se.H=Zv,oe=_(C,z)}while(iu);return oe}function Md(){var p=Se.H,_=p.useState()[0];return _=typeof _.then=="function"?Bm(_):_,p=p.useState()[0],(uo!==null?uo.memoizedState:null)!==p&&(Mi.flags|=1024),_}function lr(){var p=sp!==0;return sp=0,p}function Fm(p,_,C){_.updateQueue=p.updateQueue,_.flags&=-2053,p.lanes&=~C}function jv(p){if(Td){for(p=p.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}Td=!1}Lc=0,Xo=uo=Mi=null,iu=!1,Ed=sp=0,Cd=null}function qa(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xo===null?Mi.memoizedState=Xo=p:Xo=Xo.next=p,Xo}function es(){if(uo===null){var p=Mi.alternate;p=p!==null?p.memoizedState:null}else p=uo.next;var _=Xo===null?Mi.memoizedState:Xo.next;if(_!==null)Xo=_,uo=p;else{if(p===null)throw Mi.alternate===null?Error(r(467)):Error(r(310));uo=p,p={memoizedState:uo.memoizedState,baseState:uo.baseState,baseQueue:uo.baseQueue,queue:uo.queue,next:null},Xo===null?Mi.memoizedState=Xo=p:Xo=Xo.next=p}return Xo}function iy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bm(p){var _=Ed;return Ed+=1,Cd===null&&(Cd=[]),p=Bv(Cd,p,_),_=Mi,(Xo===null?_.memoizedState:Xo.next)===null&&(_=_.alternate,Se.H=_===null||_.memoizedState===null?tf:dy),p}function Nm(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Bm(p);if(p.$$typeof===Z)return vs(p)}throw Error(r(438,String(p)))}function Vv(p){var _=null,C=Mi.updateQueue;if(C!==null&&(_=C.memoCache),_==null){var z=Mi.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(_={data:z.data.map(function(X){return X.slice()}),index:0})))}if(_==null&&(_={data:[],index:0}),C===null&&(C=iy(),Mi.updateQueue=C),C.memoCache=_,C=_.data[_.index],C===void 0)for(C=_.data[_.index]=Array(p),z=0;z<p;z++)C[z]=ae;return _.index++,C}function Fu(p,_){return typeof _=="function"?_(p):_}function lp(p){var _=es();return jm(_,uo,p)}function jm(p,_,C){var z=p.queue;if(z===null)throw Error(r(311));z.lastRenderedReducer=C;var X=p.baseQueue,oe=z.pending;if(oe!==null){if(X!==null){var Ce=X.next;X.next=oe.next,oe.next=Ce}_.baseQueue=X=oe,z.pending=null}if(oe=p.baseState,X===null)p.memoizedState=oe;else{_=X.next;var Ge=Ce=null,mt=null,en=_,Dn=!1;do{var qn=en.lane&-536870913;if(qn!==en.lane?(sr&qn)===qn:(Lc&qn)===qn){var cn=en.revertLane;if(cn===0)mt!==null&&(mt=mt.next={lane:0,revertLane:0,action:en.action,hasEagerState:en.hasEagerState,eagerState:en.eagerState,next:null}),qn===xd&&(Dn=!0);else if((Lc&cn)===cn){en=en.next,cn===xd&&(Dn=!0);continue}else qn={lane:0,revertLane:en.revertLane,action:en.action,hasEagerState:en.hasEagerState,eagerState:en.eagerState,next:null},mt===null?(Ge=mt=qn,Ce=oe):mt=mt.next=qn,Mi.lanes|=cn,Wi|=cn;qn=en.action,ou&&C(oe,qn),oe=en.hasEagerState?en.eagerState:C(oe,qn)}else cn={lane:qn,revertLane:en.revertLane,action:en.action,hasEagerState:en.hasEagerState,eagerState:en.eagerState,next:null},mt===null?(Ge=mt=cn,Ce=oe):mt=mt.next=cn,Mi.lanes|=qn,Wi|=qn;en=en.next}while(en!==null&&en!==_);if(mt===null?Ce=oe:mt.next=Ge,!Sl(oe,p.memoizedState)&&(Ms=!0,Dn&&(C=Lu,C!==null)))throw C;p.memoizedState=oe,p.baseState=Ce,p.baseQueue=mt,z.lastRenderedState=oe}return X===null&&(z.lanes=0),[p.memoizedState,z.dispatch]}function Vm(p){var _=es(),C=_.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=p;var z=C.dispatch,X=C.pending,oe=_.memoizedState;if(X!==null){C.pending=null;var Ce=X=X.next;do oe=p(oe,Ce.action),Ce=Ce.next;while(Ce!==X);Sl(oe,_.memoizedState)||(Ms=!0),_.memoizedState=oe,_.baseQueue===null&&(_.baseState=oe),C.lastRenderedState=oe}return[oe,z]}function oy(p,_,C){var z=Mi,X=es(),oe=co;if(oe){if(C===void 0)throw Error(r(407));C=C()}else C=_();var Ce=!Sl((uo||X).memoizedState,C);Ce&&(X.memoizedState=C,Ms=!0),X=X.queue;var Ge=Rd.bind(null,z,X,p);if(Id(2048,8,Ge,[p]),X.getSnapshot!==_||Ce||Xo!==null&&Xo.memoizedState.tag&1){if(z.flags|=2048,Kl(9,yo(),Bu.bind(null,z,X,C,_),null),Lr===null)throw Error(r(349));oe||(Lc&124)!==0||Ha(z,_,C)}return C}function Ha(p,_,C){p.flags|=16384,p={getSnapshot:_,value:C},_=Mi.updateQueue,_===null?(_=iy(),Mi.updateQueue=_,_.stores=[p]):(C=_.stores,C===null?_.stores=[p]:C.push(p))}function Bu(p,_,C,z){_.value=C,_.getSnapshot=z,Um(_)&&$m(p)}function Rd(p,_,C){return C(function(){Um(_)&&$m(p)})}function Um(p){var _=p.getSnapshot;p=p.value;try{var C=_();return!Sl(p,C)}catch{return!0}}function $m(p){var _=Yl(p,2);_!==null&&Pa(_,p,2)}function Dd(p){var _=qa();if(typeof p=="function"){var C=p;if(p=C(),ou){mr(!0);try{C()}finally{mr(!1)}}}return _.memoizedState=_.baseState=p,_.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:p},_}function Uv(p,_,C,z){return p.baseState=C,jm(p,uo,typeof z=="function"?z:Fu)}function Zl(p,_,C,z,X){if(Qh(p))throw Error(r(485));if(p=_.action,p!==null){var oe={payload:X,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ce){oe.listeners.push(Ce)}};Se.T!==null?C(!0):oe.isTransition=!1,z(oe),C=_.pending,C===null?(oe.next=_.pending=oe,Ii(_,oe)):(oe.next=C.next,_.pending=C.next=oe)}}function Ii(p,_){var C=_.action,z=_.payload,X=p.state;if(_.isTransition){var oe=Se.T,Ce={};Se.T=Ce;try{var Ge=C(X,z),mt=Se.S;mt!==null&&mt(Ce,Ge),cp(p,_,Ge)}catch(en){sy(p,_,en)}finally{Se.T=oe}}else try{oe=C(X,z),cp(p,_,oe)}catch(en){sy(p,_,en)}}function cp(p,_,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(z){Nu(p,_,z)},function(z){return sy(p,_,z)}):Nu(p,_,C)}function Nu(p,_,C){_.status="fulfilled",_.value=C,$v(_),p.state=C,_=p.pending,_!==null&&(C=_.next,C===_?p.pending=null:(C=C.next,_.next=C,Ii(p,C)))}function sy(p,_,C){var z=p.pending;if(p.pending=null,z!==null){z=z.next;do _.status="rejected",_.reason=C,$v(_),_=_.next;while(_!==z)}p.action=null}function $v(p){p=p.listeners;for(var _=0;_<p.length;_++)(0,p[_])()}function qv(p,_){return _}function J0(p,_){if(co){var C=Lr.formState;if(C!==null){e:{var z=Mi;if(co){if(zo){t:{for(var X=zo,oe=Pc;X.nodeType!==8;){if(!oe){X=null;break t}if(X=Yu(X.nextSibling),X===null){X=null;break t}}oe=X.data,X=oe==="F!"||oe==="F"?X:null}if(X){zo=Yu(X.nextSibling),z=X.data==="F!";break e}}eu(z)}z=!1}z&&(_=C[0])}}return C=qa(),C.memoizedState=C.baseState=_,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qv,lastRenderedState:_},C.queue=z,C=ui.bind(null,Mi,z),z.dispatch=C,z=Dd(!1),oe=zc.bind(null,Mi,!1,z.queue),z=qa(),X={state:_,dispatch:null,action:p,pending:null},z.queue=X,C=Zl.bind(null,Mi,X,oe,C),X.dispatch=C,z.memoizedState=p,[_,C,!1]}function Yh(p){var _=es();return Pd(_,uo,p)}function Pd(p,_,C){if(_=jm(p,_,qv)[0],p=lp(Fu)[0],typeof _=="object"&&_!==null&&typeof _.then=="function")try{var z=Bm(_)}catch(Ce){throw Ce===Im?tp:Ce}else z=_;_=es();var X=_.queue,oe=X.dispatch;return C!==_.memoizedState&&(Mi.flags|=2048,Kl(9,yo(),pn.bind(null,X,C),null)),[z,oe,p]}function pn(p,_){p.action=_}function Pn(p){var _=es(),C=uo;if(C!==null)return Pd(_,C,p);es(),_=_.memoizedState,C=es();var z=C.queue.dispatch;return C.memoizedState=p,[_,z,!1]}function Kl(p,_,C,z){return p={tag:p,create:C,deps:z,inst:_,next:null},_=Mi.updateQueue,_===null&&(_=iy(),Mi.updateQueue=_),C=_.lastEffect,C===null?_.lastEffect=p.next=p:(z=C.next,C.next=p,p.next=z,_.lastEffect=p),p}function yo(){return{destroy:void 0,resource:void 0}}function pt(){return es().memoizedState}function ul(p,_,C,z){var X=qa();z=z===void 0?null:z,Mi.flags|=p,X.memoizedState=Kl(1|_,yo(),C,z)}function Id(p,_,C,z){var X=es();z=z===void 0?null:z;var oe=X.memoizedState.inst;uo!==null&&z!==null&&In(z,uo.memoizedState.deps)?X.memoizedState=Kl(_,oe,C,z):(Mi.flags|=p,X.memoizedState=Kl(1|_,oe,C,z))}function qm(p,_){ul(8390656,8,p,_)}function ay(p,_){Id(2048,8,p,_)}function Hv(p,_){return Id(4,2,p,_)}function Gv(p,_){return Id(4,4,p,_)}function Xh(p,_){if(typeof _=="function"){p=p();var C=_(p);return function(){typeof C=="function"?C():_(null)}}if(_!=null)return p=p(),_.current=p,function(){_.current=null}}function ex(p,_,C){C=C!=null?C.concat([p]):null,Id(4,4,Xh.bind(null,_,p),C)}function Wv(){}function Yv(p,_){var C=es();_=_===void 0?null:_;var z=C.memoizedState;return _!==null&&In(_,z[1])?z[0]:(C.memoizedState=[p,_],p)}function Hm(p,_){var C=es();_=_===void 0?null:_;var z=C.memoizedState;if(_!==null&&In(_,z[1]))return z[0];if(z=p(),ou){mr(!0);try{p()}finally{mr(!1)}}return C.memoizedState=[z,_],z}function Gm(p,_,C){return C===void 0||(Lc&1073741824)!==0?p.memoizedState=_:(p.memoizedState=C,p=Ud(),Mi.lanes|=p,Wi|=p,C)}function ly(p,_,C,z){return Sl(C,_)?C:Gh.current!==null?(p=Gm(p,C,z),Sl(p,_)||(Ms=!0),p):(Lc&42)===0?(Ms=!0,p.memoizedState=C):(p=Ud(),Mi.lanes|=p,Wi|=p,_)}function Xv(p,_,C,z,X){var oe=qe.p;qe.p=oe!==0&&8>oe?oe:8;var Ce=Se.T,Ge={};Se.T=Ge,zc(p,!1,_,C);try{var mt=X(),en=Se.S;if(en!==null&&en(Ge,mt),mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var Dn=K0(mt,z);Kh(p,_,Dn,Ks(p))}else Kh(p,_,z,Ks(p))}catch(qn){Kh(p,_,{then:function(){},status:"rejected",reason:qn},Ks())}finally{qe.p=oe,Se.T=Ce}}function cy(){}function Zh(p,_,C,z){if(p.tag!==5)throw Error(r(476));var X=kd(p).queue;Xv(p,X,_,it,C===null?cy:function(){return uy(p),C(z)})}function kd(p){var _=p.memoizedState;if(_!==null)return _;_={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:it},next:null};var C={};return _.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:C},next:null},p.memoizedState=_,p=p.alternate,p!==null&&(p.memoizedState=_),_}function uy(p){var _=kd(p).next.queue;Kh(p,_,{},Ks())}function su(){return vs(Ty)}function la(){return es().memoizedState}function tx(){return es().memoizedState}function Wm(p){for(var _=p.return;_!==null;){switch(_.tag){case 24:case 3:var C=Ks();p=nu(C);var z=Oc(_,p,C);z!==null&&(Pa(z,_,C),rp(z,_,C)),_={cache:Qf()},p.payload=_;return}_=_.return}}function io(p,_,C){var z=Ks();C={lane:z,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null},Qh(p)?Od(_,C):(C=zh(p,_,C,z),C!==null&&(Pa(C,p,z),Jh(C,_,z)))}function ui(p,_,C){var z=Ks();Kh(p,_,C,z)}function Kh(p,_,C,z){var X={lane:z,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null};if(Qh(p))Od(_,X);else{var oe=p.alternate;if(p.lanes===0&&(oe===null||oe.lanes===0)&&(oe=_.lastRenderedReducer,oe!==null))try{var Ce=_.lastRenderedState,Ge=oe(Ce,C);if(X.hasEagerState=!0,X.eagerState=Ge,Sl(Ge,Ce))return Mc(p,_,X,0),Lr===null&&Mu(),!1}catch{}finally{}if(C=zh(p,_,X,z),C!==null)return Pa(C,p,z),Jh(C,_,z),!0}return!1}function zc(p,_,C,z){if(z={lane:2,revertLane:U1(),action:z,hasEagerState:!1,eagerState:null,next:null},Qh(p)){if(_)throw Error(r(479))}else _=zh(p,C,z,2),_!==null&&Pa(_,p,2)}function Qh(p){var _=p.alternate;return p===Mi||_!==null&&_===Mi}function Od(p,_){iu=Td=!0;var C=p.pending;C===null?_.next=_:(_.next=C.next,C.next=_),p.pending=_}function Jh(p,_,C){if((C&4194048)!==0){var z=_.lanes;z&=p.pendingLanes,C|=z,_.lanes=C,dn(p,C)}}var ef={readContext:vs,use:Nm,useCallback:Zo,useContext:Zo,useEffect:Zo,useImperativeHandle:Zo,useLayoutEffect:Zo,useInsertionEffect:Zo,useMemo:Zo,useReducer:Zo,useRef:Zo,useState:Zo,useDebugValue:Zo,useDeferredValue:Zo,useTransition:Zo,useSyncExternalStore:Zo,useId:Zo,useHostTransitionStatus:Zo,useFormState:Zo,useActionState:Zo,useOptimistic:Zo,useMemoCache:Zo,useCacheRefresh:Zo},tf={readContext:vs,use:Nm,useCallback:function(p,_){return qa().memoizedState=[p,_===void 0?null:_],p},useContext:vs,useEffect:qm,useImperativeHandle:function(p,_,C){C=C!=null?C.concat([p]):null,ul(4194308,4,Xh.bind(null,_,p),C)},useLayoutEffect:function(p,_){return ul(4194308,4,p,_)},useInsertionEffect:function(p,_){ul(4,2,p,_)},useMemo:function(p,_){var C=qa();_=_===void 0?null:_;var z=p();if(ou){mr(!0);try{p()}finally{mr(!1)}}return C.memoizedState=[z,_],z},useReducer:function(p,_,C){var z=qa();if(C!==void 0){var X=C(_);if(ou){mr(!0);try{C(_)}finally{mr(!1)}}}else X=_;return z.memoizedState=z.baseState=X,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:X},z.queue=p,p=p.dispatch=io.bind(null,Mi,p),[z.memoizedState,p]},useRef:function(p){var _=qa();return p={current:p},_.memoizedState=p},useState:function(p){p=Dd(p);var _=p.queue,C=ui.bind(null,Mi,_);return _.dispatch=C,[p.memoizedState,C]},useDebugValue:Wv,useDeferredValue:function(p,_){var C=qa();return Gm(C,p,_)},useTransition:function(){var p=Dd(!1);return p=Xv.bind(null,Mi,p.queue,!0,!1),qa().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,_,C){var z=Mi,X=qa();if(co){if(C===void 0)throw Error(r(407));C=C()}else{if(C=_(),Lr===null)throw Error(r(349));(sr&124)!==0||Ha(z,_,C)}X.memoizedState=C;var oe={value:C,getSnapshot:_};return X.queue=oe,qm(Rd.bind(null,z,oe,p),[p]),z.flags|=2048,Kl(9,yo(),Bu.bind(null,z,oe,C,_),null),C},useId:function(){var p=qa(),_=Lr.identifierPrefix;if(co){var C=Dc,z=ja;C=(z&~(1<<32-Xn(z)-1)).toString(32)+C,_=""+_+"R"+C,C=sp++,0<C&&(_+="H"+C.toString(32)),_+=""}else C=ap++,_=""+_+"r"+C.toString(32)+"";return p.memoizedState=_},useHostTransitionStatus:su,useFormState:J0,useActionState:J0,useOptimistic:function(p){var _=qa();_.memoizedState=_.baseState=p;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return _.queue=C,_=zc.bind(null,Mi,!0,C),C.dispatch=_,[p,_]},useMemoCache:Vv,useCacheRefresh:function(){return qa().memoizedState=Wm.bind(null,Mi)}},dy={readContext:vs,use:Nm,useCallback:Yv,useContext:vs,useEffect:ay,useImperativeHandle:ex,useInsertionEffect:Hv,useLayoutEffect:Gv,useMemo:Hm,useReducer:lp,useRef:pt,useState:function(){return lp(Fu)},useDebugValue:Wv,useDeferredValue:function(p,_){var C=es();return ly(C,uo.memoizedState,p,_)},useTransition:function(){var p=lp(Fu)[0],_=es().memoizedState;return[typeof p=="boolean"?p:Bm(p),_]},useSyncExternalStore:oy,useId:la,useHostTransitionStatus:su,useFormState:Yh,useActionState:Yh,useOptimistic:function(p,_){var C=es();return Uv(C,uo,p,_)},useMemoCache:Vv,useCacheRefresh:tx},Zv={readContext:vs,use:Nm,useCallback:Yv,useContext:vs,useEffect:ay,useImperativeHandle:ex,useInsertionEffect:Hv,useLayoutEffect:Gv,useMemo:Hm,useReducer:Vm,useRef:pt,useState:function(){return Vm(Fu)},useDebugValue:Wv,useDeferredValue:function(p,_){var C=es();return uo===null?Gm(C,p,_):ly(C,uo.memoizedState,p,_)},useTransition:function(){var p=Vm(Fu)[0],_=es().memoizedState;return[typeof p=="boolean"?p:Bm(p),_]},useSyncExternalStore:oy,useId:la,useHostTransitionStatus:su,useFormState:Pn,useActionState:Pn,useOptimistic:function(p,_){var C=es();return uo!==null?Uv(C,uo,p,_):(C.baseState=p,[p,C.queue.dispatch])},useMemoCache:Vv,useCacheRefresh:tx},Ga=null,Al=0;function nf(p){var _=Al;return Al+=1,Ga===null&&(Ga=[]),Bv(Ga,p,_)}function Fc(p,_){_=_.props.ref,p.ref=_!==void 0?_:null}function ju(p,_){throw _.$$typeof===A?Error(r(525)):(p=Object.prototype.toString.call(_),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":p)))}function Aa(p){var _=p._init;return _(p._payload)}function Bc(p){function _(jt,Mt){if(p){var Xt=jt.deletions;Xt===null?(jt.deletions=[Mt],jt.flags|=16):Xt.push(Mt)}}function C(jt,Mt){if(!p)return null;for(;Mt!==null;)_(jt,Mt),Mt=Mt.sibling;return null}function z(jt){for(var Mt=new Map;jt!==null;)jt.key!==null?Mt.set(jt.key,jt):Mt.set(jt.index,jt),jt=jt.sibling;return Mt}function X(jt,Mt){return jt=Rc(jt,Mt),jt.index=0,jt.sibling=null,jt}function oe(jt,Mt,Xt){return jt.index=Xt,p?(Xt=jt.alternate,Xt!==null?(Xt=Xt.index,Xt<Mt?(jt.flags|=67108866,Mt):Xt):(jt.flags|=67108866,Mt)):(jt.flags|=1048576,Mt)}function Ce(jt){return p&&jt.alternate===null&&(jt.flags|=67108866),jt}function Ge(jt,Mt,Xt,Ln){return Mt===null||Mt.tag!==6?(Mt=Pv(Xt,jt.mode,Ln),Mt.return=jt,Mt):(Mt=X(Mt,Xt),Mt.return=jt,Mt)}function mt(jt,Mt,Xt,Ln){var Ur=Xt.type;return Ur===I?Dn(jt,Mt,Xt.props.children,Ln,Xt.key):Mt!==null&&(Mt.elementType===Ur||typeof Ur=="object"&&Ur!==null&&Ur.$$typeof===ye&&Aa(Ur)===Mt.type)?(Mt=X(Mt,Xt.props),Fc(Mt,Xt),Mt.return=jt,Mt):(Mt=Kg(Xt.type,Xt.key,Xt.props,null,jt.mode,Ln),Fc(Mt,Xt),Mt.return=jt,Mt)}function en(jt,Mt,Xt,Ln){return Mt===null||Mt.tag!==4||Mt.stateNode.containerInfo!==Xt.containerInfo||Mt.stateNode.implementation!==Xt.implementation?(Mt=Qg(Xt,jt.mode,Ln),Mt.return=jt,Mt):(Mt=X(Mt,Xt.children||[]),Mt.return=jt,Mt)}function Dn(jt,Mt,Xt,Ln,Ur){return Mt===null||Mt.tag!==7?(Mt=Bh(Xt,jt.mode,Ln,Ur),Mt.return=jt,Mt):(Mt=X(Mt,Xt),Mt.return=jt,Mt)}function qn(jt,Mt,Xt){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return Mt=Pv(""+Mt,jt.mode,Xt),Mt.return=jt,Mt;if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case D:return Xt=Kg(Mt.type,Mt.key,Mt.props,null,jt.mode,Xt),Fc(Xt,Mt),Xt.return=jt,Xt;case k:return Mt=Qg(Mt,jt.mode,Xt),Mt.return=jt,Mt;case ye:var Ln=Mt._init;return Mt=Ln(Mt._payload),qn(jt,Mt,Xt)}if(He(Mt)||Te(Mt))return Mt=Bh(Mt,jt.mode,Xt,null),Mt.return=jt,Mt;if(typeof Mt.then=="function")return qn(jt,nf(Mt),Xt);if(Mt.$$typeof===Z)return qn(jt,Ou(jt,Mt),Xt);ju(jt,Mt)}return null}function cn(jt,Mt,Xt,Ln){var Ur=Mt!==null?Mt.key:null;if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number"||typeof Xt=="bigint")return Ur!==null?null:Ge(jt,Mt,""+Xt,Ln);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case D:return Xt.key===Ur?mt(jt,Mt,Xt,Ln):null;case k:return Xt.key===Ur?en(jt,Mt,Xt,Ln):null;case ye:return Ur=Xt._init,Xt=Ur(Xt._payload),cn(jt,Mt,Xt,Ln)}if(He(Xt)||Te(Xt))return Ur!==null?null:Dn(jt,Mt,Xt,Ln,null);if(typeof Xt.then=="function")return cn(jt,Mt,nf(Xt),Ln);if(Xt.$$typeof===Z)return cn(jt,Mt,Ou(jt,Xt),Ln);ju(jt,Xt)}return null}function hn(jt,Mt,Xt,Ln,Ur){if(typeof Ln=="string"&&Ln!==""||typeof Ln=="number"||typeof Ln=="bigint")return jt=jt.get(Xt)||null,Ge(Mt,jt,""+Ln,Ur);if(typeof Ln=="object"&&Ln!==null){switch(Ln.$$typeof){case D:return jt=jt.get(Ln.key===null?Xt:Ln.key)||null,mt(Mt,jt,Ln,Ur);case k:return jt=jt.get(Ln.key===null?Xt:Ln.key)||null,en(Mt,jt,Ln,Ur);case ye:var Zi=Ln._init;return Ln=Zi(Ln._payload),hn(jt,Mt,Xt,Ln,Ur)}if(He(Ln)||Te(Ln))return jt=jt.get(Xt)||null,Dn(Mt,jt,Ln,Ur,null);if(typeof Ln.then=="function")return hn(jt,Mt,Xt,nf(Ln),Ur);if(Ln.$$typeof===Z)return hn(jt,Mt,Xt,Ou(Mt,Ln),Ur);ju(Mt,Ln)}return null}function Ei(jt,Mt,Xt,Ln){for(var Ur=null,Zi=null,Jr=Mt,yi=Mt=0,ua=null;Jr!==null&&yi<Xt.length;yi++){Jr.index>yi?(ua=Jr,Jr=null):ua=Jr.sibling;var So=cn(jt,Jr,Xt[yi],Ln);if(So===null){Jr===null&&(Jr=ua);break}p&&Jr&&So.alternate===null&&_(jt,Jr),Mt=oe(So,Mt,yi),Zi===null?Ur=So:Zi.sibling=So,Zi=So,Jr=ua}if(yi===Xt.length)return C(jt,Jr),co&&vd(jt,yi),Ur;if(Jr===null){for(;yi<Xt.length;yi++)Jr=qn(jt,Xt[yi],Ln),Jr!==null&&(Mt=oe(Jr,Mt,yi),Zi===null?Ur=Jr:Zi.sibling=Jr,Zi=Jr);return co&&vd(jt,yi),Ur}for(Jr=z(Jr);yi<Xt.length;yi++)ua=hn(Jr,jt,yi,Xt[yi],Ln),ua!==null&&(p&&ua.alternate!==null&&Jr.delete(ua.key===null?yi:ua.key),Mt=oe(ua,Mt,yi),Zi===null?Ur=ua:Zi.sibling=ua,Zi=ua);return p&&Jr.forEach(function(Gd){return _(jt,Gd)}),co&&vd(jt,yi),Ur}function gi(jt,Mt,Xt,Ln){if(Xt==null)throw Error(r(151));for(var Ur=null,Zi=null,Jr=Mt,yi=Mt=0,ua=null,So=Xt.next();Jr!==null&&!So.done;yi++,So=Xt.next()){Jr.index>yi?(ua=Jr,Jr=null):ua=Jr.sibling;var Gd=cn(jt,Jr,So.value,Ln);if(Gd===null){Jr===null&&(Jr=ua);break}p&&Jr&&Gd.alternate===null&&_(jt,Jr),Mt=oe(Gd,Mt,yi),Zi===null?Ur=Gd:Zi.sibling=Gd,Zi=Gd,Jr=ua}if(So.done)return C(jt,Jr),co&&vd(jt,yi),Ur;if(Jr===null){for(;!So.done;yi++,So=Xt.next())So=qn(jt,So.value,Ln),So!==null&&(Mt=oe(So,Mt,yi),Zi===null?Ur=So:Zi.sibling=So,Zi=So);return co&&vd(jt,yi),Ur}for(Jr=z(Jr);!So.done;yi++,So=Xt.next())So=hn(Jr,jt,yi,So.value,Ln),So!==null&&(p&&So.alternate!==null&&Jr.delete(So.key===null?yi:So.key),Mt=oe(So,Mt,yi),Zi===null?Ur=So:Zi.sibling=So,Zi=So);return p&&Jr.forEach(function(rC){return _(jt,rC)}),co&&vd(jt,yi),Ur}function Ho(jt,Mt,Xt,Ln){if(typeof Xt=="object"&&Xt!==null&&Xt.type===I&&Xt.key===null&&(Xt=Xt.props.children),typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case D:e:{for(var Ur=Xt.key;Mt!==null;){if(Mt.key===Ur){if(Ur=Xt.type,Ur===I){if(Mt.tag===7){C(jt,Mt.sibling),Ln=X(Mt,Xt.props.children),Ln.return=jt,jt=Ln;break e}}else if(Mt.elementType===Ur||typeof Ur=="object"&&Ur!==null&&Ur.$$typeof===ye&&Aa(Ur)===Mt.type){C(jt,Mt.sibling),Ln=X(Mt,Xt.props),Fc(Ln,Xt),Ln.return=jt,jt=Ln;break e}C(jt,Mt);break}else _(jt,Mt);Mt=Mt.sibling}Xt.type===I?(Ln=Bh(Xt.props.children,jt.mode,Ln,Xt.key),Ln.return=jt,jt=Ln):(Ln=Kg(Xt.type,Xt.key,Xt.props,null,jt.mode,Ln),Fc(Ln,Xt),Ln.return=jt,jt=Ln)}return Ce(jt);case k:e:{for(Ur=Xt.key;Mt!==null;){if(Mt.key===Ur)if(Mt.tag===4&&Mt.stateNode.containerInfo===Xt.containerInfo&&Mt.stateNode.implementation===Xt.implementation){C(jt,Mt.sibling),Ln=X(Mt,Xt.children||[]),Ln.return=jt,jt=Ln;break e}else{C(jt,Mt);break}else _(jt,Mt);Mt=Mt.sibling}Ln=Qg(Xt,jt.mode,Ln),Ln.return=jt,jt=Ln}return Ce(jt);case ye:return Ur=Xt._init,Xt=Ur(Xt._payload),Ho(jt,Mt,Xt,Ln)}if(He(Xt))return Ei(jt,Mt,Xt,Ln);if(Te(Xt)){if(Ur=Te(Xt),typeof Ur!="function")throw Error(r(150));return Xt=Ur.call(Xt),gi(jt,Mt,Xt,Ln)}if(typeof Xt.then=="function")return Ho(jt,Mt,nf(Xt),Ln);if(Xt.$$typeof===Z)return Ho(jt,Mt,Ou(jt,Xt),Ln);ju(jt,Xt)}return typeof Xt=="string"&&Xt!==""||typeof Xt=="number"||typeof Xt=="bigint"?(Xt=""+Xt,Mt!==null&&Mt.tag===6?(C(jt,Mt.sibling),Ln=X(Mt,Xt),Ln.return=jt,jt=Ln):(C(jt,Mt),Ln=Pv(Xt,jt.mode,Ln),Ln.return=jt,jt=Ln),Ce(jt)):C(jt,Mt)}return function(jt,Mt,Xt,Ln){try{Al=0;var Ur=Ho(jt,Mt,Xt,Ln);return Ga=null,Ur}catch(Jr){if(Jr===Im||Jr===tp)throw Jr;var Zi=ll(29,Jr,null,jt.mode);return Zi.lanes=Ln,Zi.return=jt,Zi}finally{}}}var Ld=Bc(!0),Vu=Bc(!1),dl=Je(null),Ml=null;function Ql(p){var _=p.alternate;wt(_s,_s.current&1),wt(dl,p),Ml===null&&(_===null||Gh.current!==null||_.memoizedState!==null)&&(Ml=p)}function hy(p){if(p.tag===22){if(wt(_s,_s.current),wt(dl,p),Ml===null){var _=p.alternate;_!==null&&_.memoizedState!==null&&(Ml=p)}}else Do()}function Do(){wt(_s,_s.current),wt(dl,dl.current)}function Nc(p){yt(dl),Ml===p&&(Ml=null),yt(_s)}var _s=Je(0);function jc(p){for(var _=p;_!==null;){if(_.tag===13){var C=_.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||W1(C)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}function rf(p,_,C,z){_=p.memoizedState,C=C(z,_),C=C==null?_:T({},_,C),p.memoizedState=C,p.lanes===0&&(p.updateQueue.baseState=C)}var Ym={enqueueSetState:function(p,_,C){p=p._reactInternals;var z=Ks(),X=nu(z);X.payload=_,C!=null&&(X.callback=C),_=Oc(p,X,z),_!==null&&(Pa(_,p,z),rp(_,p,z))},enqueueReplaceState:function(p,_,C){p=p._reactInternals;var z=Ks(),X=nu(z);X.tag=1,X.payload=_,C!=null&&(X.callback=C),_=Oc(p,X,z),_!==null&&(Pa(_,p,z),rp(_,p,z))},enqueueForceUpdate:function(p,_){p=p._reactInternals;var C=Ks(),z=nu(C);z.tag=2,_!=null&&(z.callback=_),_=Oc(p,z,C),_!==null&&(Pa(_,p,C),rp(_,p,C))}};function Xm(p,_,C,z,X,oe,Ce){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(z,oe,Ce):_.prototype&&_.prototype.isPureReactComponent?!Tl(C,z)||!Tl(X,oe):!0}function zd(p,_,C,z){p=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(C,z),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(C,z),_.state!==p&&Ym.enqueueReplaceState(_,_.state,null)}function Uu(p,_){var C=_;if("ref"in _){C={};for(var z in _)z!=="ref"&&(C[z]=_[z])}if(p=p.defaultProps){C===_&&(C=T({},C));for(var X in p)C[X]===void 0&&(C[X]=p[X])}return C}var Fd=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function of(p){Fd(p)}function up(p){console.error(p)}function fy(p){Fd(p)}function sf(p,_){try{var C=p.onUncaughtError;C(_.value,{componentStack:_.stack})}catch(z){setTimeout(function(){throw z})}}function Kv(p,_,C){try{var z=p.onCaughtError;z(C.value,{componentStack:C.stack,errorBoundary:_.tag===1?_.stateNode:null})}catch(X){setTimeout(function(){throw X})}}function dp(p,_,C){return C=nu(C),C.tag=3,C.payload={element:null},C.callback=function(){sf(p,_)},C}function Qv(p){return p=nu(p),p.tag=3,p}function Jv(p,_,C,z){var X=C.type.getDerivedStateFromError;if(typeof X=="function"){var oe=z.value;p.payload=function(){return X(oe)},p.callback=function(){Kv(_,C,z)}}var Ce=C.stateNode;Ce!==null&&typeof Ce.componentDidCatch=="function"&&(p.callback=function(){Kv(_,C,z),typeof X!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var Ge=z.stack;this.componentDidCatch(z.value,{componentStack:Ge!==null?Ge:""})})}function nx(p,_,C,z,X){if(C.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(_=C.alternate,_!==null&&Uh(_,C,X,!0),C=dl.current,C!==null){switch(C.tag){case 13:return Ml===null?Gu():C.alternate===null&&Ti===0&&(Ti=3),C.flags&=-257,C.flags|=65536,C.lanes=X,z===Hh?C.flags|=16384:(_=C.updateQueue,_===null?C.updateQueue=new Set([z]):_.add(z),B1(p,z,X)),!1;case 22:return C.flags|=65536,z===Hh?C.flags|=16384:(_=C.updateQueue,_===null?(_={transitions:null,markerInstances:null,retryQueue:new Set([z])},C.updateQueue=_):(C=_.retryQueue,C===null?_.retryQueue=new Set([z]):C.add(z)),B1(p,z,X)),!1}throw Error(r(435,C.tag))}return B1(p,z,X),Gu(),!1}if(co)return _=dl.current,_!==null?((_.flags&65536)===0&&(_.flags|=256),_.flags|=65536,_.lanes=X,z!==Cm&&(p=Error(r(422),{cause:z}),Zf(Ba(p,C)))):(z!==Cm&&(_=Error(r(423),{cause:z}),Zf(Ba(_,C))),p=p.current.alternate,p.flags|=65536,X&=-X,p.lanes|=X,z=Ba(z,C),X=dp(p.stateNode,z,X),Om(p,X),Ti!==4&&(Ti=2)),!1;var oe=Error(r(520),{cause:z});if(oe=Ba(oe,C),ii===null?ii=[oe]:ii.push(oe),Ti!==4&&(Ti=2),_===null)return!0;z=Ba(z,C),C=_;do{switch(C.tag){case 3:return C.flags|=65536,p=X&-X,C.lanes|=p,p=dp(C.stateNode,z,p),Om(C,p),!1;case 1:if(_=C.type,oe=C.stateNode,(C.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Bo===null||!Bo.has(oe))))return C.flags|=65536,X&=-X,C.lanes|=X,X=Qv(X),Jv(X,p,C,z),Om(C,X),!1}C=C.return}while(C!==null);return!1}var e_=Error(r(461)),Ms=!1;function Xs(p,_,C,z){_.child=p===null?Vu(_,null,C,z):Ld(_,p.child,C,z)}function t_(p,_,C,z,X){C=C.render;var oe=_.ref;if("ref"in z){var Ce={};for(var Ge in z)Ge!=="ref"&&(Ce[Ge]=z[Ge])}else Ce=z;return Xl(_),z=Wh(p,_,C,Ce,oe,X),Ge=lr(),p!==null&&!Ms?(Fm(p,_,X),Rl(p,_,X)):(co&&Ge&&jh(_),_.flags|=1,Xs(p,_,z,X),_.child)}function n_(p,_,C,z,X){if(p===null){var oe=C.type;return typeof oe=="function"&&!Tm(oe)&&oe.defaultProps===void 0&&C.compare===null?(_.tag=15,_.type=oe,r_(p,_,oe,z,X)):(p=Kg(C.type,null,z,_,_.mode,X),p.ref=_.ref,p.return=_,_.child=p)}if(oe=p.child,!fp(p,X)){var Ce=oe.memoizedProps;if(C=C.compare,C=C!==null?C:Tl,C(Ce,z)&&p.ref===_.ref)return Rl(p,_,X)}return _.flags|=1,p=Rc(oe,z),p.ref=_.ref,p.return=_,_.child=p}function r_(p,_,C,z,X){if(p!==null){var oe=p.memoizedProps;if(Tl(oe,z)&&p.ref===_.ref)if(Ms=!1,_.pendingProps=z=oe,fp(p,X))(p.flags&131072)!==0&&(Ms=!0);else return _.lanes=p.lanes,Rl(p,_,X)}return s_(p,_,C,z,X)}function i_(p,_,C){var z=_.pendingProps,X=z.children,oe=p!==null?p.memoizedState:null;if(z.mode==="hidden"){if((_.flags&128)!==0){if(z=oe!==null?oe.baseLanes|C:C,p!==null){for(X=_.child=p.child,oe=0;X!==null;)oe=oe|X.lanes|X.childLanes,X=X.sibling;_.childLanes=oe&~z}else _.childLanes=0,_.child=null;return o_(p,_,z,C)}if((C&536870912)!==0)_.memoizedState={baseLanes:0,cachePool:null},p!==null&&Pm(_,oe!==null?oe.cachePool:null),oe!==null?ru(_,oe):Nv(),hy(_);else return _.lanes=_.childLanes=536870912,o_(p,_,oe!==null?oe.baseLanes|C:C,C)}else oe!==null?(Pm(_,oe.cachePool),ru(_,oe),Do(),_.memoizedState=null):(p!==null&&Pm(_,null),Nv(),Do());return Xs(p,_,X,C),_.child}function o_(p,_,C,z){var X=Lv();return X=X===null?null:{parent:ds._currentValue,pool:X},_.memoizedState={baseLanes:C,cachePool:X},p!==null&&Pm(_,null),Nv(),hy(_),p!==null&&Uh(p,_,z,!0),null}function py(p,_){var C=_.ref;if(C===null)p!==null&&p.ref!==null&&(_.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(r(284));(p===null||p.ref!==C)&&(_.flags|=4194816)}}function s_(p,_,C,z,X){return Xl(_),C=Wh(p,_,C,z,void 0,X),z=lr(),p!==null&&!Ms?(Fm(p,_,X),Rl(p,_,X)):(co&&z&&jh(_),_.flags|=1,Xs(p,_,C,X),_.child)}function ho(p,_,C,z,X,oe){return Xl(_),_.updateQueue=null,C=zu(_,z,C,X),Ad(p),z=lr(),p!==null&&!Ms?(Fm(p,_,oe),Rl(p,_,oe)):(co&&z&&jh(_),_.flags|=1,Xs(p,_,C,oe),_.child)}function a_(p,_,C,z,X){if(Xl(_),_.stateNode===null){var oe=yd,Ce=C.contextType;typeof Ce=="object"&&Ce!==null&&(oe=vs(Ce)),oe=new C(z,oe),_.memoizedState=oe.state!==null&&oe.state!==void 0?oe.state:null,oe.updater=Ym,_.stateNode=oe,oe._reactInternals=_,oe=_.stateNode,oe.props=z,oe.state=_.memoizedState,oe.refs={},ny(_),Ce=C.contextType,oe.context=typeof Ce=="object"&&Ce!==null?vs(Ce):yd,oe.state=_.memoizedState,Ce=C.getDerivedStateFromProps,typeof Ce=="function"&&(rf(_,C,Ce,z),oe.state=_.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof oe.getSnapshotBeforeUpdate=="function"||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(Ce=oe.state,typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount(),Ce!==oe.state&&Ym.enqueueReplaceState(oe,oe.state,null),op(_,z,oe,X),wd(),oe.state=_.memoizedState),typeof oe.componentDidMount=="function"&&(_.flags|=4194308),z=!0}else if(p===null){oe=_.stateNode;var Ge=_.memoizedProps,mt=Uu(C,Ge);oe.props=mt;var en=oe.context,Dn=C.contextType;Ce=yd,typeof Dn=="object"&&Dn!==null&&(Ce=vs(Dn));var qn=C.getDerivedStateFromProps;Dn=typeof qn=="function"||typeof oe.getSnapshotBeforeUpdate=="function",Ge=_.pendingProps!==Ge,Dn||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ge||en!==Ce)&&zd(_,oe,z,Ce),Ua=!1;var cn=_.memoizedState;oe.state=cn,op(_,z,oe,X),wd(),en=_.memoizedState,Ge||cn!==en||Ua?(typeof qn=="function"&&(rf(_,C,qn,z),en=_.memoizedState),(mt=Ua||Xm(_,C,mt,z,cn,en,Ce))?(Dn||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(_.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=z,_.memoizedState=en),oe.props=z,oe.state=en,oe.context=Ce,z=mt):(typeof oe.componentDidMount=="function"&&(_.flags|=4194308),z=!1)}else{oe=_.stateNode,$a(p,_),Ce=_.memoizedProps,Dn=Uu(C,Ce),oe.props=Dn,qn=_.pendingProps,cn=oe.context,en=C.contextType,mt=yd,typeof en=="object"&&en!==null&&(mt=vs(en)),Ge=C.getDerivedStateFromProps,(en=typeof Ge=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==qn||cn!==mt)&&zd(_,oe,z,mt),Ua=!1,cn=_.memoizedState,oe.state=cn,op(_,z,oe,X),wd();var hn=_.memoizedState;Ce!==qn||cn!==hn||Ua||p!==null&&p.dependencies!==null&&Kf(p.dependencies)?(typeof Ge=="function"&&(rf(_,C,Ge,z),hn=_.memoizedState),(Dn=Ua||Xm(_,C,Dn,z,cn,hn,mt)||p!==null&&p.dependencies!==null&&Kf(p.dependencies))?(en||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(z,hn,mt),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(z,hn,mt)),typeof oe.componentDidUpdate=="function"&&(_.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Ce===p.memoizedProps&&cn===p.memoizedState||(_.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===p.memoizedProps&&cn===p.memoizedState||(_.flags|=1024),_.memoizedProps=z,_.memoizedState=hn),oe.props=z,oe.state=hn,oe.context=mt,z=Dn):(typeof oe.componentDidUpdate!="function"||Ce===p.memoizedProps&&cn===p.memoizedState||(_.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===p.memoizedProps&&cn===p.memoizedState||(_.flags|=1024),z=!1)}return oe=z,py(p,_),z=(_.flags&128)!==0,oe||z?(oe=_.stateNode,C=z&&typeof C.getDerivedStateFromError!="function"?null:oe.render(),_.flags|=1,p!==null&&z?(_.child=Ld(_,p.child,null,X),_.child=Ld(_,null,C,X)):Xs(p,_,C,X),_.memoizedState=oe.state,p=_.child):p=Rl(p,_,X),p}function rx(p,_,C,z){return Xf(),_.flags|=256,Xs(p,_,C,z),_.child}var Bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function l_(p){return{baseLanes:p,cachePool:zv()}}function Nd(p,_,C){return p=p!==null?p.childLanes&~C:0,_&&(p|=Sr),p}function c_(p,_,C){var z=_.pendingProps,X=!1,oe=(_.flags&128)!==0,Ce;if((Ce=oe)||(Ce=p!==null&&p.memoizedState===null?!1:(_s.current&2)!==0),Ce&&(X=!0,_.flags&=-129),Ce=(_.flags&32)!==0,_.flags&=-33,p===null){if(co){if(X?Ql(_):Do(),co){var Ge=zo,mt;if(mt=Ge){e:{for(mt=Ge,Ge=Pc;mt.nodeType!==8;){if(!Ge){Ge=null;break e}if(mt=Yu(mt.nextSibling),mt===null){Ge=null;break e}}Ge=mt}Ge!==null?(_.memoizedState={dehydrated:Ge,treeContext:Du!==null?{id:ja,overflow:Dc}:null,retryLane:536870912,hydrationErrors:null},mt=ll(18,null,null,0),mt.stateNode=Ge,mt.return=_,_.child=mt,Ys=_,zo=null,mt=!0):mt=!1}mt||eu(_)}if(Ge=_.memoizedState,Ge!==null&&(Ge=Ge.dehydrated,Ge!==null))return W1(Ge)?_.lanes=32:_.lanes=536870912,null;Nc(_)}return Ge=z.children,z=z.fallback,X?(Do(),X=_.mode,Ge=jd({mode:"hidden",children:Ge},X),z=Bh(z,X,C,null),Ge.return=_,z.return=_,Ge.sibling=z,_.child=Ge,X=_.child,X.memoizedState=l_(C),X.childLanes=Nd(p,Ce,C),_.memoizedState=Bd,z):(Ql(_),hp(_,Ge))}if(mt=p.memoizedState,mt!==null&&(Ge=mt.dehydrated,Ge!==null)){if(oe)_.flags&256?(Ql(_),_.flags&=-257,_=Jl(p,_,C)):_.memoizedState!==null?(Do(),_.child=p.child,_.flags|=128,_=null):(Do(),X=z.fallback,Ge=_.mode,z=jd({mode:"visible",children:z.children},Ge),X=Bh(X,Ge,C,null),X.flags|=2,z.return=_,X.return=_,z.sibling=X,_.child=z,Ld(_,p.child,null,C),z=_.child,z.memoizedState=l_(C),z.childLanes=Nd(p,Ce,C),_.memoizedState=Bd,_=X);else if(Ql(_),W1(Ge)){if(Ce=Ge.nextSibling&&Ge.nextSibling.dataset,Ce)var en=Ce.dgst;Ce=en,z=Error(r(419)),z.stack="",z.digest=Ce,Zf({value:z,source:null,stack:null}),_=Jl(p,_,C)}else if(Ms||Uh(p,_,C,!1),Ce=(C&p.childLanes)!==0,Ms||Ce){if(Ce=Lr,Ce!==null&&(z=C&-C,z=(z&42)!==0?1:Hs(z),z=(z&(Ce.suspendedLanes|C))!==0?0:z,z!==0&&z!==mt.retryLane))throw mt.retryLane=z,Yl(p,z),Pa(Ce,p,z),e_;Ge.data==="$?"||Gu(),_=Jl(p,_,C)}else Ge.data==="$?"?(_.flags|=192,_.child=p.child,_=null):(p=mt.treeContext,zo=Yu(Ge.nextSibling),Ys=_,co=!0,Pu=null,Pc=!1,p!==null&&(cl[Na++]=ja,cl[Na++]=Dc,cl[Na++]=Du,ja=p.id,Dc=p.overflow,Du=_),_=hp(_,z.children),_.flags|=4096);return _}return X?(Do(),X=z.fallback,Ge=_.mode,mt=p.child,en=mt.sibling,z=Rc(mt,{mode:"hidden",children:z.children}),z.subtreeFlags=mt.subtreeFlags&65011712,en!==null?X=Rc(en,X):(X=Bh(X,Ge,C,null),X.flags|=2),X.return=_,z.return=_,z.sibling=X,_.child=z,z=X,X=_.child,Ge=p.child.memoizedState,Ge===null?Ge=l_(C):(mt=Ge.cachePool,mt!==null?(en=ds._currentValue,mt=mt.parent!==en?{parent:en,pool:en}:mt):mt=zv(),Ge={baseLanes:Ge.baseLanes|C,cachePool:mt}),X.memoizedState=Ge,X.childLanes=Nd(p,Ce,C),_.memoizedState=Bd,z):(Ql(_),C=p.child,p=C.sibling,C=Rc(C,{mode:"visible",children:z.children}),C.return=_,C.sibling=null,p!==null&&(Ce=_.deletions,Ce===null?(_.deletions=[p],_.flags|=16):Ce.push(p)),_.child=C,_.memoizedState=null,C)}function hp(p,_){return _=jd({mode:"visible",children:_},p.mode),_.return=p,p.child=_}function jd(p,_){return p=ll(22,p,null,_),p.lanes=0,p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},p}function Jl(p,_,C){return Ld(_,p.child,null,C),p=hp(_,_.pendingProps.children),p.flags|=2,_.memoizedState=null,p}function Zm(p,_,C){p.lanes|=_;var z=p.alternate;z!==null&&(z.lanes|=_),Am(p.return,_,C)}function Po(p,_,C,z,X){var oe=p.memoizedState;oe===null?p.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:z,tail:C,tailMode:X}:(oe.isBackwards=_,oe.rendering=null,oe.renderingStartTime=0,oe.last=z,oe.tail=C,oe.tailMode=X)}function ec(p,_,C){var z=_.pendingProps,X=z.revealOrder,oe=z.tail;if(Xs(p,_,z.children,C),z=_s.current,(z&2)!==0)z=z&1|2,_.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=_.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Zm(p,C,_);else if(p.tag===19)Zm(p,C,_);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===_)break e;for(;p.sibling===null;){if(p.return===null||p.return===_)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}z&=1}switch(wt(_s,z),X){case"forwards":for(C=_.child,X=null;C!==null;)p=C.alternate,p!==null&&jc(p)===null&&(X=C),C=C.sibling;C=X,C===null?(X=_.child,_.child=null):(X=C.sibling,C.sibling=null),Po(_,!1,X,C,oe);break;case"backwards":for(C=null,X=_.child,_.child=null;X!==null;){if(p=X.alternate,p!==null&&jc(p)===null){_.child=X;break}p=X.sibling,X.sibling=C,C=X,X=p}Po(_,!0,C,null,oe);break;case"together":Po(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Rl(p,_,C){if(p!==null&&(_.dependencies=p.dependencies),Wi|=_.lanes,(C&_.childLanes)===0)if(p!==null){if(Uh(p,_,C,!1),(C&_.childLanes)===0)return null}else return null;if(p!==null&&_.child!==p.child)throw Error(r(153));if(_.child!==null){for(p=_.child,C=Rc(p,p.pendingProps),_.child=C,C.return=_;p.sibling!==null;)p=p.sibling,C=C.sibling=Rc(p,p.pendingProps),C.return=_;C.sibling=null}return _.child}function fp(p,_){return(p.lanes&_)!==0?!0:(p=p.dependencies,!!(p!==null&&Kf(p)))}function ix(p,_,C){switch(_.tag){case 3:Rn(_,_.stateNode.containerInfo),Ic(_,ds,p.memoizedState.cache),Xf();break;case 27:case 5:Qt(_);break;case 4:Rn(_,_.stateNode.containerInfo);break;case 10:Ic(_,_.type,_.memoizedProps.value);break;case 13:var z=_.memoizedState;if(z!==null)return z.dehydrated!==null?(Ql(_),_.flags|=128,null):(C&_.child.childLanes)!==0?c_(p,_,C):(Ql(_),p=Rl(p,_,C),p!==null?p.sibling:null);Ql(_);break;case 19:var X=(p.flags&128)!==0;if(z=(C&_.childLanes)!==0,z||(Uh(p,_,C,!1),z=(C&_.childLanes)!==0),X){if(z)return ec(p,_,C);_.flags|=128}if(X=_.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),wt(_s,_s.current),z)break;return null;case 22:case 23:return _.lanes=0,i_(p,_,C);case 24:Ic(_,ds,p.memoizedState.cache)}return Rl(p,_,C)}function ox(p,_,C){if(p!==null)if(p.memoizedProps!==_.pendingProps)Ms=!0;else{if(!fp(p,C)&&(_.flags&128)===0)return Ms=!1,ix(p,_,C);Ms=(p.flags&131072)!==0}else Ms=!1,co&&(_.flags&1048576)!==0&&Nh(_,Em,_.index);switch(_.lanes=0,_.tag){case 16:e:{p=_.pendingProps;var z=_.elementType,X=z._init;if(z=X(z._payload),_.type=z,typeof z=="function")Tm(z)?(p=Uu(z,p),_.tag=1,_=a_(null,_,z,p,C)):(_.tag=0,_=s_(null,_,z,p,C));else{if(z!=null){if(X=z.$$typeof,X===K){_.tag=11,_=t_(null,_,z,p,C);break e}else if(X===he){_.tag=14,_=n_(null,_,z,p,C);break e}}throw _=Re(z)||z,Error(r(306,_,""))}}return _;case 0:return s_(p,_,_.type,_.pendingProps,C);case 1:return z=_.type,X=Uu(z,_.pendingProps),a_(p,_,z,X,C);case 3:e:{if(Rn(_,_.stateNode.containerInfo),p===null)throw Error(r(387));z=_.pendingProps;var oe=_.memoizedState;X=oe.element,$a(p,_),op(_,z,null,C);var Ce=_.memoizedState;if(z=Ce.cache,Ic(_,ds,z),z!==oe.cache&&Mm(_,[ds],C,!0),wd(),z=Ce.element,oe.isDehydrated)if(oe={element:z,isDehydrated:!1,cache:Ce.cache},_.updateQueue.baseState=oe,_.memoizedState=oe,_.flags&256){_=rx(p,_,z,C);break e}else if(z!==X){X=Ba(Error(r(424)),_),Zf(X),_=rx(p,_,z,C);break e}else{switch(p=_.stateNode.containerInfo,p.nodeType){case 9:p=p.body;break;default:p=p.nodeName==="HTML"?p.ownerDocument.body:p}for(zo=Yu(p.firstChild),Ys=_,co=!0,Pu=null,Pc=!0,C=Vu(_,null,z,C),_.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling}else{if(Xf(),z===X){_=Rl(p,_,C);break e}Xs(p,_,z,C)}_=_.child}return _;case 26:return py(p,_),p===null?(C=Ax(_.type,null,_.pendingProps,null))?_.memoizedState=C:co||(C=_.type,p=_.pendingProps,z=xy(vt.current).createElement(C),z[xe]=_,z[ke]=p,ca(z,C,p),er(z),_.stateNode=z):_.memoizedState=Ax(_.type,p.memoizedProps,_.pendingProps,p.memoizedState),null;case 27:return Qt(_),p===null&&co&&(z=_.stateNode=X1(_.type,_.pendingProps,vt.current),Ys=_,Pc=!0,X=zo,df(_.type)?(Y1=X,zo=Yu(z.firstChild)):zo=X),Xs(p,_,_.pendingProps.children,C),py(p,_),p===null&&(_.flags|=4194304),_.child;case 5:return p===null&&co&&((X=z=zo)&&(z=lg(z,_.type,_.pendingProps,Pc),z!==null?(_.stateNode=z,Ys=_,zo=Yu(z.firstChild),Pc=!1,X=!0):X=!1),X||eu(_)),Qt(_),X=_.type,oe=_.pendingProps,Ce=p!==null?p.memoizedProps:null,z=oe.children,Sx(X,oe)?z=null:Ce!==null&&Sx(X,Ce)&&(_.flags|=32),_.memoizedState!==null&&(X=Wh(p,_,Md,null,null,C),Ty._currentValue=X),py(p,_),Xs(p,_,z,C),_.child;case 6:return p===null&&co&&((p=C=zo)&&(C=VE(C,_.pendingProps,Pc),C!==null?(_.stateNode=C,Ys=_,zo=null,p=!0):p=!1),p||eu(_)),null;case 13:return c_(p,_,C);case 4:return Rn(_,_.stateNode.containerInfo),z=_.pendingProps,p===null?_.child=Ld(_,null,z,C):Xs(p,_,z,C),_.child;case 11:return t_(p,_,_.type,_.pendingProps,C);case 7:return Xs(p,_,_.pendingProps,C),_.child;case 8:return Xs(p,_,_.pendingProps.children,C),_.child;case 12:return Xs(p,_,_.pendingProps.children,C),_.child;case 10:return z=_.pendingProps,Ic(_,_.type,z.value),Xs(p,_,z.children,C),_.child;case 9:return X=_.type._context,z=_.pendingProps.children,Xl(_),X=vs(X),z=z(X),_.flags|=1,Xs(p,_,z,C),_.child;case 14:return n_(p,_,_.type,_.pendingProps,C);case 15:return r_(p,_,_.type,_.pendingProps,C);case 19:return ec(p,_,C);case 31:return z=_.pendingProps,C=_.mode,z={mode:z.mode,children:z.children},p===null?(C=jd(z,C),C.ref=_.ref,_.child=C,C.return=_,_=C):(C=Rc(p.child,z),C.ref=_.ref,_.child=C,C.return=_,_=C),_;case 22:return i_(p,_,C);case 24:return Xl(_),z=vs(ds),p===null?(X=Lv(),X===null&&(X=Lr,oe=Qf(),X.pooledCache=oe,oe.refCount++,oe!==null&&(X.pooledCacheLanes|=C),X=oe),_.memoizedState={parent:z,cache:X},ny(_),Ic(_,ds,X)):((p.lanes&C)!==0&&($a(p,_),op(_,null,null,C),wd()),X=p.memoizedState,oe=_.memoizedState,X.parent!==z?(X={parent:z,cache:z},_.memoizedState=X,_.lanes===0&&(_.memoizedState=_.updateQueue.baseState=X),Ic(_,ds,z)):(z=oe.cache,Ic(_,ds,z),z!==X.cache&&Mm(_,[ds],C,!0))),Xs(p,_,_.pendingProps.children,C),_.child;case 29:throw _.pendingProps}throw Error(r(156,_.tag))}function Dl(p){p.flags|=4}function u_(p,_){if(_.type!=="stylesheet"||(_.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!b_(_)){if(_=dl.current,_!==null&&((sr&4194048)===sr?Ml!==null:(sr&62914560)!==sr&&(sr&536870912)===0||_!==Ml))throw np=Hh,Q0;p.flags|=8192}}function pp(p,_){_!==null&&(p.flags|=4),p.flags&16384&&(_=p.tag!==22?Wo():536870912,p.lanes|=_,Ni|=_)}function Ma(p,_){if(!co)switch(p.tailMode){case"hidden":_=p.tail;for(var C=null;_!==null;)_.alternate!==null&&(C=_),_=_.sibling;C===null?p.tail=null:C.sibling=null;break;case"collapsed":C=p.tail;for(var z=null;C!==null;)C.alternate!==null&&(z=C),C=C.sibling;z===null?_||p.tail===null?p.tail=null:p.tail.sibling=null:z.sibling=null}}function Fo(p){var _=p.alternate!==null&&p.alternate.child===p.child,C=0,z=0;if(_)for(var X=p.child;X!==null;)C|=X.lanes|X.childLanes,z|=X.subtreeFlags&65011712,z|=X.flags&65011712,X.return=p,X=X.sibling;else for(X=p.child;X!==null;)C|=X.lanes|X.childLanes,z|=X.subtreeFlags,z|=X.flags,X.return=p,X=X.sibling;return p.subtreeFlags|=z,p.childLanes=C,_}function Km(p,_,C){var z=_.pendingProps;switch(Gf(_),_.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fo(_),null;case 1:return Fo(_),null;case 3:return C=_.stateNode,z=null,p!==null&&(z=p.memoizedState.cache),_.memoizedState.cache!==z&&(_.flags|=2048),kc(ds),yn(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(p===null||p.child===null)&&(Yf(_)?Dl(_):p===null||p.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,Vh())),Fo(_),null;case 26:return C=_.memoizedState,p===null?(Dl(_),C!==null?(Fo(_),u_(_,C)):(Fo(_),_.flags&=-16777217)):C?C!==p.memoizedState?(Dl(_),Fo(_),u_(_,C)):(Fo(_),_.flags&=-16777217):(p.memoizedProps!==z&&Dl(_),Fo(_),_.flags&=-16777217),null;case 27:Jt(_),C=vt.current;var X=_.type;if(p!==null&&_.stateNode!=null)p.memoizedProps!==z&&Dl(_);else{if(!z){if(_.stateNode===null)throw Error(r(166));return Fo(_),null}p=$t.current,Yf(_)?Wf(_):(p=X1(X,z,C),_.stateNode=p,Dl(_))}return Fo(_),null;case 5:if(Jt(_),C=_.type,p!==null&&_.stateNode!=null)p.memoizedProps!==z&&Dl(_);else{if(!z){if(_.stateNode===null)throw Error(r(166));return Fo(_),null}if(p=$t.current,Yf(_))Wf(_);else{switch(X=xy(vt.current),p){case 1:p=X.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:p=X.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":p=X.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":p=X.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof z.is=="string"?X.createElement("select",{is:z.is}):X.createElement("select"),z.multiple?p.multiple=!0:z.size&&(p.size=z.size);break;default:p=typeof z.is=="string"?X.createElement(C,{is:z.is}):X.createElement(C)}}p[xe]=_,p[ke]=z;e:for(X=_.child;X!==null;){if(X.tag===5||X.tag===6)p.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===_)break e;for(;X.sibling===null;){if(X.return===null||X.return===_)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}_.stateNode=p;e:switch(ca(p,C,z),C){case"button":case"input":case"select":case"textarea":p=!!z.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Dl(_)}}return Fo(_),_.flags&=-16777217,null;case 6:if(p&&_.stateNode!=null)p.memoizedProps!==z&&Dl(_);else{if(typeof z!="string"&&_.stateNode===null)throw Error(r(166));if(p=vt.current,Yf(_)){if(p=_.stateNode,C=_.memoizedProps,z=null,X=Ys,X!==null)switch(X.tag){case 27:case 5:z=X.memoizedProps}p[xe]=_,p=!!(p.nodeValue===C||z!==null&&z.suppressHydrationWarning===!0||_y(p.nodeValue,C)),p||eu(_)}else p=xy(p).createTextNode(z),p[xe]=_,_.stateNode=p}return Fo(_),null;case 13:if(z=_.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(X=Yf(_),z!==null&&z.dehydrated!==null){if(p===null){if(!X)throw Error(r(318));if(X=_.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(r(317));X[xe]=_}else Xf(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;Fo(_),X=!1}else X=Vh(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=X),X=!0;if(!X)return _.flags&256?(Nc(_),_):(Nc(_),null)}if(Nc(_),(_.flags&128)!==0)return _.lanes=C,_;if(C=z!==null,p=p!==null&&p.memoizedState!==null,C){z=_.child,X=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(X=z.alternate.memoizedState.cachePool.pool);var oe=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(oe=z.memoizedState.cachePool.pool),oe!==X&&(z.flags|=2048)}return C!==p&&C&&(_.child.flags|=8192),pp(_,_.updateQueue),Fo(_),null;case 4:return yn(),p===null&&g_(_.stateNode.containerInfo),Fo(_),null;case 10:return kc(_.type),Fo(_),null;case 19:if(yt(_s),X=_.memoizedState,X===null)return Fo(_),null;if(z=(_.flags&128)!==0,oe=X.rendering,oe===null)if(z)Ma(X,!1);else{if(Ti!==0||p!==null&&(p.flags&128)!==0)for(p=_.child;p!==null;){if(oe=jc(p),oe!==null){for(_.flags|=128,Ma(X,!1),p=oe.updateQueue,_.updateQueue=p,pp(_,p),_.subtreeFlags=0,p=C,C=_.child;C!==null;)go(C,p),C=C.sibling;return wt(_s,_s.current&1|2),_.child}p=p.sibling}X.tail!==null&&Ft()>ts&&(_.flags|=128,z=!0,Ma(X,!1),_.lanes=4194304)}else{if(!z)if(p=jc(oe),p!==null){if(_.flags|=128,z=!0,p=p.updateQueue,_.updateQueue=p,pp(_,p),Ma(X,!0),X.tail===null&&X.tailMode==="hidden"&&!oe.alternate&&!co)return Fo(_),null}else 2*Ft()-X.renderingStartTime>ts&&C!==536870912&&(_.flags|=128,z=!0,Ma(X,!1),_.lanes=4194304);X.isBackwards?(oe.sibling=_.child,_.child=oe):(p=X.last,p!==null?p.sibling=oe:_.child=oe,X.last=oe)}return X.tail!==null?(_=X.tail,X.rendering=_,X.tail=_.sibling,X.renderingStartTime=Ft(),_.sibling=null,p=_s.current,wt(_s,z?p&1|2:p&1),_):(Fo(_),null);case 22:case 23:return Nc(_),zm(),z=_.memoizedState!==null,p!==null?p.memoizedState!==null!==z&&(_.flags|=8192):z&&(_.flags|=8192),z?(C&536870912)!==0&&(_.flags&128)===0&&(Fo(_),_.subtreeFlags&6&&(_.flags|=8192)):Fo(_),C=_.updateQueue,C!==null&&pp(_,C.retryQueue),C=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),z=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(z=_.memoizedState.cachePool.pool),z!==C&&(_.flags|=2048),p!==null&&yt(qh),null;case 24:return C=null,p!==null&&(C=p.memoizedState.cache),_.memoizedState.cache!==C&&(_.flags|=2048),kc(ds),Fo(_),null;case 25:return null;case 30:return null}throw Error(r(156,_.tag))}function mp(p,_){switch(Gf(_),_.tag){case 1:return p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 3:return kc(ds),yn(),p=_.flags,(p&65536)!==0&&(p&128)===0?(_.flags=p&-65537|128,_):null;case 26:case 27:case 5:return Jt(_),null;case 13:if(Nc(_),p=_.memoizedState,p!==null&&p.dehydrated!==null){if(_.alternate===null)throw Error(r(340));Xf()}return p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 19:return yt(_s),null;case 4:return yn(),null;case 10:return kc(_.type),null;case 22:case 23:return Nc(_),zm(),p!==null&&yt(qh),p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 24:return kc(ds),null;case 25:return null;default:return null}}function au(p,_){switch(Gf(_),_.tag){case 3:kc(ds),yn();break;case 26:case 27:case 5:Jt(_);break;case 4:yn();break;case 13:Nc(_);break;case 19:yt(_s);break;case 10:kc(_.type);break;case 22:case 23:Nc(_),zm(),p!==null&&yt(qh);break;case 24:kc(ds)}}function Wa(p,_){try{var C=_.updateQueue,z=C!==null?C.lastEffect:null;if(z!==null){var X=z.next;C=X;do{if((C.tag&p)===p){z=void 0;var oe=C.create,Ce=C.inst;z=oe(),Ce.destroy=z}C=C.next}while(C!==X)}}catch(Ge){Ko(_,_.return,Ge)}}function Zs(p,_,C){try{var z=_.updateQueue,X=z!==null?z.lastEffect:null;if(X!==null){var oe=X.next;z=oe;do{if((z.tag&p)===p){var Ce=z.inst,Ge=Ce.destroy;if(Ge!==void 0){Ce.destroy=void 0,X=_;var mt=C,en=Ge;try{en()}catch(Dn){Ko(X,mt,Dn)}}}z=z.next}while(z!==oe)}}catch(Dn){Ko(_,_.return,Dn)}}function $u(p){var _=p.updateQueue;if(_!==null){var C=p.stateNode;try{Sd(_,C)}catch(z){Ko(p,p.return,z)}}}function Vd(p,_,C){C.props=Uu(p.type,p.memoizedProps),C.state=p.memoizedState;try{C.componentWillUnmount()}catch(z){Ko(p,_,z)}}function y(p,_){try{var C=p.ref;if(C!==null){switch(p.tag){case 26:case 27:case 5:var z=p.stateNode;break;case 30:z=p.stateNode;break;default:z=p.stateNode}typeof C=="function"?p.refCleanup=C(z):C.current=z}}catch(X){Ko(p,_,X)}}function a(p,_){var C=p.ref,z=p.refCleanup;if(C!==null)if(typeof z=="function")try{z()}catch(X){Ko(p,_,X)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(X){Ko(p,_,X)}else C.current=null}function d(p){var _=p.type,C=p.memoizedProps,z=p.stateNode;try{e:switch(_){case"button":case"input":case"select":case"textarea":C.autoFocus&&z.focus();break e;case"img":C.src?z.src=C.src:C.srcSet&&(z.srcset=C.srcSet)}}catch(X){Ko(p,p.return,X)}}function v(p,_,C){try{var z=p.stateNode;_x(z,p.type,C,_),z[ke]=_}catch(X){Ko(p,p.return,X)}}function S(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&df(p.type)||p.tag===4}function E(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||S(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&df(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function R(p,_,C){var z=p.tag;if(z===5||z===6)p=p.stateNode,_?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(p,_):(_=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,_.appendChild(p),C=C._reactRootContainer,C!=null||_.onclick!==null||(_.onclick=v_));else if(z!==4&&(z===27&&df(p.type)&&(C=p.stateNode,_=null),p=p.child,p!==null))for(R(p,_,C),p=p.sibling;p!==null;)R(p,_,C),p=p.sibling}function O(p,_,C){var z=p.tag;if(z===5||z===6)p=p.stateNode,_?C.insertBefore(p,_):C.appendChild(p);else if(z!==4&&(z===27&&df(p.type)&&(C=p.stateNode),p=p.child,p!==null))for(O(p,_,C),p=p.sibling;p!==null;)O(p,_,C),p=p.sibling}function B(p){var _=p.stateNode,C=p.memoizedProps;try{for(var z=p.type,X=_.attributes;X.length;)_.removeAttributeNode(X[0]);ca(_,z,C),_[xe]=p,_[ke]=C}catch(oe){Ko(p,p.return,oe)}}var H=!1,Y=!1,J=!1,Q=typeof WeakSet=="function"?WeakSet:Set,ie=null;function pe(p,_){if(p=p.containerInfo,q1=kx,p=Au(p),Mv(p)){if("selectionStart"in p)var C={start:p.selectionStart,end:p.selectionEnd};else e:{C=(C=p.ownerDocument)&&C.defaultView||window;var z=C.getSelection&&C.getSelection();if(z&&z.rangeCount!==0){C=z.anchorNode;var X=z.anchorOffset,oe=z.focusNode;z=z.focusOffset;try{C.nodeType,oe.nodeType}catch{C=null;break e}var Ce=0,Ge=-1,mt=-1,en=0,Dn=0,qn=p,cn=null;t:for(;;){for(var hn;qn!==C||X!==0&&qn.nodeType!==3||(Ge=Ce+X),qn!==oe||z!==0&&qn.nodeType!==3||(mt=Ce+z),qn.nodeType===3&&(Ce+=qn.nodeValue.length),(hn=qn.firstChild)!==null;)cn=qn,qn=hn;for(;;){if(qn===p)break t;if(cn===C&&++en===X&&(Ge=Ce),cn===oe&&++Dn===z&&(mt=Ce),(hn=qn.nextSibling)!==null)break;qn=cn,cn=qn.parentNode}qn=hn}C=Ge===-1||mt===-1?null:{start:Ge,end:mt}}else C=null}C=C||{start:0,end:0}}else C=null;for(xx={focusedElem:p,selectionRange:C},kx=!1,ie=_;ie!==null;)if(_=ie,p=_.child,(_.subtreeFlags&1024)!==0&&p!==null)p.return=_,ie=p;else for(;ie!==null;){switch(_=ie,oe=_.alternate,p=_.flags,_.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&oe!==null){p=void 0,C=_,X=oe.memoizedProps,oe=oe.memoizedState,z=C.stateNode;try{var Ei=Uu(C.type,X,C.elementType===C.type);p=z.getSnapshotBeforeUpdate(Ei,oe),z.__reactInternalSnapshotBeforeUpdate=p}catch(gi){Ko(C,C.return,gi)}}break;case 3:if((p&1024)!==0){if(p=_.stateNode.containerInfo,C=p.nodeType,C===9)$d(p);else if(C===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":$d(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=_.sibling,p!==null){p.return=_.return,ie=p;break}ie=_.return}}function de(p,_,C){var z=C.flags;switch(C.tag){case 0:case 11:case 15:kt(p,C),z&4&&Wa(5,C);break;case 1:if(kt(p,C),z&4)if(p=C.stateNode,_===null)try{p.componentDidMount()}catch(Ce){Ko(C,C.return,Ce)}else{var X=Uu(C.type,_.memoizedProps);_=_.memoizedState;try{p.componentDidUpdate(X,_,p.__reactInternalSnapshotBeforeUpdate)}catch(Ce){Ko(C,C.return,Ce)}}z&64&&$u(C),z&512&&y(C,C.return);break;case 3:if(kt(p,C),z&64&&(p=C.updateQueue,p!==null)){if(_=null,C.child!==null)switch(C.child.tag){case 27:case 5:_=C.child.stateNode;break;case 1:_=C.child.stateNode}try{Sd(p,_)}catch(Ce){Ko(C,C.return,Ce)}}break;case 27:_===null&&z&4&&B(C);case 26:case 5:kt(p,C),_===null&&z&4&&d(C),z&512&&y(C,C.return);break;case 12:kt(p,C);break;case 13:kt(p,C),z&4&&Ye(p,C),z&64&&(p=C.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(C=lP.bind(null,C),UE(p,C))));break;case 22:if(z=C.memoizedState!==null||H,!z){_=_!==null&&_.memoizedState!==null||Y,X=H;var oe=Y;H=z,(Y=_)&&!oe?tn(p,C,(C.subtreeFlags&8772)!==0):kt(p,C),H=X,Y=oe}break;case 30:break;default:kt(p,C)}}function ge(p){var _=p.alternate;_!==null&&(p.alternate=null,ge(_)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(_=p.stateNode,_!==null&&st(_)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var fe=null,Ee=!1;function Le(p,_,C){for(C=C.child;C!==null;)je(p,_,C),C=C.sibling}function je(p,_,C){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(zn,C)}catch{}switch(C.tag){case 26:Y||a(C,_),Le(p,_,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:Y||a(C,_);var z=fe,X=Ee;df(C.type)&&(fe=C.stateNode,Ee=!1),Le(p,_,C),cg(C.stateNode),fe=z,Ee=X;break;case 5:Y||a(C,_);case 6:if(z=fe,X=Ee,fe=null,Le(p,_,C),fe=z,Ee=X,fe!==null)if(Ee)try{(fe.nodeType===9?fe.body:fe.nodeName==="HTML"?fe.ownerDocument.body:fe).removeChild(C.stateNode)}catch(oe){Ko(C,_,oe)}else try{fe.removeChild(C.stateNode)}catch(oe){Ko(C,_,oe)}break;case 18:fe!==null&&(Ee?(p=fe,G1(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,C.stateNode),Ay(p)):G1(fe,C.stateNode));break;case 4:z=fe,X=Ee,fe=C.stateNode.containerInfo,Ee=!0,Le(p,_,C),fe=z,Ee=X;break;case 0:case 11:case 14:case 15:Y||Zs(2,C,_),Y||Zs(4,C,_),Le(p,_,C);break;case 1:Y||(a(C,_),z=C.stateNode,typeof z.componentWillUnmount=="function"&&Vd(C,_,z)),Le(p,_,C);break;case 21:Le(p,_,C);break;case 22:Y=(z=Y)||C.memoizedState!==null,Le(p,_,C),Y=z;break;default:Le(p,_,C)}}function Ye(p,_){if(_.memoizedState===null&&(p=_.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Ay(p)}catch(C){Ko(_,_.return,C)}}function $e(p){switch(p.tag){case 13:case 19:var _=p.stateNode;return _===null&&(_=p.stateNode=new Q),_;case 22:return p=p.stateNode,_=p._retryCache,_===null&&(_=p._retryCache=new Q),_;default:throw Error(r(435,p.tag))}}function Ue(p,_){var C=$e(p);_.forEach(function(z){var X=IE.bind(null,p,z);C.has(z)||(C.add(z),z.then(X,X))})}function Fe(p,_){var C=_.deletions;if(C!==null)for(var z=0;z<C.length;z++){var X=C[z],oe=p,Ce=_,Ge=Ce;e:for(;Ge!==null;){switch(Ge.tag){case 27:if(df(Ge.type)){fe=Ge.stateNode,Ee=!1;break e}break;case 5:fe=Ge.stateNode,Ee=!1;break e;case 3:case 4:fe=Ge.stateNode.containerInfo,Ee=!0;break e}Ge=Ge.return}if(fe===null)throw Error(r(160));je(oe,Ce,X),fe=null,Ee=!1,oe=X.alternate,oe!==null&&(oe.return=null),X.return=null}if(_.subtreeFlags&13878)for(_=_.child;_!==null;)et(_,p),_=_.sibling}var Ze=null;function et(p,_){var C=p.alternate,z=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Fe(_,p),gt(p),z&4&&(Zs(3,p,p.return),Wa(3,p),Zs(5,p,p.return));break;case 1:Fe(_,p),gt(p),z&512&&(Y||C===null||a(C,C.return)),z&64&&H&&(p=p.updateQueue,p!==null&&(z=p.callbacks,z!==null&&(C=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=C===null?z:C.concat(z))));break;case 26:var X=Ze;if(Fe(_,p),gt(p),z&512&&(Y||C===null||a(C,C.return)),z&4){var oe=C!==null?C.memoizedState:null;if(z=p.memoizedState,C===null)if(z===null)if(p.stateNode===null){e:{z=p.type,C=p.memoizedProps,X=X.ownerDocument||X;t:switch(z){case"title":oe=X.getElementsByTagName("title")[0],(!oe||oe[ft]||oe[xe]||oe.namespaceURI==="http://www.w3.org/2000/svg"||oe.hasAttribute("itemprop"))&&(oe=X.createElement(z),X.head.insertBefore(oe,X.querySelector("head > title"))),ca(oe,z,C),oe[xe]=p,er(oe),z=oe;break e;case"link":var Ce=GE("link","href",X).get(z+(C.href||""));if(Ce){for(var Ge=0;Ge<Ce.length;Ge++)if(oe=Ce[Ge],oe.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&oe.getAttribute("rel")===(C.rel==null?null:C.rel)&&oe.getAttribute("title")===(C.title==null?null:C.title)&&oe.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){Ce.splice(Ge,1);break t}}oe=X.createElement(z),ca(oe,z,C),X.head.appendChild(oe);break;case"meta":if(Ce=GE("meta","content",X).get(z+(C.content||""))){for(Ge=0;Ge<Ce.length;Ge++)if(oe=Ce[Ge],oe.getAttribute("content")===(C.content==null?null:""+C.content)&&oe.getAttribute("name")===(C.name==null?null:C.name)&&oe.getAttribute("property")===(C.property==null?null:C.property)&&oe.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&oe.getAttribute("charset")===(C.charSet==null?null:C.charSet)){Ce.splice(Ge,1);break t}}oe=X.createElement(z),ca(oe,z,C),X.head.appendChild(oe);break;default:throw Error(r(468,z))}oe[xe]=p,er(oe),z=oe}p.stateNode=z}else WE(X,p.type,p.stateNode);else p.stateNode=tw(X,z,p.memoizedProps);else oe!==z?(oe===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):oe.count--,z===null?WE(X,p.type,p.stateNode):tw(X,z,p.memoizedProps)):z===null&&p.stateNode!==null&&v(p,p.memoizedProps,C.memoizedProps)}break;case 27:Fe(_,p),gt(p),z&512&&(Y||C===null||a(C,C.return)),C!==null&&z&4&&v(p,p.memoizedProps,C.memoizedProps);break;case 5:if(Fe(_,p),gt(p),z&512&&(Y||C===null||a(C,C.return)),p.flags&32){X=p.stateNode;try{el(X,"")}catch(hn){Ko(p,p.return,hn)}}z&4&&p.stateNode!=null&&(X=p.memoizedProps,v(p,X,C!==null?C.memoizedProps:X)),z&1024&&(J=!0);break;case 6:if(Fe(_,p),gt(p),z&4){if(p.stateNode===null)throw Error(r(162));z=p.memoizedProps,C=p.stateNode;try{C.nodeValue=z}catch(hn){Ko(p,p.return,hn)}}break;case 3:if(Rx=null,X=Ze,Ze=x_(_.containerInfo),Fe(_,p),Ze=X,gt(p),z&4&&C!==null&&C.memoizedState.isDehydrated)try{Ay(_.containerInfo)}catch(hn){Ko(p,p.return,hn)}J&&(J=!1,ht(p));break;case 4:z=Ze,Ze=x_(p.stateNode.containerInfo),Fe(_,p),gt(p),Ze=z;break;case 12:Fe(_,p),gt(p);break;case 13:Fe(_,p),gt(p),p.child.flags&8192&&p.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(Xi=Ft()),z&4&&(z=p.updateQueue,z!==null&&(p.updateQueue=null,Ue(p,z)));break;case 22:X=p.memoizedState!==null;var mt=C!==null&&C.memoizedState!==null,en=H,Dn=Y;if(H=en||X,Y=Dn||mt,Fe(_,p),Y=Dn,H=en,gt(p),z&8192)e:for(_=p.stateNode,_._visibility=X?_._visibility&-2:_._visibility|1,X&&(C===null||mt||H||Y||Dt(p)),C=null,_=p;;){if(_.tag===5||_.tag===26){if(C===null){mt=C=_;try{if(oe=mt.stateNode,X)Ce=oe.style,typeof Ce.setProperty=="function"?Ce.setProperty("display","none","important"):Ce.display="none";else{Ge=mt.stateNode;var qn=mt.memoizedProps.style,cn=qn!=null&&qn.hasOwnProperty("display")?qn.display:null;Ge.style.display=cn==null||typeof cn=="boolean"?"":(""+cn).trim()}}catch(hn){Ko(mt,mt.return,hn)}}}else if(_.tag===6){if(C===null){mt=_;try{mt.stateNode.nodeValue=X?"":mt.memoizedProps}catch(hn){Ko(mt,mt.return,hn)}}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===p)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break e;for(;_.sibling===null;){if(_.return===null||_.return===p)break e;C===_&&(C=null),_=_.return}C===_&&(C=null),_.sibling.return=_.return,_=_.sibling}z&4&&(z=p.updateQueue,z!==null&&(C=z.retryQueue,C!==null&&(z.retryQueue=null,Ue(p,C))));break;case 19:Fe(_,p),gt(p),z&4&&(z=p.updateQueue,z!==null&&(p.updateQueue=null,Ue(p,z)));break;case 30:break;case 21:break;default:Fe(_,p),gt(p)}}function gt(p){var _=p.flags;if(_&2){try{for(var C,z=p.return;z!==null;){if(S(z)){C=z;break}z=z.return}if(C==null)throw Error(r(160));switch(C.tag){case 27:var X=C.stateNode,oe=E(p);O(p,oe,X);break;case 5:var Ce=C.stateNode;C.flags&32&&(el(Ce,""),C.flags&=-33);var Ge=E(p);O(p,Ge,Ce);break;case 3:case 4:var mt=C.stateNode.containerInfo,en=E(p);R(p,en,mt);break;default:throw Error(r(161))}}catch(Dn){Ko(p,p.return,Dn)}p.flags&=-3}_&4096&&(p.flags&=-4097)}function ht(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var _=p;ht(_),_.tag===5&&_.flags&1024&&_.stateNode.reset(),p=p.sibling}}function kt(p,_){if(_.subtreeFlags&8772)for(_=_.child;_!==null;)de(p,_.alternate,_),_=_.sibling}function Dt(p){for(p=p.child;p!==null;){var _=p;switch(_.tag){case 0:case 11:case 14:case 15:Zs(4,_,_.return),Dt(_);break;case 1:a(_,_.return);var C=_.stateNode;typeof C.componentWillUnmount=="function"&&Vd(_,_.return,C),Dt(_);break;case 27:cg(_.stateNode);case 26:case 5:a(_,_.return),Dt(_);break;case 22:_.memoizedState===null&&Dt(_);break;case 30:Dt(_);break;default:Dt(_)}p=p.sibling}}function tn(p,_,C){for(C=C&&(_.subtreeFlags&8772)!==0,_=_.child;_!==null;){var z=_.alternate,X=p,oe=_,Ce=oe.flags;switch(oe.tag){case 0:case 11:case 15:tn(X,oe,C),Wa(4,oe);break;case 1:if(tn(X,oe,C),z=oe,X=z.stateNode,typeof X.componentDidMount=="function")try{X.componentDidMount()}catch(en){Ko(z,z.return,en)}if(z=oe,X=z.updateQueue,X!==null){var Ge=z.stateNode;try{var mt=X.shared.hiddenCallbacks;if(mt!==null)for(X.shared.hiddenCallbacks=null,X=0;X<mt.length;X++)Lm(mt[X],Ge)}catch(en){Ko(z,z.return,en)}}C&&Ce&64&&$u(oe),y(oe,oe.return);break;case 27:B(oe);case 26:case 5:tn(X,oe,C),C&&z===null&&Ce&4&&d(oe),y(oe,oe.return);break;case 12:tn(X,oe,C);break;case 13:tn(X,oe,C),C&&Ce&4&&Ye(X,oe);break;case 22:oe.memoizedState===null&&tn(X,oe,C),y(oe,oe.return);break;case 30:break;default:tn(X,oe,C)}_=_.sibling}}function dt(p,_){var C=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),p=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(p=_.memoizedState.cachePool.pool),p!==C&&(p!=null&&p.refCount++,C!=null&&_d(C))}function _t(p,_){p=null,_.alternate!==null&&(p=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==p&&(_.refCount++,p!=null&&_d(p))}function lt(p,_,C,z){if(_.subtreeFlags&10256)for(_=_.child;_!==null;)Nt(p,_,C,z),_=_.sibling}function Nt(p,_,C,z){var X=_.flags;switch(_.tag){case 0:case 11:case 15:lt(p,_,C,z),X&2048&&Wa(9,_);break;case 1:lt(p,_,C,z);break;case 3:lt(p,_,C,z),X&2048&&(p=null,_.alternate!==null&&(p=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==p&&(_.refCount++,p!=null&&_d(p)));break;case 12:if(X&2048){lt(p,_,C,z),p=_.stateNode;try{var oe=_.memoizedProps,Ce=oe.id,Ge=oe.onPostCommit;typeof Ge=="function"&&Ge(Ce,_.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(mt){Ko(_,_.return,mt)}}else lt(p,_,C,z);break;case 13:lt(p,_,C,z);break;case 23:break;case 22:oe=_.stateNode,Ce=_.alternate,_.memoizedState!==null?oe._visibility&2?lt(p,_,C,z):Ht(p,_):oe._visibility&2?lt(p,_,C,z):(oe._visibility|=2,xt(p,_,C,z,(_.subtreeFlags&10256)!==0)),X&2048&&dt(Ce,_);break;case 24:lt(p,_,C,z),X&2048&&_t(_.alternate,_);break;default:lt(p,_,C,z)}}function xt(p,_,C,z,X){for(X=X&&(_.subtreeFlags&10256)!==0,_=_.child;_!==null;){var oe=p,Ce=_,Ge=C,mt=z,en=Ce.flags;switch(Ce.tag){case 0:case 11:case 15:xt(oe,Ce,Ge,mt,X),Wa(8,Ce);break;case 23:break;case 22:var Dn=Ce.stateNode;Ce.memoizedState!==null?Dn._visibility&2?xt(oe,Ce,Ge,mt,X):Ht(oe,Ce):(Dn._visibility|=2,xt(oe,Ce,Ge,mt,X)),X&&en&2048&&dt(Ce.alternate,Ce);break;case 24:xt(oe,Ce,Ge,mt,X),X&&en&2048&&_t(Ce.alternate,Ce);break;default:xt(oe,Ce,Ge,mt,X)}_=_.sibling}}function Ht(p,_){if(_.subtreeFlags&10256)for(_=_.child;_!==null;){var C=p,z=_,X=z.flags;switch(z.tag){case 22:Ht(C,z),X&2048&&dt(z.alternate,z);break;case 24:Ht(C,z),X&2048&&_t(z.alternate,z);break;default:Ht(C,z)}_=_.sibling}}var Lt=8192;function Gt(p){if(p.subtreeFlags&Lt)for(p=p.child;p!==null;)Zt(p),p=p.sibling}function Zt(p){switch(p.tag){case 26:Gt(p),p.flags&Lt&&p.memoizedState!==null&&YE(Ze,p.memoizedState,p.memoizedProps);break;case 5:Gt(p);break;case 3:case 4:var _=Ze;Ze=x_(p.stateNode.containerInfo),Gt(p),Ze=_;break;case 22:p.memoizedState===null&&(_=p.alternate,_!==null&&_.memoizedState!==null?(_=Lt,Lt=16777216,Gt(p),Lt=_):Gt(p));break;default:Gt(p)}}function Fn(p){var _=p.alternate;if(_!==null&&(p=_.child,p!==null)){_.child=null;do _=p.sibling,p.sibling=null,p=_;while(p!==null)}}function $n(p){var _=p.deletions;if((p.flags&16)!==0){if(_!==null)for(var C=0;C<_.length;C++){var z=_[C];ie=z,jn(z,p)}Fn(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)On(p),p=p.sibling}function On(p){switch(p.tag){case 0:case 11:case 15:$n(p),p.flags&2048&&Zs(9,p,p.return);break;case 3:$n(p);break;case 12:$n(p);break;case 22:var _=p.stateNode;p.memoizedState!==null&&_._visibility&2&&(p.return===null||p.return.tag!==13)?(_._visibility&=-3,Zn(p)):$n(p);break;default:$n(p)}}function Zn(p){var _=p.deletions;if((p.flags&16)!==0){if(_!==null)for(var C=0;C<_.length;C++){var z=_[C];ie=z,jn(z,p)}Fn(p)}for(p=p.child;p!==null;){switch(_=p,_.tag){case 0:case 11:case 15:Zs(8,_,_.return),Zn(_);break;case 22:C=_.stateNode,C._visibility&2&&(C._visibility&=-3,Zn(_));break;default:Zn(_)}p=p.sibling}}function jn(p,_){for(;ie!==null;){var C=ie;switch(C.tag){case 0:case 11:case 15:Zs(8,C,_);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var z=C.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:_d(C.memoizedState.cache)}if(z=C.child,z!==null)z.return=C,ie=z;else e:for(C=p;ie!==null;){z=ie;var X=z.sibling,oe=z.return;if(ge(z),z===C){ie=null;break e}if(X!==null){X.return=oe,ie=X;break e}ie=oe}}}var ur={getCacheForType:function(p){var _=vs(ds),C=_.data.get(p);return C===void 0&&(C=p(),_.data.set(p,C)),C}},Cr=typeof WeakMap=="function"?WeakMap:Map,cr=0,Lr=null,vr=null,sr=0,Yr=0,Si=null,Ar=!1,Xr=!1,ci=!1,di=0,Ti=0,Wi=0,wo=0,Yi=0,Sr=0,Ni=0,ii=null,pi=null,mi=!1,Xi=0,ts=1/0,ji=null,Bo=null,ki=0,$o=null,Ra=null,hl=0,Da=0,fl=null,Vc=null,pl=0,Pl=null;function Ks(){if((cr&2)!==0&&sr!==0)return sr&-sr;if(Se.T!==null){var p=xd;return p!==0?p:U1()}return De()}function Ud(){Sr===0&&(Sr=(sr&536870912)===0||co?Di():536870912);var p=dl.current;return p!==null&&(p.flags|=32),Sr}function Pa(p,_,C){(p===Lr&&(Yr===2||Yr===9)||p.cancelPendingCommit!==null)&&(ng(p,0),Oi(p,sr,Sr,!1)),Ro(p,C),((cr&2)===0||p!==Lr)&&(p===Lr&&((cr&2)===0&&(wo|=C),Ti===4&&Oi(p,sr,Sr,!1)),Wu(p))}function Qm(p,_,C){if((cr&6)!==0)throw Error(r(327));var z=!C&&(_&124)===0&&(_&p.expiredLanes)===0||wr(p,_),X=z?lx(p,_):ax(p,_,!0),oe=z;do{if(X===0){Xr&&!z&&Oi(p,_,0,!1);break}else{if(C=p.current.alternate,oe&&!eg(C)){X=ax(p,_,!1),oe=!1;continue}if(X===2){if(oe=_,p.errorRecoveryDisabledLanes&oe)var Ce=0;else Ce=p.pendingLanes&-536870913,Ce=Ce!==0?Ce:Ce&536870912?536870912:0;if(Ce!==0){_=Ce;e:{var Ge=p;X=ii;var mt=Ge.current.memoizedState.isDehydrated;if(mt&&(ng(Ge,Ce).flags|=256),Ce=ax(Ge,Ce,!1),Ce!==2){if(ci&&!mt){Ge.errorRecoveryDisabledLanes|=oe,wo|=oe,X=4;break e}oe=pi,pi=X,oe!==null&&(pi===null?pi=oe:pi.push.apply(pi,oe))}X=Ce}if(oe=!1,X!==2)continue}}if(X===1){ng(p,0),Oi(p,_,0,!0);break}e:{switch(z=p,oe=X,oe){case 0:case 1:throw Error(r(345));case 4:if((_&4194048)!==_)break;case 6:Oi(z,_,Sr,!Ar);break e;case 2:pi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((_&62914560)===_&&(X=Xi+300-Ft(),10<X)){if(Oi(z,_,Sr,!Ar),Wr(z,0,!0)!==0)break e;z.timeoutHandle=Tx(Jm.bind(null,z,C,pi,ji,mi,_,Sr,wo,Ni,Ar,oe,2,-0,0),X);break e}Jm(z,C,pi,ji,mi,_,Sr,wo,Ni,Ar,oe,0,-0,0)}}break}while(!0);Wu(p)}function Jm(p,_,C,z,X,oe,Ce,Ge,mt,en,Dn,qn,cn,hn){if(p.timeoutHandle=-1,qn=_.subtreeFlags,(qn&8192||(qn&16785408)===16785408)&&(wy={stylesheets:null,count:0,unsuspend:Dx},Zt(_),qn=iw(),qn!==null)){p.cancelPendingCommit=qn(ux.bind(null,p,_,oe,C,z,X,Ce,Ge,mt,Dn,1,cn,hn)),Oi(p,oe,Ce,!en);return}ux(p,_,oe,C,z,X,Ce,Ge,mt)}function eg(p){for(var _=p;;){var C=_.tag;if((C===0||C===11||C===15)&&_.flags&16384&&(C=_.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var z=0;z<C.length;z++){var X=C[z],oe=X.getSnapshot;X=X.value;try{if(!Sl(oe(),X))return!1}catch{return!1}}if(C=_.child,_.subtreeFlags&16384&&C!==null)C.return=_,_=C;else{if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Oi(p,_,C,z){_&=~Yi,_&=~wo,p.suspendedLanes|=_,p.pingedLanes&=~_,z&&(p.warmLanes|=_),z=p.expirationTimes;for(var X=_;0<X;){var oe=31-Xn(X),Ce=1<<oe;z[oe]=-1,X&=~Ce}C!==0&&oa(p,C,_)}function qu(){return(cr&6)===0?(yy(0),!1):!0}function tg(){if(vr!==null){if(Yr===0)var p=vr.return;else p=vr,ku=Iu=null,jv(p),Ga=null,Al=0,p=vr;for(;p!==null;)au(p.alternate,p),p=p.return;vr=null}}function ng(p,_){var C=p.timeoutHandle;C!==-1&&(p.timeoutHandle=-1,NE(C)),C=p.cancelPendingCommit,C!==null&&(p.cancelPendingCommit=null,C()),tg(),Lr=p,vr=C=Rc(p.current,null),sr=_,Yr=0,Si=null,Ar=!1,Xr=wr(p,_),ci=!1,Ni=Sr=Yi=wo=Wi=Ti=0,pi=ii=null,mi=!1,(_&8)!==0&&(_|=_&32);var z=p.entangledLanes;if(z!==0)for(p=p.entanglements,z&=_;0<z;){var X=31-Xn(z),oe=1<<X;_|=p[X],z&=~oe}return di=_,Mu(),C}function ME(p,_){Mi=null,Se.H=ef,_===Im||_===tp?(_=ty(),Yr=3):_===Q0?(_=ty(),Yr=4):Yr=_===e_?8:_!==null&&typeof _=="object"&&typeof _.then=="function"?6:1,Si=_,vr===null&&(Ti=1,sf(p,Ba(_,p.current)))}function sx(){var p=Se.H;return Se.H=ef,p===null?ef:p}function Hu(){var p=Se.A;return Se.A=ur,p}function Gu(){Ti=4,Ar||(sr&4194048)!==sr&&dl.current!==null||(Xr=!0),(Wi&134217727)===0&&(wo&134217727)===0||Lr===null||Oi(Lr,sr,Sr,!1)}function ax(p,_,C){var z=cr;cr|=2;var X=sx(),oe=Hu();(Lr!==p||sr!==_)&&(ji=null,ng(p,_)),_=!1;var Ce=Ti;e:do try{if(Yr!==0&&vr!==null){var Ge=vr,mt=Si;switch(Yr){case 8:tg(),Ce=6;break e;case 3:case 2:case 9:case 6:dl.current===null&&(_=!0);var en=Yr;if(Yr=0,Si=null,rg(p,Ge,mt,en),C&&Xr){Ce=0;break e}break;default:en=Yr,Yr=0,Si=null,rg(p,Ge,mt,en)}}RE(),Ce=Ti;break}catch(Dn){ME(p,Dn)}while(!0);return _&&p.shellSuspendCounter++,ku=Iu=null,cr=z,Se.H=X,Se.A=oe,vr===null&&(Lr=null,sr=0,Mu()),Ce}function RE(){for(;vr!==null;)my(vr)}function lx(p,_){var C=cr;cr|=2;var z=sx(),X=Hu();Lr!==p||sr!==_?(ji=null,ts=Ft()+500,ng(p,_)):Xr=wr(p,_);e:do try{if(Yr!==0&&vr!==null){_=vr;var oe=Si;t:switch(Yr){case 1:Yr=0,Si=null,rg(p,_,oe,1);break;case 2:case 9:if(Fv(oe)){Yr=0,Si=null,d_(_);break}_=function(){Yr!==2&&Yr!==9||Lr!==p||(Yr=7),Wu(p)},oe.then(_,_);break e;case 3:Yr=7;break e;case 4:Yr=5;break e;case 7:Fv(oe)?(Yr=0,Si=null,d_(_)):(Yr=0,Si=null,rg(p,_,oe,7));break;case 5:var Ce=null;switch(vr.tag){case 26:Ce=vr.memoizedState;case 5:case 27:var Ge=vr;if(!Ce||b_(Ce)){Yr=0,Si=null;var mt=Ge.sibling;if(mt!==null)vr=mt;else{var en=Ge.return;en!==null?(vr=en,ig(en)):vr=null}break t}}Yr=0,Si=null,rg(p,_,oe,5);break;case 6:Yr=0,Si=null,rg(p,_,oe,6);break;case 8:tg(),Ti=6;break e;default:throw Error(r(462))}}k1();break}catch(Dn){ME(p,Dn)}while(!0);return ku=Iu=null,Se.H=z,Se.A=X,cr=C,vr!==null?0:(Lr=null,sr=0,Mu(),Ti)}function k1(){for(;vr!==null&&!_n();)my(vr)}function my(p){var _=ox(p.alternate,p,di);p.memoizedProps=p.pendingProps,_===null?ig(p):vr=_}function d_(p){var _=p,C=_.alternate;switch(_.tag){case 15:case 0:_=ho(C,_,_.pendingProps,_.type,void 0,sr);break;case 11:_=ho(C,_,_.pendingProps,_.type.render,_.ref,sr);break;case 5:jv(_);default:au(C,_),_=vr=go(_,di),_=ox(C,_,di)}p.memoizedProps=p.pendingProps,_===null?ig(p):vr=_}function rg(p,_,C,z){ku=Iu=null,jv(_),Ga=null,Al=0;var X=_.return;try{if(nx(p,X,_,C,sr)){Ti=1,sf(p,Ba(C,p.current)),vr=null;return}}catch(oe){if(X!==null)throw vr=X,oe;Ti=1,sf(p,Ba(C,p.current)),vr=null;return}_.flags&32768?(co||z===1?p=!0:Xr||(sr&536870912)!==0?p=!1:(Ar=p=!0,(z===2||z===9||z===3||z===6)&&(z=dl.current,z!==null&&z.tag===13&&(z.flags|=16384))),cx(_,p)):ig(_)}function ig(p){var _=p;do{if((_.flags&32768)!==0){cx(_,Ar);return}p=_.return;var C=Km(_.alternate,_,di);if(C!==null){vr=C;return}if(_=_.sibling,_!==null){vr=_;return}vr=_=p}while(_!==null);Ti===0&&(Ti=5)}function cx(p,_){do{var C=mp(p.alternate,p);if(C!==null){C.flags&=32767,vr=C;return}if(C=p.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!_&&(p=p.sibling,p!==null)){vr=p;return}vr=p=C}while(p!==null);Ti=6,vr=null}function ux(p,_,C,z,X,oe,Ce,Ge,mt){p.cancelPendingCommit=null;do gy();while(ki!==0);if((cr&6)!==0)throw Error(r(327));if(_!==null){if(_===p.current)throw Error(r(177));if(oe=_.lanes|_.childLanes,oe|=al,bl(p,C,oe,Ce,Ge,mt),p===Lr&&(vr=Lr=null,sr=0),Ra=_,$o=p,hl=C,Da=oe,fl=X,Vc=z,(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,cP(Vn,function(){return F1(),null})):(p.callbackNode=null,p.callbackPriority=0),z=(_.flags&13878)!==0,(_.subtreeFlags&13878)!==0||z){z=Se.T,Se.T=null,X=qe.p,qe.p=2,Ce=cr,cr|=4;try{pe(p,_,C)}finally{cr=Ce,qe.p=X,Se.T=z}}ki=1,O1(),L1(),af()}}function O1(){if(ki===1){ki=0;var p=$o,_=Ra,C=(_.flags&13878)!==0;if((_.subtreeFlags&13878)!==0||C){C=Se.T,Se.T=null;var z=qe.p;qe.p=2;var X=cr;cr|=4;try{et(_,p);var oe=xx,Ce=Au(p.containerInfo),Ge=oe.focusedElem,mt=oe.selectionRange;if(Ce!==Ge&&Ge&&Ge.ownerDocument&&Gg(Ge.ownerDocument.documentElement,Ge)){if(mt!==null&&Mv(Ge)){var en=mt.start,Dn=mt.end;if(Dn===void 0&&(Dn=en),"selectionStart"in Ge)Ge.selectionStart=en,Ge.selectionEnd=Math.min(Dn,Ge.value.length);else{var qn=Ge.ownerDocument||document,cn=qn&&qn.defaultView||window;if(cn.getSelection){var hn=cn.getSelection(),Ei=Ge.textContent.length,gi=Math.min(mt.start,Ei),Ho=mt.end===void 0?gi:Math.min(mt.end,Ei);!hn.extend&&gi>Ho&&(Ce=Ho,Ho=gi,gi=Ce);var jt=Cc(Ge,gi),Mt=Cc(Ge,Ho);if(jt&&Mt&&(hn.rangeCount!==1||hn.anchorNode!==jt.node||hn.anchorOffset!==jt.offset||hn.focusNode!==Mt.node||hn.focusOffset!==Mt.offset)){var Xt=qn.createRange();Xt.setStart(jt.node,jt.offset),hn.removeAllRanges(),gi>Ho?(hn.addRange(Xt),hn.extend(Mt.node,Mt.offset)):(Xt.setEnd(Mt.node,Mt.offset),hn.addRange(Xt))}}}}for(qn=[],hn=Ge;hn=hn.parentNode;)hn.nodeType===1&&qn.push({element:hn,left:hn.scrollLeft,top:hn.scrollTop});for(typeof Ge.focus=="function"&&Ge.focus(),Ge=0;Ge<qn.length;Ge++){var Ln=qn[Ge];Ln.element.scrollLeft=Ln.left,Ln.element.scrollTop=Ln.top}}kx=!!q1,xx=q1=null}finally{cr=X,qe.p=z,Se.T=C}}p.current=_,ki=2}}function L1(){if(ki===2){ki=0;var p=$o,_=Ra,C=(_.flags&8772)!==0;if((_.subtreeFlags&8772)!==0||C){C=Se.T,Se.T=null;var z=qe.p;qe.p=2;var X=cr;cr|=4;try{de(p,_.alternate,_)}finally{cr=X,qe.p=z,Se.T=C}}ki=3}}function af(){if(ki===4||ki===3){ki=0,an();var p=$o,_=Ra,C=hl,z=Vc;(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?ki=5:(ki=0,Ra=$o=null,z1(p,p.pendingLanes));var X=p.pendingLanes;if(X===0&&(Bo=null),Pr(C),_=_.stateNode,Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(zn,_,void 0,(_.current.flags&128)===128)}catch{}if(z!==null){_=Se.T,X=qe.p,qe.p=2,Se.T=null;try{for(var oe=p.onRecoverableError,Ce=0;Ce<z.length;Ce++){var Ge=z[Ce];oe(Ge.value,{componentStack:Ge.stack})}}finally{Se.T=_,qe.p=X}}(hl&3)!==0&&gy(),Wu(p),X=p.pendingLanes,(C&4194090)!==0&&(X&42)!==0?p===Pl?pl++:(pl=0,Pl=p):pl=0,yy(0)}}function z1(p,_){(p.pooledCacheLanes&=_)===0&&(_=p.pooledCache,_!=null&&(p.pooledCache=null,_d(_)))}function gy(p){return O1(),L1(),af(),F1()}function F1(){if(ki!==5)return!1;var p=$o,_=Da;Da=0;var C=Pr(hl),z=Se.T,X=qe.p;try{qe.p=32>C?32:C,Se.T=null,C=fl,fl=null;var oe=$o,Ce=hl;if(ki=0,Ra=$o=null,hl=0,(cr&6)!==0)throw Error(r(331));var Ge=cr;if(cr|=4,On(oe.current),Nt(oe,oe.current,Ce,C),cr=Ge,yy(0,!1),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(zn,oe)}catch{}return!0}finally{qe.p=X,Se.T=z,z1(p,_)}}function DE(p,_,C){_=Ba(C,_),_=dp(p.stateNode,_,2),p=Oc(p,_,2),p!==null&&(Ro(p,2),Wu(p))}function Ko(p,_,C){if(p.tag===3)DE(p,p,C);else for(;_!==null;){if(_.tag===3){DE(_,p,C);break}else if(_.tag===1){var z=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Bo===null||!Bo.has(z))){p=Ba(C,p),C=Qv(2),z=Oc(_,C,2),z!==null&&(Jv(C,z,_,p),Ro(z,2),Wu(z));break}}_=_.return}}function B1(p,_,C){var z=p.pingCache;if(z===null){z=p.pingCache=new Cr;var X=new Set;z.set(_,X)}else X=z.get(_),X===void 0&&(X=new Set,z.set(_,X));X.has(C)||(ci=!0,X.add(C),p=PE.bind(null,p,_,C),_.then(p,p))}function PE(p,_,C){var z=p.pingCache;z!==null&&z.delete(_),p.pingedLanes|=p.suspendedLanes&C,p.warmLanes&=~C,Lr===p&&(sr&C)===C&&(Ti===4||Ti===3&&(sr&62914560)===sr&&300>Ft()-Xi?(cr&2)===0&&ng(p,0):Yi|=C,Ni===sr&&(Ni=0)),Wu(p)}function N1(p,_){_===0&&(_=Wo()),p=Yl(p,_),p!==null&&(Ro(p,_),Wu(p))}function lP(p){var _=p.memoizedState,C=0;_!==null&&(C=_.retryLane),N1(p,C)}function IE(p,_){var C=0;switch(p.tag){case 13:var z=p.stateNode,X=p.memoizedState;X!==null&&(C=X.retryLane);break;case 19:z=p.stateNode;break;case 22:z=p.stateNode._retryCache;break;default:throw Error(r(314))}z!==null&&z.delete(_),N1(p,C)}function cP(p,_){return Bt(p,_)}var dx=null,og=null,hx=!1,h_=!1,fx=!1,gp=0;function Wu(p){p!==og&&p.next===null&&(og===null?dx=og=p:og=og.next=p),h_=!0,hx||(hx=!0,uP())}function yy(p,_){if(!fx&&h_){fx=!0;do for(var C=!1,z=dx;z!==null;){if(p!==0){var X=z.pendingLanes;if(X===0)var oe=0;else{var Ce=z.suspendedLanes,Ge=z.pingedLanes;oe=(1<<31-Xn(42|p)+1)-1,oe&=X&~(Ce&~Ge),oe=oe&201326741?oe&201326741|1:oe?oe|2:0}oe!==0&&(C=!0,vy(z,oe))}else oe=sr,oe=Wr(z,z===Lr?oe:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),(oe&3)===0||wr(z,oe)||(C=!0,vy(z,oe));z=z.next}while(C);fx=!1}}function j1(){lf()}function lf(){h_=hx=!1;var p=0;gp!==0&&(BE()&&(p=gp),gp=0);for(var _=Ft(),C=null,z=dx;z!==null;){var X=z.next,oe=Os(z,_);oe===0?(z.next=null,C===null?dx=X:C.next=X,X===null&&(og=C)):(C=z,(p!==0||(oe&3)!==0)&&(h_=!0)),z=X}yy(p)}function Os(p,_){for(var C=p.suspendedLanes,z=p.pingedLanes,X=p.expirationTimes,oe=p.pendingLanes&-62914561;0<oe;){var Ce=31-Xn(oe),Ge=1<<Ce,mt=X[Ce];mt===-1?((Ge&C)===0||(Ge&z)!==0)&&(X[Ce]=Rr(Ge,_)):mt<=_&&(p.expiredLanes|=Ge),oe&=~Ge}if(_=Lr,C=sr,C=Wr(p,p===_?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),z=p.callbackNode,C===0||p===_&&(Yr===2||Yr===9)||p.cancelPendingCommit!==null)return z!==null&&z!==null&&Kt(z),p.callbackNode=null,p.callbackPriority=0;if((C&3)===0||wr(p,C)){if(_=C&-C,_===p.callbackPriority)return _;switch(z!==null&&Kt(z),Pr(C)){case 2:case 8:C=wn;break;case 32:C=Vn;break;case 268435456:C=gn;break;default:C=Vn}return z=V1.bind(null,p),C=Bt(C,z),p.callbackPriority=_,p.callbackNode=C,_}return z!==null&&z!==null&&Kt(z),p.callbackPriority=2,p.callbackNode=null,2}function V1(p,_){if(ki!==0&&ki!==5)return p.callbackNode=null,p.callbackPriority=0,null;var C=p.callbackNode;if(gy()&&p.callbackNode!==C)return null;var z=sr;return z=Wr(p,p===Lr?z:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),z===0?null:(Qm(p,z,_),Os(p,Ft()),p.callbackNode!=null&&p.callbackNode===C?V1.bind(null,p):null)}function vy(p,_){if(gy())return null;Qm(p,_,!0)}function uP(){Ex(function(){(cr&6)!==0?Bt(Yn,j1):lf()})}function U1(){return gp===0&&(gp=Di()),gp}function kE(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:dd(""+p)}function OE(p,_){var C=_.ownerDocument.createElement("input");return C.name=_.name,C.value=_.value,p.id&&C.setAttribute("form",p.id),_.parentNode.insertBefore(C,_),p=new FormData(p),C.parentNode.removeChild(C),p}function f_(p,_,C,z,X){if(_==="submit"&&C&&C.stateNode===X){var oe=kE((X[ke]||null).action),Ce=z.submitter;Ce&&(_=(_=Ce[ke]||null)?kE(_.formAction):Ce.getAttribute("formAction"),_!==null&&(oe=_,Ce=null));var Ge=new wh("action","action",null,z,X);p.push({event:Ge,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(gp!==0){var mt=Ce?OE(X,Ce):new FormData(X);Zh(C,{pending:!0,data:mt,method:X.method,action:oe},null,mt)}}else typeof oe=="function"&&(Ge.preventDefault(),mt=Ce?OE(X,Ce):new FormData(X),Zh(C,{pending:!0,data:mt,method:X.method,action:oe},oe,mt))},currentTarget:X}]})}}for(var px=0;px<vn.length;px++){var cf=vn[px],p_=cf.toLowerCase(),dP=cf[0].toUpperCase()+cf.slice(1);Cl(p_,"on"+dP)}Cl(Xg,"onAnimationEnd"),Cl(El,"onAnimationIteration"),Cl(Lh,"onAnimationStart"),Cl("dblclick","onDoubleClick"),Cl("focusin","onFocus"),Cl("focusout","onBlur"),Cl(qf,"onTransitionRun"),Cl(Dv,"onTransitionStart"),Cl(Zg,"onTransitionCancel"),Cl(ol,"onTransitionEnd"),Ir("onMouseEnter",["mouseout","mouseover"]),Ir("onMouseLeave",["mouseout","mouseover"]),Ir("onPointerEnter",["pointerout","pointerover"]),Ir("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var m_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(m_));function LE(p,_){_=(_&4)!==0;for(var C=0;C<p.length;C++){var z=p[C],X=z.event;z=z.listeners;e:{var oe=void 0;if(_)for(var Ce=z.length-1;0<=Ce;Ce--){var Ge=z[Ce],mt=Ge.instance,en=Ge.currentTarget;if(Ge=Ge.listener,mt!==oe&&X.isPropagationStopped())break e;oe=Ge,X.currentTarget=en;try{oe(X)}catch(Dn){Fd(Dn)}X.currentTarget=null,oe=mt}else for(Ce=0;Ce<z.length;Ce++){if(Ge=z[Ce],mt=Ge.instance,en=Ge.currentTarget,Ge=Ge.listener,mt!==oe&&X.isPropagationStopped())break e;oe=Ge,X.currentTarget=en;try{oe(X)}catch(Dn){Fd(Dn)}X.currentTarget=null,oe=mt}}}}function oo(p,_){var C=_[Xe];C===void 0&&(C=_[Xe]=new Set);var z=p+"__bubble";C.has(z)||(zE(_,p,2,!1),C.add(z))}function $1(p,_,C){var z=0;_&&(z|=4),zE(C,p,z,_)}var mx="_reactListening"+Math.random().toString(36).slice(2);function g_(p){if(!p[mx]){p[mx]=!0,tr.forEach(function(C){C!=="selectionchange"&&(hP.has(C)||$1(C,!1,p),$1(C,!0,p))});var _=p.nodeType===9?p:p.ownerDocument;_===null||_[mx]||(_[mx]=!0,$1("selectionchange",!1,_))}}function zE(p,_,C,z){switch(Cy(_)){case 2:var X=yP;break;case 8:X=QE;break;default:X=qd}C=X.bind(null,_,C,p),X=void 0,!hd||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(X=!0),z?X!==void 0?p.addEventListener(_,C,{capture:!0,passive:X}):p.addEventListener(_,C,!0):X!==void 0?p.addEventListener(_,C,{passive:X}):p.addEventListener(_,C,!1)}function gx(p,_,C,z,X){var oe=z;if((_&1)===0&&(_&2)===0&&z!==null)e:for(;;){if(z===null)return;var Ce=z.tag;if(Ce===3||Ce===4){var Ge=z.stateNode.containerInfo;if(Ge===X)break;if(Ce===4)for(Ce=z.return;Ce!==null;){var mt=Ce.tag;if((mt===3||mt===4)&&Ce.stateNode.containerInfo===X)return;Ce=Ce.return}for(;Ge!==null;){if(Ce=zt(Ge),Ce===null)return;if(mt=Ce.tag,mt===5||mt===6||mt===26||mt===27){z=oe=Ce;continue e}Ge=Ge.parentNode}}z=z.return}cm(function(){var en=oe,Dn=Bf(C),qn=[];e:{var cn=wm.get(p);if(cn!==void 0){var hn=wh,Ei=p;switch(p){case"keypress":if(dm(C)===0)break e;case"keydown":case"keyup":hn=Ai;break;case"focusin":Ei="focus",hn=Ch;break;case"focusout":Ei="blur",hn=Ch;break;case"beforeblur":case"afterblur":hn=Ch;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":hn=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":hn=Tv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":hn=Mh;break;case Xg:case El:case Lh:hn=X0;break;case ol:hn=gm;break;case"scroll":case"scrollend":hn=nl;break;case"wheel":hn=Jo;break;case"copy":case"cut":case"paste":hn=Z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":hn=Eu;break;case"toggle":case"beforetoggle":hn=ym}var gi=(_&4)!==0,Ho=!gi&&(p==="scroll"||p==="scrollend"),jt=gi?cn!==null?cn+"Capture":null:cn;gi=[];for(var Mt=en,Xt;Mt!==null;){var Ln=Mt;if(Xt=Ln.stateNode,Ln=Ln.tag,Ln!==5&&Ln!==26&&Ln!==27||Xt===null||jt===null||(Ln=si(Mt,jt),Ln!=null&&gi.push(uf(Mt,Ln,Xt))),Ho)break;Mt=Mt.return}0<gi.length&&(cn=new hn(cn,Ei,null,C,Dn),qn.push({event:cn,listeners:gi}))}}if((_&7)===0){e:{if(cn=p==="mouseover"||p==="pointerover",hn=p==="mouseout"||p==="pointerout",cn&&C!==Gs&&(Ei=C.relatedTarget||C.fromElement)&&(zt(Ei)||Ei[Ne]))break e;if((hn||cn)&&(cn=Dn.window===Dn?Dn:(cn=Dn.ownerDocument)?cn.defaultView||cn.parentWindow:window,hn?(Ei=C.relatedTarget||C.toElement,hn=en,Ei=Ei?zt(Ei):null,Ei!==null&&(Ho=c(Ei),gi=Ei.tag,Ei!==Ho||gi!==5&&gi!==27&&gi!==6)&&(Ei=null)):(hn=null,Ei=en),hn!==Ei)){if(gi=pd,Ln="onMouseLeave",jt="onMouseEnter",Mt="mouse",(p==="pointerout"||p==="pointerover")&&(gi=Eu,Ln="onPointerLeave",jt="onPointerEnter",Mt="pointer"),Ho=hn==null?cn:xn(hn),Xt=Ei==null?cn:xn(Ei),cn=new gi(Ln,Mt+"leave",hn,C,Dn),cn.target=Ho,cn.relatedTarget=Xt,Ln=null,zt(Dn)===en&&(gi=new gi(jt,Mt+"enter",Ei,C,Dn),gi.target=Xt,gi.relatedTarget=Ho,Ln=gi),Ho=Ln,hn&&Ei)t:{for(gi=hn,jt=Ei,Mt=0,Xt=gi;Xt;Xt=qo(Xt))Mt++;for(Xt=0,Ln=jt;Ln;Ln=qo(Ln))Xt++;for(;0<Mt-Xt;)gi=qo(gi),Mt--;for(;0<Xt-Mt;)jt=qo(jt),Xt--;for(;Mt--;){if(gi===jt||jt!==null&&gi===jt.alternate)break t;gi=qo(gi),jt=qo(jt)}gi=null}else gi=null;hn!==null&&sg(qn,cn,hn,gi,!1),Ei!==null&&Ho!==null&&sg(qn,Ho,Ei,gi,!0)}}e:{if(cn=en?xn(en):window,hn=cn.nodeName&&cn.nodeName.toLowerCase(),hn==="select"||hn==="input"&&cn.type==="file")var Ur=Gl;else if(Vf(cn))if(Av)Ur=_m;else{Ur=Ih;var Zi=Ph}else hn=cn.nodeName,!hn||hn.toLowerCase()!=="input"||cn.type!=="checkbox"&&cn.type!=="radio"?en&&wc(en.elementType)&&(Ur=Gl):Ur=Ca;if(Ur&&(Ur=Ur(p,en))){yr(qn,Ur,C,Dn);break e}Zi&&Zi(p,cn,en),p==="focusout"&&en&&cn.type==="number"&&en.memoizedProps.value!=null&&ba(cn,"number",cn.value)}switch(Zi=en?xn(en):window,p){case"focusin":(Vf(Zi)||Zi.contentEditable==="true")&&(kh=Zi,Wg=en,bm=null);break;case"focusout":bm=Wg=kh=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,Rv(qn,C,Dn);break;case"selectionchange":if(P1)break;case"keydown":case"keyup":Rv(qn,C,Dn)}var Jr;if(gd)e:{switch(p){case"compositionstart":var yi="onCompositionStart";break e;case"compositionend":yi="onCompositionEnd";break e;case"compositionupdate":yi="onCompositionUpdate";break e}yi=void 0}else Lo?Cv(p,C)&&(yi="onCompositionEnd"):p==="keydown"&&C.keyCode===229&&(yi="onCompositionStart");yi&&(sa&&C.locale!=="ko"&&(Lo||yi!=="onCompositionStart"?yi==="onCompositionEnd"&&Lo&&(Jr=bh()):(Su=Dn,Tu="value"in Su?Su.value:Su.textContent,Lo=!0)),Zi=yx(en,yi),0<Zi.length&&(yi=new fm(yi,p,null,C,Dn),qn.push({event:yi,listeners:Zi}),Jr?yi.data=Jr:(Jr=Rh(C),Jr!==null&&(yi.data=Jr)))),(Jr=qg?Ea(p,C):Nr(p,C))&&(yi=yx(en,"onBeforeInput"),0<yi.length&&(Zi=new fm("onBeforeInput","beforeinput",null,C,Dn),qn.push({event:Zi,listeners:yi}),Zi.data=Jr)),f_(qn,p,en,C,Dn)}LE(qn,_)})}function uf(p,_,C){return{instance:p,listener:_,currentTarget:C}}function yx(p,_){for(var C=_+"Capture",z=[];p!==null;){var X=p,oe=X.stateNode;if(X=X.tag,X!==5&&X!==26&&X!==27||oe===null||(X=si(p,C),X!=null&&z.unshift(uf(p,X,oe)),X=si(p,_),X!=null&&z.push(uf(p,X,oe))),p.tag===3)return z;p=p.return}return[]}function qo(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function sg(p,_,C,z,X){for(var oe=_._reactName,Ce=[];C!==null&&C!==z;){var Ge=C,mt=Ge.alternate,en=Ge.stateNode;if(Ge=Ge.tag,mt!==null&&mt===z)break;Ge!==5&&Ge!==26&&Ge!==27||en===null||(mt=en,X?(en=si(C,oe),en!=null&&Ce.unshift(uf(C,en,mt))):X||(en=si(C,oe),en!=null&&Ce.push(uf(C,en,mt)))),C=C.return}Ce.length!==0&&p.push({event:_,listeners:Ce})}var FE=/\r\n?/g,vx=/\u0000|\uFFFD/g;function y_(p){return(typeof p=="string"?p:""+p).replace(FE,`
`).replace(vx,"")}function _y(p,_){return _=y_(_),y_(p)===_}function v_(){}function No(p,_,C,z,X,oe){switch(C){case"children":typeof z=="string"?_==="body"||_==="textarea"&&z===""||el(p,z):(typeof z=="number"||typeof z=="bigint")&&_!=="body"&&el(p,""+z);break;case"className":bo(p,"class",z);break;case"tabIndex":bo(p,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":bo(p,C,z);break;case"style":Vg(p,z,oe);break;case"data":if(_!=="object"){bo(p,"data",z);break}case"src":case"href":if(z===""&&(_!=="a"||C!=="href")){p.removeAttribute(C);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){p.removeAttribute(C);break}z=dd(""+z),p.setAttribute(C,z);break;case"action":case"formAction":if(typeof z=="function"){p.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof oe=="function"&&(C==="formAction"?(_!=="input"&&No(p,_,"name",X.name,X,null),No(p,_,"formEncType",X.formEncType,X,null),No(p,_,"formMethod",X.formMethod,X,null),No(p,_,"formTarget",X.formTarget,X,null)):(No(p,_,"encType",X.encType,X,null),No(p,_,"method",X.method,X,null),No(p,_,"target",X.target,X,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){p.removeAttribute(C);break}z=dd(""+z),p.setAttribute(C,z);break;case"onClick":z!=null&&(p.onclick=v_);break;case"onScroll":z!=null&&oo("scroll",p);break;case"onScrollEnd":z!=null&&oo("scrollend",p);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(r(61));if(C=z.__html,C!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=C}}break;case"multiple":p.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":p.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){p.removeAttribute("xlink:href");break}C=dd(""+z),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?p.setAttribute(C,""+z):p.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?p.setAttribute(C,""):p.removeAttribute(C);break;case"capture":case"download":z===!0?p.setAttribute(C,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?p.setAttribute(C,z):p.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?p.setAttribute(C,z):p.removeAttribute(C);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?p.removeAttribute(C):p.setAttribute(C,z);break;case"popover":oo("beforetoggle",p),oo("toggle",p),$i(p,"popover",z);break;case"xlinkActuate":Zr(p,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":Zr(p,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":Zr(p,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":Zr(p,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":Zr(p,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":Zr(p,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":Zr(p,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":Zr(p,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":Zr(p,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":$i(p,"is",z);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=lm.get(C)||C,$i(p,C,z))}}function ag(p,_,C,z,X,oe){switch(C){case"style":Vg(p,z,oe);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(r(61));if(C=z.__html,C!=null){if(X.children!=null)throw Error(r(60));p.innerHTML=C}}break;case"children":typeof z=="string"?el(p,z):(typeof z=="number"||typeof z=="bigint")&&el(p,""+z);break;case"onScroll":z!=null&&oo("scroll",p);break;case"onScrollEnd":z!=null&&oo("scrollend",p);break;case"onClick":z!=null&&(p.onclick=v_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kr.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(X=C.endsWith("Capture"),_=C.slice(2,X?C.length-7:void 0),oe=p[ke]||null,oe=oe!=null?oe[C]:null,typeof oe=="function"&&p.removeEventListener(_,oe,X),typeof z=="function")){typeof oe!="function"&&oe!==null&&(C in p?p[C]=null:p.hasAttribute(C)&&p.removeAttribute(C)),p.addEventListener(_,z,X);break e}C in p?p[C]=z:z===!0?p.setAttribute(C,""):$i(p,C,z)}}}function ca(p,_,C){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oo("error",p),oo("load",p);var z=!1,X=!1,oe;for(oe in C)if(C.hasOwnProperty(oe)){var Ce=C[oe];if(Ce!=null)switch(oe){case"src":z=!0;break;case"srcSet":X=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,_));default:No(p,_,oe,Ce,C,null)}}X&&No(p,_,"srcSet",C.srcSet,C,null),z&&No(p,_,"src",C.src,C,null);return;case"input":oo("invalid",p);var Ge=oe=Ce=X=null,mt=null,en=null;for(z in C)if(C.hasOwnProperty(z)){var Dn=C[z];if(Dn!=null)switch(z){case"name":X=Dn;break;case"type":Ce=Dn;break;case"checked":mt=Dn;break;case"defaultChecked":en=Dn;break;case"value":oe=Dn;break;case"defaultValue":Ge=Dn;break;case"children":case"dangerouslySetInnerHTML":if(Dn!=null)throw Error(r(137,_));break;default:No(p,_,z,Dn,C,null)}}jg(p,oe,Ge,mt,en,Ce,X,!1),xh(p);return;case"select":oo("invalid",p),z=Ce=oe=null;for(X in C)if(C.hasOwnProperty(X)&&(Ge=C[X],Ge!=null))switch(X){case"value":oe=Ge;break;case"defaultValue":Ce=Ge;break;case"multiple":z=Ge;default:No(p,_,X,Ge,C,null)}_=oe,C=Ce,p.multiple=!!z,_!=null?wa(p,!!z,_,!1):C!=null&&wa(p,!!z,C,!0);return;case"textarea":oo("invalid",p),oe=X=z=null;for(Ce in C)if(C.hasOwnProperty(Ce)&&(Ge=C[Ce],Ge!=null))switch(Ce){case"value":z=Ge;break;case"defaultValue":X=Ge;break;case"children":oe=Ge;break;case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(91));break;default:No(p,_,Ce,Ge,C,null)}jl(p,z,X,oe),xh(p);return;case"option":for(mt in C)if(C.hasOwnProperty(mt)&&(z=C[mt],z!=null))switch(mt){case"selected":p.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:No(p,_,mt,z,C,null)}return;case"dialog":oo("beforetoggle",p),oo("toggle",p),oo("cancel",p),oo("close",p);break;case"iframe":case"object":oo("load",p);break;case"video":case"audio":for(z=0;z<m_.length;z++)oo(m_[z],p);break;case"image":oo("error",p),oo("load",p);break;case"details":oo("toggle",p);break;case"embed":case"source":case"link":oo("error",p),oo("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(en in C)if(C.hasOwnProperty(en)&&(z=C[en],z!=null))switch(en){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,_));default:No(p,_,en,z,C,null)}return;default:if(wc(_)){for(Dn in C)C.hasOwnProperty(Dn)&&(z=C[Dn],z!==void 0&&ag(p,_,Dn,z,C,void 0));return}}for(Ge in C)C.hasOwnProperty(Ge)&&(z=C[Ge],z!=null&&No(p,_,Ge,z,C,null))}function _x(p,_,C,z){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var X=null,oe=null,Ce=null,Ge=null,mt=null,en=null,Dn=null;for(hn in C){var qn=C[hn];if(C.hasOwnProperty(hn)&&qn!=null)switch(hn){case"checked":break;case"value":break;case"defaultValue":mt=qn;default:z.hasOwnProperty(hn)||No(p,_,hn,null,z,qn)}}for(var cn in z){var hn=z[cn];if(qn=C[cn],z.hasOwnProperty(cn)&&(hn!=null||qn!=null))switch(cn){case"type":oe=hn;break;case"name":X=hn;break;case"checked":en=hn;break;case"defaultChecked":Dn=hn;break;case"value":Ce=hn;break;case"defaultValue":Ge=hn;break;case"children":case"dangerouslySetInnerHTML":if(hn!=null)throw Error(r(137,_));break;default:hn!==qn&&No(p,_,cn,hn,z,qn)}}wl(p,Ce,Ge,mt,en,Dn,oe,X);return;case"select":hn=Ce=Ge=cn=null;for(oe in C)if(mt=C[oe],C.hasOwnProperty(oe)&&mt!=null)switch(oe){case"value":break;case"multiple":hn=mt;default:z.hasOwnProperty(oe)||No(p,_,oe,null,z,mt)}for(X in z)if(oe=z[X],mt=C[X],z.hasOwnProperty(X)&&(oe!=null||mt!=null))switch(X){case"value":cn=oe;break;case"defaultValue":Ge=oe;break;case"multiple":Ce=oe;default:oe!==mt&&No(p,_,X,oe,z,mt)}_=Ge,C=Ce,z=hn,cn!=null?wa(p,!!C,cn,!1):!!z!=!!C&&(_!=null?wa(p,!!C,_,!0):wa(p,!!C,C?[]:"",!1));return;case"textarea":hn=cn=null;for(Ge in C)if(X=C[Ge],C.hasOwnProperty(Ge)&&X!=null&&!z.hasOwnProperty(Ge))switch(Ge){case"value":break;case"children":break;default:No(p,_,Ge,null,z,X)}for(Ce in z)if(X=z[Ce],oe=C[Ce],z.hasOwnProperty(Ce)&&(X!=null||oe!=null))switch(Ce){case"value":cn=X;break;case"defaultValue":hn=X;break;case"children":break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:X!==oe&&No(p,_,Ce,X,z,oe)}Zc(p,cn,hn);return;case"option":for(var Ei in C)if(cn=C[Ei],C.hasOwnProperty(Ei)&&cn!=null&&!z.hasOwnProperty(Ei))switch(Ei){case"selected":p.selected=!1;break;default:No(p,_,Ei,null,z,cn)}for(mt in z)if(cn=z[mt],hn=C[mt],z.hasOwnProperty(mt)&&cn!==hn&&(cn!=null||hn!=null))switch(mt){case"selected":p.selected=cn&&typeof cn!="function"&&typeof cn!="symbol";break;default:No(p,_,mt,cn,z,hn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gi in C)cn=C[gi],C.hasOwnProperty(gi)&&cn!=null&&!z.hasOwnProperty(gi)&&No(p,_,gi,null,z,cn);for(en in z)if(cn=z[en],hn=C[en],z.hasOwnProperty(en)&&cn!==hn&&(cn!=null||hn!=null))switch(en){case"children":case"dangerouslySetInnerHTML":if(cn!=null)throw Error(r(137,_));break;default:No(p,_,en,cn,z,hn)}return;default:if(wc(_)){for(var Ho in C)cn=C[Ho],C.hasOwnProperty(Ho)&&cn!==void 0&&!z.hasOwnProperty(Ho)&&ag(p,_,Ho,void 0,z,cn);for(Dn in z)cn=z[Dn],hn=C[Dn],!z.hasOwnProperty(Dn)||cn===hn||cn===void 0&&hn===void 0||ag(p,_,Dn,cn,z,hn);return}}for(var jt in C)cn=C[jt],C.hasOwnProperty(jt)&&cn!=null&&!z.hasOwnProperty(jt)&&No(p,_,jt,null,z,cn);for(qn in z)cn=z[qn],hn=C[qn],!z.hasOwnProperty(qn)||cn===hn||cn==null&&hn==null||No(p,_,qn,cn,z,hn)}var q1=null,xx=null;function xy(p){return p.nodeType===9?p:p.ownerDocument}function bx(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wx(p,_){if(p===0)switch(_){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&_==="foreignObject"?0:p}function Sx(p,_){return p==="textarea"||p==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.children=="bigint"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var __=null;function BE(){var p=window.event;return p&&p.type==="popstate"?p===__?!1:(__=p,!0):(__=null,!1)}var Tx=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,Ex=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(p){return H1.resolve(null).then(p).catch(jE)}:Tx;function jE(p){setTimeout(function(){throw p})}function df(p){return p==="head"}function G1(p,_){var C=_,z=0,X=0;do{var oe=C.nextSibling;if(p.removeChild(C),oe&&oe.nodeType===8)if(C=oe.data,C==="/$"){if(0<z&&8>z){C=z;var Ce=p.ownerDocument;if(C&1&&cg(Ce.documentElement),C&2&&cg(Ce.body),C&4)for(C=Ce.head,cg(C),Ce=C.firstChild;Ce;){var Ge=Ce.nextSibling,mt=Ce.nodeName;Ce[ft]||mt==="SCRIPT"||mt==="STYLE"||mt==="LINK"&&Ce.rel.toLowerCase()==="stylesheet"||C.removeChild(Ce),Ce=Ge}}if(X===0){p.removeChild(oe),Ay(_);return}X--}else C==="$"||C==="$?"||C==="$!"?X++:z=C.charCodeAt(0)-48;else z=0;C=oe}while(C);Ay(_)}function $d(p){var _=p.firstChild;for(_&&_.nodeType===10&&(_=_.nextSibling);_;){var C=_;switch(_=_.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":$d(C),st(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}p.removeChild(C)}}function lg(p,_,C,z){for(;p.nodeType===1;){var X=C;if(p.nodeName.toLowerCase()!==_.toLowerCase()){if(!z&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(z){if(!p[ft])switch(_){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(oe=p.getAttribute("rel"),oe==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(oe!==X.rel||p.getAttribute("href")!==(X.href==null||X.href===""?null:X.href)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin)||p.getAttribute("title")!==(X.title==null?null:X.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(oe=p.getAttribute("src"),(oe!==(X.src==null?null:X.src)||p.getAttribute("type")!==(X.type==null?null:X.type)||p.getAttribute("crossorigin")!==(X.crossOrigin==null?null:X.crossOrigin))&&oe&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(_==="input"&&p.type==="hidden"){var oe=X.name==null?null:""+X.name;if(X.type==="hidden"&&p.getAttribute("name")===oe)return p}else return p;if(p=Yu(p.nextSibling),p===null)break}return null}function VE(p,_,C){if(_==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!C||(p=Yu(p.nextSibling),p===null))return null;return p}function W1(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState==="complete"}function UE(p,_){var C=p.ownerDocument;if(p.data!=="$?"||C.readyState==="complete")_();else{var z=function(){_(),C.removeEventListener("DOMContentLoaded",z)};C.addEventListener("DOMContentLoaded",z),p._reactRetry=z}}function Yu(p){for(;p!=null;p=p.nextSibling){var _=p.nodeType;if(_===1||_===3)break;if(_===8){if(_=p.data,_==="$"||_==="$!"||_==="$?"||_==="F!"||_==="F")break;if(_==="/$")return null}}return p}var Y1=null;function yp(p){p=p.previousSibling;for(var _=0;p;){if(p.nodeType===8){var C=p.data;if(C==="$"||C==="$!"||C==="$?"){if(_===0)return p;_--}else C==="/$"&&_++}p=p.previousSibling}return null}function X1(p,_,C){switch(_=xy(C),p){case"html":if(p=_.documentElement,!p)throw Error(r(452));return p;case"head":if(p=_.head,!p)throw Error(r(453));return p;case"body":if(p=_.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function cg(p){for(var _=p.attributes;_.length;)p.removeAttributeNode(_[0]);st(p)}var tc=new Map,Z1=new Set;function x_(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var Il=qe.d;qe.d={f:fP,r:nc,D:$E,C:Cx,L:pP,m:mP,X:qE,S:Q1,M:J1};function fP(){var p=Il.f(),_=qu();return p||_}function nc(p){var _=ln(p);_!==null&&_.tag===5&&_.type==="form"?uy(_):Il.r(p)}var ug=typeof document>"u"?null:document;function K1(p,_,C){var z=ug;if(z&&typeof _=="string"&&_){var X=Ja(_);X='link[rel="'+p+'"][href="'+X+'"]',typeof C=="string"&&(X+='[crossorigin="'+C+'"]'),Z1.has(X)||(Z1.add(X),p={rel:p,crossOrigin:C,href:_},z.querySelector(X)===null&&(_=z.createElement("link"),ca(_,"link",p),er(_),z.head.appendChild(_)))}}function $E(p){Il.D(p),K1("dns-prefetch",p,null)}function Cx(p,_){Il.C(p,_),K1("preconnect",p,_)}function pP(p,_,C){Il.L(p,_,C);var z=ug;if(z&&p&&_){var X='link[rel="preload"][as="'+Ja(_)+'"]';_==="image"&&C&&C.imageSrcSet?(X+='[imagesrcset="'+Ja(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(X+='[imagesizes="'+Ja(C.imageSizes)+'"]')):X+='[href="'+Ja(p)+'"]';var oe=X;switch(_){case"style":oe=dg(p);break;case"script":oe=vp(p)}tc.has(oe)||(p=T({rel:"preload",href:_==="image"&&C&&C.imageSrcSet?void 0:p,as:_},C),tc.set(oe,p),z.querySelector(X)!==null||_==="style"&&z.querySelector(by(oe))||_==="script"&&z.querySelector(rc(oe))||(_=z.createElement("link"),ca(_,"link",p),er(_),z.head.appendChild(_)))}}function mP(p,_){Il.m(p,_);var C=ug;if(C&&p){var z=_&&typeof _.as=="string"?_.as:"script",X='link[rel="modulepreload"][as="'+Ja(z)+'"][href="'+Ja(p)+'"]',oe=X;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":oe=vp(p)}if(!tc.has(oe)&&(p=T({rel:"modulepreload",href:p},_),tc.set(oe,p),C.querySelector(X)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(rc(oe)))return}z=C.createElement("link"),ca(z,"link",p),er(z),C.head.appendChild(z)}}}function Q1(p,_,C){Il.S(p,_,C);var z=ug;if(z&&p){var X=ir(z).hoistableStyles,oe=dg(p);_=_||"default";var Ce=X.get(oe);if(!Ce){var Ge={loading:0,preload:null};if(Ce=z.querySelector(by(oe)))Ge.loading=5;else{p=T({rel:"stylesheet",href:p,"data-precedence":_},C),(C=tc.get(oe))&&nw(p,C);var mt=Ce=z.createElement("link");er(mt),ca(mt,"link",p),mt._p=new Promise(function(en,Dn){mt.onload=en,mt.onerror=Dn}),mt.addEventListener("load",function(){Ge.loading|=1}),mt.addEventListener("error",function(){Ge.loading|=2}),Ge.loading|=4,Mx(Ce,_,z)}Ce={type:"stylesheet",instance:Ce,count:1,state:Ge},X.set(oe,Ce)}}}function qE(p,_){Il.X(p,_);var C=ug;if(C&&p){var z=ir(C).hoistableScripts,X=vp(p),oe=z.get(X);oe||(oe=C.querySelector(rc(X)),oe||(p=T({src:p,async:!0},_),(_=tc.get(X))&&rw(p,_),oe=C.createElement("script"),er(oe),ca(oe,"link",p),C.head.appendChild(oe)),oe={type:"script",instance:oe,count:1,state:null},z.set(X,oe))}}function J1(p,_){Il.M(p,_);var C=ug;if(C&&p){var z=ir(C).hoistableScripts,X=vp(p),oe=z.get(X);oe||(oe=C.querySelector(rc(X)),oe||(p=T({src:p,async:!0,type:"module"},_),(_=tc.get(X))&&rw(p,_),oe=C.createElement("script"),er(oe),ca(oe,"link",p),C.head.appendChild(oe)),oe={type:"script",instance:oe,count:1,state:null},z.set(X,oe))}}function Ax(p,_,C,z){var X=(X=vt.current)?x_(X):null;if(!X)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(_=dg(C.href),C=ir(X).hoistableStyles,z=C.get(_),z||(z={type:"style",instance:null,count:0,state:null},C.set(_,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){p=dg(C.href);var oe=ir(X).hoistableStyles,Ce=oe.get(p);if(Ce||(X=X.ownerDocument||X,Ce={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},oe.set(p,Ce),(oe=X.querySelector(by(p)))&&!oe._p&&(Ce.instance=oe,Ce.state.loading=5),tc.has(p)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},tc.set(p,C),oe||HE(X,p,C,Ce.state))),_&&z===null)throw Error(r(528,""));return Ce}if(_&&z!==null)throw Error(r(529,""));return null;case"script":return _=C.async,C=C.src,typeof C=="string"&&_&&typeof _!="function"&&typeof _!="symbol"?(_=vp(C),C=ir(X).hoistableScripts,z=C.get(_),z||(z={type:"script",instance:null,count:0,state:null},C.set(_,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function dg(p){return'href="'+Ja(p)+'"'}function by(p){return'link[rel="stylesheet"]['+p+"]"}function ew(p){return T({},p,{"data-precedence":p.precedence,precedence:null})}function HE(p,_,C,z){p.querySelector('link[rel="preload"][as="style"]['+_+"]")?z.loading=1:(_=p.createElement("link"),z.preload=_,_.addEventListener("load",function(){return z.loading|=1}),_.addEventListener("error",function(){return z.loading|=2}),ca(_,"link",C),er(_),p.head.appendChild(_))}function vp(p){return'[src="'+Ja(p)+'"]'}function rc(p){return"script[async]"+p}function tw(p,_,C){if(_.count++,_.instance===null)switch(_.type){case"style":var z=p.querySelector('style[data-href~="'+Ja(C.href)+'"]');if(z)return _.instance=z,er(z),z;var X=T({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return z=(p.ownerDocument||p).createElement("style"),er(z),ca(z,"style",X),Mx(z,C.precedence,p),_.instance=z;case"stylesheet":X=dg(C.href);var oe=p.querySelector(by(X));if(oe)return _.state.loading|=4,_.instance=oe,er(oe),oe;z=ew(C),(X=tc.get(X))&&nw(z,X),oe=(p.ownerDocument||p).createElement("link"),er(oe);var Ce=oe;return Ce._p=new Promise(function(Ge,mt){Ce.onload=Ge,Ce.onerror=mt}),ca(oe,"link",z),_.state.loading|=4,Mx(oe,C.precedence,p),_.instance=oe;case"script":return oe=vp(C.src),(X=p.querySelector(rc(oe)))?(_.instance=X,er(X),X):(z=C,(X=tc.get(oe))&&(z=T({},C),rw(z,X)),p=p.ownerDocument||p,X=p.createElement("script"),er(X),ca(X,"link",z),p.head.appendChild(X),_.instance=X);case"void":return null;default:throw Error(r(443,_.type))}else _.type==="stylesheet"&&(_.state.loading&4)===0&&(z=_.instance,_.state.loading|=4,Mx(z,C.precedence,p));return _.instance}function Mx(p,_,C){for(var z=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),X=z.length?z[z.length-1]:null,oe=X,Ce=0;Ce<z.length;Ce++){var Ge=z[Ce];if(Ge.dataset.precedence===_)oe=Ge;else if(oe!==X)break}oe?oe.parentNode.insertBefore(p,oe.nextSibling):(_=C.nodeType===9?C.head:C,_.insertBefore(p,_.firstChild))}function nw(p,_){p.crossOrigin==null&&(p.crossOrigin=_.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=_.referrerPolicy),p.title==null&&(p.title=_.title)}function rw(p,_){p.crossOrigin==null&&(p.crossOrigin=_.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=_.referrerPolicy),p.integrity==null&&(p.integrity=_.integrity)}var Rx=null;function GE(p,_,C){if(Rx===null){var z=new Map,X=Rx=new Map;X.set(C,z)}else X=Rx,z=X.get(C),z||(z=new Map,X.set(C,z));if(z.has(p))return z;for(z.set(p,null),C=C.getElementsByTagName(p),X=0;X<C.length;X++){var oe=C[X];if(!(oe[ft]||oe[xe]||p==="link"&&oe.getAttribute("rel")==="stylesheet")&&oe.namespaceURI!=="http://www.w3.org/2000/svg"){var Ce=oe.getAttribute(_)||"";Ce=p+Ce;var Ge=z.get(Ce);Ge?Ge.push(oe):z.set(Ce,[oe])}}return z}function WE(p,_,C){p=p.ownerDocument||p,p.head.insertBefore(C,_==="title"?p.querySelector("head > title"):null)}function gP(p,_,C){if(C===1||_.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof _.precedence!="string"||typeof _.href!="string"||_.href==="")break;return!0;case"link":if(typeof _.rel!="string"||typeof _.href!="string"||_.href===""||_.onLoad||_.onError)break;switch(_.rel){case"stylesheet":return p=_.disabled,typeof _.precedence=="string"&&p==null;default:return!0}case"script":if(_.async&&typeof _.async!="function"&&typeof _.async!="symbol"&&!_.onLoad&&!_.onError&&_.src&&typeof _.src=="string")return!0}return!1}function b_(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var wy=null;function Dx(){}function YE(p,_,C){if(wy===null)throw Error(r(475));var z=wy;if(_.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var X=dg(C.href),oe=p.querySelector(by(X));if(oe){p=oe._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(z.count++,z=Sy.bind(z),p.then(z,z)),_.state.loading|=4,_.instance=oe,er(oe);return}oe=p.ownerDocument||p,C=ew(C),(X=tc.get(X))&&nw(C,X),oe=oe.createElement("link"),er(oe);var Ce=oe;Ce._p=new Promise(function(Ge,mt){Ce.onload=Ge,Ce.onerror=mt}),ca(oe,"link",C),_.instance=oe}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(_,p),(p=_.state.preload)&&(_.state.loading&3)===0&&(z.count++,_=Sy.bind(z),p.addEventListener("load",_),p.addEventListener("error",_))}}function iw(){if(wy===null)throw Error(r(475));var p=wy;return p.stylesheets&&p.count===0&&ow(p,p.stylesheets),0<p.count?function(_){var C=setTimeout(function(){if(p.stylesheets&&ow(p,p.stylesheets),p.unsuspend){var z=p.unsuspend;p.unsuspend=null,z()}},6e4);return p.unsuspend=_,function(){p.unsuspend=null,clearTimeout(C)}}:null}function Sy(){if(this.count--,this.count===0){if(this.stylesheets)ow(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var w_=null;function ow(p,_){p.stylesheets=null,p.unsuspend!==null&&(p.count++,w_=new Map,_.forEach(XE,p),w_=null,Sy.call(p))}function XE(p,_){if(!(_.state.loading&4)){var C=w_.get(p);if(C)var z=C.get(null);else{C=new Map,w_.set(p,C);for(var X=p.querySelectorAll("link[data-precedence],style[data-precedence]"),oe=0;oe<X.length;oe++){var Ce=X[oe];(Ce.nodeName==="LINK"||Ce.getAttribute("media")!=="not all")&&(C.set(Ce.dataset.precedence,Ce),z=Ce)}z&&C.set(null,z)}X=_.instance,Ce=X.getAttribute("data-precedence"),oe=C.get(Ce)||z,oe===z&&C.set(null,X),C.set(Ce,X),this.count++,z=Sy.bind(this),X.addEventListener("load",z),X.addEventListener("error",z),oe?oe.parentNode.insertBefore(X,oe.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(X,p.firstChild)),_.state.loading|=4}}var Ty={$$typeof:Z,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function ZE(p,_,C,z,X,oe,Ce,Ge){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ko(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ko(0),this.hiddenUpdates=ko(null),this.identifierPrefix=z,this.onUncaughtError=X,this.onCaughtError=oe,this.onRecoverableError=Ce,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ge,this.incompleteTransitions=new Map}function sw(p,_,C,z,X,oe,Ce,Ge,mt,en,Dn,qn){return p=new ZE(p,_,C,Ce,Ge,mt,en,qn),_=1,oe===!0&&(_|=24),oe=ll(3,null,null,_),p.current=oe,oe.stateNode=p,_=Qf(),_.refCount++,p.pooledCache=_,_.refCount++,oe.memoizedState={element:z,isDehydrated:C,cache:_},ny(oe),p}function Px(p){return p?(p=yd,p):yd}function aw(p,_,C,z,X,oe){X=Px(X),z.context===null?z.context=X:z.pendingContext=X,z=nu(_),z.payload={element:C},oe=oe===void 0?null:oe,oe!==null&&(z.callback=oe),C=Oc(p,z,_),C!==null&&(Pa(C,p,_),rp(C,p,_))}function Ix(p,_){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var C=p.retryLane;p.retryLane=C!==0&&C<_?C:_}}function lw(p,_){Ix(p,_),(p=p.alternate)&&Ix(p,_)}function KE(p){if(p.tag===13){var _=Yl(p,67108864);_!==null&&Pa(_,p,67108864),lw(p,67108864)}}var kx=!0;function yP(p,_,C,z){var X=Se.T;Se.T=null;var oe=qe.p;try{qe.p=2,qd(p,_,C,z)}finally{qe.p=oe,Se.T=X}}function QE(p,_,C,z){var X=Se.T;Se.T=null;var oe=qe.p;try{qe.p=8,qd(p,_,C,z)}finally{qe.p=oe,Se.T=X}}function qd(p,_,C,z){if(kx){var X=hg(z);if(X===null)gx(p,_,z,_p,C),cw(p,z);else if(JE(X,p,_,C,z))z.stopPropagation();else if(cw(p,z),_&4&&-1<Lx.indexOf(p)){for(;X!==null;){var oe=ln(X);if(oe!==null)switch(oe.tag){case 3:if(oe=oe.stateNode,oe.current.memoizedState.isDehydrated){var Ce=nr(oe.pendingLanes);if(Ce!==0){var Ge=oe;for(Ge.pendingLanes|=2,Ge.entangledLanes|=2;Ce;){var mt=1<<31-Xn(Ce);Ge.entanglements[1]|=mt,Ce&=~mt}Wu(oe),(cr&6)===0&&(ts=Ft()+500,yy(0))}}break;case 13:Ge=Yl(oe,2),Ge!==null&&Pa(Ge,oe,2),qu(),lw(oe,2)}if(oe=hg(z),oe===null&&gx(p,_,z,_p,C),oe===X)break;X=oe}X!==null&&z.stopPropagation()}else gx(p,_,z,null,C)}}function hg(p){return p=Bf(p),Ey(p)}var _p=null;function Ey(p){if(_p=null,p=zt(p),p!==null){var _=c(p);if(_===null)p=null;else{var C=_.tag;if(C===13){if(p=h(_),p!==null)return p;p=null}else if(C===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;p=null}else _!==p&&(p=null)}}return _p=p,null}function Cy(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case Yn:return 2;case wn:return 8;case Vn:case ut:return 32;case gn:return 268435456;default:return 32}default:return 32}}var Ox=!1,hf=null,ff=null,pf=null,S_=new Map,T_=new Map,mf=[],Lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cw(p,_){switch(p){case"focusin":case"focusout":hf=null;break;case"dragenter":case"dragleave":ff=null;break;case"mouseover":case"mouseout":pf=null;break;case"pointerover":case"pointerout":S_.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":T_.delete(_.pointerId)}}function E_(p,_,C,z,X,oe){return p===null||p.nativeEvent!==oe?(p={blockedOn:_,domEventName:C,eventSystemFlags:z,nativeEvent:oe,targetContainers:[X]},_!==null&&(_=ln(_),_!==null&&KE(_)),p):(p.eventSystemFlags|=z,_=p.targetContainers,X!==null&&_.indexOf(X)===-1&&_.push(X),p)}function JE(p,_,C,z,X){switch(_){case"focusin":return hf=E_(hf,p,_,C,z,X),!0;case"dragenter":return ff=E_(ff,p,_,C,z,X),!0;case"mouseover":return pf=E_(pf,p,_,C,z,X),!0;case"pointerover":var oe=X.pointerId;return S_.set(oe,E_(S_.get(oe)||null,p,_,C,z,X)),!0;case"gotpointercapture":return oe=X.pointerId,T_.set(oe,E_(T_.get(oe)||null,p,_,C,z,X)),!0}return!1}function zx(p){var _=zt(p.target);if(_!==null){var C=c(_);if(C!==null){if(_=C.tag,_===13){if(_=h(C),_!==null){p.blockedOn=_,re(p.priority,function(){if(C.tag===13){var z=Ks();z=Hs(z);var X=Yl(C,z);X!==null&&Pa(X,C,z),lw(C,z)}});return}}else if(_===3&&C.stateNode.current.memoizedState.isDehydrated){p.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}p.blockedOn=null}function C_(p){if(p.blockedOn!==null)return!1;for(var _=p.targetContainers;0<_.length;){var C=hg(p.nativeEvent);if(C===null){C=p.nativeEvent;var z=new C.constructor(C.type,C);Gs=z,C.target.dispatchEvent(z),Gs=null}else return _=ln(C),_!==null&&KE(_),p.blockedOn=C,!1;_.shift()}return!0}function uw(p,_,C){C_(p)&&C.delete(_)}function eC(){Ox=!1,hf!==null&&C_(hf)&&(hf=null),ff!==null&&C_(ff)&&(ff=null),pf!==null&&C_(pf)&&(pf=null),S_.forEach(uw),T_.forEach(uw)}function A_(p,_){p.blockedOn===_&&(p.blockedOn=null,Ox||(Ox=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eC)))}var M_=null;function tC(p){M_!==p&&(M_=p,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){M_===p&&(M_=null);for(var _=0;_<p.length;_+=3){var C=p[_],z=p[_+1],X=p[_+2];if(typeof z!="function"){if(Ey(z||C)===null)continue;break}var oe=ln(C);oe!==null&&(p.splice(_,3),_-=3,Zh(oe,{pending:!0,data:X,method:C.method,action:z},z,X))}}))}function Ay(p){function _(mt){return A_(mt,p)}hf!==null&&A_(hf,p),ff!==null&&A_(ff,p),pf!==null&&A_(pf,p),S_.forEach(_),T_.forEach(_);for(var C=0;C<mf.length;C++){var z=mf[C];z.blockedOn===p&&(z.blockedOn=null)}for(;0<mf.length&&(C=mf[0],C.blockedOn===null);)zx(C),C.blockedOn===null&&mf.shift();if(C=(p.ownerDocument||p).$$reactFormReplay,C!=null)for(z=0;z<C.length;z+=3){var X=C[z],oe=C[z+1],Ce=X[ke]||null;if(typeof oe=="function")Ce||tC(C);else if(Ce){var Ge=null;if(oe&&oe.hasAttribute("formAction")){if(X=oe,Ce=oe[ke]||null)Ge=Ce.formAction;else if(Ey(X)!==null)continue}else Ge=Ce.action;typeof Ge=="function"?C[z+1]=Ge:(C.splice(z,3),z-=3),tC(C)}}}function Fx(p){this._internalRoot=p}Hd.prototype.render=Fx.prototype.render=function(p){var _=this._internalRoot;if(_===null)throw Error(r(409));var C=_.current,z=Ks();aw(C,z,p,_,null,null)},Hd.prototype.unmount=Fx.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var _=p.containerInfo;aw(p.current,2,null,p,null,null),qu(),_[Ne]=null}};function Hd(p){this._internalRoot=p}Hd.prototype.unstable_scheduleHydration=function(p){if(p){var _=De();p={blockedOn:null,target:p,priority:_};for(var C=0;C<mf.length&&_!==0&&_<mf[C].priority;C++);mf.splice(C,0,p),C===0&&zx(p)}};var dw=t.version;if(dw!=="19.1.0")throw Error(r(527,dw,"19.1.0"));qe.findDOMNode=function(p){var _=p._reactInternals;if(_===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=g(_),p=p!==null?w(p):null,p=p===null?null:p.stateNode,p};var nC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var R_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!R_.isDisabled&&R_.supportsFiber)try{zn=R_.inject(nC),Un=R_}catch{}}return Fw.createRoot=function(p,_){if(!s(p))throw Error(r(299));var C=!1,z="",X=of,oe=up,Ce=fy,Ge=null;return _!=null&&(_.unstable_strictMode===!0&&(C=!0),_.identifierPrefix!==void 0&&(z=_.identifierPrefix),_.onUncaughtError!==void 0&&(X=_.onUncaughtError),_.onCaughtError!==void 0&&(oe=_.onCaughtError),_.onRecoverableError!==void 0&&(Ce=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(Ge=_.unstable_transitionCallbacks)),_=sw(p,1,!1,null,null,C,z,X,oe,Ce,Ge,null),p[Ne]=_.current,g_(p),new Fx(_)},Fw.hydrateRoot=function(p,_,C){if(!s(p))throw Error(r(299));var z=!1,X="",oe=of,Ce=up,Ge=fy,mt=null,en=null;return C!=null&&(C.unstable_strictMode===!0&&(z=!0),C.identifierPrefix!==void 0&&(X=C.identifierPrefix),C.onUncaughtError!==void 0&&(oe=C.onUncaughtError),C.onCaughtError!==void 0&&(Ce=C.onCaughtError),C.onRecoverableError!==void 0&&(Ge=C.onRecoverableError),C.unstable_transitionCallbacks!==void 0&&(mt=C.unstable_transitionCallbacks),C.formState!==void 0&&(en=C.formState)),_=sw(p,1,!0,_,C??null,z,X,oe,Ce,Ge,mt,en),_.context=Px(null),C=_.current,z=Ks(),z=Hs(z),X=nu(z),X.callback=null,Oc(C,X,z),C=z,_.current.lanes=C,Ro(_,C),Wu(_),p[Ne]=_.current,g_(p),new Hd(_)},Fw.version="19.1.0",Fw}var CU;function $se(){if(CU)return dI.exports;CU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dI.exports=Use(),dI.exports}var qse=$se(),q=mh();const St=_a(q),DM=Ose({__proto__:null,default:St},[q]);var Bw={},AU;function Hse(){if(AU)return Bw;AU=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.parse=h,Bw.serialize=w;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,c=(()=>{const D=function(){};return D.prototype=Object.create(null),D})();function h(D,k){const I=new c,F=D.length;if(F<2)return I;const j=(k==null?void 0:k.decode)||T;let V=0;do{const W=D.indexOf("=",V);if(W===-1)break;const Z=D.indexOf(";",V),K=Z===-1?F:Z;if(W>K){V=D.lastIndexOf(";",W-1)+1;continue}const ee=i(D,V,W),se=g(D,W,ee),he=D.slice(ee,se);if(I[he]===void 0){let ye=i(D,W+1,K),_e=g(D,K,ye);const ae=j(D.slice(ye,_e));I[he]=ae}V=K+1}while(V<F);return I}function i(D,k,I){do{const F=D.charCodeAt(k);if(F!==32&&F!==9)return k}while(++k<I);return I}function g(D,k,I){for(;k>I;){const F=D.charCodeAt(--k);if(F!==32&&F!==9)return k+1}return I}function w(D,k,I){const F=(I==null?void 0:I.encode)||encodeURIComponent;if(!e.test(D))throw new TypeError(`argument name is invalid: ${D}`);const j=F(k);if(!t.test(j))throw new TypeError(`argument val is invalid: ${k}`);let V=D+"="+j;if(!I)return V;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);V+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);V+="; Domain="+I.domain}if(I.path){if(!r.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);V+="; Path="+I.path}if(I.expires){if(!A(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);V+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(V+="; HttpOnly"),I.secure&&(V+="; Secure"),I.partitioned&&(V+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return V}function T(D){if(D.indexOf("%")===-1)return D;try{return decodeURIComponent(D)}catch{return D}}function A(D){return s.call(D)==="[object Date]"}return Bw}Hse();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RY=e=>{throw TypeError(e)},Gse=(e,t,n)=>t.has(e)||RY("Cannot "+n),gI=(e,t,n)=>(Gse(e,t,"read from private field"),n?n.call(e):t.get(e)),Wse=(e,t,n)=>t.has(e)?RY("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),MU="popstate";function Yse(e={}){function t(r,s){let{pathname:c,search:h,hash:i}=r.location;return GS("",{pathname:c,search:h,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Gy(s)}return Zse(t,n,null,e)}function po(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ga(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xse(){return Math.random().toString(36).substring(2,10)}function RU(e,t){return{usr:e.state,key:e.key,idx:t}}function GS(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?rv(t):t,state:n,key:t&&t.key||r||Xse()}}function Gy({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function rv(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Zse(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:c=!1}=r,h=s.history,i="POP",g=null,w=T();w==null&&(w=0,h.replaceState({...h.state,idx:w},""));function T(){return(h.state||{idx:null}).idx}function A(){i="POP";let j=T(),V=j==null?null:j-w;w=j,g&&g({action:i,location:F.location,delta:V})}function D(j,V){i="PUSH";let W=GS(F.location,j,V);w=T()+1;let Z=RU(W,w),K=F.createHref(W);try{h.pushState(Z,"",K)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;s.location.assign(K)}c&&g&&g({action:i,location:F.location,delta:1})}function k(j,V){i="REPLACE";let W=GS(F.location,j,V);w=T();let Z=RU(W,w),K=F.createHref(W);h.replaceState(Z,"",K),c&&g&&g({action:i,location:F.location,delta:0})}function I(j){let V=s.location.origin!=="null"?s.location.origin:s.location.href,W=typeof j=="string"?j:Gy(j);return W=W.replace(/ $/,"%20"),po(V,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,V)}let F={get action(){return i},get location(){return e(s,h)},listen(j){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(MU,A),g=j,()=>{s.removeEventListener(MU,A),g=null}},createHref(j){return t(s,j)},createURL:I,encodeLocation(j){let V=I(j);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:D,replace:k,go(j){return h.go(j)}};return F}var mS,DU=class{constructor(e){if(Wse(this,mS,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(gI(this,mS).has(e))return gI(this,mS).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){gI(this,mS).set(e,t)}};mS=new WeakMap;var Kse=new Set(["lazy","caseSensitive","path","id","index","children"]);function Qse(e){return Kse.has(e)}var Jse=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function eae(e){return Jse.has(e)}function tae(e){return e.index===!0}function PM(e,t,n=[],r={}){return e.map((s,c)=>{let h=[...n,String(c)],i=typeof s.id=="string"?s.id:h.join("-");if(po(s.index!==!0||!s.children,"Cannot specify children on an index route"),po(!r[i],`Found a route id collision on id "${i}".  Route id's must be globally unique within Data Router usages`),tae(s)){let g={...s,...t(s),id:i};return r[i]=g,g}else{let g={...s,...t(s),id:i,children:void 0};return r[i]=g,s.children&&(g.children=PM(s.children,t,h,r)),g}})}function By(e,t,n="/"){return HA(e,t,n,!1)}function HA(e,t,n,r){let s=typeof t=="string"?rv(t):t,c=ch(s.pathname||"/",n);if(c==null)return null;let h=DY(e);rae(h);let i=null;for(let g=0;i==null&&g<h.length;++g){let w=pae(c);i=hae(h[g],w,r)}return i}function nae(e,t){let{route:n,pathname:r,params:s}=e;return{id:n.id,pathname:r,params:s,data:t[n.id],handle:n.handle}}function DY(e,t=[],n=[],r=""){let s=(c,h,i)=>{let g={relativePath:i===void 0?c.path||"":i,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(po(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let w=Np([r,g.relativePath]),T=n.concat(g);c.children&&c.children.length>0&&(po(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),DY(c.children,t,T,w)),!(c.path==null&&!c.index)&&t.push({path:w,score:uae(w,c.index),routesMeta:T})};return e.forEach((c,h)=>{var i;if(c.path===""||!((i=c.path)!=null&&i.includes("?")))s(c,h);else for(let g of PY(c.path))s(c,h,g)}),t}function PY(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return s?[c,""]:[c];let h=PY(r.join("/")),i=[];return i.push(...h.map(g=>g===""?c:[c,g].join("/"))),s&&i.push(...h),i.map(g=>e.startsWith("/")&&g===""?"/":g)}function rae(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:dae(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var iae=/^:[\w-]+$/,oae=3,sae=2,aae=1,lae=10,cae=-2,PU=e=>e==="*";function uae(e,t){let n=e.split("/"),r=n.length;return n.some(PU)&&(r+=cae),t&&(r+=sae),n.filter(s=>!PU(s)).reduce((s,c)=>s+(iae.test(c)?oae:c===""?aae:lae),r)}function dae(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function hae(e,t,n=!1){let{routesMeta:r}=e,s={},c="/",h=[];for(let i=0;i<r.length;++i){let g=r[i],w=i===r.length-1,T=c==="/"?t:t.slice(c.length)||"/",A=Tg({path:g.relativePath,caseSensitive:g.caseSensitive,end:w},T),D=g.route;if(!A&&w&&n&&!r[r.length-1].route.index&&(A=Tg({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},T)),!A)return null;Object.assign(s,A.params),h.push({params:s,pathname:Np([c,A.pathname]),pathnameBase:yae(Np([c,A.pathnameBase])),route:D}),A.pathnameBase!=="/"&&(c=Np([c,A.pathnameBase]))}return h}function Tg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=fae(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let c=s[0],h=c.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((w,{paramName:T,isOptional:A},D)=>{if(T==="*"){let I=i[D]||"";h=c.slice(0,c.length-I.length).replace(/(.)\/+$/,"$1")}const k=i[D];return A&&!k?w[T]=void 0:w[T]=(k||"").replace(/%2F/g,"/"),w},{}),pathname:c,pathnameBase:h,pattern:e}}function fae(e,t=!1,n=!0){ga(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,i,g)=>(r.push({paramName:i,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function pae(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ga(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ch(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function mae(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?rv(e):e;return{pathname:n?n.startsWith("/")?n:gae(n,t):t,search:vae(r),hash:_ae(s)}}function gae(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function yI(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function DR(e){let t=IY(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function PR(e,t,n,r=!1){let s;typeof e=="string"?s=rv(e):(s={...e},po(!s.pathname||!s.pathname.includes("?"),yI("?","pathname","search",s)),po(!s.pathname||!s.pathname.includes("#"),yI("#","pathname","hash",s)),po(!s.search||!s.search.includes("#"),yI("#","search","hash",s)));let c=e===""||s.pathname==="",h=c?"/":s.pathname,i;if(h==null)i=n;else{let A=t.length-1;if(!r&&h.startsWith("..")){let D=h.split("/");for(;D[0]==="..";)D.shift(),A-=1;s.pathname=D.join("/")}i=A>=0?t[A]:"/"}let g=mae(s,i),w=h&&h!=="/"&&h.endsWith("/"),T=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(w||T)&&(g.pathname+="/"),g}var Np=e=>e.join("/").replace(/\/\/+/g,"/"),yae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_ae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,IM=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function WS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var kY=["POST","PUT","PATCH","DELETE"],xae=new Set(kY),bae=["GET",...kY],wae=new Set(bae),Sae=new Set([301,302,303,307,308]),Tae=new Set([307,308]),vI={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Eae={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nw={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},qB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cae=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),OY="remix-router-transitions",LY=Symbol("ResetLoaderData");function Aae(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";po(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.hydrationRouteProperties||[],s=e.mapRouteProperties||Cae,c={},h=PM(e.routes,s,void 0,c),i,g=e.basename||"/",w=e.dataStrategy||Iae,T={unstable_middleware:!1,...e.future},A=null,D=new Set,k=null,I=null,F=null,j=e.hydrationData!=null,V=By(h,e.history.location,g),W=!1,Z=null;if(V==null&&!e.patchRoutesOnNavigation){let De=th(404,{pathname:e.history.location.pathname}),{matches:re,route:le}=$U(h);V=re,Z={[le.id]:De}}V&&!e.hydrationData&&oa(V,h,e.history.location.pathname).active&&(V=null);let K;if(V)if(V.some(De=>De.route.lazy))K=!1;else if(!V.some(De=>De.route.loader))K=!0;else{let De=e.hydrationData?e.hydrationData.loaderData:null,re=e.hydrationData?e.hydrationData.errors:null;if(re){let le=V.findIndex(xe=>re[xe.route.id]!==void 0);K=V.slice(0,le+1).every(xe=>!j3(xe.route,De,re))}else K=V.every(le=>!j3(le.route,De,re))}else{K=!1,V=[];let De=oa(null,h,e.history.location.pathname);De.active&&De.matches&&(W=!0,V=De.matches)}let ee,se={historyAction:e.history.action,location:e.history.location,matches:V,initialized:K,navigation:vI,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},he="POP",ye=!1,_e,ae=!1,be=new Map,Te=null,Ae=!1,Re=!1,He=new Set,Se=new Map,qe=0,it=-1,tt=new Map,Oe=new Set,Je=new Map,yt=new Map,wt=new Set,$t=new Map,It,vt=null;function sn(){if(A=e.history.listen(({action:De,location:re,delta:le})=>{if(It){It(),It=void 0;return}ga($t.size===0||le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let xe=Rr({currentLocation:se.location,nextLocation:re,historyAction:De});if(xe&&le!=null){let ke=new Promise(Ne=>{It=Ne});e.history.go(le*-1),wr(xe,{state:"blocked",location:re,proceed(){wr(xe,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),ke.then(()=>e.history.go(le))},reset(){let Ne=new Map(se.blockers);Ne.set(xe,Nw),Qt({blockers:Ne})}});return}return Kt(De,re)}),n){$ae(t,be);let De=()=>qae(t,be);t.addEventListener("pagehide",De),Te=()=>t.removeEventListener("pagehide",De)}return se.initialized||Kt("POP",se.location,{initialHydration:!0}),ee}function Rn(){A&&A(),Te&&Te(),D.clear(),_e&&_e.abort(),se.fetchers.forEach((De,re)=>Xn(re)),se.blockers.forEach((De,re)=>Wr(re))}function yn(De){return D.add(De),()=>D.delete(De)}function Qt(De,re={}){se={...se,...De};let le=[],xe=[];se.fetchers.forEach((ke,Ne)=>{ke.state==="idle"&&(wt.has(Ne)?le.push(Ne):xe.push(Ne))}),wt.forEach(ke=>{!se.fetchers.has(ke)&&!Se.has(ke)&&le.push(ke)}),[...D].forEach(ke=>ke(se,{deletedFetchers:le,viewTransitionOpts:re.viewTransitionOpts,flushSync:re.flushSync===!0})),le.forEach(ke=>Xn(ke)),xe.forEach(ke=>se.fetchers.delete(ke))}function Jt(De,re,{flushSync:le}={}){var at,ft;let xe=se.actionData!=null&&se.navigation.formMethod!=null&&td(se.navigation.formMethod)&&se.navigation.state==="loading"&&((at=De.state)==null?void 0:at._isRedirect)!==!0,ke;re.actionData?Object.keys(re.actionData).length>0?ke=re.actionData:ke=null:xe?ke=se.actionData:ke=null;let Ne=re.loaderData?VU(se.loaderData,re.loaderData,re.matches||[],re.errors):se.loaderData,Xe=se.blockers;Xe.size>0&&(Xe=new Map(Xe),Xe.forEach((st,zt)=>Xe.set(zt,Nw)));let We=ye===!0||se.navigation.formMethod!=null&&td(se.navigation.formMethod)&&((ft=De.state)==null?void 0:ft._isRedirect)!==!0;i&&(h=i,i=void 0),Ae||he==="POP"||(he==="PUSH"?e.history.push(De,De.state):he==="REPLACE"&&e.history.replace(De,De.state));let Ke;if(he==="POP"){let st=be.get(se.location.pathname);st&&st.has(De.pathname)?Ke={currentLocation:se.location,nextLocation:De}:be.has(De.pathname)&&(Ke={currentLocation:De,nextLocation:se.location})}else if(ae){let st=be.get(se.location.pathname);st?st.add(De.pathname):(st=new Set([De.pathname]),be.set(se.location.pathname,st)),Ke={currentLocation:se.location,nextLocation:De}}Qt({...re,actionData:ke,loaderData:Ne,historyAction:he,location:De,initialized:!0,navigation:vI,revalidation:"idle",restoreScrollPosition:bl(De,re.matches||se.matches),preventScrollReset:We,blockers:Xe},{viewTransitionOpts:Ke,flushSync:le===!0}),he="POP",ye=!1,ae=!1,Ae=!1,Re=!1,vt==null||vt.resolve(),vt=null}async function fn(De,re){if(typeof De=="number"){e.history.go(De);return}let le=N3(se.location,se.matches,g,De,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:xe,submission:ke,error:Ne}=IU(!1,le,re),Xe=se.location,We=GS(se.location,xe,re&&re.state);We={...We,...e.history.encodeLocation(We)};let Ke=re&&re.replace!=null?re.replace:void 0,at="PUSH";Ke===!0?at="REPLACE":Ke===!1||ke!=null&&td(ke.formMethod)&&ke.formAction===se.location.pathname+se.location.search&&(at="REPLACE");let ft=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,st=(re&&re.flushSync)===!0,zt=Rr({currentLocation:Xe,nextLocation:We,historyAction:at});if(zt){wr(zt,{state:"blocked",location:We,proceed(){wr(zt,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),fn(De,re)},reset(){let ln=new Map(se.blockers);ln.set(zt,Nw),Qt({blockers:ln})}});return}await Kt(at,We,{submission:ke,pendingError:Ne,preventScrollReset:ft,replace:re&&re.replace,enableViewTransition:re&&re.viewTransition,flushSync:st})}function Bt(){vt||(vt=Hae()),Wt(),Qt({revalidation:"loading"});let De=vt.promise;return se.navigation.state==="submitting"?De:se.navigation.state==="idle"?(Kt(se.historyAction,se.location,{startUninterruptedRevalidation:!0}),De):(Kt(he||se.historyAction,se.navigation.location,{overrideNavigation:se.navigation,enableViewTransition:ae===!0}),De)}async function Kt(De,re,le){_e&&_e.abort(),_e=null,he=De,Ae=(le&&le.startUninterruptedRevalidation)===!0,Ro(se.location,se.matches),ye=(le&&le.preventScrollReset)===!0,ae=(le&&le.enableViewTransition)===!0;let xe=i||h,ke=le&&le.overrideNavigation,Ne=le!=null&&le.initialHydration&&se.matches&&se.matches.length>0&&!W?se.matches:By(xe,re,g),Xe=(le&&le.flushSync)===!0;if(Ne&&se.initialized&&!Re&&Bae(se.location,re)&&!(le&&le.submission&&td(le.submission.formMethod))){Jt(re,{matches:Ne},{flushSync:Xe});return}let We=oa(Ne,xe,re.pathname);if(We.active&&We.matches&&(Ne=We.matches),!Ne){let{error:ir,notFoundMatches:er,route:tr}=Di(re.pathname);Jt(re,{matches:er,loaderData:{},errors:{[tr.id]:ir}},{flushSync:Xe});return}_e=new AbortController;let Ke=hb(e.history,re,_e.signal,le&&le.submission),at=new DU(e.unstable_getContext?await e.unstable_getContext():void 0),ft;if(le&&le.pendingError)ft=[Q_(Ne).route.id,{type:"error",error:le.pendingError}];else if(le&&le.submission&&td(le.submission.formMethod)){let ir=await _n(Ke,re,le.submission,Ne,at,We.active,le&&le.initialHydration===!0,{replace:le.replace,flushSync:Xe});if(ir.shortCircuited)return;if(ir.pendingActionResult){let[er,tr]=ir.pendingActionResult;if(ed(tr)&&WS(tr.error)&&tr.error.status===404){_e=null,Jt(re,{matches:ir.matches,loaderData:{},errors:{[er]:tr.error}});return}}Ne=ir.matches||Ne,ft=ir.pendingActionResult,ke=_I(re,le.submission),Xe=!1,We.active=!1,Ke=hb(e.history,Ke.url,Ke.signal)}let{shortCircuited:st,matches:zt,loaderData:ln,errors:xn}=await an(Ke,re,Ne,at,We.active,ke,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,Xe,ft);st||(_e=null,Jt(re,{matches:zt||Ne,...UU(ft),loaderData:ln,errors:xn}))}async function _n(De,re,le,xe,ke,Ne,Xe,We={}){Wt();let Ke=Vae(re,le);if(Qt({navigation:Ke},{flushSync:We.flushSync===!0}),Ne){let st=await dn(xe,re.pathname,De.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){let zt=Q_(st.partialMatches).route.id;return{matches:st.partialMatches,pendingActionResult:[zt,{type:"error",error:st.error}]}}else if(st.matches)xe=st.matches;else{let{notFoundMatches:zt,error:ln,route:xn}=Di(re.pathname);return{matches:zt,pendingActionResult:[xn.id,{type:"error",error:ln}]}}}let at,ft=gS(xe,re);if(!ft.route.action&&!ft.route.lazy)at={type:"error",error:th(405,{method:De.method,pathname:re.pathname,routeId:ft.route.id})};else{let st=Pb(s,c,De,xe,ft,Xe?[]:r,ke),zt=await gn(De,st,ke,null);if(at=zt[ft.route.id],!at){for(let ln of xe)if(zt[ln.route.id]){at=zt[ln.route.id];break}}if(De.signal.aborted)return{shortCircuited:!0}}if(n0(at)){let st;return We&&We.replace!=null?st=We.replace:st=BU(at.response.headers.get("Location"),new URL(De.url),g)===se.location.pathname+se.location.search,await ut(De,at,!0,{submission:le,replace:st}),{shortCircuited:!0}}if(ed(at)){let st=Q_(xe,ft.route.id);return(We&&We.replace)!==!0&&(he="PUSH"),{matches:xe,pendingActionResult:[st.route.id,at,ft.route.id]}}return{matches:xe,pendingActionResult:[ft.route.id,at]}}async function an(De,re,le,xe,ke,Ne,Xe,We,Ke,at,ft,st){let zt=Ne||_I(re,Xe),ln=Xe||We||HU(zt),xn=!Ae&&!at;if(ke){if(xn){let lo=Ft(st);Qt({navigation:zt,...lo!==void 0?{actionData:lo}:{}},{flushSync:ft})}let Zr=await dn(le,re.pathname,De.signal);if(Zr.type==="aborted")return{shortCircuited:!0};if(Zr.type==="error"){let lo=Q_(Zr.partialMatches).route.id;return{matches:Zr.partialMatches,loaderData:{},errors:{[lo]:Zr.error}}}else if(Zr.matches)le=Zr.matches;else{let{error:lo,notFoundMatches:Is,route:Oo}=Di(re.pathname);return{matches:Is,loaderData:{},errors:{[Oo.id]:lo}}}}let ir=i||h,{dsMatches:er,revalidatingFetchers:tr}=kU(De,xe,s,c,e.history,se,le,ln,re,at?[]:r,at===!0,Re,He,wt,Je,Oe,ir,g,st);if(it=++qe,!e.dataStrategy&&!er.some(Zr=>Zr.shouldLoad)&&tr.length===0){let Zr=Er();return Jt(re,{matches:le,loaderData:{},errors:st&&ed(st[1])?{[st[0]]:st[1].error}:null,...UU(st),...Zr?{fetchers:new Map(se.fetchers)}:{}},{flushSync:ft}),{shortCircuited:!0}}if(xn){let Zr={};if(!ke){Zr.navigation=zt;let lo=Ft(st);lo!==void 0&&(Zr.actionData=lo)}tr.length>0&&(Zr.fetchers=kn(tr)),Qt(Zr,{flushSync:ft})}tr.forEach(Zr=>{En(Zr.key),Zr.controller&&Se.set(Zr.key,Zr.controller)});let kr=()=>tr.forEach(Zr=>En(Zr.key));_e&&_e.signal.addEventListener("abort",kr);let{loaderResults:bi,fetcherResults:Ir}=await Rt(er,tr,De,xe);if(De.signal.aborted)return{shortCircuited:!0};_e&&_e.signal.removeEventListener("abort",kr),tr.forEach(Zr=>Se.delete(Zr.key));let li=NC(bi);if(li)return await ut(De,li.result,!0,{replace:Ke}),{shortCircuited:!0};if(li=NC(Ir),li)return Oe.add(li.key),await ut(De,li.result,!0,{replace:Ke}),{shortCircuited:!0};let{loaderData:Kr,errors:wi}=jU(se,le,bi,st,tr,Ir);at&&se.errors&&(wi={...se.errors,...wi});let zi=Er(),$i=_r(it),bo=zi||$i||tr.length>0;return{matches:le,loaderData:Kr,errors:wi,...bo?{fetchers:new Map(se.fetchers)}:{}}}function Ft(De){if(De&&!ed(De[1]))return{[De[0]]:De[1].data};if(se.actionData)return Object.keys(se.actionData).length===0?null:se.actionData}function kn(De){return De.forEach(re=>{let le=se.fetchers.get(re.key),xe=jw(void 0,le?le.data:void 0);se.fetchers.set(re.key,xe)}),new Map(se.fetchers)}async function Yn(De,re,le,xe){En(De);let ke=(xe&&xe.flushSync)===!0,Ne=i||h,Xe=N3(se.location,se.matches,g,le,re,xe==null?void 0:xe.relative),We=By(Ne,Xe,g),Ke=oa(We,Ne,Xe);if(Ke.active&&Ke.matches&&(We=Ke.matches),!We){Un(De,re,th(404,{pathname:Xe}),{flushSync:ke});return}let{path:at,submission:ft,error:st}=IU(!0,Xe,xe);if(st){Un(De,re,st,{flushSync:ke});return}let zt=gS(We,at),ln=new DU(e.unstable_getContext?await e.unstable_getContext():void 0),xn=(xe&&xe.preventScrollReset)===!0;if(ft&&td(ft.formMethod)){await wn(De,re,at,zt,We,ln,Ke.active,ke,xn,ft);return}Je.set(De,{routeId:re,path:at}),await Vn(De,re,at,zt,We,ln,Ke.active,ke,xn,ft)}async function wn(De,re,le,xe,ke,Ne,Xe,We,Ke,at){Wt(),Je.delete(De);function ft(Pi){if(!Pi.route.action&&!Pi.route.lazy){let Yo=th(405,{method:at.formMethod,pathname:le,routeId:re});return Un(De,re,Yo,{flushSync:We}),!0}return!1}if(!Xe&&ft(xe))return;let st=se.fetchers.get(De);zn(De,Uae(at,st),{flushSync:We});let zt=new AbortController,ln=hb(e.history,le,zt.signal,at);if(Xe){let Pi=await dn(ke,le,ln.signal,De);if(Pi.type==="aborted")return;if(Pi.type==="error"){Un(De,re,Pi.error,{flushSync:We});return}else if(Pi.matches){if(ke=Pi.matches,xe=gS(ke,le),ft(xe))return}else{Un(De,re,th(404,{pathname:le}),{flushSync:We});return}}Se.set(De,zt);let xn=qe,ir=Pb(s,c,ln,ke,xe,r,Ne),tr=(await gn(ln,ir,Ne,De))[xe.route.id];if(ln.signal.aborted){Se.get(De)===zt&&Se.delete(De);return}if(wt.has(De)){if(n0(tr)||ed(tr)){zn(De,Ly(void 0));return}}else{if(n0(tr))if(Se.delete(De),it>xn){zn(De,Ly(void 0));return}else return Oe.add(De),zn(De,jw(at)),ut(ln,tr,!1,{fetcherSubmission:at,preventScrollReset:Ke});if(ed(tr)){Un(De,re,tr.error);return}}let kr=se.navigation.location||se.location,bi=hb(e.history,kr,zt.signal),Ir=i||h,li=se.navigation.state!=="idle"?By(Ir,se.navigation.location,g):se.matches;po(li,"Didn't find any matches after fetcher action");let Kr=++qe;tt.set(De,Kr);let wi=jw(at,tr.data);se.fetchers.set(De,wi);let{dsMatches:zi,revalidatingFetchers:$i}=kU(bi,Ne,s,c,e.history,se,li,at,kr,r,!1,Re,He,wt,Je,Oe,Ir,g,[xe.route.id,tr]);$i.filter(Pi=>Pi.key!==De).forEach(Pi=>{let Yo=Pi.key,Qa=se.fetchers.get(Yo),As=jw(void 0,Qa?Qa.data:void 0);se.fetchers.set(Yo,As),En(Yo),Pi.controller&&Se.set(Yo,Pi.controller)}),Qt({fetchers:new Map(se.fetchers)});let bo=()=>$i.forEach(Pi=>En(Pi.key));zt.signal.addEventListener("abort",bo);let{loaderResults:Zr,fetcherResults:lo}=await Rt(zi,$i,bi,Ne);if(zt.signal.aborted)return;zt.signal.removeEventListener("abort",bo),tt.delete(De),Se.delete(De),$i.forEach(Pi=>Se.delete(Pi.key));let Is=NC(Zr);if(Is)return ut(bi,Is.result,!1,{preventScrollReset:Ke});if(Is=NC(lo),Is)return Oe.add(Is.key),ut(bi,Is.result,!1,{preventScrollReset:Ke});let{loaderData:Oo,errors:is}=jU(se,li,Zr,void 0,$i,lo);if(se.fetchers.has(De)){let Pi=Ly(tr.data);se.fetchers.set(De,Pi)}_r(Kr),se.navigation.state==="loading"&&Kr>it?(po(he,"Expected pending action"),_e&&_e.abort(),Jt(se.navigation.location,{matches:li,loaderData:Oo,errors:is,fetchers:new Map(se.fetchers)})):(Qt({errors:is,loaderData:VU(se.loaderData,Oo,li,is),fetchers:new Map(se.fetchers)}),Re=!1)}async function Vn(De,re,le,xe,ke,Ne,Xe,We,Ke,at){let ft=se.fetchers.get(De);zn(De,jw(at,ft?ft.data:void 0),{flushSync:We});let st=new AbortController,zt=hb(e.history,le,st.signal);if(Xe){let tr=await dn(ke,le,zt.signal,De);if(tr.type==="aborted")return;if(tr.type==="error"){Un(De,re,tr.error,{flushSync:We});return}else if(tr.matches)ke=tr.matches,xe=gS(ke,le);else{Un(De,re,th(404,{pathname:le}),{flushSync:We});return}}Se.set(De,st);let ln=qe,xn=Pb(s,c,zt,ke,xe,r,Ne),er=(await gn(zt,xn,Ne,De))[xe.route.id];if(Se.get(De)===st&&Se.delete(De),!zt.signal.aborted){if(wt.has(De)){zn(De,Ly(void 0));return}if(n0(er))if(it>ln){zn(De,Ly(void 0));return}else{Oe.add(De),await ut(zt,er,!1,{preventScrollReset:Ke});return}if(ed(er)){Un(De,re,er.error);return}zn(De,Ly(er.data))}}async function ut(De,re,le,{submission:xe,fetcherSubmission:ke,preventScrollReset:Ne,replace:Xe}={}){re.response.headers.has("X-Remix-Revalidate")&&(Re=!0);let We=re.response.headers.get("Location");po(We,"Expected a Location header on the redirect Response"),We=BU(We,new URL(De.url),g);let Ke=GS(se.location,We,{_isRedirect:!0});if(n){let xn=!1;if(re.response.headers.has("X-Remix-Reload-Document"))xn=!0;else if(qB.test(We)){const ir=e.history.createURL(We);xn=ir.origin!==t.location.origin||ch(ir.pathname,g)==null}if(xn){Xe?t.location.replace(We):t.location.assign(We);return}}_e=null;let at=Xe===!0||re.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ft,formAction:st,formEncType:zt}=se.navigation;!xe&&!ke&&ft&&st&&zt&&(xe=HU(se.navigation));let ln=xe||ke;if(Tae.has(re.response.status)&&ln&&td(ln.formMethod))await Kt(at,Ke,{submission:{...ln,formAction:We},preventScrollReset:Ne||ye,enableViewTransition:le?ae:void 0});else{let xn=_I(Ke,xe);await Kt(at,Ke,{overrideNavigation:xn,fetcherSubmission:ke,preventScrollReset:Ne||ye,enableViewTransition:le?ae:void 0})}}async function gn(De,re,le,xe){let ke,Ne={};try{ke=await kae(w,De,re,xe,le,!1)}catch(Xe){return re.filter(We=>We.shouldLoad).forEach(We=>{Ne[We.route.id]={type:"error",error:Xe}}),Ne}for(let[Xe,We]of Object.entries(ke))if(Nae(We)){let Ke=We.result;Ne[Xe]={type:"redirect",response:zae(Ke,De,Xe,re,g)}}else Ne[Xe]=await Lae(We);return Ne}async function Rt(De,re,le,xe){let ke=gn(le,De,xe,null),Ne=Promise.all(re.map(async Ke=>{if(Ke.matches&&Ke.match&&Ke.request&&Ke.controller){let ft=(await gn(Ke.request,Ke.matches,xe,Ke.key))[Ke.match.route.id];return{[Ke.key]:ft}}else return Promise.resolve({[Ke.key]:{type:"error",error:th(404,{pathname:Ke.path})}})})),Xe=await ke,We=(await Ne).reduce((Ke,at)=>Object.assign(Ke,at),{});return{loaderResults:Xe,fetcherResults:We}}function Wt(){Re=!0,Je.forEach((De,re)=>{Se.has(re)&&He.add(re),En(re)})}function zn(De,re,le={}){se.fetchers.set(De,re),Qt({fetchers:new Map(se.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Un(De,re,le,xe={}){let ke=Q_(se.matches,re);Xn(De),Qt({errors:{[ke.route.id]:le},fetchers:new Map(se.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function mr(De){return yt.set(De,(yt.get(De)||0)+1),wt.has(De)&&wt.delete(De),se.fetchers.get(De)||Eae}function Xn(De){let re=se.fetchers.get(De);Se.has(De)&&!(re&&re.state==="loading"&&tt.has(De))&&En(De),Je.delete(De),tt.delete(De),Oe.delete(De),wt.delete(De),He.delete(De),se.fetchers.delete(De)}function or(De){let re=(yt.get(De)||0)-1;re<=0?(yt.delete(De),wt.add(De)):yt.set(De,re),Qt({fetchers:new Map(se.fetchers)})}function En(De){let re=Se.get(De);re&&(re.abort(),Se.delete(De))}function Fr(De){for(let re of De){let le=mr(re),xe=Ly(le.data);se.fetchers.set(re,xe)}}function Er(){let De=[],re=!1;for(let le of Oe){let xe=se.fetchers.get(le);po(xe,`Expected fetcher: ${le}`),xe.state==="loading"&&(Oe.delete(le),De.push(le),re=!0)}return Fr(De),re}function _r(De){let re=[];for(let[le,xe]of tt)if(xe<De){let ke=se.fetchers.get(le);po(ke,`Expected fetcher: ${le}`),ke.state==="loading"&&(En(le),tt.delete(le),re.push(le))}return Fr(re),re.length>0}function nr(De,re){let le=se.blockers.get(De)||Nw;return $t.get(De)!==re&&$t.set(De,re),le}function Wr(De){se.blockers.delete(De),$t.delete(De)}function wr(De,re){let le=se.blockers.get(De)||Nw;po(le.state==="unblocked"&&re.state==="blocked"||le.state==="blocked"&&re.state==="blocked"||le.state==="blocked"&&re.state==="proceeding"||le.state==="blocked"&&re.state==="unblocked"||le.state==="proceeding"&&re.state==="unblocked",`Invalid blocker state transition: ${le.state} -> ${re.state}`);let xe=new Map(se.blockers);xe.set(De,re),Qt({blockers:xe})}function Rr({currentLocation:De,nextLocation:re,historyAction:le}){if($t.size===0)return;$t.size>1&&ga(!1,"A router only supports one blocker at a time");let xe=Array.from($t.entries()),[ke,Ne]=xe[xe.length-1],Xe=se.blockers.get(ke);if(!(Xe&&Xe.state==="proceeding")&&Ne({currentLocation:De,nextLocation:re,historyAction:le}))return ke}function Di(De){let re=th(404,{pathname:De}),le=i||h,{matches:xe,route:ke}=$U(le);return{notFoundMatches:xe,route:ke,error:re}}function Wo(De,re,le){if(k=De,F=re,I=le||null,!j&&se.navigation===vI){j=!0;let xe=bl(se.location,se.matches);xe!=null&&Qt({restoreScrollPosition:xe})}return()=>{k=null,F=null,I=null}}function ko(De,re){return I&&I(De,re.map(xe=>nae(xe,se.loaderData)))||De.key}function Ro(De,re){if(k&&F){let le=ko(De,re);k[le]=F()}}function bl(De,re){if(k){let le=ko(De,re),xe=k[le];if(typeof xe=="number")return xe}return null}function oa(De,re,le){if(e.patchRoutesOnNavigation)if(De){if(Object.keys(De[0].params).length>0)return{active:!0,matches:HA(re,le,g,!0)}}else return{active:!0,matches:HA(re,le,g,!0)||[]};return{active:!1,matches:null}}async function dn(De,re,le,xe){if(!e.patchRoutesOnNavigation)return{type:"success",matches:De};let ke=De;for(;;){let Ne=i==null,Xe=i||h,We=c;try{await e.patchRoutesOnNavigation({signal:le,path:re,matches:ke,fetcherKey:xe,patch:(ft,st)=>{le.aborted||OU(ft,st,Xe,We,s)}})}catch(ft){return{type:"error",error:ft,partialMatches:ke}}finally{Ne&&!le.aborted&&(h=[...h])}if(le.aborted)return{type:"aborted"};let Ke=By(Xe,re,g);if(Ke)return{type:"success",matches:Ke};let at=HA(Xe,re,g,!0);if(!at||ke.length===at.length&&ke.every((ft,st)=>ft.route.id===at[st].route.id))return{type:"success",matches:null};ke=at}}function Hs(De){c={},i=PM(De,s,void 0,c)}function Pr(De,re){let le=i==null;OU(De,re,i||h,c,s),le&&(h=[...h],Qt({}))}return ee={get basename(){return g},get future(){return T},get state(){return se},get routes(){return h},get window(){return t},initialize:sn,subscribe:yn,enableScrollRestoration:Wo,navigate:fn,fetch:Yn,revalidate:Bt,createHref:De=>e.history.createHref(De),encodeLocation:De=>e.history.encodeLocation(De),getFetcher:mr,deleteFetcher:or,dispose:Rn,getBlocker:nr,deleteBlocker:Wr,patchRoutes:Pr,_internalFetchControllers:Se,_internalSetRoutes:Hs},ee}function Mae(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function N3(e,t,n,r,s,c){let h,i;if(s){h=[];for(let w of t)if(h.push(w),w.route.id===s){i=w;break}}else h=t,i=t[t.length-1];let g=PR(r||".",DR(h),ch(e.pathname,n)||e.pathname,c==="path");if(r==null&&(g.search=e.search,g.hash=e.hash),(r==null||r===""||r===".")&&i){let w=HB(g.search);if(i.route.index&&!w)g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index";else if(!i.route.index&&w){let T=new URLSearchParams(g.search),A=T.getAll("index");T.delete("index"),A.filter(k=>k).forEach(k=>T.append("index",k));let D=T.toString();g.search=D?`?${D}`:""}}return n!=="/"&&(g.pathname=g.pathname==="/"?n:Np([n,g.pathname])),Gy(g)}function IU(e,t,n){if(!n||!Mae(n))return{path:t};if(n.formMethod&&!jae(n.formMethod))return{path:t,error:th(405,{method:n.formMethod})};let r=()=>({path:t,error:th(400,{type:"invalid-body"})}),c=(n.formMethod||"get").toUpperCase(),h=VY(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!td(c))return r();let A=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((D,[k,I])=>`${D}${k}=${I}
`,""):String(n.body);return{path:t,submission:{formMethod:c,formAction:h,formEncType:n.formEncType,formData:void 0,json:void 0,text:A}}}else if(n.formEncType==="application/json"){if(!td(c))return r();try{let A=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:c,formAction:h,formEncType:n.formEncType,formData:void 0,json:A,text:void 0}}}catch{return r()}}}po(typeof FormData=="function","FormData is not available in this environment");let i,g;if(n.formData)i=U3(n.formData),g=n.formData;else if(n.body instanceof FormData)i=U3(n.body),g=n.body;else if(n.body instanceof URLSearchParams)i=n.body,g=NU(i);else if(n.body==null)i=new URLSearchParams,g=new FormData;else try{i=new URLSearchParams(n.body),g=NU(i)}catch{return r()}let w={formMethod:c,formAction:h,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(td(w.formMethod))return{path:t,submission:w};let T=rv(t);return e&&T.search&&HB(T.search)&&i.append("index",""),T.search=`?${i}`,{path:Gy(T),submission:w}}function kU(e,t,n,r,s,c,h,i,g,w,T,A,D,k,I,F,j,V,W){var Te;let Z=W?ed(W[1])?W[1].error:W[1].data:void 0,K=s.createURL(c.location),ee=s.createURL(g),se;if(T&&c.errors){let Ae=Object.keys(c.errors)[0];se=h.findIndex(Re=>Re.route.id===Ae)}else if(W&&ed(W[1])){let Ae=W[0];se=h.findIndex(Re=>Re.route.id===Ae)-1}let he=W?W[1].statusCode:void 0,ye=he&&he>=400,_e={currentUrl:K,currentParams:((Te=c.matches[0])==null?void 0:Te.params)||{},nextUrl:ee,nextParams:h[0].params,...i,actionResult:Z,actionStatus:he},ae=h.map((Ae,Re)=>{let{route:He}=Ae,Se=null;if(se!=null&&Re>se?Se=!1:He.lazy?Se=!0:He.loader==null?Se=!1:T?Se=j3(He,c.loaderData,c.errors):Rae(c.loaderData,c.matches[Re],Ae)&&(Se=!0),Se!==null)return V3(n,r,e,Ae,w,t,Se);let qe=ye?!1:A||K.pathname+K.search===ee.pathname+ee.search||K.search!==ee.search||Dae(c.matches[Re],Ae),it={..._e,defaultShouldRevalidate:qe},tt=kM(Ae,it);return V3(n,r,e,Ae,w,t,tt,it)}),be=[];return I.forEach((Ae,Re)=>{if(T||!h.some(Je=>Je.route.id===Ae.routeId)||k.has(Re))return;let He=By(j,Ae.path,V);if(!He){be.push({key:Re,routeId:Ae.routeId,path:Ae.path,matches:null,match:null,request:null,controller:null});return}if(F.has(Re))return;let Se=c.fetchers.get(Re),qe=gS(He,Ae.path),it=new AbortController,tt=hb(s,Ae.path,it.signal),Oe=null;if(D.has(Re))D.delete(Re),Oe=Pb(n,r,tt,He,qe,w,t);else if(Se&&Se.state!=="idle"&&Se.data===void 0)A&&(Oe=Pb(n,r,tt,He,qe,w,t));else{let Je={..._e,defaultShouldRevalidate:ye?!1:A};kM(qe,Je)&&(Oe=Pb(n,r,tt,He,qe,w,t,Je))}Oe&&be.push({key:Re,routeId:Ae.routeId,path:Ae.path,matches:Oe,match:qe,request:tt,controller:it})}),{dsMatches:ae,revalidatingFetchers:be}}function j3(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,s=n!=null&&n[e.id]!==void 0;return!r&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!s}function Rae(e,t,n){let r=!t||n.route.id!==t.route.id,s=!e.hasOwnProperty(n.route.id);return r||s}function Dae(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function kM(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function OU(e,t,n,r,s){let c;if(e){let g=r[e];po(g,`No route found to patch children into: routeId = ${e}`),g.children||(g.children=[]),c=g.children}else c=n;let h=t.filter(g=>!c.some(w=>zY(g,w))),i=PM(h,s,[e||"_","patch",String((c==null?void 0:c.length)||"0")],r);c.push(...i)}function zY(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var s;return(s=t.children)==null?void 0:s.some(c=>zY(n,c))}):!1}var LU=new WeakMap,FY=({key:e,route:t,manifest:n,mapRouteProperties:r})=>{let s=n[t.id];if(po(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let c=s.lazy[e];if(!c)return;let h=LU.get(s);h||(h={},LU.set(s,h));let i=h[e];if(i)return i;let g=(async()=>{let w=Qse(e),A=s[e]!==void 0&&e!=="hasErrorBoundary";if(w)ga(!w,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),h[e]=Promise.resolve();else if(A)ga(!1,`Route "${s.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let D=await c();D!=null&&(Object.assign(s,{[e]:D}),Object.assign(s,r(s)))}typeof s.lazy=="object"&&(s.lazy[e]=void 0,Object.values(s.lazy).every(D=>D===void 0)&&(s.lazy=void 0))})();return h[e]=g,g},zU=new WeakMap;function Pae(e,t,n,r,s){let c=n[e.id];if(po(c,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let T=zU.get(c);if(T)return{lazyRoutePromise:T,lazyHandlerPromise:T};let A=(async()=>{po(typeof e.lazy=="function","No lazy route function found");let D=await e.lazy(),k={};for(let I in D){let F=D[I];if(F===void 0)continue;let j=eae(I),W=c[I]!==void 0&&I!=="hasErrorBoundary";j?ga(!j,"Route property "+I+" is not a supported property to be returned from a lazy route function. This property will be ignored."):W?ga(!W,`Route "${c.id}" has a static property "${I}" defined but its lazy function is also returning a value for this property. The lazy route property "${I}" will be ignored.`):k[I]=F}Object.assign(c,k),Object.assign(c,{...r(c),lazy:void 0})})();return zU.set(c,A),A.catch(()=>{}),{lazyRoutePromise:A,lazyHandlerPromise:A}}let h=Object.keys(e.lazy),i=[],g;for(let T of h){if(s&&s.includes(T))continue;let A=FY({key:T,route:e,manifest:n,mapRouteProperties:r});A&&(i.push(A),T===t&&(g=A))}let w=i.length>0?Promise.all(i).then(()=>{}):void 0;return w==null||w.catch(()=>{}),g==null||g.catch(()=>{}),{lazyRoutePromise:w,lazyHandlerPromise:g}}async function FU(e){let t=e.matches.filter(s=>s.shouldLoad),n={};return(await Promise.all(t.map(s=>s.resolve()))).forEach((s,c)=>{n[t[c].route.id]=s}),n}async function Iae(e){return e.matches.some(t=>t.route.unstable_middleware)?BY(e,!1,()=>FU(e),(t,n)=>({[n]:{type:"error",result:t}})):FU(e)}async function BY(e,t,n,r){let{matches:s,request:c,params:h,context:i}=e,g={handlerResult:void 0};try{let w=s.flatMap(A=>A.route.unstable_middleware?A.route.unstable_middleware.map(D=>[A.route.id,D]):[]),T=await NY({request:c,params:h,context:i},w,t,g,n);return t?T:g.handlerResult}catch(w){if(!g.middlewareError)throw w;let T=await r(g.middlewareError.error,g.middlewareError.routeId);return g.handlerResult?Object.assign(g.handlerResult,T):T}}async function NY(e,t,n,r,s,c=0){let{request:h}=e;if(h.signal.aborted)throw h.signal.reason?h.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${h.method} ${h.url}`);let i=t[c];if(!i)return r.handlerResult=await s(),r.handlerResult;let[g,w]=i,T=!1,A,D=async()=>{if(T)throw new Error("You may only call `next()` once per middleware");T=!0,await NY(e,t,n,r,s,c+1)};try{let k=await w({request:e.request,params:e.params,context:e.context},D);return T?k===void 0?A:k:D()}catch(k){throw r.middlewareError?r.middlewareError.error!==k&&(r.middlewareError={routeId:g,error:k}):r.middlewareError={routeId:g,error:k},k}}function jY(e,t,n,r,s){let c=FY({key:"unstable_middleware",route:r.route,manifest:t,mapRouteProperties:e}),h=Pae(r.route,td(n.method)?"action":"loader",t,e,s);return{middleware:c,route:h.lazyRoutePromise,handler:h.lazyHandlerPromise}}function V3(e,t,n,r,s,c,h,i=null){let g=!1,w=jY(e,t,n,r,s);return{...r,_lazyPromises:w,shouldLoad:h,unstable_shouldRevalidateArgs:i,unstable_shouldCallHandler(T){return g=!0,i?typeof T=="boolean"?kM(r,{...i,defaultShouldRevalidate:T}):kM(r,i):h},resolve(T){return g||h||T&&n.method==="GET"&&(r.route.lazy||r.route.loader)?Oae({request:n,match:r,lazyHandlerPromise:w==null?void 0:w.handler,lazyRoutePromise:w==null?void 0:w.route,handlerOverride:T,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Pb(e,t,n,r,s,c,h,i=null){return r.map(g=>g.route.id!==s.route.id?{...g,shouldLoad:!1,unstable_shouldRevalidateArgs:i,unstable_shouldCallHandler:()=>!1,_lazyPromises:jY(e,t,n,g,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:V3(e,t,n,g,c,h,!0,i))}async function kae(e,t,n,r,s,c){n.some(w=>{var T;return(T=w._lazyPromises)==null?void 0:T.middleware})&&await Promise.all(n.map(w=>{var T;return(T=w._lazyPromises)==null?void 0:T.middleware}));let h={request:t,params:n[0].params,context:s,matches:n},g=await e({...h,fetcherKey:r,unstable_runClientMiddleware:w=>{let T=h;return BY(T,!1,()=>w({...T,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(A,D)=>({[D]:{type:"error",result:A}}))}});try{await Promise.all(n.flatMap(w=>{var T,A;return[(T=w._lazyPromises)==null?void 0:T.handler,(A=w._lazyPromises)==null?void 0:A.route]}))}catch{}return g}async function Oae({request:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:s,scopedContext:c}){let h,i,g=td(e.method),w=g?"action":"loader",T=A=>{let D,k=new Promise((j,V)=>D=V);i=()=>D(),e.signal.addEventListener("abort",i);let I=j=>typeof A!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${w}" [routeId: ${t.route.id}]`)):A({request:e,params:t.params,context:c},...j!==void 0?[j]:[]),F=(async()=>{try{return{type:"data",result:await(s?s(V=>I(V)):I())}}catch(j){return{type:"error",result:j}}})();return Promise.race([F,k])};try{let A=g?t.route.action:t.route.loader;if(n||r)if(A){let D,[k]=await Promise.all([T(A).catch(I=>{D=I}),n,r]);if(D!==void 0)throw D;h=k}else{await n;let D=g?t.route.action:t.route.loader;if(D)[h]=await Promise.all([T(D),r]);else if(w==="action"){let k=new URL(e.url),I=k.pathname+k.search;throw th(405,{method:e.method,pathname:I,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(A)h=await T(A);else{let D=new URL(e.url),k=D.pathname+D.search;throw th(404,{pathname:k})}}catch(A){return{type:"error",result:A}}finally{i&&e.signal.removeEventListener("abort",i)}return h}async function Lae(e){var r,s,c,h,i,g;let{result:t,type:n}=e;if(UY(t)){let w;try{let T=t.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?t.body==null?w=null:w=await t.json():w=await t.text()}catch(T){return{type:"error",error:T}}return n==="error"?{type:"error",error:new IM(t.status,t.statusText,w),statusCode:t.status,headers:t.headers}:{type:"data",data:w,statusCode:t.status,headers:t.headers}}return n==="error"?qU(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new IM(((c=t.init)==null?void 0:c.status)||500,void 0,t.data),statusCode:WS(t)?t.status:void 0,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:WS(t)?t.status:void 0}:qU(t)?{type:"data",data:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(g=t.init)!=null&&g.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function zae(e,t,n,r,s){let c=e.headers.get("Location");if(po(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!qB.test(c)){let h=r.slice(0,r.findIndex(i=>i.route.id===n)+1);c=N3(new URL(t.url),h,s,c),e.headers.set("Location",c)}return e}function BU(e,t,n){if(qB.test(e)){let r=e,s=r.startsWith("//")?new URL(t.protocol+r):new URL(r),c=ch(s.pathname,n)!=null;if(s.origin===t.origin&&c)return s.pathname+s.search+s.hash}return e}function hb(e,t,n,r){let s=e.createURL(VY(t)).toString(),c={signal:n};if(r&&td(r.formMethod)){let{formMethod:h,formEncType:i}=r;c.method=h.toUpperCase(),i==="application/json"?(c.headers=new Headers({"Content-Type":i}),c.body=JSON.stringify(r.json)):i==="text/plain"?c.body=r.text:i==="application/x-www-form-urlencoded"&&r.formData?c.body=U3(r.formData):c.body=r.formData}return new Request(s,c)}function U3(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function NU(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Fae(e,t,n,r=!1,s=!1){let c={},h=null,i,g=!1,w={},T=n&&ed(n[1])?n[1].error:void 0;return e.forEach(A=>{if(!(A.route.id in t))return;let D=A.route.id,k=t[D];if(po(!n0(k),"Cannot handle redirect results in processLoaderData"),ed(k)){let I=k.error;if(T!==void 0&&(I=T,T=void 0),h=h||{},s)h[D]=I;else{let F=Q_(e,D);h[F.route.id]==null&&(h[F.route.id]=I)}r||(c[D]=LY),g||(g=!0,i=WS(k.error)?k.error.status:500),k.headers&&(w[D]=k.headers)}else c[D]=k.data,k.statusCode&&k.statusCode!==200&&!g&&(i=k.statusCode),k.headers&&(w[D]=k.headers)}),T!==void 0&&n&&(h={[n[0]]:T},n[2]&&(c[n[2]]=void 0)),{loaderData:c,errors:h,statusCode:i||200,loaderHeaders:w}}function jU(e,t,n,r,s,c){let{loaderData:h,errors:i}=Fae(t,n,r);return s.filter(g=>!g.matches||g.matches.some(w=>w.shouldLoad)).forEach(g=>{let{key:w,match:T,controller:A}=g,D=c[w];if(po(D,"Did not find corresponding fetcher result"),!(A&&A.signal.aborted))if(ed(D)){let k=Q_(e.matches,T==null?void 0:T.route.id);i&&i[k.route.id]||(i={...i,[k.route.id]:D.error}),e.fetchers.delete(w)}else if(n0(D))po(!1,"Unhandled fetcher revalidation redirect");else{let k=Ly(D.data);e.fetchers.set(w,k)}}),{loaderData:h,errors:i}}function VU(e,t,n,r){let s=Object.entries(t).filter(([,c])=>c!==LY).reduce((c,[h,i])=>(c[h]=i,c),{});for(let c of n){let h=c.route.id;if(!t.hasOwnProperty(h)&&e.hasOwnProperty(h)&&c.route.loader&&(s[h]=e[h]),r&&r.hasOwnProperty(h))break}return s}function UU(e){return e?ed(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Q_(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function $U(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function th(e,{pathname:t,routeId:n,method:r,type:s,message:c}={}){let h="Unknown Server Error",i="Unknown @remix-run/router error";return e===400?(h="Bad Request",r&&t&&n?i=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:s==="invalid-body"&&(i="Unable to encode submission body")):e===403?(h="Forbidden",i=`Route "${n}" does not match URL "${t}"`):e===404?(h="Not Found",i=`No route matches URL "${t}"`):e===405&&(h="Method Not Allowed",r&&t&&n?i=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(i=`Invalid request method "${r.toUpperCase()}"`)),new IM(e||500,h,new Error(i),!0)}function NC(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,s]=t[n];if(n0(s))return{key:r,result:s}}}function VY(e){let t=typeof e=="string"?rv(e):e;return Gy({...t,hash:""})}function Bae(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Nae(e){return UY(e.result)&&Sae.has(e.result.status)}function ed(e){return e.type==="error"}function n0(e){return(e&&e.type)==="redirect"}function qU(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function UY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function jae(e){return wae.has(e.toUpperCase())}function td(e){return xae.has(e.toUpperCase())}function HB(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function gS(e,t){let n=typeof t=="string"?rv(t).search:t.search;if(e[e.length-1].route.index&&HB(n||""))return e[e.length-1];let r=IY(e);return r[r.length-1]}function HU(e){let{formMethod:t,formAction:n,formEncType:r,text:s,formData:c,json:h}=e;if(!(!t||!n||!r)){if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(c!=null)return{formMethod:t,formAction:n,formEncType:r,formData:c,json:void 0,text:void 0};if(h!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:h,text:void 0}}}function _I(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Vae(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function jw(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Uae(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ly(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $ae(e,t){try{let n=e.sessionStorage.getItem(OY);if(n){let r=JSON.parse(n);for(let[s,c]of Object.entries(r||{}))c&&Array.isArray(c)&&t.set(s,new Set(c||[]))}}catch{}}function qae(e,t){if(t.size>0){let n={};for(let[r,s]of t)n[r]=[...s];try{e.sessionStorage.setItem(OY,JSON.stringify(n))}catch(r){ga(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Hae(){let e,t,n=new Promise((r,s)=>{e=async c=>{r(c);try{await n}catch{}},t=async c=>{s(c);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var z0=q.createContext(null);z0.displayName="DataRouter";var BT=q.createContext(null);BT.displayName="DataRouterState";var GB=q.createContext({isTransitioning:!1});GB.displayName="ViewTransition";var $Y=q.createContext(new Map);$Y.displayName="Fetchers";var Gae=q.createContext(null);Gae.displayName="Await";var Pf=q.createContext(null);Pf.displayName="Navigation";var IR=q.createContext(null);IR.displayName="Location";var If=q.createContext({outlet:null,matches:[],isDataRoute:!1});If.displayName="Route";var WB=q.createContext(null);WB.displayName="RouteError";function Wae(e,{relative:t}={}){po(s1(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=q.useContext(Pf),{hash:s,pathname:c,search:h}=NT(e,{relative:t}),i=c;return n!=="/"&&(i=c==="/"?n:Np([n,c])),r.createHref({pathname:i,search:h,hash:s})}function s1(){return q.useContext(IR)!=null}function gh(){return po(s1(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(IR).location}var qY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HY(e){q.useContext(Pf).static||q.useLayoutEffect(e)}function iv(){let{isDataRoute:e}=q.useContext(If);return e?lle():Yae()}function Yae(){po(s1(),"useNavigate() may be used only in the context of a <Router> component.");let e=q.useContext(z0),{basename:t,navigator:n}=q.useContext(Pf),{matches:r}=q.useContext(If),{pathname:s}=gh(),c=JSON.stringify(DR(r)),h=q.useRef(!1);return HY(()=>{h.current=!0}),q.useCallback((g,w={})=>{if(ga(h.current,qY),!h.current)return;if(typeof g=="number"){n.go(g);return}let T=PR(g,JSON.parse(c),s,w.relative==="path");e==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:Np([t,T.pathname])),(w.replace?n.replace:n.push)(T,w.state,w)},[t,n,c,s,e])}var Xae=q.createContext(null);function Zae(e){let t=q.useContext(If).outlet;return t&&q.createElement(Xae.Provider,{value:e},t)}function NT(e,{relative:t}={}){let{matches:n}=q.useContext(If),{pathname:r}=gh(),s=JSON.stringify(DR(n));return q.useMemo(()=>PR(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function Kae(e,t,n,r){po(s1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:c}=q.useContext(Pf),{matches:h}=q.useContext(If),i=h[h.length-1],g=i?i.params:{},w=i?i.pathname:"/",T=i?i.pathnameBase:"/",A=i&&i.route;{let W=A&&A.path||"";GY(w,!A||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let D=gh(),k;k=D;let I=k.pathname||"/",F=I;if(T!=="/"){let W=T.replace(/^\//,"").split("/");F="/"+I.replace(/^\//,"").split("/").slice(W.length).join("/")}let j=!c&&n&&n.matches&&n.matches.length>0?n.matches:By(e,{pathname:F});return ga(A||j!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),ga(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),nle(j&&j.map(W=>Object.assign({},W,{params:Object.assign({},g,W.params),pathname:Np([T,s.encodeLocation?s.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?T:Np([T,s.encodeLocation?s.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),h,n,r)}function Qae(){let e=ale(),t=WS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:c},"ErrorBoundary")," or"," ",q.createElement("code",{style:c},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:s},n):null,h)}var Jae=q.createElement(Qae,null),ele=class extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?q.createElement(If.Provider,{value:this.props.routeContext},q.createElement(WB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tle({routeContext:e,match:t,children:n}){let r=q.useContext(z0);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(If.Provider,{value:e},n)}function nle(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,c=n==null?void 0:n.errors;if(c!=null){let g=s.findIndex(w=>w.route.id&&(c==null?void 0:c[w.route.id])!==void 0);po(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,g+1))}let h=!1,i=-1;if(n)for(let g=0;g<s.length;g++){let w=s[g];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(i=g),w.route.id){let{loaderData:T,errors:A}=n,D=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!A||A[w.route.id]===void 0);if(w.route.lazy||D){h=!0,i>=0?s=s.slice(0,i+1):s=[s[0]];break}}}return s.reduceRight((g,w,T)=>{let A,D=!1,k=null,I=null;n&&(A=c&&w.route.id?c[w.route.id]:void 0,k=w.route.errorElement||Jae,h&&(i<0&&T===0?(GY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,I=null):i===T&&(D=!0,I=w.route.hydrateFallbackElement||null)));let F=t.concat(s.slice(0,T+1)),j=()=>{let V;return A?V=k:D?V=I:w.route.Component?V=q.createElement(w.route.Component,null):w.route.element?V=w.route.element:V=g,q.createElement(tle,{match:w,routeContext:{outlet:g,matches:F,isDataRoute:n!=null},children:V})};return n&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?q.createElement(ele,{location:n.location,revalidation:n.revalidation,component:k,error:A,children:j(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):j()},null)}function YB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rle(e){let t=q.useContext(z0);return po(t,YB(e)),t}function ile(e){let t=q.useContext(BT);return po(t,YB(e)),t}function ole(e){let t=q.useContext(If);return po(t,YB(e)),t}function XB(e){let t=ole(e),n=t.matches[t.matches.length-1];return po(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function sle(){return XB("useRouteId")}function ale(){var r;let e=q.useContext(WB),t=ile("useRouteError"),n=XB("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function lle(){let{router:e}=rle("useNavigate"),t=XB("useNavigate"),n=q.useRef(!1);return HY(()=>{n.current=!0}),q.useCallback(async(s,c={})=>{ga(n.current,qY),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...c}))},[e,t])}var GU={};function GY(e,t,n){!t&&!GU[e]&&(GU[e]=!0,ga(!1,n))}var WU={};function YU(e,t){!e&&!WU[t]&&(WU[t]=!0,console.warn(t))}function cle(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&ga(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:q.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&ga(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:q.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&ga(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:q.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var ule=["HydrateFallback","hydrateFallbackElement"],dle=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function hle({router:e,flushSync:t}){let[n,r]=q.useState(e.state),[s,c]=q.useState(),[h,i]=q.useState({isTransitioning:!1}),[g,w]=q.useState(),[T,A]=q.useState(),[D,k]=q.useState(),I=q.useRef(new Map),F=q.useCallback((Z,{deletedFetchers:K,flushSync:ee,viewTransitionOpts:se})=>{Z.fetchers.forEach((ye,_e)=>{ye.data!==void 0&&I.current.set(_e,ye.data)}),K.forEach(ye=>I.current.delete(ye)),YU(ee===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let he=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(YU(se==null||he,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!se||!he){t&&ee?t(()=>r(Z)):q.startTransition(()=>r(Z));return}if(t&&ee){t(()=>{T&&(g&&g.resolve(),T.skipTransition()),i({isTransitioning:!0,flushSync:!0,currentLocation:se.currentLocation,nextLocation:se.nextLocation})});let ye=e.window.document.startViewTransition(()=>{t(()=>r(Z))});ye.finished.finally(()=>{t(()=>{w(void 0),A(void 0),c(void 0),i({isTransitioning:!1})})}),t(()=>A(ye));return}T?(g&&g.resolve(),T.skipTransition(),k({state:Z,currentLocation:se.currentLocation,nextLocation:se.nextLocation})):(c(Z),i({isTransitioning:!0,flushSync:!1,currentLocation:se.currentLocation,nextLocation:se.nextLocation}))},[e.window,t,T,g]);q.useLayoutEffect(()=>e.subscribe(F),[e,F]),q.useEffect(()=>{h.isTransitioning&&!h.flushSync&&w(new dle)},[h]),q.useEffect(()=>{if(g&&s&&e.window){let Z=s,K=g.promise,ee=e.window.document.startViewTransition(async()=>{q.startTransition(()=>r(Z)),await K});ee.finished.finally(()=>{w(void 0),A(void 0),c(void 0),i({isTransitioning:!1})}),A(ee)}},[s,g,e.window]),q.useEffect(()=>{g&&s&&n.location.key===s.location.key&&g.resolve()},[g,T,n.location,s]),q.useEffect(()=>{!h.isTransitioning&&D&&(c(D.state),i({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}),k(void 0))},[h.isTransitioning,D]);let j=q.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:Z=>e.navigate(Z),push:(Z,K,ee)=>e.navigate(Z,{state:K,preventScrollReset:ee==null?void 0:ee.preventScrollReset}),replace:(Z,K,ee)=>e.navigate(Z,{replace:!0,state:K,preventScrollReset:ee==null?void 0:ee.preventScrollReset})}),[e]),V=e.basename||"/",W=q.useMemo(()=>({router:e,navigator:j,static:!1,basename:V}),[e,j,V]);return q.createElement(q.Fragment,null,q.createElement(z0.Provider,{value:W},q.createElement(BT.Provider,{value:n},q.createElement($Y.Provider,{value:I.current},q.createElement(GB.Provider,{value:h},q.createElement(gle,{basename:V,location:n.location,navigationType:n.historyAction,navigator:j},q.createElement(fle,{routes:e.routes,future:e.future,state:n})))))),null)}var fle=q.memo(ple);function ple({routes:e,future:t,state:n}){return Kae(e,void 0,n,t)}function mle({to:e,replace:t,state:n,relative:r}){po(s1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=q.useContext(Pf);ga(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=q.useContext(If),{pathname:h}=gh(),i=iv(),g=PR(e,DR(c),h,r==="path"),w=JSON.stringify(g);return q.useEffect(()=>{i(JSON.parse(w),{replace:t,state:n,relative:r})},[i,w,r,t,n]),null}function WY(e){return Zae(e.context)}function gle({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:c=!1}){po(!s1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),i=q.useMemo(()=>({basename:h,navigator:s,static:c,future:{}}),[h,s,c]);typeof n=="string"&&(n=rv(n));let{pathname:g="/",search:w="",hash:T="",state:A=null,key:D="default"}=n,k=q.useMemo(()=>{let I=ch(g,h);return I==null?null:{location:{pathname:I,search:w,hash:T,state:A,key:D},navigationType:r}},[h,g,w,T,A,D,r]);return ga(k!=null,`<Router basename="${h}"> is not able to match the URL "${g}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:q.createElement(Pf.Provider,{value:i},q.createElement(IR.Provider,{children:t,value:k}))}var GA="get",WA="application/x-www-form-urlencoded";function kR(e){return e!=null&&typeof e.tagName=="string"}function yle(e){return kR(e)&&e.tagName.toLowerCase()==="button"}function vle(e){return kR(e)&&e.tagName.toLowerCase()==="form"}function _le(e){return kR(e)&&e.tagName.toLowerCase()==="input"}function xle(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ble(e,t){return e.button===0&&(!t||t==="_self")&&!xle(e)}var jC=null;function wle(){if(jC===null)try{new FormData(document.createElement("form"),0),jC=!1}catch{jC=!0}return jC}var Sle=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xI(e){return e!=null&&!Sle.has(e)?(ga(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${WA}"`),null):e}function Tle(e,t){let n,r,s,c,h;if(vle(e)){let i=e.getAttribute("action");r=i?ch(i,t):null,n=e.getAttribute("method")||GA,s=xI(e.getAttribute("enctype"))||WA,c=new FormData(e)}else if(yle(e)||_le(e)&&(e.type==="submit"||e.type==="image")){let i=e.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||i.getAttribute("action");if(r=g?ch(g,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||GA,s=xI(e.getAttribute("formenctype"))||xI(i.getAttribute("enctype"))||WA,c=new FormData(i,e),!wle()){let{name:w,type:T,value:A}=e;if(T==="image"){let D=w?`${w}.`:"";c.append(`${D}x`,"0"),c.append(`${D}y`,"0")}else w&&c.append(w,A)}}else{if(kR(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=GA,r=null,s=WA,h=e}return c&&s==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:c,body:h}}function ZB(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Ele(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cle(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ale(e,t,n){let r=await Promise.all(e.map(async s=>{let c=t.routes[s.route.id];if(c){let h=await Ele(c,n);return h.links?h.links():[]}return[]}));return Ple(r.flat(1).filter(Cle).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function XU(e,t,n,r,s,c){let h=(g,w)=>n[w]?g.route.id!==n[w].route.id:!0,i=(g,w)=>{var T;return n[w].pathname!==g.pathname||((T=n[w].route.path)==null?void 0:T.endsWith("*"))&&n[w].params["*"]!==g.params["*"]};return c==="assets"?t.filter((g,w)=>h(g,w)||i(g,w)):c==="data"?t.filter((g,w)=>{var A;let T=r.routes[g.route.id];if(!T||!T.hasLoader)return!1;if(h(g,w)||i(g,w))return!0;if(g.route.shouldRevalidate){let D=g.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof D=="boolean")return D}return!0}):[]}function Mle(e,t,{includeHydrateFallback:n}={}){return Rle(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let c=[s.module];return s.clientActionModule&&(c=c.concat(s.clientActionModule)),s.clientLoaderModule&&(c=c.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(c=c.concat(s.hydrateFallbackModule)),s.imports&&(c=c.concat(s.imports)),c}).flat(1))}function Rle(e){return[...new Set(e)]}function Dle(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Ple(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let c=JSON.stringify(Dle(s));return n.has(c)||(n.add(c),r.push({key:c,link:s})),r},[])}var Ile=new Set([100,101,204,205]);function kle(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&ch(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function YY(){let e=q.useContext(z0);return ZB(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ole(){let e=q.useContext(BT);return ZB(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var KB=q.createContext(void 0);KB.displayName="FrameworkContext";function XY(){let e=q.useContext(KB);return ZB(e,"You must render this element inside a <HydratedRouter> element"),e}function Lle(e,t){let n=q.useContext(KB),[r,s]=q.useState(!1),[c,h]=q.useState(!1),{onFocus:i,onBlur:g,onMouseEnter:w,onMouseLeave:T,onTouchStart:A}=t,D=q.useRef(null);q.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let F=V=>{V.forEach(W=>{h(W.isIntersecting)})},j=new IntersectionObserver(F,{threshold:.5});return D.current&&j.observe(D.current),()=>{j.disconnect()}}},[e]),q.useEffect(()=>{if(r){let F=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(F)}}},[r]);let k=()=>{s(!0)},I=()=>{s(!1),h(!1)};return n?e!=="intent"?[c,D,{}]:[c,D,{onFocus:Vw(i,k),onBlur:Vw(g,I),onMouseEnter:Vw(w,k),onMouseLeave:Vw(T,I),onTouchStart:Vw(A,k)}]:[!1,D,{}]}function Vw(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function zle({page:e,...t}){let{router:n}=YY(),r=q.useMemo(()=>By(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?q.createElement(Ble,{page:e,matches:r,...t}):null}function Fle(e){let{manifest:t,routeModules:n}=XY(),[r,s]=q.useState([]);return q.useEffect(()=>{let c=!1;return Ale(e,t,n).then(h=>{c||s(h)}),()=>{c=!0}},[e,t,n]),r}function Ble({page:e,matches:t,...n}){let r=gh(),{manifest:s,routeModules:c}=XY(),{basename:h}=YY(),{loaderData:i,matches:g}=Ole(),w=q.useMemo(()=>XU(e,t,g,s,r,"data"),[e,t,g,s,r]),T=q.useMemo(()=>XU(e,t,g,s,r,"assets"),[e,t,g,s,r]),A=q.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let I=new Set,F=!1;if(t.forEach(V=>{var Z;let W=s.routes[V.route.id];!W||!W.hasLoader||(!w.some(K=>K.route.id===V.route.id)&&V.route.id in i&&((Z=c[V.route.id])!=null&&Z.shouldRevalidate)||W.hasClientLoader?F=!0:I.add(V.route.id))}),I.size===0)return[];let j=kle(e,h);return F&&I.size>0&&j.searchParams.set("_routes",t.filter(V=>I.has(V.route.id)).map(V=>V.route.id).join(",")),[j.pathname+j.search]},[h,i,r,s,w,t,e,c]),D=q.useMemo(()=>Mle(T,s),[T,s]),k=Fle(T);return q.createElement(q.Fragment,null,A.map(I=>q.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),D.map(I=>q.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),k.map(({key:I,link:F})=>q.createElement("link",{key:I,...F})))}function Nle(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var ZY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZY&&(window.__reactRouterVersion="7.5.3")}catch{}function jle(e,t){return Aae({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:Yse({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Vle(),routes:e,mapRouteProperties:cle,hydrationRouteProperties:ule,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function Vle(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Ule(e.errors)}),e}function Ule(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,s]of t)if(s&&s.__type==="RouteErrorResponse")n[r]=new IM(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let c=window[s.__subType];if(typeof c=="function")try{let h=new c(s.message);h.stack="",n[r]=h}catch{}}if(n[r]==null){let c=new Error(s.message);c.stack="",n[r]=c}}else n[r]=s;return n}var KY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ny=q.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:c,replace:h,state:i,target:g,to:w,preventScrollReset:T,viewTransition:A,...D},k){let{basename:I}=q.useContext(Pf),F=typeof w=="string"&&KY.test(w),j,V=!1;if(typeof w=="string"&&F&&(j=w,ZY))try{let _e=new URL(window.location.href),ae=w.startsWith("//")?new URL(_e.protocol+w):new URL(w),be=ch(ae.pathname,I);ae.origin===_e.origin&&be!=null?w=be+ae.search+ae.hash:V=!0}catch{ga(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=Wae(w,{relative:s}),[Z,K,ee]=Lle(r,D),se=Gle(w,{replace:h,state:i,target:g,preventScrollReset:T,relative:s,viewTransition:A});function he(_e){t&&t(_e),_e.defaultPrevented||se(_e)}let ye=q.createElement("a",{...D,...ee,href:j||W,onClick:V||c?t:he,ref:Nle(k,K),target:g,"data-discover":!F&&n==="render"?"true":void 0});return Z&&!F?q.createElement(q.Fragment,null,ye,q.createElement(zle,{page:W})):ye});Ny.displayName="Link";var $le=q.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:c,to:h,viewTransition:i,children:g,...w},T){let A=NT(h,{relative:w.relative}),D=gh(),k=q.useContext(BT),{navigator:I,basename:F}=q.useContext(Pf),j=k!=null&&Kle(A)&&i===!0,V=I.encodeLocation?I.encodeLocation(A).pathname:A.pathname,W=D.pathname,Z=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(W=W.toLowerCase(),Z=Z?Z.toLowerCase():null,V=V.toLowerCase()),Z&&F&&(Z=ch(Z,F)||Z);const K=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ee=W===V||!s&&W.startsWith(V)&&W.charAt(K)==="/",se=Z!=null&&(Z===V||!s&&Z.startsWith(V)&&Z.charAt(V.length)==="/"),he={isActive:ee,isPending:se,isTransitioning:j},ye=ee?t:void 0,_e;typeof r=="function"?_e=r(he):_e=[r,ee?"active":null,se?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ae=typeof c=="function"?c(he):c;return q.createElement(Ny,{...w,"aria-current":ye,className:_e,ref:T,style:ae,to:h,viewTransition:i},typeof g=="function"?g(he):g)});$le.displayName="NavLink";var qle=q.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:c,method:h=GA,action:i,onSubmit:g,relative:w,preventScrollReset:T,viewTransition:A,...D},k)=>{let I=Xle(),F=Zle(i,{relative:w}),j=h.toLowerCase()==="get"?"get":"post",V=typeof i=="string"&&KY.test(i),W=Z=>{if(g&&g(Z),Z.defaultPrevented)return;Z.preventDefault();let K=Z.nativeEvent.submitter,ee=(K==null?void 0:K.getAttribute("formmethod"))||h;I(K||Z.currentTarget,{fetcherKey:t,method:ee,navigate:n,replace:s,state:c,relative:w,preventScrollReset:T,viewTransition:A})};return q.createElement("form",{ref:k,method:j,action:F,onSubmit:r?g:W,...D,"data-discover":!V&&e==="render"?"true":void 0})});qle.displayName="Form";function Hle(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QY(e){let t=q.useContext(z0);return po(t,Hle(e)),t}function Gle(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:c,viewTransition:h}={}){let i=iv(),g=gh(),w=NT(e,{relative:c});return q.useCallback(T=>{if(ble(T,t)){T.preventDefault();let A=n!==void 0?n:Gy(g)===Gy(w);i(e,{replace:A,state:r,preventScrollReset:s,relative:c,viewTransition:h})}},[g,i,w,n,r,t,e,s,c,h])}var Wle=0,Yle=()=>`__${String(++Wle)}__`;function Xle(){let{router:e}=QY("useSubmit"),{basename:t}=q.useContext(Pf),n=sle();return q.useCallback(async(r,s={})=>{let{action:c,method:h,encType:i,formData:g,body:w}=Tle(r,t);if(s.navigate===!1){let T=s.fetcherKey||Yle();await e.fetch(T,n,s.action||c,{preventScrollReset:s.preventScrollReset,formData:g,body:w,formMethod:s.method||h,formEncType:s.encType||i,flushSync:s.flushSync})}else await e.navigate(s.action||c,{preventScrollReset:s.preventScrollReset,formData:g,body:w,formMethod:s.method||h,formEncType:s.encType||i,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function Zle(e,{relative:t}={}){let{basename:n}=q.useContext(Pf),r=q.useContext(If);po(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),c={...NT(e||".",{relative:t})},h=gh();if(e==null){c.search=h.search;let i=new URLSearchParams(c.search),g=i.getAll("index");if(g.some(T=>T==="")){i.delete("index"),g.filter(A=>A).forEach(A=>i.append("index",A));let T=i.toString();c.search=T?`?${T}`:""}}return(!e||e===".")&&s.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Np([n,c.pathname])),Gy(c)}function Kle(e,t={}){let n=q.useContext(GB);po(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=QY("useViewTransitionState"),s=NT(e,{relative:t.relative});if(!n.isTransitioning)return!1;let c=ch(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=ch(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tg(s.pathname,h)!=null||Tg(s.pathname,c)!=null}new TextEncoder;[...Ile];var OR=MY();const yb=_a(OR);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qle(e){return q.createElement(hle,{flushSync:OR.flushSync,...e})}const Jle="modulepreload",ece=function(e,t){return new URL(e,t).href},ZU={},F0=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let h=function(T){return Promise.all(T.map(A=>Promise.resolve(A).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};const i=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),w=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));s=h(n.map(T=>{if(T=ece(T,r),T in ZU)return;ZU[T]=!0;const A=T.endsWith(".css"),D=A?'[rel="stylesheet"]':"";if(!!r)for(let F=i.length-1;F>=0;F--){const j=i[F];if(j.href===T&&(!A||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${D}`))return;const I=document.createElement("link");if(I.rel=A?"stylesheet":Jle,A||(I.as="script"),I.crossOrigin="",I.href=T,w&&I.setAttribute("nonce",w),document.head.appendChild(I),A)return new Promise((F,j)=>{I.addEventListener("load",F),I.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${T}`)))})}))}function c(h){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=h,window.dispatchEvent(i),!i.defaultPrevented)throw h}return s.then(h=>{for(const i of h||[])i.status==="rejected"&&c(i.reason);return t().catch(c)})};var bI={exports:{}},wI,KU;function tce(){if(KU)return wI;KU=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wI=e,wI}var SI,QU;function nce(){if(QU)return SI;QU=1;var e=tce();function t(){}function n(){}return n.resetWarningCache=t,SI=function(){function r(h,i,g,w,T,A){if(A!==e){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}r.isRequired=r;function s(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return c.PropTypes=c,c},SI}var JU;function JY(){return JU||(JU=1,bI.exports=nce()()),bI.exports}var rce=JY();const nt=_a(rce);function eX(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=eX(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Wn(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=eX(e))&&(r&&(r+=" "),r+=t);return r}function dr(e,t,n=void 0){const r={};for(const s in e){const c=e[s];let h="",i=!0;for(let g=0;g<c.length;g+=1){const w=c[g];w&&(h+=(i===!0?"":" ")+t(w),i=!1,n&&n[w]&&(h+=" "+n[w]))}r[s]=h}return r}function Rg(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}function ice(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function QB(e,t=0,n=1){return ice(e,t,n)}function oce(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Wy(e){if(e.type)return e;if(e.charAt(0)==="#")return Wy(oce(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Rg(9,e));let r=e.substring(t+1,e.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Rg(10,s))}else r=r.split(",");return r=r.map(c=>parseFloat(c)),{type:n,values:r,colorSpace:s}}const sce=e=>{const t=Wy(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},yS=(e,t)=>{try{return sce(e)}catch{return e}};function LR(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((s,c)=>c<3?parseInt(s,10):s):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function tX(e){e=Wy(e);const{values:t}=e,n=t[0],r=t[1]/100,s=t[2]/100,c=r*Math.min(s,1-s),h=(w,T=(w+n/30)%12)=>s-c*Math.max(Math.min(T-3,9-T,1),-1);let i="rgb";const g=[Math.round(h(0)*255),Math.round(h(8)*255),Math.round(h(4)*255)];return e.type==="hsla"&&(i+="a",g.push(t[3])),LR({type:i,values:g})}function $3(e){e=Wy(e);let t=e.type==="hsl"||e.type==="hsla"?Wy(tX(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ace(e,t){const n=$3(e),r=$3(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function ai(e,t){return e=Wy(e),t=QB(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,LR(e)}function VC(e,t,n){try{return ai(e,t)}catch{return e}}function a1(e,t){if(e=Wy(e),t=QB(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return LR(e)}function ss(e,t,n){try{return a1(e,t)}catch{return e}}function l1(e,t){if(e=Wy(e),t=QB(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return LR(e)}function as(e,t,n){try{return l1(e,t)}catch{return e}}function q3(e,t=.15){return $3(e)>.5?a1(e,t):l1(e,t)}function UC(e,t,n){try{return q3(e,t)}catch{return e}}const nX=q.createContext();function lce({value:e,...t}){return $.jsx(nX.Provider,{value:e??!0,...t})}const vc=()=>q.useContext(nX)??!1;function Mn(e){if(typeof e!="string")throw new Error(Rg(7));return e.charAt(0).toUpperCase()+e.slice(1)}var TI={exports:{}},ns={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$;function cce(){if(e$)return ns;e$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.for("react.view_transition"),k=Symbol.for("react.client.reference");function I(F){if(typeof F=="object"&&F!==null){var j=F.$$typeof;switch(j){case e:switch(F=F.type,F){case n:case s:case r:case g:case w:case D:return F;default:switch(F=F&&F.$$typeof,F){case h:case i:case A:case T:return F;case c:return F;default:return j}}case t:return j}}}return ns.ContextConsumer=c,ns.ContextProvider=h,ns.Element=e,ns.ForwardRef=i,ns.Fragment=n,ns.Lazy=A,ns.Memo=T,ns.Portal=t,ns.Profiler=s,ns.StrictMode=r,ns.Suspense=g,ns.SuspenseList=w,ns.isContextConsumer=function(F){return I(F)===c},ns.isContextProvider=function(F){return I(F)===h},ns.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===e},ns.isForwardRef=function(F){return I(F)===i},ns.isFragment=function(F){return I(F)===n},ns.isLazy=function(F){return I(F)===A},ns.isMemo=function(F){return I(F)===T},ns.isPortal=function(F){return I(F)===t},ns.isProfiler=function(F){return I(F)===s},ns.isStrictMode=function(F){return I(F)===r},ns.isSuspense=function(F){return I(F)===g},ns.isSuspenseList=function(F){return I(F)===w},ns.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===n||F===s||F===r||F===g||F===w||typeof F=="object"&&F!==null&&(F.$$typeof===A||F.$$typeof===T||F.$$typeof===h||F.$$typeof===c||F.$$typeof===i||F.$$typeof===k||F.getModuleId!==void 0)},ns.typeOf=I,ns}var t$;function uce(){return t$||(t$=1,TI.exports=cce()),TI.exports}var rX=uce();function kp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function iX(e){if(q.isValidElement(e)||rX.isValidElementType(e)||!kp(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=iX(e[n])}),t}function vl(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return kp(e)&&kp(t)&&Object.keys(t).forEach(s=>{q.isValidElement(t[s])||rX.isValidElementType(t[s])?r[s]=t[s]:kp(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&kp(e[s])?r[s]=vl(e[s],t[s],n):n.clone?r[s]=kp(t[s])?iX(t[s]):t[s]:r[s]=t[s]}),r}function RS(e,t){return t?vl(e,t,{clone:!1}):e}function dce(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,s)=>{var h,i;const c=/min-width:\s*([0-9.]+)/;return+(((h=r.match(c))==null?void 0:h[1])||0)-+(((i=s.match(c))==null?void 0:i[1])||0)});return n.length?n.reduce((r,s)=>{const c=t[s];return delete r[s],r[s]=c,r},{...t}):t}function hce(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function fce(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,c=Number.isNaN(+r)?r||0:+r;return e.containerQueries(s).up(c)}function pce(e){const t=(c,h)=>c.replace("@media",h?`@container ${h}`:"@container");function n(c,h){c.up=(...i)=>t(e.breakpoints.up(...i),h),c.down=(...i)=>t(e.breakpoints.down(...i),h),c.between=(...i)=>t(e.breakpoints.between(...i),h),c.only=(...i)=>t(e.breakpoints.only(...i),h),c.not=(...i)=>{const g=t(e.breakpoints.not(...i),h);return g.includes("not all and")?g.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):g}}const r={},s=c=>(n(r,c),r);return n(s),{...e,containerQueries:s}}const zR={xs:0,sm:600,md:900,lg:1200,xl:1536},n$={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${zR[e]}px)`},mce={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:zR[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Af(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const c=r.breakpoints||n$;return t.reduce((h,i,g)=>(h[c.up(c.keys[g])]=n(t[g]),h),{})}if(typeof t=="object"){const c=r.breakpoints||n$;return Object.keys(t).reduce((h,i)=>{if(hce(c.keys,i)){const g=fce(r.containerQueries?r:mce,i);g&&(h[g]=n(t[i],i))}else if(Object.keys(c.values||zR).includes(i)){const g=c.up(i);h[g]=n(t[i],i)}else{const g=i;h[g]=t[g]}return h},{})}return n(t)}function oX(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,s)=>{const c=e.up(s);return r[c]={},r},{}))||{}}function sX(e,t){return e.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},t)}function gce(e,...t){const n=oX(e),r=[n,...t].reduce((s,c)=>vl(s,c),{});return sX(Object.keys(n),r)}function yce(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((s,c)=>{c<e.length&&(n[s]=!0)}):r.forEach(s=>{e[s]!=null&&(n[s]=!0)}),n}function EI({values:e,breakpoints:t,base:n}){const r=n||yce(e,t),s=Object.keys(r);if(s.length===0)return e;let c;return s.reduce((h,i,g)=>(Array.isArray(e)?(h[i]=e[g]!=null?e[g]:e[c],c=g):typeof e=="object"?(h[i]=e[i]!=null?e[i]:e[c],c=i):h[i]=e,h),{})}function jy(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((s,c)=>s&&s[c]?s[c]:null,e);if(r!=null)return r}return t.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,e)}function OM(e,t,n,r=n){let s;return typeof e=="function"?s=e(n):Array.isArray(e)?s=e[n]||r:s=jy(e,n)||r,t&&(s=t(s,r,e)),s}function xa(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:s}=e,c=h=>{if(h[t]==null)return null;const i=h[t],g=h.theme,w=jy(g,r)||{};return Af(h,i,A=>{let D=OM(w,s,A);return A===D&&typeof A=="string"&&(D=OM(w,s,`${t}${A==="default"?"":Mn(A)}`,A)),n===!1?D:{[n]:D}})};return c.propTypes={},c.filterProps=[t],c}function vce(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const _ce={m:"margin",p:"padding"},xce={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},r$={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},bce=vce(e=>{if(e.length>2)if(r$[e])e=r$[e];else return[e];const[t,n]=e.split(""),r=_ce[t],s=xce[n]||"";return Array.isArray(s)?s.map(c=>r+c):[r+s]}),JB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],eN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...JB,...eN];function jT(e,t,n,r){const s=jy(e,t,!0)??n;return typeof s=="number"||typeof s=="string"?c=>typeof c=="string"?c:typeof s=="string"?s.startsWith("var(")&&c===0?0:s.startsWith("var(")&&c===1?s:`calc(${c} * ${s})`:s*c:Array.isArray(s)?c=>{if(typeof c=="string")return c;const h=Math.abs(c),i=s[h];return c>=0?i:typeof i=="number"?-i:typeof i=="string"&&i.startsWith("var(")?`calc(-1 * ${i})`:`-${i}`}:typeof s=="function"?s:()=>{}}function FR(e){return jT(e,"spacing",8)}function g0(e,t){return typeof t=="string"||t==null?t:e(t)}function wce(e,t){return n=>e.reduce((r,s)=>(r[s]=g0(t,n),r),{})}function Sce(e,t,n,r){if(!t.includes(n))return null;const s=bce(n),c=wce(s,r),h=e[n];return Af(e,h,c)}function aX(e,t){const n=FR(e.theme);return Object.keys(e).map(r=>Sce(e,t,r,n)).reduce(RS,{})}function Js(e){return aX(e,JB)}Js.propTypes={};Js.filterProps=JB;function ea(e){return aX(e,eN)}ea.propTypes={};ea.filterProps=eN;function BR(...e){const t=e.reduce((r,s)=>(s.filterProps.forEach(c=>{r[c]=s}),r),{}),n=r=>Object.keys(r).reduce((s,c)=>t[c]?RS(s,t[c](r)):s,{});return n.propTypes={},n.filterProps=e.reduce((r,s)=>r.concat(s.filterProps),[]),n}function ih(e){return typeof e!="number"?e:`${e}px solid`}function yh(e,t){return xa({prop:e,themeKey:"borders",transform:t})}const Tce=yh("border",ih),Ece=yh("borderTop",ih),Cce=yh("borderRight",ih),Ace=yh("borderBottom",ih),Mce=yh("borderLeft",ih),Rce=yh("borderColor"),Dce=yh("borderTopColor"),Pce=yh("borderRightColor"),Ice=yh("borderBottomColor"),kce=yh("borderLeftColor"),Oce=yh("outline",ih),Lce=yh("outlineColor"),NR=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=jT(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:g0(t,r)});return Af(e,e.borderRadius,n)}return null};NR.propTypes={};NR.filterProps=["borderRadius"];BR(Tce,Ece,Cce,Ace,Mce,Rce,Dce,Pce,Ice,kce,NR,Oce,Lce);const jR=e=>{if(e.gap!==void 0&&e.gap!==null){const t=jT(e.theme,"spacing",8),n=r=>({gap:g0(t,r)});return Af(e,e.gap,n)}return null};jR.propTypes={};jR.filterProps=["gap"];const VR=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=jT(e.theme,"spacing",8),n=r=>({columnGap:g0(t,r)});return Af(e,e.columnGap,n)}return null};VR.propTypes={};VR.filterProps=["columnGap"];const UR=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=jT(e.theme,"spacing",8),n=r=>({rowGap:g0(t,r)});return Af(e,e.rowGap,n)}return null};UR.propTypes={};UR.filterProps=["rowGap"];const zce=xa({prop:"gridColumn"}),Fce=xa({prop:"gridRow"}),Bce=xa({prop:"gridAutoFlow"}),Nce=xa({prop:"gridAutoColumns"}),jce=xa({prop:"gridAutoRows"}),Vce=xa({prop:"gridTemplateColumns"}),Uce=xa({prop:"gridTemplateRows"}),$ce=xa({prop:"gridTemplateAreas"}),qce=xa({prop:"gridArea"});BR(jR,VR,UR,zce,Fce,Bce,Nce,jce,Vce,Uce,$ce,qce);function Ib(e,t){return t==="grey"?t:e}const Hce=xa({prop:"color",themeKey:"palette",transform:Ib}),Gce=xa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ib}),Wce=xa({prop:"backgroundColor",themeKey:"palette",transform:Ib});BR(Hce,Gce,Wce);function nd(e){return e<=1&&e!==0?`${e*100}%`:e}const Yce=xa({prop:"width",transform:nd}),tN=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var s,c,h,i,g;const r=((h=(c=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:c.values)==null?void 0:h[n])||zR[n];return r?((g=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:g.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:nd(n)}};return Af(e,e.maxWidth,t)}return null};tN.filterProps=["maxWidth"];const Xce=xa({prop:"minWidth",transform:nd}),Zce=xa({prop:"height",transform:nd}),Kce=xa({prop:"maxHeight",transform:nd}),Qce=xa({prop:"minHeight",transform:nd});xa({prop:"size",cssProperty:"width",transform:nd});xa({prop:"size",cssProperty:"height",transform:nd});const Jce=xa({prop:"boxSizing"});BR(Yce,tN,Xce,Zce,Kce,Qce,Jce);const VT={border:{themeKey:"borders",transform:ih},borderTop:{themeKey:"borders",transform:ih},borderRight:{themeKey:"borders",transform:ih},borderBottom:{themeKey:"borders",transform:ih},borderLeft:{themeKey:"borders",transform:ih},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ih},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:NR},color:{themeKey:"palette",transform:Ib},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ib},backgroundColor:{themeKey:"palette",transform:Ib},p:{style:ea},pt:{style:ea},pr:{style:ea},pb:{style:ea},pl:{style:ea},px:{style:ea},py:{style:ea},padding:{style:ea},paddingTop:{style:ea},paddingRight:{style:ea},paddingBottom:{style:ea},paddingLeft:{style:ea},paddingX:{style:ea},paddingY:{style:ea},paddingInline:{style:ea},paddingInlineStart:{style:ea},paddingInlineEnd:{style:ea},paddingBlock:{style:ea},paddingBlockStart:{style:ea},paddingBlockEnd:{style:ea},m:{style:Js},mt:{style:Js},mr:{style:Js},mb:{style:Js},ml:{style:Js},mx:{style:Js},my:{style:Js},margin:{style:Js},marginTop:{style:Js},marginRight:{style:Js},marginBottom:{style:Js},marginLeft:{style:Js},marginX:{style:Js},marginY:{style:Js},marginInline:{style:Js},marginInlineStart:{style:Js},marginInlineEnd:{style:Js},marginBlock:{style:Js},marginBlockStart:{style:Js},marginBlockEnd:{style:Js},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:jR},rowGap:{style:UR},columnGap:{style:VR},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:nd},maxWidth:{style:tN},minWidth:{transform:nd},height:{transform:nd},maxHeight:{transform:nd},minHeight:{transform:nd},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function eue(...e){const t=e.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function tue(e,t){return typeof e=="function"?e(t):e}function nue(){function e(n,r,s,c){const h={[n]:r,theme:s},i=c[n];if(!i)return{[n]:r};const{cssProperty:g=n,themeKey:w,transform:T,style:A}=i;if(r==null)return null;if(w==="typography"&&r==="inherit")return{[n]:r};const D=jy(s,w)||{};return A?A(h):Af(h,r,I=>{let F=OM(D,T,I);return I===F&&typeof I=="string"&&(F=OM(D,T,`${n}${I==="default"?"":Mn(I)}`,I)),g===!1?F:{[g]:F}})}function t(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const c=s.unstable_sxConfig??VT;function h(i){let g=i;if(typeof i=="function")g=i(s);else if(typeof i!="object")return i;if(!g)return null;const w=oX(s.breakpoints),T=Object.keys(w);let A=w;return Object.keys(g).forEach(D=>{const k=tue(g[D],s);if(k!=null)if(typeof k=="object")if(c[D])A=RS(A,e(D,k,s,c));else{const I=Af({theme:s},k,F=>({[D]:F}));eue(I,k)?A[D]=t({sx:k,theme:s}):A=RS(A,I)}else A=RS(A,e(D,k,s,c))}),dce(s,sX(T,A))}return Array.isArray(r)?r.map(h):h(r)}return t}const Yy=nue();Yy.filterProps=["sx"];const rue=e=>{var r;const t={systemProps:{},otherProps:{}},n=((r=e==null?void 0:e.theme)==null?void 0:r.unstable_sxConfig)??VT;return Object.keys(e).forEach(s=>{n[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function $R(e){const{sx:t,...n}=e,{systemProps:r,otherProps:s}=rue(n);let c;return Array.isArray(t)?c=[r,...t]:typeof t=="function"?c=(...h)=>{const i=t(...h);return kp(i)?{...r,...i}:r}:c={...r,...t},{...s,sx:c}}function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(null,arguments)}function iue(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function oue(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var lX=function(){function e(n){var r=this;this._insertTag=function(s){var c;r.tags.length===0?r.insertionPoint?c=r.insertionPoint.nextSibling:r.prepend?c=r.container.firstChild:c=r.before:c=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,c),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(oue(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var c=iue(s);try{c.insertRule(r,c.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},e}(),lc="-ms-",LM="-moz-",jo="-webkit-",cX="comm",nN="rule",rN="decl",sue="@import",uX="@keyframes",aue="@layer",lue=Math.abs,qR=String.fromCharCode,cue=Object.assign;function uue(e,t){return Ll(e,0)^45?(((t<<2^Ll(e,0))<<2^Ll(e,1))<<2^Ll(e,2))<<2^Ll(e,3):0}function dX(e){return e.trim()}function due(e,t){return(e=t.exec(e))?e[0]:e}function Vo(e,t,n){return e.replace(t,n)}function H3(e,t){return e.indexOf(t)}function Ll(e,t){return e.charCodeAt(t)|0}function YS(e,t,n){return e.slice(t,n)}function Dp(e){return e.length}function iN(e){return e.length}function $C(e,t){return t.push(e),e}function hue(e,t){return e.map(t).join("")}var HR=1,Nb=1,hX=0,xu=0,La=0,c1="";function GR(e,t,n,r,s,c,h){return{value:e,root:t,parent:n,type:r,props:s,children:c,line:HR,column:Nb,length:h,return:""}}function Uw(e,t){return cue(GR("",null,null,"",null,null,0),e,{length:-e.length},t)}function fue(){return La}function pue(){return La=xu>0?Ll(c1,--xu):0,Nb--,La===10&&(Nb=1,HR--),La}function id(){return La=xu<hX?Ll(c1,xu++):0,Nb++,La===10&&(Nb=1,HR++),La}function jp(){return Ll(c1,xu)}function YA(){return xu}function UT(e,t){return YS(c1,e,t)}function XS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fX(e){return HR=Nb=1,hX=Dp(c1=e),xu=0,[]}function pX(e){return c1="",e}function XA(e){return dX(UT(xu-1,G3(e===91?e+2:e===40?e+1:e)))}function mue(e){for(;(La=jp())&&La<33;)id();return XS(e)>2||XS(La)>3?"":" "}function gue(e,t){for(;--t&&id()&&!(La<48||La>102||La>57&&La<65||La>70&&La<97););return UT(e,YA()+(t<6&&jp()==32&&id()==32))}function G3(e){for(;id();)switch(La){case e:return xu;case 34:case 39:e!==34&&e!==39&&G3(La);break;case 40:e===41&&G3(e);break;case 92:id();break}return xu}function yue(e,t){for(;id()&&e+La!==57;)if(e+La===84&&jp()===47)break;return"/*"+UT(t,xu-1)+"*"+qR(e===47?e:id())}function vue(e){for(;!XS(jp());)id();return UT(e,xu)}function _ue(e){return pX(ZA("",null,null,null,[""],e=fX(e),0,[0],e))}function ZA(e,t,n,r,s,c,h,i,g){for(var w=0,T=0,A=h,D=0,k=0,I=0,F=1,j=1,V=1,W=0,Z="",K=s,ee=c,se=r,he=Z;j;)switch(I=W,W=id()){case 40:if(I!=108&&Ll(he,A-1)==58){H3(he+=Vo(XA(W),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:he+=XA(W);break;case 9:case 10:case 13:case 32:he+=mue(I);break;case 92:he+=gue(YA()-1,7);continue;case 47:switch(jp()){case 42:case 47:$C(xue(yue(id(),YA()),t,n),g);break;default:he+="/"}break;case 123*F:i[w++]=Dp(he)*V;case 125*F:case 59:case 0:switch(W){case 0:case 125:j=0;case 59+T:V==-1&&(he=Vo(he,/\f/g,"")),k>0&&Dp(he)-A&&$C(k>32?o$(he+";",r,n,A-1):o$(Vo(he," ","")+";",r,n,A-2),g);break;case 59:he+=";";default:if($C(se=i$(he,t,n,w,T,s,i,Z,K=[],ee=[],A),c),W===123)if(T===0)ZA(he,t,se,se,K,c,A,i,ee);else switch(D===99&&Ll(he,3)===110?100:D){case 100:case 108:case 109:case 115:ZA(e,se,se,r&&$C(i$(e,se,se,0,0,s,i,Z,s,K=[],A),ee),s,ee,A,i,r?K:ee);break;default:ZA(he,se,se,se,[""],ee,0,i,ee)}}w=T=k=0,F=V=1,Z=he="",A=h;break;case 58:A=1+Dp(he),k=I;default:if(F<1){if(W==123)--F;else if(W==125&&F++==0&&pue()==125)continue}switch(he+=qR(W),W*F){case 38:V=T>0?1:(he+="\f",-1);break;case 44:i[w++]=(Dp(he)-1)*V,V=1;break;case 64:jp()===45&&(he+=XA(id())),D=jp(),T=A=Dp(Z=he+=vue(YA())),W++;break;case 45:I===45&&Dp(he)==2&&(F=0)}}return c}function i$(e,t,n,r,s,c,h,i,g,w,T){for(var A=s-1,D=s===0?c:[""],k=iN(D),I=0,F=0,j=0;I<r;++I)for(var V=0,W=YS(e,A+1,A=lue(F=h[I])),Z=e;V<k;++V)(Z=dX(F>0?D[V]+" "+W:Vo(W,/&\f/g,D[V])))&&(g[j++]=Z);return GR(e,t,n,s===0?nN:i,g,w,T)}function xue(e,t,n){return GR(e,t,n,cX,qR(fue()),YS(e,2,-2),0)}function o$(e,t,n,r){return GR(e,t,n,rN,YS(e,0,r),YS(e,r+1,-1),r)}function kb(e,t){for(var n="",r=iN(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function bue(e,t,n,r){switch(e.type){case aue:if(e.children.length)break;case sue:case rN:return e.return=e.return||e.value;case cX:return"";case uX:return e.return=e.value+"{"+kb(e.children,r)+"}";case nN:e.value=e.props.join(",")}return Dp(n=kb(e.children,r))?e.return=e.value+"{"+n+"}":""}function wue(e){var t=iN(e);return function(n,r,s,c){for(var h="",i=0;i<t;i++)h+=e[i](n,r,s,c)||"";return h}}function Sue(e){return function(t){t.root||(t=t.return)&&e(t)}}function mX(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Tue=function(t,n,r){for(var s=0,c=0;s=c,c=jp(),s===38&&c===12&&(n[r]=1),!XS(c);)id();return UT(t,xu)},Eue=function(t,n){var r=-1,s=44;do switch(XS(s)){case 0:s===38&&jp()===12&&(n[r]=1),t[r]+=Tue(xu-1,n,r);break;case 2:t[r]+=XA(s);break;case 4:if(s===44){t[++r]=jp()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=qR(s)}while(s=id());return t},Cue=function(t,n){return pX(Eue(fX(t),n))},s$=new WeakMap,Aue=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!s$.get(r))&&!s){s$.set(t,!0);for(var c=[],h=Cue(n,c),i=r.props,g=0,w=0;g<h.length;g++)for(var T=0;T<i.length;T++,w++)t.props[w]=c[g]?h[g].replace(/&\f/g,i[T]):i[T]+" "+h[g]}}},Mue=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function gX(e,t){switch(uue(e,t)){case 5103:return jo+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jo+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return jo+e+LM+e+lc+e+e;case 6828:case 4268:return jo+e+lc+e+e;case 6165:return jo+e+lc+"flex-"+e+e;case 5187:return jo+e+Vo(e,/(\w+).+(:[^]+)/,jo+"box-$1$2"+lc+"flex-$1$2")+e;case 5443:return jo+e+lc+"flex-item-"+Vo(e,/flex-|-self/,"")+e;case 4675:return jo+e+lc+"flex-line-pack"+Vo(e,/align-content|flex-|-self/,"")+e;case 5548:return jo+e+lc+Vo(e,"shrink","negative")+e;case 5292:return jo+e+lc+Vo(e,"basis","preferred-size")+e;case 6060:return jo+"box-"+Vo(e,"-grow","")+jo+e+lc+Vo(e,"grow","positive")+e;case 4554:return jo+Vo(e,/([^-])(transform)/g,"$1"+jo+"$2")+e;case 6187:return Vo(Vo(Vo(e,/(zoom-|grab)/,jo+"$1"),/(image-set)/,jo+"$1"),e,"")+e;case 5495:case 3959:return Vo(e,/(image-set\([^]*)/,jo+"$1$`$1");case 4968:return Vo(Vo(e,/(.+:)(flex-)?(.*)/,jo+"box-pack:$3"+lc+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jo+e+e;case 4095:case 3583:case 4068:case 2532:return Vo(e,/(.+)-inline(.+)/,jo+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Dp(e)-1-t>6)switch(Ll(e,t+1)){case 109:if(Ll(e,t+4)!==45)break;case 102:return Vo(e,/(.+:)(.+)-([^]+)/,"$1"+jo+"$2-$3$1"+LM+(Ll(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~H3(e,"stretch")?gX(Vo(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ll(e,t+1)!==115)break;case 6444:switch(Ll(e,Dp(e)-3-(~H3(e,"!important")&&10))){case 107:return Vo(e,":",":"+jo)+e;case 101:return Vo(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jo+(Ll(e,14)===45?"inline-":"")+"box$3$1"+jo+"$2$3$1"+lc+"$2box$3")+e}break;case 5936:switch(Ll(e,t+11)){case 114:return jo+e+lc+Vo(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return jo+e+lc+Vo(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return jo+e+lc+Vo(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return jo+e+lc+e+e}return e}var Rue=function(t,n,r,s){if(t.length>-1&&!t.return)switch(t.type){case rN:t.return=gX(t.value,t.length);break;case uX:return kb([Uw(t,{value:Vo(t.value,"@","@"+jo)})],s);case nN:if(t.length)return hue(t.props,function(c){switch(due(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return kb([Uw(t,{props:[Vo(c,/:(read-\w+)/,":"+LM+"$1")]})],s);case"::placeholder":return kb([Uw(t,{props:[Vo(c,/:(plac\w+)/,":"+jo+"input-$1")]}),Uw(t,{props:[Vo(c,/:(plac\w+)/,":"+LM+"$1")]}),Uw(t,{props:[Vo(c,/:(plac\w+)/,lc+"input-$1")]})],s)}return""})}},Due=[Rue],yX=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(F){var j=F.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(F),F.setAttribute("data-s",""))})}var s=t.stylisPlugins||Due,c={},h,i=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(F){for(var j=F.getAttribute("data-emotion").split(" "),V=1;V<j.length;V++)c[j[V]]=!0;i.push(F)});var g,w=[Aue,Mue];{var T,A=[bue,Sue(function(F){T.insert(F)})],D=wue(w.concat(s,A)),k=function(j){return kb(_ue(j),D)};g=function(j,V,W,Z){T=W,k(j?j+"{"+V.styles+"}":V.styles),Z&&(I.inserted[V.name]=!0)}}var I={key:n,sheet:new lX({key:n,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:g};return I.sheet.hydrate(i),I},CI={exports:{}},Go={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a$;function Pue(){if(a$)return Go;a$=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,h=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,g=e?Symbol.for("react.async_mode"):60111,w=e?Symbol.for("react.concurrent_mode"):60111,T=e?Symbol.for("react.forward_ref"):60112,A=e?Symbol.for("react.suspense"):60113,D=e?Symbol.for("react.suspense_list"):60120,k=e?Symbol.for("react.memo"):60115,I=e?Symbol.for("react.lazy"):60116,F=e?Symbol.for("react.block"):60121,j=e?Symbol.for("react.fundamental"):60117,V=e?Symbol.for("react.responder"):60118,W=e?Symbol.for("react.scope"):60119;function Z(ee){if(typeof ee=="object"&&ee!==null){var se=ee.$$typeof;switch(se){case t:switch(ee=ee.type,ee){case g:case w:case r:case c:case s:case A:return ee;default:switch(ee=ee&&ee.$$typeof,ee){case i:case T:case I:case k:case h:return ee;default:return se}}case n:return se}}}function K(ee){return Z(ee)===w}return Go.AsyncMode=g,Go.ConcurrentMode=w,Go.ContextConsumer=i,Go.ContextProvider=h,Go.Element=t,Go.ForwardRef=T,Go.Fragment=r,Go.Lazy=I,Go.Memo=k,Go.Portal=n,Go.Profiler=c,Go.StrictMode=s,Go.Suspense=A,Go.isAsyncMode=function(ee){return K(ee)||Z(ee)===g},Go.isConcurrentMode=K,Go.isContextConsumer=function(ee){return Z(ee)===i},Go.isContextProvider=function(ee){return Z(ee)===h},Go.isElement=function(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t},Go.isForwardRef=function(ee){return Z(ee)===T},Go.isFragment=function(ee){return Z(ee)===r},Go.isLazy=function(ee){return Z(ee)===I},Go.isMemo=function(ee){return Z(ee)===k},Go.isPortal=function(ee){return Z(ee)===n},Go.isProfiler=function(ee){return Z(ee)===c},Go.isStrictMode=function(ee){return Z(ee)===s},Go.isSuspense=function(ee){return Z(ee)===A},Go.isValidElementType=function(ee){return typeof ee=="string"||typeof ee=="function"||ee===r||ee===w||ee===c||ee===s||ee===A||ee===D||typeof ee=="object"&&ee!==null&&(ee.$$typeof===I||ee.$$typeof===k||ee.$$typeof===h||ee.$$typeof===i||ee.$$typeof===T||ee.$$typeof===j||ee.$$typeof===V||ee.$$typeof===W||ee.$$typeof===F)},Go.typeOf=Z,Go}var l$;function Iue(){return l$||(l$=1,CI.exports=Pue()),CI.exports}var AI,c$;function kue(){if(c$)return AI;c$=1;var e=Iue(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[e.ForwardRef]=r,c[e.Memo]=s;function h(I){return e.isMemo(I)?s:c[I.$$typeof]||t}var i=Object.defineProperty,g=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols,T=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,D=Object.prototype;function k(I,F,j){if(typeof F!="string"){if(D){var V=A(F);V&&V!==D&&k(I,V,j)}var W=g(F);w&&(W=W.concat(w(F)));for(var Z=h(I),K=h(F),ee=0;ee<W.length;++ee){var se=W[ee];if(!n[se]&&!(j&&j[se])&&!(K&&K[se])&&!(Z&&Z[se])){var he=T(F,se);try{i(I,se,he)}catch{}}}}return I}return AI=k,AI}kue();var Oue=!0;function vX(e,t,n){var r="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(r+=s+" ")}),r}var oN=function(t,n,r){var s=t.key+"-"+n.name;(r===!1||Oue===!1)&&t.registered[s]===void 0&&(t.registered[s]=n.styles)},sN=function(t,n,r){oN(t,n,r);var s=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var c=n;do t.insert(n===c?"."+s:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function Lue(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var zue={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fue=/[A-Z]|^ms/g,Bue=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_X=function(t){return t.charCodeAt(1)===45},u$=function(t){return t!=null&&typeof t!="boolean"},MI=mX(function(e){return _X(e)?e:e.replace(Fue,"-$&").toLowerCase()}),d$=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Bue,function(r,s,c){return Pp={name:s,styles:c,next:Pp},s})}return zue[t]!==1&&!_X(t)&&typeof n=="number"&&n!==0?n+"px":n};function ZS(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Pp={name:s.name,styles:s.styles,next:Pp},s.name;var c=n;if(c.styles!==void 0){var h=c.next;if(h!==void 0)for(;h!==void 0;)Pp={name:h.name,styles:h.styles,next:Pp},h=h.next;var i=c.styles+";";return i}return Nue(e,t,n)}case"function":{if(e!==void 0){var g=Pp,w=n(e);return Pp=g,ZS(e,t,w)}break}}var T=n;if(t==null)return T;var A=t[T];return A!==void 0?A:T}function Nue(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=ZS(e,t,n[s])+";";else for(var c in n){var h=n[c];if(typeof h!="object"){var i=h;t!=null&&t[i]!==void 0?r+=c+"{"+t[i]+"}":u$(i)&&(r+=MI(c)+":"+d$(c,i)+";")}else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var g=0;g<h.length;g++)u$(h[g])&&(r+=MI(c)+":"+d$(c,h[g])+";");else{var w=ZS(e,t,h);switch(c){case"animation":case"animationName":{r+=MI(c)+":"+w+";";break}default:r+=c+"{"+w+"}"}}}return r}var h$=/label:\s*([^\s;{]+)\s*(;|$)/g,Pp;function $T(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Pp=void 0;var c=e[0];if(c==null||c.raw===void 0)r=!1,s+=ZS(n,t,c);else{var h=c;s+=h[0]}for(var i=1;i<e.length;i++)if(s+=ZS(n,t,e[i]),r){var g=c;s+=g[i]}h$.lastIndex=0;for(var w="",T;(T=h$.exec(s))!==null;)w+="-"+T[1];var A=Lue(s)+w;return{name:A,styles:s,next:Pp}}var jue=function(t){return t()},xX=DM.useInsertionEffect?DM.useInsertionEffect:!1,bX=xX||jue,f$=xX||q.useLayoutEffect,wX=q.createContext(typeof HTMLElement<"u"?yX({key:"css"}):null),Vue=wX.Provider,aN=function(t){return q.forwardRef(function(n,r){var s=q.useContext(wX);return t(n,s,r)})},u1=q.createContext({}),SX=function(){return q.useContext(u1)},lN={}.hasOwnProperty,W3="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Uue=function(t,n){var r={};for(var s in n)lN.call(n,s)&&(r[s]=n[s]);return r[W3]=t,r},$ue=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return oN(n,r,s),bX(function(){return sN(n,r,s)}),null},que=aN(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var s=e[W3],c=[r],h="";typeof e.className=="string"?h=vX(t.registered,c,e.className):e.className!=null&&(h=e.className+" ");var i=$T(c,void 0,q.useContext(u1));h+=t.key+"-"+i.name;var g={};for(var w in e)lN.call(e,w)&&w!=="css"&&w!==W3&&(g[w]=e[w]);return g.className=h,n&&(g.ref=n),q.createElement(q.Fragment,null,q.createElement($ue,{cache:t,serialized:i,isStringTag:typeof s=="string"}),q.createElement(s,g))}),Hue=que,p$=function(t,n){var r=arguments;if(n==null||!lN.call(n,"css"))return q.createElement.apply(void 0,r);var s=r.length,c=new Array(s);c[0]=Hue,c[1]=Uue(t,n);for(var h=2;h<s;h++)c[h]=r[h];return q.createElement.apply(null,c)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(p$||(p$={}));var Gue=aN(function(e,t){var n=e.styles,r=$T([n],void 0,q.useContext(u1)),s=q.useRef();return f$(function(){var c=t.key+"-global",h=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,g=document.querySelector('style[data-emotion="'+c+" "+r.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(i=!0,g.setAttribute("data-emotion",c),h.hydrate([g])),s.current=[h,i],function(){h.flush()}},[t]),f$(function(){var c=s.current,h=c[0],i=c[1];if(i){c[1]=!1;return}if(r.next!==void 0&&sN(t,r.next,!0),h.tags.length){var g=h.tags[h.tags.length-1].nextElementSibling;h.before=g,h.flush()}t.insert("",r,h,!1)},[t,r.name]),null});function d1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $T(t)}function ov(){var e=d1.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Wue=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Yue=mX(function(e){return Wue.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Xue=Yue,Zue=function(t){return t!=="theme"},m$=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Xue:Zue},g$=function(t,n,r){var s;if(n){var c=n.shouldForwardProp;s=t.__emotion_forwardProp&&c?function(h){return t.__emotion_forwardProp(h)&&c(h)}:c}return typeof s!="function"&&r&&(s=t.__emotion_forwardProp),s},Kue=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return oN(n,r,s),bX(function(){return sN(n,r,s)}),null},Que=function e(t,n){var r=t.__emotion_real===t,s=r&&t.__emotion_base||t,c,h;n!==void 0&&(c=n.label,h=n.target);var i=g$(t,n,r),g=i||m$(s),w=!g("as");return function(){var T=arguments,A=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&A.push("label:"+c+";"),T[0]==null||T[0].raw===void 0)A.push.apply(A,T);else{var D=T[0];A.push(D[0]);for(var k=T.length,I=1;I<k;I++)A.push(T[I],D[I])}var F=aN(function(j,V,W){var Z=w&&j.as||s,K="",ee=[],se=j;if(j.theme==null){se={};for(var he in j)se[he]=j[he];se.theme=q.useContext(u1)}typeof j.className=="string"?K=vX(V.registered,ee,j.className):j.className!=null&&(K=j.className+" ");var ye=$T(A.concat(ee),V.registered,se);K+=V.key+"-"+ye.name,h!==void 0&&(K+=" "+h);var _e=w&&i===void 0?m$(Z):g,ae={};for(var be in j)w&&be==="as"||_e(be)&&(ae[be]=j[be]);return ae.className=K,W&&(ae.ref=W),q.createElement(q.Fragment,null,q.createElement(Kue,{cache:V,serialized:ye,isStringTag:typeof Z=="string"}),q.createElement(Z,ae))});return F.displayName=c!==void 0?c:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",F.defaultProps=t.defaultProps,F.__emotion_real=F,F.__emotion_base=s,F.__emotion_styles=A,F.__emotion_forwardProp=i,Object.defineProperty(F,"toString",{value:function(){return"."+h}}),F.withComponent=function(j,V){var W=e(j,Tt({},n,V,{shouldForwardProp:g$(F,V,!0)}));return W.apply(void 0,A)},F}},Jue=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Y3=Que.bind(null);Jue.forEach(function(e){Y3[e]=Y3(e)});const RI=new Map,ede=(e,t)=>{const n=yX(e);return n.sheet=new t({key:n.key,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy,prepend:n.sheet.prepend,insertionPoint:n.sheet.insertionPoint}),n};let Fy;if(typeof document=="object"&&(Fy=document.querySelector('[name="emotion-insertion-point"]'),!Fy)){Fy=document.createElement("meta"),Fy.setAttribute("name","emotion-insertion-point"),Fy.setAttribute("content","");const e=document.querySelector("head");e&&e.prepend(Fy)}function tde(e,t){if(e||t){class n extends lX{insert(c,h){return this.key&&this.key.endsWith("global")&&(this.before=Fy),super.insert(c,h)}}const r=ede({key:"css",insertionPoint:e?Fy:void 0},n);if(t){const s=r.insert;r.insert=(...c)=>(c[1].styles.startsWith("@layer")||(c[1].styles=`@layer mui {${c[1].styles}}`),s(...c))}return r}}function nde(e){const{injectFirst:t,enableCssLayer:n,children:r}=e,s=q.useMemo(()=>{const c=`${t}-${n}`;if(RI.has(c))return RI.get(c);const h=tde(t,n);return RI.set(c,h),h},[t,n]);return s?$.jsx(Vue,{value:s,children:r}):r}function rde(e){return e==null||Object.keys(e).length===0}function TX(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?s=>t(rde(s)?n:s):t;return $.jsx(Gue,{styles:r})}function EX(e,t){return Y3(e,t)}function ide(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const y$=[];function v$(e){return y$[0]=e,$T(y$)}const ode=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function sde(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=e,c=ode(t),h=Object.keys(c);function i(D){return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${n})`}function g(D){return`@media (max-width:${(typeof t[D]=="number"?t[D]:D)-r/100}${n})`}function w(D,k){const I=h.indexOf(k);return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${n}) and (max-width:${(I!==-1&&typeof t[h[I]]=="number"?t[h[I]]:k)-r/100}${n})`}function T(D){return h.indexOf(D)+1<h.length?w(D,h[h.indexOf(D)+1]):i(D)}function A(D){const k=h.indexOf(D);return k===0?i(h[1]):k===h.length-1?g(h[k]):w(D,h[h.indexOf(D)+1]).replace("@media","@media not all and")}return{keys:h,values:c,up:i,down:g,between:w,only:T,not:A,unit:n,...s}}const ade={borderRadius:4};function CX(e=8,t=FR({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(c=>{const h=t(c);return typeof h=="number"?`${h}px`:h}).join(" ");return n.mui=!0,n}function lde(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return n.palette.mode===e?t:{}}function qT(e={},...t){const{breakpoints:n={},palette:r={},spacing:s,shape:c={},...h}=e,i=sde(n),g=CX(s);let w=vl({breakpoints:i,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:g,shape:{...ade,...c}},h);return w=pce(w),w.applyStyles=lde,w=t.reduce((T,A)=>vl(T,A),w),w.unstable_sxConfig={...VT,...h==null?void 0:h.unstable_sxConfig},w.unstable_sx=function(A){return Yy({sx:A,theme:this})},w}function cde(e){return Object.keys(e).length===0}function cN(e=null){const t=q.useContext(u1);return!t||cde(t)?e:t}const ude=qT();function HT(e=ude){return cN(e)}function dde({styles:e,themeId:t,defaultTheme:n={}}){const r=HT(n),s=typeof e=="function"?e(t&&r[t]||r):e;return $.jsx(TX,{styles:s})}const _$=e=>e,hde=()=>{let e=_$;return{configure(t){e=t},generate(t){return e(t)},reset(){e=_$}}},AX=hde();function fde(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:s}=e,c=EX("div",{shouldForwardProp:i=>i!=="theme"&&i!=="sx"&&i!=="as"})(Yy);return q.forwardRef(function(g,w){const T=HT(n),{className:A,component:D="div",...k}=$R(g);return $.jsx(c,{as:D,ref:w,className:Wn(A,s?s(r):r),theme:t&&T[t]||T,...k})})}const pde={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fr(e,t,n="Mui"){const r=pde[t];return r?`${n}-${r}`:`${AX.generate(e)}-${t}`}function pr(e,t,n="Mui"){const r={};return t.forEach(s=>{r[s]=fr(e,s,n)}),r}function MX(e){const{variants:t,...n}=e,r={variants:t,style:v$(n),isProcessed:!0};return r.style===n||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=v$(s.style))}),r}const mde=qT();function Vp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function gde(e){return e?(t,n)=>n[e]:null}function yde(e,t,n){e.theme=_de(e.theme)?n:e.theme[t]||e.theme}function KA(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>KA(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...c}=n;r=c}return RX(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function RX(e,t,n=[]){var s;let r;e:for(let c=0;c<t.length;c+=1){const h=t[c];if(typeof h.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!h.props(r))continue}else for(const i in h.props)if(e[i]!==h.props[i]&&((s=e.ownerState)==null?void 0:s[i])!==h.props[i])continue e;typeof h.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(h.style(r))):n.push(h.style)}return n}function DX(e={}){const{themeId:t,defaultTheme:n=mde,rootShouldForwardProp:r=Vp,slotShouldForwardProp:s=Vp}=e;function c(i){yde(i,t,n)}return(i,g={})=>{ide(i,ee=>ee.filter(se=>se!==Yy));const{name:w,slot:T,skipVariantsResolver:A,skipSx:D,overridesResolver:k=gde(bde(T)),...I}=g,F=A!==void 0?A:T&&T!=="Root"&&T!=="root"||!1,j=D||!1;let V=Vp;T==="Root"||T==="root"?V=r:T?V=s:xde(i)&&(V=void 0);const W=EX(i,{shouldForwardProp:V,label:vde(),...I}),Z=ee=>{if(typeof ee=="function"&&ee.__emotion_real!==ee)return function(he){return KA(he,ee)};if(kp(ee)){const se=MX(ee);return se.variants?function(ye){return KA(ye,se)}:se.style}return ee},K=(...ee)=>{const se=[],he=ee.map(Z),ye=[];if(se.push(c),w&&k&&ye.push(function(Te){var Se,qe;const Re=(qe=(Se=Te.theme.components)==null?void 0:Se[w])==null?void 0:qe.styleOverrides;if(!Re)return null;const He={};for(const it in Re)He[it]=KA(Te,Re[it]);return k(Te,He)}),w&&!F&&ye.push(function(Te){var He,Se;const Ae=Te.theme,Re=(Se=(He=Ae==null?void 0:Ae.components)==null?void 0:He[w])==null?void 0:Se.variants;return Re?RX(Te,Re):null}),j||ye.push(Yy),Array.isArray(he[0])){const be=he.shift(),Te=new Array(se.length).fill(""),Ae=new Array(ye.length).fill("");let Re;Re=[...Te,...be,...Ae],Re.raw=[...Te,...be.raw,...Ae],se.unshift(Re)}const _e=[...se,...he,...ye],ae=W(..._e);return i.muiName&&(ae.muiName=i.muiName),ae};return W.withConfig&&(K.withConfig=W.withConfig),K}}function vde(e,t){return void 0}function _de(e){for(const t in e)return!1;return!0}function xde(e){return typeof e=="string"&&e.charCodeAt(0)>96}function bde(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const PX=DX();function KS(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const s=r;if(s==="components"||s==="slots")n[s]={...e[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const c=e[s],h=t[s];if(!h)n[s]=c||{};else if(!c)n[s]=h;else{n[s]={...h};for(const i in c)if(Object.prototype.hasOwnProperty.call(c,i)){const g=i;n[s][g]=KS(c[g],h[g])}}}else n[s]===void 0&&(n[s]=e[s])}return n}function IX(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:KS(t.components[n].defaultProps,r)}function uN({props:e,name:t,defaultTheme:n,themeId:r}){let s=HT(n);return r&&(s=s[r]||s),IX({theme:s,name:t,props:e})}const $s=typeof window<"u"?q.useLayoutEffect:q.useEffect;function wde(e,t,n,r,s){const[c,h]=q.useState(()=>s&&n?n(e).matches:r?r(e).matches:t);return $s(()=>{if(!n)return;const i=n(e),g=()=>{h(i.matches)};return g(),i.addEventListener("change",g),()=>{i.removeEventListener("change",g)}},[e,n]),c}const Sde={...DM},kX=Sde.useSyncExternalStore;function Tde(e,t,n,r,s){const c=q.useCallback(()=>t,[t]),h=q.useMemo(()=>{if(s&&n)return()=>n(e).matches;if(r!==null){const{matches:T}=r(e);return()=>T}return c},[c,e,r,s,n]),[i,g]=q.useMemo(()=>{if(n===null)return[c,()=>()=>{}];const T=n(e);return[()=>T.matches,A=>(T.addEventListener("change",A),()=>{T.removeEventListener("change",A)})]},[c,n,e]);return kX(g,i,h)}function OX(e={}){const{themeId:t}=e;return function(r,s={}){let c=cN();c&&t&&(c=c[t]||c);const h=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:g=h?window.matchMedia:null,ssrMatchMedia:w=null,noSsr:T=!1}=IX({name:"MuiUseMediaQuery",props:s,theme:c});let A=typeof r=="function"?r(c):r;return A=A.replace(/^@media( ?)/m,""),A.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(kX!==void 0?Tde:wde)(A,i,g,w,T)}}OX();const LX=q.createContext(null);function dN(){return q.useContext(LX)}const Ede=typeof Symbol=="function"&&Symbol.for,Cde=Ede?Symbol.for("mui.nested"):"__THEME_NESTED__";function Ade(e,t){return typeof t=="function"?t(e):{...e,...t}}function Mde(e){const{children:t,theme:n}=e,r=dN(),s=q.useMemo(()=>{const c=r===null?{...n}:Ade(r,n);return c!=null&&(c[Cde]=r!==null),c},[n,r]);return $.jsx(LX.Provider,{value:s,children:t})}const zX=q.createContext(void 0);function Rde({value:e,children:t}){return $.jsx(zX.Provider,{value:e,children:t})}function Dde(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const s=t.components[n];return s.defaultProps?KS(s.defaultProps,r):!s.styleOverrides&&!s.variants?KS(s,r):r}function Pde({props:e,name:t}){const n=q.useContext(zX);return Dde({props:e,name:t,theme:{components:n}})}const x$={};function b$(e,t,n,r=!1){return q.useMemo(()=>{const s=e&&t[e]||t;if(typeof n=="function"){const c=n(s),h=e?{...t,[e]:c}:c;return r?()=>h:h}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,r])}function FX(e){const{children:t,theme:n,themeId:r}=e,s=cN(x$),c=dN()||x$,h=b$(r,s,n),i=b$(r,c,n,!0),g=(r?h[r]:h).direction==="rtl";return $.jsx(Mde,{theme:i,children:$.jsx(u1.Provider,{value:h,children:$.jsx(lce,{value:g,children:$.jsx(Rde,{value:r?h[r].components:h.components,children:t})})})})}const w$={theme:void 0};function Ide(e){let t,n;return function(s){let c=t;return(c===void 0||s.theme!==n)&&(w$.theme=s.theme,c=MX(e(w$)),t=c,n=s.theme),c}}const hN="mode",fN="color-scheme",kde="data-color-scheme";function Ode(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:s=hN,colorSchemeStorageKey:c=fN,attribute:h=kde,colorSchemeNode:i="document.documentElement",nonce:g}=e||{};let w="",T=h;if(h==="class"&&(T=".%s"),h==="data"&&(T="[data-%s]"),T.startsWith(".")){const D=T.substring(1);w+=`${i}.classList.remove('${D}'.replace('%s', light), '${D}'.replace('%s', dark));
      ${i}.classList.add('${D}'.replace('%s', colorScheme));`}const A=T.match(/\[([^\]]+)\]/);if(A){const[D,k]=A[1].split("=");k||(w+=`${i}.removeAttribute('${D}'.replace('%s', light));
      ${i}.removeAttribute('${D}'.replace('%s', dark));`),w+=`
      ${i}.setAttribute('${D}'.replace('%s', colorScheme), ${k?`${k}.replace('%s', colorScheme)`:'""'});`}else w+=`${i}.setAttribute('${T}', colorScheme);`;return $.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?g:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${s}') || '${t}';
  const dark = localStorage.getItem('${c}-dark') || '${r}';
  const light = localStorage.getItem('${c}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${w}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Lde(){}const zde=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(n){if(typeof window>"u")return;if(!t)return n;let r;try{r=t.localStorage.getItem(e)}catch{}return r||n},set:n=>{if(t)try{t.localStorage.setItem(e,n)}catch{}},subscribe:n=>{if(!t)return Lde;const r=s=>{const c=s.newValue;s.key===e&&n(c)};return t.addEventListener("storage",r),()=>{t.removeEventListener("storage",r)}}});function DI(){}function S$(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function BX(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function Fde(e){return BX(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function Bde(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:s=[],modeStorageKey:c=hN,colorSchemeStorageKey:h=fN,storageWindow:i=typeof window>"u"?void 0:window,storageManager:g=zde,noSsr:w=!1}=e,T=s.join(","),A=s.length>1,D=q.useMemo(()=>g==null?void 0:g({key:c,storageWindow:i}),[g,c,i]),k=q.useMemo(()=>g==null?void 0:g({key:`${h}-light`,storageWindow:i}),[g,h,i]),I=q.useMemo(()=>g==null?void 0:g({key:`${h}-dark`,storageWindow:i}),[g,h,i]),[F,j]=q.useState(()=>{const ye=(D==null?void 0:D.get(t))||t,_e=(k==null?void 0:k.get(n))||n,ae=(I==null?void 0:I.get(r))||r;return{mode:ye,systemMode:S$(ye),lightColorScheme:_e,darkColorScheme:ae}}),[V,W]=q.useState(w||!A);q.useEffect(()=>{W(!0)},[]);const Z=Fde(F),K=q.useCallback(ye=>{j(_e=>{if(ye===_e.mode)return _e;const ae=ye??t;return D==null||D.set(ae),{..._e,mode:ae,systemMode:S$(ae)}})},[D,t]),ee=q.useCallback(ye=>{ye?typeof ye=="string"?ye&&!T.includes(ye)?console.error(`\`${ye}\` does not exist in \`theme.colorSchemes\`.`):j(_e=>{const ae={..._e};return BX(_e,be=>{be==="light"&&(k==null||k.set(ye),ae.lightColorScheme=ye),be==="dark"&&(I==null||I.set(ye),ae.darkColorScheme=ye)}),ae}):j(_e=>{const ae={..._e},be=ye.light===null?n:ye.light,Te=ye.dark===null?r:ye.dark;return be&&(T.includes(be)?(ae.lightColorScheme=be,k==null||k.set(be)):console.error(`\`${be}\` does not exist in \`theme.colorSchemes\`.`)),Te&&(T.includes(Te)?(ae.darkColorScheme=Te,I==null||I.set(Te)):console.error(`\`${Te}\` does not exist in \`theme.colorSchemes\`.`)),ae}):j(_e=>(k==null||k.set(n),I==null||I.set(r),{..._e,lightColorScheme:n,darkColorScheme:r}))},[T,k,I,n,r]),se=q.useCallback(ye=>{F.mode==="system"&&j(_e=>{const ae=ye!=null&&ye.matches?"dark":"light";return _e.systemMode===ae?_e:{..._e,systemMode:ae}})},[F.mode]),he=q.useRef(se);return he.current=se,q.useEffect(()=>{if(typeof window.matchMedia!="function"||!A)return;const ye=(...ae)=>he.current(...ae),_e=window.matchMedia("(prefers-color-scheme: dark)");return _e.addListener(ye),ye(_e),()=>{_e.removeListener(ye)}},[A]),q.useEffect(()=>{if(A){const ye=(D==null?void 0:D.subscribe(be=>{(!be||["light","dark","system"].includes(be))&&K(be||t)}))||DI,_e=(k==null?void 0:k.subscribe(be=>{(!be||T.match(be))&&ee({light:be})}))||DI,ae=(I==null?void 0:I.subscribe(be=>{(!be||T.match(be))&&ee({dark:be})}))||DI;return()=>{ye(),_e(),ae()}}},[ee,K,T,t,i,A,D,k,I]),{...F,mode:V?F.mode:void 0,systemMode:V?F.systemMode:void 0,colorScheme:V?Z:void 0,setMode:K,setColorScheme:ee}}const Nde="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function jde(e){const{themeId:t,theme:n={},modeStorageKey:r=hN,colorSchemeStorageKey:s=fN,disableTransitionOnChange:c=!1,defaultColorScheme:h,resolveTheme:i}=e,g={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},w=q.createContext(void 0),T=()=>q.useContext(w)||g,A={},D={};function k(V){var zn,Un,mr,Xn;const{children:W,theme:Z,modeStorageKey:K=r,colorSchemeStorageKey:ee=s,disableTransitionOnChange:se=c,storageManager:he,storageWindow:ye=typeof window>"u"?void 0:window,documentNode:_e=typeof document>"u"?void 0:document,colorSchemeNode:ae=typeof document>"u"?void 0:document.documentElement,disableNestedContext:be=!1,disableStyleSheetGeneration:Te=!1,defaultMode:Ae="system",forceThemeRerender:Re=!1,noSsr:He}=V,Se=q.useRef(!1),qe=dN(),it=q.useContext(w),tt=!!it&&!be,Oe=q.useMemo(()=>Z||(typeof n=="function"?n():n),[Z]),Je=Oe[t],yt=Je||Oe,{colorSchemes:wt=A,components:$t=D,cssVarPrefix:It}=yt,vt=Object.keys(wt).filter(or=>!!wt[or]).join(","),sn=q.useMemo(()=>vt.split(","),[vt]),Rn=typeof h=="string"?h:h.light,yn=typeof h=="string"?h:h.dark,Qt=wt[Rn]&&wt[yn]?Ae:((Un=(zn=wt[yt.defaultColorScheme])==null?void 0:zn.palette)==null?void 0:Un.mode)||((mr=yt.palette)==null?void 0:mr.mode),{mode:Jt,setMode:fn,systemMode:Bt,lightColorScheme:Kt,darkColorScheme:_n,colorScheme:an,setColorScheme:Ft}=Bde({supportedColorSchemes:sn,defaultLightColorScheme:Rn,defaultDarkColorScheme:yn,modeStorageKey:K,colorSchemeStorageKey:ee,defaultMode:Qt,storageManager:he,storageWindow:ye,noSsr:He});let kn=Jt,Yn=an;tt&&(kn=it.mode,Yn=it.colorScheme);let wn=Yn||yt.defaultColorScheme;yt.vars&&!Re&&(wn=yt.defaultColorScheme);const Vn=q.useMemo(()=>{var Fr;const or=((Fr=yt.generateThemeVars)==null?void 0:Fr.call(yt))||yt.vars,En={...yt,components:$t,colorSchemes:wt,cssVarPrefix:It,vars:or};if(typeof En.generateSpacing=="function"&&(En.spacing=En.generateSpacing()),wn){const Er=wt[wn];Er&&typeof Er=="object"&&Object.keys(Er).forEach(_r=>{Er[_r]&&typeof Er[_r]=="object"?En[_r]={...En[_r],...Er[_r]}:En[_r]=Er[_r]})}return i?i(En):En},[yt,wn,$t,wt,It]),ut=yt.colorSchemeSelector;$s(()=>{if(Yn&&ae&&ut&&ut!=="media"){const or=ut;let En=ut;if(or==="class"&&(En=".%s"),or==="data"&&(En="[data-%s]"),or!=null&&or.startsWith("data-")&&!or.includes("%s")&&(En=`[${or}="%s"]`),En.startsWith("."))ae.classList.remove(...sn.map(Fr=>En.substring(1).replace("%s",Fr))),ae.classList.add(En.substring(1).replace("%s",Yn));else{const Fr=En.replace("%s",Yn).match(/\[([^\]]+)\]/);if(Fr){const[Er,_r]=Fr[1].split("=");_r||sn.forEach(nr=>{ae.removeAttribute(Er.replace(Yn,nr))}),ae.setAttribute(Er,_r?_r.replace(/"|'/g,""):"")}else ae.setAttribute(En,Yn)}}},[Yn,ut,ae,sn]),q.useEffect(()=>{let or;if(se&&Se.current&&_e){const En=_e.createElement("style");En.appendChild(_e.createTextNode(Nde)),_e.head.appendChild(En),window.getComputedStyle(_e.body),or=setTimeout(()=>{_e.head.removeChild(En)},1)}return()=>{clearTimeout(or)}},[Yn,se,_e]),q.useEffect(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const gn=q.useMemo(()=>({allColorSchemes:sn,colorScheme:Yn,darkColorScheme:_n,lightColorScheme:Kt,mode:kn,setColorScheme:Ft,setMode:fn,systemMode:Bt}),[sn,Yn,_n,Kt,kn,Ft,fn,Bt,Vn.colorSchemeSelector]);let Rt=!0;(Te||yt.cssVariables===!1||tt&&(qe==null?void 0:qe.cssVarPrefix)===It)&&(Rt=!1);const Wt=$.jsxs(q.Fragment,{children:[$.jsx(FX,{themeId:Je?t:void 0,theme:Vn,children:W}),Rt&&$.jsx(TX,{styles:((Xn=Vn.generateStyleSheets)==null?void 0:Xn.call(Vn))||[]})]});return tt?Wt:$.jsx(w.Provider,{value:gn,children:Wt})}const I=typeof h=="string"?h:h.light,F=typeof h=="string"?h:h.dark;return{CssVarsProvider:k,useColorScheme:T,getInitColorSchemeScript:V=>Ode({colorSchemeStorageKey:s,defaultLightColorScheme:I,defaultDarkColorScheme:F,modeStorageKey:r,...V})}}function Vde(e=""){function t(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${e?`${e}-`:""}${r}${t(...s)})`}const T$=(e,t,n,r=[])=>{let s=e;t.forEach((c,h)=>{h===t.length-1?Array.isArray(s)?s[Number(c)]=n:s&&typeof s=="object"&&(s[c]=n):s&&typeof s=="object"&&(s[c]||(s[c]=r.includes(c)?[]:{}),s=s[c])})},Ude=(e,t,n)=>{function r(s,c=[],h=[]){Object.entries(s).forEach(([i,g])=>{(!n||n&&!n([...c,i]))&&g!=null&&(typeof g=="object"&&Object.keys(g).length>0?r(g,[...c,i],Array.isArray(g)?[...h,i]:h):t([...c,i],g,h))})}r(e)},$de=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function PI(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},s={},c={},h={};return Ude(e,(i,g,w)=>{if((typeof g=="string"||typeof g=="number")&&(!r||!r(i,g))){const T=`--${n?`${n}-`:""}${i.join("-")}`,A=$de(i,g);Object.assign(s,{[T]:A}),T$(c,i,`var(${T})`,w),T$(h,i,`var(${T}, ${A})`,w)}},i=>i[0]==="vars"),{css:s,vars:c,varsWithDefaults:h}}function qde(e,t={}){const{getSelector:n=j,disableCssColorScheme:r,colorSchemeSelector:s}=t,{colorSchemes:c={},components:h,defaultColorScheme:i="light",...g}=e,{vars:w,css:T,varsWithDefaults:A}=PI(g,t);let D=A;const k={},{[i]:I,...F}=c;if(Object.entries(F||{}).forEach(([Z,K])=>{const{vars:ee,css:se,varsWithDefaults:he}=PI(K,t);D=vl(D,he),k[Z]={css:se,vars:ee}}),I){const{css:Z,vars:K,varsWithDefaults:ee}=PI(I,t);D=vl(D,ee),k[i]={css:Z,vars:K}}function j(Z,K){var se,he;let ee=s;if(s==="class"&&(ee=".%s"),s==="data"&&(ee="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(ee=`[${s}="%s"]`),Z){if(ee==="media")return e.defaultColorScheme===Z?":root":{[`@media (prefers-color-scheme: ${((he=(se=c[Z])==null?void 0:se.palette)==null?void 0:he.mode)||Z})`]:{":root":K}};if(ee)return e.defaultColorScheme===Z?`:root, ${ee.replace("%s",String(Z))}`:ee.replace("%s",String(Z))}return":root"}return{vars:D,generateThemeVars:()=>{let Z={...w};return Object.entries(k).forEach(([,{vars:K}])=>{Z=vl(Z,K)}),Z},generateStyleSheets:()=>{var ye,_e;const Z=[],K=e.defaultColorScheme||"light";function ee(ae,be){Object.keys(be).length&&Z.push(typeof ae=="string"?{[ae]:{...be}}:ae)}ee(n(void 0,{...T}),T);const{[K]:se,...he}=k;if(se){const{css:ae}=se,be=(_e=(ye=c[K])==null?void 0:ye.palette)==null?void 0:_e.mode,Te=!r&&be?{colorScheme:be,...ae}:{...ae};ee(n(K,{...Te}),Te)}return Object.entries(he).forEach(([ae,{css:be}])=>{var Re,He;const Te=(He=(Re=c[ae])==null?void 0:Re.palette)==null?void 0:He.mode,Ae=!r&&Te?{colorScheme:Te,...be}:{...be};ee(n(ae,{...Ae}),Ae)}),Z}}}function Hde(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function Ob(e,t){var n,r,s;return q.isValidElement(e)&&t.indexOf(e.type.muiName??((s=(r=(n=e.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}const Gde=(e,t)=>e.filter(n=>t.includes(n)),h1=(e,t,n)=>{const r=e.keys[0];Array.isArray(t)?t.forEach((s,c)=>{n((h,i)=>{c<=e.keys.length-1&&(c===0?Object.assign(h,i):h[e.up(e.keys[c])]=i)},s)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Gde(e.keys,Object.keys(t))).forEach(c=>{if(e.keys.includes(c)){const h=t[c];h!==void 0&&n((i,g)=>{r===c?Object.assign(i,g):i[e.up(c)]=g},h)}}):(typeof t=="number"||typeof t=="string")&&n((s,c)=>{Object.assign(s,c)},t)};function zM(e){return`--Grid-${e}Spacing`}function WR(e){return`--Grid-parent-${e}Spacing`}const E$="--Grid-columns",Lb="--Grid-parent-columns",Wde=({theme:e,ownerState:t})=>{const n={};return h1(e.breakpoints,t.size,(r,s)=>{let c={};s==="grow"&&(c={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(c={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / var(${Lb}) - (var(${Lb}) - ${s}) * (var(${WR("column")}) / var(${Lb})))`}),r(n,c)}),n},Yde=({theme:e,ownerState:t})=>{const n={};return h1(e.breakpoints,t.offset,(r,s)=>{let c={};s==="auto"&&(c={marginLeft:"auto"}),typeof s=="number"&&(c={marginLeft:s===0?"0px":`calc(100% * ${s} / var(${Lb}) + var(${WR("column")}) * ${s} / var(${Lb}))`}),r(n,c)}),n},Xde=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[E$]:12};return h1(e.breakpoints,t.columns,(r,s)=>{const c=s??12;r(n,{[E$]:c,"> *":{[Lb]:c}})}),n},Zde=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return h1(e.breakpoints,t.rowSpacing,(r,s)=>{var h;const c=typeof s=="string"?s:(h=e.spacing)==null?void 0:h.call(e,s);r(n,{[zM("row")]:c,"> *":{[WR("row")]:c}})}),n},Kde=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return h1(e.breakpoints,t.columnSpacing,(r,s)=>{var h;const c=typeof s=="string"?s:(h=e.spacing)==null?void 0:h.call(e,s);r(n,{[zM("column")]:c,"> *":{[WR("column")]:c}})}),n},Qde=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return h1(e.breakpoints,t.direction,(r,s)=>{r(n,{flexDirection:s})}),n},Jde=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${zM("row")}) var(${zM("column")})`}}),ehe=e=>{const t=[];return Object.entries(e).forEach(([n,r])=>{r!==!1&&r!==void 0&&t.push(`grid-${n}-${String(r)}`)}),t},the=(e,t="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const r=[];return Object.entries(e).forEach(([s,c])=>{n(c)&&r.push(`spacing-${s}-${String(c)}`)}),r}return[]},nhe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function rhe(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const ihe=qT(),ohe=PX("div",{name:"MuiGrid",slot:"Root"});function she(e){return uN({props:e,name:"MuiGrid",defaultTheme:ihe})}function ahe(e={}){const{createStyledComponent:t=ohe,useThemeProps:n=she,useTheme:r=HT,componentName:s="MuiGrid"}=e,c=(w,T)=>{const{container:A,direction:D,spacing:k,wrap:I,size:F}=w,j={root:["root",A&&"container",I!=="wrap"&&`wrap-xs-${String(I)}`,...nhe(D),...ehe(F),...A?the(k,T.breakpoints.keys[0]):[]]};return dr(j,V=>fr(s,V),{})};function h(w,T,A=()=>!0){const D={};return w===null||(Array.isArray(w)?w.forEach((k,I)=>{k!==null&&A(k)&&T.keys[I]&&(D[T.keys[I]]=k)}):typeof w=="object"?Object.keys(w).forEach(k=>{const I=w[k];I!=null&&A(I)&&(D[k]=I)}):D[T.keys[0]]=w),D}const i=t(Xde,Kde,Zde,Wde,Qde,Jde,Yde),g=q.forwardRef(function(T,A){const D=r(),k=n(T),I=$R(k);rhe(I,D.breakpoints);const{className:F,children:j,columns:V=12,container:W=!1,component:Z="div",direction:K="row",wrap:ee="wrap",size:se={},offset:he={},spacing:ye=0,rowSpacing:_e=ye,columnSpacing:ae=ye,unstable_level:be=0,...Te}=I,Ae=h(se,D.breakpoints,Je=>Je!==!1),Re=h(he,D.breakpoints),He=T.columns??(be?void 0:V),Se=T.spacing??(be?void 0:ye),qe=T.rowSpacing??T.spacing??(be?void 0:_e),it=T.columnSpacing??T.spacing??(be?void 0:ae),tt={...I,level:be,columns:He,container:W,direction:K,wrap:ee,spacing:Se,rowSpacing:qe,columnSpacing:it,size:Ae,offset:Re},Oe=c(tt,D);return $.jsx(i,{ref:A,as:Z,ownerState:tt,className:Wn(Oe.root,F),...Te,children:q.Children.map(j,Je=>{var yt;return q.isValidElement(Je)&&Ob(Je,["Grid"])&&W&&Je.props.container?q.cloneElement(Je,{unstable_level:((yt=Je.props)==null?void 0:yt.unstable_level)??be+1}):Je})})});return g.muiName="Grid",g}const lhe=qT(),che=PX("div",{name:"MuiStack",slot:"Root"});function uhe(e){return uN({props:e,name:"MuiStack",defaultTheme:lhe})}function dhe(e,t){const n=q.Children.toArray(e).filter(Boolean);return n.reduce((r,s,c)=>(r.push(s),c<n.length-1&&r.push(q.cloneElement(t,{key:`separator-${c}`})),r),[])}const hhe=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],fhe=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...Af({theme:t},EI({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r}))};if(e.spacing){const r=FR(t),s=Object.keys(t.breakpoints.values).reduce((g,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(g[w]=!0),g),{}),c=EI({values:e.direction,base:s}),h=EI({values:e.spacing,base:s});typeof c=="object"&&Object.keys(c).forEach((g,w,T)=>{if(!c[g]){const D=w>0?c[T[w-1]]:"column";c[g]=D}}),n=vl(n,Af({theme:t},h,(g,w)=>e.useFlexGap?{gap:g0(r,g)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${hhe(w?c[w]:e.direction)}`]:g0(r,g)}}))}return n=gce(t.breakpoints,n),n};function phe(e={}){const{createStyledComponent:t=che,useThemeProps:n=uhe,componentName:r="MuiStack"}=e,s=()=>dr({root:["root"]},g=>fr(r,g),{}),c=t(fhe);return q.forwardRef(function(g,w){const T=n(g),A=$R(T),{component:D="div",direction:k="column",spacing:I=0,divider:F,children:j,className:V,useFlexGap:W=!1,...Z}=A,K={direction:k,spacing:I,useFlexGap:W},ee=s();return $.jsx(c,{as:D,ownerState:K,ref:w,className:Wn(ee.root,V),...Z,children:F?dhe(j,F):j})})}const QS={black:"#000",white:"#fff"},mhe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Zx={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Kx={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},$w={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Qx={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Jx={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},eb={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function NX(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:QS.white,default:QS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ghe=NX();function jX(){return{text:{primary:QS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:QS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const C$=jX();function A$(e,t,n,r){const s=r.light||r,c=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=l1(e.main,s):t==="dark"&&(e.dark=a1(e.main,c)))}function yhe(e="light"){return e==="dark"?{main:Qx[200],light:Qx[50],dark:Qx[400]}:{main:Qx[700],light:Qx[400],dark:Qx[800]}}function vhe(e="light"){return e==="dark"?{main:Zx[200],light:Zx[50],dark:Zx[400]}:{main:Zx[500],light:Zx[300],dark:Zx[700]}}function _he(e="light"){return e==="dark"?{main:Kx[500],light:Kx[300],dark:Kx[700]}:{main:Kx[700],light:Kx[400],dark:Kx[800]}}function xhe(e="light"){return e==="dark"?{main:Jx[400],light:Jx[300],dark:Jx[700]}:{main:Jx[700],light:Jx[500],dark:Jx[900]}}function bhe(e="light"){return e==="dark"?{main:eb[400],light:eb[300],dark:eb[700]}:{main:eb[800],light:eb[500],dark:eb[900]}}function whe(e="light"){return e==="dark"?{main:$w[400],light:$w[300],dark:$w[700]}:{main:"#ed6c02",light:$w[500],dark:$w[900]}}function pN(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=e,c=e.primary||yhe(t),h=e.secondary||vhe(t),i=e.error||_he(t),g=e.info||xhe(t),w=e.success||bhe(t),T=e.warning||whe(t);function A(F){return ace(F,C$.text.primary)>=n?C$.text.primary:ghe.text.primary}const D=({color:F,name:j,mainShade:V=500,lightShade:W=300,darkShade:Z=700})=>{if(F={...F},!F.main&&F[V]&&(F.main=F[V]),!F.hasOwnProperty("main"))throw new Error(Rg(11,j?` (${j})`:"",V));if(typeof F.main!="string")throw new Error(Rg(12,j?` (${j})`:"",JSON.stringify(F.main)));return A$(F,"light",W,r),A$(F,"dark",Z,r),F.contrastText||(F.contrastText=A(F.main)),F};let k;return t==="light"?k=NX():t==="dark"&&(k=jX()),vl({common:{...QS},mode:t,primary:D({color:c,name:"primary"}),secondary:D({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:i,name:"error"}),warning:D({color:T,name:"warning"}),info:D({color:g,name:"info"}),success:D({color:w,name:"success"}),grey:mhe,contrastThreshold:n,getContrastText:A,augmentColor:D,tonalOffset:r,...k},s)}function She(e){const t={};return Object.entries(e).forEach(r=>{const[s,c]=r;typeof c=="object"&&(t[s]=`${c.fontStyle?`${c.fontStyle} `:""}${c.fontVariant?`${c.fontVariant} `:""}${c.fontWeight?`${c.fontWeight} `:""}${c.fontStretch?`${c.fontStretch} `:""}${c.fontSize||""}${c.lineHeight?`/${c.lineHeight} `:""}${c.fontFamily||""}`)}),t}function The(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Ehe(e){return Math.round(e*1e5)/1e5}const M$={textTransform:"uppercase"},R$='"Roboto", "Helvetica", "Arial", sans-serif';function VX(e,t){const{fontFamily:n=R$,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:c=400,fontWeightMedium:h=500,fontWeightBold:i=700,htmlFontSize:g=16,allVariants:w,pxToRem:T,...A}=typeof t=="function"?t(e):t,D=r/14,k=T||(j=>`${j/g*D}rem`),I=(j,V,W,Z,K)=>({fontFamily:n,fontWeight:j,fontSize:k(V),lineHeight:W,...n===R$?{letterSpacing:`${Ehe(Z/V)}em`}:{},...K,...w}),F={h1:I(s,96,1.167,-1.5),h2:I(s,60,1.2,-.5),h3:I(c,48,1.167,0),h4:I(c,34,1.235,.25),h5:I(c,24,1.334,0),h6:I(h,20,1.6,.15),subtitle1:I(c,16,1.75,.15),subtitle2:I(h,14,1.57,.1),body1:I(c,16,1.5,.15),body2:I(c,14,1.43,.15),button:I(h,14,1.75,.4,M$),caption:I(c,12,1.66,.4),overline:I(c,12,2.66,1,M$),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return vl({htmlFontSize:g,pxToRem:k,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:c,fontWeightMedium:h,fontWeightBold:i,...F},A,{clone:!1})}const Che=.2,Ahe=.14,Mhe=.12;function Ds(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Che})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Ahe})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Mhe})`].join(",")}const Rhe=["none",Ds(0,2,1,-1,0,1,1,0,0,1,3,0),Ds(0,3,1,-2,0,2,2,0,0,1,5,0),Ds(0,3,3,-2,0,3,4,0,0,1,8,0),Ds(0,2,4,-1,0,4,5,0,0,1,10,0),Ds(0,3,5,-1,0,5,8,0,0,1,14,0),Ds(0,3,5,-1,0,6,10,0,0,1,18,0),Ds(0,4,5,-2,0,7,10,1,0,2,16,1),Ds(0,5,5,-3,0,8,10,1,0,3,14,2),Ds(0,5,6,-3,0,9,12,1,0,3,16,2),Ds(0,6,6,-3,0,10,14,1,0,4,18,3),Ds(0,6,7,-4,0,11,15,1,0,4,20,3),Ds(0,7,8,-4,0,12,17,2,0,5,22,4),Ds(0,7,8,-4,0,13,19,2,0,5,24,4),Ds(0,7,9,-4,0,14,21,2,0,5,26,4),Ds(0,8,9,-5,0,15,22,2,0,6,28,5),Ds(0,8,10,-5,0,16,24,2,0,6,30,5),Ds(0,8,11,-5,0,17,26,2,0,6,32,5),Ds(0,9,11,-5,0,18,28,2,0,7,34,6),Ds(0,9,12,-6,0,19,29,2,0,7,36,6),Ds(0,10,13,-6,0,20,31,3,0,8,38,7),Ds(0,10,13,-6,0,21,33,3,0,8,40,7),Ds(0,10,14,-6,0,22,35,3,0,8,42,7),Ds(0,11,14,-7,0,23,36,3,0,9,44,8),Ds(0,11,15,-7,0,24,38,3,0,9,46,8)],Dhe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UX={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function D$(e){return`${Math.round(e)}ms`}function Phe(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Ihe(e){const t={...Dhe,...e.easing},n={...UX,...e.duration};return{getAutoHeightDuration:Phe,create:(s=["all"],c={})=>{const{duration:h=n.standard,easing:i=t.easeInOut,delay:g=0,...w}=c;return(Array.isArray(s)?s:[s]).map(T=>`${T} ${typeof h=="string"?h:D$(h)} ${i} ${typeof g=="string"?g:D$(g)}`).join(",")},...e,easing:t,duration:n}}const khe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ohe(e){return kp(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function $X(e={}){const t={...e};function n(r){const s=Object.entries(r);for(let c=0;c<s.length;c++){const[h,i]=s[c];!Ohe(i)||h.startsWith("unstable_")?delete r[h]:kp(i)&&(r[h]={...i},n(r[h]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function X3(e={},...t){const{breakpoints:n,mixins:r={},spacing:s,palette:c={},transitions:h={},typography:i={},shape:g,...w}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Rg(20));const T=pN(c),A=qT(e);let D=vl(A,{mixins:The(A.breakpoints,r),palette:T,shadows:Rhe.slice(),typography:VX(T,i),transitions:Ihe(h),zIndex:{...khe}});return D=vl(D,w),D=t.reduce((k,I)=>vl(k,I),D),D.unstable_sxConfig={...VT,...w==null?void 0:w.unstable_sxConfig},D.unstable_sx=function(I){return Yy({sx:I,theme:this})},D.toRuntimeSource=$X,D}function Z3(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Lhe=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=Z3(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function qX(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function HX(e){return e==="dark"?Lhe:[]}function zhe(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...s}=e,c=pN(t);return{palette:c,opacity:{...qX(c.mode),...n},overlays:r||HX(c.mode),...s}}function Fhe(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Bhe=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Nhe=e=>(t,n)=>{const r=e.rootSelector||":root",s=e.colorSchemeSelector;let c=s;if(s==="class"&&(c=".%s"),s==="data"&&(c="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(c=`[${s}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const h={};return Bhe(e.cssVarPrefix).forEach(i=>{h[i]=n[i],delete n[i]}),c==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:h}}:c?{[c.replace("%s",t)]:h,[`${r}, ${c.replace("%s",t)}`]:n}:{[r]:{...n,...h}}}if(c&&c!=="media")return`${r}, ${c.replace("%s",String(t))}`}else if(t){if(c==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(c)return c.replace("%s",String(t))}return r};function jhe(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function An(e,t,n){!e[t]&&n&&(e[t]=n)}function vS(e){return typeof e!="string"||!e.startsWith("hsl")?e:tX(e)}function pg(e,t){`${t}Channel`in e||(e[`${t}Channel`]=yS(vS(e[t])))}function Vhe(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const wp=e=>{try{return e()}catch{}},Uhe=(e="mui")=>Vde(e);function II(e,t,n,r){if(!t)return;t=t===!0?{}:t;const s=r==="dark"?"dark":"light";if(!n){e[r]=zhe({...t,palette:{mode:s,...t==null?void 0:t.palette}});return}const{palette:c,...h}=X3({...n,palette:{mode:s,...t==null?void 0:t.palette}});return e[r]={...t,palette:c,opacity:{...qX(s),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||HX(s)},h}function $he(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:c="mui",shouldSkipGeneratingVar:h=Fhe,colorSchemeSelector:i=n.light&&n.dark?"media":void 0,rootSelector:g=":root",...w}=e,T=Object.keys(n)[0],A=r||(n.light&&T!=="light"?"light":T),D=Uhe(c),{[A]:k,light:I,dark:F,...j}=n,V={...j};let W=k;if((A==="dark"&&!("dark"in n)||A==="light"&&!("light"in n))&&(W=!0),!W)throw new Error(Rg(21,A));const Z=II(V,W,w,A);I&&!V.light&&II(V,I,void 0,"light"),F&&!V.dark&&II(V,F,void 0,"dark");let K={defaultColorScheme:A,...Z,cssVarPrefix:c,colorSchemeSelector:i,rootSelector:g,getCssVar:D,colorSchemes:V,font:{...She(Z.typography),...Z.font},spacing:Vhe(w.spacing)};Object.keys(K.colorSchemes).forEach(_e=>{const ae=K.colorSchemes[_e].palette,be=Te=>{const Ae=Te.split("-"),Re=Ae[1],He=Ae[2];return D(Te,ae[Re][He])};if(ae.mode==="light"&&(An(ae.common,"background","#fff"),An(ae.common,"onBackground","#000")),ae.mode==="dark"&&(An(ae.common,"background","#000"),An(ae.common,"onBackground","#fff")),jhe(ae,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ae.mode==="light"){An(ae.Alert,"errorColor",ss(ae.error.light,.6)),An(ae.Alert,"infoColor",ss(ae.info.light,.6)),An(ae.Alert,"successColor",ss(ae.success.light,.6)),An(ae.Alert,"warningColor",ss(ae.warning.light,.6)),An(ae.Alert,"errorFilledBg",be("palette-error-main")),An(ae.Alert,"infoFilledBg",be("palette-info-main")),An(ae.Alert,"successFilledBg",be("palette-success-main")),An(ae.Alert,"warningFilledBg",be("palette-warning-main")),An(ae.Alert,"errorFilledColor",wp(()=>ae.getContrastText(ae.error.main))),An(ae.Alert,"infoFilledColor",wp(()=>ae.getContrastText(ae.info.main))),An(ae.Alert,"successFilledColor",wp(()=>ae.getContrastText(ae.success.main))),An(ae.Alert,"warningFilledColor",wp(()=>ae.getContrastText(ae.warning.main))),An(ae.Alert,"errorStandardBg",as(ae.error.light,.9)),An(ae.Alert,"infoStandardBg",as(ae.info.light,.9)),An(ae.Alert,"successStandardBg",as(ae.success.light,.9)),An(ae.Alert,"warningStandardBg",as(ae.warning.light,.9)),An(ae.Alert,"errorIconColor",be("palette-error-main")),An(ae.Alert,"infoIconColor",be("palette-info-main")),An(ae.Alert,"successIconColor",be("palette-success-main")),An(ae.Alert,"warningIconColor",be("palette-warning-main")),An(ae.AppBar,"defaultBg",be("palette-grey-100")),An(ae.Avatar,"defaultBg",be("palette-grey-400")),An(ae.Button,"inheritContainedBg",be("palette-grey-300")),An(ae.Button,"inheritContainedHoverBg",be("palette-grey-A100")),An(ae.Chip,"defaultBorder",be("palette-grey-400")),An(ae.Chip,"defaultAvatarColor",be("palette-grey-700")),An(ae.Chip,"defaultIconColor",be("palette-grey-700")),An(ae.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),An(ae.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),An(ae.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),An(ae.LinearProgress,"primaryBg",as(ae.primary.main,.62)),An(ae.LinearProgress,"secondaryBg",as(ae.secondary.main,.62)),An(ae.LinearProgress,"errorBg",as(ae.error.main,.62)),An(ae.LinearProgress,"infoBg",as(ae.info.main,.62)),An(ae.LinearProgress,"successBg",as(ae.success.main,.62)),An(ae.LinearProgress,"warningBg",as(ae.warning.main,.62)),An(ae.Skeleton,"bg",`rgba(${be("palette-text-primaryChannel")} / 0.11)`),An(ae.Slider,"primaryTrack",as(ae.primary.main,.62)),An(ae.Slider,"secondaryTrack",as(ae.secondary.main,.62)),An(ae.Slider,"errorTrack",as(ae.error.main,.62)),An(ae.Slider,"infoTrack",as(ae.info.main,.62)),An(ae.Slider,"successTrack",as(ae.success.main,.62)),An(ae.Slider,"warningTrack",as(ae.warning.main,.62));const Te=UC(ae.background.default,.8);An(ae.SnackbarContent,"bg",Te),An(ae.SnackbarContent,"color",wp(()=>ae.getContrastText(Te))),An(ae.SpeedDialAction,"fabHoverBg",UC(ae.background.paper,.15)),An(ae.StepConnector,"border",be("palette-grey-400")),An(ae.StepContent,"border",be("palette-grey-400")),An(ae.Switch,"defaultColor",be("palette-common-white")),An(ae.Switch,"defaultDisabledColor",be("palette-grey-100")),An(ae.Switch,"primaryDisabledColor",as(ae.primary.main,.62)),An(ae.Switch,"secondaryDisabledColor",as(ae.secondary.main,.62)),An(ae.Switch,"errorDisabledColor",as(ae.error.main,.62)),An(ae.Switch,"infoDisabledColor",as(ae.info.main,.62)),An(ae.Switch,"successDisabledColor",as(ae.success.main,.62)),An(ae.Switch,"warningDisabledColor",as(ae.warning.main,.62)),An(ae.TableCell,"border",as(VC(ae.divider,1),.88)),An(ae.Tooltip,"bg",VC(ae.grey[700],.92))}if(ae.mode==="dark"){An(ae.Alert,"errorColor",as(ae.error.light,.6)),An(ae.Alert,"infoColor",as(ae.info.light,.6)),An(ae.Alert,"successColor",as(ae.success.light,.6)),An(ae.Alert,"warningColor",as(ae.warning.light,.6)),An(ae.Alert,"errorFilledBg",be("palette-error-dark")),An(ae.Alert,"infoFilledBg",be("palette-info-dark")),An(ae.Alert,"successFilledBg",be("palette-success-dark")),An(ae.Alert,"warningFilledBg",be("palette-warning-dark")),An(ae.Alert,"errorFilledColor",wp(()=>ae.getContrastText(ae.error.dark))),An(ae.Alert,"infoFilledColor",wp(()=>ae.getContrastText(ae.info.dark))),An(ae.Alert,"successFilledColor",wp(()=>ae.getContrastText(ae.success.dark))),An(ae.Alert,"warningFilledColor",wp(()=>ae.getContrastText(ae.warning.dark))),An(ae.Alert,"errorStandardBg",ss(ae.error.light,.9)),An(ae.Alert,"infoStandardBg",ss(ae.info.light,.9)),An(ae.Alert,"successStandardBg",ss(ae.success.light,.9)),An(ae.Alert,"warningStandardBg",ss(ae.warning.light,.9)),An(ae.Alert,"errorIconColor",be("palette-error-main")),An(ae.Alert,"infoIconColor",be("palette-info-main")),An(ae.Alert,"successIconColor",be("palette-success-main")),An(ae.Alert,"warningIconColor",be("palette-warning-main")),An(ae.AppBar,"defaultBg",be("palette-grey-900")),An(ae.AppBar,"darkBg",be("palette-background-paper")),An(ae.AppBar,"darkColor",be("palette-text-primary")),An(ae.Avatar,"defaultBg",be("palette-grey-600")),An(ae.Button,"inheritContainedBg",be("palette-grey-800")),An(ae.Button,"inheritContainedHoverBg",be("palette-grey-700")),An(ae.Chip,"defaultBorder",be("palette-grey-700")),An(ae.Chip,"defaultAvatarColor",be("palette-grey-300")),An(ae.Chip,"defaultIconColor",be("palette-grey-300")),An(ae.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),An(ae.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),An(ae.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),An(ae.LinearProgress,"primaryBg",ss(ae.primary.main,.5)),An(ae.LinearProgress,"secondaryBg",ss(ae.secondary.main,.5)),An(ae.LinearProgress,"errorBg",ss(ae.error.main,.5)),An(ae.LinearProgress,"infoBg",ss(ae.info.main,.5)),An(ae.LinearProgress,"successBg",ss(ae.success.main,.5)),An(ae.LinearProgress,"warningBg",ss(ae.warning.main,.5)),An(ae.Skeleton,"bg",`rgba(${be("palette-text-primaryChannel")} / 0.13)`),An(ae.Slider,"primaryTrack",ss(ae.primary.main,.5)),An(ae.Slider,"secondaryTrack",ss(ae.secondary.main,.5)),An(ae.Slider,"errorTrack",ss(ae.error.main,.5)),An(ae.Slider,"infoTrack",ss(ae.info.main,.5)),An(ae.Slider,"successTrack",ss(ae.success.main,.5)),An(ae.Slider,"warningTrack",ss(ae.warning.main,.5));const Te=UC(ae.background.default,.98);An(ae.SnackbarContent,"bg",Te),An(ae.SnackbarContent,"color",wp(()=>ae.getContrastText(Te))),An(ae.SpeedDialAction,"fabHoverBg",UC(ae.background.paper,.15)),An(ae.StepConnector,"border",be("palette-grey-600")),An(ae.StepContent,"border",be("palette-grey-600")),An(ae.Switch,"defaultColor",be("palette-grey-300")),An(ae.Switch,"defaultDisabledColor",be("palette-grey-600")),An(ae.Switch,"primaryDisabledColor",ss(ae.primary.main,.55)),An(ae.Switch,"secondaryDisabledColor",ss(ae.secondary.main,.55)),An(ae.Switch,"errorDisabledColor",ss(ae.error.main,.55)),An(ae.Switch,"infoDisabledColor",ss(ae.info.main,.55)),An(ae.Switch,"successDisabledColor",ss(ae.success.main,.55)),An(ae.Switch,"warningDisabledColor",ss(ae.warning.main,.55)),An(ae.TableCell,"border",ss(VC(ae.divider,1),.68)),An(ae.Tooltip,"bg",VC(ae.grey[700],.92))}pg(ae.background,"default"),pg(ae.background,"paper"),pg(ae.common,"background"),pg(ae.common,"onBackground"),pg(ae,"divider"),Object.keys(ae).forEach(Te=>{const Ae=ae[Te];Te!=="tonalOffset"&&Ae&&typeof Ae=="object"&&(Ae.main&&An(ae[Te],"mainChannel",yS(vS(Ae.main))),Ae.light&&An(ae[Te],"lightChannel",yS(vS(Ae.light))),Ae.dark&&An(ae[Te],"darkChannel",yS(vS(Ae.dark))),Ae.contrastText&&An(ae[Te],"contrastTextChannel",yS(vS(Ae.contrastText))),Te==="text"&&(pg(ae[Te],"primary"),pg(ae[Te],"secondary")),Te==="action"&&(Ae.active&&pg(ae[Te],"active"),Ae.selected&&pg(ae[Te],"selected")))})}),K=t.reduce((_e,ae)=>vl(_e,ae),K);const ee={prefix:c,disableCssColorScheme:s,shouldSkipGeneratingVar:h,getSelector:Nhe(K)},{vars:se,generateThemeVars:he,generateStyleSheets:ye}=qde(K,ee);return K.vars=se,Object.entries(K.colorSchemes[K.defaultColorScheme]).forEach(([_e,ae])=>{K[_e]=ae}),K.generateThemeVars=he,K.generateStyleSheets=ye,K.generateSpacing=function(){return CX(w.spacing,FR(this))},K.getColorSchemeSelector=Hde(i),K.spacing=K.generateSpacing(),K.shouldSkipGeneratingVar=h,K.unstable_sxConfig={...VT,...w==null?void 0:w.unstable_sxConfig},K.unstable_sx=function(ae){return Yy({sx:ae,theme:this})},K.toRuntimeSource=$X,K}function P$(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:pN({...n===!0?{}:n.palette,mode:t})})}function GT(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:c=n==null?void 0:n.mode,...h}=e,i=c||"light",g=s==null?void 0:s[i],w={...s,...n?{[i]:{...typeof g!="boolean"&&g,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return X3(e,...t);let T=n;"palette"in e||w[i]&&(w[i]!==!0?T=w[i].palette:i==="dark"&&(T={mode:"dark"}));const A=X3({...e,palette:T},...t);return A.defaultColorScheme=i,A.colorSchemes=w,A.palette.mode==="light"&&(A.colorSchemes.light={...w.light!==!0&&w.light,palette:A.palette},P$(A,"dark",w.dark)),A.palette.mode==="dark"&&(A.colorSchemes.dark={...w.dark!==!0&&w.dark,palette:A.palette},P$(A,"light",w.light)),A}return!n&&!("light"in w)&&i==="light"&&(w.light=!0),$he({...h,colorSchemes:w,defaultColorScheme:i,...typeof r!="boolean"&&r},...t)}const YR=GT(),oh="$$material";function cs(){const e=HT(YR);return e[oh]||e}function qhe(e){return $.jsx(dde,{...e,defaultTheme:YR,themeId:oh})}function GX(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const _c=e=>GX(e)&&e!=="classes",Ot=DX({themeId:oh,defaultTheme:YR,rootShouldForwardProp:_c});function mN(e){return function(n){return $.jsx(qhe,{styles:typeof e=="function"?r=>e({theme:r,...n}):e})}}function Hhe(){return $R}const ri=Ide;function Ghe(e){return typeof e.main=="string"}function Whe(e,t=[]){if(!Ghe(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Vs(e=[]){return([,t])=>t&&Whe(t,e)}function qr(e){return Pde(e)}function Yhe(e){return fr("MuiLinearProgress",e)}pr("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const K3=4,Q3=ov`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Xhe=typeof Q3!="string"?d1`
        animation: ${Q3} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,J3=ov`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,Zhe=typeof J3!="string"?d1`
        animation: ${J3} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,eF=ov`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Khe=typeof eF!="string"?d1`
        animation: ${eF} 3s infinite linear;
      `:null,Qhe=e=>{const{classes:t,variant:n,color:r}=e,s={root:["root",`color${Mn(r)}`,n],dashed:["dashed",`dashedColor${Mn(r)}`],bar1:["bar","bar1",`barColor${Mn(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${Mn(r)}`,n==="buffer"&&`color${Mn(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return dr(s,Yhe,t)},gN=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?l1(e.palette[t].main,.62):a1(e.palette[t].main,.5),Jhe=Ot("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Mn(n.color)}`],t[n.variant]]}})(ri(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{backgroundColor:gN(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),efe=Ot("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${Mn(n.color)}`]]}})(ri(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(Vs()).map(([t])=>{const n=gN(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),Khe||{animation:`${eF} 3s infinite linear`}),tfe=Ot("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t[`barColor${Mn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(ri(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${K3}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${K3}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:Xhe||{animation:`${Q3} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),nfe=Ot("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t[`barColor${Mn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(ri(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:gN(e,t),transition:`transform .${K3}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:Zhe||{animation:`${J3} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),yN=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiLinearProgress"}),{className:s,color:c="primary",value:h,valueBuffer:i,variant:g="indeterminate",...w}=r,T={...r,color:c,variant:g},A=Qhe(T),D=vc(),k={},I={bar1:{},bar2:{}};if((g==="determinate"||g==="buffer")&&h!==void 0){k["aria-valuenow"]=Math.round(h),k["aria-valuemin"]=0,k["aria-valuemax"]=100;let F=h-100;D&&(F=-F),I.bar1.transform=`translateX(${F}%)`}if(g==="buffer"&&i!==void 0){let F=(i||0)-100;D&&(F=-F),I.bar2.transform=`translateX(${F}%)`}return $.jsxs(Jhe,{className:Wn(A.root,s),ownerState:T,role:"progressbar",...k,ref:n,...w,children:[g==="buffer"?$.jsx(efe,{className:A.dashed,ownerState:T}):null,$.jsx(tfe,{className:A.bar1,ownerState:T,style:I.bar1}),g==="determinate"?null:$.jsx(nfe,{className:A.bar2,ownerState:T,style:I.bar2})]})});function qs({props:e,name:t}){return uN({props:e,name:t,defaultTheme:YR,themeId:oh})}function rfe({theme:e,...t}){const n=oh in e?e[oh]:void 0;return $.jsx(FX,{...t,themeId:n?oh:void 0,theme:n||e})}const qC={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:ife}=jde({themeId:oh,theme:()=>GT({cssVariables:!0}),colorSchemeStorageKey:qC.colorSchemeStorageKey,modeStorageKey:qC.modeStorageKey,defaultColorScheme:{light:qC.defaultLightColorScheme,dark:qC.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:VX(e.palette,e.typography)};return t.unstable_sx=function(r){return Yy({sx:r,theme:this})},t}}),ofe=ife;function sfe({theme:e,...t}){const n=q.useMemo(()=>{if(typeof e=="function")return e;const r=oh in e?e[oh]:e;return"colorSchemes"in r?null:"vars"in r?e:{...e,vars:null}},[e]);return n?$.jsx(rfe,{theme:n,...t}):$.jsx(ofe,{theme:e,...t})}const afe=pr("MuiBox",["root"]),lfe=GT(),Dr=fde({themeId:oh,defaultTheme:lfe,defaultClassName:afe.root,generateClassName:AX.generate});function WX(){return $.jsx(Dr,{sx:{position:"fixed",top:0,left:0,zIndex:1301,width:"100%"},children:$.jsx(yN,{color:"primary"})})}function B0(e){return n=>$.jsx(q.Suspense,{fallback:$.jsx(WX,{}),children:$.jsx(e,{...n})})}function cfe(){return $.jsx($.Fragment,{children:$.jsx(WY,{})})}const ufe=B0(q.lazy(()=>F0(()=>import("./Login-iHRm4bmY.js"),__vite__mapDeps([0,1]),import.meta.url))),dfe=B0(q.lazy(()=>F0(()=>import("./Register-TnlvPOXs.js"),__vite__mapDeps([2,1]),import.meta.url))),hfe={path:"/",element:$.jsx(cfe,{}),children:[{path:"/login",element:$.jsx(ufe,{})},{path:"/register",element:$.jsx(dfe,{})}]},f1=OX({themeId:oh});function ffe(e){return fr("MuiPaper",e)}pr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const pfe=e=>{const{square:t,elevation:n,variant:r,classes:s}=e,c={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return dr(c,ffe,s)},mfe=Ot("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(ri(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),fu=q.forwardRef(function(t,n){var k;const r=qr({props:t,name:"MuiPaper"}),s=cs(),{className:c,component:h="div",elevation:i=1,square:g=!1,variant:w="elevation",...T}=r,A={...r,component:h,elevation:i,square:g,variant:w},D=pfe(A);return $.jsx(mfe,{as:h,ownerState:A,className:Wn(D.root,c),ref:n,...T,style:{...w==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[i],...s.vars&&{"--Paper-overlay":(k=s.vars.overlays)==null?void 0:k[i]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ai("#fff",Z3(i))}, ${ai("#fff",Z3(i))})`}},...T.style}})});function gfe(e){return fr("MuiAppBar",e)}pr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const yfe=e=>{const{color:t,position:n,classes:r}=e,s={root:["root",`color${Mn(t)}`,`position${Mn(n)}`]};return dr(s,gfe,r)},I$=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,vfe=Ot(fu,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Mn(n.position)}`],t[`color${Mn(n.color)}`]]}})(ri(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Vs(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?I$(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?I$(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),_fe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiAppBar"}),{className:s,color:c="primary",enableColorOnDark:h=!1,position:i="fixed",...g}=r,w={...r,color:c,position:i,enableColorOnDark:h},T=yfe(w);return $.jsx(vfe,{square:!0,component:"header",ownerState:w,elevation:4,className:Wn(T.root,s,i==="fixed"&&"mui-fixed"),ref:n,...g})});function xfe(e){return fr("MuiToolbar",e)}pr("MuiToolbar",["root","gutters","regular","dense"]);const bfe=e=>{const{classes:t,disableGutters:n,variant:r}=e;return dr({root:["root",!n&&"gutters",r]},xfe,t)},wfe=Ot("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(ri(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),Sfe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiToolbar"}),{className:s,component:c="div",disableGutters:h=!1,variant:i="regular",...g}=r,w={...r,component:c,disableGutters:h,variant:i},T=bfe(w);return $.jsx(wfe,{as:c,className:Wn(T.root,s),ref:n,ownerState:w,...g})});function jb(e){try{return e.matches(":focus-visible")}catch{}return!1}function Tfe(e){return fr("MuiTypography",e)}const FM=pr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Efe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Cfe=Hhe(),Afe=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:s,variant:c,classes:h}=e,i={root:["root",c,e.align!=="inherit"&&`align${Mn(t)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return dr(i,Tfe,h)},Mfe=Ot("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Mn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(ri(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(e.palette).filter(Vs()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Mn(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),k$={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},rr=q.forwardRef(function(t,n){const{color:r,...s}=qr({props:t,name:"MuiTypography"}),c=!Efe[r],h=Cfe({...s,...c&&{color:r}}),{align:i="inherit",className:g,component:w,gutterBottom:T=!1,noWrap:A=!1,paragraph:D=!1,variant:k="body1",variantMapping:I=k$,...F}=h,j={...h,align:i,color:r,className:g,component:w,gutterBottom:T,noWrap:A,paragraph:D,variant:k,variantMapping:I},V=w||(D?"p":I[k]||k$[k])||"span",W=Afe(j);return $.jsx(Mfe,{as:V,ref:n,className:Wn(W.root,g),...F,ownerState:j,style:{...i!=="inherit"&&{"--Typography-textAlign":i},...F.style}})});function Rfe(e){return fr("MuiLink",e)}const Dfe=pr("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Pfe=({theme:e,ownerState:t})=>{const n=t.color,r=jy(e,`palette.${n}.main`,!1)||jy(e,`palette.${n}`,!1)||t.color,s=jy(e,`palette.${n}.mainChannel`)||jy(e,`palette.${n}Channel`);return"vars"in e&&s?`rgba(${s} / 0.4)`:ai(r,.4)},O$={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Ife=e=>{const{classes:t,component:n,focusVisible:r,underline:s}=e,c={root:["root",`underline${Mn(s)}`,n==="button"&&"button",r&&"focusVisible"]};return dr(c,Rfe,t)},kfe=Ot(rr,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${Mn(n.underline)}`],n.component==="button"&&t.button]}})(ri(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:n})=>t==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:ai(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ai(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:ai(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Dfe.focusVisible}`]:{outline:"auto"}}}]}))),Ofe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiLink"}),s=cs(),{className:c,color:h="primary",component:i="a",onBlur:g,onFocus:w,TypographyClasses:T,underline:A="always",variant:D="inherit",sx:k,...I}=r,[F,j]=q.useState(!1),V=ee=>{jb(ee.target)||j(!1),g&&g(ee)},W=ee=>{jb(ee.target)&&j(!0),w&&w(ee)},Z={...r,color:h,component:i,focusVisible:F,underline:A,variant:D},K=Ife(Z);return $.jsx(kfe,{color:h,className:Wn(K.root,c),classes:T,component:i,onBlur:V,onFocus:W,ref:n,ownerState:Z,variant:D,...I,sx:[...O$[h]===void 0?[{color:h}]:[],...Array.isArray(k)?k:[k]],style:{...I.style,...A==="always"&&h!=="inherit"&&!O$[h]&&{"--Link-underlineColor":Pfe({theme:s,ownerState:Z})}}})}),yl=phe({createStyledComponent:Ot("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>qr({props:e,name:"MuiStack"})});function Lfe(e){return fr("MuiSvgIcon",e)}pr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const zfe=e=>{const{color:t,fontSize:n,classes:r}=e,s={root:["root",t!=="inherit"&&`color${Mn(t)}`,`fontSize${Mn(n)}`]};return dr(s,Lfe,r)},Ffe=Ot("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Mn(n.color)}`],t[`fontSize${Mn(n.fontSize)}`]]}})(ri(({theme:e})=>{var t,n,r,s,c,h,i,g,w,T,A,D,k,I;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(t=e.transitions)==null?void 0:t.create)==null?void 0:s.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:F=>!F.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((h=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:h.call(c,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((g=(i=e.typography)==null?void 0:i.pxToRem)==null?void 0:g.call(i,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((T=(w=e.typography)==null?void 0:w.pxToRem)==null?void 0:T.call(w,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,F])=>F&&F.main).map(([F])=>{var j,V;return{props:{color:F},style:{color:(V=(j=(e.vars??e).palette)==null?void 0:j[F])==null?void 0:V.main}}}),{props:{color:"action"},style:{color:(D=(A=(e.vars??e).palette)==null?void 0:A.action)==null?void 0:D.active}},{props:{color:"disabled"},style:{color:(I=(k=(e.vars??e).palette)==null?void 0:k.action)==null?void 0:I.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),tF=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiSvgIcon"}),{children:s,className:c,color:h="inherit",component:i="svg",fontSize:g="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:A,viewBox:D="0 0 24 24",...k}=r,I=q.isValidElement(s)&&s.type==="svg",F={...r,color:h,component:i,fontSize:g,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:D,hasSvgAsChild:I},j={};T||(j.viewBox=D);const V=zfe(F);return $.jsxs(Ffe,{as:i,className:Wn(V.root,c),focusable:"false",color:w,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n,...j,...k,...I&&s.props,ownerState:F,children:[I?s.props.children:s,A?$.jsx("title",{children:A}):null]})});tF.muiName="SvgIcon";function Es(e,t){function n(r,s){return $.jsx(tF,{"data-testid":void 0,ref:s,...r,children:e})}return n.muiName=tF.muiName,q.memo(q.forwardRef(n))}const Bfe=Es($.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Nfe(e){return fr("MuiAvatar",e)}pr("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);function mo(...e){const t=q.useRef(void 0),n=q.useCallback(r=>{const s=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const h=c,i=h(r);return typeof i=="function"?i:()=>{h(null)}}return c.current=r,()=>{c.current=null}});return()=>{s.forEach(c=>c==null?void 0:c())}},e);return q.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function jfe(e){return typeof e=="string"}function YX(e,t,n){return e===void 0||jfe(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function Vb(e,t,n){return typeof e=="function"?e(t,n):e}function XX(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function L$(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function ZX(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:c}=e;if(!t){const k=Wn(n==null?void 0:n.className,c,s==null?void 0:s.className,r==null?void 0:r.className),I={...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},F={...n,...s,...r};return k.length>0&&(F.className=k),Object.keys(I).length>0&&(F.style=I),{props:F,internalRef:void 0}}const h=XX({...s,...r}),i=L$(r),g=L$(s),w=t(h),T=Wn(w==null?void 0:w.className,n==null?void 0:n.className,c,s==null?void 0:s.className,r==null?void 0:r.className),A={...w==null?void 0:w.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},D={...w,...n,...g,...i};return T.length>0&&(D.className=T),Object.keys(A).length>0&&(D.style=A),{props:D,internalRef:w.ref}}function fi(e,t){const{className:n,elementType:r,ownerState:s,externalForwardedProps:c,internalForwardedProps:h,shouldForwardComponentProp:i=!1,...g}=t,{component:w,slots:T={[e]:void 0},slotProps:A={[e]:void 0},...D}=c,k=T[e]||r,I=Vb(A[e],s),{props:{component:F,...j},internalRef:V}=ZX({className:n,...g,externalForwardedProps:e==="root"?D:void 0,externalSlotProps:I}),W=mo(V,I==null?void 0:I.ref,t.ref),Z=e==="root"?F||w:F,K=YX(k,{...e==="root"&&!w&&!T[e]&&h,...e!=="root"&&!T[e]&&h,...j,...Z&&!i&&{as:Z},...Z&&i&&{component:Z},ref:W},s);return[k,K]}const Vfe=e=>{const{classes:t,variant:n,colorDefault:r}=e;return dr({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},Nfe,t)},Ufe=Ot("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(ri(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),$fe=Ot("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),qfe=Ot(Bfe,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function Hfe({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[s,c]=q.useState(!1);return q.useEffect(()=>{if(!n&&!r)return;c(!1);let h=!0;const i=new Image;return i.onload=()=>{h&&c("loaded")},i.onerror=()=>{h&&c("error")},i.crossOrigin=e,i.referrerPolicy=t,i.src=n,r&&(i.srcset=r),()=>{h=!1}},[e,t,n,r]),s}const WT=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiAvatar"}),{alt:s,children:c,className:h,component:i="div",slots:g={},slotProps:w={},imgProps:T,sizes:A,src:D,srcSet:k,variant:I="circular",...F}=r;let j=null;const V={...r,component:i,variant:I},W=Hfe({...T,...typeof w.img=="function"?w.img(V):w.img,src:D,srcSet:k}),Z=D||k,K=Z&&W!=="error";V.colorDefault=!K,delete V.ownerState;const ee=Vfe(V),[se,he]=fi("root",{ref:n,className:Wn(ee.root,h),elementType:Ufe,externalForwardedProps:{slots:g,slotProps:w,component:i,...F},ownerState:V}),[ye,_e]=fi("img",{className:ee.img,elementType:$fe,externalForwardedProps:{slots:g,slotProps:{img:{...T,...w.img}}},additionalProps:{alt:s,src:D,srcSet:k,sizes:A},ownerState:V}),[ae,be]=fi("fallback",{className:ee.fallback,elementType:qfe,externalForwardedProps:{slots:g,slotProps:w},shouldForwardComponentProp:!0,ownerState:V});return K?j=$.jsx(ye,{..._e}):c||c===0?j=c:Z&&s?j=s[0]:j=$.jsx(ae,{...be}),$.jsx(se,{...he,children:j})}),Gfe="/sample-page",KX={fontFamily:"International Mono",borderRadius:8},Wfe=""+new URL("yourLogoHere-D1NnJ4Dc.jpg",import.meta.url).href;function vN(){return $.jsx("img",{src:Wfe,alt:"Infra-X-Logo",width:"50"})}function QX(){return $.jsx(Ofe,{component:Ny,to:Gfe,"aria-label":"theme-logo",children:$.jsx(vN,{})})}function Yfe(e){return fr("MuiCard",e)}pr("MuiCard",["root"]);const Xfe=e=>{const{classes:t}=e;return dr({root:["root"]},Yfe,t)},Zfe=Ot(fu,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),y0=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCard"}),{className:s,raised:c=!1,...h}=r,i={...r,raised:c},g=Xfe(i);return $.jsx(Zfe,{className:Wn(g.root,s),elevation:c?8:void 0,ref:n,ownerState:i,...h})}),_o=ahe({createStyledComponent:Ot("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>qr({props:e,name:"MuiGrid"}),useTheme:cs}),XR=q.createContext(void 0);function vh(){return q.useContext(XR)}function Kfe(e){return fr("MuiInputAdornment",e)}const z$=pr("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var F$;const Qfe=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Mn(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},Jfe=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:s,size:c,variant:h}=e,i={root:["root",n&&"disablePointerEvents",s&&`position${Mn(s)}`,h,r&&"hiddenLabel",c&&`size${Mn(c)}`]};return dr(i,Kfe,t)},epe=Ot("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Qfe})(ri(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${z$.positionStart}&:not(.${z$.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),_S=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiInputAdornment"}),{children:s,className:c,component:h="div",disablePointerEvents:i=!1,disableTypography:g=!1,position:w,variant:T,...A}=r,D=vh()||{};let k=T;T&&D.variant,D&&!k&&(k=D.variant);const I={...r,hiddenLabel:D.hiddenLabel,size:D.size,disablePointerEvents:i,position:w,variant:k},F=Jfe(I);return $.jsx(XR.Provider,{value:null,children:$.jsx(epe,{as:h,ownerState:I,className:Wn(F.root,c),ref:n,...A,children:typeof s=="string"&&!g?$.jsx(rr,{color:"textSecondary",children:s}):$.jsxs(q.Fragment,{children:[w==="start"?F$||(F$=$.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,s]})})})}),JX=nt.oneOfType([nt.func,nt.object]);var B$;const tpe=Ot("fieldset",{shouldForwardProp:_c})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),npe=Ot("legend",{shouldForwardProp:_c})(ri(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function rpe(e){const{children:t,classes:n,className:r,label:s,notched:c,...h}=e,i=s!=null&&s!=="",g={...e,notched:c,withLabel:i};return $.jsx(tpe,{"aria-hidden":!0,className:r,ownerState:g,...h,children:$.jsx(npe,{ownerState:g,children:i?$.jsx("span",{children:s}):B$||(B$=$.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function sv({props:e,states:t,muiFormControl:n}){return t.reduce((r,s)=>(r[s]=e[s],n&&typeof e[s]>"u"&&(r[s]=n[s]),r),{})}function YT(e,t=166){let n;function r(...s){const c=()=>{e.apply(this,s)};clearTimeout(n),n=setTimeout(c,t)}return r.clear=()=>{clearTimeout(n)},r}function Tr(e){const t=q.useRef(e);return $s(()=>{t.current=e}),q.useRef((...n)=>(0,t.current)(...n)).current}function za(e){return e&&e.ownerDocument||document}function ad(e){return za(e).defaultView||window}function HC(e){return parseInt(e,10)||0}const ipe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function ope(e){for(const t in e)return!1;return!0}function N$(e){return ope(e)||e.outerHeightStyle===0&&!e.overflowing}const spe=q.forwardRef(function(t,n){const{onChange:r,maxRows:s,minRows:c=1,style:h,value:i,...g}=t,{current:w}=q.useRef(i!=null),T=q.useRef(null),A=mo(n,T),D=q.useRef(null),k=q.useRef(null),I=q.useCallback(()=>{const Z=T.current,K=k.current;if(!Z||!K)return;const se=ad(Z).getComputedStyle(Z);if(se.width==="0px")return{outerHeightStyle:0,overflowing:!1};K.style.width=se.width,K.value=Z.value||t.placeholder||"x",K.value.slice(-1)===`
`&&(K.value+=" ");const he=se.boxSizing,ye=HC(se.paddingBottom)+HC(se.paddingTop),_e=HC(se.borderBottomWidth)+HC(se.borderTopWidth),ae=K.scrollHeight;K.value="x";const be=K.scrollHeight;let Te=ae;c&&(Te=Math.max(Number(c)*be,Te)),s&&(Te=Math.min(Number(s)*be,Te)),Te=Math.max(Te,be);const Ae=Te+(he==="border-box"?ye+_e:0),Re=Math.abs(Te-ae)<=1;return{outerHeightStyle:Ae,overflowing:Re}},[s,c,t.placeholder]),F=Tr(()=>{const Z=T.current,K=I();if(!Z||!K||N$(K))return!1;const ee=K.outerHeightStyle;return D.current!=null&&D.current!==ee}),j=q.useCallback(()=>{const Z=T.current,K=I();if(!Z||!K||N$(K))return;const ee=K.outerHeightStyle;D.current!==ee&&(D.current=ee,Z.style.height=`${ee}px`),Z.style.overflow=K.overflowing?"hidden":""},[I]),V=q.useRef(-1);$s(()=>{const Z=YT(j),K=T==null?void 0:T.current;if(!K)return;const ee=ad(K);ee.addEventListener("resize",Z);let se;return typeof ResizeObserver<"u"&&(se=new ResizeObserver(()=>{F()&&(se.unobserve(K),cancelAnimationFrame(V.current),j(),V.current=requestAnimationFrame(()=>{se.observe(K)}))}),se.observe(K)),()=>{Z.clear(),cancelAnimationFrame(V.current),ee.removeEventListener("resize",Z),se&&se.disconnect()}},[I,j,F]),$s(()=>{j()});const W=Z=>{w||j();const K=Z.target,ee=K.value.length,se=K.value.endsWith(`
`),he=K.selectionStart===ee;se&&he&&K.setSelectionRange(ee,ee),r&&r(Z)};return $.jsxs(q.Fragment,{children:[$.jsx("textarea",{value:i,onChange:W,ref:A,rows:c,style:h,...g}),$.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:k,tabIndex:-1,style:{...ipe.shadow,...h,paddingTop:0,paddingBottom:0}})]})});function JS(e){return typeof e=="string"}function j$(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function BM(e,t=!1){return e&&(j$(e.value)&&e.value!==""||t&&j$(e.defaultValue)&&e.defaultValue!=="")}function ape(e){return e.startAdornment}function lpe(e){return fr("MuiInputBase",e)}const Ub=pr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var V$;const ZR=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Mn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},KR=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},cpe=e=>{const{classes:t,color:n,disabled:r,error:s,endAdornment:c,focused:h,formControl:i,fullWidth:g,hiddenLabel:w,multiline:T,readOnly:A,size:D,startAdornment:k,type:I}=e,F={root:["root",`color${Mn(n)}`,r&&"disabled",s&&"error",g&&"fullWidth",h&&"focused",i&&"formControl",D&&D!=="medium"&&`size${Mn(D)}`,T&&"multiline",k&&"adornedStart",c&&"adornedEnd",w&&"hiddenLabel",A&&"readOnly"],input:["input",r&&"disabled",I==="search"&&"inputTypeSearch",T&&"inputMultiline",D==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",k&&"inputAdornedStart",c&&"inputAdornedEnd",A&&"readOnly"]};return dr(F,lpe,t)},QR=Ot("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ZR})(ri(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ub.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),JR=Ot("input",{name:"MuiInputBase",slot:"Input",overridesResolver:KR})(ri(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ub.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Ub.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:c})=>!c.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:c})=>c.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),U$=mN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),_N=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:c,autoFocus:h,className:i,color:g,components:w={},componentsProps:T={},defaultValue:A,disabled:D,disableInjectingGlobalStyles:k,endAdornment:I,error:F,fullWidth:j=!1,id:V,inputComponent:W="input",inputProps:Z={},inputRef:K,margin:ee,maxRows:se,minRows:he,multiline:ye=!1,name:_e,onBlur:ae,onChange:be,onClick:Te,onFocus:Ae,onKeyDown:Re,onKeyUp:He,placeholder:Se,readOnly:qe,renderSuffix:it,rows:tt,size:Oe,slotProps:Je={},slots:yt={},startAdornment:wt,type:$t="text",value:It,...vt}=r,sn=Z.value!=null?Z.value:It,{current:Rn}=q.useRef(sn!=null),yn=q.useRef(),Qt=q.useCallback(En=>{},[]),Jt=mo(yn,K,Z.ref,Qt),[fn,Bt]=q.useState(!1),Kt=vh(),_n=sv({props:r,muiFormControl:Kt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});_n.focused=Kt?Kt.focused:fn,q.useEffect(()=>{!Kt&&D&&fn&&(Bt(!1),ae&&ae())},[Kt,D,fn,ae]);const an=Kt&&Kt.onFilled,Ft=Kt&&Kt.onEmpty,kn=q.useCallback(En=>{BM(En)?an&&an():Ft&&Ft()},[an,Ft]);$s(()=>{Rn&&kn({value:sn})},[sn,kn,Rn]);const Yn=En=>{Ae&&Ae(En),Z.onFocus&&Z.onFocus(En),Kt&&Kt.onFocus?Kt.onFocus(En):Bt(!0)},wn=En=>{ae&&ae(En),Z.onBlur&&Z.onBlur(En),Kt&&Kt.onBlur?Kt.onBlur(En):Bt(!1)},Vn=(En,...Fr)=>{if(!Rn){const Er=En.target||yn.current;if(Er==null)throw new Error(Rg(1));kn({value:Er.value})}Z.onChange&&Z.onChange(En,...Fr),be&&be(En,...Fr)};q.useEffect(()=>{kn(yn.current)},[]);const ut=En=>{yn.current&&En.currentTarget===En.target&&yn.current.focus(),Te&&Te(En)};let gn=W,Rt=Z;ye&&gn==="input"&&(tt?Rt={type:void 0,minRows:tt,maxRows:tt,...Rt}:Rt={type:void 0,maxRows:se,minRows:he,...Rt},gn=spe);const Wt=En=>{kn(En.animationName==="mui-auto-fill-cancel"?yn.current:{value:"x"})};q.useEffect(()=>{Kt&&Kt.setAdornedStart(!!wt)},[Kt,wt]);const zn={...r,color:_n.color||"primary",disabled:_n.disabled,endAdornment:I,error:_n.error,focused:_n.focused,formControl:Kt,fullWidth:j,hiddenLabel:_n.hiddenLabel,multiline:ye,size:_n.size,startAdornment:wt,type:$t},Un=cpe(zn),mr=yt.root||w.Root||QR,Xn=Je.root||T.root||{},or=yt.input||w.Input||JR;return Rt={...Rt,...Je.input??T.input},$.jsxs(q.Fragment,{children:[!k&&typeof U$=="function"&&(V$||(V$=$.jsx(U$,{}))),$.jsxs(mr,{...Xn,ref:n,onClick:ut,...vt,...!JS(mr)&&{ownerState:{...zn,...Xn.ownerState}},className:Wn(Un.root,Xn.className,i,qe&&"MuiInputBase-readOnly"),children:[wt,$.jsx(XR.Provider,{value:null,children:$.jsx(or,{"aria-invalid":_n.error,"aria-describedby":s,autoComplete:c,autoFocus:h,defaultValue:A,disabled:_n.disabled,id:V,onAnimationStart:Wt,name:_e,placeholder:Se,readOnly:qe,required:_n.required,rows:tt,value:sn,onKeyDown:Re,onKeyUp:He,type:$t,...Rt,...!JS(or)&&{as:gn,ownerState:{...zn,...Rt.ownerState}},ref:Jt,className:Wn(Un.input,Rt.className,qe&&"MuiInputBase-readOnly"),onBlur:wn,onChange:Vn,onFocus:Yn})}),I,it?it({..._n,startAdornment:wt}):null]})]})});function upe(e){return fr("MuiOutlinedInput",e)}const Sp={...Ub,...pr("MuiOutlinedInput",["root","notchedOutline","input"])},dpe=e=>{const{classes:t}=e,r=dr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},upe,t);return{...t,...r}},hpe=Ot(QR,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:ZR})(ri(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Sp.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Sp.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Sp.focused} .${Sp.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Vs()).map(([n])=>({props:{color:n},style:{[`&.${Sp.focused} .${Sp.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Sp.error} .${Sp.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Sp.disabled} .${Sp.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),fpe=Ot(rpe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(ri(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),ppe=Ot(JR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:KR})(ri(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),Fp=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiOutlinedInput"}),{components:s={},fullWidth:c=!1,inputComponent:h="input",label:i,multiline:g=!1,notched:w,slots:T={},slotProps:A={},type:D="text",...k}=r,I=dpe(r),F=vh(),j=sv({props:r,muiFormControl:F,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),V={...r,color:j.color||"primary",disabled:j.disabled,error:j.error,focused:j.focused,formControl:F,fullWidth:c,hiddenLabel:j.hiddenLabel,multiline:g,size:j.size,type:D},W=T.root??s.Root??hpe,Z=T.input??s.Input??ppe,[K,ee]=fi("notchedOutline",{elementType:fpe,className:I.notchedOutline,shouldForwardComponentProp:!0,ownerState:V,externalForwardedProps:{slots:T,slotProps:A},additionalProps:{label:i!=null&&i!==""&&j.required?$.jsxs(q.Fragment,{children:[i,"","*"]}):i}});return $.jsx(_N,{slots:{root:W,input:Z},slotProps:A,renderSuffix:se=>$.jsx(K,{...ee,notched:typeof w<"u"?w:!!(se.startAdornment||se.filled||se.focused)}),fullWidth:c,inputComponent:h,multiline:g,ref:n,type:D,...k,classes:{...I,notchedOutline:null}})});Fp.muiName="Input";var pu="top",uh="bottom",dh="right",mu="left",xN="auto",XT=[pu,uh,dh,mu],$b="start",eT="end",mpe="clippingParents",eZ="viewport",qw="popper",gpe="reference",$$=XT.reduce(function(e,t){return e.concat([t+"-"+$b,t+"-"+eT])},[]),bN=[].concat(XT,[xN]).reduce(function(e,t){return e.concat([t,t+"-"+$b,t+"-"+eT])},[]),ype="beforeRead",vpe="read",_pe="afterRead",xpe="beforeMain",bpe="main",wpe="afterMain",Spe="beforeWrite",Tpe="write",Epe="afterWrite",Cpe=[ype,vpe,_pe,xpe,bpe,wpe,Spe,Tpe,Epe];function Gp(e){return e?(e.nodeName||"").toLowerCase():null}function ld(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function v0(e){var t=ld(e).Element;return e instanceof t||e instanceof Element}function sh(e){var t=ld(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function wN(e){if(typeof ShadowRoot>"u")return!1;var t=ld(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ape(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},s=t.attributes[n]||{},c=t.elements[n];!sh(c)||!Gp(c)||(Object.assign(c.style,r),Object.keys(s).forEach(function(h){var i=s[h];i===!1?c.removeAttribute(h):c.setAttribute(h,i===!0?"":i)}))})}function Mpe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],c=t.attributes[r]||{},h=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),i=h.reduce(function(g,w){return g[w]="",g},{});!sh(s)||!Gp(s)||(Object.assign(s.style,i),Object.keys(c).forEach(function(g){s.removeAttribute(g)}))})}}const Rpe={name:"applyStyles",enabled:!0,phase:"write",fn:Ape,effect:Mpe,requires:["computeStyles"]};function Up(e){return e.split("-")[0]}var a0=Math.max,NM=Math.min,qb=Math.round;function nF(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tZ(){return!/^((?!chrome|android).)*safari/i.test(nF())}function Hb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),s=1,c=1;t&&sh(e)&&(s=e.offsetWidth>0&&qb(r.width)/e.offsetWidth||1,c=e.offsetHeight>0&&qb(r.height)/e.offsetHeight||1);var h=v0(e)?ld(e):window,i=h.visualViewport,g=!tZ()&&n,w=(r.left+(g&&i?i.offsetLeft:0))/s,T=(r.top+(g&&i?i.offsetTop:0))/c,A=r.width/s,D=r.height/c;return{width:A,height:D,top:T,right:w+A,bottom:T+D,left:w,x:w,y:T}}function SN(e){var t=Hb(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function nZ(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&wN(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Dg(e){return ld(e).getComputedStyle(e)}function Dpe(e){return["table","td","th"].indexOf(Gp(e))>=0}function av(e){return((v0(e)?e.ownerDocument:e.document)||window.document).documentElement}function eD(e){return Gp(e)==="html"?e:e.assignedSlot||e.parentNode||(wN(e)?e.host:null)||av(e)}function q$(e){return!sh(e)||Dg(e).position==="fixed"?null:e.offsetParent}function Ppe(e){var t=/firefox/i.test(nF()),n=/Trident/i.test(nF());if(n&&sh(e)){var r=Dg(e);if(r.position==="fixed")return null}var s=eD(e);for(wN(s)&&(s=s.host);sh(s)&&["html","body"].indexOf(Gp(s))<0;){var c=Dg(s);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return s;s=s.parentNode}return null}function ZT(e){for(var t=ld(e),n=q$(e);n&&Dpe(n)&&Dg(n).position==="static";)n=q$(n);return n&&(Gp(n)==="html"||Gp(n)==="body"&&Dg(n).position==="static")?t:n||Ppe(e)||t}function TN(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function DS(e,t,n){return a0(e,NM(t,n))}function Ipe(e,t,n){var r=DS(e,t,n);return r>n?n:r}function rZ(){return{top:0,right:0,bottom:0,left:0}}function iZ(e){return Object.assign({},rZ(),e)}function oZ(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var kpe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,iZ(typeof t!="number"?t:oZ(t,XT))};function Ope(e){var t,n=e.state,r=e.name,s=e.options,c=n.elements.arrow,h=n.modifiersData.popperOffsets,i=Up(n.placement),g=TN(i),w=[mu,dh].indexOf(i)>=0,T=w?"height":"width";if(!(!c||!h)){var A=kpe(s.padding,n),D=SN(c),k=g==="y"?pu:mu,I=g==="y"?uh:dh,F=n.rects.reference[T]+n.rects.reference[g]-h[g]-n.rects.popper[T],j=h[g]-n.rects.reference[g],V=ZT(c),W=V?g==="y"?V.clientHeight||0:V.clientWidth||0:0,Z=F/2-j/2,K=A[k],ee=W-D[T]-A[I],se=W/2-D[T]/2+Z,he=DS(K,se,ee),ye=g;n.modifiersData[r]=(t={},t[ye]=he,t.centerOffset=he-se,t)}}function Lpe(e){var t=e.state,n=e.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||nZ(t.elements.popper,s)&&(t.elements.arrow=s))}const sZ={name:"arrow",enabled:!0,phase:"main",fn:Ope,effect:Lpe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gb(e){return e.split("-")[1]}var zpe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fpe(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:qb(n*s)/s||0,y:qb(r*s)/s||0}}function H$(e){var t,n=e.popper,r=e.popperRect,s=e.placement,c=e.variation,h=e.offsets,i=e.position,g=e.gpuAcceleration,w=e.adaptive,T=e.roundOffsets,A=e.isFixed,D=h.x,k=D===void 0?0:D,I=h.y,F=I===void 0?0:I,j=typeof T=="function"?T({x:k,y:F}):{x:k,y:F};k=j.x,F=j.y;var V=h.hasOwnProperty("x"),W=h.hasOwnProperty("y"),Z=mu,K=pu,ee=window;if(w){var se=ZT(n),he="clientHeight",ye="clientWidth";if(se===ld(n)&&(se=av(n),Dg(se).position!=="static"&&i==="absolute"&&(he="scrollHeight",ye="scrollWidth")),se=se,s===pu||(s===mu||s===dh)&&c===eT){K=uh;var _e=A&&se===ee&&ee.visualViewport?ee.visualViewport.height:se[he];F-=_e-r.height,F*=g?1:-1}if(s===mu||(s===pu||s===uh)&&c===eT){Z=dh;var ae=A&&se===ee&&ee.visualViewport?ee.visualViewport.width:se[ye];k-=ae-r.width,k*=g?1:-1}}var be=Object.assign({position:i},w&&zpe),Te=T===!0?Fpe({x:k,y:F},ld(n)):{x:k,y:F};if(k=Te.x,F=Te.y,g){var Ae;return Object.assign({},be,(Ae={},Ae[K]=W?"0":"",Ae[Z]=V?"0":"",Ae.transform=(ee.devicePixelRatio||1)<=1?"translate("+k+"px, "+F+"px)":"translate3d("+k+"px, "+F+"px, 0)",Ae))}return Object.assign({},be,(t={},t[K]=W?F+"px":"",t[Z]=V?k+"px":"",t.transform="",t))}function Bpe(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=r===void 0?!0:r,c=n.adaptive,h=c===void 0?!0:c,i=n.roundOffsets,g=i===void 0?!0:i,w={placement:Up(t.placement),variation:Gb(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,H$(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:h,roundOffsets:g})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,H$(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:g})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const aZ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Bpe,data:{}};var GC={passive:!0};function Npe(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,c=s===void 0?!0:s,h=r.resize,i=h===void 0?!0:h,g=ld(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&w.forEach(function(T){T.addEventListener("scroll",n.update,GC)}),i&&g.addEventListener("resize",n.update,GC),function(){c&&w.forEach(function(T){T.removeEventListener("scroll",n.update,GC)}),i&&g.removeEventListener("resize",n.update,GC)}}const lZ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Npe,data:{}};var jpe={left:"right",right:"left",bottom:"top",top:"bottom"};function QA(e){return e.replace(/left|right|bottom|top/g,function(t){return jpe[t]})}var Vpe={start:"end",end:"start"};function G$(e){return e.replace(/start|end/g,function(t){return Vpe[t]})}function EN(e){var t=ld(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function CN(e){return Hb(av(e)).left+EN(e).scrollLeft}function Upe(e,t){var n=ld(e),r=av(e),s=n.visualViewport,c=r.clientWidth,h=r.clientHeight,i=0,g=0;if(s){c=s.width,h=s.height;var w=tZ();(w||!w&&t==="fixed")&&(i=s.offsetLeft,g=s.offsetTop)}return{width:c,height:h,x:i+CN(e),y:g}}function $pe(e){var t,n=av(e),r=EN(e),s=(t=e.ownerDocument)==null?void 0:t.body,c=a0(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),h=a0(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-r.scrollLeft+CN(e),g=-r.scrollTop;return Dg(s||n).direction==="rtl"&&(i+=a0(n.clientWidth,s?s.clientWidth:0)-c),{width:c,height:h,x:i,y:g}}function AN(e){var t=Dg(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function cZ(e){return["html","body","#document"].indexOf(Gp(e))>=0?e.ownerDocument.body:sh(e)&&AN(e)?e:cZ(eD(e))}function PS(e,t){var n;t===void 0&&(t=[]);var r=cZ(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),c=ld(r),h=s?[c].concat(c.visualViewport||[],AN(r)?r:[]):r,i=t.concat(h);return s?i:i.concat(PS(eD(h)))}function rF(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function qpe(e,t){var n=Hb(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function W$(e,t,n){return t===eZ?rF(Upe(e,n)):v0(t)?qpe(t,n):rF($pe(av(e)))}function Hpe(e){var t=PS(eD(e)),n=["absolute","fixed"].indexOf(Dg(e).position)>=0,r=n&&sh(e)?ZT(e):e;return v0(r)?t.filter(function(s){return v0(s)&&nZ(s,r)&&Gp(s)!=="body"}):[]}function Gpe(e,t,n,r){var s=t==="clippingParents"?Hpe(e):[].concat(t),c=[].concat(s,[n]),h=c[0],i=c.reduce(function(g,w){var T=W$(e,w,r);return g.top=a0(T.top,g.top),g.right=NM(T.right,g.right),g.bottom=NM(T.bottom,g.bottom),g.left=a0(T.left,g.left),g},W$(e,h,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function uZ(e){var t=e.reference,n=e.element,r=e.placement,s=r?Up(r):null,c=r?Gb(r):null,h=t.x+t.width/2-n.width/2,i=t.y+t.height/2-n.height/2,g;switch(s){case pu:g={x:h,y:t.y-n.height};break;case uh:g={x:h,y:t.y+t.height};break;case dh:g={x:t.x+t.width,y:i};break;case mu:g={x:t.x-n.width,y:i};break;default:g={x:t.x,y:t.y}}var w=s?TN(s):null;if(w!=null){var T=w==="y"?"height":"width";switch(c){case $b:g[w]=g[w]-(t[T]/2-n[T]/2);break;case eT:g[w]=g[w]+(t[T]/2-n[T]/2);break}}return g}function tT(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=r===void 0?e.placement:r,c=n.strategy,h=c===void 0?e.strategy:c,i=n.boundary,g=i===void 0?mpe:i,w=n.rootBoundary,T=w===void 0?eZ:w,A=n.elementContext,D=A===void 0?qw:A,k=n.altBoundary,I=k===void 0?!1:k,F=n.padding,j=F===void 0?0:F,V=iZ(typeof j!="number"?j:oZ(j,XT)),W=D===qw?gpe:qw,Z=e.rects.popper,K=e.elements[I?W:D],ee=Gpe(v0(K)?K:K.contextElement||av(e.elements.popper),g,T,h),se=Hb(e.elements.reference),he=uZ({reference:se,element:Z,placement:s}),ye=rF(Object.assign({},Z,he)),_e=D===qw?ye:se,ae={top:ee.top-_e.top+V.top,bottom:_e.bottom-ee.bottom+V.bottom,left:ee.left-_e.left+V.left,right:_e.right-ee.right+V.right},be=e.modifiersData.offset;if(D===qw&&be){var Te=be[s];Object.keys(ae).forEach(function(Ae){var Re=[dh,uh].indexOf(Ae)>=0?1:-1,He=[pu,uh].indexOf(Ae)>=0?"y":"x";ae[Ae]+=Te[He]*Re})}return ae}function Wpe(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=n.boundary,c=n.rootBoundary,h=n.padding,i=n.flipVariations,g=n.allowedAutoPlacements,w=g===void 0?bN:g,T=Gb(r),A=T?i?$$:$$.filter(function(I){return Gb(I)===T}):XT,D=A.filter(function(I){return w.indexOf(I)>=0});D.length===0&&(D=A);var k=D.reduce(function(I,F){return I[F]=tT(e,{placement:F,boundary:s,rootBoundary:c,padding:h})[Up(F)],I},{});return Object.keys(k).sort(function(I,F){return k[I]-k[F]})}function Ype(e){if(Up(e)===xN)return[];var t=QA(e);return[G$(e),t,G$(t)]}function Xpe(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,c=s===void 0?!0:s,h=n.altAxis,i=h===void 0?!0:h,g=n.fallbackPlacements,w=n.padding,T=n.boundary,A=n.rootBoundary,D=n.altBoundary,k=n.flipVariations,I=k===void 0?!0:k,F=n.allowedAutoPlacements,j=t.options.placement,V=Up(j),W=V===j,Z=g||(W||!I?[QA(j)]:Ype(j)),K=[j].concat(Z).reduce(function($t,It){return $t.concat(Up(It)===xN?Wpe(t,{placement:It,boundary:T,rootBoundary:A,padding:w,flipVariations:I,allowedAutoPlacements:F}):It)},[]),ee=t.rects.reference,se=t.rects.popper,he=new Map,ye=!0,_e=K[0],ae=0;ae<K.length;ae++){var be=K[ae],Te=Up(be),Ae=Gb(be)===$b,Re=[pu,uh].indexOf(Te)>=0,He=Re?"width":"height",Se=tT(t,{placement:be,boundary:T,rootBoundary:A,altBoundary:D,padding:w}),qe=Re?Ae?dh:mu:Ae?uh:pu;ee[He]>se[He]&&(qe=QA(qe));var it=QA(qe),tt=[];if(c&&tt.push(Se[Te]<=0),i&&tt.push(Se[qe]<=0,Se[it]<=0),tt.every(function($t){return $t})){_e=be,ye=!1;break}he.set(be,tt)}if(ye)for(var Oe=I?3:1,Je=function(It){var vt=K.find(function(sn){var Rn=he.get(sn);if(Rn)return Rn.slice(0,It).every(function(yn){return yn})});if(vt)return _e=vt,"break"},yt=Oe;yt>0;yt--){var wt=Je(yt);if(wt==="break")break}t.placement!==_e&&(t.modifiersData[r]._skip=!0,t.placement=_e,t.reset=!0)}}const dZ={name:"flip",enabled:!0,phase:"main",fn:Xpe,requiresIfExists:["offset"],data:{_skip:!1}};function Y$(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function X$(e){return[pu,dh,uh,mu].some(function(t){return e[t]>=0})}function Zpe(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,c=t.modifiersData.preventOverflow,h=tT(t,{elementContext:"reference"}),i=tT(t,{altBoundary:!0}),g=Y$(h,r),w=Y$(i,s,c),T=X$(g),A=X$(w);t.modifiersData[n]={referenceClippingOffsets:g,popperEscapeOffsets:w,isReferenceHidden:T,hasPopperEscaped:A},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":A})}const hZ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zpe};function Kpe(e,t,n){var r=Up(e),s=[mu,pu].indexOf(r)>=0?-1:1,c=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,h=c[0],i=c[1];return h=h||0,i=(i||0)*s,[mu,dh].indexOf(r)>=0?{x:i,y:h}:{x:h,y:i}}function Qpe(e){var t=e.state,n=e.options,r=e.name,s=n.offset,c=s===void 0?[0,0]:s,h=bN.reduce(function(T,A){return T[A]=Kpe(A,t.rects,c),T},{}),i=h[t.placement],g=i.x,w=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=g,t.modifiersData.popperOffsets.y+=w),t.modifiersData[r]=h}const fZ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qpe};function Jpe(e){var t=e.state,n=e.name;t.modifiersData[n]=uZ({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const pZ={name:"popperOffsets",enabled:!0,phase:"read",fn:Jpe,data:{}};function eme(e){return e==="x"?"y":"x"}function tme(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,c=s===void 0?!0:s,h=n.altAxis,i=h===void 0?!1:h,g=n.boundary,w=n.rootBoundary,T=n.altBoundary,A=n.padding,D=n.tether,k=D===void 0?!0:D,I=n.tetherOffset,F=I===void 0?0:I,j=tT(t,{boundary:g,rootBoundary:w,padding:A,altBoundary:T}),V=Up(t.placement),W=Gb(t.placement),Z=!W,K=TN(V),ee=eme(K),se=t.modifiersData.popperOffsets,he=t.rects.reference,ye=t.rects.popper,_e=typeof F=="function"?F(Object.assign({},t.rects,{placement:t.placement})):F,ae=typeof _e=="number"?{mainAxis:_e,altAxis:_e}:Object.assign({mainAxis:0,altAxis:0},_e),be=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Te={x:0,y:0};if(se){if(c){var Ae,Re=K==="y"?pu:mu,He=K==="y"?uh:dh,Se=K==="y"?"height":"width",qe=se[K],it=qe+j[Re],tt=qe-j[He],Oe=k?-ye[Se]/2:0,Je=W===$b?he[Se]:ye[Se],yt=W===$b?-ye[Se]:-he[Se],wt=t.elements.arrow,$t=k&&wt?SN(wt):{width:0,height:0},It=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:rZ(),vt=It[Re],sn=It[He],Rn=DS(0,he[Se],$t[Se]),yn=Z?he[Se]/2-Oe-Rn-vt-ae.mainAxis:Je-Rn-vt-ae.mainAxis,Qt=Z?-he[Se]/2+Oe+Rn+sn+ae.mainAxis:yt+Rn+sn+ae.mainAxis,Jt=t.elements.arrow&&ZT(t.elements.arrow),fn=Jt?K==="y"?Jt.clientTop||0:Jt.clientLeft||0:0,Bt=(Ae=be==null?void 0:be[K])!=null?Ae:0,Kt=qe+yn-Bt-fn,_n=qe+Qt-Bt,an=DS(k?NM(it,Kt):it,qe,k?a0(tt,_n):tt);se[K]=an,Te[K]=an-qe}if(i){var Ft,kn=K==="x"?pu:mu,Yn=K==="x"?uh:dh,wn=se[ee],Vn=ee==="y"?"height":"width",ut=wn+j[kn],gn=wn-j[Yn],Rt=[pu,mu].indexOf(V)!==-1,Wt=(Ft=be==null?void 0:be[ee])!=null?Ft:0,zn=Rt?ut:wn-he[Vn]-ye[Vn]-Wt+ae.altAxis,Un=Rt?wn+he[Vn]+ye[Vn]-Wt-ae.altAxis:gn,mr=k&&Rt?Ipe(zn,wn,Un):DS(k?zn:ut,wn,k?Un:gn);se[ee]=mr,Te[ee]=mr-wn}t.modifiersData[r]=Te}}const mZ={name:"preventOverflow",enabled:!0,phase:"main",fn:tme,requiresIfExists:["offset"]};function nme(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function rme(e){return e===ld(e)||!sh(e)?EN(e):nme(e)}function ime(e){var t=e.getBoundingClientRect(),n=qb(t.width)/e.offsetWidth||1,r=qb(t.height)/e.offsetHeight||1;return n!==1||r!==1}function ome(e,t,n){n===void 0&&(n=!1);var r=sh(t),s=sh(t)&&ime(t),c=av(t),h=Hb(e,s,n),i={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(r||!r&&!n)&&((Gp(t)!=="body"||AN(c))&&(i=rme(t)),sh(t)?(g=Hb(t,!0),g.x+=t.clientLeft,g.y+=t.clientTop):c&&(g.x=CN(c))),{x:h.left+i.scrollLeft-g.x,y:h.top+i.scrollTop-g.y,width:h.width,height:h.height}}function sme(e){var t=new Map,n=new Set,r=[];e.forEach(function(c){t.set(c.name,c)});function s(c){n.add(c.name);var h=[].concat(c.requires||[],c.requiresIfExists||[]);h.forEach(function(i){if(!n.has(i)){var g=t.get(i);g&&s(g)}}),r.push(c)}return e.forEach(function(c){n.has(c.name)||s(c)}),r}function ame(e){var t=sme(e);return Cpe.reduce(function(n,r){return n.concat(t.filter(function(s){return s.phase===r}))},[])}function lme(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function cme(e){var t=e.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Z$={placement:"bottom",modifiers:[],strategy:"absolute"};function K$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function gZ(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,s=t.defaultOptions,c=s===void 0?Z$:s;return function(i,g,w){w===void 0&&(w=c);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},Z$,c),modifiersData:{},elements:{reference:i,popper:g},attributes:{},styles:{}},A=[],D=!1,k={state:T,setOptions:function(V){var W=typeof V=="function"?V(T.options):V;F(),T.options=Object.assign({},c,T.options,W),T.scrollParents={reference:v0(i)?PS(i):i.contextElement?PS(i.contextElement):[],popper:PS(g)};var Z=ame(cme([].concat(r,T.options.modifiers)));return T.orderedModifiers=Z.filter(function(K){return K.enabled}),I(),k.update()},forceUpdate:function(){if(!D){var V=T.elements,W=V.reference,Z=V.popper;if(K$(W,Z)){T.rects={reference:ome(W,ZT(Z),T.options.strategy==="fixed"),popper:SN(Z)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(ae){return T.modifiersData[ae.name]=Object.assign({},ae.data)});for(var K=0;K<T.orderedModifiers.length;K++){if(T.reset===!0){T.reset=!1,K=-1;continue}var ee=T.orderedModifiers[K],se=ee.fn,he=ee.options,ye=he===void 0?{}:he,_e=ee.name;typeof se=="function"&&(T=se({state:T,options:ye,name:_e,instance:k})||T)}}}},update:lme(function(){return new Promise(function(j){k.forceUpdate(),j(T)})}),destroy:function(){F(),D=!0}};if(!K$(i,g))return k;k.setOptions(w).then(function(j){!D&&w.onFirstUpdate&&w.onFirstUpdate(j)});function I(){T.orderedModifiers.forEach(function(j){var V=j.name,W=j.options,Z=W===void 0?{}:W,K=j.effect;if(typeof K=="function"){var ee=K({state:T,name:V,instance:k,options:Z}),se=function(){};A.push(ee||se)}})}function F(){A.forEach(function(j){return j()}),A=[]}return k}}var ume=[lZ,pZ,aZ,Rpe,fZ,dZ,mZ,sZ,hZ],dme=gZ({defaultModifiers:ume});function xo(e){var A;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...c}=e,h=s?{}:Vb(n,r),{props:i,internalRef:g}=ZX({...c,externalSlotProps:h}),w=mo(g,h==null?void 0:h.ref,(A=e.additionalProps)==null?void 0:A.ref);return YX(t,{...i,ref:w},r)}function Q$(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Fg(e){var t;return parseInt(q.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function hme(e){return typeof e=="function"?e():e}const yZ=q.forwardRef(function(t,n){const{children:r,container:s,disablePortal:c=!1}=t,[h,i]=q.useState(null),g=mo(q.isValidElement(r)?Fg(r):null,n);if($s(()=>{c||i(hme(s)||document.body)},[s,c]),$s(()=>{if(h&&!c)return Q$(n,h),()=>{Q$(n,null)}},[n,h,c]),c){if(q.isValidElement(r)){const w={ref:g};return q.cloneElement(r,w)}return r}return h&&OR.createPortal(r,h)});function fme(e){return fr("MuiPopper",e)}pr("MuiPopper",["root"]);function pme(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function iF(e){return typeof e=="function"?e():e}function mme(e){return e.nodeType!==void 0}const gme=e=>{const{classes:t}=e;return dr({root:["root"]},fme,t)},yme={},vme=q.forwardRef(function(t,n){const{anchorEl:r,children:s,direction:c,disablePortal:h,modifiers:i,open:g,placement:w,popperOptions:T,popperRef:A,slotProps:D={},slots:k={},TransitionProps:I,ownerState:F,...j}=t,V=q.useRef(null),W=mo(V,n),Z=q.useRef(null),K=mo(Z,A),ee=q.useRef(K);$s(()=>{ee.current=K},[K]),q.useImperativeHandle(A,()=>Z.current,[]);const se=pme(w,c),[he,ye]=q.useState(se),[_e,ae]=q.useState(iF(r));q.useEffect(()=>{Z.current&&Z.current.forceUpdate()}),q.useEffect(()=>{r&&ae(iF(r))},[r]),$s(()=>{if(!_e||!g)return;const He=it=>{ye(it.placement)};let Se=[{name:"preventOverflow",options:{altBoundary:h}},{name:"flip",options:{altBoundary:h}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:it})=>{He(it)}}];i!=null&&(Se=Se.concat(i)),T&&T.modifiers!=null&&(Se=Se.concat(T.modifiers));const qe=dme(_e,V.current,{placement:se,...T,modifiers:Se});return ee.current(qe),()=>{qe.destroy(),ee.current(null)}},[_e,h,i,g,T,se]);const be={placement:he};I!==null&&(be.TransitionProps=I);const Te=gme(t),Ae=k.root??"div",Re=xo({elementType:Ae,externalSlotProps:D.root,externalForwardedProps:j,additionalProps:{role:"tooltip",ref:W},ownerState:t,className:Te.root});return $.jsx(Ae,{...Re,children:typeof s=="function"?s(be):s})}),_me=q.forwardRef(function(t,n){const{anchorEl:r,children:s,container:c,direction:h="ltr",disablePortal:i=!1,keepMounted:g=!1,modifiers:w,open:T,placement:A="bottom",popperOptions:D=yme,popperRef:k,style:I,transition:F=!1,slotProps:j={},slots:V={},...W}=t,[Z,K]=q.useState(!0),ee=()=>{K(!1)},se=()=>{K(!0)};if(!g&&!T&&(!F||Z))return null;let he;if(c)he=c;else if(r){const ae=iF(r);he=ae&&mme(ae)?za(ae).body:za(null).body}const ye=!T&&g&&(!F||Z)?"none":void 0,_e=F?{in:T,onEnter:ee,onExited:se}:void 0;return $.jsx(yZ,{disablePortal:i,container:he,children:$.jsx(vme,{anchorEl:r,direction:h,disablePortal:i,modifiers:w,ref:n,open:F?!Z:T,placement:A,popperOptions:D,popperRef:k,slotProps:j,slots:V,...W,style:{position:"fixed",top:0,left:0,display:ye,...I},TransitionProps:_e,children:s})})}),xme=Ot(_me,{name:"MuiPopper",slot:"Root"})({}),KT=q.forwardRef(function(t,n){const r=vc(),s=qr({props:t,name:"MuiPopper"}),{anchorEl:c,component:h,components:i,componentsProps:g,container:w,disablePortal:T,keepMounted:A,modifiers:D,open:k,placement:I,popperOptions:F,popperRef:j,transition:V,slots:W,slotProps:Z,...K}=s,ee=(W==null?void 0:W.root)??(i==null?void 0:i.Root),se={anchorEl:c,container:w,disablePortal:T,keepMounted:A,modifiers:D,open:k,placement:I,popperOptions:F,popperRef:j,transition:V,...K};return $.jsx(xme,{as:h,direction:r?"rtl":"ltr",slots:{root:ee},slotProps:Z??g,...se,ref:n})});function vi(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function jM(e,t){return jM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},jM(e,t)}function tD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jM(e,t)}function bme(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function vZ(e,t){e.classList?e.classList.add(t):bme(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function J$(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function _Z(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=J$(e.className,t):e.setAttribute("class",J$(e.className&&e.className.baseVal||"",t))}const e6={disabled:!1},VM=St.createContext(null);var xZ=function(t){return t.scrollTop},xS="unmounted",H_="exited",G_="entering",fb="entered",oF="exiting",bu=function(e){tD(t,e);function t(r,s){var c;c=e.call(this,r,s)||this;var h=s,i=h&&!h.isMounting?r.enter:r.appear,g;return c.appearStatus=null,r.in?i?(g=H_,c.appearStatus=G_):g=fb:r.unmountOnExit||r.mountOnEnter?g=xS:g=H_,c.state={status:g},c.nextCallback=null,c}t.getDerivedStateFromProps=function(s,c){var h=s.in;return h&&c.status===xS?{status:H_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var c=null;if(s!==this.props){var h=this.state.status;this.props.in?h!==G_&&h!==fb&&(c=G_):(h===G_||h===fb)&&(c=oF)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,c,h,i;return c=h=i=s,s!=null&&typeof s!="number"&&(c=s.exit,h=s.enter,i=s.appear!==void 0?s.appear:h),{exit:c,enter:h,appear:i}},n.updateStatus=function(s,c){if(s===void 0&&(s=!1),c!==null)if(this.cancelNextCallback(),c===G_){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:yb.findDOMNode(this);h&&xZ(h)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===H_&&this.setState({status:xS})},n.performEnter=function(s){var c=this,h=this.props.enter,i=this.context?this.context.isMounting:s,g=this.props.nodeRef?[i]:[yb.findDOMNode(this),i],w=g[0],T=g[1],A=this.getTimeouts(),D=i?A.appear:A.enter;if(!s&&!h||e6.disabled){this.safeSetState({status:fb},function(){c.props.onEntered(w)});return}this.props.onEnter(w,T),this.safeSetState({status:G_},function(){c.props.onEntering(w,T),c.onTransitionEnd(D,function(){c.safeSetState({status:fb},function(){c.props.onEntered(w,T)})})})},n.performExit=function(){var s=this,c=this.props.exit,h=this.getTimeouts(),i=this.props.nodeRef?void 0:yb.findDOMNode(this);if(!c||e6.disabled){this.safeSetState({status:H_},function(){s.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:oF},function(){s.props.onExiting(i),s.onTransitionEnd(h.exit,function(){s.safeSetState({status:H_},function(){s.props.onExited(i)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,c){c=this.setNextCallback(c),this.setState(s,c)},n.setNextCallback=function(s){var c=this,h=!0;return this.nextCallback=function(i){h&&(h=!1,c.nextCallback=null,s(i))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},n.onTransitionEnd=function(s,c){this.setNextCallback(c);var h=this.props.nodeRef?this.props.nodeRef.current:yb.findDOMNode(this),i=s==null&&!this.props.addEndListener;if(!h||i){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var g=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],w=g[0],T=g[1];this.props.addEndListener(w,T)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===xS)return null;var c=this.props,h=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var i=vi(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return St.createElement(VM.Provider,{value:null},typeof h=="function"?h(s,i):St.cloneElement(St.Children.only(h),i))},t}(St.Component);bu.contextType=VM;bu.propTypes={};function tb(){}bu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tb,onEntering:tb,onEntered:tb,onExit:tb,onExiting:tb,onExited:tb};bu.UNMOUNTED=xS;bu.EXITED=H_;bu.ENTERING=G_;bu.ENTERED=fb;bu.EXITING=oF;var wme=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return vZ(t,r)})},kI=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return _Z(t,r)})},MN=function(e){tD(t,e);function t(){for(var r,s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];return r=e.call.apply(e,[this].concat(c))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(i,g){var w=r.resolveArguments(i,g),T=w[0],A=w[1];r.removeClasses(T,"exit"),r.addClass(T,A?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(i,g)},r.onEntering=function(i,g){var w=r.resolveArguments(i,g),T=w[0],A=w[1],D=A?"appear":"enter";r.addClass(T,D,"active"),r.props.onEntering&&r.props.onEntering(i,g)},r.onEntered=function(i,g){var w=r.resolveArguments(i,g),T=w[0],A=w[1],D=A?"appear":"enter";r.removeClasses(T,D),r.addClass(T,D,"done"),r.props.onEntered&&r.props.onEntered(i,g)},r.onExit=function(i){var g=r.resolveArguments(i),w=g[0];r.removeClasses(w,"appear"),r.removeClasses(w,"enter"),r.addClass(w,"exit","base"),r.props.onExit&&r.props.onExit(i)},r.onExiting=function(i){var g=r.resolveArguments(i),w=g[0];r.addClass(w,"exit","active"),r.props.onExiting&&r.props.onExiting(i)},r.onExited=function(i){var g=r.resolveArguments(i),w=g[0];r.removeClasses(w,"exit"),r.addClass(w,"exit","done"),r.props.onExited&&r.props.onExited(i)},r.resolveArguments=function(i,g){return r.props.nodeRef?[r.props.nodeRef.current,i]:[i,g]},r.getClassNames=function(i){var g=r.props.classNames,w=typeof g=="string",T=w&&g?g+"-":"",A=w?""+T+i:g[i],D=w?A+"-active":g[i+"Active"],k=w?A+"-done":g[i+"Done"];return{baseClassName:A,activeClassName:D,doneClassName:k}},r}var n=t.prototype;return n.addClass=function(s,c,h){var i=this.getClassNames(c)[h+"ClassName"],g=this.getClassNames("enter"),w=g.doneClassName;c==="appear"&&h==="done"&&w&&(i+=" "+w),h==="active"&&s&&xZ(s),i&&(this.appliedClasses[c][h]=i,wme(s,i))},n.removeClasses=function(s,c){var h=this.appliedClasses[c],i=h.base,g=h.active,w=h.done;this.appliedClasses[c]={},i&&kI(s,i),g&&kI(s,g),w&&kI(s,w)},n.render=function(){var s=this.props;s.classNames;var c=vi(s,["classNames"]);return St.createElement(bu,Tt({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(St.Component);MN.defaultProps={classNames:""};MN.propTypes={};function bZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RN(e,t){var n=function(c){return t&&q.isValidElement(c)?t(c):c},r=Object.create(null);return e&&q.Children.map(e,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function Sme(e,t){e=e||{},t=t||{};function n(T){return T in t?t[T]:e[T]}var r=Object.create(null),s=[];for(var c in e)c in t?s.length&&(r[c]=s,s=[]):s.push(c);var h,i={};for(var g in t){if(r[g])for(h=0;h<r[g].length;h++){var w=r[g][h];i[r[g][h]]=n(w)}i[g]=n(g)}for(h=0;h<s.length;h++)i[s[h]]=n(s[h]);return i}function r0(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Tme(e,t){return RN(e.children,function(n){return q.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:r0(n,"appear",e),enter:r0(n,"enter",e),exit:r0(n,"exit",e)})})}function Eme(e,t,n){var r=RN(e.children),s=Sme(t,r);return Object.keys(s).forEach(function(c){var h=s[c];if(q.isValidElement(h)){var i=c in t,g=c in r,w=t[c],T=q.isValidElement(w)&&!w.props.in;g&&(!i||T)?s[c]=q.cloneElement(h,{onExited:n.bind(null,h),in:!0,exit:r0(h,"exit",e),enter:r0(h,"enter",e)}):!g&&i&&!T?s[c]=q.cloneElement(h,{in:!1}):g&&i&&q.isValidElement(w)&&(s[c]=q.cloneElement(h,{onExited:n.bind(null,h),in:w.props.in,exit:r0(h,"exit",e),enter:r0(h,"enter",e)}))}}),s}var Cme=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ame={component:"div",childFactory:function(t){return t}},QT=function(e){tD(t,e);function t(r,s){var c;c=e.call(this,r,s)||this;var h=c.handleExited.bind(bZ(c));return c.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},c}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,c){var h=c.children,i=c.handleExited,g=c.firstRender;return{children:g?Tme(s,i):Eme(s,h,i),firstRender:!1}},n.handleExited=function(s,c){var h=RN(this.props.children);s.key in h||(s.props.onExited&&s.props.onExited(c),this.mounted&&this.setState(function(i){var g=Tt({},i.children);return delete g[s.key],{children:g}}))},n.render=function(){var s=this.props,c=s.component,h=s.childFactory,i=vi(s,["component","childFactory"]),g=this.state.contextValue,w=Cme(this.state.children).map(h);return delete i.appear,delete i.enter,delete i.exit,c===null?St.createElement(VM.Provider,{value:g},w):St.createElement(VM.Provider,{value:g},St.createElement(c,i,w))},t}(St.Component);QT.propTypes={};QT.defaultProps=Ame;const t6={};function wZ(e,t){const n=q.useRef(t6);return n.current===t6&&(n.current=e(t)),n}const Mme=[];function Rme(e){q.useEffect(e,Mme)}class nD{constructor(){Or(this,"currentId",null);Or(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Or(this,"disposeEffect",()=>this.clear)}static create(){return new nD}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function rd(){const e=wZ(nD.create).current;return Rme(e.disposeEffect),e}const rD=e=>e.scrollTop;function Wp(e,t){const{timeout:n,easing:r,style:s={}}=e;return{duration:s.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:s.transitionDelay}}function n6(...e){return e.reduce((t,n)=>n==null?t:function(...s){t.apply(this,s),n.apply(this,s)},()=>{})}let r6=0;function Dme(e){const[t,n]=q.useState(e),r=e||t;return q.useEffect(()=>{t==null&&(r6+=1,n(`mui-${r6}`))},[t]),r}const Pme={...DM},i6=Pme.useId;function tm(e){if(i6!==void 0){const t=i6();return e??t}return Dme(e)}function Yp(e){const{controlled:t,default:n,name:r,state:s="value"}=e,{current:c}=q.useRef(t!==void 0),[h,i]=q.useState(n),g=c?t:h,w=q.useCallback(T=>{c||i(T)},[]);return[g,w]}function Ime(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function DN(e,t){if(!e)return t;function n(h,i){const g={};return Object.keys(i).forEach(w=>{Ime(w,i[w])&&typeof h[w]=="function"&&(g[w]=(...T)=>{h[w](...T),i[w](...T)})}),g}if(typeof e=="function"||typeof t=="function")return h=>{const i=typeof t=="function"?t(h):t,g=typeof e=="function"?e({...h,...i}):e,w=Wn(h==null?void 0:h.className,i==null?void 0:i.className,g==null?void 0:g.className),T=n(g,i);return{...i,...g,...T,...!!w&&{className:w},...(i==null?void 0:i.style)&&(g==null?void 0:g.style)&&{style:{...i.style,...g.style}},...(i==null?void 0:i.sx)&&(g==null?void 0:g.sx)&&{sx:[...Array.isArray(i.sx)?i.sx:[i.sx],...Array.isArray(g.sx)?g.sx:[g.sx]]}}};const r=t,s=n(e,r),c=Wn(r==null?void 0:r.className,e==null?void 0:e.className);return{...t,...e,...s,...!!c&&{className:c},...(r==null?void 0:r.style)&&(e==null?void 0:e.style)&&{style:{...r.style,...e.style}},...(r==null?void 0:r.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function kme(e){return fr("MuiCollapse",e)}pr("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ome=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return dr(r,kme,n)},Lme=Ot("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(ri(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),zme=Ot("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Fme=Ot("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),UM=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCollapse"}),{addEndListener:s,children:c,className:h,collapsedSize:i="0px",component:g,easing:w,in:T,onEnter:A,onEntered:D,onEntering:k,onExit:I,onExited:F,onExiting:j,orientation:V="vertical",style:W,timeout:Z=UX.standard,TransitionComponent:K=bu,...ee}=r,se={...r,orientation:V,collapsedSize:i},he=Ome(se),ye=cs(),_e=rd(),ae=q.useRef(null),be=q.useRef(),Te=typeof i=="number"?`${i}px`:i,Ae=V==="horizontal",Re=Ae?"width":"height",He=q.useRef(null),Se=mo(n,He),qe=vt=>sn=>{if(vt){const Rn=He.current;sn===void 0?vt(Rn):vt(Rn,sn)}},it=()=>ae.current?ae.current[Ae?"clientWidth":"clientHeight"]:0,tt=qe((vt,sn)=>{ae.current&&Ae&&(ae.current.style.position="absolute"),vt.style[Re]=Te,A&&A(vt,sn)}),Oe=qe((vt,sn)=>{const Rn=it();ae.current&&Ae&&(ae.current.style.position="");const{duration:yn,easing:Qt}=Wp({style:W,timeout:Z,easing:w},{mode:"enter"});if(Z==="auto"){const Jt=ye.transitions.getAutoHeightDuration(Rn);vt.style.transitionDuration=`${Jt}ms`,be.current=Jt}else vt.style.transitionDuration=typeof yn=="string"?yn:`${yn}ms`;vt.style[Re]=`${Rn}px`,vt.style.transitionTimingFunction=Qt,k&&k(vt,sn)}),Je=qe((vt,sn)=>{vt.style[Re]="auto",D&&D(vt,sn)}),yt=qe(vt=>{vt.style[Re]=`${it()}px`,I&&I(vt)}),wt=qe(F),$t=qe(vt=>{const sn=it(),{duration:Rn,easing:yn}=Wp({style:W,timeout:Z,easing:w},{mode:"exit"});if(Z==="auto"){const Qt=ye.transitions.getAutoHeightDuration(sn);vt.style.transitionDuration=`${Qt}ms`,be.current=Qt}else vt.style.transitionDuration=typeof Rn=="string"?Rn:`${Rn}ms`;vt.style[Re]=Te,vt.style.transitionTimingFunction=yn,j&&j(vt)}),It=vt=>{Z==="auto"&&_e.start(be.current||0,vt),s&&s(He.current,vt)};return $.jsx(K,{in:T,onEnter:tt,onEntered:Je,onEntering:Oe,onExit:yt,onExited:wt,onExiting:$t,addEndListener:It,nodeRef:He,timeout:Z==="auto"?null:Z,...ee,children:(vt,{ownerState:sn,...Rn})=>$.jsx(Lme,{as:g,className:Wn(he.root,h,{entered:he.entered,exited:!T&&Te==="0px"&&he.hidden}[vt]),style:{[Ae?"minWidth":"minHeight"]:Te,...W},ref:Se,ownerState:{...se,state:vt},...Rn,children:$.jsx(zme,{ownerState:{...se,state:vt},className:he.wrapper,ref:ae,children:$.jsx(Fme,{ownerState:{...se,state:vt},className:he.wrapperInner,children:c})})})})});UM&&(UM.muiSupportAuto=!0);const Bme={entering:{opacity:1},entered:{opacity:1}},Xy=q.forwardRef(function(t,n){const r=cs(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:h=!0,children:i,easing:g,in:w,onEnter:T,onEntered:A,onEntering:D,onExit:k,onExited:I,onExiting:F,style:j,timeout:V=s,TransitionComponent:W=bu,...Z}=t,K=q.useRef(null),ee=mo(K,Fg(i),n),se=Re=>He=>{if(Re){const Se=K.current;He===void 0?Re(Se):Re(Se,He)}},he=se(D),ye=se((Re,He)=>{rD(Re);const Se=Wp({style:j,timeout:V,easing:g},{mode:"enter"});Re.style.webkitTransition=r.transitions.create("opacity",Se),Re.style.transition=r.transitions.create("opacity",Se),T&&T(Re,He)}),_e=se(A),ae=se(F),be=se(Re=>{const He=Wp({style:j,timeout:V,easing:g},{mode:"exit"});Re.style.webkitTransition=r.transitions.create("opacity",He),Re.style.transition=r.transitions.create("opacity",He),k&&k(Re)}),Te=se(I),Ae=Re=>{c&&c(K.current,Re)};return $.jsx(W,{appear:h,in:w,nodeRef:K,onEnter:ye,onEntered:_e,onEntering:he,onExit:be,onExited:Te,onExiting:ae,addEndListener:Ae,timeout:V,...Z,children:(Re,{ownerState:He,...Se})=>q.cloneElement(i,{style:{opacity:0,visibility:Re==="exited"&&!w?"hidden":void 0,...Bme[Re],...j,...i.props.style},ref:ee,...Se})})});function sF(e){return`scale(${e}, ${e**2})`}const Nme={entering:{opacity:1,transform:sF(1)},entered:{opacity:1,transform:"none"}},OI=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Wb=q.forwardRef(function(t,n){const{addEndListener:r,appear:s=!0,children:c,easing:h,in:i,onEnter:g,onEntered:w,onEntering:T,onExit:A,onExited:D,onExiting:k,style:I,timeout:F="auto",TransitionComponent:j=bu,...V}=t,W=rd(),Z=q.useRef(),K=cs(),ee=q.useRef(null),se=mo(ee,Fg(c),n),he=He=>Se=>{if(He){const qe=ee.current;Se===void 0?He(qe):He(qe,Se)}},ye=he(T),_e=he((He,Se)=>{rD(He);const{duration:qe,delay:it,easing:tt}=Wp({style:I,timeout:F,easing:h},{mode:"enter"});let Oe;F==="auto"?(Oe=K.transitions.getAutoHeightDuration(He.clientHeight),Z.current=Oe):Oe=qe,He.style.transition=[K.transitions.create("opacity",{duration:Oe,delay:it}),K.transitions.create("transform",{duration:OI?Oe:Oe*.666,delay:it,easing:tt})].join(","),g&&g(He,Se)}),ae=he(w),be=he(k),Te=he(He=>{const{duration:Se,delay:qe,easing:it}=Wp({style:I,timeout:F,easing:h},{mode:"exit"});let tt;F==="auto"?(tt=K.transitions.getAutoHeightDuration(He.clientHeight),Z.current=tt):tt=Se,He.style.transition=[K.transitions.create("opacity",{duration:tt,delay:qe}),K.transitions.create("transform",{duration:OI?tt:tt*.666,delay:OI?qe:qe||tt*.333,easing:it})].join(","),He.style.opacity=0,He.style.transform=sF(.75),A&&A(He)}),Ae=he(D),Re=He=>{F==="auto"&&W.start(Z.current||0,He),r&&r(ee.current,He)};return $.jsx(j,{appear:s,in:i,nodeRef:ee,onEnter:_e,onEntered:ae,onEntering:ye,onExit:Te,onExited:Ae,onExiting:be,addEndListener:Re,timeout:F==="auto"?null:F,...V,children:(He,{ownerState:Se,...qe})=>q.cloneElement(c,{style:{opacity:0,transform:sF(.75),visibility:He==="exited"&&!i?"hidden":void 0,...Nme[He],...I,...c.props.style},ref:se,...qe})})});Wb&&(Wb.muiSupportAuto=!0);function jme(e,t,n){const r=t.getBoundingClientRect(),s=n&&n.getBoundingClientRect(),c=ad(t);let h;if(t.fakeTransform)h=t.fakeTransform;else{const w=c.getComputedStyle(t);h=w.getPropertyValue("-webkit-transform")||w.getPropertyValue("transform")}let i=0,g=0;if(h&&h!=="none"&&typeof h=="string"){const w=h.split("(")[1].split(")")[0].split(",");i=parseInt(w[4],10),g=parseInt(w[5],10)}return e==="left"?s?`translateX(${s.right+i-r.left}px)`:`translateX(${c.innerWidth+i-r.left}px)`:e==="right"?s?`translateX(-${r.right-s.left-i}px)`:`translateX(-${r.left+r.width-i}px)`:e==="up"?s?`translateY(${s.bottom+g-r.top}px)`:`translateY(${c.innerHeight+g-r.top}px)`:s?`translateY(-${r.top-s.top+r.height-g}px)`:`translateY(-${r.top+r.height-g}px)`}function Vme(e){return typeof e=="function"?e():e}function WC(e,t,n){const r=Vme(n),s=jme(e,t,r);s&&(t.style.webkitTransform=s,t.style.transform=s)}const SZ=q.forwardRef(function(t,n){const r=cs(),s={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},c={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:h,appear:i=!0,children:g,container:w,direction:T="down",easing:A=s,in:D,onEnter:k,onEntered:I,onEntering:F,onExit:j,onExited:V,onExiting:W,style:Z,timeout:K=c,TransitionComponent:ee=bu,...se}=t,he=q.useRef(null),ye=mo(Fg(g),he,n),_e=it=>tt=>{it&&(tt===void 0?it(he.current):it(he.current,tt))},ae=_e((it,tt)=>{WC(T,it,w),rD(it),k&&k(it,tt)}),be=_e((it,tt)=>{const Oe=Wp({timeout:K,style:Z,easing:A},{mode:"enter"});it.style.webkitTransition=r.transitions.create("-webkit-transform",{...Oe}),it.style.transition=r.transitions.create("transform",{...Oe}),it.style.webkitTransform="none",it.style.transform="none",F&&F(it,tt)}),Te=_e(I),Ae=_e(W),Re=_e(it=>{const tt=Wp({timeout:K,style:Z,easing:A},{mode:"exit"});it.style.webkitTransition=r.transitions.create("-webkit-transform",tt),it.style.transition=r.transitions.create("transform",tt),WC(T,it,w),j&&j(it)}),He=_e(it=>{it.style.webkitTransition="",it.style.transition="",V&&V(it)}),Se=it=>{h&&h(he.current,it)},qe=q.useCallback(()=>{he.current&&WC(T,he.current,w)},[T,w]);return q.useEffect(()=>{if(D||T==="down"||T==="right")return;const it=YT(()=>{he.current&&WC(T,he.current,w)}),tt=ad(he.current);return tt.addEventListener("resize",it),()=>{it.clear(),tt.removeEventListener("resize",it)}},[T,D,w]),q.useEffect(()=>{D||qe()},[D,qe]),$.jsx(ee,{nodeRef:he,onEnter:ae,onEntered:Te,onEntering:be,onExit:Re,onExited:He,onExiting:Ae,addEndListener:Se,appear:i,in:D,timeout:K,...se,children:(it,{ownerState:tt,...Oe})=>q.cloneElement(g,{ref:ye,style:{visibility:it==="exited"&&!D?"hidden":void 0,...Z,...g.props.style},...Oe})})}),Ume={entering:{transform:"none"},entered:{transform:"none"}},$me=q.forwardRef(function(t,n){const r=cs(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:h=!0,children:i,easing:g,in:w,onEnter:T,onEntered:A,onEntering:D,onExit:k,onExited:I,onExiting:F,style:j,timeout:V=s,TransitionComponent:W=bu,...Z}=t,K=q.useRef(null),ee=mo(K,Fg(i),n),se=Re=>He=>{if(Re){const Se=K.current;He===void 0?Re(Se):Re(Se,He)}},he=se(D),ye=se((Re,He)=>{rD(Re);const Se=Wp({style:j,timeout:V,easing:g},{mode:"enter"});Re.style.webkitTransition=r.transitions.create("transform",Se),Re.style.transition=r.transitions.create("transform",Se),T&&T(Re,He)}),_e=se(A),ae=se(F),be=se(Re=>{const He=Wp({style:j,timeout:V,easing:g},{mode:"exit"});Re.style.webkitTransition=r.transitions.create("transform",He),Re.style.transition=r.transitions.create("transform",He),k&&k(Re)}),Te=se(I),Ae=Re=>{c&&c(K.current,Re)};return $.jsx(W,{appear:h,in:w,nodeRef:K,onEnter:ye,onEntered:_e,onEntering:he,onExit:be,onExited:Te,onExiting:ae,addEndListener:Ae,timeout:V,...Z,children:(Re,{ownerState:He,...Se})=>q.cloneElement(i,{style:{transform:"scale(0)",visibility:Re==="exited"&&!w?"hidden":void 0,...Ume[Re],...j,...i.props.style},ref:ee,...Se})})});function PN({children:e,position:t="top-left",sx:n,type:r="grow",direction:s="up",ref:c,...h}){let i={transformOrigin:"0 0 0"};switch(t){case"top-right":i={transformOrigin:"top right"};break;case"top":i={transformOrigin:"top"};break;case"bottom-left":i={transformOrigin:"bottom left"};break;case"bottom-right":i={transformOrigin:"bottom right"};break;case"bottom":i={transformOrigin:"bottom"};break;case"top-left":default:i={transformOrigin:"0 0 0"};break}return $.jsxs(Dr,{ref:c,children:[r==="grow"&&$.jsx(Wb,{...h,children:$.jsx(Dr,{sx:i,children:e})}),r==="collapse"&&$.jsx(UM,{...h,sx:i,children:e}),r==="fade"&&$.jsx(Xy,{...h,timeout:{appear:500,enter:600,exit:400},children:$.jsx(Dr,{sx:i,children:e})}),r==="slide"&&$.jsx(SZ,{...h,timeout:{appear:0,enter:400,exit:200},direction:s,children:$.jsx(Dr,{sx:i,children:e})}),r==="zoom"&&$.jsx($me,{...h,children:$.jsx(Dr,{sx:i,children:e})})]})}PN.propTypes={children:nt.node,position:nt.string,sx:nt.any,type:nt.string,direction:nt.oneOf(["up","right","left","down"]),others:nt.any};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qme={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=(e,t,n,r)=>{const s=q.forwardRef(({color:c="currentColor",size:h=24,stroke:i=2,title:g,className:w,children:T,...A},D)=>q.createElement("svg",{ref:D,...qme[e],width:h,height:h,className:["tabler-icon",`tabler-icon-${t}`,w].join(" "),...e==="filled"?{fill:c}:{strokeWidth:i,stroke:c},...A},[g&&q.createElement("title",{key:"svg-title"},g),...r.map(([k,I])=>q.createElement(k,I)),...Array.isArray(T)?T:[T]]));return s.displayName=`${n}`,s};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hme=Cs("outline","brand-facebook","IconBrandFacebook",[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gme=Cs("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TZ=Cs("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wme=Cs("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yme=Cs("outline","cloud-upload","IconCloudUpload",[["path",{d:"M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1",key:"svg-0"}],["path",{d:"M9 15l3 -3l3 3",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xme=Cs("outline","drone-off","IconDroneOff",[["path",{d:"M14 14h-4v-4",key:"svg-0"}],["path",{d:"M10 10l-3.5 -3.5",key:"svg-1"}],["path",{d:"M9.957 5.95a3.503 3.503 0 0 0 -2.917 -2.91m-3.02 .989a3.5 3.5 0 0 0 1.98 5.936",key:"svg-2"}],["path",{d:"M14 10l3.5 -3.5",key:"svg-3"}],["path",{d:"M18 9.965a3.5 3.5 0 1 0 -3.966 -3.965",key:"svg-4"}],["path",{d:"M14 14l3.5 3.5",key:"svg-5"}],["path",{d:"M14.035 18a3.5 3.5 0 0 0 5.936 1.98m.987 -3.026a3.503 3.503 0 0 0 -2.918 -2.913",key:"svg-6"}],["path",{d:"M10 14l-3.5 3.5",key:"svg-7"}],["path",{d:"M6 14.035a3.5 3.5 0 1 0 3.966 3.965",key:"svg-8"}],["path",{d:"M3 3l18 18",key:"svg-9"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zme=Cs("outline","file-spreadsheet","IconFileSpreadsheet",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M8 11h8v7h-8z",key:"svg-2"}],["path",{d:"M8 15h8",key:"svg-3"}],["path",{d:"M11 11v7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kme=Cs("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qme=Cs("outline","file-type-pdf","IconFileTypePdf",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4",key:"svg-1"}],["path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6",key:"svg-2"}],["path",{d:"M17 18h2",key:"svg-3"}],["path",{d:"M20 15h-3v6",key:"svg-4"}],["path",{d:"M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jme=Cs("outline","file-word","IconFileWord",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2",key:"svg-1"}],["path",{d:"M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ege=Cs("outline","file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tge=Cs("outline","files","IconFiles",[["path",{d:"M15 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nge=Cs("outline","git-compare","IconGitCompare",[["path",{d:"M6 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M11 6h5a2 2 0 0 1 2 2v8",key:"svg-2"}],["path",{d:"M14 9l-3 -3l3 -3",key:"svg-3"}],["path",{d:"M13 18h-5a2 2 0 0 1 -2 -2v-8",key:"svg-4"}],["path",{d:"M10 15l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rge=Cs("outline","logout","IconLogout",[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ige=Cs("outline","report","IconReport",[["path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697",key:"svg-0"}],["path",{d:"M18 14v4h4",key:"svg-1"}],["path",{d:"M18 11v-4a2 2 0 0 0 -2 -2h-2",key:"svg-2"}],["path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-4"}],["path",{d:"M8 11h4",key:"svg-5"}],["path",{d:"M8 15h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o6=Cs("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oge=Cs("outline","tag-starred","IconTagStarred",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}],["path",{d:"M12.5 13.847l-1.5 1.153l.532 -1.857l-1.532 -1.143h1.902l.598 -1.8l.598 1.8h1.902l-1.532 1.143l.532 1.857z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sge=Cs("outline","tallymark-1","IconTallymark1",[["path",{d:"M12 5l0 14",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var age=Cs("outline","view-360-number","IconView360Number",[["path",{d:"M14 6a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v6a1 1 0 0 0 1 1h2a1 1 0 0 0 1 -1v-2a1 1 0 0 0 -1 -1h-3",key:"svg-0"}],["path",{d:"M3 5h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-1"}],["path",{d:"M17 7v4a2 2 0 1 0 4 0v-4a2 2 0 1 0 -4 0z",key:"svg-2"}],["path",{d:"M3 16c0 1.657 4.03 3 9 3s9 -1.343 9 -3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lge=Cs("filled","brand-instagram-filled","IconBrandInstagramFilled",[["path",{d:"M16 3a5 5 0 0 1 5 5v8a5 5 0 0 1 -5 5h-8a5 5 0 0 1 -5 -5v-8a5 5 0 0 1 5 -5zm-4 5a4 4 0 0 0 -3.995 3.8l-.005 .2a4 4 0 1 0 4 -4m4.5 -1.5a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cge=Cs("filled","brand-linkedin-filled","IconBrandLinkedinFilled",[["path",{d:"M17 2a5 5 0 0 1 5 5v10a5 5 0 0 1 -5 5h-10a5 5 0 0 1 -5 -5v-10a5 5 0 0 1 5 -5zm-9 8a1 1 0 0 0 -1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0 -1 -1m6 0a3 3 0 0 0 -1.168 .236l-.125 .057a1 1 0 0 0 -1.707 .707v5a1 1 0 0 0 2 0v-3a1 1 0 0 1 2 0v3a1 1 0 0 0 2 0v-3a3 3 0 0 0 -3 -3m-6 -3a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uge=Cs("filled","brand-x-filled","IconBrandXFilled",[["path",{d:"M8.267 3a1 1 0 0 1 .73 .317l.076 .092l4.274 5.828l5.946 -5.944a1 1 0 0 1 1.497 1.32l-.083 .094l-6.163 6.162l6.262 8.54a1 1 0 0 1 -.697 1.585l-.109 .006h-4.267a1 1 0 0 1 -.73 -.317l-.076 -.092l-4.276 -5.829l-5.944 5.945a1 1 0 0 1 -1.497 -1.32l.083 -.094l6.161 -6.163l-6.26 -8.539a1 1 0 0 1 .697 -1.585l.109 -.006h4.267z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dge=Cs("filled","brand-youtube-filled","IconBrandYoutubeFilled",[["path",{d:"M18 3a5 5 0 0 1 5 5v8a5 5 0 0 1 -5 5h-12a5 5 0 0 1 -5 -5v-8a5 5 0 0 1 5 -5zm-9 6v6a1 1 0 0 0 1.514 .857l5 -3a1 1 0 0 0 0 -1.714l-5 -3a1 1 0 0 0 -1.514 .857z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hge=Cs("filled","live-view-filled","IconLiveViewFilled",[["path",{d:"M8 3a1 1 0 1 1 0 2h-2a1 1 0 0 0 -1 1v2a1 1 0 1 1 -2 0v-2a3 3 0 0 1 3 -3z",key:"svg-0"}],["path",{d:"M4 15a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 1 0 2h-2a3 3 0 0 1 -3 -3v-2a1 1 0 0 1 1 -1",key:"svg-1"}],["path",{d:"M18 3a3 3 0 0 1 3 3v2a1 1 0 0 1 -2 0v-2a1 1 0 0 0 -1 -1h-2a1 1 0 0 1 0 -2z",key:"svg-2"}],["path",{d:"M20 15a1 1 0 0 1 1 1v2a3 3 0 0 1 -3 3h-2a1 1 0 0 1 0 -2h2a1 1 0 0 0 1 -1v-2a1 1 0 0 1 1 -1",key:"svg-3"}],["path",{d:"M15.19 7.214a5 5 0 0 1 1.185 6.27l-.056 .09l-3.484 4.976a1 1 0 0 1 -.077 .103l-.017 .019l-.057 .056l-.012 .013l-.019 .017a1 1 0 0 1 -.096 .073l-.053 .03l-.038 .024l-.011 .005a1 1 0 0 1 -.223 .083l-.045 .008l-.066 .012a1 1 0 0 1 -.242 0l-.061 -.011l-.05 -.01a1 1 0 0 1 -.234 -.087l-.047 -.028l-.044 -.026l-.011 -.008l-.032 -.025l-.053 -.04l-.01 -.01l-.009 -.007l-.034 -.035l-.035 -.034l-.007 -.01l-.01 -.009l-.037 -.05l-.024 -.03l-3.5 -5l-.056 -.089a5 5 0 0 1 7.566 -6.27m-3.191 2.786a1 1 0 0 0 -1 1v.01a1 1 0 0 0 2 0v-.01a1 1 0 0 0 -1 -1",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s6=Cs("filled","settings-filled","IconSettingsFilled",[["path",{d:"M14.647 4.081a.724 .724 0 0 0 1.08 .448c2.439 -1.485 5.23 1.305 3.745 3.744a.724 .724 0 0 0 .447 1.08c2.775 .673 2.775 4.62 0 5.294a.724 .724 0 0 0 -.448 1.08c1.485 2.439 -1.305 5.23 -3.744 3.745a.724 .724 0 0 0 -1.08 .447c-.673 2.775 -4.62 2.775 -5.294 0a.724 .724 0 0 0 -1.08 -.448c-2.439 1.485 -5.23 -1.305 -3.745 -3.744a.724 .724 0 0 0 -.447 -1.08c-2.775 -.673 -2.775 -4.62 0 -5.294a.724 .724 0 0 0 .448 -1.08c-1.485 -2.439 1.305 -5.23 3.744 -3.745a.722 .722 0 0 0 1.08 -.447c.673 -2.775 4.62 -2.775 5.294 0zm-2.647 4.919a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z",key:"svg-0"}]]);nt.node,nt.any;nt.string,nt.func,nt.any;function fge(e){return fr("MuiCardContent",e)}pr("MuiCardContent",["root"]);const pge=e=>{const{classes:t}=e;return dr({root:["root"]},fge,t)},mge=Ot("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),iD=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCardContent"}),{className:s,component:c="div",...h}=r,i={...r,component:c},g=pge(i);return $.jsx(mge,{as:c,className:Wn(g.root,s),ownerState:i,ref:n,...h})}),gge=Es($.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));class $M{constructor(){Or(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new $M}static use(){const t=wZ($M.create).current,[n,r]=q.useState(!1);return t.shouldMount=n,t.setShouldMount=r,q.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=vge(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function yge(){return $M.use()}function vge(){let e,t;const n=new Promise((r,s)=>{e=r,t=s});return n.resolve=e,n.reject=t,n}function _ge(e){const{className:t,classes:n,pulsate:r=!1,rippleX:s,rippleY:c,rippleSize:h,in:i,onExited:g,timeout:w}=e,[T,A]=q.useState(!1),D=Wn(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),k={width:h,height:h,top:-(h/2)+c,left:-(h/2)+s},I=Wn(n.child,T&&n.childLeaving,r&&n.childPulsate);return!i&&!T&&A(!0),q.useEffect(()=>{if(!i&&g!=null){const F=setTimeout(g,w);return()=>{clearTimeout(F)}}},[g,i,w]),$.jsx("span",{className:D,style:k,children:$.jsx("span",{className:I})})}const nh=pr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),aF=550,xge=80,bge=ov`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,wge=ov`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Sge=ov`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Tge=Ot("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ege=Ot(_ge,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${nh.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${bge};
    animation-duration: ${aF}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${nh.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${nh.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${nh.childLeaving} {
    opacity: 0;
    animation-name: ${wge};
    animation-duration: ${aF}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${nh.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Sge};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Cge=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:c={},className:h,...i}=r,[g,w]=q.useState([]),T=q.useRef(0),A=q.useRef(null);q.useEffect(()=>{A.current&&(A.current(),A.current=null)},[g]);const D=q.useRef(!1),k=rd(),I=q.useRef(null),F=q.useRef(null),j=q.useCallback(K=>{const{pulsate:ee,rippleX:se,rippleY:he,rippleSize:ye,cb:_e}=K;w(ae=>[...ae,$.jsx(Ege,{classes:{ripple:Wn(c.ripple,nh.ripple),rippleVisible:Wn(c.rippleVisible,nh.rippleVisible),ripplePulsate:Wn(c.ripplePulsate,nh.ripplePulsate),child:Wn(c.child,nh.child),childLeaving:Wn(c.childLeaving,nh.childLeaving),childPulsate:Wn(c.childPulsate,nh.childPulsate)},timeout:aF,pulsate:ee,rippleX:se,rippleY:he,rippleSize:ye},T.current)]),T.current+=1,A.current=_e},[c]),V=q.useCallback((K={},ee={},se=()=>{})=>{const{pulsate:he=!1,center:ye=s||ee.pulsate,fakeElement:_e=!1}=ee;if((K==null?void 0:K.type)==="mousedown"&&D.current){D.current=!1;return}(K==null?void 0:K.type)==="touchstart"&&(D.current=!0);const ae=_e?null:F.current,be=ae?ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Te,Ae,Re;if(ye||K===void 0||K.clientX===0&&K.clientY===0||!K.clientX&&!K.touches)Te=Math.round(be.width/2),Ae=Math.round(be.height/2);else{const{clientX:He,clientY:Se}=K.touches&&K.touches.length>0?K.touches[0]:K;Te=Math.round(He-be.left),Ae=Math.round(Se-be.top)}if(ye)Re=Math.sqrt((2*be.width**2+be.height**2)/3),Re%2===0&&(Re+=1);else{const He=Math.max(Math.abs((ae?ae.clientWidth:0)-Te),Te)*2+2,Se=Math.max(Math.abs((ae?ae.clientHeight:0)-Ae),Ae)*2+2;Re=Math.sqrt(He**2+Se**2)}K!=null&&K.touches?I.current===null&&(I.current=()=>{j({pulsate:he,rippleX:Te,rippleY:Ae,rippleSize:Re,cb:se})},k.start(xge,()=>{I.current&&(I.current(),I.current=null)})):j({pulsate:he,rippleX:Te,rippleY:Ae,rippleSize:Re,cb:se})},[s,j,k]),W=q.useCallback(()=>{V({},{pulsate:!0})},[V]),Z=q.useCallback((K,ee)=>{if(k.clear(),(K==null?void 0:K.type)==="touchend"&&I.current){I.current(),I.current=null,k.start(0,()=>{Z(K,ee)});return}I.current=null,w(se=>se.length>0?se.slice(1):se),A.current=ee},[k]);return q.useImperativeHandle(n,()=>({pulsate:W,start:V,stop:Z}),[W,V,Z]),$.jsx(Tge,{className:Wn(nh.root,c.root,h),ref:F,...i,children:$.jsx(QT,{component:null,exit:!0,children:g})})});function Age(e){return fr("MuiButtonBase",e)}const Mge=pr("MuiButtonBase",["root","disabled","focusVisible"]),Rge=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:s}=e,h=dr({root:["root",t&&"disabled",n&&"focusVisible"]},Age,s);return n&&r&&(h.root+=` ${r}`),h},Dge=Ot("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Mge.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),hh=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:c=!1,children:h,className:i,component:g="button",disabled:w=!1,disableRipple:T=!1,disableTouchRipple:A=!1,focusRipple:D=!1,focusVisibleClassName:k,LinkComponent:I="a",onBlur:F,onClick:j,onContextMenu:V,onDragLeave:W,onFocus:Z,onFocusVisible:K,onKeyDown:ee,onKeyUp:se,onMouseDown:he,onMouseLeave:ye,onMouseUp:_e,onTouchEnd:ae,onTouchMove:be,onTouchStart:Te,tabIndex:Ae=0,TouchRippleProps:Re,touchRippleRef:He,type:Se,...qe}=r,it=q.useRef(null),tt=yge(),Oe=mo(tt.ref,He),[Je,yt]=q.useState(!1);w&&Je&&yt(!1),q.useImperativeHandle(s,()=>({focusVisible:()=>{yt(!0),it.current.focus()}}),[]);const wt=tt.shouldMount&&!T&&!w;q.useEffect(()=>{Je&&D&&!T&&tt.pulsate()},[T,D,Je,tt]);const $t=mg(tt,"start",he,A),It=mg(tt,"stop",V,A),vt=mg(tt,"stop",W,A),sn=mg(tt,"stop",_e,A),Rn=mg(tt,"stop",ut=>{Je&&ut.preventDefault(),ye&&ye(ut)},A),yn=mg(tt,"start",Te,A),Qt=mg(tt,"stop",ae,A),Jt=mg(tt,"stop",be,A),fn=mg(tt,"stop",ut=>{jb(ut.target)||yt(!1),F&&F(ut)},!1),Bt=Tr(ut=>{it.current||(it.current=ut.currentTarget),jb(ut.target)&&(yt(!0),K&&K(ut)),Z&&Z(ut)}),Kt=()=>{const ut=it.current;return g&&g!=="button"&&!(ut.tagName==="A"&&ut.href)},_n=Tr(ut=>{D&&!ut.repeat&&Je&&ut.key===" "&&tt.stop(ut,()=>{tt.start(ut)}),ut.target===ut.currentTarget&&Kt()&&ut.key===" "&&ut.preventDefault(),ee&&ee(ut),ut.target===ut.currentTarget&&Kt()&&ut.key==="Enter"&&!w&&(ut.preventDefault(),j&&j(ut))}),an=Tr(ut=>{D&&ut.key===" "&&Je&&!ut.defaultPrevented&&tt.stop(ut,()=>{tt.pulsate(ut)}),se&&se(ut),j&&ut.target===ut.currentTarget&&Kt()&&ut.key===" "&&!ut.defaultPrevented&&j(ut)});let Ft=g;Ft==="button"&&(qe.href||qe.to)&&(Ft=I);const kn={};Ft==="button"?(kn.type=Se===void 0?"button":Se,kn.disabled=w):(!qe.href&&!qe.to&&(kn.role="button"),w&&(kn["aria-disabled"]=w));const Yn=mo(n,it),wn={...r,centerRipple:c,component:g,disabled:w,disableRipple:T,disableTouchRipple:A,focusRipple:D,tabIndex:Ae,focusVisible:Je},Vn=Rge(wn);return $.jsxs(Dge,{as:Ft,className:Wn(Vn.root,i),ownerState:wn,onBlur:fn,onClick:j,onContextMenu:It,onFocus:Bt,onKeyDown:_n,onKeyUp:an,onMouseDown:$t,onMouseLeave:Rn,onMouseUp:sn,onDragLeave:vt,onTouchEnd:Qt,onTouchMove:Jt,onTouchStart:yn,ref:Yn,tabIndex:w?-1:Ae,type:Se,...kn,...qe,children:[h,wt?$.jsx(Cge,{ref:Oe,center:c,...Re}):null]})});function mg(e,t,n,r=!1){return Tr(s=>(n&&n(s),r||e[t](s),!0))}function Pge(e){return fr("MuiChip",e)}const vo=pr("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Ige=e=>{const{classes:t,disabled:n,size:r,color:s,iconColor:c,onDelete:h,clickable:i,variant:g}=e,w={root:["root",g,n&&"disabled",`size${Mn(r)}`,`color${Mn(s)}`,i&&"clickable",i&&`clickableColor${Mn(s)}`,h&&"deletable",h&&`deletableColor${Mn(s)}`,`${g}${Mn(s)}`],label:["label",`label${Mn(r)}`],avatar:["avatar",`avatar${Mn(r)}`,`avatarColor${Mn(s)}`],icon:["icon",`icon${Mn(r)}`,`iconColor${Mn(c)}`],deleteIcon:["deleteIcon",`deleteIcon${Mn(r)}`,`deleteIconColor${Mn(s)}`,`deleteIcon${Mn(g)}Color${Mn(s)}`]};return dr(w,Pge,t)},kge=Ot("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:s,clickable:c,onDelete:h,size:i,variant:g}=n;return[{[`& .${vo.avatar}`]:t.avatar},{[`& .${vo.avatar}`]:t[`avatar${Mn(i)}`]},{[`& .${vo.avatar}`]:t[`avatarColor${Mn(r)}`]},{[`& .${vo.icon}`]:t.icon},{[`& .${vo.icon}`]:t[`icon${Mn(i)}`]},{[`& .${vo.icon}`]:t[`iconColor${Mn(s)}`]},{[`& .${vo.deleteIcon}`]:t.deleteIcon},{[`& .${vo.deleteIcon}`]:t[`deleteIcon${Mn(i)}`]},{[`& .${vo.deleteIcon}`]:t[`deleteIconColor${Mn(r)}`]},{[`& .${vo.deleteIcon}`]:t[`deleteIcon${Mn(g)}Color${Mn(r)}`]},t.root,t[`size${Mn(i)}`],t[`color${Mn(r)}`],c&&t.clickable,c&&r!=="default"&&t[`clickableColor${Mn(r)})`],h&&t.deletable,h&&r!=="default"&&t[`deletableColor${Mn(r)}`],t[g],t[`${g}${Mn(r)}`]]}})(ri(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${vo.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${vo.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${vo.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${vo.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${vo.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${vo.icon}`]:{marginLeft:5,marginRight:-6},[`& .${vo.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:ai(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ai(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${vo.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${vo.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(Vs(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${vo.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:ai(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${vo.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${vo.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${vo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ai(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(Vs(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${vo.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ai(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${vo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ai(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(Vs(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${vo.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${vo.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${vo.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${vo.avatar}`]:{marginLeft:4},[`& .${vo.avatarSmall}`]:{marginLeft:2},[`& .${vo.icon}`]:{marginLeft:4},[`& .${vo.iconSmall}`]:{marginLeft:2},[`& .${vo.deleteIcon}`]:{marginRight:5},[`& .${vo.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(Vs()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:ai(e.palette[n].main,.7)}`,[`&.${vo.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${vo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:ai(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${vo.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:ai(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),Oge=Ot("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${Mn(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function a6(e){return e.key==="Backspace"||e.key==="Delete"}const N0=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiChip"}),{avatar:s,className:c,clickable:h,color:i="default",component:g,deleteIcon:w,disabled:T=!1,icon:A,label:D,onClick:k,onDelete:I,onKeyDown:F,onKeyUp:j,size:V="medium",variant:W="filled",tabIndex:Z,skipFocusWhenDisabled:K=!1,...ee}=r,se=q.useRef(null),he=mo(se,n),ye=tt=>{tt.stopPropagation(),I&&I(tt)},_e=tt=>{tt.currentTarget===tt.target&&a6(tt)&&tt.preventDefault(),F&&F(tt)},ae=tt=>{tt.currentTarget===tt.target&&I&&a6(tt)&&I(tt),j&&j(tt)},be=h!==!1&&k?!0:h,Te=be||I?hh:g||"div",Ae={...r,component:Te,disabled:T,size:V,color:i,iconColor:q.isValidElement(A)&&A.props.color||i,onDelete:!!I,clickable:be,variant:W},Re=Ige(Ae),He=Te===hh?{component:g||"div",focusVisibleClassName:Re.focusVisible,...I&&{disableRipple:!0}}:{};let Se=null;I&&(Se=w&&q.isValidElement(w)?q.cloneElement(w,{className:Wn(w.props.className,Re.deleteIcon),onClick:ye}):$.jsx(gge,{className:Re.deleteIcon,onClick:ye}));let qe=null;s&&q.isValidElement(s)&&(qe=q.cloneElement(s,{className:Wn(Re.avatar,s.props.className)}));let it=null;return A&&q.isValidElement(A)&&(it=q.cloneElement(A,{className:Wn(Re.icon,A.props.className)})),$.jsxs(kge,{as:Te,className:Wn(Re.root,c),disabled:be&&T?!0:void 0,onClick:k,onKeyDown:_e,onKeyUp:ae,ref:he,tabIndex:K&&T?-1:Z,ownerState:Ae,...He,...ee,children:[qe||it,$.jsx(Oge,{className:Re.label,ownerState:Ae,children:D}),Se]})});function l6(e){return e.substring(2).toLowerCase()}function Lge(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function EZ(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:s,touchEvent:c="onTouchEnd"}=e,h=q.useRef(!1),i=q.useRef(null),g=q.useRef(!1),w=q.useRef(!1);q.useEffect(()=>(setTimeout(()=>{g.current=!0},0),()=>{g.current=!1}),[]);const T=mo(Fg(t),i),A=Tr(I=>{const F=w.current;w.current=!1;const j=za(i.current);if(!g.current||!i.current||"clientX"in I&&Lge(I,j))return;if(h.current){h.current=!1;return}let V;I.composedPath?V=I.composedPath().includes(i.current):V=!j.documentElement.contains(I.target)||i.current.contains(I.target),!V&&(n||!F)&&s(I)}),D=I=>F=>{w.current=!0;const j=t.props[I];j&&j(F)},k={ref:T};return c!==!1&&(k[c]=D(c)),q.useEffect(()=>{if(c!==!1){const I=l6(c),F=za(i.current),j=()=>{h.current=!0};return F.addEventListener(I,A),F.addEventListener("touchmove",j),()=>{F.removeEventListener(I,A),F.removeEventListener("touchmove",j)}}},[A,c]),r!==!1&&(k[r]=D(r)),q.useEffect(()=>{if(r!==!1){const I=l6(r),F=za(i.current);return F.addEventListener(I,A),()=>{F.removeEventListener(I,A)}}},[A,r]),q.cloneElement(t,k)}function zge(e){return fr("MuiDivider",e)}const c6=pr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Fge=e=>{const{absolute:t,children:n,classes:r,flexItem:s,light:c,orientation:h,textAlign:i,variant:g}=e;return dr({root:["root",t&&"absolute",g,c&&"light",h==="vertical"&&"vertical",s&&"flexItem",n&&"withChildren",n&&h==="vertical"&&"withChildrenVertical",i==="right"&&h!=="vertical"&&"textAlignRight",i==="left"&&h!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",h==="vertical"&&"wrapperVertical"]},zge,r)},Bge=Ot("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(ri(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:ai(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Nge=Ot("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(ri(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),gu=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiDivider"}),{absolute:s=!1,children:c,className:h,orientation:i="horizontal",component:g=c||i==="vertical"?"div":"hr",flexItem:w=!1,light:T=!1,role:A=g!=="hr"?"separator":void 0,textAlign:D="center",variant:k="fullWidth",...I}=r,F={...r,absolute:s,component:g,flexItem:w,light:T,orientation:i,role:A,textAlign:D,variant:k},j=Fge(F);return $.jsx(Bge,{as:g,className:Wn(j.root,h),role:A,ref:n,ownerState:F,"aria-orientation":A==="separator"&&(g!=="hr"||i==="vertical")?i:void 0,...I,children:c?$.jsx(Nge,{className:j.wrapper,ownerState:F,children:c}):null})});gu&&(gu.muiSkipListHighlight=!0);const ah=q.createContext({});function jge(e){return fr("MuiList",e)}pr("MuiList",["root","padding","dense","subheader"]);const Vge=e=>{const{classes:t,disablePadding:n,dense:r,subheader:s}=e;return dr({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},jge,t)},Uge=Ot("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),lv=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiList"}),{children:s,className:c,component:h="ul",dense:i=!1,disablePadding:g=!1,subheader:w,...T}=r,A=q.useMemo(()=>({dense:i}),[i]),D={...r,component:h,dense:i,disablePadding:g},k=Vge(D);return $.jsx(ah.Provider,{value:A,children:$.jsxs(Uge,{as:h,className:Wn(k.root,c),ref:n,ownerState:D,...T,children:[w,s]})})});function $ge(e){return fr("MuiListItemButton",e)}const pb=pr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),qge=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Hge=e=>{const{alignItems:t,classes:n,dense:r,disabled:s,disableGutters:c,divider:h,selected:i}=e,w=dr({root:["root",r&&"dense",!c&&"gutters",h&&"divider",s&&"disabled",t==="flex-start"&&"alignItemsFlexStart",i&&"selected"]},$ge,n);return{...n,...w}},Gge=Ot(hh,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:qge})(ri(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${pb.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ai(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${pb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ai(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${pb.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ai(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ai(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${pb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${pb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),qM=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:c=!1,component:h="div",children:i,dense:g=!1,disableGutters:w=!1,divider:T=!1,focusVisibleClassName:A,selected:D=!1,className:k,...I}=r,F=q.useContext(ah),j=q.useMemo(()=>({dense:g||F.dense||!1,alignItems:s,disableGutters:w}),[s,F.dense,g,w]),V=q.useRef(null);$s(()=>{c&&V.current&&V.current.focus()},[c]);const W={...r,alignItems:s,dense:j.dense,disableGutters:w,divider:T,selected:D},Z=Hge(W),K=mo(V,n);return $.jsx(ah.Provider,{value:j,children:$.jsx(Gge,{ref:K,href:I.href||I.to,component:(I.href||I.to)&&h==="div"?"button":h,focusVisibleClassName:Wn(Z.focusVisible,A),ownerState:W,className:Wn(Z.root,k),...I,classes:Z,children:i})})});function Wge(e){return fr("MuiListItemIcon",e)}const u6=pr("MuiListItemIcon",["root","alignItemsFlexStart"]),Yge=e=>{const{alignItems:t,classes:n}=e;return dr({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Wge,n)},Xge=Ot("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(ri(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),HM=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiListItemIcon"}),{className:s,...c}=r,h=q.useContext(ah),i={...r,alignItems:h.alignItems},g=Yge(i);return $.jsx(Xge,{className:Wn(g.root,s),ownerState:i,ref:n,...c})});function Zge(e){return fr("MuiListItemText",e)}const vb=pr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Kge=e=>{const{classes:t,inset:n,primary:r,secondary:s,dense:c}=e;return dr({root:["root",n&&"inset",c&&"dense",r&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},Zge,t)},Qge=Ot("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${vb.primary}`]:t.primary},{[`& .${vb.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${FM.root}:where(& .${vb.primary})`]:{display:"block"},[`.${FM.root}:where(& .${vb.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Yb=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiListItemText"}),{children:s,className:c,disableTypography:h=!1,inset:i=!1,primary:g,primaryTypographyProps:w,secondary:T,secondaryTypographyProps:A,slots:D={},slotProps:k={},...I}=r,{dense:F}=q.useContext(ah);let j=g??s,V=T;const W={...r,disableTypography:h,inset:i,primary:!!j,secondary:!!V,dense:F},Z=Kge(W),K={slots:D,slotProps:{primary:w,secondary:A,...k}},[ee,se]=fi("root",{className:Wn(Z.root,c),elementType:Qge,externalForwardedProps:{...K,...I},ownerState:W,ref:n}),[he,ye]=fi("primary",{className:Z.primary,elementType:rr,externalForwardedProps:K,ownerState:W}),[_e,ae]=fi("secondary",{className:Z.secondary,elementType:rr,externalForwardedProps:K,ownerState:W});return j!=null&&j.type!==rr&&!h&&(j=$.jsx(he,{variant:F?"body2":"body1",component:ye!=null&&ye.variant?void 0:"span",...ye,children:j})),V!=null&&V.type!==rr&&!h&&(V=$.jsx(_e,{variant:"body2",color:"textSecondary",...ae,children:V})),$.jsxs(ee,{...se,children:[j,V]})});function Jge(e){return fr("PrivateSwitchBase",e)}pr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const eye=e=>{const{classes:t,checked:n,disabled:r,edge:s}=e,c={root:["root",n&&"checked",r&&"disabled",s&&`edge${Mn(s)}`],input:["input"]};return dr(c,Jge,t)},tye=Ot(hh)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),nye=Ot("input",{shouldForwardProp:_c})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),CZ=q.forwardRef(function(t,n){const{autoFocus:r,checked:s,checkedIcon:c,defaultChecked:h,disabled:i,disableFocusRipple:g=!1,edge:w=!1,icon:T,id:A,inputProps:D,inputRef:k,name:I,onBlur:F,onChange:j,onFocus:V,readOnly:W,required:Z=!1,tabIndex:K,type:ee,value:se,slots:he={},slotProps:ye={},..._e}=t,[ae,be]=Yp({controlled:s,default:!!h,name:"SwitchBase",state:"checked"}),Te=vh(),Ae=It=>{V&&V(It),Te&&Te.onFocus&&Te.onFocus(It)},Re=It=>{F&&F(It),Te&&Te.onBlur&&Te.onBlur(It)},He=It=>{if(It.nativeEvent.defaultPrevented)return;const vt=It.target.checked;be(vt),j&&j(It,vt)};let Se=i;Te&&typeof Se>"u"&&(Se=Te.disabled);const qe=ee==="checkbox"||ee==="radio",it={...t,checked:ae,disabled:Se,disableFocusRipple:g,edge:w},tt=eye(it),Oe={slots:he,slotProps:{input:D,...ye}},[Je,yt]=fi("root",{ref:n,elementType:tye,className:tt.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Oe,component:"span",..._e},getSlotProps:It=>({...It,onFocus:vt=>{var sn;(sn=It.onFocus)==null||sn.call(It,vt),Ae(vt)},onBlur:vt=>{var sn;(sn=It.onBlur)==null||sn.call(It,vt),Re(vt)}}),ownerState:it,additionalProps:{centerRipple:!0,focusRipple:!g,disabled:Se,role:void 0,tabIndex:null}}),[wt,$t]=fi("input",{ref:k,elementType:nye,className:tt.input,externalForwardedProps:Oe,getSlotProps:It=>({...It,onChange:vt=>{var sn;(sn=It.onChange)==null||sn.call(It,vt),He(vt)}}),ownerState:it,additionalProps:{autoFocus:r,checked:s,defaultChecked:h,disabled:Se,id:qe?A:void 0,name:I,readOnly:W,required:Z,tabIndex:K,type:ee,...ee==="checkbox"&&se===void 0?{}:{value:se}}});return $.jsxs(Je,{...yt,children:[$.jsx(wt,{...$t}),ae?c:T]})});function rye(e){return fr("MuiSwitch",e)}const $c=pr("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),iye=e=>{const{classes:t,edge:n,size:r,color:s,checked:c,disabled:h}=e,i={root:["root",n&&`edge${Mn(n)}`,`size${Mn(r)}`],switchBase:["switchBase",`color${Mn(s)}`,c&&"checked",h&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},g=dr(i,rye,t);return{...t,...g}},oye=Ot("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${Mn(n.edge)}`],t[`size${Mn(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${$c.thumb}`]:{width:16,height:16},[`& .${$c.switchBase}`]:{padding:4,[`&.${$c.checked}`]:{transform:"translateX(16px)"}}}}]}),sye=Ot(CZ,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${$c.input}`]:t.input},n.color!=="default"&&t[`color${Mn(n.color)}`]]}})(ri(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${$c.checked}`]:{transform:"translateX(20px)"},[`&.${$c.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${$c.checked} + .${$c.track}`]:{opacity:.5},[`&.${$c.disabled} + .${$c.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${$c.input}`]:{left:"-100%",width:"300%"}})),ri(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Vs(["light"])).map(([t])=>({props:{color:t},style:{[`&.${$c.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$c.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?l1(e.palette[t].main,.62):a1(e.palette[t].main,.55)}`}},[`&.${$c.checked} + .${$c.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),aye=Ot("span",{name:"MuiSwitch",slot:"Track"})(ri(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),lye=Ot("span",{name:"MuiSwitch",slot:"Thumb"})(ri(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),d6=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiSwitch"}),{className:s,color:c="primary",edge:h=!1,size:i="medium",sx:g,slots:w={},slotProps:T={},...A}=r,D={...r,color:c,edge:h,size:i},k=iye(D),I={slots:w,slotProps:T},[F,j]=fi("root",{className:Wn(k.root,s),elementType:oye,externalForwardedProps:I,ownerState:D,additionalProps:{sx:g}}),[V,W]=fi("thumb",{className:k.thumb,elementType:lye,externalForwardedProps:I,ownerState:D}),Z=$.jsx(V,{...W}),[K,ee]=fi("track",{className:k.track,elementType:aye,externalForwardedProps:I,ownerState:D});return $.jsxs(F,{...j,children:[$.jsx(sye,{type:"checkbox",icon:Z,checkedIcon:Z,ref:n,ownerState:D,...A,classes:{...k,root:k.switchBase},slots:{...w.switchBase&&{root:w.switchBase},...w.input&&{input:w.input}},slotProps:{...T.switchBase&&{root:typeof T.switchBase=="function"?T.switchBase(D):T.switchBase},...T.input&&{input:typeof T.input=="function"?T.input(D):T.input}}}),$.jsx(K,{...ee})]})});function cye(e){return fr("MuiCircularProgress",e)}pr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ky=44,lF=ov`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,cF=ov`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,uye=typeof lF!="string"?d1`
        animation: ${lF} 1.4s linear infinite;
      `:null,dye=typeof cF!="string"?d1`
        animation: ${cF} 1.4s ease-in-out infinite;
      `:null,hye=e=>{const{classes:t,variant:n,color:r,disableShrink:s}=e,c={root:["root",n,`color${Mn(r)}`],svg:["svg"],circle:["circle",`circle${Mn(n)}`,s&&"circleDisableShrink"]};return dr(c,cye,t)},fye=Ot("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Mn(n.color)}`]]}})(ri(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:uye||{animation:`${lF} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),pye=Ot("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),mye=Ot("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Mn(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(ri(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:dye||{animation:`${cF} 1.4s ease-in-out infinite`}}]}))),AZ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCircularProgress"}),{className:s,color:c="primary",disableShrink:h=!1,size:i=40,style:g,thickness:w=3.6,value:T=0,variant:A="indeterminate",...D}=r,k={...r,color:c,disableShrink:h,size:i,thickness:w,value:T,variant:A},I=hye(k),F={},j={},V={};if(A==="determinate"){const W=2*Math.PI*((ky-w)/2);F.strokeDasharray=W.toFixed(3),V["aria-valuenow"]=Math.round(T),F.strokeDashoffset=`${((100-T)/100*W).toFixed(3)}px`,j.transform="rotate(-90deg)"}return $.jsx(fye,{className:Wn(I.root,s),style:{width:i,height:i,...j,...g},ownerState:k,ref:n,role:"progressbar",...V,...D,children:$.jsx(pye,{className:I.svg,ownerState:k,viewBox:`${ky/2} ${ky/2} ${ky} ${ky}`,children:$.jsx(mye,{className:I.circle,style:F,ownerState:k,cx:ky,cy:ky,r:(ky-w)/2,fill:"none",strokeWidth:w})})})});function gye(e){return fr("MuiButton",e)}const z_=pr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),yye=q.createContext({}),vye=q.createContext(void 0),_ye=e=>{const{color:t,disableElevation:n,fullWidth:r,size:s,variant:c,loading:h,loadingPosition:i,classes:g}=e,w={root:["root",h&&"loading",c,`${c}${Mn(t)}`,`size${Mn(s)}`,`${c}Size${Mn(s)}`,`color${Mn(t)}`,n&&"disableElevation",r&&"fullWidth",h&&`loadingPosition${Mn(i)}`],startIcon:["icon","startIcon",`iconSize${Mn(s)}`],endIcon:["icon","endIcon",`iconSize${Mn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},T=dr(w,gye,g);return{...g,...T}},MZ=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],xye=Ot(hh,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Mn(n.color)}`],t[`size${Mn(n.size)}`],t[`${n.variant}Size${Mn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(ri(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${z_.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${z_.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${z_.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${z_.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Vs()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.5)`:ai(e.palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette[r].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette[r].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${z_.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${z_.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${z_.loading}`]:{color:"transparent"}}}]}})),bye=Ot("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Mn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...MZ]})),wye=Ot("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Mn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...MZ]})),Sye=Ot("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),h6=Ot("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),ms=q.forwardRef(function(t,n){const r=q.useContext(yye),s=q.useContext(vye),c=KS(r,t),h=qr({props:c,name:"MuiButton"}),{children:i,color:g="primary",component:w="button",className:T,disabled:A=!1,disableElevation:D=!1,disableFocusRipple:k=!1,endIcon:I,focusVisibleClassName:F,fullWidth:j=!1,id:V,loading:W=null,loadingIndicator:Z,loadingPosition:K="center",size:ee="medium",startIcon:se,type:he,variant:ye="text",..._e}=h,ae=tm(V),be=Z??$.jsx(AZ,{"aria-labelledby":ae,color:"inherit",size:16}),Te={...h,color:g,component:w,disabled:A,disableElevation:D,disableFocusRipple:k,fullWidth:j,loading:W,loadingIndicator:be,loadingPosition:K,size:ee,type:he,variant:ye},Ae=_ye(Te),Re=(se||W&&K==="start")&&$.jsx(bye,{className:Ae.startIcon,ownerState:Te,children:se||$.jsx(h6,{className:Ae.loadingIconPlaceholder,ownerState:Te})}),He=(I||W&&K==="end")&&$.jsx(wye,{className:Ae.endIcon,ownerState:Te,children:I||$.jsx(h6,{className:Ae.loadingIconPlaceholder,ownerState:Te})}),Se=s||"",qe=typeof W=="boolean"?$.jsx("span",{className:Ae.loadingWrapper,style:{display:"contents"},children:W&&$.jsx(Sye,{className:Ae.loadingIndicator,ownerState:Te,children:be})}):null;return $.jsxs(xye,{ownerState:Te,className:Wn(r.className,Ae.root,T,Se),component:w,disabled:A||W,focusRipple:!k,focusVisibleClassName:Wn(Ae.focusVisible,F),ref:n,type:he,id:W?ae:V,..._e,classes:Ae,children:[Re,K!=="end"&&qe,i,K==="end"&&qe,He]})}),RZ=q.createContext({});function Tye(e){const t=q.useRef(null);return t.current===null&&(t.current=e()),t.current}const IN=typeof window<"u",Eye=IN?q.useLayoutEffect:q.useEffect,kN=q.createContext(null),DZ=q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Cye(e=!0){const t=q.useContext(kN);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,c=q.useId();q.useEffect(()=>{if(e)return s(c)},[e]);const h=q.useCallback(()=>e&&r&&r(c),[c,r,e]);return!n&&r?[!1,h]:[!0]}function ON(e,t){e.indexOf(t)===-1&&e.push(t)}function LN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Pg=(e,t,n)=>n>t?t:n<e?e:n;let zN=()=>{};const Ig={},PZ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),IZ=e=>/^0[^.\s]+$/u.test(e);function FN(e){let t;return()=>(t===void 0&&(t=e()),t)}const lh=e=>e,Aye=(e,t)=>n=>t(e(n)),JT=(...e)=>e.reduce(Aye),nT=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class BN{constructor(){this.subscriptions=[]}add(t){return ON(this.subscriptions,t),()=>LN(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let c=0;c<s;c++){const h=this.subscriptions[c];h&&h(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $p=e=>e*1e3,qp=e=>e/1e3;function kZ(e,t){return t?e*(1e3/t):0}const Mye=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},OZ=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Rye=1e-7,Dye=12;function Pye(e,t,n,r,s){let c,h,i=0;do h=t+(n-t)/2,c=OZ(h,r,s)-e,c>0?n=h:t=h;while(Math.abs(c)>Rye&&++i<Dye);return h}function eE(e,t,n,r){if(e===t&&n===r)return lh;const s=c=>Pye(c,0,1,e,n);return c=>c===0||c===1?c:OZ(s(c),t,r)}const LZ=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zZ=e=>t=>1-e(1-t),FZ=eE(.33,1.53,.69,.99),NN=zZ(FZ),BZ=LZ(NN),NZ=e=>(e*=2)<1?.5*NN(e):.5*(2-Math.pow(2,-10*(e-1))),jN=e=>1-Math.sin(Math.acos(e)),jZ=zZ(jN),VZ=LZ(jN),Iye=eE(.42,0,1,1),kye=eE(0,0,.58,1),UZ=eE(.42,0,.58,1),Oye=e=>Array.isArray(e)&&typeof e[0]!="number",$Z=e=>Array.isArray(e)&&typeof e[0]=="number",Lye={linear:lh,easeIn:Iye,easeInOut:UZ,easeOut:kye,circIn:jN,circInOut:VZ,circOut:jZ,backIn:NN,backInOut:BZ,backOut:FZ,anticipate:NZ},zye=e=>typeof e=="string",f6=e=>{if($Z(e)){zN(e.length===4);const[t,n,r,s]=e;return eE(t,n,r,s)}else if(zye(e))return Lye[e];return e},YC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],p6={value:null};function Fye(e,t){let n=new Set,r=new Set,s=!1,c=!1;const h=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1},g=0;function w(A){h.has(A)&&(T.schedule(A),e()),g++,A(i)}const T={schedule:(A,D=!1,k=!1)=>{const F=k&&s?n:r;return D&&h.add(A),F.has(A)||F.add(A),A},cancel:A=>{r.delete(A),h.delete(A)},process:A=>{if(i=A,s){c=!0;return}s=!0,[n,r]=[r,n],n.forEach(w),t&&p6.value&&p6.value.frameloop[t].push(g),g=0,n.clear(),s=!1,c&&(c=!1,T.process(A))}};return T}const Bye=40;function qZ(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,h=YC.reduce((Z,K)=>(Z[K]=Fye(c,t?K:void 0),Z),{}),{setup:i,read:g,resolveKeyframes:w,preUpdate:T,update:A,preRender:D,render:k,postRender:I}=h,F=()=>{const Z=Ig.useManualTiming?s.timestamp:performance.now();n=!1,Ig.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(Z-s.timestamp,Bye),1)),s.timestamp=Z,s.isProcessing=!0,i.process(s),g.process(s),w.process(s),T.process(s),A.process(s),D.process(s),k.process(s),I.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(F))},j=()=>{n=!0,r=!0,s.isProcessing||e(F)};return{schedule:YC.reduce((Z,K)=>{const ee=h[K];return Z[K]=(se,he=!1,ye=!1)=>(n||j(),ee.schedule(se,he,ye)),Z},{}),cancel:Z=>{for(let K=0;K<YC.length;K++)h[YC[K]].cancel(Z)},state:s,steps:h}}const{schedule:Us,cancel:Zy,state:Ol,steps:LI}=qZ(typeof requestAnimationFrame<"u"?requestAnimationFrame:lh,!0);let JA;function Nye(){JA=void 0}const du={now:()=>(JA===void 0&&du.set(Ol.isProcessing||Ig.useManualTiming?Ol.timestamp:performance.now()),JA),set:e=>{JA=e,queueMicrotask(Nye)}},HZ=e=>t=>typeof t=="string"&&t.startsWith(e),VN=HZ("--"),jye=HZ("var(--"),UN=e=>jye(e)?Vye.test(e.split("/*")[0].trim()):!1,Vye=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,p1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},rT={...p1,transform:e=>Pg(0,1,e)},XC={...p1,default:1},IS=e=>Math.round(e*1e5)/1e5,$N=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uye(e){return e==null}const $ye=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qN=(e,t)=>n=>!!(typeof n=="string"&&$ye.test(n)&&n.startsWith(e)||t&&!Uye(n)&&Object.prototype.hasOwnProperty.call(n,t)),GZ=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,c,h,i]=r.match($N);return{[e]:parseFloat(s),[t]:parseFloat(c),[n]:parseFloat(h),alpha:i!==void 0?parseFloat(i):1}},qye=e=>Pg(0,255,e),zI={...p1,transform:e=>Math.round(qye(e))},i0={test:qN("rgb","red"),parse:GZ("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+zI.transform(e)+", "+zI.transform(t)+", "+zI.transform(n)+", "+IS(rT.transform(r))+")"};function Hye(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const uF={test:qN("#"),parse:Hye,transform:i0.transform},tE=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zy=tE("deg"),Hp=tE("%"),Ri=tE("px"),Gye=tE("vh"),Wye=tE("vw"),m6={...Hp,parse:e=>Hp.parse(e)/100,transform:e=>Hp.transform(e*100)},_b={test:qN("hsl","hue"),parse:GZ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Hp.transform(IS(t))+", "+Hp.transform(IS(n))+", "+IS(rT.transform(r))+")"},cc={test:e=>i0.test(e)||uF.test(e)||_b.test(e),parse:e=>i0.test(e)?i0.parse(e):_b.test(e)?_b.parse(e):uF.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?i0.transform(e):_b.transform(e)},Yye=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Xye(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match($N))==null?void 0:t.length)||0)+(((n=e.match(Yye))==null?void 0:n.length)||0)>0}const WZ="number",YZ="color",Zye="var",Kye="var(",g6="${}",Qye=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function iT(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let c=0;const i=t.replace(Qye,g=>(cc.test(g)?(r.color.push(c),s.push(YZ),n.push(cc.parse(g))):g.startsWith(Kye)?(r.var.push(c),s.push(Zye),n.push(g)):(r.number.push(c),s.push(WZ),n.push(parseFloat(g))),++c,g6)).split(g6);return{values:n,split:i,indexes:r,types:s}}function XZ(e){return iT(e).values}function ZZ(e){const{split:t,types:n}=iT(e),r=t.length;return s=>{let c="";for(let h=0;h<r;h++)if(c+=t[h],s[h]!==void 0){const i=n[h];i===WZ?c+=IS(s[h]):i===YZ?c+=cc.transform(s[h]):c+=s[h]}return c}}const Jye=e=>typeof e=="number"?0:e;function eve(e){const t=XZ(e);return ZZ(e)(t.map(Jye))}const Ky={test:Xye,parse:XZ,createTransformer:ZZ,getAnimatableNone:eve};function FI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function tve({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,c=0,h=0;if(!t)s=c=h=n;else{const i=n<.5?n*(1+t):n+t-n*t,g=2*n-i;s=FI(g,i,e+1/3),c=FI(g,i,e),h=FI(g,i,e-1/3)}return{red:Math.round(s*255),green:Math.round(c*255),blue:Math.round(h*255),alpha:r}}function GM(e,t){return n=>n>0?t:e}const Ns=(e,t,n)=>e+(t-e)*n,BI=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},nve=[uF,i0,_b],rve=e=>nve.find(t=>t.test(e));function y6(e){const t=rve(e);if(!t)return!1;let n=t.parse(e);return t===_b&&(n=tve(n)),n}const v6=(e,t)=>{const n=y6(e),r=y6(t);if(!n||!r)return GM(e,t);const s={...n};return c=>(s.red=BI(n.red,r.red,c),s.green=BI(n.green,r.green,c),s.blue=BI(n.blue,r.blue,c),s.alpha=Ns(n.alpha,r.alpha,c),i0.transform(s))},dF=new Set(["none","hidden"]);function ive(e,t){return dF.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function ove(e,t){return n=>Ns(e,t,n)}function HN(e){return typeof e=="number"?ove:typeof e=="string"?UN(e)?GM:cc.test(e)?v6:lve:Array.isArray(e)?KZ:typeof e=="object"?cc.test(e)?v6:sve:GM}function KZ(e,t){const n=[...e],r=n.length,s=e.map((c,h)=>HN(c)(c,t[h]));return c=>{for(let h=0;h<r;h++)n[h]=s[h](c);return n}}function sve(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=HN(e[s])(e[s],t[s]));return s=>{for(const c in r)n[c]=r[c](s);return n}}function ave(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const c=t.types[s],h=e.indexes[c][r[c]],i=e.values[h]??0;n[s]=i,r[c]++}return n}const lve=(e,t)=>{const n=Ky.createTransformer(t),r=iT(e),s=iT(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?dF.has(e)&&!s.values.length||dF.has(t)&&!r.values.length?ive(e,t):JT(KZ(ave(r,s),s.values),n):GM(e,t)};function QZ(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ns(e,t,n):HN(e)(e,t)}const cve=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Us.update(t,n),stop:()=>Zy(t),now:()=>Ol.isProcessing?Ol.timestamp:du.now()}},JZ=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let c=0;c<s;c++)r+=e(c/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},WM=2e4;function GN(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<WM;)t+=n,r=e.next(t);return t>=WM?1/0:t}function uve(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(GN(r),WM);return{type:"keyframes",ease:c=>r.next(s*c).value/t,duration:qp(s)}}const dve=5;function eK(e,t,n){const r=Math.max(t-dve,0);return kZ(n-e(r),t-r)}const na={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_6=.001;function hve({duration:e=na.duration,bounce:t=na.bounce,velocity:n=na.velocity,mass:r=na.mass}){let s,c,h=1-t;h=Pg(na.minDamping,na.maxDamping,h),e=Pg(na.minDuration,na.maxDuration,qp(e)),h<1?(s=w=>{const T=w*h,A=T*e,D=T-n,k=hF(w,h),I=Math.exp(-A);return _6-D/k*I},c=w=>{const A=w*h*e,D=A*n+n,k=Math.pow(h,2)*Math.pow(w,2)*e,I=Math.exp(-A),F=hF(Math.pow(w,2),h);return(-s(w)+_6>0?-1:1)*((D-k)*I)/F}):(s=w=>{const T=Math.exp(-w*e),A=(w-n)*e+1;return-.001+T*A},c=w=>{const T=Math.exp(-w*e),A=(n-w)*(e*e);return T*A});const i=5/e,g=pve(s,c,i);if(e=$p(e),isNaN(g))return{stiffness:na.stiffness,damping:na.damping,duration:e};{const w=Math.pow(g,2)*r;return{stiffness:w,damping:h*2*Math.sqrt(r*w),duration:e}}}const fve=12;function pve(e,t,n){let r=n;for(let s=1;s<fve;s++)r=r-e(r)/t(r);return r}function hF(e,t){return e*Math.sqrt(1-t*t)}const mve=["duration","bounce"],gve=["stiffness","damping","mass"];function x6(e,t){return t.some(n=>e[n]!==void 0)}function yve(e){let t={velocity:na.velocity,stiffness:na.stiffness,damping:na.damping,mass:na.mass,isResolvedFromDuration:!1,...e};if(!x6(e,gve)&&x6(e,mve))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,c=2*Pg(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:na.mass,stiffness:s,damping:c}}else{const n=hve(e);t={...t,...n,mass:na.mass},t.isResolvedFromDuration=!0}return t}function YM(e=na.visualDuration,t=na.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const c=n.keyframes[0],h=n.keyframes[n.keyframes.length-1],i={done:!1,value:c},{stiffness:g,damping:w,mass:T,duration:A,velocity:D,isResolvedFromDuration:k}=yve({...n,velocity:-qp(n.velocity||0)}),I=D||0,F=w/(2*Math.sqrt(g*T)),j=h-c,V=qp(Math.sqrt(g/T)),W=Math.abs(j)<5;r||(r=W?na.restSpeed.granular:na.restSpeed.default),s||(s=W?na.restDelta.granular:na.restDelta.default);let Z;if(F<1){const ee=hF(V,F);Z=se=>{const he=Math.exp(-F*V*se);return h-he*((I+F*V*j)/ee*Math.sin(ee*se)+j*Math.cos(ee*se))}}else if(F===1)Z=ee=>h-Math.exp(-V*ee)*(j+(I+V*j)*ee);else{const ee=V*Math.sqrt(F*F-1);Z=se=>{const he=Math.exp(-F*V*se),ye=Math.min(ee*se,300);return h-he*((I+F*V*j)*Math.sinh(ye)+ee*j*Math.cosh(ye))/ee}}const K={calculatedDuration:k&&A||null,next:ee=>{const se=Z(ee);if(k)i.done=ee>=A;else{let he=ee===0?I:0;F<1&&(he=ee===0?$p(I):eK(Z,ee,se));const ye=Math.abs(he)<=r,_e=Math.abs(h-se)<=s;i.done=ye&&_e}return i.value=i.done?h:se,i},toString:()=>{const ee=Math.min(GN(K),WM),se=JZ(he=>K.next(ee*he).value,ee,30);return ee+"ms "+se},toTransition:()=>{}};return K}YM.applyToOptions=e=>{const t=uve(e,100,YM);return e.ease=t.ease,e.duration=$p(t.duration),e.type="keyframes",e};function fF({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:c=500,modifyTarget:h,min:i,max:g,restDelta:w=.5,restSpeed:T}){const A=e[0],D={done:!1,value:A},k=ye=>i!==void 0&&ye<i||g!==void 0&&ye>g,I=ye=>i===void 0?g:g===void 0||Math.abs(i-ye)<Math.abs(g-ye)?i:g;let F=n*t;const j=A+F,V=h===void 0?j:h(j);V!==j&&(F=V-A);const W=ye=>-F*Math.exp(-ye/r),Z=ye=>V+W(ye),K=ye=>{const _e=W(ye),ae=Z(ye);D.done=Math.abs(_e)<=w,D.value=D.done?V:ae};let ee,se;const he=ye=>{k(D.value)&&(ee=ye,se=YM({keyframes:[D.value,I(D.value)],velocity:eK(Z,ye,D.value),damping:s,stiffness:c,restDelta:w,restSpeed:T}))};return he(0),{calculatedDuration:null,next:ye=>{let _e=!1;return!se&&ee===void 0&&(_e=!0,K(ye),he(ye)),ee!==void 0&&ye>=ee?se.next(ye-ee):(!_e&&K(ye),D)}}}function vve(e,t,n){const r=[],s=n||Ig.mix||QZ,c=e.length-1;for(let h=0;h<c;h++){let i=s(e[h],e[h+1]);if(t){const g=Array.isArray(t)?t[h]||lh:t;i=JT(g,i)}r.push(i)}return r}function _ve(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const c=e.length;if(zN(c===t.length),c===1)return()=>t[0];if(c===2&&t[0]===t[1])return()=>t[1];const h=e[0]===e[1];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=vve(t,r,s),g=i.length,w=T=>{if(h&&T<e[0])return t[0];let A=0;if(g>1)for(;A<e.length-2&&!(T<e[A+1]);A++);const D=nT(e[A],e[A+1],T);return i[A](D)};return n?T=>w(Pg(e[0],e[c-1],T)):w}function xve(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=nT(0,t,r);e.push(Ns(n,1,s))}}function bve(e){const t=[0];return xve(t,e.length-1),t}function wve(e,t){return e.map(n=>n*t)}function Sve(e,t){return e.map(()=>t||UZ).splice(0,e.length-1)}function kS({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Oye(r)?r.map(f6):f6(r),c={done:!1,value:t[0]},h=wve(n&&n.length===t.length?n:bve(t),e),i=_ve(h,t,{ease:Array.isArray(s)?s:Sve(t,s)});return{calculatedDuration:e,next:g=>(c.value=i(g),c.done=g>=e,c)}}const Tve=e=>e!==null;function WN(e,{repeat:t,repeatType:n="loop"},r,s=1){const c=e.filter(Tve),i=s<0||t&&n!=="loop"&&t%2===1?0:c.length-1;return!i||r===void 0?c[i]:r}const Eve={decay:fF,inertia:fF,tween:kS,keyframes:kS,spring:YM};function tK(e){typeof e.type=="string"&&(e.type=Eve[e.type])}class YN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Cve=e=>e/100;class nK extends YN{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,s;if(n){const{motionValue:c}=this.options;c&&c.updatedAt!==du.now()&&this.tick(du.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;tK(t);const{type:n=kS,repeat:r=0,repeatDelay:s=0,repeatType:c,velocity:h=0}=t;let{keyframes:i}=t;const g=n||kS;g!==kS&&typeof i[0]!="number"&&(this.mixKeyframes=JT(Cve,QZ(i[0],i[1])),i=[0,100]);const w=g({...t,keyframes:i});c==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...i].reverse(),velocity:-h})),w.calculatedDuration===null&&(w.calculatedDuration=GN(w));const{calculatedDuration:T}=w;this.calculatedDuration=T,this.resolvedDuration=T+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=w}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:c,mirroredGenerator:h,resolvedDuration:i,calculatedDuration:g}=this;if(this.startTime===null)return r.next(0);const{delay:w=0,keyframes:T,repeat:A,repeatType:D,repeatDelay:k,type:I,onUpdate:F,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const V=this.currentTime-w*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?V<0:V>s;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let Z=this.currentTime,K=r;if(A){const ye=Math.min(this.currentTime,s)/i;let _e=Math.floor(ye),ae=ye%1;!ae&&ye>=1&&(ae=1),ae===1&&_e--,_e=Math.min(_e,A+1),!!(_e%2)&&(D==="reverse"?(ae=1-ae,k&&(ae-=k/i)):D==="mirror"&&(K=h)),Z=Pg(0,1,ae)*i}const ee=W?{done:!1,value:T[0]}:K.next(Z);c&&(ee.value=c(ee.value));let{done:se}=ee;!W&&g!==null&&(se=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const he=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&se);return he&&I!==fF&&(ee.value=WN(T,this.options,j,this.speed)),F&&F(ee.value),he&&this.finish(),ee}then(t,n){return this.finished.then(t,n)}get duration(){return qp(this.calculatedDuration)}get time(){return qp(this.currentTime)}set time(t){var n;t=$p(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(du.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=qp(this.currentTime))}play(){var s,c;if(this.isStopped)return;const{driver:t=cve,startTime:n}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),(c=(s=this.options).onPlay)==null||c.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(du.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Ave(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const o0=e=>e*180/Math.PI,pF=e=>{const t=o0(Math.atan2(e[1],e[0]));return mF(t)},Mve={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:pF,rotateZ:pF,skewX:e=>o0(Math.atan(e[1])),skewY:e=>o0(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},mF=e=>(e=e%360,e<0&&(e+=360),e),b6=pF,w6=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),S6=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Rve={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:w6,scaleY:S6,scale:e=>(w6(e)+S6(e))/2,rotateX:e=>mF(o0(Math.atan2(e[6],e[5]))),rotateY:e=>mF(o0(Math.atan2(-e[2],e[0]))),rotateZ:b6,rotate:b6,skewX:e=>o0(Math.atan(e[4])),skewY:e=>o0(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function T6(e){return e.includes("scale")?1:0}function gF(e,t){if(!e||e==="none")return T6(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Rve,s=n;else{const i=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Mve,s=i}if(!s)return T6(t);const c=r[t],h=s[1].split(",").map(Pve);return typeof c=="function"?c(h):h[c]}const Dve=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return gF(n,t)};function Pve(e){return parseFloat(e.trim())}const m1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],g1=new Set(m1),E6=e=>e===p1||e===Ri,Ive=new Set(["x","y","z"]),kve=m1.filter(e=>!Ive.has(e));function Ove(e){const t=[];return kve.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const l0={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>gF(t,"x"),y:(e,{transform:t})=>gF(t,"y")};l0.translateX=l0.x;l0.translateY=l0.y;const c0=new Set;let yF=!1,vF=!1,_F=!1;function rK(){if(vF){const e=Array.from(c0).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=Ove(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([c,h])=>{var i;(i=r.getValue(c))==null||i.set(h)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vF=!1,yF=!1,c0.forEach(e=>e.complete(_F)),c0.clear()}function iK(){c0.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(vF=!0)})}function Lve(){_F=!0,iK(),rK(),_F=!1}class XN{constructor(t,n,r,s,c,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=c,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(c0.add(this),yF||(yF=!0,Us.read(iK),Us.resolveKeyframes(rK))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const c=s==null?void 0:s.get(),h=t[t.length-1];if(c!==void 0)t[0]=c;else if(r&&n){const i=r.readValue(n,h);i!=null&&(t[0]=i)}t[0]===void 0&&(t[0]=h),s&&c===void 0&&s.set(t[0])}Ave(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),c0.delete(this)}cancel(){this.state==="scheduled"&&(c0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zve=e=>e.startsWith("--");function Fve(e,t,n){zve(t)?e.style.setProperty(t,n):e.style[t]=n}const Bve=FN(()=>window.ScrollTimeline!==void 0),Nve={};function jve(e,t){const n=FN(e);return()=>Nve[t]??n()}const oK=jve(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bS=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,C6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bS([0,.65,.55,1]),circOut:bS([.55,0,1,.45]),backIn:bS([.31,.01,.66,-.59]),backOut:bS([.33,1.53,.69,.99])};function sK(e,t){if(e)return typeof e=="function"?oK()?JZ(e,t):"ease-out":$Z(e)?bS(e):Array.isArray(e)?e.map(n=>sK(n,t)||C6.easeOut):C6[e]}function Vve(e,t,n,{delay:r=0,duration:s=300,repeat:c=0,repeatType:h="loop",ease:i="easeOut",times:g}={},w=void 0){const T={[t]:n};g&&(T.offset=g);const A=sK(i,s);Array.isArray(A)&&(T.easing=A);const D={delay:r,duration:s,easing:Array.isArray(A)?"linear":A,fill:"both",iterations:c+1,direction:h==="reverse"?"alternate":"normal"};return w&&(D.pseudoElement=w),e.animate(T,D)}function aK(e){return typeof e=="function"&&"applyToOptions"in e}function Uve({type:e,...t}){return aK(e)&&oK()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class $ve extends YN{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:c,allowFlatten:h=!1,finalKeyframe:i,onComplete:g}=t;this.isPseudoElement=!!c,this.allowFlatten=h,this.options=t,zN(typeof t.type!="string");const w=Uve(t);this.animation=Vve(n,r,s,w,c),w.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const T=WN(s,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(T):Fve(n,r,T),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return qp(Number(t))}get time(){return qp(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=$p(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Bve()?(this.animation.timeline=t,lh):n(this)}}const lK={anticipate:NZ,backInOut:BZ,circInOut:VZ};function qve(e){return e in lK}function Hve(e){typeof e.ease=="string"&&qve(e.ease)&&(e.ease=lK[e.ease])}const A6=10;class Gve extends $ve{constructor(t){Hve(t),tK(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:c,...h}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const i=new nK({...h,autoplay:!1}),g=$p(this.finishedTime??this.time);n.setWithVelocity(i.sample(g-A6).value,i.sample(g).value,A6),i.stop()}}const M6=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ky.test(e)||e==="0")&&!e.startsWith("url("));function Wve(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Yve(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const c=e[e.length-1],h=M6(s,t),i=M6(c,t);return!h||!i?!1:Wve(e)||(n==="spring"||aK(n))&&r}const Xve=new Set(["opacity","clipPath","filter","transform"]),Zve=FN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kve(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:c,type:h}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:i,transformTemplate:g}=t.owner.getProps();return Zve()&&n&&Xve.has(n)&&(n!=="transform"||!g)&&!i&&!r&&s!=="mirror"&&c!==0&&h!=="inertia"}const Qve=40;class Jve extends YN{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:c=0,repeatType:h="loop",keyframes:i,name:g,motionValue:w,element:T,...A}){var I;super(),this.stop=()=>{var F,j;this._animation&&(this._animation.stop(),(F=this.stopTimeline)==null||F.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=du.now();const D={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:c,repeatType:h,name:g,motionValue:w,element:T,...A},k=(T==null?void 0:T.KeyframeResolver)||XN;this.keyframeResolver=new k(i,(F,j,V)=>this.onKeyframesResolved(F,j,D,!V),g,w,T),(I=this.keyframeResolver)==null||I.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:c,type:h,velocity:i,delay:g,isHandoff:w,onUpdate:T}=r;this.resolvedAt=du.now(),Yve(t,c,h,i)||((Ig.instantAnimations||!g)&&(T==null||T(WN(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const D={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Qve?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},k=!w&&Kve(D)?new Gve({...D,element:D.motionValue.owner.current}):new nK(D);k.finished.then(()=>this.notifyFinished()).catch(lh),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Lve()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const e_e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function t_e(e){const t=e_e.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function cK(e,t,n=1){const[r,s]=t_e(e);if(!r)return;const c=window.getComputedStyle(t).getPropertyValue(r);if(c){const h=c.trim();return PZ(h)?parseFloat(h):h}return UN(s)?cK(s,t,n+1):s}function ZN(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const uK=new Set(["width","height","top","left","right","bottom",...m1]),n_e={test:e=>e==="auto",parse:e=>e},dK=e=>t=>t.test(e),hK=[p1,Ri,Hp,zy,Wye,Gye,n_e],R6=e=>hK.find(dK(e));function r_e(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||IZ(e):!0}const i_e=new Set(["brightness","contrast","saturate","opacity"]);function o_e(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match($N)||[];if(!r)return e;const s=n.replace(r,"");let c=i_e.has(t)?1:0;return r!==n&&(c*=100),t+"("+c+s+")"}const s_e=/\b([a-z-]*)\(.*?\)/gu,xF={...Ky,getAnimatableNone:e=>{const t=e.match(s_e);return t?t.map(o_e).join(" "):e}},D6={...p1,transform:Math.round},a_e={rotate:zy,rotateX:zy,rotateY:zy,rotateZ:zy,scale:XC,scaleX:XC,scaleY:XC,scaleZ:XC,skew:zy,skewX:zy,skewY:zy,distance:Ri,translateX:Ri,translateY:Ri,translateZ:Ri,x:Ri,y:Ri,z:Ri,perspective:Ri,transformPerspective:Ri,opacity:rT,originX:m6,originY:m6,originZ:Ri},KN={borderWidth:Ri,borderTopWidth:Ri,borderRightWidth:Ri,borderBottomWidth:Ri,borderLeftWidth:Ri,borderRadius:Ri,radius:Ri,borderTopLeftRadius:Ri,borderTopRightRadius:Ri,borderBottomRightRadius:Ri,borderBottomLeftRadius:Ri,width:Ri,maxWidth:Ri,height:Ri,maxHeight:Ri,top:Ri,right:Ri,bottom:Ri,left:Ri,padding:Ri,paddingTop:Ri,paddingRight:Ri,paddingBottom:Ri,paddingLeft:Ri,margin:Ri,marginTop:Ri,marginRight:Ri,marginBottom:Ri,marginLeft:Ri,backgroundPositionX:Ri,backgroundPositionY:Ri,...a_e,zIndex:D6,fillOpacity:rT,strokeOpacity:rT,numOctaves:D6},l_e={...KN,color:cc,backgroundColor:cc,outlineColor:cc,fill:cc,stroke:cc,borderColor:cc,borderTopColor:cc,borderRightColor:cc,borderBottomColor:cc,borderLeftColor:cc,filter:xF,WebkitFilter:xF},fK=e=>l_e[e];function pK(e,t){let n=fK(e);return n!==xF&&(n=Ky),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const c_e=new Set(["auto","none","0"]);function u_e(e,t,n){let r=0,s;for(;r<e.length&&!s;){const c=e[r];typeof c=="string"&&!c_e.has(c)&&iT(c).values.length&&(s=e[r]),r++}if(s&&n)for(const c of t)e[c]=pK(n,s)}class d_e extends XN{constructor(t,n,r,s,c){super(t,n,r,s,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let w=t[g];if(typeof w=="string"&&(w=w.trim(),UN(w))){const T=cK(w,n.current);T!==void 0&&(t[g]=T),g===t.length-1&&(this.finalKeyframe=w)}}if(this.resolveNoneKeyframes(),!uK.has(r)||t.length!==2)return;const[s,c]=t,h=R6(s),i=R6(c);if(h!==i)if(E6(h)&&E6(i))for(let g=0;g<t.length;g++){const w=t[g];typeof w=="string"&&(t[g]=parseFloat(w))}else l0[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||r_e(t[s]))&&r.push(s);r.length&&u_e(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=l0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var i;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const c=r.length-1,h=r[c];r[c]=l0[n](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(i=this.removedTransforms)!=null&&i.length&&this.removedTransforms.forEach(([g,w])=>{t.getValue(g).set(w)}),this.resolveNoneKeyframes()}}function h_e(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const P6=30,f_e=e=>!isNaN(parseFloat(e));class p_e{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var h,i;const c=du.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const g of this.dependents)g.dirty();s&&((i=this.events.renderRequest)==null||i.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=du.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=f_e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new BN);const r=this.events[t].add(n);return t==="change"?()=>{r(),Us.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=du.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>P6)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,P6);return kZ(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oT(e,t){return new p_e(e,t)}const mK=(e,t)=>t&&typeof e=="number"?t.transform(e):e,{schedule:QN}=qZ(queueMicrotask,!1),bf={x:!1,y:!1};function gK(){return bf.x||bf.y}function m_e(e){return e==="x"||e==="y"?bf[e]?null:(bf[e]=!0,()=>{bf[e]=!1}):bf.x||bf.y?null:(bf.x=bf.y=!0,()=>{bf.x=bf.y=!1})}function yK(e,t){const n=h_e(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function I6(e){return!(e.pointerType==="touch"||gK())}function g_e(e,t,n={}){const[r,s,c]=yK(e,n),h=i=>{if(!I6(i))return;const{target:g}=i,w=t(g,i);if(typeof w!="function"||!g)return;const T=A=>{I6(A)&&(w(A),g.removeEventListener("pointerleave",T))};g.addEventListener("pointerleave",T,s)};return r.forEach(i=>{i.addEventListener("pointerenter",h,s)}),c}const vK=(e,t)=>t?e===t?!0:vK(e,t.parentElement):!1,JN=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,y_e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function v_e(e){return y_e.has(e.tagName)||e.tabIndex!==-1}const eM=new WeakSet;function k6(e){return t=>{t.key==="Enter"&&e(t)}}function NI(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const __e=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=k6(()=>{if(eM.has(n))return;NI(n,"down");const s=k6(()=>{NI(n,"up")}),c=()=>NI(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",c,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function O6(e){return JN(e)&&!gK()}function x_e(e,t,n={}){const[r,s,c]=yK(e,n),h=i=>{const g=i.currentTarget;if(!O6(i))return;eM.add(g);const w=t(g,i),T=(k,I)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",D),eM.has(g)&&eM.delete(g),O6(k)&&typeof w=="function"&&w(k,{success:I})},A=k=>{T(k,g===window||g===document||n.useGlobalTarget||vK(g,k.target))},D=k=>{T(k,!1)};window.addEventListener("pointerup",A,s),window.addEventListener("pointercancel",D,s)};return r.forEach(i=>{(n.useGlobalTarget?window:i).addEventListener("pointerdown",h,s),i instanceof HTMLElement&&(i.addEventListener("focus",w=>__e(w,s)),!v_e(i)&&!i.hasAttribute("tabindex")&&(i.tabIndex=0))}),c}const b_e=[...hK,cc,Ky],w_e=e=>b_e.find(dK(e)),_K=q.createContext({strict:!1}),L6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xb={};for(const e in L6)Xb[e]={isEnabled:t=>L6[e].some(n=>!!t[n])};function S_e(e){for(const t in e)Xb[t]={...Xb[t],...e[t]}}const T_e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function XM(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||T_e.has(e)}let xK=e=>!XM(e);function E_e(e){e&&(xK=t=>t.startsWith("on")?!XM(t):e(t))}try{E_e(require("@emotion/is-prop-valid").default)}catch{}function C_e(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(xK(s)||n===!0&&XM(s)||!t&&!XM(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function A_e(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const oD=q.createContext({});function sD(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function sT(e){return typeof e=="string"||Array.isArray(e)}const ej=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tj=["initial",...ej];function aD(e){return sD(e.animate)||tj.some(t=>sT(e[t]))}function bK(e){return!!(aD(e)||e.variants)}function M_e(e,t){if(aD(e)){const{initial:n,animate:r}=e;return{initial:n===!1||sT(n)?n:void 0,animate:sT(r)?r:void 0}}return e.inherit!==!1?t:{}}function R_e(e){const{initial:t,animate:n}=M_e(e,q.useContext(oD));return q.useMemo(()=>({initial:t,animate:n}),[z6(t),z6(n)])}function z6(e){return Array.isArray(e)?e.join(" "):e}const D_e=Symbol.for("motionComponentSymbol");function xb(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function P_e(e,t,n){return q.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):xb(n)&&(n.current=r))},[t])}const nj=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),I_e="framerAppearId",wK="data-"+nj(I_e),SK=q.createContext({});function k_e(e,t,n,r,s){var F,j;const{visualElement:c}=q.useContext(oD),h=q.useContext(_K),i=q.useContext(kN),g=q.useContext(DZ).reducedMotion,w=q.useRef(null);r=r||h.renderer,!w.current&&r&&(w.current=r(e,{visualState:t,parent:c,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:g}));const T=w.current,A=q.useContext(SK);T&&!T.projection&&s&&(T.type==="html"||T.type==="svg")&&O_e(w.current,n,s,A);const D=q.useRef(!1);q.useInsertionEffect(()=>{T&&D.current&&T.update(n,i)});const k=n[wK],I=q.useRef(!!k&&!((F=window.MotionHandoffIsComplete)!=null&&F.call(window,k))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,k)));return Eye(()=>{T&&(D.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),QN.render(T.render),I.current&&T.animationState&&T.animationState.animateChanges())}),q.useEffect(()=>{T&&(!I.current&&T.animationState&&T.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,k)}),I.current=!1))}),T}function O_e(e,t,n,r){const{layoutId:s,layout:c,drag:h,dragConstraints:i,layoutScroll:g,layoutRoot:w,layoutCrossfade:T}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:TK(e.parent)),e.projection.setOptions({layoutId:s,layout:c,alwaysMeasureLayout:!!h||i&&xb(i),visualElement:e,animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,crossfade:T,layoutScroll:g,layoutRoot:w})}function TK(e){if(e)return e.options.allowProjection!==!1?e.projection:TK(e.parent)}function L_e({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&S_e(e);function c(i,g){let w;const T={...q.useContext(DZ),...i,layoutId:z_e(i)},{isStatic:A}=T,D=R_e(i),k=r(i,A);if(!A&&IN){F_e();const I=B_e(T);w=I.MeasureLayout,D.visualElement=k_e(s,k,T,t,I.ProjectionNode)}return $.jsxs(oD.Provider,{value:D,children:[w&&D.visualElement?$.jsx(w,{visualElement:D.visualElement,...T}):null,n(s,i,P_e(k,D.visualElement,g),k,A,D.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const h=q.forwardRef(c);return h[D_e]=s,h}function z_e({layoutId:e}){const t=q.useContext(RZ).id;return t&&e!==void 0?t+"-"+e:e}function F_e(e,t){q.useContext(_K).strict}function B_e(e){const{drag:t,layout:n}=Xb;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const aT={};function N_e(e){for(const t in e)aT[t]=e[t],VN(t)&&(aT[t].isCSSVariable=!0)}function EK(e,{layout:t,layoutId:n}){return g1.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!aT[e]||e==="opacity")}const hc=e=>!!(e&&e.getVelocity),j_e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},V_e=m1.length;function U_e(e,t,n){let r="",s=!0;for(let c=0;c<V_e;c++){const h=m1[c],i=e[h];if(i===void 0)continue;let g=!0;if(typeof i=="number"?g=i===(h.startsWith("scale")?1:0):g=parseFloat(i)===0,!g||n){const w=mK(i,KN[h]);if(!g){s=!1;const T=j_e[h]||h;r+=`${T}(${w}) `}n&&(t[h]=w)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function rj(e,t,n){const{style:r,vars:s,transformOrigin:c}=e;let h=!1,i=!1;for(const g in t){const w=t[g];if(g1.has(g)){h=!0;continue}else if(VN(g)){s[g]=w;continue}else{const T=mK(w,KN[g]);g.startsWith("origin")?(i=!0,c[g]=T):r[g]=T}}if(t.transform||(h||n?r.transform=U_e(t,e.transform,n):r.transform&&(r.transform="none")),i){const{originX:g="50%",originY:w="50%",originZ:T=0}=c;r.transformOrigin=`${g} ${w} ${T}`}}const ij=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function CK(e,t,n){for(const r in t)!hc(t[r])&&!EK(r,n)&&(e[r]=t[r])}function $_e({transformTemplate:e},t){return q.useMemo(()=>{const n=ij();return rj(n,t,e),Object.assign({},n.vars,n.style)},[t])}function q_e(e,t){const n=e.style||{},r={};return CK(r,n,e),Object.assign(r,$_e(e,t)),r}function H_e(e,t){const n={},r=q_e(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const G_e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oj(e){return typeof e!="string"||e.includes("-")?!1:!!(G_e.indexOf(e)>-1||/[A-Z]/u.test(e))}const W_e={offset:"stroke-dashoffset",array:"stroke-dasharray"},Y_e={offset:"strokeDashoffset",array:"strokeDasharray"};function X_e(e,t,n=1,r=0,s=!0){e.pathLength=1;const c=s?W_e:Y_e;e[c.offset]=Ri.transform(-r);const h=Ri.transform(t),i=Ri.transform(n);e[c.array]=`${h} ${i}`}function AK(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:c=1,pathOffset:h=0,...i},g,w,T){if(rj(e,i,w),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:A,style:D}=e;A.transform&&(D.transform=A.transform,delete A.transform),(D.transform||A.transformOrigin)&&(D.transformOrigin=A.transformOrigin??"50% 50%",delete A.transformOrigin),D.transform&&(D.transformBox=(T==null?void 0:T.transformBox)??"fill-box",delete A.transformBox),t!==void 0&&(A.x=t),n!==void 0&&(A.y=n),r!==void 0&&(A.scale=r),s!==void 0&&X_e(A,s,c,h,!1)}const MK=()=>({...ij(),attrs:{}}),RK=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Z_e(e,t,n,r){const s=q.useMemo(()=>{const c=MK();return AK(c,t,RK(r),e.transformTemplate,e.style),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};CK(c,e.style,e),s.style={...c,...s.style}}return s}function K_e(e=!1){return(n,r,s,{latestValues:c},h)=>{const g=(oj(n)?Z_e:H_e)(r,c,h,n),w=C_e(r,typeof n=="string",e),T=n!==q.Fragment?{...w,...g,ref:s}:{},{children:A}=r,D=q.useMemo(()=>hc(A)?A.get():A,[A]);return q.createElement(n,{...T,children:D})}}function F6(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function sj(e,t,n,r){if(typeof t=="function"){const[s,c]=F6(r);t=t(n!==void 0?n:e.custom,s,c)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,c]=F6(r);t=t(n!==void 0?n:e.custom,s,c)}return t}function tM(e){return hc(e)?e.get():e}function Q_e({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:J_e(n,r,s,e),renderState:t()}}const DK=e=>(t,n)=>{const r=q.useContext(oD),s=q.useContext(kN),c=()=>Q_e(e,t,r,s);return n?c():Tye(c)};function J_e(e,t,n,r){const s={},c=r(e,{});for(const D in c)s[D]=tM(c[D]);let{initial:h,animate:i}=e;const g=aD(e),w=bK(e);t&&w&&!g&&e.inherit!==!1&&(h===void 0&&(h=t.initial),i===void 0&&(i=t.animate));let T=n?n.initial===!1:!1;T=T||h===!1;const A=T?i:h;if(A&&typeof A!="boolean"&&!sD(A)){const D=Array.isArray(A)?A:[A];for(let k=0;k<D.length;k++){const I=sj(e,D[k]);if(I){const{transitionEnd:F,transition:j,...V}=I;for(const W in V){let Z=V[W];if(Array.isArray(Z)){const K=T?Z.length-1:0;Z=Z[K]}Z!==null&&(s[W]=Z)}for(const W in F)s[W]=F[W]}}}return s}function aj(e,t,n){var c;const{style:r}=e,s={};for(const h in r)(hc(r[h])||t.style&&hc(t.style[h])||EK(h,e)||((c=n==null?void 0:n.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(s[h]=r[h]);return s}const e0e={useVisualState:DK({scrapeMotionValuesFromProps:aj,createRenderState:ij})};function PK(e,t,n){const r=aj(e,t,n);for(const s in e)if(hc(e[s])||hc(t[s])){const c=m1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[c]=e[s]}return r}const t0e={useVisualState:DK({scrapeMotionValuesFromProps:PK,createRenderState:MK})};function n0e(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const h={...oj(r)?t0e:e0e,preloadedFeatures:e,useRender:K_e(s),createVisualElement:t,Component:r};return L_e(h)}}function lT(e,t,n){const r=e.getProps();return sj(r,t,n!==void 0?n:r.custom,e)}const bF=e=>Array.isArray(e);function r0e(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,oT(n))}function i0e(e){return bF(e)?e[e.length-1]||0:e}function o0e(e,t){const n=lT(e,t);let{transitionEnd:r={},transition:s={},...c}=n||{};c={...c,...r};for(const h in c){const i=i0e(c[h]);r0e(e,h,i)}}function s0e(e){return!!(hc(e)&&e.add)}function wF(e,t){const n=e.getValue("willChange");if(s0e(n))return n.add(t);if(!n&&Ig.WillChange){const r=new Ig.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function IK(e){return e.props[wK]}const a0e=e=>e!==null;function l0e(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(a0e),c=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[c]}const c0e={type:"spring",stiffness:500,damping:25,restSpeed:10},u0e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),d0e={type:"keyframes",duration:.8},h0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},f0e=(e,{keyframes:t})=>t.length>2?d0e:g1.has(e)?e.startsWith("scale")?u0e(t[1]):c0e:h0e;function p0e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:c,repeatType:h,repeatDelay:i,from:g,elapsed:w,...T}){return!!Object.keys(T).length}const lj=(e,t,n,r={},s,c)=>h=>{const i=ZN(r,e)||{},g=i.delay||r.delay||0;let{elapsed:w=0}=r;w=w-$p(g);const T={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...i,delay:-w,onUpdate:D=>{t.set(D),i.onUpdate&&i.onUpdate(D)},onComplete:()=>{h(),i.onComplete&&i.onComplete()},name:e,motionValue:t,element:c?void 0:s};p0e(i)||Object.assign(T,f0e(e,T)),T.duration&&(T.duration=$p(T.duration)),T.repeatDelay&&(T.repeatDelay=$p(T.repeatDelay)),T.from!==void 0&&(T.keyframes[0]=T.from);let A=!1;if((T.type===!1||T.duration===0&&!T.repeatDelay)&&(T.duration=0,T.delay===0&&(A=!0)),(Ig.instantAnimations||Ig.skipAnimations)&&(A=!0,T.duration=0,T.delay=0),T.allowFlatten=!i.type&&!i.ease,A&&!c&&t.get()!==void 0){const D=l0e(T.keyframes,i);if(D!==void 0){Us.update(()=>{T.onUpdate(D),T.onComplete()});return}}return new Jve(T)};function m0e({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function kK(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:h,...i}=t;r&&(c=r);const g=[],w=s&&e.animationState&&e.animationState.getState()[s];for(const T in i){const A=e.getValue(T,e.latestValues[T]??null),D=i[T];if(D===void 0||w&&m0e(w,T))continue;const k={delay:n,...ZN(c||{},T)},I=A.get();if(I!==void 0&&!A.isAnimating&&!Array.isArray(D)&&D===I&&!k.velocity)continue;let F=!1;if(window.MotionHandoffAnimation){const V=IK(e);if(V){const W=window.MotionHandoffAnimation(V,T,Us);W!==null&&(k.startTime=W,F=!0)}}wF(e,T),A.start(lj(T,A,D,e.shouldReduceMotion&&uK.has(T)?{type:!1}:k,e,F));const j=A.animation;j&&g.push(j)}return h&&Promise.all(g).then(()=>{Us.update(()=>{h&&o0e(e,h)})}),g}function SF(e,t,n={}){var g;const r=lT(e,t,n.type==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const c=r?()=>Promise.all(kK(e,r,n)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(w=0)=>{const{delayChildren:T=0,staggerChildren:A,staggerDirection:D}=s;return g0e(e,t,T+w,A,D,n)}:()=>Promise.resolve(),{when:i}=s;if(i){const[w,T]=i==="beforeChildren"?[c,h]:[h,c];return w().then(()=>T())}else return Promise.all([c(),h(n.delay)])}function g0e(e,t,n=0,r=0,s=1,c){const h=[],i=(e.variantChildren.size-1)*r,g=s===1?(w=0)=>w*r:(w=0)=>i-w*r;return Array.from(e.variantChildren).sort(y0e).forEach((w,T)=>{w.notify("AnimationStart",t),h.push(SF(w,t,{...c,delay:n+g(T)}).then(()=>w.notify("AnimationComplete",t)))}),Promise.all(h)}function y0e(e,t){return e.sortNodePosition(t)}function v0e(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(c=>SF(e,c,n));r=Promise.all(s)}else if(typeof t=="string")r=SF(e,t,n);else{const s=typeof t=="function"?lT(e,t,n.custom):t;r=Promise.all(kK(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function OK(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const _0e=tj.length;function LK(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?LK(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<_0e;n++){const r=tj[n],s=e.props[r];(sT(s)||s===!1)&&(t[r]=s)}return t}const x0e=[...ej].reverse(),b0e=ej.length;function w0e(e){return t=>Promise.all(t.map(({animation:n,options:r})=>v0e(e,n,r)))}function S0e(e){let t=w0e(e),n=B6(),r=!0;const s=g=>(w,T)=>{var D;const A=lT(e,T,g==="exit"?(D=e.presenceContext)==null?void 0:D.custom:void 0);if(A){const{transition:k,transitionEnd:I,...F}=A;w={...w,...F,...I}}return w};function c(g){t=g(e)}function h(g){const{props:w}=e,T=LK(e.parent)||{},A=[],D=new Set;let k={},I=1/0;for(let j=0;j<b0e;j++){const V=x0e[j],W=n[V],Z=w[V]!==void 0?w[V]:T[V],K=sT(Z),ee=V===g?W.isActive:null;ee===!1&&(I=j);let se=Z===T[V]&&Z!==w[V]&&K;if(se&&r&&e.manuallyAnimateOnMount&&(se=!1),W.protectedKeys={...k},!W.isActive&&ee===null||!Z&&!W.prevProp||sD(Z)||typeof Z=="boolean")continue;const he=T0e(W.prevProp,Z);let ye=he||V===g&&W.isActive&&!se&&K||j>I&&K,_e=!1;const ae=Array.isArray(Z)?Z:[Z];let be=ae.reduce(s(V),{});ee===!1&&(be={});const{prevResolvedValues:Te={}}=W,Ae={...Te,...be},Re=qe=>{ye=!0,D.has(qe)&&(_e=!0,D.delete(qe)),W.needsAnimating[qe]=!0;const it=e.getValue(qe);it&&(it.liveStyle=!1)};for(const qe in Ae){const it=be[qe],tt=Te[qe];if(k.hasOwnProperty(qe))continue;let Oe=!1;bF(it)&&bF(tt)?Oe=!OK(it,tt):Oe=it!==tt,Oe?it!=null?Re(qe):D.add(qe):it!==void 0&&D.has(qe)?Re(qe):W.protectedKeys[qe]=!0}W.prevProp=Z,W.prevResolvedValues=be,W.isActive&&(k={...k,...be}),r&&e.blockInitialAnimation&&(ye=!1),ye&&(!(se&&he)||_e)&&A.push(...ae.map(qe=>({animation:qe,options:{type:V}})))}if(D.size){const j={};if(typeof w.initial!="boolean"){const V=lT(e,Array.isArray(w.initial)?w.initial[0]:w.initial);V&&V.transition&&(j.transition=V.transition)}D.forEach(V=>{const W=e.getBaseTarget(V),Z=e.getValue(V);Z&&(Z.liveStyle=!0),j[V]=W??null}),A.push({animation:j})}let F=!!A.length;return r&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&(F=!1),r=!1,F?t(A):Promise.resolve()}function i(g,w){var A;if(n[g].isActive===w)return Promise.resolve();(A=e.variantChildren)==null||A.forEach(D=>{var k;return(k=D.animationState)==null?void 0:k.setActive(g,w)}),n[g].isActive=w;const T=h(g);for(const D in n)n[D].protectedKeys={};return T}return{animateChanges:h,setActive:i,setAnimateFunction:c,getState:()=>n,reset:()=>{n=B6(),r=!0}}}function T0e(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!OK(t,e):!1}function F_(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B6(){return{animate:F_(!0),whileInView:F_(),whileHover:F_(),whileTap:F_(),whileDrag:F_(),whileFocus:F_(),exit:F_()}}let cv=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};class E0e extends cv{constructor(t){super(t),t.animationState||(t.animationState=S0e(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();sD(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let C0e=0;class A0e extends cv{constructor(){super(...arguments),this.id=C0e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const M0e={animation:{Feature:E0e},exit:{Feature:A0e}};function cT(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function nE(e){return{point:{x:e.pageX,y:e.pageY}}}const R0e=e=>t=>JN(t)&&e(t,nE(t));function OS(e,t,n,r){return cT(e,t,R0e(n),r)}function zK({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function D0e({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function P0e(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const FK=1e-4,I0e=1-FK,k0e=1+FK,BK=.01,O0e=0-BK,L0e=0+BK;function Gc(e){return e.max-e.min}function z0e(e,t,n){return Math.abs(e-t)<=n}function N6(e,t,n,r=.5){e.origin=r,e.originPoint=Ns(t.min,t.max,e.origin),e.scale=Gc(n)/Gc(t),e.translate=Ns(n.min,n.max,e.origin)-e.originPoint,(e.scale>=I0e&&e.scale<=k0e||isNaN(e.scale))&&(e.scale=1),(e.translate>=O0e&&e.translate<=L0e||isNaN(e.translate))&&(e.translate=0)}function LS(e,t,n,r){N6(e.x,t.x,n.x,r?r.originX:void 0),N6(e.y,t.y,n.y,r?r.originY:void 0)}function j6(e,t,n){e.min=n.min+t.min,e.max=e.min+Gc(t)}function F0e(e,t,n){j6(e.x,t.x,n.x),j6(e.y,t.y,n.y)}function V6(e,t,n){e.min=t.min-n.min,e.max=e.min+Gc(t)}function zS(e,t,n){V6(e.x,t.x,n.x),V6(e.y,t.y,n.y)}const U6=()=>({translate:0,scale:1,origin:0,originPoint:0}),bb=()=>({x:U6(),y:U6()}),$6=()=>({min:0,max:0}),ha=()=>({x:$6(),y:$6()});function Jd(e){return[e("x"),e("y")]}function jI(e){return e===void 0||e===1}function TF({scale:e,scaleX:t,scaleY:n}){return!jI(e)||!jI(t)||!jI(n)}function W_(e){return TF(e)||NK(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function NK(e){return q6(e.x)||q6(e.y)}function q6(e){return e&&e!=="0%"}function ZM(e,t,n){const r=e-n,s=t*r;return n+s}function H6(e,t,n,r,s){return s!==void 0&&(e=ZM(e,s,r)),ZM(e,n,r)+t}function EF(e,t=0,n=1,r,s){e.min=H6(e.min,t,n,r,s),e.max=H6(e.max,t,n,r,s)}function jK(e,{x:t,y:n}){EF(e.x,t.translate,t.scale,t.originPoint),EF(e.y,n.translate,n.scale,n.originPoint)}const G6=.999999999999,W6=1.0000000000001;function B0e(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let c,h;for(let i=0;i<s;i++){c=n[i],h=c.projectionDelta;const{visualElement:g}=c.options;g&&g.props.style&&g.props.style.display==="contents"||(r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Sb(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,jK(e,h)),r&&W_(c.latestValues)&&Sb(e,c.latestValues))}t.x<W6&&t.x>G6&&(t.x=1),t.y<W6&&t.y>G6&&(t.y=1)}function wb(e,t){e.min=e.min+t,e.max=e.max+t}function Y6(e,t,n,r,s=.5){const c=Ns(e.min,e.max,s);EF(e,t,n,c,r)}function Sb(e,t){Y6(e.x,t.x,t.scaleX,t.scale,t.originX),Y6(e.y,t.y,t.scaleY,t.scale,t.originY)}function VK(e,t){return zK(P0e(e.getBoundingClientRect(),t))}function N0e(e,t,n){const r=VK(e,n),{scroll:s}=t;return s&&(wb(r.x,s.offset.x),wb(r.y,s.offset.y)),r}const UK=({current:e})=>e?e.ownerDocument.defaultView:null,X6=(e,t)=>Math.abs(e-t);function j0e(e,t){const n=X6(e.x,t.x),r=X6(e.y,t.y);return Math.sqrt(n**2+r**2)}class $K{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=UI(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,k=j0e(A.offset,{x:0,y:0})>=3;if(!D&&!k)return;const{point:I}=A,{timestamp:F}=Ol;this.history.push({...I,timestamp:F});const{onStart:j,onMove:V}=this.handlers;D||(j&&j(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,A)},this.handlePointerMove=(A,D)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=VI(D,this.transformPagePoint),Us.update(this.updatePoint,!0)},this.handlePointerUp=(A,D)=>{this.end();const{onEnd:k,onSessionEnd:I,resumeAnimation:F}=this.handlers;if(this.dragSnapToOrigin&&F&&F(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=UI(A.type==="pointercancel"?this.lastMoveEventInfo:VI(D,this.transformPagePoint),this.history);this.startEvent&&k&&k(A,j),I&&I(A,j)},!JN(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const h=nE(t),i=VI(h,this.transformPagePoint),{point:g}=i,{timestamp:w}=Ol;this.history=[{...g,timestamp:w}];const{onSessionStart:T}=n;T&&T(t,UI(i,this.history)),this.removeListeners=JT(OS(this.contextWindow,"pointermove",this.handlePointerMove),OS(this.contextWindow,"pointerup",this.handlePointerUp),OS(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zy(this.updatePoint)}}function VI(e,t){return t?{point:t(e.point)}:e}function Z6(e,t){return{x:e.x-t.x,y:e.y-t.y}}function UI({point:e},t){return{point:e,delta:Z6(e,qK(t)),offset:Z6(e,V0e(t)),velocity:U0e(t,.1)}}function V0e(e){return e[0]}function qK(e){return e[e.length-1]}function U0e(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=qK(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>$p(t)));)n--;if(!r)return{x:0,y:0};const c=qp(s.timestamp-r.timestamp);if(c===0)return{x:0,y:0};const h={x:(s.x-r.x)/c,y:(s.y-r.y)/c};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function $0e(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ns(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ns(n,e,r.max):Math.min(e,n)),e}function K6(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function q0e(e,{top:t,left:n,bottom:r,right:s}){return{x:K6(e.x,n,s),y:K6(e.y,t,r)}}function Q6(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function H0e(e,t){return{x:Q6(e.x,t.x),y:Q6(e.y,t.y)}}function G0e(e,t){let n=.5;const r=Gc(e),s=Gc(t);return s>r?n=nT(t.min,t.max-r,e.min):r>s&&(n=nT(e.min,e.max-s,t.min)),Pg(0,1,n)}function W0e(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const CF=.35;function Y0e(e=CF){return e===!1?e=0:e===!0&&(e=CF),{x:J6(e,"left","right"),y:J6(e,"top","bottom")}}function J6(e,t,n){return{min:eq(e,t),max:eq(e,n)}}function eq(e,t){return typeof e=="number"?e:e[t]||0}const X0e=new WeakMap;class Z0e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ha(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=T=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nE(T).point)},c=(T,A)=>{const{drag:D,dragPropagation:k,onDragStart:I}=this.getProps();if(D&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=m_e(D),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jd(j=>{let V=this.getAxisMotionValue(j).get()||0;if(Hp.test(V)){const{projection:W}=this.visualElement;if(W&&W.layout){const Z=W.layout.layoutBox[j];Z&&(V=Gc(Z)*(parseFloat(V)/100))}}this.originPoint[j]=V}),I&&Us.postRender(()=>I(T,A)),wF(this.visualElement,"transform");const{animationState:F}=this.visualElement;F&&F.setActive("whileDrag",!0)},h=(T,A)=>{const{dragPropagation:D,dragDirectionLock:k,onDirectionLock:I,onDrag:F}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:j}=A;if(k&&this.currentDirection===null){this.currentDirection=K0e(j),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",A.point,j),this.updateAxis("y",A.point,j),this.visualElement.render(),F&&F(T,A)},i=(T,A)=>this.stop(T,A),g=()=>Jd(T=>{var A;return this.getAnimationState(T)==="paused"&&((A=this.getAxisMotionValue(T).animation)==null?void 0:A.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new $K(t,{onSessionStart:s,onStart:c,onMove:h,onSessionEnd:i,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,contextWindow:UK(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:c}=this.getProps();c&&Us.postRender(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!ZC(t,s,this.currentDirection))return;const c=this.getAxisMotionValue(t);let h=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(h=$0e(h,this.constraints[t],this.elastic[t])),c.set(h)}resolveConstraints(){var c;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,s=this.constraints;t&&xb(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=q0e(r.layoutBox,t):this.constraints=!1,this.elastic=Y0e(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Jd(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=W0e(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!xb(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const c=N0e(r,s.root,this.visualElement.getTransformPagePoint());let h=H0e(s.layout.layoutBox,c);if(n){const i=n(D0e(h));this.hasMutatedConstraints=!!i,i&&(h=zK(i))}return h}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:c,dragSnapToOrigin:h,onDragTransitionEnd:i}=this.getProps(),g=this.constraints||{},w=Jd(T=>{if(!ZC(T,n,this.currentDirection))return;let A=g&&g[T]||{};h&&(A={min:0,max:0});const D=s?200:1e6,k=s?40:1e7,I={type:"inertia",velocity:r?t[T]:0,bounceStiffness:D,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...c,...A};return this.startAxisValueAnimation(T,I)});return Promise.all(w).then(i)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return wF(this.visualElement,t),r.start(lj(t,r,0,n,this.visualElement,!1))}stopAnimation(){Jd(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Jd(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Jd(n=>{const{drag:r}=this.getProps();if(!ZC(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,c=this.getAxisMotionValue(n);if(s&&s.layout){const{min:h,max:i}=s.layout.layoutBox[n];c.set(t[n]-Ns(h,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xb(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Jd(h=>{const i=this.getAxisMotionValue(h);if(i&&this.constraints!==!1){const g=i.get();s[h]=G0e({min:g,max:g},this.constraints[h])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Jd(h=>{if(!ZC(h,t,null))return;const i=this.getAxisMotionValue(h),{min:g,max:w}=this.constraints[h];i.set(Ns(g,w,s[h]))})}addListeners(){if(!this.visualElement.current)return;X0e.set(this.visualElement,this);const t=this.visualElement.current,n=OS(t,"pointerdown",g=>{const{drag:w,dragListener:T=!0}=this.getProps();w&&T&&this.start(g)}),r=()=>{const{dragConstraints:g}=this.getProps();xb(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,c=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Us.read(r);const h=cT(window,"resize",()=>this.scalePositionWithinConstraints()),i=s.addEventListener("didUpdate",({delta:g,hasLayoutChanged:w})=>{this.isDragging&&w&&(Jd(T=>{const A=this.getAxisMotionValue(T);A&&(this.originPoint[T]+=g[T].translate,A.set(A.get()+g[T].translate))}),this.visualElement.render())});return()=>{h(),n(),c(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:c=!1,dragElastic:h=CF,dragMomentum:i=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:c,dragElastic:h,dragMomentum:i}}}function ZC(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function K0e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Q0e extends cv{constructor(t){super(t),this.removeGroupControls=lh,this.removeListeners=lh,this.controls=new Z0e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lh}unmount(){this.removeGroupControls(),this.removeListeners()}}const tq=e=>(t,n)=>{e&&Us.postRender(()=>e(t,n))};class J0e extends cv{constructor(){super(...arguments),this.removePointerDownListener=lh}onPointerDown(t){this.session=new $K(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UK(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:tq(t),onStart:tq(n),onMove:r,onEnd:(c,h)=>{delete this.session,s&&Us.postRender(()=>s(c,h))}}}mount(){this.removePointerDownListener=OS(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nM={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nq(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Hw={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ri.test(e))e=parseFloat(e);else return e;const n=nq(e,t.target.x),r=nq(e,t.target.y);return`${n}% ${r}%`}},exe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Ky.parse(e);if(s.length>5)return r;const c=Ky.createTransformer(e),h=typeof s[0]!="number"?1:0,i=n.x.scale*t.x,g=n.y.scale*t.y;s[0+h]/=i,s[1+h]/=g;const w=Ns(i,g,.5);return typeof s[2+h]=="number"&&(s[2+h]/=w),typeof s[3+h]=="number"&&(s[3+h]/=w),c(s)}};class txe extends q.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:c}=t;N_e(nxe),c&&(n.group&&n.group.add(c),r&&r.register&&s&&r.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),nM.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:c}=this.props,{projection:h}=r;return h&&(h.isPresent=c,s||t.layoutDependency!==n||n===void 0||t.isPresent!==c?h.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?h.promote():h.relegate()||Us.postRender(()=>{const i=h.getStack();(!i||!i.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),QN.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function HK(e){const[t,n]=Cye(),r=q.useContext(RZ);return $.jsx(txe,{...e,layoutGroup:r,switchLayoutGroup:q.useContext(SK),isPresent:t,safeToRemove:n})}const nxe={borderRadius:{...Hw,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hw,borderTopRightRadius:Hw,borderBottomLeftRadius:Hw,borderBottomRightRadius:Hw,boxShadow:exe};function rxe(e,t,n){const r=hc(e)?e:oT(e);return r.start(lj("",r,t,n)),r.animation}function ixe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const oxe=(e,t)=>e.depth-t.depth;class sxe{constructor(){this.children=[],this.isDirty=!1}add(t){ON(this.children,t),this.isDirty=!0}remove(t){LN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(oxe),this.isDirty=!1,this.children.forEach(t)}}function axe(e,t){const n=du.now(),r=({timestamp:s})=>{const c=s-n;c>=t&&(Zy(r),e(c-t))};return Us.setup(r,!0),()=>Zy(r)}const GK=["TopLeft","TopRight","BottomLeft","BottomRight"],lxe=GK.length,rq=e=>typeof e=="string"?parseFloat(e):e,iq=e=>typeof e=="number"||Ri.test(e);function cxe(e,t,n,r,s,c){s?(e.opacity=Ns(0,n.opacity??1,uxe(r)),e.opacityExit=Ns(t.opacity??1,0,dxe(r))):c&&(e.opacity=Ns(t.opacity??1,n.opacity??1,r));for(let h=0;h<lxe;h++){const i=`border${GK[h]}Radius`;let g=oq(t,i),w=oq(n,i);if(g===void 0&&w===void 0)continue;g||(g=0),w||(w=0),g===0||w===0||iq(g)===iq(w)?(e[i]=Math.max(Ns(rq(g),rq(w),r),0),(Hp.test(w)||Hp.test(g))&&(e[i]+="%")):e[i]=w}(t.rotate||n.rotate)&&(e.rotate=Ns(t.rotate||0,n.rotate||0,r))}function oq(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const uxe=WK(0,.5,jZ),dxe=WK(.5,.95,lh);function WK(e,t,n){return r=>r<e?0:r>t?1:n(nT(e,t,r))}function sq(e,t){e.min=t.min,e.max=t.max}function Yd(e,t){sq(e.x,t.x),sq(e.y,t.y)}function aq(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function lq(e,t,n,r,s){return e-=t,e=ZM(e,1/n,r),s!==void 0&&(e=ZM(e,1/s,r)),e}function hxe(e,t=0,n=1,r=.5,s,c=e,h=e){if(Hp.test(t)&&(t=parseFloat(t),t=Ns(h.min,h.max,t/100)-h.min),typeof t!="number")return;let i=Ns(c.min,c.max,r);e===c&&(i-=t),e.min=lq(e.min,t,n,i,s),e.max=lq(e.max,t,n,i,s)}function cq(e,t,[n,r,s],c,h){hxe(e,t[n],t[r],t[s],t.scale,c,h)}const fxe=["x","scaleX","originX"],pxe=["y","scaleY","originY"];function uq(e,t,n,r){cq(e.x,t,fxe,n?n.x:void 0,r?r.x:void 0),cq(e.y,t,pxe,n?n.y:void 0,r?r.y:void 0)}function dq(e){return e.translate===0&&e.scale===1}function YK(e){return dq(e.x)&&dq(e.y)}function hq(e,t){return e.min===t.min&&e.max===t.max}function mxe(e,t){return hq(e.x,t.x)&&hq(e.y,t.y)}function fq(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function XK(e,t){return fq(e.x,t.x)&&fq(e.y,t.y)}function pq(e){return Gc(e.x)/Gc(e.y)}function mq(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class gxe{constructor(){this.members=[]}add(t){ON(this.members,t),t.scheduleRender()}remove(t){if(LN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const c=this.members[s];if(c.isPresent!==!1){r=c;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yxe(e,t,n){let r="";const s=e.x.translate/t.x,c=e.y.translate/t.y,h=(n==null?void 0:n.z)||0;if((s||c||h)&&(r=`translate3d(${s}px, ${c}px, ${h}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:w,rotate:T,rotateX:A,rotateY:D,skewX:k,skewY:I}=n;w&&(r=`perspective(${w}px) ${r}`),T&&(r+=`rotate(${T}deg) `),A&&(r+=`rotateX(${A}deg) `),D&&(r+=`rotateY(${D}deg) `),k&&(r+=`skewX(${k}deg) `),I&&(r+=`skewY(${I}deg) `)}const i=e.x.scale*t.x,g=e.y.scale*t.y;return(i!==1||g!==1)&&(r+=`scale(${i}, ${g})`),r||"none"}const $I=["","X","Y","Z"],vxe={visibility:"hidden"},gq=1e3;let _xe=0;function qI(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ZK(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=IK(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:c}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Us,!(s||c))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ZK(r)}function KK({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(h={},i=t==null?void 0:t()){this.id=_xe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wxe),this.nodes.forEach(Axe),this.nodes.forEach(Mxe),this.nodes.forEach(Sxe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new sxe)}addEventListener(h,i){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new BN),this.eventHandlers.get(h).add(i)}notifyListeners(h,...i){const g=this.eventHandlers.get(h);g&&g.notify(...i)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=ixe(h),this.instance=h;const{layoutId:i,layout:g,visualElement:w}=this.options;if(w&&!w.current&&w.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||i)&&(this.isLayoutDirty=!0),e){let T;const A=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,T&&T(),T=axe(A,250),nM.hasAnimatedSinceResize&&(nM.hasAnimatedSinceResize=!1,this.nodes.forEach(vq))})}i&&this.root.registerSharedNode(i,this),this.options.animate!==!1&&w&&(i||g)&&this.addEventListener("didUpdate",({delta:T,hasLayoutChanged:A,hasRelativeLayoutChanged:D,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||w.getDefaultTransition()||kxe,{onLayoutAnimationStart:F,onLayoutAnimationComplete:j}=w.getProps(),V=!this.targetLayout||!XK(this.targetLayout,k),W=!A&&D;if(this.options.layoutRoot||this.resumeFrom||W||A&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(T,W);const Z={...ZN(I,"layout"),onPlay:F,onComplete:j};(w.shouldReduceMotion||this.options.layoutRoot)&&(Z.delay=0,Z.type=!1),this.startAnimation(Z)}else A||vq(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zy(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rxe),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ZK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let T=0;T<this.path.length;T++){const A=this.path[T];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:i,layout:g}=this.options;if(i===void 0&&!g)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yq);return}this.isUpdating||this.nodes.forEach(Exe),this.isUpdating=!1,this.nodes.forEach(Cxe),this.nodes.forEach(xxe),this.nodes.forEach(bxe),this.clearAllSnapshots();const i=du.now();Ol.delta=Pg(0,1e3/60,i-Ol.timestamp),Ol.timestamp=i,Ol.isProcessing=!0,LI.update.process(Ol),LI.preRender.process(Ol),LI.render.process(Ol),Ol.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,QN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Txe),this.sharedNodes.forEach(Dxe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Us.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Us.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gc(this.snapshot.measuredBox.x)&&!Gc(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ha(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:i}=this.options;i&&i.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let i=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(i=!1),i&&this.instance){const g=r(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!s)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,i=this.projectionDelta&&!YK(this.projectionDelta),g=this.getTransformTemplate(),w=g?g(this.latestValues,""):void 0,T=w!==this.prevTransformTemplateValue;h&&this.instance&&(i||W_(this.latestValues)||T)&&(s(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const i=this.measurePageBox();let g=this.removeElementScroll(i);return h&&(g=this.removeTransform(g)),Oxe(g),{animationId:this.root.animationId,measuredBox:i,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var w;const{visualElement:h}=this.options;if(!h)return ha();const i=h.measureViewportBox();if(!(((w=this.scroll)==null?void 0:w.wasRoot)||this.path.some(Lxe))){const{scroll:T}=this.root;T&&(wb(i.x,T.offset.x),wb(i.y,T.offset.y))}return i}removeElementScroll(h){var g;const i=ha();if(Yd(i,h),(g=this.scroll)!=null&&g.wasRoot)return i;for(let w=0;w<this.path.length;w++){const T=this.path[w],{scroll:A,options:D}=T;T!==this.root&&A&&D.layoutScroll&&(A.wasRoot&&Yd(i,h),wb(i.x,A.offset.x),wb(i.y,A.offset.y))}return i}applyTransform(h,i=!1){const g=ha();Yd(g,h);for(let w=0;w<this.path.length;w++){const T=this.path[w];!i&&T.options.layoutScroll&&T.scroll&&T!==T.root&&Sb(g,{x:-T.scroll.offset.x,y:-T.scroll.offset.y}),W_(T.latestValues)&&Sb(g,T.latestValues)}return W_(this.latestValues)&&Sb(g,this.latestValues),g}removeTransform(h){const i=ha();Yd(i,h);for(let g=0;g<this.path.length;g++){const w=this.path[g];if(!w.instance||!W_(w.latestValues))continue;TF(w.latestValues)&&w.updateSnapshot();const T=ha(),A=w.measurePageBox();Yd(T,A),uq(i,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,T)}return W_(this.latestValues)&&uq(i,this.latestValues),i}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ol.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var D;const i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==i;if(!(h||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(D=this.parent)!=null&&D.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:T,layoutId:A}=this.options;if(!(!this.layout||!(T||A))){if(this.resolvedRelativeTargetAt=Ol.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ha(),this.relativeTargetOrigin=ha(),zS(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Yd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ha(),this.targetWithTransforms=ha()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yd(this.target,this.layout.layoutBox),jK(this.target,this.targetDelta)):Yd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ha(),this.relativeTargetOrigin=ha(),zS(this.relativeTargetOrigin,this.target,k.target),Yd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||TF(this.parent.latestValues)||NK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var I;const h=this.getLead(),i=!!this.resumingFrom||this!==h;let g=!0;if((this.isProjectionDirty||(I=this.parent)!=null&&I.isProjectionDirty)&&(g=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Ol.timestamp&&(g=!1),g)return;const{layout:w,layoutId:T}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||T))return;Yd(this.layoutCorrected,this.layout.layoutBox);const A=this.treeScale.x,D=this.treeScale.y;B0e(this.layoutCorrected,this.treeScale,this.path,i),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=ha());const{target:k}=h;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aq(this.prevProjectionDelta.x,this.projectionDelta.x),aq(this.prevProjectionDelta.y,this.projectionDelta.y)),LS(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==A||this.treeScale.y!==D||!mq(this.projectionDelta.x,this.prevProjectionDelta.x)||!mq(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var i;if((i=this.options.visualElement)==null||i.scheduleRender(),h){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bb(),this.projectionDelta=bb(),this.projectionDeltaWithTransform=bb()}setAnimationOrigin(h,i=!1){const g=this.snapshot,w=g?g.latestValues:{},T={...this.latestValues},A=bb();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!i;const D=ha(),k=g?g.source:void 0,I=this.layout?this.layout.source:void 0,F=k!==I,j=this.getStack(),V=!j||j.members.length<=1,W=!!(F&&!V&&this.options.crossfade===!0&&!this.path.some(Ixe));this.animationProgress=0;let Z;this.mixTargetDelta=K=>{const ee=K/1e3;_q(A.x,h.x,ee),_q(A.y,h.y,ee),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zS(D,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Pxe(this.relativeTarget,this.relativeTargetOrigin,D,ee),Z&&mxe(this.relativeTarget,Z)&&(this.isProjectionDirty=!1),Z||(Z=ha()),Yd(Z,this.relativeTarget)),F&&(this.animationValues=T,cxe(T,w,this.latestValues,ee,W,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zy(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Us.update(()=>{nM.hasAnimatedSinceResize=!0,this.currentAnimation=rxe(0,gq,{...h,onUpdate:i=>{this.mixTargetDelta(i),h.onUpdate&&h.onUpdate(i)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:i,target:g,layout:w,latestValues:T}=h;if(!(!i||!g||!w)){if(this!==h&&this.layout&&w&&QK(this.options.animationType,this.layout.layoutBox,w.layoutBox)){g=this.target||ha();const A=Gc(this.layout.layoutBox.x);g.x.min=h.target.x.min,g.x.max=g.x.min+A;const D=Gc(this.layout.layoutBox.y);g.y.min=h.target.y.min,g.y.max=g.y.min+D}Yd(i,g),Sb(i,T),LS(this.projectionDeltaWithTransform,this.layoutCorrected,i,T)}}registerSharedNode(h,i){this.sharedNodes.has(h)||this.sharedNodes.set(h,new gxe),this.sharedNodes.get(h).add(i);const w=i.options.initialPromotionConfig;i.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(i):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var i;const{layoutId:h}=this.options;return h?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:h}=this.options;return h?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:i,preserveFollowOpacity:g}={}){const w=this.getStack();w&&w.promote(this,g),h&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let i=!1;const{latestValues:g}=h;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(i=!0),!i)return;const w={};g.z&&qI("z",h,w,this.animationValues);for(let T=0;T<$I.length;T++)qI(`rotate${$I[T]}`,h,w,this.animationValues),qI(`skew${$I[T]}`,h,w,this.animationValues);h.render();for(const T in w)h.setStaticValue(T,w[T]),this.animationValues&&(this.animationValues[T]=w[T]);h.scheduleRender()}getProjectionStyles(h){if(!this.instance||this.isSVG)return;if(!this.isVisible)return vxe;const i={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=tM(h==null?void 0:h.pointerEvents)||"",i.transform=g?g(this.latestValues,""):"none",i;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=tM(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!W_(this.latestValues)&&(k.transform=g?g({},""):"none",this.hasProjected=!1),k}const T=w.animationValues||w.latestValues;this.applyTransformsToTarget(),i.transform=yxe(this.projectionDeltaWithTransform,this.treeScale,T),g&&(i.transform=g(T,i.transform));const{x:A,y:D}=this.projectionDelta;i.transformOrigin=`${A.origin*100}% ${D.origin*100}% 0`,w.animationValues?i.opacity=w===this?T.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:i.opacity=w===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const k in aT){if(T[k]===void 0)continue;const{correct:I,applyTo:F,isCSSVariable:j}=aT[k],V=i.transform==="none"?T[k]:I(T[k],w);if(F){const W=F.length;for(let Z=0;Z<W;Z++)i[F[Z]]=V}else j?this.options.visualElement.renderState.vars[k]=V:i[k]=V}return this.options.layoutId&&(i.pointerEvents=w===this?tM(h==null?void 0:h.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var i;return(i=h.currentAnimation)==null?void 0:i.stop()}),this.root.nodes.forEach(yq),this.root.sharedNodes.clear()}}}function xxe(e){e.updateLayout()}function bxe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:c}=e.options,h=t.source!==e.layout.source;c==="size"?Jd(A=>{const D=h?t.measuredBox[A]:t.layoutBox[A],k=Gc(D);D.min=r[A].min,D.max=D.min+k}):QK(c,t.layoutBox,r)&&Jd(A=>{const D=h?t.measuredBox[A]:t.layoutBox[A],k=Gc(r[A]);D.max=D.min+k,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+k)});const i=bb();LS(i,r,t.layoutBox);const g=bb();h?LS(g,e.applyTransform(s,!0),t.measuredBox):LS(g,r,t.layoutBox);const w=!YK(i);let T=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:D,layout:k}=A;if(D&&k){const I=ha();zS(I,t.layoutBox,D.layoutBox);const F=ha();zS(F,r,k.layoutBox),XK(I,F)||(T=!0),A.options.layoutRoot&&(e.relativeTarget=F,e.relativeTargetOrigin=I,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:i,hasLayoutChanged:w,hasRelativeLayoutChanged:T})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function wxe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Sxe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Txe(e){e.clearSnapshot()}function yq(e){e.clearMeasurements()}function Exe(e){e.isLayoutDirty=!1}function Cxe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vq(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Axe(e){e.resolveTargetDelta()}function Mxe(e){e.calcProjection()}function Rxe(e){e.resetSkewAndRotation()}function Dxe(e){e.removeLeadSnapshot()}function _q(e,t,n){e.translate=Ns(t.translate,0,n),e.scale=Ns(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function xq(e,t,n,r){e.min=Ns(t.min,n.min,r),e.max=Ns(t.max,n.max,r)}function Pxe(e,t,n,r){xq(e.x,t.x,n.x,r),xq(e.y,t.y,n.y,r)}function Ixe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const kxe={duration:.45,ease:[.4,0,.1,1]},bq=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),wq=bq("applewebkit/")&&!bq("chrome/")?Math.round:lh;function Sq(e){e.min=wq(e.min),e.max=wq(e.max)}function Oxe(e){Sq(e.x),Sq(e.y)}function QK(e,t,n){return e==="position"||e==="preserve-aspect"&&!z0e(pq(t),pq(n),.2)}function Lxe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const zxe=KK({attachResizeListener:(e,t)=>cT(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),HI={current:void 0},JK=KK({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!HI.current){const e=new zxe({});e.mount(window),e.setOptions({layoutScroll:!0}),HI.current=e}return HI.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Fxe={pan:{Feature:J0e},drag:{Feature:Q0e,ProjectionNode:JK,MeasureLayout:HK}};function Tq(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,c=r[s];c&&Us.postRender(()=>c(t,nE(t)))}class Bxe extends cv{mount(){const{current:t}=this.node;t&&(this.unmount=g_e(t,(n,r)=>(Tq(this.node,r,"Start"),s=>Tq(this.node,s,"End"))))}unmount(){}}class Nxe extends cv{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=JT(cT(this.node.current,"focus",()=>this.onFocus()),cT(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Eq(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),c=r[s];c&&Us.postRender(()=>c(t,nE(t)))}class jxe extends cv{mount(){const{current:t}=this.node;t&&(this.unmount=x_e(t,(n,r)=>(Eq(this.node,r,"Start"),(s,{success:c})=>Eq(this.node,s,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const AF=new WeakMap,GI=new WeakMap,Vxe=e=>{const t=AF.get(e.target);t&&t(e)},Uxe=e=>{e.forEach(Vxe)};function $xe({root:e,...t}){const n=e||document;GI.has(n)||GI.set(n,{});const r=GI.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Uxe,{root:e,...t})),r[s]}function qxe(e,t,n){const r=$xe(t);return AF.set(e,n),r.observe(e),()=>{AF.delete(e),r.unobserve(e)}}const Hxe={some:0,all:1};class Gxe extends cv{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:c}=t,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Hxe[s]},i=g=>{const{isIntersecting:w}=g;if(this.isInView===w||(this.isInView=w,c&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:T,onViewportLeave:A}=this.node.getProps(),D=w?T:A;D&&D(g)};return qxe(this.node.current,h,i)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Wxe(t,n))&&this.startObserver()}unmount(){}}function Wxe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Yxe={inView:{Feature:Gxe},tap:{Feature:jxe},focus:{Feature:Nxe},hover:{Feature:Bxe}},Xxe={layout:{ProjectionNode:JK,MeasureLayout:HK}},MF={current:null},eQ={current:!1};function Zxe(){if(eQ.current=!0,!!IN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>MF.current=e.matches;e.addListener(t),t()}else MF.current=!1}const Kxe=new WeakMap;function Qxe(e,t,n){for(const r in t){const s=t[r],c=n[r];if(hc(s))e.addValue(r,s);else if(hc(c))e.addValue(r,oT(s,{owner:e}));else if(c!==s)if(e.hasValue(r)){const h=e.getValue(r);h.liveStyle===!0?h.jump(s):h.hasAnimated||h.set(s)}else{const h=e.getStaticValue(r);e.addValue(r,oT(h!==void 0?h:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Cq=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jxe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:c,visualState:h},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=XN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const D=du.now();this.renderScheduledAt<D&&(this.renderScheduledAt=D,Us.render(this.render,!1,!0))};const{latestValues:g,renderState:w}=h;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=w,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=i,this.blockInitialAnimation=!!c,this.isControllingVariants=aD(n),this.isVariantNode=bK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:T,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const D in A){const k=A[D];g[D]!==void 0&&hc(k)&&k.set(g[D],!1)}}mount(t){this.current=t,Kxe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),eQ.current||Zxe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:MF.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zy(this.notifyUpdate),Zy(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=g1.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Us.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),c(),h&&h(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Xb){const n=Xb[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ha()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Cq.length;r++){const s=Cq[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const c="on"+s,h=t[c];h&&(this.propEventSubscriptions[s]=this.on(s,h))}this.prevMotionValues=Qxe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=oT(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(PZ(r)||IZ(r))?r=parseFloat(r):!w_e(r)&&Ky.test(n)&&(r=pK(t,n)),this.setBaseTarget(t,hc(r)?r.get():r)),hc(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var c;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=sj(this.props,n,(c=this.presenceContext)==null?void 0:c.custom);h&&(r=h[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!hc(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new BN),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class tQ extends Jxe{constructor(){super(...arguments),this.KeyframeResolver=d_e}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hc(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nQ(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const c in n)e.style.setProperty(c,n[c])}function ebe(e){return window.getComputedStyle(e)}class tbe extends tQ{constructor(){super(...arguments),this.type="html",this.renderInstance=nQ}readValueFromInstance(t,n){if(g1.has(n))return Dve(t,n);{const r=ebe(t),s=(VN(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return VK(t,n)}build(t,n,r){rj(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return aj(t,n,r)}}const rQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nbe(e,t,n,r){nQ(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(rQ.has(s)?s:nj(s),t.attrs[s])}class rbe extends tQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ha}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(g1.has(n)){const r=fK(n);return r&&r.default||0}return n=rQ.has(n)?n:nj(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return PK(t,n,r)}build(t,n,r){AK(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){nbe(t,n,r,s)}mount(t){this.isSVGTag=RK(t.tagName),super.mount(t)}}const ibe=(e,t)=>oj(e)?new rbe(t):new tbe(t,{allowProjection:e!==q.Fragment}),obe=n0e({...M0e,...Yxe,...Fxe,...Xxe},ibe),KC=A_e(obe);function Aq(...e){const t=q.useRef(0),[n,r]=q.useState(e[t.current]),s=q.useCallback(c=>{t.current=typeof c!="number"?Mye(0,e.length,t.current+1):c,r(e[t.current])},[e.length,...e]);return[n,s]}function sbe({children:e,type:t="scale",direction:n="right",offset:r=10,scale:s={hover:1,tap:.9},ref:c}){let h,i;switch(n){case"up":case"left":h=r,i=0;break;case"right":case"down":default:h=0,i=r;break}const[g,w]=Aq(h,i),[T,A]=Aq(h,i);switch(t){case"rotate":return $.jsx(KC.div,{ref:c,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:e});case"slide":return n==="up"||n==="down"?$.jsx(KC.div,{ref:c,animate:{y:T!==void 0?T:""},onHoverEnd:()=>A(),onHoverStart:()=>A(),children:e}):$.jsx(KC.div,{ref:c,animate:{x:g!==void 0?g:""},onHoverEnd:()=>w(),onHoverStart:()=>w(),children:e});case"scale":default:return typeof s=="number"&&(s={hover:s,tap:s}),$.jsx(KC.div,{ref:c,whileHover:{scale:s==null?void 0:s.hover},whileTap:{scale:s==null?void 0:s.tap},children:e})}}sbe.propTypes={children:nt.node,type:nt.oneOf(["slide","scale","rotate"]),direction:nt.oneOf(["up","down","left","right"]),offset:nt.number,scale:nt.object};function abe(e){return fr("MuiCardHeader",e)}const KM=pr("MuiCardHeader",["root","avatar","action","content","title","subheader"]),lbe=e=>{const{classes:t}=e;return dr({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},abe,t)},cbe=Ot("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{[`& .${KM.title}`]:t.title},{[`& .${KM.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),ube=Ot("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),dbe=Ot("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),hbe=Ot("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${FM.root}:where(& .${KM.title})`]:{display:"block"},[`.${FM.root}:where(& .${KM.subheader})`]:{display:"block"}}),Mq=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCardHeader"}),{action:s,avatar:c,component:h="div",disableTypography:i=!1,subheader:g,subheaderTypographyProps:w,title:T,titleTypographyProps:A,slots:D={},slotProps:k={},...I}=r,F={...r,component:h,disableTypography:i},j=lbe(F),V={slots:D,slotProps:{title:A,subheader:w,...k}};let W=T;const[Z,K]=fi("title",{className:j.title,elementType:rr,externalForwardedProps:V,ownerState:F,additionalProps:{variant:c?"body2":"h5",component:"span"}});W!=null&&W.type!==rr&&!i&&(W=$.jsx(Z,{...K,children:W}));let ee=g;const[se,he]=fi("subheader",{className:j.subheader,elementType:rr,externalForwardedProps:V,ownerState:F,additionalProps:{variant:c?"body2":"body1",color:"textSecondary",component:"span"}});ee!=null&&ee.type!==rr&&!i&&(ee=$.jsx(se,{...he,children:ee}));const[ye,_e]=fi("root",{ref:n,className:j.root,elementType:cbe,externalForwardedProps:{...V,...I,component:h},ownerState:F}),[ae,be]=fi("avatar",{className:j.avatar,elementType:ube,externalForwardedProps:V,ownerState:F}),[Te,Ae]=fi("content",{className:j.content,elementType:hbe,externalForwardedProps:V,ownerState:F}),[Re,He]=fi("action",{className:j.action,elementType:dbe,externalForwardedProps:V,ownerState:F});return $.jsxs(ye,{..._e,children:[c&&$.jsx(ae,{...be,children:c}),$.jsxs(Te,{...Ae,children:[W,ee]}),s&&$.jsx(Re,{...He,children:s})]})}),Rq={"& .MuiCardHeader-action":{mr:0}},iQ=function({border:t=!1,boxShadow:n,children:r,content:s=!0,contentClass:c="",contentSX:h={},headerSX:i={},darkTitle:g,secondary:w,shadow:T,sx:A={},title:D,ref:k,...I}){return $.jsxs(y0,{ref:k,...I,sx:{border:t?"1px solid":"none",borderColor:"divider",":hover":{boxShadow:n?T||"0 2px 14px 0 rgb(32 40 45 / 8%)":"inherit"},...A},children:[!g&&D&&$.jsx(Mq,{sx:{...Rq,...i},title:D,action:w}),g&&D&&$.jsx(Mq,{sx:{...Rq,...i},title:$.jsx(rr,{variant:"h3",children:D}),action:w}),D&&$.jsx(gu,{}),s&&$.jsx(iD,{sx:h,className:c,children:r}),!s&&r]})};function fbe(e,t){const[n,r]=q.useState(()=>{const c=localStorage.getItem(e);return c===null?t:JSON.parse(c)});return q.useEffect(()=>{const c=h=>{h.storageArea===localStorage&&h.key===e&&r(h.newValue?JSON.parse(h.newValue):h.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}},[e,t]),[n,c=>{r(h=>{const i=typeof c=="function"?c(h):c;return localStorage.setItem(e,JSON.stringify(i)),i})}]}const RF={...KX,onChangeFontFamily:()=>{},onChangeBorderRadius:()=>{},onReset:()=>{}},oQ=q.createContext(RF);function sQ({children:e}){const[t,n]=fbe("berry-config-vite-ts",{fontFamily:RF.fontFamily,borderRadius:RF.borderRadius}),r=h=>{n({...t,fontFamily:h})},s=(h,i)=>{n({...t,borderRadius:i})},c=()=>{n({...KX})};return $.jsx(oQ.Provider,{value:{...t,onChangeFontFamily:r,onChangeBorderRadius:s,onReset:c},children:e})}sQ.propTypes={children:nt.node};function y1(){return q.useContext(oQ)}var WI={exports:{}},YI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dq;function pbe(){if(Dq)return YI;Dq=1;var e=mh();function t(g,w){return g===w&&(g!==0||1/g===1/w)||g!==g&&w!==w}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=e.useRef,c=e.useEffect,h=e.useMemo,i=e.useDebugValue;return YI.useSyncExternalStoreWithSelector=function(g,w,T,A,D){var k=s(null);if(k.current===null){var I={hasValue:!1,value:null};k.current=I}else I=k.current;k=h(function(){function j(ee){if(!V){if(V=!0,W=ee,ee=A(ee),D!==void 0&&I.hasValue){var se=I.value;if(D(se,ee))return Z=se}return Z=ee}if(se=Z,n(W,ee))return se;var he=A(ee);return D!==void 0&&D(se,he)?(W=ee,se):(W=ee,Z=he)}var V=!1,W,Z,K=T===void 0?null:T;return[function(){return j(w())},K===null?void 0:function(){return j(K())}]},[w,T,A,D]);var F=r(g,k[0],k[1]);return c(function(){I.hasValue=!0,I.value=F},[F]),i(F),F},YI}var Pq;function mbe(){return Pq||(Pq=1,WI.exports=pbe()),WI.exports}var gbe=mbe();function ybe(e){e()}function vbe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ybe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Iq={notify(){},get:()=>[]};function _be(e,t){let n,r=Iq,s=0,c=!1;function h(F){T();const j=r.subscribe(F);let V=!1;return()=>{V||(V=!0,j(),A())}}function i(){r.notify()}function g(){I.onStateChange&&I.onStateChange()}function w(){return c}function T(){s++,n||(n=e.subscribe(g),r=vbe())}function A(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=Iq)}function D(){c||(c=!0,T())}function k(){c&&(c=!1,A())}const I={addNestedSub:h,notifyNestedSubs:i,handleChangeWrapper:g,isSubscribed:w,trySubscribe:D,tryUnsubscribe:k,getListeners:()=>r};return I}var xbe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bbe=xbe(),wbe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Sbe=wbe(),Tbe=()=>bbe||Sbe?q.useLayoutEffect:q.useEffect,Ebe=Tbe(),XI=Symbol.for("react-redux-context"),ZI=typeof globalThis<"u"?globalThis:{};function Cbe(){if(!q.createContext)return{};const e=ZI[XI]??(ZI[XI]=new Map);let t=e.get(q.createContext);return t||(t=q.createContext(null),e.set(q.createContext,t)),t}var Qy=Cbe();function Abe(e){const{children:t,context:n,serverState:r,store:s}=e,c=q.useMemo(()=>{const g=_be(s);return{store:s,subscription:g,getServerState:r?()=>r:void 0}},[s,r]),h=q.useMemo(()=>s.getState(),[s]);Ebe(()=>{const{subscription:g}=c;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),h!==s.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[c,h]);const i=n||Qy;return q.createElement(i.Provider,{value:c},t)}var Mbe=Abe;function cj(e=Qy){return function(){return q.useContext(e)}}var aQ=cj();function lQ(e=Qy){const t=e===Qy?aQ:cj(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Rbe=lQ();function Dbe(e=Qy){const t=e===Qy?Rbe:lQ(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Pbe=Dbe(),Ibe=(e,t)=>e===t;function kbe(e=Qy){const t=e===Qy?aQ:cj(e),n=(r,s={})=>{const{equalityFn:c=Ibe}=typeof s=="function"?{equalityFn:s}:s,h=t(),{store:i,subscription:g,getServerState:w}=h;q.useRef(!0);const T=q.useCallback({[r.name](D){return r(D)}}[r.name],[r]),A=gbe.useSyncExternalStoreWithSelector(g.addNestedSub,i.getState,w||i.getState,T,c);return q.useDebugValue(A),A};return Object.assign(n,{withTypes:()=>n}),n}var Obe=kbe();function kl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Lbe=typeof Symbol=="function"&&Symbol.observable||"@@observable",kq=Lbe,KI=()=>Math.random().toString(36).substring(7).split("").join("."),zbe={INIT:`@@redux/INIT${KI()}`,REPLACE:`@@redux/REPLACE${KI()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${KI()}`},QM=zbe;function uj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dj(e,t,n){if(typeof e!="function")throw new Error(kl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kl(1));return n(dj)(e,t)}let r=e,s=t,c=new Map,h=c,i=0,g=!1;function w(){h===c&&(h=new Map,c.forEach((j,V)=>{h.set(V,j)}))}function T(){if(g)throw new Error(kl(3));return s}function A(j){if(typeof j!="function")throw new Error(kl(4));if(g)throw new Error(kl(5));let V=!0;w();const W=i++;return h.set(W,j),function(){if(V){if(g)throw new Error(kl(6));V=!1,w(),h.delete(W),c=null}}}function D(j){if(!uj(j))throw new Error(kl(7));if(typeof j.type>"u")throw new Error(kl(8));if(typeof j.type!="string")throw new Error(kl(17));if(g)throw new Error(kl(9));try{g=!0,s=r(s,j)}finally{g=!1}return(c=h).forEach(W=>{W()}),j}function k(j){if(typeof j!="function")throw new Error(kl(10));r=j,D({type:QM.REPLACE})}function I(){const j=A;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(kl(11));function W(){const K=V;K.next&&K.next(T())}return W(),{unsubscribe:j(W)}},[kq](){return this}}}return D({type:QM.INIT}),{dispatch:D,subscribe:A,getState:T,replaceReducer:k,[kq]:I}}function Fbe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:QM.INIT})>"u")throw new Error(kl(12));if(typeof n(void 0,{type:QM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kl(13))})}function Bbe(e){const t=Object.keys(e),n={};for(let c=0;c<t.length;c++){const h=t[c];typeof e[h]=="function"&&(n[h]=e[h])}const r=Object.keys(n);let s;try{Fbe(n)}catch(c){s=c}return function(h={},i){if(s)throw s;let g=!1;const w={};for(let T=0;T<r.length;T++){const A=r[T],D=n[A],k=h[A],I=D(k,i);if(typeof I>"u")throw i&&i.type,new Error(kl(14));w[A]=I,g=g||I!==k}return g=g||r.length!==Object.keys(h).length,g?w:h}}function JM(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Nbe(...e){return t=>(n,r)=>{const s=t(n,r);let c=()=>{throw new Error(kl(15))};const h={getState:s.getState,dispatch:(g,...w)=>c(g,...w)},i=e.map(g=>g(h));return c=JM(...i)(s.dispatch),{...s,dispatch:c}}}function jbe(e){return uj(e)&&"type"in e&&typeof e.type=="string"}var cQ=Symbol.for("immer-nothing"),Oq=Symbol.for("immer-draftable"),cd=Symbol.for("immer-state");function wf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zb=Object.getPrototypeOf;function _0(e){return!!e&&!!e[cd]}function kg(e){var t;return e?uQ(e)||Array.isArray(e)||!!e[Oq]||!!((t=e.constructor)!=null&&t[Oq])||cD(e)||uD(e):!1}var Vbe=Object.prototype.constructor.toString();function uQ(e){if(!e||typeof e!="object")return!1;const t=Zb(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Vbe}function eR(e,t){lD(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function lD(e){const t=e[cd];return t?t.type_:Array.isArray(e)?1:cD(e)?2:uD(e)?3:0}function DF(e,t){return lD(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dQ(e,t,n){const r=lD(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Ube(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cD(e){return e instanceof Map}function uD(e){return e instanceof Set}function Y_(e){return e.copy_||e.base_}function PF(e,t){if(cD(e))return new Map(e);if(uD(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=uQ(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[cd];let s=Reflect.ownKeys(r);for(let c=0;c<s.length;c++){const h=s[c],i=r[h];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[h]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[h]})}return Object.create(Zb(e),r)}else{const r=Zb(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function hj(e,t=!1){return dD(e)||_0(e)||!kg(e)||(lD(e)>1&&(e.set=e.add=e.clear=e.delete=$be),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>hj(r,!0))),e}function $be(){wf(2)}function dD(e){return Object.isFrozen(e)}var qbe={};function x0(e){const t=qbe[e];return t||wf(0,e),t}var uT;function hQ(){return uT}function Hbe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Lq(e,t){t&&(x0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function IF(e){kF(e),e.drafts_.forEach(Gbe),e.drafts_=null}function kF(e){e===uT&&(uT=e.parent_)}function zq(e){return uT=Hbe(uT,e)}function Gbe(e){const t=e[cd];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fq(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[cd].modified_&&(IF(t),wf(4)),kg(e)&&(e=tR(t,e),t.parent_||nR(t,e)),t.patches_&&x0("Patches").generateReplacementPatches_(n[cd].base_,e,t.patches_,t.inversePatches_)):e=tR(t,n,[]),IF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cQ?e:void 0}function tR(e,t,n){if(dD(t))return t;const r=t[cd];if(!r)return eR(t,(s,c)=>Bq(e,r,t,s,c,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return nR(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let c=s,h=!1;r.type_===3&&(c=new Set(s),s.clear(),h=!0),eR(c,(i,g)=>Bq(e,r,s,i,g,n,h)),nR(e,s,!1),n&&e.patches_&&x0("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Bq(e,t,n,r,s,c,h){if(_0(s)){const i=c&&t&&t.type_!==3&&!DF(t.assigned_,r)?c.concat(r):void 0,g=tR(e,s,i);if(dQ(n,r,g),_0(g))e.canAutoFreeze_=!1;else return}else h&&n.add(s);if(kg(s)&&!dD(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tR(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&nR(e,s)}}function nR(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hj(t,n)}function Wbe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:hQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,c=fj;n&&(s=[r],c=dT);const{revoke:h,proxy:i}=Proxy.revocable(s,c);return r.draft_=i,r.revoke_=h,i}var fj={get(e,t){if(t===cd)return e;const n=Y_(e);if(!DF(n,t))return Ybe(e,n,t);const r=n[t];return e.finalized_||!kg(r)?r:r===QI(e.base_,t)?(JI(e),e.copy_[t]=LF(r,e)):r},has(e,t){return t in Y_(e)},ownKeys(e){return Reflect.ownKeys(Y_(e))},set(e,t,n){const r=fQ(Y_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=QI(Y_(e),t),c=s==null?void 0:s[cd];if(c&&c.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Ube(n,s)&&(n!==void 0||DF(e.base_,t)))return!0;JI(e),OF(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return QI(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,JI(e),OF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Y_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){wf(11)},getPrototypeOf(e){return Zb(e.base_)},setPrototypeOf(){wf(12)}},dT={};eR(fj,(e,t)=>{dT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dT.deleteProperty=function(e,t){return dT.set.call(this,e,t,void 0)};dT.set=function(e,t,n){return fj.set.call(this,e[0],t,n,e[0])};function QI(e,t){const n=e[cd];return(n?Y_(n):e)[t]}function Ybe(e,t,n){var s;const r=fQ(t,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function fQ(e,t){if(!(t in e))return;let n=Zb(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Zb(n)}}function OF(e){e.modified_||(e.modified_=!0,e.parent_&&OF(e.parent_))}function JI(e){e.copy_||(e.copy_=PF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Xbe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const c=n;n=t;const h=this;return function(g=c,...w){return h.produce(g,T=>n.call(this,T,...w))}}typeof n!="function"&&wf(6),r!==void 0&&typeof r!="function"&&wf(7);let s;if(kg(t)){const c=zq(this),h=LF(t,void 0);let i=!0;try{s=n(h),i=!1}finally{i?IF(c):kF(c)}return Lq(c,r),Fq(s,c)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===cQ&&(s=void 0),this.autoFreeze_&&hj(s,!0),r){const c=[],h=[];x0("Patches").generateReplacementPatches_(t,s,c,h),r(c,h)}return s}else wf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(h,...i)=>this.produceWithPatches(h,g=>t(g,...i));let r,s;return[this.produce(t,n,(h,i)=>{r=h,s=i}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kg(e)||wf(8),_0(e)&&(e=Zbe(e));const t=zq(this),n=LF(e,void 0);return n[cd].isManual_=!0,kF(t),n}finishDraft(e,t){const n=e&&e[cd];(!n||!n.isManual_)&&wf(9);const{scope_:r}=n;return Lq(r,t),Fq(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=x0("Patches").applyPatches_;return _0(e)?r(e,t):this.produce(e,s=>r(s,t))}};function LF(e,t){const n=cD(e)?x0("MapSet").proxyMap_(e,t):uD(e)?x0("MapSet").proxySet_(e,t):Wbe(e,t);return(t?t.scope_:hQ()).drafts_.push(n),n}function Zbe(e){return _0(e)||wf(10,e),pQ(e)}function pQ(e){if(!kg(e)||dD(e))return e;const t=e[cd];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=PF(e,t.scope_.immer_.useStrictShallowCopy_)}else n=PF(e,!0);return eR(n,(r,s)=>{dQ(n,r,pQ(s))}),t&&(t.finalized_=!1),n}var ud=new Xbe,mQ=ud.produce;ud.produceWithPatches.bind(ud);ud.setAutoFreeze.bind(ud);ud.setUseStrictShallowCopy.bind(ud);ud.applyPatches.bind(ud);ud.createDraft.bind(ud);ud.finishDraft.bind(ud);function gQ(e){return({dispatch:n,getState:r})=>s=>c=>typeof c=="function"?c(n,r,e):s(c)}var Kbe=gQ(),Qbe=gQ,Jbe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?JM:JM.apply(null,arguments)};function Nq(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(Eg(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>jbe(r)&&r.type===e,n}var yQ=class wS extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,wS.prototype)}static get[Symbol.species](){return wS}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new wS(...t[0].concat(this)):new wS(...t.concat(this))}};function jq(e){return kg(e)?mQ(e,()=>{}):e}function QC(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function e1e(e){return typeof e=="boolean"}var t1e=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:c=!0}=t??{};let h=new yQ;return n&&(e1e(n)?h.push(Kbe):h.push(Qbe(n.extraArgument))),h},n1e="RTK_autoBatch",Vq=e=>t=>{setTimeout(t,e)},r1e=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,c=!1,h=!1;const i=new Set,g=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Vq(10):e.type==="callback"?e.queueNotification:Vq(e.timeout),w=()=>{h=!1,c&&(c=!1,i.forEach(T=>T()))};return Object.assign({},r,{subscribe(T){const A=()=>s&&T(),D=r.subscribe(A);return i.add(T),()=>{D(),i.delete(T)}},dispatch(T){var A;try{return s=!((A=T==null?void 0:T.meta)!=null&&A[n1e]),c=!s,c&&(h||(h=!0,g(w))),r.dispatch(T)}finally{s=!0}}})},i1e=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new yQ(e);return r&&s.push(r1e(typeof r=="object"?r:void 0)),s};function o1e(e){const t=t1e(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:c=void 0,enhancers:h=void 0}=e||{};let i;if(typeof n=="function")i=n;else if(uj(n))i=Bbe(n);else throw new Error(Eg(1));let g;typeof r=="function"?g=r(t):g=t();let w=JM;s&&(w=Jbe({trace:!1,...typeof s=="object"&&s}));const T=Nbe(...g),A=i1e(T);let D=typeof h=="function"?h(A):A();const k=w(...D);return dj(i,c,k)}function vQ(e){const t={},n=[];let r;const s={addCase(c,h){const i=typeof c=="string"?c:c.type;if(!i)throw new Error(Eg(28));if(i in t)throw new Error(Eg(29));return t[i]=h,s},addMatcher(c,h){return n.push({matcher:c,reducer:h}),s},addDefaultCase(c){return r=c,s}};return e(s),[t,n,r]}function s1e(e){return typeof e=="function"}function a1e(e,t){let[n,r,s]=vQ(t),c;if(s1e(e))c=()=>jq(e());else{const i=jq(e);c=()=>i}function h(i=c(),g){let w=[n[g.type],...r.filter(({matcher:T})=>T(g)).map(({reducer:T})=>T)];return w.filter(T=>!!T).length===0&&(w=[s]),w.reduce((T,A)=>{if(A)if(_0(T)){const k=A(T,g);return k===void 0?T:k}else{if(kg(T))return mQ(T,D=>A(D,g));{const D=A(T,g);if(D===void 0){if(T===null)return T;throw Error("A case reducer on a non-draftable value must not return undefined")}return D}}return T},i)}return h.getInitialState=c,h}var l1e=Symbol.for("rtk-slice-createasyncthunk");function c1e(e,t){return`${e}/${t}`}function u1e({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[l1e];return function(s){const{name:c,reducerPath:h=c}=s;if(!c)throw new Error(Eg(11));const i=(typeof s.reducers=="function"?s.reducers(f1e()):s.reducers)||{},g=Object.keys(i),w={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},T={addCase(K,ee){const se=typeof K=="string"?K:K.type;if(!se)throw new Error(Eg(12));if(se in w.sliceCaseReducersByType)throw new Error(Eg(13));return w.sliceCaseReducersByType[se]=ee,T},addMatcher(K,ee){return w.sliceMatchers.push({matcher:K,reducer:ee}),T},exposeAction(K,ee){return w.actionCreators[K]=ee,T},exposeCaseReducer(K,ee){return w.sliceCaseReducersByName[K]=ee,T}};g.forEach(K=>{const ee=i[K],se={reducerName:K,type:c1e(c,K),createNotation:typeof s.reducers=="function"};m1e(ee)?y1e(se,ee,T,t):p1e(se,ee,T)});function A(){const[K={},ee=[],se=void 0]=typeof s.extraReducers=="function"?vQ(s.extraReducers):[s.extraReducers],he={...K,...w.sliceCaseReducersByType};return a1e(s.initialState,ye=>{for(let _e in he)ye.addCase(_e,he[_e]);for(let _e of w.sliceMatchers)ye.addMatcher(_e.matcher,_e.reducer);for(let _e of ee)ye.addMatcher(_e.matcher,_e.reducer);se&&ye.addDefaultCase(se)})}const D=K=>K,k=new Map,I=new WeakMap;let F;function j(K,ee){return F||(F=A()),F(K,ee)}function V(){return F||(F=A()),F.getInitialState()}function W(K,ee=!1){function se(ye){let _e=ye[K];return typeof _e>"u"&&ee&&(_e=QC(I,se,V)),_e}function he(ye=D){const _e=QC(k,ee,()=>new WeakMap);return QC(_e,ye,()=>{const ae={};for(const[be,Te]of Object.entries(s.selectors??{}))ae[be]=d1e(Te,ye,()=>QC(I,ye,V),ee);return ae})}return{reducerPath:K,getSelectors:he,get selectors(){return he(se)},selectSlice:se}}const Z={name:c,reducer:j,actions:w.actionCreators,caseReducers:w.sliceCaseReducersByName,getInitialState:V,...W(h),injectInto(K,{reducerPath:ee,...se}={}){const he=ee??h;return K.inject({reducerPath:he,reducer:j},se),{...Z,...W(he,!0)}}};return Z}}function d1e(e,t,n,r){function s(c,...h){let i=t(c);return typeof i>"u"&&r&&(i=n()),e(i,...h)}return s.unwrapped=e,s}var h1e=u1e();function f1e(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function p1e({type:e,reducerName:t,createNotation:n},r,s){let c,h;if("reducer"in r){if(n&&!g1e(r))throw new Error(Eg(17));c=r.reducer,h=r.prepare}else c=r;s.addCase(e,c).exposeCaseReducer(t,c).exposeAction(t,h?Nq(e,h):Nq(e))}function m1e(e){return e._reducerDefinitionType==="asyncThunk"}function g1e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function y1e({type:e,reducerName:t},n,r,s){if(!s)throw new Error(Eg(18));const{payloadCreator:c,fulfilled:h,pending:i,rejected:g,settled:w,options:T}=n,A=s(e,c,T);r.exposeAction(t,A),h&&r.addCase(A.fulfilled,h),i&&r.addCase(A.pending,i),g&&r.addCase(A.rejected,g),w&&r.addMatcher(A.settled,w),r.exposeCaseReducer(t,{fulfilled:h||JC,pending:i||JC,rejected:g||JC,settled:w||JC})}function JC(){}function Eg(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const v1e={logInProgress:!1,user:null,token:localStorage.getItem("token")||null},_Q=h1e({name:"auth",initialState:v1e,reducers:{setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token},logout:e=>{e.user=null,e.token=null,localStorage.removeItem("token")},setlogInProgress:(e,t)=>{e.logInProgress=t.payload}}}),{setCredentials:s7e,logout:_1e,setlogInProgress:a7e}=_Q.actions,x1e=_Q.reducer;function b1e(){const e=cs(),t=iv(),n=Pbe(),{borderRadius:r}=y1(),[s,c]=q.useState(!0),[h,i]=q.useState(""),[g,w]=q.useState(!1),[T]=q.useState(-1),[A,D]=q.useState(!1),k=Obe(Z=>Z.auth.user),I=q.useRef(null),F=()=>{D(Z=>!Z)},j=Z=>{I.current&&I.current.contains(Z.target)||D(!1)},V=()=>{n(_1e()),t("/login")},W=q.useRef(A);return q.useEffect(()=>{W.current===!0&&A===!1&&I.current.focus(),W.current=A},[A]),$.jsxs($.Fragment,{children:[$.jsx(N0,{sx:{ml:2,height:"48px",alignItems:"center",borderRadius:"27px","& .MuiChip-label":{lineHeight:0}},icon:$.jsx(WT,{alt:"user-images",sx:{...e.typography.mediumAvatar,margin:"8px 0 8px 8px !important",cursor:"pointer"},ref:I,"aria-controls":A?"menu-list-grow":void 0,"aria-haspopup":"true",color:"inherit"}),label:$.jsx(o6,{stroke:1.5,size:"24px"}),ref:I,"aria-controls":A?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:F,color:"secondary","aria-label":"user-account"}),$.jsx(KT,{placement:"bottom",open:A,anchorEl:I.current,role:void 0,transition:!0,disablePortal:!0,modifiers:[{name:"offset",options:{offset:[0,14]}}],children:({TransitionProps:Z})=>$.jsx(EZ,{onClickAway:j,children:$.jsx(PN,{in:A,...Z,children:$.jsx(fu,{children:A&&$.jsxs(iQ,{border:!1,elevation:16,content:!1,boxShadow:!0,shadow:e.shadows[16],children:[$.jsxs(Dr,{sx:{p:2,pb:0},children:[$.jsxs(yl,{children:[$.jsx(yl,{direction:"row",spacing:.5,sx:{alignItems:"center"},children:$.jsx(rr,{component:"span",variant:"h4",sx:{fontWeight:400},children:(k==null?void 0:k.firstName)+" "+(k==null?void 0:k.lastName)})}),$.jsx(rr,{variant:"subtitle2",children:k==null?void 0:k.role})]}),$.jsx(gu,{})]}),$.jsxs(Dr,{sx:{p:2,py:0,height:"100%",maxHeight:"calc(100vh - 250px)",overflowX:"hidden","&::-webkit-scrollbar":{width:5}},children:[$.jsx(gu,{}),$.jsx(gu,{}),$.jsxs(lv,{component:"nav",sx:{width:"100%",maxWidth:350,minWidth:300,borderRadius:`${r}px`,"& .MuiListItemButton-root":{mt:.5}},children:[$.jsxs(qM,{sx:{borderRadius:`${r}px`},selected:T===0,children:[$.jsx(HM,{children:$.jsx(o6,{stroke:1.5,size:"20px"})}),$.jsx(Yb,{primary:$.jsx(rr,{variant:"body2",children:"Account Settings"})})]}),$.jsxs(qM,{sx:{borderRadius:`${r}px`},selected:T===4,onClick:V,children:[$.jsx(HM,{children:$.jsx(rge,{stroke:1.5,size:"20px"})}),$.jsx(Yb,{primary:$.jsx(rr,{variant:"body2",children:"Logout"})})]})]})]})]})})})})})]})}function w1e(e){return fr("MuiInput",e)}const Gw={...Ub,...pr("MuiInput",["root","underline","input"])},S1e=e=>{const{classes:t,disableUnderline:n}=e,s=dr({root:["root",!n&&"underline"],input:["input"]},w1e,t);return{...t,...s}},T1e=Ot(QR,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ZR(e,t),!n.disableUnderline&&t.underline]}})(ri(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Gw.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Gw.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Gw.disabled}, .${Gw.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Gw.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Vs()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}}))]}})),E1e=Ot(JR,{name:"MuiInput",slot:"Input",overridesResolver:KR})({}),pj=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiInput"}),{disableUnderline:s=!1,components:c={},componentsProps:h,fullWidth:i=!1,inputComponent:g="input",multiline:w=!1,slotProps:T,slots:A={},type:D="text",...k}=r,I=S1e(r),j={root:{ownerState:{disableUnderline:s}}},V=T??h?vl(T??h,j):j,W=A.root??c.Root??T1e,Z=A.input??c.Input??E1e;return $.jsx(_N,{slots:{root:W,input:Z},slotProps:V,fullWidth:i,inputComponent:g,multiline:w,ref:n,type:D,...k,classes:I})});pj.muiName="Input";function C1e(e){return fr("MuiFilledInput",e)}const B_={...Ub,...pr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},A1e=e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:s,size:c,hiddenLabel:h,multiline:i}=e,g={root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd",c==="small"&&`size${Mn(c)}`,h&&"hiddenLabel",i&&"multiline"],input:["input"]},w=dr(g,C1e,t);return{...t,...w}},M1e=Ot(QR,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ZR(e,t),!n.disableUnderline&&t.underline]}})(ri(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${B_.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${B_.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[{props:({ownerState:h})=>!h.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${B_.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${B_.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${B_.disabled}, .${B_.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${B_.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Vs()).map(([h])=>{var i;return{props:{disableUnderline:!1,color:h},style:{"&::after":{borderBottom:`2px solid ${(i=(e.vars||e).palette[h])==null?void 0:i.main}`}}}}),{props:({ownerState:h})=>h.startAdornment,style:{paddingLeft:12}},{props:({ownerState:h})=>h.endAdornment,style:{paddingRight:12}},{props:({ownerState:h})=>h.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:h,size:i})=>h.multiline&&i==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:h})=>h.multiline&&h.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:h})=>h.multiline&&h.hiddenLabel&&h.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),R1e=Ot(JR,{name:"MuiFilledInput",slot:"Input",overridesResolver:KR})(ri(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),mj=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:c={},componentsProps:h,fullWidth:i=!1,hiddenLabel:g,inputComponent:w="input",multiline:T=!1,slotProps:A,slots:D={},type:k="text",...I}=r,F={...r,disableUnderline:s,fullWidth:i,inputComponent:w,multiline:T,type:k},j=A1e(r),V={root:{ownerState:F},input:{ownerState:F}},W=A??h?vl(V,A??h):V,Z=D.root??c.Root??M1e,K=D.input??c.Input??R1e;return $.jsx(_N,{slots:{root:Z,input:K},slotProps:W,fullWidth:i,inputComponent:w,multiline:T,ref:n,type:k,...I,classes:j})});mj.muiName="Input";function D1e(e){return fr("MuiFormLabel",e)}const FS=pr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),P1e=e=>{const{classes:t,color:n,focused:r,disabled:s,error:c,filled:h,required:i}=e,g={root:["root",`color${Mn(n)}`,s&&"disabled",c&&"error",h&&"filled",r&&"focused",i&&"required"],asterisk:["asterisk",c&&"error"]};return dr(g,D1e,t)},I1e=Ot("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(ri(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{[`&.${FS.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${FS.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${FS.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),k1e=Ot("span",{name:"MuiFormLabel",slot:"Asterisk"})(ri(({theme:e})=>({[`&.${FS.error}`]:{color:(e.vars||e).palette.error.main}}))),O1e=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiFormLabel"}),{children:s,className:c,color:h,component:i="label",disabled:g,error:w,filled:T,focused:A,required:D,...k}=r,I=vh(),F=sv({props:r,muiFormControl:I,states:["color","required","focused","disabled","error","filled"]}),j={...r,color:F.color||"primary",component:i,disabled:F.disabled,error:F.error,filled:F.filled,focused:F.focused,required:F.required},V=P1e(j);return $.jsxs(I1e,{as:i,ownerState:j,className:Wn(V.root,c),ref:n,...k,children:[s,F.required&&$.jsxs(k1e,{ownerState:j,"aria-hidden":!0,className:V.asterisk,children:["","*"]})]})});function L1e(e){return fr("MuiInputLabel",e)}pr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const z1e=e=>{const{classes:t,formControl:n,size:r,shrink:s,disableAnimation:c,variant:h,required:i}=e,g={root:["root",n&&"formControl",!c&&"animated",s&&"shrink",r&&r!=="medium"&&`size${Mn(r)}`,h],asterisk:[i&&"asterisk"]},w=dr(g,L1e,t);return{...t,...w}},F1e=Ot(O1e,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${FS.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(ri(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:r})=>t==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Sf=q.forwardRef(function(t,n){const r=qr({name:"MuiInputLabel",props:t}),{disableAnimation:s=!1,margin:c,shrink:h,variant:i,className:g,...w}=r,T=vh();let A=h;typeof A>"u"&&T&&(A=T.filled||T.focused||T.adornedStart);const D=sv({props:r,muiFormControl:T,states:["size","variant","required","focused"]}),k={...r,disableAnimation:s,formControl:T,shrink:A,size:D.size,variant:D.variant,required:D.required,focused:D.focused},I=z1e(k);return $.jsx(F1e,{"data-shrink":A,ref:n,className:Wn(I.root,g),...w,ownerState:k,classes:I})});function B1e(e){return fr("MuiFormControl",e)}pr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const N1e=e=>{const{classes:t,margin:n,fullWidth:r}=e,s={root:["root",n!=="none"&&`margin${Mn(n)}`,r&&"fullWidth"]};return dr(s,B1e,t)},j1e=Ot("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${Mn(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),fc=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiFormControl"}),{children:s,className:c,color:h="primary",component:i="div",disabled:g=!1,error:w=!1,focused:T,fullWidth:A=!1,hiddenLabel:D=!1,margin:k="none",required:I=!1,size:F="medium",variant:j="outlined",...V}=r,W={...r,color:h,component:i,disabled:g,error:w,fullWidth:A,hiddenLabel:D,margin:k,required:I,size:F,variant:j},Z=N1e(W),[K,ee]=q.useState(()=>{let He=!1;return s&&q.Children.forEach(s,Se=>{if(!Ob(Se,["Input","Select"]))return;const qe=Ob(Se,["Select"])?Se.props.input:Se;qe&&ape(qe.props)&&(He=!0)}),He}),[se,he]=q.useState(()=>{let He=!1;return s&&q.Children.forEach(s,Se=>{Ob(Se,["Input","Select"])&&(BM(Se.props,!0)||BM(Se.props.inputProps,!0))&&(He=!0)}),He}),[ye,_e]=q.useState(!1);g&&ye&&_e(!1);const ae=T!==void 0&&!g?T:ye;let be;q.useRef(!1);const Te=q.useCallback(()=>{he(!0)},[]),Ae=q.useCallback(()=>{he(!1)},[]),Re=q.useMemo(()=>({adornedStart:K,setAdornedStart:ee,color:h,disabled:g,error:w,filled:se,focused:ae,fullWidth:A,hiddenLabel:D,size:F,onBlur:()=>{_e(!1)},onFocus:()=>{_e(!0)},onEmpty:Ae,onFilled:Te,registerEffect:be,required:I,variant:j}),[K,h,g,w,se,ae,A,D,be,Ae,Te,I,F,j]);return $.jsx(XR.Provider,{value:Re,children:$.jsx(j1e,{as:i,ownerState:W,className:Wn(Z.root,c),ref:n,...V,children:s})})});function V1e(e){return fr("MuiFormHelperText",e)}const Uq=pr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var $q;const U1e=e=>{const{classes:t,contained:n,size:r,disabled:s,error:c,filled:h,focused:i,required:g}=e,w={root:["root",s&&"disabled",c&&"error",r&&`size${Mn(r)}`,n&&"contained",i&&"focused",h&&"filled",g&&"required"]};return dr(w,V1e,t)},$1e=Ot("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Mn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(ri(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Uq.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Uq.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),xQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiFormHelperText"}),{children:s,className:c,component:h="p",disabled:i,error:g,filled:w,focused:T,margin:A,required:D,variant:k,...I}=r,F=vh(),j=sv({props:r,muiFormControl:F,states:["variant","size","disabled","error","filled","focused","required"]}),V={...r,component:h,contained:j.variant==="filled"||j.variant==="outlined",variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required};delete V.ownerState;const W=U1e(V);return $.jsx($1e,{as:h,className:Wn(W.root,c),ref:n,...I,ownerState:V,children:s===" "?$q||($q=$.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function bQ(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function ek(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function qq(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function wQ(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function Ww(e,t,n,r,s,c){let h=!1,i=s(e,t,t?n:!1);for(;i;){if(i===e.firstChild){if(h)return!1;h=!0}const g=r?!1:i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||!wQ(i,c)||g)i=s(e,i,n);else return i.focus(),!0}return!1}const q1e=q.forwardRef(function(t,n){const{actions:r,autoFocus:s=!1,autoFocusItem:c=!1,children:h,className:i,disabledItemsFocusable:g=!1,disableListWrap:w=!1,onKeyDown:T,variant:A="selectedMenu",...D}=t,k=q.useRef(null),I=q.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$s(()=>{s&&k.current.focus()},[s]),q.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(Z,{direction:K})=>{const ee=!k.current.style.width;if(Z.clientHeight<k.current.clientHeight&&ee){const se=`${bQ(ad(Z))}px`;k.current.style[K==="rtl"?"paddingLeft":"paddingRight"]=se,k.current.style.width=`calc(100% + ${se})`}return k.current}}),[]);const F=Z=>{const K=k.current,ee=Z.key;if(Z.ctrlKey||Z.metaKey||Z.altKey){T&&T(Z);return}const he=za(K).activeElement;if(ee==="ArrowDown")Z.preventDefault(),Ww(K,he,w,g,ek);else if(ee==="ArrowUp")Z.preventDefault(),Ww(K,he,w,g,qq);else if(ee==="Home")Z.preventDefault(),Ww(K,null,w,g,ek);else if(ee==="End")Z.preventDefault(),Ww(K,null,w,g,qq);else if(ee.length===1){const ye=I.current,_e=ee.toLowerCase(),ae=performance.now();ye.keys.length>0&&(ae-ye.lastTime>500?(ye.keys=[],ye.repeating=!0,ye.previousKeyMatched=!0):ye.repeating&&_e!==ye.keys[0]&&(ye.repeating=!1)),ye.lastTime=ae,ye.keys.push(_e);const be=he&&!ye.repeating&&wQ(he,ye);ye.previousKeyMatched&&(be||Ww(K,he,!1,g,ek,ye))?Z.preventDefault():ye.previousKeyMatched=!1}T&&T(Z)},j=mo(k,n);let V=-1;q.Children.forEach(h,(Z,K)=>{if(!q.isValidElement(Z)){V===K&&(V+=1,V>=h.length&&(V=-1));return}Z.props.disabled||(A==="selectedMenu"&&Z.props.selected||V===-1)&&(V=K),V===K&&(Z.props.disabled||Z.props.muiSkipListHighlight||Z.type.muiSkipListHighlight)&&(V+=1,V>=h.length&&(V=-1))});const W=q.Children.map(h,(Z,K)=>{if(K===V){const ee={};return c&&(ee.autoFocus=!0),Z.props.tabIndex===void 0&&A==="selectedMenu"&&(ee.tabIndex=0),q.cloneElement(Z,ee)}return Z});return $.jsx(lv,{role:"menu",ref:j,className:i,onKeyDown:F,tabIndex:s?0:-1,...D,children:W})});function H1e(e){const t=za(e);return t.body===e?ad(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function BS(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Hq(e){return parseInt(ad(e).getComputedStyle(e).paddingRight,10)||0}function G1e(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function Gq(e,t,n,r,s){const c=[t,n,...r];[].forEach.call(e.children,h=>{const i=!c.includes(h),g=!G1e(h);i&&g&&BS(h,s)})}function tk(e,t){let n=-1;return e.some((r,s)=>t(r)?(n=s,!0):!1),n}function W1e(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(H1e(r)){const h=bQ(ad(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Hq(r)+h}px`;const i=za(r).querySelectorAll(".mui-fixed");[].forEach.call(i,g=>{n.push({value:g.style.paddingRight,property:"padding-right",el:g}),g.style.paddingRight=`${Hq(g)+h}px`})}let c;if(r.parentNode instanceof DocumentFragment)c=za(r).body;else{const h=r.parentElement,i=ad(r);c=(h==null?void 0:h.nodeName)==="HTML"&&i.getComputedStyle(h).overflowY==="scroll"?h:r}n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{n.forEach(({value:c,el:h,property:i})=>{c?h.style.setProperty(i,c):h.style.removeProperty(i)})}}function Y1e(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class X1e{constructor(){this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&BS(t.modalRef,!1);const s=Y1e(n);Gq(n,t.mount,t.modalRef,s,!0);const c=tk(this.containers,h=>h.container===n);return c!==-1?(this.containers[c].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:s}),r)}mount(t,n){const r=tk(this.containers,c=>c.modals.includes(t)),s=this.containers[r];s.restore||(s.restore=W1e(s,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const s=tk(this.containers,h=>h.modals.includes(t)),c=this.containers[s];if(c.modals.splice(c.modals.indexOf(t),1),this.modals.splice(r,1),c.modals.length===0)c.restore&&c.restore(),t.modalRef&&BS(t.modalRef,n),Gq(c.container,t.mount,t.modalRef,c.hiddenSiblings,!1),this.containers.splice(s,1);else{const h=c.modals[c.modals.length-1];h.modalRef&&BS(h.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const Z1e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function K1e(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Q1e(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function J1e(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Q1e(e))}function ewe(e){const t=[],n=[];return Array.from(e.querySelectorAll(Z1e)).forEach((r,s)=>{const c=K1e(r);c===-1||!J1e(r)||(c===0?t.push(r):n.push({documentOrder:s,tabIndex:c,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(t)}function twe(){return!0}function SQ(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:c=ewe,isEnabled:h=twe,open:i}=e,g=q.useRef(!1),w=q.useRef(null),T=q.useRef(null),A=q.useRef(null),D=q.useRef(null),k=q.useRef(!1),I=q.useRef(null),F=mo(Fg(t),I),j=q.useRef(null);q.useEffect(()=>{!i||!I.current||(k.current=!n)},[n,i]),q.useEffect(()=>{if(!i||!I.current)return;const Z=za(I.current);return I.current.contains(Z.activeElement)||(I.current.hasAttribute("tabIndex")||I.current.setAttribute("tabIndex","-1"),k.current&&I.current.focus()),()=>{s||(A.current&&A.current.focus&&(g.current=!0,A.current.focus()),A.current=null)}},[i]),q.useEffect(()=>{if(!i||!I.current)return;const Z=za(I.current),K=he=>{j.current=he,!(r||!h()||he.key!=="Tab")&&Z.activeElement===I.current&&he.shiftKey&&(g.current=!0,T.current&&T.current.focus())},ee=()=>{var _e,ae;const he=I.current;if(he===null)return;if(!Z.hasFocus()||!h()||g.current){g.current=!1;return}if(he.contains(Z.activeElement)||r&&Z.activeElement!==w.current&&Z.activeElement!==T.current)return;if(Z.activeElement!==D.current)D.current=null;else if(D.current!==null)return;if(!k.current)return;let ye=[];if((Z.activeElement===w.current||Z.activeElement===T.current)&&(ye=c(I.current)),ye.length>0){const be=!!((_e=j.current)!=null&&_e.shiftKey&&((ae=j.current)==null?void 0:ae.key)==="Tab"),Te=ye[0],Ae=ye[ye.length-1];typeof Te!="string"&&typeof Ae!="string"&&(be?Ae.focus():Te.focus())}else he.focus()};Z.addEventListener("focusin",ee),Z.addEventListener("keydown",K,!0);const se=setInterval(()=>{Z.activeElement&&Z.activeElement.tagName==="BODY"&&ee()},50);return()=>{clearInterval(se),Z.removeEventListener("focusin",ee),Z.removeEventListener("keydown",K,!0)}},[n,r,s,h,i,c]);const V=Z=>{A.current===null&&(A.current=Z.relatedTarget),k.current=!0,D.current=Z.target;const K=t.props.onFocus;K&&K(Z)},W=Z=>{A.current===null&&(A.current=Z.relatedTarget),k.current=!0};return $.jsxs(q.Fragment,{children:[$.jsx("div",{tabIndex:i?0:-1,onFocus:W,ref:w,"data-testid":"sentinelStart"}),q.cloneElement(t,{ref:F,onFocus:V}),$.jsx("div",{tabIndex:i?0:-1,onFocus:W,ref:T,"data-testid":"sentinelEnd"})]})}function nwe(e){return fr("MuiBackdrop",e)}pr("MuiBackdrop",["root","invisible"]);const rwe=e=>{const{classes:t,invisible:n}=e;return dr({root:["root",n&&"invisible"]},nwe,t)},iwe=Ot("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),TQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiBackdrop"}),{children:s,className:c,component:h="div",invisible:i=!1,open:g,components:w={},componentsProps:T={},slotProps:A={},slots:D={},TransitionComponent:k,transitionDuration:I,...F}=r,j={...r,component:h,invisible:i},V=rwe(j),W={transition:k,root:w.Root,...D},Z={...T,...A},K={slots:W,slotProps:Z},[ee,se]=fi("root",{elementType:iwe,externalForwardedProps:K,className:Wn(V.root,c),ownerState:j}),[he,ye]=fi("transition",{elementType:Xy,externalForwardedProps:K,ownerState:j});return $.jsx(he,{in:g,timeout:I,...F,...ye,children:$.jsx(ee,{"aria-hidden":!0,...se,classes:V,ref:n,children:s})})});function owe(e){return typeof e=="function"?e():e}function swe(e){return e?e.props.hasOwnProperty("in"):!1}const Wq=()=>{},eA=new X1e;function awe(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:c,onTransitionExited:h,children:i,onClose:g,open:w,rootRef:T}=e,A=q.useRef({}),D=q.useRef(null),k=q.useRef(null),I=mo(k,T),[F,j]=q.useState(!w),V=swe(i);let W=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(W=!1);const Z=()=>za(D.current),K=()=>(A.current.modalRef=k.current,A.current.mount=D.current,A.current),ee=()=>{eA.mount(K(),{disableScrollLock:r}),k.current&&(k.current.scrollTop=0)},se=Tr(()=>{const He=owe(t)||Z().body;eA.add(K(),He),k.current&&ee()}),he=()=>eA.isTopModal(K()),ye=Tr(He=>{D.current=He,He&&(w&&he()?ee():k.current&&BS(k.current,W))}),_e=q.useCallback(()=>{eA.remove(K(),W)},[W]);q.useEffect(()=>()=>{_e()},[_e]),q.useEffect(()=>{w?se():(!V||!s)&&_e()},[w,_e,V,s,se]);const ae=He=>Se=>{var qe;(qe=He.onKeyDown)==null||qe.call(He,Se),!(Se.key!=="Escape"||Se.which===229||!he())&&(n||(Se.stopPropagation(),g&&g(Se,"escapeKeyDown")))},be=He=>Se=>{var qe;(qe=He.onClick)==null||qe.call(He,Se),Se.target===Se.currentTarget&&g&&g(Se,"backdropClick")};return{getRootProps:(He={})=>{const Se=XX(e);delete Se.onTransitionEnter,delete Se.onTransitionExited;const qe={...Se,...He};return{role:"presentation",...qe,onKeyDown:ae(qe),ref:I}},getBackdropProps:(He={})=>{const Se=He;return{"aria-hidden":!0,...Se,onClick:be(Se),open:w}},getTransitionProps:()=>{const He=()=>{j(!1),c&&c()},Se=()=>{j(!0),h&&h(),s&&_e()};return{onEnter:n6(He,(i==null?void 0:i.props.onEnter)??Wq),onExited:n6(Se,(i==null?void 0:i.props.onExited)??Wq)}},rootRef:I,portalRef:ye,isTopModal:he,exited:F,hasTransition:V}}function lwe(e){return fr("MuiModal",e)}pr("MuiModal",["root","hidden","backdrop"]);const cwe=e=>{const{open:t,exited:n,classes:r}=e;return dr({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},lwe,r)},uwe=Ot("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(ri(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),dwe=Ot(TQ,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),gj=q.forwardRef(function(t,n){const r=qr({name:"MuiModal",props:t}),{BackdropComponent:s=dwe,BackdropProps:c,classes:h,className:i,closeAfterTransition:g=!1,children:w,container:T,component:A,components:D={},componentsProps:k={},disableAutoFocus:I=!1,disableEnforceFocus:F=!1,disableEscapeKeyDown:j=!1,disablePortal:V=!1,disableRestoreFocus:W=!1,disableScrollLock:Z=!1,hideBackdrop:K=!1,keepMounted:ee=!1,onClose:se,onTransitionEnter:he,onTransitionExited:ye,open:_e,slotProps:ae={},slots:be={},theme:Te,...Ae}=r,Re={...r,closeAfterTransition:g,disableAutoFocus:I,disableEnforceFocus:F,disableEscapeKeyDown:j,disablePortal:V,disableRestoreFocus:W,disableScrollLock:Z,hideBackdrop:K,keepMounted:ee},{getRootProps:He,getBackdropProps:Se,getTransitionProps:qe,portalRef:it,isTopModal:tt,exited:Oe,hasTransition:Je}=awe({...Re,rootRef:n}),yt={...Re,exited:Oe},wt=cwe(yt),$t={};if(w.props.tabIndex===void 0&&($t.tabIndex="-1"),Je){const{onEnter:Qt,onExited:Jt}=qe();$t.onEnter=Qt,$t.onExited=Jt}const It={slots:{root:D.Root,backdrop:D.Backdrop,...be},slotProps:{...k,...ae}},[vt,sn]=fi("root",{ref:n,elementType:uwe,externalForwardedProps:{...It,...Ae,component:A},getSlotProps:He,ownerState:yt,className:Wn(i,wt==null?void 0:wt.root,!yt.open&&yt.exited&&(wt==null?void 0:wt.hidden))}),[Rn,yn]=fi("backdrop",{ref:c==null?void 0:c.ref,elementType:s,externalForwardedProps:It,shouldForwardComponentProp:!0,additionalProps:c,getSlotProps:Qt=>Se({...Qt,onClick:Jt=>{Qt!=null&&Qt.onClick&&Qt.onClick(Jt)}}),className:Wn(c==null?void 0:c.className,wt==null?void 0:wt.backdrop),ownerState:yt});return!ee&&!_e&&(!Je||Oe)?null:$.jsx(yZ,{ref:it,container:T,disablePortal:V,children:$.jsxs(vt,{...sn,children:[!K&&s?$.jsx(Rn,{...yn}):null,$.jsx(SQ,{disableEnforceFocus:F,disableAutoFocus:I,disableRestoreFocus:W,isEnabled:tt,open:_e,children:q.cloneElement(w,$t)})]})})});function hwe(e){return fr("MuiPopover",e)}pr("MuiPopover",["root","paper"]);function Yq(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function Xq(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function Zq(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function tA(e){return typeof e=="function"?e():e}const fwe=e=>{const{classes:t}=e;return dr({root:["root"],paper:["paper"]},hwe,t)},pwe=Ot(gj,{name:"MuiPopover",slot:"Root"})({}),EQ=Ot(fu,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),mwe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiPopover"}),{action:s,anchorEl:c,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:i,anchorReference:g="anchorEl",children:w,className:T,container:A,elevation:D=8,marginThreshold:k=16,open:I,PaperProps:F={},slots:j={},slotProps:V={},transformOrigin:W={vertical:"top",horizontal:"left"},TransitionComponent:Z,transitionDuration:K="auto",TransitionProps:ee={},disableScrollLock:se=!1,...he}=r,ye=q.useRef(),_e={...r,anchorOrigin:h,anchorReference:g,elevation:D,marginThreshold:k,transformOrigin:W,TransitionComponent:Z,transitionDuration:K,TransitionProps:ee},ae=fwe(_e),be=q.useCallback(()=>{if(g==="anchorPosition")return i;const Qt=tA(c),fn=(Qt&&Qt.nodeType===1?Qt:za(ye.current).body).getBoundingClientRect();return{top:fn.top+Yq(fn,h.vertical),left:fn.left+Xq(fn,h.horizontal)}},[c,h.horizontal,h.vertical,i,g]),Te=q.useCallback(Qt=>({vertical:Yq(Qt,W.vertical),horizontal:Xq(Qt,W.horizontal)}),[W.horizontal,W.vertical]),Ae=q.useCallback(Qt=>{const Jt={width:Qt.offsetWidth,height:Qt.offsetHeight},fn=Te(Jt);if(g==="none")return{top:null,left:null,transformOrigin:Zq(fn)};const Bt=be();let Kt=Bt.top-fn.vertical,_n=Bt.left-fn.horizontal;const an=Kt+Jt.height,Ft=_n+Jt.width,kn=ad(tA(c)),Yn=kn.innerHeight-k,wn=kn.innerWidth-k;if(k!==null&&Kt<k){const Vn=Kt-k;Kt-=Vn,fn.vertical+=Vn}else if(k!==null&&an>Yn){const Vn=an-Yn;Kt-=Vn,fn.vertical+=Vn}if(k!==null&&_n<k){const Vn=_n-k;_n-=Vn,fn.horizontal+=Vn}else if(Ft>wn){const Vn=Ft-wn;_n-=Vn,fn.horizontal+=Vn}return{top:`${Math.round(Kt)}px`,left:`${Math.round(_n)}px`,transformOrigin:Zq(fn)}},[c,g,be,Te,k]),[Re,He]=q.useState(I),Se=q.useCallback(()=>{const Qt=ye.current;if(!Qt)return;const Jt=Ae(Qt);Jt.top!==null&&Qt.style.setProperty("top",Jt.top),Jt.left!==null&&(Qt.style.left=Jt.left),Qt.style.transformOrigin=Jt.transformOrigin,He(!0)},[Ae]);q.useEffect(()=>(se&&window.addEventListener("scroll",Se),()=>window.removeEventListener("scroll",Se)),[c,se,Se]);const qe=()=>{Se()},it=()=>{He(!1)};q.useEffect(()=>{I&&Se()}),q.useImperativeHandle(s,()=>I?{updatePosition:()=>{Se()}}:null,[I,Se]),q.useEffect(()=>{if(!I)return;const Qt=YT(()=>{Se()}),Jt=ad(tA(c));return Jt.addEventListener("resize",Qt),()=>{Qt.clear(),Jt.removeEventListener("resize",Qt)}},[c,I,Se]);let tt=K;const Oe={slots:{transition:Z,...j},slotProps:{transition:ee,paper:F,...V}},[Je,yt]=fi("transition",{elementType:Wb,externalForwardedProps:Oe,ownerState:_e,getSlotProps:Qt=>({...Qt,onEntering:(Jt,fn)=>{var Bt;(Bt=Qt.onEntering)==null||Bt.call(Qt,Jt,fn),qe()},onExited:Jt=>{var fn;(fn=Qt.onExited)==null||fn.call(Qt,Jt),it()}}),additionalProps:{appear:!0,in:I}});K==="auto"&&!Je.muiSupportAuto&&(tt=void 0);const wt=A||(c?za(tA(c)).body:void 0),[$t,{slots:It,slotProps:vt,...sn}]=fi("root",{ref:n,elementType:pwe,externalForwardedProps:{...Oe,...he},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:j.backdrop},slotProps:{backdrop:DN(typeof V.backdrop=="function"?V.backdrop(_e):V.backdrop,{invisible:!0})},container:wt,open:I},ownerState:_e,className:Wn(ae.root,T)}),[Rn,yn]=fi("paper",{ref:ye,className:ae.paper,elementType:EQ,externalForwardedProps:Oe,shouldForwardComponentProp:!0,additionalProps:{elevation:D,style:Re?void 0:{opacity:0}},ownerState:_e});return $.jsx($t,{...sn,...!JS($t)&&{slots:It,slotProps:vt,disableScrollLock:se},children:$.jsx(Je,{...yt,timeout:tt,children:$.jsx(Rn,{...yn,children:w})})})});function gwe(e){return fr("MuiMenu",e)}pr("MuiMenu",["root","paper","list"]);const ywe={vertical:"top",horizontal:"right"},vwe={vertical:"top",horizontal:"left"},_we=e=>{const{classes:t}=e;return dr({root:["root"],paper:["paper"],list:["list"]},gwe,t)},xwe=Ot(mwe,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),bwe=Ot(EQ,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),wwe=Ot(q1e,{name:"MuiMenu",slot:"List"})({outline:0}),CQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiMenu"}),{autoFocus:s=!0,children:c,className:h,disableAutoFocusItem:i=!1,MenuListProps:g={},onClose:w,open:T,PaperProps:A={},PopoverClasses:D,transitionDuration:k="auto",TransitionProps:{onEntering:I,...F}={},variant:j="selectedMenu",slots:V={},slotProps:W={},...Z}=r,K=vc(),ee={...r,autoFocus:s,disableAutoFocusItem:i,MenuListProps:g,onEntering:I,PaperProps:A,transitionDuration:k,TransitionProps:F,variant:j},se=_we(ee),he=s&&!i&&T,ye=q.useRef(null),_e=(tt,Oe)=>{ye.current&&ye.current.adjustStyleForScrollbar(tt,{direction:K?"rtl":"ltr"}),I&&I(tt,Oe)},ae=tt=>{tt.key==="Tab"&&(tt.preventDefault(),w&&w(tt,"tabKeyDown"))};let be=-1;q.Children.map(c,(tt,Oe)=>{q.isValidElement(tt)&&(tt.props.disabled||(j==="selectedMenu"&&tt.props.selected||be===-1)&&(be=Oe))});const Te={slots:V,slotProps:{list:g,transition:F,paper:A,...W}},Ae=xo({elementType:V.root,externalSlotProps:W.root,ownerState:ee,className:[se.root,h]}),[Re,He]=fi("paper",{className:se.paper,elementType:bwe,externalForwardedProps:Te,shouldForwardComponentProp:!0,ownerState:ee}),[Se,qe]=fi("list",{className:Wn(se.list,g.className),elementType:wwe,shouldForwardComponentProp:!0,externalForwardedProps:Te,getSlotProps:tt=>({...tt,onKeyDown:Oe=>{var Je;ae(Oe),(Je=tt.onKeyDown)==null||Je.call(tt,Oe)}}),ownerState:ee}),it=typeof Te.slotProps.transition=="function"?Te.slotProps.transition(ee):Te.slotProps.transition;return $.jsx(xwe,{onClose:w,anchorOrigin:{vertical:"bottom",horizontal:K?"right":"left"},transformOrigin:K?ywe:vwe,slots:{root:V.root,paper:Re,backdrop:V.backdrop,...V.transition&&{transition:V.transition}},slotProps:{root:Ae,paper:He,backdrop:typeof W.backdrop=="function"?W.backdrop(ee):W.backdrop,transition:{...it,onEntering:(...tt)=>{var Oe;_e(...tt),(Oe=it==null?void 0:it.onEntering)==null||Oe.call(it,...tt)}}},open:T,ref:n,transitionDuration:k,ownerState:ee,...Z,classes:D,children:$.jsx(Se,{actions:ye,autoFocus:s&&(be===-1||i),autoFocusItem:he,variant:j,...qe,children:c})})});function Swe(e){return fr("MuiNativeSelect",e)}const yj=pr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Twe=e=>{const{classes:t,variant:n,disabled:r,multiple:s,open:c,error:h}=e,i={select:["select",n,r&&"disabled",s&&"multiple",h&&"error"],icon:["icon",`icon${Mn(n)}`,c&&"iconOpen",r&&"disabled"]};return dr(i,Swe,t)},AQ=Ot("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${yj.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Ewe=Ot(AQ,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:_c,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${yj.multiple}`]:t.multiple}]}})({}),MQ=Ot("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${yj.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Cwe=Ot(MQ,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Mn(n.variant)}`],n.open&&t.iconOpen]}})({}),Awe=q.forwardRef(function(t,n){const{className:r,disabled:s,error:c,IconComponent:h,inputRef:i,variant:g="standard",...w}=t,T={...t,disabled:s,variant:g,error:c},A=Twe(T);return $.jsxs(q.Fragment,{children:[$.jsx(Ewe,{ownerState:T,className:Wn(A.select,r),disabled:s,ref:i||n,...w}),t.multiple?null:$.jsx(Cwe,{as:h,ownerState:T,className:A.icon})]})});function RQ(e){return fr("MuiSelect",e)}const Yw=pr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Kq;const Mwe=Ot(AQ,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Yw.select}`]:t.select},{[`&.${Yw.select}`]:t[n.variant]},{[`&.${Yw.error}`]:t.error},{[`&.${Yw.multiple}`]:t.multiple}]}})({[`&.${Yw.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Rwe=Ot(MQ,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Mn(n.variant)}`],n.open&&t.iconOpen]}})({}),Dwe=Ot("input",{shouldForwardProp:e=>GX(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Qq(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Pwe(e){return e==null||typeof e=="string"&&!e.trim()}const Iwe=e=>{const{classes:t,variant:n,disabled:r,multiple:s,open:c,error:h}=e,i={select:["select",n,r&&"disabled",s&&"multiple",h&&"error"],icon:["icon",`icon${Mn(n)}`,c&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return dr(i,RQ,t)},kwe=q.forwardRef(function(t,n){var _r;const{"aria-describedby":r,"aria-label":s,autoFocus:c,autoWidth:h,children:i,className:g,defaultOpen:w,defaultValue:T,disabled:A,displayEmpty:D,error:k=!1,IconComponent:I,inputRef:F,labelId:j,MenuProps:V={},multiple:W,name:Z,onBlur:K,onChange:ee,onClose:se,onFocus:he,onOpen:ye,open:_e,readOnly:ae,renderValue:be,required:Te,SelectDisplayProps:Ae={},tabIndex:Re,type:He,value:Se,variant:qe="standard",...it}=t,[tt,Oe]=Yp({controlled:Se,default:T,name:"Select"}),[Je,yt]=Yp({controlled:_e,default:w,name:"Select"}),wt=q.useRef(null),$t=q.useRef(null),[It,vt]=q.useState(null),{current:sn}=q.useRef(_e!=null),[Rn,yn]=q.useState(),Qt=mo(n,F),Jt=q.useCallback(nr=>{$t.current=nr,nr&&vt(nr)},[]),fn=It==null?void 0:It.parentNode;q.useImperativeHandle(Qt,()=>({focus:()=>{$t.current.focus()},node:wt.current,value:tt}),[tt]),q.useEffect(()=>{w&&Je&&It&&!sn&&(yn(h?null:fn.clientWidth),$t.current.focus())},[It,h]),q.useEffect(()=>{c&&$t.current.focus()},[c]),q.useEffect(()=>{if(!j)return;const nr=za($t.current).getElementById(j);if(nr){const Wr=()=>{getSelection().isCollapsed&&$t.current.focus()};return nr.addEventListener("click",Wr),()=>{nr.removeEventListener("click",Wr)}}},[j]);const Bt=(nr,Wr)=>{nr?ye&&ye(Wr):se&&se(Wr),sn||(yn(h?null:fn.clientWidth),yt(nr))},Kt=nr=>{nr.button===0&&(nr.preventDefault(),$t.current.focus(),Bt(!0,nr))},_n=nr=>{Bt(!1,nr)},an=q.Children.toArray(i),Ft=nr=>{const Wr=an.find(wr=>wr.props.value===nr.target.value);Wr!==void 0&&(Oe(Wr.props.value),ee&&ee(nr,Wr))},kn=nr=>Wr=>{let wr;if(Wr.currentTarget.hasAttribute("tabindex")){if(W){wr=Array.isArray(tt)?tt.slice():[];const Rr=tt.indexOf(nr.props.value);Rr===-1?wr.push(nr.props.value):wr.splice(Rr,1)}else wr=nr.props.value;if(nr.props.onClick&&nr.props.onClick(Wr),tt!==wr&&(Oe(wr),ee)){const Rr=Wr.nativeEvent||Wr,Di=new Rr.constructor(Rr.type,Rr);Object.defineProperty(Di,"target",{writable:!0,value:{value:wr,name:Z}}),ee(Di,nr)}W||Bt(!1,Wr)}},Yn=nr=>{ae||[" ","ArrowUp","ArrowDown","Enter"].includes(nr.key)&&(nr.preventDefault(),Bt(!0,nr))},wn=It!==null&&Je,Vn=nr=>{!wn&&K&&(Object.defineProperty(nr,"target",{writable:!0,value:{value:tt,name:Z}}),K(nr))};delete it["aria-invalid"];let ut,gn;const Rt=[];let Wt=!1;(BM({value:tt})||D)&&(be?ut=be(tt):Wt=!0);const zn=an.map(nr=>{if(!q.isValidElement(nr))return null;let Wr;if(W){if(!Array.isArray(tt))throw new Error(Rg(2));Wr=tt.some(wr=>Qq(wr,nr.props.value)),Wr&&Wt&&Rt.push(nr.props.children)}else Wr=Qq(tt,nr.props.value),Wr&&Wt&&(gn=nr.props.children);return q.cloneElement(nr,{"aria-selected":Wr?"true":"false",onClick:kn(nr),onKeyUp:wr=>{wr.key===" "&&wr.preventDefault(),nr.props.onKeyUp&&nr.props.onKeyUp(wr)},role:"option",selected:Wr,value:void 0,"data-value":nr.props.value})});Wt&&(W?Rt.length===0?ut=null:ut=Rt.reduce((nr,Wr,wr)=>(nr.push(Wr),wr<Rt.length-1&&nr.push(", "),nr),[]):ut=gn);let Un=Rn;!h&&sn&&It&&(Un=fn.clientWidth);let mr;typeof Re<"u"?mr=Re:mr=A?null:0;const Xn=Ae.id||(Z?`mui-component-select-${Z}`:void 0),or={...t,variant:qe,value:tt,open:wn,error:k},En=Iwe(or),Fr={...V.PaperProps,...(_r=V.slotProps)==null?void 0:_r.paper},Er=tm();return $.jsxs(q.Fragment,{children:[$.jsx(Mwe,{as:"div",ref:Jt,tabIndex:mr,role:"combobox","aria-controls":wn?Er:void 0,"aria-disabled":A?"true":void 0,"aria-expanded":wn?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[j,Xn].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":Te?"true":void 0,"aria-invalid":k?"true":void 0,onKeyDown:Yn,onMouseDown:A||ae?null:Kt,onBlur:Vn,onFocus:he,...Ae,ownerState:or,className:Wn(Ae.className,En.select,g),id:Xn,children:Pwe(ut)?Kq||(Kq=$.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ut}),$.jsx(Dwe,{"aria-invalid":k,value:Array.isArray(tt)?tt.join(","):tt,name:Z,ref:wt,"aria-hidden":!0,onChange:Ft,tabIndex:-1,disabled:A,className:En.nativeInput,autoFocus:c,required:Te,...it,ownerState:or}),$.jsx(Rwe,{as:I,className:En.icon,ownerState:or}),$.jsx(CQ,{id:`menu-${Z||""}`,anchorEl:fn,open:wn,onClose:_n,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...V,slotProps:{...V.slotProps,list:{"aria-labelledby":j,role:"listbox","aria-multiselectable":W?"true":void 0,disableListWrap:!0,id:Er,...V.MenuListProps},paper:{...Fr,style:{minWidth:Un,...Fr!=null?Fr.style:null}}},children:zn})]})}),Owe=Es($.jsx("path",{d:"M7 10l5 5 5-5z"})),Lwe=e=>{const{classes:t}=e,r=dr({root:["root"]},RQ,t);return{...t,...r}},vj={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>_c(e)&&e!=="variant"},zwe=Ot(pj,vj)(""),Fwe=Ot(Fp,vj)(""),Bwe=Ot(mj,vj)(""),Jy=q.forwardRef(function(t,n){const r=qr({name:"MuiSelect",props:t}),{autoWidth:s=!1,children:c,classes:h={},className:i,defaultOpen:g=!1,displayEmpty:w=!1,IconComponent:T=Owe,id:A,input:D,inputProps:k,label:I,labelId:F,MenuProps:j,multiple:V=!1,native:W=!1,onClose:Z,onOpen:K,open:ee,renderValue:se,SelectDisplayProps:he,variant:ye="outlined",..._e}=r,ae=W?Awe:kwe,be=vh(),Te=sv({props:r,muiFormControl:be,states:["variant","error"]}),Ae=Te.variant||ye,Re={...r,variant:Ae,classes:h},He=Lwe(Re),{root:Se,...qe}=He,it=D||{standard:$.jsx(zwe,{ownerState:Re}),outlined:$.jsx(Fwe,{label:I,ownerState:Re}),filled:$.jsx(Bwe,{ownerState:Re})}[Ae],tt=mo(n,Fg(it));return $.jsx(q.Fragment,{children:q.cloneElement(it,{inputComponent:ae,inputProps:{children:c,error:Te.error,IconComponent:T,variant:Ae,type:void 0,multiple:V,...W?{id:A}:{autoWidth:s,defaultOpen:g,displayEmpty:w,labelId:F,MenuProps:j,onClose:Z,onOpen:K,open:ee,renderValue:se,SelectDisplayProps:{id:A,...he}},...k,classes:k?vl(qe,k.classes):qe,...D?D.props.inputProps:{}},...(V&&W||w)&&Ae==="outlined"?{notched:!0}:{},ref:tt,className:Wn(it.props.className,i,He.root),...!D&&{variant:Ae},..._e})})});Jy.muiName="Select";function Nwe(e){return fr("MuiTextField",e)}pr("MuiTextField",["root"]);const jwe={standard:pj,filled:mj,outlined:Fp},Vwe=e=>{const{classes:t}=e;return dr({root:["root"]},Nwe,t)},Uwe=Ot(fc,{name:"MuiTextField",slot:"Root"})({}),Ps=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTextField"}),{autoComplete:s,autoFocus:c=!1,children:h,className:i,color:g="primary",defaultValue:w,disabled:T=!1,error:A=!1,FormHelperTextProps:D,fullWidth:k=!1,helperText:I,id:F,InputLabelProps:j,inputProps:V,InputProps:W,inputRef:Z,label:K,maxRows:ee,minRows:se,multiline:he=!1,name:ye,onBlur:_e,onChange:ae,onFocus:be,placeholder:Te,required:Ae=!1,rows:Re,select:He=!1,SelectProps:Se,slots:qe={},slotProps:it={},type:tt,value:Oe,variant:Je="outlined",...yt}=r,wt={...r,autoFocus:c,color:g,disabled:T,error:A,fullWidth:k,multiline:he,required:Ae,select:He,variant:Je},$t=Vwe(wt),It=tm(F),vt=I&&It?`${It}-helper-text`:void 0,sn=K&&It?`${It}-label`:void 0,Rn=jwe[Je],yn={slots:qe,slotProps:{input:W,inputLabel:j,htmlInput:V,formHelperText:D,select:Se,...it}},Qt={},Jt=yn.slotProps.inputLabel;Je==="outlined"&&(Jt&&typeof Jt.shrink<"u"&&(Qt.notched=Jt.shrink),Qt.label=K),He&&((!Se||!Se.native)&&(Qt.id=void 0),Qt["aria-describedby"]=void 0);const[fn,Bt]=fi("root",{elementType:Uwe,shouldForwardComponentProp:!0,externalForwardedProps:{...yn,...yt},ownerState:wt,className:Wn($t.root,i),ref:n,additionalProps:{disabled:T,error:A,fullWidth:k,required:Ae,color:g,variant:Je}}),[Kt,_n]=fi("input",{elementType:Rn,externalForwardedProps:yn,additionalProps:Qt,ownerState:wt}),[an,Ft]=fi("inputLabel",{elementType:Sf,externalForwardedProps:yn,ownerState:wt}),[kn,Yn]=fi("htmlInput",{elementType:"input",externalForwardedProps:yn,ownerState:wt}),[wn,Vn]=fi("formHelperText",{elementType:xQ,externalForwardedProps:yn,ownerState:wt}),[ut,gn]=fi("select",{elementType:Jy,externalForwardedProps:yn,ownerState:wt}),Rt=$.jsx(Kt,{"aria-describedby":vt,autoComplete:s,autoFocus:c,defaultValue:w,fullWidth:k,multiline:he,name:ye,rows:Re,maxRows:ee,minRows:se,type:tt,value:Oe,id:It,inputRef:Z,onBlur:_e,onChange:ae,onFocus:be,placeholder:Te,inputProps:Yn,slots:{input:qe.htmlInput?kn:void 0},..._n});return $.jsxs(fn,{...Bt,children:[K!=null&&K!==""&&$.jsx(an,{htmlFor:It,id:sn,...Ft,children:K}),He?$.jsx(ut,{"aria-describedby":vt,id:It,labelId:sn,value:Oe,input:Rt,...gn,children:h}):Rt,I&&$.jsx(wn,{id:vt,...Vn,children:I})]})});function $we(e){return fr("MuiListItem",e)}pr("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function qwe(e){return fr("MuiListItemSecondaryAction",e)}pr("MuiListItemSecondaryAction",["root","disableGutters"]);const Hwe=e=>{const{disableGutters:t,classes:n}=e;return dr({root:["root",t&&"disableGutters"]},qwe,n)},Gwe=Ot("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),DQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiListItemSecondaryAction"}),{className:s,...c}=r,h=q.useContext(ah),i={...r,disableGutters:h.disableGutters},g=Hwe(i);return $.jsx(Gwe,{className:Wn(g.root,s),ownerState:i,ref:n,...c})});DQ.muiName="ListItemSecondaryAction";const Wwe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},Ywe=e=>{const{alignItems:t,classes:n,dense:r,disableGutters:s,disablePadding:c,divider:h,hasSecondaryAction:i}=e;return dr({root:["root",r&&"dense",!s&&"gutters",!c&&"padding",h&&"divider",t==="flex-start"&&"alignItemsFlexStart",i&&"secondaryAction"],container:["container"]},$we,n)},Xwe=Ot("div",{name:"MuiListItem",slot:"Root",overridesResolver:Wwe})(ri(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${pb.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Zwe=Ot("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),_j=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiListItem"}),{alignItems:s="center",children:c,className:h,component:i,components:g={},componentsProps:w={},ContainerComponent:T="li",ContainerProps:{className:A,...D}={},dense:k=!1,disableGutters:I=!1,disablePadding:F=!1,divider:j=!1,secondaryAction:V,slotProps:W={},slots:Z={},...K}=r,ee=q.useContext(ah),se=q.useMemo(()=>({dense:k||ee.dense||!1,alignItems:s,disableGutters:I}),[s,ee.dense,k,I]),he=q.useRef(null),ye=q.Children.toArray(c),_e=ye.length&&Ob(ye[ye.length-1],["ListItemSecondaryAction"]),ae={...r,alignItems:s,dense:se.dense,disableGutters:I,disablePadding:F,divider:j,hasSecondaryAction:_e},be=Ywe(ae),Te=mo(he,n),Ae=Z.root||g.Root||Xwe,Re=W.root||w.root||{},He={className:Wn(be.root,Re.className,h),...K};let Se=i||"li";return _e?(Se=!He.component&&!i?"div":Se,T==="li"&&(Se==="li"?Se="div":He.component==="li"&&(He.component="div")),$.jsx(ah.Provider,{value:se,children:$.jsxs(Zwe,{as:T,className:Wn(be.container,A),ref:Te,ownerState:ae,...D,children:[$.jsx(Ae,{...Re,...!JS(Ae)&&{as:Se,ownerState:{...ae,...Re.ownerState}},...He,children:ye}),ye.pop()]})})):$.jsx(ah.Provider,{value:se,children:$.jsxs(Ae,{...Re,as:Se,ref:Te,...!JS(Ae)&&{ownerState:{...ae,...Re.ownerState}},...He,children:[ye,V&&$.jsx(DQ,{children:V})]})})});function Kwe(e){return fr("MuiListItemAvatar",e)}pr("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Qwe=e=>{const{alignItems:t,classes:n}=e;return dr({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Kwe,n)},Jwe=Ot("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),PQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiListItemAvatar"}),{className:s,...c}=r,h=q.useContext(ah),i={...r,alignItems:h.alignItems},g=Qwe(i);return $.jsx(Jwe,{className:Wn(g.root,s),ownerState:i,ref:n,...c})});nt.node;var nk={exports:{}},rk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jq;function eSe(){if(Jq)return rk;Jq=1;var e=mh();function t(A,D){return A===D&&(A!==0||1/A===1/D)||A!==A&&D!==D}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,c=e.useLayoutEffect,h=e.useDebugValue;function i(A,D){var k=D(),I=r({inst:{value:k,getSnapshot:D}}),F=I[0].inst,j=I[1];return c(function(){F.value=k,F.getSnapshot=D,g(F)&&j({inst:F})},[A,k,D]),s(function(){return g(F)&&j({inst:F}),A(function(){g(F)&&j({inst:F})})},[A]),h(k),k}function g(A){var D=A.getSnapshot;A=A.value;try{var k=D();return!n(A,k)}catch{return!0}}function w(A,D){return D()}var T=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w:i;return rk.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:T,rk}var e8;function tSe(){return e8||(e8=1,nk.exports=eSe()),nk.exports}var nSe=tSe();const IQ=0,kQ=1,OQ=2,t8=3;var n8=Object.prototype.hasOwnProperty;function zF(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&zF(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(n8.call(e,n)&&++r&&!n8.call(t,n)||!(n in t)||!zF(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const wg=new WeakMap,Vy=()=>{},qc=Vy(),FF=Object,Mo=e=>e===qc,Op=e=>typeof e=="function",ev=(e,t)=>({...e,...t}),LQ=e=>Op(e.then),ik={},nA={},xj="undefined",rE=typeof window!=xj,BF=typeof document!=xj,rSe=rE&&"Deno"in window,iSe=()=>rE&&typeof window.requestAnimationFrame!=xj,zQ=(e,t)=>{const n=wg.get(e);return[()=>!Mo(t)&&e.get(t)||ik,r=>{if(!Mo(t)){const s=e.get(t);t in nA||(nA[t]=s),n[5](t,ev(s,r),s||ik)}},n[6],()=>!Mo(t)&&t in nA?nA[t]:!Mo(t)&&e.get(t)||ik]};let NF=!0;const oSe=()=>NF,[jF,VF]=rE&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Vy,Vy],sSe=()=>{const e=BF&&document.visibilityState;return Mo(e)||e!=="hidden"},aSe=e=>(BF&&document.addEventListener("visibilitychange",e),jF("focus",e),()=>{BF&&document.removeEventListener("visibilitychange",e),VF("focus",e)}),lSe=e=>{const t=()=>{NF=!0,e()},n=()=>{NF=!1};return jF("online",t),jF("offline",n),()=>{VF("online",t),VF("offline",n)}},cSe={isOnline:oSe,isVisible:sSe},uSe={initFocus:aSe,initReconnect:lSe},r8=!St.useId,hT=!rE||rSe,dSe=e=>iSe()?window.requestAnimationFrame(e):setTimeout(e,1),ok=hT?q.useEffect:q.useLayoutEffect,sk=typeof navigator<"u"&&navigator.connection,i8=!hT&&sk&&(["slow-2g","2g"].includes(sk.effectiveType)||sk.saveData),rA=new WeakMap,ak=(e,t)=>FF.prototype.toString.call(e)===`[object ${t}]`;let hSe=0;const UF=e=>{const t=typeof e,n=ak(e,"Date"),r=ak(e,"RegExp"),s=ak(e,"Object");let c,h;if(FF(e)===e&&!n&&!r){if(c=rA.get(e),c)return c;if(c=++hSe+"~",rA.set(e,c),Array.isArray(e)){for(c="@",h=0;h<e.length;h++)c+=UF(e[h])+",";rA.set(e,c)}if(s){c="#";const i=FF.keys(e).sort();for(;!Mo(h=i.pop());)Mo(e[h])||(c+=h+":"+UF(e[h])+",");rA.set(e,c)}}else c=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return c},bj=e=>{if(Op(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?UF(e):"",[e,t]};let fSe=0;const $F=()=>++fSe;async function FQ(...e){const[t,n,r,s]=e,c=ev({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let h=c.populateCache;const i=c.rollbackOnError;let g=c.optimisticData;const w=D=>typeof i=="function"?i(D):i!==!1,T=c.throwOnError;if(Op(n)){const D=n,k=[],I=t.keys();for(const F of I)!/^\$(inf|sub)\$/.test(F)&&D(t.get(F)._k)&&k.push(F);return Promise.all(k.map(A))}return A(n);async function A(D){const[k]=bj(D);if(!k)return;const[I,F]=zQ(t,k),[j,V,W,Z]=wg.get(t),K=()=>{const Ae=j[k];return(Op(c.revalidate)?c.revalidate(I().data,D):c.revalidate!==!1)&&(delete W[k],delete Z[k],Ae&&Ae[0])?Ae[0](OQ).then(()=>I().data):I().data};if(e.length<3)return K();let ee=r,se;const he=$F();V[k]=[he,0];const ye=!Mo(g),_e=I(),ae=_e.data,be=_e._c,Te=Mo(be)?ae:be;if(ye&&(g=Op(g)?g(Te,ae):g,F({data:g,_c:Te})),Op(ee))try{ee=ee(Te)}catch(Ae){se=Ae}if(ee&&LQ(ee))if(ee=await ee.catch(Ae=>{se=Ae}),he!==V[k][0]){if(se)throw se;return ee}else se&&ye&&w(se)&&(h=!0,F({data:Te,_c:qc}));if(h&&!se)if(Op(h)){const Ae=h(ee,Te);F({data:Ae,error:qc,_c:qc})}else F({data:ee,error:qc,_c:qc});if(V[k][1]=$F(),Promise.resolve(K()).then(()=>{F({_c:qc})}),se){if(T)throw se;return}return ee}}const o8=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},pSe=(e,t)=>{if(!wg.has(e)){const n=ev(uSe,t),r=Object.create(null),s=FQ.bind(qc,e);let c=Vy;const h=Object.create(null),i=(T,A)=>{const D=h[T]||[];return h[T]=D,D.push(A),()=>D.splice(D.indexOf(A),1)},g=(T,A,D)=>{e.set(T,A);const k=h[T];if(k)for(const I of k)I(A,D)},w=()=>{if(!wg.has(e)&&(wg.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,g,i]),!hT)){const T=n.initFocus(setTimeout.bind(qc,o8.bind(qc,r,IQ))),A=n.initReconnect(setTimeout.bind(qc,o8.bind(qc,r,kQ)));c=()=>{T&&T(),A&&A(),wg.delete(e)}}};return w(),[e,s,w,c]}return[e,wg.get(e)[4]]},mSe=(e,t,n,r,s)=>{const c=n.errorRetryCount,h=s.retryCount,i=~~((Math.random()+.5)*(1<<(h<8?h:8)))*n.errorRetryInterval;!Mo(c)&&h>c||setTimeout(r,i,s)},gSe=zF,[BQ,NQ]=pSe(new Map),ySe=ev({onLoadingSlow:Vy,onSuccess:Vy,onError:Vy,onErrorRetry:mSe,onDiscarded:Vy,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:i8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:i8?5e3:3e3,compare:gSe,isPaused:()=>!1,cache:BQ,mutate:NQ,fallback:{}},cSe),vSe=(e,t)=>{const n=ev(e,t);if(t){const{use:r,fallback:s}=e,{use:c,fallback:h}=t;r&&c&&(n.use=r.concat(c)),s&&h&&(n.fallback=ev(s,h))}return n},_Se=q.createContext({}),xSe="$inf$",jQ=rE&&window.__SWR_DEVTOOLS_USE__,bSe=jQ?window.__SWR_DEVTOOLS_USE__:[],wSe=()=>{jQ&&(window.__SWR_DEVTOOLS_REACT__=St)},SSe=e=>Op(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],TSe=()=>ev(ySe,q.useContext(_Se)),ESe=e=>(t,n,r)=>e(t,n&&((...c)=>{const[h]=bj(t),[,,,i]=wg.get(BQ);if(h.startsWith(xSe))return n(...c);const g=i[h];return Mo(g)?n(...c):(delete i[h],g)}),r),CSe=bSe.concat(ESe),ASe=e=>function(...n){const r=TSe(),[s,c,h]=SSe(n),i=vSe(r,h);let g=e;const{use:w}=i,T=(w||[]).concat(CSe);for(let A=T.length;A--;)g=T[A](g);return g(s,c||i.fetcher||null,i)},MSe=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};wSe();const lk=St.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),ck={dedupe:!0},RSe=(e,t,n)=>{const{cache:r,compare:s,suspense:c,fallbackData:h,revalidateOnMount:i,revalidateIfStale:g,refreshInterval:w,refreshWhenHidden:T,refreshWhenOffline:A,keepPreviousData:D}=n,[k,I,F,j]=wg.get(r),[V,W]=bj(e),Z=q.useRef(!1),K=q.useRef(!1),ee=q.useRef(V),se=q.useRef(t),he=q.useRef(n),ye=()=>he.current,_e=()=>ye().isVisible()&&ye().isOnline(),[ae,be,Te,Ae]=zQ(r,V),Re=q.useRef({}).current,He=Mo(h)?Mo(n.fallback)?qc:n.fallback[V]:h,Se=(Bt,Kt)=>{for(const _n in Re){const an=_n;if(an==="data"){if(!s(Bt[an],Kt[an])&&(!Mo(Bt[an])||!s(It,Kt[an])))return!1}else if(Kt[an]!==Bt[an])return!1}return!0},qe=q.useMemo(()=>{const Bt=!V||!t?!1:Mo(i)?ye().isPaused()||c?!1:g!==!1:i,Kt=wn=>{const Vn=ev(wn);return delete Vn._k,Bt?{isValidating:!0,isLoading:!0,...Vn}:Vn},_n=ae(),an=Ae(),Ft=Kt(_n),kn=_n===an?Ft:Kt(an);let Yn=Ft;return[()=>{const wn=Kt(ae());return Se(wn,Yn)?(Yn.data=wn.data,Yn.isLoading=wn.isLoading,Yn.isValidating=wn.isValidating,Yn.error=wn.error,Yn):(Yn=wn,wn)},()=>kn]},[r,V]),it=nSe.useSyncExternalStore(q.useCallback(Bt=>Te(V,(Kt,_n)=>{Se(_n,Kt)||Bt()}),[r,V]),qe[0],qe[1]),tt=!Z.current,Oe=k[V]&&k[V].length>0,Je=it.data,yt=Mo(Je)?He&&LQ(He)?lk(He):He:Je,wt=it.error,$t=q.useRef(yt),It=D?Mo(Je)?Mo($t.current)?yt:$t.current:Je:yt,vt=Oe&&!Mo(wt)?!1:tt&&!Mo(i)?i:ye().isPaused()?!1:c?Mo(yt)?!1:g:Mo(yt)||g,sn=!!(V&&t&&tt&&vt),Rn=Mo(it.isValidating)?sn:it.isValidating,yn=Mo(it.isLoading)?sn:it.isLoading,Qt=q.useCallback(async Bt=>{const Kt=se.current;if(!V||!Kt||K.current||ye().isPaused())return!1;let _n,an,Ft=!0;const kn=Bt||{},Yn=!F[V]||!kn.dedupe,wn=()=>r8?!K.current&&V===ee.current&&Z.current:V===ee.current,Vn={isValidating:!1,isLoading:!1},ut=()=>{be(Vn)},gn=()=>{const Wt=F[V];Wt&&Wt[1]===an&&delete F[V]},Rt={isValidating:!0};Mo(ae().data)&&(Rt.isLoading=!0);try{if(Yn&&(be(Rt),n.loadingTimeout&&Mo(ae().data)&&setTimeout(()=>{Ft&&wn()&&ye().onLoadingSlow(V,n)},n.loadingTimeout),F[V]=[Kt(W),$F()]),[_n,an]=F[V],_n=await _n,Yn&&setTimeout(gn,n.dedupingInterval),!F[V]||F[V][1]!==an)return Yn&&wn()&&ye().onDiscarded(V),!1;Vn.error=qc;const Wt=I[V];if(!Mo(Wt)&&(an<=Wt[0]||an<=Wt[1]||Wt[1]===0))return ut(),Yn&&wn()&&ye().onDiscarded(V),!1;const zn=ae().data;Vn.data=s(zn,_n)?zn:_n,Yn&&wn()&&ye().onSuccess(_n,V,n)}catch(Wt){gn();const zn=ye(),{shouldRetryOnError:Un}=zn;zn.isPaused()||(Vn.error=Wt,Yn&&wn()&&(zn.onError(Wt,V,zn),(Un===!0||Op(Un)&&Un(Wt))&&(!ye().revalidateOnFocus||!ye().revalidateOnReconnect||_e())&&zn.onErrorRetry(Wt,V,zn,mr=>{const Xn=k[V];Xn&&Xn[0]&&Xn[0](t8,mr)},{retryCount:(kn.retryCount||0)+1,dedupe:!0})))}return Ft=!1,ut(),!0},[V,r]),Jt=q.useCallback((...Bt)=>FQ(r,ee.current,...Bt),[]);if(ok(()=>{se.current=t,he.current=n,Mo(Je)||($t.current=Je)}),ok(()=>{if(!V)return;const Bt=Qt.bind(qc,ck);let Kt=0;ye().revalidateOnFocus&&(Kt=Date.now()+ye().focusThrottleInterval);const an=MSe(V,k,(Ft,kn={})=>{if(Ft==IQ){const Yn=Date.now();ye().revalidateOnFocus&&Yn>Kt&&_e()&&(Kt=Yn+ye().focusThrottleInterval,Bt())}else if(Ft==kQ)ye().revalidateOnReconnect&&_e()&&Bt();else{if(Ft==OQ)return Qt();if(Ft==t8)return Qt(kn)}});return K.current=!1,ee.current=V,Z.current=!0,be({_k:W}),vt&&(Mo(yt)||hT?Bt():dSe(Bt)),()=>{K.current=!0,an()}},[V]),ok(()=>{let Bt;function Kt(){const an=Op(w)?w(ae().data):w;an&&Bt!==-1&&(Bt=setTimeout(_n,an))}function _n(){!ae().error&&(T||ye().isVisible())&&(A||ye().isOnline())?Qt(ck).then(Kt):Kt()}return Kt(),()=>{Bt&&(clearTimeout(Bt),Bt=-1)}},[w,T,A,V]),q.useDebugValue(It),c&&Mo(yt)&&V){if(!r8&&hT)throw new Error("Fallback data is required when using Suspense in SSR.");se.current=t,he.current=n,K.current=!1;const Bt=j[V];if(!Mo(Bt)){const Kt=Jt(Bt);lk(Kt)}if(Mo(wt)){const Kt=Qt(ck);Mo(It)||(Kt.status="fulfilled",Kt.value=!0),lk(Kt)}else throw wt}return{mutate:Jt,get data(){return Re.data=!0,It},get error(){return Re.error=!0,wt},get isValidating(){return Re.isValidating=!0,Rn},get isLoading(){return Re.isLoading=!0,yn}}},DSe=ASe(RSe),PSe={openedItem:"dashboard",openedComponent:"buttons",openedHorizontalItem:null,isDashboardDrawerOpened:!1,isComponentDrawerOpened:!0},rR={key:"api/menu",master:"master"};function j0(){const{data:e,isLoading:t}=DSe(rR.key+rR.master,()=>PSe,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return q.useMemo(()=>({menuMaster:e,menuMasterLoading:t}),[e,t])}function iR(e){NQ(rR.key+rR.master,t=>({...t,isDashboardDrawerOpened:e}),!1)}function ISe(){const e=cs(),t=f1(e.breakpoints.down("md")),{menuMaster:n}=j0();return n.isDashboardDrawerOpened,$.jsxs($.Fragment,{children:[$.jsx(Dr,{sx:{width:t?"auto":228,display:"flex"},children:$.jsx(Dr,{component:"span",sx:{display:{xs:"none",md:"block"},flexGrow:1},children:$.jsx(QX,{})})}),$.jsx(Dr,{sx:{flexGrow:1}}),$.jsx(Dr,{sx:{flexGrow:1}}),$.jsx(b1e,{})]})}function kSe(e){return fr("MuiDrawer",e)}pr("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const VQ=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},OSe=e=>{const{classes:t,anchor:n,variant:r}=e,s={root:["root",`anchor${Mn(n)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Mn(n)}`,r!=="temporary"&&`paperAnchorDocked${Mn(n)}`]};return dr(s,kSe,t)},LSe=Ot(gj,{name:"MuiDrawer",slot:"Root",overridesResolver:VQ})(ri(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),zSe=Ot("div",{shouldForwardProp:_c,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:VQ})({flex:"0 0 auto"}),FSe=Ot(fu,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Mn(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Mn(n.anchor)}`]]}})(ri(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),UQ={left:"right",right:"left",top:"down",bottom:"up"};function BSe(e){return["left","right"].includes(e)}function NSe({direction:e},t){return e==="rtl"&&BSe(t)?UQ[t]:t}const $Q=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiDrawer"}),s=cs(),c=vc(),h={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{anchor:i="left",BackdropProps:g,children:w,className:T,elevation:A=16,hideBackdrop:D=!1,ModalProps:{BackdropProps:k,...I}={},onClose:F,open:j=!1,PaperProps:V={},SlideProps:W,TransitionComponent:Z,transitionDuration:K=h,variant:ee="temporary",slots:se={},slotProps:he={},...ye}=r,_e=q.useRef(!1);q.useEffect(()=>{_e.current=!0},[]);const ae=NSe({direction:c?"rtl":"ltr"},i),Te={...r,anchor:i,elevation:A,open:j,variant:ee,...ye},Ae=OSe(Te),Re={slots:{transition:Z,...se},slotProps:{paper:V,transition:W,...he,backdrop:DN(he.backdrop||{...g,...k},{transitionDuration:K})}},[He,Se]=fi("root",{ref:n,elementType:LSe,className:Wn(Ae.root,Ae.modal,T),shouldForwardComponentProp:!0,ownerState:Te,externalForwardedProps:{...Re,...ye,...I},additionalProps:{open:j,onClose:F,hideBackdrop:D,slots:{backdrop:Re.slots.backdrop},slotProps:{backdrop:Re.slotProps.backdrop}}}),[qe,it]=fi("paper",{elementType:FSe,shouldForwardComponentProp:!0,className:Wn(Ae.paper,V.className),ownerState:Te,externalForwardedProps:Re,additionalProps:{elevation:ee==="temporary"?A:0,square:!0}}),[tt,Oe]=fi("docked",{elementType:zSe,ref:n,className:Wn(Ae.root,Ae.docked,T),ownerState:Te,externalForwardedProps:Re,additionalProps:ye}),[Je,yt]=fi("transition",{elementType:SZ,ownerState:Te,externalForwardedProps:Re,additionalProps:{in:j,direction:UQ[ae],timeout:K,appear:_e.current}}),wt=$.jsx(qe,{...it,children:w});if(ee==="permanent")return $.jsx(tt,{...Oe,children:wt});const $t=$.jsx(Je,{...yt,children:wt});return ee==="persistent"?$.jsx(tt,{...Oe,children:$t}):$.jsx(He,{...Se,children:$t})});var iA={exports:{}},oA={exports:{}};/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Bp(e){return getComputedStyle(e)}function cu(e,t){for(var n in t){var r=t[n];typeof r=="number"&&(r=r+"px"),e.style[n]=r}return e}function sA(e){var t=document.createElement("div");return t.className=e,t}var s8=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Uy(e,t){if(!s8)throw new Error("No element matching method supported");return s8.call(e,t)}function Tb(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function a8(e,t){return Array.prototype.filter.call(e.children,function(n){return Uy(n,t)})}var Oa={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},qQ={x:null,y:null};function HQ(e,t){var n=e.element.classList,r=Oa.state.scrolling(t);n.contains(r)?clearTimeout(qQ[t]):n.add(r)}function GQ(e,t){qQ[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(Oa.state.scrolling(t))},e.settings.scrollingThreshold)}function jSe(e,t){HQ(e,t),GQ(e,t)}var iE=function(t){this.element=t,this.handlers={}},WQ={isEmpty:{configurable:!0}};iE.prototype.bind=function(t,n){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(n),this.element.addEventListener(t,n,!1)};iE.prototype.unbind=function(t,n){var r=this;this.handlers[t]=this.handlers[t].filter(function(s){return n&&s!==n?!0:(r.element.removeEventListener(t,s,!1),!1)})};iE.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};WQ.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(iE.prototype,WQ);var v1=function(){this.eventElements=[]};v1.prototype.eventElement=function(t){var n=this.eventElements.filter(function(r){return r.element===t})[0];return n||(n=new iE(t),this.eventElements.push(n)),n};v1.prototype.bind=function(t,n,r){this.eventElement(t).bind(n,r)};v1.prototype.unbind=function(t,n,r){var s=this.eventElement(t);s.unbind(n,r),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};v1.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};v1.prototype.once=function(t,n,r){var s=this.eventElement(t),c=function(h){s.unbind(n,c),r(h)};s.bind(n,c)};function aA(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function oR(e,t,n,r,s){r===void 0&&(r=!0),s===void 0&&(s=!1);var c;if(t==="top")c=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")c=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");VSe(e,n,c,r,s)}function VSe(e,t,n,r,s){var c=n[0],h=n[1],i=n[2],g=n[3],w=n[4],T=n[5];r===void 0&&(r=!0),s===void 0&&(s=!1);var A=e.element;e.reach[g]=null,A[i]<1&&(e.reach[g]="start"),A[i]>e[c]-e[h]-1&&(e.reach[g]="end"),t&&(A.dispatchEvent(aA("ps-scroll-"+g)),t<0?A.dispatchEvent(aA("ps-scroll-"+w)):t>0&&A.dispatchEvent(aA("ps-scroll-"+T)),r&&jSe(e,g)),e.reach[g]&&(t||s)&&A.dispatchEvent(aA("ps-"+g+"-reach-"+e.reach[g]))}function Bs(e){return parseInt(e,10)||0}function USe(e){return Uy(e,"input,[contenteditable]")||Uy(e,"select,[contenteditable]")||Uy(e,"textarea,[contenteditable]")||Uy(e,"button,[contenteditable]")}function $Se(e){var t=Bp(e);return Bs(t.width)+Bs(t.paddingLeft)+Bs(t.paddingRight)+Bs(t.borderLeftWidth)+Bs(t.borderRightWidth)}var mb={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Og(e){var t=e.element,n=Math.floor(t.scrollTop),r=t.getBoundingClientRect();e.containerWidth=Math.floor(r.width),e.containerHeight=Math.floor(r.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(a8(t,Oa.element.rail("x")).forEach(function(s){return Tb(s)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(a8(t,Oa.element.rail("y")).forEach(function(s){return Tb(s)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=l8(e,Bs(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=Bs((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=l8(e,Bs(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=Bs(n*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),qSe(t,e),e.scrollbarXActive?t.classList.add(Oa.state.active("x")):(t.classList.remove(Oa.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add(Oa.state.active("y")):(t.classList.remove(Oa.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function l8(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function qSe(e,t){var n={width:t.railXWidth},r=Math.floor(e.scrollTop);t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-r:n.top=t.scrollbarXTop+r,cu(t.scrollbarXRail,n);var s={top:r,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?s.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:s.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?s.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:s.left=t.scrollbarYLeft+e.scrollLeft,cu(t.scrollbarYRail,s),cu(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),cu(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function HSe(e){e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,r=n>e.scrollbarYTop?1:-1;e.element.scrollTop+=r*e.containerHeight,Og(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,r=n>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=r*e.containerWidth,Og(e),t.stopPropagation()})}var lA=null;function GSe(e){c8(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),c8(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function c8(e,t){var n=t[0],r=t[1],s=t[2],c=t[3],h=t[4],i=t[5],g=t[6],w=t[7],T=t[8],A=e.element,D=null,k=null,I=null;function F(W){W.touches&&W.touches[0]&&(W[s]=W.touches[0]["page"+w.toUpperCase()]),lA===h&&(A[g]=D+I*(W[s]-k),HQ(e,w),Og(e),W.stopPropagation(),W.preventDefault())}function j(){GQ(e,w),e[T].classList.remove(Oa.state.clicking),document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",j),lA=null}function V(W){lA===null&&(lA=h,D=A[g],W.touches&&(W[s]=W.touches[0]["page"+w.toUpperCase()]),k=W[s],I=(e[r]-e[n])/(e[c]-e[i]),W.touches?(document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",j)):(document.addEventListener("mousemove",F),document.addEventListener("mouseup",j)),e[T].classList.add(Oa.state.clicking)),W.stopPropagation(),W.cancelable&&W.preventDefault()}e[h].addEventListener("mousedown",V),e[h].addEventListener("touchstart",V)}function WSe(e){var t=e.element,n=function(){return Uy(t,":hover")},r=function(){return Uy(e.scrollbarX,":focus")||Uy(e.scrollbarY,":focus")};function s(c,h){var i=Math.floor(t.scrollTop);if(c===0){if(!e.scrollbarYActive)return!1;if(i===0&&h>0||i>=e.contentHeight-e.containerHeight&&h<0)return!e.settings.wheelPropagation}var g=t.scrollLeft;if(h===0){if(!e.scrollbarXActive)return!1;if(g===0&&c<0||g>=e.contentWidth-e.containerWidth&&c>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)&&!(!n()&&!r())){var h=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(h){if(h.tagName==="IFRAME")h=h.contentDocument.activeElement;else for(;h.shadowRoot;)h=h.shadowRoot.activeElement;if(USe(h))return}var i=0,g=0;switch(c.which){case 37:c.metaKey?i=-e.contentWidth:c.altKey?i=-e.containerWidth:i=-30;break;case 38:c.metaKey?g=e.contentHeight:c.altKey?g=e.containerHeight:g=30;break;case 39:c.metaKey?i=e.contentWidth:c.altKey?i=e.containerWidth:i=30;break;case 40:c.metaKey?g=-e.contentHeight:c.altKey?g=-e.containerHeight:g=-30;break;case 32:c.shiftKey?g=e.containerHeight:g=-e.containerHeight;break;case 33:g=e.containerHeight;break;case 34:g=-e.containerHeight;break;case 36:g=e.contentHeight;break;case 35:g=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&i!==0||e.settings.suppressScrollY&&g!==0||(t.scrollTop-=g,t.scrollLeft+=i,Og(e),s(i,g)&&c.preventDefault())}})}function YSe(e){var t=e.element;function n(h,i){var g=Math.floor(t.scrollTop),w=t.scrollTop===0,T=g+t.offsetHeight===t.scrollHeight,A=t.scrollLeft===0,D=t.scrollLeft+t.offsetWidth===t.scrollWidth,k;return Math.abs(i)>Math.abs(h)?k=w||T:k=A||D,k?!e.settings.wheelPropagation:!0}function r(h){var i=h.deltaX,g=-1*h.deltaY;return(typeof i>"u"||typeof g>"u")&&(i=-1*h.wheelDeltaX/6,g=h.wheelDeltaY/6),h.deltaMode&&h.deltaMode===1&&(i*=10,g*=10),i!==i&&g!==g&&(i=0,g=h.wheelDelta),h.shiftKey?[-g,-i]:[i,g]}function s(h,i,g){if(!mb.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(h))return!1;for(var w=h;w&&w!==t;){if(w.classList.contains(Oa.element.consuming))return!0;var T=Bp(w);if(g&&T.overflowY.match(/(scroll|auto)/)){var A=w.scrollHeight-w.clientHeight;if(A>0&&(w.scrollTop>0&&g<0||w.scrollTop<A&&g>0))return!0}if(i&&T.overflowX.match(/(scroll|auto)/)){var D=w.scrollWidth-w.clientWidth;if(D>0&&(w.scrollLeft>0&&i<0||w.scrollLeft<D&&i>0))return!0}w=w.parentNode}return!1}function c(h){var i=r(h),g=i[0],w=i[1];if(!s(h.target,g,w)){var T=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(w?t.scrollTop-=w*e.settings.wheelSpeed:t.scrollTop+=g*e.settings.wheelSpeed,T=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(g?t.scrollLeft+=g*e.settings.wheelSpeed:t.scrollLeft-=w*e.settings.wheelSpeed,T=!0):(t.scrollTop-=w*e.settings.wheelSpeed,t.scrollLeft+=g*e.settings.wheelSpeed),Og(e),T=T||n(g,w),T&&!h.ctrlKey&&(h.stopPropagation(),h.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",c):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",c)}function XSe(e){if(!mb.supportsTouch&&!mb.supportsIePointer)return;var t=e.element,n={startOffset:{},startTime:0,speed:{},easingLoop:null};function r(A,D){var k=Math.floor(t.scrollTop),I=t.scrollLeft,F=Math.abs(A),j=Math.abs(D);if(j>F){if(D<0&&k===e.contentHeight-e.containerHeight||D>0&&k===0)return window.scrollY===0&&D>0&&mb.isChrome}else if(F>j&&(A<0&&I===e.contentWidth-e.containerWidth||A>0&&I===0))return!0;return!0}function s(A,D){t.scrollTop-=D,t.scrollLeft-=A,Og(e)}function c(A){return A.targetTouches?A.targetTouches[0]:A}function h(A){return A.target===e.scrollbarX||A.target===e.scrollbarY||A.pointerType&&A.pointerType==="pen"&&A.buttons===0?!1:!!(A.targetTouches&&A.targetTouches.length===1||A.pointerType&&A.pointerType!=="mouse"&&A.pointerType!==A.MSPOINTER_TYPE_MOUSE)}function i(A){if(h(A)){var D=c(A);n.startOffset.pageX=D.pageX,n.startOffset.pageY=D.pageY,n.startTime=new Date().getTime(),n.easingLoop!==null&&clearInterval(n.easingLoop)}}function g(A,D,k){if(!t.contains(A))return!1;for(var I=A;I&&I!==t;){if(I.classList.contains(Oa.element.consuming))return!0;var F=Bp(I);if(k&&F.overflowY.match(/(scroll|auto)/)){var j=I.scrollHeight-I.clientHeight;if(j>0&&(I.scrollTop>0&&k<0||I.scrollTop<j&&k>0))return!0}if(D&&F.overflowX.match(/(scroll|auto)/)){var V=I.scrollWidth-I.clientWidth;if(V>0&&(I.scrollLeft>0&&D<0||I.scrollLeft<V&&D>0))return!0}I=I.parentNode}return!1}function w(A){if(h(A)){var D=c(A),k={pageX:D.pageX,pageY:D.pageY},I=k.pageX-n.startOffset.pageX,F=k.pageY-n.startOffset.pageY;if(g(A.target,I,F))return;s(I,F),n.startOffset=k;var j=new Date().getTime(),V=j-n.startTime;V>0&&(n.speed.x=I/V,n.speed.y=F/V,n.startTime=j),r(I,F)&&A.cancelable&&A.preventDefault()}}function T(){e.settings.swipeEasing&&(clearInterval(n.easingLoop),n.easingLoop=setInterval(function(){if(e.isInitialized){clearInterval(n.easingLoop);return}if(!n.speed.x&&!n.speed.y){clearInterval(n.easingLoop);return}if(Math.abs(n.speed.x)<.01&&Math.abs(n.speed.y)<.01){clearInterval(n.easingLoop);return}s(n.speed.x*30,n.speed.y*30),n.speed.x*=.8,n.speed.y*=.8},10))}mb.supportsTouch?(e.event.bind(t,"touchstart",i),e.event.bind(t,"touchmove",w),e.event.bind(t,"touchend",T)):mb.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",i),e.event.bind(t,"pointermove",w),e.event.bind(t,"pointerup",T)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",i),e.event.bind(t,"MSPointerMove",w),e.event.bind(t,"MSPointerUp",T)))}var ZSe=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},KSe={"click-rail":HSe,"drag-thumb":GSe,keyboard:WSe,wheel:YSe,touch:XSe},oE=function(t,n){var r=this;if(n===void 0&&(n={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add(Oa.main),this.settings=ZSe();for(var s in n)this.settings[s]=n[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var c=function(){return t.classList.add(Oa.state.focus)},h=function(){return t.classList.remove(Oa.state.focus)};this.isRtl=Bp(t).direction==="rtl",this.isRtl===!0&&t.classList.add(Oa.rtl),this.isNegativeScroll=function(){var w=t.scrollLeft,T=null;return t.scrollLeft=-1,T=t.scrollLeft<0,t.scrollLeft=w,T}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new v1,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=sA(Oa.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=sA(Oa.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",c),this.event.bind(this.scrollbarX,"blur",h),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var i=Bp(this.scrollbarXRail);this.scrollbarXBottom=parseInt(i.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Bs(i.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Bs(i.borderLeftWidth)+Bs(i.borderRightWidth),cu(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Bs(i.marginLeft)+Bs(i.marginRight),cu(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=sA(Oa.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=sA(Oa.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",c),this.event.bind(this.scrollbarY,"blur",h),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var g=Bp(this.scrollbarYRail);this.scrollbarYRight=parseInt(g.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Bs(g.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?$Se(this.scrollbarY):null,this.railBorderYWidth=Bs(g.borderTopWidth)+Bs(g.borderBottomWidth),cu(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Bs(g.marginTop)+Bs(g.marginBottom),cu(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(w){return KSe[w](r)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(w){return r.onScroll(w)}),Og(this)};oE.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,cu(this.scrollbarXRail,{display:"block"}),cu(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Bs(Bp(this.scrollbarXRail).marginLeft)+Bs(Bp(this.scrollbarXRail).marginRight),this.railYMarginHeight=Bs(Bp(this.scrollbarYRail).marginTop)+Bs(Bp(this.scrollbarYRail).marginBottom),cu(this.scrollbarXRail,{display:"none"}),cu(this.scrollbarYRail,{display:"none"}),Og(this),oR(this,"top",0,!1,!0),oR(this,"left",0,!1,!0),cu(this.scrollbarXRail,{display:""}),cu(this.scrollbarYRail,{display:""}))};oE.prototype.onScroll=function(t){this.isAlive&&(Og(this),oR(this,"top",this.element.scrollTop-this.lastScrollTop),oR(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};oE.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),Tb(this.scrollbarX),Tb(this.scrollbarY),Tb(this.scrollbarXRail),Tb(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};oE.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const QSe=Object.freeze(Object.defineProperty({__proto__:null,default:oE},Symbol.toStringTag,{value:"Module"})),JSe=Lse(QSe);var u8;function eTe(){return u8||(u8=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(j){for(var V=1;V<arguments.length;V++){var W=arguments[V];for(var Z in W)Object.prototype.hasOwnProperty.call(W,Z)&&(j[Z]=W[Z])}return j},r=function(){function j(V,W){for(var Z=0;Z<W.length;Z++){var K=W[Z];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(V,K.key,K)}}return function(V,W,Z){return W&&j(V.prototype,W),Z&&j(V,Z),V}}(),s=mh(),c=w(s),h=JY(),i=JSe,g=w(i);function w(j){return j&&j.__esModule?j:{default:j}}function T(j,V){var W={};for(var Z in j)V.indexOf(Z)>=0||Object.prototype.hasOwnProperty.call(j,Z)&&(W[Z]=j[Z]);return W}function A(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}function D(j,V){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:j}function k(j,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);j.prototype=Object.create(V&&V.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(j,V):j.__proto__=V)}var I={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(I);var F=function(j){k(V,j);function V(W){A(this,V);var Z=D(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,W));return Z.handleRef=Z.handleRef.bind(Z),Z._handlerByEvent={},Z}return r(V,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new g.default(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(Z){this._updateEventHook(Z),this.updateScroll(),Z.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var Z=this;Object.keys(this._handlerByEvent).forEach(function(K){var ee=Z._handlerByEvent[K];ee&&Z._container.removeEventListener(K,ee,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var Z=this,K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(I).forEach(function(ee){var se=Z.props[I[ee]],he=K[I[ee]];if(se!==he){if(he){var ye=Z._handlerByEvent[ee];Z._container.removeEventListener(ee,ye,!1),Z._handlerByEvent[ee]=null}if(se){var _e=function(){return se(Z._container)};Z._container.addEventListener(ee,_e,!1),Z._handlerByEvent[ee]=_e}}})}},{key:"_updateClassName",value:function(){var Z=this.props.className,K=this._container.className.split(" ").filter(function(ee){return ee.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container"+(Z?" "+Z:"")+(K?" "+K:""))}},{key:"updateScroll",value:function(){this.props.onSync(this._ps)}},{key:"handleRef",value:function(Z){this._container=Z,this.props.containerRef(Z)}},{key:"render",value:function(){var Z=this.props;Z.className;var K=Z.style;Z.option,Z.options,Z.containerRef,Z.onScrollY,Z.onScrollX,Z.onScrollUp,Z.onScrollDown,Z.onScrollLeft,Z.onScrollRight,Z.onYReachStart,Z.onYReachEnd,Z.onXReachStart,Z.onXReachEnd;var ee=Z.component;Z.onSync;var se=Z.children,he=T(Z,["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"]),ye=ee;return c.default.createElement(ye,n({style:K,ref:this.handleRef},he),se)}}]),V}(s.Component);t.default=F,F.defaultProps={className:"",style:void 0,option:void 0,options:void 0,containerRef:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,onSync:function(V){return V.update()},component:"div"},F.propTypes={children:h.PropTypes.node.isRequired,className:h.PropTypes.string,style:h.PropTypes.object,option:h.PropTypes.object,options:h.PropTypes.object,containerRef:h.PropTypes.func,onScrollY:h.PropTypes.func,onScrollX:h.PropTypes.func,onScrollUp:h.PropTypes.func,onScrollDown:h.PropTypes.func,onScrollLeft:h.PropTypes.func,onScrollRight:h.PropTypes.func,onYReachStart:h.PropTypes.func,onYReachEnd:h.PropTypes.func,onXReachStart:h.PropTypes.func,onXReachEnd:h.PropTypes.func,onSync:h.PropTypes.func,component:h.PropTypes.string},e.exports=t.default}(oA,oA.exports)),oA.exports}var d8;function tTe(){return d8||(d8=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=eTe(),r=s(n);function s(c){return c&&c.__esModule?c:{default:c}}t.default=r.default,e.exports=t.default}(iA,iA.exports)),iA.exports}var nTe=tTe();const rTe=_a(nTe);function iTe(){return cs(),$.jsx(y0,{sx:{bgcolor:"primary.light",mb:2.75,overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:157,height:157,bgcolor:"primary.200",borderRadius:"50%",top:-105,right:-96}}})}const oTe=q.memo(iTe);nt.number,nt.any;function sTe(e){return fr("MuiTooltip",e)}const ta=pr("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function aTe(e){return Math.round(e*1e5)/1e5}const lTe=e=>{const{classes:t,disableInteractive:n,arrow:r,touch:s,placement:c}=e,h={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",s&&"touch",`tooltipPlacement${Mn(c.split("-")[0])}`],arrow:["arrow"]};return dr(h,sTe,t)},cTe=Ot(KT,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(ri(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${ta.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ta.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ta.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${ta.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ta.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ta.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ta.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ta.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),uTe=Ot("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${Mn(n.placement.split("-")[0])}`]]}})(ri(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:ai(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${ta.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${ta.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${ta.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${ta.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${aTe(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${ta.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${ta.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${ta.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${ta.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${ta.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${ta.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${ta.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${ta.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ta.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ta.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),dTe=Ot("span",{name:"MuiTooltip",slot:"Arrow"})(ri(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:ai(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let cA=!1;const h8=new nD;let Xw={x:0,y:0};function uA(e,t){return(n,...r)=>{t&&t(n,...r),e(n,...r)}}const YQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTooltip"}),{arrow:s=!1,children:c,classes:h,components:i={},componentsProps:g={},describeChild:w=!1,disableFocusListener:T=!1,disableHoverListener:A=!1,disableInteractive:D=!1,disableTouchListener:k=!1,enterDelay:I=100,enterNextDelay:F=0,enterTouchDelay:j=700,followCursor:V=!1,id:W,leaveDelay:Z=0,leaveTouchDelay:K=1500,onClose:ee,onOpen:se,open:he,placement:ye="bottom",PopperComponent:_e,PopperProps:ae={},slotProps:be={},slots:Te={},title:Ae,TransitionComponent:Re,TransitionProps:He,...Se}=r,qe=q.isValidElement(c)?c:$.jsx("span",{children:c}),it=cs(),tt=vc(),[Oe,Je]=q.useState(),[yt,wt]=q.useState(null),$t=q.useRef(!1),It=D||V,vt=rd(),sn=rd(),Rn=rd(),yn=rd(),[Qt,Jt]=Yp({controlled:he,default:!1,name:"Tooltip",state:"open"});let fn=Qt;const Bt=tm(W),Kt=q.useRef(),_n=Tr(()=>{Kt.current!==void 0&&(document.body.style.WebkitUserSelect=Kt.current,Kt.current=void 0),yn.clear()});q.useEffect(()=>_n,[_n]);const an=Pr=>{h8.clear(),cA=!0,Jt(!0),se&&!fn&&se(Pr)},Ft=Tr(Pr=>{h8.start(800+Z,()=>{cA=!1}),Jt(!1),ee&&fn&&ee(Pr),vt.start(it.transitions.duration.shortest,()=>{$t.current=!1})}),kn=Pr=>{$t.current&&Pr.type!=="touchstart"||(Oe&&Oe.removeAttribute("title"),sn.clear(),Rn.clear(),I||cA&&F?sn.start(cA?F:I,()=>{an(Pr)}):an(Pr))},Yn=Pr=>{sn.clear(),Rn.start(Z,()=>{Ft(Pr)})},[,wn]=q.useState(!1),Vn=Pr=>{jb(Pr.target)||(wn(!1),Yn(Pr))},ut=Pr=>{Oe||Je(Pr.currentTarget),jb(Pr.target)&&(wn(!0),kn(Pr))},gn=Pr=>{$t.current=!0;const De=qe.props;De.onTouchStart&&De.onTouchStart(Pr)},Rt=Pr=>{gn(Pr),Rn.clear(),vt.clear(),_n(),Kt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",yn.start(j,()=>{document.body.style.WebkitUserSelect=Kt.current,kn(Pr)})},Wt=Pr=>{qe.props.onTouchEnd&&qe.props.onTouchEnd(Pr),_n(),Rn.start(K,()=>{Ft(Pr)})};q.useEffect(()=>{if(!fn)return;function Pr(De){De.key==="Escape"&&Ft(De)}return document.addEventListener("keydown",Pr),()=>{document.removeEventListener("keydown",Pr)}},[Ft,fn]);const zn=mo(Fg(qe),Je,n);!Ae&&Ae!==0&&(fn=!1);const Un=q.useRef(),mr=Pr=>{const De=qe.props;De.onMouseMove&&De.onMouseMove(Pr),Xw={x:Pr.clientX,y:Pr.clientY},Un.current&&Un.current.update()},Xn={},or=typeof Ae=="string";w?(Xn.title=!fn&&or&&!A?Ae:null,Xn["aria-describedby"]=fn?Bt:null):(Xn["aria-label"]=or?Ae:null,Xn["aria-labelledby"]=fn&&!or?Bt:null);const En={...Xn,...Se,...qe.props,className:Wn(Se.className,qe.props.className),onTouchStart:gn,ref:zn,...V?{onMouseMove:mr}:{}},Fr={};k||(En.onTouchStart=Rt,En.onTouchEnd=Wt),A||(En.onMouseOver=uA(kn,En.onMouseOver),En.onMouseLeave=uA(Yn,En.onMouseLeave),It||(Fr.onMouseOver=kn,Fr.onMouseLeave=Yn)),T||(En.onFocus=uA(ut,En.onFocus),En.onBlur=uA(Vn,En.onBlur),It||(Fr.onFocus=ut,Fr.onBlur=Vn));const Er={...r,isRtl:tt,arrow:s,disableInteractive:It,placement:ye,PopperComponentProp:_e,touch:$t.current},_r=typeof be.popper=="function"?be.popper(Er):be.popper,nr=q.useMemo(()=>{var De,re;let Pr=[{name:"arrow",enabled:!!yt,options:{element:yt,padding:4}}];return(De=ae.popperOptions)!=null&&De.modifiers&&(Pr=Pr.concat(ae.popperOptions.modifiers)),(re=_r==null?void 0:_r.popperOptions)!=null&&re.modifiers&&(Pr=Pr.concat(_r.popperOptions.modifiers)),{...ae.popperOptions,..._r==null?void 0:_r.popperOptions,modifiers:Pr}},[yt,ae.popperOptions,_r==null?void 0:_r.popperOptions]),Wr=lTe(Er),wr=typeof be.transition=="function"?be.transition(Er):be.transition,Rr={slots:{popper:i.Popper,transition:i.Transition??Re,tooltip:i.Tooltip,arrow:i.Arrow,...Te},slotProps:{arrow:be.arrow??g.arrow,popper:{...ae,..._r??g.popper},tooltip:be.tooltip??g.tooltip,transition:{...He,...wr??g.transition}}},[Di,Wo]=fi("popper",{elementType:cTe,externalForwardedProps:Rr,ownerState:Er,className:Wn(Wr.popper,ae==null?void 0:ae.className)}),[ko,Ro]=fi("transition",{elementType:Wb,externalForwardedProps:Rr,ownerState:Er}),[bl,oa]=fi("tooltip",{elementType:uTe,className:Wr.tooltip,externalForwardedProps:Rr,ownerState:Er}),[dn,Hs]=fi("arrow",{elementType:dTe,className:Wr.arrow,externalForwardedProps:Rr,ownerState:Er,ref:wt});return $.jsxs(q.Fragment,{children:[q.cloneElement(qe,En),$.jsx(Di,{as:_e??KT,placement:ye,anchorEl:V?{getBoundingClientRect:()=>({top:Xw.y,left:Xw.x,right:Xw.x,bottom:Xw.y,width:0,height:0})}:Oe,popperRef:Un,open:Oe?fn:!1,id:Bt,transition:!0,...Fr,...Wo,popperOptions:nr,children:({TransitionProps:Pr})=>$.jsx(ko,{timeout:it.transitions.duration.shorter,...Pr,...Ro,children:$.jsxs(bl,{...oa,children:[Ae,s?$.jsx(dn,{...Hs}):null]})})})]})}),XQ=Es($.jsx("circle",{cx:"12",cy:"12",r:"8"}));function hD({item:e,level:t,isParents:n=!1,setSelectedID:r}){const s=cs(),c=f1(s.breakpoints.down("md")),h=q.useRef(null),{pathname:i}=gh(),{borderRadius:g}=y1(),{menuMaster:w}=j0(),T=w.isDashboardDrawerOpened,A=!!Tg({path:e!=null&&e.link?e.link:e.url,end:!1},i),[D,k]=q.useState(!1),I=()=>{const K=h.current&&h.current.scrollWidth>h.current.clientWidth;k(K)};q.useEffect(()=>{I(),window.addEventListener("resize",I),window.removeEventListener("resize",I)},[]);const F=e==null?void 0:e.icon,j=e!=null&&e.icon?$.jsx(F,{stroke:1.5,size:T?"20px":"24px",style:{...n&&{fontSize:20,stroke:"1.5"}}}):$.jsx(XQ,{sx:{width:A?8:6,height:A?8:6},fontSize:t>0?"inherit":"medium"});let V="_self";e.target&&(V="_blank");const W=()=>{c&&iR(!1),n&&r&&r()},Z="secondary.main";return $.jsx($.Fragment,{children:$.jsxs(qM,{component:Ny,to:e.url,target:V,disabled:e.disabled,disableRipple:!T,sx:{zIndex:1201,borderRadius:`${g}px`,mb:.5,...T&&t!==1&&{ml:`${t*18}px`},...!T&&{pl:1.25},...T&&t===1&&{"&:hover":{bgcolor:"secondary.light"},"&.Mui-selected":{bgcolor:"secondary.light",color:Z,"&:hover":{color:Z,bgcolor:"secondary.light"}}},...(!T||t!==1)&&{py:t===1?0:1,"&:hover":{bgcolor:"transparent"},"&.Mui-selected":{"&:hover":{bgcolor:"transparent"},bgcolor:"transparent"}}},selected:A,onClick:()=>W(),children:[$.jsx(hh,{"aria-label":"theme-icon",sx:{borderRadius:`${g}px`},disableRipple:T,children:$.jsx(HM,{sx:{minWidth:t===1?36:18,color:A?Z:"text.primary",...!T&&t===1&&{borderRadius:`${g}px`,width:46,height:46,alignItems:"center",justifyContent:"center","&:hover":{bgcolor:"secondary.light"},...A&&{bgcolor:"secondary.light","&:hover":{bgcolor:"secondary.light"}}}},children:j})}),(T||!T&&t!==1)&&$.jsx(YQ,{title:e.title,disableHoverListener:!D,children:$.jsx(Yb,{primary:$.jsx(rr,{ref:h,noWrap:!0,variant:A?"h5":"body1",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",width:102},children:e.title}),secondary:e.caption&&$.jsx(rr,{variant:"caption",gutterBottom:!0,sx:{display:"block",...s.typography.subMenuCaption},children:e.caption})})}),T&&e.chip&&$.jsx(N0,{color:e.chip.color,variant:e.chip.variant,size:e.chip.size,label:e.chip.label,avatar:e.chip.avatar&&$.jsx(WT,{children:e.chip.avatar})})]})})}hD.propTypes={item:nt.any,level:nt.number,isParents:nt.bool,setSelectedID:nt.func};function wj({menu:e,level:t,parentId:n}){var Te;const r=cs(),s=q.useRef(null),{borderRadius:c}=y1(),{menuMaster:h}=j0(),i=h.isDashboardDrawerOpened,[g,w]=q.useState(!1),[T,A]=q.useState(null),[D,k]=q.useState(null),I=Ae=>{k(null),i?(w(!g),A(T?null:e.id)):k(Ae==null?void 0:Ae.currentTarget)},F=!!D,j=()=>{w(!1),F||e.url||A(null),k(null)},{pathname:V}=gh(),W=(Ae,Re)=>{Ae.forEach(He=>{He.url===V&&(w(!0),A(Re))})};q.useEffect(()=>{w(!1),F?k(null):A(null),e.children&&e.children.forEach(Ae=>{var Re;(Re=Ae.children)!=null&&Re.length&&W(Ae.children,e.id),Ae.link&&Tg({path:Ae==null?void 0:Ae.link,end:!1},V)&&(A(e.id),w(!0)),Ae.url===V&&(A(e.id),w(!0))})},[V,e.children]);const[Z,K]=q.useState(!1),ee=()=>{const Ae=s.current&&s.current.scrollWidth>s.current.clientWidth;K(Ae)};q.useEffect(()=>{ee(),window.addEventListener("resize",ee),window.removeEventListener("resize",ee)},[]),q.useEffect(()=>{e.url===V&&(A(e.id),k(null),w(!0))},[V,e]);const se=(Te=e.children)==null?void 0:Te.map(Ae=>{switch(Ae.type){case"collapse":return $.jsx(wj,{menu:Ae,level:t+1,parentId:n},Ae.id);case"item":return $.jsx(hD,{item:Ae,level:t+1},Ae.id);default:return $.jsx(rr,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},Ae.id)}}),he=T===e.id,ye=e.icon,_e=e.icon?$.jsx(ye,{strokeWidth:1.5,size:i?"20px":"24px"}):$.jsx(XQ,{sx:{width:he?8:6,height:he?8:6},fontSize:t>0?"inherit":"medium"}),ae=i?$.jsx(Wme,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}):$.jsx(TZ,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}),be="secondary.main";return $.jsxs($.Fragment,{children:[$.jsxs(qM,{sx:{zIndex:1201,borderRadius:`${c}px`,mb:.5,...i&&t!==1&&{ml:`${t*18}px`},...!i&&{pl:1.25},...i&&t===1&&{"&:hover":{bgcolor:"secondary.light"},"&.Mui-selected":{bgcolor:"secondary.light",color:be,"&:hover":{color:be,bgcolor:"secondary.light"}}},...(!i||t!==1)&&{py:t===1?0:1,"&:hover":{bgcolor:"transparent"},"&.Mui-selected":{"&:hover":{bgcolor:"transparent"},bgcolor:"transparent"}}},selected:he,...!i&&{onMouseEnter:I,onMouseLeave:j},onClick:I,children:[_e&&$.jsx(HM,{sx:{minWidth:t===1?36:18,color:he?be:"text.primary",...!i&&t===1&&{borderRadius:`${c}px`,width:46,height:46,alignItems:"center",justifyContent:"center","&:hover":{bgcolor:"secondary.light"},...he&&{bgcolor:"secondary.light","&:hover":{bgcolor:"secondary.light"}}}},children:_e}),(i||!i&&t!==1)&&$.jsx(YQ,{title:e.title,disableHoverListener:!Z,children:$.jsx(Yb,{primary:$.jsx(rr,{ref:s,noWrap:!0,variant:he?"h5":"body1",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",width:120},children:e.title}),secondary:e.caption&&$.jsx(rr,{variant:"caption",gutterBottom:!0,sx:{display:"block",...r.typography.subMenuCaption},children:e.caption})})}),F||g?ae:$.jsx(Gme,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}),!i&&$.jsx(KT,{open:F,anchorEl:D,placement:"right-start",modifiers:[{name:"offset",options:{offset:[-12,0]}}],sx:{overflow:"visible",zIndex:2001,minWidth:180,"&:before":{content:'""',bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:120,borderLeft:"1px solid",borderBottom:"1px solid",borderColor:"divider"}},children:({TransitionProps:Ae})=>$.jsx(PN,{in:F,...Ae,children:$.jsx(fu,{sx:{overflow:"hidden",mt:1.5,boxShadow:r.shadows[8],backgroundImage:"none"},children:$.jsx(EZ,{onClickAway:j,children:$.jsx(Dr,{children:se})})})})})]}),i&&$.jsx(UM,{in:g,timeout:"auto",unmountOnExit:!0,children:g&&$.jsx(lv,{disablePadding:!0,sx:{position:"relative","&:after":{content:"''",position:"absolute",left:"25px",top:0,height:"100%",width:"1px",opacity:1,bgcolor:"primary.light"}},children:se})})]})}wj.propTypes={menu:nt.any,level:nt.number,parentId:nt.string};function ZQ({item:e,lastItem:t,remItems:n,lastItemId:r,setSelectedID:s}){var V;const c=cs(),{pathname:h}=gh(),{menuMaster:i}=j0(),g=i.isDashboardDrawerOpened,[w,T]=q.useState(null),[A,D]=q.useState(e),k=!!w;q.useEffect(()=>{if(t)if(e.id===r){const W={...e},Z=n.map(K=>K.elements);W.children=Z.flat(1),D(W)}else D(e)},[e,t,n,r]);const I=(W,Z)=>{W.forEach(K=>{var ee;(ee=K.children)!=null&&ee.length&&I(K.children,A.id),K!=null&&K.url&&Tg({path:K!=null&&K.link?K.link:K.url,end:!0},h)&&s(Z)})},F=W=>{(W.children?W.children:[]).forEach(K=>{var ee;(ee=K==null?void 0:K.children)!=null&&ee.length&&I(K.children,A.id),K!=null&&K.url&&Tg({path:K!=null&&K.link?K.link:K.url,end:!0},h)&&s(A.id)}),W!=null&&W.url&&Tg({path:W!=null&&W.link?W.link:W.url,end:!0},h)&&s(A.id)};q.useEffect(()=>{F(A),k&&T(null)},[h,A]);const j=(V=A.children)==null?void 0:V.map(W=>{switch(W==null?void 0:W.type){case"collapse":return $.jsx(wj,{menu:W,level:1,parentId:A.id},W.id);case"item":return $.jsx(hD,{item:W,level:1},W.id);default:return $.jsx(rr,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},W==null?void 0:W.id)}});return $.jsxs($.Fragment,{children:[$.jsx(lv,{disablePadding:!g,subheader:A.title&&g&&$.jsxs(rr,{variant:"caption",gutterBottom:!0,sx:{display:"block",...c.typography.menuCaption},children:[A.title,A.caption&&$.jsx(rr,{variant:"caption",gutterBottom:!0,sx:{display:"block",...c.typography.subMenuCaption},children:A.caption})]}),children:j}),g&&$.jsx(gu,{sx:{mt:.25,mb:1.25}})]})}ZQ.propTypes={item:nt.any,lastItem:nt.number,remItems:nt.array,lastItemId:nt.string,selectedID:nt.oneOfType([nt.any,nt.string]),setSelectedID:nt.oneOfType([nt.any,nt.func])};const hTe={id:"platform",title:"Platform",type:"group",children:[{id:"util-typography",title:"Orthomosaic Viewer",type:"item",url:"/project/1/View",icon:hge,breadcrumbs:!1},{id:"util-color",title:"Progress Comparison",type:"item",url:"/project/1/compare",icon:nge,breadcrumbs:!1},{id:"progressReport",title:"Progress Report",type:"item",url:"/project/1/dpr",icon:ige,breadcrumbs:!1},{id:"issueTaggingAndCoordination",title:"Issue Tagging & Coordination",type:"item",url:"/project/1/issue",icon:oge,breadcrumbs:!1},{id:"360viewer",title:"360 Viewer (Interior)",type:"item",url:"/project/1/report",icon:age,breadcrumbs:!1},{id:"projectFiles",title:"ProjectFiles",type:"item",url:"/project/1/files",icon:tge,breadcrumbs:!1}]},fTe={IconDroneOff:Xme},pTe={id:"superAdminList",type:"group",children:[{id:"Projects",title:"Projects",type:"item",url:"/project",icon:fTe.IconDroneOff,breadcrumbs:!1}]},mTe={id:"pages",title:"",caption:"",icon:s6,type:"group",children:[{id:"Settings",title:"Settings",type:"collapse",icon:s6,children:[{id:"Account",title:"Account",type:"item",url:"/pages/login",target:!0},{id:"Privacy",title:"Privacy",type:"item",url:"/pages/login",target:!0},{id:"Security",title:"Security",type:"item",url:"/pages/register",target:!0}]}]},NS={items:[pTe,hTe,mTe]};function gTe(){const{menuMaster:e}=j0(),t=e.isDashboardDrawerOpened,[n,r]=q.useState(""),s=null;let c=NS.items.length-1,h=[],i;const g=NS.items.slice(0,c+1).map((w,T)=>{switch(w.type){case"group":return w.url&&w.id!==i?$.jsxs(lv,{children:[$.jsx(hD,{item:w,level:1,isParents:!0,setSelectedID:()=>r("")}),T!==0&&$.jsx(gu,{sx:{py:.5}})]},w.id):$.jsx(ZQ,{setSelectedID:r,selectedID:n,item:w,lastItem:s,remItems:h,lastItemId:i},w.id);default:return $.jsx(rr,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},w.id)}});return $.jsx(Dr,{...t&&{sx:{mt:1.5}},children:g})}const f8=q.memo(gTe),l7e=3,u0=260;function p8(e){return{width:u0,borderRight:"none",zIndex:1099,background:e.palette.background.default,overflowX:"hidden",boxShadow:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen+200})}}function m8(e){return{borderRight:"none",zIndex:1099,background:e.palette.background.default,overflowX:"hidden",width:72,height:"auto",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen+200})}}const yTe=Ot($Q,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>({width:u0,borderRight:"0px",flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{...p8(e),"& .MuiDrawer-paper":p8(e)},...!t&&{...m8(e),"& .MuiDrawer-paper":m8(e)}}));function vTe(e){return fr("MuiIconButton",e)}const g8=pr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),_Te=e=>{const{classes:t,disabled:n,color:r,edge:s,size:c,loading:h}=e,i={root:["root",h&&"loading",n&&"disabled",r!=="default"&&`color${Mn(r)}`,s&&`edge${Mn(s)}`,`size${Mn(c)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return dr(i,vTe,t)},xTe=Ot(hh,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Mn(n.color)}`],n.edge&&t[`edge${Mn(n.edge)}`],t[`size${Mn(n.size)}`]]}})(ri(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ri(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${g8.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${g8.loading}`]:{color:"transparent"}}))),bTe=Ot("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),fT=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiIconButton"}),{edge:s=!1,children:c,className:h,color:i="default",disabled:g=!1,disableFocusRipple:w=!1,size:T="medium",id:A,loading:D=null,loadingIndicator:k,...I}=r,F=tm(A),j=k??$.jsx(AZ,{"aria-labelledby":F,color:"inherit",size:16}),V={...r,edge:s,color:i,disabled:g,disableFocusRipple:w,loading:D,loadingIndicator:j,size:T},W=_Te(V);return $.jsxs(xTe,{id:D?F:A,className:Wn(W.root,h),centerRipple:!0,focusRipple:!w,disabled:g||D,ref:n,...I,ownerState:V,children:[typeof D=="boolean"&&$.jsx("span",{className:W.loadingWrapper,style:{display:"contents"},children:$.jsx(bTe,{className:W.loadingIndicator,ownerState:V,children:D&&j})}),c]})}),wTe=Es($.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),STe=Ot(hh)(ri(({theme:e})=>({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`,...e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}},"&:active":{boxShadow:e.shadows[0],...e.palette.mode==="light"?{backgroundColor:q3(e.palette.grey[200],.12)}:{backgroundColor:q3(e.palette.grey[600],.12)}}}))),TTe=Ot(wTe)({width:24,height:16});function ETe(e){const{slots:t={},slotProps:n={},...r}=e,s=e;return $.jsx("li",{children:$.jsx(STe,{focusRipple:!0,...r,ownerState:s,children:$.jsx(TTe,{as:t.CollapsedIcon,ownerState:s,...n.collapsedIcon})})})}function CTe(e){return fr("MuiBreadcrumbs",e)}const ATe=pr("MuiBreadcrumbs",["root","ol","li","separator"]),MTe=e=>{const{classes:t}=e;return dr({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},CTe,t)},RTe=Ot(rr,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${ATe.li}`]:t.li},t.root]})({}),DTe=Ot("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),PTe=Ot("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function ITe(e,t,n,r){return e.reduce((s,c,h)=>(h<e.length-1?s=s.concat(c,$.jsx(PTe,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${h}`)):s.push(c),s),[])}const uk=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiBreadcrumbs"}),{children:s,className:c,component:h="nav",slots:i={},slotProps:g={},expandText:w="Show path",itemsAfterCollapse:T=1,itemsBeforeCollapse:A=1,maxItems:D=8,separator:k="/",...I}=r,[F,j]=q.useState(!1),V={...r,component:h,expanded:F,expandText:w,itemsAfterCollapse:T,itemsBeforeCollapse:A,maxItems:D,separator:k},W=MTe(V),Z=xo({elementType:i.CollapsedIcon,externalSlotProps:g.collapsedIcon,ownerState:V}),K=q.useRef(null),ee=he=>{const ye=()=>{j(!0);const _e=K.current.querySelector("a[href],button,[tabindex]");_e&&_e.focus()};return A+T>=he.length?he:[...he.slice(0,A),$.jsx(ETe,{"aria-label":w,slots:{CollapsedIcon:i.CollapsedIcon},slotProps:{collapsedIcon:Z},onClick:ye},"ellipsis"),...he.slice(he.length-T,he.length)]},se=q.Children.toArray(s).filter(he=>q.isValidElement(he)).map((he,ye)=>$.jsx("li",{className:W.li,children:he},`child-${ye}`));return $.jsx(RTe,{ref:n,component:h,color:"textSecondary",className:Wn(W.root,c),ownerState:V,...I,children:$.jsx(DTe,{className:W.ol,ref:K,ownerState:V,children:ITe(F||D&&se.length<=D?se:ee(se),W.separator,k,V)})})});function kTe(e){return fr("MuiCardMedia",e)}pr("MuiCardMedia",["root","media","img"]);const OTe=e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return dr({root:["root",n&&"media",r&&"img"]},kTe,t)},LTe=Ot("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:s}=n;return[t.root,r&&t.media,s&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),zTe=["video","audio","picture","iframe","img"],FTe=["picture","img"],KQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCardMedia"}),{children:s,className:c,component:h="div",image:i,src:g,style:w,...T}=r,A=zTe.includes(h),D=!A&&i?{backgroundImage:`url("${i}")`,...w}:w,k={...r,component:h,isMediaComponent:A,isImageComponent:FTe.includes(h)},I=OTe(k);return $.jsx(LTe,{className:Wn(I.root,c),as:h,role:!A&&i?"img":void 0,ref:n,style:D,ownerState:k,src:A?i||g:void 0,...T,children:s})}),BTe=Es($.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),NTe=Es($.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),jTe=Es($.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function VTe(e){return fr("MuiCheckbox",e)}const dk=pr("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),UTe=e=>{const{classes:t,indeterminate:n,color:r,size:s}=e,c={root:["root",n&&"indeterminate",`color${Mn(r)}`,`size${Mn(s)}`]},h=dr(c,VTe,t);return{...t,...h}},$Te=Ot(CZ,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${Mn(n.size)}`],n.color!=="default"&&t[`color${Mn(n.color)}`]]}})(ri(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Vs()).map(([t])=>({props:{color:t},style:{[`&.${dk.checked}, &.${dk.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${dk.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),qTe=$.jsx(NTe,{}),HTe=$.jsx(BTe,{}),GTe=$.jsx(jTe,{}),dA=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiCheckbox"}),{checkedIcon:s=qTe,color:c="primary",icon:h=HTe,indeterminate:i=!1,indeterminateIcon:g=GTe,inputProps:w,size:T="medium",disableRipple:A=!1,className:D,slots:k={},slotProps:I={},...F}=r,j=i?g:h,V=i?g:s,W={...r,disableRipple:A,color:c,indeterminate:i,size:T},Z=UTe(W),K=I.input??w,[ee,se]=fi("root",{ref:n,elementType:$Te,className:Wn(Z.root,D),shouldForwardComponentProp:!0,externalForwardedProps:{slots:k,slotProps:I,...F},ownerState:W,additionalProps:{type:"checkbox",icon:q.cloneElement(j,{fontSize:j.props.fontSize??T}),checkedIcon:q.cloneElement(V,{fontSize:V.props.fontSize??T}),disableRipple:A,slots:k,slotProps:{input:DN(typeof K=="function"?K(W):K,{"data-indeterminate":i})}}});return $.jsx(ee,{...se,classes:Z})}),qF=typeof mN({})=="function",WTe=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),YTe=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),QQ=(e,t=!1)=>{var c,h;const n={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([i,g])=>{var T,A;const w=e.getColorSchemeSelector(i);w.startsWith("@")?n[w]={":root":{colorScheme:(T=g.palette)==null?void 0:T.mode}}:n[w.replace(/\s*&/,"")]={colorScheme:(A=g.palette)==null?void 0:A.mode}});let r={html:WTe(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...YTe(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...n};const s=(h=(c=e.components)==null?void 0:c.MuiCssBaseline)==null?void 0:h.styleOverrides;return s&&(r=[r,s]),r},rM="mui-ecs",XTe=e=>{const t=QQ(e,!1),n=Array.isArray(t)?t[0]:t;return!e.vars&&n&&(n.html[`:root:has(${rM})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([r,s])=>{var h,i;const c=e.getColorSchemeSelector(r);c.startsWith("@")?n[c]={[`:root:not(:has(.${rM}))`]:{colorScheme:(h=s.palette)==null?void 0:h.mode}}:n[c.replace(/\s*&/,"")]={[`&:not(:has(.${rM}))`]:{colorScheme:(i=s.palette)==null?void 0:i.mode}}}),t},ZTe=mN(qF?({theme:e,enableColorScheme:t})=>QQ(e,t):({theme:e})=>XTe(e));function KTe(e){const t=qr({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return $.jsxs(q.Fragment,{children:[qF&&$.jsx(ZTe,{enableColorScheme:r}),!qF&&!r&&$.jsx("span",{className:rM,style:{display:"none"}}),n]})}function QTe(e){return fr("MuiDialog",e)}const jS=pr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),JTe=q.createContext({}),eEe=Ot(TQ,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),tEe=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:s,fullScreen:c}=e,h={root:["root"],container:["container",`scroll${Mn(n)}`],paper:["paper",`paperScroll${Mn(n)}`,`paperWidth${Mn(String(r))}`,s&&"paperFullWidth",c&&"paperFullScreen"]};return dr(h,QTe,t)},nEe=Ot(gj,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),rEe=Ot("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Mn(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),iEe=Ot(fu,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Mn(n.scroll)}`],t[`paperWidth${Mn(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(ri(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${jS.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${jS.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${jS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),oEe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiDialog"}),s=cs(),c={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":h,"aria-labelledby":i,"aria-modal":g=!0,BackdropComponent:w,BackdropProps:T,children:A,className:D,disableEscapeKeyDown:k=!1,fullScreen:I=!1,fullWidth:F=!1,maxWidth:j="sm",onClick:V,onClose:W,open:Z,PaperComponent:K=fu,PaperProps:ee={},scroll:se="paper",slots:he={},slotProps:ye={},TransitionComponent:_e=Xy,transitionDuration:ae=c,TransitionProps:be,...Te}=r,Ae={...r,disableEscapeKeyDown:k,fullScreen:I,fullWidth:F,maxWidth:j,scroll:se},Re=tEe(Ae),He=q.useRef(),Se=Bt=>{He.current=Bt.target===Bt.currentTarget},qe=Bt=>{V&&V(Bt),He.current&&(He.current=null,W&&W(Bt,"backdropClick"))},it=tm(i),tt=q.useMemo(()=>({titleId:it}),[it]),Oe={transition:_e,...he},Je={transition:be,paper:ee,backdrop:T,...ye},yt={slots:Oe,slotProps:Je},[wt,$t]=fi("root",{elementType:nEe,shouldForwardComponentProp:!0,externalForwardedProps:yt,ownerState:Ae,className:Wn(Re.root,D),ref:n}),[It,vt]=fi("backdrop",{elementType:eEe,shouldForwardComponentProp:!0,externalForwardedProps:yt,ownerState:Ae}),[sn,Rn]=fi("paper",{elementType:iEe,shouldForwardComponentProp:!0,externalForwardedProps:yt,ownerState:Ae,className:Wn(Re.paper,ee.className)}),[yn,Qt]=fi("container",{elementType:rEe,externalForwardedProps:yt,ownerState:Ae,className:Re.container}),[Jt,fn]=fi("transition",{elementType:Xy,externalForwardedProps:yt,ownerState:Ae,additionalProps:{appear:!0,in:Z,timeout:ae,role:"presentation"}});return $.jsx(wt,{closeAfterTransition:!0,slots:{backdrop:It},slotProps:{backdrop:{transitionDuration:ae,as:w,...vt}},disableEscapeKeyDown:k,onClose:W,open:Z,onClick:qe,...$t,...Te,children:$.jsx(Jt,{...fn,children:$.jsx(yn,{onMouseDown:Se,...Qt,children:$.jsx(sn,{as:K,elevation:24,role:"dialog","aria-describedby":h,"aria-labelledby":it,"aria-modal":g,...Rn,children:$.jsx(JTe.Provider,{value:tt,children:A})})})})})});function sEe(e){return fr("MuiDialogActions",e)}pr("MuiDialogActions",["root","spacing"]);const aEe=e=>{const{classes:t,disableSpacing:n}=e;return dr({root:["root",!n&&"spacing"]},sEe,t)},lEe=Ot("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),cEe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiDialogActions"}),{className:s,disableSpacing:c=!1,...h}=r,i={...r,disableSpacing:c},g=aEe(i);return $.jsx(lEe,{className:Wn(g.root,s),ownerState:i,ref:n,...h})});function uEe(e){return fr("MuiDialogContent",e)}pr("MuiDialogContent",["root","dividers"]);const dEe=pr("MuiDialogTitle",["root"]),hEe=e=>{const{classes:t,dividers:n}=e;return dr({root:["root",n&&"dividers"]},uEe,t)},fEe=Ot("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(ri(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${dEe.root} + &`]:{paddingTop:0}}}]}))),pEe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiDialogContent"}),{className:s,dividers:c=!1,...h}=r,i={...r,dividers:c},g=hEe(i);return $.jsx(fEe,{className:Wn(g.root,s),ownerState:i,ref:n,...h})});function mEe(e){return fr("MuiFormControlLabel",e)}const SS=pr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),gEe=e=>{const{classes:t,disabled:n,labelPlacement:r,error:s,required:c}=e,h={root:["root",n&&"disabled",`labelPlacement${Mn(r)}`,s&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return dr(h,mEe,t)},yEe=Ot("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${SS.label}`]:t.label},t.root,t[`labelPlacement${Mn(n.labelPlacement)}`]]}})(ri(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${SS.disabled}`]:{cursor:"default"},[`& .${SS.label}`]:{[`&.${SS.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),vEe=Ot("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(ri(({theme:e})=>({[`&.${SS.error}`]:{color:(e.vars||e).palette.error.main}}))),Eb=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiFormControlLabel"}),{checked:s,className:c,componentsProps:h={},control:i,disabled:g,disableTypography:w,inputRef:T,label:A,labelPlacement:D="end",name:k,onChange:I,required:F,slots:j={},slotProps:V={},value:W,...Z}=r,K=vh(),ee=g??i.props.disabled??(K==null?void 0:K.disabled),se=F??i.props.required,he={disabled:ee,required:se};["checked","name","onChange","value","inputRef"].forEach(He=>{typeof i.props[He]>"u"&&typeof r[He]<"u"&&(he[He]=r[He])});const ye=sv({props:r,muiFormControl:K,states:["error"]}),_e={...r,disabled:ee,labelPlacement:D,required:se,error:ye.error},ae=gEe(_e),be={slots:j,slotProps:{...h,...V}},[Te,Ae]=fi("typography",{elementType:rr,externalForwardedProps:be,ownerState:_e});let Re=A;return Re!=null&&Re.type!==rr&&!w&&(Re=$.jsx(Te,{component:"span",...Ae,className:Wn(ae.label,Ae==null?void 0:Ae.className),children:Re})),$.jsxs(yEe,{className:Wn(ae.root,c),ownerState:_e,ref:n,...Z,children:[q.cloneElement(i,he),se?$.jsxs("div",{children:[Re,$.jsxs(vEe,{ownerState:_e,"aria-hidden":!0,className:ae.asterisk,children:["","*"]})]}):Re]})});function _Ee(e){return fr("MuiFormGroup",e)}pr("MuiFormGroup",["root","row","error"]);const xEe=e=>{const{classes:t,row:n,error:r}=e;return dr({root:["root",n&&"row",r&&"error"]},_Ee,t)},bEe=Ot("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),JQ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiFormGroup"}),{className:s,row:c=!1,...h}=r,i=vh(),g=sv({props:r,muiFormControl:i,states:["error"]}),w={...r,row:c,error:g.error},T=xEe(w);return $.jsx(bEe,{className:Wn(T.root,s),ownerState:w,ref:n,...h})});function wEe(e){return fr("MuiImageList",e)}pr("MuiImageList",["root","masonry","quilted","standard","woven"]);const eJ=q.createContext({}),SEe=e=>{const{classes:t,variant:n}=e;return dr({root:["root",n]},wEe,t)},TEe=Ot("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch",variants:[{props:{variant:"masonry"},style:{display:"block"}}]}),EEe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiImageList"}),{children:s,className:c,cols:h=2,component:i="ul",rowHeight:g="auto",gap:w=4,style:T,variant:A="standard",...D}=r,k=q.useMemo(()=>({rowHeight:g,gap:w,variant:A}),[g,w,A]),I=A==="masonry"?{columnCount:h,columnGap:w,...T}:{gridTemplateColumns:`repeat(${h}, 1fr)`,gap:w,...T},F={...r,component:i,gap:w,rowHeight:g,variant:A},j=SEe(F);return $.jsx(TEe,{as:i,className:Wn(j.root,j[A],c),ref:n,style:I,ownerState:F,...D,children:$.jsx(eJ.Provider,{value:k,children:s})})});function CEe(e){return fr("MuiImageListItem",e)}const hk=pr("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),AEe=e=>{const{classes:t,variant:n}=e;return dr({root:["root",n],img:["img"]},CEe,t)},MEe=Ot("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${hk.img}`]:t.img},t.root,t[n.variant]]}})({display:"block",position:"relative",[`& .${hk.img}`]:{objectFit:"cover",width:"100%",height:"100%",display:"block"},variants:[{props:{variant:"standard"},style:{display:"flex",flexDirection:"column"}},{props:{variant:"woven"},style:{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}}},{props:{variant:"standard"},style:{[`& .${hk.img}`]:{height:"auto",flexGrow:1}}}]}),REe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiImageListItem"}),{children:s,className:c,cols:h=1,component:i="li",rows:g=1,style:w,...T}=r,{rowHeight:A="auto",gap:D,variant:k}=q.useContext(eJ);let I="auto";k==="woven"?I=void 0:A!=="auto"&&(I=A*g+D*(g-1));const F={...r,cols:h,component:i,gap:D,rowHeight:A,rows:g,variant:k},j=AEe(F);return $.jsx(MEe,{as:i,className:Wn(j.root,j[k],c),ref:n,style:{height:I,gridColumnEnd:k!=="masonry"?`span ${h}`:void 0,gridRowEnd:k!=="masonry"?`span ${g}`:void 0,marginBottom:k==="masonry"?D:void 0,breakInside:k==="masonry"?"avoid":void 0,...w},ownerState:F,...T,children:q.Children.map(s,V=>q.isValidElement(V)?V.type==="img"||Ob(V,["Image"])?q.cloneElement(V,{className:Wn(j.img,V.props.className)}):V:null)})});function DEe(e){return fr("MuiMenuItem",e)}const Zw=pr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),PEe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},IEe=e=>{const{disabled:t,dense:n,divider:r,disableGutters:s,selected:c,classes:h}=e,g=dr({root:["root",n&&"dense",t&&"disabled",!s&&"gutters",r&&"divider",c&&"selected"]},DEe,h);return{...h,...g}},kEe=Ot(hh,{shouldForwardProp:e=>_c(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:PEe})(ri(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Zw.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ai(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Zw.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ai(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Zw.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ai(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ai(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Zw.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Zw.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${c6.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${c6.inset}`]:{marginLeft:52},[`& .${vb.root}`]:{marginTop:0,marginBottom:0},[`& .${vb.inset}`]:{paddingLeft:36},[`& .${u6.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${u6.root} svg`]:{fontSize:"1.25rem"}}}]}))),pc=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiMenuItem"}),{autoFocus:s=!1,component:c="li",dense:h=!1,divider:i=!1,disableGutters:g=!1,focusVisibleClassName:w,role:T="menuitem",tabIndex:A,className:D,...k}=r,I=q.useContext(ah),F=q.useMemo(()=>({dense:h||I.dense||!1,disableGutters:g}),[I.dense,h,g]),j=q.useRef(null);$s(()=>{s&&j.current&&j.current.focus()},[s]);const V={...r,dense:F.dense,divider:i,disableGutters:g},W=IEe(r),Z=mo(j,n);let K;return r.disabled||(K=A!==void 0?A:-1),$.jsx(ah.Provider,{value:F,children:$.jsx(kEe,{ref:Z,role:T,tabIndex:K,component:c,focusVisibleClassName:Wn(W.focusVisible,w),className:Wn(W.root,D),...k,ownerState:V,classes:W})})}),OEe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function LEe(e){return fr("MuiTab",e)}const Xd=pr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),zEe=e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:s,icon:c,label:h,selected:i,disabled:g}=e,w={root:["root",c&&h&&"labelIcon",`textColor${Mn(n)}`,r&&"fullWidth",s&&"wrapped",i&&"selected",g&&"disabled"],icon:["iconWrapper","icon"]};return dr(w,LEe,t)},FEe=Ot(hh,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Mn(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${Xd.iconWrapper}`]:t.iconWrapper},{[`& .${Xd.icon}`]:t.icon}]}})(ri(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="top",style:{[`& > .${Xd.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="bottom",style:{[`& > .${Xd.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="start",style:{[`& > .${Xd.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="end",style:{[`& > .${Xd.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Xd.selected}`]:{opacity:1},[`&.${Xd.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${Xd.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Xd.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${Xd.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Xd.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),tJ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTab"}),{className:s,disabled:c=!1,disableFocusRipple:h=!1,fullWidth:i,icon:g,iconPosition:w="top",indicator:T,label:A,onChange:D,onClick:k,onFocus:I,selected:F,selectionFollowsFocus:j,textColor:V="inherit",value:W,wrapped:Z=!1,...K}=r,ee={...r,disabled:c,disableFocusRipple:h,selected:F,icon:!!g,iconPosition:w,label:!!A,fullWidth:i,textColor:V,wrapped:Z},se=zEe(ee),he=g&&A&&q.isValidElement(g)?q.cloneElement(g,{className:Wn(se.icon,g.props.className)}):g,ye=ae=>{!F&&D&&D(ae,W),k&&k(ae)},_e=ae=>{j&&!F&&D&&D(ae,W),I&&I(ae)};return $.jsxs(FEe,{focusRipple:!h,className:Wn(se.root,s),ref:n,role:"tab","aria-selected":F,disabled:c,onClick:ye,onFocus:_e,ownerState:ee,tabIndex:F?0:-1,...K,children:[w==="top"||w==="start"?$.jsxs(q.Fragment,{children:[he,A]}):$.jsxs(q.Fragment,{children:[A,he]}),T]})}),nJ=q.createContext();function BEe(e){return fr("MuiTable",e)}pr("MuiTable",["root","stickyHeader"]);const NEe=e=>{const{classes:t,stickyHeader:n}=e;return dr({root:["root",n&&"stickyHeader"]},BEe,t)},jEe=Ot("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(ri(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),y8="table",VEe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTable"}),{className:s,component:c=y8,padding:h="normal",size:i="medium",stickyHeader:g=!1,...w}=r,T={...r,component:c,padding:h,size:i,stickyHeader:g},A=NEe(T),D=q.useMemo(()=>({padding:h,size:i,stickyHeader:g}),[h,i,g]);return $.jsx(nJ.Provider,{value:D,children:$.jsx(jEe,{as:c,role:c===y8?null:"table",ref:n,className:Wn(A.root,s),ownerState:T,...w})})}),fD=q.createContext();function UEe(e){return fr("MuiTableBody",e)}pr("MuiTableBody",["root"]);const $Ee=e=>{const{classes:t}=e;return dr({root:["root"]},UEe,t)},qEe=Ot("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),HEe={variant:"body"},v8="tbody",GEe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTableBody"}),{className:s,component:c=v8,...h}=r,i={...r,component:c},g=$Ee(i);return $.jsx(fD.Provider,{value:HEe,children:$.jsx(qEe,{className:Wn(g.root,s),as:c,ref:n,role:c===v8?null:"rowgroup",ownerState:i,...h})})});function WEe(e){return fr("MuiTableCell",e)}const YEe=pr("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),XEe=e=>{const{classes:t,variant:n,align:r,padding:s,size:c,stickyHeader:h}=e,i={root:["root",n,h&&"stickyHeader",r!=="inherit"&&`align${Mn(r)}`,s!=="normal"&&`padding${Mn(s)}`,`size${Mn(c)}`]};return dr(i,WEe,t)},ZEe=Ot("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Mn(n.size)}`],n.padding!=="normal"&&t[`padding${Mn(n.padding)}`],n.align!=="inherit"&&t[`align${Mn(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(ri(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?l1(ai(e.palette.divider,1),.88):a1(ai(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${YEe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),Tp=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTableCell"}),{align:s="inherit",className:c,component:h,padding:i,scope:g,size:w,sortDirection:T,variant:A,...D}=r,k=q.useContext(nJ),I=q.useContext(fD),F=I&&I.variant==="head";let j;h?j=h:j=F?"th":"td";let V=g;j==="td"?V=void 0:!V&&F&&(V="col");const W=A||I&&I.variant,Z={...r,align:s,component:j,padding:i||(k&&k.padding?k.padding:"normal"),size:w||(k&&k.size?k.size:"medium"),sortDirection:T,stickyHeader:W==="head"&&k&&k.stickyHeader,variant:W},K=XEe(Z);let ee=null;return T&&(ee=T==="asc"?"ascending":"descending"),$.jsx(ZEe,{as:j,ref:n,className:Wn(K.root,c),"aria-sort":ee,scope:V,ownerState:Z,...D})});function KEe(e){return fr("MuiTableHead",e)}pr("MuiTableHead",["root"]);const QEe=e=>{const{classes:t}=e;return dr({root:["root"]},KEe,t)},JEe=Ot("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),eCe={variant:"head"},_8="thead",tCe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTableHead"}),{className:s,component:c=_8,...h}=r,i={...r,component:c},g=QEe(i);return $.jsx(fD.Provider,{value:eCe,children:$.jsx(JEe,{as:c,className:Wn(g.root,s),ref:n,role:c===_8?null:"rowgroup",ownerState:i,...h})})}),nCe=Es($.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),rCe=Es($.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function iCe(e){return fr("MuiTableRow",e)}const x8=pr("MuiTableRow",["root","selected","hover","head","footer"]),oCe=e=>{const{classes:t,selected:n,hover:r,head:s,footer:c}=e;return dr({root:["root",n&&"selected",r&&"hover",s&&"head",c&&"footer"]},iCe,t)},sCe=Ot("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(ri(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${x8.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${x8.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ai(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ai(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),b8="tr",w8=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTableRow"}),{className:s,component:c=b8,hover:h=!1,selected:i=!1,...g}=r,w=q.useContext(fD),T={...r,component:c,hover:h,selected:i,head:w&&w.variant==="head",footer:w&&w.variant==="footer"},A=oCe(T);return $.jsx(sCe,{as:c,ref:n,className:Wn(A.root,s),role:c===b8?null:"row",ownerState:T,...g})});function aCe(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function lCe(e,t,n,r={},s=()=>{}){const{ease:c=aCe,duration:h=300}=r;let i=null;const g=t[e];let w=!1;const T=()=>{w=!0},A=D=>{if(w){s(new Error("Animation cancelled"));return}i===null&&(i=D);const k=Math.min(1,(D-i)/h);if(t[e]=c(k)*(n-g)+g,k>=1){requestAnimationFrame(()=>{s(null)});return}requestAnimationFrame(A)};return g===n?(s(new Error("Element already at target position")),T):(requestAnimationFrame(A),T)}const cCe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function uCe(e){const{onChange:t,...n}=e,r=q.useRef(),s=q.useRef(null),c=()=>{r.current=s.current.offsetHeight-s.current.clientHeight};return $s(()=>{const h=YT(()=>{const g=r.current;c(),g!==r.current&&t(r.current)}),i=ad(s.current);return i.addEventListener("resize",h),()=>{h.clear(),i.removeEventListener("resize",h)}},[t]),q.useEffect(()=>{c(),t(r.current)},[t]),$.jsx("div",{style:cCe,...n,ref:s})}function dCe(e){return fr("MuiTabScrollButton",e)}const hCe=pr("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),fCe=e=>{const{classes:t,orientation:n,disabled:r}=e;return dr({root:["root",n,r&&"disabled"]},dCe,t)},pCe=Ot(hh,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${hCe.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),mCe=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTabScrollButton"}),{className:s,slots:c={},slotProps:h={},direction:i,orientation:g,disabled:w,...T}=r,A=vc(),D={isRtl:A,...r},k=fCe(D),I=c.StartScrollButtonIcon??nCe,F=c.EndScrollButtonIcon??rCe,j=xo({elementType:I,externalSlotProps:h.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:D}),V=xo({elementType:F,externalSlotProps:h.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:D});return $.jsx(pCe,{component:"div",className:Wn(k.root,s),ref:n,role:null,ownerState:D,tabIndex:null,...T,style:{...T.style,...g==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${A?-90:90}deg)`}},children:i==="left"?$.jsx(I,{...j}):$.jsx(F,{...V})})});function gCe(e){return fr("MuiTabs",e)}const fk=pr("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),S8=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,T8=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,hA=(e,t,n)=>{let r=!1,s=n(e,t);for(;s;){if(s===e.firstChild){if(r)return;r=!0}const c=s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||c)s=n(e,s);else{s.focus();return}}},yCe=e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:s,scrollableY:c,centered:h,scrollButtonsHideMobile:i,classes:g}=e;return dr({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",s&&"scrollableX",c&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",h&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",i&&"scrollButtonsHideMobile"],scrollableX:[s&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},gCe,g)},vCe=Ot("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${fk.scrollButtons}`]:t.scrollButtons},{[`& .${fk.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(ri(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${fk.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),_Ce=Ot("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),xCe=Ot("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.list,t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),bCe=Ot("span",{name:"MuiTabs",slot:"Indicator"})(ri(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),wCe=Ot(uCe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),E8={},rJ=q.forwardRef(function(t,n){const r=qr({props:t,name:"MuiTabs"}),s=cs(),c=vc(),{"aria-label":h,"aria-labelledby":i,action:g,centered:w=!1,children:T,className:A,component:D="div",allowScrollButtonsMobile:k=!1,indicatorColor:I="primary",onChange:F,orientation:j="horizontal",ScrollButtonComponent:V,scrollButtons:W="auto",selectionFollowsFocus:Z,slots:K={},slotProps:ee={},TabIndicatorProps:se={},TabScrollButtonProps:he={},textColor:ye="primary",value:_e,variant:ae="standard",visibleScrollbar:be=!1,...Te}=r,Ae=ae==="scrollable",Re=j==="vertical",He=Re?"scrollTop":"scrollLeft",Se=Re?"top":"left",qe=Re?"bottom":"right",it=Re?"clientHeight":"clientWidth",tt=Re?"height":"width",Oe={...r,component:D,allowScrollButtonsMobile:k,indicatorColor:I,orientation:j,vertical:Re,scrollButtons:W,textColor:ye,variant:ae,visibleScrollbar:be,fixed:!Ae,hideScrollbar:Ae&&!be,scrollableX:Ae&&!Re,scrollableY:Ae&&Re,centered:w&&!Ae,scrollButtonsHideMobile:!k},Je=yCe(Oe),yt=xo({elementType:K.StartScrollButtonIcon,externalSlotProps:ee.startScrollButtonIcon,ownerState:Oe}),wt=xo({elementType:K.EndScrollButtonIcon,externalSlotProps:ee.endScrollButtonIcon,ownerState:Oe}),[$t,It]=q.useState(!1),[vt,sn]=q.useState(E8),[Rn,yn]=q.useState(!1),[Qt,Jt]=q.useState(!1),[fn,Bt]=q.useState(!1),[Kt,_n]=q.useState({overflow:"hidden",scrollbarWidth:0}),an=new Map,Ft=q.useRef(null),kn=q.useRef(null),Yn={slots:K,slotProps:{indicator:se,scrollButton:he,...ee}},wn=()=>{const re=Ft.current;let le;if(re){const ke=re.getBoundingClientRect();le={clientWidth:re.clientWidth,scrollLeft:re.scrollLeft,scrollTop:re.scrollTop,scrollWidth:re.scrollWidth,top:ke.top,bottom:ke.bottom,left:ke.left,right:ke.right}}let xe;if(re&&_e!==!1){const ke=kn.current.children;if(ke.length>0){const Ne=ke[an.get(_e)];xe=Ne?Ne.getBoundingClientRect():null}}return{tabsMeta:le,tabMeta:xe}},Vn=Tr(()=>{const{tabsMeta:re,tabMeta:le}=wn();let xe=0,ke;Re?(ke="top",le&&re&&(xe=le.top-re.top+re.scrollTop)):(ke=c?"right":"left",le&&re&&(xe=(c?-1:1)*(le[ke]-re[ke]+re.scrollLeft)));const Ne={[ke]:xe,[tt]:le?le[tt]:0};if(typeof vt[ke]!="number"||typeof vt[tt]!="number")sn(Ne);else{const Xe=Math.abs(vt[ke]-Ne[ke]),We=Math.abs(vt[tt]-Ne[tt]);(Xe>=1||We>=1)&&sn(Ne)}}),ut=(re,{animation:le=!0}={})=>{le?lCe(He,Ft.current,re,{duration:s.transitions.duration.standard}):Ft.current[He]=re},gn=re=>{let le=Ft.current[He];Re?le+=re:le+=re*(c?-1:1),ut(le)},Rt=()=>{const re=Ft.current[it];let le=0;const xe=Array.from(kn.current.children);for(let ke=0;ke<xe.length;ke+=1){const Ne=xe[ke];if(le+Ne[it]>re){ke===0&&(le=re);break}le+=Ne[it]}return le},Wt=()=>{gn(-1*Rt())},zn=()=>{gn(Rt())},[Un,{onChange:mr,...Xn}]=fi("scrollbar",{className:Wn(Je.scrollableX,Je.hideScrollbar),elementType:wCe,shouldForwardComponentProp:!0,externalForwardedProps:Yn,ownerState:Oe}),or=q.useCallback(re=>{mr==null||mr(re),_n({overflow:null,scrollbarWidth:re})},[mr]),[En,Fr]=fi("scrollButtons",{className:Wn(Je.scrollButtons,he.className),elementType:mCe,externalForwardedProps:Yn,ownerState:Oe,additionalProps:{orientation:j,slots:{StartScrollButtonIcon:K.startScrollButtonIcon||K.StartScrollButtonIcon,EndScrollButtonIcon:K.endScrollButtonIcon||K.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:yt,endScrollButtonIcon:wt}}}),Er=()=>{const re={};re.scrollbarSizeListener=Ae?$.jsx(Un,{...Xn,onChange:or}):null;const xe=Ae&&(W==="auto"&&(Rn||Qt)||W===!0);return re.scrollButtonStart=xe?$.jsx(En,{direction:c?"right":"left",onClick:Wt,disabled:!Rn,...Fr}):null,re.scrollButtonEnd=xe?$.jsx(En,{direction:c?"left":"right",onClick:zn,disabled:!Qt,...Fr}):null,re},_r=Tr(re=>{const{tabsMeta:le,tabMeta:xe}=wn();if(!(!xe||!le)){if(xe[Se]<le[Se]){const ke=le[He]+(xe[Se]-le[Se]);ut(ke,{animation:re})}else if(xe[qe]>le[qe]){const ke=le[He]+(xe[qe]-le[qe]);ut(ke,{animation:re})}}}),nr=Tr(()=>{Ae&&W!==!1&&Bt(!fn)});q.useEffect(()=>{const re=YT(()=>{Ft.current&&Vn()});let le;const xe=Xe=>{Xe.forEach(We=>{We.removedNodes.forEach(Ke=>{le==null||le.unobserve(Ke)}),We.addedNodes.forEach(Ke=>{le==null||le.observe(Ke)})}),re(),nr()},ke=ad(Ft.current);ke.addEventListener("resize",re);let Ne;return typeof ResizeObserver<"u"&&(le=new ResizeObserver(re),Array.from(kn.current.children).forEach(Xe=>{le.observe(Xe)})),typeof MutationObserver<"u"&&(Ne=new MutationObserver(xe),Ne.observe(kn.current,{childList:!0})),()=>{re.clear(),ke.removeEventListener("resize",re),Ne==null||Ne.disconnect(),le==null||le.disconnect()}},[Vn,nr]),q.useEffect(()=>{const re=Array.from(kn.current.children),le=re.length;if(typeof IntersectionObserver<"u"&&le>0&&Ae&&W!==!1){const xe=re[0],ke=re[le-1],Ne={root:Ft.current,threshold:.99},Xe=ft=>{yn(!ft[0].isIntersecting)},We=new IntersectionObserver(Xe,Ne);We.observe(xe);const Ke=ft=>{Jt(!ft[0].isIntersecting)},at=new IntersectionObserver(Ke,Ne);return at.observe(ke),()=>{We.disconnect(),at.disconnect()}}},[Ae,W,fn,T==null?void 0:T.length]),q.useEffect(()=>{It(!0)},[]),q.useEffect(()=>{Vn()}),q.useEffect(()=>{_r(E8!==vt)},[_r,vt]),q.useImperativeHandle(g,()=>({updateIndicator:Vn,updateScrollButtons:nr}),[Vn,nr]);const[Wr,wr]=fi("indicator",{className:Wn(Je.indicator,se.className),elementType:bCe,externalForwardedProps:Yn,ownerState:Oe,additionalProps:{style:vt}}),Rr=$.jsx(Wr,{...wr});let Di=0;const Wo=q.Children.map(T,re=>{if(!q.isValidElement(re))return null;const le=re.props.value===void 0?Di:re.props.value;an.set(le,Di);const xe=le===_e;return Di+=1,q.cloneElement(re,{fullWidth:ae==="fullWidth",indicator:xe&&!$t&&Rr,selected:xe,selectionFollowsFocus:Z,onChange:F,textColor:ye,value:le,...Di===1&&_e===!1&&!re.props.tabIndex?{tabIndex:0}:{}})}),ko=re=>{if(re.altKey||re.shiftKey||re.ctrlKey||re.metaKey)return;const le=kn.current,xe=za(le).activeElement;if(xe.getAttribute("role")!=="tab")return;let Ne=j==="horizontal"?"ArrowLeft":"ArrowUp",Xe=j==="horizontal"?"ArrowRight":"ArrowDown";switch(j==="horizontal"&&c&&(Ne="ArrowRight",Xe="ArrowLeft"),re.key){case Ne:re.preventDefault(),hA(le,xe,T8);break;case Xe:re.preventDefault(),hA(le,xe,S8);break;case"Home":re.preventDefault(),hA(le,null,S8);break;case"End":re.preventDefault(),hA(le,null,T8);break}},Ro=Er(),[bl,oa]=fi("root",{ref:n,className:Wn(Je.root,A),elementType:vCe,externalForwardedProps:{...Yn,...Te,component:D},ownerState:Oe}),[dn,Hs]=fi("scroller",{ref:Ft,className:Je.scroller,elementType:_Ce,externalForwardedProps:Yn,ownerState:Oe,additionalProps:{style:{overflow:Kt.overflow,[Re?`margin${c?"Left":"Right"}`:"marginBottom"]:be?void 0:-Kt.scrollbarWidth}}}),[Pr,De]=fi("list",{ref:kn,className:Wn(Je.list,Je.flexContainer),elementType:xCe,externalForwardedProps:Yn,ownerState:Oe,getSlotProps:re=>({...re,onKeyDown:le=>{var xe;ko(le),(xe=re.onKeyDown)==null||xe.call(re,le)}})});return $.jsxs(bl,{...oa,children:[Ro.scrollButtonStart,Ro.scrollbarSizeListener,$.jsxs(dn,{...Hs,children:[$.jsx(Pr,{"aria-label":h,"aria-labelledby":i,"aria-orientation":j==="vertical"?"vertical":null,role:"tablist",...De,children:Wo}),$t&&Rr]}),Ro.scrollButtonEnd]})});function SCe(){const e=f1(i=>i.breakpoints.down("md")),{menuMaster:t}=j0(),n=t.isDashboardDrawerOpened,{miniDrawer:r,mode:s}=y1(),c=q.useMemo(()=>$.jsx(Dr,{sx:{display:"flex",p:2},children:$.jsx(QX,{})}),[]),h=q.useMemo(()=>{const i=$.jsxs($.Fragment,{children:[$.jsx(oTe,{}),$.jsx(yl,{direction:"row",sx:{justifyContent:"space-between",mb:2},children:$.jsx(N0,{avatar:$.jsx(WT,{sx:{bgcolor:"text.primary",width:32,height:32,fontSize:8},children:"F L"}),label:$.jsxs(Dr,{display:"flex",flexDirection:"column",lineHeight:1.2,children:[$.jsx(rr,{variant:"body1",fontWeight:"500",children:"FirstName  LastName"}),$.jsx(rr,{variant:"caption",color:"text.secondary",children:"Designation"})]}),variant:"outlined",sx:{border:"none",height:"100%",width:"100%",alignItems:"center",justifyContent:"flex-start",gap:2,"& .MuiChip-label":{display:"flex",flexDirection:"column",padding:0}}})})]});let g={paddingLeft:"0px",paddingRight:"0px",marginTop:"20px"};return n&&(g={paddingLeft:"16px",paddingRight:"16px",marginTop:"0px"}),$.jsx($.Fragment,{children:e?$.jsxs(Dr,{sx:g,children:[$.jsx(f8,{}),n&&i]}):$.jsxs(rTe,{style:{height:"calc(100vh - 88px)",...g},children:[$.jsx(f8,{}),n&&i]})})},[e,n,s]);return $.jsx(Dr,{component:"nav",sx:{flexShrink:{md:0},width:{xs:"auto",md:u0}},"aria-label":"mailbox folders",children:e||r&&n?$.jsxs($Q,{variant:e?"temporary":"persistent",anchor:"left",open:n,onClose:()=>iR(!n),sx:{"& .MuiDrawer-paper":{mt:e?0:11,zIndex:1099,width:u0,bgcolor:"background.default",color:"text.primary",borderRight:"none",height:"auto"}},ModalProps:{keepMounted:!0},color:"inherit",children:[e&&c,h]}):$.jsx(yTe,{variant:"permanent",open:n,children:$.jsx(Dr,{sx:{mt:10},children:h})})})}const TCe=q.memo(SCe),ECe=Ot("main",{shouldForwardProp:e=>e!=="open"&&e!=="borderRadius"})(({theme:e,open:t,borderRadius:n})=>({backgroundColor:e.palette.grey[100],minWidth:"1%",width:"100%",minHeight:"calc(100vh - 88px)",flexGrow:1,padding:20,marginTop:88,marginRight:20,borderRadius:`${n}px`,borderBottomLeftRadius:0,borderBottomRightRadius:0,...!t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter+200}),[e.breakpoints.up("md")]:{marginLeft:-188,width:`calc(100% - ${u0}px)`,marginTop:88}},...t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shorter+200}),marginLeft:0,marginTop:88,width:`calc(100% - ${u0}px)`,[e.breakpoints.up("md")]:{marginTop:88}},[e.breakpoints.down("md")]:{marginLeft:20,padding:16,marginTop:88,...!t&&{width:`calc(100% - ${u0}px)`}},[e.breakpoints.down("sm")]:{marginLeft:10,marginRight:10}})),pk=Es([$.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3zM7 9H4V5h3zm10 6h3v4h-3zm0-10h3v4h-3z"},"0"),$.jsx("path",{d:"M7 5v4H4V5zm13 0v4h-3V5zm0 10v4h-3v-4z",opacity:".3"},"1")]),C8=Es($.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),A8=Es([$.jsx("path",{d:"M12 3 2 12h3v8h6v-6h2v6h6v-8h3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5z"},"0"),$.jsx("path",{d:"M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z",opacity:".3"},"1")]);function TS({title:e}){return $.jsx(_o,{children:$.jsx(rr,{variant:"h4",sx:{fontWeight:500},children:e})})}function iJ({card:e,custom:t=!1,divider:n=!1,heading:r,icon:s=!0,icons:c,links:h,maxItems:i,rightAlign:g=!0,separator:w=TZ,title:T=!0,titleBottom:A,sx:D,...k}){const I=cs(),F=gh(),[j,V]=q.useState(),[W,Z]=q.useState(),K={marginRight:6,marginTop:-2,width:"1rem",height:"1rem",color:I.palette.secondary.main},ee={display:"flex",color:"grey.900",textDecoration:"none",alignContent:"center",alignItems:"center"};let se=F.pathname;q.useEffect(()=>{var Se;(Se=NS==null?void 0:NS.items)==null||Se.map(qe=>(qe.type&&qe.type==="group"&&(qe!=null&&qe.url&&qe.url===se?(V(qe),Z(qe)):he(qe)),!1))});const he=Se=>{!t&&Se.children&&Se.children.filter(qe=>(qe.type&&qe.type==="collapse"?(he(qe),qe.url===se&&(V(qe),Z(qe))):qe.type&&qe.type==="item"&&se===qe.url&&(V(Se),Z(qe)),!1))},ye=w,_e=w?$.jsx(ye,{stroke:1.5,size:"16px"}):$.jsx(sge,{stroke:1.5,size:"16px"});let ae,be,Te=$.jsx(rr,{}),Ae="",Re,He;if(j&&j.type==="collapse"&&(Re=j.icon?j.icon:pk,ae=$.jsxs(rr,{...j.url&&{component:Ny,to:j.url},variant:"h6",noWrap:!0,sx:{overflow:"hidden",lineHeight:1.5,mb:-.625,textOverflow:"ellipsis",maxWidth:{xs:102,sm:"unset"},display:"inline-block"},color:window.location.pathname===j.url?"text.primary":"text.secondary",children:[c&&$.jsx(Re,{style:{...K}}),j.title]})),!t&&j&&j.type==="collapse"&&j.breadcrumbs===!0&&(Te=$.jsxs(y0,{sx:e===!1?{mb:3,bgcolor:"transparent",...D}:{mb:3,bgcolor:"background.default",...D},...k,children:[$.jsx(Dr,{sx:{p:1.25,px:e===!1?0:2},children:$.jsxs(_o,{container:!0,direction:g?"row":"column",justifyContent:g?"space-between":"flex-start",alignItems:g?"center":"flex-start",spacing:1,children:[T&&!A&&$.jsx(TS,{title:j.title}),$.jsx(_o,{children:$.jsxs(uk,{"aria-label":"breadcrumb",maxItems:i||8,separator:_e,sx:{"& .MuiBreadcrumbs-separator":{width:16,ml:1.25,mr:1.25}},children:[$.jsxs(rr,{component:Ny,to:"/",color:"textSecondary",variant:"h6",sx:ee,children:[c&&$.jsx(A8,{style:K}),s&&!c&&$.jsx(C8,{style:{...K,marginRight:0}}),(!s||c)&&"Dashboard"]}),ae]})}),T&&A&&$.jsx(TS,{title:j.title})]})}),e===!1&&n!==!1&&$.jsx(gu,{sx:{mt:2}})]})),W&&W.type==="item"||(W==null?void 0:W.type)==="group"&&(W!=null&&W.url)||t){Ae=W==null?void 0:W.title,He=W!=null&&W.icon?W.icon:pk,be=$.jsxs(rr,{variant:"h6",noWrap:!0,sx:{...ee,color:"text.secondary",display:"inline-block",overflow:"hidden",lineHeight:1.5,mb:-.625,textOverflow:"ellipsis",maxWidth:{xs:102,sm:"unset"}},children:[c&&$.jsx(He,{style:{...K}}),Ae]});let Se=$.jsxs(uk,{"aria-label":"breadcrumb",maxItems:i||8,separator:_e,sx:{"& .MuiBreadcrumbs-separator":{width:16,mx:.75}},children:[$.jsxs(rr,{component:Ny,to:"/",color:"textSecondary",variant:"h6",sx:ee,children:[c&&$.jsx(A8,{style:{...K}}),s&&!c&&$.jsx(C8,{style:{...K,marginRight:0}}),(!s||c)&&"Dashboard"]}),ae,be]});t&&h&&(h==null?void 0:h.length)>0&&(Se=$.jsx(uk,{"aria-label":"breadcrumb",maxItems:i||8,separator:_e,sx:{"& .MuiBreadcrumbs-separator":{width:16,ml:1.25,mr:1.25}},children:h==null?void 0:h.map((qe,it)=>(Re=qe.icon?qe.icon:pk,$.jsxs(rr,{...qe.to&&{component:Ny,to:qe.to},variant:"h6",sx:ee,color:qe.to?"text.secondary":"text.primary",children:[qe.icon&&$.jsx(Re,{style:K}),qe.title]},it)))})),((W==null?void 0:W.breadcrumbs)!==!1||t)&&(Te=$.jsxs(y0,{sx:e===!1?{mb:3,bgcolor:"transparent",...D}:{mb:3,bgcolor:"background.default",...D},...k,children:[$.jsx(Dr,{sx:{p:1.25,px:e===!1?0:2},children:$.jsxs(_o,{container:!0,direction:g?"row":"column",justifyContent:g?"space-between":"flex-start",alignItems:g?"center":"flex-start",spacing:1,children:[T&&!A&&$.jsx(TS,{title:t?r:W==null?void 0:W.title}),$.jsx(_o,{children:Se}),T&&A&&$.jsx(TS,{title:t?r:W==null?void 0:W.title})]})}),e===!1&&n!==!1&&$.jsx(gu,{sx:{mt:2}})]}))}return Te}TS.propTypes={title:nt.string};iJ.propTypes={card:nt.bool,custom:nt.bool,divider:nt.bool,heading:nt.string,icon:nt.bool,icons:nt.bool,links:nt.array,maxItems:nt.number,rightAlign:nt.bool,separator:nt.any,IconChevronRight:nt.any,title:nt.bool,titleBottom:nt.bool,sx:nt.any,others:nt.any};function CCe(){const e=cs(),t=f1(e.breakpoints.down("md")),{borderRadius:n,miniDrawer:r}=y1(),{menuMaster:s,menuMasterLoading:c}=j0(),h=s==null?void 0:s.isDashboardDrawerOpened;return q.useEffect(()=>{iR(!r)},[r]),q.useEffect(()=>{t&&iR(!1)},[t]),c?$.jsx(WX,{}):$.jsxs(Dr,{sx:{display:"flex"},children:[$.jsx(_fe,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:0,sx:{bgcolor:"background.default"},children:$.jsx(Sfe,{sx:{p:2},children:$.jsx(ISe,{})})}),$.jsx(TCe,{}),$.jsx(ECe,{borderRadius:n,open:h,children:$.jsxs(Dr,{sx:{px:{xs:0},minHeight:"calc(100vh - 128px)",display:"flex",flexDirection:"column"},children:[$.jsx(iJ,{}),$.jsx(WY,{})]})})]})}const Sj=Es($.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),ACe=Es($.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),MCe=Es($.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),oJ=6048e5,RCe=864e5,sJ=6e4,aJ=36e5,DCe=1e3,fA=43200,M8=1440,R8=Symbol.for("constructDateFrom");function Ts(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&R8 in e?e[R8](t):e instanceof Date?new e.constructor(t):new Date(t)}function oi(e,t){return Ts(t||e,e)}function pD(e,t,n){const r=oi(e,n==null?void 0:n.in);return isNaN(t)?Ts((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function lJ(e,t,n){const r=oi(e,n==null?void 0:n.in);if(isNaN(t))return Ts(e,NaN);if(!t)return r;const s=r.getDate(),c=Ts(e,r.getTime());c.setMonth(r.getMonth()+t+1,0);const h=c.getDate();return s>=h?c:(r.setFullYear(c.getFullYear(),c.getMonth(),s),r)}function cJ(e,t,n){return Ts(e,+oi(e)+t)}function PCe(e,t,n){return cJ(e,t*aJ)}let ICe={};function uv(){return ICe}function Xp(e,t){var i,g,w,T;const n=uv(),r=(t==null?void 0:t.weekStartsOn)??((g=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((T=(w=n.locale)==null?void 0:w.options)==null?void 0:T.weekStartsOn)??0,s=oi(e,t==null?void 0:t.in),c=s.getDay(),h=(c<r?7:0)+c-r;return s.setDate(s.getDate()-h),s.setHours(0,0,0,0),s}function Kb(e,t){return Xp(e,{...t,weekStartsOn:1})}function uJ(e,t){const n=oi(e,t==null?void 0:t.in),r=n.getFullYear(),s=Ts(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const c=Kb(s),h=Ts(n,0);h.setFullYear(r,0,4),h.setHours(0,0,0,0);const i=Kb(h);return n.getTime()>=c.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function Qb(e){const t=oi(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function dv(e,...t){const n=Ts.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function pT(e,t){const n=oi(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function kCe(e,t,n){const[r,s]=dv(n==null?void 0:n.in,e,t),c=pT(r),h=pT(s),i=+c-Qb(c),g=+h-Qb(h);return Math.round((i-g)/RCe)}function OCe(e,t){const n=uJ(e,t),r=Ts(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Kb(r)}function LCe(e,t,n){const r=oi(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*sJ),r}function zCe(e,t,n){return cJ(e,t*1e3)}function FCe(e,t,n){return pD(e,t*7,n)}function BCe(e,t,n){return lJ(e,t*12,n)}function iM(e,t){const n=+oi(e)-+oi(t);return n<0?-1:n>0?1:n}function NCe(e){return Ts(e,Date.now())}function jCe(e,t,n){const[r,s]=dv(n==null?void 0:n.in,e,t);return+pT(r)==+pT(s)}function VCe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dJ(e){return!(!VCe(e)&&typeof e!="number"||isNaN(+oi(e)))}function UCe(e,t,n){const[r,s]=dv(n==null?void 0:n.in,e,t),c=r.getFullYear()-s.getFullYear(),h=r.getMonth()-s.getMonth();return c*12+h}function $Ce(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function qCe(e,t){return+oi(e)-+oi(t)}function HF(e,t){const n=oi(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function hJ(e,t){const n=oi(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function HCe(e,t){const n=oi(e,t==null?void 0:t.in);return+HF(n,t)==+hJ(n,t)}function GCe(e,t,n){const[r,s,c]=dv(n==null?void 0:n.in,e,e,t),h=iM(s,c),i=Math.abs(UCe(s,c));if(i<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-h*i);let g=iM(s,c)===-h;HCe(r)&&i===1&&iM(r,c)===1&&(g=!1);const w=h*(i-+g);return w===0?0:w}function WCe(e,t,n){const r=qCe(e,t)/1e3;return $Ce(n==null?void 0:n.roundingMethod)(r)}function YCe(e,t){const n=oi(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function D8(e,t){const n=oi(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function fJ(e,t){const n=oi(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function XCe(e,t){var i,g,w,T;const n=uv(),r=(t==null?void 0:t.weekStartsOn)??((g=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((T=(w=n.locale)==null?void 0:w.options)==null?void 0:T.weekStartsOn)??0,s=oi(e,t==null?void 0:t.in),c=s.getDay(),h=(c<r?-7:0)+6-(c-r);return s.setDate(s.getDate()+h),s.setHours(23,59,59,999),s}const ZCe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KCe=(e,t,n)=>{let r;const s=ZCe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function mk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const QCe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JCe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eAe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tAe={date:mk({formats:QCe,defaultWidth:"full"}),time:mk({formats:JCe,defaultWidth:"full"}),dateTime:mk({formats:eAe,defaultWidth:"full"})},nAe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rAe=(e,t,n,r)=>nAe[e];function Kw(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const h=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):h;s=e.formattingValues[i]||e.formattingValues[h]}else{const h=e.defaultWidth,i=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[i]||e.values[h]}const c=e.argumentCallback?e.argumentCallback(t):t;return s[c]}}const iAe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oAe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aAe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uAe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dAe={ordinalNumber:uAe,era:Kw({values:iAe,defaultWidth:"wide"}),quarter:Kw({values:oAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Kw({values:sAe,defaultWidth:"wide"}),day:Kw({values:aAe,defaultWidth:"wide"}),dayPeriod:Kw({values:lAe,defaultWidth:"wide",formattingValues:cAe,defaultFormattingWidth:"wide"})};function Qw(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],c=t.match(s);if(!c)return null;const h=c[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(i)?fAe(i,A=>A.test(h)):hAe(i,A=>A.test(h));let w;w=e.valueCallback?e.valueCallback(g):g,w=n.valueCallback?n.valueCallback(w):w;const T=t.slice(h.length);return{value:w,rest:T}}}function hAe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function fAe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function pAe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],c=t.match(e.parsePattern);if(!c)return null;let h=e.valueCallback?e.valueCallback(c[0]):c[0];h=n.valueCallback?n.valueCallback(h):h;const i=t.slice(s.length);return{value:h,rest:i}}}const mAe=/^(\d+)(th|st|nd|rd)?/i,gAe=/\d+/i,yAe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vAe={any:[/^b/i,/^(a|c)/i]},_Ae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xAe={any:[/1/i,/2/i,/3/i,/4/i]},bAe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wAe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SAe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TAe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},EAe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CAe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AAe={ordinalNumber:pAe({matchPattern:mAe,parsePattern:gAe,valueCallback:e=>parseInt(e,10)}),era:Qw({matchPatterns:yAe,defaultMatchWidth:"wide",parsePatterns:vAe,defaultParseWidth:"any"}),quarter:Qw({matchPatterns:_Ae,defaultMatchWidth:"wide",parsePatterns:xAe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qw({matchPatterns:bAe,defaultMatchWidth:"wide",parsePatterns:wAe,defaultParseWidth:"any"}),day:Qw({matchPatterns:SAe,defaultMatchWidth:"wide",parsePatterns:TAe,defaultParseWidth:"any"}),dayPeriod:Qw({matchPatterns:EAe,defaultMatchWidth:"any",parsePatterns:CAe,defaultParseWidth:"any"})},sE={code:"en-US",formatDistance:KCe,formatLong:tAe,formatRelative:rAe,localize:dAe,match:AAe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function MAe(e,t){const n=oi(e,t==null?void 0:t.in);return kCe(n,fJ(n))+1}function pJ(e,t){const n=oi(e,t==null?void 0:t.in),r=+Kb(n)-+OCe(n);return Math.round(r/oJ)+1}function Tj(e,t){var T,A,D,k;const n=oi(e,t==null?void 0:t.in),r=n.getFullYear(),s=uv(),c=(t==null?void 0:t.firstWeekContainsDate)??((A=(T=t==null?void 0:t.locale)==null?void 0:T.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((k=(D=s.locale)==null?void 0:D.options)==null?void 0:k.firstWeekContainsDate)??1,h=Ts((t==null?void 0:t.in)||e,0);h.setFullYear(r+1,0,c),h.setHours(0,0,0,0);const i=Xp(h,t),g=Ts((t==null?void 0:t.in)||e,0);g.setFullYear(r,0,c),g.setHours(0,0,0,0);const w=Xp(g,t);return+n>=+i?r+1:+n>=+w?r:r-1}function RAe(e,t){var i,g,w,T;const n=uv(),r=(t==null?void 0:t.firstWeekContainsDate)??((g=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((T=(w=n.locale)==null?void 0:w.options)==null?void 0:T.firstWeekContainsDate)??1,s=Tj(e,t),c=Ts((t==null?void 0:t.in)||e,0);return c.setFullYear(s,0,r),c.setHours(0,0,0,0),Xp(c,t)}function Ej(e,t){const n=oi(e,t==null?void 0:t.in),r=+Xp(n,t)-+RAe(n,t);return Math.round(r/oJ)+1}function Qo(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Oy={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Qo(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Qo(n+1,2)},d(e,t){return Qo(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Qo(e.getHours()%12||12,t.length)},H(e,t){return Qo(e.getHours(),t.length)},m(e,t){return Qo(e.getMinutes(),t.length)},s(e,t){return Qo(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Qo(s,t.length)}},nb={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},P8={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Oy.y(e,t)},Y:function(e,t,n,r){const s=Tj(e,r),c=s>0?s:1-s;if(t==="YY"){const h=c%100;return Qo(h,2)}return t==="Yo"?n.ordinalNumber(c,{unit:"year"}):Qo(c,t.length)},R:function(e,t){const n=uJ(e);return Qo(n,t.length)},u:function(e,t){const n=e.getFullYear();return Qo(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Qo(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Qo(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Oy.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Qo(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=Ej(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Qo(s,t.length)},I:function(e,t,n){const r=pJ(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Qo(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Oy.d(e,t)},D:function(e,t,n){const r=MAe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Qo(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),c=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return Qo(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),c=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return Qo(c,t.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Qo(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=nb.noon:r===0?s=nb.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=nb.evening:r>=12?s=nb.afternoon:r>=4?s=nb.morning:s=nb.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Oy.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Oy.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Qo(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Qo(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Oy.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Oy.s(e,t)},S:function(e,t){return Oy.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return k8(r);case"XXXX":case"XX":return X_(r);case"XXXXX":case"XXX":default:return X_(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return k8(r);case"xxxx":case"xx":return X_(r);case"xxxxx":case"xxx":default:return X_(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+I8(r,":");case"OOOO":default:return"GMT"+X_(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+I8(r,":");case"zzzz":default:return"GMT"+X_(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Qo(r,t.length)},T:function(e,t,n){return Qo(+e,t.length)}};function I8(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),c=r%60;return c===0?n+String(s):n+String(s)+t+Qo(c,2)}function k8(e,t){return e%60===0?(e>0?"-":"+")+Qo(Math.abs(e)/60,2):X_(e,t)}function X_(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Qo(Math.trunc(r/60),2),c=Qo(r%60,2);return n+s+t+c}const O8=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},mJ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},DAe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return O8(e,t);let c;switch(r){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",O8(r,t)).replace("{{time}}",mJ(s,t))},sR={p:mJ,P:DAe},PAe=/^D+$/,IAe=/^Y+$/,kAe=["D","DD","YY","YYYY"];function gJ(e){return PAe.test(e)}function yJ(e){return IAe.test(e)}function GF(e,t,n){const r=OAe(e,t,n);if(console.warn(r),kAe.includes(e))throw new RangeError(r)}function OAe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LAe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zAe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FAe=/^'([^]*?)'?$/,BAe=/''/g,NAe=/[a-zA-Z]/;function vJ(e,t,n){var T,A,D,k,I,F,j,V;const r=uv(),s=(n==null?void 0:n.locale)??r.locale??sE,c=(n==null?void 0:n.firstWeekContainsDate)??((A=(T=n==null?void 0:n.locale)==null?void 0:T.options)==null?void 0:A.firstWeekContainsDate)??r.firstWeekContainsDate??((k=(D=r.locale)==null?void 0:D.options)==null?void 0:k.firstWeekContainsDate)??1,h=(n==null?void 0:n.weekStartsOn)??((F=(I=n==null?void 0:n.locale)==null?void 0:I.options)==null?void 0:F.weekStartsOn)??r.weekStartsOn??((V=(j=r.locale)==null?void 0:j.options)==null?void 0:V.weekStartsOn)??0,i=oi(e,n==null?void 0:n.in);if(!dJ(i))throw new RangeError("Invalid time value");let g=t.match(zAe).map(W=>{const Z=W[0];if(Z==="p"||Z==="P"){const K=sR[Z];return K(W,s.formatLong)}return W}).join("").match(LAe).map(W=>{if(W==="''")return{isToken:!1,value:"'"};const Z=W[0];if(Z==="'")return{isToken:!1,value:jAe(W)};if(P8[Z])return{isToken:!0,value:W};if(Z.match(NAe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");return{isToken:!1,value:W}});s.localize.preprocessor&&(g=s.localize.preprocessor(i,g));const w={firstWeekContainsDate:c,weekStartsOn:h,locale:s};return g.map(W=>{if(!W.isToken)return W.value;const Z=W.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&yJ(Z)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&gJ(Z))&&GF(Z,t,String(e));const K=P8[Z[0]];return K(i,Z,s.localize,w)}).join("")}function jAe(e){const t=e.match(FAe);return t?t[1].replace(BAe,"'"):e}function VAe(e,t,n){const r=uv(),s=(n==null?void 0:n.locale)??r.locale??sE,c=2520,h=iM(e,t);if(isNaN(h))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:h}),[g,w]=dv(n==null?void 0:n.in,...h>0?[t,e]:[e,t]),T=WCe(w,g),A=(Qb(w)-Qb(g))/1e3,D=Math.round((T-A)/60);let k;if(D<2)return n!=null&&n.includeSeconds?T<5?s.formatDistance("lessThanXSeconds",5,i):T<10?s.formatDistance("lessThanXSeconds",10,i):T<20?s.formatDistance("lessThanXSeconds",20,i):T<40?s.formatDistance("halfAMinute",0,i):T<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):D===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",D,i);if(D<45)return s.formatDistance("xMinutes",D,i);if(D<90)return s.formatDistance("aboutXHours",1,i);if(D<M8){const I=Math.round(D/60);return s.formatDistance("aboutXHours",I,i)}else{if(D<c)return s.formatDistance("xDays",1,i);if(D<fA){const I=Math.round(D/M8);return s.formatDistance("xDays",I,i)}else if(D<fA*2)return k=Math.round(D/fA),s.formatDistance("aboutXMonths",k,i)}if(k=GCe(w,g),k<12){const I=Math.round(D/fA);return s.formatDistance("xMonths",I,i)}else{const I=k%12,F=Math.trunc(k/12);return I<3?s.formatDistance("aboutXYears",F,i):I<9?s.formatDistance("overXYears",F,i):s.formatDistance("almostXYears",F+1,i)}}function UAe(e,t){return VAe(e,NCe(e),t)}function $Ae(e,t){return oi(e,t==null?void 0:t.in).getDate()}function qAe(e,t){return oi(e,t==null?void 0:t.in).getDay()}function _J(e,t){const n=oi(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),c=Ts(n,0);return c.setFullYear(r,s+1,0),c.setHours(0,0,0,0),c.getDate()}function HAe(){return Object.assign({},uv())}function GAe(e,t){return oi(e,t==null?void 0:t.in).getHours()}function WAe(e,t){const n=oi(e,t==null?void 0:t.in).getDay();return n===0?7:n}function YAe(e){return oi(e).getMilliseconds()}function XAe(e,t){return oi(e,t==null?void 0:t.in).getMinutes()}function ZAe(e,t){return oi(e,t==null?void 0:t.in).getMonth()}function KAe(e){return oi(e).getSeconds()}function QAe(e,t){return oi(e,t==null?void 0:t.in).getFullYear()}function gk(e,t){return+oi(e)>+oi(t)}function yk(e,t){return+oi(e)<+oi(t)}function JAe(e,t){return+oi(e)==+oi(t)}function eMe(e,t){const n=tMe(t)?new t(0):Ts(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function tMe(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const nMe=10;class xJ{constructor(){Or(this,"subPriority",0)}validate(t,n){return!0}}class rMe extends xJ{constructor(t,n,r,s,c){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=s,c&&(this.subPriority=c)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class iMe extends xJ{constructor(n,r){super();Or(this,"priority",nMe);Or(this,"subPriority",-1);this.context=n||(s=>Ts(r,s))}set(n,r){return r.timestampIsSet?n:Ts(n,eMe(n,this.context))}}class Uo{run(t,n,r,s){const c=this.parse(t,n,r,s);return c?{setter:new rMe(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(t,n,r){return!0}}class oMe extends Uo{constructor(){super(...arguments);Or(this,"priority",140);Or(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const fa={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Lp={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function pa(e,t){return e&&{value:t(e.value),rest:e.rest}}function js(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function zp(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,c=n[3]?parseInt(n[3],10):0,h=n[5]?parseInt(n[5],10):0;return{value:r*(s*aJ+c*sJ+h*DCe),rest:t.slice(n[0].length)}}function bJ(e){return js(fa.anyDigitsSigned,e)}function ia(e,t){switch(e){case 1:return js(fa.singleDigit,t);case 2:return js(fa.twoDigits,t);case 3:return js(fa.threeDigits,t);case 4:return js(fa.fourDigits,t);default:return js(new RegExp("^\\d{1,"+e+"}"),t)}}function aR(e,t){switch(e){case 1:return js(fa.singleDigitSigned,t);case 2:return js(fa.twoDigitsSigned,t);case 3:return js(fa.threeDigitsSigned,t);case 4:return js(fa.fourDigitsSigned,t);default:return js(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Cj(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wJ(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const c=r+50,h=Math.trunc(c/100)*100,i=e>=c%100;s=e+h-(i?100:0)}return n?s:1-s}function SJ(e){return e%400===0||e%4===0&&e%100!==0}class sMe extends Uo{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const c=h=>({year:h,isTwoDigitYear:r==="yy"});switch(r){case"y":return pa(ia(4,n),c);case"yo":return pa(s.ordinalNumber(n,{unit:"year"}),c);default:return pa(ia(r.length,n),c)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const c=n.getFullYear();if(s.isTwoDigitYear){const i=wJ(s.year,c);return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}const h=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(h,0,1),n.setHours(0,0,0,0),n}}class aMe extends Uo{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const c=h=>({year:h,isTwoDigitYear:r==="YY"});switch(r){case"Y":return pa(ia(4,n),c);case"Yo":return pa(s.ordinalNumber(n,{unit:"year"}),c);default:return pa(ia(r.length,n),c)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,c){const h=Tj(n,c);if(s.isTwoDigitYear){const g=wJ(s.year,h);return n.setFullYear(g,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),Xp(n,c)}const i=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(i,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),Xp(n,c)}}class lMe extends Uo{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return aR(r==="R"?4:r.length,n)}set(n,r,s){const c=Ts(n,0);return c.setFullYear(s,0,4),c.setHours(0,0,0,0),Kb(c)}}class cMe extends Uo{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return aR(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class uMe extends Uo{constructor(){super(...arguments);Or(this,"priority",120);Or(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return ia(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class dMe extends Uo{constructor(){super(...arguments);Or(this,"priority",120);Or(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return ia(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class hMe extends Uo{constructor(){super(...arguments);Or(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Or(this,"priority",110)}parse(n,r,s){const c=h=>h-1;switch(r){case"M":return pa(js(fa.month,n),c);case"MM":return pa(ia(2,n),c);case"Mo":return pa(s.ordinalNumber(n,{unit:"month"}),c);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class fMe extends Uo{constructor(){super(...arguments);Or(this,"priority",110);Or(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const c=h=>h-1;switch(r){case"L":return pa(js(fa.month,n),c);case"LL":return pa(ia(2,n),c);case"Lo":return pa(s.ordinalNumber(n,{unit:"month"}),c);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function pMe(e,t,n){const r=oi(e,n==null?void 0:n.in),s=Ej(r,n)-t;return r.setDate(r.getDate()-s*7),oi(r,n==null?void 0:n.in)}class mMe extends Uo{constructor(){super(...arguments);Or(this,"priority",100);Or(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return js(fa.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return ia(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,c){return Xp(pMe(n,s,c),c)}}function gMe(e,t,n){const r=oi(e,n==null?void 0:n.in),s=pJ(r,n)-t;return r.setDate(r.getDate()-s*7),r}class yMe extends Uo{constructor(){super(...arguments);Or(this,"priority",100);Or(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return js(fa.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return ia(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Kb(gMe(n,s))}}const vMe=[31,28,31,30,31,30,31,31,30,31,30,31],_Me=[31,29,31,30,31,30,31,31,30,31,30,31];class xMe extends Uo{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"subPriority",1);Or(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return js(fa.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return ia(r.length,n)}}validate(n,r){const s=n.getFullYear(),c=SJ(s),h=n.getMonth();return c?r>=1&&r<=_Me[h]:r>=1&&r<=vMe[h]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class bMe extends Uo{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"subpriority",1);Or(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return js(fa.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return ia(r.length,n)}}validate(n,r){const s=n.getFullYear();return SJ(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function Aj(e,t,n){var A,D,k,I;const r=uv(),s=(n==null?void 0:n.weekStartsOn)??((D=(A=n==null?void 0:n.locale)==null?void 0:A.options)==null?void 0:D.weekStartsOn)??r.weekStartsOn??((I=(k=r.locale)==null?void 0:k.options)==null?void 0:I.weekStartsOn)??0,c=oi(e,n==null?void 0:n.in),h=c.getDay(),g=(t%7+7)%7,w=7-s,T=t<0||t>6?t-(h+w)%7:(g+w)%7-(h+w)%7;return pD(c,T,n)}class wMe extends Uo{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,c){return n=Aj(n,s,c),n.setHours(0,0,0,0),n}}class SMe extends Uo{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,c){const h=i=>{const g=Math.floor((i-1)/7)*7;return(i+c.weekStartsOn+6)%7+g};switch(r){case"e":case"ee":return pa(ia(r.length,n),h);case"eo":return pa(s.ordinalNumber(n,{unit:"day"}),h);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,c){return n=Aj(n,s,c),n.setHours(0,0,0,0),n}}class TMe extends Uo{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,c){const h=i=>{const g=Math.floor((i-1)/7)*7;return(i+c.weekStartsOn+6)%7+g};switch(r){case"c":case"cc":return pa(ia(r.length,n),h);case"co":return pa(s.ordinalNumber(n,{unit:"day"}),h);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,c){return n=Aj(n,s,c),n.setHours(0,0,0,0),n}}function EMe(e,t,n){const r=oi(e,n==null?void 0:n.in),s=WAe(r,n),c=t-s;return pD(r,c,n)}class CMe extends Uo{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const c=h=>h===0?7:h;switch(r){case"i":case"ii":return ia(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return pa(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),c);case"iiiii":return pa(s.day(n,{width:"narrow",context:"formatting"}),c);case"iiiiii":return pa(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),c);case"iiii":default:return pa(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),c)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=EMe(n,s),n.setHours(0,0,0,0),n}}class AMe extends Uo{constructor(){super(...arguments);Or(this,"priority",80);Or(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Cj(s),0,0,0),n}}class MMe extends Uo{constructor(){super(...arguments);Or(this,"priority",80);Or(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Cj(s),0,0,0),n}}class RMe extends Uo{constructor(){super(...arguments);Or(this,"priority",80);Or(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Cj(s),0,0,0),n}}class DMe extends Uo{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return js(fa.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return ia(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const c=n.getHours()>=12;return c&&s<12?n.setHours(s+12,0,0,0):!c&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class PMe extends Uo{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return js(fa.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return ia(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class IMe extends Uo{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return js(fa.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return ia(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class kMe extends Uo{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return js(fa.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return ia(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const c=s<=24?s%24:s;return n.setHours(c,0,0,0),n}}class OMe extends Uo{constructor(){super(...arguments);Or(this,"priority",60);Or(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return js(fa.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return ia(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class LMe extends Uo{constructor(){super(...arguments);Or(this,"priority",50);Or(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return js(fa.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return ia(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class zMe extends Uo{constructor(){super(...arguments);Or(this,"priority",30);Or(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=c=>Math.trunc(c*Math.pow(10,-r.length+3));return pa(ia(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class FMe extends Uo{constructor(){super(...arguments);Or(this,"priority",10);Or(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return zp(Lp.basicOptionalMinutes,n);case"XX":return zp(Lp.basic,n);case"XXXX":return zp(Lp.basicOptionalSeconds,n);case"XXXXX":return zp(Lp.extendedOptionalSeconds,n);case"XXX":default:return zp(Lp.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Ts(n,n.getTime()-Qb(n)-s)}}class BMe extends Uo{constructor(){super(...arguments);Or(this,"priority",10);Or(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return zp(Lp.basicOptionalMinutes,n);case"xx":return zp(Lp.basic,n);case"xxxx":return zp(Lp.basicOptionalSeconds,n);case"xxxxx":return zp(Lp.extendedOptionalSeconds,n);case"xxx":default:return zp(Lp.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Ts(n,n.getTime()-Qb(n)-s)}}class NMe extends Uo{constructor(){super(...arguments);Or(this,"priority",40);Or(this,"incompatibleTokens","*")}parse(n){return bJ(n)}set(n,r,s){return[Ts(n,s*1e3),{timestampIsSet:!0}]}}class jMe extends Uo{constructor(){super(...arguments);Or(this,"priority",20);Or(this,"incompatibleTokens","*")}parse(n){return bJ(n)}set(n,r,s){return[Ts(n,s),{timestampIsSet:!0}]}}const VMe={G:new oMe,y:new sMe,Y:new aMe,R:new lMe,u:new cMe,Q:new uMe,q:new dMe,M:new hMe,L:new fMe,w:new mMe,I:new yMe,d:new xMe,D:new bMe,E:new wMe,e:new SMe,c:new TMe,i:new CMe,a:new AMe,b:new MMe,B:new RMe,h:new DMe,H:new PMe,K:new IMe,k:new kMe,m:new OMe,s:new LMe,S:new zMe,X:new FMe,x:new BMe,t:new NMe,T:new jMe},UMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$Me=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qMe=/^'([^]*?)'?$/,HMe=/''/g,GMe=/\S/,WMe=/[a-zA-Z]/;function YMe(e,t,n,r){var j,V,W,Z,K,ee,se,he;const s=()=>Ts((r==null?void 0:r.in)||n,NaN),c=HAe(),h=(r==null?void 0:r.locale)??c.locale??sE,i=(r==null?void 0:r.firstWeekContainsDate)??((V=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:V.firstWeekContainsDate)??c.firstWeekContainsDate??((Z=(W=c.locale)==null?void 0:W.options)==null?void 0:Z.firstWeekContainsDate)??1,g=(r==null?void 0:r.weekStartsOn)??((ee=(K=r==null?void 0:r.locale)==null?void 0:K.options)==null?void 0:ee.weekStartsOn)??c.weekStartsOn??((he=(se=c.locale)==null?void 0:se.options)==null?void 0:he.weekStartsOn)??0;if(!t)return e?s():oi(n,r==null?void 0:r.in);const w={firstWeekContainsDate:i,weekStartsOn:g,locale:h},T=[new iMe(r==null?void 0:r.in,n)],A=t.match($Me).map(ye=>{const _e=ye[0];if(_e in sR){const ae=sR[_e];return ae(ye,h.formatLong)}return ye}).join("").match(UMe),D=[];for(let ye of A){!(r!=null&&r.useAdditionalWeekYearTokens)&&yJ(ye)&&GF(ye,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&gJ(ye)&&GF(ye,t,e);const _e=ye[0],ae=VMe[_e];if(ae){const{incompatibleTokens:be}=ae;if(Array.isArray(be)){const Ae=D.find(Re=>be.includes(Re.token)||Re.token===_e);if(Ae)throw new RangeError(`The format string mustn't contain \`${Ae.fullToken}\` and \`${ye}\` at the same time`)}else if(ae.incompatibleTokens==="*"&&D.length>0)throw new RangeError(`The format string mustn't contain \`${ye}\` and any other token at the same time`);D.push({token:_e,fullToken:ye});const Te=ae.run(e,ye,h.match,w);if(!Te)return s();T.push(Te.setter),e=Te.rest}else{if(_e.match(WMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_e+"`");if(ye==="''"?ye="'":_e==="'"&&(ye=XMe(ye)),e.indexOf(ye)===0)e=e.slice(ye.length);else return s()}}if(e.length>0&&GMe.test(e))return s();const k=T.map(ye=>ye.priority).sort((ye,_e)=>_e-ye).filter((ye,_e,ae)=>ae.indexOf(ye)===_e).map(ye=>T.filter(_e=>_e.priority===ye).sort((_e,ae)=>ae.subPriority-_e.subPriority)).map(ye=>ye[0]);let I=oi(n,r==null?void 0:r.in);if(isNaN(+I))return s();const F={};for(const ye of k){if(!ye.validate(I,w))return s();const _e=ye.set(I,F,w);Array.isArray(_e)?(I=_e[0],Object.assign(F,_e[1])):I=_e}return I}function XMe(e){return e.match(qMe)[1].replace(HMe,"'")}function L8(e,t){const n=oi(e,t==null?void 0:t.in);return n.setMinutes(0,0,0),n}function ZMe(e,t,n){const[r,s]=dv(n==null?void 0:n.in,e,t);return+L8(r)==+L8(s)}function KMe(e,t,n){const[r,s]=dv(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function QMe(e,t,n){const[r,s]=dv(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function JMe(e,t,n){const r=+oi(e,n==null?void 0:n.in),[s,c]=[+oi(t.start,n==null?void 0:n.in),+oi(t.end,n==null?void 0:n.in)].sort((h,i)=>h-i);return r>=s&&r<=c}function eRe(e,t,n){const r=oi(e,n==null?void 0:n.in),s=r.getFullYear(),c=r.getDate(),h=Ts(e,0);h.setFullYear(s,t,15),h.setHours(0,0,0,0);const i=_J(h);return r.setMonth(t,Math.min(c,i)),r}function tRe(e,t,n){const r=oi(e,n==null?void 0:n.in);return r.setDate(t),r}function nRe(e,t,n){const r=oi(e,n==null?void 0:n.in);return r.setHours(t),r}function rRe(e,t,n){const r=oi(e,n==null?void 0:n.in);return r.setMilliseconds(t),r}function iRe(e,t,n){const r=oi(e,n==null?void 0:n.in);return r.setMinutes(t),r}function oRe(e,t,n){const r=oi(e,n==null?void 0:n.in);return r.setSeconds(t),r}function sRe(e,t,n){const r=oi(e,n==null?void 0:n.in);return isNaN(+r)?Ts(e,NaN):(r.setFullYear(t),r)}const aRe=({project:e})=>{const t=iv(),n=()=>{t(`/project/${e.id}`)};return $.jsxs(y0,{elevation:3,sx:{position:"relative",width:320,borderRadius:3,overflow:"hidden",cursor:"pointer",transition:"0.3s","&:hover":{boxShadow:6}},onClick:n,children:[$.jsxs(Dr,{sx:{position:"relative",height:140},children:[$.jsx(KQ,{component:"img",height:"140",image:e.image,alt:e.title,sx:{objectFit:"cover",filter:"brightness(60%)"}}),$.jsx(Dr,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",px:2},children:$.jsx(rr,{variant:"subtitle1",fontWeight:700,color:"white",noWrap:!0,children:e.title})})]}),$.jsxs(Dr,{px:2,py:1,children:[$.jsxs(yl,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:.5,children:[$.jsxs(rr,{variant:"caption",color:"text.secondary",children:[e.progress,"% completed"]}),$.jsx(rr,{variant:"caption",color:"text.secondary",children:$.jsx(rr,{variant:"caption",color:"text.secondary",children:e.createdAt?UAe(new Date,{addSuffix:!0}):"Time unknown"})})]}),$.jsx(yN,{variant:"determinate",value:e.progress,sx:{height:6,borderRadius:10}})]}),$.jsx(iD,{sx:{pt:1,pb:1},children:$.jsxs(yl,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[$.jsxs(yl,{direction:"row",spacing:2,alignItems:"center",children:[$.jsxs(yl,{direction:"row",spacing:.5,alignItems:"center",children:[$.jsx(ACe,{fontSize:"small"}),$.jsx(rr,{variant:"caption",children:e.images})]}),$.jsxs(yl,{direction:"row",spacing:.5,alignItems:"center",children:[$.jsx(MCe,{fontSize:"small"}),$.jsx(rr,{variant:"caption",children:e.users})]})]}),$.jsx(ms,{size:"small",onClick:r=>{r.stopPropagation(),n()},children:"View"})]})})]})},z8=[{id:1,title:"Road Inspection",description:"Track changes over time",image:"https://picsum.photos/200/300?1",images:45,users:2,progress:70,createdAt:"2025-06-28T12:00:00Z'"},{id:2,title:"Bridge Survey",description:"High-res structural analysis",image:"https://picsum.photos/200/300?2",images:30,users:3,progress:10,createdAt:"2025-06-27T12:00:00Z'"},{id:3,title:"Pipeline Monitoring",description:"View weekly updates",image:"https://picsum.photos/200/300?3",images:15,users:1,progress:50,createdAt:"2025-06-28T12:00:00Z'"},{id:4,title:"Agricultural Plot",description:"Growth tracking with NDVI",image:"https://picsum.photos/200/300?4",images:50,users:4,progress:90,createdAt:"2025-06-28T12:00:00Z'"}];function F8(){const e=SX(),t=iv(),[n,r]=q.useState(""),[s,c]=q.useState(""),[h,i]=q.useState(z8),g=()=>{let w=[...z8];n&&(w=w.filter(T=>T.title.toLowerCase().includes(n.toLowerCase()))),s==="name"?w.sort((T,A)=>T.title.localeCompare(A.title)):s==="images"&&w.sort((T,A)=>A.images-T.images),i(w)};return $.jsxs(Dr,{p:3,children:[$.jsxs(_o,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",mb:3,children:[$.jsx(_o,{item:!0,xs:12,md:3,children:$.jsx(rr,{variant:"h2",fontWeight:600,children:"All Projects"})}),$.jsx(_o,{item:!0,xs:12,md:6,children:$.jsxs(_o,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:[$.jsx(_o,{item:!0,xs:12,sm:6,children:$.jsxs(fc,{sx:{...e.typography.customInput},children:[$.jsx(Sf,{children:"Search By Name"}),$.jsx(Fp,{label:"Search by Name",variant:"outlined",size:"small",fullWidth:!0,value:n,onChange:w=>r(w.target.value)})]})}),$.jsx(_o,{item:!0,xs:12,sm:6,children:$.jsxs(fc,{sx:{...e.typography.customSelect,minWidth:"100px"},fullWidth:!0,children:[$.jsx(Sf,{children:"Sort By"}),$.jsxs(Jy,{value:s,label:"Sort By",onChange:w=>c(w.target.value),children:[$.jsx(pc,{value:"name",children:"Name"}),$.jsx(pc,{value:"images",children:"Images"})]})]})}),$.jsx(_o,{item:!0,xs:12,sm:2,children:$.jsx(ms,{variant:"contained",fullWidth:!0,onClick:g,children:"Search"})})]})}),$.jsx(_o,{item:!0,xs:12,md:3,textAlign:{xs:"left",md:"right"},children:$.jsx(ms,{variant:"contained",onClick:()=>t("/createProject"),startIcon:$.jsx(Sj,{}),color:"primary",children:"Create New Project"})})]}),$.jsx(_o,{container:!0,spacing:3,children:h.map((w,T)=>$.jsx(_o,{item:!0,xs:12,sm:6,md:4,lg:3,children:$.jsx(aRe,{project:w})},T))})]})}var lRe=function(t){return cRe(t)&&!uRe(t)};function cRe(e){return!!e&&typeof e=="object"}function uRe(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||fRe(e)}var dRe=typeof Symbol=="function"&&Symbol.for,hRe=dRe?Symbol.for("react.element"):60103;function fRe(e){return e.$$typeof===hRe}function pRe(e){return Array.isArray(e)?[]:{}}function lR(e,t){return t.clone!==!1&&t.isMergeableObject(e)?mT(pRe(e),e,t):e}function mRe(e,t,n){return e.concat(t).map(function(r){return lR(r,n)})}function gRe(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(s){r[s]=lR(e[s],n)}),Object.keys(t).forEach(function(s){!n.isMergeableObject(t[s])||!e[s]?r[s]=lR(t[s],n):r[s]=mT(e[s],t[s],n)}),r}function mT(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||mRe,n.isMergeableObject=n.isMergeableObject||lRe;var r=Array.isArray(t),s=Array.isArray(e),c=r===s;return c?r?n.arrayMerge(e,t,n):gRe(e,t,n):lR(t,n)}mT.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,s){return mT(r,s,n)},{})};var WF=mT,TJ=typeof window=="object"&&window&&window.Object===Object&&window,yRe=typeof self=="object"&&self&&self.Object===Object&&self,nm=TJ||yRe||Function("return this")(),tv=nm.Symbol,EJ=Object.prototype,vRe=EJ.hasOwnProperty,_Re=EJ.toString,Jw=tv?tv.toStringTag:void 0;function xRe(e){var t=vRe.call(e,Jw),n=e[Jw];try{e[Jw]=void 0;var r=!0}catch{}var s=_Re.call(e);return r&&(t?e[Jw]=n:delete e[Jw]),s}var bRe=Object.prototype,wRe=bRe.toString;function SRe(e){return wRe.call(e)}var TRe="[object Null]",ERe="[object Undefined]",B8=tv?tv.toStringTag:void 0;function V0(e){return e==null?e===void 0?ERe:TRe:B8&&B8 in Object(e)?xRe(e):SRe(e)}function CJ(e,t){return function(n){return e(t(n))}}var Mj=CJ(Object.getPrototypeOf,Object);function hv(e){return e!=null&&typeof e=="object"}var CRe="[object Object]",ARe=Function.prototype,MRe=Object.prototype,AJ=ARe.toString,RRe=MRe.hasOwnProperty,DRe=AJ.call(Object);function YF(e){if(!hv(e)||V0(e)!=CRe)return!1;var t=Mj(e);if(t===null)return!0;var n=RRe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&AJ.call(n)==DRe}function PRe(){this.__data__=[],this.size=0}function mD(e,t){return e===t||e!==e&&t!==t}function gD(e,t){for(var n=e.length;n--;)if(mD(e[n][0],t))return n;return-1}var IRe=Array.prototype,kRe=IRe.splice;function ORe(e){var t=this.__data__,n=gD(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():kRe.call(t,n,1),--this.size,!0}function LRe(e){var t=this.__data__,n=gD(t,e);return n<0?void 0:t[n][1]}function zRe(e){return gD(this.__data__,e)>-1}function FRe(e,t){var n=this.__data__,r=gD(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Bg(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bg.prototype.clear=PRe;Bg.prototype.delete=ORe;Bg.prototype.get=LRe;Bg.prototype.has=zRe;Bg.prototype.set=FRe;function BRe(){this.__data__=new Bg,this.size=0}function NRe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function jRe(e){return this.__data__.get(e)}function VRe(e){return this.__data__.has(e)}function fv(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var URe="[object AsyncFunction]",$Re="[object Function]",qRe="[object GeneratorFunction]",HRe="[object Proxy]";function Rj(e){if(!fv(e))return!1;var t=V0(e);return t==$Re||t==qRe||t==URe||t==HRe}var vk=nm["__core-js_shared__"],N8=function(){var e=/[^.]+$/.exec(vk&&vk.keys&&vk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function GRe(e){return!!N8&&N8 in e}var WRe=Function.prototype,YRe=WRe.toString;function U0(e){if(e!=null){try{return YRe.call(e)}catch{}try{return e+""}catch{}}return""}var XRe=/[\\^$.*+?()[\]{}|]/g,ZRe=/^\[object .+?Constructor\]$/,KRe=Function.prototype,QRe=Object.prototype,JRe=KRe.toString,eDe=QRe.hasOwnProperty,tDe=RegExp("^"+JRe.call(eDe).replace(XRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nDe(e){if(!fv(e)||GRe(e))return!1;var t=Rj(e)?tDe:ZRe;return t.test(U0(e))}function rDe(e,t){return e==null?void 0:e[t]}function $0(e,t){var n=rDe(e,t);return nDe(n)?n:void 0}var gT=$0(nm,"Map"),yT=$0(Object,"create");function iDe(){this.__data__=yT?yT(null):{},this.size=0}function oDe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sDe="__lodash_hash_undefined__",aDe=Object.prototype,lDe=aDe.hasOwnProperty;function cDe(e){var t=this.__data__;if(yT){var n=t[e];return n===sDe?void 0:n}return lDe.call(t,e)?t[e]:void 0}var uDe=Object.prototype,dDe=uDe.hasOwnProperty;function hDe(e){var t=this.__data__;return yT?t[e]!==void 0:dDe.call(t,e)}var fDe="__lodash_hash_undefined__";function pDe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yT&&t===void 0?fDe:t,this}function b0(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}b0.prototype.clear=iDe;b0.prototype.delete=oDe;b0.prototype.get=cDe;b0.prototype.has=hDe;b0.prototype.set=pDe;function mDe(){this.size=0,this.__data__={hash:new b0,map:new(gT||Bg),string:new b0}}function gDe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function yD(e,t){var n=e.__data__;return gDe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function yDe(e){var t=yD(this,e).delete(e);return this.size-=t?1:0,t}function vDe(e){return yD(this,e).get(e)}function _De(e){return yD(this,e).has(e)}function xDe(e,t){var n=yD(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function pv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pv.prototype.clear=mDe;pv.prototype.delete=yDe;pv.prototype.get=vDe;pv.prototype.has=_De;pv.prototype.set=xDe;var bDe=200;function wDe(e,t){var n=this.__data__;if(n instanceof Bg){var r=n.__data__;if(!gT||r.length<bDe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pv(r)}return n.set(e,t),this.size=n.size,this}function q0(e){var t=this.__data__=new Bg(e);this.size=t.size}q0.prototype.clear=BRe;q0.prototype.delete=NRe;q0.prototype.get=jRe;q0.prototype.has=VRe;q0.prototype.set=wDe;function SDe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var cR=function(){try{var e=$0(Object,"defineProperty");return e({},"",{}),e}catch{}}();function Dj(e,t,n){t=="__proto__"&&cR?cR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var TDe=Object.prototype,EDe=TDe.hasOwnProperty;function MJ(e,t,n){var r=e[t];(!(EDe.call(e,t)&&mD(r,n))||n===void 0&&!(t in e))&&Dj(e,t,n)}function aE(e,t,n,r){var s=!n;n||(n={});for(var c=-1,h=t.length;++c<h;){var i=t[c],g=void 0;g===void 0&&(g=e[i]),s?Dj(n,i,g):MJ(n,i,g)}return n}function CDe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ADe="[object Arguments]";function j8(e){return hv(e)&&V0(e)==ADe}var RJ=Object.prototype,MDe=RJ.hasOwnProperty,RDe=RJ.propertyIsEnumerable,XF=j8(function(){return arguments}())?j8:function(e){return hv(e)&&MDe.call(e,"callee")&&!RDe.call(e,"callee")},w0=Array.isArray;function DDe(){return!1}var DJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,V8=DJ&&typeof module=="object"&&module&&!module.nodeType&&module,PDe=V8&&V8.exports===DJ,U8=PDe?nm.Buffer:void 0,IDe=U8?U8.isBuffer:void 0,Pj=IDe||DDe,kDe=9007199254740991,ODe=/^(?:0|[1-9]\d*)$/;function PJ(e,t){var n=typeof e;return t=t??kDe,!!t&&(n=="number"||n!="symbol"&&ODe.test(e))&&e>-1&&e%1==0&&e<t}var LDe=9007199254740991;function IJ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=LDe}var zDe="[object Arguments]",FDe="[object Array]",BDe="[object Boolean]",NDe="[object Date]",jDe="[object Error]",VDe="[object Function]",UDe="[object Map]",$De="[object Number]",qDe="[object Object]",HDe="[object RegExp]",GDe="[object Set]",WDe="[object String]",YDe="[object WeakMap]",XDe="[object ArrayBuffer]",ZDe="[object DataView]",KDe="[object Float32Array]",QDe="[object Float64Array]",JDe="[object Int8Array]",ePe="[object Int16Array]",tPe="[object Int32Array]",nPe="[object Uint8Array]",rPe="[object Uint8ClampedArray]",iPe="[object Uint16Array]",oPe="[object Uint32Array]",bs={};bs[KDe]=bs[QDe]=bs[JDe]=bs[ePe]=bs[tPe]=bs[nPe]=bs[rPe]=bs[iPe]=bs[oPe]=!0;bs[zDe]=bs[FDe]=bs[XDe]=bs[BDe]=bs[ZDe]=bs[NDe]=bs[jDe]=bs[VDe]=bs[UDe]=bs[$De]=bs[qDe]=bs[HDe]=bs[GDe]=bs[WDe]=bs[YDe]=!1;function sPe(e){return hv(e)&&IJ(e.length)&&!!bs[V0(e)]}function Ij(e){return function(t){return e(t)}}var kJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,VS=kJ&&typeof module=="object"&&module&&!module.nodeType&&module,aPe=VS&&VS.exports===kJ,_k=aPe&&TJ.process,Jb=function(){try{var e=VS&&VS.require&&VS.require("util").types;return e||_k&&_k.binding&&_k.binding("util")}catch{}}(),$8=Jb&&Jb.isTypedArray,OJ=$8?Ij($8):sPe,lPe=Object.prototype,cPe=lPe.hasOwnProperty;function LJ(e,t){var n=w0(e),r=!n&&XF(e),s=!n&&!r&&Pj(e),c=!n&&!r&&!s&&OJ(e),h=n||r||s||c,i=h?CDe(e.length,String):[],g=i.length;for(var w in e)(t||cPe.call(e,w))&&!(h&&(w=="length"||s&&(w=="offset"||w=="parent")||c&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||PJ(w,g)))&&i.push(w);return i}var uPe=Object.prototype;function kj(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||uPe;return e===n}var dPe=CJ(Object.keys,Object),hPe=Object.prototype,fPe=hPe.hasOwnProperty;function pPe(e){if(!kj(e))return dPe(e);var t=[];for(var n in Object(e))fPe.call(e,n)&&n!="constructor"&&t.push(n);return t}function vD(e){return e!=null&&IJ(e.length)&&!Rj(e)}function Oj(e){return vD(e)?LJ(e):pPe(e)}function mPe(e,t){return e&&aE(t,Oj(t),e)}function gPe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var yPe=Object.prototype,vPe=yPe.hasOwnProperty;function _Pe(e){if(!fv(e))return gPe(e);var t=kj(e),n=[];for(var r in e)r=="constructor"&&(t||!vPe.call(e,r))||n.push(r);return n}function lE(e){return vD(e)?LJ(e,!0):_Pe(e)}function xPe(e,t){return e&&aE(t,lE(t),e)}var zJ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,q8=zJ&&typeof module=="object"&&module&&!module.nodeType&&module,bPe=q8&&q8.exports===zJ,H8=bPe?nm.Buffer:void 0,G8=H8?H8.allocUnsafe:void 0;function FJ(e,t){if(t)return e.slice();var n=e.length,r=G8?G8(n):new e.constructor(n);return e.copy(r),r}function Lj(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function wPe(e,t){for(var n=-1,r=e==null?0:e.length,s=0,c=[];++n<r;){var h=e[n];t(h,n,e)&&(c[s++]=h)}return c}function BJ(){return[]}var SPe=Object.prototype,TPe=SPe.propertyIsEnumerable,W8=Object.getOwnPropertySymbols,zj=W8?function(e){return e==null?[]:(e=Object(e),wPe(W8(e),function(t){return TPe.call(e,t)}))}:BJ;function EPe(e,t){return aE(e,zj(e),t)}function NJ(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}var CPe=Object.getOwnPropertySymbols,jJ=CPe?function(e){for(var t=[];e;)NJ(t,zj(e)),e=Mj(e);return t}:BJ;function APe(e,t){return aE(e,jJ(e),t)}function VJ(e,t,n){var r=t(e);return w0(e)?r:NJ(r,n(e))}function MPe(e){return VJ(e,Oj,zj)}function RPe(e){return VJ(e,lE,jJ)}var ZF=$0(nm,"DataView"),KF=$0(nm,"Promise"),QF=$0(nm,"Set"),JF=$0(nm,"WeakMap"),Y8="[object Map]",DPe="[object Object]",X8="[object Promise]",Z8="[object Set]",K8="[object WeakMap]",Q8="[object DataView]",PPe=U0(ZF),IPe=U0(gT),kPe=U0(KF),OPe=U0(QF),LPe=U0(JF),bg=V0;(ZF&&bg(new ZF(new ArrayBuffer(1)))!=Q8||gT&&bg(new gT)!=Y8||KF&&bg(KF.resolve())!=X8||QF&&bg(new QF)!=Z8||JF&&bg(new JF)!=K8)&&(bg=function(e){var t=V0(e),n=t==DPe?e.constructor:void 0,r=n?U0(n):"";if(r)switch(r){case PPe:return Q8;case IPe:return Y8;case kPe:return X8;case OPe:return Z8;case LPe:return K8}return t});var zPe=Object.prototype,FPe=zPe.hasOwnProperty;function BPe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&FPe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var J8=nm.Uint8Array;function Fj(e){var t=new e.constructor(e.byteLength);return new J8(t).set(new J8(e)),t}function NPe(e,t){var n=t?Fj(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var jPe=/\w*$/;function VPe(e){var t=new e.constructor(e.source,jPe.exec(e));return t.lastIndex=e.lastIndex,t}var eH=tv?tv.prototype:void 0,tH=eH?eH.valueOf:void 0;function UPe(e){return tH?Object(tH.call(e)):{}}function UJ(e,t){var n=t?Fj(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var $Pe="[object Boolean]",qPe="[object Date]",HPe="[object Map]",GPe="[object Number]",WPe="[object RegExp]",YPe="[object Set]",XPe="[object String]",ZPe="[object Symbol]",KPe="[object ArrayBuffer]",QPe="[object DataView]",JPe="[object Float32Array]",eIe="[object Float64Array]",tIe="[object Int8Array]",nIe="[object Int16Array]",rIe="[object Int32Array]",iIe="[object Uint8Array]",oIe="[object Uint8ClampedArray]",sIe="[object Uint16Array]",aIe="[object Uint32Array]";function lIe(e,t,n){var r=e.constructor;switch(t){case KPe:return Fj(e);case $Pe:case qPe:return new r(+e);case QPe:return NPe(e,n);case JPe:case eIe:case tIe:case nIe:case rIe:case iIe:case oIe:case sIe:case aIe:return UJ(e,n);case HPe:return new r;case GPe:case XPe:return new r(e);case WPe:return VPe(e);case YPe:return new r;case ZPe:return UPe(e)}}var nH=Object.create,cIe=function(){function e(){}return function(t){if(!fv(t))return{};if(nH)return nH(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function $J(e){return typeof e.constructor=="function"&&!kj(e)?cIe(Mj(e)):{}}var uIe="[object Map]";function dIe(e){return hv(e)&&bg(e)==uIe}var rH=Jb&&Jb.isMap,hIe=rH?Ij(rH):dIe,fIe="[object Set]";function pIe(e){return hv(e)&&bg(e)==fIe}var iH=Jb&&Jb.isSet,mIe=iH?Ij(iH):pIe,gIe=1,yIe=2,vIe=4,qJ="[object Arguments]",_Ie="[object Array]",xIe="[object Boolean]",bIe="[object Date]",wIe="[object Error]",HJ="[object Function]",SIe="[object GeneratorFunction]",TIe="[object Map]",EIe="[object Number]",GJ="[object Object]",CIe="[object RegExp]",AIe="[object Set]",MIe="[object String]",RIe="[object Symbol]",DIe="[object WeakMap]",PIe="[object ArrayBuffer]",IIe="[object DataView]",kIe="[object Float32Array]",OIe="[object Float64Array]",LIe="[object Int8Array]",zIe="[object Int16Array]",FIe="[object Int32Array]",BIe="[object Uint8Array]",NIe="[object Uint8ClampedArray]",jIe="[object Uint16Array]",VIe="[object Uint32Array]",ps={};ps[qJ]=ps[_Ie]=ps[PIe]=ps[IIe]=ps[xIe]=ps[bIe]=ps[kIe]=ps[OIe]=ps[LIe]=ps[zIe]=ps[FIe]=ps[TIe]=ps[EIe]=ps[GJ]=ps[CIe]=ps[AIe]=ps[MIe]=ps[RIe]=ps[BIe]=ps[NIe]=ps[jIe]=ps[VIe]=!0;ps[wIe]=ps[HJ]=ps[DIe]=!1;function US(e,t,n,r,s,c){var h,i=t&gIe,g=t&yIe,w=t&vIe;if(h!==void 0)return h;if(!fv(e))return e;var T=w0(e);if(T){if(h=BPe(e),!i)return Lj(e,h)}else{var A=bg(e),D=A==HJ||A==SIe;if(Pj(e))return FJ(e,i);if(A==GJ||A==qJ||D&&!s){if(h=g||D?{}:$J(e),!i)return g?APe(e,xPe(h,e)):EPe(e,mPe(h,e))}else{if(!ps[A])return s?e:{};h=lIe(e,A,i)}}c||(c=new q0);var k=c.get(e);if(k)return k;c.set(e,h),mIe(e)?e.forEach(function(j){h.add(US(j,t,n,j,e,c))}):hIe(e)&&e.forEach(function(j,V){h.set(V,US(j,t,n,V,e,c))});var I=w?g?RPe:MPe:g?lE:Oj,F=T?void 0:I(e);return SDe(F||e,function(j,V){F&&(V=j,j=e[V]),MJ(h,V,US(j,t,n,V,e,c))}),h}var UIe=1,$Ie=4;function pA(e){return US(e,UIe|$Ie)}var xk,oH;function qIe(){if(oH)return xk;oH=1;var e=Array.isArray,t=Object.keys,n=Object.prototype.hasOwnProperty,r=typeof Element<"u";function s(c,h){if(c===h)return!0;if(c&&h&&typeof c=="object"&&typeof h=="object"){var i=e(c),g=e(h),w,T,A;if(i&&g){if(T=c.length,T!=h.length)return!1;for(w=T;w--!==0;)if(!s(c[w],h[w]))return!1;return!0}if(i!=g)return!1;var D=c instanceof Date,k=h instanceof Date;if(D!=k)return!1;if(D&&k)return c.getTime()==h.getTime();var I=c instanceof RegExp,F=h instanceof RegExp;if(I!=F)return!1;if(I&&F)return c.toString()==h.toString();var j=t(c);if(T=j.length,T!==t(h).length)return!1;for(w=T;w--!==0;)if(!n.call(h,j[w]))return!1;if(r&&c instanceof Element&&h instanceof Element)return c===h;for(w=T;w--!==0;)if(A=j[w],!(A==="_owner"&&c.$$typeof)&&!s(c[A],h[A]))return!1;return!0}return c!==c&&h!==h}return xk=function(h,i){try{return s(h,i)}catch(g){if(g.message&&g.message.match(/stack|recursion/i)||g.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",g.name,g.message),!1;throw g}},xk}var HIe=qIe();const Z_=_a(HIe);var GIe=4;function sH(e){return US(e,GIe)}function WJ(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var WIe="[object Symbol]";function Bj(e){return typeof e=="symbol"||hv(e)&&V0(e)==WIe}var YIe="Expected a function";function Nj(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(YIe);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],c=n.cache;if(c.has(s))return c.get(s);var h=e.apply(this,r);return n.cache=c.set(s,h)||c,h};return n.cache=new(Nj.Cache||pv),n}Nj.Cache=pv;var XIe=500;function ZIe(e){var t=Nj(e,function(r){return n.size===XIe&&n.clear(),r}),n=t.cache;return t}var KIe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QIe=/\\(\\)?/g,JIe=ZIe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(KIe,function(n,r,s,c){t.push(s?c.replace(QIe,"$1"):r||n)}),t});function eke(e){if(typeof e=="string"||Bj(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var aH=tv?tv.prototype:void 0,lH=aH?aH.toString:void 0;function YJ(e){if(typeof e=="string")return e;if(w0(e))return WJ(e,YJ)+"";if(Bj(e))return lH?lH.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function tke(e){return e==null?"":YJ(e)}function XJ(e){return w0(e)?WJ(e,eke):Bj(e)?[e]:Lj(JIe(tke(e)))}function gl(){return gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}function ZJ(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var _D=q.createContext(void 0);_D.displayName="FormikContext";var nke=_D.Provider;_D.Consumer;function rke(){var e=q.useContext(_D);return e}var eh=function(t){return typeof t=="function"},xD=function(t){return t!==null&&typeof t=="object"},ike=function(t){return String(Math.floor(Number(t)))===t},bk=function(t){return Object.prototype.toString.call(t)==="[object String]"},oke=function(t){return q.Children.count(t)===0},wk=function(t){return xD(t)&&eh(t.then)};function Qu(e,t,n,r){r===void 0&&(r=0);for(var s=XJ(t);e&&r<s.length;)e=e[s[r++]];return r!==s.length&&!e||e===void 0?n:e}function d0(e,t,n){for(var r=sH(e),s=r,c=0,h=XJ(t);c<h.length-1;c++){var i=h[c],g=Qu(e,h.slice(0,c+1));if(g&&(xD(g)||Array.isArray(g)))s=s[i]=sH(g);else{var w=h[c+1];s=s[i]=ike(w)&&Number(w)>=0?[]:{}}}return(c===0?e:s)[h[c]]===n?e:(n===void 0?delete s[h[c]]:s[h[c]]=n,c===0&&n===void 0&&delete r[h[c]],r)}function KJ(e,t,n,r){n===void 0&&(n=new WeakMap),r===void 0&&(r={});for(var s=0,c=Object.keys(e);s<c.length;s++){var h=c[s],i=e[h];xD(i)?n.get(i)||(n.set(i,!0),r[h]=Array.isArray(i)?[]:{},KJ(i,t,n,r[h])):r[h]=t}return r}function ske(e,t){switch(t.type){case"SET_VALUES":return gl({},e,{values:t.payload});case"SET_TOUCHED":return gl({},e,{touched:t.payload});case"SET_ERRORS":return Z_(e.errors,t.payload)?e:gl({},e,{errors:t.payload});case"SET_STATUS":return gl({},e,{status:t.payload});case"SET_ISSUBMITTING":return gl({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return gl({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return gl({},e,{values:d0(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return gl({},e,{touched:d0(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return gl({},e,{errors:d0(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return gl({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return gl({},e,{touched:KJ(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return gl({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return gl({},e,{isSubmitting:!1});default:return e}}var N_={},mA={};function QJ(e){var t=e.validateOnChange,n=t===void 0?!0:t,r=e.validateOnBlur,s=r===void 0?!0:r,c=e.validateOnMount,h=c===void 0?!1:c,i=e.isInitialValid,g=e.enableReinitialize,w=g===void 0?!1:g,T=e.onSubmit,A=ZJ(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),D=gl({validateOnChange:n,validateOnBlur:s,validateOnMount:h,onSubmit:T},A),k=q.useRef(D.initialValues),I=q.useRef(D.initialErrors||N_),F=q.useRef(D.initialTouched||mA),j=q.useRef(D.initialStatus),V=q.useRef(!1),W=q.useRef({});q.useEffect(function(){return V.current=!0,function(){V.current=!1}},[]);var Z=q.useState(0),K=Z[1],ee=q.useRef({values:pA(D.initialValues),errors:pA(D.initialErrors)||N_,touched:pA(D.initialTouched)||mA,status:pA(D.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),se=ee.current,he=q.useCallback(function(ut){var gn=ee.current;ee.current=ske(gn,ut),gn!==ee.current&&K(function(Rt){return Rt+1})},[]),ye=q.useCallback(function(ut,gn){return new Promise(function(Rt,Wt){var zn=D.validate(ut,gn);zn==null?Rt(N_):wk(zn)?zn.then(function(Un){Rt(Un||N_)},function(Un){Wt(Un)}):Rt(zn)})},[D.validate]),_e=q.useCallback(function(ut,gn){var Rt=D.validationSchema,Wt=eh(Rt)?Rt(gn):Rt,zn=gn&&Wt.validateAt?Wt.validateAt(gn,ut):cke(ut,Wt);return new Promise(function(Un,mr){zn.then(function(){Un(N_)},function(Xn){Xn.name==="ValidationError"?Un(lke(Xn)):mr(Xn)})})},[D.validationSchema]),ae=q.useCallback(function(ut,gn){return new Promise(function(Rt){return Rt(W.current[ut].validate(gn))})},[]),be=q.useCallback(function(ut){var gn=Object.keys(W.current).filter(function(Wt){return eh(W.current[Wt].validate)}),Rt=gn.length>0?gn.map(function(Wt){return ae(Wt,Qu(ut,Wt))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Rt).then(function(Wt){return Wt.reduce(function(zn,Un,mr){return Un==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Un&&(zn=d0(zn,gn[mr],Un)),zn},{})})},[ae]),Te=q.useCallback(function(ut){return Promise.all([be(ut),D.validationSchema?_e(ut):{},D.validate?ye(ut):{}]).then(function(gn){var Rt=gn[0],Wt=gn[1],zn=gn[2],Un=WF.all([Rt,Wt,zn],{arrayMerge:uke});return Un})},[D.validate,D.validationSchema,be,ye,_e]),Ae=Zd(function(ut){return ut===void 0&&(ut=se.values),he({type:"SET_ISVALIDATING",payload:!0}),Te(ut).then(function(gn){return V.current&&(he({type:"SET_ISVALIDATING",payload:!1}),he({type:"SET_ERRORS",payload:gn})),gn})});q.useEffect(function(){h&&V.current===!0&&Z_(k.current,D.initialValues)&&Ae(k.current)},[h,Ae]);var Re=q.useCallback(function(ut){var gn=ut&&ut.values?ut.values:k.current,Rt=ut&&ut.errors?ut.errors:I.current?I.current:D.initialErrors||{},Wt=ut&&ut.touched?ut.touched:F.current?F.current:D.initialTouched||{},zn=ut&&ut.status?ut.status:j.current?j.current:D.initialStatus;k.current=gn,I.current=Rt,F.current=Wt,j.current=zn;var Un=function(){he({type:"RESET_FORM",payload:{isSubmitting:!!ut&&!!ut.isSubmitting,errors:Rt,touched:Wt,status:zn,values:gn,isValidating:!!ut&&!!ut.isValidating,submitCount:ut&&ut.submitCount&&typeof ut.submitCount=="number"?ut.submitCount:0}})};if(D.onReset){var mr=D.onReset(se.values,Bt);wk(mr)?mr.then(Un):Un()}else Un()},[D.initialErrors,D.initialStatus,D.initialTouched,D.onReset]);q.useEffect(function(){V.current===!0&&!Z_(k.current,D.initialValues)&&w&&(k.current=D.initialValues,Re(),h&&Ae(k.current))},[w,D.initialValues,Re,h,Ae]),q.useEffect(function(){w&&V.current===!0&&!Z_(I.current,D.initialErrors)&&(I.current=D.initialErrors||N_,he({type:"SET_ERRORS",payload:D.initialErrors||N_}))},[w,D.initialErrors]),q.useEffect(function(){w&&V.current===!0&&!Z_(F.current,D.initialTouched)&&(F.current=D.initialTouched||mA,he({type:"SET_TOUCHED",payload:D.initialTouched||mA}))},[w,D.initialTouched]),q.useEffect(function(){w&&V.current===!0&&!Z_(j.current,D.initialStatus)&&(j.current=D.initialStatus,he({type:"SET_STATUS",payload:D.initialStatus}))},[w,D.initialStatus,D.initialTouched]);var He=Zd(function(ut){if(W.current[ut]&&eh(W.current[ut].validate)){var gn=Qu(se.values,ut),Rt=W.current[ut].validate(gn);return wk(Rt)?(he({type:"SET_ISVALIDATING",payload:!0}),Rt.then(function(Wt){return Wt}).then(function(Wt){he({type:"SET_FIELD_ERROR",payload:{field:ut,value:Wt}}),he({type:"SET_ISVALIDATING",payload:!1})})):(he({type:"SET_FIELD_ERROR",payload:{field:ut,value:Rt}}),Promise.resolve(Rt))}else if(D.validationSchema)return he({type:"SET_ISVALIDATING",payload:!0}),_e(se.values,ut).then(function(Wt){return Wt}).then(function(Wt){he({type:"SET_FIELD_ERROR",payload:{field:ut,value:Qu(Wt,ut)}}),he({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Se=q.useCallback(function(ut,gn){var Rt=gn.validate;W.current[ut]={validate:Rt}},[]),qe=q.useCallback(function(ut){delete W.current[ut]},[]),it=Zd(function(ut,gn){he({type:"SET_TOUCHED",payload:ut});var Rt=gn===void 0?s:gn;return Rt?Ae(se.values):Promise.resolve()}),tt=q.useCallback(function(ut){he({type:"SET_ERRORS",payload:ut})},[]),Oe=Zd(function(ut,gn){var Rt=eh(ut)?ut(se.values):ut;he({type:"SET_VALUES",payload:Rt});var Wt=gn===void 0?n:gn;return Wt?Ae(Rt):Promise.resolve()}),Je=q.useCallback(function(ut,gn){he({type:"SET_FIELD_ERROR",payload:{field:ut,value:gn}})},[]),yt=Zd(function(ut,gn,Rt){he({type:"SET_FIELD_VALUE",payload:{field:ut,value:gn}});var Wt=Rt===void 0?n:Rt;return Wt?Ae(d0(se.values,ut,gn)):Promise.resolve()}),wt=q.useCallback(function(ut,gn){var Rt=gn,Wt=ut,zn;if(!bk(ut)){ut.persist&&ut.persist();var Un=ut.target?ut.target:ut.currentTarget,mr=Un.type,Xn=Un.name,or=Un.id,En=Un.value,Fr=Un.checked;Un.outerHTML;var Er=Un.options,_r=Un.multiple;Rt=gn||Xn||or,Wt=/number|range/.test(mr)?(zn=parseFloat(En),isNaN(zn)?"":zn):/checkbox/.test(mr)?hke(Qu(se.values,Rt),Fr,En):Er&&_r?dke(Er):En}Rt&&yt(Rt,Wt)},[yt,se.values]),$t=Zd(function(ut){if(bk(ut))return function(gn){return wt(gn,ut)};wt(ut)}),It=Zd(function(ut,gn,Rt){gn===void 0&&(gn=!0),he({type:"SET_FIELD_TOUCHED",payload:{field:ut,value:gn}});var Wt=Rt===void 0?s:Rt;return Wt?Ae(se.values):Promise.resolve()}),vt=q.useCallback(function(ut,gn){ut.persist&&ut.persist();var Rt=ut.target,Wt=Rt.name,zn=Rt.id;Rt.outerHTML;var Un=gn||Wt||zn;It(Un,!0)},[It]),sn=Zd(function(ut){if(bk(ut))return function(gn){return vt(gn,ut)};vt(ut)}),Rn=q.useCallback(function(ut){eh(ut)?he({type:"SET_FORMIK_STATE",payload:ut}):he({type:"SET_FORMIK_STATE",payload:function(){return ut}})},[]),yn=q.useCallback(function(ut){he({type:"SET_STATUS",payload:ut})},[]),Qt=q.useCallback(function(ut){he({type:"SET_ISSUBMITTING",payload:ut})},[]),Jt=Zd(function(){return he({type:"SUBMIT_ATTEMPT"}),Ae().then(function(ut){var gn=ut instanceof Error,Rt=!gn&&Object.keys(ut).length===0;if(Rt){var Wt;try{if(Wt=Kt(),Wt===void 0)return}catch(zn){throw zn}return Promise.resolve(Wt).then(function(zn){return V.current&&he({type:"SUBMIT_SUCCESS"}),zn}).catch(function(zn){if(V.current)throw he({type:"SUBMIT_FAILURE"}),zn})}else if(V.current&&(he({type:"SUBMIT_FAILURE"}),gn))throw ut})}),fn=Zd(function(ut){ut&&ut.preventDefault&&eh(ut.preventDefault)&&ut.preventDefault(),ut&&ut.stopPropagation&&eh(ut.stopPropagation)&&ut.stopPropagation(),Jt().catch(function(gn){console.warn("Warning: An unhandled error was caught from submitForm()",gn)})}),Bt={resetForm:Re,validateForm:Ae,validateField:He,setErrors:tt,setFieldError:Je,setFieldTouched:It,setFieldValue:yt,setStatus:yn,setSubmitting:Qt,setTouched:it,setValues:Oe,setFormikState:Rn,submitForm:Jt},Kt=Zd(function(){return T(se.values,Bt)}),_n=Zd(function(ut){ut&&ut.preventDefault&&eh(ut.preventDefault)&&ut.preventDefault(),ut&&ut.stopPropagation&&eh(ut.stopPropagation)&&ut.stopPropagation(),Re()}),an=q.useCallback(function(ut){return{value:Qu(se.values,ut),error:Qu(se.errors,ut),touched:!!Qu(se.touched,ut),initialValue:Qu(k.current,ut),initialTouched:!!Qu(F.current,ut),initialError:Qu(I.current,ut)}},[se.errors,se.touched,se.values]),Ft=q.useCallback(function(ut){return{setValue:function(Rt,Wt){return yt(ut,Rt,Wt)},setTouched:function(Rt,Wt){return It(ut,Rt,Wt)},setError:function(Rt){return Je(ut,Rt)}}},[yt,It,Je]),kn=q.useCallback(function(ut){var gn=xD(ut),Rt=gn?ut.name:ut,Wt=Qu(se.values,Rt),zn={name:Rt,value:Wt,onChange:$t,onBlur:sn};if(gn){var Un=ut.type,mr=ut.value,Xn=ut.as,or=ut.multiple;Un==="checkbox"?mr===void 0?zn.checked=!!Wt:(zn.checked=!!(Array.isArray(Wt)&&~Wt.indexOf(mr)),zn.value=mr):Un==="radio"?(zn.checked=Wt===mr,zn.value=mr):Xn==="select"&&or&&(zn.value=zn.value||[],zn.multiple=!0)}return zn},[sn,$t,se.values]),Yn=q.useMemo(function(){return!Z_(k.current,se.values)},[k.current,se.values]),wn=q.useMemo(function(){return typeof i<"u"?Yn?se.errors&&Object.keys(se.errors).length===0:i!==!1&&eh(i)?i(D):i:se.errors&&Object.keys(se.errors).length===0},[i,Yn,se.errors,D]),Vn=gl({},se,{initialValues:k.current,initialErrors:I.current,initialTouched:F.current,initialStatus:j.current,handleBlur:sn,handleChange:$t,handleReset:_n,handleSubmit:fn,resetForm:Re,setErrors:tt,setFormikState:Rn,setFieldTouched:It,setFieldValue:yt,setFieldError:Je,setStatus:yn,setSubmitting:Qt,setTouched:it,setValues:Oe,submitForm:Jt,validateForm:Ae,validateField:He,isValid:wn,dirty:Yn,unregisterField:qe,registerField:Se,getFieldProps:kn,getFieldMeta:an,getFieldHelpers:Ft,validateOnBlur:s,validateOnChange:n,validateOnMount:h});return Vn}function ake(e){var t=QJ(e),n=e.component,r=e.children,s=e.render,c=e.innerRef;return q.useImperativeHandle(c,function(){return t}),q.createElement(nke,{value:t},n?q.createElement(n,t):s?s(t):r?eh(r)?r(t):oke(r)?null:q.Children.only(r):null)}function lke(e){var t={};if(e.inner){if(e.inner.length===0)return d0(t,e.path,e.message);for(var s=e.inner,n=Array.isArray(s),r=0,s=n?s:s[Symbol.iterator]();;){var c;if(n){if(r>=s.length)break;c=s[r++]}else{if(r=s.next(),r.done)break;c=r.value}var h=c;Qu(t,h.path)||(t=d0(t,h.path,h.message))}}return t}function cke(e,t,n,r){n===void 0&&(n=!1);var s=eB(e);return t[n?"validateSync":"validate"](s,{abortEarly:!1,context:s})}function eB(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);Array.isArray(e[r])===!0?t[r]=e[r].map(function(s){return Array.isArray(s)===!0||YF(s)?eB(s):s!==""?s:void 0}):YF(e[r])?t[r]=eB(e[r]):t[r]=e[r]!==""?e[r]:void 0}return t}function uke(e,t,n){var r=e.slice();return t.forEach(function(c,h){if(typeof r[h]>"u"){var i=n.clone!==!1,g=i&&n.isMergeableObject(c);r[h]=g?WF(Array.isArray(c)?[]:{},c,n):c}else n.isMergeableObject(c)?r[h]=WF(e[h],c,n):e.indexOf(c)===-1&&r.push(c)}),r}function dke(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function hke(e,t,n){if(typeof e=="boolean")return!!t;var r=[],s=!1,c=-1;if(Array.isArray(e))r=e,c=e.indexOf(n),s=c>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!s?r.concat(n):s?r.slice(0,c).concat(r.slice(c+1)):r}var fke=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?q.useLayoutEffect:q.useEffect;function Zd(e){var t=q.useRef(e);return fke(function(){t.current=e}),q.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current.apply(void 0,r)},[])}var JJ=q.forwardRef(function(e,t){var n=e.action,r=ZJ(e,["action"]),s=n??"#",c=rke(),h=c.handleReset,i=c.handleSubmit;return q.createElement("form",gl({onSubmit:i,ref:t,onReset:h,action:s},r))});JJ.displayName="Form";const pke=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:Tt({},e)}}}}),eee={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(e,t)=>`Select ${e}. ${t?`Selected time is ${t}`:"No time selected"}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:e=>e?`Choose date, selected date is ${e}`:"Choose date",openTimePickerDialogue:e=>e?`Choose time, selected time is ${e}`:"Choose time",openRangePickerDialogue:e=>e?`Choose range, selected range is ${e}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},mke=eee;pke(eee);const gke=["localeText"],tB=q.createContext(null),tee=function(t){const{localeText:n}=t,r=vi(t,gke),{adapter:s,localeText:c}=q.useContext(tB)??{adapter:void 0,localeText:void 0},h=qs({props:r,name:"MuiLocalizationProvider"}),{children:i,dateAdapter:g,dateFormats:w,dateLibInstance:T,adapterLocale:A,localeText:D}=h,k=q.useMemo(()=>Tt({},D,c,n),[D,c,n]),I=q.useMemo(()=>{if(!g)return s||null;const V=new g({locale:A,formats:w,instance:T});if(!V.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return V},[g,A,w,T,s]),F=q.useMemo(()=>I?{minDate:I.date("1900-01-01T00:00:00.000"),maxDate:I.date("2099-12-31T00:00:00.000")}:null,[I]),j=q.useMemo(()=>({utils:I,adapter:I,defaultDates:F,localeText:k}),[F,I,k]);return $.jsx(tB.Provider,{value:j,children:i})},jj=()=>{const e=q.useContext(tB);if(e===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=q.useMemo(()=>Tt({},mke,e.localeText),[e.localeText]);return q.useMemo(()=>Tt({},e,{localeText:t}),[e,t])},us=()=>jj().adapter,mv=()=>jj().localeText,nB=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],rB=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],nee=["minDateTime","maxDateTime"],yke=[...nB,...rB,...nee],ree=e=>yke.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{}),vke=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],iee=(e,t)=>q.useMemo(()=>{const n=Tt({},e),r={},s=c=>{n.hasOwnProperty(c)&&(r[c]=n[c],delete n[c])};return vke.forEach(s),t==="date"?nB.forEach(s):t==="time"?rB.forEach(s):t==="date-time"&&(nB.forEach(s),rB.forEach(s),nee.forEach(s)),{forwardedProps:n,internalProps:r}},[e,t]),eS=(e,t)=>e.length!==t.length?!1:t.every(n=>e.includes(n)),_ke=({openTo:e,defaultOpenTo:t,views:n,defaultViews:r})=>{const s=n??r;let c;if(e!=null)c=e;else if(s.includes(t))c=t;else if(s.length>0)c=s[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:s,openTo:c}},uR=(e,t,n)=>{let r=t;return r=e.setHours(r,e.getHours(n)),r=e.setMinutes(r,e.getMinutes(n)),r=e.setSeconds(r,e.getSeconds(n)),r=e.setMilliseconds(r,e.getMilliseconds(n)),r},vT=({date:e,disableFuture:t,disablePast:n,maxDate:r,minDate:s,isDateDisabled:c,adapter:h,timezone:i})=>{const g=uR(h,h.date(void 0,i),e);n&&h.isBefore(s,g)&&(s=g),t&&h.isAfter(r,g)&&(r=g);let w=e,T=e;for(h.isBefore(e,s)&&(w=s,T=null),h.isAfter(e,r)&&(T&&(T=r),w=null);w||T;){if(w&&h.isAfter(w,r)&&(w=null),T&&h.isBefore(T,s)&&(T=null),w){if(!c(w))return w;w=h.addDays(w,1)}if(T){if(!c(T))return T;T=h.addDays(T,-1)}}return null},xke=(e,t)=>e.isValid(t)?t:null,cH=(e,t,n)=>t==null||!e.isValid(t)?n:t,bke=(e,t,n)=>!e.isValid(t)&&t!=null&&!e.isValid(n)&&n!=null?!0:e.isEqual(t,n),Vj=(e,t)=>{const r=[e.startOfYear(t)];for(;r.length<12;){const s=r[r.length-1];r.push(e.addMonths(s,1))}return r},oee=(e,t,n)=>n==="date"?e.startOfDay(e.date(void 0,t)):e.date(void 0,t),wke=["year","month","day"],uH=e=>wke.includes(e),Uj=(e,{format:t,views:n},r)=>{if(t!=null)return t;const s=e.formats;return eS(n,["year"])?s.year:eS(n,["month"])?s.month:eS(n,["day"])?s.dayOfMonth:eS(n,["month","year"])?`${s.month} ${s.year}`:eS(n,["day","month"])?`${s.month} ${s.dayOfMonth}`:r?/en/.test(e.getCurrentLocaleCode())?s.normalDateWithWeekday:s.normalDate:s.keyboardDate},Ske=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map(r=>e.addDays(n,r))},see=(e,t)=>{const n=e.formatTokenMap[t];if(n==null)throw new Error([`MUI X: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},bD=(e,t)=>{const n=[],r=e.date(void 0,"default"),s=e.startOfWeek(r),c=e.endOfWeek(r);let h=s;for(;e.isBefore(h,c);)n.push(h),h=e.addDays(h,1);return n.map(i=>e.formatByString(i,t))},aee=(e,t,n,r)=>{switch(n){case"month":return Vj(e,e.date(void 0,t)).map(s=>e.formatByString(s,r));case"weekDay":return bD(e,r);case"meridiem":{const s=e.date(void 0,t);return[e.startOfDay(s),e.endOfDay(s)].map(c=>e.formatByString(c,r))}default:return[]}},dH="s",Tke=["0","1","2","3","4","5","6","7","8","9"],Eke=e=>{const t=e.date(void 0);return e.formatByString(e.setSeconds(t,0),dH)==="0"?Tke:Array.from({length:10}).map((r,s)=>e.formatByString(e.setSeconds(t,s),dH))},S0=(e,t)=>{if(t[0]==="0")return e;const n=[];let r="";for(let s=0;s<e.length;s+=1){r+=e[s];const c=t.indexOf(r);c>-1&&(n.push(c.toString()),r="")}return n.join("")},$j=(e,t)=>t[0]==="0"?e:e.split("").map(n=>t[Number(n)]).join(""),hH=(e,t)=>{const n=S0(e,t);return n!==" "&&!Number.isNaN(Number(n))},qj=(e,t)=>Number(e).toString().padStart(t,"0"),lee=(e,t,n,r,s)=>{if(s.type==="day"&&s.contentType==="digit-with-letter"){const h=e.setDate(n.longestMonth,t);return e.formatByString(h,s.format)}let c=t.toString();return s.hasLeadingZerosInInput&&(c=qj(c,s.maxLength)),$j(c,r)},Hj=(e,t,n)=>{let r=e.value||e.placeholder;const s=t==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return t==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(r=Number(S0(r,n)).toString()),["input-rtl","input-ltr"].includes(t)&&e.contentType==="digit"&&!s&&r.length===1&&(r=`${r}`),t==="input-rtl"&&(r=`${r}`),r},fH=(e,t,n,r)=>e.formatByString(e.parse(t,n),r),Cke=(e,t)=>e.formatByString(e.date(void 0,"system"),t).length===4,cee=(e,t,n,r)=>{if(t!=="digit")return!1;const s=e.date(void 0,"default");switch(n){case"year":return e.lib==="dayjs"&&r==="YY"?!0:e.formatByString(e.setYear(s,1),r).startsWith("0");case"month":return e.formatByString(e.startOfYear(s),r).length>1;case"day":return e.formatByString(e.startOfMonth(s),r).length>1;case"weekDay":return e.formatByString(e.startOfWeek(s),r).length>1;case"hours":return e.formatByString(e.setHours(s,1),r).length>1;case"minutes":return e.formatByString(e.setMinutes(s,1),r).length>1;case"seconds":return e.formatByString(e.setSeconds(s,1),r).length>1;default:throw new Error("Invalid section type")}},Ake=(e,t,n)=>{const r=t.some(g=>g.type==="day"),s=[],c=[];for(let g=0;g<t.length;g+=1){const w=t[g];r&&w.type==="weekDay"||(s.push(w.format),c.push(Hj(w,"non-input",n)))}const h=s.join(" "),i=c.join(" ");return e.parse(i,h)},Mke=e=>e.map(t=>`${t.startSeparator}${t.value||t.placeholder}${t.endSeparator}`).join(""),Rke=(e,t,n)=>{const s=e.map(c=>{const h=Hj(c,n?"input-rtl":"input-ltr",t);return`${c.startSeparator}${h}${c.endSeparator}`}).join("");return n?`${s}`:s},Dke=(e,t,n)=>{const r=e.date(void 0,n),s=e.endOfYear(r),c=e.endOfDay(r),{maxDaysInMonth:h,longestMonth:i}=Vj(e,r).reduce((g,w)=>{const T=e.getDaysInMonth(w);return T>g.maxDaysInMonth?{maxDaysInMonth:T,longestMonth:w}:g},{maxDaysInMonth:0,longestMonth:null});return{year:({format:g})=>({minimum:0,maximum:Cke(e,g)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(s)+1}),day:({currentDate:g})=>({minimum:1,maximum:e.isValid(g)?e.getDaysInMonth(g):h,longestMonth:i}),weekDay:({format:g,contentType:w})=>{if(w==="digit"){const T=bD(e,g).map(Number);return{minimum:Math.min(...T),maximum:Math.max(...T)}}return{minimum:1,maximum:7}},hours:({format:g})=>{const w=e.getHours(c);return S0(e.formatByString(e.endOfDay(r),g),t)!==w.toString()?{minimum:1,maximum:Number(S0(e.formatByString(e.startOfDay(r),g),t))}:{minimum:0,maximum:w}},minutes:()=>({minimum:0,maximum:e.getMinutes(c)}),seconds:()=>({minimum:0,maximum:e.getSeconds(c)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},Pke=(e,t,n,r)=>{switch(t.type){case"year":return e.setYear(r,e.getYear(n));case"month":return e.setMonth(r,e.getMonth(n));case"weekDay":{let s=e.formatByString(n,t.format);t.hasLeadingZerosInInput&&(s=qj(s,t.maxLength));const c=bD(e,t.format),h=c.indexOf(s),g=c.indexOf(t.value)-h;return e.addDays(n,g)}case"day":return e.setDate(r,e.getDate(n));case"meridiem":{const s=e.getHours(n)<12,c=e.getHours(r);return s&&c>=12?e.addHours(r,-12):!s&&c<12?e.addHours(r,12):r}case"hours":return e.setHours(r,e.getHours(n));case"minutes":return e.setMinutes(r,e.getMinutes(n));case"seconds":return e.setSeconds(r,e.getSeconds(n));default:return r}},pH={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},mH=(e,t,n,r,s)=>[...n].sort((c,h)=>pH[c.type]-pH[h.type]).reduce((c,h)=>!s||h.modified?Pke(e,h,t,c):c,r),Ike=()=>navigator.userAgent.toLowerCase().includes("android"),kke=(e,t)=>{const n={};if(!t)return e.forEach((g,w)=>{const T=w===0?null:w-1,A=w===e.length-1?null:w+1;n[w]={leftIndex:T,rightIndex:A}}),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},s={};let c=0,h=0,i=e.length-1;for(;i>=0;){h=e.findIndex((g,w)=>{var T;return w>=c&&((T=g.endSeparator)==null?void 0:T.includes(" "))&&g.endSeparator!==" / "}),h===-1&&(h=e.length-1);for(let g=h;g>=c;g-=1)s[g]=i,r[i]=g,i-=1;c=h+1}return e.forEach((g,w)=>{const T=s[w],A=T===0?null:r[T-1],D=T===e.length-1?null:r[T+1];n[w]={leftIndex:A,rightIndex:D}}),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}},iB=(e,t)=>{if(e==null)return null;if(e==="all")return"all";if(typeof e=="string"){const n=t.findIndex(r=>r.type===e);return n===-1?null:n}return e},Oke=({adapter:e,format:t})=>{let n=10,r=t,s=e.expandFormat(t);for(;s!==r;)if(r=s,s=e.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return s},Lke=({adapter:e,expandedFormat:t})=>{const n=[],{start:r,end:s}=e.escapedCharacters,c=new RegExp(`(\\${r}[^\\${s}]*\\${s})+`,"g");let h=null;for(;h=c.exec(t);)n.push({start:h.index,end:c.lastIndex-1});return n},zke=(e,t,n,r)=>{switch(n.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),r).length,format:r});case"month":return t.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return t.fieldDayPlaceholder({format:r});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return t.fieldHoursPlaceholder({format:r});case"minutes":return t.fieldMinutesPlaceholder({format:r});case"seconds":return t.fieldSecondsPlaceholder({format:r});case"meridiem":return t.fieldMeridiemPlaceholder({format:r});default:return r}},Fke=({adapter:e,date:t,shouldRespectLeadingZeros:n,localeText:r,localizedDigits:s,now:c,token:h,startSeparator:i})=>{if(h==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const g=see(e,h),w=cee(e,g.contentType,g.type,h),T=n?w:g.contentType==="digit",A=e.isValid(t);let D=A?e.formatByString(t,h):"",k=null;if(T)if(w)k=D===""?e.formatByString(c,h).length:D.length;else{if(g.maxLength==null)throw new Error(`MUI X: The token ${h} should have a 'maxLength' property on it's adapter`);k=g.maxLength,A&&(D=$j(qj(S0(D,s),k),s))}return Tt({},g,{format:h,maxLength:k,value:D,placeholder:zke(e,r,g,h),hasLeadingZerosInFormat:w,hasLeadingZerosInInput:T,startSeparator:i,endSeparator:"",modified:!1})},Bke=e=>{var k;const{adapter:t,expandedFormat:n,escapedParts:r}=e,s=t.date(void 0),c=[];let h="";const i=Object.keys(t.formatTokenMap).sort((I,F)=>F.length-I.length),g=/^([a-zA-Z]+)/,w=new RegExp(`^(${i.join("|")})*$`),T=new RegExp(`^(${i.join("|")})`),A=I=>r.find(F=>F.start<=I&&F.end>=I);let D=0;for(;D<n.length;){const I=A(D),F=I!=null,j=(k=g.exec(n.slice(D)))==null?void 0:k[1];if(!F&&j!=null&&w.test(j)){let V=j;for(;V.length>0;){const W=T.exec(V)[1];V=V.slice(W.length),c.push(Fke(Tt({},e,{now:s,token:W,startSeparator:h}))),h=""}D+=j.length}else{const V=n[D];F&&(I==null?void 0:I.start)===D||(I==null?void 0:I.end)===D||(c.length===0?h+=V:(c[c.length-1].endSeparator+=V,c[c.length-1].isEndFormatSeparator=!0)),D+=1}}return c.length===0&&h.length>0&&c.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:h,endSeparator:"",modified:!1}),c},Nke=({isRtl:e,formatDensity:t,sections:n})=>n.map(r=>{const s=c=>{let h=c;return e&&h!==null&&h.includes(" ")&&(h=`${h}`),t==="spacious"&&["/",".","-"].includes(h)&&(h=` ${h} `),h};return r.startSeparator=s(r.startSeparator),r.endSeparator=s(r.endSeparator),r}),gH=e=>{let t=Oke(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(t=t.split(" ").reverse().join(" "));const n=Lke(Tt({},e,{expandedFormat:t})),r=Bke(Tt({},e,{expandedFormat:t,escapedParts:n}));return Nke(Tt({},e,{sections:r}))},Gj=q.createContext(null),_1=()=>{const e=q.useContext(Gj);if(e==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return e},Wj=()=>q.useContext(Gj),uee=q.createContext(()=>!0);function jke(){return q.useContext(uee)}const dee=q.createContext(null);function hee(){return q.useContext(dee)}const fee=q.createContext(null),pee=q.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function mee(e){const{contextValue:t,actionsContextValue:n,privateContextValue:r,fieldPrivateContextValue:s,isValidContextValue:c,localeText:h,children:i}=e;return $.jsx(Gj.Provider,{value:t,children:$.jsx(fee.Provider,{value:n,children:$.jsx(pee.Provider,{value:r,children:$.jsx(dee.Provider,{value:s,children:$.jsx(uee.Provider,{value:c,children:$.jsx(tee,{localeText:h,children:i})})})})})})}const Vke=()=>{const e=q.useContext(fee);if(e==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return e},Uke=()=>jj().defaultDates,wD=e=>{const t=us(),n=q.useRef(void 0);return n.current===void 0&&(n.current=t.date(void 0,e)),n.current},$ke=Es($.jsx("path",{d:"M7 10l5 5 5-5z"})),qke=Es($.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),Hke=Es($.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Gke=Es($.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Es($.jsxs(q.Fragment,{children:[$.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),$.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));Es($.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));Es($.jsxs(q.Fragment,{children:[$.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),$.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const Wke=Es($.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function Yke(e){return fr("MuiPickersArrowSwitcher",e)}pr("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const Fl=()=>q.useContext(pee),Xke=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],Zke=["ownerState"],Kke=["ownerState"],Qke=Ot("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),Jke=Ot("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:e})=>({width:e.spacing(3)})),yH=Ot(fT,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),eOe=e=>dr({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},Yke,e),tOe=q.forwardRef(function(t,n){const r=vc(),s=qs({props:t,name:"MuiPickersArrowSwitcher"}),{children:c,className:h,slots:i,slotProps:g,isNextDisabled:w,isNextHidden:T,onGoToNext:A,nextLabel:D,isPreviousDisabled:k,isPreviousHidden:I,onGoToPrevious:F,previousLabel:j,labelId:V,classes:W}=s,Z=vi(s,Xke),{ownerState:K}=Fl(),ee=eOe(W),se={isDisabled:w,isHidden:T,goTo:A,label:D},he={isDisabled:k,isHidden:I,goTo:F,label:j},ye=(i==null?void 0:i.previousIconButton)??yH,_e=xo({elementType:ye,externalSlotProps:g==null?void 0:g.previousIconButton,additionalProps:{size:"medium",title:he.label,"aria-label":he.label,disabled:he.isDisabled,edge:"end",onClick:he.goTo},ownerState:Tt({},K,{isButtonHidden:he.isHidden??!1}),className:Wn(ee.button,ee.previousIconButton)}),ae=(i==null?void 0:i.nextIconButton)??yH,be=xo({elementType:ae,externalSlotProps:g==null?void 0:g.nextIconButton,additionalProps:{size:"medium",title:se.label,"aria-label":se.label,disabled:se.isDisabled,edge:"start",onClick:se.goTo},ownerState:Tt({},K,{isButtonHidden:se.isHidden??!1}),className:Wn(ee.button,ee.nextIconButton)}),Te=(i==null?void 0:i.leftArrowIcon)??qke,Ae=xo({elementType:Te,externalSlotProps:g==null?void 0:g.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:K,className:ee.leftArrowIcon}),Re=vi(Ae,Zke),He=(i==null?void 0:i.rightArrowIcon)??Hke,Se=xo({elementType:He,externalSlotProps:g==null?void 0:g.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:K,className:ee.rightArrowIcon}),qe=vi(Se,Kke);return $.jsxs(Qke,Tt({ref:n,className:Wn(ee.root,h),ownerState:K},Z,{children:[$.jsx(ye,Tt({},_e,{children:r?$.jsx(He,Tt({},qe)):$.jsx(Te,Tt({},Re))})),c?$.jsx(rr,{variant:"subtitle1",component:"span",id:V,children:c}):$.jsx(Jke,{className:ee.spacer,ownerState:K}),$.jsx(ae,Tt({},be,{children:r?$.jsx(Te,Tt({},Re)):$.jsx(He,Tt({},qe))}))]}))}),nOe=["hours","minutes","seconds"],rOe=e=>nOe.includes(e),vH=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),iOe=(e,t)=>(n,r)=>e?t.isAfter(n,r):vH(n,t)>vH(r,t),gee={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function oOe(e){const{steps:t,isViewMatchingStep:n,onStepChange:r}=e;return s=>{if(t==null)return gee;const c=t.findIndex(i=>n(s.view,i)),h=c===-1||c===t.length-1?null:t[c+1];return{hasNextStep:h!=null,hasSeveralSteps:t.length>1,goToNextStep:()=>{h!=null&&r(Tt({},s,{step:h}))},areViewsInSameStep:(i,g)=>{const w=t.find(A=>n(i,A)),T=t.find(A=>n(g,A));return w===T}}}}function yee({onChange:e,onViewChange:t,openTo:n,view:r,views:s,autoFocus:c,focusedView:h,onFocusedViewChange:i,getStepNavigation:g}){const w=q.useRef(n),T=q.useRef(s),A=q.useRef(s.includes(n)?n:s[0]),[D,k]=Yp({name:"useViews",state:"view",controlled:r,default:A.current}),I=q.useRef(c?D:null),[F,j]=Yp({name:"useViews",state:"focusedView",controlled:h,default:I.current}),V=g?g({setView:k,view:D,defaultView:A.current,views:s}):gee;q.useEffect(()=>{(w.current&&w.current!==n||T.current&&T.current.some(_e=>!s.includes(_e)))&&(k(s.includes(n)?n:s[0]),T.current=s,w.current=n)},[n,k,D,s]);const W=s.indexOf(D),Z=s[W-1]??null,K=s[W+1]??null,ee=Tr((_e,ae)=>{j(ae?_e:be=>_e===be?null:be),i==null||i(_e,ae)}),se=Tr(_e=>{ee(_e,!0),_e!==D&&(k(_e),t&&t(_e))}),he=Tr(()=>{K&&se(K)}),ye=Tr((_e,ae,be)=>{const Te=ae==="finish",Ae=be?s.indexOf(be)<s.length-1:!!K;e(_e,Te&&Ae?"partial":ae,be);let He=null;if(be!=null&&be!==D?He=be:Te&&(He=D),He==null)return;const Se=s[s.indexOf(He)+1];Se==null||!V.areViewsInSameStep(He,Se)||se(Se)});return Tt({},V,{view:D,setView:se,focusedView:F,setFocusedView:ee,nextView:K,previousView:Z,defaultView:s.includes(n)?n:s[0],goToNextView:he,setValueAndGoToNextView:ye})}function sOe(e,{disableFuture:t,maxDate:n,timezone:r}){const s=us();return q.useMemo(()=>{const c=s.date(void 0,r),h=s.startOfMonth(t&&s.isBefore(c,n)?c:n);return!s.isAfter(h,e)},[t,n,e,s,r])}function aOe(e,{disablePast:t,minDate:n,timezone:r}){const s=us();return q.useMemo(()=>{const c=s.date(void 0,r),h=s.startOfMonth(t&&s.isAfter(c,n)?c:n);return!s.isBefore(h,e)},[t,n,e,s,r])}const _T=36,SD=2,TD=320,lOe=280,Yj=336,cOe=Ot("div")({overflow:"hidden",width:TD,maxHeight:Yj,display:"flex",flexDirection:"column",margin:"0 auto"}),cE=({name:e,timezone:t,value:n,defaultValue:r,referenceDate:s,onChange:c,valueManager:h})=>{const i=us(),[g,w]=Yp({name:e,state:"value",controlled:n,default:r??h.emptyValue}),T=q.useMemo(()=>h.getTimezone(i,g),[i,h,g]),A=Tr(F=>T==null?F:h.setTimezone(i,T,F)),D=q.useMemo(()=>t||T||(s?i.getTimezone(s):"default"),[t,T,s,i]),k=q.useMemo(()=>h.setTimezone(i,D,g),[h,i,D,g]),I=Tr((F,...j)=>{const V=A(F);w(V),c==null||c(V,...j)});return{value:k,handleValueChange:I,timezone:D}},Ip={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},uOe=e=>Math.max(...e.map(t=>Ip[t.type]??1)),tS=(e,t,n)=>{if(t===Ip.year)return e.startOfYear(n);if(t===Ip.month)return e.startOfMonth(n);if(t===Ip.day)return e.startOfDay(n);let r=n;return t<Ip.minutes&&(r=e.setMinutes(r,0)),t<Ip.seconds&&(r=e.setSeconds(r,0)),t<Ip.milliseconds&&(r=e.setMilliseconds(r,0)),r},dOe=({props:e,adapter:t,granularity:n,timezone:r,getTodayDate:s})=>{let c=s?s():tS(t,n,oee(t,r));e.minDate!=null&&t.isAfterDay(e.minDate,c)&&(c=tS(t,n,e.minDate)),e.maxDate!=null&&t.isBeforeDay(e.maxDate,c)&&(c=tS(t,n,e.maxDate));const h=iOe(e.disableIgnoringDatePartForTimeValidation??!1,t);return e.minTime!=null&&h(e.minTime,c)&&(c=tS(t,n,e.disableIgnoringDatePartForTimeValidation?e.minTime:uR(t,c,e.minTime))),e.maxTime!=null&&h(c,e.maxTime)&&(c=tS(t,n,e.disableIgnoringDatePartForTimeValidation?e.maxTime:uR(t,c,e.maxTime))),c},hOe=["value","referenceDate"],Zp={emptyValue:null,getTodayValue:oee,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=vi(e,hOe);return r.adapter.isValid(t)?t:n??dOe(r)},cleanValue:xke,areValuesEqual:bke,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>n==null?null:e.setTimezone(n,t)},fOe={updateReferenceValue:(e,t,n)=>e.isValid(t)?t:n,getSectionsFromValue:(e,t)=>t(e),getV7HiddenInputValueFromSections:Mke,getV6InputValueFromSections:Rke,parseValueStr:(e,t,n)=>n(e.trim(),t),getDateFromSection:e=>e,getDateSectionsFromValue:e=>e,updateDateInValue:(e,t,n)=>n,clearDateSections:e=>e.map(t=>Tt({},t,{value:""}))};function pOe(e,t){return Array.isArray(t)?t.every(n=>e.indexOf(n)!==-1):e.indexOf(t)!==-1}const mOe=e=>{setTimeout(e,0)},uc=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?uc(t.shadowRoot):t:null},gOe="@media (pointer: fine)";function yOe(e){return fr("MuiPickersDay",e)}const j_=pr("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function vee(e){const{disabled:t,selected:n,today:r,outsideCurrentMonth:s,day:c,disableMargin:h,disableHighlightToday:i,showDaysOutsideCurrentMonth:g}=e,w=us(),{ownerState:T}=Fl();return q.useMemo(()=>Tt({},T,{day:c,isDaySelected:n??!1,isDayDisabled:t??!1,isDayCurrent:r??!1,isDayOutsideMonth:s??!1,isDayStartOfWeek:w.isSameDay(c,w.startOfWeek(c)),isDayEndOfWeek:w.isSameDay(c,w.endOfWeek(c)),disableMargin:h??!1,disableHighlightToday:i??!1,showDaysOutsideCurrentMonth:g??!1}),[w,T,c,n,t,r,s,h,i,g])}const vOe=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],_Oe=(e,t)=>{const{isDaySelected:n,isDayDisabled:r,isDayCurrent:s,isDayOutsideMonth:c,disableMargin:h,disableHighlightToday:i,showDaysOutsideCurrentMonth:g}=t,w=c&&!g;return dr({root:["root",n&&!w&&"selected",r&&"disabled",!h&&"dayWithMargin",!i&&s&&"today",c&&g&&"dayOutsideMonth",w&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},yOe,e)},_ee=({theme:e})=>Tt({},e.typography.caption,{width:_T,height:_T,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:ai(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${j_.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${j_.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${j_.disabled}:not(.${j_.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${j_.disabled}&.${j_.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${SD}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(e.vars||e).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${j_.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}}]}),xee=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&t.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},xOe=Ot(hh,{name:"MuiPickersDay",slot:"Root",overridesResolver:xee})(_ee),bOe=Ot("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:xee})(({theme:e})=>Tt({},_ee({theme:e}),{opacity:0,pointerEvents:"none"})),nS=()=>{},wOe=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersDay"}),{autoFocus:s=!1,className:c,classes:h,isAnimating:i,onClick:g,onDaySelect:w,onFocus:T=nS,onBlur:A=nS,onKeyDown:D=nS,onMouseDown:k=nS,onMouseEnter:I=nS,children:F,day:j,selected:V,disabled:W,today:Z,outsideCurrentMonth:K,disableMargin:ee,disableHighlightToday:se,showDaysOutsideCurrentMonth:he}=r,ye=vi(r,vOe),_e=vee({day:j,selected:V,disabled:W,today:Z,outsideCurrentMonth:K,disableMargin:ee,disableHighlightToday:se,showDaysOutsideCurrentMonth:he}),ae=_Oe(h,_e),be=us(),Te=q.useRef(null),Ae=mo(Te,n);$s(()=>{s&&!W&&!i&&!K&&Te.current.focus()},[s,W,i,K]);const Re=Se=>{k(Se),K&&Se.preventDefault()},He=Se=>{W||w(j),K&&Se.currentTarget.focus(),g&&g(Se)};return K&&!he?$.jsx(bOe,{className:Wn(ae.root,ae.hiddenDaySpacingFiller,c),ownerState:_e,role:ye.role}):$.jsx(xOe,Tt({className:Wn(ae.root,c),ref:Ae,centerRipple:!0,disabled:W,tabIndex:V?0:-1,onKeyDown:Se=>D(Se,j),onFocus:Se=>T(Se,j),onBlur:Se=>A(Se,j),onMouseEnter:Se=>I(Se,j),onClick:He,onMouseDown:Re},ye,{ownerState:_e,children:F??be.format(j,"dayOfMonth")}))}),SOe=q.memo(wOe),rb=e=>e.saveQuery!=null,bee=({stateResponse:{localizedDigits:e,sectionsValueBoundaries:t,state:n,timezone:r,setCharacterQuery:s,setTempAndroidValueStr:c,updateSectionValue:h}})=>{const i=us(),g=({keyPressed:A,sectionIndex:D},k,I)=>{const F=A.toLowerCase(),j=n.sections[D];if(n.characterQuery!=null&&(!I||I(n.characterQuery.value))&&n.characterQuery.sectionIndex===D){const W=`${n.characterQuery.value}${F}`,Z=k(W,j);if(!rb(Z))return s({sectionIndex:D,value:W,sectionType:j.type}),Z}const V=k(F,j);return rb(V)&&!V.saveQuery?(s(null),null):(s({sectionIndex:D,value:F,sectionType:j.type}),rb(V)?null:V)},w=A=>{const D=(F,j,V)=>{const W=j.filter(Z=>Z.toLowerCase().startsWith(V));return W.length===0?{saveQuery:!1}:{sectionValue:W[0],shouldGoToNextSection:W.length===1}},k=(F,j,V,W)=>{const Z=K=>aee(i,r,j.type,K);if(j.contentType==="letter")return D(j.format,Z(j.format),F);if(V&&W!=null&&see(i,V).contentType==="letter"){const K=Z(V),ee=D(V,K,F);return rb(ee)?{saveQuery:!1}:Tt({},ee,{sectionValue:W(ee.sectionValue,K)})}return{saveQuery:!1}};return g(A,(F,j)=>{switch(j.type){case"month":{const V=W=>fH(i,W,i.formats.month,j.format);return k(F,j,i.formats.month,V)}case"weekDay":{const V=(W,Z)=>Z.indexOf(W).toString();return k(F,j,i.formats.weekday,V)}case"meridiem":return k(F,j);default:return{saveQuery:!1}}})},T=A=>{const D=({queryValue:I,skipIfBelowMinimum:F,section:j})=>{const V=S0(I,e),W=Number(V),Z=t[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(W>Z.maximum)return{saveQuery:!1};if(F&&W<Z.minimum)return{saveQuery:!0};const K=W*10>Z.maximum||V.length===Z.maximum.toString().length;return{sectionValue:lee(i,W,Z,e,j),shouldGoToNextSection:K}};return g(A,(I,F)=>{if(F.contentType==="digit"||F.contentType==="digit-with-letter")return D({queryValue:I,skipIfBelowMinimum:!1,section:F});if(F.type==="month"){cee(i,"digit","month","MM");const j=D({queryValue:I,skipIfBelowMinimum:!0,section:{type:F.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(rb(j))return j;const V=fH(i,j.sectionValue,"MM",F.format);return Tt({},j,{sectionValue:V})}if(F.type==="weekDay"){const j=D({queryValue:I,skipIfBelowMinimum:!0,section:F});if(rb(j))return j;const V=bD(i,F.format)[Number(j.sectionValue)-1];return Tt({},j,{sectionValue:V})}return{saveQuery:!1}},I=>hH(I,e))};return Tr(A=>{const D=n.sections[A.sectionIndex],I=hH(A.keyPressed,e)?T(Tt({},A,{keyPressed:$j(A.keyPressed,e)})):w(A);if(I==null){c(null);return}h({section:D,newSectionValue:I.sectionValue,shouldGoToNextSection:I.shouldGoToNextSection})})},uE=({props:e,value:t,timezone:n,adapter:r})=>{if(t===null)return null;const{shouldDisableDate:s,shouldDisableMonth:c,shouldDisableYear:h,disablePast:i,disableFuture:g,minDate:w,maxDate:T}=e,A=r.date(void 0,n);switch(!0){case!r.isValid(t):return"invalidDate";case!!(s&&s(t)):return"shouldDisableDate";case!!(c&&c(t)):return"shouldDisableMonth";case!!(h&&h(t)):return"shouldDisableYear";case!!(g&&r.isAfterDay(t,A)):return"disableFuture";case!!(i&&r.isBeforeDay(t,A)):return"disablePast";case!!(w&&r.isBeforeDay(t,w)):return"minDate";case!!(T&&r.isAfterDay(t,T)):return"maxDate";default:return null}};uE.valueManager=Zp;function wee(e){const{props:t,validator:n,value:r,timezone:s,onError:c}=e,h=us(),i=q.useRef(n.valueManager.defaultErrorState),g=n({adapter:h,value:r,timezone:s,props:t}),w=n.valueManager.hasError(g);q.useEffect(()=>{c&&!n.valueManager.isSameError(g,i.current)&&c(g,r),i.current=g},[n,c,g,r]);const T=Tr(A=>n({adapter:h,value:A,timezone:s,props:t}));return{validationError:g,hasValidationError:w,getValidationErrorForNewValue:T}}const TOe=5e3,See=e=>{var an;const t=us(),n=mv(),r=vc(),{manager:{validator:s,valueType:c,internal_valueManager:h,internal_fieldValueManager:i},internalPropsWithDefaults:g,internalPropsWithDefaults:{value:w,defaultValue:T,referenceDate:A,onChange:D,format:k,formatDensity:I="dense",selectedSections:F,onSelectedSectionsChange:j,shouldRespectLeadingZeros:V=!1,timezone:W,enableAccessibleFieldDOMStructure:Z=!0},forwardedProps:{error:K}}=e,{value:ee,handleValueChange:se,timezone:he}=cE({name:"a field component",timezone:W,value:w,defaultValue:T,referenceDate:A,onChange:D,valueManager:h}),ye=q.useRef(ee);q.useEffect(()=>{ye.current=ee},[ee]);const{hasValidationError:_e}=wee({props:g,validator:s,timezone:he,value:ee,onError:g.onError}),ae=q.useMemo(()=>K!==void 0?K:_e,[_e,K]),be=q.useMemo(()=>Eke(t),[t]),Te=q.useMemo(()=>Dke(t,be,he),[t,be,he]),Ae=q.useCallback(Ft=>i.getSectionsFromValue(Ft,kn=>gH({adapter:t,localeText:n,localizedDigits:be,format:k,date:kn,formatDensity:I,shouldRespectLeadingZeros:V,enableAccessibleFieldDOMStructure:Z,isRtl:r})),[i,k,n,be,r,V,t,I,Z]),[Re,He]=q.useState(()=>{const Ft=Ae(ee),kn={sections:Ft,lastExternalValue:ee,lastSectionsDependencies:{format:k,isRtl:r,locale:t.locale},tempValueStrAndroid:null,characterQuery:null},Yn=uOe(Ft),wn=h.getInitialReferenceValue({referenceDate:A,value:ee,adapter:t,props:g,granularity:Yn,timezone:he});return Tt({},kn,{referenceValue:wn})}),[Se,qe]=Yp({controlled:F,default:null,name:"useField",state:"selectedSections"}),it=Ft=>{qe(Ft),j==null||j(Ft)},tt=q.useMemo(()=>iB(Se,Re.sections),[Se,Re.sections]),Oe=tt==="all"?0:tt,Je=q.useMemo(()=>kke(Re.sections,r&&!Z),[Re.sections,r,Z]),yt=q.useMemo(()=>Re.sections.every(Ft=>Ft.value===""),[Re.sections]),wt=Ft=>{const kn={validationError:s({adapter:t,value:Ft,timezone:he,props:g})};se(Ft,kn)},$t=(Ft,kn)=>{const Yn=[...Re.sections];return Yn[Ft]=Tt({},Yn[Ft],{value:kn,modified:!0}),Yn},It=q.useRef(null),vt=rd(),sn=Ft=>{Oe!=null&&(It.current={sectionIndex:Oe,value:Ft},vt.start(0,()=>{It.current=null}))},Rn=()=>{h.areValuesEqual(t,ee,h.emptyValue)?He(Ft=>Tt({},Ft,{sections:Ft.sections.map(kn=>Tt({},kn,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(He(Ft=>Tt({},Ft,{characterQuery:null})),wt(h.emptyValue))},yn=()=>{if(Oe==null)return;const Ft=Re.sections[Oe];Ft.value!==""&&(sn(""),i.getDateFromSection(ee,Ft)===null?He(kn=>Tt({},kn,{sections:$t(Oe,""),tempValueStrAndroid:null,characterQuery:null})):(He(kn=>Tt({},kn,{characterQuery:null})),wt(i.updateDateInValue(ee,Ft,null))))},Qt=Ft=>{const kn=(wn,Vn)=>{const ut=t.parse(wn,k);if(!t.isValid(ut))return null;const gn=gH({adapter:t,localeText:n,localizedDigits:be,format:k,date:ut,formatDensity:I,shouldRespectLeadingZeros:V,enableAccessibleFieldDOMStructure:Z,isRtl:r});return mH(t,ut,gn,Vn,!1)},Yn=i.parseValueStr(Ft,Re.referenceValue,kn);wt(Yn)},Jt=rd(),fn=({section:Ft,newSectionValue:kn,shouldGoToNextSection:Yn})=>{vt.clear(),Jt.clear();const wn=i.getDateFromSection(ee,Ft);Yn&&Oe<Re.sections.length-1&&it(Oe+1);const Vn=$t(Oe,kn),ut=i.getDateSectionsFromValue(Vn,Ft),gn=Ake(t,ut,be);if(t.isValid(gn)){const Rt=mH(t,gn,ut,i.getDateFromSection(Re.referenceValue,Ft),!0);return wn==null&&Jt.start(0,()=>{ye.current===ee&&He(Wt=>Tt({},Wt,{sections:i.clearDateSections(Re.sections,Ft),tempValueStrAndroid:null}))}),wt(i.updateDateInValue(ee,Ft,Rt))}return ut.every(Rt=>Rt.value!=="")&&(wn==null||t.isValid(wn))?(sn(kn),wt(i.updateDateInValue(ee,Ft,gn))):wn!=null?(sn(kn),wt(i.updateDateInValue(ee,Ft,null))):He(Rt=>Tt({},Rt,{sections:Vn,tempValueStrAndroid:null}))},Bt=Ft=>He(kn=>Tt({},kn,{tempValueStrAndroid:Ft})),Kt=Tr(Ft=>{He(kn=>Tt({},kn,{characterQuery:Ft}))});if(ee!==Re.lastExternalValue){let Ft;It.current!=null&&!t.isValid(i.getDateFromSection(ee,Re.sections[It.current.sectionIndex]))?Ft=$t(It.current.sectionIndex,It.current.value):Ft=Ae(ee),He(kn=>Tt({},kn,{lastExternalValue:ee,sections:Ft,sectionsDependencies:{format:k,isRtl:r,locale:t.locale},referenceValue:i.updateReferenceValue(t,ee,kn.referenceValue),tempValueStrAndroid:null}))}if(r!==Re.lastSectionsDependencies.isRtl||k!==Re.lastSectionsDependencies.format||t.locale!==Re.lastSectionsDependencies.locale){const Ft=Ae(ee);He(kn=>Tt({},kn,{lastSectionsDependencies:{format:k,isRtl:r,locale:t.locale},sections:Ft,tempValueStrAndroid:null,characterQuery:null}))}Re.characterQuery!=null&&!ae&&Oe==null&&Kt(null),Re.characterQuery!=null&&((an=Re.sections[Re.characterQuery.sectionIndex])==null?void 0:an.type)!==Re.characterQuery.sectionType&&Kt(null),q.useEffect(()=>{It.current!=null&&(It.current=null)});const _n=rd();return q.useEffect(()=>(Re.characterQuery!=null&&_n.start(TOe,()=>Kt(null)),()=>{}),[Re.characterQuery,Kt,_n]),q.useEffect(()=>{Re.tempValueStrAndroid!=null&&Oe!=null&&yn()},[Re.sections]),{activeSectionIndex:Oe,areAllSectionsEmpty:yt,error:ae,localizedDigits:be,parsedSelectedSections:tt,sectionOrder:Je,sectionsValueBoundaries:Te,state:Re,timezone:he,value:ee,clearValue:Rn,clearActiveSection:yn,setCharacterQuery:Kt,setSelectedSections:it,setTempAndroidValueStr:Bt,updateSectionValue:fn,updateValueFromValueStr:Qt,getSectionsFromValue:Ae}};function Tee(e){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:t},internalProps:n,skipContextFieldRefAssignment:r}=e,s=Wj(),c=hee(),h=mo(n.unstableFieldRef,r?null:c==null?void 0:c.fieldRef),i=s==null?void 0:s.setValue,g=q.useCallback((T,A)=>i==null?void 0:i(T,{validationError:A.validationError,shouldClose:!1}),[i]),w=q.useMemo(()=>c!=null&&s!=null?Tt({value:s.value,onChange:g,timezone:s.timezone,disabled:s.disabled,readOnly:s.readOnly,autoFocus:s.autoFocus&&!s.open,focused:s.open?!0:void 0,format:s.fieldFormat,formatDensity:c.formatDensity,enableAccessibleFieldDOMStructure:c.enableAccessibleFieldDOMStructure,selectedSections:c.selectedSections,onSelectedSectionsChange:c.onSelectedSectionsChange,unstableFieldRef:h},n):n,[s,c,n,g,h]);return t(w)}function Xj(e){const{focused:t,domGetters:n,stateResponse:{parsedSelectedSections:r,state:s}}=e;if(!n.isReady())return;const c=document.getSelection();if(!c)return;if(r==null){c.rangeCount>0&&n.getRoot().contains(c.getRangeAt(0).startContainer)&&c.removeAllRanges(),t&&n.getRoot().blur();return}if(!n.getRoot().contains(uc(document)))return;const h=new window.Range;let i;r==="all"?i=n.getRoot():s.sections[r].type==="empty"?i=n.getSectionContainer(r):i=n.getSectionContent(r),h.selectNodeContents(i),i.focus(),c.removeAllRanges(),c.addRange(h)}function Eee(e){const t=us(),{manager:{internal_fieldValueManager:n},internalPropsWithDefaults:{minutesStep:r,disabled:s,readOnly:c},stateResponse:{state:h,value:i,activeSectionIndex:g,parsedSelectedSections:w,sectionsValueBoundaries:T,localizedDigits:A,timezone:D,sectionOrder:k,clearValue:I,clearActiveSection:F,setSelectedSections:j,updateSectionValue:V}}=e;return Tr(W=>{if(!s)switch(!0){case((W.ctrlKey||W.metaKey)&&String.fromCharCode(W.keyCode)==="A"&&!W.shiftKey&&!W.altKey):{W.preventDefault(),j("all");break}case W.key==="ArrowRight":{if(W.preventDefault(),w==null)j(k.startIndex);else if(w==="all")j(k.endIndex);else{const Z=k.neighbors[w].rightIndex;Z!==null&&j(Z)}break}case W.key==="ArrowLeft":{if(W.preventDefault(),w==null)j(k.endIndex);else if(w==="all")j(k.startIndex);else{const Z=k.neighbors[w].leftIndex;Z!==null&&j(Z)}break}case W.key==="Delete":{if(W.preventDefault(),c)break;w==null||w==="all"?I():F();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(W.key):{if(W.preventDefault(),c||g==null)break;w==="all"&&j(g);const Z=h.sections[g],K=COe(t,D,Z,W.key,T,A,n.getDateFromSection(i,Z),{minutesStep:r});V({section:Z,newSectionValue:K,shouldGoToNextSection:!1});break}}})}function EOe(e){switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function COe(e,t,n,r,s,c,h,i){const g=EOe(r),w=r==="Home",T=r==="End",A=n.value===""||w||T,D=()=>{const I=s[n.type]({currentDate:h,format:n.format,contentType:n.contentType}),F=W=>lee(e,W,I,c,n),j=n.type==="minutes"&&(i!=null&&i.minutesStep)?i.minutesStep:1;let V;if(A){if(n.type==="year"&&!T&&!w)return e.formatByString(e.date(void 0,t),n.format);g>0||w?V=I.minimum:V=I.maximum}else V=parseInt(S0(n.value,c),10)+g*j;return V%j!==0&&((g<0||w)&&(V+=j-(j+V)%j),(g>0||T)&&(V-=V%j)),V>I.maximum?F(I.minimum+(V-I.maximum-1)%(I.maximum-I.minimum+1)):V<I.minimum?F(I.maximum-(I.minimum-V-1)%(I.maximum-I.minimum+1)):F(V)},k=()=>{const I=aee(e,t,n.type,n.format);if(I.length===0)return n.value;if(A)return g>0||w?I[0]:I[I.length-1];const V=((I.indexOf(n.value)+g)%I.length+I.length)%I.length;return I[V]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?D():k()}function AOe(e){const{manager:t,focused:n,setFocused:r,domGetters:s,stateResponse:c,applyCharacterEditing:h,internalPropsWithDefaults:i,stateResponse:{parsedSelectedSections:g,sectionOrder:w,state:T,clearValue:A,setCharacterQuery:D,setSelectedSections:k,updateValueFromValueStr:I},internalPropsWithDefaults:{disabled:F=!1,readOnly:j=!1}}=e,V=Eee({manager:t,internalPropsWithDefaults:i,stateResponse:c}),W=rd(),Z=Tr(ye=>{F||!s.isReady()||(r(!0),g==="all"?W.start(0,()=>{const _e=document.getSelection().getRangeAt(0).startOffset;if(_e===0){k(w.startIndex);return}let ae=0,be=0;for(;be<_e&&ae<T.sections.length;){const Te=T.sections[ae];ae+=1,be+=`${Te.startSeparator}${Te.value||Te.placeholder}${Te.endSeparator}`.length}k(ae-1)}):n?s.getRoot().contains(ye.target)||k(w.startIndex):(r(!0),k(w.startIndex)))}),K=Tr(ye=>{if(!s.isReady()||g!=="all")return;const ae=ye.target.textContent??"";s.getRoot().innerHTML=T.sections.map(be=>`${be.startSeparator}${be.value||be.placeholder}${be.endSeparator}`).join(""),Xj({focused:n,domGetters:s,stateResponse:c}),ae.length===0||ae.charCodeAt(0)===10?(A(),k("all")):ae.length>1?I(ae):(g==="all"&&k(0),h({keyPressed:ae,sectionIndex:0}))}),ee=Tr(ye=>{if(j||g!=="all"){ye.preventDefault();return}const _e=ye.clipboardData.getData("text");ye.preventDefault(),D(null),I(_e)}),se=Tr(()=>{if(n||F||!s.isReady())return;const ye=uc(document);r(!0),s.getSectionIndexFromDOMElement(ye)!=null||k(w.startIndex)}),he=Tr(()=>{setTimeout(()=>{if(!s.isReady())return;const ye=uc(document);!s.getRoot().contains(ye)&&(r(!1),k(null))})});return{onKeyDown:V,onBlur:he,onFocus:se,onClick:Z,onPaste:ee,onInput:K,contentEditable:g==="all",tabIndex:g===0?-1:0}}function MOe(e){const{manager:{internal_fieldValueManager:t},stateResponse:{areAllSectionsEmpty:n,state:r,updateValueFromValueStr:s}}=e,c=Tr(i=>{s(i.target.value)});return{value:q.useMemo(()=>n?"":t.getV7HiddenInputValueFromSections(r.sections),[n,r.sections,t]),onChange:c}}function ROe(e){const{stateResponse:{setSelectedSections:t},internalPropsWithDefaults:{disabled:n=!1}}=e,r=q.useCallback(s=>c=>{n||c.isDefaultPrevented()||t(s)},[n,t]);return q.useCallback(s=>({"data-sectionindex":s,onClick:r(s)}),[r])}function DOe(e){const t=us(),n=mv(),r=tm(),{focused:s,domGetters:c,stateResponse:h,applyCharacterEditing:i,manager:{internal_fieldValueManager:g},stateResponse:{parsedSelectedSections:w,sectionsValueBoundaries:T,state:A,value:D,clearActiveSection:k,setCharacterQuery:I,setSelectedSections:F,updateSectionValue:j,updateValueFromValueStr:V},internalPropsWithDefaults:{disabled:W=!1,readOnly:Z=!1}}=e,K=w==="all",ee=!K&&!W&&!Z,se=Tr(Te=>{if(!c.isReady())return;const Ae=A.sections[Te];c.getSectionContent(Te).innerHTML=Ae.value||Ae.placeholder,Xj({focused:s,domGetters:c,stateResponse:h})}),he=Tr(Te=>{if(!c.isReady())return;const Ae=Te.target,Re=Ae.textContent??"",He=c.getSectionIndexFromDOMElement(Ae),Se=A.sections[He];if(Z){se(He);return}if(Re.length===0){if(Se.value===""){se(He);return}const qe=Te.nativeEvent.inputType;if(qe==="insertParagraph"||qe==="insertLineBreak"){se(He);return}se(He),k();return}i({keyPressed:Re,sectionIndex:He}),se(He)}),ye=Tr(Te=>{Te.preventDefault()}),_e=Tr(Te=>{if(Te.preventDefault(),Z||W||typeof w!="number")return;const Ae=A.sections[w],Re=Te.clipboardData.getData("text"),He=/^[a-zA-Z]+$/.test(Re),Se=/^[0-9]+$/.test(Re),qe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Re);Ae.contentType==="letter"&&He||Ae.contentType==="digit"&&Se||Ae.contentType==="digit-with-letter"&&qe?(I(null),j({section:Ae,newSectionValue:Re,shouldGoToNextSection:!0})):!He&&!Se&&(I(null),V(Re))}),ae=Tr(Te=>{Te.preventDefault(),Te.dataTransfer.dropEffect="none"}),be=q.useCallback(Te=>()=>{W||F(Te)},[W,F]);return q.useCallback((Te,Ae)=>{const Re=T[Te.type]({currentDate:g.getDateFromSection(D,Te),contentType:Te.contentType,format:Te.format});return{onInput:he,onPaste:_e,onMouseUp:ye,onDragOver:ae,onFocus:be(Ae),"aria-labelledby":`${r}-${Te.type}`,"aria-readonly":Z,"aria-valuenow":IOe(Te,t),"aria-valuemin":Re.minimum,"aria-valuemax":Re.maximum,"aria-valuetext":Te.value?POe(Te,t):n.empty,"aria-label":n[Te.type],"aria-disabled":W,tabIndex:K||Ae>0?-1:0,contentEditable:!K&&!W&&!Z,role:"spinbutton",id:`${r}-${Te.type}`,"data-range-position":Te.dateName||void 0,spellCheck:ee?!1:void 0,autoCapitalize:ee?"off":void 0,autoCorrect:ee?"off":void 0,children:Te.value||Te.placeholder,inputMode:Te.contentType==="letter"?"text":"numeric"}},[T,r,K,W,Z,ee,n,t,he,_e,ye,ae,be,g,D])}function POe(e,t){if(e.value)switch(e.type){case"month":{if(e.contentType==="digit")return t.format(t.setMonth(t.date(),Number(e.value)-1),"month");const n=t.parse(e.value,e.format);return n?t.format(n,"month"):void 0}case"day":return e.contentType==="digit"?t.format(t.setDate(t.startOfYear(t.date()),Number(e.value)),"dayOfMonthFull"):e.value;case"weekDay":return;default:return}}function IOe(e,t){if(e.value)switch(e.type){case"weekDay":return e.contentType==="letter"?void 0:Number(e.value);case"meridiem":{const n=t.parse(`01:00 ${e.value}`,`${t.formats.hours12h}:${t.formats.minutes} ${e.format}`);return n?t.getHours(n)>=12?1:0:void 0}case"day":return e.contentType==="digit-with-letter"?parseInt(e.value,10):Number(e.value);case"month":{if(e.contentType==="digit")return Number(e.value);const n=t.parse(e.value,e.format);return n?t.getMonth(n)+1:void 0}default:return e.contentType!=="letter"?Number(e.value):void 0}}const kOe=e=>{const{props:t,manager:n,skipContextFieldRefAssignment:r,manager:{valueType:s,internal_useOpenPickerButtonAriaLabel:c}}=e,{internalProps:h,forwardedProps:i}=iee(t,s),g=Tee({manager:n,internalProps:h,skipContextFieldRefAssignment:r}),{sectionListRef:w,onBlur:T,onClick:A,onFocus:D,onInput:k,onPaste:I,onKeyDown:F,onClear:j,clearable:V}=i,{disabled:W=!1,readOnly:Z=!1,autoFocus:K=!1,focused:ee,unstableFieldRef:se}=g,he=q.useRef(null),ye=mo(w,he),_e=q.useMemo(()=>({isReady:()=>he.current!=null,getRoot:()=>he.current.getRoot(),getSectionContainer:an=>he.current.getSectionContainer(an),getSectionContent:an=>he.current.getSectionContent(an),getSectionIndexFromDOMElement:an=>he.current.getSectionIndexFromDOMElement(an)}),[he]),ae=See({manager:n,internalPropsWithDefaults:g,forwardedProps:i}),{areAllSectionsEmpty:be,error:Te,parsedSelectedSections:Ae,sectionOrder:Re,state:He,value:Se,clearValue:qe,setSelectedSections:it}=ae,tt=bee({stateResponse:ae}),Oe=c(Se),[Je,yt]=q.useState(!1);function wt(an=0){if(W||!he.current||_H(he)!=null)return;const Ft=iB(an,He.sections);yt(!0),he.current.getSectionContent(Ft).focus()}const $t=AOe({manager:n,internalPropsWithDefaults:g,stateResponse:ae,applyCharacterEditing:tt,focused:Je,setFocused:yt,domGetters:_e}),It=MOe({manager:n,stateResponse:ae}),vt=ROe({stateResponse:ae,internalPropsWithDefaults:g}),sn=DOe({manager:n,stateResponse:ae,applyCharacterEditing:tt,internalPropsWithDefaults:g,domGetters:_e,focused:Je}),Rn=Tr(an=>{F==null||F(an),$t.onKeyDown(an)}),yn=Tr(an=>{T==null||T(an),$t.onBlur(an)}),Qt=Tr(an=>{D==null||D(an),$t.onFocus(an)}),Jt=Tr(an=>{an.isDefaultPrevented()||(A==null||A(an),$t.onClick(an))}),fn=Tr(an=>{I==null||I(an),$t.onPaste(an)}),Bt=Tr(an=>{k==null||k(an),$t.onInput(an)}),Kt=Tr((an,...Ft)=>{an.preventDefault(),j==null||j(an,...Ft),qe(),xH(he)?it(Re.startIndex):wt(0)}),_n=q.useMemo(()=>He.sections.map((an,Ft)=>{const kn=sn(an,Ft);return{container:vt(Ft),content:sn(an,Ft),before:{children:an.startSeparator},after:{children:an.endSeparator,"data-range-position":an.isEndFormatSeparator?kn["data-range-position"]:void 0}}}),[He.sections,vt,sn]);return q.useEffect(()=>{if(he.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));K&&!W&&he.current&&he.current.getSectionContent(Re.startIndex).focus()},[]),$s(()=>{if(!(!Je||!he.current)){if(Ae==="all")he.current.getRoot().focus();else if(typeof Ae=="number"){const an=he.current.getSectionContent(Ae);an&&an.focus()}}},[Ae,Je]),$s(()=>{Xj({focused:Je,domGetters:_e,stateResponse:ae})}),q.useImperativeHandle(se,()=>({getSections:()=>He.sections,getActiveSectionIndex:()=>_H(he),setSelectedSections:an=>{if(W||!he.current)return;const Ft=iB(an,He.sections);yt((Ft==="all"?0:Ft)!==null),it(an)},focusField:wt,isFieldFocused:()=>xH(he)})),Tt({},i,$t,{onBlur:yn,onClick:Jt,onFocus:Qt,onInput:Bt,onPaste:fn,onKeyDown:Rn,onClear:Kt},It,{error:Te,clearable:!!(V&&!be&&!Z&&!W),focused:ee??Je,sectionListRef:ye,enableAccessibleFieldDOMStructure:!0,elements:_n,areAllSectionsEmpty:be,disabled:W,readOnly:Z,autoFocus:K,openPickerAriaLabel:Oe})};function _H(e){const t=uc(document);return!t||!e.current||!e.current.getRoot().contains(t)?null:e.current.getSectionIndexFromDOMElement(t)}function xH(e){const t=uc(document);return!!e.current&&e.current.getRoot().contains(t)}const Cb=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),OOe=(e,t,n)=>{let r=0,s=n?1:0;const c=[];for(let h=0;h<e.length;h+=1){const i=e[h],g=Hj(i,n?"input-rtl":"input-ltr",t),w=`${i.startSeparator}${g}${i.endSeparator}`,T=Cb(w).length,A=w.length,D=Cb(g),k=s+(D===""?0:g.indexOf(D[0]))+i.startSeparator.length,I=k+D.length;c.push(Tt({},i,{start:r,end:r+T,startInInput:k,endInInput:I})),r+=T,s+=A}return c},LOe=e=>{const t=vc(),n=rd(),r=rd(),{props:s,manager:c,skipContextFieldRefAssignment:h,manager:{valueType:i,internal_valueManager:g,internal_fieldValueManager:w,internal_useOpenPickerButtonAriaLabel:T}}=e,{internalProps:A,forwardedProps:D}=iee(s,i),k=Tee({manager:c,internalProps:A,skipContextFieldRefAssignment:h}),{onFocus:I,onClick:F,onPaste:j,onBlur:V,onKeyDown:W,onClear:Z,clearable:K,inputRef:ee,placeholder:se}=D,{readOnly:he=!1,disabled:ye=!1,autoFocus:_e=!1,focused:ae,unstableFieldRef:be}=k,Te=q.useRef(null),Ae=mo(ee,Te),Re=See({manager:c,internalPropsWithDefaults:k,forwardedProps:D}),{activeSectionIndex:He,areAllSectionsEmpty:Se,error:qe,localizedDigits:it,parsedSelectedSections:tt,sectionOrder:Oe,state:Je,value:yt,clearValue:wt,clearActiveSection:$t,setCharacterQuery:It,setSelectedSections:vt,setTempAndroidValueStr:sn,updateSectionValue:Rn,updateValueFromValueStr:yn,getSectionsFromValue:Qt}=Re,Jt=bee({stateResponse:Re}),fn=T(yt),Bt=q.useMemo(()=>OOe(Je.sections,it,t),[Je.sections,it,t]);function Kt(){const Xn=Te.current.selectionStart??0;let or;Xn<=Bt[0].startInInput||Xn>=Bt[Bt.length-1].endInInput?or=1:or=Bt.findIndex(Fr=>Fr.startInInput-Fr.startSeparator.length>Xn);const En=or===-1?Bt.length-1:or-1;vt(En)}function _n(Xn=0){var or;uc(document)!==Te.current&&((or=Te.current)==null||or.focus(),vt(Xn))}const an=Tr(Xn=>{I==null||I(Xn);const or=Te.current;n.start(0,()=>{!or||or!==Te.current||He==null&&(or.value.length&&Number(or.selectionEnd)-Number(or.selectionStart)===or.value.length?vt("all"):Kt())})}),Ft=Tr((Xn,...or)=>{Xn.isDefaultPrevented()||(F==null||F(Xn,...or),Kt())}),kn=Tr(Xn=>{if(j==null||j(Xn),Xn.preventDefault(),he||ye)return;const or=Xn.clipboardData.getData("text");if(typeof tt=="number"){const En=Je.sections[tt],Fr=/^[a-zA-Z]+$/.test(or),Er=/^[0-9]+$/.test(or),_r=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(or);if(En.contentType==="letter"&&Fr||En.contentType==="digit"&&Er||En.contentType==="digit-with-letter"&&_r){It(null),Rn({section:En,newSectionValue:or,shouldGoToNextSection:!0});return}if(Fr||Er)return}It(null),yn(or)}),Yn=Tr(Xn=>{V==null||V(Xn),vt(null)}),wn=Tr(Xn=>{if(he)return;const or=Xn.target.value;if(or===""){wt();return}const En=Xn.nativeEvent.data,Fr=En&&En.length>1,Er=Fr?En:or,_r=Cb(Er);if(tt==="all"&&vt(He),He==null||Fr){yn(Fr?En:_r);return}let nr;if(tt==="all"&&_r.length===1)nr=_r;else{const Wr=Cb(w.getV6InputValueFromSections(Bt,it,t));let wr=-1,Rr=-1;for(let Ro=0;Ro<Wr.length;Ro+=1)wr===-1&&Wr[Ro]!==_r[Ro]&&(wr=Ro),Rr===-1&&Wr[Wr.length-Ro-1]!==_r[_r.length-Ro-1]&&(Rr=Ro);const Di=Bt[He];if(wr<Di.start||Wr.length-Rr-1>Di.end)return;const ko=_r.length-Wr.length+Di.end-Cb(Di.endSeparator||"").length;nr=_r.slice(Di.start+Cb(Di.startSeparator||"").length,ko)}if(nr.length===0){Ike()&&sn(Er),$t();return}Jt({keyPressed:nr,sectionIndex:He})}),Vn=Tr((Xn,...or)=>{Xn.preventDefault(),Z==null||Z(Xn,...or),wt(),bH(Te)?vt(Oe.startIndex):_n(0)}),ut=Eee({manager:c,internalPropsWithDefaults:k,stateResponse:Re}),gn=Tr(Xn=>{W==null||W(Xn),ut(Xn)}),Rt=q.useMemo(()=>se!==void 0?se:w.getV6InputValueFromSections(Qt(g.emptyValue),it,t),[se,w,Qt,g.emptyValue,it,t]),Wt=q.useMemo(()=>Je.tempValueStrAndroid??w.getV6InputValueFromSections(Je.sections,it,t),[Je.sections,w,Je.tempValueStrAndroid,it,t]);q.useEffect(()=>{Te.current&&Te.current===uc(document)&&vt("all")},[]),$s(()=>{function Xn(){if(!Te.current)return;if(tt==null){Te.current.scrollLeft&&(Te.current.scrollLeft=0);return}if(Te.current!==uc(document))return;const or=Te.current.scrollTop;if(tt==="all")Te.current.select();else{const En=Bt[tt],Fr=En.type==="empty"?En.startInInput-En.startSeparator.length:En.startInInput,Er=En.type==="empty"?En.endInInput+En.endSeparator.length:En.endInInput;(Fr!==Te.current.selectionStart||Er!==Te.current.selectionEnd)&&Te.current===uc(document)&&Te.current.setSelectionRange(Fr,Er),r.start(0,()=>{Te.current&&Te.current===uc(document)&&Te.current.selectionStart===Te.current.selectionEnd&&(Te.current.selectionStart!==Fr||Te.current.selectionEnd!==Er)&&Xn()})}Te.current.scrollTop=or}Xn()});const zn=q.useMemo(()=>He==null||Je.sections[He].contentType==="letter"?"text":"numeric",[He,Je.sections]),mr=!(Te.current&&Te.current===uc(document))&&Se;return q.useImperativeHandle(be,()=>({getSections:()=>Je.sections,getActiveSectionIndex:()=>{const Xn=Te.current.selectionStart??0,or=Te.current.selectionEnd??0;if(Xn===0&&or===0)return null;const En=Xn<=Bt[0].startInInput?1:Bt.findIndex(Fr=>Fr.startInInput-Fr.startSeparator.length>Xn);return En===-1?Bt.length-1:En-1},setSelectedSections:Xn=>vt(Xn),focusField:_n,isFieldFocused:()=>bH(Te)})),Tt({},D,{error:qe,clearable:!!(K&&!Se&&!he&&!ye),onBlur:Yn,onClick:Ft,onFocus:an,onPaste:kn,onKeyDown:gn,onClear:Vn,inputRef:Ae,enableAccessibleFieldDOMStructure:!1,placeholder:Rt,inputMode:zn,autoComplete:"off",value:mr?"":Wt,onChange:wn,focused:ae,disabled:ye,readOnly:he,autoFocus:_e,openPickerAriaLabel:fn})};function bH(e){return e.current===uc(document)}const zOe=e=>{const t=hee();return(e.props.enableAccessibleFieldDOMStructure??(t==null?void 0:t.enableAccessibleFieldDOMStructure)??!0?kOe:LOe)(e)};function FOe(e={}){const{enableAccessibleFieldDOMStructure:t=!0}=e;return q.useMemo(()=>({valueType:"date",validator:uE,internal_valueManager:Zp,internal_fieldValueManager:fOe,internal_enableAccessibleFieldDOMStructure:t,internal_useApplyDefaultValuesToFieldInternalProps:NOe,internal_useOpenPickerButtonAriaLabel:BOe}),[t])}function BOe(e){const t=us(),n=mv();return q.useMemo(()=>{const r=t.isValid(e)?t.format(e,"fullDate"):null;return n.openDatePickerDialogue(r)},[e,n,t])}function NOe(e){const t=us(),n=dE(e);return q.useMemo(()=>Tt({},e,n,{format:e.format??t.formats.keyboardDate}),[e,n,t])}function dE(e){const t=us(),n=Uke();return q.useMemo(()=>({disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,minDate:cH(t,e.minDate,n.minDate),maxDate:cH(t,e.maxDate,n.maxDate)}),[e.minDate,e.maxDate,e.disableFuture,e.disablePast,t,n])}const jOe=e=>{const t=FOe(e);return zOe({manager:t,props:e})};function Zj(e){const{ownerState:t}=Fl(),n=vc();return q.useMemo(()=>Tt({},t,{isFieldDisabled:e.disabled??!1,isFieldReadOnly:e.readOnly??!1,isFieldRequired:e.required??!1,fieldDirection:n?"rtl":"ltr"}),[t,e.disabled,e.readOnly,e.required,n])}function VOe(e){return fr("MuiPickersTextField",e)}pr("MuiPickersTextField",["root","focused","disabled","error","required"]);function UOe(e){return fr("MuiPickersInputBase",e)}const zb=pr("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function $Oe(e){return fr("MuiPickersSectionList",e)}const rS=pr("MuiPickersSectionList",["root","section","sectionContent"]),qOe=["slots","slotProps","elements","sectionListRef","classes"],Cee=Ot("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),Aee=Ot("span",{name:"MuiPickersSectionList",slot:"Section"})({}),Mee=Ot("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),Ree=Ot("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),HOe=e=>dr({root:["root"],section:["section"],sectionContent:["sectionContent"]},$Oe,e);function GOe(e){const{slots:t,slotProps:n,element:r,classes:s}=e,{ownerState:c}=Fl(),h=(t==null?void 0:t.section)??Aee,i=xo({elementType:h,externalSlotProps:n==null?void 0:n.section,externalForwardedProps:r.container,className:s.section,ownerState:c}),g=(t==null?void 0:t.sectionContent)??Ree,w=xo({elementType:g,externalSlotProps:n==null?void 0:n.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:s.sectionContent,ownerState:c}),T=(t==null?void 0:t.sectionSeparator)??Mee,A=xo({elementType:T,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.before,ownerState:Tt({},c,{separatorPosition:"before"})}),D=xo({elementType:T,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.after,ownerState:Tt({},c,{separatorPosition:"after"})});return $.jsxs(h,Tt({},i,{children:[$.jsx(T,Tt({},A)),$.jsx(g,Tt({},w)),$.jsx(T,Tt({},D))]}))}const WOe=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersSectionList"}),{slots:s,slotProps:c,elements:h,sectionListRef:i,classes:g}=r,w=vi(r,qOe),T=HOe(g),{ownerState:A}=Fl(),D=q.useRef(null),k=mo(n,D),I=V=>{if(!D.current)throw new Error(`MUI X: Cannot call sectionListRef.${V} before the mount of the component.`);return D.current};q.useImperativeHandle(i,()=>({getRoot(){return I("getRoot")},getSectionContainer(V){return I("getSectionContainer").querySelector(`.${rS.section}[data-sectionindex="${V}"]`)},getSectionContent(V){return I("getSectionContent").querySelector(`.${rS.section}[data-sectionindex="${V}"] .${rS.sectionContent}`)},getSectionIndexFromDOMElement(V){const W=I("getSectionIndexFromDOMElement");if(V==null||!W.contains(V))return null;let Z=null;return V.classList.contains(rS.section)?Z=V:V.classList.contains(rS.sectionContent)&&(Z=V.parentElement),Z==null?null:Number(Z.dataset.sectionindex)}}));const F=(s==null?void 0:s.root)??Cee,j=xo({elementType:F,externalSlotProps:c==null?void 0:c.root,externalForwardedProps:w,additionalProps:{ref:k,suppressContentEditableWarning:!0},className:T.root,ownerState:A});return $.jsx(F,Tt({},j,{children:j.contentEditable?h.map(({content:V,before:W,after:Z})=>`${W.children}${V.children}${Z.children}`).join(""):$.jsx(q.Fragment,{children:h.map((V,W)=>$.jsx(GOe,{slots:s,slotProps:c,element:V,classes:T},W))})}))}),Dee=q.createContext(null),ED=()=>{const e=q.useContext(Dee);if(e==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return e},YOe=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],XOe=e=>Math.round(e*1e5)/1e5,CD=Ot("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:e})=>Tt({},e.typography.body1,{color:(e.vars||e).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${XOe(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),Kj=Ot(Cee,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:e})=>({padding:"4px 0 5px",fontFamily:e.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{textAlign:"right /*! @noflip */"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:e.palette.mode==="light"?.42:.5}}]})),ZOe=Ot(Aee,{name:"MuiPickersInputBase",slot:"Section"})(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),KOe=Ot(Ree,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})(({theme:e})=>({fontFamily:e.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),QOe=Ot(Mee,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),JOe=Ot("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})(Tt({},OEe)),eLe=Ot("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:e,ownerState:t})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:e.transitions.create(["width","left"],{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:t.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:t.sectionOffsets[1]}})),tLe=(e,t)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldReadOnly:s,hasFieldError:c,inputSize:h,isInputInFullWidth:i,inputColor:g,hasStartAdornment:w,hasEndAdornment:T}=t,A={root:["root",n&&!r&&"focused",r&&"disabled",s&&"readOnly",c&&"error",i&&"fullWidth",`color${Mn(g)}`,h==="small"&&"inputSizeSmall",w&&"adornedStart",T&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return dr(A,UOe,e)};function wH(e,t,n,r){var s;if(e.content.id){const c=(s=t.current)==null?void 0:s.querySelectorAll(`[data-sectionindex="${n}"] [data-range-position="${r}"]`);if(c)return Array.from(c).reduce((h,i)=>h+i.offsetWidth,0)}return 0}function nLe(e,t){var s,c,h,i,g;let n=0;if(((s=t.current)==null?void 0:s.getAttribute("data-active-range-position"))==="end")for(let w=e.length-1;w>=e.length/2;w-=1)n+=wH(e[w],t,w,"end");else for(let w=0;w<e.length/2;w+=1)n+=wH(e[w],t,w,"start");return{activeBarWidth:n,sectionOffsets:[((h=(c=t.current)==null?void 0:c.querySelector('[data-sectionindex="0"]'))==null?void 0:h.offsetLeft)||0,((g=(i=t.current)==null?void 0:i.querySelector(`[data-sectionindex="${e.length/2}"]`))==null?void 0:g.offsetLeft)||0]}}const Qj=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersInputBase"}),{elements:s,areAllSectionsEmpty:c,value:h,onChange:i,id:g,endAdornment:w,startAdornment:T,renderSuffix:A,slots:D,slotProps:k,contentEditable:I,tabIndex:F,onInput:j,onPaste:V,onKeyDown:W,name:Z,readOnly:K,inputProps:ee,inputRef:se,sectionListRef:he,onFocus:ye,onBlur:_e,classes:ae,ownerState:be}=r,Te=vi(r,YOe),Ae=ED(),Re=q.useRef(null),He=q.useRef(null),Se=q.useRef([]),qe=mo(n,Re),it=mo(ee==null?void 0:ee.ref,se),tt=vh();if(!tt)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const Oe=be??Ae,Je=Qt=>{var Jt;(Jt=tt.onFocus)==null||Jt.call(tt,Qt),ye==null||ye(Qt)},yt=Qt=>{Je(Qt)},wt=Qt=>{var Jt,fn;if(W==null||W(Qt),Qt.key==="Enter"&&!Qt.defaultMuiPrevented){if((Jt=Re.current)!=null&&Jt.dataset.multiInput)return;const Bt=(fn=Re.current)==null?void 0:fn.closest("form"),Kt=Bt==null?void 0:Bt.querySelector('[type="submit"]');if(!Bt||!Kt)return;Qt.preventDefault(),Bt.requestSubmit(Kt)}},$t=Qt=>{var Jt;(Jt=tt.onBlur)==null||Jt.call(tt,Qt),_e==null||_e(Qt)};q.useEffect(()=>{tt&&tt.setAdornedStart(!!T)},[tt,T]),q.useEffect(()=>{tt&&(c?tt.onEmpty():tt.onFilled())},[tt,c]);const It=tLe(ae,Oe),vt=(D==null?void 0:D.root)||CD,sn=xo({elementType:vt,externalSlotProps:k==null?void 0:k.root,externalForwardedProps:Te,additionalProps:{"aria-invalid":tt.error,ref:qe},className:It.root,ownerState:Oe}),Rn=(D==null?void 0:D.input)||Kj,yn=s.some(Qt=>Qt.content["data-range-position"]!==void 0);return q.useEffect(()=>{if(!yn||!Oe.isPickerOpen)return;const{activeBarWidth:Qt,sectionOffsets:Jt}=nLe(s,Re);Se.current=[Jt[0],Jt[1]],He.current&&(He.current.style.width=`${Qt}px`)},[s,yn,Oe.isPickerOpen]),$.jsxs(vt,Tt({},sn,{children:[T,$.jsx(WOe,{sectionListRef:he,elements:s,contentEditable:I,tabIndex:F,className:It.sectionsContainer,onFocus:Je,onBlur:$t,onInput:j,onPaste:V,onKeyDown:wt,slots:{root:Rn,section:ZOe,sectionContent:KOe,sectionSeparator:QOe},slotProps:{root:Tt({},k==null?void 0:k.input,{ownerState:Oe}),sectionContent:{className:zb.sectionContent},sectionSeparator:({separatorPosition:Qt})=>({className:Qt==="before"?zb.sectionBefore:zb.sectionAfter})}}),w,A?A(Tt({},tt)):null,$.jsx(JOe,Tt({name:Z,className:It.input,value:h,onChange:i,id:g,"aria-hidden":"true",tabIndex:-1,readOnly:K,required:tt.required,disabled:tt.disabled,onFocus:yt},ee,{ref:it})),yn&&$.jsx(eLe,{className:It.activeBar,ref:He,ownerState:{sectionOffsets:Se.current}})]}))});function rLe(e){return fr("MuiPickersOutlinedInput",e)}const xf=Tt({},zb,pr("MuiPickersOutlinedInput",["root","notchedOutline","input"])),iLe=["children","className","label","notched","shrink"],oLe=Ot("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),SH=Ot("span")(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit"})),sLe=Ot("legend",{shouldForwardProp:e=>Vp(e)&&e!=="notched"})(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]}));function aLe(e){const{className:t,label:n,notched:r}=e,s=vi(e,iLe),c=ED();return $.jsx(oLe,Tt({"aria-hidden":!0,className:t},s,{ownerState:c,children:$.jsx(sLe,{ownerState:c,notched:r,children:n?$.jsx(SH,{children:n}):$.jsx(SH,{className:"notranslate",children:""})})}))}const lLe=["label","autoFocus","ownerState","classes","notched"],cLe=Ot(CD,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${xf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${xf.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${xf.focused} .${xf.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${xf.disabled}`]:{[`& .${xf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled},"*":{color:(e.vars||e).palette.action.disabled}},[`&.${xf.error} .${xf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},variants:Object.keys((e.vars??e).palette).filter(n=>{var r;return((r=(e.vars??e).palette[n])==null?void 0:r.main)??!1}).map(n=>({props:{inputColor:n},style:{[`&.${xf.focused}:not(.${xf.error}) .${xf.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}}))}}),uLe=Ot(Kj,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),dLe=e=>{const n=dr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},rLe,e);return Tt({},e,n)},Pee=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersOutlinedInput"}),{label:s,classes:c,notched:h}=r,i=vi(r,lLe),g=vh(),w=dLe(c);return $.jsx(Qj,Tt({slots:{root:cLe,input:uLe},renderSuffix:T=>$.jsx(aLe,{shrink:!!(h||T.adornedStart||T.focused||T.filled),notched:!!(h||T.adornedStart||T.focused||T.filled),className:w.notchedOutline,label:s!=null&&s!==""&&(g!=null&&g.required)?$.jsxs(q.Fragment,{children:[s,"","*"]}):s})},i,{label:s,classes:w,ref:n}))});Pee.muiName="Input";function hLe(e){return fr("MuiPickersFilledInput",e)}const V_=Tt({},zb,pr("MuiPickersFilledInput",["root","underline","input"])),fLe=["label","autoFocus","disableUnderline","hiddenLabel","classes"],pLe=Ot(CD,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:e=>Vp(e)&&e!=="disableUnderline"})(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${V_.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${V_.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[...Object.keys((e.vars??e).palette).filter(h=>(e.vars??e).palette[h].main).map(h=>{var i;return{props:{inputColor:h,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(i=(e.vars||e).palette[h])==null?void 0:i.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${V_.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${V_.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${V_.disabled}, .${V_.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${V_.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),mLe=Ot(Kj,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:e=>Vp(e)&&e!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),gLe=(e,t)=>{const{inputHasUnderline:n}=t,s=dr({root:["root",n&&"underline"],input:["input"]},hLe,e);return Tt({},e,s)},Iee=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersFilledInput"}),{label:s,disableUnderline:c=!1,hiddenLabel:h=!1,classes:i}=r,g=vi(r,fLe),w=ED(),T=Tt({},w,{inputHasUnderline:!c}),A=gLe(i,T);return $.jsx(Qj,Tt({slots:{root:pLe,input:mLe},slotProps:{root:{disableUnderline:c},input:{hiddenLabel:h}}},g,{label:s,classes:A,ref:n,ownerState:T}))});Iee.muiName="Input";function yLe(e){return fr("MuiPickersFilledInput",e)}const iS=Tt({},zb,pr("MuiPickersInput",["root","underline","input"])),vLe=["label","autoFocus","disableUnderline","ownerState","classes"],_Le=Ot(CD,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:e=>Vp(e)&&e!=="disableUnderline"})(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((e.vars??e).palette).filter(r=>(e.vars??e).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${iS.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${iS.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${iS.disabled}, .${iS.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${iS.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),xLe=(e,t)=>{const{inputHasUnderline:n}=t,s=dr({root:["root",!n&&"underline"],input:["input"]},yLe,e);return Tt({},e,s)},kee=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersInput"}),{label:s,disableUnderline:c=!1,classes:h}=r,i=vi(r,vLe),g=ED(),w=Tt({},g,{inputHasUnderline:!c}),T=xLe(h,w);return $.jsx(Qj,Tt({slots:{root:_Le},slotProps:{root:{disableUnderline:c}}},i,{ownerState:w,label:s,classes:T,ref:n}))});kee.muiName="Input";const bLe=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],wLe={standard:kee,filled:Iee,outlined:Pee},SLe=Ot(fc,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),TLe=(e,t)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldRequired:s}=t;return dr({root:["root",n&&!r&&"focused",r&&"disabled",s&&"required"]},VOe,e)},Oee=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersTextField"}),{onFocus:s,onBlur:c,className:h,classes:i,color:g="primary",disabled:w=!1,error:T=!1,variant:A="outlined",required:D=!1,hiddenLabel:k=!1,InputProps:I,inputProps:F,inputRef:j,sectionListRef:V,elements:W,areAllSectionsEmpty:Z,onClick:K,onKeyDown:ee,onKeyUp:se,onPaste:he,onInput:ye,endAdornment:_e,startAdornment:ae,tabIndex:be,contentEditable:Te,focused:Ae,value:Re,onChange:He,fullWidth:Se,id:qe,name:it,helperText:tt,FormHelperTextProps:Oe,label:Je,InputLabelProps:yt,"data-active-range-position":wt}=r,$t=vi(r,bLe),It=q.useRef(null),vt=mo(n,It),sn=tm(qe),Rn=tt&&sn?`${sn}-helper-text`:void 0,yn=Je&&sn?`${sn}-label`:void 0,Qt=Zj({disabled:r.disabled,required:r.required,readOnly:I==null?void 0:I.readOnly}),Jt=q.useMemo(()=>Tt({},Qt,{isFieldValueEmpty:Z,isFieldFocused:Ae??!1,hasFieldError:T??!1,inputSize:r.size??"medium",inputColor:g??"primary",isInputInFullWidth:Se??!1,hasStartAdornment:!!(ae??(I==null?void 0:I.startAdornment)),hasEndAdornment:!!(_e??(I==null?void 0:I.endAdornment)),inputHasLabel:!!Je}),[Qt,Z,Ae,T,r.size,g,Se,ae,_e,I==null?void 0:I.startAdornment,I==null?void 0:I.endAdornment,Je]),fn=TLe(i,Jt),Bt=wLe[A],Kt={};return A==="outlined"?(yt&&typeof yt.shrink<"u"&&(Kt.notched=yt.shrink),Kt.label=Je):A==="filled"&&(Kt.hiddenLabel=k),$.jsx(Dee.Provider,{value:Jt,children:$.jsxs(SLe,Tt({className:Wn(fn.root,h),ref:vt,focused:Ae,disabled:w,variant:A,error:T,color:g,fullWidth:Se,required:D,ownerState:Jt},$t,{children:[Je!=null&&Je!==""&&$.jsx(Sf,Tt({htmlFor:sn,id:yn},yt,{children:Je})),$.jsx(Bt,Tt({elements:W,areAllSectionsEmpty:Z,onClick:K,onKeyDown:ee,onKeyUp:se,onInput:ye,onPaste:he,onFocus:s,onBlur:c,endAdornment:_e,startAdornment:ae,tabIndex:be,contentEditable:Te,value:Re,onChange:He,id:sn,fullWidth:Se,inputProps:F,inputRef:j,sectionListRef:V,label:Je,name:it,role:"group","aria-labelledby":yn,"aria-describedby":Rn,"aria-live":Rn?"polite":void 0,"data-active-range-position":wt},Kt,I)),tt&&$.jsx(xQ,Tt({id:Rn},Oe,{children:tt}))]}))})}),ELe=["enableAccessibleFieldDOMStructure"],CLe=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],ALe=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],MLe=["ownerState"],RLe=["ownerState"],DLe=["ownerState"],PLe=["ownerState"],ILe=["InputProps","inputProps"],kLe=e=>{let{enableAccessibleFieldDOMStructure:t}=e,n=vi(e,ELe);if(t){const{InputProps:j,readOnly:V,onClear:W,clearable:Z,clearButtonPosition:K,openPickerButtonPosition:ee,openPickerAriaLabel:se}=n,he=vi(n,CLe);return{clearable:Z,onClear:W,clearButtonPosition:K,openPickerButtonPosition:ee,openPickerAriaLabel:se,textFieldProps:Tt({},he,{InputProps:Tt({},j??{},{readOnly:V})})}}const{onPaste:r,onKeyDown:s,inputMode:c,readOnly:h,InputProps:i,inputProps:g,inputRef:w,onClear:T,clearable:A,clearButtonPosition:D,openPickerButtonPosition:k,openPickerAriaLabel:I}=n,F=vi(n,ALe);return{clearable:A,onClear:T,clearButtonPosition:D,openPickerButtonPosition:k,openPickerAriaLabel:I,textFieldProps:Tt({},F,{InputProps:Tt({},i??{},{readOnly:h}),inputProps:Tt({},g??{},{inputMode:c,onPaste:r,onKeyDown:s,ref:w})})}},Jj=q.createContext({slots:{},slotProps:{},inputRef:void 0});function OLe(e){var tt,Oe;const{slots:t,slotProps:n,fieldResponse:r,defaultOpenPickerIcon:s}=e,c=mv(),h=Wj(),i=q.useContext(Jj),{textFieldProps:g,onClear:w,clearable:T,openPickerAriaLabel:A,clearButtonPosition:D="end",openPickerButtonPosition:k="end"}=kLe(r),I=Zj(g),F=Tr(Je=>{Je.preventDefault(),h==null||h.setOpen(yt=>!yt)}),j=h?h.triggerStatus:"hidden",V=T?D:null,W=j!=="hidden"?k:null,Z=(t==null?void 0:t.textField)??i.slots.textField??(r.enableAccessibleFieldDOMStructure===!1?Ps:Oee),K=(t==null?void 0:t.inputAdornment)??i.slots.inputAdornment??_S,ee=xo({elementType:K,externalSlotProps:oM(i.slotProps.inputAdornment,n==null?void 0:n.inputAdornment),additionalProps:{position:"start"},ownerState:Tt({},I,{position:"start"})}),se=vi(ee,MLe),he=xo({elementType:K,externalSlotProps:n==null?void 0:n.inputAdornment,additionalProps:{position:"end"},ownerState:Tt({},I,{position:"end"})}),ye=vi(he,RLe),_e=i.slots.openPickerButton??fT,ae=xo({elementType:_e,externalSlotProps:i.slotProps.openPickerButton,additionalProps:{disabled:j==="disabled",onClick:F,"aria-label":A,edge:g.variant!=="standard"?W:!1},ownerState:I}),be=vi(ae,DLe),Te=i.slots.openPickerIcon??s,Ae=xo({elementType:Te,externalSlotProps:i.slotProps.openPickerIcon,ownerState:I}),Re=(t==null?void 0:t.clearButton)??i.slots.clearButton??fT,He=xo({elementType:Re,externalSlotProps:oM(i.slotProps.clearButton,n==null?void 0:n.clearButton),className:"clearButton",additionalProps:{title:c.fieldClearLabel,tabIndex:-1,onClick:w,disabled:r.disabled||r.readOnly,edge:g.variant!=="standard"&&V!==W?V:!1},ownerState:I}),Se=vi(He,PLe),qe=(t==null?void 0:t.clearIcon)??i.slots.clearIcon??Wke,it=xo({elementType:qe,externalSlotProps:oM(i.slotProps.clearIcon,n==null?void 0:n.clearIcon),additionalProps:{fontSize:"small"},ownerState:I});return g.ref=mo(g.ref,h==null?void 0:h.rootRef),g.InputProps||(g.InputProps={}),h&&(g.InputProps.ref=h.triggerRef),!((tt=g.InputProps)!=null&&tt.startAdornment)&&(V==="start"||W==="start")&&(g.InputProps.startAdornment=$.jsxs(K,Tt({},se,{children:[W==="start"&&$.jsx(_e,Tt({},be,{children:$.jsx(Te,Tt({},Ae))})),V==="start"&&$.jsx(Re,Tt({},Se,{children:$.jsx(qe,Tt({},it))}))]}))),!((Oe=g.InputProps)!=null&&Oe.endAdornment)&&(V==="end"||W==="end")&&(g.InputProps.endAdornment=$.jsxs(K,Tt({},ye,{children:[V==="end"&&$.jsx(Re,Tt({},Se,{children:$.jsx(qe,Tt({},it))})),W==="end"&&$.jsx(_e,Tt({},be,{children:$.jsx(Te,Tt({},Ae))}))]}))),V!=null&&(g.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(g.sx)?g.sx:[g.sx]]),$.jsx(Z,Tt({},g))}function oM(e,t){return e?t?n=>Tt({},Vb(t,n),Vb(e,n)):e:t}function LLe(e){const{ref:t,externalForwardedProps:n,slotProps:r}=e,s=q.useContext(Jj),c=Wj(),h=Zj(n),{InputProps:i,inputProps:g}=n,w=vi(n,ILe),T=xo({elementType:Oee,externalSlotProps:oM(s.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:w,additionalProps:{ref:t,sx:c==null?void 0:c.rootSx,label:c==null?void 0:c.label,name:c==null?void 0:c.name,className:c==null?void 0:c.rootClassName,inputRef:s.inputRef},ownerState:h});return T.inputProps=Tt({},g,T.inputProps),T.InputProps=Tt({},i,T.InputProps),T}function Lee(e){const{slots:t={},slotProps:n={},inputRef:r,children:s}=e,c=q.useMemo(()=>({inputRef:r,slots:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton},slotProps:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton}}),[r,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton]);return $.jsx(Jj.Provider,{value:c,children:s})}const zLe=["slots","slotProps"],zee=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiDateField"}),{slots:s,slotProps:c}=r,h=vi(r,zLe),i=LLe({slotProps:c,ref:n,externalForwardedProps:h}),g=jOe(i);return $.jsx(OLe,{slots:s,slotProps:c,fieldResponse:g,defaultOpenPickerIcon:Gke})}),Fee=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:r,maxDate:s,disableFuture:c,disablePast:h,timezone:i})=>{const g=us();return q.useCallback(w=>uE({adapter:g,value:w,timezone:i,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:r,maxDate:s,disableFuture:c,disablePast:h}})!==null,[g,e,t,n,r,s,c,h,i])},FLe=(e,t)=>(n,r)=>{switch(r.type){case"setVisibleDate":return Tt({},n,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!t.isSameMonth(r.month,n.currentMonth)&&!e&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const s=r.newTimezone;if(t.getTimezone(n.currentMonth)===s)return n;let c=t.setTimezone(n.currentMonth,s);return t.getMonth(c)!==t.getMonth(n.currentMonth)&&(c=t.setMonth(c,t.getMonth(n.currentMonth))),Tt({},n,{currentMonth:c})}case"finishMonthSwitchingAnimation":return Tt({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},BLe=e=>{const{value:t,referenceDate:n,disableFuture:r,disablePast:s,maxDate:c,minDate:h,onMonthChange:i,onYearChange:g,reduceAnimations:w,shouldDisableDate:T,timezone:A,getCurrentMonthFromVisibleDate:D}=e,k=us(),I=q.useRef(FLe(!!w,k)).current,F=q.useMemo(()=>Zp.getInitialReferenceValue({value:t,adapter:k,timezone:A,props:e,referenceDate:n,granularity:Ip.day}),[n,A]),[j,V]=q.useReducer(I,{isMonthSwitchingAnimating:!1,focusedDay:F,currentMonth:k.startOfMonth(F),slideDirection:"left"}),W=Fee({shouldDisableDate:T,minDate:h,maxDate:c,disableFuture:r,disablePast:s,timezone:A});q.useEffect(()=>{V({type:"changeMonthTimezone",newTimezone:k.getTimezone(F)})},[F,k]);const Z=Tr(({target:ee,reason:se})=>{if(se==="cell-interaction"&&j.focusedDay!=null&&k.isSameDay(ee,j.focusedDay))return;const he=se==="cell-interaction";let ye,_e;if(se==="cell-interaction")ye=D(ee,j.currentMonth),_e=ee;else if(ye=k.isSameMonth(ee,j.currentMonth)?j.currentMonth:k.startOfMonth(ee),_e=ee,W(_e)){const Te=k.startOfMonth(ee),Ae=k.endOfMonth(ee);_e=vT({adapter:k,date:_e,minDate:k.isBefore(h,Te)?Te:h,maxDate:k.isAfter(c,Ae)?Ae:c,disablePast:s,disableFuture:r,isDateDisabled:W,timezone:A})}const ae=!k.isSameMonth(j.currentMonth,ye),be=!k.isSameYear(j.currentMonth,ye);ae&&(i==null||i(ye)),be&&(g==null||g(k.startOfYear(ye))),V({type:"setVisibleDate",month:ye,direction:k.isAfterDay(ye,j.currentMonth)?"left":"right",focusedDay:j.focusedDay!=null&&_e!=null&&k.isSameDay(_e,j.focusedDay)?j.focusedDay:_e,skipAnimation:he})}),K=q.useCallback(()=>{V({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:F,calendarState:j,setVisibleDate:Z,isDateDisabled:W,onMonthSwitchingAnimationEnd:K}},NLe=e=>fr("MuiPickersFadeTransitionGroup",e);pr("MuiPickersFadeTransitionGroup",["root"]);const jLe=["children"],VLe=e=>dr({root:["root"]},NLe,e),ULe=Ot(QT,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function Bee(e){const t=qs({props:e,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:r,transKey:s,classes:c}=t,{children:h}=t,i=vi(t,jLe),g=VLe(c),w=cs();return r?h:$.jsx(ULe,{className:Wn(g.root,n),ownerState:i,children:$.jsx(Xy,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:w.transitions.duration.enteringScreen,enter:w.transitions.duration.enteringScreen,exit:0},children:h},s)})}const $Le=e=>fr("MuiPickersSlideTransition",e),Kd=pr("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),qLe=["children","className","reduceAnimations","slideDirection","transKey","classes"],HLe=(e,t)=>{const{slideDirection:n}=t,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return dr(r,$Le,e)},GLe=Ot(QT,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${Kd["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${Kd["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${Kd.slideEnterActive}`]:t.slideEnterActive},{[`.${Kd.slideExit}`]:t.slideExit},{[`.${Kd["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${Kd["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Kd["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Kd["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Kd.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${Kd.slideExit}`]:{transform:"translate(0%)"},[`& .${Kd["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${Kd["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function WLe(e){const t=qs({props:e,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:s,slideDirection:c,transKey:h,classes:i}=t,g=vi(t,qLe),{ownerState:w}=Fl(),T=Tt({},w,{slideDirection:c}),A=HLe(i,T),D=cs();if(s)return $.jsx("div",{className:Wn(A.root,r),children:n});const k={exit:A.exit,enterActive:A.enterActive,enter:A.enter,exitActive:A.exitActive};return $.jsx(GLe,{className:Wn(A.root,r),childFactory:I=>q.cloneElement(I,{classNames:k}),role:"presentation",ownerState:T,children:$.jsx(MN,Tt({mountOnEnter:!0,unmountOnExit:!0,timeout:D.transitions.duration.complex,classNames:k},g,{children:n}),h)})}const YLe=e=>fr("MuiDayCalendar",e);pr("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const XLe=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],ZLe=["ownerState"],KLe=e=>dr({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},YLe,e),Nee=(_T+SD*2)*6,QLe=Ot("div",{name:"MuiDayCalendar",slot:"Root"})({}),JLe=Ot("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),eze=Ot(rr,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),tze=Ot(rr,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.disabled})),nze=Ot(rr,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:e})=>Tt({},e.typography.caption,{width:_T,height:_T,padding:0,margin:`0 ${SD}px`,color:(e.vars||e).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),rze=Ot("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:Nee}),ize=Ot(WLe,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:Nee}),oze=Ot("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),sze=Ot("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${SD}px 0`,display:"flex",justifyContent:"center"});function aze(e){let{parentProps:t,day:n,focusedDay:r,selectedDays:s,isDateDisabled:c,currentMonthNumber:h,isViewFocused:i}=e,g=vi(e,XLe);const{disabled:w,disableHighlightToday:T,isMonthSwitchingAnimating:A,showDaysOutsideCurrentMonth:D,slots:k,slotProps:I,timezone:F}=t,j=us(),V=wD(F),W=r!=null&&j.isSameDay(n,r),Z=i&&W,K=s.some(Re=>j.isSameDay(Re,n)),ee=j.isSameDay(n,V),se=q.useMemo(()=>w||c(n),[w,c,n]),he=q.useMemo(()=>j.getMonth(n)!==h,[j,n,h]),ye=vee({day:n,selected:K,disabled:se,today:ee,outsideCurrentMonth:he,disableMargin:void 0,disableHighlightToday:T,showDaysOutsideCurrentMonth:D}),_e=(k==null?void 0:k.day)??SOe,ae=xo({elementType:_e,externalSlotProps:I==null?void 0:I.day,additionalProps:Tt({disableHighlightToday:T,showDaysOutsideCurrentMonth:D,role:"gridcell",isAnimating:A,"data-timestamp":j.toJsDate(n).valueOf()},g),ownerState:Tt({},ye,{day:n,isDayDisabled:se,isDaySelected:K})}),be=vi(ae,ZLe),Te=q.useMemo(()=>{const Re=j.startOfMonth(j.setMonth(n,h));return D?j.isSameDay(n,j.startOfWeek(Re)):j.isSameDay(n,Re)},[h,n,D,j]),Ae=q.useMemo(()=>{const Re=j.endOfMonth(j.setMonth(n,h));return D?j.isSameDay(n,j.endOfWeek(Re)):j.isSameDay(n,Re)},[h,n,D,j]);return $.jsx(_e,Tt({},be,{day:n,disabled:se,autoFocus:!he&&Z,today:ee,outsideCurrentMonth:he,isFirstVisibleCell:Te,isLastVisibleCell:Ae,selected:K,tabIndex:W?0:-1,"aria-selected":K,"aria-current":ee?"date":void 0}))}function lze(e){const t=qs({props:e,name:"MuiDayCalendar"}),n=us(),{onFocusedDayChange:r,className:s,classes:c,currentMonth:h,selectedDays:i,focusedDay:g,loading:w,onSelectedDaysChange:T,onMonthSwitchingAnimationEnd:A,readOnly:D,reduceAnimations:k,renderLoading:I=()=>$.jsx("span",{children:"..."}),slideDirection:F,TransitionProps:j,disablePast:V,disableFuture:W,minDate:Z,maxDate:K,shouldDisableDate:ee,shouldDisableMonth:se,shouldDisableYear:he,dayOfWeekFormatter:ye=Jt=>n.format(Jt,"weekdayShort").charAt(0).toUpperCase(),hasFocus:_e,onFocusedViewChange:ae,gridLabelId:be,displayWeekNumber:Te,fixedWeekNumber:Ae,timezone:Re}=t,He=wD(Re),Se=KLe(c),qe=vc(),it=Fee({shouldDisableDate:ee,shouldDisableMonth:se,shouldDisableYear:he,minDate:Z,maxDate:K,disablePast:V,disableFuture:W,timezone:Re}),tt=mv(),Oe=Tr(Jt=>{D||T(Jt)}),Je=Jt=>{it(Jt)||(r(Jt),ae==null||ae(!0))},yt=Tr((Jt,fn)=>{switch(Jt.key){case"ArrowUp":Je(n.addDays(fn,-7)),Jt.preventDefault();break;case"ArrowDown":Je(n.addDays(fn,7)),Jt.preventDefault();break;case"ArrowLeft":{const Bt=n.addDays(fn,qe?1:-1),Kt=n.addMonths(fn,qe?1:-1),_n=vT({adapter:n,date:Bt,minDate:qe?Bt:n.startOfMonth(Kt),maxDate:qe?n.endOfMonth(Kt):Bt,isDateDisabled:it,timezone:Re});Je(_n||Bt),Jt.preventDefault();break}case"ArrowRight":{const Bt=n.addDays(fn,qe?-1:1),Kt=n.addMonths(fn,qe?-1:1),_n=vT({adapter:n,date:Bt,minDate:qe?n.startOfMonth(Kt):Bt,maxDate:qe?Bt:n.endOfMonth(Kt),isDateDisabled:it,timezone:Re});Je(_n||Bt),Jt.preventDefault();break}case"Home":Je(n.startOfWeek(fn)),Jt.preventDefault();break;case"End":Je(n.endOfWeek(fn)),Jt.preventDefault();break;case"PageUp":Je(n.addMonths(fn,1)),Jt.preventDefault();break;case"PageDown":Je(n.addMonths(fn,-1)),Jt.preventDefault();break}}),wt=Tr((Jt,fn)=>Je(fn)),$t=Tr((Jt,fn)=>{g!=null&&n.isSameDay(g,fn)&&(ae==null||ae(!1))}),It=n.getMonth(h),vt=n.getYear(h),sn=q.useMemo(()=>i.filter(Jt=>!!Jt).map(Jt=>n.startOfDay(Jt)),[n,i]),Rn=`${vt}-${It}`,yn=q.useMemo(()=>q.createRef(),[Rn]),Qt=q.useMemo(()=>{const Jt=n.getWeekArray(h);let fn=n.addMonths(h,1);for(;Ae&&Jt.length<Ae;){const Bt=n.getWeekArray(fn),Kt=n.isSameDay(Jt[Jt.length-1][0],Bt[0][0]);Bt.slice(Kt?1:0).forEach(_n=>{Jt.length<Ae&&Jt.push(_n)}),fn=n.addMonths(fn,1)}return Jt},[h,Ae,n]);return $.jsxs(QLe,{role:"grid","aria-labelledby":be,className:Se.root,children:[$.jsxs(JLe,{role:"row",className:Se.header,children:[Te&&$.jsx(tze,{variant:"caption",role:"columnheader","aria-label":tt.calendarWeekNumberHeaderLabel,className:Se.weekNumberLabel,children:tt.calendarWeekNumberHeaderText}),Ske(n,He).map((Jt,fn)=>$.jsx(eze,{variant:"caption",role:"columnheader","aria-label":n.format(Jt,"weekday"),className:Se.weekDayLabel,children:ye(Jt)},fn.toString()))]}),w?$.jsx(rze,{className:Se.loadingContainer,children:I()}):$.jsx(ize,Tt({transKey:Rn,onExited:A,reduceAnimations:k,slideDirection:F,className:Wn(s,Se.slideTransition)},j,{nodeRef:yn,children:$.jsx(oze,{ref:yn,role:"rowgroup",className:Se.monthContainer,children:Qt.map((Jt,fn)=>$.jsxs(sze,{role:"row",className:Se.weekContainer,"aria-rowindex":fn+1,children:[Te&&$.jsx(nze,{className:Se.weekNumber,role:"rowheader","aria-label":tt.calendarWeekNumberAriaLabelText(n.getWeekNumber(Jt[0])),children:tt.calendarWeekNumberText(n.getWeekNumber(Jt[0]))}),Jt.map((Bt,Kt)=>$.jsx(aze,{parentProps:t,day:Bt,selectedDays:sn,isViewFocused:_e,focusedDay:g,onKeyDown:yt,onFocus:wt,onBlur:$t,onDaySelect:Oe,isDateDisabled:it,currentMonthNumber:It,"aria-colindex":Kt+1},Bt.toString()))]},`week-${Jt[0]}`))})}))]})}function jee(e){return fr("MuiMonthCalendar",e)}const gA=pr("MuiMonthCalendar",["root","button","disabled","selected"]),cze=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],uze=(e,t)=>{const n={button:["button",t.isMonthDisabled&&"disabled",t.isMonthSelected&&"selected"]};return dr(n,jee,e)},dze=Ot("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${gA.disabled}`]:t.disabled},{[`&.${gA.selected}`]:t.selected}]})(({theme:e})=>Tt({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${gA.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${gA.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),hze=q.memo(function(t){const{autoFocus:n,classes:r,disabled:s,selected:c,value:h,onClick:i,onKeyDown:g,onFocus:w,onBlur:T,slots:A,slotProps:D}=t,k=vi(t,cze),I=q.useRef(null),{ownerState:F}=Fl(),j=Tt({},F,{isMonthDisabled:s,isMonthSelected:c}),V=uze(r,j);$s(()=>{var K;n&&((K=I.current)==null||K.focus())},[n]);const W=(A==null?void 0:A.monthButton)??dze,Z=xo({elementType:W,externalSlotProps:D==null?void 0:D.monthButton,externalForwardedProps:k,additionalProps:{disabled:s,ref:I,type:"button",role:"radio","aria-checked":c,onClick:K=>i(K,h),onKeyDown:K=>g(K,h),onFocus:K=>w(K,h),onBlur:K=>T(K,h)},ownerState:j,className:V.button});return $.jsx(W,Tt({},Z))}),fze=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],pze=e=>dr({root:["root"]},jee,e);function mze(e,t){const n=qs({props:e,name:t}),r=dE(n);return Tt({},n,r,{monthsPerRow:n.monthsPerRow??3})}const gze=Ot("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:e=>Vp(e)&&e!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:TD,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),yze=q.forwardRef(function(t,n){const r=mze(t,"MuiMonthCalendar"),{autoFocus:s,className:c,classes:h,value:i,defaultValue:g,referenceDate:w,disabled:T,disableFuture:A,disablePast:D,maxDate:k,minDate:I,onChange:F,shouldDisableMonth:j,readOnly:V,onMonthFocus:W,hasFocus:Z,onFocusedViewChange:K,monthsPerRow:ee,timezone:se,gridLabelId:he,slots:ye,slotProps:_e}=r,ae=vi(r,fze),{value:be,handleValueChange:Te,timezone:Ae}=cE({name:"MonthCalendar",timezone:se,value:i,defaultValue:g,referenceDate:w,onChange:F,valueManager:Zp}),Re=wD(Ae),He=vc(),Se=us(),{ownerState:qe}=Fl(),it=q.useMemo(()=>Zp.getInitialReferenceValue({value:be,adapter:Se,props:r,timezone:Ae,referenceDate:w,granularity:Ip.month}),[]),tt=pze(h),Oe=q.useMemo(()=>Se.getMonth(Re),[Se,Re]),Je=q.useMemo(()=>be!=null?Se.getMonth(be):null,[be,Se]),[yt,wt]=q.useState(()=>Je||Se.getMonth(it)),[$t,It]=Yp({name:"MonthCalendar",state:"hasFocus",controlled:Z,default:s??!1}),vt=Tr(Bt=>{It(Bt),K&&K(Bt)}),sn=q.useCallback(Bt=>{const Kt=Se.startOfMonth(D&&Se.isAfter(Re,I)?Re:I),_n=Se.startOfMonth(A&&Se.isBefore(Re,k)?Re:k),an=Se.startOfMonth(Bt);return Se.isBefore(an,Kt)||Se.isAfter(an,_n)?!0:j?j(an):!1},[A,D,k,I,Re,j,Se]),Rn=Tr((Bt,Kt)=>{if(V)return;const _n=Se.setMonth(be??it,Kt);Te(_n)}),yn=Tr(Bt=>{sn(Se.setMonth(be??it,Bt))||(wt(Bt),vt(!0),W&&W(Bt))});q.useEffect(()=>{wt(Bt=>Je!==null&&Bt!==Je?Je:Bt)},[Je]);const Qt=Tr((Bt,Kt)=>{switch(Bt.key){case"ArrowUp":yn((12+Kt-3)%12),Bt.preventDefault();break;case"ArrowDown":yn((12+Kt+3)%12),Bt.preventDefault();break;case"ArrowLeft":yn((12+Kt+(He?1:-1))%12),Bt.preventDefault();break;case"ArrowRight":yn((12+Kt+(He?-1:1))%12),Bt.preventDefault();break}}),Jt=Tr((Bt,Kt)=>{yn(Kt)}),fn=Tr((Bt,Kt)=>{yt===Kt&&vt(!1)});return $.jsx(gze,Tt({ref:n,className:Wn(tt.root,c),ownerState:qe,role:"radiogroup","aria-labelledby":he,monthsPerRow:ee},ae,{children:Vj(Se,be??it).map(Bt=>{const Kt=Se.getMonth(Bt),_n=Se.format(Bt,"monthShort"),an=Se.format(Bt,"month"),Ft=Kt===Je,kn=T||sn(Bt);return $.jsx(hze,{selected:Ft,value:Kt,onClick:Rn,onKeyDown:Qt,autoFocus:$t&&Kt===yt,disabled:kn,tabIndex:Kt===yt&&!kn?0:-1,onFocus:Jt,onBlur:fn,"aria-current":Oe===Kt?"date":void 0,"aria-label":an,slots:ye,slotProps:_e,classes:h,children:_n},_n)})}))});function Vee(e){return fr("MuiYearCalendar",e)}const yA=pr("MuiYearCalendar",["root","button","disabled","selected"]),vze=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],_ze=(e,t)=>{const n={button:["button",t.isYearDisabled&&"disabled",t.isYearSelected&&"selected"]};return dr(n,Vee,e)},xze=Ot("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${yA.disabled}`]:t.disabled},{[`&.${yA.selected}`]:t.selected}]})(({theme:e})=>Tt({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:ai(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ai(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${yA.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${yA.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),bze=q.memo(function(t){const{autoFocus:n,classes:r,disabled:s,selected:c,value:h,onClick:i,onKeyDown:g,onFocus:w,onBlur:T,slots:A,slotProps:D}=t,k=vi(t,vze),I=q.useRef(null),{ownerState:F}=Fl(),j=Tt({},F,{isYearDisabled:s,isYearSelected:c}),V=_ze(r,j);$s(()=>{var K;n&&((K=I.current)==null||K.focus())},[n]);const W=(A==null?void 0:A.yearButton)??xze,Z=xo({elementType:W,externalSlotProps:D==null?void 0:D.yearButton,externalForwardedProps:k,additionalProps:{disabled:s,ref:I,type:"button",role:"radio","aria-checked":c,onClick:K=>i(K,h),onKeyDown:K=>g(K,h),onFocus:K=>w(K,h),onBlur:K=>T(K,h)},ownerState:j,className:V.button});return $.jsx(W,Tt({},Z))}),wze=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],Sze=e=>dr({root:["root"]},Vee,e);function Tze(e,t){const n=qs({props:e,name:t}),r=dE(n);return Tt({},n,r,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const Eze=Ot("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:e=>Vp(e)&&e!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:TD,maxHeight:lOe,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),Cze=Ot("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),Aze=q.forwardRef(function(t,n){const r=Tze(t,"MuiYearCalendar"),{autoFocus:s,className:c,classes:h,value:i,defaultValue:g,referenceDate:w,disabled:T,disableFuture:A,disablePast:D,maxDate:k,minDate:I,onChange:F,readOnly:j,shouldDisableYear:V,onYearFocus:W,hasFocus:Z,onFocusedViewChange:K,yearsOrder:ee,yearsPerRow:se,timezone:he,gridLabelId:ye,slots:_e,slotProps:ae}=r,be=vi(r,wze),{value:Te,handleValueChange:Ae,timezone:Re}=cE({name:"YearCalendar",timezone:he,value:i,defaultValue:g,referenceDate:w,onChange:F,valueManager:Zp}),He=wD(Re),Se=vc(),qe=us(),{ownerState:it}=Fl(),tt=q.useMemo(()=>Zp.getInitialReferenceValue({value:Te,adapter:qe,props:r,timezone:Re,referenceDate:w,granularity:Ip.year}),[]),Oe=Sze(h),Je=q.useMemo(()=>qe.getYear(He),[qe,He]),yt=q.useMemo(()=>Te!=null?qe.getYear(Te):null,[Te,qe]),[wt,$t]=q.useState(()=>yt||qe.getYear(tt)),[It,vt]=Yp({name:"YearCalendar",state:"hasFocus",controlled:Z,default:s??!1}),sn=Tr(wn=>{vt(wn),K&&K(wn)}),Rn=q.useCallback(wn=>{if(D&&qe.isBeforeYear(wn,He)||A&&qe.isAfterYear(wn,He)||I&&qe.isBeforeYear(wn,I)||k&&qe.isAfterYear(wn,k))return!0;if(!V)return!1;const Vn=qe.startOfYear(wn);return V(Vn)},[A,D,k,I,He,V,qe]),yn=Tr((wn,Vn)=>{if(j)return;const ut=qe.setYear(Te??tt,Vn);Ae(ut)}),Qt=Tr(wn=>{Rn(qe.setYear(Te??tt,wn))||($t(wn),sn(!0),W==null||W(wn))});q.useEffect(()=>{$t(wn=>yt!==null&&wn!==yt?yt:wn)},[yt]);const Jt=ee!=="desc"?se*1:se*-1,fn=Se&&ee==="asc"||!Se&&ee==="desc"?-1:1,Bt=Tr((wn,Vn)=>{switch(wn.key){case"ArrowUp":Qt(Vn-Jt),wn.preventDefault();break;case"ArrowDown":Qt(Vn+Jt),wn.preventDefault();break;case"ArrowLeft":Qt(Vn-fn),wn.preventDefault();break;case"ArrowRight":Qt(Vn+fn),wn.preventDefault();break}}),Kt=Tr((wn,Vn)=>{Qt(Vn)}),_n=Tr((wn,Vn)=>{wt===Vn&&sn(!1)}),an=q.useRef(null),Ft=mo(n,an);q.useEffect(()=>{if(s||an.current===null)return;const wn=an.current.querySelector('[tabindex="0"]');if(!wn)return;const Vn=wn.offsetHeight,ut=wn.offsetTop,gn=an.current.clientHeight,Rt=an.current.scrollTop,Wt=ut+Vn;Vn>gn||ut<Rt||(an.current.scrollTop=Wt-gn/2-Vn/2)},[s]);const kn=qe.getYearRange([I,k]);ee==="desc"&&kn.reverse();let Yn=se-kn.length%se;return Yn===se&&(Yn=0),$.jsxs(Eze,Tt({ref:Ft,className:Wn(Oe.root,c),ownerState:it,role:"radiogroup","aria-labelledby":ye,yearsPerRow:se},be,{children:[kn.map(wn=>{const Vn=qe.getYear(wn),ut=Vn===yt,gn=T||Rn(wn);return $.jsx(bze,{selected:ut,value:Vn,onClick:yn,onKeyDown:Bt,autoFocus:It&&Vn===wt,disabled:gn,tabIndex:Vn===wt&&!gn?0:-1,onFocus:Kt,onBlur:_n,"aria-current":Je===Vn?"date":void 0,slots:_e,slotProps:ae,classes:h,children:qe.format(wn,"year")},qe.format(wn,"year"))}),Array.from({length:Yn},(wn,Vn)=>$.jsx(Cze,{},Vn))]}))}),Mze=e=>fr("MuiPickersCalendarHeader",e),Rze=pr("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Dze=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],Pze=["ownerState"],Ize=e=>dr({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Mze,e),kze=Ot("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),Oze=Ot("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:e})=>Tt({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),Lze=Ot("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),zze=Ot(fT,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Rze.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),Fze=Ot($ke,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),Bze=q.forwardRef(function(t,n){const r=mv(),s=us(),c=qs({props:t,name:"MuiPickersCalendarHeader"}),{slots:h,slotProps:i,currentMonth:g,disabled:w,disableFuture:T,disablePast:A,maxDate:D,minDate:k,onMonthChange:I,onViewChange:F,view:j,reduceAnimations:V,views:W,labelId:Z,className:K,classes:ee,timezone:se,format:he=`${s.formats.month} ${s.formats.year}`}=c,ye=vi(c,Dze),{ownerState:_e}=Fl(),ae=Ize(ee),be=(h==null?void 0:h.switchViewButton)??zze,Te=xo({elementType:be,externalSlotProps:i==null?void 0:i.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(j)},ownerState:Tt({},_e,{view:j}),className:ae.switchViewButton}),Ae=(h==null?void 0:h.switchViewIcon)??Fze,Re=xo({elementType:Ae,externalSlotProps:i==null?void 0:i.switchViewIcon,ownerState:_e,className:ae.switchViewIcon}),He=vi(Re,Pze),Se=()=>I(s.addMonths(g,1)),qe=()=>I(s.addMonths(g,-1)),it=sOe(g,{disableFuture:T,maxDate:D,timezone:se}),tt=aOe(g,{disablePast:A,minDate:k,timezone:se}),Oe=()=>{if(!(W.length===1||!F||w))if(W.length===2)F(W.find(yt=>yt!==j)||W[0]);else{const yt=W.indexOf(j)!==0?0:1;F(W[yt])}};if(W.length===1&&W[0]==="year")return null;const Je=s.formatByString(g,he);return $.jsxs(kze,Tt({},ye,{ownerState:_e,className:Wn(ae.root,K),ref:n,children:[$.jsxs(Oze,{role:"presentation",onClick:Oe,ownerState:_e,"aria-live":"polite",className:ae.labelContainer,children:[$.jsx(Bee,{reduceAnimations:V,transKey:Je,children:$.jsx(Lze,{id:Z,ownerState:_e,className:ae.label,children:Je})}),W.length>1&&!w&&$.jsx(be,Tt({},Te,{children:$.jsx(Ae,Tt({},He))}))]}),$.jsx(Xy,{in:j==="day",appear:!V,enter:!V,children:$.jsx(tOe,{slots:h,slotProps:i,onGoToPrevious:qe,isPreviousDisabled:tt,previousLabel:r.previousMonth,onGoToNext:Se,isNextDisabled:it,nextLabel:r.nextMonth})})]}))}),Nze="@media (prefers-reduced-motion: reduce)",Fb=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),TH=Fb&&Fb[1]?parseInt(Fb[1],10):null,EH=Fb&&Fb[2]?parseInt(Fb[2],10):null,jze=TH&&TH<10||EH&&EH<13||!1;function Uee(e){const t=f1(Nze,{defaultMatches:!1});return e??(t||jze)}const Vze=e=>fr("MuiDateCalendar",e);pr("MuiDateCalendar",["root","viewTransitionContainer"]);const Uze=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],$ze=e=>dr({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Vze,e);function qze(e,t){const n=qs({props:e,name:t}),r=Uee(n.reduceAnimations),s=dE(n);return Tt({},n,s,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:r,renderLoading:n.renderLoading??(()=>$.jsx("span",{children:"..."}))})}const Hze=Ot(cOe,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:Yj}),Gze=Ot(Bee,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),Wze=q.forwardRef(function(t,n){const r=us(),{ownerState:s}=Fl(),c=tm(),h=qze(t,"MuiDateCalendar"),{autoFocus:i,onViewChange:g,value:w,defaultValue:T,referenceDate:A,disableFuture:D,disablePast:k,onChange:I,onMonthChange:F,reduceAnimations:j,shouldDisableDate:V,shouldDisableMonth:W,shouldDisableYear:Z,view:K,views:ee,openTo:se,className:he,classes:ye,disabled:_e,readOnly:ae,minDate:be,maxDate:Te,disableHighlightToday:Ae,focusedView:Re,onFocusedViewChange:He,showDaysOutsideCurrentMonth:Se,fixedWeekNumber:qe,dayOfWeekFormatter:it,slots:tt,slotProps:Oe,loading:Je,renderLoading:yt,displayWeekNumber:wt,yearsOrder:$t,yearsPerRow:It,monthsPerRow:vt,timezone:sn}=h,Rn=vi(h,Uze),{value:yn,handleValueChange:Qt,timezone:Jt}=cE({name:"DateCalendar",timezone:sn,value:w,defaultValue:T,referenceDate:A,onChange:I,valueManager:Zp}),{view:fn,setView:Bt,focusedView:Kt,setFocusedView:_n,goToNextView:an,setValueAndGoToNextView:Ft}=yee({view:K,views:ee,openTo:se,onChange:Qt,onViewChange:g,autoFocus:i,focusedView:Re,onFocusedViewChange:He}),{referenceDate:kn,calendarState:Yn,setVisibleDate:wn,isDateDisabled:Vn,onMonthSwitchingAnimationEnd:ut}=BLe({value:yn,referenceDate:A,reduceAnimations:j,onMonthChange:F,minDate:be,maxDate:Te,shouldDisableDate:V,disablePast:k,disableFuture:D,timezone:Jt,getCurrentMonthFromVisibleDate:(wr,Rr)=>r.isSameMonth(wr,Rr)?Rr:r.startOfMonth(wr)}),gn=_e&&yn||be,Rt=_e&&yn||Te,Wt=`${c}-grid-label`,zn=Kt!==null,Un=(tt==null?void 0:tt.calendarHeader)??Bze,mr=xo({elementType:Un,externalSlotProps:Oe==null?void 0:Oe.calendarHeader,additionalProps:{views:ee,view:fn,currentMonth:Yn.currentMonth,onViewChange:Bt,onMonthChange:wr=>wn({target:wr,reason:"header-navigation"}),minDate:gn,maxDate:Rt,disabled:_e,disablePast:k,disableFuture:D,reduceAnimations:j,timezone:Jt,labelId:Wt},ownerState:s}),Xn=Tr(wr=>{const Rr=r.startOfMonth(wr),Di=r.endOfMonth(wr),Wo=Vn(wr)?vT({adapter:r,date:wr,minDate:r.isBefore(be,Rr)?Rr:be,maxDate:r.isAfter(Te,Di)?Di:Te,disablePast:k,disableFuture:D,isDateDisabled:Vn,timezone:Jt}):wr;Wo?(Ft(Wo,"finish"),wn({target:Wo,reason:"cell-interaction"})):(an(),wn({target:Rr,reason:"cell-interaction"}))}),or=Tr(wr=>{const Rr=r.startOfYear(wr),Di=r.endOfYear(wr),Wo=Vn(wr)?vT({adapter:r,date:wr,minDate:r.isBefore(be,Rr)?Rr:be,maxDate:r.isAfter(Te,Di)?Di:Te,disablePast:k,disableFuture:D,isDateDisabled:Vn,timezone:Jt}):wr;Wo?(Ft(Wo,"finish"),wn({target:Wo,reason:"cell-interaction"})):(an(),wn({target:Rr,reason:"cell-interaction"}))}),En=Tr(wr=>Qt(wr&&uR(r,wr,yn??kn),"finish",fn));q.useEffect(()=>{r.isValid(yn)&&wn({target:yn,reason:"controlled-value-change"})},[yn]);const Fr=$ze(ye),Er={disablePast:k,disableFuture:D,maxDate:Te,minDate:be},_r={disableHighlightToday:Ae,readOnly:ae,disabled:_e,timezone:Jt,gridLabelId:Wt,slots:tt,slotProps:Oe},nr=q.useRef(fn);q.useEffect(()=>{nr.current!==fn&&(Kt===nr.current&&_n(fn,!0),nr.current=fn)},[Kt,_n,fn]);const Wr=q.useMemo(()=>[yn],[yn]);return $.jsxs(Hze,Tt({ref:n,className:Wn(Fr.root,he),ownerState:s},Rn,{children:[$.jsx(Un,Tt({},mr,{slots:tt,slotProps:Oe})),$.jsx(Gze,{reduceAnimations:j,className:Fr.viewTransitionContainer,transKey:fn,ownerState:s,children:$.jsxs("div",{children:[fn==="year"&&$.jsx(Aze,Tt({},Er,_r,{value:yn,onChange:or,shouldDisableYear:Z,hasFocus:zn,onFocusedViewChange:wr=>_n("year",wr),yearsOrder:$t,yearsPerRow:It,referenceDate:kn})),fn==="month"&&$.jsx(yze,Tt({},Er,_r,{hasFocus:zn,className:he,value:yn,onChange:Xn,shouldDisableMonth:W,onFocusedViewChange:wr=>_n("month",wr),monthsPerRow:vt,referenceDate:kn})),fn==="day"&&$.jsx(lze,Tt({},Yn,Er,_r,{onMonthSwitchingAnimationEnd:ut,hasFocus:zn,onFocusedDayChange:wr=>wn({target:wr,reason:"cell-interaction"}),reduceAnimations:j,selectedDays:Wr,onSelectedDaysChange:En,shouldDisableDate:V,shouldDisableMonth:W,shouldDisableYear:Z,onFocusedViewChange:wr=>_n("day",wr),showDaysOutsideCurrentMonth:Se,fixedWeekNumber:qe,dayOfWeekFormatter:it,displayWeekNumber:wt,loading:Je,renderLoading:yt}))]})})]}))});function Yze(e){return fr("MuiPickersToolbar",e)}pr("MuiPickersToolbar",["root","title","content"]);function $ee(){const{ownerState:e}=Fl(),t=vc();return q.useMemo(()=>Tt({},e,{toolbarDirection:t?"rtl":"ltr"}),[e,t])}const Xze=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],Zze=e=>dr({root:["root"],title:["title"],content:["content"]},Yze,e),Kze=Ot("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Qze=Ot("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:e=>Vp(e)&&e!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),Jze=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersToolbar"}),{children:s,className:c,classes:h,toolbarTitle:i,hidden:g,titleId:w,landscapeDirection:T}=r,A=vi(r,Xze),D=$ee(),k=Zze(h);return g?null:$.jsxs(Kze,Tt({ref:n,className:Wn(k.root,c),ownerState:D},A,{children:[$.jsx(rr,{color:"text.secondary",variant:"overline",id:w,className:k.title,children:i}),$.jsx(Qze,{className:k.content,ownerState:D,landscapeDirection:T,children:s})]}))});function e3e(e){return fr("MuiDatePickerToolbar",e)}pr("MuiDatePickerToolbar",["root","title"]);const t3e=["toolbarFormat","toolbarPlaceholder","className","classes"],n3e=e=>dr({root:["root"],title:["title"]},e3e,e),r3e=Ot(Jze,{name:"MuiDatePickerToolbar",slot:"Root"})({}),i3e=Ot(rr,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),o3e=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiDatePickerToolbar"}),{toolbarFormat:s,toolbarPlaceholder:c="",className:h,classes:i}=r,g=vi(r,t3e),w=us(),{value:T,views:A,orientation:D}=_1(),k=mv(),I=$ee(),F=n3e(i),j=q.useMemo(()=>{if(!w.isValid(T))return c;const V=Uj(w,{format:s,views:A},!0);return w.formatByString(T,V)},[T,s,c,w,A]);return $.jsx(r3e,Tt({ref:n,toolbarTitle:k.datePickerToolbarTitle,className:Wn(F.root,h)},g,{children:$.jsx(i3e,{variant:"h4",align:D==="landscape"?"left":"center",ownerState:I,className:F.title,children:j})}))});function qee(e,t){const n=qs({props:e,name:t}),r=dE(n),s=q.useMemo(()=>{var c;return((c=n.localeText)==null?void 0:c.toolbarTitle)==null?n.localeText:Tt({},n.localeText,{datePickerToolbarTitle:n.localeText.toolbarTitle})},[n.localeText]);return Tt({},n,r,{localeText:s},_ke({views:n.views,openTo:n.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:Tt({toolbar:o3e},n.slots)})}function s3e(e){return fr("MuiPickerPopper",e)}pr("MuiPickerPopper",["root","paper"]);const a3e=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],l3e=e=>dr({root:["root"],paper:["paper"]},s3e,e),c3e=Ot(KT,{name:"MuiPickerPopper",slot:"Root"})(({theme:e})=>({zIndex:e.zIndex.modal})),u3e=Ot(fu,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:e})=>new Set(["top","top-start","top-end"]).has(e),style:{transformOrigin:"bottom center"}}]});function d3e(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function h3e(e,t){const n=q.useRef(!1),r=q.useRef(!1),s=q.useRef(null),c=q.useRef(!1);q.useEffect(()=>{if(!e)return;function g(){c.current=!0}return document.addEventListener("mousedown",g,!0),document.addEventListener("touchstart",g,!0),()=>{document.removeEventListener("mousedown",g,!0),document.removeEventListener("touchstart",g,!0),c.current=!1}},[e]);const h=Tr(g=>{if(!c.current)return;const w=r.current;r.current=!1;const T=za(s.current);if(!s.current||"clientX"in g&&d3e(g,T))return;if(n.current){n.current=!1;return}let A;g.composedPath?A=g.composedPath().indexOf(s.current)>-1:A=!T.documentElement.contains(g.target)||s.current.contains(g.target),!A&&!w&&t(g)}),i=()=>{r.current=!0};return q.useEffect(()=>{if(e){const g=za(s.current),w=()=>{n.current=!0};return g.addEventListener("touchstart",h),g.addEventListener("touchmove",w),()=>{g.removeEventListener("touchstart",h),g.removeEventListener("touchmove",w)}}},[e,h]),q.useEffect(()=>{if(e){const g=za(s.current);return g.addEventListener("click",h),()=>{g.removeEventListener("click",h),r.current=!1}}},[e,h]),[s,i,i]}const f3e=q.forwardRef((e,t)=>{const{PaperComponent:n,ownerState:r,children:s,paperSlotProps:c,paperClasses:h,onPaperClick:i,onPaperTouchStart:g}=e,w=vi(e,a3e),T=xo({elementType:n,externalSlotProps:c,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:h,ownerState:r});return $.jsx(n,Tt({},w,T,{onClick:A=>{var D;i(A),(D=T.onClick)==null||D.call(T,A)},onTouchStart:A=>{var D;g(A),(D=T.onTouchStart)==null||D.call(T,A)},ownerState:r,children:s}))});function p3e(e){const t=qs({props:e,name:"MuiPickerPopper"}),{children:n,placement:r="bottom-start",slots:s,slotProps:c,classes:h}=t,{open:i,popupRef:g,reduceAnimations:w}=_1(),{dismissViews:T,getCurrentViewMode:A,onPopperExited:D,triggerElement:k,viewContainerRole:I}=Fl();q.useEffect(()=>{function qe(it){i&&it.key==="Escape"&&T()}return document.addEventListener("keydown",qe),()=>{document.removeEventListener("keydown",qe)}},[T,i]);const F=q.useRef(null);q.useEffect(()=>{I==="tooltip"||A()==="field"||(i?F.current=uc(document):F.current&&F.current instanceof HTMLElement&&setTimeout(()=>{F.current instanceof HTMLElement&&F.current.focus()}))},[i,I,A]);const j=l3e(h),{ownerState:V,rootRefObject:W}=Fl(),Z=Tr(()=>{I==="tooltip"?mOe(()=>{var qe,it;(qe=W.current)!=null&&qe.contains(uc(document))||(it=g.current)!=null&&it.contains(uc(document))||T()}):T()}),[K,ee,se]=h3e(i,Z),he=q.useRef(null),ye=mo(he,g),_e=mo(ye,K),ae=qe=>{qe.key==="Escape"&&(qe.stopPropagation(),T())},be=(s==null?void 0:s.desktopTransition)??w?Xy:Wb,Te=(s==null?void 0:s.desktopTrapFocus)??SQ,Ae=(s==null?void 0:s.desktopPaper)??u3e,Re=(s==null?void 0:s.popper)??c3e,He=xo({elementType:Re,externalSlotProps:c==null?void 0:c.popper,additionalProps:{transition:!0,role:I??void 0,open:i,placement:r,anchorEl:k,onKeyDown:ae},className:j.root,ownerState:V}),Se=q.useMemo(()=>Tt({},V,{popperPlacement:He.placement}),[V,He.placement]);return $.jsx(Re,Tt({},He,{children:({TransitionProps:qe})=>$.jsx(Te,Tt({open:i,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:I==="tooltip",isEnabled:()=>!0},c==null?void 0:c.desktopTrapFocus,{children:$.jsx(be,Tt({},qe,c==null?void 0:c.desktopTransition,{onExited:it=>{var tt,Oe,Je;D==null||D(),(Oe=(tt=c==null?void 0:c.desktopTransition)==null?void 0:tt.onExited)==null||Oe.call(tt,it),(Je=qe==null?void 0:qe.onExited)==null||Je.call(qe)},children:$.jsx(f3e,{PaperComponent:Ae,ownerState:Se,ref:_e,onPaperClick:ee,onPaperTouchStart:se,paperClasses:j.paper,paperSlotProps:c==null?void 0:c.desktopPaper,children:n})}))}))}))}function CH(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function m3e(e,t){const[n,r]=q.useState(CH);return $s(()=>{const s=()=>{r(CH())};return window.addEventListener("orientationchange",s),()=>{window.removeEventListener("orientationchange",s)}},[]),pOe(e,["hours","minutes","seconds"])?"portrait":t??n}function g3e(e){const{props:t,valueManager:n,validator:r}=e,{value:s,defaultValue:c,onChange:h,referenceDate:i,timezone:g,onAccept:w,closeOnSelect:T,open:A,onOpen:D,onClose:k}=t,{current:I}=q.useRef(c),{current:F}=q.useRef(s!==void 0),{current:j}=q.useRef(A!==void 0),V=us(),{timezone:W,value:Z,handleValueChange:K}=cE({name:"a picker component",timezone:g,value:s,defaultValue:I,referenceDate:i,onChange:h,valueManager:n}),[ee,se]=q.useState(()=>({open:!1,lastExternalValue:Z,clockShallowValue:void 0,lastCommittedValue:Z,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:he}=wee({props:t,validator:r,timezone:W,value:Z,onError:t.onError}),ye=Tr(Te=>{const Ae=typeof Te=="function"?Te(ee.open):Te;j||se(Re=>Tt({},Re,{open:Ae})),Ae&&D&&D(),Ae||k==null||k()}),_e=Tr((Te,Ae)=>{const{changeImportance:Re="accept",skipPublicationIfPristine:He=!1,validationError:Se,shortcut:qe,shouldClose:it=Re==="accept"}=Ae??{};let tt,Oe;!He&&!F&&!ee.hasBeenModifiedSinceMount?(tt=!0,Oe=Re==="accept"):(tt=!n.areValuesEqual(V,Te,Z),Oe=Re==="accept"&&!n.areValuesEqual(V,Te,ee.lastCommittedValue)),se(wt=>Tt({},wt,{clockShallowValue:tt?void 0:wt.clockShallowValue,lastCommittedValue:Oe?Te:wt.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let Je=null;const yt=()=>(Je||(Je={validationError:Se??he(Te)},qe&&(Je.shortcut=qe)),Je);tt&&K(Te,yt()),Oe&&w&&w(Te,yt()),it&&ye(!1)});Z!==ee.lastExternalValue&&se(Te=>Tt({},Te,{lastExternalValue:Z,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const ae=Tr((Te,Ae="partial")=>{if(Ae==="shallow"){se(Re=>Tt({},Re,{clockShallowValue:Te,hasBeenModifiedSinceMount:!0}));return}_e(Te,{changeImportance:Ae==="finish"&&T?"accept":"set"})});q.useEffect(()=>{if(j){if(A===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");se(Te=>Tt({},Te,{open:A}))}},[j,A]);const be=q.useMemo(()=>n.cleanValue(V,ee.clockShallowValue===void 0?Z:ee.clockShallowValue),[V,n,ee.clockShallowValue,Z]);return{timezone:W,state:ee,setValue:_e,setValueFromView:ae,setOpen:ye,value:Z,viewValue:be}}const y3e=["className","sx"],Hee=({ref:e,props:t,valueManager:n,valueType:r,variant:s,validator:c,onPopperExited:h,autoFocusView:i,rendererInterceptor:g,localeText:w,viewContainerRole:T,getStepNavigation:A})=>{const{views:D,view:k,openTo:I,onViewChange:F,viewRenderers:j,reduceAnimations:V,orientation:W,disableOpenPicker:Z,closeOnSelect:K,disabled:ee,readOnly:se,formatDensity:he,enableAccessibleFieldDOMStructure:ye,selectedSections:_e,onSelectedSectionsChange:ae,format:be,label:Te,autoFocus:Ae,name:Re}=t,{className:He,sx:Se}=t,qe=vi(t,y3e),it=tm(),tt=us(),Oe=Uee(V),Je=m3e(D,W),{current:yt}=q.useRef(I??null),[wt,$t]=q.useState(null),It=q.useRef(null),vt=q.useRef(null),sn=q.useRef(null),Rn=mo(e,sn),{timezone:yn,state:Qt,setOpen:Jt,setValue:fn,setValueFromView:Bt,value:Kt,viewValue:_n}=g3e({props:t,valueManager:n,validator:c}),{view:an,setView:Ft,defaultView:kn,focusedView:Yn,setFocusedView:wn,setValueAndGoToNextView:Vn,goToNextStep:ut,hasNextStep:gn,hasSeveralSteps:Rt}=yee({view:k,views:D,openTo:I,onChange:Bt,onViewChange:F,autoFocus:i,getStepNavigation:A}),Wt=Tr(()=>fn(n.emptyValue)),zn=Tr(()=>fn(n.getTodayValue(tt,yn,r))),Un=Tr(()=>fn(Kt)),mr=Tr(()=>fn(Qt.lastCommittedValue,{skipPublicationIfPristine:!0})),Xn=Tr(()=>{fn(Kt,{skipPublicationIfPristine:!0})}),{hasUIView:or,viewModeLookup:En,timeViewsCount:Fr}=q.useMemo(()=>D.reduce((Pr,De)=>{const re=j[De]==null?"field":"UI";return Pr.viewModeLookup[De]=re,re==="UI"&&(Pr.hasUIView=!0,rOe(De)&&(Pr.timeViewsCount+=1)),Pr},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[j,D]),Er=En[an],_r=Tr(()=>Er),[nr,Wr]=q.useState(Er==="UI"?an:null);nr!==an&&En[an]==="UI"&&Wr(an),$s(()=>{Er==="field"&&Qt.open&&(Jt(!1),setTimeout(()=>{var Pr,De;(Pr=vt==null?void 0:vt.current)==null||Pr.setSelectedSections(an),(De=vt==null?void 0:vt.current)==null||De.focusField(an)}))},[an]),$s(()=>{if(!Qt.open)return;let Pr=an;Er==="field"&&nr!=null&&(Pr=nr),Pr!==kn&&En[Pr]==="UI"&&En[kn]==="UI"&&(Pr=kn),Pr!==an&&Ft(Pr),wn(Pr,!0)},[Qt.open]);const wr=q.useMemo(()=>({isPickerValueEmpty:n.areValuesEqual(tt,Kt,n.emptyValue),isPickerOpen:Qt.open,isPickerDisabled:t.disabled??!1,isPickerReadOnly:t.readOnly??!1,pickerOrientation:Je,pickerVariant:s}),[tt,n,Kt,Qt.open,Je,s,t.disabled,t.readOnly]),Rr=q.useMemo(()=>Z||!or?"hidden":ee||se?"disabled":"enabled",[Z,or,ee,se]),Di=Tr(ut),Wo=q.useMemo(()=>K&&!Rt?[]:["cancel","nextOrAccept"],[K,Rt]),ko=q.useMemo(()=>({setValue:fn,setOpen:Jt,clearValue:Wt,setValueToToday:zn,acceptValueChanges:Un,cancelValueChanges:mr,setView:Ft,goToNextStep:Di}),[fn,Jt,Wt,zn,Un,mr,Ft,Di]),Ro=q.useMemo(()=>Tt({},ko,{value:Kt,timezone:yn,open:Qt.open,views:D,view:nr,initialView:yt,disabled:ee??!1,readOnly:se??!1,autoFocus:Ae??!1,variant:s,orientation:Je,popupRef:It,reduceAnimations:Oe,triggerRef:$t,triggerStatus:Rr,hasNextStep:gn,fieldFormat:be??"",name:Re,label:Te,rootSx:Se,rootRef:Rn,rootClassName:He}),[ko,Kt,Rn,s,Je,Oe,ee,se,be,He,Re,Te,Se,Rr,gn,yn,Qt.open,nr,D,yt,Ae]),bl=q.useMemo(()=>({dismissViews:Xn,ownerState:wr,hasUIView:or,getCurrentViewMode:_r,rootRefObject:sn,labelId:it,triggerElement:wt,viewContainerRole:T,defaultActionBarActions:Wo,onPopperExited:h}),[Xn,wr,or,_r,it,wt,T,Wo,h]),oa=q.useMemo(()=>({formatDensity:he,enableAccessibleFieldDOMStructure:ye,selectedSections:_e,onSelectedSectionsChange:ae,fieldRef:vt}),[he,ye,_e,ae,vt]);return{providerProps:{localeText:w,contextValue:Ro,privateContextValue:bl,actionsContextValue:ko,fieldPrivateContextValue:oa,isValidContextValue:Pr=>{const De=c({adapter:tt,value:Pr,timezone:yn,props:t});return!n.hasError(De)}},renderCurrentView:()=>{if(nr==null)return null;const Pr=j[nr];if(Pr==null)return null;const De=Tt({},qe,{views:D,timezone:yn,value:_n,onChange:Vn,view:nr,onViewChange:Ft,showViewSwitcher:Fr>1,timeViewsCount:Fr},T==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:Yn,onFocusedViewChange:wn});return g?$.jsx(g,{viewRenderers:j,popperView:nr,rendererProps:De}):Pr(De)},ownerState:wr}};function Gee(e){return fr("MuiPickersLayout",e)}const U_=pr("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),v3e=["actions"],_3e=Ot(cEe,{name:"MuiPickersLayout",slot:"ActionBar"})({});function x3e(e){const{actions:t}=e,n=vi(e,v3e),r=mv(),{clearValue:s,setValueToToday:c,acceptValueChanges:h,cancelValueChanges:i,goToNextStep:g,hasNextStep:w}=_1();if(t==null||t.length===0)return null;const T=t==null?void 0:t.map(A=>{switch(A){case"clear":return $.jsx(ms,{onClick:s,children:r.clearButtonLabel},A);case"cancel":return $.jsx(ms,{onClick:i,children:r.cancelButtonLabel},A);case"accept":return $.jsx(ms,{onClick:h,children:r.okButtonLabel},A);case"today":return $.jsx(ms,{onClick:c,children:r.todayButtonLabel},A);case"next":return $.jsx(ms,{onClick:g,children:r.nextStepButtonLabel},A);case"nextOrAccept":return w?$.jsx(ms,{onClick:g,children:r.nextStepButtonLabel},A):$.jsx(ms,{onClick:h,children:r.okButtonLabel},A);default:return null}});return $.jsx(_3e,Tt({},n,{children:T}))}const b3e=q.memo(x3e),w3e=["items","changeImportance"],S3e=["getValue"],T3e=Ot(lv,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function E3e(e){const{items:t,changeImportance:n="accept"}=e,r=vi(e,w3e),{setValue:s}=Vke(),c=jke();if(t==null||t.length===0)return null;const h=t.map(i=>{let{getValue:g}=i,w=vi(i,S3e);const T=g({isValid:c});return Tt({},w,{label:w.label,onClick:()=>{s(T,{changeImportance:n,shortcut:w})},disabled:!c(T)})});return $.jsx(T3e,Tt({dense:!0,sx:[{maxHeight:Yj,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:h.map(i=>$.jsx(_j,{children:$.jsx(N0,Tt({},i))},i.id??i.label))}))}const C3e=["ownerState"];function A3e(e){return e.view!==null}const M3e=(e,t)=>{const{pickerOrientation:n}=t;return dr({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},Gee,e)},R3e=e=>{const{ownerState:t,defaultActionBarActions:n}=Fl(),{view:r}=_1(),s=vc(),{children:c,slots:h,slotProps:i,classes:g}=e,w=q.useMemo(()=>Tt({},t,{layoutDirection:s?"rtl":"ltr"}),[t,s]),T=M3e(g,w),A=(h==null?void 0:h.actionBar)??b3e,D=xo({elementType:A,externalSlotProps:i==null?void 0:i.actionBar,additionalProps:{actions:n},className:T.actionBar,ownerState:w}),k=vi(D,C3e),I=$.jsx(A,Tt({},k)),F=h==null?void 0:h.toolbar,j=xo({elementType:F,externalSlotProps:i==null?void 0:i.toolbar,className:T.toolbar,ownerState:w}),V=A3e(j)&&F?$.jsx(F,Tt({},j)):null,W=c,Z=h==null?void 0:h.tabs,K=r&&Z?$.jsx(Z,Tt({className:T.tabs},i==null?void 0:i.tabs)):null,ee=(h==null?void 0:h.shortcuts)??E3e,se=xo({elementType:ee,externalSlotProps:i==null?void 0:i.shortcuts,className:T.shortcuts,ownerState:w}),he=r&&ee?$.jsx(ee,Tt({},se)):null;return{toolbar:V,content:W,tabs:K,actionBar:I,shortcuts:he,ownerState:w}},D3e=(e,t)=>{const{pickerOrientation:n}=t;return dr({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},Gee,e)},P3e=Ot("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${U_.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape"},style:{[`& .${U_.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${U_.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{pickerOrientation:"landscape",layoutDirection:"rtl"},style:{[`& .${U_.toolbar}`]:{gridColumn:3}}},{props:{pickerOrientation:"portrait"},style:{[`& .${U_.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${U_.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{pickerOrientation:"portrait",layoutDirection:"rtl"},style:{[`& .${U_.shortcuts}`]:{gridColumn:3}}}]}),I3e=Ot("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),Wee=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiPickersLayout"}),{toolbar:s,content:c,tabs:h,actionBar:i,shortcuts:g,ownerState:w}=R3e(r),{orientation:T,variant:A}=_1(),{sx:D,className:k,classes:I}=r,F=D3e(I,w);return $.jsxs(P3e,{ref:n,sx:D,className:Wn(F.root,k),ownerState:w,children:[T==="landscape"?g:s,T==="landscape"?s:g,$.jsx(I3e,{className:F.contentWrapper,ownerState:w,children:A==="desktop"?$.jsxs(q.Fragment,{children:[c,h]}):$.jsxs(q.Fragment,{children:[h,c]})}),i]})});function Yee(e){const{steps:t}=e;return oOe({steps:t,isViewMatchingStep:(n,r)=>r.views==null||r.views.includes(n),onStepChange:({step:n,defaultView:r,setView:s,view:c,views:h})=>{const i=n.views==null?r:n.views.find(g=>h.includes(g));i!==c&&s(i)}})}const k3e=["props","steps"],O3e=["ownerState"],L3e=e=>{var se;let{props:t,steps:n}=e,r=vi(e,k3e);const{slots:s,slotProps:c,label:h,inputRef:i,localeText:g}=t,w=Yee({steps:n}),{providerProps:T,renderCurrentView:A,ownerState:D}=Hee(Tt({},r,{props:t,localeText:g,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:w})),k=T.privateContextValue.labelId,I=((se=c==null?void 0:c.toolbar)==null?void 0:se.hidden)??!1,F=s.field,j=xo({elementType:F,externalSlotProps:c==null?void 0:c.field,additionalProps:Tt({},I&&{id:k}),ownerState:D}),V=vi(j,O3e),W=s.layout??Wee;let Z=k;I&&(h?Z=`${k}-label`:Z=void 0);const K=Tt({},c,{toolbar:Tt({},c==null?void 0:c.toolbar,{titleId:k}),popper:Tt({"aria-labelledby":Z},c==null?void 0:c.popper)});return{renderPicker:()=>$.jsx(mee,Tt({},T,{children:$.jsxs(Lee,{slots:s,slotProps:K,inputRef:i,children:[$.jsx(F,Tt({},V)),$.jsx(p3e,{slots:s,slotProps:K,children:$.jsx(W,Tt({},K==null?void 0:K.layout,{slots:s,slotProps:K,children:A()}))})]})}))}},Bb=({view:e,onViewChange:t,views:n,focusedView:r,onFocusedViewChange:s,value:c,defaultValue:h,referenceDate:i,onChange:g,className:w,classes:T,disableFuture:A,disablePast:D,minDate:k,maxDate:I,shouldDisableDate:F,shouldDisableMonth:j,shouldDisableYear:V,reduceAnimations:W,onMonthChange:Z,monthsPerRow:K,onYearChange:ee,yearsOrder:se,yearsPerRow:he,slots:ye,slotProps:_e,loading:ae,renderLoading:be,disableHighlightToday:Te,readOnly:Ae,disabled:Re,showDaysOutsideCurrentMonth:He,dayOfWeekFormatter:Se,sx:qe,autoFocus:it,fixedWeekNumber:tt,displayWeekNumber:Oe,timezone:Je})=>$.jsx(Wze,{view:e,onViewChange:t,views:n.filter(uH),focusedView:r&&uH(r)?r:null,onFocusedViewChange:s,value:c,defaultValue:h,referenceDate:i,onChange:g,className:w,classes:T,disableFuture:A,disablePast:D,minDate:k,maxDate:I,shouldDisableDate:F,shouldDisableMonth:j,shouldDisableYear:V,reduceAnimations:W,onMonthChange:Z,monthsPerRow:K,onYearChange:ee,yearsOrder:se,yearsPerRow:he,slots:ye,slotProps:_e,loading:ae,renderLoading:be,disableHighlightToday:Te,readOnly:Ae,disabled:Re,showDaysOutsideCurrentMonth:He,dayOfWeekFormatter:Se,sx:qe,autoFocus:it,fixedWeekNumber:tt,displayWeekNumber:Oe,timezone:Je}),Xee=q.forwardRef(function(t,n){var g;const r=us(),s=qee(t,"MuiDesktopDatePicker"),c=Tt({day:Bb,month:Bb,year:Bb},s.viewRenderers),h=Tt({},s,{closeOnSelect:s.closeOnSelect??!0,viewRenderers:c,format:Uj(r,s,!1),yearsPerRow:s.yearsPerRow??4,slots:Tt({field:zee},s.slots),slotProps:Tt({},s.slotProps,{field:w=>{var T;return Tt({},Vb((T=s.slotProps)==null?void 0:T.field,w),ree(s))},toolbar:Tt({hidden:!0},(g=s.slotProps)==null?void 0:g.toolbar)})}),{renderPicker:i}=L3e({ref:n,props:h,valueManager:Zp,valueType:"date",validator:uE,steps:null});return i()});Xee.propTypes={autoFocus:nt.bool,className:nt.string,closeOnSelect:nt.bool,dayOfWeekFormatter:nt.func,defaultValue:nt.object,disabled:nt.bool,disableFuture:nt.bool,disableHighlightToday:nt.bool,disableOpenPicker:nt.bool,disablePast:nt.bool,displayWeekNumber:nt.bool,enableAccessibleFieldDOMStructure:nt.any,fixedWeekNumber:nt.number,format:nt.string,formatDensity:nt.oneOf(["dense","spacious"]),inputRef:JX,label:nt.node,loading:nt.bool,localeText:nt.object,maxDate:nt.object,minDate:nt.object,monthsPerRow:nt.oneOf([3,4]),name:nt.string,onAccept:nt.func,onChange:nt.func,onClose:nt.func,onError:nt.func,onMonthChange:nt.func,onOpen:nt.func,onSelectedSectionsChange:nt.func,onViewChange:nt.func,onYearChange:nt.func,open:nt.bool,openTo:nt.oneOf(["day","month","year"]),orientation:nt.oneOf(["landscape","portrait"]),readOnly:nt.bool,reduceAnimations:nt.bool,referenceDate:nt.object,renderLoading:nt.func,selectedSections:nt.oneOfType([nt.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),nt.number]),shouldDisableDate:nt.func,shouldDisableMonth:nt.func,shouldDisableYear:nt.func,showDaysOutsideCurrentMonth:nt.bool,slotProps:nt.object,slots:nt.object,sx:nt.oneOfType([nt.arrayOf(nt.oneOfType([nt.func,nt.object,nt.bool])),nt.func,nt.object]),timezone:nt.string,value:nt.object,view:nt.oneOf(["day","month","year"]),viewRenderers:nt.shape({day:nt.func,month:nt.func,year:nt.func}),views:nt.arrayOf(nt.oneOf(["day","month","year"]).isRequired),yearsOrder:nt.oneOf(["asc","desc"]),yearsPerRow:nt.oneOf([3,4])};const z3e=Ot(oEe)({[`& .${jS.container}`]:{outline:0},[`& .${jS.paper}`]:{outline:0,minWidth:TD}}),F3e=Ot(pEe)({"&:first-of-type":{padding:0}});function B3e(e){const{children:t,slots:n,slotProps:r}=e,{open:s}=_1(),{dismissViews:c,onPopperExited:h}=Fl(),i=(n==null?void 0:n.dialog)??z3e,g=(n==null?void 0:n.mobileTransition)??Xy;return $.jsx(i,Tt({open:s,onClose:()=>{c(),h==null||h()}},r==null?void 0:r.dialog,{TransitionComponent:g,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:n==null?void 0:n.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:$.jsx(F3e,{children:t})}))}const N3e=["props","steps"],j3e=["ownerState"],V3e=e=>{var se;let{props:t,steps:n}=e,r=vi(e,N3e);const{slots:s,slotProps:c,label:h,inputRef:i,localeText:g}=t,w=Yee({steps:n}),{providerProps:T,renderCurrentView:A,ownerState:D}=Hee(Tt({},r,{props:t,localeText:g,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:w})),k=T.privateContextValue.labelId,I=((se=c==null?void 0:c.toolbar)==null?void 0:se.hidden)??!1,F=s.field,j=xo({elementType:F,externalSlotProps:c==null?void 0:c.field,additionalProps:Tt({},I&&{id:k}),ownerState:D}),V=vi(j,j3e),W=s.layout??Wee;let Z=k;I&&(h?Z=`${k}-label`:Z=void 0);const K=Tt({},c,{toolbar:Tt({},c==null?void 0:c.toolbar,{titleId:k}),mobilePaper:Tt({"aria-labelledby":Z},c==null?void 0:c.mobilePaper)});return{renderPicker:()=>$.jsx(mee,Tt({},T,{children:$.jsxs(Lee,{slots:s,slotProps:K,inputRef:i,children:[$.jsx(F,Tt({},V)),$.jsx(B3e,{slots:s,slotProps:K,children:$.jsx(W,Tt({},K==null?void 0:K.layout,{slots:s,slotProps:K,children:A()}))})]})}))}},Zee=q.forwardRef(function(t,n){var g;const r=us(),s=qee(t,"MuiMobileDatePicker"),c=Tt({day:Bb,month:Bb,year:Bb},s.viewRenderers),h=Tt({},s,{viewRenderers:c,format:Uj(r,s,!1),slots:Tt({field:zee},s.slots),slotProps:Tt({},s.slotProps,{field:w=>{var T;return Tt({},Vb((T=s.slotProps)==null?void 0:T.field,w),ree(s))},toolbar:Tt({hidden:!1},(g=s.slotProps)==null?void 0:g.toolbar)})}),{renderPicker:i}=V3e({ref:n,props:h,valueManager:Zp,valueType:"date",validator:uE,steps:null});return i()});Zee.propTypes={autoFocus:nt.bool,className:nt.string,closeOnSelect:nt.bool,dayOfWeekFormatter:nt.func,defaultValue:nt.object,disabled:nt.bool,disableFuture:nt.bool,disableHighlightToday:nt.bool,disableOpenPicker:nt.bool,disablePast:nt.bool,displayWeekNumber:nt.bool,enableAccessibleFieldDOMStructure:nt.any,fixedWeekNumber:nt.number,format:nt.string,formatDensity:nt.oneOf(["dense","spacious"]),inputRef:JX,label:nt.node,loading:nt.bool,localeText:nt.object,maxDate:nt.object,minDate:nt.object,monthsPerRow:nt.oneOf([3,4]),name:nt.string,onAccept:nt.func,onChange:nt.func,onClose:nt.func,onError:nt.func,onMonthChange:nt.func,onOpen:nt.func,onSelectedSectionsChange:nt.func,onViewChange:nt.func,onYearChange:nt.func,open:nt.bool,openTo:nt.oneOf(["day","month","year"]),orientation:nt.oneOf(["landscape","portrait"]),readOnly:nt.bool,reduceAnimations:nt.bool,referenceDate:nt.object,renderLoading:nt.func,selectedSections:nt.oneOfType([nt.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),nt.number]),shouldDisableDate:nt.func,shouldDisableMonth:nt.func,shouldDisableYear:nt.func,showDaysOutsideCurrentMonth:nt.bool,slotProps:nt.object,slots:nt.object,sx:nt.oneOfType([nt.arrayOf(nt.oneOfType([nt.func,nt.object,nt.bool])),nt.func,nt.object]),timezone:nt.string,value:nt.object,view:nt.oneOf(["day","month","year"]),viewRenderers:nt.shape({day:nt.func,month:nt.func,year:nt.func}),views:nt.arrayOf(nt.oneOf(["day","month","year"]).isRequired),yearsOrder:nt.oneOf(["asc","desc"]),yearsPerRow:nt.oneOf([3,4])};const U3e=["desktopModeMediaQuery"],AH=q.forwardRef(function(t,n){const r=qs({props:t,name:"MuiDatePicker"}),{desktopModeMediaQuery:s=gOe}=r,c=vi(r,U3e);return f1(s,{defaultMatches:!0})?$.jsx(Xee,Tt({ref:n},c)):$.jsx(Zee,Tt({ref:n},c))}),$3e={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},q3e={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class H3e{constructor(t){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=$3e,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=h=>typeof h>"u"?new Date:h===null?null:new Date(h),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=h=>h,this.toJsDate=h=>h,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=h=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return h.match(i).map(g=>{const w=g[0];if(w==="p"||w==="P"){const T=this.longFormatters[w];return T(g,this.locale.formatLong)}return g}).join("")},this.formatNumber=h=>h,this.getDayOfWeek=h=>h.getDay()+1;const{locale:n,formats:r,longFormatters:s,lib:c}=t;this.locale=n,this.formats=Tt({},q3e,r),this.longFormatters=s,this.lib=c||"date-fns"}}class G3e extends H3e{constructor({locale:t,formats:n}={}){super({locale:t??sE,formats:n,longFormatters:sR}),this.parse=(r,s)=>r===""?null:YMe(r,s,new Date,{locale:this.locale}),this.isValid=r=>r==null?!1:dJ(r),this.format=(r,s)=>this.formatByString(r,this.formats[s]),this.formatByString=(r,s)=>vJ(r,s,{locale:this.locale}),this.isEqual=(r,s)=>r===null&&s===null?!0:r===null||s===null?!1:JAe(r,s),this.isSameYear=(r,s)=>QMe(r,s),this.isSameMonth=(r,s)=>KMe(r,s),this.isSameDay=(r,s)=>jCe(r,s),this.isSameHour=(r,s)=>ZMe(r,s),this.isAfter=(r,s)=>gk(r,s),this.isAfterYear=(r,s)=>gk(r,D8(s)),this.isAfterDay=(r,s)=>gk(r,HF(s)),this.isBefore=(r,s)=>yk(r,s),this.isBeforeYear=(r,s)=>yk(r,this.startOfYear(s)),this.isBeforeDay=(r,s)=>yk(r,this.startOfDay(s)),this.isWithinRange=(r,[s,c])=>JMe(r,{start:s,end:c}),this.startOfYear=r=>fJ(r),this.startOfMonth=r=>YCe(r),this.startOfWeek=r=>Xp(r,{locale:this.locale}),this.startOfDay=r=>pT(r),this.endOfYear=r=>D8(r),this.endOfMonth=r=>hJ(r),this.endOfWeek=r=>XCe(r,{locale:this.locale}),this.endOfDay=r=>HF(r),this.addYears=(r,s)=>BCe(r,s),this.addMonths=(r,s)=>lJ(r,s),this.addWeeks=(r,s)=>FCe(r,s),this.addDays=(r,s)=>pD(r,s),this.addHours=(r,s)=>PCe(r,s),this.addMinutes=(r,s)=>LCe(r,s),this.addSeconds=(r,s)=>zCe(r,s),this.getYear=r=>QAe(r),this.getMonth=r=>ZAe(r),this.getDate=r=>$Ae(r),this.getHours=r=>GAe(r),this.getMinutes=r=>XAe(r),this.getSeconds=r=>KAe(r),this.getMilliseconds=r=>YAe(r),this.setYear=(r,s)=>sRe(r,s),this.setMonth=(r,s)=>eRe(r,s),this.setDate=(r,s)=>tRe(r,s),this.setHours=(r,s)=>nRe(r,s),this.setMinutes=(r,s)=>iRe(r,s),this.setSeconds=(r,s)=>oRe(r,s),this.setMilliseconds=(r,s)=>rRe(r,s),this.getDaysInMonth=r=>_J(r),this.getWeekArray=r=>{const s=this.startOfWeek(this.startOfMonth(r)),c=this.endOfWeek(this.endOfMonth(r));let h=0,i=s;const g=[];for(;this.isBefore(i,c);){const w=Math.floor(h/7);g[w]=g[w]||[],g[w].push(i),i=this.addDays(i,1),h+=1}return g},this.getWeekNumber=r=>Ej(r,{locale:this.locale}),this.getYearRange=([r,s])=>{const c=this.startOfYear(r),h=this.endOfYear(s),i=[];let g=c;for(;this.isBefore(g,h);)i.push(g),g=this.addYears(g,1);return i}}}var Sk,MH;function W3e(){if(MH)return Sk;MH=1;function e(V){this._maxSize=V,this.clear()}e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(V){return this._values[V]},e.prototype.set=function(V,W){return this._size>=this._maxSize&&this.clear(),V in this._values||this._size++,this._values[V]=W};var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,c=/^\s*(['"]?)(.*?)(\1)\s*$/,h=512,i=new e(h),g=new e(h),w=new e(h);Sk={Cache:e,split:A,normalizePath:T,setter:function(V){var W=T(V);return g.get(V)||g.set(V,function(K,ee){for(var se=0,he=W.length,ye=K;se<he-1;){var _e=W[se];if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return K;ye=ye[W[se++]]}ye[W[se]]=ee})},getter:function(V,W){var Z=T(V);return w.get(V)||w.set(V,function(ee){for(var se=0,he=Z.length;se<he;)if(ee!=null||!W)ee=ee[Z[se++]];else return;return ee})},join:function(V){return V.reduce(function(W,Z){return W+(k(Z)||n.test(Z)?"["+Z+"]":(W?".":"")+Z)},"")},forEach:function(V,W,Z){D(Array.isArray(V)?V:A(V),W,Z)}};function T(V){return i.get(V)||i.set(V,A(V).map(function(W){return W.replace(c,"$2")}))}function A(V){return V.match(t)||[""]}function D(V,W,Z){var K=V.length,ee,se,he,ye;for(se=0;se<K;se++)ee=V[se],ee&&(j(ee)&&(ee='"'+ee+'"'),ye=k(ee),he=!ye&&/^\d+$/.test(ee),W.call(Z,ee,ye,he,se,V))}function k(V){return typeof V=="string"&&V&&["'",'"'].indexOf(V.charAt(0))!==-1}function I(V){return V.match(r)&&!V.match(n)}function F(V){return s.test(V)}function j(V){return!k(V)&&(I(V)||F(V))}return Sk}var h0=W3e(),Tk,RH;function Y3e(){if(RH)return Tk;RH=1;const e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,t=T=>T.match(e)||[],n=T=>T[0].toUpperCase()+T.slice(1),r=(T,A)=>t(T).join(A).toLowerCase(),s=T=>t(T).reduce((A,D)=>`${A}${A?D[0].toUpperCase()+D.slice(1).toLowerCase():D.toLowerCase()}`,"");return Tk={words:t,upperFirst:n,camelCase:s,pascalCase:T=>n(s(T)),snakeCase:T=>r(T,"_"),kebabCase:T=>r(T,"-"),sentenceCase:T=>n(r(T," ")),titleCase:T=>t(T).map(n).join(" ")},Tk}var Ek=Y3e(),vA={exports:{}},DH;function X3e(){if(DH)return vA.exports;DH=1,vA.exports=function(s){return e(t(s),s)},vA.exports.array=e;function e(s,c){var h=s.length,i=new Array(h),g={},w=h,T=n(c),A=r(s);for(c.forEach(function(k){if(!A.has(k[0])||!A.has(k[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});w--;)g[w]||D(s[w],w,new Set);return i;function D(k,I,F){if(F.has(k)){var j;try{j=", node was:"+JSON.stringify(k)}catch{j=""}throw new Error("Cyclic dependency"+j)}if(!A.has(k))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(k));if(!g[I]){g[I]=!0;var V=T.get(k)||new Set;if(V=Array.from(V),I=V.length){F.add(k);do{var W=V[--I];D(W,A.get(W),F)}while(I);F.delete(k)}i[--h]=k}}}function t(s){for(var c=new Set,h=0,i=s.length;h<i;h++){var g=s[h];c.add(g[0]),c.add(g[1])}return Array.from(c)}function n(s){for(var c=new Map,h=0,i=s.length;h<i;h++){var g=s[h];c.has(g[0])||c.set(g[0],new Set),c.has(g[1])||c.set(g[1],new Set),c.get(g[0]).add(g[1])}return c}function r(s){for(var c=new Map,h=0,i=s.length;h<i;h++)c.set(s[h],h);return c}return vA.exports}var Z3e=X3e();const K3e=_a(Z3e),Q3e=Object.prototype.toString,J3e=Error.prototype.toString,eFe=RegExp.prototype.toString,tFe=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",nFe=/^Symbol\((.*)\)(.*)$/;function rFe(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function PH(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return rFe(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return tFe.call(e).replace(nFe,"Symbol($1)");const r=Q3e.call(e).slice(8,-1);return r==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):r==="Error"||e instanceof Error?"["+J3e.call(e)+"]":r==="RegExp"?eFe.call(e):null}function Cg(e,t){let n=PH(e,t);return n!==null?n:JSON.stringify(e,function(r,s){let c=PH(this[r],t);return c!==null?c:s},2)}function Kee(e){return e==null?[]:[].concat(e)}let Qee,Jee,ete,iFe=/\$\{\s*(\w+)\s*\}/g;Qee=Symbol.toStringTag;class IH{constructor(t,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Qee]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],Kee(t).forEach(c=>{if(uu.isError(c)){this.errors.push(...c.errors);const h=c.inner.length?c.inner:[c];this.inner.push(...h)}else this.errors.push(c)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}Jee=Symbol.hasInstance;ete=Symbol.toStringTag;class uu extends Error{static formatError(t,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof t=="string"?t.replace(iFe,(s,c)=>Cg(n[c])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,r,s,c){const h=new IH(t,n,r,s);if(c)return h;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[ete]="Error",this.name=h.name,this.message=h.message,this.type=h.type,this.value=h.value,this.path=h.path,this.errors=h.errors,this.inner=h.inner,Error.captureStackTrace&&Error.captureStackTrace(this,uu)}static[Jee](t){return IH[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Mp={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Cg(r,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${Cg(n,!0)}\``+s:`${e} must match the configured type. The validated value was: \`${Cg(n,!0)}\``+s}},lu={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},oFe={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},oB={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},sB={isValue:"${path} field must be ${value}"},sM={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},aM={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},sFe={notType:e=>{const{path:t,value:n,spec:r}=e,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${t} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Cg(n,!0)}\``;if(n.length>s)return`${t} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Cg(n,!0)}\``}return uu.formatError(Mp.notType,e)}};Object.assign(Object.create(null),{mixed:Mp,string:lu,number:oFe,date:oB,object:sM,array:aM,boolean:sB,tuple:sFe});const AD=e=>e&&e.__isYupSchema__;class dR{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:c}=n,h=typeof r=="function"?r:(...i)=>i.every(g=>g===r);return new dR(t,(i,g)=>{var w;let T=h(...i)?s:c;return(w=T==null?void 0:T(g))!=null?w:g})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let r=this.refs.map(c=>c.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,t,n);if(s===void 0||s===t)return t;if(!AD(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const _A={context:"$",value:"."};function c7e(e,t){return new gv(e,t)}class gv{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===_A.context,this.isValue=this.key[0]===_A.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?_A.context:this.isValue?_A.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&h0.getter(this.path,!0),this.map=n.map}getValue(t,n,r){let s=this.isContext?r:this.isValue?t:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}gv.prototype.__isYupRef=!0;const Sg=e=>e==null;function ib(e){function t({value:n,path:r="",options:s,originalValue:c,schema:h},i,g){const{name:w,test:T,params:A,message:D,skipAbsent:k}=e;let{parent:I,context:F,abortEarly:j=h.spec.abortEarly,disableStackTrace:V=h.spec.disableStackTrace}=s;function W(be){return gv.isRef(be)?be.getValue(n,I,F):be}function Z(be={}){const Te=Object.assign({value:n,originalValue:c,label:h.spec.label,path:be.path||r,spec:h.spec,disableStackTrace:be.disableStackTrace||V},A,be.params);for(const Re of Object.keys(Te))Te[Re]=W(Te[Re]);const Ae=new uu(uu.formatError(be.message||D,Te),n,Te.path,be.type||w,Te.disableStackTrace);return Ae.params=Te,Ae}const K=j?i:g;let ee={path:r,parent:I,type:w,from:s.from,createError:Z,resolve:W,options:s,originalValue:c,schema:h};const se=be=>{uu.isError(be)?K(be):be?g(null):K(Z())},he=be=>{uu.isError(be)?K(be):i(be)};if(k&&Sg(n))return se(!0);let _e;try{var ae;if(_e=T.call(ee,n,ee),typeof((ae=_e)==null?void 0:ae.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${ee.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(_e).then(se,he)}}catch(be){he(be);return}se(_e)}return t.OPTIONS=e,t}function aFe(e,t,n,r=n){let s,c,h;return t?(h0.forEach(t,(i,g,w)=>{let T=g?i.slice(1,i.length-1):i;e=e.resolve({context:r,parent:s,value:n});let A=e.type==="tuple",D=w?parseInt(T,10):0;if(e.innerType||A){if(A&&!w)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${h}" must contain an index to the tuple element, e.g. "${h}[0]"`);if(n&&D>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${i}, in the path: ${t}. because there is no value at that index. `);s=n,n=n&&n[D],e=A?e.spec.types[D]:e.innerType}if(!w){if(!e.fields||!e.fields[T])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${h} which is a type: "${e.type}")`);s=n,n=n&&n[T],e=e.fields[T]}c=T,h=g?"["+i+"]":"."+i}),{schema:e,parent:s,parentPath:c}):{parent:s,parentPath:t,schema:e}}class hR extends Set{describe(){const t=[];for(const n of this.values())t.push(gv.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const r of this.values())n.push(t(r));return n}clone(){return new hR(this.values())}merge(t,n){const r=this.clone();return t.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function Ab(e,t=new Map){if(AD(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=Ab(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,s]of e.entries())n.set(r,Ab(s,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(Ab(r,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[r,s]of Object.entries(e))n[r]=Ab(s,t)}else throw Error(`Unable to clone ${e}`);return n}class fh{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new hR,this._blacklist=new hR,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Mp.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Ab(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let r=t(this);return this._mutate=n,r}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,r=t.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),r._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(c=>{t.tests.forEach(h=>{c.test(h.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,c)=>c.resolve(s,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,r,s,c;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(r=t.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=t.recursive)!=null?s:this.spec.recursive,disableStackTrace:(c=t.disableStackTrace)!=null?c:this.spec.disableStackTrace})}cast(t,n={}){let r=this.resolve(Object.assign({value:t},n)),s=n.assert==="ignore-optionality",c=r._cast(t,n);if(n.assert!==!1&&!r.isType(c)){if(s&&Sg(c))return c;let h=Cg(t),i=Cg(c);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${h} 
`+(i!==h?`result of cast: ${i}`:""))}return c}_cast(t,n){let r=t===void 0?t:this.transforms.reduce((s,c)=>c.call(this,s,t,this),t);return r===void 0&&(r=this.getDefault(n)),r}_validate(t,n={},r,s){let{path:c,originalValue:h=t,strict:i=this.spec.strict}=n,g=t;i||(g=this._cast(g,Object.assign({assert:!1},n)));let w=[];for(let T of Object.values(this.internalTests))T&&w.push(T);this.runTests({path:c,value:g,originalValue:h,options:n,tests:w},r,T=>{if(T.length)return s(T,g);this.runTests({path:c,value:g,originalValue:h,options:n,tests:this.tests},r,s)})}runTests(t,n,r){let s=!1,{tests:c,value:h,originalValue:i,path:g,options:w}=t,T=F=>{s||(s=!0,n(F,h))},A=F=>{s||(s=!0,r(F,h))},D=c.length,k=[];if(!D)return A([]);let I={value:h,originalValue:i,path:g,options:w,schema:this};for(let F=0;F<c.length;F++){const j=c[F];j(I,T,function(W){W&&(Array.isArray(W)?k.push(...W):k.push(W)),--D<=0&&A(k)})}}asNestedTest({key:t,index:n,parent:r,parentPath:s,originalParent:c,options:h}){const i=t??n;if(i==null)throw TypeError("Must include `key` or `index` for nested validations");const g=typeof i=="number";let w=r[i];const T=Object.assign({},h,{strict:!0,parent:r,value:w,originalValue:c[i],key:void 0,[g?"index":"key"]:i,path:g||i.includes(".")?`${s||""}[${g?i:`"${i}"`}]`:(s?`${s}.`:"")+t});return(A,D,k)=>this.resolve(T)._validate(w,T,D,k)}validate(t,n){var r;let s=this.resolve(Object.assign({},n,{value:t})),c=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((h,i)=>s._validate(t,n,(g,w)=>{uu.isError(g)&&(g.value=w),i(g)},(g,w)=>{g.length?i(new uu(g,w,void 0,void 0,c)):h(w)}))}validateSync(t,n){var r;let s=this.resolve(Object.assign({},n,{value:t})),c,h=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(t,Object.assign({},n,{sync:!0}),(i,g)=>{throw uu.isError(i)&&(i.value=g),i},(i,g)=>{if(i.length)throw new uu(i,t,void 0,void 0,h);c=g}),c}isValid(t,n){return this.validate(t,n).then(()=>!0,r=>{if(uu.isError(r))return!1;throw r})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(r){if(uu.isError(r))return!1;throw r}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):Ab(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const r=this.clone({nullable:t});return r.internalTests.nullable=ib({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(t,n){const r=this.clone({optional:t});return r.internalTests.optionality=ib({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(t=Mp.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Mp.notNull){return this.nullability(!1,t)}required(t=Mp.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=Mp.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=ib(n),c=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(h=>!(h.OPTIONS.name===n.name&&(c||h.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let r=this.clone(),s=Kee(t).map(c=>new gv(c));return s.forEach(c=>{c.isSibling&&r.deps.push(c.key)}),r.conditions.push(typeof n=="function"?new dR(s,n):dR.fromOptions(s,n)),r}typeError(t){let n=this.clone();return n.internalTests.typeError=ib({message:t,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=Mp.oneOf){let r=this.clone();return t.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=ib({message:n,name:"oneOf",skipAbsent:!0,test(s){let c=this.schema._whitelist,h=c.resolveAll(this.resolve);return h.includes(s)?!0:this.createError({params:{values:Array.from(c).join(", "),resolved:h}})}}),r}notOneOf(t,n=Mp.notOneOf){let r=this.clone();return t.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=ib({message:n,name:"notOneOf",test(s){let c=this.schema._blacklist,h=c.resolveAll(this.resolve);return h.includes(s)?this.createError({params:{values:Array.from(c).join(", "),resolved:h}}):!0}}),r}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:r,meta:s,optional:c,nullable:h}=n.spec;return{meta:s,label:r,optional:c,nullable:h,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(g=>({name:g.OPTIONS.name,params:g.OPTIONS.params})).filter((g,w,T)=>T.findIndex(A=>A.name===g.name)===w)}}}fh.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])fh.prototype[`${e}At`]=function(t,n,r={}){const{parent:s,parentPath:c,schema:h}=aFe(this,t,n,r.context);return h[e](s&&s[c],Object.assign({},r,{parent:s,path:t}))};for(const e of["equals","is"])fh.prototype[e]=fh.prototype.oneOf;for(const e of["not","nope"])fh.prototype[e]=fh.prototype.notOneOf;function lFe(){return new tte}class tte extends fh{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(r.spec.coerce&&!r.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=sB.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(n){return Sg(n)||n===!0}})}isFalse(t=sB.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(n){return Sg(n)||n===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}lFe.prototype=tte.prototype;const cFe=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function uFe(e){const t=aB(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function aB(e){var t,n;const r=cFe.exec(e);return r?{year:gg(r[1]),month:gg(r[2],1)-1,day:gg(r[3],1),hour:gg(r[4]),minute:gg(r[5]),second:gg(r[6]),millisecond:r[7]?gg(r[7].substring(0,3)):0,precision:(t=(n=r[7])==null?void 0:n.length)!=null?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:gg(r[10]),minuteOffset:gg(r[11])}:null}function gg(e,t=0){return Number(e)||t}let dFe=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hFe=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,fFe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,pFe="^\\d{4}-\\d{2}-\\d{2}",mFe="\\d{2}:\\d{2}:\\d{2}",gFe="(([+-]\\d{2}(:?\\d{2})?)|Z)",yFe=new RegExp(`${pFe}T${mFe}(\\.\\d+)?${gFe}$`),vFe=e=>Sg(e)||e===e.trim(),_Fe={}.toString();function Rp(){return new nte}class nte extends fh{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce||r.isType(t)||Array.isArray(t))return t;const s=t!=null&&t.toString?t.toString():t;return s===_Fe?t:s})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||Mp.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=lu.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n=lu.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n=lu.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}matches(t,n){let r=!1,s,c;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:c}=n:s=n),this.test({name:c||"matches",message:s||lu.matches,params:{regex:t},skipAbsent:!0,test:h=>h===""&&r||h.search(t)!==-1})}email(t=lu.email){return this.matches(dFe,{name:"email",message:t,excludeEmptyString:!0})}url(t=lu.url){return this.matches(hFe,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=lu.uuid){return this.matches(fFe,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",r,s;return t&&(typeof t=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=t:n=t),this.matches(yFe,{name:"datetime",message:n||lu.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||lu.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:c=>{if(!c||r)return!0;const h=aB(c);return h?!!h.z:!1}}).test({name:"datetime_precision",message:n||lu.datetime_precision,params:{precision:s},skipAbsent:!0,test:c=>{if(!c||s==null)return!0;const h=aB(c);return h?h.precision===s:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=lu.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:vFe})}lowercase(t=lu.lowercase){return this.transform(n=>Sg(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Sg(n)||n===n.toLowerCase()})}uppercase(t=lu.uppercase){return this.transform(n=>Sg(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Sg(n)||n===n.toUpperCase()})}}Rp.prototype=nte.prototype;let rte=new Date(""),xFe=e=>Object.prototype.toString.call(e)==="[object Date]";function fR(){return new hE}class hE extends fh{constructor(){super({type:"date",check(t){return xFe(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,r)=>!r.spec.coerce||r.isType(t)||t===null?t:(t=uFe(t),isNaN(t)?hE.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let r;if(gv.isRef(t))r=t;else{let s=this.cast(t);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(t,n=oB.min){let r=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(t,n=oB.max){let r=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}hE.INVALID_DATE=rte;fR.prototype=hE.prototype;fR.INVALID_DATE=rte;function bFe(e,t=[]){let n=[],r=new Set,s=new Set(t.map(([h,i])=>`${h}-${i}`));function c(h,i){let g=h0.split(h)[0];r.add(g),s.has(`${i}-${g}`)||n.push([i,g])}for(const h of Object.keys(e)){let i=e[h];r.add(h),gv.isRef(i)&&i.isSibling?c(i.path,h):AD(i)&&"deps"in i&&i.deps.forEach(g=>c(g,h))}return K3e.array(Array.from(r),n).reverse()}function kH(e,t){let n=1/0;return e.some((r,s)=>{var c;if((c=t.path)!=null&&c.includes(r))return n=s,!0}),n}function ite(e){return(t,n)=>kH(e,t)-kH(e,n)}const ote=(e,t,n)=>{if(typeof e!="string")return e;let r=e;try{r=JSON.parse(e)}catch{}return n.isType(r)?r:e};function lM(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=lM(r);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=lM(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(lM)}):"optional"in e?e.optional():e}const wFe=(e,t)=>{const n=[...h0.normalizePath(t)];if(n.length===1)return n[0]in e;let r=n.pop(),s=h0.getter(h0.join(n),!0)(e);return!!(s&&r in s)};let OH=e=>Object.prototype.toString.call(e)==="[object Object]";function LH(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(r=>n.indexOf(r)===-1)}const SFe=ite([]);function e5(e){return new ste(e)}class ste extends fh{constructor(t){super({type:"object",check(n){return OH(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=SFe,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var r;let s=super._cast(t,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let c=this.fields,h=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(s).filter(A=>!this._nodes.includes(A))),g={},w=Object.assign({},n,{parent:g,__validating:n.__validating||!1}),T=!1;for(const A of i){let D=c[A],k=A in s;if(D){let I,F=s[A];w.path=(n.path?`${n.path}.`:"")+A,D=D.resolve({value:F,context:n.context,parent:g});let j=D instanceof fh?D.spec:void 0,V=j==null?void 0:j.strict;if(j!=null&&j.strip){T=T||A in s;continue}I=!n.__validating||!V?D.cast(s[A],w):s[A],I!==void 0&&(g[A]=I)}else k&&!h&&(g[A]=s[A]);(k!==A in g||g[A]!==s[A])&&(T=!0)}return T?g:s}_validate(t,n={},r,s){let{from:c=[],originalValue:h=t,recursive:i=this.spec.recursive}=n;n.from=[{schema:this,value:h},...c],n.__validating=!0,n.originalValue=h,super._validate(t,n,r,(g,w)=>{if(!i||!OH(w)){s(g,w);return}h=h||w;let T=[];for(let A of this._nodes){let D=this.fields[A];!D||gv.isRef(D)||T.push(D.asNestedTest({options:n,key:A,parent:w,parentPath:n.path,originalParent:h}))}this.runTests({tests:T,value:w,originalValue:h,options:n},r,A=>{s(A.sort(this._sortErrors).concat(g),w)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),r=n.fields;for(let[s,c]of Object.entries(this.fields)){const h=r[s];r[s]=h===void 0?c:h}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const c=this.fields[r];let h=t;(s=h)!=null&&s.value&&(h=Object.assign({},h,{parent:h.value,value:h.value[r]})),n[r]=c&&"getDefault"in c?c.getDefault(h):void 0}),n}setFields(t,n){let r=this.clone();return r.fields=t,r._nodes=bFe(t,n),r._sortErrors=ite(Object.keys(t)),n&&(r._excludedEdges=n),r}shape(t,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,t),s)})}partial(){const t={};for(const[n,r]of Object.entries(this.fields))t[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(t)}deepPartial(){return lM(this)}pick(t){const n={};for(const r of t)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>t.includes(r)&&t.includes(s)))}omit(t){const n=[];for(const r of Object.keys(this.fields))t.includes(r)||n.push(r);return this.pick(n)}from(t,n,r){let s=h0.getter(t,!0);return this.transform(c=>{if(!c)return c;let h=c;return wFe(c,t)&&(h=Object.assign({},c),r||delete h[t],h[n]=s(c)),h})}json(){return this.transform(ote)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||sM.exact,test(n){if(n==null)return!0;const r=LH(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,n=sM.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const c=LH(this.schema,s);return!t||c.length===0||this.createError({params:{unknown:c.join(", ")}})}});return r.spec.noUnknown=t,r}unknown(t=!0,n=sM.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[t(s)]=n[s];return r})}camelCase(){return this.transformKeys(Ek.camelCase)}snakeCase(){return this.transformKeys(Ek.snakeCase)}constantCase(){return this.transformKeys(t=>Ek.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);r.fields={};for(const[c,h]of Object.entries(n.fields)){var s;let i=t;(s=i)!=null&&s.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[c]})),r.fields[c]=h.describe(i)}return r}}e5.prototype=ste.prototype;function ate(e){return new lte(e)}class lte extends fh{constructor(t){super({type:"array",spec:{types:t},check(n){return Array.isArray(n)}}),this.innerType=void 0,this.innerType=t}_cast(t,n){const r=super._cast(t,n);if(!this._typeCheck(r)||!this.innerType)return r;let s=!1;const c=r.map((h,i)=>{const g=this.innerType.cast(h,Object.assign({},n,{path:`${n.path||""}[${i}]`}));return g!==h&&(s=!0),g});return s?c:r}_validate(t,n={},r,s){var c;let h=this.innerType,i=(c=n.recursive)!=null?c:this.spec.recursive;n.originalValue!=null&&n.originalValue,super._validate(t,n,r,(g,w)=>{var T;if(!i||!h||!this._typeCheck(w)){s(g,w);return}let A=new Array(w.length);for(let k=0;k<w.length;k++){var D;A[k]=h.asNestedTest({options:n,index:k,parent:w,parentPath:n.path,originalParent:(D=n.originalValue)!=null?D:t})}this.runTests({value:w,tests:A,originalValue:(T=n.originalValue)!=null?T:t,options:n},r,k=>s(k.concat(g),w))})}clone(t){const n=super.clone(t);return n.innerType=this.innerType,n}json(){return this.transform(ote)}concat(t){let n=super.concat(t);return n.innerType=this.innerType,t.innerType&&(n.innerType=n.innerType?n.innerType.concat(t.innerType):t.innerType),n}of(t){let n=this.clone();if(!AD(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Cg(t));return n.innerType=t,n.spec=Object.assign({},n.spec,{types:t}),n}length(t,n=aM.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n){return n=n||aM.min,this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n){return n=n||aM.max,this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,n)=>this._typeCheck(t)?t:n==null?[]:[].concat(n))}compact(t){let n=t?(r,s,c)=>!t(r,s,c):r=>!!r;return this.transform(r=>r!=null?r.filter(n):r)}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);if(n.innerType){var s;let c=t;(s=c)!=null&&s.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[0]})),r.innerType=n.innerType.describe(c)}return r}}ate.prototype=lte.prototype;function H0(e,t,n,r){function s(c){return c instanceof n?c:new n(function(h){h(c)})}return new(n||(n=Promise))(function(c,h){function i(T){try{w(r.next(T))}catch(A){h(A)}}function g(T){try{w(r.throw(T))}catch(A){h(A)}}function w(T){T.done?c(T.value):s(T.value).then(i,g)}w((r=r.apply(e,t||[])).next())})}const TFe=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function e1(e,t,n){const r=EFe(e),{webkitRelativePath:s}=e,c=typeof t=="string"?t:typeof s=="string"&&s.length>0?s:`./${e.name}`;return typeof r.path!="string"&&zH(r,"path",c),zH(r,"relativePath",c),r}function EFe(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const r=t.split(".").pop().toLowerCase(),s=TFe.get(r);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}function zH(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const CFe=[".DS_Store","Thumbs.db"];function AFe(e){return H0(this,void 0,void 0,function*(){return pR(e)&&MFe(e.dataTransfer)?IFe(e.dataTransfer,e.type):RFe(e)?DFe(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?PFe(e):[]})}function MFe(e){return pR(e)}function RFe(e){return pR(e)&&pR(e.target)}function pR(e){return typeof e=="object"&&e!==null}function DFe(e){return lB(e.target.files).map(t=>e1(t))}function PFe(e){return H0(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>e1(n))})}function IFe(e,t){return H0(this,void 0,void 0,function*(){if(e.items){const n=lB(e.items).filter(s=>s.kind==="file");if(t!=="drop")return n;const r=yield Promise.all(n.map(kFe));return FH(cte(r))}return FH(lB(e.files).map(n=>e1(n)))})}function FH(e){return e.filter(t=>CFe.indexOf(t.name)===-1)}function lB(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function kFe(e){if(typeof e.webkitGetAsEntry!="function")return BH(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?ute(t):BH(e,t)}function cte(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?cte(n):[n]],[])}function BH(e,t){return H0(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const c=yield e.getAsFileSystemHandle();if(c===null)throw new Error(`${e} is not a File`);if(c!==void 0){const h=yield c.getFile();return h.handle=c,e1(h)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return e1(r,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function OFe(e){return H0(this,void 0,void 0,function*(){return e.isDirectory?ute(e):LFe(e)})}function ute(e){const t=e.createReader();return new Promise((n,r)=>{const s=[];function c(){t.readEntries(h=>H0(this,void 0,void 0,function*(){if(h.length){const i=Promise.all(h.map(OFe));s.push(i),c()}else try{const i=yield Promise.all(s);n(i)}catch(i){r(i)}}),h=>{r(h)})}c()})}function LFe(e){return H0(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(r=>{const s=e1(r,e.fullPath);t(s)},r=>{n(r)})})})}var xA={},NH;function zFe(){return NH||(NH=1,xA.__esModule=!0,xA.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",s=(e.type||"").toLowerCase(),c=s.replace(/\/.*$/,"");return n.some(function(h){var i=h.trim().toLowerCase();return i.charAt(0)==="."?r.toLowerCase().endsWith(i):i.endsWith("/*")?c===i.replace(/\/.*$/,""):s===i})}return!0}),xA}var FFe=zFe();const Ck=_a(FFe);function jH(e){return jFe(e)||NFe(e)||hte(e)||BFe()}function BFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jFe(e){if(Array.isArray(e))return cB(e)}function VH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function UH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VH(Object(n),!0).forEach(function(r){dte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VH(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xT(e,t){return $Fe(e)||UFe(e,t)||hte(e,t)||VFe()}function VFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hte(e,t){if(e){if(typeof e=="string")return cB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cB(e,t)}}function cB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UFe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,c=!1,h,i;try{for(n=n.call(e);!(s=(h=n.next()).done)&&(r.push(h.value),!(t&&r.length===t));s=!0);}catch(g){c=!0,i=g}finally{try{!s&&n.return!=null&&n.return()}finally{if(c)throw i}}return r}}function $Fe(e){if(Array.isArray(e))return e}var qFe=typeof Ck=="function"?Ck:Ck.default,HFe="file-invalid-type",GFe="file-too-large",WFe="file-too-small",YFe="too-many-files",XFe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:HFe,message:"File type must be ".concat(r)}},$H=function(t){return{code:GFe,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},qH=function(t){return{code:WFe,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},ZFe={code:YFe,message:"Too many files"};function fte(e,t){var n=e.type==="application/x-moz-file"||qFe(e,t);return[n,n?null:XFe(t)]}function pte(e,t,n){if(J_(e.size))if(J_(t)&&J_(n)){if(e.size>n)return[!1,$H(n)];if(e.size<t)return[!1,qH(t)]}else{if(J_(t)&&e.size<t)return[!1,qH(t)];if(J_(n)&&e.size>n)return[!1,$H(n)]}return[!0,null]}function J_(e){return e!=null}function KFe(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,c=e.multiple,h=e.maxFiles,i=e.validator;return!c&&t.length>1||c&&h>=1&&t.length>h?!1:t.every(function(g){var w=fte(g,n),T=xT(w,1),A=T[0],D=pte(g,r,s),k=xT(D,1),I=k[0],F=i?i(g):null;return A&&I&&!F})}function mR(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function bA(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function HH(e){e.preventDefault()}function QFe(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function JFe(e){return e.indexOf("Edge/")!==-1}function eBe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return QFe(e)||JFe(e)}function Ep(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var s=arguments.length,c=new Array(s>1?s-1:0),h=1;h<s;h++)c[h-1]=arguments[h];return t.some(function(i){return!mR(r)&&i&&i.apply(void 0,[r].concat(c)),mR(r)})}}function tBe(){return"showOpenFilePicker"in window}function nBe(e){if(J_(e)){var t=Object.entries(e).filter(function(n){var r=xT(n,2),s=r[0],c=r[1],h=!0;return mte(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),h=!1),(!Array.isArray(c)||!c.every(gte))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),h=!1),h}).reduce(function(n,r){var s=xT(r,2),c=s[0],h=s[1];return UH(UH({},n),{},dte({},c,h))},{});return[{description:"Files",accept:t}]}return e}function rBe(e){if(J_(e))return Object.entries(e).reduce(function(t,n){var r=xT(n,2),s=r[0],c=r[1];return[].concat(jH(t),[s],jH(c))},[]).filter(function(t){return mte(t)||gte(t)}).join(",")}function iBe(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function oBe(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function mte(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function gte(e){return/^.*\.[\w]+$/.test(e)}var sBe=["children"],aBe=["open"],lBe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],cBe=["refKey","onChange","onClick"];function uBe(e){return fBe(e)||hBe(e)||yte(e)||dBe()}function dBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fBe(e){if(Array.isArray(e))return uB(e)}function Ak(e,t){return gBe(e)||mBe(e,t)||yte(e,t)||pBe()}function pBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yte(e,t){if(e){if(typeof e=="string")return uB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uB(e,t)}}function uB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mBe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,c=!1,h,i;try{for(n=n.call(e);!(s=(h=n.next()).done)&&(r.push(h.value),!(t&&r.length===t));s=!0);}catch(g){c=!0,i=g}finally{try{!s&&n.return!=null&&n.return()}finally{if(c)throw i}}return r}}function gBe(e){if(Array.isArray(e))return e}function GH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GH(Object(n),!0).forEach(function(r){dB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GH(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gR(e,t){if(e==null)return{};var n=yBe(e,t),r,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yBe(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var t5=q.forwardRef(function(e,t){var n=e.children,r=gR(e,sBe),s=_te(r),c=s.open,h=gR(s,aBe);return q.useImperativeHandle(t,function(){return{open:c}},[c]),St.createElement(q.Fragment,null,n(Fs(Fs({},h),{},{open:c})))});t5.displayName="Dropzone";var vte={disabled:!1,getFilesFromEvent:AFe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};t5.defaultProps=vte;t5.propTypes={children:nt.func,accept:nt.objectOf(nt.arrayOf(nt.string)),multiple:nt.bool,preventDropOnDocument:nt.bool,noClick:nt.bool,noKeyboard:nt.bool,noDrag:nt.bool,noDragEventsBubbling:nt.bool,minSize:nt.number,maxSize:nt.number,maxFiles:nt.number,disabled:nt.bool,getFilesFromEvent:nt.func,onFileDialogCancel:nt.func,onFileDialogOpen:nt.func,useFsAccessApi:nt.bool,autoFocus:nt.bool,onDragEnter:nt.func,onDragLeave:nt.func,onDragOver:nt.func,onDrop:nt.func,onDropAccepted:nt.func,onDropRejected:nt.func,onError:nt.func,validator:nt.func};var hB={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function _te(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Fs(Fs({},vte),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,c=t.maxSize,h=t.minSize,i=t.multiple,g=t.maxFiles,w=t.onDragEnter,T=t.onDragLeave,A=t.onDragOver,D=t.onDrop,k=t.onDropAccepted,I=t.onDropRejected,F=t.onFileDialogCancel,j=t.onFileDialogOpen,V=t.useFsAccessApi,W=t.autoFocus,Z=t.preventDropOnDocument,K=t.noClick,ee=t.noKeyboard,se=t.noDrag,he=t.noDragEventsBubbling,ye=t.onError,_e=t.validator,ae=q.useMemo(function(){return rBe(n)},[n]),be=q.useMemo(function(){return nBe(n)},[n]),Te=q.useMemo(function(){return typeof j=="function"?j:WH},[j]),Ae=q.useMemo(function(){return typeof F=="function"?F:WH},[F]),Re=q.useRef(null),He=q.useRef(null),Se=q.useReducer(vBe,hB),qe=Ak(Se,2),it=qe[0],tt=qe[1],Oe=it.isFocused,Je=it.isFileDialogActive,yt=q.useRef(typeof window<"u"&&window.isSecureContext&&V&&tBe()),wt=function(){!yt.current&&Je&&setTimeout(function(){if(He.current){var Wt=He.current.files;Wt.length||(tt({type:"closeDialog"}),Ae())}},300)};q.useEffect(function(){return window.addEventListener("focus",wt,!1),function(){window.removeEventListener("focus",wt,!1)}},[He,Je,Ae,yt]);var $t=q.useRef([]),It=function(Wt){Re.current&&Re.current.contains(Wt.target)||(Wt.preventDefault(),$t.current=[])};q.useEffect(function(){return Z&&(document.addEventListener("dragover",HH,!1),document.addEventListener("drop",It,!1)),function(){Z&&(document.removeEventListener("dragover",HH),document.removeEventListener("drop",It))}},[Re,Z]),q.useEffect(function(){return!r&&W&&Re.current&&Re.current.focus(),function(){}},[Re,W,r]);var vt=q.useCallback(function(Rt){ye?ye(Rt):console.error(Rt)},[ye]),sn=q.useCallback(function(Rt){Rt.preventDefault(),Rt.persist(),wn(Rt),$t.current=[].concat(uBe($t.current),[Rt.target]),bA(Rt)&&Promise.resolve(s(Rt)).then(function(Wt){if(!(mR(Rt)&&!he)){var zn=Wt.length,Un=zn>0&&KFe({files:Wt,accept:ae,minSize:h,maxSize:c,multiple:i,maxFiles:g,validator:_e}),mr=zn>0&&!Un;tt({isDragAccept:Un,isDragReject:mr,isDragActive:!0,type:"setDraggedFiles"}),w&&w(Rt)}}).catch(function(Wt){return vt(Wt)})},[s,w,vt,he,ae,h,c,i,g,_e]),Rn=q.useCallback(function(Rt){Rt.preventDefault(),Rt.persist(),wn(Rt);var Wt=bA(Rt);if(Wt&&Rt.dataTransfer)try{Rt.dataTransfer.dropEffect="copy"}catch{}return Wt&&A&&A(Rt),!1},[A,he]),yn=q.useCallback(function(Rt){Rt.preventDefault(),Rt.persist(),wn(Rt);var Wt=$t.current.filter(function(Un){return Re.current&&Re.current.contains(Un)}),zn=Wt.indexOf(Rt.target);zn!==-1&&Wt.splice(zn,1),$t.current=Wt,!(Wt.length>0)&&(tt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),bA(Rt)&&T&&T(Rt))},[Re,T,he]),Qt=q.useCallback(function(Rt,Wt){var zn=[],Un=[];Rt.forEach(function(mr){var Xn=fte(mr,ae),or=Ak(Xn,2),En=or[0],Fr=or[1],Er=pte(mr,h,c),_r=Ak(Er,2),nr=_r[0],Wr=_r[1],wr=_e?_e(mr):null;if(En&&nr&&!wr)zn.push(mr);else{var Rr=[Fr,Wr];wr&&(Rr=Rr.concat(wr)),Un.push({file:mr,errors:Rr.filter(function(Di){return Di})})}}),(!i&&zn.length>1||i&&g>=1&&zn.length>g)&&(zn.forEach(function(mr){Un.push({file:mr,errors:[ZFe]})}),zn.splice(0)),tt({acceptedFiles:zn,fileRejections:Un,isDragReject:Un.length>0,type:"setFiles"}),D&&D(zn,Un,Wt),Un.length>0&&I&&I(Un,Wt),zn.length>0&&k&&k(zn,Wt)},[tt,i,ae,h,c,g,D,k,I,_e]),Jt=q.useCallback(function(Rt){Rt.preventDefault(),Rt.persist(),wn(Rt),$t.current=[],bA(Rt)&&Promise.resolve(s(Rt)).then(function(Wt){mR(Rt)&&!he||Qt(Wt,Rt)}).catch(function(Wt){return vt(Wt)}),tt({type:"reset"})},[s,Qt,vt,he]),fn=q.useCallback(function(){if(yt.current){tt({type:"openDialog"}),Te();var Rt={multiple:i,types:be};window.showOpenFilePicker(Rt).then(function(Wt){return s(Wt)}).then(function(Wt){Qt(Wt,null),tt({type:"closeDialog"})}).catch(function(Wt){iBe(Wt)?(Ae(Wt),tt({type:"closeDialog"})):oBe(Wt)?(yt.current=!1,He.current?(He.current.value=null,He.current.click()):vt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):vt(Wt)});return}He.current&&(tt({type:"openDialog"}),Te(),He.current.value=null,He.current.click())},[tt,Te,Ae,V,Qt,vt,be,i]),Bt=q.useCallback(function(Rt){!Re.current||!Re.current.isEqualNode(Rt.target)||(Rt.key===" "||Rt.key==="Enter"||Rt.keyCode===32||Rt.keyCode===13)&&(Rt.preventDefault(),fn())},[Re,fn]),Kt=q.useCallback(function(){tt({type:"focus"})},[]),_n=q.useCallback(function(){tt({type:"blur"})},[]),an=q.useCallback(function(){K||(eBe()?setTimeout(fn,0):fn())},[K,fn]),Ft=function(Wt){return r?null:Wt},kn=function(Wt){return ee?null:Ft(Wt)},Yn=function(Wt){return se?null:Ft(Wt)},wn=function(Wt){he&&Wt.stopPropagation()},Vn=q.useMemo(function(){return function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Wt=Rt.refKey,zn=Wt===void 0?"ref":Wt,Un=Rt.role,mr=Rt.onKeyDown,Xn=Rt.onFocus,or=Rt.onBlur,En=Rt.onClick,Fr=Rt.onDragEnter,Er=Rt.onDragOver,_r=Rt.onDragLeave,nr=Rt.onDrop,Wr=gR(Rt,lBe);return Fs(Fs(dB({onKeyDown:kn(Ep(mr,Bt)),onFocus:kn(Ep(Xn,Kt)),onBlur:kn(Ep(or,_n)),onClick:Ft(Ep(En,an)),onDragEnter:Yn(Ep(Fr,sn)),onDragOver:Yn(Ep(Er,Rn)),onDragLeave:Yn(Ep(_r,yn)),onDrop:Yn(Ep(nr,Jt)),role:typeof Un=="string"&&Un!==""?Un:"presentation"},zn,Re),!r&&!ee?{tabIndex:0}:{}),Wr)}},[Re,Bt,Kt,_n,an,sn,Rn,yn,Jt,ee,se,r]),ut=q.useCallback(function(Rt){Rt.stopPropagation()},[]),gn=q.useMemo(function(){return function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Wt=Rt.refKey,zn=Wt===void 0?"ref":Wt,Un=Rt.onChange,mr=Rt.onClick,Xn=gR(Rt,cBe),or=dB({accept:ae,multiple:i,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ft(Ep(Un,Jt)),onClick:Ft(Ep(mr,ut)),tabIndex:-1},zn,He);return Fs(Fs({},or),Xn)}},[He,n,i,Jt,r]);return Fs(Fs({},it),{},{isFocused:Oe&&!r,getRootProps:Vn,getInputProps:gn,rootRef:Re,inputRef:He,open:Ft(fn)})}function vBe(e,t){switch(t.type){case"focus":return Fs(Fs({},e),{},{isFocused:!0});case"blur":return Fs(Fs({},e),{},{isFocused:!1});case"openDialog":return Fs(Fs({},hB),{},{isFileDialogActive:!0});case"closeDialog":return Fs(Fs({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Fs(Fs({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Fs(Fs({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Fs({},hB);default:return e}}function WH(){}const _Be=e5().shape({name:Rp().required("Project name is required"),team:ate().of(Rp().email("Invalid email")),startDate:fR().nullable().test("start-required-if-end","Start date is required if end date is set",function(e){const{endDate:t}=this.parent;return t&&!e?this.createError({message:"Start date is required if end date is set"}):!0}),endDate:fR().nullable().test("end-required-if-start","End date is required if start date is set",function(e){const{startDate:t}=this.parent;return t&&!e?this.createError({message:"End date is required if start date is set"}):!0})}),xBe=({onSubmit:e})=>{const[t,n]=q.useState(""),[r,s]=q.useState(null),c=SX(),h=iv(),i=A=>{A.length&&s(A[0])},{getRootProps:g,getInputProps:w,isDragActive:T}=_te({onDrop:i,multiple:!1});return $.jsxs(Dr,{sx:{p:5,maxWidth:500},children:[$.jsx(rr,{variant:"h3",mb:2,children:"Create New Project"}),$.jsx(ake,{initialValues:{name:"",team:[],startDate:null,endDate:null},validationSchema:_Be,onSubmit:A=>{e({...A,file:r}),h("/project/1")},children:({values:A,errors:D,touched:k,setFieldValue:I})=>$.jsxs(JJ,{children:[$.jsxs(fc,{fullWidth:!0,sx:{...c.typography.customInput,mb:2},children:[$.jsx(Sf,{children:"Project Name"}),$.jsx(Fp,{fullWidth:!0,name:"name",label:"Project Name",value:A.name,onChange:F=>I("name",F.target.value),error:k.name&&!!D.name}),k.name&&D.name&&$.jsx(rr,{color:"error",variant:"caption",children:D.name})]}),$.jsxs(fc,{fullWidth:!0,sx:{...c.typography.customInput,mb:2},children:[$.jsx(Sf,{children:"Project Location"}),$.jsx(Fp,{fullWidth:!0,name:"location",label:"Project Location",value:A.location||"",onChange:F=>I("location",F.target.value)})]}),$.jsx(tee,{dateAdapter:G3e,children:$.jsxs(yl,{direction:"row",spacing:2,mb:2,children:[$.jsx(AH,{label:"Start Date",value:A.startDate,onChange:F=>I("startDate",F),renderInput:F=>$.jsx(Ps,{...F,fullWidth:!0,error:k.startDate&&!!D.startDate,helperText:k.startDate&&D.startDate})}),$.jsx(AH,{label:"End Date",value:A.endDate,onChange:F=>I("endDate",F),renderInput:F=>$.jsx(Ps,{...F,fullWidth:!0,error:k.endDate&&!!D.endDate,helperText:k.endDate&&D.endDate})})]})}),$.jsxs(fc,{fullWidth:!0,sx:{...c.typography.customInput},children:[$.jsx(Sf,{children:"Invite Team Member (press Enter to add)"}),$.jsx(Fp,{fullWidth:!0,label:"Invite Team Member (press Enter to add)",value:t,onChange:F=>n(F.target.value),onKeyDown:F=>{F.key==="Enter"&&t&&(F.preventDefault(),I("team",[...A.team,t]),n(""))},sx:{mb:1}})]}),$.jsx(yl,{direction:"row",spacing:1,flexWrap:"wrap",mb:2,children:A.team.map((F,j)=>$.jsx(N0,{label:F,onDelete:()=>{const V=[...A.team];V.splice(j,1),I("team",V)}},j))}),$.jsxs(fc,{fullWidth:!0,sx:{...c.typography.customInput,mb:2},children:[$.jsx(Sf,{children:"Project Location"}),$.jsx(Fp,{fullWidth:!0,name:"location",label:"Project Location",value:A.location||"",onChange:F=>I("location",F.target.value)})]}),$.jsxs(Dr,{...g(),sx:{border:"2px dashed #ccc",borderRadius:"8px",padding:4,textAlign:"center",cursor:"pointer",backgroundColor:T?"#f0f0f0":"transparent",mb:2},children:[$.jsx("input",{...w()}),$.jsx(Yme,{}),$.jsx(rr,{variant:"h6",gutterBottom:!0,children:"Upload Supporting File"}),$.jsx(rr,{variant:"body2",sx:{mb:2},children:"Drag & drop a file or click below to browse"}),$.jsx(ms,{variant:"outlined",onClick:()=>document.querySelector('input[type="file"]').click(),children:"Browse Files"}),r&&$.jsxs(rr,{variant:"body2",sx:{mt:1},children:["Selected: ",r.name]})]}),$.jsx(ms,{color:"secondary",variant:"contained",type:"submit",fullWidth:!0,children:"Create Project"})]})})]})},bBe=()=>{const e=t=>{console.log("Project submitted:",t)};return $.jsx(_o,{container:!0,sx:{minHeight:"80vh",flexDirection:"row",width:"100%",justifyContent:"center"},children:$.jsx(_o,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:$.jsx(xBe,{onSubmit:e})})})},wBe=()=>!!localStorage.getItem("token"),oS=({element:e,isBoth:t=!1,...n})=>wBe()||t?$.jsx(e,{...n}):$.jsx(mle,{to:"/"});var cM={exports:{}},SBe=cM.exports,YH;function TBe(){return YH||(YH=1,function(e,t){(function(n,r){e.exports=r()})(SBe,function(){var n,r,s;function c(i,g){if(!n)n=g;else if(!r)r=g;else{var w="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",T={};n(T),s=g(T),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}c(["exports"],function(i){var g=1e-6,w=typeof Float32Array<"u"?Float32Array:Array;function T(u,o){var l=o[0],f=o[1],m=o[2],x=o[3],b=l*x-m*f;return b?(u[0]=x*(b=1/b),u[1]=-f*b,u[2]=-m*b,u[3]=l*b,u):null}function A(){var u=new w(9);return w!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function D(u,o){var l=o[0],f=o[1],m=o[2],x=o[3],b=o[4],M=o[5],P=o[6],L=o[7],N=o[8];return u[0]=b*N-M*L,u[1]=m*L-f*N,u[2]=f*M-m*b,u[3]=M*P-x*N,u[4]=l*N-m*P,u[5]=m*x-l*M,u[6]=x*L-b*P,u[7]=f*P-l*L,u[8]=l*b-f*x,u}function k(u,o,l){var f=o[0],m=o[1],x=o[2],b=o[3],M=o[4],P=o[5],L=o[6],N=o[7],U=o[8],G=l[0],te=l[1],ne=l[2],ce=l[3],me=l[4],ve=l[5],Ie=l[6],Me=l[7],ue=l[8];return u[0]=G*f+te*b+ne*L,u[1]=G*m+te*M+ne*N,u[2]=G*x+te*P+ne*U,u[3]=ce*f+me*b+ve*L,u[4]=ce*m+me*M+ve*N,u[5]=ce*x+me*P+ve*U,u[6]=Ie*f+Me*b+ue*L,u[7]=Ie*m+Me*M+ue*N,u[8]=Ie*x+Me*P+ue*U,u}function I(){var u=new w(16);return w!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u}function F(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function j(u,o){var l=o[0],f=o[1],m=o[2],x=o[3],b=o[4],M=o[5],P=o[6],L=o[7],N=o[8],U=o[9],G=o[10],te=o[11],ne=o[12],ce=o[13],me=o[14],ve=o[15],Ie=l*M-f*b,Me=l*P-m*b,ue=l*L-x*b,we=f*P-m*M,Pe=f*L-x*M,Be=m*L-x*P,Qe=N*ce-U*ne,rt=N*me-G*ne,ot=N*ve-te*ne,ct=U*me-G*ce,At=U*ve-te*ce,Yt=G*ve-te*me,Vt=Ie*Yt-Me*At+ue*ct+we*ot-Pe*rt+Be*Qe;return Vt?(u[0]=(M*Yt-P*At+L*ct)*(Vt=1/Vt),u[1]=(m*At-f*Yt-x*ct)*Vt,u[2]=(ce*Be-me*Pe+ve*we)*Vt,u[3]=(G*Pe-U*Be-te*we)*Vt,u[4]=(P*ot-b*Yt-L*rt)*Vt,u[5]=(l*Yt-m*ot+x*rt)*Vt,u[6]=(me*ue-ne*Be-ve*Me)*Vt,u[7]=(N*Be-G*ue+te*Me)*Vt,u[8]=(b*At-M*ot+L*Qe)*Vt,u[9]=(f*ot-l*At-x*Qe)*Vt,u[10]=(ne*Pe-ce*ue+ve*Ie)*Vt,u[11]=(U*ue-N*Pe-te*Ie)*Vt,u[12]=(M*rt-b*ct-P*Qe)*Vt,u[13]=(l*ct-f*rt+m*Qe)*Vt,u[14]=(ce*Me-ne*we-me*Ie)*Vt,u[15]=(N*we-U*Me+G*Ie)*Vt,u):null}function V(u,o,l){var f=o[0],m=o[1],x=o[2],b=o[3],M=o[4],P=o[5],L=o[6],N=o[7],U=o[8],G=o[9],te=o[10],ne=o[11],ce=o[12],me=o[13],ve=o[14],Ie=o[15],Me=l[0],ue=l[1],we=l[2],Pe=l[3];return u[0]=Me*f+ue*M+we*U+Pe*ce,u[1]=Me*m+ue*P+we*G+Pe*me,u[2]=Me*x+ue*L+we*te+Pe*ve,u[3]=Me*b+ue*N+we*ne+Pe*Ie,u[4]=(Me=l[4])*f+(ue=l[5])*M+(we=l[6])*U+(Pe=l[7])*ce,u[5]=Me*m+ue*P+we*G+Pe*me,u[6]=Me*x+ue*L+we*te+Pe*ve,u[7]=Me*b+ue*N+we*ne+Pe*Ie,u[8]=(Me=l[8])*f+(ue=l[9])*M+(we=l[10])*U+(Pe=l[11])*ce,u[9]=Me*m+ue*P+we*G+Pe*me,u[10]=Me*x+ue*L+we*te+Pe*ve,u[11]=Me*b+ue*N+we*ne+Pe*Ie,u[12]=(Me=l[12])*f+(ue=l[13])*M+(we=l[14])*U+(Pe=l[15])*ce,u[13]=Me*m+ue*P+we*G+Pe*me,u[14]=Me*x+ue*L+we*te+Pe*ve,u[15]=Me*b+ue*N+we*ne+Pe*Ie,u}function W(u,o,l){var f,m,x,b,M,P,L,N,U,G,te,ne,ce=l[0],me=l[1],ve=l[2];return o===u?(u[12]=o[0]*ce+o[4]*me+o[8]*ve+o[12],u[13]=o[1]*ce+o[5]*me+o[9]*ve+o[13],u[14]=o[2]*ce+o[6]*me+o[10]*ve+o[14],u[15]=o[3]*ce+o[7]*me+o[11]*ve+o[15]):(m=o[1],x=o[2],b=o[3],M=o[4],P=o[5],L=o[6],N=o[7],U=o[8],G=o[9],te=o[10],ne=o[11],u[0]=f=o[0],u[1]=m,u[2]=x,u[3]=b,u[4]=M,u[5]=P,u[6]=L,u[7]=N,u[8]=U,u[9]=G,u[10]=te,u[11]=ne,u[12]=f*ce+M*me+U*ve+o[12],u[13]=m*ce+P*me+G*ve+o[13],u[14]=x*ce+L*me+te*ve+o[14],u[15]=b*ce+N*me+ne*ve+o[15]),u}function Z(u,o,l){var f=l[0],m=l[1],x=l[2];return u[0]=o[0]*f,u[1]=o[1]*f,u[2]=o[2]*f,u[3]=o[3]*f,u[4]=o[4]*m,u[5]=o[5]*m,u[6]=o[6]*m,u[7]=o[7]*m,u[8]=o[8]*x,u[9]=o[9]*x,u[10]=o[10]*x,u[11]=o[11]*x,u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u}function K(u,o,l){var f=Math.sin(l),m=Math.cos(l),x=o[4],b=o[5],M=o[6],P=o[7],L=o[8],N=o[9],U=o[10],G=o[11];return o!==u&&(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[4]=x*m+L*f,u[5]=b*m+N*f,u[6]=M*m+U*f,u[7]=P*m+G*f,u[8]=L*m-x*f,u[9]=N*m-b*f,u[10]=U*m-M*f,u[11]=G*m-P*f,u}function ee(u,o,l){var f=Math.sin(l),m=Math.cos(l),x=o[0],b=o[1],M=o[2],P=o[3],L=o[8],N=o[9],U=o[10],G=o[11];return o!==u&&(u[4]=o[4],u[5]=o[5],u[6]=o[6],u[7]=o[7],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=x*m-L*f,u[1]=b*m-N*f,u[2]=M*m-U*f,u[3]=P*m-G*f,u[8]=x*f+L*m,u[9]=b*f+N*m,u[10]=M*f+U*m,u[11]=P*f+G*m,u}function se(u,o,l){var f=Math.sin(l),m=Math.cos(l),x=o[0],b=o[1],M=o[2],P=o[3],L=o[4],N=o[5],U=o[6],G=o[7];return o!==u&&(u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=x*m+L*f,u[1]=b*m+N*f,u[2]=M*m+U*f,u[3]=P*m+G*f,u[4]=L*m-x*f,u[5]=N*m-b*f,u[6]=U*m-M*f,u[7]=G*m-P*f,u}function he(u,o){return u[0]=o[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=o[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=o[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function ye(u,o,l){var f,m,x,b=l[0],M=l[1],P=l[2],L=Math.hypot(b,M,P);return L<g?null:(b*=L=1/L,M*=L,P*=L,f=Math.sin(o),m=Math.cos(o),u[0]=b*b*(x=1-m)+m,u[1]=M*b*x+P*f,u[2]=P*b*x-M*f,u[3]=0,u[4]=b*M*x-P*f,u[5]=M*M*x+m,u[6]=P*M*x+b*f,u[7]=0,u[8]=b*P*x+M*f,u[9]=M*P*x-b*f,u[10]=P*P*x+m,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u)}function _e(u,o){var l=o[0],f=o[1],m=o[2],x=o[3],b=l+l,M=f+f,P=m+m,L=l*b,N=f*b,U=f*M,G=m*b,te=m*M,ne=m*P,ce=x*b,me=x*M,ve=x*P;return u[0]=1-U-ne,u[1]=N+ve,u[2]=G-me,u[3]=0,u[4]=N-ve,u[5]=1-L-ne,u[6]=te+ce,u[7]=0,u[8]=G+me,u[9]=te-ce,u[10]=1-L-U,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}Math.hypot||(Math.hypot=function(){for(var u=0,o=arguments.length;o--;)u+=arguments[o]*arguments[o];return Math.sqrt(u)});var ae=V;function be(){var u=new w(3);return w!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function Te(u){var o=new w(3);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o}function Ae(u){return Math.hypot(u[0],u[1],u[2])}function Re(u,o,l){var f=new w(3);return f[0]=u,f[1]=o,f[2]=l,f}function He(u,o,l){return u[0]=o[0]+l[0],u[1]=o[1]+l[1],u[2]=o[2]+l[2],u}function Se(u,o,l){return u[0]=o[0]-l[0],u[1]=o[1]-l[1],u[2]=o[2]-l[2],u}function qe(u,o,l){return u[0]=o[0]*l[0],u[1]=o[1]*l[1],u[2]=o[2]*l[2],u}function it(u,o,l){return u[0]=Math.min(o[0],l[0]),u[1]=Math.min(o[1],l[1]),u[2]=Math.min(o[2],l[2]),u}function tt(u,o,l){return u[0]=Math.max(o[0],l[0]),u[1]=Math.max(o[1],l[1]),u[2]=Math.max(o[2],l[2]),u}function Oe(u,o,l){return u[0]=o[0]*l,u[1]=o[1]*l,u[2]=o[2]*l,u}function Je(u,o,l,f){return u[0]=o[0]+l[0]*f,u[1]=o[1]+l[1]*f,u[2]=o[2]+l[2]*f,u}function yt(u,o){var l=o[0]-u[0],f=o[1]-u[1],m=o[2]-u[2];return l*l+f*f+m*m}function wt(u){var o=u[0],l=u[1],f=u[2];return o*o+l*l+f*f}function $t(u,o){return u[0]=-o[0],u[1]=-o[1],u[2]=-o[2],u}function It(u,o){var l=o[0],f=o[1],m=o[2],x=l*l+f*f+m*m;return x>0&&(x=1/Math.sqrt(x)),u[0]=o[0]*x,u[1]=o[1]*x,u[2]=o[2]*x,u}function vt(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]}function sn(u,o,l){var f=o[0],m=o[1],x=o[2],b=l[0],M=l[1],P=l[2];return u[0]=m*P-x*M,u[1]=x*b-f*P,u[2]=f*M-m*b,u}function Rn(u,o,l,f){var m=o[0],x=o[1],b=o[2];return u[0]=m+f*(l[0]-m),u[1]=x+f*(l[1]-x),u[2]=b+f*(l[2]-b),u}function yn(u,o,l){var f=o[0],m=o[1],x=o[2],b=l[3]*f+l[7]*m+l[11]*x+l[15];return u[0]=(l[0]*f+l[4]*m+l[8]*x+l[12])/(b=b||1),u[1]=(l[1]*f+l[5]*m+l[9]*x+l[13])/b,u[2]=(l[2]*f+l[6]*m+l[10]*x+l[14])/b,u}function Qt(u,o,l){var f=o[0],m=o[1],x=o[2];return u[0]=f*l[0]+m*l[3]+x*l[6],u[1]=f*l[1]+m*l[4]+x*l[7],u[2]=f*l[2]+m*l[5]+x*l[8],u}function Jt(u,o,l){var f=l[0],m=l[1],x=l[2],b=o[0],M=o[1],P=o[2],L=m*P-x*M,N=x*b-f*P,U=f*M-m*b,G=m*U-x*N,te=x*L-f*U,ne=f*N-m*L,ce=2*l[3];return N*=ce,U*=ce,te*=2,ne*=2,u[0]=b+(L*=ce)+(G*=2),u[1]=M+N+te,u[2]=P+U+ne,u}function fn(u,o){return u[0]===o[0]&&u[1]===o[1]&&u[2]===o[2]}var Bt=Se,Kt=qe,_n=Ae;function an(){var u=new w(4);return w!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0),u}function Ft(u,o,l){return u[0]=o[0]*l,u[1]=o[1]*l,u[2]=o[2]*l,u[3]=o[3]*l,u}function kn(u,o){var l=o[0],f=o[1],m=o[2],x=o[3],b=l*l+f*f+m*m+x*x;return b>0&&(b=1/Math.sqrt(b)),u[0]=l*b,u[1]=f*b,u[2]=m*b,u[3]=x*b,u}function Yn(u,o,l){var f=o[0],m=o[1],x=o[2],b=o[3];return u[0]=l[0]*f+l[4]*m+l[8]*x+l[12]*b,u[1]=l[1]*f+l[5]*m+l[9]*x+l[13]*b,u[2]=l[2]*f+l[6]*m+l[10]*x+l[14]*b,u[3]=l[3]*f+l[7]*m+l[11]*x+l[15]*b,u}function wn(){var u=new w(4);return w!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function Vn(u){return u[0]=0,u[1]=0,u[2]=0,u[3]=1,u}function ut(u,o,l){l*=.5;var f=o[0],m=o[1],x=o[2],b=o[3],M=Math.sin(l),P=Math.cos(l);return u[0]=f*P+b*M,u[1]=m*P+x*M,u[2]=x*P-m*M,u[3]=b*P-f*M,u}function gn(u,o,l){l*=.5;var f=o[0],m=o[1],x=o[2],b=o[3],M=Math.sin(l),P=Math.cos(l);return u[0]=f*P-x*M,u[1]=m*P+b*M,u[2]=x*P+f*M,u[3]=b*P-m*M,u}be(),an();var Rt,Wt,zn,Un,mr,Xn=kn,or=(Rt=be(),Wt=Re(1,0,0),zn=Re(0,1,0),function(u,o,l){var f=vt(o,l);return f<-.999999?(sn(Rt,Wt,o),_n(Rt)<1e-6&&sn(Rt,zn,o),It(Rt,Rt),function(m,x,b){b*=.5;var M=Math.sin(b);m[0]=M*x[0],m[1]=M*x[1],m[2]=M*x[2],m[3]=Math.cos(b)}(u,Rt,Math.PI),u):f>.999999?(u[0]=0,u[1]=0,u[2]=0,u[3]=1,u):(sn(Rt,o,l),u[0]=Rt[0],u[1]=Rt[1],u[2]=Rt[2],u[3]=1+f,Xn(u,u))});function En(){var u=new w(2);return w!=Float32Array&&(u[0]=0,u[1]=0),u}function Fr(u,o){var l=new w(2);return l[0]=u,l[1]=o,l}function Er(u,o,l){return u[0]=o[0]+l[0],u[1]=o[1]+l[1],u}function _r(u,o,l){return u[0]=o[0]-l[0],u[1]=o[1]-l[1],u}function nr(u,o,l){return u[0]=o[0]*l,u[1]=o[1]*l,u}function Wr(u){return Math.hypot(u[0],u[1])}function wr(u,o){var l=o[0],f=o[1],m=l*l+f*f;return m>0&&(m=1/Math.sqrt(m)),u[0]=o[0]*m,u[1]=o[1]*m,u}function Rr(u,o){return u[0]*o[0]+u[1]*o[1]}function Di(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}wn(),wn(),A(),En();var Wo,ko,Ro=function(){if(mr)return Un;function u(o,l,f,m){this.cx=3*o,this.bx=3*(f-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=l,this.p2x=f,this.p2y=m}return mr=1,Un=u,u.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,l){if(l===void 0&&(l=1e-6),o<0)return 0;if(o>1)return 1;for(var f=o,m=0;m<8;m++){var x=this.sampleCurveX(f)-o;if(Math.abs(x)<l)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var M=0,P=1;for(f=o,m=0;m<20&&(x=this.sampleCurveX(f),!(Math.abs(x-o)<l));m++)o>x?M=f:P=f,f=.5*(P-M)+M;return f},solve:function(o,l){return this.sampleCurveY(this.solveCurveX(o,l))}},Un}(),bl=Di(Ro);function oa(){if(ko)return Wo;function u(o,l){this.x=o,this.y=l}return ko=1,Wo=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,l){return this.clone()._rotateAround(o,l)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var l=o.x-this.x,f=o.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,l){return Math.atan2(this.x*l-this.y*o,this.x*o+this.y*l)},_matMult:function(o){var l=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=l,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var l=Math.cos(o),f=Math.sin(o),m=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=m,this},_rotateAround:function(o,l){var f=Math.cos(o),m=Math.sin(o),x=l.y+m*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-m*(this.y-l.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(o){return o instanceof u?o:Array.isArray(o)?new u(o[0],o[1]):o},Wo}var dn=Di(oa());function Hs(u,o){if(Array.isArray(u)){if(!Array.isArray(o)||u.length!==o.length)return!1;for(let l=0;l<u.length;l++)if(!Hs(u[l],o[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&o!==null){if(typeof o!="object"||Object.keys(u).length!==Object.keys(o).length)return!1;for(const l in u)if(!Hs(u[l],o[l]))return!1;return!0}return u===o}const Pr=Math.PI/180,De=180/Math.PI;function re(u){return u*Pr}function le(u){return u*De}const xe=[[0,0],[1,0],[1,1],[0,1]];function ke(u){if(u<=0)return 0;if(u>=1)return 1;const o=u*u,l=o*u;return 4*(u<.5?l:3*(u-o)+l-.75)}function Ne(u,o,l,f){const m=new bl(u,o,l,f);return function(x){return m.solve(x)}}const Xe=Ne(.25,.1,.25,1);function We(u,o,l){return Math.min(l,Math.max(o,u))}function Ke(u,o,l){return(l=We((l-u)/(o-u),0,1))*l*(3-2*l)}function at(u,o,l){const f=l-o,m=((u-o)%f+f)%f+o;return m===o?l:m}function ft(u,o,l){if(!u.length)return l(null,[]);let f=u.length;const m=new Array(u.length);let x=null;u.forEach((b,M)=>{o(b,(P,L)=>{P&&(x=P),m[M]=L,--f==0&&l(x,m)})})}function st(u,...o){for(const l of o)for(const f in l)u[f]=l[f];return u}let zt=1;function ln(){return zt++}function xn(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))}function ir(u,o){u.forEach(l=>{o[l]&&(o[l]=o[l].bind(o))})}function er(u,o,l){const f={};for(const m in u)f[m]=o.call(this,u[m],m,u);return f}function tr(u,o,l){const f={};for(const m in u)o.call(this,u[m],m,u)&&(f[m]=u[m]);return f}function kr(u){return Array.isArray(u)?u.map(kr):typeof u=="object"&&u?er(u,kr):u}const bi={};function Ir(u){bi[u]||(typeof console<"u"&&console.warn(u),bi[u]=!0)}function li(u,o,l){return(l.y-u.y)*(o.x-u.x)>(o.y-u.y)*(l.x-u.x)}function Kr(u){let o=0;for(let l,f,m=0,x=u.length,b=x-1;m<x;b=m++)l=u[m],f=u[b],o+=(f.x-l.x)*(l.y+f.y);return o}function wi([u,o,l]){const f=re(o+90),m=re(l);return{x:u*Math.cos(f)*Math.sin(m),y:u*Math.sin(f)*Math.sin(m),z:u*Math.cos(m),azimuthal:o,polar:l}}function zi(u){return(typeof self<"u"||u!==void 0)&&typeof WorkerGlobalScope<"u"&&(u!==void 0?u:self)instanceof WorkerGlobalScope}function $i(u){const o={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,m,x)=>{const b=m||x;return o[f]=!b||b.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o}let bo=null;function Zr(u,o){return[u[4*o],u[4*o+1],u[4*o+2],u[4*o+3]]}function lo(u,o,l,f){for(;o<l;){const m=o+l>>1;u[m]<f?o=m+1:l=m}return o}function Is(u,o,l,f){for(;o<l;){const m=o+l>>1;u[m]<=f?o=m+1:l=m}return o}function Oo(u){return u>0?1/(1.001-u):1+u}function is(u){return u>0?1-1/(1.001-u):-u}function Pi(u,o,l){return(u-o.min)*(l.max-l.min)/(o.max-o.min)+l.min}const Yo={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Yo.API_URL)return null;try{const u=new URL(Yo.API_URL);return u.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":u.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Qa(u){return Yo.API_URL_REGEX.test(u)}function As(u){return Yo.API_SPRITE_REGEX.test(u)}let Of,Lf,xh,zf,Xc,am;function Ja(){return Of==null&&(Of=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Of}const wl={now:()=>zf!==void 0?zf:performance.now(),setNow(u){zf=u},restoreNow(){zf=void 0},frame(u){const o=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(u,o=0){const{width:l,height:f}=u;Xc||(Xc=document.createElement("canvas"));const m=Xc.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return(l>Xc.width||f>Xc.height)&&(Xc.width=l,Xc.height=f),m.clearRect(-o,-o,l+2*o,f+2*o),m.drawImage(u,0,0,l,f),m.getImageData(-o,-o,l+2*o,f+2*o)},resolveURL:u=>(Lf||(Lf=document.createElement("a")),Lf.href=u,Lf.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(xh==null&&(xh=window.matchMedia("(prefers-reduced-motion: reduce)")),xh.matches)},hasCanvasFingerprintNoise(){if(am!==void 0)return am;if(!Ja())return am=!1,!1;const u=new OffscreenCanvas(85,1),o=u.getContext("2d",{willReadFrequently:!0});let l=0;for(let m=0;m<u.width;++m)o.fillStyle=`rgba(${l++},${l++},${l++}, 255)`,o.fillRect(m,0,1,1);const f=o.getImageData(0,0,u.width,u.height);l=0;for(let m=0;m<f.data.length;++m)if(m%4!=3&&l++!==f.data[m])return am=!0,!0;return am=!1,!1}};function jg(u,o){const l=u.indexOf("?");if(l<0)return`${u}?${new URLSearchParams(o).toString()}`;const f=new URLSearchParams(u.slice(l));for(const m in o)f.set(m,o[m]);return`${u.slice(0,l)}?${f.toString()}`}function ba(u,o={persistentParams:[]}){const l=u.indexOf("?");if(l<0)return u;const f=new URLSearchParams,m=new URLSearchParams(u.slice(l));for(const b of o.persistentParams){const M=m.get(b);M&&f.set(b,M)}const x=f.toString();return`${u.slice(0,l)}${x.length>0?`?${x}`:""}`}const wa="mapbox-tiles";let Zc=500,jl=50;const el=["language","worldview","jobid"];let Vl,Ff;function Vg(){try{return caches}catch{}}function wc(){const u=Vg();u&&Vl==null&&(Vl=u.open(wa))}let lm=1/0;const wv={supported:!1,testSupport:function(u){!Bf&&Gs&&(wu?Sv(u):dd=u)}};let dd,Gs,Bf=!1,wu=!1;const Sc=typeof self<"u"?self:{};function Sv(u){const o=u.createTexture();u.bindTexture(u.TEXTURE_2D,o);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Gs),u.isContextLost())return;wv.supported=!0}catch{}u.deleteTexture(o),Bf=!0}Sc.document&&(Gs=Sc.document.createElement("img"),Gs.onload=function(){dd&&Sv(dd),dd=null,wu=!0},Gs.onerror=function(){Bf=!0,dd=null},Gs.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Nf={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Nf);class cm extends Error{constructor(o,l,f){l===401&&Qa(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=l,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const si=zi()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,tl=function(u,o){if(!(/^file:/.test(l=u.url)||/^file:/.test(si())&&!/^\w+:/.test(l))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,m){const x=new AbortController,b=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:si(),referrerPolicy:f.referrerPolicy,signal:x.signal});let M=!1,P=!1;const L=(N=b.url).indexOf("sku=")>0&&Qa(N);var N;f.type==="json"&&b.headers.set("Accept","application/json");const U=(te,ne,ce)=>{if(P)return;if(te&&te.message!=="SecurityError"&&Ir(te.toString()),ne&&ce)return G(ne);const me=Date.now();fetch(b).then(ve=>{if(ve.ok){const Ie=L?ve.clone():null;return G(ve,Ie,me)}return m(new cm(ve.statusText,ve.status,f.url))}).catch(ve=>{ve.name!=="AbortError"&&m(new Error(`${ve.message} ${f.url}`))})},G=(te,ne,ce)=>{(f.type==="arrayBuffer"?te.arrayBuffer():f.type==="json"?te.json():te.text()).then(me=>{P||(ne&&ce&&function(ve,Ie,Me){if(wc(),Vl==null)return;const ue=$i(Ie.headers.get("Cache-Control")||"");if(ue["no-store"])return;const we={status:Ie.status,statusText:Ie.statusText,headers:new Headers};Ie.headers.forEach((Qe,rt)=>we.headers.set(rt,Qe)),ue["max-age"]&&we.headers.set("Expires",new Date(Me+1e3*ue["max-age"]).toUTCString());const Pe=we.headers.get("Expires");if(!Pe||new Date(Pe).getTime()-Me<42e4)return;let Be=ba(ve.url,{persistentParams:el});if(Ie.status===206){const Qe=ve.headers.get("Range");if(!Qe)return;we.status=200,Be=jg(Be,{range:Qe})}(function(Qe,rt){if(Ff===void 0)try{new Response(new ReadableStream),Ff=!0}catch{Ff=!1}Ff?rt(Qe.body):Qe.blob().then(rt).catch(ot=>Ir(ot.message))})(Ie,Qe=>{const rt=new Response((ot=Ie.status)!==200&&ot!==404&&[101,103,204,205,304].includes(ot)?null:Qe,we);var ot;wc(),Vl!=null&&Vl.then(ct=>ct.put(Be,rt)).catch(ct=>Ir(ct.message))})}(b,ne,ce),M=!0,m(null,me,te.headers.get("Cache-Control"),te.headers.get("Expires")))}).catch(me=>{P||m(new Error(me.message))})};return L?function(te,ne){if(wc(),Vl==null)return ne(null);Vl.then(ce=>{let me=ba(te.url,{persistentParams:el});const ve=te.headers.get("Range");ve&&(me=jg(me,{range:ve})),ce.match(me).then(Ie=>{const Me=function(ue){if(!ue)return!1;const we=new Date(ue.headers.get("Expires")||0),Pe=$i(ue.headers.get("Cache-Control")||"");return Number(we)>Date.now()&&!Pe["no-cache"]}(Ie);ce.delete(me).catch(ne),Me&&ce.put(me,Ie.clone()).catch(ne),ne(null,Ie,Me)}).catch(ne)}).catch(ne)}(b,U):U(null,null),{cancel:()=>{P=!0,M||x.abort()}}}(u,o);if(zi(self)&&self.worker.actor)return self.worker.actor.send("getResource",u,o,void 0,!0)}var l;return function(f,m){const x=new XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(x.responseType="arraybuffer");for(const b in f.headers)x.setRequestHeader(b,f.headers[b]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{m(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let b=x.response;if(f.type==="json")try{b=JSON.parse(x.response)}catch(M){return m(M)}m(null,b,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else m(new cm(x.statusText,x.status,f.url))},x.send(f.body),{cancel:()=>x.abort()}}(u,o)},hd=function(u,o){return tl(st(u,{type:"arrayBuffer"}),o)};function um(u){const o=document.createElement("a");return o.href=u,o.protocol===location.protocol&&o.host===location.host}const Su="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Tu,Tc;Tu=[],Tc=0;const bh=function(u,o){if(wv.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),Tc>=Yo.MAX_PARALLEL_IMAGE_REQUESTS){const x={requestParameters:u,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Tu.push(x),x}Tc++;let l=!1;const f=()=>{if(!l)for(l=!0,Tc--;Tu.length&&Tc<Yo.MAX_PARALLEL_IMAGE_REQUESTS;){const x=Tu.shift(),{requestParameters:b,callback:M,cancelled:P}=x;P||(x.cancel=bh(b,M).cancel)}},m=hd(u,(x,b,M,P)=>{f(),x?o(x):b&&(self.createImageBitmap?function(L,N){const U=new Blob([new Uint8Array(L)],{type:"image/png"});createImageBitmap(U).then(G=>{N(null,G)}).catch(G=>{N(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(b,(L,N)=>o(L,N,M,P)):function(L,N){const U=new Image;U.onload=()=>{N(null,U),URL.revokeObjectURL(U.src),U.onload=null,requestAnimationFrame(()=>{U.src=Su})},U.onerror=()=>N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const G=new Blob([new Uint8Array(L)],{type:"image/png"});U.src=L.byteLength?URL.createObjectURL(G):Su}(b,(L,N)=>o(L,N,M,P)))});return{cancel:()=>{m.cancel(),f()}}};var dm,jf,fd,Ws={exports:{}},Ul={exports:{}},wh={exports:{}},Sh=function(){if(fd)return Ws.exports;fd=1;var u=(dm||(dm=1,Ul.exports=function(l,f){var m,x,b,M,P,L,N,U;for(x=l.length-(m=3&l.length),b=f,P=3432918353,L=461845907,U=0;U<x;)N=255&l.charCodeAt(U)|(255&l.charCodeAt(++U))<<8|(255&l.charCodeAt(++U))<<16|(255&l.charCodeAt(++U))<<24,++U,b=27492+(65535&(M=5*(65535&(b=(b^=N=(65535&(N=(N=(65535&N)*P+(((N>>>16)*P&65535)<<16)&4294967295)<<15|N>>>17))*L+(((N>>>16)*L&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(N=0,m){case 3:N^=(255&l.charCodeAt(U+2))<<16;case 2:N^=(255&l.charCodeAt(U+1))<<8;case 1:b^=N=(65535&(N=(N=(65535&(N^=255&l.charCodeAt(U)))*P+(((N>>>16)*P&65535)<<16)&4294967295)<<15|N>>>17))*L+(((N>>>16)*L&65535)<<16)&4294967295}return b^=l.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),Ul.exports),o=(jf||(jf=1,wh.exports=function(l,f){for(var m,x=l.length,b=f^x,M=0;x>=4;)m=1540483477*(65535&(m=255&l.charCodeAt(M)|(255&l.charCodeAt(++M))<<8|(255&l.charCodeAt(++M))<<16|(255&l.charCodeAt(++M))<<24))+((1540483477*(m>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),x-=4,++M;switch(x){case 3:b^=(255&l.charCodeAt(M+2))<<16;case 2:b^=(255&l.charCodeAt(M+1))<<8;case 1:b=1540483477*(65535&(b^=255&l.charCodeAt(M)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),wh.exports);return Ws.exports=u,Ws.exports.murmur3=u,Ws.exports.murmur2=o,Ws.exports}(),nl=Di(Sh);class Kc{constructor(o,...l){st(this,l[0]||{}),this.type=o}}class hm extends Kc{constructor(o,l={}){super("error",st({error:o},l))}}function Th(u,o,l){l[u]&&l[u].indexOf(o)!==-1||(l[u]=l[u]||[],l[u].push(o))}function Eh(u,o,l){if(l&&l[u]){const f=l[u].indexOf(o);f!==-1&&l[u].splice(f,1)}}class pd{on(o,l){return this._listeners=this._listeners||{},Th(o,l,this._listeners),this}off(o,l){return Eh(o,l,this._listeners),Eh(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Th(o,l,this._oneTimeListeners),this):new Promise(f=>{this.once(o,f)})}fire(o,l){const f=typeof o=="string"?new Kc(o,l):o,m=f.type;if(this.listens(m)){f.target=this;const x=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const P of x)P.call(this,f);const b=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const P of b)Eh(m,P,this._oneTimeListeners),P.call(this,f);const M=this._eventedParent;M&&(st(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(f))}else f instanceof hm&&console.error(f.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}class rl{constructor(o){typeof o=="string"?this.name=o:(this.name=o.name,this.iconsetId=o.iconsetId)}static from(o){return new rl(o)}static toString(o){return o.iconsetId?`${o.name}${o.iconsetId}`:o.name}static parse(o){const[l,f]=o.split("");return new rl({name:l,iconsetId:f})}static isEqual(o,l){return o.name===l.name&&o.iconsetId===l.iconsetId}toString(){return rl.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Tv,Ug={},Ch=function(){if(Tv)return Ug;Tv=1;var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(x){return(x=Math.round(x))<0?0:x>255?255:x}function l(x){return o(x[x.length-1]==="%"?parseFloat(x)/100*255:parseInt(x))}function f(x){return(b=x[x.length-1]==="%"?parseFloat(x)/100:parseFloat(x))<0?0:b>1?1:b;var b}function m(x,b,M){return M<0?M+=1:M>1&&(M-=1),6*M<1?x+(b-x)*M*6:2*M<1?b:3*M<2?x+(b-x)*(2/3-M)*6:x}try{Ug.parseCSSColor=function(x){var b,M=x.replace(/ /g,"").toLowerCase();if(M in u)return u[M].slice();if(M[0]==="#")return M.length===4?(b=parseInt(M.substr(1),16))>=0&&b<=4095?[(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1]:null:M.length===7&&(b=parseInt(M.substr(1),16))>=0&&b<=16777215?[(16711680&b)>>16,(65280&b)>>8,255&b,1]:null;var P=M.indexOf("("),L=M.indexOf(")");if(P!==-1&&L+1===M.length){var N=M.substr(0,P),U=M.substr(P+1,L-(P+1)).split(","),G=1;switch(N){case"rgba":if(U.length!==4)return null;G=f(U.pop());case"rgb":return U.length!==3?null:[l(U[0]),l(U[1]),l(U[2]),G];case"hsla":if(U.length!==4)return null;G=f(U.pop());case"hsl":if(U.length!==3)return null;var te=(parseFloat(U[0])%360+360)%360/360,ne=f(U[1]),ce=f(U[2]),me=ce<=.5?ce*(ne+1):ce+ne-ce*ne,ve=2*ce-me;return[o(255*m(ve,me,te+1/3)),o(255*m(ve,me,te)),o(255*m(ve,me,te-1/3)),G];default:return null}}return null}}catch{}return Ug}();class _i{constructor(o,l,f,m=1){this.r=o,this.g=l,this.b=f,this.a=m}static parse(o){if(!o)return;if(o instanceof _i)return o;if(typeof o!="string")return;const l=Ch.parseCSSColor(o);return l?new _i(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toStringPremultipliedAlpha(){const[o,l,f,m]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(o)},${Math.round(l)},${Math.round(f)},${m})`}toString(){const[o,l,f,m]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*o)},${Math.round(255*l)},${Math.round(255*f)},${m})`}toRenderColor(o){const{r:l,g:f,b:m,a:x}=this;return new X0(o,l,f,m,x)}clone(){return new _i(this.r,this.g,this.b,this.a)}}class X0{constructor(o,l,f,m,x){if(o){const b=o.image.height,M=b*b;l=x===0?0:l/x*(b-1),f=x===0?0:f/x*(b-1),m=x===0?0:m/x*(b-1);const P=Math.floor(l),L=Math.floor(f),N=Math.floor(m),U=Math.ceil(l),G=Math.ceil(f),te=Math.ceil(m),ne=l-P,ce=f-L,me=m-N,ve=o.image.data,Ie=4*(P+L*M+N*b),Me=4*(P+L*M+te*b),ue=4*(P+G*M+N*b),we=4*(P+G*M+te*b),Pe=4*(U+L*M+N*b),Be=4*(U+L*M+te*b),Qe=4*(U+G*M+N*b),rt=4*(U+G*M+te*b);if(Ie<0||rt>=ve.length)throw new Error("out of range");this.r=ar(ar(ar(ve[Ie],ve[Me],me),ar(ve[ue],ve[we],me),ce),ar(ar(ve[Pe],ve[Be],me),ar(ve[Qe],ve[rt],me),ce),ne)/255*x,this.g=ar(ar(ar(ve[Ie+1],ve[Me+1],me),ar(ve[ue+1],ve[we+1],me),ce),ar(ar(ve[Pe+1],ve[Be+1],me),ar(ve[Qe+1],ve[rt+1],me),ce),ne)/255*x,this.b=ar(ar(ar(ve[Ie+2],ve[Me+2],me),ar(ve[ue+2],ve[we+2],me),ce),ar(ar(ve[Pe+2],ve[Be+2],me),ar(ve[Qe+2],ve[rt+2],me),ce),ne)/255*x,this.a=x}else this.r=l,this.g=f,this.b=m,this.a=x}toArray(){const{r:o,g:l,b:f,a:m}=this;return m===0?[0,0,0,0]:[255*o/m,255*l/m,255*f/m,m]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:o,g:l,b:f,a:m}=this,x=Math.min(Math.max(o/m,0),1),b=Math.min(Math.max(l/m,0),1),M=Math.min(Math.max(f/m,0),1),P=Math.min(x,b,M),L=Math.max(x,b,M),N=(P+L)/2;if(P===L)return[0,0,100*N,m];const U=L-P,G=N>.5?U/(2-L-P):U/(L+P);let te=0;return L===x?te=(b-M)/U+(b<M?6:0):L===b?te=(M-x)/U+2:L===M&&(te=(x-b)/U+4),te*=60,[Math.min(Math.max(te,0),360),Math.min(Math.max(100*G,0),100),Math.min(Math.max(100*N,0),100),m]}toArray01(){const{r:o,g:l,b:f,a:m}=this;return m===0?[0,0,0,0]:[o/m,l/m,f/m,m]}toArray01Scaled(o){const{r:l,g:f,b:m,a:x}=this;return x===0?[0,0,0]:[l/x*o,f/x*o,m/x*o]}toArray01PremultipliedAlpha(){const{r:o,g:l,b:f,a:m}=this;return[o,l,f,m]}toArray01Linear(){const{r:o,g:l,b:f,a:m}=this;return m===0?[0,0,0,0]:[Math.pow(o/m,2.2),Math.pow(l/m,2.2),Math.pow(f/m,2.2),m]}}function ar(u,o,l){return u*(1-l)+o*l}function Z0(u,o,l){return u.map((f,m)=>ar(f,o[m],l))}function $g(u){return u*u*u*u*u}_i.black=new _i(0,0,0,1),_i.white=new _i(1,1,1,1),_i.transparent=new _i(0,0,0,0),_i.red=new _i(1,0,0,1),_i.blue=new _i(0,0,1,1);var fm=Object.freeze({__proto__:null,array:Z0,color:function(u,o,l){return new _i(ar(u.r,o.r,l),ar(u.g,o.g,l),ar(u.b,o.b,l),ar(u.a,o.a,l))},easeIn:$g,number:ar});function pm(u,...o){for(const l of o)for(const f in l)u[f]=l[f];return u}class $l extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}class Ah{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[f,m]of l)this.bindings[f]=m}concat(o){return new Ah(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const md={kind:"null"},Jn={kind:"number"},Bi={kind:"string"},Ai={kind:"boolean"},Fa={kind:"color"},Eu={kind:"object"},Ci={kind:"value"},Mh={kind:"collator"},mm={kind:"formatted"},gm={kind:"resolvedImage"};function Sa(u,o){return{kind:"array",itemType:u,N:o}}function Jo(u){if(u.kind==="array"){const o=Jo(u.itemType);return typeof u.N=="number"?`array<${o}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${o}>`}return u.kind}const D1=[md,Jn,Bi,Ai,Fa,mm,Eu,Sa(Ci),gm];function ym(u,o){if(o.kind==="error")return null;if(u.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!ym(u.itemType,o.itemType))&&(typeof u.N!="number"||u.N===o.N))return null}else{if(u.kind===o.kind)return null;if(u.kind==="value"){for(const l of D1)if(!ym(l,o))return null}}return`Expected ${Jo(u)} but found ${Jo(o)} instead.`}function Ev(u,o){return o.some(l=>l.kind===u.kind)}function gd(u,o){return o.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}class ql{constructor(o,l,f){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class qg{constructor(o,l,f,m,x){this.text=o.normalize?o.normalize():o,this.image=l,this.scale=f,this.fontStack=m,this.textColor=x}}class sa{constructor(o){this.sections=o}static fromString(o){return new sa([new qg(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||!!o.image&&o.image.hasPrimary())}static factory(o){return o instanceof sa?o:sa.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const l of this.sections){if(l.image){const m=l.image.getPrimary().id.toString();o.push(["image",m]);continue}o.push(l.text);const f={};l.fontStack&&(f["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(f["font-scale"]=l.scale),l.textColor&&(f["text-color"]=["rgba"].concat(l.textColor.toRenderColor(null).toArray())),o.push(f)}return o}}class Hl{constructor(o,l={}){if(this.id=rl.from(o),this.options=Object.assign({},l),l.transform){const{a:f,b:m,c:x,d:b,e:M,f:P}=l.transform;this.options.transform=new DOMMatrix([f,m,x,b,M,P])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:o,b:l,c:f,d:m,e:x,f:b}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:o,b:l,c:f,d:m,e:x,f:b}})}static parse(o){let l,f,m,x;try{({name:l,iconsetId:f,params:m,transform:x}=JSON.parse(o)||{})}catch{return null}if(!l)return null;const{a:b,b:M,c:P,d:L,e:N,f:U}=x||{};return new Hl({name:l,iconsetId:f},{params:m,transform:new DOMMatrix([b,M,P,L,N,U])})}scaleSelf(o,l){return this.options.transform.scaleSelf(o,l),this}}class Ta{constructor(o,l,f,m,x=!1){this.primaryId=rl.from(o),this.primaryOptions=l,f&&(this.secondaryId=rl.from(f)),this.secondaryOptions=m,this.available=x}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Hl(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Hl(this.secondaryId,this.secondaryOptions):null}static from(o){return typeof o=="string"?Ta.build({name:o}):o}static build(o,l,f,m){return!o||typeof o=="object"&&!("name"in o)?null:new Ta(o,f,l,m)}}function Cv(u,o,l,f){return typeof u=="number"&&u>=0&&u<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,o,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,o,l,f]:[u,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Rh(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof _i||u instanceof ql||u instanceof sa||u instanceof Ta)return!0;if(Array.isArray(u)){for(const o of u)if(!Rh(o))return!1;return!0}if(typeof u=="object"){for(const o in u)if(!Rh(u[o]))return!1;return!0}return!1}function Lo(u){if(u===null)return md;if(typeof u=="string")return Bi;if(typeof u=="boolean")return Ai;if(typeof u=="number")return Jn;if(u instanceof _i)return Fa;if(u instanceof ql)return Mh;if(u instanceof sa)return mm;if(u instanceof Ta)return gm;if(Array.isArray(u)){const o=u.length;let l;for(const f of u){const m=Lo(f);if(l){if(l===m)continue;l=Ci;break}l=m}return Sa(l||Ci,o)}return Eu}function Ea(u){const o=typeof u;return u===null?"":o==="string"||o==="number"||o==="boolean"?String(u):u instanceof _i?u.toStringPremultipliedAlpha():u instanceof sa||u instanceof Ta?u.toString():JSON.stringify(u)}class Nr{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(o.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Rh(o[1]))return l.error("invalid value");const f=o[1];let m=Lo(f);const x=l.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new Nr(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof _i?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof sa?this.value.serialize():this.value}}class Bn{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const Vf={string:Bi,number:Jn,boolean:Ai,object:Eu};class yr{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let f,m=1;const x=o[0];if(x==="array"){let M,P;if(o.length>2){const L=o[1];if(typeof L!="string"||!(L in Vf)||L==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);M=Vf[L],m++}else M=Ci;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=o[2],m++}f=Sa(M,P)}else f=Vf[x];const b=[];for(;m<o.length;m++){const M=l.parse(o[m],m,Ci);if(!M)return null;b.push(M)}return new yr(f,b)}evaluate(o){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(o);if(!ym(this.type,Lo(f)))return f;if(l===this.args.length-1)throw new Bn(`The expression ${JSON.stringify(this.args[l].serialize())} evaluated to ${Jo(Lo(f))} but was expected to be of type ${Jo(this.type)}.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,l=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){l.push(f.kind);const m=o.N;(typeof m=="number"||this.args.length>1)&&l.push(m)}}return l.concat(this.args.map(f=>f.serialize()))}}class Ec{constructor(o){this.type=mm,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const m=[];let x=!1;for(let b=1;b<=o.length-1;++b){const M=o[b];if(x&&typeof M=="object"&&!Array.isArray(M)){x=!1;let P=null;if(M["font-scale"]&&(P=l.parseObjectValue(M["font-scale"],b,"font-scale",Jn),!P))return null;let L=null;if(M["text-font"]&&(L=l.parseObjectValue(M["text-font"],b,"text-font",Sa(Bi)),!L))return null;let N=null;if(M["text-color"]&&(N=l.parseObjectValue(M["text-color"],b,"text-color",Fa),!N))return null;const U=m[m.length-1];U.scale=P,U.font=L,U.textColor=N}else{const P=l.parse(o[b],b,Ci);if(!P)return null;const L=P.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new Ec(m)}evaluate(o){return new sa(this.sections.map(l=>{const f=l.content.evaluate(o);return Lo(f)===gm?new qg("",f,null,null,null):new qg(Ea(f),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const l of this.sections){o.push(l.content.serialize());const f={};l.scale&&(f["font-scale"]=l.scale.serialize()),l.font&&(f["text-font"]=l.font.serialize()),l.textColor&&(f["text-color"]=l.textColor.serialize()),o.push(f)}return o}}class Qc{constructor(o,l,f,m){this._imageWarnHistory={},this.type=gm,this.namePrimary=o,this.nameSecondary=l,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),m&&(this.paramsSecondary=m.params,this.iconsetIdSecondary=m.iconset?m.iconset.id:void 0)}static parse(o,l){if(o.length<2)return l.error("Expected two or more arguments.");let f=1;const m=[];function x(){if(f<o.length){const M=l.parse(o[f],f++,Bi);return M?(m.push({image:M,options:{}}),!0):(l.error(m.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function b(){if(f<o.length){const P=o[f];if((M=P)===null||typeof M!="object"||Array.isArray(M))return!0;const L=P.params,N=P.iconset,U=l.concat(f);if(!L&&!N)return f++,!0;if(L){if(typeof L!="object"||L.constructor!==Object)return U.error('Image options "params" should be an object'),!1;const G={},te=U.concat(void 0,"params");for(const ne in L){if(!ne)return te.error("Image parameter name should be non-empty"),!1;const ce=te.concat(void 0,ne).parse(L[ne],void 0,Fa,void 0,{typeAnnotation:"coerce"});if(!ce)return!1;G[ne]=ce}m[m.length-1].options.params=G}if(N){if(typeof N!="object"||N.constructor!==Object)return U.error('Image options "iconset" should be an object'),!1;if(!N.id)return U.error('Image options "iconset" should have an "id" property'),!1;m[m.length-1].options.iconset=N}return f++,!0}var M;return!0}for(let M=0;M<2;M++)if(!x()||!b())return;return new Qc(m[0].image,m[1]?m[1].image:void 0,m[0].options,m[1]?m[1].options:void 0)}evaluateParams(o,l){const f={};if(l){for(const m in l)if(l[m])try{f[m]=l[m].evaluate(o)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(o){const l={name:this.namePrimary.evaluate(o),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(o),iconsetId:this.iconsetIdSecondary}:void 0,m=Ta.build(l,f,this.paramsPrimary?this.evaluateParams(o,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(o,this.paramsSecondary):void 0);if(m&&o.availableImages){const x=m.getPrimary().id;if(m.available=o.availableImages.some(b=>rl.isEqual(b,x)),m.available){const b=m.getSecondary()?m.getSecondary().id:null;b&&(m.available=o.availableImages.some(M=>rl.isEqual(M,b)))}}return m}eachChild(o){if(o(this.namePrimary),this.paramsPrimary)for(const l in this.paramsPrimary)this.paramsPrimary[l]&&o(this.paramsPrimary[l]);if(this.nameSecondary&&(o(this.nameSecondary),this.paramsSecondary))for(const l in this.paramsSecondary)this.paramsSecondary[l]&&o(this.paramsSecondary[l])}outputDefined(){return!1}serializeOptions(o,l){const f={};if(l&&(f.iconset={id:l}),o){f.params={};for(const m in o)o[m]&&(f.params[m]=o[m].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const o=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const l=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);l&&o.push(l)}if(this.nameSecondary&&(o.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const l=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);l&&o.push(l)}return o}}function xr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}const vm={"to-boolean":Ai,"to-color":Fa,"to-number":Jn,"to-string":Bi};class Gl{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const f=o[0],m=[];let x=md;if(f==="to-array"){if(!Array.isArray(o[1]))return null;const b=o[1].length;if(l.expectedType){if(l.expectedType.kind!=="array")return l.error(`Expected ${l.expectedType.kind} but found array.`);x=Sa(l.expectedType.itemType,b)}else{if(!(b>0&&Rh(o[1][0])))return null;x=Sa(Lo(o[1][0]),b)}for(let M=0;M<b;M++){const P=o[1][M];let L;if(xr(P)==="array")L=l.parse(P,void 0,x.itemType);else{const N=xr(P);if(N!==x.itemType.kind)return l.error(`Expected ${x.itemType.kind} but found ${N}.`);L=l.registry.literal.parse(["literal",P===void 0?null:P],l)}if(!L)return null;m.push(L)}}else{if((f==="to-boolean"||f==="to-string")&&o.length!==2)return l.error("Expected one argument.");x=vm[f];for(let b=1;b<o.length;b++){const M=l.parse(o[b],b,Ci);if(!M)return null;m.push(M)}}return new Gl(x,m)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let l,f;for(const m of this.args){if(l=m.evaluate(o),f=null,l instanceof _i)return l;if(typeof l=="string"){const x=o.parseColor(l);if(x)return x}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Cv(l[0],l[1],l[2],l[3]),!f))return new _i(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Bn(f||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const f of this.args){if(l=f.evaluate(o),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Bn(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?sa.fromString(Ea(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Ta.build(Ea(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(l=>l.evaluate(o)):Ea(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ec([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Qc(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(l=>{o.push(l.serialize())}),o}}const Av=["Unknown","Point","LineString","Polygon"];class Uf{constructor(o,l){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=o,this.options=l}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Av[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(o){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,l=this.featureDistanceData.scale,{x:f,y:m}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*l-o[0])+this.featureDistanceData.bearing[1]*(m*l-o[1])}return 0}parseColor(o){let l=this._parseColorCache[o];return l||(l=this._parseColorCache[o]=_i.parse(o)),l}getConfig(o){return this.options?this.options.get(o):null}}class ks{constructor(o,l,f,m,x){this.name=o,this.type=l,this._evaluate=f,this.args=m,this._overloadIndex=x}evaluate(o){if(!this._evaluate){const l=ks.definitions[this.name];this._evaluate=Array.isArray(l)?l[2]:l.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,l){const f=o[0],m=ks.definitions[f];if(!m)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(m)?m[0]:m.type,b=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,M=[];let P=null,L=-1;for(const[N,U]of b){if(Array.isArray(N)&&N.length!==o.length-1)continue;M.push(N),L++,P=new Pc(l.registry,l.path,null,l.scope,void 0,l._scope,l.options);const G=[];let te=!1;for(let ne=1;ne<o.length;ne++){const ce=o[ne],me=Array.isArray(N)?N[ne-1]:N.type,ve=P.parse(ce,1+G.length,me);if(!ve){te=!0;break}G.push(ve)}if(!te)if(Array.isArray(N)&&N.length!==G.length)P.error(`Expected ${N.length} arguments, but found ${G.length} instead.`);else{for(let ne=0;ne<G.length;ne++){const ce=Array.isArray(N)?N[ne]:N.type,me=G[ne];P.concat(ne+1).checkSubtype(ce,me.type)}if(P.errors.length===0)return new ks(f,x,U,G,L)}}if(M.length===1)l.errors.push(...P.errors);else{const N=(M.length?M:b.map(([G])=>G)).map(aa).join(" | "),U=[];for(let G=1;G<o.length;G++){const te=l.parse(o[G],1+U.length);if(!te)return null;U.push(Jo(te.type))}l.error(`Expected arguments of type ${N}, but found (${U.join(", ")}) instead.`)}return null}static register(o,l){ks.definitions=l;for(const f in l)o[f]=ks}}function aa(u){return Array.isArray(u)?`(${u.map(Jo).join(", ")})`:`(${Jo(u.type)}...)`}class Dh{constructor(o,l,f){this.type=Mh,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(o.length!==2)return l.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const m=f["case-sensitive"]===void 0?l.parse(!1,1,Ai):l.parseObjectValue(f["case-sensitive"],1,"case-sensitive",Ai);if(!m)return null;const x=f["diacritic-sensitive"]===void 0?l.parse(!1,1,Ai):l.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",Ai);if(!x)return null;let b=null;return f.locale&&(b=l.parseObjectValue(f.locale,1,"locale",Bi),!b)?null:new Dh(m,x,b)}evaluate(o){return new ql(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}function Cu(u,o,l=0,f=u.length-1,m=Ih){for(;f>l;){if(f-l>600){const P=f-l+1,L=o-l+1,N=Math.log(P),U=.5*Math.exp(2*N/3),G=.5*Math.sqrt(N*U*(P-U)/P)*(L-P/2<0?-1:1);Cu(u,o,Math.max(l,Math.floor(o-L*U/P+G)),Math.min(f,Math.floor(o+(P-L)*U/P+G)),m)}const x=u[o];let b=l,M=f;for(Ph(u,l,o),m(u[f],x)>0&&Ph(u,l,f);b<M;){for(Ph(u,b,M),b++,M--;m(u[b],x)<0;)b++;for(;m(u[M],x)>0;)M--}m(u[l],x)===0?Ph(u,l,M):(M++,Ph(u,M,f)),M<=o&&(l=M+1),o<=M&&(f=M-1)}}function Ph(u,o,l){const f=u[o];u[o]=u[l],u[l]=f}function Ih(u,o){return u<o?-1:u>o?1:0}function Ca(u){let o=0;for(let l,f,m=0,x=u.length,b=x-1;m<x;b=m++)l=u[m],f=u[b],o+=(f.x-l.x)*(l.y+f.y);return o}function _m(u,o){u[0]=Math.min(u[0],o[0]),u[1]=Math.min(u[1],o[1]),u[2]=Math.max(u[2],o[0]),u[3]=Math.max(u[3],o[1])}function xm(u,o){return!(u[0]<=o[0]||u[2]>=o[2]||u[1]<=o[1]||u[3]>=o[3])}function Sl(u,o,l){const f=u[0]-o[0],m=u[1]-o[1],x=u[0]-l[0],b=u[1]-l[1];return f*b-x*m==0&&f*x<=0&&m*b<=0}function Tl(u,o,l=!1){let f=!1;for(let M=0,P=o.length;M<P;M++){const L=o[M];for(let N=0,U=L.length,G=U-1;N<U;G=N++){const te=L[G],ne=L[N];if(Sl(u,te,ne))return l;(x=te)[1]>(m=u)[1]!=(b=ne)[1]>m[1]&&m[0]<(b[0]-x[0])*(m[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}}var m,x,b;return f}function Hg(u,o,l,f){const m=f[0]-l[0],x=f[1]-l[1],b=(u[0]-l[0])*x-m*(u[1]-l[1]),M=(o[0]-l[0])*x-m*(o[1]-l[1]);return b>0&&M<0||b<0&&M>0}function Cc(u,o,l,f){return(m=[f[0]-l[0],f[1]-l[1]])[0]*(x=[o[0]-u[0],o[1]-u[1]])[1]-m[1]*x[0]!=0&&!(!Hg(u,o,l,f)||!Hg(l,f,u,o));var m,x}function Gg(u){const o=new dn(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),l=new dn(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const f of u[0])o.x>f.x&&(o.x=f.x),o.y>f.y&&(o.y=f.y),l.x<f.x&&(l.x=f.x),l.y<f.y&&(l.y=f.y);return{min:o,max:l}}const Au=8192;function Mv(u,o){const l=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,m=Math.pow(2,o.z);return[Math.round(l*m*Au),Math.round(f*m*Au)]}function P1(u,o){for(let l=0;l<o.length;l++)if(Tl(u,o[l]))return!0;return!1}function kh(u,o,l){for(const f of l)for(let m=0,x=f.length,b=x-1;m<x;b=m++)if(Cc(u,o,f[b],f[m]))return!0;return!1}function Wg(u,o){for(let l=0;l<u.length;++l)if(!Tl(u[l],o))return!1;for(let l=0;l<u.length-1;++l)if(kh(u[l],u[l+1],o))return!1;return!0}function bm(u,o){for(let l=0;l<o.length;l++)if(Wg(u,o[l]))return!0;return!1}function $f(u,o,l){const f=[];for(let m=0;m<u.length;m++){const x=[];for(let b=0;b<u[m].length;b++){const M=Mv(u[m][b],l);_m(o,M),x.push(M)}f.push(x)}return f}function Rv(u,o,l){const f=[];for(let m=0;m<u.length;m++){const x=$f(u[m],o,l);f.push(x)}return f}function il(u,o,l,f){if(u[0]<l[0]||u[0]>l[2]){const m=.5*f;let x=u[0]-l[0]>m?-f:l[0]-u[0]>m?f:0;x===0&&(x=u[0]-l[2]>m?-f:l[2]-u[0]>m?f:0),u[0]+=x}_m(o,u)}function Oh(u,o,l,f){const m=Math.pow(2,f.z)*Au,x=[f.x*Au,f.y*Au],b=[];if(!u)return b;for(const M of u)for(const P of M){const L=[P.x+x[0],P.y+x[1]];il(L,o,l,m),b.push(L)}return b}function Yg(u,o,l,f){const m=Math.pow(2,f.z)*Au,x=[f.x*Au,f.y*Au],b=[];if(!u)return b;for(const P of u){const L=[];for(const N of P){const U=[N.x+x[0],N.y+x[1]];_m(o,U),L.push(U)}b.push(L)}if(o[2]-o[0]<=m/2){(M=o)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const P of b)for(const L of P)il(L,o,l,m)}var M;return b}class Jc{constructor(o,l){this.type=Ai,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Rh(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let m=0;m<f.features.length;++m){const x=f.features[m].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Jc(f,f.features[m].geometry)}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Jc(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Jc(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(!b)return!1;if(f.type==="Polygon"){const M=$f(f.coordinates,x,b),P=Oh(l.geometry(),m,x,b);if(!xm(m,x))return!1;for(const L of P)if(!Tl(L,M))return!1}if(f.type==="MultiPolygon"){const M=Rv(f.coordinates,x,b),P=Oh(l.geometry(),m,x,b);if(!xm(m,x))return!1;for(const L of P)if(!P1(L,M))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(!b)return!1;if(f.type==="Polygon"){const M=$f(f.coordinates,x,b),P=Yg(l.geometry(),m,x,b);if(!xm(m,x))return!1;for(const L of P)if(!Wg(L,M))return!1}if(f.type==="MultiPolygon"){const M=Rv(f.coordinates,x,b),P=Yg(l.geometry(),m,x,b);if(!xm(m,x))return!1;for(const L of P)if(!bm(L,M))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Ac={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Xg=1/298.257223563,El=Xg*(2-Xg),Lh=Math.PI/180;class qf{static fromTile(o,l,f){const m=Math.PI*(1-2*(o+.5)/Math.pow(2,l)),x=Math.atan(.5*(Math.exp(m)-Math.exp(-m)))/Lh;return new qf(x,f)}static get units(){return Ac}constructor(o,l){if(o===void 0)throw new Error("No latitude given.");if(l&&!Ac[l])throw new Error(`Unknown unit ${l}. Use one of: ${Object.keys(Ac).join(", ")}`);const f=6378.137*Lh*(l?Ac[l]:1),m=Math.cos(o*Lh),x=1/(1-El*(1-m*m)),b=Math.sqrt(x);this.kx=f*b*m,this.ky=f*b*x*(1-El)}distance(o,l){const f=ol(o[0]-l[0])*this.kx,m=(o[1]-l[1])*this.ky;return Math.sqrt(f*f+m*m)}bearing(o,l){const f=ol(l[0]-o[0])*this.kx;return Math.atan2(f,(l[1]-o[1])*this.ky)/Lh}destination(o,l,f){const m=f*Lh;return this.offset(o,Math.sin(m)*l,Math.cos(m)*l)}offset(o,l,f){return[o[0]+l/this.kx,o[1]+f/this.ky]}lineDistance(o){let l=0;for(let f=0;f<o.length-1;f++)l+=this.distance(o[f],o[f+1]);return l}area(o){let l=0;for(let f=0;f<o.length;f++){const m=o[f];for(let x=0,b=m.length,M=b-1;x<b;M=x++)l+=ol(m[x][0]-m[M][0])*(m[x][1]+m[M][1])*(f?-1:1)}return Math.abs(l)/2*this.kx*this.ky}along(o,l){let f=0;if(l<=0)return o[0];for(let m=0;m<o.length-1;m++){const x=o[m],b=o[m+1],M=this.distance(x,b);if(f+=M,f>l)return Zg(x,b,(l-(f-M))/M)}return o[o.length-1]}pointToSegmentDistance(o,l,f){let[m,x]=l,b=ol(f[0]-m)*this.kx,M=(f[1]-x)*this.ky;if(b!==0||M!==0){const P=(ol(o[0]-m)*this.kx*b+(o[1]-x)*this.ky*M)/(b*b+M*M);P>1?(m=f[0],x=f[1]):P>0&&(m+=b/this.kx*P,x+=M/this.ky*P)}return b=ol(o[0]-m)*this.kx,M=(o[1]-x)*this.ky,Math.sqrt(b*b+M*M)}pointOnLine(o,l){let f=1/0,m=o[0][0],x=o[0][1],b=0,M=0;for(let P=0;P<o.length-1;P++){let L=o[P][0],N=o[P][1],U=ol(o[P+1][0]-L)*this.kx,G=(o[P+1][1]-N)*this.ky,te=0;U===0&&G===0||(te=(ol(l[0]-L)*this.kx*U+(l[1]-N)*this.ky*G)/(U*U+G*G),te>1?(L=o[P+1][0],N=o[P+1][1]):te>0&&(L+=U/this.kx*te,N+=G/this.ky*te)),U=ol(l[0]-L)*this.kx,G=(l[1]-N)*this.ky;const ne=U*U+G*G;ne<f&&(f=ne,m=L,x=N,b=P,M=te)}return{point:[m,x],index:b,t:Math.max(0,Math.min(1,M))}}lineSlice(o,l,f){let m=this.pointOnLine(f,o),x=this.pointOnLine(f,l);if(m.index>x.index||m.index===x.index&&m.t>x.t){const L=m;m=x,x=L}const b=[m.point],M=m.index+1,P=x.index;!Dv(f[M],b[0])&&M<=P&&b.push(f[M]);for(let L=M+1;L<=P;L++)b.push(f[L]);return Dv(f[P],x.point)||b.push(x.point),b}lineSliceAlong(o,l,f){let m=0;const x=[];for(let b=0;b<f.length-1;b++){const M=f[b],P=f[b+1],L=this.distance(M,P);if(m+=L,m>o&&x.length===0&&x.push(Zg(M,P,(o-(m-L))/L)),m>=l)return x.push(Zg(M,P,(l-(m-L))/L)),x;m>o&&x.push(P)}return x}bufferPoint(o,l){const f=l/this.ky,m=l/this.kx;return[o[0]-m,o[1]-f,o[0]+m,o[1]+f]}bufferBBox(o,l){const f=l/this.ky,m=l/this.kx;return[o[0]-m,o[1]-f,o[2]+m,o[3]+f]}insideBBox(o,l){return ol(o[0]-l[0])>=0&&ol(o[0]-l[2])<=0&&o[1]>=l[1]&&o[1]<=l[3]}}function Dv(u,o){return u[0]===o[0]&&u[1]===o[1]}function Zg(u,o,l){const f=ol(o[0]-u[0]);return[u[0]+f*l,u[1]+(o[1]-u[1])*l]}function ol(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}class wm{constructor(o=[],l=(f,m)=>f<m?-1:f>m?1:0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:f}=this,m=l[o];for(;o>0;){const x=o-1>>1,b=l[x];if(f(m,b)>=0)break;l[o]=b,o=x}l[o]=m}_down(o){const{data:l,compare:f}=this,m=this.length>>1,x=l[o];for(;o<m;){let b=1+(o<<1);const M=b+1;if(M<this.length&&f(l[M],l[b])<0&&(b=M),f(l[b],x)>=0)break;l[o]=l[b],o=b}l[o]=x}}var vn=8192;function Cl(u,o){return o.dist-u.dist}const Sm=100,Ba=50;function sl(u){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==u.length)return!1;for(let l=0;l<o.length;l++)if(o[l]!==u[l])return!1;return!0}function Wl(u){return u[1]-u[0]+1}function al(u,o){const l=u[1]>=u[0]&&u[1]<o;return l||console.warn("Distance Expression: Index is out of range"),l}function Mu(u,o){if(u[0]>u[1])return[null,null];const l=Wl(u);if(o){if(l===2)return[u,null];const f=Math.floor(l/2);return[[u[0],u[0]+f],[u[0]+f,u[1]]]}{if(l===1)return[u,null];const f=Math.floor(l/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}}function Mc(u,o){const l=[1/0,1/0,-1/0,-1/0];if(!al(o,u.length))return l;for(let f=o[0];f<=o[1];++f)_m(l,u[f]);return l}function zh(u){const o=[1/0,1/0,-1/0,-1/0];for(let l=0;l<u.length;++l)for(let f=0;f<u[l].length;++f)_m(o,u[l][f]);return o}function Yl(u,o,l){if(sl(u)||sl(o))return NaN;let f=0,m=0;return u[2]<o[0]&&(f=o[0]-u[2]),u[0]>o[2]&&(f=u[0]-o[2]),u[1]>o[3]&&(m=u[1]-o[3]),u[3]<o[1]&&(m=o[1]-u[3]),l.distance([0,0],[f,m])}function Fh(u){return 360*u-180}function Qr(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function yd(u,o){const l=Math.pow(2,o.z),f=(u.y/vn+o.y)/l;return[Fh((u.x/vn+o.x)/l),Qr(f)]}function I1(u,o){const l=[];for(let f=0;f<u.length;++f)l.push(yd(u[f],o));return l}function ll(u,o,l){const f=l.pointOnLine(o,u).point;return l.distance(u,f)}function Tm(u,o,l,f,m){const x=l.slice(f[0],f[1]+1);let b=1/0;for(let M=o[0];M<=o[1];++M)if((b=Math.min(b,ll(u[M],x,m)))===0)return 0;return b}function Rc(u,o,l,f,m){const x=Math.min(m.pointToSegmentDistance(u,l,f),m.pointToSegmentDistance(o,l,f)),b=Math.min(m.pointToSegmentDistance(l,u,o),m.pointToSegmentDistance(f,u,o));return Math.min(x,b)}function go(u,o,l,f,m){if(!al(o,u.length)||!al(f,l.length))return NaN;let x=1/0;for(let b=o[0];b<o[1];++b)for(let M=f[0];M<f[1];++M){if(Cc(u[b],u[b+1],l[M],l[M+1]))return 0;x=Math.min(x,Rc(u[b],u[b+1],l[M],l[M+1],m))}return x}function Kg(u,o,l,f,m){if(!al(o,u.length)||!al(f,l.length))return NaN;let x=1/0;for(let b=o[0];b<=o[1];++b)for(let M=f[0];M<=f[1];++M)if((x=Math.min(x,m.distance(u[b],l[M])))===0)return x;return x}function Bh(u,o,l){if(Tl(u,o,!0))return 0;let f=1/0;for(const m of o){const x=m.length;if(x<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(m[0]!==m[x-1]&&(f=Math.min(f,l.pointToSegmentDistance(u,m[x-1],m[0])))===0||(f=Math.min(f,ll(u,m,l)))===0)return f}return f}function Pv(u,o,l,f){if(!al(o,u.length))return NaN;for(let x=o[0];x<=o[1];++x)if(Tl(u[x],l,!0))return 0;let m=1/0;for(let x=o[0];x<o[1];++x)for(const b of l)for(let M=0,P=b.length,L=P-1;M<P;L=M++){if(Cc(u[x],u[x+1],b[L],b[M]))return 0;m=Math.min(m,Rc(u[x],u[x+1],b[L],b[M],f))}return m}function Qg(u,o){for(const l of u)for(let f=0;f<=l.length-1;++f)if(Tl(l[f],o,!0))return!0;return!1}function Hf(u,o,l,f=1/0){const m=zh(u),x=zh(o);if(f!==1/0&&Yl(m,x,l)>=f)return f;if(xm(m,x)){if(Qg(u,o))return 0}else if(Qg(o,u))return 0;let b=f;for(const M of u)for(let P=0,L=M.length,N=L-1;P<L;N=P++)for(const U of o)for(let G=0,te=U.length,ne=te-1;G<te;ne=G++){if(Cc(M[N],M[P],U[ne],U[G]))return 0;b=Math.min(b,Rc(M[N],M[P],U[ne],U[G],l))}return b}function Ru(u,o,l,f,m,x,b){if(x===null||b===null)return;const M=Yl(Mc(f,x),Mc(m,b),l);M<o&&u.push({dist:M,range1:x,range2:b})}function Jg(u,o,l,f,m=1/0){let x=Math.min(f.distance(u[0],l[0][0]),m);if(x===0)return x;const b=new wm([{dist:0,range1:[0,u.length-1],range2:[0,0]}],Cl),M=o?Ba:Sm,P=zh(l);for(;b.length;){const L=b.pop();if(L.dist>=x)continue;const N=L.range1;if(Wl(N)<=M){if(!al(N,u.length))return NaN;if(o){const U=Pv(u,N,l,f);if((x=Math.min(x,U))===0)return x}else for(let U=N[0];U<=N[1];++U){const G=Bh(u[U],l,f);if((x=Math.min(x,G))===0)return x}}else{const U=Mu(N,o);if(U[0]!==null){const G=Yl(Mc(u,U[0]),P,f);G<x&&b.push({dist:G,range1:U[0],range2:[0,0]})}if(U[1]!==null){const G=Yl(Mc(u,U[1]),P,f);G<x&&b.push({dist:G,range1:U[1],range2:[0,0]})}}}return x}function Em(u,o,l,f,m,x=1/0){let b=Math.min(x,m.distance(u[0],l[0]));if(b===0)return b;const M=new wm([{dist:0,range1:[0,u.length-1],range2:[0,l.length-1]}],Cl),P=o?Ba:Sm,L=f?Ba:Sm;for(;M.length;){const N=M.pop();if(N.dist>=b)continue;const U=N.range1,G=N.range2;if(Wl(U)<=P&&Wl(G)<=L){if(!al(U,u.length)||!al(G,l.length))return NaN;if(o&&f?b=Math.min(b,go(u,U,l,G,m)):o||f?o&&!f?b=Math.min(b,Tm(l,G,u,U,m)):!o&&f&&(b=Math.min(b,Tm(u,U,l,G,m))):b=Math.min(b,Kg(u,U,l,G,m)),b===0)return b}else{const te=Mu(U,o),ne=Mu(G,f);Ru(M,b,m,u,l,te[0],ne[0]),Ru(M,b,m,u,l,te[0],ne[1]),Ru(M,b,m,u,l,te[1],ne[0]),Ru(M,b,m,u,l,te[1],ne[1])}}return b}function cl(u,o,l,f,m=1/0){let x=m;const b=Mc(u,[0,u.length-1]);for(const M of l)if(!(x!==1/0&&Yl(b,Mc(M,[0,M.length-1]),f)>=x)&&(x=Math.min(x,Em(u,o,M,!0,f,x)),x===0))return x;return x}function Na(u,o,l,f,m=1/0){let x=m;const b=Mc(u,[0,u.length-1]);for(const M of l){if(x!==1/0&&Yl(b,zh(M),f)>=x)continue;const P=Jg(u,o,M,f,x);if(isNaN(P))return P;if((x=Math.min(x,P))===0)return x}return x}function Du(u){return u==="Point"||u==="MultiPoint"||u==="LineString"||u==="MultiLineString"||u==="Polygon"||u==="MultiPolygon"}class ja{constructor(o,l){this.type=Jn,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(Rh(o[1])){const f=o[1];if(f.type==="FeatureCollection"){for(let m=0;m<f.features.length;++m)if(Du(f.features[m].geometry.type))return new ja(f,f.features[m].geometry)}else if(f.type==="Feature"){if(Du(f.geometry.type))return new ja(f,f.geometry)}else if(Du(f.type))return new ja(f,f)}return l.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const l=o.geometry(),f=o.canonicalID();if(l!=null&&f!=null){if(o.geometryType()==="Point")return function(m,x,b){const M=[];for(const L of m)for(const N of L)M.push(yd(N,x));const P=new qf(M[0][1],"meters");return b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString"?Em(M,!1,b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",P):b.type==="MultiLineString"?cl(M,!1,b.coordinates,P):b.type==="Polygon"||b.type==="MultiPolygon"?Na(M,!1,b.type==="Polygon"?[b.coordinates]:b.coordinates,P):null}(l,f,this.geometries);if(o.geometryType()==="LineString")return function(m,x,b){const M=[];for(const L of m){const N=[];for(const U of L)N.push(yd(U,x));M.push(N)}const P=new qf(M[0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return cl(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",M,P);if(b.type==="MultiLineString"){let L=1/0;for(let N=0;N<b.coordinates.length;N++){const U=cl(b.coordinates[N],!0,M,P,L);if(isNaN(U))return U;if((L=Math.min(L,U))===0)return L}return L}if(b.type==="Polygon"||b.type==="MultiPolygon"){let L=1/0;for(let N=0;N<M.length;N++){const U=Na(M[N],!0,b.type==="Polygon"?[b.coordinates]:b.coordinates,P,L);if(isNaN(U))return U;if((L=Math.min(L,U))===0)return L}return L}return null}(l,f,this.geometries);if(o.geometryType()==="Polygon")return function(m,x,b){const M=[];for(const L of function(N,U){const G=N.length;if(G<=1)return[N];const te=[];let ne,ce;for(let me=0;me<G;me++){const ve=Ca(N[me]);ve!==0&&(N[me].area=Math.abs(ve),ce===void 0&&(ce=ve<0),ce===ve<0?(ne&&te.push(ne),ne=[N[me]]):ne.push(N[me]))}return ne&&te.push(ne),te}(m)){const N=[];for(let U=0;U<L.length;++U)N.push(I1(L[U],x));M.push(N)}const P=new qf(M[0][0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return Na(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",M,P);if(b.type==="MultiLineString"){let L=1/0;for(let N=0;N<b.coordinates.length;N++){const U=Na(b.coordinates[N],!0,M,P,L);if(isNaN(U))return U;if((L=Math.min(L,U))===0)return L}return L}return b.type==="Polygon"||b.type==="MultiPolygon"?function(L,N,U){let G=1/0;for(const te of L)for(const ne of N){const ce=Hf(te,ne,U,G);if(isNaN(ce))return ce;if((G=Math.min(G,ce))===0)return G}return G}(b.type==="Polygon"?[b.coordinates]:b.coordinates,M,P):null}(l,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Dc(u,o){switch(u){case"string":return Ea(o);case"number":return+o;case"boolean":return!!o;case"color":return _i.parse(o);case"formatted":return sa.fromString(Ea(o));case"resolvedImage":return Ta.build(Ea(o))}return o}function vd(u,o,l,f){return f!==void 0&&(u=f*Math.round(u/f)),o!==void 0&&u<o&&(u=o),l!==void 0&&u>l&&(u=l),u}class Nh{constructor(o,l,f){this.type=o,this.key=l,this.scope=f}static parse(o,l){let f=l.expectedType;if(f==null&&(f=Ci),o.length<2||o.length>3)return l.error("Invalid number of arguments for 'config' expression.");const m=l.parse(o[1],1);if(!(m instanceof Nr))return l.error("Key name of 'config' expression must be a string literal.");if(o.length>=3){const x=l.parse(o[2],2);return x instanceof Nr?new Nh(f,Ea(m.value),Ea(x.value)):l.error("Scope of 'config' expression must be a string literal.")}return new Nh(f,Ea(m.value))}evaluate(o){const l=[this.key,this.scope,o.scope].filter(Boolean).join(""),f=o.getConfig(l);if(!f)return null;const{type:m,value:x,values:b,minValue:M,maxValue:P,stepValue:L}=f,N=f.default.evaluate(o);let U=N;if(x){const G=o.scope;o.scope=(G||"").split("").slice(1).join(""),U=x.evaluate(o),o.scope=G}return m&&(U=Dc(m,U)),U===void 0||M===void 0&&P===void 0&&L===void 0||(typeof U=="number"?U=vd(U,M,P,L):Array.isArray(U)&&(U=U.map(G=>typeof G=="number"?vd(G,M,P,L):G))),x!==void 0&&U!==void 0&&b&&!b.includes(U)&&(U=N,m&&(U=Dc(m,U))),(m&&m!==this.type||U!==void 0&&Lo(U)!==this.type)&&(U=Dc(this.type.kind,U)),U}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.key),o}}function jh(u){if(u instanceof ks&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Jc||u instanceof ja)return!1;let o=!0;return u.eachChild(l=>{o&&!jh(l)&&(o=!1)}),o}function Gf(u){if(u instanceof ks&&u.name==="feature-state")return!1;let o=!0;return u.eachChild(l=>{o&&!Gf(l)&&(o=!1)}),o}function Ys(u){if(u instanceof Nh)return new Set([u.key]);let o=new Set;return u.eachChild(l=>{o=new Set([...o,...Ys(l)])}),o}function zo(u,o){if(u instanceof ks&&o.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(f=>{l&&!zo(f,o)&&(l=!1)}),l}class co{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(o.length!==2||typeof o[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=o[1];return l.scope.has(f)?new co(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Pu{constructor(o,l=[],f,m=new Ah,x=[],b,M){this.registry=o,this.path=l,this.key=l.map(P=>typeof P=="string"?`['${P}']`:`[${P}]`).join(""),this.scope=m,this.errors=x,this.expectedType=f,this._scope=b,this.options=M}parse(o,l,f,m,x={}){return l||f?this.concat(l,null,f,m)._parse(o,x):this._parse(o,x)}parseObjectValue(o,l,f,m,x,b={}){return this.concat(l,f,m,x)._parse(o,b)}_parse(o,l){function f(m,x,b){return b==="assert"?new yr(x,[m]):b==="coerce"?new Gl(x,[m]):m}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(m){let x=m.parse(o,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,M=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||M.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(b,M))return null}else x=f(x,b,l.typeAnnotation||"coerce");else x=f(x,b,l.typeAnnotation||"assert")}if(!(x instanceof Nr)&&x.type.kind!=="resolvedImage"&&Cm(x)){const b=new Uf(this._scope,this.options);try{x=new Nr(x.type,x.evaluate(b))}catch(M){return this.error(M.message),null}}return x}return Gl.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,f,m){let x=typeof o=="number"?this.path.concat(o):this.path;x=typeof l=="string"?x.concat(l):x;const b=m?this.scope.concat(m):this.scope;return new Pu(this.registry,x,f||null,b,this.errors,this._scope,this.options)}error(o,...l){const f=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new $l(f,o))}checkSubtype(o,l){const f=ym(o,l);return f&&this.error(f),f}}var Pc=Pu;function Cm(u){if(u instanceof co)return Cm(u.boundExpression);if(u instanceof ks&&u.name==="error"||u instanceof Dh||u instanceof Jc||u instanceof ja||u instanceof Nh)return!1;const o=u instanceof Gl||u instanceof yr;let l=!0;return u.eachChild(f=>{l=o?l&&Cm(f):l&&f instanceof Nr}),!!l&&jh(u)&&zo(u,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function eu(u,o){const l=u.length-1;let f,m,x=0,b=l,M=0;for(;x<=b;)if(M=Math.floor((x+b)/2),f=u[M],m=u[M+1],f<=o){if(M===l||o<m)return M;x=M+1}else{if(!(f>o))throw new Bn("Input is not a number.");b=M-1}return 0}class Wf{constructor(o,l,f){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[m,x]of f)this.labels.push(m),this.outputs.push(x)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(o[1],1,Jn);if(!f)return null;const m=[];let x=null;l.expectedType&&l.expectedType.kind!=="value"&&(x=l.expectedType);for(let b=1;b<o.length;b+=2){const M=b===1?-1/0:o[b],P=o[b+1],L=b,N=b+1;if(typeof M!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(m.length&&m[m.length-1][0]>=M)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const U=l.parse(P,N,x);if(!U)return null;x=x||U.type,m.push([M,U])}return new Wf(x,f,m)}evaluate(o){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(o);const m=this.input.evaluate(o);if(m<=l[0])return f[0].evaluate(o);const x=l.length;return m>=l[x-1]?f[x-1].evaluate(o):f[eu(l,m)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&o.push(this.labels[l]),o.push(this.outputs[l].serialize());return o}}const Iv=.95047,Yf=1.08883,Xf=4/29,Vh=6/29,Zf=3*Vh*Vh,kv=Vh*Vh*Vh,Iu=Math.PI/180,ku=180/Math.PI;function Ic(u){return u>kv?Math.pow(u,1/3):u/Zf+Xf}function kc(u){return u>Vh?u*u*u:Zf*(u-Xf)}function Am(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Mm(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Uh(u){const o=Mm(u.r),l=Mm(u.g),f=Mm(u.b),m=Ic((.4124564*o+.3575761*l+.1804375*f)/Iv),x=Ic((.2126729*o+.7151522*l+.072175*f)/1);return{l:116*x-16,a:500*(m-x),b:200*(x-Ic((.0193339*o+.119192*l+.9503041*f)/Yf)),alpha:u.a}}function Kf(u){let o=(u.l+16)/116,l=isNaN(u.a)?o:o+u.a/500,f=isNaN(u.b)?o:o-u.b/200;return o=1*kc(o),l=Iv*kc(l),f=Yf*kc(f),new _i(Am(3.2404542*l-1.5371385*o-.4985314*f),Am(-.969266*l+1.8760108*o+.041556*f),Am(.0556434*l-.2040259*o+1.0572252*f),u.alpha)}function Xl(u,o,l){const f=o-u;return u+l*(f>180||f<-180?f-360*Math.round(f/360):f)}const vs={forward:Uh,reverse:Kf,interpolate:function(u,o,l){return{l:ar(u.l,o.l,l),a:ar(u.a,o.a,l),b:ar(u.b,o.b,l),alpha:ar(u.alpha,o.alpha,l)}}},Ou={forward:function(u){const{l:o,a:l,b:f}=Uh(u),m=Math.atan2(f,l)*ku;return{h:m<0?m+360:m,c:Math.sqrt(l*l+f*f),l:o,alpha:u.a}},reverse:function(u){const o=u.h*Iu,l=u.c;return Kf({l:u.l,a:Math.cos(o)*l,b:Math.sin(o)*l,alpha:u.alpha})},interpolate:function(u,o,l){return{h:Xl(u.h,o.h,l),c:ar(u.c,o.c,l),l:ar(u.l,o.l,l),alpha:ar(u.alpha,o.alpha,l)}}};var Ov=Object.freeze({__proto__:null,hcl:Ou,lab:vs});class Va{constructor(o,l,f,m,x){this.type=o,this.operator=l,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[b,M]of x)this.labels.push(b),this.outputs.push(M)}static interpolationFactor(o,l,f,m){let x=0;if(o.name==="exponential")x=Rm(l,o.base,f,m);else if(o.name==="linear")x=Rm(l,1,f,m);else if(o.name==="cubic-bezier"){const b=o.controlPoints;x=new bl(b[0],b[1],b[2],b[3]).solve(Rm(l,1,f,m))}return x}static parse(o,l){let[f,m,x,...b]=o;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const L=m[1];if(typeof L!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:L}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const L=m.slice(1);if(L.length!==4||L.some(N=>typeof N!="number"||N<0||N>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:L}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length-1>3&&(o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(x=l.parse(x,2,Jn),!x)return null;const M=[];let P=null;f==="interpolate-hcl"||f==="interpolate-lab"?P=Fa:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let L=0;L<b.length;L+=2){const N=b[L],U=b[L+1],G=L+3,te=L+4;if(typeof N!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(M.length&&M[M.length-1][0]>=N)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const ne=l.parse(U,te,P);if(!ne)return null;P=P||ne.type,M.push([N,ne])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new Va(P,f,m,x,M):l.error(`Type ${Jo(P)} is not interpolatable.`)}evaluate(o){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(o);const m=this.input.evaluate(o);if(m<=l[0])return f[0].evaluate(o);const x=l.length;if(m>=l[x-1])return f[x-1].evaluate(o);const b=eu(l,m),M=Va.interpolationFactor(this.interpolation,m,l[b],l[b+1]),P=f[b].evaluate(o),L=f[b+1].evaluate(o);return this.operator==="interpolate"?fm[this.type.kind.toLowerCase()](P,L,M):this.operator==="interpolate-hcl"?Ou.reverse(Ou.interpolate(Ou.forward(P),Ou.forward(L),M)):vs.reverse(vs.interpolate(vs.forward(P),vs.forward(L),M))}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const l=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)l.push(this.labels[f],this.outputs[f].serialize());return l}}function Rm(u,o,l,f){const m=f-l,x=u-l;return m===0?0:o===1?x/m:(Math.pow(o,x)-1)/(Math.pow(o,m)-1)}class ey{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expectected at least one argument.");let f=null;const m=l.expectedType;m&&m.kind!=="value"&&(f=m);const x=[];for(const M of o.slice(1)){const P=l.parse(M,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!P)return null;f=f||P.type,x.push(P)}const b=m&&x.some(M=>ym(m,M.type));return new ey(b?Ci:f,x)}evaluate(o){let l,f=null,m=0;for(const x of this.args){if(m++,f=x.evaluate(o),f&&f instanceof Ta&&!f.available&&(l||(l=f),f=null,m===this.args.length))return l;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(l=>{o.push(l.serialize())}),o}}class ds{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let x=1;x<o.length-1;x+=2){const b=o[x];if(typeof b!="string")return l.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return l.error("Variable names must contain only alphanumeric characters or '_'.",x);const M=l.parse(o[x+1],x+1);if(!M)return null;f.push([b,M])}const m=l.parse(o[o.length-1],o.length-1,l.expectedType,f);return m?new ds(f,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[l,f]of this.bindings)o.push(l,f.serialize());return o.push(this.result.serialize()),o}}class Qf{constructor(o,l,f){this.type=o,this.index=l,this.input=f}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Jn),m=l.parse(o[2],2,Sa(l.expectedType||Ci));return f&&m?new Qf(m.type.itemType,f,m):null}evaluate(o){const l=this.index.evaluate(o),f=this.input.evaluate(o);if(l<0)throw new Bn(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new Bn(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new Bn(`Array index must be an integer, but found ${l} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[l]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class _d{constructor(o,l,f){this.type=o,this.index=l,this.input=f}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Jn),m=l.parse(o[2],2,Sa(l.expectedType||Ci));return f&&m?new _d(m.type.itemType,f,m):null}evaluate(o){const l=this.index.evaluate(o),f=this.input.evaluate(o);if(l<0)throw new Bn(`Array index out of bounds: ${l} < 0.`);if(l>f.length-1)throw new Bn(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l===Math.floor(l))return f[l];const m=Math.floor(l),x=Math.ceil(l),b=f[m],M=f[x];if(typeof b!="number"||typeof M!="number")throw new Bn(`Cannot interpolate between non-number values at index ${l}.`);const P=l-m;return b*(1-P)+M*P}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class $h{constructor(o,l){this.type=Ai,this.needle=o,this.haystack=l}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Ci),m=l.parse(o[2],2,Ci);return f&&m?Ev(f.type,[Ai,Bi,Jn,md,Ci])?new $h(f,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Jo(f.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!gd(l,["boolean","string","number","null"]))throw new Bn(`Expected first argument to be of type boolean, string, number or null, but found ${Jo(Lo(l))} instead.`);if(!gd(f,["string","array"]))throw new Bn(`Expected second argument to be of type array or string, but found ${Jo(Lo(f))} instead.`);return f.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Jf{constructor(o,l,f){this.type=Jn,this.needle=o,this.haystack=l,this.fromIndex=f}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Ci),m=l.parse(o[2],2,Ci);if(!f||!m)return null;if(!Ev(f.type,[Ai,Bi,Jn,md,Ci]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Jo(f.type)} instead`);if(o.length===4){const x=l.parse(o[3],3,Jn);return x?new Jf(f,m,x):null}return new Jf(f,m)}evaluate(o){const l=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!gd(l,["boolean","string","number","null"]))throw new Bn(`Expected first argument to be of type boolean, string, number or null, but found ${Jo(Lo(l))} instead.`);if(!gd(f,["string","array"]))throw new Bn(`Expected second argument to be of type array or string, but found ${Jo(Lo(f))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(o);return f.indexOf(l,m)}return f.indexOf(l)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class xd{constructor(o,l,f,m,x,b){this.inputType=o,this.type=l,this.input=f,this.cases=m,this.outputs=x,this.otherwise=b}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let f,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const x={},b=[];for(let L=2;L<o.length-1;L+=2){let N=o[L];const U=o[L+1];Array.isArray(N)||(N=[N]);const G=l.concat(L);if(N.length===0)return G.error("Expected at least one branch label.");for(const ne of N){if(typeof ne!="number"&&typeof ne!="string")return G.error("Branch labels must be numbers or strings.");if(typeof ne=="number"&&Math.abs(ne)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ne=="number"&&Math.floor(ne)!==ne)return G.error("Numeric branch labels must be integer values.");if(f){if(G.checkSubtype(f,Lo(ne)))return null}else f=Lo(ne);if(x[String(ne)]!==void 0)return G.error("Branch labels must be unique.");x[String(ne)]=b.length}const te=l.parse(U,L,m);if(!te)return null;m=m||te.type,b.push(te)}const M=l.parse(o[1],1,Ci);if(!M)return null;const P=l.parse(o[o.length-1],o.length-1,m);return P?M.type.kind!=="value"&&l.concat(1).checkSubtype(f,M.type)?null:new xd(f,m,M,x,b,P):null}evaluate(o){const l=this.input.evaluate(o);return(Lo(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),f=[],m={};for(const b of l){const M=m[this.cases[b]];M===void 0?(m[this.cases[b]]=f.length,f.push([this.cases[b],[b]])):f[M][1].push(b)}const x=b=>this.inputType.kind==="number"?Number(b):b;for(const[b,M]of f)o.push(M.length===1?x(M[0]):M.map(x)),o.push(this.outputs[b].serialize());return o.push(this.otherwise.serialize()),o}}class Lu{constructor(o,l,f){this.type=o,this.branches=l,this.otherwise=f}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const m=[];for(let b=1;b<o.length-1;b+=2){const M=l.parse(o[b],b,Ai);if(!M)return null;const P=l.parse(o[b+1],b+1,f);if(!P)return null;m.push([M,P]),f=f||P.type}const x=l.parse(o[o.length-1],o.length-1,f);return x?new Lu(f,m,x):null}evaluate(o){for(const[l,f]of this.branches)if(l.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,f]of this.branches)o(l),o(f);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(l=>{o.push(l.serialize())}),o}}class Dm{constructor(o,l,f,m){this.type=o,this.input=l,this.beginIndex=f,this.endIndex=m}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Ci),m=l.parse(o[2],2,Jn);if(!f||!m)return null;if(!Ev(f.type,[Sa(Ci),Bi,Ci]))return l.error(`Expected first argument to be of type array or string, but found ${Jo(f.type)} instead`);if(o.length===4){const x=l.parse(o[3],3,Jn);return x?new Dm(f.type,f,m,x):null}return new Dm(f.type,f,m)}evaluate(o){const l=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!gd(l,["string","array"]))throw new Bn(`Expected first argument to be of type array or string, but found ${Jo(Lo(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(o);return l.slice(f,m)}return l.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function ep(u,o){return u==="=="||u==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function K0(u,o,l,f){return f.compare(o,l)===0}function bd(u,o,l){const f=u!=="=="&&u!=="!=";return class xte{constructor(x,b,M){this.type=Ai,this.lhs=x,this.rhs=b,this.collator=M,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const M=x[0];let P=b.parse(x[1],1,Ci);if(!P)return null;if(!ep(M,P.type))return b.concat(1).error(`"${M}" comparisons are not supported for type '${Jo(P.type)}'.`);let L=b.parse(x[2],2,Ci);if(!L)return null;if(!ep(M,L.type))return b.concat(2).error(`"${M}" comparisons are not supported for type '${Jo(L.type)}'.`);if(P.type.kind!==L.type.kind&&P.type.kind!=="value"&&L.type.kind!=="value")return b.error(`Cannot compare types '${Jo(P.type)}' and '${Jo(L.type)}'.`);f&&(P.type.kind==="value"&&L.type.kind!=="value"?P=new yr(L.type,[P]):P.type.kind!=="value"&&L.type.kind==="value"&&(L=new yr(P.type,[L])));let N=null;if(x.length===4){if(P.type.kind!=="string"&&L.type.kind!=="string"&&P.type.kind!=="value"&&L.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(N=b.parse(x[3],3,Mh),!N)return null}return new xte(P,L,N)}evaluate(x){const b=this.lhs.evaluate(x),M=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const P=Lo(b),L=Lo(M);if(P.kind!==L.kind||P.kind!=="string"&&P.kind!=="number")throw new Bn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${P.kind}, ${L.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const P=Lo(b),L=Lo(M);if(P.kind!=="string"||L.kind!=="string")return o(x,b,M)}return this.collator?l(x,b,M,this.collator.evaluate(x)):o(x,b,M)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}serialize(){const x=[u];return this.eachChild(b=>{x.push(b.serialize())}),x}}}const qh=bd("==",function(u,o,l){return o===l},K0),Lv=bd("!=",function(u,o,l){return o!==l},function(u,o,l,f){return!K0(0,o,l,f)}),Pm=bd("<",function(u,o,l){return o<l},function(u,o,l,f){return f.compare(o,l)<0}),zv=bd(">",function(u,o,l){return o>l},function(u,o,l,f){return f.compare(o,l)>0}),Im=bd("<=",function(u,o,l){return o<=l},function(u,o,l,f){return f.compare(o,l)<=0}),Q0=bd(">=",function(u,o,l){return o>=l},function(u,o,l,f){return f.compare(o,l)>=0});class tp{constructor(o,l,f,m,x,b){this.type=Bi,this.number=o,this.locale=l,this.currency=f,this.unit=m,this.minFractionDigits=x,this.maxFractionDigits=b}static parse(o,l){if(o.length!==3)return l.error("Expected two arguments.");const f=l.parse(o[1],1,Jn);if(!f)return null;const m=o[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=l.parseObjectValue(m.locale,2,"locale",Bi),!x))return null;let b=null;if(m.currency&&(b=l.parseObjectValue(m.currency,2,"currency",Bi),!b))return null;let M=null;if(m.unit&&(M=l.parseObjectValue(m.unit,2,"unit",Bi),!M))return null;let P=null;if(m["min-fraction-digits"]&&(P=l.parseObjectValue(m["min-fraction-digits"],2,"min-fraction-digits",Jn),!P))return null;let L=null;return m["max-fraction-digits"]&&(L=l.parseObjectValue(m["max-fraction-digits"],2,"max-fraction-digits",Jn),!L)?null:new tp(f,x,b,M,P,L)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Hh{constructor(o){this.type=Jn,this.input=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=l.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Jo(f.type)} instead.`):new Hh(f):null}evaluate(o){const l=this.input.evaluate(o);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Bn(`Expected value to be of type string or array, but found ${Jo(Lo(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(l=>{o.push(l.serialize())}),o}}function Fv(u){return function(){u=1831565813+(u|=0)|0;let o=Math.imul(u^u>>>15,1|u);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const tu={"==":qh,"!=":Lv,">":zv,"<":Pm,">=":Q0,"<=":Im,array:yr,at:Qf,"at-interpolated":_d,boolean:yr,case:Lu,coalesce:ey,collator:Dh,format:Ec,image:Qc,in:$h,"index-of":Jf,interpolate:Va,"interpolate-hcl":Va,"interpolate-lab":Va,length:Hh,let:ds,literal:Nr,match:xd,number:yr,"number-format":tp,object:yr,slice:Dm,step:Wf,string:yr,"to-boolean":Gl,"to-color":Gl,"to-number":Gl,"to-string":Gl,var:co,within:Jc,distance:ja,config:Nh};function Bv(u,[o,l,f,m]){o=o.evaluate(u),l=l.evaluate(u),f=f.evaluate(u);const x=m?m.evaluate(u):1,b=Cv(o,l,f,x);if(b)throw new Bn(b);return new _i(o/255*x,l/255*x,f/255*x,x)}function np(u,[o,l,f,m]){o=o.evaluate(u),l=l.evaluate(u),f=f.evaluate(u);const x=m?m.evaluate(u):1,b=function(L,N,U,G){return typeof L=="number"&&L>=0&&L<=360?typeof N=="number"&&N>=0&&N<=100&&typeof U=="number"&&U>=0&&U<=100?G===void 0||typeof G=="number"&&G>=0&&G<=1?null:`Invalid hsla value [${[L,N,U,G].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof G=="number"?[L,N,U,G]:[L,N,U]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof G=="number"?[L,N,U,G]:[L,N,U]).join(", ")}]: 'h' must be between 0 and 360.`}(o,l,f,x);if(b)throw new Bn(b);const M=`hsla(${o}, ${l}%, ${f}%, ${x})`,P=_i.parse(M);if(!P)throw new Bn(`Failed to parse HSLA color: ${M}`);return P}function ty(u,o){return u in o}function km(u,o){const l=o[u];return l===void 0?null:l}function Ua(u){return{type:u}}function ny(u){return{result:"success",value:u}}function $a(u){return{result:"error",value:u}}function nu(u,o){return!!u&&!!u.parameters&&u.parameters.indexOf(o)>-1}function Oc(u){return u["property-type"]==="data-driven"}function rp(u){return nu(u.expression,"measure-light")}function Om(u){return nu(u.expression,"zoom")}function ip(u){return!!u.expression&&u.expression.interpolated}function wd(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function op(u){return u}function Lm(u,o){const l=o.type==="color",f=u.stops&&typeof u.stops[0][0]=="object",m=f||!(f||u.property!==void 0),x=u.type||(ip(o)?"exponential":"interval");if(l&&((u=pm({},u)).stops&&(u.stops=u.stops.map(L=>[L[0],_i.parse(L[1])])),u.default=_i.parse(u.default?u.default:o.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!Ov[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let b,M,P;if(x==="exponential")b=ru;else if(x==="interval")b=ry;else if(x==="categorical"){b=Gh,M=Object.create(null);for(const L of u.stops)M[L[0]]=L[1];P=typeof u.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);b=Nv}if(f){const L={},N=[];for(let te=0;te<u.stops.length;te++){const ne=u.stops[te],ce=ne[0].zoom;L[ce]===void 0&&(L[ce]={zoom:ce,type:u.type,property:u.property,default:u.default,stops:[]},N.push(ce)),L[ce].stops.push([ne[0].value,ne[1]])}const U=[];for(const te of N)U.push([L[te].zoom,Lm(L[te],o)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Va.interpolationFactor.bind(void 0,G),zoomStops:U.map(te=>te[0]),evaluate:({zoom:te},ne)=>ru({stops:U,base:u.base},o,te).evaluate(te,ne)}}if(m){const L=x==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Va.interpolationFactor.bind(void 0,L),zoomStops:u.stops.map(N=>N[0]),evaluate:({zoom:N})=>b(u,o,N,M,P)}}return{kind:"source",evaluate(L,N){const U=N&&N.properties?N.properties[u.property]:void 0;return U===void 0?Sd(u.default,o.default):b(u,o,U,M,P)}}}function Sd(u,o,l){return u!==void 0?u:o!==void 0?o:l!==void 0?l:void 0}function Gh(u,o,l,f,m){return Sd(typeof l===m?f[l]:void 0,u.default,o.default)}function ry(u,o,l){if(xr(l)!=="number")return Sd(u.default,o.default);const f=u.stops.length;if(f===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[f-1][0])return u.stops[f-1][1];const m=eu(u.stops.map(x=>x[0]),l);return u.stops[m][1]}function ru(u,o,l){const f=u.base!==void 0?u.base:1;if(xr(l)!=="number")return Sd(u.default,o.default);const m=u.stops.length;if(m===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[m-1][0])return u.stops[m-1][1];const x=eu(u.stops.map(N=>N[0]),l),b=function(N,U,G,te){const ne=te-G,ce=N-G;return ne===0?0:U===1?ce/ne:(Math.pow(U,ce)-1)/(Math.pow(U,ne)-1)}(l,f,u.stops[x][0],u.stops[x+1][0]),M=u.stops[x][1],P=u.stops[x+1][1];let L=fm[o.type]||op;if(u.colorSpace&&u.colorSpace!=="rgb"){const N=Ov[u.colorSpace];L=(U,G)=>N.reverse(N.interpolate(N.forward(U),N.forward(G),b))}return typeof M.evaluate=="function"?{evaluate(...N){const U=M.evaluate.apply(void 0,N),G=P.evaluate.apply(void 0,N);if(U!==void 0&&G!==void 0)return L(U,G,b)}}:L(M,P,b)}function Nv(u,o,l){return o.type==="color"?l=_i.parse(l):o.type==="formatted"?l=sa.fromString(l.toString()):o.type==="resolvedImage"?l=Ta.build(l.toString()):xr(l)===o.type||o.type==="enum"&&o.values[l]||(l=void 0),Sd(l,u.default,o.default)}ks.register(tu,{error:[{kind:"error"},[Bi],(u,[o])=>{throw new Bn(o.evaluate(u))}],typeof:[Bi,[Ci],(u,[o])=>Jo(Lo(o.evaluate(u)))],"to-rgba":[Sa(Jn,4),[Fa],(u,[o])=>o.evaluate(u).toRenderColor(null).toArray()],"to-hsla":[Sa(Jn,4),[Fa],(u,[o])=>o.evaluate(u).toRenderColor(null).toHslaArray()],rgb:[Fa,[Jn,Jn,Jn],Bv],rgba:[Fa,[Jn,Jn,Jn,Jn],Bv],hsl:[Fa,[Jn,Jn,Jn],np],hsla:[Fa,[Jn,Jn,Jn,Jn],np],has:{type:Ai,overloads:[[[Bi],(u,[o])=>ty(o.evaluate(u),u.properties())],[[Bi,Eu],(u,[o,l])=>ty(o.evaluate(u),l.evaluate(u))]]},get:{type:Ci,overloads:[[[Bi],(u,[o])=>km(o.evaluate(u),u.properties())],[[Bi,Eu],(u,[o,l])=>km(o.evaluate(u),l.evaluate(u))]]},"feature-state":[Ci,[Bi],(u,[o])=>km(o.evaluate(u),u.featureState||{})],properties:[Eu,[],u=>u.properties()],"geometry-type":[Bi,[],u=>u.geometryType()],id:[Ci,[],u=>u.id()],zoom:[Jn,[],u=>u.globals.zoom],pitch:[Jn,[],u=>u.globals.pitch||0],"distance-from-center":[Jn,[],u=>u.distanceFromCenter()],"measure-light":[Jn,[Bi],(u,[o])=>u.measureLight(o.evaluate(u))],"heatmap-density":[Jn,[],u=>u.globals.heatmapDensity||0],"line-progress":[Jn,[],u=>u.globals.lineProgress||0],"raster-value":[Jn,[],u=>u.globals.rasterValue||0],"raster-particle-speed":[Jn,[],u=>u.globals.rasterParticleSpeed||0],"sky-radial-progress":[Jn,[],u=>u.globals.skyRadialProgress||0],accumulated:[Ci,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Jn,Ua(Jn),(u,o)=>{let l=0;for(const f of o)l+=f.evaluate(u);return l}],"*":[Jn,Ua(Jn),(u,o)=>{let l=1;for(const f of o)l*=f.evaluate(u);return l}],"-":{type:Jn,overloads:[[[Jn,Jn],(u,[o,l])=>o.evaluate(u)-l.evaluate(u)],[[Jn],(u,[o])=>-o.evaluate(u)]]},"/":[Jn,[Jn,Jn],(u,[o,l])=>o.evaluate(u)/l.evaluate(u)],"%":[Jn,[Jn,Jn],(u,[o,l])=>o.evaluate(u)%l.evaluate(u)],ln2:[Jn,[],()=>Math.LN2],pi:[Jn,[],()=>Math.PI],e:[Jn,[],()=>Math.E],"^":[Jn,[Jn,Jn],(u,[o,l])=>Math.pow(o.evaluate(u),l.evaluate(u))],sqrt:[Jn,[Jn],(u,[o])=>Math.sqrt(o.evaluate(u))],log10:[Jn,[Jn],(u,[o])=>Math.log(o.evaluate(u))/Math.LN10],ln:[Jn,[Jn],(u,[o])=>Math.log(o.evaluate(u))],log2:[Jn,[Jn],(u,[o])=>Math.log(o.evaluate(u))/Math.LN2],sin:[Jn,[Jn],(u,[o])=>Math.sin(o.evaluate(u))],cos:[Jn,[Jn],(u,[o])=>Math.cos(o.evaluate(u))],tan:[Jn,[Jn],(u,[o])=>Math.tan(o.evaluate(u))],asin:[Jn,[Jn],(u,[o])=>Math.asin(o.evaluate(u))],acos:[Jn,[Jn],(u,[o])=>Math.acos(o.evaluate(u))],atan:[Jn,[Jn],(u,[o])=>Math.atan(o.evaluate(u))],min:[Jn,Ua(Jn),(u,o)=>Math.min(...o.map(l=>l.evaluate(u)))],max:[Jn,Ua(Jn),(u,o)=>Math.max(...o.map(l=>l.evaluate(u)))],abs:[Jn,[Jn],(u,[o])=>Math.abs(o.evaluate(u))],round:[Jn,[Jn],(u,[o])=>{const l=o.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[Jn,[Jn],(u,[o])=>Math.floor(o.evaluate(u))],ceil:[Jn,[Jn],(u,[o])=>Math.ceil(o.evaluate(u))],"filter-==":[Ai,[Bi,Ci],(u,[o,l])=>u.properties()[o.value]===l.value],"filter-id-==":[Ai,[Ci],(u,[o])=>u.id()===o.value],"filter-type-==":[Ai,[Bi],(u,[o])=>u.geometryType()===o.value],"filter-<":[Ai,[Bi,Ci],(u,[o,l])=>{const f=u.properties()[o.value],m=l.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Ai,[Ci],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l<f}],"filter->":[Ai,[Bi,Ci],(u,[o,l])=>{const f=u.properties()[o.value],m=l.value;return typeof f==typeof m&&f>m}],"filter-id->":[Ai,[Ci],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l>f}],"filter-<=":[Ai,[Bi,Ci],(u,[o,l])=>{const f=u.properties()[o.value],m=l.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Ai,[Ci],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l<=f}],"filter->=":[Ai,[Bi,Ci],(u,[o,l])=>{const f=u.properties()[o.value],m=l.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Ai,[Ci],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l>=f}],"filter-has":[Ai,[Ci],(u,[o])=>o.value in u.properties()],"filter-has-id":[Ai,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Ai,[Sa(Bi)],(u,[o])=>o.value.indexOf(u.geometryType())>=0],"filter-id-in":[Ai,[Sa(Ci)],(u,[o])=>o.value.indexOf(u.id())>=0],"filter-in-small":[Ai,[Bi,Sa(Ci)],(u,[o,l])=>l.value.indexOf(u.properties()[o.value])>=0],"filter-in-large":[Ai,[Bi,Sa(Ci)],(u,[o,l])=>function(f,m,x,b){for(;x<=b;){const M=x+b>>1;if(m[M]===f)return!0;m[M]>f?b=M-1:x=M+1}return!1}(u.properties()[o.value],l.value,0,l.value.length-1)],all:{type:Ai,overloads:[[[Ai,Ai],(u,[o,l])=>o.evaluate(u)&&l.evaluate(u)],[Ua(Ai),(u,o)=>{for(const l of o)if(!l.evaluate(u))return!1;return!0}]]},any:{type:Ai,overloads:[[[Ai,Ai],(u,[o,l])=>o.evaluate(u)||l.evaluate(u)],[Ua(Ai),(u,o)=>{for(const l of o)if(l.evaluate(u))return!0;return!1}]]},"!":[Ai,[Ai],(u,[o])=>!o.evaluate(u)],"is-supported-script":[Ai,[Bi],(u,[o])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(o.evaluate(u))}],upcase:[Bi,[Bi],(u,[o])=>o.evaluate(u).toUpperCase()],downcase:[Bi,[Bi],(u,[o])=>o.evaluate(u).toLowerCase()],concat:[Bi,Ua(Ci),(u,o)=>o.map(l=>Ea(l.evaluate(u))).join("")],"resolved-locale":[Bi,[Mh],(u,[o])=>o.evaluate(u).resolvedLocale()],random:[Jn,[Jn,Jn,Ci],(u,o)=>{const[l,f,m]=o.map(b=>b.evaluate(u));if(l>f||l===f)return l;let x;if(typeof m=="string")x=function(b){let M=0;if(b.length===0)return M;for(let P=0;P<b.length;P++)M=(M<<5)-M+b.charCodeAt(P),M|=0;return M}(m);else{if(typeof m!="number")throw new Bn(`Invalid seed input: ${m}`);x=m}return l+Fv(x)()*(f-l)}]});class zm{constructor(o,l,f,m){this.expression=o,this._warningHistory={},this._evaluator=new Uf(f,m),this._defaultValue=l?function(x){return x.type==="color"&&(wd(x.default)||Array.isArray(x.default))?new _i(0,0,0,0):x.type==="color"?_i.parse(x.default)||null:x.default===void 0?null:x.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this.configDependencies=Ys(o)}evaluateWithoutErrorHandling(o,l,f,m,x,b,M,P){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=m||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=P||null,this.expression.evaluate(this._evaluator)}evaluate(o,l,f,m,x,b,M,P){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=P||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Bn(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${L.message}`)),this._defaultValue}}}function Lc(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in tu}function Mi(u,o,l,f){const m=new Pc(tu,[],o?function(b){const M={color:Fa,string:Bi,number:Jn,enum:Bi,boolean:Ai,formatted:mm,resolvedImage:gm};return b.type==="array"?Sa(M[b.value]||Ci,b.length):M[b.type]}(o):void 0,void 0,void 0,l,f),x=m.parse(u,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?ny(new zm(x,o,l,f)):$a(m.errors)}class uo{constructor(o,l,f,m){this.kind=o,this._styleExpression=l,this.isLightConstant=f,this.isLineProgressConstant=m,this.isStateDependent=o!=="constant"&&!Gf(l.expression),this.configDependencies=Ys(l.expression)}evaluateWithoutErrorHandling(o,l,f,m,x,b){return this._styleExpression.evaluateWithoutErrorHandling(o,l,f,m,x,b)}evaluate(o,l,f,m,x,b){return this._styleExpression.evaluate(o,l,f,m,x,b)}}class Xo{constructor(o,l,f,m,x,b){this.kind=o,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=o!=="camera"&&!Gf(l.expression),this.isLightConstant=x,this.isLineProgressConstant=b,this.configDependencies=Ys(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(o,l,f,m,x,b){return this._styleExpression.evaluateWithoutErrorHandling(o,l,f,m,x,b)}evaluate(o,l,f,m,x,b){return this._styleExpression.evaluate(o,l,f,m,x,b)}interpolationFactor(o,l,f){return this.interpolationType?Va.interpolationFactor(this.interpolationType,o,l,f):0}}function Td(u,o,l,f){if((u=Mi(u,o,l,f)).result==="error")return u;const m=u.value.expression,x=jh(m);if(!x&&!Oc(o))return $a([new $l("","data expressions not supported")]);const b=zo(m,["zoom","pitch","distance-from-center"]);if(!b&&!Om(o))return $a([new $l("","zoom expressions not supported")]);const M=zo(m,["measure-light"]);if(!M&&!rp(o))return $a([new $l("","measure-light expression not supported")]);const P=zo(m,["line-progress"]);if(!P&&!function(U){return nu(U.expression,"line-progress")}(o))return $a([new $l("","line-progress expression not supported")]);const L=o.expression&&o.expression.relaxZoomRestriction,N=ou(m);return N||b||L?N instanceof $l?$a([N]):N instanceof Va&&!ip(o)?$a([new $l("",'"interpolate" expressions cannot be used with this property')]):ny(N?new Xo(x&&P?"camera":"composite",u.value,N.labels,N instanceof Va?N.interpolation:void 0,M,P):new uo(x&&P?"constant":"source",u.value,M,P)):$a([new $l("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class iu{constructor(o,l){this._parameters=o,this._specification=l,pm(this,Lm(this._parameters,this._specification))}static deserialize(o){return new iu(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function ou(u){let o=null;if(u instanceof ds)o=ou(u.result);else if(u instanceof ey){for(const l of u.args)if(o=ou(l),o)break}else(u instanceof Wf||u instanceof Va)&&u.input instanceof ks&&u.input.name==="zoom"&&(o=u);return o instanceof $l||u.eachChild(l=>{const f=ou(l);f instanceof $l?o=f:o&&f&&o!==f&&(o=new $l("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var sp,Ed,Cd=function(){if(Ed)return sp;Ed=1,sp=o;var u=3;function o(l,f,m){var x=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var b=new Int32Array(this.arrayBuffer);l=b[0],this.d=(f=b[1])+2*(m=b[2]);for(var M=0;M<this.d*this.d;M++){var P=b[u+M],L=b[u+M+1];x.push(P===L?null:b.subarray(P,L))}var N=b[u+x.length+1];this.keys=b.subarray(b[u+x.length],N),this.bboxes=b.subarray(N),this.insert=this._insertReadonly}else{this.d=f+2*m;for(var U=0;U<this.d*this.d;U++)x.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=m,this.scale=f/l,this.uid=0;var G=m/f*l;this.min=-G,this.max=l+G}return o.prototype.insert=function(l,f,m,x,b){this._forEachCell(f,m,x,b,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(x),this.bboxes.push(b)},o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},o.prototype._insertCell=function(l,f,m,x,b,M){this.cells[b].push(M)},o.prototype.query=function(l,f,m,x,b){var M=this.min,P=this.max;if(l<=M&&f<=M&&P<=m&&P<=x&&!b)return Array.prototype.slice.call(this.keys);var L=[];return this._forEachCell(l,f,m,x,this._queryCell,L,{},b),L},o.prototype._queryCell=function(l,f,m,x,b,M,P,L){var N=this.cells[b];if(N!==null)for(var U=this.keys,G=this.bboxes,te=0;te<N.length;te++){var ne=N[te];if(P[ne]===void 0){var ce=4*ne;(L?L(G[ce+0],G[ce+1],G[ce+2],G[ce+3]):l<=G[ce+2]&&f<=G[ce+3]&&m>=G[ce+0]&&x>=G[ce+1])?(P[ne]=!0,M.push(U[ne])):P[ne]=!1}}},o.prototype._forEachCell=function(l,f,m,x,b,M,P,L){for(var N=this._convertToCellCoord(l),U=this._convertToCellCoord(f),G=this._convertToCellCoord(m),te=this._convertToCellCoord(x),ne=N;ne<=G;ne++)for(var ce=U;ce<=te;ce++){var me=this.d*ce+ne;if((!L||L(this._convertFromCellCoord(ne),this._convertFromCellCoord(ce),this._convertFromCellCoord(ne+1),this._convertFromCellCoord(ce+1)))&&b.call(this,l,f,m,x,me,M,P,L))return}},o.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},o.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,f=u+this.cells.length+1+1,m=0,x=0;x<this.cells.length;x++)m+=this.cells[x].length;var b=new Int32Array(f+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;for(var M=f,P=0;P<l.length;P++){var L=l[P];b[u+P]=M,b.set(L,M),M+=L.length}return b[u+l.length]=M,b.set(this.keys,M),b[u+l.length+1]=M+=this.keys.length,b.set(this.bboxes,M),M+=this.bboxes.length,b.buffer},sp}(),ap=Di(Cd);const Zo={};function In(u,o,l={}){Object.defineProperty(u,"_classRegistryKey",{value:o,writable:!1}),Zo[o]={klass:u,omit:l.omit||[]}}In(Object,"Object"),ap.serialize=function(u,o){const l=u.toArrayBuffer();return o&&o.add(l),{buffer:l}},ap.deserialize=function(u){return new ap(u.buffer)},Object.defineProperty(ap,"name",{value:"Grid"}),In(ap,"Grid"),typeof DOMMatrix<"u"&&In(DOMMatrix,"DOMMatrix"),In(_i,"Color"),In(Error,"Error"),In(sa,"Formatted"),In(qg,"FormattedSection"),In(cm,"AJAXError"),In(Ta,"ResolvedImage"),In(iu,"StylePropertyFunction"),In(zm,"StyleExpression",{omit:["_evaluator"]}),In(rl,"ImageId"),In(Hl,"ImageVariant"),In(Xo,"ZoomDependentExpression"),In(uo,"ZoomConstantExpression"),In(ks,"CompoundExpression",{omit:["_evaluate"]});for(const u in tu)Zo[tu[u]._classRegistryKey]||In(tu[u],`Expression${u}`);function Wh(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Ad(u){return self.ImageBitmap&&u instanceof ImageBitmap}function zu(u,o){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(Wh(u)||Ad(u))return o&&o.add(u),u;if(ArrayBuffer.isView(u))return o&&o.add(u.buffer),u;if(u instanceof ImageData)return o&&o.add(u.data.buffer),u;if(Array.isArray(u)){const l=[];for(const f of u)l.push(zu(f,o));return l}if(u instanceof Map){const l={$name:"Map",entries:[]};for(const[f,m]of u.entries())l.entries.push(zu(f),zu(m,o));return l}if(u instanceof Set){const l={$name:"Set"};let f=0;for(const m of u.values())l[++f]=zu(m);return l}if(u instanceof DOMMatrix){const l={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const m of f)l[m]=u[m];return l}if(typeof u=="bigint")return{$name:"BigInt",value:u.toString()};if(typeof u=="object"){const l=u.constructor,f=l._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${l.name}".`);const m=l.serialize?l.serialize(u,o):{};if(!l.serialize){for(const x in u)u.hasOwnProperty(x)&&(Zo[f].omit.indexOf(x)>=0||(m[x]=zu(u[x],o)));u instanceof Error&&(m.message=u.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(m.$name=f),m}throw new Error("can't serialize object of type "+typeof u)}function Md(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||Wh(u)||Ad(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(Md);if(typeof u=="object"){const o=u.$name||"Object";if(o==="Map"){const m=u.entries||[],x=new Map;for(let b=0;b<m.length;b+=2)x.set(Md(m[b]),Md(m[b+1]));return x}if(o==="Set"){const m=new Set;for(const x of Object.keys(u))x!=="$name"&&m.add(Md(u[x]));return m}if(o==="DOMMatrix"){let m;return m=u.is2D?[u.a,u.b,u.c,u.d,u.e,u.f]:[u.m11,u.m12,u.m13,u.m14,u.m21,u.m22,u.m23,u.m24,u.m31,u.m32,u.m33,u.m34,u.m41,u.m42,u.m43,u.m44],new DOMMatrix(m)}if(o==="BigInt")return BigInt(u.value);const{klass:l}=Zo[o];if(!l)throw new Error(`Can't deserialize unregistered class "${o}".`);if(l.deserialize)return l.deserialize(u);const f=Object.create(l.prototype);for(const m of Object.keys(u))m!=="$name"&&(f[m]=Md(u[m]));return f}throw new Error("can't deserialize object of type "+typeof u)}const lr={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519,Osage:u=>u>=66736&&u<=66815,"CJK Unified Ideographs Extension B":u=>u>=131072&&u<=173791};function Fm(u){for(const o of u)if(es(o.charCodeAt(0)))return!0;return!1}function jv(u){for(const o of u)if(!qa(o.charCodeAt(0)))return!1;return!0}function qa(u){return!(lr.Arabic(u)||lr["Arabic Supplement"](u)||lr["Arabic Extended-A"](u)||lr["Arabic Presentation Forms-A"](u)||lr["Arabic Presentation Forms-B"](u))}function es(u){return!(u!==746&&u!==747&&(u<4352||!(lr["Bopomofo Extended"](u)||lr.Bopomofo(u)||lr["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||lr["CJK Compatibility Ideographs"](u)||lr["CJK Compatibility"](u)||lr["CJK Radicals Supplement"](u)||lr["CJK Strokes"](u)||!(!lr["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||lr["CJK Unified Ideographs Extension A"](u)||lr["CJK Unified Ideographs"](u)||lr["Enclosed CJK Letters and Months"](u)||lr["Hangul Compatibility Jamo"](u)||lr["Hangul Jamo Extended-A"](u)||lr["Hangul Jamo Extended-B"](u)||lr["Hangul Jamo"](u)||lr["Hangul Syllables"](u)||lr.Hiragana(u)||lr["Ideographic Description Characters"](u)||lr.Kanbun(u)||lr["Kangxi Radicals"](u)||lr["Katakana Phonetic Extensions"](u)||lr.Katakana(u)&&u!==12540||!(!lr["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!lr["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||lr["Unified Canadian Aboriginal Syllabics"](u)||lr["Unified Canadian Aboriginal Syllabics Extended"](u)||lr["Vertical Forms"](u)||lr["Yijing Hexagram Symbols"](u)||lr["Yi Syllables"](u)||lr["Yi Radicals"](u))))}function iy(u){return!(es(u)||function(o){return!!(lr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||lr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||lr["Letterlike Symbols"](o)||lr["Number Forms"](o)||lr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||lr["Control Pictures"](o)&&o!==9251||lr["Optical Character Recognition"](o)||lr["Enclosed Alphanumerics"](o)||lr["Geometric Shapes"](o)||lr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||lr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||lr["CJK Symbols and Punctuation"](o)||lr.Katakana(o)||lr["Private Use Area"](o)||lr["CJK Compatibility Forms"](o)||lr["Small Form Variants"](o)||lr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(u))}function Bm(u){return lr.Arabic(u)||lr["Arabic Supplement"](u)||lr["Arabic Extended-A"](u)||lr["Arabic Presentation Forms-A"](u)||lr["Arabic Presentation Forms-B"](u)}function Nm(u){return u>=1424&&u<=2303||lr["Arabic Presentation Forms-A"](u)||lr["Arabic Presentation Forms-B"](u)}function Vv(u,o){return!(!o&&Nm(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||lr.Khmer(u))}function Fu(u){for(const o of u)if(Nm(o.charCodeAt(0)))return!0;return!1}const lp="deferred",jm="loading",Vm="loaded";let oy=null,Ha="unavailable",Bu=null;const Rd=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(Ha="error"),oy&&oy(u)};function Um(){$m.fire(new Kc("pluginStateChange",{pluginStatus:Ha,pluginURL:Bu}))}const $m=new pd,Dd=function(){return Ha},Uv=function(){if(Ha!==lp||!Bu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ha=jm,Um(),Bu&&hd({url:Bu},u=>{u?Rd(u):(Ha=Vm,Um())})},Zl={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ha===Vm||Zl.applyArabicShaping!=null,isLoading:()=>Ha===jm,setState(u){Ha=u.pluginStatus,Bu=u.pluginURL},isParsed:()=>Zl.applyArabicShaping!=null&&Zl.processBidirectionalText!=null&&Zl.processStyledBidirectionalText!=null,getPluginURL:()=>Bu};class Ii{constructor(o,l){this.zoom=o,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch,this.brightness=l.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return function(l,f){for(const m of l)if(!Vv(m.charCodeAt(0),f))return!1;return!0}(o,Zl.isLoaded())}}class cp{constructor(o,l,f,m){this.property=o,this.value=l,this.expression=function(x,b,M,P){if(wd(x))return new iu(x,b);if(Lc(x)||Array.isArray(x)&&x.length>0){const L=Td(x,b,M,P);if(L.result==="error")throw new Error(L.value.map(N=>`${N.key}: ${N.message}`).join(", "));return L.value}{let L=x;return typeof x=="string"&&b.type==="color"&&(L=_i.parse(x)),{kind:"constant",configDependencies:new Set,evaluate:()=>L}}}(l===void 0?o.specification.default:l,o.specification,f,m)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,l,f){return this.property.possiblyEvaluate(this,o,l,f)}}class Nu{constructor(o,l,f){this.property=o,this.value=new cp(o,void 0,l,f)}transitioned(o,l){return new $v(this.property,this.value,l,st({},o.transition,this.transition),o.now)}untransitioned(){return new $v(this.property,this.value,null,{},0)}}class sy{constructor(o,l,f){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=l,this._options=f,this.configDependencies=new Set}getValue(o){return kr(this._values[o].value.value)}setValue(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new Nu(this._values[o].property,this._scope,this._options)),this._values[o].value=new cp(this._values[o].property,l===null?void 0:kr(l),this._scope,this._options),this._values[o].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].value.expression.configDependencies]))}setTransitionOrValue(o,l){l&&(this._options=l);const f=this._properties.properties;if(o)for(const m in o){const x=o[m];if(m.endsWith("-transition")){const b=m.slice(0,-11);f[b]&&this.setTransition(b,x)}else f.hasOwnProperty(m)&&this.setValue(m,x)}}getTransition(o){return kr(this._values[o].transition)}setTransition(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new Nu(this._values[o].property)),this._values[o].transition=kr(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(o[l]=f);const m=this.getTransition(l);m!==void 0&&(o[`${l}-transition`]=m)}return o}transitioned(o,l){const f=new qv(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(o,l._values[m]);return f}untransitioned(){const o=new qv(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class $v{constructor(o,l,f,m,x){const b=m.delay||0,M=m.duration||0;x=x||0,this.property=o,this.value=l,this.begin=x+b,this.end=this.begin+M,o.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(o,l,f){const m=o.now||0,x=this.value.possiblyEvaluate(o,l,f),b=this.prior;if(b){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return b.possiblyEvaluate(o,l,f);{const M=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(o,l,f),x,ke(M))}}return x}}class qv{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,f){const m=new Pd(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(o,l,f);return m}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class J0{constructor(o,l,f){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=l,this._options=f,this.configDependencies=new Set}getValue(o){return kr(this._values[o].value)}setValue(o,l){this._values[o]=new cp(this._values[o].property,l===null?void 0:kr(l),this._scope,this._options),this._values[o].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].expression.configDependencies]))}serialize(){const o={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(o[l]=f)}return o}possiblyEvaluate(o,l,f){const m=new Pd(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(o,l,f);return m}}class Yh{constructor(o,l,f){this.property=o,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,l,f,m){return this.property.evaluate(this.value,this.parameters,o,l,f,m)}}class Pd{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class pn{constructor(o){this.specification=o}possiblyEvaluate(o,l){return o.expression.evaluate(l)}interpolate(o,l,f){const m=fm[this.specification.type];return m?m(o,l,f):o}}class Pn{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,f,m){return new Yh(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(l,null,{},f,m)}:o.expression,l)}interpolate(o,l,f){if(o.value.kind!=="constant"||l.value.kind!=="constant")return o;if(o.value.value===void 0||l.value.value===void 0)return new Yh(this,{kind:"constant",value:void 0},o.parameters);const m=fm[this.specification.type];return m?new Yh(this,{kind:"constant",value:m(o.value.value,l.value.value,f)},o.parameters):o}evaluate(o,l,f,m,x,b){return o.kind==="constant"?o.value:o.evaluate(l,f,m,x,b)}}class Kl{constructor(o){this.specification=o}possiblyEvaluate(o,l,f,m){return!!o.expression.evaluate(l,null,{},f,m)}interpolate(){return!1}}class yo{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new Ii(0,{});for(const f in o){const m=o[f];m.specification.overridable&&this.overridableProperties.push(f);const x=this.defaultPropertyValues[f]=new cp(m,void 0),b=this.defaultTransitionablePropertyValues[f]=new Nu(m);this.defaultTransitioningPropertyValues[f]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=x.possiblyEvaluate(l)}}}In(Pn,"DataDrivenProperty"),In(pn,"DataConstantProperty"),In(Kl,"ColorRampProperty");var pt=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-wall-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white"},"sky-atmosphere-color":{"type":"color","default":"white"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function ul(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Id(u){if(Array.isArray(u))return u.map(Id);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const o={};for(const l in u)o[l]=Id(u[l]);return o}return ul(u)}function qm(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const o of u.slice(1))if(!qm(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function ay(u,o="",l=null,f="fill"){if(u==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};qm(u)||(u=Hm(u));const m=u;let x=!0;try{x=function(N){if(!Xh(N))return N;let U=Id(N);return Gv(U),U=Hv(U),U}(m)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(m,null,2)}
        `)}let b=null,M=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){M=pt[`filter_${f}`];const N=Mi(x,M,o,l);if(N.result==="error")throw new Error(N.value.map(U=>`${U.key}: ${U.message}`).join(", "));b=(U,G,te)=>N.value.evaluate(U,G,{},te)}let P=null,L=null;if(x!==m){const N=Mi(m,M,o,l);if(N.result==="error")throw new Error(N.value.map(U=>`${U.key}: ${U.message}`).join(", "));P=(U,G,te,ne,ce)=>N.value.evaluate(U,G,{},te,void 0,void 0,ne,ce),L=!jh(N.value.expression)}return{filter:b,dynamicFilter:P||void 0,needGeometry:Yv(x),needFeature:!!L}}function Hv(u){if(!Array.isArray(u))return u;const o=function(l){if(ex.has(l[0])){for(let f=1;f<l.length;f++)if(Xh(l[f]))return!0}return l}(u);return o===!0?o:o.map(l=>Hv(l))}function Gv(u){let o=!1;const l=[];if(u[0]==="case"){for(let f=1;f<u.length-1;f+=2)o=o||Xh(u[f]),l.push(u[f+1]);l.push(u[u.length-1])}else if(u[0]==="match"){o=o||Xh(u[1]);for(let f=2;f<u.length-1;f+=2)l.push(u[f+1]);l.push(u[u.length-1])}else if(u[0]==="step"){o=o||Xh(u[1]);for(let f=1;f<u.length-1;f+=2)l.push(u[f+1])}o&&(u.length=0,u.push("any",...l));for(let f=1;f<u.length;f++)Gv(u[f])}function Xh(u){if(!Array.isArray(u))return!1;if((o=u[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let l=1;l<u.length;l++)if(Xh(u[l]))return!0;return!1}const ex=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Wv(u,o){return u<o?-1:u>o?1:0}function Yv(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let o=1;o<u.length;o++)if(Yv(u[o]))return!0;return!1}function Hm(u){if(!u)return!0;const o=u[0];return u.length<=1?o!=="any":o==="=="?Gm(u[1],u[2],"=="):o==="!="?cy(Gm(u[1],u[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Gm(u[1],u[2],o):o==="any"?(l=u.slice(1),["any"].concat(l.map(Hm))):o==="all"?["all"].concat(u.slice(1).map(Hm)):o==="none"?["all"].concat(u.slice(1).map(Hm).map(cy)):o==="in"?ly(u[1],u.slice(2)):o==="!in"?cy(ly(u[1],u.slice(2))):o==="has"?Xv(u[1]):o!=="!has"||cy(Xv(u[1]));var l}function Gm(u,o,l){switch(u){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,u,o]}}function ly(u,o){if(o.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",u,["literal",o.sort(Wv)]]:["filter-in-small",u,["literal",o]]}}function Xv(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function cy(u){return["!",u]}const Zh="";function kd(u,o){return o?`${u}${Zh}${o}`:u}const uy="-transition",su=new Set(["fill","line","background","hillshade","raster"]);class la extends pd{constructor(o,l,f,m,x){if(super(),this.id=o.id,this.fqid=kd(this.id,f),this.type=o.type,this.scope=f,this.lut=m,this.options=x,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,o.type!=="custom"){if(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type&&o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"){this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter;const b=Mi(this.filter,pt[`filter_${o.type}`]);b.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...b.value.configDependencies]))}if(o.slot&&(this.slot=o.slot),l.layout&&(this._unevaluatedLayout=new J0(l.layout,this.scope,x),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),l.paint){this._transitionablePaint=new sy(l.paint,this.scope,x);for(const b in o.paint)this.setPaintProperty(b,o.paint[b]);for(const b in o.layout)this.setLayoutProperty(b,o.layout[b]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pd(l.paint)}}}onAdd(o){}onRemove(o){}isDraped(o){return!this.is3D(!0)&&su.has(this.type)}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,l){if(this.type==="custom"&&o==="visibility")return void(this.visibility=l);const f=this._unevaluatedLayout;f._properties.properties[o]&&(f.setValue(o,l),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),o==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(o){return o.endsWith(uy)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l){const f=this._transitionablePaint,m=f._properties.properties;if(o.endsWith(uy)){const U=o.slice(0,-11);return m[U]&&f.setTransition(U,l||void 0),!1}if(!m[o])return!1;const x=f._values[o],b=x.value.isDataDriven(),M=x.value;f.setValue(o,l),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(o);const P=f._values[o].value,L=P.isDataDriven(),N=o.endsWith("pattern")||o==="line-dasharray";return L||b||N||this._handleOverridablePaintPropertyUpdate(o,M,P)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,l,f){return null}_handleOverridablePaintPropertyUpdate(o,l,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){return tr({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}is3D(o){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof Yh&&Oc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(o){this._filterCompiled||(this._featureFilter=ay(this.filter,this.scope,o),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(o){}queryIntersectsFeature(o,l,f,m,x,b,M,P,L){}}const tx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Wm{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class io{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.add(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ui(u,o=1){let l=0,f=0;return{members:u.map(m=>{const x=tx[m.type].BYTES_PER_ELEMENT,b=l=Kh(l,Math.max(o,x)),M=m.components||1;return f=Math.max(f,x),l+=x*M,{name:m.name,type:m.type,components:M,offset:b}}),size:Kh(l,Math.max(f,o)),alignment:o}}function Kh(u,o){return Math.ceil(u/o)*o}class zc extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const m=2*o;return this.int16[m+0]=l,this.int16[m+1]=f,o}}zc.prototype.bytesPerElement=4,In(zc,"StructArrayLayout2i4");class Qh extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,o,l,f)}emplace(o,l,f,m){const x=3*o;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=m,o}}Qh.prototype.bytesPerElement=6,In(Qh,"StructArrayLayout3i6");class Od extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,f,m)}emplace(o,l,f,m,x){const b=4*o;return this.int16[b+0]=l,this.int16[b+1]=f,this.int16[b+2]=m,this.int16[b+3]=x,o}}Od.prototype.bytesPerElement=8,In(Od,"StructArrayLayout4i8");class Jh extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}Jh.prototype.bytesPerElement=4,In(Jh,"StructArrayLayout1f4");class ef extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,o,l,f)}emplace(o,l,f,m){const x=4*o,b=2*o;return this.int16[x+0]=l,this.int16[x+1]=f,this.float32[b+1]=m,o}}ef.prototype.bytesPerElement=8,In(ef,"StructArrayLayout2i1f8");class tf extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,o,l,f)}emplace(o,l,f,m){const x=4*o;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=m,o}}tf.prototype.bytesPerElement=8,In(tf,"StructArrayLayout3i8");class dy extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,m,x)}emplace(o,l,f,m,x,b){const M=5*o;return this.int16[M+0]=l,this.int16[M+1]=f,this.int16[M+2]=m,this.int16[M+3]=x,this.int16[M+4]=b,o}}dy.prototype.bytesPerElement=10,In(dy,"StructArrayLayout5i10");class Zv extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,m,x,b,M)}emplace(o,l,f,m,x,b,M,P){const L=6*o,N=12*o,U=3*o;return this.int16[L+0]=l,this.int16[L+1]=f,this.uint8[N+4]=m,this.uint8[N+5]=x,this.uint8[N+6]=b,this.uint8[N+7]=M,this.float32[U+2]=P,o}}Zv.prototype.bytesPerElement=12,In(Zv,"StructArrayLayout2i4ub1f12");class Ga extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,o,l,f)}emplace(o,l,f,m){const x=3*o;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=m,o}}Ga.prototype.bytesPerElement=12,In(Ga,"StructArrayLayout3f12");class Al extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,m,x)}emplace(o,l,f,m,x,b){const M=6*o,P=3*o;return this.uint16[M+0]=l,this.uint16[M+1]=f,this.uint16[M+2]=m,this.uint16[M+3]=x,this.float32[P+2]=b,o}}Al.prototype.bytesPerElement=12,In(Al,"StructArrayLayout4ui1f12");class nf extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,f,m)}emplace(o,l,f,m,x){const b=4*o;return this.uint16[b+0]=l,this.uint16[b+1]=f,this.uint16[b+2]=m,this.uint16[b+3]=x,o}}nf.prototype.bytesPerElement=8,In(nf,"StructArrayLayout4ui8");class Fc extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,o,l,f,m,x,b)}emplace(o,l,f,m,x,b,M){const P=6*o;return this.int16[P+0]=l,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=x,this.int16[P+4]=b,this.int16[P+5]=M,o}}Fc.prototype.bytesPerElement=12,In(Fc,"StructArrayLayout6i12");class ju extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L,N,U,G){const te=this.length;return this.resize(te+1),this.emplace(te,o,l,f,m,x,b,M,P,L,N,U,G)}emplace(o,l,f,m,x,b,M,P,L,N,U,G,te){const ne=12*o;return this.int16[ne+0]=l,this.int16[ne+1]=f,this.int16[ne+2]=m,this.int16[ne+3]=x,this.uint16[ne+4]=b,this.uint16[ne+5]=M,this.uint16[ne+6]=P,this.uint16[ne+7]=L,this.int16[ne+8]=N,this.int16[ne+9]=U,this.int16[ne+10]=G,this.int16[ne+11]=te,o}}ju.prototype.bytesPerElement=24,In(ju,"StructArrayLayout4i4ui4i24");class Aa extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,o,l,f,m,x,b)}emplace(o,l,f,m,x,b,M){const P=10*o,L=5*o;return this.int16[P+0]=l,this.int16[P+1]=f,this.int16[P+2]=m,this.float32[L+2]=x,this.float32[L+3]=b,this.float32[L+4]=M,o}}Aa.prototype.bytesPerElement=20,In(Aa,"StructArrayLayout3i3f20");class Bc extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,f,m)}emplace(o,l,f,m,x){const b=4*o;return this.float32[b+0]=l,this.float32[b+1]=f,this.float32[b+2]=m,this.float32[b+3]=x,o}}Bc.prototype.bytesPerElement=16,In(Bc,"StructArrayLayout4f16");class Ld extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}Ld.prototype.bytesPerElement=4,In(Ld,"StructArrayLayout1ul4");class Vu extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const m=2*o;return this.uint16[m+0]=l,this.uint16[m+1]=f,o}}Vu.prototype.bytesPerElement=4,In(Vu,"StructArrayLayout2ui4");class dl extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L,N,U,G,te){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,l,f,m,x,b,M,P,L,N,U,G,te)}emplace(o,l,f,m,x,b,M,P,L,N,U,G,te,ne){const ce=20*o,me=10*o;return this.int16[ce+0]=l,this.int16[ce+1]=f,this.int16[ce+2]=m,this.int16[ce+3]=x,this.int16[ce+4]=b,this.float32[me+3]=M,this.float32[me+4]=P,this.float32[me+5]=L,this.float32[me+6]=N,this.int16[ce+14]=U,this.uint32[me+8]=G,this.uint16[ce+18]=te,this.uint16[ce+19]=ne,o}}dl.prototype.bytesPerElement=40,In(dl,"StructArrayLayout5i4f1i1ul2ui40");class Ml extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,m,x,b,M)}emplace(o,l,f,m,x,b,M,P){const L=8*o;return this.int16[L+0]=l,this.int16[L+1]=f,this.int16[L+2]=m,this.int16[L+4]=x,this.int16[L+5]=b,this.int16[L+6]=M,this.int16[L+7]=P,o}}Ml.prototype.bytesPerElement=16,In(Ml,"StructArrayLayout3i2i2i16");class Ql extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,m,x)}emplace(o,l,f,m,x,b){const M=4*o,P=8*o;return this.float32[M+0]=l,this.float32[M+1]=f,this.float32[M+2]=m,this.int16[P+6]=x,this.int16[P+7]=b,o}}Ql.prototype.bytesPerElement=16,In(Ql,"StructArrayLayout2f1f2i16");class hy extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b){const M=this.length;return this.resize(M+1),this.emplace(M,o,l,f,m,x,b)}emplace(o,l,f,m,x,b,M){const P=20*o,L=5*o;return this.uint8[P+0]=l,this.uint8[P+1]=f,this.float32[L+1]=m,this.float32[L+2]=x,this.float32[L+3]=b,this.float32[L+4]=M,o}}hy.prototype.bytesPerElement=20,In(hy,"StructArrayLayout2ub4f20");class Do extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f){const m=this.length;return this.resize(m+1),this.emplace(m,o,l,f)}emplace(o,l,f,m){const x=3*o;return this.uint16[x+0]=l,this.uint16[x+1]=f,this.uint16[x+2]=m,o}}Do.prototype.bytesPerElement=6,In(Do,"StructArrayLayout3ui6");class Nc extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me,ue,we){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me,ue,we)}emplace(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me,ue,we,Pe){const Be=30*o,Qe=15*o,rt=60*o;return this.int16[Be+0]=l,this.int16[Be+1]=f,this.int16[Be+2]=m,this.float32[Qe+2]=x,this.float32[Qe+3]=b,this.uint16[Be+8]=M,this.uint16[Be+9]=P,this.uint32[Qe+5]=L,this.uint32[Qe+6]=N,this.uint32[Qe+7]=U,this.uint16[Be+16]=G,this.uint16[Be+17]=te,this.uint16[Be+18]=ne,this.float32[Qe+10]=ce,this.float32[Qe+11]=me,this.uint8[rt+48]=ve,this.uint8[rt+49]=Ie,this.uint8[rt+50]=Me,this.uint32[Qe+13]=ue,this.int16[Be+28]=we,this.uint8[rt+58]=Pe,o}}Nc.prototype.bytesPerElement=60,In(Nc,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class _s extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me,ue,we,Pe,Be,Qe,rt,ot,ct,At,Yt,Vt,qt,nn,Et){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me,ue,we,Pe,Be,Qe,rt,ot,ct,At,Yt,Vt,qt,nn,Et)}emplace(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me,ue,we,Pe,Be,Qe,rt,ot,ct,At,Yt,Vt,qt,nn,Et,Ut){const bt=20*o,Ct=40*o,on=80*o;return this.float32[bt+0]=l,this.float32[bt+1]=f,this.int16[Ct+4]=m,this.int16[Ct+5]=x,this.int16[Ct+6]=b,this.int16[Ct+7]=M,this.int16[Ct+8]=P,this.int16[Ct+9]=L,this.int16[Ct+10]=N,this.int16[Ct+11]=U,this.int16[Ct+12]=G,this.uint16[Ct+13]=te,this.uint16[Ct+14]=ne,this.uint16[Ct+15]=ce,this.uint16[Ct+16]=me,this.uint16[Ct+17]=ve,this.uint16[Ct+18]=Ie,this.uint16[Ct+19]=Me,this.uint16[Ct+20]=ue,this.uint16[Ct+21]=we,this.uint16[Ct+22]=Pe,this.uint16[Ct+23]=Be,this.uint16[Ct+24]=Qe,this.uint16[Ct+25]=rt,this.uint16[Ct+26]=ot,this.uint16[Ct+27]=ct,this.uint32[bt+14]=At,this.float32[bt+15]=Yt,this.float32[bt+16]=Vt,this.float32[bt+17]=qt,this.float32[bt+18]=nn,this.uint8[on+76]=Et,this.uint16[Ct+39]=Ut,o}}_s.prototype.bytesPerElement=80,In(_s,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class jc extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,m,x)}emplace(o,l,f,m,x,b){const M=5*o;return this.float32[M+0]=l,this.float32[M+1]=f,this.float32[M+2]=m,this.float32[M+3]=x,this.float32[M+4]=b,o}}jc.prototype.bytesPerElement=20,In(jc,"StructArrayLayout5f20");class rf extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,m,x,b,M)}emplace(o,l,f,m,x,b,M,P){const L=7*o;return this.float32[L+0]=l,this.float32[L+1]=f,this.float32[L+2]=m,this.float32[L+3]=x,this.float32[L+4]=b,this.float32[L+5]=M,this.float32[L+6]=P,o}}rf.prototype.bytesPerElement=28,In(rf,"StructArrayLayout7f28");class Ym extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L,N,U){const G=this.length;return this.resize(G+1),this.emplace(G,o,l,f,m,x,b,M,P,L,N,U)}emplace(o,l,f,m,x,b,M,P,L,N,U,G){const te=11*o;return this.float32[te+0]=l,this.float32[te+1]=f,this.float32[te+2]=m,this.float32[te+3]=x,this.float32[te+4]=b,this.float32[te+5]=M,this.float32[te+6]=P,this.float32[te+7]=L,this.float32[te+8]=N,this.float32[te+9]=U,this.float32[te+10]=G,o}}Ym.prototype.bytesPerElement=44,In(Ym,"StructArrayLayout11f44");class Xm extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L){const N=this.length;return this.resize(N+1),this.emplace(N,o,l,f,m,x,b,M,P,L)}emplace(o,l,f,m,x,b,M,P,L,N){const U=9*o;return this.float32[U+0]=l,this.float32[U+1]=f,this.float32[U+2]=m,this.float32[U+3]=x,this.float32[U+4]=b,this.float32[U+5]=M,this.float32[U+6]=P,this.float32[U+7]=L,this.float32[U+8]=N,o}}Xm.prototype.bytesPerElement=36,In(Xm,"StructArrayLayout9f36");class zd extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const m=2*o;return this.float32[m+0]=l,this.float32[m+1]=f,o}}zd.prototype.bytesPerElement=8,In(zd,"StructArrayLayout2f8");class Uu extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,f,m)}emplace(o,l,f,m,x){const b=6*o;return this.uint32[3*o+0]=l,this.uint16[b+2]=f,this.uint16[b+3]=m,this.uint16[b+4]=x,o}}Uu.prototype.bytesPerElement=12,In(Uu,"StructArrayLayout1ul3ui12");class Fd extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}Fd.prototype.bytesPerElement=2,In(Fd,"StructArrayLayout1ui2");class of extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me){const ve=this.length;return this.resize(ve+1),this.emplace(ve,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me)}emplace(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve){const Ie=16*o;return this.float32[Ie+0]=l,this.float32[Ie+1]=f,this.float32[Ie+2]=m,this.float32[Ie+3]=x,this.float32[Ie+4]=b,this.float32[Ie+5]=M,this.float32[Ie+6]=P,this.float32[Ie+7]=L,this.float32[Ie+8]=N,this.float32[Ie+9]=U,this.float32[Ie+10]=G,this.float32[Ie+11]=te,this.float32[Ie+12]=ne,this.float32[Ie+13]=ce,this.float32[Ie+14]=me,this.float32[Ie+15]=ve,o}}of.prototype.bytesPerElement=64,In(of,"StructArrayLayout16f64");class up extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,m,x,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,m,x,b,M)}emplace(o,l,f,m,x,b,M,P){const L=10*o,N=5*o;return this.uint16[L+0]=l,this.uint16[L+1]=f,this.uint16[L+2]=m,this.uint16[L+3]=x,this.float32[N+2]=b,this.float32[N+3]=M,this.float32[N+4]=P,o}}up.prototype.bytesPerElement=20,In(up,"StructArrayLayout4ui3f20");class fy extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.int16[1*o+0]=l,o}}fy.prototype.bytesPerElement=2,In(fy,"StructArrayLayout1i2");class sf extends io{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint8[1*o+0]=l,o}}sf.prototype.bytesPerElement=1,In(sf,"StructArrayLayout1ub1");class Kv extends Wm{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Kv.prototype.size=40;class dp extends dl{get(o){return new Kv(this,o)}}In(dp,"CollisionBoxArray");class Qv extends Wm{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Qv.prototype.size=60;class Jv extends Nc{get(o){return new Qv(this,o)}}In(Jv,"PlacedSymbolArray");class nx extends Wm{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}nx.prototype.size=80;class e_ extends _s{get(o){return new nx(this,o)}}In(e_,"SymbolInstanceArray");class Ms extends Jh{getoffsetX(o){return this.float32[1*o+0]}}In(Ms,"GlyphOffsetArray");class Xs extends zc{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}In(Xs,"SymbolLineVertexArray");class t_ extends Wm{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}t_.prototype.size=12;class n_ extends Uu{get(o){return new t_(this,o)}}In(n_,"FeatureIndexArray");class r_ extends Vu{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}In(r_,"FillExtrusionCentroidArray");class i_ extends Wm{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}i_.prototype.size=6;class o_ extends Qh{get(o){return new i_(this,o)}}In(o_,"FillExtrusionWallArray");const py=ui([{name:"a_pos",components:2,type:"Int16"}],4),s_=ui([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ho{constructor(o=[]){this.segments=o}_prepareSegment(o,l,f,m){let x=this.segments[this.segments.length-1];return o>ho.MAX_VERTEX_ARRAY_LENGTH&&Ir(`Max vertices per segment is ${ho.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!x||x.vertexLength+o>ho.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m)&&(x={vertexOffset:l,primitiveOffset:f,vertexLength:0,primitiveLength:0},m!==void 0&&(x.sortKey=m),this.segments.push(x)),x}prepareSegment(o,l,f,m){return this._prepareSegment(o,l.length,f.length,m)}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,f,m){return new ho([{vertexOffset:o,primitiveOffset:l,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function a_(u,o){return 256*(u=We(Math.floor(u),0,255))+We(Math.floor(o),0,255)}ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,In(ho,"SegmentVector");const rx=ui([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Bd=ui([{name:"a_pattern_b",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),l_=ui([{name:"a_dash",components:4,type:"Uint16"}]);class Nd{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,l,f,m){this.ids.push(c_(o)),this.positions.push(l,f,m)}eachPosition(o,l){const f=c_(o);let m=0,x=this.ids.length-1;for(;m<x;){const b=m+x>>1;this.ids[b]>=f?x=b:m=b+1}for(;this.ids[m]===f;)l(this.positions[3*m],this.positions[3*m+1],this.positions[3*m+2]),m++}static serialize(o,l){const f=new Float64Array(o.ids),m=new Uint32Array(o.positions);return hp(f,m,0,f.length-1),l&&(l.add(f.buffer),l.add(m.buffer)),{ids:f,positions:m}}static deserialize(o){const l=new Nd;let f;l.ids=o.ids,l.positions=o.positions;for(const m of l.ids)m!==f&&l.uniqueIds.push(m),f=m;return l.indexed=!0,l}}function c_(u){const o=+u;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:nl(String(u))}function hp(u,o,l,f){for(;l<f;){const m=u[l+f>>1];let x=l-1,b=f+1;for(;;){do x++;while(u[x]<m);do b--;while(u[b]>m);if(x>=b)break;jd(u,x,b),jd(o,3*x,3*b),jd(o,3*x+1,3*b+1),jd(o,3*x+2,3*b+2)}b-l<f-b?(hp(u,o,l,b),l=b+1):(hp(u,o,b+1,f),f=b)}}function jd(u,o,l){const f=u[o];u[o]=u[l],u[l]=f}In(Nd,"FeaturePositionMap");class Jl{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,l),this.initialized=!0),!!this.location}set(o,l,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Zm extends Jl{constructor(o){super(o),this.current=0}set(o,l,f){this.fetchUniformLocation(o,l)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class Po extends Jl{constructor(o){super(o),this.current=0}set(o,l,f){this.fetchUniformLocation(o,l)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class ec extends Jl{constructor(o){super(o),this.current=[0,0]}set(o,l,f){this.fetchUniformLocation(o,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class Rl extends Jl{constructor(o){super(o),this.current=[0,0,0]}set(o,l,f){this.fetchUniformLocation(o,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class fp extends Jl{constructor(o){super(o),this.current=[0,0,0,0]}set(o,l,f){this.fetchUniformLocation(o,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class ix extends Jl{constructor(o){super(o),this.current=_i.transparent.toRenderColor(null)}set(o,l,f){this.fetchUniformLocation(o,l)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const ox=new Float32Array(16);class Dl extends Jl{constructor(o){super(o),this.current=ox}set(o,l,f){if(this.fetchUniformLocation(o,l)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let m=1;m<16;m++)if(f[m]!==this.current[m]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const u_=new Float32Array(9),pp=new Float32Array(4);class Ma extends Jl{constructor(o){super(o),this.current=pp}set(o,l,f){if(this.fetchUniformLocation(o,l)){for(let m=0;m<4;m++)if(f[m]!==this.current[m]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function Fo(u){return[a_(255*u.r,255*u.g),a_(255*u.b,255*u.a)]}class Km{constructor(o,l,f,m){this.value=o,this.uniformNames=l.map(x=>`u_${x}`),this.type=f,this.context=m}setUniform(o,l,f,m,x){const b=m.constantOr(this.value);l.set(o,x,b instanceof _i?b.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):b)}getBinding(o,l){return this.type==="color"?new ix(o):new Po(o)}}class mp{constructor(o,l){this.uniformNames=l.map(f=>`u_${f}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(o,l){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br),this.patternTransition=l?l.tl.concat(l.br):this.pattern}setUniform(o,l,f,m,x){let b=null;x!=="u_pattern"&&x!=="u_dash"||(b=this.pattern),x==="u_pattern_b"&&(b=this.patternTransition),x==="u_pixel_ratio"&&(b=this.pixelRatio),b&&l.set(o,x,b)}getBinding(o,l){return l==="u_pattern"||l==="u_pattern_b"||l==="u_dash"?new fp(o):new Po(o)}}class au{constructor(o,l,f,m){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(o,l,f,m,x,b,M){const P=this.paintVertexArray.length,L=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Ii(0,{brightness:b}),l,{},x,m,M):this.expression.kind==="constant"&&this.expression.value,N=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ii(0,{brightness:b}),l,{},x,m,M):this.lutExpression.value)==="none";this.paintVertexArray.resize(o),this._setPaintValue(P,o,L,N?null:this.context.lut)}updatePaintArray(o,l,f,m,x,b,M){const P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:M},f,m,void 0,x):this.expression.kind==="constant"&&this.expression.value,L=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ii(0,{brightness:M}),f,m,void 0,x):this.lutExpression.value)==="none";this._setPaintValue(o,l,P,L?null:this.context.lut)}_setPaintValue(o,l,f,m){if(this.type==="color"){const x=Fo(f.toRenderColor(m));for(let b=o;b<l;b++)this.paintVertexArray.emplace(b,x[0],x[1])}else{for(let x=o;x<l;x++)this.paintVertexArray.emplace(x,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wa{constructor(o,l,f,m,x,b){this.expression=o,this.uniformNames=l.map(M=>`u_${M}_t`),this.type=f,this.useIntegerZoom=m,this.context=x,this.maxValue=0,this.paintVertexAttributes=l.map(M=>({name:`a_${M}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(o,l,f,m,x,b,M){const P=this.expression.evaluate(new Ii(this.context.zoom,{brightness:b}),l,{},x,m,M),L=this.expression.evaluate(new Ii(this.context.zoom+1,{brightness:b}),l,{},x,m,M),N=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ii(0,{brightness:b}),l,{},x,m,M):this.lutExpression.value)==="none",U=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(U,o,P,L,N?null:this.context.lut)}updatePaintArray(o,l,f,m,x,b,M){const P=this.expression.evaluate({zoom:this.context.zoom,brightness:M},f,m,void 0,x),L=this.expression.evaluate({zoom:this.context.zoom+1,brightness:M},f,m,void 0,x),N=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Ii(0,{brightness:M}),f,m,void 0,x):this.lutExpression.value)==="none";this._setPaintValue(o,l,P,L,N?null:this.context.lut)}_setPaintValue(o,l,f,m,x){if(this.type==="color"){const b=Fo(f.toRenderColor(x)),M=Fo(f.toRenderColor(x));for(let P=o;P<l;P++)this.paintVertexArray.emplace(P,b[0],b[1],M[0],M[1])}else{for(let b=o;b<l;b++)this.paintVertexArray.emplace(b,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l,f,m,x){const b=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,M=We(this.expression.interpolationFactor(b,this.context.zoom,this.context.zoom+1),0,1);l.set(o,x,M)}getBinding(o,l){return new Po(o)}}class Zs{constructor(o,l,f,m,x){this.expression=o,this.layerId=x,this.paintVertexAttributes=(f==="array"?l_:rx).members;for(let b=0;b<l.length;++b);this.paintVertexArray=new m,this.paintTransitionVertexArray=new Al}populatePaintArray(o,l,f,m){const x=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(x,o,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(o,l,f,m,x,b,M){this._setPaintValues(o,l,f.patterns&&f.patterns[this.layerId],b)}_setPaintValues(o,l,f,m){if(!m||!f)return;const x=m[f[0]],b=m[f[1]];if(x){if(x){const{tl:M,br:P,pixelRatio:L}=x;for(let N=o;N<l;N++)this.paintVertexArray.emplace(N,M[0],M[1],P[0],P[1],L)}if(b){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:M,br:P,pixelRatio:L}=b;for(let N=o;N<l;N++)this.paintTransitionVertexArray.emplace(N,M[0],M[1],P[0],P[1],L)}}}upload(o){const l=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,l)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=o.createVertexBuffer(this.paintTransitionVertexArray,Bd.members,l))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class $u{constructor(o,l,f=()=>!0){this.binders={},this._buffers=[],this.context=l;const m=[];for(const x in o.paint._values){const b=o.paint.get(x);if(x.endsWith("-use-theme")||!f(x)||!(b instanceof Yh&&Oc(b.property.specification)))continue;const M=a(x,o.type),P=b.value,L=b.property.specification.type,N=!!b.property.useIntegerZoom,U=x==="line-dasharray"||x.endsWith("pattern"),G=o.paint.get(`${x}-use-theme`),te=x==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant"||G&&G.value.kind!=="constant";if(P.kind!=="constant"||te)if(P.kind==="source"||te||U){const ne=S(x,L,"source");this.binders[x]=U?new Zs(P,M,L,ne,o.id):new au(P,M,L,ne),m.push(`/a_${x}`)}else{const ne=S(x,L,"composite");this.binders[x]=new Wa(P,M,L,N,l,ne),m.push(`/z_${x}`)}else this.binders[x]=U?new mp(P.value,M):new Km(P.value,M,L,l),m.push(`/u_${x}`);G&&(this.binders[x].lutExpression=G.value)}this.cacheKey=m.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof au||l instanceof Wa?l.maxValue:0}populatePaintArrays(o,l,f,m,x,b,M){for(const P in this.binders){const L=this.binders[P];L.context=this.context,(L instanceof au||L instanceof Wa||L instanceof Zs)&&L.populatePaintArray(o,l,f,m,x,b,M)}}setConstantPatternPositions(o,l){for(const f in this.binders){const m=this.binders[f];m instanceof mp&&m.setConstantPatternPositions(o,l)}}getPatternTransitionVertexBuffer(o){const l=this.binders[o];return l instanceof Zs?l.paintTransitionVertexBuffer:null}updatePaintArrays(o,l,f,m,x,b,M,P,L){let N=!1;const U=Object.keys(o),G=U.length!==0&&!P,te=G?U:l.uniqueIds;this.context.lut=x.lut;for(const ne in this.binders){const ce=this.binders[ne];if(ce.context=this.context,(ce instanceof au||ce instanceof Wa||ce instanceof Zs)&&ce.expression&&ce.expression.kind&&ce.expression.kind!=="constant"&&(ce.expression.isStateDependent===!0||ce.expression.isLightConstant===!1)){const me=x.paint.get(ne);ce.expression=me.value;for(const ve of te){const Ie=o[ve.toString()];l.eachPosition(ve,(Me,ue,we)=>{const Pe=m.feature(Me);ce.updatePaintArray(ue,we,Pe,Ie,b,M,L)})}if(!G)for(const ve of f.uniqueIds){const Ie=o[ve.toString()];f.eachPosition(ve,(Me,ue,we)=>{const Pe=m.feature(Me);ce.updatePaintArray(ue,we,Pe,Ie,b,M,L)})}N=!0}}return N}defines(){const o=[];for(const l in this.binders){const f=this.binders[l];(f instanceof Km||f instanceof mp)&&o.push(...f.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof au||f instanceof Wa||f instanceof Zs)for(let m=0;m<f.paintVertexAttributes.length;m++)o.push(f.paintVertexAttributes[m].name);if(f instanceof Zs)for(let m=0;m<Bd.members.length;m++)o.push(Bd.members[m].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof Km||f instanceof mp||f instanceof Wa)for(const m of f.uniformNames)o.push(m)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const l=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof Km||m instanceof mp||m instanceof Wa)for(const x of m.uniformNames)l.push({name:x,property:f,binding:m.getBinding(o,x)})}return l}setUniforms(o,l,f,m,x){for(const{name:b,property:M,binding:P}of f)this.binders[M].setUniform(o,P,x,m.get(M),b)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const l=this.binders[o];(l instanceof au||l instanceof Wa||l instanceof Zs)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer),l instanceof Zs&&l.paintTransitionVertexBuffer&&this._buffers.push(l.paintTransitionVertexBuffer)}}upload(o){for(const l in this.binders){const f=this.binders[l];(f instanceof au||f instanceof Wa||f instanceof Zs)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof au||l instanceof Wa||l instanceof Zs)&&l.destroy()}}}class Vd{constructor(o,l,f=()=>!0){this.programConfigurations={};for(const m of o)this.programConfigurations[m.id]=new $u(m,l,f);this.needsUpload=!1,this._featureMap=new Nd,this._featureMapWithoutIds=new Nd,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,l,f,m,x,b,M,P){for(const L in this.programConfigurations)this.programConfigurations[L].populatePaintArrays(o,l,m,x,b,M,P);l.id!==void 0?this._featureMap.add(l.id,f,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,f,m,x,b,M){for(const P of f)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,l,P,m,x,b,M||0)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const y={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"]};function a(u,o){return y[u]||[u.replace(`${o}-`,"").replace(/-/g,"_")]}const d={"line-pattern":{source:Al,composite:Al},"fill-pattern":{source:Al,composite:Al},"fill-extrusion-pattern":{source:Al,composite:Al},"line-dasharray":{source:nf,composite:nf}},v={color:{source:zd,composite:Bc},number:{source:Jh,composite:zd}};function S(u,o,l){const f=d[u];return f&&f[l]||v[o][l]}In(Km,"ConstantBinder"),In(mp,"PatternConstantBinder"),In(au,"SourceExpressionBinder"),In(Zs,"PatternCompositeBinder"),In(Wa,"CompositeExpressionBinder"),In($u,"ProgramConfiguration",{omit:["_buffers"]}),In(Vd,"ProgramConfigurationSet");const E=vn/Math.PI/2,R=5,O=6,B=16383,H=64,Y=[H,32,16],J=-E,Q=E;function ie(u,o,l,f=E){return l=re(l),[u*Math.sin(l)*f,-o*f,u*Math.cos(l)*f]}function pe(u,o,l){return ie(Math.cos(re(u)),Math.sin(re(u)),o,l)}const de=63710088e-1,ge=2*Math.PI*de;class fe{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new fe(at(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,f=this.lat*l,m=o.lat*l,x=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((o.lng-this.lng)*l);return de*Math.acos(Math.min(x,1))}toBounds(o=0){const l=360*o/40075017,f=l/Math.cos(Math.PI/180*this.lat);return new Ee({lng:this.lng-f,lat:this.lat-l},{lng:this.lng+f,lat:this.lat+l})}toEcef(o){return pe(this.lat,this.lng,E+o*E/de)}static convert(o){if(o instanceof fe)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new fe(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new fe(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ee{constructor(o,l){if(o)if(l)this.setSouthWest(o).setNorthEast(l);else if(o.length===4){const f=o;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=o;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(o){return this._ne=o instanceof fe?new fe(o.lng,o.lat):fe.convert(o),this}setSouthWest(o){return this._sw=o instanceof fe?new fe(o.lng,o.lat):fe.convert(o),this}extend(o){const l=this._sw,f=this._ne;let m,x;if(o instanceof fe)m=o,x=o;else{if(!(o instanceof Ee))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ee.convert(o)):this.extend(fe.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(fe.convert(o)):this;if(m=o._sw,x=o._ne,!m||!x)return this}return l||f?(l.lng=Math.min(m.lng,l.lng),l.lat=Math.min(m.lat,l.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new fe(m.lng,m.lat),this._ne=new fe(x.lng,x.lat)),this}getCenter(){return new fe((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new fe(this.getWest(),this.getNorth())}getSouthEast(){return new fe(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:l,lat:f}=fe.convert(o);let m=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(o){if(o)return o instanceof Ee?o:new Ee(o)}}const Le=0,je=25.5;function Ye(u){return ge*Math.cos(u*Math.PI/180)}function $e(u){return(180+u)/360}function Ue(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Fe(u,o){return u/Ye(o)}function Ze(u){return 360*u-180}function et(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function gt(u,o){return u*Ye(et(o))}const ht=85.051129;function kt(u){return Math.cos(re(We(u,-85.051129,ht)))}function Dt(u,o){const l=We(o,Le,je),f=Math.pow(2,l);return kt(u)*ge/(512*f)}function tn(u){return 1/Math.cos(u*Math.PI/180)}function dt(u,o=0){const l=Math.exp(Math.PI*(1-(u.y+o/vn)/(1<<u.z)*2));return 80150034*l/(l*l+1)/vn/(1<<u.z)}class _t{constructor(o,l,f=0){this.x=+o,this.y=+l,this.z=+f}static fromLngLat(o,l=0){const f=fe.convert(o);return new _t($e(f.lng),Ue(f.lat),Fe(l,f.lat))}toLngLat(){return new fe(Ze(this.x),et(this.y))}toAltitude(){return gt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ge*tn(et(this.y))}}function lt(u,o,l,f,m,x,b,M,P){const L=(o+f)/2,N=(l+m)/2,U=new dn(L,N);M(U),function(G,te,ne,ce,me,ve){const Ie=ne-me,Me=ce-ve;return Math.abs((ce-te)*Ie-(ne-G)*Me)/Math.hypot(Ie,Me)}(U.x,U.y,x.x,x.y,b.x,b.y)>=P?(lt(u,o,l,L,N,x,U,M,P),lt(u,L,N,f,m,U,b,M,P)):u.push(b)}function Nt(u,o,l){let f=u[0],m=f.x,x=f.y;o(f);const b=[f];for(let M=1;M<u.length;M++){const P=u[M],{x:L,y:N}=P;o(P),lt(b,m,x,L,N,f,P,o,l),m=L,x=N,f=P}return b}function xt(u,o,l,f){if(f(o,l)){const m=o.add(l)._mult(.5);xt(u,o,m,f),xt(u,m,l,f)}else u.push(l)}function Ht(u,o){let l=u[0];const f=[l];for(let m=1;m<u.length;m++){const x=u[m];xt(f,l,x,o),l=x}return f}const Lt=Math.pow(2,14)-1,Gt=-Lt-1;function Zt(u,o){const l=Math.round(u.x*o),f=Math.round(u.y*o);return u.x=We(l,Gt,Lt),u.y=We(f,Gt,Lt),(l<u.x||l>u.x+1||f<u.y||f>u.y+1)&&Ir("Geometry exceeds allowed extent, reduce your vector tile buffer size"),u}function Fn(u,o,l){const f=u.loadGeometry(),m=u.extent,x=vn/m;if(o&&l&&l.projection.isReprojectedInTileSpace){const b=1<<o.z,{scale:M,x:P,y:L,projection:N}=l,U=G=>{const te=Ze((o.x+G.x/m)/b),ne=et((o.y+G.y/m)/b),ce=N.project(te,ne);G.x=(ce.x*M-P)*m,G.y=(ce.y*M-L)*m};for(let G=0;G<f.length;G++)if(u.type!==1)f[G]=Nt(f[G],U,1);else{const te=[];for(const ne of f[G])ne.x<0||ne.x>=m||ne.y<0||ne.y>=m||(U(ne),te.push(ne));f[G]=te}}for(const b of f)for(const M of b)Zt(M,x);return f}function $n(u,o){return{type:u.type,id:u.id,properties:u.properties,geometry:o?Fn(u):[]}}function On(u,o,l,f,m){u.emplaceBack(2*o+(f+1)/2,2*l+(m+1)/2)}function Zn(u,o,l){u.emplaceBack(o.x,o.y,o.z,l[0]*16384,l[1]*16384,l[2]*16384)}class jn{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new zc,this.indexArray=new Do,this.segments=new ho,this.programConfigurations=new Vd(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}updateFootprints(o,l){}populate(o,l,f,m){const x=this.layers[0],b=[];let M=null;x.type==="circle"&&(M=x.layout.get("circle-sort-key"));for(const{feature:L,id:N,index:U,sourceLayerIndex:G}of o){const te=this.layers[0]._featureFilter.needGeometry,ne=$n(L,te);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),ne,f))continue;const ce=M?M.evaluate(ne,{},f):void 0,me={id:N,properties:L.properties,type:L.type,sourceLayerIndex:G,index:U,geometry:te?ne.geometry:Fn(L,f,m),patterns:{},sortKey:ce};b.push(me)}M&&b.sort((L,N)=>L.sortKey-N.sortKey);let P=null;m.projection.name==="globe"&&(this.globeExtVertexArray=new Fc,P=m.projection);for(const L of b){const{geometry:N,index:U,sourceLayerIndex:G}=L,te=o[U].feature;this.addFeature(L,N,U,l.availableImages,f,P,l.brightness),l.featureIndex.insert(te,N,U,G,this.index)}}update(o,l,f,m,x,b,M){this.programConfigurations.updatePaintArrays(o,l,x,f,m,b,M)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,py.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,s_.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,l,f,m,x,b,M){for(const P of l)for(const L of P){const N=L.x,U=L.y;if(N<0||N>=vn||U<0||U>=vn)continue;if(b){const ne=b.projectTilePoint(N,U,x),ce=b.upVector(x,N,U),me=this.globeExtVertexArray;Zn(me,ne,ce),Zn(me,ne,ce),Zn(me,ne,ce),Zn(me,ne,ce)}const G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),te=G.vertexLength;On(this.layoutVertexArray,N,U,-1,-1),On(this.layoutVertexArray,N,U,1,-1),On(this.layoutVertexArray,N,U,1,1),On(this.layoutVertexArray,N,U,-1,1),this.indexArray.emplaceBack(te,te+1,te+2),this.indexArray.emplaceBack(te,te+2,te+3),G.vertexLength+=4,G.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},m,x,M)}}function ur(u,o){for(let l=0;l<u.length;l++)if(di(o,u[l]))return!0;for(let l=0;l<o.length;l++)if(di(u,o[l]))return!0;return!!vr(u,o)}function Cr(u,o,l){return!!di(u,o)||!!Ar(o,u,l)}function cr(u,o){if(u.length===1)return ci(o,u[0]);for(let l=0;l<o.length;l++){const f=o[l];for(let m=0;m<f.length;m++)if(di(u,f[m]))return!0}for(let l=0;l<u.length;l++)if(ci(o,u[l]))return!0;for(let l=0;l<o.length;l++)if(vr(u,o[l]))return!0;return!1}function Lr(u,o,l){if(u.length>1){if(vr(u,o))return!0;for(let f=0;f<o.length;f++)if(Ar(o[f],u,l))return!0}for(let f=0;f<u.length;f++)if(Ar(u[f],o,l))return!0;return!1}function vr(u,o){if(u.length===0||o.length===0)return!1;for(let l=0;l<u.length-1;l++){const f=u[l],m=u[l+1];for(let x=0;x<o.length-1;x++)if(sr(f,m,o[x],o[x+1]))return!0}return!1}function sr(u,o,l,f){return li(u,l,f)!==li(o,l,f)&&li(u,o,l)!==li(u,o,f)}function Yr(u,o,l){return(u.x-l.x)*(o.y-l.y)-(u.y-l.y)*(o.x-l.x)}function Si(u,o,l,f){const m=Yr(u,o,f),x=Yr(u,o,l);if(Math.sign(m)===Math.sign(x))return;const b=Yr(l,f,u),M=b+x-m;return Math.sign(b)!==Math.sign(M)?[b/(b-M),x/(x-m)]:void 0}function Ar(u,o,l){const f=l*l;if(o.length===1)return u.distSqr(o[0])<f;for(let m=1;m<o.length;m++)if(Xr(u,o[m-1],o[m])<f)return!0;return!1}function Xr(u,o,l){const f=o.distSqr(l);if(f===0)return u.distSqr(o);const m=((u.x-o.x)*(l.x-o.x)+(u.y-o.y)*(l.y-o.y))/f;return u.distSqr(m<0?o:m>1?l:l.sub(o)._mult(m)._add(o))}function ci(u,o){let l,f,m,x=!1;for(let b=0;b<u.length;b++){l=u[b];for(let M=0,P=l.length-1;M<l.length;P=M++)f=l[M],m=l[P],f.y>o.y!=m.y>o.y&&o.x<(m.x-f.x)*(o.y-f.y)/(m.y-f.y)+f.x&&(x=!x)}return x}function di(u,o){let l=!1;for(let f=0,m=u.length-1;f<u.length;m=f++){const x=u[f],b=u[m];x.y>o.y!=b.y>o.y&&o.x<(b.x-x.x)*(o.y-x.y)/(b.y-x.y)+x.x&&(l=!l)}return l}function Ti(u,o,l,f,m){for(const b of u)if(o<=b.x&&l<=b.y&&f>=b.x&&m>=b.y)return!0;const x=[new dn(o,l),new dn(o,m),new dn(f,m),new dn(f,l)];if(u.length>2){for(const b of x)if(di(u,b))return!0}for(let b=0;b<u.length-1;b++)if(Wi(u[b],u[b+1],x))return!0;return!1}function Wi(u,o,l){const f=l[0],m=l[2];if(u.x<f.x&&o.x<f.x||u.x>m.x&&o.x>m.x||u.y<f.y&&o.y<f.y||u.y>m.y&&o.y>m.y)return!1;const x=li(u,o,l[0]);return x!==li(u,o,l[1])||x!==li(u,o,l[2])||x!==li(u,o,l[3])}function wo(u,o,l,f,m,x){let b=o.y-u.y,M=u.x-o.x;if(x=x||0){const P=b*b+M*M;if(P===0)return!0;const L=Math.sqrt(P);b/=L,M/=L}return!((l.x-u.x)*b+(l.y-u.y)*M-x<0||(f.x-u.x)*b+(f.y-u.y)*M-x<0||(m.x-u.x)*b+(m.y-u.y)*M-x<0)}function Yi(u,o,l,f,m,x,b){return!(wo(u,o,f,m,x,b)||wo(o,l,f,m,x,b)||wo(l,u,f,m,x,b)||wo(f,m,u,o,l,b)||wo(m,x,u,o,l,b)||wo(x,f,u,o,l,b))}function Sr(u,o,l){const f=o.paint.get(u).value;return f.kind==="constant"?f.value:l.programConfigurations.get(o.id).getMaxValue(u)}function Ni(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ii(u,o,l,f,m){if(!o[0]&&!o[1])return u;const x=dn.convert(o)._mult(m);l==="viewport"&&x._rotate(-f);const b=[];for(let M=0;M<u.length;M++)b.push(u[M].sub(x));return b}function pi(u,o,l,f){const m=dn.convert(u)._mult(f);return o==="viewport"&&m._rotate(-l),m}let mi,Xi;function ts(u,o,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[u*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}In(jn,"CircleBucket",{omit:["layers"]});class ji{constructor(o,l,f){this.z=o,this.x=l,this.y=f,this.key=$o(0,o,o,l,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l){const f=function(x,b,M){var P=ts(256*x,256*(b=Math.pow(2,M)-b-1),M),L=ts(256*(x+1),256*(b+1),M);return P[0]+","+P[1]+","+L[0]+","+L[1]}(this.x,this.y,this.z),m=function(x,b,M){let P,L="";for(let N=x;N>0;N--)P=1<<N-1,L+=(b&P?1:0)+(M&P?2:0);return L}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Bo{constructor(o,l){this.wrap=o,this.canonical=l,this.key=$o(o,l.z,l.z,l.x,l.y)}}class ki{constructor(o,l,f,m,x){this.overscaledZ=o,this.wrap=l,this.canonical=new ji(f,+m,+x),this.key=l===0&&o===f?this.canonical.key:$o(l,o,f,m,x)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const l=this.canonical.z-o;return o>this.canonical.z?new ki(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ki(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l=!0){if(this.overscaledZ===o&&l)return this.key;if(o>this.canonical.z)return $o(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return $o(this.wrap*+l,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new ki(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new ki(l,this.wrap,l,f,m),new ki(l,this.wrap,l,f+1,m),new ki(l,this.wrap,l,f,m+1),new ki(l,this.wrap,l,f+1,m+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new ki(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new ki(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Bo(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function $o(u,o,l,f,m){const x=1<<Math.min(l,22);let b=x*(m%x)+f%x;return u&&l<22&&(b+=x*x*((u<0?-2*u-1:2*u)%(1<<2*(22-l)))),16*(32*b+l)+(o-l)}const Ra=[u=>{let o=u.canonical.x-1,l=u.wrap;return o<0&&(o=(1<<u.canonical.z)-1,l--),new ki(u.overscaledZ,l,u.canonical.z,o,u.canonical.y)},u=>{let o=u.canonical.x+1,l=u.wrap;return o===1<<u.canonical.z&&(o=0,l++),new ki(u.overscaledZ,l,u.canonical.z,o,u.canonical.y)},u=>new ki(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,(u.canonical.y===0?1<<u.canonical.z:u.canonical.y)-1),u=>new ki(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y===(1<<u.canonical.z)-1?0:u.canonical.y+1)];In(ji,"CanonicalTileID"),In(ki,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const hl=ui([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Da}=hl,fl=ui([{name:"a_pos_3",components:3,type:"Int16"}]);var Vc=ui([{name:"a_pos",type:"Int16",components:2}]);class pl{constructor(o,l){this.pos=o,this.dir=l}intersectsPlane(o,l,f){const m=Rr(l,this.dir);if(Math.abs(m)<1e-6)return!1;const x=((o[0]-this.pos[0])*l[0]+(o[1]-this.pos[1])*l[1])/m;return f[0]=this.pos[0]+this.dir[0]*x,f[1]=this.pos[1]+this.dir[1]*x,!0}}class Pl{constructor(o,l){this.pos=o,this.dir=l}intersectsPlane(o,l,f){const m=vt(l,this.dir);if(Math.abs(m)<1e-6)return!1;const x=((o[0]-this.pos[0])*l[0]+(o[1]-this.pos[1])*l[1]+(o[2]-this.pos[2])*l[2])/m;return f[0]=this.pos[0]+this.dir[0]*x,f[1]=this.pos[1]+this.dir[1]*x,f[2]=this.pos[2]+this.dir[2]*x,!0}closestPointOnSphere(o,l,f){if(function(te,ne){var ce=te[0],me=te[1],ve=te[2],Ie=ne[0],Me=ne[1],ue=ne[2];return Math.abs(ce-Ie)<=g*Math.max(1,Math.abs(ce),Math.abs(Ie))&&Math.abs(me-Me)<=g*Math.max(1,Math.abs(me),Math.abs(Me))&&Math.abs(ve-ue)<=g*Math.max(1,Math.abs(ve),Math.abs(ue))}(this.pos,o)||l===0)return f[0]=f[1]=f[2]=0,!1;const[m,x,b]=this.dir,M=this.pos[0]-o[0],P=this.pos[1]-o[1],L=this.pos[2]-o[2],N=m*m+x*x+b*b,U=2*(M*m+P*x+L*b),G=U*U-4*N*(M*M+P*P+L*L-l*l);if(G<0){const te=Math.max(-U/2,0),ne=M+m*te,ce=P+x*te,me=L+b*te,ve=Math.hypot(ne,ce,me);return f[0]=ne*l/ve,f[1]=ce*l/ve,f[2]=me*l/ve,!1}{const te=(-U-Math.sqrt(G))/(2*N);if(te<0){const ne=Math.hypot(M,P,L);return f[0]=M*l/ne,f[1]=P*l/ne,f[2]=L*l/ne,!1}return f[0]=M+m*te,f[1]=P+x*te,f[2]=L+b*te,!0}}}class Ks{constructor(o,l,f,m,x){this.TL=o,this.TR=l,this.BR=f,this.BL=m,this.horizon=x}static fromInvProjectionMatrix(o,l,f){const m=[-1,1,1],x=[1,1,1],b=[1,-1,1],M=[-1,-1,1],P=yn(m,m,o),L=yn(x,x,o),N=yn(b,b,o),U=yn(M,M,o);return new Ks(P,L,N,U,l/f)}}function Ud(u,o,l){let f=1/0,m=-1/0;const x=[];for(const b of u){Bt(x,b,o);const M=vt(x,l);f=Math.min(f,M),m=Math.max(m,M)}return[f,m]}function Pa(u,o){let l=!0;for(let f=0;f<u.planes.length;f++){const m=u.planes[f];let x=0;for(let b=0;b<o.length;b++)x+=vt(m,o[b])+m[3]>=0;if(x===0)return 0;x!==o.length&&(l=!1)}return l?2:1}function Qm(u,o){for(const l of u.projections){const f=Ud(o,u.points[0],l.axis);if(l.projection[1]<f[0]||l.projection[0]>f[1])return 0}return 1}function Jm(u,o){let l=0;const f=[0,0,0,0];for(let b=0;b<u.length;b++)f[0]=u[b][0],f[1]=u[b][1],f[2]=u[b][2],f[3]=1,(m=f)[0]*(x=o)[0]+m[1]*x[1]+m[2]*x[2]+m[3]*x[3]>=0&&l++;var m,x;return l}class eg{constructor(o,l){this.points=o||new Array(8).fill([0,0,0]),this.planes=l||new Array(6).fill([0,0,0,0]),this.bounds=Oi.fromPoints(this.points),this.projections=[],this.frustumEdges=[Bt([],this.points[2],this.points[3]),Bt([],this.points[0],this.points[3]),Bt([],this.points[4],this.points[0]),Bt([],this.points[5],this.points[1]),Bt([],this.points[6],this.points[2]),Bt([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const m=[0,-f[2],f[1]],x=[f[2],0,-f[0]];this.projections.push({axis:m,projection:Ud(this.points,this.points[0],m)}),this.projections.push({axis:x,projection:Ud(this.points,this.points[0],x)})}}static fromInvProjectionMatrix(o,l,f,m){const x=Math.pow(2,f),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const N=Yn([],L,o),U=1/N[3]/l*x;return(G=N)[0]=(te=N)[0]*(ne=[U,U,m?1/N[3]:U,U])[0],G[1]=te[1]*ne[1],G[2]=te[2]*ne[2],G[3]=te[3]*ne[3],G;var G,te,ne}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const N=It([],sn([],Bt([],b[L[0]],b[L[1]]),Bt([],b[L[2]],b[L[1]]))),U=-vt(N,b[L[1]]);return N.concat(U)}),P=[];for(let L=0;L<b.length;L++)P.push([b[L][0],b[L][1],b[L][2]]);return new eg(P,M)}intersectsPrecise(o,l,f){for(let m=0;m<l.length;m++)if(!Jm(o,l[m]))return 0;for(let m=0;m<this.planes.length;m++)if(!Jm(o,this.planes[m]))return 0;for(const m of f)for(const x of this.frustumEdges){const b=sn([],m,x),M=Ae(b);if(M===0)continue;Oe(b,b,1/M);const P=Ud(this.points,this.points[0],b),L=Ud(o,this.points[0],b);if(P[0]>L[1]||L[0]>P[1])return 0}return 1}containsPoint(o){for(const l of this.planes){const f=l[3];if(vt([l[0],l[1],l[2]],o)+f<0)return!1}return!0}}class Oi{static fromPoints(o){const l=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const m of o)it(l,l,m),tt(f,f,m);return new Oi(l,f)}static fromTileIdAndHeight(o,l,f){const m=1<<o.canonical.z,x=o.canonical.x,b=o.canonical.y;return new Oi([x/m,b/m,l],[(x+1)/m,(b+1)/m,f])}static applyTransform(o,l){const f=o.getCorners();for(let m=0;m<f.length;++m)yn(f[m],f[m],l);return Oi.fromPoints(f)}static applyTransformFast(o,l){const f=[l[12],l[13],l[14]],m=[...f];for(let x=0;x<3;x++)for(let b=0;b<3;b++){const M=l[4*b+x],P=M*o.min[b],L=M*o.max[b];f[x]+=Math.min(P,L),m[x]+=Math.max(P,L)}return new Oi(f,m)}static projectAabbCorners(o,l){const f=o.getCorners();for(let m=0;m<f.length;++m)yn(f[m],f[m],l);return f}constructor(o,l){this.min=o,this.max=l,this.center=Oe([],He([],this.min,this.max),.5)}quadrant(o){const l=[o%2==0,o<2],f=Te(this.min),m=Te(this.max);for(let x=0;x<l.length;x++)f[x]=l[x]?this.min[x]:this.center[x],m[x]=l[x]?this.center[x]:this.max[x];return m[2]=this.max[2],new Oi(f,m)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,l=this.max;return[[o[0],o[1],o[2]],[l[0],o[1],o[2]],[l[0],l[1],o[2]],[o[0],l[1],o[2]],[o[0],o[1],l[2]],[l[0],o[1],l[2]],[l[0],l[1],l[2]],[o[0],l[1],l[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?Pa(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?Pa(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,l){return l||this.intersects(o)?Qm(o,this.getCorners()):0}intersectsPreciseFlat(o,l){return l||this.intersectsFlat(o)?Qm(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let l=0;l<3;++l)if(this.min[l]>o.max[l]||o.min[l]>this.max[l])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],o.min[l]),this.max[l]=Math.max(this.max[l],o.max[l])}encapsulatePoint(o){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],o[l]),this.max[l]=Math.max(this.max[l],o[l])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}function qu(u){return u*E/de}In(Oi,"Aabb");const tg=[new Oi([J,J,J],[Q,Q,Q]),new Oi([J,J,J],[0,0,Q]),new Oi([0,J,J],[Q,0,Q]),new Oi([J,0,J],[0,Q,Q]),new Oi([0,0,J],[Q,Q,Q])];function ng(u,o,l,f=!0){const m=Oe([],u._camera.position,u.worldSize),x=[o,l,1,1];Yn(x,x,u.pixelMatrixInverse),Ft(x,x,1/x[3]);const b=It([],Bt([],x,m)),M=u.globeMatrix,P=[M[12],M[13],M[14]],L=Bt([],P,m),N=Ae(L),U=It([],L),G=u.worldSize/(2*Math.PI),te=vt(U,b),ne=Math.asin(G/N);if(ne<Math.acos(te)){if(!f)return null;const ot=[],ct=[];Oe(ot,b,N/te),It(ct,Bt(ct,ot,L)),It(b,He(b,L,Oe(b,ct,Math.tan(ne)*N)))}const ce=[];new Pl(m,b).closestPointOnSphere(P,G,ce);const me=It([],Zr(M,0)),ve=It([],Zr(M,1)),Ie=It([],Zr(M,2)),Me=vt(me,ce),ue=vt(ve,ce),we=vt(Ie,ce),Pe=le(Math.asin(-ue/G));let Be=le(Math.atan2(Me,we));Be=u.center.lng+function(ot,ct){const At=(ct-ot+180)%360-180;return At<-180?At+360:At}(u.center.lng,Be);const Qe=$e(Be),rt=We(Ue(Pe),0,1);return new _t(Qe,rt)}class ME{constructor(o,l,f){this.a=Bt([],o,f),this.b=Bt([],l,f),this.center=f;const m=It([],this.a),x=It([],this.b);this.angle=Math.acos(vt(m,x))}}function sx(u,o){if(u.angle===0)return null;let l;return l=u.a[o]===0?1/u.angle*.5*Math.PI:1/u.angle*Math.atan(u.b[o]/u.a[o]/Math.sin(u.angle)-1/Math.tan(u.angle)),l<0||l>1?null:function(f,m,x,b){const M=Math.sin(x);return f*(Math.sin((1-b)*x)/M)+m*(Math.sin(b*x)/M)}(u.a[o],u.b[o],u.angle,We(l,0,1))+u.center[o]}function Hu(u){if(u.z<=1)return tg[u.z+2*u.y+u.x];const o=k1(lx(u));return Oi.fromPoints(o)}function Gu(u,o,l){return Oe(u,u,1-l),Je(u,u,o,l)}function ax(u,o,l){for(const f of u)yn(f,f,o),Oe(f,f,l)}function RE(u,o,l,f){const m=o/u.worldSize,x=u.globeMatrix;if(l.z<=1){const rt=Hu(l).getCorners();return ax(rt,x,m),Oi.fromPoints(rt)}const b=lx(l,f),M=k1(b,E+qu(u._tileCoverLift));ax(M,x,m);const P=Number.MAX_VALUE,L=[-P,-P,-P],N=[P,P,P];if(b.contains(u.center)){for(const ct of M)it(N,N,ct),tt(L,L,ct);L[2]=0;const rt=u.point,ot=[rt.x*m,rt.y*m,0];return it(N,N,ot),tt(L,L,ot),new Oi(N,L)}if(u._tileCoverLift>0){for(const rt of M)it(N,N,rt),tt(L,L,rt);return new Oi(N,L)}const U=[x[12]*m,x[13]*m,x[14]*m],G=b.getCenter(),te=We(u.center.lat,-85.051129,ht),ne=We(G.lat,-85.051129,ht),ce=$e(u.center.lng),me=Ue(te);let ve=ce-$e(G.lng);const Ie=me-Ue(ne);ve>.5?ve-=1:ve<-.5&&(ve+=1);let Me=0;Math.abs(ve)>Math.abs(Ie)?Me=ve>=0?1:3:(Me=Ie>=0?0:2,Je(U,U,[x[4]*m,x[5]*m,x[6]*m],-Math.sin(re(Ie>=0?b.getSouth():b.getNorth()))*E));const ue=M[Me],we=M[(Me+1)%4],Pe=new ME(ue,we,U),Be=[sx(Pe,0)||ue[0],sx(Pe,1)||ue[1],sx(Pe,2)||ue[2]],Qe=af(u.zoom);if(Qe>0){const rt=function({x:ct,y:At,z:Yt},Vt,qt,nn,Et){const Ut=1/(1<<Yt);let bt=ct*Ut,Ct=bt+Ut,on=At*Ut,un=on+Ut,Qn=0;const Nn=(bt+Ct)/2-nn;return Nn>.5?Qn=-1:Nn<-.5&&(Qn=1),bt=((bt+Qn)*Vt-(nn*=Vt))*qt+nn,Ct=((Ct+Qn)*Vt-nn)*qt+nn,on=(on*Vt-(Et*=Vt))*qt+Et,un=(un*Vt-Et)*qt+Et,[[bt,un,0],[Ct,un,0],[Ct,on,0],[bt,on,0]]}(l,o,u._pixelsPerMercatorPixel,ce,me);for(let ct=0;ct<M.length;ct++)Gu(M[ct],rt[ct],Qe);const ot=He([],rt[Me],rt[(Me+1)%4]);Oe(ot,ot,.5),Gu(Be,ot,Qe)}for(const rt of M)it(N,N,rt),tt(L,L,rt);return N[2]=Math.min(ue[2],we[2]),it(N,N,Be),tt(L,L,Be),new Oi(N,L)}function lx({x:u,y:o,z:l},f=!1){const m=1/(1<<l),x=new fe(Ze(u*m),o===(1<<l)-1&&f?-90:et((o+1)*m)),b=new fe(Ze((u+1)*m),o===0&&f?90:et(o*m));return new Ee(x,b)}function k1(u,o=E){const l=re(u.getNorth()),f=re(u.getSouth()),m=Math.cos(l),x=Math.cos(f),b=Math.sin(l),M=Math.sin(f),P=u.getWest(),L=u.getEast();return[ie(x,M,P,o),ie(x,M,L,o),ie(m,b,L,o),ie(m,b,P,o)]}function my(u,o,l,f){const m=1<<l.z,x=(u/vn+l.x)/m;return pe(et((o/vn+l.y)/m),Ze(x),f)}function d_({min:u,max:o}){return B/Math.max(o[0]-u[0],o[1]-u[1],o[2]-u[2])}const rg=new Float64Array(16);function ig(u){const o=d_(u),l=he(rg,[o,o,o]);return W(l,l,$t([],u.min))}function cx(u){const o=(f=u.min,(l=rg)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=f[0],l[13]=f[1],l[14]=f[2],l[15]=1,l);var l,f;const m=1/d_(u);return Z(o,o,[m,m,m])}function ux(u){const o=vn/(2*Math.PI);return u/(2*Math.PI)/o}function O1(u,o){return vn/(512*Math.pow(2,u))*d_(Hu(o))}function L1(u,o,l,f,m){const x=ux(l),b=[u,o,-l/(2*Math.PI)],M=F(new Float64Array(16));return W(M,M,b),Z(M,M,[x,x,x]),K(M,M,re(-m)),ee(M,M,re(-f)),M}function af(u){return Ke(R,O,u)}function z1(u,o){const l=pe(o.lat,o.lng),f=function(ne){const ce=pe(ne._center.lat,ne._center.lng);let me=sn([],Re(0,1,0),ce);const ve=ye([],-ne.angle,ce);me=yn(me,me,ve),ye(ve,-ne._pitch,me);const Ie=It([],ce);return Oe(Ie,Ie,qu(ne.cameraToCenterDistance/ne.pixelsPerMeter)),yn(Ie,Ie,ve),He([],ce,Ie)}(u);return b=(m=Se([],f,l))[0],M=m[1],P=m[2],L=(x=l)[0],N=x[1],U=x[2],te=(G=Math.sqrt(b*b+M*M+P*P)*Math.sqrt(L*L+N*N+U*U))&&vt(m,x)/G,Math.acos(Math.min(Math.max(te,-1),1));var m,x,b,M,P,L,N,U,G,te}function gy(u,o){return z1(u,o)>Math.PI/2*1.01}const F1=re(85),DE=Math.cos(F1),Ko=Math.sin(F1),B1=I(),PE=u=>{const o=[];return u.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),u.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function N1(u,o,l,f,m,x,b,M,P){if(x&&u.queryGeometry.isAboveHorizon)return!1;x&&(P*=u.pixelToTileUnitsFactor);const L=u.tileID.canonical,N=l.projection.upVectorScale(L,l.center.lat,l.worldSize).metersToTile;for(const U of o)for(const G of U){const te=G.add(M),ne=m&&l.elevation?l.elevation.exaggeration()*m.getElevationAt(te.x,te.y,!0):0,ce=l.projection.projectTilePoint(te.x,te.y,L);if(ne>0){const Me=l.projection.upVector(L,te.x,te.y);ce.x+=Me[0]*N*ne,ce.y+=Me[1]*N*ne,ce.z+=Me[2]*N*ne}const me=x?te:lP(ce.x,ce.y,ce.z,f),ve=x?u.tilespaceRays.map(Me=>dx(Me,ne)):u.queryGeometry.screenGeometry,Ie=Yn([],[ce.x,ce.y,ce.z,1],f);if(!b&&x?P*=Ie[3]/l.cameraToCenterDistance:b&&!x&&(P*=l.cameraToCenterDistance/Ie[3]),x){const Me=et((G.y/vn+L.y)/(1<<L.z));P/=l.projection.pixelsPerMeter(Me,1)/Fe(1,Me)}if(Cr(ve,me,P))return!0}return!1}function lP(u,o,l,f){const m=Yn([],[u,o,l,1],f);return new dn(m[0]/m[3],m[1]/m[3])}const IE=Re(0,0,0),cP=Re(0,0,1);function dx(u,o){const l=be();return IE[2]=o,u.intersectsPlane(IE,cP,l),new dn(l[0],l[1])}class og extends jn{}let hx,h_,fx,gp;function Wu(u,{width:o,height:l},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==o*l*f)throw new RangeError("mismatched image size")}else m=new Uint8Array(o*l*f);return u.width=o,u.height=l,u.data=m,u}function yy(u,o,l){const{width:f,height:m}=o;f===u.width&&m===u.height||(j1(u,o,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,f),height:Math.min(u.height,m)},l,null),u.width=f,u.height=m,u.data=o.data)}function j1(u,o,l,f,m,x,b,M){if(m.width===0||m.height===0)return o;if(m.width>u.width||m.height>u.height||l.x>u.width-m.width||l.y>u.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>o.width||m.height>o.height||f.x>o.width-m.width||f.y>o.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const P=u.data,L=o.data,N=x===4&&M;for(let U=0;U<m.height;U++){const G=((l.y+U)*u.width+l.x)*x,te=((f.y+U)*o.width+f.x)*x;if(N)for(let ne=0;ne<m.width;ne++){const ce=G+ne*x+3,me=te+ne*x;L[me+0]=255,L[me+1]=255,L[me+2]=255,L[me+3]=P[ce]}else if(b)for(let ne=0;ne<m.width;ne++){const ce=G+ne*x,me=te+ne*x,ve=P[ce+3],Ie=new _i(P[ce+0]/255*ve,P[ce+1]/255*ve,P[ce+2]/255*ve,ve).toRenderColor(b).toArray();L[me+0]=Ie[0],L[me+1]=Ie[1],L[me+2]=Ie[2],L[me+3]=Ie[3]}else for(let ne=0;ne<m.width*x;ne++)L[te+ne]=P[G+ne]}return o}In(og,"HeatmapBucket",{omit:["layers"]});class lf{constructor(o,l){Wu(this,o,1,l)}resize(o){yy(this,new lf(o),1)}clone(){return new lf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,f,m,x){j1(o,l,f,m,x,1,null)}}class Os{constructor(o,l){Wu(this,o,4,l)}resize(o){yy(this,new Os(o),4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Os({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,f,m,x,b,M){j1(o,l,f,m,x,4,b,M)}}class V1{constructor(o,l){this.width=o.width,this.height=o.height,this.data=l instanceof Uint8Array?new Float32Array(l.buffer):l}}function vy(u){const o={},l=u.resolution||256,f=u.clips?u.clips.length:1,m=u.image||new Os({width:l,height:f}),x=(b,M,P)=>{o[u.evaluationKey]=P;const L=u.expression.evaluate(o);L&&(m.data[b+M+0]=Math.floor(255*L.r/L.a),m.data[b+M+1]=Math.floor(255*L.g/L.a),m.data[b+M+2]=Math.floor(255*L.b/L.a),m.data[b+M+3]=Math.floor(255*L.a))};if(u.clips)for(let b=0,M=0;b<f;++b,M+=4*l)for(let P=0,L=0;P<l;P++,L+=4){const N=P/(l-1),{start:U,end:G}=u.clips[b];x(M,L,U*(1-N)+G*N)}else for(let b=0,M=0;b<l;b++,M+=4)x(0,M,b/(l-1));return m}In(lf,"AlphaImage"),In(Os,"RGBAImage");const uP=ui([{name:"a_pos",components:2,type:"Int16"}],4),U1=ui([{name:"a_road_z_offset",components:1,type:"Float32"}],4),kE=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),OE=ui([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function f_(u,o,l=2){const f=o&&o.length,m=f?o[0]*l:u.length;let x=px(u,0,m,l,!0);const b=[];if(!x||x.next===x.prev)return b;let M,P,L;if(f&&(x=function(N,U,G,te){const ne=[];for(let ce=0,me=U.length;ce<me;ce++){const ve=px(N,U[ce]*te,ce<me-1?U[ce+1]*te:N.length,te,!1);ve===ve.next&&(ve.steiner=!0),ne.push(zE(ve))}ne.sort(oo);for(let ce=0;ce<ne.length;ce++)G=$1(ne[ce],G);return G}(u,o,x,l)),u.length>80*l){M=1/0,P=1/0;let N=-1/0,U=-1/0;for(let G=l;G<m;G+=l){const te=u[G],ne=u[G+1];te<M&&(M=te),ne<P&&(P=ne),te>N&&(N=te),ne>U&&(U=ne)}L=Math.max(N-M,U-P),L=L!==0?32767/L:0}return p_(x,b,l,M,P,L,0),b}function px(u,o,l,f,m){let x;if(m===function(b,M,P,L){let N=0;for(let U=M,G=P-L;U<P;U+=L)N+=(b[G]-b[U])*(b[U+1]+b[G+1]),G=U;return N}(u,o,l,f)>0)for(let b=o;b<l;b+=f)x=No(b/f|0,u[b],u[b+1],x);else for(let b=l-f;b>=o;b-=f)x=No(b/f|0,u[b],u[b+1],x);return x&&sg(x,x.next)&&(ag(x),x=x.next),x}function cf(u,o){if(!u)return u;o||(o=u);let l,f=u;do if(l=!1,f.steiner||!sg(f,f.next)&&qo(f.prev,f,f.next)!==0)f=f.next;else{if(ag(f),f=o=f.prev,f===f.next)break;l=!0}while(l||f!==o);return o}function p_(u,o,l,f,m,x,b){if(!u)return;!b&&x&&function(P,L,N,U){let G=P;do G.z===0&&(G.z=g_(G.x,G.y,L,N,U)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==P);G.prevZ.nextZ=null,G.prevZ=null,function(te){let ne,ce=1;do{let me,ve=te;te=null;let Ie=null;for(ne=0;ve;){ne++;let Me=ve,ue=0;for(let Pe=0;Pe<ce&&(ue++,Me=Me.nextZ,Me);Pe++);let we=ce;for(;ue>0||we>0&&Me;)ue!==0&&(we===0||!Me||ve.z<=Me.z)?(me=ve,ve=ve.nextZ,ue--):(me=Me,Me=Me.nextZ,we--),Ie?Ie.nextZ=me:te=me,me.prevZ=Ie,Ie=me;ve=Me}Ie.nextZ=null,ce*=2}while(ne>1)}(G)}(u,f,m,x);let M=u;for(;u.prev!==u.next;){const P=u.prev,L=u.next;if(x?m_(u,f,m,x):dP(u))o.push(P.i,u.i,L.i),ag(u),u=L.next,M=L.next;else if((u=L)===M){b?b===1?p_(u=hP(cf(u),o),o,l,f,m,x,2):b===2&&LE(u,o,l,f,m,x):p_(cf(u),o,l,f,m,x,1);break}}}function dP(u){const o=u.prev,l=u,f=u.next;if(qo(o,l,f)>=0)return!1;const m=o.x,x=l.x,b=f.x,M=o.y,P=l.y,L=f.y,N=Math.min(m,x,b),U=Math.min(M,P,L),G=Math.max(m,x,b),te=Math.max(M,P,L);let ne=f.next;for(;ne!==o;){if(ne.x>=N&&ne.x<=G&&ne.y>=U&&ne.y<=te&&uf(m,M,x,P,b,L,ne.x,ne.y)&&qo(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}function m_(u,o,l,f){const m=u.prev,x=u,b=u.next;if(qo(m,x,b)>=0)return!1;const M=m.x,P=x.x,L=b.x,N=m.y,U=x.y,G=b.y,te=Math.min(M,P,L),ne=Math.min(N,U,G),ce=Math.max(M,P,L),me=Math.max(N,U,G),ve=g_(te,ne,o,l,f),Ie=g_(ce,me,o,l,f);let Me=u.prevZ,ue=u.nextZ;for(;Me&&Me.z>=ve&&ue&&ue.z<=Ie;){if(Me.x>=te&&Me.x<=ce&&Me.y>=ne&&Me.y<=me&&Me!==m&&Me!==b&&uf(M,N,P,U,L,G,Me.x,Me.y)&&qo(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,ue.x>=te&&ue.x<=ce&&ue.y>=ne&&ue.y<=me&&ue!==m&&ue!==b&&uf(M,N,P,U,L,G,ue.x,ue.y)&&qo(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;Me&&Me.z>=ve;){if(Me.x>=te&&Me.x<=ce&&Me.y>=ne&&Me.y<=me&&Me!==m&&Me!==b&&uf(M,N,P,U,L,G,Me.x,Me.y)&&qo(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;ue&&ue.z<=Ie;){if(ue.x>=te&&ue.x<=ce&&ue.y>=ne&&ue.y<=me&&ue!==m&&ue!==b&&uf(M,N,P,U,L,G,ue.x,ue.y)&&qo(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function hP(u,o){let l=u;do{const f=l.prev,m=l.next.next;!sg(f,m)&&FE(f,l,l.next,m)&&_y(f,m)&&_y(m,f)&&(o.push(f.i,l.i,m.i),ag(l),ag(l.next),l=u=m),l=l.next}while(l!==u);return cf(l)}function LE(u,o,l,f,m,x){let b=u;do{let M=b.next.next;for(;M!==b.prev;){if(b.i!==M.i&&yx(b,M)){let P=v_(b,M);return b=cf(b,b.next),P=cf(P,P.next),p_(b,o,l,f,m,x,0),void p_(P,o,l,f,m,x,0)}M=M.next}b=b.next}while(b!==u)}function oo(u,o){let l=u.x-o.x;return l===0&&(l=u.y-o.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(o.next.y-o.y)/(o.next.x-o.x)),l}function $1(u,o){const l=function(m,x){let b=x;const M=m.x,P=m.y;let L,N=-1/0;if(sg(m,b))return b;do{if(sg(m,b.next))return b.next;if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){const ce=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(ce<=M&&ce>N&&(N=ce,L=b.x<b.next.x?b:b.next,ce===M))return L}b=b.next}while(b!==x);if(!L)return null;const U=L,G=L.x,te=L.y;let ne=1/0;b=L;do{if(M>=b.x&&b.x>=G&&M!==b.x&&gx(P<te?M:N,P,G,te,P<te?N:M,P,b.x,b.y)){const ce=Math.abs(P-b.y)/(M-b.x);_y(b,m)&&(ce<ne||ce===ne&&(b.x>L.x||b.x===L.x&&mx(L,b)))&&(L=b,ne=ce)}b=b.next}while(b!==U);return L}(u,o);if(!l)return o;const f=v_(l,u);return cf(f,f.next),cf(l,l.next)}function mx(u,o){return qo(u.prev,u,o.prev)<0&&qo(o.next,u,u.next)<0}function g_(u,o,l,f,m){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*m|0)|u<<8))|u<<4))|u<<2))|u<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function zE(u){let o=u,l=u;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==u);return l}function gx(u,o,l,f,m,x,b,M){return(m-b)*(o-M)>=(u-b)*(x-M)&&(u-b)*(f-M)>=(l-b)*(o-M)&&(l-b)*(x-M)>=(m-b)*(f-M)}function uf(u,o,l,f,m,x,b,M){return!(u===b&&o===M)&&gx(u,o,l,f,m,x,b,M)}function yx(u,o){return u.next.i!==o.i&&u.prev.i!==o.i&&!function(l,f){let m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==f.i&&m.next.i!==f.i&&FE(m,m.next,l,f))return!0;m=m.next}while(m!==l);return!1}(u,o)&&(_y(u,o)&&_y(o,u)&&function(l,f){let m=l,x=!1;const b=(l.x+f.x)/2,M=(l.y+f.y)/2;do m.y>M!=m.next.y>M&&m.next.y!==m.y&&b<(m.next.x-m.x)*(M-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==l);return x}(u,o)&&(qo(u.prev,u,o.prev)||qo(u,o.prev,o))||sg(u,o)&&qo(u.prev,u,u.next)>0&&qo(o.prev,o,o.next)>0)}function qo(u,o,l){return(o.y-u.y)*(l.x-o.x)-(o.x-u.x)*(l.y-o.y)}function sg(u,o){return u.x===o.x&&u.y===o.y}function FE(u,o,l,f){const m=y_(qo(u,o,l)),x=y_(qo(u,o,f)),b=y_(qo(l,f,u)),M=y_(qo(l,f,o));return m!==x&&b!==M||!(m!==0||!vx(u,l,o))||!(x!==0||!vx(u,f,o))||!(b!==0||!vx(l,u,f))||!(M!==0||!vx(l,o,f))}function vx(u,o,l){return o.x<=Math.max(u.x,l.x)&&o.x>=Math.min(u.x,l.x)&&o.y<=Math.max(u.y,l.y)&&o.y>=Math.min(u.y,l.y)}function y_(u){return u>0?1:u<0?-1:0}function _y(u,o){return qo(u.prev,u,u.next)<0?qo(u,o,u.next)>=0&&qo(u,u.prev,o)>=0:qo(u,o,u.prev)<0||qo(u,u.next,o)<0}function v_(u,o){const l=ca(u.i,u.x,u.y),f=ca(o.i,o.x,o.y),m=u.next,x=o.prev;return u.next=o,o.prev=u,l.next=m,m.prev=l,f.next=l,l.prev=f,x.next=f,f.prev=x,f}function No(u,o,l,f){const m=ca(u,o,l);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function ag(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function ca(u,o,l){return{i:u,x:o,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _x(u,o){const l=u.length;if(l<=1)return[u];const f=[];let m,x;for(let b=0;b<l;b++){const M=Kr(u[b]);M!==0&&(u[b].area=Math.abs(M),x===void 0&&(x=M<0),x===M<0?(m&&f.push(m),m=[u[b]]):m.push(u[b]))}if(m&&f.push(m),o>1)for(let b=0;b<f.length;b++)f[b].length<=o||(Cu(f[b],o,1,f[b].length-1,q1),f[b]=f[b].slice(0,o));return f}function q1(u,o){return o.area-u.area}function xx(u,o,l=1){if(!u)return null;const f=typeof u=="string"?Ta.from(u).getPrimary():u.getPrimary(),m=typeof u=="string"?null:u.getSecondary();for(const x of[f,m]){if(!x)continue;const b=x.id.toString();o.has(b)||o.set(b,[]),x.scaleSelf(l),o.get(b).push(x)}return{primary:f.toString(),secondary:m?m.toString():null}}function xy(u,o,l,f){const m=f.patternDependencies;let x=!1;for(const b of o){const M=b.paint.get(`${u}-pattern`);M.isConstant()||(x=!0),xx(M.constantOr(null),m,l)&&(x=!0)}return x}function bx(u,o,l,f,m,x){const b=x.patternDependencies;for(const M of o){const P=M.paint.get(`${u}-pattern`).value;if(P.kind!=="constant"){let L=P.evaluate({zoom:f},l,{},x.availableImages);L=L&&L.name?L.name:L;const N=xx(L,b,m);if(!N)continue;const{primary:U,secondary:G}=N;U&&(l.patterns[M.id]=[U,G].filter(Boolean))}}return l}var wx,Sx,__,BE,Tx,NE,H1,Ex={};function jE(){if(Sx)return wx;Sx=1;var u=oa();function o(m,x,b,M,P){this.properties={},this.extent=b,this.type=0,this._pbf=m,this._geometry=-1,this._keys=M,this._values=P,m.readFields(l,this,x)}function l(m,x,b){m==1?x.id=b.readVarint():m==2?function(M,P){for(var L=M.readVarint()+M.pos;M.pos<L;){var N=P._keys[M.readVarint()],U=P._values[M.readVarint()];P.properties[N]=U}}(b,x):m==3?x.type=b.readVarint():m==4&&(x._geometry=b.pos)}function f(m){for(var x,b,M=0,P=0,L=m.length,N=L-1;P<L;N=P++)M+=((b=m[N]).x-(x=m[P]).x)*(x.y+b.y);return M}return wx=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var x,b=m.readVarint()+m.pos,M=1,P=0,L=0,N=0,U=[];m.pos<b;){if(P<=0){var G=m.readVarint();M=7&G,P=G>>3}if(P--,M===1||M===2)L+=m.readSVarint(),N+=m.readSVarint(),M===1&&(x&&U.push(x),x=[]),x.push(new u(L,N));else{if(M!==7)throw new Error("unknown command "+M);x&&x.push(x[0].clone())}}return x&&U.push(x),U},o.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var x=m.readVarint()+m.pos,b=1,M=0,P=0,L=0,N=1/0,U=-1/0,G=1/0,te=-1/0;m.pos<x;){if(M<=0){var ne=m.readVarint();b=7&ne,M=ne>>3}if(M--,b===1||b===2)(P+=m.readSVarint())<N&&(N=P),P>U&&(U=P),(L+=m.readSVarint())<G&&(G=L),L>te&&(te=L);else if(b!==7)throw new Error("unknown command "+b)}return[N,G,U,te]},o.prototype.toGeoJSON=function(m,x,b){var M,P,L=this.extent*Math.pow(2,b),N=this.extent*m,U=this.extent*x,G=this.loadGeometry(),te=o.types[this.type];function ne(ve){for(var Ie=0;Ie<ve.length;Ie++){var Me=ve[Ie];ve[Ie]=[360*(Me.x+N)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+U)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var ce=[];for(M=0;M<G.length;M++)ce[M]=G[M][0];ne(G=ce);break;case 2:for(M=0;M<G.length;M++)ne(G[M]);break;case 3:for(G=function(ve){var Ie=ve.length;if(Ie<=1)return[ve];for(var Me,ue,we=[],Pe=0;Pe<Ie;Pe++){var Be=f(ve[Pe]);Be!==0&&(ue===void 0&&(ue=Be<0),ue===Be<0?(Me&&we.push(Me),Me=[ve[Pe]]):Me.push(ve[Pe]))}return Me&&we.push(Me),we}(G),M=0;M<G.length;M++)for(P=0;P<G[M].length;P++)ne(G[M][P])}G.length===1?G=G[0]:te="Multi"+te;var me={type:"Feature",geometry:{type:te,coordinates:G},properties:this.properties};return"id"in this&&(me.id=this.id),me},wx}function df(){if(BE)return __;BE=1;var u=jE();function o(f,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(l,this,m),this.length=this._features.length}function l(f,m,x){f===15?m.version=x.readVarint():f===1?m.name=x.readString():f===5?m.extent=x.readVarint():f===2?m._features.push(x.pos):f===3?m._keys.push(x.readString()):f===4&&m._values.push(function(b){for(var M=null,P=b.readVarint()+b.pos;b.pos<P;){var L=b.readVarint()>>3;M=L===1?b.readString():L===2?b.readFloat():L===3?b.readDouble():L===4?b.readVarint64():L===5?b.readVarint():L===6?b.readSVarint():L===7?b.readBoolean():null}return M}(x))}return __=o,o.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var m=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,m,this.extent,this._keys,this._values)},__}function G1(){return H1||(H1=1,Ex.VectorTile=function(){if(NE)return Tx;NE=1;var u=df();function o(l,f,m){if(l===3){var x=new u(m,m.readVarint()+m.pos);x.length&&(f[x.name]=x)}}return Tx=function(l,f){this.layers=l.readFields(o,{},f)},Tx}(),Ex.VectorTileFeature=jE(),Ex.VectorTileLayer=df()),Ex}var $d=G1();const lg="3d_elevation_id",VE="level";class W1{constructor(){this._valid=!1}reset(o){return this.feature=o,this._valid=!0,this._geometry=o.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(o,l){return this._valid&&o(l(this._geometry)),this}require(o,l,f){return this.get(o,!0,l,f)}optional(o,l,f){return this.get(o,!1,l,f)}success(){return this._valid}get(o,l,f,m){const x=this.feature.properties.hasOwnProperty(o)?+this.feature.properties[o]:void 0;return this._valid&&x!==void 0&&!Number.isNaN(x)?f(m?m(x):x):l&&(this._valid=!1),this}}class UE{constructor(o,l){this.featureFunc=o,this.vertexFunc=l}parseFeature(o,l,f){return this.featureFunc(o,l,f)}parseVertex(o,l,f){return this.vertexFunc(o,l,f)}}const Yu=new UE((u,o,l)=>u.reset(o).require(lg,f=>{l.id=f}).optional("fixed_height_relative",f=>{l.constantHeight=f},yp.decodeRelativeHeight).geometry(f=>{l.bounds=f},Gg).success(),(u,o,l)=>u.reset(o).require(lg,f=>{l.id=f}).require("elevation_idx",f=>{l.idx=f}).require("extent",f=>{l.extent=f}).require("height_relative",f=>{l.height=f},yp.decodeRelativeHeight).geometry(f=>{l.position=f},yp.getPoint).success()),Y1=new UE((u,o,l)=>u.reset(o).require(lg,f=>{l.id=f}).optional("fixed_height",f=>{l.constantHeight=f},yp.decodeMetricHeight).geometry(f=>{l.bounds=f},Gg).success(),(u,o,l)=>u.reset(o).require(lg,f=>{l.id=f}).require("elevation_idx",f=>{l.idx=f}).require("extent",f=>{l.extent=f}).require("height",f=>{l.height=f},yp.decodeMetricHeight).geometry(f=>{l.position=f},yp.getPoint).success());class yp{static getPoint(o){return Fr(o[0][0].x,o[0][0].y)}static decodeRelativeHeight(o){return 1e-4*o*5}static decodeMetricHeight(o){return 1e-4*o}static parse(o){const l=[],f=[],m=o.length,x=new W1;for(let M=0;M<m;M++){const P=o.feature(M),L=P.properties.hasOwnProperty("version")?String(P.properties.version):void 0,N=(b=L)?b==="1.0.1"?Y1:void 0:Yu;if(N===void 0){Ir(`Unknown elevation feature version number ${L||"(unknown)"}`);continue}const U=P.properties.hasOwnProperty("type")?P.properties.type:void 0;if(U){if($d.VectorTileFeature.types[P.type]==="Point"&&U==="curve_point"){const G={};N.parseVertex(x,P,G)&&l.push(G)}else if($d.VectorTileFeature.types[P.type]==="Polygon"&&U==="curve_meta"){const G={};N.parseFeature(x,P,G)&&f.push(G)}}}var b;return{vertices:l,features:f}}}class X1{constructor(o,l){this.feature=o,this.metersToTile=l,this.index=0}get(){const o=this.feature.vertices[this.index],l=this.feature.vertexProps[this.index].dir,f=l[1],m=-l[0],x=(o.extent+1)*this.metersToTile;return[new dn(Math.trunc(o.position[0]+f*x),Math.trunc(o.position[1]+m*x)),new dn(Math.trunc(o.position[0]-f*x),Math.trunc(o.position[1]-m*x))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class cg{constructor(o,l,f,m,x,b){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=o,this.heightRange={min:f,max:f},this.safeArea=l,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||m.length!==0)){this.vertices=m,this.edges=x,this.edges=this.edges.filter(M=>{return M.a<this.vertices.length&&M.b<this.vertices.length&&!((P=this.vertices[M.a].position)[0]===(L=this.vertices[M.b].position)[0]&&P[1]===L[1]);var P,L}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const M of this.vertices)this.vertexProps.push({dir:Fr(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,M.height),this.heightRange.max=Math.max(this.heightRange.max,M.height);for(const M of this.edges){const P=this.vertices[M.a].position,L=this.vertices[M.b].position,N=_r(En(),L,P),U=Wr(N),G=nr(En(),N,1/U);this.edgeProps.push({vec:N,dir:G,len:U});const te=this.vertexProps[M.a].dir,ne=this.vertexProps[M.b].dir;Er(te,te,G),Er(ne,ne,G)}for(const M of this.vertexProps)M.dir[0]===0&&M.dir[1]===0||wr(M.dir,M.dir);this.tessellate(b)}}pointElevation(o){if(this.constantHeight!=null)return this.constantHeight;const l=this.getClosestEdge(o);if(l==null)return 0;const[f,m]=l;return((x,b,M)=>(1-M)*x+M*b)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,m)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(o){if(this.edges.length===0)return;let l=0,f=Number.POSITIVE_INFINITY,m=0;const x=Fr(o.x,o.y);for(let b=0;b<this.edges.length;b++){const M=this.edges[b],P=this.edgeProps[b].dir,L=new pl(x,this.edgeProps[b].dir),N=this.vertices[M.a].position,U=this.vertices[M.b].position,G=En(),te=En(),ne=L.intersectsPlane(N,this.vertexProps[M.a].dir,G),ce=L.intersectsPlane(U,this.vertexProps[M.b].dir,te);if(!ne||!ce)continue;const me=_r(En(),te,G),ve=_r(En(),x,G),Ie=Rr(me,me),Me=Ie>0?Rr(ve,me)/Ie:0,ue=We(Me,0,1),we=Math.abs((Me-ue)*this.edgeProps[b].len),Pe=_r(En(),x,N),Be=we+Math.abs(Rr(Pe,Fr(P[1],-P[0])));Be<f&&(l=b,f=Be,m=ue)}return[l,m]}tessellate(o){for(let l=this.edges.length-1;l>=0;--l){const f=this.edges[l].a,m=this.edges[l].b,{position:x,height:b,extent:M}=this.vertices[f],{position:P,height:L,extent:N}=this.vertices[m],U=this.vertexProps[f].dir,G=this.vertexProps[m].dir,te=Re(x[0]/o,x[1]/o,b),ne=Re(P[0]/o,P[1]/o,L),ce=Re(U[1],-U[0],0);Oe(ce,ce,M);const me=Re(G[1],-G[0],0);if(Oe(me,me,N),this.distSqLines(Re(te[0]+.5*ce[0],te[1]+.5*ce[1],te[2]+.5*ce[2]),Re(ne[0]-.5*me[0],ne[1]-.5*me[1],ne[2]-.5*me[2]),Re(te[0]-.5*ce[0],te[1]-.5*ce[1],te[2]-.5*ce[2]),Re(ne[0]+.5*me[0],ne[1]+.5*me[1],ne[2]+.5*me[2]))<=.0025000000000000005)continue;const ve=this.vertices.length,Ie=Er(En(),x,P);this.vertices.push({position:nr(Ie,Ie,.5),height:.5*(b+L),extent:.5*(M+N)});const Me=Er(En(),U,G);this.vertexProps.push({dir:wr(Me,Me)}),this.edges.splice(l,1),this.edgeProps.splice(l,1),this.edges.push({a:f,b:ve}),this.edges.push({a:ve,b:m});const ue=_r(En(),this.vertices[ve].position,x),we=Wr(ue),Pe={vec:ue,dir:nr(En(),ue,1/we),len:we};this.edgeProps.push(Pe),this.edgeProps.push(Pe)}}distSqLines(o,l,f,m){const x=Se(be(),l,o),b=Se(be(),m,f),M=Se(be(),o,f),P=vt(x,x),L=vt(x,b),N=vt(x,M),U=vt(b,b),G=vt(b,M),te=P*U-L*L;if(te===0){const me=vt(M,b)/vt(b,b);return yt(Rn(be(),f,m,me),o)}const ne=(L*G-N*U)/te,ce=(P*G-L*N)/te;return yt(Rn(be(),o,l,ne),Rn(be(),f,m,ce))}}class tc{static parseFrom(o,l){const f=yp.parse(o);if(!f)return[];let{vertices:m,features:x}=f;const b=1/dt(l);x.sort((N,U)=>N.id-U.id),m.sort((N,U)=>N.id-U.id||N.idx-U.idx),m=m.filter((N,U,G)=>U===G.findIndex(te=>te.id===N.id&&te.idx===N.idx));const M=new Array;let P=0;const L=m.length;for(const N of x){if(N.constantHeight){M.push(new cg(N.id,N.bounds,N.constantHeight));continue}for(;P!==L&&m[P].id<N.id;)P++;if(P===L||m[P].id!==N.id)continue;const U=new Array,G=new Array,te=P;for(;P!==L&&m[P].id===N.id;){const ne=m[P];if(U.push({position:ne.position,height:ne.height,extent:ne.extent}),P!==te&&m[P-1].idx===ne.idx-1){const ce=P-te;G.push({a:ce-1,b:ce})}P++}M.push(new cg(N.id,N.bounds,void 0,U,G,b))}return M}static getElevationFeature(o,l){if(!l)return;const f=+o.properties[lg];return Number.isNaN(f)?void 0:l.find(m=>m.id===f)}}class Z1{constructor(o,l){this.zScale=1,this.xOffset=0,this.yOffset=0,o.equals(l)||(this.zScale=Math.pow(2,l.z-o.z),this.xOffset=(o.x*this.zScale-l.x)*vn,this.yOffset=(o.y*this.zScale-l.y)*vn)}constantElevation(o,l){if(o.constantHeight!=null)return this.computeBiasedHeight(o.constantHeight,l)}pointElevation(o,l,f){const m=this.constantElevation(l,f);return m??(o.x=o.x*this.zScale+this.xOffset,o.y=o.y*this.zScale+this.yOffset,this.computeBiasedHeight(l.pointElevation(o),f))}computeBiasedHeight(o,l){return l<=0?o:o+l*Ke(0,l,o>=0?o:Math.abs(.5*o))}}In(cg,"ElevationFeature");class x_{constructor(){this.polygons=new Map}add(o,...l){this.polygons.has(o)?this.polygons.get(o).push(...l):this.polygons.set(o,l)}merge(o){for(const[l,f]of o.polygons)this.add(l,...f)}}class Il{constructor(){this.portals=[]}static evaluate(o){if(o.length===0)return new Il;let l=[];for(const L of o)l.push(...L.portals);if(l.length===0)return new Il;const f=(L,N)=>L<=0&&N<=0||L>=vn&&N>=vn;for(const L of l){const N=L.va,U=L.vb;(f(N.x,U.x)||f(N.y,U.y))&&(L.type="border")}const m=l.filter(L=>L.type!=="unevaluated"),x=l.filter(L=>L.type==="unevaluated");if(x.length===0)return new Il;x.sort((L,N)=>L.hash===N.hash?L.isTunnel===N.isTunnel?0:L.isTunnel?-1:1:L.hash<N.hash?1:-1),l=m.concat(x);let b=m.length,M=b,P=b;do if(M++,M===l.length||l[b].hash!==l[M].hash){if(M-b==2){P<b&&(l[P]=l[b],l[b]=null);const L=l[P],N=l[M-1];L.type=L.isTunnel!==N.isTunnel?"tunnel":"polygon",L.connection={a:L.connection.a,b:N.connection.a},P++}b=M}while(b!==l.length);return l.splice(P),l.sort((L,N)=>L.hash<N.hash?1:-1),{portals:l}}}In(Il,"ElevationPortalGraph"),In(x_,"ElevationPolygons");class fP{constructor(o,l,f){this.outPositions=o,this.outNormals=l,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(o,l,f){let m=o[2];f!=null&&(m*=f);const x=this.getVec3Bits(o)<<96n|this.getVec3Bits(l),b=this.vertexLookup.get(x);if(b!=null)return b;const M=this.outPositions.length;this.vertexLookup.set(x,M);const P=Math.trunc(16384*l[0]),L=Math.trunc(16384*l[1]),N=Math.trunc(16384*l[2]);return this.outPositions.emplaceBack(o[0],o[1],m),this.outNormals.emplaceBack(P,L,N),M}addVertices(o,l,...f){const m=[];for(const x of f){const b=this.addVertex(x,o,l);m.push(b)}return m}addTriangles(o,l,f){if(l&&f){const m=f.length===1,x=Re(0,0,0);for(let b=0;b<o.length;b+=3){const M=l[o[b+0]],P=l[o[b+1]],L=l[o[b+2]],N=m?f[0]:f[o[b+1]],U=m?f[0]:f[o[b+2]],G=this.addVertex(Re(M.x,M.y,m?f[0]:f[o[b+0]]),x),te=this.addVertex(Re(P.x,P.y,N),x),ne=this.addVertex(Re(L.x,L.y,U),x);this.outIndices.emplaceBack(G,te,ne)}}else for(let m=0;m<o.length;m+=3)this.outIndices.emplaceBack(o[m+0],o[m+1],o[m+2])}addQuad(o,l){const f=this.addVertices(l,void 0,...o.map(P=>Re(P.coord.x,P.coord.y,P.height))),[m,x,b,M]=f;this.addTriangles([m,x,b,b,M,m])}getBits(o){return this.view.setFloat32(0,o),BigInt(this.view.getUint32(0))}getVec3Bits(o){return this.getBits(o[0])<<64n|this.getBits(o[1])<<32n|this.getBits(o[2])}}class nc{constructor(o){this.unevaluatedPortals=new Il,this.portalPolygons=new x_,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new ef,this.vertexNormals=new tf,this.indexArray=new Do,this.tileToMeters=dt(o)}addVertices(o,l){const f=this.unevalVertices.length;for(let m=0;m<o.length;m++)this.unevalVertices.push(o[m]),this.unevalHeights.push(l[m]);return f}addTriangles(o,l,f){const m=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const x of o)m.push(x+l)}addRenderableRing(o,l,f,m,x){const b=[new dn(x.min.x,x.min.y),new dn(x.max.x,x.min.y),new dn(x.max.x,x.max.y),new dn(x.min.x,x.max.y)];for(let M=0;M<f-1;M++){const P=l+M,L=P+1,N=this.unevalVertices[P],U=this.unevalVertices[L];if(!(N.x>=x.min.x&&N.x<=x.max.x&&N.y>=x.min.y&&N.y<=x.max.y||U.x>=x.min.x&&U.x<=x.max.x&&U.y>=x.min.y&&U.y<=x.max.y||Wi(N,U,b))||this.isOnBorder(N.x,U.x)||this.isOnBorder(N.y,U.y))continue;const G=nc.computeEdgeHash(this.unevalVertices[P],this.unevalVertices[L]);let te,ne=this.vertexHashLookup.get(nc.computePosHash(N));ne!=null?te=ne.next:(ne=this.vertexHashLookup.get(nc.computePosHash(U)),te=ne!=null?ne.prev:G),this.unevalEdges.push({polygonIdx:o,a:P,b:L,hash:G,portalHash:te,isTunnel:m,type:"unevaluated"})}}addPortalCandidates(o,l,f,m,x){if(l.length===0)return;this.portalPolygons.add(o,{geometry:l,zLevel:x});const b=l[0];this.vertexHashLookup.clear();let M=nc.computeEdgeHash(b[b.length-2],b[b.length-1]);for(let P=0;P<b.length-1;P++){const L=b[P+0],N=b[P+1],U=Fr(N.x-L.x,N.y-L.y),G=Wr(U);if(G===0)continue;let te="unevaluated";const ne=m.pointElevation(L),ce=m.pointElevation(N);Math.abs(ne)<.01&&Math.abs(ce)<.01?te="entrance":(this.isOnBorder(L.x,N.x)||this.isOnBorder(L.y,N.y))&&(te="border");const me=nc.computeEdgeHash(L,N);this.unevaluatedPortals.portals.push({connection:{a:o,b:void 0},va:L,vb:N,vab:U,length:G,hash:me,isTunnel:f,type:te});const ve=nc.computePosHash(L);this.vertexHashLookup.set(ve,{prev:M,next:me}),M=me}}construct(o){if(this.unevalVertices.length===0)return;const l=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=U=>{U.primitiveLength=this.indexArray.length-U.primitiveOffset},m=new fP(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(o.portals,this.unevalEdges);const x=l(),b=l(),M=l(),P=(U,G)=>{U.sort((ne,ce)=>ne.type===G&&ce.type!==G?-1:ne.type!==G&&ce.type===G?1:0);const te=U.findIndex(ne=>ne.type!==G);return te>=0?te:U.length};let L=0;this.unevalEdges.length>0&&(L=P(this.unevalEdges,"none"),this.constructBridgeStructures(m,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:L},this.tileToMeters));const N=l();if(this.unevalEdges.length>0){const U=this.unevalEdges.splice(L),G=P(U,"tunnel")+L;this.unevalEdges.push(...U),this.constructTunnelStructures(m,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:L},{min:L,max:G})}f(M),m.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(N),m.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(b),m.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(x),this.maskSegments=ho.simpleSegment(0,N.primitiveOffset,0,N.primitiveLength),this.depthSegments=ho.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.renderableSegments=ho.simpleSegment(0,M.primitiveOffset,0,M.primitiveLength),this.shadowCasterSegments=ho.simpleSegment(0,x.primitiveOffset,0,x.primitiveLength)}upload(o){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=o.createVertexBuffer(this.vertexPositions,kE.members),this.vertexBufferNormal=o.createVertexBuffer(this.vertexNormals,OE.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(o,l,f,m,x){const b=new Map;for(let M=m;M<x;M++){const P=f[M],L=P.a,N=P.b,U=nc.computePosHash(o[L]),G=nc.computePosHash(o[N]);b.has(U)||b.set(U,{}),b.has(G)||b.set(G,{});const te=b.get(U),ne=b.get(G);l[L]<=0&&l[N]<=0||(te.to=N,ne.from=L)}return b}constructBridgeStructures(o,l,f,m,x,b){const M=this.computeVertexConnections(l,f,m,x.min,x.max),P=1/b,L=.5*P,N=G=>Re(l[G].x,l[G].y,f[G]*P),U=G=>{const te=M.get(nc.computePosHash(l[G])),ne=te.from,ce=te.to;if(!ne||!ce)return;const me=N(ne),ve=N(G),Ie=N(ce),Me=Re(0,0,0);if(!fn(me,ve)){const we=Bt(be(),ve,me);He(Me,Me,It(we,we))}if(!fn(Ie,ve)){const we=Bt(be(),Ie,ve);He(Me,Me,It(we,we))}const ue=_n(Me);return ue>0?Oe(Me,Me,1/ue):void 0};for(let G=x.min;G<x.max;G++){const te=m[G],ne=this.prepareEdgePoints(l,f,te,(rn,Mr)=>rn>Mr);if(ne==null)continue;const ce=ne[0],me=ne[1],ve=Re(ce.coord.x,ce.coord.y,P*ce.height),Ie=Re(me.coord.x,me.coord.y,P*me.height);if(fn(ve,Ie))continue;const Me=Bt(be(),Ie,ve);It(Me,Me);const ue=rn=>It(rn,rn),we=U(te.a)||Me,Pe=U(te.b)||Me,Be=ue(Re(we[1],-we[0],0)),Qe=ue(Re(Pe[1],-Pe[0],0)),rt=ue(sn(be(),Be,we)),ot=ue(sn(be(),Qe,Pe)),ct=be(),At=[He(be(),ve,Oe(ct,Bt(ct,Be,rt),L)),He(be(),ve,Oe(ct,He(ct,Be,rt),L)),He(be(),ve,Oe(ct,rt,L)),ve],Yt=[He(be(),Ie,Oe(ct,Bt(ct,Qe,ot),L)),He(be(),Ie,Oe(ct,He(ct,Qe,ot),L)),He(be(),Ie,Oe(ct,ot,L)),Ie],[Vt,qt]=o.addVertices(Be,b,At[0],At[1]),[nn,Et]=o.addVertices(Qe,b,Yt[0],Yt[1]);o.addTriangles([Vt,qt,nn,qt,Et,nn]);const[Ut,bt]=o.addVertices(rt,b,At[1],At[2]),[Ct,on]=o.addVertices(ot,b,Yt[1],Yt[2]);o.addTriangles([Ut,bt,Ct,bt,on,Ct]);const[un,Qn]=o.addVertices($t(Be,Be),b,At[2],At[3]),[Nn,Sn]=o.addVertices($t(Qe,Qe),b,Yt[2],Yt[3]);o.addTriangles([un,Qn,Nn,Qn,Sn,Nn])}}constructTunnelStructures(o,l,f,m,x,b){const M=P=>It(P,P);for(let P=x.min;P<x.max;P++){const L=this.prepareEdgePoints(l,f,m[P],(te,ne)=>te<ne);if(L==null)continue;const[N,U]=L,G=M(Re(U.coord.y-N.coord.y,-(U.coord.x-N.coord.x),0));o.addQuad([N,U,{coord:U.coord,height:m[P].isTunnel?-.1:0},{coord:N.coord,height:m[P].isTunnel?-.1:0}],G)}for(let P=b.min;P<b.max;P++){const L=m[P],N=l[L.a],U=l[L.b],G=M(Re(U.y-N.y,-(U.x-N.x),0));o.addQuad([{coord:U,height:0},{coord:N,height:0},{coord:N,height:f[L.a]+4},{coord:U,height:f[L.b]+4}],G),o.addQuad([{coord:N,height:0},{coord:U,height:0},{coord:U,height:f[L.b]+4},{coord:N,height:f[L.a]+4}],G)}}prepareEdgePoints(o,l,f,m){let x=l[f.a],b=l[f.b];const M=m(x,0),P=m(b,0);if(M&&P)return[{coord:o[f.a],height:x},{coord:o[f.b],height:b}];if(!M&&!P)return;const L=o[f.a].clone(),N=o[f.b].clone();if(M){if(!P){const U=b/(b-x);N.x=ar(N.x,L.x,U),N.y=ar(N.y,L.y,U),b=ar(b,x,U)}}else{const U=x/(x-b);L.x=ar(L.x,N.x,U),L.y=ar(L.y,N.y,U),x=ar(x,b,U)}return[{coord:L,height:x},{coord:N,height:b}]}prepareEdges(o,l){if(l.length===0)return;l.sort((M,P)=>M.hash===P.hash?P.polygonIdx-M.polygonIdx:P.hash>M.hash?1:-1);let f=0,m=0,x=0,b=l[f].polygonIdx;do m++,(m===l.length||l[f].hash!==l[m].hash)&&((m-f==1||l[m-1].polygonIdx!==b)&&(x<f&&(l[x]=l[f],l[f]=null),l[x].type="none",x++),f=m,f!==l.length&&(b=l[f].polygonIdx));while(f!==l.length);if(l.splice(x),l.length!==0&&o.length!==0){l.sort((L,N)=>L.portalHash<N.portalHash?1:-1);let M=0,P=0;for(;M!==l.length&&P!==o.length;){const L=l[M],N=o[P];L.portalHash>N.hash?M++:N.hash>L.portalHash?P++:(L.type=N.type,M++)}}}isOnBorder(o,l){return o<=0&&l<=0||o>=vn&&l>=vn}static computeEdgeHash(o,l){return(o.y===l.y&&o.x>l.x||o.y>l.y)&&([o,l]=[l,o]),BigInt(nc.computePosHash(o))<<32n|BigInt(nc.computePosHash(l))}static computePosHash(o){return((65535&o.x)<<16|65535&o.y)>>>0}}var ug,K1={exports:{}},$E=(ug||(ug=1,function(u,o){(function(l){function f(ze,Ve){return ze>Ve?1:ze<Ve?-1:0}var m=function(ze,Ve){ze===void 0&&(ze=f),Ve===void 0&&(Ve=!1),this._compare=ze,this._root=null,this._size=0,this._noDuplicates=!!Ve},x={size:{configurable:!0}};function b(ze,Ve,Pt,mn,Cn){var Tn=Cn-mn;if(Tn>0){var Kn=mn+Math.floor(Tn/2),gr={key:Ve[Kn],data:Pt[Kn],parent:ze};return gr.left=b(gr,Ve,Pt,mn,Kn),gr.right=b(gr,Ve,Pt,Kn+1,Cn),gr}return null}function M(ze,Ve,Pt,mn,Cn){if(!(Pt>=mn)){for(var Tn=ze[Pt+mn>>1],Kn=Pt-1,gr=mn+1;;){do Kn++;while(Cn(ze[Kn],Tn)<0);do gr--;while(Cn(ze[gr],Tn)>0);if(Kn>=gr)break;var ei=ze[Kn];ze[Kn]=ze[gr],ze[gr]=ei,ei=Ve[Kn],Ve[Kn]=Ve[gr],Ve[gr]=ei}M(ze,Ve,Pt,gr,Cn),M(ze,Ve,gr+1,mn,Cn)}}m.prototype.rotateLeft=function(ze){var Ve=ze.right;Ve&&(ze.right=Ve.left,Ve.left&&(Ve.left.parent=ze),Ve.parent=ze.parent),ze.parent?ze===ze.parent.left?ze.parent.left=Ve:ze.parent.right=Ve:this._root=Ve,Ve&&(Ve.left=ze),ze.parent=Ve},m.prototype.rotateRight=function(ze){var Ve=ze.left;Ve&&(ze.left=Ve.right,Ve.right&&(Ve.right.parent=ze),Ve.parent=ze.parent),ze.parent?ze===ze.parent.left?ze.parent.left=Ve:ze.parent.right=Ve:this._root=Ve,Ve&&(Ve.right=ze),ze.parent=Ve},m.prototype._splay=function(ze){for(;ze.parent;){var Ve=ze.parent;Ve.parent?Ve.left===ze&&Ve.parent.left===Ve?(this.rotateRight(Ve.parent),this.rotateRight(Ve)):Ve.right===ze&&Ve.parent.right===Ve?(this.rotateLeft(Ve.parent),this.rotateLeft(Ve)):Ve.left===ze&&Ve.parent.right===Ve?(this.rotateRight(Ve),this.rotateLeft(Ve)):(this.rotateLeft(Ve),this.rotateRight(Ve)):Ve.left===ze?this.rotateRight(Ve):this.rotateLeft(Ve)}},m.prototype.splay=function(ze){for(var Ve,Pt,mn,Cn,Tn;ze.parent;)(Pt=(Ve=ze.parent).parent)&&Pt.parent?((mn=Pt.parent).left===Pt?mn.left=ze:mn.right=ze,ze.parent=mn):(ze.parent=null,this._root=ze),Cn=ze.left,Tn=ze.right,ze===Ve.left?(Pt&&(Pt.left===Ve?(Ve.right?(Pt.left=Ve.right,Pt.left.parent=Pt):Pt.left=null,Ve.right=Pt,Pt.parent=Ve):(Cn?(Pt.right=Cn,Cn.parent=Pt):Pt.right=null,ze.left=Pt,Pt.parent=ze)),Tn?(Ve.left=Tn,Tn.parent=Ve):Ve.left=null,ze.right=Ve,Ve.parent=ze):(Pt&&(Pt.right===Ve?(Ve.left?(Pt.right=Ve.left,Pt.right.parent=Pt):Pt.right=null,Ve.left=Pt,Pt.parent=Ve):(Tn?(Pt.left=Tn,Tn.parent=Pt):Pt.left=null,ze.right=Pt,Pt.parent=ze)),Cn?(Ve.right=Cn,Cn.parent=Ve):Ve.right=null,ze.left=Ve,Ve.parent=ze)},m.prototype.replace=function(ze,Ve){ze.parent?ze===ze.parent.left?ze.parent.left=Ve:ze.parent.right=Ve:this._root=Ve,Ve&&(Ve.parent=ze.parent)},m.prototype.minNode=function(ze){if(ze===void 0&&(ze=this._root),ze)for(;ze.left;)ze=ze.left;return ze},m.prototype.maxNode=function(ze){if(ze===void 0&&(ze=this._root),ze)for(;ze.right;)ze=ze.right;return ze},m.prototype.insert=function(ze,Ve){var Pt=this._root,mn=null,Cn=this._compare;if(this._noDuplicates)for(;Pt;){if(mn=Pt,Cn(Pt.key,ze)===0)return;Pt=Cn(Pt.key,ze)<0?Pt.right:Pt.left}else for(;Pt;)mn=Pt,Pt=Cn(Pt.key,ze)<0?Pt.right:Pt.left;return Pt={key:ze,data:Ve,left:null,right:null,parent:mn},mn?Cn(mn.key,Pt.key)<0?mn.right=Pt:mn.left=Pt:this._root=Pt,this.splay(Pt),this._size++,Pt},m.prototype.find=function(ze){for(var Ve=this._root,Pt=this._compare;Ve;){var mn=Pt(Ve.key,ze);if(mn<0)Ve=Ve.right;else{if(!(mn>0))return Ve;Ve=Ve.left}}return null},m.prototype.contains=function(ze){for(var Ve=this._root,Pt=this._compare;Ve;){var mn=Pt(ze,Ve.key);if(mn===0)return!0;Ve=mn<0?Ve.left:Ve.right}return!1},m.prototype.remove=function(ze){var Ve=this.find(ze);if(!Ve)return!1;if(this.splay(Ve),Ve.left)if(Ve.right){var Pt=this.minNode(Ve.right);Pt.parent!==Ve&&(this.replace(Pt,Pt.right),Pt.right=Ve.right,Pt.right.parent=Pt),this.replace(Ve,Pt),Pt.left=Ve.left,Pt.left.parent=Pt}else this.replace(Ve,Ve.left);else this.replace(Ve,Ve.right);return this._size--,!0},m.prototype.removeNode=function(ze){if(!ze)return!1;if(this.splay(ze),ze.left)if(ze.right){var Ve=this.minNode(ze.right);Ve.parent!==ze&&(this.replace(Ve,Ve.right),Ve.right=ze.right,Ve.right.parent=Ve),this.replace(ze,Ve),Ve.left=ze.left,Ve.left.parent=Ve}else this.replace(ze,ze.left);else this.replace(ze,ze.right);return this._size--,!0},m.prototype.erase=function(ze){var Ve=this.find(ze);if(Ve){this.splay(Ve);var Pt=Ve.left,mn=Ve.right,Cn=null;Pt&&(Pt.parent=null,Cn=this.maxNode(Pt),this.splay(Cn),this._root=Cn),mn&&(Pt?Cn.right=mn:this._root=mn,mn.parent=Cn),this._size--}},m.prototype.pop=function(){var ze=this._root,Ve=null;if(ze){for(;ze.left;)ze=ze.left;Ve={key:ze.key,data:ze.data},this.remove(ze.key)}return Ve},m.prototype.next=function(ze){var Ve=ze;if(Ve)if(Ve.right)for(Ve=Ve.right;Ve&&Ve.left;)Ve=Ve.left;else for(Ve=ze.parent;Ve&&Ve.right===ze;)ze=Ve,Ve=Ve.parent;return Ve},m.prototype.prev=function(ze){var Ve=ze;if(Ve)if(Ve.left)for(Ve=Ve.left;Ve&&Ve.right;)Ve=Ve.right;else for(Ve=ze.parent;Ve&&Ve.left===ze;)ze=Ve,Ve=Ve.parent;return Ve},m.prototype.forEach=function(ze){for(var Ve=this._root,Pt=[],mn=!1,Cn=0;!mn;)Ve?(Pt.push(Ve),Ve=Ve.left):Pt.length>0?(ze(Ve=Pt.pop(),Cn++),Ve=Ve.right):mn=!0;return this},m.prototype.range=function(ze,Ve,Pt,mn){for(var Cn=[],Tn=this._compare,Kn=this._root;Cn.length!==0||Kn;)if(Kn)Cn.push(Kn),Kn=Kn.left;else{if(Tn((Kn=Cn.pop()).key,Ve)>0)break;if(Tn(Kn.key,ze)>=0&&Pt.call(mn,Kn))return this;Kn=Kn.right}return this},m.prototype.keys=function(){for(var ze=this._root,Ve=[],Pt=[],mn=!1;!mn;)ze?(Ve.push(ze),ze=ze.left):Ve.length>0?(ze=Ve.pop(),Pt.push(ze.key),ze=ze.right):mn=!0;return Pt},m.prototype.values=function(){for(var ze=this._root,Ve=[],Pt=[],mn=!1;!mn;)ze?(Ve.push(ze),ze=ze.left):Ve.length>0?(ze=Ve.pop(),Pt.push(ze.data),ze=ze.right):mn=!0;return Pt},m.prototype.at=function(ze){for(var Ve=this._root,Pt=[],mn=!1,Cn=0;!mn;)if(Ve)Pt.push(Ve),Ve=Ve.left;else if(Pt.length>0){if(Ve=Pt.pop(),Cn===ze)return Ve;Cn++,Ve=Ve.right}else mn=!0;return null},m.prototype.load=function(ze,Ve,Pt){if(ze===void 0&&(ze=[]),Ve===void 0&&(Ve=[]),Pt===void 0&&(Pt=!1),this._size!==0)throw new Error("bulk-load: tree is not empty");var mn=ze.length;return Pt&&M(ze,Ve,0,mn-1,this._compare),this._root=b(null,ze,Ve,0,mn),this._size=mn,this},m.prototype.min=function(){var ze=this.minNode(this._root);return ze?ze.key:null},m.prototype.max=function(){var ze=this.maxNode(this._root);return ze?ze.key:null},m.prototype.isEmpty=function(){return this._root===null},x.size.get=function(){return this._size},m.createTree=function(ze,Ve,Pt,mn,Cn){return new m(Pt,Cn).load(ze,Ve,mn)},Object.defineProperties(m.prototype,x);var P=0,L=1,N=2,U=3,G=0,te=1,ne=2,ce=3;function me(ze,Ve,Pt){Ve===null?(ze.inOut=!1,ze.otherInOut=!0):(ze.isSubject===Ve.isSubject?(ze.inOut=!Ve.inOut,ze.otherInOut=Ve.otherInOut):(ze.inOut=!Ve.otherInOut,ze.otherInOut=Ve.isVertical()?!Ve.inOut:Ve.inOut),Ve&&(ze.prevInResult=!ve(Ve,Pt)||Ve.isVertical()?Ve.prevInResult:Ve));var mn=ve(ze,Pt);ze.resultTransition=mn?function(Cn,Tn){var Kn,gr=!Cn.inOut,ei=!Cn.otherInOut;switch(Tn){case G:Kn=gr&&ei;break;case te:Kn=gr||ei;break;case ce:Kn=gr^ei;break;case ne:Kn=Cn.isSubject?gr&&!ei:ei&&!gr}return Kn?1:-1}(ze,Pt):0}function ve(ze,Ve){switch(ze.type){case P:switch(Ve){case G:return!ze.otherInOut;case te:return ze.otherInOut;case ne:return ze.isSubject&&ze.otherInOut||!ze.isSubject&&!ze.otherInOut;case ce:return!0}break;case N:return Ve===G||Ve===te;case U:return Ve===ne;case L:return!1}return!1}var Ie=function(ze,Ve,Pt,mn,Cn){this.left=Ve,this.point=ze,this.otherEvent=Pt,this.isSubject=mn,this.type=Cn||P,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},Me={inResult:{configurable:!0}};function ue(ze,Ve){return ze[0]===Ve[0]&&ze[1]===Ve[1]}Ie.prototype.isBelow=function(ze){var Ve=this.point,Pt=this.otherEvent.point;return this.left?(Ve[0]-ze[0])*(Pt[1]-ze[1])-(Pt[0]-ze[0])*(Ve[1]-ze[1])>0:(Pt[0]-ze[0])*(Ve[1]-ze[1])-(Ve[0]-ze[0])*(Pt[1]-ze[1])>0},Ie.prototype.isAbove=function(ze){return!this.isBelow(ze)},Ie.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},Me.inResult.get=function(){return this.resultTransition!==0},Ie.prototype.clone=function(){var ze=new Ie(this.point,this.left,this.otherEvent,this.isSubject,this.type);return ze.contourId=this.contourId,ze.resultTransition=this.resultTransition,ze.prevInResult=this.prevInResult,ze.isExteriorRing=this.isExteriorRing,ze.inOut=this.inOut,ze.otherInOut=this.otherInOut,ze},Object.defineProperties(Ie.prototype,Me);var we=11102230246251565e-32,Pe=134217729,Be=(3+8*we)*we;function Qe(ze,Ve,Pt,mn,Cn){var Tn,Kn,gr,ei,ti=Ve[0],Vr=mn[0],Fi=0,Ki=0;Vr>ti==Vr>-ti?(Tn=ti,ti=Ve[++Fi]):(Tn=Vr,Vr=mn[++Ki]);var ni=0;if(Fi<ze&&Ki<Pt)for(Vr>ti==Vr>-ti?(gr=Tn-((Kn=ti+Tn)-ti),ti=Ve[++Fi]):(gr=Tn-((Kn=Vr+Tn)-Vr),Vr=mn[++Ki]),Tn=Kn,gr!==0&&(Cn[ni++]=gr);Fi<ze&&Ki<Pt;)Vr>ti==Vr>-ti?(gr=Tn-((Kn=Tn+ti)-(ei=Kn-Tn))+(ti-ei),ti=Ve[++Fi]):(gr=Tn-((Kn=Tn+Vr)-(ei=Kn-Tn))+(Vr-ei),Vr=mn[++Ki]),Tn=Kn,gr!==0&&(Cn[ni++]=gr);for(;Fi<ze;)gr=Tn-((Kn=Tn+ti)-(ei=Kn-Tn))+(ti-ei),ti=Ve[++Fi],Tn=Kn,gr!==0&&(Cn[ni++]=gr);for(;Ki<Pt;)gr=Tn-((Kn=Tn+Vr)-(ei=Kn-Tn))+(Vr-ei),Vr=mn[++Ki],Tn=Kn,gr!==0&&(Cn[ni++]=gr);return Tn===0&&ni!==0||(Cn[ni++]=Tn),ni}function rt(ze){return new Float64Array(ze)}var ot=33306690738754716e-32,ct=22204460492503146e-32,At=11093356479670487e-47,Yt=rt(4),Vt=rt(8),qt=rt(12),nn=rt(16),Et=rt(4);function Ut(ze,Ve,Pt){var mn=function(Cn,Tn,Kn,gr,ei,ti){var Vr=(Tn-ti)*(Kn-ei),Fi=(Cn-ei)*(gr-ti),Ki=Vr-Fi;if(Vr===0||Fi===0||Vr>0!=Fi>0)return Ki;var ni=Math.abs(Vr+Fi);return Math.abs(Ki)>=ot*ni?Ki:-function(To,to,Li,Io,so,Qi,no){var Vi,Hr,Ui,Eo,hr,hi,ao,Ao,fo,hs,Hi,os,ic,Ia,da,oc,bp,fs,Rs=To-so,ka=Li-so,ml=to-Qi,Ya=Io-Qi;Yt[0]=(da=(Ao=Rs-(ao=(hi=Pe*Rs)-(hi-Rs)))*(hs=Ya-(fo=(hi=Pe*Ya)-(hi-Ya)))-((Ia=Rs*Ya)-ao*fo-Ao*fo-ao*hs))-((Hi=da-(bp=(Ao=ml-(ao=(hi=Pe*ml)-(hi-ml)))*(hs=ka-(fo=(hi=Pe*ka)-(hi-ka)))-((oc=ml*ka)-ao*fo-Ao*fo-ao*hs)))+(hr=da-Hi))+(hr-bp),Yt[1]=(ic=Ia-((os=Ia+Hi)-(hr=os-Ia))+(Hi-hr))-((Hi=ic-oc)+(hr=ic-Hi))+(hr-oc),Yt[2]=os-((fs=os+Hi)-(hr=fs-os))+(Hi-hr),Yt[3]=fs;var Iy=function(n7e,mU){for(var gU=mU[0],cI=1;cI<4;cI++)gU+=mU[cI];return gU}(0,Yt),Lw=ct*no;if(Iy>=Lw||-Iy>=Lw||(Vi=To-(Rs+(hr=To-Rs))+(hr-so),Ui=Li-(ka+(hr=Li-ka))+(hr-so),Hr=to-(ml+(hr=to-ml))+(hr-Qi),Eo=Io-(Ya+(hr=Io-Ya))+(hr-Qi),Vi===0&&Hr===0&&Ui===0&&Eo===0)||(Lw=At*no+Be*Math.abs(Iy),(Iy+=Rs*Eo+Ya*Vi-(ml*Ui+ka*Hr))>=Lw||-Iy>=Lw))return Iy;Et[0]=(da=(Ao=Vi-(ao=(hi=Pe*Vi)-(hi-Vi)))*(hs=Ya-(fo=(hi=Pe*Ya)-(hi-Ya)))-((Ia=Vi*Ya)-ao*fo-Ao*fo-ao*hs))-((Hi=da-(bp=(Ao=Hr-(ao=(hi=Pe*Hr)-(hi-Hr)))*(hs=ka-(fo=(hi=Pe*ka)-(hi-ka)))-((oc=Hr*ka)-ao*fo-Ao*fo-ao*hs)))+(hr=da-Hi))+(hr-bp),Et[1]=(ic=Ia-((os=Ia+Hi)-(hr=os-Ia))+(Hi-hr))-((Hi=ic-oc)+(hr=ic-Hi))+(hr-oc),Et[2]=os-((fs=os+Hi)-(hr=fs-os))+(Hi-hr),Et[3]=fs;var Rse=Qe(4,Yt,4,Et,Vt);Et[0]=(da=(Ao=Rs-(ao=(hi=Pe*Rs)-(hi-Rs)))*(hs=Eo-(fo=(hi=Pe*Eo)-(hi-Eo)))-((Ia=Rs*Eo)-ao*fo-Ao*fo-ao*hs))-((Hi=da-(bp=(Ao=ml-(ao=(hi=Pe*ml)-(hi-ml)))*(hs=Ui-(fo=(hi=Pe*Ui)-(hi-Ui)))-((oc=ml*Ui)-ao*fo-Ao*fo-ao*hs)))+(hr=da-Hi))+(hr-bp),Et[1]=(ic=Ia-((os=Ia+Hi)-(hr=os-Ia))+(Hi-hr))-((Hi=ic-oc)+(hr=ic-Hi))+(hr-oc),Et[2]=os-((fs=os+Hi)-(hr=fs-os))+(Hi-hr),Et[3]=fs;var Dse=Qe(Rse,Vt,4,Et,qt);Et[0]=(da=(Ao=Vi-(ao=(hi=Pe*Vi)-(hi-Vi)))*(hs=Eo-(fo=(hi=Pe*Eo)-(hi-Eo)))-((Ia=Vi*Eo)-ao*fo-Ao*fo-ao*hs))-((Hi=da-(bp=(Ao=Hr-(ao=(hi=Pe*Hr)-(hi-Hr)))*(hs=Ui-(fo=(hi=Pe*Ui)-(hi-Ui)))-((oc=Hr*Ui)-ao*fo-Ao*fo-ao*hs)))+(hr=da-Hi))+(hr-bp),Et[1]=(ic=Ia-((os=Ia+Hi)-(hr=os-Ia))+(Hi-hr))-((Hi=ic-oc)+(hr=ic-Hi))+(hr-oc),Et[2]=os-((fs=os+Hi)-(hr=fs-os))+(Hi-hr),Et[3]=fs;var Pse=Qe(Dse,qt,4,Et,nn);return nn[Pse-1]}(Cn,Tn,Kn,gr,ei,ti,ni)}(ze[0],ze[1],Ve[0],Ve[1],Pt[0],Pt[1]);return mn>0?-1:mn<0?1:0}function bt(ze,Ve){var Pt=ze.point,mn=Ve.point;return Pt[0]>mn[0]?1:Pt[0]<mn[0]?-1:Pt[1]!==mn[1]?Pt[1]>mn[1]?1:-1:function(Cn,Tn,Kn,gr){return Cn.left!==Tn.left?Cn.left?1:-1:Ut(Kn,Cn.otherEvent.point,Tn.otherEvent.point)!==0?Cn.isBelow(Tn.otherEvent.point)?-1:1:!Cn.isSubject&&Tn.isSubject?1:-1}(ze,Ve,Pt)}function Ct(ze,Ve,Pt){var mn=new Ie(Ve,!1,ze,ze.isSubject),Cn=new Ie(Ve,!0,ze.otherEvent,ze.isSubject);return ue(ze.point,ze.otherEvent.point)&&console.warn("what is that, a collapsed segment?",ze),mn.contourId=Cn.contourId=ze.contourId,bt(Cn,ze.otherEvent)>0&&(ze.otherEvent.left=!0,Cn.left=!1),ze.otherEvent.otherEvent=Cn,ze.otherEvent=mn,Pt.push(Cn),Pt.push(mn),Pt}function on(ze,Ve){return ze[0]*Ve[1]-ze[1]*Ve[0]}function un(ze,Ve){return ze[0]*Ve[0]+ze[1]*Ve[1]}function Qn(ze,Ve,Pt){var mn=function(ei,ti,Vr,Fi,Ki){var ni=[ti[0]-ei[0],ti[1]-ei[1]],To=[Fi[0]-Vr[0],Fi[1]-Vr[1]];function to(hi,ao,Ao){return[hi[0]+ao*Ao[0],hi[1]+ao*Ao[1]]}var Li=[Vr[0]-ei[0],Vr[1]-ei[1]],Io=on(ni,To),so=Io*Io,Qi=un(ni,ni);if(so>0){var no=on(Li,To)/Io;if(no<0||no>1)return null;var Vi=on(Li,ni)/Io;return Vi<0||Vi>1?null:no===0||no===1?[to(ei,no,ni)]:Vi===0||Vi===1?[to(Vr,Vi,To)]:[to(ei,no,ni)]}if((so=(Io=on(Li,ni))*Io)>0)return null;var Hr=un(ni,Li)/Qi,Ui=Hr+un(ni,To)/Qi,Eo=Math.min(Hr,Ui),hr=Math.max(Hr,Ui);return Eo<=1&&hr>=0?Eo===1?[to(ei,Eo>0?Eo:0,ni)]:hr===0?[to(ei,hr<1?hr:1,ni)]:[to(ei,Eo>0?Eo:0,ni),to(ei,hr<1?hr:1,ni)]:null}(ze.point,ze.otherEvent.point,Ve.point,Ve.otherEvent.point),Cn=mn?mn.length:0;if(Cn===0||Cn===1&&(ue(ze.point,Ve.point)||ue(ze.otherEvent.point,Ve.otherEvent.point))||Cn===2&&ze.isSubject===Ve.isSubject)return 0;if(Cn===1)return ue(ze.point,mn[0])||ue(ze.otherEvent.point,mn[0])||Ct(ze,mn[0],Pt),ue(Ve.point,mn[0])||ue(Ve.otherEvent.point,mn[0])||Ct(Ve,mn[0],Pt),1;var Tn=[],Kn=!1,gr=!1;return ue(ze.point,Ve.point)?Kn=!0:bt(ze,Ve)===1?Tn.push(Ve,ze):Tn.push(ze,Ve),ue(ze.otherEvent.point,Ve.otherEvent.point)?gr=!0:bt(ze.otherEvent,Ve.otherEvent)===1?Tn.push(Ve.otherEvent,ze.otherEvent):Tn.push(ze.otherEvent,Ve.otherEvent),Kn&&gr||Kn?(Ve.type=L,ze.type=Ve.inOut===ze.inOut?N:U,Kn&&!gr&&Ct(Tn[1].otherEvent,Tn[0].point,Pt),2):gr?(Ct(Tn[0],Tn[1].point,Pt),3):Tn[0]!==Tn[3].otherEvent?(Ct(Tn[0],Tn[1].point,Pt),Ct(Tn[1],Tn[2].point,Pt),3):(Ct(Tn[0],Tn[1].point,Pt),Ct(Tn[3].otherEvent,Tn[2].point,Pt),3)}function Nn(ze,Ve){if(ze===Ve)return 0;if(Ut(ze.point,ze.otherEvent.point,Ve.point)!==0||Ut(ze.point,ze.otherEvent.point,Ve.otherEvent.point)!==0)return ue(ze.point,Ve.point)?ze.isBelow(Ve.otherEvent.point)?-1:1:ze.point[0]===Ve.point[0]?ze.point[1]<Ve.point[1]?-1:1:bt(ze,Ve)===1?Ve.isAbove(ze.point)?-1:1:ze.isBelow(Ve.point)?-1:1;if(ze.isSubject!==Ve.isSubject)return ze.isSubject?-1:1;var Pt=ze.point,mn=Ve.point;return Pt[0]===mn[0]&&Pt[1]===mn[1]?(Pt=ze.otherEvent.point)[0]===(mn=Ve.otherEvent.point)[0]&&Pt[1]===mn[1]?0:ze.contourId>Ve.contourId?1:-1:bt(ze,Ve)===1?1:-1}var Sn=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function rn(ze,Ve,Pt,mn){var Cn,Tn=ze+1,Kn=Ve[ze].point,gr=Ve.length;for(Tn<gr&&(Cn=Ve[Tn].point);Tn<gr&&Cn[0]===Kn[0]&&Cn[1]===Kn[1];){if(!Pt[Tn])return Tn;++Tn<gr&&(Cn=Ve[Tn].point)}for(Tn=ze-1;Pt[Tn]&&Tn>mn;)Tn--;return Tn}Sn.prototype.isExterior=function(){return this.holeOf==null};var Mr=Gn,Hn=Gn;function Gn(ze,Ve){if(!(this instanceof Gn))return new Gn(ze,Ve);if(this.data=ze||[],this.length=this.data.length,this.compare=Ve||br,this.length>0)for(var Pt=(this.length>>1)-1;Pt>=0;Pt--)this._down(Pt)}function br(ze,Ve){return ze<Ve?-1:ze>Ve?1:0}Gn.prototype={push:function(ze){this.data.push(ze),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var ze=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),ze}},peek:function(){return this.data[0]},_up:function(ze){for(var Ve=this.data,Pt=this.compare,mn=Ve[ze];ze>0;){var Cn=ze-1>>1,Tn=Ve[Cn];if(Pt(mn,Tn)>=0)break;Ve[ze]=Tn,ze=Cn}Ve[ze]=mn},_down:function(ze){for(var Ve=this.data,Pt=this.compare,mn=this.length>>1,Cn=Ve[ze];ze<mn;){var Tn=1+(ze<<1),Kn=Tn+1,gr=Ve[Tn];if(Kn<this.length&&Pt(Ve[Kn],gr)<0&&(Tn=Kn,gr=Ve[Kn]),Pt(gr,Cn)>=0)break;Ve[ze]=gr,ze=Tn}Ve[ze]=Cn}},Mr.default=Hn;var zr=Math.max,Br=Math.min,Gr=0;function $r(ze,Ve,Pt,mn,Cn,Tn){var Kn,gr,ei,ti,Vr,Fi;for(Kn=0,gr=ze.length-1;Kn<gr;Kn++)if(ti=ze[Kn+1],Vr=new Ie(ei=ze[Kn],!1,void 0,Ve),Fi=new Ie(ti,!1,Vr,Ve),Vr.otherEvent=Fi,ei[0]!==ti[0]||ei[1]!==ti[1]){Vr.contourId=Fi.contourId=Pt,Tn||(Vr.isExteriorRing=!1,Fi.isExteriorRing=!1),bt(Vr,Fi)>0?Fi.left=!0:Vr.left=!0;var Ki=ei[0],ni=ei[1];Cn[0]=Br(Cn[0],Ki),Cn[1]=Br(Cn[1],ni),Cn[2]=zr(Cn[2],Ki),Cn[3]=zr(Cn[3],ni),mn.push(Vr),mn.push(Fi)}}var jr=[];function qi(ze,Ve,Pt){typeof ze[0][0][0]=="number"&&(ze=[ze]),typeof Ve[0][0][0]=="number"&&(Ve=[Ve]);var mn=function(ni,To,to){var Li=null;return ni.length*To.length==0&&(to===G?Li=jr:to===ne?Li=ni:to!==te&&to!==ce||(Li=ni.length===0?To:ni)),Li}(ze,Ve,Pt);if(mn)return mn===jr?null:mn;var Cn=[1/0,1/0,-1/0,-1/0],Tn=[1/0,1/0,-1/0,-1/0],Kn=function(ni,To,to,Li,Io){var so,Qi,no,Vi,Hr,Ui,Eo=new Mr(null,bt);for(no=0,Vi=ni.length;no<Vi;no++)for(Hr=0,Ui=(so=ni[no]).length;Hr<Ui;Hr++)(Qi=Hr===0)&&Gr++,$r(so[Hr],!0,Gr,Eo,to,Qi);for(no=0,Vi=To.length;no<Vi;no++)for(Hr=0,Ui=(so=To[no]).length;Hr<Ui;Hr++)Qi=Hr===0,Io===ne&&(Qi=!1),Qi&&Gr++,$r(so[Hr],!1,Gr,Eo,Li,Qi);return Eo}(ze,Ve,Cn,Tn,Pt);if(mn=function(ni,To,to,Li,Io){var so=null;return(to[0]>Li[2]||Li[0]>to[2]||to[1]>Li[3]||Li[1]>to[3])&&(Io===G?so=jr:Io===ne?so=ni:Io!==te&&Io!==ce||(so=ni.concat(To))),so}(ze,Ve,Cn,Tn,Pt))return mn===jr?null:mn;for(var gr=function(ni){var To,to,Li=function(no){var Vi,Hr,Ui,Eo,hr=[];for(Hr=0,Ui=no.length;Hr<Ui;Hr++)((Vi=no[Hr]).left&&Vi.inResult||!Vi.left&&Vi.otherEvent.inResult)&&hr.push(Vi);for(var hi=!1;!hi;)for(hi=!0,Hr=0,Ui=hr.length;Hr<Ui;Hr++)Hr+1<Ui&&bt(hr[Hr],hr[Hr+1])===1&&(Eo=hr[Hr],hr[Hr]=hr[Hr+1],hr[Hr+1]=Eo,hi=!1);for(Hr=0,Ui=hr.length;Hr<Ui;Hr++)(Vi=hr[Hr]).otherPos=Hr;for(Hr=0,Ui=hr.length;Hr<Ui;Hr++)(Vi=hr[Hr]).left||(Eo=Vi.otherPos,Vi.otherPos=Vi.otherEvent.otherPos,Vi.otherEvent.otherPos=Eo);return hr}(ni),Io={},so=[],Qi=function(){if(!Io[To]){var no=so.length,Vi=function(hr,hi,ao){var Ao=new Sn;if(hr.prevInResult!=null){var fo=hr.prevInResult,hs=fo.outputContourId;if(fo.resultTransition>0){var Hi=hi[hs];if(Hi.holeOf!=null){var os=Hi.holeOf;hi[os].holeIds.push(ao),Ao.holeOf=os,Ao.depth=hi[hs].depth}else hi[hs].holeIds.push(ao),Ao.holeOf=hs,Ao.depth=hi[hs].depth+1}else Ao.holeOf=null,Ao.depth=hi[hs].depth}else Ao.holeOf=null,Ao.depth=0;return Ao}(Li[To],so,no),Hr=function(hr){Io[hr]=!0,hr<Li.length&&Li[hr]&&(Li[hr].outputContourId=no)},Ui=To,Eo=To;for(Vi.points.push(Li[To].point);Hr(Ui),Hr(Ui=Li[Ui].otherPos),Vi.points.push(Li[Ui].point),!((Ui=rn(Ui,Li,Io,Eo))==Eo||Ui>=Li.length)&&Li[Ui];);so.push(Vi)}};for(To=0,to=Li.length;To<to;To++)Qi();return so}(function(ni,To,to,Li,Io,so){for(var Qi,no,Vi,Hr=new m(Nn),Ui=[],Eo=Math.min(Li[2],Io[2]);ni.length!==0;){var hr=ni.pop();if(Ui.push(hr),so===G&&hr.point[0]>Eo||so===ne&&hr.point[0]>Li[2])break;if(hr.left){no=Qi=Hr.insert(hr),Qi=Qi!==(Vi=Hr.minNode())?Hr.prev(Qi):null,no=Hr.next(no);var hi=Qi?Qi.key:null;if(me(hr,hi,so),no&&Qn(hr,no.key,ni)===2&&(me(hr,hi,so),me(no.key,hr,so)),Qi&&Qn(Qi.key,hr,ni)===2){var ao=Qi;me(hi,(ao=ao!==Vi?Hr.prev(ao):null)?ao.key:null,so),me(hr,hi,so)}}else no=Qi=Hr.find(hr=hr.otherEvent),Qi&&no&&(Qi=Qi!==Vi?Hr.prev(Qi):null,no=Hr.next(no),Hr.remove(hr),no&&Qi&&Qn(Qi.key,no.key,ni))}return Ui}(Kn,0,0,Cn,Tn,Pt)),ei=[],ti=0;ti<gr.length;ti++){var Vr=gr[ti];if(Vr.isExterior()){for(var Fi=[Vr.points],Ki=0;Ki<Vr.holeIds.length;Ki++)Fi.push(gr[Vr.holeIds[Ki]].points);ei.push(Fi)}}return ei}var eo={UNION:te,DIFFERENCE:ne,INTERSECTION:G,XOR:ce};l.diff=function(ze,Ve){return qi(ze,Ve,ne)},l.intersection=function(ze,Ve){return qi(ze,Ve,G)},l.operations=eo,l.union=function(ze,Ve){return qi(ze,Ve,te)},l.xor=function(ze,Ve){return qi(ze,Ve,ce)},Object.defineProperty(l,"__esModule",{value:!0})})(o)}(0,K1.exports)),K1.exports);/**
 * martinez v0.7.4
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */function Cx(u,o,l,f){const m=[],x=f===0?(b,M,P,L,N,U)=>{b.push(new dn(U,P+(U-M)/(L-M)*(N-P)))}:(b,M,P,L,N,U)=>{b.push(new dn(M+(U-P)/(N-P)*(L-M),U))};for(const b of u){const M=[];for(const P of b){if(P.length<=2)continue;const L=[];for(let G=0;G<P.length-1;G++){const te=P[G].x,ne=P[G].y,ce=P[G+1].x,me=P[G+1].y,ve=f===0?te:ne,Ie=f===0?ce:me;ve<o?Ie>o&&x(L,te,ne,ce,me,o):ve>l?Ie<l&&x(L,te,ne,ce,me,l):L.push(P[G]),Ie<o&&ve>=o&&x(L,te,ne,ce,me,o),Ie>l&&ve<=l&&x(L,te,ne,ce,me,l)}let N=P[P.length-1];const U=f===0?N.x:N.y;U>=o&&U<=l&&L.push(N),L.length&&(N=L[L.length-1],L[0].x===N.x&&L[0].y===N.y||L.push(L[0]),M.push(L))}M.length&&m.push(M)}return m}function pP(u,o){const l=Q1(u),f=Q1([o]),m=$E.intersection(l,f);return m==null?[]:qE(m)}function mP(u,o){let f=Q1(u,65536);for(;o.valid();o.next()){const[m,x]=o.get(),b=m.x*65536,M=m.y*65536,P=x.x*65536,L=x.y*65536,N=P-b,U=L-M,G=Math.hypot(N,U),te=Math.trunc(U/G*3),ne=-Math.trunc(N/G*3);f=$E.diff(f,[[[b,M],[P,L],[P+te,L+ne],[b+te,M+ne],[b,M]]])}return qE(f,1/65536)}function Q1(u,o=1){return[u.map(l=>l.map(f=>[f.x*o,f.y*o]))]}function qE(u,o=1){return u.map(l=>l.map((f,m)=>{const x=f.map(b=>new dn(b[0]*o,b[1]*o).round());return m>0&&x.reverse(),x}))}class J1{constructor(o,l){this.layoutVertexArray=new zc,this.indexArray=new Do,this.lineIndexArray=new Vu,this.triangleSegments=new ho,this.lineSegments=new ho,this.programConfigurations=new Vd(o.layers,{zoom:o.zoom,lut:o.lut}),this.uploaded=!1,l&&(this.elevatedLayoutVertexArray=new Jh)}update(o,l,f,m,x,b,M){this.programConfigurations.updatePaintArrays(o,l,x,f,m,b,M)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,uP.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.lineIndexBuffer=o.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=o.createVertexBuffer(this.elevatedLayoutVertexArray,U1.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(o,l,f,m,x,b){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,l,f,m,x,b)}}class Ax{constructor(o){this.zoom=o.zoom,this.pixelRatio=o.pixelRatio,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new J1(o,!1),this.elevationBufferData=new J1(o,!0),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=o.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(o,l){}populate(o,l,f,m){this.hasPattern=xy("fill",this.layers,this.pixelRatio,l);const x=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:M,id:P,index:L,sourceLayerIndex:N}of o){const U=this.layers[0]._featureFilter.needGeometry,G=$n(M,U);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),G,f))continue;const te=x?x.evaluate(G,{},f,l.availableImages):void 0,ne={id:P,properties:M.properties,type:M.type,sourceLayerIndex:N,index:L,geometry:U?G.geometry:Fn(M,f,m),patterns:{},sortKey:te};b.push(ne)}x&&b.sort((M,P)=>M.sortKey-P.sortKey);for(const M of b){const{geometry:P,index:L,sourceLayerIndex:N}=M;if(this.hasPattern){const U=bx("fill",this.layers,M,this.zoom,this.pixelRatio,l);this.patternFeatures.push(U)}else this.addFeature(M,P,L,f,{},l.availableImages,l.brightness,l.elevationFeatures);l.featureIndex.insert(o[L].feature,P,L,N,this.index)}}update(o,l,f,m,x,b,M){this.bufferData.update(o,l,f,m,x,b,M),this.elevationBufferData.update(o,l,f,m,x,b,M)}addFeatures(o,l,f,m,x,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,l,f,m,b,o.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(o){this.bufferData.upload(o),this.elevationBufferData.upload(o),this.elevatedStructures&&this.elevatedStructures.upload(o)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(o,l,f,m,x,b=[],M,P){const L=_x(l,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(o,L,m,f,P):this.addGeometry(L,this.bufferData),this.bufferData.populatePaintArrays(o,f,x,b,m,M),this.elevationBufferData.populatePaintArrays(o,f,x,b,m,M)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(o){this.elevatedStructures&&this.elevatedStructures.construct(o)}addElevatedRoadFeature(o,l,f,m,x){const b=new Array,M=tc.getElevationFeature(o,x);if(M){{const P=this.clipPolygonsToTile(l,1);P.length>0&&b.push({polygons:P,elevationFeature:M,elevationTileID:f})}for(const P of b)if(P.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new nc(P.elevationTileID));const N=P.elevationFeature.isTunnel();let U=0;o.properties.hasOwnProperty(VE)&&(U=+o.properties[VE]);for(const G of P.polygons)this.elevatedStructures.addPortalCandidates(P.elevationFeature.id,G,N,P.elevationFeature,U)}P.elevationFeature.constantHeight==null&&(P.polygons=this.prepareElevatedPolygons(P.polygons,P.elevationFeature,P.elevationTileID));const L=new Z1(f,P.elevationTileID);this.addElevatedGeometry(P.polygons,L,P.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,m)}}else this.addGeometry(l,this.bufferData)}addElevatedGeometry(o,l,f,m,x){const b={elevation:f,elevationSampler:l,bias:m,index:x},[M,P]=this.addGeometry(o,this.elevationBufferData,b);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:M,max:P}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,M),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,P))}addGeometry(o,l,f){let m=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,b=null;f&&(b=f.elevationSampler.constantElevation(f.elevation,f.bias),b!=null&&(m=b,x=b));const M=(P,L,N)=>{if(f!=null)if(L.push(P),b!=null)l.elevatedLayoutVertexArray.emplaceBack(b),N.push(b);else{const U=f.elevationSampler.pointElevation(P,f.elevation,f.bias);l.elevatedLayoutVertexArray.emplaceBack(U),N.push(U),m=Math.min(m,U),x=Math.max(x,U)}};for(const P of o){let L=0;for(const Me of P)L+=Me.length;const N=l.triangleSegments.prepareSegment(L,l.layoutVertexArray,l.indexArray),U=N.vertexLength,G=[],te=[],ne=[],ce=[],me=[],ve=l.layoutVertexArray.length;for(const Me of P){if(Me.length===0)continue;Me!==P[0]&&te.push(G.length/2);const ue=l.lineSegments.prepareSegment(Me.length,l.layoutVertexArray,l.lineIndexArray),we=ue.vertexLength;f&&me.push(l.layoutVertexArray.length-ve),M(Me[0],ne,ce),l.layoutVertexArray.emplaceBack(Me[0].x,Me[0].y),l.lineIndexArray.emplaceBack(we+Me.length-1,we),G.push(Me[0].x),G.push(Me[0].y);for(let Pe=1;Pe<Me.length;Pe++)M(Me[Pe],ne,ce),l.layoutVertexArray.emplaceBack(Me[Pe].x,Me[Pe].y),l.lineIndexArray.emplaceBack(we+Pe-1,we+Pe),G.push(Me[Pe].x),G.push(Me[Pe].y);ue.vertexLength+=Me.length,ue.primitiveLength+=Me.length}const Ie=f_(G,te);for(let Me=0;Me<Ie.length;Me+=3)l.indexArray.emplaceBack(U+Ie[Me],U+Ie[Me+1],U+Ie[Me+2]);if(Ie.length>0&&f&&this.elevationMode==="hd-road-base"){const Me=f.elevation.isTunnel(),ue=f.elevation.safeArea,we=this.elevatedStructures.addVertices(ne,ce);this.elevatedStructures.addTriangles(Ie,we,Me);const Pe=me.length;if(Pe>0){for(let Be=0;Be<Pe-1;Be++)this.elevatedStructures.addRenderableRing(f.index,me[Be]+we,me[Be+1]-me[Be],Me,ue);this.elevatedStructures.addRenderableRing(f.index,me[Pe-1]+we,ne.length-me[Pe-1],Me,ue)}}N.vertexLength+=L,N.primitiveLength+=Ie.length/3}return[m,x]}prepareElevatedPolygons(o,l,f){const m=1/dt(f),x=[];for(const b of o){const M=mP(b,new X1(l,m));x.push(...M)}return x}clipPolygonsToTile(o,l){const f=-l,m=-l,x=vn+l,b=vn+l;let M=0;const P=[],L=[];for(;M<o.length;M++){const G=o[M],te=Gg(G);(te.min.x>=f&&te.max.x<=x&&te.min.y>=m&&te.max.y<=b?P:L).push(G)}if(P.length===o.length)return o;const N=[new dn(f,m),new dn(x,m),new dn(x,b),new dn(f,b),new dn(f,m)],U=P;for(const G of L)U.push(...pP(G,N));return U}}let dg,by,ew,HE;In(Ax,"FillBucket",{omit:["layers","patternFeatures"]}),In(J1,"FillBufferData"),In(nc,"ElevatedStructures");class vp{constructor(o,l,f,m){if(this.triangleCount=l.length/3,this.min=new dn(0,0),this.max=new dn(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0)return;const[x,b]=[o[0].clone(),o[0].clone()];for(let U=1;U<o.length;++U){const G=o[U];x.x=Math.min(x.x,G.x),x.y=Math.min(x.y,G.y),b.x=Math.max(b.x,G.x),b.y=Math.max(b.y,G.y)}if(m){const U=Math.ceil(Math.max(b.x-x.x,b.y-x.y)/m);f=Math.max(f,U)}if(f===0)return;this.min=x,this.max=b;const M=this.max.sub(this.min);M.x=Math.max(M.x,1),M.y=Math.max(M.y,1);const P=Math.max(M.x,M.y)/f;this.cellsX=Math.max(1,Math.ceil(M.x/P)),this.cellsY=Math.max(1,Math.ceil(M.y/P)),this.xScale=1/P,this.yScale=1/P;const L=[];for(let U=0;U<this.triangleCount;U++){const G=o[l[3*U+0]].sub(this.min),te=o[l[3*U+1]].sub(this.min),ne=o[l[3*U+2]].sub(this.min),ce=rc(Math.floor(Math.min(G.x,te.x,ne.x)),this.xScale,this.cellsX),me=rc(Math.floor(Math.max(G.x,te.x,ne.x)),this.xScale,this.cellsX),ve=rc(Math.floor(Math.min(G.y,te.y,ne.y)),this.yScale,this.cellsY),Ie=rc(Math.floor(Math.max(G.y,te.y,ne.y)),this.yScale,this.cellsY),Me=new dn(0,0),ue=new dn(0,0),we=new dn(0,0),Pe=new dn(0,0);for(let Be=ve;Be<=Ie;++Be){Me.y=ue.y=Be*P,we.y=Pe.y=(Be+1)*P;for(let Qe=ce;Qe<=me;++Qe)Me.x=we.x=Qe*P,ue.x=Pe.x=(Qe+1)*P,(Yi(G,te,ne,Me,ue,Pe)||Yi(G,te,ne,Me,Pe,we))&&L.push({cellIdx:Be*this.cellsX+Qe,triIdx:U})}}if(L.length===0)return;L.sort((U,G)=>U.cellIdx-G.cellIdx||U.triIdx-G.triIdx);let N=0;for(;N<L.length;){const U=L[N].cellIdx,G={start:this.payload.length,len:0};for(;N<L.length&&L[N].cellIdx===U;)++G.len,this.payload.push(L[N++].triIdx);this.cells[U]=G}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(o,l){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>o.x||o.y>this.max.y||this.min.y>o.y)return;const f=rc(o.x-this.min.x,this.xScale,this.cellsX),m=rc(o.y-this.min.y,this.yScale,this.cellsY),x=this.cells[m*this.cellsX+f];if(x){this._lazyInitLookup();for(let b=0;b<x.len;b++){const M=this.payload[x.start+b],P=Math.floor(M/8),L=1<<M%8;if(!(this.lookup[P]&L)&&(this.lookup[P]|=L,l.push(M),l.length===this.triangleCount))return}}}query(o,l,f){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>l.x||o.y>this.max.y||this.min.y>l.y)return;this._lazyInitLookup();const m=rc(o.x-this.min.x,this.xScale,this.cellsX),x=rc(l.x-this.min.x,this.xScale,this.cellsX),b=rc(o.y-this.min.y,this.yScale,this.cellsY),M=rc(l.y-this.min.y,this.yScale,this.cellsY);for(let P=b;P<=M;P++)for(let L=m;L<=x;L++){const N=this.cells[P*this.cellsX+L];if(N)for(let U=0;U<N.len;U++){const G=this.payload[N.start+U],te=Math.floor(G/8),ne=1<<G%8;if(!(this.lookup[te]&ne)&&(this.lookup[te]|=ne,f.push(G),f.length===this.triangleCount))return}}}}function rc(u,o,l){return Math.max(0,Math.min(l-1,Math.floor(u*o)))}In(vp,"TriangleGridIndex");class tw{constructor(o){this.zoom=o.zoom,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.footprints=[]}updateFootprints(o,l){for(const f of this.footprints)l.push({footprint:f,id:o})}populate(o,l,f,m){const x=[];for(const{feature:b,id:M,index:P,sourceLayerIndex:L}of o){const N=this.layers[0]._featureFilter.needGeometry,U=$n(b,N);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),U,f))continue;const G={id:M,properties:b.properties,type:b.type,sourceLayerIndex:L,index:P,geometry:N?U.geometry:Fn(b,f,m),patterns:{}};x.push(G)}for(const b of x){const{geometry:M,index:P,sourceLayerIndex:L}=b;this.addFeature(b,M,P,f,{},l.availableImages,l.brightness),l.featureIndex.insert(o[P].feature,M,P,L,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(o){}update(o,l,f,m,x,b,M){}destroy(){}addFeature(o,l,f,m,x,b=[],M){for(const P of _x(l,2)){const L=[],N=[],U=[],G=new dn(1/0,1/0),te=new dn(-1/0,-1/0);for(const me of P)if(me.length!==0){me!==P[0]&&U.push(N.length/2);for(let ve=0;ve<me.length;ve++)N.push(me[ve].x),N.push(me[ve].y),L.push(me[ve]),G.x=Math.min(G.x,me[ve].x),G.y=Math.min(G.y,me[ve].y),te.x=Math.max(te.x,me[ve].x),te.y=Math.max(te.y,me[ve].y)}const ne=f_(N,U),ce=new vp(L,ne,8,256);this.footprints.push({vertices:L,indices:ne,grid:ce,min:G,max:te})}}}In(tw,"ClipBucket",{omit:["layers"]});const Mx=ui([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),nw=ui([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),rw=ui([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Rx=ui([{name:"a_join_normal_inside",components:3,type:"Int16"}]),GE=ui([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),WE=ui([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:gP}=Mx,b_=Number.MAX_SAFE_INTEGER;function wy(u,o,l,f){return u.order<o||u.order===b_||!(u.clipMask&l)||function(m,x){return x.length!==0&&x.find(b=>b===m)===void 0}(f,u.clipScope)}function Dx(u,o){return u.x-o.x||u.y-o.y}function YE(u,o){return Dx(u.min,o.min)===0&&Dx(u.max,o.max)===0}function iw(u,o){return!(u.min.x>o.max.x||u.max.x<o.min.x||u.min.y>o.max.y||u.max.y<o.min.y)}function Sy(u,o){if(u.length!==o.length)return!1;for(let l=0;l<u.length;l++)if(u[l].sourceId!==o[l].sourceId||!YE(u[l],o[l])||u[l].order!==o[l].order||u[l].clipMask!==o[l].clipMask||!Hs(u[l].clipScope,o[l].clipScope))return!1;return!0}function w_(u,o,l){const f=1/vn,m=1/(1<<l.canonical.z),x=(o.x*f+l.canonical.x)*m+l.wrap,b=(o.y*f+l.canonical.y)*m;return{min:new dn((u.x*f+l.canonical.x)*m+l.wrap,(u.y*f+l.canonical.y)*m),max:new dn(x,b)}}function ow(u,o,l){const f=1<<l.canonical.z,m=((o.x-l.wrap)*f-l.canonical.x)*vn,x=(o.y*f-l.canonical.y)*vn;return{min:new dn(((u.x-l.wrap)*f-l.canonical.x)*vn,(u.y*f-l.canonical.y)*vn),max:new dn(m,x)}}function XE(u,o,l,f,m,x,b){const M=u.indices,P=u.vertices,L=[];for(let N=f;N<f+m;N+=3){const U=o[l[N+0]+x],G=o[l[N+1]+x],te=o[l[N+2]+x],ne=Math.min(U.x,G.x,te.x),ce=Math.max(U.x,G.x,te.x),me=Math.min(U.y,G.y,te.y),ve=Math.max(U.y,G.y,te.y);L.length=0,u.grid.query(new dn(ne,me),new dn(ce,ve),L);for(let Ie=0;Ie<L.length;Ie++){const Me=L[Ie];if(Yi(P[M[3*Me+0]],P[M[3*Me+1]],P[M[3*Me+2]],U,G,te,b))return!0}}return!1}function Ty(u,o,l,f){if(!u||!l)return!1;let m=u.vertices;if(!o.canonical.equals(f.canonical)||o.wrap!==f.wrap){if(l.vertices.length<u.vertices.length)return Ty(l,f,u,o);const x=o.canonical,b=f.canonical,M=Math.pow(2,b.z-x.z);m=u.vertices.map(P=>new dn((P.x+x.x*vn)*M-b.x*vn,(P.y+x.y*vn)*M-b.y*vn))}return XE(l,m,u.indices,0,u.indices.length,0,0)}function ZE(u,o,l,f){const m=Math.pow(2,f.z-l.z);return new dn((u+l.x*vn)*m-f.x*vn,(o+l.y*vn)*m-f.y*vn)}function sw(u,o){const l=[];o.grid.queryPoint(u,l);const f=o.indices,m=o.vertices;for(let x=0;x<l.length;x++){const b=l[x];if(di([m[f[3*b+0]],m[f[3*b+1]],m[f[3*b+2]]],u))return!0}return!1}const Px=[new dn(0,0),new dn(vn,0),new dn(vn,vn),new dn(0,vn)];function aw(u,o){const l=[];let f=[];if(!o||u.length<2)return[u];if(u.length===2)return Wi(u[0],u[1],Px)?[u]:[];for(let m=0;m<u.length+2;m++){const x=u[m%u.length],b=u[(m+1)%u.length],M=Wi(m===0?u[u.length-1]:u[(m-1)%u.length],x,Px),P=Wi(x,b,Px),L=M||P;L&&f.push(x),L&&P||f.length>0&&(f.length>1&&l.push(f),f=[])}return f.length>1&&l.push(f),l}const Ix=$d.VectorTileFeature.types,lw=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],KE=["fill-extrusion-flood-light-ground-radius"],kx=Math.pow(2,13),yP=Math.pow(2,15)-1,QE=new dn(0,1),qd=2147483648;function hg(u,o,l,f,m,x,b,M){u.emplaceBack((o<<1)+b,(l<<1)+x,(Math.floor(f*kx)<<1)+m,Math.round(M))}function _p(u,o,l){u.emplaceBack(o.x*vn,o.y*vn,l?1:0)}function Ey(u,o,l,f,m,x){u.emplaceBack(o.x,o.y,(l.x<<1)+f,(l.y<<1)+m,x)}function Cy(u,o,l){u.emplaceBack(o.x,o.y,o.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Ox{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class hf{constructor(){this.centroidXY=new dn(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new dn(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new dn(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new dn(this.max.x-this.min.x,this.max.y-this.min.y)}}class ff{constructor(){this.acc=new dn(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,l){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=l.x,o.min.y=o.max.y=l.y)}appendEdge(o,l,f){this.accCount++,this.acc._add(l);let m=!!this.borders;l.x<o.min.x?(o.min.x=l.x,m=!0):l.x>o.max.x&&(o.max.x=l.x,m=!0),l.y<o.min.y?(o.min.y=l.y,m=!0):l.y>o.max.y&&(o.max.y=l.y,m=!0),((l.x===0||l.x===vn)&&l.x===f.x)!=((l.y===0||l.y===vn)&&l.y===f.y)&&this.processBorderOverlap(l,f),m&&this.checkBorderIntersection(l,f)}checkBorderIntersection(o,l){l.x<0!=o.x<0&&this.addBorderIntersection(0,ar(l.y,o.y,(0-l.x)/(o.x-l.x))),l.x>vn!=o.x>vn&&this.addBorderIntersection(1,ar(l.y,o.y,(vn-l.x)/(o.x-l.x))),l.y<0!=o.y<0&&this.addBorderIntersection(2,ar(l.x,o.x,(0-l.y)/(o.y-l.y))),l.y>vn!=o.y>vn&&this.addBorderIntersection(3,ar(l.x,o.x,(vn-l.y)/(o.y-l.y)))}addBorderIntersection(o,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];l<f[0]&&(f[0]=l),l>f[1]&&(f[1]=l)}processBorderOverlap(o,l){if(o.x===l.x){if(o.y===l.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,l.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,l.x),this.addBorderIntersection(f,o.x)}}centroid(){return this.accCount===0?new dn(0,0):new dn(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,l)=>o+ +(l[0]!==Number.MAX_VALUE),0):0}}function pf(u,o){const l=u.add(o)._unit(),f=We(u.x*l.x+u.y*l.y,-1,1);var m,x,b;return m=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(m)))/4*yP*((x=u).x*(b=o).y-x.y*b.x<0?-1:1)}const S_=[u=>u.x<0,u=>u.x>vn,u=>u.y<0,u=>u.y>vn];function T_(u,o,l,f){const m=[4];if(f===0)return m;l._mult(f);const x=u.sub(l),b=o.sub(l),M=[u,o,x,b];for(let P=0;P<4;P++)for(const L of M)if(S_[P](L)){m.push(P);break}return m}class mf{constructor(o){this.vertexArray=new dy,this.indexArray=new Do,this.programConfigurations=new Vd(o.layers,{zoom:o.zoom,lut:o.lut},l=>KE.includes(l)),this._segments=new ho,this.hiddenByLandmarkVertexArray=new sf,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new ho}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,l,f,m=!1){const x=o.length;if(x>2){let b=Math.max(0,this._segments.get().length-1);const M=this._segments._prepareSegment(4*x,this.vertexArray.length,2*this._segmentToGroundQuads[b].length);let P;b!==this._segments.get().length-1&&(b++,this._segmentToGroundQuads[b]=[],this._segmentToRegionTriCounts[b]=[0,0,0,0,0]);{const L=o[0],N=o[1];P=pf(L.sub(o[x-1])._perp()._unit(),N.sub(L)._perp()._unit())}for(let L=0;L<x;L++){const N=L===x-1?0:L+1,U=o[L],G=o[N],te=o[N===x-1?0:N+1],ne=G.sub(U)._perp()._unit(),ce=pf(ne,te.sub(G)._perp()._unit()),me=P,ve=ce;if(zx(U,G,l)||m&&C_(U,l)&&C_(G,l)){P=ce;continue}const Ie=M.vertexLength;Ey(this.vertexArray,U,G,1,1,me),Ey(this.vertexArray,U,G,1,0,me),Ey(this.vertexArray,U,G,0,1,ve),Ey(this.vertexArray,U,G,0,0,ve),M.vertexLength+=4;const Me=T_(U,G,ne,f);for(const ue of Me)this._segmentToGroundQuads[b].push({id:Ie,region:ue}),this._segmentToRegionTriCounts[b][ue]+=2,M.primitiveLength+=2;P=ce}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),l=o.length;for(let f=0;f<l;f++)this._segmentToGroundQuads[f].sort((m,x)=>m.region-x.region);for(let f=0;f<l;f++){const m=this._segmentToGroundQuads[f],x=o[f],b=this._segmentToRegionTriCounts[f];b.reduce((P,L)=>P+L,0);let M=0;for(let P=0;P<=4;P++){const L=b[P];if(L!==0){let N=this.regionSegments[P];N||(N=this.regionSegments[P]=new ho);const U={vertexOffset:x.vertexOffset,primitiveOffset:x.primitiveOffset+M,vertexLength:x.vertexLength,primitiveLength:L};N.get().push(U)}M+=L}for(let P=0;P<m.length;P++){const L=m[P].id;this.indexArray.emplaceBack(L,L+1,L+3),this.indexArray.emplaceBack(L,L+3,L+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,l,f,m,x,b){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,l,f,m,x,b)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,nw.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,l,f,m,x,b,M){this.hasData()&&this.programConfigurations.updatePaintArrays(o,l,f,m,x,b,M)}updateHiddenByLandmark(o){if(!this.hasData())return;const l=o.groundVertexCount+o.groundVertexArrayOffset;if(o.groundVertexCount===0)return;const f=o.flags&qd?1:0;for(let m=o.groundVertexArrayOffset;m<l;++m)this.hiddenByLandmarkVertexArray.emplace(m,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,GE.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const l=this.regionSegments[o];l&&l.destroy()}}}}class Lx{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.pixelRatio=o.pixelRatio,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Do,this.footprintVertices=new zc,this.footprintSegments=[],this.layoutVertexArray=new Od,this.centroidVertexArray=new r_,this.wallVertexArray=new o_,this.indexArray=new Do,this.programConfigurations=new Vd(o.layers,{zoom:o.zoom,lut:o.lut},l=>lw.includes(l)),this.segments=new ho,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.groundEffect=new mf(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(o,l){}populate(o,l,f,m){this.features=[],this.hasPattern=xy("fill-extrusion",this.layers,this.pixelRatio,l),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=dt(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:x,id:b,index:M,sourceLayerIndex:P}of o){const L=this.layers[0]._featureFilter.needGeometry,N=$n(x,L);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),N,f))continue;const U={id:b,sourceLayerIndex:P,index:M,geometry:L?N.geometry:Fn(x,f,m),properties:x.properties,type:x.type,patterns:{}},G=this.layoutVertexArray.length,te=Ix[U.type]==="Polygon";if(this.hasPattern)this.features.push(bx("fill-extrusion",this.layers,U,this.zoom,this.pixelRatio,l));else if(this.wallMode)for(const ne of U.geometry)for(const ce of aw(ne,te))this.addFeature(U,[ce],M,f,{},l.availableImages,m,l.brightness);else this.addFeature(U,U.geometry,M,f,{},l.availableImages,m,l.brightness);l.featureIndex.insert(x,U.geometry,M,P,this.index,G)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,l,f,m,x,b){for(const M of this.features){const P=Ix[M.type]==="Polygon",{geometry:L}=M;if(this.wallMode)for(const N of L)for(const U of aw(N,P))this.addFeature(M,[U],M.index,l,f,m,x,b);else this.addFeature(M,L,M.index,l,f,m,x,b)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,l,f,m,x,b,M){this.programConfigurations.updatePaintArrays(o,l,x,f,m,b,M),this.groundEffect.update(o,l,x,f,m,b,M)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,gP),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.wallVertexBuffer=o.createVertexBuffer(this.wallVertexArray,Rx.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,WE.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,rw.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,f,m,x,b,M,P){const L=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(o,{})/this.tileToMeter,N=[new dn(0,0),new dn(vn,vn)],U=M.projection,G=U.name==="globe",te=this.wallMode||Ix[o.type]==="Polygon",ne=new ff;ne.centroidDataIndex=this.centroidData.length;const ce=new hf,me=this.layers[0].paint.get("fill-extrusion-base").evaluate(o,{},m)<=0,ve=this.layers[0].paint.get("fill-extrusion-height").evaluate(o,{},m);let Ie;if(ce.height=ve,ce.vertexArrayOffset=this.layoutVertexArray.length,ce.groundVertexArrayOffset=this.groundEffect.vertexArray.length,G&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Fc),this.wallMode){if(G)return void Ir("Non zero fill-extrusion-line-width is not yet supported on globe.");if(l.length!==1)return;Ie=function(ot){const ct=ot[0].x===ot[ot.length-1].x&&ot[0].y===ot[ot.length-1].y;(function(Sn){let rn=0;const Mr=Sn.length;for(let Hn=0;Hn<Mr;Hn++)rn+=(Sn[(Hn+1)%Mr].x-Sn[Hn].x)*(Sn[(Hn+1)%Mr].y+Sn[Hn].y);return rn>=0})(ot)||(ot=ot.reverse());const Yt={geometry:[],joinNormals:[],indices:[]},Vt=[],qt=[],nn=[];let Et=ot.length;for(;Et>=2&&ot[Et-1].equals(ot[Et-2]);)Et--;if(Et<(ct?3:2))return Yt;let Ut,bt,Ct,on,un,Qn=0;for(;Qn<Et-1&&ot[Qn].equals(ot[Qn+1]);)Qn++;ct&&(Ut=ot[Et-2],un=ot[Qn].sub(Ut)._unit()._perp());for(let Sn=Qn;Sn<Et;Sn++){if(Ct=Sn===Et-1?ct?ot[Qn+1]:void 0:ot[Sn+1],Ct&&ot[Sn].equals(Ct))continue;un&&(on=un),Ut&&(bt=Ut),Ut=ot[Sn],un=Ct?Ct.sub(Ut)._unit()._perp():on,on=on||un;let rn=on.add(un);rn.x===0&&rn.y===0||rn._unit();const Mr=rn.x*un.x+rn.y*un.y,Hn=Mr!==0?1/Mr:1/0,Gn=on.x*un.y-on.y*un.x>0;let br="miter";const zr=2;br==="miter"&&Hn>zr&&(br="bevel"),br==="bevel"&&(Hn>100&&(br="flipbevel"),Hn<zr&&(br="miter"));const Br=(Gr,$r,jr,qi)=>{const eo=new dn(Gr.x,Gr.y),ze=new dn(Gr.x,Gr.y);eo.x+=$r.x*qi,eo.y+=$r.y*qi,ze.x-=$r.x*Math.max(jr,1),ze.y-=$r.y*Math.max(jr,1),nn.push($r),Vt.push(eo),qt.push(ze)};if(br==="miter")rn._mult(Hn),Br(Ut,rn,0,0);else if(br==="flipbevel")rn=un.mult(-1),Br(Ut,rn,0,0),Br(Ut,rn.mult(-1),0,0);else{const Gr=-Math.sqrt(Hn*Hn-1),$r=Gn?Gr:0,jr=Gn?0:Gr;bt&&Br(Ut,on,$r,jr),Ct&&Br(Ut,un,$r,jr)}}Yt.geometry=[...Vt,...qt.reverse(),Vt[0]],Yt.joinNormals=[...nn,...nn.reverse(),nn[nn.length-1]];const Nn=Yt.geometry.length-1;for(let Sn=0;Sn<Nn/2;Sn++)if(Sn+1<Nn/2){let rn=Sn,Mr=Sn+1,Hn=Nn-1-Sn,Gn=Nn-2-Sn;rn=rn===0?Nn-1:rn-1,Mr=Mr===0?Nn-1:Mr-1,Hn=Hn===0?Nn-1:Hn-1,Gn=Gn===0?Nn-1:Gn-1,Yt.indices.push(Hn),Yt.indices.push(Mr),Yt.indices.push(rn),Yt.indices.push(Hn),Yt.indices.push(Gn),Yt.indices.push(Mr)}return Yt}(l[0]),l=[Ie.geometry]}const Me=(ot,ct)=>ot<(ct.length-1)/2||ot===ct.length-1,ue=this.wallMode?[l]:_x(l,500);for(let ot=ue.length-1;ot>=0;ot--){const ct=ue[ot];(ct.length===0||(we=ct[0]).every(At=>At.x<=0)||we.every(At=>At.x>=vn)||we.every(At=>At.y<=0)||we.every(At=>At.y>=vn))&&ue.splice(ot,1)}var we;let Pe;if(G)Pe=M_(ue,N,m);else{Pe=[];for(const ot of ue)Pe.push({polygon:ot,bounds:N})}const Be=te?this.edgeRadius:0,Qe=Be>0&&this.zoom<17,rt=(ot,ct)=>{if(ot.length===0)return!1;const At=ot[ot.length-1];return ct.x===At.x&&ct.y===At.y};for(const{polygon:ot,bounds:ct}of Pe){let At=0,Yt=0;for(const Et of ot)te&&!Et[0].equals(Et[Et.length-1])&&Et.push(Et[0]),Yt+=te?Et.length-1:Et.length;const Vt=this.segments.prepareSegment((te?5:4)*Yt,this.layoutVertexArray,this.indexArray);ce.footprintSegIdx<0&&(ce.footprintSegIdx=this.footprintSegments.length),ce.polygonSegIdx<0&&(ce.polygonSegIdx=this.polygonSegments.length);const qt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},nn=new Ox;if(nn.vertexOffset=this.footprintVertices.length,nn.indexOffset=3*this.footprintIndices.length,nn.ringIndices=[],te){const Et=[],Ut=[];At=Vt.vertexLength;for(let Ct=0;Ct<ot.length;Ct++){const on=ot[Ct];on.length&&Ct!==0&&Ut.push(Et.length/2);const un=[];let Qn,Nn;Qn=on[1].sub(on[0])._perp()._unit(),nn.ringIndices.push(on.length-1);for(let Sn=1;Sn<on.length;Sn++){const rn=on[Sn],Mr=on[Sn===on.length-1?1:Sn+1],Hn=rn.clone();if(Be){Nn=Mr.sub(rn)._perp()._unit();const Gn=Qn.add(Nn)._unit(),br=Be*Math.min(4,1/(Qn.x*Gn.x+Qn.y*Gn.y));Hn.x+=br*Gn.x,Hn.y+=br*Gn.y,Hn.x=Math.round(Hn.x),Hn.y=Math.round(Hn.y),Qn=Nn}if(!me||Be!==0&&!Qe||rt(un,Hn)||un.push(Hn),hg(this.layoutVertexArray,Hn.x,Hn.y,0,0,1,1,0),this.wallMode){const Gn=Me(Sn,on);_p(this.wallVertexArray,Ie.joinNormals[Sn],!Gn)}Vt.vertexLength++,this.footprintVertices.emplaceBack(rn.x,rn.y),Et.push(rn.x,rn.y),G&&Cy(this.layoutVertexExtArray,U.projectTilePoint(Hn.x,Hn.y,m),U.upVector(m,Hn.x,Hn.y))}me&&(Be===0||Qe)&&(un.length!==0&&rt(un,un[0])&&un.pop(),this.groundEffect.addData(un,ct,L))}const bt=this.wallMode?Ie.indices:f_(Et,Ut);for(let Ct=0;Ct<bt.length;Ct+=3)this.footprintIndices.emplaceBack(nn.vertexOffset+bt[Ct+0],nn.vertexOffset+bt[Ct+1],nn.vertexOffset+bt[Ct+2]),this.indexArray.emplaceBack(At+bt[Ct],At+bt[Ct+2],At+bt[Ct+1]),Vt.primitiveLength++;nn.indexCount+=bt.length,nn.vertexCount+=this.footprintVertices.length-nn.vertexOffset}for(let Et=0;Et<ot.length;Et++){const Ut=ot[Et];ne.startRing(ce,Ut[0]);let bt=Ut.length>4&&uw(Ut[Ut.length-2],Ut[0],Ut[1]),Ct=Be?E_(Ut[Ut.length-2],Ut[0],Ut[1],Be):0;const on=[];let un,Qn,Nn;Qn=Ut[1].sub(Ut[0])._perp()._unit();let Sn=!0;for(let rn=1,Mr=0;rn<Ut.length;rn++){let Hn=Ut[rn-1],Gn=Ut[rn];const br=Ut[rn===Ut.length-1?1:rn+1];if(ne.appendEdge(ce,Gn,Hn),zx(Gn,Hn,ct)){Be&&(Qn=br.sub(Gn)._perp()._unit(),Sn=!Sn);continue}const zr=Gn.sub(Hn)._perp(),Br=zr.x/(Math.abs(zr.x)+Math.abs(zr.y)),Gr=zr.y>0?1:0,$r=Hn.dist(Gn);if(Mr+$r>32768&&(Mr=0),Be){Nn=br.sub(Gn)._perp()._unit();let ze=JE(Hn,Gn,br,cw(Qn,Nn),Be);isNaN(ze)&&(ze=0);const Ve=Gn.sub(Hn)._unit();Hn=Hn.add(Ve.mult(Ct))._round(),Gn=Gn.add(Ve.mult(-ze))._round(),Ct=ze,Qn=Nn,me&&this.zoom>=17&&(rt(on,Hn)||on.push(Hn),rt(on,Gn)||on.push(Gn))}const jr=Vt.vertexLength,qi=Ut.length>4&&uw(Hn,Gn,br);let eo=eC(Mr,bt,Sn);if(hg(this.layoutVertexArray,Hn.x,Hn.y,Br,Gr,0,0,eo),hg(this.layoutVertexArray,Hn.x,Hn.y,Br,Gr,0,1,eo),this.wallMode){const ze=Me(rn-1,Ut),Ve=Ie.joinNormals[rn-1];_p(this.wallVertexArray,Ve,ze),_p(this.wallVertexArray,Ve,ze)}if(Mr+=$r,eo=eC(Mr,qi,!Sn),bt=qi,hg(this.layoutVertexArray,Gn.x,Gn.y,Br,Gr,0,0,eo),hg(this.layoutVertexArray,Gn.x,Gn.y,Br,Gr,0,1,eo),this.wallMode){const ze=Me(rn,Ut),Ve=Ie.joinNormals[rn];_p(this.wallVertexArray,Ve,ze),_p(this.wallVertexArray,Ve,ze)}if(Vt.vertexLength+=4,this.indexArray.emplaceBack(jr+0,jr+1,jr+2),this.indexArray.emplaceBack(jr+1,jr+3,jr+2),Vt.primitiveLength+=2,Be){const ze=At+(rn===1?Ut.length-2:rn-2),Ve=rn===1?At:ze+1;if(this.indexArray.emplaceBack(jr+1,ze,jr+3),this.indexArray.emplaceBack(ze,Ve,jr+3),Vt.primitiveLength+=2,un===void 0&&(un=jr),!zx(br,Ut[rn],ct)){const Pt=rn===Ut.length-1?un:Vt.vertexLength;this.indexArray.emplaceBack(jr+2,jr+3,Pt),this.indexArray.emplaceBack(jr+3,Pt+1,Pt),this.indexArray.emplaceBack(jr+3,Ve,Pt+1),Vt.primitiveLength+=3}Sn=!Sn}if(G){const ze=this.layoutVertexExtArray,Ve=U.projectTilePoint(Hn.x,Hn.y,m),Pt=U.projectTilePoint(Gn.x,Gn.y,m),mn=U.upVector(m,Hn.x,Hn.y),Cn=U.upVector(m,Gn.x,Gn.y);Cy(ze,Ve,mn),Cy(ze,Ve,mn),Cy(ze,Pt,Cn),Cy(ze,Pt,Cn)}}te&&(At+=Ut.length-1),me&&Be&&this.zoom>=17&&(on.length!==0&&rt(on,on[0])&&on.pop(),this.groundEffect.addData(on,ct,L,Be>0))}this.footprintSegments.push(nn),qt.triangleCount=this.indexArray.length-qt.triangleArrayOffset,this.polygonSegments.push(qt),++ce.footprintSegLen,++ce.polygonSegLen}if(ce.vertexCount=this.layoutVertexArray.length-ce.vertexArrayOffset,ce.groundVertexCount=this.groundEffect.vertexArray.length-ce.groundVertexArrayOffset,ce.vertexCount!==0){if(ce.centroidXY=ne.borders?QE:this.encodeCentroid(ne,ce),this.centroidData.push(ce),ne.borders){this.featuresOnBorder.push(ne);const ot=this.featuresOnBorder.length-1;for(let ct=0;ct<ne.borders.length;ct++)ne.borders[ct][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[ct].push(ot)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,b,m,P),this.groundEffect.addPaintPropertiesData(o,f,x,b,m,P),this.maxHeight=Math.max(this.maxHeight,ve)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((l,f)=>this.featuresOnBorder[l].borders[o][0]-this.featuresOnBorder[f].borders[o][0])}splitToSubtiles(){const o=[];for(let M=0;M<this.centroidData.length;M++){const P=this.centroidData[M],L=+(P.min.y+P.max.y>vn),N=2*L+(+(P.min.x+P.max.x>vn)^L);for(let U=0;U<P.polygonSegLen;U++){const G=P.polygonSegIdx+U;o.push({centroidIdx:M,subtile:N,polygonSegmentIdx:G,triangleSegmentIdx:this.polygonSegments[G].triangleSegIdx})}}const l=new Do;o.sort((M,P)=>M.triangleSegmentIdx===P.triangleSegmentIdx?M.subtile-P.subtile:M.triangleSegmentIdx-P.triangleSegmentIdx);let f=0,m=0,x=0;for(const M of o){if(M.triangleSegmentIdx!==f)break;x++}const b=o.length;for(;m!==o.length;){f=o[m].triangleSegmentIdx;let M=0,P=m,L=m;for(let N=P;N<x&&o[N].subtile===M;N++)L++;for(;P!==x;){const N=o[P];M=N.subtile;const U=this.centroidData[N.centroidIdx].min.clone(),G=this.centroidData[N.centroidIdx].max.clone(),te={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:l.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let ne=P;ne<L;ne++){const ce=o[ne],me=this.polygonSegments[ce.polygonSegmentIdx],ve=this.centroidData[ce.centroidIdx].min,Ie=this.centroidData[ce.centroidIdx].max,Me=this.indexArray.uint16;for(let ue=me.triangleArrayOffset;ue<me.triangleArrayOffset+me.triangleCount;ue++)l.emplaceBack(Me[3*ue],Me[3*ue+1],Me[3*ue+2]);te.primitiveLength+=me.triangleCount,U.x=Math.min(U.x,ve.x),U.y=Math.min(U.y,ve.y),G.x=Math.max(G.x,Ie.x),G.y=Math.max(G.y,Ie.y)}te.primitiveLength>0&&this.triangleSubSegments.push({segment:te,min:U,max:G}),P=L;for(let ne=P;ne<x&&o[ne].subtile===o[P].subtile;ne++)L++}m=x;for(let N=m;N<b&&o[N].triangleSegmentIdx===o[m].triangleSegmentIdx;N++)x++}l._trim(),this.indexArray=l}getVisibleSegments(o,l,f){const m=new ho;if(this.wallMode){for(const ce of this.triangleSubSegments)m.segments.push(ce.segment);return m}let x=0,b=0;const M=1<<o.canonical.z;if(l){const ce=l.getMinMaxForTile(o);ce&&(x=ce.min,b=ce.max)}b+=this.maxHeight;const P=o.toUnwrapped();let L;const N=[P.canonical.x/M+P.wrap,P.canonical.y/M],U=[(P.canonical.x+1)/M+P.wrap,(P.canonical.y+1)/M],G=(ce,me,ve)=>[ce[0]*(1-ve[0])+me[0]*ve[0],ce[1]*(1-ve[1])+me[1]*ve[1]],te=[],ne=[];for(const ce of this.triangleSubSegments){te[0]=ce.min.x/vn,te[1]=ce.min.y/vn,ne[0]=ce.max.x/vn,ne[1]=ce.max.y/vn;const me=G(N,U,te),ve=G(N,U,ne);if(new Oi([me[0],me[1],x],[ve[0],ve[1],b]).intersectsPrecise(f)===0){L&&(m.segments.push(L),L=void 0);continue}const Ie=ce.segment;L&&L.vertexOffset!==Ie.vertexOffset&&(m.segments.push(L),L=void 0),L?(L.vertexLength+=Ie.vertexLength,L.primitiveLength+=Ie.primitiveLength):L={vertexOffset:Ie.vertexOffset,primitiveLength:Ie.primitiveLength,vertexLength:Ie.vertexLength,primitiveOffset:Ie.primitiveOffset,sortKey:void 0,vaos:{}}}return L&&m.segments.push(L),m}encodeCentroid(o,l){const f=o.centroid(),m=l.span(),x=Math.min(7,Math.round(m.x*this.tileToMeter/10)),b=Math.min(7,Math.round(m.y*this.tileToMeter/10));return new dn(We(f.x,1,vn-1)<<3|x,We(f.y,1,vn-1)<<3|b)}encodeBorderCentroid(o){if(!o.borders)return new dn(0,0);const l=o.borders,f=Number.MAX_VALUE;if(l[0][0]!==f||l[1][0]!==f){const m=l[0][0]!==f?0:1;return new dn(6|(l[0][0]!==f?0:65528),(l[m][0]+l[m][1])/2<<3|6)}{const m=l[2][0]!==f?2:3;return new dn((l[m][0]+l[m][1])/2<<3|6,6|(l[2][0]!==f?0:65528))}}showCentroid(o){const l=this.centroidData[o.centroidDataIndex];l.flags&=qd,l.centroidXY.x=0,l.centroidXY.y=0,this.writeCentroidToBuffer(l)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const l=o.vertexArrayOffset,f=o.vertexCount+o.vertexArrayOffset,m=o.flags&qd?QE:o.centroidXY,x=this.centroidVertexArray.geta_centroid_pos0(l);if(this.centroidVertexArray.geta_centroid_pos1(l)!==m.y||x!==m.x){for(let b=l;b<f;++b)this.centroidVertexArray.emplace(b,m.x,m.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,l,f){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const m=l.getReplacementRegionsForTile(o.toUnwrapped());if(Sy(this.activeReplacements,m))return;if(this.activeReplacements=m,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const b of this.centroidData)b.flags&=2147483647;const x=[];for(const b of this.activeReplacements){if(b.order<f)continue;const M=Math.max(1,Math.pow(2,b.footprintTileId.canonical.z-o.canonical.z));for(const P of this.centroidData)if(!(P.flags&qd||b.min.x>P.max.x||P.min.x>b.max.x||b.min.y>P.max.y||P.min.y>b.max.y))for(let L=0;L<P.footprintSegLen;L++){const N=this.footprintSegments[P.footprintSegIdx+L];if(x.length=0,tC(this.footprintVertices,N.vertexOffset,N.vertexCount,b.footprintTileId.canonical,o.canonical,x),XE(b.footprint,x,this.footprintIndices.uint16,N.indexOffset,N.indexCount,-N.vertexOffset,-M)){P.flags|=qd;break}}}for(const b of this.centroidData)this.writeCentroidToBuffer(b);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,l,f){let m=!1;for(let x=0;x<f.footprintSegLen;x++){const b=this.footprintSegments[f.footprintSegIdx+x];let M=0;for(const P of b.ringIndices){for(let L=M,N=P+M-1;L<P+M;N=L++){const U=this.footprintVertices.int16[2*(L+b.vertexOffset)+0],G=this.footprintVertices.int16[2*(L+b.vertexOffset)+1],te=this.footprintVertices.int16[2*(N+b.vertexOffset)+1];G>l!=te>l&&o<(this.footprintVertices.int16[2*(N+b.vertexOffset)+0]-U)*(l-G)/(te-G)+U&&(m=!m)}M=P}}return m}getHeightAtTileCoord(o,l){let f=Number.NEGATIVE_INFINITY,m=!0;const x=4*(o+vn)*vn+(l+vn);if(this.partLookup.hasOwnProperty(x)){const b=this.partLookup[x];return b?{height:b.height,hidden:!!(b.flags&qd)}:void 0}for(const b of this.centroidData)o>b.max.x||b.min.x>o||l>b.max.y||b.min.y>l||this.footprintContainsPoint(o,l,b)&&b&&b.height>f&&(f=b.height,this.partLookup[x]=b,m=!!(b.flags&qd));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:m};this.partLookup[x]=void 0}}function cw(u,o){const l=u.add(o)._unit();return u.x*l.x+u.y*l.y}function E_(u,o,l,f){const m=o.sub(u)._perp()._unit(),x=l.sub(o)._perp()._unit();return JE(u,o,l,cw(m,x),f)}function JE(u,o,l,f,m){const x=Math.sqrt(1-f*f);return Math.min(u.dist(o)/3,o.dist(l)/3,m*x/f)}function zx(u,o,l){return u.x<l[0].x&&o.x<l[0].x||u.x>l[1].x&&o.x>l[1].x||u.y<l[0].y&&o.y<l[0].y||u.y>l[1].y&&o.y>l[1].y}function C_(u,o){return u.x<o[0].x||u.x>o[1].x||u.y<o[0].y||u.y>o[1].y}function uw(u,o,l){if(u.x<0||u.x>=vn||o.x<0||o.x>=vn||l.x<0||l.x>=vn)return!1;const f=l.sub(o),m=f.perp(),x=u.sub(o);return(f.x*x.x+f.y*x.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(x.x*x.x+x.y*x.y))>-.866&&m.x*x.x+m.y*x.y<0}function eC(u,o,l){const f=o?2|u:-3&u;return l?1|f:-2&f}function A_(){const u=Math.PI/32,o=Math.tan(u),l=de;return l*Math.sqrt(1+2*o*o)-l}function M_(u,o,l){const f=1<<l.z,m=Ze(l.x/f),x=Ze((l.x+1)/f),b=et(l.y/f),M=et((l.y+1)/f);return function(P,L,N,U,G=0,te){const ne=[];if(!P.length||!N||!U)return ne;const ce=(Pe,Be)=>{for(const Qe of Pe)ne.push({polygon:Qe,bounds:Be})},me=Math.ceil(Math.log2(N)),ve=Math.ceil(Math.log2(U)),Ie=me-ve,Me=[];for(let Pe=0;Pe<Math.abs(Ie);Pe++)Me.push(Ie>0?0:1);for(let Pe=0;Pe<Math.min(me,ve);Pe++)Me.push(0),Me.push(1);let ue=P;if(ue=Cx(ue,L[0].y-G,L[1].y+G,1),ue=Cx(ue,L[0].x-G,L[1].x+G,0),!ue.length)return ne;const we=[];for(Me.length?we.push({polygons:ue,bounds:L,depth:0}):ce(ue,L);we.length;){const Pe=we.pop(),Be=Pe.depth,Qe=Me[Be],rt=Pe.bounds[0],ot=Pe.bounds[1],ct=Qe===0?rt.x:rt.y,At=Qe===0?ot.x:ot.y,Yt=te?te(Qe,ct,At):.5*(ct+At),Vt=Cx(Pe.polygons,ct-G,Yt+G,Qe),qt=Cx(Pe.polygons,Yt-G,At+G,Qe);if(Vt.length){const nn=[rt,new dn(Qe===0?Yt:ot.x,Qe===1?Yt:ot.y)];Me.length>Be+1?we.push({polygons:Vt,bounds:nn,depth:Be+1}):ce(Vt,nn)}if(qt.length){const nn=[new dn(Qe===0?Yt:rt.x,Qe===1?Yt:rt.y),ot];Me.length>Be+1?we.push({polygons:qt,bounds:nn,depth:Be+1}):ce(qt,nn)}}return ne}(u,o,Math.ceil((x-m)/11.25),Math.ceil((b-M)/11.25),1,(P,L,N)=>{if(P===0)return .5*(L+N);{const U=et((l.y+L/vn)/f);return(Ue(.5*(et((l.y+N/vn)/f)+U))*f-l.y)*vn}})}function tC(u,o,l,f,m,x){const b=Math.pow(2,f.z-m.z);for(let M=0;M<l;M++){let P=u.int16[2*(M+o)+0],L=u.int16[2*(M+o)+1];P=(P+m.x*vn)*b-f.x*vn,L=(L+m.y*vn)*b-f.y*vn,x.push(new dn(P,L))}}let Ay,Fx;In(Lx,"FillExtrusionBucket",{omit:["layers","features"]}),In(hf,"PartData"),In(Ox,"FootprintSegment"),In(ff,"BorderCentroidData"),In(mf,"GroundEffect");class Hd extends dn{constructor(o,l,f){super(o,l),this.z=f}}class dw extends Hd{constructor(o,l,f,m){super(o,l,f),this.w=m}}function nC(u,o,l,f){const m=l==="x"?"y":"x",x=(f-u[l])/(o[l]-u[l]);u[m]=Math.round(u[m]+(o[m]-u[m])*x),u[l]=f,u.hasOwnProperty("z")&&(u.z=ar(u.z,o.z,x)),u.hasOwnProperty("w")&&(u.w=ar(u.w,o.w,x))}function R_(u,o,l,f){const m=l,x=f;for(const b of["x","y"]){let M=u,P=o;M[b]>=P[b]&&(M=o,P=u),M[b]<m&&P[b]>m&&nC(M,P,b,m),M[b]<x&&P[b]>x&&nC(P,M,b,x)}}function p(u,o,l,f,m,x){const b=[];for(let M=0;M<u.length;M++){const P=u[M];let L;const N=b.length;let U=0;for(let G=0;G<P.length-1;G++){let te=P[G],ne=P[G+1],ce=0;const me=U;let ve,Ie;x&&(ce=Math.hypot(ne.x-te.x,ne.y-te.y),U+=ce,ve=te,Ie=ne),te.x<o&&ne.x<o||(te.x<o?te=new dn(o,te.y+(o-te.x)/(ne.x-te.x)*(ne.y-te.y))._round():ne.x<o&&(ne=new dn(o,te.y+(o-te.x)/(ne.x-te.x)*(ne.y-te.y))._round()),te.y<l&&ne.y<l||(te.y<l?te=new dn(te.x+(l-te.y)/(ne.y-te.y)*(ne.x-te.x),l)._round():ne.y<l&&(ne=new dn(te.x+(l-te.y)/(ne.y-te.y)*(ne.x-te.x),l)._round()),te.x>=f&&ne.x>=f||(te.x>=f?te=new dn(f,te.y+(f-te.x)/(ne.x-te.x)*(ne.y-te.y))._round():ne.x>=f&&(ne=new dn(f,te.y+(f-te.x)/(ne.x-te.x)*(ne.y-te.y))._round()),te.y>=m&&ne.y>=m||(te.y>=m?te=new dn(te.x+(m-te.y)/(ne.y-te.y)*(ne.x-te.x),m)._round():ne.y>=m&&(ne=new dn(te.x+(m-te.y)/(ne.y-te.y)*(ne.x-te.x),m)._round()),L&&te.equals(L[L.length-1])||(L=[te],b.push(L),x&&x.push({progress:{min:me+C(ve,Ie,te)*ce,max:1},parentIndex:M,prevPoint:ve,nextPoint:Ie})),L.push(ne),x&&(x[x.length-1].progress.max=me+C(ve,Ie,ne)*ce,x[x.length-1].nextPoint=Ie)))))}if(x&&U>0)for(let G=N;G<b.length;G++)x[G].progress.min/=U,x[G].progress.max/=U}return b}function _(u,o,l,f,m){if(u.length<2)return void f.push(u);const x=[];for(;o.valid();){const[L,N]=o.get();for(let U=0;U<u.length-1;U++){const G=u[U],te=u[U+1],ne=Si(G,te,L,N);if(ne){const[ce]=ne,me=new dn(ar(G.x,te.x,ce),ar(G.y,te.y,ce));x.push({t:U+ce,distance:0,point:me})}}o.next()}if(x.length===0)return void f.push(u);x.sort((L,N)=>L.t-N.t);let b=0,M=0,P=[];for(f.push(P);b!==u.length;){if(M===x.length){for(;b!==u.length;)P.length!==0&&P[P.length-1].equals(u[b])||P.push(u[b]),b++;break}x[M].t<=b?(P.length!==0&&P[P.length-1].equals(x[M].point)||P.push(x[M].point),Math.trunc(x[M].t),M++):(P.length!==0&&P[P.length-1].equals(u[b])||P.push(u[b]),b++)}}function C(u,o,l){return u.x!==o.x?(l.x-u.x)/(o.x-u.x):u.y!==o.y?(l.y-u.y)/(o.y-u.y):0}function z(u,o){return u.x*o.x+u.y*o.y}function X(u,o){if(u.length===1){let l=0;const f=o[l++];let m;for(;!m||f.equals(m);)if(m=o[l++],!m)return 1/0;for(;l<o.length;l++){const x=o[l],b=u[0],M=m.sub(f),P=x.sub(f),L=b.sub(f),N=z(M,M),U=z(M,P),G=z(P,P),te=z(L,M),ne=z(L,P),ce=N*G-U*U,me=(G*te-U*ne)/ce,ve=(N*ne-U*te)/ce,Ie=f.z*(1-me-ve)+m.z*me+x.z*ve;if(isFinite(Ie))return Ie}return 1/0}{let l=1/0;for(const f of o)l=Math.min(l,f.z);return l}}function oe(u,o,l,f,m,x,b,M){const P=b*m.getElevationAt(u,o,!0,!0),L=x[0]!==0,N=L?x[1]===0?b*(x[0]/7-450):b*function(U,G,te){const ne=Math.floor(G[0]/8),ce=Math.floor(G[1]/8),me=10*(G[0]-8*ne),ve=10*(G[1]-8*ce),Ie=U.getElevationAt(ne,ce,!0,!0),Me=U.getMeterToDEM(te),ue=Math.floor(.5*(me*Me-1)),we=Math.floor(.5*(ve*Me-1)),Pe=U.tileCoordToPixel(ne,ce),Be=2*ue+1,Qe=2*we+1,rt=function(qt,nn,Et,Ut,bt){return[qt.getElevationAtPixel(nn,Et,!0),qt.getElevationAtPixel(nn+bt,Et,!0),qt.getElevationAtPixel(nn,Et+bt,!0),qt.getElevationAtPixel(nn+Ut,Et+bt,!0)]}(U,Pe.x-ue,Pe.y-we,Be,Qe),ot=Math.abs(rt[0]-rt[1]),ct=Math.abs(rt[2]-rt[3]),At=Math.abs(rt[0]-rt[2])+Math.abs(rt[1]-rt[3]),Yt=Math.min(.25,.5*Me*(ot+ct)/Be),Vt=Math.min(.25,.5*Me*At/Qe);return Ie+Math.max(Yt*me,Vt*ve)}(m,x,M):P;return{base:P+(l===0?-1:l),top:L?Math.max(N+f,P+l+2):P+f}}const Ce=ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),Ge=ui([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:mt}=Ce,en=ui([{name:"a_packed",components:3,type:"Float32"}]),{members:Dn}=en,qn=ui([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:cn}=qn;class hn{constructor(o,l){this.width=o,this.height=l,this.nextRow=0,this.image=new lf({width:o,height:l}),this.positions={},this.uploaded=!1}getDash(o,l){const f=this.getKey(o,l);return this.positions[f]}trim(){const o=this.width,l=this.height=xn(this.nextRow);this.image.resize({width:o,height:l})}getKey(o,l){return o.join(",")+l}getDashRanges(o,l,f){const m=[];let x=o.length%2==1?-o[o.length-1]*f:0,b=o[0]*f,M=!0;m.push({left:x,right:b,isDash:M,zeroLength:o[0]===0});let P=o[0];for(let L=1;L<o.length;L++){M=!M;const N=o[L];x=P*f,P+=N,b=P*f,m.push({left:x,right:b,isDash:M,zeroLength:N===0})}return m}addRoundDash(o,l,f){const m=l/2;for(let x=-f;x<=f;x++){const b=this.width*(this.nextRow+f+x);let M=0,P=o[M];for(let L=0;L<this.width;L++){L/P.right>1&&(P=o[++M]);const N=Math.abs(L-P.left),U=Math.abs(L-P.right),G=Math.min(N,U);let te;const ne=x/f*(m+1);if(P.isDash){const ce=m-Math.abs(ne);te=Math.sqrt(G*G+ce*ce)}else te=m-Math.sqrt(G*G+ne*ne);this.image.data[b+L]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(o,l){for(let P=o.length-1;P>=0;--P){const L=o[P],N=o[P+1];L.zeroLength?o.splice(P,1):N&&N.isDash===L.isDash&&(N.left=L.left,o.splice(P,1))}const f=o[0],m=o[o.length-1];f.isDash===m.isDash&&(f.left=m.left-this.width,m.right=f.right+this.width);const x=this.width*this.nextRow;let b=0,M=o[b];for(let P=0;P<this.width;P++){P/M.right>1&&(M=o[++b]);const L=Math.abs(P-M.left),N=Math.abs(P-M.right),U=Math.min(L,N);this.image.data[x+P]=Math.max(0,Math.min(255,(M.isDash?U:-U)+l+128))}}addDash(o,l){const f=this.getKey(o,l);if(this.positions[f])return this.positions[f];const m=l==="round",x=m?7:0,b=2*x+1;if(this.nextRow+b>this.height)return Ir("LineAtlas out of space"),null;o.length===0&&o.push(1);let M=0;for(let N=0;N<o.length;N++)o[N]<0&&(Ir("Negative value is found in line dasharray, replacing values with 0"),o[N]=0),M+=o[N];if(M!==0){const N=this.width/M,U=this.getDashRanges(o,this.width,N);m?this.addRoundDash(U,N,x):this.addRegularDash(U,l==="square"?.5*N:0)}const P=this.nextRow+x;this.nextRow+=b;const L={tl:[P,x],br:[M,0]};return this.positions[f]=L,L}}In(hn,"LineAtlas");const Ei=$d.VectorTileFeature.types,gi=Math.cos(Math.PI/180*37.5),Ho=Math.cos(Math.PI/180*5);class jt{constructor(o){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=o.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=o.overscaling,this.pixelRatio=o.pixelRatio,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Zv,this.layoutVertexArray2=new Ga,this.patternVertexArray=new Ga,this.indexArray=new Do,this.programConfigurations=new Vd(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new ho,this.maxLineLength=0,this.zOffsetVertexArray=new Ga,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.tessellationStep=o.tessellationStep?o.tessellationStep:vn/64}updateFootprints(o,l){}populate(o,l,f,m){this.hasPattern=xy("line",this.layers,this.pixelRatio,l);const x=this.layers[0].layout.get("line-sort-key");this.tileToMeter=dt(f);const b=this.layers[0].layout.get("line-elevation-reference");if(b==="hd-road-markup")this.elevationType="road";else{const G=this.layers[0].layout.get("line-z-offset"),te=G.isConstant()&&!G.constantOr(0);this.elevationType=b!=="sea"&&b!=="ground"&&te?"none":"offset",this.elevationType==="offset"&&b==="none"&&Ir(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const M=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&M!==void 0;const P=[];for(const{feature:G,id:te,index:ne,sourceLayerIndex:ce}of o){const me=this.layers[0]._featureFilter.needGeometry,ve=$n(G,me);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),ve,f))continue;const Ie=x?x.evaluate(ve,{},f):void 0,Me={id:te,properties:G.properties,type:G.type,sourceLayerIndex:ce,index:ne,geometry:me?ve.geometry:Fn(G,f,m),patterns:{},sortKey:Ie};P.push(Me)}x&&P.sort((G,te)=>G.sortKey-te.sortKey);const{lineAtlas:L,featureIndex:N}=l,U=this.addConstantDashes(L);for(const G of P){const{geometry:te,index:ne,sourceLayerIndex:ce}=G;if(U&&this.addFeatureDashes(G,L),this.hasPattern){const me=bx("line",this.layers,G,this.zoom,this.pixelRatio,l);this.patternFeatures.push(me)}else this.addFeature(G,te,ne,f,L.positions,l.availableImages,l.brightness,l.elevationFeatures);N.insert(o[ne].feature,te,ne,ce,this.index)}}addConstantDashes(o){let l=!1;for(const f of this.layers){const m=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if(m.kind!=="constant"||x.kind!=="constant")l=!0;else{const b=x.value,M=m.value;if(!M)continue;o.addDash(M,b)}}return l}addFeatureDashes(o,l){const f=this.zoom;for(const m of this.layers){const x=m.paint.get("line-dasharray").value,b=m.layout.get("line-cap").value;if(x.kind==="constant"&&b.kind==="constant")continue;let M,P;if(x.kind==="constant"){if(M=x.value,!M)continue}else M=x.evaluate({zoom:f},o);P=b.kind==="constant"?b.value:b.evaluate({zoom:f},o),l.addDash(M,P),o.patterns[m.id]=[l.getKey(M,P)]}}update(o,l,f,m,x,b,M){this.programConfigurations.updatePaintArrays(o,l,x,f,m,b,M)}addFeatures(o,l,f,m,x,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,l,f,m,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,Dn)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=o.createVertexBuffer(this.patternVertexArray,cn)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,Ge.members,!0)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,mt),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,f,m,x,b,M,P){const L=this.layers[0].layout,N=L.get("line-join").evaluate(o,{}),U=L.get("line-cap").evaluate(o,{}),G=L.get("line-miter-limit"),te=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(o),this.lineFeature=o,this.zOffsetValue=L.get("line-z-offset").value;const ne=this.layers[0].paint.get("line-width").value;if(ne.kind!=="constant"&&ne.isLineProgressConstant===!1&&(this.variableWidthValue=ne),this.elevationType==="road"){const ce=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(o,l,m,P,N,U,G,te)){const[me,ve]=this.clipRuntimeLinesToTile(l,1);for(let Ie=0;Ie<me.length;Ie++){const Me=me[Ie],ue=ve[Ie],we={progress:{min:ue.progress.min,max:ue.progress.max},nextDir:this.computeSegNextDir(ue,Me),prevDir:this.computeSegPrevDir(ue,Me)};this.addLine(Me,o,m,N,U,G,te,we)}this.fillNonElevatedRoadSegment(ce)}}else for(const ce of l)this.addLine(ce,o,m,N,U,G,te);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,b,m,M)}computeSegNextDir(o,l){return o.nextPoint.sub(l.at(-2)).unit()}computeSegPrevDir(o,l){return l[1].sub(o.prevPoint).unit()}clipLinesToTile(o,l){return p(o,-l,-l,vn+l,vn+l)}clipRuntimeLinesToTile(o,l){const f=[];return[p(o,-l,-l,vn+l,vn+l,f),f]}addElevatedRoadFeature(o,l,f,m,x,b,M,P){const L=[],N=tc.getElevationFeature(o,m);if(N){const U=this.clipLinesToTile(l,1),G=this.prepareElevatedLines(U,N,f);for(const te of G)L.push({geometry:te,elevation:N,elevationTileID:f,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(L.length===0)return!1;for(const U of L){const G=this.layoutVertexArray.length;this.addLine(U.geometry,o,f,x,b,M,P);const te=new Z1(f,U.elevationTileID);if(U.elevation)for(let ne=G;ne<this.layoutVertexArray.length;ne++){const ce=new dn(this.layoutVertexArray.int16[6*ne]>>1,this.layoutVertexArray.int16[6*ne+1]>>1),me=te.pointElevation(ce,U.elevation,.05);this.updateHeightRange(me),this.zOffsetVertexArray.emplaceBack(me,0,0)}else this.fillNonElevatedRoadSegment(G)}return!0}prepareElevatedLines(o,l,f){if(l.constantHeight!=null)return o;const m=[],x=1/dt(f);for(const b of o)_(b,new X1(l,x),0,m);return m}fillNonElevatedRoadSegment(o){for(let l=o;l<this.layoutVertexArray.length;l++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(o){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,o),this.heightRange.max=Math.max(this.heightRange.max,o)):this.heightRange={min:o,max:o}}addLine(o,l,f,m,x,b,M,P){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const L=m==="none";this.patternJoinNone=this.hasPattern&&L,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const N=P&&P.progress.min>0,U=P&&P.progress.max<1;if(this.lineClips){let Qe={min:this.lineClips.start,max:this.lineClips.end},rt=1;if(P){const At=this.lineClips.end-this.lineClips.start;Qe=function(Yt,Vt,qt){return{min:Pi(Yt.min,Vt,qt),max:Pi(Yt.max,Vt,qt)}}(P.progress,{min:0,max:1},Qe),At>0&&(rt=(Qe.max-Qe.min)/At)}const ot=+l.properties.mapbox_clip_feature_len,ct=+l.properties.mapbox_clip_seg_len;if(Number.isNaN(ot)||Number.isNaN(ct)){for(let Yt=0;Yt<o.length-1;Yt++)this.totalDistance+=o[Yt].dist(o[Yt+1]);const At=this.totalDistance/(Qe.max-Qe.min);this.totalFeatureLength=Number.isFinite(At)?At:0,this.lineClips.start=Qe.min,this.lineClips.end=Qe.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=ot,this.distance=ct*rt,this.lineClips.start=Qe.min,this.lineClips.end=Qe.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const G=Ei[l.type]==="Polygon";let te=o.length;for(;te>=2&&o[te-1].equals(o[te-2]);)te--;let ne=0;for(;ne<te-1&&o[ne].equals(o[ne+1]);)ne++;if(te<(G?3:2))return;m==="bevel"&&(b=1.05);const ce=this.segments.prepareSegment(10*te,this.layoutVertexArray,this.indexArray);let me,ve,Ie,Me,ue,we,Pe,Be;P&&P.prevDir&&(we=P.prevDir.perp()),P&&P.nextDir&&(Pe=P.nextDir.perp()),this.e1=this.e2=-1,G&&(me=o[te-2],ue=o[ne].sub(me)._unit()._perp());for(let Qe=ne;Qe<te;Qe++){if(Ie=Qe===te-1?G?o[ne+1]:void 0:o[Qe+1],Ie&&o[Qe].equals(Ie))continue;ue&&(Me=ue),me&&(ve=me),me=o[Qe],Be=this.evaluateLineProgressFeatures(ve?ve.dist(me):0),ue=Ie?Ie.sub(me)._unit()._perp():Me,Me=Me||ue;const rt=ve&&Ie;let ot=rt?m:G||L?"butt":x;const ct=Me.x*ue.x+Me.y*ue.y;if(L){const bt=function(Ct){if(Ct.patternJoinNone){const on=Ct.segmentPoints.length/2,un=Ct.lineSoFar-Ct.segmentStart;for(let Qn=0;Qn<on;++Qn){const Nn=Ct.segmentPoints[2*Qn+1],Sn=Math.round(Ct.segmentPoints[2*Qn])+.5+.25*Nn;Ct.patternVertexArray.emplaceBack(Sn,un,Ct.segmentStart),Ct.patternVertexArray.emplaceBack(Sn,un,Ct.segmentStart)}Ct.segmentPoints.length=0}Ct.e1=Ct.e2=-1};if(rt&&ct<Ho){this.updateDistance(ve,me),this.addCurrentVertex(me,Me,1,1,ce,Be),bt(this),this.addCurrentVertex(me,ue,-1,-1,ce,Be);continue}if(ve){if(!Ie){this.updateDistance(ve,me),this.addCurrentVertex(me,Me,1,1,ce,Be),bt(this);continue}ot="miter"}}let At=Me.add(ue);At.x===0&&At.y===0||At._unit();const Yt=At.x*ue.x+At.y*ue.y,Vt=Yt!==0?1/Yt:1/0,qt=2*Math.sqrt(2-2*Yt),nn=Yt<gi&&ve&&Ie,Et=Me.x*ue.y-Me.y*ue.x>0,Ut=this.overscaling<=16?15*vn/(512*this.overscaling):0;if(rt&&ot==="round"){if(Vt<M)ot="miter";else if(Vt<=2){const bt=Mt(me,-10,vn+10);ot=this.elevationType==="offset"&&(bt||this.hasCrossSlope)?"miter":"fakeround"}}if(ot==="miter"&&Vt>b&&(ot="bevel"),ot==="bevel"&&(Vt>2&&(ot="flipbevel"),Vt<b&&(ot="miter")),ve&&!(ot==="miter"&&nn)&&this.updateDistance(ve,me),ot==="miter")if(nn){const bt=me.dist(ve);if(bt>2*Ut){const on=me.sub(me.sub(ve)._mult(Ut/bt)._round());this.updateDistance(ve,on),this.addCurrentVertex(on,Me,0,0,ce,Be),ve=on}this.updateDistance(ve,me),At._mult(Vt),this.addCurrentVertex(me,At,0,0,ce,Be);const Ct=me.dist(Ie);if(Ct>2*Ut){const on=me.add(Ie.sub(me)._mult(Ut/Ct)._round());this.updateDistance(me,on),this.addCurrentVertex(on,ue,0,0,ce,Be),me=on}}else At._mult(Vt),this.addCurrentVertex(me,At,0,0,ce,Be);else if(ot==="flipbevel"){if(Vt>100)At=ue.mult(-1);else{const bt=Vt*Me.add(ue).mag()/Me.sub(ue).mag();At._perp()._mult(bt*(Et?-1:1))}this.addCurrentVertex(me,At,0,0,ce,Be),this.addCurrentVertex(me,At.mult(-1),0,0,ce,Be)}else if(ot==="bevel"||ot==="fakeround"){Be!=null&&ve&&this.addCurrentVertex(me,Pe||Me,-1,-1,ce,Be);const bt=me.dist(ve)<=2*Ut&&ot!=="bevel",Ct=At.mult(Et?1:-1);Ct._mult(Vt);const on=ue.mult(Et?-1:1),un=Me.mult(Et?-1:1),Qn=this.evaluateLineProgressFeatures(this.distance);if(Be==null&&(this.addHalfVertex(me,Ct.x,Ct.y,!1,!Et,0,ce,Qn),bt||this.addHalfVertex(me,Ct.x+2*un.x,Ct.y+2*un.y,!1,Et,0,ce,Qn)),ot==="fakeround"){const Nn=Math.round(180*qt/Math.PI/20);this.addHalfVertex(me,un.x,un.y,!1,Et,0,ce,Qn);for(let Sn=0;Sn<Nn;Sn++){let rn=Sn/Nn;if(rn!==.5){const Hn=rn-.5;rn+=rn*Hn*(rn-1)*((1.0904+ct*(ct*(3.55645-1.43519*ct)-3.2452))*Hn*Hn+(.848013+ct*(.215638*ct-1.06021)))}const Mr=on.sub(un)._mult(rn)._add(un)._unit();this.addHalfVertex(me,Mr.x,Mr.y,!1,Et,0,ce,Qn)}this.addHalfVertex(me,on.x,on.y,!1,Et,0,ce,Qn)}bt||Be!=null||this.addHalfVertex(me,Ct.x+2*on.x,Ct.y+2*on.y,!1,Et,0,ce,Qn),Be!=null&&Ie&&this.addCurrentVertex(me,we||ue,1,1,ce,Be)}else if(ot==="butt")this.addCurrentVertex(me,At,0,0,ce,Be);else if(ot==="square"){if(!ve){const bt=N?0:-1;this.addCurrentVertex(me,At,bt,bt,ce,Be)}if(this.addCurrentVertex(me,At,0,0,ce,Be),ve){const bt=U?0:1;this.addCurrentVertex(me,At,bt,bt,ce,Be)}}else if(ot==="round"){if(ve){const bt=!rt&&Pe?Pe:Me;this.addCurrentVertex(me,bt,0,0,ce,Be),!rt&&U||this.addCurrentVertex(me,bt,1,1,ce,Be,!0)}if(Ie){const bt=!rt&&we?we:ue;!rt&&N||this.addCurrentVertex(me,bt,-1,-1,ce,Be,!0),this.addCurrentVertex(me,bt,0,0,ce,Be)}}}}addVerticesTo(o,l,f,m,x,b,M,P,L,N){const U=(l.w-o.w)/this.tessellationStep|0;let G=0;const te=this.scaledDistance;if(U>1){this.lineSoFar=o.w;const ce=(l.x-o.x)/U,me=(l.y-o.y)/U,ve=(l.z-o.z)/U,Ie=(l.w-o.w)/U;for(let Me=1;Me<U;++Me){o.x+=ce,o.y+=me,o.z+=ve,this.lineSoFar+=Ie,G+=Ie;const ue=this.evaluateLineProgressFeatures(this.prevDistance+G);this.scaledDistance=(this.prevDistance+G)/this.totalDistance,this.addHalfVertex(o,f,m,N,!1,M,L,ue),this.addHalfVertex(o,x,b,N,!0,-P,L,ue)}}this.lineSoFar=l.w,this.scaledDistance=te;const ne=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(l,f,m,N,!1,M,L,ne),this.addHalfVertex(l,x,b,N,!0,-P,L,ne)}evaluateLineProgressFeatures(o){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+o)/this.totalFeatureLength):Ir(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let l=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(l=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:l}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:l}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:l}}addCurrentVertex(o,l,f,m,x,b,M=!1){const P=l.x+l.y*f,L=l.y-l.x*f,N=l.y*m-l.x,U=-l.y-l.x*m;if(b!=null){const G=this.elevationType==="offset",te=-10,ne=vn+10,ce=b.zOffset,me=new dw(o.x,o.y,ce,this.lineSoFar),ve=!!G&&Mt(o,te,ne),Ie=this.lineSoFar,Me=this.distance;if(this.currentVertex)if(ve){const ue=this.currentVertexIsOutside,we=this.currentVertex,Pe=new dw(o.x,o.y,ce,this.lineSoFar);if(R_(we,Pe,te,ne),!Mt(Pe,te,ne)){if(ue){this.e1=this.e2=-1,this.distance-=we.dist(me),this.lineSoFar=we.w;const Be=this.evaluateLineProgressFeatures(we.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(we,P,L,M,!1,f,x,Be),this.addHalfVertex(we,N,U,M,!0,-m,x,Be),this.prevDistance=this.distance}this.distance=this.prevDistance+we.dist(Pe),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(we,Pe,P,L,N,U,f,m,x,M),this.distance=Me,this.scaledDistance=this.distance/this.totalDistance}}else{const ue=this.currentVertex;if(this.currentVertexIsOutside){R_(ue,me,te,ne),this.e1=this.e2=-1,this.distance-=ue.dist(me),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ue.w;const we=this.evaluateLineProgressFeatures(ue.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ue,P,L,M,!1,f,x,we),this.addHalfVertex(ue,N,U,M,!0,-m,x,we),this.prevDistance=this.distance,this.distance=Me,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ue,me,P,L,N,U,f,m,x,M)}else ve||(this.addHalfVertex(o,P,L,M,!1,f,x,b),this.addHalfVertex(o,N,U,M,!0,-m,x,b));this.currentVertex=me,this.currentVertexIsOutside=ve,this.lineSoFar=Ie}else this.addHalfVertex(o,P,L,M,!1,f,x,b),this.addHalfVertex(o,N,U,M,!0,-m,x,b)}addHalfVertex({x:o,y:l},f,m,x,b,M,P,L){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),b||this.segmentPoints.push(this.lineSoFar-this.segmentStart,M)),this.layoutVertexArray.emplaceBack((o<<1)+(x?1:0),(l<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(M===0?0:M<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const U=ar(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,U)}const N=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,N),P.primitiveLength++),b?this.e2=N:this.e1=N,L!=null&&this.zOffsetVertexArray.emplaceBack(L.zOffset,L.variableWidth,L.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(o,l){this.prevDistance=this.distance,this.distance+=o.dist(l),this.updateScaledDistance()}}function Mt(u,o,l){return u.x<o||u.x>l||u.y<o||u.y>l}let Xt,Ln;function Ur(u,o,l){return o*(vn/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}In(jt,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Zi=(u,o,l)=>(1-l)*u+l*o;function Jr(u,o){return 1/Ur(u,1,o.tileZoom)}function yi(u,o,l,f){return u.translatePosMatrix(f||o.tileID.projMatrix,o,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const ua=u=>{const o=[];So(u)&&o.push("RENDER_LINE_DASH"),u.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const l=u.paint.get("line-trim-offset");l[0]===0&&l[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),u.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER");const f=u.layout.get("line-join").constantOr("miter")==="none",m=!!u.paint.get("line-pattern").constantOr(1);return f&&m&&o.push("LINE_JOIN_NONE"),o};function So(u){const o=u.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}let Gd;const rC=()=>Gd||(Gd={layout:Xt||(Xt=new yo({"line-cap":new Pn(pt.layout_line["line-cap"]),"line-join":new Pn(pt.layout_line["line-join"]),"line-miter-limit":new pn(pt.layout_line["line-miter-limit"]),"line-round-limit":new pn(pt.layout_line["line-round-limit"]),"line-sort-key":new Pn(pt.layout_line["line-sort-key"]),"line-z-offset":new Pn(pt.layout_line["line-z-offset"]),"line-elevation-reference":new pn(pt.layout_line["line-elevation-reference"]),"line-cross-slope":new pn(pt.layout_line["line-cross-slope"]),visibility:new pn(pt.layout_line.visibility),"line-width-unit":new pn(pt.layout_line["line-width-unit"])})),paint:Ln||(Ln=new yo({"line-opacity":new Pn(pt.paint_line["line-opacity"]),"line-color":new Pn(pt.paint_line["line-color"]),"line-translate":new pn(pt.paint_line["line-translate"]),"line-translate-anchor":new pn(pt.paint_line["line-translate-anchor"]),"line-width":new Pn(pt.paint_line["line-width"]),"line-gap-width":new Pn(pt.paint_line["line-gap-width"]),"line-offset":new Pn(pt.paint_line["line-offset"]),"line-blur":new Pn(pt.paint_line["line-blur"]),"line-dasharray":new Pn(pt.paint_line["line-dasharray"]),"line-pattern":new Pn(pt.paint_line["line-pattern"]),"line-pattern-cross-fade":new pn(pt.paint_line["line-pattern-cross-fade"]),"line-gradient":new Kl(pt.paint_line["line-gradient"]),"line-trim-offset":new pn(pt.paint_line["line-trim-offset"]),"line-trim-fade-range":new pn(pt.paint_line["line-trim-fade-range"]),"line-trim-color":new pn(pt.paint_line["line-trim-color"]),"line-emissive-strength":new pn(pt.paint_line["line-emissive-strength"]),"line-border-width":new Pn(pt.paint_line["line-border-width"]),"line-border-color":new Pn(pt.paint_line["line-border-color"]),"line-occlusion-opacity":new pn(pt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},Gd);class bie extends Pn{possiblyEvaluate(o,l){return l=new Ii(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,transition:l.transition}),super.possiblyEvaluate(o,l)}evaluate(o,l,f,m){return l=st({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(o,l,f,m)}}let hw;function r4(u,o){return o>0?o+2*u:u}const wie=ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Sie=ui([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Tie=ui([{name:"a_projected_pos",components:4,type:"Float32"}],4);ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Eie=ui([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Cie=ui([{name:"a_texb",components:2,type:"Uint16"}]),Aie=ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),Mie=ui([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);ui([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const i4=ui([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Rie=ui([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ui([{name:"triangle",components:3,type:"Uint16"}]),ui([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ui([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),ui([{type:"Float32",name:"offsetX"}]),ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Qs=24;function Die(u,o,l){return u.sections.forEach(f=>{f.text=function(m,x,b){const M=x.layout.get("text-transform").evaluate(b,{});return M==="uppercase"?m=m.toLocaleUpperCase():M==="lowercase"&&(m=m.toLocaleLowerCase()),Zl.applyArabicShaping&&(m=Zl.applyArabicShaping(m)),m}(f.text,o,l)}),u}const fw={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Pie(u){return u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""}function Iie(u){return u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""}var o4,vP,s4,_P={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function kie(){return o4||(o4=1,_P.read=function(u,o,l,f,m){var x,b,M=8*m-f-1,P=(1<<M)-1,L=P>>1,N=-7,U=l?m-1:0,G=l?-1:1,te=u[o+U];for(U+=G,x=te&(1<<-N)-1,te>>=-N,N+=M;N>0;x=256*x+u[o+U],U+=G,N-=8);for(b=x&(1<<-N)-1,x>>=-N,N+=f;N>0;b=256*b+u[o+U],U+=G,N-=8);if(x===0)x=1-L;else{if(x===P)return b?NaN:1/0*(te?-1:1);b+=Math.pow(2,f),x-=L}return(te?-1:1)*b*Math.pow(2,x-f)},_P.write=function(u,o,l,f,m,x){var b,M,P,L=8*x-m-1,N=(1<<L)-1,U=N>>1,G=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=f?0:x-1,ne=f?1:-1,ce=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(M=isNaN(o)?1:0,b=N):(b=Math.floor(Math.log(o)/Math.LN2),o*(P=Math.pow(2,-b))<1&&(b--,P*=2),(o+=b+U>=1?G/P:G*Math.pow(2,1-U))*P>=2&&(b++,P/=2),b+U>=N?(M=0,b=N):b+U>=1?(M=(o*P-1)*Math.pow(2,m),b+=U):(M=o*Math.pow(2,U-1)*Math.pow(2,m),b=0));m>=8;u[l+te]=255&M,te+=ne,M/=256,m-=8);for(b=b<<m|M,L+=m;L>0;u[l+te]=255&b,te+=ne,b/=256,L-=8);u[l+te-ne]|=128*ce}),_P}function a4(){if(s4)return vP;s4=1,vP=o;var u=kie();function o(ue){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ue)?ue:new Uint8Array(ue||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var l=4294967296,f=1/l,m=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function x(ue){return ue.type===o.Bytes?ue.readVarint()+ue.pos:ue.pos+1}function b(ue,we,Pe){return Pe?4294967296*we+(ue>>>0):4294967296*(we>>>0)+(ue>>>0)}function M(ue,we,Pe){var Be=we<=16383?1:we<=2097151?2:we<=268435455?3:Math.floor(Math.log(we)/(7*Math.LN2));Pe.realloc(Be);for(var Qe=Pe.pos-1;Qe>=ue;Qe--)Pe.buf[Qe+Be]=Pe.buf[Qe]}function P(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeVarint(ue[Pe])}function L(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeSVarint(ue[Pe])}function N(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeFloat(ue[Pe])}function U(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeDouble(ue[Pe])}function G(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeBoolean(ue[Pe])}function te(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeFixed32(ue[Pe])}function ne(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeSFixed32(ue[Pe])}function ce(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeFixed64(ue[Pe])}function me(ue,we){for(var Pe=0;Pe<ue.length;Pe++)we.writeSFixed64(ue[Pe])}function ve(ue,we){return(ue[we]|ue[we+1]<<8|ue[we+2]<<16)+16777216*ue[we+3]}function Ie(ue,we,Pe){ue[Pe]=we,ue[Pe+1]=we>>>8,ue[Pe+2]=we>>>16,ue[Pe+3]=we>>>24}function Me(ue,we){return(ue[we]|ue[we+1]<<8|ue[we+2]<<16)+(ue[we+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(ue,we,Pe){for(Pe=Pe||this.length;this.pos<Pe;){var Be=this.readVarint(),Qe=Be>>3,rt=this.pos;this.type=7&Be,ue(Qe,we,this),this.pos===rt&&this.skip(Be)}return we},readMessage:function(ue,we){return this.readFields(ue,we,this.readVarint()+this.pos)},readFixed32:function(){var ue=ve(this.buf,this.pos);return this.pos+=4,ue},readSFixed32:function(){var ue=Me(this.buf,this.pos);return this.pos+=4,ue},readFixed64:function(){var ue=ve(this.buf,this.pos)+ve(this.buf,this.pos+4)*l;return this.pos+=8,ue},readSFixed64:function(){var ue=ve(this.buf,this.pos)+Me(this.buf,this.pos+4)*l;return this.pos+=8,ue},readFloat:function(){var ue=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ue},readDouble:function(){var ue=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ue},readVarint:function(ue){var we,Pe,Be=this.buf;return we=127&(Pe=Be[this.pos++]),Pe<128?we:(we|=(127&(Pe=Be[this.pos++]))<<7,Pe<128?we:(we|=(127&(Pe=Be[this.pos++]))<<14,Pe<128?we:(we|=(127&(Pe=Be[this.pos++]))<<21,Pe<128?we:function(Qe,rt,ot){var ct,At,Yt=ot.buf;if(ct=(112&(At=Yt[ot.pos++]))>>4,At<128||(ct|=(127&(At=Yt[ot.pos++]))<<3,At<128)||(ct|=(127&(At=Yt[ot.pos++]))<<10,At<128)||(ct|=(127&(At=Yt[ot.pos++]))<<17,At<128)||(ct|=(127&(At=Yt[ot.pos++]))<<24,At<128)||(ct|=(1&(At=Yt[ot.pos++]))<<31,At<128))return b(Qe,ct,rt);throw new Error("Expected varint not more than 10 bytes")}(we|=(15&(Pe=Be[this.pos]))<<28,ue,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ue=this.readVarint();return ue%2==1?(ue+1)/-2:ue/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ue=this.readVarint()+this.pos,we=this.pos;return this.pos=ue,ue-we>=12&&m?function(Pe,Be,Qe){return m.decode(Pe.subarray(Be,Qe))}(this.buf,we,ue):function(Pe,Be,Qe){for(var rt="",ot=Be;ot<Qe;){var ct,At,Yt,Vt=Pe[ot],qt=null,nn=Vt>239?4:Vt>223?3:Vt>191?2:1;if(ot+nn>Qe)break;nn===1?Vt<128&&(qt=Vt):nn===2?(192&(ct=Pe[ot+1]))==128&&(qt=(31&Vt)<<6|63&ct)<=127&&(qt=null):nn===3?(At=Pe[ot+2],(192&(ct=Pe[ot+1]))==128&&(192&At)==128&&((qt=(15&Vt)<<12|(63&ct)<<6|63&At)<=2047||qt>=55296&&qt<=57343)&&(qt=null)):nn===4&&(At=Pe[ot+2],Yt=Pe[ot+3],(192&(ct=Pe[ot+1]))==128&&(192&At)==128&&(192&Yt)==128&&((qt=(15&Vt)<<18|(63&ct)<<12|(63&At)<<6|63&Yt)<=65535||qt>=1114112)&&(qt=null)),qt===null?(qt=65533,nn=1):qt>65535&&(qt-=65536,rt+=String.fromCharCode(qt>>>10&1023|55296),qt=56320|1023&qt),rt+=String.fromCharCode(qt),ot+=nn}return rt}(this.buf,we,ue)},readBytes:function(){var ue=this.readVarint()+this.pos,we=this.buf.subarray(this.pos,ue);return this.pos=ue,we},readPackedVarint:function(ue,we){if(this.type!==o.Bytes)return ue.push(this.readVarint(we));var Pe=x(this);for(ue=ue||[];this.pos<Pe;)ue.push(this.readVarint(we));return ue},readPackedSVarint:function(ue){if(this.type!==o.Bytes)return ue.push(this.readSVarint());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readSVarint());return ue},readPackedBoolean:function(ue){if(this.type!==o.Bytes)return ue.push(this.readBoolean());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readBoolean());return ue},readPackedFloat:function(ue){if(this.type!==o.Bytes)return ue.push(this.readFloat());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readFloat());return ue},readPackedDouble:function(ue){if(this.type!==o.Bytes)return ue.push(this.readDouble());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readDouble());return ue},readPackedFixed32:function(ue){if(this.type!==o.Bytes)return ue.push(this.readFixed32());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readFixed32());return ue},readPackedSFixed32:function(ue){if(this.type!==o.Bytes)return ue.push(this.readSFixed32());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readSFixed32());return ue},readPackedFixed64:function(ue){if(this.type!==o.Bytes)return ue.push(this.readFixed64());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readFixed64());return ue},readPackedSFixed64:function(ue){if(this.type!==o.Bytes)return ue.push(this.readSFixed64());var we=x(this);for(ue=ue||[];this.pos<we;)ue.push(this.readSFixed64());return ue},skip:function(ue){var we=7&ue;if(we===o.Varint)for(;this.buf[this.pos++]>127;);else if(we===o.Bytes)this.pos=this.readVarint()+this.pos;else if(we===o.Fixed32)this.pos+=4;else{if(we!==o.Fixed64)throw new Error("Unimplemented type: "+we);this.pos+=8}},writeTag:function(ue,we){this.writeVarint(ue<<3|we)},realloc:function(ue){for(var we=this.length||16;we<this.pos+ue;)we*=2;if(we!==this.length){var Pe=new Uint8Array(we);Pe.set(this.buf),this.buf=Pe,this.length=we}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ue){this.realloc(4),Ie(this.buf,ue,this.pos),this.pos+=4},writeSFixed32:function(ue){this.realloc(4),Ie(this.buf,ue,this.pos),this.pos+=4},writeFixed64:function(ue){this.realloc(8),Ie(this.buf,-1&ue,this.pos),Ie(this.buf,Math.floor(ue*f),this.pos+4),this.pos+=8},writeSFixed64:function(ue){this.realloc(8),Ie(this.buf,-1&ue,this.pos),Ie(this.buf,Math.floor(ue*f),this.pos+4),this.pos+=8},writeVarint:function(ue){(ue=+ue||0)>268435455||ue<0?function(we,Pe){var Be,Qe;if(we>=0?(Be=we%4294967296|0,Qe=we/4294967296|0):(Qe=~(-we/4294967296),4294967295^(Be=~(-we%4294967296))?Be=Be+1|0:(Be=0,Qe=Qe+1|0)),we>=18446744073709552e3||we<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Pe.realloc(10),function(rt,ot,ct){ct.buf[ct.pos++]=127&rt|128,rt>>>=7,ct.buf[ct.pos++]=127&rt|128,rt>>>=7,ct.buf[ct.pos++]=127&rt|128,rt>>>=7,ct.buf[ct.pos++]=127&rt|128,ct.buf[ct.pos]=127&(rt>>>=7)}(Be,0,Pe),function(rt,ot){var ct=(7&rt)<<4;ot.buf[ot.pos++]|=ct|((rt>>>=3)?128:0),rt&&(ot.buf[ot.pos++]=127&rt|((rt>>>=7)?128:0),rt&&(ot.buf[ot.pos++]=127&rt|((rt>>>=7)?128:0),rt&&(ot.buf[ot.pos++]=127&rt|((rt>>>=7)?128:0),rt&&(ot.buf[ot.pos++]=127&rt|((rt>>>=7)?128:0),rt&&(ot.buf[ot.pos++]=127&rt)))))}(Qe,Pe)}(ue,this):(this.realloc(4),this.buf[this.pos++]=127&ue|(ue>127?128:0),ue<=127||(this.buf[this.pos++]=127&(ue>>>=7)|(ue>127?128:0),ue<=127||(this.buf[this.pos++]=127&(ue>>>=7)|(ue>127?128:0),ue<=127||(this.buf[this.pos++]=ue>>>7&127))))},writeSVarint:function(ue){this.writeVarint(ue<0?2*-ue-1:2*ue)},writeBoolean:function(ue){this.writeVarint(!!ue)},writeString:function(ue){ue=String(ue),this.realloc(4*ue.length),this.pos++;var we=this.pos;this.pos=function(Be,Qe,rt){for(var ot,ct,At=0;At<Qe.length;At++){if((ot=Qe.charCodeAt(At))>55295&&ot<57344){if(!ct){ot>56319||At+1===Qe.length?(Be[rt++]=239,Be[rt++]=191,Be[rt++]=189):ct=ot;continue}if(ot<56320){Be[rt++]=239,Be[rt++]=191,Be[rt++]=189,ct=ot;continue}ot=ct-55296<<10|ot-56320|65536,ct=null}else ct&&(Be[rt++]=239,Be[rt++]=191,Be[rt++]=189,ct=null);ot<128?Be[rt++]=ot:(ot<2048?Be[rt++]=ot>>6|192:(ot<65536?Be[rt++]=ot>>12|224:(Be[rt++]=ot>>18|240,Be[rt++]=ot>>12&63|128),Be[rt++]=ot>>6&63|128),Be[rt++]=63&ot|128)}return rt}(this.buf,ue,this.pos);var Pe=this.pos-we;Pe>=128&&M(we,Pe,this),this.pos=we-1,this.writeVarint(Pe),this.pos+=Pe},writeFloat:function(ue){this.realloc(4),u.write(this.buf,ue,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ue){this.realloc(8),u.write(this.buf,ue,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ue){var we=ue.length;this.writeVarint(we),this.realloc(we);for(var Pe=0;Pe<we;Pe++)this.buf[this.pos++]=ue[Pe]},writeRawMessage:function(ue,we){this.pos++;var Pe=this.pos;ue(we,this);var Be=this.pos-Pe;Be>=128&&M(Pe,Be,this),this.pos=Pe-1,this.writeVarint(Be),this.pos+=Be},writeMessage:function(ue,we,Pe){this.writeTag(ue,o.Bytes),this.writeRawMessage(we,Pe)},writePackedVarint:function(ue,we){we.length&&this.writeMessage(ue,P,we)},writePackedSVarint:function(ue,we){we.length&&this.writeMessage(ue,L,we)},writePackedBoolean:function(ue,we){we.length&&this.writeMessage(ue,G,we)},writePackedFloat:function(ue,we){we.length&&this.writeMessage(ue,N,we)},writePackedDouble:function(ue,we){we.length&&this.writeMessage(ue,U,we)},writePackedFixed32:function(ue,we){we.length&&this.writeMessage(ue,te,we)},writePackedSFixed32:function(ue,we){we.length&&this.writeMessage(ue,ne,we)},writePackedFixed64:function(ue,we){we.length&&this.writeMessage(ue,ce,we)},writePackedSFixed64:function(ue,we){we.length&&this.writeMessage(ue,me,we)},writeBytesField:function(ue,we){this.writeTag(ue,o.Bytes),this.writeBytes(we)},writeFixed32Field:function(ue,we){this.writeTag(ue,o.Fixed32),this.writeFixed32(we)},writeSFixed32Field:function(ue,we){this.writeTag(ue,o.Fixed32),this.writeSFixed32(we)},writeFixed64Field:function(ue,we){this.writeTag(ue,o.Fixed64),this.writeFixed64(we)},writeSFixed64Field:function(ue,we){this.writeTag(ue,o.Fixed64),this.writeSFixed64(we)},writeVarintField:function(ue,we){this.writeTag(ue,o.Varint),this.writeVarint(we)},writeSVarintField:function(ue,we){this.writeTag(ue,o.Varint),this.writeSVarint(we)},writeStringField:function(ue,we){this.writeTag(ue,o.Bytes),this.writeString(we)},writeFloatField:function(ue,we){this.writeTag(ue,o.Fixed32),this.writeFloat(we)},writeDoubleField:function(ue,we){this.writeTag(ue,o.Fixed64),this.writeDouble(we)},writeBooleanField:function(ue,we){this.writeVarintField(ue,!!we)}},vP}var iC=Di(a4());const xP=3;function Oie(u,o,l){o.glyphs=[],u===1&&l.readMessage(Lie,o)}function Lie(u,o,l){if(u===3){const{id:f,bitmap:m,width:x,height:b,left:M,top:P,advance:L}=l.readMessage(zie,{});o.glyphs.push({id:f,bitmap:new lf({width:x+2*xP,height:b+2*xP},m),metrics:{width:x,height:b,left:M,top:P,advance:L}})}else u===4?o.ascender=l.readSVarint():u===5&&(o.descender=l.readSVarint())}function zie(u,o,l){u===1?o.id=l.readVarint():u===2?o.bitmap=l.readBytes():u===3?o.width=l.readVarint():u===4?o.height=l.readVarint():u===5?o.left=l.readSVarint():u===6?o.top=l.readSVarint():u===7&&(o.advance=l.readVarint())}const Fie=xP,Uc={horizontal:1,vertical:2,horizontalOnly:3};class pw{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(o,l){const f=new pw;return f.scale=o||1,f.fontStack=l,f}static forImage(o){const l=new pw;return l.image=o,l}}class Bx{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l,f){const m=new Bx;for(let x=0;x<o.sections.length;x++){const b=o.sections[x];b.image?m.addImageSection(b,f):m.addTextSection(b,l)}return m}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=function(l,f){let m="";for(let x=0;x<l.length;x++){const b=l.charCodeAt(x+1)||null,M=l.charCodeAt(x-1)||null;m+=!f&&(b&&iy(b)&&!fw[l[x+1]]||M&&iy(M)&&!fw[l[x-1]])||!fw[l[x]]?l[x]:fw[l[x]]}return m}(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&oC[this.text.charCodeAt(f)];f++)o++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&oC[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const f=new Bx;return f.text=this.text.substring(o,l),f.sectionIndex=this.sectionIndex.slice(o,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}addTextSection(o,l){this.text+=o.text,this.sections.push(pw.forText(o.scale,o.fontStack||l));const f=this.sections.length-1;for(let m=0;m<o.text.length;++m)this.sectionIndex.push(f)}addImageSection(o,l){const f=o.image?o.image.getPrimary():null;if(!f)return void Ir("Can't add FormattedSection with an empty image.");f.scaleSelf(l);const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCodePoint(m),this.sections.push(pw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Ir("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bP(u,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce=1){const me=Bx.fromFeature(u,m,ce);U===Uc.vertical&&me.verticalizePunctuation(G);let ve=[];const Ie=function(Be,Qe,rt,ot,ct,At){if(!Be)return[];const Yt=[],Vt=function(Ut,bt,Ct,on,un,Qn){let Nn=0;for(let Sn=0;Sn<Ut.length();Sn++){const rn=Ut.getSection(Sn);Nn+=l4(Ut.getCodePoint(Sn),rn,on,un,bt,Qn)}return Nn/Math.max(1,Math.ceil(Nn/Ct))}(Be,Qe,rt,ot,ct,At),qt=Be.text.indexOf("")>=0;let nn=0;for(let Ut=0;Ut<Be.length();Ut++){const bt=Be.getSection(Ut),Ct=Be.getCodePoint(Ut);if(oC[Ct]||(nn+=l4(Ct,bt,ot,ct,Qe,At)),Ut<Be.length()-1){const on=!((Et=Ct)<11904||!(lr["Bopomofo Extended"](Et)||lr.Bopomofo(Et)||lr["CJK Compatibility Forms"](Et)||lr["CJK Compatibility Ideographs"](Et)||lr["CJK Compatibility"](Et)||lr["CJK Radicals Supplement"](Et)||lr["CJK Strokes"](Et)||lr["CJK Symbols and Punctuation"](Et)||lr["CJK Unified Ideographs Extension A"](Et)||lr["CJK Unified Ideographs"](Et)||lr["Enclosed CJK Letters and Months"](Et)||lr["Halfwidth and Fullwidth Forms"](Et)||lr.Hiragana(Et)||lr["Ideographic Description Characters"](Et)||lr["Kangxi Radicals"](Et)||lr["Katakana Phonetic Extensions"](Et)||lr.Katakana(Et)||lr["Vertical Forms"](Et)||lr["Yi Radicals"](Et)||lr["Yi Syllables"](Et)));(Bie[Ct]||on||bt.image)&&Yt.push(u4(Ut+1,nn,Vt,Yt,Nie(Ct,Be.getCodePoint(Ut+1),on&&qt),!1))}}var Et;return d4(u4(Be.length(),nn,Vt,Yt,0,!0))}(me,L,x,o,f,te),{processBidirectionalText:Me,processStyledBidirectionalText:ue}=Zl;if(Me&&me.sections.length===1){const Be=Me(me.toString(),Ie);for(const Qe of Be){const rt=new Bx;rt.text=Qe,rt.sections=me.sections;for(let ot=0;ot<Qe.length;ot++)rt.sectionIndex.push(0);ve.push(rt)}}else if(ue){const Be=ue(me.text,me.sectionIndex,Ie);for(const Qe of Be){const rt=new Bx;rt.text=Qe[0],rt.sectionIndex=Qe[1],rt.sections=me.sections,ve.push(rt)}}else ve=function(Be,Qe){const rt=[],ot=Be.text;let ct=0;for(const At of Qe)rt.push(Be.substring(ct,At)),ct=At;return ct<ot.length&&rt.push(Be.substring(ct,ot.length)),rt}(me,Ie);const we=[],Pe={positionedLines:we,text:me.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:U,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Be,Qe,rt,ot,ct,At,Yt,Vt,qt,nn,Et,Ut){let bt=0,Ct=0,on=0;const un=Vt==="right"?1:Vt==="left"?0:.5;let Qn=!1;for(const Gn of ct){const br=Gn.getSections();for(const zr of br){if(zr.image)continue;const Br=Qe[zr.fontStack];if(Br&&(Qn=Br.ascender!==void 0&&Br.descender!==void 0,!Qn))break}if(!Qn)break}let Nn=0;for(const Gn of ct){Gn.trim();const br=Gn.getMaxScale(),zr=(br-1)*Qs,Br={positionedGlyphs:[],lineOffset:0};Be.positionedLines[Nn]=Br;const Gr=Br.positionedGlyphs;let $r=0;if(!Gn.length()){Ct+=At,++Nn;continue}let jr=0,qi=0;for(let ze=0;ze<Gn.length();ze++){const Ve=Gn.getSection(ze),Pt=Gn.getSectionIndex(ze),mn=Gn.getCodePoint(ze);let Cn=Ve.scale,Tn=null,Kn=null,gr=null,ei=Qs,ti=0;qt===Uc.vertical&&((Sn=mn)===12312||Sn===12313||Sn===12316||Sn===12540||Sn===12448)&&(qt=Uc.horizontal);const Vr=!(qt===Uc.horizontal||!Et&&!es(mn)||Et&&(oC[mn]||Bm(mn)));if(Ve.image){const Fi=ot.get(Ve.image.toString());if(!Fi)continue;gr=Ve.image,Be.iconsInText=Be.iconsInText||!0,Kn=Fi.paddedRect;const Ki=Fi.displaySize;Cn=Cn*Qs/Ut,Tn={width:Ki[0],height:Ki[1],left:0,top:-3,advance:Vr?Ki[1]:Ki[0],localGlyph:!1},ti=Qn?-Tn.height*Cn:br*Qs-17-Ki[1]*Cn,ei=Tn.advance;const ni=(Vr?Ki[0]:Ki[1])*Cn-Qs*br;ni>0&&ni>$r&&($r=ni)}else{const Fi=rt[Ve.fontStack];if(!Fi)continue;Fi[mn]&&(Kn=Fi[mn]);const Ki=Qe[Ve.fontStack];if(!Ki)continue;const ni=Ki.glyphs[mn];if(!ni)continue;if(Tn=ni.metrics,ei=mn!==8203?Qs:0,Qn){const To=Ki.ascender!==void 0?Math.abs(Ki.ascender):0,to=Ki.descender!==void 0?Math.abs(Ki.descender):0,Li=(To+to)*Cn;jr<Li&&(jr=Li,qi=(To-to)/2*Cn),ti=-To*Cn}else ti=(br-Cn)*Qs-17}Vr?(Be.verticalizable=!0,Gr.push({glyph:mn,image:gr,x:bt,y:Ct+ti,vertical:Vr,scale:Cn,localGlyph:Tn.localGlyph,fontStack:Ve.fontStack,sectionIndex:Pt,metrics:Tn,rect:Kn}),bt+=ei*Cn+nn):(Gr.push({glyph:mn,image:gr,x:bt,y:Ct+ti,vertical:Vr,scale:Cn,localGlyph:Tn.localGlyph,fontStack:Ve.fontStack,sectionIndex:Pt,metrics:Tn,rect:Kn}),bt+=Tn.advance*Cn+nn)}Gr.length!==0&&(on=Math.max(bt-nn,on),Qn?h4(Gr,un,$r,qi,At*br/2):h4(Gr,un,$r,0,At/2)),bt=0;const eo=At*br+$r;Br.lineOffset=Math.max($r,zr),Ct+=eo,++Nn}var Sn;const rn=Ct,{horizontalAlign:Mr,verticalAlign:Hn}=wP(Yt);(function(Gn,br,zr,Br,Gr,$r){const jr=(br-zr)*Gr,qi=-$r*Br;for(const eo of Gn)for(const ze of eo.positionedGlyphs)ze.x+=jr,ze.y+=qi})(Be.positionedLines,un,Mr,Hn,on,rn),Be.top+=-Hn*rn,Be.bottom=Be.top+rn,Be.left+=-Mr*on,Be.right=Be.left+on,Be.hasBaseline=Qn}(Pe,o,l,f,ve,b,M,P,U,L,G,ne),!function(Be){for(const Qe of Be)if(Qe.positionedGlyphs.length!==0)return!1;return!0}(we))return Pe}const oC={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bie={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function l4(u,o,l,f,m,x){if(o.image){const b=f.get(o.image.toString());return b?b.displaySize[0]*o.scale*Qs/x+m:0}{const b=l[o.fontStack],M=b&&b.glyphs[u];return M?M.metrics.advance*o.scale+m:0}}function c4(u,o,l,f){const m=Math.pow(u-o,2);return f?u<o?m/2:2*m:m+Math.abs(l)*l}function Nie(u,o,l){let f=0;return u===10&&(f-=1e4),l&&(f+=150),u!==40&&u!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function u4(u,o,l,f,m,x){let b=null,M=c4(o,l,m,x);for(const P of f){const L=c4(o-P.x,l,m,x)+P.badness;L<=M&&(b=P,M=L)}return{index:u,x:o,priorBreak:b,badness:M}}function d4(u){return u?d4(u.priorBreak).concat(u.index):[]}function wP(u){let o=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function h4(u,o,l,f,m){if(!(o||l||f||m))return;const x=u.length-1,b=u[x],M=(b.x+b.metrics.advance*b.scale)*o;for(let P=0;P<=x;P++)u[P].x-=M,u[P].y+=l+f+m}function f4(u){return u.imagePrimary!==void 0&&u.top!==void 0&&u.bottom!==void 0&&u.left!==void 0&&u.right!==void 0}function jie(u,o,l,f){const{horizontalAlign:m,verticalAlign:x}=wP(f),b=l[0]-u.displaySize[0]*m,M=l[1]-u.displaySize[1]*x;return{imagePrimary:u,imageSecondary:o,top:M,bottom:M+u.displaySize[1],left:b,right:b+u.displaySize[0]}}function p4(u,o,l,f,m,x){const b=u.imagePrimary;let M;if(b.content){const me=b.content,ve=b.pixelRatio||1;M=[me[0]/ve,me[1]/ve,b.displaySize[0]-me[2]/ve,b.displaySize[1]-me[3]/ve]}const P=o.left*x,L=o.right*x;let N,U,G,te;l==="width"||l==="both"?(te=m[0]+P-f[3],U=m[0]+L+f[1]):(te=m[0]+(P+L-b.displaySize[0])/2,U=te+b.displaySize[0]);const ne=o.top*x,ce=o.bottom*x;return l==="height"||l==="both"?(N=m[1]+ne-f[0],G=m[1]+ce+f[2]):(N=m[1]+(ne+ce-b.displaySize[1])/2,G=N+b.displaySize[1]),{imagePrimary:b,imageSecondary:void 0,top:N,right:U,bottom:G,left:te,collisionPadding:M}}function m4(u){return!u.imagePrimary.stretchX}function g4(u){return!u.imagePrimary.stretchY}function y4(u){return{width:u.right-u.left,height:u.bottom-u.top}}const xp=128;function v4(u,o){const{expression:l}=o;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Ii(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=l;let x=0;for(;x<f.length&&f[x]<=u;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<u+1;)b++;b=Math.min(f.length-1,b);const M=f[x],P=f[b];return l.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:M,maxZoom:P,minSize:l.evaluate(new Ii(M)),maxSize:l.evaluate(new Ii(P)),interpolationType:m}}}function SP(u,{uSize:o,uSizeT:l},{lowerSize:f,upperSize:m}){return u.kind==="source"?f/xp:u.kind==="composite"?ar(f/xp,m/xp,l):o}function mw(u,o,l=1){let f=0,m=0;if(u.kind==="constant")m=u.layoutSize*l;else if(u.kind!=="source"){const{interpolationType:x,minZoom:b,maxZoom:M}=u,P=x?We(Va.interpolationFactor(x,o,b,M),0,1):0;u.kind==="camera"?m=ar(u.minSize,u.maxSize,P)*l:f=P*l}return{uSizeT:f,uSize:m}}class fg extends dn{constructor(o,l,f,m,x){super(o,l),this.angle=m,this.z=f,x!==void 0&&(this.segment=x)}clone(){return new fg(this.x,this.y,this.z,this.angle,this.segment)}}function _4(u,o,l,f,m){if(o.segment===void 0)return!0;let x=o,b=o.segment+1,M=0;for(;M>-l/2;){if(b--,b<0)return!1;M-=u[b].dist(x),x=u[b]}M+=u[b].dist(u[b+1]),b++;const P=[];let L=0;for(;M<l/2;){const N=u[b],U=u[b+1];if(!U)return!1;let G=u[b-1].angleTo(N)-N.angleTo(U);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:M,angleDelta:G}),L+=G;M-P[0].distance>f;)L-=P.shift().angleDelta;if(L>m)return!1;b++,M+=N.dist(U)}return!0}function x4(u){let o=0;for(let l=0;l<u.length-1;l++)o+=u[l].dist(u[l+1]);return o}function b4(u,o,l){return u?.6*o*l:0}function w4(u,o){return Math.max(u?u.right-u.left:0,o?o.right-o.left:0)}function Vie(u,o,l,f,m,x){const b=b4(l,m,x),M=w4(l,f)*x;let P=0;const L=x4(u)/2;for(let N=0;N<u.length-1;N++){const U=u[N],G=u[N+1],te=U.dist(G);if(P+te>L){const ne=(L-P)/te,ce=ar(U.x,G.x,ne),me=ar(U.y,G.y,ne),ve=new fg(ce,me,0,G.angleTo(U),N);return!b||_4(u,ve,M,b,o)?ve:void 0}P+=te}}function Uie(u,o,l,f,m,x,b,M,P){const L=b4(f,x,b),N=w4(f,m),U=N*b,G=u[0].x===0||u[0].x===P||u[0].y===0||u[0].y===P;return o-U<o/4&&(o=U+o/4),S4(u,G?o/2*M%o:(N/2+2*x)*b*M%o,o,L,l,U,G,!1,P)}function S4(u,o,l,f,m,x,b,M,P){const L=x/2,N=x4(u);let U=0,G=o-l,te=[];for(let ne=0;ne<u.length-1;ne++){const ce=u[ne],me=u[ne+1],ve=ce.dist(me),Ie=me.angleTo(ce);for(;G+l<U+ve;){G+=l;const Me=(G-U)/ve,ue=ar(ce.x,me.x,Me),we=ar(ce.y,me.y,Me);if(ue>=0&&ue<P&&we>=0&&we<P&&G-L>=0&&G+L<=N){const Pe=new fg(ue,we,0,Ie,ne);f&&!_4(u,Pe,x,f,m)||te.push(Pe)}}U+=ve}return M||te.length||b||(te=S4(u,U/2,l,f,m,x,b,!0,P)),te}function T4(u){let o=0,l=0;for(const b of u)o+=b.w*b.h,l=Math.max(l,b.w);u.sort((b,M)=>M.h-b.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let m=0,x=0;for(const b of u)for(let M=f.length-1;M>=0;M--){const P=f[M];if(!(b.w>P.w||b.h>P.h)){if(b.x=P.x,b.y=P.y,x=Math.max(x,b.y+b.h),m=Math.max(m,b.x+b.w),b.w===P.w&&b.h===P.h){const L=f.pop();M<f.length&&(f[M]=L)}else b.h===P.h?(P.x+=b.w,P.w-=b.w):b.w===P.w?(P.y+=b.h,P.h-=b.h):(f.push({x:P.x+b.w,y:P.y,w:P.w-b.w,h:b.h}),P.y+=b.h,P.h-=b.h);break}}return{w:m,h:x,fill:o/(m*x)||0}}In(fg,"Anchor");const D_=1;class gw{static getImagePositionScale(o,l,f){if(l&&o&&o.options&&o.options.transform){const m=o.options.transform;return{x:m.a,y:m.d}}return{x:f,y:f}}constructor(o,l,f,m){this.paddedRect=o;const{pixelRatio:x,version:b,stretchX:M,stretchY:P,content:L,sdf:N,usvg:U}=l;this.pixelRatio=x,this.stretchX=M,this.stretchY=P,this.content=L,this.version=b,this.padding=f,this.sdf=N,this.scale=gw.getImagePositionScale(m,U,x)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function TP(u,o,l){const f=Hl.parse(u),m=function(x,b,M=[1,1]){return{x:0,y:0,w:(x.data?x.data.width:x.width*M[0])+2*b,h:(x.data?x.data.height:x.height*M[1])+2*b}}(o,l,[f.options.transform.a,f.options.transform.d]);return{bin:m,imagePosition:new gw(m,o,l,f),imageVariant:f}}class E4{constructor(o,l,f){const m=new Map,x=new Map;this.haveRenderCallbacks=[];const b=[];this.addImages(o,m,D_,b),this.addImages(l,x,2,b);const{w:M,h:P}=T4(b),L=new Os({width:M||1,height:P||1});for(const[N,U]of o.entries()){const G=m.get(N).paddedRect;Os.copy(U.data,L,{x:0,y:0},{x:G.x+D_,y:G.y+D_},U.data,f,U.sdf)}for(const[N,U]of l.entries()){const G=x.get(N),te=G.paddedRect;let ne=G.padding;const ce=te.x+ne,me=te.y+ne,ve=U.data.width,Ie=U.data.height;ne=ne>1?ne-1:ne,Os.copy(U.data,L,{x:0,y:0},{x:ce,y:me},U.data,f),Os.copy(U.data,L,{x:0,y:Ie-ne},{x:ce,y:me-ne},{width:ve,height:ne},f),Os.copy(U.data,L,{x:0,y:0},{x:ce,y:me+Ie},{width:ve,height:ne},f),Os.copy(U.data,L,{x:ve-ne,y:0},{x:ce-ne,y:me},{width:ne,height:Ie},f),Os.copy(U.data,L,{x:0,y:0},{x:ce+ve,y:me},{width:ne,height:Ie},f),Os.copy(U.data,L,{x:ve-ne,y:Ie-ne},{x:ce-ne,y:me-ne},{width:ne,height:ne},f),Os.copy(U.data,L,{x:0,y:Ie-ne},{x:ce+ve,y:me-ne},{width:ne,height:ne},f),Os.copy(U.data,L,{x:0,y:0},{x:ce+ve,y:me+Ie},{width:ne,height:ne},f),Os.copy(U.data,L,{x:ve-ne,y:0},{x:ce-ne,y:me+Ie},{width:ne,height:ne},f)}this.lut=f,this.image=L,this.iconPositions=m,this.patternPositions=x}addImages(o,l,f,m){for(const[x,b]of o.entries()){const{bin:M,imagePosition:P,imageVariant:L}=TP(x,b,f);l.set(x,P),m.push(M),b.hasRenderCallback&&this.haveRenderCallbacks.push(L.id)}}patchUpdatedImages(o,l,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(m=>o.hasImage(m,f)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const m of o.getUpdatedImages(f)){for(const x of this.iconPositions.keys()){const b=Hl.parse(x);if(rl.isEqual(b.id,m)){const M=o.getImage(m,f);this.patchUpdatedImage(this.iconPositions.get(x),M,l)}}for(const x of this.patternPositions.keys()){const b=Hl.parse(x);if(rl.isEqual(b.id,m)){const M=o.getImage(m,f);this.patchUpdatedImage(this.patternPositions.get(x),M,l)}}}}patchUpdatedImage(o,l,f){if(!o||!l||o.version===l.version)return;o.version=l.version;const[m,x]=o.tl,b=o.sdf;if(this.lut||b){const M={width:l.data.width,height:l.data.height},P=new Os(M);Os.copy(l.data,P,{x:0,y:0},{x:0,y:0},M,this.lut,b),f.update(P,{position:{x:m,y:x}})}else f.update(l.data,{position:{x:m,y:x}})}}In(gw,"ImagePosition"),In(E4,"ImageAtlas");const sC=1e20;function C4(u,o,l,f,m,x,b,M,P){for(let L=o;L<o+f;L++)A4(u,l*x+L,x,m,b,M,P);for(let L=l;L<l+m;L++)A4(u,L*x+o,1,f,b,M,P)}function A4(u,o,l,f,m,x,b){x[0]=0,b[0]=-1e20,b[1]=sC,m[0]=u[o];for(let M=1,P=0,L=0;M<f;M++){m[M]=u[o+M*l];const N=M*M;do{const U=x[P];L=(m[M]-m[U]+N-U*U)/(M-U)/2}while(L<=b[P]&&--P>-1);P++,x[P]=M,b[P]=L,b[P+1]=sC}for(let M=0,P=0;M<f;M++){for(;b[P+1]<M;)P++;const L=x[P],N=M-L;u[o+M*l]=m[L]+N*N}}const gf=2,EP={none:0,ideographs:1,all:2};class Nx{constructor(o,l,f){this.requestManager=o,this.localGlyphMode=l,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o,l){this.urls[l]=o}getGlyphs(o,l,f){const m=[],x=this.urls[l]||Yo.GLYPHS_URL;for(const b in o)for(const M of o[b])m.push({stack:b,id:M});ft(m,({stack:b,id:M},P)=>{let L=this.entries[b];L||(L=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let N=L.glyphs[M];if(N!==void 0)return void P(null,{stack:b,id:M,glyph:N});if(N=this._tinySDF(L,b,M),N)return L.glyphs[M]=N,void P(null,{stack:b,id:M,glyph:N});const U=Math.floor(M/256);if(256*U>65535)return Ir("glyphs > 65535 not supported"),void P(null,{stack:b,id:M,glyph:N});if(L.ranges[U])return void P(null,{stack:b,id:M,glyph:N});let G=L.requests[U];G||(G=L.requests[U]=[],Nx.loadGlyphRange(b,U,x,this.requestManager,(te,ne)=>{if(ne){L.ascender=ne.ascender,L.descender=ne.descender;for(const ce in ne.glyphs)this._doesCharSupportLocalGlyph(+ce)||(L.glyphs[+ce]=ne.glyphs[+ce]);L.ranges[U]=!0}for(const ce of G)ce(te,ne);delete L.requests[U]})),G.push((te,ne)=>{te?P(te):ne&&P(null,{stack:b,id:M,glyph:ne.glyphs[M]||null})})},(b,M)=>{if(b)f(b);else if(M){const P={};for(const{stack:L,id:N,glyph:U}of M)P[L]===void 0&&(P[L]={}),P[L].glyphs===void 0&&(P[L].glyphs={}),P[L].glyphs[N]=U&&{id:U.id,bitmap:U.bitmap.clone(),metrics:U.metrics},P[L].ascender=this.entries[L].ascender,P[L].descender=this.entries[L].descender;f(null,P)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==EP.none&&(this.localGlyphMode===EP.all?!!this.localFontFamily:!!this.localFontFamily&&(lr["CJK Unified Ideographs"](o)||lr["Hangul Syllables"](o)||lr.Hiragana(o)||lr.Katakana(o)||lr["CJK Symbols and Punctuation"](o)||lr["CJK Unified Ideographs Extension A"](o)||lr["CJK Unified Ideographs Extension B"](o)||lr.Osage(o)))}_tinySDF(o,l,f){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let x=o.tinySDF;if(!x){let ce="400";/bold/i.test(l)?ce="900":/medium/i.test(l)?ce="500":/light/i.test(l)&&(ce="200"),x=o.tinySDF=new Nx.TinySDF({fontFamily:m,fontWeight:ce,fontSize:24*gf,buffer:3*gf,radius:8*gf}),x.fontWeight=ce}if(this.localGlyphs[x.fontWeight][f])return this.localGlyphs[x.fontWeight][f];const b=String.fromCodePoint(f),{data:M,width:P,height:L,glyphWidth:N,glyphHeight:U,glyphLeft:G,glyphTop:te,glyphAdvance:ne}=x.draw(b);return this.localGlyphs[x.fontWeight][f]={id:f,bitmap:new lf({width:P,height:L},M),metrics:{width:N/gf,height:U/gf,left:G/gf,top:te/gf-27,advance:ne/gf,localGlyph:!0}}}}Nx.loadGlyphRange=function(u,o,l,f,m){const x=256*o,b=x+255,M=f.transformRequest(f.normalizeGlyphsURL(l).replace("{fontstack}",u).replace("{range}",`${x}-${b}`),Nf.Glyphs);hd(M,(P,L)=>{if(P)m(P);else if(L){const N={},U=function(G){return new iC(G).readFields(Oie,{})}(L);for(const G of U.glyphs)N[G.id]=G;m(null,{glyphs:N,ascender:U.ascender,descender:U.descender})}})},Nx.TinySDF=class{constructor({fontSize:u=24,buffer:o=3,radius:l=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:x="normal",fontStyle:b="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=l;const M=this.size=u+4*o,P=this._createCanvas(M),L=this.ctx=P.getContext("2d",{willReadFrequently:!0});L.font=`${b} ${x} ${u}px ${m}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(u){const o=document.createElement("canvas");return o.width=o.height=u,o}draw(u){const{width:o,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:x}=this.ctx.measureText(u),b=Math.ceil(l),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-m))),P=Math.min(this.size-this.buffer,b+Math.ceil(f)),L=M+2*this.buffer,N=P+2*this.buffer,U=Math.max(L*N,0),G=new Uint8ClampedArray(U),te={data:G,width:L,height:N,glyphWidth:M,glyphHeight:P,glyphTop:b,glyphLeft:0,glyphAdvance:o};if(M===0||P===0)return te;const{ctx:ne,buffer:ce,gridInner:me,gridOuter:ve}=this;ne.clearRect(ce,ce,M,P),ne.fillText(u,ce,ce+b);const Ie=ne.getImageData(ce,ce,M,P);ve.fill(sC,0,U),me.fill(0,0,U);for(let Me=0;Me<P;Me++)for(let ue=0;ue<M;ue++){const we=Ie.data[4*(Me*M+ue)+3]/255;if(we===0)continue;const Pe=(Me+ce)*L+ue+ce;if(we===1)ve[Pe]=0,me[Pe]=sC;else{const Be=.5-we;ve[Pe]=Be>0?Be*Be:0,me[Pe]=Be<0?Be*Be:0}}C4(ve,0,0,L,N,L,this.f,this.v,this.z),C4(me,ce,ce,M,P,L,this.f,this.v,this.z);for(let Me=0;Me<U;Me++){const ue=Math.sqrt(ve[Me])-Math.sqrt(me[Me]);G[Me]=Math.round(255-255*(ue/this.radius+this.cutoff))}return te}};const P_=D_;function M4(u,o){return u+o[1]-o[0]}function R4(u,o,l,f,m=1){const x=[],b=u.imagePrimary,M=b.pixelRatio,P=b.paddedRect.w-2*P_,L=b.paddedRect.h-2*P_,N=(u.right-u.left)*m,U=(u.bottom-u.top)*m,G=b.stretchX||[[0,P]],te=b.stretchY||[[0,L]],ne=G.reduce(M4,0),ce=te.reduce(M4,0),me=P-ne,ve=L-ce;let Ie=0,Me=ne,ue=0,we=ce,Pe=0,Be=me,Qe=0,rt=ve;if(b.content&&f){const ct=b.content;Ie=aC(G,0,ct[0]),ue=aC(te,0,ct[1]),Me=aC(G,ct[0],ct[2]),we=aC(te,ct[1],ct[3]),Pe=ct[0]-Ie,Qe=ct[1]-ue,Be=ct[2]-ct[0]-Me,rt=ct[3]-ct[1]-we}const ot=(ct,At,Yt,Vt)=>{const qt=lC(ct.stretch-Ie,Me,N,u.left*m),nn=cC(ct.fixed-Pe,Be,ct.stretch,ne),Et=lC(At.stretch-ue,we,U,u.top*m),Ut=cC(At.fixed-Qe,rt,At.stretch,ce),bt=lC(Yt.stretch-Ie,Me,N,u.left*m),Ct=cC(Yt.fixed-Pe,Be,Yt.stretch,ne),on=lC(Vt.stretch-ue,we,U,u.top*m),un=cC(Vt.fixed-Qe,rt,Vt.stretch,ce),Qn=new dn(qt,Et),Nn=new dn(bt,Et),Sn=new dn(bt,on),rn=new dn(qt,on),Mr=new dn(nn/M,Ut/M),Hn=new dn(Ct/M,un/M),Gn=o*Math.PI/180;if(Gn){const jr=Math.sin(Gn),qi=Math.cos(Gn),eo=[qi,-jr,jr,qi];Qn._matMult(eo),Nn._matMult(eo),rn._matMult(eo),Sn._matMult(eo)}const br=ct.stretch+ct.fixed,zr=Yt.stretch+Yt.fixed,Br=At.stretch+At.fixed,Gr=Vt.stretch+Vt.fixed,$r=u.imageSecondary;return{tl:Qn,tr:Nn,bl:rn,br:Sn,texPrimary:{x:b.paddedRect.x+P_+br,y:b.paddedRect.y+P_+Br,w:zr-br,h:Gr-Br},texSecondary:$r?{x:$r.paddedRect.x+P_+br,y:$r.paddedRect.y+P_+Br,w:zr-br,h:Gr-Br}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mr,pixelOffsetBR:Hn,minFontScaleX:Be/M/N,minFontScaleY:rt/M/U,isSDF:l}};if(f&&(b.stretchX||b.stretchY)){const ct=D4(G,me,ne),At=D4(te,ve,ce);for(let Yt=0;Yt<ct.length-1;Yt++){const Vt=ct[Yt],qt=ct[Yt+1];for(let nn=0;nn<At.length-1;nn++)x.push(ot(Vt,At[nn],qt,At[nn+1]))}}else x.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:L+1}));return x}function aC(u,o,l){let f=0;for(const m of u)f+=Math.max(o,Math.min(l,m[1]))-Math.max(o,Math.min(l,m[0]));return f}function D4(u,o,l){const f=[{fixed:-1,stretch:0}];for(const[m,x]of u){const b=f[f.length-1];f.push({fixed:m-b.stretch,stretch:b.stretch}),f.push({fixed:m-b.stretch,stretch:b.stretch+(x-m)})}return f.push({fixed:o+P_,stretch:l}),f}function lC(u,o,l,f){return u/o*l+f}function cC(u,o,l,f){return u-o*l/f}function $ie(u,o,l,f){const m=o+u.positionedLines[f].lineOffset;return f===0?l+m/2:l+(m+(o+u.positionedLines[f-1].lineOffset))/2}function qie(u,o=1,l=!1){let f=1/0,m=1/0,x=-1/0,b=-1/0;const M=u[0];for(let te=0;te<M.length;te++){const ne=M[te];(!te||ne.x<f)&&(f=ne.x),(!te||ne.y<m)&&(m=ne.y),(!te||ne.x>x)&&(x=ne.x),(!te||ne.y>b)&&(b=ne.y)}const P=Math.min(x-f,b-m);let L=P/2;const N=new wm([],Hie);if(P===0)return new dn(f,m);for(let te=f;te<x;te+=P)for(let ne=m;ne<b;ne+=P)N.push(new jx(te+L,ne+L,L,u));let U=function(te){let ne=0,ce=0,me=0;const ve=te[0];for(let Ie=0,Me=ve.length,ue=Me-1;Ie<Me;ue=Ie++){const we=ve[Ie],Pe=ve[ue],Be=we.x*Pe.y-Pe.x*we.y;ce+=(we.x+Pe.x)*Be,me+=(we.y+Pe.y)*Be,ne+=3*Be}return new jx(ce/ne,me/ne,0,te)}(u),G=N.length;for(;N.length;){const te=N.pop();(te.d>U.d||!U.d)&&(U=te,l&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,G)),te.max-U.d<=o||(L=te.h/2,N.push(new jx(te.p.x-L,te.p.y-L,L,u)),N.push(new jx(te.p.x+L,te.p.y-L,L,u)),N.push(new jx(te.p.x-L,te.p.y+L,L,u)),N.push(new jx(te.p.x+L,te.p.y+L,L,u)),G+=4)}return l&&(console.log(`num probes: ${G}`),console.log(`best distance: ${U.d}`)),U.p}function Hie(u,o){return o.max-u.max}class jx{constructor(o,l,f,m){this.p=new dn(o,l),this.h=f,this.d=function(x,b){let M=!1,P=1/0;for(let L=0;L<b.length;L++){const N=b[L];for(let U=0,G=N.length,te=G-1;U<G;te=U++){const ne=N[U],ce=N[te];ne.y>x.y!=ce.y>x.y&&x.x<(ce.x-ne.x)*(x.y-ne.y)/(ce.y-ne.y)+ne.x&&(M=!M),P=Math.min(P,Xr(x,ne,ce))}}return(M?1:-1)*Math.sqrt(P)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}}const Gie=Object.keys,CP=Number.POSITIVE_INFINITY,Wie=Math.sqrt(2);function P4(u,[o,l]){let f=0,m=0;if(l===CP){o<0&&(o=0);const x=o/Wie;switch(u){case"top-right":case"top-left":m=x-7;break;case"bottom-right":case"bottom-left":m=7-x;break;case"bottom":m=7-o;break;case"top":m=o-7}switch(u){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),l=Math.abs(l),u){case"top-right":case"top-left":case"top":m=l-7;break;case"bottom-right":case"bottom-left":case"bottom":m=7-l}switch(u){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,m]}function uC(u,o,l,f,m,x,b,M,P){if(!o||!o.usvg)return;const L=y4(f),N=y4(m),U=x!=="both"&&x!=="width"||!m4(f)?1:Math.max(1,N.width/L.width),G=x!=="both"&&x!=="height"||!g4(f)?1:Math.max(1,N.height/L.height);l.scaleSelf(U,G);const te=l.toString();b.set(te,l),M.set(te,o);const{imagePosition:ne}=TP(te,o,D_);P.set(te,ne)}function I4(u,o,l,f,m,x,b,M){if(!u)return;const P=function(L,N,U,G,te){if(L.kind==="camera")return L.maxSize;if(L.kind==="composite"){const ne=N.possiblyEvaluate(new Ii(L.maxZoom),U).evaluate(te,{},U),ce=N.possiblyEvaluate(new Ii(L.minZoom),U).evaluate(te,{},U);return Math.max(ne,ce)}return N.possiblyEvaluate(new Ii(G)).evaluate(te,{},U)}(o,l,f,m,x);return u.scaleSelf(P*M*b)}function k4(u,o,l,f,m,x,b,M){return{iconPrimary:I4(u.getPrimary(),o,l,f,m,x,b,M),iconSecondary:I4(u.getSecondary(),o,l,f,m,x,b,M)}}function O4(u,o,l,f){if(!u)return;const m=o.get(l.toString());if(u.imagePrimary=m,f){const x=o.get(f.toString());u.imageSecondary=x}}function Yie(u,o){for(const l in u.horizontal)L4(u.horizontal[l],o);L4(u.vertical,o)}function L4(u,o){if(u){for(const l of u.positionedLines)for(const f of l.positionedGlyphs)if(f.image!==null){const m=f.image.toString();f.rect=o.get(m).paddedRect}}}function AP(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Xie(u,o,l,f,m,x,b,M,P){const L=MP(x.horizontal)||x.vertical,N=l.get("icon-text-fit-padding").evaluate(f,{},m);let U,G=o;return o&&P!=="none"&&(u.allowVerticalPlacement&&x.vertical&&(U=p4(o,x.vertical,P,N,M,b)),L&&(G=p4(o,L,P,N,M,b))),{defaultShapedIcon:G,verticallyShapedIcon:U}}function Zie(u,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve,Ie,Me){let ue=b.textMaxSize.evaluate(o,{},G);ue===void 0?ue=M*b.textScaleFactor:ue*=b.textScaleFactor;const we=u.layers[0].layout,Pe=MP(l.horizontal)||l.vertical,Be=te.name==="globe",Qe=Qs,rt=u.tilePixelRatio*ue/Qe,ot=(nn=u.overscaling,u.zoom>18&&nn>2&&(nn>>=1),Math.max(vn/(512*nn),1)*we.get("symbol-spacing")),ct=we.get("text-padding")*u.tilePixelRatio,At=we.get("icon-padding")*u.tilePixelRatio,Yt=re(we.get("text-max-angle")),Vt=we.get("icon-rotation-alignment")==="map"&&Me!=="point",qt=ot/2;var nn;u.hasAnyIconTextFit===!1&&me!=="none"&&(u.hasAnyIconTextFit=!0);const Et=o.properties?+o.properties[lg]:null,Ut=Et&&u.elevationFeatureIdToIndex?u.elevationFeatureIdToIndex.get(Et):65535,bt=(Ct,on,un)=>{if(on.x<0||on.x>=vn||on.y<0||on.y>=vn)return;let Qn=null;if(Be){const{x:Nn,y:Sn,z:rn}=te.projectTilePoint(on.x,on.y,un);Qn={anchor:new fg(Nn,Sn,rn,0,void 0),up:te.upVector(un,on.x,on.y)}}(function(Nn,Sn,rn,Mr,Hn,Gn,br,zr,Br,Gr,$r,jr,qi,eo,ze,Ve,Pt,mn,Cn,Tn,Kn,gr,ei,ti,Vr,Fi,Ki,ni,To){const to=Nn.addToLineVertexArray(Sn,Mr);let Li,Io,so,Qi,no,Vi,Hr,Ui=0,Eo=0,hr=0,hi=0,ao=-1,Ao=-1;const fo={};let hs=nl("");const Hi=rn?rn.anchor:Sn,os=ni!=="none";let ic=0,Ia=0;if(Br._unevaluatedLayout.getValue("text-radial-offset")===void 0){const fs=Br.layout.get("text-offset").evaluate(Kn,{},Vr);ic=fs[0]*Qs,Ia=fs[1]*Qs}else ic=Br.layout.get("text-radial-offset").evaluate(Kn,{},Vr)*Qs,Ia=CP;if(Nn.allowVerticalPlacement&&Hn.vertical){const fs=Hn.vertical;if(ze)Vi=RP(fs),zr&&(Hr=RP(zr));else{const Rs=Br.layout.get("text-rotate").evaluate(Kn,{},Vr)+90;so=dC(Gr,Hi,Sn,$r,jr,qi,fs,eo,Rs,Ve),zr&&(Qi=dC(Gr,Hi,Sn,$r,jr,qi,zr,mn,Rs))}}if(Gn){const fs=Nn.iconSizeData,Rs=Br.layout.get("icon-rotate").evaluate(Kn,{},Vr),ka=R4(Gn,Rs,ei,os,gr.iconScaleFactor),ml=zr?R4(zr,Rs,ei,os,gr.iconScaleFactor):void 0;Io=dC(Gr,Hi,Sn,$r,jr,qi,Gn,mn,Rs,null),Ui=4*ka.length;let Ya=null;fs.kind==="source"?(Ya=[xp*Br.layout.get("icon-size").evaluate(Kn,{},Vr)*gr.iconScaleFactor],Ya[0]>My&&Ir(`${Nn.layerIds[0]}: Value for "icon-size" is >= ${yw}. Reduce your "icon-size".`)):fs.kind==="composite"&&(Ya=[xp*gr.compositeIconSizes[0].evaluate(Kn,{},Vr)*gr.iconScaleFactor,xp*gr.compositeIconSizes[1].evaluate(Kn,{},Vr)*gr.iconScaleFactor],(Ya[0]>My||Ya[1]>My)&&Ir(`${Nn.layerIds[0]}: Value for "icon-size" is >= ${yw}. Reduce your "icon-size".`)),Nn.addSymbols(Nn.icon,ka,Ya,Tn,Cn,Kn,void 0,rn,Sn,to.lineStartIndex,to.lineLength,-1,ti,Vr,Fi,Ki),ao=Nn.icon.placedSymbolArray.length-1,ml&&(Eo=4*ml.length,Nn.addSymbols(Nn.icon,ml,Ya,Tn,Cn,Kn,Uc.vertical,rn,Sn,to.lineStartIndex,to.lineLength,-1,ti,Vr,Fi,Ki),Ao=Nn.icon.placedSymbolArray.length-1)}for(const fs in Hn.horizontal){const Rs=fs,ka=Hn.horizontal[Rs];Li||(hs=nl(ka.text),ze?no=RP(ka):Li=dC(Gr,Hi,Sn,$r,jr,qi,ka,eo,Br.layout.get("text-rotate").evaluate(Kn,{},Vr),Ve));const ml=ka.positionedLines.length===1;if(hr+=z4(Nn,rn,Sn,ka,br,Br,ze,Kn,Ve,to,Hn.vertical?Uc.horizontal:Uc.horizontalOnly,ml?Gie(Hn.horizontal):[Rs],fo,ao,gr,ti,Vr,Fi),ml)break}Hn.vertical&&(hi+=z4(Nn,rn,Sn,Hn.vertical,br,Br,ze,Kn,Ve,to,Uc.vertical,["vertical"],fo,Ao,gr,ti,Vr,Fi));let da=-1;const oc=(fs,Rs)=>fs?Math.max(fs,Rs):Rs;da=oc(no,da),da=oc(Vi,da),da=oc(Hr,da);const bp=da>-1?1:0;Nn.glyphOffsetArray.length>=65535&&Ir("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kn.sortKey!==void 0&&Nn.addToSortKeyRanges(Nn.symbolInstances.length,Kn.sortKey),Nn.symbolInstances.emplaceBack(Sn.x,Sn.y,Hi.x,Hi.y,Hi.z,fo.right>=0?fo.right:-1,fo.center>=0?fo.center:-1,fo.left>=0?fo.left:-1,fo.vertical>=0?fo.vertical:-1,ao,Ao,hs,Li!==void 0?Li:Nn.collisionBoxArray.length,Li!==void 0?Li+1:Nn.collisionBoxArray.length,so!==void 0?so:Nn.collisionBoxArray.length,so!==void 0?so+1:Nn.collisionBoxArray.length,Io!==void 0?Io:Nn.collisionBoxArray.length,Io!==void 0?Io+1:Nn.collisionBoxArray.length,Qi||Nn.collisionBoxArray.length,Qi?Qi+1:Nn.collisionBoxArray.length,$r,hr,hi,Ui,Eo,bp,0,ic,Ia,da,0,os?1:0,To)})(u,on,Qn,Ct,l,f,x,m,u.layers[0],u.collisionBoxArray,o.index,o.sourceLayerIndex,u.index,ct,Ie,L,0,At,Vt,ve,o,b,N,U,G,ne,ce,me,Ut)};if(Me==="line")for(const Ct of p(o.geometry,0,0,vn,vn)){const on=Uie(Ct,ot,Yt,l.vertical||Pe,f,Qe,rt,u.overscaling,vn);for(const un of on)Pe&&Kie(u,Pe.text,qt,un)||bt(Ct,un,G)}else if(Me==="line-center"){for(const Ct of o.geometry)if(Ct.length>1){const on=Vie(Ct,Yt,l.vertical||Pe,f,Qe,rt);on&&bt(Ct,on,G)}}else if(o.type==="Polygon")for(const Ct of _x(o.geometry,0)){const on=qie(Ct,16);bt(Ct[0],new fg(on.x,on.y,0,0,void 0),G)}else if(o.type==="LineString")for(const Ct of o.geometry)bt(Ct,new fg(Ct[0].x,Ct[0].y,0,0,void 0),G);else if(o.type==="Point")for(const Ct of o.geometry)for(const on of Ct)bt([on],new fg(on.x,on.y,0,0,void 0),G)}const yw=255,My=yw*xp;function z4(u,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me,ve){const Ie=function(we,Pe,Be,Qe,rt,ot,ct,At){const Yt=[];if(Pe.positionedLines.length===0)return Yt;const Vt=Qe.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,qt=function(Ct){const on=Ct[0],un=Ct[1],Qn=on*un;return Qn>0?[on,-un]:Qn<0?[-on,un]:on===0?[un,on]:[un,-on]}(Be);let nn=Math.abs(Pe.top-Pe.bottom);for(const Ct of Pe.positionedLines)nn-=Ct.lineOffset;const Et=Pe.positionedLines.length,Ut=nn/Et;let bt=Pe.top-Be[1];for(let Ct=0;Ct<Et;++Ct){const on=Pe.positionedLines[Ct];bt=$ie(Pe,Ut,bt,Ct);for(const un of on.positionedGlyphs){if(!un.rect)continue;const Qn=un.rect||{};let Nn=Fie+1,Sn=!0,rn=1,Mr=0;if(un.image){const Kn=ct.get(un.image.toString());if(!Kn)continue;if(Kn.sdf){Ir("SDF images are not supported in formatted text and will be ignored.");continue}Sn=!1,rn=Kn.pixelRatio,Nn=D_/rn}const Hn=(rt||At)&&un.vertical,Gn=un.metrics.advance*un.scale/2,br=un.metrics,zr=un.rect;if(zr===null)continue;At&&Pe.verticalizable&&(Mr=un.image?Gn-un.metrics.width*un.scale/2:0);const Br=rt?[un.x+Gn,un.y]:[0,0];let Gr=[0,0],$r=[0,0],jr=!1;rt||(Hn?($r=[un.x+Gn+qt[0],un.y+qt[1]-Mr],jr=!0):Gr=[un.x+Gn+Be[0],un.y+Be[1]-Mr]);const qi=zr.w*un.scale/(rn*(un.localGlyph?gf:1)),eo=zr.h*un.scale/(rn*(un.localGlyph?gf:1));let ze,Ve,Pt,mn;if(Hn){const Kn=un.y-bt,gr=new dn(-Gn,Gn-Kn),ei=-Math.PI/2,ti=new dn(...$r);ze=new dn(-Gn+Gr[0],Gr[1]),ze._rotateAround(ei,gr)._add(ti),ze.x+=-Kn+Gn,ze.y-=(br.left-Nn)*un.scale;const Vr=un.image?br.advance*un.scale:Qs*un.scale,Fi=String.fromCodePoint(un.glyph);Pie(Fi)?ze.x+=(1-Nn)*un.scale:Iie(Fi)?ze.x+=Vr-br.height*un.scale+(-Nn-1)*un.scale:ze.x+=un.image||br.width+2*Nn===zr.w&&br.height+2*Nn===zr.h?(Vr-eo)/2:(Vr-(br.height+2*Nn)*un.scale)/2,Ve=new dn(ze.x,ze.y-qi),Pt=new dn(ze.x+eo,ze.y),mn=new dn(ze.x+eo,ze.y-qi)}else{const Kn=(br.left-Nn)*un.scale-Gn+Gr[0],gr=(-br.top-Nn)*un.scale+Gr[1],ei=Kn+qi,ti=gr+eo;ze=new dn(Kn,gr),Ve=new dn(ei,gr),Pt=new dn(Kn,ti),mn=new dn(ei,ti)}if(Vt){let Kn;Kn=rt?new dn(0,0):jr?new dn(qt[0],qt[1]):new dn(Be[0],Be[1]),ze._rotateAround(Vt,Kn),Ve._rotateAround(Vt,Kn),Pt._rotateAround(Vt,Kn),mn._rotateAround(Vt,Kn)}const Cn=new dn(0,0),Tn=new dn(0,0);Yt.push({tl:ze,tr:Ve,bl:Pt,br:mn,texPrimary:Qn,texSecondary:void 0,writingMode:Pe.writingMode,glyphOffset:Br,sectionIndex:un.sectionIndex,isSDF:Sn,pixelOffsetTL:Cn,pixelOffsetBR:Tn,minFontScaleX:0,minFontScaleY:0})}}return Yt}(0,f,P,x,b,M,m,u.allowVerticalPlacement),Me=u.textSizeData;let ue=null;Me.kind==="source"?(ue=[xp*x.layout.get("text-size").evaluate(M,{},me)*ne.textScaleFactor],ue[0]>My&&Ir(`${u.layerIds[0]}: Value for "text-size" is >= ${yw}. Reduce your "text-size".`)):Me.kind==="composite"&&(ue=[xp*ne.compositeTextSizes[0].evaluate(M,{},me)*ne.textScaleFactor,xp*ne.compositeTextSizes[1].evaluate(M,{},me)*ne.textScaleFactor],(ue[0]>My||ue[1]>My)&&Ir(`${u.layerIds[0]}: Value for "text-size" is >= ${yw}. Reduce your "text-size".`)),u.addSymbols(u.text,Ie,ue,P,b,M,N,o,l,L.lineStartIndex,L.lineLength,te,ce,me,ve,!1);for(const we of U)G[we]=u.text.placedSymbolArray.length-1;return 4*Ie.length}function MP(u){for(const o in u)return u[o];return null}function dC(u,o,l,f,m,x,b,M,P,L){let N=b.top,U=b.bottom,G=b.left,te=b.right;if(f4(b)&&b.collisionPadding){const ne=b.collisionPadding;G-=ne[0],N-=ne[1],te+=ne[2],U+=ne[3]}if(P){const ne=new dn(G,N),ce=new dn(te,N),me=new dn(G,U),ve=new dn(te,U),Ie=re(P);let Me=new dn(0,0);L&&(Me=new dn(L[0],L[1])),ne._rotateAround(Ie,Me),ce._rotateAround(Ie,Me),me._rotateAround(Ie,Me),ve._rotateAround(Ie,Me),G=Math.min(ne.x,ce.x,me.x,ve.x),te=Math.max(ne.x,ce.x,me.x,ve.x),N=Math.min(ne.y,ce.y,me.y,ve.y),U=Math.max(ne.y,ce.y,me.y,ve.y)}return u.emplaceBack(o.x,o.y,o.z,l.x,l.y,G,N,te,U,M,f,m,x),u.length-1}function RP(u){f4(u)&&u.collisionPadding&&(u.top-=u.collisionPadding[1],u.bottom+=u.collisionPadding[3]);const o=u.bottom-u.top;return o>0?Math.max(10,o):null}function Kie(u,o,l,f){const m=u.compareText;if(o in m){const x=m[o];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<l)return!0}else m[o]=[];return m[o].push(f),!1}function F4(u,o){const l=u.fovAboveCenter,f=u.elevation?u.elevation.getMinElevationBelowMSL()*o:0,m=(u._camera.position[2]*u.worldSize-f)/Math.cos(u._pitch),x=Math.sin(l)*m/Math.sin(Math.max(Math.PI/2-u._pitch-l,.01));let b=Math.sin(u._pitch)*x+m;const M=m*(1/u._horizonShift);if(!u.elevation||u.elevation.exaggeration()===0){let P=Math.max(u.zoom-17,0);u.isOrthographic&&(P/=10),b*=1+P}return Math.min(1.01*b,M)}function vw(u,o){if(!o.isReprojectedInTileSpace)return{scale:1<<u.z,x:u.x,y:u.y,x2:u.x+1,y2:u.y+1,projection:o};const l=Math.pow(2,-u.z),f=u.x*l,m=(u.x+1)*l,x=u.y*l,b=(u.y+1)*l,M=Ze(f),P=Ze(m),L=et(x),N=et(b),U=o.project(M,L),G=o.project(P,L),te=o.project(P,N),ne=o.project(M,N);let ce=Math.min(U.x,G.x,te.x,ne.x),me=Math.min(U.y,G.y,te.y,ne.y),ve=Math.max(U.x,G.x,te.x,ne.x),Ie=Math.max(U.y,G.y,te.y,ne.y);const Me=l/16;function ue(Pe,Be,Qe,rt,ot,ct){const At=(Qe+ot)/2,Yt=(rt+ct)/2,Vt=o.project(Ze(At),et(Yt)),qt=Math.max(0,ce-Vt.x,me-Vt.y,Vt.x-ve,Vt.y-Ie);ce=Math.min(ce,Vt.x),ve=Math.max(ve,Vt.x),me=Math.min(me,Vt.y),Ie=Math.max(Ie,Vt.y),qt>Me&&(ue(Pe,Vt,Qe,rt,At,Yt),ue(Vt,Be,At,Yt,ot,ct))}ue(U,G,f,x,m,x),ue(G,te,m,x,m,b),ue(te,ne,m,b,f,b),ue(ne,U,f,b,f,x),ce-=Me,me-=Me,ve+=Me,Ie+=Me;const we=1/Math.max(ve-ce,Ie-me);return{scale:we,x:ce*we,y:me*we,x2:ve*we,y2:Ie*we,projection:o}}function B4(u,{x:o,y:l},f=0){return new dn(((o-f)*u.scale-u.x)*vn,(l*u.scale-u.y)*vn)}const Qie=F(new Float32Array(16));class Ry{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,l){return{x:0,y:0,z:0}}unproject(o,l){return new fe(0,0)}projectTilePoint(o,l,f){return{x:o,y:l,z:0}}locationPoint(o,l,f,m=!0){return o._coordinatePoint(o.locationCoordinate(l,f),m)}pixelsPerMeter(o,l){return Fe(1,o)*l}pixelSpaceConversion(o,l,f){return 1}farthestPixelDistance(o){return F4(o,o.pixelsPerMeter)}pointCoordinate(o,l,f,m){const x=o.horizonLineFromTop(!1),b=new dn(l,Math.max(x,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(b,m))}pointCoordinate3D(o,l,f){const m=new dn(l,f);if(o.elevation)return o.elevation.pointCoordinate(m);{const x=this.pointCoordinate(o,m.x,m.y,0);return[x.x,x.y,x.z]}}isPointAboveHorizon(o,l){if(o.elevation&&o.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(o,l.x,l.y);const f=o.horizonLineFromTop();return l.y<f}createInversionMatrix(o,l){return Qie}createTileMatrix(o,l,f){let m,x,b;const M=f.canonical,P=F(new Float64Array(16));if(this.isReprojectedInTileSpace){const L=vw(M,this);m=1,x=L.x+f.wrap*L.scale,b=L.y,Z(P,P,[m/L.scale,m/L.scale,o.pixelsPerMeter/l])}else m=l/o.zoomScale(M.z),x=(M.x+Math.pow(2,M.z)*f.wrap)*m,b=M.y*m;return W(P,P,[x,b,0]),Z(P,P,[m/vn,m/vn,1]),P}upVector(o,l,f){return[0,0,1]}upVectorScale(o,l,f){return{metersToTile:1}}}class Jie extends Ry{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[l,f]=this.parallels=o.parallels||[29.5,45.5],m=Math.sin(re(l));this.n=(m+Math.sin(re(f)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(o,l){const{n:f,c:m,r0:x}=this,b=re(o-this.center[0]),M=re(l),P=Math.sqrt(m-2*f*Math.sin(M))/f;return{x:P*Math.sin(b*f),y:P*Math.cos(b*f)-x,z:0}}unproject(o,l){const{n:f,c:m,r0:x}=this,b=x+l;let M=Math.atan2(o,Math.abs(b))*Math.sign(b);b*f<0&&(M-=Math.PI*Math.sign(o)*Math.sign(b));const P=re(this.center[0])*f;M=at(M,-Math.PI-P,Math.PI-P);const L=We(le(M/f)+this.center[0],-180,180),N=Math.asin(We((m-(o*o+b*b)*f*f)/(2*f),-1,1)),U=We(le(N),-85.051129,ht);return new fe(L,U)}}const _w=1.340264,xw=-.081106,bw=893e-6,ww=.003796,hC=Math.sqrt(3)/2;class eoe extends Ry{project(o,l){l=l/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(hC*Math.sin(l)),m=f*f,x=m*m*m;return{x:.5*(o*Math.cos(f)/(hC*(_w+3*xw*m+x*(7*bw+9*ww*m)))/Math.PI+.5),y:1-.5*(f*(_w+xw*m+x*(bw+ww*m))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let f=l=(2*(1-l)-1)*Math.PI,m=f*f,x=m*m*m;for(let N,U,G,te=0;te<12&&(U=f*(_w+xw*m+x*(bw+ww*m))-l,G=_w+3*xw*m+x*(7*bw+9*ww*m),N=U/G,f=We(f-N,-Math.PI/3,Math.PI/3),m=f*f,x=m*m*m,!(Math.abs(N)<1e-12));++te);const b=hC*o*(_w+3*xw*m+x*(7*bw+9*ww*m))/Math.cos(f),M=Math.asin(Math.sin(f)/hC),P=We(180*b/Math.PI,-180,180),L=We(180*M/Math.PI,-85.051129,ht);return new fe(P,L)}}class toe extends Ry{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){return{x:.5+o/360,y:.5-l/360,z:0}}unproject(o,l){const f=360*(o-.5),m=We(360*(.5-l),-85.051129,ht);return new fe(f,m)}}const Vx=Math.PI/2;function fC(u){return Math.tan((Vx+u)/2)}class noe extends Ry{constructor(o){super(o),this.center=o.center||[0,30];const[l,f]=this.parallels=o.parallels||[30,30];let m=re(l),x=re(f);this.southernCenter=m+x<0,this.southernCenter&&(m=-m,x=-x);const b=Math.cos(m),M=fC(m);this.n=m===x?Math.sin(m):Math.log(b/Math.cos(x))/Math.log(fC(x)/M),this.f=b*Math.pow(fC(m),this.n)/this.n}project(o,l){l=re(l),this.southernCenter&&(l=-l),o=re(o-this.center[0]);const f=1e-6,{n:m,f:x}=this;x>0?l<-Vx+f&&(l=-Vx+f):l>Vx-f&&(l=Vx-f);const b=x/Math.pow(fC(l),m);let M=b*Math.sin(m*o),P=x-b*Math.cos(m*o);return M=.5*(M/Math.PI+.5),P=.5*(P/Math.PI+.5),{x:M,y:this.southernCenter?P:1-P,z:0}}unproject(o,l){o=(2*o-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:f,f:m}=this,x=m-l,b=Math.sign(x),M=Math.sign(f)*Math.sqrt(o*o+x*x);let P=Math.atan2(o,Math.abs(x))*b;x*f<0&&(P-=Math.PI*Math.sign(o)*b);const L=We(le(P/f)+this.center[0],-180,180),N=We(le(2*Math.atan(Math.pow(m/M,1/f))-Vx),-85.051129,ht);return new fe(L,this.southernCenter?-N:N)}}class N4 extends Ry{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,l){return{x:$e(o),y:Ue(l),z:0}}unproject(o,l){const f=Ze(o),m=et(l);return new fe(f,m)}}const j4=re(ht);class roe extends Ry{project(o,l){const f=(l=re(l))*l,m=f*f;return{x:.5*((o=re(o))*(.8707-.131979*f+m*(m*(.003971*f-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+f*(.015085+m*(.028874*f-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let f=l=(2*(1-l)-1)*Math.PI,m=25,x=0,b=f*f;do{b=f*f;const L=b*b;x=(f*(1.007226+b*(.015085+L*(.028874*b-.044475-.005916*L)))-l)/(1.007226+b*(.045255+L*(.259866*b-.311325-.005916*11*L))),f=We(f-x,-j4,j4)}while(Math.abs(x)>1e-6&&--m>0);b=f*f;const M=We(le(o/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),P=le(f);return new fe(M,P)}}const V4=re(ht);class ioe extends Ry{project(o,l){l=re(l),o=re(o);const f=Math.cos(l),m=2/Math.PI,x=Math.acos(f*Math.cos(o/2)),b=Math.sin(x)/x,M=.5*(o*m+2*f*Math.sin(o/2)/b)||0,P=.5*(l+Math.sin(l)/b)||0;return{x:.5*(M/Math.PI+.5),y:1-.5*(P/Math.PI+1),z:0}}unproject(o,l){let f=o=(2*o-.5)*Math.PI,m=l=(2*(1-l)-1)*Math.PI,x=25;const b=1e-6;let M=0,P=0;do{const L=Math.cos(m),N=Math.sin(m),U=2*N*L,G=N*N,te=L*L,ne=Math.cos(f/2),ce=Math.sin(f/2),me=2*ne*ce,ve=ce*ce,Ie=1-te*ne*ne,Me=Ie?1/Ie:0,ue=Ie?Math.acos(L*ne)*Math.sqrt(1/Ie):0,we=.5*(2*ue*L*ce+2*f/Math.PI)-o,Pe=.5*(ue*N+m)-l,Be=.5*Me*(te*ve+ue*L*ne*G)+1/Math.PI,Qe=Me*(me*U/4-ue*N*ce),rt=.125*Me*(U*ce-ue*N*te*me),ot=.5*Me*(G*ne+ue*ve*L)+.5,ct=Qe*rt-ot*Be;M=(Pe*Qe-we*ot)/ct,P=(we*rt-Pe*Be)/ct,f=We(f-M,-Math.PI,Math.PI),m=We(m-P,-V4,V4)}while((Math.abs(M)>b||Math.abs(P)>b)&&--x>0);return new fe(le(f),le(m))}}class U4 extends Ry{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(re(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){const{scale:f,cosPhi:m}=this;return{x:re(o)*m*f+.5,y:-Math.sin(re(l))/m*f+.5,z:0}}unproject(o,l){const{scale:f,cosPhi:m}=this,x=-(l-.5)/f,b=We(le((o-.5)/f)/m,-180,180),M=Math.asin(We(x*m,-1,1)),P=We(le(M),-85.051129,ht);return new fe(b,P)}}class ooe extends N4{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,l,f){const m=my(o,l,f);return yn(m,m,ig(Hu(f))),{x:m[0],y:m[1],z:m[2]}}locationPoint(o,l,f){const m=pe(l.lat,l.lng),x=It([],m),b=f?o._centerAltitude+f:o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(l),o._centerAltitude):o._centerAltitude;Je(m,m,x,Fe(1,0)*vn*b);const M=F(new Float64Array(16));return V(M,o.pixelMatrix,o.globeMatrix),yn(m,m,M),new dn(m[0],m[1])}pixelsPerMeter(o,l){return Fe(1,0)*l}pixelSpaceConversion(o,l,f){const m=Fe(1,o)*l,x=ar(Fe(1,45)*l,m,f);return this.pixelsPerMeter(o,l)/x}createTileMatrix(o,l,f){const m=cx(Hu(f.canonical));return V(new Float64Array(16),o.globeMatrix,m)}createInversionMatrix(o,l){const{center:f}=o,m=ig(Hu(l));return ee(m,m,re(f.lng)),K(m,m,re(f.lat)),Z(m,m,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(o,l,f,m){return ng(o,l,f,!0)||new _t(0,0)}pointCoordinate3D(o,l,f){const m=this.pointCoordinate(o,l,f,0);return[m.x,m.y,m.z]}isPointAboveHorizon(o,l){return!ng(o,l.x,l.y,!1)}farthestPixelDistance(o){const l=function(m,x){const b=m.cameraToCenterDistance,M=m._centerAltitude*x,P=m._camera,L=m._camera.forward(),N=He([],Oe([],L,-b),[0,0,M]),U=m.worldSize/(2*Math.PI),G=[0,0,-U],te=m.width/m.height,ne=Math.tan(m.fovAboveCenter),ce=Oe([],P.up(),ne),me=Oe([],P.right(),ne*te),ve=It([],He([],He([],L,ce),me)),Ie=[];let Me;if(new Pl(N,ve).closestPointOnSphere(G,U,Ie)){const ue=He([],Ie,G),we=Bt([],ue,N);Me=Math.cos(m.fovAboveCenter)*Ae(we)}else{const ue=Bt([],N,G),we=Bt([],G,N);It(we,we);const Pe=Ae(ue)-U;Me=Math.sqrt(Pe*(Pe+2*U));const Be=Math.acos(Me/(U+Pe))-Math.acos(vt(L,we));Me*=Math.cos(Be)}return 1.01*Me}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=af(o.zoom);if(f>0){const m=F4(o,Fe(1,o.center.lat)*o.worldSize),x=o.worldSize/(2*Math.PI),b=Math.max(o.width,o.height)/o.worldSize*Math.PI;return ar(l,m+x*(1-Math.cos(b)),Math.pow(f,10))}return l}upVector(o,l,f){return my(l,f,o,1)}upVectorScale(o){return{metersToTile:qu(d_(Hu(o)))}}}function $4(u){const o=u.parallels,l=!!o&&Math.abs(o[0]+o[1])<.01;switch(u.name){case"mercator":return new N4(u);case"equirectangular":return new toe(u);case"naturalEarth":return new roe(u);case"equalEarth":return new eoe(u);case"winkelTripel":return new ioe(u);case"albers":return l?new U4(u):new Jie(u);case"lambertConformalConic":return l?new U4(u):new noe(u);case"globe":return new ooe(u)}throw new Error(`Invalid projection name: ${u.name}`)}const soe=$d.VectorTileFeature.types,aoe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pC(u,o,l,f,m,x,b,M,P,L,N,U,G){const te=M?Math.min(My,Math.round(M[0])):0,ne=M?Math.min(My,Math.round(M[1])):0;u.emplaceBack(o,l,Math.round(32*f),Math.round(32*m),x,b,(te<<1)+(P?1:0),ne,16*L,16*N,256*U,256*G)}function mC(u,o,l){u.emplaceBack(o,l)}function gC(u,o,l,f,m,x,b){u.emplaceBack(o,l,f,m,x,b)}function yC(u,o,l,f,m){u.emplaceBack(o,l,f,m),u.emplaceBack(o,l,f,m),u.emplaceBack(o,l,f,m),u.emplaceBack(o,l,f,m)}function loe(u){for(const o of u.sections)if(Fu(o.text))return!0;return!1}class DP{constructor(o){this.layoutVertexArray=new ju,this.indexArray=new Do,this.programConfigurations=o,this.segments=new ho,this.dynamicLayoutVertexArray=new Bc,this.opacityVertexArray=new Ld,this.placedSymbolArray=new Jv,this.iconTransitioningVertexArray=new Vu,this.globeExtVertexArray=new Aa,this.zOffsetVertexArray=new Jh}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(o,l,f,m,x){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,wie.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,Tie.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,aoe,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,Cie.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,Sie.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||x)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,Eie.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}In(DP,"SymbolBuffers");class PP{constructor(o,l,f){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new f,this.segments=new ho,this.collisionVertexArray=new hy,this.collisionVertexArrayExt=new Bc}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Aie.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,Mie.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}In(PP,"CollisionBuffers");class vC{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.lut=o.lut,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(b=>b.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=F([]),this.placementViewportMatrix=F([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=v4(this.zoom,l["text-size"]),this.iconSizeData=v4(this.zoom,l["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&m.constantOr(1)!==void 0,this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(b=>Uc[b]),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new DP(new Vd(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("text")||o.startsWith("symbol"))),this.icon=new DP(new Vd(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("icon")||o.startsWith("symbol"))),this.glyphOffsetArray=new Ms,this.lineVertexArray=new Xs,this.symbolInstances=new e_}calculateGlyphDependencies(o,l,f,m,x){for(const b of o){const M=b.codePointAt(0);if(M===void 0)break;if(l[M]=!0,m&&x&&M<=65535){const P=fw[b];P&&(l[P.charCodeAt(0)]=!0)}}}updateFootprints(o,l){}updateReplacement(o,l){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const f=l.getReplacementRegionsForTile(o.toUnwrapped(),!0);return!Sy(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(o,l,f,m){const x=this.layers[0],b=x.layout,M=this.projection.name==="globe",P=b.get("text-font"),L=b.get("text-field"),N=b.get("icon-image"),[U,G]=b.get("icon-size-scale-range"),te=We(l.scaleFactor||1,U,G),ne=(L.value.kind!=="constant"||L.value.value instanceof sa&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),ce=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,me=b.get("symbol-sort-key");if(this.features=[],!ne&&!ce)return;const ve=l.iconDependencies,Ie=l.glyphDependencies,Me=l.availableImages,ue=new Ii(this.zoom);for(const{feature:we,id:Pe,index:Be,sourceLayerIndex:Qe}of o){const rt=x._featureFilter.needGeometry,ot=$n(we,rt);if(!x._featureFilter.filter(ue,ot,f))continue;if(rt||(ot.geometry=Fn(we,f,m)),M&&we.type!==1&&f.z<=5){const qt=ot.geometry,nn=.98078528056,Et=(Ut,bt)=>vt(my(Ut.x,Ut.y,f,1),my(bt.x,bt.y,f,1))<nn;for(let Ut=0;Ut<qt.length;Ut++)qt[Ut]=Ht(qt[Ut],Et)}let ct,At;if(ne){const qt=x.getValueAndResolveTokens("text-field",ot,f,Me),nn=sa.factory(qt);loe(nn)&&(this.hasRTLText=!0),(!this.hasRTLText||Dd()==="unavailable"||this.hasRTLText&&Zl.isParsed())&&(ct=Die(nn,x,ot))}if(ce){const qt=x.getValueAndResolveTokens("icon-image",ot,f,Me);At=typeof qt=="string"?Ta.build(qt):qt}if(!ct&&!At)continue;const Yt=this.sortFeaturesByKey?me.evaluate(ot,{},f):void 0,Vt={id:Pe,text:ct,icon:At,index:Be,sourceLayerIndex:Qe,geometry:ot.geometry,properties:we.properties,type:soe[we.type],sortKey:Yt};if(this.features.push(Vt),At){const qt=this.layers[0]._unevaluatedLayout._values,{iconPrimary:nn,iconSecondary:Et}=k4(At,this.iconSizeData,qt["icon-size"],f,this.zoom,Vt,this.pixelRatio,te),Ut=nn.id.toString();if(ve.has(Ut)?ve.get(Ut).push(nn):ve.set(Ut,[nn]),Et){const bt=Et.id.toString();ve.has(bt)?ve.get(bt).push(Et):ve.set(bt,[Et])}}if(ct){const qt=P.evaluate(ot,{},f).join(","),nn=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Uc.vertical)>=0;for(const Et of ct.sections)if(Et.image){const Ut=Et.image.getPrimary().scaleSelf(this.pixelRatio),bt=Ut.id.toString(),Ct=ve.get(bt)||[];Ct.push(Ut),ve.set(bt,Ct)}else{const Ut=Fm(ct.toString()),bt=Et.fontStack||qt,Ct=Ie[bt]=Ie[bt]||{};this.calculateGlyphDependencies(Et.text,Ct,nn,this.allowVerticalPlacement,Ut)}}}if(b.get("symbol-placement")==="line"&&(this.features=function(we){const Pe={},Be={},Qe=[];let rt=0;function ot(Vt){Qe.push(we[Vt]),rt++}function ct(Vt,qt,nn){const Et=Be[Vt];return delete Be[Vt],Be[qt]=Et,Qe[Et].geometry[0].pop(),Qe[Et].geometry[0]=Qe[Et].geometry[0].concat(nn[0]),Et}function At(Vt,qt,nn){const Et=Pe[qt];return delete Pe[qt],Pe[Vt]=Et,Qe[Et].geometry[0].shift(),Qe[Et].geometry[0]=nn[0].concat(Qe[Et].geometry[0]),Et}function Yt(Vt,qt,nn){const Et=nn?qt[0][qt[0].length-1]:qt[0][0];return`${Vt}:${Et.x}:${Et.y}`}for(let Vt=0;Vt<we.length;Vt++){const qt=we[Vt],nn=qt.geometry,Et=qt.text?qt.text.toString():null;if(!Et){ot(Vt);continue}const Ut=Yt(Et,nn),bt=Yt(Et,nn,!0);if(Ut in Be&&bt in Pe&&Be[Ut]!==Pe[bt]){const Ct=At(Ut,bt,nn),on=ct(Ut,bt,Qe[Ct].geometry);delete Pe[Ut],delete Be[bt],Be[Yt(Et,Qe[on].geometry,!0)]=on,Qe[Ct].geometry=null}else Ut in Be?ct(Ut,bt,nn):bt in Pe?At(Ut,bt,nn):(ot(Vt),Pe[Ut]=rt-1,Be[bt]=rt-1)}return Qe.filter(Vt=>Vt.geometry)}(this.features)),b.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",l.elevationFeatures){!this.elevationFeatures&&l.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const we of l.elevationFeatures)this.elevationFeatureIdToIndex.set(we.id,this.elevationFeatures.length),this.elevationFeatures.push(we)}}else b.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((we,Pe)=>we.sortKey-Pe.sortKey)}update(o,l,f,m,x,b,M){this.text.programConfigurations.updatePaintArrays(o,l,x,f,m,b,M),this.icon.programConfigurations.updatePaintArrays(o,l,x,f,m,b,M)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let o=!1;for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);if(f.elevationFeatureIndex===65535)continue;const m=this.elevationFeatures[f.elevationFeatureIndex];if(m){const x=.05+m.pointElevation(new dn(f.tileAnchorX,f.tileAnchorY));f.zOffset!==x&&(o=!0,f.zOffset=x)}}o&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const o=(x,b,M)=>{f+=b,f>x.length&&x.resize(f);for(let P=-b;P<0;P++)x.emplace(P+f,M)},l=(x,b,M)=>{m+=b,m>x.length&&x.resize(m);for(let P=-b;P<0;P++)x.emplace(P+m,M)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,m=0;for(let x=0;x<this.symbolInstances.length;x++){const b=this.symbolInstances.get(x),{numHorizontalGlyphVertices:M,numVerticalGlyphVertices:P,numIconVertices:L}=b,N=b.zOffset,U=L>0;if((M>0||P>0)&&(o(this.text.zOffsetVertexArray,M,N),o(this.text.zOffsetVertexArray,P,N)),U){const{placedIconSymbolIndex:G,verticalPlacedIconSymbolIndex:te}=b;G>=0&&l(this.icon.zOffsetVertexArray,L,N),te>=0&&l(this.icon.zOffsetVertexArray,b.numVerticalIconVertices,N)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=$4(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:m,y:x}of l)this.lineVertexArray.emplaceBack(m,x);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce,me){const ve=o.indexArray,Ie=o.layoutVertexArray,Me=o.globeExtVertexArray,ue=o.segments.prepareSegment(4*l.length,Ie,ve,this.canOverlap?b.sortKey:void 0),we=this.glyphOffsetArray.length,Pe=ue.vertexLength,Be=this.allowVerticalPlacement&&M===Uc.vertical?Math.PI/2:0,Qe=b.text&&b.text.sections;for(let ot=0;ot<l.length;ot++){const{tl:ct,tr:At,bl:Yt,br:Vt,texPrimary:qt,texSecondary:nn,pixelOffsetTL:Et,pixelOffsetBR:Ut,minFontScaleX:bt,minFontScaleY:Ct,glyphOffset:on,isSDF:un,sectionIndex:Qn}=l[ot],Nn=ue.vertexLength,Sn=on[1];if(pC(Ie,L.x,L.y,ct.x,Sn+ct.y,qt.x,qt.y,f,un,Et.x,Et.y,bt,Ct),pC(Ie,L.x,L.y,At.x,Sn+At.y,qt.x+qt.w,qt.y,f,un,Ut.x,Et.y,bt,Ct),pC(Ie,L.x,L.y,Yt.x,Sn+Yt.y,qt.x,qt.y+qt.h,f,un,Et.x,Ut.y,bt,Ct),pC(Ie,L.x,L.y,Vt.x,Sn+Vt.y,qt.x+qt.w,qt.y+qt.h,f,un,Ut.x,Ut.y,bt,Ct),P){const{x:rn,y:Mr,z:Hn}=P.anchor,[Gn,br,zr]=P.up;gC(Me,rn,Mr,Hn,Gn,br,zr),gC(Me,rn,Mr,Hn,Gn,br,zr),gC(Me,rn,Mr,Hn,Gn,br,zr),gC(Me,rn,Mr,Hn,Gn,br,zr),yC(o.dynamicLayoutVertexArray,rn,Mr,Hn,Be)}else yC(o.dynamicLayoutVertexArray,L.x,L.y,L.z,Be);if(me){const rn=nn||qt;mC(o.iconTransitioningVertexArray,rn.x,rn.y),mC(o.iconTransitioningVertexArray,rn.x+rn.w,rn.y),mC(o.iconTransitioningVertexArray,rn.x,rn.y+rn.h),mC(o.iconTransitioningVertexArray,rn.x+rn.w,rn.y+rn.h)}ve.emplaceBack(Nn,Nn+1,Nn+2),ve.emplaceBack(Nn+1,Nn+2,Nn+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(on[0]),ot!==l.length-1&&Qn===l[ot+1].sectionIndex||o.programConfigurations.populatePaintArrays(Ie.length,b,b.index,{},te,ne,ce,Qe&&Qe[Qn])}const rt=P?P.anchor:L;o.placedSymbolArray.emplaceBack(rt.x,rt.y,rt.z,L.x,L.y,we,this.glyphOffsetArray.length-we,Pe,N,U,L.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],M,0,0,0,G,0)}_commitLayoutVertex(o,l,f,m,x,b,M){o.emplaceBack(l,f,m,x,b,Math.round(M.x),Math.round(M.y))}_addCollisionDebugVertices(o,l,f,m,x,b,M){const P=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),L=P.vertexLength,N=M.tileAnchorX,U=M.tileAnchorY;for(let te=0;te<4;te++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,l,o.padding,M.zOffset),this._commitLayoutVertex(f.layoutVertexArray,m,x,b,N,U,new dn(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,m,x,b,N,U,new dn(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,m,x,b,N,U,new dn(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,m,x,b,N,U,new dn(o.x1,o.y2)),P.vertexLength+=4;const G=f.indexArray;G.emplaceBack(L,L+1),G.emplaceBack(L+1,L+2),G.emplaceBack(L+2,L+3),G.emplaceBack(L+3,L),P.primitiveLength+=4}_addTextDebugCollisionBoxes(o,l,f,m,x,b){for(let M=m;M<x;M++){const P=f.get(M),L=this.getSymbolInstanceTextSize(o,b,l,M);this._addCollisionDebugVertices(P,L,this.textCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(o,l,f,m,x,b){for(let M=m;M<x;M++){const P=f.get(M),L=this.getSymbolInstanceIconSize(o,l,b.placedIconSymbolIndex);this._addCollisionDebugVertices(P,L,this.iconCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,b)}}generateCollisionDebugBuffers(o,l,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new PP(Ml,i4.members,Vu),this.iconCollisionBox=new PP(Ml,i4.members,Vu);const m=mw(this.iconSizeData,o),x=mw(this.textSizeData,o,f);for(let b=0;b<this.symbolInstances.length;b++){const M=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(x,o,l,M.textBoxStartIndex,M.textBoxEndIndex,M),this._addTextDebugCollisionBoxes(x,o,l,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M),this._addIconDebugCollisionBoxes(m,o,l,M.iconBoxStartIndex,M.iconBoxEndIndex,M),this._addIconDebugCollisionBoxes(m,o,l,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M)}}getSymbolInstanceTextSize(o,l,f,m){const x=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:m),b=SP(this.textSizeData,o,x)/Qs;return this.tilePixelRatio*b}getSymbolInstanceIconSize(o,l,f){const m=this.icon.placedSymbolArray.get(f),x=SP(this.iconSizeData,o,m);return this.tilePixelRatio*x}_commitDebugCollisionVertexUpdate(o,l,f,m){o.emplaceBack(l,-f,-f,m),o.emplaceBack(l,f,-f,m),o.emplaceBack(l,f,f,m),o.emplaceBack(l,-f,f,m)}_updateTextDebugCollisionBoxes(o,l,f,m,x,b,M){for(let P=m;P<x;P++){const L=f.get(P),N=this.getSymbolInstanceTextSize(o,b,l,P);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,N,L.padding,b.zOffset)}}_updateIconDebugCollisionBoxes(o,l,f,m,x,b,M){for(let P=m;P<x;P++){const L=f.get(P),N=this.getSymbolInstanceIconSize(o,l,b.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,N,L.padding,b.zOffset)}}updateCollisionDebugBuffers(o,l,f,m){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const x=mw(this.iconSizeData,o,m),b=mw(this.textSizeData,o,f);for(let M=0;M<this.symbolInstances.length;M++){const P=this.symbolInstances.get(M);this._updateTextDebugCollisionBoxes(b,o,l,P.textBoxStartIndex,P.textBoxEndIndex,P,f),this._updateTextDebugCollisionBoxes(b,o,l,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P,f),this._updateIconDebugCollisionBoxes(x,o,l,P.iconBoxStartIndex,P.iconBoxEndIndex,P,m),this._updateIconDebugCollisionBoxes(x,o,l,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex,P,m)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,l,f,m,x,b,M,P,L){const N={};if(l<f){const{x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue,featureIndex:we}=o.get(l);N.textBox={x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue},N.textFeatureIndex=we}if(m<x){const{x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue,featureIndex:we}=o.get(m);N.verticalTextBox={x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue},N.verticalTextFeatureIndex=we}if(b<M){const{x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue,featureIndex:we}=o.get(b);N.iconBox={x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue},N.iconFeatureIndex=we}if(P<L){const{x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue,featureIndex:we}=o.get(P);N.verticalIconBox={x1:U,y1:G,x2:te,y2:ne,padding:ce,projectedAnchorX:me,projectedAnchorY:ve,projectedAnchorZ:Ie,tileAnchorX:Me,tileAnchorY:ue},N.verticalIconFeatureIndex=we}return N}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,l){const f=o.placedSymbolArray.get(l),m=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<m;x+=4)o.indexArray.emplaceBack(x,x+1,x+2),o.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(o),f=Math.cos(o),m=[],x=[],b=[];for(let M=0;M<this.symbolInstances.length;++M){b.push(M);const P=this.symbolInstances.get(M);m.push(0|Math.round(l*P.tileAnchorX+f*P.tileAnchorY)),x.push(P.featureIndex)}return b.sort((M,P)=>m[M]-m[P]||x[P]-x[M]),b}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,l)=>this.symbolInstances.get(l).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:m,centerJustifiedTextSymbolIndex:x,leftJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:M,placedIconSymbolIndex:P,verticalPlacedIconSymbolIndex:L}=f;m>=0&&this.addIndicesForPlacedSymbol(this.text,m),x>=0&&x!==m&&this.addIndicesForPlacedSymbol(this.text,x),b>=0&&b!==x&&b!==m&&this.addIndicesForPlacedSymbol(this.text,b),M>=0&&this.addIndicesForPlacedSymbol(this.text,M),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P),L>=0&&this.addIndicesForPlacedSymbol(this.icon,L)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let q4,H4,IP;In(vC,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),vC.addDynamicAttributes=yC;class G4{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:md,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}In(G4,"FormatSectionOverride",{omit:["defaultValue"]});const kP=()=>IP||(IP={layout:q4||(q4=new yo({"symbol-placement":new pn(pt.layout_symbol["symbol-placement"]),"symbol-spacing":new pn(pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new pn(pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Pn(pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new pn(pt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new pn(pt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new pn(pt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new pn(pt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new pn(pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new pn(pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new pn(pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Pn(pt.layout_symbol["icon-size"]),"icon-size-scale-range":new pn(pt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Pn(pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pn(pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Pn(pt.layout_symbol["icon-image"]),"icon-rotate":new Pn(pt.layout_symbol["icon-rotate"]),"icon-padding":new pn(pt.layout_symbol["icon-padding"]),"icon-keep-upright":new pn(pt.layout_symbol["icon-keep-upright"]),"icon-offset":new Pn(pt.layout_symbol["icon-offset"]),"icon-anchor":new Pn(pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new pn(pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new pn(pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new pn(pt.layout_symbol["text-rotation-alignment"]),"text-field":new Pn(pt.layout_symbol["text-field"]),"text-font":new Pn(pt.layout_symbol["text-font"]),"text-size":new Pn(pt.layout_symbol["text-size"]),"text-size-scale-range":new pn(pt.layout_symbol["text-size-scale-range"]),"text-max-width":new Pn(pt.layout_symbol["text-max-width"]),"text-line-height":new Pn(pt.layout_symbol["text-line-height"]),"text-letter-spacing":new Pn(pt.layout_symbol["text-letter-spacing"]),"text-justify":new Pn(pt.layout_symbol["text-justify"]),"text-radial-offset":new Pn(pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new pn(pt.layout_symbol["text-variable-anchor"]),"text-anchor":new Pn(pt.layout_symbol["text-anchor"]),"text-max-angle":new pn(pt.layout_symbol["text-max-angle"]),"text-writing-mode":new pn(pt.layout_symbol["text-writing-mode"]),"text-rotate":new Pn(pt.layout_symbol["text-rotate"]),"text-padding":new pn(pt.layout_symbol["text-padding"]),"text-keep-upright":new pn(pt.layout_symbol["text-keep-upright"]),"text-transform":new Pn(pt.layout_symbol["text-transform"]),"text-offset":new Pn(pt.layout_symbol["text-offset"]),"text-allow-overlap":new pn(pt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new pn(pt.layout_symbol["text-ignore-placement"]),"text-optional":new pn(pt.layout_symbol["text-optional"]),visibility:new pn(pt.layout_symbol.visibility)})),paint:H4||(H4=new yo({"icon-opacity":new Pn(pt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Pn(pt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Pn(pt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Pn(pt.paint_symbol["text-emissive-strength"]),"icon-color":new Pn(pt.paint_symbol["icon-color"]),"icon-halo-color":new Pn(pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Pn(pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Pn(pt.paint_symbol["icon-halo-blur"]),"icon-translate":new pn(pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new pn(pt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new pn(pt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Pn(pt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Pn(pt.paint_symbol["text-occlusion-opacity"]),"text-color":new Pn(pt.paint_symbol["text-color"],{runtimeType:Fa,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Pn(pt.paint_symbol["text-halo-color"]),"text-halo-width":new Pn(pt.paint_symbol["text-halo-width"]),"text-halo-blur":new Pn(pt.paint_symbol["text-halo-blur"]),"text-translate":new pn(pt.paint_symbol["text-translate"]),"text-translate-anchor":new pn(pt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new pn(pt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new pn(pt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new pn(pt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new pn(pt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Pn(pt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},IP);class _C extends la{constructor(o,l,f,m){super(o,kP(),l,f,m),this._colorAdjustmentMatrix=F([]),this.hasInitialOcclusionOpacityProperties=o.paint!==void 0&&("icon-occlusion-opacity"in o.paint||"text-occlusion-opacity"in o.paint)}recalculate(o,l){super.recalculate(o,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const x of f)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(o,l,f,m){return this._saturation===o&&this._contrast===l&&this._brightnessMin===f&&this._brightnessMax===m||(this._colorAdjustmentMatrix=function(x,b,M,P){x=is(x),b=Oo(b);const L=I(),N=x/3,U=1-2*N,G=[U,N,N,0,N,U,N,0,N,N,U,0,0,0,0,1],te=.5-.5*b,ne=P-M;return V(L,[ne,0,0,0,0,ne,0,0,0,0,ne,0,M,M,M,1],[b,0,0,0,0,b,0,0,0,0,b,0,te,te,te,1]),V(L,L,G),L}(o,l,f,m),this._saturation=o,this._contrast=l,this._brightnessMin=f,this._brightnessMax=m),this._colorAdjustmentMatrix}getValueAndResolveTokens(o,l,f,m){const x=this.layout.get(o).evaluate(l,{},f,m),b=this._unevaluatedLayout._values[o];return b.isDataDriven()||Lc(b.value)||!x?x:function(M,P){return P.replace(/{([^{}]+)}/g,(L,N)=>N in M?String(M[N]):"")}(l.properties,x)}createBucket(o){return new vC(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of kP().paint.overridableProperties){if(!_C.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),f=new G4(l),m=new zm(f,l.property.specification,this.scope,this.options);let x=null;x=l.value.kind==="constant"||l.value.kind==="source"?new uo("source",m):new Xo("composite",m,l.value.zoomStops,l.value.interpolationType),this.paint._values[o]=new Yh(l.property,x,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&_C.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const f=o.get("text-field"),m=kP().paint.properties[l];let x=!1;const b=M=>{for(const P of M)if(m.overrides&&m.overrides.hasOverride(P))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof sa)b(f.value.value.sections);else if(f.value.kind==="source"){const M=L=>{x||(L instanceof Nr&&Lo(L.value)===mm?b(L.value.sections):L instanceof Ec?b(L.sections):L.eachChild(M))},P=f.value;P._styleExpression&&M(P._styleExpression.expression)}return x}getProgramIds(){return["symbol"]}getDefaultProgramParams(o,l,f){return{config:new $u(this,{zoom:l,lut:f}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let W4,Y4,X4,Z4;var OP=ui([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function LP(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function zP(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class FP{constructor(o,l,f,m){this.context=o,this.format=f,this.useMipmap=m&&m.useMipmap,this.texture=o.gl.createTexture(),this.update(l,{premultiply:m&&m.premultiply})}update(o,l){const f=o&&o instanceof HTMLVideoElement&&o.width===0?o.videoWidth:o.width,m=o&&o instanceof HTMLVideoElement&&o.height===0?o.videoHeight:o.height,{context:x}=this,{gl:b}=x,{x:M,y:P}=l&&l.position?l.position:{x:0,y:0},L=M+f,N=P+m;!this.size||this.size[0]===L&&this.size[1]===N||(b.bindTexture(b.TEXTURE_2D,null),b.deleteTexture(this.texture),this.texture=b.createTexture(),this.size=null),b.bindTexture(b.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA8&&(!l||l.premultiply!==!1));const U=o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap;if(!this.size&&L>0&&N>0){const G=this.useMipmap?Math.floor(Math.log2(Math.max(L,N)))+1:1;b.texStorage2D(b.TEXTURE_2D,G,this.format,L,N),this.size=[L,N]}if(this.size)if(U)b.texSubImage2D(b.TEXTURE_2D,0,M,P,LP(this.format),zP(this.format),o);else{const G=o.data;G&&b.texSubImage2D(b.TEXTURE_2D,0,M,P,f,m,LP(this.format),zP(this.format),G)}this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(o,l,f=!1){const{context:m}=this,{gl:x}=m;x.bindTexture(x.TEXTURE_2D,this.texture),o!==this.minFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.useMipmap&&!f?o===x.NEAREST?x.NEAREST_MIPMAP_NEAREST:x.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),l!==this.wrapS&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,l),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,l),this.wrapS=l)}bindExtraParam(o,l,f,m){const{context:x}=this,{gl:b}=x;b.bindTexture(b.TEXTURE_2D,this.texture),l!==this.magFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,l),this.magFilter=l),o!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap?o===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),f!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f),this.wrapS=f),m!==this.wrapT&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,m),this.wrapT=m)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class xC{constructor(o,l){this.context=o,this.texture=l}bind(o,l){const{context:f}=this,{gl:m}=f;m.bindTexture(m.TEXTURE_2D,this.texture),o!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,o),this.minFilter=o),l!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,l),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,l),this.wrapS=l)}}function bC(u,o,l,f,m,x,b,M){const P=[u,o,1,l,f,1,m,x,1],L=[b,M,1],N=D([],P),[U,G,te]=Qt(L,L,N);return k(P,P,[U,0,0,0,G,0,0,0,te])}function K4(u,o,l,f,m,x,b,M){const P=function(L,N,U,G,te,ne,ce,me){const ve=bC(0,0,1,0,1,1,0,1),Ie=bC(L,N,U,G,te,ne,ce,me);return k(Ie,Ie,D([],ve))}(u,o,l,f,m,x,b,M);return[P[2]/P[8]/vn,P[5]/P[8]/vn]}function wC(u){return[u[0],Math.min(Math.max(u[1],-85.051129),ht)]}class Q4 extends pd{constructor(o,l,f,m){super(),this.id=o,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(m),this.options=l,this._dirty=!1}load(o,l){if(this._loaded=l||!1,this.fire(new Kc("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=bh(this.map._requestManager.transformRequest(this.url,Nf.Image),(f,m)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new hm(f)):m&&(this.image=m instanceof HTMLImageElement?wl.getImageData(m):m,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new xC(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Kc("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(o){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof xC||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let l=o[0][1],f=o[0][1];for(const x of o)x[1]>f&&(f=x[1]),x[1]<l&&(l=x[1]);const m=(f+l)/2;if(m>ht?this.onNorthPole=!0:m<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const x=o.map(_t.fromLngLat);this.tileID=function(b){let M=1/0,P=1/0,L=-1/0,N=-1/0;for(const ce of b)M=Math.min(M,ce.x),P=Math.min(P,ce.y),L=Math.max(L,ce.x),N=Math.max(N,ce.y);const U=Math.max(L-M,N-P),G=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),te=Math.pow(2,G);let ne=Math.floor((M+L)/2*te);return ne>1&&(ne-=1),new ji(G,ne,Math.floor((P+N)/2*te))}(x),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Kc("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const ve in this.tiles){const Ie=this.tiles[ve];Ie.state!=="loaded"&&(Ie.state="loaded",Ie.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const l=vw(new ji(0,0,0),this.map.transform.projection),f=[l.projection.project(this.coordinates[0][0],this.coordinates[0][1]),l.projection.project(this.coordinates[1][0],this.coordinates[1][1]),l.projection.project(this.coordinates[2][0],this.coordinates[2][1]),l.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ve){const Ie=ve[1].x-ve[0].x,Me=ve[1].y-ve[0].y,ue=ve[2].x-ve[1].x,we=ve[2].y-ve[1].y,Pe=ve[3].x-ve[2].x,Be=ve[3].y-ve[2].y,Qe=ve[0].x-ve[3].x,rt=ve[0].y-ve[3].y,ot=Ie*we-ue*Me,ct=ue*Be-Pe*we,At=Pe*rt-Qe*Be,Yt=Qe*Me-Ie*rt;return ot>0&&ct>0&&At>0&&Yt>0||ot<0&&ct<0&&At<0&&Yt<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const m=vw(this.tileID,this.map.transform.projection),[x,b,M,P]=this.coordinates.map(ve=>{const Ie=m.projection.project(ve[0],ve[1]);return B4(m,Ie)._round()});this.perspectiveTransform=K4(x.x,x.y,b.x,b.y,M.x,M.y,P.x,P.y);const L=this._boundsArray=new Od;L.emplaceBack(x.x,x.y,0,0),L.emplaceBack(b.x,b.y,vn,0),L.emplaceBack(P.x,P.y,0,vn),L.emplaceBack(M.x,M.y,vn,vn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(L,OP.members),this.boundsSegments=ho.simpleSegment(0,0,4,2);const N=[],U=[wC((G=this.coordinates)[0]),wC(G[1]),wC(G[2]),wC(G[3])];var G;const[te,ne,ce,me]=function(ve){let Ie=ve[0][0],Me=Ie,ue=ve[0][1],we=ue;for(let Pe=1;Pe<ve.length;Pe++)ve[Pe][0]<Ie?Ie=ve[Pe][0]:ve[Pe][0]>Me&&(Me=ve[Pe][0]),ve[Pe][1]<ue?ue=ve[Pe][1]:ve[Pe][1]>we&&(we=ve[Pe][1]);return[Ie,ue,Me-Ie,we-ue]}(U);{const ve=new Od,[Ie,Me,ue,we]=function(Et){let Ut=Et[0].x,bt=Ut,Ct=Et[0].y,on=Ct;for(let un=1;un<Et.length;un++)Et[un].x<Ut?Ut=Et[un].x:Et[un].x>bt&&(bt=Et[un].x),Et[un].y<Ct?Ct=Et[un].y:Et[un].y>on&&(on=Et[un].y);return[Ut,Ct,bt-Ut,on-Ct]}(f),Pe=Et=>[(Et.x-Ie)/ue,(Et.y-Me)/we],[Be,Qe,rt,ot]=f.map(Pe),ct=function(Et,Ut,bt,Ct,on,un,Qn,Nn){const Sn=bC(0,0,1,0,1,1,0,1);return k(Sn,Sn,D([],bC(Et,Ut,bt,Ct,on,un,Qn,Nn)))}(Be[0],Be[1],Qe[0],Qe[1],rt[0],rt[1],ot[0],ot[1]);this.elevatedGlobePerspectiveTransform=K4(Be[0],Be[1],Qe[0],Qe[1],rt[0],rt[1],ot[0],ot[1]);const At=(Et,Ut)=>{N.push(Et.lng);const bt=Math.round((Et.lng-te)/ce*vn),Ct=Math.round((Et.lat-ne)/me*vn),on=Pe(Ut),un=Qt([],[on[0],on[1],1],ct),Qn=Math.round(un[0]/un[2]*vn),Nn=Math.round(un[1]/un[2]*vn);ve.emplaceBack(bt,Ct,Qn,Nn)},Yt=f[3].x-f[0].x,Vt=f[3].y-f[0].y,qt=f[2].x-f[1].x,nn=f[2].y-f[1].y;for(let Et=0;Et<65;Et++){const Ut=Et/64,bt=[f[0].x+Ut*Yt,f[0].y+Ut*Vt],Ct=[f[1].x+Ut*qt,f[1].y+Ut*nn],on=Ct[0]-bt[0],un=Ct[1]-bt[1];for(let Qn=0;Qn<65;Qn++){const Nn=Qn/64,Sn={x:bt[0]+on*Nn,y:bt[1]+un*Nn};At(l.projection.unproject(Sn.x,Sn.y),Sn)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(ve,OP.members)}{this.maxLongitudeTriangleSize=0;let ve=[],Ie=new Do;const Me=(ue,we,Pe)=>{Ie.emplaceBack(ue,we,Pe);const Be=N[ue],Qe=N[we],rt=N[Pe],ot=Math.min(Math.min(Be,Qe),rt),ct=Math.max(Math.max(Be,Qe),rt)-ot;ct>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=ct),ve.push(ot+ct/2)};for(let ue=0;ue<64;ue++)for(let we=0;we<64;we++){const Pe=65*ue+we,Be=Pe+1,Qe=Pe+65,rt=Qe+1;Me(Pe,Qe,Be),Me(Be,Qe,rt)}[ve,Ie]=function(ue,we){const Pe=Array.from({length:ue.length},(rt,ot)=>ot);Pe.sort((rt,ot)=>ue[rt]-ue[ot]);const Be=[],Qe=new Do;for(let rt=0;rt<Pe.length;rt++){const ot=Pe[rt];Be.push(ue[ot]);const ct=3*ot,At=ct+1;Qe.emplaceBack(we.uint16[ct],we.uint16[At],we.uint16[At+1])}return[Be,Qe]}(ve,Ie),this.elevatedGlobeTrianglesCenterLongitudes=ve,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(Ie)}this.elevatedGlobeSegments=ho.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,ce/vn,0,me/vn,0,0,ne,te,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const l=this.map.painter.context,f=l.gl;!this._dirty||this.texture instanceof xC||(this.texture?this.texture.update(this.image):(this.texture=new FP(l,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(l)}loadTile(o,l){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},l(null)):(o.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const l=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!l)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let m=(x=o+180)+360*Math.round((f[0]-x)/360);var x;const b=new ho,M=(U,G)=>{b.segments.push({vertexOffset:0,primitiveOffset:U,vertexLength:l.segments[0].vertexLength,primitiveLength:G,sortKey:void 0,vaos:{}})},P=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-m)<=P){const U=Is(f,0,f.length,m+P);return U===f.length||M(U,lo(f,U+1,f.length,m+360-P)-U),b}m<f[0]&&(m+=360);const L=lo(f,0,f.length,m-P);if(L===f.length)return M(0,f.length),b;M(0,L-0);const N=Is(f,L+1,f.length,m+P);return N!==f.length&&M(N,f.length-N),b}}const coe=(Math.pow(256,2)-1)/16907520;class J4 extends la{constructor(o,l,f,m){super(o,{layout:X4||(X4=new yo({visibility:new pn(pt.layout_raster.visibility)})),paint:Z4||(Z4=new yo({"raster-opacity":new pn(pt.paint_raster["raster-opacity"]),"raster-color":new Kl(pt.paint_raster["raster-color"]),"raster-color-mix":new pn(pt.paint_raster["raster-color-mix"]),"raster-color-range":new pn(pt.paint_raster["raster-color-range"]),"raster-hue-rotate":new pn(pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new pn(pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new pn(pt.paint_raster["raster-brightness-max"]),"raster-saturation":new pn(pt.paint_raster["raster-saturation"]),"raster-contrast":new pn(pt.paint_raster["raster-contrast"]),"raster-resampling":new pn(pt.paint_raster["raster-resampling"]),"raster-fade-duration":new pn(pt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new pn(pt.paint_raster["raster-emissive-strength"]),"raster-array-band":new pn(pt.paint_raster["raster-array-band"]),"raster-elevation":new pn(pt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},l,f,m),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(o){return!(o&&o._source instanceof Q4&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const l=this._transitionablePaint._values["raster-color"].value.expression,[f,m]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(m)||f===this._curRampRange[0]&&m===this._curRampRange[1]||(this.colorRamp=vy({expression:l,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:m}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,m])}}let eV,tV,nV,rV,iV;class oV extends la{constructor(o,l,f,m){super(o,{layout:eV||(eV=new yo({visibility:new pn(pt["layout_raster-particle"].visibility)})),paint:tV||(tV=new yo({"raster-particle-array-band":new pn(pt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new pn(pt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Kl(pt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new pn(pt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new pn(pt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new pn(pt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new pn(pt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new pn(pt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},l,f,m),this._updateColorRamp(),this.lastInvalidatedAt=wl.now()}onRemove(o){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,l=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=vy({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:l}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=wl.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class uoe extends la{constructor(o,l){super(o,{},l,null),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(o){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}function BP(u,o,l){const f=[0,0,1],m=Vn([]);return gn(m,m,l?-re(u)+Math.PI:re(u)),ut(m,m,-re(o)),Jt(f,f,m),It(f,f)}function sV(u,o){const l=SC(u.projection,u.zoom,u.width,u.height),f=function(x,b,M,P,L){const N=new fe(M.lng-180*Dy,M.lat),U=new fe(M.lng+180*Dy,M.lat),G=x.project(N.lng,N.lat),te=x.project(U.lng,U.lat),ne=-Math.atan2(te.y-G.y,te.x-G.x),ce=_t.fromLngLat(M);ce.y=We(ce.y,-1+Dy,1-Dy);const me=ce.toLngLat(),ve=x.project(me.lng,me.lat),Ie=_t.fromLngLat(me);Ie.x+=Dy;const Me=Ie.toLngLat(),ue=x.project(Me.lng,Me.lat),we=lV(ue.x-ve.x,ue.y-ve.y,ne),Pe=_t.fromLngLat(me);Pe.y+=Dy;const Be=Pe.toLngLat(),Qe=x.project(Be.lng,Be.lat),rt=lV(Qe.x-ve.x,Qe.y-ve.y,ne),ot=Math.abs(we.x)/Math.abs(rt.y),ct=F([]);se(ct,ct,-ne*(1-(L?0:P)));const At=F([]);return Z(At,At,[1,1-(1-ot)*P,1]),At[4]=-rt.x/rt.y*P,se(At,At,ne),V(At,ct,At),At}(u.projection,0,u.center,l,o),m=aV(u);return Z(f,f,[m,m,1]),f}function aV(u){const o=u.projection,l=SC(u.projection,u.zoom,u.width,u.height),f=NP(o,u.center),m=NP(o,fe.convert(o.center));return Math.pow(2,f*l+(1-l)*m)}function SC(u,o,l,f,m=1/0){const x=u.range;if(!x)return 0;const b=Math.min(m,Math.max(l,f)),M=Math.log(b/1024)/Math.LN2;return Ke(x[0]+M,x[1]+M,o)}const Dy=1/4e4;function NP(u,o){const l=We(o.lat,-85.051129,ht),f=new fe(o.lng-180*Dy,l),m=new fe(o.lng+180*Dy,l),x=u.project(f.lng,l),b=u.project(m.lng,l),M=_t.fromLngLat(f),P=_t.fromLngLat(m),L=b.x-x.x,N=b.y-x.y,U=P.x-M.x,G=P.y-M.y,te=Math.sqrt((U*U+G*G)/(L*L+N*N));return Math.log(te)/Math.LN2}function lV(u,o,l){const f=Math.cos(l),m=Math.sin(l);return{x:u*f-o*m,y:u*m+o*f}}function cV(u,o,l){F(u),se(u,u,re(o[2])),K(u,u,re(o[0])),ee(u,u,re(o[1])),Z(u,u,l),V(u,u,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function TC(u,o,l,f,m,x,b,M){const P=[l[0]-o[0],l[1]-o[1],0],L=[f[0]-o[0],f[1]-o[1],0];if(Ae(P)<1e-12||Ae(L)<1e-12)return Vn(u);const N=sn([],P,L);It(N,N),Se(L,f,o),P[2]=(x-m)*M,L[2]=(b-m)*M;const U=P;return sn(U,P,L),It(U,U),or(u,N,U)}function jP(u,o,l=!1){const f=af(o.zoom),m=function(x,b,M){const P=b.worldSize,L=[x[12],x[13],x[14]],N=et(L[1]/P),U=Ze(L[0]/P),G=F([]),te=Fe(1,N)*P,ne=Fe(1,0)*P*Dt(N,b.zoom),ce=1/ux(P);let me=ne*ce;if(M){const ue=SC(b.projection,b.zoom,b.width,b.height,1024);me=ce*b.projection.pixelSpaceConversion(b.center.lat,P,ue)}const ve=pe(N,U);He(ve,ve,Oe([],It([],ve),te*me*L[2]));const Ie=function(ue){const we=[ue[0],ue[1],ue[2]];let Pe=[0,1,0];const Be=sn([],Pe,we);return sn(Pe,we,Be),wt(Pe)===0&&(Pe=[0,1,0],sn(Be,we,Pe)),It(Be,Be),It(Pe,Pe),It(we,we),[Be[0],Be[1],Be[2],0,Pe[0],Pe[1],Pe[2],0,we[0],we[1],we[2],0,ue[0],ue[1],ue[2],1]}(ve);Z(G,G,[me,me,me*te]),W(G,G,[-L[0],-L[1],-L[2]]);const Me=V([],b.globeMatrix,Ie);return V(Me,Me,G),V(Me,Me,x),Me}(u,o,l);if(f>0){const x=function(b,M){const P=M.worldSize,L=Fe(1,0)*P*Dt(M.center.lat,M.zoom)/ux(P),N=Fe(1,M.center.lat)*P,U=F([]);return ee(U,U,re(M.center.lng)),K(U,U,re(M.center.lat)),W(U,U,[0,0,E]),Z(U,U,[L,L,L*N]),W(U,U,[M.point.x-.5*P,M.point.y-.5*P,0]),V(U,U,b),V(U,M.globeMatrix,U)}(u,o);return function(b,M,P){const L=(ne,ce,me)=>{const ve=Ae(ne),Ie=Ae(ce),Me=Gu(ne,ce,me);return Oe(Me,Me,1/Ae(Me)*ar(ve,Ie,me))},N=L([b[0],b[1],b[2]],[M[0],M[1],M[2]],P),U=L([b[4],b[5],b[6]],[M[4],M[5],M[6]],P),G=L([b[8],b[9],b[10]],[M[8],M[9],M[10]],P),te=Gu([b[12],b[13],b[14]],[M[12],M[13],M[14]],P);return[N[0],N[1],N[2],0,U[0],U[1],U[2],0,G[0],G[1],G[2],0,te[0],te[1],te[2],1]}(m,x,f)}return m}function uV(u,o,l,f){const m=Oi.projectAabbCorners(f,l);let x=Number.MAX_VALUE,b=-1;for(let L=0;L<m.length;++L){const N=m[L];N[0]=(.5*N[0]+.5)*o.width,N[1]=(.5-.5*N[1])*o.height,N[2]<x&&(b=L,x=N[2])}const M=L=>new dn(m[L][0],m[L][1]);let P;switch(b){case 0:case 6:P=[M(1),M(5),M(4),M(7),M(3),M(2),M(1)];break;case 1:case 7:P=[M(0),M(4),M(5),M(6),M(2),M(3),M(0)];break;case 3:case 5:P=[M(1),M(0),M(4),M(7),M(6),M(2),M(1)];break;default:P=[M(1),M(5),M(6),M(7),M(3),M(0),M(1)]}if(ur(u,P))return x}const doe=ui([{name:"a_pos_3f",components:3,type:"Float32"}]),hoe=ui([{name:"a_color_3f",components:3,type:"Float32"}]),foe=ui([{name:"a_color_4f",components:4,type:"Float32"}]),poe=ui([{name:"a_uv_2f",components:2,type:"Float32"}]),moe=ui([{name:"a_normal_3f",components:3,type:"Float32"}]),goe=ui([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),yoe=ui([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),dV={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class EC{constructor(o,l,f,m){this.message=(o?`${o}: `:"")+f,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function VP(u,o){const l=u.indexOf("://")===-1;try{return new URL(u,l&&o?"http://example.com":void 0),!0}catch{return!1}}class hV{constructor(o,l){this.feature=o,this.instancedDataOffset=l,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class fV{constructor(){this.instancedDataArray=new of,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class UP{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.projection=o.projection,this.index=o.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=o.styleDefinedModelURLs}updateFootprints(o,l){}populate(o,l,f,m){this.tileToMeter=dt(f);const x=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:b,id:M,index:P,sourceLayerIndex:L}of o){const N=M??(b.properties&&b.properties.hasOwnProperty("id")?b.properties.id:void 0),U=$n(b,x);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),U,f))continue;const G={id:N,sourceLayerIndex:L,index:P,geometry:x?U.geometry:Fn(b,f,m),properties:b.properties,type:b.type,patterns:{}},te=this.addFeature(G,G.geometry,U);te&&l.featureIndex.insert(b,G.geometry,P,L,this.index,this.instancesPerModel[te].instancedDataArray.length,vn/32)}this.lookup=null}update(o,l,f,m){for(const x in this.instancesPerModel){const b=this.instancesPerModel[x];for(const M in o)b.idToFeaturesIndex.hasOwnProperty(M)&&(this.evaluate(b.features[b.idToFeaturesIndex[M]],o[M],b,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const l in this.instancesPerModel){const f=this.instancesPerModel[l];for(const m of f.features){const x=this.layers[0],b=m.feature,M=this.canonical,P=x.paint.get("model-rotation").evaluate(b,{},M),L=x.paint.get("model-scale").evaluate(b,{},M),N=x.paint.get("model-translation").evaluate(b,{},M);fn(m.rotation,P)&&fn(m.scale,L)&&fn(m.translation,N)||(this.evaluate(m,m.featureStates,f,!0),o=!0)}}return o}updateReplacement(o,l,f,m){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const x=l.getReplacementRegionsForTile(o.toUnwrapped(),!0);if(Sy(this.activeReplacements,x))return!1;this.activeReplacements=x;let b=!1;for(const M in this.instancesPerModel){const P=this.instancesPerModel[M],L=P.instancedDataArray;for(const N of P.features){const U=N.instancedDataOffset,G=N.instancedDataCount;for(let te=0;te<G;te++){const ne=16*(te+U);let ce=L.float32[ne+0];const me=ce>vn;ce=me?ce-vn:ce;const ve=Math.floor(ce),Ie=L.float32[ne+1];let Me=!1;for(const ue of this.activeReplacements)if(!wy(ue,f,dV.Model,m)&&!(ue.min.x>ve||ve>ue.max.x||ue.min.y>Ie||Ie>ue.max.y)&&(Me=sw(ZE(ve,Ie,o.canonical,ue.footprintTileId.canonical),ue.footprint),Me))break;L.float32[ne]=Me?ce+vn:ce,b=b||Me!==me}}}return b}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const l in this.instancesPerModel){const f=this.instancesPerModel[l];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=o.createVertexBuffer(f.instancedDataArray,goe.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const l in this.instancesPerModel){const f=this.instancesPerModel[l];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const o=this.layers[0].modelManager;if(o&&this.modelUris&&this.modelsRequested)for(const l of this.modelUris)o.removeModel(l,"",!0)}addFeature(o,l,f){const m=this.layers[0],x=m.layout.get("model-id").evaluate(f,{},this.canonical);if(!x)return Ir(`modelId is not evaluated for layer ${m.id} and it is not going to get rendered.`),x;(VP(x,!1)||this.styleDefinedModelURLs[x]!==void 0)&&(this.modelUris.includes(x)||this.modelUris.push(x)),this.instancesPerModel[x]||(this.instancesPerModel[x]=new fV);const b=this.instancesPerModel[x],M=b.instancedDataArray,P=new hV(f,M.length);for(const L of l)for(const N of L){if(N.x<0||N.x>=vn||N.y<0||N.y>=vn)continue;const U=(this.lookupDim-1)/vn,G=this.lookupDim*(N.y*U|0)+N.x*U|0;if(this.lookup){if(this.lookup[G]!==0)continue;this.lookup[G]=1}this.instanceCount++;const te=M.length;M.resize(te+1),b.instancesEvaluatedElevation.push(0),M.float32[16*te]=N.x,M.float32[16*te+1]=N.y}return P.instancedDataCount=b.instancedDataArray.length-P.instancedDataOffset,P.instancedDataCount>0&&(o.id&&(b.idToFeaturesIndex[o.id]=b.features.length),b.features.push(P),this.evaluate(P,{},b,!1)),x}getModelUris(){return this.modelUris}evaluate(o,l,f,m){const x=this.layers[0],b=o.feature,M=this.canonical,P=o.rotation=x.paint.get("model-rotation").evaluate(b,l,M),L=o.scale=x.paint.get("model-scale").evaluate(b,l,M),N=o.translation=x.paint.get("model-translation").evaluate(b,l,M),U=x.paint.get("model-color").evaluate(b,l,M);U.a=x.paint.get("model-color-mix-intensity").evaluate(b,l,M);const G=[];this.maxVerticalOffset<N[2]&&(this.maxVerticalOffset=N[2]),this.maxScale=Math.max(Math.max(this.maxScale,L[0]),Math.max(L[1],L[2])),cV(G,P,L);const te=Math.round(100*U.a)+U.b/1.05;for(let ne=0;ne<o.instancedDataCount;++ne){const ce=o.instancedDataOffset+ne,me=16*ce,ve=f.instancedDataArray.float32;let Ie=0;m&&(Ie=ve[me+6]-f.instancesEvaluatedElevation[ce]);const Me=0|ve[me+1];ve[me]=(0|ve[me])+U.r/1.05,ve[me+1]=Me+U.g/1.05,ve[me+2]=te,ve[me+3]=1/(M.z>10?this.tileToMeter:dt(M,Me)),ve[me+4]=N[0],ve[me+5]=N[1],ve[me+6]=N[2]+Ie,ve[me+7]=G[0],ve[me+8]=G[1],ve[me+9]=G[2],ve[me+10]=G[4],ve[me+11]=G[5],ve[me+12]=G[6],ve[me+13]=G[8],ve[me+14]=G[9],ve[me+15]=G[10],f.instancesEvaluatedElevation[ce]=N[2]}}}let pV,mV;In(UP,"ModelBucket",{omit:["layers"]}),In(fV,"PerModelAttributes"),In(hV,"ModelFeature");const I_=64,Ux={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function gV(u,o,l,f,m,x,b,M,P,L=!1){const N=l.zoom,U=l.project(f),G=Dt(f.lat,N),te=1/G;F(u),W(u,u,[U.x+b[0]*te,U.y+b[1]*te,b[2]]);let ne=1,ce=1;const me=l.worldSize;if(L){if(l.projection.name==="mercator"){let ue=0;l.elevation&&(ue=l.elevation.getAtPointOrZero(new _t(U.x/me,U.y/me),0));const we=Yn([],[U.x,U.y,ue,1],l.projMatrix)[3]/l.cameraToCenterDistance;ne=we,ce=we*Dt(l.center.lat,N)}else if(l.projection.name==="globe"){const ue=jP(u,l),we=[0,0,0,1];Yn(we,we,V([],l.projMatrix,ue));const Pe=we[3]/l.cameraToCenterDistance,Be=af(N),Qe=l.projection.pixelsPerMeter(f.lat,me)*Dt(f.lat,N),rt=l.projection.pixelsPerMeter(l.center.lat,me)*Dt(l.center.lat,N);ne=Pe/ar(Qe,kt(l.center.lat),Be),ce=Pe*G/Qe,ne*=rt,ce*=rt}}else ne=te;Z(u,u,[ne,ne,ce]);const ve=[...u],Ie=o.orientation,Me=[];if(cV(Me,[Ie[0]+m[0],Ie[1]+m[1],Ie[2]+m[2]],x),V(u,ve,Me),M&&l.elevation){let ue=0;const we=[];if(P&&l.elevation){ue=function(Be,Qe,rt,ot,ct){const At=Qe.elevation;if(!At)return 0;const Yt=Oi.projectAabbCorners(rt,ot),Vt=Fe(1,ct.lat)*Qe.worldSize,qt=function(rn,Mr){const Hn=[0,0,1],Gn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const br of Gn){const zr=rn[br.corners[0]],Br=rn[br.corners[1]],Gr=rn[br.corners[2]],$r=[Br[0]-zr[0],Br[1]-zr[1],Mr*(Br[2]-zr[2])],jr=sn($r,$r,[Gr[0]-zr[0],Gr[1]-zr[1],Mr*(Gr[2]-zr[2])]);It(jr,jr),br.dotProductWithUp=vt(jr,Hn)}return Gn.sort((br,zr)=>br.dotProductWithUp-zr.dotProductWithUp),Gn[0].corners}(Yt,Vt),nn=Yt[qt[0]],Et=Yt[qt[1]],Ut=Yt[qt[2]],bt=Yt[qt[3]],Ct=At.getAtPointOrZero(new _t(nn[0]/Qe.worldSize,nn[1]/Qe.worldSize),0),on=At.getAtPointOrZero(new _t(Et[0]/Qe.worldSize,Et[1]/Qe.worldSize),0),un=At.getAtPointOrZero(new _t(Ut[0]/Qe.worldSize,Ut[1]/Qe.worldSize),0),Qn=At.getAtPointOrZero(new _t(bt[0]/Qe.worldSize,bt[1]/Qe.worldSize),0),Nn=(Ct+Qn)/2,Sn=(on+un)/2;return Nn>Sn?on<un?TC(Be,Et,bt,nn,on,Qn,Ct,Vt):TC(Be,Ut,nn,bt,un,Ct,Qn,Vt):Ct<Qn?TC(Be,nn,Et,Ut,Ct,on,un,Vt):TC(Be,bt,Ut,Et,Qn,un,on,Vt),Math.max(Nn,Sn)}(we,l,o.aabb,u,f);const Pe=V([],_e([],we),Me);V(u,ve,Pe)}else ue=l.elevation.getAtPointOrZero(new _t(U.x/me,U.y/me),0);ue!==0&&(u[14]+=ue)}}function Sw(u,o,l=!1){u.uploaded||(u.gfxTexture=new FP(o,u.image,l?o.gl.R8:o.gl.RGBA8,{useMipmap:u.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),u.uploaded=!0,u.image=null)}function voe(u,o,l){u.indexBuffer=o.createIndexBuffer(u.indexArray,!1,!0),u.vertexBuffer=o.createVertexBuffer(u.vertexArray,doe.members,!1,!0),u.normalArray&&(u.normalBuffer=o.createVertexBuffer(u.normalArray,moe.members,!1,!0)),u.texcoordArray&&(u.texcoordBuffer=o.createVertexBuffer(u.texcoordArray,poe.members,!1,!0)),u.colorArray&&(u.colorBuffer=o.createVertexBuffer(u.colorArray,(u.colorArray.bytesPerElement===12?hoe:foe).members,!1,!0)),u.featureArray&&(u.pbrBuffer=o.createVertexBuffer(u.featureArray,yoe.members,!0)),u.segments=ho.simpleSegment(0,0,u.vertexArray.length,u.indexArray.length);const f=u.material;f.pbrMetallicRoughness.baseColorTexture&&Sw(f.pbrMetallicRoughness.baseColorTexture,o),f.pbrMetallicRoughness.metallicRoughnessTexture&&Sw(f.pbrMetallicRoughness.metallicRoughnessTexture,o),f.normalTexture&&Sw(f.normalTexture,o),f.occlusionTexture&&Sw(f.occlusionTexture,o,l),f.emissionTexture&&Sw(f.emissionTexture,o)}function $P(u,o,l){if(u.meshes)for(const f of u.meshes)voe(f,o,l);if(u.children)for(const f of u.children)$P(f,o,l)}function CC(u){if(u.meshes)for(const o of u.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(u.children)for(const o of u.children)CC(o)}function qP(u){if(u.meshes)for(const l of u.meshes)l.vertexBuffer&&(l.vertexBuffer.destroy(),l.indexBuffer.destroy(),l.normalBuffer&&l.normalBuffer.destroy(),l.texcoordBuffer&&l.texcoordBuffer.destroy(),l.colorBuffer&&l.colorBuffer.destroy(),l.pbrBuffer&&l.pbrBuffer.destroy(),l.segments.destroy(),l.material&&((o=l.material).pbrMetallicRoughness.baseColorTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),o.pbrMetallicRoughness.metallicRoughnessTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),o.normalTexture&&o.normalTexture.gfxTexture&&o.normalTexture.gfxTexture.destroy(),o.emissionTexture&&o.emissionTexture.gfxTexture&&o.emissionTexture.gfxTexture.destroy(),o.occlusionTexture&&o.occlusionTexture.gfxTexture&&o.occlusionTexture.gfxTexture.destroy()));var o;if(u.children)for(const l of u.children)qP(l)}class $x{constructor(o,l,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=l,this._offset=f}static create(o,l,f){const m=f||o.findDEMTileFor(l);if(!m||!m.dem)return;const x=m.dem,b=m.tileID,M=1<<l.canonical.z-b.canonical.z;return new $x(m,x.dim/vn/M,[(l.canonical.x/M-b.canonical.x)*x.dim,(l.canonical.y/M-b.canonical.y)*x.dim])}tileCoordToPixel(o,l){const f=l*this._scale+this._offset[1],m=Math.floor(o*this._scale+this._offset[0]),x=Math.floor(f);return new dn(m,x)}getElevationAt(o,l,f,m){const x=o*this._scale+this._offset[0],b=l*this._scale+this._offset[1],M=Math.floor(x),P=Math.floor(b),L=this._dem;return m=!!m,f?ar(ar(L.get(M,P,m),L.get(M,P+1,m),b-P),ar(L.get(M+1,P,m),L.get(M+1,P+1,m),b-P),x-M):L.get(M,P,m)}getElevationAtPixel(o,l,f){return this._dem.get(o,l,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Fe(1,o)*this._dem.stride}}const HP=new Float32Array(262144),k_=new Uint8Array(262144);function yV(u){let o=0;if(u.meshes)for(const l of u.meshes)o=Math.max(o,l.aabb.max[2]);if(u.children)for(const l of u.children)o=Math.max(o,yV(l));return o}function vV(u,o,l){if(u.meshes)for(const f of u.meshes){if(f.aabb.min[0]===1/0)continue;const m=Oi.applyTransform(f.aabb,u.matrix);l.insert(o,m.min[0],m.min[1],m.max[0],m.max[1])}if(u.children)for(const f of u.children)vV(f,o,l)}const _V=["","wall","door","roof","window","lamp","logo"];class xV{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:o.id,geometry:[],properties:{height:yV(o)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new Oi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const l=new Oi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==o&&(f.transformedAabb=Oi.applyTransformFast(f.aabb,this.node.matrix),l.encapsulate(f.transformedAabb)),o++;this.aabb=l}return this.aabb}}class AC{constructor(o,l,f,m,x,b,M){this.id=f,this.layers=o,this.layerIds=this.layers.map(P=>P.fqid),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.modelTraits|=Ux.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,m&&(this.modelTraits|=Ux.HasMapboxMeshFeatures),x&&(this.modelTraits|=Ux.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=b,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const P of l)this.nodesInfo.push(new xV(P)),vV(P,M.featureIndexArray.length,M.grid),M.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,M.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(o,l){for(const f of this.getNodesInfo()){const m=f.node;m.footprint&&l.push({footprint:m.footprint,id:o})}}update(o){const l=Object.keys(o).length!==0;if(l&&!this.stateDependentLayers.length)return;const f=l?this.stateDependentLayers:this.layers;if(!Hs(o,this.states))for(const m of f)this.evaluate(m,o);this.states=structuredClone(o)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const l=this.getNodesInfo();for(const f of l){const m=f.node;this.uploaded?this.updatePbrBuffer(m):$P(m,o,!0)}for(const f of l)CC(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let l=!1;if(!o.meshes)return l;for(const f of o.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),l=!0);return l}needsReEvaluation(o,l,f){const m=o.transform.projectionOptions,x=o.style.getBrightness(),b=this.brightness!==x;if(!this.uploaded||this.dirty||m.name!==this.projection.name||Tw(f.paint.get("model-color").value,b)||Tw(f.paint.get("model-color-mix-intensity").value,b)||Tw(f.paint.get("model-roughness").value,b)||Tw(f.paint.get("model-emissive-strength").value,b)||Tw(f.paint.get("model-height-based-emissive-strength-multiplier").value,b)){this.projection=m,this.brightness=x;const M=this.getNodesInfo();for(const P of M)P.state=null;return!0}return!1}evaluateScale(o,l){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const f=this.getNodesInfo(),m=this.id.canonical;for(const x of f){const b=x.feature;x.evaluatedScale=l.paint.get("model-scale").evaluate(b,{},m)}}evaluate(o,l){const f=this.getNodesInfo();for(const m of f){if(!m.node.meshes)continue;const x=m.feature,b=l&&l[x.id];if(Hs(b,m.state))continue;m.state=structuredClone(b);const M=m.node.meshes&&m.node.meshes[0].featureData,P=m.evaluatedColor[2],L=m.evaluatedRMEA[2],N=this.id.canonical;if(m.hasTranslucentParts=!1,M){for(let U=0;U<_V.length;U++){const G=_V[U];G.length&&(x.properties.part=G);const te=o.paint.get("model-color").evaluate(x,b,N).toRenderColor(null),ne=o.paint.get("model-color-mix-intensity").evaluate(x,b,N);m.evaluatedColor[U]=[te.r,te.g,te.b,ne],m.evaluatedRMEA[U][0]=o.paint.get("model-roughness").evaluate(x,b,N),m.evaluatedRMEA[U][2]=o.paint.get("model-emissive-strength").evaluate(x,b,N),m.evaluatedRMEA[U][3]=te.a,m.emissionHeightBasedParams[U]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(x,b,N),!m.hasTranslucentParts&&te.a<1&&(m.hasTranslucentParts=!0)}delete x.properties.part,xoe(m,P!==m.evaluatedColor[2]||L!==m.evaluatedRMEA[2],this.modelTraits)}else m.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(x,b,N);m.evaluatedScale=o.paint.get("model-scale").evaluate(x,b,N),this.updatePbrBuffer(m.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,l,f,m){const x=o.findDEMTileFor(f);if(x&&(x.tileID.canonical!==this.terrainTile||l!==this.terrainExaggeration)){if(x.dem&&x.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=x.tileID.overscaledZ;const b=$x.create(o,f,x);if(!b)return;this.modelTraits&Ux.HasMapboxMeshFeatures&&this.updateDEM(o,b,f,m);for(const M of this.getNodesInfo()){const P=M.node;if(!P.footprint||!P.footprint.vertices||!P.footprint.vertices.length)continue;const L=P.footprint.vertices;let N=b.getElevationAt(L[0].x,L[0].y,!0,!0);for(let U=1;U<L.length;U++)N=Math.min(N,b.getElevationAt(L[U].x,L[U].y,!0,!0));P.elevation=N}}this.terrainTile=x.tileID.canonical,this.terrainExaggeration=l}}updateDEM(o,l,f,m){let x=l._dem._modifiedForSources[m];if(x===void 0&&(l._dem._modifiedForSources[m]=[],x=l._dem._modifiedForSources[m]),x.includes(f.canonical))return;const b=l._dem.dim;x.push(f.canonical);let M=!1;for(const P of this.getNodesInfo()){const L=P.node;if(!L.footprint||!L.footprint.grid)continue;const N=L.footprint.grid,U=l.tileCoordToPixel(N.min.x,N.min.y),G=l.tileCoordToPixel(N.max.x,N.max.y),te=Math.min(Math.min(b-G.y,U.x),Math.min(U.y,b-G.x));if(te<0)continue;const ne=We(te,2,5);let ce=Math.max(0,U.x-ne),me=Math.max(0,U.y-ne),ve=Math.min(G.x+ne,b-1),Ie=Math.min(G.y+ne,b-1);for(let Pe=me;Pe<=Ie;++Pe)for(let Be=ce;Be<=ve;++Be)k_[Pe*b+Be]=255;let Me=0,ue=0;for(let Pe=0;Pe<N.cellsY;++Pe)for(let Be=0;Be<N.cellsX;++Be){if(!N.cells[Pe*N.cellsX+Be])continue;const Qe=l.tileCoordToPixel(N.min.x+Be/N.xScale,N.min.y+Pe/N.yScale),rt=l.tileCoordToPixel(N.min.x+(Be+1)/N.xScale,N.min.y+(Pe+1)/N.yScale);for(let ot=Qe.y;ot<=Math.min(rt.y+1,b-1);++ot)for(let ct=Qe.x;ct<=Math.min(rt.x+1,b-1);++ct)k_[ot*b+ct]===255&&(k_[ot*b+ct]=0,Me+=l.getElevationAtPixel(ct,ot),ue++)}const we=Me/ue;ce=Math.max(1,U.x-ne),me=Math.max(1,U.y-ne),ve=Math.min(G.x+ne,b-2),Ie=Math.min(G.y+ne,b-2),M=!0;for(let Pe=me;Pe<=Ie;++Pe)for(let Be=ce;Be<=ve;++Be)k_[Pe*b+Be]===0&&(HP[Pe*b+Be]=l._dem.set(Be,Pe,we));for(let Pe=1;Pe<ne;++Pe){ce=Math.max(1,U.x-Pe),me=Math.max(1,U.y-Pe),ve=Math.min(G.x+Pe,b-2),Ie=Math.min(G.y+Pe,b-2);for(let Be=me;Be<=Ie;++Be)for(let Qe=ce;Qe<=ve;++Qe){const rt=Be*b+Qe;if(k_[rt]===255){let ot=0,ct=0,At=-1,Yt=-1;for(let Vt=-1;Vt<=1;++Vt)for(let qt=-1;qt<=1;++qt){const nn=(Be+Vt)*b+Qe+qt;if(k_[nn]>=Pe)continue;const Et=HP[nn],Ut=Math.abs(Et);Ut>ct&&(ot=Et,ct=Ut,At=qt,Yt=Vt)}if(ct>.1){const Vt=1-(Pe+.5*Math.abs(At*Yt))/ne;let qt=l._dem.get(Qe,Be)+ot*Vt;const nn=l._dem.get(Qe+At,Be+Yt),Et=l._dem.get(Qe-At,Be-Yt,!0);(qt-nn)*(qt-Et)>0&&(qt=(nn+Et)/2),HP[rt]=l._dem.set(Qe,Be,qt),k_[rt]=Pe}}}}}M&&(l._demTile.needsDEMTextureUpload=!0,l._dem._timestamp=wl.now())}setFilter(o){this.filter=o?ay(o):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(o=>this.filter.filter(new Ii(this.id.overscaledZ),o.feature,this.id.canonical)):this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const l of o)CC(l.node),qP(l.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,l){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const f=l.getReplacementRegionsForTile(o.toUnwrapped()),m=this.getNodesInfo();for(let x=0;x<this.nodesInfo.length;x++){const b=m[x].node;m[x].hiddenByReplacement=!!b.footprint&&!f.find(M=>M.footprint===b.footprint)}}getHeightAtTileCoord(o,l){const f=this.getNodesInfo(),m=[],x=[0,0,0],b=F([]);for(let M=0;M<this.nodesInfo.length;M++){const P=f[M],L=P.node.meshes[0],N=L.transformedAabb;if(o<N.min[0]||l<N.min[1]||o>N.max[0]||l>N.max[1])continue;if(P.node.hidden===!0)return{height:1/0,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};j(b,P.node.matrix),x[0]=o,x[1]=l,yn(x,x,b);const U=(x[0]-L.aabb.min[0])/(L.aabb.max[0]-L.aabb.min[0])*I_|0,G=Math.min(63,(x[1]-L.aabb.min[1])/(L.aabb.max[1]-L.aabb.min[1])*I_|0)*I_+Math.min(63,U),te=L.heightmap[G];if(!(te<0&&P.node.footprint))return P.hiddenByReplacement?void 0:{height:te,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};if(P.node.footprint.grid.query(new dn(o,l),new dn(o,l),m),m.length>0)return{height:void 0,maxHeight:P.feature.properties.height,hidden:P.hiddenByReplacement,verticalScale:P.evaluatedScale[2]}}}}function Tw(u,o){return u instanceof uo&&!u.isLightConstant&&o}function _oe(u,o,l,f,m,x,b,M){let P=(61440&o|(61440&o)>>4)>>8,L=(3840&o|(3840&o)>>4)>>4,N=240&o|(240&o)>>4;l[3]>0&&(P=ar(P,255*l[0],l[3]),L=ar(L,255*l[1],l[3]),N=ar(N,255*l[2],l[3]));const U=P<<8|L,G=N<<8|Math.floor(255*f[3]),te=function(Pe){const Be=We(Pe,0,2);return Math.min(Math.round(.5*Be*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],ne=We(m[0],0,1),ce=We(m[1],0,1),me=We(m[2],0,1),ve=We(m[3],0,1);let Ie,Me,ue,we;if(ne!==ce&&b!==x&&ce!==ne){const Pe=b-x;Me=1/(Pe*(ce-ne)),ue=-(x+Pe*ne)/(Pe*(ce-ne));const Be=We(m[4],-1,1);we=Math.pow(10,Be),Ie=255*me<<8|255*ve}else Ie=65535,Me=0,ue=1,we=1;if(u.emplaceBack(U,G,te,Ie,Me,ue,we),M){const Pe=M.length;M.clear();for(let Be=0;Be<Pe;Be++)M.emplaceBack(U,G,te,Ie,Me,ue,we)}}function xoe(u,o,l){const f=u.node;let m=0;const x=l&Ux.HasMeshoptCompression;for(const b of f.meshes){if(f.lights&&f.lightMeshIndex===m||!b.featureData)continue;b.featureArray=new up,b.featureArray.reserve(b.featureData.length);let M=o;for(const P of b.featureData){const L=x?65535&P:P>>16&65535,N=x?P>>16&65535:65535&P,U=(15&N)<8?15&N:0,G=u.evaluatedRMEA[U],te=u.evaluatedColor[U],ne=u.emissionHeightBasedParams[U];let ce;if(M&&U===2&&f.lights&&(ce=new up,ce.resize(10*f.lights.length)),_oe(b.featureArray,L,te,G,ne,b.aabb.min[2],b.aabb.max[2],ce),ce&&M){M=!1;const me=f.meshes[f.lightMeshIndex];me.featureArray=ce,me.featureArray._trim()}}b.featureArray._trim(),m++}}function bV(u,o,l,f){const m=1<<u.z;o.lat=et((f/vn+u.y)/m),o.lng=Ze((l/vn+u.x)/m)}In(AC,"Tiled3dModelBucket",{omit:["layers"]}),In(xV,"Tiled3dModelFeature");const boe={circle:class extends la{constructor(u,o,l,f){super(u,{layout:mi||(mi=new yo({"circle-sort-key":new Pn(pt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new pn(pt.layout_circle["circle-elevation-reference"]),visibility:new pn(pt.layout_circle.visibility)})),paint:Xi||(Xi=new yo({"circle-radius":new Pn(pt.paint_circle["circle-radius"]),"circle-color":new Pn(pt.paint_circle["circle-color"]),"circle-blur":new Pn(pt.paint_circle["circle-blur"]),"circle-opacity":new Pn(pt.paint_circle["circle-opacity"]),"circle-translate":new pn(pt.paint_circle["circle-translate"]),"circle-translate-anchor":new pn(pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new pn(pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new pn(pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Pn(pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Pn(pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Pn(pt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new pn(pt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}createBucket(u){return new jn(u)}queryRadius(u){const o=u;return Sr("circle-radius",this,o)+Sr("circle-stroke-width",this,o)+Ni(this.paint.get("circle-translate"))}queryIntersectsFeature(u,o,l,f,m,x,b,M){const P=pi(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,u.pixelToTileUnitsFactor),L=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l);return N1(u,f,x,b,M,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",P,L)}getProgramIds(){return["circle"]}getDefaultProgramParams(u,o,l){const f=PE(this);return{config:new $u(this,{zoom:o,lut:l}),defines:f,overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends la{createBucket(u){return new og(u)}constructor(u,o,l,f){super(u,{layout:hx||(hx=new yo({visibility:new pn(pt.layout_heatmap.visibility)})),paint:h_||(h_=new yo({"heatmap-radius":new Pn(pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Pn(pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new pn(pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Kl(pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new pn(pt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(u){return Sr("heatmap-radius",this,u)}queryIntersectsFeature(u,o,l,f,m,x,b,M){const P=this.paint.get("heatmap-radius").evaluate(o,l);return N1(u,f,x,b,M,!0,!0,new dn(0,0),P)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(u,o,l){return u==="heatmap"?{config:new $u(this,{zoom:o,lut:l}),overrideFog:!1}:{}}},hillshade:class extends la{constructor(u,o,l,f){super(u,{layout:fx||(fx=new yo({visibility:new pn(pt.layout_hillshade.visibility)})),paint:gp||(gp=new yo({"hillshade-illumination-direction":new pn(pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new pn(pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new pn(pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new pn(pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new pn(pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new pn(pt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new pn(pt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(u,o,l){return{overrideFog:!1}}},fill:class extends la{constructor(u,o,l,f){super(u,{layout:dg||(dg=new yo({"fill-sort-key":new Pn(pt.layout_fill["fill-sort-key"]),visibility:new pn(pt.layout_fill.visibility),"fill-elevation-reference":new pn(pt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Pn(pt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:by||(by=new yo({"fill-antialias":new pn(pt.paint_fill["fill-antialias"]),"fill-opacity":new Pn(pt.paint_fill["fill-opacity"]),"fill-color":new Pn(pt.paint_fill["fill-color"]),"fill-outline-color":new Pn(pt.paint_fill["fill-outline-color"]),"fill-translate":new pn(pt.paint_fill["fill-translate"]),"fill-translate-anchor":new pn(pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pn(pt.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new pn(pt.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new pn(pt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Pn(pt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Pn(pt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Pn(pt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}getProgramIds(){const u=this.paint.get("fill-pattern"),o=u&&u.constantOr(1),l=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getDefaultProgramParams(u,o,l){return{config:new $u(this,{zoom:o,lut:l}),overrideFog:!1}}recalculate(u,o){super.recalculate(u,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Ax(u)}queryRadius(){return Ni(this.paint.get("fill-translate"))}queryIntersectsFeature(u,o,l,f,m,x){return!u.queryGeometry.isAboveHorizon&&cr(ii(u.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,u.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(u){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const o=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return u!=null?o&&!u:o}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends la{constructor(u,o,l,f){super(u,{layout:Ay||(Ay=new yo({visibility:new pn(pt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new pn(pt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:Fx||(Fx=new yo({"fill-extrusion-opacity":new pn(pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new pn(pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new pn(pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new pn(pt["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new pn(pt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new pn(pt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new pn(pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new pn(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new pn(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new pn(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new pn(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new pn(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new pn(pt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new pn(pt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new pn(pt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new pn(pt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new pn(pt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new pn(pt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Pn(pt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new pn(pt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new Lx(u)}queryRadius(){return Ni(this.paint.get("fill-extrusion-translate"))}is3D(u){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(u,o,l,f,m,x,b,M,P){const L=pi(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,u.pixelToTileUnitsFactor),N=this.paint.get("fill-extrusion-height").evaluate(o,l),U=this.paint.get("fill-extrusion-base").evaluate(o,l),G=[0,0],te=M&&x.elevation,ne=x.elevation?x.elevation.exaggeration():1,ce=u.tile.getBucket(this);if(te&&ce instanceof Lx){const ue=ce.centroidVertexArray,we=P+1;we<ue.length&&(G[0]=ue.geta_centroid_pos0(we),G[1]=ue.geta_centroid_pos1(we))}if(G[0]===0&&G[1]===1)return!1;x.projection.name==="globe"&&(f=M_([f],[new dn(0,0),new dn(vn,vn)],u.tileID.canonical).map(ue=>ue.polygon).flat());const me=te?M:null,[ve,Ie]=function(ue,we,Pe,Be,Qe,rt,ot,ct,At,Yt,Vt){return ue.projection.name==="globe"?function(qt,nn,Et,Ut,bt,Ct,on,un,Qn,Nn,Sn){const rn=[],Mr=[],Hn=qt.projection.upVectorScale(Sn,qt.center.lat,qt.worldSize).metersToTile,Gn=[0,0,0,1],br=[0,0,0,1],zr=(Gr,$r,jr,qi)=>{Gr[0]=$r,Gr[1]=jr,Gr[2]=qi,Gr[3]=1},Br=A_();Et>0&&(Et+=Br),Ut+=Br;for(const Gr of nn){const $r=[],jr=[];for(const qi of Gr){const eo=qi.x+bt.x,ze=qi.y+bt.y,Ve=qt.projection.projectTilePoint(eo,ze,Sn),Pt=qt.projection.upVector(Sn,qi.x,qi.y);let mn=Et,Cn=Ut;if(on){const Tn=oe(eo,ze,Et,Ut,on,un,Qn,Nn);mn+=Tn.base,Cn+=Tn.top}Et!==0?zr(Gn,Ve.x+Pt[0]*Hn*mn,Ve.y+Pt[1]*Hn*mn,Ve.z+Pt[2]*Hn*mn):zr(Gn,Ve.x,Ve.y,Ve.z),zr(br,Ve.x+Pt[0]*Hn*Cn,Ve.y+Pt[1]*Hn*Cn,Ve.z+Pt[2]*Hn*Cn),yn(Gn,Gn,Ct),yn(br,br,Ct),$r.push(new Hd(Gn[0],Gn[1],Gn[2])),jr.push(new Hd(br[0],br[1],br[2]))}rn.push($r),Mr.push(jr)}return[rn,Mr]}(ue,we,Pe,Be,Qe,rt,ot,ct,At,Yt,Vt):ot?function(qt,nn,Et,Ut,bt,Ct,on,un,Qn){const Nn=[],Sn=[],rn=[0,0,0,1];for(const Mr of qt){const Hn=[],Gn=[];for(const br of Mr){const zr=br.x+Ut.x,Br=br.y+Ut.y,Gr=oe(zr,Br,nn,Et,Ct,on,un,Qn);rn[0]=zr,rn[1]=Br,rn[2]=Gr.base,rn[3]=1,Yn(rn,rn,bt),rn[3]=Math.max(rn[3],1e-5);const $r=new Hd(rn[0]/rn[3],rn[1]/rn[3],rn[2]/rn[3]);rn[0]=zr,rn[1]=Br,rn[2]=Gr.top,rn[3]=1,Yn(rn,rn,bt),rn[3]=Math.max(rn[3],1e-5);const jr=new Hd(rn[0]/rn[3],rn[1]/rn[3],rn[2]/rn[3]);Hn.push($r),Gn.push(jr)}Nn.push(Hn),Sn.push(Gn)}return[Nn,Sn]}(we,Pe,Be,Qe,rt,ot,ct,At,Yt):function(qt,nn,Et,Ut,bt){const Ct=[],on=[],un=bt[8]*nn,Qn=bt[9]*nn,Nn=bt[10]*nn,Sn=bt[11]*nn,rn=bt[8]*Et,Mr=bt[9]*Et,Hn=bt[10]*Et,Gn=bt[11]*Et;for(const br of qt){const zr=[],Br=[];for(const Gr of br){const $r=Gr.x+Ut.x,jr=Gr.y+Ut.y,qi=bt[0]*$r+bt[4]*jr+bt[12],eo=bt[1]*$r+bt[5]*jr+bt[13],ze=bt[2]*$r+bt[6]*jr+bt[14],Ve=bt[3]*$r+bt[7]*jr+bt[15],Pt=qi+un,mn=eo+Qn,Cn=ze+Nn,Tn=Math.max(Ve+Sn,1e-5),Kn=qi+rn,gr=eo+Mr,ei=ze+Hn,ti=Math.max(Ve+Gn,1e-5);zr.push(new Hd(Pt/Tn,mn/Tn,Cn/Tn)),Br.push(new Hd(Kn/ti,gr/ti,ei/ti))}Ct.push(zr),on.push(Br)}return[Ct,on]}(we,Pe,Be,Qe,rt)}(x,f,U,N,L,b,me,G,ne,x.center.lat,u.tileID.canonical),Me=u.queryGeometry;return function(ue,we,Pe){let Be=1/0;cr(Pe,we)&&(Be=X(Pe,we[0]));for(let Qe=0;Qe<we.length;Qe++){const rt=we[Qe],ot=ue[Qe];for(let ct=0;ct<rt.length-1;ct++){const At=rt[ct],Yt=[At,rt[ct+1],ot[ct+1],ot[ct],At];ur(Pe,Yt)&&(Be=Math.min(Be,X(Pe,Yt)))}}return Be!==1/0&&Be}(ve,Ie,Me.isPointQuery()?Me.screenBounds:Me.screenGeometry)}},line:class extends la{constructor(u,o,l,f){const m=rC();super(u,m,o,l,f),m.layout&&(this.layout=new Pd(m.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof Wf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(u,o){super.recalculate(u,o),this.paint._values["line-floorwidth"]=(()=>{if(hw)return hw;const l=rC();return hw=new bie(l.paint.properties["line-width"].specification),hw.useIntegerZoom=!0,hw})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new jt(u)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(u,o,l){const f=ua(this);return{config:new $u(this,{zoom:o,lut:l}),defines:f,overrideFog:!1}}queryRadius(u){const o=u,l=r4(Sr("line-width",this,o),Sr("line-gap-width",this,o)),f=Sr("line-offset",this,o);return l/2+Math.abs(f)+Ni(this.paint.get("line-translate"))}queryIntersectsFeature(u,o,l,f,m,x){if(u.queryGeometry.isAboveHorizon)return!1;const b=ii(u.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,u.pixelToTileUnitsFactor),M=u.pixelToTileUnitsFactor/2*r4(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),P=this.paint.get("line-offset").evaluate(o,l);return P&&(f=function(L,N){const U=[],G=new dn(0,0);for(let te=0;te<L.length;te++){const ne=L[te],ce=[];for(let me=0;me<ne.length;me++){const ve=ne[me],Ie=ne[me+1],Me=me===0?G:ve.sub(ne[me-1])._unit()._perp(),ue=me===ne.length-1?G:Ie.sub(ve)._unit()._perp(),we=Me._add(ue)._unit();we._mult(1/(we.x*ue.x+we.y*ue.y)),ce.push(we._mult(N)._add(ve))}U.push(ce)}return U}(f,P*u.pixelToTileUnitsFactor)),function(L,N,U){for(let G=0;G<N.length;G++){const te=N[G];if(L.length>=3){for(let ne=0;ne<te.length;ne++)if(di(L,te[ne]))return!0}if(Lr(L,te,U))return!0}return!1}(b,f,M)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(u){return!this.hasElevatedBuckets}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:_C,background:class extends la{constructor(u,o,l,f){super(u,{layout:W4||(W4=new yo({visibility:new pn(pt.layout_background.visibility)})),paint:Y4||(Y4=new yo({"background-pitch-alignment":new pn(pt.paint_background["background-pitch-alignment"]),"background-color":new pn(pt.paint_background["background-color"]),"background-pattern":new pn(pt.paint_background["background-pattern"]),"background-opacity":new pn(pt.paint_background["background-opacity"]),"background-emissive-strength":new pn(pt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(u,o,l){return{overrideFog:!1}}is3D(u){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:J4,"raster-particle":oV,sky:class extends la{constructor(u,o,l,f){super(u,{layout:nV||(nV=new yo({visibility:new pn(pt.layout_sky.visibility)})),paint:rV||(rV=new yo({"sky-type":new pn(pt.paint_sky["sky-type"]),"sky-atmosphere-sun":new pn(pt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new pn(pt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new pn(pt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new pn(pt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Kl(pt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new pn(pt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new pn(pt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new pn(pt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="sky-gradient"?this._updateColorRamp():u!=="sky-atmosphere-sun"&&u!=="sky-atmosphere-halo-color"&&u!=="sky-atmosphere-color"&&u!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=vy({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(u){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=u.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(u,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),m=!f,x=u.style.light,b=x.properties.get("position");return m&&x.properties.get("anchor")==="viewport"&&Ir("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?BP(b.azimuthal,90-b.polar,o):BP(f[0],90-f[1],o)}const l=this.paint.get("sky-gradient-center");return BP(l[0],90-l[1],o)}isSky(){return!0}markSkyboxValid(u){this._skyboxInvalidated=!1,this._lightPosition=u.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const u=this.paint.get("sky-type");return u==="atmosphere"?["skyboxCapture","skybox"]:u==="gradient"?["skyboxGradient"]:null}},slot:class extends la{constructor(u,o,l,f){super(u,{paint:iV||(iV=new yo({}))},o,null)}},model:class extends la{constructor(u,o,l,f){super(u,{layout:pV||(pV=new yo({visibility:new pn(pt.layout_model.visibility),"model-id":new Pn(pt.layout_model["model-id"])})),paint:mV||(mV=new yo({"model-opacity":new Pn(pt.paint_model["model-opacity"]),"model-rotation":new Pn(pt.paint_model["model-rotation"]),"model-scale":new Pn(pt.paint_model["model-scale"]),"model-translation":new Pn(pt.paint_model["model-translation"]),"model-color":new Pn(pt.paint_model["model-color"]),"model-color-mix-intensity":new Pn(pt.paint_model["model-color-mix-intensity"]),"model-type":new pn(pt.paint_model["model-type"]),"model-cast-shadows":new pn(pt.paint_model["model-cast-shadows"]),"model-receive-shadows":new pn(pt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new pn(pt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Pn(pt.paint_model["model-emissive-strength"]),"model-roughness":new Pn(pt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Pn(pt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new pn(pt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new pn(pt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Pn({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new UP(u)}getProgramIds(){return["model"]}is3D(u){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(u){return u instanceof AC?vn-1:0}queryIntersectsFeature(u,o,l,f,m,x){if(!this.modelManager)return!1;const b=this.modelManager,M=u.tile.getBucket(this);if(!(M&&M instanceof UP))return!1;for(const P in M.instancesPerModel){const L=M.instancesPerModel[P],N=o.id!==void 0?o.id:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0;if(L.idToFeaturesIndex.hasOwnProperty(N)){const U=L.features[L.idToFeaturesIndex[N]],G=b.getModel(P,this.scope);if(!G)return!1;let te=I();const ne=new fe(0,0),ce=M.canonical;let me=Number.MAX_VALUE;for(let ve=0;ve<U.instancedDataCount;++ve){const Ie=16*(U.instancedDataOffset+ve),Me=L.instancedDataArray.float32,ue=[Me[Ie+4],Me[Ie+5],Me[Ie+6]];bV(ce,ne,Me[Ie],0|Me[Ie+1]),gV(te,G,x,ne,U.rotation,U.scale,ue,!1,!1,!1),x.projection.name==="globe"&&(te=jP(te,x));const we=V([],x.projMatrix,te),Pe=u.queryGeometry,Be=uV(Pe.isPointQuery()?Pe.screenBounds:Pe.screenGeometry,x,we,G.aabb);Be!=null&&(me=Math.min(Be,me))}return me!==Number.MAX_VALUE&&me}}return!1}_handleOverridablePaintPropertyUpdate(u,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven()||u!=="model-color"&&u!=="model-color-mix-intensity"&&u!=="model-rotation"&&u!=="model-scale"&&u!=="model-translation"&&u!=="model-emissive-strength")}_isPropertyZoomDependent(u){const o=this._transitionablePaint._values[u];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof Xo}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends la{constructor(u,o,l,f){super(u,{layout:ew||(ew=new yo({"clip-layer-types":new pn(pt.layout_clip["clip-layer-types"]),"clip-layer-scope":new pn(pt.layout_clip["clip-layer-scope"])})),paint:HE||(HE=new yo({}))},o,l,f)}recalculate(u,o){super.recalculate(u,o)}createBucket(u){return new tw(u)}is3D(u){return!0}}};class woe{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Soe{constructor(){this.tasks={},this.taskQueue=[],ir(["process"],this),this.invoker=new woe(this.process),this.nextId=0}add(o,l){const f=this.nextId++,m=function({type:x,isSymbolTile:b,zoom:M}){return M=M||0,x==="message"?0:x!=="maybePrepare"||b?x!=="parseTile"||b?x==="parseTile"&&b?300-M:x==="maybePrepare"&&b?400-M:500:200-M:100-M}(l);if(m===0){try{o()}finally{}return null}return this.tasks[f]={fn:o,metadata:l,priority:m,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const l=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let o=null,l=1/0;for(let m=0;m<this.taskQueue.length;m++){const x=this.tasks[this.taskQueue[m]];x.priority<l&&(l=x.priority,o=m)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class wV{constructor(o,l,f){this.target=o,this.parent=l,this.mapId=f,this.callbacks={},this.cancelCallbacks={},ir(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Soe}send(o,l,f,m,x=!1,b){const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=b,this.callbacks[M]=f);const P=new Set;return this.target.postMessage({id:M,type:o,hasCallback:!!f,targetMapId:m,mustQueue:x,sourceMapId:this.mapId,data:zu(l,P)},P),{cancel:()=>{f&&delete this.callbacks[M],this.target.postMessage({id:M,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(o){const l=o.data;if(!l)return;const f=l.id;if(f&&(!l.targetMapId||this.mapId===l.targetMapId))if(l.type==="<cancel>"){const m=this.cancelCallbacks[f];delete this.cancelCallbacks[f],m&&m.cancel()}else if(l.mustQueue||zi(self)){const m=this.callbacks[f],x=this.scheduler.add(()=>this.processTask(f,l),m&&m.metadata||{type:"message"});x&&(this.cancelCallbacks[f]=x)}else this.processTask(f,l)}processTask(o,l){if(delete this.cancelCallbacks[o],l.type==="<response>"){const f=this.callbacks[o];delete this.callbacks[o],f&&(l.error?f(Md(l.error)):f(null,Md(l.data)))}else{const f=new Set,m=l.hasCallback?(b,M)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:b?zu(b):null,data:zu(M,f)},f)}:()=>{},x=Md(l.data);if(this.parent[l.type])this.parent[l.type](l.sourceMapId,x,m);else if(this.parent.getWorkerSource){const b=l.type.split("."),{source:M,scope:P}=x;this.parent.getWorkerSource(l.sourceMapId,b[0],M,P)[b[1]](x,m)}else m(new Error(`Could not find function ${l.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Ew={workerUrl:"",workerClass:null,workerParams:void 0};const GP="mapboxgl_preloaded_worker_pool";class O_{constructor(){this.active={}}acquire(o,l=O_.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<l;)this.workers.push(Ew.workerClass!=null?new Ew.workerClass:new self.Worker(Ew.workerUrl,Ew.workerParams));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[GP]}numActive(){return Object.keys(this.active).length}}O_.workerCount=2;class qx{constructor(o,l,f="Worker",m=O_.workerCount){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=ln();const x=this.workerPool.acquire(this.id,m);for(let b=0;b<x.length;b++){const M=new qx.Actor(x[b],l,this.id);M.name=`${f} ${b}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,l,f){ft(this.actors,(m,x)=>{m.send(o,l,x)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Cw,WP;function MC(){return Cw||(Cw=new O_),Cw}qx.Actor=wV;const YP=new _i(0,0,0),XP={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},ZP={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},RC={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},Toe={PAINT_ORDER_FILL_AND_STROKE:1},Aw={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},SV={MASK_TYPE_LUMINANCE:1};function Eoe(u,o,l){u===1&&o.icons.push(function(f,m){return function(x){if(x.usvg_tree.height||(x.usvg_tree.height=x.usvg_tree.width),!x.metadata)return x;const{metadata:b}=x;if(b.content_area){const{content_area:M}=b;M.top==null&&(M.top=M.left),M.width==null&&(M.width=x.usvg_tree.width),M.height==null&&(M.height=M.width)}return b.stretch_x&&b.stretch_x.length&&TV(b,"x"),b.stretch_y&&b.stretch_y.length&&TV(b,"y"),x}(f.readFields(Coe,{name:void 0},m))}(l,l.readVarint()+l.pos))}function TV(u,o){const l=[],f=u[`stretch_${o}`];let m=null;for(let x=0;x<f.length;x++)m===null?m=l.length===0?f[0]:l[l.length-1][1]+f[x]:(l.push([m,m+f[x]]),m=null);u[`stretch_${o}_areas`]=l}function Coe(u,o,l){u===1?o.name=l.readString():u===2?o.metadata=function(f,m){return f.readFields(Aoe,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},m)}(l,l.readVarint()+l.pos):u===3&&(o.usvg_tree=function(f,m){return f.readFields(Doe,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},m)}(l,l.readVarint()+l.pos),o.data="usvg_tree")}function Aoe(u,o,l){u===1?o.stretch_x=l.readPackedVarint():u===2?o.stretch_y=l.readPackedVarint():u===3?o.content_area=function(f,m){return f.readFields(Moe,{left:0},m)}(l,l.readVarint()+l.pos):u===4&&o.variables.push(function(f,m){return f.readFields(Roe,{name:void 0},m)}(l,l.readVarint()+l.pos))}function Moe(u,o,l){u===1?o.left=l.readVarint():u===2?o.width=l.readVarint():u===3?o.top=l.readVarint():u===4&&(o.height=l.readVarint())}function Roe(u,o,l){u===1?o.name=l.readString():u===2&&(o.rgb_color=IC(l.readVarint()),o.value="rgb_color")}function Doe(u,o,l){u===1?o.width=o.height=l.readVarint():u===2?o.height=l.readVarint():u===3?o.children.push(DC(l,l.readVarint()+l.pos)):u===4?o.linear_gradients.push(function(f,m){return f.readFields(Foe,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},m)}(l,l.readVarint()+l.pos)):u===5?o.radial_gradients.push(function(f,m){return f.readFields(Noe,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},m)}(l,l.readVarint()+l.pos)):u===7?o.clip_paths.push(function(f,m){return f.readFields(joe,{children:[]},m)}(l,l.readVarint()+l.pos)):u===8&&o.masks.push(function(f,m){const x=f.readFields(Voe,{left:0,width:20,mask_type:SV.MASK_TYPE_LUMINANCE,children:[]},m);return x.height==null&&(x.height=x.width),x.top==null&&(x.top=x.left),x}(l,l.readVarint()+l.pos))}function DC(u,o){return u.readFields(Poe,{},o)}function Poe(u,o,l){u===1?(o.group=function(f,m){return f.readFields(Ioe,{opacity:255,children:[]},m)}(l,l.readVarint()+l.pos),o.node="group"):u===2&&(o.path=function(f,m){return f.readFields(Ooe,{paint_order:1,commands:[],step:1,diffs:[],rule:XP.PATH_RULE_NON_ZERO},m)}(l,l.readVarint()+l.pos),o.node="path")}function Ioe(u,o,l){u===1?o.transform=PC(l,l.readVarint()+l.pos):u===2?o.opacity=l.readVarint():u===5?o.clip_path_idx=l.readVarint():u===6?o.mask_idx=l.readVarint():u===7&&o.children.push(DC(l,l.readVarint()+l.pos))}function PC(u,o){return u.readFields(koe,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},o)}function koe(u,o,l){u===1?o.sx=l.readFloat():u===2?o.ky=l.readFloat():u===3?o.kx=l.readFloat():u===4?o.sy=l.readFloat():u===5?o.tx=l.readFloat():u===6&&(o.ty=l.readFloat())}function Ooe(u,o,l){u===1?o.fill=function(f,m){return f.readFields(Loe,{rgb_color:YP,paint:"rgb_color",opacity:255},m)}(l,l.readVarint()+l.pos):u===2?o.stroke=function(f,m){return f.readFields(zoe,{rgb_color:YP,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},m)}(l,l.readVarint()+l.pos):u===3?o.paint_order=l.readVarint():u===5?l.readPackedVarint(o.commands):u===6?o.step=l.readFloat():u===7?l.readPackedSVarint(o.diffs):u===8&&(o.rule=l.readVarint())}function Loe(u,o,l){u===1?(o.rgb_color=IC(l.readVarint()),o.paint="rgb_color"):u===2?(o.linear_gradient_idx=l.readVarint(),o.paint="linear_gradient_idx"):u===3?(o.radial_gradient_idx=l.readVarint(),o.paint="radial_gradient_idx"):u===5&&(o.opacity=l.readVarint())}function IC(u){return new _i((u>>16&255)/255,(u>>8&255)/255,(255&u)/255,1)}function zoe(u,o,l){u===1?(o.rgb_color=IC(l.readVarint()),o.paint="rgb_color"):u===2?(o.linear_gradient_idx=l.readVarint(),o.paint="linear_gradient_idx"):u===3?(o.radial_gradient_idx=l.readVarint(),o.paint="radial_gradient_idx"):u===5?l.readPackedFloat(o.dasharray):u===6?o.dashoffset=l.readFloat():u===7?o.miterlimit=l.readFloat():u===8?o.opacity=l.readVarint():u===9?o.width=l.readFloat():u===10?o.linecap=l.readVarint():u===11&&(o.linejoin=l.readVarint())}function Foe(u,o,l){u===1?o.transform=PC(l,l.readVarint()+l.pos):u===2?o.spread_method=l.readVarint():u===3?o.stops.push(EV(l,l.readVarint()+l.pos)):u===4?o.x1=l.readFloat():u===5?o.y1=l.readFloat():u===6?o.x2=l.readFloat():u===7&&(o.y2=l.readFloat())}function EV(u,o){return u.readFields(Boe,{offset:0,opacity:255,rgb_color:YP},o)}function Boe(u,o,l){u===1?o.offset=l.readFloat():u===2?o.opacity=l.readVarint():u===3&&(o.rgb_color=IC(l.readVarint()))}function Noe(u,o,l){u===1?o.transform=PC(l,l.readVarint()+l.pos):u===2?o.spread_method=l.readVarint():u===3?o.stops.push(EV(l,l.readVarint()+l.pos)):u===4?o.cx=l.readFloat():u===5?o.cy=l.readFloat():u===6?o.r=l.readFloat():u===7?o.fx=l.readFloat():u===8?o.fy=l.readFloat():u===9&&(o.fr=l.readFloat())}function joe(u,o,l){u===1?o.transform=PC(l,l.readVarint()+l.pos):u===2?o.clip_path_idx=l.readVarint():u===3&&o.children.push(DC(l,l.readVarint()+l.pos))}function Voe(u,o,l){u===1?o.left=o.top=l.readFloat():u===2?o.width=o.height=l.readFloat():u===3?o.top=l.readFloat():u===4?o.height=l.readFloat():u===5?o.mask_type=l.readVarint():u===6?o.mask_idx=l.readVarint():u===7&&o.children.push(DC(l,l.readVarint()+l.pos))}class Uoe{static calculate(o={},l=[]){const f=new Map,m=new Map;if(Object.keys(o).length===0)return f;l.forEach(x=>{m.set(x.name,x.rgb_color||new _i(0,0,0))});for(const[x,b]of Object.entries(o))m.has(x)?f.set(m.get(x).toStringPremultipliedAlpha(),b):console.warn(`Ignoring unknown image variable "${x}"`);return f}}function Hx(u,o=255,l){const f=o/255,m=u.toStringPremultipliedAlpha(),x=l.has(m)?l.get(m).clone():u.clone();return x.a*=f,x.toString()}function Mw(u,o){if(!Ja()){const l=document.createElement("canvas");return l.width=u,l.height=o,l}return new OffscreenCanvas(u,o)}function $oe(u,o){const l=Uoe.calculate(o.params,u.metadata?u.metadata.variables:[]),f=u.usvg_tree,m=f.width,x=f.height,b=o.transform?o.transform:new DOMMatrix,M=Math.max(1,Math.round(m*b.a)),P=Math.max(1,Math.round(x*b.d)),L=new DOMMatrix([M/m,0,0,P/x,0,0]),N=Mw(M,P).getContext("2d");return KP(N,L,f,f,l),N.getImageData(0,0,M,P)}function KP(u,o,l,f,m){for(const x of f.children)CV(u,o,l,x,m)}function CV(u,o,l,f,m){f.group?(u.save(),function(x,b,M,P,L){const N=P.mask_idx!=null?M.masks[P.mask_idx]:null,U=P.clip_path_idx!=null?M.clip_paths[P.clip_path_idx]:null;if(P.transform&&(b=kC(P.transform).preMultiplySelf(b)),!function(ne,ce,me){return ne.opacity!==255||ce||me}(P,U!=null,N!=null))return void KP(x,b,M,P,L);const G=Mw(x.canvas.width,x.canvas.height),te=G.getContext("2d");KP(te,b,M,P,L),U&&kV(te,b,M,U),N&&OV(te,b,M,N,L),x.globalAlpha=P.opacity/255,x.drawImage(G,0,0)}(u,o,l,f.group,m),u.restore()):f.path&&(u.save(),function(x,b,M,P,L){const N=LV(P);x.setTransform(b),P.paint_order===Toe.PAINT_ORDER_FILL_AND_STROKE?(AV(x,M,P,N,L),RV(x,M,P,N,L)):(RV(x,M,P,N,L),AV(x,M,P,N,L))}(u,o,l,f.path,m),u.restore())}function AV(u,o,l,f,m){const x=l.fill;if(!x)return;const b=x.opacity/255;switch(x.paint){case"rgb_color":u.fillStyle=Hx(x.rgb_color,x.opacity,m);break;case"linear_gradient_idx":u.fillStyle=DV(u,o.linear_gradients[x.linear_gradient_idx],b,m);break;case"radial_gradient_idx":u.fillStyle=PV(u,o.radial_gradients[x.radial_gradient_idx],b,m)}u.fill(f,MV(l))}function MV(u){return u.rule===XP.PATH_RULE_NON_ZERO?"nonzero":u.rule===XP.PATH_RULE_EVEN_ODD?"evenodd":void 0}function RV(u,o,l,f,m){const x=l.stroke;if(!x)return;u.lineWidth=x.width,u.miterLimit=x.miterlimit,u.setLineDash(x.dasharray),u.lineDashOffset=x.dashoffset;const b=x.opacity/255;switch(x.paint){case"rgb_color":u.strokeStyle=Hx(x.rgb_color,x.opacity,m);break;case"linear_gradient_idx":u.strokeStyle=DV(u,o.linear_gradients[x.linear_gradient_idx],b,m);break;case"radial_gradient_idx":u.strokeStyle=PV(u,o.radial_gradients[x.radial_gradient_idx],b,m)}switch(x.linejoin){case RC.LINE_JOIN_MITER_CLIP:case RC.LINE_JOIN_MITER:u.lineJoin="miter";break;case RC.LINE_JOIN_ROUND:u.lineJoin="round";break;case RC.LINE_JOIN_BEVEL:u.lineJoin="bevel"}switch(x.linecap){case ZP.LINE_CAP_BUTT:u.lineCap="butt";break;case ZP.LINE_CAP_ROUND:u.lineCap="round";break;case ZP.LINE_CAP_SQUARE:u.lineCap="square"}u.stroke(f)}function DV(u,o,l,f){if(o.stops.length===1){const G=o.stops[0];return Hx(G.rgb_color,G.opacity*l,f)}const m=kC(o.transform),{x1:x,y1:b,x2:M,y2:P}=o,L=m.transformPoint(new DOMPoint(x,b)),N=m.transformPoint(new DOMPoint(M,P)),U=u.createLinearGradient(L.x,L.y,N.x,N.y);for(const G of o.stops)U.addColorStop(G.offset,Hx(G.rgb_color,G.opacity*l,f));return U}function PV(u,o,l,f){if(o.stops.length===1){const G=o.stops[0];return Hx(G.rgb_color,G.opacity*l,f)}const m=kC(o.transform),{fx:x,fy:b,cx:M,cy:P}=o,L=m.transformPoint(new DOMPoint(x,b)),N=m.transformPoint(new DOMPoint(M,P)),U=u.createRadialGradient(L.x,L.y,0,N.x,N.y,o.r*((m.a+m.d)/2));for(const G of o.stops)U.addColorStop(G.offset,Hx(G.rgb_color,G.opacity*l,f));return U}function IV(u,o,l,f){const m=f.transform?kC(f.transform).preMultiplySelf(o):o,x=Mw(u.canvas.width,u.canvas.height),b=x.getContext("2d");for(const P of f.children)if(P.group)IV(b,m,l,P.group);else if(P.path){const L=P.path,N=new Path2D;N.addPath(LV(L),m),b.fill(N,MV(L))}const M=f.clip_path_idx!=null?l.clip_paths[f.clip_path_idx]:null;M&&kV(b,m,l,M),u.globalCompositeOperation="source-over",u.drawImage(x,0,0)}function kV(u,o,l,f){const m=Mw(u.canvas.width,u.canvas.height);IV(m.getContext("2d"),o,l,f),u.globalCompositeOperation="destination-in",u.drawImage(m,0,0)}function OV(u,o,l,f,m){if(f.children.length===0)return;const x=f.mask_idx!=null?l.masks[f.mask_idx]:null;x&&OV(u,o,l,x,m);const b=u.canvas.width,M=u.canvas.height,P=Mw(b,M),L=P.getContext("2d"),N=f.width,U=f.height,G=f.left,te=f.top,ne=new Path2D,ce=new Path2D;ce.rect(G,te,N,U),ne.addPath(ce,o),L.clip(ne);for(const Ie of f.children)CV(L,o,l,Ie,m);const me=L.getImageData(0,0,b,M),ve=me.data;if(f.mask_type===SV.MASK_TYPE_LUMINANCE)for(let Ie=0;Ie<ve.length;Ie+=4)ve[Ie+3]=ve[Ie+3]/255*(.2126*ve[Ie]+.7152*ve[Ie+1]+.0722*ve[Ie+2]);L.putImageData(me,0,0),u.globalCompositeOperation="destination-in",u.drawImage(P,0,0)}function kC(u){return u?new DOMMatrix([u.sx,u.ky,u.kx,u.sy,u.tx,u.ty]):new DOMMatrix}function LV(u){const o=new Path2D,l=u.step;let f=u.diffs[0]*l,m=u.diffs[1]*l;o.moveTo(f,m);for(let x=0,b=2;x<u.commands.length;x++)switch(u.commands[x]){case Aw.PATH_COMMAND_MOVE:f+=u.diffs[b++]*l,m+=u.diffs[b++]*l,o.moveTo(f,m);break;case Aw.PATH_COMMAND_LINE:f+=u.diffs[b++]*l,m+=u.diffs[b++]*l,o.lineTo(f,m);break;case Aw.PATH_COMMAND_QUAD:{const M=f+u.diffs[b++]*l,P=m+u.diffs[b++]*l;f=M+u.diffs[b++]*l,m=P+u.diffs[b++]*l,o.quadraticCurveTo(M,P,f,m);break}case Aw.PATH_COMMAND_CUBIC:{const M=f+u.diffs[b++]*l,P=m+u.diffs[b++]*l,L=M+u.diffs[b++]*l,N=P+u.diffs[b++]*l;f=L+u.diffs[b++]*l,m=N+u.diffs[b++]*l,o.bezierCurveTo(M,P,L,N,f,m);break}case Aw.PATH_COMMAND_CLOSE:o.closePath()}return o}class OC{constructor(o){this.capacity=o,this.cache=new Map}get(o){if(!this.cache.has(o))return;const l=this.cache.get(o);return this.cache.delete(o),this.cache.set(o,l),l}put(o,l){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(o,l)}delete(o){this.cache.delete(o)}}In(OC,"LRUCache");class QP{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(o){return new Os(o,o.data)}getFromCache(o,l,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new OC(150)),this.cacheMap.get(f).get(kd(o.toString(),l))}setInCache(o,l,f,m){this.cacheDependenciesMap.has(m)||this.cacheDependenciesMap.set(m,new Map),this.cacheMap.has(m)||this.cacheMap.set(m,new OC(150));const x=this.cacheDependenciesMap.get(m),b=kd(o.id.toString(),f);x.get(b)||x.set(b,new Set);const M=this.cacheMap.get(m),P=o.toString();x.get(b).add(P),M.put(kd(o.toString(),f),l)}removeImagesFromCacheByIds(o,l,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const m=this.cacheMap.get(f),x=this.cacheDependenciesMap.get(f);for(const b of o){const M=kd(b.toString(),l);if(x.has(M)){for(const P of x.get(M))m.delete(P);x.delete(M)}}}rasterize(o,l,f,m,x=$oe){const b=this.getFromCache(o,f,m);if(b)return b.clone();const M=x(l.icon,o.options),P=QP._getImage(M);return this.setInCache(o,P,f,m),P.clone()}}class zV{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,l){const f=this.toIdx(o,l);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,l){return this.leaves[this.toIdx(o,l)]}toIdx(o,l){return l*this.size+o}}function FV(u,o,l,f){let m=0,x=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(f[b])<1e-15){if(l[b]<u[b]||l[b]>o[b])return null}else{const M=1/f[b];let P=(u[b]-l[b])*M,L=(o[b]-l[b])*M;if(P>L){const N=P;P=L,L=N}if(P>m&&(m=P),L<x&&(x=L),m>x)return null}return m}function BV(u,o,l,f,m,x,b,M,P,L,N){const U=f-u,G=m-o,te=x-l,ne=b-u,ce=M-o,me=P-l,ve=N[1]*me-N[2]*ce,Ie=N[2]*ne-N[0]*me,Me=N[0]*ce-N[1]*ne,ue=U*ve+G*Ie+te*Me;if(Math.abs(ue)<1e-15)return null;const we=1/ue,Pe=L[0]-u,Be=L[1]-o,Qe=L[2]-l,rt=(Pe*ve+Be*Ie+Qe*Me)*we;if(rt<0||rt>1)return null;const ot=Be*te-Qe*G,ct=Qe*U-Pe*te,At=Pe*G-Be*U,Yt=(N[0]*ot+N[1]*ct+N[2]*At)*we;return Yt<0||rt+Yt>1?null:(ne*ot+ce*ct+me*At)*we}function NV(u,o,l){return(u-o)/(l-o)}function jV(u,o,l,f,m,x,b,M,P){const L=1<<l,N=x-f,U=b-m,G=(u+1)/L*N+f,te=(o+0)/L*U+m,ne=(o+1)/L*U+m;M[0]=(u+0)/L*N+f,M[1]=te,P[0]=G,P[1]=ne}class VV{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(x){const b=Math.ceil(Math.log2(x.dim/8)),M=[];let P=Math.ceil(Math.pow(2,b));const L=1/P,N=(te,ne,ce,me,ve)=>{const Ie=me?1:0,Me=(te+1)*ce-Ie,ue=ne*ce,we=(ne+1)*ce-Ie;ve[0]=te*ce,ve[1]=ue,ve[2]=Me,ve[3]=we};let U=new zV(P);const G=[];for(let te=0;te<P*P;te++){N(te%P,Math.floor(te/P),L,!1,G);const ne=Py(G[0],G[1],x),ce=Py(G[2],G[1],x),me=Py(G[2],G[3],x),ve=Py(G[0],G[3],x);U.minimums.push(Math.min(ne,ce,me,ve)),U.maximums.push(Math.max(ne,ce,me,ve)),U.leaves.push(1)}for(M.push(U),P/=2;P>=1;P/=2){const te=M[M.length-1];U=new zV(P);for(let ne=0;ne<P*P;ne++){N(ne%P,Math.floor(ne/P),2,!0,G);const ce=te.getElevation(G[0],G[1]),me=te.getElevation(G[2],G[1]),ve=te.getElevation(G[2],G[3]),Ie=te.getElevation(G[0],G[3]),Me=te.isLeaf(G[0],G[1]),ue=te.isLeaf(G[2],G[1]),we=te.isLeaf(G[2],G[3]),Pe=te.isLeaf(G[0],G[3]),Be=Math.min(ce.min,me.min,ve.min,Ie.min),Qe=Math.max(ce.max,me.max,ve.max,Ie.max),rt=Me&&ue&&we&&Pe;U.maximums.push(Qe),U.minimums.push(Be),U.leaves.push(Qe-Be<=5&&rt?1:0)}M.push(U)}return M}(this.dem),f=l.length-1,m=l[f];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(l,0,0,f,0)}raycastRoot(o,l,f,m,x,b,M=1){return FV([o,l,-100],[f,m,this.maximums[0]*M],x,b)}raycast(o,l,f,m,x,b,M=1){if(!this.nodeCount)return null;const P=this.raycastRoot(o,l,f,m,x,b,M);if(P==null)return null;const L=[],N=[],U=[],G=[],te=[{idx:0,t:P,nodex:0,nodey:0,depth:0}];for(;te.length>0;){const{idx:ne,t:ce,nodex:me,nodey:ve,depth:Ie}=te.pop();if(this.leaves[ne]){jV(me,ve,Ie,o,l,f,m,U,G);const ue=1<<Ie,we=(me+0)/ue,Pe=(me+1)/ue,Be=(ve+0)/ue,Qe=(ve+1)/ue,rt=Py(we,Be,this.dem)*M,ot=Py(Pe,Be,this.dem)*M,ct=Py(Pe,Qe,this.dem)*M,At=Py(we,Qe,this.dem)*M,Yt=BV(U[0],U[1],rt,G[0],U[1],ot,G[0],G[1],ct,x,b),Vt=BV(G[0],G[1],ct,U[0],G[1],At,U[0],U[1],rt,x,b),qt=Math.min(Yt!==null?Yt:Number.MAX_VALUE,Vt!==null?Vt:Number.MAX_VALUE);if(qt!==Number.MAX_VALUE)return qt;{const nn=Je([],x,b,ce);if(UV(rt,ot,At,ct,NV(nn[0],U[0],G[0]),NV(nn[1],U[1],G[1]))>=nn[2])return ce}continue}let Me=0;for(let ue=0;ue<this._siblingOffset.length;ue++){jV((me<<1)+this._siblingOffset[ue][0],(ve<<1)+this._siblingOffset[ue][1],Ie+1,o,l,f,m,U,G),U[2]=-100,G[2]=this.maximums[this.childOffsets[ne]+ue]*M;const we=FV(U,G,x,b);if(we!=null){const Pe=we;L[ue]=Pe;let Be=!1;for(let Qe=0;Qe<Me&&!Be;Qe++)Pe>=L[N[Qe]]&&(N.splice(Qe,0,ue),Be=!0);Be||(N[Me]=ue),Me++}}for(let ue=0;ue<Me;ue++){const we=N[ue];te.push({idx:this.childOffsets[ne]+we,t:L[we],nodex:(me<<1)+this._siblingOffset[we][0],nodey:(ve<<1)+this._siblingOffset[we][1],depth:Ie+1})}}return null}_addNode(o,l,f){return this.minimums.push(o),this.maximums.push(l),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,l,f,m,x){if(o[m].isLeaf(l,f)===1)return;this.childOffsets[x]||(this.childOffsets[x]=this.nodeCount);const b=m-1,M=o[b];let P=0,L=0;for(let N=0;N<this._siblingOffset.length;N++){const U=2*l+this._siblingOffset[N][0],G=2*f+this._siblingOffset[N][1],te=M.getElevation(U,G),ne=M.isLeaf(U,G),ce=this._addNode(te.min,te.max,ne);ne&&(P|=1<<N),L||(L=ce)}for(let N=0;N<this._siblingOffset.length;N++)P&1<<N||this._construct(o,2*l+this._siblingOffset[N][0],2*f+this._siblingOffset[N][1],b,L+N)}}function UV(u,o,l,f,m,x){return ar(ar(u,l,x),ar(o,f,x),m)}function Py(u,o,l){const f=l.dim,m=We(u*f-.5,0,f-1),x=We(o*f-.5,0,f-1),b=Math.floor(m),M=Math.floor(x),P=Math.min(b+1,f-1),L=Math.min(M+1,f-1);return UV(l.get(b,M),l.get(P,M),l.get(b,L),l.get(P,L),m-b,x-M)}const qoe={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Hoe(u,o,l){return(256*u*256+256*o+l)/10-1e4}function Goe(u,o,l){return 256*u+o+l/256-32768}class LC{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,l,f,m=!1){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Ir(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,b=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.floatView=new Float32Array(l.data.buffer),this.borderReady=m,this._modifiedForSources={},!m){for(let P=0;P<x;P++)b[this._idx(-1,P)]=b[this._idx(0,P)],b[this._idx(x,P)]=b[this._idx(x-1,P)],b[this._idx(P,-1)]=b[this._idx(P,0)],b[this._idx(P,x)]=b[this._idx(P,x-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(x,-1)]=b[this._idx(x-1,0)],b[this._idx(-1,x)]=b[this._idx(0,x-1)],b[this._idx(x,x)]=b[this._idx(x-1,x-1)]}const M=f==="terrarium"?Goe:Hoe;for(let P=0;P<b.length;++P){const L=4*P;this.floatView[P]=M(this.pixels[L],this.pixels[L+1],this.pixels[L+2])}this._timestamp=wl.now()}_buildQuadTree(){this._tree=new VV(this)}get(o,l,f=!1){f&&(o=We(o,-1,this.dim),l=We(l,-1,this.dim));const m=this._idx(o,l);return this.floatView[m]}set(o,l,f){const m=this._idx(o,l),x=this.floatView[m];return this.floatView[m]=f,f-x}static getUnpackVector(o){return qoe[o]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}static pack(o,l){const f=[0,0,0,0],m=LC.getUnpackVector(l);let x=Math.floor((o+m[3])/m[2]);return f[2]=x%256,x=Math.floor(x/256),f[1]=x%256,x=Math.floor(x/256),f[0]=x,f}getPixels(){return new V1({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,l,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,x=l*this.dim+this.dim,b=f*this.dim,M=f*this.dim+this.dim;switch(l){case-1:m=x-1;break;case 1:x=m+1}switch(f){case-1:b=M-1;break;case 1:M=b+1}const P=-l*this.dim,L=-f*this.dim;for(let N=b;N<M;N++)for(let U=m;U<x;U++){const G=4*this._idx(U,N),te=4*this._idx(U+P,N+L);this.pixels[G+0]=o.pixels[te+0],this.pixels[G+1]=o.pixels[te+1],this.pixels[G+2]=o.pixels[te+2],this.pixels[G+3]=o.pixels[te+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Woe(u,o,l){u===1?o.headerLength=l.readFixed32():u===2?o.x=l.readVarint():u===3?o.y=l.readVarint():u===4?o.z=l.readVarint():u===5&&o.layers.push(function(f,m){return f.readFields(Qoe,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},m)}(l,l.readVarint()+l.pos))}function Yoe(u,o,l){u===1?(o.delta_filter=function(f,m){return f.readFields(Xoe,{blockSize:0},m)}(l,l.readVarint()+l.pos),o.filter="delta_filter"):u===2?(l.readVarint(),o.filter="zigzag_filter"):u===3?(l.readVarint(),o.filter="bitshuffle_filter"):u===4&&(l.readVarint(),o.filter="byteshuffle_filter")}function Xoe(u,o,l){u===1&&(o.blockSize=l.readVarint())}function Zoe(u,o,l){u===1?(l.readVarint(),o.codec="gzip_data"):u===2?(l.readVarint(),o.codec="jpeg_image"):u===3?(l.readVarint(),o.codec="webp_image"):u===4&&(l.readVarint(),o.codec="png_image")}function Koe(u,o,l){let f=0,m=0;u===1?o.firstByte=l.readFixed64():u===2?o.lastByte=l.readFixed64():u===3?o.filters.push(function(x,b){return x.readFields(Yoe,{},b)}(l,l.readVarint()+l.pos)):u===4?o.codec=function(x,b){return x.readFields(Zoe,{},b)}(l,l.readVarint()+l.pos):u===5?m=l.readFloat():u===6?f=l.readFloat():u===7?o.bands.push(l.readString()):u===8?o.offset=l.readDouble():u===9&&(o.scale=l.readDouble()),o.offset===0&&(o.offset=m),o.scale===0&&(o.scale=f)}function Qoe(u,o,l){u===1?o.version=l.readVarint():u===2?o.name=l.readString():u===3?o.units=l.readString():u===4?o.tileSize=l.readVarint():u===5?o.buffer=l.readVarint():u===6?o.pixelFormat=l.readVarint():u===7&&o.dataIndex.push(function(f,m){return f.readFields(Koe,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},m)}(l,l.readVarint()+l.pos))}function Joe(u,o,l){if(u===2)(function(f,m,x){f.readFields(ese,x,m)})(l,l.readVarint()+l.pos,o);else if(u===3)throw new Error("Not implemented")}function ese(u,o,l){if(u===1){let f=0;const m=l.readVarint()+l.pos;for(;l.pos<m;)o[f++]=l.readVarint()}}function tse(u,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let l=o[3];for(let f=2;f>=1;f--){const m=f===1?1:0,x=f===2?1:0;for(let b=0;b<o[0];b++){const M=o[1]*b;for(let P=m;P<o[1];P++){const L=o[2]*(P+M);for(let N=x;N<o[2];N++){const U=o[3]*(N+L);for(let G=0;G<o[3];G++){const te=U+G;u[te]+=u[te-l]}}}}l*=o[f]}return u}function nse(u){for(let o=0,l=u.length;o<l;o++)u[o]=u[o]>>>1^-(1&u[o]);return u}function rse(u,o){switch(o){case"uint32":return u;case"uint16":for(let l=0;l<u.length;l+=2){const f=u[l],m=u[l+1];u[l]=(240&f)>>4|(61440&f)>>8|(240&m)<<4|61440&m,u[l+1]=15&f|(3840&f)>>4|(15&m)<<8|(3840&m)<<4}return u;case"uint8":for(let l=0;l<u.length;l+=4){const f=u[l],m=u[l+1],x=u[l+2],b=u[l+3];u[l+0]=(192&f)>>6|(192&m)>>4|(192&x)>>2|192&b,u[l+1]=(48&f)>>4|(48&m)>>2|48&x|(48&b)<<2,u[l+2]=(12&f)>>2|12&m|(12&x)<<2|(12&b)<<4,u[l+3]=3&f|(3&m)<<2|(3&x)<<4|(3&b)<<6}return u;default:throw new Error(`Invalid pixel format, "${o}"`)}}In(LC,"DEMData"),In(VV,"DemMinMaxQuadTree",{omit:["dem"]});var Xu=Uint8Array,Rw=Uint16Array,ise=Int32Array,$V=new Xu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qV=new Xu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ose=new Xu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HV=function(u,o){for(var l=new Rw(31),f=0;f<31;++f)l[f]=o+=1<<u[f-1];var m=new ise(l[30]);for(f=1;f<30;++f)for(var x=l[f];x<l[f+1];++x)m[x]=x-l[f]<<5|f;return{b:l,r:m}},GV=HV($V,2),WV=GV.b,sse=GV.r;WV[28]=258,sse[258]=28;for(var ase=HV(qV,0).b,YV=new Rw(32768),xs=0;xs<32768;++xs){var Gx=(43690&xs)>>1|(21845&xs)<<1;YV[xs]=((65280&(Gx=(61680&(Gx=(52428&Gx)>>2|(13107&Gx)<<2))>>4|(3855&Gx)<<4))>>8|(255&Gx)<<8)>>1}var Dw=function(u,o,l){for(var f=u.length,m=0,x=new Rw(o);m<f;++m)u[m]&&++x[u[m]-1];var b,M=new Rw(o);for(m=1;m<o;++m)M[m]=M[m-1]+x[m-1]<<1;b=new Rw(1<<o);var P=15-o;for(m=0;m<f;++m)if(u[m])for(var L=m<<4|u[m],N=o-u[m],U=M[u[m]-1]++<<N,G=U|(1<<N)-1;U<=G;++U)b[YV[U]>>P]=L;return b},Pw=new Xu(288);for(xs=0;xs<144;++xs)Pw[xs]=8;for(xs=144;xs<256;++xs)Pw[xs]=9;for(xs=256;xs<280;++xs)Pw[xs]=7;for(xs=280;xs<288;++xs)Pw[xs]=8;var XV=new Xu(32);for(xs=0;xs<32;++xs)XV[xs]=5;var lse=Dw(Pw,9),cse=Dw(XV,5),JP=function(u){for(var o=u[0],l=1;l<u.length;++l)u[l]>o&&(o=u[l]);return o},yf=function(u,o,l){var f=o/8|0;return(u[f]|u[f+1]<<8)>>(7&o)&l},eI=function(u,o){var l=o/8|0;return(u[l]|u[l+1]<<8|u[l+2]<<16)>>(7&o)},use=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vf=function(u,o,l){var f=new Error(o||use[u]);if(f.code=u,Error.captureStackTrace&&Error.captureStackTrace(f,vf),!l)throw f;return f},dse=new Xu(0),hse=typeof TextDecoder<"u"&&new TextDecoder;try{hse.decode(dse,{stream:!0})}catch{}const fse={gzip_data:"gzip"};class Wd extends Error{constructor(o){super(o),this.name="MRTError"}}const pse={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},ZV={uint32:1,uint16:2,uint8:4},mse={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let tI;class zC{constructor(o=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){const l=this.layers[o];if(!l)throw new Wd(`Layer '${o}' not found`);return l}getHeaderLength(o){const l=new Uint8Array(o),f=new DataView(o);if(l[0]!==13)throw new Wd("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(o){const l=new Uint8Array(o),f=this.getHeaderLength(o);if(l.length<f)throw new Wd(`Expected header with length >= ${f} but got buffer of length ${l.length}`);const m=function(x,b){return x.readFields(Woe,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new tI(l.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==m.x||this.y!==m.y||this.z!==m.z))throw new Wd(`Invalid attempt to parse header ${m.z}/${m.x}/${m.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=m.x,this.y=m.y,this.z=m.z;for(const x of m.layers)this.layers[x.name]=new KV(x,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const l=[],f=this.getLayer(o.layerName);for(let m of o.blockIndices){const x=f.dataIndex[m],b=x.firstByte-o.firstByte,M=x.lastByte-o.firstByte;if(f._blocksInProgress.has(m))continue;const P={layerName:f.name,firstByte:b,lastByte:M,pixelFormat:f.pixelFormat,blockIndex:m,blockShape:[x.bands.length].concat(f.bandShape),buffer:f.buffer,codec:x.codec.codec,filters:x.filters.map(L=>L.filter)};f._blocksInProgress.add(m),l.push(P)}return new QV(l,()=>{l.forEach(m=>f._blocksInProgress.delete(m.blockIndex))},(m,x)=>{if(l.forEach(b=>f._blocksInProgress.delete(b.blockIndex)),m)throw m;x.forEach(b=>{this.getLayer(b.layerName).processDecodedData(b)})})}}class KV{constructor({version:o,name:l,units:f,tileSize:m,pixelFormat:x,buffer:b,dataIndex:M},P){if(this.version=o,this.version!==1)throw new Wd(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=l,this.units=f,this.tileSize=m,this.buffer=b,this.pixelFormat=pse[x],this.dataIndex=M,this.bandShape=[m+2*b,m+2*b,ZV[this.pixelFormat]],this._decodedBlocks=new OC(P?P.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return ZV[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:o})=>o).flat()}processDecodedData(o){const l=o.blockIndex.toString();this._decodedBlocks.get(l)||this._decodedBlocks.put(l,o.data)}getBlockForBand(o){let l=0;switch(typeof o){case"string":for(const[f,m]of this.dataIndex.entries()){for(const[x,b]of m.bands.entries())if(b===o)return{bandIndex:l+x,blockIndex:f,blockBandIndex:x};l+=m.bands.length}break;case"number":for(const[f,m]of this.dataIndex.entries()){if(o>=l&&o<l+m.bands.length)return{bandIndex:o,blockIndex:f,blockBandIndex:o-l};l+=m.bands.length}break;default:throw new Wd(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(o){let l=1/0,f=-1/0;const m=[],x=new Set;for(const b of o){const{blockIndex:M}=this.getBlockForBand(b);if(M<0)throw new Wd(`Invalid band: ${JSON.stringify(b)}`);const P=this.dataIndex[M];m.includes(M)||m.push(M),x.add(M),l=Math.min(l,P.firstByte),f=Math.max(f,P.lastByte)}if(x.size>this.cacheSize)throw new Wd(`Number of blocks to decode (${x.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:l,lastByte:f,blockIndices:m}}hasBand(o){const{blockIndex:l}=this.getBlockForBand(o);return l>=0}hasDataForBand(o){const{blockIndex:l}=this.getBlockForBand(o);return l>=0&&!!this._decodedBlocks.get(l.toString())}getBandView(o){const{blockIndex:l,blockBandIndex:f}=this.getBlockForBand(o);if(l<0)throw new Wd(`Band not found: ${JSON.stringify(o)}`);const m=this._decodedBlocks.get(l.toString());if(!m)throw new Wd(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const x=this.dataIndex[l],b=this.bandShape.reduce((L,N)=>L*N,1),M=f*b,P=m.subarray(M,M+b);return{data:P,bytes:new Uint8Array(P.buffer).subarray(P.byteOffset,P.byteOffset+P.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:x.offset,scale:x.scale}}}zC.setPbf=function(u){tI=u};class QV{constructor(o,l,f){this.tasks=o,this._onCancel=l,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,l){this._finalized||(this._onComplete(o,l),this._finalized=!0)}}zC.performDecoding=function(u,o){const l=new Uint8Array(u);return Promise.all(o.tasks.map(f=>{const{layerName:m,firstByte:x,lastByte:b,pixelFormat:M,blockShape:P,blockIndex:L,filters:N,codec:U}=f,G=l.subarray(x,b+1),te=new Uint32Array(P[0]*P[1]*P[2]);let ne;if(U!=="gzip_data")throw new Wd(`Unhandled codec: ${U}`);return ne=function(ce,me){if(!globalThis.DecompressionStream&&me==="gzip_data")return Promise.resolve(((ue=function(Be){Be[0]==31&&Be[1]==139&&Be[2]==8||vf(6,"invalid gzip data");var Qe=Be[3],rt=10;4&Qe&&(rt+=2+(Be[10]|Be[11]<<8));for(var ot=(Qe>>3&1)+(Qe>>4&1);ot>0;ot-=!Be[rt++]);return rt+(2&Qe)}(Me=ce))+8>Me.length&&vf(6,"invalid gzip data"),function(Be,Qe,rt,ot){var ct=Be.length;if(!ct||Qe.f&&!Qe.l)return rt||new Xu(0);var At=!rt,Yt=At||Qe.i!=2,Vt=Qe.i;At&&(rt=new Xu(3*ct));var qt,nn,Et=function(Io){var so=rt.length;if(Io>so){var Qi=new Xu(Math.max(2*so,Io));Qi.set(rt),rt=Qi}},Ut=Qe.f||0,bt=Qe.p||0,Ct=Qe.b||0,on=Qe.l,un=Qe.d,Qn=Qe.m,Nn=Qe.n,Sn=8*ct;do{if(!on){Ut=yf(Be,bt,1);var rn=yf(Be,bt+1,3);if(bt+=3,!rn){var Mr=Be[(ze=4+((bt+7)/8|0))-4]|Be[ze-3]<<8,Hn=ze+Mr;if(Hn>ct){Vt&&vf(0);break}Yt&&Et(Ct+Mr),rt.set(Be.subarray(ze,Hn),Ct),Qe.b=Ct+=Mr,Qe.p=bt=8*Hn,Qe.f=Ut;continue}if(rn==1)on=lse,un=cse,Qn=9,Nn=5;else if(rn==2){var Gn=yf(Be,bt,31)+257,br=yf(Be,bt+10,15)+4,zr=Gn+yf(Be,bt+5,31)+1;bt+=14;for(var Br=new Xu(zr),Gr=new Xu(19),$r=0;$r<br;++$r)Gr[ose[$r]]=yf(Be,bt+3*$r,7);bt+=3*br;var jr=JP(Gr),qi=(1<<jr)-1,eo=Dw(Gr,jr);for($r=0;$r<zr;){var ze,Ve=eo[yf(Be,bt,qi)];if(bt+=15&Ve,(ze=Ve>>4)<16)Br[$r++]=ze;else{var Pt=0,mn=0;for(ze==16?(mn=3+yf(Be,bt,3),bt+=2,Pt=Br[$r-1]):ze==17?(mn=3+yf(Be,bt,7),bt+=3):ze==18&&(mn=11+yf(Be,bt,127),bt+=7);mn--;)Br[$r++]=Pt}}var Cn=Br.subarray(0,Gn),Tn=Br.subarray(Gn);Qn=JP(Cn),Nn=JP(Tn),on=Dw(Cn,Qn),un=Dw(Tn,Nn)}else vf(1);if(bt>Sn){Vt&&vf(0);break}}Yt&&Et(Ct+131072);for(var Kn=(1<<Qn)-1,gr=(1<<Nn)-1,ei=bt;;ei=bt){var ti=(Pt=on[eI(Be,bt)&Kn])>>4;if((bt+=15&Pt)>Sn){Vt&&vf(0);break}if(Pt||vf(2),ti<256)rt[Ct++]=ti;else{if(ti==256){ei=bt,on=null;break}var Vr=ti-254;ti>264&&(Vr=yf(Be,bt,(1<<(ni=$V[$r=ti-257]))-1)+WV[$r],bt+=ni);var Fi=un[eI(Be,bt)&gr],Ki=Fi>>4;if(Fi||vf(3),bt+=15&Fi,Tn=ase[Ki],Ki>3){var ni=qV[Ki];Tn+=eI(Be,bt)&(1<<ni)-1,bt+=ni}if(bt>Sn){Vt&&vf(0);break}Yt&&Et(Ct+131072);var To=Ct+Vr;if(Ct<Tn){var to=0-Tn,Li=Math.min(Tn,To);for(to+Ct<0&&vf(3);Ct<Li;++Ct)rt[Ct]=(void 0)[to+Ct]}for(;Ct<To;++Ct)rt[Ct]=rt[Ct-Tn]}}Qe.l=on,Qe.p=ei,Qe.b=Ct,Qe.f=Ut,on&&(Ut=1,Qe.m=Qn,Qe.d=un,Qe.n=Nn)}while(!Ut);return Ct!=rt.length&&At?(qt=rt,((nn=Ct)==null||nn>qt.length)&&(nn=qt.length),new Xu(qt.subarray(0,nn))):rt.subarray(0,Ct)}(Me.subarray(ue,-8),{i:2},new Xu(((ve=Me)[(Ie=ve.length)-4]|ve[Ie-3]<<8|ve[Ie-2]<<16|ve[Ie-1]<<24)>>>0))));var ve,Ie,Me,ue;const we=fse[me];if(!we)throw new Error(`Unhandled codec: ${me}`);const Pe=new globalThis.DecompressionStream(we);return new Response(new Blob([ce]).stream().pipeThrough(Pe)).arrayBuffer().then(Be=>new Uint8Array(Be))}(G,U).then(ce=>(function(me,ve){me.readFields(Joe,ve)}(new tI(ce),te),new mse[M](te.buffer))),ne.then(ce=>{for(let me=N.length-1;me>=0;me--)switch(N[me]){case"delta_filter":tse(ce,P);break;case"zigzag_filter":nse(ce);break;case"bitshuffle_filter":rse(ce,M);break;default:throw new Wd(`Unhandled filter "${N[me]}"`)}return{layerName:m,blockIndex:L,data:ce}}).catch(ce=>{throw ce})}))},In(QV,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),In(zC,"MapboxRasterTile"),In(KV,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Iw,nI,_f,Wx,rI,Yx=null;function JV(){return zi(self)&&self.worker.dracoUrl?self.worker.dracoUrl:nI||Yo.DRACO_URL}function eU(){if(zi(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Wx)return Wx;const u=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Wx=WebAssembly.validate(u)?Yo.MESHOPT_SIMD_URL:Yo.MESHOPT_URL,Wx}const FC={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gse={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},kw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function tU(u,o,l){const f=l.json.bufferViews.length,m=l.buffers.length;o.bufferView=f,l.json.bufferViews[f]={buffer:m,byteLength:u.byteLength},l.buffers[m]=u}const iI="KHR_draco_mesh_compression";function yse(u,o){const l=u.extensions&&u.extensions[iI];if(!l)return;const f=new _f.Decoder,m=oU(o,l.bufferView),x=new _f.Mesh;if(!f.DecodeArrayToMesh(m,m.byteLength,x))throw new Error("Failed to decode Draco mesh");const b=o.json.accessors[u.indices],M=FC[b.componentType],P=b.count*M.BYTES_PER_ELEMENT,L=_f._malloc(P);M===Uint16Array?f.GetTrianglesUInt16Array(x,P,L):f.GetTrianglesUInt32Array(x,P,L),tU(_f.memory.buffer.slice(L,L+P),b,o),_f._free(L);for(const N of Object.keys(l.attributes)){const U=f.GetAttributeByUniqueId(x,l.attributes[N]),G=o.json.accessors[u.attributes[N]],te=gse[G.componentType],ne=G.count*kw[G.type]*FC[G.componentType].BYTES_PER_ELEMENT,ce=_f._malloc(ne);f.GetAttributeDataArrayForAllPoints(x,U,_f[te],ne,ce),tU(_f.memory.buffer.slice(ce,ce+ne),G,o),_f._free(ce)}f.destroy(),x.destroy(),delete u.extensions[iI]}const BC="EXT_meshopt_compression";function vse(u,o){if(!u.extensions||!u.extensions[BC])return;const l=u.extensions[BC],f=new Uint8Array(o.buffers[l.buffer],l.byteOffset||0,l.byteLength||0),m=new Uint8Array(l.count*l.byteStride);rI.decodeGltfBuffer(m,l.count,l.byteStride,f,l.mode,l.filter),u.buffer=o.buffers.length,u.byteOffset=0,o.buffers[u.buffer]=m.buffer,delete u.extensions[BC]}const nU=1179937895,rU=new TextDecoder("utf8");function iU(u,o){return new URL(u,o).href}function _se(u,o,l,f){return fetch(iU(u.uri,f)).then(m=>m.arrayBuffer()).then(m=>{o.buffers[l]=m})}function oU(u,o){const l=u.json.bufferViews[o];return new Uint8Array(u.buffers[l.buffer],l.byteOffset||0,l.byteLength)}function xse(u,o,l,f){if(u.uri){const m=iU(u.uri,f);return fetch(m).then(x=>x.blob()).then(x=>createImageBitmap(x)).then(x=>{o.images[l]=x})}if(u.bufferView!==void 0){const m=oU(o,u.bufferView),x=new Blob([m],{type:u.mimeType});return createImageBitmap(x).then(b=>{o.images[l]=b})}}function sU(u,o=0,l){const f={json:null,images:[],buffers:[]};if(new Uint32Array(u,o,1)[0]===nU){const N=new Uint32Array(u,o);let U=2;const G=(N[U++]>>2)-3,te=N[U++]>>2;if(U++,f.json=JSON.parse(rU.decode(N.subarray(U,U+te))),U+=te,U<G){const ne=N[U++];U++;const ce=o+(U<<2);f.buffers[0]=u.slice(ce,ce+ne)}}else f.json=JSON.parse(rU.decode(new Uint8Array(u,o)));const{buffers:m,images:x,meshes:b,extensionsUsed:M,bufferViews:P}=f.json;let L=Promise.resolve();if(m){const N=[];for(let U=0;U<m.length;U++){const G=m[U];G.uri?N.push(_se(G,f,U,l)):f.buffers[U]||(f.buffers[U]=null)}L=Promise.all(N)}return L.then(()=>{const N=[],U=M&&M.includes(iI),G=M&&M.includes(BC);if(U&&N.push(function(){if(!_f)return Iw??(Iw=function(te){let ne,ce=null;function me(){ne=new Uint8Array(ce.buffer)}function ve(){throw new Error("Unexpected Draco error.")}const Ie={a:{a:ve,d:function(Me,ue,we){return ne.copyWithin(Me,ue,ue+we)},c:function(Me){const ue=ne.length,we=Math.max(Me>>>0,Math.ceil(1.2*ue)),Pe=Math.ceil((we-ue)/65536);try{return ce.grow(Pe),me(),!0}catch{return!1}},b:ve}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(te,Ie):te.then(Me=>Me.arrayBuffer()).then(Me=>WebAssembly.instantiate(Me,Ie))).then(Me=>{const{Rb:ue,Qb:we,P:Pe,T:Be,X:Qe,Ja:rt,La:ot,Qa:ct,Va:At,Wa:Yt,eb:Vt,jb:qt,f:nn,e:Et,yb:Ut,zb:bt,Ab:Ct,Bb:on,Db:un,Gb:Qn}=Me.instance.exports;ce=Et;const Nn=(()=>{let Sn=0,rn=0,Mr=0,Hn=0;return Gn=>{Mr&&(ue(Hn),ue(Sn),rn+=Mr,Mr=Sn=0),Sn||(rn+=128,Sn=we(rn));const br=Gn.length+7&-8;let zr=Sn;br>=rn&&(Mr=br,zr=Hn=we(br));for(let Br=0;Br<Gn.length;Br++)ne[zr+Br]=Gn[Br];return zr}})();return me(),nn(),{memory:Et,_free:ue,_malloc:we,Mesh:class{constructor(){this.ptr=Pe()}destroy(){Be(this.ptr)}},Decoder:class{constructor(){this.ptr=rt()}destroy(){qt(this.ptr)}DecodeArrayToMesh(Sn,rn,Mr){const Hn=Nn(Sn),Gn=ot(this.ptr,Hn,rn,Mr.ptr);return!!Qe(Gn)}GetAttributeByUniqueId(Sn,rn){return{ptr:ct(this.ptr,Sn.ptr,rn)}}GetTrianglesUInt16Array(Sn,rn,Mr){At(this.ptr,Sn.ptr,rn,Mr)}GetTrianglesUInt32Array(Sn,rn,Mr){Yt(this.ptr,Sn.ptr,rn,Mr)}GetAttributeDataArrayForAllPoints(Sn,rn,Mr,Hn,Gn){Vt(this.ptr,Sn.ptr,rn.ptr,Mr,Hn,Gn)}},DT_INT8:Ut(),DT_UINT8:bt(),DT_INT16:Ct(),DT_UINT16:on(),DT_UINT32:un(),DT_FLOAT32:Qn()}})}(fetch(JV())),Iw.then(te=>{_f=te,Iw=void 0}))}()),G&&N.push(function(){if(rI)return;const te=function(ne){let ce;const me=WebAssembly.instantiateStreaming(ne,{}).then(Me=>{ce=Me.instance,ce.exports.__wasm_call_ctors()}),ve={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ie={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:me,supported:!0,decodeGltfBuffer(Me,ue,we,Pe,Be,Qe){(function(rt,ot,ct,At,Yt,Vt,qt){const nn=rt.exports.sbrk,Et=At+3&-4,Ut=nn(Et*Yt),bt=nn(Vt.length),Ct=new Uint8Array(rt.exports.memory.buffer);Ct.set(Vt,bt);const on=ot(Ut,At,Yt,bt,Vt.length);if(on===0&&qt&&qt(Ut,Et,Yt),ct.set(Ct.subarray(Ut,Ut+At*Yt)),nn(Ut-nn(0)),on!==0)throw new Error(`Malformed buffer data: ${on}`)})(ce,ce.exports[Ie[Be]],Me,ue,we,Pe,ce.exports[ve[Qe]])}}}(fetch(eU()));return te.ready.then(()=>{rI=te})}()),x)for(let te=0;te<x.length;te++)N.push(xse(x[te],f,te,l));return(N.length?Promise.all(N):Promise.resolve()).then(()=>{if(U&&b)for(const{primitives:te}of b)for(const ne of te)yse(ne,f);if(G&&b&&P)for(const te of P)vse(te,f);return f})})}function L_(u,o){const l=u.json.bufferViews[o.bufferView],f=FC[o.componentType];return new f(u.buffers[l.buffer],(o.byteOffset||0)+(l.byteOffset||0),o.count*(l.byteStride&&l.byteStride!==kw[o.type]*f.BYTES_PER_ELEMENT?l.byteStride/f.BYTES_PER_ELEMENT:kw[o.type]))}function oI(u,o,l,f){const m=FC[o.componentType],x=function(N){switch(N){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(m),b=u.json.bufferViews[o.bufferView],M=b.byteStride?b.byteStride/m.BYTES_PER_ELEMENT:kw[o.type],P=l.float32,L=P.length/l.capacity;for(let N=0,U=0;N<o.count*M;N+=M,U+=L)for(let G=0;G<L;G++)P[U+G]=f[N+G]*x;l._trim()}function bse(u,o,l){const f=u.indices,m=u.attributes,x={};x.indexArray=new Do;const b=o.json.accessors[f],M=b.count/3;x.indexArray.reserve(M);const P=L_(o,b);for(let G=0;G<M;G++)x.indexArray.emplaceBack(P[3*G],P[3*G+1],P[3*G+2]);x.indexArray._trim(),x.vertexArray=new Ga;const L=o.json.accessors[m.POSITION];x.vertexArray.reserve(L.count);const N=L_(o,L);for(let G=0;G<L.count;G++)x.vertexArray.emplaceBack(N[3*G],N[3*G+1],N[3*G+2]);if(x.vertexArray._trim(),x.aabb=new Oi(L.min,L.max),x.centroid=function(G,te){const ne=[0,0,0],ce=G.length;if(ce>0){for(let me=0;me<ce;me++){const ve=3*G[me];ne[0]+=te[ve],ne[1]+=te[ve+1],ne[2]+=te[ve+2]}ne[0]/=ce,ne[1]/=ce,ne[2]/=ce}return ne}(P,N),m.COLOR_0!==void 0){const G=o.json.accessors[m.COLOR_0],te=kw[G.type],ne=L_(o,G);x.colorArray=te===3?new Ga:new Bc,x.colorArray.resize(G.count),oI(o,G,x.colorArray,ne)}if(m.NORMAL!==void 0){x.normalArray=new Ga;const G=o.json.accessors[m.NORMAL];x.normalArray.resize(G.count);const te=L_(o,G);oI(o,G,x.normalArray,te)}if(m.TEXCOORD_0!==void 0&&l.length>0){x.texcoordArray=new zd;const G=o.json.accessors[m.TEXCOORD_0];x.texcoordArray.resize(G.count);const te=L_(o,G);oI(o,G,x.texcoordArray,te)}if(m._FEATURE_ID_RGBA4444!==void 0){const G=o.json.accessors[m._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(x.featureData=L_(o,G))}m._FEATURE_RGBA4444!==void 0&&(x.featureData=new Uint32Array(L_(o,o.json.accessors[m._FEATURE_RGBA4444]).buffer));const U=u.material;return x.material=function(G,te){const{emissiveFactor:ne=[0,0,0],alphaMode:ce="OPAQUE",alphaCutoff:me=.5,normalTexture:ve,occlusionTexture:Ie,emissiveTexture:Me,doubleSided:ue}=G,{baseColorFactor:we=[1,1,1,1],metallicFactor:Pe=1,roughnessFactor:Be=1,baseColorTexture:Qe,metallicRoughnessTexture:rt}=G.pbrMetallicRoughness||{},ot=Ie?te[Ie.index]:void 0;if(Ie&&Ie.extensions&&Ie.extensions.KHR_texture_transform&&ot){const ct=Ie.extensions.KHR_texture_transform;ot.offsetScale=[ct.offset[0],ct.offset[1],ct.scale[0],ct.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new _i(...we),metallicFactor:Pe,roughnessFactor:Be,baseColorTexture:Qe?te[Qe.index]:void 0,metallicRoughnessTexture:rt?te[rt.index]:void 0},doubleSided:ue,emissiveFactor:ne,alphaMode:ce,alphaCutoff:me,normalTexture:ve?te[ve.index]:void 0,occlusionTexture:ot,emissionTexture:Me?te[Me.index]:void 0,defined:G.defined===void 0}}(U!==void 0?o.json.materials[U]:{defined:!1},l),x}function aU(u,o,l){const{matrix:f,rotation:m,translation:x,scale:b,mesh:M,extras:P,children:L}=u,N={};if(N.matrix=f||function(U,G,te,ne){var ce=G[0],me=G[1],ve=G[2],Ie=G[3],Me=ce+ce,ue=me+me,we=ve+ve,Pe=ce*Me,Be=ce*ue,Qe=ce*we,rt=me*ue,ot=me*we,ct=ve*we,At=Ie*Me,Yt=Ie*ue,Vt=Ie*we,qt=ne[0],nn=ne[1],Et=ne[2];return U[0]=(1-(rt+ct))*qt,U[1]=(Be+Vt)*qt,U[2]=(Qe-Yt)*qt,U[3]=0,U[4]=(Be-Vt)*nn,U[5]=(1-(Pe+ct))*nn,U[6]=(ot+At)*nn,U[7]=0,U[8]=(Qe+Yt)*Et,U[9]=(ot-At)*Et,U[10]=(1-(Pe+rt))*Et,U[11]=0,U[12]=te[0],U[13]=te[1],U[14]=te[2],U[15]=1,U}([],m||[0,0,0,1],x||[0,0,0],b||[1,1,1]),M!==void 0){N.meshes=l[M];const U=N.anchor=[0,0];for(const G of N.meshes){const{min:te,max:ne}=G.aabb;U[0]+=te[0]+ne[0],U[1]+=te[1]+ne[1]}U[0]=Math.floor(U[0]/N.meshes.length/2),U[1]=Math.floor(U[1]/N.meshes.length/2)}if(P&&(P.id&&(N.id=P.id),P.lights&&(N.lights=function(U){if(!U.length)return[];const G=function(ve){const Ie=atob(ve),Me=new Uint8Array(Ie.length);for(let ue=0;ue<Ie.length;ue++)Me[ue]=Ie.codePointAt(ue);return Me}(U),te=[],ne=G.length/24,ce=new Uint16Array(G.buffer),me=new Float32Array(G.buffer);for(let ve=0;ve<ne;ve++){const Ie=ce[2*ve*6]/30,Me=ce[2*ve*6+1]/30,ue=ce[2*ve*6+10]/100,we=me[6*ve+1],Pe=me[6*ve+2],Be=me[6*ve+3],Qe=me[6*ve+4],rt=Be-we,ot=Qe-Pe,ct=Math.hypot(rt,ot);te.push({pos:[we+.5*rt,Pe+.5*ot,Me],normal:[ot/ct,-rt/ct,0],width:ct,height:Ie,depth:ue,points:[we,Pe,Be,Qe]})}return te}(P.lights))),L){const U=[];for(const G of L)U.push(aU(o.json.nodes[G],o,l));N.children=U}return N}function wse(u){if(u.vertices.length===0||u.indices.length===0)return null;const o=new vp(u.vertices,u.indices,8,256),[l,f]=[o.min.clone(),o.max.clone()];return{vertices:u.vertices,indices:u.indices,grid:o,min:l,max:f}}function Sse(u){if(!u.extras||!u.extras.ground)return null;const o=u.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const l=o[0];if(!l||!Array.isArray(l)||l.length===0)return null;const f=[];for(const b of l){if(!Array.isArray(b)||b.length!==2)continue;const M=b[0],P=b[1];typeof M=="number"&&typeof P=="number"&&f.push(new dn(M,P))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let m=0;for(let b=0;b<f.length;b++){const M=f[b],P=f[(b+1)%f.length],L=f[(b+2)%f.length];m+=(M.x-P.x)*(L.y-P.y)-(L.x-P.x)*(M.y-P.y)}m>0&&f.reverse();const x=f_(f.flatMap(b=>[b.x,b.y]),[]);return x.length===0?null:{vertices:f,indices:x}}function Tse(u,o){const l=[],f=[];let m=0;const x=[];for(const b of u){m=l.length;const M=b.vertexArray.float32,P=b.indexArray.uint16;for(let L=0;L<b.vertexArray.length;L++)x[0]=M[3*L+0],x[1]=M[3*L+1],x[2]=M[3*L+2],yn(x,x,o),l.push(new dn(x[0],x[1]));for(let L=0;L<3*b.indexArray.length;L++)f.push(P[L]+m)}if(f.length%3!=0)return null;for(let b=0;b<f.length;b+=3){const M=l[f[b+0]],P=l[f[b+1]],L=l[f[b+2]];(M.x-P.x)*(L.y-P.y)-(L.x-P.x)*(M.y-P.y)>0&&([f[b+1],f[b+2]]=[f[b+2],f[b+1]])}return{vertices:l,indices:f}}function lU(u){const o=function(P,L){const N=[],U=WebGL2RenderingContext;if(P.json.textures)for(const G of P.json.textures){const te={magFilter:U.LINEAR,minFilter:U.NEAREST,wrapS:U.REPEAT,wrapT:U.REPEAT};G.sampler!==void 0&&Object.assign(te,P.json.samplers[G.sampler]),N.push({image:L[G.source],sampler:te,uploaded:!1})}return N}(u,u.images),l=function(P,L){const N=[];for(const U of P.json.meshes){const G=[];for(const te of U.primitives)G.push(bse(te,P,L));N.push(G)}return N}(u,o),{scenes:f,scene:m,nodes:x}=u.json,b=f?f[m||0].nodes:x,M=[];for(const P of b)M.push(aU(x[P],u,l));return function(P,L,N){const U={},G=new Set;for(let te=0;te<P.length;te++){const ne=N[L[te]];if(!ne.extras)continue;const ce=ne.extras["mapbox:footprint:version"],me=ne.extras["mapbox:footprint:id"];(ce||me)&&G.add(te),ce==="1.0.0"&&me&&(U[me]=te)}for(let te=0;te<P.length;te++){if(G.has(te))continue;const ne=P[te],ce=N[L[te]];if(!ce.extras)continue;let me=null;ne.id in U&&(me=Tse(P[U[ne.id]].meshes,ne.matrix)),me||(me=Sse(ce)),me&&(ne.footprint=wse(me))}if(G.size>0){const te=Array.from(G.values()).sort((ne,ce)=>ne-ce);for(let ne=te.length-1;ne>=0;ne--)P.splice(te[ne],1)}}(M,b,u.json.nodes),M}function Ese(u){u.heightmap=new Float32Array(4096),u.heightmap.fill(-1);const o=u.vertexArray.float32,l=u.aabb.min[0]-1,f=u.aabb.min[1]-1,m=I_/(u.aabb.max[0]-l+2),x=I_/(u.aabb.max[1]-f+2);for(let b=0;b<o.length;b+=3){const M=o[b+2],P=(o[b+0]-l)*m|0,L=(o[b+1]-f)*x|0;M>u.heightmap[L*I_+P]&&(u.heightmap[L*I_+P]=M)}}function Cse(u,o){const l={};l.indexArray=new Do,l.indexArray.reserve(4*u.length),l.vertexArray=new Ga,l.vertexArray.reserve(10*u.length),l.colorArray=new Bc,l.vertexArray.reserve(10*u.length);let f=0;for(const b of u){const M=Math.min(10,Math.max(4,1.3*b.height))*o,P=[-b.normal[1],b.normal[0],0],L=Math.min(.29,.1*b.width/b.depth),N=b.width-2*b.depth*o*(L+.01),U=Je([],b.pos,P,N/2),G=Je([],b.pos,P,-N/2),te=[U[0],U[1],U[2]+b.height],ne=[G[0],G[1],G[2]+b.height],ce=Je([],b.normal,P,L);Oe(ce,ce,M);const me=Je([],b.normal,P,-L);Oe(me,me,M),He(ce,U,ce),He(me,G,me),U[2]+=.1,G[2]+=.1,l.vertexArray.emplaceBack(ce[0],ce[1],ce[2]),l.vertexArray.emplaceBack(me[0],me[1],me[2]),l.vertexArray.emplaceBack(U[0],U[1],U[2]),l.vertexArray.emplaceBack(G[0],G[1],G[2]),l.vertexArray.emplaceBack(te[0],te[1],te[2]),l.vertexArray.emplaceBack(ne[0],ne[1],ne[2]),l.vertexArray.emplaceBack(U[0],U[1],U[2]),l.vertexArray.emplaceBack(G[0],G[1],G[2]),l.vertexArray.emplaceBack(ce[0],ce[1],ce[2]),l.vertexArray.emplaceBack(me[0],me[1],me[2]);const ve=N/M/2;l.colorArray.emplaceBack(-ve-L,-1,ve,.8),l.colorArray.emplaceBack(ve+L,-1,ve,.8),l.colorArray.emplaceBack(-ve,0,ve,1.3),l.colorArray.emplaceBack(ve,0,ve,1.3),l.colorArray.emplaceBack(ve+L,-.8,ve,.7),l.colorArray.emplaceBack(ve+L,-.8,ve,.7),l.colorArray.emplaceBack(0,0,ve,1.3),l.colorArray.emplaceBack(0,0,ve,1.3),l.colorArray.emplaceBack(ve+L,-1.2,ve,.8),l.colorArray.emplaceBack(ve+L,-1.2,ve,.8),l.indexArray.emplaceBack(6+f,4+f,8+f),l.indexArray.emplaceBack(7+f,9+f,5+f),l.indexArray.emplaceBack(0+f,1+f,2+f),l.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const m={defined:!0,emissiveFactor:[0,0,0]},x={};return x.baseColorFactor=_i.white,m.pbrMetallicRoughness=x,l.material=m,l.aabb=new Oi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),l}class cU{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const f=o[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const Ase=["id","tile","layer","source","sourceLayer","state"];class Xx{constructor(o,l,f,m,x){this.type="Feature",this._vectorTileFeature=o,this._z=l,this._x=f,this._y=m,this.properties=o.properties,this.id=x}clone(){const o=new Xx(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(o.state=Object.assign({},this.state)),this.layer&&(o.layer=Object.assign({},this.layer)),this.source&&(o.source=this.source),this.sourceLayer&&(o.sourceLayer=this.sourceLayer),o}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const l of Ase)this[l]!==void 0&&(o[l]=this[l]);return o}}class uU{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ap(vn,16,0),this.featureIndexArray=new n_,this.promoteId=l,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(o,l,f,m,x,b=0,M=0){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,x,b);const L=this.grid;for(let N=0;N<l.length;N++){const U=l[N],G=[1/0,1/0,-1/0,-1/0];for(let te=0;te<U.length;te++){const ne=U[te];G[0]=Math.min(G[0],ne.x),G[1]=Math.min(G[1],ne.y),G[2]=Math.max(G[2],ne.x),G[3]=Math.max(G[3],ne.y)}M!==0&&(G[0]-=M,G[1]-=M,G[2]+=M,G[3]+=M),G[0]<vn&&G[1]<vn&&G[2]>=0&&G[3]>=0&&L.insert(P,G[0],G[1],G[2],G[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new $d.VectorTile(new iC(this.rawTileData)).layers,this.sourceLayerCoder=new cU(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,l){const{tilespaceGeometry:f,transform:m,tileTransform:x,pixelPosMatrix:b,availableImages:M}=l;this.loadVTLayers(),this.serializedLayersCache.clear();const P=f.bufferedTilespaceBounds,L=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(te,ne,ce,me)=>Ti(f.bufferedTilespaceGeometry,te,ne,ce,me));L.sort(Mse);let N=null;m.elevation&&L.length>0&&(N=$x.create(m.elevation,this.tileID));const U={};let G;for(let te=0;te<L.length;te++){const ne=L[te];if(ne===G)continue;G=ne;const ce=this.featureIndexArray.get(ne);let me=null;this.is3DTile?this.loadMatchingModelFeature(U,ce,o,f,m):this.loadMatchingFeature(U,ce,o,M,(ve,Ie,Me,ue=0)=>(me||(me=Fn(ve,this.tileID.canonical,x)),Ie.queryIntersectsFeature(f,ve,Me,me,this.z,m,b,N,ue)))}return U}loadMatchingFeature(o,l,f,m,x){const{featureIndex:b,bucketIndex:M,sourceLayerIndex:P,layoutVertexArrayOffset:L}=l,N=this.bucketLayerIDs[M],U=f.layers,G=Object.keys(U);if(G.length&&!function(ve,Ie){for(let Me=0;Me<ve.length;Me++)if(Ie.indexOf(ve[Me])>=0)return!0;return!1}(G,N))return;const te=f.sourceCache,ne=this.sourceLayerCoder.decode(P),ce=this.vtLayers[ne].feature(b),me=this.getId(ce,ne);for(let ve=0;ve<N.length;ve++){const Ie=N[ve];if(!U[Ie])continue;const{styleLayer:Me,targets:ue}=U[Ie];let we={};me!==void 0&&(we=te.getFeatureState(Me.sourceLayer,me));const Pe=!x||x(ce,Me,we,L);if(!Pe)continue;const Be=new Xx(ce,this.z,this.x,this.y,me);Be.tile=this.tileID.canonical,Be.state=we;let Qe=this.serializedLayersCache.get(Ie);Qe||(Qe=Me.serialize(),Qe.id=Ie,this.serializedLayersCache.set(Ie,Qe)),Be.source=Qe.source,Be.sourceLayer=Qe["source-layer"],Be.layer=st({},Qe),Be.layer.paint=dU(Qe.paint,Me.paint,ce,we,m),Be.layer.layout=dU(Qe.layout,Me.layout,ce,we,m);let rt=!1;for(const ot of ue){this.updateFeatureProperties(Be,ot);const{filter:ct}=ot;if(ct){if(ce.properties=Be.properties,ct.needGeometry){const At=$n(ce,!0);if(!ct.filter(new Ii(this.tileID.overscaledZ),At,this.tileID.canonical))continue}else if(!ct.filter(new Ii(this.tileID.overscaledZ),ce))continue}rt=!0,ot.targetId&&this.addFeatureVariant(Be,ot)}rt&&this.appendToResult(o,Ie,b,Be,Pe)}}loadMatchingModelFeature(o,l,f,m,x){const b=this.bucketLayerIDs[0][0],M=f.layers;if(!M[b])return;const{styleLayer:P,targets:L}=M[b];if(P.type!=="model")return;const N=m.tile,U=l.featureIndex,G=N.getBucket(P);if(!(G&&G instanceof AC))return;const te=function(Qe,rt,ot,ct){const At=Qe.getNodesInfo()[rt];if(At.hiddenByReplacement||!At.node.meshes)return;let Yt=Number.MAX_VALUE;const Vt=At.node,qt=ot.tile,nn=ct.calculatePosMatrix(qt.tileID.toUnwrapped(),ct.worldSize),Et=At.evaluatedScale;let Ut=0;ct.elevation&&Vt.elevation&&(Ut=Vt.elevation*ct.elevation.exaggeration()),W(nn,nn,[(Vt.anchor?Vt.anchor[0]:0)*(Et[0]-1),(Vt.anchor?Vt.anchor[1]:0)*(Et[1]-1),Ut]),Z(nn,nn,Et);const bt=ot.queryGeometry,Ct=bt.isPointQuery()?bt.screenBounds:bt.screenGeometry,on=function(Qn){const Nn=V([],nn,Qn.matrix);V(Nn,ct.expandedFarZProjMatrix,Nn);for(let Sn=0;Sn<Qn.meshes.length;++Sn){const rn=Qn.meshes[Sn];if(Sn===Qn.lightMeshIndex)continue;const Mr=uV(Ct,ct,Nn,rn.aabb);Mr!=null&&(Yt=Math.min(Mr,Yt))}if(Qn.children)for(const Sn of Qn.children)on(Sn)};if(on(Vt),Yt===Number.MAX_VALUE)return;const un=new fe(0,0);return bV(qt.tileID.canonical,un,At.node.anchor[0],At.node.anchor[1]),{intersectionZ:Yt,position:un,feature:At.feature}}(G,U,m,x);if(!te)return;const{z:ne,x:ce,y:me}=N.tileID.canonical,{feature:ve,intersectionZ:Ie,position:Me}=te;let ue={};ve.id!==void 0&&(ue=f.sourceCache.getFeatureState(P.sourceLayer,ve.id));const we=new Xx({},ne,ce,me,ve.id);we.tile=this.tileID.canonical,we.state=ue,we.properties=ve.properties,we.geometry={type:"Point",coordinates:[Me.lng,Me.lat]};let Pe=this.serializedLayersCache.get(b);Pe||(Pe=P.serialize(),Pe.id=b,this.serializedLayersCache.set(b,Pe)),we.source=Pe.source,we.sourceLayer=Pe["source-layer"],we.layer=st({},Pe);let Be=!1;for(const Qe of L){this.updateFeatureProperties(we,Qe);const{filter:rt}=Qe;if(rt){if(ve.properties=we.properties,rt.needGeometry){if(!rt.filter(new Ii(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!rt.filter(new Ii(this.tileID.overscaledZ),ve))continue}Be=!0,Qe.targetId&&this.addFeatureVariant(we,Qe)}Be&&this.appendToResult(o,b,U,we,Ie)}updateFeatureProperties(o,l,f){if(l.properties){const m={};for(const x in l.properties){const b=l.properties[x].evaluate({zoom:this.z},o._vectorTileFeature,o.state,o.tile,f);b!=null&&(m[x]=b)}o.properties=m}}addFeatureVariant(o,l,f){const m={target:l.target,namespace:l.namespace,uniqueFeatureID:l.uniqueFeatureID};l.properties&&(m.properties=o.properties),o.variants=o.variants||{},o.variants[l.targetId]=o.variants[l.targetId]||[],o.variants[l.targetId].push(m)}appendToResult(o,l,f,m,x){let b=o[l];b===void 0&&(b=o[l]=[]),b.push({featureIndex:f,feature:m,intersectionZ:x})}lookupSymbolFeatures(o,l,f,m,x){const b={};this.loadVTLayers();for(const M of o)this.loadMatchingFeature(b,{bucketIndex:l,sourceLayerIndex:f,featureIndex:M,layoutVertexArrayOffset:0},m,x);return b}loadFeature(o){const{featureIndex:l,sourceLayerIndex:f}=o;this.loadVTLayers();const m=this.sourceLayerCoder.decode(f),x=this.vtFeatures[m];if(x[l])return x[l];const b=this.vtLayers[m].feature(l);return x[l]=b,b}hasLayer(o){for(const l of this.bucketLayerIDs)for(const f of l)if(o===f)return!0;return!1}getId(o,l){let f=o.id;if(this.promoteId){const m=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[l];if(m!=null)if(Array.isArray(m)){if(!this.promoteIdExpression){const x=Mi(m);if(x.result!=="success"){const b=x.value.map(M=>`${M.key}: ${M.message}`).join(", ");return void Ir(`Failed to create expression for promoteId: ${b}`)}this.promoteIdExpression=x.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Uf),f=this.promoteIdExpression.evaluate({zoom:0},o)}else f=o.properties[m];typeof f=="boolean"&&(f=Number(f))}return f}}function dU(u,o,l,f,m){return er(u,(x,b)=>{const M=o instanceof Pd?o.get(b):null;return M&&M.evaluate?M.evaluate(l,f,void 0,m):M})}function Mse(u,o){return o-u}In(uU,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const hU=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class sI{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(o,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const x=hU[15&f];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(o,2,1),[M]=new Uint32Array(o,4,1);return new sI(M,b,x,o)}constructor(o,l=64,f=Float64Array,m){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const x=hU.indexOf(this.ArrayType),b=2*o*this.ArrayType.BYTES_PER_ELEMENT,M=o*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-M%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+M+P,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+b+M+P),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+M+P,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=o)}add(o,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=l,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return aI(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:M}=this,P=[0,x.length-1,0],L=[];for(;P.length;){const N=P.pop()||0,U=P.pop()||0,G=P.pop()||0;if(U-G<=M){for(let me=G;me<=U;me++){const ve=b[2*me],Ie=b[2*me+1];ve>=o&&ve<=f&&Ie>=l&&Ie<=m&&L.push(x[me])}continue}const te=G+U>>1,ne=b[2*te],ce=b[2*te+1];ne>=o&&ne<=f&&ce>=l&&ce<=m&&L.push(x[te]),(N===0?o<=ne:l<=ce)&&(P.push(G),P.push(te-1),P.push(1-N)),(N===0?f>=ne:m>=ce)&&(P.push(te+1),P.push(U),P.push(1-N))}return L}within(o,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:x,nodeSize:b}=this,M=[0,m.length-1,0],P=[],L=f*f;for(;M.length;){const N=M.pop()||0,U=M.pop()||0,G=M.pop()||0;if(U-G<=b){for(let me=G;me<=U;me++)pU(x[2*me],x[2*me+1],o,l)<=L&&P.push(m[me]);continue}const te=G+U>>1,ne=x[2*te],ce=x[2*te+1];pU(ne,ce,o,l)<=L&&P.push(m[te]),(N===0?o-f<=ne:l-f<=ce)&&(M.push(G),M.push(te-1),M.push(1-N)),(N===0?o+f>=ne:l+f>=ce)&&(M.push(te+1),M.push(U),M.push(1-N))}return P}}function aI(u,o,l,f,m,x){if(m-f<=l)return;const b=f+m>>1;fU(u,o,b,f,m,x),aI(u,o,l,f,b-1,1-x),aI(u,o,l,b+1,m,1-x)}function fU(u,o,l,f,m,x){for(;m>f;){if(m-f>600){const L=m-f+1,N=l-f+1,U=Math.log(L),G=.5*Math.exp(2*U/3),te=.5*Math.sqrt(U*G*(L-G)/L)*(N-L/2<0?-1:1);fU(u,o,l,Math.max(f,Math.floor(l-N*G/L+te)),Math.min(m,Math.floor(l+(L-N)*G/L+te)),x)}const b=o[2*l+x];let M=f,P=m;for(Ow(u,o,f,l),o[2*m+x]>b&&Ow(u,o,f,m);M<P;){for(Ow(u,o,M,P),M++,P--;o[2*M+x]<b;)M++;for(;o[2*P+x]>b;)P--}o[2*f+x]===b?Ow(u,o,f,P):(P++,Ow(u,o,P,m)),P<=l&&(f=P+1),l<=P&&(m=P-1)}}function Ow(u,o,l,f){lI(u,l,f),lI(o,2*l,2*f),lI(o,2*l+1,2*f+1)}function lI(u,o,l){const f=u[o];u[o]=u[l],u[l]=f}function pU(u,o,l,f){const m=u-l,x=o-f;return m*m+x*x}i.$=ks,i.A=Kc,i.B=Hl,i.C=kd,i.D=qx,i.E=pd,i.F=2,i.G=gw,i.H=T4,i.I=rl,i.J=class extends EC{},i.K=xr,i.L=pm,i.M=ul,i.N=ip,i.O=Oc,i.P=dn,i.Q=Om,i.R=Nf,i.S=Lc,i.T=FP,i.U=Id,i.V=EC,i.W=Td,i.X=Mi,i.Y=Gf,i.Z=zo,i._=jh,i.a=function(u){return Yo.API_CDN_URL_REGEX.test(u)},i.a$=ln,i.a0=Ch,i.a1=qm,i.a2=wd,i.a3=rp,i.a4=function(u){const o=u.value;let l=[];if(!o)return l;const f=xr(o);return f!=="string"?(l=l.concat([new EC(u.key,o,`string expected, "${f}" found`)]),l):(VP(o,!0)||(l=l.concat([new EC(u.key,o,`invalid url "${o}"`)])),l)},i.a5=pt,i.a6=sy,i.a7=yo,i.a8=pn,i.a9=class{constructor(u){this.specification=u}possiblyEvaluate(u,o){return wi(u.expression.evaluate(o))}interpolate(u,o,l){return{x:ar(u.x,o.x,l),y:ar(u.y,o.y,l),z:ar(u.z,o.z,l),azimuthal:ar(u.azimuthal,o.azimuthal,l),polar:ar(u.polar,o.polar,l)}}},i.aA=Yn,i.aB=di,i.aC=Nt,i.aD=We,i.aE=E,i.aF=function(u,o){const l={};for(let f=0;f<o.length;f++){const m=o[f];m in u&&(l[m]=u[m])}return l},i.aG=Ee,i.aH=Ue,i.aI=class{constructor(u){this.entries={},this.scheduler=u}request(u,o,l,f){const m=this.entries[u]=this.entries[u]||{callbacks:[]};if(m.result){const[x,b]=m.result;return this.scheduler?this.scheduler.add(()=>{f(x,b)},o):f(x,b),()=>{}}return m.callbacks.push(f),m.cancel||(m.cancel=l((x,b)=>{m.result=[x,b];for(const M of m.callbacks)this.scheduler?this.scheduler.add(()=>{M(x,b)},o):M(x,b);setTimeout(()=>delete this.entries[u],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(x=>x!==f),m.callbacks.length||(m.cancel(),delete this.entries[u]))}}},i.aJ=function(u,o,l){const f=JSON.stringify(u.request);return u.data&&(this.deduped.entries[f]={result:[null,u.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:u.isSymbolTile,zoom:u.tileZoom},m=>{const x=hd(u.request,(b,M,P,L)=>{b?m(b):M&&m(null,{vectorTile:l?void 0:new $d.VectorTile(new iC(M)),rawData:M,cacheControl:P,expires:L})});return()=>{x.cancel(),m()}},o)},i.aK=function(u){lm++,lm>jl&&(u.getActor().send("enforceCacheSizeLimit",Zc),lm=0)},i.aL=function(u){return u<=1?1:Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},i.aM=ki,i.aN=J4,i.aO=oV,i.aP=Q4,i.aQ=function(u,o){const l=document.createElement("video");l.muted=!0,l.onloadstart=function(){o(null,l)};for(let f=0;f<u.length;f++){const m=document.createElement("source");um(u[f])||(l.crossOrigin="Anonymous"),m.src=u[f],l.appendChild(m)}return{cancel:()=>{}}},i.aR=xC,i.aS=function(u){return fetch(u).then(o=>o.arrayBuffer()).then(o=>sU(o,0,u))},i.aT=lU,i.aU=class{constructor(u,o,l,f){this.id=u,this.position=o!=null?new fe(o[0],o[1]):new fe(0,0),this.orientation=l??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new Oi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(u,o){if(V(u.matrix,o,u.matrix),u.meshes)for(const l of u.meshes){const f=Oi.applyTransformFast(l.aabb,u.matrix);this.aabb.encapsulate(f)}if(u.children)for(const l of u.children)this._applyTransformations(l,u.matrix)}computeBoundsAndApplyParent(){const u=F([]);for(const o of this.nodes)this._applyTransformations(o,u)}computeModelMatrix(u,o,l,f,m,x,b=!1){gV(this.matrix,this,u.transform,this.position,o,l,f,m,x,b)}upload(u){if(!this.uploaded){for(const o of this.nodes)$P(o,u);for(const o of this.nodes)CC(o);this.uploaded=!0}}destroy(){for(const u of this.nodes)qP(u)}},i.aV=ir,i.aW=vw,i.aX=Ze,i.aY=et,i.aZ=Od,i.a_=Do,i.aa=Ii,i.ab=Xo,i.ac=_t,i.ad=yn,i.ae=Ae,i.af=Ke,i.ag=Pd,i.ah=af,i.ai=ar,i.aj=vn,i.ak=Z0,i.al=re,i.am=_i,i.an=class{constructor(u){this.specification=u}possiblyEvaluate(u,o){return function([l,f]){const m=wi([1,l,f]);return{x:m.x,y:m.y,z:m.z}}(u.expression.evaluate(o))}interpolate(u,o,l){return{x:ar(u.x,o.x,l),y:ar(u.y,o.y,l),z:ar(u.z,o.z,l)}}},i.ao=function(u,o,l=0,f=!0){const m=new dn(l,l),x=u.sub(m),b=o.add(m),M=[x,new dn(b.x,x.y),b,new dn(x.x,b.y)];return f&&M.push(x.clone()),M},i.ap=function(u,o){const l=[];for(let f=0;f<u.length;f++){const m=at(f-1,-1,u.length-1),x=at(f+1,-1,u.length-1),b=u[f],M=u[x],P=u[m].sub(b).unit(),L=M.sub(b).unit(),N=L.angleWithSep(P.x,P.y),U=P.add(L).unit().mult(-1*o/Math.sin(N/2));l.push(b.add(U))}return l},i.aq=B4,i.ar=Ti,i.as=function(u,o,l=0){return Re(((o.x-l)*u.scale-u.x)*vn,(o.y*u.scale-u.y)*vn,gt(o.z,o.y))},i.at=Bt,i.au=It,i.av=Pl,i.aw=Ur,i.ax=function(u){let o=1/0,l=1/0,f=-1/0,m=-1/0;for(const x of u)o=Math.min(o,x.x),l=Math.min(l,x.y),f=Math.max(f,x.x),m=Math.max(m,x.y);return{min:new dn(o,l),max:new dn(f,m)}},i.ay=$e,i.az=V,i.b=function(u){return Yo.API_FONTS_REGEX.test(u)},i.b$=Oe,i.b0=dp,i.b1=vC,i.b2=function(){Zl.isLoading()||Zl.isLoaded()||Dd()!=="deferred"||Uv()},i.b3=ay,i.b4=$n,i.b5=Xx,i.b6=$i,i.b7=jt,i.b8=Ax,i.b9=Fn,i.bA=function(u,o){const{x:l,y:f}=u.point,m=L1(l,f,u.worldSize/u._pixelsPerMercatorPixel,0,0);return V(m,m,cx(Hu(o)))},i.bB=T,i.bC=function(u){return u[0]=0,u[1]=0,u[2]=0,u},i.bD=function(u,o){return Math.hypot(o[0]-u[0],o[1]-u[1],o[2]-u[2])},i.bE=vt,i.bF=Je,i.bG=sn,i.bH=mw,i.bI=Uc,i.bJ=SP,i.bK=function(u,o,l,f,m){const x=5*o+2;u.float32[x+0]=l,u.float32[x+1]=f,u.float32[x+2]=m},i.bL=yC,i.bM=p,i.bN=ur,i.bO=Qs,i.bP=wy,i.bQ=dV,i.bR=ZE,i.bS=sw,i.bT=AP,i.bU=P4,i.bV=wP,i.bW=sI,i.bX=at,i.bY=Vn,i.bZ=function(u,o,l){l*=.5;var f=o[0],m=o[1],x=o[2],b=o[3],M=Math.sin(l),P=Math.cos(l);return u[0]=f*P+m*M,u[1]=m*P-f*M,u[2]=x*P+b*M,u[3]=b*P-x*M,u},i.b_=ut,i.ba=zc,i.bb=Fd,i.bc=Vc,i.bd=ho,i.be=f_,i.bf=OP,i.bg=function(u,o){const l=af(o.zoom);if(l===0)return Hu(u);const f=lx(u),m=k1(f),x=$e(f.getWest())*o.worldSize,b=$e(f.getEast())*o.worldSize,M=Ue(f.getNorth())*o.worldSize,P=Ue(f.getSouth())*o.worldSize,L=[x,M,0],N=[b,M,0],U=[x,P,0],G=[b,P,0],te=j([],o.globeMatrix);return yn(L,L,te),yn(N,N,te),yn(U,U,te),yn(G,G,te),m[0]=Gu(m[0],U,l),m[1]=Gu(m[1],G,l),m[2]=Gu(m[2],N,l),m[3]=Gu(m[3],L,l),Oi.fromPoints(m)},i.bh=ig,i.bi=j,i.bj=my,i.bk=Gu,i.bl=Qh,i.bm=fl,i.bn=he,i.bo=W,i.bp=zC,i.bq=iC,i.br=hd,i.bs=function(u,o){const l=[];for(const f in u)f in o||l.push(f);return l},i.bt=ft,i.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bv=Hs,i.bw=function(u){var o=new w(16);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],o},i.bx=F,i.by=se,i.bz=I,i.c=As,i.c$=function(u){return u({pluginStatus:Ha,pluginURL:Bu}),$m.on("pluginStateChange",u),u},i.c0=_n,i.c1=Zr,i.c2=function(u,o){return u[0]=-o[0],u[1]=-o[1],u[2]=-o[2],u[3]=o[3],u},i.c3=_e,i.c4=function(u,o,l,f,m){var x,b=1/Math.tan(o/2);return u[0]=b/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=b,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,m!=null&&m!==1/0?(u[10]=(m+f)*(x=1/(f-m)),u[14]=2*m*f*x):(u[10]=-1,u[14]=-2*f),u},i.c5=function(u,o,l,f,m,x,b){var M=1/(o-l),P=1/(f-m),L=1/(x-b);return u[0]=-2*M,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*P,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*L,u[11]=0,u[12]=(o+l)*M,u[13]=(m+f)*P,u[14]=(b+x)*L,u[15]=1,u},i.c6=Fe,i.c7=function(u,o,l){u[4*o+0]=l[0],u[4*o+1]=l[1],u[4*o+2]=l[2],u[4*o+3]=l[3]},i.c8=Dl,i.c9=ec,i.cA=SC,i.cB=ae,i.cC=sV,i.cD=function(u){const o=sV(u,!0);return T([],[o[0],o[1],o[4],o[5]])},i.cE=Z,i.cF=Ks,i.cG=K,i.cH=function(u){const{x:o,y:l}=u.point,{lng:f,lat:m}=u._center;return L1(o,l,u.worldSize,f,m)},i.cI=qe,i.cJ=le,i.cK=$o,i.cL=R,i.cM=function(u,o,l){let f=0;for(let m=0;m<2;++m)u[m]>0&&(f+=(u[m]-0)*(u[m]-0)),o[m]<0&&(f+=(0-o[m])*(0-o[m]));return f},i.cN=45,i.cO=$g,i.cP=Ye,i.cQ=fp,i.cR=function(u,o,l){const f=Math.sqrt(u*u+o*o+l*l),m=f>0?Math.acos(l/f)*De:0;let x=u!==0||o!==0?Math.atan2(-o,-u)*De+90:0;return x<0&&(x+=360),[f,x,m]},i.cS=Re,i.cT=dt,i.cU=He,i.cV=Oi,i.cW=wi,i.cX=function(u){return[Math.pow(u[0],1/2.2),Math.pow(u[1],1/2.2),Math.pow(u[2],1/2.2)]},i.cY=Se,i.cZ=VP,i.c_=function(u,o){return u.readFields(Eoe,{icons:[]},o)},i.ca=Rl,i.cb=Po,i.cc=Zm,i.cd=fe,i.ce=$4,i.cf=function(){var u=new w(4);return w!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},i.cg=function(u,o,l){var f=o[0],m=o[1],x=o[2],b=o[3],M=Math.sin(l),P=Math.cos(l);return u[0]=f*P+x*M,u[1]=m*P+b*M,u[2]=f*-M+x*P,u[3]=m*-M+b*P,u},i.ch=function(u,o){return u[0]===o[0]&&u[1]===o[1]&&u[2]===o[2]&&u[3]===o[3]},i.ci=fn,i.cj=function(u){return Math.hypot(u[0],u[1],u[2],u[3])},i.ck=Xn,i.cl=Jt,i.cm=Bo,i.cn=eg,i.co=aV,i.cp=ji,i.cq=RE,i.cr=function(u,o,l,f,m,x,b,M,P){if(P.name==="globe")return RE(u,o,new ji(l,f,m),!1);const L=vw({z:l,x:f,y:m},P);return new Oi([(x+L.x/L.scale)*o,o*(L.y/L.scale),b],[(x+L.x2/L.scale)*o,o*(L.y2/L.scale),M])},i.cs=function(u,o,l){return u[0]=Math.min(o[0],l[0]),u[1]=Math.min(o[1],l[1]),u[2]=Math.min(o[2],l[2]),u[3]=Math.min(o[3],l[3]),u},i.ct=function(u,o,l){return u[0]=Math.max(o[0],l[0]),u[1]=Math.max(o[1],l[1]),u[2]=Math.max(o[2],l[2]),u[3]=Math.max(o[3],l[3]),u},i.cu=function(u){const o=Math.round((u+45+360)%360/90)%4;return xe[o]},i.cv=ht,i.cw=Ft,i.cx=O,i.cy=function(u){const o=F(new Float64Array(16));V(o,u.pixelMatrix,u.globeMatrix);const l=[0,J,0],f=[0,Q,0];return yn(l,l,o),yn(f,f,o),[l[0]>0&&l[0]<=u.width&&l[1]>0&&l[1]<=u.height&&!gy(u,new fe(u.center.lat,90)),f[0]>0&&f[0]<=u.width&&f[1]>0&&f[1]<=u.height&&!gy(u,new fe(u.center.lat,-90))]},i.cz=function(u,o){const{scale:l}=u.tileTransform,f=l*vn/(u.tileSize*Math.pow(2,o.zoom-u.tileID.overscaledZ+u.tileID.canonical.z));return function(m,x,b){var M=x[1],P=x[2],L=x[3],N=b[0],U=b[1];return m[0]=x[0]*N,m[1]=M*N,m[2]=P*U,m[3]=L*U,m}(new Float32Array(4),o.inverseAdjustmentMatrix,[f,f])},i.d=function(u){return Yo.API_TILEJSON_REGEX.test(u)},i.d$=fy,i.d0=MC,i.d1=Nx,i.d2=EP,i.d3=si,i.d4=Rd,i.d5=ba,i.d6=nl,i.d7=kr,i.d8=function(u){const o=u.indexOf(Zh);return o>=0?u.slice(0,o):u},i.d9=function(u){return u.indexOf(Zh)>=0},i.dA=O1,i.dB=is,i.dC=Oo,i.dD=256,i.dE=function(u,o){const l=[0,0,0];return yn(l,l,ig(Hu(o.canonical))),yn(l,l,u),l},i.dF=u=>({u_camera_to_center_distance:new Po(u),u_extrude_scale:new Ma(u),u_device_pixel_ratio:new Po(u),u_matrix:new Dl(u),u_inv_rot_matrix:new Dl(u),u_merc_center:new ec(u),u_tile_id:new Rl(u),u_zoom_transition:new Po(u),u_up_dir:new Rl(u),u_emissive_strength:new Po(u)}),i.dG=u=>({u_matrix:new Dl(u),u_pixels_to_tile_units:new Ma(u),u_device_pixel_ratio:new Po(u),u_width_scale:new Po(u),u_floor_width_scale:new Po(u),u_units_to_pixels:new ec(u),u_dash_image:new Zm(u),u_gradient_image:new Zm(u),u_image_height:new Po(u),u_texsize:new ec(u),u_tile_units_to_pixels:new Po(u),u_alpha_discard_threshold:new Po(u),u_trim_offset:new ec(u),u_trim_fade_range:new ec(u),u_trim_color:new fp(u),u_emissive_strength:new Po(u),u_zbias_factor:new Po(u),u_tile_to_meter:new Po(u),u_ground_shadow_factor:new Rl(u)}),i.dH=u=>({u_matrix:new Dl(u),u_texsize:new ec(u),u_pixels_to_tile_units:new Ma(u),u_device_pixel_ratio:new Po(u),u_width_scale:new Po(u),u_floor_width_scale:new Po(u),u_image:new Zm(u),u_units_to_pixels:new ec(u),u_tile_units_to_pixels:new Po(u),u_alpha_discard_threshold:new Po(u),u_trim_offset:new ec(u),u_trim_fade_range:new ec(u),u_trim_color:new fp(u),u_emissive_strength:new Po(u),u_zbias_factor:new Po(u),u_tile_to_meter:new Po(u),u_ground_shadow_factor:new Rl(u),u_pattern_transition:new Po(u)}),i.dI=Ql,i.dJ=Rie,i.dK=PE,i.dL=(u,o,l,f,m,x)=>{const b=u.transform,M=b.projection.name==="globe";let P;if(x.paint.get("circle-pitch-alignment")==="map")if(M){const N=O1(b.zoom,o.canonical)*b._pixelsPerMercatorPixel;P=Float32Array.from([N,0,0,N])}else P=b.calculatePixelsToTileUnitsMatrix(l);else P=new Float32Array([b.pixelsToGLUnits[0],0,0,b.pixelsToGLUnits[1]]);const L={u_camera_to_center_distance:u.transform.getCameraToCenterDistance(b.projection),u_matrix:u.translatePosMatrix(o.projMatrix,l,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_device_pixel_ratio:wl.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:B1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:x.paint.get("circle-emissive-strength")};if(M){L.u_inv_rot_matrix=f,L.u_merc_center=m,L.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],L.u_zoom_transition=af(b.zoom);const N=m[0]*vn,U=m[1]*vn;L.u_up_dir=b.projection.upVector(new ji(0,0,0),N,U)}return L},i.dM=ua,i.dN=Ta,i.dO=(u,o,l,f,m,x,b,M,P,L)=>{const N=u.transform,U=N.pitch<15?Zi(.07,.7,We((14-N.zoom)/5,0,1)):.07,G=l.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:yi(u,o,l,f),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:N.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:m,u_width_scale:x,u_floor_width_scale:b,u_image:0,u_tile_units_to_pixels:Jr(o,N),u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:M,u_trim_fade_range:l.paint.get("line-trim-fade-range"),u_trim_color:l.paint.get("line-trim-color").toRenderColor(G?null:l.lut).toArray01(),u_emissive_strength:l.paint.get("line-emissive-strength"),u_zbias_factor:U,u_tile_to_meter:dt(o.tileID.canonical,0),u_ground_shadow_factor:P,u_pattern_transition:L}},i.dP=(u,o,l,f,m,x,b,M,P,L)=>{const N=u.transform,U=N.calculatePixelsToTileUnitsMatrix(o),G=l.paint.get("line-trim-color-use-theme").constantOr("default")==="none",te=N.pitch<15?Zi(.07,.7,We((14-N.zoom)/5,0,1)):.07;return{u_matrix:yi(u,o,l,f),u_pixels_to_tile_units:U,u_device_pixel_ratio:x,u_width_scale:b,u_floor_width_scale:M,u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:m,u_texsize:So(l)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Jr(o,u.transform),u_alpha_discard_threshold:0,u_trim_offset:P,u_trim_fade_range:l.paint.get("line-trim-fade-range"),u_trim_color:l.paint.get("line-trim-color").toRenderColor(G?null:l.lut).toArray01(),u_emissive_strength:l.paint.get("line-emissive-strength"),u_zbias_factor:te,u_tile_to_meter:dt(o.tileID.canonical,0),u_ground_shadow_factor:L}},i.dQ=xn,i.dR=vy,i.dS=gt,i.dT=A_,i.dU=Ra,i.dV=Lx,i.dW=qd,i.dX=450,i.dY=7,i.dZ=coe,i.d_=ui,i.da=function(u){const o=u.lastIndexOf(Zh);return o>=0?u.slice(o+1):""},i.db=function(u){const o=[],l=u.id;return l===void 0&&o.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&o.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},i.dc=function(u,o,l,f){return u.type==="custom"?new uoe(u,o):new boe[u.type](u,o,l,f)},i.dd=tr,i.de=function(u){const o=u.indexOf(Zh);return o>=0?u.slice(o+1):""},i.df=class extends Xx{constructor(u,o){super(u._vectorTileFeature,u._z,u._x,u._y,u.id),u.state&&(this.state=Object.assign({},u.state)),this.target=o.target,this.namespace=o.namespace,o.properties&&(this.properties=o.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=u.source,this.sourceLayer=u.sourceLayer,this.layer=u.layer)}toJSON(){const u=super.toJSON();return u.target=this.target,u.namespace=this.namespace,u}},i.dg=$m,i.dh=tl,i.di=ix,i.dj=class extends Jl{constructor(u){super(u),this.current=u_}set(u,o,l){if(this.fetchUniformLocation(u,o)){for(let f=0;f<9;f++)if(l[f]!==this.current[f]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},i.dk=ke,i.dl=function(u,o,l){const f=af(l.zoom),m=u.style.map._antialias,x=u.terrain&&u.terrain.exaggeration()>0;return f===0&&!m&&!x},i.dm=function(u){const o=u.pixelsPerMeter,l=o/Fe(1,u.center.lat),f=F(new Float64Array(16));return W(f,f,[u.point.x,u.point.y,0]),Z(f,f,[l,l,o]),Float32Array.from(f)},i.dn=lx,i.dp=function(u){const o=ht-5;u=We(u,-80.051129,o)/o*90;const l=Math.pow(Math.abs(Math.sin(re(u))),3);return Math.round(l*(Y.length-1))},i.dq=function(u,o,l,f){const m=o.getNorth(),x=o.getSouth(),b=o.getWest(),M=o.getEast(),P=1<<u.z,L=M-b,N=m-x,U=L/H,G=-N/Y[l],te=[0,U,0,G,0,0,m,b,0];if(u.z>0){const ne=180/f;k(te,te,[ne/L+1,0,0,0,ne/N+1,0,-.5*ne/U,.5*ne/G,1])}return te[2]=P,te[5]=u.x,te[8]=u.y,te},i.dr=Hu,i.ds=function(u,o,l){const f=F(new Float64Array(16)),m=(o/(1<<u)-.5)*Math.PI*2;return ee(f,l.globeMatrix,m),Float32Array.from(f)},i.dt=class{isDataAvailableAtPoint(u){const o=this._source();if(this.isUsingMockSource()||!o||u.y<0||u.y>1)return!1;const l=o.getSource().maxzoom,f=1<<l,m=Math.floor(u.x),x=Math.floor((u.x-m)*f),b=Math.floor(u.y*f),M=this.findDEMTileFor(new ki(l,m,l,x,b));return!(!M||!M.dem)}getAtPointOrZero(u,o=0){return this.getAtPoint(u,o)||0}getAtPoint(u,o,l=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||u.y<0||u.y>1)return o;const m=f.getSource().maxzoom,x=1<<m,b=Math.floor(u.x),M=u.x-b,P=new ki(m,b,m,Math.floor(M*x),Math.floor(u.y*x)),L=this.findDEMTileFor(P);if(!L||!L.dem)return o;const N=L.dem,U=1<<L.tileID.canonical.z,G=(M*U-L.tileID.canonical.x)*N.dim,te=(u.y*U-L.tileID.canonical.y)*N.dim,ne=Math.floor(G),ce=Math.floor(te);return(l?this.exaggeration():1)*ar(ar(N.get(ne,ce),N.get(ne,ce+1),te-ce),ar(N.get(ne+1,ce),N.get(ne+1,ce+1),te-ce),G-ne)}getAtTileOffset(u,o,l){const f=1<<u.canonical.z;return this.getAtPointOrZero(new _t(u.wrap+(u.canonical.x+o/vn)/f,(u.canonical.y+l/vn)/f))}getAtTileOffsetFunc(u,o,l,f){return m=>{const x=this.getAtTileOffset(u,m.x,m.y),b=f.upVector(u.canonical,m.x,m.y);return Oe(b,b,x*f.upVectorScale(u.canonical,o,l).metersToTile),b}}getForTilePoints(u,o,l,f){if(this.isUsingMockSource())return!1;const m=$x.create(this,u,f);return!!m&&(o.forEach(x=>{x[2]=this.exaggeration()*m.getElevationAt(x[0],x[1],l)}),!0)}getMinMaxForTile(u){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(u);if(!o||!o.dem)return null;const l=o.dem.tree,f=o.tileID,m=1<<u.canonical.z-f.canonical.z;let x=u.canonical.x/m-f.canonical.x,b=u.canonical.y/m-f.canonical.y,M=0;for(let P=0;P<u.canonical.z-f.canonical.z&&!l.leaves[M];P++){x*=2,b*=2;const L=2*Math.floor(b)+Math.floor(x);M=l.childOffsets[M]+L,x%=1,b%=1}return{min:this.exaggeration()*l.minimums[M],max:this.exaggeration()*l.maximums[M]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(u,o,l){throw new Error("Pure virtual method called.")}pointCoordinate(u){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(u){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const u=this.visibleDemTiles;if(u.length===0)return null;let o=!1,l=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const m of u){const x=this.getMinMaxForTile(m.tileID);x&&(l=Math.min(l,x.min),f=Math.max(f,x.max),o=!0)}return o?{min:l,max:f}:null}},i.du=V1,i.dv=qu,i.dw=function(u,o){return[Math.pow(u[0],2.2)*o,Math.pow(u[1],2.2)*o,Math.pow(u[2],2.2)*o]},i.dx=A,i.dy=function(u,o){var l=Math.sin(o),f=Math.cos(o);return u[0]=f,u[1]=l,u[2]=0,u[3]=-l,u[4]=f,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},i.dz=Qt,i.e=Yo,i.e$=cU,i.e0=256,i.e1=cx,i.e2=Ga,i.e3=ee,i.e4=function(u,o){return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[4],u[4]=o[5],u[5]=o[6],u[6]=o[8],u[7]=o[9],u[8]=o[10],u},i.e5=jc,i.e6=rf,i.e7=function(u,o,l,f,m){return We((u-o)/(l-o)*(m-f)+f,f,m)},i.e8=gn,i.e9=function(u,o){var l=o[0],f=o[1],m=o[2],x=o[3],b=o[4],M=o[5],P=o[6],L=o[7],N=o[8],U=N*b-M*L,G=-N*x+M*P,te=L*x-b*P,ne=l*U+f*G+m*te;return ne?(u[0]=U*(ne=1/ne),u[1]=(-N*f+m*L)*ne,u[2]=(M*f-m*b)*ne,u[3]=G*ne,u[4]=(N*l-m*P)*ne,u[5]=(-M*l+m*x)*ne,u[6]=te*ne,u[7]=(-L*l+f*P)*ne,u[8]=(b*l-f*x)*ne,u):null},i.eA=function(u,o,l){return u[0]=o[0]/l[0],u[1]=o[1]/l[1],u[2]=o[2]/l[2],u},i.eB=Kt,i.eC=pe,i.eD=wt,i.eE=function(u,o,l,f){return u[0]=o,u[1]=l,u[2]=f,u},i.eF=function([u,o,l]){const f=Math.hypot(u,o,l),m=Math.atan2(u,l),x=.5*Math.PI-Math.acos(-o/f);return new fe(le(m),le(x))},i.eG=kn,i.eH=NP,i.eI=function(u){const o=u.navigator?u.navigator.userAgent:null;return!!function(l){if(bo==null){const f=l.navigator?l.navigator.userAgent:null;bo=!!l.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return bo}(u)&&!(!o||!(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},i.eJ=function(u,o){Zc=u,jl=o},i.eK=gy,i.eL=z1,i.eM=function(u){const o=[0,0,0],l=F(new Float64Array(16));return V(l,u.pixelMatrix,u.globeMatrix),yn(o,o,l),new dn(o[0],o[1])},i.eN=function(u,o,l=!1){if(Ha===lp||Ha===jm||Ha===Vm)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bu=wl.resolveURL(u),Ha=lp,oy=o,Um(),l||Uv()},i.eO=Dd,i.eP=function(){MC().acquire(GP)},i.eQ=function(){const u=Cw;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(GP),Cw=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.eR=O_,i.eS=function(u){const o=Vg();if(!o)return;const l=o.delete(wa);u&&l.then(()=>u()).catch(u)},i.eT=Ew,i.eU=JV,i.eV=function(u){nI=wl.resolveURL(u),Yx||(Yx=new qx(MC(),new pd)),Yx.broadcast("setDracoUrl",nI)},i.eW=eU,i.eX=function(u){Wx=wl.resolveURL(u),Yx||(Yx=new qx(MC(),new pd)),Yx.broadcast("setMeshoptUrl",Wx)},i.eY=In,i.eZ=lf,i.e_=gf,i.ea=Fv,i.eb=$t,i.ec=Dt,i.ed=class{constructor(u,o,l,f){this.context=u,this.format=f,this.size=l,this.texture=u.gl.createTexture();const[m,x,b]=this.size,{gl:M}=u;M.bindTexture(M.TEXTURE_3D,this.texture),u.pixelStoreUnpackFlipY.set(!1),u.pixelStoreUnpack.set(1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),M.texImage3D(M.TEXTURE_3D,0,this.format,m,x,b,0,LP(this.format),zP(this.format),o.data)}bind(u,o){const{context:l}=this,{gl:f}=l;f.bindTexture(f.TEXTURE_3D,this.texture),u!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,u),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,u),this.minFilter=u),o!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,o),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,o),this.wrapS=o)}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}},i.ee=function(u,o){if(u===o){var l=o[1],f=o[2],m=o[3],x=o[6],b=o[7],M=o[11];u[1]=o[4],u[2]=o[8],u[3]=o[12],u[4]=l,u[6]=o[9],u[7]=o[13],u[8]=f,u[9]=x,u[11]=o[14],u[12]=m,u[13]=b,u[14]=M}else u[0]=o[0],u[1]=o[4],u[2]=o[8],u[3]=o[12],u[4]=o[1],u[5]=o[5],u[6]=o[9],u[7]=o[13],u[8]=o[2],u[9]=o[6],u[10]=o[10],u[11]=o[14],u[12]=o[3],u[13]=o[7],u[14]=o[11],u[15]=o[15];return u},i.ef=jP,i.eg=be,i.eh=[1,1,1],i.ei=function(u,o,l,f){var m=new w(4);return m[0]=u,m[1]=o,m[2]=l,m[3]=f,m},i.ej=an,i.ek=function(u,o,l,f){var m=o[0],x=o[1],b=o[2],M=o[3];return u[0]=m+f*(l[0]-m),u[1]=x+f*(l[1]-x),u[2]=b+f*(l[2]-b),u[3]=M+f*(l[3]-M),u},i.el=$x,i.em=Ux,i.en=Vu,i.eo=zd,i.ep=function(u,o,l,f,m,x,b,M,P,L,N,U,G,te,ne,ce){var me=new w(16);return me[0]=u,me[1]=o,me[2]=l,me[3]=f,me[4]=m,me[5]=x,me[6]=b,me[7]=M,me[8]=P,me[9]=L,me[10]=N,me[11]=U,me[12]=G,me[13]=te,me[14]=ne,me[15]=ce,me},i.eq=de,i.er=Xm,i.es=Ym,i.et=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new dn(1/0,1/0),max:new dn(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(u,o=!1){const l=w_(new dn(0,0),new dn(vn,vn),u),f=[];if(o&&!iw(l,this._globalClipBounds))return f;for(const m of this._activeRegions){if(m.hiddenByOverlap||!iw(l,m))continue;const x=ow(m.min,m.max,u);f.push({min:x.min,max:x.max,sourceId:this._sourceIds[m.priority],footprint:m.footprint,footprintTileId:m.tileId,order:m.order,clipMask:m.clipMask,clipScope:m.clipScope})}return f}setSources(u){this._setSources(u.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const l=[];for(const f of o.cache.getVisibleCoordinates()){const m=o.cache.getTile(f).buckets[o.layer];m&&m.updateFootprints(f.toUnwrapped(),l)}return l},getOrder:()=>o.order,getClipMask:()=>o.clipMask,getClipScope:()=>o.clipScope})))}_addSource(u){const o=u.getFootprints();if(o.length===0)return;const l=u.getOrder(),f=u.getClipMask(),m=u.getClipScope();for(const x of o){if(!x.footprint)continue;const b=w_(x.footprint.min,x.footprint.max,x.id);this._activeRegions.push({min:b.min,max:b.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:x.id,footprint:x.footprint,order:l,clipMask:f,clipScope:m})}this._sourceIds.push(u.getSourceId())}_computeReplacement(){this._activeRegions.sort((o,l)=>o.priority-l.priority||Dx(o.min,l.min)||Dx(o.max,l.max)||o.order-l.order||o.clipMask-l.clipMask||function(f,m){const x=(b,M)=>b+M;return f.length-m.length||f.reduce(x,"").localeCompare(m.reduce(x,""))}(o.clipScope,l.clipScope));let u=this._activeRegions.length!==this._prevRegions.length;if(!u){let o=0;for(;!u&&o!==this._activeRegions.length;){const l=this._activeRegions[o],f=this._prevRegions[o];u=l.priority!==f.priority||!YE(l,f)||l.order!==f.order||l.clipMask!==f.clipMask||!Hs(l.clipScope,f.clipScope),++o}}if(u){++this._updateTime;for(const l of this._activeRegions)l.order!==b_&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,l.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,l.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,l.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,l.max.y));const o=l=>{const f=this._activeRegions;if(l>=f.length)return l;const m=f[l].priority;for(;l<f.length&&f[l].priority===m;)++l;return l};if(this._sourceIds.length>1){let l=0,f=o(l);for(;l!==f;){let m=l;const x=l;for(;m!==f;){const b=this._activeRegions[m];b.hiddenByOverlap=!1;for(let M=0;M<x;M++){const P=this._activeRegions[M];if(!P.hiddenByOverlap&&b.order===b_&&iw(b,P)&&(b.hiddenByOverlap=Ty(b.footprint,b.tileId,P.footprint,P.tileId),b.hiddenByOverlap))break}++m}l=f,f=o(l)}}}}_setSources(u){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=u.length-1;o>=0;o--)this._addSource(u[o]);this._computeReplacement()}},i.eu=class{constructor(u){this._createGrid(u),this._createPoles(u)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const u of this._poleSegments)u.destroy();for(const u of this._gridSegments)u.withSkirts.destroy(),u.withoutSkirts.destroy()}_fillGridMeshWithLods(u,o){const l=new zc,f=new Do,m=[],x=u+1+2,b=o[0]+1,M=o[0]+1+(1+o.length),P=(L,N,U)=>{let G=L===x-1?L-2:L===0?L:L-1;return G+=U?24575:0,[G,N]};for(let L=0;L<x;++L)l.emplaceBack(...P(L,0,!0));for(let L=0;L<b;++L)for(let N=0;N<x;++N)l.emplaceBack(...P(N,L,(N===0||N===x-1)&&!0));for(let L=0;L<o.length;++L){const N=o[L];for(let U=0;U<x;++U)l.emplaceBack(...P(U,N,!0))}for(let L=0;L<o.length;++L){const N=f.length,U=o[L]+1+2,G=new Do;for(let ce=0;ce<U-1;ce++){const me=ce===U-2,ve=me?x*(M-o.length+L-ce):x;for(let Ie=0;Ie<x-1;Ie++){const Me=ce*x+Ie;ce===0||me||Ie===0||Ie===x-2?(G.emplaceBack(Me+1,Me,Me+ve),G.emplaceBack(Me+ve,Me+ve+1,Me+1)):(f.emplaceBack(Me+1,Me,Me+ve),f.emplaceBack(Me+ve,Me+ve+1,Me+1))}}const te=ho.simpleSegment(0,N,l.length,f.length-N);for(let ce=0;ce<G.uint16.length;ce+=3)f.emplaceBack(G.uint16[ce],G.uint16[ce+1],G.uint16[ce+2]);const ne=ho.simpleSegment(0,N,l.length,f.length-N);m.push({withoutSkirts:te,withSkirts:ne})}return{vertices:l,indices:f,segments:m}}_createGrid(u){const o=this._fillGridMeshWithLods(H,Y);this._gridSegments=o.segments,this._gridBuffer=u.createVertexBuffer(o.vertices,Vc.members),this._gridIndexBuffer=u.createIndexBuffer(o.indices,!0)}_createPoles(u){const o=new Do;for(let b=0;b<=H;b++)o.emplaceBack(0,b+1,b+2);this._poleIndexBuffer=u.createIndexBuffer(o,!0);const l=new jc,f=new jc,m=new jc,x=new jc;this._poleSegments=[];for(let b=0,M=0;b<R;b++){const P=360/(1<<b);l.emplaceBack(0,-E,0,.5,0),f.emplaceBack(0,-E,0,.5,1),m.emplaceBack(0,-E,0,.5,.5),x.emplaceBack(0,-E,0,.5,.5);for(let L=0;L<=H;L++){let N=L/H,U=0;const G=ar(0,P,N),[te,ne,ce]=ie(DE,Ko,G,E);l.emplaceBack(te,ne,ce,N,U),f.emplaceBack(te,ne,ce,N,1-U);const me=re(G);N=.5+.5*Math.sin(me),U=.5+.5*Math.cos(me),m.emplaceBack(te,ne,ce,N,U),x.emplaceBack(te,ne,ce,N,1-U)}this._poleSegments.push(ho.simpleSegment(M,0,66,64)),M+=66}this._poleNorthVertexBuffer=u.createVertexBuffer(l,Da,!1),this._poleSouthVertexBuffer=u.createVertexBuffer(f,Da,!1),this._texturedPoleNorthVertexBuffer=u.createVertexBuffer(m,Da,!1),this._texturedPoleSouthVertexBuffer=u.createVertexBuffer(x,Da,!1)}getGridBuffers(u,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[u].withSkirts:this._gridSegments[u].withoutSkirts]}getPoleBuffers(u,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[u]]}},i.ev=b_,i.ew=Ne,i.ex=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.ey=Xe,i.ez=tn,i.f=function(u){return u.indexOf("mapbox:")===0},i.f0=uU,i.f1=hn,i.f2=lg,i.f3="hd_road_elevation",i.f4=tc,i.f5=er,i.f6=Il,i.f7=TP,i.f8=D_,i.f9=function(u,o,l,f,m,x,b,M=1,P,L){u.createArrays(),u.tilePixelRatio=vn/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;const N=u.layers[0].layout,U=u.layers[0]._unevaluatedLayout._values,G={};G.scaleFactor=M,G.textSizeScaleRange=N.get("text-size-scale-range"),G.iconSizeScaleRange=N.get("icon-size-scale-range");const[te,ne]=G.textSizeScaleRange,[ce,me]=G.iconSizeScaleRange;G.textScaleFactor=We(G.scaleFactor,te,ne),G.iconScaleFactor=We(G.scaleFactor,ce,me);const ve=U["text-size"],Ie=U["icon-size"];if(u.textSizeData.kind==="composite"){const{minZoom:Qe,maxZoom:rt}=u.textSizeData;G.compositeTextSizes=[ve.possiblyEvaluate(new Ii(Qe),x),ve.possiblyEvaluate(new Ii(rt),x)]}if(u.iconSizeData.kind==="composite"){const{minZoom:Qe,maxZoom:rt}=u.iconSizeData;G.compositeIconSizes=[Ie.possiblyEvaluate(new Ii(Qe),x),Ie.possiblyEvaluate(new Ii(rt),x)]}G.layoutTextSize=ve.possiblyEvaluate(new Ii(b+1),x),G.layoutIconSize=Ie.possiblyEvaluate(new Ii(b+1),x),G.textMaxSize=ve.possiblyEvaluate(new Ii(18),x);const Me=N.get("symbol-placement"),ue=N.get("text-rotation-alignment")==="map"&&Me!=="point",we=N.get("text-size");let Pe=!1;const Be=[];for(const Qe of u.features){const rt=N.get("text-font").evaluate(Qe,{},x).join(","),ot=we.evaluate(Qe,{},x)*G.textScaleFactor,ct=G.layoutTextSize.evaluate(Qe,{},x)*G.textScaleFactor,At=G.layoutIconSize.evaluate(Qe,{},x)*G.iconScaleFactor,Yt={horizontal:{},vertical:void 0},Vt=Qe.text;let qt,nn=[0,0];if(Vt){const Gn=Vt.toString(),br=N.get("text-letter-spacing").evaluate(Qe,{},x)*Qs,zr=N.get("text-line-height").evaluate(Qe,{},x)*Qs,Br=jv(Gn)?br:0,Gr=N.get("text-anchor").evaluate(Qe,{},x),$r=N.get("text-variable-anchor");if(!$r){const Ve=N.get("text-radial-offset").evaluate(Qe,{},x);if(Ve)nn=P4(Gr,[Ve*Qs,CP]);else{const Pt=N.get("text-offset").evaluate(Qe,{},x);nn=[Pt[0]*Qs,Pt[1]*Qs]}}let jr=ue?"center":N.get("text-justify").evaluate(Qe,{},x);const qi=Me==="point",eo=qi?N.get("text-max-width").evaluate(Qe,{},x)*Qs:1/0,ze=Ve=>{u.allowVerticalPlacement&&Fm(Gn)&&(Yt.vertical=bP(Vt,o,l,m,rt,eo,zr,Gr,Ve,Br,nn,Uc.vertical,!0,ct,ot,P))};if(!ue&&$r){const Ve=jr==="auto"?$r.map(mn=>AP(mn)):[jr];let Pt=!1;for(let mn=0;mn<Ve.length;mn++){const Cn=Ve[mn];if(!Yt.horizontal[Cn])if(Pt)Yt.horizontal[Cn]=Yt.horizontal[0];else{const Tn=bP(Vt,o,l,m,rt,eo,zr,"center",Cn,Br,nn,Uc.horizontal,!1,ct,ot,P);Tn&&(Yt.horizontal[Cn]=Tn,Pt=Tn.positionedLines.length===1)}}ze("left")}else{if(jr==="auto"&&(jr=AP(Gr)),qi||N.get("text-writing-mode").indexOf("horizontal")>=0||!Fm(Gn)){const Ve=bP(Vt,o,l,m,rt,eo,zr,Gr,jr,Br,nn,Uc.horizontal,!1,ct,ot,P);Ve&&(Yt.horizontal[jr]=Ve)}ze(qi?"left":jr)}}let Et,Ut,bt,Ct,on,un,Qn,Nn=!1;if(Qe.icon&&Qe.icon.hasPrimary()){const Gn=k4(Qe.icon,u.iconSizeData,U["icon-size"],x,u.zoom,Qe,P,G.iconScaleFactor);Et=Gn.iconPrimary,bt=Gn.iconSecondary;const br=Et.toString();if(Ut=f.get(br),Ut&&(on=N.get("icon-offset").evaluate(Qe,{},x),un=N.get("icon-anchor").evaluate(Qe,{},x),Qn=N.get("icon-text-fit").evaluate(Qe,{},x),qt=jie(m.get(br),bt?m.get(bt.toString()):void 0,on,un),Nn=Ut.sdf,u.sdfIcons===void 0?u.sdfIcons=Ut.sdf:u.sdfIcons!==Ut.sdf&&Ir("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ut.pixelRatio!==u.pixelRatio||N.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0)),bt){const zr=bt.toString();Ct=f.get(zr)}}Pe=Pe||!(!Qe.icon||!Qe.icon.hasSecondary());const Sn=MP(Yt.horizontal)||Yt.vertical;u.iconsInText||(u.iconsInText=!!Sn&&Sn.iconsInText);const rn=ct*G.textScaleFactor/Qs,{defaultShapedIcon:Mr,verticallyShapedIcon:Hn}=Xie(u,qt,N,Qe,x,Yt,rn,on,Qn);Qn!=="none"&&qt&&(m4(qt)||g4(qt))&&(uC(0,Ut,Et,qt,Mr,Qn,L,f,m),uC(0,Ct,bt,qt,Mr,Qn,L,f,m),Hn&&(uC(0,Ut,Et,qt,Hn,Qn,L,f,m),uC(0,Ct,bt,qt,Hn,Qn,L,f,m))),qt=Mr,Be.push({feature:Qe,shapedTextOrientations:Yt,shapedText:Sn,shapedIcon:qt,iconPrimary:Et,iconSecondary:bt,iconOffset:on,iconAnchor:un,verticallyShapedIcon:Hn,layoutTextSize:ct,layoutIconSize:At,textOffset:nn,isSDFIcon:Nn,iconTextFit:Qn})}return{featureData:Be,sizes:G,hasAnySecondaryIcon:Pe,textAlongLine:ue,symbolPlacement:Me}},i.fa=E4,i.fb=function(u,o,l,f,m,x,b,M,P,L){const{featureData:N,hasAnySecondaryIcon:U,sizes:G,textAlongLine:te,symbolPlacement:ne}=o;for(const ce of N){const{shapedIcon:me,verticallyShapedIcon:ve,feature:Ie,shapedTextOrientations:Me,shapedText:ue,layoutTextSize:we,textOffset:Pe,isSDFIcon:Be,iconPrimary:Qe,iconSecondary:rt,iconTextFit:ot,iconOffset:ct}=ce;O4(me,L.iconPositions,Qe,rt),O4(ve,L.iconPositions,Qe,rt),Yie(Me,L.iconPositions),(ue||me)&&Zie(u,Ie,Me,me,ve,P,G,we,0,Pe,Be,f,m,b,M,U,ot,ct,te,ne)}l&&u.generateCollisionDebugBuffers(x,u.collisionBoxArray,G.textScaleFactor)},i.fc=$d,i.fd=LC,i.fe=oa,i.ff=G1,i.fg=a4,i.fh=Di,i.fi=function(u){let o=0;if(new Uint32Array(u,0,1)[0]!==nU){const l=new Uint32Array(u,0,7),[,,f,m,x,b]=l;o=l.byteLength+m+x+b+x,(f!==u.byteLength||o>=u.byteLength)&&Ir("Invalid b3dm header information.")}return sU(u,o)},i.fj=function(u,o){const l=lU(u);for(const f of l){for(const m of f.meshes)Ese(m);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(Cse(f.lights,o)))}return l},i.fk=AC,i.fl=zi,i.fm=wV,i.fn=Zl,i.fo=function(u){wc(),Vl!=null&&Vl.then(o=>{o.keys().then(l=>{for(let f=0;f<l.length-u;f++)o.delete(l[f]).catch(m=>Ir(m.message))}).catch(l=>Ir(l.message))}).catch(o=>Ir(o.message))},i.g=function(u,o){return tl(st(u,{method:"GET"}),o)},i.h=Qa,i.i=function(u){return Yo.API_STYLE_REGEX.test(u)&&!As(u)},i.j=function(u){return decodeURIComponent(atob(u).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(u){return btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,(o,l)=>String.fromCharCode(+("0x"+l))))},i.l=st,i.m=wv,i.n=function(u,o){return tl(st(u,{type:"json"}),o)},i.o=bh,i.p=function(u,o){return tl(st(u,{method:"POST"}),o)},i.q=wl,i.r=Os,i.s=function(u){try{const o=self[u];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=Ja,i.u=function(){return function u(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()},i.v=function(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)},i.w=Ir,i.x=function(){return WP||(WP=new O_),WP},i.y=QP,i.z=hm}),c(["./shared"],function(i){function g(De){const re=De?De.url.toString():void 0;return re?performance.getEntriesByName(re):[]}function w(De){if(typeof De=="number"||typeof De=="boolean"||typeof De=="string"||De==null)return JSON.stringify(De);if(Array.isArray(De)){let le="[";for(const xe of De)le+=`${w(xe)},`;return`${le}]`}let re="{";for(const le of Object.keys(De).sort())re+=`${le}:${w(De[le])},`;return`${re}}`}function T(De){let re="";for(const le of i.bu)(De.type!=="model"||le!=="minzoom"&&le!=="maxzoom")&&(re+=`/${w(De[le])}`);return re}class A{constructor(re){this.keyCache={},this._layers={},this._layerConfigs={},re&&this.replace(re)}replace(re,le){this._layerConfigs={},this._layers={},this.update(re,[],le)}update(re,le,xe){this._options=xe;for(const Ne of re)this._layerConfigs[Ne.id]=Ne,(this._layers[Ne.id]=i.dc(Ne,this.scope,null,this._options)).compileFilter(xe),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id];for(const Ne of le)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const ke=function(Ne,Xe){const We={};for(let at=0;at<Ne.length;at++){const ft=Ne[at];let st=Xe&&Xe[ft.id];st||(ft.type==="symbol"?st=ft.id:(st=T(ft),ft.type==="line"&&ft.paint&&function ln(xn){return typeof xn=="string"&&xn==="line-progress"||(Array.isArray(xn)?xn.some(ln):!(!xn||typeof xn!="object")&&Object.values(xn).some(ln))}(ft.paint["line-width"])&&(st+=`/${w(ft.paint["line-width"])}`))),Xe&&(Xe[ft.id]=st);let zt=We[st];zt||(zt=We[st]=[]),zt.push(ft)}const Ke=[];for(const at in We)Ke.push(We[at]);return Ke}(Object.values(this._layerConfigs),this.keyCache);for(const Ne of ke){const Xe=Ne.map(zt=>this._layers[zt.id]),We=Xe[0];if(We.visibility==="none")continue;const Ke=We.source||"";let at=this.familiesBySource[Ke];at||(at=this.familiesBySource[Ke]={});const ft=We.sourceLayer||"_geojsonTileLayer";let st=at[ft];st||(st=at[ft]=[]),st.push(Xe)}}}const D=1*i.e_;class k{constructor(re){const le={},xe=[];for(const We in re){const Ke=re[We],at=le[We]={};for(const ft in Ke.glyphs){const st=Ke.glyphs[+ft];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const zt=st.metrics.localGlyph?D:1,ln={x:0,y:0,w:st.bitmap.width+2*zt,h:st.bitmap.height+2*zt};xe.push(ln),at[ft]=ln}}const{w:ke,h:Ne}=i.H(xe),Xe=new i.eZ({width:ke||1,height:Ne||1});for(const We in re){const Ke=re[We];for(const at in Ke.glyphs){const ft=Ke.glyphs[+at];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const st=le[We][at],zt=ft.metrics.localGlyph?D:1;i.eZ.copy(ft.bitmap,Xe,{x:0,y:0},{x:st.x+zt,y:st.y+zt},ft.bitmap)}}this.image=Xe,this.positions=le}}i.eY(k,"GlyphAtlas");class I{constructor(re){this.tileID=new i.aM(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.tileZoom=re.tileZoom,this.uid=re.uid,this.zoom=re.zoom,this.lut=re.lut,this.canonical=re.tileID.canonical,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.scope=re.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.request&&re.request.collectResourceTiming,this.promoteId=re.promoteId,this.isSymbolTile=re.isSymbolTile,this.tileTransform=i.aW(re.tileID.canonical,re.projection),this.projection=re.projection,this.worldview=re.worldview,this.localizableLayerIds=re.localizableLayerIds,this.brightness=re.brightness,this.extraShadowCaster=!!re.extraShadowCaster,this.tessellationStep=re.tessellationStep,this.scaleFactor=re.scaleFactor}parse(re,le,xe,ke,Ne,Xe){this.status="parsing",this.data=re,this.collisionBoxArray=new i.b0;const We=new i.e$(Object.keys(re.layers).sort()),Ke=new i.f0(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];const at={},ft=new i.f1(256,256),st={featureIndex:Ke,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:ft,availableImages:xe,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},zt=le.familiesBySource[this.source];for(const Kr in zt){const wi=re.layers[Kr];if(!wi)continue;let zi=!1,$i=!1,bo=!1;for(const Oo of zt[Kr])Oo[0].type==="symbol"?zi=!0:$i=!0,Oo[0].is3D()&&Oo[0].type!=="model"&&(bo=!0);if(this.extraShadowCaster&&!bo||this.isSymbolTile===!0&&!zi||this.isSymbolTile===!1&&!$i)continue;wi.version===1&&i.w(`Vector tile source "${this.source}" layer "${Kr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Zr=We.encode(Kr),lo=[];let Is=!1;for(let Oo=0,is=0;Oo<wi.length;Oo++){const Pi=wi.feature(Oo),Yo=Ke.getId(Pi,Kr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Kr)){const Qa=Pi.properties?Pi.properties.worldview:null;if(this.worldview&&typeof Qa=="string")if(Qa==="all")Pi.properties.$localized=!0;else{if(!Qa.split(",").includes(this.worldview))continue;Pi.properties.$localized=!0,Pi.properties.worldview=this.worldview}}!Is&&Pi.properties&&Pi.properties.hasOwnProperty(i.f2)&&(Is=!0),lo.push({feature:Pi,id:Yo,index:is,sourceLayerIndex:Zr}),is++}Is&&!st.elevationFeatures&&re.layers.hasOwnProperty(i.f3)&&(st.elevationFeatures=i.f4.parseFrom(re.layers[i.f3],this.canonical));for(const Oo of zt[Kr]){const is=Oo[0];(!this.extraShadowCaster||is.is3D()&&is.type!=="model")&&(this.isSymbolTile!==void 0&&is.type==="symbol"!==this.isSymbolTile||is.minzoom&&this.zoom<Math.floor(is.minzoom)||is.maxzoom&&this.zoom>=is.maxzoom||is.visibility!=="none"&&(F(Oo,this.zoom,st.brightness,xe),(at[is.id]=is.createBucket({index:Ke.bucketLayerIDs.length,layers:Oo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zr,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:ke})).populate(lo,st,this.tileID.canonical,this.tileTransform),Ke.bucketLayerIDs.push(Oo.map(Pi=>i.C(Pi.id,Pi.scope)))))}}let ln,xn,ir,er,tr,kr;ft.trim();const bi={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ir=()=>{if(ln)return this.status="done",Xe(ln);if(this.extraShadowCaster)this.status="done",Xe(null,{buckets:Object.values(at).filter(Kr=>!Kr.isEmpty()),featureIndex:Ke,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:st.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(xn&&ir&&er){const Kr=new k(xn),wi=new Map;for(const[bo,Zr]of ir.entries()){const{imagePosition:lo}=i.f7(bo,Zr,i.f8);wi.set(bo,lo)}const zi={};for(const bo in at){const Zr=at[bo];Zr instanceof i.b1&&(F(Zr.layers,this.zoom,st.brightness,xe),zi[bo]=i.f9(Zr,xn,Kr.positions,ir,wi,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,tr))}const $i={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(Ne,ir,tr,()=>{$i.iconsPending=!1,li(zi,Kr,$i)}),this.rasterizeIfNeeded(Ne,er,kr,()=>{$i.patternsPending=!1,li(zi,Kr,$i)})}},li=(Kr,wi,zi,$i)=>{if(zi.iconsPending||zi.patternsPending)return;const bo=new i.fa(ir,er,this.lut);for(const Zr in at){const lo=at[Zr];if(Zr in Kr)i.fb(lo,Kr[Zr],this.showCollisionBoxes,xe,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,ir,bo);else if(lo.hasPattern&&(lo instanceof i.b7||lo instanceof i.b8||lo instanceof i.dV)){F(lo.layers,this.zoom,st.brightness,xe);const Is=Object.fromEntries(bo.patternPositions);lo.addFeatures(st,this.tileID.canonical,Is,xe,this.tileTransform,this.brightness)}}this.status="done",Xe(null,{buckets:Object.values(at).filter(Zr=>!Zr.isEmpty()),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wi.image,lineAtlas:ft,imageAtlas:bo,brightness:st.brightness})};if(!this.extraShadowCaster){const Kr=i.f5(st.glyphDependencies,$i=>Object.keys($i).map(Number));Object.keys(Kr).length?Ne.send("getGlyphs",{uid:this.uid,stacks:Kr,scope:this.scope},($i,bo)=>{ln||(ln=$i,xn=bo,Ir())},void 0,!1,bi):xn={};const wi=Array.from(st.iconDependencies.keys()).map($i=>i.I.parse($i));wi.length?Ne.send("getImages",{images:wi,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},($i,bo)=>{ln||(ln=$i,ir=new Map,tr=this.updateImageMapAndGetImageTaskQueue(ir,bo,st.iconDependencies),Ir())},void 0,!1,bi):(ir=new Map,tr=new Map);const zi=Array.from(st.patternDependencies.keys()).map($i=>i.I.parse($i));zi.length?Ne.send("getImages",{images:zi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},($i,bo)=>{ln||(ln=$i,er=new Map,kr=this.updateImageMapAndGetImageTaskQueue(er,bo,st.patternDependencies),Ir())},void 0,!1,bi):(er=new Map,kr=new Map)}if(st.elevationFeatures&&st.elevationFeatures.length>0){const Kr=[];for(const zi of Object.values(at))if(zi instanceof i.b8){const $i=zi.getUnevaluatedPortalGraph();$i&&Kr.push($i)}const wi=i.f6.evaluate(Kr);for(const zi of Object.values(at))zi instanceof i.b8&&zi.setEvaluatedPortalGraph(wi)}Ir()}rasterizeIfNeeded(re,le,xe,ke){Array.from(le.values()).some(Ne=>Ne.usvg)?this.rasterize(re,le,xe,ke):ke()}updateImageMapAndGetImageTaskQueue(re,le,xe){const ke=new Map;for(const Ne of le.keys()){const Xe=xe.get(Ne)||[];for(const We of Xe){const Ke=We.toString(),at=le.get(We.id.toString());at.usvg?ke.has(Ke)||(ke.set(Ke,We),re.set(Ke,Object.assign({},at))):re.set(Ke,at)}}return ke}rasterize(re,le,xe,ke){this.rasterizeTask=re.send("rasterizeImages",{scope:this.scope,tasks:xe},(Ne,Xe)=>{if(!Ne)for(const[We,Ke]of Xe.entries()){const at=Object.assign(le.get(We),{data:Ke});le.set(We,at)}ke()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function F(De,re,le,xe){const ke=new i.aa(re,{brightness:le});for(const Ne of De)Ne.recalculate(ke,xe)}class j extends i.E{constructor(re,le,xe,ke,Ne,Xe,We){super(),this.actor=re,this.layerIndex=le,this.availableImages=xe,this.availableModels=ke,this.loadVectorData=Xe||i.aJ,this.loading={},this.loaded={},this.deduped=new i.aI(re.scheduler),this.isSpriteLoaded=Ne,this.scheduler=re.scheduler,this.brightness=We}loadTile(re,le){const xe=re.uid,ke=re&&re.request,Ne=ke&&ke.collectResourceTiming,Xe=this.loading[xe]=new I(re);Xe.abort=this.loadVectorData(re,(We,Ke)=>{const at=!this.loading[xe];if(delete this.loading[xe],Xe.cancelRasterize(),at||We||!Ke)return Xe.status="done",at||(this.loaded[xe]=Xe),le(We);const ft=Ke.rawData,st={};Ke.expires&&(st.expires=Ke.expires),Ke.cacheControl&&(st.cacheControl=Ke.cacheControl),Xe.vectorTile=Ke.vectorTile||new i.fc.VectorTile(new i.bq(ft));const zt=()=>{Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(ln,xn)=>{if(ln||!xn)return le(ln);const ir={};if(Ne){const er=g(ke);er.length>0&&(ir.resourceTiming=JSON.parse(JSON.stringify(er)))}le(null,i.l({rawTileData:ft.slice(0)},xn,st,ir))})};this.isSpriteLoaded?zt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(zt,{type:"parseTile",isSymbolTile:re.isSymbolTile,zoom:re.tileZoom}):zt()}),this.loaded=this.loaded||{},this.loaded[xe]=Xe})}reloadTile(re,le){const xe=this.loaded,ke=re.uid;if(xe&&xe[ke]){const Ne=xe[ke];Ne.scaleFactor=re.scaleFactor,Ne.showCollisionBoxes=re.showCollisionBoxes,Ne.projection=re.projection,Ne.brightness=re.brightness,Ne.tileTransform=i.aW(re.tileID.canonical,re.projection),Ne.extraShadowCaster=re.extraShadowCaster,Ne.lut=re.lut;const Xe=(We,Ke)=>{const at=Ne.reloadCallback;at&&(delete Ne.reloadCallback,Ne.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,at)),le(We,Ke)};Ne.status==="parsing"?Ne.reloadCallback=Xe:Ne.status==="done"&&(Ne.vectorTile?Ne.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Xe):Xe())}else le(null,void 0)}abortTile(re,le){const xe=re.uid,ke=this.loading[xe];ke&&(ke.abort&&ke.abort(),delete this.loading[xe]),le()}removeTile(re,le){const xe=this.loaded,ke=re.uid;xe&&xe[ke]&&delete xe[ke],le()}}class V{loadTile(re,le){const{uid:xe,encoding:ke,rawImageData:Ne,padding:Xe}=re,We=ImageBitmap&&Ne instanceof ImageBitmap?this.getImageData(Ne,Xe):Ne;le(null,new i.fd(xe,We,ke,Xe<1))}reloadTile(re,le){le(null,null)}abortTile(re,le){le()}removeTile(re,le){le()}getImageData(re,le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(re.width,re.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=re.width,this.offscreenCanvas.height=re.height,this.offscreenCanvasContext.drawImage(re,0,0,re.width,re.height);const xe=this.offscreenCanvasContext.getImageData(-le,-le,re.width+2*le,re.height+2*le);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),xe}}i.bp.setPbf(i.bq);class W{constructor(re){this._mrt=new i.bp(re.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=re.uid,this.tileID=re.tileID,this.source=re.source}parse(re,le){const xe=this._mrt;this.status="parsing",this._entireBuffer=re;try{xe.parseHeader(re),this._isHeaderLoaded=!0;const ke=[];for(const Ne in xe.layers){const Xe=xe.getLayer(Ne),We=Xe.getDataRange(Xe.getBandList()),Ke=xe.createDecodingTask(We),at=re.slice(We.firstByte,We.lastByte+1),ft=i.bp.performDecoding(at,Ke).then(st=>Ke.complete(null,st)).catch(st=>Ke.complete(st,null));ke.push(ft)}Promise.allSettled(ke).then(()=>le(null,xe)).catch(Ne=>le(Ne))}catch(ke){le(ke)}}}class Z{constructor(re){this.actor=re,this.loading={},this.loaded={}}loadTile(re,le){const xe=re.uid,ke=re.request,Ne=this.loading[xe]=new W(re),{cancel:Xe}=i.br(ke,(We,Ke,at,ft)=>{const st=!this.loading[xe];if(delete this.loading[xe],st||We||!Ke)return Ne.status="done",st||(this.loaded[xe]=Ne),le(We);Ne.parse(Ke,(zt,ln)=>{if(zt||!ln)return le(zt);le(null,ln,at,ft)}),this.loaded[xe]=Ne});Ne.abort=Xe}reloadTile(re,le){le(null,void 0)}abortTile(re,le){const xe=re.uid,ke=this.loading[xe];ke&&(ke.abort&&ke.abort(),delete this.loading[xe]),le()}removeTile(re,le){const xe=re.uid;this.loaded[xe]&&delete this.loaded[xe],le()}decodeRasterArray(re,le){i.bp.performDecoding(re.buffer,re.task).then(xe=>le(null,xe)).catch(xe=>le(xe))}}const K=i.fc.VectorTileFeature.prototype.toGeoJSON;class ee{constructor(re){this._feature=re,this.extent=i.aj,this.type=re.type,this.properties=re.tags,"id"in re&&!isNaN(re.id)&&(this.id=parseInt(re.id,10))}loadGeometry(){if(this._feature.type===1){const re=[];for(const le of this._feature.geometry)re.push([new i.P(le[0],le[1])]);return re}{const re=[];for(const le of this._feature.geometry){const xe=[];for(const ke of le)xe.push(new i.P(ke[0],ke[1]));re.push(xe)}return re}}toGeoJSON(re,le,xe){return K.call(this,re,le,xe)}}class se{constructor(re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.aj,this.length=re.length,this._features=re}feature(re){return new ee(this._features[re])}}const he=64/4096,ye=128;class _e{constructor(){this.features=new Map}clear(){this.features.clear()}load(re=[],le){for(const xe of re){const ke=xe.id;if(ke==null)continue;let Ne=this.features.get(ke);Ne&&this.updateCache(Ne,le),xe.geometry?(Ne=be(xe),this.updateCache(Ne,le),this.features.set(ke,Ne)):this.features.delete(ke),this.updateCache(Ne,le)}}updateCache(re,le){for(const{canonical:xe,uid:ke}of Object.values(le)){const{z:Ne,x:Xe,y:We}=xe;ae(re,Math.pow(2,Ne),Xe,We)&&delete le[ke]}}getTile(re,le,xe){const ke=Math.pow(2,re),Ne=[];for(const Xe of this.features.values())ae(Xe,ke,le,xe)&&Ne.push(He(Xe,ke,le,xe));return{features:Ne}}getFeatures(){return[...this.features.values()]}}function ae({minX:De,minY:re,maxX:le,maxY:xe},ke,Ne,Xe){return De<(Ne+1+he)/ke&&re<(Xe+1+he)/ke&&le>(Ne-he)/ke&&xe>(Xe-he)/ke}function be(De){const{id:re,geometry:le,properties:xe}=De;if(!le)return;if(le.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:ke,coordinates:Ne}=le,Xe={id:re,type:1,geometry:[],tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},We=Xe.geometry;if(ke==="Point")Te(Ne,We,Xe);else if(ke==="MultiPoint")for(const Ke of Ne)Te(Ke,We,Xe);else if(ke==="LineString")Xe.type=2,Ae(Ne,We,Xe);else if(ke==="MultiLineString")Xe.type=2,Re(Ne,We,Xe);else if(ke==="Polygon")Xe.type=3,Re(Ne,We,Xe,!0);else{if(ke!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Xe.type=3;for(const Ke of Ne)Re(Ke,We,Xe,!0)}return Xe}function Te([De,re],le,xe){const ke=i.ay(De);let Ne=i.aH(re);Ne=Ne<0?0:Ne>1?1:Ne,le.push(ke,Ne),xe.minX=Math.min(xe.minX,ke),xe.minY=Math.min(xe.minY,Ne),xe.maxX=Math.max(xe.maxX,ke),xe.maxY=Math.max(xe.maxY,Ne)}function Ae(De,re,le,xe=!1,ke=!1){const Ne=[];for(const Xe of De)Te(Xe,Ne,le);re.push(Ne),xe&&function(Xe,We){let Ke=0;for(let at=0,ft=Xe.length,st=ft-2;at<ft;st=at,at+=2)Ke+=(Xe[at]-Xe[st])*(Xe[at+1]+Xe[st+1]);if(Ke>0===We)for(let at=0,ft=Xe.length;at<ft/2;at+=2){const st=Xe[at],zt=Xe[at+1];Xe[at]=Xe[ft-2-at],Xe[at+1]=Xe[ft-1-at],Xe[ft-2-at]=st,Xe[ft-1-at]=zt}}(Ne,ke)}function Re(De,re,le,xe=!1){for(let ke=0;ke<De.length;ke++)Ae(De[ke],re,le,xe,ke===0)}function He(De,re,le,xe){const{id:ke,type:Ne,geometry:Xe,tags:We}=De,Ke=[];if(Ne===1)(function(at,ft,st,zt,ln){for(let xn=0;xn<at.length;xn+=2){const ir=Math.round(i.aj*(at[xn+0]*ft-st)),er=Math.round(i.aj*(at[xn+1]*ft-zt));ln.push([ir,er])}})(Xe,re,le,xe,Ke);else for(const at of Xe)Se(at,re,le,xe,Ke);return{id:ke,type:Ne,geometry:Ke,tags:We}}function Se(De,re,le,xe,ke){const Xe=i.aj+ye;let We;for(let Ke=0;Ke<De.length-2;Ke+=2){let at=Math.round(i.aj*(De[Ke+0]*re-le)),ft=Math.round(i.aj*(De[Ke+1]*re-xe)),st=Math.round(i.aj*(De[Ke+2]*re-le)),zt=Math.round(i.aj*(De[Ke+3]*re-xe));const ln=st-at,xn=zt-ft;at<-128&&st<-128||(at<-128?(ft+=Math.round(xn*((-128-at)/ln)),at=-128):st<-128&&(zt=ft+Math.round(xn*((-128-at)/ln)),st=-128),ft<-128&&zt<-128||(ft<-128?(at+=Math.round(ln*((-128-ft)/xn)),ft=-128):zt<-128&&(st=at+Math.round(ln*((-128-ft)/xn)),zt=-128),at>=Xe&&st>=Xe||(at>=Xe?(ft+=Math.round(xn*((Xe-at)/ln)),at=Xe):st>=Xe&&(zt=ft+Math.round(xn*((Xe-at)/ln)),st=Xe),ft>=Xe&&zt>=Xe||(ft>=Xe?(at+=Math.round(ln*((Xe-ft)/xn)),ft=Xe):zt>=Xe&&(st=at+Math.round(ln*((Xe-ft)/xn)),zt=Xe),We&&at===We[We.length-1][0]&&ft===We[We.length-1][1]||(We=[[at,ft]],ke.push(We)),We.push([st,zt])))))}}var qe,it,tt,Oe={exports:{}},Je=function(){if(tt)return Oe.exports;tt=1;var De=i.fg(),re=function(){if(it)return qe;it=1;var ft=i.fe(),st=i.ff().VectorTileFeature;function zt(xn,ir){this.options=ir||{},this.features=xn,this.length=xn.length}function ln(xn,ir){this.id=typeof xn.id=="number"?xn.id:void 0,this.type=xn.type,this.rawGeometry=xn.type===1?[xn.geometry]:xn.geometry,this.properties=xn.tags,this.extent=ir||4096}return qe=zt,zt.prototype.feature=function(xn){return new ln(this.features[xn],this.options.extent)},ln.prototype.loadGeometry=function(){var xn=this.rawGeometry;this.geometry=[];for(var ir=0;ir<xn.length;ir++){for(var er=xn[ir],tr=[],kr=0;kr<er.length;kr++)tr.push(new ft(er[kr][0],er[kr][1]));this.geometry.push(tr)}return this.geometry},ln.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var xn=this.geometry,ir=1/0,er=-1/0,tr=1/0,kr=-1/0,bi=0;bi<xn.length;bi++)for(var Ir=xn[bi],li=0;li<Ir.length;li++){var Kr=Ir[li];ir=Math.min(ir,Kr.x),er=Math.max(er,Kr.x),tr=Math.min(tr,Kr.y),kr=Math.max(kr,Kr.y)}return[ir,tr,er,kr]},ln.prototype.toGeoJSON=st.prototype.toGeoJSON,qe}();function le(ft){var st=new De;return function(zt,ln){for(var xn in zt.layers)ln.writeMessage(3,xe,zt.layers[xn])}(ft,st),st.finish()}function xe(ft,st){var zt;st.writeVarintField(15,ft.version||1),st.writeStringField(1,ft.name||""),st.writeVarintField(5,ft.extent||4096);var ln={keys:[],values:[],keycache:{},valuecache:{}};for(zt=0;zt<ft.length;zt++)ln.feature=ft.feature(zt),st.writeMessage(2,ke,ln);var xn=ln.keys;for(zt=0;zt<xn.length;zt++)st.writeStringField(3,xn[zt]);var ir=ln.values;for(zt=0;zt<ir.length;zt++)st.writeMessage(4,at,ir[zt])}function ke(ft,st){var zt=ft.feature;zt.id!==void 0&&st.writeVarintField(1,zt.id),st.writeMessage(2,Ne,ft),st.writeVarintField(3,zt.type),st.writeMessage(4,Ke,zt)}function Ne(ft,st){var zt=ft.feature,ln=ft.keys,xn=ft.values,ir=ft.keycache,er=ft.valuecache;for(var tr in zt.properties){var kr=zt.properties[tr],bi=ir[tr];if(kr!==null){bi===void 0&&(ln.push(tr),ir[tr]=bi=ln.length-1),st.writeVarint(bi);var Ir=typeof kr;Ir!=="string"&&Ir!=="boolean"&&Ir!=="number"&&(kr=JSON.stringify(kr));var li=Ir+":"+kr,Kr=er[li];Kr===void 0&&(xn.push(kr),er[li]=Kr=xn.length-1),st.writeVarint(Kr)}}}function Xe(ft,st){return(st<<3)+(7&ft)}function We(ft){return ft<<1^ft>>31}function Ke(ft,st){for(var zt=ft.loadGeometry(),ln=ft.type,xn=0,ir=0,er=zt.length,tr=0;tr<er;tr++){var kr=zt[tr],bi=1;ln===1&&(bi=kr.length),st.writeVarint(Xe(1,bi));for(var Ir=ln===3?kr.length-1:kr.length,li=0;li<Ir;li++){li===1&&ln!==1&&st.writeVarint(Xe(2,Ir-1));var Kr=kr[li].x-xn,wi=kr[li].y-ir;st.writeVarint(We(Kr)),st.writeVarint(We(wi)),xn+=Kr,ir+=wi}ln===3&&st.writeVarint(Xe(7,1))}}function at(ft,st){var zt=typeof ft;zt==="string"?st.writeStringField(1,ft):zt==="boolean"?st.writeBooleanField(7,ft):zt==="number"&&(ft%1!=0?st.writeDoubleField(3,ft):ft<0?st.writeSVarintField(6,ft):st.writeVarintField(5,ft))}return Oe.exports=le,Oe.exports.fromVectorTileJs=le,Oe.exports.fromGeojsonVt=function(ft,st){st=st||{};var zt={};for(var ln in ft)zt[ln]=new re(ft[ln].features,st),zt[ln].name=ln,zt[ln].version=st.version,zt[ln].extent=st.extent;return le({layers:zt})},Oe.exports.GeoJSONWrapper=re,Oe.exports}(),yt=i.fh(Je);const wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:De=>De},$t=Math.fround||(It=new Float32Array(1),De=>(It[0]=+De,It[0]));var It;const vt=3,sn=5,Rn=6;class yn{constructor(re){this.options=Object.assign(Object.create(wt),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:le,minZoom:xe,maxZoom:ke}=this.options;le&&console.time("total time");const Ne=`prepare ${re.length} points`;le&&console.time(Ne),this.points=re;const Xe=[];for(let Ke=0;Ke<re.length;Ke++){const at=re[Ke];if(!at.geometry)continue;const[ft,st]=at.geometry.coordinates,zt=$t(fn(ft)),ln=$t(Bt(st));Xe.push(zt,ln,1/0,Ke,-1,1),this.options.reduce&&Xe.push(0)}let We=this.trees[ke+1]=this._createTree(Xe);le&&console.timeEnd(Ne);for(let Ke=ke;Ke>=xe;Ke--){const at=+Date.now();We=this.trees[Ke]=this._createTree(this._cluster(We,Ke)),le&&console.log("z%d: %d clusters in %dms",Ke,We.numItems,+Date.now()-at)}return le&&console.timeEnd("total time"),this}getClusters(re,le){let xe=((re[0]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,re[1]));let Ne=re[2]===180?180:((re[2]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)xe=-180,Ne=180;else if(xe>Ne){const st=this.getClusters([xe,ke,180,Xe],le),zt=this.getClusters([-180,ke,Ne,Xe],le);return st.concat(zt)}const We=this.trees[this._limitZoom(le)],Ke=We.range(fn(xe),Bt(Xe),fn(Ne),Bt(ke)),at=We.data,ft=[];for(const st of Ke){const zt=this.stride*st;ft.push(at[zt+sn]>1?Qt(at,zt,this.clusterProps):this.points[at[zt+vt]])}return ft}getChildren(re){const le=this._getOriginId(re),xe=this._getOriginZoom(re),ke="No cluster with the specified id.",Ne=this.trees[xe];if(!Ne)throw new Error(ke);const Xe=Ne.data;if(le*this.stride>=Xe.length)throw new Error(ke);const We=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Ke=Ne.within(Xe[le*this.stride],Xe[le*this.stride+1],We),at=[];for(const ft of Ke){const st=ft*this.stride;Xe[st+4]===re&&at.push(Xe[st+sn]>1?Qt(Xe,st,this.clusterProps):this.points[Xe[st+vt]])}if(at.length===0)throw new Error(ke);return at}getLeaves(re,le,xe){const ke=[];return this._appendLeaves(ke,re,le=le||10,xe=xe||0,0),ke}getTile(re,le,xe){const ke=this.trees[this._limitZoom(re)],Ne=Math.pow(2,re),{extent:Xe,radius:We}=this.options,Ke=We/Xe,at=(xe-Ke)/Ne,ft=(xe+1+Ke)/Ne,st={features:[]};return this._addTileFeatures(ke.range((le-Ke)/Ne,at,(le+1+Ke)/Ne,ft),ke.data,le,xe,Ne,st),le===0&&this._addTileFeatures(ke.range(1-Ke/Ne,at,1,ft),ke.data,Ne,xe,Ne,st),le===Ne-1&&this._addTileFeatures(ke.range(0,at,Ke/Ne,ft),ke.data,-1,xe,Ne,st),st.features.length?st:null}getClusterExpansionZoom(re){let le=this._getOriginZoom(re)-1;for(;le<=this.options.maxZoom;){const xe=this.getChildren(re);if(le++,xe.length!==1)break;re=xe[0].properties.cluster_id}return le}_appendLeaves(re,le,xe,ke,Ne){const Xe=this.getChildren(le);for(const We of Xe){const Ke=We.properties;if(Ke&&Ke.cluster?Ne+Ke.point_count<=ke?Ne+=Ke.point_count:Ne=this._appendLeaves(re,Ke.cluster_id,xe,ke,Ne):Ne<ke?Ne++:re.push(We),re.length===xe)break}return Ne}_createTree(re){const le=new i.bW(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<re.length;xe+=this.stride)le.add(re[xe],re[xe+1]);return le.finish(),le.data=re,le}_addTileFeatures(re,le,xe,ke,Ne,Xe){for(const We of re){const Ke=We*this.stride,at=le[Ke+sn]>1;let ft,st,zt;if(at)ft=Jt(le,Ke,this.clusterProps),st=le[Ke],zt=le[Ke+1];else{const ir=this.points[le[Ke+vt]];ft=ir.properties;const[er,tr]=ir.geometry.coordinates;st=fn(er),zt=Bt(tr)}const ln={type:1,geometry:[[Math.round(this.options.extent*(st*Ne-xe)),Math.round(this.options.extent*(zt*Ne-ke))]],tags:ft};let xn;xn=at||this.options.generateId?le[Ke+vt]:this.points[le[Ke+vt]].id,xn!==void 0&&(ln.id=xn),Xe.features.push(ln)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,le){const{radius:xe,extent:ke,reduce:Ne,minPoints:Xe}=this.options,We=xe/(ke*Math.pow(2,le)),Ke=re.data,at=[],ft=this.stride;for(let st=0;st<Ke.length;st+=ft){if(Ke[st+2]<=le)continue;Ke[st+2]=le;const zt=Ke[st],ln=Ke[st+1],xn=re.within(Ke[st],Ke[st+1],We),ir=Ke[st+sn];let er=ir;for(const tr of xn){const kr=tr*ft;Ke[kr+2]>le&&(er+=Ke[kr+sn])}if(er>ir&&er>=Xe){let tr,kr=zt*ir,bi=ln*ir,Ir=-1;const li=(st/ft<<5)+(le+1)+this.points.length;for(const Kr of xn){const wi=Kr*ft;if(Ke[wi+2]<=le)continue;Ke[wi+2]=le;const zi=Ke[wi+sn];kr+=Ke[wi]*zi,bi+=Ke[wi+1]*zi,Ke[wi+4]=li,Ne&&(tr||(tr=this._map(Ke,st,!0),Ir=this.clusterProps.length,this.clusterProps.push(tr)),Ne(tr,this._map(Ke,wi)))}Ke[st+4]=li,at.push(kr/er,bi/er,1/0,li,-1,er),Ne&&at.push(Ir)}else{for(let tr=0;tr<ft;tr++)at.push(Ke[st+tr]);if(er>1)for(const tr of xn){const kr=tr*ft;if(!(Ke[kr+2]<=le)){Ke[kr+2]=le;for(let bi=0;bi<ft;bi++)at.push(Ke[kr+bi])}}}}return at}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,le,xe){if(re[le+sn]>1){const Xe=this.clusterProps[re[le+Rn]];return xe?Object.assign({},Xe):Xe}const ke=this.points[re[le+vt]].properties,Ne=this.options.map(ke);return xe&&Ne===ke?Object.assign({},Ne):Ne}}function Qt(De,re,le){return{type:"Feature",id:De[re+vt],properties:Jt(De,re,le),geometry:{type:"Point",coordinates:[(xe=De[re],360*(xe-.5)),Kt(De[re+1])]}};var xe}function Jt(De,re,le){const xe=De[re+sn],ke=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Ne=De[re+Rn],Xe=Ne===-1?{}:Object.assign({},le[Ne]);return Object.assign(Xe,{cluster:!0,cluster_id:De[re+vt],point_count:xe,point_count_abbreviated:ke})}function fn(De){return De/360+.5}function Bt(De){const re=Math.sin(De*Math.PI/180),le=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return le<0?0:le>1?1:le}function Kt(De){const re=(180-360*De)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function _n(De,re,le,xe){let ke=xe;const Ne=re+(le-re>>1);let Xe,We=le-re;const Ke=De[re],at=De[re+1],ft=De[le],st=De[le+1];for(let zt=re+3;zt<le;zt+=3){const ln=an(De[zt],De[zt+1],Ke,at,ft,st);if(ln>ke)Xe=zt,ke=ln;else if(ln===ke){const xn=Math.abs(zt-Ne);xn<We&&(Xe=zt,We=xn)}}ke>xe&&(Xe-re>3&&_n(De,re,Xe,xe),De[Xe+2]=ke,le-Xe>3&&_n(De,Xe,le,xe))}function an(De,re,le,xe,ke,Ne){let Xe=ke-le,We=Ne-xe;if(Xe!==0||We!==0){const Ke=((De-le)*Xe+(re-xe)*We)/(Xe*Xe+We*We);Ke>1?(le=ke,xe=Ne):Ke>0&&(le+=Xe*Ke,xe+=We*Ke)}return Xe=De-le,We=re-xe,Xe*Xe+We*We}function Ft(De,re,le,xe){const ke={id:De??null,type:re,geometry:le,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(re==="Point"||re==="MultiPoint"||re==="LineString")kn(ke,le);else if(re==="Polygon")kn(ke,le[0]);else if(re==="MultiLineString")for(const Ne of le)kn(ke,Ne);else if(re==="MultiPolygon")for(const Ne of le)kn(ke,Ne[0]);return ke}function kn(De,re){for(let le=0;le<re.length;le+=3)De.minX=Math.min(De.minX,re[le]),De.minY=Math.min(De.minY,re[le+1]),De.maxX=Math.max(De.maxX,re[le]),De.maxY=Math.max(De.maxY,re[le+1])}function Yn(De,re,le,xe){if(!re.geometry)return;const ke=re.geometry.coordinates;if(ke&&ke.length===0)return;const Ne=re.geometry.type,Xe=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let We=[],Ke=re.id;if(le.promoteId?Ke=re.properties[le.promoteId]:le.generateId&&(Ke=xe||0),Ne==="Point")wn(ke,We);else if(Ne==="MultiPoint")for(const at of ke)wn(at,We);else if(Ne==="LineString")Vn(ke,We,Xe,!1);else if(Ne==="MultiLineString"){if(le.lineMetrics){for(const at of ke)We=[],Vn(at,We,Xe,!1),De.push(Ft(Ke,"LineString",We,re.properties));return}ut(ke,We,Xe,!1)}else if(Ne==="Polygon")ut(ke,We,Xe,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(const at of re.geometry.geometries)Yn(De,{id:Ke,geometry:at,properties:re.properties},le,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of ke){const ft=[];ut(at,ft,Xe,!0),We.push(ft)}}De.push(Ft(Ke,Ne,We,re.properties))}function wn(De,re){re.push(gn(De[0]),Rt(De[1]),0)}function Vn(De,re,le,xe){let ke,Ne,Xe=0;for(let Ke=0;Ke<De.length;Ke++){const at=gn(De[Ke][0]),ft=Rt(De[Ke][1]);re.push(at,ft,0),Ke>0&&(Xe+=xe?(ke*ft-at*Ne)/2:Math.sqrt(Math.pow(at-ke,2)+Math.pow(ft-Ne,2))),ke=at,Ne=ft}const We=re.length-3;re[2]=1,_n(re,0,We,le),re[We+2]=1,re.size=Math.abs(Xe),re.start=0,re.end=re.size}function ut(De,re,le,xe){for(let ke=0;ke<De.length;ke++){const Ne=[];Vn(De[ke],Ne,le,xe),re.push(Ne)}}function gn(De){return De/360+.5}function Rt(De){const re=Math.sin(De*Math.PI/180),le=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return le<0?0:le>1?1:le}function Wt(De,re,le,xe,ke,Ne,Xe,We){if(xe/=re,Ne>=(le/=re)&&Xe<xe)return De;if(Xe<le||Ne>=xe)return null;const Ke=[];for(const at of De){const ft=at.geometry;let st=at.type;const zt=ke===0?at.minX:at.minY,ln=ke===0?at.maxX:at.maxY;if(zt>=le&&ln<xe){Ke.push(at);continue}if(ln<le||zt>=xe)continue;let xn=[];if(st==="Point"||st==="MultiPoint")zn(ft,xn,le,xe,ke);else if(st==="LineString")Un(ft,xn,le,xe,ke,!1,We.lineMetrics);else if(st==="MultiLineString")Xn(ft,xn,le,xe,ke,!1);else if(st==="Polygon")Xn(ft,xn,le,xe,ke,!0);else if(st==="MultiPolygon")for(const ir of ft){const er=[];Xn(ir,er,le,xe,ke,!0),er.length&&xn.push(er)}if(xn.length){if(We.lineMetrics&&st==="LineString"){for(const ir of xn)Ke.push(Ft(at.id,st,ir,at.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(xn.length===1?(st="LineString",xn=xn[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=xn.length===3?"Point":"MultiPoint"),Ke.push(Ft(at.id,st,xn,at.tags))}}return Ke.length?Ke:null}function zn(De,re,le,xe,ke){for(let Ne=0;Ne<De.length;Ne+=3){const Xe=De[Ne+ke];Xe>=le&&Xe<=xe&&or(re,De[Ne],De[Ne+1],De[Ne+2])}}function Un(De,re,le,xe,ke,Ne,Xe){let We=mr(De);const Ke=ke===0?En:Fr;let at,ft,st=De.start;for(let er=0;er<De.length-3;er+=3){const tr=De[er],kr=De[er+1],bi=De[er+2],Ir=De[er+3],li=De[er+4],Kr=ke===0?tr:kr,wi=ke===0?Ir:li;let zi=!1;Xe&&(at=Math.sqrt(Math.pow(tr-Ir,2)+Math.pow(kr-li,2))),Kr<le?wi>le&&(ft=Ke(We,tr,kr,Ir,li,le),Xe&&(We.start=st+at*ft)):Kr>xe?wi<xe&&(ft=Ke(We,tr,kr,Ir,li,xe),Xe&&(We.start=st+at*ft)):or(We,tr,kr,bi),wi<le&&Kr>=le&&(ft=Ke(We,tr,kr,Ir,li,le),zi=!0),wi>xe&&Kr<=xe&&(ft=Ke(We,tr,kr,Ir,li,xe),zi=!0),!Ne&&zi&&(Xe&&(We.end=st+at*ft),re.push(We),We=mr(De)),Xe&&(st+=at)}let zt=De.length-3;const ln=De[zt],xn=De[zt+1],ir=ke===0?ln:xn;ir>=le&&ir<=xe&&or(We,ln,xn,De[zt+2]),zt=We.length-3,Ne&&zt>=3&&(We[zt]!==We[0]||We[zt+1]!==We[1])&&or(We,We[0],We[1],We[2]),We.length&&re.push(We)}function mr(De){const re=[];return re.size=De.size,re.start=De.start,re.end=De.end,re}function Xn(De,re,le,xe,ke,Ne){for(const Xe of De)Un(Xe,re,le,xe,ke,Ne,!1)}function or(De,re,le,xe){De.push(re,le,xe)}function En(De,re,le,xe,ke,Ne){const Xe=(Ne-re)/(xe-re);return or(De,Ne,le+(ke-le)*Xe,1),Xe}function Fr(De,re,le,xe,ke,Ne){const Xe=(Ne-le)/(ke-le);return or(De,re+(xe-re)*Xe,Ne,1),Xe}function Er(De,re){const le=[];for(let xe=0;xe<De.length;xe++){const ke=De[xe],Ne=ke.type;let Xe;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Xe=_r(ke.geometry,re);else if(Ne==="MultiLineString"||Ne==="Polygon"){Xe=[];for(const We of ke.geometry)Xe.push(_r(We,re))}else if(Ne==="MultiPolygon"){Xe=[];for(const We of ke.geometry){const Ke=[];for(const at of We)Ke.push(_r(at,re));Xe.push(Ke)}}le.push(Ft(ke.id,Ne,Xe,ke.tags))}return le}function _r(De,re){const le=[];le.size=De.size,De.start!==void 0&&(le.start=De.start,le.end=De.end);for(let xe=0;xe<De.length;xe+=3)le.push(De[xe]+re,De[xe+1],De[xe+2]);return le}function nr(De,re){if(De.transformed)return De;const le=1<<De.z,xe=De.x,ke=De.y;for(const Ne of De.features){const Xe=Ne.geometry,We=Ne.type;if(Ne.geometry=[],We===1)for(let Ke=0;Ke<Xe.length;Ke+=2)Ne.geometry.push(Wr(Xe[Ke],Xe[Ke+1],re,le,xe,ke));else for(let Ke=0;Ke<Xe.length;Ke++){const at=[];for(let ft=0;ft<Xe[Ke].length;ft+=2)at.push(Wr(Xe[Ke][ft],Xe[Ke][ft+1],re,le,xe,ke));Ne.geometry.push(at)}}return De.transformed=!0,De}function Wr(De,re,le,xe,ke,Ne){return[Math.round(le*(De*xe-ke)),Math.round(le*(re*xe-Ne))]}function wr(De,re,le,xe,ke){const Ne=re===ke.maxZoom?0:ke.tolerance/((1<<re)*ke.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:De.length,source:null,x:le,y:xe,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const We of De)Rr(Xe,We,Ne,ke);return Xe}function Rr(De,re,le,xe){const ke=re.geometry,Ne=re.type,Xe=[];if(De.minX=Math.min(De.minX,re.minX),De.minY=Math.min(De.minY,re.minY),De.maxX=Math.max(De.maxX,re.maxX),De.maxY=Math.max(De.maxY,re.maxY),Ne==="Point"||Ne==="MultiPoint")for(let We=0;We<ke.length;We+=3)Xe.push(ke[We],ke[We+1]),De.numPoints++,De.numSimplified++;else if(Ne==="LineString")Di(Xe,ke,De,le,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(let We=0;We<ke.length;We++)Di(Xe,ke[We],De,le,Ne==="Polygon",We===0);else if(Ne==="MultiPolygon")for(let We=0;We<ke.length;We++){const Ke=ke[We];for(let at=0;at<Ke.length;at++)Di(Xe,Ke[at],De,le,!0,at===0)}if(Xe.length){let We=re.tags||null;if(Ne==="LineString"&&xe.lineMetrics){We={};for(const at in re.tags)We[at]=re.tags[at];We.mapbox_clip_start=ke.start/ke.size,We.mapbox_clip_end=ke.end/ke.size}const Ke={geometry:Xe,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:We};re.id!==null&&(Ke.id=re.id),De.features.push(Ke)}}function Di(De,re,le,xe,ke,Ne){const Xe=xe*xe;if(xe>0&&re.size<(ke?Xe:xe))return void(le.numPoints+=re.length/3);const We=[];for(let Ke=0;Ke<re.length;Ke+=3)(xe===0||re[Ke+2]>Xe)&&(le.numSimplified++,We.push(re[Ke],re[Ke+1])),le.numPoints++;ke&&function(Ke,at){let ft=0;for(let st=0,zt=Ke.length,ln=zt-2;st<zt;ln=st,st+=2)ft+=(Ke[st]-Ke[ln])*(Ke[st+1]+Ke[ln+1]);if(ft>0===at)for(let st=0,zt=Ke.length;st<zt/2;st+=2){const ln=Ke[st],xn=Ke[st+1];Ke[st]=Ke[zt-2-st],Ke[st+1]=Ke[zt-1-st],Ke[zt-2-st]=ln,Ke[zt-1-st]=xn}}(We,Ne),De.push(We)}const Wo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ko{constructor(re,le){const xe=(le=this.options=function(Ne,Xe){for(const We in Xe)Ne[We]=Xe[We];return Ne}(Object.create(Wo),le)).debug;if(xe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let ke=function(Ne,Xe){const We=[];if(Ne.type==="FeatureCollection")for(let Ke=0;Ke<Ne.features.length;Ke++)Yn(We,Ne.features[Ke],Xe,Ke);else Yn(We,Ne.type==="Feature"?Ne:{geometry:Ne},Xe);return We}(re,le);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=function(Ne,Xe){const We=Xe.buffer/Xe.extent;let Ke=Ne;const at=Wt(Ne,1,-1-We,We,0,-1,2,Xe),ft=Wt(Ne,1,1-We,2+We,0,-1,2,Xe);return(at||ft)&&(Ke=Wt(Ne,1,-We,1+We,0,-1,2,Xe)||[],at&&(Ke=Er(at,1).concat(Ke)),ft&&(Ke=Ke.concat(Er(ft,-1)))),Ke}(ke,le),ke.length&&this.splitTile(ke,0,0,0),xe&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(re,le,xe,ke,Ne,Xe,We){const Ke=[re,le,xe,ke],at=this.options,ft=at.debug;for(;Ke.length;){ke=Ke.pop(),xe=Ke.pop(),le=Ke.pop(),re=Ke.pop();const st=1<<le,zt=Ro(le,xe,ke);let ln=this.tiles[zt];if(!ln&&(ft>1&&console.time("creation"),ln=this.tiles[zt]=wr(re,le,xe,ke,at),this.tileCoords.push({z:le,x:xe,y:ke}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,xe,ke,ln.numFeatures,ln.numPoints,ln.numSimplified),console.timeEnd("creation"));const zi=`z${le}`;this.stats[zi]=(this.stats[zi]||0)+1,this.total++}if(ln.source=re,Ne==null){if(le===at.indexMaxZoom||ln.numPoints<=at.indexMaxPoints)continue}else{if(le===at.maxZoom||le===Ne)continue;if(Ne!=null){const zi=Ne-le;if(xe!==Xe>>zi||ke!==We>>zi)continue}}if(ln.source=null,re.length===0)continue;ft>1&&console.time("clipping");const xn=.5*at.buffer/at.extent,ir=.5-xn,er=.5+xn,tr=1+xn;let kr=null,bi=null,Ir=null,li=null,Kr=Wt(re,st,xe-xn,xe+er,0,ln.minX,ln.maxX,at),wi=Wt(re,st,xe+ir,xe+tr,0,ln.minX,ln.maxX,at);re=null,Kr&&(kr=Wt(Kr,st,ke-xn,ke+er,1,ln.minY,ln.maxY,at),bi=Wt(Kr,st,ke+ir,ke+tr,1,ln.minY,ln.maxY,at),Kr=null),wi&&(Ir=Wt(wi,st,ke-xn,ke+er,1,ln.minY,ln.maxY,at),li=Wt(wi,st,ke+ir,ke+tr,1,ln.minY,ln.maxY,at),wi=null),ft>1&&console.timeEnd("clipping"),Ke.push(kr||[],le+1,2*xe,2*ke),Ke.push(bi||[],le+1,2*xe,2*ke+1),Ke.push(Ir||[],le+1,2*xe+1,2*ke),Ke.push(li||[],le+1,2*xe+1,2*ke+1)}}getTile(re,le,xe){re=+re,le=+le,xe=+xe;const ke=this.options,{extent:Ne,debug:Xe}=ke;if(re<0||re>24)return null;const We=1<<re,Ke=Ro(re,le=le+We&We-1,xe);if(this.tiles[Ke])return nr(this.tiles[Ke],Ne);Xe>1&&console.log("drilling down to z%d-%d-%d",re,le,xe);let at,ft=re,st=le,zt=xe;for(;!at&&ft>0;)ft--,st>>=1,zt>>=1,at=this.tiles[Ro(ft,st,zt)];return at&&at.source?(Xe>1&&(console.log("found parent tile z%d-%d-%d",ft,st,zt),console.time("drilling down")),this.splitTile(at.source,ft,st,zt,re,le,xe),Xe>1&&console.timeEnd("drilling down"),this.tiles[Ke]?nr(this.tiles[Ke],Ne):null):null}}function Ro(De,re,le){return 32*((1<<De)*le+re)+De}function bl(De,re){const le=De.tileID.canonical;if(!this._geoJSONIndex)return void re(null,null);const xe=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!xe)return void re(null,null);const ke=new se(xe.features);let Ne=yt(ke);Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),re(null,{vectorTile:ke,rawData:Ne.buffer})}class oa extends j{constructor(re,le,xe,ke,Ne,Xe,We){super(re,le,xe,ke,Ne,bl,We),Xe&&(this.loadGeoJSON=Xe),this._dynamicIndex=new _e}loadData(re,le){const xe=re&&re.request,ke=xe&&xe.collectResourceTiming;this.loadGeoJSON(re,(Ne,Xe)=>{if(Ne||!Xe)return le(Ne);if(typeof Xe!="object")return le(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));{try{if(re.filter){const Ke=i.X(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ke.result==="error")throw new Error(Ke.value.map(at=>`${at.key}: ${at.message}`).join(", "));Xe.features=Xe.features.filter(at=>Ke.value.evaluate({zoom:0},at))}re.dynamic?(Xe.type==="Feature"&&(Xe={type:"FeatureCollection",features:[Xe]}),re.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Xe.features,this.loaded),re.cluster&&(Xe.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=re.cluster?new yn(function({superclusterOptions:Ke,clusterProperties:at}){if(!at||!Ke)return Ke;const ft={},st={},zt={accumulated:null,zoom:0},ln={properties:null},xn=Object.keys(at);for(const ir of xn){const[er,tr]=at[ir],kr=i.X(tr),bi=i.X(typeof er=="string"?[er,["accumulated"],["get",ir]]:er);ft[ir]=kr.value,st[ir]=bi.value}return Ke.map=ir=>{ln.properties=ir;const er={};for(const tr of xn)er[tr]=ft[tr].evaluate(zt,ln);return er},Ke.reduce=(ir,er)=>{ln.properties=er;for(const tr of xn)zt.accumulated=ir[tr],ir[tr]=st[tr].evaluate(zt,ln)},Ke}(re)).load(Xe.features):re.dynamic?this._dynamicIndex:function(Ke,at){return new ko(Ke,at)}(Xe,re.geojsonVtOptions)}catch(Ke){return le(Ke)}const We={};if(ke){const Ke=g(xe);Ke&&(We.resourceTiming={},We.resourceTiming[re.source]=JSON.parse(JSON.stringify(Ke)))}le(null,We)}})}reloadTile(re,le){const xe=this.loaded;return xe&&xe[re.uid]?re.partial?le(null,void 0):super.reloadTile(re,le):this.loadTile(re,le)}loadGeoJSON(re,le){if(re.request)i.n(re.request,le);else{if(typeof re.data!="string")return le(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));try{return le(null,JSON.parse(re.data))}catch{return le(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(re,le){try{le(null,this._geoJSONIndex.getClusterExpansionZoom(re.clusterId))}catch(xe){le(xe)}}getClusterChildren(re,le){try{le(null,this._geoJSONIndex.getChildren(re.clusterId))}catch(xe){le(xe)}}getClusterLeaves(re,le){try{le(null,this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset))}catch(xe){le(xe)}}}class dn{constructor(re,le){this.tileID=new i.aM(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.tileZoom=re.tileZoom,this.uid=re.uid,this.zoom=re.zoom,this.canonical=re.tileID.canonical,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=re.projection,this.brightness=le}parse(re,le,xe,ke){this.status="parsing";const Ne=new i.aM(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),Xe=[],We=le.familiesBySource[xe.source],Ke=new i.f0(Ne,xe.promoteId);Ke.bucketLayerIDs=[],Ke.is3DTile=!0,i.fi(re).then(at=>{if(!at)return ke(new Error("Could not parse tile"));const ft=i.fj(at,1/i.cT(xe.tileID.canonical)),st=at.json.extensionsUsed&&at.json.extensionsUsed.includes("MAPBOX_mesh_features")||at.json.asset.extras&&at.json.asset.extras.MAPBOX_mesh_features,zt=at.json.extensionsUsed&&at.json.extensionsUsed.includes("EXT_meshopt_compression"),ln=new i.aa(this.zoom,{brightness:this.brightness});for(const xn in We)for(const ir of We[xn]){const er=ir[0];Ke.bucketLayerIDs.push(ir.map(kr=>i.C(kr.id,kr.scope))),er.recalculate(ln,[]);const tr=new i.fk(ir,ft,Ne,st,zt,this.brightness,Ke);st||(tr.needsUpload=!0),Xe.push(tr),tr.evaluate(er)}this.status="done",ke(null,{buckets:Xe,featureIndex:Ke,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(at=>ke(new Error(at.message)))}}class Hs{constructor(re,le,xe,ke,Ne,Xe,We){this.actor=re,this.layerIndex=le,this.availableImages=xe,this.availableModels=ke,this.brightness=We,this.loading={},this.loaded={}}loadTile(re,le){const xe=re.uid,ke=this.loading[xe]=new dn(re,this.brightness);i.br(re.request,(Ne,Xe)=>{const We=!this.loading[xe];return delete this.loading[xe],We||Ne?(ke.status="done",We||(this.loaded[xe]=ke),le(Ne)):Xe&&Xe.byteLength!==0?void ke.parse(Xe,this.layerIndex,re,(Ke,at)=>{ke.status="done",this.loaded=this.loaded||{},this.loaded[xe]=ke,Ke||!at?le(Ke):le(null,at)}):(ke.status="done",this.loaded[xe]=ke,le())})}reloadTile(re,le){const xe=this.loaded,ke=re.uid;if(xe&&xe[ke]){const Ne=xe[ke];Ne.projection=re.projection,Ne.brightness=re.brightness;const Xe=(We,Ke)=>{Ne.reloadCallback&&(delete Ne.reloadCallback,this.loadTile(re,le)),le(We,Ke)};Ne.status==="parsing"?Ne.reloadCallback=Xe:Ne.status==="done"&&this.loadTile(re,le)}}abortTile(re,le){const xe=re.uid;this.loading[xe]&&delete this.loading[xe],le()}removeTile(re,le){const xe=this.loaded,ke=re.uid;xe&&xe[ke]&&delete xe[ke],le()}}class Pr{constructor(re){this.self=re,this.actor=new i.fm(re,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new i.y,this.projections={},this.defaultProjection=i.ce({name:"mercator"}),this.workerSourceTypes={vector:j,geojson:oa,"raster-dem":V,"raster-array":Z,"batched-model":Hs},this.workerSources={},this.self.registerWorkerSource=(le,xe)=>{if(this.workerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.workerSourceTypes[le]=xe},this.self.registerRTLTextPlugin=le=>{if(i.fn.isParsed())throw new Error("RTL text plugin already registered.");i.fn.applyArabicShaping=le.applyArabicShaping,i.fn.processBidirectionalText=le.processBidirectionalText,i.fn.processStyledBidirectionalText=le.processStyledBidirectionalText}}clearCaches(re,le,xe){delete this.layerIndexes[re],delete this.availableImages[re],delete this.availableModels[re],delete this.workerSources[re],xe()}checkIfReady(re,le,xe){xe()}setReferrer(re,le){this.referrer=le}spriteLoaded(re,le){this.isSpriteLoaded[re]||(this.isSpriteLoaded[re]={});const{scope:xe,isLoaded:ke}=le;if(this.isSpriteLoaded[re][xe]=ke,this.workerSources[re]&&this.workerSources[re][xe])for(const Ne in this.workerSources[re][xe]){const Xe=this.workerSources[re][xe][Ne];for(const We in Xe){const Ke=Xe[We];Ke instanceof j&&(Ke.isSpriteLoaded=ke,Ke.fire(new i.A("isSpriteLoaded")))}}}setImages(re,le,xe){this.availableImages[re]||(this.availableImages[re]={});const{scope:ke,images:Ne}=le;if(this.availableImages[re][ke]=Ne,this.workerSources[re]&&this.workerSources[re][ke]){for(const Xe in this.workerSources[re][ke]){const We=this.workerSources[re][ke][Xe];for(const Ke in We)We[Ke].availableImages=Ne}xe()}else xe()}setModels(re,{scope:le,models:xe},ke){if(this.availableModels[re]||(this.availableModels[re]={}),this.availableModels[re][le]=xe,this.workerSources[re]&&this.workerSources[re][le]){for(const Ne in this.workerSources[re][le]){const Xe=this.workerSources[re][le][Ne];for(const We in Xe)Xe[We].availableModels=xe}ke()}else ke()}setProjection(re,le){this.projections[re]=i.ce(le)}setBrightness(re,le,xe){this.brightness=le,xe()}setLayers(re,le,xe){this.getLayerIndex(re,le.scope).replace(le.layers,le.options),xe()}updateLayers(re,le,xe){this.getLayerIndex(re,le.scope).update(le.layers,le.removedIds,le.options),xe()}loadTile(re,le,xe){le.projection=this.projections[re]||this.defaultProjection,this.getWorkerSource(re,le.type,le.source,le.scope).loadTile(le,xe)}decodeRasterArray(re,le,xe){this.getWorkerSource(re,le.type,le.source,le.scope).decodeRasterArray(le,xe)}reloadTile(re,le,xe){le.projection=this.projections[re]||this.defaultProjection,this.getWorkerSource(re,le.type,le.source,le.scope).reloadTile(le,xe)}abortTile(re,le,xe){this.getWorkerSource(re,le.type,le.source,le.scope).abortTile(le,xe)}removeTile(re,le,xe){this.getWorkerSource(re,le.type,le.source,le.scope).removeTile(le,xe)}removeSource(re,le,xe){if(!(this.workerSources[re]&&this.workerSources[re][le.scope]&&this.workerSources[re][le.scope][le.type]&&this.workerSources[re][le.scope][le.type][le.source]))return;const ke=this.workerSources[re][le.scope][le.type][le.source];delete this.workerSources[re][le.scope][le.type][le.source],ke.removeSource!==void 0?ke.removeSource(le,xe):xe()}loadWorkerSource(re,le,xe){try{this.self.importScripts(le.url),xe()}catch(ke){xe(ke.toString())}}syncRTLPluginState(re,le,xe){try{i.fn.setState(le);const ke=i.fn.getPluginURL();if(i.fn.isLoaded()&&!i.fn.isParsed()&&ke!=null){this.self.importScripts(ke);const Ne=i.fn.isParsed();xe(Ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ke}`),Ne)}}catch(ke){xe(ke.toString())}}setDracoUrl(re,le){this.dracoUrl=le}getAvailableImages(re,le){this.availableImages[re]||(this.availableImages[re]={});let xe=this.availableImages[re][le];return xe||(xe=[]),xe}getAvailableModels(re,le){this.availableModels[re]||(this.availableModels[re]={});let xe=this.availableModels[re][le];return xe||(xe={}),xe}getLayerIndex(re,le){this.layerIndexes[re]||(this.layerIndexes[re]={});let xe=this.layerIndexes[re][le];return xe||(xe=this.layerIndexes[re][le]=new A,xe.scope=le),xe}getWorkerSource(re,le,xe,ke){const Ne=this.workerSources;return Ne[re]||(Ne[re]={}),Ne[re][ke]||(Ne[re][ke]={}),Ne[re][ke][le]||(Ne[re][ke][le]={}),this.isSpriteLoaded[re]||(this.isSpriteLoaded[re]={}),Ne[re][ke][le][xe]||(Ne[re][ke][le][xe]=new this.workerSourceTypes[le]({send:(Xe,We,Ke,at,ft,st)=>this.actor.send(Xe,We,Ke,re,ft,st),scheduler:this.actor.scheduler},this.getLayerIndex(re,ke),this.getAvailableImages(re,ke),this.getAvailableModels(re,ke),this.isSpriteLoaded[re][ke],void 0,this.brightness)),Ne[re][ke][le][xe]}rasterizeImagesWorker(re,le,xe){const ke=new Map;for(const[Ne,{image:Xe,imageVariant:We}]of le.tasks.entries()){const Ke=this.imageRasterizer.rasterize(We,Xe,le.scope,re);ke.set(Ne,Ke)}xe(void 0,ke)}removeRasterizedImages(re,le,xe){this.imageRasterizer.removeImagesFromCacheByIds(le.imageIds,le.scope,re),xe()}enforceCacheSizeLimit(re,le){i.fo(le)}getWorkerPerformanceMetrics(re,le,xe){xe(void 0,void 0)}}return i.fl(self)&&(self.worker=new Pr(self)),Pr}),c(["./shared"],function(i){var g="3.12.0";const w={create:"create",load:"load",fullLoad:"fullLoad"},T={mark(y){performance.mark(y)},measure(y,a,d){performance.measure(y,a,d)}};function A(y){const a=y.name.split("?")[0];return i.a(a)&&a.includes("mapbox-gl.js")?"javascript":i.a(a)&&a.includes("mapbox-gl.css")?"css":i.b(a)?"fontRange":i.c(a)?"sprite":i.i(a)?"style":i.d(a)?"tilejson":"other"}var D,k={},I=function(){if(D)return k;function y(v){return!a(v)}function a(v){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,R,O=new Blob([""],{type:"text/javascript"}),B=URL.createObjectURL(O);try{R=new Worker(B),E=!0}catch{E=!1}return R&&R.terminate(),URL.revokeObjectURL(B),E}()?function(){var E=document.createElement("canvas");E.width=E.height=1;var R=E.getContext("2d");if(!R)return!1;var O=R.getImageData(0,0,1,1);return O&&O.width===E.width}()?(d[S=v&&v.failIfMajorPerformanceCaveat]===void 0&&(d[S]=function(E){var R,O=function(B){var H=document.createElement("canvas"),Y=Object.create(y.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=B,H.getContext("webgl2",Y)}(E);if(!O)return!1;try{R=O.createShader(O.VERTEX_SHADER)}catch{return!1}return!(!R||O.isContextLost())&&(O.shaderSource(R,"void main() {}"),O.compileShader(R),O.getShaderParameter(R,O.COMPILE_STATUS)===!0)}(S)),d[S]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var S}D=1,k.supported=y,k.notSupportedReason=a;var d={};return y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},k}();function F(y,a,d){const v=document.createElement(y);return a!=null&&(v.className=a),d&&d.appendChild(v),v}function j(y,a,d){const v=document.createElementNS("http://www.w3.org/2000/svg",y);for(const S of Object.keys(a))v.setAttributeNS(null,S,String(a[S]));return d&&d.appendChild(v),v}const V=typeof document<"u"?document.documentElement&&document.documentElement.style:null,W=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Z;function K(){V&&W&&(Z=V[W],V[W]="none")}function ee(){V&&W&&(V[W]=Z)}function se(y){y.preventDefault(),y.stopPropagation(),window.removeEventListener("click",se,!0)}function he(){window.addEventListener("click",se,!0),window.setTimeout(()=>{window.removeEventListener("click",se,!0)},0)}function ye(y,a){const d=y.getBoundingClientRect();return be(y,d,a)}function _e(y,a){const d=y.getBoundingClientRect(),v=[];for(let S=0;S<a.length;S++)v.push(be(y,d,a[S]));return v}function ae(y){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&y.button===2&&y.ctrlKey?0:y.button}function be(y,a,d){const v=y.offsetWidth===a.width?1:y.offsetWidth/a.width;return new i.P((d.clientX-a.left)*v,(d.clientY-a.top)*v)}const Te="01",Ae="NO_ACCESS_TOKEN";class Re{constructor(a,d,v){this._transformRequestFn=a,this._customAccessToken=d,this._silenceAuthErrors=!!v,this._createSkuToken()}_createSkuToken(){const a=function(){let d="";for(let v=0;v<10;v++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Te,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}normalizeStyleURL(a,d){if(!i.f(a))return a;const v=Se(a);return v.params.push(`sdk=js-${g}`),v.path=`/styles/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeGlyphsURL(a,d){if(!i.f(a))return a;const v=Se(a);return v.path=`/fonts/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeModelURL(a,d){if(!i.f(a))return a;const v=Se(a);return v.path=`/models/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||d)}normalizeSourceURL(a,d,v,S){if(!i.f(a))return a;const E=Se(a);return E.path=`/v4/${E.authority}.json`,E.params.push("secure"),v&&E.params.push(`language=${v}`),S&&E.params.push(`worldview=${S}`),this._makeAPIURL(E,this._customAccessToken||d)}normalizeIconsetURL(a,d){const v=Se(a);return i.f(a)?(v.path=`/styles/v1${v.path}/iconset.pbf`,this._makeAPIURL(v,this._customAccessToken||d)):qe(v)}normalizeSpriteURL(a,d,v,S){const E=Se(a);return i.f(a)?(E.path=`/styles/v1${E.path}/sprite${d}${v}`,this._makeAPIURL(E,this._customAccessToken||S)):(E.path+=`${d}${v}`,qe(E))}normalizeTileURL(a,d,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!i.f(a))return a;const S=Se(a);S.path=S.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||v&&S.authority!=="raster"&&v===512?"@2x":""}${i.m.supported?".webp":"$1"}`),S.authority==="raster"?S.path=`/${i.e.RASTER_URL_PREFIX}${S.path}`:S.authority==="rasterarrays"?S.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${S.path}`:S.authority==="3dtiles"?S.path=`/${i.e.TILES3D_URL_PREFIX}${S.path}`:(S.path=S.path.replace(/^.+\/v4\//,"/"),S.path=`/${i.e.TILE_URL_VERSION}${S.path}`);const E=this._customAccessToken||function(R){for(const O of R){const B=O.match(/^access_token=(.*)$/);if(B)return B[1]}return null}(S.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&S.params.push(`sku=${this._skuToken}`),this._makeAPIURL(S,E)}canonicalizeTileURL(a,d){const v=Se(a);if(!v.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!v.path.match(/\.[\w]+$/))return a;let S="mapbox://";v.path.match(/^\/raster\/v1\//)?S+=`raster/${v.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:v.path.match(/^\/rasterarrays\/v1\//)?S+=`rasterarrays/${v.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:S+=`tiles/${v.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let E=v.params;return d&&(E=E.filter(R=>!R.match(/^access_token=/))),E.length&&(S+=`?${E.join("&")}`),S}canonicalizeTileset(a,d){const v=!!d&&i.f(d),S=[];for(const E of a.tiles||[])i.h(E)?S.push(this.canonicalizeTileURL(E,v)):S.push(E);return S}_makeAPIURL(a,d){const v="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",S=Se(i.e.API_URL);if(a.protocol=S.protocol,a.authority=S.authority,a.protocol==="http"){const E=a.params.indexOf("secure");E>=0&&a.params.splice(E,1)}if(S.path!=="/"&&(a.path=`${S.path}${a.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return qe(a);if(d=d||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${v}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${v}`)}return a.params=a.params.filter(E=>E.indexOf("access_token")===-1),a.params.push(`access_token=${d||""}`),qe(a)}}const He=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Se(y){const a=y.match(He);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function qe(y){const a=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${a}`}const it="mapbox.eventData";function tt(y){if(!y)return null;const a=y.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(i.j(a[1]))}catch{return null}}class Oe{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const d=tt(i.e.ACCESS_TOKEN);let v="";return v=d&&d.u?i.k(d.u):i.e.ACCESS_TOKEN||"",a?`${it}.${a}:${v}`:`${it}:${v}`}fetchEventData(){const a=i.s("localStorage"),d=this.getStorageKey(),v=this.getStorageKey("uuid");if(a)try{const S=localStorage.getItem(d);S&&(this.eventData=JSON.parse(S));const E=localStorage.getItem(v);E&&(this.anonId=E)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const a=i.s("localStorage"),d=this.getStorageKey(),v=this.getStorageKey("uuid"),S=this.anonId;if(a&&S)try{localStorage.setItem(v,S),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,d,v,S){if(!i.e.EVENTS_URL)return;const E=Se(i.e.EVENTS_URL);E.params.push(`access_token=${S||i.e.ACCESS_TOKEN||""}`);const R={event:this.type,created:new Date(a).toISOString()},O=d?i.l(R,d):R,B={url:qe(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([O])};this.pendingRequest=i.p(B,H=>{this.pendingRequest=null,v(H),this.saveEventData(),this.processRequests(S)})}queueRequest(a,d){this.queue.push(a),this.processRequests(d)}}const Je=new class extends Oe{constructor(y){super("appUserTurnstile"),this._customAccessToken=y}postTurnstileEvent(y,a){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(y)&&y.some(d=>i.f(d)||i.h(d))&&this.queueRequest(Date.now(),a)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=tt(i.e.ACCESS_TOKEN),d=a?a.u:i.e.ACCESS_TOKEN;let v=d!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),v=!0);const S=this.queue.shift();if(this.eventData.lastSuccess){const E=new Date(this.eventData.lastSuccess),R=new Date(S),O=(S-this.eventData.lastSuccess)/864e5;v=v||O>=1||O<-1||E.getDate()!==R.getDate()}else v=!0;v?this.postEvent(S,{sdkIdentifier:"mapbox-gl-js",sdkVersion:g,skuId:Te,"enabled.telemetry":!1,userId:this.anonId},E=>{E||(this.eventData.lastSuccess=S,this.eventData.tokenU=d)},y):this.processRequests()}},yt=Je.postTurnstileEvent.bind(Je),wt=new class extends Oe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(y,a,d,v){this.skuToken=a,this.errorCb=v,i.e.EVENTS_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(Ae)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:d}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:g,skuId:Te,skuToken:this.skuToken,userId:this.anonId},v=>{v?this.errorCb(v):a&&(this.success[a]=!0)},y))}remove(){this.errorCb=null}},$t=wt.postMapLoadEvent.bind(wt),It=new class extends Oe{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(y){let a=this.mapInstanceIdMap.get(y);return a||(a=i.u(),this.mapInstanceIdMap.set(y,a)),a}getEventId(y){const a=this.eventIdPerMapInstanceMap.get(y)||0;return this.eventIdPerMapInstanceMap.set(y,a+1),a}postStyleLoadEvent(y,a){const{map:d,style:v,importedStyles:S}=a;if(!i.e.EVENTS_URL||!y&&!i.e.ACCESS_TOKEN)return;const E=this.getMapInstanceId(d),R={mapInstanceId:E,eventId:this.getEventId(E),style:v};S.length&&(R.importedStyles=S),this.queueRequest({timestamp:Date.now(),payload:R},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,payload:d}=this.queue.shift();this.postEvent(a,d,()=>{},y)}},vt=It.postStyleLoadEvent.bind(It),sn=new class extends Oe{constructor(){super("gljs.performance")}postPerformanceEvent(y,a){i.e.EVENTS_URL&&(y||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:d}=this.queue.shift(),v=function(S){const E=performance.getEntriesByType("resource"),R=performance.getEntriesByType("mark"),O=function(ie){const pe={};if(ie){for(const de in ie)if(de!=="other")for(const ge of ie[de]){const fe=`${de}ResolveRangeMin`,Ee=`${de}ResolveRangeMax`,Le=`${de}RequestCount`,je=`${de}RequestCachedCount`;pe[fe]=Math.min(pe[fe]||1/0,ge.startTime),pe[Ee]=Math.max(pe[Ee]||-1/0,ge.responseEnd);const Ye=$e=>{pe[$e]===void 0&&(pe[$e]=0),++pe[$e]};ge.transferSize!==void 0&&ge.transferSize===0&&Ye(je),Ye(Le)}}return pe}(function(ie,pe){const de={};if(ie)for(const ge of ie){const fe=pe(ge);de[fe]===void 0&&(de[fe]=[]),de[fe].push(ge)}return de}(E,A)),B=window.devicePixelRatio,H=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Y=H?H.effectiveType:void 0,J={counters:[],metadata:[],attributes:[]},Q=(ie,pe,de)=>{de!=null&&ie.push({name:pe,value:de.toString()})};for(const ie in O)Q(J.counters,ie,O[ie]);if(S.interactionRange[0]!==1/0&&S.interactionRange[1]!==-1/0&&(Q(J.counters,"interactionRangeMin",S.interactionRange[0]),Q(J.counters,"interactionRangeMax",S.interactionRange[1])),R)for(const ie of Object.keys(w)){const pe=w[ie],de=R.find(ge=>ge.name===pe);de&&Q(J.counters,pe,de.startTime)}return Q(J.counters,"visibilityHidden",S.visibilityHidden),Q(J.attributes,"style",function(ie){if(ie)for(const pe of ie){const de=pe.name.split("?")[0];if(i.i(de)){const ge=de.split("/").slice(-2);if(ge.length===2)return`mapbox://styles/${ge[0]}/${ge[1]}`}}}(E)),Q(J.attributes,"terrainEnabled",S.terrainEnabled?"true":"false"),Q(J.attributes,"fogEnabled",S.fogEnabled?"true":"false"),Q(J.attributes,"projection",S.projection),Q(J.attributes,"zoom",S.zoom),Q(J.metadata,"devicePixelRatio",B),Q(J.metadata,"connectionEffectiveType",Y),Q(J.metadata,"navigatorUserAgent",navigator.userAgent),Q(J.metadata,"screenWidth",window.screen.width),Q(J.metadata,"screenHeight",window.screen.height),Q(J.metadata,"windowWidth",window.innerWidth),Q(J.metadata,"windowHeight",window.innerHeight),Q(J.metadata,"mapWidth",S.width/B),Q(J.metadata,"mapHeight",S.height/B),Q(J.metadata,"webglRenderer",S.renderer),Q(J.metadata,"webglVendor",S.vendor),Q(J.metadata,"sdkVersion",g),Q(J.metadata,"sdkIdentifier","mapbox-gl-js"),J}(d);for(const S of v.metadata);for(const S of v.counters);for(const S of v.attributes);this.postEvent(a,v,()=>{},y)}},Rn=sn.postPerformanceEvent.bind(sn),yn=new class extends Oe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(y,a,d,v){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const S=Se(i.e.API_URL+i.e.SESSION_PATH);S.params.push(`sku=${a||""}`),S.params.push(`access_token=${v||i.e.ACCESS_TOKEN||""}`);const E={url:qe(S),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(E,R=>{this.pendingRequest=null,d(R),this.saveEventData(),this.processRequests(v)})}getSessionAPI(y,a,d,v){this.skuToken=a,this.errorCb=v,i.e.SESSION_PATH&&i.e.API_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},d):this.errorCb(new Error(Ae)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:d}=this.queue.shift();a&&this.success[a]||this.getSession(d,this.skuToken,v=>{v?this.errorCb(v):a&&(this.success[a]=!0)},y)}remove(){this.errorCb=null}},Qt=yn.getSessionAPI.bind(yn),Jt=new Set;function fn(y,a){a?Jt.add(y):Jt.delete(y)}class Bt{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(a,d){this._updatedSourceCaches[a]=d,this.setDirty()}discardSourceCacheUpdate(a){delete this._updatedSourceCaches[a]}updateLayer(a){const d=a.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(a.id),this.setDirty()}removeLayer(a){const d=a.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][a.id]=a,this._updatedLayers[d].delete(a.id),this._updatedPaintProps.delete(a.fqid),this.setDirty()}getRemovedLayer(a){return this._removedLayers[a.scope]?this._removedLayers[a.scope][a.id]:null}discardLayerRemoval(a){this._removedLayers[a.scope]&&delete this._removedLayers[a.scope][a.id]}getLayerUpdatesByScope(){const a={};for(const d in this._updatedLayers)a[d]=a[d]||{},a[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)a[d]=a[d]||{},a[d].removedIds=Object.keys(this._removedLayers[d]);return a}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(a){this._updatedPaintProps.add(a.fqid),this.setDirty()}getUpdatedImages(a){return this._updatedImages[a]?Array.from(this._updatedImages[a].values()):[]}updateImage(a,d){this._updatedImages[d]=this._updatedImages[d]||new Set,this._updatedImages[d].add(i.I.toString(a)),this.setDirty()}resetUpdatedImages(a){this._updatedImages[a]&&this._updatedImages[a].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function Kt(y){const{userImage:a}=y;return!!(a&&a.render&&a.render())&&(y.data.replace(new Uint8Array(a.data.buffer)),!0)}class _n extends i.E{constructor(a){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=a,a!=="raster"&&i.t()&&(this.imageRasterizerDispatcher=new i.D(i.x(),this,"Image Rasterizer Worker",1))}addScope(a){this.loaded.set(a,!1),this.imageProviders.set(a,new Map),this.images.set(a,new Map),this.updatedImages.set(a,new Set),this.callbackDispatchedThisFrame.set(a,new Set),this.patterns.set(a,new Map),this.atlasImage.set(a,new i.r({width:1,height:1}))}removeScope(a){this.loaded.delete(a),this.imageProviders.delete(a),this.images.delete(a),this.updatedImages.delete(a),this.callbackDispatchedThisFrame.delete(a),this.patterns.delete(a),this.atlasImage.delete(a);const d=this.atlasTexture.get(a);d&&(d.destroy(),this.atlasTexture.delete(a))}addImageProvider(a,d){this.imageProviders.has(d)||this.imageProviders.set(d,new Map),this.imageProviders.get(d).set(a.id,a)}removeImageProvider(a,d){this.imageProviders.has(d)&&this.imageProviders.get(d).delete(a)}getPendingImageProviders(){const a=[];for(const d of this.imageProviders.values())for(const v of d.values())v.hasPendingRequests()&&a.push(v);return a}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new i.y),this._imageRasterizer}isLoaded(){for(const a of this.loaded.keys())if(!this.loaded.get(a))return!1;return!0}setLoaded(a,d){if(this.loaded.get(d)!==a&&(this.loaded.set(d,a),a)){for(const{ids:v,callback:S}of this.requestors)this._notify(v,d,S);this.requestors=[]}}hasImage(a,d){return!!this.getImage(a,d)}getImage(a,d){return this.images.get(d).get(a.toString())}addImage(a,d,v){this._validate(a,v)&&this.images.get(d).set(a.toString(),v)}_validate(a,d){let v=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new i.z(new Error(`Image "${a.name}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new i.z(new Error(`Image "${a.name}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new i.z(new Error(`Image "${a.name}" has invalid "content" value`))),v=!1),v}_validateStretch(a,d){if(!a)return!0;let v=0;for(const S of a){if(S[0]<v||S[1]<S[0]||d<S[1])return!1;v=S[1]}return!0}_validateContent(a,d){return a?a.length!==4||!d.usvg&&(a[0]<0||d.data.width<a[0]||a[1]<0||d.data.height<a[1]||a[2]<0||d.data.width<a[2]||a[3]<0||d.data.height<a[3])?!1:!(a[2]<a[0]||a[3]<a[1]):!0}updateImage(a,d,v){const S=this.images.get(d).get(a.toString());v.version=S.version+1,this.images.get(d).set(a.toString(),v),this.updatedImages.get(d).add(a),this.removeFromImageRasterizerCache(a,d)}clearUpdatedImages(a){this.updatedImages.get(a).clear()}removeFromImageRasterizerCache(a,d){this.spriteFormat!=="raster"&&(i.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[a],scope:d}):this.imageRasterizer.removeImagesFromCacheByIds([a],d))}removeImage(a,d){const v=this.images.get(d),S=v.get(a.toString());v.delete(a.toString()),this.patterns.get(d).delete(a.toString()),this.removeFromImageRasterizerCache(a,d),S.userImage&&S.userImage.onRemove&&S.userImage.onRemove()}listImages(a){return Array.from(this.images.get(a).keys()).map(d=>i.I.from(d))}getImages(a,d,v){const S=[],E=[],R=this.imageProviders.get(d);for(const Y of a){if(!Y.iconsetId){S.push(Y);continue}const J=R.get(Y.iconsetId);J&&(this.getImage(Y,d)?E.push(Y):J.addPendingRequest(Y))}if(S.length===0)return void this._notify(E,d,v);let O=!0;const B=!!this.loaded.get(d),H=this.images.get(d);if(!B)for(const Y of S)H.has(Y.toString())||(O=!1);B||O?this._notify(S,d,v):this.requestors.push({ids:S,scope:d,callback:v})}rasterizeImages(a,d){const v=new Map,{tasks:S,scope:E}=a;for(const[R,O]of S.entries()){const B=this.getImage(O.id,E);B&&v.set(R,{image:B,imageVariant:O})}this._rasterizeImages(E,v,d)}_rasterizeImages(a,d,v){if(i.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:d,scope:a},v);else{const S=new Map;for(const[E,{image:R,imageVariant:O}]of d.entries())S.set(E,this.imageRasterizer.rasterize(O,R,a,0));v(void 0,S)}}getUpdatedImages(a){return this.updatedImages.get(a)||new Set}_notify(a,d,v){const S=this.images.get(d),E=new Map;for(const R of a){if(!S.get(R.toString())){if(R.iconsetId)continue;this.fire(new i.A("styleimagemissing",{id:R.name}))}const O=S.get(R.toString());if(!O){i.w(`Image "${R.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const B={data:O.usvg?null:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,usvg:O.usvg,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,hasRenderCallback:!!(O.userImage&&O.userImage.render)};O.usvg&&Object.assign(B,{width:O.icon.usvg_tree.width,height:O.icon.usvg_tree.height}),E.set(i.I.toString(R),B)}v(null,E)}getPixelSize(a){const{width:d,height:v}=this.atlasImage.get(a);return{width:d,height:v}}getPattern(a,d,v){const S=a.toString(),E=this.patterns.get(d),R=E.get(S),O=this.getImage(a,d);if(!O)return null;if(R){if(R.position.version===O.version)return R.position;R.position.version=O.version}else{if(O.usvg&&!O.data){const B=this.getPatternInFlightId(S,d);if(this.patternsInFlight.has(B))return null;this.patternsInFlight.add(B);const H=new i.B(a).scaleSelf(i.q.devicePixelRatio),Y=new Map([[H.toString(),{image:O,imageVariant:H}]]);return this._rasterizeImages(d,Y,(J,Q)=>this.storePatternImage(H,d,O,v,Q)),null}this.storePattern(a,d,O)}return this._updatePatternAtlas(d,v),E.get(S).position}getPatternInFlightId(a,d){return i.C(a,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(a,d,v,S,E){const R=a.toString(),O=E?E.get(R):void 0;O&&(v.data=O,this.storePattern(a.id,d,v),this._updatePatternAtlas(d,S),this.patternsInFlight.delete(this.getPatternInFlightId(a.id.toString(),d)))}storePattern(a,d,v){const S={w:v.data.width+2*i.F,h:v.data.height+2*i.F,x:0,y:0},E=new i.G(S,v,i.F);this.patterns.get(d).set(a.toString(),{bin:S,position:E})}bind(a,d){const v=a.gl;let S=this.atlasTexture.get(d);S?this.dirty&&(S.update(this.atlasImage.get(d)),this.dirty=!1):(S=new i.T(a,this.atlasImage.get(d),v.RGBA8),this.atlasTexture.set(d,S)),S.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(a,d){const v=this.patterns.get(a),S=Array.from(v.values()).map(({bin:H})=>H),{w:E,h:R}=i.H(S),O=this.atlasImage.get(a);O.resize({width:E||1,height:R||1});const B=this.images.get(a);for(const[H,{bin:Y,position:J}]of v.entries()){let Q=J.padding;const ie=Y.x+Q,pe=Y.y+Q,de=B.get(H).data,ge=de.width,fe=de.height;Q=Q>1?Q-1:Q,i.r.copy(de,O,{x:0,y:0},{x:ie,y:pe},{width:ge,height:fe},d),i.r.copy(de,O,{x:0,y:fe-Q},{x:ie,y:pe-Q},{width:ge,height:Q},d),i.r.copy(de,O,{x:0,y:0},{x:ie,y:pe+fe},{width:ge,height:Q},d),i.r.copy(de,O,{x:ge-Q,y:0},{x:ie-Q,y:pe},{width:Q,height:fe},d),i.r.copy(de,O,{x:0,y:0},{x:ie+ge,y:pe},{width:Q,height:fe},d),i.r.copy(de,O,{x:ge-Q,y:fe-Q},{x:ie-Q,y:pe-Q},{width:Q,height:Q},d),i.r.copy(de,O,{x:0,y:fe-Q},{x:ie+ge,y:pe-Q},{width:Q,height:Q},d),i.r.copy(de,O,{x:0,y:0},{x:ie+ge,y:pe+fe},{width:Q,height:Q},d),i.r.copy(de,O,{x:ge-Q,y:0},{x:ie-Q,y:pe+fe},{width:Q,height:Q},d)}this.dirty=!0}beginFrame(){for(const a of this.images.keys())this.callbackDispatchedThisFrame.set(a,new Set)}dispatchRenderCallbacks(a,d){const v=this.images.get(d);for(const S of a){if(this.callbackDispatchedThisFrame.get(d).has(S.toString()))continue;this.callbackDispatchedThisFrame.get(d).add(S.toString());const E=v.get(S.toString());Kt(E)&&this.updateImage(S,d,E)}}}function an(y){const a=y.key,d=y.value,v=y.valueSpec||{},S=y.objectElementValidators||{},E=y.style,R=y.styleSpec;let O=[];const B=i.K(d);if(B!=="object")return[new i.V(a,d,`object expected, ${B} found`)];for(const H in d){const Y=H.split(".")[0];let J;S[Y]?J=S[Y]:v[Y]?J=Rr:S["*"]?J=S["*"]:v["*"]&&(J=Rr),J?O=O.concat(J({key:(a&&`${a}.`)+H,value:d[H],valueSpec:v[Y]||v["*"],style:E,styleSpec:R,object:d,objectKey:H},d)):O.push(new i.J(a,d[H],`unknown property "${H}"`))}for(const H in v)S[H]||v[H].required&&v[H].default===void 0&&d[H]===void 0&&O.push(new i.V(a,d,`missing required property "${H}"`));return O}function Ft(y){const a=y.value,d=y.valueSpec,v=y.style,S=y.styleSpec,E=y.key,R=y.arrayElementValidator||Rr;if(i.K(a)!=="array")return[new i.V(E,a,`array expected, ${i.K(a)} found`)];if(d.length&&a.length!==d.length)return[new i.V(E,a,`array length ${d.length} expected, length ${a.length} found`)];if(d["min-length"]&&a.length<d["min-length"])return[new i.V(E,a,`array length at least ${d["min-length"]} expected, length ${a.length} found`)];let O={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};S.$version<7&&(O.function=d.function),i.K(d.value)==="object"&&(O=d.value);let B=[];for(let H=0;H<a.length;H++)B=B.concat(R({array:a,arrayIndex:H,value:a[H],valueSpec:O,style:v,styleSpec:S,key:`${E}[${H}]`},!0));return B}function kn(y){const a=y.key,d=y.value,v=y.valueSpec;let S=i.K(d);if(S==="number"&&d!=d&&(S="NaN"),S!=="number")return[new i.V(a,d,`number expected, ${S} found`)];if("minimum"in v){let E=v.minimum;if(i.K(v.minimum)==="array"&&(E=v.minimum[y.arrayIndex]),d<E)return[new i.V(a,d,`${d} is less than the minimum value ${E}`)]}if("maximum"in v){let E=v.maximum;if(i.K(v.maximum)==="array"&&(E=v.maximum[y.arrayIndex]),d>E)return[new i.V(a,d,`${d} is greater than the maximum value ${E}`)]}return[]}function Yn(y){const a=y.valueSpec,d=i.M(y.value.type);let v,S,E,R={};const O=d!=="categorical"&&y.value.property===void 0,B=!O,H=i.K(y.value.stops)==="array"&&i.K(y.value.stops[0])==="array"&&i.K(y.value.stops[0][0])==="object",Y=an({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(ie){if(d==="identity")return[new i.V(ie.key,ie.value,'identity function may not have a "stops" property')];let pe=[];const de=ie.value;return pe=pe.concat(Ft({key:ie.key,value:de,valueSpec:ie.valueSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:J})),i.K(de)==="array"&&de.length===0&&pe.push(new i.V(ie.key,de,"array must have at least one stop")),pe},default:function(ie){return Rr({key:ie.key,value:ie.value,valueSpec:a,style:ie.style,styleSpec:ie.styleSpec})}}});return d==="identity"&&O&&Y.push(new i.V(y.key,y.value,'missing required property "property"')),d==="identity"||y.value.stops||Y.push(new i.V(y.key,y.value,'missing required property "stops"')),d==="exponential"&&y.valueSpec.expression&&!i.N(y.valueSpec)&&Y.push(new i.V(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(B&&!i.O(y.valueSpec)?Y.push(new i.V(y.key,y.value,"property functions not supported")):O&&!i.Q(y.valueSpec)&&Y.push(new i.V(y.key,y.value,"zoom functions not supported"))),d!=="categorical"&&!H||y.value.property!==void 0||Y.push(new i.V(y.key,y.value,'"property" property is required')),Y;function J(ie){let pe=[];const de=ie.value,ge=ie.key;if(i.K(de)!=="array")return[new i.V(ge,de,`array expected, ${i.K(de)} found`)];if(de.length!==2)return[new i.V(ge,de,`array length 2 expected, length ${de.length} found`)];if(H){if(i.K(de[0])!=="object")return[new i.V(ge,de,`object expected, ${i.K(de[0])} found`)];if(de[0].zoom===void 0)return[new i.V(ge,de,"object stop key must have zoom")];if(de[0].value===void 0)return[new i.V(ge,de,"object stop key must have value")];const fe=i.M(de[0].zoom);if(typeof fe!="number")return[new i.V(ge,de[0].zoom,"stop zoom values must be numbers")];if(E&&E>fe)return[new i.V(ge,de[0].zoom,"stop zoom values must appear in ascending order")];fe!==E&&(E=fe,S=void 0,R={}),pe=pe.concat(an({key:`${ge}[0]`,value:de[0],valueSpec:{zoom:{}},style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:kn,value:Q}}))}else pe=pe.concat(Q({key:`${ge}[0]`,value:de[0],style:ie.style,styleSpec:ie.styleSpec},de));return i.S(i.U(de[1]))?pe.concat([new i.V(`${ge}[1]`,de[1],"expressions are not allowed in function stops.")]):pe.concat(Rr({key:`${ge}[1]`,value:de[1],valueSpec:a,style:ie.style,styleSpec:ie.styleSpec}))}function Q(ie,pe){const de=i.K(ie.value),ge=i.M(ie.value),fe=ie.value!==null?ie.value:pe;if(v){if(de!==v)return[new i.V(ie.key,fe,`${de} stop domain type must match previous stop domain type ${v}`)]}else v=de;if(de!=="number"&&de!=="string"&&de!=="boolean"&&typeof ge!="number"&&typeof ge!="string"&&typeof ge!="boolean")return[new i.V(ie.key,fe,"stop domain value must be a number, string, or boolean")];if(de!=="number"&&d!=="categorical"){let Ee=`number expected, ${de} found`;return i.O(a)&&d===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(ie.key,fe,Ee)]}return d!=="categorical"||de!=="number"||typeof ge=="number"&&isFinite(ge)&&Math.floor(ge)===ge?d!=="categorical"&&de==="number"&&typeof ge=="number"&&typeof S=="number"&&S!==void 0&&ge<S?[new i.V(ie.key,fe,"stop domain values must appear in ascending order")]:(S=ge,d==="categorical"&&ge in R?[new i.V(ie.key,fe,"stop domain values must be unique")]:(R[ge]=!0,[])):[new i.V(ie.key,fe,`integer expected, found ${String(ge)}`)]}}function wn(y){const a=(y.expressionContext==="property"?i.W:i.X)(i.U(y.value),y.valueSpec);if(a.result==="error")return a.value.map(v=>new i.V(`${y.key}${v.key}`,y.value,v.message));const d=a.value.expression||a.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!d.outputDefined())return[new i.V(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!i.Y(d))return[new i.V(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter")return Vn(d,y);if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!i.Z(d,["zoom","feature-state"]))return[new i.V(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!i._(d))return[new i.V(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Vn(y,a){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const S of a.valueSpec.expression.parameters)d.delete(S);if(d.size===0)return[];const v=[];return y instanceof i.$&&d.has(y.name)?[new i.V(a.key,a.value,`["${y.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(y.eachChild(S=>{v.push(...Vn(S,a))}),v)}function ut(y){const a=y.key,d=y.value,v=y.valueSpec,S=[];return Array.isArray(v.values)?v.values.indexOf(i.M(d))===-1&&S.push(new i.V(a,d,`expected one of [${v.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(v.values).indexOf(i.M(d))===-1&&S.push(new i.V(a,d,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(d)} found`)),S}function gn(y){return i.a1(i.U(y.value))?wn(i.L({},y,{expressionContext:"filter",valueSpec:y.styleSpec[`filter_${y.layerType||"fill"}`]})):Rt(y)}function Rt(y){const a=y.value,d=y.key;if(i.K(a)!=="array")return[new i.V(d,a,`array expected, ${i.K(a)} found`)];const v=y.styleSpec;let S,E=[];if(a.length<1)return[new i.V(d,a,"filter array must have at least 1 element")];switch(E=E.concat(ut({key:`${d}[0]`,value:a[0],valueSpec:v.filter_operator,style:y.style,styleSpec:y.styleSpec})),i.M(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&i.M(a[1])==="$type"&&E.push(new i.V(d,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&E.push(new i.V(d,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(S=i.K(a[1]),S!=="string"&&E.push(new i.V(`${d}[1]`,a[1],`string expected, ${S} found`)));for(let R=2;R<a.length;R++)S=i.K(a[R]),i.M(a[1])==="$type"?E=E.concat(ut({key:`${d}[${R}]`,value:a[R],valueSpec:v.geometry_type,style:y.style,styleSpec:y.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&E.push(new i.V(`${d}[${R}]`,a[R],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let R=1;R<a.length;R++)E=E.concat(Rt({key:`${d}[${R}]`,value:a[R],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":S=i.K(a[1]),a.length!==2?E.push(new i.V(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):S!=="string"&&E.push(new i.V(`${d}[1]`,a[1],`string expected, ${S} found`))}return E}function Wt(y,a){const d=y.key,v=y.style,S=y.layer,E=y.styleSpec,R=y.value,O=y.objectKey,B=E[`${a}_${y.layerType}`];if(!B)return[];const H=O.match(/^(.*)-use-theme$/);if(a==="paint"&&H&&B[H[1]])return i.S(R)?[].concat(Rr({key:y.key,value:R,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:v,styleSpec:E,expressionContext:"property",propertyType:a,propertyKey:O})):Rr({key:d,value:R,valueSpec:{type:"string"},style:v,styleSpec:E});const Y=O.match(/^(.*)-transition$/);if(a==="paint"&&Y&&B[Y[1]]&&B[Y[1]].transition)return Rr({key:d,value:R,valueSpec:E.transition,style:v,styleSpec:E});const J=y.valueSpec||B[O];if(!J)return[new i.J(d,R,`unknown property "${O}"`)];let Q;if(i.K(R)==="string"&&i.O(J)&&!J.tokens&&(Q=/^{([^}]+)}$/.exec(R))){const pe=`\`{ "type": "identity", "property": ${Q?JSON.stringify(Q[1]):'"_"'} }\``;return[new i.V(d,R,`"${O}" does not support interpolation syntax
Use an identity property function instead: ${pe}.`)]}const ie=[];if(y.layerType==="symbol")O!=="text-field"||!v||v.glyphs||v.imports||ie.push(new i.V(d,R,'use of "text-field" requires a style "glyphs" property')),O==="text-font"&&i.a2(i.U(R))&&i.M(R.type)==="identity"&&ie.push(new i.V(d,R,'"text-font" does not support identity functions'));else if(y.layerType==="model"&&a==="paint"&&S&&S.layout&&S.layout.hasOwnProperty("model-id")&&i.O(J)&&(i.a3(J)||i.Q(J))){const pe=i.W(i.U(R),J),de=pe.value.expression||pe.value._styleExpression.expression;de&&!i.Z(de,["measure-light"])&&(O==="model-emissive-strength"&&i._(de)&&i.Y(de)||ie.push(new i.V(d,R,`${O} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ie.concat(Rr({key:y.key,value:R,valueSpec:J,style:v,styleSpec:E,expressionContext:"property",propertyType:a,propertyKey:O}))}function zn(y){return Wt(y,"paint")}function Un(y){return Wt(y,"layout")}function mr(y){let a=[];const d=y.value,v=y.key,S=y.style,E=y.styleSpec;d.type||d.ref||a.push(new i.V(v,d,'either "type" or "ref" is required'));let R=i.M(d.type);const O=i.M(d.ref);if(d.id){const B=i.M(d.id);for(let H=0;H<y.arrayIndex;H++){const Y=S.layers[H];i.M(Y.id)===B&&a.push(new i.V(v,d.id,`duplicate layer id "${d.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in d){let B;["type","source","source-layer","filter","layout"].forEach(H=>{H in d&&a.push(new i.V(v,d[H],`"${H}" is prohibited for ref layers`))}),S.layers.forEach(H=>{i.M(H.id)===O&&(B=H)}),B?B.ref?a.push(new i.V(v,d.ref,"ref cannot reference another ref layer")):R=i.M(B.type):typeof O=="string"&&a.push(new i.V(v,d.ref,`ref layer "${O}" not found`))}else if(R!=="background"&&R!=="sky"&&R!=="slot")if(d.source){const B=S.sources&&S.sources[d.source],H=B&&i.M(B.type);B?H==="vector"&&R==="raster"?a.push(new i.V(v,d.source,`layer "${d.id}" requires a raster source`)):H==="raster"&&R!=="raster"?a.push(new i.V(v,d.source,`layer "${d.id}" requires a vector source`)):H!=="vector"||d["source-layer"]?H==="raster-dem"&&R!=="hillshade"?a.push(new i.V(v,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="raster-array"||["raster","raster-particle"].includes(R)?R==="line"&&d.paint&&(d.paint["line-gradient"]||d.paint["line-trim-offset"])&&H==="geojson"&&!B.lineMetrics?a.push(new i.V(v,d,`layer "${d.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):R==="raster-particle"&&H!=="raster-array"&&a.push(new i.V(v,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):a.push(new i.V(v,d.source,"raster-array source can only be used with layer type 'raster'.")):a.push(new i.V(v,d,`layer "${d.id}" must specify a "source-layer"`)):a.push(new i.V(v,d.source,`source "${d.source}" not found`))}else a.push(new i.V(v,d,'missing required property "source"'));return a=a.concat(an({key:v,value:d,valueSpec:E.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Rr({key:`${v}.type`,value:d.type,valueSpec:E.layer.type,style:y.style,styleSpec:y.styleSpec,object:d,objectKey:"type"}),filter:B=>gn(i.L({layerType:R},B)),layout:B=>an({layer:d,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":H=>Un(i.L({layerType:R},H))}}),paint:B=>an({layer:d,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":H=>zn(i.L({layerType:R,layer:d},H))}})}})),a}function Xn(y){const a=y.value,d=y.key,v=i.K(a);return v!=="string"?[new i.V(d,a,`string expected, ${v} found`)]:[]}const or={promoteId:function y({key:a,value:d}){if(i.K(d)==="string")return Xn({key:a,value:d});if(Array.isArray(d)){const v=[],S=i.U(d),E=i.X(S);return E.result==="error"&&E.value.forEach(R=>{v.push(new i.V(`${a}${R.key}`,null,`${R.message}`))}),i.Z(E.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||v.push(new i.V(`${a}`,null,"promoteId expression should be only feature dependent")),v}{const v=[];for(const S in d)v.push(...y({key:`${a}.${S}`,value:d[S]}));return v}}};function En(y){const a=y.value,d=y.key,v=y.styleSpec,S=y.style;if(!a.type)return[new i.V(d,a,'"type" is required')];const E=i.M(a.type);let R=[];switch(["vector","raster","raster-dem","raster-array"].includes(E)&&(a.url||a.tiles||R.push(new i.J(d,a,'Either "url" or "tiles" is required.'))),E){case"vector":case"raster":case"raster-dem":case"raster-array":return R=R.concat(an({key:d,value:a,valueSpec:v[`source_${E.replace("-","_")}`],style:y.style,styleSpec:v,objectElementValidators:or})),R;case"geojson":if(R=an({key:d,value:a,valueSpec:v.source_geojson,style:S,styleSpec:v,objectElementValidators:or}),a.cluster)for(const O in a.clusterProperties){const[B,H]=a.clusterProperties[O],Y=typeof B=="string"?[B,["accumulated"],["get",O]]:B;R.push(...wn({key:`${d}.${O}.map`,value:H,expressionContext:"cluster-map"})),R.push(...wn({key:`${d}.${O}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return R;case"video":return an({key:d,value:a,valueSpec:v.source_video,style:S,styleSpec:v});case"image":return an({key:d,value:a,valueSpec:v.source_image,style:S,styleSpec:v});case"canvas":return[new i.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ut({key:`${d}.type`,value:a.type,valueSpec:{values:Fr(v)}})}}function Fr(y){return y.source.reduce((a,d)=>{const v=y[d];return v.type.type==="enum"&&(a=a.concat(Object.keys(v.type.values))),a},[])}function Er(y){const a=y.value,d=y.styleSpec,v=d.light,S=y.style;let E=[];const R=i.K(a);if(a===void 0)return E;if(R!=="object")return E=E.concat([new i.V("light",a,`object expected, ${R} found`)]),E;for(const O in a){const B=O.match(/^(.*)-transition$/),H=O.match(/^(.*)-use-theme$/);E=E.concat(H&&v[H[1]]?Rr({key:O,value:a[O],valueSpec:{type:"string"},style:S,styleSpec:d}):B&&v[B[1]]&&v[B[1]].transition?Rr({key:O,value:a[O],valueSpec:d.transition,style:S,styleSpec:d}):v[O]?Rr({key:O,value:a[O],valueSpec:v[O],style:S,styleSpec:d}):[new i.V(O,a[O],`unknown property "${O}"`)])}return E}function _r(y){const a=y.value;let d=[];if(!a)return d;const v=i.K(a);if(v!=="object")return d=d.concat([new i.V("light-3d",a,`object expected, ${v} found`)]),d;const S=y.styleSpec,E=S["light-3d"],R=y.key,O=y.style,B=y.style.lights;for(const J of["type","id"])if(!(J in a))return d=d.concat([new i.V("light-3d",a,`missing property ${J} on light`)]),d;if(a.type&&B)for(let J=0;J<y.arrayIndex;J++){const Q=i.M(a.type),ie=B[J];i.M(ie.type)===Q&&d.push(new i.V(R,a.id,`duplicate light type "${a.type}", previously defined at line ${ie.id.__line__}`))}const H=`properties_light_${a.type}`;if(!(H in S))return d=d.concat([new i.V("light-3d",a,`Invalid light type ${a.type}`)]),d;const Y=S[H];for(const J in a)if(J==="properties"){const Q=a[J],ie=i.K(Q);if(ie!=="object")return d=d.concat([new i.V("properties",Q,`object expected, ${ie} found`)]),d;for(const pe in Q)d=d.concat(Y[pe]?Rr({key:pe,value:Q[pe],valueSpec:Y[pe],style:O,styleSpec:S}):[new i.J(y.key,Q[pe],`unknown property "${pe}"`)])}else{const Q=J.match(/^(.*)-transition$/),ie=J.match(/^(.*)-use-theme$/);d=d.concat(ie&&E[ie[1]]?Rr({key:J,value:a[J],valueSpec:{type:"string"},style:O,styleSpec:S}):Q&&E[Q[1]]&&E[Q[1]].transition?Rr({key:J,value:a[J],valueSpec:S.transition,style:O,styleSpec:S}):E[J]?Rr({key:J,value:a[J],valueSpec:E[J],style:O,styleSpec:S}):[new i.J(J,a[J],`unknown property "${J}"`)])}return d}function nr(y){const a=y.value,d=y.key,v=y.style,S=y.styleSpec,E=S.terrain;let R=[];const O=i.K(a);if(a===void 0||O==="null")return R;if(O!=="object")return R=R.concat([new i.V("terrain",a,`object expected, ${O} found`)]),R;for(const B in a){const H=B.match(/^(.*)-transition$/),Y=B.match(/^(.*)-use-theme$/);R=R.concat(Y&&E[Y[1]]?Rr({key:B,value:a[B],valueSpec:{type:"string"},style:v,styleSpec:S}):H&&E[H[1]]&&E[H[1]].transition?Rr({key:B,value:a[B],valueSpec:S.transition,style:v,styleSpec:S}):E[B]?Rr({key:B,value:a[B],valueSpec:E[B],style:v,styleSpec:S}):[new i.J(B,a[B],`unknown property "${B}"`)])}if(a.source){const B=v.sources&&v.sources[a.source],H=B&&i.M(B.type);B?H!=="raster-dem"&&R.push(new i.V(d,a.source,`terrain cannot be used with a source of type ${String(H)}, it only be used with a "raster-dem" source type`)):R.push(new i.V(d,a.source,`source "${a.source}" not found`))}else R.push(new i.V(d,a,'terrain is missing required property "source"'));return R}function Wr(y){const a=y.value,d=y.style,v=y.styleSpec,S=v.fog;let E=[];const R=i.K(a);if(a===void 0)return E;if(R!=="object")return E=E.concat([new i.V("fog",a,`object expected, ${R} found`)]),E;for(const O in a){const B=O.match(/^(.*)-transition$/),H=O.match(/^(.*)-use-theme$/);E=E.concat(H&&S[H[1]]?Rr({key:O,value:a[O],valueSpec:{type:"string"},style:d,styleSpec:v}):B&&S[B[1]]&&S[B[1]].transition?Rr({key:O,value:a[O],valueSpec:v.transition,style:d,styleSpec:v}):S[O]?Rr({key:O,value:a[O],valueSpec:S[O],style:d,styleSpec:v}):[new i.J(O,a[O],`unknown property "${O}"`)])}return E}const wr={"*":()=>[],array:Ft,boolean:function(y){const a=y.value,d=y.key,v=i.K(a);return v!=="boolean"?[new i.V(d,a,`boolean expected, ${v} found`)]:[]},number:kn,color:function(y){const a=y.key,d=y.value,v=i.K(d);return v!=="string"?[new i.V(a,d,`color expected, ${v} found`)]:i.a0.parseCSSColor(d)===null?[new i.V(a,d,`color expected, "${d}" found`)]:[]},enum:ut,filter:gn,function:Yn,layer:mr,object:an,source:En,model:i.a4,light:Er,"light-3d":_r,terrain:nr,fog:Wr,string:Xn,formatted:function(y){return Xn(y).length===0?[]:wn(y)},resolvedImage:function(y){return Xn(y).length===0?[]:wn(y)},projection:function(y){const a=y.value,d=y.styleSpec,v=d.projection,S=y.style;let E=[];const R=i.K(a);if(R==="object")for(const O in a)E=E.concat(Rr({key:O,value:a[O],valueSpec:v[O],style:S,styleSpec:d}));else R!=="string"&&(E=E.concat([new i.V("projection",a,`object or string expected, ${R} found`)]));return E},import:function(y){const{value:a,styleSpec:d}=y,{data:v,...S}=a;Object.defineProperty(S,"__line__",{value:a.__line__,enumerable:!1});let E=an(i.L({},y,{value:S,valueSpec:d.import}));return i.M(S.id)===""&&E.push(new i.V(`${y.key}.id`,S,"import id can't be an empty string")),v&&(E=E.concat(Wo(v,d,{key:`${y.key}.data`}))),E},iconset:function(y){const a=y.value,d=y.key,v=y.styleSpec,S=y.style;if(!a.type)return[new i.V(d,a,'"type" is required')];const E=i.M(a.type);let R=[];if(R=R.concat(an({key:d,value:a,valueSpec:v[`iconset_${E}`],style:S,styleSpec:v})),E==="source"&&a.source){const O=S.sources&&S.sources[a.source],B=O&&i.M(O.type);O?B!=="raster-array"&&R.push(new i.V(d,a.source,`iconset cannot be used with a source of type ${String(B)}, it only be used with a "raster-array" source type`)):R.push(new i.V(d,a.source,`source "${a.source}" not found`))}return R}};function Rr(y,a=!1){const d=y.value,v=y.valueSpec,S=y.styleSpec;if(v.expression&&i.a2(i.M(d)))return Yn(y);if(v.expression&&i.S(i.U(d)))return wn(y);if(v.type&&wr[v.type]){const E=wr[v.type](y);return a===!0&&E.length>0&&i.K(y.value)==="array"?wn(y):E}return an(i.L({},y,{valueSpec:v.type?S[v.type]:v}))}function Di(y){const a=y.value,d=y.key,v=Xn(y);return v.length||(a.indexOf("{fontstack}")===-1&&v.push(new i.V(d,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&v.push(new i.V(d,a,'"glyphs" url must include a "{range}" token'))),v}function Wo(y,a=i.a5,d={}){return Rr({key:d.key||"",value:y,valueSpec:a.$root,styleSpec:a,style:y,objectElementValidators:{glyphs:Di,"*":()=>[]}})}function ko(y,a=i.a5){return Xe(Wo(y,a))}const Ro=y=>Xe(En(y)),bl=y=>Xe(Er(y)),oa=y=>Xe(_r(y)),dn=y=>Xe(nr(y)),Hs=y=>Xe(Wr(y)),Pr=y=>Xe(function(a){const d=a.value,v=a.style,S=a.styleSpec,E=S.snow;let R=[];const O=i.K(d);if(d===void 0)return R;if(O!=="object")return R=R.concat([new i.V("snow",d,`object expected, ${O} found`)]),R;for(const B in d){const H=B.match(/^(.*)-transition$/);R=R.concat(H&&E[H[1]]&&E[H[1]].transition?Rr({key:B,value:d[B],valueSpec:S.transition,style:v,styleSpec:S}):E[B]?Rr({key:B,value:d[B],valueSpec:E[B],style:v,styleSpec:S}):[new i.J(B,d[B],`unknown property "${B}"`)])}return R}(y)),De=y=>Xe(function(a){const d=a.value,v=a.style,S=a.styleSpec,E=S.rain;let R=[];const O=i.K(d);if(d===void 0)return R;if(O!=="object")return R=R.concat([new i.V("rain",d,`object expected, ${O} found`)]),R;for(const B in d){const H=B.match(/^(.*)-transition$/);R=R.concat(H&&E[H[1]]&&E[H[1]].transition?Rr({key:B,value:d[B],valueSpec:S.transition,style:v,styleSpec:S}):E[B]?Rr({key:B,value:d[B],valueSpec:E[B],style:v,styleSpec:S}):[new i.J(B,d[B],`unknown property "${B}"`)])}return R}(y)),re=y=>Xe(mr(y)),le=y=>Xe(gn(y)),xe=y=>Xe(zn(y)),ke=y=>Xe(Un(y)),Ne=y=>Xe(i.a4(y));function Xe(y){return y.slice().sort((a,d)=>a.line&&d.line?a.line-d.line:0)}function We(y,a){let d=!1;if(a&&a.length)for(const v of a)v instanceof i.J?i.w(v.message):(y.fire(new i.z(new Error(v.message))),d=!0);return d}let Ke;class at extends i.E{constructor(a,d="flat"){super(),this._transitionable=new i.a6(Ke||(Ke=new i.a7({anchor:new i.a8(i.a5.light.anchor),position:new i.a9(i.a5.light.position),color:new i.a8(i.a5.light.color),intensity:new i.a8(i.a5.light.intensity)}))),this.setLight(a,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d,v={}){this._validate(bl,a,v)||(this._transitionable.setTransitionOrValue(a),this.id=d)}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v){return(!v||v.validate!==!1)&&We(this,a.call(ko,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}}let ft=class extends i.E{constructor(y,a,d,v){super(),this.scope=d,this._transitionable=new i.a6(new i.a7({source:new i.a8(i.a5.terrain.source),exaggeration:new i.a8(i.a5.terrain.exaggeration)}),d,v),this._transitionable.setTransitionOrValue(y,v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(y,a){this._transitionable.setTransitionOrValue(y,a)}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}getExaggeration(y){return this._transitioning.possiblyEvaluate(new i.aa(y)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const y=this._transitionable._values.exaggeration;if(!y)return null;const a=y.value.expression;if(!a)return null;let d=-1,v=-1,S=1;for(const E of a.zoomStops)S=a.evaluate(new i.aa(E)),S>.01?(d=E,v=-1):v=E;return S<.01&&d>0&&v>d?[d,v]:null}isZoomDependent(){const y=this._transitionable._values.exaggeration;return y!=null&&y.value!=null&&y.value.expression!=null&&y.value.expression instanceof i.ab}};const st=45,zt=65,ln=.05;function xn(y,a,d,v){const S=i.af(st,zt,d),[E,R]=ir(y,v);let O=1-Math.min(1,Math.exp((a-E)/(R-E)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*S*y.alpha}function ir(y,a){const d=.5/Math.tan(.5*a);return[y.range[0]+d,y.range[1]+d]}function er(y,a,d,v,S){const E=i.ad([],[a,d,v],S.mercatorFogMatrix);return xn(y,i.ae(E),S.pitch,S._fov)}function tr(y,a,d,v,S,E,R){const O=[[d,v,0],[S,v,0],[S,E,0],[d,E,0]];let B=Number.MAX_VALUE,H=-Number.MAX_VALUE;for(const Y of O){const J=i.ad([],Y,a),Q=i.ae(J);B=Math.min(B,Q),H=Math.max(H,Q)}return[xn(y,B,R.pitch,R._fov),xn(y,H,R.pitch,R._fov)]}class kr extends i.E{constructor(a,d,v,S){super();const E=new i.a7({range:new i.a8(i.a5.fog.range),color:new i.a8(i.a5.fog.color),"color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new i.a8(i.a5.fog["high-color"]),"high-color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new i.a8(i.a5.fog["space-color"]),"space-color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new i.a8(i.a5.fog["horizon-blend"]),"star-intensity":new i.a8(i.a5.fog["star-intensity"]),"vertical-range":new i.a8(i.a5.fog["vertical-range"])});this._transitionable=new i.a6(E,v,new Map(S)),this.set(a,S),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new i.ag(E),this.scope=v}get state(){const a=this._transform,d=a.projection.name==="globe",v=i.ah(a.zoom),S=this.properties.get("range"),E=[.5,3];return{range:d?[i.ai(E[0],S[0],v),i.ai(E[1],S[1],v)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,d,v={}){if(this._validate(Hs,a,v))return;const S=i.l({},a);for(const E of Object.keys(i.a5.fog))S[E]===void 0&&(S[E]=i.a5.fog[E].default);this._options=S,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.af(st,zt,a))*d.a}getOpacityAtLatLng(a,d){return this._transform.projection.supportsFog?function(v,S,E){const R=i.ac.fromLngLat(S),O=E.elevation?E.elevation.getAtPointOrZero(R):0;return er(v,R.x,R.y,O,E)}(this.state,a,d):0}getOpacityForTile(a){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(a.toUnwrapped());return tr(this.state,d,0,0,i.aj,i.aj,this._transform)}getOpacityForBounds(a,d,v,S,E){return this._transform.projection.supportsFog?tr(this.state,a,d,v,S,E,this._transform):[1,1]}getFovAdjustedRange(a){return this._transform.projection.supportsFog?ir(this.state,a):[0,1]}isVisibleOnFrustum(a){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const v of d){const S=a.points[v];let E;if(S[2]>=0)E=S;else{const R=a.points[v-4];E=i.ak(R,S,R[2]/(R[2]-S[2]))}if(er(this.state,E[0],E[1],0,this._transform)>=ln)return!0}return!1}updateConfig(a){this._transitionable.setTransitionOrValue(this._options,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v){return(!v||v.validate!==!1)&&We(this,a.call(ko,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}}let bi,Ir,li,Kr,wi=class extends i.E{constructor(y,a,d,v){super();const S=bi||(bi=new i.a7({density:new i.a8(i.a5.snow.density),intensity:new i.a8(i.a5.snow.intensity),color:new i.a8(i.a5.snow.color),opacity:new i.a8(i.a5.snow.opacity),vignette:new i.a8(i.a5.snow.vignette),"vignette-color":new i.a8(i.a5.snow["vignette-color"]),"center-thinning":new i.a8(i.a5.snow["center-thinning"]),direction:new i.a8(i.a5.snow.direction),"flake-size":new i.a8(i.a5.snow["flake-size"])}));this._transitionable=new i.a6(S,d,new Map(v)),this.set(y,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.ag(S),this.scope=d}get state(){const y=this.properties.get("opacity"),a=this.properties.get("color"),d=this.properties.get("direction"),v=i.al(d[0]),S=-Math.max(i.al(d[1]),.01),E=[Math.cos(v)*Math.cos(S),Math.sin(v)*Math.cos(S),Math.sin(S)],R=this.properties.get("vignette"),O=this.properties.get("vignette-color");return O.a=R,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.am(a.r,a.g,a.b,a.a*y),direction:E,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:O}}get(){return this._transitionable.serialize()}set(y,a,d={}){if(this._validate(Pr,y,d))return;const v=i.l({},y);for(const S of Object.keys(i.a5.snow))v[S]===void 0&&(v[S]=i.a5.snow[S].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,a)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,a,d){return(!d||d.validate!==!1)&&We(this,y.call(ko,i.l({value:a,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}},zi=class extends i.E{constructor(y,a,d,v){super();const S=Ir||(Ir=new i.a7({density:new i.a8(i.a5.rain.density),intensity:new i.a8(i.a5.rain.intensity),color:new i.a8(i.a5.rain.color),opacity:new i.a8(i.a5.rain.opacity),vignette:new i.a8(i.a5.rain.vignette),"vignette-color":new i.a8(i.a5.rain["vignette-color"]),"center-thinning":new i.a8(i.a5.rain["center-thinning"]),direction:new i.a8(i.a5.rain.direction),"droplet-size":new i.a8(i.a5.rain["droplet-size"]),"distortion-strength":new i.a8(i.a5.rain["distortion-strength"])}));this._transitionable=new i.a6(S,d,new Map(v)),this.set(y,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.ag(S),this.scope=d}get state(){const y=this.properties.get("opacity"),a=this.properties.get("color"),d=this.properties.get("direction"),v=i.al(d[0]),S=-Math.max(i.al(d[1]),.01),E=[Math.cos(v)*Math.cos(S),Math.sin(v)*Math.cos(S),Math.sin(S)],R=this.properties.get("vignette-color");return R.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.am(a.r,a.g,a.b,a.a*y),direction:E,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:R}}get(){return this._transitionable.serialize()}set(y,a,d={}){if(this._validate(De,y,d))return;const v=i.l({},y);for(const S of Object.keys(i.a5.rain))v[S]===void 0&&(v[S]=i.a5.rain[S].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,a)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,a,d){return(!d||d.validate!==!1)&&We(this,y.call(ko,i.l({value:a,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}};class $i extends i.E{constructor(a,d,v,S){super(),this.scope=v,this._options=a,this.properties=new i.ag(d),this._transitionable=new i.a6(d,v,new Map(S)),this._transitionable.setTransitionOrValue(a.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(a){this._transitionable.setTransitionOrValue(this._options.properties,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(a,d){this._options=a,this._transitionable.setTransitionOrValue(a.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class bo{constructor(a,d,v,S){this.screenBounds=a,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=v,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(a,d){let v,S;if(a instanceof i.P||typeof a[0]=="number"){const E=i.P.convert(a);v=[E],S=d.isPointAboveHorizon(E)}else{const E=i.P.convert(a[0]),R=i.P.convert(a[1]),O=E.add(R)._div(2);v=[E,R],S=i.ao(E,R).every(B=>d.isPointAboveHorizon(B))&&d.isPointAboveHorizon(O)}return new bo(v,d.getCameraPoint(),S,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return i.ao(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],S=i.ao(d,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<v.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?S[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(S[3]=this.cameraPoint)),i.ap(S,a)}bufferedCameraGeometryGlobe(a){const d=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],S=i.ao(d,v,a),E=this.cameraPoint.clone();switch(3*((E.y>d.y)+(E.y>v.y))+((E.x>d.x)+(E.x>v.x))){case 0:S[0]=E,S[4]=E.clone();break;case 1:S.splice(1,0,E);break;case 2:S[1]=E;break;case 3:S.splice(4,0,E);break;case 5:S.splice(2,0,E);break;case 6:S[3]=E;break;case 7:S.splice(3,0,E);break;case 8:S[2]=E}return S}containsTile(a,d,v,S=0){const E=a.queryPadding/d._pixelsPerMercatorPixel+1,R=v?this._bufferedCameraMercator(E,d):this._bufferedScreenMercator(E,d);let O=a.tileID.wrap+(R.unwrapped?S:0);const B=R.polygon.map(ge=>i.aq(a.tileTransform,ge,O));if(!i.ar(B,0,0,i.aj,i.aj))return;O=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const H=this.screenGeometryMercator.polygon.map(ge=>i.as(a.tileTransform,ge,O)),Y=H.map(ge=>new i.P(ge[0],ge[1])),J=d.getFreeCameraOptions().position||new i.ac(0,0,0),Q=i.as(a.tileTransform,J,O),ie=H.map(ge=>{const fe=i.at(ge,ge,Q);return i.au(fe,fe),new i.av(Q,fe)}),pe=i.aw(a,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Y,tilespaceRays:ie,bufferedTilespaceGeometry:B,bufferedTilespaceBounds:(de=i.ax(B),de.min.x=i.aD(de.min.x,0,i.aj),de.min.y=i.aD(de.min.y,0,i.aj),de.max.x=i.aD(de.max.x,0,i.aj),de.max.y=i.aD(de.max.y,0,i.aj),de),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:pe};var de}_bufferedScreenMercator(a,d){const v=Is(a);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let S;return S=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),d):{polygon:this.bufferedScreenGeometry(a).map(E=>d.pointCoordinate3D(E)),unwrapped:!0},this._screenRaycastCache[v]=S,S}}_bufferedCameraMercator(a,d){const v=Is(a);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let S;return S=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),d):{polygon:this.bufferedCameraGeometry(a).map(E=>d.pointCoordinate3D(E)),unwrapped:!0},this._cameraRaycastCache[v]=S,S}}_projectAndResample(a,d){const v=function(E,R){const O=i.az([],R.pixelMatrix,R.globeMatrix),B=[0,-i.aE,0,1],H=[0,i.aE,0,1],Y=[0,0,0,1];i.aA(B,B,O),i.aA(H,H,O),i.aA(Y,Y,O);const J=new i.P(B[0]/B[3],B[1]/B[3]),Q=new i.P(H[0]/H[3],H[1]/H[3]),ie=i.aB(E,J)&&B[3]<Y[3],pe=i.aB(E,Q)&&H[3]<Y[3];if(!ie&&!pe)return null;const de=function(Ue,Fe,Ze){for(let et=1;et<Ue.length;et++){const gt=lo(Fe.pointCoordinate3D(Ue[et-1]).x),ht=lo(Fe.pointCoordinate3D(Ue[et]).x);if(Ze<0){if(gt<ht)return{idx:et,t:-gt/(ht-1-gt)}}else if(ht<gt)return{idx:et,t:(1-gt)/(ht+1-gt)}}return null}(E,R,ie?-1:1);if(!de)return null;const{idx:ge,t:fe}=de;let Ee=ge>1?Zr(E.slice(0,ge),R):[],Le=ge<E.length?Zr(E.slice(ge),R):[];Ee=Ee.map(Ue=>new i.P(lo(Ue.x),Ue.y)),Le=Le.map(Ue=>new i.P(lo(Ue.x),Ue.y));const je=[...Ee];je.length===0&&je.push(Le[Le.length-1]);const Ye=i.ai(je[je.length-1].y,(Le.length===0?Ee[0]:Le[0]).y,fe);let $e;return $e=ie?[new i.P(0,Ye),new i.P(0,0),new i.P(1,0),new i.P(1,Ye)]:[new i.P(1,Ye),new i.P(1,1),new i.P(0,1),new i.P(0,Ye)],je.push(...$e),Le.length===0?je.push(Ee[0]):je.push(...Le),{polygon:je.map(Ue=>new i.ac(Ue.x,Ue.y)),unwrapped:!1}}(a,d);if(v)return v;const S=function(E,R){let O=!1,B=-1/0,H=0;for(let J=0;J<E.length-1;J++)E[J].x>B&&(B=E[J].x,H=J);for(let J=0;J<E.length-1;J++){const Q=(H+J)%(E.length-1),ie=E[Q],pe=E[Q+1];Math.abs(ie.x-pe.x)>.5&&(ie.x<pe.x?(ie.x+=1,Q===0&&(E[E.length-1].x+=1)):(pe.x+=1,Q+1===E.length-1&&(E[0].x+=1)),O=!0)}const Y=i.ay(R.center.lng);return O&&Y<Math.abs(Y-1)&&E.forEach(J=>{J.x-=1}),{polygon:E,unwrapped:O}}(Zr(a,d).map(E=>new i.P(lo(E.x),E.y)),d);return{polygon:S.polygon.map(E=>new i.ac(E.x,E.y)),unwrapped:S.unwrapped}}}function Zr(y,a){return i.aC(y,d=>{const v=a.pointCoordinate3D(d);d.x=v.x,d.y=v.y},1/256)}function lo(y){return y<0?1+y%1:y%1}function Is(y){return 100*y|0}function Oo(y,a,d,v,S){const E=function(O,B){if(O)return S(O);if(B){if(y.url&&B.tiles&&y.tiles&&delete y.tiles,B.variants){if(!Array.isArray(B.variants))return S(new Error("variants must be an array"));for(const Y of B.variants){if(Y==null||typeof Y!="object"||Y.constructor!==Object)return S(new Error("variant must be an object"));if(!Array.isArray(Y.capabilities))return S(new Error("capabilities must be an array"));if(Y.capabilities.length===1&&Y.capabilities[0]==="meshopt"){B=i.l(B,Y);break}}}const H=i.aF(i.l({},B,y),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);H.tiles=a.canonicalizeTileset(H,y.url),S(null,H)}},R=function(O,B,H){if(!O)return null;if(!B&&!H)return O;H=H||O.worldview_default;const Y=Object.values(O.language||{});if(Y.length===0)return null;const J=Object.values(O.worldview||{});if(J.length===0)return null;const Q=Y.every(pe=>pe===B),ie=J.every(pe=>pe===H);return Q&&ie?O:B in(O.language_options||{})||H in(O.worldview_options||{})?null:O.language_options&&O.worldview_options?O:null}(y.data,d,v);return R?i.q.frame(()=>E(null,R)):y.url?i.n(a.transformRequest(a.normalizeSourceURL(y.url,null,d,v),i.R.Source),E):i.q.frame(()=>{const{data:O,...B}=y;E(null,B)})}function is(y,a){const d=Math.pow(2,a.z),v=Math.floor(i.ay(y.getWest())*d),S=Math.floor(i.aH(y.getNorth())*d),E=Math.ceil(i.ay(y.getEast())*d),R=Math.ceil(i.aH(y.getSouth())*d);return a.x>=v&&a.x<E&&a.y>=S&&a.y<R}class Pi{constructor(a,d,v){this.bounds=a?i.aG.convert(this.validateBounds(a)):null,this.minzoom=d||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}addExtraBounds(a){if(a){this.extraBounds||(this.extraBounds=[]);for(const d of a)this.extraBounds.push(i.aG.convert(this.validateBounds(d)))}}contains(a){if(a.z>this.maxzoom||a.z<this.minzoom||this.bounds&&!is(this.bounds,a))return!1;if(!this.extraBounds)return!0;for(const d of this.extraBounds)if(is(d,a))return!0;return!1}static fromTileJSON(a){if(!a.bounds&&!a.extra_bounds)return null;const d=new Pi(a.bounds,a.minzoom,a.maxzoom);return d.addExtraBounds(a.extra_bounds),d}}class Yo extends i.E{constructor(a,d,v,S){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.aF(d,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new i.aI}load(a){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map.getWorldview();this._tileJSONRequest=Oo(this._options,this.map._requestManager,d,v,(S,E)=>{if(this._tileJSONRequest=null,this._loaded=!0,S)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),v&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new i.z(S));else if(E){if(i.l(this,E),this.hasWorldviews=!!E.worldview_options,E.worldview_default&&(this.worldviewDefault=E.worldview_default),E.vector_layers){this.vectorLayers=E.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const R of E.vector_layers)this.vectorLayerIds.push(R.id),E.worldview&&E.worldview[R.source]&&this.localizableLayerIds.add(R.id)}this.tileBounds=Pi.fromTileJSON(E),yt(E.tiles,this.map._requestManager._customAccessToken),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}a&&a(S)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(a,d){const v=a.tileID.canonical.url(this.tiles,this.scheme),S=this.map._requestManager.normalizeTileURL(v),E=this.map._requestManager.transformRequest(S,i.R.Tile),R=this.map.style?this.map.style.getLut(this.scope):null,O=R?{image:R.image.clone()}:null,B={request:E,data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,lut:O,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:a.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&i.f(v)&&(B.worldview=this.map.getWorldview()||this.worldviewDefault,B.localizableLayerIds=this.localizableLayerIds),B.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=d:a.request=a.actor.send("reloadTile",B,H.bind(this));else if(a.actor=this._tileWorkers[S]=this._tileWorkers[S]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",B,H.bind(this),void 0,!0);else{const Y=i.aJ.call({deduped:this._deduped},B,(J,Q)=>{J||!Q?H.call(this,J):(B.data={cacheControl:Q.cacheControl,expires:Q.expires,rawData:Q.rawData.slice(0)},a.actor&&a.actor.send("loadTile",B,H.bind(this),void 0,!0))},!0);a.request={cancel:Y}}function H(Y,J){return delete a.request,a.aborted?d(null):Y&&Y.status!==404?d(Y):(J&&J.resourceTiming&&(a.resourceTiming=J.resourceTiming),this.map._refreshExpiredTiles&&J&&a.setExpiryData(J),a.loadVectorData(J,this.map.painter),i.aK(this.dispatcher),d(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,d){a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope}),a.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Qa extends i.E{constructor(a,d,v,S){super(),this.id=a,this.dispatcher=v,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},d),i.l(this,i.aF(d,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"})),this._tileJSONRequest=Oo(this._options,this.map._requestManager,null,null,(d,v)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new i.z(d)):v&&(i.l(this,v),v.raster_layers&&(this.rasterLayers=v.raster_layers,this.rasterLayerIds=this.rasterLayers.map(S=>S.id)),this.tileBounds=Pi.fromTileJSON(v),yt(v.tiles),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))),a&&a(d)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,d){const v=i.q.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);a.request=i.o(this.map._requestManager.transformRequest(S,i.R.Tile),(E,R,O,B)=>(delete a.request,a.aborted?(a.state="unloaded",d(null)):E?(a.state="errored",d(E)):R?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:O,expires:B}),a.setTexture(R,this.map.painter),a.state="loaded",i.aK(this.dispatcher),void d(null)):d(null)))}abortTile(a,d){a.request&&(a.request.cancel(),delete a.request),d&&d()}unloadTile(a,d){a.texture&&a.texture instanceof i.T?(a.destroy(!0),a.texture&&a.texture instanceof i.T&&this.map.painter.saveTileTexture(a.texture)):a.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class As extends Qa{constructor(a,d,v,S){super(a,d,v,S),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=i.l({type:"raster-array"},d)}triggerRepaint(a){const d=this.map.painter._terrain,v=this.map.style.getSourceCache(this.id);d&&d.enabled&&v&&d._clearRenderCacheForTile(v.id,a.tileID),this.map.triggerRepaint()}loadTile(a,d){const v=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),S=this.map._requestManager.transformRequest(v,i.R.Tile),E={request:S,uid:a.uid,tileID:a.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};a.source=this.id,a.scope=this.scope,a.requestParams=S,a.actor||(a.actor=this.dispatcher.getActor());const R=(O,B,H,Y)=>{if(delete a.request,a.aborted)return a.state="unloaded",d(null);if(O)return O.name==="AbortError"?void 0:(a.state="errored",d(O));if(this.map._refreshExpiredTiles&&B&&a.setExpiryData({cacheControl:H,expires:Y}),this.partial)a.state="empty";else{if(!B)return d(null);a.state="loaded",a._isHeaderLoaded=!0,a._mrt=B}d(null)};a.request=this.partial?a.fetchHeader(void 0,R.bind(this)):a.actor.send("loadTile",E,R.bind(this),void 0,!0)}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,d){const v=a.texture;v&&v instanceof i.T?(a.destroy(!0),this.map.painter.saveTileTexture(v)):(a.destroy(),a.flushQueues(),a._isHeaderLoaded=!1,delete a._mrt,delete a.textureDescriptor),a.fbo&&(a.fbo.destroy(),delete a.fbo),delete a.request,delete a.requestParams,delete a.neighboringTiles,a.state="unloaded"}prepareTile(a,d,v){a._isHeaderLoaded&&(a.state!=="empty"&&(a.state="reloading"),a.fetchBand(d,v,(S,E)=>{if(S)return a.state="errored",this.fire(new i.z(S)),void this.triggerRepaint(a);E&&(a._isHeaderLoaded=!0,a.setTexture(E,this.map.painter),a.state="loaded",this.triggerRepaint(a))}))}getInitialBand(a){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:E})=>E===a),v=d&&d.fields,S=v&&v.bands&&v.bands;return S?S[0]:0}getTextureDescriptor(a,d,v){if(!a)return;const S=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!S)return;let E=null;d instanceof i.aN?E=d.paint.get("raster-array-band"):d instanceof i.aO&&(E=d.paint.get("raster-particle-array-band"));const R=E||this.getInitialBand(S);if(R!=null)if(a.textureDescriptor){if(!a.updateNeeded(S,R)||v)return Object.assign({},a.textureDescriptor,{texture:a.texture})}else this.prepareTile(a,S,R)}getImages(a,d){const v=new Map;for(const S of a)for(const E of d){const[R,O]=E.split("/"),B=S.getLayer(R);if(!B||!B.hasBand(O)||!B.hasDataForBand(O))continue;const{bytes:H,tileSize:Y,buffer:J}=B.getBandView(O),Q=Y+2*J,ie={data:new i.r({width:Q,height:Q},H),pixelRatio:2,sdf:!1,usvg:!1,version:0};v.set(E,ie)}return v}}const Of={vector:Yo,raster:Qa,"raster-dem":class extends Qa{constructor(y,a,d,v){super(y,a,d,v),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(y,a){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(S,E){S&&(y.state="errored",a(S)),E&&(y.dem=E,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",a(null))}y.request=i.o(this.map._requestManager.transformRequest(d,i.R.Tile),(function(S,E,R,O){if(delete y.request,y.aborted)y.state="unloaded",a(null);else if(S)y.state="errored",a(S);else if(E){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:R,expires:O});const B=ImageBitmap&&E instanceof ImageBitmap&&i.t(),H=1-(E.width-i.aL(E.width))/2;H<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const Y=B?E:i.q.getImageData(E,H),J={uid:y.uid,tileID:y.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:Y,encoding:this.encoding,padding:H};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadTile",J,v.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const a=y.canonical,d=Math.pow(2,a.z),v=(a.x-1+d)%d,S=a.x===0?y.wrap-1:y.wrap,E=(a.x+1+d)%d,R=a.x+1===d?y.wrap+1:y.wrap,O={};return O[new i.aM(y.overscaledZ,S,a.z,v,a.y).key]={backfilled:!1},O[new i.aM(y.overscaledZ,R,a.z,E,a.y).key]={backfilled:!1},a.y>0&&(O[new i.aM(y.overscaledZ,S,a.z,v,a.y-1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,y.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,R,a.z,E,a.y-1).key]={backfilled:!1}),a.y+1<d&&(O[new i.aM(y.overscaledZ,S,a.z,v,a.y+1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,y.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,R,a.z,E,a.y+1).key]={backfilled:!1}),O}},"raster-array":As,geojson:class extends i.E{constructor(y,a,d,v){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(v),this._data=a.data,this._options=i.l({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.minzoom!==void 0&&(this.minzoom=a.minzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const S=i.aj/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*S,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*S,extent:i.aj,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:i.aj,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*S,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter,dynamic:a.dynamic},a.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}updateData(y){if(!this._options.dynamic)return this.fire(new i.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof y!="string"&&(y.type==="Feature"&&(y={type:"FeatureCollection",features:[y]}),y.type!=="FeatureCollection"))return this.fire(new i.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof y!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const a=new Map;for(const d of this._data.features)a.set(d.id,d);for(const d of y.features)a.set(d.id,d);this._data.features=[...a.values()]}else this._data=y;return this._updateWorkerData(!0),this}getClusterExpansionZoom(y,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id,scope:this.scope},a),this}getClusterChildren(y,a){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id,scope:this.scope},a),this}getClusterLeaves(y,a,d,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:y,limit:a,offset:d},v),this}_updateWorkerData(y=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.A("dataloading",{dataType:"source"})),this._loaded=!1;const a=i.l({append:y},this.workerOptions);a.scope=this.scope;const d=this._data;typeof d=="string"?(a.request=this.map._requestManager.transformRequest(i.q.resolveURL(d),i.R.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,a,(v,S)=>{if(this._loaded=!0,this._pendingLoad=null,v)this.fire(new i.z(v));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&S&&S.resourceTiming&&S.resourceTiming[this.id]&&(E.resourceTiming=S.resourceTiming[this.id]),y&&(this._partialReload=!0),this.fire(new i.A("data",E)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(y),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const y=i.C(this.id,this.scope);this.map.style.clearSource(y),this._updateWorkerData()}loadTile(y,a){const d=y.actor?"reloadTile":"loadTile";y.actor=this.actor;const v=this.map.style?this.map.style.getLut(this.scope):null,S=v?{image:v.image.clone()}:null,E=this._partialReload,R={type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:S,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:y.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:E};y.request=this.actor.send(d,R,(O,B)=>E&&!B?(y.state="loaded",a(null)):(delete y.request,y.destroy(),y.aborted?a(null):O?a(O):(y.loadVectorData(B,this.map.painter,d==="reloadTile"),a(null))),void 0,d==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y,a){this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id,scope:this.scope}),y.destroy()}onRemove(y){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aP{constructor(y,a,d,v){super(y,a,d,v),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const a of y.urls)this.urls.push(this.map._requestManager.transformRequest(a,i.R.Source).url);i.aQ(this.urls,(a,d)=>{this._loaded=!0,a?this.fire(new i.z(a)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const a=this.video.seekable;y<a.start(0)||y>a.end(0)?this.fire(new i.z(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,a=y.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(y,this.video,a.RGBA8),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aP,model:class extends i.E{constructor(y,a,d,v){super(),this.id=y,this.type="model",this.models=[],this._loaded=!1,this._options=a}load(){const y=[];for(const a in this._options.models){const d=this._options.models[a],v=i.aS(this.map._requestManager.transformRequest(d.uri,i.R.Model).url).then(S=>{if(!S)return;const E=i.aT(S),R=new i.aU(a,d.position,d.orientation,E);R.computeBoundsAndApplyParent(),this.models.push(R)}).catch(S=>{this.fire(new i.z(new Error(`Could not load model ${a} from ${d.uri}: ${S.message}`)))});y.push(v)}Promise.allSettled(y).then(()=>{this._loaded=!0,this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(a=>{this._loaded=!0,this.fire(new i.z(new Error(`Could not load models: ${a.message}`)))})}onAdd(y){this.map=y,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(y,a){}serialize(){return this._options}},"batched-model":class extends i.E{constructor(y,a,d,v){super(),this.type="batched-model",this.id=y,this.tileSize=512,this._options=a,this.tiles=this._options.tiles,this.maxzoom=a.maxzoom||19,this.minzoom=a.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(v)}onAdd(y){this.map=y,this.load()}reload(){this.cancelTileJSONRequest();const y=i.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(y))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(y){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=Oo(this._options,this.map._requestManager,a,d,(v,S)=>{this._tileJSONRequest=null,this._loaded=!0,v?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new i.z(v))):S&&(i.l(this,S),S.bounds&&(this.tileBounds=new Pi(S.bounds,this.minzoom,this.maxzoom)),yt(S.tiles,this.map._requestManager._customAccessToken),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))),y&&y(v)})}hasTransition(){return!1}hasTile(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)}loaded(){return this._loaded}loadTile(y,a){const d=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(d,i.R.Tile),data:void 0,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:y.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:i.q.devicePixelRatio,promoteId:this.promoteId};if(y.actor&&y.state!=="expired")if(y.state==="loading")y.reloadCallback=a;else{if(y.buckets){const E=Object.values(y.buckets);for(const R of E)R.dirty=!0;return void(y.state="loaded")}y.request=y.actor.send("reloadTile",v,S.bind(this))}else y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",v,S.bind(this),void 0,!0);function S(E,R){return y.aborted?a(null):E&&E.status!==404?a(E):(this.map._refreshExpiredTiles&&R&&y.setExpiryData(R),y.loadModelData(R,this.map.painter),y.state="loaded",void a(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aP{constructor(y,a,d,v){super(y,a,d,v),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(E=>typeof E!="number"))||this.fire(new i.z(new i.V(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.z(new i.V(`sources.${y}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new i.z(new i.V(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new i.z(new i.V(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.z(new i.V(`sources.${y}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(y){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?!y&&!this._playing||this.texture instanceof i.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(a,this.canvas,a.gl.RGBA8,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends i.E{constructor(y,a,d,v){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=a,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Pi(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.aF(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this.map=y,this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:a,y:d,z:v}=y.canonical;return this._implementation.hasTile({x:a,y:d,z:v})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,a){const{x:d,y:v,z:S}=y.tileID.canonical,E=new AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:d,y:v,z:S},{signal:E.signal})).then((function(R){return delete y.request,y.aborted?(y.state="unloaded",a(null)):R===void 0?(y.state="errored",a(null)):R===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",a(null)):function(O){return O instanceof ImageData||O instanceof HTMLCanvasElement||O instanceof ImageBitmap||O instanceof HTMLImageElement}(R)?(this.loadTileData(y,R),y.state="loaded",void a(null)):(y.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(R=>{R.name!=="AbortError"&&(y.state="errored",a(R))}),y.request.cancel=()=>E.abort()}loadTileData(y,a){y.setTexture(a,this.map.painter)}unloadTile(y,a){if(y.texture&&y.texture instanceof i.T?(y.destroy(!0),y.texture&&y.texture instanceof i.T&&this.map.painter.saveTileTexture(y.texture)):y.destroy(),this._implementation.unloadTile){const{x:d,y:v,z:S}=y.tileID.canonical;this._implementation.unloadTile({x:d,y:v,z:S})}a&&a()}abortTile(y,a){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),a&&a()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){const y=i.C(this.id,this.scope);this.map.style.clearSource(y)}_update(){this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}}},Lf=function(y,a,d,v){const S=new Of[a.type](y,a,d,v);if(S.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${S.id}`);return i.aV(["load","abort","unload","serialize","prepare"],S),S};function xh(y,a,d=""){return`${d}:${a.id||""}:${a.layer.id}:${function(v){if("layerId"in v)return`layer:${v.layerId}`;{const{featuresetId:S,importId:E}=v;return`featureset:${S}${E?`:import:${E}`:""}`}}(y.target)}`}function zf(y,a,d,v=""){if(y.uniqueFeatureID){const S=xh(y,a,v);if(d.has(S))return!0;d.add(S)}return!1}function Xc(y,a,d,v,S=!1){const E=a.sourceCache.transform,R=a.sourceCache.tilesIn(y,a.has3DLayers,S);R.sort(wl);const O=[];for(const B of R){const H=B.tile.queryRenderedFeatures(a,B,d,v,E,S);Object.keys(H).length&&O.push({wrappedTileID:B.tile.tileID.wrapped().key,queryResults:H})}return O.length===0?{}:function(B){const H={},Y={};for(const J of B){const Q=J.queryResults,ie=J.wrappedTileID,pe=Y[ie]=Y[ie]||{};for(const de in Q){const ge=Q[de],fe=pe[de]=pe[de]||{},Ee=H[de]=H[de]||[];for(const Le of ge)fe[Le.featureIndex]||(fe[Le.featureIndex]=!0,Ee.push(Le))}}return H}(O)}function am(y,a,d,v,S){const E={},R=v.queryRenderedSymbols(y),O=[];for(const B of Object.keys(R).map(Number))O.push(S[B]);O.sort(wl);for(const B of O){const H=B.featureIndex.lookupSymbolFeatures(R[B.bucketInstanceId],B.bucketIndex,B.sourceLayerIndex,a,d);for(const Y in H){const J=E[Y]=E[Y]||[],Q=H[Y];Q.sort((ie,pe)=>{const de=B.featureSortOrder;if(de){const ge=de.indexOf(ie.featureIndex);return de.indexOf(pe.featureIndex)-ge}return pe.featureIndex-ie.featureIndex});for(const ie of Q)J.push(ie)}}return E}function Ja(y,a){const d=y.getRenderableIds().map(E=>y.getTileByID(E)),v=[],S={};for(let E=0;E<d.length;E++){const R=d[E],O=R.tileID.canonical.key;S[O]||(S[O]=!0,R.querySourceFeatures(v,a))}return v}function wl(y,a){const d=y.tileID,v=a.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function jg(y,a){const d={};if(!a)return d;for(const v of y){const S=v.layerIds.map(E=>a.getLayer(E)).filter(Boolean);if(S.length!==0){v.layers=S,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(E=>S.filter(R=>R.id===E)[0]));for(const E of S)d[E.fqid]=v}}return d}const ba=32,wa=33,Zc=new Uint16Array(8184);for(let y=0;y<2046;y++){let a=y+2,d=0,v=0,S=0,E=0,R=0,O=0;for(1&a?S=E=R=ba:d=v=O=ba;(a>>=1)>1;){const H=d+S>>1,Y=v+E>>1;1&a?(S=d,E=v,d=R,v=O):(d=S,v=E,S=R,E=O),R=H,O=Y}const B=4*y;Zc[B+0]=d,Zc[B+1]=v,Zc[B+2]=S,Zc[B+3]=E}const jl=new Uint16Array(2178),el=new Uint8Array(1089),Vl=new Uint16Array(1089);function Ff(y){return y===0?-.03125:y===32?.03125:0}const Vg={type:2,extent:i.aj,loadGeometry:()=>[[new i.P(0,0),new i.P(i.aj+1,0),new i.P(i.aj+1,i.aj+1),new i.P(0,i.aj+1),new i.P(0,0)]]};class wc{constructor(a,d,v,S,E){this.tileID=a,this.uid=i.a$(),this.uses=0,this.tileSize=d,this.tileZoom=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=E,S&&S.style&&(this._lastUpdatedBrightness=S.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",S&&S.transform&&(this.projection=S.transform.projection)}registerFadeDuration(a){const d=a+this.timeAdded;d<i.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,d,v){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=jg(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const E=this.buckets[S];if(E instanceof i.b1){if(this.hasSymbolBuckets=!0,!v)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const E=this.buckets[S];if(E instanceof i.b1&&E.hasRTLText){this.hasRTLText=!0,i.b2();break}}this.queryPadding=0;for(const S in this.buckets){const E=this.buckets[S],R=d.style.getOwnLayer(S);if(!R)continue;const O=R.queryRadius(E);this.queryPadding=Math.max(this.queryPadding,O)}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas),this._lastUpdatedBrightness=a.brightness}else this.collisionBoxArray=new i.b0}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(a,d,v){a&&(a.resourceTiming&&(this.resourceTiming=a.resourceTiming),this.buckets=Object.assign({},this.buckets,jg(a.buckets,d.style)),a.featureIndex&&(this.latestFeatureIndex=a.featureIndex))}getBucket(a){return this.buckets[a.fqid]}upload(a){for(const S in this.buckets){const E=this.buckets[S];E.uploadPending()&&E.upload(a)}const d=a.gl,v=this.imageAtlas;v&&!v.uploaded&&(this.imageAtlasTexture=new i.T(a,v.image,d.RGBA8,{useMipmap:!!v.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(a,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(a,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(a,d,v){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture,v),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const S=d.style.getBrightness();(this._lastUpdatedBrightness||S)&&(this._lastUpdatedBrightness&&S&&Math.abs(this._lastUpdatedBrightness-S)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==S),this._lastUpdatedBrightness=S))}queryRenderedFeatures(a,d,v,S,E,R){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const O=function(B,H){const Y=i.bn([],[.5*B.width,.5*-B.height,1]);return i.bo(Y,Y,[1,-1,0]),i.az(Y,Y,B.calculateProjMatrix(H.toUnwrapped())),Float32Array.from(Y)}(E,this.tileID);return this.latestFeatureIndex.query(a,{tilespaceGeometry:d,pixelPosMatrix:O,transform:S,availableImages:v,tileTransform:this.tileTransform})}querySourceFeatures(a,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const S=v.loadVTLayers(),E=d?d.sourceLayer:"",R=S._geojsonTileLayer||S[E];if(!R)return;const O=i.b3(d&&d.filter),{z:B,x:H,y:Y}=this.tileID.canonical,J={z:B,x:H,y:Y};for(let Q=0;Q<R.length;Q++){const ie=R.feature(Q);if(O.needGeometry){const ge=i.b4(ie,!0);if(!O.filter(new i.aa(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!O.filter(new i.aa(this.tileID.overscaledZ),ie))continue;const pe=v.getId(ie,E),de=new i.b5(ie,B,H,Y,pe);de.tile=J,a.push(de)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const v=i.b6(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let S=!1;if(this.expirationTime>v)S=!1;else if(d)if(this.expirationTime<d)S=!0;else{const E=this.expirationTime-d;E?this.expirationTime=v+Math.max(E,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(a){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&a&&this.updateBuckets(a)}updateBuckets(a,d){if(!this.latestFeatureIndex||!a.style)return;const v=this.latestFeatureIndex.loadVTLayers(),S=a.style.listImages(),E=a.style.getBrightness();for(const R in this.buckets){if(!a.style.hasLayer(R))continue;const O=this.buckets[R],B=O.layers[0],H=B.sourceLayer||"_geojsonTileLayer",Y=v[H],J=a.style.getLayerSourceCache(B);let Q={};J&&(Q=J._state.getState(H,void 0));const ie=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},pe=Object.keys(Q).length>0&&!d;pe&&!O.stateDependentLayers.length&&!d||O.update(Q,Y,S,ie,pe?O.stateDependentLayers:O.layers,d,E),(O instanceof i.b7||O instanceof i.b8)&&a._terrain&&a._terrain.enabled&&J&&O.uploadPending()&&a._terrain._clearRenderCacheForTile(J.id,this.tileID);const de=a&&a.style&&a.style.getOwnLayer(R);de&&(this.queryPadding=Math.max(this.queryPadding,de.queryRadius(O)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=i.q.now()+a}setTexture(a,d){const v=d.context,S=v.gl;this.texture=this.texture||d.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a):(this.texture=new i.T(v,a,S.RGBA8,{useMipmap:!0}),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE))}setDependencies(a,d){const v={};for(const S of d)v[S]=!0;this.dependencies[a]=v}hasDependency(a,d){for(const v of a){const S=this.dependencies[v];if(S){for(const E of d)if(S[E])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const v=i.b9(Vg,this.tileID.canonical,this.tileTransform)[0],S=new i.ba,E=new i.bb;for(let R=0;R<v.length;R++){const{x:O,y:B}=v[R];S.emplaceBack(O,B),E.emplaceBack(R)}E.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(E),this._tileDebugBuffer=a.createVertexBuffer(S,i.bc.members),this._tileDebugSegments=i.bd.simpleSegment(0,0,S.length,E.length)}_makeTileBoundsBuffers(a,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const v=i.b9(Vg,this.tileID.canonical,this.tileTransform)[0];let S,E;if(this.isRaster){const R=function(O,B){const H=i.aW(O,B),Y=Math.pow(2,O.z);for(let ge=0;ge<wa;ge++)for(let fe=0;fe<wa;fe++){const Ee=i.aX((O.x+(fe+Ff(fe))/ba)/Y),Le=i.aY((O.y+(ge+Ff(ge))/ba)/Y),je=B.project(Ee,Le),Ye=ge*wa+fe;jl[2*Ye+0]=Math.round((je.x*H.scale-H.x)*i.aj),jl[2*Ye+1]=Math.round((je.y*H.scale-H.y)*i.aj)}el.fill(0),Vl.fill(0);for(let ge=2045;ge>=0;ge--){const fe=4*ge,Ee=Zc[fe+0],Le=Zc[fe+1],je=Zc[fe+2],Ye=Zc[fe+3],$e=Ee+je>>1,Ue=Le+Ye>>1,Fe=$e+Ue-Le,Ze=Ue+Ee-$e,et=Le*wa+Ee,gt=Ye*wa+je,ht=Ue*wa+$e,kt=Math.hypot((jl[2*et+0]+jl[2*gt+0])/2-jl[2*ht+0],(jl[2*et+1]+jl[2*gt+1])/2-jl[2*ht+1])>=16;el[ht]=el[ht]||(kt?1:0),ge<1022&&(el[ht]=el[ht]||el[(Le+Ze>>1)*wa+(Ee+Fe>>1)]||el[(Ye+Ze>>1)*wa+(je+Fe>>1)])}const J=new i.aZ,Q=new i.a_;let ie=0;function pe(ge,fe){const Ee=fe*wa+ge;return Vl[Ee]===0&&(J.emplaceBack(jl[2*Ee+0],jl[2*Ee+1],ge*i.aj/ba,fe*i.aj/ba),Vl[Ee]=++ie),Vl[Ee]-1}function de(ge,fe,Ee,Le,je,Ye){const $e=ge+Ee>>1,Ue=fe+Le>>1;if(Math.abs(ge-je)+Math.abs(fe-Ye)>1&&el[Ue*wa+$e])de(je,Ye,ge,fe,$e,Ue),de(Ee,Le,je,Ye,$e,Ue);else{const Fe=pe(ge,fe),Ze=pe(Ee,Le),et=pe(je,Ye);Q.emplaceBack(Fe,Ze,et)}}return de(0,0,ba,ba,ba,0),de(ba,ba,0,0,0,ba),{vertices:J,indices:Q}}(this.tileID.canonical,d);S=R.vertices,E=R.indices}else{S=new i.aZ,E=new i.a_;for(const{x:O,y:B}of v)S.emplaceBack(O,B,0,0);const R=i.be(S.int16.subarray(0,4*S.length),void 0,4);for(let O=0;O<R.length;O+=3)E.emplaceBack(R[O],R[O+1],R[O+2])}this._tileBoundsBuffer=a.createVertexBuffer(S,i.bf.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(E),this._tileBoundsSegments=i.bd.simpleSegment(0,0,S.length,E.length)}_makeGlobeTileDebugBuffers(a,d){const v=d.projection;if(!v||v.name!=="globe"||d.freezeTileCoverage)return;const S=this.tileID.canonical,E=i.bg(S,d),R=i.bh(E),O=i.ah(d.zoom);let B;O>0&&(B=i.bi(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,S,d,R,B,O),this._makeGlobeTileDebugTextBuffer(a,S,d,R,B,O)}_globePoint(a,d,v,S,E,R,O){let B=i.bj(a,d,v);if(R){const H=1<<v.z,Y=i.ay(S.center.lng),J=i.aH(S.center.lat),Q=(v.x+.5)/H-Y;let ie=0;Q>.5?ie=-1:Q<-.5&&(ie=1);let pe=(a/i.aj+v.x)/H+ie,de=(d/i.aj+v.y)/H;pe=(pe-Y)*S._pixelsPerMercatorPixel+Y,de=(de-J)*S._pixelsPerMercatorPixel+J;const ge=[pe*S.worldSize,de*S.worldSize,0];i.ad(ge,ge,R),B=i.bk(B,ge,O)}return i.ad(B,B,E)}_makeGlobeTileDebugBorderBuffer(a,d,v,S,E,R){const O=new i.ba,B=new i.bb,H=new i.bl,Y=(Q,ie,pe,de,ge)=>{const fe=(pe-Q)/(ge-1),Ee=(de-ie)/(ge-1),Le=O.length;for(let je=0;je<ge;je++){const Ye=Q+je*fe,$e=ie+je*Ee;O.emplaceBack(Ye,$e);const Ue=this._globePoint(Ye,$e,d,v,S,E,R);H.emplaceBack(Ue[0],Ue[1],Ue[2]),B.emplaceBack(Le+je)}},J=i.aj;Y(0,0,J,0,16),Y(J,0,J,J,16),Y(J,J,0,J,16),Y(0,J,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(B),this._tileDebugBuffer=a.createVertexBuffer(O,i.bc.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(H,i.bm.members),this._tileDebugSegments=i.bd.simpleSegment(0,0,O.length,B.length)}_makeGlobeTileDebugTextBuffer(a,d,v,S,E,R){const O=i.aj/4,B=new i.ba,H=new i.a_,Y=new i.bl,J=25;H.reserve(32),B.reserve(J),Y.reserve(J);const Q=(ie,pe)=>J*ie+pe;for(let ie=0;ie<J;ie++){const pe=ie*O;for(let de=0;de<J;de++){const ge=de*O;B.emplaceBack(ge,pe);const fe=this._globePoint(ge,pe,d,v,S,E,R);Y.emplaceBack(fe[0],fe[1],fe[2])}}for(let ie=0;ie<4;ie++)for(let pe=0;pe<4;pe++){const de=Q(ie,pe),ge=Q(ie,pe+1),fe=Q(ie+1,pe),Ee=Q(ie+1,pe+1);H.emplaceBack(de,ge,fe),H.emplaceBack(fe,ge,Ee)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(H),this._tileDebugTextBuffer=a.createVertexBuffer(B,i.bc.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(Y,i.bm.members),this._tileDebugTextSegments=i.bd.simpleSegment(0,0,J,32)}destroy(a=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!a&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.bp.setPbf(i.bq);class lm extends wc{constructor(a,d,v,S,E){super(a,d,v,S,E),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(a){return this._mrt&&this._mrt.getLayer(a)}setTexture(a,d){const v=d.context,S=v.gl;this.texture=this.texture||d.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a,{premultiply:!1}):this.texture=new i.T(v,a,S.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(a=16384,d){const v=this._mrt=new i.bp(30),S=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(a-1)}});return this.entireBuffer=null,this.request=i.br(S,(E,R,O,B)=>{if(E)d(E);else try{const H=v.getHeaderLength(R);if(H>a)return void(this.request=this.fetchHeader(H,d));v.parseHeader(R),this._isHeaderLoaded=!0;let Y=0;for(const J of Object.values(v.layers))Y=Math.max(Y,J.dataIndex[J.dataIndex.length-1].lastByte);R.byteLength>=Y&&(this.entireBuffer=R),d(null,this.entireBuffer||R,O,B)}catch(H){d(H)}}),this.request}fetchBand(a,d,v){const S=this._mrt;if(!this._isHeaderLoaded||!S)return void v(new Error("Tile header is not ready"));const E=this.actor;if(!E)return void v(new Error("Can't fetch tile band without an actor"));let R;const O=(J,Q)=>{R.complete(J,Q),J?v(J):(this.updateTextureDescriptor(a,d),v(null,this.textureDescriptor&&this.textureDescriptor.img))},B=(J,Q)=>{if(J)return v(J);const ie=E.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:Q,task:R},O,void 0,!0);this._workQueue.push(()=>{ie&&ie.cancel(),R.cancel()})},H=S.getLayer(a);if(!H)return void v(new Error(`Unknown sourceLayer "${a}"`));if(H.hasDataForBand(d))return this.updateTextureDescriptor(a,d),void v(null,this.textureDescriptor?this.textureDescriptor.img:null);const Y=H.getDataRange([d]);if(R=S.createDecodingTask(Y),!R||R.tasks.length)if(this.flushQueues(),this.entireBuffer)B(null,this.entireBuffer.slice(Y.firstByte,Y.lastByte+1));else{const J=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Y.firstByte}-${Y.lastByte}`}}),Q=i.br(J,B);this._fetchQueue.push(()=>{Q.cancel(),R.cancel()})}else v(null)}updateNeeded(a,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==a)&&this.state!=="errored"}updateTextureDescriptor(a,d){if(!this._mrt)return;const v=this._mrt.getLayer(a);if(!v||!v.hasBand(d)||!v.hasDataForBand(d))return;const{bytes:S,tileSize:E,buffer:R,offset:O,scale:B}=v.getBandView(d),H=E+2*R,Y=new i.r({width:H,height:H},S),J=this.texture;J&&J instanceof i.T&&J.update(Y,{premultiply:!1}),this.textureDescriptor={layer:a,band:d,img:Y,buffer:R,offset:O,tileSize:E,format:v.pixelFormat,mix:[B,256*B,65536*B,16777216*B]}}}class wv{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,v){const S=a.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const E={value:d,timeout:void 0};if(v!==void 0&&(E.timeout=setTimeout(()=>{this.remove(a,E)},v)),this.data[S].push(E),this.order.push(S),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const v=a.wrapped().key,S=d===void 0?0:this.data[v].indexOf(d),E=this.data[v][S];return this.data[v].splice(S,1),E.timeout&&clearTimeout(E.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(E.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const v in this.data)for(const S of this.data[v])a(S.value)||d.push(S);for(const v of d)this.remove(v.value.tileID,v)}}class dd{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,v){const S=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][S]=this.stateChanges[a][S]||{},i.l(this.stateChanges[a][S],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const E in this.state[a])E!==S&&(this.deletedStates[a][E]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][S]===null){this.deletedStates[a][S]={};for(const E in this.state[a][S])v[E]||(this.deletedStates[a][S][E]=null)}else for(const E in v)this.deletedStates[a]&&this.deletedStates[a][S]&&this.deletedStates[a][S][E]===null&&delete this.deletedStates[a][S][E]}removeFeatureState(a,d,v){if(this.deletedStates[a]===null)return;const S=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&d!==void 0)this.deletedStates[a][S]!==null&&(this.deletedStates[a][S]=this.deletedStates[a][S]||{},this.deletedStates[a][S][v]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][S])for(v in this.deletedStates[a][S]={},this.stateChanges[a][S])this.deletedStates[a][S][v]=null;else this.deletedStates[a][S]=null;else this.deletedStates[a]=null}getState(a,d){const v=this.state[a]||{},S=this.stateChanges[a]||{},E=this.deletedStates[a];if(E===null)return{};if(d!==void 0){const O=String(d),B=i.l({},v[O],S[O]);if(E){const H=E[d];if(H===null)return{};for(const Y in H)delete B[Y]}return B}const R=i.l({},v,S);if(E)for(const O in E)delete R[O];return R}initializeTileState(a,d){a.refreshFeatureState(d)}coalesceChanges(a,d){const v={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const E={};for(const R in this.stateChanges[S])this.state[S][R]||(this.state[S][R]={}),i.l(this.state[S][R],this.stateChanges[S][R]),E[R]=this.state[S][R];v[S]=E}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const E={};if(this.deletedStates[S]===null)for(const R in this.state[S])E[R]={},this.state[S][R]={};else for(const R in this.deletedStates[S]){if(this.deletedStates[S][R]===null)this.state[S][R]={};else if(this.state[S][R])for(const O of Object.keys(this.deletedStates[S][R]))delete this.state[S][R][O];E[R]=this.state[S][R]}v[S]=v[S]||{},i.l(v[S],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const S in a)a[S].refreshFeatureState(d)}}class Gs extends i.E{constructor(a,d,v){super(),this.id=a,this._onlySymbols=v,d.on("data",S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new wv(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new dd,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles)if(!this._tiles[a].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,d){return a.isSymbolTile=this._onlySymbols,a.isExtraShadowCaster=this._shadowCasterTiles[a.tileID.key],this._source.loadTile(a,d)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a)}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a)}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(a),v.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Bf).map(a=>a.key)}getRenderableIds(a,d){const v=[];for(const S in this._tiles)this._isIdRenderable(+S,a,d)&&v.push(this._tiles[S]);return a?v.sort((S,E)=>{const R=S.tileID,O=E.tileID,B=new i.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle),H=new i.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return R.overscaledZ-O.overscaledZ||H.y-B.y||H.x-B.x}).map(S=>S.tileID.key):v.map(S=>S.tileID).sort(Bf).map(S=>S.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d,v){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())&&(v||!this._shadowCasterTiles[a])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,d){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=d),this._loadTile(v,this._tileLoaded.bind(this,v,a,d)))}_tileLoaded(a,d,v,S){if(S)if(a.state="errored",S.status!==404)this._source.fire(new i.z(S,{tile:a}));else{if(this._source.fire(new i.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:a})),!(a.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const E=this.map.painter.terrain;this.update(this.transform,E.getScaledDemTileSize(),!0),E.resetTileLookupCache(this.id)}else this.update(this.transform)}else a.timeAdded=i.q.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new i.A("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const d=this.getRenderableIds();for(let S=0;S<d.length;S++){const E=d[S];if(a.neighboringTiles&&a.neighboringTiles[E]){const R=this.getTileByID(E);v(a,R),v(R,a)}}function v(S,E){if(!S.dem||S.dem.borderReady)return;S.needsHillshadePrepare=!0,S.needsDEMTextureUpload=!0;let R=E.tileID.canonical.x-S.tileID.canonical.x;const O=E.tileID.canonical.y-S.tileID.canonical.y,B=Math.pow(2,S.tileID.canonical.z),H=E.tileID.key;R===0&&O===0||Math.abs(O)>1||(Math.abs(R)>1&&(Math.abs(R+B)===1?R+=B:Math.abs(R-B)===1&&(R-=B)),E.dem&&S.dem&&(S.dem.backfillBorder(E.dem,R,O),S.neighboringTiles&&S.neighboringTiles[H]&&(S.neighboringTiles[H].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,v,S){for(const E in this._tiles){let R=this._tiles[E];if(S[E]||!R.hasData()||R.tileID.overscaledZ<=d||R.tileID.overscaledZ>v)continue;let O=R.tileID;for(;R&&R.tileID.overscaledZ>d+1;){const H=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[H.key],R&&R.hasData()&&(O=H)}let B=O;for(;B.overscaledZ>d;)if(B=B.scaledTo(B.overscaledZ-1),a[B.key]){S[O.key]=O;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=a.overscaledZ-1;v>=d;v--){const S=a.scaledTo(v),E=this._getLoadedTile(S);if(E)return E}}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,d){d=d||this._source.tileSize;const v=Math.ceil(a.width/d)+1,S=Math.ceil(a.height/d)+1,E=Math.floor(v*S*5),R=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,E):E,O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,R):R;this._cache.setMaxSize(O)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const v={};for(const S in this._tiles){const E=this._tiles[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),v[E.tileID.key]=E}this._tiles=v;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(+S,this._tiles[S])}}update(a,d,v,S,E){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!v)return;this.updateCacheSize(a,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const R=this._source.type==="batched-model";let O,B=this._source.maxzoom;const H=this.map&&this.map.painter?this.map.painter._terrain:null;if(H&&H.sourceCache===this&&H.attenuationRange()){const Q=H.attenuationRange()[0],ie=Math.floor(Q)-Math.log2(H.getDemUpscale());B>ie&&(B=ie)}if(this.used||this.usedForTerrain){if(this._source.tileID)O=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new i.aM(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y));else if(this.tileCoverLift!==0){const Q=a.clone();Q.tileCoverLift=this.tileCoverLift,O=Q.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:B,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:R}),this._source.minzoom<=1&&a.projection.name==="globe"&&(O.push(new i.aM(1,0,1,0,0)),O.push(new i.aM(1,0,1,1,0)),O.push(new i.aM(1,0,1,0,1)),O.push(new i.aM(1,0,1,1,1)))}else if(O=a.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:B,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:R}),this._source.hasTile){const Q=this._source.hasTile.bind(this._source);O=O.filter(ie=>Q(ie))}}else O=[];if(O.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!wu(this._source.type)){const Q=a.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!v}),ie=Math.min(Q,this._source.maxzoom);if(R){const pe=a.extendTileCover(O,ie);for(const de of pe)O.push(de)}else if(E){const pe=a.extendTileCover(O,ie,this.transform._camera.forward());for(const de of pe)O.push(de)}else if(this.castsShadows&&S){const pe=a.extendTileCover(O,ie,S);for(const de of pe)this._shadowCasterTiles[de.key]=!0,O.push(de)}}const Y=this._updateRetainedTiles(O);if(wu(this._source.type)&&O.length!==0){const Q={},ie={},pe=Object.keys(Y);for(const ge of pe){const fe=Y[ge],Ee=this._tiles[ge];if(!Ee||Ee.fadeEndTime&&Ee.fadeEndTime<=i.q.now())continue;const Le=this.findLoadedParent(fe,Math.max(fe.overscaledZ-Gs.maxOverzooming,this._source.minzoom));Le&&(this._addTile(Le.tileID),Q[Le.tileID.key]=Le.tileID),ie[ge]=fe}const de=O[O.length-1].overscaledZ;for(const ge in this._tiles){const fe=this._tiles[ge];if(Y[ge]||!fe.hasData())continue;let Ee=fe.tileID;for(;Ee.overscaledZ>de;){Ee=Ee.scaledTo(Ee.overscaledZ-1);const Le=this._tiles[Ee.key];if(Le&&Le.hasData()&&ie[Ee.key]){Y[ge]=fe.tileID;break}}}for(const ge in Q)Y[ge]||(this._coveredTiles[ge]=!0,Y[ge]=Q[ge])}for(const Q in Y)this._tiles[Q].clearFadeHold();const J=i.bs(this._tiles,Y);for(const Q of J){const ie=this._tiles[Q];ie.hasSymbolBuckets&&!ie.holdingForFade()?ie.setHoldDuration(this.map._fadeDuration):ie.hasSymbolBuckets&&!ie.symbolFadeFinished()||this._removeTile(+Q)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const d={};if(a.length===0)return d;const v={},S=a.reduce((H,Y)=>Math.min(H,Y.overscaledZ),1/0),E=a[0].overscaledZ,R=Math.max(E-Gs.maxOverzooming,this._source.minzoom),O=Math.max(E+Gs.maxUnderzooming,this._source.minzoom),B={};for(const H of a){const Y=this._addTile(H);d[H.key]=H,Y.hasData()||S<this._source.maxzoom&&(B[H.key]=H)}this._retainLoadedChildren(B,S,O,d);for(const H of a){let Y=this._tiles[H.key];if(Y.hasData())continue;if(H.canonical.z>=this._source.maxzoom){const Q=H.children(this._source.maxzoom)[0],ie=this.getTile(Q);if(ie&&ie.hasData()){d[Q.key]=Q;continue}}else{const Q=H.children(this._source.maxzoom);if(d[Q[0].key]&&d[Q[1].key]&&d[Q[2].key]&&d[Q[3].key])continue}let J=Y.wasRequested();for(let Q=H.overscaledZ-1;Q>=R;--Q){const ie=H.scaledTo(Q);if(v[ie.key]||(v[ie.key]=!0,Y=this.getTile(ie),!Y&&J&&(Y=this._addTile(ie)),Y&&(d[ie.key]=ie,J=Y.wasRequested(),Y.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let v,S=this._tiles[a].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){v=this._loadedParentTiles[S.key];break}d.push(S.key);const E=S.scaledTo(S.overscaledZ-1);if(v=this._getLoadedTile(E),v)break;S=E}for(const E of d)this._loadedParentTiles[E]=v}}_addTile(a){let d=this._tiles[a.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[a.key]||this._reloadTile(a.key,"reloading"),d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const v=!!d;if(!v){const S=this.map?this.map.painter:null,E=this._source.tileSize*a.overscaleFactor();d=this._source.type==="raster-array"?new lm(a,E,this.transform.tileZoom,S,this._isRaster):new wc(a,E,this.transform.tileZoom,S,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,a.key,d.state))}return d.uses++,this._tiles[a.key]=d,v||this._source.fire(new i.A("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=d.getExpiryTimeout();v&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},v))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,d,v){const S=[],E=this.transform;if(!E)return S;const R=E.projection.name==="globe",O=i.ay(E.center.lng);for(const B in this._tiles){const H=this._tiles[B];if(v&&H.clearQueryDebugViz(),H.holdingForFade())continue;let Y;if(R){const J=H.tileID.canonical;if(J.z===0){const Q=[Math.abs(i.aD(O,...Sc(J,-1))-O),Math.abs(i.aD(O,...Sc(J,1))-O)];Y=[0,2*Q.indexOf(Math.min(...Q))-1]}else{const Q=[Math.abs(i.aD(O,...Sc(J,-1))-O),Math.abs(i.aD(O,...Sc(J,0))-O),Math.abs(i.aD(O,...Sc(J,1))-O)];Y=[Q.indexOf(Math.min(...Q))-1]}}else Y=[0];for(const J of Y){const Q=a.containsTile(H,E,d,J);Q&&S.push(Q)}}return S}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(a){return this._getRenderableCoordinates(a)}_getRenderableCoordinates(a,d){const v=this.getRenderableIds(a,d).map(E=>this._tiles[E].tileID),S=this.transform.projection.name==="globe";for(const E of v)E.projMatrix=this.transform.calculateProjMatrix(E.toUnwrapped()),E.expandedProjMatrix=S?this.transform.calculateProjMatrix(E.toUnwrapped(),!1,!0):E.projMatrix;return v}sortCoordinatesByDistance(a){const d=a.slice(),v=this.transform._camera.position,S=this.transform._camera.forward(),E={};for(const R of d){const O=1/(1<<R.canonical.z);E[R.key]=((R.canonical.x+.5)*O+R.wrap-v[0])*S[0]+((R.canonical.y+.5)*O-v[1])*S[1]-v[2]*S[2]}return d.sort((R,O)=>E[R.key]-E[O.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(wu(this._source.type))for(const a in this._tiles){const d=this._tiles[a];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(a,d,v){this._state.updateState(a=a||"_geojsonTileLayer",d,v)}removeFeatureState(a,d,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,v)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,v){const S=this._tiles[a];S&&S.setDependencies(d,v)}reloadTilesForDependencies(a,d){for(const v in this._tiles)this._tiles[v].hasDependency(a,d)&&this._reloadTile(+v,"reloading");this._cache.filter(v=>!v.hasDependency(a,d))}_preloadTiles(a,d){if(!this._sourceLoaded){const B=()=>{this._sourceLoaded&&(this._source.off("data",B),this._preloadTiles(a,d))};return void this._source.on("data",B)}const v=new Map,S=Array.isArray(a)?a:[a],E=this.map.painter.terrain,R=this.usedForTerrain&&E?E.getScaledDemTileSize():this._source.tileSize;for(const B of S){const H=B.coveringTiles({tileSize:R,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Y of H)v.set(Y.key,Y);this.usedForTerrain&&B.updateElevation(!1)}const O=Array.from(v.values());i.bt(O,(B,H)=>{const Y=new wc(B,this._source.tileSize*B.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Y,J=>{this._source.type==="raster-dem"&&Y.dem&&this._backfillDEM(Y),H(J,Y)})},d)}}function Bf(y,a){const d=Math.abs(2*y.wrap)-+(y.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return y.overscaledZ-a.overscaledZ||v-d||a.canonical.y-y.canonical.y||a.canonical.x-y.canonical.x}function wu(y){return y==="raster"||y==="image"||y==="video"||y==="custom"}function Sc(y,a){const d=1<<y.z;return[y.x/d+a,(y.x+1)/d+a]}Gs.maxOverzooming=10,Gs.maxUnderzooming=3;class Sv{constructor(a){this.style=a,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const a=!1,d=!1;for(const v in this.style._mergedLayers){const S=this.style._mergedLayers[v];if(S.type==="fill-extrusion")this.layers.push({layer:S,visible:a,visibilityChanged:d});else if(S.type==="model"){const E=this.style.getLayerSource(S);E&&E.type==="batched-model"&&this.layers.push({layer:S,visible:a,visibilityChanged:d})}}}onNewFrame(a){this.layersGotHidden=!1;for(const d of this.layers){const v=d.layer;let S=!1;v.type==="fill-extrusion"?S=!v.isHidden(a)&&v.paint.get("fill-extrusion-opacity")>0:v.type==="model"&&(S=!v.isHidden(a)&&v.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!S&&d.visible,d.visible=S}}updateZOffset(a,d){this.currentBuildingBuckets=[];for(const S of this.layers){const E=S.layer,R=this.style.getLayerSourceCache(E);let O=1;E.type==="fill-extrusion"&&(O=S.visible?E.paint.get("fill-extrusion-vertical-scale"):0);let B=R?R.getTile(d):null;if(!B&&R&&d.canonical.z>R.getSource().minzoom){let H=d.scaledTo(Math.min(R.getSource().maxzoom,d.overscaledZ-1));for(;H.overscaledZ>=R.getSource().minzoom&&(B=R.getTile(H),!B&&H.overscaledZ!==0);)H=H.scaledTo(H.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:B?B.getBucket(E):null,tileID:B?B.tileID:d,verticalScale:O})}a.hasAnyZOffset=!1;let v=!1;for(let S=0;S<a.symbolInstances.length;S++){const E=a.symbolInstances.get(S),R=E.zOffset,O=this._getHeightAtTileOffset(d,E.tileAnchorX,E.tileAnchorY);E.zOffset=O!==Number.NEGATIVE_INFINITY?O:R,v||R===E.zOffset||(v=!0),a.hasAnyZOffset||E.zOffset===0||(a.hasAnyZOffset=!0)}v&&(a.zOffsetBuffersNeedUpload=!0,a.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(a,d,v,S){let E=d,R=v;if(a.canonical.z!==S.canonical.z){const O=S.canonical,B=1/(1<<a.canonical.z-O.z);E=(d+a.canonical.x*i.aj)*B-O.x*i.aj|0,R=(v+a.canonical.y*i.aj)*B-O.y*i.aj|0}return{tileX:E,tileY:R}}_getHeightAtTileOffset(a,d,v){let S,E;for(let R=0;R<this.layers.length;++R){if(this.layers[R].layer.type!=="fill-extrusion")continue;const{bucket:O,tileID:B,verticalScale:H}=this.currentBuildingBuckets[R];if(!O)continue;const{tileX:Y,tileY:J}=this._mapCoordToOverlappingTile(a,d,v,B),Q=O.getHeightAtTileCoord(Y,J);Q&&Q.height!==void 0&&(Q.hidden?S=Q.height:E=Math.max(Q.height*H,E||0))}if(E!==void 0)return E;for(let R=0;R<this.layers.length;++R){const O=this.layers[R];if(O.layer.type!=="model"||!O.visible)continue;const{bucket:B,tileID:H}=this.currentBuildingBuckets[R];if(!B)continue;const{tileX:Y,tileY:J}=this._mapCoordToOverlappingTile(a,d,v,H),Q=B.getHeightAtTileCoord(Y,J);if(Q&&!Q.hidden)return Q.height===void 0&&S!==void 0?Math.min(Q.maxHeight,S)*Q.verticalScale:Q.height?Q.height*Q.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Nf(y,a){const d={};for(const v in y)v!=="ref"&&(d[v]=y[v]);return i.bu.forEach(v=>{v in a&&(d[v]=a[v])}),d}function cm(y){y=y.slice();const a=Object.create(null);for(let d=0;d<y.length;d++)a[y[d].id]=y[d];for(let d=0;d<y.length;d++)"ref"in y[d]&&(y[d]=Nf(y[d],a[y[d].ref]));return y}const si={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function tl(y,a,d){d.push({command:si.addSource,args:[y,a[y]]})}function hd(y,a,d){a.push({command:si.removeSource,args:[y]}),d[y]=!0}function um(y,a,d,v){hd(y,d,v),tl(y,a,d)}function Su(y,a,d){let v;for(v in y[d])if(y[d].hasOwnProperty(v)&&v!=="data"&&!i.bv(y[d][v],a[d][v]))return!1;for(v in a[d])if(a[d].hasOwnProperty(v)&&v!=="data"&&!i.bv(y[d][v],a[d][v]))return!1;return!0}function Tu(y,a,d,v,S,E){let R;for(R in a=a||{},y=y||{})y.hasOwnProperty(R)&&(i.bv(y[R],a[R])||d.push({command:E,args:[v,R,a[R],S]}));for(R in a)a.hasOwnProperty(R)&&!y.hasOwnProperty(R)&&(i.bv(y[R],a[R])||d.push({command:E,args:[v,R,a[R],S]}))}function Tc(y){return y.id}function bh(y,a){return y[a.id]=a,y}class dm{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=i.aD(a,0,1);let d=1,v=this._distances[d];const S=a*this.paddedLength+this.padding;for(;v<S&&d<this._distances.length;)v=this._distances[++d];const E=d-1,R=this._distances[E],O=v-R,B=O>0?(S-R)/O:0;return this.points[E].mult(1-B).add(this.points[d].mult(B))}}class jf{constructor(a,d,v){const S=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(d/v);for(let R=0;R<this.xCellCount*this.yCellCount;R++)S.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,v,S,E){this._forEachCell(d,v,S,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(E)}insertCircle(a,d,v,S){this._forEachCell(d-S,v-S,d+S,v+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(v),this.circles.push(S)}_insertBoxCell(a,d,v,S,E,R){this.boxCells[E].push(R)}_insertCircleCell(a,d,v,S,E,R){this.circleCells[E].push(R)}_query(a,d,v,S,E,R){if(v<0||a>this.width||S<0||d>this.height)return!E&&[];const O=[];if(a<=0&&d<=0&&this.width<=v&&this.height<=S){if(E)return!0;for(let B=0;B<this.boxKeys.length;B++)O.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const H=this.circles[3*B],Y=this.circles[3*B+1],J=this.circles[3*B+2];O.push({key:this.circleKeys[B],x1:H-J,y1:Y-J,x2:H+J,y2:Y+J})}return R?O.filter(R):O}return this._forEachCell(a,d,v,S,this._queryCell,O,{hitTest:E,seenUids:{box:{},circle:{}}},R),E?O.length>0:O}_queryCircle(a,d,v,S,E){const R=a-v,O=a+v,B=d-v,H=d+v;if(O<0||R>this.width||H<0||B>this.height)return!S&&[];const Y=[];return this._forEachCell(R,B,O,H,this._queryCellCircle,Y,{hitTest:S,circle:{x:a,y:d,radius:v},seenUids:{box:{},circle:{}}},E),S?Y.length>0:Y}query(a,d,v,S,E){return this._query(a,d,v,S,!1,E)}hitTest(a,d,v,S,E){return this._query(a,d,v,S,!0,E)}hitTestCircle(a,d,v,S){return this._queryCircle(a,d,v,!0,S)}_queryCell(a,d,v,S,E,R,O,B){const H=O.seenUids,Y=this.boxCells[E];if(Y!==null){const Q=this.bboxes;for(const ie of Y)if(!H.box[ie]){H.box[ie]=!0;const pe=4*ie;if(a<=Q[pe+2]&&d<=Q[pe+3]&&v>=Q[pe+0]&&S>=Q[pe+1]&&(!B||B(this.boxKeys[ie]))){if(O.hitTest)return R.push(!0),!0;R.push({key:this.boxKeys[ie],x1:Q[pe],y1:Q[pe+1],x2:Q[pe+2],y2:Q[pe+3]})}}}const J=this.circleCells[E];if(J!==null){const Q=this.circles;for(const ie of J)if(!H.circle[ie]){H.circle[ie]=!0;const pe=3*ie;if(this._circleAndRectCollide(Q[pe],Q[pe+1],Q[pe+2],a,d,v,S)&&(!B||B(this.circleKeys[ie]))){if(O.hitTest)return R.push(!0),!0;{const de=Q[pe],ge=Q[pe+1],fe=Q[pe+2];R.push({key:this.circleKeys[ie],x1:de-fe,y1:ge-fe,x2:de+fe,y2:ge+fe})}}}}}_queryCellCircle(a,d,v,S,E,R,O,B){const H=O.circle,Y=O.seenUids,J=this.boxCells[E];if(J!==null){const ie=this.bboxes;for(const pe of J)if(!Y.box[pe]){Y.box[pe]=!0;const de=4*pe;if(this._circleAndRectCollide(H.x,H.y,H.radius,ie[de+0],ie[de+1],ie[de+2],ie[de+3])&&(!B||B(this.boxKeys[pe])))return R.push(!0),!0}}const Q=this.circleCells[E];if(Q!==null){const ie=this.circles;for(const pe of Q)if(!Y.circle[pe]){Y.circle[pe]=!0;const de=3*pe;if(this._circlesCollide(ie[de],ie[de+1],ie[de+2],H.x,H.y,H.radius)&&(!B||B(this.circleKeys[pe])))return R.push(!0),!0}}}_forEachCell(a,d,v,S,E,R,O,B){const H=this._convertToXCellCoord(a),Y=this._convertToYCellCoord(d),J=this._convertToXCellCoord(v),Q=this._convertToYCellCoord(S);for(let ie=H;ie<=J;ie++)for(let pe=Y;pe<=Q;pe++)if(E.call(this,a,d,v,S,this.xCellCount*pe+ie,R,O,B))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,v,S,E,R){const O=S-a,B=E-d,H=v+R;return H*H>O*O+B*B}_circleAndRectCollide(a,d,v,S,E,R,O){const B=(R-S)/2,H=Math.abs(a-(S+B));if(H>B+v)return!1;const Y=(O-E)/2,J=Math.abs(d-(E+Y));if(J>Y+v)return!1;if(H<=B||J<=Y)return!0;const Q=H-B,ie=J-Y;return Q*Q+ie*ie<=v*v}}const fd={unknown:0,flipRequired:1,flipNotRequired:2},Ws=Math.tan(85*Math.PI/180);function Ul(y,a,d,v,S,E,R){const O=i.bz();if(d)if(E.name==="globe"){const B=i.bA(S,a);i.az(O,O,B)}else{const B=i.bB([],R);O[0]=B[0],O[1]=B[1],O[4]=B[2],O[5]=B[3],v||i.by(O,O,S.angle)}else i.az(O,S.labelPlaneMatrix,y);return O}function wh(y,a,d,v,S,E,R){const O=Ul(y,a,d,v,S,E,R);return E.name==="globe"&&d||(O[2]=O[6]=O[10]=O[14]=0),O}function Sh(y,a,d,v,S,E,R){if(d){if(E.name==="globe"){const O=Ul(y,a,d,v,S,E,R);return i.bi(O,O),i.az(O,y,O),O}{const O=i.bw(y),B=i.bx([]);return B[0]=R[0],B[1]=R[1],B[4]=R[2],B[5]=R[3],i.az(O,O,B),v||i.by(O,O,-S.angle),O}}return S.glCoordMatrix}function nl(y,a,d,v){const S=[y,a,d,1];d?i.aA(S,S,v):X0(S,S,v);const E=S[3];return S[0]/=E,S[1]/=E,S[2]/=E,S}function Kc(y,a){return Math.min(.5+y/a*.5,1.5)}function hm(y,a){const d=y[0]/y[3],v=y[1]/y[3];return d>=-a[0]&&d<=a[0]&&v>=-a[1]&&v<=a[1]}function Th(y,a,d,v,S,E,R,O,B,H){const Y=d.transform,J=v?y.textSizeData:y.iconSizeData,Q=i.bH(J,d.transform.zoom),ie=Y.projection.name==="globe",pe=[256/d.width*2+1,256/d.height*2+1],de=v?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;de.clear();let ge=null;ie&&(ge=v?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const fe=y.lineVertexArray,Ee=v?y.text.placedSymbolArray:y.icon.placedSymbolArray,Le=d.transform.width/d.transform.height;let je,Ye=!1;for(let $e=0;$e<Ee.length;$e++){const Ue=Ee.get($e),{numGlyphs:Fe,writingMode:Ze}=Ue;if(Ze!==i.bI.vertical||Ye||je===i.bI.horizontal||(Ye=!0),je=Ze,(Ue.hidden||Ze===i.bI.vertical)&&!Ye){_i(Fe,de);continue}Ye=!1;const et=new i.P(Ue.tileAnchorX,Ue.tileAnchorY);let{x:gt,y:ht,z:kt}=Y.projection.projectTilePoint(et.x,et.y,H.canonical);if(B){const[Fn,$n,On]=B(et);gt+=Fn,ht+=$n,kt+=On}const Dt=[gt,ht,kt,1];if(i.aA(Dt,Dt,a),!hm(Dt,pe)){_i(Fe,de);continue}const tn=Dt[3],dt=Kc(d.transform.getCameraToCenterDistance(Y.projection),tn),_t=i.bJ(J,Q,Ue),lt=R?_t/dt:_t*dt,Nt=nl(gt,ht,kt,S);if(Nt[3]<=0){_i(Fe,de);continue}let xt={};const Ht=i.al(y.layers[0].layout.get("text-max-angle")),Lt=Math.cos(Ht),Gt=R?null:B,Zt=rl(Ue,lt,!1,O,a,S,E,y.glyphOffsetArray,fe,de,ge,Nt,et,xt,Le,Gt,Y.projection,H,R,Lt);Ye=Zt.useVertical,Gt&&Zt.needsFlipping&&(xt={}),(Zt.notEnoughRoom||Ye||Zt.needsFlipping&&rl(Ue,lt,!0,O,a,S,E,y.glyphOffsetArray,fe,de,ge,Nt,et,xt,Le,Gt,Y.projection,H,R,Lt).notEnoughRoom)&&_i(Fe,de)}v?(y.text.dynamicLayoutVertexBuffer.updateData(de),ge&&y.text.globeExtVertexBuffer&&y.text.globeExtVertexBuffer.updateData(ge)):(y.icon.dynamicLayoutVertexBuffer.updateData(de),ge&&y.icon.globeExtVertexBuffer&&y.icon.globeExtVertexBuffer.updateData(ge))}function Eh(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge){const{lineStartIndex:fe,glyphStartIndex:Ee,segment:Le}=O,je=Ee+O.numGlyphs,Ye=fe+O.lineLength,$e=a.getoffsetX(Ee),Ue=a.getoffsetX(je-1),Fe=Ch(y*$e,d,v,S,E,R,Le,fe,Ye,B,H,Y,J,Q,!0,ie,pe,de,ge);if(!Fe)return null;const Ze=Ch(y*Ue,d,v,S,E,R,Le,fe,Ye,B,H,Y,J,Q,!0,ie,pe,de,ge);return Ze?{first:Fe,last:Ze}:null}function pd(y,a,d,v){return y===i.bI.horizontal&&Math.abs(v)>Math.abs(d)?{useVertical:!0}:y===i.bI.vertical?v>0?{needsFlipping:!0}:null:a!==fd.unknown&&function(S,E){return S===0||Math.abs(E/S)>Ws}(d,v)?a===fd.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function rl(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe,Ee,Le){const je=a/24,Ye=y.lineOffsetX*je,$e=y.lineOffsetY*je,{lineStartIndex:Ue,glyphStartIndex:Fe,numGlyphs:Ze,segment:et,writingMode:gt,flipState:ht}=y,kt=Ue+y.lineLength,Dt=tn=>{if(Y){const[Nt,xt,Ht]=tn.up,Lt=H.length;i.bK(Y,Lt+0,Nt,xt,Ht),i.bK(Y,Lt+1,Nt,xt,Ht),i.bK(Y,Lt+2,Nt,xt,Ht),i.bK(Y,Lt+3,Nt,xt,Ht)}const[dt,_t,lt]=tn.point;i.bL(H,dt,_t,lt,tn.angle)};if(Ze>1){const tn=Eh(je,O,Ye,$e,d,J,Q,y,B,E,ie,de,!1,ge,fe,Ee,Le);if(!tn)return{notEnoughRoom:!0};if(v&&!d){let[dt,_t,lt]=tn.first.point,[Nt,xt,Ht]=tn.last.point;[dt,_t]=nl(dt,_t,lt,R),[Nt,xt]=nl(Nt,xt,Ht,R);const Lt=pd(gt,ht,(Nt-dt)*pe,xt-_t);if(y.flipState=Lt&&Lt.needsFlipping?fd.flipRequired:fd.flipNotRequired,Lt)return Lt}Dt(tn.first);for(let dt=Fe+1;dt<Fe+Ze-1;dt++){const _t=Ch(je*O.getoffsetX(dt),Ye,$e,d,J,Q,et,Ue,kt,B,E,ie,de,!1,!1,ge,fe,Ee,Le);if(!_t)return H.length-=4*(dt-Fe),{notEnoughRoom:!0};Dt(_t)}Dt(tn.last)}else{if(v&&!d){const dt=nl(Q.x,Q.y,0,S),_t=Ue+et+1,lt=new i.P(B.getx(_t),B.gety(_t)),Nt=nl(lt.x,lt.y,0,S),xt=Nt[3]>0?Nt:Ug(Q,lt,dt,1,S,void 0,ge,fe.canonical),Ht=pd(gt,ht,(xt[0]-dt[0])*pe,xt[1]-dt[1]);if(y.flipState=Ht&&Ht.needsFlipping?fd.flipRequired:fd.flipNotRequired,Ht)return Ht}const tn=Ch(je*O.getoffsetX(Fe),Ye,$e,d,J,Q,et,Ue,kt,B,E,ie,de,!1,!1,ge,fe,Ee,Le);if(!tn)return{notEnoughRoom:!0};Dt(tn)}return{}}function Tv(y,a,d,v,S){const{x:E,y:R,z:O}=v.projectTilePoint(y.x,y.y,a);if(!S)return nl(E,R,O,d);const[B,H,Y]=S(y);return nl(E+B,R+H,O+Y,d)}function Ug(y,a,d,v,S,E,R,O){const B=Tv(y.sub(a)._unit()._add(y),O,S,R,E);return i.at(B,d,B),i.au(B,B),i.bF(B,d,B,v)}function Ch(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe,Ee){const Le=v?y-a:y+a;let je=Le>0?1:-1,Ye=0;v&&(je*=-1,Ye=Math.PI),je<0&&(Ye+=Math.PI);let $e=O+R+(je>0?0:1)|0,Ue=S,Fe=S,Ze=0,et=0;const gt=Math.abs(Le),ht=[],kt=[];let Dt=E,tn=Dt,dt=i.bC([]);const _t=()=>Ug(tn,Dt,Fe,gt-Ze+1,Y,Q,de,ge.canonical);for(;Ze+et<=gt;){if($e+=je,$e<O||$e>=B)return null;if(Fe=Ue,tn=Dt,ht.push(Fe),ie&&kt.push(tn),Dt=new i.P(H.getx($e),H.gety($e)),Ue=J[$e],!Ue){const On=Tv(Dt,ge.canonical,Y,de,Q);Ue=On[3]>0?J[$e]=On:_t()}Ze+=et;const Fn=i.at([],Ue,Fe),$n=i.bD(Fe,Ue);if(d&&$n>0&&et>0&&i.bE(dt,Fn)/(et*$n)<Ee)return null;et=$n,dt=Fn}pe&&Q&&(J[$e]&&(Ue=_t(),et=i.bD(Fe,Ue),dt=i.at([],Ue,Fe)),J[$e]=Ue);const lt=(gt-Ze)/et,Nt=Dt.sub(tn)._mult(lt)._add(tn),xt=i.bF([],Fe,dt,lt);let Ht=[0,0,1],Lt=dt[0],Gt=dt[1];if(fe&&(Ht=de.upVector(ge.canonical,Nt.x,Nt.y),Ht[0]!==0||Ht[1]!==0||Ht[2]!==1)){const Fn=[Ht[2],0,-Ht[0]],$n=i.bG([],Ht,Fn);i.au(Fn,Fn),i.au($n,$n),Lt=i.bE(dt,Fn),Gt=i.bE(dt,$n)}if(d){const Fn=i.bG([],Ht,dt);i.au(Fn,Fn),i.bF(xt,xt,Fn,d*je)}const Zt=Ye+Math.atan2(Gt,Lt);return ht.push(xt),ie&&kt.push(Nt),{point:xt,angle:Zt,path:ht,tilePath:kt,up:Ht}}function _i(y,a){const d=a.length,v=d+4*y;a.resize(v),a.float32.fill(-1/0,4*d,4*v)}function X0(y,a,d){const v=a[0],S=a[1];return y[0]=d[0]*v+d[4]*S+d[12],y[1]=d[1]*v+d[5]*S+d[13],y[3]=d[3]*v+d[7]*S+d[15],y}const ar=100;class Z0{constructor(a,d,v=new jf(a.width+200,a.height+200,25),S=new jf(a.width+200,a.height+200,25)){this.transform=a,this.grid=v,this.ignoredGrid=S,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+ar,this.screenBottomBoundary=a.height+ar,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=d}placeCollisionBox(a,d,v,S,E,R,O,B){let H=v.projectedAnchorX,Y=v.projectedAnchorY,J=v.projectedAnchorZ;const Q=v.elevation,ie=v.tileID,pe=a.getProjection();if(Q&&ie){const[$e,Ue,Fe]=pe.upVector(ie.canonical,v.tileAnchorX,v.tileAnchorY),Ze=pe.upVectorScale(ie.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;H+=$e*Q*Ze,Y+=Ue*Q*Ze,J+=Fe*Q*Ze}const de=this.projectAndGetPerspectiveRatio(O,H,Y,J,v.tileID,pe.name==="globe"||!!Q||this.transform.pitch>0,pe),ge=R*de.perspectiveRatio,fe=(v.x1*d+S.x-v.padding)*ge+de.point.x,Ee=(v.y1*d+S.y-v.padding)*ge+de.point.y,Le=(v.x2*d+S.x+v.padding)*ge+de.point.x,je=(v.y2*d+S.y+v.padding)*ge+de.point.y,Ye=de.perspectiveRatio<=.55||de.occluded;return!this.isInsideGrid(fe,Ee,Le,je)||!E&&this.grid.hitTest(fe,Ee,Le,je,B)||Ye?{box:[],offscreen:!1,occluded:de.occluded}:{box:[fe,Ee,Le,je],offscreen:this.isOffscreen(fe,Ee,Le,je),occluded:!1}}placeCollisionCircles(a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de){const ge=[],fe=this.transform.elevation,Ee=a.getProjection(),Le=fe?fe.getAtTileOffsetFunc(de,this.transform.center.lat,this.transform.worldSize,Ee):null,je=new i.P(v.tileAnchorX,v.tileAnchorY);let{x:Ye,y:$e,z:Ue}=Ee.projectTilePoint(je.x,je.y,de.canonical);if(Le){const[Ht,Lt,Gt]=Le(je);Ye+=Ht,$e+=Lt,Ue+=Gt}const Fe=Ee.name==="globe",Ze=this.projectAndGetPerspectiveRatio(O,Ye,$e,Ue,de,Fe||!!fe||this.transform.pitch>0,Ee),{perspectiveRatio:et}=Ze,gt=(J?R/et:R*et)/i.bO,ht=nl(Ye,$e,Ue,B),kt=v.lineOffsetX*gt,Dt=v.lineOffsetY*gt,tn=i.al(a.layers[0].layout.get("text-max-angle")),dt=Math.cos(tn),_t=Ze.signedDistanceFromCamera>0?Eh(gt,E,kt,Dt,!1,ht,je,v,S,B,{},fe&&!J?Le:null,J&&!!fe,Ee,de,J,dt):null;let lt=!1,Nt=!1,xt=!0;if(_t&&!Ze.occluded){const Ht=.5*ie*et+pe,Lt=new i.P(-100,-100),Gt=new i.P(this.screenRightBoundary,this.screenBottomBoundary),Zt=new dm,{first:Fn,last:$n}=_t,On=Fn.path.length;let Zn=[];for(let Cr=On-1;Cr>=1;Cr--)Zn.push(Fn.path[Cr]);for(let Cr=1;Cr<$n.path.length;Cr++)Zn.push($n.path[Cr]);const jn=2.5*Ht;H&&(Zn=Zn.map(([Cr,cr,Lr],vr)=>(Le&&!Fe&&(Lr=Le(vr<On-1?Fn.tilePath[On-1-vr]:$n.tilePath[vr-On+2])[2]),nl(Cr,cr,Lr,H))),Zn.some(Cr=>Cr[3]<=0)&&(Zn=[]));let ur=[];if(Zn.length>0){let Cr=1/0,cr=-1/0,Lr=1/0,vr=-1/0;for(const sr of Zn)Cr=Math.min(Cr,sr[0]),Lr=Math.min(Lr,sr[1]),cr=Math.max(cr,sr[0]),vr=Math.max(vr,sr[1]);cr>=Lt.x&&Cr<=Gt.x&&vr>=Lt.y&&Lr<=Gt.y&&(ur=[Zn.map(sr=>new i.P(sr[0],sr[1]))],(Cr<Lt.x||cr>Gt.x||Lr<Lt.y||vr>Gt.y)&&(ur=i.bM(ur,Lt.x,Lt.y,Gt.x,Gt.y)))}for(const Cr of ur){Zt.reset(Cr,.25*Ht);let cr=0;cr=Zt.length<=.5*Ht?1:Math.ceil(Zt.paddedLength/jn)+1;for(let Lr=0;Lr<cr;Lr++){const vr=Lr/Math.max(cr-1,1),sr=Zt.lerp(vr),Yr=sr.x+ar,Si=sr.y+ar;ge.push(Yr,Si,Ht,0);const Ar=Yr-Ht,Xr=Si-Ht,ci=Yr+Ht,di=Si+Ht;if(xt=xt&&this.isOffscreen(Ar,Xr,ci,di),Nt=Nt||this.isInsideGrid(Ar,Xr,ci,di),!d&&this.grid.hitTestCircle(Yr,Si,Ht,Q)&&(lt=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:lt,occluded:!1}}}}return{circles:!Y&&lt||!Nt?[]:ge,offscreen:xt,collisionDetected:lt,occluded:Ze.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,S=1/0,E=-1/0,R=-1/0;for(const Y of a){const J=new i.P(Y.x+ar,Y.y+ar);v=Math.min(v,J.x),S=Math.min(S,J.y),E=Math.max(E,J.x),R=Math.max(R,J.y),d.push(J)}const O=this.grid.query(v,S,E,R).concat(this.ignoredGrid.query(v,S,E,R)),B={},H={};for(const Y of O){const J=Y.key;if(B[J.bucketInstanceId]===void 0&&(B[J.bucketInstanceId]={}),B[J.bucketInstanceId][J.featureIndex])continue;const Q=[new i.P(Y.x1,Y.y1),new i.P(Y.x2,Y.y1),new i.P(Y.x2,Y.y2),new i.P(Y.x1,Y.y2)];i.bN(d,Q)&&(B[J.bucketInstanceId][J.featureIndex]=!0,H[J.bucketInstanceId]===void 0&&(H[J.bucketInstanceId]=[]),H[J.bucketInstanceId].push(J.featureIndex))}return H}insertCollisionBox(a,d,v,S,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:E},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,v,S,E){const R=d?this.ignoredGrid:this.grid,O={bucketInstanceId:v,featureIndex:S,collisionGroupID:E};for(let B=0;B<a.length;B+=4)R.insertCircle(O,a[B],a[B+1],a[B+2])}projectAndGetPerspectiveRatio(a,d,v,S,E,R,O){const B=[d,v,S,1];let H=!1;S||this.transform.pitch>0?(i.aA(B,B,a),this.fogState&&E&&O.name!=="globe"&&(H=function(Q,ie,pe,de,ge,fe){const Ee=fe.calculateFogTileMatrix(ge),Le=[ie,pe,de];return i.ad(Le,Le,Ee),xn(Q,i.ae(Le),fe.pitch,fe._fov)}(this.fogState,d,v,S,E.toUnwrapped(),this.transform)>.9)):X0(B,B,a);const Y=B[3];return{point:new i.P((B[0]/Y+1)/2*this.transform.width+ar,(-B[1]/Y+1)/2*this.transform.height+ar),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/Y*.5,1.5),signedDistanceFromCamera:Y,occluded:R&&B[2]>Y||H}}isOffscreen(a,d,v,S){return v<ar||a>=this.screenRightBoundary||S<ar||d>this.screenBottomBoundary}isInsideGrid(a,d,v,S){return v>=0&&a<this.gridRightBoundary&&S>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=i.bx([]);return i.bo(a,a,[-100,-100,0]),a}}function $g(y,a,d){const v=a.createTileMatrix(y,y.worldSize,d.toUnwrapped());return i.az(new Float32Array(16),y.projMatrix,v)}function fm(y,a,d){if(a.projection.name===d.projection.name)return y.projMatrix;const v=d.clone();return v.setProjection(a.projection),$g(v,a.getProjection(),y)}function pm(y,a,d){return a.name===d.projection.name?y.projMatrix:$g(d,a,y)}class $l{constructor(a,d,v,S){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):S&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Ah{constructor(a,d,v,S,E,R=!1){this.text=new $l(a?a.text:null,d,v,E),this.icon=new $l(a?a.icon:null,d,S,E),this.clipped=R}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class md{constructor(a,d,v,S=!1){this.text=a,this.icon=d,this.skipFade=v,this.clipped=S}}class Jn{constructor(){this.invProjMatrix=i.bz(),this.viewportMatrix=i.bz(),this.circles=[]}}class Bi{constructor(a,d,v,S,E){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=S,this.tileID=E}}class Ai{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[a]}}function Fa(y,a,d,v,S){const{horizontalAlign:E,verticalAlign:R}=i.bV(y),O=-(E-.5)*a,B=-(R-.5)*d,H=i.bU(y,v);return new i.P(O+H[0]*S,B+H[1]*S)}function Eu(y,a,d,v,S){const E=new i.P(y,a);return d&&E._rotate(v?S:-S),E}class Ci{constructor(a,d,v,S,E,R){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new Z0(this.transform,E),this.buildingIndex=R,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Ai(v),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,d,v,S,E=1){const R=v.getBucket(d),O=v.latestFeatureIndex;if(!R||!O||d.fqid!==R.layerIds[0])return;const B=R.layers[0].layout,H=R.layers[0].paint,Y=v.collisionBoxArray,J=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Q=v.tileSize/i.aj,ie=v.tileID.toUnwrapped();this.transform.setProjection(R.projection);const pe=(de=v.tileID,ge=R.getProjection(),fe=this.transform,ge.name===this.projection?fe.calculateProjMatrix(de.toUnwrapped()):$g(fe,ge,de));var de,ge,fe;const Ee=B.get("text-pitch-alignment")==="map",Le=B.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const je=d.dynamicFilter(),Ye=d.dynamicFilterNeedsFeature(),$e=this.transform.calculatePixelsToTileUnitsMatrix(v),Ue=wh(pe,v.tileID.canonical,Ee,Le,this.transform,R.getProjection(),$e);let Fe=null;if(Ee){const _t=Sh(pe,v.tileID.canonical,Ee,Le,this.transform,R.getProjection(),$e);Fe=i.az([],this.transform.labelPlaneMatrix,_t)}let Ze=null;je&&v.latestFeatureIndex&&(Ze={unwrappedTileID:ie,dynamicFilter:je,dynamicFilterNeedsFeature:Ye}),this.retainedQueryData[R.bucketInstanceId]=new Bi(R.bucketInstanceId,O,R.sourceLayerIndex,R.index,v.tileID);const[et,gt]=R.layers[0].layout.get("text-size-scale-range"),ht=i.aD(E,et,gt),[kt,Dt]=B.get("icon-size-scale-range"),tn=i.aD(E,kt,Dt),dt={bucket:R,layout:B,paint:H,posMatrix:pe,textLabelPlaneMatrix:Ue,labelToScreenMatrix:Fe,clippingData:Ze,scale:J,textPixelRatio:Q,holdingForFade:v.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:i.bH(R.textSizeData,this.transform.zoom,ht),partiallyEvaluatedIconSize:i.bH(R.iconSizeData,this.transform.zoom,tn),collisionGroup:this.collisionGroups.get(R.sourceID),latestFeatureIndex:v.latestFeatureIndex};if(S)for(const _t of R.sortKeyRanges){const{sortKey:lt,symbolInstanceStart:Nt,symbolInstanceEnd:xt}=_t;a.push({sortKey:lt,symbolInstanceStart:Nt,symbolInstanceEnd:xt,parameters:dt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:dt})}attemptAnchorPlacement(a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe,Ee){const{textOffset0:Le,textOffset1:je,crossTileID:Ye}=Q,$e=[Le,je],Ue=Fa(a,v,S,$e,E),Fe=this.collisionIndex.placeCollisionBox(pe,E,d,Eu(Ue.x,Ue.y,R,O,this.transform.angle),J,B,H,Y.predicate);if(ge){const Ze=pe.getSymbolInstanceIconSize(Ee,this.transform.zoom,Q.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(pe,Ze,ge,Eu(Ue.x,Ue.y,R,O,this.transform.angle),J,B,H,Y.predicate).box.length===0)return}if(Fe.box.length>0){let Ze;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ye]&&this.prevPlacement.placements[Ye]&&this.prevPlacement.placements[Ye].text&&(Ze=this.prevPlacement.variableOffsets[Ye].anchor),this.variableOffsets[Ye]={textOffset:$e,width:v,height:S,anchor:a,textScale:E,prevAnchor:Ze},this.markUsedJustification(pe,a,Q,de),pe.allowVerticalPlacement&&(this.markUsedOrientation(pe,de,Q),this.placedOrientations[Ye]=de),{shift:Ue,placedGlyphBoxes:Fe}}}placeLayerBucketPart(a,d,v,S,E=1){const{bucket:R,layout:O,paint:B,posMatrix:H,textLabelPlaneMatrix:Y,labelToScreenMatrix:J,clippingData:Q,textPixelRatio:ie,holdingForFade:pe,collisionBoxArray:de,partiallyEvaluatedTextSize:ge,partiallyEvaluatedIconSize:fe,collisionGroup:Ee,latestFeatureIndex:Le}=a.parameters,je=O.get("text-optional"),Ye=O.get("icon-optional"),$e=O.get("text-allow-overlap"),Ue=O.get("icon-allow-overlap"),Fe=O.get("text-rotation-alignment")==="map",Ze=O.get("text-pitch-alignment")==="map",et=B.get("symbol-z-offset"),gt=O.get("symbol-elevation-reference")==="sea",[ht,kt]=O.get("text-size-scale-range"),[Dt,tn]=O.get("icon-size-scale-range"),dt=i.aD(E,ht,kt),_t=i.aD(E,Dt,tn);this.transform.setProjection(R.projection);let lt=$e&&(Ue||!R.hasIconData()||Ye),Nt=Ue&&($e||!R.hasTextData()||je);const xt=!et.isConstant();!R.collisionArrays&&de&&R.deserializeCollisionBoxes(de),v&&S&&R.updateCollisionDebugBuffers(this.transform.zoom,de,dt,_t);const Ht=(Lt,Gt,Zt)=>{const{crossTileID:Fn,numVerticalGlyphVertices:$n}=Lt;let On=null;if(Q&&Q.dynamicFilterNeedsFeature||xt){const ii=this.retainedQueryData[R.bucketInstanceId];On=Le.loadFeature({featureIndex:Lt.featureIndex,bucketIndex:ii.bucketIndex,sourceLayerIndex:ii.sourceLayerIndex,layoutVertexArrayOffset:0})}if(Q&&!(0,Q.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},On,this.retainedQueryData[R.bucketInstanceId].tileID.canonical,new i.P(Lt.tileAnchorX,Lt.tileAnchorY),this.transform.calculateDistanceTileData(Q.unwrappedTileID)))return this.placements[Fn]=new md(!1,!1,!1,!0),void d.add(Fn);const Zn=et.evaluate(On,{});if(d.has(Fn))return;if(pe)return void(this.placements[Fn]=new md(!1,!1,!1));let jn=!1,ur=!1,Cr=!0,cr=!1,Lr=!1,vr=null,sr={box:null,offscreen:null,occluded:null},Yr={box:null},Si=null,Ar=null,Xr=null,ci=0,di=0,Ti=0;Zt.textFeatureIndex?ci=Zt.textFeatureIndex:Lt.useRuntimeCollisionCircles&&(ci=Lt.featureIndex),Zt.verticalTextFeatureIndex&&(di=Zt.verticalTextFeatureIndex);const Wi=ii=>{ii.tileID=this.retainedQueryData[R.bucketInstanceId].tileID;const pi=this.transform.elevation;ii.elevation=gt?Zn:Zn+(pi?pi.getAtTileOffset(ii.tileID,ii.tileAnchorX,ii.tileAnchorY):0),ii.elevation+=Lt.zOffset},wo=Zt.textBox;if(wo){Wi(wo);const ii=mi=>{let Xi=i.bI.horizontal;if(R.allowVerticalPlacement&&!mi&&this.prevPlacement){const ts=this.prevPlacement.placedOrientations[Fn];ts&&(this.placedOrientations[Fn]=ts,Xi=ts,this.markUsedOrientation(R,Xi,Lt))}return Xi},pi=(mi,Xi)=>{if(R.allowVerticalPlacement&&$n>0&&Zt.verticalTextBox){for(const ts of R.writingModes)if(ts===i.bI.vertical?(sr=Xi(),Yr=sr):sr=mi(),sr&&sr.box&&sr.box.length)break}else sr=mi()};if(O.get("text-variable-anchor")){let mi=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Fn]){const ji=this.prevPlacement.variableOffsets[Fn];mi.indexOf(ji.anchor)>0&&(mi=mi.filter(Bo=>Bo!==ji.anchor),mi.unshift(ji.anchor))}const Xi=(ji,Bo,ki)=>{const $o=R.getSymbolInstanceTextSize(ge,Lt,this.transform.zoom,Gt),Ra=(ji.x2-ji.x1)*$o+2*ji.padding,hl=(ji.y2-ji.y1)*$o+2*ji.padding,Da=Lt.hasIconTextFit&&!Ue?Bo:null;Da&&Wi(Da);let fl={box:[],offscreen:!1,occluded:!1};const Vc=$e?2*mi.length:mi.length;for(let pl=0;pl<Vc;++pl){const Pl=this.attemptAnchorPlacement(mi[pl%mi.length],ji,Ra,hl,$o,Fe,Ze,ie,H,Ee,pl>=mi.length,Lt,Gt,R,ki,Da,ge,fe);if(Pl&&(fl=Pl.placedGlyphBoxes,fl&&fl.box&&fl.box.length)){jn=!0,vr=Pl.shift;break}}return fl};pi(()=>Xi(wo,Zt.iconBox,i.bI.horizontal),()=>{const ji=Zt.verticalTextBox;return ji&&Wi(ji),R.allowVerticalPlacement&&!(sr&&sr.box&&sr.box.length)&&$n>0&&ji?Xi(ji,Zt.verticalIconBox,i.bI.vertical):{box:null,offscreen:null,occluded:null}}),sr&&(jn=sr.box,Cr=sr.offscreen,cr=sr.occluded);const ts=ii(!(!sr||!sr.box));if(!jn&&this.prevPlacement){const ji=this.prevPlacement.variableOffsets[Fn];ji&&(this.variableOffsets[Fn]=ji,this.markUsedJustification(R,ji.anchor,Lt,ts))}}else{const mi=(Xi,ts)=>{const ji=R.getSymbolInstanceTextSize(ge,Lt,this.transform.zoom,Gt,E),Bo=this.collisionIndex.placeCollisionBox(R,ji,Xi,new i.P(0,0),$e,ie,H,Ee.predicate);return Bo&&Bo.box&&Bo.box.length&&(this.markUsedOrientation(R,ts,Lt),this.placedOrientations[Fn]=ts),Bo};pi(()=>mi(wo,i.bI.horizontal),()=>{const Xi=Zt.verticalTextBox;return R.allowVerticalPlacement&&$n>0&&Xi?(Wi(Xi),mi(Xi,i.bI.vertical)):{box:null,offscreen:null,occluded:null}}),ii(!!(sr&&sr.box&&sr.box.length))}}if(Si=sr,jn=Si&&Si.box&&Si.box.length>0,Cr=Si&&Si.offscreen,cr=Si&&Si.occluded,Lt.useRuntimeCollisionCircles){const ii=R.text.placedSymbolArray.get(Lt.centerJustifiedTextSymbolIndex>=0?Lt.centerJustifiedTextSymbolIndex:Lt.verticalPlacedTextSymbolIndex),pi=i.bJ(R.textSizeData,ge,ii),mi=O.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(R,$e,ii,R.lineVertexArray,R.glyphOffsetArray,pi,H,Y,J,v,Ze,Ee.predicate,Lt.collisionCircleDiameter*pi/i.bO,mi,this.retainedQueryData[R.bucketInstanceId].tileID),jn=$e||Ar.circles.length>0&&!Ar.collisionDetected,Cr=Cr&&Ar.offscreen,cr=Ar.occluded}if(Zt.iconFeatureIndex&&(Ti=Zt.iconFeatureIndex),Zt.iconBox){const ii=pi=>{Wi(pi);const mi=Lt.hasIconTextFit&&vr?Eu(vr.x,vr.y,Fe,Ze,this.transform.angle):new i.P(0,0),Xi=R.getSymbolInstanceIconSize(fe,this.transform.zoom,Lt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(R,Xi,pi,mi,Ue,ie,H,Ee.predicate)};Yr&&Yr.box&&Yr.box.length&&Zt.verticalIconBox?(Xr=ii(Zt.verticalIconBox),ur=Xr.box.length>0):(Xr=ii(Zt.iconBox),ur=Xr.box.length>0),Cr=Cr&&Xr.offscreen,Lr=Xr.occluded}const Yi=je||Lt.numHorizontalGlyphVertices===0&&$n===0,Sr=Ye||Lt.numIconVertices===0;if(Yi||Sr?Sr?Yi||(ur=ur&&jn):jn=ur&&jn:ur=jn=ur&&jn,jn&&Si&&Si.box&&this.collisionIndex.insertCollisionBox(Si.box,O.get("text-ignore-placement"),R.bucketInstanceId,Yr&&Yr.box&&di?di:ci,Ee.ID),ur&&Xr&&this.collisionIndex.insertCollisionBox(Xr.box,O.get("icon-ignore-placement"),R.bucketInstanceId,Ti,Ee.ID),Ar&&(jn&&this.collisionIndex.insertCollisionCircles(Ar.circles,O.get("text-ignore-placement"),R.bucketInstanceId,ci,Ee.ID),v)){const ii=R.bucketInstanceId;let pi=this.collisionCircleArrays[ii];pi===void 0&&(pi=this.collisionCircleArrays[ii]=new Jn);for(let mi=0;mi<Ar.circles.length;mi+=4)pi.circles.push(Ar.circles[mi+0]),pi.circles.push(Ar.circles[mi+1]),pi.circles.push(Ar.circles[mi+2]),pi.circles.push(Ar.collisionDetected?1:0)}const Ni=R.projection.name!=="globe";lt=lt&&(Ni||!cr),Nt=Nt&&(Ni||!Lr),this.placements[Fn]=new md(jn||lt,ur||Nt,Cr||R.justReloaded),d.add(Fn)};if(R.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(R,this.retainedQueryData[R.bucketInstanceId].tileID),R.elevationType==="road"&&R.updateRoadElevation(),R.updateZOffset(),R.sortFeaturesByY){const Lt=R.getSortedSymbolIndexes(this.transform.angle);for(let Gt=Lt.length-1;Gt>=0;--Gt){const Zt=Lt[Gt];Ht(R.symbolInstances.get(Zt),Zt,R.collisionArrays[Zt])}R.hasAnyZOffset&&i.w(`${R.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(R.hasAnyZOffset){const Lt=R.getSortedIndexesByZOffset();for(let Gt=0;Gt<Lt.length;++Gt){const Zt=Lt[Gt];Ht(R.symbolInstances.get(Zt),Zt,R.collisionArrays[Zt])}}else for(let Lt=a.symbolInstanceStart;Lt<a.symbolInstanceEnd;Lt++)Ht(R.symbolInstances.get(Lt),Lt,R.collisionArrays[Lt]);if(v&&R.bucketInstanceId in this.collisionCircleArrays){const Lt=this.collisionCircleArrays[R.bucketInstanceId];i.bi(Lt.invProjMatrix,H),Lt.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1}markUsedJustification(a,d,v,S){const{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:B,crossTileID:H}=v,Y=i.bT(d),J=S===i.bI.vertical?B:Y==="left"?E:Y==="center"?R:Y==="right"?O:-1;E>=0&&(a.text.placedSymbolArray.get(E).crossTileID=J>=0&&E!==J?0:H),R>=0&&(a.text.placedSymbolArray.get(R).crossTileID=J>=0&&R!==J?0:H),O>=0&&(a.text.placedSymbolArray.get(O).crossTileID=J>=0&&O!==J?0:H),B>=0&&(a.text.placedSymbolArray.get(B).crossTileID=J>=0&&B!==J?0:H)}markUsedOrientation(a,d,v){const S=d===i.bI.horizontal||d===i.bI.horizontalOnly?d:0,E=d===i.bI.vertical?d:0,{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:B,verticalPlacedTextSymbolIndex:H}=v,Y=a.text.placedSymbolArray;R>=0&&(Y.get(R).placedOrientation=S),O>=0&&(Y.get(O).placedOrientation=S),B>=0&&(Y.get(B).placedOrientation=S),H>=0&&(Y.get(H).placedOrientation=E)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const S=d?d.symbolFadeChange(a):1,E=d?d.opacities:{},R=d?d.variableOffsets:{},O=d?d.placedOrientations:{};for(const B in this.placements){const H=this.placements[B],Y=E[B];Y?(this.opacities[B]=new Ah(Y,S,H.text,H.icon,null,H.clipped),v=v||H.text!==Y.text.placed||H.icon!==Y.icon.placed):(this.opacities[B]=new Ah(null,S,H.text,H.icon,H.skipFade,H.clipped),v=v||H.text||H.icon)}for(const B in E){const H=E[B];if(!this.opacities[B]){const Y=new Ah(H,S,!1,!1);Y.isHidden()||(this.opacities[B]=Y,v=v||H.text.placed||H.icon.placed)}}for(const B in R)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=R[B]);for(const B in O)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=O[B]);v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d,v,S){const E=new Set;for(const R of d){const O=R.getBucket(a);O&&R.latestFeatureIndex&&a.fqid===O.layerIds[0]&&(this.updateBucketOpacities(O,E,R,R.collisionBoxArray,v,S,R.tileID,a.scope),O.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(O,R.tileID),O.elevationType==="road"&&O.updateRoadElevation(),O.updateZOffset())}}updateBucketOpacities(a,d,v,S,E,R,O,B){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const H=a.layers[0].layout,Y=a.layers[0].paint,J=!!a.layers[0].dynamicFilter(),Q=new Ah(null,0,!1,!1,!0),ie=H.get("text-allow-overlap"),pe=H.get("icon-allow-overlap"),de=H.get("text-variable-anchor"),ge=H.get("text-rotation-alignment")==="map",fe=H.get("text-pitch-alignment")==="map",Ee=Y.get("symbol-z-offset"),Le=H.get("symbol-elevation-reference")==="sea",je=!Ee.isConstant(),Ye=new Ah(null,0,ie&&(pe||!a.hasIconData()||H.get("icon-optional")),pe&&(ie||!a.hasTextData()||H.get("text-optional")),!0);!a.collisionArrays&&S&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(S);const $e=(Fe,Ze,et)=>{for(let gt=0;gt<Ze/4;gt++)Fe.opacityVertexArray.emplaceBack(et)};let Ue=0;R&&a.updateReplacement(O,R);for(let Fe=0;Fe<a.symbolInstances.length;Fe++){const Ze=a.symbolInstances.get(Fe),{numHorizontalGlyphVertices:et,numVerticalGlyphVertices:gt,crossTileID:ht,numIconVertices:kt,tileAnchorX:Dt,tileAnchorY:tn}=Ze;let dt=null;const _t=this.retainedQueryData[a.bucketInstanceId];je&&Ze&&_t&&(dt=v.latestFeatureIndex.loadFeature({featureIndex:Ze.featureIndex,bucketIndex:_t.bucketIndex,sourceLayerIndex:_t.sourceLayerIndex,layoutVertexArrayOffset:0}));const lt=Ee.evaluate(dt,{}),Nt=d.has(ht);let xt=this.opacities[ht];Nt?xt=Q:xt||(xt=Ye,this.opacities[ht]=xt),d.add(ht);const Ht=et>0||gt>0,Lt=kt>0,Gt=this.placedOrientations[ht],Zt=Gt===i.bI.vertical,Fn=Gt===i.bI.horizontal||Gt===i.bI.horizontalOnly;!Ht&&!Lt||xt.isHidden()||Ue++;let $n=!1;if((Ht||Lt)&&R)for(const On of a.activeReplacements){if(i.bP(On,E,i.bQ.Symbol,B)||On.min.x>Dt||Dt>On.max.x||On.min.y>tn||tn>On.max.y)continue;const Zn=i.bR(Dt,tn,O.canonical,On.footprintTileId.canonical);if($n=i.bS(Zn,On.footprint),$n)break}if(Ht){const On=$n?ql:gd(xt.text);$e(a.text,et,Zt?ql:On),$e(a.text,gt,Fn?ql:On);const Zn=xt.text.isHidden(),{leftJustifiedTextSymbolIndex:jn,centerJustifiedTextSymbolIndex:ur,rightJustifiedTextSymbolIndex:Cr,verticalPlacedTextSymbolIndex:cr}=Ze,Lr=a.text.placedSymbolArray,vr=Zn||Zt?1:0;jn>=0&&(Lr.get(jn).hidden=vr),ur>=0&&(Lr.get(ur).hidden=vr),Cr>=0&&(Lr.get(Cr).hidden=vr),cr>=0&&(Lr.get(cr).hidden=Zn||Fn?1:0);const sr=this.variableOffsets[ht];sr&&this.markUsedJustification(a,sr.anchor,Ze,Gt);const Yr=this.placedOrientations[ht];Yr&&(this.markUsedJustification(a,"left",Ze,Yr),this.markUsedOrientation(a,Yr,Ze))}if(Lt){const On=$n?ql:gd(xt.icon),{placedIconSymbolIndex:Zn,verticalPlacedIconSymbolIndex:jn}=Ze,ur=a.icon.placedSymbolArray,Cr=xt.icon.isHidden()?1:0;Zn>=0&&($e(a.icon,kt,Zt?ql:On),ur.get(Zn).hidden=Cr),jn>=0&&($e(a.icon,Ze.numVerticalIconVertices,Fn?ql:On),ur.get(jn).hidden=Cr)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const On=a.collisionArrays[Fe];if(On){let Zn=new i.P(0,0),jn=!0;if(On.textBox||On.verticalTextBox){if(de){const Cr=this.variableOffsets[ht];Cr?(Zn=Fa(Cr.anchor,Cr.width,Cr.height,Cr.textOffset,Cr.textScale),ge&&Zn._rotate(fe?this.transform.angle:-this.transform.angle)):jn=!1}J&&(jn=!xt.clipped),On.textBox&&Mh(a.textCollisionBox.collisionVertexArray,xt.text.placed,!jn||Zt,lt,Le,Zn.x,Zn.y),On.verticalTextBox&&Mh(a.textCollisionBox.collisionVertexArray,xt.text.placed,!jn||Fn,lt,Le,Zn.x,Zn.y)}const ur=jn&&!!(!Fn&&On.verticalIconBox);On.iconBox&&Mh(a.iconCollisionBox.collisionVertexArray,xt.icon.placed,ur,lt,Le,Ze.hasIconTextFit?Zn.x:0,Ze.hasIconTextFit?Zn.y:0),On.verticalIconBox&&Mh(a.iconCollisionBox.collisionVertexArray,xt.icon.placed,!ur,lt,Le,Ze.hasIconTextFit?Zn.x:0,Ze.hasIconTextFit?Zn.y:0)}}}if(a.fullyClipped=Ue===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Fe.invProjMatrix,a.placementViewportMatrix=Fe.viewportMatrix,a.collisionCircleArray=Fe.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function Mh(y,a,d,v,S,E,R){y.emplaceBack(a?1:0,d?1:0,E||0,R||0,v,S?1:0),y.emplaceBack(a?1:0,d?1:0,E||0,R||0,v,S?1:0),y.emplaceBack(a?1:0,d?1:0,E||0,R||0,v,S?1:0),y.emplaceBack(a?1:0,d?1:0,E||0,R||0,v,S?1:0)}const mm=Math.pow(2,25),gm=Math.pow(2,24),Sa=Math.pow(2,17),Jo=Math.pow(2,16),D1=Math.pow(2,9),ym=Math.pow(2,8),Ev=Math.pow(2,1);function gd(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const a=y.placed?1:0,d=Math.floor(127*y.opacity);return d*mm+a*gm+d*Sa+a*Jo+d*D1+a*ym+d*Ev+a}const ql=0;class qg{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,d,v,S,E,R){const O=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(O,S,a[this._currentTileIndex],this._sortAcrossTiles,R),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((B,H)=>B.sortKey-H.sortKey));this._currentPartIndex<O.length;){const B=O[this._currentPartIndex];if(d.placeLayerBucketPart(B,this._seenCrossTileIDs,v,B.symbolInstanceStart===0,R),this._currentPartIndex++,E())return!0}return!1}}class sa{constructor(a,d,v,S,E,R,O,B,H){this.placement=new Ci(a,E,R,O,B,H),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(a,d,v,S,E){const R=i.q.now(),O=()=>{const B=i.q.now()-R;return!this._forceFullPlacement&&B>2};for(;this._currentPlacementIndex>=0;){const B=d[a[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=H)&&(!B.maxzoom||B.maxzoom>H)){const Y=B,J=Y.layout.get("symbol-z-elevate"),Q=Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,ie=Y.layout.get("symbol-z-order"),pe=ie==="viewport-y"||ie==="auto"&&!(ie!=="viewport-y"&&Q),de=Y.layout.get("text-allow-overlap")||Y.layout.get("icon-allow-overlap")||Y.layout.get("text-ignore-placement")||Y.layout.get("icon-ignore-placement"),ge=pe&&de,fe=this._inProgressLayer=this._inProgressLayer||new qg(Y),Ee=i.C(B.source,B.scope);if(fe.continuePlacement(J||ge?S[Ee]:v[Ee],this.placement,this._showCollisionBoxes,B,O,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Hl=512/i.aj/2;class Ta{constructor(a,d,v){this.tileID=a,this.bucketInstanceId=v,this.index=new i.bW(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=a.canonical.x*i.aj,E=a.canonical.y*i.aj;for(let R=0;R<d.length;R++){const{key:O,crossTileID:B,tileAnchorX:H,tileAnchorY:Y}=d.get(R),J=Math.floor((S+H)*Hl),Q=Math.floor((E+Y)*Hl);this.index.add(J,Q),this.keys.push(O),this.crossTileIDs.push(B)}this.index.finish()}findMatches(a,d,v){const S=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),E=Hl/Math.pow(2,d.canonical.z-this.tileID.canonical.z),R=d.canonical.x*i.aj,O=d.canonical.y*i.aj;for(let B=0;B<a.length;B++){const H=a.get(B);if(H.crossTileID)continue;const{key:Y,tileAnchorX:J,tileAnchorY:Q}=H,ie=Math.floor((R+J)*E),pe=Math.floor((O+Q)*E),de=this.index.range(ie-S,pe-S,ie+S,pe+S).sort((ge,fe)=>ge-fe);for(const ge of de){const fe=this.crossTileIDs[ge];if(this.keys[ge]===Y&&!v.has(fe)){v.add(fe),H.crossTileID=fe;break}}}}}class Cv{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const v in this.indexes){const S=this.indexes[v],E={};for(const R in S){const O=S[R];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),E[O.tileID.key]=O}this.indexes[v]=E}this.lng=a}addBucket(a,d,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let E=0;E<d.symbolInstances.length;E++)d.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const S=this.usedCrossTileIDs[a.overscaledZ];for(const E in this.indexes){const R=this.indexes[E];if(Number(E)>a.overscaledZ)for(const O in R){const B=R[O];B.tileID.isChildOf(a)&&B.findMatches(d.symbolInstances,a,S)}else{const O=R[a.scaledTo(Number(E)).key];O&&O.findMatches(d.symbolInstances,a,S)}}for(let E=0;E<d.symbolInstances.length;E++){const R=d.symbolInstances.get(E);R.crossTileID||(R.crossTileID=v.generate(),S.add(R.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Ta(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const v of d.crossTileIDs)this.usedCrossTileIDs[a].delete(v)}removeStaleBuckets(a){let d=!1;for(const v in this.indexes){const S=this.indexes[v];for(const E in S)a[S[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,S[E]),delete S[E],d=!0)}return d}}class Lo{constructor(){this.layerIndexes={},this.crossTileIDs=new Cv,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,v,S){let E=this.layerIndexes[a.fqid];E===void 0&&(E=this.layerIndexes[a.fqid]=new Rh);let R=!1;const O={};S.name!=="globe"&&E.handleWrapJump(v);for(const B of d){const H=B.getBucket(a);H&&a.fqid===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(B.tileID,H,this.crossTileIDs)&&(R=!0),O[H.bucketInstanceId]=!0)}return E.removeStaleBuckets(O)&&(R=!0),R}pruneUnusedLayers(a){const d={};a.forEach(v=>{d[v]=!0});for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const Ea=771;class Nr{constructor(a,d,v,S){this.blendFunction=a,this.blendColor=d,this.mask=v,this.blendEquation=S}}Nr.Replace=[1,0,1,0],Nr.disabled=new Nr(Nr.Replace,i.am.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,i.am.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,Ea,1,Ea],i.am.transparent,[!0,!0,!0,!0]),Nr.alphaBlendedNonPremultiplied=new Nr([770,Ea,770,Ea],i.am.transparent,[!0,!0,!0,!0]),Nr.multiply=new Nr([774,0,774,0],i.am.transparent,[!0,!0,!0,!0]);class Bn{constructor(a,d,v){this.func=a,this.mask=d,this.range=v}}Bn.ReadOnly=!1,Bn.ReadWrite=!0,Bn.disabled=new Bn(519,Bn.ReadOnly,[0,1]);const Vf=7680;class yr{constructor(a,d,v,S,E,R){this.test=a,this.ref=d,this.mask=v,this.fail=S,this.depthFail=E,this.pass=R}}yr.disabled=new yr({func:519,mask:0},0,0,Vf,Vf,Vf);const Ec=1029,Qc=2305;class xr{constructor(a,d,v){this.enable=a,this.mode=d,this.frontFace=v}}function vm(y,a){const d=i.c1(y,3);i.c3(y,a),i.c7(y,3,d)}function Gl(y,a){const d=i.bY([]);return i.bZ(d,d,-a),i.b_(d,d,-y),d}function Av(y,a){const d=[y[0],y[1],0],v=[a[0],a[1],0];if(i.ae(d)>=1e-15){const R=i.au([],d);i.b$(v,R,i.bE(v,R)),a[0]=v[0],a[1]=v[1]}const S=i.bG([],a,y);if(i.c0(S)<1e-15)return null;const E=Math.atan2(-S[1],S[0]);return Gl(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),E)}xr.disabled=new xr(!1,Ec,Qc),xr.backCCW=new xr(!0,Ec,Qc),xr.backCW=new xr(!0,Ec,2304),xr.frontCW=new xr(!0,1028,2304),xr.frontCCW=new xr(!0,1028,Qc);class Uf{constructor(a,d){this.position=a,this.orientation=d}get position(){return this._position}set position(a){if(a){const d=a instanceof i.ac?a:new i.ac(a[0],a[1],a[2]);this._renderWorldCopies&&(d.x=i.bX(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(a,d){if(this.orientation=null,!this.position)return;const v=this.position,S=this._elevation?this._elevation.getAtPointOrZero(i.ac.fromLngLat(a)):0,E=i.ac.fromLngLat(a,S),R=[E.x-v.x,E.y-v.y,E.z-v.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Av(R,d)}setPitchBearing(a,d){this.orientation=Gl(i.al(a),i.al(-d))}}class ks{constructor(a,d){this._transform=i.bx([]),this.orientation=d,this.position=a}get mercatorPosition(){const a=this.position;return new i.ac(a[0],a[1],a[2])}get position(){const a=i.c1(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var d;a&&i.c7(this._transform,3,[(d=a)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||i.bY([]),a&&vm(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,d){this._orientation=Gl(a,d),vm(this._transform,this._orientation)}forward(){const a=i.c1(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=i.c1(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=i.c1(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,d){const v=new Float64Array(16);return i.bi(v,this.getWorldToCamera(a,d)),v}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(a,d,v){const S=this.position;i.b$(S,S,-a);const E=new Float64Array(16);return i.bn(E,[v,v,v]),i.bo(E,E,S),E[10]*=d,E}getWorldToCamera(a,d){const v=new Float64Array(16),S=new Float64Array(4),E=this.position;return i.c2(S,this._orientation),i.b$(E,E,-a),i.c3(v,S),i.bo(v,v,E),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=d,v[9]*=d,v[10]*=d,v[11]*=d,v}getCameraToClipPerspective(a,d,v,S){const E=new Float64Array(16);return i.c4(E,a,d,v,S),E}getCameraToClipOrthographic(a,d,v,S,E,R){const O=new Float64Array(16);return i.c5(O,a,d,v,S,E,R),O}getDistanceToElevation(a,d=!1){const v=a===0?0:i.c6(a,d?i.aY(this.position[1]):this.position[1]),S=this.forward();return(v-this.position[2])/S[2]}clone(){return new ks([...this.position],[...this.orientation])}}const aa={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Dh{constructor(a=0,d=0,v=0,S=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=v,this.right=S}interpolate(a,d,v){return d.top!=null&&a.top!=null&&(this.top=i.ai(a.top,d.top,v)),d.bottom!=null&&a.bottom!=null&&(this.bottom=i.ai(a.bottom,d.bottom,v)),d.left!=null&&a.left!=null&&(this.left=i.ai(a.left,d.left,v)),d.right!=null&&a.right!=null&&(this.right=i.ai(a.right,d.right,v)),this}getCenter(a,d){const v=i.aD((this.left+a-this.right)/2,0,a),S=i.aD((this.top+d-this.bottom)/2,0,d);return new i.P(v,S)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Dh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Cu=15;class Ph{constructor(a,d,v,S,E,R,O){this.tileSize=512,this._renderWorldCopies=E===void 0||E,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=S??60,this.setProjection(R),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new i.cd(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Dh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new ks,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const a=new Ph(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a._allowWorldUnderZoom=this._allowWorldUnderZoom,a}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Cu}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(a,d=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||v)&&this._updateCameraOnTerrain(),(a||v)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return i.aF(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=i.ce(this.projectionOptions);const v=this.getProjection(),S=!i.bv(d,v);return S&&this._calcMatrices(),this.mercatorFromTransition=!1,S}setOrthographicProjectionAtLowPitch(a){return this._orthographicProjectionAtLowPitch!==a&&(this._orthographicProjectionAtLowPitch=a,this._calcMatrices(),!0)}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.ce({name:"mercator"});const d=a!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.c6(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bX(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const d=-a*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=i.cf(),i.cg(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=i.aD(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=i.al(a),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(a){this._tileCoverLift!==a&&(this._tileCoverLift=a)}_updateCameraOnTerrain(){const a=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&a===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||a===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const v=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&v.exaggeration()&&this._centerAltitudeValidForExaggeration!==v.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*v.exaggeration(),this._centerAltitudeValidForExaggeration=v.exaggeration()):(this._centerAltitude=a||0,this._centerAltitudeValidForExaggeration=v.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let S=0,E=0;for(let R=0;R<d.length;R++){const O=new i.P(d[R][0]*this.width,v+d[R][1]*(this.height-v)),B=a.pointCoordinate(O);if(!B)continue;const H=1/Math.hypot(B[0]-this._camera.position[0],B[1]-this._camera.position[1]);S+=B[3]*H,E+=H}return E===0?NaN:S/E}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*d,S=this._mercatorZfromZoom(a),E=this._mercatorZfromZoom(this._maxZoom),R=Math.max(S-v,E);this._setZoom(this._zoomFromMercatorZ(R))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let v;v=a.z<this._camera.position[2]?[d.x,d.y,d.z]:[a.x,a.y,a.z];const S=i.ae(i.at([],this._camera.position,v));return i.aD(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let d=!1;if(a.orientation&&!i.ch(a.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(a.orientation)),a.position){const v=[a.position.x,a.position.y,a.position.z];i.ci(v,this._camera.position)||(this._setCameraPosition(v),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,d=new Uf;return d.position=new i.ac(a[0],a[1],a[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(a){if(!i.cj(a))return!1;i.ck(a,a);const d=i.cl([],[0,0,-1],a),v=i.cl([],[0,-1,0],a);if(v[2]<0)return!1;const S=Av(d,v);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(a){const d=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;a[2]=i.aD(a[2],S/v,S/d),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,v){this._unmodified=!1,this._edgeInsets.interpolate(a,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new i.cm(0,a)];if(this.renderWorldCopies){const v=this.pointCoordinate(new i.P(0,0)),S=this.pointCoordinate(new i.P(this.width,0)),E=this.pointCoordinate(new i.P(this.width,this.height)),R=this.pointCoordinate(new i.P(0,this.height)),O=Math.floor(Math.min(v.x,S.x,E.x,R.x)),B=Math.floor(Math.max(v.x,S.x,E.x,R.x)),H=1;for(let Y=O-H;Y<=B+H;Y++)Y!==0&&d.push(new i.cm(Y,a))}return d}isLODDisabled(a){return(!a||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(a,d,v){let S=[];const E=v!=null,R=!E;if(R&&this.zoom<d||E&&v[0]===0&&v[1]===0)return S;const O=new Set,B=(Y,J,Q,ie,pe)=>{const de=i.cK(J,Y,Q,ie,pe);O.has(de)||(S.push(new i.aM(Y,J,Q,ie,pe)),O.add(de))};for(let Y=0;Y<a.length;Y++){const J=a[Y];if(R&&J.canonical.z!==d)continue;const Q=J.canonical,ie=J.overscaledZ,pe=J.wrap,de=1<<Q.z,ge=Q.x+1<de,fe=Q.x>0,Ee=Q.y+1<de,Le=Q.y>0,je=J.wrap-(fe?0:1),Ye=J.wrap+(ge?0:1),$e=fe?Q.x-1:de-1,Ue=ge?Q.x+1:0;if(E)v[0]<0?(B(ie,Ye,Q.z,Ue,Q.y),v[1]<0&&Ee&&(B(ie,pe,Q.z,Q.x,Q.y+1),B(ie,Ye,Q.z,Ue,Q.y+1)),v[1]>0&&Le&&(B(ie,pe,Q.z,Q.x,Q.y-1),B(ie,Ye,Q.z,Ue,Q.y-1))):v[0]>0?(B(ie,je,Q.z,$e,Q.y),v[1]<0&&Ee&&(B(ie,pe,Q.z,Q.x,Q.y+1),B(ie,je,Q.z,$e,Q.y+1)),v[1]>0&&Le&&(B(ie,pe,Q.z,Q.x,Q.y-1),B(ie,je,Q.z,$e,Q.y-1))):v[1]<0&&Ee?B(ie,pe,Q.z,Q.x,Q.y+1):Le&&B(ie,pe,Q.z,Q.x,Q.y-1);else{const Fe=J.visibleQuadrants;1&Fe&&(B(ie,je,Q.z,$e,Q.y),Le&&(B(ie,pe,Q.z,Q.x,Q.y-1),B(ie,je,Q.z,$e,Q.y-1))),2&Fe&&(B(ie,Ye,Q.z,Ue,Q.y),Le&&(B(ie,pe,Q.z,Q.x,Q.y-1),B(ie,Ye,Q.z,Ue,Q.y-1))),4&Fe&&(B(ie,je,Q.z,$e,Q.y),Ee&&(B(ie,pe,Q.z,Q.x,Q.y+1),B(ie,je,Q.z,$e,Q.y+1))),8&Fe&&(B(ie,Ye,Q.z,Ue,Q.y),Ee&&(B(ie,pe,Q.z,Q.x,Q.y+1),B(ie,Ye,Q.z,Ue,Q.y+1)))}}const H=[];for(const Y of S)S.some(J=>Y.isChildOf(J))||H.push(Y);if(S=H.filter(Y=>!a.some(J=>!!(Y.overscaledZ<d&&J.isChildOf(Y))||Y.equals(J)||Y.isChildOf(J))),R){const Y=1<<d,J=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Q=[Y*J.x,Y*J.y],ie=4,pe=ie*ie;S=S.filter(de=>{const ge=de.canonical.x+.5-Q[0],fe=de.canonical.y+.5-Q[1];return ge*ge+fe*fe<pe})}return S}coveringTiles(a){let d=this.coveringZoomLevel(a);const v=d,S=this.elevation&&this.elevation.exaggeration(),E=S&&!a.isTerrainDEM,R=this.projection.name==="mercator";if(a.minzoom!==void 0&&d<a.minzoom)return[];a.maxzoom!==void 0&&d>a.maxzoom&&(d=a.maxzoom);const O=this.locationCoordinate(this.center),B=this.center.lat,H=1<<d,Y=[H*O.x,H*O.y,0],J=this.projection.name==="globe",Q=!J,ie=i.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,Q),pe=J?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),de=H*i.c6(1,this.center.lat),ge=this._camera.position[2]/i.c6(1,this.center.lat),fe=[H*pe.x,H*pe.y,ge*(Q?1:de)],Ee=J||S,Le=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),je=this.isLODDisabled(!0)?d:0;let Ye;if(this._elevation&&a.isTerrainDEM)Ye=1e4*this._elevation.exaggeration();else if(this._elevation){const lt=this._elevation.getMinMaxForVisibleTiles();Ye=lt?lt.max:this._centerAltitude}else Ye=this._centerAltitude;const $e=a.isTerrainDEM?-Ye:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ue=this.projection.isReprojectedInTileSpace?i.co(this):1,Fe=lt=>{const xt=new i.ac(lt.x+25e-6,lt.y,lt.z),Ht=new i.ac(lt.x,lt.y+25e-6,lt.z),Lt=lt.toLngLat(),Gt=xt.toLngLat(),Zt=Ht.toLngLat(),Fn=this.locationCoordinate(Lt),$n=this.locationCoordinate(Gt),On=this.locationCoordinate(Zt),Zn=Math.hypot($n.x-Fn.x,$n.y-Fn.y),jn=Math.hypot(On.x-Fn.x,On.y-Fn.y);return Math.sqrt(Zn*jn)*Ue/25e-6},Ze=lt=>{const Nt=Ye,xt=$e;return{aabb:i.cr(this,H,0,0,0,lt,xt,Nt,this.projection),zoom:0,x:0,y:0,minZ:xt,maxZ:Nt,wrap:lt,fullyVisible:!1}},et=[];let gt=[];const ht=d,kt=a.reparseOverscaled?v:d,Dt=(ge-this._centerAltitude)*de,tn=lt=>{if(!this._elevation||!lt.tileID||!R)return;const Nt=this._elevation.getMinMaxForTile(lt.tileID),xt=lt.aabb;Nt?(xt.min[2]=Nt.min,xt.max[2]=Nt.max,xt.center[2]=(xt.min[2]+xt.max[2])/2):(lt.shouldSplit=_t(lt),lt.shouldSplit||(xt.min[2]=xt.max[2]=xt.center[2]=this._centerAltitude))},dt=(lt,Nt)=>{if(.707*Nt<lt)return 1;const xt=Nt/lt;return xt/(1.4144271570014144+(Math.pow(1.1,xt-1.4144271570014144+1)-1)/(1.1-1)-1)},_t=lt=>{if(lt.zoom<je)return!0;if(lt.zoom===ht)return!1;if(lt.shouldSplit!=null)return lt.shouldSplit;const Nt=lt.aabb.distanceX(fe),xt=lt.aabb.distanceY(fe);let Ht=Dt,Lt=1;if(J){Ht=lt.aabb.distanceZ(fe);const jn=Math.pow(2,lt.zoom),ur=i.aY((lt.y+1)/jn),Cr=i.aY(lt.y/jn),cr=Math.min(Math.max(B,ur),Cr),Lr=i.cP(cr)/i.cP(B);if(Lt=cr===B?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Lr/this._mercatorScaleRatio),this.zoom<=i.cL&&lt.zoom===ht-1&&Lr>=.9)return!0}else if(E&&(Ht=lt.aabb.distanceZ(fe)*de),this.projection.isReprojectedInTileSpace&&v<=5){const jn=Math.pow(2,lt.zoom),ur=Fe(new i.ac((lt.x+.5)/jn,(lt.y+.5)/jn));Lt=ur>.85?1:ur}if(!R){const jn=Math.sqrt(Nt*Nt+xt*xt+Ht*Ht);let ur=(1<<ht-lt.zoom)*Le*Lt;return ur*=dt(Math.max(Ht,Dt),jn),jn<ur}let Gt=Number.MAX_VALUE,Zt=0;const Fn=lt.aabb.getCorners(),$n=[];for(const jn of Fn){i.at($n,jn,fe),J||(E?$n[2]*=de:$n[2]=Dt);const ur=i.bE($n,this._camera.forward());ur<Gt&&(Gt=ur,Zt=Math.abs($n[2]))}let On=(1<<ht-lt.zoom)*Le*Lt;if(On*=dt(Math.max(Zt,Dt),Gt),Gt<On)return!0;const Zn=lt.aabb.closestPoint(Y);return Zn[0]===Y[0]&&Zn[1]===Y[1]};if(this.renderWorldCopies)for(let lt=1;lt<=3;lt++)et.push(Ze(-lt)),et.push(Ze(lt));for(et.push(Ze(0));et.length>0;){const lt=et.pop(),Nt=lt.x,xt=lt.y;let Ht=lt.fullyVisible;const Lt=()=>this.projection.name==="globe"&&(lt.y===0||lt.y===(1<<lt.zoom)-1);if(!Ht){let Gt=Ee?lt.aabb.intersects(ie):lt.aabb.intersectsFlat(ie);if(Gt===0&&Lt()){const Zt=new i.cp(lt.zoom,Nt,xt);Gt=i.cq(this,H,Zt,!0).intersects(ie)}if(Gt===0)continue;Ht=Gt===2}if(lt.zoom!==ht&&_t(lt))for(let Gt=0;Gt<4;Gt++){const Zt=(Nt<<1)+Gt%2,Fn=(xt<<1)+(Gt>>1),$n={aabb:R?lt.aabb.quadrant(Gt):i.cr(this,H,lt.zoom+1,Zt,Fn,lt.wrap,lt.minZ,lt.maxZ,this.projection),zoom:lt.zoom+1,x:Zt,y:Fn,wrap:lt.wrap,fullyVisible:Ht,tileID:void 0,shouldSplit:void 0,minZ:lt.minZ,maxZ:lt.maxZ};E&&!J&&($n.tileID=new i.aM(lt.zoom+1===ht?kt:lt.zoom+1,lt.wrap,lt.zoom+1,Zt,Fn),tn($n)),et.push($n)}else{const Gt=lt.zoom===ht?kt:lt.zoom;if(a.minzoom&&a.minzoom>Gt)continue;let Zt=0;if(!Ht){let Zn=Ee?lt.aabb.intersectsPrecise(ie):lt.aabb.intersectsPreciseFlat(ie);if(Zn===0&&Lt()){const jn=new i.cp(lt.zoom,Nt,xt);Zn=i.cq(this,H,jn,!0).intersectsPrecise(ie)}if(Zn===0)continue;if(a.calculateQuadrantVisibility)if(ie.containsPoint(lt.aabb.center))Zt=15;else for(let jn=0;jn<4;jn++)lt.aabb.quadrant(jn).intersects(ie)!==0&&(Zt|=1<<jn)}const Fn=Y[0]-(.5+Nt+(lt.wrap<<lt.zoom))*(1<<d-lt.zoom),$n=Y[1]-.5-xt,On=lt.tileID?lt.tileID:new i.aM(Gt,lt.wrap,lt.zoom,Nt,xt);a.calculateQuadrantVisibility&&(On.visibleQuadrants=Zt),gt.push({tileID:On,distanceSq:Fn*Fn+$n*$n})}}if(this.fogCullDistSq){const lt=this.fogCullDistSq,Nt=this.horizonLineFromTop();gt=gt.filter(xt=>{const Ht=[0,0,0,1],Lt=[i.aj,i.aj,0,1],Gt=this.calculateFogTileMatrix(xt.tileID.toUnwrapped());i.aA(Ht,Ht,Gt),i.aA(Lt,Lt,Gt);const Zt=i.cs([],Ht,Lt),Fn=i.ct([],Ht,Lt),$n=i.cM(Zt,Fn);if($n===0)return!0;let On=!1;const Zn=this._elevation;if(Zn&&$n>lt&&Nt!==0){const jn=this.calculateProjMatrix(xt.tileID.toUnwrapped());let ur;a.isTerrainDEM||(ur=Zn.getMinMaxForTile(xt.tileID)),ur||(ur={min:$e,max:Ye});const Cr=i.cu(this.rotation),cr=[Cr[0]*i.aj,Cr[1]*i.aj,ur.max];i.ad(cr,cr,jn),On=(1-cr[1])*this.height*.5<Nt}return $n<lt||On})}return gt.sort((lt,Nt)=>lt.distanceSq-Nt.distanceSq).map(lt=>lt.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=i.aD(a.lat,-i.cv,i.cv),v=this.projection.project(a.lng,d);return new i.P(v.x*this.worldSize,v.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.c6(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,d){let v,S;const E=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;v=(d.x-E.x)/O,S=(d.y-E.y)/O}else{const O=this.pointCoordinate(d),B=this.pointCoordinate(E);v=O.x-B.x,S=O.y-B.y}const R=this.locationCoordinate(a);this.setLocation(new i.ac(R.x-v,R.y-S))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a,d){return this.projection.locationPoint(this,a,d)}locationPoint3D(a,d){return this.projection.locationPoint(this,a,d,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a,d){return this.coordinateLocation(this.pointCoordinate3D(a,d))}locationCoordinate(a,d){const v=d?i.c6(d,a.lat):void 0,S=this.projection.project(a.lng,a.lat);return new i.ac(S.x,S.y,v)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,d){const v=d??this._centerAltitude,S=[a.x,a.y,0,1],E=[a.x,a.y,1,1];i.aA(S,S,this.pixelMatrixInverse),i.aA(E,E,this.pixelMatrixInverse);const R=E[3];i.cw(S,S,1/S[3]),i.cw(E,E,1/R);const O=S[2],B=E[2];return{p0:S,p1:E,t:O===B?0:(v-O)/(B-O)}}screenPointToMercatorRay(a){const d=[a.x,a.y,0,1],v=[a.x,a.y,1,1];return i.aA(d,d,this.pixelMatrixInverse),i.aA(v,v,this.pixelMatrixInverse),i.cw(d,d,1/d[3]),i.cw(v,v,1/v[3]),d[2]=i.c6(d[2],this._center.lat)*this.worldSize,v[2]=i.c6(v[2],this._center.lat)*this.worldSize,i.cw(d,d,1/this.worldSize),i.cw(v,v,1/this.worldSize),new i.av([d[0],d[1],d[2]],i.au([],i.at([],v,d)))}rayIntersectionCoordinate(a){const{p0:d,p1:v,t:S}=a,E=i.c6(d[2],this._center.lat),R=i.c6(v[2],this._center.lat);return new i.ac(i.ai(d[0],v[0],S)/this.worldSize,i.ai(d[1],v[1],S)/this.worldSize,i.ai(E,R,S))}pointCoordinate(a,d=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,d)}pointCoordinate3D(a,d){if(!this.elevation)return this.pointCoordinate(a,d);let v=this.projection.pointCoordinate3D(this,a.x,a.y);if(v)return new i.ac(v[0],v[1],v[2]);let S=0,E=this.horizonLineFromTop();if(a.y>E)return this.pointCoordinate(a,d);const R=.02*E,O=a.clone();for(let B=0;B<10&&E-S>R;B++){O.y=i.ai(S,E,.66);const H=this.projection.pointCoordinate3D(this,O.x,O.y);H?(E=O.y,v=H):S=O.y}return v?new i.ac(v[0],v[1],v[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=i.cx)return!this.isPointAboveHorizon(a);const d=this.pointCoordinate(a);return d.y>=0&&d.y<=1}_coordinatePoint(a,d){const v=d&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,S=[a.x*this.worldSize,a.y*this.worldSize,v+a.toAltitude(),1];return i.aA(S,S,this.pixelMatrix),S[3]>0?new i.P(S[0]/S[3],S[1]/S[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:d}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,E=this.pointLocation3D(new i.P(d,a)),R=this.pointLocation3D(new i.P(S,a)),O=this.pointLocation3D(new i.P(S,v)),B=this.pointLocation3D(new i.P(d,v));let H=Math.min(E.lng,R.lng,O.lng,B.lng),Y=Math.max(E.lng,R.lng,O.lng,B.lng),J=Math.min(E.lat,R.lat,O.lat,B.lat),Q=Math.max(E.lat,R.lat,O.lat,B.lat);const ie=Math.pow(2,-this.zoom)/16*270,pe=this.projection.name==="globe"?1:4,de=(ge,fe,Ee,Le,je)=>{const Ye=(ge+Ee)/2,$e=(fe+Le)/2,Ue=new i.P(Ye,$e),{lng:Fe,lat:Ze}=this.pointLocation3D(Ue),et=Math.max(0,H-Fe,J-Ze,Fe-Y,Ze-Q);H=Math.min(H,Fe),Y=Math.max(Y,Fe),J=Math.min(J,Ze),Q=Math.max(Q,Ze),(je<pe||et>ie)&&(de(ge,fe,Ye,$e,je+1),de(Ye,$e,Ee,Le,je+1))};if(de(d,a,S,a,1),de(S,a,S,v,1),de(S,v,d,v,1),de(d,v,d,a,1),this.projection.name==="globe"){const[ge,fe]=i.cy(this);ge?(Q=90,Y=180,H=-180):fe&&(J=-90,Y=180,H=-180)}return new i.aG(new i.cd(H,J),new i.cd(Y,Q))}_getBoundsRectangular(a,d){const{top:v,left:S}=this._edgeInsets,E=this.height-this._edgeInsets.bottom,R=this.width-this._edgeInsets.right,O=new i.P(S,v),B=new i.P(R,v),H=new i.P(R,E),Y=new i.P(S,E);let J=this.pointCoordinate(O,a),Q=this.pointCoordinate(B,a);const ie=this.pointCoordinate(H,d),pe=this.pointCoordinate(Y,d),de=(ge,fe)=>(fe.y-ge.y)/(fe.x-ge.x);return J.y>1&&Q.y>=0?J=new i.ac((1-pe.y)/de(pe,J)+pe.x,1):J.y<0&&Q.y<=1&&(J=new i.ac(-pe.y/de(pe,J)+pe.x,0)),Q.y>1&&J.y>=0?Q=new i.ac((1-ie.y)/de(ie,Q)+ie.x,1):Q.y<0&&J.y<=1&&(Q=new i.ac(-ie.y/de(ie,Q)+ie.x,0)),new i.aG().extend(this.coordinateLocation(J)).extend(this.coordinateLocation(Q)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(ie))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=a.visibleDemTiles.reduce((v,S)=>{if(S.dem){const E=S.dem.tree;v.min=Math.min(v.min,E.minimums[0]),v.max=Math.max(v.max,E.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*a.exaggeration(),d.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,v=this.height/2-d*(1-this._horizonShift);return a?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-i.cv,this.maxLat=i.cv,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.ay(this.minLng)*this.tileSize,this.worldMaxX=i.ay(this.maxLng)*this.tileSize,this.worldMinY=i.aH(this.maxLat)*this.tileSize,this.worldMaxY=i.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,d){return this.projection.createTileMatrix(this,d,a)}calculateDistanceTileData(a){const d=a.key,v=this._distanceTileDataCache;if(v[d])return v[d];const S=a.canonical,E=1/this.height,R=this.cameraWorldSize,O=R/this.zoomScale(S.z),B=(S.x+Math.pow(2,S.z)*a.wrap)*O,H=S.y*O,Y=this.point;Y.x*=R/this.worldSize,Y.y*=R/this.worldSize;const J=this.angle,Q=Math.sin(-J),ie=-Math.cos(-J);return v[d]={bearing:[Q,ie],center:[(Y.x-B)*E,(Y.y-H)*E],scale:O/i.aj*E},v[d]}calculateFogTileMatrix(a){const d=a.key,v=this._fogTileMatrixCache;if(v[d])return v[d];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return i.az(S,this.worldToFogMatrix,S),v[d]=new Float32Array(S),v[d]}calculateProjMatrix(a,d=!1,v=!1){const S=a.key;let E;if(E=v?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,E[S])return E[S];const R=this.calculatePosMatrix(a,this.worldSize);let O;return O=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:v?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,i.az(R,O,R),E[S]=new Float32Array(R),E[S]}calculatePixelsToTileUnitsMatrix(a){const d=a.tileID.key,v=this._pixelsToTileUnitsCache;if(v[d])return v[d];const S=i.cz(a,this);return v[d]=S,v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,d=i.bn([],[a,a,a]);return i.az(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const d=i.c6(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(d),S=this._camera.forward(),E=i.c6(1,this._center.lat);v[2]/=E,S[2]/=E,i.au(S,S);const R=a.raycast(v,S,a.exaggeration());if(R){const O=i.bF([],v,S,R),B=new i.ac(O[0],O[1],i.c6(O[2],i.aY(O[1]))),H=(B.z+i.ae([B.x-v[0],B.y-v[1],B.z-v[2]*E]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(H),this._centerAltitude=B.toAltitude(),this._center=this.coordinateLocation(B),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const d=this._elevation,v=i.c6(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(v),E=d.getAtPointOrZero(new i.ac(...S)),R=this.pixelsPerMeter/this.worldSize*E,O=this._minimumHeightOverTerrain(),B=S[2]-R;if(B<=O)if(B<0||a){const H=this.locationCoordinate(this._center,this._centerAltitude),Y=[S[0],S[1],H.z-S[2]],J=i.ae(Y);Y[2]-=(O-B)/this._pixelsPerMercatorPixel;const Q=i.ae(Y);if(Q===0)return;i.b$(Y,Y,J/Q*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],H.z*this._pixelsPerMercatorPixel-Y[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const Q=this.center;return Q.lat=i.aD(Q.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(Q.lng=i.aD(Q.lng,this.minLng,this.maxLng)),this.center=Q,void(this._constraining=!1)}const d=this._unmodified,{x:v,y:S}=this.point;let E=0,R=v,O=S;const B=this.width/2,H=this.height/2,Y=this.worldMinY*this.scale,J=this.worldMaxY*this.scale;if(S-H<Y&&(O=Y+H),S+H>J&&(O=J-H),J-Y<this.height&&(E=Math.max(E,this.height/(J-Y)),O=(J+Y)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Q=this.worldMinX*this.scale,ie=this.worldMaxX*this.scale,pe=this.worldSize/2-(Q+ie)/2;R=(v+pe+this.worldSize)%this.worldSize-pe,R-B<Q&&(R=Q+B),R+B>ie&&(R=ie-B),ie-Q<this.width&&(E=Math.max(E,this.width/(ie-Q)),R=(ie+Q)/2)}R===v&&O===S||this._allowWorldUnderZoom||(this.center=this.unproject(new i.P(R,O))),E&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(E)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.projection.name==="globe",v=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.c6(1,this.center.lat)/i.c6(1,i.cN));const S=i.cA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,S),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E=this.projection.zAxisUnit==="meters"?v:1,R=this._camera.getWorldToCamera(this.worldSize,E);let O;const B=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(B[8]=2*-a.x/this.width,B[9]=2*a.y/this.height,this.isOrthographic){let Ze=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),et=Ze*this.aspect,gt=-et,ht=-Ze;et-=a.x,gt-=a.x,Ze+=a.y,ht+=a.y,O=this._camera.getCameraToClipOrthographic(gt,et,ht,Ze,this._nearZ,this._farZ),((kt,Dt,tn,dt)=>{for(let _t=0;_t<16;_t++)kt[_t]=i.ai(Dt[_t],tn[_t],dt)})(O,O,B,i.cO(this.pitch>=Cu?1:this.pitch/Cu))}else O=B;const H=i.cB([],B,R);let Y=i.cB([],O,R);if(this.projection.isReprojectedInTileSpace){const Ze=this.locationCoordinate(this.center),et=i.bx([]);i.bo(et,et,[Ze.x*this.worldSize,Ze.y*this.worldSize,0]),i.az(et,et,i.cC(this)),i.bo(et,et,[-Ze.x*this.worldSize,-Ze.y*this.worldSize,0]),i.az(Y,Y,et),i.az(H,H,et),this.inverseAdjustmentMatrix=i.cD(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.cE([],Y,[this.worldSize,this.worldSize,this.worldSize/E,1]),this.projMatrix=Y,this.invProjMatrix=i.bi(new Float64Array(16),this.projMatrix),d){const Ze=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ze[8]=2*-a.x/this.width,Ze[9]=2*a.y/this.height,this.expandedFarZProjMatrix=i.cB([],Ze,R)}else this.expandedFarZProjMatrix=this.projMatrix;const J=i.bi([],O);this.frustumCorners=i.cF.fromInvProjectionMatrix(J,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const Q=new Float32Array(16);i.bx(Q),i.cE(Q,Q,[1,-1,1]),i.cG(Q,Q,this._pitch),i.by(Q,Q,this.angle);const ie=i.c4(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.bw(ie);const pe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ie[8]=2*-a.x/this.width,ie[9]=2*(a.y+pe)/this.height,this.skyboxMatrix=i.az(Q,ie,Q);const de=this.point,ge=de.x,fe=de.y,Ee=this.width%2/2,Le=this.height%2/2,je=Math.cos(this.angle),Ye=Math.sin(this.angle),$e=ge-Math.round(ge)+je*Ee+Ye*Le,Ue=fe-Math.round(fe)+je*Le+Ye*Ee,Fe=new Float64Array(Y);if(i.bo(Fe,Fe,[$e>.5?$e-1:$e,Ue>.5?Ue-1:Ue,0]),this.alignedProjMatrix=Fe,Y=i.bz(),i.cE(Y,Y,[this.width/2,-this.height/2,1]),i.bo(Y,Y,[1,-1,0]),this.labelPlaneMatrix=Y,Y=i.bz(),i.cE(Y,Y,[1,-1,1]),i.bo(Y,Y,[-1,-1,0]),i.cE(Y,Y,[2/this.width,2/this.height,1]),this.glCoordMatrix=Y,this.pixelMatrix=i.az(new Float64Array(16),this.labelPlaneMatrix,H),this._calcFogMatrices(),this._distanceTileDataCache={},Y=i.bi(new Float64Array(16),this.pixelMatrix),!Y)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Y,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.cH(this);const Ze=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.ad(Ze,Ze,R),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Y;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,v=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,E=[a,a,d];i.b$(E,E,S),i.b$(v,v,-1),i.cI(v,v,E);const R=i.bz();i.bo(R,R,v),i.cE(R,R,E),this.mercatorFogMatrix=R,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,d,S)}_computeCameraPosition(a){const d=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),S=this.point,E=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-a/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-v[0]*E,S.y/this.worldSize-v[1]*E,a/this.worldSize*this._centerAltitude-v[2]*E]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],S=a[2];let E=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(E=Math.min((d-v)/S,1)),this._camera.position=i.bF([],this._camera.position,a,E),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,d=this._camera.forward(),{pitch:v,bearing:S}=this._camera.getPitchBearing(),E=i.c6(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,R=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.al(this._maxPitch)),O=Math.max((a[2]-E)/Math.cos(v),R),B=this._zoomFromMercatorZ(O);i.bF(a,a,d,O),this._pitch=i.aD(v,i.al(this.minPitch),i.al(this.maxPitch)),this.angle=i.bX(S,-Math.PI,Math.PI),this._setZoom(i.aD(B,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.ac(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let d=0,v=i.cx,S=0,E=1/0;for(;v-d>1e-6&&v>d;){const R=d+.5*(v-d),O=this.tileSize*Math.pow(2,R),B=this.getCameraToCenterDistance(this.projection,R,O),H=this.scaleZoom(B/(a*this.tileSize)),Y=Math.abs(R-H);Y<E&&(E=Y,S=R),R<H?d=R:v=R}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,d){const v=Math.min(a.x,d.x),S=Math.max(a.x,d.x),E=Math.min(a.y,d.y),R=Math.max(a.y,d.y);if(E<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new i.P(v,E),new i.P(S,R),new i.P(v,R),new i.P(S,E)],B=this.renderWorldCopies?-3:0,H=this.renderWorldCopies?4:1;for(const Y of O){const J=this.pointRayIntersection(Y);if(J.t<0)return!0;const Q=this.rayIntersectionCoordinate(J);if(Q.x<B||Q.y<0||Q.x>H||Q.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.cJ(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(a,d){const v=i.ae(i.at([],this._camera.position,a)),S=this._zoomFromMercatorZ(v)+d;return v-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([d,v,S],E){const R=[d,v,S,1];i.aA(R,R,E);const O=R[3]=Math.max(R[3],1e-6);return R[0]/=O,R[1]/=O,R[2]/=O,R}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,a))}}getCameraToCenterDistance(a,d=this.zoom,v=this.worldSize){const S=i.cA(a,d,this.width,this.height,1024),E=a.pixelSpaceConversion(this.center.lat,v,S);let R=.5/Math.tan(.5*this._fov)*this.height*E;return this.isOrthographic&&(R=i.ai(1,R,i.cO(this.pitch>=Cu?1:this.pitch/Cu))),R}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.az(a,a,this.globeMatrix),a}getFrustum(a){return i.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,this.projection.zAxisUnit==="meters")}}const Ih=(y,a)=>{if(a>0&&y.terrain&&i.w("Cutoff is currently disabled on terrain"),a<=0||y.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=y.transform,v=Math.max(Math.abs(d._zoom-(y.minCutoffZoom-1)),1),S=d.isLODDisabled(!1)?i.af(60,45,d.pitch):i.af(30,15,d.pitch),E=d._farZ-d._nearZ,R=a*d.height,O=((1-(B=S))*d.cameraToCenterDistance+B*(d._farZ+R))*v;var B;return{shouldRenderCutoff:S<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(O-d._nearZ)/E,(O-R-d._nearZ)/E]}}},Ca={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class _m{constructor(a,d){this.aabb=a,this.lastCascade=d}}class xm{add(a,d){const v=this.receivers[a.key];v!==void 0?(v.aabb.min[0]=Math.min(v.aabb.min[0],d.min[0]),v.aabb.min[1]=Math.min(v.aabb.min[1],d.min[1]),v.aabb.min[2]=Math.min(v.aabb.min[2],d.min[2]),v.aabb.max[0]=Math.max(v.aabb.max[0],d.max[0]),v.aabb.max[1]=Math.max(v.aabb.max[1],d.max[1]),v.aabb.max[2]=Math.max(v.aabb.max[2],d.max[2])):this.receivers[a.key]=new _m(d,null)}clear(){this.receivers={}}get(a){return this.receivers[a.key]}computeRequiredCascades(a,d,v){const S=i.cV.fromPoints(a.points);let E=0;for(const R in this.receivers){const O=this.receivers[R];if(!O||!S.intersectsAabb(O.aabb))continue;O.aabb.min=S.closestPoint(O.aabb.min),O.aabb.max=S.closestPoint(O.aabb.max);const B=O.aabb.getCorners();for(let H=0;H<v.length;H++){let Y=!0;for(const J of B){const Q=[J[0]*d,J[1]*d,J[2]];if(i.ad(Q,Q,v[H].matrix),Q[0]<-1||Q[0]>1||Q[1]<-1||Q[1]>1){Y=!1;break}}if(O.lastCascade=H,E=Math.max(E,H),Y)break}}return E+1}}class Sl{constructor(a){this.painter=a,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new xm,this._depthMode=new Bn(a.context.gl.LEQUAL,Bn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,a.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),a.tp.registerParameter(Ca,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),a.tp.registerParameter(Ca,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),a.tp.registerParameter(Ca,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),a.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const a of this._cascades)a.texture.destroy(),a.framebuffer.destroy();this._cascades=[]}updateShadowParameters(a,d){const v=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const S=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||S<=0||(this._shadowLayerCount=v.style.order.reduce((pe,de)=>{const ge=v.style._mergedLayers[de];return pe+(ge.hasShadowPass()&&!ge.isHidden(a.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const E=v.context,R=Ca.shadowMapResolution,O=Ca.shadowMapResolution;if(this._cascades.length===0||Ca.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let pe=0;pe<Ca.cascadeCount;++pe){const de=v._shadowMapDebug,ge=E.gl,fe=E.createFramebuffer(R,O,de,"texture"),Ee=new i.T(E,{width:R,height:O,data:null},ge.DEPTH_COMPONENT16);if(fe.depthAttachment.set(Ee.texture),de){const Le=new i.T(E,{width:R,height:O,data:null},ge.RGBA8);fe.colorAttachment.set(Le.texture)}this._cascades.push({framebuffer:fe,texture:Ee,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.cn,scale:0})}}this.shadowDirection=Hg(d);let B=0;if(a.elevation){const pe=a.elevation,de=[1e4,-1e4];pe.visibleDemTiles.filter(ge=>ge.dem).forEach(ge=>{const fe=ge.dem.tree;de[0]=Math.min(de[0],fe.minimums[0]),de[1]=Math.max(de[1],fe.maximums[0])}),de[0]!==1e4&&(B=(de[1]-de[0])*pe.exaggeration())}const H=1.5*a.cameraToCenterDistance,Y=3*H,J=new Float64Array(16);for(let pe=0;pe<this._cascades.length;++pe){const de=this._cascades[pe];let ge=a.height/50,fe=1;Ca.cascadeCount===1?fe=Y:pe===0?fe=H:(ge=H,fe=Y);const[Ee,Le]=Gg(a,this.shadowDirection,ge,fe,Ca.shadowMapResolution,B);de.scale=a.scale,de.matrix=Ee,de.boundingSphereRadius=Le,i.bi(J,de.matrix),de.frustum=i.cn.fromInvProjectionMatrix(J,1,0,!0),de.far=fe}const Q=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Q].far,this._cascades[Q].far],this._uniformValues.u_shadow_intensity=S,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ca.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ca.shadowMapResolution,this._uniformValues.u_shadowmap_0=aa.ShadowMap0,this._uniformValues.u_shadowmap_1=aa.ShadowMap0+1,this._groundShadowTiles=v.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ie=v.transform.elevation;for(const pe of this._groundShadowTiles){let de={min:0,max:0};if(ie){const ge=ie.getMinMaxForTile(pe);ge&&(de=ge)}this.addShadowReceiver(pe.toUnwrapped(),de.min,de.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(a){this._enabled=a}drawShadowPass(a,d){if(!this.enabled)return;const v=this.painter,S=v.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(v.transform.getFrustum(0),v.transform.worldSize,this._cascades),S.viewport.set([0,0,Ca.shadowMapResolution,Ca.shadowMapResolution]);for(let E=0;E<this._numCascadesToRender;++E){v.currentShadowCascade=E,S.bindFramebuffer.set(this._cascades[E].framebuffer.framebuffer),S.clear({color:i.am.white,depth:1});for(const R of a.order){const O=a._mergedLayers[R];if(!O.hasShadowPass()||O.isHidden(v.transform.zoom))continue;const B=a.getLayerSourceCache(O),H=B?d[B.id]:void 0;(O.type==="model"||H&&H.length)&&v.renderLayer(v,B,O,H)}}v.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const a=this.painter,d=a.style,v=a.context,S=d.directionalLight,E=d.ambientLight;if(!S||!E)return;const R=[],O=Ih(a,a.longestCutoffRange);O.shouldRenderCutoff&&R.push("RENDER_CUTOFF"),R.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&R.push("NORMAL_OFFSET");const B=Cc(d,S,E),H=new Bn(v.gl.LEQUAL,Bn.ReadOnly,a.depthRangeFor3D);for(const Y of this._groundShadowTiles){const J=Y.toUnwrapped(),Q=a.isTileAffectedByFog(Y),ie=a.getOrCreateProgram("groundShadow",{defines:R,overrideFog:Q});this.setupShadows(J,ie),a.uploadCommonUniforms(v,ie,J,null,O);const pe={u_matrix:a.transform.calculateProjMatrix(J),u_ground_shadow_factor:B};ie.draw(a,v.gl.TRIANGLES,H,yr.disabled,Nr.multiply,xr.disabled,pe,"ground_shadow",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments,null,a.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Nr.unblended:Nr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(a){const d=this.painter.transform,v=d.calculatePosMatrix(a,d.worldSize);return i.az(v,this._cascades[this.painter.currentShadowCascade].matrix,v),Float32Array.from(v)}calculateShadowPassMatrixFromMatrix(a){return i.az(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}setupShadows(a,d,v,S=0){if(!this.enabled)return;const E=this.painter.transform,R=this.painter.context,O=R.gl,B=this._uniformValues,H=new Float64Array(16),Y=E.calculatePosMatrix(a,E.worldSize);for(let J=0;J<this._cascades.length;J++)i.az(H,this._cascades[J].matrix,Y),B[J===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(H),R.activeTexture.set(O.TEXTURE0+aa.ShadowMap0+J),this._cascades[J].texture.bind(O.NEAREST,O.CLAMP_TO_EDGE);if(this.useNormalOffset=!!v,this.useNormalOffset){const J=i.cT(a.canonical),Q=2/E.tileSize*i.aj/Ca.shadowMapResolution,ie=Q*this._cascades[0].boundingSphereRadius,pe=Q*this._cascades[this._cascades.length-1].boundingSphereRadius,de=(v==="vector-tile"?1:3)/Math.pow(2,S-a.canonical.z-(1-E.zoom+Math.floor(E.zoom)));B.u_shadow_normal_offset=[J,ie*de,pe*de],B.u_shadow_bias=[6e-5,.0012,.012]}else B.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(R,B)}setupShadowsFromMatrix(a,d,v=!1){if(!this.enabled)return;const S=this.painter.context,E=S.gl,R=this._uniformValues,O=new Float64Array(16);for(let B=0;B<Ca.cascadeCount;B++)i.az(O,this._cascades[B].matrix,a),R[B===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(O),S.activeTexture.set(E.TEXTURE0+aa.ShadowMap0+B),this._cascades[B].texture.bind(E.NEAREST,E.CLAMP_TO_EDGE);if(this.useNormalOffset=v,v){const B=Ca.normalOffset;R.u_shadow_normal_offset=[1,B,B],R.u_shadow_bias=[6e-5,.0012,.012]}else R.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(S,R)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(a,d,v,S){if(S[2]>=0)return{};const E=function(B,H,Y){const J=Y/(1<<B.canonical.z);return new i.cV([B.canonical.x*J+B.wrap*Y,B.canonical.y*J+B.wrap*Y,0],[(B.canonical.x+1)*J+B.wrap*Y,(B.canonical.y+1)*J+B.wrap*Y,H])}(a,d,v).getCorners(),R=d/-S[2];S[0]<0?(i.cU(E[0],E[0],[S[0]*R,0,0]),i.cU(E[3],E[3],[S[0]*R,0,0])):S[0]>0&&(i.cU(E[1],E[1],[S[0]*R,0,0]),i.cU(E[2],E[2],[S[0]*R,0,0])),S[1]<0?(i.cU(E[0],E[0],[0,S[1]*R,0]),i.cU(E[1],E[1],[0,S[1]*R,0])):S[1]>0&&(i.cU(E[2],E[2],[0,S[1]*R,0]),i.cU(E[3],E[3],[0,S[1]*R,0]));const O={};return O.vertices=E,O.planes=[Tl(E[1],E[0],E[4]),Tl(E[2],E[1],E[5]),Tl(E[3],E[2],E[6]),Tl(E[0],E[3],E[7])],O}addShadowReceiver(a,d,v){this._receivers.add(a,i.cV.fromTileIdAndHeight(a,d,v))}getMaxCascadeForTile(a){const d=this._receivers.get(a);return d&&d.lastCascade?d.lastCascade:0}}function Tl(y,a,d){const v=i.at([],d,a),S=i.at([],y,a),E=i.bG([],v,S),R=i.ae(E);return R===0?[0,0,1,0]:(i.b$(E,E,1/R),[E[0],E[1],E[2],-i.bE(E,a)])}function Hg(y){const a=y.properties.get("direction"),d=i.cR(a.x,a.y,a.z);d[2]=i.aD(d[2],0,75);const v=i.cW([d[0],d[1],d[2]]);return i.cS(v.x,v.y,v.z)}function Cc(y,a,d){const v=a.properties.get("color-use-theme")==="none",S=a.properties.get("color"),E=a.properties.get("intensity"),R=a.properties.get("direction"),O=[R.x,R.y,R.z],B=d.properties.get("color-use-theme")==="none",H=d.properties.get("color"),Y=d.properties.get("intensity"),J=Math.max(i.bE([0,0,1],O),0),Q=[0,0,0];i.b$(Q,H.toRenderColor(B?null:y.getLut(a.scope)).toArray01Linear().slice(0,3),Y);const ie=[0,0,0];return i.b$(ie,S.toRenderColor(v?null:y.getLut(d.scope)).toArray01Linear().slice(0,3),J*E),i.cX([Q[0]>0?Q[0]/(Q[0]+ie[0]):0,Q[1]>0?Q[1]/(Q[1]+ie[1]):0,Q[2]>0?Q[2]/(Q[2]+ie[2]):0])}function Gg(y,a,d,v,S,E){const R=y.zoom,O=y.scale,B=y.worldSize,H=1/B,Y=y.aspect,J=Math.sqrt(1+Y*Y)*Math.tan(.5*y.fovX),Q=J*J,ie=v-d,pe=v+d;let de,ge;Q>ie/pe?(de=v,ge=v*J):(de=.5*pe*(1+Q),ge=.5*Math.sqrt(ie*ie+2*(v*v+d*d)*Q+pe*pe*Q*Q));const fe=y.projection.pixelsPerMeter(y.center.lat,B),Ee=y._camera.getCameraToWorldMercator(),Le=[0,0,-de*H];i.ad(Le,Le,Ee);let je=ge*H;const Ye=y._edgeInsets;if(!(Ye.left===0&&Ye.top===0&&Ye.right===0&&Ye.bottom===0||Ye.left===Ye.right&&Ye.top===Ye.bottom)){const Ht=y._camera.getWorldToCamera(y.worldSize,y.projection.zAxisUnit==="meters"?fe:1),Lt=y._camera.getCameraToClipPerspective(y._fov,y.width/y.height,d,v);Lt[8]=2*-y.centerOffset.x/y.width,Lt[9]=2*y.centerOffset.y/y.height;const Gt=new Float64Array(16);i.cB(Gt,Lt,Ht);const Zt=new Float64Array(16);i.bi(Zt,Gt);const Fn=i.cn.fromInvProjectionMatrix(Zt,B,R,!0);for(const $n of Fn.points){const On=(($e=$n)[0]/=O,$e[1]/=O,$e[2]=i.c6($e[2],y._center.lat),$e);je=Math.max(je,i.c0(i.cY([],Le,On)))}}var $e;je*=S/(S-1);const Ue=Math.acos(a[2]),Fe=Math.atan2(-a[0],-a[1]),Ze=new ks;Ze.position=Le,Ze.setPitchBearing(Ue,Fe);const et=Ze.getWorldToCamera(B,fe),gt=je*B,ht=Math.min(y._mercatorZfromZoom(17)*B*-2,-2*gt),kt=Ze.getCameraToClipOrthographic(-gt,gt,-gt,gt,ht,(gt+E*fe)/a[2]),Dt=new Float64Array(16);i.az(Dt,kt,et);const tn=i.cS(Math.floor(1e6*Le[0])/1e6*B,Math.floor(1e6*Le[1])/1e6*B,0),dt=.5*S,_t=[0,0,0];i.ad(_t,tn,Dt),i.b$(_t,_t,dt);const lt=[Math.floor(_t[0]),Math.floor(_t[1]),Math.floor(_t[2])],Nt=[0,0,0];i.at(Nt,_t,lt),i.b$(Nt,Nt,-1/dt);const xt=new Float64Array(16);return i.bx(xt),i.bo(xt,xt,Nt),i.az(Dt,xt,Dt),[Dt,gt]}class Au extends i.E{constructor(a){super(),this.requestManager=a,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(a,d){return i.aS(this.requestManager.transformRequest(d,i.R.Model).url).then(v=>{if(!v)return;const S=i.aT(v),E=new i.aU(a,void 0,void 0,S);return E.computeBoundsAndApplyParent(),E}).catch(v=>{if(v&&v.status===404)return null;this.fire(new i.z(new Error(`Could not load model ${a} from ${d}: ${v.message}`)))})}load(a,d,v={forceReload:!1}){this.models[d]||(this.models[d]={});const S=Object.keys(a),E=[],R=[];for(const O of S){const B=a[O];this.hasURLBeenRequested(B)&&!v.forceReload||(this.modelByURL[B]={modelId:O,scope:d},E.push(this.loadModel(O,B)),R.push(O)),this.models[d][O]||(this.models[d][O]={model:null,numReferences:1})}this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+R.length,Promise.allSettled(E).then(O=>{for(let B=0;B<O.length;B++){const{status:H}=O[B];if(H==="rejected")continue;const{value:Y}=O[B];this.models[d][R[B]]||(this.models[d][R[B]]={model:null,numReferences:1}),this.models[d][R[B]].model=Y}this.numModelsLoading[d]-=R.length,this.fire(new i.A("data",{dataType:"style"}))}).catch(O=>{this.fire(new i.z(new Error(`Could not load models: ${O.message}`)))})}isLoaded(){for(const a in this.numModelsLoading)if(this.numModelsLoading[a]>0)return!1;return!0}hasModel(a,d,v={exactIdMatch:!1}){return!!(v.exactIdMatch?this.getModel(a,d):this.getModelByURL(this.modelUris[d][a]))}getModel(a,d){return this.models[d]||(this.models[d]={}),this.models[d][a]?this.models[d][a].model:void 0}getModelByURL(a){if(!a)return null;const d=this.modelByURL[a];return d?this.models[d.scope][d.modelId].model:null}hasModelBeenAdded(a,d){return this.models[d]&&this.models[d][a]!==void 0}getModelURIs(a){return this.modelUris[a]||{}}addModel(a,d,v){this.models[v]||(this.models[v]={}),this.modelUris[v]||(this.modelUris[v]={});const S=this.requestManager.normalizeModelURL(d);if((this.hasModel(a,v,{exactIdMatch:!0})||this.hasModelBeenAdded(a,v))&&this.modelUris[v][a]===S)this.models[v][a].numReferences++;else if(this.hasURLBeenRequested(S)){const{scope:E,modelId:R}=this.modelByURL[S];this.models[E][R].numReferences++}else this.modelUris[v][a]=S,this.load({[a]:this.modelUris[v][a]},v)}addModelURLs(a,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const v=this.modelUris[d];for(const S in a)v[S]=this.requestManager.normalizeModelURL(a[S])}reloadModels(a){this.load(this.modelUris[a],a,{forceReload:!0})}addModelsFromBucket(a,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const v={};for(const S of a)this.hasModel(S,d,{exactIdMatch:!0})||this.hasURLBeenRequested(S)?this.models[d][S].numReferences++:this.modelUris[d][S]&&!this.hasURLBeenRequested(S)?v[S]=this.modelUris[d][S]:!this.hasURLBeenRequested(S)&&i.cZ(S,!1)&&(this.modelUris[d][S]=this.requestManager.normalizeModelURL(S),v[S]=this.modelUris[d][S]);this.load(v,d)}hasURLBeenRequested(a){return this.modelByURL[a]!==void 0}removeModel(a,d,v=!1){if(this.models[d]&&this.models[d][a]&&(this.models[d][a].numReferences--,this.models[d][a].numReferences===0)){const S=this.modelUris[d][a];v||delete this.modelUris[d][a],delete this.modelByURL[S];const E=this.models[d][a].model;if(!E)return;delete this.models[d][a],E.destroy()}}destroy(){for(const a of Object.keys(this.models))for(const d of Object.keys(this.models[a])){const v=this.models[a][d].model;delete this.models[a][d],v&&v.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(a){return this.models[a]||(this.models[a]={}),Object.keys(this.models[a])}upload(a,d){this.models[d]||(this.models[d]={});for(const v in this.models[d])this.models[d][v].model&&this.models[d][v].model.upload(a.context)}}const Mv=new i.a7({data:new i.a8(i.a5.colorTheme.data)}),P1={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function kh(y){return y=y||{},Object.assign(y,P1)}class Wg extends i.E{constructor(a){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},i.aV(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=a,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(a=>{a.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new i.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=a.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=a.stylesheet.indoor.buildingFeaturesetId,this._scope=a.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:a=>(a.feature&&a.feature.properties.floorplan&&this.selectFloorplan(a.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(a){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(R,O){const[B,H]=R,{center:Y,radius:J}=O,[Q,ie]=Y,pe=Math.abs(B-Q);return Math.sqrt((pe>180?360-pe:pe)**2+(H-ie)**2)<=J}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new i.A("floorplangone")));const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},v=new i.P(this._map.transform.width/2,this._map.transform.height/2),S=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],E=this._map.queryRenderedFeatures(a?S:v,d);E.length>0&&(this._selectedFloorplan&&E[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=E[0],this._floorplanSelected(!1)))}_floorplanSelected(a){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(E){const[[R,O],[B,H]]=E,Y=(B-R+360)%360,J=Y>180?360-Y:Y;return{center:[(R+J/2+360)%360,(O+H)/2],radius:Math.sqrt(J**2+(H-O)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const d=this._floorplanStates[this._indoorData.id].selectedBuilding,v=this._floorplanStates[this._indoorData.id].selectedLevel;let S;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const E of this._indoorData.levels)E.id===this._selectedLevel.id&&(S=E.id);if(this.fire(new i.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:S})),d){const E=this._indoorData.buildings.find(R=>R.id===d);this._buildingSelected(E,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(v){const E=this._indoorData.levels.find(R=>R.id===v);this._updateLevels(E,a)}else a&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(a,d){d&&a&&a.extent&&this._map.fitBounds(a.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=a?a.id:void 0;const v=this._indoorData.levels.filter(S=>a.levels.includes(S.id));this.fire(new i.A("buildingselected",{buildingId:a.id,levels:v}))}_levelSelected(a){if(a==="overview")this._updateLevels(void 0,!0);else{const d=this._indoorData.levels.find(v=>v.id===a);this._updateLevels(d,!0)}this.fire(new i.A("levelselected",{levelId:a==="overview"?void 0:a}))}_updateLevels(a,d){if(!a)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(d&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function v(H){const Y=H.indexOf("/floor/");if(Y===-1)return H;const J=Y+7,Q=H.indexOf("/",J);return Q===-1?H.slice(J):H.slice(J,Q)}this._selectedLevel=a,this._floorplanStates[this._indoorData.id].selectedLevel=a?a.id:void 0;const S=[],E={},R={},O={},B={};for(const H of this._indoorData.levels)if(S.push(H.id),E[H.id]=H.height,R[H.id]=H.base,a){if(this.mergeFloors){const Y=v(a.id),J=v(H.id);O[H.id]=J===Y?"true":"false"}else O[H.id]=H.id===a.id?"true":"false";B[H.id]=H.base<a.base?"true":"false"}else B[H.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",E]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",R]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",O]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",B]),a&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!a.isUnderground),d&&a.extent)){const H=this._map.cameraForBounds(a.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),Y=this._map.getZoom(),J=H.zoom?Math.abs(Y-H.zoom):0;this._map.fitBounds(a.extent,J>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:Y})}}selectFloorplan(a){const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},v=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(v,d);if(S.length>0){for(const E of S)if(JSON.parse(E.properties["indoor-data"]).floorplanIDs.includes(a)){this._selectedFloorplan=E,this._floorplanSelected(!0);break}}}selectBuilding(a){const d=this._indoorData.buildings.find(v=>v.id===a);this._buildingSelected(d,!0)}selectLevel(a){this._levelSelected(a)}}function bm(y){if(!y.metadata||!y.metadata.content_area)return;const a=i.q.devicePixelRatio,{left:d,top:v,width:S,height:E}=y.metadata.content_area,R=d*a,O=v*a;return[R,O,R+S*a,O+E*a]}function $f(y){if(y)return y.map(([a,d])=>[a*i.q.devicePixelRatio,d*i.q.devicePixelRatio])}class Rv{constructor(a,d,v){this.id=a,this.scope=d,this.sourceCache=v,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(a){this.missingRequests.has(a.name)||this.pendingRequests.has(a.name)||this.pendingRequests.add(a.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const a=new Map;if(!this.sourceCache.loaded())return a;const d=this.sourceCache.getVisibleCoordinates();if(d.length===0)return a;const v=this.sourceCache.getSource();if(!(v instanceof As))return a;const S=d.map(R=>this.sourceCache.getTile(R)),E=v.getImages(S,Array.from(this.pendingRequests));for(const[R,O]of E)a.set(i.I.from({name:R,iconsetId:this.id}),O),this.pendingRequests.delete(R);for(const R of this.pendingRequests)this.missingRequests.add(R);return this.pendingRequests.clear(),a}}const il=(y,a)=>We(y,a&&a.filter(d=>d.identifier!=="source.canvas")),Oh=i.aF(si,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),Yg=i.aF(si,["setCenter","setZoom","setBearing","setPitch"]),Jc=new Set(["background","sky","slot","custom"]),Ac={version:8,layers:[],sources:{}},Xg={duration:300,delay:0};class El extends i.E{constructor(a,d={}){super(),this.map=a,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=i.l({},Xg),this._buildingIndex=new Sv(this),this.crossTileSymbolIndex=new Lo,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new Bt,this.dispatcher=d.dispatcher?d.dispatcher:new i.D(i.d0(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new _n(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new i.d1(a._requestManager,d.localFontFamily?i.d2.all:d.localIdeographFontFamily?i.d2.ideographs:i.d2.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Au(a._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",i.d3());const v=this;this._rtlTextPluginCallback=El.registerForPluginStateChange(S=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},(E,R)=>{if(i.d4(E),R&&R.every(O=>O))for(const O in v._sourceCaches){const B=v._sourceCaches[O],H=B.getSource().type;H!=="vector"&&H!=="geojson"||B.reload()}})}),this.on("data",S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const E=this.getOwnSource(S.sourceId);if(E&&E.vectorLayerIds)for(const R in this._layers){const O=this._layers[R];O.source===E.id&&this._validateLayer(O)}})}load(a){return a?(typeof a=="string"?this.loadURL(a):this.loadJSON(a),this):this}_getGlobalId(a){if(!a)return null;if(typeof a=="string"){if(i.f(a))return a;const d=i.d5(a);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${i.d6(JSON.stringify(a))}`}_diffStyle(a,d,v){this.globalId=this._getGlobalId(a);const S=(E,R)=>{try{R(null,this.setState(E,v))}catch(O){R(O,!1)}};if(typeof a=="string"){const E=this.map._requestManager.normalizeStyleURL(a),R=this.map._requestManager.transformRequest(E,i.R.Style);i.n(R,(O,B)=>{O?this.fire(new i.z(O)):B&&S(B,d)})}else typeof a=="object"&&S(a,d)}loadURL(a,d={}){this.fire(new i.A("dataloading",{dataType:"style"}));const v=typeof d.validate=="boolean"?d.validate:!i.f(a);this.globalId=this._getGlobalId(a),a=this.map._requestManager.normalizeStyleURL(a,d.accessToken),this.resolvedImports.add(a);const S=this.importsCache.get(a);if(S)return this._load(S,v);const E=this.map._requestManager.transformRequest(a,i.R.Style);this._request=i.n(E,(R,O)=>{if(this._request=null,R)this.fire(new i.z(R));else if(O)return this.importsCache.set(a,O),this._load(O,v)})}loadJSON(a,d={}){this.fire(new i.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(a),this._request=i.q.frame(()=>{this._request=null,this._load(a,d.validate!==!1)})}loadEmpty(){this.fire(new i.A("dataloading",{dataType:"style"})),this._load(Ac,!1)}_loadImports(a,d,v){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const S=[];for(const E of a){const R=this._createFragmentStyle(E),O=new Promise(Y=>{R.once("style.import.load",Y),R.once("error",Y)}).then(()=>this.mergeAll());if(S.push(O),this.resolvedImports.has(E.url)){R.loadEmpty();continue}const B=E.data||this.importsCache.get(E.url);B?(R.loadJSON(B,{validate:d}),this._isInternalStyle(B)&&(R.globalId=null)):E.url?R.loadURL(E.url,{validate:d}):R.loadEmpty();const H={style:R,id:E.id,config:E.config};if(v){const Y=this.fragments.findIndex(({id:J})=>J===v);this.fragments=this.fragments.slice(0,Y).concat(H).concat(this.fragments.slice(Y))}else this.fragments.push(H)}return Promise.allSettled(S)}getImportGlobalIds(a=this,d=new Set){for(const v of a.fragments)v.style.globalId&&d.add(v.style.globalId),this.getImportGlobalIds(v.style,d);return[...d.values()]}_createFragmentStyle(a){const d=this.scope?i.C(a.id,this.scope):a.id;let v;const S=this._initialConfig&&this._initialConfig[d];(a.config||S)&&(v=i.l({},a.config,S));const E=new El(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:v,configOptions:this.options,colorThemeOverride:a["color-theme"],configDependentLayers:this._configDependentLayers});return E.setEventedParent(this.map,{style:E}),E}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(a){return this.isRootStyle()&&(a.fragment||!!a.schema&&a.fragment!==!1)}_load(a,d){const v=a.indoor?kh(a.schema):a.schema;if(this._isInternalStyle(a)){const R=i.l({},Ac,{imports:[{id:"basemap",data:a,url:""}]});return void this._load(R,d)}if(this.updateConfig(this._config,v),d&&il(this,ko(a)))return;this._loaded=!0,this.stylesheet=i.d7(a);const S=()=>{for(const H in a.sources)this.addSource(H,a.sources[H],{validate:!1,isInitialLoad:!0});if(a.iconsets)for(const H in a.iconsets)this.addIconset(H,a.iconsets[H]);a.sprite?this._loadIconset(a.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(a.glyphs);const R=cm(this.stylesheet.layers);if(this._order=R.map(H=>H.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const H=this.stylesheet.lights[0];this.light=new at(H.properties,H.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new at(this.stylesheet.light)),this._layers={};for(const H of R){const Y=i.dc(H,this.scope,this._styleColorTheme.lut,this.options);Y.configDependencies.size!==0&&this._configDependentLayers.add(Y.fqid),Y.setEventedParent(this,{layer:{id:Y.id}}),this._layers[Y.id]=Y;const J=this.getOwnLayerSourceCache(Y),Q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();J&&Y.canCastShadows()&&Q&&(J.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const O=this.stylesheet.terrain;O&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(O,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.A("data",{dataType:"style"}));const B=this.isRootStyle();a.imports?this._loadImports(a.imports,d).then(()=>{this._reloadImports(),this.fire(new i.A(B?"style.load":"style.import.load"))}).catch(H=>{this.fire(new i.z(new Error("Failed to load imports",H))),this.fire(new i.A(B?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.A(B?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const E=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(E){const R=this._evaluateColorThemeData(E);this._loadColorTheme(R).then(()=>{S()}).catch(O=>{i.w(`Couldn't load color theme from the stylesheet: ${O}`),S()})}else this._styleColorTheme.lut=null,S()}isRootStyle(){return this.importDepth===0}mergeAll(){let a,d,v,S,E,R,O,B,H,Y;const J={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(Q=>{if(Q.stylesheet){if(Q.light!=null&&(a=Q.light),Q.stylesheet.lights)for(const ie of Q.stylesheet.lights)ie.type==="ambient"&&Q.ambientLight!=null&&(d=Q.ambientLight),ie.type==="directional"&&Q.directionalLight!=null&&(v=Q.directionalLight);S=this._prioritizeTerrain(S,Q.terrain,Q.stylesheet.terrain),Q.stylesheet.fog&&Q.fog!=null&&(E=Q.fog),Q.stylesheet.snow&&Q.snow!=null&&(R=Q.snow),Q.stylesheet.rain&&Q.rain!=null&&(O=Q.rain),Q.stylesheet.camera!=null&&(Y=Q.stylesheet.camera),Q.stylesheet.projection!=null&&(B=Q.stylesheet.projection),Q.stylesheet.transition!=null&&(H=Q.stylesheet.transition),J[Q.scope]=Q._styleColorTheme}}),this.light=a,this.ambientLight=d,this.directionalLight=v,this.fog=E,this.snow=R,this.rain=O,this._styleColorThemeForScope=J,S===null?delete this.terrain:this.terrain=S,this.camera=Y||{"camera-projection":"perspective"},this.projection=B||{name:"mercator"},this.transition=i.l({},Xg,H),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(a){const d=v=>{for(const S of v.fragments)d(S.style);a(v)};d(this)}_prioritizeTerrain(a,d,v){const S=a&&a.drapeRenderMode===0;return v===null?d&&d.drapeRenderMode===0?d:S?a:null:d!=null&&(!a||S||d&&d.drapeRenderMode===1)?d:a}mergeTerrain(){let a;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{a=this._prioritizeTerrain(a,d.terrain,d.stylesheet.terrain)}),a===null?delete this.terrain:this.terrain=a}mergeProjection(){let a;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(a=d.stylesheet.projection)}),this.projection=a||{name:"mercator"}}mergeSources(){const a={},d={},v={};this.forEachFragmentStyle(S=>{for(const E in S._sourceCaches){const R=i.C(E,S.scope);a[R]=S._sourceCaches[E]}for(const E in S._otherSourceCaches){const R=i.C(E,S.scope);d[R]=S._otherSourceCaches[E]}for(const E in S._symbolSourceCaches){const R=i.C(E,S.scope);v[R]=S._symbolSourceCaches[E]}}),this._mergedSourceCaches=a,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=v}mergeLayers(){const a={},d=[],v={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(E=>{for(const R of E._order){const O=E._layers[R];if(O.type==="slot"){const B=i.d8(R);if(a[B])continue;a[B]=[]}O.slot&&a[O.slot]?a[O.slot].push(O):d.push(O)}}),this._mergedOrder=[];const S=(E=[])=>{for(const R of E)if(R.type==="slot"){const O=i.d8(R.id);a[O]&&S(a[O]),this._mergedSlots.push(O)}else{const O=i.C(R.id,R.scope);this._mergedOrder.push(O),v[O]=R,R.is3D(!!this.terrain)&&(this._has3DLayers=!0),R.type==="circle"&&(this._hasCircleLayers=!0),R.type==="symbol"&&(this._hasSymbolLayers=!0),R.type==="clip"&&(this._clipLayerPresent=!0)}};S(d),this._mergedOrder.sort((E,R)=>{const O=v[E],B=v[R];return O.hasInitialOcclusionOpacityProperties?B.is3D(!!this.terrain)?1:0:O.is3D(!!this.terrain)&&B.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=v,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(a){return this.stylesheet.camera=i.l({},this.stylesheet.camera,a),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(a){return a.data?function(d,v,S){const E=i.l({},v);for(const O of Object.keys(i.a5.colorTheme))E[O]===void 0&&(E[O]=i.a5.colorTheme[O].default);const R=new i.a6(Mv,d,new Map(S));return R.setTransitionOrValue(E,S),R.untransitioned().possiblyEvaluate(new i.aa(0))}(this.scope,a,this.options).get("data"):null}_loadColorTheme(a){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((v,S)=>{const E="data:image/png;base64,";if(!a||a.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void v();let R=a;R.startsWith(E)||(R=E+R);const O=i.I.from("mapbox-reserved-lut"),B=new Image;B.src=R,B.onerror=()=>{this._styleColorTheme.lutLoading=!1,S(new Error("Failed to load image data"))},B.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void v();this._styleColorTheme.lutLoading=!1;const{width:H,height:Y,data:J}=i.q.getImageData(B);if(Y>32)return void S(new Error("The height of the image must be less than or equal to 32 pixels."));if(H!==Y*Y)return void S(new Error("The width of the image must be equal to the height squared."));this.getImage(O)&&this.removeImage(O),this.addImage(O,{data:new i.r({width:H,height:Y},J),pixelRatio:1,sdf:!1,usvg:!1,version:0});const Q=this.imageManager.getImage(O,this.scope);Q?(this._styleColorTheme.lut={image:Q.data,data:a},v()):S(new Error("Missing LUT image."))}})}getLut(a){const d=this._styleColorThemeForScope[a];return d?d.lut:null}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(a){this._spriteRequest=function(d,v,S){let E,R,O;const B=i.q.devicePixelRatio>1?"@2x":"";let H=i.n(v.transformRequest(v.normalizeSpriteURL(d,B,".json"),i.R.SpriteJSON),(Q,ie)=>{H=null,O||(O=Q,E=ie,J())}),Y=i.o(v.transformRequest(v.normalizeSpriteURL(d,B,".png"),i.R.SpriteImage),(Q,ie)=>{Y=null,O||(O=Q,R=ie,J())});function J(){if(O)S(O);else if(E&&R){const Q=i.q.getImageData(R),ie={};for(const pe in E){const{width:de,height:ge,x:fe,y:Ee,sdf:Le,pixelRatio:je,stretchX:Ye,stretchY:$e,content:Ue}=E[pe],Fe=new i.r({width:de,height:ge});i.r.copy(Q,Fe,{x:fe,y:Ee},{x:0,y:0},{width:de,height:ge},null),ie[pe]={data:Fe,pixelRatio:je,sdf:Le,stretchX:Ye,stretchY:$e,content:Ue,usvg:!1}}S(null,ie)}}return{cancel(){H&&(H.cancel(),H=null),Y&&(Y.cancel(),Y=null)}}}(a,this.map._requestManager,(d,v)=>{if(this._spriteRequest=null,d)this.fire(new i.z(d));else if(v){const S=new Map;for(const E in v)S.set(i.I.from(E),v[E]);this.addImages(S)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.A("data",{dataType:"style"}))})}addIconset(a,d){if(d.type==="sprite")return void this._loadSprite(d.url);const v=this.getOwnSourceCache(d.source);if(!v)return void this.fire(new i.z(new Error(`Source "${d.source}" as specified by iconset "${a}" does not exist and cannot be used as an iconset source`)));const S=v.getSource();if(S.type!=="raster-array")return void this.fire(new i.z(new Error(`Source "${d.source}" as specified by iconset "${a}" is not a "raster-array" source and cannot be used as an iconset source`)));S.partial=!1;const E=new Rv(a,this.scope,v);this.imageManager.addImageProvider(E,this.scope)}removeIconset(a){this.imageManager.removeImageProvider(a,this.scope)}_loadIconset(a){if(!i.f(a)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(a);const d=this.map._spriteFormat==="auto";var v,S;this._spriteRequest=(S=(E,R)=>{if(this._spriteRequest=null,E)d?this._loadSprite(a):this.fire(new i.z(E));else if(R){const O=new Map;for(const B in R)O.set(i.I.from(B),R[B]);this.addImages(O)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.A("data",{dataType:"style"}))},i.br((v=this.map._requestManager).transformRequest(v.normalizeIconsetURL(a),i.R.Iconset),(E,R)=>{if(E)return void S(E);const O={},B=i.c_(new i.bq(R));for(const H of B.icons){const Y={version:1,pixelRatio:i.q.devicePixelRatio,content:bm(H),stretchX:H.metadata?$f(H.metadata.stretch_x_areas):void 0,stretchY:H.metadata?$f(H.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:H};O[H.name]=Y}S(null,O)}))}_validateLayer(a){const d=this.getOwnSource(a.source);if(!d)return;const v=a.sourceLayer;v&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(v)===-1)&&this.fire(new i.z(new Error(`Source layer "${v}" does not exist on source "${d.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:a}of this.fragments)if(!a.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((a,d)=>{const v=this.fragments[d];return v&&v.style&&(a.data=v.style.serialize()),a})}_serializeSources(){const a={};for(const d in this._sourceCaches){const v=this._sourceCaches[d].getSource();a[v.id]||(a[v.id]=v.serialize())}return a}_serializeLayers(a){const d=[];for(const v of a){const S=this._layers[v];S&&S.type!=="custom"&&d.push(S.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(a){return a?this.order:this._mergedOrder}isLayerDraped(a){return!!this.terrain&&a.isDraped(this.getLayerSourceCache(a))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(a){const d=this.getOwnLayer(a);if(d)return d;this.fire(new i.z(new Error(`The layer '${a}' does not exist in the map's style.`)))}_checkSource(a){const d=this.getOwnSource(a);if(d)return d;this.fire(new i.z(new Error(`The source '${a}' does not exist in the map's style.`)))}precompilePrograms(a,d){const v=this.map.painter;if(v)for(let S=a.minzoom||0;S<(a.maxzoom||25.5);S++){const E=a.getProgramIds();if(E)for(const R of E){const O=a.getDefaultProgramParams(R,d.zoom,this._styleColorTheme.lut);O&&(v.style=this,this.fog&&(v._fogVisible=!0,O.overrideFog=!0,v.getOrCreateProgram(R,O)),v._fogVisible=!1,O.overrideFog=!1,v.getOrCreateProgram(R,O),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(O.overrideRtt=!0,v.getOrCreateProgram(R,O)))}}}update(a){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a);const d=this.calculateLightsBrightness();a.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const v=this._changes.isDirty();let S=!1;if(this._changes.isDirty()){const O=this._changes.getLayerUpdatesByScope();for(const B in O){const{updatedIds:H,removedIds:Y}=O[B];(H||Y)&&(this._updateWorkerLayers(B,H,Y),S=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(a),this.light&&this.light.updateTransitions(a),this.ambientLight&&this.ambientLight.updateTransitions(a),this.directionalLight&&this.directionalLight.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this.snow&&this.snow.updateTransitions(a),this.rain&&this.rain.updateTransitions(a),this._changes.reset()}const E={};for(const O in this._mergedSourceCaches){const B=this._mergedSourceCaches[O];E[O]=B.used,B.used=!1,B.tileCoverLift=0}for(const O of this._mergedOrder){const B=this._mergedLayers[O];if(B.recalculate(a,this._availableImages),!B.isHidden(a.zoom)){const H=this.getLayerSourceCache(B);H&&(H.used=!0,H.tileCoverLift=Math.max(H.tileCoverLift,B.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(B,a)}):this.precompilePrograms(B,a))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&S&&this.mergeLayers();const R=this.imageManager.getPendingImageProviders();for(const O of R)O.sourceCache.used=!0;for(const O in E){const B=this._mergedSourceCaches[O];E[O]!==B.used&&B.getSource().fire(new i.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light&&this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.snow&&this.snow.recalculate(a),this.rain&&this.rain.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),v&&this.fire(new i.A("data",{dataType:"style"}))}updateImageProviders(){const a=this.imageManager.getPendingImageProviders();for(const d of a){const v=d.resolvePendingRequests(),S=this.getFragmentStyle(d.scope);S&&S.addImages(v)}}_updateTilesForChangedImages(){const a={};for(const d in this._mergedSourceCaches){const v=this._mergedSourceCaches[d].getSource().scope;a[v]=a[v]||this._changes.getUpdatedImages(v),a[v].length!==0&&this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a[v])}for(const d in a)this._changes.resetUpdatedImages(d)}_updateWorkerLayers(a,d,v){const S=this.getFragmentStyle(a);S&&this.dispatcher.broadcast("updateLayers",{layers:d?S._serializeLayers(d):[],scope:a,removedIds:v||[],options:S.options})}setState(a,d){if(this._checkLoaded(),il(this,ko(a)))return!1;(a=i.d7(a)).layers=cm(a.layers);const v=function(R,O){if(!R)return[{command:si.setStyle,args:[O]}];let B=[];try{if(!i.bv(R.version,O.version))return[{command:si.setStyle,args:[O]}];if(i.bv(R.center,O.center)||B.push({command:si.setCenter,args:[O.center]}),i.bv(R.zoom,O.zoom)||B.push({command:si.setZoom,args:[O.zoom]}),i.bv(R.bearing,O.bearing)||B.push({command:si.setBearing,args:[O.bearing]}),i.bv(R.pitch,O.pitch)||B.push({command:si.setPitch,args:[O.pitch]}),i.bv(R.sprite,O.sprite)||B.push({command:si.setSprite,args:[O.sprite]}),i.bv(R.glyphs,O.glyphs)||B.push({command:si.setGlyphs,args:[O.glyphs]}),i.bv(R.imports,O.imports)||function(ie=[],pe=[],de){pe=pe||[];const ge=(ie=ie||[]).map(Tc),fe=pe.map(Tc),Ee=ie.reduce(bh,{}),Le=pe.reduce(bh,{}),je=ge.slice();let Ye,$e,Ue,Fe;for(Ye=0,$e=0;Ye<ge.length;Ye++)Ue=ge[Ye],Le.hasOwnProperty(Ue)?$e++:(de.push({command:si.removeImport,args:[Ue]}),je.splice(je.indexOf(Ue,$e),1));for(Ye=0,$e=0;Ye<fe.length;Ye++)Ue=fe[fe.length-1-Ye],je[je.length-1-Ye]!==Ue&&(Ee.hasOwnProperty(Ue)?(de.push({command:si.removeImport,args:[Ue]}),je.splice(je.lastIndexOf(Ue,je.length-$e),1)):$e++,Fe=je[je.length-Ye],de.push({command:si.addImport,args:[Le[Ue],Fe]}),je.splice(je.length-Ye,0,Ue));for(const Ze of pe){const et=Ee[Ze.id];et&&!i.bv(et,Ze)&&de.push({command:si.updateImport,args:[Ze.id,Ze]})}}(R.imports,O.imports,B),i.bv(R.transition,O.transition)||B.push({command:si.setTransition,args:[O.transition]}),i.bv(R.light,O.light)||B.push({command:si.setLight,args:[O.light]}),i.bv(R.fog,O.fog)||B.push({command:si.setFog,args:[O.fog]}),i.bv(R.snow,O.snow)||B.push({command:si.setSnow,args:[O.snow]}),i.bv(R.rain,O.rain)||B.push({command:si.setRain,args:[O.rain]}),i.bv(R.projection,O.projection)||B.push({command:si.setProjection,args:[O.projection]}),i.bv(R.lights,O.lights)||B.push({command:si.setLights,args:[O.lights]}),i.bv(R.camera,O.camera)||B.push({command:si.setCamera,args:[O.camera]}),i.bv(R.iconsets,O.iconsets)||function(ie,pe,de){let ge;for(ge in pe=pe||{},ie=ie||{})ie.hasOwnProperty(ge)&&(pe.hasOwnProperty(ge)||de.push({command:si.removeIconset,args:[ge]}));for(ge in pe){if(!pe.hasOwnProperty(ge))continue;const fe=pe[ge];ie.hasOwnProperty(ge)?i.bv(ie[ge],fe)||(de.push({command:si.removeIconset,args:[ge]}),de.push({command:si.addIconset,args:[ge,fe]})):de.push({command:si.addIconset,args:[ge,fe]})}}(R.iconsets,O.iconsets,B),!i.bv(R["color-theme"],O["color-theme"]))return[{command:si.setStyle,args:[O]}];const H={},Y=[];(function(ie,pe,de,ge){let fe;for(fe in pe=pe||{},ie=ie||{})ie.hasOwnProperty(fe)&&(pe.hasOwnProperty(fe)||hd(fe,de,ge));for(fe in pe){if(!pe.hasOwnProperty(fe))continue;const Ee=pe[fe];ie.hasOwnProperty(fe)?i.bv(ie[fe],Ee)||(ie[fe].type==="geojson"&&Ee.type==="geojson"&&Su(ie,pe,fe)?de.push({command:si.setGeoJSONSourceData,args:[fe,Ee.data]}):um(fe,pe,de,ge)):tl(fe,pe,de)}})(R.sources,O.sources,Y,H);const J=[];R.layers&&R.layers.forEach(ie=>{ie.source&&H[ie.source]?B.push({command:si.removeLayer,args:[ie.id]}):J.push(ie)});let Q=R.terrain;Q&&H[Q.source]&&(B.push({command:si.setTerrain,args:[void 0]}),Q=void 0),B=B.concat(Y),i.bv(Q,O.terrain)||B.push({command:si.setTerrain,args:[O.terrain]}),function(ie,pe,de){pe=pe||[];const ge=(ie=ie||[]).map(Tc),fe=pe.map(Tc),Ee=ie.reduce(bh,{}),Le=pe.reduce(bh,{}),je=ge.slice(),Ye=Object.create(null);let $e,Ue,Fe,Ze,et,gt,ht;for($e=0,Ue=0;$e<ge.length;$e++)Fe=ge[$e],Le.hasOwnProperty(Fe)?Ue++:(de.push({command:si.removeLayer,args:[Fe]}),je.splice(je.indexOf(Fe,Ue),1));for($e=0,Ue=0;$e<fe.length;$e++)Fe=fe[fe.length-1-$e],je[je.length-1-$e]!==Fe&&(Ee.hasOwnProperty(Fe)?(de.push({command:si.removeLayer,args:[Fe]}),je.splice(je.lastIndexOf(Fe,je.length-Ue),1)):Ue++,gt=je[je.length-$e],de.push({command:si.addLayer,args:[Le[Fe],gt]}),je.splice(je.length-$e,0,Fe),Ye[Fe]=!0);for($e=0;$e<fe.length;$e++)if(Fe=fe[$e],Ze=Ee[Fe],et=Le[Fe],!Ye[Fe]&&!i.bv(Ze,et))if(i.bv(Ze.source,et.source)&&i.bv(Ze["source-layer"],et["source-layer"])&&i.bv(Ze.type,et.type)){for(ht in Tu(Ze.layout,et.layout,de,Fe,null,si.setLayoutProperty),Tu(Ze.paint,et.paint,de,Fe,null,si.setPaintProperty),i.bv(Ze.slot,et.slot)||de.push({command:si.setSlot,args:[Fe,et.slot]}),i.bv(Ze.filter,et.filter)||de.push({command:si.setFilter,args:[Fe,et.filter]}),i.bv(Ze.minzoom,et.minzoom)&&i.bv(Ze.maxzoom,et.maxzoom)||de.push({command:si.setLayerZoomRange,args:[Fe,et.minzoom,et.maxzoom]}),Ze)Ze.hasOwnProperty(ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&ht!=="slot"&&(ht.indexOf("paint.")===0?Tu(Ze[ht],et[ht],de,Fe,ht.slice(6),si.setPaintProperty):i.bv(Ze[ht],et[ht])||de.push({command:si.setLayerProperty,args:[Fe,ht,et[ht]]}));for(ht in et)et.hasOwnProperty(ht)&&!Ze.hasOwnProperty(ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&ht!=="slot"&&(ht.indexOf("paint.")===0?Tu(Ze[ht],et[ht],de,Fe,ht.slice(6),si.setPaintProperty):i.bv(Ze[ht],et[ht])||de.push({command:si.setLayerProperty,args:[Fe,ht,et[ht]]}))}else de.push({command:si.removeLayer,args:[Fe]}),gt=je[je.lastIndexOf(Fe)+1],de.push({command:si.addLayer,args:[et,gt]})}(J,O.layers,B)}catch(H){console.warn("Unable to compute style diff:",H),B=[{command:si.setStyle,args:[O]}]}return B}(this.serialize(),a).filter(R=>!(R.command in Yg));if(v.length===0)return!1;const S=v.filter(R=>!(R.command in Oh));if(S.length>0)throw new Error(`Unimplemented: ${S.map(R=>R.command).join(", ")}.`);const E=[];return v.forEach(R=>{E.push(this[R.command](...R.args))}),d&&Promise.all(E).then(d).catch(d),this.stylesheet=a,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(a){for(const[d,v]of a.entries()){if(this.getImage(d))return this.fire(new i.z(new Error(`An image with the name "${d.name}" already exists.`)));this.imageManager.addImage(d,this.scope,v),this._changes.updateImage(d,this.scope)}return this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})),this}addImage(a,d){return this.getImage(a)?this.fire(new i.z(new Error(`An image with the name "${a.name}" already exists.`))):(this.imageManager.addImage(a,this.scope,d),this._changes.updateImage(a,this.scope),this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})),this)}updateImage(a,d,v=!1){this.imageManager.updateImage(a,this.scope,d),v&&(this._changes.updateImage(a,this.scope),this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})))}getImage(a){return this.imageManager.getImage(a,this.scope)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a,this.scope),this._changes.updateImage(a,this.scope),this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})),this):this.fire(new i.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(a){return this.modelManager.addModelURLs(a,this.scope),this._updateWorkerModels(),this.fire(new i.A("data",{dataType:"style"})),this}addModel(a,d,v={}){return this._checkLoaded(),this._validate(Ne,`models.${a}`,d,null,v)||(this.modelManager.addModel(a,d,this.scope),this.fire(new i.A("data",{dataType:"style"}))),this}hasModel(a){return this.modelManager.hasModel(a,this.scope)}removeModel(a){return this.hasModel(a)?(this.modelManager.removeModel(a,this.scope),this.fire(new i.A("data",{dataType:"style"})),this):this.fire(new i.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(a,d,v={}){if(this._checkLoaded(),this.getOwnSource(a)!==void 0)throw new Error(`There is already a source with ID "${a}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(Ro,`sources.${a}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const S=Lf(a,d,this.dispatcher,this);S.scope=this.scope,S.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(S.id),source:S.serialize(),sourceId:S.id}));const E=R=>{const O=(R?"symbol:":"other:")+S.id,B=i.C(O,this.scope),H=this._sourceCaches[O]=new Gs(B,S,R);(R?this._symbolSourceCaches:this._otherSourceCaches)[S.id]=H,H.onAdd(this.map)};E(!1),d.type!=="vector"&&d.type!=="geojson"||E(!0),S.onAdd&&S.onAdd(this.map),v.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(a){this._checkLoaded();const d=this.getOwnSource(a);if(!d)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===a)return this.fire(new i.z(new Error(`Source "${a}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===a)return this.fire(new i.z(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const S=Object.entries(this.stylesheet.iconsets).find(([E,R])=>R.type==="source"&&R.source===a);if(S)return this.fire(new i.z(new Error(`Source "${a}" cannot be removed while iconset "${S[0]}" is using it.`)))}const v=this.getOwnSourceCaches(a);for(const S of v){const E=i.d8(S.id);delete this._sourceCaches[E],this._changes.discardSourceCacheUpdate(S.id),S.fire(new i.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles()}return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(a,d){this._checkLoaded(),this.getOwnSource(a).setData(d),this._changes.setDirty()}getOwnSource(a){const d=this.getOwnSourceCache(a);return d&&d.getSource()}getOwnSources(){const a=[];for(const d in this._otherSourceCaches){const v=this.getOwnSourceCache(d);v&&a.push(v.getSource())}return a}areTilesLoaded(){const a=this._mergedSourceCaches;for(const d in a){const v=a[d]._tiles;for(const S in v){const E=v[S];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}setLights(a){if(this._checkLoaded(),!a)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const S of a){if(this._validate(oa,"lights",S))return;switch(S.type){case"ambient":if(this.ambientLight){const E=this.ambientLight;E.set(S),E.updateTransitions(d)}else this.ambientLight=new $i(S,li||(li=new i.a7({color:new i.a8(i.a5.properties_light_ambient.color),"color-use-theme":new i.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a8(i.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const E=this.directionalLight;E.set(S),E.updateTransitions(d)}else this.directionalLight=new $i(S,Kr||(Kr=new i.a7({direction:new i.an(i.a5.properties_light_directional.direction),color:new i.a8(i.a5.properties_light_directional.color),"color-use-theme":new i.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a8(i.a5.properties_light_directional.intensity),"cast-shadows":new i.a8(i.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new i.a8(i.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new i.a8(i.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const v=new i.aa(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(v),this.directionalLight&&this.directionalLight.recalculate(v),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const a=this.directionalLight,d=this.ambientLight;if(!a||!d)return;const v=Q=>.2126*(Q[0]<=.03928?Q[0]/12.92:Math.pow((Q[0]+.055)/1.055,2.4))+.7152*(Q[1]<=.03928?Q[1]/12.92:Math.pow((Q[1]+.055)/1.055,2.4))+.0722*(Q[2]<=.03928?Q[2]/12.92:Math.pow((Q[2]+.055)/1.055,2.4)),S=a.properties.get("color").toRenderColor(null).toArray01(),E=a.properties.get("intensity"),R=a.properties.get("direction"),O=1-i.cR(R.x,R.y,R.z)[2]/90,B=v(S)*E*O,H=d.properties.get("color").toRenderColor(null).toArray01(),Y=d.properties.get("intensity"),J=v(H)*Y;return Number(((B+J)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const a=[];return this.directionalLight&&a.push(this.directionalLight.get()),this.ambientLight&&a.push(this.ambientLight.get()),a}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(a){if(a==null||a===""&&this.isRootStyle())return this;if(i.d9(a)){const d=i.da(a),v=this.fragments.find(({id:E})=>E===d);if(!v)return;const S=i.d8(a);return v.style.getFragmentStyle(S)}{const d=this.fragments.find(({id:v})=>v===a);return d?d.style:void 0}}setFeaturesetSelectors(a){if(!a)return;const d={},v=(S,E="")=>`${S}::${E}`;this._featuresetSelectors={};for(const S in a){const E=this._featuresetSelectors[S]=[];for(const R of a[S].selectors){if(R.featureNamespace){const B=this.getOwnLayer(R.layer);if(!B){i.w(`Layer is undefined for selector: ${R.layer}`);continue}const H=v(B.source,B.sourceLayer);if(H in d&&d[H]!==R.featureNamespace){i.w(`"featureNamespace ${R.featureNamespace} of featureset ${S}'s selector is not associated to the same source, skip this selector`);continue}d[H]=R.featureNamespace}let O;if(R.properties)for(const B in R.properties){const H=i.X(R.properties[B]);H.result==="success"&&(O=O||{},O[B]=H.value)}E.push({layerId:R.layer,namespace:R.featureNamespace,properties:O,uniqueFeatureID:R._uniqueFeatureID})}}}getFeaturesetDescriptors(a){const d=this.getFragmentStyle(a);if(!d||!d.stylesheet.featuresets)return[];const v=[];for(const S in d.stylesheet.featuresets)v.push({featuresetId:S,importId:d.scope?d.scope:void 0});return v}getFeaturesetLayers(a,d){const v=this.getFragmentStyle(d),S=v.stylesheet.featuresets;if(!S||!S[a])return this.fire(new i.z(new Error(`The featureset '${a}' does not exist in the map's style and cannot be queried.`))),[];const E=[];for(const R of S[a].selectors){const O=v.getOwnLayer(R.layer);O&&E.push(O)}return E}getConfigProperty(a,d){const v=this.getFragmentStyle(a);if(!v)return null;const S=i.C(d,v.scope),E=v.options.get(S),R=E?E.value||E.default:null;return R?R.serialize():null}setConfigProperty(a,d,v){const S=this.getFragmentStyle(a);if(!S)return;const E=S.stylesheet.indoor?kh(S.stylesheet.schema):S.stylesheet.schema;if(!E||!E[d])return;const R=i.X(v);if(R.result!=="success")return void il(this,R.value);const O=R.value.expression,B=i.C(d,S.scope),H=S.options.get(B);if(!H)return;let Y;const{minValue:J,maxValue:Q,stepValue:ie,type:pe,values:de}=E[d],ge=i.X(E[d].default);ge.result==="success"&&(Y=ge.value.expression),Y?(this.options.set(B,Object.assign({},H,{value:O,default:Y,minValue:J,maxValue:Q,stepValue:ie,type:pe,values:de})),this.updateConfigDependencies(d)):this.fire(new i.z(new Error(`No schema defined for the config option "${d}" in the "${a}" fragment.`)))}getConfig(a){const d=this.getFragmentStyle(a);if(!d)return null;const v=d.stylesheet.schema;if(!v)return null;const S={};for(const E in v){const R=i.C(E,d.scope),O=d.options.get(R),B=O?O.value||O.default:null;S[E]=B?B.serialize():null}return S}setConfig(a,d){const v=this.getFragmentStyle(a);v&&(v.updateConfig(d,v.stylesheet.schema),this.updateConfigDependencies())}getSchema(a){const d=this.getFragmentStyle(a);return d?d.stylesheet.schema:null}setSchema(a,d){const v=this.getFragmentStyle(a);v&&(v.stylesheet.schema=d,v.updateConfig(v._config,d),this.updateConfigDependencies())}updateConfig(a,d){if(this._config=a,a||d)if(d)for(const v in d){let S,E;const R=i.X(d[v].default);if(R.result==="success"&&(S=R.value.expression),a&&a[v]!==void 0){const Q=i.X(a[v]);Q.result==="success"&&(E=Q.value.expression)}const{minValue:O,maxValue:B,stepValue:H,type:Y,values:J}=d[v];if(S){const Q=i.C(v,this.scope);this.options.set(Q,{default:S,value:E,minValue:O,maxValue:B,stepValue:H,type:Y,values:J})}else this.fire(new i.z(new Error(`No schema defined for config option "${v}".`)))}else this.fire(new i.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(a){for(const d of this._configDependentLayers){const v=this.getLayer(d);if(v){if(a&&!v.configDependencies.has(a))continue;v.possiblyEvaluateVisibility(),this._updateLayer(v)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const v=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(v){const S=d._evaluateColorThemeData(v);(!d._styleColorTheme.lut&&S!==""||d._styleColorTheme.lut&&S!==d._styleColorTheme.lut.data)&&d.setColorTheme(v)}}),this._changes.setDirty()}addLayer(a,d,v={}){this._checkLoaded();const S=a.id;if(this._layers[S])return void this.fire(new i.z(new Error(`Layer with id "${S}" already exists on this map`)));let E;if(a.type==="custom"){if(il(this,i.db(a)))return;E=i.dc(a,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof a.source=="object"&&(this.addSource(S,a.source),a=i.d7(a),a=i.l(a,{source:S})),this._validate(re,`layers.${S}`,a,{arrayIndex:-1},v))return;E=i.dc(a,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(E),E.setEventedParent(this,{layer:{id:S}})}E.configDependencies.size!==0&&this._configDependentLayers.add(E.fqid);let R=this._order.length;if(d){const Y=this._order.indexOf(d);if(Y===-1)return void this.fire(new i.z(new Error(`Layer with id "${d}" does not exist on this map.`)));E.slot===this._layers[d].slot?R=Y:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(R,0,S),this._layerOrderChanged=!0,this._layers[S]=E;const O=this.getOwnLayerSourceCache(E),B=!!this.directionalLight&&this.directionalLight.shadowsEnabled();O&&E.canCastShadows()&&B&&(O.castsShadows=!0);const H=this._changes.getRemovedLayer(E);if(H&&E.source&&O&&E.type!=="custom"){this._changes.discardLayerRemoval(E);const Y=i.C(E.source,E.scope);H.type!==E.type?this._changes.updateSourceCache(Y,"clear"):(this._changes.updateSourceCache(Y,"reload"),O.pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map),E.scope=this.scope,this.mergeLayers()}moveLayer(a,d){this._checkLoaded();const v=this._checkLayer(a);if(!v||a===d)return;const S=this._order.indexOf(a);this._order.splice(S,1);let E=this._order.length;if(d){const R=this._order.indexOf(d);if(R===-1)return void this.fire(new i.z(new Error(`Layer with id "${d}" does not exist on this map.`)));v.slot===this._layers[d].slot?E=R:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,a),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(a){this._checkLoaded();const d=this._checkLayer(a);if(!d)return;d.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),delete this._layers[a],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const S=this.getOwnLayerSourceCache(d);if(S&&S.castsShadows){let E=!1;for(const R in this._layers)if(this._layers[R].source===d.source&&this._layers[R].canCastShadows()){E=!0;break}S.castsShadows=E}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(a){return this._layers[a]}hasLayer(a){return a in this._mergedLayers}hasLayerType(a){for(const d in this._layers)if(this._layers[d].type===a)return!0;return!1}setLayerZoomRange(a,d,v){this._checkLoaded();const S=this._checkLayer(a);S&&(S.minzoom===d&&S.maxzoom===v||(d!=null&&(S.minzoom=d),v!=null&&(S.maxzoom=v),this._updateLayer(S)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(a,d){this._checkLoaded();const v=this._checkLayer(a);v&&v.slot!==d&&(v.slot=d,this._updateLayer(v))}setFilter(a,d,v={}){this._checkLoaded();const S=this._checkLayer(a);if(S&&!i.bv(S.filter,d))return d==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(le,`layers.${S.id}.filter`,d,{layerType:S.type},v)||(S.filter=i.d7(d),this._updateLayer(S)))}getFilter(a){const d=this._checkLayer(a);if(d)return i.d7(d.filter)}setLayoutProperty(a,d,v,S={}){this._checkLoaded();const E=this._checkLayer(a);if(E&&!i.bv(E.getLayoutProperty(d),v)){if(v!=null&&(!S||S.validate!==!1)&&il(E,ke.call(ko,{key:`layers.${a}.layout.${d}`,layerType:E.type,objectKey:d,value:v,styleSpec:i.a5,style:{glyphs:!0,sprite:!0}})))return;E.setLayoutProperty(d,v),E.configDependencies.size!==0&&this._configDependentLayers.add(E.fqid),this._updateLayer(E)}}getLayoutProperty(a,d){const v=this._checkLayer(a);if(v)return v.getLayoutProperty(d)}setPaintProperty(a,d,v,S={}){this._checkLoaded();const E=this._checkLayer(a);if(!E||i.bv(E.getPaintProperty(d),v)||v!=null&&(!S||S.validate!==!1)&&il(E,xe.call(ko,{key:`layers.${a}.paint.${d}`,layerType:E.type,objectKey:d,value:v,styleSpec:i.a5})))return;const R=E.setPaintProperty(d,v);E.configDependencies.size!==0&&this._configDependentLayers.add(E.fqid),R&&this._updateLayer(E),this._changes.updatePaintProperties(E)}getPaintProperty(a,d){const v=this._checkLayer(a);if(v)return v.getPaintProperty(d)}setFeatureState(a,d){if(this._checkLoaded(),"target"in a){if("featuresetId"in a.target){const{featuresetId:B,importId:H}=a.target,Y=this.getFragmentStyle(H),J=Y.getFeaturesetLayers(B);for(const{source:Q,sourceLayer:ie}of J)Y.setFeatureState({id:a.id,source:Q,sourceLayer:ie},d)}else if("layerId"in a.target){const{layerId:B}=a.target,H=this.getLayer(B);this.setFeatureState({id:a.id,source:H.source,sourceLayer:H.sourceLayer},d)}return}const v=a.source,S=a.sourceLayer,E=this._checkSource(v);if(!E)return;const R=E.type;if(R==="geojson"&&S)return void this.fire(new i.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(R==="vector"&&!S)return void this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new i.z(new Error("The feature id parameter must be provided.")));const O=this.getOwnSourceCaches(v);for(const B of O)B.setFeatureState(S,a.id,d)}removeFeatureState(a,d){if(this._checkLoaded(),"target"in a){if("featuresetId"in a.target){const{featuresetId:B,importId:H}=a.target,Y=this.getFragmentStyle(H),J=Y.getFeaturesetLayers(B);for(const{source:Q,sourceLayer:ie}of J)Y.removeFeatureState({id:a.id,source:Q,sourceLayer:ie},d)}else if("layerId"in a.target){const{layerId:B}=a.target,H=this.getLayer(B);this.removeFeatureState({id:a.id,source:H.source,sourceLayer:H.sourceLayer},d)}return}const v=a.source,S=this._checkSource(v);if(!S)return;const E=S.type,R=E==="vector"?a.sourceLayer:void 0;if(E==="vector"&&!R)return void this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new i.z(new Error("A feature id is required to remove its specific state property.")));const O=this.getOwnSourceCaches(v);for(const B of O)B.removeFeatureState(R,a.id,d)}getFeatureState(a){if(this._checkLoaded(),"target"in a){let E;if("featuresetId"in a.target){const{featuresetId:R,importId:O}=a.target,B=this.getFragmentStyle(O),H=B.getFeaturesetLayers(R);for(const{source:Y,sourceLayer:J}of H){const Q=B.getFeatureState({id:a.id,source:Y,sourceLayer:J});if(Q&&!E)E=Q;else if(!i.bv(E,Q))return void this.fire(new i.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in a.target){const{layerId:R}=a.target,O=this.getLayer(R);E=this.getFeatureState({id:a.id,source:O.source,sourceLayer:O.sourceLayer})}return E}const d=a.source,v=a.sourceLayer,S=this._checkSource(d);if(S){if(S.type!=="vector"||v)return a.id===void 0&&this.fire(new i.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(v,a.id);this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(a){return this.stylesheet.transition=i.l({},this.stylesheet.transition,a),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const a=this.getTerrain(),d=a&&this.terrain&&this.terrain.scope===this.scope?a:this.stylesheet.terrain;return i.dd({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},v=>v!==void 0)}_updateFilteredLayers(a){for(const d of Object.values(this._mergedLayers))a(d)&&this._updateLayer(d)}_updateLayer(a){this._changes.updateLayer(a);const d=this.getLayerSourceCache(a),v=i.C(a.source,a.scope),S=this._changes.getUpdatedSourceCaches();a.source&&!S[v]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(v,"reload"),d.pause()),a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const d=O=>this._mergedLayers[O].is3D(!!this.terrain),v=this.order,S={},E=[];for(let O=v.length-1;O>=0;O--){const B=v[O];if(d(B)){S[B]=O;for(const H of a){const Y=H[B];if(Y)for(const J of Y)E.push(J)}}}E.sort((O,B)=>B.intersectionZ-O.intersectionZ);const R=[];for(let O=v.length-1;O>=0;O--){const B=v[O];if(d(B))for(let H=E.length-1;H>=0;H--){const Y=E[H].feature;if(Y.layer&&S[Y.layer.id]<O)break;R.push(Y),E.pop()}else for(const H of a){const Y=H[B];if(Y)for(const J of Y)R.push(J.feature)}}return R}queryRenderedFeatures(a,d,v){let S;d&&!Array.isArray(d)&&d.filter&&(this._validate(le,"queryRenderedFeatures.filter",d.filter,null,d),S=i.b3(d.filter));const E={},R=Y=>{if(Jc.has(Y.type))return;const J=this.getOwnLayerSourceCache(Y),Q=E[J.id]=E[J.id]||{sourceCache:J,layers:{},has3DLayers:!1};Y.is3D(!!this.terrain)&&(Q.has3DLayers=!0),Q.layers[Y.fqid]=Q.layers[Y.fqid]||{styleLayer:Y,targets:[]},Q.layers[Y.fqid].targets.push({filter:S})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new i.z(new Error("parameters.layers must be an Array."))),[];for(const Y of d.layers){const J=this._layers[Y];if(!J)return this.fire(new i.z(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];R(J)}}else for(const Y in this._layers)R(this._layers[Y]);const O=this._queryRenderedFeatures(a,E,v),B=this._flattenAndSortRenderedFeatures(O),H=[];for(const Y of B)i.de(Y.layer.id)===this.scope&&H.push(Y);return H}queryRenderedFeatureset(a,d,v){let S;d&&!Array.isArray(d)&&d.filter&&(this._validate(le,"queryRenderedFeatures.filter",d.filter,null,d),S=i.b3(d.filter));const E="mock",R=[];if(d&&d.target)R.push(Object.assign({},d,{targetId:E,filter:S}));else{const Y=this.getFeaturesetDescriptors();for(const J of Y)R.push({targetId:E,filter:S,target:J});for(const{style:J}of this.fragments){const Q=J.getFeaturesetDescriptors();for(const ie of Q)R.push({targetId:E,filter:S,target:ie})}}const O=this.queryRenderedTargets(a,R,v),B=[],H=new Set;for(const Y of O)for(const J of Y.variants[E])zf(J,Y,H)||B.push(new i.df(Y,J));return B}queryRenderedTargets(a,d,v){const S={},E=(O,B,H,Y)=>{const J=S[B.id]=S[B.id]||{sourceCache:B,layers:{},has3DLayers:!1};if(J.layers[O.fqid]=J.layers[O.fqid]||{styleLayer:O,targets:[]},O.is3D(!!this.terrain)&&(J.has3DLayers=!0),!Y)return H.uniqueFeatureID=!1,void J.layers[O.fqid].targets.push(H);J.layers[O.fqid].targets.push(Object.assign({},H,{namespace:Y.namespace,properties:Y.properties,uniqueFeatureID:Y.uniqueFeatureID}))};for(const O of d)if("featuresetId"in O.target){const{featuresetId:B,importId:H}=O.target,Y=this.getFragmentStyle(H);if(!Y||!Y._featuresetSelectors)continue;const J=Y._featuresetSelectors[B];if(!J){this.fire(new i.z(new Error(`The featureset '${B}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const Q of J){const ie=Y.getOwnLayer(Q.layerId);ie&&!Jc.has(ie.type)&&E(ie,Y.getOwnLayerSourceCache(ie),O,Q)}}else if("layerId"in O.target){const{layerId:B}=O.target,H=this.getLayer(B);if(!H||Jc.has(H.type))continue;E(H,this.getLayerSourceCache(H),O)}const R=this._queryRenderedFeatures(a,S,v);return this._flattenAndSortRenderedFeatures(R)}_queryRenderedFeatures(a,d,v){const S=[],E=!!this.map._showQueryGeometry,R=bo.createFromScreenPoints(a,v);for(const O in d){const B=Xc(R,d[O],this._availableImages,v,E);Object.keys(B).length&&S.push(B)}if(this.placement)for(const O in d){if(!d[O].sourceCache._onlySymbols)continue;const B=am(R.screenGeometry,d[O],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(B).length&&S.push(B)}return S}querySourceFeatures(a,d){const v=d&&d.filter;v&&this._validate(le,"querySourceFeatures.filter",v,null,d);let S=[];const E=this.getOwnSourceCaches(a);for(const R of E)S=S.concat(Ja(R,d));return S}addSourceType(a,d,v){return El.getSourceType(a)?v(new Error(`A source type called "${a}" already exists.`)):(El.setSourceType(a,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:d.workerSourceURL},v):v(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(a,d,v={}){this._checkLoaded();const S=this.light.getLight();let E=!1;for(const O in a)if(!i.bv(a[O],S[O])){E=!0;break}if(!E)return;const R=this._getTransitionParameters();this.light.setLight(a,d,v),this.light.updateTransitions(R)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(a,d=1){if(this._checkLoaded(),!a)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,a===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let v=a;const S=a.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof v.source=="object"){const O="terrain-dem-src";this.addSource(O,v.source),v=i.d7(v),v=i.l(v,{source:O})}const E=i.l({},v),R={};if(this.terrain&&S){E.source=this.terrain.get().source;const O=this.terrain?this.getFragmentStyle(this.terrain.scope):null;O&&(R.style=O.serialize())}if(this._validate(dn,"terrain",E,R))return}if(!this.terrain||this.terrain.scope!==this.scope&&!S||this.terrain&&d!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,d),this.fire(new i.A("data",{dataType:"style"}))}else{const E=this.terrain,R=E.get();for(const O of Object.keys(i.a5.terrain))!v.hasOwnProperty(O)&&i.a5.terrain[O].default&&(v[O]=i.a5.terrain[O].default);for(const O in a)if(!i.bv(a[O],R[O])){E.set(a,this.options),this.stylesheet.terrain=a;const B=this._getTransitionParameters({duration:0});E.updateTransitions(B),this.fire(new i.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const d=this.fog=new kr(a,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_createSnow(a){const d=this.snow=new wi(a,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_createRain(a){const d=this.rain=new zi(a,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!i.bv(d.get(),a)){d.set(a,this.options),this.stylesheet.fog=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createFog(a);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(a){if(this._checkLoaded(),!a)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!i.bv(d.get(),a)){d.set(a,this.options),this.stylesheet.snow=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createSnow(a);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(a){if(this._checkLoaded(),!a)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!i.bv(d.get(),a)){d.set(a,this.options),this.stylesheet.rain=d.get();const v=this._getTransitionParameters({duration:0});d.updateTransitions(v)}}else this._createRain(a);this._markersNeedUpdate=!0}_reloadColorTheme(){const a=()=>{for(const S in this._layers)this._layers[S].lut=this._styleColorTheme.lut;for(const S in this._sourceCaches)this._sourceCaches[S].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void a();const v=this._evaluateColorThemeData(d);this._loadColorTheme(v).then(()=>{this.fire(new i.A("colorthemeset")),a()}).catch(S=>{i.w(`Couldn't set color theme: ${S}`)})}setColorTheme(a){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&i.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=a,this._reloadColorTheme()}setImportColorTheme(a,d){const v=this.getFragmentStyle(a);v&&(v._styleColorTheme.colorThemeOverride=d,v._reloadColorTheme())}_getTransitionParameters(a){return{now:i.q.now(),transition:i.l(this.transition,a)}}updateDrapeFirstLayers(){if(!this.terrain)return;const a=[],d=[];for(const v of this._mergedOrder)this.isLayerDraped(this._mergedLayers[v])?a.push(v):d.push(v);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...d)}_createTerrain(a,d){const v=this.terrain=new ft(a,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=a),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const S=this._getTransitionParameters({duration:0});v.updateTransitions(S)}_force3DLayerUpdate(){for(const a in this._layers){const d=this._layers[a];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const d=this._layers[a];d.type==="symbol"&&this._updateLayer(d)}}_validate(a,d,v,S,E={}){if(E&&E.validate===!1)return!1;const R=i.l({},this.serialize());return il(this,a.call(ko,i.l({key:d,style:R,value:v,styleSpec:i.a5},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.dg.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._mergedLayers)this._mergedLayers[a].setEventedParent(null);for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles(),this._mergedSourceCaches[a].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(a){const d=this.getSourceCaches(a);for(const v of d)v.clearTiles()}clearSources(){for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles()}reloadSource(a){const d=this.getSourceCaches(a);for(const v of d)v.resume(),v.reload()}reloadSources(){for(const a of this.getSources())a.reload&&a.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(a=>{a.modelManager.reloadModels(a.scope)})}updateSources(a){let d;this.directionalLight&&(d=Hg(this.directionalLight));const v=new Set;for(const S in this._mergedLayers){const E=this._mergedLayers[S];E.hasElevation()&&!v.has(E.source)&&v.add(E.source)}for(const S in this._mergedSourceCaches){const E=this._mergedSourceCaches[S],R=v.has(E._source.id);E.update(a,void 0,void 0,d,R)}}_generateCollisionBoxes(){for(const a in this._sourceCaches){const d=this._sourceCaches[a];d.resume(),d.reload()}}_updatePlacement(a,d,v,S,E,R,O=!1){let B=!1,H=!1;const Y={},J={};for(const Q of this._mergedOrder){const ie=this._mergedLayers[Q];if(ie.type!=="symbol")continue;const pe=i.C(ie.source,ie.scope);let de=Y[pe];if(!de){const fe=this.getLayerSourceCache(ie);if(!fe)continue;const Ee=fe.getRenderableIds(!0).map(Le=>fe.getTileByID(Le));J[pe]=Ee.slice(),de=Y[pe]=Ee.sort((Le,je)=>je.tileID.overscaledZ-Le.tileID.overscaledZ||(Le.tileID.isLessThan(je.tileID)?-1:1))}const ge=this.crossTileSymbolIndex.addLayer(ie,de,d.center.lng,d.projection);B=B||ge}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),O=O||this._layerOrderChanged||S===0,this._layerOrderChanged&&this.fire(new i.A("neworder")),(O||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),d.zoom))&&(this.pauseablePlacement=new sa(d,this._mergedOrder,O,v,S,E,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Y,J,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),H=!0),B&&this.pauseablePlacement.placement.setStale()),H||B){this._buildingIndex.onNewFrame(d.zoom);for(let Q=0;Q<this._mergedOrder.length;Q++){const ie=this._mergedLayers[this._mergedOrder[Q]];if(ie.type!=="symbol")continue;const pe=this.isLayerClipped(ie);this.placement.updateLayerOpacities(ie,Y[i.C(ie.source,ie.scope)],Q,pe?R:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}addImport(a,d){this._checkLoaded();const v=this.stylesheet.imports=this.stylesheet.imports||[];if(v.findIndex(({id:E})=>E===a.id)!==-1)return void this.fire(new i.z(new Error(`Import with id '${a.id}' already exists in the map's style.`)));if(!d)return v.push(a),this._loadImports([a],!0);const S=v.findIndex(({id:E})=>E===d);return S===-1&&this.fire(new i.z(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=v.slice(0,S).concat(a).concat(v.slice(S)),this._loadImports([a],!0,d)}updateImport(a,d){this._checkLoaded();const v=this.stylesheet.imports||[],S=this.getImportIndex(a);return S===-1?this:typeof d=="string"?(this.setImportUrl(a,d),this):(d.url&&d.url!==v[S].url&&this.setImportUrl(a,d.url),i.bv(d.config,v[S].config)||this.setImportConfig(a,d.config,d.data.schema),i.bv(d.data,v[S].data)||this.setImportData(a,d.data),this)}moveImport(a,d){this._checkLoaded();let v=this.stylesheet.imports||[];const S=this.getImportIndex(a);if(S===-1)return this;const E=this.getImportIndex(d);if(E===-1)return this;const R=v[S],O=this.fragments[S];return v=v.filter(({id:B})=>B!==a),this.fragments=this.fragments.filter(({id:B})=>B!==a),this.stylesheet.imports=v.slice(0,E).concat(R).concat(v.slice(E)),this.fragments=this.fragments.slice(0,E).concat(O).concat(this.fragments.slice(E)),this.mergeLayers(),this}setImportUrl(a,d){this._checkLoaded();const v=this.stylesheet.imports||[],S=this.getImportIndex(a);if(S===-1)return this;v[S].url=d;const E=this.fragments[S];return E.style=this._createFragmentStyle(v[S]),E.style.on("style.import.load",()=>this.mergeAll()),E.style.loadURL(d),this}setImportData(a,d){this._checkLoaded();const v=this.getImportIndex(a),S=this.stylesheet.imports||[];return v===-1?this:d?(this.fragments[v].style.setState(d),this._reloadImports(),this):(delete S[v].data,this.setImportUrl(a,S[v].url))}setImportConfig(a,d,v){this._checkLoaded();const S=this.getImportIndex(a),E=this.stylesheet.imports||[];if(S===-1)return this;d?E[S].config=d:delete E[S].config;const R=this.fragments[S];v&&R.style.stylesheet&&(R.style.stylesheet.schema=v);const O=R.style.stylesheet&&R.style.stylesheet.schema;return R.config=d,R.style.updateConfig(d,O),this.updateConfigDependencies(),this}removeImport(a){this._checkLoaded();const d=this.stylesheet.imports||[],v=this.getImportIndex(a);v!==-1&&(d.splice(v,1),this.fragments[v].style._remove(),this.fragments.splice(v,1),this._reloadImports())}getImportIndex(a){const d=(this.stylesheet.imports||[]).findIndex(v=>v.id===a);return d===-1&&this.fire(new i.z(new Error(`Import '${a}' does not exist in the map's style and cannot be updated.`))),d}getLayer(a){return this._mergedLayers[a]}getSources(){const a=[];for(const d in this._mergedOtherSourceCaches){const v=this._mergedOtherSourceCaches[d];v&&a.push(v.getSource())}return a}getSource(a,d){const v=this.getSourceCache(a,d);return v&&v.getSource()}getLayerSource(a){const d=this.getLayerSourceCache(a);return d&&d.getSource()}getSourceCache(a,d){const v=i.C(a,d);return this._mergedOtherSourceCaches[v]}getLayerSourceCache(a){const d=i.C(a.source,a.scope);return a.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(a){if(a==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[a]&&d.push(this._mergedOtherSourceCaches[a]),this._mergedSymbolSourceCaches[a]&&d.push(this._mergedSymbolSourceCaches[a]),d}updateSourceCaches(){const a=this._changes.getUpdatedSourceCaches();for(const d in a){const v=a[d];v==="reload"?this.reloadSource(d):v==="clear"&&this.clearSource(d)}}updateLayers(a){const d=this._changes.getUpdatedPaintProperties();for(const v of d){const S=this.getLayer(v);S&&S.updateTransitions(a)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(a){this.stylesheet.glyphs=a,this.glyphManager.setURL(a,this.scope)}getImages(a,d,v){this.imageManager.getImages(d.images,d.scope,v),this._updateTilesForChangedImages();const S=R=>{if(R){const O=d.images.map(B=>i.I.toString(B));R.setDependencies(d.tileID.key,d.type,O)}},E=i.C(d.source,d.scope);S(this._mergedOtherSourceCaches[E]),S(this._mergedSymbolSourceCaches[E])}rasterizeImages(a,d,v){this.imageManager.rasterizeImages(d,v)}getGlyphs(a,d,v){this.glyphManager.getGlyphs(d.stacks,d.scope,v)}getResource(a,d,v){return i.dh(d,v)}getOwnSourceCache(a){return this._otherSourceCaches[a]}getOwnLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}getOwnSourceCaches(a){const d=[];return this._otherSourceCaches[a]&&d.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&d.push(this._symbolSourceCaches[a]),d}_isSourceCacheLoaded(a){const d=this.getOwnSourceCaches(a);return d.length===0?(this.fire(new i.z(new Error(`There is no source with ID '${a}'`))),!1):d.every(v=>v.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(a,d){if(!this._clipLayerPresent&&a.type!=="fill-extrusion")return!1;const v=a.type==="fill-extrusion"&&a.sourceLayer==="building";if(a.is3D(!!this.terrain)){if(v||d&&d.type==="batched-model"||a.type==="model")return!0}else if(a.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(a=>{a.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}El.getSourceType=function(y){return Of[y]},El.setSourceType=function(y,a){Of[y]=a},El.registerForPluginStateChange=i.c$;var Lh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,qf=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Dv=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Zg="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ol=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,wm=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,vn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Cl=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Sm=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Ba=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,sl=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Wl=[];Fh(Lh,Wl),Fh(Dv,Wl),Fh(qf,Wl);const al={"_prelude_fog.vertex.glsl":wm,"_prelude_terrain.vertex.glsl":ol,"_prelude_shadow.vertex.glsl":Ba,"_prelude_fog.fragment.glsl":vn,"_prelude_shadow.fragment.glsl":sl,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Cl,"_prelude_raster_particle.glsl":Sm},Mu={};Qr("",ol),Qr(vn,wm),Qr(sl,Ba),Qr(Cl,""),Qr(Sm,"");const Mc=Qr(qf,Dv),zh=Lh;var Yl={background:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in highp vec3 v_normal;in highp float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
uniform lowp float u_opacity;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 apply_lighting_linear(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec4 color=vec4(v_color.rgb,1.0);vec3 normal=normalize(v_normal);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
shadowed_lighting_factor=dot(normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,v_color.rgb,v_color.a);color*=u_opacity;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_height));
#endif
#ifdef RENDER_CUTOFF
color*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_height);
#endif
glFragColor=vec4(linearTosRGB(color.rgb),color.a);
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3f;out vec4 v_color;out highp vec3 v_normal;out highp float v_height;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));vec3 pos=a_pos_3f;v_height=pos.z;gl_Position=u_matrix*vec4(pos,1.0);
#ifdef RENDER_SHADOWS
vec3 shadow_pos=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:Qr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Qr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Qr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Qr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Qr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Qr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:Qr(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:Qr(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Qr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Qr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Qr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Qr(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Qr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Qr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Qr(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Qr(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(abs(v_z_offset) > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
#endif
}`),terrainRaster:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Qr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Qr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Zg),skyboxGradient:Qr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Zg),skyboxCapture:Qr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Qr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Qr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Qr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Qr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:Qr("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:Qr("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:Qr("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:Qr("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Fh(y,a){const d=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let v of d)if(v=v.trim(),v[0]==="#"&&v.includes("if")&&!v.includes("endif")){v=v.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=v.split(" ");for(const E of S)a.includes(E)||a.push(E)}}function Qr(y,a){const d=/#include\s+"([^"]+)"/g,v=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let S=a.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);S&&(S=S.map(H=>{const Y=H.split(" ");return Y[Y.length-1]}),S=[...new Set(S)]);const E={},R=[],O=[];if(y=y.replace(d,(H,Y)=>(O.push(Y),"")),(a=a.replace(d,(H,Y)=>(R.push(Y),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let B=[...Wl];Fh(y,B),Fh(a,B);for(const H of[...R,...O])al[H]||console.error(`Undefined include: ${H}`),Mu[H]||(Mu[H]=[],Fh(al[H],Mu[H])),B=[...B,...Mu[H]];return{fragmentSource:y=y.replace(v,(H,Y,J,Q,ie)=>(E[ie]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
in ${J} ${Q} ${ie};
#else
uniform ${J} ${Q} u_${ie};
#endif
`:Y==="initialize"?`
#ifdef HAS_UNIFORM_u_${ie}
    ${J} ${Q} ${ie} = u_${ie};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ie}
    in ${J} ${Q} ${ie};
#endif
`:Y==="initialize-attribute"?"":void 0)),vertexSource:a=a.replace(v,(H,Y,J,Q,ie)=>{const pe=Q==="float"?"vec2":Q,de=ie.match(/color/)?"color":pe;return Y==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ie}
in ${J} ${Q} a_${ie};
#endif
`:E[ie]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
in ${J} ${pe} a_${ie};
out ${J} ${Q} ${ie};
#else
uniform ${J} ${Q} u_${ie};
#endif
`:Y==="initialize"?de==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = a_${ie};
#else
    ${J} ${Q} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = unpack_mix_${de}(a_${ie}, u_${ie}_t);
#else
    ${J} ${Q} ${ie} = u_${ie};
#endif
`:Y==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ie}
    in ${J} ${Q} a_${ie};
    out ${J} ${Q} ${ie};
#endif
`:Y==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ie}
    ${ie} = a_${ie};
#endif
`:void 0:Y==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
in ${J} ${pe} a_${ie};
#else
uniform ${J} ${Q} u_${ie};
#endif
`:Y==="define-instanced"?de==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ie}0;
in vec4 a_${ie}1;
in vec4 a_${ie}2;
in vec4 a_${ie}3;
#else
uniform ${J} ${Q} u_${ie};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${J} ${pe} a_${ie};
#else
uniform ${J} ${Q} u_${ie};
#endif
`:Y==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ie}
    ${J} ${Q} ${ie} = a_${ie};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${J} ${Q} ${ie} = a_${ie};
#else
    ${J} ${Q} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${J} ${Q} ${ie} = unpack_mix_${de}(a_${ie}, u_${ie}_t);
#else
    ${J} ${Q} ${ie} = u_${ie};
#endif
`}),staticAttributes:S,usedDefines:B,vertexIncludes:R,fragmentIncludes:O}}class yd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,d,v,S,E,R,O,B){this.context=a;let H=this.boundPaintVertexBuffers.length!==S.length;for(let J=0;!H&&J<S.length;J++)this.boundPaintVertexBuffers[J]!==S[J]&&(H=!0);let Y=this.boundDynamicVertexBuffers.length!==O.length;for(let J=0;!Y&&J<O.length;J++)this.boundDynamicVertexBuffers[J]!==O[J]&&(Y=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||H||Y||this.boundIndexBuffer!==E||this.boundVertexOffset!==R)this.freshBind(d,v,S,E,R,O,B);else{a.bindVertexArrayOES.set(this.vao);for(const J of O)J&&(J.bind(),B&&J.instanceCount&&J.setVertexAttribDivisor(a.gl,d,B));E&&E.dynamicDraw&&E.bind()}}freshBind(a,d,v,S,E,R,O){const B=a.numAttributes,H=this.context,Y=H.gl;this.vao&&this.destroy(),this.vao=H.gl.createVertexArray(),H.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=S,this.boundVertexOffset=E,this.boundDynamicVertexBuffers=R,d.enableAttributes(Y,a),d.bind(),d.setVertexAttribPointers(Y,a,E);for(const J of v)J.enableAttributes(Y,a),J.bind(),J.setVertexAttribPointers(Y,a,E);for(const J of R)J&&(J.enableAttributes(Y,a),J.bind(),J.setVertexAttribPointers(Y,a,E),O&&J.instanceCount&&J.setVertexAttribDivisor(Y,a,O));S&&S.bind(),H.currentNumAttributes=B}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function I1(y,a){const d=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new i.ac(0,v/d).toLngLat().lat,new i.ac(0,(v+1)/d).toLngLat().lat]}function ll(y,a,d,v,S,E,R){const O=y.context,B=O.gl,H=d.hillshadeFBO;if(!H)return;y.prepareDrawTile();const Y=y.isTileAffectedByFog(a),J=y.getOrCreateProgram("hillshade",{overrideFog:Y});O.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,H.colorAttachment.get());const Q=((ge,fe,Ee,Le)=>{const je=Ee.paint.get("hillshade-shadow-color"),Ye=Ee.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",$e=Ee.paint.get("hillshade-highlight-color"),Ue=Ee.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Fe=Ee.paint.get("hillshade-accent-color"),Ze=Ee.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",et=Ee.paint.get("hillshade-emissive-strength");let gt=i.al(Ee.paint.get("hillshade-illumination-direction"));if(Ee.paint.get("hillshade-illumination-anchor")==="viewport")gt-=ge.transform.angle;else if(ge.style&&ge.style.enable3dLights()&&ge.style.directionalLight){const kt=ge.style.directionalLight.properties.get("direction"),Dt=i.cR(kt.x,kt.y,kt.z);gt=i.al(Dt[1])}const ht=!ge.options.moving;return{u_matrix:Le||ge.transform.calculateProjMatrix(fe.tileID.toUnwrapped(),ht),u_image:0,u_latrange:I1(0,fe.tileID),u_light:[Ee.paint.get("hillshade-exaggeration"),gt],u_shadow:je.toRenderColor(Ye?null:Ee.lut),u_highlight:$e.toRenderColor(Ue?null:Ee.lut),u_emissive_strength:et,u_accent:Fe.toRenderColor(Ze?null:Ee.lut)}})(y,d,v,y.terrain?a.projMatrix:null);y.uploadCommonUniforms(O,J,a.toUnwrapped());const{tileBoundsBuffer:ie,tileBoundsIndexBuffer:pe,tileBoundsSegments:de}=y.getTileBoundsBuffers(d);J.draw(y,B.TRIANGLES,S,E,R,xr.disabled,Q,v.id,ie,pe,de)}function Tm(y,a,d){if(!a.needsDEMTextureUpload)return;const v=y.context,S=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||y.getTileTexture(d.stride);const E=d.getPixels();a.demTexture?a.demTexture.update(E,{premultiply:!1}):a.demTexture=new i.T(v,E,S.R32F,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Rc(y,a,d){const v=y.context,S=v.gl;if(!a.dem)return;const E=a.dem;if(v.activeTexture.set(S.TEXTURE1),Tm(y,a,E),!a.demTexture)return;a.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);const R=E.dim;v.activeTexture.set(S.TEXTURE0);let O=a.hillshadeFBO;if(!O){const Q=new i.T(v,{width:R,height:R,data:null},S.RGBA8);Q.bind(S.LINEAR,S.CLAMP_TO_EDGE),O=a.hillshadeFBO=v.createFramebuffer(R,R,!0,"renderbuffer"),O.colorAttachment.set(Q.texture)}v.bindFramebuffer.set(O.framebuffer),v.viewport.set([0,0,R,R]);const{tileBoundsBuffer:B,tileBoundsIndexBuffer:H,tileBoundsSegments:Y}=y.getMercatorTileBoundsBuffers(),J=[];y.linearFloatFilteringSupported()&&J.push("TERRAIN_DEM_FLOAT_FORMAT"),y.getOrCreateProgram("hillshadePrepare",{defines:J}).draw(y,S.TRIANGLES,Bn.disabled,yr.disabled,Nr.unblended,xr.disabled,((Q,ie)=>{const pe=ie.stride,de=i.bz();return i.c5(de,0,i.aj,-i.aj,0,0,1),i.bo(de,de,[0,-i.aj,0]),{u_matrix:de,u_image:1,u_dimension:[pe,pe],u_zoom:Q.overscaledZ}})(a.tileID,E),d.id,B,H,Y),a.needsHillshadePrepare=!1}class go{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Kg extends go{getDefault(){return i.am.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Bh extends go{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Pv extends go{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Qg extends go{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Hf extends go{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Ru extends go{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Jg extends go{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Em extends go{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class cl extends go{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class Na extends go{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Du extends go{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class ja extends go{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Dc extends go{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class vd extends go{getDefault(){const a=this.gl;return[a.ONE,a.ZERO,a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Nh extends go{getDefault(){return i.am.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class jh extends go{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(a,a),this.current=a,this.dirty=!1)}}class Gf extends go{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Ys extends go{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class zo extends go{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let co=class extends go{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class Pu extends go{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Pc extends go{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Cm extends go{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class eu extends go{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Wf extends go{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Iv extends go{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Yf extends go{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Xf extends go{getDefault(){return null}set(a){this.gl&&(a!==this.current||this.dirty)&&(this.gl.bindVertexArray(a),this.current=a,this.dirty=!1)}}class Vh extends go{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Zf extends go{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class kv extends go{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Iu extends go{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class ku extends Iu{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Ic extends Iu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class kc extends Iu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Am extends Ic{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Mm=(y,a,d)=>({u_matrix:y,u_image0:0,u_skirt_height:a,u_ground_shadow_factor:d}),Uh=(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:d,u_zoom_transition:S,u_merc_center:E,u_image0:0,u_frustum_tl:R,u_frustum_tr:O,u_frustum_br:B,u_frustum_bl:H,u_globe_pos:Y,u_globe_radius:J,u_viewport:Q,u_grid_matrix:de?Float32Array.from(de):new Float32Array(9),u_skirt_height:ie,u_far_z_cutoff:pe});function Kf(y,a){return y!=null&&a!=null&&!(!y.hasData()||!a.hasData())&&y.demTexture!=null&&a.demTexture!=null&&y.tileID.key!==a.tileID.key}const Xl=new class{constructor(){this.operations={}}newMorphing(y,a,d,v,S){if(y in this.operations){const E=this.operations[y];E.to.tileID.key!==d.tileID.key&&(E.queued=d)}else this.operations[y]={startTime:v,phase:0,duration:S,from:a,to:d,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const a=this.operations[y];return{from:a.from,to:a.to,phase:a.phase}}update(y){for(const a in this.operations){const d=this.operations[a];for(d.phase=(y-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,y)){delete this.operations[a];break}}}_nextOp(y,a){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=a,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},vs={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Ou(y,a,d){if(a===0)return 0;const v=a<1&&d===514?.25/a:1;return 6*Math.pow(1.5,22-y)*Math.max(a,1)*v}function Ov(y,a){const d=1<<y.z;return!a&&(y.x===0||y.x===d-1)||y.y===0||y.y===d-1}const Va=y=>({u_matrix:y});function Rm(y,a,d,v,S){if(S>0){const E=i.q.now(),R=(E-y.timeAdded)/S,O=a?(E-a.timeAdded)/S:-1,B=d.getSource(),H=v.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),Y=!a||Math.abs(a.tileID.overscaledZ-H)>Math.abs(y.tileID.overscaledZ-H),J=Y&&y.refreshedUponExpiration?1:i.aD(Y?R:1-O,0,1);return y.refreshedUponExpiration&&R>=1&&(y.refreshedUponExpiration=!1),a?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}class ey extends Gs{constructor(a){const d={type:"raster-dem",maxzoom:a.transform.maxZoom},v=new i.D(i.d0(),null),S=Lf("mock-dem",d,v,a.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,d){a.state="loaded",d(null)}}class ds extends Gs{constructor(a){const d=Lf("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new i.D(i.d0(),null),a.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,d,v){if(a.freezeTileCoverage)return;this.transform=a;const S=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((E,R)=>{if(E[R.key]="",!this._tiles[R.key]){const O=new wc(R,this._source.tileSize*R.overscaleFactor(),a.tileZoom);O.state="loaded",this._tiles[R.key]=O}return E},{});for(const E in this._tiles)E in S||(this.freeFBO(E),this._tiles[E].unloadVectorData(),delete this._tiles[E])}freeFBO(a){const d=this.proxyCachedFBO[a];if(d!==void 0){const v=Object.values(d);this.renderCachePool.push(...v),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Qf extends i.aM{constructor(a,d,v){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=d,this.projMatrix=v}}class _d extends i.dt{constructor(a,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},a.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,S,E]=function(B){const H=new i.ba,Y=new i.a_,J=131;H.reserve(17161),Y.reserve(33800);const Q=i.aj/128,ie=i.aj+Q/2,pe=ie+Q;for(let ge=-Q;ge<pe;ge+=Q)for(let fe=-Q;fe<pe;fe+=Q){const Ee=fe<0||fe>ie||ge<0||ge>ie?24575:0,Le=i.aD(Math.round(fe),0,i.aj),je=i.aD(Math.round(ge),0,i.aj);H.emplaceBack(Le+Ee,je)}const de=(ge,fe)=>{const Ee=fe*J+ge;Y.emplaceBack(Ee+1,Ee,Ee+J),Y.emplaceBack(Ee+J,Ee+J+1,Ee+1)};for(let ge=1;ge<129;ge++)for(let fe=1;fe<129;fe++)de(fe,ge);return[0,129].forEach(ge=>{for(let fe=0;fe<130;fe++)de(fe,ge),de(ge,fe)}),[H,Y,32768]}(),R=a.context;this.gridBuffer=R.createVertexBuffer(v,i.bc.members),this.gridIndexBuffer=R.createIndexBuffer(S),this.gridSegments=i.bd.simpleSegment(0,0,v.length,S.length),this.gridNoSkirtSegments=i.bd.simpleSegment(0,0,v.length,E),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ds(d.map),this.orthoMatrix=i.bz(),i.c5(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.aj,0,i.aj,0,1);const O=R.gl;this._overlapStencilMode=new yr({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ey(d.map),this._pendingGroundEffectLayers=[]}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),this._style=a,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,d,v){if(a&&a.terrain){this._style!==a&&(this.style=a,this._evaluationZoom=void 0);const S=a.terrain.properties,E=a.terrain.drapeRenderMode===0,R=a.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const O=a.terrain&&a.terrain.scope,B=S.get("source"),H=E?this._mockSourceCache:a.getSourceCache(B,O);if(!H)return void i.w(`Couldn't find terrain source "${B}".`);if(this.sourceCache=H,this._attenuationRange=a.terrain.getAttenuationRange(),this._exaggeration=R?this.calculateExaggeration(d):S.get("exaggeration"),!d.projection.requiresDraping&&R&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Y=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const J=this.getScaledDemTileSize();this.sourceCache.update(d,J,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Y(),this._initializing=!0),Y(),d.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(a){if(this._attenuationRange&&a.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(a.zoom);const d=this._previousCameraAltitude,v=a.getFreeCameraOptions().position.z/a.pixelsPerMeter*a.worldSize;this._previousCameraAltitude=v;const S=d!=null?v-d:Number.MAX_VALUE;if(Math.abs(S)<2)return this._exaggeration;const E=a.zoom,R=this._style.terrain;if(!this._previousUpdateTimestamp)return R.getExaggeration(E);let O=E-this._previousZoom;const B=this._previousUpdateTimestamp;let H=E;this._evaluationZoom!=null&&(H=this._evaluationZoom,Math.abs(E-H)>.5&&(O=.5*(E-H+O)),O*S<0&&(H+=O)),this._evaluationZoom=H;const Y=R.getExaggeration(H),J=Y===R.getExaggeration(Math.max(0,H-.1));if(J&&Math.abs(Y-this._exaggeration)<.01)return Y;let Q=Math.min(.1,.00375*(this._updateTimestamp-B));return(J||Y<.1||Math.abs(O)<1e-4)&&(Q=Math.min(.2,4*Q)),i.ai(this._exaggeration,Y,Q)}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._mergedSourceCaches)this._style._mergedSourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=v._centerAltitude===0&&this.getAtPointOrZero(i.ac.fromLngLat(v.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=d.getIds().map(B=>{const H=d.getTileByID(B).tileID;return H.projMatrix=v.calculateProjMatrix(H.toUnwrapped()),H});(function(B,H){const Y=H.transform.pointCoordinate(H.transform.getCameraPoint()),J=new i.P(Y.x,Y.y);B.sort((Q,ie)=>{if(ie.overscaledZ-Q.overscaledZ)return ie.overscaledZ-Q.overscaledZ;const pe=new i.P(Q.canonical.x+(1<<Q.canonical.z)*Q.wrap,Q.canonical.y),de=new i.P(ie.canonical.x+(1<<ie.canonical.z)*ie.wrap,ie.canonical.y),ge=J.mult(1<<Q.canonical.z);return ge.x-=.5,ge.y-=.5,ge.distSqr(pe)-ge.distSqr(de)})})(S,this.painter);const E=this.proxyToSource||{};this.proxyToSource={},S.forEach(B=>{this.proxyToSource[B.key]={}}),this.terrainTileForTile={};const R=this._style._mergedSourceCaches;for(const B in R){const H=R[B];if(!H.used||(H!==this.sourceCache&&this.resetTileLookupCache(H.id),this._setupProxiedCoordsForOrtho(H,a[B],E),H.usedForTerrain))continue;const Y=a[B];H.getSource().reparseOverscaled&&this._assignTerrainTiles(Y)}this.proxiedCoords[d.id]=S.map(B=>new Qf(B,B.key,this.orthoMatrix)),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(E),this.renderingToTexture=!1;const O={};this._visibleDemTiles=[];for(const B of this.proxyCoords){const H=this.terrainTileForTile[B.key];if(!H)continue;const Y=H.tileID.key;Y in O||(this._visibleDemTiles.push(H),O[Y]=Y)}}_assignTerrainTiles(a){this._initializing||a.forEach(d=>{if(this.terrainTileForTile[d.key])return;const v=this._findTileCoveringTileID(d,this.sourceCache);v&&(this.terrainTileForTile[d.key]=v)})}_prepareDEMTextures(){const a=this.painter.context,d=a.gl;for(const v in this.terrainTileForTile){const S=this.terrainTileForTile[v],E=S.dem;!E||S.demTexture&&!S.needsDEMTextureUpload||(a.activeTexture.set(d.TEXTURE1),Tm(this.painter,S,E))}}_prepareDemTileUniforms(a,d,v,S){if(!d||d.demTexture==null)return!1;const E=a.tileID.canonical,R=Math.pow(2,d.tileID.canonical.z-E.z),O=S||"";return v[`u_dem_tl${O}`]=[E.x*R%1,E.y*R%1],v[`u_dem_scale${O}`]=R,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let a=0;const d=this._visibleDemTiles.reduce((v,S)=>{if(!S.dem)return v;const E=S.dem.tree.minimums[0];return E>0&&a++,v+E},0);return a?d/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,d=a.gl;a.activeTexture.set(d.TEXTURE2);const v=this._getLoadedAreaMinimum(),S=new i.du({width:1,height:1},new Float32Array([v]));this._emptyDEMTextureDirty=!1;let E=this._emptyDEMTexture;return E?E.update(S,{premultiply:!1}):E=this._emptyDEMTexture=new i.T(a,S,d.R32F,{premultiply:!1}),E}setupElevationDraw(a,d,v){const S=this.painter.context,E=S.gl,R={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};R.u_exaggeration=this.exaggeration();let O=null,B=null,H=1;if(v&&v.morphing&&this._useVertexMorphing){const ie=v.morphing.srcDemTile,pe=v.morphing.dstDemTile;H=v.morphing.phase,ie&&pe&&(this._prepareDemTileUniforms(a,ie,R,"_prev")&&(B=ie),this._prepareDemTileUniforms(a,pe,R)&&(O=pe))}const Y=ie=>ie&&ie.demTexture&&this.painter.linearFloatFilteringSupported()?E.LINEAR:E.NEAREST;let J=null;var Q;if(this.enabled?B&&O?(J=O.demTexture,S.activeTexture.set(E.TEXTURE4),B.demTexture.bind(Y(B),E.CLAMP_TO_EDGE),R.u_dem_lerp=H):(O=this.terrainTileForTile[a.tileID.key],J=this._prepareDemTileUniforms(a,O,R)?O.demTexture:this.emptyDEMTexture):J=this.emptyDEMTexture,S.activeTexture.set(E.TEXTURE2),J&&(R.u_dem_size=(Q=J).size[0]===1?1:Q.size[0]-2,J.bind(Y(O),E.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(v&&v.useDepthForOcclusion,d,R),v&&v.useMeterToDem&&O){const ie=(1<<O.tileID.canonical.z)*i.c6(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;R.u_meter_to_dem=ie}if(v&&v.labelPlaneMatrixInv&&(R.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),d.setTerrainUniformValues(S,R),this.painter.transform.projection.name==="globe"){const ie=this.globeUniformValues(this.painter.transform,a.tileID.canonical,v&&v.useDenormalizedUpVectorScale);d.setGlobeUniformValues(S,ie)}}globeUniformValues(a,d,v){const S=a.projection;return{u_tile_tl_up:S.upVector(d,0,0),u_tile_tr_up:S.upVector(d,i.aj,0),u_tile_br_up:S.upVector(d,i.aj,i.aj),u_tile_bl_up:S.upVector(d,0,i.aj),u_tile_up_scale:v?i.dv(1):S.upVectorScale(d,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const d=this.painter,v=this.painter.context;a.length!==0&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(S,E,R,O,B){if(S.transform.projection.name==="globe")(function(H,Y,J,Q,ie){const pe=H.context,de=pe.gl;let ge,fe;const Ee=H.transform,Le=i.dl(H,pe,Ee),je=(kt,Dt)=>{if(fe===Dt)return;const tn=[vs[Dt],"PROJECTION_GLOBE_VIEW"];Le&&tn.push("CUSTOM_ANTIALIASING");const dt=H.isTileAffectedByFog(kt);ge=H.getOrCreateProgram("globeRaster",{defines:tn,overrideFog:dt}),fe=Dt},Ye=H.colorModeForRenderPass(),$e=new Bn(de.LEQUAL,Bn.ReadWrite,H.depthRangeFor3D);Xl.update(ie);const Ue=i.dm(Ee),Fe=[i.ay(Ee.center.lng),i.aH(Ee.center.lat)],Ze=H.globeSharedBuffers,et=[Ee.width*i.q.devicePixelRatio,Ee.height*i.q.devicePixelRatio],gt=Float32Array.from(Ee.globeMatrix),ht={useDenormalizedUpVectorScale:!0};{const kt=H.transform,Dt=Ou(kt.zoom,Y.exaggeration(),Y.sourceCache._source.tileSize);fe=-1;const tn=de.TRIANGLES;for(const dt of Q){const _t=J.getTile(dt),lt=yr.disabled,Nt=Y.prevTerrainTileForTile[dt.key],xt=Y.terrainTileForTile[dt.key];Kf(Nt,xt)&&Xl.newMorphing(dt.key,Nt,xt,ie,250),pe.activeTexture.set(de.TEXTURE0),_t.texture&&_t.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);const Ht=Xl.getMorphValuesForProxy(dt.key),Lt=Ht?1:0;Ht&&i.L(ht,{morphing:{srcDemTile:Ht.from,dstDemTile:Ht.to,phase:i.dk(Ht.phase)}});const Gt=i.dn(dt.canonical),Zt=i.dp(Gt.getCenter().lat),Fn=i.dq(dt.canonical,Gt,Zt,kt.worldSize/kt._pixelsPerMercatorPixel),$n=i.bh(i.dr(dt.canonical)),On=Uh(kt.expandedFarZProjMatrix,gt,Ue,$n,i.ah(kt.zoom),Fe,kt.frustumCorners.TL,kt.frustumCorners.TR,kt.frustumCorners.BR,kt.frustumCorners.BL,kt.globeCenterInViewSpace,kt.globeRadius,et,Dt,kt._farZ,Fn);if(je(dt,Lt),ge&&(Y.setupElevationDraw(_t,ge,ht),H.uploadCommonUniforms(pe,ge,dt.toUnwrapped()),Ze)){const[Zn,jn,ur]=Ze.getGridBuffers(Zt,Dt!==0);ge.draw(H,tn,$e,lt,Ye,xr.backCCW,On,"globe_raster",Zn,jn,ur)}}}if(Ze&&(H.renderDefaultNorthPole||H.renderDefaultSouthPole)){const kt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Le&&kt.push("CUSTOM_ANTIALIASING"),ge=H.getOrCreateProgram("globeRaster",{defines:kt});for(const Dt of Q){const{x:tn,y:dt,z:_t}=Dt.canonical,lt=dt===0,Nt=dt===(1<<_t)-1,[xt,Ht,Lt,Gt]=Ze.getPoleBuffers(_t,!1);if(Gt&&(lt||Nt)){const Zt=J.getTile(Dt);pe.activeTexture.set(de.TEXTURE0),Zt.texture&&Zt.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);let Fn=i.ds(_t,tn,Ee);const $n=i.bh(i.dr(Dt.canonical)),On=(Zn,jn)=>Zn.draw(H,de.TRIANGLES,$e,yr.disabled,Ye,xr.disabled,Uh(Ee.expandedFarZProjMatrix,Fn,Fn,$n,0,Fe,Ee.frustumCorners.TL,Ee.frustumCorners.TR,Ee.frustumCorners.BR,Ee.frustumCorners.BL,Ee.globeCenterInViewSpace,Ee.globeRadius,et,0,Ee._farZ),"globe_pole_raster",jn,Lt,Gt);Y.setupElevationDraw(Zt,ge,ht),H.uploadCommonUniforms(pe,ge,Dt.toUnwrapped()),lt&&H.renderDefaultNorthPole&&On(ge,xt),Nt&&H.renderDefaultSouthPole&&(Fn=i.cE(i.bz(),Fn,[1,-1,1]),On(ge,Ht))}}}})(S,E,R,O,B);else{const H=S.context,Y=H.gl;let J,Q;const ie=S.shadowRenderer,pe=Ih(S,S.longestCutoffRange),de=Ye=>{if(Q===Ye)return;const $e=[];$e.push(vs[Ye]),pe.shouldRenderCutoff&&$e.push("RENDER_CUTOFF"),ie&&($e.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ie.useNormalOffset&&$e.push("NORMAL_OFFSET")),J=S.getOrCreateProgram("terrainRaster",{defines:$e}),Q=Ye},ge=S.colorModeForRenderPass(),fe=new Bn(Y.LEQUAL,Bn.ReadWrite,S.depthRangeFor3D);Xl.update(B);const Ee=S.transform,Le=Ou(Ee.zoom,E.exaggeration(),E.sourceCache._source.tileSize);let je=[0,0,0];if(ie){const Ye=S.style.directionalLight,$e=S.style.ambientLight;Ye&&$e&&(je=Cc(S.style,Ye,$e))}{Q=-1;const Ye=Y.TRIANGLES,[$e,Ue]=[E.gridIndexBuffer,E.gridSegments];for(const Fe of O){const Ze=R.getTile(Fe),et=yr.disabled,gt=E.prevTerrainTileForTile[Fe.key],ht=E.terrainTileForTile[Fe.key];Kf(gt,ht)&&Xl.newMorphing(Fe.key,gt,ht,B,250),H.activeTexture.set(Y.TEXTURE0),Ze.texture&&Ze.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const kt=Xl.getMorphValuesForProxy(Fe.key),Dt=kt?1:0;let tn;kt&&(tn={morphing:{srcDemTile:kt.from,dstDemTile:kt.to,phase:i.dk(kt.phase)}});const dt=Mm(Fe.projMatrix,Ov(Fe.canonical,Ee.renderWorldCopies)?Le/10:Le,je);if(de(Dt),!J)continue;E.setupElevationDraw(Ze,J,tn);const _t=Fe.toUnwrapped();ie&&ie.setupShadows(_t,J),S.uploadCommonUniforms(H,J,_t,null,pe),J.draw(S,Ye,fe,et,ge,xr.backCCW,dt,"terrain_raster",E.gridBuffer,$e,Ue)}}}}(d,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const d=this.painter,v=this.painter.context,S=this.proxySourceCache,E=this.proxiedCoords[S.id],R=this._drapedRenderBatches.shift(),O=d.style.order,B=[];let H=0;for(const Y of E){const J=S.getTileByID(Y.proxyTileKey),Q=S.proxyCachedFBO[Y.key]?S.proxyCachedFBO[Y.key][a]:void 0,ie=Q!==void 0?S.renderCache[Q]:this.pool[H++],pe=Q!==void 0;if(J.texture=ie.tex,pe&&!ie.dirty){B.push(J.tileID);continue}let de;v.bindFramebuffer.set(ie.fb.framebuffer),this.renderedToTile=!1,ie.dirty&&(v.clear({color:i.am.transparent,stencil:0}),ie.dirty=!1);for(let ge=R.start;ge<=R.end;++ge){const fe=d.style._mergedLayers[O[ge]];if(fe.isHidden(d.transform.zoom))continue;const Ee=d.style.getLayerSourceCache(fe),Le=Ee?this.proxyToSource[Y.key][Ee.id]:[Y];if(!Le)continue;const je=Le;v.viewport.set([0,0,ie.fb.width,ie.fb.height]),de!==(Ee?Ee.id:null)&&(this._setupStencil(ie,Le,fe,Ee),de=Ee?Ee.id:null),d.renderLayer(d,Ee,fe,je)}if(this._drapedRenderBatches.length===0)for(const ge of this._pendingGroundEffectLayers){const fe=d.style._mergedLayers[O[ge]];if(fe.isHidden(d.transform.zoom))continue;const Ee=d.style.getLayerSourceCache(fe),Le=Ee?this.proxyToSource[Y.key][Ee.id]:[Y];if(!Le)continue;const je=Le;v.viewport.set([0,0,ie.fb.width,ie.fb.height]),de!==(Ee?Ee.id:null)&&(this._setupStencil(ie,Le,fe,Ee),de=Ee?Ee.id:null),d.renderLayer(d,Ee,fe,je)}this.renderedToTile?(ie.dirty=!0,B.push(J.tileID)):pe||--H,H===5&&(H=0,this.renderToBackBuffer(B))}return this.renderToBackBuffer(B),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,d.width,d.height]),R.end+1}postRender(){}isLayerOrderingCorrect(a){const d=a.order.length;let v=-1,S=d;for(let E=0;E<d;++E)this._style.isLayerDraped(a._mergedLayers[a.order[E]])?v=Math.max(v,E):S=Math.min(S,E);return S>v}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{a=Math.min(a,d.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,d,v){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter(E=>E.dem).map(E=>{const R=E.tileID,O=1<<R.overscaledZ,{x:B,y:H}=R.canonical,Y=B/O,J=(B+1)/O,Q=H/O,ie=(H+1)/O;return{minx:Y,miny:Q,maxx:J,maxy:ie,t:E.dem.tree.raycastRoot(Y,Q,J,ie,a,d,v),tile:E}});S.sort((E,R)=>(E.t!==null?E.t:Number.MAX_VALUE)-(R.t!==null?R.t:Number.MAX_VALUE));for(const E of S){if(E.t==null)return null;const R=E.tile.dem.tree.raycast(E.minx,E.miny,E.maxx,E.maxy,a,d,v);if(R!=null)return R}return null}_createFBO(){const a=this.painter.context,d=a.gl,v=this.drapeBufferSize;a.activeTexture.set(d.TEXTURE0);const S=new i.T(a,{width:v[0],height:v[1],data:null},d.RGBA8);S.bind(d.LINEAR,d.CLAMP_TO_EDGE);const E=a.createFramebuffer(v[0],v[1],!0,null);return E.colorAttachment.set(S.texture),E.depthAttachment=new Am(a,E.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,E.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):E.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:E,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const d=this._style._mergedLayers[a],v=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!v&&d.shouldRedrape():!v&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const v of this._style.getSources())if(v instanceof Yo){a=!0;break}if(!a)return;const d={};for(let v=0;v<this._style.order.length;++v){const S=this._style._mergedLayers[this._style.order[v]],E=this._style.getLayerSourceCache(S);if(E&&!d[E.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof i.ab){d[E.id]=!0;for(const R of this.proxyCoords){const O=this.proxyToSource[R.key][E.id];if(O)for(const B of O)this._clearRenderCacheForTile(E.id,B)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const v in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[v]._source instanceof Qa){a=!0;break}if(!a)return;const d={};for(let v=0;v<this._style.order.length;++v){const S=this._style._mergedLayers[this._style.order[v]],E=this._style.getLayerSourceCache(S);if(!E||d[E.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const R=S.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const B=this.proxyToSource[O.key][E.id];if(B)for(const H of B){const Y=Rm(E.getTile(H),E.findLoadedParent(H,0),E,this.painter.transform,R);(Y.opacity!==1||Y.mix!==0)&&this._clearRenderCacheForTile(E.id,H)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const a=this._style.order,d=a.length;if(d===0)return;const v=[];this._pendingGroundEffectLayers=[];let S,E=0,R=this._style._mergedLayers[a[E]];for(;!this._style.isLayerDraped(R)&&R.isHidden(this.painter.transform.zoom)&&++E<d;)R=this._style._mergedLayers[a[E]];for(;E<d;++E){const O=this._style._mergedLayers[a[E]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?S===void 0&&(S=E):(O.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(E),S!==void 0&&(v.push({start:S,end:E-1}),S=void 0)))}if(S!==void 0&&v.push({start:S,end:E-1}),v.length!==0){const O=v[v.length-1];this._pendingGroundEffectLayers.every(B=>B>O.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=v}_setupRenderCache(a){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const R=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let O=0;O<R.length;++O){const B=Object.values(R[O]);d.renderCachePool.push(...B)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,S=this._tilesDirty;for(let R=v.length-1;R>=0;R--){const O=v[R];if(d.getTileByID(O.key),d.proxyCachedFBO[O.key]!==void 0){const B=a[O.key],H=this.proxyToSource[O.key];let Y=0;for(const J in H){const Q=H[J],ie=B[J];if(!ie||ie.length!==Q.length||Q.some((pe,de)=>pe!==ie[de]||S[J]&&S[J].hasOwnProperty(pe.key))){Y=-1;break}++Y}for(const J in d.proxyCachedFBO[O.key])d.renderCache[d.proxyCachedFBO[O.key][J]].dirty=Y<0||Y!==Object.values(B).length}}const E=[...this._drapedRenderBatches];E.sort((R,O)=>O.end-O.start-(R.end-R.start));for(const R of E)for(const O of v){if(d.proxyCachedFBO[O.key])continue;let B=d.renderCachePool.pop();B===void 0&&d.renderCache.length<50&&(B=d.renderCache.length,d.renderCache.push(this._createFBO())),B!==void 0&&(d.proxyCachedFBO[O.key]={},d.proxyCachedFBO[O.key][R.start]=B,d.renderCache[B].dirty=!0)}this._tilesDirty={}}_setupStencil(a,d,v,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const E=this.painter.context,R=E.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let O;if(v.isTileClipped())O=d.length,this._overlapStencilMode.test={func:R.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:R.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(E.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):yr.disabled}_renderTileClippingMasks(a,d){const v=this.painter,S=this.painter.context,E=S.gl;v._tileClippingMaskIDs={},S.setColorMode(Nr.disabled),S.setDepthMode(Bn.disabled);const R=v.getOrCreateProgram("clippingMask");for(const O of a){const B=v._tileClippingMaskIDs[O.key]=--d;R.draw(v,E.TRIANGLES,Bn.disabled,new yr({func:E.ALWAYS,mask:0},B,255,E.KEEP,E.KEEP,E.REPLACE),Nr.disabled,xr.disabled,Va(O.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(a){const d=this.painter.transform;if(a.x<0||a.x>d.width||a.y<0||a.y>d.height)return null;const v=[a.x,a.y,1,1];i.aA(v,v,d.pixelMatrixInverse),i.cw(v,v,1/v[3]),v[0]/=d.worldSize,v[1]/=d.worldSize;const S=d._camera.position,E=i.c6(1,d.center.lat),R=[S[0],S[1],S[2]/E,0],O=i.cY([],v.slice(0,3),R);i.au(O,O);const B=this.raycast(R,O,this._exaggeration);return B!==null&&B?(i.bF(R,R,O,B),R[3]=R[2],R[2]*=E,R):null}_setupProxiedCoordsForOrtho(a,d,v){if(a.getSource()instanceof i.aP)return this._setupProxiedCoordsForImageSource(a,d,v);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const S=this.proxiedCoords[a.id]=[],E=this.proxyCoords;for(let B=0;B<E.length;B++){const H=E[B],Y=this._findTileCoveringTileID(H,a);if(Y){const J=this._createProxiedId(H,Y,v[H.key]&&v[H.key][a.id]);S.push(J),this.proxyToSource[H.key][a.id]=[J]}}let R=!1;const O=new Set;for(let B=0;B<d.length;B++){const H=a.getTile(d[B]);if(!H||!H.hasData())continue;const Y=this._findTileCoveringTileID(H.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==H.tileID.canonical.z){const J=this.proxyToSource[Y.tileID.key][a.id],Q=this._createProxiedId(Y.tileID,H,v[Y.tileID.key]&&v[Y.tileID.key][a.id]);J?J.splice(J.length-1,0,Q):this.proxyToSource[Y.tileID.key][a.id]=[Q];const ie=this.proxyToSource[Y.tileID.key][a.id];O.has(ie)||O.add(ie),S.push(Q),R=!0}}if(this._sourceTilesOverlap[a.id]=R,R&&this._debugParams.sortTilesHiZFirst)for(const B of O)B.sort((H,Y)=>Y.overscaledZ-H.overscaledZ)}_setupProxiedCoordsForImageSource(a,d,v){if(!a.getSource().loaded())return;const S=this.proxiedCoords[a.id]=[],E=this.proxyCoords,R=a.getSource(),O=R.tileID;if(!O)return;const B=new i.P(O.x,O.y)._div(1<<O.z),H=R.coordinates.map(i.ac.fromLngLat).reduce((J,Q)=>(J.min.x=Math.min(J.min.x,Q.x-B.x),J.min.y=Math.min(J.min.y,Q.y-B.y),J.max.x=Math.max(J.max.x,Q.x-B.x),J.max.y=Math.max(J.max.y,Q.y-B.y),J),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(J,Q)=>{const ie=J.wrap+J.canonical.x/(1<<J.canonical.z),pe=J.canonical.y/(1<<J.canonical.z),de=i.aj/(1<<J.canonical.z),ge=Q.wrap+Q.canonical.x/(1<<Q.canonical.z),fe=Q.canonical.y/(1<<Q.canonical.z);return ie+de<ge+H.min.x||ie>ge+H.max.x||pe+de<fe+H.min.y||pe>fe+H.max.y};for(let J=0;J<E.length;J++){const Q=E[J];for(let ie=0;ie<d.length;ie++){const pe=a.getTile(d[ie]);if(!pe||!pe.hasData()||Y(Q,pe.tileID))continue;const de=this._createProxiedId(Q,pe,v[Q.key]&&v[Q.key][a.id]),ge=this.proxyToSource[Q.key][a.id];ge?ge.push(de):this.proxyToSource[Q.key][a.id]=[de],S.push(de)}}}_createProxiedId(a,d,v){let S=this.orthoMatrix;if(v){const E=v.find(R=>R.key===d.tileID.key);if(E)return E}if(d.tileID.key!==a.key){const E=a.canonical.z-d.tileID.canonical.z;let R,O,B;S=i.bz();const H=d.tileID.wrap-a.wrap<<a.overscaledZ;E>0?(R=i.aj>>E,O=R*((d.tileID.canonical.x<<E)-a.canonical.x+H),B=R*((d.tileID.canonical.y<<E)-a.canonical.y)):(R=i.aj<<-E,O=i.aj*(d.tileID.canonical.x-(a.canonical.x+H<<-E)),B=i.aj*(d.tileID.canonical.y-(a.canonical.y<<-E))),i.c5(S,0,R,0,R,0,1),i.bo(S,S,[O,B,0])}return new Qf(d.tileID,a.key,S)}_findTileCoveringTileID(a,d){let v=d.getTile(a);if(v&&v.hasData())return v;const S=this._findCoveringTileCache[d.id],E=S[a.key];if(v=E?d.getTileByID(E):null,v&&v.hasData()||E===null)return v;let R=v?v.tileID:a,O=R.overscaledZ;const B=d.getSource().minzoom,H=[];if(!E){const J=d.getSource().maxzoom;if(a.canonical.z>=J){const Q=a.canonical.z-J;d.getSource().reparseOverscaled?(O=Math.max(a.canonical.z+2,d.transform.tileZoom),R=new i.aM(O,a.wrap,J,a.canonical.x>>Q,a.canonical.y>>Q)):Q!==0&&(O=J,R=new i.aM(O,a.wrap,J,a.canonical.x>>Q,a.canonical.y>>Q))}R.key!==a.key&&(H.push(R.key),v=d.getTile(R))}const Y=J=>{H.forEach(Q=>{S[Q]=J}),H.length=0};for(O-=1;O>=B&&(!v||!v.hasData());O--){v&&Y(v.tileID.key);const J=R.calculateScaledKey(O);if(v=d.getTileByID(J),v&&v.hasData())break;const Q=S[J];if(Q===null)break;Q===void 0?H.push(J):v=d.getTileByID(Q)}return Y(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,d){let v=this._tilesDirty[a];v||(v=this._tilesDirty[a]={}),v[d.key]=!0}}function $h(y,a,d){const v=function(O,B,H){const Y=i.bE(B,O),J=i.bE(H,[.2126,.7152,.0722]),Q=(pe,de,ge)=>(1-ge)*pe+ge*de,ie=Q(1-.3*Math.min(J,1),1,Math.min(Y+1,1));return Q(.92,1,Math.asin(i.aD(B[2],-1,1))/Math.PI+.5)*ie}(y,[0,0,1],a),S=[0,0,0];i.b$(S,d.slice(0,3),v);const E=[0,0,0];i.b$(E,a.slice(0,3),y[2]);const R=[0,0,0];return i.cU(R,S,E),i.cX(R)}const Jf=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],xd=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Lu{static cacheKey(a,d,v,S){let E=`${d}${S?S.cacheKey:""}`;for(const R of v)a.usedDefines.includes(R)&&(E+=`/${R}`);return E}constructor(a,d,v,S,E,R){const O=a.gl;this.program=O.createProgram(),this.configuration=S,this.name=d,this.fixedDefines=[...R];const B=S?S.getBinderAttributes():[],H=(v.staticAttributes||[]).concat(B);let Y=S?S.defines():[];Y=Y.concat(R.map(ge=>`#define ${ge}`));const J=`#version 300 es
`;let Q=J+Y.concat("precision mediump float;",zh,Mc.fragmentSource).join(`
`);for(const ge of v.fragmentIncludes)Q+=`
${al[ge]}`;Q+=`
${v.fragmentSource}`;let ie=J+Y.concat("precision highp float;",zh,Mc.vertexSource).join(`
`);for(const ge of v.vertexIncludes)ie+=`
${al[ge]}`;this.forceManualRenderingForInstanceIDShaders=a.forceManualRenderingForInstanceIDShaders&&v.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ie+=`
uniform int u_instanceID;
`),ie+=`
${v.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ie=ie.replaceAll("gl_InstanceID","u_instanceID"));const pe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(pe,Q),O.compileShader(pe),O.attachShader(this.program,pe);const de=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(de,ie),O.compileShader(de),O.attachShader(this.program,de),this.attributes={},this.numAttributes=H.length;for(let ge=0;ge<this.numAttributes;ge++)if(H[ge]){const fe=H[ge].startsWith("a_")?H[ge]:`a_${H[ge]}`;O.bindAttribLocation(this.program,ge,fe),this.attributes[fe]=ge}O.linkProgram(this.program),O.deleteShader(de),O.deleteShader(pe),this.fixedUniforms=E(a),this.binderUniforms=S?S.getUniforms(a):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(ge=>({u_instanceID:new i.cc(ge)}))(a)),(R.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(ge=>({u_dem:new i.cc(ge),u_dem_prev:new i.cc(ge),u_dem_tl:new i.c9(ge),u_dem_scale:new i.cb(ge),u_dem_tl_prev:new i.c9(ge),u_dem_scale_prev:new i.cb(ge),u_dem_size:new i.cb(ge),u_dem_lerp:new i.cb(ge),u_exaggeration:new i.cb(ge),u_depth:new i.cc(ge),u_depth_size_inv:new i.c9(ge),u_depth_range_unpack:new i.c9(ge),u_occluder_half_size:new i.cb(ge),u_occlusion_depth_offset:new i.cb(ge),u_meter_to_dem:new i.cb(ge),u_label_plane_matrix_inv:new i.c8(ge)}))(a)),R.includes("GLOBE")&&(this.globeUniforms=(ge=>({u_tile_tl_up:new i.ca(ge),u_tile_tr_up:new i.ca(ge),u_tile_br_up:new i.ca(ge),u_tile_bl_up:new i.ca(ge),u_tile_up_scale:new i.cb(ge)}))(a)),R.includes("FOG")&&(this.fogUniforms=(ge=>({u_fog_matrix:new i.c8(ge),u_fog_range:new i.c9(ge),u_fog_color:new i.cQ(ge),u_fog_horizon_blend:new i.cb(ge),u_fog_vertical_limit:new i.c9(ge),u_fog_temporal_offset:new i.cb(ge),u_frustum_tl:new i.ca(ge),u_frustum_tr:new i.ca(ge),u_frustum_br:new i.ca(ge),u_frustum_bl:new i.ca(ge),u_globe_pos:new i.ca(ge),u_globe_radius:new i.cb(ge),u_globe_transition:new i.cb(ge),u_is_globe:new i.cc(ge),u_viewport:new i.c9(ge)}))(a)),R.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ge=>({u_cutoff_params:new i.cQ(ge)}))(a)),R.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ge=>({u_lighting_ambient_color:new i.ca(ge),u_lighting_directional_dir:new i.ca(ge),u_lighting_directional_color:new i.ca(ge),u_ground_radiance:new i.ca(ge)}))(a)),R.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ge=>({u_light_matrix_0:new i.c8(ge),u_light_matrix_1:new i.c8(ge),u_fade_range:new i.c9(ge),u_shadow_normal_offset:new i.ca(ge),u_shadow_intensity:new i.cb(ge),u_shadow_texel_size:new i.cb(ge),u_shadow_map_resolution:new i.cb(ge),u_shadow_direction:new i.ca(ge),u_shadow_bias:new i.ca(ge),u_shadowmap_0:new i.cc(ge),u_shadowmap_1:new i.cc(ge)}))(a))}}setTerrainUniformValues(a,d){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in d)v[S]&&v[S].set(this.program,S,d[S])}}setGlobeUniformValues(a,d){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in d)v[S]&&v[S].set(this.program,S,d[S])}}setFogUniformValues(a,d){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in d)v[S].set(this.program,S,d[S])}}setCutoffUniformValues(a,d){if(!this.cutoffUniforms)return;const v=this.cutoffUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in d)v[S].set(this.program,S,d[S])}}setLightsUniformValues(a,d){if(!this.lightsUniforms)return;const v=this.lightsUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in d)v[S].set(this.program,S,d[S])}}setShadowUniformValues(a,d){if(this.failedToCreate||!this.shadowUniforms)return;const v=this.shadowUniforms;a.program.set(this.program);for(const S in d)v[S].set(this.program,S,d[S])}_drawDebugWireframe(a,d,v,S,E,R,O,B,H,Y){const J=a.options.wireframe;if(J.terrain===!1&&J.layers2D===!1&&J.layers3D===!1)return;const Q=a.context;if(!(!(!J.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!J.layers2D||a._terrain&&a._terrain.renderingToTexture||!Jf.includes(this.name))||!(!J.layers3D||!xd.includes(this.name))))return;const ie=Q.gl,pe=a.wireframeDebugCache.getLinesFromTrianglesBuffer(a.frameCounter,E,Q);if(!pe)return;const de=[...this.fixedDefines];de.push("DEBUG_WIREFRAME");const ge=a.getOrCreateProgram(this.name,{config:this.configuration,defines:de});Q.program.set(ge.program);const fe=(je,Ye,$e)=>{if(Ye[je]&&$e[je])for(const Ue in Ye[je])$e[je][Ue]&&$e[je][Ue].set($e.program,Ue,Ye[je][Ue].current)};H&&H.setUniforms(ge.program,Q,ge.binderUniforms,O,{zoom:B}),fe("fixedUniforms",this,ge),fe("terrainUniforms",this,ge),fe("globeUniforms",this,ge),fe("fogUniforms",this,ge),fe("lightsUniforms",this,ge),fe("shadowUniforms",this,ge),pe.bind(),Q.setColorMode(new Nr([ie.ONE,ie.ONE_MINUS_SRC_ALPHA,ie.ZERO,ie.ONE],i.am.transparent,[!0,!0,!0,!1])),Q.setDepthMode(new Bn(d.func===ie.LESS?ie.LEQUAL:d.func,Bn.ReadOnly,d.range)),Q.setStencilMode(yr.disabled);const Ee=3*R.primitiveLength*2,Le=3*R.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const je=Y||1;for(let Ye=0;Ye<je;++Ye)ge.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ye),ie.drawElements(ie.LINES,Ee,ie.UNSIGNED_SHORT,Le)}else Y&&Y>1?ie.drawElementsInstanced(ie.LINES,Ee,ie.UNSIGNED_SHORT,Le,Y):ie.drawElements(ie.LINES,Ee,ie.UNSIGNED_SHORT,Le);E.bind(),Q.program.set(this.program),Q.setDepthMode(d),Q.setStencilMode(v),Q.setColorMode(S)}checkUniforms(a,d,v){if(this.fixedDefines.includes(d)){for(const S of Object.keys(v))if(!v[S].initialized)throw new Error(`Program '${this.name}', from draw '${a}': uniform ${S} not set but required by ${d} being defined`)}}draw(a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge){const fe=a.context,Ee=fe.gl;if(this.failedToCreate)return;fe.program.set(this.program),fe.setDepthMode(v),fe.setStencilMode(S),fe.setColorMode(E),fe.setCullFace(R);for(const Ye of Object.keys(this.fixedUniforms))this.fixedUniforms[Ye].set(this.program,Ye,O[Ye]);pe&&pe.setUniforms(this.program,fe,this.binderUniforms,Q,{zoom:ie});const Le={[Ee.POINTS]:1,[Ee.LINES]:2,[Ee.TRIANGLES]:3,[Ee.LINE_STRIP]:1}[d];this.checkUniforms(B,"RENDER_SHADOWS",this.shadowUniforms);const je=ge&&ge>0?1:void 0;for(const Ye of J.get()){const $e=Ye.vaos||(Ye.vaos={});if(($e[B]||($e[B]=new yd)).bind(fe,this,H,pe?pe.getPaintVertexBuffers():[],Y,Ye.vertexOffset,de||[],je),this.forceManualRenderingForInstanceIDShaders){const Ue=ge||1;for(let Fe=0;Fe<Ue;++Fe)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Fe),Y?Ee.drawElements(d,Ye.primitiveLength*Le,Ee.UNSIGNED_SHORT,Ye.primitiveOffset*Le*2):Ee.drawArrays(d,Ye.vertexOffset,Ye.vertexLength)}else ge&&ge>1?Ee.drawElementsInstanced(d,Ye.primitiveLength*Le,Ee.UNSIGNED_SHORT,Ye.primitiveOffset*Le*2,ge):Y?Ee.drawElements(d,Ye.primitiveLength*Le,Ee.UNSIGNED_SHORT,Ye.primitiveOffset*Le*2):Ee.drawArrays(d,Ye.vertexOffset,Ye.vertexLength);d===Ee.TRIANGLES&&Y&&this._drawDebugWireframe(a,v,S,E,Y,Ye,Q,ie,pe,ge)}}}function Dm(y,a,d=0){const v=Math.pow(2,a.tileID.overscaledZ),S=a.tileSize*Math.pow(2,y.transform.tileZoom)/v,E=S*(a.tileID.canonical.x+a.tileID.wrap*v),R=S*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.aw(a,1,y.transform.tileZoom),u_pixel_coord_upper:[E>>16,R>>16],u_pixel_coord_lower:[65535&E,65535&R],u_pattern_transition:d}}const ep={terrain:0,flat:1},K0=i.bz(),bd=(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe)=>{const Ee=a.style.light,Le=Ee.properties.get("position"),je=[Le.x,Le.y,Le.z],Ye=i.dx();Ee.properties.get("anchor")==="viewport"&&(i.dy(Ye,-a.transform.angle),i.dz(je,je,Ye));const $e=Ee.properties.get("color"),Ue=a.transform,Fe={u_matrix:y,u_lightpos:je,u_lightintensity:Ee.properties.get("intensity"),u_lightcolor:[$e.r,$e.g,$e.b],u_vertical_gradient:+d,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:K0,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:ep[H],u_base_type:ep[Y],u_ao:S,u_edge_radius:E,u_width_scale:R,u_flood_light_color:pe,u_vertical_scale:de,u_flood_light_intensity:ge,u_ground_shadow_factor:fe};return Ue.projection.name==="globe"&&(Fe.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],Fe.u_zoom_transition=J,Fe.u_inv_rot_matrix=ie,Fe.u_merc_center=Q,Fe.u_up_dir=Ue.projection.upVector(new i.cp(0,0,0),Q[0]*i.aj,Q[1]*i.aj),Fe.u_height_lift=B),Fe},qh=(y,a,d,v,S,E)=>({u_matrix:y,u_edge_radius:a,u_width_scale:d,u_vertical_scale:v,u_height_type:ep[S],u_base_type:ep[E]}),Lv=(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe)=>{const Ee=bd(y,a,d,v,S,E,R,O,H,Y,J,Q,ie,pe,de,ge,1,[0,0,0]),Le={u_height_factor:-Math.pow(2,O.overscaledZ)/B.tileSize/8};return i.l(Ee,Dm(a,B,fe),Le)},Pm=(y,a,d)=>({u_matrix:y,u_emissive_strength:a,u_ground_shadow_factor:d}),zv=(y,a,d,v,S,E=0)=>i.l(Pm(y,a,S),Dm(d,v,E)),Im=(y,a,d,v)=>({u_matrix:y,u_world:d,u_emissive_strength:a,u_ground_shadow_factor:v}),Q0=(y,a,d,v,S,E,R=0)=>i.l(zv(y,a,d,v,E,R),{u_world:S}),tp=(y,a)=>({u_matrix:y,u_ground_shadow_factor:a}),Hh=(y,a,d,v,S)=>({u_matrix:y,u_camera_pos:[a[0],a[1],a[2]],u_depth_bias:d,u_height_scale:v,u_reset_depth:S}),Fv=(y,a,d,v)=>{const S=i.aj/d.tileSize;return{u_matrix:y,u_camera_to_center_distance:a.getCameraToCenterDistance(v),u_extrude_scale:[a.pixelsToGLUnits[0]/S,a.pixelsToGLUnits[1]/S]}},tu=(y,a,d=1)=>({u_matrix:y,u_color:a.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),Bv=i.bz(),np=(y,a,d,v,S,E,R)=>{const O=y.transform,B=O.projection.name==="globe",H=B?i.dA(O.zoom,a.canonical)*O._pixelsPerMercatorPixel:i.aw(d,1,E),Y={u_matrix:a.projMatrix,u_extrude_scale:H,u_intensity:R,u_inv_rot_matrix:Bv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(B){Y.u_inv_rot_matrix=v,Y.u_merc_center=S,Y.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],Y.u_zoom_transition=i.ah(O.zoom);const J=S[0]*i.aj,Q=S[1]*i.aj;Y.u_up_dir=O.projection.upVector(new i.cp(0,0,0),J,Q)}return Y};function ty(y,[a,d,v,S],[E,R]){if(E===R)return[0,0,0,0];const O=255*(y-1)/(y*(R-E));return[a*O,d*O,v*O,S*O]}function km(y,a,[d,v]){return d===v?0:.5/y+(a-d)*(y-1)/(y*(v-d))}const Ua=(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe,Ee,Le,je)=>({u_matrix:y,u_normalize_matrix:a,u_globe_matrix:d,u_merc_matrix:v,u_grid_matrix:S,u_tl_parent:E,u_scale_parent:H,u_fade_t:Y.mix,u_opacity:Y.opacity*J.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:J.paint.get("raster-brightness-min"),u_brightness_high:J.paint.get("raster-brightness-max"),u_saturation_factor:i.dB(J.paint.get("raster-saturation")),u_contrast_factor:i.dC(J.paint.get("raster-contrast")),u_spin_weights:ny(J.paint.get("raster-hue-rotate")),u_perspective_transform:Q,u_raster_elevation:ie,u_zoom_transition:R,u_merc_center:O,u_cutoff_params:B,u_colorization_mix:ty(i.dD,de,fe),u_colorization_offset:km(i.dD,ge,fe),u_color_ramp:pe,u_texture_offset:[Le/(Ee+2*Le),Ee/(Ee+2*Le)],u_texture_res:[Ee+2*Le,Ee+2*Le],u_emissive_strength:je});function ny(y){y*=Math.PI/180;const a=Math.sin(y),d=Math.cos(y);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const $a=.05,nu=(y,a,d,v,S,E,R,O,B,H,Y,J)=>({u_matrix:y,u_normalize_matrix:a,u_globe_matrix:d,u_merc_matrix:v,u_grid_matrix:S,u_tl_parent:E,u_scale_parent:H,u_fade_t:Y.mix,u_opacity:Y.opacity,u_image0:0,u_image1:1,u_raster_elevation:J,u_zoom_transition:R,u_merc_center:O,u_cutoff_params:B}),Oc=(y,a,d,v,S,E,R,O,B,H)=>({u_particle_texture:y,u_particle_texture_side_len:a,u_tile_offset:d,u_velocity:v,u_color_ramp:E,u_velocity_res:S,u_max_speed:R,u_uv_offset:O,u_data_scale:[255*B[0],255*B[1]],u_data_offset:H,u_particle_pos_scale:1.1,u_particle_pos_offset:[$a,$a]}),rp=(y,a,d,v,S,E,R,O,B,H)=>({u_particle_texture:y,u_particle_texture_side_len:a,u_velocity:d,u_velocity_res:v,u_max_speed:S,u_speed_factor:E,u_reset_rate:R,u_rand_seed:Math.random(),u_uv_offset:O,u_data_scale:[255*B[0],255*B[1]],u_data_offset:H,u_particle_pos_scale:1.1,u_particle_pos_offset:[$a,$a]}),Om=i.bz(),ip=(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe,Ee,Le,je,Ye,$e)=>{const Ue=S.transform,Fe={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Ue.getCameraToCenterDistance(Ee),u_rotate_symbol:+d,u_aspect_ratio:Ue.width/Ue.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:R,u_coord_matrix:O,u_is_text:+H,u_elevation_from_sea:B?1:0,u_pitch_with_map:+v,u_texsize:Y,u_texsize_icon:J,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Om,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Om,u_up_vector:[0,-1,0],u_color_adj_mat:je,u_icon_transition:Ye||0,u_gamma_scale:v?S.transform.getCameraToCenterDistance(Ee)*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:1,u_scale_factor:$e||1,u_ground_shadow_factor:Le,u_inv_matrix:i.bi(i.bz(),R)};return Ee.name==="globe"&&(Fe.u_tile_id=[ie.canonical.x,ie.canonical.y,1<<ie.canonical.z],Fe.u_zoom_transition=pe,Fe.u_inv_rot_matrix=ge,Fe.u_merc_center=de,Fe.u_camera_forward=Ue._camera.forward(),Fe.u_ecef_origin=i.dE(Ue.globeMatrix,ie.toUnwrapped()),Fe.u_tile_matrix=Float32Array.from(Ue.globeMatrix),Fe.u_up_vector=fe),Fe},wd=(y,a,d,v)=>({u_matrix:y,u_emissive_strength:a,u_opacity:d,u_color:v}),op=(y,a,d,v,S,E,R,O,B)=>i.l(function(H,Y,J,Q,ie,pe){const{width:de,height:ge}=Q.imageManager.getPixelSize(Y),fe=Math.pow(2,pe.tileID.overscaledZ),Ee=pe.tileSize*Math.pow(2,Q.transform.tileZoom)/fe,Le=Ee*(pe.tileID.canonical.x+pe.tileID.wrap*fe),je=Ee*pe.tileID.canonical.y;return{u_image:0,u_pattern_tl:J.tl,u_pattern_br:J.br,u_texsize:[de,ge],u_pattern_size:J.displaySize,u_pattern_units_to_pixels:ie?[Q.transform.width,-1*Q.transform.height]:[1/i.aw(pe,1,Q.transform.tileZoom),1/i.aw(pe,1,Q.transform.tileZoom)],u_pixel_coord_upper:[Le>>16,je>>16],u_pixel_coord_lower:[65535&Le,65535&je]}}(0,E,R,v,O,B),{u_matrix:y,u_emissive_strength:a,u_opacity:d}),Lm=new Float32Array(i.bx([])),Sd=(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie=[0,0,0],pe)=>{const de=S.style.light,ge=de.properties.get("position"),fe=[-ge.x,-ge.y,ge.z],Ee=i.dx();de.properties.get("anchor")==="viewport"&&(i.dy(Ee,-S.transform.angle),i.dz(fe,fe,Ee));const Le=Y.alphaMode==="MASK",je=de.properties.get("color").toRenderColor(null),Ye=Q.paint.get("model-ambient-occlusion-intensity"),$e=Q.paint.get("model-color").constantOr(i.am.white).toRenderColor(null),Ue=Q.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:y,u_lighting_matrix:a,u_normal_matrix:d,u_node_matrix:v||Lm,u_lightpos:fe,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[je.r,je.g,je.b],u_camera_pos:ie,u_opacity:E,u_baseTextureIsAlpha:0,u_alphaMask:+Le,u_alphaCutoff:Y.alphaCutoff,u_baseColorFactor:[R.r,R.g,R.b,R.a],u_emissiveFactor:[O[0],O[1],O[2],1],u_metallicFactor:B,u_roughnessFactor:H,u_baseColorTexture:aa.BaseColor,u_metallicRoughnessTexture:aa.MetallicRoughness,u_normalTexture:aa.Normal,u_occlusionTexture:aa.Occlusion,u_emissionTexture:aa.Emission,u_lutTexture:aa.LUT,u_color_mix:[$e.r,$e.g,$e.b,Ue],u_aoIntensity:Ye,u_emissive_strength:J,u_occlusionTextureTransform:pe||[0,0,0,0]}},Gh=(y,a=Lm,d=Lm)=>({u_matrix:y,u_instance:a,u_node_matrix:d}),ry={fillExtrusion:y=>({u_matrix:new i.c8(y),u_lightpos:new i.ca(y),u_lightintensity:new i.cb(y),u_lightcolor:new i.ca(y),u_vertical_gradient:new i.cb(y),u_opacity:new i.cb(y),u_edge_radius:new i.cb(y),u_width_scale:new i.cb(y),u_ao:new i.c9(y),u_height_type:new i.cc(y),u_base_type:new i.cc(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_up_dir:new i.ca(y),u_height_lift:new i.cb(y),u_flood_light_color:new i.ca(y),u_vertical_scale:new i.cb(y),u_flood_light_intensity:new i.cb(y),u_ground_shadow_factor:new i.ca(y)}),fillExtrusionDepth:y=>({u_matrix:new i.c8(y),u_edge_radius:new i.cb(y),u_width_scale:new i.cb(y),u_vertical_scale:new i.cb(y),u_height_type:new i.cc(y),u_base_type:new i.cc(y)}),fillExtrusionPattern:y=>({u_matrix:new i.c8(y),u_lightpos:new i.ca(y),u_lightintensity:new i.cb(y),u_lightcolor:new i.ca(y),u_vertical_gradient:new i.cb(y),u_height_factor:new i.cb(y),u_edge_radius:new i.cb(y),u_width_scale:new i.cb(y),u_ao:new i.c9(y),u_height_type:new i.cc(y),u_base_type:new i.cc(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_up_dir:new i.ca(y),u_height_lift:new i.cb(y),u_image:new i.cc(y),u_texsize:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_tile_units_to_pixels:new i.cb(y),u_opacity:new i.cb(y),u_pattern_transition:new i.cb(y)}),fillExtrusionGroundEffect:y=>({u_matrix:new i.c8(y),u_opacity:new i.cb(y),u_ao_pass:new i.cb(y),u_meter_to_tile:new i.cb(y),u_ao:new i.c9(y),u_flood_light_intensity:new i.cb(y),u_flood_light_color:new i.ca(y),u_attenuation:new i.cb(y),u_edge_radius:new i.cb(y),u_fb:new i.cc(y),u_fb_size:new i.cb(y),u_dynamic_offset:new i.cb(y)}),fill:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_ground_shadow_factor:new i.ca(y)}),fillPattern:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_image:new i.cc(y),u_texsize:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_tile_units_to_pixels:new i.cb(y),u_ground_shadow_factor:new i.ca(y),u_pattern_transition:new i.cb(y)}),fillOutline:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_world:new i.c9(y),u_ground_shadow_factor:new i.ca(y)}),fillOutlinePattern:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_world:new i.c9(y),u_image:new i.cc(y),u_texsize:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_tile_units_to_pixels:new i.cb(y),u_ground_shadow_factor:new i.ca(y),u_pattern_transition:new i.cb(y)}),building:y=>({u_matrix:new i.c8(y),u_normal_matrix:new i.c8(y),u_opacity:new i.cb(y)}),buildingDepth:y=>({u_matrix:new i.c8(y)}),elevatedStructuresDepth:y=>({u_matrix:new i.c8(y),u_depth_bias:new i.cb(y)}),elevatedStructures:y=>({u_matrix:new i.c8(y),u_ground_shadow_factor:new i.ca(y)}),elevatedStructuresDepthReconstruct:y=>({u_matrix:new i.c8(y),u_camera_pos:new i.ca(y),u_depth_bias:new i.cb(y),u_height_scale:new i.cb(y),u_reset_depth:new i.cb(y)}),circle:i.dF,collisionBox:y=>({u_matrix:new i.c8(y),u_camera_to_center_distance:new i.cb(y),u_extrude_scale:new i.c9(y)}),collisionCircle:y=>({u_matrix:new i.c8(y),u_inv_matrix:new i.c8(y),u_camera_to_center_distance:new i.cb(y),u_viewport_size:new i.c9(y)}),debug:y=>({u_color:new i.di(y),u_matrix:new i.c8(y),u_overlay:new i.cc(y),u_overlay_scale:new i.cb(y)}),clippingMask:y=>({u_matrix:new i.c8(y)}),heatmap:y=>({u_extrude_scale:new i.cb(y),u_intensity:new i.cb(y),u_matrix:new i.c8(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_up_dir:new i.ca(y)}),heatmapTexture:y=>({u_image:new i.cc(y),u_color_ramp:new i.cc(y),u_opacity:new i.cb(y)}),hillshade:y=>({u_matrix:new i.c8(y),u_image:new i.cc(y),u_latrange:new i.c9(y),u_light:new i.c9(y),u_shadow:new i.di(y),u_highlight:new i.di(y),u_emissive_strength:new i.cb(y),u_accent:new i.di(y)}),hillshadePrepare:y=>({u_matrix:new i.c8(y),u_image:new i.cc(y),u_dimension:new i.c9(y),u_zoom:new i.cb(y)}),line:i.dG,linePattern:i.dH,raster:y=>({u_matrix:new i.c8(y),u_normalize_matrix:new i.c8(y),u_globe_matrix:new i.c8(y),u_merc_matrix:new i.c8(y),u_grid_matrix:new i.dj(y),u_tl_parent:new i.c9(y),u_scale_parent:new i.cb(y),u_fade_t:new i.cb(y),u_opacity:new i.cb(y),u_image0:new i.cc(y),u_image1:new i.cc(y),u_brightness_low:new i.cb(y),u_brightness_high:new i.cb(y),u_saturation_factor:new i.cb(y),u_contrast_factor:new i.cb(y),u_spin_weights:new i.ca(y),u_perspective_transform:new i.c9(y),u_raster_elevation:new i.cb(y),u_zoom_transition:new i.cb(y),u_merc_center:new i.c9(y),u_cutoff_params:new i.cQ(y),u_colorization_mix:new i.cQ(y),u_colorization_offset:new i.cb(y),u_color_ramp:new i.cc(y),u_texture_offset:new i.c9(y),u_texture_res:new i.c9(y),u_emissive_strength:new i.cb(y)}),rasterParticle:y=>({u_matrix:new i.c8(y),u_normalize_matrix:new i.c8(y),u_globe_matrix:new i.c8(y),u_merc_matrix:new i.c8(y),u_grid_matrix:new i.dj(y),u_tl_parent:new i.c9(y),u_scale_parent:new i.cb(y),u_fade_t:new i.cb(y),u_opacity:new i.cb(y),u_image0:new i.cc(y),u_image1:new i.cc(y),u_raster_elevation:new i.cb(y),u_zoom_transition:new i.cb(y),u_merc_center:new i.c9(y),u_cutoff_params:new i.cQ(y)}),rasterParticleTexture:y=>({u_texture:new i.cc(y),u_opacity:new i.cb(y)}),rasterParticleDraw:y=>({u_particle_texture:new i.cc(y),u_particle_texture_side_len:new i.cb(y),u_tile_offset:new i.c9(y),u_velocity:new i.cc(y),u_color_ramp:new i.cc(y),u_velocity_res:new i.c9(y),u_max_speed:new i.cb(y),u_uv_offset:new i.c9(y),u_data_scale:new i.c9(y),u_data_offset:new i.cb(y),u_particle_pos_scale:new i.cb(y),u_particle_pos_offset:new i.c9(y)}),rasterParticleUpdate:y=>({u_particle_texture:new i.cc(y),u_particle_texture_side_len:new i.cb(y),u_velocity:new i.cc(y),u_velocity_res:new i.c9(y),u_max_speed:new i.cb(y),u_speed_factor:new i.cb(y),u_reset_rate:new i.cb(y),u_rand_seed:new i.cb(y),u_uv_offset:new i.c9(y),u_data_scale:new i.c9(y),u_data_offset:new i.cb(y),u_particle_pos_scale:new i.cb(y),u_particle_pos_offset:new i.c9(y)}),symbol:y=>({u_is_size_zoom_constant:new i.cc(y),u_is_size_feature_constant:new i.cc(y),u_size_t:new i.cb(y),u_size:new i.cb(y),u_camera_to_center_distance:new i.cb(y),u_rotate_symbol:new i.cc(y),u_aspect_ratio:new i.cb(y),u_fade_change:new i.cb(y),u_matrix:new i.c8(y),u_label_plane_matrix:new i.c8(y),u_coord_matrix:new i.c8(y),u_is_text:new i.cc(y),u_elevation_from_sea:new i.cc(y),u_pitch_with_map:new i.cc(y),u_texsize:new i.c9(y),u_texsize_icon:new i.c9(y),u_texture:new i.cc(y),u_texture_icon:new i.cc(y),u_gamma_scale:new i.cb(y),u_device_pixel_ratio:new i.cb(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_camera_forward:new i.ca(y),u_tile_matrix:new i.c8(y),u_up_vector:new i.ca(y),u_ecef_origin:new i.ca(y),u_is_halo:new i.cc(y),u_icon_transition:new i.cb(y),u_color_adj_mat:new i.c8(y),u_scale_factor:new i.cb(y),u_ground_shadow_factor:new i.ca(y),u_inv_matrix:new i.c8(y)}),background:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_opacity:new i.cb(y),u_color:new i.di(y)}),backgroundPattern:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_opacity:new i.cb(y),u_image:new i.cc(y),u_pattern_tl:new i.c9(y),u_pattern_br:new i.c9(y),u_texsize:new i.c9(y),u_pattern_size:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_pattern_units_to_pixels:new i.c9(y)}),terrainRaster:y=>({u_matrix:new i.c8(y),u_image0:new i.cc(y),u_skirt_height:new i.cb(y),u_ground_shadow_factor:new i.ca(y)}),skybox:y=>({u_matrix:new i.c8(y),u_sun_direction:new i.ca(y),u_cubemap:new i.cc(y),u_opacity:new i.cb(y),u_temporal_offset:new i.cb(y)}),skyboxGradient:y=>({u_matrix:new i.c8(y),u_color_ramp:new i.cc(y),u_center_direction:new i.ca(y),u_radius:new i.cb(y),u_opacity:new i.cb(y),u_temporal_offset:new i.cb(y)}),skyboxCapture:y=>({u_matrix_3f:new i.dj(y),u_sun_direction:new i.ca(y),u_sun_intensity:new i.cb(y),u_color_tint_r:new i.cQ(y),u_color_tint_m:new i.cQ(y),u_luminance:new i.cb(y)}),globeRaster:y=>({u_proj_matrix:new i.c8(y),u_globe_matrix:new i.c8(y),u_normalize_matrix:new i.c8(y),u_merc_matrix:new i.c8(y),u_zoom_transition:new i.cb(y),u_merc_center:new i.c9(y),u_image0:new i.cc(y),u_grid_matrix:new i.dj(y),u_skirt_height:new i.cb(y),u_far_z_cutoff:new i.cb(y),u_frustum_tl:new i.ca(y),u_frustum_tr:new i.ca(y),u_frustum_br:new i.ca(y),u_frustum_bl:new i.ca(y),u_globe_pos:new i.ca(y),u_globe_radius:new i.cb(y),u_viewport:new i.c9(y)}),globeAtmosphere:y=>({u_frustum_tl:new i.ca(y),u_frustum_tr:new i.ca(y),u_frustum_br:new i.ca(y),u_frustum_bl:new i.ca(y),u_horizon:new i.cb(y),u_transition:new i.cb(y),u_fadeout_range:new i.cb(y),u_color:new i.cQ(y),u_high_color:new i.cQ(y),u_space_color:new i.cQ(y),u_temporal_offset:new i.cb(y),u_horizon_angle:new i.cb(y)}),model:y=>({u_matrix:new i.c8(y),u_lighting_matrix:new i.c8(y),u_normal_matrix:new i.c8(y),u_node_matrix:new i.c8(y),u_lightpos:new i.ca(y),u_lightintensity:new i.cb(y),u_lightcolor:new i.ca(y),u_camera_pos:new i.ca(y),u_opacity:new i.cb(y),u_baseColorFactor:new i.cQ(y),u_emissiveFactor:new i.cQ(y),u_metallicFactor:new i.cb(y),u_roughnessFactor:new i.cb(y),u_baseTextureIsAlpha:new i.cc(y),u_alphaMask:new i.cc(y),u_alphaCutoff:new i.cb(y),u_baseColorTexture:new i.cc(y),u_metallicRoughnessTexture:new i.cc(y),u_normalTexture:new i.cc(y),u_occlusionTexture:new i.cc(y),u_emissionTexture:new i.cc(y),u_lutTexture:new i.cc(y),u_color_mix:new i.cQ(y),u_aoIntensity:new i.cb(y),u_emissive_strength:new i.cb(y),u_occlusionTextureTransform:new i.cQ(y)}),modelDepth:y=>({u_matrix:new i.c8(y),u_instance:new i.c8(y),u_node_matrix:new i.c8(y)}),groundShadow:y=>({u_matrix:new i.c8(y),u_ground_shadow_factor:new i.ca(y)}),stars:y=>({u_matrix:new i.c8(y),u_up:new i.ca(y),u_right:new i.ca(y),u_intensity_multiplier:new i.cb(y)}),snowParticle:y=>({u_modelview:new i.c8(y),u_projection:new i.c8(y),u_time:new i.cb(y),u_cam_pos:new i.ca(y),u_velocityConeAperture:new i.cb(y),u_velocity:new i.cb(y),u_horizontalOscillationRadius:new i.cb(y),u_horizontalOscillationRate:new i.cb(y),u_boxSize:new i.cb(y),u_billboardSize:new i.cb(y),u_simpleShapeParameters:new i.c9(y),u_screenSize:new i.c9(y),u_thinningCenterPos:new i.c9(y),u_thinningShape:new i.ca(y),u_thinningAffectedRatio:new i.cb(y),u_thinningParticleOffset:new i.cb(y),u_particleColor:new i.cQ(y),u_direction:new i.ca(y)}),rainParticle:y=>({u_modelview:new i.c8(y),u_projection:new i.c8(y),u_time:new i.cb(y),u_cam_pos:new i.ca(y),u_texScreen:new i.cc(y),u_velocityConeAperture:new i.cb(y),u_velocity:new i.cb(y),u_boxSize:new i.cb(y),u_rainDropletSize:new i.c9(y),u_distortionStrength:new i.cb(y),u_rainDirection:new i.ca(y),u_color:new i.cQ(y),u_screenSize:new i.c9(y),u_thinningCenterPos:new i.c9(y),u_thinningShape:new i.ca(y),u_thinningAffectedRatio:new i.cb(y),u_thinningParticleOffset:new i.cb(y),u_shapeDirectionalPower:new i.cb(y),u_shapeNormalPower:new i.cb(y),u_mode:new i.cb(y)}),vignette:y=>({u_vignetteShape:new i.ca(y),u_vignetteColor:new i.cQ(y)}),occlusion:y=>({u_matrix:new i.c8(y),u_anchorPos:new i.ca(y),u_screenSizePx:new i.c9(y),u_occluderSizePx:new i.c9(y),u_color:new i.cQ(y)})};class ru{constructor(a,d,v,S){this.id=ru.uniqueIdxCounter,ru.uniqueIdxCounter++,this.context=a;const E=a.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||S||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=ru.uniqueIdxCounter,ru.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}ru.uniqueIdxCounter=0;const Nv={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zm{constructor(a,d,v,S,E,R){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=S,this.instanceCount=R,this.context=a;const O=a.gl;this.buffer=O.createBuffer(),a.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||E||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let v=0;v<this.attributes.length;v++){const S=d.attributes[this.attributes[v].name];S!==void 0&&a.enableVertexAttribArray(S)}}setVertexAttribPointers(a,d,v){for(let S=0;S<this.attributes.length;S++){const E=this.attributes[S],R=d.attributes[E.name];R!==void 0&&a.vertexAttribPointer(R,E.components,a[Nv[E.type]],!1,this.itemSize,E.offset+this.itemSize*(v||0))}}setVertexAttribDivisor(a,d,v){for(let S=0;S<this.attributes.length;S++){const E=d.attributes[this.attributes[S].name];E!==void 0&&this.instanceCount&&this.instanceCount>0&&a.vertexAttribDivisor(E,v)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Lc{constructor(a,d,v,S,E){this.context=a,this.width=d,this.height=v;const R=this.framebuffer=a.gl.createFramebuffer();S&&(this.colorAttachment=new ku(a,R)),E&&(this.depthAttachmentType=E,this.depthAttachment=E==="renderbuffer"?new Ic(a,R):new kc(a,R))}destroy(){const a=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&a.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&a.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&a.deleteTexture(d)}a.deleteFramebuffer(this.framebuffer)}}class Mi{constructor(a,d){this.gl=a,this.clearColor=new Kg(this),this.clearDepth=new Bh(this),this.clearStencil=new Pv(this),this.colorMask=new Qg(this),this.depthMask=new Hf(this),this.stencilMask=new Ru(this),this.stencilFunc=new Jg(this),this.stencilOp=new Em(this),this.stencilTest=new cl(this),this.depthRange=new Na(this),this.depthTest=new Du(this),this.depthFunc=new ja(this),this.blend=new Dc(this),this.blendFunc=new vd(this),this.blendColor=new Nh(this),this.blendEquation=new jh(this),this.cullFace=new Gf(this),this.cullFaceSide=new Ys(this),this.frontFace=new zo(this),this.program=new co(this),this.activeTexture=new Pu(this),this.viewport=new Pc(this),this.bindFramebuffer=new Cm(this),this.bindRenderbuffer=new eu(this),this.bindTexture=new Wf(this),this.bindVertexBuffer=new Iv(this),this.bindElementBuffer=new Yf(this),this.bindVertexArrayOES=new Xf(this),this.pixelStoreUnpack=new Vh(this),this.pixelStoreUnpackPremultiplyAlpha=new Zf(this),this.pixelStoreUnpackFlipY=new kv(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=a.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxPointSize=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d,v){return new ru(this,a,d,v)}createVertexBuffer(a,d,v,S,E){return new zm(this,a,d,v,S,E)}createRenderbuffer(a,d,v){const S=this.gl,E=S.createRenderbuffer();return this.bindRenderbuffer.set(E),S.renderbufferStorage(S.RENDERBUFFER,a,d,v),this.bindRenderbuffer.set(null),E}createFramebuffer(a,d,v,S){return new Lc(this,a,d,v,S)}clear({color:a,depth:d,stencil:v,colorMask:S}){const E=this.gl;let R=0;a&&(R|=E.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set(S||[!0,!0,!0,!0])),d!==void 0&&(R|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(R|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),E.clear(R)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){i.bv(a.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor),a.blendEquation?this.blendEquation.set(a.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(a.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let uo;function Xo(y,a,d,v,S,E,R){const O=y.context,B=O.gl,H=y.transform,Y=y.getOrCreateProgram("collisionBox"),J=[];let Q=0,ie=0;for(let je=0;je<v.length;je++){const Ye=v[je],$e=a.getTile(Ye),Ue=$e.getBucket(d);if(!Ue)continue;const Fe=fm(Ye,Ue,H);let Ze=Fe;S[0]===0&&S[1]===0||(Ze=y.translatePosMatrix(Fe,$e,S,E));const et=R?Ue.textCollisionBox:Ue.iconCollisionBox,gt=Ue.collisionCircleArray;if(gt.length>0){const ht=i.bz(),kt=Ze;i.cB(ht,Ue.placementInvProjMatrix,H.glCoordMatrix),i.cB(ht,ht,Ue.placementViewportMatrix),J.push({circleArray:gt,circleOffset:ie,transform:kt,invTransform:ht,projection:Ue.getProjection()}),Q+=gt.length/4,ie=Q}et&&(y.terrain&&y.terrain.setupElevationDraw($e,Y),Y.draw(y,B.LINES,Bn.disabled,yr.disabled,y.colorModeForRenderPass(),xr.disabled,Fv(Ze,H,$e,Ue.getProjection()),d.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,H.zoom,null,[et.collisionVertexBuffer,et.collisionVertexBufferExt]))}if(!R||!J.length)return;const pe=y.getOrCreateProgram("collisionCircle"),de=new i.dI;de.resize(4*Q),de._trim();let ge=0;for(const je of J)for(let Ye=0;Ye<je.circleArray.length/4;Ye++){const $e=4*Ye,Ue=je.circleArray[$e+0],Fe=je.circleArray[$e+1],Ze=je.circleArray[$e+2],et=je.circleArray[$e+3];de.emplace(ge++,Ue,Fe,Ze,et,0),de.emplace(ge++,Ue,Fe,Ze,et,1),de.emplace(ge++,Ue,Fe,Ze,et,2),de.emplace(ge++,Ue,Fe,Ze,et,3)}(!uo||uo.length<2*Q)&&(uo=function(je){const Ye=2*je,$e=new i.a_;$e.resize(Ye),$e._trim();for(let Ue=0;Ue<Ye;Ue++){const Fe=6*Ue;$e.uint16[Fe+0]=4*Ue+0,$e.uint16[Fe+1]=4*Ue+1,$e.uint16[Fe+2]=4*Ue+2,$e.uint16[Fe+3]=4*Ue+2,$e.uint16[Fe+4]=4*Ue+3,$e.uint16[Fe+5]=4*Ue+0}return $e}(Q));const fe=O.createIndexBuffer(uo,!0),Ee=O.createVertexBuffer(de,i.dJ.members,!0);for(const je of J){const Ye={u_matrix:je.transform,u_inv_matrix:je.invTransform,u_camera_to_center_distance:(Le=H).getCameraToCenterDistance(je.projection),u_viewport_size:[Le.width,Le.height]};pe.draw(y,B.TRIANGLES,Bn.disabled,yr.disabled,y.colorModeForRenderPass(),xr.disabled,Ye,d.id,Ee,fe,i.bd.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,H.zoom)}var Le;Ee.destroy(),fe.destroy()}const Td=i.bz();function iu(y){const a=y._camera.getWorldToCamera(y.worldSize,1),d=i.az([],a,y.globeMatrix);i.bi(d,d);const v=[0,0,0],S=[0,1,0,0];return i.aA(S,S,d),v[0]=S[0],v[1]=S[1],v[2]=S[2],i.au(v,v),v}function ou({width:y,height:a,anchor:d,textOffset:v,textScale:S},E){const{horizontalAlign:R,verticalAlign:O}=i.bV(d),B=-(R-.5)*y,H=-(O-.5)*a,Y=i.bU(d,v);return new i.P((B/S+Y[0])*E,(H/S+Y[1])*E)}function sp(y,a,d,v,S,E,R,O,B,H){const Y=y.text.placedSymbolArray,J=y.text.dynamicLayoutVertexArray,Q=y.icon.dynamicLayoutVertexArray,ie={},pe=y.getProjection(),de=pm(R,pe,S),ge=S.elevation,fe=pe.upVectorScale(R.canonical,S.center.lat,S.worldSize).metersToTile;J.clear();for(let Ee=0;Ee<Y.length;Ee++){const Le=Y.get(Ee),{tileAnchorX:je,tileAnchorY:Ye,numGlyphs:$e}=Le,Ue=Le.hidden||!Le.crossTileID||y.allowVerticalPlacement&&!Le.placedOrientation?null:v[Le.crossTileID];if(Ue){let Fe=0,Ze=0,et=0;if(ge){const Nt=ge?ge.getAtTileOffset(R,je,Ye):0,[xt,Ht,Lt]=pe.upVector(R.canonical,je,Ye);Fe=Nt*xt*fe,Ze=Nt*Ht*fe,et=Nt*Lt*fe}let[gt,ht,kt,Dt]=nl(Le.projectedAnchorX+Fe,Le.projectedAnchorY+Ze,Le.projectedAnchorZ+et,d?de:E);const tn=Kc(S.getCameraToCenterDistance(pe),Dt);let dt=i.bJ(y.textSizeData,B,Le)*tn/i.bO;d&&(dt*=y.tilePixelRatio/O);const _t=ou(Ue,dt);d?({x:gt,y:ht,z:kt}=pe.projectTilePoint(je+_t.x,Ye+_t.y,R.canonical),[gt,ht,kt]=nl(gt+Fe,ht+Ze,kt+et,E)):(a&&_t._rotate(-S.angle),gt+=_t.x,ht+=_t.y,kt=0);const lt=y.allowVerticalPlacement&&Le.placedOrientation===i.bI.vertical?Math.PI/2:0;for(let Nt=0;Nt<$e;Nt++)i.bL(J,gt,ht,kt,lt);H&&Le.associatedIconIndex>=0&&(ie[Le.associatedIconIndex]={x:gt,y:ht,z:kt,angle:lt})}else _i($e,J)}if(H){Q.clear();const Ee=y.icon.placedSymbolArray;for(let Le=0;Le<Ee.length;Le++){const je=Ee.get(Le),{numGlyphs:Ye}=je,$e=ie[Le];if(je.hidden||!$e)_i(Ye,Q);else{const{x:Ue,y:Fe,z:Ze,angle:et}=$e;for(let gt=0;gt<Ye;gt++)i.bL(Q,Ue,Fe,Ze,et)}}y.icon.dynamicLayoutVertexBuffer.updateData(Q)}y.text.dynamicLayoutVertexBuffer.updateData(J)}function Ed(y,a,d,v,S,E,R={}){const O=d.paint.get("icon-translate"),B=d.paint.get("text-translate"),H=d.paint.get("icon-translate-anchor"),Y=d.paint.get("text-translate-anchor"),J=d.layout.get("icon-rotation-alignment"),Q=d.layout.get("text-rotation-alignment"),ie=d.layout.get("icon-pitch-alignment"),pe=d.layout.get("text-pitch-alignment"),de=d.layout.get("icon-keep-upright"),ge=d.layout.get("text-keep-upright"),fe=d.paint.get("icon-color-saturation"),Ee=d.paint.get("icon-color-contrast"),Le=d.paint.get("icon-color-brightness-min"),je=d.paint.get("icon-color-brightness-max"),Ye=d.layout.get("symbol-elevation-reference")==="sea",$e=y.context,Ue=$e.gl,Fe=y.transform,Ze=J==="map",et=Q==="map",gt=ie==="map",ht=pe==="map",kt=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Dt=!1;const tn=y.depthModeForSublayer(0,Bn.ReadOnly),dt=new Bn(y.context.gl.LEQUAL,Bn.ReadOnly,y.depthRangeFor3D),_t=[i.ay(Fe.center.lng),i.aH(Fe.center.lat)],lt=d.layout.get("text-variable-anchor"),Nt=Fe.projection.name==="globe",xt=[],Ht=[0,-1,0];for(const Lt of v){const Gt=a.getTile(Lt),Zt=Gt.getBucket(d);if(!Zt||Zt.projection.name==="mercator"&&Nt||Zt.fullyClipped)continue;const Fn=Zt.projection.name==="globe",$n=Fn?i.ah(Fe.zoom):0,On=pm(Lt,Zt.getProjection(),Fe),Zn=Fe.calculatePixelsToTileUnitsMatrix(Gt),jn=lt&&Zt.hasTextData(),ur=Zt.hasIconTextFit()&&jn&&Zt.hasIconData(),Cr=Zt.elevationType==="road"?dt:tn,cr=Zt.getProjection().createInversionMatrix(Fe,Lt.canonical),Lr=y.shadowRenderer,vr=Zt.elevationType==="road"&&!!Lr&&Lr.enabled;let sr=[0,0,0];if(vr){const Yi=y.style.directionalLight,Sr=y.style.ambientLight;Yi&&Sr&&(sr=Cc(y.style,Yi,Sr))}const Yr=Yi=>{Fe.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||y.terrain)&&(Yi.push("DEPTH_D24"),Yi.push("DEPTH_OCCLUSION"))},Si=()=>{const Yi=Ze&&d.layout.get("symbol-placement")!=="point",Sr=[];Yr(Sr);const Ni=Yi||ur,ii=d.paint.get("icon-image-cross-fade");y.terrainRenderModeElevated()&&gt&&Sr.push("PITCH_WITH_MAP_TERRAIN"),Fn&&(Sr.push("PROJECTION_GLOBE_VIEW"),Ni&&Sr.push("PROJECTED_POS_ON_VIEWPORT")),ii>0&&Sr.push("ICON_TRANSITION"),Zt.icon.zOffsetVertexBuffer&&Sr.push("Z_OFFSET"),fe===0&&Ee===0&&Le===0&&je===1||Sr.push("COLOR_ADJUSTMENT"),Zt.sdfIcons&&Sr.push("RENDER_SDF"),vr&&Sr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const pi=Zt.icon.programConfigurations.get(d.id),mi=y.getOrCreateProgram("symbol",{config:pi,defines:Sr}),Xi=Gt.imageAtlasTexture?Gt.imageAtlasTexture.size:[0,0],ts=Zt.iconSizeData,ji=i.bH(ts,Fe.zoom),Bo=gt||Fe.pitch!==0,ki=Ul(On,Gt.tileID.canonical,gt,Ze,Fe,Zt.getProjection(),Zn),$o=Sh(On,Gt.tileID.canonical,gt,Ze,Fe,Zt.getProjection(),Zn),Ra=y.translatePosMatrix($o,Gt,O,H,!0),hl=y.translatePosMatrix(On,Gt,O,H),Da=Ni?Td:ki,fl=Ze&&!gt&&!Yi;let Vc=Ht;!Nt&&!Fe.mercatorFromTransition||Ze||(Vc=iu(Fe));const pl=Fn?Vc:Ht,Pl=d.getColorAdjustmentMatrix(fe,Ee,Le,je),Ks=ip(ts.kind,ji,fl,gt,y,hl,Da,Ra,Ye,!1,Xi,[0,0],!0,Lt,$n,_t,cr,pl,Zt.getProjection(),sr,Pl,ii),Ud=Gt.imageAtlasTexture?Gt.imageAtlasTexture:null,Pa=d.layout.get("icon-size").constantOr(0)!==1||Zt.iconsNeedLinear,Qm=Zt.sdfIcons||y.options.rotating||y.options.zooming||Pa||Bo?Ue.LINEAR:Ue.NEAREST,Jm=Zt.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,eg=y.terrain&&gt&&Yi?i.bi(i.bz(),ki):Td;if(Yi&&Zt.icon){const Oi=Fe.elevation,qu=Oi?Oi.getAtTileOffsetFunc(Lt,Fe.center.lat,Fe.worldSize,Zt.getProjection()):null,tg=wh(On,Gt.tileID.canonical,gt,Ze,Fe,Zt.getProjection(),Zn);Th(Zt,On,y,!1,tg,$o,gt,de,qu,Lt)}return{program:mi,buffers:Zt.icon,uniformValues:Ks,atlasTexture:Ud,atlasTextureIcon:null,atlasInterpolation:Qm,atlasInterpolationIcon:null,isSDF:Zt.sdfIcons,hasHalo:Jm,depthMode:Cr,tile:Gt,renderWithShadows:vr,labelPlaneMatrixInv:eg}},Ar=()=>{const Yi=et&&d.layout.get("symbol-placement")!=="point",Sr=[],Ni=Yi||lt||ur;y.terrainRenderModeElevated()&&ht&&Sr.push("PITCH_WITH_MAP_TERRAIN"),Fn&&(Sr.push("PROJECTION_GLOBE_VIEW"),Ni&&Sr.push("PROJECTED_POS_ON_VIEWPORT")),Zt.text.zOffsetVertexBuffer&&Sr.push("Z_OFFSET"),Zt.iconsInText&&Sr.push("RENDER_TEXT_AND_SYMBOL"),Sr.push("RENDER_SDF"),vr&&Sr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Yr(Sr);const ii=Zt.text.programConfigurations.get(d.id),pi=y.getOrCreateProgram("symbol",{config:ii,defines:Sr});let mi,Xi=[0,0],ts=null;const ji=Zt.textSizeData;Zt.iconsInText&&(Xi=Gt.imageAtlasTexture?Gt.imageAtlasTexture.size:[0,0],ts=Gt.imageAtlasTexture?Gt.imageAtlasTexture:null,mi=ht||Fe.pitch!==0||y.options.rotating||y.options.zooming||ji.kind==="composite"||ji.kind==="camera"?Ue.LINEAR:Ue.NEAREST);const Bo=Gt.glyphAtlasTexture?Gt.glyphAtlasTexture.size:[0,0],ki=d.layout.get("text-size-scale-range"),$o=i.aD(y.scaleFactor,ki[0],ki[1]),Ra=i.bH(ji,Fe.zoom,$o),hl=Ul(On,Gt.tileID.canonical,ht,et,Fe,Zt.getProjection(),Zn),Da=Sh(On,Gt.tileID.canonical,ht,et,Fe,Zt.getProjection(),Zn),fl=y.translatePosMatrix(Da,Gt,B,Y,!0),Vc=y.translatePosMatrix(On,Gt,B,Y),pl=Ni?Td:hl,Pl=et&&!ht&&!Yi;let Ks=Ht;!Nt&&!Fe.mercatorFromTransition||et||(Ks=iu(Fe));const Ud=ip(ji.kind,Ra,Pl,ht,y,Vc,pl,fl,Ye,!0,Bo,Xi,!0,Lt,$n,_t,cr,Fn?Ks:Ht,Zt.getProjection(),sr,null,null,$o),Pa=Gt.glyphAtlasTexture?Gt.glyphAtlasTexture:null,Qm=Ue.LINEAR,Jm=d.paint.get("text-halo-width").constantOr(1)!==0,eg=y.terrain&&ht&&Yi?i.bi(i.bz(),hl):Td;if(Yi&&Zt.text){const Oi=Fe.elevation,qu=Oi?Oi.getAtTileOffsetFunc(Lt,Fe.center.lat,Fe.worldSize,Zt.getProjection()):null,tg=wh(On,Gt.tileID.canonical,ht,et,Fe,Zt.getProjection(),Zn);Th(Zt,On,y,!0,tg,Da,ht,ge,qu,Lt)}return{program:pi,buffers:Zt.text,uniformValues:Ud,atlasTexture:Pa,atlasTextureIcon:ts,atlasInterpolation:Qm,atlasInterpolationIcon:mi,isSDF:!0,hasHalo:Jm,depthMode:Cr,tile:Gt,renderWithShadows:vr,labelPlaneMatrixInv:eg}},Xr=Zt.icon.segments.get().length,ci=Zt.text.segments.get().length,di=Xr&&!R.onlyText?Si():null,Ti=ci&&!R.onlyIcons?Ar():null,Wi=d.paint.get("icon-opacity").constantOr(1),wo=d.paint.get("text-opacity").constantOr(1);if(kt&&Zt.canOverlap){Dt=!0;const Yi=Wi&&!R.onlyText?Zt.icon.segments.get():[],Sr=wo&&!R.onlyIcons?Zt.text.segments.get():[];for(const Ni of Yi)xt.push({segments:new i.bd([Ni]),sortKey:Ni.sortKey,state:di});for(const Ni of Sr)xt.push({segments:new i.bd([Ni]),sortKey:Ni.sortKey,state:Ti})}else R.onlyText||xt.push({segments:Wi?Zt.icon.segments:new i.bd([]),sortKey:0,state:di}),R.onlyIcons||xt.push({segments:wo?Zt.text.segments:new i.bd([]),sortKey:0,state:Ti})}Dt&&xt.sort((Lt,Gt)=>Lt.sortKey-Gt.sortKey);for(const Lt of xt){const Gt=Lt.state;if(Gt)if(y.terrain?y.terrain.setupElevationDraw(Gt.tile,Gt.program,{useDepthForOcclusion:Fe.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Gt.labelPlaneMatrixInv}):y.setupDepthForOcclusion(Fe.depthOcclusionForSymbolsAndCircles,Gt.program),$e.activeTexture.set(Ue.TEXTURE0),Gt.atlasTexture&&Gt.atlasTexture.bind(Gt.atlasInterpolation,Ue.CLAMP_TO_EDGE,!0),Gt.atlasTextureIcon&&($e.activeTexture.set(Ue.TEXTURE1),Gt.atlasTextureIcon&&Gt.atlasTextureIcon.bind(Gt.atlasInterpolationIcon,Ue.CLAMP_TO_EDGE,!0)),Gt.renderWithShadows&&y.shadowRenderer.setupShadows(Gt.tile.tileID.toUnwrapped(),Gt.program,"vector-tile",Gt.tile.tileID.overscaledZ),y.uploadCommonLightUniforms(y.context,Gt.program),Gt.hasHalo){const Zt=Gt.uniformValues;Zt.u_is_halo=1,Cd(Gt.buffers,Lt.segments,d,y,Gt.program,Gt.depthMode,S,E,Zt,2),Zt.u_is_halo=0}else{if(Gt.isSDF){const Zt=Gt.uniformValues;Gt.hasHalo&&(Zt.u_is_halo=1,Cd(Gt.buffers,Lt.segments,d,y,Gt.program,Gt.depthMode,S,E,Zt,1)),Zt.u_is_halo=0}Cd(Gt.buffers,Lt.segments,d,y,Gt.program,Gt.depthMode,S,E,Gt.uniformValues,1)}}}function Cd(y,a,d,v,S,E,R,O,B,H){const Y=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.iconTransitioningVertexBuffer,y.globeExtVertexBuffer,y.zOffsetVertexBuffer];S.draw(v,v.context.gl.TRIANGLES,E,R,O,xr.disabled,B,d.id,y.layoutVertexBuffer,y.indexBuffer,a,d.paint,v.transform.zoom,y.programConfigurations.get(d.id),Y,H)}function ap(y,a){const d=1<<y.canonical.z,v=(a.x*d-y.canonical.x-y.wrap*d)*i.aj,S=(a.y*d-y.canonical.y)*i.aj,E=i.dS(a.z,a.y);return i.cS(v,S,E)}function Zo(y,a,d,v,S){if(!d.layout||d.layout.get("fill-elevation-reference")==="none")return;const E=y.context.gl,R=new Bn(y.context.gl.LEQUAL,Bn.ReadWrite,y.depthRangeFor3D),O=new Bn(y.context.gl.GREATER,Bn.ReadWrite,y.depthRangeFor3D),B=function(ie){const pe=i.cJ(ie.pitch);let de=.01;return ie.isOrthographic&&(de=i.ai(1e-4,de,i.cO(pe>=Cu?1:pe/Cu))),2*de}(y.transform),H=y.transform.getFreeCameraOptions().position,Y="elevatedStructuresDepthReconstruct",J=y.getOrCreateProgram(Y,{defines:["DEPTH_RECONSTRUCTION"]}),Q=y.getOrCreateProgram(Y);for(const ie of v){const pe=a.getTile(ie),de=pe.getBucket(d);if(!de)continue;const ge=de.elevatedStructures;if(!ge)continue;const fe=de.elevationBufferData.heightRange,Ee=ap(ie.toUnwrapped(),H),Le=y.translatePosMatrix(ie.projMatrix,pe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let je,Ye,$e,Ue;if(S==="initialize"){if(!fe||fe.min>=1||ge.depthSegments.segments[0].primitiveLength===0)continue;je=Hh(Le,Ee,B,1,0),Ye=R,$e=ge.depthSegments,Ue=J}else if(S==="reset"){if(!fe||fe.min>=0||ge.maskSegments.segments[0].primitiveLength===0)continue;je=Hh(Le,Ee,0,0,1),Ye=O,$e=ge.maskSegments,Ue=J}else if(S==="geometry"){if(ge.depthSegments.segments[0].primitiveLength===0)continue;je=Hh(Le,Ee,B,1,0),Ye=R,$e=ge.depthSegments,Ue=Q}Ue.draw(y,E.TRIANGLES,Ye,yr.disabled,Nr.disabled,xr.disabled,je,d.id,ge.vertexBuffer,ge.indexBuffer,$e,d.paint,y.transform.zoom)}}function In(y,a,d){const{painter:v,sourceCache:S,layer:E,coords:R,colorMode:O,elevationType:B,terrainEnabled:H,pass:Y}=y,J=v.context.gl,Q=E.paint.get("fill-pattern"),ie=E.paint.get("fill-pattern-cross-fade"),pe=Q.constantOr(null);let de=B;B!=="road"||a&&!H||(de="none");const ge=de==="road",fe=y.painter.shadowRenderer,Ee=ge&&!!fe&&fe.enabled,Le=new Bn(v.context.gl.LEQUAL,Bn.ReadOnly,v.depthRangeFor3D);let je=[0,0,0];if(Ee){const Ue=v.style.directionalLight,Fe=v.style.ambientLight;Ue&&Fe&&(je=Cc(v.style,Ue,Fe))}const Ye=Q&&Q.constantOr(1),$e=(Ue,Fe)=>{let Ze,et,gt,ht,kt;Fe?(Ze=Ye&&!E.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",gt=J.LINES):(Ze=Ye?"fillPattern":"fill",gt=J.TRIANGLES);for(const Dt of R){const tn=S.getTile(Dt);if(Ye&&!tn.patternsLoaded())continue;const dt=tn.getBucket(E);if(!dt)continue;const _t=a?dt.elevationBufferData:dt.bufferData;if(_t.isEmpty())continue;v.prepareDrawTile();const lt=_t.programConfigurations.get(E.id),Nt=v.isTileAffectedByFog(Dt),xt=[],Ht=[];ge&&(xt.push("ELEVATED_ROADS"),Ht.push(_t.elevatedLayoutVertexBuffer)),Ee&&xt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Ye&&(v.context.activeTexture.set(J.TEXTURE0),tn.imageAtlasTexture&&tn.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),lt.updatePaintBuffers());let Lt=!1;if(pe&&tn.imageAtlas){const On=tn.imageAtlas,Zn=i.dN.from(pe),jn=Zn.getPrimary().scaleSelf(i.q.devicePixelRatio).toString(),ur=Zn.getSecondary(),Cr=On.patternPositions.get(jn),cr=ur?On.patternPositions.get(ur.scaleSelf(i.q.devicePixelRatio).toString()):null;Lt=!!Cr&&!!cr,Cr&&lt.setConstantPatternPositions(Cr,cr)}ie>0&&(Lt||lt.getPatternTransitionVertexBuffer("fill-pattern"))&&xt.push("FILL_PATTERN_TRANSITION");const Gt=v.getOrCreateProgram(Ze,{config:lt,overrideFog:Nt,defines:xt}),Zt=v.translatePosMatrix(Dt.projMatrix,tn,E.paint.get("fill-translate"),E.paint.get("fill-translate-anchor"));Ee&&fe.setupShadows(tn.tileID.toUnwrapped(),Gt,"vector-tile",tn.tileID.overscaledZ);const Fn=E.paint.get("fill-emissive-strength");if(Fe){ht=_t.lineIndexBuffer,kt=_t.lineSegments;const On=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[J.drawingBufferWidth,J.drawingBufferHeight];et=Ze==="fillOutlinePattern"&&Ye?Q0(Zt,Fn,v,tn,On,je,ie):Im(Zt,Fn,On,je)}else ht=_t.indexBuffer,kt=_t.triangleSegments,et=Ye?zv(Zt,Fn,v,tn,je,ie):Pm(Zt,Fn,je);v.uploadCommonUniforms(v.context,Gt,Dt.toUnwrapped());let $n=Ue;(B==="road"&&!H||B==="offset")&&($n=Le),Gt.draw(v,gt,$n,d||v.stencilModeForClipping(Dt),O,xr.disabled,et,E.id,_t.layoutVertexBuffer,ht,kt,E.paint,v.transform.zoom,lt,Ht)}};v.renderPass===Y&&$e(v.depthModeForSublayer(1,v.renderPass==="opaque"?Bn.ReadWrite:Bn.ReadOnly),!1),de==="none"&&v.renderPass==="translucent"&&E.paint.get("fill-antialias")&&$e(v.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Bn.ReadOnly),!0)}function Wh(y,a,d,v,S,E,R,O){d.resetLayerRenderingStats(y);const B=y.context,H=B.gl,Y=y.transform,J=d.paint.get("fill-extrusion-pattern"),Q=d.paint.get("fill-extrusion-pattern-cross-fade"),ie=J.constantOr(null),pe=J.constantOr(1),de=d.paint.get("fill-extrusion-opacity"),ge=y.style.enable3dLights(),fe=d.paint.get(ge&&!pe?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Ee=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),fe],Le=d.layout.get("fill-extrusion-edge-radius"),je=Le>0&&!d.paint.get("fill-extrusion-rounded-roof"),Ye=je?0:Le,$e=Y.projection.name==="globe"?i.dT():0,Ue=Y.projection.name==="globe",Fe=Ue?i.ah(Y.zoom):0,Ze=[i.ay(Y.center.lng),i.aH(Y.center.lat)],et=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",gt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(et?null:d.lut).toArray01().slice(0,3),ht=d.paint.get("fill-extrusion-flood-light-intensity"),kt=d.paint.get("fill-extrusion-vertical-scale"),Dt=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,tn=d.paint.get("fill-extrusion-height-alignment"),dt=d.paint.get("fill-extrusion-base-alignment"),_t=Ih(y,d.paint.get("fill-extrusion-cutoff-fade-range")),lt=[];let Nt;Ue&&lt.push("PROJECTION_GLOBE_VIEW"),Ee[0]>0&&lt.push("FAUX_AO"),je&&lt.push("ZERO_ROOF_RADIUS"),O&&lt.push("HAS_CENTROID"),ht>0&&lt.push("FLOOD_LIGHT"),_t.shouldRenderCutoff&&lt.push("RENDER_CUTOFF"),Dt&&lt.push("RENDER_WALL_MODE");const xt=y.renderPass==="shadow",Ht=y.shadowRenderer,Lt=xt&&!!Ht,Gt=xt?xr.disabled:xr.backCCW;y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0);let Zt=[0,0,0];if(Ht){const On=y.style.directionalLight,Zn=y.style.ambientLight;On&&Zn&&(Zt=Cc(y.style,On,Zn)),xt||(lt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Ht.useNormalOffset&&lt.push("NORMAL_OFFSET")),Nt=lt.concat(["SHADOWS_SINGLE_CASCADE"])}const Fn=Lt?"fillExtrusionDepth":pe?"fillExtrusionPattern":"fillExtrusion",$n=d.getLayerRenderingStats();for(const On of v){const Zn=a.getTile(On),jn=Zn.getBucket(d);if(!jn||jn.projection.name!==Y.projection.name)continue;let ur=!1;Ht&&(ur=Ht.getMaxCascadeForTile(On.toUnwrapped())===0);const Cr=y.isTileAffectedByFog(On),cr=jn.programConfigurations.get(d.id);let Lr=!1;if(ie&&Zn.imageAtlas){const ci=Zn.imageAtlas,di=i.dN.from(ie),Ti=di.getPrimary().scaleSelf(i.q.devicePixelRatio).toString(),Wi=di.getSecondary(),wo=ci.patternPositions.get(Ti),Yi=Wi?ci.patternPositions.get(Wi.scaleSelf(i.q.devicePixelRatio).toString()):null;Lr=!!wo&&!!Yi,wo&&cr.setConstantPatternPositions(wo,Yi)}Q>0&&(Lr||cr.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&lt.push("FILL_EXTRUSION_PATTERN_TRANSITION");const vr=y.getOrCreateProgram(Fn,{config:cr,defines:ur?Nt:lt,overrideFog:Cr});if(y.terrain&&y.terrain.setupElevationDraw(Zn,vr,{useMeterToDem:!0}),!jn.centroidVertexBuffer){const ci=vr.attributes.a_centroid_pos;ci!==void 0&&H.vertexAttrib2f(ci,0,0)}!xt&&Ht&&Ht.setupShadows(Zn.tileID.toUnwrapped(),vr,"vector-tile",Zn.tileID.overscaledZ),pe&&(y.context.activeTexture.set(H.TEXTURE0),Zn.imageAtlasTexture&&Zn.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),cr.updatePaintBuffers());const sr=d.paint.get("fill-extrusion-vertical-gradient"),Yr=1/jn.tileToMeter;let Si;if(xt&&Ht){if(jv(Zn.tileID,jn,y))continue;const ci=Ht.calculateShadowPassMatrixFromTile(Zn.tileID.toUnwrapped());Si=qh(ci,Ye,Yr,kt,tn,dt)}else{const ci=y.translatePosMatrix(On.expandedProjMatrix,Zn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),di=Y.projection.createInversionMatrix(Y,On.canonical);Si=pe?Lv(ci,y,sr,de,Ee,Ye,Yr,On,Zn,$e,tn,dt,Fe,Ze,di,gt,kt,Q):bd(ci,y,sr,de,Ee,Ye,Yr,On,$e,tn,dt,Fe,Ze,di,gt,kt,ht,Zt)}y.uploadCommonUniforms(B,vr,On.toUnwrapped(),null,_t);let Ar=jn.segments;if(Y.projection.name==="mercator"&&!xt&&(Ar=jn.getVisibleSegments(Zn.tileID,y.terrain,y.transform.getFrustum(0)),!Ar.get().length))continue;if($n)if(xt)for(const ci of Ar.get())$n.numRenderedVerticesInShadowPass+=ci.primitiveLength;else for(const ci of Ar.get())$n.numRenderedVerticesInTransparentPass+=ci.primitiveLength;const Xr=[];(y.terrain||O)&&Xr.push(jn.centroidVertexBuffer),Ue&&Xr.push(jn.layoutVertexExtBuffer),Dt&&Xr.push(jn.wallVertexBuffer),vr.draw(y,B.gl.TRIANGLES,S,E,R,Gt,Si,d.id,jn.layoutVertexBuffer,jn.indexBuffer,Ar,d.paint,y.transform.zoom,cr,Xr)}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1)}function Ad(y,a,d,v,S,E,R,O,B,H,Y,J,Q,ie,pe,de,ge,fe,Ee){const Le=y.context,je=Le.gl,Ye=y.transform,$e=y.transform.zoom,Ue=[],Fe=Ih(y,d.paint.get("fill-extrusion-cutoff-fade-range"));H==="clear"?(Ue.push("CLEAR_SUBPASS"),Ee&&(Ue.push("CLEAR_FROM_TEXTURE"),Le.activeTexture.set(je.TEXTURE0),Ee.bind(je.LINEAR,je.CLAMP_TO_EDGE))):H==="sdf"&&Ue.push("SDF_SUBPASS"),ge&&Ue.push("HAS_CENTROID"),Fe.shouldRenderCutoff&&Ue.push("RENDER_CUTOFF");const Ze=d.layout.get("fill-extrusion-edge-radius"),et=(gt,ht,kt,Dt,tn)=>{const dt=ht.programConfigurations.get(d.id),_t=y.isTileAffectedByFog(gt),lt=y.getOrCreateProgram("fillExtrusionGroundEffect",{config:dt,defines:Ue,overrideFog:_t}),Nt=((Ht,Lt,Gt,Zt,Fn,$n,On,Zn,jn,ur,Cr)=>({u_matrix:Lt,u_opacity:Gt,u_ao_pass:Zt?1:0,u_meter_to_tile:Fn,u_ao:$n,u_flood_light_intensity:On,u_flood_light_color:Zn,u_attenuation:jn,u_edge_radius:ur,u_fb:0,u_fb_size:Cr,u_dynamic_offset:1}))(0,Dt,Y,B,tn,[J,Q*tn],ie,pe,de,$e>=17?0:Ze*tn,Ee?Ee.size[0]:0),xt=[];ge&&xt.push(ht.hiddenByLandmarkVertexBuffer),y.uploadCommonUniforms(Le,lt,gt.toUnwrapped(),null,Fe),lt.draw(y,Le.gl.TRIANGLES,S,E,R,O,Nt,d.id,ht.vertexBuffer,ht.indexBuffer,kt,d.paint,$e,dt,xt)};for(const gt of v){const ht=a.getTile(gt),kt=ht.getBucket(d);if(!kt||kt.projection.name!==Ye.projection.name||!kt.groundEffect||kt.groundEffect&&!kt.groundEffect.hasData())continue;const Dt=kt.groundEffect,tn=1/kt.tileToMeter;{const dt=y.translatePosMatrix(gt.projMatrix,ht,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),_t=Dt.getDefaultSegment();et(gt,Dt,_t,dt,tn)}if(fe)for(let dt=0;dt<4;dt++){const _t=i.dU[dt](gt),lt=a.getTile(_t);if(!lt)continue;const Nt=lt.getBucket(d);if(!Nt||Nt.projection.name!==Ye.projection.name||!Nt.groundEffect||Nt.groundEffect&&!Nt.groundEffect.hasData())continue;const xt=Nt.groundEffect;let Ht,Lt;dt===0?(Ht=[-i.aj,0,0],Lt=1):dt===1?(Ht=[i.aj,0,0],Lt=0):dt===2?(Ht=[0,-i.aj,0],Lt=3):(Ht=[0,i.aj,0],Lt=2);const Gt=xt.regionSegments[Lt];if(!Gt)continue;const Zt=new Float32Array(16);i.bo(Zt,gt.projMatrix,Ht),et(gt,xt,Gt,y.translatePosMatrix(Zt,ht,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),tn)}}}function zu(y,a,d,v,S,E,R){v.centroidVertexArray.length===0&&v.createCentroidsBuffer();const O=E?E.findDEMTileFor(d):null;if(!(O&&O.dem||R))return;E&&O&&O.dem&&v.selfDEMTileTimestamp!==O.dem._timestamp&&(v.borderDoneWithNeighborZ=[-1,-1,-1,-1],v.selfDEMTileTimestamp=O.dem._timestamp);const B=fe=>new i.P(Math.ceil((fe+i.dX)*i.dY),0),H=fe=>{const Ee=a.getSource().minzoom,Le=Ye=>{const $e=a.getTileByID(Ye);if($e&&$e.hasData())return $e.getBucket(S)},je=[0,-1,1];for(const Ye of je){if(fe.overscaledZ+Ye<Ee)continue;const $e=Le(fe.calculateScaledKey(fe.overscaledZ+Ye));if($e)return $e}},Y=[0,0,0],J=(fe,Ee)=>(Y[0]=Math.min(fe.min.y,Ee.min.y),Y[1]=Math.max(fe.max.y,Ee.max.y),Y[2]=i.aj-Ee.min.x>fe.max.x?Ee.min.x-i.aj:fe.max.x,Y),Q=(fe,Ee)=>(Y[0]=Math.min(fe.min.x,Ee.min.x),Y[1]=Math.max(fe.max.x,Ee.max.x),Y[2]=i.aj-Ee.min.y>fe.max.y?Ee.min.y-i.aj:fe.max.y,Y),ie=[(fe,Ee)=>J(fe,Ee),(fe,Ee)=>J(Ee,fe),(fe,Ee)=>Q(fe,Ee),(fe,Ee)=>Q(Ee,fe)],pe=(fe,Ee,Le,je,Ye,$e,Ue)=>{if(!E)return 0;const Fe=[[$e?Le:fe,$e?fe:Le,0],[$e?Le:Ee,$e?Ee:Le,0]],Ze=Ue<0?i.aj+Ue:Ue,et=[$e?Ze:(fe+Ee)/2,$e?(fe+Ee)/2:Ze,0];return Le===0&&Ue<0||Le!==0&&Ue>0?E.getForTilePoints(Ye,[et],!0,je):Fe.push(et),E.getForTilePoints(d,Fe,!0,O),Math.max(Fe[0][2],Fe[1][2],et[2])/E.exaggeration()};for(let fe=0;fe<4;fe++){const Ee=v.borderFeatureIndices[fe];if(Ee.length===0)continue;const Le=i.dU[fe](d),je=H(Le);if(!(je&&je instanceof i.dV))continue;const Ye=E?E.findDEMTileFor(Le):null;if(!(Ye&&Ye.dem||R)||(E&&Ye&&Ye.dem&&v.borderDEMTileTimestamp[fe]!==Ye.dem._timestamp&&(v.borderDoneWithNeighborZ[fe]=-1,v.borderDEMTileTimestamp[fe]=Ye.dem._timestamp),v.borderDoneWithNeighborZ[fe]===je.canonical.z))continue;je.centroidVertexArray.length===0&&je.createCentroidsBuffer();const $e=(fe<2?1:5)-fe,Ue=je.borderDoneWithNeighborZ[$e]!==v.canonical.z,Fe=je.borderFeatureIndices[$e];let Ze=0;if(v.canonical.z!==je.canonical.z){for(const et of Ee)v.showCentroid(v.featuresOnBorder[et]);if(Ue)for(const et of Fe)je.showCentroid(je.featuresOnBorder[et]);v.borderDoneWithNeighborZ[fe]=je.canonical.z,je.borderDoneWithNeighborZ[$e]=v.canonical.z}for(const et of Ee){const gt=v.featuresOnBorder[et],ht=v.centroidData[gt.centroidDataIndex],kt=gt.borders[fe];let Dt;for(;Ze<Fe.length;){Dt=je.featuresOnBorder[Fe[Ze]];const tn=Dt.borders[$e];if(tn[1]>kt[0]+3||tn[0]>kt[0]-3)break;je.showCentroid(Dt),Ze++}if(Dt&&Ze<Fe.length){const tn=Ze;let dt=0;for(;!(Dt.borders[$e][0]>kt[1]-3)&&(dt++,++Ze!==Fe.length);)Dt=je.featuresOnBorder[Fe[Ze]];Dt=je.featuresOnBorder[Fe[tn]];let _t=!1;if(dt>=1){const xt=Dt.borders[$e];Math.abs(kt[0]-xt[0])<3&&Math.abs(kt[1]-xt[1])<3&&(dt=1,_t=!0,Ze=tn+1)}else if(dt===0){v.showCentroid(gt);continue}const lt=je.centroidData[Dt.centroidDataIndex];R&&_t&&(((de=ht).flags|(ge=lt).flags)&i.dW?(de.flags|=i.dW,ge.flags|=i.dW):(de.flags&=~i.dW,ge.flags&=~i.dW));const Nt=gt.intersectsCount()>1||Dt.intersectsCount()>1;if(dt>1)Ze=tn,ht.centroidXY=lt.centroidXY=new i.P(0,0);else if(Ye&&Ye.dem&&!Nt){const xt=ie[fe](ht,lt),Ht=fe%2?i.aj-1:0,Lt=pe(xt[0],Math.min(i.aj-1,xt[1]),Ht,Ye,Le,fe<2,xt[2]);ht.centroidXY=lt.centroidXY=B(Lt)}else Nt?ht.centroidXY=lt.centroidXY=new i.P(0,0):(ht.centroidXY=v.encodeBorderCentroid(gt),lt.centroidXY=je.encodeBorderCentroid(Dt));v.writeCentroidToBuffer(ht),je.writeCentroidToBuffer(lt)}else v.showCentroid(gt)}v.borderDoneWithNeighborZ[fe]=je.canonical.z,je.borderDoneWithNeighborZ[$e]=v.canonical.z}var de,ge;(v.needsCentroidUpdate||!v.centroidVertexBuffer&&v.centroidVertexArray.length!==0)&&v.uploadCentroid(y)}const Md=[1,0,0],lr=[0,1,0],Fm=[0,0,1];function jv(y,a,d){const v=d.transform,S=d.shadowRenderer;if(!S)return!0;const E=y.toUnwrapped(),R=v.tileSize*S._cascades[d.currentShadowCascade].scale;let O=a.maxHeight;if(v.elevation){const de=v.elevation.getMinMaxForTile(y);de&&(O+=de.max)}const B=[...S.shadowDirection];B[2]=-B[2];const H=S.computeSimplifiedTileShadowVolume(E,O,R,B);if(!H)return!1;const Y=[Md,lr,Fm,B,[B[0],0,B[2]],[0,B[1],B[2]]],J=v.projection.name==="globe",Q=v.scaleZoom(R),ie=i.cn.fromInvProjectionMatrix(v.invProjMatrix,v.worldSize,Q,!J),pe=S.getCurrentCascadeFrustum();return ie.intersectsPrecise(H.vertices,H.planes,Y)===0||pe.intersectsPrecise(H.vertices,H.planes,Y)===0}function qa(y){return[y[0]*i.dZ,y[1]*i.dZ,y[2]*i.dZ,0]}function es(y,a,d,v,S,E,R,O,B){const H=v.getSource(),Y=d.globeSharedBuffers;if(!Y)return;let J,Q,ie;if(a&&(J=v.getTile(a)),H instanceof i.aP?(Q=H.texture,ie=i.ds(0,0,d.transform)):J&&a&&(Q=J.texture,ie=i.ds(a.canonical.z,a.canonical.x,d.transform)),!Q||!ie)return;y||(ie=i.cE(i.bz(),ie,[1,-1,1]));const pe=d.context,de=pe.gl,ge=S.paint.get("raster-resampling")==="nearest"?de.NEAREST:de.LINEAR,fe=d.colorModeForDrapableLayerRenderPass(E),Ee=R.defines;Ee.push("GLOBE_POLES");const Le=new Bn(de.LEQUAL,Bn.ReadWrite,d.depthRangeFor3D),je=Float32Array.from(d.transform.expandedFarZProjMatrix),Ye=Float32Array.from(i.bh(i.dr(new i.cp(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),pe.activeTexture.set(de.TEXTURE0),Q.bind(ge,de.CLAMP_TO_EDGE),pe.activeTexture.set(de.TEXTURE1),Q.bind(ge,de.CLAMP_TO_EDGE),"useMipmap"in Q&&pe.extTextureFilterAnisotropic&&d.transform.pitch>20&&de.texParameterf(de.TEXTURE_2D,pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,pe.extTextureFilterAnisotropicMax);const[$e,Ue,Fe,Ze]=a?Y.getPoleBuffers(a.canonical.z,!1):Y.getPoleBuffers(0,!0),et=S.paint.get("raster-elevation");let gt;y?(gt=$e,d.renderDefaultNorthPole=et!==0):(gt=Ue,d.renderDefaultSouthPole=et!==0);const ht=qa(R.mix),kt=((tn,dt,_t,lt,Nt,xt,Ht,Lt,Gt,Zt,Fn,$n,On)=>Ua(tn,dt,_t,new Float32Array(16),new Float32Array(9),[0,0],lt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},xt,[0,0],Lt,2,Zt,Fn,$n,1,0,On))(je,Ye,ie,i.ah(d.transform.zoom),0,S,0,et,0,ht,R.offset,R.range,E),Dt=d.getOrCreateProgram("raster",{defines:Ee});d.uploadCommonUniforms(pe,Dt,null),Dt.draw(d,de.TRIANGLES,Le,B,fe,O,kt,S.id,gt,Fe,Ze)}function iy(y){const a=y._nearZ,d=y.projection.farthestPixelDistance(y),v=d-a,S=.2*y.height,E=a+S;return[a,d,(E-S-a)/v,(E-a)/v]}function Bm(y,a,d,v){if(y)return a instanceof As&&y instanceof lm?a.getTextureDescriptor(y,d,!0):{texture:y.texture,mix:qa(v.mix),offset:v.offset,buffer:0,tileSize:1}}var Nm=i.d_([{name:"a_index",type:"Int16",components:1}]);class Vv{constructor(a,d,v,S){const E={width:v[0],height:v[1],data:null},R=a.gl;this.targetColorTexture=new i.T(a,E,R.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(a,E,R.RGBA8,{useMipmap:!1}),this.context=a,this.updateParticleTexture(d,S),this.lastInvalidatedAt=0}updateParticleTexture(a,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const v=this.context.gl,S=d.width*d.height;this.particleTexture0=new i.T(this.context,d,v.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,d,v.RGBA8,{premultiply:!1,useMipmap:!1});const E=new i.d$;E.reserve(S);for(let R=0;R<S;R++)E.emplaceBack(R);this.particleIndexBuffer=this.context.createVertexBuffer(E,Nm.members,!0),this.particleSegment=i.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(a){return!(this.lastInvalidatedAt<a&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Fu(y,a,d){if(!y)return null;const v=a.getTextureDescriptor(y,d,!0);if(!v)return null;let{texture:S,mix:E,offset:R,tileSize:O,buffer:B,format:H}=v;if(!S||!H)return null;let Y=!1;return H==="uint32"&&(Y=!0,E[3]=0,E=ty(i.e0,E,[0,d.paint.get("raster-particle-max-speed")]),R=km(i.e0,R,[0,d.paint.get("raster-particle-max-speed")])),{texture:S,textureOffset:[B/(O+2*B),O/(O+2*B)],tileSize:O,scalarData:Y,scale:E,offset:R,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[H]]}}function lp(y){const a=y._nearZ,d=y.projection.farthestPixelDistance(y),v=d-a,S=.2*y.height,E=a+S;return[a,d,(E-S-a)/v,(E-a)/v]}const jm=new i.am(1,0,0,1),Vm=new i.am(0,1,0,1),oy=new i.am(0,0,1,1),Ha=new i.am(1,0,1,1),Bu=new i.am(0,1,1,1);function Rd(y,a,d,v,S,E,R){const O=y.context,B=y.transform,H=O.gl,Y=B.projection.name==="globe",J=Y?["PROJECTION_GLOBE_VIEW"]:[];let Q=i.bw(d.projMatrix);if(Y&&i.ah(B.zoom)>0){const ht=i.bg(d.canonical,B),kt=i.e1(ht);Q=i.az(new Float32Array(16),B.globeMatrix,kt),i.az(Q,B.projMatrix,Q)}const ie=i.bz();ie[12]+=2*S/(i.q.devicePixelRatio*B.width),ie[13]+=2*E/(i.q.devicePixelRatio*B.height),i.az(Q,ie,Q);const pe=y.getOrCreateProgram("debug",{defines:J}),de=a.getTileByID(d.key);y.terrain&&y.terrain.setupElevationDraw(de,pe);const ge=Bn.disabled,fe=yr.disabled,Ee=y.colorModeForRenderPass(),Le="$debug";O.activeTexture.set(H.TEXTURE0),y.emptyTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Y?de._makeGlobeTileDebugBuffers(y.context,B):de._makeDebugTileBoundsBuffers(y.context,B.projection);const je=de._tileDebugBuffer||y.debugBuffer,Ye=de._tileDebugIndexBuffer||y.debugIndexBuffer,$e=de._tileDebugSegments||y.debugSegments;if(pe.draw(y,H.LINE_STRIP,ge,fe,Ee,xr.disabled,tu(Q,v),Le,je,Ye,$e,null,null,null,[de._globeTileDebugBorderBuffer]),R){const ht=de.latestRawTileData,kt=Math.floor((ht&&ht.byteLength||0)/1024);let Dt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Dt+=` => ${d.overscaledZ}`),Dt+=` ${de.state}`,Dt+=` ${kt}kb`,function(tn,dt){tn.initDebugOverlayCanvas();const _t=tn.debugOverlayCanvas,lt=tn.context.gl,Nt=tn.debugOverlayCanvas.getContext("2d");Nt.clearRect(0,0,_t.width,_t.height),Nt.shadowColor="white",Nt.shadowBlur=2,Nt.lineWidth=1.5,Nt.strokeStyle="white",Nt.textBaseline="top",Nt.font="bold 36px Open Sans, sans-serif",Nt.fillText(dt,5,5),Nt.strokeText(dt,5,5),tn.debugOverlayTexture.update(_t),tn.debugOverlayTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)}(y,Dt)}const Ue=a.getTile(d).tileSize,Fe=512/Math.min(Ue,512)*(d.overscaledZ/B.zoom)*.5,Ze=de._tileDebugTextBuffer||y.debugBuffer,et=de._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,gt=de._tileDebugTextSegments||y.debugSegments;pe.draw(y,H.TRIANGLES,ge,fe,Nr.alphaBlended,xr.disabled,tu(Q,i.am.transparent,Fe),Le,Ze,et,gt,null,null,null,[de._globeTileDebugTextBuffer])}function Um(y,a,d,v){Dd(y,0,a+d/2,y.transform.width,d,v)}function $m(y,a,d,v){Dd(y,a-d/2,0,d,y.transform.height,v)}function Dd(y,a,d,v,S,E){const R=y.context,O=R.gl;O.enable(O.SCISSOR_TEST),O.scissor(a*i.q.devicePixelRatio,d*i.q.devicePixelRatio,v*i.q.devicePixelRatio,S*i.q.devicePixelRatio),R.clear({color:E}),O.disable(O.SCISSOR_TEST)}const Uv=i.d_([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Zl}=Uv;function Ii(y,a,d,v){y.emplaceBack(a,d,v)}class cp{constructor(a){this.vertexArray=new i.e2,this.indices=new i.a_,Ii(this.vertexArray,-1,-1,1),Ii(this.vertexArray,1,-1,1),Ii(this.vertexArray,-1,1,1),Ii(this.vertexArray,1,1,1),Ii(this.vertexArray,-1,-1,-1),Ii(this.vertexArray,1,-1,-1),Ii(this.vertexArray,-1,1,-1),Ii(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,Zl),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=i.bd.simpleSegment(0,0,36,12)}}function Nu(y,a,d,v,S,E){const R=y.context.gl,O=a.paint.get("sky-atmosphere-color"),B=a.paint.get("sky-atmosphere-halo-color"),H=a.paint.get("sky-atmosphere-sun-intensity"),Y=((J,Q,ie,pe,de)=>({u_matrix_3f:J,u_sun_direction:Q,u_sun_intensity:ie,u_color_tint_r:[pe.r,pe.g,pe.b,pe.a],u_color_tint_m:[de.r,de.g,de.b,de.a],u_luminance:5e-5}))(i.e4(i.dx(),v),S,H,O,B);R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_CUBE_MAP_POSITIVE_X+E,a.skyboxTexture,0),d.draw(y,R.TRIANGLES,Bn.disabled,yr.disabled,Nr.unblended,xr.frontCW,Y,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const sy=i.d_([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class $v{constructor(a){const d=new i.e5;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const v=new i.a_;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(d,sy.members),this.indexBuffer=a.createIndexBuffer(v),this.segments=i.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const qv=i.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class J0{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Yh{constructor(a){this.colorModeAlphaBlendedWriteRGB=new Nr([1,Ea,1,Ea],i.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Nr([1,0,1,0],i.am.transparent,[!1,!1,!1,!0]),this.params=new J0,this.updateNeeded=!0,a.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),a.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(a){const d=a.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new $v(d);const v=this.params.sizeRange,S=this.params.intensityRange,E=function(Y){const J=i.ea(30),Q=[];for(let ie=0;ie<Y;++ie){const pe=2*Math.PI*J(),de=Math.acos(1-2*J())-.5*Math.PI;Q.push(i.cS(Math.cos(de)*Math.cos(pe),Math.cos(de)*Math.sin(pe),Math.sin(de)))}return Q}(this.params.starsCount),R=i.ea(300),O=new i.e6,B=new i.a_;let H=0;for(let Y=0;Y<E.length;++Y){const J=i.b$([],E[Y],200),Q=Math.max(0,1+.01*v*(1*R()-.5)),ie=Math.max(0,1+.01*S*(1*R()-.5));O.emplaceBack(J[0],J[1],J[2],-1,-1,Q,ie),O.emplaceBack(J[0],J[1],J[2],1,-1,Q,ie),O.emplaceBack(J[0],J[1],J[2],1,1,Q,ie),O.emplaceBack(J[0],J[1],J[2],-1,1,Q,ie),B.emplaceBack(H+0,H+1,H+2),B.emplaceBack(H+0,H+2,H+3),H+=4}this.starsVx=d.createVertexBuffer(O,qv.members),this.starsIdx=d.createIndexBuffer(B),this.starsSegments=i.bd.simpleSegment(0,0,O.length,B.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(a,d){const v=a.context,S=v.gl,E=a.transform,R=new Bn(S.LEQUAL,Bn.ReadOnly,[0,1]),O=i.ah(E.zoom),B=a.style.getLut(d.scope),H=d.properties.get("color-use-theme")==="none",Y=d.properties.get("color").toRenderColor(H?null:B).toArray01(),J=d.properties.get("high-color-use-theme")==="none",Q=d.properties.get("high-color").toRenderColor(J?null:B).toArray01(),ie=d.properties.get("space-color-use-theme")==="none",pe=d.properties.get("space-color").toRenderColor(ie?null:B).toArray01PremultipliedAlpha(),de=5e-4,ge=i.e7(d.properties.get("horizon-blend"),0,1,de,.25),fe=i.dl(a,v,E)&&ge===de?E.worldSize/(2*Math.PI*1.025)-1:E.globeRadius,Ee=a.frameCounter/1e3%1,Le=i.ae(E.globeCenterInViewSpace),je=Math.sqrt(Math.pow(Le,2)-Math.pow(fe,2)),Ye=Math.acos(je/Le),$e=Ue=>{const Fe=E.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ue&&Fe.push("ALPHA_PASS");const Ze=a.getOrCreateProgram("globeAtmosphere",{defines:Fe}),et=((ht,kt,Dt,tn,dt,_t,lt,Nt,xt,Ht,Lt,Gt)=>({u_frustum_tl:ht,u_frustum_tr:kt,u_frustum_br:Dt,u_frustum_bl:tn,u_horizon:dt,u_transition:_t,u_fadeout_range:lt,u_color:Nt,u_high_color:xt,u_space_color:Ht,u_temporal_offset:Lt,u_horizon_angle:Gt}))(E.frustumCorners.TL,E.frustumCorners.TR,E.frustumCorners.BR,E.frustumCorners.BL,E.frustumCorners.horizon,O,ge,Y,Q,pe,Ee,Ye);a.uploadCommonUniforms(v,Ze);const gt=this.atmosphereBuffer;gt&&Ze.draw(a,S.TRIANGLES,R,yr.disabled,Ue?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,xr.backCW,et,Ue?"atmosphere_glow_alpha":"atmosphere_glow",gt.vertexBuffer,gt.indexBuffer,gt.segments)};$e(!1),$e(!0)}drawStars(a,d){const v=i.aD(d.properties.get("star-intensity"),0,1);if(v===0)return;const S=a.context,E=S.gl,R=a.transform,O=a.getOrCreateProgram("stars"),B=i.bY([]);i.b_(B,B,-R._pitch),i.bZ(B,B,-R.angle),i.b_(B,B,i.al(R._center.lat)),i.e8(B,B,-i.al(R._center.lng));const H=i.c3(new Float32Array(16),B),Y=i.az([],R.starsProjMatrix,H),J=i.e4([],H),Q=i.e9([],J),ie=[0,1,0];i.dz(ie,ie,Q),i.b$(ie,ie,this.params.sizeMultiplier);const pe=[1,0,0];i.dz(pe,pe,Q),i.b$(pe,pe,this.params.sizeMultiplier);const de=(ge=ie,fe=pe,Ee=v,{u_matrix:Float32Array.from(Y),u_up:ge,u_right:fe,u_intensity_multiplier:Ee});var ge,fe,Ee;a.uploadCommonUniforms(S,O),this.starsVx&&this.starsIdx&&O.draw(a,E.TRIANGLES,Bn.disabled,yr.disabled,this.colorModeAlphaBlendedWriteRGB,xr.disabled,de,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Pd(y,a){const d=[...y],v=a.cameraWorldSizeForFog/a.worldSize,S=i.bx([]);return i.cE(S,S,[v,v,1]),i.az(d,S,d),i.az(d,a.worldToFogMatrix,d),d}function pn(y,a,d,v,S){const E=d.material,R=v.context,{baseColorTexture:O,metallicRoughnessTexture:B}=E.pbrMetallicRoughness,{normalTexture:H,occlusionTexture:Y,emissionTexture:J}=E;function Q(pe,de,ge){if(pe&&(y.push(de),R.activeTexture.set(R.gl.TEXTURE0+ge),pe.gfxTexture)){const{minFilter:fe,magFilter:Ee,wrapS:Le,wrapT:je}=pe.sampler;pe.gfxTexture.bindExtraParam(fe,Ee,Le,je)}}Q(O,"HAS_TEXTURE_u_baseColorTexture",aa.BaseColor),Q(B,"HAS_TEXTURE_u_metallicRoughnessTexture",aa.MetallicRoughness),Q(H,"HAS_TEXTURE_u_normalTexture",aa.Normal),Q(Y,"HAS_TEXTURE_u_occlusionTexture",aa.Occlusion),Q(J,"HAS_TEXTURE_u_emissionTexture",aa.Emission),S&&(S.texture||(S.texture=new i.ed(v.context,S.image,[S.image.height,S.image.height,S.image.height],R.gl.RGBA8)),R.activeTexture.set(R.gl.TEXTURE0+aa.LUT),S.texture&&S.texture.bind(R.gl.LINEAR,R.gl.CLAMP_TO_EDGE),y.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(y.push("HAS_ATTRIBUTE_a_uv_2f"),a.push(d.texcoordBuffer)),d.colorBuffer&&(y.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),a.push(d.colorBuffer)),d.normalBuffer&&(y.push("HAS_ATTRIBUTE_a_normal_3f"),a.push(d.normalBuffer)),d.pbrBuffer&&(y.push("HAS_ATTRIBUTE_a_pbr"),y.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),a.push(d.pbrBuffer)),E.alphaMode!=="OPAQUE"&&E.alphaMode!=="MASK"||y.push("UNPREMULT_TEXTURE_IN_SHADER"),E.defined||y.push("DIFFUSE_SHADED");const ie=v.shadowRenderer;ie&&(y.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ie.useNormalOffset&&y.push("NORMAL_OFFSET"))}function Pn(y,a,d,v,S,E){const R=d.paint.get("model-opacity").constantOr(1),O=a.context,B=new Bn(a.context.gl.LEQUAL,Bn.ReadWrite,a.depthRangeFor3D),H=a.transform,Y=y.mesh,J=Y.material,Q=J.pbrMetallicRoughness,ie=a.style.fog;let pe;pe=a.transform.projection.zAxisUnit==="pixels"?[...y.nodeModelMatrix]:i.az([],v.zScaleMatrix,y.nodeModelMatrix),i.az(pe,v.negCameraPosMatrix,pe);const de=i.bi([],pe);i.ee(de,de);const ge=d.paint.get("model-color-use-theme").constantOr("default")==="none",fe=d.paint.get("model-emissive-strength").constantOr(0),Ee=Sd(new Float32Array(y.worldViewProjection),new Float32Array(pe),new Float32Array(de),null,a,R,Q.baseColorFactor.toRenderColor(null),J.emissiveFactor,Q.metallicFactor,Q.roughnessFactor,J,fe,d),Le={defines:[]},je=[],Ye=a.shadowRenderer;Ye&&(Ye.useNormalOffset=!1),pn(Le.defines,je,Y,a,ge?null:d.lut);let $e=null;if(ie){const Ze=Pd(y.nodeModelMatrix,a.transform);if($e=new Float32Array(Ze),H.projection.name!=="globe"){const et=Y.aabb.min,gt=Y.aabb.max,[ht,kt]=ie.getOpacityForBounds(Ze,et[0],et[1],gt[0],gt[1]);Le.overrideFog=ht>=ln||kt>=ln}}const Ue=Ih(a,d.paint.get("model-cutoff-fade-range"));Ue.shouldRenderCutoff&&Le.defines.push("RENDER_CUTOFF");const Fe=a.getOrCreateProgram("model",Le);a.uploadCommonUniforms(O,Fe,null,$e,Ue),a.renderPass!=="shadow"&&Ye&&Ye.setupShadowsFromMatrix(y.nodeModelMatrix,Fe),Fe.draw(a,O.gl.TRIANGLES,B,S,E,Y.material.doubleSided?xr.disabled:xr.backCCW,Ee,d.id,Y.vertexBuffer,Y.indexBuffer,Y.segments,d.paint,a.transform.zoom,void 0,je)}function Kl(y,a,d,v,S,E,R){let O;O=y.projection.name==="globe"?i.ef(d,y):[...d],i.az(O,O,a.matrix);const B=i.az([],v,O);if(a.meshes)for(const H of a.meshes){if(H.material.alphaMode!=="BLEND"){R.push({mesh:H,depth:0,modelIndex:S,worldViewProjection:B,nodeModelMatrix:O});continue}const Y=i.ad([],H.centroid,B);!y.isOrthographic&&Y[2]<=0||E.push({mesh:H,depth:Y[2],modelIndex:S,worldViewProjection:B,nodeModelMatrix:O})}if(a.children)for(const H of a.children)Kl(y,H,d,v,S,E,R)}function yo(y,a,d,v){const S=d.shadowRenderer;if(!S)return;const E=S.getShadowPassDepthMode(),R=S.getShadowPassColorMode(),O=S.calculateShadowPassMatrixFromMatrix(a),B=Gh(O);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,E,yr.disabled,R,xr.backCCW,B,v.id,y.vertexBuffer,y.indexBuffer,y.segments,v.paint,d.transform.zoom,void 0,void 0)}function pt(y,a,d){const v=a.updateZoomBasedPaintProperties(),S=function(E,R,O){let B,H,Y,J=E.terrain?E.terrain.exaggeration():0;if(E.terrain&&J>0){const Q=E.terrain,ie=Q.findDEMTileFor(O);ie&&ie.dem?B=i.el.create(Q,O,ie):J=0}if(J===0&&(R.terrainElevationMin=0,R.terrainElevationMax=0),J===R.validForExaggeration&&(J===0||B&&B._demTile&&B._demTile.tileID===R.validForDEMTile.id&&B._dem._timestamp===R.validForDEMTile.timestamp))return!1;for(const Q in R.instancesPerModel){const ie=R.instancesPerModel[Q];for(let pe=0;pe<ie.instancedDataArray.length;++pe){const de=(B?J*B.getElevationAt(0|ie.instancedDataArray.float32[16*pe],0|ie.instancedDataArray.float32[16*pe+1],!0,!0):0)+ie.instancesEvaluatedElevation[pe];ie.instancedDataArray.float32[16*pe+6]=de,H=H?Math.min(R.terrainElevationMin,de):de,Y=Y?Math.max(R.terrainElevationMax,de):de}}return R.terrainElevationMin=H||0,R.terrainElevationMax=Y||0,R.validForExaggeration=J,R.validForDEMTile=B&&B._demTile?{id:B._demTile.tileID,timestamp:B._dem._timestamp}:{id:void 0,timestamp:0},!0}(y,a,d);(v||S)&&(a.uploaded=!1,a.upload(y.context))}const ul={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.cV([0,0,0],[i.aj,i.aj,0])};function Id(y,a){const d=1<<y.canonical.z,v=a.getFreeCameraOptions().position,S=a.elevation,E=y.canonical.x/d,R=(y.canonical.x+1)/d,O=y.canonical.y/d,B=(y.canonical.y+1)/d;let H=a._centerAltitude;if(S){const ie=S.getMinMaxForTile(y);ie&&ie.max>H&&(H=ie.max)}const Y=i.aD(v.x,E,R)-v.x,J=i.aD(v.y,O,B)-v.y,Q=i.c6(H,a.center.lat)-v.z;return a._zoomFromMercatorZ(Math.sqrt(Y*Y+J*J+Q*Q))}function qm(y,a,d,v,S,E,R){const O=y.context,B=y.renderPass==="shadow",H=y.shadowRenderer,Y=B&&H?H.getShadowPassDepthMode():new Bn(O.gl.LEQUAL,Bn.ReadWrite,y.depthRangeFor3D),J=y.isTileAffectedByFog(E);if(d.meshes)for(const Q of d.meshes){const ie=["MODEL_POSITION_ON_GPU"],pe=[];let de,ge,fe;v.instancedDataArray.length>20&&ie.push("INSTANCED_ARRAYS");const Ee=Ih(y,a.paint.get("model-cutoff-fade-range"));if(Ee.shouldRenderCutoff&&ie.push("RENDER_CUTOFF"),B&&H)de=y.getOrCreateProgram("modelDepth",{defines:ie}),ge=Gh(R.shadowTileMatrix,R.shadowTileMatrix,Float32Array.from(d.matrix)),fe=H.getShadowPassColorMode();else{pn(ie,pe,Q,y,a.paint.get("model-color-use-theme").constantOr("default")==="none"?null:a.lut),de=y.getOrCreateProgram("model",{defines:ie,overrideFog:J});const je=Q.material,Ye=je.pbrMetallicRoughness,$e=a.paint.get("model-opacity").constantOr(1),Ue=a.paint.get("model-emissive-strength").constantOr(0);ge=Sd(E.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,y,$e,Ye.baseColorFactor.toRenderColor(null),je.emissiveFactor,Ye.metallicFactor,Ye.roughnessFactor,je,Ue,a,S),H&&(R.shadowUniformsInitialized?de.setShadowUniformValues(O,H.getShadowUniformValues()):(H.setupShadows(E.toUnwrapped(),de,"model-tile",E.overscaledZ),R.shadowUniformsInitialized=!0)),fe=Ee.shouldRenderCutoff||$e<1||je.alphaMode!=="OPAQUE"?Nr.alphaBlended:Nr.unblended}y.uploadCommonUniforms(O,de,E.toUnwrapped(),null,Ee);const Le=Q.material.doubleSided?xr.disabled:xr.backCCW;if(v.instancedDataArray.length>20)pe.push(v.instancedDataBuffer),de.draw(y,O.gl.TRIANGLES,Y,yr.disabled,fe,Le,ge,a.id,Q.vertexBuffer,Q.indexBuffer,Q.segments,a.paint,y.transform.zoom,void 0,pe,v.instancedDataArray.length);else{const je=B?"u_instance":"u_normal_matrix";for(let Ye=0;Ye<v.instancedDataArray.length;++Ye)ge[je]=new Float32Array(v.instancedDataArray.arrayBuffer,64*Ye,16),de.draw(y,O.gl.TRIANGLES,Y,yr.disabled,fe,Le,ge,a.id,Q.vertexBuffer,Q.indexBuffer,Q.segments,a.paint,y.transform.zoom,void 0,pe)}}if(d.children)for(const Q of d.children)qm(y,a,Q,v,S,E,R)}const ay=[1,-1,1];function Hv(y,a,d,v){if(!d.modelManager)return!0;const S=d.modelManager;if(!d.shadowRenderer)return!0;const E=d.shadowRenderer,R=a.aabb;let O=!0,B=y.maxHeight;if(B===0){let Y=0;for(const J in y.instancesPerModel){const Q=S.getModel(J,v);Q?Y=Math.max(Y,Math.max(Math.max(Q.aabb.max[0],Q.aabb.max[1]),Q.aabb.max[2])):O=!1}B=y.maxScale*Y*1.41+y.maxVerticalOffset,O&&(y.maxHeight=B)}R.max[2]=B,R.min[2]+=y.terrainElevationMin,R.max[2]+=y.terrainElevationMax,i.ad(R.min,R.min,a.tileMatrix),i.ad(R.max,R.max,a.tileMatrix);const H=R.intersects(E.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(y.isInsideFirstShadowMapFrustum=H===2),H===0}function Gv(y,a){const d=y.uniformValues.u_cutoff_params[0],v=y.uniformValues.u_cutoff_params[1],S=y.uniformValues.u_cutoff_params[2],E=y.uniformValues.u_cutoff_params[3];return v===d||E===S?1:i.aD(((a-d)/(v-d)-S)/(E-S),0,1)}function Xh(y,a,d,v){if(a.pitch<20)return 1;const S=a.getWorldToCameraMatrix();i.az(S,S,y);const E=i.ei(d.min[0],d.min[1],d.min[2],1);let R=i.aA(i.ej(),E,S),O=R,B=R;E[1]=d.max[1],R=i.aA(i.ej(),E,S),O=R[1]<O[1]?R:O,B=R[1]>B[1]?R:B,E[0]=d.max[0],R=i.aA(i.ej(),E,S),O=R[1]<O[1]?R:O,B=R[1]>B[1]?R:B,E[1]=d.min[1],R=i.aA(i.ej(),E,S),O=R[1]<O[1]?R:O,B=R[1]>B[1]?R:B;const H=i.aD(v[0],0,1),Y=100*a.pixelsPerMeter*i.aD(v[1],0,1),J=i.aD(v[2],0,1),Q=i.ek(i.ej(),O,B,H),ie=Math.tan(.5*a.fovX),pe=-Q[2]*ie;if(Y===0)return Q[1]<-Math.abs(pe)?J:1;const de=(-Math.abs(pe)-Q[1])/Y,ge=(Ee,Le,je)=>(1-je)*Ee+je*Le,fe=i.aD(ge(1,J,de),J,1);return ge(1,fe,i.aD((a.pitch-20)/20,0,1))}class ex{}class Wv{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(a,d,v){{const J=this._storage.get(d.id);if(J)return J.lastUsedFrameIdx=a,J.buf}const S=v.gl,E=S.getBufferParameter(S.ELEMENT_ARRAY_BUFFER,S.BUFFER_SIZE),R=new ArrayBuffer(E),O=new Int16Array(R);S.getBufferSubData(S.ELEMENT_ARRAY_BUFFER,0,new Int16Array(R));const B=new i.en;for(let J=0;J<E/2;J+=3){const Q=O[J],ie=O[J+1],pe=O[J+2];B.emplaceBack(Q,ie),B.emplaceBack(ie,pe),B.emplaceBack(pe,Q)}const H=v.bindVertexArrayOES.current,Y=new ex;return Y.buf=new ru(v,B),Y.lastUsedFrameIdx=a,this._storage.set(d.id,Y),v.bindVertexArrayOES.set(H),Y.buf}update(a){for(const[d,v]of this._storage)a-v.lastUsedFrameIdx>30&&(v.buf.destroy(),this._storage.delete(d))}destroy(){for(const[a,d]of this._storage)d.buf.destroy(),this._storage.delete(a)}}class Yv{constructor(a){this.occluderSize=30,this.depthOffset=-1e-4,a.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),a.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Hm=i.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Gm{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class ly{constructor(a,d){this.revealStart=11,this.revealRange=2,a.registerParameter(this,[...d,"Reveal"],"revealStart",{min:0,max:17,step:.05}),a.registerParameter(this,[...d,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Xv=i.d_([{type:"Float32",name:"a_pos_2f",components:2}]);class cy{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(a,d){const v=a.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const R=new i.eo,O=new i.a_;R.emplaceBack(-1,-1),R.emplaceBack(1,-1),R.emplaceBack(1,1),R.emplaceBack(-1,1),O.emplaceBack(0,1,2),O.emplaceBack(0,2,3),this.vignetteVx=a.context.createVertexBuffer(R,Xv.members),this.vignetteIdx=a.context.createIndexBuffer(O)}const S=i.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){a.uploadCommonUniforms(a.context,v);const R={u_vignetteShape:(E={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:E.vignetteColor};v.draw(a,a.context.gl.TRIANGLES,Bn.disabled,yr.disabled,Nr.alphaBlended,xr.disabled,R,"vignette",this.vignetteVx,this.vignetteIdx,S)}var E}}class Zh{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(a,d){const v=a.getFreeCameraOptions().position,S=v.toAltitude(),E=v.toLngLat(),R=i.al(E.lng),O=i.al(E.lat),B=a.pixelsPerMeter/d,H=R*i.eq,Y=i.eq*Math.log(Math.tan(Math.PI/4+O/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const J=-this._offsetYPrev+Y,Q=-this._elevationPrev+S;this._accumulatedOffsetX+=(-this._offsetXPrev+H)*B,this._accumulatedOffsetY+=J*B,this._accumulatedElevation+=Q*B,this._offsetXPrev=H,this._offsetYPrev=Y,this._elevationPrev=S}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function kd(y,a){return[-(y[0]-Math.floor(y[0]/a)*a),-(y[1]-Math.floor(y[1]/a)*a),-(y[2]-Math.floor(y[2]/a)*a)]}function uy(y){const a=i.ea(1323123451230),d=[];for(let v=0;v<y;++v){const S=2*a()-1,E=2*a()-1,R=2*a()-1;d.push(i.cS(S,E,R))}return d}function su(y,a,d,v,S){const E=i.aD((S-d)/(v-d),0,1);return(1-E)*y+E*a}class la{constructor(a){this._movement=new Zh,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new cy,this._ppmScaleFactor=a}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(a,d){const v=a.transform;this._movement.update(v,this._ppmScaleFactor);const S=v.starsProjMatrix,E=i.bY([]);i.b_(E,E,i.al(90)-v._pitch),i.bZ(E,E,-v.angle);const R=i.c3(new Float32Array(16),E),O=i.ep(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),B=i.ee([],O),H=i.az([],B,R),Y=Date.now()/1e3;return this._accumulatedTimeFromStart+=(Y-this._prevTime)*d,this._prevTime=Y,{projectionMatrix:S,modelviewMatrix:H}}}class tx extends la{constructor(a){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new ly(a.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(a){const d=a.context;if(!this.particlesVx){const v=uy(this.particlesCount),S=new i.er,E=new i.a_;let R=0;const O=i.ea(1323123451230);for(let B=0;B<v.length;++B){const H=v[B],Y=[2*O()-1,O(),O(),O()];S.emplaceBack(H[0],H[1],H[2],-1,-1,...Y),S.emplaceBack(H[0],H[1],H[2],1,-1,...Y),S.emplaceBack(H[0],H[1],H[2],1,1,...Y),S.emplaceBack(H[0],H[1],H[2],-1,1,...Y),E.emplaceBack(R+0,R+1,R+2),E.emplaceBack(R+0,R+2,R+3),R+=4}this.particlesVx=d.createVertexBuffer(S,Hm.members),this.particlesIdx=d.createIndexBuffer(E)}}draw(a){if(!this._params.overrideStyleParameters&&!a.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},v=a.transform.zoom;if(d.revealStart>v)return;const S=su(0,1,d.revealStart,d.revealStart+d.revealRange,v);if(!this.particlesVx||!this.particlesIdx)return;const E=structuredClone(this._params);let R=[-E.direction.x,E.direction.y,-100];i.au(R,R);const O=structuredClone(this._vignetteParams);O.strength*=S,E.overrideStyleParameters||(E.intensity=a.style.rain.state.density,E.timeFactor=a.style.rain.state.intensity,E.color=structuredClone(a.style.rain.state.color),R=structuredClone(a.style.rain.state.direction),E.screenThinning.intensity=a.style.rain.state.centerThinning,E.dropletSizeX=a.style.rain.state.dropletSize[0],E.dropletSizeYScale=a.style.rain.state.dropletSize[1]/a.style.rain.state.dropletSize[0],E.distortionStrength=100*a.style.rain.state.distortionStrength,O.strength=1,O.color=structuredClone(a.style.rain.state.vignetteColor));const B=this.updateOnRender(a,E.timeFactor),H=a.context,Y=H.gl,J=a.transform;this.screenTexture&&this.screenTexture.size[0]===a.width&&this.screenTexture.size[1]===a.height||(this.screenTexture=new i.T(H,{width:a.width,height:a.height,data:null},Y.RGBA8)),E.distortionStrength>0&&(H.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Y.copyTexSubImage2D(Y.TEXTURE_2D,0,0,0,0,0,a.width,a.height));const Q=a.getOrCreateProgram("rainParticle");a.uploadCommonUniforms(H,Q),H.activeTexture.set(Y.TEXTURE0),this.screenTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const ie=[E.color.r,E.color.g,E.color.b,E.color.a],pe=(de,ge)=>{const fe=kd(this._movement.getPosition(),de),Ee=E.dropletSizeX,Le=E.dropletSizeX*E.dropletSizeYScale,je=a.width/2,Ye=a.height/2,$e=su(0,E.screenThinning.start,0,1,E.screenThinning.intensity),Ue=su(.001,E.screenThinning.range,0,1,E.screenThinning.intensity),Fe=su(0,E.screenThinning.particleOffset,0,1,E.screenThinning.intensity),Ze=(et={modelview:B.modelviewMatrix,projection:B.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:fe,velocityConeAperture:E.velocityConeAperture,velocity:E.velocity,boxSize:de,rainDropletSize:[Ee,Le],distortionStrength:E.distortionStrength,rainDirection:R,color:ie,screenSize:[J.width,J.height],thinningCenterPos:[je,Ye],thinningShape:[$e,Ue,Math.pow(10,E.screenThinning.fadePower)],thinningAffectedRatio:E.screenThinning.affectedRatio,thinningParticleOffset:Fe,shapeDirectionalPower:E.shapeDirPower,shapeNormalPower:E.shapeNormalPower,mode:ge?0:1},{u_modelview:Float32Array.from(et.modelview),u_projection:Float32Array.from(et.projection),u_time:et.time,u_cam_pos:et.camPos,u_texScreen:0,u_velocityConeAperture:et.velocityConeAperture,u_velocity:et.velocity,u_boxSize:et.boxSize,u_rainDropletSize:et.rainDropletSize,u_distortionStrength:et.distortionStrength,u_rainDirection:et.rainDirection,u_color:et.color,u_screenSize:et.screenSize,u_thinningCenterPos:et.thinningCenterPos,u_thinningShape:et.thinningShape,u_thinningAffectedRatio:et.thinningAffectedRatio,u_thinningParticleOffset:et.thinningParticleOffset,u_shapeDirectionalPower:et.shapeDirectionalPower,u_shapeNormalPower:et.shapeNormalPower,u_mode:et.mode});var et;const gt=Math.round(E.intensity*this.particlesCount),ht=i.bd.simpleSegment(0,0,4*gt,2*gt);Q.draw(a,Y.TRIANGLES,Bn.disabled,yr.disabled,Nr.alphaBlended,xr.disabled,Ze,"rain_particles",this.particlesVx,this.particlesIdx,ht)};E.distortionStrength>0&&pe(E.boxSize,!0),pe(E.boxSize,!1),this._vignette.draw(a,O)}}const Wm=i.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class io extends la{constructor(a){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new ly(a.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(a){const d=a.context;if(!this.particlesVx){const v=uy(this.particlesCount),S=new i.es,E=new i.a_;let R=0;const O=i.ea(1323123451230);for(let B=0;B<v.length;++B){const H=v[B],Y=O(),J=O(),Q=O(),ie=[B/v.length,Y,J,Q],pe=[O(),O()];S.emplaceBack(H[0],H[1],H[2],-1,-1,...ie,...pe),S.emplaceBack(H[0],H[1],H[2],1,-1,...ie,...pe),S.emplaceBack(H[0],H[1],H[2],1,1,...ie,...pe),S.emplaceBack(H[0],H[1],H[2],-1,1,...ie,...pe),E.emplaceBack(R+0,R+1,R+2),E.emplaceBack(R+0,R+2,R+3),R+=4}this.particlesVx=d.createVertexBuffer(S,Wm.members),this.particlesIdx=d.createIndexBuffer(E)}}draw(a){if(!this._params.overrideStyleParameters&&!a.style.snow)return;const d=structuredClone(this._params);let v=[-d.direction.x,d.direction.y,-100];i.au(v,v);const S=structuredClone(this._vignetteParams),E=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},R=a.transform.zoom;if(E.revealStart>R)return;const O=su(0,1,E.revealStart,E.revealStart+E.revealRange,R);S.strength*=O,d.overrideStyleParameters||(d.intensity=a.style.snow.state.density,d.timeFactor=a.style.snow.state.intensity,d.color=structuredClone(a.style.snow.state.color),v=structuredClone(a.style.snow.state.direction),d.screenThinning.intensity=a.style.snow.state.centerThinning,d.billboardSize=2.79*a.style.snow.state.flakeSize,S.strength=1,S.color=structuredClone(a.style.snow.state.vignetteColor));const B=this.updateOnRender(a,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const H=a.context,Y=H.gl,J=a.transform,Q=a.getOrCreateProgram("snowParticle");a.uploadCommonUniforms(H,Q),((ie,pe,de)=>{const ge=kd(this._movement.getPosition(),ie),fe=J.width/2,Ee=J.height/2,Le=su(0,de.screenThinning.start,0,1,de.screenThinning.intensity),je=su(.001,de.screenThinning.range,0,1,de.screenThinning.intensity),Ye=su(0,de.screenThinning.particleOffset,0,1,de.screenThinning.intensity),$e=(Ue={modelview:B.modelviewMatrix,projection:B.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:ge,velocityConeAperture:de.velocityConeAperture,velocity:de.velocity,horizontalOscillationRadius:de.horizontalOscillationRadius,horizontalOscillationRate:de.horizontalOscillationRate,boxSize:ie,billboardSize:1*de.billboardSize,simpleShapeParameters:[de.shapeFadeStart,de.shapeFadePower],screenSize:[J.width,J.height],thinningCenterPos:[fe,Ee],thinningShape:[Le,je,Math.pow(10,de.screenThinning.fadePower)],thinningAffectedRatio:de.screenThinning.affectedRatio,thinningParticleOffset:Ye,color:[de.color.r,de.color.g,de.color.b,de.color.a],direction:v},{u_modelview:Float32Array.from(Ue.modelview),u_projection:Float32Array.from(Ue.projection),u_time:Ue.time,u_cam_pos:Ue.camPos,u_velocityConeAperture:Ue.velocityConeAperture,u_velocity:Ue.velocity,u_horizontalOscillationRadius:Ue.horizontalOscillationRadius,u_horizontalOscillationRate:Ue.horizontalOscillationRate,u_boxSize:Ue.boxSize,u_billboardSize:Ue.billboardSize,u_simpleShapeParameters:Ue.simpleShapeParameters,u_screenSize:Ue.screenSize,u_thinningCenterPos:Ue.thinningCenterPos,u_thinningShape:Ue.thinningShape,u_thinningAffectedRatio:Ue.thinningAffectedRatio,u_thinningParticleOffset:Ue.thinningParticleOffset,u_particleColor:Ue.color,u_direction:Ue.direction});var Ue;const Fe=Math.round(de.intensity*this.particlesCount),Ze=i.bd.simpleSegment(0,0,4*Fe,2*Fe);this.particlesVx&&this.particlesIdx&&Q.draw(a,Y.TRIANGLES,Bn.disabled,yr.disabled,Nr.alphaBlended,xr.disabled,$e,"snow_particles",this.particlesVx,this.particlesIdx,Ze)})(d.boxSize,0,d),this._vignette.draw(a,S)}}const ui={symbol:function(y,a,d,v,S){if(y.renderPass!=="translucent")return;const E=yr.disabled,R=y.colorModeForRenderPass(),O=d.layout.get("text-variable-anchor"),B=d.layout.get("text-size-scale-range"),H=i.aD(y.scaleFactor,B[0],B[1]);O&&function(Q,ie,pe,de,ge,fe,Ee,Le){const je=ie.transform,Ye=ge==="map",$e=fe==="map";for(const Ue of Q){const Fe=de.getTile(Ue),Ze=Fe.getBucket(pe);if(!Ze||!Ze.text||!Ze.text.segments.get().length)continue;const et=i.bH(Ze.textSizeData,je.zoom,Le),gt=pm(Ue,Ze.getProjection(),je),ht=je.calculatePixelsToTileUnitsMatrix(Fe),kt=Ul(gt,Fe.tileID.canonical,$e,Ye,je,Ze.getProjection(),ht),Dt=Ze.hasIconTextFit()&&Ze.hasIconData();et&&sp(Ze,Ye,$e,Ee,je,kt,Ue,Math.pow(2,je.zoom-Fe.tileID.overscaledZ),et,Dt)}}(v,y,d,a,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),S,H);const Y=d.paint.get("icon-opacity").constantOr(1)!==0,J=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(Y||J)?Ed(y,a,d,v,E,R):(Y&&Ed(y,a,d,v,E,R,{onlyIcons:!0}),J&&Ed(y,a,d,v,E,R,{onlyText:!0})),a.map.showCollisionBoxes&&(Xo(y,a,d,v,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Xo(y,a,d,v,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(y,a,d,v){if(y.renderPass!=="translucent")return;const S=d.paint.get("circle-opacity"),E=d.paint.get("circle-stroke-width"),R=d.paint.get("circle-stroke-opacity"),O=d.layout.get("circle-sort-key").constantOr(1)!==void 0,B=d.paint.get("circle-emissive-strength");if(S.constantOr(1)===0&&(E.constantOr(1)===0||R.constantOr(1)===0))return;const H=y.context,Y=H.gl,J=y.transform,Q=y.depthModeForSublayer(0,Bn.ReadOnly),ie=yr.disabled,pe=y.colorModeForDrapableLayerRenderPass(B),de=J.projection.name==="globe",ge=[i.ay(J.center.lng),i.aH(J.center.lat)],fe=[];for(let Le=0;Le<v.length;Le++){const je=v[Le],Ye=a.getTile(je),$e=Ye.getBucket(d);if(!$e||$e.projection.name!==J.projection.name)continue;const Ue=$e.programConfigurations.get(d.id),Fe=i.dK(d),Ze=y.isTileAffectedByFog(je);de&&Fe.push("PROJECTION_GLOBE_VIEW"),Fe.push("DEPTH_D24"),y.terrain&&J.depthOcclusionForSymbolsAndCircles&&Fe.push("DEPTH_OCCLUSION");const et=y.getOrCreateProgram("circle",{config:Ue,defines:Fe,overrideFog:Ze}),gt=$e.layoutVertexBuffer,ht=$e.globeExtVertexBuffer,kt=$e.indexBuffer,Dt=J.projection.createInversionMatrix(J,je.canonical),tn={programConfiguration:Ue,program:et,layoutVertexBuffer:gt,globeExtVertexBuffer:ht,indexBuffer:kt,uniformValues:i.dL(y,je,Ye,Dt,ge,d),tile:Ye};if(O){const dt=$e.segments.get();for(const _t of dt)fe.push({segments:new i.bd([_t]),sortKey:_t.sortKey,state:tn})}else fe.push({segments:$e.segments,sortKey:0,state:tn})}O&&fe.sort((Le,je)=>Le.sortKey-je.sortKey);const Ee={useDepthForOcclusion:J.depthOcclusionForSymbolsAndCircles};for(const Le of fe){const{programConfiguration:je,program:Ye,layoutVertexBuffer:$e,globeExtVertexBuffer:Ue,indexBuffer:Fe,uniformValues:Ze,tile:et}=Le.state,gt=Le.segments;y.terrain&&y.terrain.setupElevationDraw(et,Ye,Ee),y.uploadCommonUniforms(H,Ye,et.tileID.toUnwrapped()),Ye.draw(y,Y.TRIANGLES,Q,ie,pe,xr.disabled,Ze,d.id,$e,Fe,gt,d.paint,J.zoom,je,[Ue])}},heatmap:function(y,a,d,v){if(d.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const S=y.context,E=S.gl,R=yr.disabled,O=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],i.am.transparent,[!0,!0,!0,!0]);(function(ie,pe,de,ge){const fe=ie.gl,Ee=pe.width*ge,Le=pe.height*ge;ie.activeTexture.set(fe.TEXTURE1),ie.viewport.set([0,0,Ee,Le]);let je=de.heatmapFbo;if(!je||je&&(je.width!==Ee||je.height!==Le)){je&&je.destroy();const Ye=fe.createTexture();fe.bindTexture(fe.TEXTURE_2D,Ye),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.LINEAR),je=de.heatmapFbo=ie.createFramebuffer(Ee,Le,!0,null),function($e,Ue,Fe,Ze,et,gt){const ht=$e.gl;ht.texImage2D(ht.TEXTURE_2D,0,$e.extRenderToTextureHalfFloat?ht.RGBA16F:ht.RGBA,et,gt,0,ht.RGBA,$e.extRenderToTextureHalfFloat?ht.HALF_FLOAT:ht.UNSIGNED_BYTE,null),Ze.colorAttachment.set(Fe)}(ie,0,Ye,je,Ee,Le)}else fe.bindTexture(fe.TEXTURE_2D,je.colorAttachment.get()),ie.bindFramebuffer.set(je.framebuffer)})(S,y,d,y.transform.projection.name==="globe"?.5:.25),S.clear({color:i.am.transparent});const B=y.transform,H=B.projection.name==="globe",Y=H?["PROJECTION_GLOBE_VIEW"]:[],J=H?xr.frontCCW:xr.disabled,Q=[i.ay(B.center.lng),i.aH(B.center.lat)];for(let ie=0;ie<v.length;ie++){const pe=v[ie];if(a.hasRenderableParent(pe))continue;const de=a.getTile(pe),ge=de.getBucket(d);if(!ge||ge.projection.name!==B.projection.name)continue;const fe=y.isTileAffectedByFog(pe),Ee=ge.programConfigurations.get(d.id),Le=y.getOrCreateProgram("heatmap",{config:Ee,defines:Y,overrideFog:fe}),{zoom:je}=y.transform;y.terrain&&y.terrain.setupElevationDraw(de,Le),y.uploadCommonUniforms(S,Le,pe.toUnwrapped());const Ye=B.projection.createInversionMatrix(B,pe.canonical);Le.draw(y,E.TRIANGLES,Bn.disabled,R,O,J,np(y,pe,de,Ye,Q,je,d.paint.get("heatmap-intensity")),d.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,d.paint,y.transform.zoom,Ee,H?[ge.globeExtVertexBuffer]:null)}S.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(S,E){const R=S.context,O=R.gl,B=E.heatmapFbo;if(!B)return;R.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,B.colorAttachment.get()),R.activeTexture.set(O.TEXTURE1);let H=E.colorRampTexture;H||(H=E.colorRampTexture=new i.T(R,E.colorRamp,O.RGBA8)),H.bind(O.LINEAR,O.CLAMP_TO_EDGE),S.getOrCreateProgram("heatmapTexture").draw(S,O.TRIANGLES,Bn.disabled,yr.disabled,S.colorModeForRenderPass(),xr.disabled,((Y,J,Q,ie)=>({u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}))(0,E),E.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,E.paint,S.transform.zoom)}(y,d))},line:function(y,a,d,v){if(y.renderPass!=="translucent")return;const S=d.paint.get("line-opacity"),E=d.paint.get("line-width");if(S.constantOr(1)===0||E.constantOr(1)===0)return;const R=d.paint.get("line-emissive-strength"),O=d.paint.get("line-occlusion-opacity"),B=d.layout.get("line-elevation-reference"),H=d.layout.get("line-width-unit")==="meters",Y=B==="sea",J=!(!y.terrain||!y.terrain.enabled),Q=y.context,ie=Q.gl;if(d.hasElevatedBuckets&&y.transform.projection.name==="globe")return;const pe=d.layout.get("line-cross-slope"),de=pe!==void 0,ge=pe<1,fe=y.colorModeForDrapableLayerRenderPass(R),Ee=y.terrain&&y.terrain.renderingToTexture,Le=Ee?1:i.q.devicePixelRatio,je=d.paint.get("line-dasharray"),Ye=je.constantOr(1),$e=d.layout.get("line-cap"),Ue=je.constantOr(null),Fe=$e.constantOr(null),Ze=d.paint.get("line-pattern"),et=Ze.constantOr(1),gt=d.paint.get("line-pattern-cross-fade"),ht=Ze.constantOr(null),kt=d.paint.get("line-opacity").constantOr(1);let Dt=!et&&kt!==1||y.depthOcclusion&&O>0&&O<1;const tn=d.paint.get("line-gradient"),dt=et?"linePattern":"line",_t=i.dM(d);let lt;if(Ee&&y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(Dt=!1),O!==0&&y.depthOcclusion){const Lt=d.paint._values["line-opacity"];Lt&&Lt.value&&Lt.value.kind==="constant"?lt=Lt.value:i.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}E.value.kind!=="constant"&&E.value.isLineProgressConstant===!1&&_t.push("VARIABLE_LINE_WIDTH");const Nt=(Lt,Gt,Zt,Fn,$n,On)=>{for(const Zn of Lt){const jn=a.getTile(Zn);if(et&&!jn.patternsLoaded())continue;const ur=jn.getBucket(d);if(!ur||ur.elevationType!=="none"&&!$n||ur.elevationType==="none"&&$n)continue;y.prepareDrawTile();const Cr=[...Gt],cr=y.shadowRenderer,Lr=ur.elevationType==="road"&&!!cr&&cr.enabled;let vr=[0,0,0];if(Lr){const Sr=y.style.directionalLight,Ni=y.style.ambientLight;Sr&&Ni&&(vr=Cc(y.style,Sr,Ni)),Cr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const sr=ur.programConfigurations.get(d.id);let Yr=!1;if(ht&&jn.imageAtlas){const Sr=i.dN.from(ht),Ni=Sr.getPrimary().scaleSelf(Le).toString(),ii=jn.imageAtlas.patternPositions.get(Ni),pi=Sr.getSecondary(),mi=pi?jn.imageAtlas.patternPositions.get(pi.scaleSelf(Le).toString()):null;Yr=!!ii&&!!mi,ii&&sr.setConstantPatternPositions(ii,mi)}gt>0&&(Yr||sr.getPatternTransitionVertexBuffer("line-pattern"))&&Cr.push("LINE_PATTERN_TRANSITION");const Si=y.isTileAffectedByFog(Zn),Ar=y.getOrCreateProgram(dt,{config:sr,defines:Cr,overrideFog:Si,overrideRtt:!$n&&void 0});if(!et&&Ue&&Fe&&jn.lineAtlas){const Sr=jn.lineAtlas.getDash(Ue,Fe);Sr&&sr.setConstantPatternPositions(Sr)}Lr&&cr.setupShadows(jn.tileID.toUnwrapped(),Ar,"vector-tile",jn.tileID.overscaledZ);let[Xr,ci]=d.paint.get("line-trim-offset");(Fe==="round"||Fe==="square")&&Xr!==ci&&(Xr===0&&(Xr-=1),ci===1&&(ci+=1));const di=Ee?Zn.projMatrix:null,Ti=H?1/ur.tileToMeter/i.aw(jn,1,y.transform.zoom):1,Wi=H?1/ur.tileToMeter/i.aw(jn,1,Math.floor(y.transform.zoom)):1,wo=et?i.dO(y,jn,d,di,Le,Ti,Wi,[Xr,ci],vr,gt):i.dP(y,jn,d,di,ur.lineClipsArray.length,Le,Ti,Wi,[Xr,ci],vr);if(tn){const Sr=ur.gradients[d.id];let Ni=Sr.texture;if(d.gradientVersion!==Sr.version){let ii=256;if(d.stepInterpolant){const pi=a.getSource().maxzoom,mi=Zn.canonical.z===pi?Math.ceil(1<<y.transform.maxZoom-Zn.canonical.z):1;ii=i.aD(i.dQ(ur.maxLineLength/i.aj*1024*mi),256,Q.maxTextureSize)}Sr.gradient=i.dR({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:ii,image:Sr.gradient||void 0,clips:ur.lineClipsArray}),Sr.texture?Sr.texture.update(Sr.gradient):Sr.texture=new i.T(Q,Sr.gradient,ie.RGBA8),Sr.version=d.gradientVersion,Ni=Sr.texture}Q.activeTexture.set(ie.TEXTURE1),Ni.bind(d.stepInterpolant?ie.NEAREST:ie.LINEAR,ie.CLAMP_TO_EDGE)}Ye&&(Q.activeTexture.set(ie.TEXTURE0),jn.lineAtlasTexture&&jn.lineAtlasTexture.bind(ie.LINEAR,ie.REPEAT),sr.updatePaintBuffers()),et&&(Q.activeTexture.set(ie.TEXTURE0),jn.imageAtlasTexture&&jn.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),sr.updatePaintBuffers()),$n&&!Y&&y.terrain.setupElevationDraw(jn,Ar),y.uploadCommonUniforms(Q,Ar,Zn.toUnwrapped());const Yi=Sr=>{lt!=null&&(lt.value=kt*O),Ar.draw(y,ie.TRIANGLES,Zt,Sr,fe,xr.disabled,wo,d.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,d.paint,y.transform.zoom,sr,[ur.layoutVertexBuffer2,ur.patternVertexBuffer,ur.zOffsetVertexBuffer]),lt!=null&&(lt.value=kt)};if(Dt&&!$n){const Sr=y.stencilModeForClipping(Zn).ref;Sr===0&&Ee&&Q.clear({stencil:0});const Ni={func:ie.EQUAL,mask:255};wo.u_alpha_discard_threshold=.8,Yi(new yr(Ni,Sr,255,ie.KEEP,ie.KEEP,ie.INVERT)),wo.u_alpha_discard_threshold=0,Yi(new yr(Ni,Sr,255,ie.KEEP,ie.KEEP,ie.KEEP))}else wo.u_alpha_discard_threshold=Dt&&$n&&On?.8:0,Yi($n?Fn:y.stencilModeForClipping(Zn))}};let xt=y.depthModeForSublayer(0,Bn.ReadOnly);const Ht=new Bn(y.depthOcclusion?ie.GREATER:ie.LEQUAL,Bn.ReadOnly,y.depthRangeFor3D);if(d.hasNonElevatedBuckets){const Lt=!Ee&&y.terrain;O!==0&&Lt?i.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):Lt?i.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):Nt(v,_t,xt,yr.disabled,!1,!0)}if(d.hasElevatedBuckets){B==="hd-road-markup"?J||(xt=Ht,_t.push("ELEVATED_ROADS")):(_t.push("ELEVATED"),xt=Ht,de&&_t.push(ge?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),Y&&_t.push("ELEVATION_REFERENCE_SEA"));const Lt=Dt?y.stencilModeFor3D():yr.disabled;y.forceTerrainMode=!0,Nt(v,_t,xt,Lt,!0,!0),Dt&&Nt(v,_t,xt,Lt,!0,!1),y.forceTerrainMode=!1}Dt&&(y.resetStencilClippingMasks(),Ee&&Q.clear({stencil:0})),O===0||y.depthOcclusion||Ee||y.layersWithOcclusionOpacity.push(y.currentLayer)},fill:function(y,a,d,v){const S=d.paint.get("fill-color"),E=d.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const R=d.paint.get("fill-emissive-strength"),O=y.colorModeForDrapableLayerRenderPass(R),B=d.paint.get("fill-pattern"),H=y.opaquePassEnabledForLayer()&&!B.constantOr(1)&&S.constantOr(i.am.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";let Y="none";d.layout.get("fill-elevation-reference")!=="none"?Y="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(Y="offset");const J=!(!y.terrain||!y.terrain.enabled),Q={painter:y,sourceCache:a,layer:d,coords:v,colorMode:O,elevationType:Y,terrainEnabled:J,pass:H};if(y.renderPass!=="shadow")if(Y!=="offset"){if(In(Q,!1),Y==="road"){const ie=!J&&y.renderPass==="translucent";ie&&Zo(y,a,d,v,"geometry"),In(Q,!0,yr.disabled),ie&&function(pe){const{painter:de,sourceCache:ge,layer:fe,coords:Ee,colorMode:Le}=pe,je=de.context.gl,Ye=pe.painter.shadowRenderer,$e=!!Ye&&Ye.enabled,Ue=new Bn(de.context.gl.LEQUAL,Bn.ReadOnly,de.depthRangeFor3D);let Fe=[0,0,0];if($e){const Ze=de.style.directionalLight,et=de.style.ambientLight;Ze&&et&&(Fe=Cc(de.style,Ze,et))}for(const Ze of Ee){const et=ge.getTile(Ze),gt=et.getBucket(fe);if(!gt)continue;const ht=gt.elevatedStructures;if(!ht||!ht.renderableSegments||ht.renderableSegments.segments[0].primitiveLength===0)continue;de.prepareDrawTile();const kt=gt.bufferData.programConfigurations.get(fe.id),Dt=de.isTileAffectedByFog(Ze),tn=[];$e&&tn.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const dt=de.getOrCreateProgram("elevatedStructures",{config:kt,overrideFog:Dt,defines:tn}),_t=de.translatePosMatrix(Ze.projMatrix,et,fe.paint.get("fill-translate"),fe.paint.get("fill-translate-anchor"));$e&&Ye.setupShadows(et.tileID.toUnwrapped(),dt,"vector-tile",et.tileID.overscaledZ);const lt=tp(_t,Fe);de.uploadCommonUniforms(de.context,dt,Ze.toUnwrapped()),dt.draw(de,je.TRIANGLES,Ue,yr.disabled,Le,xr.backCCW,lt,fe.id,ht.vertexBuffer,ht.indexBuffer,ht.renderableSegments,fe.paint,de.transform.zoom,kt,[ht.vertexBufferNormal])}}(Q)}}else In(Q,!1,y.stencilModeFor3D());else y.shadowRenderer&&Y==="road"&&!J&&function(ie){const{painter:pe,sourceCache:de,layer:ge,coords:fe}=ie,Ee=pe.context.gl,Le=ie.painter.shadowRenderer;for(const je of fe){const Ye=de.getTile(je),$e=Ye.getBucket(ge);if(!$e)continue;const Ue=$e.elevatedStructures;if(!Ue||!Ue.shadowCasterSegments||Ue.shadowCasterSegments.segments[0].primitiveLength===0)continue;pe.prepareDrawTile();const Fe=$e.bufferData.programConfigurations.get(ge.id),Ze=pe.isTileAffectedByFog(je),et=pe.getOrCreateProgram("elevatedStructuresDepth",{config:Fe,overrideFog:Ze}),gt=Le.calculateShadowPassMatrixFromTile(Ye.tileID.toUnwrapped());pe.uploadCommonUniforms(pe.context,et,je.toUnwrapped());const ht={u_matrix:gt,u_depth_bias:.001};et.draw(pe,Ee.TRIANGLES,Le.getShadowPassDepthMode(),yr.disabled,Le.getShadowPassColorMode(),xr.disabled,ht,ge.id,Ue.vertexBuffer,Ue.indexBuffer,Ue.shadowCasterSegments,ge.paint,pe.transform.zoom,Fe)}}(Q)},"fill-extrusion":function(y,a,d,v){const S=d.paint.get("fill-extrusion-opacity"),E=y.context,R=E.gl,O=y.terrain,B=O&&O.renderingToTexture;if(S===0)return;const H=y.conflationActive&&y.style.isLayerClipped(d,a.getSource()),Y=y.style.order.indexOf(d.fqid);if(H&&function(J,Q,ie,pe,de){for(const ge of pe){const fe=Q.getTile(ge).getBucket(ie);fe&&(fe.updateReplacement(ge,J.replacementSource,de),fe.uploadCentroid(J.context))}}(y,a,d,v,Y),O||H)for(const J of v){const Q=a.getTile(J).getBucket(d);Q&&zu(y.context,a,J,Q,d,O,H)}if(y.renderPass==="shadow"&&y.shadowRenderer){const J=y.shadowRenderer;if(O&&S<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.ab)return;const Q=J.getShadowPassDepthMode(),ie=J.getShadowPassColorMode();Wh(y,a,d,v,Q,yr.disabled,ie,H)}else if(y.renderPass==="translucent"){const J=!d.paint.get("fill-extrusion-pattern").constantOr(1),Q=d.paint.get("fill-extrusion-color").constantOr(i.am.white);if(!B&&Q.a!==0){const ie=new Bn(y.context.gl.LEQUAL,Bn.ReadWrite,y.depthRangeFor3D);S===1&&J?Wh(y,a,d,v,ie,yr.disabled,Nr.unblended,H):(Wh(y,a,d,v,ie,yr.disabled,Nr.disabled,H),Wh(y,a,d,v,ie,y.stencilModeFor3D(),y.colorModeForRenderPass(),H),y.resetStencilClippingMasks())}if(y.style.enable3dLights()&&J&&(!O&&y.transform.projection.name!=="globe"||B)){const ie=d.paint.get("fill-extrusion-opacity"),pe=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),de=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ge=d.paint.get("fill-extrusion-flood-light-intensity"),fe=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ee=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(fe?null:d.lut).toArray01().slice(0,3),Le=pe>0&&de>0,je=ge>0,Ye=(Ue,Fe,Ze)=>(1-Ze)*Ue+Ze*Fe,$e=Ue=>{const Fe=y.depthModeForSublayer(1,Bn.ReadOnly,R.LEQUAL,!0),Ze=d.paint.get(Ue?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),et=Ye(.1,3,Ze),gt=y._showOverdrawInspector;if(!gt){const ht=new yr({func:R.ALWAYS,mask:255},255,255,R.KEEP,R.KEEP,R.REPLACE),kt=new Nr([R.ONE,R.ONE,R.ONE,R.ONE],i.am.transparent,[!1,!1,!1,!0],R.MIN);Ad(y,a,d,v,Fe,ht,kt,xr.disabled,Ue,"sdf",ie,pe,de,ge,Ee,et,H,!1)}{const ht=gt?yr.disabled:new yr({func:R.EQUAL,mask:255},255,255,R.KEEP,R.DECR,R.DECR),kt=gt?y.colorModeForRenderPass():new Nr([R.ONE_MINUS_DST_ALPHA,R.DST_ALPHA,R.ONE,R.ONE],i.am.transparent,[!0,!0,!0,!0]);Ad(y,a,d,v,Fe,ht,kt,xr.disabled,Ue,"color",ie,pe,de,ge,Ee,et,H,!1)}};if(B){const Ue=(Fe,Ze,et)=>{const gt=y.depthModeForSublayer(1,Bn.ReadOnly,R.LEQUAL,!1),ht=d.paint.get(Fe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),kt=Ye(.1,3,ht);{const Dt=new Nr([R.ONE,R.ONE,R.ONE,R.ONE],i.am.transparent,[!1,!1,!1,!0]);Ad(y,a,d,v,gt,yr.disabled,Dt,xr.disabled,Fe,"clear",ie,pe,de,ge,Ee,kt,H,Ze)}{const Dt=new yr({func:R.ALWAYS,mask:255},255,255,R.KEEP,R.KEEP,R.REPLACE),tn=new Nr([R.ONE,R.ONE,R.ONE,R.ONE],i.am.transparent,[!1,!1,!1,!0],R.MIN);Ad(y,a,d,v,gt,Dt,tn,xr.disabled,Fe,"sdf",ie,pe,de,ge,Ee,kt,H,Ze)}{const Dt=Fe?R.ZERO:R.ONE_MINUS_DST_ALPHA,tn=new yr({func:R.EQUAL,mask:255},255,255,R.KEEP,R.DECR,R.DECR),dt=new Nr([Dt,R.DST_ALPHA,R.ONE_MINUS_DST_ALPHA,R.ZERO],i.am.transparent,[!0,!0,!0,!0]);Ad(y,a,d,v,gt,tn,dt,xr.disabled,Fe,"color",ie,pe,de,ge,Ee,kt,H,Ze)}{const Dt=new Nr([R.ONE,R.ONE,R.ONE,Fe?R.ZERO:R.ONE],i.am.transparent,[!1,!1,!1,!0],Fe?R.FUNC_ADD:R.MAX);Ad(y,a,d,v,gt,yr.disabled,Dt,xr.disabled,Fe,"clear",ie,pe,de,ge,Ee,kt,H,Ze,et)}};if(Le||je){let Fe;if(y.prepareDrawTile(),O){const Ze=O.drapeBufferSize[0],et=O.drapeBufferSize[1];Fe=O.framebufferCopyTexture,Fe&&(!Fe||Fe.size[0]===Ze&&Fe.size[1]===et)||(Fe&&Fe.destroy(),Fe=O.framebufferCopyTexture=new i.T(E,new i.r({width:Ze,height:et}),R.RGBA8)),Fe.bind(R.LINEAR,R.CLAMP_TO_EDGE),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,0,0,Ze,et)}Le&&Ue(!0,!1,Fe),je&&Ue(!1,!0,Fe)}}else Le&&$e(!0),je&&$e(!1),(Le||je)&&y.resetStencilClippingMasks()}}},hillshade:function(y,a,d,v){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent"||y.style.disableElevatedTerrain)return;const S=y.context,E=y.terrain&&y.terrain.renderingToTexture,[R,O]=y.renderPass!=="translucent"||E?[{},v]:y.stencilConfigForOverlap(v);for(const B of O){const H=a.getTile(B);if(H.needsHillshadePrepare&&y.renderPass==="offscreen")Rc(y,H,d);else if(y.renderPass==="translucent"){const Y=y.depthModeForSublayer(0,Bn.ReadOnly),J=d.paint.get("hillshade-emissive-strength"),Q=y.colorModeForDrapableLayerRenderPass(J),ie=E&&y.terrain?y.terrain.stencilModeForRTTOverlap(B):R[B.overscaledZ];ll(y,B,H,d,Y,ie,Q)}}S.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,a,d,v,S,E){if(y.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const R=y.transform.projection.name==="globe",O=d.paint.get("raster-elevation")!==0,B=O&&R;if(y.renderElevatedRasterBackface&&!B)return;const H=y.context,Y=H.gl,J=a.getSource(),Q=function($e,Ue,Fe,Ze){const et=Ue.paint.get("raster-color"),gt=$e.type==="raster-array",ht=[],kt=Ue.paint.get("raster-resampling"),Dt=Ue.paint.get("raster-color-mix");let tn=Ue.paint.get("raster-color-range");const dt=[Dt[0],Dt[1],Dt[2],0],_t=Dt[3];let lt=kt==="nearest"?Ze.NEAREST:Ze.LINEAR;if(gt&&(ht.push("RASTER_ARRAY"),et||ht.push("RASTER_COLOR"),kt==="linear"&&ht.push("RASTER_ARRAY_LINEAR"),lt=Ze.NEAREST,!tn&&$e.rasterLayers)){const Nt=$e.rasterLayers.find(({id:xt})=>xt===Ue.sourceLayer);Nt&&Nt.fields&&Nt.fields.range&&(tn=Nt.fields.range)}if(tn=tn||[0,1],et){ht.push("RASTER_COLOR"),Fe.activeTexture.set(Ze.TEXTURE2),Ue.updateColorRamp(tn);let Nt=Ue.colorRampTexture;Nt||(Nt=Ue.colorRampTexture=new i.T(Fe,Ue.colorRamp,Ze.RGBA8)),Nt.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)}return{mix:dt,range:tn,offset:_t,defines:ht,resampling:lt}}(J,d,H,Y);if(J instanceof i.aP&&!v.length&&!R)return;const ie=d.paint.get("raster-emissive-strength"),pe=y.colorModeForDrapableLayerRenderPass(ie),de=y.terrain&&y.terrain.renderingToTexture,ge=!y.options.moving,fe=d.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;if(J instanceof i.aP&&!v.length&&(J.onNorthPole||J.onSouthPole)){const $e=O?y.stencilModeFor3D():yr.disabled;return void es(!!J.onNorthPole,null,y,a,d,ie,Q,xr.disabled,$e)}if(!v.length)return;const[Ee,Le]=J instanceof i.aP||de?[{},v]:y.stencilConfigForOverlap(v),je=Le[Le.length-1].overscaledZ;B&&Q.defines.push("PROJECTION_GLOBE_VIEW"),O&&Q.defines.push("RENDER_CUTOFF");const Ye=($e,Ue,Fe)=>{for(const Ze of $e){const et=Ze.toUnwrapped(),gt=a.getTile(Ze);if(de&&(!gt||!gt.hasData()))continue;H.activeTexture.set(Y.TEXTURE0);const ht=Bm(gt,J,d,Q);if(!ht||!ht.texture)continue;const{texture:kt,mix:Dt,offset:tn,tileSize:dt,buffer:_t}=ht;let lt,Nt;de?(lt=Bn.disabled,Nt=Ze.projMatrix):O?(lt=new Bn(Y.LEQUAL,Bn.ReadWrite,y.depthRangeFor3D),Nt=R?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(et,ge)):(lt=y.depthModeForSublayer(Ze.overscaledZ-je,d.paint.get("raster-opacity")===1?Bn.ReadWrite:Bn.ReadOnly,Y.LESS),Nt=y.transform.calculateProjMatrix(et,ge));const xt=y.terrain&&de?y.terrain.stencilModeForRTTOverlap(Ze):Ee[Ze.overscaledZ],Ht=E?0:d.paint.get("raster-fade-duration");gt.registerFadeDuration(Ht);const Lt=a.findLoadedParent(Ze,0),Gt=Rm(gt,Lt,a,y.transform,Ht);let Zt,Fn;y.terrain&&y.terrain.prepareDrawTile(),H.activeTexture.set(Y.TEXTURE0),kt.bind(fe,Y.CLAMP_TO_EDGE),H.activeTexture.set(Y.TEXTURE1),Lt?(Lt.texture&&Lt.texture.bind(fe,Y.CLAMP_TO_EDGE),Zt=Math.pow(2,Lt.tileID.overscaledZ-gt.tileID.overscaledZ),Fn=[gt.tileID.canonical.x*Zt%1,gt.tileID.canonical.y*Zt%1]):kt.bind(fe,Y.CLAMP_TO_EDGE),"useMipmap"in kt&&H.extTextureFilterAnisotropic&&y.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax);const $n=y.transform;let On;const Zn=O?iy($n):[0,0,0,0];let jn,ur,Cr,cr,Lr,vr=0;if(B&&J instanceof i.aP&&J.coordinates.length>3)jn=Float32Array.from(i.bh(i.dr(new i.cp(0,0,0)))),ur=Float32Array.from($n.globeMatrix),Cr=Float32Array.from(i.dm($n)),cr=[i.ay($n.center.lng),i.aH($n.center.lat)],On=J.elevatedGlobePerspectiveTransform,Lr=J.elevatedGlobeGridMatrix||new Float32Array(9);else if(B){const Ar=i.dn(Ze.canonical);vr=i.dp(Ar.getCenter().lat),jn=Float32Array.from(i.bh(i.dr(Ze.canonical))),ur=Float32Array.from($n.globeMatrix),Cr=Float32Array.from(i.dm($n)),cr=[i.ay($n.center.lng),i.aH($n.center.lat)],On=[0,0],Lr=Float32Array.from(i.dq(Ze.canonical,Ar,vr,$n.worldSize/$n._pixelsPerMercatorPixel))}else On=J instanceof i.aP?J.perspectiveTransform:[0,0],jn=new Float32Array(16),ur=new Float32Array(9),Cr=new Float32Array(16),cr=[0,0],Lr=new Float32Array(9);const sr=Ua(Nt,jn,ur,Cr,Lr,Fn||[0,0],i.ah(y.transform.zoom),cr,Zn,Zt||1,Gt,d,On,O?d.paint.get("raster-elevation"):0,2,Dt,tn,Q.range,dt,_t,ie),Yr=y.isTileAffectedByFog(Ze),Si=y.getOrCreateProgram("raster",{defines:Q.defines,overrideFog:Yr});if(y.uploadCommonUniforms(H,Si,et),J instanceof i.aP){const Ar=J.elevatedGlobeVertexBuffer,Xr=J.elevatedGlobeIndexBuffer;if(de||!R)J.boundsBuffer&&J.boundsSegments&&Si.draw(y,Y.TRIANGLES,lt,yr.disabled,pe,xr.disabled,sr,d.id,J.boundsBuffer,y.quadTriangleIndexBuffer,J.boundsSegments);else if(Ar&&Xr){const ci=$n.zoom<=i.cL?J.elevatedGlobeSegments:J.getSegmentsForLongitude($n.center.lng);ci&&Si.draw(y,Y.TRIANGLES,lt,yr.disabled,pe,Ue,sr,d.id,Ar,Xr,ci)}}else if(B){lt=new Bn(Y.LEQUAL,Bn.ReadOnly,y.depthRangeFor3D);const Ar=y.globeSharedBuffers;if(Ar){const[Xr,ci,di]=Ar.getGridBuffers(vr,!1);Si.draw(y,Y.TRIANGLES,lt,Fe||xt,y.colorModeForRenderPass(),Ue,sr,d.id,Xr,ci,di)}}else{const{tileBoundsBuffer:Ar,tileBoundsIndexBuffer:Xr,tileBoundsSegments:ci}=y.getTileBoundsBuffers(gt);Si.draw(y,Y.TRIANGLES,lt,xt,pe,xr.disabled,sr,d.id,Ar,Xr,ci)}}if(!(J instanceof i.aP)&&B)for(const Ze of $e){const et=Ze.canonical.y===(1<<Ze.canonical.z)-1;Ze.canonical.y===0&&es(!0,Ze,y,a,d,ie,Q,Ue,Fe||yr.disabled),et&&es(!1,Ze,y,a,d,ie,Q,Ue===xr.frontCW?xr.backCW:xr.frontCW,Fe||yr.disabled)}};B?Ye(Le,y.renderElevatedRasterBackface?xr.backCW:xr.frontCW,y.stencilModeFor3D()):Ye(Le,xr.disabled,void 0),y.resetStencilClippingMasks()},"raster-particle":function(y,a,d,v,S,E){y.renderPass==="offscreen"&&function(R,O,B,H){if(!H.length)return;const Y=R.context,J=Y.gl,Q=O.getSource();if(!(Q instanceof As))return;const ie=Math.ceil(Math.sqrt(B.paint.get("raster-particle-count")));let pe=B.particlePositionRGBAImage;if(!pe||pe.width!==ie){const Le=function(je){const Ye=je*je,$e=new Uint8Array(4*Ye),Ue=function(Ze){return Ze|=0,Ze=Math.imul(2747636419^Ze,2654435769),Ze=Math.imul(Ze^Ze>>>16,2654435769),((Ze=Math.imul(Ze^Ze>>>16,2654435769))>>>0)/4294967296},Fe=1/1.1;for(let Ze=0;Ze<Ye;Ze++){const et=Fe*(Ue(2*Ze+0)+$a),gt=Fe*(Ue(2*Ze+1)+$a),ht=255*et%1,kt=255*gt%1,Dt=ht,tn=gt-kt/255,dt=kt;$e[4*Ze+0]=255*(et-ht/255),$e[4*Ze+1]=255*Dt,$e[4*Ze+2]=255*tn,$e[4*Ze+3]=255*dt}return $e}(ie);pe=B.particlePositionRGBAImage=new i.r({width:ie,height:ie},Le)}let de=B.particleFramebuffer;de?de.width!==ie&&(de.destroy(),de=B.particleFramebuffer=Y.createFramebuffer(ie,ie,!0,null)):de=B.particleFramebuffer=Y.createFramebuffer(ie,ie,!0,null);const ge=[];for(const Le of H){const je=O.getTile(Le);if(!(je instanceof lm))continue;const Ye=Fu(je,Q,B);if(!Ye)continue;const $e=[je.tileSize,je.tileSize];let Ue=B.tileFramebuffer;Ue||(Ue=B.tileFramebuffer=Y.createFramebuffer($e[0],$e[1],!0,null));let Fe=je.rasterParticleState;Fe||(Fe=je.rasterParticleState=new Vv(Y,Le,$e,pe));const Ze=Fe.update(B.lastInvalidatedAt);Fe.particleTextureDimension!==ie&&Fe.updateParticleTexture(Le,pe);const et=Fe.targetColorTexture;Fe.targetColorTexture=Fe.backgroundColorTexture,Fe.backgroundColorTexture=et;const gt=Fe.particleTexture0;Fe.particleTexture0=Fe.particleTexture1,Fe.particleTexture1=gt,ge.push([Le,Ye,Fe,Ze])}if(ge.length===0)return;const fe=i.q.now(),Ee=B.previousDrawTimestamp?.001*(fe-B.previousDrawTimestamp):.0167;if(B.previousDrawTimestamp=fe,B.hasColorMap()){Y.activeTexture.set(J.TEXTURE0+2);let Le=B.colorRampTexture;Le||(Le=B.colorRampTexture=new i.T(Y,B.colorRamp,J.RGBA8)),Le.bind(J.LINEAR,J.CLAMP_TO_EDGE)}Y.bindFramebuffer.set(B.tileFramebuffer.framebuffer),function(Le,je,Ye){const $e=Le.context,Ue=$e.gl,Fe=je.tileFramebuffer;$e.activeTexture.set(Ue.TEXTURE0);const Ze={u_texture:0,u_opacity:1.05*(gt=je.paint.get("raster-particle-fade-opacity-factor"))/(gt+.05)},et=Le.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var gt;for(const ht of Ye){const[,,kt,Dt]=ht;Fe.colorAttachment.set(kt.targetColorTexture.texture),$e.viewport.set([0,0,Fe.width,Fe.height]),$e.clear({color:i.am.transparent}),Dt&&(kt.backgroundColorTexture.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE),et.draw(Le,Ue.TRIANGLES,Bn.disabled,yr.disabled,Nr.alphaBlended,xr.disabled,Ze,je.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments))}}(R,B,ge),function(Le,je,Ye,$e){const Ue=Le.context,Fe=Ue.gl,Ze=Ye.tileFramebuffer,et=Le.transform.projection.name==="globe",gt=Ye.paint.get("raster-particle-max-speed");for(const ht of $e){const[kt,Dt,tn]=ht;Ue.activeTexture.set(Fe.TEXTURE0+0),Dt.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ze.colorAttachment.set(tn.targetColorTexture.texture);const dt=Le.getOrCreateProgram("rasterParticleDraw",{defines:Dt.defines,overrideFog:!1});Ue.activeTexture.set(Fe.TEXTURE0+1);const _t=Dt.scalarData?[]:[0,1,2,3].map(xt=>i.dU[xt](kt));_t.push(kt);const lt=kt.canonical.x,Nt=kt.canonical.y;for(const xt of _t){const Ht=je.getTile(et?xt.wrapped():xt);if(!Ht)continue;const Lt=Ht.rasterParticleState;if(!Lt)continue;const Gt=xt.canonical.x+(1<<xt.canonical.z)*(xt.wrap-kt.wrap),Zt=xt.canonical.y;Lt.particleTexture0.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);const Fn=Oc(1,Lt.particleTexture0.size[0],[Gt-lt,Zt-Nt],0,Dt.texture.size,2,gt,Dt.textureOffset,Dt.scale,Dt.offset);dt.draw(Le,Fe.POINTS,Bn.disabled,yr.disabled,Nr.alphaBlended,xr.disabled,Fn,Ye.id,Lt.particleIndexBuffer,void 0,Lt.particleSegment)}}}(R,O,B,ge),Y.bindFramebuffer.set(B.particleFramebuffer.framebuffer),function(Le,je,Ye,$e){const Ue=Le.context,Fe=Ue.gl,Ze=je.paint.get("raster-particle-max-speed"),et=$e*je.paint.get("raster-particle-speed-factor")*.15,gt=function(kt){return Math.pow(kt,6)}(.01+1*je.paint.get("raster-particle-reset-rate-factor")),ht=je.particleFramebuffer;Ue.viewport.set([0,0,ht.width,ht.height]);for(const kt of Ye){const[,Dt,tn]=kt;Ue.activeTexture.set(Fe.TEXTURE0+0),Dt.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ue.activeTexture.set(Fe.TEXTURE0+1);const dt=tn.particleTexture0;dt.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);const _t=rp(1,dt.size[0],0,Dt.texture.size,Ze,et,gt,Dt.textureOffset,Dt.scale,Dt.offset);ht.colorAttachment.set(tn.particleTexture1.texture),Ue.clear({color:i.am.transparent}),Le.getOrCreateProgram("rasterParticleUpdate",{defines:Dt.defines}).draw(Le,Fe.TRIANGLES,Bn.disabled,yr.disabled,Nr.unblended,xr.disabled,_t,je.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments)}}(R,B,ge,Ee)}(y,a,d,v),y.renderPass==="translucent"&&(function(R,O,B,H,Y){const J=R.context,Q=J.gl,ie=O.getSource().tileSize,pe=5*(1-i.af(i.cx,i.cx+1,R.transform.zoom))*ie+B.paint.get("raster-particle-elevation"),de=!R.options.moving,ge=R.transform.projection.name==="globe";if(!H.length)return;const[fe,Ee]=R.stencilConfigForOverlap(H),Le=[];ge&&Le.push("PROJECTION_GLOBE_VIEW");const je=R.stencilModeFor3D();for(const Ye of Ee){const $e=Ye.toUnwrapped(),Ue=O.getTile(Ye);if(!Ue.rasterParticleState)continue;const Fe=Ue.rasterParticleState,Ze=100;Ue.registerFadeDuration(Ze);const et=O.findLoadedParent(Ye,0),gt=Rm(Ue,et,O,R.transform,Ze);let ht,kt;R.terrain&&R.terrain.prepareDrawTile(),J.activeTexture.set(Q.TEXTURE0),Fe.targetColorTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),J.activeTexture.set(Q.TEXTURE1),et&&et.rasterParticleState?(et.rasterParticleState.targetColorTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),ht=Math.pow(2,et.tileID.overscaledZ-Ue.tileID.overscaledZ),kt=[Ue.tileID.canonical.x*ht%1,Ue.tileID.canonical.y*ht%1]):Fe.targetColorTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const Dt=ge?Float32Array.from(R.transform.expandedFarZProjMatrix):R.transform.calculateProjMatrix($e,de),tn=R.transform,dt=lp(tn),_t=i.dn(Ye.canonical),lt=i.dp(_t.getCenter().lat);let Nt,xt,Ht,Lt,Gt;ge?(Nt=Float32Array.from(i.bh(i.dr(Ye.canonical))),xt=Float32Array.from(tn.globeMatrix),Ht=Float32Array.from(i.dm(tn)),Lt=[i.ay(tn.center.lng),i.aH(tn.center.lat)],Gt=Float32Array.from(i.dq(Ye.canonical,_t,lt,tn.worldSize/tn._pixelsPerMercatorPixel))):(Nt=new Float32Array(16),xt=new Float32Array(9),Ht=new Float32Array(16),Lt=[0,0],Gt=new Float32Array(9));const Zt=nu(Dt,Nt,xt,Ht,Gt,kt||[0,0],i.ah(R.transform.zoom),Lt,dt,ht||1,gt,pe),Fn=R.isTileAffectedByFog(Ye),$n=R.getOrCreateProgram("rasterParticle",{defines:Le,overrideFog:Fn});if(R.uploadCommonUniforms(J,$n,$e),ge){const On=new Bn(Q.LEQUAL,Bn.ReadOnly,R.depthRangeFor3D),Zn=0,jn=R.globeSharedBuffers;if(jn){const[ur,Cr,cr]=jn.getGridBuffers(lt,Zn!==0);$n.draw(R,Q.TRIANGLES,On,je,Nr.alphaBlended,R.renderElevatedRasterBackface?xr.frontCCW:xr.backCCW,Zt,B.id,ur,Cr,cr)}}else{const On=R.depthModeForSublayer(0,Bn.ReadOnly),Zn=fe[Ye.overscaledZ],{tileBoundsBuffer:jn,tileBoundsIndexBuffer:ur,tileBoundsSegments:Cr}=R.getTileBoundsBuffers(Ue);$n.draw(R,Q.TRIANGLES,On,Zn,Nr.alphaBlended,xr.disabled,Zt,B.id,jn,ur,Cr)}}R.resetStencilClippingMasks()}(y,a,d,v),y.style.map.triggerRepaint())},background:function(y,a,d,v){const S=d.paint.get("background-color"),E=d.paint.get("background-color-use-theme").constantOr("default")==="none",R=d.paint.get("background-opacity"),O=d.paint.get("background-emissive-strength"),B=d.paint.get("background-pitch-alignment")==="viewport";if(R===0)return;const H=y.context,Y=H.gl,J=y.transform,Q=J.tileSize,ie=d.paint.get("background-pattern");let pe;if(ie!==void 0&&(ie===null||(pe=y.imageManager.getPattern(i.I.from(ie.toString()),d.scope,y.style.getLut(d.scope)),!pe)))return;const de=!ie&&S.a===1&&R===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==de)return;const ge=yr.disabled,fe=y.depthModeForSublayer(0,de==="opaque"?Bn.ReadWrite:Bn.ReadOnly),Ee=y.colorModeForDrapableLayerRenderPass(O),Le=ie?"backgroundPattern":"background";let je,Ye=v;if(Ye||(je=y.getBackgroundTiles(),Ye=Object.values(je).map($e=>$e.tileID)),ie&&(H.activeTexture.set(Y.TEXTURE0),y.imageManager.bind(y.context,d.scope)),B){const $e=y.getOrCreateProgram(Le,{overrideFog:!1,overrideRtt:!0}),Ue=new Float32Array(i.bx([])),Fe=new i.aM(0,0,0,0,0),Ze=ie?op(Ue,O,R,y,0,d.scope,pe,B,{tileID:Fe,tileSize:Q}):wd(Ue,O,R,S.toRenderColor(E?null:d.lut));$e.draw(y,Y.TRIANGLES,fe,ge,Ee,xr.disabled,Ze,d.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments)}else for(const $e of Ye){const Ue=y.isTileAffectedByFog($e),Fe=y.getOrCreateProgram(Le,{overrideFog:Ue}),Ze=$e.toUnwrapped(),et=v?$e.projMatrix:y.transform.calculateProjMatrix(Ze);y.prepareDrawTile();const gt=a?a.getTile($e):je?je[$e.key]:new wc($e,Q,J.zoom,y),ht=ie?op(et,O,R,y,0,d.scope,pe,B,{tileID:$e,tileSize:Q}):wd(et,O,R,S.toRenderColor(E?null:d.lut));y.uploadCommonUniforms(H,Fe,Ze);const{tileBoundsBuffer:kt,tileBoundsIndexBuffer:Dt,tileBoundsSegments:tn}=y.getTileBoundsBuffers(gt);Fe.draw(y,Y.TRIANGLES,fe,ge,Ee,xr.disabled,ht,d.id,kt,Dt,tn)}},sky:function(y,a,d){const v=y._atmosphere?i.ah(y.transform.zoom):1,S=d.paint.get("sky-opacity")*v;if(S===0)return;const E=y.context,R=d.paint.get("sky-type"),O=new Bn(E.gl.LEQUAL,Bn.ReadOnly,[0,1]),B=y.frameCounter/1e3%1;R==="atmosphere"?y.renderPass==="offscreen"?d.needsSkyboxCapture(y)&&(function(H,Y,J,Q){const ie=H.context,pe=ie.gl;let de=Y.skyboxFbo;if(!de){de=Y.skyboxFbo=ie.createFramebuffer(32,32,!0,null),Y.skyboxGeometry=new cp(ie),Y.skyboxTexture=ie.gl.createTexture(),pe.bindTexture(pe.TEXTURE_CUBE_MAP,Y.skyboxTexture),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_MAG_FILTER,pe.LINEAR);for(let Le=0;Le<6;++Le)pe.texImage2D(pe.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,pe.RGBA,32,32,0,pe.RGBA,pe.UNSIGNED_BYTE,null)}ie.bindFramebuffer.set(de.framebuffer),ie.viewport.set([0,0,32,32]);const ge=Y.getCenter(H,!0),fe=H.getOrCreateProgram("skyboxCapture"),Ee=new Float64Array(16);i.bx(Ee),i.e3(Ee,Ee,.5*-Math.PI),Nu(H,Y,fe,Ee,ge,0),i.bx(Ee),i.e3(Ee,Ee,.5*Math.PI),Nu(H,Y,fe,Ee,ge,1),i.bx(Ee),i.cG(Ee,Ee,.5*-Math.PI),Nu(H,Y,fe,Ee,ge,2),i.bx(Ee),i.cG(Ee,Ee,.5*Math.PI),Nu(H,Y,fe,Ee,ge,3),i.bx(Ee),Nu(H,Y,fe,Ee,ge,4),i.bx(Ee),i.e3(Ee,Ee,Math.PI),Nu(H,Y,fe,Ee,ge,5),ie.viewport.set([0,0,H.width,H.height])}(y,d),d.markSkyboxValid(y)):y.renderPass==="sky"&&function(H,Y,J,Q,ie){const pe=H.context,de=pe.gl,ge=H.transform,fe=H.getOrCreateProgram("skybox");pe.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_CUBE_MAP,Y.skyboxTexture);const Ee=((Le,je,Ye,$e,Ue)=>({u_matrix:Le,u_sun_direction:je,u_cubemap:0,u_opacity:$e,u_temporal_offset:Ue}))(ge.skyboxMatrix,Y.getCenter(H,!1),0,Q,ie);H.uploadCommonUniforms(pe,fe),fe.draw(H,de.TRIANGLES,J,yr.disabled,H.colorModeForRenderPass(),xr.backCW,Ee,"skybox",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,O,S,B):R==="gradient"&&y.renderPass==="sky"&&function(H,Y,J,Q,ie){const pe=H.context,de=pe.gl,ge=H.transform,fe=H.getOrCreateProgram("skyboxGradient");Y.skyboxGeometry||(Y.skyboxGeometry=new cp(pe)),pe.activeTexture.set(de.TEXTURE0);let Ee=Y.colorRampTexture;Ee||(Ee=Y.colorRampTexture=new i.T(pe,Y.colorRamp,de.RGBA8)),Ee.bind(de.LINEAR,de.CLAMP_TO_EDGE);const Le=((je,Ye,$e,Ue,Fe)=>({u_matrix:je,u_color_ramp:0,u_center_direction:Ye,u_radius:i.al($e),u_opacity:Ue,u_temporal_offset:Fe}))(ge.skyboxMatrix,Y.getCenter(H,!1),Y.paint.get("sky-gradient-radius"),Q,ie);H.uploadCommonUniforms(pe,fe),fe.draw(H,de.TRIANGLES,J,yr.disabled,H.colorModeForRenderPass(),xr.backCW,Le,"skyboxGradient",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(y,d,O,S,B)},debug:function(y,a,d,v,S,E){for(let R=0;R<d.length;R++)if(S){const H=new i.am(v.r*.8,v.g*.8,v.b*.8,1);Rd(y,a,d[R],v,-1,-1,E),Rd(y,a,d[R],v,-1,1,E),Rd(y,a,d[R],v,1,1,E),Rd(y,a,d[R],v,1,-1,E),Rd(y,a,d[R],H,0,0,E)}else Rd(y,a,d[R],v,0,0,E)},custom:function(y,a,d,v){const S=y.context,E=d.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&d.isDraped(a)){if(y.renderPass==="offscreen"){const R=E.prerender;if(R){if(y.setCustomLayerDefaults(),S.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const O=y.transform.pointMerc;R.call(E,S.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),i.ah(y.transform.zoom),[O.x,O.y],y.transform.pixelsPerMeterRatio)}else R.call(E,S.gl,y.transform.customLayerMatrix());S.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const O=E.renderToTile;if(O){const B=v[0].canonical,H={x:B.x+v[0].wrap*(E.wrapTileId?0:1<<B.z),y:B.y,z:B.z};S.setDepthMode(Bn.disabled),S.setStencilMode(yr.disabled),S.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),O.call(E,S.gl,H),S.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),S.setColorMode(y.colorModeForRenderPass()),S.setStencilMode(yr.disabled);const R=E.renderingMode==="3d"?new Bn(y.context.gl.LEQUAL,Bn.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Bn.ReadOnly);if(S.setDepthMode(R),y.transform.projection.name==="globe"){const O=y.transform.pointMerc;E.render(S.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),i.ah(y.transform.zoom),[O.x,O.y],y.transform.pixelsPerMeterRatio)}else E.render(S.gl,y.transform.customLayerMatrix());S.setDirty(),y.setBaseState(),S.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(y,a,d,v){if(y.renderPass==="opaque")return;const S=d.paint.get("model-opacity").constantOr(1);if(S===0)return;const E=d.paint.get("model-cast-shadows");if(y.renderPass==="shadow"&&(!E||y.terrain&&S<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof i.ab))return;const R=y.shadowRenderer,O=d.paint.get("model-receive-shadows");R&&(R.useNormalOffset=!0,O||(R.enabled=!1));const B=()=>{R&&(R.useNormalOffset=!0,O||(R.enabled=!0))},H=a.getSource();if(y.renderPass==="light-beam"&&H.type!=="batched-model")return;if(H.type==="vector"||H.type==="geojson")return function(fe,Ee,Le,je,Ye){const $e=fe.transform;if($e.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${$e.projection.name} projection is not yet implemented`);const Ue=$e.getFreeCameraOptions().position;if(!fe.modelManager)return;const Fe=fe.modelManager;Le.modelManager=Fe;const Ze=fe.shadowRenderer;if(!Le._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const et=Le._unevaluatedLayout._values["model-id"],gt=Object.assign({},Le.layout.get("model-id").parameters),ht=fe.style.order.indexOf(Le.fqid);for(const kt of je){const Dt=Ee.getTile(kt).getBucket(Le);if(!Dt||Dt.projection.name!==$e.projection.name)continue;const tn=Dt.getModelUris();tn&&!Dt.modelsRequested&&(Fe.addModelsFromBucket(tn,Ye),Dt.modelsRequested=!0);const dt=Id(kt,$e);gt.zoom=dt;const _t=et.possiblyEvaluate(gt);if(pt(fe,Dt,kt),ul.shadowUniformsInitialized=!1,ul.useSingleShadowCascade=!!Ze&&Ze.getMaxCascadeForTile(kt.toUnwrapped())===0,fe.renderPass==="shadow"&&Ze){if(fe.currentShadowCascade===1&&Dt.isInsideFirstShadowMapFrustum)continue;const xt=$e.calculatePosMatrix(kt.toUnwrapped(),$e.worldSize);if(ul.tileMatrix.set(xt),ul.shadowTileMatrix=Float32Array.from(Ze.calculateShadowPassMatrixFromMatrix(xt)),ul.aabb.min.fill(0),ul.aabb.max[0]=ul.aabb.max[1]=i.aj,ul.aabb.max[2]=0,Hv(Dt,ul,fe,Le.scope))continue}const lt=1<<kt.canonical.z,Nt=[((Ue.x-kt.wrap)*lt-kt.canonical.x)*i.aj,(Ue.y*lt-kt.canonical.y)*i.aj,Ue.z*lt*i.aj];fe.conflationActive&&Object.keys(Dt.instancesPerModel).length>0&&fe.style.isLayerClipped(Le,Ee.getSource())&&Dt.updateReplacement(kt,fe.replacementSource,ht,Ye)&&(Dt.uploaded=!1,Dt.upload(fe.context));for(let xt in Dt.instancesPerModel){const Ht=Dt.instancesPerModel[xt];Ht.features.length>0&&(xt=_t.evaluate(Ht.features[0].feature,{}));const Lt=Fe.getModel(xt,Ye);if(Lt||Fe.hasURLBeenRequested(xt)||Dt.modelUris.includes(xt)||(Dt.modelUris.push(xt),Dt.modelsRequested=!1),Lt&&Lt.uploaded)for(const Gt of Lt.nodes)qm(fe,Le,Gt,Ht,Nt,kt,ul)}}}(y,a,d,v,H.type==="vector"?d.scope:""),void B();if(!H.loaded())return;if(H.type==="batched-model")return function(fe,Ee,Le,je){Le.resetLayerRenderingStats(fe);const Ye=fe.context,$e=fe.transform,Ue=fe.style.fog,Fe=fe.shadowRenderer;if($e.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${$e.projection.name} projection is not yet implemented`);const Ze=fe.transform.getFreeCameraOptions().position,et=i.b$([],[Ze.x,Ze.y,Ze.z],fe.transform.worldSize),gt=i.eb([],et),ht=i.bx([]),kt=i.ec($e.center.lat,$e.zoom),Dt=i.bn([],[1,1,1/kt]);i.bo(ht,ht,gt);const tn=Le.paint.get("model-opacity").constantOr(1),dt=new Bn(Ye.gl.LEQUAL,Bn.ReadWrite,fe.depthRangeFor3D),_t=new Bn(Ye.gl.LEQUAL,Bn.ReadOnly,fe.depthRangeFor3D),lt=new i.cV([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Nt=fe.renderPass==="shadow",xt=Nt&&Fe?Fe.getCurrentCascadeFrustum():$e.getFrustum($e.scaleZoom($e.worldSize)),Ht=Le.paint.get("model-front-cutoff"),Lt=Ht[2]<1,Gt=Ih(fe,Le.paint.get("model-cutoff-fade-range")),Zt=Le.getLayerRenderingStats();(function(Fn,$n,On,Zn){const jn=Fn.terrain?Fn.terrain.exaggeration():0,ur=Fn.transform.zoom;for(const Cr of Zn){const cr=$n.getTile(Cr).getBucket(On);cr&&(cr.setFilter(On.filter),Fn.conflationActive&&cr.updateReplacement(Cr,Fn.replacementSource),cr.evaluateScale(Fn,On),Fn.terrain&&jn>0&&cr.elevationUpdate(Fn.terrain,jn,Cr,On.source),cr.needsReEvaluation(Fn,ur,On)&&cr.evaluate(On))}})(fe,Ee,Le,je),function(){let Fn,$n,On;Lt?(Fn=je.length-1,$n=-1,On=-1):(Fn=0,$n=je.length,On=1);const Zn=new Float64Array(16),jn=i.eg(),ur=new i.P(0,0);for(let Cr=Fn;Cr!==$n;Cr+=On){const cr=je[Cr],Lr=Ee.getTile(cr).getBucket(Le);if(!Lr||!Lr.uploaded)continue;let vr=!1;Fe&&(vr=Fe.getMaxCascadeForTile(cr.toUnwrapped())===0);const sr=$e.calculatePosMatrix(cr.toUnwrapped(),$e.worldSize),Yr=Lr.modelTraits;!Nt&&Lt&&(i.bi(Zn,sr),i.ad(jn,et,Zn),ur.x=jn[0],ur.y=jn[1]);const Si=[];Lr.setFilter(Le.filter);for(const Ar of Lr.getNodesInfo()){if(Ar.hiddenByReplacement||!Ar.node.meshes)continue;const Xr=Ar.node;let ci=0;fe.terrain&&Xr.elevation&&(ci=Xr.elevation*fe.terrain.exaggeration());const di=(()=>{const Xi=Ar.aabb;return lt.min=[...Xi.min],lt.max=[...Xi.max],lt.min[2]+=ci,lt.max[2]+=ci,i.ad(lt.min,lt.min,sr),i.ad(lt.max,lt.max,sr),lt})(),Ti=Ar.evaluatedScale;if(Ti[0]<=1&&Ti[1]<=1&&Ti[2]<=1&&di.intersects(xt)===0)continue;if(!Nt&&Lt){const Xi=.16666666666666666;Ar.cameraCollisionOpacity=et[0]>di.min[0]&&et[0]<di.max[0]&&et[1]>di.min[1]&&et[1]<di.max[1]&&et[2]*kt<di.max[2]&&Xr.footprint&&i.bS(ur,Xr.footprint)?Math.max(Ar.cameraCollisionOpacity-Xi,0):Math.min(1,Ar.cameraCollisionOpacity+Xi)}const Wi=[...sr],wo=Xr.anchor?Xr.anchor[0]:0,Yi=Xr.anchor?Xr.anchor[1]:0;i.bo(Wi,Wi,[wo*(Ti[0]-1),Yi*(Ti[1]-1),ci]),i.ci(Ti,i.eh)||i.cE(Wi,Wi,Ti);const Sr=i.az([],Wi,Xr.matrix),Ni=i.az([],$e.expandedFarZProjMatrix,Sr),ii=i.az([],$e.expandedFarZProjMatrix,Wi),pi=i.aA([],[wo,Yi,ci,1],Ni)[2];Xr.hidden=!1;let mi=tn;Nt||(Lt&&(mi*=Ar.cameraCollisionOpacity,mi*=Xh(Wi,$e,Ar.aabb,Ht)),mi*=Gv(Gt,pi)),mi!==0?Si.push({nodeInfo:Ar,depth:pi,opacity:mi,wvpForNode:Ni,wvpForTile:ii,nodeModelMatrix:Sr,tileModelMatrix:Wi}):Xr.hidden=!0}Nt||Si.sort((Ar,Xr)=>!Lt||Ar.opacity===1&&Xr.opacity===1?Ar.depth<Xr.depth?-1:1:Ar.opacity===1?-1:Xr.opacity===1?1:Ar.depth>Xr.depth?-1:1);for(const Ar of Si){const Xr=Ar.nodeInfo,ci=Xr.node;let di=i.az([],Dt,Ar.tileModelMatrix);i.az(di,ht,di);const Ti=i.bi([],di);i.ee(Ti,Ti),i.cE(Ti,Ti,ay),di=i.az(di,di,ci.matrix);const Wi=fe.renderPass==="light-beam",wo=Le.paint.get("model-color-use-theme").constantOr("default")==="none",Yi=Yr&i.em.HasMapboxMeshFeatures,Sr=Yi?0:Xr.evaluatedRMEA[0][2];for(let Ni=0;Ni<ci.meshes.length;++Ni){const ii=ci.meshes[Ni],pi=Ni===ci.lightMeshIndex;let mi=Ar.wvpForNode;if(pi){if(!Wi&&!fe.terrain&&fe.shadowRenderer){fe.currentLayer<fe.firstLightBeamLayer&&(fe.firstLightBeamLayer=fe.currentLayer);continue}mi=Ar.wvpForTile}else if(Wi)continue;const Xi={defines:[]},ts=[];if(!Nt&&Fe&&(Fe.useNormalOffset=!!ii.normalBuffer),pn(Xi.defines,ts,ii,fe,wo?null:Le.lut),Yi||Xi.defines.push("DIFFUSE_SHADED"),vr&&Xi.defines.push("SHADOWS_SINGLE_CASCADE"),Zt&&(Nt?Zt.numRenderedVerticesInShadowPass+=ii.vertexArray.length:Zt.numRenderedVerticesInTransparentPass+=ii.vertexArray.length),Nt){yo(ii,Ar.nodeModelMatrix,fe,Le);continue}let ji=null;if(Ue){const Da=Pd(Ar.nodeModelMatrix,fe.transform);if(ji=new Float32Array(Da),$e.projection.name!=="globe"){const fl=ii.aabb.min,Vc=ii.aabb.max,[pl,Pl]=Ue.getOpacityForBounds(Da,fl[0],fl[1],Vc[0],Vc[1]);Xi.overrideFog=pl>=ln||Pl>=ln}}const Bo=ii.material;let ki;Bo.occlusionTexture&&Bo.occlusionTexture.offsetScale&&(ki=Bo.occlusionTexture.offsetScale,Xi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const $o=fe.getOrCreateProgram("model",Xi);!Nt&&Fe&&Fe.setupShadowsFromMatrix(Ar.tileModelMatrix,$o,Fe.useNormalOffset),fe.uploadCommonUniforms(Ye,$o,null,ji);const Ra=Bo.pbrMetallicRoughness;Ra.metallicFactor=.9,Ra.roughnessFactor=.5;const hl=Sd(new Float32Array(mi),new Float32Array(di),new Float32Array(Ti),new Float32Array(ci.matrix),fe,Ar.opacity,Ra.baseColorFactor.toRenderColor(null),Bo.emissiveFactor,Ra.metallicFactor,Ra.roughnessFactor,Bo,Sr,Le,[0,0,0],ki);!pi&&(Xr.hasTranslucentParts||Ar.opacity<1)&&$o.draw(fe,Ye.gl.TRIANGLES,dt,yr.disabled,Nr.disabled,xr.backCCW,hl,Le.id,ii.vertexBuffer,ii.indexBuffer,ii.segments,Le.paint,fe.transform.zoom,void 0,ts),$o.draw(fe,Ye.gl.TRIANGLES,pi?_t:dt,yr.disabled,pi||Ar.opacity<1||Xr.hasTranslucentParts?Nr.alphaBlended:Nr.unblended,xr.backCCW,hl,Le.id,ii.vertexBuffer,ii.indexBuffer,ii.segments,Le.paint,fe.transform.zoom,void 0,ts)}}}}()}(y,a,d,v),void B();if(H.type!=="model")return;const Y=H.getModels(),J=[],Q=y.transform.getFreeCameraOptions().position,ie=i.b$([],[Q.x,Q.y,Q.z],y.transform.worldSize);i.eb(ie,ie);const pe=[],de=[];let ge=0;for(const fe of Y){const Ee=d.paint.get("model-rotation").constantOr(null),Le=d.paint.get("model-scale").constantOr(null),je=d.paint.get("model-translation").constantOr(null);fe.computeModelMatrix(y,Ee,Le,je,!0,!0,!1);const Ye=i.bx([]),$e=i.ec(fe.position.lat,y.transform.zoom),Ue=i.bn([],[1,1,1/$e]);i.bo(Ye,Ye,ie),J.push({zScaleMatrix:Ue,negCameraPosMatrix:Ye});for(const Fe of fe.nodes)Kl(y.transform,Fe,fe.matrix,y.transform.expandedFarZProjMatrix,ge,pe,de);ge++}if(pe.sort((fe,Ee)=>Ee.depth-fe.depth),y.renderPass!=="shadow"){if(S===1)for(const fe of de)Pn(fe,y,d,J[fe.modelIndex],yr.disabled,y.colorModeForRenderPass());else{for(const fe of de)Pn(fe,y,d,J[fe.modelIndex],yr.disabled,Nr.disabled);for(const fe of de)Pn(fe,y,d,J[fe.modelIndex],y.stencilModeFor3D(),y.colorModeForRenderPass());y.resetStencilClippingMasks()}for(const fe of pe)Pn(fe,y,d,J[fe.modelIndex],yr.disabled,y.colorModeForRenderPass());B()}else{for(const fe of de)yo(fe.mesh,fe.nodeModelMatrix,y,d);for(const fe of pe)yo(fe.mesh,fe.nodeModelMatrix,y,d);B()}}},Kh={line:function(y,a,d){if(y.hasElevatedBuckets=!1,y.hasNonElevatedBuckets=!1,y._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||y._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(a){const v=a.getVisibleCoordinates();for(const S of v){const E=a.getTile(S).getBucket(y);if(E&&(E.elevationType!=="none"?y.hasElevatedBuckets=!0:y.hasNonElevatedBuckets=!0,y.hasElevatedBuckets&&y.hasNonElevatedBuckets))break}}}else y.hasNonElevatedBuckets=!0},model:function(y,a,d){const v=a.getSource();if(!v.loaded())return;if(v.type==="vector"||v.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,v.type==="vector"?y.scope:""));if(v.type==="batched-model"||v.type!=="model")return;const S=v.getModels();for(const E of S)E.upload(d.context)},raster:function(y,a,d){const v=a.getSource();if(!(v instanceof As&&v.loaded()))return;const S=y.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!S)return;const E=y.paint.get("raster-array-band")||v.getInitialBand(S);if(E==null)return;const R=a.getIds().map(O=>a.getTileByID(O));for(const O of R)O.updateNeeded(S,E)&&v.prepareTile(O,S,E)},"raster-particle":function(y,a,d){const v=a.getSource();if(!(v instanceof As&&v.loaded()))return;const S=y.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!S)return;const E=y.paint.get("raster-particle-array-band")||v.getInitialBand(S);if(E==null)return;const R=a.getIds().map(O=>a.getTileByID(O));for(const O of R)O.updateNeeded(S,E)&&v.prepareTile(O,S,E)}},zc={fill:Zo};class Qh{constructor(a,d,v,S,E){this.context=new Mi(a,d),this.transform=v,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=E,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const R=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const B of R)this._debugParams.enabledLayers[B]=!0;E.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),E.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),E.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),E.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const B of R)E.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],B);this.occlusionParams=new Yv(E),this.setup(),this.numSublayers=Gs.maxUnderzooming+Gs.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.et,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Sl(this),this._wireframeDebugCache=new Wv,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const O=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,O,a.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=S}updateTerrain(a,d){const v=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new _d(this,a));const S=this._terrain;this.transform.elevation=v?S:null,S.update(a,this.transform,d),this.transform.elevation&&!S.enabled&&(this.transform.elevation=null)}_updateFog(a){const d=a.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,S]=d.getFovAdjustedRange(this.transform._fov);if(v>S)return void(this.transform.fogCullDistSq=null);const E=v+.78*(S-v);this.transform.fogCullDistSq=E*E}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(a){a&&!this._terrain&&(this._terrain=new _d(this,this.style)),this._forceTerrainMode=a}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(a,d){if(this.width=a*i.q.devicePixelRatio,this.height=d*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._mergedLayers[v].resize()}setup(){const a=this.context,d=new i.ba;d.emplaceBack(0,0),d.emplaceBack(i.aj,0),d.emplaceBack(0,i.aj),d.emplaceBack(i.aj,i.aj),this.tileExtentBuffer=a.createVertexBuffer(d,i.bc.members),this.tileExtentSegments=i.bd.simpleSegment(0,0,4,2);const v=new i.ba;v.emplaceBack(0,0),v.emplaceBack(i.aj,0),v.emplaceBack(0,i.aj),v.emplaceBack(i.aj,i.aj),this.debugBuffer=a.createVertexBuffer(v,i.bc.members),this.debugSegments=i.bd.simpleSegment(0,0,4,5);const S=new i.ba;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(S,i.bc.members),this.viewportSegments=i.bd.simpleSegment(0,0,4,2);const E=new i.aZ;E.emplaceBack(0,0,0,0),E.emplaceBack(i.aj,0,i.aj,0),E.emplaceBack(0,i.aj,0,i.aj),E.emplaceBack(i.aj,i.aj,i.aj,i.aj),this.mercatorBoundsBuffer=a.createVertexBuffer(E,i.bf.members),this.mercatorBoundsSegments=i.bd.simpleSegment(0,0,4,2);const R=new i.a_;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(R);const O=new i.bb;for(const H of[0,1,3,2,0])O.emplaceBack(H);this.debugIndexBuffer=a.createIndexBuffer(O),this.emptyTexture=new i.T(a,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA8),this.identityMat=i.bz();const B=this.context.gl;this.stencilClearMode=new yr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,a.TRIANGLES,Bn.disabled,this.stencilClearMode,Nr.disabled,xr.disabled,Va(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,d,v){if(!d||this.currentStencilSource===d.id||!a.isTileClipped()||!v||v.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const B of v)if(this._tileClippingMaskIDs[B.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=d.id;const S=this.context,E=S.gl;this.nextStencilID+v.length>256&&this.clearStencil(),S.setColorMode(Nr.disabled),S.setDepthMode(Bn.disabled);const R=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of v){const B=d.getTile(O),H=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:Y,tileBoundsIndexBuffer:J,tileBoundsSegments:Q}=this.getTileBoundsBuffers(B);R.draw(this,E.TRIANGLES,Bn.disabled,new yr({func:E.ALWAYS,mask:0},H,255,E.KEEP,E.KEEP,E.REPLACE),Nr.disabled,xr.disabled,Va(O.projMatrix),"$clipping",Y,J,Q)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new yr({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const d=this.context.gl;return new yr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,v=a.sort((R,O)=>O.overscaledZ-R.overscaledZ),S=v[v.length-1].overscaledZ,E=v[0].overscaledZ-S+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const R={};for(let O=0;O<E;O++)R[O+S]=new yr({func:d.GEQUAL,mask:255},O+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=E,[R,v]}return[{[S]:yr.disabled},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Nr([a.CONSTANT_COLOR,a.ONE,a.CONSTANT_COLOR,a.ONE],new i.am(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}colorModeForDrapableLayerRenderPass(a){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Nr([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new i.am(0,0,0,a===void 0?0:a),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(a,d,v,S=!1){if(this.depthOcclusion)return new Bn(this.context.gl.GREATER,Bn.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!S)return Bn.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Bn(v||this.context.gl.LEQUAL,d,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const a=this.context.gl,d=Math.ceil(this.width),v=Math.ceil(this.height),S=this.context.bindFramebuffer.get(),E=a.getParameter(a.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===v||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&v!==0&&(this.depthFBO=new Lc(this.context,d,v,!1,"texture"),this.depthTexture=new i.T(this.context,{width:d,height:v,data:null},a.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(S),a.bindTexture(a.TEXTURE_2D,E),this.depthFBO&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),a.blitFramebuffer(0,0,d,v,0,0,d,v,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((a,d)=>a+d/this._fpsHistory.length,0))}render(a,d){const v=i.q.now();this._dt=v-this._timeStamp,this._timeStamp=v,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=a.map.repaint,this.style=a,this.options=d;const S=this.style._mergedLayers,E=!(!this.terrain||!this.terrain.enabled),R=()=>this.style._getOrder(E).filter(dt=>{const _t=S[dt];return!(_t.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[_t.type]});let O=R(),B=!1,H=!1;for(const dt of O){const _t=S[dt];_t.type==="circle"&&(B=!0),_t.type==="symbol"&&(_t.hasInitialOcclusionOpacityProperties?H=!0:B=!0)}let Y=O.map(dt=>S[dt]);const J=this.style._mergedSourceCaches;this.imageManager=a.imageManager,this.modelManager=a.modelManager,this.symbolFadeChange=a.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let Q=0,ie=!1;for(const dt in J){const _t=J[dt];_t.used&&(_t.prepare(this.context),_t.getSource().usedInConflation&&++Q)}let pe=!1;for(const dt of Y)dt.isHidden(this.transform.zoom)||(dt.type==="clip"&&(pe=!0),this.prepareLayer(dt));const de={},ge={},fe={},Ee={},Le={};for(const dt in J){const _t=J[dt];de[dt]=_t.getVisibleCoordinates(),ge[dt]=de[dt].slice().reverse(),fe[dt]=_t.getVisibleCoordinates(!0).reverse(),Ee[dt]=_t.getShadowCasterCoordinates(),Le[dt]=_t.sortCoordinatesByDistance(de[dt])}const je=dt=>{const _t=this.style.getLayerSourceCache(dt);return _t&&_t.used?_t.getSource():null};if(Q||pe||this._clippingActiveLastFrame){const dt=[],_t=[];let lt=0;for(const Nt of Y)this.isSourceForClippingOrConflation(Nt,je(Nt))&&(dt.push(Nt),_t.push(lt)),lt++;if(dt&&(pe||dt.length>1)||this._clippingActiveLastFrame){pe=!1;const Nt=[];for(let xt=0;xt<dt.length;xt++){const Ht=dt[xt],Lt=_t[xt],Gt=this.style.getLayerSourceCache(Ht);if(!Gt||!Gt.used||!Gt.getSource().usedInConflation&&Ht.type!=="clip")continue;let Zt=i.ev,Fn=i.bQ.None;const $n=[];let On=!0;if(Ht.type==="clip"){Zt=Lt;for(const Zn of Ht.layout.get("clip-layer-types"))Fn|=Zn==="model"?i.bQ.Model:Zn==="symbol"?i.bQ.Symbol:i.bQ.FillExtrusion;for(const Zn of Ht.layout.get("clip-layer-scope"))$n.push(Zn);Ht.isHidden(this.transform.zoom)?On=!1:pe=!0}On&&Nt.push({layer:Ht.fqid,cache:Gt,order:Zt,clipMask:Fn,clipScope:$n})}this.replacementSource.setSources(Nt),ie=!0}}this._clippingActiveLastFrame=pe,ie||this.replacementSource.clear(),this.conflationActive=ie,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let dt=0;dt<Y.length;dt++){const _t=Y[dt],lt=_t.cutoffRange();if(this.longestCutoffRange=Math.max(lt,this.longestCutoffRange),lt>0){const Nt=je(_t);Nt&&(this.minCutoffZoom=Math.max(Nt.minzoom,this.minCutoffZoom)),_t.minzoom&&(this.minCutoffZoom=Math.max(_t.minzoom,this.minCutoffZoom))}_t.is3D(E)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=dt),this._lastOcclusionLayer=dt)}const Ye=this.style&&this.style.fog;Ye?(this._fogVisible=Ye.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Ye.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(fe),this.opaquePassCutoff=0,O=R(),Y=O.map(dt=>S[dt]));const $e=this._shadowRenderer;if($e){$e.updateShadowParameters(this.transform,this.style.directionalLight);for(const dt in J)for(const _t of de[dt]){let lt={min:0,max:0};this.terrain&&(lt=this.terrain.getMinMaxForTile(_t)||lt),$e.addShadowReceiver(_t.toUnwrapped(),lt.min,lt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.eu(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Yh(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Ue=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Fe=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Ue&&!this._snow&&(this._snow=new io(this)),!Ue&&this._snow&&(this._snow.destroy(),delete this._snow),Fe&&!this._rain&&(this._rain=new tx(this)),!Fe&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Jt.has(this.context.gl))return;this.renderPass="offscreen";for(const dt of Y){const _t=a.getLayerSourceCache(dt);if(!dt.hasOffscreenPass()||dt.isHidden(this.transform.zoom))continue;const lt=_t?ge[_t.id]:void 0;(dt.type==="custom"||dt.type==="raster"||dt.type==="raster-particle"||dt.isSky()||lt&&lt.length)&&this.renderLayer(this,_t,dt,lt)}this.depthRangeFor3D=[0,1-(Y.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ee)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Ze=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),et=(()=>{if(d.showOverdrawInspector)return i.am.black;const dt=this.style.fog;if(dt&&this.transform.projection.supportsFog){const _t=this.style.getLut(dt.scope);if(!Ze){const lt=dt.properties.get("color-use-theme")==="none",Nt=dt.properties.get("color").toRenderColor(lt?null:_t).toArray01();return new i.am(...Nt)}if(Ze){const lt=dt.properties.get("space-color-use-theme")==="none",Nt=dt.properties.get("space-color").toRenderColor(lt?null:_t).toArray01();return new i.am(...Nt)}}return i.am.transparent})();if(this.context.clear({color:et,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ze&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const dt=Y[this.currentLayer],_t=a.getLayerSourceCache(dt);if(dt.isSky())continue;const lt=_t?(dt.is3D(E)?Le:ge)[_t.id]:void 0;this._renderTileClippingMasks(dt,_t,lt),this.renderLayer(this,_t,dt,lt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ze&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.ah(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const dt=Y[this.currentLayer],_t=a.getLayerSourceCache(dt);dt.isSky()&&this.renderLayer(this,_t,dt,_t?ge[_t.id]:void 0)}function gt(dt,_t){let lt;return _t&&(lt=(dt.type==="symbol"?fe:dt.is3D(E)?Le:ge)[_t.id]),lt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<O.length;){const dt=Y[this.currentLayer];if(dt.type==="raster"||dt.type==="raster-particle"){const _t=a.getLayerSourceCache(dt);this.renderLayer(this,_t,dt,gt(dt,_t))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let ht=0;$e&&(ht=$e.getShadowCastingLayerCount());let kt=!1,Dt=-1;for(let dt=0;dt<O.length;++dt){const _t=Y[dt];_t.isHidden(this.transform.zoom)||_t.is3D(E)&&(Dt=dt)}H&&Dt===-1&&(B=!0);let tn=!1;for(;this.currentLayer<O.length;){const dt=Y[this.currentLayer],_t=a.getLayerSourceCache(dt);if(dt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(dt)){if(dt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!tn&&dt.is3D(E)&&!E){const lt=this.currentLayer,Nt=xt=>{for(this.currentLayer=0;this.currentLayer<Y.length;this.currentLayer++){const Ht=Y[this.currentLayer];if(zc[Ht.type]){const Lt=this.style.getLayerSourceCache(Ht);zc[Ht.type](this,Lt,Ht,gt(Ht,Lt),xt)}}};Nt("initialize"),Nt("reset"),this.currentLayer=lt,tn=!0}if(B&&!kt&&this.terrain&&!this.transform.isOrthographic&&(kt=!0,this.blitDepth()),H&&Dt!==-1&&this.currentLayer===Dt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(dt,_t,_t?de[_t.id]:void 0),this.renderLayer(this,_t,dt,gt(dt,_t)),!this.terrain&&$e&&ht>0&&dt.hasShadowPass()&&--ht==0&&($e.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const lt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=lt;this.currentLayer++){const Nt=Y[this.currentLayer];if(!Nt.hasLightBeamPass())continue;const xt=a.getLayerSourceCache(Nt);this.renderLayer(this,xt,Nt,xt?ge[xt.id]:void 0)}this.currentLayer=lt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const lt=this.currentLayer;this.depthOcclusion=!0;for(const Nt of this.layersWithOcclusionOpacity){this.currentLayer=Nt;const xt=Y[this.currentLayer],Ht=a.getLayerSourceCache(xt),Lt=Ht?ge[Ht.id]:void 0;this.terrain||this._renderTileClippingMasks(xt,Ht,Ht?de[Ht.id]:void 0),this.renderLayer(this,Ht,xt,Lt)}this.depthOcclusion=!1,this.currentLayer=lt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let dt=null;Y.forEach(_t=>{const lt=a.getLayerSourceCache(_t);lt&&!_t.isHidden(this.transform.zoom)&&lt.getVisibleCoordinates().length&&(!dt||dt.getSource().maxzoom<lt.getSource().maxzoom)&&(dt=lt)}),dt&&this.options.showTileBoundaries&&ui.debug(this,dt,dt.getVisibleCoordinates(),i.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&ui.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(dt){const _t=dt.transform.padding;Um(dt,dt.transform.height-(_t.top||0),3,jm),Um(dt,_t.bottom||0,3,Vm),$m(dt,_t.left||0,3,oy),$m(dt,dt.transform.width-(_t.right||0),3,Ha);const lt=dt.transform.centerPoint;(function(Nt,xt,Ht,Lt){Dd(Nt,xt-1,Ht-10,2,20,Lt),Dd(Nt,xt-10,Ht-1,20,2,Lt)})(dt,lt.x,dt.transform.height-lt.y,Bu)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ie||(this.conflationActive=!1)}prepareLayer(a){this.gpuTimingStart(a);const{unsupportedLayers:d}=this.transform.projection,v=!d||!d.includes(a.type);if(Kh[a.type]&&(v||this.terrain&&a.type==="custom")){const S=this.style.getLayerSourceCache(a);Kh[a.type](a,S,this)}this.gpuTimingEnd()}renderLayer(a,d,v,S){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="sky"||v.type==="custom"||v.type==="model"||v.type==="raster"||v.type==="raster-particle"||S&&S.length)&&(this.id=v.id,this.gpuTimingStart(v),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(v.type)&&(!a.terrain||v.type!=="custom")||v.type==="clip"||ui[v.type](a,d,v,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,v=this.context.gl;let S=this.gpuTimers[a.id];S||(S=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:v.createQuery()}),S.calls++,v.beginQuery(d.TIME_ELAPSED_EXT,S.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,d=this.context.gl,v=d.createQuery();this.deferredRenderGpuTimeQueries.push(v),d.beginQuery(a.TIME_ELAPSED_EXT,v)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const d={};for(const v in a){const S=a[v],E=this.context.extTimerQuery,R=E.getQueryParameter(S.query,this.context.gl.QUERY_RESULT)/1e6;E.deleteQueryEXT(S.query),d[v]=R}return d}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let v=0;for(const S of a)v+=d.getQueryParameter(S,d.QUERY_RESULT)/1e6,d.deleteQuery(S);return v}translatePosMatrix(a,d,v,S,E){if(!v[0]&&!v[1])return a;const R=E?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(R){const H=Math.sin(R),Y=Math.cos(R);v=[v[0]*Y-v[1]*H,v[0]*H+v[1]*Y]}const O=[E?v[0]:i.aw(d,v[0],this.transform.zoom),E?v[1]:i.aw(d,v[1],this.transform.zoom),0],B=new Float32Array(16);return i.bo(B,a,O),B}saveTileTexture(a){const d=a.size[0],v=this._tileTextures[d];v?v.push(a):this._tileTextures[d]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(a,d,v){const S=v===void 0?this.terrain&&this.terrain.renderingToTexture:v,E=[];return this.style&&this.style.enable3dLights()&&(a==="globeRaster"||a==="terrainRaster"?(E.push("LIGHTING_3D_MODE"),E.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):S||E.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||E.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(E.push("TERRAIN"),this.linearFloatFilteringSupported()&&E.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&E.push("GLOBE"),!this._fogVisible||S||d!==void 0&&!d||E.push("FOG","FOG_DITHERING"),S&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}getOrCreateProgram(a,d){this.cache=this.cache||{};const v=d&&d.defines||[],S=d&&d.config,E=this.currentGlobalDefines(a,d&&d.overrideFog,d&&d.overrideRtt).concat(v),R=Lu.cacheKey(Yl[a],a,E,S);return this.cache[R]||(this.cache[R]=new Lu(this.context,a,Yl[a],S,ry[a],E)),this.cache[R]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(a,d){if(this.style.enable3dLights()){const v=this.style.directionalLight,S=this.style.ambientLight;if(v&&S){const E=((R,O,B)=>{const H=R.properties.get("direction"),Y=R.properties.get("color-use-theme")==="none",J=R.properties.get("color").toRenderColor(Y?null:B.getLut(R.scope)).toArray01(),Q=R.properties.get("intensity"),ie=O.properties.get("color-use-theme")==="none",pe=O.properties.get("color").toRenderColor(ie?null:B.getLut(O.scope)).toArray01(),de=O.properties.get("intensity"),ge=[H.x,H.y,H.z],fe=i.dw(pe,de),Ee=i.dw(J,Q);return{u_lighting_ambient_color:fe,u_lighting_directional_dir:ge,u_lighting_directional_color:Ee,u_ground_radiance:$h(ge,Ee,fe)}})(v,S,this.style);d.setLightsUniformValues(a,E)}}}uploadCommonUniforms(a,d,v,S,E){if(this.uploadCommonLightUniforms(a,d),this.terrain&&this.terrain.renderingToTexture)return;const R=this.style.fog;if(R){const O=R.getOpacity(this.transform.pitch),B=((H,Y,J,Q,ie,pe,de,ge,fe,Ee,Le,je)=>{const Ye=H.transform,$e=Y.properties.get("color-use-theme")==="none",Ue=Y.properties.get("color").toRenderColor($e?null:H.style.getLut(Y.scope)).toArray01();Ue[3]=Q;const Fe=H.frameCounter/1e3%1,[Ze,et]=Y.properties.get("vertical-range");return{u_fog_matrix:J?Ye.calculateFogTileMatrix(J):je||H.identityMat,u_fog_range:Y.getFovAdjustedRange(Ye._fov),u_fog_color:Ue,u_fog_horizon_blend:Y.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ze,et),et],u_fog_temporal_offset:Fe,u_frustum_tl:ie,u_frustum_tr:pe,u_frustum_br:de,u_frustum_bl:ge,u_globe_pos:fe,u_globe_radius:Ee,u_viewport:Le,u_globe_transition:i.ah(Ye.zoom),u_is_globe:+(Ye.projection.name==="globe")}})(this,R,v,O,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],S);d.setFogUniformValues(a,B)}E&&d.setCutoffUniformValues(a,E.uniformValues)}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,d=a.createTexture();return a.bindTexture(a.TEXTURE_2D,d),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,d=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const S of v)d[S.key]=a[S.key]||new wc(S,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(a,d){return!(!a.is3D(!(!this.terrain||!this.terrain.enabled))||a.type!=="clip"&&(a.minzoom&&a.minzoom>this.transform.zoom||(this.style._clipLayerPresent||a.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(a){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[a.key];return d||(this._cachedTileFogOpacities[a.key]=d=this.style.fog.getOpacityForTile(a)),d[0]>=ln||d[1]>=ln}setupDepthForOcclusion(a,d,v){const S=this.context,E=S.gl,R=!!v;var O;v||(v={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),S.activeTexture.set(E.TEXTURE3),a&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE),v.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],v.u_depth_range_unpack=[2/((O=this.depthRangeFor3D)[1]-O[0]),-1-2*O[0]/(O[1]-O[0])],v.u_occluder_half_size=.5*this.occlusionParams.occluderSize,v.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE),S.activeTexture.set(E.TEXTURE0),R||d.setTerrainUniformValues(S,v)}}function Od(y,a){let d=!1,v=null;const S=()=>{v=null,d&&(y(),v=setTimeout(S,a),d=!1)};return()=>(d=!0,v||S(),v)}class Jh{constructor(a){this._hashName=a&&encodeURIComponent(a),i.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Od(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const d=ef(a);if(this._hashName){const v=this._hashName;let S=!1;const E=location.hash.slice(1).split("&").map(R=>{const O=R.split("=")[0];return O===v?(S=!0,`${O}=${d}`):R}).filter(R=>R);return S||E.push(`${v}=${d}`),`#${E.join("&")}`}return`#${d}`}_getCurrentHash(){const a=location.hash.replace("#","");if(this._hashName){let d;return a.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(d=v)}),(d&&d[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(Number(v)))){const v=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(d[3]||0):a.getBearing();return a.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function ef(y,a){const d=y.getCenter(),v=Math.round(100*y.getZoom())/100,S=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,S),R=Math.round(d.lng*E)/E,O=Math.round(d.lat*E)/E,B=y.getBearing(),H=y.getPitch();let Y=a?`/${R}/${O}/${v}`:`${v}/${O}/${R}`;return(B||H)&&(Y+="/"+Math.round(10*B)/10),H&&(Y+=`/${Math.round(H)}`),Y}const tf={linearity:.3,easing:i.ew(0,0,.3,1)},dy=i.l({deceleration:2500,maxSpeed:1400},tf),Zv=i.l({deceleration:20,maxSpeed:1400},tf),Ga=i.l({deceleration:1e3,maxSpeed:360},tf),Al=i.l({deceleration:1e3,maxSpeed:90},tf);class nf{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=i.q.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)d.zoom+=E.zoomDelta||0,d.bearing+=E.bearingDelta||0,d.pitch+=E.pitchDelta||0,E.panDelta&&d.pan._add(E.panDelta),E.around&&(d.around=E.around),E.pinchAround&&(d.pinchAround=E.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(d.pan.mag()){const E=ju(d.pan.mag(),v,i.l({},dy,a||{}));S.offset=d.pan.mult(E.amount/d.pan.mag()),S.center=this._map.transform.center,Fc(S,E)}if(d.zoom){const E=ju(d.zoom,v,Zv);S.zoom=this._map.transform.zoom+E.amount,Fc(S,E)}if(d.bearing){const E=ju(d.bearing,v,Ga);S.bearing=this._map.transform.bearing+i.aD(E.amount,-179,179),Fc(S,E)}if(d.pitch){const E=ju(d.pitch,v,Al);S.pitch=this._map.transform.pitch+E.amount,Fc(S,E)}if(S.zoom||S.bearing){const E=d.pinchAround===void 0?d.around:d.pinchAround;S.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function Fc(y,a){(!y.duration||y.duration<a.duration)&&(y.duration=a.duration,y.easing=a.easing)}function ju(y,a,d){const{maxSpeed:v,linearity:S,deceleration:E}=d,R=i.aD(y*S/(a/1e3),-v,v),O=Math.abs(R)/(E*S);return{easing:d.easing,duration:1e3*O,amount:R*(O/2)}}class Aa extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v,S={}){const E=ye(d.getCanvasContainer(),v),R=d.unproject(E);super(a,i.l({point:E,lngLat:R,originalEvent:v},S)),this._defaultPrevented=!1,this.target=d}}class Bc extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){const S=a==="touchend"?v.changedTouches:v.touches,E=_e(d.getCanvasContainer(),S),R=E.map(B=>d.unproject(B)),O=E.reduce((B,H,Y,J)=>B.add(H.div(J.length)),new i.P(0,0));super(a,{points:E,point:O,lngLats:R,lngLat:d.unproject(O),originalEvent:v}),this._defaultPrevented=!1}}class Ld extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class Vu{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new Ld(this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new Aa(a.type,this._map,a))}mouseup(a){this._map.fire(new Aa(a.type,this._map,a))}preclick(a){const d=i.l({},a);d.type="preclick",this._map.fire(new Aa(d.type,this._map,d))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(a),this._map.fire(new Aa(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new Aa(a.type,this._map,a))}mouseover(a){this._map.fire(new Aa(a.type,this._map,a))}mouseout(a){this._map.fire(new Aa(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Bc(a.type,this._map,a))}touchmove(a){this._map.fire(new Bc(a.type,this._map,a))}touchend(a){this._map.fire(new Bc(a.type,this._map,a))}touchcancel(a){this._map.fire(new Bc(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dl{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new Aa(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Aa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new Aa(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ml{constructor(a,d){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(K(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const v=d,S=this._startPos,E=this._lastPos;if(!S||!E||E.equals(v)||!this._box&&v.dist(S)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=F("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const R=Math.min(S.x,v.x),O=Math.max(S.x,v.x),B=Math.min(S.y,v.y),H=Math.max(S.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${R}px,${B}px)`,this._box.style.width=O-R+"px",this._box.style.height=H-B+"px")})}mouseupWindow(a,d){if(!this._active)return;const v=this._startPos,S=d;if(v&&a.button===0){if(this.reset(),he(),v.x!==S.x||v.y!==S.y)return this._map.fire(new i.A("boxzoomend",{originalEvent:a})),{cameraAnimation:E=>E.fitScreenCoordinates(v,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ee(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new i.A(a,{originalEvent:d}))}}function Ql(y,a){const d={};for(let v=0;v<y.length;v++)d[y[v].identifier]=a[v];return d}class hy{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=function(S){const E=new i.P(0,0);for(const R of S)E._add(R);return E.div(S.length)}(d),this.touches=Ql(v,d)))}touchmove(a,d,v){if(this.aborted||!this.centroid)return;const S=Ql(v,d);for(const E in this.touches){const R=S[E];(!R||R.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(a,d,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Do{constructor(a){this.singleTap=new hy(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,d,v){this.singleTap.touchstart(a,d,v)}touchmove(a,d,v){this.singleTap.touchmove(a,d,v)}touchend(a,d,v){const S=this.singleTap.touchend(a,d,v);if(S){const E=a.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(S)<30;if(E&&R||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Nc{constructor(){this._zoomIn=new Do({numTouches:1,numTaps:2}),this._zoomOut=new Do({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,v){this._zoomIn.touchstart(a,d,v),this._zoomOut.touchstart(a,d,v)}touchmove(a,d,v){this._zoomIn.touchmove(a,d,v),this._zoomOut.touchmove(a,d,v)}touchend(a,d,v){const S=this._zoomIn.touchend(a,d,v),E=this._zoomOut.touchend(a,d,v);return S?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()+1,around:R.unproject(S)},{originalEvent:a})}):E?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()-1,around:R.unproject(E)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _s={0:1,2:2},jc={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class rf{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,d){return!1}_move(a,d){return{}}mousedown(a,d){if(this._lastPoint)return;const v=ae(a);this._correctButton(a,v)&&(this._lastPoint=d,this._eventButton=v)}mousemoveWindow(a,d){const v=this._lastPoint;if(v){if(a.preventDefault(),this._eventButton!=null&&function(S,E){const R=_s[E];return S.buttons===void 0||(S.buttons&R)!==R}(a,this._eventButton))this.reset();else if(this._moved||!(d.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(v,d)}}mouseupWindow(a){this._lastPoint&&ae(a)===this._eventButton&&(this._moved&&he(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ym extends rf{mousedown(a,d){super.mousedown(a,d),this._lastPoint&&(this._active=!0)}_correctButton(a,d){return d===0&&!a.ctrlKey}_move(a,d){return{around:d,panDelta:d.sub(a)}}}class Xm extends rf{constructor(a){super(a),this._pitchRotateKey=a.pitchRotateKey?jc[a.pitchRotateKey]:void 0}_correctButton(a,d){return this._pitchRotateKey?d===0&&a[this._pitchRotateKey]:d===0&&a.ctrlKey||d===2}_move(a,d){const v=.8*(d.x-a.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(a){this._pitchRotateKey||a.preventDefault()}}class zd extends rf{constructor(a){super(a),this._pitchRotateKey=a.pitchRotateKey?jc[a.pitchRotateKey]:void 0}_correctButton(a,d){return this._pitchRotateKey?d===0&&a[this._pitchRotateKey]:d===0&&a.ctrlKey||d===2}_move(a,d){const v=-.5*(d.y-a.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(a){this._pitchRotateKey||a.preventDefault()}}class Uu{constructor(a,d){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),i.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(a,d,v){return this._calculateTransform(a,d,v)}touchmove(a,d,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(v.length===1&&!i.ex())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,d,v)}}touchend(a,d,v){this._calculateTransform(a,d,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,v){v.length>0&&(this._active=!0);const S=Ql(v,d),E=new i.P(0,0),R=new i.P(0,0);let O=0;for(const H in S){const Y=S[H],J=this._touches[H];J&&(E._add(Y),R._add(Y.sub(J)),O++,S[H]=Y)}if(this._touches=S,O<this._minTouches||!R.mag())return;const B=R.div(O);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(O),panDelta:B}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Fd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,d,v){return{}}touchstart(a,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,v){const S=this._firstTwoTouches;if(!S)return;a.preventDefault();const[E,R]=S,O=of(v,d,E),B=of(v,d,R);if(!O||!B)return;const H=this._aroundCenter?null:O.add(B).div(2);return this._move([O,B],H,a)}touchend(a,d,v){if(!this._firstTwoTouches)return;const[S,E]=this._firstTwoTouches,R=of(v,d,S),O=of(v,d,E);R&&O||(this._active&&he(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function of(y,a,d){for(let v=0;v<y.length;v++)if(y[v].identifier===d)return a[v]}function up(y,a){return Math.log(y/a)/Math.LN2}class fy extends Fd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(up(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:up(this._distance,v),pinchAround:d}}}function sf(y,a){return 180*y.angleWith(a)/Math.PI}class Kv extends Fd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d){const v=this._vector;if(this._vector=a[0].sub(a[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:sf(this._vector,v),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const S=sf(a,v);return Math.abs(S)<d}}function dp(y){return Math.abs(y.y)>Math.abs(y.x)}class Qv extends Fd{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,dp(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,v){const S=this._lastPoints;if(!S)return;const E=a[0].sub(S[0]),R=a[1].sub(S[1]);return this._map._cooperativeGestures&&!i.ex()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(E,R,v.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(E.y+R.y)/2*-.5})}gestureBeginsVertically(a,d,v){if(this._valid!==void 0)return this._valid;const S=a.mag()>=2,E=d.mag()>=2;if(!S&&!E)return;if(!S||!E)return this._firstMove==null&&(this._firstMove=v),v-this._firstMove<100&&void 0;const R=a.y>0==d.y>0;return dp(a)&&dp(d)&&R}}const Jv={panStep:100,bearingStep:15,pitchStep:10};class nx{constructor(){const a=Jv;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,v=0,S=0,E=0,R=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),E=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),E=1);break;case 38:a.shiftKey?S=1:(a.preventDefault(),R=-1);break;case 40:a.shiftKey?S=-1:(a.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(v=0,S=0),{cameraAnimation:O=>{const B=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:e_,zoom:d?Math.round(B)+d*(a.shiftKey?2:1):B,bearing:O.getBearing()+v*this._bearingStep,pitch:O.getPitch()+S*this._pitchStep,offset:[-E*this._panStep,-R*this._panStep],center:O.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function e_(y){return y*(2-y)}const Ms=4.000244140625,Xs=1/450;class t_{constructor(a,d){this._map=a,this._el=a.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Xs,i.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||i.ex()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=i.q.now(),S=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Ms==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(S*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ye(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const H=this._type==="wheel"&&Math.abs(this._delta)>Ms?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&Y!==0&&(Y=1/Y);const J=d(),Q=Math.pow(2,J),ie=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):Q;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(ie*Y))),this._type==="wheel"&&(this._startZoom=J,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:d(),S=this._startZoom,E=this._easing;let R,O=!1;if(this._type==="wheel"&&S&&E){const H=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),Y=E(H);R=i.ai(S,v,Y),H<1?this._frameId||(this._frameId=!0):O=!0}else R=v,O=!0;this._active=!0,O&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let B=R-d();return B*this._lastDelta<0&&(B=0),{noInertia:!0,needsRenderFrame:!O,zoomDelta:B,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=i.ey;if(this._prevEase){const v=this._prevEase,S=(i.q.now()-v.start)/v.duration,E=v.easing(S+.01)-v.easing(S),R=.27/Math.sqrt(E*E+1e-4)*.01,O=Math.sqrt(.0729-R*R);d=i.ew(R,O,.25,1)}return this._prevEase={start:i.q.now(),duration:a,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class n_{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class r_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,d){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(a.shiftKey?-1:1),around:v.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class i_{constructor(){this._tap=new Do({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,d,v){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=d[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(a,d,v))}touchmove(a,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const S=d[0],E=S.y-this._swipePoint.y;return this._swipePoint=S,a.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(a,d,v)}touchend(a,d,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(a,d,v)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class o_{constructor(a,d,v){this._el=a,this._mousePan=d,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class py{constructor(a,d,v){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class s_{constructor(a,d,v,S){this._el=a,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ho=y=>y.zoom||y.drag||y.pitch||y.rotate;class a_ extends i.A{}class rx{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,d){const v=i.at([],d,a);this.radius=i.ae(v[2]<0?i.eA([],v,this.constants):[v[0],v[1],0])}projectRay(a){i.eA(a,a,this.constants),i.au(a,a),i.eB(a,a,this.constants);const d=i.b$([],a,this.radius);if(d[2]>0){const v=i.b$([],[0,0,1],i.bE(d,[0,0,1])),S=i.b$([],i.au([],[d[0],d[1],0]),this.radius),E=i.cU([],d,i.b$([],i.at([],i.cU([],S,v),d),2));d[0]=E[0],d[1]=E[1]}return d}}function Bd(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class l_{constructor(a,d){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new nf(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new rx,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),i.aV(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,E,R]of this._listeners){const O=S===document?this.handleWindowEvent:this.handleEvent;S.addEventListener(E,O,R)}}destroy(){for(const[a,d,v]of this._listeners){const S=a===document?this.handleWindowEvent:this.handleEvent;a.removeEventListener(d,S,v)}}_addDefaultHandlers(a){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new Vu(d,a));const S=d.boxZoom=new Ml(d,a);this._add("boxZoom",S);const E=new Nc,R=new r_;d.doubleClickZoom=new n_(R,E),this._add("tapZoom",E),this._add("clickZoom",R);const O=new i_;this._add("tapDragZoom",O);const B=d.touchPitch=new Qv(d);this._add("touchPitch",B);const H=new Xm(a),Y=new zd(a);d.dragRotate=new py(a,H,Y),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);const J=new Ym(a),Q=new Uu(d,a);d.dragPan=new o_(v,J,Q),this._add("mousePan",J),this._add("touchPan",Q,["touchZoom","touchRotate"]);const ie=new Kv,pe=new fy;d.touchZoomRotate=new s_(v,pe,ie,O),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new dl(d));const de=d.scrollZoom=new t_(d,this);this._add("scrollZoom",de,["mousePan"]);const ge=d.keyboard=new nx;this._add("keyboard",ge);for(const fe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[fe]&&d[fe].enable(a[fe])}_add(a,d,v){this._handlers.push({handlerName:a,handler:d,allowed:v}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ho(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,d,v){for(const S in a)if(S!==v&&(!d||d.indexOf(S)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const d=[];for(const v of a)this._el.contains(v.target)&&d.push(v);return d}handleEvent(a,d){this._updatingCamera=!0;const v=a.type==="renderFrame",S=v?void 0:a,E={needsRenderFrame:!1},R={},O={},B=a.touches?this._getMapTouches(a.touches):void 0,H=B?_e(this._el,B):v?void 0:ye(this._el,a);for(const{handlerName:Q,handler:ie,allowed:pe}of this._handlers){if(!ie.isEnabled())continue;let de;this._blockedByActive(O,pe,Q)?ie.reset():ie[d||a.type]&&(de=ie[d||a.type](a,H,B),this.mergeHandlerResult(E,R,de,Q,S),de&&de.needsRenderFrame&&this._triggerRenderFrame()),(de||ie.isActive())&&(O[Q]=ie)}const Y={};for(const Q in this._previousActiveHandlers)O[Q]||(Y[Q]=S);this._previousActiveHandlers=O,(Object.keys(Y).length||Bd(E))&&(this._changes.push([E,R,Y]),this._triggerRenderFrame()),(Object.keys(O).length||Bd(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=E;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))}mergeHandlerResult(a,d,v,S,E){if(!v)return;i.l(a,v);const R={handlerName:S,originalEvent:v.originalEvent||E};v.zoomDelta!==void 0&&(d.zoom=R),v.panDelta!==void 0&&(d.drag=R),v.pitchDelta!==void 0&&(d.pitch=R),v.bearingDelta!==void 0&&(d.rotate=R)}_applyChanges(){const a={},d={},v={};for(const[S,E,R]of this._changes)S.panDelta&&(a.panDelta=(a.panDelta||new i.P(0,0))._add(S.panDelta)),S.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(a.around=S.around),S.aroundCoord!==void 0&&(a.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(a.pinchAround=S.pinchAround),S.noInertia&&(a.noInertia=S.noInertia),i.l(d,E),i.l(v,R);this._updateMapTransform(a,d,v),this._changes=[]}_updateMapTransform(a,d,v){const S=this._map,E=S.transform,R=Ee=>[Ee.x,Ee.y,Ee.z];if((Ee=>{const Le=this._eventsInProgress.drag;return Le&&!this._handlersById[Le.handlerName].isActive()})()&&!Bd(a)){const Ee=E.zoom;E.cameraElevationReference="sea",this._originalZoom!=null&&E._orthographicProjectionAtLowPitch&&E.projection.name!=="globe"&&E.pitch===0?(E.cameraElevationReference="ground",E.zoom=this._originalZoom):(E.recenterOnTerrain(),E.cameraElevationReference="ground"),Ee!==E.zoom&&this._map._update(!0)}if(E._isCameraConstrained&&S._stop(!0),!Bd(a))return void this._fireEvents(d,v,!0);let{panDelta:O,zoomDelta:B,bearingDelta:H,pitchDelta:Y,around:J,aroundCoord:Q,pinchAround:ie}=a;E._isCameraConstrained&&(B>0&&(B=0),E._isCameraConstrained=!1),ie!==void 0&&(J=ie),(B||(Ee=>d[Ee]&&!this._eventsInProgress[Ee])("drag"))&&J&&(this._dragOrigin=R(E.pointCoordinate3D(J)),this._originalZoom=E.zoom,this._trackingEllipsoid.setup(E._camera.position,this._dragOrigin)),E.cameraElevationReference="sea",S._stop(!0),J=J||S.transform.centerPoint,H&&(E.bearing+=H),Y&&(E.pitch+=Y),E._updateCameraState();const pe=[0,0,0];if(O)if(E.projection.name==="mercator"){const Ee=this._trackingEllipsoid.projectRay(E.screenPointToMercatorRay(J).dir),Le=this._trackingEllipsoid.projectRay(E.screenPointToMercatorRay(J.sub(O)).dir);pe[0]=Le[0]-Ee[0],pe[1]=Le[1]-Ee[1]}else{const Ee=E.pointCoordinate(J);if(E.projection.name==="globe"){O=O.rotate(-E.angle);const Le=E._pixelsPerMercatorPixel/E.worldSize;pe[0]=-O.x*i.ez(i.aY(Ee.y))*Le,pe[1]=-O.y*i.ez(E.center.lat)*Le}else{const Le=E.pointCoordinate(J.sub(O));Ee&&Le&&(pe[0]=Le.x-Ee.x,pe[1]=Le.y-Ee.y)}}const de=E.zoom,ge=[0,0,0];if(B){const Ee=R(Q||E.pointCoordinate3D(J)),Le={dir:i.au([],i.at([],Ee,E._camera.position))};if(Le.dir[2]<0){const je=E.zoomDeltaToMovement(Ee,B);i.b$(ge,Le.dir,je)}}const fe=i.cU(pe,pe,ge);E._translateCameraConstrained(fe),B&&Math.abs(E.zoom-de)>1e-4&&E.recenterOnTerrain(),E.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,v,!0)}_fireEvents(a,d,v){const S=ho(this._eventsInProgress),E=ho(a),R={};for(const Y in a){const{originalEvent:J}=a[Y];this._eventsInProgress[Y]||(R[`${Y}start`]=J),this._eventsInProgress[Y]=a[Y]}!S&&E&&this._fireEvent("movestart",E.originalEvent);for(const Y in R)this._fireEvent(Y,R[Y]);E&&this._fireEvent("move",E.originalEvent);for(const Y in a){const{originalEvent:J}=a[Y];this._fireEvent(Y,J)}const O={};let B;for(const Y in this._eventsInProgress){const{handlerName:J,originalEvent:Q}=this._eventsInProgress[Y];this._handlersById[J].isActive()||(delete this._eventsInProgress[Y],B=d[J]||Q,O[`${Y}end`]=B)}for(const Y in O)this._fireEvent(Y,O[Y]);const H=ho(this._eventsInProgress);if(v&&(S||E)&&!H){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;Y?(J(Y.bearing||this._map.getBearing())&&(Y.bearing=0),this._map.easeTo(Y,{originalEvent:B})):(this._map.fire(new i.A("moveend",{originalEvent:B})),J(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new i.A(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new a_("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Nd="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class c_ extends i.E{constructor(a,d){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,i.aV(["_renderFrameCallback"],this)}getCenter(){return new i.cd(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,v){return a=i.P.convert(a).mult(-1),this.panTo(this.transform.center,i.l({offset:a},d),v)}panTo(a,d,v){return this.easeTo(i.l({center:a},d),v)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,v){return this.easeTo(i.l({zoom:a},d),v)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,v){return this.easeTo(i.l({bearing:a},d),v)}resetNorth(a,d){return this.rotateTo(0,i.l({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=i.aG.convert(a);const v=d&&d.bearing||0,S=d&&d.pitch||0,E=a.getNorthWest(),R=a.getSouthEast();return this._cameraForBounds(this.transform,E,R,v,S,d)}_extendPadding(a){const d={top:0,right:0,bottom:0,left:0};return a==null?i.l({},d,this.transform.padding):typeof a=="number"?{top:a,bottom:a,right:a,left:a}:i.l({},d,a)}_extendCameraOptions(a){return(a=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=this._extendPadding(a.padding),a}_minimumAABBFrustumDistance(a,d){const v=d.max[0]-d.min[0],S=d.max[1]-d.min[1];return v/S>a.aspect?v/(2*Math.tan(.5*a.fovX)*a.aspect):S/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,d,v,S,E,R){const O=a.clone(),B=this._extendCameraOptions(R);O.bearing=S,O.pitch=E;const H=i.cd.convert(d),Y=i.cd.convert(v),J=.5*(H.lat+Y.lat),Q=.5*(H.lng+Y.lng),ie=i.eC(J,Q),pe=i.au([],ie),de=i.au([],i.bG([],pe,[0,1,0])),ge=i.bG([],de,pe),fe=[de[0],de[1],de[2],0,ge[0],ge[1],ge[2],0,pe[0],pe[1],pe[2],0,0,0,0,1],Ee=[ie,i.eC(H.lat,H.lng),i.eC(Y.lat,H.lng),i.eC(Y.lat,Y.lng),i.eC(H.lat,Y.lng),i.eC(J,H.lng),i.eC(J,Y.lng),i.eC(H.lat,Q),i.eC(Y.lat,Q)];let Le=i.cV.fromPoints(Ee.map(xt=>[i.bE(de,xt),i.bE(ge,xt),i.bE(pe,xt)]));const je=i.ad([],Le.center,fe);i.eD(je)===0&&i.eE(je,0,0,1),i.au(je,je),i.b$(je,je,i.aE),O.center=i.eF(je);const Ye=O.getWorldToCameraMatrix(),$e=i.bi(new Float64Array(16),Ye);Le=i.cV.applyTransform(Le,i.az([],Ye,fe));const Ue=this._extendAABB(Le,O,B,S);if(!Ue)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Le=Ue,i.ad(je,je,Ye);const Fe=.5*(Le.max[2]-Le.min[2]),Ze=this._minimumAABBFrustumDistance(O,Le),et=i.b$([],[0,0,1],Fe),gt=i.cU(et,je,et),ht=Ze+(O.pitch===0?0:i.bD(je,gt)),kt=O.globeCenterInViewSpace,Dt=i.at([],je,[kt[0],kt[1],kt[2]]);i.au(Dt,Dt),i.b$(Dt,Dt,ht);const tn=i.cU([],je,Dt);i.ad(tn,tn,$e);const dt=i.eq/i.aE,_t=i.ae(tn),lt=i.c6(Math.max(_t*dt-i.eq,Number.EPSILON),0),Nt=Math.min(O.zoomFromMercatorZAdjusted(lt),B.maxZoom);return Nt>.5*(i.cL+i.cx)?(O.setProjection({name:"mercator"}),O.zoom=Nt,this._cameraForBounds(O,d,v,S,E,R)):{center:O.center,zoom:Nt,bearing:S,pitch:E}}_extendAABB(a,d,v,S){const E=.5*((v.padding.left||0)+(v.padding.right||0)),R=.5*((v.padding.top||0)+(v.padding.bottom||0)),O=R,B=E,H=E,Y=R,J=d.width-(B+H),Q=d.height-(O+Y),ie=i.at([],a.max,a.min),pe=Math.min(J/ie[0],Q/ie[1]),de=Math.min(d.scaleZoom(d.scale*pe),v.maxZoom);if(isNaN(de))return null;const ge=d.scale/d.zoomScale(de),fe=new i.cV([a.min[0]-B*ge,a.min[1]-Y*ge,a.min[2]],[a.max[0]+H*ge,a.max[1]+O*ge,a.max[2]]),Ee=(typeof v.offset.x=="number"&&typeof v.offset.y=="number"?new i.P(v.offset.x,v.offset.y):i.P.convert(v.offset)).rotate(-i.al(S));return fe.center[0]-=Ee.x*ge,fe.center[1]+=Ee.y*ge,fe}queryTerrainElevation(a,d){const v=this.transform.elevation;return v?(d=i.l({},{exaggerated:!0},d),v.getAtPoint(i.ac.fromLngLat(a),null,d.exaggerated)):null}_cameraForBounds(a,d,v,S,E,R){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,d,v,S,E,R);const O=a.clone(),B=this._extendCameraOptions(R);O.bearing=S,O.pitch=E;const H=i.cd.convert(d),Y=i.cd.convert(v),J=new i.cd(H.lng,Y.lat),Q=new i.cd(Y.lng,H.lat),ie=O.project(H),pe=O.project(Y),de=this.queryTerrainElevation(H),ge=this.queryTerrainElevation(Y),fe=this.queryTerrainElevation(J),Ee=this.queryTerrainElevation(Q),Le=[[ie.x,ie.y,Math.min(de||0,ge||0,fe||0,Ee||0)],[pe.x,pe.y,Math.max(de||0,ge||0,fe||0,Ee||0)]];let je=i.cV.fromPoints(Le);const Ye=O.getWorldToCameraMatrix(),$e=i.bi(new Float64Array(16),Ye);je=i.cV.applyTransform(je,Ye);const Ue=this._extendAABB(je,O,B,S);if(!Ue)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");je=Ue;const Fe=.5*i.at([],je.max,je.min)[2],Ze=this._minimumAABBFrustumDistance(O,je),et=[0,0,1,0];i.aA(et,et,Ye),i.eG(et,et);const gt=i.b$([],et,Ze+Fe),ht=i.cU([],je.center,gt);i.ad(je.center,je.center,$e),i.ad(ht,ht,$e);const kt=O.unproject(new i.P(je.center[0],je.center[1])),Dt=i.eH(O.projection,kt),tn=Math.pow(2,Dt),dt=Math.min(O._zoomFromMercatorZ(ht[2]*O.pixelsPerMeter*tn/O.worldSize),B.maxZoom);return O.mercatorFromTransition&&dt<.5*(i.cL+i.cx)?(O.setProjection({name:"globe"}),O.zoom=dt,this._cameraForBounds(O,d,v,S,E,R)):{center:kt,zoom:dt,bearing:S,pitch:E}}fitBounds(a,d,v){const S=this.cameraForBounds(a,d);return this._fitInternal(S,d,v)}fitScreenCoordinates(a,d,v,S,E){const R=i.P.convert(a),O=i.P.convert(d),B=new i.P(Math.min(R.x,O.x),Math.min(R.y,O.y)),H=new i.P(Math.max(R.x,O.x),Math.max(R.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(R,O))return this;const Y=this.transform.pointLocation3D(B),J=this.transform.pointLocation3D(H),Q=this.transform.pointLocation3D(new i.P(B.x,H.y)),ie=this.transform.pointLocation3D(new i.P(H.x,B.y)),pe=[Math.min(Y.lng,J.lng,Q.lng,ie.lng),Math.min(Y.lat,J.lat,Q.lat,ie.lat)],de=[Math.max(Y.lng,J.lng,Q.lng,ie.lng),Math.max(Y.lat,J.lat,Q.lat,ie.lat)],ge=S&&S.pitch?S.pitch:this.getPitch(),fe=this._cameraForBounds(this.transform,pe,de,v,ge,S);return this._fitInternal(fe,S,E)}_fitInternal(a,d,v){return a?(d=i.l(a,d)).linear?this.easeTo(d,v):this.flyTo(d,v):this}jumpTo(a,d){this.stop();const v=a.preloadOnly?this.transform.clone():this.transform;let S=!1,E=!1,R=!1;"zoom"in a&&v.zoom!==+a.zoom&&(S=!0,v.zoom=+a.zoom),a.center!==void 0&&(v.center=i.cd.convert(a.center)),"bearing"in a&&v.bearing!==+a.bearing&&(E=!0,v.bearing=+a.bearing),"pitch"in a&&v.pitch!==+a.pitch&&(R=!0,v.pitch=+a.pitch);const O=typeof a.padding=="number"?this._extendPadding(a.padding):a.padding;if(a.padding!=null&&!v.isPaddingEqual(O))if(a.retainPadding===!1){const B=v.clone();B.padding=O,v.setLocationAtPoint(v.center,B.centerPoint)}else v.padding=O;return a.preloadOnly?(this._preloadTiles(v),this):(this.fire(new i.A("movestart",d)).fire(new i.A("move",d)),S&&this.fire(new i.A("zoomstart",d)).fire(new i.A("zoom",d)).fire(new i.A("zoomend",d)),E&&this.fire(new i.A("rotatestart",d)).fire(new i.A("rotate",d)).fire(new i.A("rotateend",d)),R&&this.fire(new i.A("pitchstart",d)).fire(new i.A("pitch",d)).fire(new i.A("pitchend",d)),this.fire(new i.A("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(Nd),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,d){const v=this.transform;if(!v.projection.supportsFreeCamera)return i.w(Nd),this;this.stop();const S=v.zoom,E=v.pitch,R=v.bearing;v.setFreeCameraOptions(a);const O=S!==v.zoom,B=E!==v.pitch,H=R!==v.bearing;return this.fire(new i.A("movestart",d)).fire(new i.A("move",d)),O&&this.fire(new i.A("zoomstart",d)).fire(new i.A("zoom",d)).fire(new i.A("zoomend",d)),H&&this.fire(new i.A("rotatestart",d)).fire(new i.A("rotate",d)).fire(new i.A("rotateend",d)),B&&this.fire(new i.A("pitchstart",d)).fire(new i.A("pitch",d)).fire(new i.A("pitchend",d)),this.fire(new i.A("moveend",d)),this}easeTo(a,d){this._stop(!1,a.easeId),((a=i.l({offset:[0,0],duration:500,easing:i.ey},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const v=this.transform,S=this.getZoom(),E=this.getBearing(),R=this.getPitch(),O=this.getPadding(),B="zoom"in a?+a.zoom:S,H="bearing"in a?this._normalizeBearing(a.bearing,E):E,Y="pitch"in a?+a.pitch:R,J=this._extendPadding(a.padding),Q=i.P.convert(a.offset);let ie,pe,de;if(v.projection.name==="globe"){const et=i.ac.fromLngLat(v.center),gt=Q.rotate(-v.angle);et.x+=gt.x/v.worldSize,et.y+=gt.y/v.worldSize;const ht=et.toLngLat(),kt=i.cd.convert(a.center||ht);this._normalizeCenter(kt),ie=v.centerPoint.add(gt),pe=new i.P(et.x,et.y).mult(v.worldSize),de=new i.P(i.ay(kt.lng),i.aH(kt.lat)).mult(v.worldSize).sub(pe)}else{ie=v.centerPoint.add(Q);const et=v.pointLocation(ie),gt=i.cd.convert(a.center||et);this._normalizeCenter(gt),pe=v.project(et),de=v.project(gt).sub(pe)}const ge=v.zoomScale(B-S);let fe,Ee;a.around&&(fe=i.cd.convert(a.around),Ee=v.locationPoint(fe));const Le=this._zooming||B!==S,je=this._rotating||E!==H,Ye=this._pitching||Y!==R,$e=!v.isPaddingEqual(J),Ue=a.retainPadding===!1?v.clone():v,Fe=et=>gt=>{if(Le&&(et.zoom=i.ai(S,B,gt)),je&&(et.bearing=i.ai(E,H,gt)),Ye&&(et.pitch=i.ai(R,Y,gt)),$e&&(Ue.interpolatePadding(O,J,gt),ie=Ue.centerPoint.add(Q)),fe)et.setLocationAtPoint(fe,Ee);else{const ht=et.zoomScale(et.zoom-S),kt=B>S?Math.min(2,ge):Math.max(.5,ge),Dt=Math.pow(kt,1-gt),tn=et.unproject(pe.add(de.mult(gt*Dt)).mult(ht));et.setLocationAtPoint(et.renderWorldCopies?tn.wrap():tn,ie)}return a.preloadOnly||this._fireMoveEvents(d),et};if(a.preloadOnly){const et=this._emulate(Fe,a.duration,v);return this._preloadTiles(et),this}const Ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Le,this._rotating=je,this._pitching=Ye,this._padding=$e,this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,Ze),this._ease(Fe(v),et=>{v.cameraElevationReference==="sea"&&v.recenterOnTerrain(),this._afterEase(d,et)},a),this}_prepareEase(a,d,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||v.moving||this.fire(new i.A("movestart",a)),this._zooming&&!v.zooming&&this.fire(new i.A("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new i.A("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new i.A("pitchstart",a))}_fireMoveEvents(a){this.fire(new i.A("move",a)),this._zooming&&this.fire(new i.A("zoom",a)),this._rotating&&this.fire(new i.A("rotate",a)),this._pitching&&this.fire(new i.A("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,S=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new i.A("zoomend",a)),S&&this.fire(new i.A("rotateend",a)),E&&this.fire(new i.A("pitchend",a)),this.fire(new i.A("moveend",a))}flyTo(a,d){if(this._prefersReducedMotion(a)){const xt=i.aF(a,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(xt,d)}this.stop(),a=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.ey},a);const v=this.transform,S=this.getZoom(),E=this.getBearing(),R=this.getPitch(),O=this.getPadding(),B="zoom"in a?i.aD(+a.zoom,v.minZoom,v.maxZoom):S,H="bearing"in a?this._normalizeBearing(a.bearing,E):E,Y="pitch"in a?+a.pitch:R,J=this._extendPadding(a.padding),Q=v.zoomScale(B-S),ie=i.P.convert(a.offset);let pe=v.centerPoint.add(ie);const de=v.pointLocation(pe),ge=i.cd.convert(a.center||de);this._normalizeCenter(ge);const fe=v.project(de),Ee=v.project(ge).sub(fe);let Le=a.curve;const je=Math.max(v.width,v.height),Ye=je/Q,$e=Ee.mag();if("minZoom"in a){const xt=i.aD(Math.min(a.minZoom,S,B),v.minZoom,v.maxZoom),Ht=je/v.zoomScale(xt-S);Le=Math.sqrt(Ht/$e*2)}const Ue=Le*Le;function Fe(xt){const Ht=(Ye*Ye-je*je+(xt?-1:1)*Ue*Ue*$e*$e)/(2*(xt?Ye:je)*Ue*$e);return Math.log(Math.sqrt(Ht*Ht+1)-Ht)}function Ze(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function et(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const gt=Fe(0);let ht=function(xt){return et(gt)/et(gt+Le*xt)},kt=function(xt){return je*((et(gt)*(Ze(Ht=gt+Le*xt)/et(Ht))-Ze(gt))/Ue)/$e;var Ht},Dt=(Fe(1)-gt)/Le;if(Math.abs($e)<1e-6||!isFinite(Dt)){if(Math.abs(je-Ye)<1e-6)return this.easeTo(a,d);const xt=Ye<je?-1:1;Dt=Math.abs(Math.log(Ye/je))/Le,kt=function(){return 0},ht=function(Ht){return Math.exp(xt*Le*Ht)}}a.duration="duration"in a?+a.duration:1e3*Dt/("screenSpeed"in a?+a.screenSpeed/Le:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const tn=E!==H,dt=Y!==R,_t=!v.isPaddingEqual(J),lt=a.retainPadding===!1?v.clone():v,Nt=xt=>Ht=>{const Lt=Ht*Dt,Gt=1/ht(Lt);xt.zoom=Ht===1?B:S+xt.scaleZoom(Gt),tn&&(xt.bearing=i.ai(E,H,Ht)),dt&&(xt.pitch=i.ai(R,Y,Ht)),_t&&(lt.interpolatePadding(O,J,Ht),pe=lt.centerPoint.add(ie));const Zt=Ht===1?ge:xt.unproject(fe.add(Ee.mult(kt(Lt))).mult(Gt));return xt.setLocationAtPoint(xt.renderWorldCopies?Zt.wrap():Zt,pe),xt._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(d),xt};if(a.preloadOnly){const xt=this._emulate(Nt,a.duration,v);return this._preloadTiles(xt),this}return this._zooming=!0,this._rotating=tn,this._pitching=dt,this._padding=_t,this._prepareEase(d,!1),this._ease(Nt(v),()=>this._afterEase(d),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(a){}_cancelRenderFrame(a){}_stop(a,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,d)}if(!a){const v=this.handlers;v&&v.stop(!1)}return this}_ease(a,d,v){v.animate===!1||v.duration===0?(a(1),d()):(this._easeStart=i.q.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,d){a=i.bX(a,-180,180);const v=Math.abs(a-d);return Math.abs(a-360-d)<v&&(a-=360),Math.abs(a+360-d)<v&&(a+=360),a}_normalizeCenter(a){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const v=a.lng-d.center.lng;a.lng+=v>180?-360:v<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,d,v){const S=Math.ceil(15*d/1e3),E=[],R=a(v.clone());for(let O=0;O<=S;O++){const B=R(O/S);E.push(B.clone())}return E}_preloadTiles(a,d){}}class hp{constructor(a={}){this.options=a,i.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const d=this.options&&this.options.compact,v=a._getUIString("AttributionControl.ToggleAttribution");this._map=a,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",v);const S=F("span","mapboxgl-ctrl-icon",this._compactButton);return S.setAttribute("aria-hidden","true"),S.setAttribute("title",v),this._innerContainer=F("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(a){const v=d.reduce((S,E,R)=>(E.value&&(S+=`${E.key}=${E.value}${R<d.length-1?"&":""}`),S),"?");a.href=`${i.e.FEEDBACK_URL}/${v}#${ef(this._map,!0)}`,a.rel="noopener nofollow"}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const d=this._map.style._mergedSourceCaches;for(const S in d){const E=d[S];if(E.used){const R=E.getSource();R.attribution&&a.indexOf(R.attribution)<0&&a.push(R.attribution)}}a.sort((S,E)=>S.length-E.length),a=a.filter((S,E)=>{for(let R=E+1;R<a.length;R++)if(a[R].indexOf(S)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class jd{constructor(){i.aV(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=F("div","mapboxgl-ctrl");const d=F("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const d in a){const v=a[d].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const d=a[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Jl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const S of v)if(S.id===a)return void(S.cancelled=!0)}run(a=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Zm{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const d=i.dk((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,d,v){this._start=this.getValue(d),this._end=a,this._startTime=d,this._endTime=d+v}}const Po={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class ec extends i.A{constructor(a,d,v,S){const{point:E,lngLat:R,originalEvent:O,target:B}=a;super(a.type,{point:E,lngLat:R,originalEvent:O,target:B}),this.preventDefault=()=>{a.preventDefault()},this.id=d,this.interaction=v,this.feature=S}}class Rl{constructor(a){this.map=a,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(a,d){if(this.typeById.has(a))throw new Error(`Interaction id "${a}" already exists.`);const v=d.filter;let S=d.type;v&&this.filters.set(a,i.b3(v)),S==="mouseover"&&(S="mouseenter"),S==="mouseout"&&(S="mouseleave");const E=this.interactionsByType.get(S)||new Map;S==="mouseenter"||S==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(a,d)):E.size===0&&this.map.on(S,this.handleType),E.size===0&&this.interactionsByType.set(S,E),E.set(a,d),this.typeById.set(a,S)}get(a){const d=this.typeById.get(a);if(!d)return;const v=this.interactionsByType.get(d);return v?v.get(a):void 0}remove(a){const d=this.typeById.get(a);if(!d)return;this.typeById.delete(a),this.filters.delete(a);const v=this.interactionsByType.get(d);v&&(v.delete(a),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(a),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):v.size===0&&this.map.off(d,this.handleType))}queryTargets(a,d){const v=[];for(const[S,E]of d)E.target&&v.push({targetId:S,target:E.target,filter:this.filters.get(S)});return this.map.style.queryRenderedTargets(a,v,this.map.transform)}handleMove(a){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(a.point,Array.from(this.delegatedInteractions).reverse());d.length&&(a.type="mouseenter",this.handleType(a,d));const v=new Map;for(const[S,{feature:E}]of this.prevHoveredFeatures)this.hoveredFeatures.has(S)||v.set(E.id,E);v.size&&(a.type="mouseleave",this.handleType(a,Array.from(v.values())))}handleOut(a){const d=Array.from(this.hoveredFeatures.values()).map(({feature:v})=>v);d.length&&(a.type="mouseleave",this.handleType(a,d)),this.hoveredFeatures.clear()}handleType(a,d){const v=Array.from(this.interactionsByType.get(a.type)).reverse(),S=!!d;d=d||this.queryTargets(a.point,v);const E=a.type==="mouseenter";let R=!1;const O=new Set;for(const B of d){for(const[H,Y]of v){if(!Y.target)continue;const J=B.variants?B.variants[H]:null;if(J){for(const Q of J){if(zf(Q,B,O,H))continue;const ie=new i.df(B,Q),pe=xh(Q,B,H);S&&(ie.state=this.map.getFeatureState(ie));const de=E?this.prevHoveredFeatures.get(pe):null,ge=new ec(a,H,Y,ie),fe=de?de.stop:Y.handler(ge);if(E&&this.hoveredFeatures.set(pe,{feature:B,stop:fe}),fe!==!1){R=!0;break}}if(R)break}}if(R)break}if(!R)for(const[B,H]of v){const{handler:Y,target:J}=H;if(!J&&Y(new ec(a,B,H,null))!==!1)break}}}function fp(y,a){if(Array.isArray(y)&&Array.isArray(a)){const d=new Set(y),v=new Set(a);return d.size===v.size&&y.every(S=>v.has(S))}return i.bv(y,a)}const ix={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},ox={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dl{constructor(a,d,v=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Xm({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,v&&(this.mousePitch=new zd({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),i.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(a,d){this.mouseRotate.mousedown(a,d),this.mousePitch&&this.mousePitch.mousedown(a,d),K()}move(a,d){const v=this.map,S=this.mouseRotate.mousemoveWindow(a,d),E=S&&S.bearingDelta;if(E&&v.setBearing(v.getBearing()+E),this.mousePitch){const R=this.mousePitch.mousemoveWindow(a,d),O=R&&R.pitchDelta;O&&v.setPitch(v.getPitch()+O)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ee(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(i.l({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),ye(this.element,a)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,ye(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_e(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=_e(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function u_(y,a,d){if(y=new i.cd(y.lng,y.lat),a){const v=new i.cd(y.lng-360,y.lat),S=new i.cd(y.lng+360,y.lat),E=360*Math.ceil(Math.abs(y.lng-d.center.lng)/360),R=d.locationPoint3D(y).distSqr(a),O=a.x<0||a.y<0||a.x>d.width||a.y>d.height;d.locationPoint3D(v).distSqr(a)<R&&(O||Math.abs(v.lng-d.center.lng)<E)?y=v:d.locationPoint3D(S).distSqr(a)<R&&(O||Math.abs(S.lng-d.center.lng)<E)&&(y=S)}for(;Math.abs(y.lng-d.center.lng)>180;){const v=d.locationPoint3D(y);if(v.x>=0&&v.y>=0&&v.x<=d.width&&v.y<=d.height)break;y.lng>d.center.lng?y.lng-=360:y.lng+=360}return y}const pp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Ma={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Fo extends i.E{constructor(a,d){super(),(a instanceof HTMLElement||d)&&(a=i.l({element:a},d)),i.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:v="center",color:S="#3FB1CE",scale:E=1,draggable:R=!1,clickTolerance:O=0,rotation:B=Ma.rotation,rotationAlignment:H=Ma.rotationAlignment,pitchAlignment:Y=Ma.pitchAlignment,occludedOpacity:J=Ma.occludedOpacity,altitude:Q=Ma.altitude}=a||{};this._anchor=v,this._color=S,this._scale=E,this._draggable=R,this._clickTolerance=O,this._rotation=B,this._rotationAlignment=H,this._pitchAlignment=Y,this._occludedOpacity=J,this._altitude=Q,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),a&&a.element?(this._element=a.element,this._offset=i.P.convert(a&&a.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=i.P.convert(a&&a.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",de=>{de.preventDefault()}),this._element.addEventListener("mousedown",de=>{de.preventDefault()});const ie=this._element.classList;for(const de in pp)ie.remove(`mapboxgl-marker-anchor-${de}`);ie.add(`mapboxgl-marker-anchor-${this._anchor}`);const pe=a&&a.className?a.className.trim().split(/\s+/):[];ie.add(...pe),this._popup=null}_createDefaultMarker(){const a=F("div"),d=j("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},a);if(this._altitude===0){const v=j("radialGradient",{id:"shadowGradient"},j("defs",{},d));j("stop",{offset:"10%","stop-opacity":.4},v),j("stop",{offset:"100%","stop-opacity":.05},v),j("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return j("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),j("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),j("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),a}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=i.cd.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(a){return a===this._altitude||(this._defaultMarker&&(this._altitude===0&&a!==0||this._altitude!==0&&a===0)&&(this._element=this._createDefaultMarker()),this._altitude=a||Ma.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,a._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const d=a.code,v=a.charCode||a.keyCode;d!=="Space"&&d!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(a){const d=a.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,d=this._pos;if(!a||!d)return!1;const v=a.unproject(d,this._altitude),S=a.getFreeCameraOptions();if(!S.position)return!1;const E=S.position.toLngLat();return E.distanceTo(v)<.9*E.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const d=this._pos;if(!d||d.x<0||d.x>a.transform.width||d.y<0||d.y>a.transform.height)return void this._clearFadeTimer();const v=a.unproject(d,this._altitude);let S;a._showingGlobe()&&i.eK(a.transform,this._lngLat)?S=0:(S=1-a._queryFogOpacity(v),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${pp[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const a=this._pos,d=this._map,v=this.getPitchAlignment();if(!d||!a||v!=="map")return"";if(!d._showingGlobe()){const B=d.getPitch();return B?`rotateX(${B}deg)`:""}const S=i.cJ(i.eL(d.transform,this._lngLat)),E=a.sub(i.eM(d.transform)),R=Math.abs(E.x)+Math.abs(E.y);if(R===0)return"";const O=S/R;return`rotateX(${-E.y*O}deg) rotateY(${E.x*O}deg)`}_calculateZTransform(){const a=this._pos,d=this._map;if(!d||!a)return"";let v=0;const S=this.getRotationAlignment();if(S==="map")if(d._showingGlobe()){const E=d.project(new i.cd(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),R=d.project(new i.cd(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(E);v=i.cJ(Math.atan2(R.y,R.x))-90}else v=-d.getBearing();else if(S==="horizon"){const E=i.af(4,6,d.getZoom()),R=i.eM(d.transform);R.y+=E*d.transform.height;const O=a.sub(R),B=i.cJ(Math.atan2(O.y,O.x));v=(B>90?B-270:B+90)*(1-E)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(a){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=u_(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),a===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=i.P.convert(a),this._update(),this}addClassName(a){return this._element.classList.add(a),this}removeClassName(a){return this._element.classList.remove(a),this}toggleClassName(a){return this._element.classList.toggle(a)}_onMove(a){const d=this._map;if(!d)return;const v=this._pointerdownPos,S=this._positionDelta;if(v&&S){if(!this._isDragging){const E=this._clickTolerance||d._clickTolerance;if(a.point.dist(v)<E)return;this._isDragging=!0}this._pos=a.point.sub(S),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.A("dragstart"))),this.fire(new i.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.A("dragend")),this._state="inactive"}_addDragHandler(a){const d=this._map,v=this._pos;d&&v&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(v),this._pointerdownPos=a.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const d=this._map;return d&&(a?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||Ma.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||Ma.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||Ma.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||Ma.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Km={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},mp={maxWidth:100,unit:"metric"},au={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Wa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},Zs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $u(y=new i.P(0,0),a="bottom"){if(typeof y=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(a){case"top":return new i.P(0,y);case"top-left":return new i.P(d,d);case"top-right":return new i.P(-d,d);case"bottom":return new i.P(0,-y);case"bottom-left":return new i.P(d,-d);case"bottom-right":return new i.P(-d,-d);case"left":return new i.P(y,0);case"right":return new i.P(-y,0)}return new i.P(0,0)}return y instanceof i.P||Array.isArray(y)?i.P.convert(y):i.P.convert(y[a]||[0,0])}return{version:g,supported:I.supported,setRTLTextPlugin:i.eN,getRTLTextPluginStatus:i.eO,Map:class extends c_{constructor(y){T.mark(w.create);const a=y;if((y=i.l({},ix,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&i.eI(window)&&(y.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ph(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies,null,null),y),this._repaint=!!y.repaint,this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new Jl,this._domRenderTaskQueue=new Jl,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.a$(),this._locale=i.l({},Po,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._tessellationStep=y.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=y.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Zm(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=y.scaleFactor,this._requestManager=new Re(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,this._contextCreateOptions=y.contextCreateOptions?Object.assign({},y.contextCreateOptions):{},typeof y.container=="string"){const d=document.getElementById(y.container);if(!d)throw new Error(`Container '${y.container.toString()}' not found.`);this._container=d}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._spriteFormat=y.spriteFormat,i.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Gm),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new l_(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,(y.style||!y.testMode)&&this.setStyle(y.style||i.e.DEFAULT_STYLE,{config:y.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this.indoor=new Wg(this),y.hash&&(this._hash=new Jh(typeof y.hash=="string"&&y.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){a.center==null&&a.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch});const d=y.bounds;d&&(this.resize(),this.fitBounds(d,i.l({},y.fitBoundsOptions,{duration:0})))}this.resize(),y.attributionControl&&this.addControl(new hp({customAttribution:y.customAttribution})),this._logoControl=new jd,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new i.A(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new i.A(`${d.dataType}dataloading`,d))}),this._interactions=new Rl(this)}_getMapId(){return this._mapId}addControl(y,a){if(a===void 0&&(a=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new i.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=y.onAdd(this);this._controls.push(y);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new i.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(y);return a>-1&&this._controls.splice(a,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new i.A("movestart",y)).fire(new i.A("move",y)),this.fire(new i.A("resize",y)),a&&this.fire(new i.A("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(i.aG.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new i.A("zoomstart")).fire(new i.A("zoom")).fire(new i.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new i.A("zoomstart")).fire(new i.A("zoom")).fire(new i.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new i.A("pitchstart")).fire(new i.A("pitch")).fire(new i.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new i.A("pitchstart")).fire(new i.A("pitch")).fire(new i.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(y){return this._scaleFactor=y,this.painter.scaleFactor=y,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(a=>a.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(a=>a==="auto"?navigator.language:a):y}setLanguage(y){const a=this._parseLanguage(y);if(!this.style||a===this._language)return this;this._language=a,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,a=y.projection.name;let d;a==="globe"&&y.zoom>=i.cx?(y.setMercatorFromTransition(),d=!0):a==="mercator"&&y.zoom<i.cx&&(y.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,a){return this._updateProjection(y||a||{name:"mercator"})}_updateProjection(y){let a;return a=y.name==="globe"&&this.transform.zoom>=i.cx?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),a&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(y,a){return this.transform.locationPoint3D(i.cd.convert(y),a)}unproject(y,a){return this.transform.pointLocation3D(i.P.convert(y),a)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,a,d){const v=S=>{let E=[];if(Array.isArray(a)){const R=a.filter(O=>this.getLayer(O));E=R.length?this.queryRenderedFeatures(S,{layers:R}):[]}else E=this.queryRenderedFeatures(S,{target:a});return E};if(y==="mouseenter"||y==="mouseover"){let S=!1;return{listener:d,targets:a,delegates:{mousemove:R=>{const O=v(R.point);O.length?S||(S=!0,d.call(this,new Aa(y,this,R.originalEvent,{features:O}))):S=!1},mouseout:()=>{S=!1}}}}if(y==="mouseleave"||y==="mouseout"){let S=!1;return{listener:d,targets:a,delegates:{mousemove:O=>{v(O.point).length?S=!0:S&&(S=!1,d.call(this,new Aa(y,this,O.originalEvent)))},mouseout:O=>{S&&(S=!1,d.call(this,new Aa(y,this,O.originalEvent)))}}}}{const S=E=>{const R=v(E.point);R.length&&(E.features=R,d.call(this,E),delete E.features)};return{listener:d,targets:a,delegates:{[y]:S}}}}on(y,a,d){if(typeof a=="function"||d===void 0)return super.on(y,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const v=this._createDelegatedListener(y,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(v);for(const S in v.delegates)this.on(S,v.delegates[S]);return this}once(y,a,d){if(typeof a=="function"||d===void 0)return super.once(y,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const v=this._createDelegatedListener(y,a,d);for(const S in v.delegates)this.once(S,v.delegates[S]);return this}off(y,a,d){if(typeof a=="function"||d===void 0)return super.off(y,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const v=this._delegatedListeners?this._delegatedListeners[y]:void 0;return v&&(S=>{for(let E=0;E<S.length;E++){const R=S[E];if(R.listener===d&&fp(R.targets,a)){for(const O in R.delegates)this.off(O,R.delegates[O]);return S.splice(E,1),this}}})(v),this}queryRenderedFeatures(y,a){if(!this.style)return[];if(y===void 0||y instanceof i.P||Array.isArray(y)||a!==void 0||(a=y,y=void 0),y=y||[[0,0],[this.transform.width,this.transform.height]],!a){const E=this.style.queryRenderedFeatures(y,void 0,this.transform),R=this.style.queryRenderedFeatureset(y,void 0,this.transform);return E.concat(R)}let d=!0;if(a.target&&(d=this._isTargetValid(a.target),d&&!a.layers))return this.style.queryRenderedFeatureset(y,a,this.transform);let v=!0;if(a.layers&&Array.isArray(a.layers)){for(const E of a.layers)if(!this._isValidId(E)){v=!1;break}if(v&&!a.target)return this.style.queryRenderedFeatures(y,a,this.transform)}let S=[];return v&&(S=S.concat(this.style.queryRenderedFeatures(y,a,this.transform))),d&&(S=S.concat(this.style.queryRenderedFeatureset(y,a,this.transform))),S}querySourceFeatures(y,a){return!y||typeof y=="string"&&!this._isValidId(y)?[]:this.style.querySourceFeatures(y,a)}isPointOnSurface(y){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&i.w(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(y))}addInteraction(y,a){return this._interactions.add(y,a),this}removeInteraction(y){return this._interactions.remove(y),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this}setStyle(y,a){return a=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a),this.style&&y&&a.diff!==!1&&a.localFontFamily===this._localFontFamily&&a.localIdeographFontFamily===this._localIdeographFontFamily&&!a.config?(this.style._diffStyle(y,(d,v)=>{if(d){const S=typeof d=="string"?d:d instanceof Error?d.message:d.error;i.w(`Unable to perform style diff: ${S}. Rebuilding the style from scratch.`),this._updateStyle(y,a)}else v&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(y,a))}_getUIString(y){const a=this._locale[y];if(a==null)throw new Error(`Missing UI string '${y}'`);return a}_updateStyle(y,a){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y){const d=i.l({},a);a&&a.config&&(d.initialConfig=a.config,delete d.config),this.style=new El(this,d).load(y),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new El(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(y){return y==null?(this.fire(new i.z(new Error("IDs can't be empty."))),!1):!i.d9(y)||(this.fire(new i.z(new Error(`IDs can't contain special symbols: "${y}".`))),!1)}_isTargetValid(y){return"featuresetId"in y?this._isValidId("importId"in y?y.importId:y.featuresetId):"layerId"in y&&this._isValidId(y.layerId)}_areTargetsValid(y){if(Array.isArray(y)){for(const a of y)if(!this._isValidId(a))return!1;return!0}return this._isTargetValid(y)}addSource(y,a){return this._isValidId(y)?(this._lazyInitEmptyStyle(),this.style.addSource(y,a),this._update(!0)):this}isSourceLoaded(y){return!!this._isValidId(y)&&!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(y,a,d){this._lazyInitEmptyStyle(),this.style.addSourceType(y,a,d)}removeSource(y){return this._isValidId(y)?(this.style.removeSource(y),this._updateTerrain(),this._update(!0)):this}getSource(y){return this._isValidId(y)?this.style.getOwnSource(y):null}addImage(y,a,{pixelRatio:d=1,sdf:v=!1,stretchX:S,stretchY:E,content:R}={}){this._lazyInitEmptyStyle();const O=i.I.from(y);if(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap){const{width:B,height:H,data:Y}=i.q.getImageData(a);this.style.addImage(O,{data:new i.r({width:B,height:H},Y),pixelRatio:d,stretchX:S,stretchY:E,content:R,sdf:v,version:0,usvg:!1})}else if(a.width===void 0||a.height===void 0)this.fire(new i.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:B,height:H}=a,Y=a;this.style.addImage(O,{data:new i.r({width:B,height:H},new Uint8Array(Y.data)),pixelRatio:d,stretchX:S,stretchY:E,content:R,sdf:v,usvg:!1,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,y)}}updateImage(y,a){this._lazyInitEmptyStyle();const d=i.I.from(y),v=this.style.getImage(d);if(!v)return void this.fire(new i.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap?i.q.getImageData(a):a,{width:E,height:R,data:O}=S;if(E===void 0||R===void 0)return void this.fire(new i.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==(v.usvg?v.icon.usvg_tree.width:v.data.width)||R!==(v.usvg?v.icon.usvg_tree.height:v.data.height))return void this.fire(new i.z(new Error(`The width and height of the updated image (${E}, ${R})
                must be that same as the previous version of the image
                (${v.data.width}, ${v.data.height})`)));const B=!(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap);let H=!1;v.usvg?(v.data=new i.r({width:E,height:R},new Uint8Array(O)),v.usvg=!1,v.icon=void 0,H=!0):v.data.replace(O,B),this.style.updateImage(d,v,H)}hasImage(y){return y?!!this.style&&!!this.style.getImage(i.I.from(y)):(this.fire(new i.z(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(i.I.from(y))}loadImage(y,a){i.o(this._requestManager.transformRequest(y,i.R.Image),(d,v)=>{a(d,v instanceof HTMLImageElement?i.q.getImageData(v):v)})}listImages(){return this.style.listImages().map(y=>y.name)}addModel(y,a){this._lazyInitEmptyStyle(),this.style.addModel(y,a)}hasModel(y){return y?this.style.hasModel(y):(this.fire(new i.z(new Error("Missing required model id"))),!1)}removeModel(y){this.style.removeModel(y)}listModels(){return this.style.listModels()}addLayer(y,a){return this._isValidId(y.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(y,a),this._update(!0)):this}getSlot(y){const a=this.getLayer(y);return a&&a.slot||null}setSlot(y,a){return this.style.setSlot(y,a),this.style.mergeLayers(),this._update(!0)}addImport(y,a){return this.style.addImport(y,a).catch(d=>this.fire(new i.z(new Error("Failed to add import",d)))),this}updateImport(y,a){return typeof a!="string"&&a.id!==y?(this.removeImport(y),this.addImport(a)):(this.style.updateImport(y,a),this._update(!0))}removeImport(y){return this.style.removeImport(y),this}moveImport(y,a){return this.style.moveImport(y,a),this._update(!0)}moveLayer(y,a){return this._isValidId(y)?(this.style.moveLayer(y,a),this._update(!0)):this}removeLayer(y){return this._isValidId(y)?(this.style.removeLayer(y),this._update(!0)):this}getLayer(y){if(!this._isValidId(y))return null;const a=this.style.getOwnLayer(y);return a?a.type==="custom"?a.implementation:a.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(y,a,d){return this._isValidId(y)?(this.style.setLayerZoomRange(y,a,d),this._update(!0)):this}setFilter(y,a,d={}){return this._isValidId(y)?(this.style.setFilter(y,a,d),this._update(!0)):this}getFilter(y){return this._isValidId(y)?this.style.getFilter(y):null}setPaintProperty(y,a,d,v={}){return this._isValidId(y)?(this.style.setPaintProperty(y,a,d,v),this._update(!0)):this}getPaintProperty(y,a){return this._isValidId(y)?this.style.getPaintProperty(y,a):null}setLayoutProperty(y,a,d,v={}){return this._isValidId(y)?(this.style.setLayoutProperty(y,a,d,v),this._update(!0)):this}getLayoutProperty(y,a){return this._isValidId(y)?this.style.getLayoutProperty(y,a):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(y){return this.style.setGlyphsUrl(y),this._update(!0)}getSchema(y){return this.style.getSchema(y)}setSchema(y,a){return this.style.setSchema(y,a),this._update(!0)}getConfig(y){return this.style.getConfig(y)}setConfig(y,a){return this.style.setConfig(y,a),this._update(!0)}getConfigProperty(y,a){return this.style.getConfigProperty(y,a)}setConfigProperty(y,a,d){return this.style.setConfigProperty(y,a,d),this._update(!0)}getFeaturesetDescriptors(y){return this.style.getFeaturesetDescriptors(y)}setLights(y){if(this._lazyInitEmptyStyle(),y&&y.length===1&&y[0].type==="flat"){const a=y[0];a.properties?this.style.setFlatLight(a.properties,a.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(y),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const y=this.style.getLights()||[];return y.length===0&&y.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),y}setLight(y,a={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:y}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(y){return this._lazyInitEmptyStyle(),this.style.setSnow(y),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(y){return this._lazyInitEmptyStyle(),this.style.setRain(y),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(y){return this._lazyInitEmptyStyle(),this.style.setColorTheme(y),this._update(!0)}setImportColorTheme(y,a){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(y,a),this._update(!0)}setCamera(y){return this.style.setCamera(y),this._triggerCameraUpdate(y)}_triggerCameraUpdate(y){return this._update(this.transform.setOrthographicProjectionAtLowPitch(y["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.cd.convert(y),this.transform):0}setFeatureState(y,a){return y.source&&!this._isValidId(y.source)?this:(this.style.setFeatureState(y,a),this._update())}removeFeatureState(y,a){return y.source&&!this._isValidId(y.source)?this:(this.style.removeFeatureState(y,a),this._update())}getFeatureState(y){return y.source&&!this._isValidId(y.source)?null:this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let d,v,S,E=this._container;for(;E&&(!v||!S);){const R=window.getComputedStyle(E).transform;R&&R!=="none"&&(d=R.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(v=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(S=d[3])),E=E.parentElement}this._containerWidth=v?Math.abs(y/v):y,this._containerHeight=S?Math.abs(a/S):a}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=F("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=F("div","mapboxgl-canvas-container",y);this._canvas=F("canvas","mapboxgl-canvas",a),this._interactive&&(a.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=F("div","mapboxgl-control-container",y),v=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(S=>{v[S]=F("div",`mapboxgl-ctrl-${S}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,a){const d=i.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(y),this._canvas.height=d*Math.ceil(a),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${a}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const a=this._markers.indexOf(y);a!==-1&&this._markers.splice(a,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const a=this._popups.indexOf(y);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const y=i.l({},I.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl2",y);a?(fn(a,!0),this.painter=new Qh(a,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(a)):this.fire(new i.z(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.A("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new i.A("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let a;this.fire(new i.A("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,v=i.q.now(),S=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(a=S.createQuery(),S.beginQuery(d.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const E=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,Y=this.transform.pitch,J=i.q.now(),Q=new i.aa(H,{now:J,fadeDuration:E,pitch:Y,transition:this.style.transition});this.style.update(Q)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let R=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),R=this._updateAverageElevation(v),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):R=this._updateAverageElevation(v);const O=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),O&&(this._placementDirty=O.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,T.mark(w.load),this.fire(new i.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const H=i.q.now()-v;S.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const Y=S.getQueryParameter(a,S.QUERY_RESULT)/1e6;S.deleteQuery(a),this.fire(new i.A("gpu-timing-frame",{cpuTime:H,gpuTime:Y}))},50)}if(this.listens("gpu-timing-layer")){const H=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(H);this.fire(new i.A("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const H=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(H);this.fire(new i.A("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const B=this._sourcesDirty||this._styleDirty||this._placementDirty||R;if(B||this._repaint)this.triggerRepaint();else{const H=this.idle();if(H&&(R=this._updateAverageElevation(v,!0)),R)this.triggerRepaint();else if(this._triggerFrame(!1),H&&(this.fire(new i.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new i.A("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,T.mark(w.fullLoad),this._performanceMetricsCollection&&Rn(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const a of this._markers)y&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!y||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(y,a=!1){const d=S=>(this.transform.averageElevation=S,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const v=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(v||(a||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const S=this.transform.averageElevation;let E=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=y;const R=Math.abs(S-E);if(R>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(E),d(E);this._averageElevation.easeTo(E,y,300)}else if(R>1e-4)return this._averageElevation.jumpTo(E),d(E)}return!!this._averageElevation.isEasing(y)&&d(this._averageElevation.getValue(y))}_authenticate(){Qt(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===Ae||y.status===401)){const a=this.painter.context.gl;fn(a,!1),this._logoControl instanceof jd&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),$t(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&vt(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const d=this.painter.context.gl,v=d.createFramebuffer();function S(E){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,E,0);const R=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,R),R}return d.bindFramebuffer(d.FRAMEBUFFER,v),this._canvasPixelComparison(S(y),a.canvasCopies.map(S),a.timeStamps)}_canvasPixelComparison(y,a,d){let v=d[1]-d[0];const S=y.length/4;for(let E=0;E<a.length;E++){const R=a[E];let O=0;for(let B=0;B<R.length;B+=4)R[B]===y[B]&&R[B+1]===y[B+1]&&R[B+2]===y[B+2]&&R[B+3]===y[B+3]&&(O+=1);v+=(d[E+2]-d[E+1])*(1-O/S)}return v}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Jt.delete(this.painter.context.gl),yn.remove(),wt.remove(),this._removed=!0,this.fire(new i.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=i.q.frame(a=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(a)}))}_preloadTiles(y){const a=this.style?this.style.getSourceCaches():[];return i.bt(a,(d,v)=>d._preloadTiles(y,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(y){this._showParseStatus!==y&&(this._showParseStatus=y,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(y){this._showLayers2DWireframe!==y&&(this._showLayers2DWireframe=y,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(y){this._showLayers3DWireframe!==y&&(this._showLayers3DWireframe=y,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,this._tp.refreshUI(),y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,this._tp.refreshUI(),y&&this._update())}_setCacheLimits(y,a){i.eJ(y,a)}get version(){return g}},NavigationControl:class{constructor(y={}){this.options=i.l({},ox,y),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(i.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),F("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),F("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:a}):d.resetNorth({},{originalEvent:a}))}),this._compassIcon=F("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const a=y.getZoom(),d=a===y.getMaxZoom(),v=a===y.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dl(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,a){const d=F("button",y,this._container);return d.type="button",d.addEventListener("click",a),d}_setButtonTitle(y,a){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${a}`);y.setAttribute("aria-label",d),y.firstElementChild&&y.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends i.E{constructor(y={}){super();const a=navigator.geolocation;this.options=i.l({geolocation:a},Km,y),i.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Od(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const a=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,y(d)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>a(d.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(y){const a=this._map.getMaxBounds(),d=y.coords;return!!a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new i.A("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.A("geolocate",y)),this._finish()}}_updateCamera(y){const a=new i.cd(y.coords.longitude,y.coords.latitude),d=y.coords.accuracy,v=this._map.getBearing(),S=i.l({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(d),S,{geolocateSource:!0})}_updateMarker(y){if(y){const a=new i.cd(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,a=i.c6(1,y._center.lat)*y.worldSize,d=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.A("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=F("button","mapboxgl-ctrl-geolocate",this._container),F("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","mapboxgl-user-location"),this._dotElement.appendChild(F("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(F("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Fo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=F("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.A("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:hp,ScaleControl:class{constructor(y={}){this.options=i.l({},mp,y),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,a=this._map,d=a._containerHeight/2,v=a._containerWidth/2-y/2,S=a.unproject([v,d]),E=a.unproject([v+y,d]),R=S.distanceTo(E);if(this.options.unit==="imperial"){const O=3.2808*R;O>5280?this._setScale(y,O/5280,"mile"):this._setScale(y,O,"foot")}else this.options.unit==="nautical"?this._setScale(y,R/1852,"nautical-mile"):R>=1e3?this._setScale(y,R/1e3,"kilometer"):this._setScale(y,R,"meter")}_setScale(y,a,d){this._map._requestDomTask(()=>{const v=function(E){const R=Math.pow(10,`${Math.floor(E)}`.length-1);let O=E/R;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(B){const H=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*H)/H}(O),R*O}(a),S=v/a;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(v):`${v}&nbsp;${au[d]}`,this._container.style.width=y*S+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y={}){this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:i.w("Full screen control 'container' must be a DOM element.")),i.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=F("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(y){super(),this.options=i.l(Object.create(Wa),y),this._altitude=this.options.altitude,i.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new i.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new i.A("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=i.cd.convert(y),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(y){return this._altitude=y,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const a=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=y;v=d.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=F("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(y),this.options.closeButton){const d=this._closeButton=F("button","mapboxgl-popup-close-button",a);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let a;return this._classList.delete(y)?a=!1:(this._classList.add(y),a=!0),this._updateClassList(),a}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const a=this._map,d=this._container,v=this._pos;if(!a||!d||!v)return"bottom";const S=d.offsetWidth,E=d.offsetHeight,R=v.x<S/2,O=v.x>a.transform.width-S/2;if(v.y+y<E)return R?"top-left":O?"top-right":"top";if(v.y>a.transform.height-E){if(R)return"bottom-left";if(O)return"bottom-right"}return R?"left":O?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),y.className=a.join(" ")}_update(y){const a=this._map,d=this._content;if(!a||!this._lngLat&&!this._trackPointer||!d)return;let v=this._container;if(v||(v=this._container=F("div","mapboxgl-popup",a.getContainer()),this._tip=F("div","mapboxgl-popup-tip",v),v.appendChild(d)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=u_(this._lngLat,this._pos,a.transform)),!this._trackPointer||y){const S=this._pos=this._trackPointer&&y instanceof i.P?y:a.project(this._lngLat,this._altitude),E=$u(this.options.offset),R=this._anchor=this._getAnchor(E.y),O=$u(this.options.offset,R),B=S.add(O).round();a._requestDomTask(()=>{this._container&&R&&(this._container.style.transform=`${pp[R]} translate(${B.x}px,${B.y}px)`)})}if(!this._marker&&a._showingGlobe()){const S=i.eK(a.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Zs);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Fo,Style:El,LngLat:i.cd,LngLatBounds:i.aG,Point:i.P,MercatorCoordinate:i.ac,FreeCameraOptions:Uf,Evented:i.E,config:i.e,prewarm:i.eP,clearPrewarmedResources:i.eQ,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(y){i.e.ACCESS_TOKEN=y},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(y){i.e.API_URL=y},get workerCount(){return i.eR.workerCount},set workerCount(y){i.eR.workerCount=y},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){i.e.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){i.eS(y)},get workerUrl(){return i.eT.workerUrl},set workerUrl(y){i.eT.workerUrl=y},get workerClass(){return i.eT.workerClass},set workerClass(y){i.eT.workerClass=y},get workerParams(){return i.eT.workerParams},set workerParams(y){i.eT.workerParams=y},get dracoUrl(){return i.eU()},set dracoUrl(y){i.eV(y)},get meshoptUrl(){return i.eW()},set meshoptUrl(y){i.eX(y)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var h=s;return h})}(cM)),cM.exports}var EBe=TBe();const yv=_a(EBe);var wA={},sS={},XH;function CBe(){return XH||(XH=1,sS.RADIUS=6378137,sS.FLATTENING=1/298.257223563,sS.POLAR_RADIUS=63567523142e-4),sS}var ZH;function ABe(){if(ZH)return wA;ZH=1;var e=CBe();wA.geometry=t,wA.ring=r;function t(c){var h=0,i;switch(c.type){case"Polygon":return n(c.coordinates);case"MultiPolygon":for(i=0;i<c.coordinates.length;i++)h+=n(c.coordinates[i]);return h;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)h+=t(c.geometries[i]);return h}}function n(c){var h=0;if(c&&c.length>0){h+=Math.abs(r(c[0]));for(var i=1;i<c.length;i++)h-=Math.abs(r(c[i]))}return h}function r(c){var h,i,g,w,T,A,D,k=0,I=c.length;if(I>2){for(D=0;D<I;D++)D===I-2?(w=I-2,T=I-1,A=0):D===I-1?(w=I-1,T=0,A=1):(w=D,T=D+1,A=D+2),h=c[w],i=c[T],g=c[A],k+=(s(g[0])-s(h[0]))*Math.sin(s(i[1]));k=k*e.RADIUS*e.RADIUS/2}return k}function s(c){return c*Math.PI/180}return wA}ABe();const bte={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},MBe={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},Xa={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},MD={POLYGON:"polygon",LINE:"line_string",POINT:"point"},Co={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},ya={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},vv={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},n5={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},mc={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},zl={ACTIVE:"true",INACTIVE:"false"},RBe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],DBe=-90,fB=-85,PBe=90,pB=85,IBe=-270,kBe=270,OBe=Object.freeze(Object.defineProperty({__proto__:null,LAT_MAX:PBe,LAT_MIN:DBe,LAT_RENDERED_MAX:pB,LAT_RENDERED_MIN:fB,LNG_MAX:kBe,LNG_MIN:IBe,activeStates:zl,classes:bte,cursors:Xa,events:vv,geojsonTypes:Co,interactions:RBe,meta:mc,modes:ya,sources:MBe,types:MD,updateActions:n5},Symbol.toStringTag,{value:"Module"}));function x1(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}x1.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};x1.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};x1.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};x1.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,n)=>t.v-n.v).map(t=>t.k)};x1.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};mc.FEATURE,mc.MIDPOINT,mc.VERTEX;let LBe=(e,t=21)=>(n=t)=>{let r="",s=n|0;for(;s--;)r+=e[Math.random()*e.length|0];return r};const zBe=LBe("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function wte(){return zBe()}const Yc=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||wte(),this.type=t.geometry.type};Yc.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};Yc.prototype.incomingCoords=function(e){this.setCoordinates(e)};Yc.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Yc.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};Yc.prototype.setProperty=function(e,t){this.properties[e]=t};Yc.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:Co.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};Yc.prototype.internal=function(e){const t={id:this.id,meta:mc.FEATURE,"meta:type":this.type,active:zl.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t[`user_${n}`]=this.properties[n];return{type:Co.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const fE=function(e,t){Yc.call(this,e,t)};fE.prototype=Object.create(Yc.prototype);fE.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};fE.prototype.updateCoordinate=function(e,t,n){arguments.length===3?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()};fE.prototype.getCoordinate=function(){return this.getCoordinates()};const G0=function(e,t){Yc.call(this,e,t)};G0.prototype=Object.create(Yc.prototype);G0.prototype.isValid=function(){return this.coordinates.length>1};G0.prototype.addCoordinate=function(e,t,n){this.changed();const r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])};G0.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};G0.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};G0.prototype.updateCoordinate=function(e,t,n){const r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};const rm=function(e,t){Yc.call(this,e,t),this.coordinates=this.coordinates.map(n=>n.slice(0,-1))};rm.prototype=Object.create(Yc.prototype);rm.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};rm.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};rm.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};rm.prototype.addCoordinate=function(e,t,n){this.changed();const r=e.split(".").map(c=>parseInt(c,10));this.coordinates[r[0]].splice(r[1],0,[t,n])};rm.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(r=>parseInt(r,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))};rm.prototype.getCoordinate=function(e){const t=e.split(".").map(r=>parseInt(r,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))};rm.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};rm.prototype.updateCoordinate=function(e,t,n){this.changed();const r=e.split("."),s=parseInt(r[0],10),c=parseInt(r[1],10);this.coordinates[s]===void 0&&(this.coordinates[s]=[]),this.coordinates[s][c]=[t,n]};const FBe={MultiPoint:fE,MultiLineString:G0,MultiPolygon:rm},RD=(e,t,n,r,s)=>{const c=n.split("."),h=parseInt(c[0],10),i=c[1]?c.slice(1).join("."):null;return e[h][t](i,r,s)},im=function(e,t){if(Yc.call(this,e,t),delete this.coordinates,this.model=FBe[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};im.prototype=Object.create(Yc.prototype);im.prototype._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(n=>new t(this.ctx,{id:wte(),type:Co.FEATURE,properties:{},geometry:{coordinates:n,type:this.type.replace("Multi","")}}))};im.prototype.isValid=function(){return this.features.every(e=>e.isValid())};im.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};im.prototype.getCoordinate=function(e){return RD(this.features,"getCoordinate",e)};im.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===Co.POLYGON?e.getCoordinates():e.coordinates)))};im.prototype.updateCoordinate=function(e,t,n){RD(this.features,"updateCoordinate",e,t,n),this.changed()};im.prototype.addCoordinate=function(e,t,n){RD(this.features,"addCoordinate",e,t,n),this.changed()};im.prototype.removeCoordinate=function(e){RD(this.features,"removeCoordinate",e),this.changed()};im.prototype.getFeatures=function(){return this.features};function r5(e){return function(t){const n=t.featureTarget;return!n||!n.properties?!1:n.properties.meta===e}}function BBe(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function b1(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===zl.ACTIVE&&e.featureTarget.properties.meta===mc.FEATURE}function Ste(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===zl.INACTIVE&&e.featureTarget.properties.meta===mc.FEATURE}function i5(e){return e.featureTarget===void 0}function Tte(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===mc.FEATURE}function DD(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===mc.VERTEX}function mB(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function o5(e){return e.keyCode===27}function s5(e){return e.keyCode===13}function $y(e,t){this.x=e,this.y=t}$y.prototype={clone(){return new $y(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,s=n*this.x+t*this.y;return this.x=r,this.y=s,this},_rotateAround(e,t){const n=Math.cos(e),r=Math.sin(e),s=t.x+n*(this.x-t.x)-r*(this.y-t.y),c=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=s,this.y=c,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:$y};$y.convert=function(e){if(e instanceof $y)return e;if(Array.isArray(e))return new $y(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new $y(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function a5(e,t){const n=t.getBoundingClientRect();return new $y(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function bT(e,t,n,r){return{type:Co.FEATURE,properties:{meta:mc.VERTEX,parent:e,coord_path:n,active:r?zl.ACTIVE:zl.INACTIVE},geometry:{type:Co.POINT,coordinates:t}}}function NBe(e,t,n){const r=t.geometry.coordinates,s=n.geometry.coordinates;if(r[1]>pB||r[1]<fB||s[1]>pB||s[1]<fB)return null;const c={lng:(r[0]+s[0])/2,lat:(r[1]+s[1])/2};return{type:Co.FEATURE,properties:{meta:mc.MIDPOINT,parent:e,lng:c.lng,lat:c.lat,coord_path:n.properties.coord_path},geometry:{type:Co.POINT,coordinates:[c.lng,c.lat]}}}function l5(e,t={},n=null){const{type:r,coordinates:s}=e.geometry,c=e.properties&&e.properties.id;let h=[];r===Co.POINT?h.push(bT(c,s,n,g(n))):r===Co.POLYGON?s.forEach((T,A)=>{i(T,n!==null?`${n}.${A}`:String(A))}):r===Co.LINE_STRING?i(s,n):r.indexOf(Co.MULTI_PREFIX)===0&&w();function i(T,A){let D="",k=null;T.forEach((I,F)=>{const j=A!=null?`${A}.${F}`:String(F),V=bT(c,I,j,g(j));if(t.midpoints&&k){const Z=NBe(c,k,V);Z&&h.push(Z)}k=V;const W=JSON.stringify(I);D!==W&&h.push(V),F===0&&(D=W)})}function g(T){return t.selectedPaths?t.selectedPaths.indexOf(T)!==-1:!1}function w(){const T=r.replace(Co.MULTI_PREFIX,"");s.forEach((A,D)=>{const k={type:Co.FEATURE,properties:e.properties,geometry:{type:T,coordinates:A}};h=h.concat(l5(k,t,D))})}return h}const Kp={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},{LAT_MIN:SA,LAT_MAX:TA,LAT_RENDERED_MIN:KH,LAT_RENDERED_MAX:QH,LNG_MIN:JH,LNG_MAX:e2}=OBe;function jBe(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],n=[e.geometry.coordinates].flat(t),r=n.map(i=>i[0]),s=n.map(i=>i[1]),c=i=>Math.min.apply(null,i),h=i=>Math.max.apply(null,i);return[c(r),c(s),h(r),h(s)]}function Ete(e,t){let n=SA,r=TA,s=SA,c=TA,h=e2,i=JH;e.forEach(w=>{const T=jBe(w),A=T[1],D=T[3],k=T[0],I=T[2];A>n&&(n=A),D<r&&(r=D),D>s&&(s=D),A<c&&(c=A),k<h&&(h=k),I>i&&(i=I)});const g=t;return n+g.lat>QH&&(g.lat=QH-n),s+g.lat>TA&&(g.lat=TA-s),r+g.lat<KH&&(g.lat=KH-r),c+g.lat<SA&&(g.lat=SA-c),h+g.lng<=JH&&(g.lng+=Math.ceil(Math.abs(g.lng)/360)*360),i+g.lng>=e2&&(g.lng-=Math.ceil(Math.abs(g.lng)/360)*360),g}function Cte(e,t){const n=Ete(e.map(r=>r.toGeoJSON()),t);e.forEach(r=>{const s=r.getCoordinates(),c=w=>{const T={lng:w[0]+n.lng,lat:w[1]+n.lat};return[T.lng,T.lat]},h=w=>w.map(T=>c(T)),i=w=>w.map(T=>h(T));let g;r.type===Co.POINT?g=c(s):r.type===Co.LINE_STRING||r.type===Co.MULTI_POINT?g=s.map(c):r.type===Co.POLYGON||r.type===Co.MULTI_LINE_STRING?g=s.map(h):r.type===Co.MULTI_POLYGON&&(g=s.map(i)),r.incomingCoords(g)})}const gs={};gs.onSetup=function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(n=>this.getFeature(n)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};gs.fireUpdate=function(){this.fire(vv.UPDATE,{action:n5.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};gs.fireActionable=function(){const e=this.getSelected(),t=e.filter(c=>this.isInstanceOf("MultiFeature",c));let n=!1;if(e.length>1){n=!0;const c=e[0].type.replace("Multi","");e.forEach(h=>{h.type.replace("Multi","")!==c&&(n=!1)})}const r=t.length>0,s=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:r,trash:s})};gs.getUniqueIds=function(e){return e.length?e.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,r)=>(n.add(r),n),new x1).values():[]};gs.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};gs.onStop=function(){Kp.enable(this)};gs.onMouseMove=function(e,t){return Tte(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};gs.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};gs.onTap=gs.onClick=function(e,t){if(i5(t))return this.clickAnywhere(e,t);if(r5(mc.VERTEX)(t))return this.clickOnVertex(e,t);if(Tte(t))return this.clickOnFeature(e,t)};gs.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(n=>this.doRender(n))),Kp.enable(this),this.stopExtendedInteractions(e)};gs.clickOnVertex=function(e,t){this.changeMode(ya.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:Xa.MOVE})};gs.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};gs.clickOnFeature=function(e,t){Kp.disable(this),this.stopExtendedInteractions(e);const n=mB(t),r=this.getSelectedIds(),s=t.featureTarget.properties.id,c=this.isSelected(s);if(!n&&c&&this.getFeature(s).type!==Co.POINT)return this.changeMode(ya.DIRECT_SELECT,{featureId:s});c&&n?(this.deselect(s),this.updateUIClasses({mouse:Xa.POINTER}),r.length===1&&Kp.enable(this)):!c&&n?(this.select(s),this.updateUIClasses({mouse:Xa.MOVE})):!c&&!n&&(r.forEach(h=>this.doRender(h)),this.setSelected(s),this.updateUIClasses({mouse:Xa.MOVE})),this.doRender(s)};gs.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),b1(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&BBe(t))return this.startBoxSelect(e,t)};gs.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=a5(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};gs.onTouchStart=function(e,t){if(b1(t))return this.startOnActiveFeature(e,t)};gs.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};gs.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:Xa.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(bte.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=a5(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),s=Math.max(e.boxSelectStartLocation.x,n.x),c=Math.min(e.boxSelectStartLocation.y,n.y),h=Math.max(e.boxSelectStartLocation.y,n.y),i=`translate(${r}px, ${c}px)`;e.boxSelectElement.style.transform=i,e.boxSelectElement.style.WebkitTransform=i,e.boxSelectElement.style.width=`${s-r}px`,e.boxSelectElement.style.height=`${h-c}px`};gs.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Cte(this.getSelected(),n),e.dragMoveLocation=t.lngLat};gs.onTouchEnd=gs.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,a5(t.originalEvent,this.map.getContainer())],r=this.featuresAt(null,n,"click"),s=this.getUniqueIds(r).filter(c=>!this.isSelected(c));s.length&&(this.select(s),s.forEach(c=>this.doRender(c)),this.updateUIClasses({mouse:Xa.MOVE}))}this.stopExtendedInteractions(e)};gs.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?zl.ACTIVE:zl.INACTIVE,n(t),this.fireActionable(),!(t.properties.active!==zl.ACTIVE||t.geometry.type===Co.POINT)&&l5(t).forEach(n)};gs.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};gs.onCombineFeatures=function(){const e=this.getSelected();if(e.length===0||e.length<2)return;const t=[],n=[],r=e[0].type.replace("Multi","");for(let s=0;s<e.length;s++){const c=e[s];if(c.type.replace("Multi","")!==r)return;c.type.includes("Multi")?c.getCoordinates().forEach(h=>{t.push(h)}):t.push(c.getCoordinates()),n.push(c.toGeoJSON())}if(n.length>1){const s=this.newFeature({type:Co.FEATURE,properties:n[0].properties,geometry:{type:`Multi${r}`,coordinates:t}});this.addFeature(s),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([s.id]),this.fire(vv.COMBINE_FEATURES,{createdFeatures:[s.toGeoJSON()],deletedFeatures:n})}this.fireActionable()};gs.onUncombineFeatures=function(){const e=this.getSelected();if(e.length===0)return;const t=[],n=[];for(let r=0;r<e.length;r++){const s=e[r];this.isInstanceOf("MultiFeature",s)&&(s.getFeatures().forEach(c=>{this.addFeature(c),c.properties=s.properties,t.push(c.toGeoJSON()),this.select([c.id])}),this.deleteFeature(s.id,{silent:!0}),n.push(s.toGeoJSON()))}t.length>1&&this.fire(vv.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const Ate=r5(mc.VERTEX),Mte=r5(mc.MIDPOINT),ys={};ys.fireUpdate=function(){this.fire(vv.UPDATE,{action:n5.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};ys.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};ys.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};ys.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};ys.onVertex=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);!mB(t)&&r===-1?e.selectedCoordPaths=[n.coord_path]:mB(t)&&r===-1&&e.selectedCoordPaths.push(n.coord_path);const s=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(s)};ys.onMidpoint=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]};ys.pathsToCoordinates=function(e,t){return t.map(n=>({feature_id:e,coord_path:n}))};ys.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};ys.dragFeature=function(e,t,n){Cte(this.getSelected(),n),e.dragMoveLocation=t.lngLat};ys.dragVertex=function(e,t,n){const r=e.selectedCoordPaths.map(h=>e.feature.getCoordinate(h)),s=r.map(h=>({type:Co.FEATURE,properties:{},geometry:{type:Co.POINT,coordinates:h}})),c=Ete(s,n);for(let h=0;h<r.length;h++){const i=r[h];e.feature.updateCoordinate(e.selectedCoordPaths[h],i[0]+c.lng,i[1]+c.lat)}};ys.clickNoTarget=function(){this.changeMode(ya.SIMPLE_SELECT)};ys.clickInactive=function(){this.changeMode(ya.SIMPLE_SELECT)};ys.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};ys.onSetup=function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===Co.POINT)throw new TypeError("direct_select mode doesn't handle point features");const r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),Kp.disable(this),this.setActionableState({trash:!0}),r};ys.onStop=function(){Kp.enable(this),this.clearSelectedCoordinates()};ys.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=zl.ACTIVE,n(t),l5(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=zl.INACTIVE,n(t)),this.fireActionable(e)};ys.onTrash=function(e){e.selectedCoordPaths.sort((t,n)=>n.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(ya.SIMPLE_SELECT,{}))};ys.onMouseMove=function(e,t){const n=b1(t),r=Ate(t),s=Mte(t),c=e.selectedCoordPaths.length===0;return n&&c?this.updateUIClasses({mouse:Xa.MOVE}):r&&!c?this.updateUIClasses({mouse:Xa.MOVE}):this.updateUIClasses({mouse:Xa.NONE}),(r||n||s)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};ys.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};ys.onTouchStart=ys.onMouseDown=function(e,t){if(Ate(t))return this.onVertex(e,t);if(b1(t))return this.onFeature(e,t);if(Mte(t))return this.onMidpoint(e,t)};ys.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat};ys.onClick=function(e,t){if(i5(t))return this.clickNoTarget(e,t);if(b1(t))return this.clickActiveFeature(e,t);if(Ste(t))return this.clickInactive(e,t);this.stopDragging(e)};ys.onTap=function(e,t){if(i5(t))return this.clickNoTarget(e,t);if(b1(t))return this.clickActiveFeature(e,t);if(Ste(t))return this.clickInactive(e,t)};ys.onTouchEnd=ys.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const Lg={};Lg.onSetup=function(){const e=this.newFeature({type:Co.FEATURE,properties:{},geometry:{type:Co.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Xa.ADD}),this.activateUIButton(MD.POINT),this.setActionableState({trash:!0}),{point:e}};Lg.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT)};Lg.onTap=Lg.onClick=function(e,t){this.updateUIClasses({mouse:Xa.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(vv.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.point.id]})};Lg.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};Lg.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.point.id;if(t.properties.active=r?zl.ACTIVE:zl.INACTIVE,!r)return n(t)};Lg.onTrash=Lg.stopDrawingAndRemove;Lg.onKeyUp=function(e,t){if(o5(t)||s5(t))return this.stopDrawingAndRemove(e,t)};function gB(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}const Qp={};Qp.onSetup=function(){const e=this.newFeature({type:Co.FEATURE,properties:{},geometry:{type:Co.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Kp.disable(this),this.updateUIClasses({mouse:Xa.ADD}),this.activateUIButton(MD.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};Qp.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&gB(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:Xa.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};Qp.clickOnVertex=function(e){return this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};Qp.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),DD(t)&&this.updateUIClasses({mouse:Xa.POINTER})};Qp.onTap=Qp.onClick=function(e,t){return DD(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};Qp.onKeyUp=function(e,t){o5(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT)):s5(t)&&this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};Qp.onStop=function(e){this.updateUIClasses({mouse:Xa.NONE}),Kp.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(vv.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT,{},{silent:!0})))};Qp.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.polygon.id;if(t.properties.active=r?zl.ACTIVE:zl.INACTIVE,!r)return n(t);if(t.geometry.coordinates.length===0)return;const s=t.geometry.coordinates[0].length;if(!(s<3)){if(t.properties.meta=mc.FEATURE,n(bT(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),s>3){const c=t.geometry.coordinates[0].length-3;n(bT(e.polygon.id,t.geometry.coordinates[0][c],`0.${c}`,!1))}if(s<=4){const c=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:Co.FEATURE,properties:t.properties,geometry:{coordinates:c,type:Co.LINE_STRING}}),s===3)return}return n(t)}};Qp.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT)};const Jp={};Jp.onSetup=function(e){e=e||{};const t=e.featureId;let n,r,s="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let c=e.from;if(c&&c.type==="Feature"&&c.geometry&&c.geometry.type==="Point"&&(c=c.geometry),c&&c.type==="Point"&&c.coordinates&&c.coordinates.length===2&&(c=c.coordinates),!c||!Array.isArray(c))throw new Error("Please use the `from` property to indicate which point to continue the line from");const h=n.coordinates.length-1;if(n.coordinates[h][0]===c[0]&&n.coordinates[h][1]===c[1])r=h+1,n.addCoordinate(r,...n.coordinates[h]);else if(n.coordinates[0][0]===c[0]&&n.coordinates[0][1]===c[1])s="backwards",r=0,n.addCoordinate(r,...n.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else n=this.newFeature({type:Co.FEATURE,properties:{},geometry:{type:Co.LINE_STRING,coordinates:[]}}),r=0,this.addFeature(n);return this.clearSelectedFeatures(),Kp.disable(this),this.updateUIClasses({mouse:Xa.ADD}),this.activateUIButton(MD.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:r,direction:s}};Jp.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&gB(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&gB(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:Xa.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};Jp.clickOnVertex=function(e){return this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.line.id]})};Jp.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),DD(t)&&this.updateUIClasses({mouse:Xa.POINTER})};Jp.onTap=Jp.onClick=function(e,t){if(DD(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};Jp.onKeyUp=function(e,t){s5(t)?this.changeMode(ya.SIMPLE_SELECT,{featureIds:[e.line.id]}):o5(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT))};Jp.onStop=function(e){Kp.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(vv.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT,{},{silent:!0})))};Jp.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(ya.SIMPLE_SELECT)};Jp.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.line.id;if(t.properties.active=r?zl.ACTIVE:zl.INACTIVE,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=mc.FEATURE,n(bT(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),n(t))};ya.SIMPLE_SELECT;yv.accessToken="YOUR_MAPBOX_ACCESS_TOKEN";const VBe=Es($.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),UBe=({project:e})=>{const[t,n]=St.useState(null),r=!!t,s=iv(),c=g=>n(g.currentTarget),h=()=>n(null),i=()=>{s("1")};return $.jsxs(y0,{elevation:3,sx:{position:"relative",width:250,borderRadius:3,overflow:"hidden",cursor:"pointer",transition:"0.3s","&:hover":{boxShadow:6}},children:[$.jsx(KQ,{component:"img",height:"140",image:e.image,alt:e.title,sx:{objectFit:"cover"}}),$.jsxs(iD,{sx:{paddingBottom:"8px !important"},children:[$.jsx(rr,{variant:"subtitle1",fontWeight:600,children:e.title}),$.jsx(rr,{variant:"body2",color:"text.secondary",children:e.description})]}),$.jsxs(Dr,{sx:{position:"absolute",bottom:8,right:8},children:[$.jsx(fT,{onClick:c,children:$.jsx(VBe,{fontSize:"small"})}),$.jsxs(CQ,{anchorEl:t,open:r,onClose:h,children:[$.jsx(pc,{onClick:i,children:"View"}),$.jsx(pc,{onClick:h,children:"Edit"}),$.jsx(pc,{onClick:h,children:"Delete"})]})]})]})},$Be=[{name:"User I",role:"Project Manager"},{name:"User II",role:"Lead Engineer"},{name:"User III",role:"GIS Specialist"}],qBe=[{title:"Day I",description:"Track changes over time",image:"https://picsum.photos/200/300?1"},{title:"Day II",description:"High-res structural analysis",image:"https://picsum.photos/200/300?2"},{title:"Day III",description:"Thermal imaging results",image:"https://picsum.photos/200/300?3"}];function HBe(){const[e,t]=q.useState(""),[n,r]=q.useState(["someone@example.com"]),s=cs(),c=i=>{i.key==="Enter"&&e&&(i.preventDefault(),n.includes(e)||r([...n,e]),t(""))},h=i=>{r(n.filter(g=>g!==i))};return $.jsxs(Dr,{p:4,children:[$.jsx(rr,{variant:"h2",fontWeight:600,gutterBottom:!0,children:"Project I Overview"}),$.jsxs(yl,{direction:"row",spacing:4,mb:4,children:[$.jsxs(Dr,{flex:1,children:[$.jsx(rr,{variant:"h5",gutterBottom:!0,children:"Project Details"}),$.jsxs(yl,{spacing:1,children:[$.jsx(rr,{children:"Name: Project I"}),$.jsx(rr,{children:"Status: In Progress"}),$.jsx(rr,{children:"Remarks: Site is under survey"})]})]}),$.jsxs(Dr,{flex:1,children:[$.jsx(rr,{variant:"h5",gutterBottom:!0,children:"Collaborators"}),$.jsx(lv,{dense:!0,children:$Be.map((i,g)=>$.jsxs(_j,{children:[$.jsx(PQ,{children:$.jsx(WT,{children:i.name.charAt(0)})}),$.jsx(Yb,{primary:i.name,secondary:i.role})]},g))})]})]}),$.jsxs(Dr,{mb:5,children:[$.jsx(rr,{variant:"h6",gutterBottom:!0,children:"Invite More People"}),$.jsxs(fc,{sx:{...s.typography.customInput,width:300},children:[$.jsx(Sf,{htmlFor:"teamInvite",children:"Email"}),$.jsx(Fp,{id:"teamInvite",label:"Email",value:e,onChange:i=>t(i.target.value),onKeyDown:c,sx:{mb:2}})]}),$.jsx(yl,{direction:"row",spacing:1,flexWrap:"wrap",mb:2,children:n.map((i,g)=>$.jsx(N0,{label:i,onDelete:()=>h(i),color:"primary"},g))}),$.jsx(ms,{variant:"contained",color:"secondary",children:"Send Invite"})]}),$.jsxs(Dr,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[$.jsx(rr,{variant:"h4",children:"Work Days"}),$.jsx(ms,{variant:"contained",color:"secondary",startIcon:$.jsx(Sj,{}),children:"Create New Entry"})]}),$.jsx(_o,{container:!0,spacing:3,children:qBe.map((i,g)=>$.jsx(UBe,{project:i}))})]})}yv.accessToken=void 0;function Rte(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Rte(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function W0(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Rte(e))&&(r&&(r+=" "),r+=t);return r}let GBe={data:""},WBe=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||GBe,YBe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,XBe=/\/\*[^]*?\*\/|  +/g,t2=/\n+/g,e0=(e,t)=>{let n="",r="",s="";for(let c in e){let h=e[c];c[0]=="@"?c[1]=="i"?n=c+" "+h+";":r+=c[1]=="f"?e0(h,c):c+"{"+e0(h,c[1]=="k"?"":t)+"}":typeof h=="object"?r+=e0(h,t?t.replace(/([^,])+/g,i=>c.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,i):i?i+" "+g:g)):c):h!=null&&(c=/^--/.test(c)?c:c.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=e0.p?e0.p(c,h):c+":"+h+";")}return n+(t&&s?t+"{"+s+"}":s)+r},yg={},Dte=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Dte(e[n]);return t}return e},ZBe=(e,t,n,r,s)=>{let c=Dte(e),h=yg[c]||(yg[c]=(g=>{let w=0,T=11;for(;w<g.length;)T=101*T+g.charCodeAt(w++)>>>0;return"go"+T})(c));if(!yg[h]){let g=c!==e?e:(w=>{let T,A,D=[{}];for(;T=YBe.exec(w.replace(XBe,""));)T[4]?D.shift():T[3]?(A=T[3].replace(t2," ").trim(),D.unshift(D[0][A]=D[0][A]||{})):D[0][T[1]]=T[2].replace(t2," ").trim();return D[0]})(e);yg[h]=e0(s?{["@keyframes "+h]:g}:g,n?"":"."+h)}let i=n&&yg.g?yg.g:null;return n&&(yg.g=yg[h]),((g,w,T,A)=>{A?w.data=w.data.replace(A,g):w.data.indexOf(g)===-1&&(w.data=T?g+w.data:w.data+g)})(yg[h],t,r,i),h},KBe=(e,t,n)=>e.reduce((r,s,c)=>{let h=t[c];if(h&&h.call){let i=h(n),g=i&&i.props&&i.props.className||/^go/.test(i)&&i;h=g?"."+g:i&&typeof i=="object"?i.props?"":e0(i,""):i===!1?"":i}return r+s+(h??"")},"");function c5(e){let t=this||{},n=e.call?e(t.p):e;return ZBe(n.unshift?n.raw?KBe(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,WBe(t.target),t.g,t.o,t.k)}c5.bind({g:1});c5.bind({k:1});function QBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pte(e,t,n){return t&&QBe(e.prototype,t),e}function rs(){return rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rs.apply(this,arguments)}function Ite(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function pE(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function n2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r2=function(){return""},kte=St.createContext({enqueueSnackbar:r2,closeSnackbar:r2}),K_={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},i2=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},u5=function(t){return""+i2(t.vertical)+i2(t.horizontal)},EA=function(t){return!!t||t===0},CA="unmounted",ob="exited",sb="entering",aS="entered",o2="exiting",d5=function(e){Ite(t,e);function t(r){var s;s=e.call(this,r)||this;var c=r.appear,h;return s.appearStatus=null,r.in?c?(h=ob,s.appearStatus=sb):h=aS:r.unmountOnExit||r.mountOnEnter?h=CA:h=ob,s.state={status:h},s.nextCallback=null,s}t.getDerivedStateFromProps=function(s,c){var h=s.in;return h&&c.status===CA?{status:ob}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var c=null;if(s!==this.props){var h=this.state.status;this.props.in?h!==sb&&h!==aS&&(c=sb):(h===sb||h===aS)&&(c=o2)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,c=s,h=s;return s!=null&&typeof s!="number"&&typeof s!="string"&&(h=s.exit,c=s.enter),{exit:h,enter:c}},n.updateStatus=function(s,c){s===void 0&&(s=!1),c!==null?(this.cancelNextCallback(),c===sb?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===ob&&this.setState({status:CA})},n.performEnter=function(s){var c=this,h=this.props.enter,i=s,g=this.getTimeouts();if(!s&&!h){this.safeSetState({status:aS},function(){c.props.onEntered&&c.props.onEntered(c.node,i)});return}this.props.onEnter&&this.props.onEnter(this.node,i),this.safeSetState({status:sb},function(){c.props.onEntering&&c.props.onEntering(c.node,i),c.onTransitionEnd(g.enter,function(){c.safeSetState({status:aS},function(){c.props.onEntered&&c.props.onEntered(c.node,i)})})})},n.performExit=function(){var s=this,c=this.props.exit,h=this.getTimeouts();if(!c){this.safeSetState({status:ob},function(){s.props.onExited&&s.props.onExited(s.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:o2},function(){s.props.onExiting&&s.props.onExiting(s.node),s.onTransitionEnd(h.exit,function(){s.safeSetState({status:ob},function(){s.props.onExited&&s.props.onExited(s.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,c){c=this.setNextCallback(c),this.setState(s,c)},n.setNextCallback=function(s){var c=this,h=!0;return this.nextCallback=function(){h&&(h=!1,c.nextCallback=null,s())},this.nextCallback.cancel=function(){h=!1},this.nextCallback},n.onTransitionEnd=function(s,c){this.setNextCallback(c);var h=s==null&&!this.props.addEndListener;if(!this.node||h){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===CA)return null;var c=this.props,h=c.children,i=pE(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return h(s,i)},Pte(t,[{key:"node",get:function(){var s,c=(s=this.props.nodeRef)===null||s===void 0?void 0:s.current;if(!c)throw new Error("notistack - Custom snackbar is not refForwarding");return c}}]),t}(St.Component);function ab(){}d5.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ab,onEntering:ab,onEntered:ab,onExit:ab,onExiting:ab,onExited:ab};function s2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function yB(e,t){return q.useMemo(function(){return e==null&&t==null?null:function(n){s2(e,n),s2(t,n)}},[e,t])}function yR(e){var t=e.timeout,n=e.style,r=n===void 0?{}:n,s=e.mode;return{duration:typeof t=="object"?t[s]||0:t,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var vB={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ote=function(t){t.scrollTop=t.scrollTop},a2=function(t){return Math.round(t)+"ms"};function Mb(e,t){e===void 0&&(e=["all"]);var n=t||{},r=n.duration,s=r===void 0?300:r,c=n.easing,h=c===void 0?vB.easeInOut:c,i=n.delay,g=i===void 0?0:i,w=Array.isArray(e)?e:[e];return w.map(function(T){var A=typeof s=="string"?s:a2(s),D=typeof g=="string"?g:a2(g);return T+" "+A+" "+h+" "+D}).join(",")}function JBe(e){return e&&e.ownerDocument||document}function Lte(e){var t=JBe(e);return t.defaultView||window}function eNe(e,t){t===void 0&&(t=166);var n;function r(){for(var s=this,c=arguments.length,h=new Array(c),i=0;i<c;i++)h[i]=arguments[i];var g=function(){e.apply(s,h)};clearTimeout(n),n=setTimeout(g,t)}return r.clear=function(){clearTimeout(n)},r}function tNe(e,t){var n=t.getBoundingClientRect(),r=Lte(t),s;if(t.fakeTransform)s=t.fakeTransform;else{var c=r.getComputedStyle(t);s=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}var h=0,i=0;if(s&&s!=="none"&&typeof s=="string"){var g=s.split("(")[1].split(")")[0].split(",");h=parseInt(g[4],10),i=parseInt(g[5],10)}switch(e){case"left":return"translateX("+(r.innerWidth+h-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-h)+"px)";case"up":return"translateY("+(r.innerHeight+i-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-i)+"px)"}}function AA(e,t){if(t){var n=tNe(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}}var zte=q.forwardRef(function(e,t){var n=e.children,r=e.direction,s=r===void 0?"down":r,c=e.in,h=e.style,i=e.timeout,g=i===void 0?0:i,w=e.onEnter,T=e.onEntered,A=e.onExit,D=e.onExited,k=pE(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),I=q.useRef(null),F=yB(n.ref,I),j=yB(F,t),V=function(he,ye){AA(s,he),Ote(he),w&&w(he,ye)},W=function(he){var ye=(h==null?void 0:h.transitionTimingFunction)||vB.easeOut,_e=yR({timeout:g,mode:"enter",style:rs({},h,{transitionTimingFunction:ye})});he.style.webkitTransition=Mb("-webkit-transform",_e),he.style.transition=Mb("transform",_e),he.style.webkitTransform="none",he.style.transform="none"},Z=function(he){var ye=(h==null?void 0:h.transitionTimingFunction)||vB.sharp,_e=yR({timeout:g,mode:"exit",style:rs({},h,{transitionTimingFunction:ye})});he.style.webkitTransition=Mb("-webkit-transform",_e),he.style.transition=Mb("transform",_e),AA(s,he),A&&A(he)},K=function(he){he.style.webkitTransition="",he.style.transition="",D&&D(he)},ee=q.useCallback(function(){I.current&&AA(s,I.current)},[s]);return q.useEffect(function(){if(!(c||s==="down"||s==="right")){var se=eNe(function(){I.current&&AA(s,I.current)}),he=Lte(I.current);return he.addEventListener("resize",se),function(){se.clear(),he.removeEventListener("resize",se)}}},[s,c]),q.useEffect(function(){c||ee()},[c,ee]),q.createElement(d5,Object.assign({appear:!0,nodeRef:I,onEnter:V,onEntered:T,onEntering:W,onExit:Z,onExited:K,in:c,timeout:g},k),function(se,he){return q.cloneElement(n,rs({ref:j,style:rs({visibility:se==="exited"&&!c?"hidden":void 0},h,{},n.props.style)},he))})});zte.displayName="Slide";var PD=function(t){return St.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},nNe=function(){return St.createElement(PD,null,St.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},rNe=function(){return St.createElement(PD,null,St.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},iNe=function(){return St.createElement(PD,null,St.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},oNe=function(){return St.createElement(PD,null,St.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},sNe={default:void 0,success:St.createElement(nNe,null),warning:St.createElement(rNe,null),error:St.createElement(iNe,null),info:St.createElement(oNe,null)},f0={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:sNe,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:zte,transitionDuration:{enter:225,exit:195}},aNe=function(t,n){var r=function(c){return typeof c=="number"||c===null};return r(t)?t:r(n)?n:f0.autoHideDuration},lNe=function(t,n){var r=function(c,h){return h.some(function(i){return typeof c===i})};return r(t,["string","number"])?t:r(t,["object"])?rs({},f0.transitionDuration,{},r(n,["object"])&&n,{},t):r(n,["string","number"])?n:r(n,["object"])?rs({},f0.transitionDuration,{},n):f0.transitionDuration},cNe=function(t,n){return function(r,s){return s===void 0&&(s=!1),s?rs({},f0[r],{},n[r],{},t[r]):r==="autoHideDuration"?aNe(t.autoHideDuration,n.autoHideDuration):r==="transitionDuration"?lNe(t.transitionDuration,n.transitionDuration):t[r]||n[r]||f0[r]}};function mE(e){return Object.entries(e).reduce(function(t,n){var r,s=n[0],c=n[1];return rs({},t,(r={},r[s]=c5(c),r))},{})}var t1={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},l2=mE({root:{height:0},entered:{height:"auto"}}),Mk="0px",Rk=175,Fte=q.forwardRef(function(e,t){var n=e.children,r=e.in,s=e.onExited,c=q.useRef(null),h=q.useRef(null),i=yB(t,h),g=function(){return c.current?c.current.clientHeight:0},w=function(F){F.style.height=Mk},T=function(F){var j=g(),V=yR({timeout:Rk,mode:"enter"}),W=V.duration,Z=V.easing;F.style.transitionDuration=typeof W=="string"?W:W+"ms",F.style.height=j+"px",F.style.transitionTimingFunction=Z||""},A=function(F){F.style.height="auto"},D=function(F){F.style.height=g()+"px"},k=function(F){Ote(F);var j=yR({timeout:Rk,mode:"exit"}),V=j.duration,W=j.easing;F.style.transitionDuration=typeof V=="string"?V:V+"ms",F.style.height=Mk,F.style.transitionTimingFunction=W||""};return q.createElement(d5,{in:r,unmountOnExit:!0,onEnter:w,onEntered:A,onEntering:T,onExit:D,onExited:s,onExiting:k,nodeRef:h,timeout:Rk},function(I,F){return q.createElement("div",Object.assign({ref:i,className:W0(l2.root,I==="entered"&&l2.entered),style:rs({pointerEvents:"all",overflow:"hidden",minHeight:Mk,transition:Mb("height")},I==="entered"&&{overflow:"visible"},{},I==="exited"&&!r&&{visibility:"hidden"})},F),q.createElement("div",{ref:c,className:t1.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});Fte.displayName="Collapse";var c2={right:"left",left:"right",bottom:"up",top:"down"},uNe=function(t){return t.horizontal!=="center"?c2[t.horizontal]:c2[t.vertical]},dNe=function(t){return"anchorOrigin"+u5(t)},hNe=function(t){t===void 0&&(t={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(r){return!n[r]}).reduce(function(r,s){var c;return rs({},r,(c={},c[s]=t[s],c))},{})},fNe=function(){};function $S(e,t){return e.reduce(function(n,r){return r==null?n:function(){for(var c=arguments.length,h=new Array(c),i=0;i<c;i++)h[i]=arguments[i];var g=[].concat(h);t&&g.indexOf(t)===-1&&g.push(t),n.apply(this,g),r.apply(this,g)}},fNe)}var pNe=typeof window<"u"?q.useLayoutEffect:q.useEffect;function u2(e){var t=q.useRef(e);return pNe(function(){t.current=e}),q.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var Bte=q.forwardRef(function(e,t){var n=e.children,r=e.className,s=e.autoHideDuration,c=e.disableWindowBlurListener,h=c===void 0?!1:c,i=e.onClose,g=e.id,w=e.open,T=e.SnackbarProps,A=T===void 0?{}:T,D=q.useRef(),k=u2(function(){i&&i.apply(void 0,arguments)}),I=u2(function(Z){!i||Z==null||(D.current&&clearTimeout(D.current),D.current=setTimeout(function(){k(null,"timeout",g)},Z))});q.useEffect(function(){return w&&I(s),function(){D.current&&clearTimeout(D.current)}},[w,s,I]);var F=function(){D.current&&clearTimeout(D.current)},j=q.useCallback(function(){s!=null&&I(s*.5)},[s,I]),V=function(K){A.onMouseEnter&&A.onMouseEnter(K),F()},W=function(K){A.onMouseLeave&&A.onMouseLeave(K),j()};return q.useEffect(function(){if(!h&&w)return window.addEventListener("focus",j),window.addEventListener("blur",F),function(){window.removeEventListener("focus",j),window.removeEventListener("blur",F)}},[h,j,w]),q.createElement("div",Object.assign({ref:t},A,{className:W0(t1.Snackbar,r),onMouseEnter:V,onMouseLeave:W}),n)});Bte.displayName="Snackbar";var Dk,mNe=mE({root:(Dk={display:"flex",flexWrap:"wrap",flexGrow:1},Dk[K_.upSm]={flexGrow:"initial",minWidth:"288px"},Dk)}),Nte=q.forwardRef(function(e,t){var n=e.className,r=pE(e,["className"]);return St.createElement("div",Object.assign({ref:t,className:W0(mNe.root,n)},r))});Nte.displayName="SnackbarContent";var lS=mE({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),d2="notistack-snackbar",jte=q.forwardRef(function(e,t){var n=e.id,r=e.message,s=e.action,c=e.iconVariant,h=e.variant,i=e.hideIconVariant,g=e.style,w=e.className,T=c[h],A=s;return typeof A=="function"&&(A=A(n)),St.createElement(Nte,{ref:t,role:"alert","aria-describedby":d2,style:g,className:W0(t1.MuiContent,t1.MuiContentVariant(h),lS.root,lS[h],w,!i&&T&&lS.lessPadding)},St.createElement("div",{id:d2,className:lS.message},i?null:T,r),A&&St.createElement("div",{className:lS.action},A))});jte.displayName="MaterialDesignContent";var gNe=q.memo(jte),yNe=mE({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),vNe=function(t){var n=q.useRef(),r=q.useState(!0),s=r[0],c=r[1],h=$S([t.snack.onClose,t.onClose]),i=function(){t.snack.requestClose&&h(null,"instructed",t.snack.id)},g=q.useCallback(function(){n.current=setTimeout(function(){c(function(_e){return!_e})},125)},[]);q.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var w=t.snack,T=t.classes,A=t.Component,D=A===void 0?gNe:A,k=q.useMemo(function(){return hNe(T)},[T]),I=w.open,F=w.SnackbarProps,j=w.TransitionComponent,V=w.TransitionProps,W=w.transitionDuration,Z=w.disableWindowBlurListener,K=w.content,ee=pE(w,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),se=rs({direction:uNe(ee.anchorOrigin),timeout:W},V),he=K;typeof he=="function"&&(he=he(ee.id,ee.message));var ye=["onEnter","onEntered","onExit","onExited"].reduce(function(_e,ae){var be;return rs({},_e,(be={},be[ae]=$S([t.snack[ae],t[ae]],ee.id),be))},{});return St.createElement(Fte,{in:s,onExited:ye.onExited},St.createElement(Bte,{open:I,id:ee.id,disableWindowBlurListener:Z,autoHideDuration:ee.autoHideDuration,className:W0(yNe.wrappedRoot,k.root,k[dNe(ee.anchorOrigin)]),SnackbarProps:F,onClose:h},St.createElement(j,Object.assign({},se,{appear:!0,in:I,onExit:ye.onExit,onExited:g,onEnter:ye.onEnter,onEntered:$S([ye.onEntered,i],ee.id)}),he||St.createElement(D,Object.assign({},ee)))))},cS,Pk,MA,RA,Ik,vg={view:{default:20},snackbar:{default:6,dense:2}},h2="."+t1.CollapseWrapper,kk=16,DA=mE({root:(cS={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Mb(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},cS[h2]={padding:vg.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},cS.maxWidth="calc(100% - "+vg.view.default*2+"px)",cS[K_.downXs]={width:"100%",maxWidth:"calc(100% - "+kk*2+"px)"},cS),rootDense:(Pk={},Pk[h2]={padding:vg.snackbar.dense+"px 0px"},Pk),top:{top:vg.view.default-vg.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:vg.view.default-vg.snackbar.default+"px",flexDirection:"column-reverse"},left:(MA={left:vg.view.default+"px"},MA[K_.upSm]={alignItems:"flex-start"},MA[K_.downXs]={left:kk+"px"},MA),right:(RA={right:vg.view.default+"px"},RA[K_.upSm]={alignItems:"flex-end"},RA[K_.downXs]={right:kk+"px"},RA),center:(Ik={left:"50%",transform:"translateX(-50%)"},Ik[K_.upSm]={alignItems:"center"},Ik)}),_Ne=function(t){var n=t.classes,r=n===void 0?{}:n,s=t.anchorOrigin,c=t.dense,h=t.children,i=W0(t1.SnackbarContainer,DA[s.vertical],DA[s.horizontal],DA.root,r.containerRoot,r["containerAnchorOrigin"+u5(s)],c&&DA.rootDense);return St.createElement("div",{className:i},h)},xNe=q.memo(_Ne),f2=function(t){var n=typeof t=="string"||q.isValidElement(t);return!n},bNe=function(e){Ite(t,e);function t(r){var s;return s=e.call(this,r)||this,s.enqueueSnackbar=function(c,h){if(h===void 0&&(h={}),c==null)throw new Error("enqueueSnackbar called with invalid argument");var i=f2(c)?c:h,g=f2(c)?c.message:c,w=i.key,T=i.preventDuplicate,A=pE(i,["key","preventDuplicate"]),D=EA(w),k=D?w:new Date().getTime()+Math.random(),I=cNe(A,s.props),F=rs({id:k},A,{message:g,open:!0,entered:!1,requestClose:!1,persist:I("persist"),action:I("action"),content:I("content"),variant:I("variant"),anchorOrigin:I("anchorOrigin"),disableWindowBlurListener:I("disableWindowBlurListener"),autoHideDuration:I("autoHideDuration"),hideIconVariant:I("hideIconVariant"),TransitionComponent:I("TransitionComponent"),transitionDuration:I("transitionDuration"),TransitionProps:I("TransitionProps",!0),iconVariant:I("iconVariant",!0),style:I("style",!0),SnackbarProps:I("SnackbarProps",!0),className:W0(s.props.className,A.className)});return F.persist&&(F.autoHideDuration=void 0),s.setState(function(j){if(T===void 0&&s.props.preventDuplicate||T){var V=function(ee){return D?ee.id===k:ee.message===g},W=j.queue.findIndex(V)>-1,Z=j.snacks.findIndex(V)>-1;if(W||Z)return j}return s.handleDisplaySnack(rs({},j,{queue:[].concat(j.queue,[F])}))}),k},s.handleDisplaySnack=function(c){var h=c.snacks;return h.length>=s.maxSnack?s.handleDismissOldest(c):s.processQueue(c)},s.processQueue=function(c){var h=c.queue,i=c.snacks;return h.length>0?rs({},c,{snacks:[].concat(i,[h[0]]),queue:h.slice(1,h.length)}):c},s.handleDismissOldest=function(c){if(c.snacks.some(function(T){return!T.open||T.requestClose}))return c;var h=!1,i=!1,g=c.snacks.reduce(function(T,A){return T+(A.open&&A.persist?1:0)},0);g===s.maxSnack&&(i=!0);var w=c.snacks.map(function(T){return!h&&(!T.persist||i)?(h=!0,T.entered?(T.onClose&&T.onClose(null,"maxsnack",T.id),s.props.onClose&&s.props.onClose(null,"maxsnack",T.id),rs({},T,{open:!1})):rs({},T,{requestClose:!0})):rs({},T)});return rs({},c,{snacks:w})},s.handleEnteredSnack=function(c,h,i){if(!EA(i))throw new Error("handleEnteredSnack Cannot be called with undefined key");s.setState(function(g){var w=g.snacks;return{snacks:w.map(function(T){return T.id===i?rs({},T,{entered:!0}):rs({},T)})}})},s.handleCloseSnack=function(c,h,i){s.props.onClose&&s.props.onClose(c,h,i);var g=i===void 0;s.setState(function(w){var T=w.snacks,A=w.queue;return{snacks:T.map(function(D){return!g&&D.id!==i?rs({},D):D.entered?rs({},D,{open:!1}):rs({},D,{requestClose:!0})}),queue:A.filter(function(D){return D.id!==i})}})},s.closeSnackbar=function(c){var h=s.state.snacks.find(function(i){return i.id===c});EA(c)&&h&&h.onClose&&h.onClose(null,"instructed",c),s.handleCloseSnack(null,"instructed",c)},s.handleExitedSnack=function(c,h){if(!EA(h))throw new Error("handleExitedSnack Cannot be called with undefined key");s.setState(function(i){var g=s.processQueue(rs({},i,{snacks:i.snacks.filter(function(w){return w.id!==h})}));return g.queue.length===0?g:s.handleDismissOldest(g)})},s.enqueueSnackbar,s.closeSnackbar,s.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:s.enqueueSnackbar.bind(n2(s)),closeSnackbar:s.closeSnackbar.bind(n2(s))}},s}var n=t.prototype;return n.render=function(){var s=this,c=this.state.contextValue,h=this.props,i=h.domRoot,g=h.children,w=h.dense,T=w===void 0?!1:w,A=h.Components,D=A===void 0?{}:A,k=h.classes,I=this.state.snacks.reduce(function(j,V){var W,Z=u5(V.anchorOrigin),K=j[Z]||[];return rs({},j,(W={},W[Z]=[].concat(K,[V]),W))},{}),F=Object.keys(I).map(function(j){var V=I[j],W=V[0];return St.createElement(xNe,{key:j,dense:T,anchorOrigin:W.anchorOrigin,classes:k},V.map(function(Z){return St.createElement(vNe,{key:Z.id,snack:Z,classes:k,Component:D[Z.variant],onClose:s.handleCloseSnack,onEnter:s.props.onEnter,onExit:s.props.onExit,onExited:$S([s.handleExitedSnack,s.props.onExited],Z.id),onEntered:$S([s.handleEnteredSnack,s.props.onEntered],Z.id)})}))});return St.createElement(kte.Provider,{value:c},g,i?OR.createPortal(F,i):F)},Pte(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||f0.maxSnack}}]),t}(q.Component),Vte=function(){return q.useContext(kte)};const wNe=e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":return $.jsx(Qme,{size:32,color:"red"});case"doc":case"docx":return $.jsx(Jme,{size:32,color:"blue"});case"xls":case"xlsx":return $.jsx(Zme,{size:32,color:"green"});case"txt":return $.jsx(Kme,{size:32});default:return $.jsx(ege,{size:32})}},PA=()=>new Date().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});function Ute(){const[e,t]=q.useState([{name:"report.pdf",uploadedAt:PA()},{name:"site-notes.docx",uploadedAt:PA()},{name:"data-sheet.xlsx",uploadedAt:PA()}]),[n,r]=q.useState(0),[s,c]=q.useState(!1),[h,i]=q.useState(!1),g=cs(),{enqueueSnackbar:w}=Vte(),T=k=>{const I=k.target.files[0];if(!I)return;r(0);const F=setInterval(()=>{r(j=>(j>=100&&(clearInterval(F),t(V=>[...V,{name:I.name,uploadedAt:PA()}])),Math.min(j+10,100)))},200)},A=k=>{w(`Downloading "${k.name}"...`,{variant:"info"}),setTimeout(()=>{w(`"${k.name}" downloaded`,{variant:"success"})},1500)},D=e.filter(k=>{const I=k.name.split(".").pop().toLowerCase();return s&&h?I==="pdf"||I==="doc"||I==="docx":s?I==="pdf":h?I==="doc"||I==="docx":!0});return $.jsxs(Dr,{sx:{px:3,py:2},children:[$.jsxs(JQ,{row:!0,sx:{mb:2},children:[$.jsx(Eb,{control:$.jsx(d6,{checked:s,onChange:()=>c(k=>!k)}),label:"Show PDF Files"}),$.jsx(Eb,{control:$.jsx(d6,{checked:h,onChange:()=>i(k=>!k)}),label:"Show DOC/DOCX Files"})]}),$.jsx(rr,{variant:"h4",mb:2,children:"Upload Files"}),$.jsxs(ms,{variant:"contained",component:"label",sx:{mb:2},children:["Choose File",$.jsx("input",{type:"file",hidden:!0,onChange:T})]}),n>0&&n<100&&$.jsx(yN,{variant:"determinate",value:n,sx:{mb:3,borderRadius:2}}),$.jsx(rr,{variant:"h5",gutterBottom:!0,children:"Uploaded Files"}),$.jsx(_o,{container:!0,spacing:2,children:D.map((k,I)=>$.jsx(_o,{item:!0,xs:12,sm:6,md:4,children:$.jsx(fu,{elevation:3,onClick:()=>A(k),sx:{p:2,borderRadius:2,cursor:"pointer",transition:"all 0.2s ease","&:hover":{boxShadow:`0 0 0 2px ${g.palette.primary.main}`}},children:$.jsxs(yl,{direction:"row",spacing:2,alignItems:"center",children:[wNe(k.name),$.jsxs(Dr,{children:[$.jsx(rr,{variant:"subtitle1",fontWeight:"bold",children:k.name}),$.jsxs(rr,{variant:"caption",color:"text.secondary",children:["Uploaded on: ",k.uploadedAt]})]})]})})},I))})]})}function SNe(){return $.jsxs(Dr,{children:[$.jsx(rr,{variant:"h6",children:"Other Tab"}),$.jsx(rr,{children:"This is an empty tab for future content."})]})}var $te=q.forwardRef(({transition:e,...t},n)=>{let r={position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:e?`clip-path ${e}`:void 0,userSelect:"none",willChange:"clip-path, transition",KhtmlUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"};return $.jsx("div",{...t,style:r,"data-rcs":"clip-item",ref:n})});$te.displayName="ContainerClip";var qte=q.forwardRef(({children:e,disabled:t,portrait:n,position:r,transition:s},c)=>{let h={position:"absolute",top:0,width:n?"100%":void 0,height:n?void 0:"100%",background:"none",border:0,padding:0,pointerEvents:"all",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:0,transform:n?"translate3d(0, -50% ,0)":"translate3d(-50%, 0, 0)",transition:s?`${n?"top":"left"} ${s}`:void 0};return $.jsx("button",{ref:c,"aria-label":"Drag to move or focus and use arrow keys","aria-orientation":n?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r,"data-rcs":"handle-container",disabled:t,role:"slider",style:h,children:e})});qte.displayName="ThisHandleContainer";var p2=({flip:e})=>$.jsx("div",{className:"__rcs-handle-arrow",style:{width:0,height:0,borderTop:"8px solid transparent",borderRight:"10px solid",borderBottom:"8px solid transparent",transform:e?"rotate(180deg)":void 0}}),TNe=({className:e="__rcs-handle-root",disabled:t,buttonStyle:n,linesStyle:r,portrait:s,style:c,...h})=>{let i={display:"flex",flexDirection:s?"row":"column",placeItems:"center",height:"100%",cursor:t?"not-allowed":s?"ns-resize":"ew-resize",pointerEvents:"none",color:"#fff",...c},g={flexGrow:1,height:s?2:"100%",width:s?"100%":2,backgroundColor:"currentColor",pointerEvents:"auto",boxShadow:"0 0 4px rgba(0,0,0,.5)",...r},w={display:"grid",gridAutoFlow:"column",gap:8,placeContent:"center",flexShrink:0,width:56,height:56,borderRadius:"50%",borderStyle:"solid",borderWidth:2,pointerEvents:"auto",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",backgroundColor:"rgba(0, 0, 0, 0.125)",boxShadow:"0 0 4px rgba(0,0,0,.35)",transform:s?"rotate(90deg)":void 0,...n};return $.jsxs("div",{...h,className:e,style:i,children:[$.jsx("div",{className:"__rcs-handle-line",style:g}),$.jsxs("div",{className:"__rcs-handle-button",style:w,children:[$.jsx(p2,{}),$.jsx(p2,{flip:!0})]}),$.jsx("div",{className:"__rcs-handle-line",style:g})]})},Hte=(e=>(e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e))(Hte||{}),ENe=({boxSizing:e="border-box",objectFit:t="cover",objectPosition:n="center center",...r}={})=>({display:"block",width:"100%",height:"100%",maxWidth:"100%",boxSizing:e,objectFit:t,objectPosition:n,...r}),CNe=e=>{let t=q.useRef(e);return q.useEffect(()=>{t.current=e}),t.current},Ok=(e,t,n,r)=>{let s=q.useRef();q.useEffect(()=>{s.current=t},[t]),q.useEffect(()=>{if(!(n&&n.addEventListener))return;let c=h=>s.current&&s.current(h);return n.addEventListener(e,c,r),()=>{n.removeEventListener(e,c,r)}},[e,n,r])},ANe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?q.useLayoutEffect:q.useEffect,MNe=(e,t)=>{let n=q.useRef(),r=q.useCallback(()=>{e.current&&n.current&&n.current.observe(e.current)},[e]);ANe(()=>(n.current=new ResizeObserver(([s])=>t(s.contentRect)),r(),()=>{n.current&&n.current.disconnect()}),[t,r])},IA={capture:!1,passive:!0},Lk={capture:!0,passive:!1},RNe=e=>{e.preventDefault(),e.currentTarget.focus()},h5=q.forwardRef(({boundsPadding:e=0,browsingContext:t=globalThis,changePositionOnHover:n=!1,disabled:r=!1,handle:s,itemOne:c,itemTwo:h,keyboardIncrement:i="5%",onlyHandleDraggable:g=!1,onPositionChange:w,portrait:T=!1,position:A=50,style:D,transition:k,...I},F)=>{let j=q.useRef(null),V=q.useRef(null),W=q.useRef(null),Z=q.useRef(A),[K,ee]=q.useState(!1),[se,he]=q.useState(!0),ye=q.useRef(!1),[_e,ae]=q.useState(),be=CNe(A),Te=q.useCallback(function({x:Je,y:yt,isOffset:wt}){let $t=j.current,It=W.current,vt=V.current,{width:sn,height:Rn,left:yn,top:Qt}=$t.getBoundingClientRect();if(sn===0||Rn===0)return;let Jt=T?wt?yt-Qt-t.scrollY:yt:wt?Je-yn-t.scrollX:Je,fn=Math.min(Math.max(Jt/(T?Rn:sn)*100,0),100),Bt=T?Rn/($t.offsetHeight||1):sn/($t.offsetWidth||1),Kt=e*Bt/(T?Rn:sn)*100,_n=Math.min(Math.max(fn,Kt*Bt),100-Kt*Bt);Z.current=fn,It.setAttribute("aria-valuenow",`${Math.round(Z.current)}`),It.style.top=T?`${_n}%`:"0",It.style.left=T?"0":`${_n}%`,vt.style.clipPath=T?`inset(${_n}% 0 0 0)`:`inset(0 0 0 ${_n}%)`,w&&w(Z.current)},[e,w,T,t]);q.useEffect(()=>{let{width:Je,height:yt}=j.current.getBoundingClientRect(),wt=A===be?Z.current:A;Te({x:Je/100*wt,y:yt/100*wt})},[e,A,T,be,Te]);let Ae=q.useCallback(Je=>{Je.preventDefault(),!(r||Je.button!==0)&&(Te({isOffset:!0,x:Je.pageX,y:Je.pageY}),ee(!0),he(!0))},[r,Te]),Re=q.useCallback(function(Je){Te({isOffset:!0,x:Je.pageX,y:Je.pageY}),he(!1)},[Te]),He=q.useCallback(()=>{ee(!1),he(!0)},[]),Se=q.useCallback(({width:Je,height:yt})=>{let{width:wt,height:$t}=j.current.getBoundingClientRect();Te({x:Je/100*Z.current*wt/Je,y:yt/100*Z.current*$t/yt})},[Te]),qe=q.useCallback(Je=>{if(!Object.values(Hte).includes(Je.key))return;Je.preventDefault(),he(!0);let{top:yt,left:wt}=W.current.getBoundingClientRect(),{width:$t,height:It}=j.current.getBoundingClientRect(),vt=typeof i=="string"?parseFloat(i):i/$t*100,sn=T?Je.key==="ArrowLeft"||Je.key==="ArrowDown":Je.key==="ArrowRight"||Je.key==="ArrowUp",Rn=Math.min(Math.max(sn?Z.current+vt:Z.current-vt,0),100);Te({x:T?wt:$t*Rn/100,y:T?It*Rn/100:yt})},[i,T,Te]);q.useEffect(()=>{ae(g?W.current:j.current)},[g]),q.useEffect(()=>{let Je=j.current,yt=()=>{K||He()};return n&&(Je.addEventListener("pointermove",Re,IA),Je.addEventListener("pointerleave",yt,IA)),()=>{Je.removeEventListener("pointermove",Re),Je.removeEventListener("pointerleave",yt)}},[n,Re,He,K]),q.useEffect(()=>(K&&!ye.current&&(t.addEventListener("pointermove",Re,IA),t.addEventListener("pointerup",He,IA),ye.current=!0),()=>{ye.current&&(t.removeEventListener("pointermove",Re),t.removeEventListener("pointerup",He),ye.current=!1)}),[Re,He,K,t]),q.useImperativeHandle(F,()=>({rootContainer:j.current,handleContainer:W.current,setPosition(Je){let{width:yt,height:wt}=j.current.getBoundingClientRect();Te({x:yt/100*Je,y:wt/100*Je})}}),[Te]),MNe(j,Se),Ok("keydown",qe,W.current,Lk),Ok("click",RNe,W.current,Lk),Ok("pointerdown",Ae,_e,Lk);let it=s||$.jsx(TNe,{disabled:r,portrait:T}),tt=se?k:void 0,Oe={position:"relative",display:"flex",overflow:"hidden",cursor:K?T?"ns-resize":"ew-resize":void 0,touchAction:"none",userSelect:"none",KhtmlUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",...D};return $.jsxs("div",{...I,ref:j,style:Oe,"data-rcs":"root",children:[c,$.jsx($te,{ref:V,transition:tt,children:h}),$.jsx(qte,{disabled:r,portrait:T,position:Math.round(Z.current),ref:W,transition:tt,children:it})]})});h5.displayName="ReactCompareSlider";var DNe=q.forwardRef(({style:e,...t},n)=>{let r=ENe(e);return $.jsx("img",{ref:n,...t,style:r,"data-rcs":"image"})});DNe.displayName="ReactCompareSliderImage";var kA={},lb={},Ls={},zk={},m2;function f5(){return m2||(m2=1,function(e){function t(h,i,g){var w=i.slidesToShow,T=i.currentSlide;return g.length>2*w?h+2*w:T>=g.length?g.length+h:h}function n(h,i){if(i.length>2*h){for(var g={},w=i.length-2*h,T=i.length-w,A=w,D=0;D<T;D++)g[D]=A,A++;var k=i.length+T,I=k+i.slice(0,2*h).length,F=0;for(D=k;D<=I;D++)g[D]=F,F++;var j=k,V=0;for(D=T;D<j;D++)g[D]=V,V++;return g}g={};var W=3*i.length,Z=0;for(D=0;D<W;D++)g[D]=Z,++Z===i.length&&(Z=0);return g}function r(h,i){return i.length<h?i:i.length>2*h?i.slice(i.length-2*h,i.length).concat(i,i.slice(0,2*h)):i.concat(i,i)}function s(h,i){return i.length>2*h?2*h:i.length}function c(h,i,g){var w,T=h.currentSlide,A=h.slidesToShow,D=h.itemWidth,k=h.totalItems,I=0,F=0,j=T===0,V=i.length-(i.length-2*A);return i.length<A?(F=I=0,j=w=!1):i.length>2*A?((w=T>=V+i.length)&&(F=-D*(I=T-i.length)),j&&(F=-D*(I=V+(i.length-2*A)))):((w=T>=2*i.length)&&(F=-D*(I=T-i.length)),j&&(F=g.showDots?-D*(I=i.length):-D*(I=k/3))),{isReachingTheEnd:w,isReachingTheStart:j,nextSlide:I,nextPosition:F}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOriginalCounterPart=t,e.getOriginalIndexLookupTableByClones=n,e.getClones=r,e.getInitialSlideInInfiniteMode=s,e.checkClonesPosition=c}(zk)),zk}var cb={},g2;function Gte(){if(g2)return cb;g2=1,Object.defineProperty(cb,"__esModule",{value:!0});function e(r,s,c,h){var i=0,g=h||c;return s&&g&&(i=r[g].partialVisibilityGutter||r[g].paritialVisibilityGutter),i}function t(r,s){var c;return s[r]&&(c=(100/s[r].items).toFixed(1)),c}function n(r,s,c){return Math.round(c/(s+(r.centerMode?1:0)))}return cb.getPartialVisibilityGutter=e,cb.getWidthFromDeviceType=t,cb.getItemClientSideWidth=n,cb}var Zu={},y2;function T0(){if(y2)return Zu;y2=1,Object.defineProperty(Zu,"__esModule",{value:!0});var e=Gte();function t(A){var D=A.slidesToShow;return A.totalItems<D}function n(A,D){var k,I=A.domLoaded,F=A.slidesToShow,j=A.containerWidth,V=A.itemWidth,W=D.deviceType,Z=D.responsive,K=D.ssr,ee=D.partialVisbile,se=D.partialVisible,he=!!(I&&F&&j&&V);K&&W&&!he&&(k=e.getWidthFromDeviceType(W,Z));var ye=!!(K&&W&&!he&&k);return{shouldRenderOnSSR:ye,flexBisis:k,domFullyLoaded:he,partialVisibilityGutter:e.getPartialVisibilityGutter(Z,ee||se,W,A.deviceType),shouldRenderAtAll:ye||he}}function r(A,D){var k=D.currentSlide,I=D.slidesToShow;return k<=A&&A<k+I}function s(A,D,k){var I=k||A.transform;return!D.infinite&&A.currentSlide===0||t(A)?I:I+A.itemWidth/2}function c(A){return!(0<A.currentSlide)}function h(A){var D=A.currentSlide,k=A.totalItems;return!(D+A.slidesToShow<k)}function i(A,D,k,I){D===void 0&&(D=0);var F=A.currentSlide,j=A.slidesToShow,V=h(A),W=!k.infinite&&V,Z=I||A.transform;if(t(A))return Z;var K=Z+F*D;return W?K+(A.containerWidth-(A.itemWidth-D)*j):K}function g(A,D){return A.rtl?-1*D:D}function w(A,D,k){var I=D.partialVisbile,F=D.partialVisible,j=D.responsive,V=D.deviceType,W=D.centerMode,Z=k||A.transform,K=e.getPartialVisibilityGutter(j,I||F,V,A.deviceType);return g(D,F||I?i(A,K,D,k):W?s(A,D,k):Z)}function T(A,D){var k=A.domLoaded,I=A.slidesToShow,F=A.containerWidth,j=A.itemWidth,V=D.deviceType,W=D.responsive,Z=D.slidesToSlide||1,K=!!(k&&I&&F&&j);return D.ssr&&D.deviceType&&!K&&Object.keys(W).forEach(function(ee){var se=W[ee].slidesToSlide;V===ee&&se&&(Z=se)}),K&&Object.keys(W).forEach(function(ee){var se=W[ee],he=se.breakpoint,ye=se.slidesToSlide,_e=he.max,ae=he.min;ye&&window.innerWidth>=ae&&window.innerWidth<=_e&&(Z=ye)}),Z}return Zu.notEnoughChildren=t,Zu.getInitialState=n,Zu.getIfSlideIsVisbile=r,Zu.getTransformForCenterMode=s,Zu.isInLeftEnd=c,Zu.isInRightEnd=h,Zu.getTransformForPartialVsibile=i,Zu.parsePosition=g,Zu.getTransform=w,Zu.getSlidesToSlide=T,Zu}var OA={},v2;function PNe(){if(v2)return OA;v2=1,Object.defineProperty(OA,"__esModule",{value:!0});var e=function(t,n,r){var s;return function(){var c=arguments;s||(t.apply(this,c),s=!0,typeof r=="function"&&r(!0),setTimeout(function(){s=!1,typeof r=="function"&&r(!1)},n))}};return OA.default=e,OA}var Fk={},_2;function INe(){return _2||(_2=1,function(e){function t(n,r){var s=r.partialVisbile,c=r.partialVisible,h=r.centerMode,i=r.ssr,g=r.responsive;if((s||c)&&h)throw new Error("center mode can not be used at the same time with partialVisible");if(!g)throw i?new Error("ssr mode need to be used in conjunction with responsive prop"):new Error("Responsive prop is needed for deciding the amount of items to show on the screen");if(g&&typeof g!="object")throw new Error("responsive prop must be an object")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}(Fk)),Fk}var LA={},x2;function kNe(){if(x2)return LA;x2=1,Object.defineProperty(LA,"__esModule",{value:!0});var e=T0();function t(n,r,s){s===void 0&&(s=0);var c,h,i=n.slidesToShow,g=n.currentSlide,w=n.itemWidth,T=n.totalItems,A=e.getSlidesToSlide(n,r),D=g+1+s+i+(0<s?0:A);return h=D<=T?-w*(c=g+s+(0<s?0:A)):T<D&&g!==T-i?-w*(c=T-i):c=void 0,{nextSlides:c,nextPosition:h}}return LA.populateNextSlides=t,LA}var zA={},b2;function ONe(){if(b2)return zA;b2=1,Object.defineProperty(zA,"__esModule",{value:!0});var e=mh(),t=T0(),n=T0();function r(s,c,h){h===void 0&&(h=0);var i,g,w=s.currentSlide,T=s.itemWidth,A=s.slidesToShow,D=c.children,k=c.showDots,I=c.infinite,F=t.getSlidesToSlide(s,c),j=w-h-(0<h?0:F),V=(e.Children.toArray(D).length-A)%F;return g=0<=j?(i=j,k&&!I&&0<V&&n.isInRightEnd(s)&&(i=w-V),-T*i):i=j<0&&w!==0?0:void 0,{nextSlides:i,nextPosition:g}}return zA.populatePreviousSlides=r,zA}var Bk={},w2;function LNe(){return w2||(w2=1,function(e){function t(n,r,s,c,h,i){var g,w,T=n.itemWidth,A=n.slidesToShow,D=n.totalItems,k=n.currentSlide,I=r.infinite,F=!1,j=Math.round((s-c)/T),V=Math.round((c-s)/T),W=s<h;if(h<s&&j<=A){g="right";var Z=Math.abs(-T*(D-A)),K=i-(c-h),ee=k===D-A;(Math.abs(K)<=Z||ee&&I)&&(w=K,F=!0)}return W&&V<=A&&(g="left",((K=i+(h-c))<=0||k===0&&I)&&(F=!0,w=K)),{direction:g,nextPosition:w,canContinue:F}}Object.defineProperty(e,"__esModule",{value:!0}),e.populateSlidesOnMouseTouchMove=t}(Bk)),Bk}var S2;function Wte(){if(S2)return Ls;S2=1,Object.defineProperty(Ls,"__esModule",{value:!0});var e=f5();Ls.getOriginalCounterPart=e.getOriginalCounterPart,Ls.getClones=e.getClones,Ls.checkClonesPosition=e.checkClonesPosition,Ls.getInitialSlideInInfiniteMode=e.getInitialSlideInInfiniteMode;var t=Gte();Ls.getWidthFromDeviceType=t.getWidthFromDeviceType,Ls.getPartialVisibilityGutter=t.getPartialVisibilityGutter,Ls.getItemClientSideWidth=t.getItemClientSideWidth;var n=T0();Ls.getInitialState=n.getInitialState,Ls.getIfSlideIsVisbile=n.getIfSlideIsVisbile,Ls.getTransformForCenterMode=n.getTransformForCenterMode,Ls.getTransformForPartialVsibile=n.getTransformForPartialVsibile,Ls.isInLeftEnd=n.isInLeftEnd,Ls.isInRightEnd=n.isInRightEnd,Ls.notEnoughChildren=n.notEnoughChildren,Ls.getSlidesToSlide=n.getSlidesToSlide;var r=PNe();Ls.throttle=r.default;var s=INe();Ls.throwError=s.default;var c=kNe();Ls.populateNextSlides=c.populateNextSlides;var h=ONe();Ls.populatePreviousSlides=h.populatePreviousSlides;var i=LNe();return Ls.populateSlidesOnMouseTouchMove=i.populateSlidesOnMouseTouchMove,Ls}var $_={},T2;function zNe(){if(T2)return $_;T2=1;var e=$_&&$_.__extends||function(){var s=function(c,h){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,g){i.__proto__=g}||function(i,g){for(var w in g)g.hasOwnProperty(w)&&(i[w]=g[w])})(c,h)};return function(c,h){function i(){this.constructor=c}s(c,h),c.prototype=h===null?Object.create(h):(i.prototype=h.prototype,new i)}}();Object.defineProperty($_,"__esModule",{value:!0});var t=mh();function n(s){return"clientY"in s}$_.isMouseMoveEvent=n;var r=function(s){function c(){return s!==null&&s.apply(this,arguments)||this}return e(c,s),c}(t.Component);return $_.default=r,$_}var FA={},BA={},E2;function FNe(){if(E2)return BA;E2=1,Object.defineProperty(BA,"__esModule",{value:!0});var e=f5(),t=T0();function n(r,s,c,h){var i={},g=t.getSlidesToSlide(s,c);return Array(r).fill(0).forEach(function(w,T){var A=e.getOriginalCounterPart(T,s,h);if(T===0)i[0]=A;else{var D=i[T-1]+g;i[T]=D}}),i}return BA.getLookupTableForNextSlides=n,BA}var C2;function BNe(){if(C2)return FA;C2=1,Object.defineProperty(FA,"__esModule",{value:!0});var e=mh(),t=f5(),n=FNe(),r=T0(),s=function(c){var h=c.props,i=c.state,g=c.goToSlide,w=c.getState,T=h.showDots,A=h.customDot,D=h.dotListClass,k=h.infinite,I=h.children;if(!T||r.notEnoughChildren(i))return null;var F,j=i.currentSlide,V=i.slidesToShow,W=r.getSlidesToSlide(i,h),Z=e.Children.toArray(I);F=k?Math.ceil(Z.length/W):Math.ceil((Z.length-V)/W)+1;var K=n.getLookupTableForNextSlides(F,i,h,Z),ee=t.getOriginalIndexLookupTableByClones(V,Z),se=ee[j];return e.createElement("ul",{className:"react-multi-carousel-dot-list "+D},Array(F).fill(0).map(function(he,ye){var _e,ae;if(k){ae=K[ye];var be=ee[ae];_e=se===be||be<=se&&se<be+W}else{var Te=Z.length-V,Ae=ye*W;_e=(ae=Te<Ae?Te:Ae)===j||ae<j&&j<ae+W&&j<Z.length-V}return A?e.cloneElement(A,{index:ye,active:_e,key:ye,onClick:function(){return g(ae)},carouselState:w()}):e.createElement("li",{"data-index":ye,key:ye,className:"react-multi-carousel-dot "+(_e?"react-multi-carousel-dot--active":"")},e.createElement("button",{"aria-label":"Go to slide "+(ye+1),onClick:function(){return g(ae)}}))}))};return FA.default=s,FA}var uS={},A2;function NNe(){if(A2)return uS;A2=1,Object.defineProperty(uS,"__esModule",{value:!0});var e=mh(),t=function(r){var s=r.customLeftArrow,c=r.getState,h=r.previous,i=r.disabled,g=r.rtl;if(s)return e.cloneElement(s,{onClick:function(){return h()},carouselState:c(),disabled:i,rtl:g});var w=g?"rtl":"";return e.createElement("button",{"aria-label":"Go to previous slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left "+w,onClick:function(){return h()},type:"button",disabled:i})};uS.LeftArrow=t;var n=function(r){var s=r.customRightArrow,c=r.getState,h=r.next,i=r.disabled,g=r.rtl;if(s)return e.cloneElement(s,{onClick:function(){return h()},carouselState:c(),disabled:i,rtl:g});var w=g?"rtl":"";return e.createElement("button",{"aria-label":"Go to next slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right "+w,onClick:function(){return h()},type:"button",disabled:i})};return uS.RightArrow=n,uS}var NA={},M2;function jNe(){if(M2)return NA;M2=1,Object.defineProperty(NA,"__esModule",{value:!0});var e=mh(),t=Wte(),n=function(r){var s=r.props,c=r.state,h=r.goToSlide,i=r.clones,g=r.notEnoughChildren,w=c.itemWidth,T=s.children,A=s.infinite,D=s.itemClass,k=s.itemAriaLabel,I=s.partialVisbile,F=s.partialVisible,j=t.getInitialState(c,s),V=j.flexBisis,W=j.shouldRenderOnSSR,Z=j.domFullyLoaded,K=j.partialVisibilityGutter;return j.shouldRenderAtAll?(I&&console.warn('WARNING: Please correct props name: "partialVisible" as old typo will be removed in future versions!'),e.createElement(e.Fragment,null,(A?i:e.Children.toArray(T)).map(function(ee,se){return e.createElement("li",{key:se,"data-index":se,onClick:function(){s.focusOnSelect&&h(se)},"aria-hidden":t.getIfSlideIsVisbile(se,c)?"false":"true","aria-label":k||(ee.props.ariaLabel?ee.props.ariaLabel:null),style:{flex:W?"1 0 "+V+"%":"auto",position:"relative",width:Z?((I||F)&&K&&!g?w-K:w)+"px":"auto"},className:"react-multi-carousel-item "+(t.getIfSlideIsVisbile(se,c)?"react-multi-carousel-item--active":"")+" "+D},ee)}))):null};return NA.default=n,NA}var R2;function VNe(){if(R2)return lb;R2=1;var e=lb&&lb.__extends||function(){var A=function(D,k){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,F){I.__proto__=F}||function(I,F){for(var j in F)F.hasOwnProperty(j)&&(I[j]=F[j])})(D,k)};return function(D,k){function I(){this.constructor=D}A(D,k),D.prototype=k===null?Object.create(k):(I.prototype=k.prototype,new I)}}();Object.defineProperty(lb,"__esModule",{value:!0});var t=mh(),n=Wte(),r=zNe(),s=BNe(),c=NNe(),h=jNe(),i=T0(),g=400,w="transform 400ms ease-in-out",T=function(A){function D(k){var I=A.call(this,k)||this;return I.containerRef=t.createRef(),I.listRef=t.createRef(),I.state={itemWidth:0,slidesToShow:0,currentSlide:0,totalItems:t.Children.count(k.children),deviceType:"",domLoaded:!1,transform:0,containerWidth:0},I.onResize=I.onResize.bind(I),I.handleDown=I.handleDown.bind(I),I.handleMove=I.handleMove.bind(I),I.handleOut=I.handleOut.bind(I),I.onKeyUp=I.onKeyUp.bind(I),I.handleEnter=I.handleEnter.bind(I),I.setIsInThrottle=I.setIsInThrottle.bind(I),I.next=n.throttle(I.next.bind(I),k.transitionDuration||g,I.setIsInThrottle),I.previous=n.throttle(I.previous.bind(I),k.transitionDuration||g,I.setIsInThrottle),I.goToSlide=n.throttle(I.goToSlide.bind(I),k.transitionDuration||g,I.setIsInThrottle),I.onMove=!1,I.initialX=0,I.lastX=0,I.isAnimationAllowed=!1,I.direction="",I.initialY=0,I.isInThrottle=!1,I.transformPlaceHolder=0,I}return e(D,A),D.prototype.resetTotalItems=function(){var k=this,I=t.Children.count(this.props.children),F=n.notEnoughChildren(this.state)?0:Math.max(0,Math.min(this.state.currentSlide,I));this.setState({totalItems:I,currentSlide:F},function(){k.setContainerAndItemWidth(k.state.slidesToShow,!0)})},D.prototype.setIsInThrottle=function(k){k===void 0&&(k=!1),this.isInThrottle=k},D.prototype.setTransformDirectly=function(k,I){var F=this.props.additionalTransfrom;this.transformPlaceHolder=k;var j=i.getTransform(this.state,this.props,this.transformPlaceHolder);this.listRef&&this.listRef.current&&(this.setAnimationDirectly(I),this.listRef.current.style.transform="translate3d("+(j+F)+"px,0,0)")},D.prototype.setAnimationDirectly=function(k){this.listRef&&this.listRef.current&&(this.listRef.current.style.transition=k?this.props.customTransition||w:"none")},D.prototype.componentDidMount=function(){this.setState({domLoaded:!0}),this.setItemsToShow(),window.addEventListener("resize",this.onResize),this.onResize(!0),this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),this.props.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},D.prototype.setClones=function(k,I,F,j){var V=this;j===void 0&&(j=!1),this.isAnimationAllowed=!1;var W=t.Children.toArray(this.props.children),Z=n.getInitialSlideInInfiniteMode(k||this.state.slidesToShow,W),K=n.getClones(this.state.slidesToShow,W),ee=W.length<this.state.slidesToShow?0:this.state.currentSlide;this.setState({totalItems:K.length,currentSlide:F&&!j?ee:Z},function(){V.correctItemsPosition(I||V.state.itemWidth)})},D.prototype.setItemsToShow=function(k,I){var F=this,j=this.props.responsive;Object.keys(j).forEach(function(V){var W=j[V],Z=W.breakpoint,K=W.items,ee=Z.max,se=Z.min,he=[window.innerWidth];window.screen&&window.screen.width&&he.push(window.screen.width);var ye=Math.min.apply(Math,he);se<=ye&&ye<=ee&&(F.setState({slidesToShow:K,deviceType:V}),F.setContainerAndItemWidth(K,k,I))})},D.prototype.setContainerAndItemWidth=function(k,I,F){var j=this;if(this.containerRef&&this.containerRef.current){var V=this.containerRef.current.offsetWidth,W=n.getItemClientSideWidth(this.props,k,V);this.setState({containerWidth:V,itemWidth:W},function(){j.props.infinite&&j.setClones(k,W,I,F)}),I&&this.correctItemsPosition(W)}},D.prototype.correctItemsPosition=function(k,I,F){I&&(this.isAnimationAllowed=!0),!I&&this.isAnimationAllowed&&(this.isAnimationAllowed=!1);var j=this.state.totalItems<this.state.slidesToShow?0:-k*this.state.currentSlide;F&&this.setTransformDirectly(j,!0),this.setState({transform:j})},D.prototype.onResize=function(k){var I;I=!!this.props.infinite&&(typeof k!="boolean"||!k),this.setItemsToShow(I)},D.prototype.componentDidUpdate=function(k,I){var F=this,j=k.keyBoardControl,V=k.autoPlay,W=k.children,Z=I.containerWidth,K=I.domLoaded,ee=I.currentSlide;if(this.containerRef&&this.containerRef.current&&this.containerRef.current.offsetWidth!==Z&&(this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),this.itemsToShowTimeout=setTimeout(function(){F.setItemsToShow(!0)},this.props.transitionDuration||g)),j&&!this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),!j&&this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),V&&!this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),V||!this.props.autoPlay||this.autoPlay||(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed)),W.length!==this.props.children.length?D.clonesTimeout=setTimeout(function(){F.props.infinite?F.setClones(F.state.slidesToShow,F.state.itemWidth,!0,!0):F.resetTotalItems()},this.props.transitionDuration||g):this.props.infinite&&this.state.currentSlide!==ee&&this.correctClonesPosition({domLoaded:K}),this.transformPlaceHolder!==this.state.transform&&(this.transformPlaceHolder=this.state.transform),this.props.autoPlay&&this.props.rewind&&!this.props.infinite&&n.isInRightEnd(this.state)){var se=this.props.transitionDuration||g;D.isInThrottleTimeout=setTimeout(function(){F.setIsInThrottle(!1),F.resetAutoplayInterval(),F.goToSlide(0,void 0,!!F.props.rewindWithAnimation)},se+this.props.autoPlaySpeed)}},D.prototype.correctClonesPosition=function(k){var I=this,F=k.domLoaded,j=t.Children.toArray(this.props.children),V=n.checkClonesPosition(this.state,j,this.props),W=V.isReachingTheEnd,Z=V.isReachingTheStart,K=V.nextSlide,ee=V.nextPosition;this.state.domLoaded&&F&&(W||Z)&&(this.isAnimationAllowed=!1,D.transformTimeout=setTimeout(function(){I.setState({transform:ee,currentSlide:K})},this.props.transitionDuration||g))},D.prototype.next=function(k){var I=this;k===void 0&&(k=0);var F=this.props,j=F.afterChange,V=F.beforeChange;if(!n.notEnoughChildren(this.state)){var W=n.populateNextSlides(this.state,this.props,k),Z=W.nextSlides,K=W.nextPosition,ee=this.state.currentSlide;Z!==void 0&&K!==void 0&&(typeof V=="function"&&V(Z,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:K,currentSlide:Z},function(){typeof j=="function"&&(D.afterChangeTimeout=setTimeout(function(){j(ee,I.getState())},I.props.transitionDuration||g))}))}},D.prototype.previous=function(k){var I=this;k===void 0&&(k=0);var F=this.props,j=F.afterChange,V=F.beforeChange;if(!n.notEnoughChildren(this.state)){var W=n.populatePreviousSlides(this.state,this.props,k),Z=W.nextSlides,K=W.nextPosition;if(Z!==void 0&&K!==void 0){var ee=this.state.currentSlide;typeof V=="function"&&V(Z,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:K,currentSlide:Z},function(){typeof j=="function"&&(D.afterChangeTimeout2=setTimeout(function(){j(ee,I.getState())},I.props.transitionDuration||g))})}}},D.prototype.resetAutoplayInterval=function(){this.props.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},D.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),D.clonesTimeout&&clearTimeout(D.clonesTimeout),D.isInThrottleTimeout&&clearTimeout(D.isInThrottleTimeout),D.transformTimeout&&clearTimeout(D.transformTimeout),D.afterChangeTimeout&&clearTimeout(D.afterChangeTimeout),D.afterChangeTimeout2&&clearTimeout(D.afterChangeTimeout2),D.afterChangeTimeout3&&clearTimeout(D.afterChangeTimeout3)},D.prototype.resetMoveStatus=function(){this.onMove=!1,this.initialX=0,this.lastX=0,this.direction="",this.initialY=0},D.prototype.getCords=function(k){var I=k.clientX,F=k.clientY;return{clientX:i.parsePosition(this.props,I),clientY:i.parsePosition(this.props,F)}},D.prototype.handleDown=function(k){if(!(!r.isMouseMoveEvent(k)&&!this.props.swipeable||r.isMouseMoveEvent(k)&&!this.props.draggable||this.isInThrottle)){var I=this.getCords(r.isMouseMoveEvent(k)?k:k.touches[0]),F=I.clientX,j=I.clientY;this.onMove=!0,this.initialX=F,this.initialY=j,this.lastX=F,this.isAnimationAllowed=!1}},D.prototype.handleMove=function(k){if(!(!r.isMouseMoveEvent(k)&&!this.props.swipeable||r.isMouseMoveEvent(k)&&!this.props.draggable||n.notEnoughChildren(this.state))){var I=this.getCords(r.isMouseMoveEvent(k)?k:k.touches[0]),F=I.clientX,j=I.clientY,V=this.initialX-F,W=this.initialY-j;if(this.onMove){if(!(Math.abs(V)>Math.abs(W)))return;var Z=n.populateSlidesOnMouseTouchMove(this.state,this.props,this.initialX,this.lastX,F,this.transformPlaceHolder),K=Z.direction,ee=Z.nextPosition,se=Z.canContinue;K&&(this.direction=K,se&&ee!==void 0&&this.setTransformDirectly(ee)),this.lastX=F}}},D.prototype.handleOut=function(k){this.props.autoPlay&&!this.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed));var I=k.type==="touchend"&&!this.props.swipeable,F=(k.type==="mouseleave"||k.type==="mouseup")&&!this.props.draggable;if(!I&&!F&&this.onMove){if(this.setAnimationDirectly(!0),this.direction==="right")if(this.initialX-this.lastX>=this.props.minimumTouchDrag){var j=Math.round((this.initialX-this.lastX)/this.state.itemWidth);this.next(j)}else this.correctItemsPosition(this.state.itemWidth,!0,!0);this.direction==="left"&&(this.lastX-this.initialX>this.props.minimumTouchDrag?(j=Math.round((this.lastX-this.initialX)/this.state.itemWidth),this.previous(j)):this.correctItemsPosition(this.state.itemWidth,!0,!0)),this.resetMoveStatus()}},D.prototype.isInViewport=function(k){var I=k.getBoundingClientRect(),F=I.top,j=F===void 0?0:F,V=I.left,W=V===void 0?0:V,Z=I.bottom,K=Z===void 0?0:Z,ee=I.right,se=ee===void 0?0:ee;return 0<=j&&0<=W&&K<=(window.innerHeight||document.documentElement.clientHeight)&&se<=(window.innerWidth||document.documentElement.clientWidth)},D.prototype.isChildOfCarousel=function(k){return!!(k instanceof Element&&this.listRef&&this.listRef.current)&&this.listRef.current.contains(k)},D.prototype.onKeyUp=function(k){var I=k.target;switch(k.keyCode){case 37:if(this.isChildOfCarousel(I))return this.previous();break;case 39:if(this.isChildOfCarousel(I))return this.next();break;case 9:if(this.isChildOfCarousel(I)&&I instanceof HTMLInputElement&&this.isInViewport(I))return this.next()}},D.prototype.handleEnter=function(k){r.isMouseMoveEvent(k)&&this.autoPlay&&this.props.autoPlay&&this.props.pauseOnHover&&(clearInterval(this.autoPlay),this.autoPlay=void 0)},D.prototype.goToSlide=function(k,I,F){var j=this;if(F===void 0&&(F=!0),!this.isInThrottle){var V=this.state.itemWidth,W=this.props,Z=W.afterChange,K=W.beforeChange,ee=this.state.currentSlide;typeof K!="function"||I&&(typeof I!="object"||I.skipBeforeChange)||K(k,this.getState()),this.isAnimationAllowed=F,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({currentSlide:k,transform:-V*k},function(){j.props.infinite&&j.correctClonesPosition({domLoaded:!0}),typeof Z!="function"||I&&(typeof I!="object"||I.skipAfterChange)||(D.afterChangeTimeout3=setTimeout(function(){Z(ee,j.getState())},j.props.transitionDuration||g))})}},D.prototype.getState=function(){return this.state},D.prototype.renderLeftArrow=function(k){var I=this,F=this.props,j=F.customLeftArrow,V=F.rtl;return t.createElement(c.LeftArrow,{customLeftArrow:j,getState:function(){return I.getState()},previous:this.previous,disabled:k,rtl:V})},D.prototype.renderRightArrow=function(k){var I=this,F=this.props,j=F.customRightArrow,V=F.rtl;return t.createElement(c.RightArrow,{customRightArrow:j,getState:function(){return I.getState()},next:this.next,disabled:k,rtl:V})},D.prototype.renderButtonGroups=function(){var k=this,I=this.props.customButtonGroup;return I?t.cloneElement(I,{previous:function(){return k.previous()},next:function(){return k.next()},goToSlide:function(F,j){return k.goToSlide(F,j)},carouselState:this.getState()}):null},D.prototype.renderDotsList=function(){var k=this;return t.createElement(s.default,{state:this.state,props:this.props,goToSlide:this.goToSlide,getState:function(){return k.getState()}})},D.prototype.renderCarouselItems=function(){var k=[];if(this.props.infinite){var I=t.Children.toArray(this.props.children);k=n.getClones(this.state.slidesToShow,I)}return t.createElement(h.default,{clones:k,goToSlide:this.goToSlide,state:this.state,notEnoughChildren:n.notEnoughChildren(this.state),props:this.props})},D.prototype.render=function(){var k=this.props,I=k.deviceType,F=k.arrows,j=k.renderArrowsWhenDisabled,V=k.removeArrowOnDeviceType,W=k.infinite,Z=k.containerClass,K=k.sliderClass,ee=k.customTransition,se=k.additionalTransfrom,he=k.renderDotsOutside,ye=k.renderButtonGroupOutside,_e=k.className,ae=k.rtl,be=n.getInitialState(this.state,this.props),Te=be.shouldRenderOnSSR,Ae=be.shouldRenderAtAll,Re=n.isInLeftEnd(this.state),He=n.isInRightEnd(this.state),Se=F&&!(V&&(I&&-1<V.indexOf(I)||this.state.deviceType&&-1<V.indexOf(this.state.deviceType)))&&!n.notEnoughChildren(this.state)&&Ae,qe=!W&&Re,it=!W&&He,tt=i.getTransform(this.state,this.props);return t.createElement(t.Fragment,null,t.createElement("div",{className:"react-multi-carousel-list "+Z+" "+_e,dir:ae?"rtl":"ltr",ref:this.containerRef},t.createElement("ul",{ref:this.listRef,className:"react-multi-carousel-track "+K,style:{transition:this.isAnimationAllowed?ee||w:"none",overflow:Te?"hidden":"unset",transform:"translate3d("+(tt+se)+"px,0,0)"},onMouseMove:this.handleMove,onMouseDown:this.handleDown,onMouseUp:this.handleOut,onMouseEnter:this.handleEnter,onMouseLeave:this.handleOut,onTouchStart:this.handleDown,onTouchMove:this.handleMove,onTouchEnd:this.handleOut},this.renderCarouselItems()),Se&&(!qe||j)&&this.renderLeftArrow(qe),Se&&(!it||j)&&this.renderRightArrow(it),Ae&&!ye&&this.renderButtonGroups(),Ae&&!he&&this.renderDotsList()),Ae&&he&&this.renderDotsList(),Ae&&ye&&this.renderButtonGroups())},D.defaultProps={slidesToSlide:1,infinite:!1,draggable:!0,swipeable:!0,arrows:!0,renderArrowsWhenDisabled:!1,containerClass:"",sliderClass:"",itemClass:"",keyBoardControl:!0,autoPlaySpeed:3e3,showDots:!1,renderDotsOutside:!1,renderButtonGroupOutside:!1,minimumTouchDrag:80,className:"",dotListClass:"",focusOnSelect:!1,centerMode:!1,additionalTransfrom:0,pauseOnHover:!0,shouldResetAutoplay:!0,rewind:!1,rtl:!1,rewindWithAnimation:!1},D}(t.Component);return lb.default=T,lb}var D2;function UNe(){if(D2)return kA;D2=1,Object.defineProperty(kA,"__esModule",{value:!0});var e=VNe();return kA.default=e.default,kA}var Nk,P2;function $Ne(){return P2||(P2=1,Nk=UNe()),Nk}var qNe=$Ne();const HNe=_a(qNe);yv.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";const ub=new Array(10).fill(null).map((e,t)=>({id:t,label:`Day ${t+1}`,center:[72.5714+t*.1,23.0225+t*.1],zoom:10+t%3})),I2=({center:e,zoom:t,mapStyle:n})=>{const r=q.useRef(null);return q.useEffect(()=>{if(!r.current)return;const s=new yv.Map({container:r.current,style:n,center:e,zoom:t});return()=>s.remove()},[e,t,n]),$.jsx(Dr,{ref:r,sx:{width:"100%",height:"100%"}})};function GNe(){const[e,t]=q.useState(ub[0]),[n,r]=q.useState(ub[1]),s=cs(),c=(i,g)=>{const w=ub.find(T=>T.id===g);i==="first"?t(w):r(w)},h={superLargeDesktop:{breakpoint:{max:4e3,min:1536},items:5},desktop:{breakpoint:{max:1536,min:1024},items:4},tablet:{breakpoint:{max:1024,min:640},items:3},mobile:{breakpoint:{max:640,min:0},items:2}};return $.jsxs(Dr,{p:3,children:[$.jsx(rr,{variant:"h4",gutterBottom:!0,children:"Compare Progress"}),$.jsx(Dr,{sx:{mt:4,mb:4,height:100},children:$.jsx(HNe,{responsive:h,centerMode:!0,infinite:!0,autoPlay:!0,autoPlaySpeed:5e3,itemClass:"carousel-item-padding-40-px",children:ub.map((i,g)=>$.jsx(y0,{sx:{mx:1,borderColor:s.palette.primary,borderRadius:2,border:1,boxShadow:6,height:"80px"},children:$.jsx(iD,{children:$.jsx(rr,{align:"center",variant:"subtitle1",children:i.label})})},i.id))})}),$.jsxs(Dr,{display:"flex",gap:2,mb:3,children:[$.jsx(fc,{fullWidth:!0,children:$.jsx(Jy,{value:e.id,onChange:i=>c("first",i.target.value),children:ub.map(i=>$.jsx(pc,{value:i.id,children:i.label},i.id))})}),$.jsx(fc,{fullWidth:!0,children:$.jsx(Jy,{value:n.id,onChange:i=>c("second",i.target.value),children:ub.map(i=>$.jsx(pc,{value:i.id,children:i.label},i.id))})})]}),$.jsx(Dr,{mb:5,borderRadius:2,overflow:"hidden",sx:{height:400},children:$.jsx(h5,{itemOne:$.jsx(Dr,{sx:{width:"100%",height:"100%"},children:$.jsx(I2,{center:e.center,zoom:e.zoom,mapStyle:"mapbox://styles/mapbox/streets-v11"})}),itemTwo:$.jsx(Dr,{sx:{width:"100%",height:"100%"},children:$.jsx(I2,{center:n.center,zoom:n.zoom,mapStyle:"mapbox://styles/mapbox/satellite-v9"})}),style:{height:"100%"}})})]})}const WNe=["Info","Files","Compare","DPR FORM"],YNe=()=>{const[e,t]=q.useState(0),n=(r,s)=>{t(s)};return $.jsxs(fu,{elevation:3,sx:{p:2},children:[$.jsx(rJ,{value:e,onChange:n,variant:"fullWidth",sx:{mb:2,borderBottom:"1px solid #e0e0e0"},children:WNe.map((r,s)=>$.jsx(tJ,{label:r},s))}),$.jsxs(Dr,{children:[e===0?$.jsx(HBe,{}):null,e===1?$.jsx(Ute,{}):null,e===2?$.jsx(GNe,{}):null,e===3?$.jsx(SNe,{}):null]})]})};yv.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";function XNe(){const e=q.useRef(null);cs();const[t,n]=q.useState("2024-03-01"),[r,s]=q.useState({orthomosaic:!0,asBuiltOverlay:!1,annotations:!1,measurements:!1});q.useEffect(()=>{const h=new yv.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v11",center:[72.5714,23.0225],zoom:10});return()=>h.remove()},[]);const c=h=>{s(i=>({...i,[h.target.name]:h.target.checked}))};return $.jsxs(Dr,{sx:{px:3,py:2},children:[$.jsxs(Dr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[$.jsxs(rr,{variant:"body2",color:"text.secondary",children:["Dashboard / Projects / ",$.jsx("strong",{children:"City Drainage Phase 1"})]}),$.jsxs(yl,{direction:"row",spacing:3,alignItems:"center",children:[$.jsx(ms,{variant:"contained",color:"primary",children:"Upload New"}),$.jsxs(yl,{direction:"row",spacing:1,alignItems:"center",children:[$.jsx(Dr,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:"orange"}}),$.jsx(rr,{variant:"body2",color:"text.secondary",children:"In Progress"})]})]})]}),$.jsxs(Dr,{sx:{display:"flex",height:"calc(100vh - 150px)"},children:[$.jsxs(Dr,{sx:{width:"30%",pr:3,overflowY:"auto"},children:[$.jsx(rr,{variant:"h5",mb:2,children:"Project Details"}),$.jsxs(yl,{spacing:1,mb:3,children:[$.jsxs(rr,{children:[$.jsx("strong",{children:"Name:"})," City Drainage Phase 1"]}),$.jsxs(rr,{children:[$.jsx("strong",{children:"Capture Date:"})," 2025-06-25"]}),$.jsxs(rr,{children:[$.jsx("strong",{children:"Area:"})," 3.2 sq km"]})]}),$.jsx(gu,{sx:{my:2}}),$.jsx(rr,{variant:"subtitle1",gutterBottom:!0,children:"Layers"}),$.jsxs(JQ,{children:[$.jsx(Eb,{control:$.jsx(dA,{checked:r.orthomosaic,onChange:c,name:"orthomosaic"}),label:"Orthomosaic"}),$.jsx(Eb,{control:$.jsx(dA,{checked:r.asBuiltOverlay,onChange:c,name:"asBuiltOverlay"}),label:"As-Built Overlay"}),$.jsx(Eb,{control:$.jsx(dA,{checked:r.annotations,onChange:c,name:"annotations"}),label:"Annotations"}),$.jsx(Eb,{control:$.jsx(dA,{checked:r.measurements,onChange:c,name:"measurements"}),label:"Measurements"})]}),$.jsx(Dr,{mt:3,children:$.jsxs(fc,{fullWidth:!0,children:[$.jsx(Sf,{id:"historical-label",children:"Historical Data"}),$.jsxs(Jy,{labelId:"historical-label",value:t,label:"Historical Data",onChange:h=>n(h.target.value),children:[$.jsx(pc,{value:"2024-03-01",children:"March 1, 2024"}),$.jsx(pc,{value:"2024-06-15",children:"June 15, 2024"}),$.jsx(pc,{value:"2025-01-05",children:"January 5, 2025"})]})]})})]}),$.jsx(Dr,{ref:e,sx:{width:"70%",borderRadius:2,overflow:"hidden",height:"80%"}})]})]})}yv.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";const dS=new Array(10).fill(null).map((e,t)=>({id:t,label:`Day ${t+1}`,center:[72.5714+t*.1,23.0225+t*.1],zoom:10+t%3})),k2=({center:e,zoom:t,mapStyle:n})=>{const r=q.useRef(null);return q.useEffect(()=>{if(!r.current)return;const s=new yv.Map({container:r.current,style:n,center:e,zoom:t});return()=>s.remove()},[e,t,n]),$.jsx(Dr,{ref:r,sx:{width:"100%",height:"100%"}})};function ZNe(){const[e,t]=q.useState(dS[0]),[n,r]=q.useState(dS[1]);cs();const s=(c,h)=>{const i=dS.find(g=>g.id===h);c==="first"?t(i):r(i)};return $.jsxs(Dr,{p:3,children:[$.jsx(rr,{variant:"h4",gutterBottom:!0,children:"Project Name - Comparision Slider"}),$.jsxs(Dr,{display:"flex",gap:2,mb:3,children:[$.jsx(fc,{fullWidth:!0,children:$.jsx(Jy,{value:e.id,onChange:c=>s("first",c.target.value),children:dS.map(c=>$.jsx(pc,{value:c.id,children:c.label},c.id))})}),$.jsx(fc,{fullWidth:!0,children:$.jsx(Jy,{value:n.id,onChange:c=>s("second",c.target.value),children:dS.map(c=>$.jsx(pc,{value:c.id,children:c.label},c.id))})})]}),$.jsx(Dr,{mb:5,borderRadius:2,overflow:"hidden",sx:{height:400},children:$.jsx(h5,{itemOne:$.jsx(Dr,{sx:{width:"100%",height:"100%"},children:$.jsx(k2,{center:e.center,zoom:e.zoom,mapStyle:"mapbox://styles/mapbox/streets-v11"})}),itemTwo:$.jsx(Dr,{sx:{width:"100%",height:"100%"},children:$.jsx(k2,{center:n.center,zoom:n.zoom,mapStyle:"mapbox://styles/mapbox/satellite-v9"})}),style:{height:"100%"}})})]})}function Yte({captionLabel:e,currencies:t,formState:n,iconPrimary:r,iconSecondary:s,selected:c,textPrimary:h,textSecondary:i}){const g=r,w=r?$.jsx(g,{fontSize:"small",sx:{color:"grey.700"}}):null,T=s,A=s?$.jsx(T,{fontSize:"small",sx:{color:"grey.700"}}):null,D=n==="error",k=c||"",[I,F]=q.useState(k),j=V=>{V!=null&&V.target.value&&F(V==null?void 0:V.target.value)};return $.jsx(fc,{fullWidth:!0,error:D,children:$.jsx(Ps,{id:"outlined-select-currency",select:!0,fullWidth:!0,label:e,value:I,onChange:j,slotProps:{input:{startAdornment:$.jsxs($.Fragment,{children:[w&&$.jsx(_S,{position:"start",children:w}),h&&$.jsxs($.Fragment,{children:[$.jsx(_S,{position:"start",children:h}),$.jsx(gu,{sx:{height:28,m:.5},orientation:"vertical"})]})]}),endAdornment:$.jsxs($.Fragment,{children:[A&&$.jsx(_S,{position:"end",children:A}),i&&$.jsxs($.Fragment,{children:[$.jsx(gu,{sx:{height:28,m:.5},orientation:"vertical"}),$.jsx(_S,{position:"end",children:i})]})]})}},children:t==null?void 0:t.map((V,W)=>$.jsx(pc,{value:V.value,children:V.label},W))})})}Yte.propTypes={captionLabel:nt.string,currencies:nt.object,formState:nt.string,iconPrimary:nt.any,iconSecondary:nt.any,selected:nt.string,textPrimary:nt.string,textSecondary:nt.string};const KNe=[{value:"sunny",label:"Sunny"},{value:"cloudy",label:"Cloudy"},{value:"windy",label:"Windy"},{value:"rainy",label:"Rainy"}],QNe=[{value:"completed",label:"Completed"},{value:"in_progress",label:"In Progress"},{value:"delayed",label:"Delayed"},{value:"planned",label:"Planned Further"}],JNe=()=>{const[e]=q.useState({name:"Downtown Highrise",location:"City Center",contractId:"CT-2023-001",team:"John Smith, Jane Doe"}),[t,n]=q.useState(""),[r,s]=q.useState(""),[c,h]=q.useState(""),[i,g]=q.useState(""),[w,T]=q.useState(""),[A,D]=q.useState([{name:"",quantity:"",status:""}]),[k,I]=q.useState(""),[F,j]=q.useState(""),[V,W]=q.useState(""),[Z,K]=q.useState(""),[ee,se]=q.useState([]),he=(ae,be,Te)=>{const Ae=[...A];Ae[ae][be]=Te,D(Ae)},ye=()=>{D([...A,{name:"",quantity:"",status:""}])},_e=()=>{Z.trim()&&(se([...ee,Z]),K(""))};return $.jsxs(iQ,{title:"New Daily Progress Report",sx:{maxWidth:900,margin:"0 auto",mt:3},children:[$.jsx(rr,{variant:"subtitle1",sx:{mb:2},children:"Fill in the details for today's progress report"}),$.jsxs(Dr,{component:"form",noValidate:!0,autoComplete:"off",children:[$.jsxs(_o,{container:!0,spacing:2,sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:2,p:2},children:[$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsx(Ps,{label:"Project",value:e.name,fullWidth:!0,InputProps:{readOnly:!0},sx:{mb:1}})}),$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsx(Ps,{label:"Project Location",value:e.location,fullWidth:!0,InputProps:{readOnly:!0},sx:{mb:1}})}),$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsx(Ps,{label:"Contract ID/Project number",value:e.contractId,fullWidth:!0,InputProps:{readOnly:!0},sx:{mb:1}})}),$.jsx(_o,{item:!0,xs:12,md:6,children:$.jsx(Ps,{label:"Project Team",value:e.team,fullWidth:!0,InputProps:{readOnly:!0},sx:{mb:1}})}),$.jsx(_o,{item:!0,xs:12,md:6,children:$.jsx(Ps,{label:"Date",type:"date",value:t,onChange:ae=>n(ae.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},sx:{mb:1}})})]}),$.jsx(Dr,{sx:{mb:2},children:$.jsx(Yte,{captionLabel:"Weather Conditions",currencies:KNe,selected:r,formState:"",textPrimary:null,textSecondary:null,iconPrimary:null,iconSecondary:null})}),$.jsxs(_o,{container:!0,spacing:2,sx:{mb:2},children:[$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsx(Ps,{label:"Manpower",value:c,onChange:ae=>h(ae.target.value),fullWidth:!0,type:"number"})}),$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsx(Ps,{label:"Material",value:i,onChange:ae=>g(ae.target.value),fullWidth:!0})}),$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsx(Ps,{label:"Machinery",value:w,onChange:ae=>T(ae.target.value),fullWidth:!0})})]}),$.jsxs(Dr,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:2,p:2},children:[$.jsx(rr,{variant:"h5",sx:{mb:1},children:"Activity Progress"}),A.map((ae,be)=>$.jsxs(_o,{container:!0,spacing:2,sx:{mb:1},children:[$.jsx(_o,{item:!0,xs:12,md:5,children:$.jsx(Ps,{label:"Activity Name",value:ae.name,onChange:Te=>he(be,"name",Te.target.value),fullWidth:!0})}),$.jsx(_o,{item:!0,xs:12,md:3,children:$.jsx(Ps,{label:"Quantity",value:ae.quantity,onChange:Te=>he(be,"quantity",Te.target.value),fullWidth:!0,type:"number"})}),$.jsx(_o,{item:!0,xs:12,md:4,children:$.jsxs(fc,{fullWidth:!0,children:[$.jsx(Sf,{children:"Status"}),$.jsx(Fp,{label:"Status",value:ae.status,onChange:Te=>he(be,"status",Te.target.value),inputComponent:({inputRef:Te,...Ae})=>$.jsxs("select",{ref:Te,...Ae,style:{width:"100%",height:"100%",border:"none",background:"none"},children:[$.jsx("option",{value:"",children:"Select status"}),QNe.map(Re=>$.jsx("option",{value:Re.value,children:Re.label},Re.value))]})})]})})]},be)),$.jsx(ms,{variant:"outlined",startIcon:$.jsx(Sj,{}),onClick:ye,sx:{mt:1},children:"Add Activity"})]}),$.jsx(Dr,{sx:{mb:2},children:$.jsx(Ps,{label:"Issues & Challenges",value:k,onChange:ae=>I(ae.target.value),fullWidth:!0,multiline:!0,minRows:2,placeholder:"Describe any issues or challenges encountered"})}),$.jsxs(_o,{container:!0,spacing:2,sx:{mb:2},children:[$.jsx(_o,{item:!0,xs:12,md:6,children:$.jsx(Ps,{label:"Key Milestones Achieved",value:F,onChange:ae=>j(ae.target.value),fullWidth:!0,multiline:!0,minRows:2,InputProps:{endAdornment:$.jsx(ms,{size:"small",children:"add Photo options"})}})}),$.jsx(_o,{item:!0,xs:12,md:6,children:$.jsx(Ps,{label:"Observation or Remarks",value:V,onChange:ae=>W(ae.target.value),fullWidth:!0,multiline:!0,minRows:2})})]}),$.jsxs(Dr,{sx:{display:"flex",alignItems:"center",mb:2},children:[$.jsx(Ps,{label:"Create New Field",value:Z,onChange:ae=>K(ae.target.value),sx:{flex:1,mr:2}}),$.jsx(ms,{variant:"contained",onClick:_e,children:"Add +"})]}),ee.length>0&&$.jsx(yl,{direction:"row",spacing:1,sx:{mb:2},children:ee.map((ae,be)=>$.jsx(N0,{label:ae},be))}),$.jsx(ms,{variant:"contained",color:"primary",fullWidth:!0,children:"Submit Daily Progress Report"})]})]})};function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function eje(e,t){if(zg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xte(e){var t=eje(e,"string");return zg(t)=="symbol"?t:t+""}function t0(e,t,n){return(t=Xte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(n),!0).forEach(function(r){t0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function em(e,t){if(e==null)return{};var n,r,s=vi(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xte(r.key),r)}}function Ka(e,t,n){return t&&L2(e.prototype,t),n&&L2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vR(e){return vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vR(e)}function Zte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zte=function(){return!!e})()}function tje(e,t){if(t&&(zg(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bZ(e)}function xc(e,t,n){return t=vR(t),tje(e,Zte()?Reflect.construct(t,n||[],vR(e).constructor):t.apply(e,n))}function bc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jM(e,t)}function Kte(e){if(Array.isArray(e))return e}function nje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,c,h,i=[],g=!0,w=!1;try{if(c=(n=n.call(e)).next,t!==0)for(;!(g=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);g=!0);}catch(T){w=!0,s=T}finally{try{if(!g&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(w)throw s}}return i}}function _B(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p5(e,t){if(e){if(typeof e=="string")return _B(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_B(e,t):void 0}}function Qte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E0(e,t){return Kte(e)||nje(e,t)||p5(e,t)||Qte()}function Jte(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Jte(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ra(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Jte(e))&&(r&&(r+=" "),r+=t);return r}var jk,z2;function rje(){if(z2)return jk;z2=1;var e=function(t,n,r,s,c,h,i,g){if(!t){var w;if(n===void 0)w=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var T=[r,s,c,h,i,g],A=0;w=new Error(n.replace(/%s/g,function(){return T[A++]})),w.name="Invariant Violation"}throw w.framesToPop=1,w}};return jk=e,jk}var ije=rje();const wT=_a(ije);var oje=function(){};function sje(e,t){var n={};return Object.keys(e).forEach(function(r){n[uM(r)]=oje}),n}function F2(e,t){return e[t]!==void 0}function uM(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function aje(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function ene(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function tne(e){function t(n){var r=this.constructor.getDerivedStateFromProps(e,n);return r??null}this.setState(t.bind(this))}function nne(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ene.__suppressDeprecationWarning=!0;tne.__suppressDeprecationWarning=!0;nne.__suppressDeprecationWarning=!0;function lje(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,r=null,s=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),n!==null||r!==null||s!==null){var c=e.displayName||e.name,h=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+c+" uses "+h+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=ene,t.componentWillReceiveProps=tne),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=nne;var i=t.componentDidUpdate;t.componentDidUpdate=function(w,T,A){var D=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:A;i.call(this,w,T,D)}}return e}var cje="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function rne(e,t,n){n===void 0&&(n=[]);var r=e.displayName||e.name||"Component",s=aje(e),c=Object.keys(t),h=c.map(uM);s||!n.length||wT(!1);var i=function(w){tD(T,w);function T(){for(var D,k=arguments.length,I=new Array(k),F=0;F<k;F++)I[F]=arguments[F];D=w.call.apply(w,[this].concat(I))||this,D.handlers=Object.create(null),c.forEach(function(V){var W=t[V],Z=function(ee){if(D.props[W]){var se;D._notifying=!0;for(var he=arguments.length,ye=new Array(he>1?he-1:0),_e=1;_e<he;_e++)ye[_e-1]=arguments[_e];(se=D.props)[W].apply(se,[ee].concat(ye)),D._notifying=!1}D.unmounted||D.setState(function(ae){var be,Te=ae.values;return{values:Tt(Object.create(null),Te,(be={},be[V]=ee,be))}})};D.handlers[W]=Z}),n.length&&(D.attachRef=function(V){D.inner=V});var j=Object.create(null);return c.forEach(function(V){j[V]=D.props[uM(V)]}),D.state={values:j,prevProps:{}},D}var A=T.prototype;return A.shouldComponentUpdate=function(){return!this._notifying},T.getDerivedStateFromProps=function(k,I){var F=I.values,j=I.prevProps,V={values:Tt(Object.create(null),F),prevProps:{}};return c.forEach(function(W){V.prevProps[W]=k[W],!F2(k,W)&&F2(j,W)&&(V.values[W]=k[uM(W)])}),V},A.componentWillUnmount=function(){this.unmounted=!0},A.render=function(){var k=this,I=this.props,F=I.innerRef,j=vi(I,["innerRef"]);h.forEach(function(W){delete j[W]});var V={};return c.forEach(function(W){var Z=k.props[W];V[W]=Z!==void 0?Z:k.state.values[W]}),St.createElement(e,Tt({},j,V,this.handlers,{ref:F||this.attachRef}))},T}(St.Component);lje(i),i.displayName="Uncontrolled("+r+")",i.propTypes=Tt({innerRef:function(){}},sje(t)),n.forEach(function(w){i.prototype[w]=function(){var A;return(A=this.inner)[w].apply(A,arguments)}});var g=i;return St.forwardRef&&(g=St.forwardRef(function(w,T){return St.createElement(i,Tt({},w,{innerRef:T,__source:{fileName:cje,lineNumber:128},__self:this}))}),g.propTypes=i.propTypes),g.ControlledComponent=e,g.deferControlTo=function(w,T,A){return T===void 0&&(T={}),rne(w,Tt({},t,T),A)},g}var _R="milliseconds",ST="seconds",TT="minutes",ET="hours",C0="day",n1="week",CT="month",A0="year",M0="decade",R0="century",ine={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},uje={month:1,year:12,decade:10*12,century:100*12};function dje(e){return[31,hje(e),31,30,31,30,31,31,30,31,30,31]}function hje(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Mf(e,t,n){switch(e=new Date(e),n){case _R:case ST:case TT:case ET:case C0:case n1:return fje(e,t*ine[n]);case CT:case A0:case M0:case R0:return pje(e,t*uje[n])}throw new TypeError('Invalid units: "'+n+'"')}function fje(e,t){var n=new Date(+e+t);return mje(e,n)}function pje(e,t){var n=e.getFullYear(),r=e.getMonth(),s=e.getDate(),c=n*12+r+t,h=Math.trunc(c/12),i=c%12,g=Math.min(s,dje(h)[i]),w=new Date(e);return w.setFullYear(h),w.setDate(1),w.setMonth(i),w.setDate(g),w}function mje(e,t){var n=e.getTimezoneOffset(),r=t.getTimezoneOffset(),s=r-n;return new Date(+t+s*ine.minutes)}function AT(e,t,n){return Mf(e,-t,n)}function Bl(e,t,n){switch(e=new Date(e),t){case R0:case M0:case A0:e=bR(e,0);case CT:e=cne(e,1);case n1:case C0:e=DT(e,0);case ET:e=r1(e,0);case TT:e=RT(e,0);case ST:e=MT(e,0)}return t===M0&&(e=AT(e,D0(e)%10,"year")),t===R0&&(e=AT(e,D0(e)%100,"year")),t===n1&&(e=une(e,0,n)),e}function xR(e,t,n){switch(e=new Date(e),e=Bl(e,t,n),t){case R0:case M0:case A0:case CT:case n1:e=Mf(e,1,t),e=AT(e,1,C0),e.setHours(23,59,59,999);break;case C0:e.setHours(23,59,59,999);break;case ET:case TT:case ST:e=Mf(e,1,t),e=AT(e,1,_R)}return e}var w1=T1(function(e,t){return e===t}),m5=T1(function(e,t){return e!==t}),ID=T1(function(e,t){return e>t}),gE=T1(function(e,t){return e>=t}),g5=T1(function(e,t){return e<t}),S1=T1(function(e,t){return e<=t});function one(){return new Date(Math.min.apply(Math,arguments))}function sne(){return new Date(Math.max.apply(Math,arguments))}function ane(e,t,n,r){return r=r||"day",(!t||gE(e,t,r))&&(!n||S1(e,n,r))}var MT=_v("Milliseconds"),RT=_v("Seconds"),r1=_v("Minutes"),DT=_v("Hours"),lne=_v("Day"),cne=_v("Date"),bR=_v("Month"),D0=_v("FullYear");function gje(e,t){return t===void 0?D0(Bl(e,M0)):Mf(e,t+10,A0)}function yje(e,t){return t===void 0?D0(Bl(e,R0)):Mf(e,t+100,A0)}function une(e,t,n){var r=(lne(e)+7-(n||0))%7;return t===void 0?r:Mf(e,t-r,C0)}function vje(e,t,n,r){var s,c,h;switch(n){case _R:case ST:case TT:case ET:case C0:case n1:s=t.getTime()-e.getTime();break;case CT:case A0:case M0:case R0:s=(D0(t)-D0(e))*12+bR(t)-bR(e);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case _R:c=1;break;case ST:c=1e3;break;case TT:c=1e3*60;break;case ET:c=1e3*60*60;break;case C0:c=1e3*60*60*24;break;case n1:c=1e3*60*60*24*7;break;case CT:c=1;break;case A0:c=12;break;case M0:c=120;break;case R0:c=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return h=s/c,r?h:Math.round(h)}function _v(e){var t=function(n){switch(n){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(n,r){if(r===void 0)return n["get"+e]();var s=new Date(n);return s["set"+e](r),t&&s["get"+e]()!=r&&(e==="Hours"||r>=t&&s.getHours()-n.getHours()<Math.floor(r/t))&&s["set"+e](r+t),s}}function T1(e){return function(t,n,r){return e(+Bl(t,r),+Bl(n,r))}}const B2=Object.freeze(Object.defineProperty({__proto__:null,add:Mf,century:yje,date:cne,day:lne,decade:gje,diff:vje,endOf:xR,eq:w1,gt:ID,gte:gE,hours:DT,inRange:ane,lt:g5,lte:S1,max:sne,milliseconds:MT,min:one,minutes:r1,month:bR,neq:m5,seconds:RT,startOf:Bl,subtract:AT,weekday:une,year:D0},Symbol.toStringTag,{value:"Module"}));function _je(e){if(Array.isArray(e))return _B(e)}function dne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dM(e){return _je(e)||dne(e)||p5(e)||xje()}var Vk,N2;function hne(){if(N2)return Vk;N2=1;function e(t,n,r){var s=-1,c=t.length;n<0&&(n=-n>c?0:c+n),r=r>c?c:r,r<0&&(r+=c),c=n>r?0:r-n>>>0,n>>>=0;for(var h=Array(c);++s<c;)h[s]=t[s+n];return h}return Vk=e,Vk}var Uk,j2;function yE(){if(j2)return Uk;j2=1;function e(t,n){return t===n||t!==t&&n!==n}return Uk=e,Uk}var $k,V2;function fne(){if(V2)return $k;V2=1;var e=typeof window=="object"&&window&&window.Object===Object&&window;return $k=e,$k}var qk,U2;function om(){if(U2)return qk;U2=1;var e=fne(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return qk=n,qk}var Hk,$2;function E1(){if($2)return Hk;$2=1;var e=om(),t=e.Symbol;return Hk=t,Hk}var Gk,q2;function bje(){if(q2)return Gk;q2=1;var e=E1(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function c(h){var i=n.call(h,s),g=h[s];try{h[s]=void 0;var w=!0}catch{}var T=r.call(h);return w&&(i?h[s]=g:delete h[s]),T}return Gk=c,Gk}var Wk,H2;function wje(){if(H2)return Wk;H2=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Wk=n,Wk}var Yk,G2;function C1(){if(G2)return Yk;G2=1;var e=E1(),t=bje(),n=wje(),r="[object Null]",s="[object Undefined]",c=e?e.toStringTag:void 0;function h(i){return i==null?i===void 0?s:r:c&&c in Object(i)?t(i):n(i)}return Yk=h,Yk}var Xk,W2;function Ng(){if(W2)return Xk;W2=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Xk=e,Xk}var Zk,Y2;function y5(){if(Y2)return Zk;Y2=1;var e=C1(),t=Ng(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";function h(i){if(!t(i))return!1;var g=e(i);return g==r||g==s||g==n||g==c}return Zk=h,Zk}var Kk,X2;function v5(){if(X2)return Kk;X2=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Kk=t,Kk}var Qk,Z2;function vE(){if(Z2)return Qk;Z2=1;var e=y5(),t=v5();function n(r){return r!=null&&t(r.length)&&!e(r)}return Qk=n,Qk}var Jk,K2;function _5(){if(K2)return Jk;K2=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,s){var c=typeof r;return s=s??e,!!s&&(c=="number"||c!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return Jk=n,Jk}var eO,Q2;function kD(){if(Q2)return eO;Q2=1;var e=yE(),t=vE(),n=_5(),r=Ng();function s(c,h,i){if(!r(i))return!1;var g=typeof h;return(g=="number"?t(i)&&n(h,i.length):g=="string"&&h in i)?e(i[h],c):!1}return eO=s,eO}var tO,J2;function Sje(){if(J2)return tO;J2=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return tO=t,tO}var nO,eG;function Tje(){if(eG)return nO;eG=1;var e=Sje(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return nO=n,nO}var rO,tG;function xv(){if(tG)return rO;tG=1;function e(t){return t!=null&&typeof t=="object"}return rO=e,rO}var iO,nG;function _E(){if(nG)return iO;nG=1;var e=C1(),t=xv(),n="[object Symbol]";function r(s){return typeof s=="symbol"||t(s)&&e(s)==n}return iO=r,iO}var oO,rG;function Eje(){if(rG)return oO;rG=1;var e=Tje(),t=Ng(),n=_E(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,h=/^0o[0-7]+$/i,i=parseInt;function g(w){if(typeof w=="number")return w;if(n(w))return r;if(t(w)){var T=typeof w.valueOf=="function"?w.valueOf():w;w=t(T)?T+"":T}if(typeof w!="string")return w===0?w:+w;w=e(w);var A=c.test(w);return A||h.test(w)?i(w.slice(2),A?2:8):s.test(w)?r:+w}return oO=g,oO}var sO,iG;function pne(){if(iG)return sO;iG=1;var e=Eje(),t=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-1/0){var c=s<0?-1:1;return c*n}return s===s?s:0}return sO=r,sO}var aO,oG;function mne(){if(oG)return aO;oG=1;var e=pne();function t(n){var r=e(n),s=r%1;return r===r?s?r-s:r:0}return aO=t,aO}var lO,sG;function Cje(){if(sG)return lO;sG=1;var e=hne(),t=kD(),n=mne(),r=Math.ceil,s=Math.max;function c(h,i,g){(g?t(h,i,g):i===void 0)?i=1:i=s(n(i),0);var w=h==null?0:h.length;if(!w||i<1)return[];for(var T=0,A=0,D=Array(r(w/i));T<w;)D[A++]=e(h,T,T+=i);return D}return lO=c,lO}var Aje=Cje();const Mje=_a(Aje);function xE(e){return e&&e.ownerDocument||document}function Rje(e){var t=xE(e);return t&&t.defaultView||window}function Dje(e,t){return Rje(e).getComputedStyle(e,t)}var Pje=/([A-Z])/g;function Ije(e){return e.replace(Pje,"-$1").toLowerCase()}var kje=/^ms-/;function jA(e){return Ije(e).replace(kje,"-ms-")}var Oje=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Lje(e){return!!(e&&Oje.test(e))}function gb(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(jA(t))||Dje(e).getPropertyValue(jA(t));Object.keys(t).forEach(function(s){var c=t[s];!c&&c!==0?e.style.removeProperty(jA(s)):Lje(s)?r+=s+"("+c+") ":n+=jA(s)+": "+c+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}function PT(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function zje(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function x5(e){return"window"in e&&e.window===e?e:zje(e)&&e.defaultView||!1}function gne(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function n(r,s){var c=x5(r);if(s===void 0)return c?c[e]:r[t];c?c.scrollTo(c[e],s):r[t]=s}return n}const yne=gne("pageXOffset"),vne=gne("pageYOffset");function p0(e){var t=xE(e),n={top:0,left:0,height:0,width:0},r=t&&t.documentElement;return!r||!PT(r,e)||(e.getBoundingClientRect!==void 0&&(n=e.getBoundingClientRect()),n={top:n.top+vne(r)-(r.clientTop||0),left:n.left+yne(r)-(r.clientLeft||0),width:n.width,height:n.height}),n}var Fje=function(t){return!!t&&"offsetParent"in t};function Bje(e){for(var t=xE(e),n=e&&e.offsetParent;Fje(n)&&n.nodeName!=="HTML"&&gb(n,"position")==="static";)n=n.offsetParent;return n||t.documentElement}var Nje=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function _ne(e,t){var n={top:0,left:0},r;if(gb(e,"position")==="fixed")r=e.getBoundingClientRect();else{var s=t||Bje(e);r=p0(e),Nje(s)!=="html"&&(n=p0(s));var c=String(gb(s,"borderTopWidth")||0);n.top+=parseInt(c,10)-vne(s)||0;var h=String(gb(s,"borderLeftWidth")||0);n.left+=parseInt(h,10)-yne(s)||0}var i=String(gb(e,"marginTop")||0),g=String(gb(e,"marginLeft")||0);return Tt({},r,{top:r.top-n.top-(parseInt(i,10)||0),left:r.left-n.left-(parseInt(g,10)||0)})}const b5=!!(typeof window<"u"&&window.document&&window.document.createElement);var aG=new Date().getTime();function jje(e){var t=new Date().getTime(),n=Math.max(0,16-(t-aG)),r=setTimeout(e,n);return aG=t,r}var Vje=["","webkit","moz","o","ms"],xB="clearTimeout",bB=jje,lG=function(t,n){return t+(t?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};b5&&Vje.some(function(e){var t=lG(e,"request");return t in window&&(xB=lG(e,"cancel"),bB=function(r){return window[t](r)}),!!bB});var cG=function(t){typeof window[xB]=="function"&&window[xB](t)},xne=bB,cO;function Uje(e,t){if(!cO){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;cO=function(c,h){return r.call(c,h)}}return cO(e,t)}var $je=Function.prototype.bind.call(Function.prototype.call,[].slice);function qje(e,t){return $je(e.querySelectorAll(t))}var wB=!1,SB=!1;try{var uO={get passive(){return wB=!0},get once(){return SB=wB=!0}};b5&&(window.addEventListener("test",uO,uO),window.removeEventListener("test",uO,!0))}catch{}function Hje(e,t,n,r){if(r&&typeof r!="boolean"&&!SB){var s=r.once,c=r.capture,h=n;!SB&&s&&(h=n.__once||function i(g){this.removeEventListener(t,i,c),n.call(this,g)},n.__once=h),e.addEventListener(t,h,wB?r:c)}e.addEventListener(t,n,r)}function Gje(e){const t=q.useRef(e);return q.useEffect(()=>{t.current=e},[e]),t}function uG(e){const t=Gje(e);return q.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function dG(){return q.useState(null)}function Wje(){const e=q.useRef(!0),t=q.useRef(()=>e.current);return q.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function Yje(e){const t=Wje();return[e[0],q.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Xje=gZ({defaultModifiers:[hZ,pZ,aZ,lZ,fZ,dZ,mZ,sZ]}),hG=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Zje={name:"applyStyles",enabled:!1},Kje={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var n=t.state;return function(){var r=n.elements,s=r.reference,c=r.popper;if("removeAttribute"in s){var h=(s.getAttribute("aria-describedby")||"").split(",").filter(function(i){return i.trim()!==c.id});h.length?s.setAttribute("aria-describedby",h.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(t){var n,r=t.state,s=r.elements,c=s.popper,h=s.reference,i=(n=c.getAttribute("role"))==null?void 0:n.toLowerCase();if(c.id&&i==="tooltip"&&"setAttribute"in h){var g=h.getAttribute("aria-describedby");if(g&&g.split(",").indexOf(c.id)!==-1)return;h.setAttribute("aria-describedby",g?g+","+c.id:c.id)}}},Qje=[];function Jje(e,t,n){var r=n===void 0?{}:n,s=r.enabled,c=s===void 0?!0:s,h=r.placement,i=h===void 0?"bottom":h,g=r.strategy,w=g===void 0?"absolute":g,T=r.modifiers,A=T===void 0?Qje:T,D=vi(r,["enabled","placement","strategy","modifiers"]),k=q.useRef(),I=q.useCallback(function(){var K;(K=k.current)==null||K.update()},[]),F=q.useCallback(function(){var K;(K=k.current)==null||K.forceUpdate()},[]),j=Yje(q.useState({placement:i,update:I,forceUpdate:F,attributes:{},styles:{popper:hG(w),arrow:{}}})),V=j[0],W=j[1],Z=q.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(ee){var se=ee.state,he={},ye={};Object.keys(se.elements).forEach(function(_e){he[_e]=se.styles[_e],ye[_e]=se.attributes[_e]}),W({state:se,styles:he,attributes:ye,update:I,forceUpdate:F,placement:se.placement})}}},[I,F,W]);return q.useEffect(function(){!k.current||!c||k.current.setOptions({placement:i,strategy:w,modifiers:[].concat(A,[Z,Zje])})},[w,i,Z,c]),q.useEffect(function(){if(!(!c||e==null||t==null))return k.current=Xje(e,t,Tt({},D,{placement:i,strategy:w,modifiers:[].concat(A,[Kje,Z])})),function(){k.current!=null&&(k.current.destroy(),k.current=void 0,W(function(K){return Tt({},K,{attributes:{},styles:{popper:hG(w)}})}))}},[c,e,t]),V}function e5e(e,t,n,r){var s=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}function ES(e,t,n,r){return Hje(e,t,n,r),function(){e5e(e,t,n,r)}}var dO,fG;function t5e(){if(fG)return dO;fG=1;var e=function(){};return dO=e,dO}var n5e=t5e();const r5e=_a(n5e);function i5e(e){return e&&"setState"in e?yb.findDOMNode(e):e??null}const o5e=function(e){return xE(i5e(e))};var s5e=27,pG=function(){};function a5e(e){return e.button===0}function l5e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var mG=function(t){return t&&("current"in t?t.current:t)};function c5e(e,t,n){var r=n===void 0?{}:n,s=r.disabled,c=r.clickTrigger,h=c===void 0?"click":c,i=q.useRef(!1),g=t||pG,w=q.useCallback(function(D){var k,I=mG(e);r5e(!!I,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),i.current=!I||l5e(D)||!a5e(D)||!!PT(I,(k=D.composedPath==null?void 0:D.composedPath()[0])!=null?k:D.target)},[e]),T=uG(function(D){i.current||g(D)}),A=uG(function(D){D.keyCode===s5e&&g(D)});q.useEffect(function(){if(!(s||e==null)){var D=window.event,k=o5e(mG(e)),I=ES(k,h,w,!0),F=ES(k,h,function(W){if(W===D){D=void 0;return}T(W)}),j=ES(k,"keyup",function(W){if(W===D){D=void 0;return}A(W)}),V=[];return"ontouchstart"in k.documentElement&&(V=[].slice.call(k.body.children).map(function(W){return ES(W,"mousemove",pG)})),function(){I(),F(),j(),V.forEach(function(W){return W()})}}},[e,s,h,w,T,A])}function u5e(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(n){t[n.name]=n}),t):e||t}function d5e(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function h5e(e){var t,n,r,s,c=e.enabled,h=e.enableEvents,i=e.placement,g=e.flip,w=e.offset,T=e.fixed,A=e.containerPadding,D=e.arrowElement,k=e.popperConfig,I=k===void 0?{}:k,F=u5e(I.modifiers);return Tt({},I,{placement:i,enabled:c,strategy:T?"fixed":I.strategy,modifiers:d5e(Tt({},F,{eventListeners:{enabled:h},preventOverflow:Tt({},F.preventOverflow,{options:A?Tt({padding:A},(t=F.preventOverflow)==null?void 0:t.options):(n=F.preventOverflow)==null?void 0:n.options}),offset:{options:Tt({offset:w},(r=F.offset)==null?void 0:r.options)},arrow:Tt({},F.arrow,{enabled:!!D,options:Tt({},(s=F.arrow)==null?void 0:s.options,{element:D})}),flip:Tt({enabled:!!g},F.flip)}))})}var VA;function w5(e){if((!VA&&VA!==0||e)&&b5){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),VA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return VA}var hO=function(t){var n;return typeof document>"u"?null:t==null?xE().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(n=t)!=null&&n.nodeType&&t||null)};function gG(e,t){var n=q.useState(function(){return hO(e)}),r=n[0],s=n[1];if(!r){var c=hO(e);c&&s(c)}return q.useEffect(function(){},[t,r]),q.useEffect(function(){var h=hO(e);h!==r&&s(h)},[e,r]),r}const yG=e=>!e||typeof e=="function"?e:t=>{e.current=t};function f5e(e,t){const n=yG(e),r=yG(t);return s=>{n&&n(s),r&&r(s)}}function p5e(e,t){return q.useMemo(()=>f5e(e,t),[e,t])}var S5=St.forwardRef(function(e,t){var n=e.flip,r=e.offset,s=e.placement,c=e.containerPadding,h=c===void 0?5:c,i=e.popperConfig,g=i===void 0?{}:i,w=e.transition,T=dG(),A=T[0],D=T[1],k=dG(),I=k[0],F=k[1],j=p5e(D,t),V=gG(e.container),W=gG(e.target),Z=q.useState(!e.show),K=Z[0],ee=Z[1],se=Jje(W,A,h5e({placement:s,enableEvents:!!e.show,containerPadding:h||5,flip:n,offset:r,arrowElement:I,popperConfig:g})),he=se.styles,ye=se.attributes,_e=vi(se,["styles","attributes"]);e.show?K&&ee(!1):!e.transition&&!K&&ee(!0);var ae=function(){ee(!0),e.onExited&&e.onExited.apply(e,arguments)},be=e.show||w&&!K;if(c5e(A,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!be)return null;var Te=e.children(Tt({},_e,{show:!!e.show,props:Tt({},ye.popper,{style:he.popper,ref:j}),arrowProps:Tt({},ye.arrow,{style:he.arrow,ref:F})}));if(w){var Ae=e.onExit,Re=e.onExiting,He=e.onEnter,Se=e.onEntering,qe=e.onEntered;Te=St.createElement(w,{in:e.show,appear:!0,onExit:Ae,onExiting:Re,onExited:ae,onEnter:He,onEntering:Se,onEntered:qe},Te)}return V?yb.createPortal(Te,V):null});S5.displayName="Overlay";S5.propTypes={show:nt.bool,placement:nt.oneOf(bN),target:nt.any,container:nt.any,flip:nt.bool,children:nt.func.isRequired,containerPadding:nt.number,popperConfig:nt.object,rootClose:nt.bool,rootCloseEvent:nt.oneOf(["click","mousedown"]),rootCloseDisabled:nt.bool,onHide:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(t.rootClose){var c;return(c=nt.func).isRequired.apply(c,[t].concat(r))}return nt.func.apply(nt,[t].concat(r))},transition:nt.elementType,onEnter:nt.func,onEntering:nt.func,onEntered:nt.func,onExit:nt.func,onExiting:nt.func,onExited:nt.func};var fO,vG;function m5e(){if(vG)return fO;vG=1;function e(){this.__data__=[],this.size=0}return fO=e,fO}var pO,_G;function OD(){if(_G)return pO;_G=1;var e=yE();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return pO=t,pO}var mO,xG;function g5e(){if(xG)return mO;xG=1;var e=OD(),t=Array.prototype,n=t.splice;function r(s){var c=this.__data__,h=e(c,s);if(h<0)return!1;var i=c.length-1;return h==i?c.pop():n.call(c,h,1),--this.size,!0}return mO=r,mO}var gO,bG;function y5e(){if(bG)return gO;bG=1;var e=OD();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return gO=t,gO}var yO,wG;function v5e(){if(wG)return yO;wG=1;var e=OD();function t(n){return e(this.__data__,n)>-1}return yO=t,yO}var vO,SG;function _5e(){if(SG)return vO;SG=1;var e=OD();function t(n,r){var s=this.__data__,c=e(s,n);return c<0?(++this.size,s.push([n,r])):s[c][1]=r,this}return vO=t,vO}var _O,TG;function LD(){if(TG)return _O;TG=1;var e=m5e(),t=g5e(),n=y5e(),r=v5e(),s=_5e();function c(h){var i=-1,g=h==null?0:h.length;for(this.clear();++i<g;){var w=h[i];this.set(w[0],w[1])}}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=r,c.prototype.set=s,_O=c,_O}var xO,EG;function x5e(){if(EG)return xO;EG=1;var e=LD();function t(){this.__data__=new e,this.size=0}return xO=t,xO}var bO,CG;function b5e(){if(CG)return bO;CG=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return bO=e,bO}var wO,AG;function w5e(){if(AG)return wO;AG=1;function e(t){return this.__data__.get(t)}return wO=e,wO}var SO,MG;function S5e(){if(MG)return SO;MG=1;function e(t){return this.__data__.has(t)}return SO=e,SO}var TO,RG;function T5e(){if(RG)return TO;RG=1;var e=om(),t=e["__core-js_shared__"];return TO=t,TO}var EO,DG;function E5e(){if(DG)return EO;DG=1;var e=T5e(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return EO=n,EO}var CO,PG;function bne(){if(PG)return CO;PG=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return CO=n,CO}var AO,IG;function C5e(){if(IG)return AO;IG=1;var e=y5(),t=E5e(),n=Ng(),r=bne(),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,h=Function.prototype,i=Object.prototype,g=h.toString,w=i.hasOwnProperty,T=RegExp("^"+g.call(w).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(D){if(!n(D)||t(D))return!1;var k=e(D)?T:c;return k.test(r(D))}return AO=A,AO}var MO,kG;function A5e(){if(kG)return MO;kG=1;function e(t,n){return t==null?void 0:t[n]}return MO=e,MO}var RO,OG;function Y0(){if(OG)return RO;OG=1;var e=C5e(),t=A5e();function n(r,s){var c=t(r,s);return e(c)?c:void 0}return RO=n,RO}var DO,LG;function T5(){if(LG)return DO;LG=1;var e=Y0(),t=om(),n=e(t,"Map");return DO=n,DO}var PO,zG;function zD(){if(zG)return PO;zG=1;var e=Y0(),t=e(Object,"create");return PO=t,PO}var IO,FG;function M5e(){if(FG)return IO;FG=1;var e=zD();function t(){this.__data__=e?e(null):{},this.size=0}return IO=t,IO}var kO,BG;function R5e(){if(BG)return kO;BG=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return kO=e,kO}var OO,NG;function D5e(){if(NG)return OO;NG=1;var e=zD(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(c){var h=this.__data__;if(e){var i=h[c];return i===t?void 0:i}return r.call(h,c)?h[c]:void 0}return OO=s,OO}var LO,jG;function P5e(){if(jG)return LO;jG=1;var e=zD(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var c=this.__data__;return e?c[s]!==void 0:n.call(c,s)}return LO=r,LO}var zO,VG;function I5e(){if(VG)return zO;VG=1;var e=zD(),t="__lodash_hash_undefined__";function n(r,s){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=e&&s===void 0?t:s,this}return zO=n,zO}var FO,UG;function k5e(){if(UG)return FO;UG=1;var e=M5e(),t=R5e(),n=D5e(),r=P5e(),s=I5e();function c(h){var i=-1,g=h==null?0:h.length;for(this.clear();++i<g;){var w=h[i];this.set(w[0],w[1])}}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=r,c.prototype.set=s,FO=c,FO}var BO,$G;function O5e(){if($G)return BO;$G=1;var e=k5e(),t=LD(),n=T5();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return BO=r,BO}var NO,qG;function L5e(){if(qG)return NO;qG=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return NO=e,NO}var jO,HG;function FD(){if(HG)return jO;HG=1;var e=L5e();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return jO=t,jO}var VO,GG;function z5e(){if(GG)return VO;GG=1;var e=FD();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return VO=t,VO}var UO,WG;function F5e(){if(WG)return UO;WG=1;var e=FD();function t(n){return e(this,n).get(n)}return UO=t,UO}var $O,YG;function B5e(){if(YG)return $O;YG=1;var e=FD();function t(n){return e(this,n).has(n)}return $O=t,$O}var qO,XG;function N5e(){if(XG)return qO;XG=1;var e=FD();function t(n,r){var s=e(this,n),c=s.size;return s.set(n,r),this.size+=s.size==c?0:1,this}return qO=t,qO}var HO,ZG;function E5(){if(ZG)return HO;ZG=1;var e=O5e(),t=z5e(),n=F5e(),r=B5e(),s=N5e();function c(h){var i=-1,g=h==null?0:h.length;for(this.clear();++i<g;){var w=h[i];this.set(w[0],w[1])}}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=r,c.prototype.set=s,HO=c,HO}var GO,KG;function j5e(){if(KG)return GO;KG=1;var e=LD(),t=T5(),n=E5(),r=200;function s(c,h){var i=this.__data__;if(i instanceof e){var g=i.__data__;if(!t||g.length<r-1)return g.push([c,h]),this.size=++i.size,this;i=this.__data__=new n(g)}return i.set(c,h),this.size=i.size,this}return GO=s,GO}var WO,QG;function C5(){if(QG)return WO;QG=1;var e=LD(),t=x5e(),n=b5e(),r=w5e(),s=S5e(),c=j5e();function h(i){var g=this.__data__=new e(i);this.size=g.size}return h.prototype.clear=t,h.prototype.delete=n,h.prototype.get=r,h.prototype.has=s,h.prototype.set=c,WO=h,WO}var YO,JG;function V5e(){if(JG)return YO;JG=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return YO=t,YO}var XO,eW;function U5e(){if(eW)return XO;eW=1;function e(t){return this.__data__.has(t)}return XO=e,XO}var ZO,tW;function $5e(){if(tW)return ZO;tW=1;var e=E5(),t=V5e(),n=U5e();function r(s){var c=-1,h=s==null?0:s.length;for(this.__data__=new e;++c<h;)this.add(s[c])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,ZO=r,ZO}var KO,nW;function q5e(){if(nW)return KO;nW=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(t[r],r,t))return!0;return!1}return KO=e,KO}var QO,rW;function H5e(){if(rW)return QO;rW=1;function e(t,n){return t.has(n)}return QO=e,QO}var JO,iW;function wne(){if(iW)return JO;iW=1;var e=$5e(),t=q5e(),n=H5e(),r=1,s=2;function c(h,i,g,w,T,A){var D=g&r,k=h.length,I=i.length;if(k!=I&&!(D&&I>k))return!1;var F=A.get(h),j=A.get(i);if(F&&j)return F==i&&j==h;var V=-1,W=!0,Z=g&s?new e:void 0;for(A.set(h,i),A.set(i,h);++V<k;){var K=h[V],ee=i[V];if(w)var se=D?w(ee,K,V,i,h,A):w(K,ee,V,h,i,A);if(se!==void 0){if(se)continue;W=!1;break}if(Z){if(!t(i,function(he,ye){if(!n(Z,ye)&&(K===he||T(K,he,g,w,A)))return Z.push(ye)})){W=!1;break}}else if(!(K===ee||T(K,ee,g,w,A))){W=!1;break}}return A.delete(h),A.delete(i),W}return JO=c,JO}var eL,oW;function Sne(){if(oW)return eL;oW=1;var e=om(),t=e.Uint8Array;return eL=t,eL}var tL,sW;function G5e(){if(sW)return tL;sW=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s,c){r[++n]=[c,s]}),r}return tL=e,tL}var nL,aW;function W5e(){if(aW)return nL;aW=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s){r[++n]=s}),r}return nL=e,nL}var rL,lW;function Y5e(){if(lW)return rL;lW=1;var e=E1(),t=Sne(),n=yE(),r=wne(),s=G5e(),c=W5e(),h=1,i=2,g="[object Boolean]",w="[object Date]",T="[object Error]",A="[object Map]",D="[object Number]",k="[object RegExp]",I="[object Set]",F="[object String]",j="[object Symbol]",V="[object ArrayBuffer]",W="[object DataView]",Z=e?e.prototype:void 0,K=Z?Z.valueOf:void 0;function ee(se,he,ye,_e,ae,be,Te){switch(ye){case W:if(se.byteLength!=he.byteLength||se.byteOffset!=he.byteOffset)return!1;se=se.buffer,he=he.buffer;case V:return!(se.byteLength!=he.byteLength||!be(new t(se),new t(he)));case g:case w:case D:return n(+se,+he);case T:return se.name==he.name&&se.message==he.message;case k:case F:return se==he+"";case A:var Ae=s;case I:var Re=_e&h;if(Ae||(Ae=c),se.size!=he.size&&!Re)return!1;var He=Te.get(se);if(He)return He==he;_e|=i,Te.set(se,he);var Se=r(Ae(se),Ae(he),_e,ae,be,Te);return Te.delete(se),Se;case j:if(K)return K.call(se)==K.call(he)}return!1}return rL=ee,rL}var iL,cW;function A5(){if(cW)return iL;cW=1;function e(t,n){for(var r=-1,s=n.length,c=t.length;++r<s;)t[c+r]=n[r];return t}return iL=e,iL}var oL,uW;function _h(){if(uW)return oL;uW=1;var e=Array.isArray;return oL=e,oL}var sL,dW;function Tne(){if(dW)return sL;dW=1;var e=A5(),t=_h();function n(r,s,c){var h=s(r);return t(r)?h:e(h,c(r))}return sL=n,sL}var aL,hW;function X5e(){if(hW)return aL;hW=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,c=0,h=[];++r<s;){var i=t[r];n(i,r,t)&&(h[c++]=i)}return h}return aL=e,aL}var lL,fW;function Ene(){if(fW)return lL;fW=1;function e(){return[]}return lL=e,lL}var cL,pW;function M5(){if(pW)return cL;pW=1;var e=X5e(),t=Ene(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(h){return h==null?[]:(h=Object(h),e(s(h),function(i){return r.call(h,i)}))}:t;return cL=c,cL}var uL,mW;function Z5e(){if(mW)return uL;mW=1;function e(t,n){for(var r=-1,s=Array(t);++r<t;)s[r]=n(r);return s}return uL=e,uL}var dL,gW;function K5e(){if(gW)return dL;gW=1;var e=C1(),t=xv(),n="[object Arguments]";function r(s){return t(s)&&e(s)==n}return dL=r,dL}var hL,yW;function R5(){if(yW)return hL;yW=1;var e=K5e(),t=xv(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,c=e(function(){return arguments}())?e:function(h){return t(h)&&r.call(h,"callee")&&!s.call(h,"callee")};return hL=c,hL}var CS={exports:{}},fL,vW;function Q5e(){if(vW)return fL;vW=1;function e(){return!1}return fL=e,fL}CS.exports;var _W;function BD(){return _W||(_W=1,function(e,t){var n=om(),r=Q5e(),s=t&&!t.nodeType&&t,c=s&&!0&&e&&!e.nodeType&&e,h=c&&c.exports===s,i=h?n.Buffer:void 0,g=i?i.isBuffer:void 0,w=g||r;e.exports=w}(CS,CS.exports)),CS.exports}var pL,xW;function J5e(){if(xW)return pL;xW=1;var e=C1(),t=v5(),n=xv(),r="[object Arguments]",s="[object Array]",c="[object Boolean]",h="[object Date]",i="[object Error]",g="[object Function]",w="[object Map]",T="[object Number]",A="[object Object]",D="[object RegExp]",k="[object Set]",I="[object String]",F="[object WeakMap]",j="[object ArrayBuffer]",V="[object DataView]",W="[object Float32Array]",Z="[object Float64Array]",K="[object Int8Array]",ee="[object Int16Array]",se="[object Int32Array]",he="[object Uint8Array]",ye="[object Uint8ClampedArray]",_e="[object Uint16Array]",ae="[object Uint32Array]",be={};be[W]=be[Z]=be[K]=be[ee]=be[se]=be[he]=be[ye]=be[_e]=be[ae]=!0,be[r]=be[s]=be[j]=be[c]=be[V]=be[h]=be[i]=be[g]=be[w]=be[T]=be[A]=be[D]=be[k]=be[I]=be[F]=!1;function Te(Ae){return n(Ae)&&t(Ae.length)&&!!be[e(Ae)]}return pL=Te,pL}var mL,bW;function ND(){if(bW)return mL;bW=1;function e(t){return function(n){return t(n)}}return mL=e,mL}var AS={exports:{}};AS.exports;var wW;function D5(){return wW||(wW=1,function(e,t){var n=fne(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,c=s&&s.exports===r,h=c&&n.process,i=function(){try{var g=s&&s.require&&s.require("util").types;return g||h&&h.binding&&h.binding("util")}catch{}}();e.exports=i}(AS,AS.exports)),AS.exports}var gL,SW;function P5(){if(SW)return gL;SW=1;var e=J5e(),t=ND(),n=D5(),r=n&&n.isTypedArray,s=r?t(r):e;return gL=s,gL}var yL,TW;function Cne(){if(TW)return yL;TW=1;var e=Z5e(),t=R5(),n=_h(),r=BD(),s=_5(),c=P5(),h=Object.prototype,i=h.hasOwnProperty;function g(w,T){var A=n(w),D=!A&&t(w),k=!A&&!D&&r(w),I=!A&&!D&&!k&&c(w),F=A||D||k||I,j=F?e(w.length,String):[],V=j.length;for(var W in w)(T||i.call(w,W))&&!(F&&(W=="length"||k&&(W=="offset"||W=="parent")||I&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||s(W,V)))&&j.push(W);return j}return yL=g,yL}var vL,EW;function I5(){if(EW)return vL;EW=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||e;return n===s}return vL=t,vL}var _L,CW;function Ane(){if(CW)return _L;CW=1;function e(t,n){return function(r){return t(n(r))}}return _L=e,_L}var xL,AW;function e4e(){if(AW)return xL;AW=1;var e=Ane(),t=e(Object.keys,Object);return xL=t,xL}var bL,MW;function t4e(){if(MW)return bL;MW=1;var e=I5(),t=e4e(),n=Object.prototype,r=n.hasOwnProperty;function s(c){if(!e(c))return t(c);var h=[];for(var i in Object(c))r.call(c,i)&&i!="constructor"&&h.push(i);return h}return bL=s,bL}var wL,RW;function bE(){if(RW)return wL;RW=1;var e=Cne(),t=t4e(),n=vE();function r(s){return n(s)?e(s):t(s)}return wL=r,wL}var SL,DW;function Mne(){if(DW)return SL;DW=1;var e=Tne(),t=M5(),n=bE();function r(s){return e(s,n,t)}return SL=r,SL}var TL,PW;function n4e(){if(PW)return TL;PW=1;var e=Mne(),t=1,n=Object.prototype,r=n.hasOwnProperty;function s(c,h,i,g,w,T){var A=i&t,D=e(c),k=D.length,I=e(h),F=I.length;if(k!=F&&!A)return!1;for(var j=k;j--;){var V=D[j];if(!(A?V in h:r.call(h,V)))return!1}var W=T.get(c),Z=T.get(h);if(W&&Z)return W==h&&Z==c;var K=!0;T.set(c,h),T.set(h,c);for(var ee=A;++j<k;){V=D[j];var se=c[V],he=h[V];if(g)var ye=A?g(he,se,V,h,c,T):g(se,he,V,c,h,T);if(!(ye===void 0?se===he||w(se,he,i,g,T):ye)){K=!1;break}ee||(ee=V=="constructor")}if(K&&!ee){var _e=c.constructor,ae=h.constructor;_e!=ae&&"constructor"in c&&"constructor"in h&&!(typeof _e=="function"&&_e instanceof _e&&typeof ae=="function"&&ae instanceof ae)&&(K=!1)}return T.delete(c),T.delete(h),K}return TL=s,TL}var EL,IW;function r4e(){if(IW)return EL;IW=1;var e=Y0(),t=om(),n=e(t,"DataView");return EL=n,EL}var CL,kW;function i4e(){if(kW)return CL;kW=1;var e=Y0(),t=om(),n=e(t,"Promise");return CL=n,CL}var AL,OW;function o4e(){if(OW)return AL;OW=1;var e=Y0(),t=om(),n=e(t,"Set");return AL=n,AL}var ML,LW;function s4e(){if(LW)return ML;LW=1;var e=Y0(),t=om(),n=e(t,"WeakMap");return ML=n,ML}var RL,zW;function jD(){if(zW)return RL;zW=1;var e=r4e(),t=T5(),n=i4e(),r=o4e(),s=s4e(),c=C1(),h=bne(),i="[object Map]",g="[object Object]",w="[object Promise]",T="[object Set]",A="[object WeakMap]",D="[object DataView]",k=h(e),I=h(t),F=h(n),j=h(r),V=h(s),W=c;return(e&&W(new e(new ArrayBuffer(1)))!=D||t&&W(new t)!=i||n&&W(n.resolve())!=w||r&&W(new r)!=T||s&&W(new s)!=A)&&(W=function(Z){var K=c(Z),ee=K==g?Z.constructor:void 0,se=ee?h(ee):"";if(se)switch(se){case k:return D;case I:return i;case F:return w;case j:return T;case V:return A}return K}),RL=W,RL}var DL,FW;function a4e(){if(FW)return DL;FW=1;var e=C5(),t=wne(),n=Y5e(),r=n4e(),s=jD(),c=_h(),h=BD(),i=P5(),g=1,w="[object Arguments]",T="[object Array]",A="[object Object]",D=Object.prototype,k=D.hasOwnProperty;function I(F,j,V,W,Z,K){var ee=c(F),se=c(j),he=ee?T:s(F),ye=se?T:s(j);he=he==w?A:he,ye=ye==w?A:ye;var _e=he==A,ae=ye==A,be=he==ye;if(be&&h(F)){if(!h(j))return!1;ee=!0,_e=!1}if(be&&!_e)return K||(K=new e),ee||i(F)?t(F,j,V,W,Z,K):n(F,j,he,V,W,Z,K);if(!(V&g)){var Te=_e&&k.call(F,"__wrapped__"),Ae=ae&&k.call(j,"__wrapped__");if(Te||Ae){var Re=Te?F.value():F,He=Ae?j.value():j;return K||(K=new e),Z(Re,He,V,W,K)}}return be?(K||(K=new e),r(F,j,V,W,Z,K)):!1}return DL=I,DL}var PL,BW;function k5(){if(BW)return PL;BW=1;var e=a4e(),t=xv();function n(r,s,c,h,i){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:e(r,s,c,h,n,i)}return PL=n,PL}var IL,NW;function l4e(){if(NW)return IL;NW=1;var e=k5();function t(n,r){return e(n,r)}return IL=t,IL}var c4e=l4e();const u4e=_a(c4e);function kL(e,t){var n=x5(e);return n?n.innerHeight:p0(e).height}function Rne(e,t,n){e.closest&&!n&&e.closest(t);var r=e;do{if(Uje(r,t))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}var OL,jW;function d4e(){if(jW)return OL;jW=1;function e(t,n,r,s){for(var c=t.length,h=r+(s?1:-1);s?h--:++h<c;)if(n(t[h],h,t))return h;return-1}return OL=e,OL}var LL,VW;function h4e(){if(VW)return LL;VW=1;var e=C5(),t=k5(),n=1,r=2;function s(c,h,i,g){var w=i.length,T=w,A=!g;if(c==null)return!T;for(c=Object(c);w--;){var D=i[w];if(A&&D[2]?D[1]!==c[D[0]]:!(D[0]in c))return!1}for(;++w<T;){D=i[w];var k=D[0],I=c[k],F=D[1];if(A&&D[2]){if(I===void 0&&!(k in c))return!1}else{var j=new e;if(g)var V=g(I,F,k,c,h,j);if(!(V===void 0?t(F,I,n|r,g,j):V))return!1}}return!0}return LL=s,LL}var zL,UW;function Dne(){if(UW)return zL;UW=1;var e=Ng();function t(n){return n===n&&!e(n)}return zL=t,zL}var FL,$W;function f4e(){if($W)return FL;$W=1;var e=Dne(),t=bE();function n(r){for(var s=t(r),c=s.length;c--;){var h=s[c],i=r[h];s[c]=[h,i,e(i)]}return s}return FL=n,FL}var BL,qW;function Pne(){if(qW)return BL;qW=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return BL=e,BL}var NL,HW;function p4e(){if(HW)return NL;HW=1;var e=h4e(),t=f4e(),n=Pne();function r(s){var c=t(s);return c.length==1&&c[0][2]?n(c[0][0],c[0][1]):function(h){return h===s||e(h,s,c)}}return NL=r,NL}var jL,GW;function O5(){if(GW)return jL;GW=1;var e=_h(),t=_E(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(c,h){if(e(c))return!1;var i=typeof c;return i=="number"||i=="symbol"||i=="boolean"||c==null||t(c)?!0:r.test(c)||!n.test(c)||h!=null&&c in Object(h)}return jL=s,jL}var VL,WW;function m4e(){if(WW)return VL;WW=1;var e=E5(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var c=function(){var h=arguments,i=s?s.apply(this,h):h[0],g=c.cache;if(g.has(i))return g.get(i);var w=r.apply(this,h);return c.cache=g.set(i,w)||g,w};return c.cache=new(n.Cache||e),c}return n.Cache=e,VL=n,VL}var UL,YW;function g4e(){if(YW)return UL;YW=1;var e=m4e(),t=500;function n(r){var s=e(r,function(h){return c.size===t&&c.clear(),h}),c=s.cache;return s}return UL=n,UL}var $L,XW;function y4e(){if(XW)return $L;XW=1;var e=g4e(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(t,function(h,i,g,w){c.push(g?w.replace(n,"$1"):i||h)}),c});return $L=r,$L}var qL,ZW;function L5(){if(ZW)return qL;ZW=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,c=Array(s);++r<s;)c[r]=n(t[r],r,t);return c}return qL=e,qL}var HL,KW;function v4e(){if(KW)return HL;KW=1;var e=E1(),t=L5(),n=_h(),r=_E(),s=e?e.prototype:void 0,c=s?s.toString:void 0;function h(i){if(typeof i=="string")return i;if(n(i))return t(i,h)+"";if(r(i))return c?c.call(i):"";var g=i+"";return g=="0"&&1/i==-1/0?"-0":g}return HL=h,HL}var GL,QW;function _4e(){if(QW)return GL;QW=1;var e=v4e();function t(n){return n==null?"":e(n)}return GL=t,GL}var WL,JW;function VD(){if(JW)return WL;JW=1;var e=_h(),t=O5(),n=y4e(),r=_4e();function s(c,h){return e(c)?c:t(c,h)?[c]:n(r(c))}return WL=s,WL}var YL,e9;function wE(){if(e9)return YL;e9=1;var e=_E();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return YL=t,YL}var XL,t9;function UD(){if(t9)return XL;t9=1;var e=VD(),t=wE();function n(r,s){s=e(s,r);for(var c=0,h=s.length;r!=null&&c<h;)r=r[t(s[c++])];return c&&c==h?r:void 0}return XL=n,XL}var ZL,n9;function x4e(){if(n9)return ZL;n9=1;var e=UD();function t(n,r,s){var c=n==null?void 0:e(n,r);return c===void 0?s:c}return ZL=t,ZL}var KL,r9;function b4e(){if(r9)return KL;r9=1;function e(t,n){return t!=null&&n in Object(t)}return KL=e,KL}var QL,i9;function w4e(){if(i9)return QL;i9=1;var e=VD(),t=R5(),n=_h(),r=_5(),s=v5(),c=wE();function h(i,g,w){g=e(g,i);for(var T=-1,A=g.length,D=!1;++T<A;){var k=c(g[T]);if(!(D=i!=null&&w(i,k)))break;i=i[k]}return D||++T!=A?D:(A=i==null?0:i.length,!!A&&s(A)&&r(k,A)&&(n(i)||t(i)))}return QL=h,QL}var JL,o9;function S4e(){if(o9)return JL;o9=1;var e=b4e(),t=w4e();function n(r,s){return r!=null&&t(r,s,e)}return JL=n,JL}var ez,s9;function T4e(){if(s9)return ez;s9=1;var e=k5(),t=x4e(),n=S4e(),r=O5(),s=Dne(),c=Pne(),h=wE(),i=1,g=2;function w(T,A){return r(T)&&s(A)?c(h(T),A):function(D){var k=t(D,T);return k===void 0&&k===A?n(D,T):e(A,k,i|g)}}return ez=w,ez}var tz,a9;function $D(){if(a9)return tz;a9=1;function e(t){return t}return tz=e,tz}var nz,l9;function E4e(){if(l9)return nz;l9=1;function e(t){return function(n){return n==null?void 0:n[t]}}return nz=e,nz}var rz,c9;function C4e(){if(c9)return rz;c9=1;var e=UD();function t(n){return function(r){return e(r,n)}}return rz=t,rz}var iz,u9;function A4e(){if(u9)return iz;u9=1;var e=E4e(),t=C4e(),n=O5(),r=wE();function s(c){return n(c)?e(r(c)):t(c)}return iz=s,iz}var oz,d9;function qD(){if(d9)return oz;d9=1;var e=p4e(),t=T4e(),n=$D(),r=_h(),s=A4e();function c(h){return typeof h=="function"?h:h==null?n:typeof h=="object"?r(h)?t(h[0],h[1]):e(h):s(h)}return oz=c,oz}var sz,h9;function M4e(){if(h9)return sz;h9=1;var e=d4e(),t=qD(),n=mne(),r=Math.max;function s(c,h,i){var g=c==null?0:c.length;if(!g)return-1;var w=i==null?0:n(i);return w<0&&(w=r(g+w,0)),e(c,t(h,3),w)}return sz=s,sz}var R4e=M4e();const D4e=_a(R4e);var az,f9;function P4e(){if(f9)return az;f9=1;var e=Math.ceil,t=Math.max;function n(r,s,c,h){for(var i=-1,g=t(e((s-r)/(c||1)),0),w=Array(g);g--;)w[h?g:++i]=r,r+=c;return w}return az=n,az}var lz,p9;function I4e(){if(p9)return lz;p9=1;var e=P4e(),t=kD(),n=pne();function r(s){return function(c,h,i){return i&&typeof i!="number"&&t(c,h,i)&&(h=i=void 0),c=n(c),h===void 0?(h=c,c=0):h=n(h),i=i===void 0?c<h?1:-1:n(i),e(c,h,i,s)}}return lz=r,lz}var cz,m9;function k4e(){if(m9)return cz;m9=1;var e=I4e(),t=e();return cz=t,cz}var O4e=k4e();const L4e=_a(O4e);var g9=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function z4e(e,t){return!!(e===t||g9(e)&&g9(t))}function F4e(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!z4e(e[n],t[n]))return!1;return!0}function Ine(e,t){t===void 0&&(t=F4e);var n=null;function r(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var h=e.apply(this,s);return n={lastResult:h,lastArgs:s,lastThis:this},h}return r.clear=function(){n=null},r}function TB(e,t){var n=x5(e);return n?n.innerWidth:p0(e).width}var uz,y9;function B4e(){if(y9)return uz;y9=1;var e=E1(),t=R5(),n=_h(),r=e?e.isConcatSpreadable:void 0;function s(c){return n(c)||t(c)||!!(r&&c&&c[r])}return uz=s,uz}var dz,v9;function kne(){if(v9)return dz;v9=1;var e=A5(),t=B4e();function n(r,s,c,h,i){var g=-1,w=r.length;for(c||(c=t),i||(i=[]);++g<w;){var T=r[g];s>0&&c(T)?s>1?n(T,s-1,c,h,i):e(i,T):h||(i[i.length]=T)}return i}return dz=n,dz}var hz,_9;function N4e(){if(_9)return hz;_9=1;function e(t){return function(n,r,s){for(var c=-1,h=Object(n),i=s(n),g=i.length;g--;){var w=i[t?g:++c];if(r(h[w],w,h)===!1)break}return n}}return hz=e,hz}var fz,x9;function j4e(){if(x9)return fz;x9=1;var e=N4e(),t=e();return fz=t,fz}var pz,b9;function z5(){if(b9)return pz;b9=1;var e=j4e(),t=bE();function n(r,s){return r&&e(r,s,t)}return pz=n,pz}var mz,w9;function V4e(){if(w9)return mz;w9=1;var e=vE();function t(n,r){return function(s,c){if(s==null)return s;if(!e(s))return n(s,c);for(var h=s.length,i=r?h:-1,g=Object(s);(r?i--:++i<h)&&c(g[i],i,g)!==!1;);return s}}return mz=t,mz}var gz,S9;function U4e(){if(S9)return gz;S9=1;var e=z5(),t=V4e(),n=t(e);return gz=n,gz}var yz,T9;function $4e(){if(T9)return yz;T9=1;var e=U4e(),t=vE();function n(r,s){var c=-1,h=t(r)?Array(r.length):[];return e(r,function(i,g,w){h[++c]=s(i,g,w)}),h}return yz=n,yz}var vz,E9;function q4e(){if(E9)return vz;E9=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return vz=e,vz}var _z,C9;function H4e(){if(C9)return _z;C9=1;var e=_E();function t(n,r){if(n!==r){var s=n!==void 0,c=n===null,h=n===n,i=e(n),g=r!==void 0,w=r===null,T=r===r,A=e(r);if(!w&&!A&&!i&&n>r||i&&g&&T&&!w&&!A||c&&g&&T||!s&&T||!h)return 1;if(!c&&!i&&!A&&n<r||A&&s&&h&&!c&&!i||w&&s&&h||!g&&h||!T)return-1}return 0}return _z=t,_z}var xz,A9;function G4e(){if(A9)return xz;A9=1;var e=H4e();function t(n,r,s){for(var c=-1,h=n.criteria,i=r.criteria,g=h.length,w=s.length;++c<g;){var T=e(h[c],i[c]);if(T){if(c>=w)return T;var A=s[c];return T*(A=="desc"?-1:1)}}return n.index-r.index}return xz=t,xz}var bz,M9;function W4e(){if(M9)return bz;M9=1;var e=L5(),t=UD(),n=qD(),r=$4e(),s=q4e(),c=ND(),h=G4e(),i=$D(),g=_h();function w(T,A,D){A.length?A=e(A,function(F){return g(F)?function(j){return t(j,F.length===1?F[0]:F)}:F}):A=[i];var k=-1;A=e(A,c(n));var I=r(T,function(F,j,V){var W=e(A,function(Z){return Z(F)});return{criteria:W,index:++k,value:F}});return s(I,function(F,j){return h(F,j,D)})}return bz=w,bz}var wz,R9;function Y4e(){if(R9)return wz;R9=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return wz=e,wz}var Sz,D9;function One(){if(D9)return Sz;D9=1;var e=Y4e(),t=Math.max;function n(r,s,c){return s=t(s===void 0?r.length-1:s,0),function(){for(var h=arguments,i=-1,g=t(h.length-s,0),w=Array(g);++i<g;)w[i]=h[s+i];i=-1;for(var T=Array(s+1);++i<s;)T[i]=h[i];return T[s]=c(w),e(r,this,T)}}return Sz=n,Sz}var Tz,P9;function X4e(){if(P9)return Tz;P9=1;function e(t){return function(){return t}}return Tz=e,Tz}var Ez,I9;function Lne(){if(I9)return Ez;I9=1;var e=Y0(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Ez=t,Ez}var Cz,k9;function Z4e(){if(k9)return Cz;k9=1;var e=X4e(),t=Lne(),n=$D(),r=t?function(s,c){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(c),writable:!0})}:n;return Cz=r,Cz}var Az,O9;function K4e(){if(O9)return Az;O9=1;var e=800,t=16,n=Date.now;function r(s){var c=0,h=0;return function(){var i=n(),g=t-(i-h);if(h=i,g>0){if(++c>=e)return arguments[0]}else c=0;return s.apply(void 0,arguments)}}return Az=r,Az}var Mz,L9;function zne(){if(L9)return Mz;L9=1;var e=Z4e(),t=K4e(),n=t(e);return Mz=n,Mz}var Rz,z9;function Fne(){if(z9)return Rz;z9=1;var e=$D(),t=One(),n=zne();function r(s,c){return n(t(s,c,e),s+"")}return Rz=r,Rz}var Dz,F9;function Q4e(){if(F9)return Dz;F9=1;var e=kne(),t=W4e(),n=Fne(),r=kD(),s=n(function(c,h){if(c==null)return[];var i=h.length;return i>1&&r(c,h[0],h[1])?h=[]:i>2&&r(h[0],h[1],h[2])&&(h=[h[0]]),t(c,e(h,1),[])});return Dz=s,Dz}var J4e=Q4e();const eVe=_a(J4e);function Bne(e){return Kte(e)||dne(e)||p5(e)||Qte()}var Pz,B9;function tVe(){if(B9)return Pz;B9=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Pz=e,Pz}var Iz,N9;function nVe(){if(N9)return Iz;N9=1;var e=Ng(),t=I5(),n=tVe(),r=Object.prototype,s=r.hasOwnProperty;function c(h){if(!e(h))return n(h);var i=t(h),g=[];for(var w in h)w=="constructor"&&(i||!s.call(h,w))||g.push(w);return g}return Iz=c,Iz}var kz,j9;function HD(){if(j9)return kz;j9=1;var e=Cne(),t=nVe(),n=vE();function r(s){return n(s)?e(s,!0):t(s)}return kz=r,kz}var Oz,V9;function rVe(){if(V9)return Oz;V9=1;var e=Fne(),t=yE(),n=kD(),r=HD(),s=Object.prototype,c=s.hasOwnProperty,h=e(function(i,g){i=Object(i);var w=-1,T=g.length,A=T>2?g[2]:void 0;for(A&&n(g[0],g[1],A)&&(T=1);++w<T;)for(var D=g[w],k=r(D),I=-1,F=k.length;++I<F;){var j=k[I],V=i[j];(V===void 0||t(V,s[j])&&!c.call(i,j))&&(i[j]=D[j])}return i});return Oz=h,Oz}var iVe=rVe();const oVe=_a(iVe);var Lz,U9;function F5(){if(U9)return Lz;U9=1;var e=Lne();function t(n,r,s){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return Lz=t,Lz}var zz,$9;function sVe(){if($9)return zz;$9=1;var e=F5(),t=z5(),n=qD();function r(s,c){var h={};return c=n(c,3),t(s,function(i,g,w){e(h,g,c(i,g,w))}),h}return zz=r,zz}var aVe=sVe();const lVe=_a(aVe);var Fz,q9;function Nne(){if(q9)return Fz;q9=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s&&n(t[r],r,t)!==!1;);return t}return Fz=e,Fz}var Bz,H9;function jne(){if(H9)return Bz;H9=1;var e=F5(),t=yE(),n=Object.prototype,r=n.hasOwnProperty;function s(c,h,i){var g=c[h];(!(r.call(c,h)&&t(g,i))||i===void 0&&!(h in c))&&e(c,h,i)}return Bz=s,Bz}var Nz,G9;function SE(){if(G9)return Nz;G9=1;var e=jne(),t=F5();function n(r,s,c,h){var i=!c;c||(c={});for(var g=-1,w=s.length;++g<w;){var T=s[g],A=h?h(c[T],r[T],T,c,r):void 0;A===void 0&&(A=r[T]),i?t(c,T,A):e(c,T,A)}return c}return Nz=n,Nz}var jz,W9;function cVe(){if(W9)return jz;W9=1;var e=SE(),t=bE();function n(r,s){return r&&e(s,t(s),r)}return jz=n,jz}var Vz,Y9;function uVe(){if(Y9)return Vz;Y9=1;var e=SE(),t=HD();function n(r,s){return r&&e(s,t(s),r)}return Vz=n,Vz}var MS={exports:{}};MS.exports;var X9;function dVe(){return X9||(X9=1,function(e,t){var n=om(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,c=s&&s.exports===r,h=c?n.Buffer:void 0,i=h?h.allocUnsafe:void 0;function g(w,T){if(T)return w.slice();var A=w.length,D=i?i(A):new w.constructor(A);return w.copy(D),D}e.exports=g}(MS,MS.exports)),MS.exports}var Uz,Z9;function hVe(){if(Z9)return Uz;Z9=1;function e(t,n){var r=-1,s=t.length;for(n||(n=Array(s));++r<s;)n[r]=t[r];return n}return Uz=e,Uz}var $z,K9;function fVe(){if(K9)return $z;K9=1;var e=SE(),t=M5();function n(r,s){return e(r,t(r),s)}return $z=n,$z}var qz,Q9;function GD(){if(Q9)return qz;Q9=1;var e=Ane(),t=e(Object.getPrototypeOf,Object);return qz=t,qz}var Hz,J9;function Vne(){if(J9)return Hz;J9=1;var e=A5(),t=GD(),n=M5(),r=Ene(),s=Object.getOwnPropertySymbols,c=s?function(h){for(var i=[];h;)e(i,n(h)),h=t(h);return i}:r;return Hz=c,Hz}var Gz,e7;function pVe(){if(e7)return Gz;e7=1;var e=SE(),t=Vne();function n(r,s){return e(r,t(r),s)}return Gz=n,Gz}var Wz,t7;function Une(){if(t7)return Wz;t7=1;var e=Tne(),t=Vne(),n=HD();function r(s){return e(s,n,t)}return Wz=r,Wz}var Yz,n7;function mVe(){if(n7)return Yz;n7=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=r.length,c=new r.constructor(s);return s&&typeof r[0]=="string"&&t.call(r,"index")&&(c.index=r.index,c.input=r.input),c}return Yz=n,Yz}var Xz,r7;function B5(){if(r7)return Xz;r7=1;var e=Sne();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Xz=t,Xz}var Zz,i7;function gVe(){if(i7)return Zz;i7=1;var e=B5();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return Zz=t,Zz}var Kz,o7;function yVe(){if(o7)return Kz;o7=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Kz=t,Kz}var Qz,s7;function vVe(){if(s7)return Qz;s7=1;var e=E1(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(s){return n?Object(n.call(s)):{}}return Qz=r,Qz}var Jz,a7;function _Ve(){if(a7)return Jz;a7=1;var e=B5();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return Jz=t,Jz}var e3,l7;function xVe(){if(l7)return e3;l7=1;var e=B5(),t=gVe(),n=yVe(),r=vVe(),s=_Ve(),c="[object Boolean]",h="[object Date]",i="[object Map]",g="[object Number]",w="[object RegExp]",T="[object Set]",A="[object String]",D="[object Symbol]",k="[object ArrayBuffer]",I="[object DataView]",F="[object Float32Array]",j="[object Float64Array]",V="[object Int8Array]",W="[object Int16Array]",Z="[object Int32Array]",K="[object Uint8Array]",ee="[object Uint8ClampedArray]",se="[object Uint16Array]",he="[object Uint32Array]";function ye(_e,ae,be){var Te=_e.constructor;switch(ae){case k:return e(_e);case c:case h:return new Te(+_e);case I:return t(_e,be);case F:case j:case V:case W:case Z:case K:case ee:case se:case he:return s(_e,be);case i:return new Te;case g:case A:return new Te(_e);case w:return n(_e);case T:return new Te;case D:return r(_e)}}return e3=ye,e3}var t3,c7;function $ne(){if(c7)return t3;c7=1;var e=Ng(),t=Object.create,n=function(){function r(){}return function(s){if(!e(s))return{};if(t)return t(s);r.prototype=s;var c=new r;return r.prototype=void 0,c}}();return t3=n,t3}var n3,u7;function bVe(){if(u7)return n3;u7=1;var e=$ne(),t=GD(),n=I5();function r(s){return typeof s.constructor=="function"&&!n(s)?e(t(s)):{}}return n3=r,n3}var r3,d7;function wVe(){if(d7)return r3;d7=1;var e=jD(),t=xv(),n="[object Map]";function r(s){return t(s)&&e(s)==n}return r3=r,r3}var i3,h7;function SVe(){if(h7)return i3;h7=1;var e=wVe(),t=ND(),n=D5(),r=n&&n.isMap,s=r?t(r):e;return i3=s,i3}var o3,f7;function TVe(){if(f7)return o3;f7=1;var e=jD(),t=xv(),n="[object Set]";function r(s){return t(s)&&e(s)==n}return o3=r,o3}var s3,p7;function EVe(){if(p7)return s3;p7=1;var e=TVe(),t=ND(),n=D5(),r=n&&n.isSet,s=r?t(r):e;return s3=s,s3}var a3,m7;function CVe(){if(m7)return a3;m7=1;var e=C5(),t=Nne(),n=jne(),r=cVe(),s=uVe(),c=dVe(),h=hVe(),i=fVe(),g=pVe(),w=Mne(),T=Une(),A=jD(),D=mVe(),k=xVe(),I=bVe(),F=_h(),j=BD(),V=SVe(),W=Ng(),Z=EVe(),K=bE(),ee=HD(),se=1,he=2,ye=4,_e="[object Arguments]",ae="[object Array]",be="[object Boolean]",Te="[object Date]",Ae="[object Error]",Re="[object Function]",He="[object GeneratorFunction]",Se="[object Map]",qe="[object Number]",it="[object Object]",tt="[object RegExp]",Oe="[object Set]",Je="[object String]",yt="[object Symbol]",wt="[object WeakMap]",$t="[object ArrayBuffer]",It="[object DataView]",vt="[object Float32Array]",sn="[object Float64Array]",Rn="[object Int8Array]",yn="[object Int16Array]",Qt="[object Int32Array]",Jt="[object Uint8Array]",fn="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Kt="[object Uint32Array]",_n={};_n[_e]=_n[ae]=_n[$t]=_n[It]=_n[be]=_n[Te]=_n[vt]=_n[sn]=_n[Rn]=_n[yn]=_n[Qt]=_n[Se]=_n[qe]=_n[it]=_n[tt]=_n[Oe]=_n[Je]=_n[yt]=_n[Jt]=_n[fn]=_n[Bt]=_n[Kt]=!0,_n[Ae]=_n[Re]=_n[wt]=!1;function an(Ft,kn,Yn,wn,Vn,ut){var gn,Rt=kn&se,Wt=kn&he,zn=kn&ye;if(Yn&&(gn=Vn?Yn(Ft,wn,Vn,ut):Yn(Ft)),gn!==void 0)return gn;if(!W(Ft))return Ft;var Un=F(Ft);if(Un){if(gn=D(Ft),!Rt)return h(Ft,gn)}else{var mr=A(Ft),Xn=mr==Re||mr==He;if(j(Ft))return c(Ft,Rt);if(mr==it||mr==_e||Xn&&!Vn){if(gn=Wt||Xn?{}:I(Ft),!Rt)return Wt?g(Ft,s(gn,Ft)):i(Ft,r(gn,Ft))}else{if(!_n[mr])return Vn?Ft:{};gn=k(Ft,mr,Rt)}}ut||(ut=new e);var or=ut.get(Ft);if(or)return or;ut.set(Ft,gn),Z(Ft)?Ft.forEach(function(Er){gn.add(an(Er,kn,Yn,Er,Ft,ut))}):V(Ft)&&Ft.forEach(function(Er,_r){gn.set(_r,an(Er,kn,Yn,_r,Ft,ut))});var En=zn?Wt?T:w:Wt?ee:K,Fr=Un?void 0:En(Ft);return t(Fr||Ft,function(Er,_r){Fr&&(_r=Er,Er=Ft[_r]),n(gn,_r,an(Er,kn,Yn,_r,Ft,ut))}),gn}return a3=an,a3}var l3,g7;function AVe(){if(g7)return l3;g7=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return l3=e,l3}var c3,y7;function MVe(){if(y7)return c3;y7=1;var e=UD(),t=hne();function n(r,s){return s.length<2?r:e(r,t(s,0,-1))}return c3=n,c3}var u3,v7;function RVe(){if(v7)return u3;v7=1;var e=VD(),t=AVe(),n=MVe(),r=wE();function s(c,h){return h=e(h,c),c=n(c,h),c==null||delete c[r(t(h))]}return u3=s,u3}var d3,_7;function DVe(){if(_7)return d3;_7=1;var e=C1(),t=GD(),n=xv(),r="[object Object]",s=Function.prototype,c=Object.prototype,h=s.toString,i=c.hasOwnProperty,g=h.call(Object);function w(T){if(!n(T)||e(T)!=r)return!1;var A=t(T);if(A===null)return!0;var D=i.call(A,"constructor")&&A.constructor;return typeof D=="function"&&D instanceof D&&h.call(D)==g}return d3=w,d3}var h3,x7;function PVe(){if(x7)return h3;x7=1;var e=DVe();function t(n){return e(n)?void 0:n}return h3=t,h3}var f3,b7;function IVe(){if(b7)return f3;b7=1;var e=kne();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return f3=t,f3}var p3,w7;function kVe(){if(w7)return p3;w7=1;var e=IVe(),t=One(),n=zne();function r(s){return n(t(s,void 0,e),s+"")}return p3=r,p3}var m3,S7;function OVe(){if(S7)return m3;S7=1;var e=L5(),t=CVe(),n=RVe(),r=VD(),s=SE(),c=PVe(),h=kVe(),i=Une(),g=1,w=2,T=4,A=h(function(D,k){var I={};if(D==null)return I;var F=!1;k=e(k,function(V){return V=r(V,D),F||(F=V.length>1),V}),s(D,i(D),I),F&&(I=t(I,g|w|T,c));for(var j=k.length;j--;)n(I,k[j]);return I});return m3=A,m3}var LVe=OVe();const zVe=_a(LVe);var g3,T7;function FVe(){if(T7)return g3;T7=1;var e=Nne(),t=$ne(),n=z5(),r=qD(),s=GD(),c=_h(),h=BD(),i=y5(),g=Ng(),w=P5();function T(A,D,k){var I=c(A),F=I||h(A)||w(A);if(D=r(D,4),k==null){var j=A&&A.constructor;F?k=I?new j:[]:g(A)?k=i(j)?t(s(A)):{}:k={}}return(F?e:n)(A,function(V,W,Z){return D(k,V,W,Z)}),k}return g3=T,g3}var BVe=FVe();const NVe=_a(BVe);var hM={exports:{}},jVe=hM.exports,E7;function VVe(){return E7||(E7=1,function(e,t){(function(n,r){e.exports=r()})(jVe,function(){return function(n,r,s){r.prototype.isBetween=function(c,h,i,g){var w=s(c),T=s(h),A=(g=g||"()")[0]==="(",D=g[1]===")";return(A?this.isAfter(w,i):!this.isBefore(w,i))&&(D?this.isBefore(T,i):!this.isAfter(T,i))||(A?this.isBefore(w,i):!this.isAfter(w,i))&&(D?this.isAfter(T,i):!this.isBefore(T,i))}}})}(hM)),hM.exports}VVe();var fM={exports:{}},UVe=fM.exports,C7;function $Ve(){return C7||(C7=1,function(e,t){(function(n,r){e.exports=r()})(UVe,function(){return function(n,r){r.prototype.isSameOrAfter=function(s,c){return this.isSame(s,c)||this.isAfter(s,c)}}})}(fM)),fM.exports}$Ve();var pM={exports:{}},qVe=pM.exports,A7;function HVe(){return A7||(A7=1,function(e,t){(function(n,r){e.exports=r()})(qVe,function(){return function(n,r){r.prototype.isSameOrBefore=function(s,c){return this.isSame(s,c)||this.isBefore(s,c)}}})}(pM)),pM.exports}HVe();var mM={exports:{}},GVe=mM.exports,M7;function WVe(){return M7||(M7=1,function(e,t){(function(n,r){e.exports=r()})(GVe,function(){return function(n,r,s){var c=r.prototype,h=function(A){return A&&(A.indexOf?A:A.s)},i=function(A,D,k,I,F){var j=A.name?A:A.$locale(),V=h(j[D]),W=h(j[k]),Z=V||W.map(function(ee){return ee.slice(0,I)});if(!F)return Z;var K=j.weekStart;return Z.map(function(ee,se){return Z[(se+(K||0))%7]})},g=function(){return s.Ls[s.locale()]},w=function(A,D){return A.formats[D]||function(k){return k.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(I,F,j){return F||j.slice(1)})}(A.formats[D.toUpperCase()])},T=function(){var A=this;return{months:function(D){return D?D.format("MMMM"):i(A,"months")},monthsShort:function(D){return D?D.format("MMM"):i(A,"monthsShort","months",3)},firstDayOfWeek:function(){return A.$locale().weekStart||0},weekdays:function(D){return D?D.format("dddd"):i(A,"weekdays")},weekdaysMin:function(D){return D?D.format("dd"):i(A,"weekdaysMin","weekdays",2)},weekdaysShort:function(D){return D?D.format("ddd"):i(A,"weekdaysShort","weekdays",3)},longDateFormat:function(D){return w(A.$locale(),D)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};c.localeData=function(){return T.bind(this)()},s.localeData=function(){var A=g();return{firstDayOfWeek:function(){return A.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(D){return w(A,D)},meridiem:A.meridiem,ordinal:A.ordinal}},s.months=function(){return i(g(),"months")},s.monthsShort=function(){return i(g(),"monthsShort","months",3)},s.weekdays=function(A){return i(g(),"weekdays",null,null,A)},s.weekdaysShort=function(A){return i(g(),"weekdaysShort","weekdays",3,A)},s.weekdaysMin=function(A){return i(g(),"weekdaysMin","weekdays",2,A)}}})}(mM)),mM.exports}WVe();var gM={exports:{}},YVe=gM.exports,R7;function XVe(){return R7||(R7=1,function(e,t){(function(n,r){e.exports=r()})(YVe,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,s,c){var h=s.prototype,i=h.format;c.en.formats=n,h.format=function(g){g===void 0&&(g="YYYY-MM-DDTHH:mm:ssZ");var w=this.$locale().formats,T=function(A,D){return A.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,I,F){var j=F&&F.toUpperCase();return I||D[F]||n[F]||D[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(V,W,Z){return W||Z.slice(1)})})}(g,w===void 0?{}:w);return i.call(this,T)}}})}(gM)),gM.exports}XVe();var yM={exports:{}},ZVe=yM.exports,D7;function KVe(){return D7||(D7=1,function(e,t){(function(n,r){e.exports=r()})(ZVe,function(){return function(n,r,s){var c=function(h,i){if(!i||!i.length||i.length===1&&!i[0]||i.length===1&&Array.isArray(i[0])&&!i[0].length)return null;var g;i.length===1&&i[0].length>0&&(i=i[0]),g=(i=i.filter(function(T){return T}))[0];for(var w=1;w<i.length;w+=1)i[w].isValid()&&!i[w][h](g)||(g=i[w]);return g};s.max=function(){var h=[].slice.call(arguments,0);return c("isAfter",h)},s.min=function(){var h=[].slice.call(arguments,0);return c("isBefore",h)}}})}(yM)),yM.exports}KVe();var vM={exports:{}},QVe=vM.exports,P7;function JVe(){return P7||(P7=1,function(e,t){(function(n,r){e.exports=r()})(QVe,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(c,h,i){var g=h.prototype;i.utc=function(F){var j={date:F,utc:!0,args:arguments};return new h(j)},g.utc=function(F){var j=i(this.toDate(),{locale:this.$L,utc:!0});return F?j.add(this.utcOffset(),n):j},g.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var w=g.parse;g.parse=function(F){F.utc&&(this.$u=!0),this.$utils().u(F.$offset)||(this.$offset=F.$offset),w.call(this,F)};var T=g.init;g.init=function(){if(this.$u){var F=this.$d;this.$y=F.getUTCFullYear(),this.$M=F.getUTCMonth(),this.$D=F.getUTCDate(),this.$W=F.getUTCDay(),this.$H=F.getUTCHours(),this.$m=F.getUTCMinutes(),this.$s=F.getUTCSeconds(),this.$ms=F.getUTCMilliseconds()}else T.call(this)};var A=g.utcOffset;g.utcOffset=function(F,j){var V=this.$utils().u;if(V(F))return this.$u?0:V(this.$offset)?A.call(this):this.$offset;if(typeof F=="string"&&(F=function(ee){ee===void 0&&(ee="");var se=ee.match(r);if(!se)return null;var he=(""+se[0]).match(s)||["-",0,0],ye=he[0],_e=60*+he[1]+ +he[2];return _e===0?0:ye==="+"?_e:-_e}(F),F===null))return this;var W=Math.abs(F)<=16?60*F:F,Z=this;if(j)return Z.$offset=W,Z.$u=F===0,Z;if(F!==0){var K=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(Z=this.local().add(W+K,n)).$offset=W,Z.$x.$localOffset=K}else Z=this.utc();return Z};var D=g.format;g.format=function(F){var j=F||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return D.call(this,j)},g.valueOf=function(){var F=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*F},g.isUTC=function(){return!!this.$u},g.toISOString=function(){return this.toDate().toISOString()},g.toString=function(){return this.toDate().toUTCString()};var k=g.toDate;g.toDate=function(F){return F==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():k.call(this)};var I=g.diff;g.diff=function(F,j,V){if(F&&this.$u===F.$u)return I.call(this,F,j,V);var W=this.local(),Z=i(F).local();return I.call(W,Z,j,V)}}})}(vM)),vM.exports}JVe();var _M={exports:{}},eUe=_M.exports,I7;function tUe(){return I7||(I7=1,function(e,t){(function(n,r){e.exports=r()})(eUe,function(){return function(n,r){r.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})}(_M)),_M.exports}tUe();function Ap(e){return e.children}var yu={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Hc={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},k7=Object.keys(Hc).map(function(e){return Hc[e]});nt.oneOfType([nt.string,nt.func]);nt.any;nt.func;nt.oneOfType([nt.arrayOf(nt.oneOf(k7)),nt.objectOf(function(e,t){var n=k7.indexOf(t)!==-1&&typeof e[t]=="boolean";if(n)return null;for(var r=arguments.length,s=new Array(r>2?r-2:0),c=2;c<r;c++)s[c-2]=arguments[c];return nt.elementType.apply(nt,[e,t].concat(s))})]);nt.oneOfType([nt.oneOf(["overlap","no-overlap"]),nt.func]);var O7={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function qne(e,t){var n=Bl(e,"month");return Bl(n,"week",t.startOfWeek())}function Hne(e,t){var n=xR(e,"month");return xR(n,"week",t.startOfWeek())}function nUe(e,t){for(var n=qne(e,t),r=Hne(e,t),s=[];S1(n,r,"day");)s.push(n),n=Mf(n,1,"day");return s}function rUe(e,t){var n=Bl(e,t);return w1(n,e)?n:Mf(n,1,t)}function iUe(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",r=e,s=[];S1(r,t,n);)s.push(r),r=Mf(r,1,n);return s}function oUe(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Bl(e,"day"),e=DT(e,DT(t)),e=r1(e,r1(t)),e=RT(e,RT(t)),MT(e,MT(t)))}function L7(e){return DT(e)===0&&r1(e)===0&&RT(e)===0&&MT(e)===0}function sUe(e,t,n,r){return n==="day"&&(n="date"),Math.abs(B2[n](e,void 0,r)-B2[n](t,void 0,r))}function N5(e,t,n){return!n||n==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Bl(e,n)/O7[n]-+Bl(t,n)/O7[n]))}var aUe=nt.oneOfType([nt.string,nt.func]);function lUe(e,t,n,r,s){var c=typeof r=="function"?r(n,s,e):t.call(e,n,r,s);return wT(c==null||typeof c=="string","`localizer format(..)` must return a string, null, or undefined"),c}function cUe(e,t,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+n,0,0)}function j5(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function uUe(e,t){return N5(e,t,"minutes")+j5(e,t)}function dUe(e){var t=Bl(e,"day");return N5(t,e,"minutes")+j5(t,e)}function hUe(e,t){return g5(e,t,"day")}function fUe(e,t,n){var r=w1(e,t,"minutes");return r?gE(t,n,"minutes"):ID(t,n,"minutes")}function EB(e,t){return sUe(e,t,"day")}function pUe(e){var t=e.evtA,n=t.start,r=t.end,s=t.allDay,c=e.evtB,h=c.start,i=c.end,g=c.allDay,w=+Bl(n,"day")-+Bl(h,"day"),T=EB(n,r),A=EB(h,i);return w||A-T||!!g-!!s||+n-+h||+r-+i}function mUe(e){var t=e.event,n=t.start,r=t.end,s=e.range,c=s.start,h=s.end,i=Bl(n,"day"),g=S1(i,h,"day"),w=m5(i,r,"minutes"),T=w?ID(r,c,"minutes"):gE(r,c,"minutes");return g&&T}function gUe(e,t){return w1(e,t,"day")}function yUe(e,t){return L7(e)&&L7(t)}var vUe=Ka(function e(t){var n=this;Za(this,e),wT(typeof t.format=="function","date localizer `format(..)` must be a function"),wT(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||aUe,this.formats=t.formats,this.format=function(){for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return lUe.apply(void 0,[n,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||oUe,this.inRange=t.inRange||ane,this.lt=t.lt||g5,this.lte=t.lte||S1,this.gt=t.gt||ID,this.gte=t.gte||gE,this.eq=t.eq||w1,this.neq=t.neq||m5,this.startOf=t.startOf||Bl,this.endOf=t.endOf||xR,this.add=t.add||Mf,this.range=t.range||iUe,this.diff=t.diff||N5,this.ceil=t.ceil||rUe,this.min=t.min||one,this.max=t.max||sne,this.minutes=t.minutes||r1,this.daySpan=t.daySpan||EB,this.firstVisibleDay=t.firstVisibleDay||qne,this.lastVisibleDay=t.lastVisibleDay||Hne,this.visibleDays=t.visibleDays||nUe,this.getSlotDate=t.getSlotDate||cUe,this.getTimezoneOffset=t.getTimezoneOffset||function(r){return r.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||j5,this.getTotalMin=t.getTotalMin||uUe,this.getMinutesFromMidnight=t.getMinutesFromMidnight||dUe,this.continuesPrior=t.continuesPrior||hUe,this.continuesAfter=t.continuesAfter||fUe,this.sortEvents=t.sortEvents||pUe,this.inEventRange=t.inEventRange||mUe,this.isSameDate=t.isSameDate||gUe,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||yUe,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function _Ue(e,t,n,r){var s=ls(ls({},e.formats),n);return ls(ls({},e),{},{messages:r,startOfWeek:function(){return e.startOfWeek(t)},format:function(h,i){return e.format(h,s[i]||i,t)}})}var xUe=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.navigate=function(h){n.props.onNavigate(h)},n.view=function(h){n.props.onView(h)},n}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.localizer.messages,c=r.label;return St.createElement("div",{className:"rbc-toolbar"},St.createElement("span",{className:"rbc-btn-group"},St.createElement("button",{type:"button",onClick:this.navigate.bind(null,yu.TODAY)},s.today),St.createElement("button",{type:"button",onClick:this.navigate.bind(null,yu.PREVIOUS)},s.previous),St.createElement("button",{type:"button",onClick:this.navigate.bind(null,yu.NEXT)},s.next)),St.createElement("span",{className:"rbc-toolbar-label"},c),St.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(r){var s=this,c=this.props.views,h=this.props.view;if(c.length>1)return c.map(function(i){return St.createElement("button",{type:"button",key:i,className:ra({"rbc-active":h===i}),onClick:s.view.bind(null,i)},r[i])})}}])}(St.Component);function ws(e,t){e&&e.apply(null,[].concat(t))}var bUe={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function wUe(e){return ls(ls({},bUe),e)}function SUe(e){var t=e.ref,n=e.callback;q.useEffect(function(){var r=function(c){t.current&&!t.current.contains(c.target)&&n()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[t,n])}var TUe=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Gne=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.style,c=r.className,h=r.event,i=r.selected,g=r.isAllDay,w=r.onSelect,T=r.onDoubleClick,A=r.onKeyPress,D=r.localizer,k=r.continuesPrior,I=r.continuesAfter,F=r.accessors,j=r.getters,V=r.children,W=r.components,Z=W.event,K=W.eventWrapper,ee=r.slotStart,se=r.slotEnd,he=em(r,TUe);delete he.resizable;var ye=F.title(h),_e=F.tooltip(h),ae=F.end(h),be=F.start(h),Te=F.allDay(h),Ae=g||Te||D.diff(be,D.ceil(ae,"day"),"day")>1,Re=j.eventProp(h,be,ae,i),He=St.createElement("div",{className:"rbc-event-content",title:_e||void 0},Z?St.createElement(Z,{event:h,continuesPrior:k,continuesAfter:I,title:ye,isAllDay:Te,localizer:D,slotStart:ee,slotEnd:se}):ye);return St.createElement(K,Object.assign({},this.props,{type:"date"}),St.createElement("div",Object.assign({},he,{style:ls(ls({},Re.style),s),className:ra("rbc-event",c,Re.className,{"rbc-selected":i,"rbc-event-allday":Ae,"rbc-event-continues-prior":k,"rbc-event-continues-after":I}),onClick:function(qe){return w&&w(h,qe)},onDoubleClick:function(qe){return T&&T(h,qe)},onKeyDown:function(qe){return A&&A(h,qe)}}),typeof V=="function"?V(He):He))}}])}(St.Component);function WD(e,t){return!e||t==null?!1:u4e(e,t)}function Wne(e,t){var n=e.right-e.left,r=n/t;return r}function Yne(e,t,n,r){var s=Wne(e,r);return n?r-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function EUe(e,t){var n=t.x,r=t.y;return r>=e.top&&r<=e.bottom&&n>=e.left&&n<=e.right}function CUe(e,t,n,r,s){var c=-1,h=-1,i=r-1,g=Wne(t,r),w=Yne(t,n.x,s,r),T=t.top<n.y&&t.bottom>n.y,A=t.top<e.y&&t.bottom>e.y,D=e.y>t.bottom,k=t.top>e.y,I=n.top<t.top&&n.bottom>t.bottom;return I&&(c=0,h=i),T&&(k?(c=0,h=w):D&&(c=w,h=i)),A&&(c=h=s?i-Math.floor((e.x-t.left)/g):Math.floor((e.x-t.left)/g),T?w<c?c=w:h=w:e.y<n.y?h=i:c=0),{startIdx:c,endIdx:h}}function AUe(e){var t=e.target,n=e.offset,r=e.container,s=e.box,c=p0(t),h=c.top,i=c.left,g=c.width,w=c.height,T=p0(r),A=T.top,D=T.left,k=T.width,I=T.height,F=p0(s),j=F.width,V=F.height,W=A+I,Z=D+k,K=h+V,ee=i+j,se=n.x,he=n.y,ye=K>W?h-V-he:h+he+w,_e=ee>Z?i+se-j+g:i+se;return{topOffset:ye,leftOffset:_e}}function MUe(e){var t=e.containerRef,n=e.accessors,r=e.getters,s=e.selected,c=e.components,h=e.localizer,i=e.position,g=e.show,w=e.events,T=e.slotStart,A=e.slotEnd,D=e.onSelect,k=e.onDoubleClick,I=e.onKeyPress,F=e.handleDragStart,j=e.popperRef,V=e.target,W=e.offset;SUe({ref:j,callback:g}),q.useLayoutEffect(function(){var ee=AUe({target:V,offset:W,container:t.current,box:j.current}),se=ee.topOffset,he=ee.leftOffset;j.current.style.top="".concat(se,"px"),j.current.style.left="".concat(he,"px")},[W.x,W.y,V]);var Z=i.width,K={minWidth:Z+Z/2};return St.createElement("div",{style:K,className:"rbc-overlay",ref:j},St.createElement("div",{className:"rbc-overlay-header"},h.format(T,"dayHeaderFormat")),w.map(function(ee,se){return St.createElement(Gne,{key:se,type:"popup",localizer:h,event:ee,getters:r,onSelect:D,accessors:n,components:c,onDoubleClick:k,onKeyPress:I,continuesPrior:h.lt(n.end(ee),T,"day"),continuesAfter:h.gte(n.start(ee),A,"day"),slotStart:T,slotEnd:A,selected:WD(ee,s),draggable:!0,onDragStart:function(){return F(ee)},onDragEnd:function(){return g()}})}))}var Xne=St.forwardRef(function(e,t){return St.createElement(MUe,Object.assign({},e,{popperRef:t}))});Xne.propTypes={accessors:nt.object.isRequired,getters:nt.object.isRequired,selected:nt.object,components:nt.object.isRequired,localizer:nt.object.isRequired,position:nt.object.isRequired,show:nt.func.isRequired,events:nt.array.isRequired,slotStart:nt.instanceOf(Date).isRequired,slotEnd:nt.instanceOf(Date),onSelect:nt.func,onDoubleClick:nt.func,onKeyPress:nt.func,handleDragStart:nt.func,style:nt.object,offset:nt.shape({x:nt.number,y:nt.number})};function RUe(e){var t=e.containerRef,n=e.popupOffset,r=n===void 0?5:n,s=e.overlay,c=e.accessors,h=e.localizer,i=e.components,g=e.getters,w=e.selected,T=e.handleSelectEvent,A=e.handleDoubleClickEvent,D=e.handleKeyPressEvent,k=e.handleDragStart,I=e.onHide,F=e.overlayDisplay,j=q.useRef(null);if(!s.position)return null;var V=r;isNaN(r)||(V={x:r,y:r});var W=s.position,Z=s.events,K=s.date,ee=s.end;return St.createElement(S5,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:I,target:s.target},function(se){var he=se.props;return St.createElement(Xne,Object.assign({},he,{containerRef:t,ref:j,target:s.target,offset:V,accessors:c,getters:g,selected:w,components:i,localizer:h,position:W,show:F,events:Z,slotStart:K,slotEnd:ee,onSelect:T,onDoubleClick:A,onKeyPress:D,handleDragStart:k}))})}var V5=St.forwardRef(function(e,t){return St.createElement(RUe,Object.assign({},e,{containerRef:t}))});V5.propTypes={popupOffset:nt.oneOfType([nt.number,nt.shape({x:nt.number,y:nt.number})]),overlay:nt.shape({position:nt.object,events:nt.array,date:nt.instanceOf(Date),end:nt.instanceOf(Date)}),accessors:nt.object.isRequired,localizer:nt.object.isRequired,components:nt.object.isRequired,getters:nt.object.isRequired,selected:nt.object,handleSelectEvent:nt.func,handleDoubleClickEvent:nt.func,handleKeyPressEvent:nt.func,handleDragStart:nt.func,onHide:nt.func,overlayDisplay:nt.func};function ac(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return ES(n,e,t,{passive:!1})}function DUe(e,t,n){return!e||PT(e,document.elementFromPoint(t,n))}function PUe(e,t){var n=t.clientX,r=t.clientY,s=document.elementFromPoint(n,r);return Rne(s,".rbc-event",e)}function IUe(e,t){var n=t.clientX,r=t.clientY,s=document.elementFromPoint(n,r);return Rne(s,".rbc-show-more",e)}function wR(e,t){return!!PUe(e,t)}function kUe(e,t){return!!IUe(e,t)}function hS(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var z7=5,OUe=250,Zne=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.global,s=r===void 0?!1:r,c=n.longPressThreshold,h=c===void 0?250:c,i=n.validContainers,g=i===void 0?[]:i;Za(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=h,this.validContainers=g,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=ac("touchmove",function(){},window),this._removeKeyDownListener=ac("keydown",this._keyListener),this._removeKeyUpListener=ac("keyup",this._keyListener),this._removeDropFromOutsideListener=ac("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=ac("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Ka(e,[{key:"on",value:function(n,r){var s=this._listeners[n]||(this._listeners[n]=[]);return s.push(r),{remove:function(){var h=s.indexOf(r);h!==-1&&s.splice(h,1)}}}},{key:"emit",value:function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),c=1;c<r;c++)s[c-1]=arguments[c];var h,i=this._listeners[n]||[];return i.forEach(function(g){h===void 0&&(h=g.apply(void 0,s))}),h}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var r=this._selectRect;return!r||!this.selecting?!1:F7(r,P0(n))}},{key:"filter",value:function(n){var r=this._selectRect;return!r||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,r){var s=this,c=null,h=null,i=null,g=function(D){c=setTimeout(function(){T(),n(D)},s.longPressThreshold),h=ac("touchmove",function(){return T()}),i=ac("touchend",function(){return T()})},w=ac("touchstart",g),T=function(){c&&clearTimeout(c),h&&h(),i&&i(),c=null,h=null,i=null};return r&&g(r),function(){T(),w()}}},{key:"_addInitialEventListener",value:function(){var n=this,r=ac("mousedown",function(c){n._removeInitialEventListener(),n._handleInitialEvent(c),n._removeInitialEventListener=ac("mousedown",n._handleInitialEvent)}),s=ac("touchstart",function(c){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,c)});this._removeInitialEventListener=function(){r(),s()}}},{key:"_dropFromOutsideListener",value:function(n){var r=hS(n),s=r.pageX,c=r.pageY,h=r.clientX,i=r.clientY;this.emit("dropFromOutside",{x:s,y:c,clientX:h,clientY:i}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var r=hS(n),s=r.pageX,c=r.pageY,h=r.clientX,i=r.clientY;this.emit("dragOverFromOutside",{x:s,y:c,clientX:h,clientY:i}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var r=hS(n),s=r.clientX,c=r.clientY,h=r.pageX,i=r.pageY,g=this.container(),w,T;if(!(n.which===3||n.button===2||!DUe(g,s,c))){if(!this.globalMouse&&g&&!PT(g,n.target)){var A=LUe(0),D=A.top,k=A.left,I=A.bottom,F=A.right;if(T=P0(g),w=F7({top:T.top-D,left:T.left-k,bottom:T.bottom+I,right:T.right+F},{top:i,left:h}),!w)return}var j=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:h,y:i,clientX:s,clientY:c});if(j!==!1)switch(n.type){case"mousedown":this._removeEndListener=ac("mouseup",this._handleTerminatingEvent),this._onEscListener=ac("keydown",this._handleTerminatingEvent),this._removeMoveListener=ac("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=ac("touchend",this._handleTerminatingEvent),this._removeMoveListener=ac("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var r=n.target,s=this.validContainers;return!s||!s.length||!r?!0:s.some(function(c){return!!r.closest(c)})}},{key:"_handleTerminatingEvent",value:function(n){var r=this.selecting,s=this._selectRect;if(!r&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var c=!this.container||PT(this.container(),n.target),h=this._isWithinValidContainer(n);return n.key==="Escape"||!h?this.emit("reset"):!r&&c?this._handleClickEvent(n):r?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var r=hS(n),s=r.pageX,c=r.pageY,h=r.clientX,i=r.clientY,g=new Date().getTime();return this._lastClickData&&g-this._lastClickData.timestamp<OUe?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:c,clientX:h,clientY:i})):(this._lastClickData={timestamp:g},this.emit("click",{x:s,y:c,clientX:h,clientY:i}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,s=r.x,c=r.y,h=hS(n),i=h.pageX,g=h.pageY,w=Math.abs(s-i),T=Math.abs(c-g),A=Math.min(i,s),D=Math.min(g,c),k=this.selecting,I=this.isClick(i,g);I&&!k&&!(w||T)||(!k&&!I&&this.emit("selectStart",this._initialEventData),I||(this.selecting=!0,this._selectRect={top:D,left:A,x:i,y:g,right:A+w,bottom:D+T},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,r){var s=this._initialEventData,c=s.x,h=s.y,i=s.isTouch;return!i&&Math.abs(n-c)<=z7&&Math.abs(r-h)<=z7}}])}();function LUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return zg(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function F7(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=P0(e),s=r.top,c=r.left,h=r.right,i=h===void 0?c:h,g=r.bottom,w=g===void 0?s:g,T=P0(t),A=T.top,D=T.left,k=T.right,I=k===void 0?D:k,F=T.bottom,j=F===void 0?A:F;return!(w-n<A||s+n>j||i-n<D||c+n>I)}function P0(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+B7("left"),r=t.top+B7("top");return{top:r,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+r}}function B7(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var zUe=function(e){function t(n,r){var s;return Za(this,t),s=xc(this,t,[n,r]),s.state={selecting:!1},s.containerRef=q.createRef(),s}return bc(t,e),Ka(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(r){!r.selectable&&this.props.selectable&&this._selectable(),r.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var r=this.props,s=r.range,c=r.getNow,h=r.getters,i=r.date,g=r.components.dateCellWrapper,w=r.localizer,T=this.state,A=T.selecting,D=T.startIdx,k=T.endIdx,I=c();return St.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(F,j){var V=A&&j>=D&&j<=k,W=h.dayProp(F),Z=W.className,K=W.style;return St.createElement(g,{key:j,value:F,range:s},St.createElement("div",{style:K,className:ra("rbc-day-bg",Z,V&&"rbc-selected-cell",w.isSameDate(F,I)&&"rbc-today",i&&w.neq(i,F,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var r=this,s=this.containerRef.current,c=this._selector=new Zne(this.props.container,{longPressThreshold:this.props.longPressThreshold}),h=function(g,w){if(!wR(s,g)&&!kUe(s,g)){var T=P0(s),A=r.props,D=A.range,k=A.rtl;if(EUe(T,g)){var I=Yne(T,g.x,k,D.length);r._selectSlot({startIdx:I,endIdx:I,action:w,box:g})}}r._initial={},r.setState({selecting:!1})};c.on("selecting",function(i){var g=r.props,w=g.range,T=g.rtl,A=-1,D=-1;if(r.state.selecting||(ws(r.props.onSelectStart,[i]),r._initial={x:i.x,y:i.y}),c.isSelected(s)){var k=P0(s),I=CUe(r._initial,k,i,w.length,T);A=I.startIdx,D=I.endIdx}r.setState({selecting:!0,startIdx:A,endIdx:D})}),c.on("beforeSelect",function(i){if(r.props.selectable==="ignoreEvents")return!wR(r.containerRef.current,i)}),c.on("click",function(i){return h(i,"click")}),c.on("doubleClick",function(i){return h(i,"doubleClick")}),c.on("select",function(i){r._selectSlot(ls(ls({},r.state),{},{action:"select",bounds:i})),r._initial={},r.setState({selecting:!1}),ws(r.props.onSelectEnd,[r.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(r){var s=r.endIdx,c=r.startIdx,h=r.action,i=r.bounds,g=r.box;s!==-1&&c!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:c,end:s,action:h,bounds:i,box:g,resourceId:this.props.resourceId})}}])}(St.Component),rh={propTypes:{slotMetrics:nt.object.isRequired,selected:nt.object,isAllDay:nt.bool,accessors:nt.object.isRequired,localizer:nt.object.isRequired,components:nt.object.isRequired,getters:nt.object.isRequired,onSelect:nt.func,onDoubleClick:nt.func,onKeyPress:nt.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,n){var r=t.selected;t.isAllDay;var s=t.accessors,c=t.getters,h=t.onSelect,i=t.onDoubleClick,g=t.onKeyPress,w=t.localizer,T=t.slotMetrics,A=t.components,D=t.resizable,k=T.continuesPrior(n),I=T.continuesAfter(n);return St.createElement(Gne,{event:n,getters:c,localizer:w,accessors:s,components:A,onSelect:h,onDoubleClick:i,onKeyPress:g,continuesPrior:k,continuesAfter:I,slotStart:T.first,slotEnd:T.last,selected:WD(n,r),resizable:D})},renderSpan:function(t,n,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",c=Math.abs(n)/t*100+"%";return St.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:c,flexBasis:c,maxWidth:c}},s)}},Kne=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this,s=this.props,c=s.segments,h=s.slotMetrics.slots,i=s.className,g=1;return St.createElement("div",{className:ra(i,"rbc-row")},c.reduce(function(w,T,A){var D=T.event,k=T.left,I=T.right,F=T.span,j="_lvl_"+A,V=k-g,W=rh.renderEvent(r.props,D);return V&&w.push(rh.renderSpan(h,V,"".concat(j,"_gap"))),w.push(rh.renderSpan(h,F,j,W)),g=I+1,w},[]))}}])}(St.Component);Kne.defaultProps=ls({},rh.defaultProps);function Qne(e){var t=e.dateRange,n=e.unit,r=n===void 0?"day":n,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,r)}}function FUe(e,t,n,r){var s=Qne({dateRange:t,localizer:r}),c=s.first,h=s.last,i=r.diff(c,h,"day"),g=r.max(r.startOf(n.start(e),"day"),c),w=r.min(r.ceil(n.end(e),"day"),h),T=D4e(t,function(D){return r.isSameDate(D,g)}),A=r.diff(g,w,"day");return A=Math.min(A,i),A=Math.max(A-r.segmentOffset,1),{event:e,span:A,left:T+1,right:Math.max(T+A,1)}}function CB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,r,s,c=[],h=[];for(n=0;n<e.length;n++){for(s=e[n],r=0;r<c.length&&BUe(s,c[r]);r++);r>=t?h.push(s):(c[r]||(c[r]=[])).push(s)}for(n=0;n<c.length;n++)c[n].sort(function(i,g){return i.left-g.left});return{levels:c,extra:h}}function IT(e,t,n,r,s){var c={start:r.start(e),end:r.end(e)},h={start:t,end:n};return s.inEventRange({event:c,range:h})}function BUe(e,t){return t.some(function(n){return n.left<=e.right&&n.right>=e.left})}function NUe(e,t,n){var r=dM(e),s=[],c=[];r.forEach(function(g){var w=t.start(g),T=t.end(g);n.daySpan(w,T)>1?s.push(g):c.push(g)});var h=s.sort(function(g,w){return AB(g,w,t,n)}),i=c.sort(function(g,w){return AB(g,w,t,n)});return[].concat(dM(h),dM(i))}function AB(e,t,n,r){var s={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},c={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return r.sortEvents({evtA:s,evtB:c})}var MB=function(t,n){return t.left<=n&&t.right>=n},y3=function(t,n){return t.filter(function(r){return MB(r,n)}).map(function(r){return r.event})},Jne=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){for(var r=this.props,s=r.segments,c=r.slotMetrics.slots,h=CB(s).levels[0],i=1,g=1,w=[];i<=c;){var T="_lvl_"+i,A=h.filter(function(K){return MB(K,i)})[0]||{},D=A.event,k=A.left,I=A.right,F=A.span;if(!D){var j=this.getHiddenEventsForSlot(s,i);if(j.length>0){var V=i-g;V&&w.push(rh.renderSpan(c,V,T+"_gap")),w.push(rh.renderSpan(c,1,T,this.renderShowMore(s,i))),g=i=i+1;continue}i++;continue}var W=Math.max(0,k-g);if(this.canRenderSlotEvent(k,F)){var Z=rh.renderEvent(this.props,D);W&&w.push(rh.renderSpan(c,W,T+"_gap")),w.push(rh.renderSpan(c,F,T,Z)),g=i=I+1}else W&&w.push(rh.renderSpan(c,W,T+"_gap")),w.push(rh.renderSpan(c,1,T,this.renderShowMore(s,i))),g=i=i+1}return St.createElement("div",{className:"rbc-row"},w)}},{key:"getHiddenEventsForSlot",value:function(r,s){var c=y3(r,s),h=CB(r).levels[0],i=h.filter(function(g){return MB(g,s)}).map(function(g){return g.event});return c.filter(function(g){return!i.some(function(w){return w===g})})}},{key:"canRenderSlotEvent",value:function(r,s){var c=this.props.segments;return L4e(r,r+s).every(function(h){var i=y3(c,h).length;return i===1})}},{key:"renderShowMore",value:function(r,s){var c=this,h=this.props,i=h.localizer,g=h.slotMetrics,w=h.components,T=g.getEventsForSlot(s),A=y3(r,s),D=A.length;if(w!=null&&w.showMore){var k=w.showMore,I=g.getDateForSlot(s-1);return D?St.createElement(k,{localizer:i,slotDate:I,slot:s,count:D,events:T,remainingEvents:A}):!1}return D?St.createElement("button",{type:"button",key:"sm_"+s,className:ra("rbc-button-link","rbc-show-more"),onClick:function(j){return c.showMore(s,j)}},i.messages.showMore(D,A,T)):!1}},{key:"showMore",value:function(r,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(r,s.target)}}])}(St.Component);Jne.defaultProps=ls({},rh.defaultProps);var jUe=function(t){var n=t.children;return St.createElement("div",{className:"rbc-row-content-scroll-container"},n)},VUe=function(t,n){return t.left<=n&&t.right>=n},UUe=function(t,n){return t[0].range===n[0].range&&t[0].events===n[0].events};function ere(){return Ine(function(e){for(var t=e.range,n=e.events,r=e.maxRows,s=e.minRows,c=e.accessors,h=e.localizer,i=Qne({dateRange:t,localizer:h}),g=i.first,w=i.last,T=n.map(function(F){return FUe(F,t,c,h)}),A=CB(T,Math.max(r-1,1)),D=A.levels,k=A.extra,I=k.length>0?s-1:s;D.length<I;)D.push([]);return{first:g,last:w,levels:D,extra:k,range:t,slots:t.length,clone:function(j){var V=ere();return V(ls(ls({},e),j))},getDateForSlot:function(j){return t[j]},getSlotForDate:function(j){return t.find(function(V){return h.isSameDate(V,j)})},getEventsForSlot:function(j){return T.filter(function(V){return VUe(V,j)}).map(function(V){return V.event})},continuesPrior:function(j){return h.continuesPrior(c.start(j),g)},continuesAfter:function(j){var V=c.start(j),W=c.end(j);return h.continuesAfter(V,W,w)}}},UUe)}var kT=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.handleSelectSlot=function(h){var i=n.props,g=i.range,w=i.onSelectSlot;w(g.slice(h.start,h.end+1),h)},n.handleShowMore=function(h,i){var g=n.props,w=g.range,T=g.onShowMore,A=n.slotMetrics(n.props),D=qje(n.containerRef.current,".rbc-row-bg")[0],k;D&&(k=D.children[h-1]);var I=A.getEventsForSlot(h);T(I,w[h-1],k,h,i)},n.getContainer=function(){var h=n.props.container;return h?h():n.containerRef.current},n.renderHeadingCell=function(h,i){var g=n.props,w=g.renderHeader,T=g.getNow,A=g.localizer;return w({date:h,key:"header_".concat(i),className:ra("rbc-date-cell",A.isSameDate(h,T())&&"rbc-now")})},n.renderDummy=function(){var h=n.props,i=h.className,g=h.range,w=h.renderHeader,T=h.showAllEvents;return St.createElement("div",{className:i,ref:n.containerRef},St.createElement("div",{className:ra("rbc-row-content",T&&"rbc-row-content-scrollable")},w&&St.createElement("div",{className:"rbc-row",ref:n.headingRowRef},g.map(n.renderHeadingCell)),St.createElement("div",{className:"rbc-row",ref:n.eventRowRef},St.createElement("div",{className:"rbc-row-segment"},St.createElement("div",{className:"rbc-event"},St.createElement("div",{className:"rbc-event-content"},""))))))},n.containerRef=q.createRef(),n.headingRowRef=q.createRef(),n.eventRowRef=q.createRef(),n.slotMetrics=ere(),n}return bc(t,e),Ka(t,[{key:"getRowLimit",value:function(){var r,s=kL(this.eventRowRef.current),c=(r=this.headingRowRef)!==null&&r!==void 0&&r.current?kL(this.headingRowRef.current):0,h=kL(this.containerRef.current)-c;return Math.max(Math.floor(h/s),1)}},{key:"render",value:function(){var r=this.props,s=r.date,c=r.rtl,h=r.range,i=r.className,g=r.selected,w=r.selectable,T=r.renderForMeasure,A=r.accessors,D=r.getters,k=r.components,I=r.getNow,F=r.renderHeader,j=r.onSelect,V=r.localizer,W=r.onSelectStart,Z=r.onSelectEnd,K=r.onDoubleClick,ee=r.onKeyPress,se=r.resourceId,he=r.longPressThreshold,ye=r.isAllDay,_e=r.resizable,ae=r.showAllEvents;if(T)return this.renderDummy();var be=this.slotMetrics(this.props),Te=be.levels,Ae=be.extra,Re=ae?jUe:Ap,He=k.weekWrapper,Se={selected:g,accessors:A,getters:D,localizer:V,components:k,onSelect:j,onDoubleClick:K,onKeyPress:ee,resourceId:se,slotMetrics:be,resizable:_e};return St.createElement("div",{className:i,role:"rowgroup",ref:this.containerRef},St.createElement(zUe,{localizer:V,date:s,getNow:I,rtl:c,range:h,selectable:w,container:this.getContainer,getters:D,onSelectStart:W,onSelectEnd:Z,onSelectSlot:this.handleSelectSlot,components:k,longPressThreshold:he,resourceId:se}),St.createElement("div",{className:ra("rbc-row-content",ae&&"rbc-row-content-scrollable"),role:"row"},F&&St.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},h.map(this.renderHeadingCell)),St.createElement(Re,null,St.createElement(He,Object.assign({isAllDay:ye},Se,{rtl:this.props.rtl}),Te.map(function(qe,it){return St.createElement(Kne,Object.assign({key:it,segments:qe},Se))}),!!Ae.length&&St.createElement(Jne,Object.assign({segments:Ae,onShowMore:this.handleShowMore},Se))))))}}])}(St.Component);kT.defaultProps={minRows:0,maxRows:1/0};var U5=function(t){var n=t.label;return St.createElement("span",{role:"columnheader","aria-sort":"none"},n)},$Ue=function(t){var n=t.label,r=t.drilldownView,s=t.onDrillDown;return r?St.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},n):St.createElement("span",null,n)},qUe=["date","className"],HUe=function(t,n,r,s,c){return t.filter(function(h){return IT(h,n,r,s,c)})},YD=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.getContainer=function(){return n.containerRef.current},n.renderWeek=function(h,i){var g=n.props,w=g.events,T=g.components,A=g.selectable,D=g.getNow,k=g.selected,I=g.date,F=g.localizer,j=g.longPressThreshold,V=g.accessors,W=g.getters,Z=g.showAllEvents,K=n.state,ee=K.needLimitMeasure,se=K.rowLimit,he=HUe(dM(w),h[0],h[h.length-1],V,F),ye=NUe(he,V,F);return St.createElement(kT,{key:i,ref:i===0?n.slotRowRef:void 0,container:n.getContainer,className:"rbc-month-row",getNow:D,date:I,range:h,events:ye,maxRows:Z?1/0:se,selected:k,selectable:A,components:T,accessors:V,getters:W,localizer:F,renderHeader:n.readerDateHeading,renderForMeasure:ee,onShowMore:n.handleShowMore,onSelect:n.handleSelectEvent,onDoubleClick:n.handleDoubleClickEvent,onKeyPress:n.handleKeyPressEvent,onSelectSlot:n.handleSelectSlot,longPressThreshold:j,rtl:n.props.rtl,resizable:n.props.resizable,showAllEvents:Z})},n.readerDateHeading=function(h){var i=h.date,g=h.className,w=em(h,qUe),T=n.props,A=T.date,D=T.getDrilldownView,k=T.localizer,I=k.neq(A,i,"month"),F=k.isSameDate(i,A),j=D(i),V=k.format(i,"dateFormat"),W=n.props.components.dateHeader||$Ue;return St.createElement("div",Object.assign({},w,{className:ra(g,I&&"rbc-off-range",F&&"rbc-current"),role:"cell"}),St.createElement(W,{label:V,date:i,drilldownView:j,isOffRange:I,onDrillDown:function(K){return n.handleHeadingClick(i,j,K)}}))},n.handleSelectSlot=function(h,i){n._pendingSelection=n._pendingSelection.concat(h),clearTimeout(n._selectTimer),n._selectTimer=setTimeout(function(){return n.selectDates(i)})},n.handleHeadingClick=function(h,i,g){g.preventDefault(),n.clearSelection(),ws(n.props.onDrillDown,[h,i])},n.handleSelectEvent=function(){n.clearSelection();for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onDoubleClickEvent,i)},n.handleKeyPressEvent=function(){n.clearSelection();for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onKeyPressEvent,i)},n.handleShowMore=function(h,i,g,w,T){var A=n.props,D=A.popup,k=A.onDrillDown,I=A.onShowMore,F=A.getDrilldownView,j=A.doShowMoreDrillDown;if(n.clearSelection(),D){var V=_ne(g,n.containerRef.current);n.setState({overlay:{date:i,events:h,position:V,target:T}})}else j&&ws(k,[i,F(i)||Hc.DAY]);ws(I,[h,i,w])},n.overlayDisplay=function(){n.setState({overlay:null})},n.state={rowLimit:5,needLimitMeasure:!0,date:null},n.containerRef=q.createRef(),n.slotRowRef=q.createRef(),n._bgRows=[],n._pendingSelection=[],n}return bc(t,e),Ka(t,[{key:"componentDidMount",value:function(){var r=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||xne(function(){s=!1,r.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,h=r.className,i=c.visibleDays(s,c),g=Mje(i,7);return this._weekCount=g.length,St.createElement("div",{className:ra("rbc-month-view",h),role:"table","aria-label":"Month View",ref:this.containerRef},St.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(g[0])),g.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(r){var s=this.props,c=s.localizer,h=s.components,i=r[0],g=r[r.length-1],w=h.header||U5;return c.range(i,g,"day").map(function(T,A){return St.createElement("div",{key:"header_"+A,className:"rbc-header"},St.createElement(w,{date:T,localizer:c,label:c.format(T,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var r,s,c=this,h=(r=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&r!==void 0?r:{},i=this.props,g=i.accessors,w=i.localizer,T=i.components,A=i.getters,D=i.selected,k=i.popupOffset,I=i.handleDragStart,F=function(){return c.setState({overlay:null})};return St.createElement(V5,{overlay:h,accessors:g,localizer:w,components:T,getters:A,selected:D,popupOffset:k,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:I,show:!!h.position,overlayDisplay:this.overlayDisplay,onHide:F})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(r){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(i,g){return+i-+g});var c=new Date(s[0]),h=new Date(s[s.length-1]);h.setDate(s[s.length-1].getDate()+1),ws(this.props.onSelectSlot,{slots:s,start:c,end:h,action:r.action,bounds:r.bounds,box:r.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(r,s){var c=r.date,h=r.localizer;return{date:c,needLimitMeasure:h.neq(c,s.date,"month")}}}])}(St.Component);YD.range=function(e,t){var n=t.localizer,r=n.firstVisibleDay(e,n),s=n.lastVisibleDay(e,n);return{start:r,end:s}};YD.navigate=function(e,t,n){var r=n.localizer;switch(t){case yu.PREVIOUS:return r.add(e,-1,"month");case yu.NEXT:return r.add(e,1,"month");default:return e}};YD.title=function(e,t){var n=t.localizer;return n.format(e,"monthHeaderFormat")};var N7=function(t){var n=t.min,r=t.max,s=t.step,c=t.slots,h=t.localizer;return"".concat(+h.startOf(n,"minutes"))+"".concat(+h.startOf(r,"minutes"))+"".concat(s,"-").concat(c)};function $5(e){for(var t=e.min,n=e.max,r=e.step,s=e.timeslots,c=e.localizer,h=N7({step:r,localizer:c}),i=1+c.getTotalMin(t,n),g=c.getMinutesFromMidnight(t),w=Math.ceil((i-1)/(r*s)),T=w*s,A=new Array(w),D=new Array(T),k=0;k<w;k++){A[k]=new Array(s);for(var I=0;I<s;I++){var F=k*s+I,j=F*r;D[F]=A[k][I]=c.getSlotDate(t,g,j)}}var V=D.length*r;D.push(c.getSlotDate(t,g,V));function W(Z){var K=c.diff(t,Z,"minutes")+c.getDstOffset(t,Z);return Math.min(K,i)}return{groups:A,update:function(K){return N7(K)!==h?$5(K):this},dateIsInGroup:function(K,ee){var se=A[ee+1];return c.inRange(K,A[ee][0],se?se[0]:n,"minutes")},nextSlot:function(K){var ee=D[Math.min(D.findIndex(function(se){return se===K||c.eq(se,K)})+1,D.length-1)];return c.eq(ee,K)&&(ee=c.add(K,r,"minutes")),ee},closestSlotToPosition:function(K){var ee=Math.min(D.length-1,Math.max(0,Math.floor(K*T)));return D[ee]},closestSlotFromPoint:function(K,ee){var se=Math.abs(ee.top-ee.bottom);return this.closestSlotToPosition((K.y-ee.top)/se)},closestSlotFromDate:function(K){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(c.lt(K,t,"minutes"))return D[0];if(c.gt(K,n,"minutes"))return D[D.length-1];var se=c.diff(t,K,"minutes");return D[(se-se%r)/r+ee]},startsBeforeDay:function(K){return c.lt(K,t,"day")},startsAfterDay:function(K){return c.gt(K,n,"day")},startsBefore:function(K){return c.lt(c.merge(t,K),t,"minutes")},startsAfter:function(K){return c.gt(c.merge(n,K),n,"minutes")},getRange:function(K,ee,se,he){se||(K=c.min(n,c.max(t,K))),he||(ee=c.min(n,c.max(t,ee)));var ye=W(K),_e=W(ee),ae=_e>r*T&&!c.eq(n,ee)?(ye-r)/(r*T)*100:ye/(r*T)*100;return{top:ae,height:_e/(r*T)*100-ae,start:W(K),startDate:K,end:W(ee),endDate:ee}},getCurrentTimePosition:function(K){var ee=W(K),se=ee/(r*T)*100;return se}}}var GUe=function(){function e(t,n){var r=n.accessors,s=n.slotMetrics;Za(this,e);var c=s.getRange(r.start(t),r.end(t)),h=c.start,i=c.startDate,g=c.end,w=c.endDate,T=c.top,A=c.height;this.start=h,this.end=g,this.startMs=+i,this.endMs=+w,this.top=T,this.height=A,this.data=t}return Ka(e,[{key:"_width",get:function(){if(this.rows){var n=this.rows.reduce(function(s,c){return Math.max(s,c.leaves.length+1)},0)+1;return 100/n}if(this.leaves){var r=100-this.container._width;return r/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var n=this._width,r=Math.min(100,this._width*1.7);if(this.rows)return r;if(this.leaves)return this.leaves.length>0?r:n;var s=this.row.leaves,c=s.indexOf(this);return c===s.length-1?n:r}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var n=this.row,r=n.leaves,s=n.xOffset,c=n._width,h=r.indexOf(this)+1;return s+h*c}}])}();function WUe(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function YUe(e){for(var t=eVe(e,["startMs",function(i){return-i.endMs}]),n=[];t.length>0;){var r=t.shift();n.push(r);for(var s=0;s<t.length;s++){var c=t[s];if(!(r.endMs>c.startMs)){if(s>0){var h=t.splice(s,1)[0];n.push(h)}break}}}return n}function tre(e){for(var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,s=e.accessors,c=t.map(function(T){return new GUe(T,{slotMetrics:r,accessors:s})}),h=YUe(c),i=[],g=function(){var A=h[w],D=i.find(function(F){return F.end>A.start||Math.abs(A.start-F.start)<n});if(!D)return A.rows=[],i.push(A),1;A.container=D;for(var k=null,I=D.rows.length-1;!k&&I>=0;I--)WUe(D.rows[I],A,n)&&(k=D.rows[I]);k?(k.leaves.push(A),A.row=k):(A.leaves=[],D.rows.push(A))},w=0;w<h.length;w++)g();return h.map(function(T){return{event:T.data,style:{top:T.top,height:T.height,width:T.width,xOffset:Math.max(0,T.xOffset)}}})}function nre(e,t,n){for(var r=0;r<e.friends.length;++r)if(!(n.indexOf(e.friends[r])>-1)){t=t>e.friends[r].idx?t:e.friends[r].idx,n.push(e.friends[r]);var s=nre(e.friends[r],t,n);t=t>s?t:s}return t}function XUe(e){var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,s=e.accessors,c=tre({events:t,minimumStartDifference:n,slotMetrics:r,accessors:s});c.sort(function(He,Se){return He=He.style,Se=Se.style,He.top!==Se.top?He.top>Se.top?1:-1:He.height!==Se.height?He.top+He.height<Se.top+Se.height?1:-1:0});for(var h=0;h<c.length;++h)c[h].friends=[],delete c[h].style.left,delete c[h].style.left,delete c[h].idx,delete c[h].size;for(var i=0;i<c.length-1;++i)for(var g=c[i],w=g.style.top,T=g.style.top+g.style.height,A=i+1;A<c.length;++A){var D=c[A],k=D.style.top,I=D.style.top+D.style.height;(k>=w&&I<=T||I>w&&I<=T||k>=w&&k<T)&&(g.friends.push(D),D.friends.push(g))}for(var F=0;F<c.length;++F){for(var j=c[F],V=[],W=0;W<100;++W)V.push(1);for(var Z=0;Z<j.friends.length;++Z)j.friends[Z].idx!==void 0&&(V[j.friends[Z].idx]=0);j.idx=V.indexOf(1)}for(var K=0;K<c.length;++K){var ee=0;if(!c[K].size){var se=[],he=nre(c[K],0,se);ee=100/(he+1),c[K].size=ee;for(var ye=0;ye<se.length;++ye)se[ye].size=ee}}for(var _e=0;_e<c.length;++_e){var ae=c[_e];ae.style.left=ae.idx*ae.size;for(var be=0,Te=0;Te<ae.friends.length;++Te){var Ae=ae.friends[Te].idx;be=be>Ae?be:Ae}be<=ae.idx&&(ae.size=100-ae.idx*ae.size);var Re=ae.idx===0?0:3;ae.style.width="calc(".concat(ae.size,"% - ").concat(Re,"px)"),ae.style.height="calc(".concat(ae.style.height,"% - 2px)"),ae.style.xOffset="calc(".concat(ae.style.left,"% + ").concat(Re,"px)")}return c}var j7={overlap:tre,"no-overlap":XUe};function ZUe(e){return!!(e&&e.constructor&&e.call&&e.apply)}function KUe(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,n=t;return t in j7&&(n=j7[t]),ZUe(n)?n.apply(this,arguments):[]}var rre=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.renderSlot,c=r.resource,h=r.group,i=r.getters,g=r.components,w=g===void 0?{}:g,T=w.timeSlotWrapper,A=T===void 0?Ap:T,D=i?i.slotGroupProp(h):{};return St.createElement("div",Object.assign({className:"rbc-timeslot-group"},D),h.map(function(k,I){var F=i?i.slotProp(k,c):{};return St.createElement(A,{key:I,value:k,resource:c},St.createElement("div",Object.assign({},F,{className:ra("rbc-time-slot",F.className)}),s&&s(k,I)))}))}}])}(q.Component);function UA(e){return typeof e=="string"?e:e+"%"}function QUe(e){var t=e.style,n=e.className,r=e.event,s=e.accessors,c=e.rtl,h=e.selected,i=e.label,g=e.continuesPrior,w=e.continuesAfter,T=e.getters,A=e.onClick,D=e.onDoubleClick,k=e.isBackgroundEvent,I=e.onKeyPress,F=e.components,j=F.event,V=F.eventWrapper,W=s.title(r),Z=s.tooltip(r),K=s.end(r),ee=s.start(r),se=T.eventProp(r,ee,K,h),he=[St.createElement("div",{key:"1",className:"rbc-event-label"},i),St.createElement("div",{key:"2",className:"rbc-event-content"},j?St.createElement(j,{event:r,title:W}):W)],ye=t.height,_e=t.top,ae=t.width,be=t.xOffset,Te=ls(ls({},se.style),{},t0({top:UA(_e),height:UA(ye),width:UA(ae)},c?"right":"left",UA(be)));return St.createElement(V,Object.assign({type:"time"},e),St.createElement("div",{role:"button",tabIndex:0,onClick:A,onDoubleClick:D,style:Te,onKeyDown:I,title:Z?(typeof i=="string"?i+": ":"")+Z:void 0,className:ra(k?"rbc-background-event":"rbc-event",n,se.className,{"rbc-selected":h,"rbc-event-continues-earlier":g,"rbc-event-continues-later":w})},he))}var JUe=function(t){var n=t.children,r=t.className,s=t.style,c=t.innerRef;return St.createElement("div",{className:r,style:s,ref:c},n)},e$e=St.forwardRef(function(e,t){return St.createElement(JUe,Object.assign({},e,{innerRef:t}))}),t$e=["dayProp"],n$e=["eventContainerWrapper","timeIndicatorWrapper"],ire=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.state={selecting:!1,timeIndicatorPosition:null},n.intervalTriggered=!1,n.renderEvents=function(h){var i=h.events,g=h.isBackgroundEvent,w=n.props,T=w.rtl,A=w.selected,D=w.accessors,k=w.localizer,I=w.getters,F=w.components,j=w.step,V=w.timeslots,W=w.dayLayoutAlgorithm,Z=w.resizable,K=n,ee=K.slotMetrics,se=k.messages,he=KUe({events:i,accessors:D,slotMetrics:ee,minimumStartDifference:Math.ceil(j*V/2),dayLayoutAlgorithm:W});return he.map(function(ye,_e){var ae,be=ye.event,Te=ye.style,Ae=D.end(be),Re=D.start(be),He=(ae=D.eventId(be))!==null&&ae!==void 0?ae:"evt_"+_e,Se="eventTimeRangeFormat",qe,it=ee.startsBeforeDay(Re),tt=ee.startsAfterDay(Ae);it?Se="eventTimeRangeEndFormat":tt&&(Se="eventTimeRangeStartFormat"),it&&tt?qe=se.allDay:qe=k.format({start:Re,end:Ae},Se);var Oe=it||ee.startsBefore(Re),Je=tt||ee.startsAfter(Ae);return St.createElement(QUe,{style:Te,event:be,label:qe,key:He,getters:I,rtl:T,components:F,continuesPrior:Oe,continuesAfter:Je,accessors:D,resource:n.props.resource,selected:WD(be,A),onClick:function(wt){return n._select(ls(ls(ls({},be),n.props.resource&&{sourceResource:n.props.resource}),g&&{isBackgroundEvent:!0}),wt)},onDoubleClick:function(wt){return n._doubleClick(be,wt)},isBackgroundEvent:g,onKeyPress:function(wt){return n._keyPress(be,wt)},resizable:Z})})},n._selectable=function(){var h=n.containerRef.current,i=n.props,g=i.longPressThreshold,w=i.localizer,T=n._selector=new Zne(function(){return h},{longPressThreshold:g}),A=function(F){var j=n.props.onSelecting,V=n.state||{},W=D(F),Z=W.startDate,K=W.endDate;j&&(w.eq(V.startDate,Z,"minutes")&&w.eq(V.endDate,K,"minutes")||j({start:Z,end:K,resourceId:n.props.resource})===!1)||(n.state.start!==W.start||n.state.end!==W.end||n.state.selecting!==W.selecting)&&n.setState(W)},D=function(F){var j=n.slotMetrics.closestSlotFromPoint(F,P0(h));n.state.selecting||(n._initialSlot=j);var V=n._initialSlot;w.lte(V,j)?j=n.slotMetrics.nextSlot(j):w.gt(V,j)&&(V=n.slotMetrics.nextSlot(V));var W=n.slotMetrics.getRange(w.min(V,j),w.max(V,j));return ls(ls({},W),{},{selecting:!0,top:"".concat(W.top,"%"),height:"".concat(W.height,"%")})},k=function(F,j){if(!wR(n.containerRef.current,F)){var V=D(F),W=V.startDate,Z=V.endDate;n._selectSlot({startDate:W,endDate:Z,action:j,box:F})}n.setState({selecting:!1})};T.on("selecting",A),T.on("selectStart",A),T.on("beforeSelect",function(I){if(n.props.selectable==="ignoreEvents")return!wR(n.containerRef.current,I)}),T.on("click",function(I){return k(I,"click")}),T.on("doubleClick",function(I){return k(I,"doubleClick")}),T.on("select",function(I){n.state.selecting&&(n._selectSlot(ls(ls({},n.state),{},{action:"select",bounds:I})),n.setState({selecting:!1}))}),T.on("reset",function(){n.state.selecting&&n.setState({selecting:!1})})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n._selectSlot=function(h){for(var i=h.startDate,g=h.endDate,w=h.action,T=h.bounds,A=h.box,D=i,k=[];n.props.localizer.lte(D,g);)k.push(D),D=new Date(+D+n.props.step*60*1e3);ws(n.props.onSelectSlot,{slots:k,start:i,end:g,resourceId:n.props.resource,action:w,bounds:T,box:A})},n._select=function(){for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onSelectEvent,i)},n._doubleClick=function(){for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onDoubleClickEvent,i)},n._keyPress=function(){for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onKeyPressEvent,i)},n.slotMetrics=$5(n.props),n.containerRef=q.createRef(),n}return bc(t,e),Ka(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(r,s){this.props.selectable&&!r.selectable&&this._selectable(),!this.props.selectable&&r.selectable&&this._teardownSelectable();var c=this.props,h=c.getNow,i=c.isNow,g=c.localizer,w=c.date,T=c.min,A=c.max,D=g.neq(r.getNow(),h(),"minutes");if(r.isNow!==i||D){if(this.clearTimeIndicatorInterval(),i){var k=!D&&g.eq(r.date,w,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(k)}}else i&&(g.neq(r.min,T,"minutes")||g.neq(r.max,A,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){r.intervalTriggered=!0,r.positionTimeIndicator(),r.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var r=this.props,s=r.min,c=r.max,h=r.getNow,i=h();if(i>=s&&i<=c){var g=this.slotMetrics.getCurrentTimePosition(i);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:g})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var r=this.props,s=r.date,c=r.max,h=r.rtl,i=r.isNow,g=r.resource,w=r.accessors,T=r.localizer,A=r.getters,D=A.dayProp,k=em(A,t$e),I=r.components,F=I.eventContainerWrapper,j=I.timeIndicatorWrapper,V=em(I,n$e);this.slotMetrics=this.slotMetrics.update(this.props);var W=this.slotMetrics,Z=this.state,K=Z.selecting,ee=Z.top,se=Z.height,he=Z.startDate,ye=Z.endDate,_e={start:he,end:ye},ae=D(c,g),be=ae.className,Te=ae.style,Ae={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},Re=V.dayColumnWrapper||e$e;return St.createElement(Re,{ref:this.containerRef,date:s,style:Te,className:ra(be,"rbc-day-slot","rbc-time-column",i&&"rbc-now",i&&"rbc-today",K&&"rbc-slot-selecting"),slotMetrics:W,resource:g},W.groups.map(function(He,Se){return St.createElement(rre,{key:Se,group:He,resource:g,getters:k,components:V})}),St.createElement(F,{localizer:T,resource:g,accessors:w,getters:k,components:V,slotMetrics:W},St.createElement("div",{className:ra("rbc-events-container",h&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),K&&St.createElement("div",{className:"rbc-slot-selection",style:{top:ee,height:se}},St.createElement("span",null,T.format(_e,"selectRangeFormat"))),i&&this.intervalTriggered&&St.createElement(j,Ae,St.createElement("div",Ae)))}}])}(St.Component);ire.defaultProps={dragThroughEvents:!0,timeslots:2};var ore=function(t){var n=t.label;return St.createElement(St.Fragment,null,n)},r$e=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.handleHeaderClick=function(h,i,g){g.preventDefault(),ws(n.props.onDrillDown,[h,i])},n.renderRow=function(h){var i=n.props,g=i.events,w=i.rtl,T=i.selectable,A=i.getNow,D=i.range,k=i.getters,I=i.localizer,F=i.accessors,j=i.components,V=i.resizable,W=F.resourceId(h),Z=h?g.filter(function(K){return F.resource(K)===W}):g;return St.createElement(kT,{isAllDay:!0,rtl:w,getNow:A,minRows:2,maxRows:n.props.allDayMaxRows+1,range:D,events:Z,resourceId:W,className:"rbc-allday-cell",selectable:T,selected:n.props.selected,components:j,accessors:F,getters:k,localizer:I,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyPress:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:V})},n}return bc(t,e),Ka(t,[{key:"renderHeaderCells",value:function(r){var s=this,c=this.props,h=c.localizer,i=c.getDrilldownView,g=c.getNow,w=c.getters.dayProp,T=c.components.header,A=T===void 0?U5:T,D=g();return r.map(function(k,I){var F=i(k),j=h.format(k,"dayFormat"),V=w(k),W=V.className,Z=V.style,K=St.createElement(A,{date:k,label:j,localizer:h});return St.createElement("div",{key:I,style:Z,className:ra("rbc-header",W,h.isSameDate(k,D)&&"rbc-today")},F?St.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(se){return s.handleHeaderClick(k,F,se)}},K):St.createElement("span",null,K))})}},{key:"render",value:function(){var r=this,s=this.props,c=s.width,h=s.rtl,i=s.resources,g=s.range,w=s.events,T=s.getNow,A=s.accessors,D=s.selectable,k=s.components,I=s.getters,F=s.scrollRef,j=s.localizer,V=s.isOverflowing,W=s.components,Z=W.timeGutterHeader,K=W.resourceHeader,ee=K===void 0?ore:K,se=s.resizable,he={};V&&(he[h?"marginLeft":"marginRight"]="".concat(w5()-1,"px"));var ye=i.groupEvents(w);return St.createElement("div",{style:he,ref:F,className:ra("rbc-time-header",V&&"rbc-overflowing")},St.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:c,minWidth:c,maxWidth:c}},Z&&St.createElement(Z,null)),i.map(function(_e,ae){var be=E0(_e,2),Te=be[0],Ae=be[1];return St.createElement("div",{className:"rbc-time-header-content",key:Te||ae},Ae&&St.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(ae)},St.createElement("div",{className:"rbc-header"},St.createElement(ee,{index:ae,label:A.resourceTitle(Ae),resource:Ae}))),St.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(g.length<=1?" rbc-time-header-cell-single-day":"")},r.renderHeaderCells(g)),St.createElement(kT,{isAllDay:!0,rtl:h,getNow:T,minRows:2,maxRows:r.props.allDayMaxRows+1,range:g,events:ye.get(Te)||[],resourceId:Ae&&Te,className:"rbc-allday-cell",selectable:D,selected:r.props.selected,components:k,accessors:A,getters:I,localizer:j,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:se}))}))}}])}(St.Component),i$e=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.handleHeaderClick=function(h,i,g){g.preventDefault(),ws(n.props.onDrillDown,[h,i])},n}return bc(t,e),Ka(t,[{key:"renderHeaderCells",value:function(r){var s=this,c=this.props,h=c.localizer,i=c.getDrilldownView,g=c.getNow,w=c.getters.dayProp,T=c.components,A=T.header,D=A===void 0?U5:A,k=T.resourceHeader,I=k===void 0?ore:k,F=c.resources,j=c.accessors,V=c.events,W=c.rtl,Z=c.selectable,K=c.components,ee=c.getters,se=c.resizable,he=g(),ye=F.groupEvents(V);return r.map(function(_e,ae){var be=i(_e),Te=h.format(_e,"dayFormat"),Ae=w(_e),Re=Ae.className,He=Ae.style,Se=St.createElement(D,{date:_e,label:Te,localizer:h});return St.createElement("div",{key:ae,className:"rbc-time-header-content rbc-resource-grouping"},St.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(r.length<=1?" rbc-time-header-cell-single-day":"")},St.createElement("div",{style:He,className:ra("rbc-header",Re,h.isSameDate(_e,he)&&"rbc-today")},be?St.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(it){return s.handleHeaderClick(_e,be,it)}},Se):St.createElement("span",null,Se))),St.createElement("div",{className:"rbc-row"},F.map(function(qe,it){var tt=E0(qe,2),Oe=tt[0],Je=tt[1];return St.createElement("div",{key:"resource_".concat(Oe,"_").concat(it),className:ra("rbc-header",Re,h.isSameDate(_e,he)&&"rbc-today")},St.createElement(I,{index:it,label:j.resourceTitle(Je),resource:Je}))})),St.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},F.map(function(qe,it){var tt=E0(qe,2),Oe=tt[0],Je=tt[1],yt=(ye.get(Oe)||[]).filter(function(wt){return h.isSameDate(wt.start,_e)||h.isSameDate(wt.end,_e)});return St.createElement(kT,{key:"resource_".concat(Oe,"_").concat(it),isAllDay:!0,rtl:W,getNow:g,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[_e],events:yt,resourceId:Je&&Oe,className:"rbc-allday-cell",selectable:Z,selected:s.props.selected,components:K,accessors:j,getters:ee,localizer:h,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:se})})))})}},{key:"render",value:function(){var r=this.props,s=r.width,c=r.rtl,h=r.range,i=r.scrollRef,g=r.isOverflowing,w=r.components.timeGutterHeader,T={};return g&&(T[c?"marginLeft":"marginRight"]="".concat(w5()-1,"px")),St.createElement("div",{style:T,ref:i,className:ra("rbc-time-header",g&&"rbc-overflowing")},St.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},w&&St.createElement(w,null)),this.renderHeaderCells(h))}}])}(St.Component);function o$e(e){var t=e.min,n=e.max,r=e.localizer;return r.getTimezoneOffset(t)!==r.getTimezoneOffset(n)?{start:r.add(t,-1,"day"),end:r.add(n,-1,"day")}:{start:t,end:n}}var s$e=function(t){var n=t.min,r=t.max,s=t.timeslots,c=t.step,h=t.localizer,i=t.getNow,g=t.resource,w=t.components,T=t.getters,A=t.gutterRef,D=w.timeGutterWrapper,k=q.useMemo(function(){return o$e({min:n,max:r,localizer:h})},[n==null?void 0:n.toISOString(),r==null?void 0:r.toISOString(),h]),I=k.start,F=k.end,j=q.useState($5({min:I,max:F,timeslots:s,step:c,localizer:h})),V=E0(j,2),W=V[0],Z=V[1];q.useEffect(function(){W&&Z(W.update({min:I,max:F,timeslots:s,step:c,localizer:h}))},[I==null?void 0:I.toISOString(),F==null?void 0:F.toISOString(),s,c]);var K=q.useCallback(function(ee,se){if(se)return null;var he=W.dateIsInGroup(i(),se);return St.createElement("span",{className:ra("rbc-label",he&&"rbc-now")},h.format(ee,"timeGutterFormat"))},[W,h,i]);return St.createElement(D,{slotMetrics:W},St.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:A},W.groups.map(function(ee,se){return St.createElement(rre,{key:se,group:ee,resource:g,components:w,renderSlot:K,getters:T})})))},a$e=St.forwardRef(function(e,t){return St.createElement(s$e,Object.assign({gutterRef:t},e))}),v3={};function l$e(e,t){return{map:function(r){return e?e.map(function(s,c){return r([t.resourceId(s),s],c)}):[r([v3,null],0)]},groupEvents:function(r){var s=new Map;return e?(r.forEach(function(c){var h=t.resource(c)||v3;if(Array.isArray(h))h.forEach(function(g){var w=s.get(g)||[];w.push(c),s.set(g,w)});else{var i=s.get(h)||[];i.push(c),s.set(h,i)}}),s):(s.set(v3,r),s)}}}var A1=function(e){function t(n){var r;return Za(this,t),r=xc(this,t,[n]),r.handleScroll=function(s){r.scrollRef.current&&(r.scrollRef.current.scrollLeft=s.target.scrollLeft)},r.handleResize=function(){cG(r.rafHandle),r.rafHandle=xne(r.checkOverflow)},r.handleKeyPressEvent=function(){r.clearSelection();for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];ws(r.props.onKeyPressEvent,c)},r.handleSelectEvent=function(){r.clearSelection();for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];ws(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];ws(r.props.onDoubleClickEvent,c)},r.handleShowMore=function(s,c,h,i,g){var w=r.props,T=w.popup,A=w.onDrillDown,D=w.onShowMore,k=w.getDrilldownView,I=w.doShowMoreDrillDown;if(r.clearSelection(),T){var F=_ne(h,r.containerRef.current);r.setState({overlay:{date:c,events:s,position:ls(ls({},F),{},{width:"200px"}),target:g}})}else I&&ws(A,[c,k(c)||Hc.DAY]);ws(D,[s,c,i])},r.handleSelectAllDaySlot=function(s,c){var h=r.props.onSelectSlot,i=new Date(s[0]),g=new Date(s[s.length-1]);g.setDate(s[s.length-1].getDate()+1),ws(h,{slots:s,start:i,end:g,action:c.action,resourceId:c.resourceId})},r.overlayDisplay=function(){r.setState({overlay:null})},r.checkOverflow=function(){if(!r._updatingOverflow){var s=r.contentRef.current;if(s!=null&&s.scrollHeight){var c=s.scrollHeight>s.clientHeight;r.state.isOverflowing!==c&&(r._updatingOverflow=!0,r.setState({isOverflowing:c},function(){r._updatingOverflow=!1}))}}},r.memoizedResources=Ine(function(s,c){return l$e(s,c)}),r.state={gutterWidth:void 0,isOverflowing:null},r.scrollRef=St.createRef(),r.contentRef=St.createRef(),r.containerRef=St.createRef(),r._scrollRatio=null,r.gutterRef=q.createRef(),r}return bc(t,e),Ka(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),cG(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(r,s,c,h,i,g,w,T,A,D){var k=this.props,I=k.min,F=k.max,j=(h.get(s)||[]).filter(function(W){return g.inRange(r,w.start(W),w.end(W),"day")}),V=(i.get(s)||[]).filter(function(W){return g.inRange(r,w.start(W),w.end(W),"day")});return St.createElement(ire,Object.assign({},this.props,{localizer:g,min:g.merge(r,I),max:g.merge(r,F),resource:c&&s,components:T,isNow:g.isSameDate(r,D),key:"".concat(s,"-").concat(r),date:r,events:j,backgroundEvents:V,dayLayoutAlgorithm:A}))}},{key:"renderResourcesFirst",value:function(r,s,c,h,i,g,w,T,A){var D=this;return s.map(function(k){var I=E0(k,2),F=I[0],j=I[1];return r.map(function(V){return D.renderDayColumn(V,F,j,c,h,i,g,T,A,w)})})}},{key:"renderRangeFirst",value:function(r,s,c,h,i,g,w,T,A){var D=this;return r.map(function(k){return St.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:k},s.map(function(I){var F=E0(I,2),j=F[0],V=F[1];return St.createElement("div",{style:{flex:1},key:g.resourceId(V)},D.renderDayColumn(k,j,V,c,h,i,g,T,A,w))}))})}},{key:"renderEvents",value:function(r,s,c,h){var i=this.props,g=i.accessors,w=i.localizer,T=i.resourceGroupingLayout,A=i.components,D=i.dayLayoutAlgorithm,k=this.memoizedResources(this.props.resources,g),I=k.groupEvents(s),F=k.groupEvents(c);return T?this.renderRangeFirst(r,k,I,F,w,g,h,A,D):this.renderResourcesFirst(r,k,I,F,w,g,h,A,D)}},{key:"render",value:function(){var r,s=this.props,c=s.events,h=s.backgroundEvents,i=s.range,g=s.width,w=s.rtl,T=s.selected,A=s.getNow,D=s.resources,k=s.components,I=s.accessors,F=s.getters,j=s.localizer,V=s.min,W=s.max,Z=s.showMultiDayTimes,K=s.longPressThreshold,ee=s.resizable,se=s.resourceGroupingLayout;g=g||this.state.gutterWidth;var he=i[0],ye=i[i.length-1];this.slots=i.length;var _e=[],ae=[],be=[];c.forEach(function(Ae){if(IT(Ae,he,ye,I,j)){var Re=I.start(Ae),He=I.end(Ae);I.allDay(Ae)||j.startAndEndAreDateOnly(Re,He)||!Z&&!j.isSameDate(Re,He)?_e.push(Ae):ae.push(Ae)}}),h.forEach(function(Ae){IT(Ae,he,ye,I,j)&&be.push(Ae)}),_e.sort(function(Ae,Re){return AB(Ae,Re,I,j)});var Te={range:i,events:_e,width:g,rtl:w,getNow:A,localizer:j,selected:T,allDayMaxRows:this.props.showAllEvents?1/0:(r=this.props.allDayMaxRows)!==null&&r!==void 0?r:1/0,resources:this.memoizedResources(D,I),selectable:this.props.selectable,accessors:I,getters:F,components:k,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:K,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:ee};return St.createElement("div",{className:ra("rbc-time-view",D&&"rbc-time-view-resources"),ref:this.containerRef},D&&D.length>1&&se?St.createElement(i$e,Te):St.createElement(r$e,Te),this.props.popup&&this.renderOverlay(),St.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},St.createElement(a$e,{date:he,ref:this.gutterRef,localizer:j,min:j.merge(he,V),max:j.merge(he,W),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:k,className:"rbc-time-gutter",getters:F}),this.renderEvents(i,ae,be,A())))}},{key:"renderOverlay",value:function(){var r,s,c=this,h=(r=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&r!==void 0?r:{},i=this.props,g=i.accessors,w=i.localizer,T=i.components,A=i.getters,D=i.selected,k=i.popupOffset,I=i.handleDragStart,F=function(){return c.setState({overlay:null})};return St.createElement(V5,{overlay:h,accessors:g,localizer:w,components:T,getters:A,selected:D,popupOffset:k,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:I,show:!!h.position,overlayDisplay:this.overlayDisplay,onHide:F})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var r=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,c=(s=r.gutterRef)!==null&&s!==void 0&&s.current?TB(r.gutterRef.current):void 0;c&&r.state.gutterWidth!==c&&r.setState({gutterWidth:c})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var r=this.contentRef.current;r.scrollTop=r.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=r.min,c=r.max,h=r.scrollToTime,i=r.localizer,g=i.diff(i.merge(h,s),h,"milliseconds"),w=i.diff(s,c,"milliseconds");this._scrollRatio=g/w}}])}(q.Component);A1.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var c$e=["date","localizer","min","max","scrollToTime","enableAutoScroll"],XD=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,h=r.min,i=h===void 0?c.startOf(new Date,"day"):h,g=r.max,w=g===void 0?c.endOf(new Date,"day"):g,T=r.scrollToTime,A=T===void 0?c.startOf(new Date,"day"):T,D=r.enableAutoScroll,k=D===void 0?!0:D,I=em(r,c$e),F=t.range(s,{localizer:c});return St.createElement(A1,Object.assign({},I,{range:F,eventOffset:10,localizer:c,min:i,max:w,scrollToTime:A,enableAutoScroll:k}))}}])}(St.Component);XD.range=function(e,t){var n=t.localizer;return[n.startOf(e,"day")]};XD.navigate=function(e,t,n){var r=n.localizer;switch(t){case yu.PREVIOUS:return r.add(e,-1,"day");case yu.NEXT:return r.add(e,1,"day");default:return e}};XD.title=function(e,t){var n=t.localizer;return n.format(e,"dayHeaderFormat")};var u$e=["date","localizer","min","max","scrollToTime","enableAutoScroll"],nv=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,h=r.min,i=h===void 0?c.startOf(new Date,"day"):h,g=r.max,w=g===void 0?c.endOf(new Date,"day"):g,T=r.scrollToTime,A=T===void 0?c.startOf(new Date,"day"):T,D=r.enableAutoScroll,k=D===void 0?!0:D,I=em(r,u$e),F=t.range(s,this.props);return St.createElement(A1,Object.assign({},I,{range:F,eventOffset:15,localizer:c,min:i,max:w,scrollToTime:A,enableAutoScroll:k}))}}])}(St.Component);nv.defaultProps=A1.defaultProps;nv.navigate=function(e,t,n){var r=n.localizer;switch(t){case yu.PREVIOUS:return r.add(e,-1,"week");case yu.NEXT:return r.add(e,1,"week");default:return e}};nv.range=function(e,t){var n=t.localizer,r=n.startOfWeek(),s=n.startOf(e,"week",r),c=n.endOf(e,"week",r);return n.range(s,c)};nv.title=function(e,t){var n=t.localizer,r=nv.range(e,{localizer:n}),s=Bne(r),c=s[0],h=s.slice(1);return n.format({start:c,end:h.pop()},"dayRangeHeaderFormat")};var d$e=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function q5(e,t){return nv.range(e,t).filter(function(n){return[6,0].indexOf(n.getDay())===-1})}var TE=function(e){function t(){return Za(this,t),xc(this,t,arguments)}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,h=r.min,i=h===void 0?c.startOf(new Date,"day"):h,g=r.max,w=g===void 0?c.endOf(new Date,"day"):g,T=r.scrollToTime,A=T===void 0?c.startOf(new Date,"day"):T,D=r.enableAutoScroll,k=D===void 0?!0:D,I=em(r,d$e),F=q5(s,this.props);return St.createElement(A1,Object.assign({},I,{range:F,eventOffset:15,localizer:c,min:i,max:w,scrollToTime:A,enableAutoScroll:k}))}}])}(St.Component);TE.defaultProps=A1.defaultProps;TE.range=q5;TE.navigate=nv.navigate;TE.title=function(e,t){var n=t.localizer,r=q5(e,{localizer:n}),s=Bne(r),c=s[0],h=s.slice(1);return n.format({start:c,end:h.pop()},"dayRangeHeaderFormat")};var ZD=30;function KD(e){var t=e.accessors,n=e.components,r=e.date,s=e.events,c=e.getters,h=e.length,i=h===void 0?ZD:h,g=e.localizer,w=e.onDoubleClickEvent,T=e.onSelectEvent,A=e.selected,D=q.useRef(null),k=q.useRef(null),I=q.useRef(null),F=q.useRef(null),j=q.useRef(null);q.useEffect(function(){Z()});var V=function(ye,_e,ae){var be=n.event,Te=n.date;return _e=_e.filter(function(Ae){return IT(Ae,g.startOf(ye,"day"),g.endOf(ye,"day"),t,g)}),_e.map(function(Ae,Re){var He=t.title(Ae),Se=t.end(Ae),qe=t.start(Ae),it=c.eventProp(Ae,qe,Se,WD(Ae,A)),tt=Re===0&&g.format(ye,"agendaDateFormat"),Oe=Re===0?St.createElement("td",{rowSpan:_e.length,className:"rbc-agenda-date-cell"},Te?St.createElement(Te,{day:ye,label:tt}):tt):!1;return St.createElement("tr",{key:ae+"_"+Re,className:it.className,style:it.style},Oe,St.createElement("td",{className:"rbc-agenda-time-cell"},W(ye,Ae)),St.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(yt){return T&&T(Ae,yt)},onDoubleClick:function(yt){return w&&w(Ae,yt)}},be?St.createElement(be,{event:Ae,title:He}):He))},[])},W=function(ye,_e){var ae="",be=n.time,Te=g.messages.allDay,Ae=t.end(_e),Re=t.start(_e);return t.allDay(_e)||(g.eq(Re,Ae)?Te=g.format(Re,"agendaTimeFormat"):g.isSameDate(Re,Ae)?Te=g.format({start:Re,end:Ae},"agendaTimeRangeFormat"):g.isSameDate(ye,Re)?Te=g.format(Re,"agendaTimeFormat"):g.isSameDate(ye,Ae)&&(Te=g.format(Ae,"agendaTimeFormat"))),g.gt(ye,Re,"day")&&(ae="rbc-continues-prior"),g.lt(ye,Ae,"day")&&(ae+=" rbc-continues-after"),St.createElement("span",{className:ae.trim()},be?St.createElement(be,{event:_e,day:ye,label:Te}):Te)},Z=function(){if(j.current){var ye=D.current,_e=j.current.firstChild;if(_e){var ae=F.current.scrollHeight>F.current.clientHeight,be=[],Te=be;be=[TB(_e.children[0]),TB(_e.children[1])],(Te[0]!==be[0]||Te[1]!==be[1])&&(k.current.style.width=be[0]+"px",I.current.style.width=be[1]+"px"),ae?(vZ(ye,"rbc-header-overflowing"),ye.style.marginRight=w5()+"px"):_Z(ye,"rbc-header-overflowing")}}},K=g.messages,ee=g.add(r,i,"day"),se=g.range(r,ee,"day");return s=s.filter(function(he){return IT(he,g.startOf(r,"day"),g.endOf(ee,"day"),t,g)}),s.sort(function(he,ye){return+t.start(he)-+t.start(ye)}),St.createElement("div",{className:"rbc-agenda-view"},s.length!==0?St.createElement(St.Fragment,null,St.createElement("table",{ref:D,className:"rbc-agenda-table"},St.createElement("thead",null,St.createElement("tr",null,St.createElement("th",{className:"rbc-header",ref:k},K.date),St.createElement("th",{className:"rbc-header",ref:I},K.time),St.createElement("th",{className:"rbc-header"},K.event)))),St.createElement("div",{className:"rbc-agenda-content",ref:F},St.createElement("table",{className:"rbc-agenda-table"},St.createElement("tbody",{ref:j},se.map(function(he,ye){return V(he,s,ye)}))))):St.createElement("span",{className:"rbc-agenda-empty"},K.noEventsInRange))}KD.range=function(e,t){var n=t.length,r=n===void 0?ZD:n,s=t.localizer,c=s.add(e,r,"day");return{start:e,end:c}};KD.navigate=function(e,t,n){var r=n.length,s=r===void 0?ZD:r,c=n.localizer;switch(t){case yu.PREVIOUS:return c.add(e,-s,"day");case yu.NEXT:return c.add(e,s,"day");default:return e}};KD.title=function(e,t){var n=t.length,r=n===void 0?ZD:n,s=t.localizer,c=s.add(e,r,"day");return s.format({start:e,end:c},"agendaHeaderFormat")};var xM=t0(t0(t0(t0(t0({},Hc.MONTH,YD),Hc.WEEK,nv),Hc.WORK_WEEK,TE),Hc.DAY,XD),Hc.AGENDA,KD),h$e=["action","date","today"];function f$e(e,t){var n=t.action,r=t.date,s=t.today,c=em(t,h$e);switch(e=typeof e=="string"?xM[e]:e,n){case yu.TODAY:r=s||new Date;break;case yu.DATE:break;default:wT(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),r=e.navigate(r,n,c)}return r}function p$e(e,t){var n=null;return typeof t=="function"?n=t(e):typeof t=="string"&&zg(e)==="object"&&e!=null&&t in e&&(n=e[t]),n}var _g=function(t){return function(n){return p$e(n,t)}},m$e=["view","date","getNow","onNavigate"],g$e=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function sre(e){if(Array.isArray(e))return e;for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var s=E0(r[n],2),c=s[0],h=s[1];h&&t.push(c)}return t}function y$e(e,t){var n=t.views,r=sre(n);return r.indexOf(e)!==-1}var are=function(e){function t(){var n;Za(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=xc(this,t,[].concat(s)),n.getViews=function(){var h=n.props.views;return Array.isArray(h)?NVe(h,function(i,g){return i[g]=xM[g]},{}):zg(h)==="object"?lVe(h,function(i,g){return i===!0?xM[g]:i}):xM},n.getView=function(){var h=n.getViews();return h[n.props.view]},n.getDrilldownView=function(h){var i=n.props,g=i.view,w=i.drilldownView,T=i.getDrilldownView;return T?T(h,g,Object.keys(n.getViews())):w},n.handleRangeChange=function(h,i,g){var w=n.props,T=w.onRangeChange,A=w.localizer;T&&i.range&&T(i.range(h,{localizer:A}),g)},n.handleNavigate=function(h,i){var g=n.props,w=g.view,T=g.date,A=g.getNow,D=g.onNavigate,k=em(g,m$e),I=n.getView(),F=A();T=f$e(I,ls(ls({},k),{},{action:h,date:i||T||F,today:F})),D(T,w,h),n.handleRangeChange(T,I)},n.handleViewChange=function(h){h!==n.props.view&&y$e(h,n.props)&&n.props.onView(h);var i=n.getViews();n.handleRangeChange(n.props.date||n.props.getNow(),i[h],h)},n.handleSelectEvent=function(){for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onDoubleClickEvent,i)},n.handleKeyPressEvent=function(){for(var h=arguments.length,i=new Array(h),g=0;g<h;g++)i[g]=arguments[g];ws(n.props.onKeyPressEvent,i)},n.handleSelectSlot=function(h){ws(n.props.onSelectSlot,h)},n.handleDrillDown=function(h,i){var g=n.props.onDrillDown;if(g){g(h,i,n.drilldownView);return}i&&n.handleViewChange(i),n.handleNavigate(yu.DATE,h)},n.state={context:t.getContext(n.props)},n}return bc(t,e),Ka(t,[{key:"render",value:function(){var r=this.props,s=r.view,c=r.toolbar,h=r.events,i=r.backgroundEvents,g=r.resourceGroupingLayout,w=r.style,T=r.className,A=r.elementProps,D=r.date,k=r.getNow,I=r.length,F=r.showMultiDayTimes,j=r.onShowMore,V=r.doShowMoreDrillDown;r.components,r.formats,r.messages,r.culture;var W=em(r,g$e);D=D||k();var Z=this.getView(),K=this.state.context,ee=K.accessors,se=K.components,he=K.getters,ye=K.localizer,_e=K.viewNames,ae=se.toolbar||xUe,be=Z.title(D,{localizer:ye,length:I});return St.createElement("div",Object.assign({},A,{className:ra(T,"rbc-calendar",W.rtl&&"rbc-rtl"),style:w}),c&&St.createElement(ae,{date:D,view:s,views:_e,label:be,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:ye}),St.createElement(Z,Object.assign({},W,{events:h,backgroundEvents:i,date:D,getNow:k,length:I,localizer:ye,getters:he,components:se,accessors:ee,showMultiDayTimes:F,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:j,doShowMoreDrillDown:V,resourceGroupingLayout:g})))}}],[{key:"getDerivedStateFromProps",value:function(r){return{context:t.getContext(r)}}},{key:"getContext",value:function(r){var s=r.startAccessor,c=r.endAccessor,h=r.allDayAccessor,i=r.tooltipAccessor,g=r.titleAccessor,w=r.resourceAccessor,T=r.resourceIdAccessor,A=r.resourceTitleAccessor,D=r.eventIdAccessor,k=r.eventPropGetter,I=r.backgroundEventPropGetter,F=r.slotPropGetter,j=r.slotGroupPropGetter,V=r.dayPropGetter,W=r.view,Z=r.views,K=r.localizer,ee=r.culture,se=r.messages,he=se===void 0?{}:se,ye=r.components,_e=ye===void 0?{}:ye,ae=r.formats,be=ae===void 0?{}:ae,Te=sre(Z),Ae=wUe(he);return{viewNames:Te,localizer:_Ue(K,ee,be,Ae),getters:{eventProp:function(){return k&&k.apply(void 0,arguments)||{}},backgroundEventProp:function(){return I&&I.apply(void 0,arguments)||{}},slotProp:function(){return F&&F.apply(void 0,arguments)||{}},slotGroupProp:function(){return j&&j.apply(void 0,arguments)||{}},dayProp:function(){return V&&V.apply(void 0,arguments)||{}}},components:oVe(_e[W]||{},zVe(_e,Te),{eventWrapper:Ap,backgroundEventWrapper:Ap,eventContainerWrapper:Ap,dateCellWrapper:Ap,weekWrapper:Ap,timeSlotWrapper:Ap,timeGutterWrapper:Ap,timeIndicatorWrapper:Ap}),accessors:{start:_g(s),end:_g(c),allDay:_g(h),tooltip:_g(i),title:_g(g),resource:_g(w),resourceId:_g(T),resourceTitle:_g(A),eventId:_g(D)}}}}])}(St.Component);are.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Hc.MONTH,views:[Hc.MONTH,Hc.WEEK,Hc.DAY,Hc.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Hc.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var v$e=rne(are,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),_$e=function(t,n,r){var s=t.start,c=t.end;return"".concat(r.format(s,"P",n),"  ").concat(r.format(c,"P",n))},_3=function(t,n,r){var s=t.start,c=t.end;return"".concat(r.format(s,"p",n),"  ").concat(r.format(c,"p",n))},x$e=function(t,n,r){var s=t.start;return"".concat(r.format(s,"h:mma",n),"  ")},b$e=function(t,n,r){var s=t.end;return"  ".concat(r.format(s,"h:mma",n))},w$e=function(t,n,r){var s=t.start,c=t.end;return"".concat(r.format(s,"MMMM dd",n),"  ").concat(r.format(c,w1(s,c,"month")?"dd":"MMMM dd",n))},S$e={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:_3,eventTimeRangeFormat:_3,eventTimeRangeStartFormat:x$e,eventTimeRangeEndFormat:b$e,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:w$e,agendaHeaderFormat:_$e,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:_3},T$e=function(t){var n=t.startOfWeek,r=t.getDay,s=t.format,c=t.locales;return new vUe({formats:S$e,firstOfWeek:function(i){return r(n(new Date,{locale:c[i]}))},format:function(i,g,w){return s(new Date(i),g,{locale:c[w]})}})};const E$e={"en-US":sE},C$e=T$e({format:vJ,startOfWeek:()=>Xp(new Date,{weekStartsOn:1}),getDay:qAe,locales:E$e}),A$e=[{label:"Map View",value:"map"},{label:"List View",value:"list"},{label:"Calendar View",value:"calendar"}],M$e=["/src/assets/images/landing_page_industry_capture/1.jpg","/src/assets/images/landing_page_industry_capture/2.jpg","/src/assets/images/landing_page_industry_capture/3.jpg"],R$e=[{user:"John Smith",avatar:"/src/assets/images/users/user-round.svg",text:"Inspected the issue.",date:"Jun 12, 10:30 AM"},{user:"Sarah Johnson",avatar:"/src/assets/images/users/user-round.svg",text:"Materials ordered.",date:"Jun 12, 2:15 PM"}],q_={title:"Structural alignment issue",description:"Column alignment shows 2.5cm deviation.",priority:"High",category:"Structural",assignee:"John Smith",createdAt:new Date("2023-06-12T10:00:00"),status:"Open"},V7=[{id:1,issue:"Alignment issue",type:"Structural",assignedTo:"John Smith",priority:"High",createdAt:new Date(2023,5,12,10,0)},{id:2,issue:"Wiring incomplete",type:"Electrical",assignedTo:"Sarah Johnson",priority:"Medium",createdAt:new Date(2023,5,13,15,0)}],D$e=["John Smith","Sarah Johnson","Alex Lee","Priya Patel"],P$e=["Architecture","Structure","MEPF","Safety","Quality"],I$e=["Low","Medium","High"];function k$e(){const[e,t]=q.useState("map"),[n,r]=q.useState(!1),[s,c]=q.useState(""),[h,i]=q.useState(R$e),[g,w]=q.useState({title:"",description:"",priority:"",category:"",assignee:"",photos:[]}),T=()=>{s.trim()&&(i([...h,{user:"You",avatar:"/src/assets/images/users/user-round.svg",text:s,date:new Date().toLocaleString()}]),c(""))},A=(I,F)=>{w(j=>({...j,[I]:F}))},D=I=>{w(F=>({...F,photos:Array.from(I.target.files)}))},k=q.useMemo(()=>V7.map(I=>({title:`${I.issue} (${I.assignedTo})`,start:I.createdAt,end:new Date(I.createdAt.getTime()+60*60*1e3)})),[]);return $.jsxs(Dr,{sx:{display:"flex",flexDirection:"column",gap:2},children:[$.jsxs(Dr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[$.jsxs(Dr,{children:[$.jsx(rr,{variant:"h4",children:"Downtown Highrise - Issue Tagging"}),$.jsx(rr,{variant:"subtitle1",children:"Identify and track issues across your construction site"})]}),$.jsxs(Dr,{sx:{display:"flex",gap:1},children:[$.jsx(ms,{variant:"outlined",children:"Filter"}),$.jsx(ms,{variant:"contained",onClick:()=>r(!0),children:"+ New Issue"})]})]}),$.jsx(rJ,{value:e,onChange:(I,F)=>t(F),children:A$e.map(I=>$.jsx(tJ,{label:I.label,value:I.value},I.value))}),$.jsxs(Dr,{sx:{display:"flex",gap:2},children:[$.jsxs(fu,{sx:{flex:2,minHeight:400,p:2,width:e==="map"?void 0:"100%"},children:[e==="map"&&$.jsxs(Dr,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[$.jsx(Dr,{sx:{flex:1,minHeight:250,bgcolor:"#e0e0e0",borderRadius:2,mb:2,display:"flex",alignItems:"center",justifyContent:"center"},children:$.jsx(rr,{variant:"h6",children:"Map View (Mapbox Placeholder)"})}),$.jsx(rr,{variant:"subtitle1",sx:{mb:1},children:"Photos"}),$.jsx(EEe,{cols:3,rowHeight:100,sx:{mb:2},children:M$e.map((I,F)=>$.jsx(REe,{children:$.jsx("img",{src:I,alt:`placeholder-${F}`,style:{objectFit:"cover",width:"100%",height:"100%"}})},F))}),$.jsx(rr,{variant:"subtitle1",sx:{mb:1},children:"Comments"}),$.jsx(lv,{sx:{maxHeight:150,overflow:"auto",mb:1},children:h.map((I,F)=>$.jsxs(_j,{alignItems:"flex-start",children:[$.jsx(PQ,{children:$.jsx(WT,{src:I.avatar})}),$.jsx(Yb,{primary:I.user,secondary:$.jsxs($.Fragment,{children:[$.jsx(rr,{component:"span",variant:"body2",color:"text.primary",children:I.text}),$.jsx("br",{}),$.jsx(rr,{component:"span",variant:"caption",color:"text.secondary",children:I.date})]})})]},F))}),$.jsxs(Dr,{sx:{display:"flex",gap:1},children:[$.jsx(Ps,{fullWidth:!0,size:"small",placeholder:"Add a comment...",value:s,onChange:I=>c(I.target.value),onKeyDown:I=>{I.key==="Enter"&&T()}}),$.jsx(ms,{variant:"contained",onClick:T,children:"Post"})]})]}),e==="list"&&$.jsxs(VEe,{children:[$.jsx(tCe,{children:$.jsxs(w8,{children:[$.jsx(Tp,{children:"Issue"}),$.jsx(Tp,{children:"Type"}),$.jsx(Tp,{children:"Assigned To"}),$.jsx(Tp,{children:"Priority"}),$.jsx(Tp,{children:"Created At"})]})}),$.jsx(GEe,{children:V7.map(I=>$.jsxs(w8,{children:[$.jsx(Tp,{children:I.issue}),$.jsx(Tp,{children:I.type}),$.jsx(Tp,{children:I.assignedTo}),$.jsx(Tp,{children:I.priority}),$.jsx(Tp,{children:I.createdAt.toLocaleString()})]},I.id))})]}),e==="calendar"&&$.jsx(Dr,{sx:{height:500},children:$.jsx(v$e,{localizer:C$e,events:k,startAccessor:"start",endAccessor:"end",style:{height:"100%"}})})]}),e==="map"&&$.jsxs(fu,{sx:{flex:1,minWidth:320,p:2,display:"flex",flexDirection:"column",gap:2},children:[$.jsx(rr,{variant:"h6",children:"Issue Details"}),$.jsx(gu,{}),$.jsx(rr,{variant:"subtitle2",children:"Information about the selected issue"}),$.jsxs(Dr,{children:[$.jsx(rr,{variant:"subtitle1",fontWeight:600,children:q_.title}),$.jsx(rr,{sx:{mb:1},children:q_.description}),$.jsxs(rr,{children:[$.jsx("b",{children:"Priority:"})," ",$.jsx("span",{style:{color:"red"},children:q_.priority})]}),$.jsxs(rr,{children:[$.jsx("b",{children:"Category:"})," ",q_.category]}),$.jsxs(rr,{children:[$.jsx("b",{children:"Assignee:"})," ",q_.assignee]}),$.jsxs(rr,{children:[$.jsx("b",{children:"Created:"})," ",q_.createdAt.toLocaleDateString()]}),$.jsxs(rr,{children:[$.jsx("b",{children:"Status:"})," ",q_.status]})]})]})]}),n&&$.jsx(Dr,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(0,0,0,0.3)",zIndex:1300,display:"flex",alignItems:"center",justifyContent:"center"},children:$.jsxs(fu,{sx:{p:3,minWidth:400,maxWidth:500},children:[$.jsx(rr,{variant:"h6",sx:{mb:2},children:"New Issue"}),$.jsxs(Dr,{sx:{display:"flex",flexDirection:"column",gap:2},children:[$.jsx(Ps,{label:"Issue Title",value:g.title,onChange:I=>A("title",I.target.value),fullWidth:!0,size:"small"}),$.jsx(Ps,{label:"Description",value:g.description,onChange:I=>A("description",I.target.value),fullWidth:!0,size:"small",multiline:!0,minRows:2}),$.jsx(Ps,{select:!0,label:"Priority",value:g.priority,onChange:I=>A("priority",I.target.value),fullWidth:!0,size:"small",children:I$e.map(I=>$.jsx(pc,{value:I,children:I},I))}),$.jsx(Ps,{select:!0,label:"Category",value:g.category,onChange:I=>A("category",I.target.value),fullWidth:!0,size:"small",children:P$e.map(I=>$.jsx(pc,{value:I,children:I},I))}),$.jsx(Ps,{select:!0,label:"Assign To",value:g.assignee,onChange:I=>A("assignee",I.target.value),fullWidth:!0,size:"small",children:D$e.map(I=>$.jsx(pc,{value:I,children:I},I))}),$.jsxs(ms,{variant:"outlined",component:"label",children:["Attach Photos",$.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:D})]}),g.photos.length>0&&$.jsx(Dr,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:g.photos.map((I,F)=>$.jsx(rr,{variant:"caption",children:I.name},F))}),$.jsxs(Dr,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[$.jsx(ms,{onClick:()=>r(!1),children:"Cancel"}),$.jsx(ms,{variant:"contained",children:"Save Issue"})]})]})]})})]})}const O$e=B0(q.lazy(()=>F0(()=>import("./index-CANnqPNq.js"),[],import.meta.url)));B0(q.lazy(()=>F0(()=>import("./Typography-B6awIVZf.js"),__vite__mapDeps([3,4]),import.meta.url)));B0(q.lazy(()=>F0(()=>import("./Color-D86CJ3YJ.js"),__vite__mapDeps([5,4]),import.meta.url)));B0(q.lazy(()=>F0(()=>import("./Shadow-DERwX7Aa.js"),__vite__mapDeps([6,4]),import.meta.url)));B0(q.lazy(()=>F0(()=>import("./index-DPWptEbn.js"),[],import.meta.url)));const L$e={path:"/",element:$.jsx(CCe,{}),children:[{path:"/dashboard",element:$.jsx(oS,{element:O$e})},{path:"createProject",element:$.jsx(oS,{element:bBe})},{path:"/project",element:$.jsx(oS,{element:F8})},{path:"/project/:id/viewer",element:$.jsx(oS,{element:F8})},{path:"/project/:id/compare",element:$.jsx(oS,{element:ZNe})},{path:"/project/:projectID/issue",element:$.jsx(k$e,{})},{path:"/project/:projectID/dpr",element:$.jsx(JNe,{})},{path:"/project/:projectID",element:$.jsx(YNe,{})},{path:"/project/:projectID/files",element:$.jsx(Ute,{})},{path:"/project/:projectID/:projectWorkDayID",element:$.jsx(XNe,{})}]},z$e=""+new URL("1-DNv9qW5S.png",import.meta.url).href,F$e="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAZhtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAANGlsb2MAAAAAREAAAgACAAAAAAG8AAEAAAAAAAAGkgABAAAAAAhOAAEAAAAAAAACsQAAADhpaW5mAAAAAAACAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAFWluZmUCAAAAAAIAAGF2MDEAAAAA12lwcnAAAACxaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EBHAAAAAAUaXNwZQAAAAAAAALCAAAA7AAAAA5waXhpAAAAAAEIAAAAOGF1eEMAAAAAdXJuOm1wZWc6bXBlZ0I6Y2ljcDpzeXN0ZW1zOmF1eGlsaWFyeTphbHBoYQAAAAAMYXYxQ4EhAgAAAAAUaXNwZQAAAAAAAALCAAAA7AAAABBwaXhpAAAAAAMICAgAAAAeaXBtYQAAAAAAAAACAAEEgYYHiAACBIIDhIUAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAACUttZGF0EgAKBhhl7B62FTKFDUyACAJ0BBFbO8aIkEZoPEP/rOoYLZ6e5oAO+917OXuCwLfbFpMuBJoKzvBjD9MohY5sHcU1IulfEP6Cd/MdIltEks/56docRnAc1Z+nvCYG/1ZNWjnVAzV30W5wEZtR2e8kIBf4haGYpgoAQK9y5IqolKMfb4UpGNyKMuZBBQgSPfixXHtxqLElzba3ev8t91WJ4A8+etTjp//5LKGy4iJ6f3V3884s92niMU8efaMbQFEx34zEthCLPKpWSmRlrsfvAELGvputiztPnXtyuIFGOZ6pO3za+j/PojcY8Bjmq7APJOWcWt4lc67MAOazw/sUqvWWlb315M3VR4Og6LQaTRcFeHeN8KrnxtFeu4tYlcsiisXokG4f5MuehwA5mUbKpLxBfbEs3Soy/OPGb7H3kApphMPnlkJuMus60S41OxUU95RQIiV1JaDFe0RpVFaek30DgURMrrNjvysh6oTsURVd3jkNX3WuqZtoiq6aoVmg9JkwAv+lN2nOpbNmAlVcTnoTgz/wMh8S8e+UR6ZIfFjeZA/1fDi2qj81svHtknWtvsmv8U+Ljgl4Yf4IQO31F0/QmZo2VLyHSKO/6IK6RtT3okLVznuAYMBwcG77xt4pmxwH86xAHkWIh0K3TYjvI3Uhsr5Outeigu+awitCl+JSokfs8pnbJBxS4cQ/Yuxrf1z/Ebu17MSUx3gSEJqnqdxZkrGqeIz+tZfv1BEjG+Cj6H+30FpLvrBDeS81mLj87n9/22RnUyWgTz6SzAh93O4tRZLOK2iS3gpdGl2cOlOJsRSr/J4y0gUqsr5KiaNOdqD2qO5sb5TGjcpkcftM5Cu7unZK0kcmC1HjFBiV/4J1Hkud8V3ca3cPh80rZ6U5QC/5a6lh3cnhLQ0SbdxCuZgxzrQbz819dZA0j4hDEnBZLD+eLKBjEnvEoyBs58+ZZXqo8pL5rCqFggD/ek/wsXkJ1WuOuzSV52lju0ULt1DpKLEoJQRAt4p9IUssjj+18qP7665hmZbYTqlhC9KA4kMZTHP/5KikwMmQPQPJP0ZLDb9Dk/Tb/K7tTlML2eQYc5KanWMby6kPQTqls6oXobcGRoRCnDmRlPx3MHMhEq/GPgCGyTLTCFj7GkU/YM/RmC7X50lV+hG9/qX97L9+hbr04CErUTsIPcRA9An5TrG/ZMVfeHpL+xY7s49qdsnoN0GNn9mDku0u5XWJ2byz51yc/RvaLXVeS0O6OFjeh32ozyfh7leCpkLfIU/yDe0664iPjcE3z+ABFR4ToK+M0UHEprFn+qVpC3gm6AuvHpxE+Yv1pHqSl5GrewDGxqO7/eP//xjl4g/6IRdvG2V/tCwNsVrpqP21Oe5T6sCv4ax2/OnKUDahRz9TP7Ov6Ds62emXTFvWW2pTD8/3Nk2zajiatKla3zvX3DjLvWyNE9OnNExi67CRBUnYkAOaw8caT+pbSqpRs9YoOb/MShNDdbViTp4DLSynsaNjHJ66NQqMRKhcXSvxPPnoh5zRl7VrFF+17a9EjuA0GpWi78/Lz5+TbVGThePr8MGIU3892KFdtdQORN3Utm3x/O+pnYDoCBbGeUtRt6ICCdjlDnT7M6dQ0UCT73GtHSUdrhx1fF3KU5S4iNbFJXZYDbS+onDddTcIgzdmKUyv0V3VoATzKgYYKo4Zw/96xlyngX52iVAu2Zd2fOKJ4/fNs2JvU/upn5MKgoik5Vk2qiZPywqPhkYYbyLOam0HVELWp2DUpBKIQyEskoGd59vwDS4ITss29afLY1yngomN1GlEtzzCo6CI/KiustJcb27UWvBlHZeofhqy0hjdssk6GgoJfGOZg4dcgs1aZAzD0XCoWPyauFc0QGsx10q66fM5N2zvQKyF7ptzKEXo74RNFJRmYfEiMsKI260+zLtx9WTtA9gWgfN/L4FW73fsECPe4eMGOIg0ygMIprEYi7wO4aVOmqPZP+tyMDcfdqp5zQqKfZqZ+eB6C36UWjafvuKhPt/7E+Qf2ngyEmWWuUebcfzxsJeADlRqeax9T5qF0y3N5lhCoMsMpf9e3SviYuLnRd9oPga5Z8rZU+rYmBHyafClTrTc7AM3Yuu/R5EIQYvFkpP0vrQzUx/5U0xoBlGsJZRCE+B7iEQl7bbm2f4viG0yCVVW3ClpBWNBnufJYM46cVtDwI9J/Ijm2+mMZv6j/Ls2g4yZRqsBaH6QhucLdVg9oYPCmx4SAAoGOGXsHrYJMqQFTIACAaIvtJd+as80kWpqntUrStMHankfVhjtg6xtS9FnEtd4uvk7Nu0HQJKOtPC6lsS1i5bPVsOU9+Qt6tYsTLzETc8dGalrZlMZqYavMc9wwBB39iLZIaM1/CyLLZDAS0MpMcvPCVnbpj2iI+fQl2R8CZHfXJOvacAE2aXSJAhUeMs6HICPWK25OkWIgc/j5o3HXRoOHFd8ef2A7rn6eG2dlPEBu7XbT15l8p9uJn1rHKAVs3aSqiHwoar0y7E0rqpxsx67i4xsAWfbdhTzFt9aCeOKcu6TVJM+39ru/x0Qg9HNpfg5HxvAZdEJGab5YcDvkDMpYjfNOaBLVjd9ZDvaM5fKGJZptAar9Ale83+2FB0HADKX41VQYCibISaaZkPaqgjlTQCpx16R+S0bC3dBqrziC0v7Yr+FmfbA0fa+bqHygxa3jMO5jDa0Yiov2ik696bZnV7vG03AG5yIAa1k7Urt7N9IFkbMj5JBbQIj9o9w8d8yKwN8DJs+ig0/7ny6TSnIhA45aDg8kc8zQdUDPYQ/mnIH4bJ/m//GTOIk0PRi8TRzFtrlaq7JIdYf23Pf1t1rU6DEn3qsQ8v42b1ZCJdhNp9o76qcxp3gLeymOM1d5btjN1vG9acUCbOj111hxWAAEyqIoB4+GnQ3gqytFrYv7m37pI12q/aK44f6vq1Tkk7cC77ic4qG+rDKyc8bkKl2lYyOsciHLxDMsQacGjcDj6CuW5dxoi8iPxrA0BRPWKmWj66EGt7dSI6sMQcYwqoFAb9OqNcutksZzqMY53lG0ICIIPa0rbe57HiZifAYkn4d1HrOXXn5R6/JfxvfIFGrdYaTUMhQSAACzNHYGkaiHteHYX0q3cGZMAHRFdlZzezUe7rRp40ZieKR/rVs8A==",B$e="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAZhtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAANGlsb2MAAAAAREAAAgACAAAAAAG8AAEAAAAAAAAFjAABAAAAAAdIAAEAAAAAAAACfQAAADhpaW5mAAAAAAACAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAFWluZmUCAAAAAAIAAGF2MDEAAAAA12lwcnAAAACxaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EBHAAAAAAUaXNwZQAAAAAAAALCAAAA7AAAAA5waXhpAAAAAAEIAAAAOGF1eEMAAAAAdXJuOm1wZWc6bXBlZ0I6Y2ljcDpzeXN0ZW1zOmF1eGlsaWFyeTphbHBoYQAAAAAMYXYxQ4EhAgAAAAAUaXNwZQAAAAAAAALCAAAA7AAAABBwaXhpAAAAAAMICAgAAAAeaXBtYQAAAAAAAAACAAEEgYYHiAACBIIDhIUAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAACBFtZGF0EgAKBhhl7B62FTL/CkyACAJ0BBFbO8hH+nnalVAYLaJyv4FDq0sXtyWD0opMnCXTYmkGR2tOdBdT+UoFVG5/EfMmqr3CSnmf57X9h3FffwByOqJg9yGviI+Z2G8NfKoAwGVajuA0j8yTT0nbwTC39R989kx8TRdDod/RMePHZJ6ftA0JxWwwJIgtX/+JaTBWuF6dheB69pcn1Z6+BpUb51XjM9qh6mZEyzL15+owMm0UABRvJQL7/O1panTPn+H2S/wjAerFvutHMkZfWKhyRxZs+iNCk/YsoaxQHwBfvZw6ipZmVbIfB/6LFvKme/z46W+iKausOoHnltM3RZKn0VUbYVz/ft8xG818h7RzCh4p9OPdRfPo9h3zi8bMKkzgyfJz5a1fx2RfEmC/KWLasIr6qOm4cZ5wbAmanHr6cWFRcby9yTUXKJWlQvw7xVaHY7Z3WtTfGMbGYGTkhpgULS3QHJt83xGLeJ8lYGLbiMnFxDgdL+gMQ/Xcroo+dLD3tdYb2/h+ak0l717xGJ6pw47bO0/HSFV7AtY4CZni+0yLR9CES8Dg1y/83d2P/9Njxk98CjMxLrpS+y+dEf+RhQdqQMETUKLiPZzP2SCd4ZDsFJHGlrPnJeNp+7EKwV7ScD2Zfoy4LKQQJWTCI2G/yRsZGaY+6f8SPBuAyc5L4jtzFmB+E5M9oFjXyjI9K9uTFaFAILLL9vqcWbG1sffp31Y94q/7FHzAnebizt9WrFRDtZ8y6R/iOU3jwIdOMk1qnL6DKhi+1dxvw/JfJYAMtnF528Of81fbvLJCon6slqBdzzaeYeqw8C/IPjeK6Qt9wNgKN76DzSF4pVAkY8RsZEpEE9PHYQUrRg4Q63OudTc49nL+QlghFHQPKrL9QTMvBFLc9tB1HXRDExdFeocs/bUXc7mcxdNs2SETkOgzMGyHbbS4NBJ/rqU9jDYvPM971NviSs2klmeldT5+2Xh/yVJr3sXplW3icuCvH9k7LgHGs4RnvF2rPP0ffubvKZug06X+bIrX1MY7IW60j+HnJmHOPHX/kPMfENDSV88q2prxiRYTdieIV1JYY3nL7SFo9SeO5DCArpb13I/au55OGHH4U26ybPGSDy4i93pgV/N3hdO/Thb2sLBZPPT/IAbBGQeJRrVQFxQpKFtpEvcJu3POczK4MZWRvS5L3ey7DV1YwSi/5eY0jWaTNpwVL5he18PtOY6li7oua1Uz4Oc1783ypoDCBiPb+jKBBqTzvXZVuovY+NZ/9aUR3/Awo9Mg07tJLZ+3SZlk4Y7P/mEus5i/ISR/MXOpHXJyEqeSCrzgUAqKOs+KWiS4PVSGW5xw7oP0QkYDToCpsq4NZ+gdceRKH+BBmxyzVvt4I1hM3f5lmths/nqkzSC4FiMNbL6AYs/q02GllEA7mQhE5kUQwjnNc9DcK/wq1UM5tlhs48krz5PrbI+AwN7foHPtI97Z1UnCShK4EkJ0suLvm5AFZVd6grfd0TXKdh9rFDr9l++dT/74L/JwLRwDT4rFAs1tYeGMEmREnCBxRicz9sbOs36Z8KVugrpeSXYgnuMV4mWzVGHUHMIRDVLYeY9Uic/k+zoLk2qcu8UqyZS+VNB8599EOvd00m5O/DMEMKI0jnMQLZ1Q4+3Ma7h1Le8YwUnNgORji+8lvD81EitRyTcMS6htibZf+TLls94LwuboHrvo5Wrm9J1fUlCgoU8Oqe6F7Dm5s4P9L2GKy8Bjkg6CRP9oj2CcdM5o+u3fzMEkQHvSJrRY3f68RFjS8u7FCm+DqyXqBQh5AqPFF0uVidcmOWEI0tC35eOSsm+Qv1iIXtUOmsxXlxfKPXwcSVE+9YrTsLBXjzn29nYW3AZizKiKSI7DUn5VYUX0RbEZyBIACgY4Zewetgky8ARMgAIBoi+0l35qttEfZnCU4yVmj4hdeFANtfyKYFKYIm+uWVskhJWtk02a6ZpWFMzHz7rUt60Lcdc29/dtRsaOvtRGIkiGLeFYGRiLGbfVg8ZIvRu4m+7eQ36Uf+J/r0i2MtZEEOB/iq1bZRCh7COW5kKqjO7rjKz+NzZ7au6sd135GijKTGAuuWONMenbk0/nvfLB8WVzpNpo6qYRa8AOWeChAc1Xi69vOJ5MRdX1AADUygzAZcy5Z6fz/7Sr2upia1m+lMrM1WzYrVOUyy7O+AihP///JoRFdWwbIopJix/2G0sDtb5LuP3HYMzZmkku46+BYohl9kIMdU9n8MN1yrV/7TR6/8534tdC+6V1fszi7vy6wIZHviwcZp5DI51+GXWa4aTNhDYFomrNTxVA2IWlZKXiMCKpbXLwak3vpRNcohzl3kJ7rEvii3+kfwktRArtgPVkqsqvYuZa9cM1S+wEg5t0B+oH7mSUykU1ALMsCd+sHX5NUpX5GnW5klDpqysJf1CwkAXrqUSN/f0uqqyCUqigIX+IcfZOW+eyfYgeeOhAyqa7oks2OXqja6+m+eV0Zq4g7oRscVBWlIAOLP6FzgN4zDq5DV8aIgqAjdBx+tGaAo6S/rt/fc+q1DErM1dGDaEb71dED9w79Fj0rSIYQ2FSjgsQ9xtGEIaFT37E2UjuqHnzssKE91aJAuWTouVvAIUo0xNwloW4YbXQc//8cKXadyKgC5wrrg6xRYm3SrrP8wFz6YHUapxSd0xKf73moLMwuOSNIk3SfyWbXvbacdZfCN5+5idrDJXar5m7Mrg0bGxTySq0C+2yBcA=",N$e=""+new URL("4-C56Hdvn7.avif",import.meta.url).href,j$e=""+new URL("5-DCd5AKeS.avif",import.meta.url).href,V$e=[{prefix:" Trusted by Industry Leaders.",word:"",suffix:"",logos:[z$e,F$e,B$e,N$e,j$e]}],U$e=()=>{const[e,t]=q.useState(0),[n,r]=q.useState(!0),{prefix:s,word:c,suffix:h,logos:i}=V$e[e];return $.jsxs("div",{className:"company-group",children:[$.jsxs("h2",{className:"company-group__heading",children:[s,$.jsx("span",{className:`highlight animated-word ${n?"in":"out"}`,children:c}),h]}),$.jsx("div",{className:"company-group__logos",children:i.map((g,w)=>$.jsx("img",{src:g,alt:`Logo ${w+1}`,className:"company-group__logo",style:{animationDelay:`${w*.05}s`}},g))})]})},lre=""+new URL("hero-KKkz536v.mp4",import.meta.url).href,$$e=()=>{const[e,t]=q.useState({opacity:1,transform:"scale(1)"});return q.useEffect(()=>{const n=()=>{const r=window.scrollY,s=300,c=Math.max(1-r/s,0),h=Math.max(1-r/(s*2),.85);t({opacity:c,transform:`scale(${h})`})};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),$.jsxs("section",{className:"hero",children:[$.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0},children:[$.jsx("source",{src:lre,type:"video/mp4"}),"Your browser does not support the video tag."]}),$.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:0}}),$.jsx("div",{className:"hero__overlay",children:$.jsxs("div",{className:"hero__left",style:{...e},children:[$.jsx("h1",{className:"hero__title",children:"Every corner of your site always in sight"}),$.jsx("h2",{className:"hero__running",children:"See Everything. Control What Matters."}),$.jsx("p",{className:"hero__description",children:"InfraX transforms how you manage your sitescombining real-time progress tracking, quality control, and safety oversight in one place."})]})})]})},q$e=""+new URL("1-Dno5NRNN.jpg",import.meta.url).href,H$e=""+new URL("2-J640JdC3.jpg",import.meta.url).href,G$e=""+new URL("3-DvkoTwvw.jpg",import.meta.url).href,U7=""+new URL("4-CWXh9BDz.jpg",import.meta.url).href,W$e=[{id:1,text:"Construction & Infrastructure ",image:q$e},{id:2,text:"Energy, Utilities & Industrial ",image:H$e},{id:3,text:"Heritage & Conservation",image:G$e},{id:4,text:"Agriculture & Forest",image:U7},{id:5,text:"Surveying & land development",image:U7}],Y$e=()=>$.jsx("div",{className:"feature-section",children:$.jsxs("div",{className:"content",children:[$.jsx("h2",{className:"section-heading",children:"Explore the Industries embracing the innovation."}),$.jsx("div",{className:"boxes",children:W$e.map(({id:e,text:t,image:n})=>$.jsx("div",{className:"box",style:{backgroundImage:`url(${n})`},children:$.jsx("span",{className:"box-text",children:t})},e))})]})}),qS="generated",X$e="pointerdown",Z$e="pointerup",RB="pointerleave",K$e="pointerout",I0="pointermove",Q$e="touchstart",$7="touchend",J$e="touchmove",e6e="touchcancel",t6e="resize",n6e="visibilitychange",ph="tsParticles - Error";class Ju{constructor(t,n,r){if(this._updateFromAngle=(s,c)=>{this.x=Math.cos(s)*c,this.y=Math.sin(s)*c},!Ef(t)&&t){this.x=t.x,this.y=t.y;const s=t;this.z=s.z?s.z:0}else if(t!==void 0&&n!==void 0)this.x=t,this.y=n,this.z=r??0;else throw new Error(`${ph} Vector3d not initialized correctly`)}static get origin(){return Ju.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return Ju.create(t.x,t.y,t.z)}static create(t,n,r){return new Ju(t,n,r)}add(t){return Ju.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return Ju.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return Ju.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**2+this.y**2}mult(t){return Ju.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(1/t)}rotate(t){return Ju.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),0)}setTo(t){this.x=t.x,this.y=t.y;const n=t;this.z=n.z?n.z:0}sub(t){return Ju.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class _l extends Ju{constructor(t,n){super(t,n,0)}static get origin(){return _l.create(0,0)}static clone(t){return _l.create(t.x,t.y)}static create(t,n){return new _l(t,n)}}let r6e=Math.random;const DB=new Map;function x3(e,t){DB.get(e)||DB.set(e,t)}function cre(e){return DB.get(e)||(t=>t)}function Ss(){return Rf(r6e(),0,1-1e-16)}function Rf(e,t,n){return Math.min(Math.max(e,t),n)}function b3(e,t,n,r){return Math.floor((e*n+t*r)/(n+r))}function hu(e){const t=qy(e);let n=H5(e);return t===n&&(n=0),Ss()*(t-n)+n}function xi(e){return Ef(e)?e:hu(e)}function H5(e){return Ef(e)?e:e.min}function qy(e){return Ef(e)?e:e.max}function ro(e,t){if(e===t||t===void 0&&Ef(e))return e;const n=H5(e),r=qy(e);return t!==void 0?{min:Math.min(n,t),max:Math.max(r,t)}:ro(n,r)}function k0(e){const t=e.random,{enable:n,minimumValue:r}=Hy(t)?{enable:t,minimumValue:0}:t;return xi(n?ro(e.value,r):e.value)}function Wc(e,t){const n=e.x-t.x,r=e.y-t.y;return{dx:n,dy:r,distance:Math.sqrt(n**2+r**2)}}function od(e,t){return Wc(e,t).distance}function i6e(e,t,n){if(Ef(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-t.y,n.x-t.x);case"outside":return Math.atan2(t.y-n.y,t.x-n.x);default:return Ss()*Math.PI*2}}function o6e(e){const t=_l.origin;return t.length=1,t.angle=e,t}function q7(e,t,n,r){return _l.create(e.x*(n-r)/(n+r)+t.x*2*r/(n+r),e.y)}function s6e(e){var t,n;return{x:((t=e.position)==null?void 0:t.x)??Ss()*e.size.width,y:((n=e.position)==null?void 0:n.y)??Ss()*e.size.height}}function ure(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}const a6e={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function O0(){return a6e}function H7(e){const t={bounced:!1},{pSide:n,pOtherSide:r,rectSide:s,rectOtherSide:c,velocity:h,factor:i}=e;return r.min<c.min||r.min>c.max||r.max<c.min||r.max>c.max||(n.max>=s.min&&n.max<=(s.max+s.min)/2&&h>0||n.min<=s.max&&n.min>(s.max+s.min)/2&&h<0)&&(t.velocity=h*-i,t.bounced=!0),t}function l6e(e,t){const n=xl(t,r=>e.matches(r));return sd(n)?n.some(r=>r):n}function i1(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function c6e(){return!i1()&&typeof matchMedia<"u"}function dre(e){if(c6e())return matchMedia(e)}function u6e(e){if(!(i1()||typeof MutationObserver>"u"))return new MutationObserver(e)}function ma(e,t){return e===t||sd(t)&&t.indexOf(e)>-1}async function d6e(e,t){try{await document.fonts.load(`${t??"400"} 36px '${e??"Verdana"}'`)}catch{}}function h6e(e){return Math.floor(Ss()*e.length)}function QD(e,t,n=!0){return e[t!==void 0&&n?t%e.length:h6e(e)]}function G5(e,t,n,r,s){return f6e(EE(e,r??0),t,n,s)}function f6e(e,t,n,r){let s=!0;return(!r||r==="bottom")&&(s=e.top<t.height+n.x),s&&(!r||r==="left")&&(s=e.right>n.x),s&&(!r||r==="right")&&(s=e.left<t.width+n.y),s&&(!r||r==="top")&&(s=e.bottom>n.y),s}function EE(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function gc(e,...t){for(const n of t){if(n==null)continue;if(!Rb(n)){e=n;continue}const r=Array.isArray(n);r&&(Rb(e)||!e||!Array.isArray(e))?e=[]:!r&&(Rb(e)||!e||Array.isArray(e))&&(e={});for(const s in n){if(s==="__proto__")continue;const c=n,h=c[s],i=e;i[s]=Rb(h)&&Array.isArray(h)?h.map(g=>gc(i[s],g)):gc(i[s],h)}}return e}function W5(e,t){return!!pre(t,n=>n.enable&&ma(e,n.mode))}function Y5(e,t,n){xl(t,r=>{const s=r.mode;r.enable&&ma(e,s)&&p6e(r,n)})}function p6e(e,t){const n=e.selectors;xl(n,r=>{t(r,e)})}function hre(e,t){if(!(!t||!e))return pre(e,n=>l6e(t,n.selectors))}function PB(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:_l.create(k0(e.options.bounce.horizontal),k0(e.options.bounce.vertical))}}function fre(e,t){const{x:n,y:r}=e.velocity.sub(t.velocity),[s,c]=[e.position,t.position],{dx:h,dy:i}=Wc(c,s);if(n*h+r*i<0)return;const g=-Math.atan2(i,h),w=e.mass,T=t.mass,A=e.velocity.rotate(g),D=t.velocity.rotate(g),k=q7(A,D,w,T),I=q7(D,A,w,T),F=k.rotate(-g),j=I.rotate(-g);e.velocity.x=F.x*e.factor.x,e.velocity.y=F.y*e.factor.y,t.velocity.x=j.x*t.factor.x,t.velocity.y=j.y*t.factor.y}function m6e(e,t){const n=e.getPosition(),r=e.getRadius(),s=EE(n,r),c=H7({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:k0(e.options.bounce.horizontal)});c.bounced&&(c.velocity!==void 0&&(e.velocity.x=c.velocity),c.position!==void 0&&(e.position.x=c.position));const h=H7({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:k0(e.options.bounce.vertical)});h.bounced&&(h.velocity!==void 0&&(e.velocity.y=h.velocity),h.position!==void 0&&(e.position.y=h.position))}function xl(e,t){return sd(e)?e.map((n,r)=>t(n,r)):t(e,0)}function Ag(e,t,n){return sd(e)?QD(e,t,n):e}function pre(e,t){return sd(e)?e.find((n,r)=>t(n,r)):t(e,0)?e:void 0}function mre(e,t){const n=e.value,r=e.animation,s={delayTime:xi(r.delay)*1e3,enable:r.enable,value:xi(e.value)*t,max:qy(n)*t,min:H5(n)*t,loops:0,maxLoops:xi(r.count),time:0};if(r.enable){switch(s.decay=1-xi(r.decay),r.mode){case"increase":s.status="increasing";break;case"decrease":s.status="decreasing";break;case"random":s.status=Ss()>=.5?"increasing":"decreasing";break}const c=r.mode==="auto";switch(r.startValue){case"min":s.value=s.min,c&&(s.status="increasing");break;case"max":s.value=s.max,c&&(s.status="decreasing");break;case"random":default:s.value=hu(s),c&&(s.status=Ss()>=.5?"increasing":"decreasing");break}}return s.initialValue=s.value,s}function g6e(e,t){if(!(e.mode==="percent")){const{mode:s,...c}=e;return c}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function gre(e,t){return g6e(e,t)}function Hy(e){return typeof e=="boolean"}function Tf(e){return typeof e=="string"}function Ef(e){return typeof e=="number"}function yre(e){return typeof e=="function"}function Rb(e){return typeof e=="object"&&e!==null}function sd(e){return Array.isArray(e)}const SR="random",bM="mid",JD=new Map;function G7(e){JD.set(e.key,e)}function w3(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function y6e(e){for(const[,c]of JD)if(e.startsWith(c.stringPrefix))return c.parseString(e);const t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,n=e.replace(t,(c,h,i,g,w)=>h+h+i+i+g+g+(w!==void 0?w+w:"")),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=r.exec(n);return s?{a:s[4]!==void 0?parseInt(s[4],16)/255:1,b:parseInt(s[3],16),g:parseInt(s[2],16),r:parseInt(s[1],16)}:void 0}function Cf(e,t,n=!0){if(!e)return;const r=Tf(e)?{value:e}:e;if(Tf(r.value))return vre(r.value,t,n);if(sd(r.value))return Cf({value:QD(r.value,t,n)});for(const[,s]of JD){const c=s.handleRangeColor(r);if(c)return c}}function vre(e,t,n=!0){if(!e)return;const r=Tf(e)?{value:e}:e;if(Tf(r.value))return r.value===SR?xre():v6e(r.value);if(sd(r.value))return vre({value:QD(r.value,t,n)});for(const[,s]of JD){const c=s.handleColor(r);if(c)return c}}function OT(e,t,n=!0){const r=Cf(e,t,n);return r?_re(r):void 0}function _re(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),c=Math.min(t,n,r),h={h:0,l:(s+c)/2,s:0};return s!==c&&(h.s=h.l<.5?(s-c)/(s+c):(s-c)/(2-s-c),h.h=t===s?(n-r)/(s-c):h.h=n===s?2+(r-t)/(s-c):4+(t-n)/(s-c)),h.l*=100,h.s*=100,h.h*=60,h.h<0&&(h.h+=360),h.h>=360&&(h.h-=360),h}function v6e(e){return y6e(e)}function o1(e){const t={b:0,g:0,r:0},n={h:e.h/360,l:e.l/100,s:e.s/100};if(!n.s)t.r=t.g=t.b=n.l;else{const r=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,s=2*n.l-r;t.r=w3(s,r,n.h+1/3),t.g=w3(s,r,n.h),t.b=w3(s,r,n.h-1/3)}return t.r=Math.floor(t.r*255),t.g=Math.floor(t.g*255),t.b=Math.floor(t.b*255),t}function _6e(e){const t=o1(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}function xre(e){return{b:Math.floor(hu(ro(0,256))),g:Math.floor(hu(ro(0,256))),r:Math.floor(hu(ro(0,256)))}}function Mg(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t??1})`}function LT(e,t){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${t??1})`}function X5(e,t,n,r){let s=e,c=t;return s.r===void 0&&(s=o1(e)),c.r===void 0&&(c=o1(t)),{b:b3(s.b,c.b,n,r),g:b3(s.g,c.g,n,r),r:b3(s.r,c.r,n,r)}}function IB(e,t,n){if(n===SR)return xre();if(n===bM){const r=e.getFillColor()??e.getStrokeColor(),s=(t==null?void 0:t.getFillColor())??(t==null?void 0:t.getStrokeColor());if(r&&s&&t)return X5(r,s,e.getRadius(),t.getRadius());{const c=r??s;if(c)return o1(c)}}else return n}function bre(e,t,n){const r=Tf(e)?e:e.value;return r===SR?n?Cf({value:r}):t?SR:bM:r===bM?bM:Cf({value:r})}function W7(e){return e!==void 0?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function wre(e,t,n){const r={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(S3(r.h,t.h,n),S3(r.s,t.s,n),S3(r.l,t.l,n)),r}function S3(e,t,n){e.enable=t.enable,e.enable?(e.velocity=xi(t.speed)/100*n,e.decay=1-xi(t.decay),e.status="increasing",e.loops=0,e.maxLoops=xi(t.count),e.time=0,e.delayTime=xi(t.delay)*1e3,t.sync||(e.velocity*=Ss(),e.value*=Ss()),e.initialValue=e.value):e.velocity=0}function HS(e,t,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath()}function x6e(e,t,n,r){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.lineTo(r.x,r.y),e.closePath()}function b6e(e,t,n){e.fillStyle=n??"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}function w6e(e,t,n,r){n&&(e.globalAlpha=r,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1)}function T3(e,t){e.clearRect(0,0,t.width,t.height)}function S6e(e){const{container:t,context:n,particle:r,delta:s,colorStyles:c,backgroundMask:h,composite:i,radius:g,opacity:w,shadow:T,transform:A}=e,D=r.getPosition(),k=r.rotation+(r.pathRotation?r.velocity.angle:0),I={sin:Math.sin(k),cos:Math.cos(k)},F={a:I.cos*(A.a??1),b:I.sin*(A.b??1),c:-I.sin*(A.c??1),d:I.cos*(A.d??1)};n.setTransform(F.a,F.b,F.c,F.d,D.x,D.y),n.beginPath(),h&&(n.globalCompositeOperation=i);const j=r.shadowColor;T.enable&&j&&(n.shadowBlur=T.blur,n.shadowColor=Mg(j),n.shadowOffsetX=T.offset.x,n.shadowOffsetY=T.offset.y),c.fill&&(n.fillStyle=c.fill);const V=r.strokeWidth??0;n.lineWidth=V,c.stroke&&(n.strokeStyle=c.stroke),T6e(t,n,r,g,w,s),V>0&&n.stroke(),r.close&&n.closePath(),r.fill&&n.fill(),E6e(t,n,r,g,w,s),n.globalCompositeOperation="source-over",n.setTransform(1,0,0,1,0,0)}function T6e(e,t,n,r,s,c){if(!n.shape)return;const h=e.drawers.get(n.shape);h&&h.draw(t,n,r,s,c,e.retina.pixelRatio)}function E6e(e,t,n,r,s,c){if(!n.shape)return;const h=e.drawers.get(n.shape);!h||!h.afterEffect||h.afterEffect(t,n,r,s,c,e.retina.pixelRatio)}function C6e(e,t,n){t.draw&&t.draw(e,n)}function A6e(e,t,n,r){t.drawParticle&&t.drawParticle(e,n,r)}function M6e(e,t,n){return{h:e.h,s:e.s,l:e.l+(t==="darken"?-1:1)*n}}function R6e(e,t,n){const r=t[n];r!==void 0&&(e[n]=(e[n]??1)*r)}class D6e{constructor(t){this.container=t,this._applyPostDrawUpdaters=n=>{for(const r of this._postDrawUpdaters)r.afterDraw&&r.afterDraw(n)},this._applyPreDrawUpdaters=(n,r,s,c,h,i)=>{for(const g of this._preDrawUpdaters){if(g.getColorStyles){const{fill:w,stroke:T}=g.getColorStyles(r,n,s,c);w&&(h.fill=w),T&&(h.stroke=T)}if(g.getTransformValues){const w=g.getTransformValues(r);for(const T in w)R6e(i,w,T)}g.beforeDraw&&g.beforeDraw(r)}},this._applyResizePlugins=()=>{for(const n of this._resizePlugins)n.resize&&n.resize()},this._getPluginParticleColors=n=>{let r,s;for(const c of this._colorPlugins)if(!r&&c.particleFillColor&&(r=OT(c.particleFillColor(n))),!s&&c.particleStrokeColor&&(s=OT(c.particleStrokeColor(n))),r&&s)break;return[r,s]},this._initCover=()=>{const n=this.container.actualOptions,r=n.backgroundMask.cover,s=r.color,c=Cf(s);if(c){const h={...c,a:r.opacity};this._coverColorStyle=Mg(h,h.a)}},this._initStyle=()=>{const n=this.element,r=this.container.actualOptions;if(n){this._fullScreen?(this._originalStyle=gc({},n.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in r.style){if(!s||!r.style)continue;const c=r.style[s];c&&n.style.setProperty(s,c,"important")}}},this._initTrail=async()=>{const n=this.container.actualOptions,r=n.particles.move.trail,s=r.fill;if(r.enable)if(s.color){const c=Cf(s.color);if(!c)return;const h=n.particles.move.trail;this._trailFill={color:{...c},opacity:1/h.length}}else await new Promise((c,h)=>{if(!s.image)return;const i=document.createElement("img");i.addEventListener("load",()=>{this._trailFill={image:i,opacity:1/r.length},c()}),i.addEventListener("error",g=>{h(g.error)}),i.src=s.image})},this._paintBase=n=>{this.draw(r=>b6e(r,this.size,n))},this._paintImage=(n,r)=>{this.draw(s=>w6e(s,this.size,n,r))},this._repairStyle=()=>{const n=this.element;n&&(this._safeMutationObserver(r=>r.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(r=>r.observe(n,{attributes:!0})))},this._resetOriginalStyle=()=>{const n=this.element,r=this._originalStyle;if(!(n&&r))return;const s=n.style;s.position=r.position,s.zIndex=r.zIndex,s.top=r.top,s.left=r.left,s.width=r.width,s.height=r.height},this._safeMutationObserver=n=>{this._mutationObserver&&n(this._mutationObserver)},this._setFullScreenStyle=()=>{const n=this.element;if(!n)return;const r="important",s=n.style;s.setProperty("position","fixed",r),s.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),r),s.setProperty("top","0",r),s.setProperty("left","0",r),s.setProperty("width","100%",r),s.setProperty("height","100%",r)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const t=this.container.actualOptions,n=t.particles.move.trail,r=this._trailFill;t.backgroundMask.enable?this.paint():n.enable&&n.length>0&&r?r.color?this._paintBase(Mg(r.color,r.opacity)):r.image&&this._paintImage(r.image,r.opacity):this.draw(s=>{T3(s,this.size)})}destroy(){if(this.stop(),this._generated){const t=this.element;t&&t.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(t){const n=this._context;if(n)return t(n)}drawParticle(t,n){if(t.spawning||t.destroyed)return;const r=t.getRadius();if(r<=0)return;const s=t.getFillColor(),c=t.getStrokeColor()??s;let[h,i]=this._getPluginParticleColors(t);h||(h=s),i||(i=c),!(!h&&!i)&&this.draw(g=>{var Z;const w=this.container,T=w.actualOptions,A=t.options.zIndex,D=(1-t.zIndexFactor)**A.opacityRate,k=t.bubble.opacity??((Z=t.opacity)==null?void 0:Z.value)??1,I=t.strokeOpacity??k,F=k*D,j=I*D,V={},W={fill:h?LT(h,F):void 0};W.stroke=i?LT(i,j):W.fill,this._applyPreDrawUpdaters(g,t,r,F,W,V),S6e({container:w,context:g,particle:t,delta:n,colorStyles:W,backgroundMask:T.backgroundMask.enable,composite:T.backgroundMask.composite,radius:r*(1-t.zIndexFactor)**A.sizeRate,opacity:F,shadow:t.options.shadow,transform:V}),this._applyPostDrawUpdaters(t)})}drawParticlePlugin(t,n,r){this.draw(s=>A6e(s,t,n,r))}drawPlugin(t,n){this.draw(r=>C6e(r,t,n))}async init(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=u6e(t=>{for(const n of t)n.type==="attributes"&&n.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(t){O0().error(t)}this.initBackground(),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const t=this.container.actualOptions,n=t.background,r=this.element;if(!r)return;const s=r.style;if(s){if(n.color){const c=Cf(n.color);s.backgroundColor=c?Mg(c,n.opacity):""}else s.backgroundColor="";s.backgroundImage=n.image||"",s.backgroundPosition=n.position||"",s.backgroundRepeat=n.repeat||"",s.backgroundSize=n.size||""}}initPlugins(){this._resizePlugins=[];for(const[,t]of this.container.plugins)t.resize&&this._resizePlugins.push(t),(t.particleFillColor||t.particleStrokeColor)&&this._colorPlugins.push(t)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const t of this.container.particles.updaters)t.afterDraw&&this._postDrawUpdaters.push(t),(t.getColorStyles||t.getTransformValues||t.beforeDraw)&&this._preDrawUpdaters.push(t)}loadCanvas(t){this._generated&&this.element&&this.element.remove(),this._generated=t.dataset&&qS in t.dataset?t.dataset[qS]==="true":this._generated,this.element=t,this.element.ariaHidden="true",this._originalStyle=gc({},this.element.style),this.size.height=t.offsetHeight,this.size.width=t.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(n=>{this.element&&n.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const t=this.container.actualOptions;this.draw(n=>{t.backgroundMask.enable&&t.backgroundMask.cover?(T3(n,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const t=this.container,n=t.retina.pixelRatio,r=t.canvas.size,s={width:this.element.offsetWidth*n,height:this.element.offsetHeight*n};if(s.height===r.height&&s.width===r.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const c={...r};return this.element.width=r.width=this.element.offsetWidth*n,this.element.height=r.height=this.element.offsetHeight*n,this.container.started&&(this.resizeFactor={width:r.width/c.width,height:r.height/c.height}),!0}stop(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=void 0,this.draw(t=>T3(t,this.size))}async windowResize(){if(!this.element||!this.resize())return;const t=this.container,n=t.updateActualOptions();t.particles.setDensity(),this._applyResizePlugins(),n&&await t.refresh()}}function Qd(e,t,n,r,s){if(r){let c={passive:!0};Hy(s)?c.capture=s:s!==void 0&&(c=s),e.addEventListener(t,n,c)}else{const c=s;e.removeEventListener(t,n,c)}}class P6e{constructor(t){this.container=t,this._doMouseTouchClick=n=>{const r=this.container,s=r.actualOptions;if(this._canPush){const c=r.interactivity.mouse,h=c.position;if(!h)return;c.clickPosition={...h},c.clickTime=new Date().getTime();const i=s.interactivity.events.onClick;xl(i.mode,g=>this.container.handleClickMode(g))}n.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=n=>{const r=n,s=this.container,c=s.options,h=c.defaultThemes,i=r.matches?h.dark:h.light,g=c.themes.find(w=>w.name===i);g&&g.default.auto&&s.loadTheme(i)},this._handleVisibilityChange=()=>{const n=this.container,r=n.actualOptions;this._mouseTouchFinish(),r.pauseOnBlur&&(document&&document.hidden?(n.pageHidden=!0,n.pause()):(n.pageHidden=!1,n.getAnimationStatus()?n.play(!0):n.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const n=this.container.canvas;n&&await n.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(n,r)=>{const s=this._handlers,c=this.container,h=c.actualOptions,i=c.interactivity.element;if(!i)return;const g=i,w=c.canvas.element;w&&(w.style.pointerEvents=g===w?"initial":"none"),(h.interactivity.events.onHover.enable||h.interactivity.events.onClick.enable)&&(Qd(i,I0,s.mouseMove,r),Qd(i,Q$e,s.touchStart,r),Qd(i,J$e,s.touchMove,r),h.interactivity.events.onClick.enable?(Qd(i,$7,s.touchEndClick,r),Qd(i,Z$e,s.mouseUp,r),Qd(i,X$e,s.mouseDown,r)):Qd(i,$7,s.touchEnd,r),Qd(i,n,s.mouseLeave,r),Qd(i,e6e,s.touchCancel,r))},this._manageListeners=n=>{const r=this._handlers,s=this.container,c=s.actualOptions,h=c.interactivity.detectsOn,i=s.canvas.element;let g=RB;h==="window"?(s.interactivity.element=window,g=K$e):h==="parent"&&i?s.interactivity.element=i.parentElement??i.parentNode:s.interactivity.element=i,this._manageMediaMatch(n),this._manageResize(n),this._manageInteractivityListeners(g,n),document&&Qd(document,n6e,r.visibilityChange,n,!1)},this._manageMediaMatch=n=>{const r=this._handlers,s=dre("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){Qd(s,"change",r.themeChange,n);return}s.addListener!==void 0&&(n?s.addListener(r.oldThemeChange):s.removeListener(r.oldThemeChange))}},this._manageResize=n=>{const r=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){Qd(window,t6e,r.resize,n);return}const h=s.canvas.element;this._resizeObserver&&!n?(h&&this._resizeObserver.unobserve(h),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&n&&h&&(this._resizeObserver=new ResizeObserver(async i=>{i.find(w=>w.target===h)&&await this._handleWindowResize()}),this._resizeObserver.observe(h))},this._mouseDown=()=>{const{interactivity:n}=this.container;if(!n)return;const{mouse:r}=n;r.clicking=!0,r.downPosition=r.position},this._mouseTouchClick=n=>{const r=this.container,s=r.actualOptions,{mouse:c}=r.interactivity;c.inside=!0;let h=!1;const i=c.position;if(!(!i||!s.interactivity.events.onClick.enable)){for(const[,g]of r.plugins)if(g.clickPositionValid&&(h=g.clickPositionValid(i),h))break;h||this._doMouseTouchClick(n),c.clicking=!1}},this._mouseTouchFinish=()=>{const n=this.container.interactivity;if(!n)return;const r=n.mouse;delete r.position,delete r.clickPosition,delete r.downPosition,n.status=RB,r.inside=!1,r.clicking=!1},this._mouseTouchMove=n=>{const r=this.container,s=r.actualOptions,c=r.interactivity,h=r.canvas.element;if(!c||!c.element)return;c.mouse.inside=!0;let i;if(n.type.startsWith("pointer")){this._canPush=!0;const w=n;if(c.element===window){if(h){const T=h.getBoundingClientRect();i={x:w.clientX-T.left,y:w.clientY-T.top}}}else if(s.interactivity.detectsOn==="parent"){const T=w.target,A=w.currentTarget;if(T&&A&&h){const D=T.getBoundingClientRect(),k=A.getBoundingClientRect(),I=h.getBoundingClientRect();i={x:w.offsetX+2*D.left-(k.left+I.left),y:w.offsetY+2*D.top-(k.top+I.top)}}else i={x:w.offsetX??w.clientX,y:w.offsetY??w.clientY}}else w.target===h&&(i={x:w.offsetX??w.clientX,y:w.offsetY??w.clientY})}else if(this._canPush=n.type!=="touchmove",h){const w=n,T=w.touches[w.touches.length-1],A=h.getBoundingClientRect();i={x:T.clientX-(A.left??0),y:T.clientY-(A.top??0)}}const g=r.retina.pixelRatio;i&&(i.x*=g,i.y*=g),c.mouse.position=i,c.status=I0},this._touchEnd=n=>{const r=n,s=Array.from(r.changedTouches);for(const c of s)this._touches.delete(c.identifier);this._mouseTouchFinish()},this._touchEndClick=n=>{const r=n,s=Array.from(r.changedTouches);for(const c of s)this._touches.delete(c.identifier);this._mouseTouchClick(n)},this._touchStart=n=>{const r=n,s=Array.from(r.changedTouches);for(const c of s)this._touches.set(c.identifier,performance.now());this._mouseTouchMove(n)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:n=>this._mouseTouchMove(n),mouseUp:n=>this._mouseTouchClick(n),touchStart:n=>this._touchStart(n),touchMove:n=>this._mouseTouchMove(n),touchEnd:n=>this._touchEnd(n),touchCancel:n=>this._touchEnd(n),touchEndClick:n=>this._touchEndClick(n),visibilityChange:()=>this._handleVisibilityChange(),themeChange:n=>this._handleThemeChange(n),oldThemeChange:n=>this._handleThemeChange(n),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class Nl{constructor(){this.value=""}static create(t,n){const r=new Nl;return r.load(t),n!==void 0&&(Tf(n)||sd(n)?r.load({value:n}):r.load(n)),r}load(t){(t==null?void 0:t.value)!==void 0&&(this.value=t.value)}}class I6e{constructor(){this.color=new Nl,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=Nl.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.position!==void 0&&(this.position=t.position),t.repeat!==void 0&&(this.repeat=t.repeat),t.size!==void 0&&(this.size=t.size),t.opacity!==void 0&&(this.opacity=t.opacity))}}class k6e{constructor(){this.color=new Nl,this.color.value="#fff",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=Nl.create(this.color,t.color)),t.opacity!==void 0&&(this.opacity=t.opacity))}}class O6e{constructor(){this.composite="destination-out",this.cover=new k6e,this.enable=!1}load(t){if(t){if(t.composite!==void 0&&(this.composite=t.composite),t.cover!==void 0){const n=t.cover,r=Tf(t.cover)?{color:t.cover}:t.cover;this.cover.load(n.color!==void 0?n:{color:r})}t.enable!==void 0&&(this.enable=t.enable)}}}class L6e{constructor(){this.enable=!0,this.zIndex=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.zIndex!==void 0&&(this.zIndex=t.zIndex))}}class z6e{constructor(){this.enable=!1,this.mode=[]}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode))}}class Y7{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(t){this.elementId=t}get elementId(){return this.ids}set elementId(t){this.ids=t}get ids(){return xl(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=xl(t,n=>`#${n}`)}load(t){if(!t)return;const n=t.ids??t.elementId??t.el;n!==void 0&&(this.ids=n),t.selectors!==void 0&&(this.selectors=t.selectors),t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),t.type!==void 0&&(this.type=t.type)}}class F6e{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.force!==void 0&&(this.force=t.force),t.smooth!==void 0&&(this.smooth=t.smooth))}}class B6e{constructor(){this.enable=!1,this.mode=[],this.parallax=new F6e}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),this.parallax.load(t.parallax))}}class N6e{constructor(){this.delay=.5,this.enable=!0}load(t){t!==void 0&&(t.delay!==void 0&&(this.delay=t.delay),t.enable!==void 0&&(this.enable=t.enable))}}class j6e{constructor(){this.onClick=new z6e,this.onDiv=new Y7,this.onHover=new B6e,this.resize=new N6e}get onclick(){return this.onClick}set onclick(t){this.onClick=t}get ondiv(){return this.onDiv}set ondiv(t){this.onDiv=t}get onhover(){return this.onHover}set onhover(t){this.onHover=t}load(t){if(!t)return;this.onClick.load(t.onClick??t.onclick);const n=t.onDiv??t.ondiv;n!==void 0&&(this.onDiv=xl(n,r=>{const s=new Y7;return s.load(r),s})),this.onHover.load(t.onHover??t.onhover),Hy(t.resize)?this.resize.enable=t.resize:this.resize.load(t.resize)}}class V6e{constructor(t,n){this._engine=t,this._container=n}load(t){if(!t||!this._container)return;const n=this._engine.plugins.interactors.get(this._container);if(n)for(const r of n)r.loadModeOptions&&r.loadModeOptions(this,t)}}class Sre{constructor(t,n){this.detectsOn="window",this.events=new j6e,this.modes=new V6e(t,n)}get detect_on(){return this.detectsOn}set detect_on(t){this.detectsOn=t}load(t){if(!t)return;const n=t.detectsOn??t.detect_on;n!==void 0&&(this.detectsOn=n),this.events.load(t.events),this.modes.load(t.modes)}}class U6e{load(t){t&&(t.position&&(this.position={x:t.position.x??50,y:t.position.y??50,mode:t.position.mode??"percent"}),t.options&&(this.options=gc({},t.options)))}}class $6e{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(t){t&&(t.maxWidth!==void 0&&(this.maxWidth=t.maxWidth),t.mode!==void 0&&(t.mode==="screen"?this.mode="screen":this.mode="canvas"),t.options!==void 0&&(this.options=gc({},t.options)))}}class q6e{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(t){t&&(t.auto!==void 0&&(this.auto=t.auto),t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class H6e{constructor(){this.name="",this.default=new q6e}load(t){t&&(t.name!==void 0&&(this.name=t.name),this.default.load(t.default),t.options!==void 0&&(this.options=gc({},t.options)))}}class E3{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(t){t&&(t.count!==void 0&&(this.count=ro(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(this.offset=ro(t.offset)),t.speed!==void 0&&(this.speed=ro(t.speed)),t.decay!==void 0&&(this.decay=ro(t.decay)),t.delay!==void 0&&(this.delay=ro(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class G6e{constructor(){this.h=new E3,this.s=new E3,this.l=new E3}load(t){t&&(this.h.load(t.h),this.s.load(t.s),this.l.load(t.l))}}class zT extends Nl{constructor(){super(),this.animation=new G6e}static create(t,n){const r=new zT;return r.load(t),n!==void 0&&(Tf(n)||sd(n)?r.load({value:n}):r.load(n)),r}load(t){if(super.load(t),!t)return;const n=t.animation;n!==void 0&&(n.enable!==void 0?this.animation.h.load(n):this.animation.load(t.animation))}}class W6e{constructor(){this.speed=2}load(t){t&&t.speed!==void 0&&(this.speed=t.speed)}}class Y6e{constructor(){this.enable=!0,this.retries=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.retries!==void 0&&(this.retries=t.retries))}}class X6e{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(t){t&&(t.count!==void 0&&(this.count=ro(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=ro(t.speed)),t.decay!==void 0&&(this.decay=ro(t.decay)),t.delay!==void 0&&(this.delay=ro(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class Tre extends X6e{constructor(){super(),this.mode="auto",this.startValue="random"}load(t){super.load(t),t&&(t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue),t.mode!==void 0&&(this.mode=t.mode),t.startValue!==void 0&&(this.startValue=t.startValue))}}class Z6e{constructor(){this.enable=!1,this.minimumValue=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue))}}class bv{constructor(){this.random=new Z6e,this.value=0}load(t){t&&(Hy(t.random)?this.random.enable=t.random:this.random.load(t.random),t.value!==void 0&&(this.value=ro(t.value,this.random.enable?this.random.minimumValue:void 0)))}}class X7 extends bv{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class Ere{constructor(){this.horizontal=new X7,this.vertical=new X7}load(t){t&&(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}class K6e{constructor(){this.absorb=new W6e,this.bounce=new Ere,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new Y6e}load(t){t&&(this.absorb.load(t.absorb),this.bounce.load(t.bounce),t.enable!==void 0&&(this.enable=t.enable),t.maxSpeed!==void 0&&(this.maxSpeed=ro(t.maxSpeed)),t.mode!==void 0&&(this.mode=t.mode),this.overlap.load(t.overlap))}}class Q6e{constructor(){this.offset=0,this.value=90}load(t){t&&(t.offset!==void 0&&(this.offset=ro(t.offset)),t.value!==void 0&&(this.value=ro(t.value)))}}class J6e{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(t){this.rotate.x=t}get rotateY(){return this.rotate.y}set rotateY(t){this.rotate.y=t}load(t){var s,c;if(!t)return;t.distance!==void 0&&(this.distance=ro(t.distance)),t.enable!==void 0&&(this.enable=t.enable);const n=((s=t.rotate)==null?void 0:s.x)??t.rotateX;n!==void 0&&(this.rotate.x=n);const r=((c=t.rotate)==null?void 0:c.y)??t.rotateY;r!==void 0&&(this.rotate.y=r)}}class eqe{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(t){t&&(t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.mode!==void 0&&(this.mode=t.mode),t.radius!==void 0&&(this.radius=t.radius))}}class tqe{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=ro(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.inverse!==void 0&&(this.inverse=t.inverse),t.maxSpeed!==void 0&&(this.maxSpeed=ro(t.maxSpeed)))}}class nqe{constructor(){this.clamp=!0,this.delay=new bv,this.enable=!1,this.options={}}load(t){t&&(t.clamp!==void 0&&(this.clamp=t.clamp),this.delay.load(t.delay),t.enable!==void 0&&(this.enable=t.enable),this.generator=t.generator,t.options&&(this.options=gc(this.options,t.options)))}}class rqe{load(t){t&&(t.color!==void 0&&(this.color=Nl.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image))}}class iqe{constructor(){this.enable=!1,this.length=10,this.fill=new rqe}get fillColor(){return this.fill.color}set fillColor(t){this.fill.load({color:t})}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),(t.fill!==void 0||t.fillColor!==void 0)&&this.fill.load(t.fill||{color:t.fillColor}),t.length!==void 0&&(this.length=t.length))}}class oqe{constructor(){this.default="out"}load(t){t&&(t.default!==void 0&&(this.default=t.default),this.bottom=t.bottom??t.default,this.left=t.left??t.default,this.right=t.right??t.default,this.top=t.top??t.default)}}class sqe{constructor(){this.acceleration=0,this.enable=!1}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=ro(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.position&&(this.position=gc({},t.position)))}}class aqe{constructor(){this.angle=new Q6e,this.attract=new J6e,this.center=new eqe,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new tqe,this.path=new nqe,this.outModes=new oqe,this.random=!1,this.size=!1,this.speed=2,this.spin=new sqe,this.straight=!1,this.trail=new iqe,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(t){this.collisions=t}get collisions(){return!1}set collisions(t){}get noise(){return this.path}set noise(t){this.path=t}get outMode(){return this.outModes.default}set outMode(t){this.outModes.default=t}get out_mode(){return this.outMode}set out_mode(t){this.outMode=t}load(t){if(!t)return;this.angle.load(Ef(t.angle)?{value:t.angle}:t.angle),this.attract.load(t.attract),this.center.load(t.center),t.decay!==void 0&&(this.decay=ro(t.decay)),t.direction!==void 0&&(this.direction=t.direction),t.distance!==void 0&&(this.distance=Ef(t.distance)?{horizontal:t.distance,vertical:t.distance}:{...t.distance}),t.drift!==void 0&&(this.drift=ro(t.drift)),t.enable!==void 0&&(this.enable=t.enable),this.gravity.load(t.gravity);const n=t.outModes??t.outMode??t.out_mode;n!==void 0&&(Rb(n)?this.outModes.load(n):this.outModes.load({default:n})),this.path.load(t.path??t.noise),t.random!==void 0&&(this.random=t.random),t.size!==void 0&&(this.size=t.size),t.speed!==void 0&&(this.speed=ro(t.speed)),this.spin.load(t.spin),t.straight!==void 0&&(this.straight=t.straight),this.trail.load(t.trail),t.vibrate!==void 0&&(this.vibrate=t.vibrate),t.warp!==void 0&&(this.warp=t.warp)}}class lqe extends Tre{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.opacity_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.opacity_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class cqe extends bv{constructor(){super(),this.animation=new lqe,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(!t)return;super.load(t);const n=t.animation??t.anim;n!==void 0&&(this.animation.load(n),this.value=ro(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class uqe{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(t){this.width=t}get factor(){return this.height}set factor(t){this.height=t}get value_area(){return this.area}set value_area(t){this.area=t}load(t){if(!t)return;t.enable!==void 0&&(this.enable=t.enable);const n=t.width??t.area??t.value_area;n!==void 0&&(this.width=n);const r=t.height??t.factor;r!==void 0&&(this.height=r)}}class dqe{constructor(){this.density=new uqe,this.limit=0,this.value=0}get max(){return this.limit}set max(t){this.limit=t}load(t){if(!t)return;this.density.load(t.density);const n=t.limit??t.max;n!==void 0&&(this.limit=n),t.value!==void 0&&(this.value=t.value)}}class hqe{constructor(){this.blur=0,this.color=new Nl,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=Nl.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(t.offset.x!==void 0&&(this.offset.x=t.offset.x),t.offset.y!==void 0&&(this.offset.y=t.offset.y)))}}const C3="character",A3="char",M3="image",R3="images",D3="polygon",P3="star";class fqe{constructor(){this.loadShape=(t,n,r,s)=>{if(!t)return;const c=sd(t),h=c?[]:{},i=c!==sd(this.options[n]),g=c!==sd(this.options[r]);i&&(this.options[n]=h),g&&s&&(this.options[r]=h),this.options[n]=gc(this.options[n]??h,t),(!this.options[r]||s)&&(this.options[r]=gc(this.options[r]??h,t))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[C3]??this.options[A3]}set character(t){this.options[A3]=this.options[C3]=t}get custom(){return this.options}set custom(t){this.options=t}get image(){return this.options[M3]??this.options[R3]}set image(t){this.options[R3]=this.options[M3]=t}get images(){return this.image}set images(t){this.image=t}get polygon(){return this.options[D3]??this.options[P3]}set polygon(t){this.options[P3]=this.options[D3]=t}get stroke(){return[]}set stroke(t){}load(t){if(!t)return;const n=t.options??t.custom;if(n!==void 0)for(const r in n){const s=n[r];s&&(this.options[r]=gc(this.options[r]??{},s))}this.loadShape(t.character,C3,A3,!0),this.loadShape(t.polygon,D3,P3,!1),this.loadShape(t.image??t.images,M3,R3,!0),t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class pqe extends Tre{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.size_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.size_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class mqe extends bv{constructor(){super(),this.animation=new pqe,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(super.load(t),!t)return;const n=t.animation??t.anim;n!==void 0&&(this.animation.load(n),this.value=ro(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class Z7{constructor(){this.width=0}load(t){t&&(t.color!==void 0&&(this.color=zT.create(this.color,t.color)),t.width!==void 0&&(this.width=ro(t.width)),t.opacity!==void 0&&(this.opacity=ro(t.opacity)))}}class gqe extends bv{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(t){super.load(t),t&&(t.opacityRate!==void 0&&(this.opacityRate=t.opacityRate),t.sizeRate!==void 0&&(this.sizeRate=t.sizeRate),t.velocityRate!==void 0&&(this.velocityRate=t.velocityRate))}}class yqe{constructor(t,n){this._engine=t,this._container=n,this.bounce=new Ere,this.collisions=new K6e,this.color=new zT,this.color.value="#fff",this.groups={},this.move=new aqe,this.number=new dqe,this.opacity=new cqe,this.reduceDuplicates=!1,this.shadow=new hqe,this.shape=new fqe,this.size=new mqe,this.stroke=new Z7,this.zIndex=new gqe}load(t){var s,c,h;if(!t)return;if(this.bounce.load(t.bounce),this.color.load(zT.create(this.color,t.color)),t.groups!==void 0)for(const i in t.groups){const g=t.groups[i];g!==void 0&&(this.groups[i]=gc(this.groups[i]??{},g))}this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),t.reduceDuplicates!==void 0&&(this.reduceDuplicates=t.reduceDuplicates),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.zIndex.load(t.zIndex);const n=((s=t.move)==null?void 0:s.collisions)??((c=t.move)==null?void 0:c.bounce);n!==void 0&&(this.collisions.enable=n),this.collisions.load(t.collisions),t.interactivity!==void 0&&(this.interactivity=gc({},t.interactivity));const r=t.stroke??((h=t.shape)==null?void 0:h.stroke);if(r&&(this.stroke=xl(r,i=>{const g=new Z7;return g.load(i),g})),this._container){const i=this._engine.plugins.updaters.get(this._container);if(i)for(const w of i)w.loadOptions&&w.loadOptions(this,t);const g=this._engine.plugins.interactors.get(this._container);if(g)for(const w of g)w.loadParticlesOptions&&w.loadParticlesOptions(this,t)}}}function Cre(e,...t){for(const n of t)e.load(n)}function Are(e,t,...n){const r=new yqe(e,t);return Cre(r,...n),r}class vqe{constructor(t,n){this._findDefaultTheme=r=>this.themes.find(s=>s.default.value&&s.default.mode===r)??this.themes.find(s=>s.default.value&&s.default.mode==="any"),this._importPreset=r=>{this.load(this._engine.plugins.getPreset(r))},this._engine=t,this._container=n,this.autoPlay=!0,this.background=new I6e,this.backgroundMask=new O6e,this.defaultThemes={},this.delay=0,this.fullScreen=new L6e,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Sre(t,n),this.manualParticles=[],this.particles=Are(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(t){this.fullScreen.load(t)}get fps_limit(){return this.fpsLimit}set fps_limit(t){this.fpsLimit=t}get retina_detect(){return this.detectRetina}set retina_detect(t){this.detectRetina=t}load(t){var h,i;if(!t)return;t.preset!==void 0&&xl(t.preset,g=>this._importPreset(g)),t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.delay!==void 0&&(this.delay=ro(t.delay));const n=t.detectRetina??t.retina_detect;n!==void 0&&(this.detectRetina=n),t.duration!==void 0&&(this.duration=ro(t.duration));const r=t.fpsLimit??t.fps_limit;r!==void 0&&(this.fpsLimit=r),t.pauseOnBlur!==void 0&&(this.pauseOnBlur=t.pauseOnBlur),t.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),t.zLayers!==void 0&&(this.zLayers=t.zLayers),this.background.load(t.background);const s=t.fullScreen??t.backgroundMode;Hy(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(t.backgroundMask),this.interactivity.load(t.interactivity),t.manualParticles&&(this.manualParticles=t.manualParticles.map(g=>{const w=new U6e;return w.load(g),w})),this.particles.load(t.particles),this.style=gc(this.style,t.style),this._engine.plugins.loadOptions(this,t),t.smooth!==void 0&&(this.smooth=t.smooth);const c=this._engine.plugins.interactors.get(this._container);if(c)for(const g of c)g.loadOptions&&g.loadOptions(this,t);if(t.responsive!==void 0)for(const g of t.responsive){const w=new $6e;w.load(g),this.responsive.push(w)}if(this.responsive.sort((g,w)=>g.maxWidth-w.maxWidth),t.themes!==void 0)for(const g of t.themes){const w=this.themes.find(T=>T.name===g.name);if(w)w.load(g);else{const T=new H6e;T.load(g),this.themes.push(T)}}this.defaultThemes.dark=(h=this._findDefaultTheme("dark"))==null?void 0:h.name,this.defaultThemes.light=(i=this._findDefaultTheme("light"))==null?void 0:i.name}setResponsive(t,n,r){this.load(r);const s=this.responsive.find(c=>c.mode==="screen"&&screen?c.maxWidth>screen.availWidth:c.maxWidth*n>t);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(t){if(t){const n=this.themes.find(r=>r.name===t);n&&this.load(n.options)}else{const n=dre("(prefers-color-scheme: dark)"),r=n&&n.matches,s=this._findDefaultTheme(r?"dark":"light");s&&this.load(s.options)}}}class _qe{constructor(t,n){this.container=n,this._engine=t,this._interactors=t.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(t){for(const n of this._externalInteractors)n.isEnabled()&&await n.interact(t)}handleClickMode(t){for(const n of this._externalInteractors)n.handleClickMode&&n.handleClickMode(t)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const t of this._interactors){switch(t.type){case"external":this._externalInteractors.push(t);break;case"particles":this._particleInteractors.push(t);break}t.init()}}async particlesInteract(t,n){for(const r of this._externalInteractors)r.clear(t,n);for(const r of this._particleInteractors)r.isEnabled(t)&&await r.interact(t,n)}async reset(t){for(const n of this._externalInteractors)n.isEnabled()&&n.reset(t);for(const n of this._particleInteractors)n.isEnabled(t)&&n.reset(t)}}const K7=e=>{if(!ma(e.outMode,e.checkModes))return;const t=e.radius*2;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class xqe{constructor(t,n,r,s,c,h){this.container=r,this._calcPosition=(i,g,w,T=0)=>{for(const[,W]of i.plugins){const Z=W.particlePosition!==void 0?W.particlePosition(g,this):void 0;if(Z)return Ju.create(Z.x,Z.y,w)}const A=i.canvas.size,D=s6e({size:A,position:g}),k=Ju.create(D.x,D.y,w),I=this.getRadius(),F=this.options.move.outModes,j=W=>{K7({outMode:W,checkModes:["bounce","bounce-horizontal"],coord:k.x,maxCoord:i.canvas.size.width,setCb:Z=>k.x+=Z,radius:I})},V=W=>{K7({outMode:W,checkModes:["bounce","bounce-vertical"],coord:k.y,maxCoord:i.canvas.size.height,setCb:Z=>k.y+=Z,radius:I})};return j(F.left??F.default),j(F.right??F.default),V(F.top??F.default),V(F.bottom??F.default),this._checkOverlap(k,T)?this._calcPosition(i,void 0,w,T+1):k},this._calculateVelocity=()=>{const i=o6e(this.direction),g=i.copy(),w=this.options.move;if(w.direction==="inside"||w.direction==="outside")return g;const T=Math.PI/180*xi(w.angle.value),A=Math.PI/180*xi(w.angle.offset),D={left:A-T/2,right:A+T/2};return w.straight||(g.angle+=hu(ro(D.left,D.right))),w.random&&typeof w.speed=="number"&&(g.length*=Ss()),g},this._checkOverlap=(i,g=0)=>{const w=this.options.collisions,T=this.getRadius();if(!w.enable)return!1;const A=w.overlap;if(A.enable)return!1;const D=A.retries;if(D>=0&&g>D)throw new Error(`${ph} particle is overlapping and can't be placed`);return!!this.container.particles.find(k=>od(i,k.position)<T+k.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const g=this.roll.horizontal&&this.roll.vertical?2:1,w=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+w)/(Math.PI/g))%2?this.backColor?this.backColor:this.roll.alter?M6e(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const g=this.container,w=xi(this.options.zIndex.value);this.position=this._calcPosition(g,i,Rf(w,0,g.zLayers)),this.initialPosition=this.position.copy();const T=g.canvas.size;switch(this.moveCenter={...gre(this.options.move.center,T),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=i6e(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=_l.origin},this._loadShapeData=(i,g)=>{const w=i.options[this.shape];if(w)return gc({close:i.close,fill:i.fill},Ag(w,this.id,g))},this._engine=t,this.init(n,s,c,h)}destroy(t){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const n=this.container,r=this.pathGenerator;for(const[,s]of n.plugins)s.particleDestroyed&&s.particleDestroyed(this,t);for(const s of n.particles.updaters)s.particleDestroyed&&s.particleDestroyed(this,t);r&&r.reset(this)}draw(t){const n=this.container;for(const[,r]of n.plugins)n.canvas.drawParticlePlugin(r,this,t);n.canvas.drawParticle(this,t)}getFillColor(){return this._getRollColor(this.bubble.color??W7(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??W7(this.strokeColor))}init(t,n,r,s){const c=this.container,h=this._engine;this.id=t,this.group=s,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const i=c.retina.pixelRatio,g=c.actualOptions,w=Are(this._engine,c,g.particles),T=w.shape.type,{reduceDuplicates:A}=w;this.shape=Ag(T,this.id,A);const D=w.shape;if(r&&r.shape&&r.shape.type){const Z=r.shape.type,K=Ag(Z,this.id,A);K&&(this.shape=K,D.load(r.shape))}this.shapeData=this._loadShapeData(D,A),w.load(r);const k=this.shapeData;k&&w.load(k.particles);const I=new Sre(h,c);I.load(c.actualOptions.interactivity),I.load(w.interactivity),this.interactivity=I,this.fill=(k==null?void 0:k.fill)??w.shape.fill,this.close=(k==null?void 0:k.close)??w.shape.close,this.options=w;const F=this.options.move.path;this.pathDelay=k0(F.delay)*1e3,F.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(F.generator),this.pathGenerator&&c.addPath(F.generator,this.pathGenerator)&&this.pathGenerator.init(c)),c.retina.initParticle(this),this.size=mre(this.options.size,i),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(n),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-xi(this.options.move.decay);const j=c.particles;j.needsSort=j.needsSort||j.lastZIndex<this.position.z,j.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/c.zLayers,this.sides=24;let V=c.drawers.get(this.shape);V||(V=this._engine.plugins.getShapeDrawer(this.shape),V&&c.drawers.set(this.shape,V)),V&&V.loadShape&&V.loadShape(this);const W=V==null?void 0:V.getSidesCount;W&&(this.sides=W(this)),this.spawning=!1,this.shadowColor=Cf(this.options.shadow.color);for(const Z of c.particles.updaters)Z.init(this);for(const Z of c.particles.movers)Z.init&&Z.init(this);V&&V.particleInit&&V.particleInit(c,this);for(const[,Z]of c.plugins)Z.particleCreated&&Z.particleCreated(this)}isInsideCanvas(){const t=this.getRadius(),n=this.container.canvas.size,r=this.position;return r.x>=-t&&r.y>=-t&&r.y<=n.height+t&&r.x<=n.width+t}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const t of this.container.particles.updaters)t.reset&&t.reset(this)}}class bqe{constructor(t,n){this.position=t,this.particle=n}}class Mre{constructor(t,n){this.position={x:t,y:n}}}class Df extends Mre{constructor(t,n,r,s){super(t,n),this.size={height:s,width:r}}contains(t){const n=this.size.width,r=this.size.height,s=this.position;return t.x>=s.x&&t.x<=s.x+n&&t.y>=s.y&&t.y<=s.y+r}intersects(t){t instanceof yc&&t.intersects(this);const n=this.size.width,r=this.size.height,s=this.position,c=t.position,h=t instanceof Df?t.size:{width:0,height:0},i=h.width,g=h.height;return c.x<s.x+n&&c.x+i>s.x&&c.y<s.y+r&&c.y+g>s.y}}class yc extends Mre{constructor(t,n,r){super(t,n),this.radius=r}contains(t){return od(t,this.position)<=this.radius}intersects(t){const n=this.position,r=t.position,s={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},c=this.radius;if(t instanceof yc){const h=c+t.radius,i=Math.sqrt(s.x**2+s.y**2);return h>i}else if(t instanceof Df){const{width:h,height:i}=t.size;return Math.pow(s.x-h,2)+Math.pow(s.y-i,2)<=c**2||s.x<=c+h&&s.y<=c+i||s.x<=h||s.y<=i}return!1}}class TR{constructor(t,n){this.rectangle=t,this.capacity=n,this._subdivide=()=>{const{x:r,y:s}=this.rectangle.position,{width:c,height:h}=this.rectangle.size,{capacity:i}=this;for(let g=0;g<4;g++)this._subs.push(new TR(new Df(r+c/2*(g%2),s+h/2*(Math.round(g/2)-g%2),c/2,h/2),i));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(t){return this.rectangle.contains(t.position)?this._points.length<this.capacity?(this._points.push(t),!0):(this._divided||this._subdivide(),this._subs.some(n=>n.insert(t))):!1}query(t,n,r){const s=r||[];if(!t.intersects(this.rectangle))return[];for(const c of this._points)!t.contains(c.position)&&od(t.position,c.position)>c.particle.getRadius()&&(!n||n(c.particle))||s.push(c.particle);if(this._divided)for(const c of this._subs)c.query(t,n,s);return s}queryCircle(t,n,r){return this.query(new yc(t.x,t.y,n),r)}queryRectangle(t,n,r){return this.query(new Df(t.x,t.y,n.width,n.height),r)}}const Q7=4,J7=e=>new Df(-e.width/4,-e.height/4,e.width*3/2,e.height*3/2);let wqe=class{constructor(t,n){this._applyDensity=(s,c,h)=>{var k;if(!((k=s.number.density)!=null&&k.enable))return;const i=s.number,g=this._initDensityFactor(i.density),w=i.value,T=i.limit>0?i.limit:w,A=Math.min(w,T)*g+c,D=Math.min(this.count,this.filter(I=>I.group===h).length);this.limit=i.limit*g,D<A?this.push(Math.abs(A-D),void 0,s,h):D>A&&this.removeQuantity(D-A,h)},this._initDensityFactor=s=>{const c=this._container;if(!c.canvas.element||!s.enable)return 1;const h=c.canvas.element,i=c.retina.pixelRatio;return h.width*h.height/(s.factor*i**2*s.area)},this._pushParticle=(s,c,h,i)=>{try{let g=this.pool.pop();g?g.init(this._nextId,s,c,h):g=new xqe(this._engine,this._nextId,this._container,s,c,h);let w=!0;return i&&(w=i(g)),w?(this._array.push(g),this._zArray.push(g),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:g}}),g):void 0}catch(g){O0().warning(`${ph} adding particle: ${g}`);return}},this._removeParticle=(s,c,h)=>{const i=this._array[s];if(!i||i.group!==c)return!1;i.destroy(h);const g=this._zArray.indexOf(i);return this._array.splice(s,1),this._zArray.splice(g,1),this.pool.push(i),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:i}}),!0},this._engine=t,this._container=n,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new _qe(t,n);const r=n.canvas.size;this.quadTree=new TR(J7(r),Q7),this.movers=this._engine.plugins.getMovers(n,!0),this.updaters=this._engine.plugins.getUpdaters(n,!0)}get count(){return this._array.length}addManualParticles(){const t=this._container,n=t.actualOptions;for(const r of n.manualParticles)this.addParticle(r.position?gre(r.position,t.canvas.size):void 0,r.options)}addParticle(t,n,r,s){const c=this._container,h=c.actualOptions,i=h.particles.number.limit;if(i>0){const g=this.count+1-i;g>0&&this.removeQuantity(g)}return this._pushParticle(t,n,r,s)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(t){const n=this._container;n.canvas.clear(),await this.update(t);for(const[,r]of n.plugins)n.canvas.drawPlugin(r,t);for(const r of this._zArray)r.draw(t)}filter(t){return this._array.filter(t)}find(t){return this._array.find(t)}handleClickMode(t){this._interactionManager.handleClickMode(t)}init(){var s;const t=this._container,n=t.actualOptions;this.lastZIndex=0,this.needsSort=!1;let r=!1;this.updaters=this._engine.plugins.getUpdaters(t,!0),this._interactionManager.init();for(const[,c]of t.plugins)if(c.particlesInitialization!==void 0&&(r=c.particlesInitialization()),r)break;this._interactionManager.init();for(const[,c]of t.pathGenerators)c.init(t);if(this.addManualParticles(),!r){for(const c in n.particles.groups){const h=n.particles.groups[c];for(let i=this.count,g=0;g<((s=h.number)==null?void 0:s.value)&&i<n.particles.number.value;i++,g++)this.addParticle(void 0,h,c)}for(let c=this.count;c<n.particles.number.value;c++)this.addParticle()}}push(t,n,r,s){this.pushing=!0;for(let c=0;c<t;c++)this.addParticle(n==null?void 0:n.position,r,s);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(t,n,r){this.removeAt(this._array.indexOf(t),void 0,n,r)}removeAt(t,n=1,r,s){if(t<0||t>this.count)return;let c=0;for(let h=t;c<n&&h<this.count;h++)this._removeParticle(h--,r,s)&&c++}removeQuantity(t,n){this.removeAt(0,t,n)}setDensity(){const t=this._container.actualOptions,n=t.particles.groups;for(const r in n)this._applyDensity(n[r],0,r);this._applyDensity(t.particles,t.manualParticles.length)}async update(t){const n=this._container,r=new Set;this.quadTree=new TR(J7(n.canvas.size),Q7);for(const[,s]of n.pathGenerators)s.update();for(const[,s]of n.plugins)s.update&&s.update(t);for(const s of this._array){const c=n.canvas.resizeFactor;c&&!s.ignoresResizeRatio&&(s.position.x*=c.width,s.position.y*=c.height,s.initialPosition.x*=c.width,s.initialPosition.y*=c.height),s.ignoresResizeRatio=!1,await this._interactionManager.reset(s);for(const[,h]of this._container.plugins){if(s.destroyed)break;h.particleUpdate&&h.particleUpdate(s,t)}for(const h of this.movers)h.isEnabled(s)&&h.move(s,t);if(s.destroyed){r.add(s);continue}this.quadTree.insert(new bqe(s.getPosition(),s))}if(r.size){const s=c=>!r.has(c);this._array=this.filter(s),this._zArray=this._zArray.filter(s),this.pool.push(...r)}await this._interactionManager.externalInteract(t);for(const s of this._array){for(const c of this.updaters)c.update(s,t);!s.destroyed&&!s.spawning&&await this._interactionManager.particlesInteract(s,t)}if(delete n.canvas.resizeFactor,this.needsSort){const s=this._zArray;s.sort((c,h)=>h.position.z-c.position.z||c.id-h.id),this.lastZIndex=s[s.length-1].position.z,this.needsSort=!1}}};class Sqe{constructor(t){this.container=t,this.pixelRatio=1,this.reduceFactor=1}init(){const t=this.container,n=t.actualOptions;this.pixelRatio=!n.detectRetina||i1()?1:window.devicePixelRatio,this.reduceFactor=1;const r=this.pixelRatio;if(t.canvas.element){const h=t.canvas.element;t.canvas.size.width=h.offsetWidth*r,t.canvas.size.height=h.offsetHeight*r}const s=n.particles,c=s.move;this.attractDistance=xi(c.attract.distance)*r,this.maxSpeed=xi(c.gravity.maxSpeed)*r,this.sizeAnimationSpeed=xi(s.size.animation.speed)*r}initParticle(t){const n=t.options,r=this.pixelRatio,s=n.move,c=s.distance,h=t.retina;h.attractDistance=xi(s.attract.distance)*r,h.moveDrift=xi(s.drift)*r,h.moveSpeed=xi(s.speed)*r,h.sizeAnimationSpeed=xi(n.size.animation.speed)*r;const i=h.maxDistance;i.horizontal=c.horizontal!==void 0?c.horizontal*r:void 0,i.vertical=c.vertical!==void 0?c.vertical*r:void 0,h.maxSpeed=xi(s.gravity.maxSpeed)*r}}function zs(e){return e&&!e.destroyed}function Tqe(e,t=60,n=!1){return{value:e,factor:n?60/t:60*e/1e3}}function db(e,t,...n){const r=new vqe(e,t);return Cre(r,...n),r}const Eqe="default",eY={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};class Cqe{constructor(t,n,r){this.id=n,this._intersectionManager=s=>{if(!(!zs(this)||!this.actualOptions.pauseOnOutsideViewport))for(const c of s)c.target===this.interactivity.element&&(c.isIntersecting?this.play:this.pause)()},this._nextFrame=async s=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&s<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=s);const c=Tqe(s-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(c.value),this.lastFrameTime=s,c.value>1e3){this.draw(!1);return}if(await this.particles.draw(c),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(c){O0().error(`${ph} in animation loop`,c)}},this._engine=t,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=r,this._initialSourceOptions=r,this.retina=new Sqe(this),this.canvas=new D6e(this),this.particles=new wqe(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=db(this._engine,this),this.actualOptions=db(this._engine,this),this._eventListeners=new P6e(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(s=>this._intersectionManager(s))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(t){if(!zs(this))return;const n=this.interactivity.element;if(!n)return;const r=(A,D,k)=>{if(!zs(this))return;const I=this.retina.pixelRatio,F={x:D.x*I,y:D.y*I},j=this.particles.quadTree.queryCircle(F,k*I);t(A,j)},s=A=>{if(!zs(this))return;const D=A,k={x:D.offsetX||D.clientX,y:D.offsetY||D.clientY};r(A,k,1)},c=()=>{zs(this)&&(w=!0,T=!1)},h=()=>{zs(this)&&(T=!0)},i=A=>{if(zs(this)){if(w&&!T){const D=A;let k=D.touches[D.touches.length-1];if(!k&&(k=D.changedTouches[D.changedTouches.length-1],!k))return;const I=this.canvas.element,F=I?I.getBoundingClientRect():void 0,j={x:k.clientX-(F?F.left:0),y:k.clientY-(F?F.top:0)};r(A,j,Math.max(k.radiusX,k.radiusY))}w=!1,T=!1}},g=()=>{zs(this)&&(w=!1,T=!1)};let w=!1,T=!1;n.addEventListener("click",s),n.addEventListener("touchstart",c),n.addEventListener("touchmove",h),n.addEventListener("touchend",i),n.addEventListener("touchcancel",g)}addLifeTime(t){this._lifeTime+=t}addPath(t,n,r=!1){return!zs(this)||!r&&this.pathGenerators.has(t)?!1:(this.pathGenerators.set(t,n??eY),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!zs(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,r]of this.drawers)r.destroy&&r.destroy(this);for(const r of this.drawers.keys())this.drawers.delete(r);this._engine.plugins.destroy(this),this.destroyed=!0;const t=this._engine.dom(),n=t.findIndex(r=>r===this);n>=0&&t.splice(n,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(t){if(!zs(this))return;let n=t;this._drawAnimationFrame=requestAnimationFrame(async r=>{n&&(this.lastFrameTime=void 0,n=!1),await this._nextFrame(r)})}async export(t,n={}){for(const[,r]of this.plugins){if(!r.export)continue;const s=await r.export(t,n);if(s.supported)return s.blob}O0().error(`${ph} - Export plugin with type ${t} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&zs(this)}handleClickMode(t){if(zs(this)){this.particles.handleClickMode(t);for(const[,n]of this.plugins)n.handleClickMode&&n.handleClickMode(t)}}async init(){if(!zs(this))return;const t=this._engine.plugins.getSupportedShapes();for(const r of t){const s=this._engine.plugins.getShapeDrawer(r);s&&this.drawers.set(r,s)}this._options=db(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=db(this._engine,this,this._options);const n=this._engine.plugins.getAvailablePlugins(this);for(const[r,s]of n)this.plugins.set(r,s);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=xi(this.actualOptions.duration)*1e3,this._delay=xi(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,r]of this.drawers)r.init&&await r.init(this);for(const[,r]of this.plugins)r.init&&await r.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,r]of this.plugins)r.particlesSetup&&r.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(t){zs(this)&&(this._currentTheme=t,await this.refresh())}pause(){if(zs(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,t]of this.plugins)t.pause&&t.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(t){if(!zs(this))return;const n=this._paused||t;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),n)for(const[,r]of this.plugins)r.play&&r.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(n||!1)}async refresh(){if(zs(this))return this.stop(),this.start()}async reset(){if(zs(this))return this._initialSourceOptions=void 0,this._options=db(this._engine,this),this.actualOptions=db(this._engine,this,this._options),this.refresh()}setNoise(t,n,r){zs(this)&&this.setPath(t,n,r)}setPath(t,n,r){if(!t||!zs(this))return;const s={...eY};if(yre(t))s.generate=t,n&&(s.init=n),r&&(s.update=r);else{const c=s;s.generate=t.generate||c.generate,s.init=t.init||c.init,s.update=t.update||c.update}this.addPath(Eqe,s,!0)}async start(){!zs(this)||this.started||(await this.init(),this.started=!0,await new Promise(t=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,n]of this.plugins)n.start&&await n.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),t()},this._delay)}))}stop(){if(!(!zs(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,t]of this.plugins)t.stop&&t.stop();for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const t=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===t?!1:(this.responsiveMaxWidth=t,!0)}}class Aqe{constructor(){this._listeners=new Map}addEventListener(t,n){this.removeEventListener(t,n);let r=this._listeners.get(t);r||(r=[],this._listeners.set(t,r)),r.push(n)}dispatchEvent(t,n){const r=this._listeners.get(t);r&&r.forEach(s=>s(n))}hasEventListener(t){return!!this._listeners.get(t)}removeAllEventListeners(t){t?this._listeners.delete(t):this._listeners=new Map}removeEventListener(t,n){const r=this._listeners.get(t);if(!r)return;const s=r.length,c=r.indexOf(n);c<0||(s===1?this._listeners.delete(t):r.splice(c,1))}}function I3(e,t,n,r=!1){let s=t.get(e);return(!s||r)&&(s=[...n.values()].map(c=>c(e)),t.set(e,s)),s}class Mqe{constructor(t){this._engine=t,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(t,n){this._initializers.interactors.set(t,n)}addParticleMover(t,n){this._initializers.movers.set(t,n)}addParticleUpdater(t,n){this._initializers.updaters.set(t,n)}addPathGenerator(t,n){!this.getPathGenerator(t)&&this.pathGenerators.set(t,n)}addPlugin(t){!this.getPlugin(t.id)&&this.plugins.push(t)}addPreset(t,n,r=!1){(r||!this.getPreset(t))&&this.presets.set(t,n)}addShapeDrawer(t,n){xl(t,r=>{!this.getShapeDrawer(r)&&this.drawers.set(r,n)})}destroy(t){this.updaters.delete(t),this.movers.delete(t),this.interactors.delete(t)}getAvailablePlugins(t){const n=new Map;for(const r of this.plugins)r.needsPlugin(t.actualOptions)&&n.set(r.id,r.getPlugin(t));return n}getInteractors(t,n=!1){return I3(t,this.interactors,this._initializers.interactors,n)}getMovers(t,n=!1){return I3(t,this.movers,this._initializers.movers,n)}getPathGenerator(t){return this.pathGenerators.get(t)}getPlugin(t){return this.plugins.find(n=>n.id===t)}getPreset(t){return this.presets.get(t)}getShapeDrawer(t){return this.drawers.get(t)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(t,n=!1){return I3(t,this.updaters,this._initializers.updaters,n)}loadOptions(t,n){for(const r of this.plugins)r.loadOptions(t,n)}loadParticlesOptions(t,n,...r){const s=this.updaters.get(t);if(s)for(const c of s)c.loadOptions&&c.loadOptions(n,...r)}}async function Rqe(e){const t=Ag(e.url,e.index);if(!t)return e.fallback;const n=await fetch(t);return n.ok?n.json():(O0().error(`${ph} ${n.status} while retrieving config file`),e.fallback)}function Dqe(e){return!e.id&&!e.element&&!e.url&&!e.options}function Pqe(e){return!Dqe(e)}class Iqe{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Aqe,this._initialized=!1,this.plugins=new Mqe(this)}get configs(){const t={};for(const[n,r]of this._configs)t[n]=r;return t}get version(){return"2.12.0"}addConfig(t,n){Tf(t)?n&&(n.name=t,this._configs.set(t,n)):this._configs.set(t.name??"default",t)}addEventListener(t,n){this._eventDispatcher.addEventListener(t,n)}async addInteractor(t,n,r=!0){this.plugins.addInteractor(t,n),await this.refresh(r)}async addMover(t,n,r=!0){this.plugins.addParticleMover(t,n),await this.refresh(r)}async addParticleUpdater(t,n,r=!0){this.plugins.addParticleUpdater(t,n),await this.refresh(r)}async addPathGenerator(t,n,r=!0){this.plugins.addPathGenerator(t,n),await this.refresh(r)}async addPlugin(t,n=!0){this.plugins.addPlugin(t),await this.refresh(n)}async addPreset(t,n,r=!1,s=!0){this.plugins.addPreset(t,n,r),await this.refresh(s)}async addShape(t,n,r,s,c,h=!0){let i,g=h,w,T,A;Hy(r)?(g=r,w=void 0):w=r,Hy(s)?(g=s,T=void 0):T=s,Hy(c)?(g=c,A=void 0):A=c,yre(n)?i={afterEffect:T,destroy:A,draw:n,init:w}:i=n,this.plugins.addShapeDrawer(t,i),await this.refresh(g)}dispatchEvent(t,n){this._eventDispatcher.dispatchEvent(t,n)}dom(){return this._domArray}domItem(t){const n=this.dom(),r=n[t];if(!r||r.destroyed){n.splice(t,1);return}return r}init(){this._initialized||(this._initialized=!0)}async load(t,n){return this.loadFromArray(t,n)}async loadFromArray(t,n,r){let s;return Pqe(t)?s=t:(s={},Tf(t)?s.id=t:s.options=t,Ef(n)?s.index=n:s.options=n??s.options,s.index=r??s.index),this._loadParams(s)}async loadJSON(t,n,r){let s,c;return Ef(n)||n===void 0?s=t:(c=t,s=n),this._loadParams({id:c,url:s,index:r})}async refresh(t=!0){t&&this.dom().forEach(n=>n.refresh())}removeEventListener(t,n){this._eventDispatcher.removeEventListener(t,n)}async set(t,n,r,s){const c={index:s};return Tf(t)?c.id=t:c.element=t,n instanceof HTMLElement?c.element=n:c.options=n,Ef(r)?c.index=r:c.options=r??c.options,this._loadParams(c)}async setJSON(t,n,r,s){const c={};return t instanceof HTMLElement?(c.element=t,c.url=n,c.index=r):(c.id=t,c.element=n,c.url=r,c.index=s),this._loadParams(c)}setOnClickHandler(t){const n=this.dom();if(!n.length)throw new Error(`${ph} can only set click handlers after calling tsParticles.load()`);for(const r of n)r.addClickHandler(t)}async _loadParams(t){const n=t.id??`tsparticles${Math.floor(Ss()*1e4)}`,{index:r,url:s}=t,c=s?await Rqe({fallback:t.options,url:s,index:r}):t.options;let h=t.element??document.getElementById(n);h||(h=document.createElement("div"),h.id=n,document.body.append(h));const i=Ag(c,r),g=this.dom(),w=g.findIndex(D=>D.id===n);if(w>=0){const D=this.domItem(w);D&&!D.destroyed&&(D.destroy(),g.splice(w,1))}let T;if(h.tagName.toLowerCase()==="canvas")T=h,T.dataset[qS]="false";else{const D=h.getElementsByTagName("canvas");D.length?(T=D[0],T.dataset[qS]="false"):(T=document.createElement("canvas"),T.dataset[qS]="true",h.appendChild(T))}T.style.width||(T.style.width="100%"),T.style.height||(T.style.height="100%");const A=new Cqe(this,n,i);return w>=0?g.splice(w,0,A):g.push(A),A.canvas.loadCanvas(T),await A.start(),A}}class kqe{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(t){const n=t.value,r=n.hsl??t.value;if(r.h!==void 0&&r.s!==void 0&&r.l!==void 0)return o1(r)}handleRangeColor(t){const n=t.value,r=n.hsl??t.value;if(r.h!==void 0&&r.l!==void 0)return o1({h:xi(r.h),l:xi(r.l),s:xi(r.s)})}parseString(t){if(!t.startsWith("hsl"))return;const n=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,r=n.exec(t);return r?_6e({a:r.length>4?ure(r[5]):1,h:parseInt(r[1],10),l:parseInt(r[3],10),s:parseInt(r[2],10)}):void 0}}class Oqe{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(t){const n=t.value,r=n.rgb??t.value;if(r.r!==void 0)return r}handleRangeColor(t){const n=t.value,r=n.rgb??t.value;if(r.r!==void 0)return{r:xi(r.r),g:xi(r.g),b:xi(r.b)}}parseString(t){if(!t.startsWith(this.stringPrefix))return;const n=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,r=n.exec(t);return r?{a:r.length>4?ure(r[5]):1,b:parseInt(r[3],10),g:parseInt(r[2],10),r:parseInt(r[1],10)}:void 0}}function Lqe(){const e=new Oqe,t=new kqe;G7(e),G7(t);const n=new Iqe;return n.init(),n}class sm{constructor(t){this.container=t,this.type="external"}}class Z5{constructor(t){this.container=t,this.type="particles"}}const ER=Lqe();i1()||(window.tsParticles=ER);const Db=e=>typeof e=="object"&&e!==null;function CR(e,t,n=()=>!1){if(!Db(e)||!Db(t))return e===t;const r=Object.keys(e).filter(c=>!n(c)),s=Object.keys(t).filter(c=>!n(c));if(r.length!==s.length)return!1;for(const c of r){const h=e[c],i=t[c];if(Db(h)&&Db(i)){if(h===t&&i===e)continue;if(!CR(h,i,n))return!1}else if(Array.isArray(h)&&Array.isArray(i)){if(!Rre(h,i,n))return!1}else if(h!==i)return!1}return!0}function Rre(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],c=t[r];if(Array.isArray(s)&&Array.isArray(c)){if(!Rre(s,c,n))return!1}else if(Db(s)&&Db(c)){if(!CR(s,c,n))return!1}else if(s!==c)return!1}return!0}const Dre="tsparticles";let Pre=class Ire extends q.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const n=t.options??t.params,r=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!CR(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!CR(n,r,s=>s.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(ER),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:n,className:r,canvasClassName:s,id:c}=this.props;return St.createElement("div",{className:r,id:c},St.createElement("canvas",{className:s,style:{...this.props.style,width:t,height:n}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??Ire.defaultProps.id??Dre,n=await ER.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=n),this.setState({library:n}),this.props.loaded&&await this.props.loaded(n)}};Pre.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:Dre};class AR{static init(t){var c;const n=new AR,r=t.selector;if(!r)throw new Error("No selector provided");const s=document.querySelector(r);if(!s)throw new Error("No element found for selector");return ER.set(r.replace(".","").replace("!",""),s,{fullScreen:{enable:!1},particles:{color:{value:t.color??"!000000"},links:{color:"random",distance:t.minDistance??120,enable:t.connectParticles??!1},move:{enable:!0,speed:t.speed??.5},number:{value:t.maxParticles??100},size:{value:{min:1,max:t.sizeVariations??3}}},responsive:(c=t.responsive)==null?void 0:c.map(h=>{var i,g,w,T,A;return{maxWidth:h.breakpoint,options:{particles:{color:{value:(i=h.options)==null?void 0:i.color},links:{distance:(g=h.options)==null?void 0:g.minDistance,enable:(w=h.options)==null?void 0:w.connectParticles},number:{value:t.maxParticles},move:{enable:!0,speed:(T=h.options)==null?void 0:T.speed},size:{value:(A=h.options)==null?void 0:A.sizeVariations}}}}})}).then(h=>{n._container=h}),n}destroy(){const t=this._container;t&&t.destroy()}pauseAnimation(){const t=this._container;t&&t.pause()}resumeAnimation(){const t=this._container;t&&t.play()}}const zqe=e=>{const t=(r,s)=>e.load(r,s);t.load=(r,s,c)=>{e.loadJSON(r,s).then(h=>{h&&c(h)}).catch(()=>{c(void 0)})},t.setOnClickHandler=r=>{e.setOnClickHandler(r)};const n=e.dom();return{particlesJS:t,pJSDom:n}},Fqe=e=>{const{particlesJS:t,pJSDom:n}=zqe(e);return window.particlesJS=t,window.pJSDom=n,window.Particles=AR,{particlesJS:t,pJSDom:n,Particles:AR}};function Bqe(e){const t=e.initialPosition,{dx:n,dy:r}=Wc(t,e.position),s=Math.abs(n),c=Math.abs(r),{maxDistance:h}=e.retina,i=h.horizontal,g=h.vertical;if(!(!i&&!g)){if((i&&s>=i||g&&c>=g)&&!e.misplaced)e.misplaced=!!i&&s>i||!!g&&c>g,i&&(e.velocity.x=e.velocity.y/2-e.velocity.x),g&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!i||s<i)&&(!g||c<g)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const w=e.position,T=e.velocity;i&&(w.x<t.x&&T.x<0||w.x>t.x&&T.x>0)&&(T.x*=-Ss()),g&&(w.y<t.y&&T.y<0||w.y>t.y&&T.y>0)&&(T.y*=-Ss())}}}function Nqe(e,t,n,r,s,c){Vqe(e,c);const h=e.gravity,i=h!=null&&h.enable&&h.inverse?-1:1;s&&n&&(e.velocity.x+=s*c.factor/(60*n)),h!=null&&h.enable&&n&&(e.velocity.y+=i*(h.acceleration*c.factor)/(60*n));const g=e.moveDecay;e.velocity.multTo(g);const w=e.velocity.mult(n);h!=null&&h.enable&&r>0&&(!h.inverse&&w.y>=0&&w.y>=r||h.inverse&&w.y<=0&&w.y<=-r)&&(w.y=i*r,n&&(e.velocity.y=w.y/n));const T=e.options.zIndex,A=(1-e.zIndexFactor)**T.velocityRate;w.multTo(A);const{position:D}=e;D.addTo(w),t.vibrate&&(D.x+=Math.sin(D.x*Math.cos(D.y)),D.y+=Math.cos(D.y*Math.sin(D.x)))}function jqe(e,t){const n=e.container;if(!e.spin)return;const r={x:e.spin.direction==="clockwise"?Math.cos:Math.sin,y:e.spin.direction==="clockwise"?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*r.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*r.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const s=Math.max(n.canvas.size.width,n.canvas.size.height);e.spin.radius>s/2?(e.spin.radius=s/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/s)}function Vqe(e,t){var h;const n=e.options,r=n.move.path;if(!r.enable)return;if(e.lastPathTime<=e.pathDelay){e.lastPathTime+=t.value;return}const c=(h=e.pathGenerator)==null?void 0:h.generate(e,t);c&&e.velocity.addTo(c),r.clamp&&(e.velocity.x=Rf(e.velocity.x,-1,1),e.velocity.y=Rf(e.velocity.y,-1,1)),e.lastPathTime-=e.pathDelay}function Uqe(e){return e.slow.inRange?e.slow.factor:1}const $qe=2;class qqe{constructor(){this._initSpin=t=>{const n=t.container,r=t.options,s=r.move.spin;if(!s.enable)return;const c=s.position??{x:50,y:50},h={x:c.x/100*n.canvas.size.width,y:c.y/100*n.canvas.size.height},i=t.getPosition(),g=od(i,h),w=xi(s.acceleration);t.retina.spinAcceleration=w*n.retina.pixelRatio,t.spin={center:h,direction:t.velocity.x>=0?"clockwise":"counter-clockwise",angle:t.velocity.angle,radius:g,acceleration:t.retina.spinAcceleration}}}init(t){const n=t.options,r=n.move.gravity;t.gravity={enable:r.enable,acceleration:xi(r.acceleration),inverse:r.inverse},this._initSpin(t)}isEnabled(t){return!t.destroyed&&t.options.move.enable}move(t,n){var I,F;const r=t.options,s=r.move;if(!s.enable)return;const c=t.container,h=c.retina.pixelRatio,i=Uqe(t),g=((I=t.retina).moveSpeed??(I.moveSpeed=xi(s.speed)*h))*c.retina.reduceFactor,w=(F=t.retina).moveDrift??(F.moveDrift=xi(t.options.move.drift)*h),T=qy(r.size.value)*h,A=s.size?t.getRadius()/T:1,D=g*A*i*(n.factor||1)/$qe,k=t.retina.maxSpeed??c.retina.maxSpeed;s.spin.enable?jqe(t,D):Nqe(t,s,D,k,w,n),Bqe(t)}}async function Hqe(e,t=!0){await e.addMover("base",()=>new qqe,t)}class Gqe{draw(t,n,r){n.circleRange||(n.circleRange={min:0,max:Math.PI*2});const s=n.circleRange;t.arc(0,0,r,s.min,s.max,!1)}getSidesCount(){return 12}particleInit(t,n){const r=n.shapeData,s=(r==null?void 0:r.angle)??{max:360,min:0};n.circleRange=Rb(s)?{min:s.min*Math.PI/180,max:s.max*Math.PI/180}:{min:0,max:s*Math.PI/180}}}async function Wqe(e,t=!0){await e.addShape("circle",new Gqe,t)}function k3(e,t,n,r,s){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const c=hu(n.offset),h=(t.velocity??0)*e.factor+c*3.6,i=t.decay??1;!s||t.status==="increasing"?(t.value+=h,t.value>r&&(t.loops||(t.loops=0),t.loops++,s&&(t.status="decreasing",t.value-=t.value%r))):(t.value-=h,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&i!==1&&(t.velocity*=i),t.value>r&&(t.value%=r)}function Yqe(e,t){const{h:n,s:r,l:s}=e.options.color.animation,{color:c}=e;if(!c)return;const{h,s:i,l:g}=c;h&&k3(t,h,n,360,!1),i&&k3(t,i,r,100,!0),g&&k3(t,g,s,100,!0)}class Xqe{constructor(t){this.container=t}init(t){const n=OT(t.options.color,t.id,t.options.reduceDuplicates);n&&(t.color=wre(n,t.options.color.animation,this.container.retina.reduceFactor))}isEnabled(t){const{h:n,s:r,l:s}=t.options.color.animation,{color:c}=t;return!t.destroyed&&!t.spawning&&((c==null?void 0:c.h.value)!==void 0&&n.enable||(c==null?void 0:c.s.value)!==void 0&&r.enable||(c==null?void 0:c.l.value)!==void 0&&s.enable)}update(t,n){Yqe(t,n)}}async function Zqe(e,t=!0){await e.addParticleUpdater("color",n=>new Xqe(n),t)}function Kqe(e,t,n,r){switch(e.options.opacity.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=n&&e.destroy();break}}function Qqe(e,t){const n=e.opacity;if(e.destroyed||!(n!=null&&n.enable)||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const r=n.min,s=n.max,c=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=s?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=(n.velocity??0)*t.factor;break;case"decreasing":n.value<=r?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=(n.velocity??0)*t.factor;break}n.velocity&&n.decay!==1&&(n.velocity*=c),Kqe(e,n.value,r,s),e.destroyed||(n.value=Rf(n.value,r,s))}}class Jqe{constructor(t){this.container=t}init(t){const n=t.options.opacity;t.opacity=mre(n,1);const r=n.animation;r.enable&&(t.opacity.velocity=xi(r.speed)/100*this.container.retina.reduceFactor,r.sync||(t.opacity.velocity*=Ss()))}isEnabled(t){return!t.destroyed&&!t.spawning&&!!t.opacity&&t.opacity.enable&&((t.opacity.maxLoops??0)<=0||(t.opacity.maxLoops??0)>0&&(t.opacity.loops??0)<(t.opacity.maxLoops??0))}reset(t){t.opacity&&(t.opacity.time=0,t.opacity.loops=0)}update(t,n){this.isEnabled(t)&&Qqe(t,n)}}async function e8e(e,t=!0){await e.addParticleUpdater("opacity",n=>new Jqe(n),t)}function t8e(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-horizontal"&&e.outMode!=="bounceHorizontal"&&e.outMode!=="split"||e.direction!=="left"&&e.direction!=="right")return;e.bounds.right<0&&e.direction==="left"?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&e.direction==="right"&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let n=!1;if(e.direction==="right"&&e.bounds.right>=e.canvasSize.width&&t>0||e.direction==="left"&&e.bounds.left<=0&&t<0){const s=k0(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-s,n=!0}if(!n)return;const r=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&e.direction==="right"?e.particle.position.x=e.canvasSize.width-r:e.bounds.left<=0&&e.direction==="left"&&(e.particle.position.x=r),e.outMode==="split"&&e.particle.destroy()}function n8e(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-vertical"&&e.outMode!=="bounceVertical"&&e.outMode!=="split"||e.direction!=="bottom"&&e.direction!=="top")return;e.bounds.bottom<0&&e.direction==="top"?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&e.direction==="bottom"&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let n=!1;if(e.direction==="bottom"&&e.bounds.bottom>=e.canvasSize.height&&t>0||e.direction==="top"&&e.bounds.top<=0&&t<0){const s=k0(e.particle.options.bounce.vertical);e.particle.velocity.y*=-s,n=!0}if(!n)return;const r=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&e.direction==="bottom"?e.particle.position.y=e.canvasSize.height-r:e.bounds.top<=0&&e.direction==="top"&&(e.particle.position.y=r),e.outMode==="split"&&e.particle.destroy()}class r8e{constructor(t){this.container=t,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(t,n,r,s){if(!this.modes.includes(s))return;const c=this.container;let h=!1;for(const[,D]of c.plugins)if(D.particleBounce!==void 0&&(h=D.particleBounce(t,r,n)),h)break;if(h)return;const i=t.getPosition(),g=t.offset,w=t.getRadius(),T=EE(i,w),A=c.canvas.size;t8e({particle:t,outMode:s,direction:n,bounds:T,canvasSize:A,offset:g,size:w}),n8e({particle:t,outMode:s,direction:n,bounds:T,canvasSize:A,offset:g,size:w})}}class i8e{constructor(t){this.container=t,this.modes=["destroy"]}update(t,n,r,s){if(!this.modes.includes(s))return;const c=this.container;switch(t.outType){case"normal":case"outside":if(G5(t.position,c.canvas.size,_l.origin,t.getRadius(),n))return;break;case"inside":{const{dx:h,dy:i}=Wc(t.position,t.moveCenter),{x:g,y:w}=t.velocity;if(g<0&&h>t.moveCenter.radius||w<0&&i>t.moveCenter.radius||g>=0&&h<-t.moveCenter.radius||w>=0&&i<-t.moveCenter.radius)return;break}}c.particles.remove(t,void 0,!0)}}class o8e{constructor(t){this.container=t,this.modes=["none"]}update(t,n,r,s){if(!this.modes.includes(s)||t.options.move.distance.horizontal&&(n==="left"||n==="right")||t.options.move.distance.vertical&&(n==="top"||n==="bottom"))return;const c=t.options.move.gravity,h=this.container,i=h.canvas.size,g=t.getRadius();if(c.enable){const w=t.position;(!c.inverse&&w.y>i.height+g&&n==="bottom"||c.inverse&&w.y<-g&&n==="top")&&h.particles.remove(t)}else{if(t.velocity.y>0&&t.position.y<=i.height+g||t.velocity.y<0&&t.position.y>=-g||t.velocity.x>0&&t.position.x<=i.width+g||t.velocity.x<0&&t.position.x>=-g)return;G5(t.position,h.canvas.size,_l.origin,g,n)||h.particles.remove(t)}}}class s8e{constructor(t){this.container=t,this.modes=["out"]}update(t,n,r,s){if(!this.modes.includes(s))return;const c=this.container;switch(t.outType){case"inside":{const{x:h,y:i}=t.velocity,g=_l.origin;g.length=t.moveCenter.radius,g.angle=t.velocity.angle+Math.PI,g.addTo(_l.create(t.moveCenter));const{dx:w,dy:T}=Wc(t.position,g);if(h<=0&&w>=0||i<=0&&T>=0||h>=0&&w<=0||i>=0&&T<=0)return;t.position.x=Math.floor(hu({min:0,max:c.canvas.size.width})),t.position.y=Math.floor(hu({min:0,max:c.canvas.size.height}));const{dx:A,dy:D}=Wc(t.position,t.moveCenter);t.direction=Math.atan2(-D,-A),t.velocity.angle=t.direction;break}default:{if(G5(t.position,c.canvas.size,_l.origin,t.getRadius(),n))return;switch(t.outType){case"outside":{t.position.x=Math.floor(hu({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.x,t.position.y=Math.floor(hu({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.y;const{dx:h,dy:i}=Wc(t.position,t.moveCenter);t.moveCenter.radius&&(t.direction=Math.atan2(i,h),t.velocity.angle=t.direction);break}case"normal":{const h=t.options.move.warp,i=c.canvas.size,g={bottom:i.height+t.getRadius()+t.offset.y,left:-t.getRadius()-t.offset.x,right:i.width+t.getRadius()+t.offset.x,top:-t.getRadius()-t.offset.y},w=t.getRadius(),T=EE(t.position,w);n==="right"&&T.left>i.width+t.offset.x?(t.position.x=g.left,t.initialPosition.x=t.position.x,h||(t.position.y=Ss()*i.height,t.initialPosition.y=t.position.y)):n==="left"&&T.right<-t.offset.x&&(t.position.x=g.right,t.initialPosition.x=t.position.x,h||(t.position.y=Ss()*i.height,t.initialPosition.y=t.position.y)),n==="bottom"&&T.top>i.height+t.offset.y?(h||(t.position.x=Ss()*i.width,t.initialPosition.x=t.position.x),t.position.y=g.top,t.initialPosition.y=t.position.y):n==="top"&&T.bottom<-t.offset.y&&(h||(t.position.x=Ss()*i.width,t.initialPosition.x=t.position.x),t.position.y=g.bottom,t.initialPosition.y=t.position.y);break}}break}}}}class a8e{constructor(t){this.container=t,this._updateOutMode=(n,r,s,c)=>{for(const h of this.updaters)h.update(n,c,r,s)},this.updaters=[new r8e(t),new i8e(t),new s8e(t),new o8e(t)]}init(){}isEnabled(t){return!t.destroyed&&!t.spawning}update(t,n){const r=t.options.move.outModes;this._updateOutMode(t,n,r.bottom??r.default,"bottom"),this._updateOutMode(t,n,r.left??r.default,"left"),this._updateOutMode(t,n,r.right??r.default,"right"),this._updateOutMode(t,n,r.top??r.default,"top")}}async function l8e(e,t=!0){await e.addParticleUpdater("outModes",n=>new a8e(n),t)}function c8e(e,t,n,r){switch(e.options.size.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=n&&e.destroy();break}}function u8e(e,t){const n=e.size;if(e.destroyed||!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const r=(n.velocity??0)*t.factor,s=n.min,c=n.max,h=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=c?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=r;break;case"decreasing":n.value<=s?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=r}n.velocity&&h!==1&&(n.velocity*=h),c8e(e,n.value,s,c),e.destroyed||(n.value=Rf(n.value,s,c))}}class d8e{init(t){const n=t.container,r=t.options.size,s=r.animation;s.enable&&(t.size.velocity=(t.retina.sizeAnimationSpeed??n.retina.sizeAnimationSpeed)/100*n.retina.reduceFactor,s.sync||(t.size.velocity*=Ss()))}isEnabled(t){return!t.destroyed&&!t.spawning&&t.size.enable&&((t.size.maxLoops??0)<=0||(t.size.maxLoops??0)>0&&(t.size.loops??0)<(t.size.maxLoops??0))}reset(t){t.size.loops=0}update(t,n){this.isEnabled(t)&&u8e(t,n)}}async function h8e(e,t=!0){await e.addParticleUpdater("size",()=>new d8e,t)}async function f8e(e,t=!0){await Hqe(e,!1),await Wqe(e,!1),await Zqe(e,!1),await e8e(e,!1),await l8e(e,!1),await h8e(e,!1),await e.refresh(t)}async function p8e(){x3("ease-in-quad",e=>e**2),x3("ease-out-quad",e=>1-(1-e)**2),x3("ease-in-out-quad",e=>e<.5?2*e**2:1-(-2*e+2)**2/2)}class m8e{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}let g8e=class extends sm{constructor(t,n){super(n),this._clickAttract=()=>{const r=this.container;r.attract||(r.attract={particles:[]});const{attract:s}=r;if(s.finish||(s.count||(s.count=0),s.count++,s.count===r.particles.count&&(s.finish=!0)),s.clicking){const c=r.interactivity.mouse.clickPosition,h=r.retina.attractModeDistance;if(!h||h<0||!c)return;this._processAttract(c,h,new yc(c.x,c.y,h))}else s.clicking===!1&&(s.particles=[])},this._hoverAttract=()=>{const r=this.container,s=r.interactivity.mouse.position,c=r.retina.attractModeDistance;!c||c<0||!s||this._processAttract(s,c,new yc(s.x,s.y,c))},this._processAttract=(r,s,c)=>{const h=this.container,i=h.actualOptions.interactivity.modes.attract;if(!i)return;const g=h.particles.quadTree.query(c,w=>this.isEnabled(w));for(const w of g){const{dx:T,dy:A,distance:D}=Wc(w.position,r),k=i.speed*i.factor,I=Rf(cre(i.easing)(1-D/s)*k,0,i.maxSpeed),F=_l.create(D===0?k:T/D*I,D===0?k:A/D*I);w.position.subFrom(F)}},this._engine=t,n.attract||(n.attract={particles:[]}),this.handleClickMode=r=>{const s=this.container.actualOptions,c=s.interactivity.modes.attract;if(!(!c||r!=="attract")){n.attract||(n.attract={particles:[]}),n.attract.clicking=!0,n.attract.count=0;for(const h of n.attract.particles)this.isEnabled(h)&&h.velocity.setTo(h.initialVelocity);n.attract.particles=[],n.attract.finish=!1,setTimeout(()=>{n.destroyed||(n.attract||(n.attract={particles:[]}),n.attract.clicking=!1)},c.duration*1e3)}}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.attract;n&&(t.retina.attractModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,r=t.interactivity.status===I0,s=n.interactivity.events,c=s.onHover.enable,h=s.onHover.mode,i=s.onClick.enable,g=s.onClick.mode;r&&c&&ma("attract",h)?this._hoverAttract():i&&ma("attract",g)&&this._clickAttract()}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events;if((!s.position||!c.onHover.enable)&&(!s.clickPosition||!c.onClick.enable))return!1;const h=c.onHover.mode,i=c.onClick.mode;return ma("attract",h)||ma("attract",i)}loadModeOptions(t,...n){t.attract||(t.attract=new m8e);for(const r of n)t.attract.load(r==null?void 0:r.attract)}reset(){}};async function y8e(e,t=!0){await e.addInteractor("externalAttract",n=>new g8e(e,n),t)}class v8e{constructor(){this.distance=200}load(t){t&&t.distance!==void 0&&(this.distance=t.distance)}}class _8e extends sm{constructor(t){super(t),this._processBounce=(n,r,s)=>{const c=this.container.particles.quadTree.query(s,h=>this.isEnabled(h));for(const h of c)s instanceof yc?fre(PB(h),{position:n,mass:r**2*Math.PI/2,velocity:_l.origin,factor:_l.origin}):s instanceof Df&&m6e(h,EE(n,r))},this._processMouseBounce=()=>{const n=this.container,r=n.retina.pixelRatio,s=10*r,c=n.interactivity.mouse.position,h=n.retina.bounceModeDistance;!h||h<0||!c||this._processBounce(c,h,new yc(c.x,c.y,h+s))},this._singleSelectorBounce=(n,r)=>{const s=this.container,c=document.querySelectorAll(n);c.length&&c.forEach(h=>{const i=h,g=s.retina.pixelRatio,w={x:(i.offsetLeft+i.offsetWidth/2)*g,y:(i.offsetTop+i.offsetHeight/2)*g},T=i.offsetWidth/2*g,A=10*g,D=r.type==="circle"?new yc(w.x,w.y,T+A):new Df(i.offsetLeft*g-A,i.offsetTop*g-A,i.offsetWidth*g+A*2,i.offsetHeight*g+A*2);this._processBounce(w,T,D)})}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.bounce;n&&(t.retina.bounceModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,r=n.interactivity.events,s=t.interactivity.status===I0,c=r.onHover.enable,h=r.onHover.mode,i=r.onDiv;s&&c&&ma("bounce",h)?this._processMouseBounce():Y5("bounce",i,(g,w)=>this._singleSelectorBounce(g,w))}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events,h=c.onDiv;return s.position&&c.onHover.enable&&ma("bounce",c.onHover.mode)||W5("bounce",h)}loadModeOptions(t,...n){t.bounce||(t.bounce=new v8e);for(const r of n)t.bounce.load(r==null?void 0:r.bounce)}reset(){}}async function x8e(e,t=!0){await e.addInteractor("externalBounce",n=>new _8e(n),t)}class kre{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(t){if(t){if(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.mix!==void 0&&(this.mix=t.mix),t.opacity!==void 0&&(this.opacity=t.opacity),t.color!==void 0){const n=sd(this.color)?void 0:this.color;this.color=xl(t.color,r=>Nl.create(n,r))}t.size!==void 0&&(this.size=t.size)}}}class b8e extends kre{constructor(){super(),this.selectors=[]}get ids(){return xl(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=xl(t,n=>`#${n}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class w8e extends kre{load(t){super.load(t),t&&(this.divs=xl(t.divs,n=>{const r=new b8e;return r.load(n),r}))}}function tY(e,t,n,r){if(t>=n){const s=e+(t-n)*r;return Rf(s,e,t)}else if(t<n){const s=e-(n-t)*r;return Rf(s,t,e)}}class S8e extends sm{constructor(t){super(t),this._clickBubble=()=>{var w;const n=this.container,r=n.actualOptions,s=n.interactivity.mouse.clickPosition,c=r.interactivity.modes.bubble;if(!c||!s)return;n.bubble||(n.bubble={});const h=n.retina.bubbleModeDistance;if(!h||h<0)return;const i=n.particles.quadTree.queryCircle(s,h,T=>this.isEnabled(T)),{bubble:g}=n;for(const T of i){if(!g.clicking)continue;T.bubble.inRange=!g.durationEnd;const A=T.getPosition(),D=od(A,s),k=(new Date().getTime()-(n.interactivity.mouse.clickTime||0))/1e3;k>c.duration&&(g.durationEnd=!0),k>c.duration*2&&(g.clicking=!1,g.durationEnd=!1);const I={bubbleObj:{optValue:n.retina.bubbleModeSize,value:T.bubble.radius},particlesObj:{optValue:qy(T.options.size.value)*n.retina.pixelRatio,value:T.size.value},type:"size"};this._process(T,D,k,I);const F={bubbleObj:{optValue:c.opacity,value:T.bubble.opacity},particlesObj:{optValue:qy(T.options.opacity.value),value:((w=T.opacity)==null?void 0:w.value)??1},type:"opacity"};this._process(T,D,k,F),!g.durationEnd&&D<=h?this._hoverBubbleColor(T,D):delete T.bubble.color}},this._hoverBubble=()=>{const n=this.container,r=n.interactivity.mouse.position,s=n.retina.bubbleModeDistance;if(!s||s<0||r===void 0)return;const c=n.particles.quadTree.queryCircle(r,s,h=>this.isEnabled(h));for(const h of c){h.bubble.inRange=!0;const i=h.getPosition(),g=od(i,r),w=1-g/s;g<=s?w>=0&&n.interactivity.status===I0&&(this._hoverBubbleSize(h,w),this._hoverBubbleOpacity(h,w),this._hoverBubbleColor(h,w)):this.reset(h),n.interactivity.status===RB&&this.reset(h)}},this._hoverBubbleColor=(n,r,s)=>{const c=this.container.actualOptions,h=s??c.interactivity.modes.bubble;if(h){if(!n.bubble.finalColor){const i=h.color;if(!i)return;const g=Ag(i);n.bubble.finalColor=OT(g)}if(n.bubble.finalColor)if(h.mix){n.bubble.color=void 0;const i=n.getFillColor();n.bubble.color=i?_re(X5(i,n.bubble.finalColor,1-r,r)):n.bubble.finalColor}else n.bubble.color=n.bubble.finalColor}},this._hoverBubbleOpacity=(n,r,s)=>{var A,D;const c=this.container,h=c.actualOptions,i=(s==null?void 0:s.opacity)??((A=h.interactivity.modes.bubble)==null?void 0:A.opacity);if(!i)return;const g=n.options.opacity.value,w=((D=n.opacity)==null?void 0:D.value)??1,T=tY(w,i,qy(g),r);T!==void 0&&(n.bubble.opacity=T)},this._hoverBubbleSize=(n,r,s)=>{const c=this.container,h=s!=null&&s.size?s.size*c.retina.pixelRatio:c.retina.bubbleModeSize;if(h===void 0)return;const i=qy(n.options.size.value)*c.retina.pixelRatio,g=n.size.value,w=tY(g,h,i,r);w!==void 0&&(n.bubble.radius=w)},this._process=(n,r,s,c)=>{const h=this.container,i=c.bubbleObj.optValue,g=h.actualOptions,w=g.interactivity.modes.bubble;if(!w||i===void 0)return;const T=w.duration,A=h.retina.bubbleModeDistance,D=c.particlesObj.optValue,k=c.bubbleObj.value,I=c.particlesObj.value||0,F=c.type;if(!(!A||A<0||i===D))if(h.bubble||(h.bubble={}),h.bubble.durationEnd)k&&(F==="size"&&delete n.bubble.radius,F==="opacity"&&delete n.bubble.opacity);else if(r<=A){if((k??I)!==i){const V=I-s*(I-i)/T;F==="size"&&(n.bubble.radius=V),F==="opacity"&&(n.bubble.opacity=V)}}else F==="size"&&delete n.bubble.radius,F==="opacity"&&delete n.bubble.opacity},this._singleSelectorHover=(n,r,s)=>{const c=this.container,h=document.querySelectorAll(r),i=c.actualOptions.interactivity.modes.bubble;!i||!h.length||h.forEach(g=>{const w=g,T=c.retina.pixelRatio,A={x:(w.offsetLeft+w.offsetWidth/2)*T,y:(w.offsetTop+w.offsetHeight/2)*T},D=w.offsetWidth/2*T,k=s.type==="circle"?new yc(A.x,A.y,D):new Df(w.offsetLeft*T,w.offsetTop*T,w.offsetWidth*T,w.offsetHeight*T),I=c.particles.quadTree.query(k,F=>this.isEnabled(F));for(const F of I){if(!k.contains(F.getPosition()))continue;F.bubble.inRange=!0;const j=i.divs,V=hre(j,w);(!F.bubble.div||F.bubble.div!==w)&&(this.clear(F,n,!0),F.bubble.div=w),this._hoverBubbleSize(F,1,V),this._hoverBubbleOpacity(F,1,V),this._hoverBubbleColor(F,1,V)}})},t.bubble||(t.bubble={}),this.handleClickMode=n=>{n==="bubble"&&(t.bubble||(t.bubble={}),t.bubble.clicking=!0)}}clear(t,n,r){t.bubble.inRange&&!r||(delete t.bubble.div,delete t.bubble.opacity,delete t.bubble.radius,delete t.bubble.color)}init(){const t=this.container,n=t.actualOptions.interactivity.modes.bubble;n&&(t.retina.bubbleModeDistance=n.distance*t.retina.pixelRatio,n.size!==void 0&&(t.retina.bubbleModeSize=n.size*t.retina.pixelRatio))}async interact(t){const n=this.container.actualOptions,r=n.interactivity.events,s=r.onHover,c=r.onClick,h=s.enable,i=s.mode,g=c.enable,w=c.mode,T=r.onDiv;h&&ma("bubble",i)?this._hoverBubble():g&&ma("bubble",w)?this._clickBubble():Y5("bubble",T,(A,D)=>this._singleSelectorHover(t,A,D))}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events,{onClick:h,onDiv:i,onHover:g}=c,w=W5("bubble",i);return w||g.enable&&s.position||h.enable&&s.clickPosition?ma("bubble",g.mode)||ma("bubble",h.mode)||w:!1}loadModeOptions(t,...n){t.bubble||(t.bubble=new w8e);for(const r of n)t.bubble.load(r==null?void 0:r.bubble)}reset(t){t.bubble.inRange=!1}}async function T8e(e,t=!0){await e.addInteractor("externalBubble",n=>new S8e(n),t)}class E8e{constructor(){this.opacity=.5}load(t){t&&t.opacity!==void 0&&(this.opacity=t.opacity)}}class C8e{constructor(){this.distance=80,this.links=new E8e,this.radius=60}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked),t.radius!==void 0&&(this.radius=t.radius))}}function A8e(e,t,n,r){const s=Math.floor(n.getRadius()/t.getRadius()),c=t.getFillColor(),h=n.getFillColor();if(!c||!h)return;const i=t.getPosition(),g=n.getPosition(),w=X5(c,h,t.getRadius(),n.getRadius()),T=e.createLinearGradient(i.x,i.y,g.x,g.y);return T.addColorStop(0,LT(c,r)),T.addColorStop(s>1?1:s,Mg(w,r)),T.addColorStop(1,LT(h,r)),T}function M8e(e,t,n,r,s){HS(e,r,s),e.lineWidth=t,e.strokeStyle=n,e.stroke()}function R8e(e,t,n,r){const s=e.actualOptions,c=s.interactivity.modes.connect;if(c)return A8e(t,n,r,c.links.opacity)}function D8e(e,t,n){e.canvas.draw(r=>{const s=R8e(e,r,t,n);if(!s)return;const c=t.getPosition(),h=n.getPosition();M8e(r,t.retina.linksWidth??0,s,c,h)})}class P8e extends sm{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.connect;n&&(t.retina.connectModeDistance=n.distance*t.retina.pixelRatio,t.retina.connectModeRadius=n.radius*t.retina.pixelRatio)}async interact(){const t=this.container;if(t.actualOptions.interactivity.events.onHover.enable&&t.interactivity.status==="pointermove"){const r=t.interactivity.mouse.position;if(!t.retina.connectModeDistance||t.retina.connectModeDistance<0||!t.retina.connectModeRadius||t.retina.connectModeRadius<0||!r)return;const s=Math.abs(t.retina.connectModeRadius),c=t.particles.quadTree.queryCircle(r,s,i=>this.isEnabled(i));let h=0;for(const i of c){const g=i.getPosition();for(const w of c.slice(h+1)){const T=w.getPosition(),A=Math.abs(t.retina.connectModeDistance),D=Math.abs(g.x-T.x),k=Math.abs(g.y-T.y);D<A&&k<A&&D8e(t,i,w)}++h}}}isEnabled(t){const n=this.container,r=n.interactivity.mouse,s=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&r.position?ma("connect",s.onHover.mode):!1}loadModeOptions(t,...n){t.connect||(t.connect=new C8e);for(const r of n)t.connect.load(r==null?void 0:r.connect)}reset(){}}async function I8e(e,t=!0){await e.addInteractor("externalConnect",n=>new P8e(n),t)}class k8e{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(t){t&&(t.blink!==void 0&&(this.blink=t.blink),t.color!==void 0&&(this.color=Nl.create(this.color,t.color)),t.consent!==void 0&&(this.consent=t.consent),t.opacity!==void 0&&(this.opacity=t.opacity))}}class O8e{constructor(){this.distance=100,this.links=new k8e}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked))}}function L8e(e,t,n,r,s,c){HS(e,n,r),e.strokeStyle=Mg(s,c),e.lineWidth=t,e.stroke()}function z8e(e,t,n,r,s){e.canvas.draw(c=>{const h=t.getPosition();L8e(c,t.retina.linksWidth??0,h,s,n,r)})}class F8e extends sm{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.grab;n&&(t.retina.grabModeDistance=n.distance*t.retina.pixelRatio)}async interact(){var i;const t=this.container,n=t.actualOptions,r=n.interactivity;if(!r.modes.grab||!r.events.onHover.enable||t.interactivity.status!==I0)return;const s=t.interactivity.mouse.position;if(!s)return;const c=t.retina.grabModeDistance;if(!c||c<0)return;const h=t.particles.quadTree.queryCircle(s,c,g=>this.isEnabled(g));for(const g of h){const w=g.getPosition(),T=od(w,s);if(T>c)continue;const A=r.modes.grab.links,D=A.opacity,k=D-T*D/c;if(k<=0)continue;const I=A.color??((i=g.options.links)==null?void 0:i.color);if(!t.particles.grabLineColor&&I){const j=r.modes.grab.links;t.particles.grabLineColor=bre(I,j.blink,j.consent)}const F=IB(g,void 0,t.particles.grabLineColor);F&&z8e(t,g,F,k,s)}}isEnabled(t){const n=this.container,r=n.interactivity.mouse,s=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&!!r.position&&ma("grab",s.onHover.mode)}loadModeOptions(t,...n){t.grab||(t.grab=new O8e);for(const r of n)t.grab.load(r==null?void 0:r.grab)}reset(){}}async function B8e(e,t=!0){await e.addInteractor("externalGrab",n=>new F8e(n),t)}class N8e extends sm{constructor(t){super(t),this.handleClickMode=n=>{if(n!=="pause")return;const r=this.container;r.getAnimationStatus()?r.pause():r.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function j8e(e,t=!0){await e.addInteractor("externalPause",n=>new N8e(n),t)}class V8e{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=ro(t)}load(t){if(!t)return;t.default!==void 0&&(this.default=t.default),t.groups!==void 0&&(this.groups=t.groups.map(r=>r)),this.groups.length||(this.default=!0);const n=t.quantity??t.particles_nb;n!==void 0&&(this.quantity=ro(n))}}class U8e extends sm{constructor(t){super(t),this.handleClickMode=n=>{if(n!=="push")return;const r=this.container,s=r.actualOptions,c=s.interactivity.modes.push;if(!c)return;const h=xi(c.quantity);if(h<=0)return;const i=QD([void 0,...c.groups]),g=i!==void 0?r.actualOptions.particles.groups[i]:void 0;r.particles.push(h,r.interactivity.mouse,g,i)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...n){t.push||(t.push=new V8e);for(const r of n)t.push.load(r==null?void 0:r.push)}reset(){}}async function $8e(e,t=!0){await e.addInteractor("externalPush",n=>new U8e(n),t)}class q8e{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=ro(t)}load(t){if(!t)return;const n=t.quantity??t.particles_nb;n!==void 0&&(this.quantity=ro(n))}}class H8e extends sm{constructor(t){super(t),this.handleClickMode=n=>{const r=this.container,s=r.actualOptions;if(!s.interactivity.modes.remove||n!=="remove")return;const c=xi(s.interactivity.modes.remove.quantity);r.particles.removeQuantity(c)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...n){t.remove||(t.remove=new q8e);for(const r of n)t.remove.load(r==null?void 0:r.remove)}reset(){}}async function G8e(e,t=!0){await e.addInteractor("externalRemove",n=>new H8e(n),t)}class Ore{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.speed!==void 0&&(this.speed=t.speed),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed))}}class W8e extends Ore{constructor(){super(),this.selectors=[]}get ids(){return xl(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=xl(t,n=>`#${n}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class Y8e extends Ore{load(t){super.load(t),t&&(this.divs=xl(t.divs,n=>{const r=new W8e;return r.load(n),r}))}}class X8e extends sm{constructor(t,n){super(n),this._clickRepulse=()=>{const r=this.container,s=r.actualOptions.interactivity.modes.repulse;if(!s)return;const c=r.repulse||{particles:[]};if(c.finish||(c.count||(c.count=0),c.count++,c.count===r.particles.count&&(c.finish=!0)),c.clicking){const h=r.retina.repulseModeDistance;if(!h||h<0)return;const i=Math.pow(h/6,3),g=r.interactivity.mouse.clickPosition;if(g===void 0)return;const w=new yc(g.x,g.y,i),T=r.particles.quadTree.query(w,A=>this.isEnabled(A));for(const A of T){const{dx:D,dy:k,distance:I}=Wc(g,A.position),F=I**2,j=s.speed,V=-i*j/F;if(F<=i){c.particles.push(A);const W=_l.create(D,k);W.length=V,A.velocity.setTo(W)}}}else if(c.clicking===!1){for(const h of c.particles)h.velocity.setTo(h.initialVelocity);c.particles=[]}},this._hoverRepulse=()=>{const r=this.container,s=r.interactivity.mouse.position,c=r.retina.repulseModeDistance;!c||c<0||!s||this._processRepulse(s,c,new yc(s.x,s.y,c))},this._processRepulse=(r,s,c,h)=>{const i=this.container,g=i.particles.quadTree.query(c,T=>this.isEnabled(T)),w=i.actualOptions.interactivity.modes.repulse;if(w)for(const T of g){const{dx:A,dy:D,distance:k}=Wc(T.position,r),I=((h==null?void 0:h.speed)??w.speed)*w.factor,F=Rf(cre(w.easing)(1-k/s)*I,0,w.maxSpeed),j=_l.create(k===0?I:A/k*F,k===0?I:D/k*F);T.position.addTo(j)}},this._singleSelectorRepulse=(r,s)=>{const c=this.container,h=c.actualOptions.interactivity.modes.repulse;if(!h)return;const i=document.querySelectorAll(r);i.length&&i.forEach(g=>{const w=g,T=c.retina.pixelRatio,A={x:(w.offsetLeft+w.offsetWidth/2)*T,y:(w.offsetTop+w.offsetHeight/2)*T},D=w.offsetWidth/2*T,k=s.type==="circle"?new yc(A.x,A.y,D):new Df(w.offsetLeft*T,w.offsetTop*T,w.offsetWidth*T,w.offsetHeight*T),I=h.divs,F=hre(I,w);this._processRepulse(A,D,k,F)})},this._engine=t,n.repulse||(n.repulse={particles:[]}),this.handleClickMode=r=>{const s=this.container.actualOptions,c=s.interactivity.modes.repulse;if(!c||r!=="repulse")return;n.repulse||(n.repulse={particles:[]});const h=n.repulse;h.clicking=!0,h.count=0;for(const i of n.repulse.particles)this.isEnabled(i)&&i.velocity.setTo(i.initialVelocity);h.particles=[],h.finish=!1,setTimeout(()=>{n.destroyed||(h.clicking=!1)},c.duration*1e3)}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.repulse;n&&(t.retina.repulseModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,r=t.interactivity.status===I0,s=n.interactivity.events,c=s.onHover,h=c.enable,i=c.mode,g=s.onClick,w=g.enable,T=g.mode,A=s.onDiv;r&&h&&ma("repulse",i)?this._hoverRepulse():w&&ma("repulse",T)?this._clickRepulse():Y5("repulse",A,(D,k)=>this._singleSelectorRepulse(D,k))}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events,h=c.onDiv,i=c.onHover,g=c.onClick,w=W5("repulse",h);if(!(w||i.enable&&s.position||g.enable&&s.clickPosition))return!1;const T=i.mode,A=g.mode;return ma("repulse",T)||ma("repulse",A)||w}loadModeOptions(t,...n){t.repulse||(t.repulse=new Y8e);for(const r of n)t.repulse.load(r==null?void 0:r.repulse)}reset(){}}async function Z8e(e,t=!0){await e.addInteractor("externalRepulse",n=>new X8e(e,n),t)}class K8e{constructor(){this.factor=3,this.radius=200}load(t){t&&(t.factor!==void 0&&(this.factor=t.factor),t.radius!==void 0&&(this.radius=t.radius))}}class Q8e extends sm{constructor(t){super(t)}clear(t,n,r){t.slow.inRange&&!r||(t.slow.factor=1)}init(){const t=this.container,n=t.actualOptions.interactivity.modes.slow;n&&(t.retina.slowModeRadius=n.radius*t.retina.pixelRatio)}async interact(){}isEnabled(t){const n=this.container,r=n.interactivity.mouse,s=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&!!r.position&&ma("slow",s.onHover.mode)}loadModeOptions(t,...n){t.slow||(t.slow=new K8e);for(const r of n)t.slow.load(r==null?void 0:r.slow)}reset(t){t.slow.inRange=!1;const n=this.container,r=n.actualOptions,s=n.interactivity.mouse.position,c=n.retina.slowModeRadius,h=r.interactivity.modes.slow;if(!h||!c||c<0||!s)return;const i=t.getPosition(),g=od(s,i),w=g/c,T=h.factor,{slow:A}=t;g>c||(A.inRange=!0,A.factor=w/T)}}async function J8e(e,t=!0){await e.addInteractor("externalSlow",n=>new Q8e(n),t)}const O3=[0,4,2,1],nY=[8,8,4,2];class eHe{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t)}getString(t){const n=this.data.slice(this.pos,this.pos+t);return this.pos+=n.length,n.reduce((r,s)=>r+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let t="",n=0;do{n=this.data[this.pos++];for(let r=n;--r>=0;t+=String.fromCharCode(this.data[this.pos++]));}while(n!==0);return t}readSubBlocksBin(){let t=0,n=0;for(let s=0;(t=this.data[this.pos+s])!==0;s+=t+1)n+=t;const r=new Uint8Array(n);for(let s=0;(t=this.data[this.pos++])!==0;)for(let c=t;--c>=0;r[s++]=this.data[this.pos++]);return r}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function Lre(e,t){const n=[];for(let r=0;r<t;r++)n.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return n}async function tHe(e,t,n,r){switch(e.nextByte()){case 249:{const s=t.frames[n(!1)];e.pos++;const c=e.nextByte();s.GCreserved=(c&224)>>>5,s.disposalMethod=(c&28)>>>2,s.userInputDelayFlag=(c&2)===2;const h=(c&1)===1;s.delayTime=e.nextTwoBytes()*10;const i=e.nextByte();h&&r(i),e.pos++;break}case 255:{e.pos++;const s={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(s);break}case 254:{t.comments.push([n(!1),e.readSubBlocks()]);break}case 1:{if(t.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[n(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break}default:e.skipSubBlocks();break}}async function nHe(e,t,n,r,s,c){const h=t.frames[r(!0)];h.left=e.nextTwoBytes(),h.top=e.nextTwoBytes(),h.width=e.nextTwoBytes(),h.height=e.nextTwoBytes();const i=e.nextByte(),g=(i&128)===128,w=(i&64)===64;h.sortFlag=(i&32)===32,h.reserved=(i&24)>>>3;const T=1<<(i&7)+1;g&&(h.localColorTable=Lre(e,T));const A=V=>{const{r:W,g:Z,b:K}=(g?h.localColorTable:t.globalColorTable)[V];return{r:W,g:Z,b:K,a:V===s(null)?n?~~((W+Z+K)/3):0:255}},D=(()=>{try{return new ImageData(h.width,h.height,{colorSpace:"srgb"})}catch(V){if(V instanceof DOMException&&V.name==="IndexSizeError")return null;throw V}})();if(D==null)throw new EvalError("GIF frame size is to large");const k=e.nextByte(),I=e.readSubBlocksBin(),F=1<<k,j=(V,W)=>{const Z=V>>>3,K=V&7;return(I[Z]+(I[Z+1]<<8)+(I[Z+2]<<16)&(1<<W)-1<<K)>>>K};if(w){for(let V=0,W=k+1,Z=0,K=[[0]],ee=0;ee<4;ee++)if(O3[ee]<h.height)for(let se=0,he=0;;){const ye=V;if(V=j(Z,W),Z+=W+1,V===F){W=k+1,K.length=F+2;for(let _e=0;_e<K.length;_e++)K[_e]=_e<F?[_e]:[]}else{V>=K.length?K.push(K[ye].concat(K[ye][0])):ye!==F&&K.push(K[ye].concat(K[V][0]));for(let _e=0;_e<K[V].length;_e++){const{r:ae,g:be,b:Te,a:Ae}=A(K[V][_e]);D.data.set([ae,be,Te,Ae],O3[ee]*h.width+nY[ee]*he+se%(h.width*4)),se+=4}K.length===1<<W&&W<12&&W++}if(se===h.width*4*(he+1)&&(he++,O3[ee]+nY[ee]*he>=h.height))break}h.image=D,h.bitmap=await createImageBitmap(D)}else{for(let V=0,W=k+1,Z=0,K=[[0]],ee=-4;;){const se=V;if(V=j(Z,W),Z+=W,V===F){W=k+1,K.length=F+2;for(let he=0;he<K.length;he++)K[he]=he<F?[he]:[]}else{if(V===F+1)break;V>=K.length?K.push(K[se].concat(K[se][0])):se!==F&&K.push(K[se].concat(K[V][0]));for(let he=0;he<K[V].length;he++){const{r:ye,g:_e,b:ae,a:be}=A(K[V][he]);D.data.set([ye,_e,ae,be],ee+=4)}K.length>=1<<W&&W<12&&W++}}h.image=D,h.bitmap=await createImageBitmap(D)}}async function rHe(e,t,n,r,s,c){switch(e.nextByte()){case 59:return!0;case 44:await nHe(e,t,n,r,s);break;case 33:await tHe(e,t,r,s);break;default:throw new EvalError("undefined block found")}return!1}function iHe(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}async function oHe(e,t,n){n||(n=!1);const r=await fetch(e);if(!r.ok&&r.status===404)throw new EvalError("file not found");const s=await r.arrayBuffer(),c={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},h=new eHe(new Uint8ClampedArray(s));if(h.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");c.width=h.nextTwoBytes(),c.height=h.nextTwoBytes();const i=h.nextByte(),g=(i&128)===128;c.colorRes=(i&112)>>>4,c.sortFlag=(i&8)===8;const w=1<<(i&7)+1,T=h.nextByte();c.pixelAspectRatio=h.nextByte(),c.pixelAspectRatio!==0&&(c.pixelAspectRatio=(c.pixelAspectRatio+15)/64),g&&(c.globalColorTable=Lre(h,w));const A=(()=>{try{return new ImageData(c.width,c.height,{colorSpace:"srgb"})}catch(K){if(K instanceof DOMException&&K.name==="IndexSizeError")return null;throw K}})();if(A==null)throw new Error("GIF frame size is to large");const{r:D,g:k,b:I}=c.globalColorTable[T];A.data.set(g?[D,k,I,255]:[0,0,0,0]);for(let K=4;K<A.data.length;K*=2)A.data.copyWithin(K,0,K);c.backgroundImage=A;let F=-1,j=!0,V=-1;const W=K=>(K&&(j=!0),F),Z=K=>(K!=null&&(V=K),V);try{do j&&(c.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),F++,V=-1,j=!1);while(!await rHe(h,c,n,W,Z,t));c.frames.length--;for(const K of c.frames){if(K.userInputDelayFlag&&K.delayTime===0){c.totalTime=1/0;break}c.totalTime+=K.delayTime}return c}catch(K){throw K instanceof EvalError?new Error(`error while parsing frame ${F} "${K.message}"`):K}}const sHe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function aHe(e,t,n){const{svgData:r}=e;if(!r)return"";const s=LT(t,n);if(r.includes("fill"))return r.replace(sHe,()=>s);const c=r.indexOf(">");return`${r.substring(0,c)} fill="${s}"${r.substring(c)}`}async function eP(e){return new Promise(t=>{e.loading=!0;const n=new Image;e.element=n,n.addEventListener("load",()=>{e.loading=!1,t()}),n.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,O0().error(`${ph} loading image: ${e.source}`),t()}),n.src=e.source})}async function lHe(e){if(e.type!=="gif"){await eP(e);return}e.loading=!0;try{e.gifData=await oHe(e.source),e.gifLoopCount=iHe(e.gifData)??0,e.gifLoopCount===0&&(e.gifLoopCount=1/0)}catch{e.error=!0}e.loading=!1}async function cHe(e){if(e.type!=="svg"){await eP(e);return}e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(O0().error(`${ph} Image not found`),e.error=!0),e.loading=!1}function uHe(e,t,n,r){var h;const s=aHe(e,n,((h=r.opacity)==null?void 0:h.value)??1),c={color:n,gif:t.gif,data:{...e,svgData:s},loaded:!1,ratio:t.width/t.height,replaceColor:t.replaceColor??t.replace_color,source:t.src};return new Promise(i=>{const g=new Blob([s],{type:"image/svg+xml"}),w=URL||window.URL||window.webkitURL||window,T=w.createObjectURL(g),A=new Image;A.addEventListener("load",()=>{c.loaded=!0,c.element=A,i(c),w.revokeObjectURL(T)}),A.addEventListener("error",async()=>{w.revokeObjectURL(T);const D={...e,error:!1,loading:!0};await eP(D),c.loaded=!0,c.element=D.element,i(c)}),A.src=T})}class dHe{constructor(t){this.loadImageShape=async n=>{if(!this._engine.loadImage)throw new Error(`${ph} image shape not initialized`);await this._engine.loadImage({gif:n.gif,name:n.name,replaceColor:n.replaceColor??n.replace_color??!1,src:n.src})},this._engine=t}addImage(t){this._engine.images||(this._engine.images=[]),this._engine.images.push(t)}draw(t,n,r,s,c){const h=n.image,i=h==null?void 0:h.element;if(h){if(t.globalAlpha=s,h.gif&&h.gifData){const g=new OffscreenCanvas(h.gifData.width,h.gifData.height),w=g.getContext("2d");if(!w)throw new Error("could not create offscreen canvas context");w.imageSmoothingQuality="low",w.imageSmoothingEnabled=!1,w.clearRect(0,0,g.width,g.height),n.gifLoopCount===void 0&&(n.gifLoopCount=h.gifLoopCount??0);let T=n.gifFrame??0;const A={x:-h.gifData.width*.5,y:-h.gifData.height*.5},D=h.gifData.frames[T];if(n.gifTime===void 0&&(n.gifTime=0),!D.bitmap)return;switch(t.scale(r/h.gifData.width,r/h.gifData.height),D.disposalMethod){case 4:case 5:case 6:case 7:case 0:w.drawImage(D.bitmap,D.left,D.top),t.drawImage(g,A.x,A.y),w.clearRect(0,0,g.width,g.height);break;case 1:w.drawImage(D.bitmap,D.left,D.top),t.drawImage(g,A.x,A.y);break;case 2:w.drawImage(D.bitmap,D.left,D.top),t.drawImage(g,A.x,A.y),w.clearRect(0,0,g.width,g.height),h.gifData.globalColorTable.length===0?w.putImageData(h.gifData.frames[0].image,A.x+D.left,A.y+D.top):w.putImageData(h.gifData.backgroundImage,A.x,A.y);break;case 3:{const k=w.getImageData(0,0,g.width,g.height);w.drawImage(D.bitmap,D.left,D.top),t.drawImage(g,A.x,A.y),w.clearRect(0,0,g.width,g.height),w.putImageData(k,0,0)}break}if(n.gifTime+=c.value,n.gifTime>D.delayTime){if(n.gifTime-=D.delayTime,++T>=h.gifData.frames.length){if(--n.gifLoopCount<=0)return;T=0,w.clearRect(0,0,g.width,g.height)}n.gifFrame=T}t.scale(h.gifData.width/r,h.gifData.height/r)}else if(i){const g=h.ratio,w={x:-r,y:-r};t.drawImage(i,w.x,w.y,r*2,r*2/g)}t.globalAlpha=1}}getSidesCount(){return 12}async init(t){const n=t.actualOptions;if(!(!n.preload||!this._engine.loadImage))for(const r of n.preload)await this._engine.loadImage(r)}loadShape(t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const n=t.shapeData;this._engine.images.find(s=>s.name===n.name||s.source===n.src)||this.loadImageShape(n).then(()=>{this.loadShape(t)})}particleInit(t,n){if(n.shape!=="image"&&n.shape!=="images")return;this._engine.images||(this._engine.images=[]);const r=this._engine.images,s=n.shapeData,c=n.getFillColor(),h=r.find(g=>g.name===s.name||g.source===s.src);if(!h)return;const i=s.replaceColor??s.replace_color??h.replaceColor;if(h.loading){setTimeout(()=>{this.particleInit(t,n)});return}(async()=>{let g;h.svgData&&c?g=await uHe(h,s,c,n):g={color:c,data:h,element:h.element,gif:h.gif,gifData:h.gifData,gifLoopCount:h.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:h.ratio??1,replaceColor:i,source:s.src},g.ratio||(g.ratio=1);const w=s.fill??n.fill,T=s.close??n.close,A={image:g,fill:w,close:T};n.image=A.image,n.fill=A.fill,n.close=A.close})()}}class hHe{constructor(){this.src="",this.gif=!1}load(t){t&&(t.gif!==void 0&&(this.gif=t.gif),t.height!==void 0&&(this.height=t.height),t.name!==void 0&&(this.name=t.name),t.replaceColor!==void 0&&(this.replaceColor=t.replaceColor),t.src!==void 0&&(this.src=t.src),t.width!==void 0&&(this.width=t.width))}}class fHe{constructor(t){this.id="imagePreloader",this._engine=t}getPlugin(){return{}}loadOptions(t,n){if(!n||!n.preload)return;t.preload||(t.preload=[]);const r=t.preload;for(const s of n.preload){const c=r.find(h=>h.name===s.name||h.src===s.src);if(c)c.load(s);else{const h=new hHe;h.load(s),r.push(h)}}}needsPlugin(){return!0}}function pHe(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error(`${ph} no image source provided`);if(e.images||(e.images=[]),!e.images.find(n=>n.name===t.name||n.source===t.src))try{const n={gif:t.gif??!1,name:t.name??t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};e.images.push(n),await(t.gif?lHe:t.replaceColor?cHe:eP)(n)}catch{throw new Error(`${ph} ${t.name??t.src} not found`)}})}async function mHe(e,t=!0){pHe(e);const n=new fHe(e);await e.addPlugin(n,t),await e.addShape(["image","images"],new dHe(e),t)}class gHe extends bv{constructor(){super(),this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class yHe extends bv{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class vHe{constructor(){this.count=0,this.delay=new gHe,this.duration=new yHe}load(t){t&&(t.count!==void 0&&(this.count=t.count),this.delay.load(t.delay),this.duration.load(t.duration))}}class _He{constructor(t){this.container=t}init(t){const n=this.container,r=t.options,s=r.life;s&&(t.life={delay:n.retina.reduceFactor?xi(s.delay.value)*(s.delay.sync?1:Ss())/n.retina.reduceFactor*1e3:0,delayTime:0,duration:n.retina.reduceFactor?xi(s.duration.value)*(s.duration.sync?1:Ss())/n.retina.reduceFactor*1e3:0,time:0,count:s.count},t.life.duration<=0&&(t.life.duration=-1),t.life.count<=0&&(t.life.count=-1),t.life&&(t.spawning=t.life.delay>0))}isEnabled(t){return!t.destroyed}loadOptions(t,...n){t.life||(t.life=new vHe);for(const r of n)t.life.load(r==null?void 0:r.life)}update(t,n){if(!this.isEnabled(t)||!t.life)return;const r=t.life;let s=!1;if(t.spawning)if(r.delayTime+=n.value,r.delayTime>=t.life.delay)s=!0,t.spawning=!1,r.delayTime=0,r.time=0;else return;if(r.duration===-1||t.spawning||(s?r.time=0:r.time+=n.value,r.time<r.duration))return;if(r.time=0,t.life.count>0&&t.life.count--,t.life.count===0){t.destroy();return}const c=this.container.canvas.size,h=ro(0,c.width),i=ro(0,c.width);t.position.x=hu(h),t.position.y=hu(i),t.spawning=!0,r.delayTime=0,r.time=0,t.reset();const g=t.options.life;g&&(r.delay=xi(g.delay.value)*1e3,r.duration=xi(g.duration.value)*1e3)}}async function xHe(e,t=!0){await e.addParticleUpdater("life",n=>new _He(n),t)}class bHe{draw(t,n,r){const s=n.shapeData;t.moveTo(-r/2,0),t.lineTo(r/2,0),t.lineCap=(s==null?void 0:s.cap)??"butt"}getSidesCount(){return 1}}async function wHe(e,t=!0){await e.addShape("line",new bHe,t)}class SHe{init(){}isEnabled(t){return!i1()&&!t.destroyed&&t.container.actualOptions.interactivity.events.onHover.parallax.enable}move(t){const n=t.container,r=n.actualOptions,s=r.interactivity.events.onHover.parallax;if(i1()||!s.enable)return;const c=s.force,h=n.interactivity.mouse.position;if(!h)return;const i=n.canvas.size,g={x:i.width/2,y:i.height/2},w=s.smooth,T=t.getRadius()/c,A={x:(h.x-g.x)*T,y:(h.y-g.y)*T},{offset:D}=t;D.x+=(A.x-D.x)/w,D.y+=(A.y-D.y)/w}}async function THe(e,t=!0){await e.addMover("parallax",()=>new SHe,t)}class EHe extends Z5{constructor(t){super(t)}clear(){}init(){}async interact(t){const n=this.container,r=t.retina.attractDistance??n.retina.attractDistance,s=t.getPosition(),c=n.particles.quadTree.queryCircle(s,r);for(const h of c){if(t===h||!h.options.move.attract.enable||h.destroyed||h.spawning)continue;const i=h.getPosition(),{dx:g,dy:w}=Wc(s,i),T=t.options.move.attract.rotate,A=g/(T.x*1e3),D=w/(T.y*1e3),k=h.size.value/t.size.value,I=1/k;t.velocity.x-=A*k,t.velocity.y-=D*k,h.velocity.x+=A*I,h.velocity.y+=D*I}}isEnabled(t){return t.options.move.attract.enable}reset(){}}async function CHe(e,t=!0){await e.addInteractor("particlesAttract",n=>new EHe(n),t)}function rY(e,t,n,r,s,c){const h=Rf(e.options.collisions.absorb.speed*s.factor/10,0,r);e.size.value+=h/2,n.size.value-=h,r<=c&&(n.size.value=0,n.destroy())}function AHe(e,t,n,r){const s=e.getRadius(),c=t.getRadius();s===void 0&&c!==void 0?e.destroy():s!==void 0&&c===void 0?t.destroy():s!==void 0&&c!==void 0&&(s>=c?rY(e,s,t,c,n,r):rY(t,c,e,s,n,r))}const iY=e=>{e.collisionMaxSpeed===void 0&&(e.collisionMaxSpeed=xi(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function zre(e,t){fre(PB(e),PB(t)),iY(e),iY(t)}function MHe(e,t){!e.unbreakable&&!t.unbreakable&&zre(e,t),e.getRadius()===void 0&&t.getRadius()!==void 0?e.destroy():e.getRadius()!==void 0&&t.getRadius()===void 0?t.destroy():e.getRadius()!==void 0&&t.getRadius()!==void 0&&(e.getRadius()>=t.getRadius()?t:e).destroy()}function RHe(e,t,n,r){switch(e.options.collisions.mode){case"absorb":{AHe(e,t,n,r);break}case"bounce":{zre(e,t);break}case"destroy":{MHe(e,t);break}}}class DHe extends Z5{constructor(t){super(t)}clear(){}init(){}async interact(t,n){if(t.destroyed||t.spawning)return;const r=this.container,s=t.getPosition(),c=t.getRadius(),h=r.particles.quadTree.queryCircle(s,c*2);for(const i of h){if(t===i||!i.options.collisions.enable||t.options.collisions.mode!==i.options.collisions.mode||i.destroyed||i.spawning)continue;const g=i.getPosition(),w=i.getRadius();if(Math.abs(Math.round(s.z)-Math.round(g.z))>c+w)continue;const T=od(s,g),A=c+w;T>A||RHe(t,i,n,r.retina.pixelRatio)}}isEnabled(t){return t.options.collisions.enable}reset(){}}async function PHe(e,t=!0){await e.addInteractor("particlesCollisions",n=>new DHe(n),t)}class IHe extends yc{constructor(t,n,r,s){super(t,n,r),this.canvasSize=s,this.canvasSize={...s}}contains(t){const{width:n,height:r}=this.canvasSize,{x:s,y:c}=t;return super.contains(t)||super.contains({x:s-n,y:c})||super.contains({x:s-n,y:c-r})||super.contains({x:s,y:c-r})}intersects(t){if(super.intersects(t))return!0;const n=t,r=t,s={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(r.radius!==void 0){const c=new yc(s.x,s.y,r.radius*2);return super.intersects(c)}else if(n.size!==void 0){const c=new Df(s.x,s.y,n.size.width*2,n.size.height*2);return super.intersects(c)}return!1}}class kHe{constructor(){this.blur=5,this.color=new Nl,this.color.value="#000",this.enable=!1}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=Nl.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable))}}class OHe{constructor(){this.enable=!1,this.frequency=1}load(t){t&&(t.color!==void 0&&(this.color=Nl.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity))}}class LHe{constructor(){this.blink=!1,this.color=new Nl,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new kHe,this.triangles=new OHe,this.width=1,this.warp=!1}load(t){t&&(t.id!==void 0&&(this.id=t.id),t.blink!==void 0&&(this.blink=t.blink),this.color=Nl.create(this.color,t.color),t.consent!==void 0&&(this.consent=t.consent),t.distance!==void 0&&(this.distance=t.distance),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),t.width!==void 0&&(this.width=t.width),t.warp!==void 0&&(this.warp=t.warp))}}function zHe(e,t,n,r,s){const{dx:c,dy:h,distance:i}=Wc(e,t);if(!s||i<=n)return i;const g={x:Math.abs(c),y:Math.abs(h)},w={x:Math.min(g.x,r.width-g.x),y:Math.min(g.y,r.height-g.y)};return Math.sqrt(w.x**2+w.y**2)}class FHe extends Z5{constructor(t){super(t),this._setColor=n=>{if(!n.options.links)return;const r=this.linkContainer,s=n.options.links;let c=s.id===void 0?r.particles.linksColor:r.particles.linksColors.get(s.id);if(c)return;const h=s.color;c=bre(h,s.blink,s.consent),s.id===void 0?r.particles.linksColor=c:r.particles.linksColors.set(s.id,c)},this.linkContainer=t}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(t){if(!t.options.links)return;t.links=[];const n=t.getPosition(),r=this.container,s=r.canvas.size;if(n.x<0||n.y<0||n.x>s.width||n.y>s.height)return;const c=t.options.links,h=c.opacity,i=t.retina.linksDistance??0,g=c.warp,w=g?new IHe(n.x,n.y,i,s):new yc(n.x,n.y,i),T=r.particles.quadTree.query(w);for(const A of T){const D=A.options.links;if(t===A||!(D!=null&&D.enable)||c.id!==D.id||A.spawning||A.destroyed||!A.links||t.links.some(j=>j.destination===A)||A.links.some(j=>j.destination===t))continue;const k=A.getPosition();if(k.x<0||k.y<0||k.x>s.width||k.y>s.height)continue;const I=zHe(n,k,i,s,g&&D.warp);if(I>i)continue;const F=(1-I/i)*h;this._setColor(t),t.links.push({destination:A,opacity:F})}}isEnabled(t){var n;return!!((n=t.options.links)!=null&&n.enable)}loadParticlesOptions(t,...n){t.links||(t.links=new LHe);for(const r of n)t.links.load((r==null?void 0:r.links)??(r==null?void 0:r.lineLinked)??(r==null?void 0:r.line_linked))}reset(){}}async function BHe(e,t=!0){await e.addInteractor("particlesLinks",n=>new FHe(n),t)}function NHe(e){let t=!1;const{begin:n,end:r,maxDistance:s,context:c,canvasSize:h,width:i,backgroundMask:g,colorLine:w,opacity:T,links:A}=e;if(od(n,r)<=s)HS(c,n,r),t=!0;else if(A.warp){let k,I;const F={x:r.x-h.width,y:r.y},j=Wc(n,F);if(j.distance<=s){const V=n.y-j.dy/j.dx*n.x;k={x:0,y:V},I={x:h.width,y:V}}else{const V={x:r.x,y:r.y-h.height},W=Wc(n,V);if(W.distance<=s){const K=-(n.y-W.dy/W.dx*n.x)/(W.dy/W.dx);k={x:K,y:0},I={x:K,y:h.height}}else{const Z={x:r.x-h.width,y:r.y-h.height},K=Wc(n,Z);if(K.distance<=s){const ee=n.y-K.dy/K.dx*n.x;k={x:-ee/(K.dy/K.dx),y:ee},I={x:k.x+h.width,y:k.y+h.height}}}}k&&I&&(HS(c,n,k),HS(c,r,I),t=!0)}if(!t)return;c.lineWidth=i,g.enable&&(c.globalCompositeOperation=g.composite),c.strokeStyle=Mg(w,T);const{shadow:D}=A;if(D.enable){const k=Cf(D.color);k&&(c.shadowBlur=D.blur,c.shadowColor=Mg(k))}c.stroke()}function jHe(e){const{context:t,pos1:n,pos2:r,pos3:s,backgroundMask:c,colorTriangle:h,opacityTriangle:i}=e;x6e(t,n,r,s),c.enable&&(t.globalCompositeOperation=c.composite),t.fillStyle=Mg(h,i),t.fill()}function VHe(e){return e.sort((t,n)=>t-n),e.join("_")}function oY(e,t){const n=VHe(e.map(s=>s.id));let r=t.get(n);return r===void 0&&(r=Ss(),t.set(n,r)),r}class UHe{constructor(t){this.container=t,this._drawLinkLine=(n,r)=>{const s=n.options.links;if(!(s!=null&&s.enable))return;const c=this.container,h=c.actualOptions,i=r.destination,g=n.getPosition(),w=i.getPosition();let T=r.opacity;c.canvas.draw(A=>{var V;let D;const k=(V=n.options.twinkle)==null?void 0:V.lines;if(k!=null&&k.enable){const W=k.frequency,Z=Cf(k.color);Ss()<W&&Z&&(D=Z,T=xi(k.opacity))}if(!D){const W=s.id!==void 0?c.particles.linksColors.get(s.id):c.particles.linksColor;D=IB(n,i,W)}if(!D)return;const I=n.retina.linksWidth??0,F=n.retina.linksDistance??0,{backgroundMask:j}=h;NHe({context:A,width:I,begin:g,end:w,maxDistance:F,canvasSize:c.canvas.size,links:s,backgroundMask:j,colorLine:D,opacity:T})})},this._drawLinkTriangle=(n,r,s)=>{const c=n.options.links;if(!(c!=null&&c.enable))return;const h=c.triangles;if(!h.enable)return;const i=this.container,g=i.actualOptions,w=r.destination,T=s.destination,A=h.opacity??(r.opacity+s.opacity)/2;A<=0||i.canvas.draw(D=>{const k=n.getPosition(),I=w.getPosition(),F=T.getPosition(),j=n.retina.linksDistance??0;if(od(k,I)>j||od(F,I)>j||od(F,k)>j)return;let V=Cf(h.color);if(!V){const W=c.id!==void 0?i.particles.linksColors.get(c.id):i.particles.linksColor;V=IB(n,w,W)}V&&jHe({context:D,pos1:k,pos2:I,pos3:F,backgroundMask:g.backgroundMask,colorTriangle:V,opacityTriangle:A})})},this._drawTriangles=(n,r,s,c)=>{var g,w,T;const h=s.destination;if(!((g=n.links)!=null&&g.triangles.enable&&((w=h.options.links)!=null&&w.triangles.enable)))return;const i=(T=h.links)==null?void 0:T.filter(A=>{const D=this._getLinkFrequency(h,A.destination);return h.options.links&&D<=h.options.links.frequency&&c.findIndex(k=>k.destination===A.destination)>=0});if(i!=null&&i.length)for(const A of i){const D=A.destination;this._getTriangleFrequency(r,h,D)>n.links.triangles.frequency||this._drawLinkTriangle(r,s,A)}},this._getLinkFrequency=(n,r)=>oY([n,r],this._freqs.links),this._getTriangleFrequency=(n,r,s)=>oY([n,r,s],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(t,n){const{links:r,options:s}=n;if(!r||r.length<=0)return;const c=r.filter(h=>s.links&&this._getLinkFrequency(n,h.destination)<=s.links.frequency);for(const h of c)this._drawTriangles(s,n,h,c),h.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,h)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(t){if(t.links=[],!t.options.links)return;const n=this.container.retina.pixelRatio,{retina:r}=t,{distance:s,width:c}=t.options.links;r.linksDistance=s*n,r.linksWidth=c*n}particleDestroyed(t){t.links=[]}}class $He{constructor(){this.id="links"}getPlugin(t){return new UHe(t)}loadOptions(){}needsPlugin(){return!0}}async function qHe(e,t=!0){const n=new $He;await e.addPlugin(n,t)}async function HHe(e,t=!0){await BHe(e,t),await qHe(e,t)}class Fre{draw(t,n,r){const s=this.getCenter(n,r),c=this.getSidesData(n,r),h=c.count.numerator*c.count.denominator,i=c.count.numerator/c.count.denominator,g=180*(i-2)/i,w=Math.PI-Math.PI*g/180;if(t){t.beginPath(),t.translate(s.x,s.y),t.moveTo(0,0);for(let T=0;T<h;T++)t.lineTo(c.length,0),t.translate(c.length,0),t.rotate(w)}}getSidesCount(t){const n=t.shapeData;return Math.round(xi((n==null?void 0:n.sides)??(n==null?void 0:n.nb_sides)??5))}}class GHe extends Fre{getCenter(t,n){return{x:-n/(t.sides/3.5),y:-n/(2.66/3.5)}}getSidesData(t,n){const r=t.sides;return{count:{denominator:1,numerator:r},length:n*2.66/(r/3)}}}class WHe extends Fre{getCenter(t,n){return{x:-n,y:n/1.66}}getSidesCount(){return 3}getSidesData(t,n){return{count:{denominator:2,numerator:3},length:n*2}}}async function YHe(e,t=!0){await e.addShape("polygon",new GHe,t)}async function XHe(e,t=!0){await e.addShape("triangle",new WHe,t)}async function ZHe(e,t=!0){await YHe(e,t),await XHe(e,t)}class KHe{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=ro(t.speed)),t.decay!==void 0&&(this.decay=ro(t.decay)),t.sync!==void 0&&(this.sync=t.sync))}}class QHe extends bv{constructor(){super(),this.animation=new KHe,this.direction="clockwise",this.path=!1,this.value=0}load(t){t&&(super.load(t),t.direction!==void 0&&(this.direction=t.direction),this.animation.load(t.animation),t.path!==void 0&&(this.path=t.path))}}function JHe(e,t){const n=e.rotate,r=e.options.rotate;if(!n||!r)return;const s=r.animation,c=(n.velocity??0)*t.factor,h=2*Math.PI,i=n.decay??1;if(s.enable){switch(n.status){case"increasing":n.value+=c,n.value>h&&(n.value-=h);break;case"decreasing":default:n.value-=c,n.value<0&&(n.value+=h);break}n.velocity&&i!==1&&(n.velocity*=i)}}class e2e{constructor(t){this.container=t}init(t){const n=t.options.rotate;if(!n)return;t.rotate={enable:n.animation.enable,value:xi(n.value)*Math.PI/180},t.pathRotation=n.path;let r=n.direction;switch(r==="random"&&(r=Math.floor(Ss()*2)>0?"counter-clockwise":"clockwise"),r){case"counter-clockwise":case"counterClockwise":t.rotate.status="decreasing";break;case"clockwise":t.rotate.status="increasing";break}const s=n.animation;s.enable&&(t.rotate.decay=1-xi(s.decay),t.rotate.velocity=xi(s.speed)/360*this.container.retina.reduceFactor,s.sync||(t.rotate.velocity*=Ss())),t.rotation=t.rotate.value}isEnabled(t){const n=t.options.rotate;return n?!t.destroyed&&!t.spawning&&n.animation.enable&&!n.path:!1}loadOptions(t,...n){t.rotate||(t.rotate=new QHe);for(const r of n)t.rotate.load(r==null?void 0:r.rotate)}update(t,n){var r;this.isEnabled(t)&&(JHe(t,n),t.rotation=((r=t.rotate)==null?void 0:r.value)??0)}}async function t2e(e,t=!0){await e.addParticleUpdater("rotate",n=>new e2e(n),t)}const n2e=Math.sqrt(2);class r2e{draw(t,n,r){const s=r/n2e,c=s*2;t.rect(-s,-s,c,c)}getSidesCount(){return 4}}async function i2e(e,t=!0){await e.addShape(["edge","square"],new r2e,t)}class o2e{draw(t,n,r){const s=n.sides,c=n.starInset??2;t.moveTo(0,0-r);for(let h=0;h<s;h++)t.rotate(Math.PI/s),t.lineTo(0,0-r*c),t.rotate(Math.PI/s),t.lineTo(0,0-r)}getSidesCount(t){const n=t.shapeData;return Math.round(xi((n==null?void 0:n.sides)??(n==null?void 0:n.nb_sides)??5))}particleInit(t,n){const r=n.shapeData,s=xi((r==null?void 0:r.inset)??2);n.starInset=s}}async function s2e(e,t=!0){await e.addShape("star",new o2e,t)}function L3(e,t,n,r,s){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const c=hu(n.offset),h=(t.velocity??0)*e.factor+c*3.6,i=t.decay??1;!s||t.status==="increasing"?(t.value+=h,t.value>r&&(t.loops||(t.loops=0),t.loops++,s&&(t.status="decreasing",t.value-=t.value%r))):(t.value-=h,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&i!==1&&(t.velocity*=i),t.value>r&&(t.value%=r)}function a2e(e,t){if(!e.strokeColor||!e.strokeAnimation)return;const{h:n,s:r,l:s}=e.strokeColor,{h:c,s:h,l:i}=e.strokeAnimation;n&&L3(t,n,c,360,!1),r&&L3(t,r,h,100,!0),s&&L3(t,s,i,100,!0)}class l2e{constructor(t){this.container=t}init(t){var h;const n=this.container,r=t.options,s=Ag(r.stroke,t.id,r.reduceDuplicates);t.strokeWidth=xi(s.width)*n.retina.pixelRatio,t.strokeOpacity=xi(s.opacity??1),t.strokeAnimation=(h=s.color)==null?void 0:h.animation;const c=OT(s.color)??t.getFillColor();c&&(t.strokeColor=wre(c,t.strokeAnimation,n.retina.reduceFactor))}isEnabled(t){const n=t.strokeAnimation,{strokeColor:r}=t;return!t.destroyed&&!t.spawning&&!!n&&((r==null?void 0:r.h.value)!==void 0&&r.h.enable||(r==null?void 0:r.s.value)!==void 0&&r.s.enable||(r==null?void 0:r.l.value)!==void 0&&r.l.enable)}update(t,n){this.isEnabled(t)&&a2e(t,n)}}async function c2e(e,t=!0){await e.addParticleUpdater("strokeColor",n=>new l2e(n),t)}const wM=["text","character","char"];class u2e{draw(t,n,r,s){const c=n.shapeData;if(c===void 0)return;const h=c.value;if(h===void 0)return;n.text===void 0&&(n.text=Ag(h,n.randomIndexData));const i=n.text,g=c.style??"",w=c.weight??"400",T=Math.round(r)*2,A=c.font??"Verdana",D=n.fill,k=i.length*r/2;t.font=`${g} ${w} ${T}px "${A}"`;const I={x:-k,y:r/2};t.globalAlpha=s,D?t.fillText(i,I.x,I.y):t.strokeText(i,I.x,I.y),t.globalAlpha=1}getSidesCount(){return 12}async init(t){const n=t.actualOptions;if(wM.find(r=>ma(r,n.particles.shape.type))){const r=wM.map(c=>n.particles.shape.options[c]).find(c=>!!c),s=[];xl(r,c=>{s.push(d6e(c.font,c.weight))}),await Promise.all(s)}}particleInit(t,n){if(!n.shape||!wM.includes(n.shape))return;const r=n.shapeData;if(r===void 0)return;const s=r.value;s!==void 0&&(n.text=Ag(s,n.randomIndexData))}}async function d2e(e,t=!0){await e.addShape(wM,new u2e,t)}async function h2e(e,t=!0){Fqe(e),await THe(e,!1),await y8e(e,!1),await x8e(e,!1),await T8e(e,!1),await I8e(e,!1),await B8e(e,!1),await j8e(e,!1),await $8e(e,!1),await G8e(e,!1),await Z8e(e,!1),await J8e(e,!1),await CHe(e,!1),await PHe(e,!1),await HHe(e,!1),await p8e(),await mHe(e,!1),await wHe(e,!1),await ZHe(e,!1),await i2e(e,!1),await s2e(e,!1),await d2e(e,!1),await xHe(e,!1),await t2e(e,!1),await c2e(e,!1),await f8e(e,t)}const f2e=()=>{const e=q.useCallback(async t=>{await h2e(t)},[]);return $.jsx(Pre,{id:"tsparticles",init:e,options:{background:{color:{value:"#000000"}},fullScreen:{enable:!1},fpsLimit:120,particles:{number:{value:120,density:{enable:!0,area:1e3}},color:{value:"#2563EB"},links:{enable:!0,color:"#2563EB",distance:130,opacity:.5,width:1},move:{enable:!0,speed:2,direction:"none",outModes:{default:"bounce"},trail:{enable:!0,length:5,fillColor:"#000000"}},shape:{type:"square"},opacity:{value:.7},size:{value:{min:1.5,max:3.5},animation:{enable:!0,speed:3,minimumValue:1,sync:!1}}},interactivity:{events:{onHover:{enable:!0,mode:"repulse"},onClick:{enable:!0,mode:"push"},resize:!0},modes:{repulse:{distance:50,duration:.4},push:{quantity:4}}}}})};function Bre(e,t){return function(){return e.apply(t,arguments)}}const{toString:p2e}=Object.prototype,{getPrototypeOf:K5}=Object,{iterator:tP,toStringTag:Nre}=Symbol,nP=(e=>t=>{const n=p2e.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kf=e=>(e=e.toLowerCase(),t=>nP(t)===e),rP=e=>t=>typeof t===e,{isArray:M1}=Array,FT=rP("undefined");function m2e(e){return e!==null&&!FT(e)&&e.constructor!==null&&!FT(e.constructor)&&vu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jre=kf("ArrayBuffer");function g2e(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jre(e.buffer),t}const y2e=rP("string"),vu=rP("function"),Vre=rP("number"),iP=e=>e!==null&&typeof e=="object",v2e=e=>e===!0||e===!1,SM=e=>{if(nP(e)!=="object")return!1;const t=K5(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Nre in e)&&!(tP in e)},_2e=kf("Date"),x2e=kf("File"),b2e=kf("Blob"),w2e=kf("FileList"),S2e=e=>iP(e)&&vu(e.pipe),T2e=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||vu(e.append)&&((t=nP(e))==="formdata"||t==="object"&&vu(e.toString)&&e.toString()==="[object FormData]"))},E2e=kf("URLSearchParams"),[C2e,A2e,M2e,R2e]=["ReadableStream","Request","Response","Headers"].map(kf),D2e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function CE(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),M1(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const c=n?Object.getOwnPropertyNames(e):Object.keys(e),h=c.length;let i;for(r=0;r<h;r++)i=c[r],t.call(null,e[i],i,e)}}function Ure(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const s0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,$re=e=>!FT(e)&&e!==s0;function kB(){const{caseless:e}=$re(this)&&this||{},t={},n=(r,s)=>{const c=e&&Ure(t,s)||s;SM(t[c])&&SM(r)?t[c]=kB(t[c],r):SM(r)?t[c]=kB({},r):M1(r)?t[c]=r.slice():t[c]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&CE(arguments[r],n);return t}const P2e=(e,t,n,{allOwnKeys:r}={})=>(CE(t,(s,c)=>{n&&vu(s)?e[c]=Bre(s,n):e[c]=s},{allOwnKeys:r}),e),I2e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),k2e=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},O2e=(e,t,n,r)=>{let s,c,h;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),c=s.length;c-- >0;)h=s[c],(!r||r(h,e,t))&&!i[h]&&(t[h]=e[h],i[h]=!0);e=n!==!1&&K5(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},L2e=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},z2e=e=>{if(!e)return null;if(M1(e))return e;let t=e.length;if(!Vre(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},F2e=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&K5(Uint8Array)),B2e=(e,t)=>{const r=(e&&e[tP]).call(e);let s;for(;(s=r.next())&&!s.done;){const c=s.value;t.call(e,c[0],c[1])}},N2e=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},j2e=kf("HTMLFormElement"),V2e=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),sY=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),U2e=kf("RegExp"),qre=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};CE(n,(s,c)=>{let h;(h=t(s,c,e))!==!1&&(r[c]=h||s)}),Object.defineProperties(e,r)},$2e=e=>{qre(e,(t,n)=>{if(vu(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(vu(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},q2e=(e,t)=>{const n={},r=s=>{s.forEach(c=>{n[c]=!0})};return M1(e)?r(e):r(String(e).split(t)),n},H2e=()=>{},G2e=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function W2e(e){return!!(e&&vu(e.append)&&e[Nre]==="FormData"&&e[tP])}const Y2e=e=>{const t=new Array(10),n=(r,s)=>{if(iP(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const c=M1(r)?[]:{};return CE(r,(h,i)=>{const g=n(h,s+1);!FT(g)&&(c[i]=g)}),t[s]=void 0,c}}return r};return n(e,0)},X2e=kf("AsyncFunction"),Z2e=e=>e&&(iP(e)||vu(e))&&vu(e.then)&&vu(e.catch),Hre=((e,t)=>e?setImmediate:t?((n,r)=>(s0.addEventListener("message",({source:s,data:c})=>{s===s0&&c===n&&r.length&&r.shift()()},!1),s=>{r.push(s),s0.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vu(s0.postMessage)),K2e=typeof queueMicrotask<"u"?queueMicrotask.bind(s0):typeof process<"u"&&process.nextTick||Hre,Q2e=e=>e!=null&&vu(e[tP]),bn={isArray:M1,isArrayBuffer:jre,isBuffer:m2e,isFormData:T2e,isArrayBufferView:g2e,isString:y2e,isNumber:Vre,isBoolean:v2e,isObject:iP,isPlainObject:SM,isReadableStream:C2e,isRequest:A2e,isResponse:M2e,isHeaders:R2e,isUndefined:FT,isDate:_2e,isFile:x2e,isBlob:b2e,isRegExp:U2e,isFunction:vu,isStream:S2e,isURLSearchParams:E2e,isTypedArray:F2e,isFileList:w2e,forEach:CE,merge:kB,extend:P2e,trim:D2e,stripBOM:I2e,inherits:k2e,toFlatObject:O2e,kindOf:nP,kindOfTest:kf,endsWith:L2e,toArray:z2e,forEachEntry:B2e,matchAll:N2e,isHTMLForm:j2e,hasOwnProperty:sY,hasOwnProp:sY,reduceDescriptors:qre,freezeMethods:$2e,toObjectSet:q2e,toCamelCase:V2e,noop:H2e,toFiniteNumber:G2e,findKey:Ure,global:s0,isContextDefined:$re,isSpecCompliantForm:W2e,toJSONObject:Y2e,isAsyncFn:X2e,isThenable:Z2e,setImmediate:Hre,asap:K2e,isIterable:Q2e};function Gi(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}bn.inherits(Gi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bn.toJSONObject(this.config),code:this.code,status:this.status}}});const Gre=Gi.prototype,Wre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Wre[e]={value:e}});Object.defineProperties(Gi,Wre);Object.defineProperty(Gre,"isAxiosError",{value:!0});Gi.from=(e,t,n,r,s,c)=>{const h=Object.create(Gre);return bn.toFlatObject(e,h,function(g){return g!==Error.prototype},i=>i!=="isAxiosError"),Gi.call(h,e.message,t,n,r,s),h.cause=e,h.name=e.name,c&&Object.assign(h,c),h};const J2e=null;function OB(e){return bn.isPlainObject(e)||bn.isArray(e)}function Yre(e){return bn.endsWith(e,"[]")?e.slice(0,-2):e}function aY(e,t,n){return e?e.concat(t).map(function(s,c){return s=Yre(s),!n&&c?"["+s+"]":s}).join(n?".":""):t}function eGe(e){return bn.isArray(e)&&!e.some(OB)}const tGe=bn.toFlatObject(bn,{},null,function(t){return/^is[A-Z]/.test(t)});function oP(e,t,n){if(!bn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=bn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,j){return!bn.isUndefined(j[F])});const r=n.metaTokens,s=n.visitor||T,c=n.dots,h=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&bn.isSpecCompliantForm(t);if(!bn.isFunction(s))throw new TypeError("visitor must be a function");function w(I){if(I===null)return"";if(bn.isDate(I))return I.toISOString();if(!g&&bn.isBlob(I))throw new Gi("Blob is not supported. Use a Buffer instead.");return bn.isArrayBuffer(I)||bn.isTypedArray(I)?g&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function T(I,F,j){let V=I;if(I&&!j&&typeof I=="object"){if(bn.endsWith(F,"{}"))F=r?F:F.slice(0,-2),I=JSON.stringify(I);else if(bn.isArray(I)&&eGe(I)||(bn.isFileList(I)||bn.endsWith(F,"[]"))&&(V=bn.toArray(I)))return F=Yre(F),V.forEach(function(Z,K){!(bn.isUndefined(Z)||Z===null)&&t.append(h===!0?aY([F],K,c):h===null?F:F+"[]",w(Z))}),!1}return OB(I)?!0:(t.append(aY(j,F,c),w(I)),!1)}const A=[],D=Object.assign(tGe,{defaultVisitor:T,convertValue:w,isVisitable:OB});function k(I,F){if(!bn.isUndefined(I)){if(A.indexOf(I)!==-1)throw Error("Circular reference detected in "+F.join("."));A.push(I),bn.forEach(I,function(V,W){(!(bn.isUndefined(V)||V===null)&&s.call(t,V,bn.isString(W)?W.trim():W,F,D))===!0&&k(V,F?F.concat(W):[W])}),A.pop()}}if(!bn.isObject(e))throw new TypeError("data must be an object");return k(e),t}function lY(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Q5(e,t){this._pairs=[],e&&oP(e,this,t)}const Xre=Q5.prototype;Xre.append=function(t,n){this._pairs.push([t,n])};Xre.toString=function(t){const n=t?function(r){return t.call(this,r,lY)}:lY;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function nGe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zre(e,t,n){if(!t)return e;const r=n&&n.encode||nGe;bn.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let c;if(s?c=s(t,n):c=bn.isURLSearchParams(t)?t.toString():new Q5(t,n).toString(r),c){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class cY{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){bn.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Kre={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rGe=typeof URLSearchParams<"u"?URLSearchParams:Q5,iGe=typeof FormData<"u"?FormData:null,oGe=typeof Blob<"u"?Blob:null,sGe={isBrowser:!0,classes:{URLSearchParams:rGe,FormData:iGe,Blob:oGe},protocols:["http","https","file","blob","url","data"]},J5=typeof window<"u"&&typeof document<"u",LB=typeof navigator=="object"&&navigator||void 0,aGe=J5&&(!LB||["ReactNative","NativeScript","NS"].indexOf(LB.product)<0),lGe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cGe=J5&&window.location.href||"http://localhost",uGe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J5,hasStandardBrowserEnv:aGe,hasStandardBrowserWebWorkerEnv:lGe,navigator:LB,origin:cGe},Symbol.toStringTag,{value:"Module"})),dc={...uGe,...sGe};function dGe(e,t){return oP(e,new dc.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,c){return dc.isNode&&bn.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function hGe(e){return bn.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function fGe(e){const t={},n=Object.keys(e);let r;const s=n.length;let c;for(r=0;r<s;r++)c=n[r],t[c]=e[c];return t}function Qre(e){function t(n,r,s,c){let h=n[c++];if(h==="__proto__")return!0;const i=Number.isFinite(+h),g=c>=n.length;return h=!h&&bn.isArray(s)?s.length:h,g?(bn.hasOwnProp(s,h)?s[h]=[s[h],r]:s[h]=r,!i):((!s[h]||!bn.isObject(s[h]))&&(s[h]=[]),t(n,r,s[h],c)&&bn.isArray(s[h])&&(s[h]=fGe(s[h])),!i)}if(bn.isFormData(e)&&bn.isFunction(e.entries)){const n={};return bn.forEachEntry(e,(r,s)=>{t(hGe(r),s,n,0)}),n}return null}function pGe(e,t,n){if(bn.isString(e))try{return(t||JSON.parse)(e),bn.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const AE={transitional:Kre,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,c=bn.isObject(t);if(c&&bn.isHTMLForm(t)&&(t=new FormData(t)),bn.isFormData(t))return s?JSON.stringify(Qre(t)):t;if(bn.isArrayBuffer(t)||bn.isBuffer(t)||bn.isStream(t)||bn.isFile(t)||bn.isBlob(t)||bn.isReadableStream(t))return t;if(bn.isArrayBufferView(t))return t.buffer;if(bn.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return dGe(t,this.formSerializer).toString();if((i=bn.isFileList(t))||r.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return oP(i?{"files[]":t}:t,g&&new g,this.formSerializer)}}return c||s?(n.setContentType("application/json",!1),pGe(t)):t}],transformResponse:[function(t){const n=this.transitional||AE.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(bn.isResponse(t)||bn.isReadableStream(t))return t;if(t&&bn.isString(t)&&(r&&!this.responseType||s)){const h=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(i){if(h)throw i.name==="SyntaxError"?Gi.from(i,Gi.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dc.classes.FormData,Blob:dc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bn.forEach(["delete","get","head","post","put","patch"],e=>{AE.headers[e]={}});const mGe=bn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gGe=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(h){s=h.indexOf(":"),n=h.substring(0,s).trim().toLowerCase(),r=h.substring(s+1).trim(),!(!n||t[n]&&mGe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},uY=Symbol("internals");function fS(e){return e&&String(e).trim().toLowerCase()}function TM(e){return e===!1||e==null?e:bn.isArray(e)?e.map(TM):String(e)}function yGe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const vGe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function z3(e,t,n,r,s){if(bn.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!bn.isString(t)){if(bn.isString(r))return t.indexOf(r)!==-1;if(bn.isRegExp(r))return r.test(t)}}function _Ge(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function xGe(e,t){const n=bn.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,c,h){return this[r].call(this,t,s,c,h)},configurable:!0})})}let _u=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function c(i,g,w){const T=fS(g);if(!T)throw new Error("header name must be a non-empty string");const A=bn.findKey(s,T);(!A||s[A]===void 0||w===!0||w===void 0&&s[A]!==!1)&&(s[A||g]=TM(i))}const h=(i,g)=>bn.forEach(i,(w,T)=>c(w,T,g));if(bn.isPlainObject(t)||t instanceof this.constructor)h(t,n);else if(bn.isString(t)&&(t=t.trim())&&!vGe(t))h(gGe(t),n);else if(bn.isObject(t)&&bn.isIterable(t)){let i={},g,w;for(const T of t){if(!bn.isArray(T))throw TypeError("Object iterator must return a key-value pair");i[w=T[0]]=(g=i[w])?bn.isArray(g)?[...g,T[1]]:[g,T[1]]:T[1]}h(i,n)}else t!=null&&c(n,t,r);return this}get(t,n){if(t=fS(t),t){const r=bn.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return yGe(s);if(bn.isFunction(n))return n.call(this,s,r);if(bn.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=fS(t),t){const r=bn.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||z3(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function c(h){if(h=fS(h),h){const i=bn.findKey(r,h);i&&(!n||z3(r,r[i],i,n))&&(delete r[i],s=!0)}}return bn.isArray(t)?t.forEach(c):c(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const c=n[r];(!t||z3(this,this[c],c,t,!0))&&(delete this[c],s=!0)}return s}normalize(t){const n=this,r={};return bn.forEach(this,(s,c)=>{const h=bn.findKey(r,c);if(h){n[h]=TM(s),delete n[c];return}const i=t?_Ge(c):String(c).trim();i!==c&&delete n[c],n[i]=TM(s),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return bn.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&bn.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[uY]=this[uY]={accessors:{}}).accessors,s=this.prototype;function c(h){const i=fS(h);r[i]||(xGe(s,h),r[i]=!0)}return bn.isArray(t)?t.forEach(c):c(t),this}};_u.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);bn.reduceDescriptors(_u.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});bn.freezeMethods(_u);function F3(e,t){const n=this||AE,r=t||n,s=_u.from(r.headers);let c=r.data;return bn.forEach(e,function(i){c=i.call(n,c,s.normalize(),t?t.status:void 0)}),s.normalize(),c}function Jre(e){return!!(e&&e.__CANCEL__)}function R1(e,t,n){Gi.call(this,e??"canceled",Gi.ERR_CANCELED,t,n),this.name="CanceledError"}bn.inherits(R1,Gi,{__CANCEL__:!0});function eie(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Gi("Request failed with status code "+n.status,[Gi.ERR_BAD_REQUEST,Gi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function bGe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function wGe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,c=0,h;return t=t!==void 0?t:1e3,function(g){const w=Date.now(),T=r[c];h||(h=w),n[s]=g,r[s]=w;let A=c,D=0;for(;A!==s;)D+=n[A++],A=A%e;if(s=(s+1)%e,s===c&&(c=(c+1)%e),w-h<t)return;const k=T&&w-T;return k?Math.round(D*1e3/k):void 0}}function SGe(e,t){let n=0,r=1e3/t,s,c;const h=(w,T=Date.now())=>{n=T,s=null,c&&(clearTimeout(c),c=null),e.apply(null,w)};return[(...w)=>{const T=Date.now(),A=T-n;A>=r?h(w,T):(s=w,c||(c=setTimeout(()=>{c=null,h(s)},r-A)))},()=>s&&h(s)]}const MR=(e,t,n=3)=>{let r=0;const s=wGe(50,250);return SGe(c=>{const h=c.loaded,i=c.lengthComputable?c.total:void 0,g=h-r,w=s(g),T=h<=i;r=h;const A={loaded:h,total:i,progress:i?h/i:void 0,bytes:g,rate:w||void 0,estimated:w&&i&&T?(i-h)/w:void 0,event:c,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(A)},n)},dY=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},hY=e=>(...t)=>bn.asap(()=>e(...t)),TGe=dc.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,dc.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(dc.origin),dc.navigator&&/(msie|trident)/i.test(dc.navigator.userAgent)):()=>!0,EGe=dc.hasStandardBrowserEnv?{write(e,t,n,r,s,c){const h=[e+"="+encodeURIComponent(t)];bn.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),bn.isString(r)&&h.push("path="+r),bn.isString(s)&&h.push("domain="+s),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function CGe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function AGe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function tie(e,t,n){let r=!CGe(t);return e&&(r||n==!1)?AGe(e,t):t}const fY=e=>e instanceof _u?{...e}:e;function L0(e,t){t=t||{};const n={};function r(w,T,A,D){return bn.isPlainObject(w)&&bn.isPlainObject(T)?bn.merge.call({caseless:D},w,T):bn.isPlainObject(T)?bn.merge({},T):bn.isArray(T)?T.slice():T}function s(w,T,A,D){if(bn.isUndefined(T)){if(!bn.isUndefined(w))return r(void 0,w,A,D)}else return r(w,T,A,D)}function c(w,T){if(!bn.isUndefined(T))return r(void 0,T)}function h(w,T){if(bn.isUndefined(T)){if(!bn.isUndefined(w))return r(void 0,w)}else return r(void 0,T)}function i(w,T,A){if(A in t)return r(w,T);if(A in e)return r(void 0,w)}const g={url:c,method:c,data:c,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:i,headers:(w,T,A)=>s(fY(w),fY(T),A,!0)};return bn.forEach(Object.keys(Object.assign({},e,t)),function(T){const A=g[T]||s,D=A(e[T],t[T],T);bn.isUndefined(D)&&A!==i||(n[T]=D)}),n}const nie=e=>{const t=L0({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:c,headers:h,auth:i}=t;t.headers=h=_u.from(h),t.url=Zre(tie(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&h.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let g;if(bn.isFormData(n)){if(dc.hasStandardBrowserEnv||dc.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((g=h.getContentType())!==!1){const[w,...T]=g?g.split(";").map(A=>A.trim()).filter(Boolean):[];h.setContentType([w||"multipart/form-data",...T].join("; "))}}if(dc.hasStandardBrowserEnv&&(r&&bn.isFunction(r)&&(r=r(t)),r||r!==!1&&TGe(t.url))){const w=s&&c&&EGe.read(c);w&&h.set(s,w)}return t},MGe=typeof XMLHttpRequest<"u",RGe=MGe&&function(e){return new Promise(function(n,r){const s=nie(e);let c=s.data;const h=_u.from(s.headers).normalize();let{responseType:i,onUploadProgress:g,onDownloadProgress:w}=s,T,A,D,k,I;function F(){k&&k(),I&&I(),s.cancelToken&&s.cancelToken.unsubscribe(T),s.signal&&s.signal.removeEventListener("abort",T)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function V(){if(!j)return;const Z=_u.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),ee={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:Z,config:e,request:j};eie(function(he){n(he),F()},function(he){r(he),F()},ee),j=null}"onloadend"in j?j.onloadend=V:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(V)},j.onabort=function(){j&&(r(new Gi("Request aborted",Gi.ECONNABORTED,e,j)),j=null)},j.onerror=function(){r(new Gi("Network Error",Gi.ERR_NETWORK,e,j)),j=null},j.ontimeout=function(){let K=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const ee=s.transitional||Kre;s.timeoutErrorMessage&&(K=s.timeoutErrorMessage),r(new Gi(K,ee.clarifyTimeoutError?Gi.ETIMEDOUT:Gi.ECONNABORTED,e,j)),j=null},c===void 0&&h.setContentType(null),"setRequestHeader"in j&&bn.forEach(h.toJSON(),function(K,ee){j.setRequestHeader(ee,K)}),bn.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),i&&i!=="json"&&(j.responseType=s.responseType),w&&([D,I]=MR(w,!0),j.addEventListener("progress",D)),g&&j.upload&&([A,k]=MR(g),j.upload.addEventListener("progress",A),j.upload.addEventListener("loadend",k)),(s.cancelToken||s.signal)&&(T=Z=>{j&&(r(!Z||Z.type?new R1(null,e,j):Z),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(T),s.signal&&(s.signal.aborted?T():s.signal.addEventListener("abort",T)));const W=bGe(s.url);if(W&&dc.protocols.indexOf(W)===-1){r(new Gi("Unsupported protocol "+W+":",Gi.ERR_BAD_REQUEST,e));return}j.send(c||null)})},DGe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const c=function(w){if(!s){s=!0,i();const T=w instanceof Error?w:this.reason;r.abort(T instanceof Gi?T:new R1(T instanceof Error?T.message:T))}};let h=t&&setTimeout(()=>{h=null,c(new Gi(`timeout ${t} of ms exceeded`,Gi.ETIMEDOUT))},t);const i=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(w=>{w.unsubscribe?w.unsubscribe(c):w.removeEventListener("abort",c)}),e=null)};e.forEach(w=>w.addEventListener("abort",c));const{signal:g}=r;return g.unsubscribe=()=>bn.asap(i),g}},PGe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},IGe=async function*(e,t){for await(const n of kGe(e))yield*PGe(n,t)},kGe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},pY=(e,t,n,r)=>{const s=IGe(e,t);let c=0,h,i=g=>{h||(h=!0,r&&r(g))};return new ReadableStream({async pull(g){try{const{done:w,value:T}=await s.next();if(w){i(),g.close();return}let A=T.byteLength;if(n){let D=c+=A;n(D)}g.enqueue(new Uint8Array(T))}catch(w){throw i(w),w}},cancel(g){return i(g),s.return()}},{highWaterMark:2})},sP=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rie=sP&&typeof ReadableStream=="function",OGe=sP&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),iie=(e,...t)=>{try{return!!e(...t)}catch{return!1}},LGe=rie&&iie(()=>{let e=!1;const t=new Request(dc.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),mY=64*1024,zB=rie&&iie(()=>bn.isReadableStream(new Response("").body)),RR={stream:zB&&(e=>e.body)};sP&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!RR[t]&&(RR[t]=bn.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Gi(`Response type '${t}' is not supported`,Gi.ERR_NOT_SUPPORT,r)})})})(new Response);const zGe=async e=>{if(e==null)return 0;if(bn.isBlob(e))return e.size;if(bn.isSpecCompliantForm(e))return(await new Request(dc.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(bn.isArrayBufferView(e)||bn.isArrayBuffer(e))return e.byteLength;if(bn.isURLSearchParams(e)&&(e=e+""),bn.isString(e))return(await OGe(e)).byteLength},FGe=async(e,t)=>{const n=bn.toFiniteNumber(e.getContentLength());return n??zGe(t)},BGe=sP&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:c,timeout:h,onDownloadProgress:i,onUploadProgress:g,responseType:w,headers:T,withCredentials:A="same-origin",fetchOptions:D}=nie(e);w=w?(w+"").toLowerCase():"text";let k=DGe([s,c&&c.toAbortSignal()],h),I;const F=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let j;try{if(g&&LGe&&n!=="get"&&n!=="head"&&(j=await FGe(T,r))!==0){let ee=new Request(t,{method:"POST",body:r,duplex:"half"}),se;if(bn.isFormData(r)&&(se=ee.headers.get("content-type"))&&T.setContentType(se),ee.body){const[he,ye]=dY(j,MR(hY(g)));r=pY(ee.body,mY,he,ye)}}bn.isString(A)||(A=A?"include":"omit");const V="credentials"in Request.prototype;I=new Request(t,{...D,signal:k,method:n.toUpperCase(),headers:T.normalize().toJSON(),body:r,duplex:"half",credentials:V?A:void 0});let W=await fetch(I);const Z=zB&&(w==="stream"||w==="response");if(zB&&(i||Z&&F)){const ee={};["status","statusText","headers"].forEach(_e=>{ee[_e]=W[_e]});const se=bn.toFiniteNumber(W.headers.get("content-length")),[he,ye]=i&&dY(se,MR(hY(i),!0))||[];W=new Response(pY(W.body,mY,he,()=>{ye&&ye(),F&&F()}),ee)}w=w||"text";let K=await RR[bn.findKey(RR,w)||"text"](W,e);return!Z&&F&&F(),await new Promise((ee,se)=>{eie(ee,se,{data:K,headers:_u.from(W.headers),status:W.status,statusText:W.statusText,config:e,request:I})})}catch(V){throw F&&F(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new Gi("Network Error",Gi.ERR_NETWORK,e,I),{cause:V.cause||V}):Gi.from(V,V&&V.code,e,I)}}),FB={http:J2e,xhr:RGe,fetch:BGe};bn.forEach(FB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const gY=e=>`- ${e}`,NGe=e=>bn.isFunction(e)||e===null||e===!1,oie={getAdapter:e=>{e=bn.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let c=0;c<t;c++){n=e[c];let h;if(r=n,!NGe(n)&&(r=FB[(h=String(n)).toLowerCase()],r===void 0))throw new Gi(`Unknown adapter '${h}'`);if(r)break;s[h||"#"+c]=r}if(!r){const c=Object.entries(s).map(([i,g])=>`adapter ${i} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=t?c.length>1?`since :
`+c.map(gY).join(`
`):" "+gY(c[0]):"as no adapter specified";throw new Gi("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:FB};function B3(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new R1(null,e)}function yY(e){return B3(e),e.headers=_u.from(e.headers),e.data=F3.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),oie.getAdapter(e.adapter||AE.adapter)(e).then(function(r){return B3(e),r.data=F3.call(e,e.transformResponse,r),r.headers=_u.from(r.headers),r},function(r){return Jre(r)||(B3(e),r&&r.response&&(r.response.data=F3.call(e,e.transformResponse,r.response),r.response.headers=_u.from(r.response.headers))),Promise.reject(r)})}const sie="1.9.0",aP={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{aP[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const vY={};aP.transitional=function(t,n,r){function s(c,h){return"[Axios v"+sie+"] Transitional option '"+c+"'"+h+(r?". "+r:"")}return(c,h,i)=>{if(t===!1)throw new Gi(s(h," has been removed"+(n?" in "+n:"")),Gi.ERR_DEPRECATED);return n&&!vY[h]&&(vY[h]=!0,console.warn(s(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,h,i):!0}};aP.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function jGe(e,t,n){if(typeof e!="object")throw new Gi("options must be an object",Gi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const c=r[s],h=t[c];if(h){const i=e[c],g=i===void 0||h(i,c,e);if(g!==!0)throw new Gi("option "+c+" must be "+g,Gi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Gi("Unknown option "+c,Gi.ERR_BAD_OPTION)}}const EM={assertOptions:jGe,validators:aP},Cp=EM.validators;let m0=class{constructor(t){this.defaults=t||{},this.interceptors={request:new cY,response:new cY}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const c=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=L0(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:c}=n;r!==void 0&&EM.assertOptions(r,{silentJSONParsing:Cp.transitional(Cp.boolean),forcedJSONParsing:Cp.transitional(Cp.boolean),clarifyTimeoutError:Cp.transitional(Cp.boolean)},!1),s!=null&&(bn.isFunction(s)?n.paramsSerializer={serialize:s}:EM.assertOptions(s,{encode:Cp.function,serialize:Cp.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),EM.assertOptions(n,{baseUrl:Cp.spelling("baseURL"),withXsrfToken:Cp.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=c&&bn.merge(c.common,c[n.method]);c&&bn.forEach(["delete","get","head","post","put","patch","common"],I=>{delete c[I]}),n.headers=_u.concat(h,c);const i=[];let g=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(n)===!1||(g=g&&F.synchronous,i.unshift(F.fulfilled,F.rejected))});const w=[];this.interceptors.response.forEach(function(F){w.push(F.fulfilled,F.rejected)});let T,A=0,D;if(!g){const I=[yY.bind(this),void 0];for(I.unshift.apply(I,i),I.push.apply(I,w),D=I.length,T=Promise.resolve(n);A<D;)T=T.then(I[A++],I[A++]);return T}D=i.length;let k=n;for(A=0;A<D;){const I=i[A++],F=i[A++];try{k=I(k)}catch(j){F.call(this,j);break}}try{T=yY.call(this,k)}catch(I){return Promise.reject(I)}for(A=0,D=w.length;A<D;)T=T.then(w[A++],w[A++]);return T}getUri(t){t=L0(this.defaults,t);const n=tie(t.baseURL,t.url,t.allowAbsoluteUrls);return Zre(n,t.params,t.paramsSerializer)}};bn.forEach(["delete","get","head","options"],function(t){m0.prototype[t]=function(n,r){return this.request(L0(r||{},{method:t,url:n,data:(r||{}).data}))}});bn.forEach(["post","put","patch"],function(t){function n(r){return function(c,h,i){return this.request(L0(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:h}))}}m0.prototype[t]=n(),m0.prototype[t+"Form"]=n(!0)});let VGe=class aie{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(s=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](s);r._listeners=null}),this.promise.then=s=>{let c;const h=new Promise(i=>{r.subscribe(i),c=i}).then(s);return h.cancel=function(){r.unsubscribe(c)},h},t(function(c,h,i){r.reason||(r.reason=new R1(c,h,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new aie(function(s){t=s}),cancel:t}}};function UGe(e){return function(n){return e.apply(null,n)}}function $Ge(e){return bn.isObject(e)&&e.isAxiosError===!0}const BB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(BB).forEach(([e,t])=>{BB[t]=e});function lie(e){const t=new m0(e),n=Bre(m0.prototype.request,t);return bn.extend(n,m0.prototype,t,{allOwnKeys:!0}),bn.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return lie(L0(e,s))},n}const va=lie(AE);va.Axios=m0;va.CanceledError=R1;va.CancelToken=VGe;va.isCancel=Jre;va.VERSION=sie;va.toFormData=oP;va.AxiosError=Gi;va.Cancel=va.CanceledError;va.all=function(t){return Promise.all(t)};va.spread=UGe;va.isAxiosError=$Ge;va.mergeConfig=L0;va.AxiosHeaders=_u;va.formToJSON=e=>Qre(bn.isHTMLForm(e)?new FormData(e):e);va.getAdapter=oie.getAdapter;va.HttpStatusCode=BB;va.default=va;const{Axios:p7e,AxiosError:m7e,CanceledError:g7e,isCancel:y7e,CancelToken:v7e,VERSION:_7e,all:x7e,Cancel:b7e,isAxiosError:w7e,spread:S7e,toFormData:T7e,AxiosHeaders:E7e,HttpStatusCode:C7e,formToJSON:A7e,getAdapter:M7e,mergeConfig:R7e}=va,e4=va.create({baseURL:"http://3.108.63.213:3001/api/",headers:{"Content-Type":"application/json"}});e4.interceptors.request.use(e=>e,e=>Promise.reject(e));e4.interceptors.response.use(e=>e,e=>{var t;return(t=e.response)==null||t.status,Promise.reject(e)});const qGe=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo (Congo-Brazzaville)","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini (fmr. 'Swaziland')","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (formerly Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine State","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],Ku=e=>{var t;(t=document.querySelector(e))==null||t.scrollIntoView({behavior:"smooth"})};function HGe(){const{enqueueSnackbar:e}=Vte(),t=e5().shape({firstName:Rp().required("First name is required"),lastName:Rp().required("Last name is required"),email:Rp().email("Invalid email").required("Email is required"),phone:Rp(),company:Rp(),country:Rp().required("Country is required"),message:Rp().required("Message is required")}),n=QJ({initialValues:{firstName:"",lastName:"",email:"",phone:"",company:"",country:"",message:""},validationSchema:t,onSubmit:async(r,{resetForm:s})=>{var c,h,i,g;try{(await e4.post("/user/contact",r)).status===200&&(e("Message sent successfully!",{variant:"success"}),s())}catch(w){(h=(c=w==null?void 0:w.response)==null?void 0:c.data)!=null&&h.message?e((g=(i=w==null?void 0:w.response)==null?void 0:i.data)==null?void 0:g.message,{variant:"error"}):(e("Failed to send message. Please try again later.",{variant:"error"}),console.log(w))}}});return $.jsxs("footer",{className:"footer",children:[$.jsx(f2e,{}),$.jsxs("div",{className:"footer__main",children:[$.jsx("div",{className:"logo",children:$.jsx(vN,{})}),$.jsx("div",{className:"footer__column",children:$.jsxs("form",{className:"contact-form",onSubmit:n.handleSubmit,children:[$.jsxs("div",{className:"form-row",children:[$.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:n.values.firstName,onChange:n.handleChange,onBlur:n.handleBlur}),$.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:n.values.lastName,onChange:n.handleChange,onBlur:n.handleBlur})]}),n.touched.firstName&&n.errors.firstName&&$.jsx("small",{className:"form-error",children:n.errors.firstName}),n.touched.lastName&&n.errors.lastName&&$.jsx("small",{className:"form-error",children:n.errors.lastName}),$.jsx("input",{type:"email",name:"email",placeholder:"Email",value:n.values.email,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.email&&n.errors.email&&$.jsx("small",{className:"form-error",children:n.errors.email}),$.jsx("input",{type:"tel",name:"phone",placeholder:"Phone",value:n.values.phone,onChange:n.handleChange}),$.jsx("input",{type:"text",name:"company",placeholder:"Company",value:n.values.company,onChange:n.handleChange}),$.jsxs("select",{name:"country",value:n.values.country,onChange:n.handleChange,onBlur:n.handleBlur,children:[$.jsx("option",{value:"",children:"Select Country"}),qGe.map(r=>$.jsx("option",{value:r,children:r}))]}),n.touched.country&&n.errors.country&&$.jsx("small",{className:"form-error",children:n.errors.country}),$.jsx("textarea",{name:"message",placeholder:"Message",rows:"3",value:n.values.message,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.message&&n.errors.message&&$.jsx("small",{className:"form-error",children:n.errors.message}),$.jsx("button",{type:"submit",disabled:n.isSubmitting,children:n.isSubmitting?"Sending...":"Send"}),status==="success"&&$.jsx("div",{className:"form-success",children:"Message sent successfully!"}),status==="error"&&$.jsx("div",{className:"form-error",children:"Failed to send. Try again."})]})}),$.jsx("div",{className:"footer__column",children:$.jsx("h4",{onClick:()=>Ku(".hero"),children:"Platform"})}),$.jsxs("div",{className:"footer__column",children:[$.jsx("h4",{onClick:()=>Ku(".feature-section"),children:"Industries"}),$.jsx("a",{onClick:()=>Ku(".feature-section"),children:"Construction & infrastucture"}),$.jsx("a",{onClick:()=>Ku(".feature-section"),children:"Energy, Utilities & Industrial"}),$.jsx("a",{onClick:()=>Ku(".feature-section"),children:"Heritage & construction"}),$.jsx("a",{onClick:()=>Ku(".feature-section"),children:"Agriculture & forest"}),$.jsx("a",{onClick:()=>Ku(".feature-section"),children:"Surveying & Land Developement"})]}),$.jsxs("div",{className:"footer__column",children:[$.jsx("h4",{onClick:()=>Ku(".simple-tabs-container"),children:"Solutions"}),$.jsx("a",{onClick:()=>Ku(".simple-tabs-container"),children:"Orthomosaic Viewer"}),$.jsx("a",{onClick:()=>Ku(".simple-tabs-container"),children:"Comparision Slider"}),$.jsx("a",{onClick:()=>Ku(".simple-tabs-container"),children:"Automated Customized Reporting"}),$.jsx("a",{onClick:()=>Ku(".simple-tabs-container"),children:"Issue Tagging & Coordination"}),$.jsx("a",{onClick:()=>Ku(".simple-tabs-container"),children:"360 Virtual Tour"})]})]}),$.jsxs("div",{className:"footer__bottom",children:[$.jsx("p",{children:" 2025 Infra-X. All rights reserved."}),$.jsx("div",{className:"footer__socials",children:$.jsxs("div",{className:"icons",children:[$.jsx("a",{href:"#",children:$.jsx(cge,{})}),$.jsx("a",{href:"#",children:$.jsx(dge,{})}),$.jsx("a",{href:"#",children:$.jsx(uge,{})}),$.jsx("a",{href:"#",children:$.jsx(lge,{})}),$.jsx("a",{href:"#",children:$.jsx(Hme,{})})]})}),$.jsxs("div",{className:"footer__legal",children:[$.jsx("a",{href:"#",children:"Privacy Policy"}),$.jsx("a",{href:"#",children:"Terms of Service"})]})]})]})}const GGe=()=>{const[e,t]=q.useState(!1),[n,r]=q.useState(0),s=iv(),c=()=>{const i=window.scrollY;t(i>n&&i>50),r(i)},h=i=>{var g;(g=document.querySelector(i))==null||g.scrollIntoView({behavior:"smooth"})};return q.useEffect(()=>(window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[n]),$.jsxs("header",{className:`transparent-header ${e?"hide":""}`,children:[$.jsx("div",{className:"ribbon",children:$.jsx("div",{className:"marquee",children:$.jsx("div",{className:"marquee__inner",children:$.jsx("span",{children:" Welcome to our platform  Explore what's new!"})})})}),$.jsxs("div",{className:"header-main",children:[$.jsxs("div",{className:"header-main-left",children:[$.jsx("div",{className:"header-main-left-logo",children:$.jsx(vN,{})}),$.jsxs("div",{className:"header-main-left-tabs",children:[$.jsx("button",{onClick:()=>h(".hero"),className:"button-tabs",children:"Platform"}),$.jsx("button",{onClick:()=>h(".feature-section"),className:"button-tabs",children:"Industries"}),$.jsx("button",{onClick:()=>h(".simple-tabs-container"),className:"button-tabs",children:"Solutions"}),$.jsx("button",{onClick:()=>h(".footer"),className:"button-tabs",children:"Contact Us"})]})]}),$.jsxs("div",{className:"header-main-right",children:[$.jsx("button",{onClick:()=>s("/register"),className:"login-btn",children:"Get Started"}),$.jsx("button",{onClick:()=>s("/login"),className:"login-btn",children:"Log In"})]})]})]})};function WGe({children:e}){return $.jsx("div",{className:"main-layout",children:e})}const _Y=["Orthomosaic Viewer ","Comparison Slider"," Automated Customized Reporting","Issue Tagging & coordination "," 360 Virtual Tour"];function YGe(){const[e,t]=q.useState(0),n=q.useRef(null);return q.useEffect(()=>{const r=n.current;if(!r)return;const s=()=>{t(c=>(c+1)%_Y.length)};return r.addEventListener("ended",s),()=>r.removeEventListener("ended",s)},[]),$.jsxs("div",{className:"simple-tabs-container",children:[$.jsxs("div",{className:"headings",children:[$.jsx("h4",{className:"small-heading",children:"Visualize your site like never before"}),$.jsx("h1",{className:"big-heading",children:"All in one platform to visualize, track, and manage every site throughout entire project lifecycle"})]}),$.jsxs("div",{className:"content-wrapper",children:[$.jsx("div",{className:"tabs-left",children:_Y.map((r,s)=>$.jsx("div",{className:`tab-item ${s===e?"active":""}`,onClick:()=>t(s),children:r},s))}),$.jsx("div",{className:"tabs-right",children:$.jsx("video",{ref:n,src:lre,autoPlay:!0,muted:!0,loop:!1,controls:!1,playsInline:!0},e)})]})]})}function XGe(){return $.jsx($.Fragment,{children:$.jsxs(WGe,{children:[$.jsx(GGe,{}),$.jsx($$e,{}),$.jsx(YGe,{}),$.jsx(Y$e,{}),$.jsx(U$e,{}),$.jsx(HGe,{})]})})}const ZGe=jle([{path:"/",element:$.jsx(XGe,{})},hfe,L$e],{basename:""});function cie({children:e}){return q.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[]),e||null}cie.propTypes={children:nt.oneOfType([nt.any,nt.node])};const KGe="#ffffff",QGe="#e3f2fd",JGe="#90caf9",eWe="#2563EB",tWe="#999999",nWe="#1565c0",rWe="#D6E6F5",iWe="#B3D3F0",oWe="#578FCA",sWe="#3E6EA3",aWe="#1F3F66",lWe="#b9f6ca",cWe="#69f0ae",uWe="#00e676",dWe="#00c853",hWe="#ef9a9a",fWe="#f44336",pWe="#c62828",mWe="#fbe9e7",gWe="#ffab91",yWe="#d84315",vWe="#fff8e1",_We="#ffe57f",xWe="#ffc107",bWe="#f8fafc",wWe="#eef2f6",SWe="#e3e8ef",TWe="#cdd5df",EWe="#697586",CWe="#4b5565",AWe="#364152",MWe="#121926",RWe="#111936",DWe="#1a223f",PWe="#29314f",IWe="#212946",kWe="#d7dcec",OWe="#bdc8f0",LWe="#8492c4",zWe="#e3f2fd",FWe="#2196f3",BWe="#1e88e5",NWe="#90caf9",jWe="#1565c0",VWe="#d1c4e9",UWe="#7c4dff",$We="#651fff",qWe="#b39ddb",HWe="#6200ea",GWe={paper:KGe,primaryLight:QGe,primary200:JGe,primaryMain:eWe,primaryDark:tWe,primary800:nWe,secondaryLight:rWe,secondary200:iWe,secondaryMain:oWe,secondaryDark:sWe,secondary800:aWe,successLight:lWe,success200:cWe,successMain:uWe,successDark:dWe,errorLight:hWe,errorMain:fWe,errorDark:pWe,orangeLight:mWe,orangeMain:gWe,orangeDark:yWe,warningLight:vWe,warningMain:_We,warningDark:xWe,grey50:bWe,grey100:wWe,grey200:SWe,grey300:TWe,grey500:EWe,grey600:CWe,grey700:AWe,grey900:MWe,darkPaper:RWe,darkBackground:DWe,darkLevel1:PWe,darkLevel2:IWe,darkTextTitle:kWe,darkTextPrimary:OWe,darkTextSecondary:LWe,darkPrimaryLight:zWe,darkPrimaryMain:FWe,darkPrimaryDark:BWe,darkPrimary200:NWe,darkPrimary800:jWe,darkSecondaryLight:VWe,darkSecondaryMain:UWe,darkSecondaryDark:$We,darkSecondary200:qWe,darkSecondary800:HWe};function WWe(e,t){let n;switch(t){case"default":default:n=GWe}return GT({palette:{mode:e,common:{black:n.darkPaper},primary:{light:n.primaryLight,main:n.primaryMain,dark:n.primaryDark,200:n.primary200,800:n.primary800},secondary:{light:n.secondaryLight,main:n.secondaryMain,dark:n.secondaryDark,200:n.secondary200,800:n.secondary800},error:{light:n.errorLight,main:n.errorMain,dark:n.errorDark},orange:{light:n.orangeLight,main:n.orangeMain,dark:n.orangeDark},warning:{light:n.warningLight,main:n.warningMain,dark:n.warningDark,contrastText:n.grey700},success:{light:n.successLight,200:n.success200,main:n.successMain,dark:n.successDark},grey:{50:n.grey50,100:n.grey100,500:n.grey500,600:n.grey600,700:n.grey700,900:n.grey900},dark:{light:n.darkTextPrimary,main:n.darkLevel1,dark:n.darkLevel2,800:n.darkBackground,900:n.darkPaper},text:{primary:n.grey700,secondary:n.grey500,dark:n.grey900,hint:n.grey100},divider:n.grey200,background:{paper:n.paper,default:n.paper}}})}function YWe(e,t,n){return{fontFamily:n,h6:{fontWeight:500,color:e.palette.grey[900],fontSize:"0.75rem"},h5:{fontSize:"0.875rem",color:e.palette.grey[900],fontWeight:500},h4:{fontSize:"1rem",color:e.palette.grey[900],fontWeight:600},h3:{fontSize:"1.25rem",color:e.palette.grey[900],fontWeight:600},h2:{fontSize:"1.5rem",color:e.palette.grey[900],fontWeight:700},h1:{fontSize:"2.125rem",color:e.palette.grey[900],fontWeight:700},subtitle1:{fontSize:"0.875rem",fontWeight:500,color:e.palette.text.dark},subtitle2:{fontSize:"0.75rem",fontWeight:400,color:e.palette.text.secondary},caption:{fontSize:"0.75rem",color:e.palette.text.secondary,fontWeight:400},body1:{fontSize:"0.875rem",fontWeight:400,lineHeight:"1.334em"},body2:{letterSpacing:"0em",fontWeight:400,lineHeight:"1.5em",color:e.palette.text.primary},button:{textTransform:"capitalize"},customInput:{marginTop:1,marginBottom:1,"& > label":{top:23,left:0,color:e.palette.grey[500],'&[data-shrink="false"]':{top:5}},"& > div > input":{padding:"30.5px 14px 11.5px !important"},"& legend":{display:"none"},"& fieldset":{top:0}},customMultiSelect:{marginTop:1,marginBottom:1,"& > label":{top:20,left:0,color:e.grey500,'&[data-shrink="false"]':{top:5}},"& > div > input, & > div > select, & > div > div":{padding:"30px 14px 10px !important",height:"56px"},"& legend":{display:"none"},"& fieldset":{top:0}},customSelect:{"& > label":{top:23,left:0,color:e.palette.grey[500],'&[data-shrink="false"]':{top:5}},"& .MuiOutlinedInput-root":{height:"64px",paddingRight:"14px"},"& .MuiOutlinedInput-input":{padding:"30.5px 14px 11.5px !important",display:"flex",alignItems:"center"},"& legend":{display:"none"},"& fieldset":{top:0}},mainContent:{backgroundColor:e.palette.grey[100],width:"100%",minHeight:"calc(100vh - 88px)",flexGrow:1,padding:"20px",marginTop:"88px",marginRight:"20px",borderRadius:`${t}px`},menuCaption:{fontSize:"0.875rem",fontWeight:500,color:e.palette.grey[900],padding:"6px",textTransform:"capitalize",marginTop:"10px"},subMenuCaption:{fontSize:"0.6875rem",fontWeight:500,color:e.palette.text.secondary,textTransform:"capitalize"},commonAvatar:{cursor:"pointer",borderRadius:"8px"},smallAvatar:{width:"22px",height:"22px",fontSize:"1rem"},mediumAvatar:{width:"34px",height:"34px",fontSize:"1.2rem"},largeAvatar:{width:"44px",height:"44px",fontSize:"1.5rem"}}}function uie(e){return e}function XWe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var ZWe=800,KWe=16,QWe=Date.now;function JWe(e){var t=0,n=0;return function(){var r=QWe(),s=KWe-(r-n);if(n=r,s>0){if(++t>=ZWe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function e9e(e){return function(){return e}}var t9e=cR?function(e,t){return cR(e,"toString",{configurable:!0,enumerable:!1,value:e9e(t),writable:!0})}:uie,n9e=JWe(t9e),xY=Math.max;function r9e(e,t,n){return t=xY(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,c=xY(r.length-t,0),h=Array(c);++s<c;)h[s]=r[t+s];s=-1;for(var i=Array(t+1);++s<t;)i[s]=r[s];return i[t]=n(h),XWe(e,this,i)}}function i9e(e,t){return n9e(r9e(e,t,uie),e+"")}function o9e(e,t,n){if(!fv(n))return!1;var r=typeof t;return(r=="number"?vD(n)&&PJ(t,n.length):r=="string"&&t in n)?mD(n[t],e):!1}function s9e(e){return i9e(function(t,n){var r=-1,s=n.length,c=s>1?n[s-1]:void 0,h=s>2?n[2]:void 0;for(c=e.length>3&&typeof c=="function"?(s--,c):void 0,h&&o9e(n[0],n[1],h)&&(c=s<3?void 0:c,s=1),t=Object(t);++r<s;){var i=n[r];i&&e(t,i,r,c)}return t})}function a9e(e){return function(t,n,r){for(var s=-1,c=Object(t),h=r(t),i=h.length;i--;){var g=h[++s];if(n(c[g],g,c)===!1)break}return t}}var l9e=a9e();function NB(e,t,n){(n!==void 0&&!mD(e[t],n)||n===void 0&&!(t in e))&&Dj(e,t,n)}function c9e(e){return hv(e)&&vD(e)}function jB(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function u9e(e){return aE(e,lE(e))}function d9e(e,t,n,r,s,c,h){var i=jB(e,n),g=jB(t,n),w=h.get(g);if(w){NB(e,n,w);return}var T=c?c(i,g,n+"",e,t,h):void 0,A=T===void 0;if(A){var D=w0(g),k=!D&&Pj(g),I=!D&&!k&&OJ(g);T=g,D||k||I?w0(i)?T=i:c9e(i)?T=Lj(i):k?(A=!1,T=FJ(g,!0)):I?(A=!1,T=UJ(g,!0)):T=[]:YF(g)||XF(g)?(T=i,XF(i)?T=u9e(i):(!fv(i)||Rj(i))&&(T=$J(g))):A=!1}A&&(h.set(g,T),s(T,g,r,c,h),h.delete(g)),NB(e,n,T)}function die(e,t,n,r,s){e!==t&&l9e(t,function(c,h){if(s||(s=new q0),fv(c))d9e(e,t,h,n,die,r,s);else{var i=r?r(jB(e,h),c,h+"",e,t,s):void 0;i===void 0&&(i=c),NB(e,h,i)}},lE)}var h9e=s9e(function(e,t,n){die(e,t,n)});function f9e(e){return{MuiChip:{defaultProps:{color:"primary",variant:"light"},styleOverrides:{root:{"&.MuiChip-deletable .MuiChip-deleteIcon":{color:"inherit"},variants:[{props:{variant:"light"},style:({ownerState:t})=>{const n=e.palette[t.color];return{...n&&{color:n.main,backgroundColor:n.light,...t.color==="error"&&{backgroundColor:ai(n.light,.25)},...t.color==="success"&&{backgroundColor:ai(n.light,.5)},...(t.color==="warning"||t.color==="success")&&{color:n.dark},"&.MuiChip-clickable":{"&:hover":{color:n.light,backgroundColor:n.dark}}}}}},{props:{variant:"outlined",color:"warning"},style:{borderColor:e.palette.warning.dark,color:e.palette.warning.dark}},{props:{variant:"outlined",color:"success"},style:{borderColor:e.palette.success.dark,color:e.palette.success.dark}}]}}}}}function p9e(e){return h9e(f9e(e))}function m9e(e,t,n){const r=e.palette.grey[50],s=e.palette.secondary.light,c=e.palette.secondary.dark;return{MuiButton:{styleOverrides:{root:{fontWeight:500,borderRadius:"4px"}}},MuiCheckbox:{styleOverrides:{root:{"& + .MuiFormControlLabel-label":{marginTop:2}}}},MuiPaper:{defaultProps:{elevation:0},styleOverrides:{root:{backgroundImage:"none"},rounded:{borderRadius:`${t}px`}}},MuiCardHeader:{styleOverrides:{root:{color:e.palette.text.dark,padding:"24px"},title:{fontSize:"1.125rem"}}},MuiCardContent:{styleOverrides:{root:{padding:"24px"}}},MuiCardActions:{styleOverrides:{root:{padding:"24px"}}},MuiAlert:{styleOverrides:{root:{alignItems:"center"},outlined:{border:"1px dashed"}}},MuiListItemButton:{styleOverrides:{root:{color:e.palette.text.primary,paddingTop:"10px",paddingBottom:"10px","&.Mui-selected":{color:c,backgroundColor:s,"&:hover":{backgroundColor:s},"& .MuiListItemIcon-root":{color:c}},"&:hover":{backgroundColor:s,color:c,"& .MuiListItemIcon-root":{color:c}}}}},MuiListItemIcon:{styleOverrides:{root:{color:e.palette.text.primary,minWidth:"36px"}}},MuiListItemText:{styleOverrides:{primary:{color:e.palette.text.dark}}},MuiInputBase:{styleOverrides:{input:{color:e.palette.text.dark,"&::placeholder":{color:e.palette.text.secondary,fontSize:"0.875rem"}}}},MuiOutlinedInput:{styleOverrides:{root:{background:n?r:"transparent",borderRadius:`${t}px`,"& .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.grey[400]},"&:hover $notchedOutline":{borderColor:e.palette.primary.light},"&.MuiInputBase-multiline":{padding:1}},input:{fontWeight:500,background:n?r:"transparent",padding:"15.5px 14px",borderRadius:`${t}px`,"&.MuiInputBase-inputSizeSmall":{padding:"10px 14px","&.MuiInputBase-inputAdornedStart":{paddingLeft:0}}},inputAdornedStart:{paddingLeft:4},notchedOutline:{borderRadius:`${t}px`}}},MuiSlider:{styleOverrides:{root:{"&.Mui-disabled":{color:e.palette.grey[300]}},mark:{backgroundColor:e.palette.background.paper,width:"4px"},valueLabel:{color:e.palette.primary.light}}},MuiAutocomplete:{styleOverrides:{root:{"& .MuiAutocomplete-tag":{background:e.palette.secondary.light,borderRadius:4,color:e.palette.text.dark,".MuiChip-deleteIcon":{color:e.palette.secondary[200]}}},popper:{borderRadius:`${t}px`,boxShadow:"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)"}}},MuiDivider:{styleOverrides:{root:{borderColor:e.palette.divider}}},MuiSelect:{styleOverrides:{select:{"&:focus":{backgroundColor:"transparent"}}}},MuiAvatar:{styleOverrides:{root:{color:e.palette.primary.dark,background:e.palette.primary[200]}}},MuiTimelineContent:{styleOverrides:{root:{color:e.palette.text.dark,fontSize:"16px"}}},MuiTreeItem:{styleOverrides:{label:{marginTop:14,marginBottom:14}}},MuiTimelineDot:{styleOverrides:{root:{boxShadow:"none"}}},MuiInternalDateTimePickerTabs:{styleOverrides:{tabs:{backgroundColor:e.palette.primary.light,"& .MuiTabs-flexContainer":{borderColor:e.palette.primary[200]},"& .MuiTab-root":{color:e.palette.text.dark},"& .MuiTabs-indicator":{backgroundColor:e.palette.primary.dark},"& .Mui-selected":{color:e.palette.primary.dark}}}},MuiTabs:{styleOverrides:{flexContainer:{borderBottom:"1px solid",borderColor:e.palette.grey[200]}}},MuiDialog:{styleOverrides:{paper:{padding:"12px 0 12px 0"}}},MuiTableCell:{styleOverrides:{root:{borderColor:e.palette.grey[200],"&.MuiTableCell-head":{fontSize:"0.875rem",color:e.palette.grey[900],fontWeight:500}}}},MuiDateTimePickerToolbar:{styleOverrides:{timeDigitsContainer:{alignItems:"center"}}},MuiTooltip:{styleOverrides:{tooltip:{margin:0,lineHeight:1.4,color:e.palette.background.paper,background:e.palette.text.primary}}},MuiDialogTitle:{styleOverrides:{root:{fontSize:"1.25rem"}}},MuiPaginationItem:{styleOverrides:{root:{margin:"3px"}}},MuiDataGrid:{defaultProps:{rowHeight:54},styleOverrides:{root:{borderWidth:0,"& .MuiDataGrid-columnHeader--filledGroup":{borderBottomWidth:0},"& .MuiDataGrid-columnHeader--emptyGroup":{borderBottomWidth:0},"& .MuiFormControl-root>.MuiInputBase-root":{backgroundColor:`${e.palette.background.default} !important`,borderColor:`${e.palette.divider} !important`}},withBorderColor:{borderColor:e.palette.divider},toolbarContainer:{"& .MuiButton-root":{paddingLeft:"16px !important",paddingRight:"16px !important"}},columnHeader:{color:e.palette.grey[600],paddingLeft:24,paddingRight:24},footerContainer:{"&.MuiDataGrid-withBorderColor":{borderBottom:"none"}},columnHeaderCheckbox:{paddingLeft:0,paddingRight:0},cellCheckbox:{paddingLeft:0,paddingRight:0},cell:{borderWidth:1,paddingLeft:24,paddingRight:24,borderColor:e.palette.divider,"&.MuiDataGrid-cell--withRenderer > div ":{" > .high":{background:e.palette.success.light},"& > .medium":{background:e.palette.warning.light},"& > .low":{background:e.palette.error.light}}}}},...p9e(e)}}function g9e(e,t){const n=ai(t,.24);return{z1:`0 1px 2px 0 ${n}`,z8:`0 8px 16px 0 ${n}`,z12:`0 12px 24px 0 ${n} 0 10px 20px 0 ${n}`,z16:`0 0 3px 0 ${n} 0 14px 28px -5px ${n}`,z20:`0 0 3px 0 ${n} 0 18px 36px -5px ${n}`,z24:`0 0 6px 0 ${n} 0 21px 44px 0 ${n}`,primary:`0px 12px 14px 0px ${ai(e.palette.primary.main,.3)}`,secondary:`0px 12px 14px 0px ${ai(e.palette.secondary.main,.3)}`,orange:`0px 12px 14px 0px ${ai(e.palette.orange.main,.3)}`,success:`0px 12px 14px 0px ${ai(e.palette.success.main,.3)}`,warning:`0px 12px 14px 0px ${ai(e.palette.warning.main,.3)}`,error:`0px 12px 14px 0px ${ai(e.palette.error.main,.3)}`}}function y9e(e,t){return g9e(t,t.palette.grey[900])}function hie({children:e}){const{borderRadius:t,fontFamily:n,mode:r,outlinedFilled:s,presetColor:c}=y1(),h=q.useMemo(()=>WWe(r,c),[r,c]),i=q.useMemo(()=>YWe(h,t,n),[h,t,n]),g=q.useMemo(()=>y9e(r,h),[r,h]),w=q.useMemo(()=>({direction:"ltr",palette:h.palette,mixins:{toolbar:{minHeight:"48px",padding:"16px","@media (min-width: 600px)":{minHeight:"48px"}}},typography:i,customShadows:g}),[h,g,i]),T=GT(w);return T.components=q.useMemo(()=>m9e(T,t,s),[T,t,s]),$.jsx(nde,{injectFirst:!0,children:$.jsxs(sfe,{theme:T,children:[$.jsx(KTe,{enableColorScheme:!0}),e]})})}hie.propTypes={children:nt.node};function v9e(){return $.jsx(hie,{children:$.jsx(cie,{children:$.jsx($.Fragment,{children:$.jsx(Qle,{router:ZGe})})})})}window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function _9e(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}var t4="persist:",fie="persist/FLUSH",n4="persist/REHYDRATE",pie="persist/PAUSE",mie="persist/PERSIST",gie="persist/PURGE",yie="persist/REGISTER",x9e=-1;function CM(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?CM=function(n){return typeof n}:CM=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},CM(e)}function bY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function b9e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bY(n,!0).forEach(function(r){w9e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bY(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w9e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S9e(e,t,n,r){r.debug;var s=b9e({},n);return e&&CM(e)==="object"&&Object.keys(e).forEach(function(c){c!=="_persist"&&t[c]===n[c]&&(s[c]=e[c])}),s}function T9e(e){var t=e.blacklist||null,n=e.whitelist||null,r=e.transforms||[],s=e.throttle||0,c="".concat(e.keyPrefix!==void 0?e.keyPrefix:t4).concat(e.key),h=e.storage,i;e.serialize===!1?i=function(ee){return ee}:typeof e.serialize=="function"?i=e.serialize:i=E9e;var g=e.writeFailHandler||null,w={},T={},A=[],D=null,k=null,I=function(ee){Object.keys(ee).forEach(function(se){V(se)&&w[se]!==ee[se]&&A.indexOf(se)===-1&&A.push(se)}),Object.keys(w).forEach(function(se){ee[se]===void 0&&V(se)&&A.indexOf(se)===-1&&w[se]!==void 0&&A.push(se)}),D===null&&(D=setInterval(F,s)),w=ee};function F(){if(A.length===0){D&&clearInterval(D),D=null;return}var K=A.shift(),ee=r.reduce(function(se,he){return he.in(se,K,w)},w[K]);if(ee!==void 0)try{T[K]=i(ee)}catch(se){console.error("redux-persist/createPersistoid: error serializing state",se)}else delete T[K];A.length===0&&j()}function j(){Object.keys(T).forEach(function(K){w[K]===void 0&&delete T[K]}),k=h.setItem(c,i(T)).catch(W)}function V(K){return!(n&&n.indexOf(K)===-1&&K!=="_persist"||t&&t.indexOf(K)!==-1)}function W(K){g&&g(K)}var Z=function(){for(;A.length!==0;)F();return k||Promise.resolve()};return{update:I,flush:Z}}function E9e(e){return JSON.stringify(e)}function C9e(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:t4).concat(e.key),r=e.storage;e.debug;var s;return e.deserialize===!1?s=function(h){return h}:typeof e.deserialize=="function"?s=e.deserialize:s=A9e,r.getItem(n).then(function(c){if(c)try{var h={},i=s(c);return Object.keys(i).forEach(function(g){h[g]=t.reduceRight(function(w,T){return T.out(w,g,i)},s(i[g]))}),h}catch(g){throw g}else return})}function A9e(e){return JSON.parse(e)}function M9e(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:t4).concat(e.key);return t.removeItem(n,R9e)}function R9e(e){}function wY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function xg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wY(n,!0).forEach(function(r){D9e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wY(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D9e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P9e(e,t){if(e==null)return{};var n=I9e(e,t),r,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function I9e(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var k9e=5e3;function O9e(e,t){var n=e.version!==void 0?e.version:x9e;e.debug;var r=e.stateReconciler===void 0?S9e:e.stateReconciler,s=e.getStoredState||C9e,c=e.timeout!==void 0?e.timeout:k9e,h=null,i=!1,g=!0,w=function(A){return A._persist.rehydrated&&h&&!g&&h.update(A),A};return function(T,A){var D=T||{},k=D._persist,I=P9e(D,["_persist"]),F=I;if(A.type===mie){var j=!1,V=function(ye,_e){j||(A.rehydrate(e.key,ye,_e),j=!0)};if(c&&setTimeout(function(){!j&&V(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},c),g=!1,h||(h=T9e(e)),k)return xg({},t(F,A),{_persist:k});if(typeof A.rehydrate!="function"||typeof A.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return A.register(e.key),s(e).then(function(he){var ye=e.migrate||function(_e,ae){return Promise.resolve(_e)};ye(he,n).then(function(_e){V(_e)},function(_e){V(void 0,_e)})},function(he){V(void 0,he)}),xg({},t(F,A),{_persist:{version:n,rehydrated:!1}})}else{if(A.type===gie)return i=!0,A.result(M9e(e)),xg({},t(F,A),{_persist:k});if(A.type===fie)return A.result(h&&h.flush()),xg({},t(F,A),{_persist:k});if(A.type===pie)g=!0;else if(A.type===n4){if(i)return xg({},F,{_persist:xg({},k,{rehydrated:!0})});if(A.key===e.key){var W=t(F,A),Z=A.payload,K=r!==!1&&Z!==void 0?r(Z,T,W,e):W,ee=xg({},K,{_persist:xg({},k,{rehydrated:!0})});return w(ee)}}}if(!k)return t(T,A);var se=t(F,A);return se===F?T:w(xg({},se,{_persist:k}))}}function SY(e){return F9e(e)||z9e(e)||L9e()}function L9e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function z9e(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function F9e(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function TY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TY(n,!0).forEach(function(r){B9e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TY(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B9e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vie={registry:[],bootstrapped:!1},N9e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vie,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case yie:return VB({},t,{registry:[].concat(SY(t.registry),[n.key])});case n4:var r=t.registry.indexOf(n.key),s=SY(t.registry);return s.splice(r,1),VB({},t,{registry:s,bootstrapped:s.length===0});default:return t}};function j9e(e,t,n){var r=dj(N9e,vie,void 0),s=function(g){r.dispatch({type:yie,key:g})},c=function(g,w,T){var A={type:n4,payload:w,err:T,key:g};e.dispatch(A),r.dispatch(A)},h=VB({},r,{purge:function(){var g=[];return e.dispatch({type:gie,result:function(T){g.push(T)}}),Promise.all(g)},flush:function(){var g=[];return e.dispatch({type:fie,result:function(T){g.push(T)}}),Promise.all(g)},pause:function(){e.dispatch({type:pie})},persist:function(){e.dispatch({type:mie,register:s,rehydrate:c})}});return h.persist(),h}var pS={},$A={},qA={},EY;function V9e(){if(EY)return qA;EY=1,qA.__esModule=!0,qA.default=s;function e(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(i){return typeof i}:e=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e(c)}function t(){}var n={getItem:t,setItem:t,removeItem:t};function r(c){if((typeof self>"u"?"undefined":e(self))!=="object"||!(c in self))return!1;try{var h=self[c],i="redux-persist ".concat(c," test");h.setItem(i,"test"),h.getItem(i),h.removeItem(i)}catch{return!1}return!0}function s(c){var h="".concat(c,"Storage");return r(h)?self[h]:n}return qA}var CY;function U9e(){if(CY)return $A;CY=1,$A.__esModule=!0,$A.default=n;var e=t(V9e());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=(0,e.default)(r);return{getItem:function(h){return new Promise(function(i,g){i(s.getItem(h))})},setItem:function(h,i){return new Promise(function(g,w){g(s.setItem(h,i))})},removeItem:function(h){return new Promise(function(i,g){i(s.removeItem(h))})}}}return $A}var AY;function $9e(){if(AY)return pS;AY=1,pS.__esModule=!0,pS.default=void 0;var e=t(U9e());function t(r){return r&&r.__esModule?r:{default:r}}var n=(0,e.default)("local");return pS.default=n,pS}var q9e=$9e();const H9e=_a(q9e),G9e={key:"lockedByMe",storage:H9e,whitelist:["token","user"]},W9e=O9e(G9e,x1e),_ie=o1e({reducer:{auth:W9e}}),Y9e=j9e(_ie);function AM(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?AM=function(n){return typeof n}:AM=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},AM(e)}function X9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z9e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K9e(e,t,n){return t&&Z9e(e.prototype,t),e}function Q9e(e,t){return t&&(AM(t)==="object"||typeof t=="function")?t:MM(e)}function UB(e){return UB=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},UB(e)}function MM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$B(e,t)}function $B(e,t){return $B=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},$B(e,t)}function RM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xie=function(e){J9e(t,e);function t(){var n,r;X9e(this,t);for(var s=arguments.length,c=new Array(s),h=0;h<s;h++)c[h]=arguments[h];return r=Q9e(this,(n=UB(t)).call.apply(n,[this].concat(c))),RM(MM(r),"state",{bootstrapped:!1}),RM(MM(r),"_unsubscribe",void 0),RM(MM(r),"handlePersistorState",function(){var i=r.props.persistor,g=i.getState(),w=g.bootstrapped;w&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return K9e(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(q.PureComponent);RM(xie,"defaultProps",{children:null,loading:null});const e7e=document.getElementById("root"),t7e=qse.createRoot(e7e);t7e.render($.jsx(sQ,{children:$.jsx(Mbe,{store:_ie,children:$.jsx(xie,{loading:null,persistor:Y9e,children:$.jsx(bNe,{maxSnack:3,children:$.jsx(v9e,{})})})})}));_9e();export{YQ as $,sbe as A,Dr as B,dA as C,gu as D,Lse as E,fc as F,_o as G,mh as H,Sf as I,JY as J,l7e as K,Ny as L,pc as M,Ofe as N,Fp as O,nt as P,y0 as Q,fr as R,yl as S,rr as T,pr as U,qr as V,Wn as W,dr as X,Mq as Y,iD as Z,WT as _,iv as a,hh as a0,Vte as b,Pbe as c,Obe as d,QJ as e,e5 as f,Rp as g,_S as h,fT as i,$ as j,Eb as k,ms as l,e4 as m,SX as n,f1 as o,vN as p,lFe as q,q as r,s7e as s,c7e as t,cs as u,xQ as v,Jy as w,Ot as x,iQ as y,Es as z};
