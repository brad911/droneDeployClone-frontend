const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Login-8lJdv9pY.js","./VisibilityOff-vVtI8ZLS.js","./Register-8HjlqoyF.js","./Typography-BDVnZRk3.js","./CardSecondaryAction-BSibRVWT.js","./Color-B-NZ0slH.js","./Shadow-FRULrHxL.js"])))=>i.map(i=>d[i]);
var Mq=Object.defineProperty;var Rq=(e,t,n)=>t in e?Mq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zb=(e,t,n)=>Rq(e,typeof t!="symbol"?t+"":t,n);function Iq(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=n(u);fetch(u.href,f)}})();function Im(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pq(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,u.get?u:{enumerable:!0,get:function(){return e[a]}})}),n}var gM={exports:{}},Bb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bz;function Dq(){if(bz)return Bb;bz=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,u,f){var y=null;if(f!==void 0&&(y=""+f),u.key!==void 0&&(y=""+u.key),"key"in u){f={};for(var r in u)r!=="key"&&(f[r]=u[r])}else f=u;return u=f.ref,{$$typeof:e,type:a,key:y,ref:u!==void 0?u:null,props:f}}return Bb.Fragment=t,Bb.jsx=n,Bb.jsxs=n,Bb}var wz;function Oq(){return wz||(wz=1,gM.exports=Dq()),gM.exports}var te=Oq(),yM={exports:{}},Fb={},_M={exports:{}},vM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sz;function Lq(){return Sz||(Sz=1,function(e){function t($e,it){var Tt=$e.length;$e.push(it);e:for(;0<Tt;){var xt=Tt-1>>>1,je=$e[xt];if(0<u(je,it))$e[xt]=it,$e[Tt]=je,Tt=xt;else break e}}function n($e){return $e.length===0?null:$e[0]}function a($e){if($e.length===0)return null;var it=$e[0],Tt=$e.pop();if(Tt!==it){$e[0]=Tt;e:for(var xt=0,je=$e.length,ht=je>>>1;xt<ht;){var Bt=2*(xt+1)-1,Ft=$e[Bt],on=Bt+1,en=$e[on];if(0>u(Ft,Tt))on<je&&0>u(en,Ft)?($e[xt]=en,$e[on]=Tt,xt=on):($e[xt]=Ft,$e[Bt]=Tt,xt=Bt);else if(on<je&&0>u(en,Tt))$e[xt]=en,$e[on]=Tt,xt=on;else break e}}return it}function u($e,it){var Tt=$e.sortIndex-it.sortIndex;return Tt!==0?Tt:$e.id-it.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,r=y.now();e.unstable_now=function(){return y.now()-r}}var S=[],A=[],R=1,O=null,z=3,N=!1,U=!1,H=!1,K=!1,W=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function se($e){for(var it=n(A);it!==null;){if(it.callback===null)a(A);else if(it.startTime<=$e)a(A),it.sortIndex=it.expirationTime,t(S,it);else break;it=n(A)}}function ue($e){if(H=!1,se($e),!U)if(n(S)!==null)U=!0,pe||(pe=!0,ut());else{var it=n(A);it!==null&&mt(ue,it.startTime-$e)}}var pe=!1,Ce=-1,Le=5,qe=-1;function ye(){return K?!0:!(e.unstable_now()-qe<Le)}function Xe(){if(K=!1,pe){var $e=e.unstable_now();qe=$e;var it=!0;try{e:{U=!1,H&&(H=!1,re(Ce),Ce=-1),N=!0;var Tt=z;try{t:{for(se($e),O=n(S);O!==null&&!(O.expirationTime>$e&&ye());){var xt=O.callback;if(typeof xt=="function"){O.callback=null,z=O.priorityLevel;var je=xt(O.expirationTime<=$e);if($e=e.unstable_now(),typeof je=="function"){O.callback=je,se($e),it=!0;break t}O===n(S)&&a(S),se($e)}else a(S);O=n(S)}if(O!==null)it=!0;else{var ht=n(A);ht!==null&&mt(ue,ht.startTime-$e),it=!1}}break e}finally{O=null,z=Tt,N=!1}it=void 0}}finally{it?ut():pe=!1}}}var ut;if(typeof ne=="function")ut=function(){ne(Xe)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,ot=et.port2;et.port1.onmessage=Xe,ut=function(){ot.postMessage(null)}}else ut=function(){W(Xe,0)};function mt($e,it){Ce=W(function(){$e(e.unstable_now())},it)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_next=function($e){switch(z){case 1:case 2:case 3:var it=3;break;default:it=z}var Tt=z;z=it;try{return $e()}finally{z=Tt}},e.unstable_requestPaint=function(){K=!0},e.unstable_runWithPriority=function($e,it){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var Tt=z;z=$e;try{return it()}finally{z=Tt}},e.unstable_scheduleCallback=function($e,it,Tt){var xt=e.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?xt+Tt:xt):Tt=xt,$e){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=Tt+je,$e={id:R++,callback:it,priorityLevel:$e,startTime:Tt,expirationTime:je,sortIndex:-1},Tt>xt?($e.sortIndex=Tt,t(A,$e),n(S)===null&&$e===n(A)&&(H?(re(Ce),Ce=-1):H=!0,mt(ue,Tt-xt))):($e.sortIndex=je,t(S,$e),U||N||(U=!0,pe||(pe=!0,ut()))),$e},e.unstable_shouldYield=ye,e.unstable_wrapCallback=function($e){var it=z;return function(){var Tt=z;z=it;try{return $e.apply(this,arguments)}finally{z=Tt}}}}(vM)),vM}var Tz;function kq(){return Tz||(Tz=1,_M.exports=Lq()),_M.exports}var xM={exports:{}},Gr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ez;function zq(){if(Ez)return Gr;Ez=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),y=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.iterator;function z(je){return je===null||typeof je!="object"?null:(je=O&&je[O]||je["@@iterator"],typeof je=="function"?je:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,H={};function K(je,ht,Bt){this.props=je,this.context=ht,this.refs=H,this.updater=Bt||N}K.prototype.isReactComponent={},K.prototype.setState=function(je,ht){if(typeof je!="object"&&typeof je!="function"&&je!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,je,ht,"setState")},K.prototype.forceUpdate=function(je){this.updater.enqueueForceUpdate(this,je,"forceUpdate")};function W(){}W.prototype=K.prototype;function re(je,ht,Bt){this.props=je,this.context=ht,this.refs=H,this.updater=Bt||N}var ne=re.prototype=new W;ne.constructor=re,U(ne,K.prototype),ne.isPureReactComponent=!0;var se=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function Ce(je,ht,Bt,Ft,on,en){return Bt=en.ref,{$$typeof:e,type:je,key:ht,ref:Bt!==void 0?Bt:null,props:en}}function Le(je,ht){return Ce(je.type,ht,void 0,void 0,void 0,je.props)}function qe(je){return typeof je=="object"&&je!==null&&je.$$typeof===e}function ye(je){var ht={"=":"=0",":":"=2"};return"$"+je.replace(/[=:]/g,function(Bt){return ht[Bt]})}var Xe=/\/+/g;function ut(je,ht){return typeof je=="object"&&je!==null&&je.key!=null?ye(""+je.key):ht.toString(36)}function et(){}function ot(je){switch(je.status){case"fulfilled":return je.value;case"rejected":throw je.reason;default:switch(typeof je.status=="string"?je.then(et,et):(je.status="pending",je.then(function(ht){je.status==="pending"&&(je.status="fulfilled",je.value=ht)},function(ht){je.status==="pending"&&(je.status="rejected",je.reason=ht)})),je.status){case"fulfilled":return je.value;case"rejected":throw je.reason}}throw je}function mt(je,ht,Bt,Ft,on){var en=typeof je;(en==="undefined"||en==="boolean")&&(je=null);var jt=!1;if(je===null)jt=!0;else switch(en){case"bigint":case"string":case"number":jt=!0;break;case"object":switch(je.$$typeof){case e:case t:jt=!0;break;case R:return jt=je._init,mt(jt(je._payload),ht,Bt,Ft,on)}}if(jt)return on=on(je),jt=Ft===""?"."+ut(je,0):Ft,se(on)?(Bt="",jt!=null&&(Bt=jt.replace(Xe,"$&/")+"/"),mt(on,ht,Bt,"",function(Hn){return Hn})):on!=null&&(qe(on)&&(on=Le(on,Bt+(on.key==null||je&&je.key===on.key?"":(""+on.key).replace(Xe,"$&/")+"/")+jt)),ht.push(on)),1;jt=0;var Rn=Ft===""?".":Ft+":";if(se(je))for(var Vn=0;Vn<je.length;Vn++)Ft=je[Vn],en=Rn+ut(Ft,Vn),jt+=mt(Ft,ht,Bt,en,on);else if(Vn=z(je),typeof Vn=="function")for(je=Vn.call(je),Vn=0;!(Ft=je.next()).done;)Ft=Ft.value,en=Rn+ut(Ft,Vn++),jt+=mt(Ft,ht,Bt,en,on);else if(en==="object"){if(typeof je.then=="function")return mt(ot(je),ht,Bt,Ft,on);throw ht=String(je),Error("Objects are not valid as a React child (found: "+(ht==="[object Object]"?"object with keys {"+Object.keys(je).join(", ")+"}":ht)+"). If you meant to render a collection of children, use an array instead.")}return jt}function $e(je,ht,Bt){if(je==null)return je;var Ft=[],on=0;return mt(je,Ft,"","",function(en){return ht.call(Bt,en,on++)}),Ft}function it(je){if(je._status===-1){var ht=je._result;ht=ht(),ht.then(function(Bt){(je._status===0||je._status===-1)&&(je._status=1,je._result=Bt)},function(Bt){(je._status===0||je._status===-1)&&(je._status=2,je._result=Bt)}),je._status===-1&&(je._status=0,je._result=ht)}if(je._status===1)return je._result.default;throw je._result}var Tt=typeof reportError=="function"?reportError:function(je){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ht=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof je=="object"&&je!==null&&typeof je.message=="string"?String(je.message):String(je),error:je});if(!window.dispatchEvent(ht))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",je);return}console.error(je)};function xt(){}return Gr.Children={map:$e,forEach:function(je,ht,Bt){$e(je,function(){ht.apply(this,arguments)},Bt)},count:function(je){var ht=0;return $e(je,function(){ht++}),ht},toArray:function(je){return $e(je,function(ht){return ht})||[]},only:function(je){if(!qe(je))throw Error("React.Children.only expected to receive a single React element child.");return je}},Gr.Component=K,Gr.Fragment=n,Gr.Profiler=u,Gr.PureComponent=re,Gr.StrictMode=a,Gr.Suspense=S,Gr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Gr.__COMPILER_RUNTIME={__proto__:null,c:function(je){return ue.H.useMemoCache(je)}},Gr.cache=function(je){return function(){return je.apply(null,arguments)}},Gr.cloneElement=function(je,ht,Bt){if(je==null)throw Error("The argument must be a React element, but you passed "+je+".");var Ft=U({},je.props),on=je.key,en=void 0;if(ht!=null)for(jt in ht.ref!==void 0&&(en=void 0),ht.key!==void 0&&(on=""+ht.key),ht)!pe.call(ht,jt)||jt==="key"||jt==="__self"||jt==="__source"||jt==="ref"&&ht.ref===void 0||(Ft[jt]=ht[jt]);var jt=arguments.length-2;if(jt===1)Ft.children=Bt;else if(1<jt){for(var Rn=Array(jt),Vn=0;Vn<jt;Vn++)Rn[Vn]=arguments[Vn+2];Ft.children=Rn}return Ce(je.type,on,void 0,void 0,en,Ft)},Gr.createContext=function(je){return je={$$typeof:y,_currentValue:je,_currentValue2:je,_threadCount:0,Provider:null,Consumer:null},je.Provider=je,je.Consumer={$$typeof:f,_context:je},je},Gr.createElement=function(je,ht,Bt){var Ft,on={},en=null;if(ht!=null)for(Ft in ht.key!==void 0&&(en=""+ht.key),ht)pe.call(ht,Ft)&&Ft!=="key"&&Ft!=="__self"&&Ft!=="__source"&&(on[Ft]=ht[Ft]);var jt=arguments.length-2;if(jt===1)on.children=Bt;else if(1<jt){for(var Rn=Array(jt),Vn=0;Vn<jt;Vn++)Rn[Vn]=arguments[Vn+2];on.children=Rn}if(je&&je.defaultProps)for(Ft in jt=je.defaultProps,jt)on[Ft]===void 0&&(on[Ft]=jt[Ft]);return Ce(je,en,void 0,void 0,null,on)},Gr.createRef=function(){return{current:null}},Gr.forwardRef=function(je){return{$$typeof:r,render:je}},Gr.isValidElement=qe,Gr.lazy=function(je){return{$$typeof:R,_payload:{_status:-1,_result:je},_init:it}},Gr.memo=function(je,ht){return{$$typeof:A,type:je,compare:ht===void 0?null:ht}},Gr.startTransition=function(je){var ht=ue.T,Bt={};ue.T=Bt;try{var Ft=je(),on=ue.S;on!==null&&on(Bt,Ft),typeof Ft=="object"&&Ft!==null&&typeof Ft.then=="function"&&Ft.then(xt,Tt)}catch(en){Tt(en)}finally{ue.T=ht}},Gr.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Gr.use=function(je){return ue.H.use(je)},Gr.useActionState=function(je,ht,Bt){return ue.H.useActionState(je,ht,Bt)},Gr.useCallback=function(je,ht){return ue.H.useCallback(je,ht)},Gr.useContext=function(je){return ue.H.useContext(je)},Gr.useDebugValue=function(){},Gr.useDeferredValue=function(je,ht){return ue.H.useDeferredValue(je,ht)},Gr.useEffect=function(je,ht,Bt){var Ft=ue.H;if(typeof Bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ft.useEffect(je,ht)},Gr.useId=function(){return ue.H.useId()},Gr.useImperativeHandle=function(je,ht,Bt){return ue.H.useImperativeHandle(je,ht,Bt)},Gr.useInsertionEffect=function(je,ht){return ue.H.useInsertionEffect(je,ht)},Gr.useLayoutEffect=function(je,ht){return ue.H.useLayoutEffect(je,ht)},Gr.useMemo=function(je,ht){return ue.H.useMemo(je,ht)},Gr.useOptimistic=function(je,ht){return ue.H.useOptimistic(je,ht)},Gr.useReducer=function(je,ht,Bt){return ue.H.useReducer(je,ht,Bt)},Gr.useRef=function(je){return ue.H.useRef(je)},Gr.useState=function(je){return ue.H.useState(je)},Gr.useSyncExternalStore=function(je,ht,Bt){return ue.H.useSyncExternalStore(je,ht,Bt)},Gr.useTransition=function(){return ue.H.useTransition()},Gr.version="19.1.0",Gr}var Cz;function Ch(){return Cz||(Cz=1,xM.exports=zq()),xM.exports}var bM={exports:{}},Rl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Az;function Bq(){if(Az)return Rl;Az=1;var e=Ch();function t(S){var A="https://react.dev/errors/"+S;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)A+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+S+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(S,A,R){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:O==null?null:""+O,children:S,containerInfo:A,implementation:R}}var y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function r(S,A){if(S==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Rl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Rl.createPortal=function(S,A){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(t(299));return f(S,A,null,R)},Rl.flushSync=function(S){var A=y.T,R=a.p;try{if(y.T=null,a.p=2,S)return S()}finally{y.T=A,a.p=R,a.d.f()}},Rl.preconnect=function(S,A){typeof S=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,a.d.C(S,A))},Rl.prefetchDNS=function(S){typeof S=="string"&&a.d.D(S)},Rl.preinit=function(S,A){if(typeof S=="string"&&A&&typeof A.as=="string"){var R=A.as,O=r(R,A.crossOrigin),z=typeof A.integrity=="string"?A.integrity:void 0,N=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;R==="style"?a.d.S(S,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:O,integrity:z,fetchPriority:N}):R==="script"&&a.d.X(S,{crossOrigin:O,integrity:z,fetchPriority:N,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Rl.preinitModule=function(S,A){if(typeof S=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var R=r(A.as,A.crossOrigin);a.d.M(S,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&a.d.M(S)},Rl.preload=function(S,A){if(typeof S=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var R=A.as,O=r(R,A.crossOrigin);a.d.L(S,R,{crossOrigin:O,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Rl.preloadModule=function(S,A){if(typeof S=="string")if(A){var R=r(A.as,A.crossOrigin);a.d.m(S,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else a.d.m(S)},Rl.requestFormReset=function(S){a.d.r(S)},Rl.unstable_batchedUpdates=function(S,A){return S(A)},Rl.useFormState=function(S,A,R){return y.H.useFormState(S,A,R)},Rl.useFormStatus=function(){return y.H.useHostTransitionStatus()},Rl.version="19.1.0",Rl}var Mz;function A4(){if(Mz)return bM.exports;Mz=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bM.exports=Bq(),bM.exports}var Rz;function Fq(){if(Rz)return Fb;Rz=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=kq(),t=Ch(),n=A4();function a(d){var _="https://react.dev/errors/"+d;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+d+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function f(d){var _=d,T=d;if(d.alternate)for(;_.return;)_=_.return;else{d=_;do _=d,(_.flags&4098)!==0&&(T=_.return),d=_.return;while(d)}return _.tag===3?T:null}function y(d){if(d.tag===13){var _=d.memoizedState;if(_===null&&(d=d.alternate,d!==null&&(_=d.memoizedState)),_!==null)return _.dehydrated}return null}function r(d){if(f(d)!==d)throw Error(a(188))}function S(d){var _=d.alternate;if(!_){if(_=f(d),_===null)throw Error(a(188));return _!==d?null:d}for(var T=d,D=_;;){var $=T.return;if($===null)break;var Q=$.alternate;if(Q===null){if(D=$.return,D!==null){T=D;continue}break}if($.child===Q.child){for(Q=$.child;Q;){if(Q===T)return r($),d;if(Q===D)return r($),_;Q=Q.sibling}throw Error(a(188))}if(T.return!==D.return)T=$,D=Q;else{for(var xe=!1,Be=$.child;Be;){if(Be===T){xe=!0,T=$,D=Q;break}if(Be===D){xe=!0,D=$,T=Q;break}Be=Be.sibling}if(!xe){for(Be=Q.child;Be;){if(Be===T){xe=!0,T=Q,D=$;break}if(Be===D){xe=!0,D=Q,T=$;break}Be=Be.sibling}if(!xe)throw Error(a(189))}}if(T.alternate!==D)throw Error(a(190))}if(T.tag!==3)throw Error(a(188));return T.stateNode.current===T?d:_}function A(d){var _=d.tag;if(_===5||_===26||_===27||_===6)return d;for(d=d.child;d!==null;){if(_=A(d),_!==null)return _;d=d.sibling}return null}var R=Object.assign,O=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),qe=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),Xe=Symbol.iterator;function ut(d){return d===null||typeof d!="object"?null:(d=Xe&&d[Xe]||d["@@iterator"],typeof d=="function"?d:null)}var et=Symbol.for("react.client.reference");function ot(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===et?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case U:return"Fragment";case K:return"Profiler";case H:return"StrictMode";case ue:return"Suspense";case pe:return"SuspenseList";case qe:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case N:return"Portal";case ne:return(d.displayName||"Context")+".Provider";case re:return(d._context.displayName||"Context")+".Consumer";case se:var _=d.render;return d=d.displayName,d||(d=_.displayName||_.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Ce:return _=d.displayName||null,_!==null?_:ot(d.type)||"Memo";case Le:_=d._payload,d=d._init;try{return ot(d(_))}catch{}}return null}var mt=Array.isArray,$e=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},xt=[],je=-1;function ht(d){return{current:d}}function Bt(d){0>je||(d.current=xt[je],xt[je]=null,je--)}function Ft(d,_){je++,xt[je]=d.current,d.current=_}var on=ht(null),en=ht(null),jt=ht(null),Rn=ht(null);function Vn(d,_){switch(Ft(jt,_),Ft(en,d),Ft(on,null),_.nodeType){case 9:case 11:d=(d=_.documentElement)&&(d=d.namespaceURI)?Gv(d):0;break;default:if(d=_.tagName,_=_.namespaceURI)_=Gv(_),d=qv(_,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}Bt(on),Ft(on,d)}function Hn(){Bt(on),Bt(en),Bt(jt)}function On(d){d.memoizedState!==null&&Ft(Rn,d);var _=on.current,T=qv(_,d.type);_!==T&&(Ft(en,d),Ft(on,T))}function ai(d){en.current===d&&(Bt(on),Bt(en)),Rn.current===d&&(Bt(Rn),yg._currentValue=Tt)}var oi=Object.prototype.hasOwnProperty,Ln=e.unstable_scheduleCallback,zn=e.unstable_cancelCallback,hi=e.unstable_shouldYield,fi=e.unstable_requestPaint,ci=e.unstable_now,Pi=e.unstable_getCurrentPriorityLevel,ii=e.unstable_ImmediatePriority,pi=e.unstable_UserBlockingPriority,yi=e.unstable_NormalPriority,dt=e.unstable_LowPriority,Cn=e.unstable_IdlePriority,wn=e.log,In=e.unstable_setDisableYieldValue,qn=null,Xn=null;function Ni(d){if(typeof wn=="function"&&In(d),Xn&&typeof Xn.setStrictMode=="function")try{Xn.setStrictMode(qn,d)}catch{}}var Mi=Math.clz32?Math.clz32:qr,pr=Math.log,Nn=Math.LN2;function qr(d){return d>>>=0,d===0?32:31-(pr(d)/Nn|0)|0}var mr=256,Qi=4194304;function li(d){var _=d&42;if(_!==0)return _;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function hr(d,_,T){var D=d.pendingLanes;if(D===0)return 0;var $=0,Q=d.suspendedLanes,xe=d.pingedLanes;d=d.warmLanes;var Be=D&134217727;return Be!==0?(D=Be&~Q,D!==0?$=li(D):(xe&=Be,xe!==0?$=li(xe):T||(T=Be&~d,T!==0&&($=li(T))))):(Be=D&~Q,Be!==0?$=li(Be):xe!==0?$=li(xe):T||(T=D&~d,T!==0&&($=li(T)))),$===0?0:_!==0&&_!==$&&(_&Q)===0&&(Q=$&-$,T=_&-_,Q>=T||Q===32&&(T&4194048)!==0)?_:$}function Wr(d,_){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&_)===0}function Vi(d,_){switch(d){case 1:case 2:case 4:case 8:case 64:return _+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var d=mr;return mr<<=1,(mr&4194048)===0&&(mr=256),d}function Ga(){var d=Qi;return Qi<<=1,(Qi&62914560)===0&&(Qi=4194304),d}function ts(d){for(var _=[],T=0;31>T;T++)_.push(d);return _}function Ds(d,_){d.pendingLanes|=_,_!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Bl(d,_,T,D,$,Q){var xe=d.pendingLanes;d.pendingLanes=T,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=T,d.entangledLanes&=T,d.errorRecoveryDisabledLanes&=T,d.shellSuspendCounter=0;var Be=d.entanglements,lt=d.expirationTimes,Ut=d.hiddenUpdates;for(T=xe&~T;0<T;){var cn=31-Mi(T),vn=1<<cn;Be[cn]=0,lt[cn]=-1;var Wt=Ut[cn];if(Wt!==null)for(Ut[cn]=null,cn=0;cn<Wt.length;cn++){var Yt=Wt[cn];Yt!==null&&(Yt.lane&=-536870913)}T&=~vn}D!==0&&ca(d,D,0),Q!==0&&$===0&&d.tag!==0&&(d.suspendedLanes|=Q&~(xe&~_))}function ca(d,_,T){d.pendingLanes|=_,d.suspendedLanes&=~_;var D=31-Mi(_);d.entangledLanes|=_,d.entanglements[D]=d.entanglements[D]|1073741824|T&4194090}function Zt(d,_){var T=d.entangledLanes|=_;for(d=d.entanglements;T;){var D=31-Mi(T),$=1<<D;$&_|d[D]&_&&(d[D]|=_),T&=~$}}function Os(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Gi(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Te(){var d=it.p;return d!==0?d:(d=window.event,d===void 0?32:vg(d.type))}function Y(d,_){var T=it.p;try{return it.p=d,_()}finally{it.p=T}}var ie=Math.random().toString(36).slice(2),ge="__reactFiber$"+ie,Ee="__reactProps$"+ie,Pe="__reactContainer$"+ie,Ue="__reactEvents$"+ie,Fe="__reactListeners$"+ie,He="__reactHandles$"+ie,Je="__reactResources$"+ie,st="__reactMarker$"+ie;function Ke(d){delete d[ge],delete d[Ee],delete d[Ue],delete d[Fe],delete d[He]}function At(d){var _=d[ge];if(_)return _;for(var T=d.parentNode;T;){if(_=T[Pe]||T[ge]){if(T=_.alternate,_.child!==null||T!==null&&T.child!==null)for(d=Ef(d);d!==null;){if(T=d[ge])return T;d=Ef(d)}return _}d=T,T=d.parentNode}return null}function qt(d){if(d=d[ge]||d[Pe]){var _=d.tag;if(_===5||_===6||_===13||_===26||_===27||_===3)return d}return null}function tn(d){var _=d.tag;if(_===5||_===26||_===27||_===6)return d.stateNode;throw Error(a(33))}function kn(d){var _=d[Je];return _||(_=d[Je]={hoistableStyles:new Map,hoistableScripts:new Map}),_}function Pn(d){d[st]=!0}var Dn=new Set,di={};function sr(d,_){ui(d,_),ui(d+"Capture",_)}function ui(d,_){for(di[d]=_,d=0;d<_.length;d++)Dn.add(_[d])}var $i=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Di={},ar={};function Er(d){return oi.call(ar,d)?!0:oi.call(Di,d)?!1:$i.test(d)?ar[d]=!0:(Di[d]=!0,!1)}function Lr(d,_,T){if(Er(_))if(T===null)d.removeAttribute(_);else{switch(typeof T){case"undefined":case"function":case"symbol":d.removeAttribute(_);return;case"boolean":var D=_.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){d.removeAttribute(_);return}}d.setAttribute(_,""+T)}}function ho(d,_,T){if(T===null)d.removeAttribute(_);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(_);return}d.setAttribute(_,""+T)}}function Ri(d,_,T,D){if(D===null)d.removeAttribute(T);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(T);return}d.setAttributeNS(_,T,""+D)}}var no,ds;function So(d){if(no===void 0)try{throw Error()}catch(T){var _=T.stack.trim().match(/\n( *(at )?)/);no=_&&_[1]||"",ds=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+no+d+ds}var Go=!1;function vr(d,_){if(!d||Go)return"";Go=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(_){var vn=function(){throw Error()};if(Object.defineProperty(vn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vn,[])}catch(Yt){var Wt=Yt}Reflect.construct(d,[],vn)}else{try{vn.call()}catch(Yt){Wt=Yt}d.call(vn.prototype)}}else{try{throw Error()}catch(Yt){Wt=Yt}(vn=d())&&typeof vn.catch=="function"&&vn.catch(function(){})}}catch(Yt){if(Yt&&Wt&&typeof Yt.stack=="string")return[Yt.stack,Wt.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var $=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");$&&$.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Q=D.DetermineComponentFrameRoot(),xe=Q[0],Be=Q[1];if(xe&&Be){var lt=xe.split(`
`),Ut=Be.split(`
`);for($=D=0;D<lt.length&&!lt[D].includes("DetermineComponentFrameRoot");)D++;for(;$<Ut.length&&!Ut[$].includes("DetermineComponentFrameRoot");)$++;if(D===lt.length||$===Ut.length)for(D=lt.length-1,$=Ut.length-1;1<=D&&0<=$&&lt[D]!==Ut[$];)$--;for(;1<=D&&0<=$;D--,$--)if(lt[D]!==Ut[$]){if(D!==1||$!==1)do if(D--,$--,0>$||lt[D]!==Ut[$]){var cn=`
`+lt[D].replace(" at new "," at ");return d.displayName&&cn.includes("<anonymous>")&&(cn=cn.replace("<anonymous>",d.displayName)),cn}while(1<=D&&0<=$);break}}}finally{Go=!1,Error.prepareStackTrace=T}return(T=d?d.displayName||d.name:"")?So(T):""}function zo(d){switch(d.tag){case 26:case 27:case 5:return So(d.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 15:return vr(d.type,!1);case 11:return vr(d.type.render,!1);case 1:return vr(d.type,!0);case 31:return So("Activity");default:return""}}function Sa(d){try{var _="";do _+=zo(d),d=d.return;while(d);return _}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function ls(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ud(d){var _=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Vd(d){var _=Ud(d)?"checked":"value",T=Object.getOwnPropertyDescriptor(d.constructor.prototype,_),D=""+d[_];if(!d.hasOwnProperty(_)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var $=T.get,Q=T.set;return Object.defineProperty(d,_,{configurable:!0,get:function(){return $.call(this)},set:function(xe){D=""+xe,Q.call(this,xe)}}),Object.defineProperty(d,_,{enumerable:T.enumerable}),{getValue:function(){return D},setValue:function(xe){D=""+xe},stopTracking:function(){d._valueTracker=null,delete d[_]}}}}function Rh(d){d._valueTracker||(d._valueTracker=Vd(d))}function $d(d){if(!d)return!1;var _=d._valueTracker;if(!_)return!0;var T=_.getValue(),D="";return d&&(D=Ud(d)?d.checked?"true":"false":d.value),d=D,d!==T?(_.setValue(d),!0):!1}function hc(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var tp=/[\n"\\]/g;function Ta(d){return d.replace(tp,function(_){return"\\"+_.charCodeAt(0).toString(16)+" "})}function qa(d,_,T,D,$,Q,xe,Be){d.name="",xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?d.type=xe:d.removeAttribute("type"),_!=null?xe==="number"?(_===0&&d.value===""||d.value!=_)&&(d.value=""+ls(_)):d.value!==""+ls(_)&&(d.value=""+ls(_)):xe!=="submit"&&xe!=="reset"||d.removeAttribute("value"),_!=null?Ws(d,xe,ls(_)):T!=null?Ws(d,xe,ls(T)):D!=null&&d.removeAttribute("value"),$==null&&Q!=null&&(d.defaultChecked=!!Q),$!=null&&(d.checked=$&&typeof $!="function"&&typeof $!="symbol"),Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"?d.name=""+ls(Be):d.removeAttribute("name")}function Om(d,_,T,D,$,Q,xe,Be){if(Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(d.type=Q),_!=null||T!=null){if(!(Q!=="submit"&&Q!=="reset"||_!=null))return;T=T!=null?""+ls(T):"",_=_!=null?""+ls(_):T,Be||_===d.value||(d.value=_),d.defaultValue=_}D=D??$,D=typeof D!="function"&&typeof D!="symbol"&&!!D,d.checked=Be?d.checked:!!D,d.defaultChecked=!!D,xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"&&(d.name=xe)}function Ws(d,_,T){_==="number"&&hc(d.ownerDocument)===d||d.defaultValue===""+T||(d.defaultValue=""+T)}function Xs(d,_,T,D){if(d=d.options,_){_={};for(var $=0;$<T.length;$++)_["$"+T[$]]=!0;for(T=0;T<d.length;T++)$=_.hasOwnProperty("$"+d[T].value),d[T].selected!==$&&(d[T].selected=$),$&&D&&(d[T].defaultSelected=!0)}else{for(T=""+ls(T),_=null,$=0;$<d.length;$++){if(d[$].value===T){d[$].selected=!0,D&&(d[$].defaultSelected=!0);return}_!==null||d[$].disabled||(_=d[$])}_!==null&&(_.selected=!0)}}function dc(d,_,T){if(_!=null&&(_=""+ls(_),_!==d.value&&(d.value=_),T==null)){d.defaultValue!==_&&(d.defaultValue=_);return}d.defaultValue=T!=null?""+ls(T):""}function cl(d,_,T,D){if(_==null){if(D!=null){if(T!=null)throw Error(a(92));if(mt(D)){if(1<D.length)throw Error(a(93));D=D[0]}T=D}T==null&&(T=""),_=T}T=ls(_),d.defaultValue=T,D=d.textContent,D===T&&D!==""&&D!==null&&(d.value=D)}function Ea(d,_){if(_){var T=d.firstChild;if(T&&T===d.lastChild&&T.nodeType===3){T.nodeValue=_;return}}d.textContent=_}var ul=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hd(d,_,T){var D=_.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?D?d.setProperty(_,""):_==="float"?d.cssFloat="":d[_]="":D?d.setProperty(_,T):typeof T!="number"||T===0||ul.has(_)?_==="float"?d.cssFloat=T:d[_]=(""+T).trim():d[_]=T+"px"}function Lm(d,_,T){if(_!=null&&typeof _!="object")throw Error(a(62));if(d=d.style,T!=null){for(var D in T)!T.hasOwnProperty(D)||_!=null&&_.hasOwnProperty(D)||(D.indexOf("--")===0?d.setProperty(D,""):D==="float"?d.cssFloat="":d[D]="");for(var $ in _)D=_[$],_.hasOwnProperty($)&&T[$]!==D&&Hd(d,$,D)}else for(var Q in _)_.hasOwnProperty(Q)&&Hd(d,Q,_[Q])}function Fl(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var np=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cu(d){return sy.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var bs=null;function Gd(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var zc=null,Nl=null;function ay(d){var _=qt(d);if(_&&(d=_.stateNode)){var T=d[Ee]||null;e:switch(d=_.stateNode,_.type){case"input":if(qa(d,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),_=T.name,T.type==="radio"&&_!=null){for(T=d;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+Ta(""+_)+'"][type="radio"]'),_=0;_<T.length;_++){var D=T[_];if(D!==d&&D.form===d.form){var $=D[Ee]||null;if(!$)throw Error(a(90));qa(D,$.value,$.defaultValue,$.defaultValue,$.checked,$.defaultChecked,$.type,$.name)}}for(_=0;_<T.length;_++)D=T[_],D.form===d.form&&$d(D)}break e;case"textarea":dc(d,T.value,T.defaultValue);break e;case"select":_=T.value,_!=null&&Xs(d,!!T.multiple,_,!1)}}}var qd=!1;function ip(d,_,T){if(qd)return d(_,T);qd=!0;try{var D=d(_);return D}finally{if(qd=!1,(zc!==null||Nl!==null)&&(ru(),zc&&(_=zc,d=Nl,Nl=zc=null,ay(_),d)))for(_=0;_<d.length;_++)ay(d[_])}}function ji(d,_){var T=d.stateNode;if(T===null)return null;var D=T[Ee]||null;if(D===null)return null;T=D[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(d=d.type,D=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!D;break e;default:d=!1}if(d)return null;if(T&&typeof T!="function")throw Error(a(231,_,typeof T));return T}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=!1;if(Ca)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){Au=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{Au=!1}var Bc=null,Fc=null,jl=null;function Ih(){if(jl)return jl;var d,_=Fc,T=_.length,D,$="value"in Bc?Bc.value:Bc.textContent,Q=$.length;for(d=0;d<T&&_[d]===$[d];d++);var xe=T-d;for(D=1;D<=xe&&_[T-D]===$[Q-D];D++);return jl=$.slice(d,1<D?1-D:void 0)}function op(d){var _=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&_===13&&(d=13)):d=_,d===10&&(d=13),32<=d||d===13?d:0}function Wd(){return!0}function Mu(){return!1}function ws(d){function _(T,D,$,Q,xe){this._reactName=T,this._targetInst=$,this.type=D,this.nativeEvent=Q,this.target=xe,this.currentTarget=null;for(var Be in d)d.hasOwnProperty(Be)&&(T=d[Be],this[Be]=T?T(Q):Q[Be]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Wd:Mu,this.isPropagationStopped=Mu,this}return R(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Wd)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Wd)},persist:function(){},isPersistent:Wd}),_}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ph=ws(hl),Dh=R({},hl,{view:0,detail:0}),Aa=ws(Dh),fc,sp,Oh,Lh=R({},Dh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Oh&&(Oh&&d.type==="mousemove"?(fc=d.screenX-Oh.screenX,sp=d.screenY-Oh.screenY):sp=fc=0,Oh=d),fc)},movementY:function(d){return"movementY"in d?d.movementY:sp}}),Ru=ws(Lh),Ma=R({},Lh,{dataTransfer:0}),ly=ws(Ma),km=R({},Dh,{relatedTarget:0}),kh=ws(km),ir=R({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),vv=ws(ir),jn=R({},hl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),xv=ws(jn),zm=R({},hl,{data:0}),ap=ws(zm),lp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(d){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(d):(d=zh[d])?!!_[d]:!1}function An(){return Iu}var Ar=R({},Dh,{key:function(d){if(d.key){var _=lp[d.key]||d.key;if(_!=="Unidentified")return _}return d.type==="keypress"?(d=op(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?dl[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(d){return d.type==="keypress"?op(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?op(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),gr=ws(Ar),ua=R({},Lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=ws(ua),dr=R({},Dh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An}),Bh=ws(dr),cp=R({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),up=ws(cp),Zs=R({},Lh,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),jo=ws(Zs),Ix=R({},hl,{newState:0,oldState:0}),hp=ws(Ix),cy=[9,13,27,32],Pu=Ca&&"CompositionEvent"in window,fl=null;Ca&&"documentMode"in document&&(fl=document.documentMode);var Bm=Ca&&"TextEvent"in window&&!fl,Ls=Ca&&(!Pu||fl&&8<fl&&11>=fl),pl=" ",Ys=!1;function uy(d,_){switch(d){case"keyup":return cy.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var To=!1;function Ks(d,_){switch(d){case"compositionend":return Fh(_);case"keypress":return _.which!==32?null:(Ys=!0,pl);case"textInput":return d=_.data,d===pl&&Ys?null:d;default:return null}}function vi(d,_){if(To)return d==="compositionend"||!Pu&&uy(d,_)?(d=Ih(),jl=Fc=Bc=null,To=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return Ls&&_.locale!=="ko"?null:_.data;default:return null}}var mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(d){var _=d&&d.nodeName&&d.nodeName.toLowerCase();return _==="input"?!!mn[d.type]:_==="textarea"}function Yn(d,_,T,D){zc?Nl?Nl.push(D):Nl=[D]:zc=D,_=Uv(_,"onChange"),0<_.length&&(T=new Ph("onChange","change",null,T,D),d.push({event:T,listeners:_}))}var Ul=null,pc=null;function Jn(d){qw(d,0)}function dp(d){var _=tn(d);if($d(_))return d}function ml(d,_){if(d==="change")return _}var hy=!1;if(Ca){var Zd;if(Ca){var fs="oninput"in document;if(!fs){var ks=document.createElement("div");ks.setAttribute("oninput","return;"),fs=typeof ks.oninput=="function"}Zd=fs}else Zd=!1;hy=Zd&&(!document.documentMode||9<document.documentMode)}function Nh(){Ul&&(Ul.detachEvent("onpropertychange",jc),pc=Ul=null)}function jc(d){if(d.propertyName==="value"&&dp(pc)){var _=[];Yn(_,pc,d,Gd(d)),ip(Jn,_)}}function jh(d,_,T){d==="focusin"?(Nh(),Ul=_,pc=T,Ul.attachEvent("onpropertychange",jc)):d==="focusout"&&Nh()}function Uh(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return dp(pc)}function Js(d,_){if(d==="click")return dp(_)}function fp(d,_){if(d==="input"||d==="change")return dp(_)}function pp(d,_){return d===_&&(d!==0||1/d===1/_)||d!==d&&_!==_}var Wa=typeof Object.is=="function"?Object.is:pp;function Xa(d,_){if(Wa(d,_))return!0;if(typeof d!="object"||d===null||typeof _!="object"||_===null)return!1;var T=Object.keys(d),D=Object.keys(_);if(T.length!==D.length)return!1;for(D=0;D<T.length;D++){var $=T[D];if(!oi.call(_,$)||!Wa(d[$],_[$]))return!1}return!0}function Fm(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Vl(d,_){var T=Fm(d);d=0;for(var D;T;){if(T.nodeType===3){if(D=d+T.textContent.length,d<=_&&D>=_)return{node:T,offset:_-d};d=D}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=Fm(T)}}function Nm(d,_){return d&&_?d===_?!0:d&&d.nodeType===3?!1:_&&_.nodeType===3?Nm(d,_.parentNode):"contains"in d?d.contains(_):d.compareDocumentPosition?!!(d.compareDocumentPosition(_)&16):!1:!1}function Uc(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var _=hc(d.document);_ instanceof d.HTMLIFrameElement;){try{var T=typeof _.contentWindow.location.href=="string"}catch{T=!1}if(T)d=_.contentWindow;else break;_=hc(d.document)}return _}function dy(d){var _=d&&d.nodeName&&d.nodeName.toLowerCase();return _&&(_==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||_==="textarea"||d.contentEditable==="true")}var Px=Ca&&"documentMode"in document&&11>=document.documentMode,Vh=null,jm=null,mp=null,Yd=!1;function fy(d,_,T){var D=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Yd||Vh==null||Vh!==hc(D)||(D=Vh,"selectionStart"in D&&dy(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),mp&&Xa(mp,D)||(mp=D,D=Uv(jm,"onSelect"),0<D.length&&(_=new Ph("onSelect","select",null,_,T),d.push({event:_,listeners:D}),_.target=Vh)))}function Ra(d,_){var T={};return T[d.toLowerCase()]=_.toLowerCase(),T["Webkit"+d]="webkit"+_,T["Moz"+d]="moz"+_,T}var $h={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionrun:Ra("Transition","TransitionRun"),transitionstart:Ra("Transition","TransitionStart"),transitioncancel:Ra("Transition","TransitionCancel"),transitionend:Ra("Transition","TransitionEnd")},Um={},mc={};Ca&&(mc=document.createElement("div").style,"AnimationEvent"in window||(delete $h.animationend.animation,delete $h.animationiteration.animation,delete $h.animationstart.animation),"TransitionEvent"in window||delete $h.transitionend.transition);function $l(d){if(Um[d])return Um[d];if(!$h[d])return d;var _=$h[d],T;for(T in _)if(_.hasOwnProperty(T)&&T in mc)return Um[d]=_[T];return d}var Vm=$l("animationend"),Za=$l("animationiteration"),Hh=$l("animationstart"),Kd=$l("transitionrun"),py=$l("transitionstart"),$m=$l("transitioncancel"),Ia=$l("transitionend"),gp=new Map,Qt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qt.push("scrollEnd");function Ya(d,_){gp.set(d,_),sr(_,[d])}var yp=new WeakMap;function ha(d,_){if(typeof d=="object"&&d!==null){var T=yp.get(d);return T!==void 0?T:(_={value:d,source:_,stack:Sa(_)},yp.set(d,_),_)}return{value:d,source:_,stack:Sa(_)}}var Pa=[],gl=0,Da=0;function Vc(){for(var d=gl,_=Da=gl=0;_<d;){var T=Pa[_];Pa[_++]=null;var D=Pa[_];Pa[_++]=null;var $=Pa[_];Pa[_++]=null;var Q=Pa[_];if(Pa[_++]=null,D!==null&&$!==null){var xe=D.pending;xe===null?$.next=$:($.next=xe.next,xe.next=$),D.pending=$}Q!==0&&qh(T,$,Q)}}function Hl(d,_,T,D){Pa[gl++]=d,Pa[gl++]=_,Pa[gl++]=T,Pa[gl++]=D,Da|=D,d.lanes|=D,d=d.alternate,d!==null&&(d.lanes|=D)}function Gh(d,_,T,D){return Hl(d,_,T,D),Oi(d)}function yl(d,_){return Hl(d,null,null,_),Oi(d)}function qh(d,_,T){d.lanes|=T;var D=d.alternate;D!==null&&(D.lanes|=T);for(var $=!1,Q=d.return;Q!==null;)Q.childLanes|=T,D=Q.alternate,D!==null&&(D.childLanes|=T),Q.tag===22&&(d=Q.stateNode,d===null||d._visibility&1||($=!0)),d=Q,Q=Q.return;return d.tag===3?(Q=d.stateNode,$&&_!==null&&($=31-Mi(T),d=Q.hiddenUpdates,D=d[$],D===null?d[$]=[_]:D.push(_),_.lane=T|536870912),Q):null}function Oi(d){if(50<Na)throw Na=0,tl=null,Error(a(185));for(var _=d.return;_!==null;)d=_,_=d.return;return d.tag===3?d.stateNode:null}var Du={};function Dx(d,_,T,D){this.tag=d,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(d,_,T,D){return new Dx(d,_,T,D)}function _p(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Gl(d,_){var T=d.alternate;return T===null?(T=Oa(d.tag,_,d.key,d.mode),T.elementType=d.elementType,T.type=d.type,T.stateNode=d.stateNode,T.alternate=d,d.alternate=T):(T.pendingProps=_,T.type=d.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=d.flags&65011712,T.childLanes=d.childLanes,T.lanes=d.lanes,T.child=d.child,T.memoizedProps=d.memoizedProps,T.memoizedState=d.memoizedState,T.updateQueue=d.updateQueue,_=d.dependencies,T.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},T.sibling=d.sibling,T.index=d.index,T.ref=d.ref,T.refCleanup=d.refCleanup,T}function lo(d,_){d.flags&=65011714;var T=d.alternate;return T===null?(d.childLanes=0,d.lanes=_,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=T.childLanes,d.lanes=T.lanes,d.child=T.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=T.memoizedProps,d.memoizedState=T.memoizedState,d.updateQueue=T.updateQueue,d.type=T.type,_=T.dependencies,d.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),d}function Hm(d,_,T,D,$,Q){var xe=0;if(D=d,typeof d=="function")_p(d)&&(xe=1);else if(typeof d=="string")xe=wA(d,T,on.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case qe:return d=Oa(31,T,_,$),d.elementType=qe,d.lanes=Q,d;case U:return Wh(T.children,$,Q,_);case H:xe=8,$|=24;break;case K:return d=Oa(12,T,_,$|2),d.elementType=K,d.lanes=Q,d;case ue:return d=Oa(13,T,_,$),d.elementType=ue,d.lanes=Q,d;case pe:return d=Oa(19,T,_,$),d.elementType=pe,d.lanes=Q,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case W:case ne:xe=10;break e;case re:xe=9;break e;case se:xe=11;break e;case Ce:xe=14;break e;case Le:xe=16,D=null;break e}xe=29,T=Error(a(130,d===null?"null":typeof d,"")),D=null}return _=Oa(xe,T,_,$),_.elementType=d,_.type=D,_.lanes=Q,_}function Wh(d,_,T,D){return d=Oa(7,d,D,_),d.lanes=T,d}function my(d,_,T){return d=Oa(6,d,null,_),d.lanes=T,d}function Gm(d,_,T){return _=Oa(4,d.children!==null?d.children:[],d.key,_),_.lanes=T,_.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},_}var Jd=[],$c=0,qm=null,vp=0,La=[],da=0,Hc=null,fa=1,ql="";function Ou(d,_){Jd[$c++]=vp,Jd[$c++]=qm,qm=d,vp=_}function Xh(d,_,T){La[da++]=fa,La[da++]=ql,La[da++]=Hc,Hc=d;var D=fa;d=ql;var $=32-Mi(D)-1;D&=~(1<<$),T+=1;var Q=32-Mi(_)+$;if(30<Q){var xe=$-$%5;Q=(D&(1<<xe)-1).toString(32),D>>=xe,$-=xe,fa=1<<32-Mi(_)+$|T<<$|D,ql=Q+d}else fa=1<<Q|T<<$|D,ql=d}function Zh(d){d.return!==null&&(Ou(d,1),Xh(d,1,0))}function Qd(d){for(;d===qm;)qm=Jd[--$c],Jd[$c]=null,vp=Jd[--$c],Jd[$c]=null;for(;d===Hc;)Hc=La[--da],La[da]=null,ql=La[--da],La[da]=null,fa=La[--da],La[da]=null}var Ss=null,Eo=null,io=!1,Gc=null,Wl=!1,xp=Error(a(519));function gc(d){var _=Error(a(418,""));throw rf(ha(_,d)),xp}function ef(d){var _=d.stateNode,T=d.type,D=d.memoizedProps;switch(_[ge]=d,_[Ee]=D,T){case"dialog":Qr("cancel",_),Qr("close",_);break;case"iframe":case"object":case"embed":Qr("load",_);break;case"video":case"audio":for(T=0;T<Qy.length;T++)Qr(Qy[T],_);break;case"source":Qr("error",_);break;case"img":case"image":case"link":Qr("error",_),Qr("load",_);break;case"details":Qr("toggle",_);break;case"input":Qr("invalid",_),Om(_,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0),Rh(_);break;case"select":Qr("invalid",_);break;case"textarea":Qr("invalid",_),cl(_,D.value,D.defaultValue,D.children),Rh(_)}T=D.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||_.textContent===""+T||D.suppressHydrationWarning===!0||dg(_.textContent,T)?(D.popover!=null&&(Qr("beforetoggle",_),Qr("toggle",_)),D.onScroll!=null&&Qr("scroll",_),D.onScrollEnd!=null&&Qr("scrollend",_),D.onClick!=null&&(_.onclick=n_),_=!0):_=!1,_||gc(d)}function gy(d){for(Ss=d.return;Ss;)switch(Ss.tag){case 5:case 13:Wl=!1;return;case 27:case 3:Wl=!0;return;default:Ss=Ss.return}}function tf(d){if(d!==Ss)return!1;if(!io)return gy(d),io=!0,!1;var _=d.tag,T;if((T=_!==3&&_!==27)&&((T=_===5)&&(T=d.type,T=!(T!=="form"&&T!=="button")||Wv(d.type,d.memoizedProps)),T=!T),T&&Eo&&gc(d),gy(d),_===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));e:{for(d=d.nextSibling,_=0;d;){if(d.nodeType===8)if(T=d.data,T==="/$"){if(_===0){Eo=lu(d.nextSibling);break e}_--}else T!=="$"&&T!=="$!"&&T!=="$?"||_++;d=d.nextSibling}Eo=null}}else _===27?(_=Eo,vd(d.type)?(d=Xx,Xx=null,Eo=d):Eo=_):Eo=Ss?lu(d.stateNode.nextSibling):null;return!0}function nf(){Eo=Ss=null,io=!1}function Yh(){var d=Gc;return d!==null&&(Zi===null?Zi=d:Zi.push.apply(Zi,d),Gc=null),d}function rf(d){Gc===null?Gc=[d]:Gc.push(d)}var yy=ht(null),qc=null,Wc=null;function Xl(d,_,T){Ft(yy,_._currentValue),_._currentValue=T}function Zl(d){d._currentValue=yy.current,Bt(yy)}function bp(d,_,T){for(;d!==null;){var D=d.alternate;if((d.childLanes&_)!==_?(d.childLanes|=_,D!==null&&(D.childLanes|=_)):D!==null&&(D.childLanes&_)!==_&&(D.childLanes|=_),d===T)break;d=d.return}}function wp(d,_,T,D){var $=d.child;for($!==null&&($.return=d);$!==null;){var Q=$.dependencies;if(Q!==null){var xe=$.child;Q=Q.firstContext;e:for(;Q!==null;){var Be=Q;Q=$;for(var lt=0;lt<_.length;lt++)if(Be.context===_[lt]){Q.lanes|=T,Be=Q.alternate,Be!==null&&(Be.lanes|=T),bp(Q.return,T,d),D||(xe=null);break e}Q=Be.next}}else if($.tag===18){if(xe=$.return,xe===null)throw Error(a(341));xe.lanes|=T,Q=xe.alternate,Q!==null&&(Q.lanes|=T),bp(xe,T,d),xe=null}else xe=$.child;if(xe!==null)xe.return=$;else for(xe=$;xe!==null;){if(xe===d){xe=null;break}if($=xe.sibling,$!==null){$.return=xe.return,xe=$;break}xe=xe.return}$=xe}}function Kh(d,_,T,D){d=null;for(var $=_,Q=!1;$!==null;){if(!Q){if(($.flags&524288)!==0)Q=!0;else if(($.flags&262144)!==0)break}if($.tag===10){var xe=$.alternate;if(xe===null)throw Error(a(387));if(xe=xe.memoizedProps,xe!==null){var Be=$.type;Wa($.pendingProps.value,xe.value)||(d!==null?d.push(Be):d=[Be])}}else if($===Rn.current){if(xe=$.alternate,xe===null)throw Error(a(387));xe.memoizedState.memoizedState!==$.memoizedState.memoizedState&&(d!==null?d.push(yg):d=[yg])}$=$.return}d!==null&&wp(_,d,T,D),_.flags|=262144}function of(d){for(d=d.firstContext;d!==null;){if(!Wa(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function _l(d){qc=d,Wc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ns(d){return _y(qc,d)}function Xc(d,_){return qc===null&&_l(d),_y(d,_)}function _y(d,_){var T=_._currentValue;if(_={context:_,memoizedValue:T,next:null},Wc===null){if(d===null)throw Error(a(308));Wc=_,d.dependencies={lanes:0,firstContext:_},d.flags|=524288}else Wc=Wc.next=_;return T}var pa=typeof AbortController<"u"?AbortController:function(){var d=[],_=this.signal={aborted:!1,addEventListener:function(T,D){d.push(D)}};this.abort=function(){_.aborted=!0,d.forEach(function(T){return T()})}},Sp=e.unstable_scheduleCallback,Wm=e.unstable_NormalPriority,Zo={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new pa,data:new Map,refCount:0}}function Lu(d){d.refCount--,d.refCount===0&&Sp(Wm,function(){d.controller.abort()})}var Jh=null,af=0,ku=0,Zc=null;function Tp(d,_){if(Jh===null){var T=Jh=[];af=0,ku=Vx(),Zc={status:"pending",value:void 0,then:function(D){T.push(D)}}}return af++,_.then(lf,lf),_}function lf(){if(--af===0&&Jh!==null){Zc!==null&&(Zc.status="fulfilled");var d=Jh;Jh=null,ku=0,Zc=null;for(var _=0;_<d.length;_++)(0,d[_])()}}function bv(d,_){var T=[],D={status:"pending",value:null,reason:null,then:function($){T.push($)}};return d.then(function(){D.status="fulfilled",D.value=_;for(var $=0;$<T.length;$++)(0,T[$])(_)},function($){for(D.status="rejected",D.reason=$,$=0;$<T.length;$++)(0,T[$])(void 0)}),D}var zu=$e.S;$e.S=function(d,_){typeof _=="object"&&_!==null&&typeof _.then=="function"&&Tp(d,_),zu!==null&&zu(d,_)};var Qh=ht(null);function vy(){var d=Qh.current;return d!==null?d:mi.pooledCache}function Ep(d,_){_===null?Ft(Qh,Qh.current):Ft(Qh,_.pool)}function xy(){var d=vy();return d===null?null:{parent:Zo._currentValue,pool:d}}var Cp=Error(a(460)),wv=Error(a(474)),cf=Error(a(542)),ed={then:function(){}};function by(d){return d=d.status,d==="fulfilled"||d==="rejected"}function yc(){}function wy(d,_,T){switch(T=d[T],T===void 0?d.push(_):T!==_&&(_.then(yc,yc),_=T),_.status){case"fulfilled":return _.value;case"rejected":throw d=_.reason,Ap(d),d;default:if(typeof _.status=="string")_.then(yc,yc);else{if(d=mi,d!==null&&100<d.shellSuspendCounter)throw Error(a(482));d=_,d.status="pending",d.then(function(D){if(_.status==="pending"){var $=_;$.status="fulfilled",$.value=D}},function(D){if(_.status==="pending"){var $=_;$.status="rejected",$.reason=D}})}switch(_.status){case"fulfilled":return _.value;case"rejected":throw d=_.reason,Ap(d),d}throw uf=_,Cp}}var uf=null;function Xm(){if(uf===null)throw Error(a(459));var d=uf;return uf=null,d}function Ap(d){if(d===Cp||d===cf)throw Error(a(483))}var ma=!1;function Zm(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ga(d,_){d=d.updateQueue,_.updateQueue===d&&(_.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function _c(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Yl(d,_,T){var D=d.updateQueue;if(D===null)return null;if(D=D.shared,($n&2)!==0){var $=D.pending;return $===null?_.next=_:(_.next=$.next,$.next=_),D.pending=_,_=Oi(d),qh(d,null,T),_}return Hl(d,D,_,T),Oi(d)}function hf(d,_,T){if(_=_.updateQueue,_!==null&&(_=_.shared,(T&4194048)!==0)){var D=_.lanes;D&=d.pendingLanes,T|=D,_.lanes=T,Zt(d,T)}}function Mp(d,_){var T=d.updateQueue,D=d.alternate;if(D!==null&&(D=D.updateQueue,T===D)){var $=null,Q=null;if(T=T.firstBaseUpdate,T!==null){do{var xe={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};Q===null?$=Q=xe:Q=Q.next=xe,T=T.next}while(T!==null);Q===null?$=Q=_:Q=Q.next=_}else $=Q=_;T={baseState:D.baseState,firstBaseUpdate:$,lastBaseUpdate:Q,shared:D.shared,callbacks:D.callbacks},d.updateQueue=T;return}d=T.lastBaseUpdate,d===null?T.firstBaseUpdate=_:d.next=_,T.lastBaseUpdate=_}var df=!1;function Bu(){if(df){var d=Zc;if(d!==null)throw d}}function ff(d,_,T,D){df=!1;var $=d.updateQueue;ma=!1;var Q=$.firstBaseUpdate,xe=$.lastBaseUpdate,Be=$.shared.pending;if(Be!==null){$.shared.pending=null;var lt=Be,Ut=lt.next;lt.next=null,xe===null?Q=Ut:xe.next=Ut,xe=lt;var cn=d.alternate;cn!==null&&(cn=cn.updateQueue,Be=cn.lastBaseUpdate,Be!==xe&&(Be===null?cn.firstBaseUpdate=Ut:Be.next=Ut,cn.lastBaseUpdate=lt))}if(Q!==null){var vn=$.baseState;xe=0,cn=Ut=lt=null,Be=Q;do{var Wt=Be.lane&-536870913,Yt=Wt!==Be.lane;if(Yt?(Fn&Wt)===Wt:(D&Wt)===Wt){Wt!==0&&Wt===ku&&(df=!0),cn!==null&&(cn=cn.next={lane:0,tag:Be.tag,payload:Be.payload,callback:null,next:null});e:{var ur=d,Ki=Be;Wt=_;var Oo=T;switch(Ki.tag){case 1:if(ur=Ki.payload,typeof ur=="function"){vn=ur.call(Oo,vn,Wt);break e}vn=ur;break e;case 3:ur.flags=ur.flags&-65537|128;case 0:if(ur=Ki.payload,Wt=typeof ur=="function"?ur.call(Oo,vn,Wt):ur,Wt==null)break e;vn=R({},vn,Wt);break e;case 2:ma=!0}}Wt=Be.callback,Wt!==null&&(d.flags|=64,Yt&&(d.flags|=8192),Yt=$.callbacks,Yt===null?$.callbacks=[Wt]:Yt.push(Wt))}else Yt={lane:Wt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},cn===null?(Ut=cn=Yt,lt=vn):cn=cn.next=Yt,xe|=Wt;if(Be=Be.next,Be===null){if(Be=$.shared.pending,Be===null)break;Yt=Be,Be=Yt.next,Yt.next=null,$.lastBaseUpdate=Yt,$.shared.pending=null}}while(!0);cn===null&&(lt=vn),$.baseState=lt,$.firstBaseUpdate=Ut,$.lastBaseUpdate=cn,Q===null&&($.shared.lanes=0),Nr|=xe,d.lanes=xe,d.memoizedState=vn}}function Rp(d,_){if(typeof d!="function")throw Error(a(191,d));d.call(_)}function Fu(d,_){var T=d.callbacks;if(T!==null)for(d.callbacks=null,d=0;d<T.length;d++)Rp(T[d],_)}var td=ht(null),Ym=ht(0);function vc(d,_){d=Wi,Ft(Ym,d),Ft(td,_),Wi=d|_.baseLanes}function Sy(){Ft(Ym,Wi),Ft(td,td.current)}function Ip(){Wi=Ym.current,Bt(td),Bt(Ym)}var Kl=0,yr=null,ro=null,Bo=null,Nu=!1,xc=!1,bc=!1,pf=0,ju=0,Uu=null,mf=0;function Fo(){throw Error(a(321))}function hn(d,_){if(_===null)return!1;for(var T=0;T<_.length&&T<d.length;T++)if(!Wa(d[T],_[T]))return!1;return!0}function nd(d,_,T,D,$,Q){return Kl=Q,yr=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,$e.H=d===null||d.memoizedState===null?ud:rg,bc=!1,Q=T(D,$),bc=!1,xc&&(Q=Yc(_,T,D,$)),Vu(d),Q}function Vu(d){$e.H=cd;var _=ro!==null&&ro.next!==null;if(Kl=0,Bo=ro=yr=null,Nu=!1,ju=0,Uu=null,_)throw Error(a(300));d===null||cs||(d=d.dependencies,d!==null&&of(d)&&(cs=!0))}function Yc(d,_,T,D){yr=d;var $=0;do{if(xc&&(Uu=null),ju=0,xc=!1,25<=$)throw Error(a(301));if($+=1,Bo=ro=null,d.updateQueue!=null){var Q=d.updateQueue;Q.lastEffect=null,Q.events=null,Q.stores=null,Q.memoCache!=null&&(Q.memoCache.index=0)}$e.H=Ly,Q=_(T,D)}while(xc);return Q}function $u(){var d=$e.H,_=d.useState()[0];return _=typeof _.then=="function"?Dp(_):_,d=d.useState()[0],(ro!==null?ro.memoizedState:null)!==d&&(yr.flags|=1024),_}function Un(){var d=pf!==0;return pf=0,d}function Pp(d,_,T){_.updateQueue=d.updateQueue,_.flags&=-2053,d.lanes&=~T}function Ty(d){if(Nu){for(d=d.memoizedState;d!==null;){var _=d.queue;_!==null&&(_.pending=null),d=d.next}Nu=!1}Kl=0,Bo=ro=yr=null,xc=!1,ju=pf=0,Uu=null}function ya(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bo===null?yr.memoizedState=Bo=d:Bo=Bo.next=d,Bo}function Uo(){if(ro===null){var d=yr.alternate;d=d!==null?d.memoizedState:null}else d=ro.next;var _=Bo===null?yr.memoizedState:Bo.next;if(_!==null)Bo=_,ro=d;else{if(d===null)throw yr.alternate===null?Error(a(467)):Error(a(310));ro=d,d={memoizedState:ro.memoizedState,baseState:ro.baseState,baseQueue:ro.baseQueue,queue:ro.queue,next:null},Bo===null?yr.memoizedState=Bo=d:Bo=Bo.next=d}return Bo}function Km(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dp(d){var _=ju;return ju+=1,Uu===null&&(Uu=[]),d=wy(Uu,d,_),_=yr,(Bo===null?_.memoizedState:Bo.next)===null&&(_=_.alternate,$e.H=_===null||_.memoizedState===null?ud:rg),d}function Op(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Dp(d);if(d.$$typeof===ne)return ns(d)}throw Error(a(438,String(d)))}function Ey(d){var _=null,T=yr.updateQueue;if(T!==null&&(_=T.memoCache),_==null){var D=yr.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(_={data:D.data.map(function($){return $.slice()}),index:0})))}if(_==null&&(_={data:[],index:0}),T===null&&(T=Km(),yr.updateQueue=T),T.memoCache=_,T=_.data[_.index],T===void 0)for(T=_.data[_.index]=Array(d),D=0;D<d;D++)T[D]=ye;return _.index++,T}function Kc(d,_){return typeof _=="function"?_(d):_}function gf(d){var _=Uo();return Lp(_,ro,d)}function Lp(d,_,T){var D=d.queue;if(D===null)throw Error(a(311));D.lastRenderedReducer=T;var $=d.baseQueue,Q=D.pending;if(Q!==null){if($!==null){var xe=$.next;$.next=Q.next,Q.next=xe}_.baseQueue=$=Q,D.pending=null}if(Q=d.baseState,$===null)d.memoizedState=Q;else{_=$.next;var Be=xe=null,lt=null,Ut=_,cn=!1;do{var vn=Ut.lane&-536870913;if(vn!==Ut.lane?(Fn&vn)===vn:(Kl&vn)===vn){var Wt=Ut.revertLane;if(Wt===0)lt!==null&&(lt=lt.next={lane:0,revertLane:0,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),vn===ku&&(cn=!0);else if((Kl&Wt)===Wt){Ut=Ut.next,Wt===ku&&(cn=!0);continue}else vn={lane:0,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},lt===null?(Be=lt=vn,xe=Q):lt=lt.next=vn,yr.lanes|=Wt,Nr|=Wt;vn=Ut.action,bc&&T(Q,vn),Q=Ut.hasEagerState?Ut.eagerState:T(Q,vn)}else Wt={lane:vn,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},lt===null?(Be=lt=Wt,xe=Q):lt=lt.next=Wt,yr.lanes|=vn,Nr|=vn;Ut=Ut.next}while(Ut!==null&&Ut!==_);if(lt===null?xe=Q:lt.next=Be,!Wa(Q,d.memoizedState)&&(cs=!0,cn&&(T=Zc,T!==null)))throw T;d.memoizedState=Q,d.baseState=xe,d.baseQueue=lt,D.lastRenderedState=Q}return $===null&&(D.lanes=0),[d.memoizedState,D.dispatch]}function kp(d){var _=Uo(),T=_.queue;if(T===null)throw Error(a(311));T.lastRenderedReducer=d;var D=T.dispatch,$=T.pending,Q=_.memoizedState;if($!==null){T.pending=null;var xe=$=$.next;do Q=d(Q,xe.action),xe=xe.next;while(xe!==$);Wa(Q,_.memoizedState)||(cs=!0),_.memoizedState=Q,_.baseQueue===null&&(_.baseState=Q),T.lastRenderedState=Q}return[Q,D]}function Jm(d,_,T){var D=yr,$=Uo(),Q=io;if(Q){if(T===void 0)throw Error(a(407));T=T()}else T=_();var xe=!Wa((ro||$).memoizedState,T);xe&&($.memoizedState=T,cs=!0),$=$.queue;var Be=Hu.bind(null,D,$,d);if(Wu(2048,8,Be,[d]),$.getSnapshot!==_||xe||Bo!==null&&Bo.memoizedState.tag&1){if(D.flags|=2048,xl(9,co(),Jc.bind(null,D,$,T,_),null),mi===null)throw Error(a(349));Q||(Kl&124)!==0||_a(D,_,T)}return T}function _a(d,_,T){d.flags|=16384,d={getSnapshot:_,value:T},_=yr.updateQueue,_===null?(_=Km(),yr.updateQueue=_,_.stores=[d]):(T=_.stores,T===null?_.stores=[d]:T.push(d))}function Jc(d,_,T,D){_.value=T,_.getSnapshot=D,zp(_)&&Bp(d)}function Hu(d,_,T){return T(function(){zp(_)&&Bp(d)})}function zp(d){var _=d.getSnapshot;d=d.value;try{var T=_();return!Wa(d,T)}catch{return!0}}function Bp(d){var _=yl(d,2);_!==null&&ia(_,d,2)}function Gu(d){var _=ya();if(typeof d=="function"){var T=d;if(d=T(),bc){Ni(!0);try{T()}finally{Ni(!1)}}}return _.memoizedState=_.baseState=d,_.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:d},_}function Cy(d,_,T,D){return d.baseState=T,Lp(d,ro,typeof D=="function"?D:Kc)}function vl(d,_,T,D,$){if(ad(d))throw Error(a(485));if(d=_.action,d!==null){var Q={payload:$,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(xe){Q.listeners.push(xe)}};$e.T!==null?T(!0):Q.isTransition=!1,D(Q),T=_.pending,T===null?(Q.next=_.pending=Q,xr(_,Q)):(Q.next=T.next,_.pending=T.next=Q)}}function xr(d,_){var T=_.action,D=_.payload,$=d.state;if(_.isTransition){var Q=$e.T,xe={};$e.T=xe;try{var Be=T($,D),lt=$e.S;lt!==null&&lt(xe,Be),yf(d,_,Be)}catch(Ut){Qm(d,_,Ut)}finally{$e.T=Q}}else try{Q=T($,D),yf(d,_,Q)}catch(Ut){Qm(d,_,Ut)}}function yf(d,_,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(D){Qc(d,_,D)},function(D){return Qm(d,_,D)}):Qc(d,_,T)}function Qc(d,_,T){_.status="fulfilled",_.value=T,Ay(_),d.state=T,_=d.pending,_!==null&&(T=_.next,T===_?d.pending=null:(T=T.next,_.next=T,xr(d,T)))}function Qm(d,_,T){var D=d.pending;if(d.pending=null,D!==null){D=D.next;do _.status="rejected",_.reason=T,Ay(_),_=_.next;while(_!==D)}d.action=null}function Ay(d){d=d.listeners;for(var _=0;_<d.length;_++)(0,d[_])()}function My(d,_){return _}function Sv(d,_){if(io){var T=mi.formState;if(T!==null){e:{var D=yr;if(io){if(Eo){t:{for(var $=Eo,Q=Wl;$.nodeType!==8;){if(!Q){$=null;break t}if($=lu($.nextSibling),$===null){$=null;break t}}Q=$.data,$=Q==="F!"||Q==="F"?$:null}if($){Eo=lu($.nextSibling),D=$.data==="F!";break e}}gc(D)}D=!1}D&&(_=T[0])}}return T=ya(),T.memoizedState=T.baseState=_,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:_},T.queue=D,T=qi.bind(null,yr,D),D.dispatch=T,D=Gu(!1),Q=Jl.bind(null,yr,!1,D.queue),D=ya(),$={state:_,dispatch:null,action:d,pending:null},D.queue=$,T=vl.bind(null,yr,$,Q,T),$.dispatch=T,D.memoizedState=d,[_,T,!1]}function id(d){var _=Uo();return qu(_,ro,d)}function qu(d,_,T){if(_=Lp(d,_,My)[0],d=gf(Kc)[0],typeof _=="object"&&_!==null&&typeof _.then=="function")try{var D=Dp(_)}catch(xe){throw xe===Cp?cf:xe}else D=_;_=Uo();var $=_.queue,Q=$.dispatch;return T!==_.memoizedState&&(yr.flags|=2048,xl(9,co(),Kt.bind(null,$,T),null)),[D,Q,d]}function Kt(d,_){d.action=_}function un(d){var _=Uo(),T=ro;if(T!==null)return qu(_,T,d);Uo(),_=_.memoizedState,T=Uo();var D=T.queue.dispatch;return T.memoizedState=d,[_,D,!1]}function xl(d,_,T,D){return d={tag:d,create:T,deps:D,inst:_,next:null},_=yr.updateQueue,_===null&&(_=Km(),yr.updateQueue=_),T=_.lastEffect,T===null?_.lastEffect=d.next=d:(D=T.next,T.next=d,d.next=D,_.lastEffect=d),d}function co(){return{destroy:void 0,resource:void 0}}function at(){return Uo().memoizedState}function ka(d,_,T,D){var $=ya();D=D===void 0?null:D,yr.flags|=d,$.memoizedState=xl(1|_,co(),T,D)}function Wu(d,_,T,D){var $=Uo();D=D===void 0?null:D;var Q=$.memoizedState.inst;ro!==null&&D!==null&&hn(D,ro.memoizedState.deps)?$.memoizedState=xl(_,Q,T,D):(yr.flags|=d,$.memoizedState=xl(1|_,Q,T,D))}function Fp(d,_){ka(8390656,8,d,_)}function eg(d,_){Wu(2048,8,d,_)}function Ry(d,_){return Wu(4,2,d,_)}function Iy(d,_){return Wu(4,4,d,_)}function rd(d,_){if(typeof _=="function"){d=d();var T=_(d);return function(){typeof T=="function"?T():_(null)}}if(_!=null)return d=d(),_.current=d,function(){_.current=null}}function Tv(d,_,T){T=T!=null?T.concat([d]):null,Wu(4,4,rd.bind(null,_,d),T)}function Py(){}function Dy(d,_){var T=Uo();_=_===void 0?null:_;var D=T.memoizedState;return _!==null&&hn(_,D[1])?D[0]:(T.memoizedState=[d,_],d)}function Np(d,_){var T=Uo();_=_===void 0?null:_;var D=T.memoizedState;if(_!==null&&hn(_,D[1]))return D[0];if(D=d(),bc){Ni(!0);try{d()}finally{Ni(!1)}}return T.memoizedState=[D,_],D}function jp(d,_,T){return T===void 0||(Kl&1073741824)!==0?d.memoizedState=_:(d.memoizedState=T,d=ih(),yr.lanes|=d,Nr|=d,T)}function tg(d,_,T,D){return Wa(T,_)?T:td.current!==null?(d=jp(d,T,D),Wa(d,_)||(cs=!0),d):(Kl&42)===0?(cs=!0,d.memoizedState=T):(d=ih(),yr.lanes|=d,Nr|=d,_)}function Oy(d,_,T,D,$){var Q=it.p;it.p=Q!==0&&8>Q?Q:8;var xe=$e.T,Be={};$e.T=Be,Jl(d,!1,_,T);try{var lt=$(),Ut=$e.S;if(Ut!==null&&Ut(Be,lt),lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var cn=bv(lt,D);sd(d,_,cn,Cs(d))}else sd(d,_,D,Cs(d))}catch(vn){sd(d,_,{then:function(){},status:"rejected",reason:vn},Cs())}finally{it.p=Q,$e.T=xe}}function ng(){}function od(d,_,T,D){if(d.tag!==5)throw Error(a(476));var $=Xu(d).queue;Oy(d,$,_,Tt,T===null?ng:function(){return ig(d),T(D)})}function Xu(d){var _=d.memoizedState;if(_!==null)return _;_={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:Tt},next:null};var T={};return _.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:T},next:null},d.memoizedState=_,d=d.alternate,d!==null&&(d.memoizedState=_),_}function ig(d){var _=Xu(d).next.queue;sd(d,_,{},Cs())}function wc(){return ns(yg)}function zs(){return Uo().memoizedState}function Ev(){return Uo().memoizedState}function Up(d){for(var _=d.return;_!==null;){switch(_.tag){case 24:case 3:var T=Cs();d=_c(T);var D=Yl(_,d,T);D!==null&&(ia(D,_,T),hf(D,_,T)),_={cache:sf()},d.payload=_;return}_=_.return}}function Jr(d,_,T){var D=Cs();T={lane:D,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},ad(d)?Zu(_,T):(T=Gh(d,_,T,D),T!==null&&(ia(T,d,D),ld(T,_,D)))}function qi(d,_,T){var D=Cs();sd(d,_,T,D)}function sd(d,_,T,D){var $={lane:D,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(ad(d))Zu(_,$);else{var Q=d.alternate;if(d.lanes===0&&(Q===null||Q.lanes===0)&&(Q=_.lastRenderedReducer,Q!==null))try{var xe=_.lastRenderedState,Be=Q(xe,T);if($.hasEagerState=!0,$.eagerState=Be,Wa(Be,xe))return Hl(d,_,$,0),mi===null&&Vc(),!1}catch{}finally{}if(T=Gh(d,_,$,D),T!==null)return ia(T,d,D),ld(T,_,D),!0}return!1}function Jl(d,_,T,D){if(D={lane:2,revertLane:Vx(),action:D,hasEagerState:!1,eagerState:null,next:null},ad(d)){if(_)throw Error(a(479))}else _=Gh(d,T,D,2),_!==null&&ia(_,d,2)}function ad(d){var _=d.alternate;return d===yr||_!==null&&_===yr}function Zu(d,_){xc=Nu=!0;var T=d.pending;T===null?_.next=_:(_.next=T.next,T.next=_),d.pending=_}function ld(d,_,T){if((T&4194048)!==0){var D=_.lanes;D&=d.pendingLanes,T|=D,_.lanes=T,Zt(d,T)}}var cd={readContext:ns,use:Op,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useLayoutEffect:Fo,useInsertionEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useSyncExternalStore:Fo,useId:Fo,useHostTransitionStatus:Fo,useFormState:Fo,useActionState:Fo,useOptimistic:Fo,useMemoCache:Fo,useCacheRefresh:Fo},ud={readContext:ns,use:Op,useCallback:function(d,_){return ya().memoizedState=[d,_===void 0?null:_],d},useContext:ns,useEffect:Fp,useImperativeHandle:function(d,_,T){T=T!=null?T.concat([d]):null,ka(4194308,4,rd.bind(null,_,d),T)},useLayoutEffect:function(d,_){return ka(4194308,4,d,_)},useInsertionEffect:function(d,_){ka(4,2,d,_)},useMemo:function(d,_){var T=ya();_=_===void 0?null:_;var D=d();if(bc){Ni(!0);try{d()}finally{Ni(!1)}}return T.memoizedState=[D,_],D},useReducer:function(d,_,T){var D=ya();if(T!==void 0){var $=T(_);if(bc){Ni(!0);try{T(_)}finally{Ni(!1)}}}else $=_;return D.memoizedState=D.baseState=$,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:$},D.queue=d,d=d.dispatch=Jr.bind(null,yr,d),[D.memoizedState,d]},useRef:function(d){var _=ya();return d={current:d},_.memoizedState=d},useState:function(d){d=Gu(d);var _=d.queue,T=qi.bind(null,yr,_);return _.dispatch=T,[d.memoizedState,T]},useDebugValue:Py,useDeferredValue:function(d,_){var T=ya();return jp(T,d,_)},useTransition:function(){var d=Gu(!1);return d=Oy.bind(null,yr,d.queue,!0,!1),ya().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,_,T){var D=yr,$=ya();if(io){if(T===void 0)throw Error(a(407));T=T()}else{if(T=_(),mi===null)throw Error(a(349));(Fn&124)!==0||_a(D,_,T)}$.memoizedState=T;var Q={value:T,getSnapshot:_};return $.queue=Q,Fp(Hu.bind(null,D,Q,d),[d]),D.flags|=2048,xl(9,co(),Jc.bind(null,D,Q,T,_),null),T},useId:function(){var d=ya(),_=mi.identifierPrefix;if(io){var T=ql,D=fa;T=(D&~(1<<32-Mi(D)-1)).toString(32)+T,_=""+_+"R"+T,T=pf++,0<T&&(_+="H"+T.toString(32)),_+=""}else T=mf++,_=""+_+"r"+T.toString(32)+"";return d.memoizedState=_},useHostTransitionStatus:wc,useFormState:Sv,useActionState:Sv,useOptimistic:function(d){var _=ya();_.memoizedState=_.baseState=d;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return _.queue=T,_=Jl.bind(null,yr,!0,T),T.dispatch=_,[d,_]},useMemoCache:Ey,useCacheRefresh:function(){return ya().memoizedState=Up.bind(null,yr)}},rg={readContext:ns,use:Op,useCallback:Dy,useContext:ns,useEffect:eg,useImperativeHandle:Tv,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Np,useReducer:gf,useRef:at,useState:function(){return gf(Kc)},useDebugValue:Py,useDeferredValue:function(d,_){var T=Uo();return tg(T,ro.memoizedState,d,_)},useTransition:function(){var d=gf(Kc)[0],_=Uo().memoizedState;return[typeof d=="boolean"?d:Dp(d),_]},useSyncExternalStore:Jm,useId:zs,useHostTransitionStatus:wc,useFormState:id,useActionState:id,useOptimistic:function(d,_){var T=Uo();return Cy(T,ro,d,_)},useMemoCache:Ey,useCacheRefresh:Ev},Ly={readContext:ns,use:Op,useCallback:Dy,useContext:ns,useEffect:eg,useImperativeHandle:Tv,useInsertionEffect:Ry,useLayoutEffect:Iy,useMemo:Np,useReducer:kp,useRef:at,useState:function(){return kp(Kc)},useDebugValue:Py,useDeferredValue:function(d,_){var T=Uo();return ro===null?jp(T,d,_):tg(T,ro.memoizedState,d,_)},useTransition:function(){var d=kp(Kc)[0],_=Uo().memoizedState;return[typeof d=="boolean"?d:Dp(d),_]},useSyncExternalStore:Jm,useId:zs,useHostTransitionStatus:wc,useFormState:un,useActionState:un,useOptimistic:function(d,_){var T=Uo();return ro!==null?Cy(T,ro,d,_):(T.baseState=d,[d,T.queue.dispatch])},useMemoCache:Ey,useCacheRefresh:Ev},va=null,Ka=0;function hd(d){var _=Ka;return Ka+=1,va===null&&(va=[]),wy(va,d,_)}function Ql(d,_){_=_.props.ref,d.ref=_!==void 0?_:null}function eu(d,_){throw _.$$typeof===O?Error(a(525)):(d=Object.prototype.toString.call(_),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":d)))}function Qs(d){var _=d._init;return _(d._payload)}function ec(d){function _(Rt,bt){if(d){var zt=Rt.deletions;zt===null?(Rt.deletions=[bt],Rt.flags|=16):zt.push(bt)}}function T(Rt,bt){if(!d)return null;for(;bt!==null;)_(Rt,bt),bt=bt.sibling;return null}function D(Rt){for(var bt=new Map;Rt!==null;)Rt.key!==null?bt.set(Rt.key,Rt):bt.set(Rt.index,Rt),Rt=Rt.sibling;return bt}function $(Rt,bt){return Rt=Gl(Rt,bt),Rt.index=0,Rt.sibling=null,Rt}function Q(Rt,bt,zt){return Rt.index=zt,d?(zt=Rt.alternate,zt!==null?(zt=zt.index,zt<bt?(Rt.flags|=67108866,bt):zt):(Rt.flags|=67108866,bt)):(Rt.flags|=1048576,bt)}function xe(Rt){return d&&Rt.alternate===null&&(Rt.flags|=67108866),Rt}function Be(Rt,bt,zt,fn){return bt===null||bt.tag!==6?(bt=my(zt,Rt.mode,fn),bt.return=Rt,bt):(bt=$(bt,zt),bt.return=Rt,bt)}function lt(Rt,bt,zt,fn){var wi=zt.type;return wi===U?cn(Rt,bt,zt.props.children,fn,zt.key):bt!==null&&(bt.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===Le&&Qs(wi)===bt.type)?(bt=$(bt,zt.props),Ql(bt,zt),bt.return=Rt,bt):(bt=Hm(zt.type,zt.key,zt.props,null,Rt.mode,fn),Ql(bt,zt),bt.return=Rt,bt)}function Ut(Rt,bt,zt,fn){return bt===null||bt.tag!==4||bt.stateNode.containerInfo!==zt.containerInfo||bt.stateNode.implementation!==zt.implementation?(bt=Gm(zt,Rt.mode,fn),bt.return=Rt,bt):(bt=$(bt,zt.children||[]),bt.return=Rt,bt)}function cn(Rt,bt,zt,fn,wi){return bt===null||bt.tag!==7?(bt=Wh(zt,Rt.mode,fn,wi),bt.return=Rt,bt):(bt=$(bt,zt),bt.return=Rt,bt)}function vn(Rt,bt,zt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return bt=my(""+bt,Rt.mode,zt),bt.return=Rt,bt;if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case z:return zt=Hm(bt.type,bt.key,bt.props,null,Rt.mode,zt),Ql(zt,bt),zt.return=Rt,zt;case N:return bt=Gm(bt,Rt.mode,zt),bt.return=Rt,bt;case Le:var fn=bt._init;return bt=fn(bt._payload),vn(Rt,bt,zt)}if(mt(bt)||ut(bt))return bt=Wh(bt,Rt.mode,zt,null),bt.return=Rt,bt;if(typeof bt.then=="function")return vn(Rt,hd(bt),zt);if(bt.$$typeof===ne)return vn(Rt,Xc(Rt,bt),zt);eu(Rt,bt)}return null}function Wt(Rt,bt,zt,fn){var wi=bt!==null?bt.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return wi!==null?null:Be(Rt,bt,""+zt,fn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case z:return zt.key===wi?lt(Rt,bt,zt,fn):null;case N:return zt.key===wi?Ut(Rt,bt,zt,fn):null;case Le:return wi=zt._init,zt=wi(zt._payload),Wt(Rt,bt,zt,fn)}if(mt(zt)||ut(zt))return wi!==null?null:cn(Rt,bt,zt,fn,null);if(typeof zt.then=="function")return Wt(Rt,bt,hd(zt),fn);if(zt.$$typeof===ne)return Wt(Rt,bt,Xc(Rt,zt),fn);eu(Rt,zt)}return null}function Yt(Rt,bt,zt,fn,wi){if(typeof fn=="string"&&fn!==""||typeof fn=="number"||typeof fn=="bigint")return Rt=Rt.get(zt)||null,Be(bt,Rt,""+fn,wi);if(typeof fn=="object"&&fn!==null){switch(fn.$$typeof){case z:return Rt=Rt.get(fn.key===null?zt:fn.key)||null,lt(bt,Rt,fn,wi);case N:return Rt=Rt.get(fn.key===null?zt:fn.key)||null,Ut(bt,Rt,fn,wi);case Le:var Vr=fn._init;return fn=Vr(fn._payload),Yt(Rt,bt,zt,fn,wi)}if(mt(fn)||ut(fn))return Rt=Rt.get(zt)||null,cn(bt,Rt,fn,wi,null);if(typeof fn.then=="function")return Yt(Rt,bt,zt,hd(fn),wi);if(fn.$$typeof===ne)return Yt(Rt,bt,zt,Xc(bt,fn),wi);eu(bt,fn)}return null}function ur(Rt,bt,zt,fn){for(var wi=null,Vr=null,Li=bt,Ji=bt=0,Fs=null;Li!==null&&Ji<zt.length;Ji++){Li.index>Ji?(Fs=Li,Li=null):Fs=Li.sibling;var po=Wt(Rt,Li,zt[Ji],fn);if(po===null){Li===null&&(Li=Fs);break}d&&Li&&po.alternate===null&&_(Rt,Li),bt=Q(po,bt,Ji),Vr===null?wi=po:Vr.sibling=po,Vr=po,Li=Fs}if(Ji===zt.length)return T(Rt,Li),io&&Ou(Rt,Ji),wi;if(Li===null){for(;Ji<zt.length;Ji++)Li=vn(Rt,zt[Ji],fn),Li!==null&&(bt=Q(Li,bt,Ji),Vr===null?wi=Li:Vr.sibling=Li,Vr=Li);return io&&Ou(Rt,Ji),wi}for(Li=D(Li);Ji<zt.length;Ji++)Fs=Yt(Li,Rt,Ji,zt[Ji],fn),Fs!==null&&(d&&Fs.alternate!==null&&Li.delete(Fs.key===null?Ji:Fs.key),bt=Q(Fs,bt,Ji),Vr===null?wi=Fs:Vr.sibling=Fs,Vr=Fs);return d&&Li.forEach(function(ah){return _(Rt,ah)}),io&&Ou(Rt,Ji),wi}function Ki(Rt,bt,zt,fn){if(zt==null)throw Error(a(151));for(var wi=null,Vr=null,Li=bt,Ji=bt=0,Fs=null,po=zt.next();Li!==null&&!po.done;Ji++,po=zt.next()){Li.index>Ji?(Fs=Li,Li=null):Fs=Li.sibling;var ah=Wt(Rt,Li,po.value,fn);if(ah===null){Li===null&&(Li=Fs);break}d&&Li&&ah.alternate===null&&_(Rt,Li),bt=Q(ah,bt,Ji),Vr===null?wi=ah:Vr.sibling=ah,Vr=ah,Li=Fs}if(po.done)return T(Rt,Li),io&&Ou(Rt,Ji),wi;if(Li===null){for(;!po.done;Ji++,po=zt.next())po=vn(Rt,po.value,fn),po!==null&&(bt=Q(po,bt,Ji),Vr===null?wi=po:Vr.sibling=po,Vr=po);return io&&Ou(Rt,Ji),wi}for(Li=D(Li);!po.done;Ji++,po=zt.next())po=Yt(Li,Rt,Ji,po.value,fn),po!==null&&(d&&po.alternate!==null&&Li.delete(po.key===null?Ji:po.key),bt=Q(po,bt,Ji),Vr===null?wi=po:Vr.sibling=po,Vr=po);return d&&Li.forEach(function(pS){return _(Rt,pS)}),io&&Ou(Rt,Ji),wi}function Oo(Rt,bt,zt,fn){if(typeof zt=="object"&&zt!==null&&zt.type===U&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case z:e:{for(var wi=zt.key;bt!==null;){if(bt.key===wi){if(wi=zt.type,wi===U){if(bt.tag===7){T(Rt,bt.sibling),fn=$(bt,zt.props.children),fn.return=Rt,Rt=fn;break e}}else if(bt.elementType===wi||typeof wi=="object"&&wi!==null&&wi.$$typeof===Le&&Qs(wi)===bt.type){T(Rt,bt.sibling),fn=$(bt,zt.props),Ql(fn,zt),fn.return=Rt,Rt=fn;break e}T(Rt,bt);break}else _(Rt,bt);bt=bt.sibling}zt.type===U?(fn=Wh(zt.props.children,Rt.mode,fn,zt.key),fn.return=Rt,Rt=fn):(fn=Hm(zt.type,zt.key,zt.props,null,Rt.mode,fn),Ql(fn,zt),fn.return=Rt,Rt=fn)}return xe(Rt);case N:e:{for(wi=zt.key;bt!==null;){if(bt.key===wi)if(bt.tag===4&&bt.stateNode.containerInfo===zt.containerInfo&&bt.stateNode.implementation===zt.implementation){T(Rt,bt.sibling),fn=$(bt,zt.children||[]),fn.return=Rt,Rt=fn;break e}else{T(Rt,bt);break}else _(Rt,bt);bt=bt.sibling}fn=Gm(zt,Rt.mode,fn),fn.return=Rt,Rt=fn}return xe(Rt);case Le:return wi=zt._init,zt=wi(zt._payload),Oo(Rt,bt,zt,fn)}if(mt(zt))return ur(Rt,bt,zt,fn);if(ut(zt)){if(wi=ut(zt),typeof wi!="function")throw Error(a(150));return zt=wi.call(zt),Ki(Rt,bt,zt,fn)}if(typeof zt.then=="function")return Oo(Rt,bt,hd(zt),fn);if(zt.$$typeof===ne)return Oo(Rt,bt,Xc(Rt,zt),fn);eu(Rt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint"?(zt=""+zt,bt!==null&&bt.tag===6?(T(Rt,bt.sibling),fn=$(bt,zt),fn.return=Rt,Rt=fn):(T(Rt,bt),fn=my(zt,Rt.mode,fn),fn.return=Rt,Rt=fn),xe(Rt)):T(Rt,bt)}return function(Rt,bt,zt,fn){try{Ka=0;var wi=Oo(Rt,bt,zt,fn);return va=null,wi}catch(Li){if(Li===Cp||Li===cf)throw Li;var Vr=Oa(29,Li,null,Rt.mode);return Vr.lanes=fn,Vr.return=Rt,Vr}finally{}}}var Yu=ec(!0),tu=ec(!1),za=ht(null),Ja=null;function bl(d){var _=d.alternate;Ft(is,is.current&1),Ft(za,d),Ja===null&&(_===null||td.current!==null||_.memoizedState!==null)&&(Ja=d)}function og(d){if(d.tag===22){if(Ft(is,is.current),Ft(za,d),Ja===null){var _=d.alternate;_!==null&&_.memoizedState!==null&&(Ja=d)}}else xo()}function xo(){Ft(is,is.current),Ft(za,za.current)}function tc(d){Bt(za),Ja===d&&(Ja=null),Bt(is)}var is=ht(0);function nc(d){for(var _=d;_!==null;){if(_.tag===13){var T=_.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||Wx(T)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}function dd(d,_,T,D){_=d.memoizedState,T=T(D,_),T=T==null?_:R({},_,T),d.memoizedState=T,d.lanes===0&&(d.updateQueue.baseState=T)}var Vp={enqueueSetState:function(d,_,T){d=d._reactInternals;var D=Cs(),$=_c(D);$.payload=_,T!=null&&($.callback=T),_=Yl(d,$,D),_!==null&&(ia(_,d,D),hf(_,d,D))},enqueueReplaceState:function(d,_,T){d=d._reactInternals;var D=Cs(),$=_c(D);$.tag=1,$.payload=_,T!=null&&($.callback=T),_=Yl(d,$,D),_!==null&&(ia(_,d,D),hf(_,d,D))},enqueueForceUpdate:function(d,_){d=d._reactInternals;var T=Cs(),D=_c(T);D.tag=2,_!=null&&(D.callback=_),_=Yl(d,D,T),_!==null&&(ia(_,d,T),hf(_,d,T))}};function $p(d,_,T,D,$,Q,xe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(D,Q,xe):_.prototype&&_.prototype.isPureReactComponent?!Xa(T,D)||!Xa($,Q):!0}function Ku(d,_,T,D){d=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(T,D),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(T,D),_.state!==d&&Vp.enqueueReplaceState(_,_.state,null)}function nu(d,_){var T=_;if("ref"in _){T={};for(var D in _)D!=="ref"&&(T[D]=_[D])}if(d=d.defaultProps){T===_&&(T=R({},T));for(var $ in d)T[$]===void 0&&(T[$]=d[$])}return T}var Ju=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function fd(d){Ju(d)}function _f(d){console.error(d)}function sg(d){Ju(d)}function pd(d,_){try{var T=d.onUncaughtError;T(_.value,{componentStack:_.stack})}catch(D){setTimeout(function(){throw D})}}function ky(d,_,T){try{var D=d.onCaughtError;D(T.value,{componentStack:T.stack,errorBoundary:_.tag===1?_.stateNode:null})}catch($){setTimeout(function(){throw $})}}function vf(d,_,T){return T=_c(T),T.tag=3,T.payload={element:null},T.callback=function(){pd(d,_)},T}function zy(d){return d=_c(d),d.tag=3,d}function By(d,_,T,D){var $=T.type.getDerivedStateFromError;if(typeof $=="function"){var Q=D.value;d.payload=function(){return $(Q)},d.callback=function(){ky(_,T,D)}}var xe=T.stateNode;xe!==null&&typeof xe.componentDidCatch=="function"&&(d.callback=function(){ky(_,T,D),typeof $!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var Be=D.stack;this.componentDidCatch(D.value,{componentStack:Be!==null?Be:""})})}function Cv(d,_,T,D,$){if(T.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(_=T.alternate,_!==null&&Kh(_,T,$,!0),T=za.current,T!==null){switch(T.tag){case 13:return Ja===null?su():T.alternate===null&&cr===0&&(cr=3),T.flags&=-257,T.flags|=65536,T.lanes=$,D===ed?T.flags|=16384:(_=T.updateQueue,_===null?T.updateQueue=new Set([D]):_.add(D),Fx(d,D,$)),!1;case 22:return T.flags|=65536,D===ed?T.flags|=16384:(_=T.updateQueue,_===null?(_={transitions:null,markerInstances:null,retryQueue:new Set([D])},T.updateQueue=_):(T=_.retryQueue,T===null?_.retryQueue=new Set([D]):T.add(D)),Fx(d,D,$)),!1}throw Error(a(435,T.tag))}return Fx(d,D,$),su(),!1}if(io)return _=za.current,_!==null?((_.flags&65536)===0&&(_.flags|=256),_.flags|=65536,_.lanes=$,D!==xp&&(d=Error(a(422),{cause:D}),rf(ha(d,T)))):(D!==xp&&(_=Error(a(423),{cause:D}),rf(ha(_,T))),d=d.current.alternate,d.flags|=65536,$&=-$,d.lanes|=$,D=ha(D,T),$=vf(d.stateNode,D,$),Mp(d,$),cr!==4&&(cr=2)),!1;var Q=Error(a(520),{cause:D});if(Q=ha(Q,T),Fi===null?Fi=[Q]:Fi.push(Q),cr!==4&&(cr=2),_===null)return!0;D=ha(D,T),T=_;do{switch(T.tag){case 3:return T.flags|=65536,d=$&-$,T.lanes|=d,d=vf(T.stateNode,D,d),Mp(T,d),!1;case 1:if(_=T.type,Q=T.stateNode,(T.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Ao===null||!Ao.has(Q))))return T.flags|=65536,$&=-$,T.lanes|=$,$=zy($),By($,d,T,D),Mp(T,$),!1}T=T.return}while(T!==null);return!1}var Fy=Error(a(461)),cs=!1;function Ts(d,_,T,D){_.child=d===null?tu(_,null,T,D):Yu(_,d.child,T,D)}function Ny(d,_,T,D,$){T=T.render;var Q=_.ref;if("ref"in D){var xe={};for(var Be in D)Be!=="ref"&&(xe[Be]=D[Be])}else xe=D;return _l(_),D=nd(d,_,T,xe,Q,$),Be=Un(),d!==null&&!cs?(Pp(d,_,$),Qa(d,_,$)):(io&&Be&&Zh(_),_.flags|=1,Ts(d,_,D,$),_.child)}function jy(d,_,T,D,$){if(d===null){var Q=T.type;return typeof Q=="function"&&!_p(Q)&&Q.defaultProps===void 0&&T.compare===null?(_.tag=15,_.type=Q,Uy(d,_,Q,D,$)):(d=Hm(T.type,null,D,_,_.mode,$),d.ref=_.ref,d.return=_,_.child=d)}if(Q=d.child,!bf(d,$)){var xe=Q.memoizedProps;if(T=T.compare,T=T!==null?T:Xa,T(xe,D)&&d.ref===_.ref)return Qa(d,_,$)}return _.flags|=1,d=Gl(Q,D),d.ref=_.ref,d.return=_,_.child=d}function Uy(d,_,T,D,$){if(d!==null){var Q=d.memoizedProps;if(Xa(Q,D)&&d.ref===_.ref)if(cs=!1,_.pendingProps=D=Q,bf(d,$))(d.flags&131072)!==0&&(cs=!0);else return _.lanes=d.lanes,Qa(d,_,$)}return Hy(d,_,T,D,$)}function Vy(d,_,T){var D=_.pendingProps,$=D.children,Q=d!==null?d.memoizedState:null;if(D.mode==="hidden"){if((_.flags&128)!==0){if(D=Q!==null?Q.baseLanes|T:T,d!==null){for($=_.child=d.child,Q=0;$!==null;)Q=Q|$.lanes|$.childLanes,$=$.sibling;_.childLanes=Q&~D}else _.childLanes=0,_.child=null;return $y(d,_,D,T)}if((T&536870912)!==0)_.memoizedState={baseLanes:0,cachePool:null},d!==null&&Ep(_,Q!==null?Q.cachePool:null),Q!==null?vc(_,Q):Sy(),og(_);else return _.lanes=_.childLanes=536870912,$y(d,_,Q!==null?Q.baseLanes|T:T,T)}else Q!==null?(Ep(_,Q.cachePool),vc(_,Q),xo(),_.memoizedState=null):(d!==null&&Ep(_,null),Sy(),xo());return Ts(d,_,$,T),_.child}function $y(d,_,T,D){var $=vy();return $=$===null?null:{parent:Zo._currentValue,pool:$},_.memoizedState={baseLanes:T,cachePool:$},d!==null&&Ep(_,null),Sy(),og(_),d!==null&&Kh(d,_,D,!0),null}function ag(d,_){var T=_.ref;if(T===null)d!==null&&d.ref!==null&&(_.flags|=4194816);else{if(typeof T!="function"&&typeof T!="object")throw Error(a(284));(d===null||d.ref!==T)&&(_.flags|=4194816)}}function Hy(d,_,T,D,$){return _l(_),T=nd(d,_,T,D,void 0,$),D=Un(),d!==null&&!cs?(Pp(d,_,$),Qa(d,_,$)):(io&&D&&Zh(_),_.flags|=1,Ts(d,_,T,$),_.child)}function oo(d,_,T,D,$,Q){return _l(_),_.updateQueue=null,T=Yc(_,D,T,$),Vu(d),D=Un(),d!==null&&!cs?(Pp(d,_,Q),Qa(d,_,Q)):(io&&D&&Zh(_),_.flags|=1,Ts(d,_,T,Q),_.child)}function Gy(d,_,T,D,$){if(_l(_),_.stateNode===null){var Q=Du,xe=T.contextType;typeof xe=="object"&&xe!==null&&(Q=ns(xe)),Q=new T(D,Q),_.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Q.updater=Vp,_.stateNode=Q,Q._reactInternals=_,Q=_.stateNode,Q.props=D,Q.state=_.memoizedState,Q.refs={},Zm(_),xe=T.contextType,Q.context=typeof xe=="object"&&xe!==null?ns(xe):Du,Q.state=_.memoizedState,xe=T.getDerivedStateFromProps,typeof xe=="function"&&(dd(_,T,xe,D),Q.state=_.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(xe=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),xe!==Q.state&&Vp.enqueueReplaceState(Q,Q.state,null),ff(_,D,Q,$),Bu(),Q.state=_.memoizedState),typeof Q.componentDidMount=="function"&&(_.flags|=4194308),D=!0}else if(d===null){Q=_.stateNode;var Be=_.memoizedProps,lt=nu(T,Be);Q.props=lt;var Ut=Q.context,cn=T.contextType;xe=Du,typeof cn=="object"&&cn!==null&&(xe=ns(cn));var vn=T.getDerivedStateFromProps;cn=typeof vn=="function"||typeof Q.getSnapshotBeforeUpdate=="function",Be=_.pendingProps!==Be,cn||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(Be||Ut!==xe)&&Ku(_,Q,D,xe),ma=!1;var Wt=_.memoizedState;Q.state=Wt,ff(_,D,Q,$),Bu(),Ut=_.memoizedState,Be||Wt!==Ut||ma?(typeof vn=="function"&&(dd(_,T,vn,D),Ut=_.memoizedState),(lt=ma||$p(_,T,lt,D,Wt,Ut,xe))?(cn||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=D,_.memoizedState=Ut),Q.props=D,Q.state=Ut,Q.context=xe,D=lt):(typeof Q.componentDidMount=="function"&&(_.flags|=4194308),D=!1)}else{Q=_.stateNode,ga(d,_),xe=_.memoizedProps,cn=nu(T,xe),Q.props=cn,vn=_.pendingProps,Wt=Q.context,Ut=T.contextType,lt=Du,typeof Ut=="object"&&Ut!==null&&(lt=ns(Ut)),Be=T.getDerivedStateFromProps,(Ut=typeof Be=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(xe!==vn||Wt!==lt)&&Ku(_,Q,D,lt),ma=!1,Wt=_.memoizedState,Q.state=Wt,ff(_,D,Q,$),Bu();var Yt=_.memoizedState;xe!==vn||Wt!==Yt||ma||d!==null&&d.dependencies!==null&&of(d.dependencies)?(typeof Be=="function"&&(dd(_,T,Be,D),Yt=_.memoizedState),(cn=ma||$p(_,T,cn,D,Wt,Yt,lt)||d!==null&&d.dependencies!==null&&of(d.dependencies))?(Ut||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(D,Yt,lt),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(D,Yt,lt)),typeof Q.componentDidUpdate=="function"&&(_.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Q.componentDidUpdate!="function"||xe===d.memoizedProps&&Wt===d.memoizedState||(_.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||xe===d.memoizedProps&&Wt===d.memoizedState||(_.flags|=1024),_.memoizedProps=D,_.memoizedState=Yt),Q.props=D,Q.state=Yt,Q.context=lt,D=cn):(typeof Q.componentDidUpdate!="function"||xe===d.memoizedProps&&Wt===d.memoizedState||(_.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||xe===d.memoizedProps&&Wt===d.memoizedState||(_.flags|=1024),D=!1)}return Q=D,ag(d,_),D=(_.flags&128)!==0,Q||D?(Q=_.stateNode,T=D&&typeof T.getDerivedStateFromError!="function"?null:Q.render(),_.flags|=1,d!==null&&D?(_.child=Yu(_,d.child,null,$),_.child=Yu(_,null,T,$)):Ts(d,_,T,$),_.memoizedState=Q.state,d=_.child):d=Qa(d,_,$),d}function Av(d,_,T,D){return nf(),_.flags|=256,Ts(d,_,T,D),_.child}var Qu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qy(d){return{baseLanes:d,cachePool:xy()}}function eh(d,_,T){return d=d!==null?d.childLanes&~T:0,_&&(d|=ei),d}function Wy(d,_,T){var D=_.pendingProps,$=!1,Q=(_.flags&128)!==0,xe;if((xe=Q)||(xe=d!==null&&d.memoizedState===null?!1:(is.current&2)!==0),xe&&($=!0,_.flags&=-129),xe=(_.flags&32)!==0,_.flags&=-33,d===null){if(io){if($?bl(_):xo(),io){var Be=Eo,lt;if(lt=Be){e:{for(lt=Be,Be=Wl;lt.nodeType!==8;){if(!Be){Be=null;break e}if(lt=lu(lt.nextSibling),lt===null){Be=null;break e}}Be=lt}Be!==null?(_.memoizedState={dehydrated:Be,treeContext:Hc!==null?{id:fa,overflow:ql}:null,retryLane:536870912,hydrationErrors:null},lt=Oa(18,null,null,0),lt.stateNode=Be,lt.return=_,_.child=lt,Ss=_,Eo=null,lt=!0):lt=!1}lt||gc(_)}if(Be=_.memoizedState,Be!==null&&(Be=Be.dehydrated,Be!==null))return Wx(Be)?_.lanes=32:_.lanes=536870912,null;tc(_)}return Be=D.children,D=D.fallback,$?(xo(),$=_.mode,Be=th({mode:"hidden",children:Be},$),D=Wh(D,$,T,null),Be.return=_,D.return=_,Be.sibling=D,_.child=Be,$=_.child,$.memoizedState=qy(T),$.childLanes=eh(d,xe,T),_.memoizedState=Qu,D):(bl(_),xf(_,Be))}if(lt=d.memoizedState,lt!==null&&(Be=lt.dehydrated,Be!==null)){if(Q)_.flags&256?(bl(_),_.flags&=-257,_=wl(d,_,T)):_.memoizedState!==null?(xo(),_.child=d.child,_.flags|=128,_=null):(xo(),$=D.fallback,Be=_.mode,D=th({mode:"visible",children:D.children},Be),$=Wh($,Be,T,null),$.flags|=2,D.return=_,$.return=_,D.sibling=$,_.child=D,Yu(_,d.child,null,T),D=_.child,D.memoizedState=qy(T),D.childLanes=eh(d,xe,T),_.memoizedState=Qu,_=$);else if(bl(_),Wx(Be)){if(xe=Be.nextSibling&&Be.nextSibling.dataset,xe)var Ut=xe.dgst;xe=Ut,D=Error(a(419)),D.stack="",D.digest=xe,rf({value:D,source:null,stack:null}),_=wl(d,_,T)}else if(cs||Kh(d,_,T,!1),xe=(T&d.childLanes)!==0,cs||xe){if(xe=mi,xe!==null&&(D=T&-T,D=(D&42)!==0?1:Os(D),D=(D&(xe.suspendedLanes|T))!==0?0:D,D!==0&&D!==lt.retryLane))throw lt.retryLane=D,yl(d,D),ia(xe,d,D),Fy;Be.data==="$?"||su(),_=wl(d,_,T)}else Be.data==="$?"?(_.flags|=192,_.child=d.child,_=null):(d=lt.treeContext,Eo=lu(Be.nextSibling),Ss=_,io=!0,Gc=null,Wl=!1,d!==null&&(La[da++]=fa,La[da++]=ql,La[da++]=Hc,fa=d.id,ql=d.overflow,Hc=_),_=xf(_,D.children),_.flags|=4096);return _}return $?(xo(),$=D.fallback,Be=_.mode,lt=d.child,Ut=lt.sibling,D=Gl(lt,{mode:"hidden",children:D.children}),D.subtreeFlags=lt.subtreeFlags&65011712,Ut!==null?$=Gl(Ut,$):($=Wh($,Be,T,null),$.flags|=2),$.return=_,D.return=_,D.sibling=$,_.child=D,D=$,$=_.child,Be=d.child.memoizedState,Be===null?Be=qy(T):(lt=Be.cachePool,lt!==null?(Ut=Zo._currentValue,lt=lt.parent!==Ut?{parent:Ut,pool:Ut}:lt):lt=xy(),Be={baseLanes:Be.baseLanes|T,cachePool:lt}),$.memoizedState=Be,$.childLanes=eh(d,xe,T),_.memoizedState=Qu,D):(bl(_),T=d.child,d=T.sibling,T=Gl(T,{mode:"visible",children:D.children}),T.return=_,T.sibling=null,d!==null&&(xe=_.deletions,xe===null?(_.deletions=[d],_.flags|=16):xe.push(d)),_.child=T,_.memoizedState=null,T)}function xf(d,_){return _=th({mode:"visible",children:_},d.mode),_.return=d,d.child=_}function th(d,_){return d=Oa(22,d,null,_),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function wl(d,_,T){return Yu(_,d.child,null,T),d=xf(_,_.pendingProps.children),d.flags|=2,_.memoizedState=null,d}function Hp(d,_,T){d.lanes|=_;var D=d.alternate;D!==null&&(D.lanes|=_),bp(d.return,_,T)}function bo(d,_,T,D,$){var Q=d.memoizedState;Q===null?d.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:D,tail:T,tailMode:$}:(Q.isBackwards=_,Q.rendering=null,Q.renderingStartTime=0,Q.last=D,Q.tail=T,Q.tailMode=$)}function Sl(d,_,T){var D=_.pendingProps,$=D.revealOrder,Q=D.tail;if(Ts(d,_,D.children,T),D=is.current,(D&2)!==0)D=D&1|2,_.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=_.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Hp(d,T,_);else if(d.tag===19)Hp(d,T,_);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===_)break e;for(;d.sibling===null;){if(d.return===null||d.return===_)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}D&=1}switch(Ft(is,D),$){case"forwards":for(T=_.child,$=null;T!==null;)d=T.alternate,d!==null&&nc(d)===null&&($=T),T=T.sibling;T=$,T===null?($=_.child,_.child=null):($=T.sibling,T.sibling=null),bo(_,!1,$,T,Q);break;case"backwards":for(T=null,$=_.child,_.child=null;$!==null;){if(d=$.alternate,d!==null&&nc(d)===null){_.child=$;break}d=$.sibling,$.sibling=T,T=$,$=d}bo(_,!0,T,null,Q);break;case"together":bo(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Qa(d,_,T){if(d!==null&&(_.dependencies=d.dependencies),Nr|=_.lanes,(T&_.childLanes)===0)if(d!==null){if(Kh(d,_,T,!1),(T&_.childLanes)===0)return null}else return null;if(d!==null&&_.child!==d.child)throw Error(a(153));if(_.child!==null){for(d=_.child,T=Gl(d,d.pendingProps),_.child=T,T.return=_;d.sibling!==null;)d=d.sibling,T=T.sibling=Gl(d,d.pendingProps),T.return=_;T.sibling=null}return _.child}function bf(d,_){return(d.lanes&_)!==0?!0:(d=d.dependencies,!!(d!==null&&of(d)))}function Mv(d,_,T){switch(_.tag){case 3:Vn(_,_.stateNode.containerInfo),Xl(_,Zo,d.memoizedState.cache),nf();break;case 27:case 5:On(_);break;case 4:Vn(_,_.stateNode.containerInfo);break;case 10:Xl(_,_.type,_.memoizedProps.value);break;case 13:var D=_.memoizedState;if(D!==null)return D.dehydrated!==null?(bl(_),_.flags|=128,null):(T&_.child.childLanes)!==0?Wy(d,_,T):(bl(_),d=Qa(d,_,T),d!==null?d.sibling:null);bl(_);break;case 19:var $=(d.flags&128)!==0;if(D=(T&_.childLanes)!==0,D||(Kh(d,_,T,!1),D=(T&_.childLanes)!==0),$){if(D)return Sl(d,_,T);_.flags|=128}if($=_.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),Ft(is,is.current),D)break;return null;case 22:case 23:return _.lanes=0,Vy(d,_,T);case 24:Xl(_,Zo,d.memoizedState.cache)}return Qa(d,_,T)}function Rv(d,_,T){if(d!==null)if(d.memoizedProps!==_.pendingProps)cs=!0;else{if(!bf(d,T)&&(_.flags&128)===0)return cs=!1,Mv(d,_,T);cs=(d.flags&131072)!==0}else cs=!1,io&&(_.flags&1048576)!==0&&Xh(_,vp,_.index);switch(_.lanes=0,_.tag){case 16:e:{d=_.pendingProps;var D=_.elementType,$=D._init;if(D=$(D._payload),_.type=D,typeof D=="function")_p(D)?(d=nu(D,d),_.tag=1,_=Gy(null,_,D,d,T)):(_.tag=0,_=Hy(null,_,D,d,T));else{if(D!=null){if($=D.$$typeof,$===se){_.tag=11,_=Ny(null,_,D,d,T);break e}else if($===Ce){_.tag=14,_=jy(null,_,D,d,T);break e}}throw _=ot(D)||D,Error(a(306,_,""))}}return _;case 0:return Hy(d,_,_.type,_.pendingProps,T);case 1:return D=_.type,$=nu(D,_.pendingProps),Gy(d,_,D,$,T);case 3:e:{if(Vn(_,_.stateNode.containerInfo),d===null)throw Error(a(387));D=_.pendingProps;var Q=_.memoizedState;$=Q.element,ga(d,_),ff(_,D,null,T);var xe=_.memoizedState;if(D=xe.cache,Xl(_,Zo,D),D!==Q.cache&&wp(_,[Zo],T,!0),Bu(),D=xe.element,Q.isDehydrated)if(Q={element:D,isDehydrated:!1,cache:xe.cache},_.updateQueue.baseState=Q,_.memoizedState=Q,_.flags&256){_=Av(d,_,D,T);break e}else if(D!==$){$=ha(Error(a(424)),_),rf($),_=Av(d,_,D,T);break e}else{switch(d=_.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Eo=lu(d.firstChild),Ss=_,io=!0,Gc=null,Wl=!0,T=tu(_,null,D,T),_.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling}else{if(nf(),D===$){_=Qa(d,_,T);break e}Ts(d,_,D,T)}_=_.child}return _;case 26:return ag(d,_),d===null?(T=Kv(_.type,null,_.pendingProps,null))?_.memoizedState=T:io||(T=_.type,d=_.pendingProps,D=fg(jt.current).createElement(T),D[ge]=_,D[Ee]=d,Bs(D,T,d),Pn(D),_.stateNode=D):_.memoizedState=Kv(_.type,d.memoizedProps,_.pendingProps,d.memoizedState),null;case 27:return On(_),d===null&&io&&(D=_.stateNode=Zx(_.type,_.pendingProps,jt.current),Ss=_,Wl=!0,$=Eo,vd(_.type)?(Xx=$,Eo=lu(D.firstChild)):Eo=$),Ts(d,_,_.pendingProps.children,T),ag(d,_),d===null&&(_.flags|=4194304),_.child;case 5:return d===null&&io&&(($=D=Eo)&&(D=nm(D,_.type,_.pendingProps,Wl),D!==null?(_.stateNode=D,Ss=_,Eo=lu(D.firstChild),Wl=!1,$=!0):$=!1),$||gc(_)),On(_),$=_.type,Q=_.pendingProps,xe=d!==null?d.memoizedProps:null,D=Q.children,Wv($,Q)?D=null:xe!==null&&Wv($,xe)&&(_.flags|=32),_.memoizedState!==null&&($=nd(d,_,$u,null,null,T),yg._currentValue=$),ag(d,_),Ts(d,_,D,T),_.child;case 6:return d===null&&io&&((d=T=Eo)&&(T=Jw(T,_.pendingProps,Wl),T!==null?(_.stateNode=T,Ss=_,Eo=null,d=!0):d=!1),d||gc(_)),null;case 13:return Wy(d,_,T);case 4:return Vn(_,_.stateNode.containerInfo),D=_.pendingProps,d===null?_.child=Yu(_,null,D,T):Ts(d,_,D,T),_.child;case 11:return Ny(d,_,_.type,_.pendingProps,T);case 7:return Ts(d,_,_.pendingProps,T),_.child;case 8:return Ts(d,_,_.pendingProps.children,T),_.child;case 12:return Ts(d,_,_.pendingProps.children,T),_.child;case 10:return D=_.pendingProps,Xl(_,_.type,D.value),Ts(d,_,D.children,T),_.child;case 9:return $=_.type._context,D=_.pendingProps.children,_l(_),$=ns($),D=D($),_.flags|=1,Ts(d,_,D,T),_.child;case 14:return jy(d,_,_.type,_.pendingProps,T);case 15:return Uy(d,_,_.type,_.pendingProps,T);case 19:return Sl(d,_,T);case 31:return D=_.pendingProps,T=_.mode,D={mode:D.mode,children:D.children},d===null?(T=th(D,T),T.ref=_.ref,_.child=T,T.return=_,_=T):(T=Gl(d.child,D),T.ref=_.ref,_.child=T,T.return=_,_=T),_;case 22:return Vy(d,_,T);case 24:return _l(_),D=ns(Zo),d===null?($=vy(),$===null&&($=mi,Q=sf(),$.pooledCache=Q,Q.refCount++,Q!==null&&($.pooledCacheLanes|=T),$=Q),_.memoizedState={parent:D,cache:$},Zm(_),Xl(_,Zo,$)):((d.lanes&T)!==0&&(ga(d,_),ff(_,null,null,T),Bu()),$=d.memoizedState,Q=_.memoizedState,$.parent!==D?($={parent:D,cache:D},_.memoizedState=$,_.lanes===0&&(_.memoizedState=_.updateQueue.baseState=$),Xl(_,Zo,D)):(D=Q.cache,Xl(_,Zo,D),D!==$.cache&&wp(_,[Zo],T,!0))),Ts(d,_,_.pendingProps.children,T),_.child;case 29:throw _.pendingProps}throw Error(a(156,_.tag))}function el(d){d.flags|=4}function Xy(d,_){if(_.type!=="stylesheet"||(_.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!o_(_)){if(_=za.current,_!==null&&((Fn&4194048)===Fn?Ja!==null:(Fn&62914560)!==Fn&&(Fn&536870912)===0||_!==Ja))throw uf=ed,wv;d.flags|=8192}}function wf(d,_){_!==null&&(d.flags|=4),d.flags&16384&&(_=d.tag!==22?Ga():536870912,d.lanes|=_,Mr|=_)}function ea(d,_){if(!io)switch(d.tailMode){case"hidden":_=d.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?d.tail=null:T.sibling=null;break;case"collapsed":T=d.tail;for(var D=null;T!==null;)T.alternate!==null&&(D=T),T=T.sibling;D===null?_||d.tail===null?d.tail=null:d.tail.sibling=null:D.sibling=null}}function Co(d){var _=d.alternate!==null&&d.alternate.child===d.child,T=0,D=0;if(_)for(var $=d.child;$!==null;)T|=$.lanes|$.childLanes,D|=$.subtreeFlags&65011712,D|=$.flags&65011712,$.return=d,$=$.sibling;else for($=d.child;$!==null;)T|=$.lanes|$.childLanes,D|=$.subtreeFlags,D|=$.flags,$.return=d,$=$.sibling;return d.subtreeFlags|=D,d.childLanes=T,_}function Gp(d,_,T){var D=_.pendingProps;switch(Qd(_),_.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Co(_),null;case 1:return Co(_),null;case 3:return T=_.stateNode,D=null,d!==null&&(D=d.memoizedState.cache),_.memoizedState.cache!==D&&(_.flags|=2048),Zl(Zo),Hn(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(d===null||d.child===null)&&(tf(_)?el(_):d===null||d.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,Yh())),Co(_),null;case 26:return T=_.memoizedState,d===null?(el(_),T!==null?(Co(_),Xy(_,T)):(Co(_),_.flags&=-16777217)):T?T!==d.memoizedState?(el(_),Co(_),Xy(_,T)):(Co(_),_.flags&=-16777217):(d.memoizedProps!==D&&el(_),Co(_),_.flags&=-16777217),null;case 27:ai(_),T=jt.current;var $=_.type;if(d!==null&&_.stateNode!=null)d.memoizedProps!==D&&el(_);else{if(!D){if(_.stateNode===null)throw Error(a(166));return Co(_),null}d=on.current,tf(_)?ef(_):(d=Zx($,D,T),_.stateNode=d,el(_))}return Co(_),null;case 5:if(ai(_),T=_.type,d!==null&&_.stateNode!=null)d.memoizedProps!==D&&el(_);else{if(!D){if(_.stateNode===null)throw Error(a(166));return Co(_),null}if(d=on.current,tf(_))ef(_);else{switch($=fg(jt.current),d){case 1:d=$.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:d=$.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":d=$.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":d=$.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":d=$.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof D.is=="string"?$.createElement("select",{is:D.is}):$.createElement("select"),D.multiple?d.multiple=!0:D.size&&(d.size=D.size);break;default:d=typeof D.is=="string"?$.createElement(T,{is:D.is}):$.createElement(T)}}d[ge]=_,d[Ee]=D;e:for($=_.child;$!==null;){if($.tag===5||$.tag===6)d.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===_)break e;for(;$.sibling===null;){if($.return===null||$.return===_)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}_.stateNode=d;e:switch(Bs(d,T,D),T){case"button":case"input":case"select":case"textarea":d=!!D.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&el(_)}}return Co(_),_.flags&=-16777217,null;case 6:if(d&&_.stateNode!=null)d.memoizedProps!==D&&el(_);else{if(typeof D!="string"&&_.stateNode===null)throw Error(a(166));if(d=jt.current,tf(_)){if(d=_.stateNode,T=_.memoizedProps,D=null,$=Ss,$!==null)switch($.tag){case 27:case 5:D=$.memoizedProps}d[ge]=_,d=!!(d.nodeValue===T||D!==null&&D.suppressHydrationWarning===!0||dg(d.nodeValue,T)),d||gc(_)}else d=fg(d).createTextNode(D),d[ge]=_,_.stateNode=d}return Co(_),null;case 13:if(D=_.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if($=tf(_),D!==null&&D.dehydrated!==null){if(d===null){if(!$)throw Error(a(318));if($=_.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(a(317));$[ge]=_}else nf(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;Co(_),$=!1}else $=Yh(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=$),$=!0;if(!$)return _.flags&256?(tc(_),_):(tc(_),null)}if(tc(_),(_.flags&128)!==0)return _.lanes=T,_;if(T=D!==null,d=d!==null&&d.memoizedState!==null,T){D=_.child,$=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&($=D.alternate.memoizedState.cachePool.pool);var Q=null;D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(Q=D.memoizedState.cachePool.pool),Q!==$&&(D.flags|=2048)}return T!==d&&T&&(_.child.flags|=8192),wf(_,_.updateQueue),Co(_),null;case 4:return Hn(),d===null&&e_(_.stateNode.containerInfo),Co(_),null;case 10:return Zl(_.type),Co(_),null;case 19:if(Bt(is),$=_.memoizedState,$===null)return Co(_),null;if(D=(_.flags&128)!==0,Q=$.rendering,Q===null)if(D)ea($,!1);else{if(cr!==0||d!==null&&(d.flags&128)!==0)for(d=_.child;d!==null;){if(Q=nc(d),Q!==null){for(_.flags|=128,ea($,!1),d=Q.updateQueue,_.updateQueue=d,wf(_,d),_.subtreeFlags=0,d=T,T=_.child;T!==null;)lo(T,d),T=T.sibling;return Ft(is,is.current&1|2),_.child}d=d.sibling}$.tail!==null&&ci()>Vo&&(_.flags|=128,D=!0,ea($,!1),_.lanes=4194304)}else{if(!D)if(d=nc(Q),d!==null){if(_.flags|=128,D=!0,d=d.updateQueue,_.updateQueue=d,wf(_,d),ea($,!0),$.tail===null&&$.tailMode==="hidden"&&!Q.alternate&&!io)return Co(_),null}else 2*ci()-$.renderingStartTime>Vo&&T!==536870912&&(_.flags|=128,D=!0,ea($,!1),_.lanes=4194304);$.isBackwards?(Q.sibling=_.child,_.child=Q):(d=$.last,d!==null?d.sibling=Q:_.child=Q,$.last=Q)}return $.tail!==null?(_=$.tail,$.rendering=_,$.tail=_.sibling,$.renderingStartTime=ci(),_.sibling=null,d=is.current,Ft(is,D?d&1|2:d&1),_):(Co(_),null);case 22:case 23:return tc(_),Ip(),D=_.memoizedState!==null,d!==null?d.memoizedState!==null!==D&&(_.flags|=8192):D&&(_.flags|=8192),D?(T&536870912)!==0&&(_.flags&128)===0&&(Co(_),_.subtreeFlags&6&&(_.flags|=8192)):Co(_),T=_.updateQueue,T!==null&&wf(_,T.retryQueue),T=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),D=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(D=_.memoizedState.cachePool.pool),D!==T&&(_.flags|=2048),d!==null&&Bt(Qh),null;case 24:return T=null,d!==null&&(T=d.memoizedState.cache),_.memoizedState.cache!==T&&(_.flags|=2048),Zl(Zo),Co(_),null;case 25:return null;case 30:return null}throw Error(a(156,_.tag))}function Sf(d,_){switch(Qd(_),_.tag){case 1:return d=_.flags,d&65536?(_.flags=d&-65537|128,_):null;case 3:return Zl(Zo),Hn(),d=_.flags,(d&65536)!==0&&(d&128)===0?(_.flags=d&-65537|128,_):null;case 26:case 27:case 5:return ai(_),null;case 13:if(tc(_),d=_.memoizedState,d!==null&&d.dehydrated!==null){if(_.alternate===null)throw Error(a(340));nf()}return d=_.flags,d&65536?(_.flags=d&-65537|128,_):null;case 19:return Bt(is),null;case 4:return Hn(),null;case 10:return Zl(_.type),null;case 22:case 23:return tc(_),Ip(),d!==null&&Bt(Qh),d=_.flags,d&65536?(_.flags=d&-65537|128,_):null;case 24:return Zl(Zo),null;case 25:return null;default:return null}}function Sc(d,_){switch(Qd(_),_.tag){case 3:Zl(Zo),Hn();break;case 26:case 27:case 5:ai(_);break;case 4:Hn();break;case 13:tc(_);break;case 19:Bt(is);break;case 10:Zl(_.type);break;case 22:case 23:tc(_),Ip(),d!==null&&Bt(Qh);break;case 24:Zl(Zo)}}function xa(d,_){try{var T=_.updateQueue,D=T!==null?T.lastEffect:null;if(D!==null){var $=D.next;T=$;do{if((T.tag&d)===d){D=void 0;var Q=T.create,xe=T.inst;D=Q(),xe.destroy=D}T=T.next}while(T!==$)}}catch(Be){No(_,_.return,Be)}}function Es(d,_,T){try{var D=_.updateQueue,$=D!==null?D.lastEffect:null;if($!==null){var Q=$.next;D=Q;do{if((D.tag&d)===d){var xe=D.inst,Be=xe.destroy;if(Be!==void 0){xe.destroy=void 0,$=_;var lt=T,Ut=Be;try{Ut()}catch(cn){No($,lt,cn)}}}D=D.next}while(D!==Q)}}catch(cn){No(_,_.return,cn)}}function iu(d){var _=d.updateQueue;if(_!==null){var T=d.stateNode;try{Fu(_,T)}catch(D){No(d,d.return,D)}}}function nh(d,_,T){T.props=nu(d.type,d.memoizedProps),T.state=d.memoizedState;try{T.componentWillUnmount()}catch(D){No(d,_,D)}}function m(d,_){try{var T=d.ref;if(T!==null){switch(d.tag){case 26:case 27:case 5:var D=d.stateNode;break;case 30:D=d.stateNode;break;default:D=d.stateNode}typeof T=="function"?d.refCleanup=T(D):T.current=D}}catch($){No(d,_,$)}}function o(d,_){var T=d.ref,D=d.refCleanup;if(T!==null)if(typeof D=="function")try{D()}catch($){No(d,_,$)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch($){No(d,_,$)}else T.current=null}function c(d){var _=d.type,T=d.memoizedProps,D=d.stateNode;try{e:switch(_){case"button":case"input":case"select":case"textarea":T.autoFocus&&D.focus();break e;case"img":T.src?D.src=T.src:T.srcSet&&(D.srcset=T.srcSet)}}catch($){No(d,d.return,$)}}function g(d,_,T){try{var D=d.stateNode;$v(D,d.type,T,_),D[Ee]=_}catch($){No(d,d.return,$)}}function b(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&vd(d.type)||d.tag===4}function w(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||b(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&vd(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function C(d,_,T){var D=d.tag;if(D===5||D===6)d=d.stateNode,_?(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T).insertBefore(d,_):(_=T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,_.appendChild(d),T=T._reactRootContainer,T!=null||_.onclick!==null||(_.onclick=n_));else if(D!==4&&(D===27&&vd(d.type)&&(T=d.stateNode,_=null),d=d.child,d!==null))for(C(d,_,T),d=d.sibling;d!==null;)C(d,_,T),d=d.sibling}function I(d,_,T){var D=d.tag;if(D===5||D===6)d=d.stateNode,_?T.insertBefore(d,_):T.appendChild(d);else if(D!==4&&(D===27&&vd(d.type)&&(T=d.stateNode),d=d.child,d!==null))for(I(d,_,T),d=d.sibling;d!==null;)I(d,_,T),d=d.sibling}function L(d){var _=d.stateNode,T=d.memoizedProps;try{for(var D=d.type,$=_.attributes;$.length;)_.removeAttributeNode($[0]);Bs(_,D,T),_[ge]=d,_[Ee]=T}catch(Q){No(d,d.return,Q)}}var F=!1,V=!1,q=!1,G=typeof WeakSet=="function"?WeakSet:Set,J=null;function he(d,_){if(d=d.containerInfo,Hx=i0,d=Uc(d),dy(d)){if("selectionStart"in d)var T={start:d.selectionStart,end:d.selectionEnd};else e:{T=(T=d.ownerDocument)&&T.defaultView||window;var D=T.getSelection&&T.getSelection();if(D&&D.rangeCount!==0){T=D.anchorNode;var $=D.anchorOffset,Q=D.focusNode;D=D.focusOffset;try{T.nodeType,Q.nodeType}catch{T=null;break e}var xe=0,Be=-1,lt=-1,Ut=0,cn=0,vn=d,Wt=null;t:for(;;){for(var Yt;vn!==T||$!==0&&vn.nodeType!==3||(Be=xe+$),vn!==Q||D!==0&&vn.nodeType!==3||(lt=xe+D),vn.nodeType===3&&(xe+=vn.nodeValue.length),(Yt=vn.firstChild)!==null;)Wt=vn,vn=Yt;for(;;){if(vn===d)break t;if(Wt===T&&++Ut===$&&(Be=xe),Wt===Q&&++cn===D&&(lt=xe),(Yt=vn.nextSibling)!==null)break;vn=Wt,Wt=vn.parentNode}vn=Yt}T=Be===-1||lt===-1?null:{start:Be,end:lt}}else T=null}T=T||{start:0,end:0}}else T=null;for(Hv={focusedElem:d,selectionRange:T},i0=!1,J=_;J!==null;)if(_=J,d=_.child,(_.subtreeFlags&1024)!==0&&d!==null)d.return=_,J=d;else for(;J!==null;){switch(_=J,Q=_.alternate,d=_.flags,_.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&Q!==null){d=void 0,T=_,$=Q.memoizedProps,Q=Q.memoizedState,D=T.stateNode;try{var ur=nu(T.type,$,T.elementType===T.type);d=D.getSnapshotBeforeUpdate(ur,Q),D.__reactInternalSnapshotBeforeUpdate=d}catch(Ki){No(T,T.return,Ki)}}break;case 3:if((d&1024)!==0){if(d=_.stateNode.containerInfo,T=d.nodeType,T===9)rh(d);else if(T===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":rh(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(a(163))}if(d=_.sibling,d!==null){d.return=_.return,J=d;break}J=_.return}}function le(d,_,T){var D=T.flags;switch(T.tag){case 0:case 11:case 15:Et(d,T),D&4&&xa(5,T);break;case 1:if(Et(d,T),D&4)if(d=T.stateNode,_===null)try{d.componentDidMount()}catch(xe){No(T,T.return,xe)}else{var $=nu(T.type,_.memoizedProps);_=_.memoizedState;try{d.componentDidUpdate($,_,d.__reactInternalSnapshotBeforeUpdate)}catch(xe){No(T,T.return,xe)}}D&64&&iu(T),D&512&&m(T,T.return);break;case 3:if(Et(d,T),D&64&&(d=T.updateQueue,d!==null)){if(_=null,T.child!==null)switch(T.child.tag){case 27:case 5:_=T.child.stateNode;break;case 1:_=T.child.stateNode}try{Fu(d,_)}catch(xe){No(T,T.return,xe)}}break;case 27:_===null&&D&4&&L(T);case 26:case 5:Et(d,T),_===null&&D&4&&c(T),D&512&&m(T,T.return);break;case 12:Et(d,T);break;case 13:Et(d,T),D&4&&Ne(d,T),D&64&&(d=T.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(T=pA.bind(null,T),Qw(d,T))));break;case 22:if(D=T.memoizedState!==null||F,!D){_=_!==null&&_.memoizedState!==null||V,$=F;var Q=V;F=D,(V=_)&&!Q?Vt(d,T,(T.subtreeFlags&8772)!==0):Et(d,T),F=$,V=Q}break;case 30:break;default:Et(d,T)}}function fe(d){var _=d.alternate;_!==null&&(d.alternate=null,fe(_)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(_=d.stateNode,_!==null&&Ke(_)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var ce=null,ve=!1;function Ae(d,_,T){for(T=T.child;T!==null;)De(d,_,T),T=T.sibling}function De(d,_,T){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(qn,T)}catch{}switch(T.tag){case 26:V||o(T,_),Ae(d,_,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:V||o(T,_);var D=ce,$=ve;vd(T.type)&&(ce=T.stateNode,ve=!1),Ae(d,_,T),im(T.stateNode),ce=D,ve=$;break;case 5:V||o(T,_);case 6:if(D=ce,$=ve,ce=null,Ae(d,_,T),ce=D,ve=$,ce!==null)if(ve)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(T.stateNode)}catch(Q){No(T,_,Q)}else try{ce.removeChild(T.stateNode)}catch(Q){No(T,_,Q)}break;case 18:ce!==null&&(ve?(d=ce,qx(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,T.stateNode),xg(d)):qx(ce,T.stateNode));break;case 4:D=ce,$=ve,ce=T.stateNode.containerInfo,ve=!0,Ae(d,_,T),ce=D,ve=$;break;case 0:case 11:case 14:case 15:V||Es(2,T,_),V||Es(4,T,_),Ae(d,_,T);break;case 1:V||(o(T,_),D=T.stateNode,typeof D.componentWillUnmount=="function"&&nh(T,_,D)),Ae(d,_,T);break;case 21:Ae(d,_,T);break;case 22:V=(D=V)||T.memoizedState!==null,Ae(d,_,T),V=D;break;default:Ae(d,_,T)}}function Ne(d,_){if(_.memoizedState===null&&(d=_.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{xg(d)}catch(T){No(_,_.return,T)}}function ze(d){switch(d.tag){case 13:case 19:var _=d.stateNode;return _===null&&(_=d.stateNode=new G),_;case 22:return d=d.stateNode,_=d._retryCache,_===null&&(_=d._retryCache=new G),_;default:throw Error(a(435,d.tag))}}function ke(d,_){var T=ze(d);_.forEach(function(D){var $=$w.bind(null,d,D);T.has(D)||(T.add(D),D.then($,$))})}function Re(d,_){var T=_.deletions;if(T!==null)for(var D=0;D<T.length;D++){var $=T[D],Q=d,xe=_,Be=xe;e:for(;Be!==null;){switch(Be.tag){case 27:if(vd(Be.type)){ce=Be.stateNode,ve=!1;break e}break;case 5:ce=Be.stateNode,ve=!1;break e;case 3:case 4:ce=Be.stateNode.containerInfo,ve=!0;break e}Be=Be.return}if(ce===null)throw Error(a(160));De(Q,xe,$),ce=null,ve=!1,Q=$.alternate,Q!==null&&(Q.return=null),$.return=null}if(_.subtreeFlags&13878)for(_=_.child;_!==null;)We(_,d),_=_.sibling}var Ve=null;function We(d,_){var T=d.alternate,D=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Re(_,d),ct(d),D&4&&(Es(3,d,d.return),xa(3,d),Es(5,d,d.return));break;case 1:Re(_,d),ct(d),D&512&&(V||T===null||o(T,T.return)),D&64&&F&&(d=d.updateQueue,d!==null&&(D=d.callbacks,D!==null&&(T=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=T===null?D:T.concat(D))));break;case 26:var $=Ve;if(Re(_,d),ct(d),D&512&&(V||T===null||o(T,T.return)),D&4){var Q=T!==null?T.memoizedState:null;if(D=d.memoizedState,T===null)if(D===null)if(d.stateNode===null){e:{D=d.type,T=d.memoizedProps,$=$.ownerDocument||$;t:switch(D){case"title":Q=$.getElementsByTagName("title")[0],(!Q||Q[st]||Q[ge]||Q.namespaceURI==="http://www.w3.org/2000/svg"||Q.hasAttribute("itemprop"))&&(Q=$.createElement(D),$.head.insertBefore(Q,$.querySelector("head > title"))),Bs(Q,D,T),Q[ge]=d,Pn(Q),D=Q;break e;case"link":var xe=iS("link","href",$).get(D+(T.href||""));if(xe){for(var Be=0;Be<xe.length;Be++)if(Q=xe[Be],Q.getAttribute("href")===(T.href==null||T.href===""?null:T.href)&&Q.getAttribute("rel")===(T.rel==null?null:T.rel)&&Q.getAttribute("title")===(T.title==null?null:T.title)&&Q.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){xe.splice(Be,1);break t}}Q=$.createElement(D),Bs(Q,D,T),$.head.appendChild(Q);break;case"meta":if(xe=iS("meta","content",$).get(D+(T.content||""))){for(Be=0;Be<xe.length;Be++)if(Q=xe[Be],Q.getAttribute("content")===(T.content==null?null:""+T.content)&&Q.getAttribute("name")===(T.name==null?null:T.name)&&Q.getAttribute("property")===(T.property==null?null:T.property)&&Q.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&Q.getAttribute("charset")===(T.charSet==null?null:T.charSet)){xe.splice(Be,1);break t}}Q=$.createElement(D),Bs(Q,D,T),$.head.appendChild(Q);break;default:throw Error(a(468,D))}Q[ge]=d,Pn(Q),D=Q}d.stateNode=D}else rS($,d.type,d.stateNode);else d.stateNode=tb($,D,d.memoizedProps);else Q!==D?(Q===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):Q.count--,D===null?rS($,d.type,d.stateNode):tb($,D,d.memoizedProps)):D===null&&d.stateNode!==null&&g(d,d.memoizedProps,T.memoizedProps)}break;case 27:Re(_,d),ct(d),D&512&&(V||T===null||o(T,T.return)),T!==null&&D&4&&g(d,d.memoizedProps,T.memoizedProps);break;case 5:if(Re(_,d),ct(d),D&512&&(V||T===null||o(T,T.return)),d.flags&32){$=d.stateNode;try{Ea($,"")}catch(Yt){No(d,d.return,Yt)}}D&4&&d.stateNode!=null&&($=d.memoizedProps,g(d,$,T!==null?T.memoizedProps:$)),D&1024&&(q=!0);break;case 6:if(Re(_,d),ct(d),D&4){if(d.stateNode===null)throw Error(a(162));D=d.memoizedProps,T=d.stateNode;try{T.nodeValue=D}catch(Yt){No(d,d.return,Yt)}}break;case 3:if(Qv=null,$=Ve,Ve=r_(_.containerInfo),Re(_,d),Ve=$,ct(d),D&4&&T!==null&&T.memoizedState.isDehydrated)try{xg(_.containerInfo)}catch(Yt){No(d,d.return,Yt)}q&&(q=!1,rt(d));break;case 4:D=Ve,Ve=r_(d.stateNode.containerInfo),Re(_,d),ct(d),Ve=D;break;case 12:Re(_,d),ct(d);break;case 13:Re(_,d),ct(d),d.child.flags&8192&&d.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(Ur=ci()),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,ke(d,D)));break;case 22:$=d.memoizedState!==null;var lt=T!==null&&T.memoizedState!==null,Ut=F,cn=V;if(F=Ut||$,V=cn||lt,Re(_,d),V=cn,F=Ut,ct(d),D&8192)e:for(_=d.stateNode,_._visibility=$?_._visibility&-2:_._visibility|1,$&&(T===null||lt||F||V||wt(d)),T=null,_=d;;){if(_.tag===5||_.tag===26){if(T===null){lt=T=_;try{if(Q=lt.stateNode,$)xe=Q.style,typeof xe.setProperty=="function"?xe.setProperty("display","none","important"):xe.display="none";else{Be=lt.stateNode;var vn=lt.memoizedProps.style,Wt=vn!=null&&vn.hasOwnProperty("display")?vn.display:null;Be.style.display=Wt==null||typeof Wt=="boolean"?"":(""+Wt).trim()}}catch(Yt){No(lt,lt.return,Yt)}}}else if(_.tag===6){if(T===null){lt=_;try{lt.stateNode.nodeValue=$?"":lt.memoizedProps}catch(Yt){No(lt,lt.return,Yt)}}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===d)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break e;for(;_.sibling===null;){if(_.return===null||_.return===d)break e;T===_&&(T=null),_=_.return}T===_&&(T=null),_.sibling.return=_.return,_=_.sibling}D&4&&(D=d.updateQueue,D!==null&&(T=D.retryQueue,T!==null&&(D.retryQueue=null,ke(d,T))));break;case 19:Re(_,d),ct(d),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,ke(d,D)));break;case 30:break;case 21:break;default:Re(_,d),ct(d)}}function ct(d){var _=d.flags;if(_&2){try{for(var T,D=d.return;D!==null;){if(b(D)){T=D;break}D=D.return}if(T==null)throw Error(a(160));switch(T.tag){case 27:var $=T.stateNode,Q=w(d);I(d,Q,$);break;case 5:var xe=T.stateNode;T.flags&32&&(Ea(xe,""),T.flags&=-33);var Be=w(d);I(d,Be,xe);break;case 3:case 4:var lt=T.stateNode.containerInfo,Ut=w(d);C(d,Ut,lt);break;default:throw Error(a(161))}}catch(cn){No(d,d.return,cn)}d.flags&=-3}_&4096&&(d.flags&=-4097)}function rt(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var _=d;rt(_),_.tag===5&&_.flags&1024&&_.stateNode.reset(),d=d.sibling}}function Et(d,_){if(_.subtreeFlags&8772)for(_=_.child;_!==null;)le(d,_.alternate,_),_=_.sibling}function wt(d){for(d=d.child;d!==null;){var _=d;switch(_.tag){case 0:case 11:case 14:case 15:Es(4,_,_.return),wt(_);break;case 1:o(_,_.return);var T=_.stateNode;typeof T.componentWillUnmount=="function"&&nh(_,_.return,T),wt(_);break;case 27:im(_.stateNode);case 26:case 5:o(_,_.return),wt(_);break;case 22:_.memoizedState===null&&wt(_);break;case 30:wt(_);break;default:wt(_)}d=d.sibling}}function Vt(d,_,T){for(T=T&&(_.subtreeFlags&8772)!==0,_=_.child;_!==null;){var D=_.alternate,$=d,Q=_,xe=Q.flags;switch(Q.tag){case 0:case 11:case 15:Vt($,Q,T),xa(4,Q);break;case 1:if(Vt($,Q,T),D=Q,$=D.stateNode,typeof $.componentDidMount=="function")try{$.componentDidMount()}catch(Ut){No(D,D.return,Ut)}if(D=Q,$=D.updateQueue,$!==null){var Be=D.stateNode;try{var lt=$.shared.hiddenCallbacks;if(lt!==null)for($.shared.hiddenCallbacks=null,$=0;$<lt.length;$++)Rp(lt[$],Be)}catch(Ut){No(D,D.return,Ut)}}T&&xe&64&&iu(Q),m(Q,Q.return);break;case 27:L(Q);case 26:case 5:Vt($,Q,T),T&&D===null&&xe&4&&c(Q),m(Q,Q.return);break;case 12:Vt($,Q,T);break;case 13:Vt($,Q,T),T&&xe&4&&Ne($,Q);break;case 22:Q.memoizedState===null&&Vt($,Q,T),m(Q,Q.return);break;case 30:break;default:Vt($,Q,T)}_=_.sibling}}function nt(d,_){var T=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(T=d.memoizedState.cachePool.pool),d=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(d=_.memoizedState.cachePool.pool),d!==T&&(d!=null&&d.refCount++,T!=null&&Lu(T))}function ft(d,_){d=null,_.alternate!==null&&(d=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==d&&(_.refCount++,d!=null&&Lu(d))}function Qe(d,_,T,D){if(_.subtreeFlags&10256)for(_=_.child;_!==null;)Mt(d,_,T,D),_=_.sibling}function Mt(d,_,T,D){var $=_.flags;switch(_.tag){case 0:case 11:case 15:Qe(d,_,T,D),$&2048&&xa(9,_);break;case 1:Qe(d,_,T,D);break;case 3:Qe(d,_,T,D),$&2048&&(d=null,_.alternate!==null&&(d=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==d&&(_.refCount++,d!=null&&Lu(d)));break;case 12:if($&2048){Qe(d,_,T,D),d=_.stateNode;try{var Q=_.memoizedProps,xe=Q.id,Be=Q.onPostCommit;typeof Be=="function"&&Be(xe,_.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(lt){No(_,_.return,lt)}}else Qe(d,_,T,D);break;case 13:Qe(d,_,T,D);break;case 23:break;case 22:Q=_.stateNode,xe=_.alternate,_.memoizedState!==null?Q._visibility&2?Qe(d,_,T,D):Ot(d,_):Q._visibility&2?Qe(d,_,T,D):(Q._visibility|=2,pt(d,_,T,D,(_.subtreeFlags&10256)!==0)),$&2048&&nt(xe,_);break;case 24:Qe(d,_,T,D),$&2048&&ft(_.alternate,_);break;default:Qe(d,_,T,D)}}function pt(d,_,T,D,$){for($=$&&(_.subtreeFlags&10256)!==0,_=_.child;_!==null;){var Q=d,xe=_,Be=T,lt=D,Ut=xe.flags;switch(xe.tag){case 0:case 11:case 15:pt(Q,xe,Be,lt,$),xa(8,xe);break;case 23:break;case 22:var cn=xe.stateNode;xe.memoizedState!==null?cn._visibility&2?pt(Q,xe,Be,lt,$):Ot(Q,xe):(cn._visibility|=2,pt(Q,xe,Be,lt,$)),$&&Ut&2048&&nt(xe.alternate,xe);break;case 24:pt(Q,xe,Be,lt,$),$&&Ut&2048&&ft(xe.alternate,xe);break;default:pt(Q,xe,Be,lt,$)}_=_.sibling}}function Ot(d,_){if(_.subtreeFlags&10256)for(_=_.child;_!==null;){var T=d,D=_,$=D.flags;switch(D.tag){case 22:Ot(T,D),$&2048&&nt(D.alternate,D);break;case 24:Ot(T,D),$&2048&&ft(D.alternate,D);break;default:Ot(T,D)}_=_.sibling}}var Ct=8192;function Lt(d){if(d.subtreeFlags&Ct)for(d=d.child;d!==null;)Nt(d),d=d.sibling}function Nt(d){switch(d.tag){case 26:Lt(d),d.flags&Ct&&d.memoizedState!==null&&oS(Ve,d.memoizedState,d.memoizedProps);break;case 5:Lt(d);break;case 3:case 4:var _=Ve;Ve=r_(d.stateNode.containerInfo),Lt(d),Ve=_;break;case 22:d.memoizedState===null&&(_=d.alternate,_!==null&&_.memoizedState!==null?(_=Ct,Ct=16777216,Lt(d),Ct=_):Lt(d));break;default:Lt(d)}}function pn(d){var _=d.alternate;if(_!==null&&(d=_.child,d!==null)){_.child=null;do _=d.sibling,d.sibling=null,d=_;while(d!==null)}}function _n(d){var _=d.deletions;if((d.flags&16)!==0){if(_!==null)for(var T=0;T<_.length;T++){var D=_[T];J=D,yn(D,d)}pn(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)dn(d),d=d.sibling}function dn(d){switch(d.tag){case 0:case 11:case 15:_n(d),d.flags&2048&&Es(9,d,d.return);break;case 3:_n(d);break;case 12:_n(d);break;case 22:var _=d.stateNode;d.memoizedState!==null&&_._visibility&2&&(d.return===null||d.return.tag!==13)?(_._visibility&=-3,Sn(d)):_n(d);break;default:_n(d)}}function Sn(d){var _=d.deletions;if((d.flags&16)!==0){if(_!==null)for(var T=0;T<_.length;T++){var D=_[T];J=D,yn(D,d)}pn(d)}for(d=d.child;d!==null;){switch(_=d,_.tag){case 0:case 11:case 15:Es(8,_,_.return),Sn(_);break;case 22:T=_.stateNode,T._visibility&2&&(T._visibility&=-3,Sn(_));break;default:Sn(_)}d=d.sibling}}function yn(d,_){for(;J!==null;){var T=J;switch(T.tag){case 0:case 11:case 15:Es(8,T,_);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var D=T.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:Lu(T.memoizedState.cache)}if(D=T.child,D!==null)D.return=T,J=D;else e:for(T=d;J!==null;){D=J;var $=D.sibling,Q=D.return;if(fe(D),D===T){J=null;break e}if($!==null){$.return=Q,J=$;break e}J=Q}}}var Gn={getCacheForType:function(d){var _=ns(Zo),T=_.data.get(d);return T===void 0&&(T=d(),_.data.set(d,T)),T}},ti=typeof WeakMap=="function"?WeakMap:Map,$n=0,mi=null,Kn=null,Fn=0,Ci=0,lr=null,ni=!1,Ai=!1,Hi=!1,Wi=0,cr=0,Nr=0,fo=0,jr=0,ei=0,Mr=0,Fi=null,Zi=null,Yi=!1,Ur=0,Vo=1/0,Rr=null,Ao=null,br=0,Po=null,ta=null,Ba=0,na=0,Fa=null,ic=null,Na=0,tl=null;function Cs(){if(($n&2)!==0&&Fn!==0)return Fn&-Fn;if($e.T!==null){var d=ku;return d!==0?d:Vx()}return Te()}function ih(){ei===0&&(ei=(Fn&536870912)===0||io?ko():536870912);var d=za.current;return d!==null&&(d.flags|=32),ei}function ia(d,_,T){(d===mi&&(Ci===2||Ci===9)||d.cancelPendingCommit!==null)&&(Yp(d,0),wr(d,Fn,ei,!1)),Ds(d,T),(($n&2)===0||d!==mi)&&(d===mi&&(($n&2)===0&&(fo|=T),cr===4&&wr(d,Fn,ei,!1)),au(d))}function qp(d,_,T){if(($n&6)!==0)throw Error(a(327));var D=!T&&(_&124)===0&&(_&d.expiredLanes)===0||Wr(d,_),$=D?Dv(d,_):Pv(d,_,!0),Q=D;do{if($===0){Ai&&!D&&wr(d,_,0,!1);break}else{if(T=d.current.alternate,Q&&!Xp(T)){$=Pv(d,_,!1),Q=!1;continue}if($===2){if(Q=_,d.errorRecoveryDisabledLanes&Q)var xe=0;else xe=d.pendingLanes&-536870913,xe=xe!==0?xe:xe&536870912?536870912:0;if(xe!==0){_=xe;e:{var Be=d;$=Fi;var lt=Be.current.memoizedState.isDehydrated;if(lt&&(Yp(Be,xe).flags|=256),xe=Pv(Be,xe,!1),xe!==2){if(Hi&&!lt){Be.errorRecoveryDisabledLanes|=Q,fo|=Q,$=4;break e}Q=Zi,Zi=$,Q!==null&&(Zi===null?Zi=Q:Zi.push.apply(Zi,Q))}$=xe}if(Q=!1,$!==2)continue}}if($===1){Yp(d,0),wr(d,_,0,!0);break}e:{switch(D=d,Q=$,Q){case 0:case 1:throw Error(a(345));case 4:if((_&4194048)!==_)break;case 6:wr(D,_,ei,!ni);break e;case 2:Zi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((_&62914560)===_&&($=Ur+300-ci(),10<$)){if(wr(D,_,ei,!ni),hr(D,0,!0)!==0)break e;D.timeoutHandle=Xv(Wp.bind(null,D,T,Zi,Rr,Yi,_,ei,fo,Mr,ni,Q,2,-0,0),$);break e}Wp(D,T,Zi,Rr,Yi,_,ei,fo,Mr,ni,Q,0,-0,0)}}break}while(!0);au(d)}function Wp(d,_,T,D,$,Q,xe,Be,lt,Ut,cn,vn,Wt,Yt){if(d.timeoutHandle=-1,vn=_.subtreeFlags,(vn&8192||(vn&16785408)===16785408)&&(mg={stylesheets:null,count:0,unsuspend:e0},Nt(_),vn=rb(),vn!==null)){d.cancelPendingCommit=vn(Lv.bind(null,d,_,Q,T,D,$,xe,Be,lt,cn,1,Wt,Yt)),wr(d,Q,xe,!Ut);return}Lv(d,_,Q,T,D,$,xe,Be,lt)}function Xp(d){for(var _=d;;){var T=_.tag;if((T===0||T===11||T===15)&&_.flags&16384&&(T=_.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var D=0;D<T.length;D++){var $=T[D],Q=$.getSnapshot;$=$.value;try{if(!Wa(Q(),$))return!1}catch{return!1}}if(T=_.child,_.subtreeFlags&16384&&T!==null)T.return=_,_=T;else{if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function wr(d,_,T,D){_&=~jr,_&=~fo,d.suspendedLanes|=_,d.pingedLanes&=~_,D&&(d.warmLanes|=_),D=d.expirationTimes;for(var $=_;0<$;){var Q=31-Mi($),xe=1<<Q;D[Q]=-1,$&=~xe}T!==0&&ca(d,T,_)}function ru(){return($n&6)===0?(ug(0),!1):!0}function Zp(){if(Kn!==null){if(Ci===0)var d=Kn.return;else d=Kn,Wc=qc=null,Ty(d),va=null,Ka=0,d=Kn;for(;d!==null;)Sc(d.alternate,d),d=d.return;Kn=null}}function Yp(d,_){var T=d.timeoutHandle;T!==-1&&(d.timeoutHandle=-1,Yw(T)),T=d.cancelPendingCommit,T!==null&&(d.cancelPendingCommit=null,T()),Zp(),mi=d,Kn=T=Gl(d.current,null),Fn=_,Ci=0,lr=null,ni=!1,Ai=Wr(d,_),Hi=!1,Mr=ei=jr=fo=Nr=cr=0,Zi=Fi=null,Yi=!1,(_&8)!==0&&(_|=_&32);var D=d.entangledLanes;if(D!==0)for(d=d.entanglements,D&=_;0<D;){var $=31-Mi(D),Q=1<<$;_|=d[$],D&=~Q}return Wi=_,Vc(),T}function Nw(d,_){yr=null,$e.H=cd,_===Cp||_===cf?(_=Xm(),Ci=3):_===wv?(_=Xm(),Ci=4):Ci=_===Fy?8:_!==null&&typeof _=="object"&&typeof _.then=="function"?6:1,lr=_,Kn===null&&(cr=1,pd(d,ha(_,d.current)))}function Iv(){var d=$e.H;return $e.H=cd,d===null?cd:d}function ou(){var d=$e.A;return $e.A=Gn,d}function su(){cr=4,ni||(Fn&4194048)!==Fn&&za.current!==null||(Ai=!0),(Nr&134217727)===0&&(fo&134217727)===0||mi===null||wr(mi,Fn,ei,!1)}function Pv(d,_,T){var D=$n;$n|=2;var $=Iv(),Q=ou();(mi!==d||Fn!==_)&&(Rr=null,Yp(d,_)),_=!1;var xe=cr;e:do try{if(Ci!==0&&Kn!==null){var Be=Kn,lt=lr;switch(Ci){case 8:Zp(),xe=6;break e;case 3:case 2:case 9:case 6:za.current===null&&(_=!0);var Ut=Ci;if(Ci=0,lr=null,Kp(d,Be,lt,Ut),T&&Ai){xe=0;break e}break;default:Ut=Ci,Ci=0,lr=null,Kp(d,Be,lt,Ut)}}jw(),xe=cr;break}catch(cn){Nw(d,cn)}while(!0);return _&&d.shellSuspendCounter++,Wc=qc=null,$n=D,$e.H=$,$e.A=Q,Kn===null&&(mi=null,Fn=0,Vc()),xe}function jw(){for(;Kn!==null;)lg(Kn)}function Dv(d,_){var T=$n;$n|=2;var D=Iv(),$=ou();mi!==d||Fn!==_?(Rr=null,Vo=ci()+500,Yp(d,_)):Ai=Wr(d,_);e:do try{if(Ci!==0&&Kn!==null){_=Kn;var Q=lr;t:switch(Ci){case 1:Ci=0,lr=null,Kp(d,_,Q,1);break;case 2:case 9:if(by(Q)){Ci=0,lr=null,Zy(_);break}_=function(){Ci!==2&&Ci!==9||mi!==d||(Ci=7),au(d)},Q.then(_,_);break e;case 3:Ci=7;break e;case 4:Ci=5;break e;case 7:by(Q)?(Ci=0,lr=null,Zy(_)):(Ci=0,lr=null,Kp(d,_,Q,7));break;case 5:var xe=null;switch(Kn.tag){case 26:xe=Kn.memoizedState;case 5:case 27:var Be=Kn;if(!xe||o_(xe)){Ci=0,lr=null;var lt=Be.sibling;if(lt!==null)Kn=lt;else{var Ut=Be.return;Ut!==null?(Kn=Ut,Jp(Ut)):Kn=null}break t}}Ci=0,lr=null,Kp(d,_,Q,5);break;case 6:Ci=0,lr=null,Kp(d,_,Q,6);break;case 8:Zp(),cr=6;break e;default:throw Error(a(462))}}Ox();break}catch(cn){Nw(d,cn)}while(!0);return Wc=qc=null,$e.H=D,$e.A=$,$n=T,Kn!==null?0:(mi=null,Fn=0,Vc(),cr)}function Ox(){for(;Kn!==null&&!hi();)lg(Kn)}function lg(d){var _=Rv(d.alternate,d,Wi);d.memoizedProps=d.pendingProps,_===null?Jp(d):Kn=_}function Zy(d){var _=d,T=_.alternate;switch(_.tag){case 15:case 0:_=oo(T,_,_.pendingProps,_.type,void 0,Fn);break;case 11:_=oo(T,_,_.pendingProps,_.type.render,_.ref,Fn);break;case 5:Ty(_);default:Sc(T,_),_=Kn=lo(_,Wi),_=Rv(T,_,Wi)}d.memoizedProps=d.pendingProps,_===null?Jp(d):Kn=_}function Kp(d,_,T,D){Wc=qc=null,Ty(_),va=null,Ka=0;var $=_.return;try{if(Cv(d,$,_,T,Fn)){cr=1,pd(d,ha(T,d.current)),Kn=null;return}}catch(Q){if($!==null)throw Kn=$,Q;cr=1,pd(d,ha(T,d.current)),Kn=null;return}_.flags&32768?(io||D===1?d=!0:Ai||(Fn&536870912)!==0?d=!1:(ni=d=!0,(D===2||D===9||D===3||D===6)&&(D=za.current,D!==null&&D.tag===13&&(D.flags|=16384))),Ov(_,d)):Jp(_)}function Jp(d){var _=d;do{if((_.flags&32768)!==0){Ov(_,ni);return}d=_.return;var T=Gp(_.alternate,_,Wi);if(T!==null){Kn=T;return}if(_=_.sibling,_!==null){Kn=_;return}Kn=_=d}while(_!==null);cr===0&&(cr=5)}function Ov(d,_){do{var T=Sf(d.alternate,d);if(T!==null){T.flags&=32767,Kn=T;return}if(T=d.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!_&&(d=d.sibling,d!==null)){Kn=d;return}Kn=d=T}while(d!==null);cr=6,Kn=null}function Lv(d,_,T,D,$,Q,xe,Be,lt){d.cancelPendingCommit=null;do cg();while(br!==0);if(($n&6)!==0)throw Error(a(327));if(_!==null){if(_===d.current)throw Error(a(177));if(Q=_.lanes|_.childLanes,Q|=Da,Bl(d,T,Q,xe,Be,lt),d===mi&&(Kn=mi=null,Fn=0),ta=_,Po=d,Ba=T,na=Q,Fa=$,ic=D,(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,mA(yi,function(){return Bx(),null})):(d.callbackNode=null,d.callbackPriority=0),D=(_.flags&13878)!==0,(_.subtreeFlags&13878)!==0||D){D=$e.T,$e.T=null,$=it.p,it.p=2,xe=$n,$n|=4;try{he(d,_,T)}finally{$n=xe,it.p=$,$e.T=D}}br=1,Lx(),kx(),md()}}function Lx(){if(br===1){br=0;var d=Po,_=ta,T=(_.flags&13878)!==0;if((_.subtreeFlags&13878)!==0||T){T=$e.T,$e.T=null;var D=it.p;it.p=2;var $=$n;$n|=4;try{We(_,d);var Q=Hv,xe=Uc(d.containerInfo),Be=Q.focusedElem,lt=Q.selectionRange;if(xe!==Be&&Be&&Be.ownerDocument&&Nm(Be.ownerDocument.documentElement,Be)){if(lt!==null&&dy(Be)){var Ut=lt.start,cn=lt.end;if(cn===void 0&&(cn=Ut),"selectionStart"in Be)Be.selectionStart=Ut,Be.selectionEnd=Math.min(cn,Be.value.length);else{var vn=Be.ownerDocument||document,Wt=vn&&vn.defaultView||window;if(Wt.getSelection){var Yt=Wt.getSelection(),ur=Be.textContent.length,Ki=Math.min(lt.start,ur),Oo=lt.end===void 0?Ki:Math.min(lt.end,ur);!Yt.extend&&Ki>Oo&&(xe=Oo,Oo=Ki,Ki=xe);var Rt=Vl(Be,Ki),bt=Vl(Be,Oo);if(Rt&&bt&&(Yt.rangeCount!==1||Yt.anchorNode!==Rt.node||Yt.anchorOffset!==Rt.offset||Yt.focusNode!==bt.node||Yt.focusOffset!==bt.offset)){var zt=vn.createRange();zt.setStart(Rt.node,Rt.offset),Yt.removeAllRanges(),Ki>Oo?(Yt.addRange(zt),Yt.extend(bt.node,bt.offset)):(zt.setEnd(bt.node,bt.offset),Yt.addRange(zt))}}}}for(vn=[],Yt=Be;Yt=Yt.parentNode;)Yt.nodeType===1&&vn.push({element:Yt,left:Yt.scrollLeft,top:Yt.scrollTop});for(typeof Be.focus=="function"&&Be.focus(),Be=0;Be<vn.length;Be++){var fn=vn[Be];fn.element.scrollLeft=fn.left,fn.element.scrollTop=fn.top}}i0=!!Hx,Hv=Hx=null}finally{$n=$,it.p=D,$e.T=T}}d.current=_,br=2}}function kx(){if(br===2){br=0;var d=Po,_=ta,T=(_.flags&8772)!==0;if((_.subtreeFlags&8772)!==0||T){T=$e.T,$e.T=null;var D=it.p;it.p=2;var $=$n;$n|=4;try{le(d,_.alternate,_)}finally{$n=$,it.p=D,$e.T=T}}br=3}}function md(){if(br===4||br===3){br=0,fi();var d=Po,_=ta,T=Ba,D=ic;(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?br=5:(br=0,ta=Po=null,zx(d,d.pendingLanes));var $=d.pendingLanes;if($===0&&(Ao=null),Gi(T),_=_.stateNode,Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(qn,_,void 0,(_.current.flags&128)===128)}catch{}if(D!==null){_=$e.T,$=it.p,it.p=2,$e.T=null;try{for(var Q=d.onRecoverableError,xe=0;xe<D.length;xe++){var Be=D[xe];Q(Be.value,{componentStack:Be.stack})}}finally{$e.T=_,it.p=$}}(Ba&3)!==0&&cg(),au(d),$=d.pendingLanes,(T&4194090)!==0&&($&42)!==0?d===tl?Na++:(Na=0,tl=d):Na=0,ug(0)}}function zx(d,_){(d.pooledCacheLanes&=_)===0&&(_=d.pooledCache,_!=null&&(d.pooledCache=null,Lu(_)))}function cg(d){return Lx(),kx(),md(),Bx()}function Bx(){if(br!==5)return!1;var d=Po,_=na;na=0;var T=Gi(Ba),D=$e.T,$=it.p;try{it.p=32>T?32:T,$e.T=null,T=Fa,Fa=null;var Q=Po,xe=Ba;if(br=0,ta=Po=null,Ba=0,($n&6)!==0)throw Error(a(331));var Be=$n;if($n|=4,dn(Q.current),Mt(Q,Q.current,xe,T),$n=Be,ug(0,!1),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(qn,Q)}catch{}return!0}finally{it.p=$,$e.T=D,zx(d,_)}}function Uw(d,_,T){_=ha(T,_),_=vf(d.stateNode,_,2),d=Yl(d,_,2),d!==null&&(Ds(d,2),au(d))}function No(d,_,T){if(d.tag===3)Uw(d,d,T);else for(;_!==null;){if(_.tag===3){Uw(_,d,T);break}else if(_.tag===1){var D=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Ao===null||!Ao.has(D))){d=ha(T,d),T=zy(2),D=Yl(_,T,2),D!==null&&(By(T,D,_,d),Ds(D,2),au(D));break}}_=_.return}}function Fx(d,_,T){var D=d.pingCache;if(D===null){D=d.pingCache=new ti;var $=new Set;D.set(_,$)}else $=D.get(_),$===void 0&&($=new Set,D.set(_,$));$.has(T)||(Hi=!0,$.add(T),d=Vw.bind(null,d,_,T),_.then(d,d))}function Vw(d,_,T){var D=d.pingCache;D!==null&&D.delete(_),d.pingedLanes|=d.suspendedLanes&T,d.warmLanes&=~T,mi===d&&(Fn&T)===T&&(cr===4||cr===3&&(Fn&62914560)===Fn&&300>ci()-Ur?($n&2)===0&&Yp(d,0):jr|=T,Mr===Fn&&(Mr=0)),au(d)}function Nx(d,_){_===0&&(_=Ga()),d=yl(d,_),d!==null&&(Ds(d,_),au(d))}function pA(d){var _=d.memoizedState,T=0;_!==null&&(T=_.retryLane),Nx(d,T)}function $w(d,_){var T=0;switch(d.tag){case 13:var D=d.stateNode,$=d.memoizedState;$!==null&&(T=$.retryLane);break;case 19:D=d.stateNode;break;case 22:D=d.stateNode._retryCache;break;default:throw Error(a(314))}D!==null&&D.delete(_),Nx(d,T)}function mA(d,_){return Ln(d,_)}var kv=null,Qp=null,zv=!1,Yy=!1,Bv=!1,Tf=0;function au(d){d!==Qp&&d.next===null&&(Qp===null?kv=Qp=d:Qp=Qp.next=d),Yy=!0,zv||(zv=!0,gA())}function ug(d,_){if(!Bv&&Yy){Bv=!0;do for(var T=!1,D=kv;D!==null;){if(d!==0){var $=D.pendingLanes;if($===0)var Q=0;else{var xe=D.suspendedLanes,Be=D.pingedLanes;Q=(1<<31-Mi(42|d)+1)-1,Q&=$&~(xe&~Be),Q=Q&201326741?Q&201326741|1:Q?Q|2:0}Q!==0&&(T=!0,hg(D,Q))}else Q=Fn,Q=hr(D,D===mi?Q:0,D.cancelPendingCommit!==null||D.timeoutHandle!==-1),(Q&3)===0||Wr(D,Q)||(T=!0,hg(D,Q));D=D.next}while(T);Bv=!1}}function jx(){gd()}function gd(){Yy=zv=!1;var d=0;Tf!==0&&(Zw()&&(d=Tf),Tf=0);for(var _=ci(),T=null,D=kv;D!==null;){var $=D.next,Q=ps(D,_);Q===0?(D.next=null,T===null?kv=$:T.next=$,$===null&&(Qp=T)):(T=D,(d!==0||(Q&3)!==0)&&(Yy=!0)),D=$}ug(d)}function ps(d,_){for(var T=d.suspendedLanes,D=d.pingedLanes,$=d.expirationTimes,Q=d.pendingLanes&-62914561;0<Q;){var xe=31-Mi(Q),Be=1<<xe,lt=$[xe];lt===-1?((Be&T)===0||(Be&D)!==0)&&($[xe]=Vi(Be,_)):lt<=_&&(d.expiredLanes|=Be),Q&=~Be}if(_=mi,T=Fn,T=hr(d,d===_?T:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),D=d.callbackNode,T===0||d===_&&(Ci===2||Ci===9)||d.cancelPendingCommit!==null)return D!==null&&D!==null&&zn(D),d.callbackNode=null,d.callbackPriority=0;if((T&3)===0||Wr(d,T)){if(_=T&-T,_===d.callbackPriority)return _;switch(D!==null&&zn(D),Gi(T)){case 2:case 8:T=pi;break;case 32:T=yi;break;case 268435456:T=Cn;break;default:T=yi}return D=Ux.bind(null,d),T=Ln(T,D),d.callbackPriority=_,d.callbackNode=T,_}return D!==null&&D!==null&&zn(D),d.callbackPriority=2,d.callbackNode=null,2}function Ux(d,_){if(br!==0&&br!==5)return d.callbackNode=null,d.callbackPriority=0,null;var T=d.callbackNode;if(cg()&&d.callbackNode!==T)return null;var D=Fn;return D=hr(d,d===mi?D:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),D===0?null:(qp(d,D,_),ps(d,ci()),d.callbackNode!=null&&d.callbackNode===T?Ux.bind(null,d):null)}function hg(d,_){if(cg())return null;qp(d,_,!0)}function gA(){Zv(function(){($n&6)!==0?Ln(ii,jx):gd()})}function Vx(){return Tf===0&&(Tf=ko()),Tf}function Hw(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Cu(""+d)}function Gw(d,_){var T=_.ownerDocument.createElement("input");return T.name=_.name,T.value=_.value,d.id&&T.setAttribute("form",d.id),_.parentNode.insertBefore(T,_),d=new FormData(d),T.parentNode.removeChild(T),d}function Ky(d,_,T,D,$){if(_==="submit"&&T&&T.stateNode===$){var Q=Hw(($[Ee]||null).action),xe=D.submitter;xe&&(_=(_=xe[Ee]||null)?Hw(_.formAction):xe.getAttribute("formAction"),_!==null&&(Q=_,xe=null));var Be=new Ph("action","action",null,D,$);d.push({event:Be,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(Tf!==0){var lt=xe?Gw($,xe):new FormData($);od(T,{pending:!0,data:lt,method:$.method,action:Q},null,lt)}}else typeof Q=="function"&&(Be.preventDefault(),lt=xe?Gw($,xe):new FormData($),od(T,{pending:!0,data:lt,method:$.method,action:Q},Q,lt))},currentTarget:$}]})}}for(var Fv=0;Fv<Qt.length;Fv++){var yd=Qt[Fv],Jy=yd.toLowerCase(),yA=yd[0].toUpperCase()+yd.slice(1);Ya(Jy,"on"+yA)}Ya(Vm,"onAnimationEnd"),Ya(Za,"onAnimationIteration"),Ya(Hh,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(Kd,"onTransitionRun"),Ya(py,"onTransitionStart"),Ya($m,"onTransitionCancel"),Ya(Ia,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_A=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qy));function qw(d,_){_=(_&4)!==0;for(var T=0;T<d.length;T++){var D=d[T],$=D.event;D=D.listeners;e:{var Q=void 0;if(_)for(var xe=D.length-1;0<=xe;xe--){var Be=D[xe],lt=Be.instance,Ut=Be.currentTarget;if(Be=Be.listener,lt!==Q&&$.isPropagationStopped())break e;Q=Be,$.currentTarget=Ut;try{Q($)}catch(cn){Ju(cn)}$.currentTarget=null,Q=lt}else for(xe=0;xe<D.length;xe++){if(Be=D[xe],lt=Be.instance,Ut=Be.currentTarget,Be=Be.listener,lt!==Q&&$.isPropagationStopped())break e;Q=Be,$.currentTarget=Ut;try{Q($)}catch(cn){Ju(cn)}$.currentTarget=null,Q=lt}}}}function Qr(d,_){var T=_[Ue];T===void 0&&(T=_[Ue]=new Set);var D=d+"__bubble";T.has(D)||(Ww(_,d,2,!1),T.add(D))}function $x(d,_,T){var D=0;_&&(D|=4),Ww(T,d,D,_)}var Nv="_reactListening"+Math.random().toString(36).slice(2);function e_(d){if(!d[Nv]){d[Nv]=!0,Dn.forEach(function(T){T!=="selectionchange"&&(_A.has(T)||$x(T,!1,d),$x(T,!0,d))});var _=d.nodeType===9?d:d.ownerDocument;_===null||_[Nv]||(_[Nv]=!0,$x("selectionchange",!1,_))}}function Ww(d,_,T,D){switch(vg(_)){case 2:var $=SA;break;case 8:$=cS;break;default:$=oh}T=$.bind(null,_,T,d),$=void 0,!Au||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||($=!0),D?$!==void 0?d.addEventListener(_,T,{capture:!0,passive:$}):d.addEventListener(_,T,!0):$!==void 0?d.addEventListener(_,T,{passive:$}):d.addEventListener(_,T,!1)}function jv(d,_,T,D,$){var Q=D;if((_&1)===0&&(_&2)===0&&D!==null)e:for(;;){if(D===null)return;var xe=D.tag;if(xe===3||xe===4){var Be=D.stateNode.containerInfo;if(Be===$)break;if(xe===4)for(xe=D.return;xe!==null;){var lt=xe.tag;if((lt===3||lt===4)&&xe.stateNode.containerInfo===$)return;xe=xe.return}for(;Be!==null;){if(xe=At(Be),xe===null)return;if(lt=xe.tag,lt===5||lt===6||lt===26||lt===27){D=Q=xe;continue e}Be=Be.parentNode}}D=D.return}ip(function(){var Ut=Q,cn=Gd(T),vn=[];e:{var Wt=gp.get(d);if(Wt!==void 0){var Yt=Ph,ur=d;switch(d){case"keypress":if(op(T)===0)break e;case"keydown":case"keyup":Yt=gr;break;case"focusin":ur="focus",Yt=kh;break;case"focusout":ur="blur",Yt=kh;break;case"beforeblur":case"afterblur":Yt=kh;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Yt=Ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Yt=ly;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Yt=Bh;break;case Vm:case Za:case Hh:Yt=vv;break;case Ia:Yt=up;break;case"scroll":case"scrollend":Yt=Aa;break;case"wheel":Yt=jo;break;case"copy":case"cut":case"paste":Yt=xv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Yt=Nc;break;case"toggle":case"beforetoggle":Yt=hp}var Ki=(_&4)!==0,Oo=!Ki&&(d==="scroll"||d==="scrollend"),Rt=Ki?Wt!==null?Wt+"Capture":null:Wt;Ki=[];for(var bt=Ut,zt;bt!==null;){var fn=bt;if(zt=fn.stateNode,fn=fn.tag,fn!==5&&fn!==26&&fn!==27||zt===null||Rt===null||(fn=ji(bt,Rt),fn!=null&&Ki.push(_d(bt,fn,zt))),Oo)break;bt=bt.return}0<Ki.length&&(Wt=new Yt(Wt,ur,null,T,cn),vn.push({event:Wt,listeners:Ki}))}}if((_&7)===0){e:{if(Wt=d==="mouseover"||d==="pointerover",Yt=d==="mouseout"||d==="pointerout",Wt&&T!==bs&&(ur=T.relatedTarget||T.fromElement)&&(At(ur)||ur[Pe]))break e;if((Yt||Wt)&&(Wt=cn.window===cn?cn:(Wt=cn.ownerDocument)?Wt.defaultView||Wt.parentWindow:window,Yt?(ur=T.relatedTarget||T.toElement,Yt=Ut,ur=ur?At(ur):null,ur!==null&&(Oo=f(ur),Ki=ur.tag,ur!==Oo||Ki!==5&&Ki!==27&&Ki!==6)&&(ur=null)):(Yt=null,ur=Ut),Yt!==ur)){if(Ki=Ru,fn="onMouseLeave",Rt="onMouseEnter",bt="mouse",(d==="pointerout"||d==="pointerover")&&(Ki=Nc,fn="onPointerLeave",Rt="onPointerEnter",bt="pointer"),Oo=Yt==null?Wt:tn(Yt),zt=ur==null?Wt:tn(ur),Wt=new Ki(fn,bt+"leave",Yt,T,cn),Wt.target=Oo,Wt.relatedTarget=zt,fn=null,At(cn)===Ut&&(Ki=new Ki(Rt,bt+"enter",ur,T,cn),Ki.target=zt,Ki.relatedTarget=Oo,fn=Ki),Oo=fn,Yt&&ur)t:{for(Ki=Yt,Rt=ur,bt=0,zt=Ki;zt;zt=Do(zt))bt++;for(zt=0,fn=Rt;fn;fn=Do(fn))zt++;for(;0<bt-zt;)Ki=Do(Ki),bt--;for(;0<zt-bt;)Rt=Do(Rt),zt--;for(;bt--;){if(Ki===Rt||Rt!==null&&Ki===Rt.alternate)break t;Ki=Do(Ki),Rt=Do(Rt)}Ki=null}else Ki=null;Yt!==null&&em(vn,Wt,Yt,Ki,!1),ur!==null&&Oo!==null&&em(vn,Oo,ur,Ki,!0)}}e:{if(Wt=Ut?tn(Ut):window,Yt=Wt.nodeName&&Wt.nodeName.toLowerCase(),Yt==="select"||Yt==="input"&&Wt.type==="file")var wi=ml;else if(Xd(Wt))if(hy)wi=fp;else{wi=Uh;var Vr=jh}else Yt=Wt.nodeName,!Yt||Yt.toLowerCase()!=="input"||Wt.type!=="checkbox"&&Wt.type!=="radio"?Ut&&Fl(Ut.elementType)&&(wi=ml):wi=Js;if(wi&&(wi=wi(d,Ut))){Yn(vn,wi,T,cn);break e}Vr&&Vr(d,Wt,Ut),d==="focusout"&&Ut&&Wt.type==="number"&&Ut.memoizedProps.value!=null&&Ws(Wt,"number",Wt.value)}switch(Vr=Ut?tn(Ut):window,d){case"focusin":(Xd(Vr)||Vr.contentEditable==="true")&&(Vh=Vr,jm=Ut,mp=null);break;case"focusout":mp=jm=Vh=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,fy(vn,T,cn);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":fy(vn,T,cn)}var Li;if(Pu)e:{switch(d){case"compositionstart":var Ji="onCompositionStart";break e;case"compositionend":Ji="onCompositionEnd";break e;case"compositionupdate":Ji="onCompositionUpdate";break e}Ji=void 0}else To?uy(d,T)&&(Ji="onCompositionEnd"):d==="keydown"&&T.keyCode===229&&(Ji="onCompositionStart");Ji&&(Ls&&T.locale!=="ko"&&(To||Ji!=="onCompositionStart"?Ji==="onCompositionEnd"&&To&&(Li=Ih()):(Bc=cn,Fc="value"in Bc?Bc.value:Bc.textContent,To=!0)),Vr=Uv(Ut,Ji),0<Vr.length&&(Ji=new ap(Ji,d,null,T,cn),vn.push({event:Ji,listeners:Vr}),Li?Ji.data=Li:(Li=Fh(T),Li!==null&&(Ji.data=Li)))),(Li=Bm?Ks(d,T):vi(d,T))&&(Ji=Uv(Ut,"onBeforeInput"),0<Ji.length&&(Vr=new ap("onBeforeInput","beforeinput",null,T,cn),vn.push({event:Vr,listeners:Ji}),Vr.data=Li)),Ky(vn,d,Ut,T,cn)}qw(vn,_)})}function _d(d,_,T){return{instance:d,listener:_,currentTarget:T}}function Uv(d,_){for(var T=_+"Capture",D=[];d!==null;){var $=d,Q=$.stateNode;if($=$.tag,$!==5&&$!==26&&$!==27||Q===null||($=ji(d,T),$!=null&&D.unshift(_d(d,$,Q)),$=ji(d,_),$!=null&&D.push(_d(d,$,Q))),d.tag===3)return D;d=d.return}return[]}function Do(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function em(d,_,T,D,$){for(var Q=_._reactName,xe=[];T!==null&&T!==D;){var Be=T,lt=Be.alternate,Ut=Be.stateNode;if(Be=Be.tag,lt!==null&&lt===D)break;Be!==5&&Be!==26&&Be!==27||Ut===null||(lt=Ut,$?(Ut=ji(T,Q),Ut!=null&&xe.unshift(_d(T,Ut,lt))):$||(Ut=ji(T,Q),Ut!=null&&xe.push(_d(T,Ut,lt)))),T=T.return}xe.length!==0&&d.push({event:_,listeners:xe})}var Xw=/\r\n?/g,Vv=/\u0000|\uFFFD/g;function t_(d){return(typeof d=="string"?d:""+d).replace(Xw,`
`).replace(Vv,"")}function dg(d,_){return _=t_(_),t_(d)===_}function n_(){}function Mo(d,_,T,D,$,Q){switch(T){case"children":typeof D=="string"?_==="body"||_==="textarea"&&D===""||Ea(d,D):(typeof D=="number"||typeof D=="bigint")&&_!=="body"&&Ea(d,""+D);break;case"className":ho(d,"class",D);break;case"tabIndex":ho(d,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":ho(d,T,D);break;case"style":Lm(d,D,Q);break;case"data":if(_!=="object"){ho(d,"data",D);break}case"src":case"href":if(D===""&&(_!=="a"||T!=="href")){d.removeAttribute(T);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){d.removeAttribute(T);break}D=Cu(""+D),d.setAttribute(T,D);break;case"action":case"formAction":if(typeof D=="function"){d.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Q=="function"&&(T==="formAction"?(_!=="input"&&Mo(d,_,"name",$.name,$,null),Mo(d,_,"formEncType",$.formEncType,$,null),Mo(d,_,"formMethod",$.formMethod,$,null),Mo(d,_,"formTarget",$.formTarget,$,null)):(Mo(d,_,"encType",$.encType,$,null),Mo(d,_,"method",$.method,$,null),Mo(d,_,"target",$.target,$,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){d.removeAttribute(T);break}D=Cu(""+D),d.setAttribute(T,D);break;case"onClick":D!=null&&(d.onclick=n_);break;case"onScroll":D!=null&&Qr("scroll",d);break;case"onScrollEnd":D!=null&&Qr("scrollend",d);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(a(61));if(T=D.__html,T!=null){if($.children!=null)throw Error(a(60));d.innerHTML=T}}break;case"multiple":d.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":d.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){d.removeAttribute("xlink:href");break}T=Cu(""+D),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?d.setAttribute(T,""+D):d.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?d.setAttribute(T,""):d.removeAttribute(T);break;case"capture":case"download":D===!0?d.setAttribute(T,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?d.setAttribute(T,D):d.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?d.setAttribute(T,D):d.removeAttribute(T);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?d.removeAttribute(T):d.setAttribute(T,D);break;case"popover":Qr("beforetoggle",d),Qr("toggle",d),Lr(d,"popover",D);break;case"xlinkActuate":Ri(d,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":Ri(d,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":Ri(d,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":Ri(d,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":Ri(d,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":Ri(d,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":Ri(d,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":Ri(d,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":Ri(d,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":Lr(d,"is",D);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=np.get(T)||T,Lr(d,T,D))}}function tm(d,_,T,D,$,Q){switch(T){case"style":Lm(d,D,Q);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(a(61));if(T=D.__html,T!=null){if($.children!=null)throw Error(a(60));d.innerHTML=T}}break;case"children":typeof D=="string"?Ea(d,D):(typeof D=="number"||typeof D=="bigint")&&Ea(d,""+D);break;case"onScroll":D!=null&&Qr("scroll",d);break;case"onScrollEnd":D!=null&&Qr("scrollend",d);break;case"onClick":D!=null&&(d.onclick=n_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!di.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&($=T.endsWith("Capture"),_=T.slice(2,$?T.length-7:void 0),Q=d[Ee]||null,Q=Q!=null?Q[T]:null,typeof Q=="function"&&d.removeEventListener(_,Q,$),typeof D=="function")){typeof Q!="function"&&Q!==null&&(T in d?d[T]=null:d.hasAttribute(T)&&d.removeAttribute(T)),d.addEventListener(_,D,$);break e}T in d?d[T]=D:D===!0?d.setAttribute(T,""):Lr(d,T,D)}}}function Bs(d,_,T){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qr("error",d),Qr("load",d);var D=!1,$=!1,Q;for(Q in T)if(T.hasOwnProperty(Q)){var xe=T[Q];if(xe!=null)switch(Q){case"src":D=!0;break;case"srcSet":$=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,_));default:Mo(d,_,Q,xe,T,null)}}$&&Mo(d,_,"srcSet",T.srcSet,T,null),D&&Mo(d,_,"src",T.src,T,null);return;case"input":Qr("invalid",d);var Be=Q=xe=$=null,lt=null,Ut=null;for(D in T)if(T.hasOwnProperty(D)){var cn=T[D];if(cn!=null)switch(D){case"name":$=cn;break;case"type":xe=cn;break;case"checked":lt=cn;break;case"defaultChecked":Ut=cn;break;case"value":Q=cn;break;case"defaultValue":Be=cn;break;case"children":case"dangerouslySetInnerHTML":if(cn!=null)throw Error(a(137,_));break;default:Mo(d,_,D,cn,T,null)}}Om(d,Q,Be,lt,Ut,xe,$,!1),Rh(d);return;case"select":Qr("invalid",d),D=xe=Q=null;for($ in T)if(T.hasOwnProperty($)&&(Be=T[$],Be!=null))switch($){case"value":Q=Be;break;case"defaultValue":xe=Be;break;case"multiple":D=Be;default:Mo(d,_,$,Be,T,null)}_=Q,T=xe,d.multiple=!!D,_!=null?Xs(d,!!D,_,!1):T!=null&&Xs(d,!!D,T,!0);return;case"textarea":Qr("invalid",d),Q=$=D=null;for(xe in T)if(T.hasOwnProperty(xe)&&(Be=T[xe],Be!=null))switch(xe){case"value":D=Be;break;case"defaultValue":$=Be;break;case"children":Q=Be;break;case"dangerouslySetInnerHTML":if(Be!=null)throw Error(a(91));break;default:Mo(d,_,xe,Be,T,null)}cl(d,D,$,Q),Rh(d);return;case"option":for(lt in T)if(T.hasOwnProperty(lt)&&(D=T[lt],D!=null))switch(lt){case"selected":d.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Mo(d,_,lt,D,T,null)}return;case"dialog":Qr("beforetoggle",d),Qr("toggle",d),Qr("cancel",d),Qr("close",d);break;case"iframe":case"object":Qr("load",d);break;case"video":case"audio":for(D=0;D<Qy.length;D++)Qr(Qy[D],d);break;case"image":Qr("error",d),Qr("load",d);break;case"details":Qr("toggle",d);break;case"embed":case"source":case"link":Qr("error",d),Qr("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ut in T)if(T.hasOwnProperty(Ut)&&(D=T[Ut],D!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,_));default:Mo(d,_,Ut,D,T,null)}return;default:if(Fl(_)){for(cn in T)T.hasOwnProperty(cn)&&(D=T[cn],D!==void 0&&tm(d,_,cn,D,T,void 0));return}}for(Be in T)T.hasOwnProperty(Be)&&(D=T[Be],D!=null&&Mo(d,_,Be,D,T,null))}function $v(d,_,T,D){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var $=null,Q=null,xe=null,Be=null,lt=null,Ut=null,cn=null;for(Yt in T){var vn=T[Yt];if(T.hasOwnProperty(Yt)&&vn!=null)switch(Yt){case"checked":break;case"value":break;case"defaultValue":lt=vn;default:D.hasOwnProperty(Yt)||Mo(d,_,Yt,null,D,vn)}}for(var Wt in D){var Yt=D[Wt];if(vn=T[Wt],D.hasOwnProperty(Wt)&&(Yt!=null||vn!=null))switch(Wt){case"type":Q=Yt;break;case"name":$=Yt;break;case"checked":Ut=Yt;break;case"defaultChecked":cn=Yt;break;case"value":xe=Yt;break;case"defaultValue":Be=Yt;break;case"children":case"dangerouslySetInnerHTML":if(Yt!=null)throw Error(a(137,_));break;default:Yt!==vn&&Mo(d,_,Wt,Yt,D,vn)}}qa(d,xe,Be,lt,Ut,cn,Q,$);return;case"select":Yt=xe=Be=Wt=null;for(Q in T)if(lt=T[Q],T.hasOwnProperty(Q)&&lt!=null)switch(Q){case"value":break;case"multiple":Yt=lt;default:D.hasOwnProperty(Q)||Mo(d,_,Q,null,D,lt)}for($ in D)if(Q=D[$],lt=T[$],D.hasOwnProperty($)&&(Q!=null||lt!=null))switch($){case"value":Wt=Q;break;case"defaultValue":Be=Q;break;case"multiple":xe=Q;default:Q!==lt&&Mo(d,_,$,Q,D,lt)}_=Be,T=xe,D=Yt,Wt!=null?Xs(d,!!T,Wt,!1):!!D!=!!T&&(_!=null?Xs(d,!!T,_,!0):Xs(d,!!T,T?[]:"",!1));return;case"textarea":Yt=Wt=null;for(Be in T)if($=T[Be],T.hasOwnProperty(Be)&&$!=null&&!D.hasOwnProperty(Be))switch(Be){case"value":break;case"children":break;default:Mo(d,_,Be,null,D,$)}for(xe in D)if($=D[xe],Q=T[xe],D.hasOwnProperty(xe)&&($!=null||Q!=null))switch(xe){case"value":Wt=$;break;case"defaultValue":Yt=$;break;case"children":break;case"dangerouslySetInnerHTML":if($!=null)throw Error(a(91));break;default:$!==Q&&Mo(d,_,xe,$,D,Q)}dc(d,Wt,Yt);return;case"option":for(var ur in T)if(Wt=T[ur],T.hasOwnProperty(ur)&&Wt!=null&&!D.hasOwnProperty(ur))switch(ur){case"selected":d.selected=!1;break;default:Mo(d,_,ur,null,D,Wt)}for(lt in D)if(Wt=D[lt],Yt=T[lt],D.hasOwnProperty(lt)&&Wt!==Yt&&(Wt!=null||Yt!=null))switch(lt){case"selected":d.selected=Wt&&typeof Wt!="function"&&typeof Wt!="symbol";break;default:Mo(d,_,lt,Wt,D,Yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ki in T)Wt=T[Ki],T.hasOwnProperty(Ki)&&Wt!=null&&!D.hasOwnProperty(Ki)&&Mo(d,_,Ki,null,D,Wt);for(Ut in D)if(Wt=D[Ut],Yt=T[Ut],D.hasOwnProperty(Ut)&&Wt!==Yt&&(Wt!=null||Yt!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":if(Wt!=null)throw Error(a(137,_));break;default:Mo(d,_,Ut,Wt,D,Yt)}return;default:if(Fl(_)){for(var Oo in T)Wt=T[Oo],T.hasOwnProperty(Oo)&&Wt!==void 0&&!D.hasOwnProperty(Oo)&&tm(d,_,Oo,void 0,D,Wt);for(cn in D)Wt=D[cn],Yt=T[cn],!D.hasOwnProperty(cn)||Wt===Yt||Wt===void 0&&Yt===void 0||tm(d,_,cn,Wt,D,Yt);return}}for(var Rt in T)Wt=T[Rt],T.hasOwnProperty(Rt)&&Wt!=null&&!D.hasOwnProperty(Rt)&&Mo(d,_,Rt,null,D,Wt);for(vn in D)Wt=D[vn],Yt=T[vn],!D.hasOwnProperty(vn)||Wt===Yt||Wt==null&&Yt==null||Mo(d,_,vn,Wt,D,Yt)}var Hx=null,Hv=null;function fg(d){return d.nodeType===9?d:d.ownerDocument}function Gv(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qv(d,_){if(d===0)switch(_){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&_==="foreignObject"?0:d}function Wv(d,_){return d==="textarea"||d==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.children=="bigint"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var i_=null;function Zw(){var d=window.event;return d&&d.type==="popstate"?d===i_?!1:(i_=d,!0):(i_=null,!1)}var Xv=typeof setTimeout=="function"?setTimeout:void 0,Yw=typeof clearTimeout=="function"?clearTimeout:void 0,Gx=typeof Promise=="function"?Promise:void 0,Zv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gx<"u"?function(d){return Gx.resolve(null).then(d).catch(Kw)}:Xv;function Kw(d){setTimeout(function(){throw d})}function vd(d){return d==="head"}function qx(d,_){var T=_,D=0,$=0;do{var Q=T.nextSibling;if(d.removeChild(T),Q&&Q.nodeType===8)if(T=Q.data,T==="/$"){if(0<D&&8>D){T=D;var xe=d.ownerDocument;if(T&1&&im(xe.documentElement),T&2&&im(xe.body),T&4)for(T=xe.head,im(T),xe=T.firstChild;xe;){var Be=xe.nextSibling,lt=xe.nodeName;xe[st]||lt==="SCRIPT"||lt==="STYLE"||lt==="LINK"&&xe.rel.toLowerCase()==="stylesheet"||T.removeChild(xe),xe=Be}}if($===0){d.removeChild(Q),xg(_);return}$--}else T==="$"||T==="$?"||T==="$!"?$++:D=T.charCodeAt(0)-48;else D=0;T=Q}while(T);xg(_)}function rh(d){var _=d.firstChild;for(_&&_.nodeType===10&&(_=_.nextSibling);_;){var T=_;switch(_=_.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":rh(T),Ke(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}d.removeChild(T)}}function nm(d,_,T,D){for(;d.nodeType===1;){var $=T;if(d.nodeName.toLowerCase()!==_.toLowerCase()){if(!D&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(D){if(!d[st])switch(_){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(Q=d.getAttribute("rel"),Q==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(Q!==$.rel||d.getAttribute("href")!==($.href==null||$.href===""?null:$.href)||d.getAttribute("crossorigin")!==($.crossOrigin==null?null:$.crossOrigin)||d.getAttribute("title")!==($.title==null?null:$.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(Q=d.getAttribute("src"),(Q!==($.src==null?null:$.src)||d.getAttribute("type")!==($.type==null?null:$.type)||d.getAttribute("crossorigin")!==($.crossOrigin==null?null:$.crossOrigin))&&Q&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(_==="input"&&d.type==="hidden"){var Q=$.name==null?null:""+$.name;if($.type==="hidden"&&d.getAttribute("name")===Q)return d}else return d;if(d=lu(d.nextSibling),d===null)break}return null}function Jw(d,_,T){if(_==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!T||(d=lu(d.nextSibling),d===null))return null;return d}function Wx(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Qw(d,_){var T=d.ownerDocument;if(d.data!=="$?"||T.readyState==="complete")_();else{var D=function(){_(),T.removeEventListener("DOMContentLoaded",D)};T.addEventListener("DOMContentLoaded",D),d._reactRetry=D}}function lu(d){for(;d!=null;d=d.nextSibling){var _=d.nodeType;if(_===1||_===3)break;if(_===8){if(_=d.data,_==="$"||_==="$!"||_==="$?"||_==="F!"||_==="F")break;if(_==="/$")return null}}return d}var Xx=null;function Ef(d){d=d.previousSibling;for(var _=0;d;){if(d.nodeType===8){var T=d.data;if(T==="$"||T==="$!"||T==="$?"){if(_===0)return d;_--}else T==="/$"&&_++}d=d.previousSibling}return null}function Zx(d,_,T){switch(_=fg(T),d){case"html":if(d=_.documentElement,!d)throw Error(a(452));return d;case"head":if(d=_.head,!d)throw Error(a(453));return d;case"body":if(d=_.body,!d)throw Error(a(454));return d;default:throw Error(a(451))}}function im(d){for(var _=d.attributes;_.length;)d.removeAttributeNode(_[0]);Ke(d)}var Tl=new Map,Yx=new Set;function r_(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var nl=it.d;it.d={f:vA,r:El,D:eS,C:Yv,L:xA,m:bA,X:tS,S:Jx,M:Qx};function vA(){var d=nl.f(),_=ru();return d||_}function El(d){var _=qt(d);_!==null&&_.tag===5&&_.type==="form"?ig(_):nl.r(d)}var rm=typeof document>"u"?null:document;function Kx(d,_,T){var D=rm;if(D&&typeof _=="string"&&_){var $=Ta(_);$='link[rel="'+d+'"][href="'+$+'"]',typeof T=="string"&&($+='[crossorigin="'+T+'"]'),Yx.has($)||(Yx.add($),d={rel:d,crossOrigin:T,href:_},D.querySelector($)===null&&(_=D.createElement("link"),Bs(_,"link",d),Pn(_),D.head.appendChild(_)))}}function eS(d){nl.D(d),Kx("dns-prefetch",d,null)}function Yv(d,_){nl.C(d,_),Kx("preconnect",d,_)}function xA(d,_,T){nl.L(d,_,T);var D=rm;if(D&&d&&_){var $='link[rel="preload"][as="'+Ta(_)+'"]';_==="image"&&T&&T.imageSrcSet?($+='[imagesrcset="'+Ta(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&($+='[imagesizes="'+Ta(T.imageSizes)+'"]')):$+='[href="'+Ta(d)+'"]';var Q=$;switch(_){case"style":Q=om(d);break;case"script":Q=Cf(d)}Tl.has(Q)||(d=R({rel:"preload",href:_==="image"&&T&&T.imageSrcSet?void 0:d,as:_},T),Tl.set(Q,d),D.querySelector($)!==null||_==="style"&&D.querySelector(pg(Q))||_==="script"&&D.querySelector(Cl(Q))||(_=D.createElement("link"),Bs(_,"link",d),Pn(_),D.head.appendChild(_)))}}function bA(d,_){nl.m(d,_);var T=rm;if(T&&d){var D=_&&typeof _.as=="string"?_.as:"script",$='link[rel="modulepreload"][as="'+Ta(D)+'"][href="'+Ta(d)+'"]',Q=$;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Q=Cf(d)}if(!Tl.has(Q)&&(d=R({rel:"modulepreload",href:d},_),Tl.set(Q,d),T.querySelector($)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(Cl(Q)))return}D=T.createElement("link"),Bs(D,"link",d),Pn(D),T.head.appendChild(D)}}}function Jx(d,_,T){nl.S(d,_,T);var D=rm;if(D&&d){var $=kn(D).hoistableStyles,Q=om(d);_=_||"default";var xe=$.get(Q);if(!xe){var Be={loading:0,preload:null};if(xe=D.querySelector(pg(Q)))Be.loading=5;else{d=R({rel:"stylesheet",href:d,"data-precedence":_},T),(T=Tl.get(Q))&&nb(d,T);var lt=xe=D.createElement("link");Pn(lt),Bs(lt,"link",d),lt._p=new Promise(function(Ut,cn){lt.onload=Ut,lt.onerror=cn}),lt.addEventListener("load",function(){Be.loading|=1}),lt.addEventListener("error",function(){Be.loading|=2}),Be.loading|=4,Jv(xe,_,D)}xe={type:"stylesheet",instance:xe,count:1,state:Be},$.set(Q,xe)}}}function tS(d,_){nl.X(d,_);var T=rm;if(T&&d){var D=kn(T).hoistableScripts,$=Cf(d),Q=D.get($);Q||(Q=T.querySelector(Cl($)),Q||(d=R({src:d,async:!0},_),(_=Tl.get($))&&ib(d,_),Q=T.createElement("script"),Pn(Q),Bs(Q,"link",d),T.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},D.set($,Q))}}function Qx(d,_){nl.M(d,_);var T=rm;if(T&&d){var D=kn(T).hoistableScripts,$=Cf(d),Q=D.get($);Q||(Q=T.querySelector(Cl($)),Q||(d=R({src:d,async:!0,type:"module"},_),(_=Tl.get($))&&ib(d,_),Q=T.createElement("script"),Pn(Q),Bs(Q,"link",d),T.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},D.set($,Q))}}function Kv(d,_,T,D){var $=($=jt.current)?r_($):null;if(!$)throw Error(a(446));switch(d){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(_=om(T.href),T=kn($).hoistableStyles,D=T.get(_),D||(D={type:"style",instance:null,count:0,state:null},T.set(_,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){d=om(T.href);var Q=kn($).hoistableStyles,xe=Q.get(d);if(xe||($=$.ownerDocument||$,xe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Q.set(d,xe),(Q=$.querySelector(pg(d)))&&!Q._p&&(xe.instance=Q,xe.state.loading=5),Tl.has(d)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},Tl.set(d,T),Q||nS($,d,T,xe.state))),_&&D===null)throw Error(a(528,""));return xe}if(_&&D!==null)throw Error(a(529,""));return null;case"script":return _=T.async,T=T.src,typeof T=="string"&&_&&typeof _!="function"&&typeof _!="symbol"?(_=Cf(T),T=kn($).hoistableScripts,D=T.get(_),D||(D={type:"script",instance:null,count:0,state:null},T.set(_,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,d))}}function om(d){return'href="'+Ta(d)+'"'}function pg(d){return'link[rel="stylesheet"]['+d+"]"}function eb(d){return R({},d,{"data-precedence":d.precedence,precedence:null})}function nS(d,_,T,D){d.querySelector('link[rel="preload"][as="style"]['+_+"]")?D.loading=1:(_=d.createElement("link"),D.preload=_,_.addEventListener("load",function(){return D.loading|=1}),_.addEventListener("error",function(){return D.loading|=2}),Bs(_,"link",T),Pn(_),d.head.appendChild(_))}function Cf(d){return'[src="'+Ta(d)+'"]'}function Cl(d){return"script[async]"+d}function tb(d,_,T){if(_.count++,_.instance===null)switch(_.type){case"style":var D=d.querySelector('style[data-href~="'+Ta(T.href)+'"]');if(D)return _.instance=D,Pn(D),D;var $=R({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return D=(d.ownerDocument||d).createElement("style"),Pn(D),Bs(D,"style",$),Jv(D,T.precedence,d),_.instance=D;case"stylesheet":$=om(T.href);var Q=d.querySelector(pg($));if(Q)return _.state.loading|=4,_.instance=Q,Pn(Q),Q;D=eb(T),($=Tl.get($))&&nb(D,$),Q=(d.ownerDocument||d).createElement("link"),Pn(Q);var xe=Q;return xe._p=new Promise(function(Be,lt){xe.onload=Be,xe.onerror=lt}),Bs(Q,"link",D),_.state.loading|=4,Jv(Q,T.precedence,d),_.instance=Q;case"script":return Q=Cf(T.src),($=d.querySelector(Cl(Q)))?(_.instance=$,Pn($),$):(D=T,($=Tl.get(Q))&&(D=R({},T),ib(D,$)),d=d.ownerDocument||d,$=d.createElement("script"),Pn($),Bs($,"link",D),d.head.appendChild($),_.instance=$);case"void":return null;default:throw Error(a(443,_.type))}else _.type==="stylesheet"&&(_.state.loading&4)===0&&(D=_.instance,_.state.loading|=4,Jv(D,T.precedence,d));return _.instance}function Jv(d,_,T){for(var D=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),$=D.length?D[D.length-1]:null,Q=$,xe=0;xe<D.length;xe++){var Be=D[xe];if(Be.dataset.precedence===_)Q=Be;else if(Q!==$)break}Q?Q.parentNode.insertBefore(d,Q.nextSibling):(_=T.nodeType===9?T.head:T,_.insertBefore(d,_.firstChild))}function nb(d,_){d.crossOrigin==null&&(d.crossOrigin=_.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=_.referrerPolicy),d.title==null&&(d.title=_.title)}function ib(d,_){d.crossOrigin==null&&(d.crossOrigin=_.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=_.referrerPolicy),d.integrity==null&&(d.integrity=_.integrity)}var Qv=null;function iS(d,_,T){if(Qv===null){var D=new Map,$=Qv=new Map;$.set(T,D)}else $=Qv,D=$.get(T),D||(D=new Map,$.set(T,D));if(D.has(d))return D;for(D.set(d,null),T=T.getElementsByTagName(d),$=0;$<T.length;$++){var Q=T[$];if(!(Q[st]||Q[ge]||d==="link"&&Q.getAttribute("rel")==="stylesheet")&&Q.namespaceURI!=="http://www.w3.org/2000/svg"){var xe=Q.getAttribute(_)||"";xe=d+xe;var Be=D.get(xe);Be?Be.push(Q):D.set(xe,[Q])}}return D}function rS(d,_,T){d=d.ownerDocument||d,d.head.insertBefore(T,_==="title"?d.querySelector("head > title"):null)}function wA(d,_,T){if(T===1||_.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof _.precedence!="string"||typeof _.href!="string"||_.href==="")break;return!0;case"link":if(typeof _.rel!="string"||typeof _.href!="string"||_.href===""||_.onLoad||_.onError)break;switch(_.rel){case"stylesheet":return d=_.disabled,typeof _.precedence=="string"&&d==null;default:return!0}case"script":if(_.async&&typeof _.async!="function"&&typeof _.async!="symbol"&&!_.onLoad&&!_.onError&&_.src&&typeof _.src=="string")return!0}return!1}function o_(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var mg=null;function e0(){}function oS(d,_,T){if(mg===null)throw Error(a(475));var D=mg;if(_.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var $=om(T.href),Q=d.querySelector(pg($));if(Q){d=Q._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(D.count++,D=gg.bind(D),d.then(D,D)),_.state.loading|=4,_.instance=Q,Pn(Q);return}Q=d.ownerDocument||d,T=eb(T),($=Tl.get($))&&nb(T,$),Q=Q.createElement("link"),Pn(Q);var xe=Q;xe._p=new Promise(function(Be,lt){xe.onload=Be,xe.onerror=lt}),Bs(Q,"link",T),_.instance=Q}D.stylesheets===null&&(D.stylesheets=new Map),D.stylesheets.set(_,d),(d=_.state.preload)&&(_.state.loading&3)===0&&(D.count++,_=gg.bind(D),d.addEventListener("load",_),d.addEventListener("error",_))}}function rb(){if(mg===null)throw Error(a(475));var d=mg;return d.stylesheets&&d.count===0&&ob(d,d.stylesheets),0<d.count?function(_){var T=setTimeout(function(){if(d.stylesheets&&ob(d,d.stylesheets),d.unsuspend){var D=d.unsuspend;d.unsuspend=null,D()}},6e4);return d.unsuspend=_,function(){d.unsuspend=null,clearTimeout(T)}}:null}function gg(){if(this.count--,this.count===0){if(this.stylesheets)ob(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var s_=null;function ob(d,_){d.stylesheets=null,d.unsuspend!==null&&(d.count++,s_=new Map,_.forEach(sS,d),s_=null,gg.call(d))}function sS(d,_){if(!(_.state.loading&4)){var T=s_.get(d);if(T)var D=T.get(null);else{T=new Map,s_.set(d,T);for(var $=d.querySelectorAll("link[data-precedence],style[data-precedence]"),Q=0;Q<$.length;Q++){var xe=$[Q];(xe.nodeName==="LINK"||xe.getAttribute("media")!=="not all")&&(T.set(xe.dataset.precedence,xe),D=xe)}D&&T.set(null,D)}$=_.instance,xe=$.getAttribute("data-precedence"),Q=T.get(xe)||D,Q===D&&T.set(null,$),T.set(xe,$),this.count++,D=gg.bind(this),$.addEventListener("load",D),$.addEventListener("error",D),Q?Q.parentNode.insertBefore($,Q.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore($,d.firstChild)),_.state.loading|=4}}var yg={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function aS(d,_,T,D,$,Q,xe,Be){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.hiddenUpdates=ts(null),this.identifierPrefix=D,this.onUncaughtError=$,this.onCaughtError=Q,this.onRecoverableError=xe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function sb(d,_,T,D,$,Q,xe,Be,lt,Ut,cn,vn){return d=new aS(d,_,T,xe,Be,lt,Ut,vn),_=1,Q===!0&&(_|=24),Q=Oa(3,null,null,_),d.current=Q,Q.stateNode=d,_=sf(),_.refCount++,d.pooledCache=_,_.refCount++,Q.memoizedState={element:D,isDehydrated:T,cache:_},Zm(Q),d}function t0(d){return d?(d=Du,d):Du}function ab(d,_,T,D,$,Q){$=t0($),D.context===null?D.context=$:D.pendingContext=$,D=_c(_),D.payload={element:T},Q=Q===void 0?null:Q,Q!==null&&(D.callback=Q),T=Yl(d,D,_),T!==null&&(ia(T,d,_),hf(T,d,_))}function n0(d,_){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var T=d.retryLane;d.retryLane=T!==0&&T<_?T:_}}function lb(d,_){n0(d,_),(d=d.alternate)&&n0(d,_)}function lS(d){if(d.tag===13){var _=yl(d,67108864);_!==null&&ia(_,d,67108864),lb(d,67108864)}}var i0=!0;function SA(d,_,T,D){var $=$e.T;$e.T=null;var Q=it.p;try{it.p=2,oh(d,_,T,D)}finally{it.p=Q,$e.T=$}}function cS(d,_,T,D){var $=$e.T;$e.T=null;var Q=it.p;try{it.p=8,oh(d,_,T,D)}finally{it.p=Q,$e.T=$}}function oh(d,_,T,D){if(i0){var $=sm(D);if($===null)jv(d,_,D,Af,T),cb(d,D);else if(uS($,d,_,T,D))D.stopPropagation();else if(cb(d,D),_&4&&-1<o0.indexOf(d)){for(;$!==null;){var Q=qt($);if(Q!==null)switch(Q.tag){case 3:if(Q=Q.stateNode,Q.current.memoizedState.isDehydrated){var xe=li(Q.pendingLanes);if(xe!==0){var Be=Q;for(Be.pendingLanes|=2,Be.entangledLanes|=2;xe;){var lt=1<<31-Mi(xe);Be.entanglements[1]|=lt,xe&=~lt}au(Q),($n&6)===0&&(Vo=ci()+500,ug(0))}}break;case 13:Be=yl(Q,2),Be!==null&&ia(Be,Q,2),ru(),lb(Q,2)}if(Q=sm(D),Q===null&&jv(d,_,D,Af,T),Q===$)break;$=Q}$!==null&&D.stopPropagation()}else jv(d,_,D,null,T)}}function sm(d){return d=Gd(d),_g(d)}var Af=null;function _g(d){if(Af=null,d=At(d),d!==null){var _=f(d);if(_===null)d=null;else{var T=_.tag;if(T===13){if(d=y(_),d!==null)return d;d=null}else if(T===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;d=null}else _!==d&&(d=null)}}return Af=d,null}function vg(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pi()){case ii:return 2;case pi:return 8;case yi:case dt:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var r0=!1,xd=null,bd=null,wd=null,a_=new Map,l_=new Map,Sd=[],o0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(d,_){switch(d){case"focusin":case"focusout":xd=null;break;case"dragenter":case"dragleave":bd=null;break;case"mouseover":case"mouseout":wd=null;break;case"pointerover":case"pointerout":a_.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":l_.delete(_.pointerId)}}function c_(d,_,T,D,$,Q){return d===null||d.nativeEvent!==Q?(d={blockedOn:_,domEventName:T,eventSystemFlags:D,nativeEvent:Q,targetContainers:[$]},_!==null&&(_=qt(_),_!==null&&lS(_)),d):(d.eventSystemFlags|=D,_=d.targetContainers,$!==null&&_.indexOf($)===-1&&_.push($),d)}function uS(d,_,T,D,$){switch(_){case"focusin":return xd=c_(xd,d,_,T,D,$),!0;case"dragenter":return bd=c_(bd,d,_,T,D,$),!0;case"mouseover":return wd=c_(wd,d,_,T,D,$),!0;case"pointerover":var Q=$.pointerId;return a_.set(Q,c_(a_.get(Q)||null,d,_,T,D,$)),!0;case"gotpointercapture":return Q=$.pointerId,l_.set(Q,c_(l_.get(Q)||null,d,_,T,D,$)),!0}return!1}function s0(d){var _=At(d.target);if(_!==null){var T=f(_);if(T!==null){if(_=T.tag,_===13){if(_=y(T),_!==null){d.blockedOn=_,Y(d.priority,function(){if(T.tag===13){var D=Cs();D=Os(D);var $=yl(T,D);$!==null&&ia($,T,D),lb(T,D)}});return}}else if(_===3&&T.stateNode.current.memoizedState.isDehydrated){d.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}d.blockedOn=null}function u_(d){if(d.blockedOn!==null)return!1;for(var _=d.targetContainers;0<_.length;){var T=sm(d.nativeEvent);if(T===null){T=d.nativeEvent;var D=new T.constructor(T.type,T);bs=D,T.target.dispatchEvent(D),bs=null}else return _=qt(T),_!==null&&lS(_),d.blockedOn=T,!1;_.shift()}return!0}function ub(d,_,T){u_(d)&&T.delete(_)}function hS(){r0=!1,xd!==null&&u_(xd)&&(xd=null),bd!==null&&u_(bd)&&(bd=null),wd!==null&&u_(wd)&&(wd=null),a_.forEach(ub),l_.forEach(ub)}function h_(d,_){d.blockedOn===_&&(d.blockedOn=null,r0||(r0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hS)))}var d_=null;function dS(d){d_!==d&&(d_=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){d_===d&&(d_=null);for(var _=0;_<d.length;_+=3){var T=d[_],D=d[_+1],$=d[_+2];if(typeof D!="function"){if(_g(D||T)===null)continue;break}var Q=qt(T);Q!==null&&(d.splice(_,3),_-=3,od(Q,{pending:!0,data:$,method:T.method,action:D},D,$))}}))}function xg(d){function _(lt){return h_(lt,d)}xd!==null&&h_(xd,d),bd!==null&&h_(bd,d),wd!==null&&h_(wd,d),a_.forEach(_),l_.forEach(_);for(var T=0;T<Sd.length;T++){var D=Sd[T];D.blockedOn===d&&(D.blockedOn=null)}for(;0<Sd.length&&(T=Sd[0],T.blockedOn===null);)s0(T),T.blockedOn===null&&Sd.shift();if(T=(d.ownerDocument||d).$$reactFormReplay,T!=null)for(D=0;D<T.length;D+=3){var $=T[D],Q=T[D+1],xe=$[Ee]||null;if(typeof Q=="function")xe||dS(T);else if(xe){var Be=null;if(Q&&Q.hasAttribute("formAction")){if($=Q,xe=Q[Ee]||null)Be=xe.formAction;else if(_g($)!==null)continue}else Be=xe.action;typeof Be=="function"?T[D+1]=Be:(T.splice(D,3),D-=3),dS(T)}}}function a0(d){this._internalRoot=d}sh.prototype.render=a0.prototype.render=function(d){var _=this._internalRoot;if(_===null)throw Error(a(409));var T=_.current,D=Cs();ab(T,D,d,_,null,null)},sh.prototype.unmount=a0.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var _=d.containerInfo;ab(d.current,2,null,d,null,null),ru(),_[Pe]=null}};function sh(d){this._internalRoot=d}sh.prototype.unstable_scheduleHydration=function(d){if(d){var _=Te();d={blockedOn:null,target:d,priority:_};for(var T=0;T<Sd.length&&_!==0&&_<Sd[T].priority;T++);Sd.splice(T,0,d),T===0&&s0(d)}};var hb=t.version;if(hb!=="19.1.0")throw Error(a(527,hb,"19.1.0"));it.findDOMNode=function(d){var _=d._reactInternals;if(_===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=S(_),d=d!==null?A(d):null,d=d===null?null:d.stateNode,d};var fS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$e,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f_.isDisabled&&f_.supportsFiber)try{qn=f_.inject(fS),Xn=f_}catch{}}return Fb.createRoot=function(d,_){if(!u(d))throw Error(a(299));var T=!1,D="",$=fd,Q=_f,xe=sg,Be=null;return _!=null&&(_.unstable_strictMode===!0&&(T=!0),_.identifierPrefix!==void 0&&(D=_.identifierPrefix),_.onUncaughtError!==void 0&&($=_.onUncaughtError),_.onCaughtError!==void 0&&(Q=_.onCaughtError),_.onRecoverableError!==void 0&&(xe=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(Be=_.unstable_transitionCallbacks)),_=sb(d,1,!1,null,null,T,D,$,Q,xe,Be,null),d[Pe]=_.current,e_(d),new a0(_)},Fb.hydrateRoot=function(d,_,T){if(!u(d))throw Error(a(299));var D=!1,$="",Q=fd,xe=_f,Be=sg,lt=null,Ut=null;return T!=null&&(T.unstable_strictMode===!0&&(D=!0),T.identifierPrefix!==void 0&&($=T.identifierPrefix),T.onUncaughtError!==void 0&&(Q=T.onUncaughtError),T.onCaughtError!==void 0&&(xe=T.onCaughtError),T.onRecoverableError!==void 0&&(Be=T.onRecoverableError),T.unstable_transitionCallbacks!==void 0&&(lt=T.unstable_transitionCallbacks),T.formState!==void 0&&(Ut=T.formState)),_=sb(d,1,!0,_,T??null,D,$,Q,xe,Be,lt,Ut),_.context=t0(null),T=_.current,D=Cs(),D=Os(D),$=_c(D),$.callback=null,Yl(T,$,D),T=D,_.current.lanes=T,Ds(_,T),au(_),d[Pe]=_.current,e_(d),new sh(_)},Fb.version="19.1.0",Fb}var Iz;function Nq(){if(Iz)return yM.exports;Iz=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yM.exports=Fq(),yM.exports}var jq=Nq(),ee=Ch();const Or=Im(ee),xE=Iq({__proto__:null,default:Or},[ee]);var Nb={},Pz;function Uq(){if(Pz)return Nb;Pz=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.parse=y,Nb.serialize=A;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,u=Object.prototype.toString,f=(()=>{const z=function(){};return z.prototype=Object.create(null),z})();function y(z,N){const U=new f,H=z.length;if(H<2)return U;const K=(N==null?void 0:N.decode)||R;let W=0;do{const re=z.indexOf("=",W);if(re===-1)break;const ne=z.indexOf(";",W),se=ne===-1?H:ne;if(re>se){W=z.lastIndexOf(";",re-1)+1;continue}const ue=r(z,W,re),pe=S(z,re,ue),Ce=z.slice(ue,pe);if(U[Ce]===void 0){let Le=r(z,re+1,se),qe=S(z,se,Le);const ye=K(z.slice(Le,qe));U[Ce]=ye}W=se+1}while(W<H);return U}function r(z,N,U){do{const H=z.charCodeAt(N);if(H!==32&&H!==9)return N}while(++N<U);return U}function S(z,N,U){for(;N>U;){const H=z.charCodeAt(--N);if(H!==32&&H!==9)return N+1}return U}function A(z,N,U){const H=(U==null?void 0:U.encode)||encodeURIComponent;if(!e.test(z))throw new TypeError(`argument name is invalid: ${z}`);const K=H(N);if(!t.test(K))throw new TypeError(`argument val is invalid: ${N}`);let W=z+"="+K;if(!U)return W;if(U.maxAge!==void 0){if(!Number.isInteger(U.maxAge))throw new TypeError(`option maxAge is invalid: ${U.maxAge}`);W+="; Max-Age="+U.maxAge}if(U.domain){if(!n.test(U.domain))throw new TypeError(`option domain is invalid: ${U.domain}`);W+="; Domain="+U.domain}if(U.path){if(!a.test(U.path))throw new TypeError(`option path is invalid: ${U.path}`);W+="; Path="+U.path}if(U.expires){if(!O(U.expires)||!Number.isFinite(U.expires.valueOf()))throw new TypeError(`option expires is invalid: ${U.expires}`);W+="; Expires="+U.expires.toUTCString()}if(U.httpOnly&&(W+="; HttpOnly"),U.secure&&(W+="; Secure"),U.partitioned&&(W+="; Partitioned"),U.priority)switch(typeof U.priority=="string"?U.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${U.priority}`)}if(U.sameSite)switch(typeof U.sameSite=="string"?U.sameSite.toLowerCase():U.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${U.sameSite}`)}return W}function R(z){if(z.indexOf("%")===-1)return z;try{return decodeURIComponent(z)}catch{return z}}function O(z){return u.call(z)==="[object Date]"}return Nb}Uq();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var M4=e=>{throw TypeError(e)},Vq=(e,t,n)=>t.has(e)||M4("Cannot "+n),wM=(e,t,n)=>(Vq(e,t,"read from private field"),n?n.call(e):t.get(e)),$q=(e,t,n)=>t.has(e)?M4("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Dz="popstate";function Hq(e={}){function t(a,u){let{pathname:f,search:y,hash:r}=a.location;return D1("",{pathname:f,search:y,hash:r},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(a,u){return typeof u=="string"?u:Ng(u)}return qq(t,n,null,e)}function ao(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gq(){return Math.random().toString(36).substring(2,10)}function Oz(e,t){return{usr:e.state,key:e.key,idx:t}}function D1(e,t,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Xg(t):t,state:n,key:t&&t.key||a||Gq()}}function Ng({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xg(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function qq(e,t,n,a={}){let{window:u=document.defaultView,v5Compat:f=!1}=a,y=u.history,r="POP",S=null,A=R();A==null&&(A=0,y.replaceState({...y.state,idx:A},""));function R(){return(y.state||{idx:null}).idx}function O(){r="POP";let K=R(),W=K==null?null:K-A;A=K,S&&S({action:r,location:H.location,delta:W})}function z(K,W){r="PUSH";let re=D1(H.location,K,W);A=R()+1;let ne=Oz(re,A),se=H.createHref(re);try{y.pushState(ne,"",se)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;u.location.assign(se)}f&&S&&S({action:r,location:H.location,delta:1})}function N(K,W){r="REPLACE";let re=D1(H.location,K,W);A=R();let ne=Oz(re,A),se=H.createHref(re);y.replaceState(ne,"",se),f&&S&&S({action:r,location:H.location,delta:0})}function U(K){let W=u.location.origin!=="null"?u.location.origin:u.location.href,re=typeof K=="string"?K:Ng(K);return re=re.replace(/ $/,"%20"),ao(W,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,W)}let H={get action(){return r},get location(){return e(u,y)},listen(K){if(S)throw new Error("A history only accepts one active listener");return u.addEventListener(Dz,O),S=K,()=>{u.removeEventListener(Dz,O),S=null}},createHref(K){return t(u,K)},createURL:U,encodeLocation(K){let W=U(K);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:z,replace:N,go(K){return y.go(K)}};return H}var s1,Lz=class{constructor(e){if($q(this,s1,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(wM(this,s1).has(e))return wM(this,s1).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){wM(this,s1).set(e,t)}};s1=new WeakMap;var Wq=new Set(["lazy","caseSensitive","path","id","index","children"]);function Xq(e){return Wq.has(e)}var Zq=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function Yq(e){return Zq.has(e)}function Kq(e){return e.index===!0}function bE(e,t,n=[],a={}){return e.map((u,f)=>{let y=[...n,String(f)],r=typeof u.id=="string"?u.id:y.join("-");if(ao(u.index!==!0||!u.children,"Cannot specify children on an index route"),ao(!a[r],`Found a route id collision on id "${r}".  Route id's must be globally unique within Data Router usages`),Kq(u)){let S={...u,...t(u),id:r};return a[r]=S,S}else{let S={...u,...t(u),id:r,children:void 0};return a[r]=S,u.children&&(S.children=bE(u.children,t,y,a)),S}})}function Ig(e,t,n="/"){return XT(e,t,n,!1)}function XT(e,t,n,a){let u=typeof t=="string"?Xg(t):t,f=bh(u.pathname||"/",n);if(f==null)return null;let y=R4(e);Qq(y);let r=null;for(let S=0;r==null&&S<y.length;++S){let A=u9(f);r=l9(y[S],A,a)}return r}function Jq(e,t){let{route:n,pathname:a,params:u}=e;return{id:n.id,pathname:a,params:u,data:t[n.id],handle:n.handle}}function R4(e,t=[],n=[],a=""){let u=(f,y,r)=>{let S={relativePath:r===void 0?f.path||"":r,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};S.relativePath.startsWith("/")&&(ao(S.relativePath.startsWith(a),`Absolute route path "${S.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(a.length));let A=Nf([a,S.relativePath]),R=n.concat(S);f.children&&f.children.length>0&&(ao(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),R4(f.children,t,R,A)),!(f.path==null&&!f.index)&&t.push({path:A,score:s9(A,f.index),routesMeta:R})};return e.forEach((f,y)=>{var r;if(f.path===""||!((r=f.path)!=null&&r.includes("?")))u(f,y);else for(let S of I4(f.path))u(f,y,S)}),t}function I4(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,u=n.endsWith("?"),f=n.replace(/\?$/,"");if(a.length===0)return u?[f,""]:[f];let y=I4(a.join("/")),r=[];return r.push(...y.map(S=>S===""?f:[f,S].join("/"))),u&&r.push(...y),r.map(S=>e.startsWith("/")&&S===""?"/":S)}function Qq(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:a9(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var e9=/^:[\w-]+$/,t9=3,n9=2,i9=1,r9=10,o9=-2,kz=e=>e==="*";function s9(e,t){let n=e.split("/"),a=n.length;return n.some(kz)&&(a+=o9),t&&(a+=n9),n.filter(u=>!kz(u)).reduce((u,f)=>u+(e9.test(f)?t9:f===""?i9:r9),a)}function a9(e,t){return e.length===t.length&&e.slice(0,-1).every((a,u)=>a===t[u])?e[e.length-1]-t[t.length-1]:0}function l9(e,t,n=!1){let{routesMeta:a}=e,u={},f="/",y=[];for(let r=0;r<a.length;++r){let S=a[r],A=r===a.length-1,R=f==="/"?t:t.slice(f.length)||"/",O=_m({path:S.relativePath,caseSensitive:S.caseSensitive,end:A},R),z=S.route;if(!O&&A&&n&&!a[a.length-1].route.index&&(O=_m({path:S.relativePath,caseSensitive:S.caseSensitive,end:!1},R)),!O)return null;Object.assign(u,O.params),y.push({params:u,pathname:Nf([f,O.pathname]),pathnameBase:f9(Nf([f,O.pathnameBase])),route:z}),O.pathnameBase!=="/"&&(f=Nf([f,O.pathnameBase]))}return y}function _m(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=c9(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let f=u[0],y=f.replace(/(.)\/+$/,"$1"),r=u.slice(1);return{params:a.reduce((A,{paramName:R,isOptional:O},z)=>{if(R==="*"){let U=r[z]||"";y=f.slice(0,f.length-U.length).replace(/(.)\/+$/,"$1")}const N=r[z];return O&&!N?A[R]=void 0:A[R]=(N||"").replace(/%2F/g,"/"),A},{}),pathname:f,pathnameBase:y,pattern:e}}function c9(e,t=!1,n=!0){Vs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,r,S)=>(a.push({paramName:r,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),a]}function u9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function bh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function h9(e,t="/"){let{pathname:n,search:a="",hash:u=""}=typeof e=="string"?Xg(e):e;return{pathname:n?n.startsWith("/")?n:d9(n,t):t,search:p9(a),hash:m9(u)}}function d9(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function SM(e,t,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cC(e){let t=P4(e);return t.map((n,a)=>a===t.length-1?n.pathname:n.pathnameBase)}function uC(e,t,n,a=!1){let u;typeof e=="string"?u=Xg(e):(u={...e},ao(!u.pathname||!u.pathname.includes("?"),SM("?","pathname","search",u)),ao(!u.pathname||!u.pathname.includes("#"),SM("#","pathname","hash",u)),ao(!u.search||!u.search.includes("#"),SM("#","search","hash",u)));let f=e===""||u.pathname==="",y=f?"/":u.pathname,r;if(y==null)r=n;else{let O=t.length-1;if(!a&&y.startsWith("..")){let z=y.split("/");for(;z[0]==="..";)z.shift(),O-=1;u.pathname=z.join("/")}r=O>=0?t[O]:"/"}let S=h9(u,r),A=y&&y!=="/"&&y.endsWith("/"),R=(f||y===".")&&n.endsWith("/");return!S.pathname.endsWith("/")&&(A||R)&&(S.pathname+="/"),S}var Nf=e=>e.join("/").replace(/\/\/+/g,"/"),f9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),p9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,m9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,wE=class{constructor(e,t,n,a=!1){this.status=e,this.statusText=t||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function O1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var D4=["POST","PUT","PATCH","DELETE"],g9=new Set(D4),y9=["GET",...D4],_9=new Set(y9),v9=new Set([301,302,303,307,308]),x9=new Set([307,308]),TM={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},b9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jb={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},WP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w9=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),O4="remix-router-transitions",L4=Symbol("ResetLoaderData");function S9(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";ao(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=e.hydrationRouteProperties||[],u=e.mapRouteProperties||w9,f={},y=bE(e.routes,u,void 0,f),r,S=e.basename||"/",A=e.dataStrategy||M9,R={unstable_middleware:!1,...e.future},O=null,z=new Set,N=null,U=null,H=null,K=e.hydrationData!=null,W=Ig(y,e.history.location,S),re=!1,ne=null;if(W==null&&!e.patchRoutesOnNavigation){let Te=mh(404,{pathname:e.history.location.pathname}),{matches:Y,route:ie}=Wz(y);W=Y,ne={[ie.id]:Te}}W&&!e.hydrationData&&ca(W,y,e.history.location.pathname).active&&(W=null);let se;if(W)if(W.some(Te=>Te.route.lazy))se=!1;else if(!W.some(Te=>Te.route.loader))se=!0;else{let Te=e.hydrationData?e.hydrationData.loaderData:null,Y=e.hydrationData?e.hydrationData.errors:null;if(Y){let ie=W.findIndex(ge=>Y[ge.route.id]!==void 0);se=W.slice(0,ie+1).every(ge=>!lI(ge.route,Te,Y))}else se=W.every(ie=>!lI(ie.route,Te,Y))}else{se=!1,W=[];let Te=ca(null,y,e.history.location.pathname);Te.active&&Te.matches&&(re=!0,W=Te.matches)}let ue,pe={historyAction:e.history.action,location:e.history.location,matches:W,initialized:se,navigation:TM,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||ne,fetchers:new Map,blockers:new Map},Ce="POP",Le=!1,qe,ye=!1,Xe=new Map,ut=null,et=!1,ot=!1,mt=new Set,$e=new Map,it=0,Tt=-1,xt=new Map,je=new Set,ht=new Map,Bt=new Map,Ft=new Set,on=new Map,en,jt=null;function Rn(){if(O=e.history.listen(({action:Te,location:Y,delta:ie})=>{if(en){en(),en=void 0;return}Vs(on.size===0||ie!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=Vi({currentLocation:pe.location,nextLocation:Y,historyAction:Te});if(ge&&ie!=null){let Ee=new Promise(Pe=>{en=Pe});e.history.go(ie*-1),Wr(ge,{state:"blocked",location:Y,proceed(){Wr(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),Ee.then(()=>e.history.go(ie))},reset(){let Pe=new Map(pe.blockers);Pe.set(ge,jb),On({blockers:Pe})}});return}return zn(Te,Y)}),n){N9(t,Xe);let Te=()=>j9(t,Xe);t.addEventListener("pagehide",Te),ut=()=>t.removeEventListener("pagehide",Te)}return pe.initialized||zn("POP",pe.location,{initialHydration:!0}),ue}function Vn(){O&&O(),ut&&ut(),z.clear(),qe&&qe.abort(),pe.fetchers.forEach((Te,Y)=>Mi(Y)),pe.blockers.forEach((Te,Y)=>hr(Y))}function Hn(Te){return z.add(Te),()=>z.delete(Te)}function On(Te,Y={}){pe={...pe,...Te};let ie=[],ge=[];pe.fetchers.forEach((Ee,Pe)=>{Ee.state==="idle"&&(Ft.has(Pe)?ie.push(Pe):ge.push(Pe))}),Ft.forEach(Ee=>{!pe.fetchers.has(Ee)&&!$e.has(Ee)&&ie.push(Ee)}),[...z].forEach(Ee=>Ee(pe,{deletedFetchers:ie,viewTransitionOpts:Y.viewTransitionOpts,flushSync:Y.flushSync===!0})),ie.forEach(Ee=>Mi(Ee)),ge.forEach(Ee=>pe.fetchers.delete(Ee))}function ai(Te,Y,{flushSync:ie}={}){var Je,st;let ge=pe.actionData!=null&&pe.navigation.formMethod!=null&&pu(pe.navigation.formMethod)&&pe.navigation.state==="loading"&&((Je=Te.state)==null?void 0:Je._isRedirect)!==!0,Ee;Y.actionData?Object.keys(Y.actionData).length>0?Ee=Y.actionData:Ee=null:ge?Ee=pe.actionData:Ee=null;let Pe=Y.loaderData?Gz(pe.loaderData,Y.loaderData,Y.matches||[],Y.errors):pe.loaderData,Ue=pe.blockers;Ue.size>0&&(Ue=new Map(Ue),Ue.forEach((Ke,At)=>Ue.set(At,jb)));let Fe=Le===!0||pe.navigation.formMethod!=null&&pu(pe.navigation.formMethod)&&((st=Te.state)==null?void 0:st._isRedirect)!==!0;r&&(y=r,r=void 0),et||Ce==="POP"||(Ce==="PUSH"?e.history.push(Te,Te.state):Ce==="REPLACE"&&e.history.replace(Te,Te.state));let He;if(Ce==="POP"){let Ke=Xe.get(pe.location.pathname);Ke&&Ke.has(Te.pathname)?He={currentLocation:pe.location,nextLocation:Te}:Xe.has(Te.pathname)&&(He={currentLocation:Te,nextLocation:pe.location})}else if(ye){let Ke=Xe.get(pe.location.pathname);Ke?Ke.add(Te.pathname):(Ke=new Set([Te.pathname]),Xe.set(pe.location.pathname,Ke)),He={currentLocation:pe.location,nextLocation:Te}}On({...Y,actionData:Ee,loaderData:Pe,historyAction:Ce,location:Te,initialized:!0,navigation:TM,revalidation:"idle",restoreScrollPosition:Bl(Te,Y.matches||pe.matches),preventScrollReset:Fe,blockers:Ue},{viewTransitionOpts:He,flushSync:ie===!0}),Ce="POP",Le=!1,ye=!1,et=!1,ot=!1,jt==null||jt.resolve(),jt=null}async function oi(Te,Y){if(typeof Te=="number"){e.history.go(Te);return}let ie=aI(pe.location,pe.matches,S,Te,Y==null?void 0:Y.fromRouteId,Y==null?void 0:Y.relative),{path:ge,submission:Ee,error:Pe}=zz(!1,ie,Y),Ue=pe.location,Fe=D1(pe.location,ge,Y&&Y.state);Fe={...Fe,...e.history.encodeLocation(Fe)};let He=Y&&Y.replace!=null?Y.replace:void 0,Je="PUSH";He===!0?Je="REPLACE":He===!1||Ee!=null&&pu(Ee.formMethod)&&Ee.formAction===pe.location.pathname+pe.location.search&&(Je="REPLACE");let st=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,Ke=(Y&&Y.flushSync)===!0,At=Vi({currentLocation:Ue,nextLocation:Fe,historyAction:Je});if(At){Wr(At,{state:"blocked",location:Fe,proceed(){Wr(At,{state:"proceeding",proceed:void 0,reset:void 0,location:Fe}),oi(Te,Y)},reset(){let qt=new Map(pe.blockers);qt.set(At,jb),On({blockers:qt})}});return}await zn(Je,Fe,{submission:Ee,pendingError:Pe,preventScrollReset:st,replace:Y&&Y.replace,enableViewTransition:Y&&Y.viewTransition,flushSync:Ke})}function Ln(){jt||(jt=U9()),In(),On({revalidation:"loading"});let Te=jt.promise;return pe.navigation.state==="submitting"?Te:pe.navigation.state==="idle"?(zn(pe.historyAction,pe.location,{startUninterruptedRevalidation:!0}),Te):(zn(Ce||pe.historyAction,pe.navigation.location,{overrideNavigation:pe.navigation,enableViewTransition:ye===!0}),Te)}async function zn(Te,Y,ie){qe&&qe.abort(),qe=null,Ce=Te,et=(ie&&ie.startUninterruptedRevalidation)===!0,Ds(pe.location,pe.matches),Le=(ie&&ie.preventScrollReset)===!0,ye=(ie&&ie.enableViewTransition)===!0;let ge=r||y,Ee=ie&&ie.overrideNavigation,Pe=ie!=null&&ie.initialHydration&&pe.matches&&pe.matches.length>0&&!re?pe.matches:Ig(ge,Y,S),Ue=(ie&&ie.flushSync)===!0;if(Pe&&pe.initialized&&!ot&&L9(pe.location,Y)&&!(ie&&ie.submission&&pu(ie.submission.formMethod))){ai(Y,{matches:Pe},{flushSync:Ue});return}let Fe=ca(Pe,ge,Y.pathname);if(Fe.active&&Fe.matches&&(Pe=Fe.matches),!Pe){let{error:kn,notFoundMatches:Pn,route:Dn}=ko(Y.pathname);ai(Y,{matches:Pn,loaderData:{},errors:{[Dn.id]:kn}},{flushSync:Ue});return}qe=new AbortController;let He=L0(e.history,Y,qe.signal,ie&&ie.submission),Je=new Lz(e.unstable_getContext?await e.unstable_getContext():void 0),st;if(ie&&ie.pendingError)st=[P_(Pe).route.id,{type:"error",error:ie.pendingError}];else if(ie&&ie.submission&&pu(ie.submission.formMethod)){let kn=await hi(He,Y,ie.submission,Pe,Je,Fe.active,ie&&ie.initialHydration===!0,{replace:ie.replace,flushSync:Ue});if(kn.shortCircuited)return;if(kn.pendingActionResult){let[Pn,Dn]=kn.pendingActionResult;if(fu(Dn)&&O1(Dn.error)&&Dn.error.status===404){qe=null,ai(Y,{matches:kn.matches,loaderData:{},errors:{[Pn]:Dn.error}});return}}Pe=kn.matches||Pe,st=kn.pendingActionResult,Ee=EM(Y,ie.submission),Ue=!1,Fe.active=!1,He=L0(e.history,He.url,He.signal)}let{shortCircuited:Ke,matches:At,loaderData:qt,errors:tn}=await fi(He,Y,Pe,Je,Fe.active,Ee,ie&&ie.submission,ie&&ie.fetcherSubmission,ie&&ie.replace,ie&&ie.initialHydration===!0,Ue,st);Ke||(qe=null,ai(Y,{matches:At||Pe,...qz(st),loaderData:qt,errors:tn}))}async function hi(Te,Y,ie,ge,Ee,Pe,Ue,Fe={}){In();let He=B9(Y,ie);if(On({navigation:He},{flushSync:Fe.flushSync===!0}),Pe){let Ke=await Zt(ge,Y.pathname,Te.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let At=P_(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,pendingActionResult:[At,{type:"error",error:Ke.error}]}}else if(Ke.matches)ge=Ke.matches;else{let{notFoundMatches:At,error:qt,route:tn}=ko(Y.pathname);return{matches:At,pendingActionResult:[tn.id,{type:"error",error:qt}]}}}let Je,st=a1(ge,Y);if(!st.route.action&&!st.route.lazy)Je={type:"error",error:mh(405,{method:Te.method,pathname:Y.pathname,routeId:st.route.id})};else{let Ke=Z0(u,f,Te,ge,st,Ue?[]:a,Ee),At=await Cn(Te,Ke,Ee,null);if(Je=At[st.route.id],!Je){for(let qt of ge)if(At[qt.route.id]){Je=At[qt.route.id];break}}if(Te.signal.aborted)return{shortCircuited:!0}}if(O_(Je)){let Ke;return Fe&&Fe.replace!=null?Ke=Fe.replace:Ke=Vz(Je.response.headers.get("Location"),new URL(Te.url),S)===pe.location.pathname+pe.location.search,await dt(Te,Je,!0,{submission:ie,replace:Ke}),{shortCircuited:!0}}if(fu(Je)){let Ke=P_(ge,st.route.id);return(Fe&&Fe.replace)!==!0&&(Ce="PUSH"),{matches:ge,pendingActionResult:[Ke.route.id,Je,st.route.id]}}return{matches:ge,pendingActionResult:[st.route.id,Je]}}async function fi(Te,Y,ie,ge,Ee,Pe,Ue,Fe,He,Je,st,Ke){let At=Pe||EM(Y,Ue),qt=Ue||Fe||Zz(At),tn=!et&&!Je;if(Ee){if(tn){let no=ci(Ke);On({navigation:At,...no!==void 0?{actionData:no}:{}},{flushSync:st})}let Ri=await Zt(ie,Y.pathname,Te.signal);if(Ri.type==="aborted")return{shortCircuited:!0};if(Ri.type==="error"){let no=P_(Ri.partialMatches).route.id;return{matches:Ri.partialMatches,loaderData:{},errors:{[no]:Ri.error}}}else if(Ri.matches)ie=Ri.matches;else{let{error:no,notFoundMatches:ds,route:So}=ko(Y.pathname);return{matches:ds,loaderData:{},errors:{[So.id]:no}}}}let kn=r||y,{dsMatches:Pn,revalidatingFetchers:Dn}=Bz(Te,ge,u,f,e.history,pe,ie,qt,Y,Je?[]:a,Je===!0,ot,mt,Ft,ht,je,kn,S,Ke);if(Tt=++it,!e.dataStrategy&&!Pn.some(Ri=>Ri.shouldLoad)&&Dn.length===0){let Ri=mr();return ai(Y,{matches:ie,loaderData:{},errors:Ke&&fu(Ke[1])?{[Ke[0]]:Ke[1].error}:null,...qz(Ke),...Ri?{fetchers:new Map(pe.fetchers)}:{}},{flushSync:st}),{shortCircuited:!0}}if(tn){let Ri={};if(!Ee){Ri.navigation=At;let no=ci(Ke);no!==void 0&&(Ri.actionData=no)}Dn.length>0&&(Ri.fetchers=Pi(Dn)),On(Ri,{flushSync:st})}Dn.forEach(Ri=>{Nn(Ri.key),Ri.controller&&$e.set(Ri.key,Ri.controller)});let di=()=>Dn.forEach(Ri=>Nn(Ri.key));qe&&qe.signal.addEventListener("abort",di);let{loaderResults:sr,fetcherResults:ui}=await wn(Pn,Dn,Te,ge);if(Te.signal.aborted)return{shortCircuited:!0};qe&&qe.signal.removeEventListener("abort",di),Dn.forEach(Ri=>$e.delete(Ri.key));let $i=YS(sr);if($i)return await dt(Te,$i.result,!0,{replace:He}),{shortCircuited:!0};if($i=YS(ui),$i)return je.add($i.key),await dt(Te,$i.result,!0,{replace:He}),{shortCircuited:!0};let{loaderData:Di,errors:ar}=Hz(pe,ie,sr,Ke,Dn,ui);Je&&pe.errors&&(ar={...pe.errors,...ar});let Er=mr(),Lr=Qi(Tt),ho=Er||Lr||Dn.length>0;return{matches:ie,loaderData:Di,errors:ar,...ho?{fetchers:new Map(pe.fetchers)}:{}}}function ci(Te){if(Te&&!fu(Te[1]))return{[Te[0]]:Te[1].data};if(pe.actionData)return Object.keys(pe.actionData).length===0?null:pe.actionData}function Pi(Te){return Te.forEach(Y=>{let ie=pe.fetchers.get(Y.key),ge=Ub(void 0,ie?ie.data:void 0);pe.fetchers.set(Y.key,ge)}),new Map(pe.fetchers)}async function ii(Te,Y,ie,ge){Nn(Te);let Ee=(ge&&ge.flushSync)===!0,Pe=r||y,Ue=aI(pe.location,pe.matches,S,ie,Y,ge==null?void 0:ge.relative),Fe=Ig(Pe,Ue,S),He=ca(Fe,Pe,Ue);if(He.active&&He.matches&&(Fe=He.matches),!Fe){Xn(Te,Y,mh(404,{pathname:Ue}),{flushSync:Ee});return}let{path:Je,submission:st,error:Ke}=zz(!0,Ue,ge);if(Ke){Xn(Te,Y,Ke,{flushSync:Ee});return}let At=a1(Fe,Je),qt=new Lz(e.unstable_getContext?await e.unstable_getContext():void 0),tn=(ge&&ge.preventScrollReset)===!0;if(st&&pu(st.formMethod)){await pi(Te,Y,Je,At,Fe,qt,He.active,Ee,tn,st);return}ht.set(Te,{routeId:Y,path:Je}),await yi(Te,Y,Je,At,Fe,qt,He.active,Ee,tn,st)}async function pi(Te,Y,ie,ge,Ee,Pe,Ue,Fe,He,Je){In(),ht.delete(Te);function st(vr){if(!vr.route.action&&!vr.route.lazy){let zo=mh(405,{method:Je.formMethod,pathname:ie,routeId:Y});return Xn(Te,Y,zo,{flushSync:Fe}),!0}return!1}if(!Ue&&st(ge))return;let Ke=pe.fetchers.get(Te);qn(Te,F9(Je,Ke),{flushSync:Fe});let At=new AbortController,qt=L0(e.history,ie,At.signal,Je);if(Ue){let vr=await Zt(Ee,ie,qt.signal,Te);if(vr.type==="aborted")return;if(vr.type==="error"){Xn(Te,Y,vr.error,{flushSync:Fe});return}else if(vr.matches){if(Ee=vr.matches,ge=a1(Ee,ie),st(ge))return}else{Xn(Te,Y,mh(404,{pathname:ie}),{flushSync:Fe});return}}$e.set(Te,At);let tn=it,kn=Z0(u,f,qt,Ee,ge,a,Pe),Dn=(await Cn(qt,kn,Pe,Te))[ge.route.id];if(qt.signal.aborted){$e.get(Te)===At&&$e.delete(Te);return}if(Ft.has(Te)){if(O_(Dn)||fu(Dn)){qn(Te,Ag(void 0));return}}else{if(O_(Dn))if($e.delete(Te),Tt>tn){qn(Te,Ag(void 0));return}else return je.add(Te),qn(Te,Ub(Je)),dt(qt,Dn,!1,{fetcherSubmission:Je,preventScrollReset:He});if(fu(Dn)){Xn(Te,Y,Dn.error);return}}let di=pe.navigation.location||pe.location,sr=L0(e.history,di,At.signal),ui=r||y,$i=pe.navigation.state!=="idle"?Ig(ui,pe.navigation.location,S):pe.matches;ao($i,"Didn't find any matches after fetcher action");let Di=++it;xt.set(Te,Di);let ar=Ub(Je,Dn.data);pe.fetchers.set(Te,ar);let{dsMatches:Er,revalidatingFetchers:Lr}=Bz(sr,Pe,u,f,e.history,pe,$i,Je,di,a,!1,ot,mt,Ft,ht,je,ui,S,[ge.route.id,Dn]);Lr.filter(vr=>vr.key!==Te).forEach(vr=>{let zo=vr.key,Sa=pe.fetchers.get(zo),ls=Ub(void 0,Sa?Sa.data:void 0);pe.fetchers.set(zo,ls),Nn(zo),vr.controller&&$e.set(zo,vr.controller)}),On({fetchers:new Map(pe.fetchers)});let ho=()=>Lr.forEach(vr=>Nn(vr.key));At.signal.addEventListener("abort",ho);let{loaderResults:Ri,fetcherResults:no}=await wn(Er,Lr,sr,Pe);if(At.signal.aborted)return;At.signal.removeEventListener("abort",ho),xt.delete(Te),$e.delete(Te),Lr.forEach(vr=>$e.delete(vr.key));let ds=YS(Ri);if(ds)return dt(sr,ds.result,!1,{preventScrollReset:He});if(ds=YS(no),ds)return je.add(ds.key),dt(sr,ds.result,!1,{preventScrollReset:He});let{loaderData:So,errors:Go}=Hz(pe,$i,Ri,void 0,Lr,no);if(pe.fetchers.has(Te)){let vr=Ag(Dn.data);pe.fetchers.set(Te,vr)}Qi(Di),pe.navigation.state==="loading"&&Di>Tt?(ao(Ce,"Expected pending action"),qe&&qe.abort(),ai(pe.navigation.location,{matches:$i,loaderData:So,errors:Go,fetchers:new Map(pe.fetchers)})):(On({errors:Go,loaderData:Gz(pe.loaderData,So,$i,Go),fetchers:new Map(pe.fetchers)}),ot=!1)}async function yi(Te,Y,ie,ge,Ee,Pe,Ue,Fe,He,Je){let st=pe.fetchers.get(Te);qn(Te,Ub(Je,st?st.data:void 0),{flushSync:Fe});let Ke=new AbortController,At=L0(e.history,ie,Ke.signal);if(Ue){let Dn=await Zt(Ee,ie,At.signal,Te);if(Dn.type==="aborted")return;if(Dn.type==="error"){Xn(Te,Y,Dn.error,{flushSync:Fe});return}else if(Dn.matches)Ee=Dn.matches,ge=a1(Ee,ie);else{Xn(Te,Y,mh(404,{pathname:ie}),{flushSync:Fe});return}}$e.set(Te,Ke);let qt=it,tn=Z0(u,f,At,Ee,ge,a,Pe),Pn=(await Cn(At,tn,Pe,Te))[ge.route.id];if($e.get(Te)===Ke&&$e.delete(Te),!At.signal.aborted){if(Ft.has(Te)){qn(Te,Ag(void 0));return}if(O_(Pn))if(Tt>qt){qn(Te,Ag(void 0));return}else{je.add(Te),await dt(At,Pn,!1,{preventScrollReset:He});return}if(fu(Pn)){Xn(Te,Y,Pn.error);return}qn(Te,Ag(Pn.data))}}async function dt(Te,Y,ie,{submission:ge,fetcherSubmission:Ee,preventScrollReset:Pe,replace:Ue}={}){Y.response.headers.has("X-Remix-Revalidate")&&(ot=!0);let Fe=Y.response.headers.get("Location");ao(Fe,"Expected a Location header on the redirect Response"),Fe=Vz(Fe,new URL(Te.url),S);let He=D1(pe.location,Fe,{_isRedirect:!0});if(n){let tn=!1;if(Y.response.headers.has("X-Remix-Reload-Document"))tn=!0;else if(WP.test(Fe)){const kn=e.history.createURL(Fe);tn=kn.origin!==t.location.origin||bh(kn.pathname,S)==null}if(tn){Ue?t.location.replace(Fe):t.location.assign(Fe);return}}qe=null;let Je=Ue===!0||Y.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:st,formAction:Ke,formEncType:At}=pe.navigation;!ge&&!Ee&&st&&Ke&&At&&(ge=Zz(pe.navigation));let qt=ge||Ee;if(x9.has(Y.response.status)&&qt&&pu(qt.formMethod))await zn(Je,He,{submission:{...qt,formAction:Fe},preventScrollReset:Pe||Le,enableViewTransition:ie?ye:void 0});else{let tn=EM(He,ge);await zn(Je,He,{overrideNavigation:tn,fetcherSubmission:Ee,preventScrollReset:Pe||Le,enableViewTransition:ie?ye:void 0})}}async function Cn(Te,Y,ie,ge){let Ee,Pe={};try{Ee=await R9(A,Te,Y,ge,ie,!1)}catch(Ue){return Y.filter(Fe=>Fe.shouldLoad).forEach(Fe=>{Pe[Fe.route.id]={type:"error",error:Ue}}),Pe}for(let[Ue,Fe]of Object.entries(Ee))if(k9(Fe)){let He=Fe.result;Pe[Ue]={type:"redirect",response:D9(He,Te,Ue,Y,S)}}else Pe[Ue]=await P9(Fe);return Pe}async function wn(Te,Y,ie,ge){let Ee=Cn(ie,Te,ge,null),Pe=Promise.all(Y.map(async He=>{if(He.matches&&He.match&&He.request&&He.controller){let st=(await Cn(He.request,He.matches,ge,He.key))[He.match.route.id];return{[He.key]:st}}else return Promise.resolve({[He.key]:{type:"error",error:mh(404,{pathname:He.path})}})})),Ue=await Ee,Fe=(await Pe).reduce((He,Je)=>Object.assign(He,Je),{});return{loaderResults:Ue,fetcherResults:Fe}}function In(){ot=!0,ht.forEach((Te,Y)=>{$e.has(Y)&&mt.add(Y),Nn(Y)})}function qn(Te,Y,ie={}){pe.fetchers.set(Te,Y),On({fetchers:new Map(pe.fetchers)},{flushSync:(ie&&ie.flushSync)===!0})}function Xn(Te,Y,ie,ge={}){let Ee=P_(pe.matches,Y);Mi(Te),On({errors:{[Ee.route.id]:ie},fetchers:new Map(pe.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Ni(Te){return Bt.set(Te,(Bt.get(Te)||0)+1),Ft.has(Te)&&Ft.delete(Te),pe.fetchers.get(Te)||b9}function Mi(Te){let Y=pe.fetchers.get(Te);$e.has(Te)&&!(Y&&Y.state==="loading"&&xt.has(Te))&&Nn(Te),ht.delete(Te),xt.delete(Te),je.delete(Te),Ft.delete(Te),mt.delete(Te),pe.fetchers.delete(Te)}function pr(Te){let Y=(Bt.get(Te)||0)-1;Y<=0?(Bt.delete(Te),Ft.add(Te)):Bt.set(Te,Y),On({fetchers:new Map(pe.fetchers)})}function Nn(Te){let Y=$e.get(Te);Y&&(Y.abort(),$e.delete(Te))}function qr(Te){for(let Y of Te){let ie=Ni(Y),ge=Ag(ie.data);pe.fetchers.set(Y,ge)}}function mr(){let Te=[],Y=!1;for(let ie of je){let ge=pe.fetchers.get(ie);ao(ge,`Expected fetcher: ${ie}`),ge.state==="loading"&&(je.delete(ie),Te.push(ie),Y=!0)}return qr(Te),Y}function Qi(Te){let Y=[];for(let[ie,ge]of xt)if(ge<Te){let Ee=pe.fetchers.get(ie);ao(Ee,`Expected fetcher: ${ie}`),Ee.state==="loading"&&(Nn(ie),xt.delete(ie),Y.push(ie))}return qr(Y),Y.length>0}function li(Te,Y){let ie=pe.blockers.get(Te)||jb;return on.get(Te)!==Y&&on.set(Te,Y),ie}function hr(Te){pe.blockers.delete(Te),on.delete(Te)}function Wr(Te,Y){let ie=pe.blockers.get(Te)||jb;ao(ie.state==="unblocked"&&Y.state==="blocked"||ie.state==="blocked"&&Y.state==="blocked"||ie.state==="blocked"&&Y.state==="proceeding"||ie.state==="blocked"&&Y.state==="unblocked"||ie.state==="proceeding"&&Y.state==="unblocked",`Invalid blocker state transition: ${ie.state} -> ${Y.state}`);let ge=new Map(pe.blockers);ge.set(Te,Y),On({blockers:ge})}function Vi({currentLocation:Te,nextLocation:Y,historyAction:ie}){if(on.size===0)return;on.size>1&&Vs(!1,"A router only supports one blocker at a time");let ge=Array.from(on.entries()),[Ee,Pe]=ge[ge.length-1],Ue=pe.blockers.get(Ee);if(!(Ue&&Ue.state==="proceeding")&&Pe({currentLocation:Te,nextLocation:Y,historyAction:ie}))return Ee}function ko(Te){let Y=mh(404,{pathname:Te}),ie=r||y,{matches:ge,route:Ee}=Wz(ie);return{notFoundMatches:ge,route:Ee,error:Y}}function Ga(Te,Y,ie){if(N=Te,H=Y,U=ie||null,!K&&pe.navigation===TM){K=!0;let ge=Bl(pe.location,pe.matches);ge!=null&&On({restoreScrollPosition:ge})}return()=>{N=null,H=null,U=null}}function ts(Te,Y){return U&&U(Te,Y.map(ge=>Jq(ge,pe.loaderData)))||Te.key}function Ds(Te,Y){if(N&&H){let ie=ts(Te,Y);N[ie]=H()}}function Bl(Te,Y){if(N){let ie=ts(Te,Y),ge=N[ie];if(typeof ge=="number")return ge}return null}function ca(Te,Y,ie){if(e.patchRoutesOnNavigation)if(Te){if(Object.keys(Te[0].params).length>0)return{active:!0,matches:XT(Y,ie,S,!0)}}else return{active:!0,matches:XT(Y,ie,S,!0)||[]};return{active:!1,matches:null}}async function Zt(Te,Y,ie,ge){if(!e.patchRoutesOnNavigation)return{type:"success",matches:Te};let Ee=Te;for(;;){let Pe=r==null,Ue=r||y,Fe=f;try{await e.patchRoutesOnNavigation({signal:ie,path:Y,matches:Ee,fetcherKey:ge,patch:(st,Ke)=>{ie.aborted||Fz(st,Ke,Ue,Fe,u)}})}catch(st){return{type:"error",error:st,partialMatches:Ee}}finally{Pe&&!ie.aborted&&(y=[...y])}if(ie.aborted)return{type:"aborted"};let He=Ig(Ue,Y,S);if(He)return{type:"success",matches:He};let Je=XT(Ue,Y,S,!0);if(!Je||Ee.length===Je.length&&Ee.every((st,Ke)=>st.route.id===Je[Ke].route.id))return{type:"success",matches:null};Ee=Je}}function Os(Te){f={},r=bE(Te,u,void 0,f)}function Gi(Te,Y){let ie=r==null;Fz(Te,Y,r||y,f,u),ie&&(y=[...y],On({}))}return ue={get basename(){return S},get future(){return R},get state(){return pe},get routes(){return y},get window(){return t},initialize:Rn,subscribe:Hn,enableScrollRestoration:Ga,navigate:oi,fetch:ii,revalidate:Ln,createHref:Te=>e.history.createHref(Te),encodeLocation:Te=>e.history.encodeLocation(Te),getFetcher:Ni,deleteFetcher:pr,dispose:Vn,getBlocker:li,deleteBlocker:hr,patchRoutes:Gi,_internalFetchControllers:$e,_internalSetRoutes:Os},ue}function T9(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function aI(e,t,n,a,u,f){let y,r;if(u){y=[];for(let A of t)if(y.push(A),A.route.id===u){r=A;break}}else y=t,r=t[t.length-1];let S=uC(a||".",cC(y),bh(e.pathname,n)||e.pathname,f==="path");if(a==null&&(S.search=e.search,S.hash=e.hash),(a==null||a===""||a===".")&&r){let A=XP(S.search);if(r.route.index&&!A)S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index";else if(!r.route.index&&A){let R=new URLSearchParams(S.search),O=R.getAll("index");R.delete("index"),O.filter(N=>N).forEach(N=>R.append("index",N));let z=R.toString();S.search=z?`?${z}`:""}}return n!=="/"&&(S.pathname=S.pathname==="/"?n:Nf([n,S.pathname])),Ng(S)}function zz(e,t,n){if(!n||!T9(n))return{path:t};if(n.formMethod&&!z9(n.formMethod))return{path:t,error:mh(405,{method:n.formMethod})};let a=()=>({path:t,error:mh(400,{type:"invalid-body"})}),f=(n.formMethod||"get").toUpperCase(),y=j4(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!pu(f))return a();let O=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((z,[N,U])=>`${z}${N}=${U}
`,""):String(n.body);return{path:t,submission:{formMethod:f,formAction:y,formEncType:n.formEncType,formData:void 0,json:void 0,text:O}}}else if(n.formEncType==="application/json"){if(!pu(f))return a();try{let O=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:f,formAction:y,formEncType:n.formEncType,formData:void 0,json:O,text:void 0}}}catch{return a()}}}ao(typeof FormData=="function","FormData is not available in this environment");let r,S;if(n.formData)r=uI(n.formData),S=n.formData;else if(n.body instanceof FormData)r=uI(n.body),S=n.body;else if(n.body instanceof URLSearchParams)r=n.body,S=$z(r);else if(n.body==null)r=new URLSearchParams,S=new FormData;else try{r=new URLSearchParams(n.body),S=$z(r)}catch{return a()}let A={formMethod:f,formAction:y,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:S,json:void 0,text:void 0};if(pu(A.formMethod))return{path:t,submission:A};let R=Xg(t);return e&&R.search&&XP(R.search)&&r.append("index",""),R.search=`?${r}`,{path:Ng(R),submission:A}}function Bz(e,t,n,a,u,f,y,r,S,A,R,O,z,N,U,H,K,W,re){var ut;let ne=re?fu(re[1])?re[1].error:re[1].data:void 0,se=u.createURL(f.location),ue=u.createURL(S),pe;if(R&&f.errors){let et=Object.keys(f.errors)[0];pe=y.findIndex(ot=>ot.route.id===et)}else if(re&&fu(re[1])){let et=re[0];pe=y.findIndex(ot=>ot.route.id===et)-1}let Ce=re?re[1].statusCode:void 0,Le=Ce&&Ce>=400,qe={currentUrl:se,currentParams:((ut=f.matches[0])==null?void 0:ut.params)||{},nextUrl:ue,nextParams:y[0].params,...r,actionResult:ne,actionStatus:Ce},ye=y.map((et,ot)=>{let{route:mt}=et,$e=null;if(pe!=null&&ot>pe?$e=!1:mt.lazy?$e=!0:mt.loader==null?$e=!1:R?$e=lI(mt,f.loaderData,f.errors):E9(f.loaderData,f.matches[ot],et)&&($e=!0),$e!==null)return cI(n,a,e,et,A,t,$e);let it=Le?!1:O||se.pathname+se.search===ue.pathname+ue.search||se.search!==ue.search||C9(f.matches[ot],et),Tt={...qe,defaultShouldRevalidate:it},xt=SE(et,Tt);return cI(n,a,e,et,A,t,xt,Tt)}),Xe=[];return U.forEach((et,ot)=>{if(R||!y.some(ht=>ht.route.id===et.routeId)||N.has(ot))return;let mt=Ig(K,et.path,W);if(!mt){Xe.push({key:ot,routeId:et.routeId,path:et.path,matches:null,match:null,request:null,controller:null});return}if(H.has(ot))return;let $e=f.fetchers.get(ot),it=a1(mt,et.path),Tt=new AbortController,xt=L0(u,et.path,Tt.signal),je=null;if(z.has(ot))z.delete(ot),je=Z0(n,a,xt,mt,it,A,t);else if($e&&$e.state!=="idle"&&$e.data===void 0)O&&(je=Z0(n,a,xt,mt,it,A,t));else{let ht={...qe,defaultShouldRevalidate:Le?!1:O};SE(it,ht)&&(je=Z0(n,a,xt,mt,it,A,t,ht))}je&&Xe.push({key:ot,routeId:et.routeId,path:et.path,matches:je,match:it,request:xt,controller:Tt})}),{dsMatches:ye,revalidatingFetchers:Xe}}function lI(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let a=t!=null&&t[e.id]!==void 0,u=n!=null&&n[e.id]!==void 0;return!a&&u?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!a&&!u}function E9(e,t,n){let a=!t||n.route.id!==t.route.id,u=!e.hasOwnProperty(n.route.id);return a||u}function C9(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function SE(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function Fz(e,t,n,a,u){let f;if(e){let S=a[e];ao(S,`No route found to patch children into: routeId = ${e}`),S.children||(S.children=[]),f=S.children}else f=n;let y=t.filter(S=>!f.some(A=>k4(S,A))),r=bE(y,u,[e||"_","patch",String((f==null?void 0:f.length)||"0")],a);f.push(...r)}function k4(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,a)=>{var u;return(u=t.children)==null?void 0:u.some(f=>k4(n,f))}):!1}var Nz=new WeakMap,z4=({key:e,route:t,manifest:n,mapRouteProperties:a})=>{let u=n[t.id];if(ao(u,"No route found in manifest"),!u.lazy||typeof u.lazy!="object")return;let f=u.lazy[e];if(!f)return;let y=Nz.get(u);y||(y={},Nz.set(u,y));let r=y[e];if(r)return r;let S=(async()=>{let A=Xq(e),O=u[e]!==void 0&&e!=="hasErrorBoundary";if(A)Vs(!A,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),y[e]=Promise.resolve();else if(O)Vs(!1,`Route "${u.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let z=await f();z!=null&&(Object.assign(u,{[e]:z}),Object.assign(u,a(u)))}typeof u.lazy=="object"&&(u.lazy[e]=void 0,Object.values(u.lazy).every(z=>z===void 0)&&(u.lazy=void 0))})();return y[e]=S,S},jz=new WeakMap;function A9(e,t,n,a,u){let f=n[e.id];if(ao(f,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let R=jz.get(f);if(R)return{lazyRoutePromise:R,lazyHandlerPromise:R};let O=(async()=>{ao(typeof e.lazy=="function","No lazy route function found");let z=await e.lazy(),N={};for(let U in z){let H=z[U];if(H===void 0)continue;let K=Yq(U),re=f[U]!==void 0&&U!=="hasErrorBoundary";K?Vs(!K,"Route property "+U+" is not a supported property to be returned from a lazy route function. This property will be ignored."):re?Vs(!re,`Route "${f.id}" has a static property "${U}" defined but its lazy function is also returning a value for this property. The lazy route property "${U}" will be ignored.`):N[U]=H}Object.assign(f,N),Object.assign(f,{...a(f),lazy:void 0})})();return jz.set(f,O),O.catch(()=>{}),{lazyRoutePromise:O,lazyHandlerPromise:O}}let y=Object.keys(e.lazy),r=[],S;for(let R of y){if(u&&u.includes(R))continue;let O=z4({key:R,route:e,manifest:n,mapRouteProperties:a});O&&(r.push(O),R===t&&(S=O))}let A=r.length>0?Promise.all(r).then(()=>{}):void 0;return A==null||A.catch(()=>{}),S==null||S.catch(()=>{}),{lazyRoutePromise:A,lazyHandlerPromise:S}}async function Uz(e){let t=e.matches.filter(u=>u.shouldLoad),n={};return(await Promise.all(t.map(u=>u.resolve()))).forEach((u,f)=>{n[t[f].route.id]=u}),n}async function M9(e){return e.matches.some(t=>t.route.unstable_middleware)?B4(e,!1,()=>Uz(e),(t,n)=>({[n]:{type:"error",result:t}})):Uz(e)}async function B4(e,t,n,a){let{matches:u,request:f,params:y,context:r}=e,S={handlerResult:void 0};try{let A=u.flatMap(O=>O.route.unstable_middleware?O.route.unstable_middleware.map(z=>[O.route.id,z]):[]),R=await F4({request:f,params:y,context:r},A,t,S,n);return t?R:S.handlerResult}catch(A){if(!S.middlewareError)throw A;let R=await a(S.middlewareError.error,S.middlewareError.routeId);return S.handlerResult?Object.assign(S.handlerResult,R):R}}async function F4(e,t,n,a,u,f=0){let{request:y}=e;if(y.signal.aborted)throw y.signal.reason?y.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${y.method} ${y.url}`);let r=t[f];if(!r)return a.handlerResult=await u(),a.handlerResult;let[S,A]=r,R=!1,O,z=async()=>{if(R)throw new Error("You may only call `next()` once per middleware");R=!0,await F4(e,t,n,a,u,f+1)};try{let N=await A({request:e.request,params:e.params,context:e.context},z);return R?N===void 0?O:N:z()}catch(N){throw a.middlewareError?a.middlewareError.error!==N&&(a.middlewareError={routeId:S,error:N}):a.middlewareError={routeId:S,error:N},N}}function N4(e,t,n,a,u){let f=z4({key:"unstable_middleware",route:a.route,manifest:t,mapRouteProperties:e}),y=A9(a.route,pu(n.method)?"action":"loader",t,e,u);return{middleware:f,route:y.lazyRoutePromise,handler:y.lazyHandlerPromise}}function cI(e,t,n,a,u,f,y,r=null){let S=!1,A=N4(e,t,n,a,u);return{...a,_lazyPromises:A,shouldLoad:y,unstable_shouldRevalidateArgs:r,unstable_shouldCallHandler(R){return S=!0,r?typeof R=="boolean"?SE(a,{...r,defaultShouldRevalidate:R}):SE(a,r):y},resolve(R){return S||y||R&&n.method==="GET"&&(a.route.lazy||a.route.loader)?I9({request:n,match:a,lazyHandlerPromise:A==null?void 0:A.handler,lazyRoutePromise:A==null?void 0:A.route,handlerOverride:R,scopedContext:f}):Promise.resolve({type:"data",result:void 0})}}}function Z0(e,t,n,a,u,f,y,r=null){return a.map(S=>S.route.id!==u.route.id?{...S,shouldLoad:!1,unstable_shouldRevalidateArgs:r,unstable_shouldCallHandler:()=>!1,_lazyPromises:N4(e,t,n,S,f),resolve:()=>Promise.resolve({type:"data",result:void 0})}:cI(e,t,n,S,f,y,!0,r))}async function R9(e,t,n,a,u,f){n.some(A=>{var R;return(R=A._lazyPromises)==null?void 0:R.middleware})&&await Promise.all(n.map(A=>{var R;return(R=A._lazyPromises)==null?void 0:R.middleware}));let y={request:t,params:n[0].params,context:u,matches:n},S=await e({...y,fetcherKey:a,unstable_runClientMiddleware:A=>{let R=y;return B4(R,!1,()=>A({...R,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(O,z)=>({[z]:{type:"error",result:O}}))}});try{await Promise.all(n.flatMap(A=>{var R,O;return[(R=A._lazyPromises)==null?void 0:R.handler,(O=A._lazyPromises)==null?void 0:O.route]}))}catch{}return S}async function I9({request:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:a,handlerOverride:u,scopedContext:f}){let y,r,S=pu(e.method),A=S?"action":"loader",R=O=>{let z,N=new Promise((K,W)=>z=W);r=()=>z(),e.signal.addEventListener("abort",r);let U=K=>typeof O!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${A}" [routeId: ${t.route.id}]`)):O({request:e,params:t.params,context:f},...K!==void 0?[K]:[]),H=(async()=>{try{return{type:"data",result:await(u?u(W=>U(W)):U())}}catch(K){return{type:"error",result:K}}})();return Promise.race([H,N])};try{let O=S?t.route.action:t.route.loader;if(n||a)if(O){let z,[N]=await Promise.all([R(O).catch(U=>{z=U}),n,a]);if(z!==void 0)throw z;y=N}else{await n;let z=S?t.route.action:t.route.loader;if(z)[y]=await Promise.all([R(z),a]);else if(A==="action"){let N=new URL(e.url),U=N.pathname+N.search;throw mh(405,{method:e.method,pathname:U,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(O)y=await R(O);else{let z=new URL(e.url),N=z.pathname+z.search;throw mh(404,{pathname:N})}}catch(O){return{type:"error",result:O}}finally{r&&e.signal.removeEventListener("abort",r)}return y}async function P9(e){var a,u,f,y,r,S;let{result:t,type:n}=e;if(U4(t)){let A;try{let R=t.headers.get("Content-Type");R&&/\bapplication\/json\b/.test(R)?t.body==null?A=null:A=await t.json():A=await t.text()}catch(R){return{type:"error",error:R}}return n==="error"?{type:"error",error:new wE(t.status,t.statusText,A),statusCode:t.status,headers:t.headers}:{type:"data",data:A,statusCode:t.status,headers:t.headers}}return n==="error"?Xz(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new wE(((f=t.init)==null?void 0:f.status)||500,void 0,t.data),statusCode:O1(t)?t.status:void 0,headers:(y=t.init)!=null&&y.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:O1(t)?t.status:void 0}:Xz(t)?{type:"data",data:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(S=t.init)!=null&&S.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function D9(e,t,n,a,u){let f=e.headers.get("Location");if(ao(f,"Redirects returned/thrown from loaders/actions must have a Location header"),!WP.test(f)){let y=a.slice(0,a.findIndex(r=>r.route.id===n)+1);f=aI(new URL(t.url),y,u,f),e.headers.set("Location",f)}return e}function Vz(e,t,n){if(WP.test(e)){let a=e,u=a.startsWith("//")?new URL(t.protocol+a):new URL(a),f=bh(u.pathname,n)!=null;if(u.origin===t.origin&&f)return u.pathname+u.search+u.hash}return e}function L0(e,t,n,a){let u=e.createURL(j4(t)).toString(),f={signal:n};if(a&&pu(a.formMethod)){let{formMethod:y,formEncType:r}=a;f.method=y.toUpperCase(),r==="application/json"?(f.headers=new Headers({"Content-Type":r}),f.body=JSON.stringify(a.json)):r==="text/plain"?f.body=a.text:r==="application/x-www-form-urlencoded"&&a.formData?f.body=uI(a.formData):f.body=a.formData}return new Request(u,f)}function uI(e){let t=new URLSearchParams;for(let[n,a]of e.entries())t.append(n,typeof a=="string"?a:a.name);return t}function $z(e){let t=new FormData;for(let[n,a]of e.entries())t.append(n,a);return t}function O9(e,t,n,a=!1,u=!1){let f={},y=null,r,S=!1,A={},R=n&&fu(n[1])?n[1].error:void 0;return e.forEach(O=>{if(!(O.route.id in t))return;let z=O.route.id,N=t[z];if(ao(!O_(N),"Cannot handle redirect results in processLoaderData"),fu(N)){let U=N.error;if(R!==void 0&&(U=R,R=void 0),y=y||{},u)y[z]=U;else{let H=P_(e,z);y[H.route.id]==null&&(y[H.route.id]=U)}a||(f[z]=L4),S||(S=!0,r=O1(N.error)?N.error.status:500),N.headers&&(A[z]=N.headers)}else f[z]=N.data,N.statusCode&&N.statusCode!==200&&!S&&(r=N.statusCode),N.headers&&(A[z]=N.headers)}),R!==void 0&&n&&(y={[n[0]]:R},n[2]&&(f[n[2]]=void 0)),{loaderData:f,errors:y,statusCode:r||200,loaderHeaders:A}}function Hz(e,t,n,a,u,f){let{loaderData:y,errors:r}=O9(t,n,a);return u.filter(S=>!S.matches||S.matches.some(A=>A.shouldLoad)).forEach(S=>{let{key:A,match:R,controller:O}=S,z=f[A];if(ao(z,"Did not find corresponding fetcher result"),!(O&&O.signal.aborted))if(fu(z)){let N=P_(e.matches,R==null?void 0:R.route.id);r&&r[N.route.id]||(r={...r,[N.route.id]:z.error}),e.fetchers.delete(A)}else if(O_(z))ao(!1,"Unhandled fetcher revalidation redirect");else{let N=Ag(z.data);e.fetchers.set(A,N)}}),{loaderData:y,errors:r}}function Gz(e,t,n,a){let u=Object.entries(t).filter(([,f])=>f!==L4).reduce((f,[y,r])=>(f[y]=r,f),{});for(let f of n){let y=f.route.id;if(!t.hasOwnProperty(y)&&e.hasOwnProperty(y)&&f.route.loader&&(u[y]=e[y]),a&&a.hasOwnProperty(y))break}return u}function qz(e){return e?fu(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function P_(e,t){return(t?e.slice(0,e.findIndex(a=>a.route.id===t)+1):[...e]).reverse().find(a=>a.route.hasErrorBoundary===!0)||e[0]}function Wz(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function mh(e,{pathname:t,routeId:n,method:a,type:u,message:f}={}){let y="Unknown Server Error",r="Unknown @remix-run/router error";return e===400?(y="Bad Request",a&&t&&n?r=`You made a ${a} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:u==="invalid-body"&&(r="Unable to encode submission body")):e===403?(y="Forbidden",r=`Route "${n}" does not match URL "${t}"`):e===404?(y="Not Found",r=`No route matches URL "${t}"`):e===405&&(y="Method Not Allowed",a&&t&&n?r=`You made a ${a.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:a&&(r=`Invalid request method "${a.toUpperCase()}"`)),new wE(e||500,y,new Error(r),!0)}function YS(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[a,u]=t[n];if(O_(u))return{key:a,result:u}}}function j4(e){let t=typeof e=="string"?Xg(e):e;return Ng({...t,hash:""})}function L9(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function k9(e){return U4(e.result)&&v9.has(e.result.status)}function fu(e){return e.type==="error"}function O_(e){return(e&&e.type)==="redirect"}function Xz(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function U4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function z9(e){return _9.has(e.toUpperCase())}function pu(e){return g9.has(e.toUpperCase())}function XP(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function a1(e,t){let n=typeof t=="string"?Xg(t).search:t.search;if(e[e.length-1].route.index&&XP(n||""))return e[e.length-1];let a=P4(e);return a[a.length-1]}function Zz(e){let{formMethod:t,formAction:n,formEncType:a,text:u,formData:f,json:y}=e;if(!(!t||!n||!a)){if(u!=null)return{formMethod:t,formAction:n,formEncType:a,formData:void 0,json:void 0,text:u};if(f!=null)return{formMethod:t,formAction:n,formEncType:a,formData:f,json:void 0,text:void 0};if(y!==void 0)return{formMethod:t,formAction:n,formEncType:a,formData:void 0,json:y,text:void 0}}}function EM(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function B9(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ub(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function F9(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ag(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function N9(e,t){try{let n=e.sessionStorage.getItem(O4);if(n){let a=JSON.parse(n);for(let[u,f]of Object.entries(a||{}))f&&Array.isArray(f)&&t.set(u,new Set(f||[]))}}catch{}}function j9(e,t){if(t.size>0){let n={};for(let[a,u]of t)n[a]=[...u];try{e.sessionStorage.setItem(O4,JSON.stringify(n))}catch(a){Vs(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function U9(){let e,t,n=new Promise((a,u)=>{e=async f=>{a(f);try{await n}catch{}},t=async f=>{u(f);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var lv=ee.createContext(null);lv.displayName="DataRouter";var cw=ee.createContext(null);cw.displayName="DataRouterState";var ZP=ee.createContext({isTransitioning:!1});ZP.displayName="ViewTransition";var V4=ee.createContext(new Map);V4.displayName="Fetchers";var V9=ee.createContext(null);V9.displayName="Await";var Fd=ee.createContext(null);Fd.displayName="Navigation";var hC=ee.createContext(null);hC.displayName="Location";var Nd=ee.createContext({outlet:null,matches:[],isDataRoute:!1});Nd.displayName="Route";var YP=ee.createContext(null);YP.displayName="RouteError";function $9(e,{relative:t}={}){ao(dx(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=ee.useContext(Fd),{hash:u,pathname:f,search:y}=uw(e,{relative:t}),r=f;return n!=="/"&&(r=f==="/"?n:Nf([n,f])),a.createHref({pathname:r,search:y,hash:u})}function dx(){return ee.useContext(hC)!=null}function Ah(){return ao(dx(),"useLocation() may be used only in the context of a <Router> component."),ee.useContext(hC).location}var $4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function H4(e){ee.useContext(Fd).static||ee.useLayoutEffect(e)}function Zg(){let{isDataRoute:e}=ee.useContext(Nd);return e?r7():H9()}function H9(){ao(dx(),"useNavigate() may be used only in the context of a <Router> component.");let e=ee.useContext(lv),{basename:t,navigator:n}=ee.useContext(Fd),{matches:a}=ee.useContext(Nd),{pathname:u}=Ah(),f=JSON.stringify(cC(a)),y=ee.useRef(!1);return H4(()=>{y.current=!0}),ee.useCallback((S,A={})=>{if(Vs(y.current,$4),!y.current)return;if(typeof S=="number"){n.go(S);return}let R=uC(S,JSON.parse(f),u,A.relative==="path");e==null&&t!=="/"&&(R.pathname=R.pathname==="/"?t:Nf([t,R.pathname])),(A.replace?n.replace:n.push)(R,A.state,A)},[t,n,f,u,e])}var G9=ee.createContext(null);function q9(e){let t=ee.useContext(Nd).outlet;return t&&ee.createElement(G9.Provider,{value:e},t)}function uw(e,{relative:t}={}){let{matches:n}=ee.useContext(Nd),{pathname:a}=Ah(),u=JSON.stringify(cC(n));return ee.useMemo(()=>uC(e,JSON.parse(u),a,t==="path"),[e,u,a,t])}function W9(e,t,n,a){ao(dx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u,static:f}=ee.useContext(Fd),{matches:y}=ee.useContext(Nd),r=y[y.length-1],S=r?r.params:{},A=r?r.pathname:"/",R=r?r.pathnameBase:"/",O=r&&r.route;{let re=O&&O.path||"";G4(A,!O||re.endsWith("*")||re.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${re}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${re}"> to <Route path="${re==="/"?"*":`${re}/*`}">.`)}let z=Ah(),N;N=z;let U=N.pathname||"/",H=U;if(R!=="/"){let re=R.replace(/^\//,"").split("/");H="/"+U.replace(/^\//,"").split("/").slice(re.length).join("/")}let K=!f&&n&&n.matches&&n.matches.length>0?n.matches:Ig(e,{pathname:H});return Vs(O||K!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Vs(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),J9(K&&K.map(re=>Object.assign({},re,{params:Object.assign({},S,re.params),pathname:Nf([R,u.encodeLocation?u.encodeLocation(re.pathname).pathname:re.pathname]),pathnameBase:re.pathnameBase==="/"?R:Nf([R,u.encodeLocation?u.encodeLocation(re.pathnameBase).pathname:re.pathnameBase])})),y,n,a)}function X9(){let e=i7(),t=O1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},y=null;return console.error("Error handled by React Router default ErrorBoundary:",e),y=ee.createElement(ee.Fragment,null,ee.createElement("p",null," Hey developer "),ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ee.createElement("code",{style:f},"ErrorBoundary")," or"," ",ee.createElement("code",{style:f},"errorElement")," prop on your route.")),ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},t),n?ee.createElement("pre",{style:u},n):null,y)}var Z9=ee.createElement(X9,null),Y9=class extends ee.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ee.createElement(Nd.Provider,{value:this.props.routeContext},ee.createElement(YP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function K9({routeContext:e,match:t,children:n}){let a=ee.useContext(lv);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),ee.createElement(Nd.Provider,{value:e},n)}function J9(e,t=[],n=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,f=n==null?void 0:n.errors;if(f!=null){let S=u.findIndex(A=>A.route.id&&(f==null?void 0:f[A.route.id])!==void 0);ao(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,S+1))}let y=!1,r=-1;if(n)for(let S=0;S<u.length;S++){let A=u[S];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(r=S),A.route.id){let{loaderData:R,errors:O}=n,z=A.route.loader&&!R.hasOwnProperty(A.route.id)&&(!O||O[A.route.id]===void 0);if(A.route.lazy||z){y=!0,r>=0?u=u.slice(0,r+1):u=[u[0]];break}}}return u.reduceRight((S,A,R)=>{let O,z=!1,N=null,U=null;n&&(O=f&&A.route.id?f[A.route.id]:void 0,N=A.route.errorElement||Z9,y&&(r<0&&R===0?(G4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,U=null):r===R&&(z=!0,U=A.route.hydrateFallbackElement||null)));let H=t.concat(u.slice(0,R+1)),K=()=>{let W;return O?W=N:z?W=U:A.route.Component?W=ee.createElement(A.route.Component,null):A.route.element?W=A.route.element:W=S,ee.createElement(K9,{match:A,routeContext:{outlet:S,matches:H,isDataRoute:n!=null},children:W})};return n&&(A.route.ErrorBoundary||A.route.errorElement||R===0)?ee.createElement(Y9,{location:n.location,revalidation:n.revalidation,component:N,error:O,children:K(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):K()},null)}function KP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q9(e){let t=ee.useContext(lv);return ao(t,KP(e)),t}function e7(e){let t=ee.useContext(cw);return ao(t,KP(e)),t}function t7(e){let t=ee.useContext(Nd);return ao(t,KP(e)),t}function JP(e){let t=t7(e),n=t.matches[t.matches.length-1];return ao(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function n7(){return JP("useRouteId")}function i7(){var a;let e=ee.useContext(YP),t=e7("useRouteError"),n=JP("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[n]}function r7(){let{router:e}=Q9("useNavigate"),t=JP("useNavigate"),n=ee.useRef(!1);return H4(()=>{n.current=!0}),ee.useCallback(async(u,f={})=>{Vs(n.current,$4),n.current&&(typeof u=="number"?e.navigate(u):await e.navigate(u,{fromRouteId:t,...f}))},[e,t])}var Yz={};function G4(e,t,n){!t&&!Yz[e]&&(Yz[e]=!0,Vs(!1,n))}var Kz={};function Jz(e,t){!e&&!Kz[t]&&(Kz[t]=!0,console.warn(t))}function o7(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Vs(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:ee.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Vs(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:ee.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Vs(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:ee.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var s7=["HydrateFallback","hydrateFallbackElement"],a7=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function l7({router:e,flushSync:t}){let[n,a]=ee.useState(e.state),[u,f]=ee.useState(),[y,r]=ee.useState({isTransitioning:!1}),[S,A]=ee.useState(),[R,O]=ee.useState(),[z,N]=ee.useState(),U=ee.useRef(new Map),H=ee.useCallback((ne,{deletedFetchers:se,flushSync:ue,viewTransitionOpts:pe})=>{ne.fetchers.forEach((Le,qe)=>{Le.data!==void 0&&U.current.set(qe,Le.data)}),se.forEach(Le=>U.current.delete(Le)),Jz(ue===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Ce=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Jz(pe==null||Ce,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!pe||!Ce){t&&ue?t(()=>a(ne)):ee.startTransition(()=>a(ne));return}if(t&&ue){t(()=>{R&&(S&&S.resolve(),R.skipTransition()),r({isTransitioning:!0,flushSync:!0,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation})});let Le=e.window.document.startViewTransition(()=>{t(()=>a(ne))});Le.finished.finally(()=>{t(()=>{A(void 0),O(void 0),f(void 0),r({isTransitioning:!1})})}),t(()=>O(Le));return}R?(S&&S.resolve(),R.skipTransition(),N({state:ne,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation})):(f(ne),r({isTransitioning:!0,flushSync:!1,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation}))},[e.window,t,R,S]);ee.useLayoutEffect(()=>e.subscribe(H),[e,H]),ee.useEffect(()=>{y.isTransitioning&&!y.flushSync&&A(new a7)},[y]),ee.useEffect(()=>{if(S&&u&&e.window){let ne=u,se=S.promise,ue=e.window.document.startViewTransition(async()=>{ee.startTransition(()=>a(ne)),await se});ue.finished.finally(()=>{A(void 0),O(void 0),f(void 0),r({isTransitioning:!1})}),O(ue)}},[u,S,e.window]),ee.useEffect(()=>{S&&u&&n.location.key===u.location.key&&S.resolve()},[S,R,n.location,u]),ee.useEffect(()=>{!y.isTransitioning&&z&&(f(z.state),r({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}),N(void 0))},[y.isTransitioning,z]);let K=ee.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:ne=>e.navigate(ne),push:(ne,se,ue)=>e.navigate(ne,{state:se,preventScrollReset:ue==null?void 0:ue.preventScrollReset}),replace:(ne,se,ue)=>e.navigate(ne,{replace:!0,state:se,preventScrollReset:ue==null?void 0:ue.preventScrollReset})}),[e]),W=e.basename||"/",re=ee.useMemo(()=>({router:e,navigator:K,static:!1,basename:W}),[e,K,W]);return ee.createElement(ee.Fragment,null,ee.createElement(lv.Provider,{value:re},ee.createElement(cw.Provider,{value:n},ee.createElement(V4.Provider,{value:U.current},ee.createElement(ZP.Provider,{value:y},ee.createElement(d7,{basename:W,location:n.location,navigationType:n.historyAction,navigator:K},ee.createElement(c7,{routes:e.routes,future:e.future,state:n})))))),null)}var c7=ee.memo(u7);function u7({routes:e,future:t,state:n}){return W9(e,void 0,n,t)}function h7({to:e,replace:t,state:n,relative:a}){ao(dx(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=ee.useContext(Fd);Vs(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=ee.useContext(Nd),{pathname:y}=Ah(),r=Zg(),S=uC(e,cC(f),y,a==="path"),A=JSON.stringify(S);return ee.useEffect(()=>{r(JSON.parse(A),{replace:t,state:n,relative:a})},[r,A,a,t,n]),null}function q4(e){return q9(e.context)}function d7({basename:e="/",children:t=null,location:n,navigationType:a="POP",navigator:u,static:f=!1}){ao(!dx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=e.replace(/^\/*/,"/"),r=ee.useMemo(()=>({basename:y,navigator:u,static:f,future:{}}),[y,u,f]);typeof n=="string"&&(n=Xg(n));let{pathname:S="/",search:A="",hash:R="",state:O=null,key:z="default"}=n,N=ee.useMemo(()=>{let U=bh(S,y);return U==null?null:{location:{pathname:U,search:A,hash:R,state:O,key:z},navigationType:a}},[y,S,A,R,O,z,a]);return Vs(N!=null,`<Router basename="${y}"> is not able to match the URL "${S}${A}${R}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:ee.createElement(Fd.Provider,{value:r},ee.createElement(hC.Provider,{children:t,value:N}))}var ZT="get",YT="application/x-www-form-urlencoded";function dC(e){return e!=null&&typeof e.tagName=="string"}function f7(e){return dC(e)&&e.tagName.toLowerCase()==="button"}function p7(e){return dC(e)&&e.tagName.toLowerCase()==="form"}function m7(e){return dC(e)&&e.tagName.toLowerCase()==="input"}function g7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function y7(e,t){return e.button===0&&(!t||t==="_self")&&!g7(e)}var KS=null;function _7(){if(KS===null)try{new FormData(document.createElement("form"),0),KS=!1}catch{KS=!0}return KS}var v7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function CM(e){return e!=null&&!v7.has(e)?(Vs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${YT}"`),null):e}function x7(e,t){let n,a,u,f,y;if(p7(e)){let r=e.getAttribute("action");a=r?bh(r,t):null,n=e.getAttribute("method")||ZT,u=CM(e.getAttribute("enctype"))||YT,f=new FormData(e)}else if(f7(e)||m7(e)&&(e.type==="submit"||e.type==="image")){let r=e.form;if(r==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let S=e.getAttribute("formaction")||r.getAttribute("action");if(a=S?bh(S,t):null,n=e.getAttribute("formmethod")||r.getAttribute("method")||ZT,u=CM(e.getAttribute("formenctype"))||CM(r.getAttribute("enctype"))||YT,f=new FormData(r,e),!_7()){let{name:A,type:R,value:O}=e;if(R==="image"){let z=A?`${A}.`:"";f.append(`${z}x`,"0"),f.append(`${z}y`,"0")}else A&&f.append(A,O)}}else{if(dC(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ZT,a=null,u=YT,y=e}return f&&u==="text/plain"&&(y=f,f=void 0),{action:a,method:n.toLowerCase(),encType:u,formData:f,body:y}}function QP(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function b7(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function S7(e,t,n){let a=await Promise.all(e.map(async u=>{let f=t.routes[u.route.id];if(f){let y=await b7(f,n);return y.links?y.links():[]}return[]}));return A7(a.flat(1).filter(w7).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Qz(e,t,n,a,u,f){let y=(S,A)=>n[A]?S.route.id!==n[A].route.id:!0,r=(S,A)=>{var R;return n[A].pathname!==S.pathname||((R=n[A].route.path)==null?void 0:R.endsWith("*"))&&n[A].params["*"]!==S.params["*"]};return f==="assets"?t.filter((S,A)=>y(S,A)||r(S,A)):f==="data"?t.filter((S,A)=>{var O;let R=a.routes[S.route.id];if(!R||!R.hasLoader)return!1;if(y(S,A)||r(S,A))return!0;if(S.route.shouldRevalidate){let z=S.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((O=n[0])==null?void 0:O.params)||{},nextUrl:new URL(e,window.origin),nextParams:S.params,defaultShouldRevalidate:!0});if(typeof z=="boolean")return z}return!0}):[]}function T7(e,t,{includeHydrateFallback:n}={}){return E7(e.map(a=>{let u=t.routes[a.route.id];if(!u)return[];let f=[u.module];return u.clientActionModule&&(f=f.concat(u.clientActionModule)),u.clientLoaderModule&&(f=f.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(f=f.concat(u.hydrateFallbackModule)),u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function E7(e){return[...new Set(e)]}function C7(e){let t={},n=Object.keys(e).sort();for(let a of n)t[a]=e[a];return t}function A7(e,t){let n=new Set;return new Set(t),e.reduce((a,u)=>{let f=JSON.stringify(C7(u));return n.has(f)||(n.add(f),a.push({key:f,link:u})),a},[])}var M7=new Set([100,101,204,205]);function R7(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&bh(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function W4(){let e=ee.useContext(lv);return QP(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function I7(){let e=ee.useContext(cw);return QP(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var eD=ee.createContext(void 0);eD.displayName="FrameworkContext";function X4(){let e=ee.useContext(eD);return QP(e,"You must render this element inside a <HydratedRouter> element"),e}function P7(e,t){let n=ee.useContext(eD),[a,u]=ee.useState(!1),[f,y]=ee.useState(!1),{onFocus:r,onBlur:S,onMouseEnter:A,onMouseLeave:R,onTouchStart:O}=t,z=ee.useRef(null);ee.useEffect(()=>{if(e==="render"&&y(!0),e==="viewport"){let H=W=>{W.forEach(re=>{y(re.isIntersecting)})},K=new IntersectionObserver(H,{threshold:.5});return z.current&&K.observe(z.current),()=>{K.disconnect()}}},[e]),ee.useEffect(()=>{if(a){let H=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(H)}}},[a]);let N=()=>{u(!0)},U=()=>{u(!1),y(!1)};return n?e!=="intent"?[f,z,{}]:[f,z,{onFocus:Vb(r,N),onBlur:Vb(S,U),onMouseEnter:Vb(A,N),onMouseLeave:Vb(R,U),onTouchStart:Vb(O,N)}]:[!1,z,{}]}function Vb(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function D7({page:e,...t}){let{router:n}=W4(),a=ee.useMemo(()=>Ig(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?ee.createElement(L7,{page:e,matches:a,...t}):null}function O7(e){let{manifest:t,routeModules:n}=X4(),[a,u]=ee.useState([]);return ee.useEffect(()=>{let f=!1;return S7(e,t,n).then(y=>{f||u(y)}),()=>{f=!0}},[e,t,n]),a}function L7({page:e,matches:t,...n}){let a=Ah(),{manifest:u,routeModules:f}=X4(),{basename:y}=W4(),{loaderData:r,matches:S}=I7(),A=ee.useMemo(()=>Qz(e,t,S,u,a,"data"),[e,t,S,u,a]),R=ee.useMemo(()=>Qz(e,t,S,u,a,"assets"),[e,t,S,u,a]),O=ee.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let U=new Set,H=!1;if(t.forEach(W=>{var ne;let re=u.routes[W.route.id];!re||!re.hasLoader||(!A.some(se=>se.route.id===W.route.id)&&W.route.id in r&&((ne=f[W.route.id])!=null&&ne.shouldRevalidate)||re.hasClientLoader?H=!0:U.add(W.route.id))}),U.size===0)return[];let K=R7(e,y);return H&&U.size>0&&K.searchParams.set("_routes",t.filter(W=>U.has(W.route.id)).map(W=>W.route.id).join(",")),[K.pathname+K.search]},[y,r,a,u,A,t,e,f]),z=ee.useMemo(()=>T7(R,u),[R,u]),N=O7(R);return ee.createElement(ee.Fragment,null,O.map(U=>ee.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),z.map(U=>ee.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),N.map(({key:U,link:H})=>ee.createElement("link",{key:U,...H})))}function k7(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Z4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z4&&(window.__reactRouterVersion="7.5.3")}catch{}function z7(e,t){return S9({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:Hq({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||B7(),routes:e,mapRouteProperties:o7,hydrationRouteProperties:s7,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function B7(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:F7(e.errors)}),e}function F7(e){if(!e)return null;let t=Object.entries(e),n={};for(let[a,u]of t)if(u&&u.__type==="RouteErrorResponse")n[a]=new wE(u.status,u.statusText,u.data,u.internal===!0);else if(u&&u.__type==="Error"){if(u.__subType){let f=window[u.__subType];if(typeof f=="function")try{let y=new f(u.message);y.stack="",n[a]=y}catch{}}if(n[a]==null){let f=new Error(u.message);f.stack="",n[a]=f}}else n[a]=u;return n}var Y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pg=ee.forwardRef(function({onClick:t,discover:n="render",prefetch:a="none",relative:u,reloadDocument:f,replace:y,state:r,target:S,to:A,preventScrollReset:R,viewTransition:O,...z},N){let{basename:U}=ee.useContext(Fd),H=typeof A=="string"&&Y4.test(A),K,W=!1;if(typeof A=="string"&&H&&(K=A,Z4))try{let qe=new URL(window.location.href),ye=A.startsWith("//")?new URL(qe.protocol+A):new URL(A),Xe=bh(ye.pathname,U);ye.origin===qe.origin&&Xe!=null?A=Xe+ye.search+ye.hash:W=!0}catch{Vs(!1,`<Link to="${A}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=$9(A,{relative:u}),[ne,se,ue]=P7(a,z),pe=V7(A,{replace:y,state:r,target:S,preventScrollReset:R,relative:u,viewTransition:O});function Ce(qe){t&&t(qe),qe.defaultPrevented||pe(qe)}let Le=ee.createElement("a",{...z,...ue,href:K||re,onClick:W||f?t:Ce,ref:k7(N,se),target:S,"data-discover":!H&&n==="render"?"true":void 0});return ne&&!H?ee.createElement(ee.Fragment,null,Le,ee.createElement(D7,{page:re})):Le});Pg.displayName="Link";var N7=ee.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:a="",end:u=!1,style:f,to:y,viewTransition:r,children:S,...A},R){let O=uw(y,{relative:A.relative}),z=Ah(),N=ee.useContext(cw),{navigator:U,basename:H}=ee.useContext(Fd),K=N!=null&&W7(O)&&r===!0,W=U.encodeLocation?U.encodeLocation(O).pathname:O.pathname,re=z.pathname,ne=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(re=re.toLowerCase(),ne=ne?ne.toLowerCase():null,W=W.toLowerCase()),ne&&H&&(ne=bh(ne,H)||ne);const se=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let ue=re===W||!u&&re.startsWith(W)&&re.charAt(se)==="/",pe=ne!=null&&(ne===W||!u&&ne.startsWith(W)&&ne.charAt(W.length)==="/"),Ce={isActive:ue,isPending:pe,isTransitioning:K},Le=ue?t:void 0,qe;typeof a=="function"?qe=a(Ce):qe=[a,ue?"active":null,pe?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let ye=typeof f=="function"?f(Ce):f;return ee.createElement(Pg,{...A,"aria-current":Le,className:qe,ref:R,style:ye,to:y,viewTransition:r},typeof S=="function"?S(Ce):S)});N7.displayName="NavLink";var j7=ee.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:a,replace:u,state:f,method:y=ZT,action:r,onSubmit:S,relative:A,preventScrollReset:R,viewTransition:O,...z},N)=>{let U=G7(),H=q7(r,{relative:A}),K=y.toLowerCase()==="get"?"get":"post",W=typeof r=="string"&&Y4.test(r),re=ne=>{if(S&&S(ne),ne.defaultPrevented)return;ne.preventDefault();let se=ne.nativeEvent.submitter,ue=(se==null?void 0:se.getAttribute("formmethod"))||y;U(se||ne.currentTarget,{fetcherKey:t,method:ue,navigate:n,replace:u,state:f,relative:A,preventScrollReset:R,viewTransition:O})};return ee.createElement("form",{ref:N,method:K,action:H,onSubmit:a?S:re,...z,"data-discover":!W&&e==="render"?"true":void 0})});j7.displayName="Form";function U7(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K4(e){let t=ee.useContext(lv);return ao(t,U7(e)),t}function V7(e,{target:t,replace:n,state:a,preventScrollReset:u,relative:f,viewTransition:y}={}){let r=Zg(),S=Ah(),A=uw(e,{relative:f});return ee.useCallback(R=>{if(y7(R,t)){R.preventDefault();let O=n!==void 0?n:Ng(S)===Ng(A);r(e,{replace:O,state:a,preventScrollReset:u,relative:f,viewTransition:y})}},[S,r,A,n,a,t,e,u,f,y])}var $7=0,H7=()=>`__${String(++$7)}__`;function G7(){let{router:e}=K4("useSubmit"),{basename:t}=ee.useContext(Fd),n=n7();return ee.useCallback(async(a,u={})=>{let{action:f,method:y,encType:r,formData:S,body:A}=x7(a,t);if(u.navigate===!1){let R=u.fetcherKey||H7();await e.fetch(R,n,u.action||f,{preventScrollReset:u.preventScrollReset,formData:S,body:A,formMethod:u.method||y,formEncType:u.encType||r,flushSync:u.flushSync})}else await e.navigate(u.action||f,{preventScrollReset:u.preventScrollReset,formData:S,body:A,formMethod:u.method||y,formEncType:u.encType||r,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[e,t,n])}function q7(e,{relative:t}={}){let{basename:n}=ee.useContext(Fd),a=ee.useContext(Nd);ao(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),f={...uw(e||".",{relative:t})},y=Ah();if(e==null){f.search=y.search;let r=new URLSearchParams(f.search),S=r.getAll("index");if(S.some(R=>R==="")){r.delete("index"),S.filter(O=>O).forEach(O=>r.append("index",O));let R=r.toString();f.search=R?`?${R}`:""}}return(!e||e===".")&&u.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(f.pathname=f.pathname==="/"?n:Nf([n,f.pathname])),Ng(f)}function W7(e,t={}){let n=ee.useContext(ZP);ao(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=K4("useViewTransitionState"),u=uw(e,{relative:t.relative});if(!n.isTransitioning)return!1;let f=bh(n.currentLocation.pathname,a)||n.currentLocation.pathname,y=bh(n.nextLocation.pathname,a)||n.nextLocation.pathname;return _m(u.pathname,y)!=null||_m(u.pathname,f)!=null}new TextEncoder;[...M7];var fC=A4();const JS=Im(fC);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X7(e){return ee.createElement(l7,{flushSync:fC.flushSync,...e})}const Z7="modulepreload",Y7=function(e,t){return new URL(e,t).href},e3={},cv=function(t,n,a){let u=Promise.resolve();if(n&&n.length>0){let y=function(R){return Promise.all(R.map(O=>Promise.resolve(O).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};const r=document.getElementsByTagName("link"),S=document.querySelector("meta[property=csp-nonce]"),A=(S==null?void 0:S.nonce)||(S==null?void 0:S.getAttribute("nonce"));u=y(n.map(R=>{if(R=Y7(R,a),R in e3)return;e3[R]=!0;const O=R.endsWith(".css"),z=O?'[rel="stylesheet"]':"";if(!!a)for(let H=r.length-1;H>=0;H--){const K=r[H];if(K.href===R&&(!O||K.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${R}"]${z}`))return;const U=document.createElement("link");if(U.rel=O?"stylesheet":Z7,O||(U.as="script"),U.crossOrigin="",U.href=R,A&&U.setAttribute("nonce",A),document.head.appendChild(U),O)return new Promise((H,K)=>{U.addEventListener("load",H),U.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${R}`)))})}))}function f(y){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=y,window.dispatchEvent(r),!r.defaultPrevented)throw y}return u.then(y=>{for(const r of y||[])r.status==="rejected"&&f(r.reason);return t().catch(f)})};var AM={exports:{}},MM,t3;function K7(){if(t3)return MM;t3=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return MM=e,MM}var RM,n3;function J7(){if(n3)return RM;n3=1;var e=K7();function t(){}function n(){}return n.resetWarningCache=t,RM=function(){function a(y,r,S,A,R,O){if(O!==e){var z=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw z.name="Invariant Violation",z}}a.isRequired=a;function u(){return a}var f={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:u,element:a,elementType:a,instanceOf:u,node:a,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:n,resetWarningCache:t};return f.PropTypes=f,f},RM}var i3;function J4(){return i3||(i3=1,AM.exports=J7()()),AM.exports}var Q7=J4();const Ui=Im(Q7);function Q4(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=Q4(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function si(){for(var e,t,n=0,a="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=Q4(e))&&(a&&(a+=" "),a+=t);return a}function er(e,t,n=void 0){const a={};for(const u in e){const f=e[u];let y="",r=!0;for(let S=0;S<f.length;S+=1){const A=f[S];A&&(y+=(r===!0?"":" ")+t(A),r=!1,n&&n[A]&&(y+=" "+n[A]))}a[u]=y}return a}function Sm(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(a=>n.searchParams.append("args[]",a)),`Minified MUI error #${e}; visit ${n} for the full message.`}function eW(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function tD(e,t=0,n=1){return eW(e,t,n)}function tW(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,u)=>u<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function jg(e){if(e.type)return e;if(e.charAt(0)==="#")return jg(tW(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Sm(9,e));let a=e.substring(t+1,e.length-1),u;if(n==="color"){if(a=a.split(" "),u=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(u))throw new Error(Sm(10,u))}else a=a.split(",");return a=a.map(f=>parseFloat(f)),{type:n,values:a,colorSpace:u}}const nW=e=>{const t=jg(e);return t.values.slice(0,3).map((n,a)=>t.type.includes("hsl")&&a!==0?`${n}%`:n).join(" ")},l1=(e,t)=>{try{return nW(e)}catch{return e}};function pC(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.includes("rgb")?a=a.map((u,f)=>f<3?parseInt(u,10):u):t.includes("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.includes("color")?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function ej(e){e=jg(e);const{values:t}=e,n=t[0],a=t[1]/100,u=t[2]/100,f=a*Math.min(u,1-u),y=(A,R=(A+n/30)%12)=>u-f*Math.max(Math.min(R-3,9-R,1),-1);let r="rgb";const S=[Math.round(y(0)*255),Math.round(y(8)*255),Math.round(y(4)*255)];return e.type==="hsla"&&(r+="a",S.push(t[3])),pC({type:r,values:S})}function hI(e){e=jg(e);let t=e.type==="hsl"||e.type==="hsla"?jg(ej(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function iW(e,t){const n=hI(e),a=hI(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function Dr(e,t){return e=jg(e),t=tD(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,pC(e)}function QS(e,t,n){try{return Dr(e,t)}catch{return e}}function mC(e,t){if(e=jg(e),t=tD(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return pC(e)}function Wo(e,t,n){try{return mC(e,t)}catch{return e}}function gC(e,t){if(e=jg(e),t=tD(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return pC(e)}function Xo(e,t,n){try{return gC(e,t)}catch{return e}}function dI(e,t=.15){return hI(e)>.5?mC(e,t):gC(e,t)}function eT(e,t,n){try{return dI(e,t)}catch{return e}}const tj=ee.createContext();function rW({value:e,...t}){return te.jsx(tj.Provider,{value:e??!0,...t})}const uv=()=>ee.useContext(tj)??!1;function Bn(e){if(typeof e!="string")throw new Error(Sm(7));return e.charAt(0).toUpperCase()+e.slice(1)}var IM={exports:{}},$o={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3;function oW(){if(r3)return $o;r3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),y=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.view_transition"),N=Symbol.for("react.client.reference");function U(H){if(typeof H=="object"&&H!==null){var K=H.$$typeof;switch(K){case e:switch(H=H.type,H){case n:case u:case a:case S:case A:case z:return H;default:switch(H=H&&H.$$typeof,H){case y:case r:case O:case R:return H;case f:return H;default:return K}}case t:return K}}}return $o.ContextConsumer=f,$o.ContextProvider=y,$o.Element=e,$o.ForwardRef=r,$o.Fragment=n,$o.Lazy=O,$o.Memo=R,$o.Portal=t,$o.Profiler=u,$o.StrictMode=a,$o.Suspense=S,$o.SuspenseList=A,$o.isContextConsumer=function(H){return U(H)===f},$o.isContextProvider=function(H){return U(H)===y},$o.isElement=function(H){return typeof H=="object"&&H!==null&&H.$$typeof===e},$o.isForwardRef=function(H){return U(H)===r},$o.isFragment=function(H){return U(H)===n},$o.isLazy=function(H){return U(H)===O},$o.isMemo=function(H){return U(H)===R},$o.isPortal=function(H){return U(H)===t},$o.isProfiler=function(H){return U(H)===u},$o.isStrictMode=function(H){return U(H)===a},$o.isSuspense=function(H){return U(H)===S},$o.isSuspenseList=function(H){return U(H)===A},$o.isValidElementType=function(H){return typeof H=="string"||typeof H=="function"||H===n||H===u||H===a||H===S||H===A||typeof H=="object"&&H!==null&&(H.$$typeof===O||H.$$typeof===R||H.$$typeof===y||H.$$typeof===f||H.$$typeof===r||H.$$typeof===N||H.getModuleId!==void 0)},$o.typeOf=U,$o}var o3;function sW(){return o3||(o3=1,IM.exports=oW()),IM.exports}var nj=sW();function zf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ij(e){if(ee.isValidElement(e)||nj.isValidElementType(e)||!zf(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=ij(e[n])}),t}function Va(e,t,n={clone:!0}){const a=n.clone?{...e}:e;return zf(e)&&zf(t)&&Object.keys(t).forEach(u=>{ee.isValidElement(t[u])||nj.isValidElementType(t[u])?a[u]=t[u]:zf(t[u])&&Object.prototype.hasOwnProperty.call(e,u)&&zf(e[u])?a[u]=Va(e[u],t[u],n):n.clone?a[u]=zf(t[u])?ij(t[u]):t[u]:a[u]=t[u]}),a}function p1(e,t){return t?Va(e,t,{clone:!1}):e}function aW(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(a=>a.startsWith("@container")).sort((a,u)=>{var y,r;const f=/min-width:\s*([0-9.]+)/;return+(((y=a.match(f))==null?void 0:y[1])||0)-+(((r=u.match(f))==null?void 0:r[1])||0)});return n.length?n.reduce((a,u)=>{const f=t[u];return delete a[u],a[u]=f,a},{...t}):t}function lW(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function cW(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,a,u]=n,f=Number.isNaN(+a)?a||0:+a;return e.containerQueries(u).up(f)}function uW(e){const t=(f,y)=>f.replace("@media",y?`@container ${y}`:"@container");function n(f,y){f.up=(...r)=>t(e.breakpoints.up(...r),y),f.down=(...r)=>t(e.breakpoints.down(...r),y),f.between=(...r)=>t(e.breakpoints.between(...r),y),f.only=(...r)=>t(e.breakpoints.only(...r),y),f.not=(...r)=>{const S=t(e.breakpoints.not(...r),y);return S.includes("not all and")?S.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):S}}const a={},u=f=>(n(a,f),a);return n(u),{...e,containerQueries:u}}const yC={xs:0,sm:600,md:900,lg:1200,xl:1536},s3={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${yC[e]}px)`},hW={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:yC[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function kd(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const f=a.breakpoints||s3;return t.reduce((y,r,S)=>(y[f.up(f.keys[S])]=n(t[S]),y),{})}if(typeof t=="object"){const f=a.breakpoints||s3;return Object.keys(t).reduce((y,r)=>{if(lW(f.keys,r)){const S=cW(a.containerQueries?a:hW,r);S&&(y[S]=n(t[r],r))}else if(Object.keys(f.values||yC).includes(r)){const S=f.up(r);y[S]=n(t[r],r)}else{const S=r;y[S]=t[S]}return y},{})}return n(t)}function rj(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((a,u)=>{const f=e.up(u);return a[f]={},a},{}))||{}}function oj(e,t){return e.reduce((n,a)=>{const u=n[a];return(!u||Object.keys(u).length===0)&&delete n[a],n},t)}function dW(e,...t){const n=rj(e),a=[n,...t].reduce((u,f)=>Va(u,f),{});return oj(Object.keys(n),a)}function fW(e,t){if(typeof e!="object")return{};const n={},a=Object.keys(t);return Array.isArray(e)?a.forEach((u,f)=>{f<e.length&&(n[u]=!0)}):a.forEach(u=>{e[u]!=null&&(n[u]=!0)}),n}function PM({values:e,breakpoints:t,base:n}){const a=n||fW(e,t),u=Object.keys(a);if(u.length===0)return e;let f;return u.reduce((y,r,S)=>(Array.isArray(e)?(y[r]=e[S]!=null?e[S]:e[f],f=S):typeof e=="object"?(y[r]=e[r]!=null?e[r]:e[f],f=r):y[r]=e,y),{})}function Dg(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((u,f)=>u&&u[f]?u[f]:null,e);if(a!=null)return a}return t.split(".").reduce((a,u)=>a&&a[u]!=null?a[u]:null,e)}function TE(e,t,n,a=n){let u;return typeof e=="function"?u=e(n):Array.isArray(e)?u=e[n]||a:u=Dg(e,n)||a,t&&(u=t(u,a,e)),u}function Gs(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:u}=e,f=y=>{if(y[t]==null)return null;const r=y[t],S=y.theme,A=Dg(S,a)||{};return kd(y,r,O=>{let z=TE(A,u,O);return O===z&&typeof O=="string"&&(z=TE(A,u,`${t}${O==="default"?"":Bn(O)}`,O)),n===!1?z:{[n]:z}})};return f.propTypes={},f.filterProps=[t],f}function pW(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const mW={m:"margin",p:"padding"},gW={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},a3={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},yW=pW(e=>{if(e.length>2)if(a3[e])e=a3[e];else return[e];const[t,n]=e.split(""),a=mW[t],u=gW[n]||"";return Array.isArray(u)?u.map(f=>a+f):[a+u]}),nD=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],iD=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nD,...iD];function hw(e,t,n,a){const u=Dg(e,t,!0)??n;return typeof u=="number"||typeof u=="string"?f=>typeof f=="string"?f:typeof u=="string"?u.startsWith("var(")&&f===0?0:u.startsWith("var(")&&f===1?u:`calc(${f} * ${u})`:u*f:Array.isArray(u)?f=>{if(typeof f=="string")return f;const y=Math.abs(f),r=u[y];return f>=0?r:typeof r=="number"?-r:typeof r=="string"&&r.startsWith("var(")?`calc(-1 * ${r})`:`-${r}`}:typeof u=="function"?u:()=>{}}function _C(e){return hw(e,"spacing",8)}function Z_(e,t){return typeof t=="string"||t==null?t:e(t)}function _W(e,t){return n=>e.reduce((a,u)=>(a[u]=Z_(t,n),a),{})}function vW(e,t,n,a){if(!t.includes(n))return null;const u=yW(n),f=_W(u,a),y=e[n];return kd(e,y,f)}function sj(e,t){const n=_C(e.theme);return Object.keys(e).map(a=>vW(e,t,a,n)).reduce(p1,{})}function Ms(e){return sj(e,nD)}Ms.propTypes={};Ms.filterProps=nD;function Rs(e){return sj(e,iD)}Rs.propTypes={};Rs.filterProps=iD;function vC(...e){const t=e.reduce((a,u)=>(u.filterProps.forEach(f=>{a[f]=u}),a),{}),n=a=>Object.keys(a).reduce((u,f)=>t[f]?p1(u,t[f](a)):u,{});return n.propTypes={},n.filterProps=e.reduce((a,u)=>a.concat(u.filterProps),[]),n}function yh(e){return typeof e!="number"?e:`${e}px solid`}function Mh(e,t){return Gs({prop:e,themeKey:"borders",transform:t})}const xW=Mh("border",yh),bW=Mh("borderTop",yh),wW=Mh("borderRight",yh),SW=Mh("borderBottom",yh),TW=Mh("borderLeft",yh),EW=Mh("borderColor"),CW=Mh("borderTopColor"),AW=Mh("borderRightColor"),MW=Mh("borderBottomColor"),RW=Mh("borderLeftColor"),IW=Mh("outline",yh),PW=Mh("outlineColor"),xC=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=hw(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:Z_(t,a)});return kd(e,e.borderRadius,n)}return null};xC.propTypes={};xC.filterProps=["borderRadius"];vC(xW,bW,wW,SW,TW,EW,CW,AW,MW,RW,xC,IW,PW);const bC=e=>{if(e.gap!==void 0&&e.gap!==null){const t=hw(e.theme,"spacing",8),n=a=>({gap:Z_(t,a)});return kd(e,e.gap,n)}return null};bC.propTypes={};bC.filterProps=["gap"];const wC=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=hw(e.theme,"spacing",8),n=a=>({columnGap:Z_(t,a)});return kd(e,e.columnGap,n)}return null};wC.propTypes={};wC.filterProps=["columnGap"];const SC=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=hw(e.theme,"spacing",8),n=a=>({rowGap:Z_(t,a)});return kd(e,e.rowGap,n)}return null};SC.propTypes={};SC.filterProps=["rowGap"];const DW=Gs({prop:"gridColumn"}),OW=Gs({prop:"gridRow"}),LW=Gs({prop:"gridAutoFlow"}),kW=Gs({prop:"gridAutoColumns"}),zW=Gs({prop:"gridAutoRows"}),BW=Gs({prop:"gridTemplateColumns"}),FW=Gs({prop:"gridTemplateRows"}),NW=Gs({prop:"gridTemplateAreas"}),jW=Gs({prop:"gridArea"});vC(bC,wC,SC,DW,OW,LW,kW,zW,BW,FW,NW,jW);function Y0(e,t){return t==="grey"?t:e}const UW=Gs({prop:"color",themeKey:"palette",transform:Y0}),VW=Gs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Y0}),$W=Gs({prop:"backgroundColor",themeKey:"palette",transform:Y0});vC(UW,VW,$W);function mu(e){return e<=1&&e!==0?`${e*100}%`:e}const HW=Gs({prop:"width",transform:mu}),rD=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var u,f,y,r,S;const a=((y=(f=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:f.values)==null?void 0:y[n])||yC[n];return a?((S=(r=e.theme)==null?void 0:r.breakpoints)==null?void 0:S.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:mu(n)}};return kd(e,e.maxWidth,t)}return null};rD.filterProps=["maxWidth"];const GW=Gs({prop:"minWidth",transform:mu}),qW=Gs({prop:"height",transform:mu}),WW=Gs({prop:"maxHeight",transform:mu}),XW=Gs({prop:"minHeight",transform:mu});Gs({prop:"size",cssProperty:"width",transform:mu});Gs({prop:"size",cssProperty:"height",transform:mu});const ZW=Gs({prop:"boxSizing"});vC(HW,rD,GW,qW,WW,XW,ZW);const dw={border:{themeKey:"borders",transform:yh},borderTop:{themeKey:"borders",transform:yh},borderRight:{themeKey:"borders",transform:yh},borderBottom:{themeKey:"borders",transform:yh},borderLeft:{themeKey:"borders",transform:yh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:yh},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xC},color:{themeKey:"palette",transform:Y0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Y0},backgroundColor:{themeKey:"palette",transform:Y0},p:{style:Rs},pt:{style:Rs},pr:{style:Rs},pb:{style:Rs},pl:{style:Rs},px:{style:Rs},py:{style:Rs},padding:{style:Rs},paddingTop:{style:Rs},paddingRight:{style:Rs},paddingBottom:{style:Rs},paddingLeft:{style:Rs},paddingX:{style:Rs},paddingY:{style:Rs},paddingInline:{style:Rs},paddingInlineStart:{style:Rs},paddingInlineEnd:{style:Rs},paddingBlock:{style:Rs},paddingBlockStart:{style:Rs},paddingBlockEnd:{style:Rs},m:{style:Ms},mt:{style:Ms},mr:{style:Ms},mb:{style:Ms},ml:{style:Ms},mx:{style:Ms},my:{style:Ms},margin:{style:Ms},marginTop:{style:Ms},marginRight:{style:Ms},marginBottom:{style:Ms},marginLeft:{style:Ms},marginX:{style:Ms},marginY:{style:Ms},marginInline:{style:Ms},marginInlineStart:{style:Ms},marginInlineEnd:{style:Ms},marginBlock:{style:Ms},marginBlockStart:{style:Ms},marginBlockEnd:{style:Ms},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:bC},rowGap:{style:SC},columnGap:{style:wC},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:mu},maxWidth:{style:rD},minWidth:{transform:mu},height:{transform:mu},maxHeight:{transform:mu},minHeight:{transform:mu},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function YW(...e){const t=e.reduce((a,u)=>a.concat(Object.keys(u)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function KW(e,t){return typeof e=="function"?e(t):e}function JW(){function e(n,a,u,f){const y={[n]:a,theme:u},r=f[n];if(!r)return{[n]:a};const{cssProperty:S=n,themeKey:A,transform:R,style:O}=r;if(a==null)return null;if(A==="typography"&&a==="inherit")return{[n]:a};const z=Dg(u,A)||{};return O?O(y):kd(y,a,U=>{let H=TE(z,R,U);return U===H&&typeof U=="string"&&(H=TE(z,R,`${n}${U==="default"?"":Bn(U)}`,U)),S===!1?H:{[S]:H}})}function t(n){const{sx:a,theme:u={}}=n||{};if(!a)return null;const f=u.unstable_sxConfig??dw;function y(r){let S=r;if(typeof r=="function")S=r(u);else if(typeof r!="object")return r;if(!S)return null;const A=rj(u.breakpoints),R=Object.keys(A);let O=A;return Object.keys(S).forEach(z=>{const N=KW(S[z],u);if(N!=null)if(typeof N=="object")if(f[z])O=p1(O,e(z,N,u,f));else{const U=kd({theme:u},N,H=>({[z]:H}));YW(U,N)?O[z]=t({sx:N,theme:u}):O=p1(O,U)}else O=p1(O,e(z,N,u,f))}),aW(u,oj(R,O))}return Array.isArray(a)?a.map(y):y(a)}return t}const Ug=JW();Ug.filterProps=["sx"];const QW=e=>{var a;const t={systemProps:{},otherProps:{}},n=((a=e==null?void 0:e.theme)==null?void 0:a.unstable_sxConfig)??dw;return Object.keys(e).forEach(u=>{n[u]?t.systemProps[u]=e[u]:t.otherProps[u]=e[u]}),t};function TC(e){const{sx:t,...n}=e,{systemProps:a,otherProps:u}=QW(n);let f;return Array.isArray(t)?f=[a,...t]:typeof t=="function"?f=(...y)=>{const r=t(...y);return zf(r)?{...a,...r}:a}:f={...a,...t},{...u,sx:f}}function EE(){return EE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},EE.apply(null,arguments)}function e2(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function t2(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var aj=function(){function e(n){var a=this;this._insertTag=function(u){var f;a.tags.length===0?a.insertionPoint?f=a.insertionPoint.nextSibling:a.prepend?f=a.container.firstChild:f=a.before:f=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(u,f),a.tags.push(u)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(t2(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var f=e2(u);try{f.insertRule(a,f.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var u;return(u=a.parentNode)==null?void 0:u.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Il="-ms-",CE="-moz-",Ro="-webkit-",lj="comm",oD="rule",sD="decl",n2="@import",cj="@keyframes",i2="@layer",r2=Math.abs,EC=String.fromCharCode,o2=Object.assign;function s2(e,t){return ol(e,0)^45?(((t<<2^ol(e,0))<<2^ol(e,1))<<2^ol(e,2))<<2^ol(e,3):0}function uj(e){return e.trim()}function a2(e,t){return(e=t.exec(e))?e[0]:e}function Io(e,t,n){return e.replace(t,n)}function fI(e,t){return e.indexOf(t)}function ol(e,t){return e.charCodeAt(t)|0}function L1(e,t,n){return e.slice(t,n)}function Lf(e){return e.length}function aD(e){return e.length}function tT(e,t){return t.push(e),e}function l2(e,t){return e.map(t).join("")}var CC=1,Q0=1,hj=0,Oc=0,aa=0,fx="";function AC(e,t,n,a,u,f,y){return{value:e,root:t,parent:n,type:a,props:u,children:f,line:CC,column:Q0,length:y,return:""}}function $b(e,t){return o2(AC("",null,null,"",null,null,0),e,{length:-e.length},t)}function c2(){return aa}function u2(){return aa=Oc>0?ol(fx,--Oc):0,Q0--,aa===10&&(Q0=1,CC--),aa}function yu(){return aa=Oc<hj?ol(fx,Oc++):0,Q0++,aa===10&&(Q0=1,CC++),aa}function jf(){return ol(fx,Oc)}function KT(){return Oc}function fw(e,t){return L1(fx,e,t)}function k1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dj(e){return CC=Q0=1,hj=Lf(fx=e),Oc=0,[]}function fj(e){return fx="",e}function JT(e){return uj(fw(Oc-1,pI(e===91?e+2:e===40?e+1:e)))}function h2(e){for(;(aa=jf())&&aa<33;)yu();return k1(e)>2||k1(aa)>3?"":" "}function d2(e,t){for(;--t&&yu()&&!(aa<48||aa>102||aa>57&&aa<65||aa>70&&aa<97););return fw(e,KT()+(t<6&&jf()==32&&yu()==32))}function pI(e){for(;yu();)switch(aa){case e:return Oc;case 34:case 39:e!==34&&e!==39&&pI(aa);break;case 40:e===41&&pI(e);break;case 92:yu();break}return Oc}function f2(e,t){for(;yu()&&e+aa!==57;)if(e+aa===84&&jf()===47)break;return"/*"+fw(t,Oc-1)+"*"+EC(e===47?e:yu())}function p2(e){for(;!k1(jf());)yu();return fw(e,Oc)}function m2(e){return fj(QT("",null,null,null,[""],e=dj(e),0,[0],e))}function QT(e,t,n,a,u,f,y,r,S){for(var A=0,R=0,O=y,z=0,N=0,U=0,H=1,K=1,W=1,re=0,ne="",se=u,ue=f,pe=a,Ce=ne;K;)switch(U=re,re=yu()){case 40:if(U!=108&&ol(Ce,O-1)==58){fI(Ce+=Io(JT(re),"&","&\f"),"&\f")!=-1&&(W=-1);break}case 34:case 39:case 91:Ce+=JT(re);break;case 9:case 10:case 13:case 32:Ce+=h2(U);break;case 92:Ce+=d2(KT()-1,7);continue;case 47:switch(jf()){case 42:case 47:tT(g2(f2(yu(),KT()),t,n),S);break;default:Ce+="/"}break;case 123*H:r[A++]=Lf(Ce)*W;case 125*H:case 59:case 0:switch(re){case 0:case 125:K=0;case 59+R:W==-1&&(Ce=Io(Ce,/\f/g,"")),N>0&&Lf(Ce)-O&&tT(N>32?c3(Ce+";",a,n,O-1):c3(Io(Ce," ","")+";",a,n,O-2),S);break;case 59:Ce+=";";default:if(tT(pe=l3(Ce,t,n,A,R,u,r,ne,se=[],ue=[],O),f),re===123)if(R===0)QT(Ce,t,pe,pe,se,f,O,r,ue);else switch(z===99&&ol(Ce,3)===110?100:z){case 100:case 108:case 109:case 115:QT(e,pe,pe,a&&tT(l3(e,pe,pe,0,0,u,r,ne,u,se=[],O),ue),u,ue,O,r,a?se:ue);break;default:QT(Ce,pe,pe,pe,[""],ue,0,r,ue)}}A=R=N=0,H=W=1,ne=Ce="",O=y;break;case 58:O=1+Lf(Ce),N=U;default:if(H<1){if(re==123)--H;else if(re==125&&H++==0&&u2()==125)continue}switch(Ce+=EC(re),re*H){case 38:W=R>0?1:(Ce+="\f",-1);break;case 44:r[A++]=(Lf(Ce)-1)*W,W=1;break;case 64:jf()===45&&(Ce+=JT(yu())),z=jf(),R=O=Lf(ne=Ce+=p2(KT())),re++;break;case 45:U===45&&Lf(Ce)==2&&(H=0)}}return f}function l3(e,t,n,a,u,f,y,r,S,A,R){for(var O=u-1,z=u===0?f:[""],N=aD(z),U=0,H=0,K=0;U<a;++U)for(var W=0,re=L1(e,O+1,O=r2(H=y[U])),ne=e;W<N;++W)(ne=uj(H>0?z[W]+" "+re:Io(re,/&\f/g,z[W])))&&(S[K++]=ne);return AC(e,t,n,u===0?oD:r,S,A,R)}function g2(e,t,n){return AC(e,t,n,lj,EC(c2()),L1(e,2,-2),0)}function c3(e,t,n,a){return AC(e,t,n,sD,L1(e,0,a),L1(e,a+1,-1),a)}function K0(e,t){for(var n="",a=aD(e),u=0;u<a;u++)n+=t(e[u],u,e,t)||"";return n}function y2(e,t,n,a){switch(e.type){case i2:if(e.children.length)break;case n2:case sD:return e.return=e.return||e.value;case lj:return"";case cj:return e.return=e.value+"{"+K0(e.children,a)+"}";case oD:e.value=e.props.join(",")}return Lf(n=K0(e.children,a))?e.return=e.value+"{"+n+"}":""}function _2(e){var t=aD(e);return function(n,a,u,f){for(var y="",r=0;r<t;r++)y+=e[r](n,a,u,f)||"";return y}}function v2(e){return function(t){t.root||(t=t.return)&&e(t)}}function pj(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var x2=function(t,n,a){for(var u=0,f=0;u=f,f=jf(),u===38&&f===12&&(n[a]=1),!k1(f);)yu();return fw(t,Oc)},b2=function(t,n){var a=-1,u=44;do switch(k1(u)){case 0:u===38&&jf()===12&&(n[a]=1),t[a]+=x2(Oc-1,n,a);break;case 2:t[a]+=JT(u);break;case 4:if(u===44){t[++a]=jf()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=EC(u)}while(u=yu());return t},w2=function(t,n){return fj(b2(dj(t),n))},u3=new WeakMap,S2=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,u=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!u3.get(a))&&!u){u3.set(t,!0);for(var f=[],y=w2(n,f),r=a.props,S=0,A=0;S<y.length;S++)for(var R=0;R<r.length;R++,A++)t.props[A]=f[S]?y[S].replace(/&\f/g,r[R]):r[R]+" "+y[S]}}},T2=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function mj(e,t){switch(s2(e,t)){case 5103:return Ro+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ro+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ro+e+CE+e+Il+e+e;case 6828:case 4268:return Ro+e+Il+e+e;case 6165:return Ro+e+Il+"flex-"+e+e;case 5187:return Ro+e+Io(e,/(\w+).+(:[^]+)/,Ro+"box-$1$2"+Il+"flex-$1$2")+e;case 5443:return Ro+e+Il+"flex-item-"+Io(e,/flex-|-self/,"")+e;case 4675:return Ro+e+Il+"flex-line-pack"+Io(e,/align-content|flex-|-self/,"")+e;case 5548:return Ro+e+Il+Io(e,"shrink","negative")+e;case 5292:return Ro+e+Il+Io(e,"basis","preferred-size")+e;case 6060:return Ro+"box-"+Io(e,"-grow","")+Ro+e+Il+Io(e,"grow","positive")+e;case 4554:return Ro+Io(e,/([^-])(transform)/g,"$1"+Ro+"$2")+e;case 6187:return Io(Io(Io(e,/(zoom-|grab)/,Ro+"$1"),/(image-set)/,Ro+"$1"),e,"")+e;case 5495:case 3959:return Io(e,/(image-set\([^]*)/,Ro+"$1$`$1");case 4968:return Io(Io(e,/(.+:)(flex-)?(.*)/,Ro+"box-pack:$3"+Il+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ro+e+e;case 4095:case 3583:case 4068:case 2532:return Io(e,/(.+)-inline(.+)/,Ro+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Lf(e)-1-t>6)switch(ol(e,t+1)){case 109:if(ol(e,t+4)!==45)break;case 102:return Io(e,/(.+:)(.+)-([^]+)/,"$1"+Ro+"$2-$3$1"+CE+(ol(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~fI(e,"stretch")?mj(Io(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ol(e,t+1)!==115)break;case 6444:switch(ol(e,Lf(e)-3-(~fI(e,"!important")&&10))){case 107:return Io(e,":",":"+Ro)+e;case 101:return Io(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ro+(ol(e,14)===45?"inline-":"")+"box$3$1"+Ro+"$2$3$1"+Il+"$2box$3")+e}break;case 5936:switch(ol(e,t+11)){case 114:return Ro+e+Il+Io(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ro+e+Il+Io(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ro+e+Il+Io(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ro+e+Il+e+e}return e}var E2=function(t,n,a,u){if(t.length>-1&&!t.return)switch(t.type){case sD:t.return=mj(t.value,t.length);break;case cj:return K0([$b(t,{value:Io(t.value,"@","@"+Ro)})],u);case oD:if(t.length)return l2(t.props,function(f){switch(a2(f,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return K0([$b(t,{props:[Io(f,/:(read-\w+)/,":"+CE+"$1")]})],u);case"::placeholder":return K0([$b(t,{props:[Io(f,/:(plac\w+)/,":"+Ro+"input-$1")]}),$b(t,{props:[Io(f,/:(plac\w+)/,":"+CE+"$1")]}),$b(t,{props:[Io(f,/:(plac\w+)/,Il+"input-$1")]})],u)}return""})}},C2=[E2],gj=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(H){var K=H.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var u=t.stylisPlugins||C2,f={},y,r=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(H){for(var K=H.getAttribute("data-emotion").split(" "),W=1;W<K.length;W++)f[K[W]]=!0;r.push(H)});var S,A=[S2,T2];{var R,O=[y2,v2(function(H){R.insert(H)})],z=_2(A.concat(u,O)),N=function(K){return K0(m2(K),z)};S=function(K,W,re,ne){R=re,N(K?K+"{"+W.styles+"}":W.styles),ne&&(U.inserted[W.name]=!0)}}var U={key:n,sheet:new aj({key:n,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:f,registered:{},insert:S};return U.sheet.hydrate(r),U},DM={exports:{}},Lo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3;function A2(){if(h3)return Lo;h3=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,u=e?Symbol.for("react.strict_mode"):60108,f=e?Symbol.for("react.profiler"):60114,y=e?Symbol.for("react.provider"):60109,r=e?Symbol.for("react.context"):60110,S=e?Symbol.for("react.async_mode"):60111,A=e?Symbol.for("react.concurrent_mode"):60111,R=e?Symbol.for("react.forward_ref"):60112,O=e?Symbol.for("react.suspense"):60113,z=e?Symbol.for("react.suspense_list"):60120,N=e?Symbol.for("react.memo"):60115,U=e?Symbol.for("react.lazy"):60116,H=e?Symbol.for("react.block"):60121,K=e?Symbol.for("react.fundamental"):60117,W=e?Symbol.for("react.responder"):60118,re=e?Symbol.for("react.scope"):60119;function ne(ue){if(typeof ue=="object"&&ue!==null){var pe=ue.$$typeof;switch(pe){case t:switch(ue=ue.type,ue){case S:case A:case a:case f:case u:case O:return ue;default:switch(ue=ue&&ue.$$typeof,ue){case r:case R:case U:case N:case y:return ue;default:return pe}}case n:return pe}}}function se(ue){return ne(ue)===A}return Lo.AsyncMode=S,Lo.ConcurrentMode=A,Lo.ContextConsumer=r,Lo.ContextProvider=y,Lo.Element=t,Lo.ForwardRef=R,Lo.Fragment=a,Lo.Lazy=U,Lo.Memo=N,Lo.Portal=n,Lo.Profiler=f,Lo.StrictMode=u,Lo.Suspense=O,Lo.isAsyncMode=function(ue){return se(ue)||ne(ue)===S},Lo.isConcurrentMode=se,Lo.isContextConsumer=function(ue){return ne(ue)===r},Lo.isContextProvider=function(ue){return ne(ue)===y},Lo.isElement=function(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===t},Lo.isForwardRef=function(ue){return ne(ue)===R},Lo.isFragment=function(ue){return ne(ue)===a},Lo.isLazy=function(ue){return ne(ue)===U},Lo.isMemo=function(ue){return ne(ue)===N},Lo.isPortal=function(ue){return ne(ue)===n},Lo.isProfiler=function(ue){return ne(ue)===f},Lo.isStrictMode=function(ue){return ne(ue)===u},Lo.isSuspense=function(ue){return ne(ue)===O},Lo.isValidElementType=function(ue){return typeof ue=="string"||typeof ue=="function"||ue===a||ue===A||ue===f||ue===u||ue===O||ue===z||typeof ue=="object"&&ue!==null&&(ue.$$typeof===U||ue.$$typeof===N||ue.$$typeof===y||ue.$$typeof===r||ue.$$typeof===R||ue.$$typeof===K||ue.$$typeof===W||ue.$$typeof===re||ue.$$typeof===H)},Lo.typeOf=ne,Lo}var d3;function M2(){return d3||(d3=1,DM.exports=A2()),DM.exports}var OM,f3;function R2(){if(f3)return OM;f3=1;var e=M2(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},f={};f[e.ForwardRef]=a,f[e.Memo]=u;function y(U){return e.isMemo(U)?u:f[U.$$typeof]||t}var r=Object.defineProperty,S=Object.getOwnPropertyNames,A=Object.getOwnPropertySymbols,R=Object.getOwnPropertyDescriptor,O=Object.getPrototypeOf,z=Object.prototype;function N(U,H,K){if(typeof H!="string"){if(z){var W=O(H);W&&W!==z&&N(U,W,K)}var re=S(H);A&&(re=re.concat(A(H)));for(var ne=y(U),se=y(H),ue=0;ue<re.length;++ue){var pe=re[ue];if(!n[pe]&&!(K&&K[pe])&&!(se&&se[pe])&&!(ne&&ne[pe])){var Ce=R(H,pe);try{r(U,pe,Ce)}catch{}}}}return U}return OM=N,OM}R2();var I2=!0;function yj(e,t,n){var a="";return n.split(" ").forEach(function(u){e[u]!==void 0?t.push(e[u]+";"):u&&(a+=u+" ")}),a}var lD=function(t,n,a){var u=t.key+"-"+n.name;(a===!1||I2===!1)&&t.registered[u]===void 0&&(t.registered[u]=n.styles)},cD=function(t,n,a){lD(t,n,a);var u=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var f=n;do t.insert(n===f?"."+u:"",f,t.sheet,!0),f=f.next;while(f!==void 0)}};function P2(e){for(var t=0,n,a=0,u=e.length;u>=4;++a,u-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(u){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var D2={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},O2=/[A-Z]|^ms/g,L2=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_j=function(t){return t.charCodeAt(1)===45},p3=function(t){return t!=null&&typeof t!="boolean"},LM=pj(function(e){return _j(e)?e:e.replace(O2,"-$&").toLowerCase()}),m3=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(L2,function(a,u,f){return kf={name:u,styles:f,next:kf},u})}return D2[t]!==1&&!_j(t)&&typeof n=="number"&&n!==0?n+"px":n};function z1(e,t,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var u=n;if(u.anim===1)return kf={name:u.name,styles:u.styles,next:kf},u.name;var f=n;if(f.styles!==void 0){var y=f.next;if(y!==void 0)for(;y!==void 0;)kf={name:y.name,styles:y.styles,next:kf},y=y.next;var r=f.styles+";";return r}return k2(e,t,n)}case"function":{if(e!==void 0){var S=kf,A=n(e);return kf=S,z1(e,t,A)}break}}var R=n;if(t==null)return R;var O=t[R];return O!==void 0?O:R}function k2(e,t,n){var a="";if(Array.isArray(n))for(var u=0;u<n.length;u++)a+=z1(e,t,n[u])+";";else for(var f in n){var y=n[f];if(typeof y!="object"){var r=y;t!=null&&t[r]!==void 0?a+=f+"{"+t[r]+"}":p3(r)&&(a+=LM(f)+":"+m3(f,r)+";")}else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var S=0;S<y.length;S++)p3(y[S])&&(a+=LM(f)+":"+m3(f,y[S])+";");else{var A=z1(e,t,y);switch(f){case"animation":case"animationName":{a+=LM(f)+":"+A+";";break}default:a+=f+"{"+A+"}"}}}return a}var g3=/label:\s*([^\s;{]+)\s*(;|$)/g,kf;function pw(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,u="";kf=void 0;var f=e[0];if(f==null||f.raw===void 0)a=!1,u+=z1(n,t,f);else{var y=f;u+=y[0]}for(var r=1;r<e.length;r++)if(u+=z1(n,t,e[r]),a){var S=f;u+=S[r]}g3.lastIndex=0;for(var A="",R;(R=g3.exec(u))!==null;)A+="-"+R[1];var O=P2(u)+A;return{name:O,styles:u,next:kf}}var z2=function(t){return t()},vj=xE.useInsertionEffect?xE.useInsertionEffect:!1,xj=vj||z2,y3=vj||ee.useLayoutEffect,bj=ee.createContext(typeof HTMLElement<"u"?gj({key:"css"}):null),B2=bj.Provider,uD=function(t){return ee.forwardRef(function(n,a){var u=ee.useContext(bj);return t(n,u,a)})},px=ee.createContext({}),F2=function(){return ee.useContext(px)},hD={}.hasOwnProperty,mI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",N2=function(t,n){var a={};for(var u in n)hD.call(n,u)&&(a[u]=n[u]);return a[mI]=t,a},j2=function(t){var n=t.cache,a=t.serialized,u=t.isStringTag;return lD(n,a,u),xj(function(){return cD(n,a,u)}),null},U2=uD(function(e,t,n){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var u=e[mI],f=[a],y="";typeof e.className=="string"?y=yj(t.registered,f,e.className):e.className!=null&&(y=e.className+" ");var r=pw(f,void 0,ee.useContext(px));y+=t.key+"-"+r.name;var S={};for(var A in e)hD.call(e,A)&&A!=="css"&&A!==mI&&(S[A]=e[A]);return S.className=y,n&&(S.ref=n),ee.createElement(ee.Fragment,null,ee.createElement(j2,{cache:t,serialized:r,isStringTag:typeof u=="string"}),ee.createElement(u,S))}),V2=U2,_3=function(t,n){var a=arguments;if(n==null||!hD.call(n,"css"))return ee.createElement.apply(void 0,a);var u=a.length,f=new Array(u);f[0]=V2,f[1]=N2(t,n);for(var y=2;y<u;y++)f[y]=a[y];return ee.createElement.apply(null,f)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(_3||(_3={}));var $2=uD(function(e,t){var n=e.styles,a=pw([n],void 0,ee.useContext(px)),u=ee.useRef();return y3(function(){var f=t.key+"-global",y=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,S=document.querySelector('style[data-emotion="'+f+" "+a.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),S!==null&&(r=!0,S.setAttribute("data-emotion",f),y.hydrate([S])),u.current=[y,r],function(){y.flush()}},[t]),y3(function(){var f=u.current,y=f[0],r=f[1];if(r){f[1]=!1;return}if(a.next!==void 0&&cD(t,a.next,!0),y.tags.length){var S=y.tags[y.tags.length-1].nextElementSibling;y.before=S,y.flush()}t.insert("",a,y,!1)},[t,a.name]),null});function mx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pw(t)}function Yg(){var e=mx.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var H2=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,G2=pj(function(e){return H2.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),q2=G2,W2=function(t){return t!=="theme"},v3=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?q2:W2},x3=function(t,n,a){var u;if(n){var f=n.shouldForwardProp;u=t.__emotion_forwardProp&&f?function(y){return t.__emotion_forwardProp(y)&&f(y)}:f}return typeof u!="function"&&a&&(u=t.__emotion_forwardProp),u},X2=function(t){var n=t.cache,a=t.serialized,u=t.isStringTag;return lD(n,a,u),xj(function(){return cD(n,a,u)}),null},Z2=function e(t,n){var a=t.__emotion_real===t,u=a&&t.__emotion_base||t,f,y;n!==void 0&&(f=n.label,y=n.target);var r=x3(t,n,a),S=r||v3(u),A=!S("as");return function(){var R=arguments,O=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(f!==void 0&&O.push("label:"+f+";"),R[0]==null||R[0].raw===void 0)O.push.apply(O,R);else{var z=R[0];O.push(z[0]);for(var N=R.length,U=1;U<N;U++)O.push(R[U],z[U])}var H=uD(function(K,W,re){var ne=A&&K.as||u,se="",ue=[],pe=K;if(K.theme==null){pe={};for(var Ce in K)pe[Ce]=K[Ce];pe.theme=ee.useContext(px)}typeof K.className=="string"?se=yj(W.registered,ue,K.className):K.className!=null&&(se=K.className+" ");var Le=pw(O.concat(ue),W.registered,pe);se+=W.key+"-"+Le.name,y!==void 0&&(se+=" "+y);var qe=A&&r===void 0?v3(ne):S,ye={};for(var Xe in K)A&&Xe==="as"||qe(Xe)&&(ye[Xe]=K[Xe]);return ye.className=se,re&&(ye.ref=re),ee.createElement(ee.Fragment,null,ee.createElement(X2,{cache:W,serialized:Le,isStringTag:typeof ne=="string"}),ee.createElement(ne,ye))});return H.displayName=f!==void 0?f:"Styled("+(typeof u=="string"?u:u.displayName||u.name||"Component")+")",H.defaultProps=t.defaultProps,H.__emotion_real=H,H.__emotion_base=u,H.__emotion_styles=O,H.__emotion_forwardProp=r,Object.defineProperty(H,"toString",{value:function(){return"."+y}}),H.withComponent=function(K,W){var re=e(K,EE({},n,W,{shouldForwardProp:x3(H,W,!0)}));return re.apply(void 0,O)},H}},Y2=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],gI=Z2.bind(null);Y2.forEach(function(e){gI[e]=gI(e)});const kM=new Map,K2=(e,t)=>{const n=gj(e);return n.sheet=new t({key:n.key,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy,prepend:n.sheet.prepend,insertionPoint:n.sheet.insertionPoint}),n};let Rg;if(typeof document=="object"&&(Rg=document.querySelector('[name="emotion-insertion-point"]'),!Rg)){Rg=document.createElement("meta"),Rg.setAttribute("name","emotion-insertion-point"),Rg.setAttribute("content","");const e=document.querySelector("head");e&&e.prepend(Rg)}function J2(e,t){if(e||t){class n extends aj{insert(f,y){return this.key&&this.key.endsWith("global")&&(this.before=Rg),super.insert(f,y)}}const a=K2({key:"css",insertionPoint:e?Rg:void 0},n);if(t){const u=a.insert;a.insert=(...f)=>(f[1].styles.startsWith("@layer")||(f[1].styles=`@layer mui {${f[1].styles}}`),u(...f))}return a}}function Q2(e){const{injectFirst:t,enableCssLayer:n,children:a}=e,u=ee.useMemo(()=>{const f=`${t}-${n}`;if(kM.has(f))return kM.get(f);const y=J2(t,n);return kM.set(f,y),y},[t,n]);return u?te.jsx(B2,{value:u,children:a}):a}function eX(e){return e==null||Object.keys(e).length===0}function wj(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?u=>t(eX(u)?n:u):t;return te.jsx($2,{styles:a})}function Sj(e,t){return gI(e,t)}function tX(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const b3=[];function w3(e){return b3[0]=e,pw(b3)}const nX=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>({...n,[a.key]:a.val}),{})};function iX(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5,...u}=e,f=nX(t),y=Object.keys(f);function r(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n})`}function S(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-a/100}${n})`}function A(z,N){const U=y.indexOf(N);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n}) and (max-width:${(U!==-1&&typeof t[y[U]]=="number"?t[y[U]]:N)-a/100}${n})`}function R(z){return y.indexOf(z)+1<y.length?A(z,y[y.indexOf(z)+1]):r(z)}function O(z){const N=y.indexOf(z);return N===0?r(y[1]):N===y.length-1?S(y[N]):A(z,y[y.indexOf(z)+1]).replace("@media","@media not all and")}return{keys:y,values:f,up:r,down:S,between:A,only:R,not:O,unit:n,...u}}const rX={borderRadius:4};function Tj(e=8,t=_C({spacing:e})){if(e.mui)return e;const n=(...a)=>(a.length===0?[1]:a).map(f=>{const y=t(f);return typeof y=="number"?`${y}px`:y}).join(" ");return n.mui=!0,n}function oX(e,t){var a;const n=this;if(n.vars){if(!((a=n.colorSchemes)!=null&&a[e])||typeof n.getColorSchemeSelector!="function")return{};let u=n.getColorSchemeSelector(e);return u==="&"?t:((u.includes("data-")||u.includes("."))&&(u=`*:where(${u.replace(/\s*&$/,"")}) &`),{[u]:t})}return n.palette.mode===e?t:{}}function mw(e={},...t){const{breakpoints:n={},palette:a={},spacing:u,shape:f={},...y}=e,r=iX(n),S=Tj(u);let A=Va({breakpoints:r,direction:"ltr",components:{},palette:{mode:"light",...a},spacing:S,shape:{...rX,...f}},y);return A=uW(A),A.applyStyles=oX,A=t.reduce((R,O)=>Va(R,O),A),A.unstable_sxConfig={...dw,...y==null?void 0:y.unstable_sxConfig},A.unstable_sx=function(O){return Ug({sx:O,theme:this})},A}function sX(e){return Object.keys(e).length===0}function dD(e=null){const t=ee.useContext(px);return!t||sX(t)?e:t}const aX=mw();function gw(e=aX){return dD(e)}function lX({styles:e,themeId:t,defaultTheme:n={}}){const a=gw(n),u=typeof e=="function"?e(t&&a[t]||a):e;return te.jsx(wj,{styles:u})}const S3=e=>e,cX=()=>{let e=S3;return{configure(t){e=t},generate(t){return e(t)},reset(){e=S3}}},Ej=cX();function uX(e={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:u}=e,f=Sj("div",{shouldForwardProp:r=>r!=="theme"&&r!=="sx"&&r!=="as"})(Ug);return ee.forwardRef(function(S,A){const R=gw(n),{className:O,component:z="div",...N}=TC(S);return te.jsx(f,{as:z,ref:A,className:si(O,u?u(a):a),theme:t&&R[t]||R,...N})})}const hX={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function tr(e,t,n="Mui"){const a=hX[t];return a?`${n}-${a}`:`${Ej.generate(e)}-${t}`}function or(e,t,n="Mui"){const a={};return t.forEach(u=>{a[u]=tr(e,u,n)}),a}function Cj(e){const{variants:t,...n}=e,a={variants:t,style:w3(n),isProcessed:!0};return a.style===n||t&&t.forEach(u=>{typeof u.style!="function"&&(u.style=w3(u.style))}),a}const dX=mw();function zM(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function fX(e){return e?(t,n)=>n[e]:null}function pX(e,t,n){e.theme=gX(e.theme)?n:e.theme[t]||e.theme}function eE(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(a=>eE(e,a));if(Array.isArray(n==null?void 0:n.variants)){let a;if(n.isProcessed)a=n.style;else{const{variants:u,...f}=n;a=f}return Aj(e,n.variants,[a])}return n!=null&&n.isProcessed?n.style:n}function Aj(e,t,n=[]){var u;let a;e:for(let f=0;f<t.length;f+=1){const y=t[f];if(typeof y.props=="function"){if(a??(a={...e,...e.ownerState,ownerState:e.ownerState}),!y.props(a))continue}else for(const r in y.props)if(e[r]!==y.props[r]&&((u=e.ownerState)==null?void 0:u[r])!==y.props[r])continue e;typeof y.style=="function"?(a??(a={...e,...e.ownerState,ownerState:e.ownerState}),n.push(y.style(a))):n.push(y.style)}return n}function Mj(e={}){const{themeId:t,defaultTheme:n=dX,rootShouldForwardProp:a=zM,slotShouldForwardProp:u=zM}=e;function f(r){pX(r,t,n)}return(r,S={})=>{tX(r,ue=>ue.filter(pe=>pe!==Ug));const{name:A,slot:R,skipVariantsResolver:O,skipSx:z,overridesResolver:N=fX(_X(R)),...U}=S,H=O!==void 0?O:R&&R!=="Root"&&R!=="root"||!1,K=z||!1;let W=zM;R==="Root"||R==="root"?W=a:R?W=u:yX(r)&&(W=void 0);const re=Sj(r,{shouldForwardProp:W,label:mX(),...U}),ne=ue=>{if(typeof ue=="function"&&ue.__emotion_real!==ue)return function(Ce){return eE(Ce,ue)};if(zf(ue)){const pe=Cj(ue);return pe.variants?function(Le){return eE(Le,pe)}:pe.style}return ue},se=(...ue)=>{const pe=[],Ce=ue.map(ne),Le=[];if(pe.push(f),A&&N&&Le.push(function(ut){var $e,it;const ot=(it=($e=ut.theme.components)==null?void 0:$e[A])==null?void 0:it.styleOverrides;if(!ot)return null;const mt={};for(const Tt in ot)mt[Tt]=eE(ut,ot[Tt]);return N(ut,mt)}),A&&!H&&Le.push(function(ut){var mt,$e;const et=ut.theme,ot=($e=(mt=et==null?void 0:et.components)==null?void 0:mt[A])==null?void 0:$e.variants;return ot?Aj(ut,ot):null}),K||Le.push(Ug),Array.isArray(Ce[0])){const Xe=Ce.shift(),ut=new Array(pe.length).fill(""),et=new Array(Le.length).fill("");let ot;ot=[...ut,...Xe,...et],ot.raw=[...ut,...Xe.raw,...et],pe.unshift(ot)}const qe=[...pe,...Ce,...Le],ye=re(...qe);return r.muiName&&(ye.muiName=r.muiName),ye};return re.withConfig&&(se.withConfig=re.withConfig),se}}function mX(e,t){return void 0}function gX(e){for(const t in e)return!1;return!0}function yX(e){return typeof e=="string"&&e.charCodeAt(0)>96}function _X(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const Rj=Mj();function B1(e,t){const n={...t};for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const u=a;if(u==="components"||u==="slots")n[u]={...e[u],...n[u]};else if(u==="componentsProps"||u==="slotProps"){const f=e[u],y=t[u];if(!y)n[u]=f||{};else if(!f)n[u]=y;else{n[u]={...y};for(const r in f)if(Object.prototype.hasOwnProperty.call(f,r)){const S=r;n[u][S]=B1(f[S],y[S])}}}else n[u]===void 0&&(n[u]=e[u])}return n}function Ij(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:B1(t.components[n].defaultProps,a)}function Pj({props:e,name:t,defaultTheme:n,themeId:a}){let u=gw(n);return a&&(u=u[a]||u),Ij({theme:u,name:t,props:e})}const Lc=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function vX(e,t,n,a,u){const[f,y]=ee.useState(()=>u&&n?n(e).matches:a?a(e).matches:t);return Lc(()=>{if(!n)return;const r=n(e),S=()=>{y(r.matches)};return S(),r.addEventListener("change",S),()=>{r.removeEventListener("change",S)}},[e,n]),f}const xX={...xE},Dj=xX.useSyncExternalStore;function bX(e,t,n,a,u){const f=ee.useCallback(()=>t,[t]),y=ee.useMemo(()=>{if(u&&n)return()=>n(e).matches;if(a!==null){const{matches:R}=a(e);return()=>R}return f},[f,e,a,u,n]),[r,S]=ee.useMemo(()=>{if(n===null)return[f,()=>()=>{}];const R=n(e);return[()=>R.matches,O=>(R.addEventListener("change",O),()=>{R.removeEventListener("change",O)})]},[f,n,e]);return Dj(S,r,y)}function Oj(e={}){const{themeId:t}=e;return function(a,u={}){let f=dD();f&&t&&(f=f[t]||f);const y=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:r=!1,matchMedia:S=y?window.matchMedia:null,ssrMatchMedia:A=null,noSsr:R=!1}=Ij({name:"MuiUseMediaQuery",props:u,theme:f});let O=typeof a=="function"?a(f):a;return O=O.replace(/^@media( ?)/m,""),O.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(Dj!==void 0?bX:vX)(O,r,S,A,R)}}Oj();const Lj=ee.createContext(null);function fD(){return ee.useContext(Lj)}const wX=typeof Symbol=="function"&&Symbol.for,SX=wX?Symbol.for("mui.nested"):"__THEME_NESTED__";function TX(e,t){return typeof t=="function"?t(e):{...e,...t}}function EX(e){const{children:t,theme:n}=e,a=fD(),u=ee.useMemo(()=>{const f=a===null?{...n}:TX(a,n);return f!=null&&(f[SX]=a!==null),f},[n,a]);return te.jsx(Lj.Provider,{value:u,children:t})}const kj=ee.createContext(void 0);function CX({value:e,children:t}){return te.jsx(kj.Provider,{value:e,children:t})}function AX(e){const{theme:t,name:n,props:a}=e;if(!t||!t.components||!t.components[n])return a;const u=t.components[n];return u.defaultProps?B1(u.defaultProps,a):!u.styleOverrides&&!u.variants?B1(u,a):a}function MX({props:e,name:t}){const n=ee.useContext(kj);return AX({props:e,name:t,theme:{components:n}})}const T3={};function E3(e,t,n,a=!1){return ee.useMemo(()=>{const u=e&&t[e]||t;if(typeof n=="function"){const f=n(u),y=e?{...t,[e]:f}:f;return a?()=>y:y}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,a])}function zj(e){const{children:t,theme:n,themeId:a}=e,u=dD(T3),f=fD()||T3,y=E3(a,u,n),r=E3(a,f,n,!0),S=(a?y[a]:y).direction==="rtl";return te.jsx(EX,{theme:r,children:te.jsx(px.Provider,{value:y,children:te.jsx(rW,{value:S,children:te.jsx(CX,{value:a?y[a].components:y.components,children:t})})})})}const C3={theme:void 0};function RX(e){let t,n;return function(u){let f=t;return(f===void 0||u.theme!==n)&&(C3.theme=u.theme,f=Cj(e(C3)),t=f,n=u.theme),f}}const pD="mode",mD="color-scheme",IX="data-color-scheme";function PX(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:a="dark",modeStorageKey:u=pD,colorSchemeStorageKey:f=mD,attribute:y=IX,colorSchemeNode:r="document.documentElement",nonce:S}=e||{};let A="",R=y;if(y==="class"&&(R=".%s"),y==="data"&&(R="[data-%s]"),R.startsWith(".")){const z=R.substring(1);A+=`${r}.classList.remove('${z}'.replace('%s', light), '${z}'.replace('%s', dark));
      ${r}.classList.add('${z}'.replace('%s', colorScheme));`}const O=R.match(/\[([^\]]+)\]/);if(O){const[z,N]=O[1].split("=");N||(A+=`${r}.removeAttribute('${z}'.replace('%s', light));
      ${r}.removeAttribute('${z}'.replace('%s', dark));`),A+=`
      ${r}.setAttribute('${z}'.replace('%s', colorScheme), ${N?`${N}.replace('%s', colorScheme)`:'""'});`}else A+=`${r}.setAttribute('${R}', colorScheme);`;return te.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?S:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${u}') || '${t}';
  const dark = localStorage.getItem('${f}-dark') || '${a}';
  const light = localStorage.getItem('${f}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${A}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function DX(){}const OX=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(n){if(typeof window>"u")return;if(!t)return n;let a;try{a=t.localStorage.getItem(e)}catch{}return a||n},set:n=>{if(t)try{t.localStorage.setItem(e,n)}catch{}},subscribe:n=>{if(!t)return DX;const a=u=>{const f=u.newValue;u.key===e&&n(f)};return t.addEventListener("storage",a),()=>{t.removeEventListener("storage",a)}}});function BM(){}function A3(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Bj(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function LX(e){return Bj(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function kX(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:a,supportedColorSchemes:u=[],modeStorageKey:f=pD,colorSchemeStorageKey:y=mD,storageWindow:r=typeof window>"u"?void 0:window,storageManager:S=OX,noSsr:A=!1}=e,R=u.join(","),O=u.length>1,z=ee.useMemo(()=>S==null?void 0:S({key:f,storageWindow:r}),[S,f,r]),N=ee.useMemo(()=>S==null?void 0:S({key:`${y}-light`,storageWindow:r}),[S,y,r]),U=ee.useMemo(()=>S==null?void 0:S({key:`${y}-dark`,storageWindow:r}),[S,y,r]),[H,K]=ee.useState(()=>{const Le=(z==null?void 0:z.get(t))||t,qe=(N==null?void 0:N.get(n))||n,ye=(U==null?void 0:U.get(a))||a;return{mode:Le,systemMode:A3(Le),lightColorScheme:qe,darkColorScheme:ye}}),[W,re]=ee.useState(A||!O);ee.useEffect(()=>{re(!0)},[]);const ne=LX(H),se=ee.useCallback(Le=>{K(qe=>{if(Le===qe.mode)return qe;const ye=Le??t;return z==null||z.set(ye),{...qe,mode:ye,systemMode:A3(ye)}})},[z,t]),ue=ee.useCallback(Le=>{Le?typeof Le=="string"?Le&&!R.includes(Le)?console.error(`\`${Le}\` does not exist in \`theme.colorSchemes\`.`):K(qe=>{const ye={...qe};return Bj(qe,Xe=>{Xe==="light"&&(N==null||N.set(Le),ye.lightColorScheme=Le),Xe==="dark"&&(U==null||U.set(Le),ye.darkColorScheme=Le)}),ye}):K(qe=>{const ye={...qe},Xe=Le.light===null?n:Le.light,ut=Le.dark===null?a:Le.dark;return Xe&&(R.includes(Xe)?(ye.lightColorScheme=Xe,N==null||N.set(Xe)):console.error(`\`${Xe}\` does not exist in \`theme.colorSchemes\`.`)),ut&&(R.includes(ut)?(ye.darkColorScheme=ut,U==null||U.set(ut)):console.error(`\`${ut}\` does not exist in \`theme.colorSchemes\`.`)),ye}):K(qe=>(N==null||N.set(n),U==null||U.set(a),{...qe,lightColorScheme:n,darkColorScheme:a}))},[R,N,U,n,a]),pe=ee.useCallback(Le=>{H.mode==="system"&&K(qe=>{const ye=Le!=null&&Le.matches?"dark":"light";return qe.systemMode===ye?qe:{...qe,systemMode:ye}})},[H.mode]),Ce=ee.useRef(pe);return Ce.current=pe,ee.useEffect(()=>{if(typeof window.matchMedia!="function"||!O)return;const Le=(...ye)=>Ce.current(...ye),qe=window.matchMedia("(prefers-color-scheme: dark)");return qe.addListener(Le),Le(qe),()=>{qe.removeListener(Le)}},[O]),ee.useEffect(()=>{if(O){const Le=(z==null?void 0:z.subscribe(Xe=>{(!Xe||["light","dark","system"].includes(Xe))&&se(Xe||t)}))||BM,qe=(N==null?void 0:N.subscribe(Xe=>{(!Xe||R.match(Xe))&&ue({light:Xe})}))||BM,ye=(U==null?void 0:U.subscribe(Xe=>{(!Xe||R.match(Xe))&&ue({dark:Xe})}))||BM;return()=>{Le(),qe(),ye()}}},[ue,se,R,t,r,O,z,N,U]),{...H,mode:W?H.mode:void 0,systemMode:W?H.systemMode:void 0,colorScheme:W?ne:void 0,setMode:se,setColorScheme:ue}}const zX="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function BX(e){const{themeId:t,theme:n={},modeStorageKey:a=pD,colorSchemeStorageKey:u=mD,disableTransitionOnChange:f=!1,defaultColorScheme:y,resolveTheme:r}=e,S={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},A=ee.createContext(void 0),R=()=>ee.useContext(A)||S,O={},z={};function N(W){var qn,Xn,Ni,Mi;const{children:re,theme:ne,modeStorageKey:se=a,colorSchemeStorageKey:ue=u,disableTransitionOnChange:pe=f,storageManager:Ce,storageWindow:Le=typeof window>"u"?void 0:window,documentNode:qe=typeof document>"u"?void 0:document,colorSchemeNode:ye=typeof document>"u"?void 0:document.documentElement,disableNestedContext:Xe=!1,disableStyleSheetGeneration:ut=!1,defaultMode:et="system",forceThemeRerender:ot=!1,noSsr:mt}=W,$e=ee.useRef(!1),it=fD(),Tt=ee.useContext(A),xt=!!Tt&&!Xe,je=ee.useMemo(()=>ne||(typeof n=="function"?n():n),[ne]),ht=je[t],Bt=ht||je,{colorSchemes:Ft=O,components:on=z,cssVarPrefix:en}=Bt,jt=Object.keys(Ft).filter(pr=>!!Ft[pr]).join(","),Rn=ee.useMemo(()=>jt.split(","),[jt]),Vn=typeof y=="string"?y:y.light,Hn=typeof y=="string"?y:y.dark,On=Ft[Vn]&&Ft[Hn]?et:((Xn=(qn=Ft[Bt.defaultColorScheme])==null?void 0:qn.palette)==null?void 0:Xn.mode)||((Ni=Bt.palette)==null?void 0:Ni.mode),{mode:ai,setMode:oi,systemMode:Ln,lightColorScheme:zn,darkColorScheme:hi,colorScheme:fi,setColorScheme:ci}=kX({supportedColorSchemes:Rn,defaultLightColorScheme:Vn,defaultDarkColorScheme:Hn,modeStorageKey:se,colorSchemeStorageKey:ue,defaultMode:On,storageManager:Ce,storageWindow:Le,noSsr:mt});let Pi=ai,ii=fi;xt&&(Pi=Tt.mode,ii=Tt.colorScheme);let pi=ii||Bt.defaultColorScheme;Bt.vars&&!ot&&(pi=Bt.defaultColorScheme);const yi=ee.useMemo(()=>{var qr;const pr=((qr=Bt.generateThemeVars)==null?void 0:qr.call(Bt))||Bt.vars,Nn={...Bt,components:on,colorSchemes:Ft,cssVarPrefix:en,vars:pr};if(typeof Nn.generateSpacing=="function"&&(Nn.spacing=Nn.generateSpacing()),pi){const mr=Ft[pi];mr&&typeof mr=="object"&&Object.keys(mr).forEach(Qi=>{mr[Qi]&&typeof mr[Qi]=="object"?Nn[Qi]={...Nn[Qi],...mr[Qi]}:Nn[Qi]=mr[Qi]})}return r?r(Nn):Nn},[Bt,pi,on,Ft,en]),dt=Bt.colorSchemeSelector;Lc(()=>{if(ii&&ye&&dt&&dt!=="media"){const pr=dt;let Nn=dt;if(pr==="class"&&(Nn=".%s"),pr==="data"&&(Nn="[data-%s]"),pr!=null&&pr.startsWith("data-")&&!pr.includes("%s")&&(Nn=`[${pr}="%s"]`),Nn.startsWith("."))ye.classList.remove(...Rn.map(qr=>Nn.substring(1).replace("%s",qr))),ye.classList.add(Nn.substring(1).replace("%s",ii));else{const qr=Nn.replace("%s",ii).match(/\[([^\]]+)\]/);if(qr){const[mr,Qi]=qr[1].split("=");Qi||Rn.forEach(li=>{ye.removeAttribute(mr.replace(ii,li))}),ye.setAttribute(mr,Qi?Qi.replace(/"|'/g,""):"")}else ye.setAttribute(Nn,ii)}}},[ii,dt,ye,Rn]),ee.useEffect(()=>{let pr;if(pe&&$e.current&&qe){const Nn=qe.createElement("style");Nn.appendChild(qe.createTextNode(zX)),qe.head.appendChild(Nn),window.getComputedStyle(qe.body),pr=setTimeout(()=>{qe.head.removeChild(Nn)},1)}return()=>{clearTimeout(pr)}},[ii,pe,qe]),ee.useEffect(()=>($e.current=!0,()=>{$e.current=!1}),[]);const Cn=ee.useMemo(()=>({allColorSchemes:Rn,colorScheme:ii,darkColorScheme:hi,lightColorScheme:zn,mode:Pi,setColorScheme:ci,setMode:oi,systemMode:Ln}),[Rn,ii,hi,zn,Pi,ci,oi,Ln,yi.colorSchemeSelector]);let wn=!0;(ut||Bt.cssVariables===!1||xt&&(it==null?void 0:it.cssVarPrefix)===en)&&(wn=!1);const In=te.jsxs(ee.Fragment,{children:[te.jsx(zj,{themeId:ht?t:void 0,theme:yi,children:re}),wn&&te.jsx(wj,{styles:((Mi=yi.generateStyleSheets)==null?void 0:Mi.call(yi))||[]})]});return xt?In:te.jsx(A.Provider,{value:Cn,children:In})}const U=typeof y=="string"?y:y.light,H=typeof y=="string"?y:y.dark;return{CssVarsProvider:N,useColorScheme:R,getInitColorSchemeScript:W=>PX({colorSchemeStorageKey:u,defaultLightColorScheme:U,defaultDarkColorScheme:H,modeStorageKey:a,...W})}}function FX(e=""){function t(...a){if(!a.length)return"";const u=a[0];return typeof u=="string"&&!u.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${u}${t(...a.slice(1))})`:`, ${u}`}return(a,...u)=>`var(--${e?`${e}-`:""}${a}${t(...u)})`}const M3=(e,t,n,a=[])=>{let u=e;t.forEach((f,y)=>{y===t.length-1?Array.isArray(u)?u[Number(f)]=n:u&&typeof u=="object"&&(u[f]=n):u&&typeof u=="object"&&(u[f]||(u[f]=a.includes(f)?[]:{}),u=u[f])})},NX=(e,t,n)=>{function a(u,f=[],y=[]){Object.entries(u).forEach(([r,S])=>{(!n||n&&!n([...f,r]))&&S!=null&&(typeof S=="object"&&Object.keys(S).length>0?a(S,[...f,r],Array.isArray(S)?[...y,r]:y):t([...f,r],S,y))})}a(e)},jX=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function FM(e,t){const{prefix:n,shouldSkipGeneratingVar:a}=t||{},u={},f={},y={};return NX(e,(r,S,A)=>{if((typeof S=="string"||typeof S=="number")&&(!a||!a(r,S))){const R=`--${n?`${n}-`:""}${r.join("-")}`,O=jX(r,S);Object.assign(u,{[R]:O}),M3(f,r,`var(${R})`,A),M3(y,r,`var(${R}, ${O})`,A)}},r=>r[0]==="vars"),{css:u,vars:f,varsWithDefaults:y}}function UX(e,t={}){const{getSelector:n=K,disableCssColorScheme:a,colorSchemeSelector:u}=t,{colorSchemes:f={},components:y,defaultColorScheme:r="light",...S}=e,{vars:A,css:R,varsWithDefaults:O}=FM(S,t);let z=O;const N={},{[r]:U,...H}=f;if(Object.entries(H||{}).forEach(([ne,se])=>{const{vars:ue,css:pe,varsWithDefaults:Ce}=FM(se,t);z=Va(z,Ce),N[ne]={css:pe,vars:ue}}),U){const{css:ne,vars:se,varsWithDefaults:ue}=FM(U,t);z=Va(z,ue),N[r]={css:ne,vars:se}}function K(ne,se){var pe,Ce;let ue=u;if(u==="class"&&(ue=".%s"),u==="data"&&(ue="[data-%s]"),u!=null&&u.startsWith("data-")&&!u.includes("%s")&&(ue=`[${u}="%s"]`),ne){if(ue==="media")return e.defaultColorScheme===ne?":root":{[`@media (prefers-color-scheme: ${((Ce=(pe=f[ne])==null?void 0:pe.palette)==null?void 0:Ce.mode)||ne})`]:{":root":se}};if(ue)return e.defaultColorScheme===ne?`:root, ${ue.replace("%s",String(ne))}`:ue.replace("%s",String(ne))}return":root"}return{vars:z,generateThemeVars:()=>{let ne={...A};return Object.entries(N).forEach(([,{vars:se}])=>{ne=Va(ne,se)}),ne},generateStyleSheets:()=>{var Le,qe;const ne=[],se=e.defaultColorScheme||"light";function ue(ye,Xe){Object.keys(Xe).length&&ne.push(typeof ye=="string"?{[ye]:{...Xe}}:ye)}ue(n(void 0,{...R}),R);const{[se]:pe,...Ce}=N;if(pe){const{css:ye}=pe,Xe=(qe=(Le=f[se])==null?void 0:Le.palette)==null?void 0:qe.mode,ut=!a&&Xe?{colorScheme:Xe,...ye}:{...ye};ue(n(se,{...ut}),ut)}return Object.entries(Ce).forEach(([ye,{css:Xe}])=>{var ot,mt;const ut=(mt=(ot=f[ye])==null?void 0:ot.palette)==null?void 0:mt.mode,et=!a&&ut?{colorScheme:ut,...Xe}:{...Xe};ue(n(ye,{...et}),et)}),ne}}}function VX(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function m1(e,t){var n,a,u;return ee.isValidElement(e)&&t.indexOf(e.type.muiName??((u=(a=(n=e.type)==null?void 0:n._payload)==null?void 0:a.value)==null?void 0:u.muiName))!==-1}const $X=(e,t)=>e.filter(n=>t.includes(n)),gx=(e,t,n)=>{const a=e.keys[0];Array.isArray(t)?t.forEach((u,f)=>{n((y,r)=>{f<=e.keys.length-1&&(f===0?Object.assign(y,r):y[e.up(e.keys[f])]=r)},u)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:$X(e.keys,Object.keys(t))).forEach(f=>{if(e.keys.includes(f)){const y=t[f];y!==void 0&&n((r,S)=>{a===f?Object.assign(r,S):r[e.up(f)]=S},y)}}):(typeof t=="number"||typeof t=="string")&&n((u,f)=>{Object.assign(u,f)},t)};function AE(e){return`--Grid-${e}Spacing`}function MC(e){return`--Grid-parent-${e}Spacing`}const R3="--Grid-columns",J0="--Grid-parent-columns",HX=({theme:e,ownerState:t})=>{const n={};return gx(e.breakpoints,t.size,(a,u)=>{let f={};u==="grow"&&(f={flexBasis:0,flexGrow:1,maxWidth:"100%"}),u==="auto"&&(f={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof u=="number"&&(f={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${u} / var(${J0}) - (var(${J0}) - ${u}) * (var(${MC("column")}) / var(${J0})))`}),a(n,f)}),n},GX=({theme:e,ownerState:t})=>{const n={};return gx(e.breakpoints,t.offset,(a,u)=>{let f={};u==="auto"&&(f={marginLeft:"auto"}),typeof u=="number"&&(f={marginLeft:u===0?"0px":`calc(100% * ${u} / var(${J0}) + var(${MC("column")}) * ${u} / var(${J0}))`}),a(n,f)}),n},qX=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[R3]:12};return gx(e.breakpoints,t.columns,(a,u)=>{const f=u??12;a(n,{[R3]:f,"> *":{[J0]:f}})}),n},WX=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return gx(e.breakpoints,t.rowSpacing,(a,u)=>{var y;const f=typeof u=="string"?u:(y=e.spacing)==null?void 0:y.call(e,u);a(n,{[AE("row")]:f,"> *":{[MC("row")]:f}})}),n},XX=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return gx(e.breakpoints,t.columnSpacing,(a,u)=>{var y;const f=typeof u=="string"?u:(y=e.spacing)==null?void 0:y.call(e,u);a(n,{[AE("column")]:f,"> *":{[MC("column")]:f}})}),n},ZX=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return gx(e.breakpoints,t.direction,(a,u)=>{a(n,{flexDirection:u})}),n},YX=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${AE("row")}) var(${AE("column")})`}}),KX=e=>{const t=[];return Object.entries(e).forEach(([n,a])=>{a!==!1&&a!==void 0&&t.push(`grid-${n}-${String(a)}`)}),t},JX=(e,t="xs")=>{function n(a){return a===void 0?!1:typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"&&a>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const a=[];return Object.entries(e).forEach(([u,f])=>{n(f)&&a.push(`spacing-${u}-${String(f)}`)}),a}return[]},QX=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function eZ(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const tZ=mw(),nZ=Rj("div",{name:"MuiGrid",slot:"Root"});function iZ(e){return Pj({props:e,name:"MuiGrid",defaultTheme:tZ})}function rZ(e={}){const{createStyledComponent:t=nZ,useThemeProps:n=iZ,useTheme:a=gw,componentName:u="MuiGrid"}=e,f=(A,R)=>{const{container:O,direction:z,spacing:N,wrap:U,size:H}=A,K={root:["root",O&&"container",U!=="wrap"&&`wrap-xs-${String(U)}`,...QX(z),...KX(H),...O?JX(N,R.breakpoints.keys[0]):[]]};return er(K,W=>tr(u,W),{})};function y(A,R,O=()=>!0){const z={};return A===null||(Array.isArray(A)?A.forEach((N,U)=>{N!==null&&O(N)&&R.keys[U]&&(z[R.keys[U]]=N)}):typeof A=="object"?Object.keys(A).forEach(N=>{const U=A[N];U!=null&&O(U)&&(z[N]=U)}):z[R.keys[0]]=A),z}const r=t(qX,XX,WX,HX,ZX,YX,GX),S=ee.forwardRef(function(R,O){const z=a(),N=n(R),U=TC(N);eZ(U,z.breakpoints);const{className:H,children:K,columns:W=12,container:re=!1,component:ne="div",direction:se="row",wrap:ue="wrap",size:pe={},offset:Ce={},spacing:Le=0,rowSpacing:qe=Le,columnSpacing:ye=Le,unstable_level:Xe=0,...ut}=U,et=y(pe,z.breakpoints,ht=>ht!==!1),ot=y(Ce,z.breakpoints),mt=R.columns??(Xe?void 0:W),$e=R.spacing??(Xe?void 0:Le),it=R.rowSpacing??R.spacing??(Xe?void 0:qe),Tt=R.columnSpacing??R.spacing??(Xe?void 0:ye),xt={...U,level:Xe,columns:mt,container:re,direction:se,wrap:ue,spacing:$e,rowSpacing:it,columnSpacing:Tt,size:et,offset:ot},je=f(xt,z);return te.jsx(r,{ref:O,as:ne,ownerState:xt,className:si(je.root,H),...ut,children:ee.Children.map(K,ht=>{var Bt;return ee.isValidElement(ht)&&m1(ht,["Grid"])&&re&&ht.props.container?ee.cloneElement(ht,{unstable_level:((Bt=ht.props)==null?void 0:Bt.unstable_level)??Xe+1}):ht})})});return S.muiName="Grid",S}const oZ=mw(),sZ=Rj("div",{name:"MuiStack",slot:"Root"});function aZ(e){return Pj({props:e,name:"MuiStack",defaultTheme:oZ})}function lZ(e,t){const n=ee.Children.toArray(e).filter(Boolean);return n.reduce((a,u,f)=>(a.push(u),f<n.length-1&&a.push(ee.cloneElement(t,{key:`separator-${f}`})),a),[])}const cZ=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],uZ=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...kd({theme:t},PM({values:e.direction,breakpoints:t.breakpoints.values}),a=>({flexDirection:a}))};if(e.spacing){const a=_C(t),u=Object.keys(t.breakpoints.values).reduce((S,A)=>((typeof e.spacing=="object"&&e.spacing[A]!=null||typeof e.direction=="object"&&e.direction[A]!=null)&&(S[A]=!0),S),{}),f=PM({values:e.direction,base:u}),y=PM({values:e.spacing,base:u});typeof f=="object"&&Object.keys(f).forEach((S,A,R)=>{if(!f[S]){const z=A>0?f[R[A-1]]:"column";f[S]=z}}),n=Va(n,kd({theme:t},y,(S,A)=>e.useFlexGap?{gap:Z_(a,S)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${cZ(A?f[A]:e.direction)}`]:Z_(a,S)}}))}return n=dW(t.breakpoints,n),n};function hZ(e={}){const{createStyledComponent:t=sZ,useThemeProps:n=aZ,componentName:a="MuiStack"}=e,u=()=>er({root:["root"]},S=>tr(a,S),{}),f=t(uZ);return ee.forwardRef(function(S,A){const R=n(S),O=TC(R),{component:z="div",direction:N="column",spacing:U=0,divider:H,children:K,className:W,useFlexGap:re=!1,...ne}=O,se={direction:N,spacing:U,useFlexGap:re},ue=u();return te.jsx(f,{as:z,ownerState:se,ref:A,className:si(ue.root,W),...ne,children:H?lZ(K,H):K})})}const F1={black:"#000",white:"#fff"},dZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},x0={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},b0={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Hb={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},w0={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},S0={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},T0={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Fj(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:F1.white,default:F1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const fZ=Fj();function Nj(){return{text:{primary:F1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:F1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const I3=Nj();function P3(e,t,n,a){const u=a.light||a,f=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=gC(e.main,u):t==="dark"&&(e.dark=mC(e.main,f)))}function pZ(e="light"){return e==="dark"?{main:w0[200],light:w0[50],dark:w0[400]}:{main:w0[700],light:w0[400],dark:w0[800]}}function mZ(e="light"){return e==="dark"?{main:x0[200],light:x0[50],dark:x0[400]}:{main:x0[500],light:x0[300],dark:x0[700]}}function gZ(e="light"){return e==="dark"?{main:b0[500],light:b0[300],dark:b0[700]}:{main:b0[700],light:b0[400],dark:b0[800]}}function yZ(e="light"){return e==="dark"?{main:S0[400],light:S0[300],dark:S0[700]}:{main:S0[700],light:S0[500],dark:S0[900]}}function _Z(e="light"){return e==="dark"?{main:T0[400],light:T0[300],dark:T0[700]}:{main:T0[800],light:T0[500],dark:T0[900]}}function vZ(e="light"){return e==="dark"?{main:Hb[400],light:Hb[300],dark:Hb[700]}:{main:"#ed6c02",light:Hb[500],dark:Hb[900]}}function gD(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2,...u}=e,f=e.primary||pZ(t),y=e.secondary||mZ(t),r=e.error||gZ(t),S=e.info||yZ(t),A=e.success||_Z(t),R=e.warning||vZ(t);function O(H){return iW(H,I3.text.primary)>=n?I3.text.primary:fZ.text.primary}const z=({color:H,name:K,mainShade:W=500,lightShade:re=300,darkShade:ne=700})=>{if(H={...H},!H.main&&H[W]&&(H.main=H[W]),!H.hasOwnProperty("main"))throw new Error(Sm(11,K?` (${K})`:"",W));if(typeof H.main!="string")throw new Error(Sm(12,K?` (${K})`:"",JSON.stringify(H.main)));return P3(H,"light",re,a),P3(H,"dark",ne,a),H.contrastText||(H.contrastText=O(H.main)),H};let N;return t==="light"?N=Fj():t==="dark"&&(N=Nj()),Va({common:{...F1},mode:t,primary:z({color:f,name:"primary"}),secondary:z({color:y,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:r,name:"error"}),warning:z({color:R,name:"warning"}),info:z({color:S,name:"info"}),success:z({color:A,name:"success"}),grey:dZ,contrastThreshold:n,getContrastText:O,augmentColor:z,tonalOffset:a,...N},u)}function xZ(e){const t={};return Object.entries(e).forEach(a=>{const[u,f]=a;typeof f=="object"&&(t[u]=`${f.fontStyle?`${f.fontStyle} `:""}${f.fontVariant?`${f.fontVariant} `:""}${f.fontWeight?`${f.fontWeight} `:""}${f.fontStretch?`${f.fontStretch} `:""}${f.fontSize||""}${f.lineHeight?`/${f.lineHeight} `:""}${f.fontFamily||""}`)}),t}function bZ(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function wZ(e){return Math.round(e*1e5)/1e5}const D3={textTransform:"uppercase"},O3='"Roboto", "Helvetica", "Arial", sans-serif';function jj(e,t){const{fontFamily:n=O3,fontSize:a=14,fontWeightLight:u=300,fontWeightRegular:f=400,fontWeightMedium:y=500,fontWeightBold:r=700,htmlFontSize:S=16,allVariants:A,pxToRem:R,...O}=typeof t=="function"?t(e):t,z=a/14,N=R||(K=>`${K/S*z}rem`),U=(K,W,re,ne,se)=>({fontFamily:n,fontWeight:K,fontSize:N(W),lineHeight:re,...n===O3?{letterSpacing:`${wZ(ne/W)}em`}:{},...se,...A}),H={h1:U(u,96,1.167,-1.5),h2:U(u,60,1.2,-.5),h3:U(f,48,1.167,0),h4:U(f,34,1.235,.25),h5:U(f,24,1.334,0),h6:U(y,20,1.6,.15),subtitle1:U(f,16,1.75,.15),subtitle2:U(y,14,1.57,.1),body1:U(f,16,1.5,.15),body2:U(f,14,1.43,.15),button:U(y,14,1.75,.4,D3),caption:U(f,12,1.66,.4),overline:U(f,12,2.66,1,D3),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Va({htmlFontSize:S,pxToRem:N,fontFamily:n,fontSize:a,fontWeightLight:u,fontWeightRegular:f,fontWeightMedium:y,fontWeightBold:r,...H},O,{clone:!1})}const SZ=.2,TZ=.14,EZ=.12;function hs(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${SZ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${TZ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${EZ})`].join(",")}const CZ=["none",hs(0,2,1,-1,0,1,1,0,0,1,3,0),hs(0,3,1,-2,0,2,2,0,0,1,5,0),hs(0,3,3,-2,0,3,4,0,0,1,8,0),hs(0,2,4,-1,0,4,5,0,0,1,10,0),hs(0,3,5,-1,0,5,8,0,0,1,14,0),hs(0,3,5,-1,0,6,10,0,0,1,18,0),hs(0,4,5,-2,0,7,10,1,0,2,16,1),hs(0,5,5,-3,0,8,10,1,0,3,14,2),hs(0,5,6,-3,0,9,12,1,0,3,16,2),hs(0,6,6,-3,0,10,14,1,0,4,18,3),hs(0,6,7,-4,0,11,15,1,0,4,20,3),hs(0,7,8,-4,0,12,17,2,0,5,22,4),hs(0,7,8,-4,0,13,19,2,0,5,24,4),hs(0,7,9,-4,0,14,21,2,0,5,26,4),hs(0,8,9,-5,0,15,22,2,0,6,28,5),hs(0,8,10,-5,0,16,24,2,0,6,30,5),hs(0,8,11,-5,0,17,26,2,0,6,32,5),hs(0,9,11,-5,0,18,28,2,0,7,34,6),hs(0,9,12,-6,0,19,29,2,0,7,36,6),hs(0,10,13,-6,0,20,31,3,0,8,38,7),hs(0,10,13,-6,0,21,33,3,0,8,40,7),hs(0,10,14,-6,0,22,35,3,0,8,42,7),hs(0,11,14,-7,0,23,36,3,0,9,44,8),hs(0,11,15,-7,0,24,38,3,0,9,46,8)],AZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Uj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function L3(e){return`${Math.round(e)}ms`}function MZ(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function RZ(e){const t={...AZ,...e.easing},n={...Uj,...e.duration};return{getAutoHeightDuration:MZ,create:(u=["all"],f={})=>{const{duration:y=n.standard,easing:r=t.easeInOut,delay:S=0,...A}=f;return(Array.isArray(u)?u:[u]).map(R=>`${R} ${typeof y=="string"?y:L3(y)} ${r} ${typeof S=="string"?S:L3(S)}`).join(",")},...e,easing:t,duration:n}}const IZ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function PZ(e){return zf(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function Vj(e={}){const t={...e};function n(a){const u=Object.entries(a);for(let f=0;f<u.length;f++){const[y,r]=u[f];!PZ(r)||y.startsWith("unstable_")?delete a[y]:zf(r)&&(a[y]={...r},n(a[y]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function yI(e={},...t){const{breakpoints:n,mixins:a={},spacing:u,palette:f={},transitions:y={},typography:r={},shape:S,...A}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Sm(20));const R=gD(f),O=mw(e);let z=Va(O,{mixins:bZ(O.breakpoints,a),palette:R,shadows:CZ.slice(),typography:jj(R,r),transitions:RZ(y),zIndex:{...IZ}});return z=Va(z,A),z=t.reduce((N,U)=>Va(N,U),z),z.unstable_sxConfig={...dw,...A==null?void 0:A.unstable_sxConfig},z.unstable_sx=function(U){return Ug({sx:U,theme:this})},z.toRuntimeSource=Vj,z}function _I(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const DZ=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=_I(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function $j(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function Hj(e){return e==="dark"?DZ:[]}function OZ(e){const{palette:t={mode:"light"},opacity:n,overlays:a,...u}=e,f=gD(t);return{palette:f,opacity:{...$j(f.mode),...n},overlays:a||Hj(f.mode),...u}}function LZ(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const kZ=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],zZ=e=>(t,n)=>{const a=e.rootSelector||":root",u=e.colorSchemeSelector;let f=u;if(u==="class"&&(f=".%s"),u==="data"&&(f="[data-%s]"),u!=null&&u.startsWith("data-")&&!u.includes("%s")&&(f=`[${u}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const y={};return kZ(e.cssVarPrefix).forEach(r=>{y[r]=n[r],delete n[r]}),f==="media"?{[a]:n,"@media (prefers-color-scheme: dark)":{[a]:y}}:f?{[f.replace("%s",t)]:y,[`${a}, ${f.replace("%s",t)}`]:n}:{[a]:{...n,...y}}}if(f&&f!=="media")return`${a}, ${f.replace("%s",String(t))}`}else if(t){if(f==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[a]:n}};if(f)return f.replace("%s",String(t))}return a};function BZ(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function ln(e,t,n){!e[t]&&n&&(e[t]=n)}function c1(e){return typeof e!="string"||!e.startsWith("hsl")?e:ej(e)}function lm(e,t){`${t}Channel`in e||(e[`${t}Channel`]=l1(c1(e[t])))}function FZ(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const If=e=>{try{return e()}catch{}},NZ=(e="mui")=>FX(e);function NM(e,t,n,a){if(!t)return;t=t===!0?{}:t;const u=a==="dark"?"dark":"light";if(!n){e[a]=OZ({...t,palette:{mode:u,...t==null?void 0:t.palette}});return}const{palette:f,...y}=yI({...n,palette:{mode:u,...t==null?void 0:t.palette}});return e[a]={...t,palette:f,opacity:{...$j(u),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||Hj(u)},y}function jZ(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:a,disableCssColorScheme:u=!1,cssVarPrefix:f="mui",shouldSkipGeneratingVar:y=LZ,colorSchemeSelector:r=n.light&&n.dark?"media":void 0,rootSelector:S=":root",...A}=e,R=Object.keys(n)[0],O=a||(n.light&&R!=="light"?"light":R),z=NZ(f),{[O]:N,light:U,dark:H,...K}=n,W={...K};let re=N;if((O==="dark"&&!("dark"in n)||O==="light"&&!("light"in n))&&(re=!0),!re)throw new Error(Sm(21,O));const ne=NM(W,re,A,O);U&&!W.light&&NM(W,U,void 0,"light"),H&&!W.dark&&NM(W,H,void 0,"dark");let se={defaultColorScheme:O,...ne,cssVarPrefix:f,colorSchemeSelector:r,rootSelector:S,getCssVar:z,colorSchemes:W,font:{...xZ(ne.typography),...ne.font},spacing:FZ(A.spacing)};Object.keys(se.colorSchemes).forEach(qe=>{const ye=se.colorSchemes[qe].palette,Xe=ut=>{const et=ut.split("-"),ot=et[1],mt=et[2];return z(ut,ye[ot][mt])};if(ye.mode==="light"&&(ln(ye.common,"background","#fff"),ln(ye.common,"onBackground","#000")),ye.mode==="dark"&&(ln(ye.common,"background","#000"),ln(ye.common,"onBackground","#fff")),BZ(ye,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ye.mode==="light"){ln(ye.Alert,"errorColor",Wo(ye.error.light,.6)),ln(ye.Alert,"infoColor",Wo(ye.info.light,.6)),ln(ye.Alert,"successColor",Wo(ye.success.light,.6)),ln(ye.Alert,"warningColor",Wo(ye.warning.light,.6)),ln(ye.Alert,"errorFilledBg",Xe("palette-error-main")),ln(ye.Alert,"infoFilledBg",Xe("palette-info-main")),ln(ye.Alert,"successFilledBg",Xe("palette-success-main")),ln(ye.Alert,"warningFilledBg",Xe("palette-warning-main")),ln(ye.Alert,"errorFilledColor",If(()=>ye.getContrastText(ye.error.main))),ln(ye.Alert,"infoFilledColor",If(()=>ye.getContrastText(ye.info.main))),ln(ye.Alert,"successFilledColor",If(()=>ye.getContrastText(ye.success.main))),ln(ye.Alert,"warningFilledColor",If(()=>ye.getContrastText(ye.warning.main))),ln(ye.Alert,"errorStandardBg",Xo(ye.error.light,.9)),ln(ye.Alert,"infoStandardBg",Xo(ye.info.light,.9)),ln(ye.Alert,"successStandardBg",Xo(ye.success.light,.9)),ln(ye.Alert,"warningStandardBg",Xo(ye.warning.light,.9)),ln(ye.Alert,"errorIconColor",Xe("palette-error-main")),ln(ye.Alert,"infoIconColor",Xe("palette-info-main")),ln(ye.Alert,"successIconColor",Xe("palette-success-main")),ln(ye.Alert,"warningIconColor",Xe("palette-warning-main")),ln(ye.AppBar,"defaultBg",Xe("palette-grey-100")),ln(ye.Avatar,"defaultBg",Xe("palette-grey-400")),ln(ye.Button,"inheritContainedBg",Xe("palette-grey-300")),ln(ye.Button,"inheritContainedHoverBg",Xe("palette-grey-A100")),ln(ye.Chip,"defaultBorder",Xe("palette-grey-400")),ln(ye.Chip,"defaultAvatarColor",Xe("palette-grey-700")),ln(ye.Chip,"defaultIconColor",Xe("palette-grey-700")),ln(ye.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ln(ye.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ln(ye.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ln(ye.LinearProgress,"primaryBg",Xo(ye.primary.main,.62)),ln(ye.LinearProgress,"secondaryBg",Xo(ye.secondary.main,.62)),ln(ye.LinearProgress,"errorBg",Xo(ye.error.main,.62)),ln(ye.LinearProgress,"infoBg",Xo(ye.info.main,.62)),ln(ye.LinearProgress,"successBg",Xo(ye.success.main,.62)),ln(ye.LinearProgress,"warningBg",Xo(ye.warning.main,.62)),ln(ye.Skeleton,"bg",`rgba(${Xe("palette-text-primaryChannel")} / 0.11)`),ln(ye.Slider,"primaryTrack",Xo(ye.primary.main,.62)),ln(ye.Slider,"secondaryTrack",Xo(ye.secondary.main,.62)),ln(ye.Slider,"errorTrack",Xo(ye.error.main,.62)),ln(ye.Slider,"infoTrack",Xo(ye.info.main,.62)),ln(ye.Slider,"successTrack",Xo(ye.success.main,.62)),ln(ye.Slider,"warningTrack",Xo(ye.warning.main,.62));const ut=eT(ye.background.default,.8);ln(ye.SnackbarContent,"bg",ut),ln(ye.SnackbarContent,"color",If(()=>ye.getContrastText(ut))),ln(ye.SpeedDialAction,"fabHoverBg",eT(ye.background.paper,.15)),ln(ye.StepConnector,"border",Xe("palette-grey-400")),ln(ye.StepContent,"border",Xe("palette-grey-400")),ln(ye.Switch,"defaultColor",Xe("palette-common-white")),ln(ye.Switch,"defaultDisabledColor",Xe("palette-grey-100")),ln(ye.Switch,"primaryDisabledColor",Xo(ye.primary.main,.62)),ln(ye.Switch,"secondaryDisabledColor",Xo(ye.secondary.main,.62)),ln(ye.Switch,"errorDisabledColor",Xo(ye.error.main,.62)),ln(ye.Switch,"infoDisabledColor",Xo(ye.info.main,.62)),ln(ye.Switch,"successDisabledColor",Xo(ye.success.main,.62)),ln(ye.Switch,"warningDisabledColor",Xo(ye.warning.main,.62)),ln(ye.TableCell,"border",Xo(QS(ye.divider,1),.88)),ln(ye.Tooltip,"bg",QS(ye.grey[700],.92))}if(ye.mode==="dark"){ln(ye.Alert,"errorColor",Xo(ye.error.light,.6)),ln(ye.Alert,"infoColor",Xo(ye.info.light,.6)),ln(ye.Alert,"successColor",Xo(ye.success.light,.6)),ln(ye.Alert,"warningColor",Xo(ye.warning.light,.6)),ln(ye.Alert,"errorFilledBg",Xe("palette-error-dark")),ln(ye.Alert,"infoFilledBg",Xe("palette-info-dark")),ln(ye.Alert,"successFilledBg",Xe("palette-success-dark")),ln(ye.Alert,"warningFilledBg",Xe("palette-warning-dark")),ln(ye.Alert,"errorFilledColor",If(()=>ye.getContrastText(ye.error.dark))),ln(ye.Alert,"infoFilledColor",If(()=>ye.getContrastText(ye.info.dark))),ln(ye.Alert,"successFilledColor",If(()=>ye.getContrastText(ye.success.dark))),ln(ye.Alert,"warningFilledColor",If(()=>ye.getContrastText(ye.warning.dark))),ln(ye.Alert,"errorStandardBg",Wo(ye.error.light,.9)),ln(ye.Alert,"infoStandardBg",Wo(ye.info.light,.9)),ln(ye.Alert,"successStandardBg",Wo(ye.success.light,.9)),ln(ye.Alert,"warningStandardBg",Wo(ye.warning.light,.9)),ln(ye.Alert,"errorIconColor",Xe("palette-error-main")),ln(ye.Alert,"infoIconColor",Xe("palette-info-main")),ln(ye.Alert,"successIconColor",Xe("palette-success-main")),ln(ye.Alert,"warningIconColor",Xe("palette-warning-main")),ln(ye.AppBar,"defaultBg",Xe("palette-grey-900")),ln(ye.AppBar,"darkBg",Xe("palette-background-paper")),ln(ye.AppBar,"darkColor",Xe("palette-text-primary")),ln(ye.Avatar,"defaultBg",Xe("palette-grey-600")),ln(ye.Button,"inheritContainedBg",Xe("palette-grey-800")),ln(ye.Button,"inheritContainedHoverBg",Xe("palette-grey-700")),ln(ye.Chip,"defaultBorder",Xe("palette-grey-700")),ln(ye.Chip,"defaultAvatarColor",Xe("palette-grey-300")),ln(ye.Chip,"defaultIconColor",Xe("palette-grey-300")),ln(ye.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ln(ye.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ln(ye.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ln(ye.LinearProgress,"primaryBg",Wo(ye.primary.main,.5)),ln(ye.LinearProgress,"secondaryBg",Wo(ye.secondary.main,.5)),ln(ye.LinearProgress,"errorBg",Wo(ye.error.main,.5)),ln(ye.LinearProgress,"infoBg",Wo(ye.info.main,.5)),ln(ye.LinearProgress,"successBg",Wo(ye.success.main,.5)),ln(ye.LinearProgress,"warningBg",Wo(ye.warning.main,.5)),ln(ye.Skeleton,"bg",`rgba(${Xe("palette-text-primaryChannel")} / 0.13)`),ln(ye.Slider,"primaryTrack",Wo(ye.primary.main,.5)),ln(ye.Slider,"secondaryTrack",Wo(ye.secondary.main,.5)),ln(ye.Slider,"errorTrack",Wo(ye.error.main,.5)),ln(ye.Slider,"infoTrack",Wo(ye.info.main,.5)),ln(ye.Slider,"successTrack",Wo(ye.success.main,.5)),ln(ye.Slider,"warningTrack",Wo(ye.warning.main,.5));const ut=eT(ye.background.default,.98);ln(ye.SnackbarContent,"bg",ut),ln(ye.SnackbarContent,"color",If(()=>ye.getContrastText(ut))),ln(ye.SpeedDialAction,"fabHoverBg",eT(ye.background.paper,.15)),ln(ye.StepConnector,"border",Xe("palette-grey-600")),ln(ye.StepContent,"border",Xe("palette-grey-600")),ln(ye.Switch,"defaultColor",Xe("palette-grey-300")),ln(ye.Switch,"defaultDisabledColor",Xe("palette-grey-600")),ln(ye.Switch,"primaryDisabledColor",Wo(ye.primary.main,.55)),ln(ye.Switch,"secondaryDisabledColor",Wo(ye.secondary.main,.55)),ln(ye.Switch,"errorDisabledColor",Wo(ye.error.main,.55)),ln(ye.Switch,"infoDisabledColor",Wo(ye.info.main,.55)),ln(ye.Switch,"successDisabledColor",Wo(ye.success.main,.55)),ln(ye.Switch,"warningDisabledColor",Wo(ye.warning.main,.55)),ln(ye.TableCell,"border",Wo(QS(ye.divider,1),.68)),ln(ye.Tooltip,"bg",QS(ye.grey[700],.92))}lm(ye.background,"default"),lm(ye.background,"paper"),lm(ye.common,"background"),lm(ye.common,"onBackground"),lm(ye,"divider"),Object.keys(ye).forEach(ut=>{const et=ye[ut];ut!=="tonalOffset"&&et&&typeof et=="object"&&(et.main&&ln(ye[ut],"mainChannel",l1(c1(et.main))),et.light&&ln(ye[ut],"lightChannel",l1(c1(et.light))),et.dark&&ln(ye[ut],"darkChannel",l1(c1(et.dark))),et.contrastText&&ln(ye[ut],"contrastTextChannel",l1(c1(et.contrastText))),ut==="text"&&(lm(ye[ut],"primary"),lm(ye[ut],"secondary")),ut==="action"&&(et.active&&lm(ye[ut],"active"),et.selected&&lm(ye[ut],"selected")))})}),se=t.reduce((qe,ye)=>Va(qe,ye),se);const ue={prefix:f,disableCssColorScheme:u,shouldSkipGeneratingVar:y,getSelector:zZ(se)},{vars:pe,generateThemeVars:Ce,generateStyleSheets:Le}=UX(se,ue);return se.vars=pe,Object.entries(se.colorSchemes[se.defaultColorScheme]).forEach(([qe,ye])=>{se[qe]=ye}),se.generateThemeVars=Ce,se.generateStyleSheets=Le,se.generateSpacing=function(){return Tj(A.spacing,_C(this))},se.getColorSchemeSelector=VX(r),se.spacing=se.generateSpacing(),se.shouldSkipGeneratingVar=y,se.unstable_sxConfig={...dw,...A==null?void 0:A.unstable_sxConfig},se.unstable_sx=function(ye){return Ug({sx:ye,theme:this})},se.toRuntimeSource=Vj,se}function k3(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:gD({...n===!0?{}:n.palette,mode:t})})}function yw(e={},...t){const{palette:n,cssVariables:a=!1,colorSchemes:u=n?void 0:{light:!0},defaultColorScheme:f=n==null?void 0:n.mode,...y}=e,r=f||"light",S=u==null?void 0:u[r],A={...u,...n?{[r]:{...typeof S!="boolean"&&S,palette:n}}:void 0};if(a===!1){if(!("colorSchemes"in e))return yI(e,...t);let R=n;"palette"in e||A[r]&&(A[r]!==!0?R=A[r].palette:r==="dark"&&(R={mode:"dark"}));const O=yI({...e,palette:R},...t);return O.defaultColorScheme=r,O.colorSchemes=A,O.palette.mode==="light"&&(O.colorSchemes.light={...A.light!==!0&&A.light,palette:O.palette},k3(O,"dark",A.dark)),O.palette.mode==="dark"&&(O.colorSchemes.dark={...A.dark!==!0&&A.dark,palette:O.palette},k3(O,"light",A.light)),O}return!n&&!("light"in A)&&r==="light"&&(A.light=!0),jZ({...y,colorSchemes:A,defaultColorScheme:r,...typeof a!="boolean"&&a},...t)}const yD=yw(),Id="$$material";function xs(){const e=gw(yD);return e[Id]||e}function UZ(e){return te.jsx(lX,{...e,defaultTheme:yD,themeId:Id})}function Gj(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const kc=e=>Gj(e)&&e!=="classes",Mn=Mj({themeId:Id,defaultTheme:yD,rootShouldForwardProp:kc});function _D(e){return function(n){return te.jsx(UZ,{styles:typeof e=="function"?a=>e({theme:a,...n}):e})}}function VZ(){return TC}const Tr=RX;function $Z(e){return typeof e.main=="string"}function HZ(e,t=[]){if(!$Z(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function la(e=[]){return([,t])=>t&&HZ(t,e)}function nr(e){return MX(e)}function GZ(e){return tr("MuiLinearProgress",e)}or("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const vI=4,xI=Yg`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,qZ=typeof xI!="string"?mx`
        animation: ${xI} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,bI=Yg`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,WZ=typeof bI!="string"?mx`
        animation: ${bI} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,wI=Yg`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,XZ=typeof wI!="string"?mx`
        animation: ${wI} 3s infinite linear;
      `:null,ZZ=e=>{const{classes:t,variant:n,color:a}=e,u={root:["root",`color${Bn(a)}`,n],dashed:["dashed",`dashedColor${Bn(a)}`],bar1:["bar","bar1",`barColor${Bn(a)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${Bn(a)}`,n==="buffer"&&`color${Bn(a)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return er(u,GZ,t)},vD=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?gC(e.palette[t].main,.62):mC(e.palette[t].main,.5),YZ=Mn("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Bn(n.color)}`],t[n.variant]]}})(Tr(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{backgroundColor:vD(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),KZ=Mn("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${Bn(n.color)}`]]}})(Tr(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(la()).map(([t])=>{const n=vD(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),XZ||{animation:`${wI} 3s infinite linear`}),JZ=Mn("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t[`barColor${Bn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(Tr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${vI}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${vI}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:qZ||{animation:`${xI} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),QZ=Mn("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t[`barColor${Bn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(Tr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:vD(e,t),transition:`transform .${vI}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:WZ||{animation:`${bI} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),qj=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiLinearProgress"}),{className:u,color:f="primary",value:y,valueBuffer:r,variant:S="indeterminate",...A}=a,R={...a,color:f,variant:S},O=ZZ(R),z=uv(),N={},U={bar1:{},bar2:{}};if((S==="determinate"||S==="buffer")&&y!==void 0){N["aria-valuenow"]=Math.round(y),N["aria-valuemin"]=0,N["aria-valuemax"]=100;let H=y-100;z&&(H=-H),U.bar1.transform=`translateX(${H}%)`}if(S==="buffer"&&r!==void 0){let H=(r||0)-100;z&&(H=-H),U.bar2.transform=`translateX(${H}%)`}return te.jsxs(YZ,{className:si(O.root,u),ownerState:R,role:"progressbar",...N,ref:n,...A,children:[S==="buffer"?te.jsx(KZ,{className:O.dashed,ownerState:R}):null,te.jsx(JZ,{className:O.bar1,ownerState:R,style:U.bar1}),S==="determinate"?null:te.jsx(QZ,{className:O.bar2,ownerState:R,style:U.bar2})]})});function eY({theme:e,...t}){const n=Id in e?e[Id]:void 0;return te.jsx(zj,{...t,themeId:n?Id:void 0,theme:n||e})}const nT={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:tY}=BX({themeId:Id,theme:()=>yw({cssVariables:!0}),colorSchemeStorageKey:nT.colorSchemeStorageKey,modeStorageKey:nT.modeStorageKey,defaultColorScheme:{light:nT.defaultLightColorScheme,dark:nT.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:jj(e.palette,e.typography)};return t.unstable_sx=function(a){return Ug({sx:a,theme:this})},t}}),nY=tY;function iY({theme:e,...t}){const n=ee.useMemo(()=>{if(typeof e=="function")return e;const a=Id in e?e[Id]:e;return"colorSchemes"in a?null:"vars"in a?e:{...e,vars:null}},[e]);return n?te.jsx(eY,{theme:n,...t}):te.jsx(nY,{theme:e,...t})}const rY=or("MuiBox",["root"]),oY=yw(),fr=uX({themeId:Id,defaultTheme:oY,defaultClassName:rY.root,generateClassName:Ej.generate});function Wj(){return te.jsx(fr,{sx:{position:"fixed",top:0,left:0,zIndex:1301,width:"100%"},children:te.jsx(qj,{color:"primary"})})}function hv(e){return n=>te.jsx(ee.Suspense,{fallback:te.jsx(Wj,{}),children:te.jsx(e,{...n})})}function sY(){return te.jsx(te.Fragment,{children:te.jsx(q4,{})})}const aY=hv(ee.lazy(()=>cv(()=>import("./Login-8lJdv9pY.js"),__vite__mapDeps([0,1]),import.meta.url))),lY=hv(ee.lazy(()=>cv(()=>import("./Register-8HjlqoyF.js"),__vite__mapDeps([2,1]),import.meta.url))),cY={path:"/",element:te.jsx(sY,{}),children:[{path:"/login",element:te.jsx(aY,{})},{path:"/register",element:te.jsx(lY,{})}]},RC=Oj({themeId:Id});function uY(e){return tr("MuiPaper",e)}or("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const hY=e=>{const{square:t,elevation:n,variant:a,classes:u}=e,f={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${n}`]};return er(f,uY,u)},dY=Mn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(Tr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Kg=ee.forwardRef(function(t,n){var N;const a=nr({props:t,name:"MuiPaper"}),u=xs(),{className:f,component:y="div",elevation:r=1,square:S=!1,variant:A="elevation",...R}=a,O={...a,component:y,elevation:r,square:S,variant:A},z=hY(O);return te.jsx(dY,{as:y,ownerState:O,className:si(z.root,f),ref:n,...R,style:{...A==="elevation"&&{"--Paper-shadow":(u.vars||u).shadows[r],...u.vars&&{"--Paper-overlay":(N=u.vars.overlays)==null?void 0:N[r]},...!u.vars&&u.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Dr("#fff",_I(r))}, ${Dr("#fff",_I(r))})`}},...R.style}})});function fY(e){return tr("MuiAppBar",e)}or("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const pY=e=>{const{color:t,position:n,classes:a}=e,u={root:["root",`color${Bn(t)}`,`position${Bn(n)}`]};return er(u,fY,a)},z3=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,mY=Mn(Kg,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Bn(n.position)}`],t[`color${Bn(n.color)}`]]}})(Tr(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(la(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?z3(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?z3(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),gY=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiAppBar"}),{className:u,color:f="primary",enableColorOnDark:y=!1,position:r="fixed",...S}=a,A={...a,color:f,position:r,enableColorOnDark:y},R=pY(A);return te.jsx(mY,{square:!0,component:"header",ownerState:A,elevation:4,className:si(R.root,u,r==="fixed"&&"mui-fixed"),ref:n,...S})});function yY(e){return tr("MuiToolbar",e)}or("MuiToolbar",["root","gutters","regular","dense"]);const _Y=e=>{const{classes:t,disableGutters:n,variant:a}=e;return er({root:["root",!n&&"gutters",a]},yY,t)},vY=Mn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(Tr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),xY=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiToolbar"}),{className:u,component:f="div",disableGutters:y=!1,variant:r="regular",...S}=a,A={...a,component:f,disableGutters:y,variant:r},R=_Y(A);return te.jsx(vY,{as:f,className:si(R.root,u),ref:n,ownerState:A,...S})});function ex(e){try{return e.matches(":focus-visible")}catch{}return!1}function bY(e){return tr("MuiTypography",e)}const ME=or("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),wY={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},SY=VZ(),TY=e=>{const{align:t,gutterBottom:n,noWrap:a,paragraph:u,variant:f,classes:y}=e,r={root:["root",f,e.align!=="inherit"&&`align${Bn(t)}`,n&&"gutterBottom",a&&"noWrap",u&&"paragraph"]};return er(r,bY,y)},EY=Mn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Bn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Tr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,a])=>n!=="inherit"&&a&&typeof a=="object").map(([n,a])=>({props:{variant:n},style:a})),...Object.entries(e.palette).filter(la()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Bn(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),B3={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ii=ee.forwardRef(function(t,n){const{color:a,...u}=nr({props:t,name:"MuiTypography"}),f=!wY[a],y=SY({...u,...f&&{color:a}}),{align:r="inherit",className:S,component:A,gutterBottom:R=!1,noWrap:O=!1,paragraph:z=!1,variant:N="body1",variantMapping:U=B3,...H}=y,K={...y,align:r,color:a,className:S,component:A,gutterBottom:R,noWrap:O,paragraph:z,variant:N,variantMapping:U},W=A||(z?"p":U[N]||B3[N])||"span",re=TY(K);return te.jsx(EY,{as:W,ref:n,className:si(re.root,S),...H,ownerState:K,style:{...r!=="inherit"&&{"--Typography-textAlign":r},...H.style}})});function CY(e){return tr("MuiLink",e)}const AY=or("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),MY=({theme:e,ownerState:t})=>{const n=t.color,a=Dg(e,`palette.${n}.main`,!1)||Dg(e,`palette.${n}`,!1)||t.color,u=Dg(e,`palette.${n}.mainChannel`)||Dg(e,`palette.${n}Channel`);return"vars"in e&&u?`rgba(${u} / 0.4)`:Dr(a,.4)},F3={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},RY=e=>{const{classes:t,component:n,focusVisible:a,underline:u}=e,f={root:["root",`underline${Bn(u)}`,n==="button"&&"button",a&&"focusVisible"]};return er(f,CY,t)},IY=Mn(Ii,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${Bn(n.underline)}`],n.component==="button"&&t.button]}})(Tr(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:n})=>t==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(la()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:Dr(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Dr(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:Dr(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${AY.focusVisible}`]:{outline:"auto"}}}]}))),PY=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiLink"}),u=xs(),{className:f,color:y="primary",component:r="a",onBlur:S,onFocus:A,TypographyClasses:R,underline:O="always",variant:z="inherit",sx:N,...U}=a,[H,K]=ee.useState(!1),W=ue=>{ex(ue.target)||K(!1),S&&S(ue)},re=ue=>{ex(ue.target)&&K(!0),A&&A(ue)},ne={...a,color:y,component:r,focusVisible:H,underline:O,variant:z},se=RY(ne);return te.jsx(IY,{color:y,className:si(se.root,f),classes:R,component:r,onBlur:W,onFocus:re,ref:n,ownerState:ne,variant:z,...U,sx:[...F3[y]===void 0?[{color:y}]:[],...Array.isArray(N)?N:[N]],style:{...U.style,...O==="always"&&y!=="inherit"&&!F3[y]&&{"--Link-underlineColor":MY({theme:u,ownerState:ne})}}})}),sc=hZ({createStyledComponent:Mn("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>nr({props:e,name:"MuiStack"})});function DY(e){return tr("MuiSvgIcon",e)}or("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const OY=e=>{const{color:t,fontSize:n,classes:a}=e,u={root:["root",t!=="inherit"&&`color${Bn(t)}`,`fontSize${Bn(n)}`]};return er(u,DY,a)},LY=Mn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Bn(n.color)}`],t[`fontSize${Bn(n.fontSize)}`]]}})(Tr(({theme:e})=>{var t,n,a,u,f,y,r,S,A,R,O,z,N,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(u=(t=e.transitions)==null?void 0:t.create)==null?void 0:u.call(t,"fill",{duration:(a=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:a.shorter}),variants:[{props:H=>!H.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((y=(f=e.typography)==null?void 0:f.pxToRem)==null?void 0:y.call(f,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((S=(r=e.typography)==null?void 0:r.pxToRem)==null?void 0:S.call(r,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((R=(A=e.typography)==null?void 0:A.pxToRem)==null?void 0:R.call(A,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,H])=>H&&H.main).map(([H])=>{var K,W;return{props:{color:H},style:{color:(W=(K=(e.vars??e).palette)==null?void 0:K[H])==null?void 0:W.main}}}),{props:{color:"action"},style:{color:(z=(O=(e.vars??e).palette)==null?void 0:O.action)==null?void 0:z.active}},{props:{color:"disabled"},style:{color:(U=(N=(e.vars??e).palette)==null?void 0:N.action)==null?void 0:U.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),SI=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiSvgIcon"}),{children:u,className:f,color:y="inherit",component:r="svg",fontSize:S="medium",htmlColor:A,inheritViewBox:R=!1,titleAccess:O,viewBox:z="0 0 24 24",...N}=a,U=ee.isValidElement(u)&&u.type==="svg",H={...a,color:y,component:r,fontSize:S,instanceFontSize:t.fontSize,inheritViewBox:R,viewBox:z,hasSvgAsChild:U},K={};R||(K.viewBox=z);const W=OY(H);return te.jsxs(LY,{as:r,className:si(W.root,f),focusable:"false",color:A,"aria-hidden":O?void 0:!0,role:O?"img":void 0,ref:n,...K,...N,...U&&u.props,ownerState:H,children:[U?u.props.children:u,O?te.jsx("title",{children:O}):null]})});SI.muiName="SvgIcon";function cc(e,t){function n(a,u){return te.jsx(SI,{"data-testid":void 0,ref:u,...a,children:e})}return n.muiName=SI.muiName,ee.memo(ee.forwardRef(n))}const kY=cc(te.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function zY(e){return tr("MuiAvatar",e)}or("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);function as(...e){const t=ee.useRef(void 0),n=ee.useCallback(a=>{const u=e.map(f=>{if(f==null)return null;if(typeof f=="function"){const y=f,r=y(a);return typeof r=="function"?r:()=>{y(null)}}return f.current=a,()=>{f.current=null}});return()=>{u.forEach(f=>f==null?void 0:f())}},e);return ee.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=n(a))},e)}function BY(e){return typeof e=="string"}function Xj(e,t,n){return e===void 0||BY(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function Zj(e,t,n){return typeof e=="function"?e(t,n):e}function Yj(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function N3(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Kj(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:u,className:f}=e;if(!t){const N=si(n==null?void 0:n.className,f,u==null?void 0:u.className,a==null?void 0:a.className),U={...n==null?void 0:n.style,...u==null?void 0:u.style,...a==null?void 0:a.style},H={...n,...u,...a};return N.length>0&&(H.className=N),Object.keys(U).length>0&&(H.style=U),{props:H,internalRef:void 0}}const y=Yj({...u,...a}),r=N3(a),S=N3(u),A=t(y),R=si(A==null?void 0:A.className,n==null?void 0:n.className,f,u==null?void 0:u.className,a==null?void 0:a.className),O={...A==null?void 0:A.style,...n==null?void 0:n.style,...u==null?void 0:u.style,...a==null?void 0:a.style},z={...A,...n,...S,...r};return R.length>0&&(z.className=R),Object.keys(O).length>0&&(z.style=O),{props:z,internalRef:A.ref}}function Fr(e,t){const{className:n,elementType:a,ownerState:u,externalForwardedProps:f,internalForwardedProps:y,shouldForwardComponentProp:r=!1,...S}=t,{component:A,slots:R={[e]:void 0},slotProps:O={[e]:void 0},...z}=f,N=R[e]||a,U=Zj(O[e],u),{props:{component:H,...K},internalRef:W}=Kj({className:n,...S,externalForwardedProps:e==="root"?z:void 0,externalSlotProps:U}),re=as(W,U==null?void 0:U.ref,t.ref),ne=e==="root"?H||A:H,se=Xj(N,{...e==="root"&&!A&&!R[e]&&y,...e!=="root"&&!R[e]&&y,...K,...ne&&!r&&{as:ne},...ne&&r&&{component:ne},ref:re},u);return[N,se]}const FY=e=>{const{classes:t,variant:n,colorDefault:a}=e;return er({root:["root",n,a&&"colorDefault"],img:["img"],fallback:["fallback"]},zY,t)},NY=Mn("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(Tr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),jY=Mn("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),UY=Mn(kY,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function VY({crossOrigin:e,referrerPolicy:t,src:n,srcSet:a}){const[u,f]=ee.useState(!1);return ee.useEffect(()=>{if(!n&&!a)return;f(!1);let y=!0;const r=new Image;return r.onload=()=>{y&&f("loaded")},r.onerror=()=>{y&&f("error")},r.crossOrigin=e,r.referrerPolicy=t,r.src=n,a&&(r.srcset=a),()=>{y=!1}},[e,t,n,a]),u}const IC=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiAvatar"}),{alt:u,children:f,className:y,component:r="div",slots:S={},slotProps:A={},imgProps:R,sizes:O,src:z,srcSet:N,variant:U="circular",...H}=a;let K=null;const W={...a,component:r,variant:U},re=VY({...R,...typeof A.img=="function"?A.img(W):A.img,src:z,srcSet:N}),ne=z||N,se=ne&&re!=="error";W.colorDefault=!se,delete W.ownerState;const ue=FY(W),[pe,Ce]=Fr("root",{ref:n,className:si(ue.root,y),elementType:NY,externalForwardedProps:{slots:S,slotProps:A,component:r,...H},ownerState:W}),[Le,qe]=Fr("img",{className:ue.img,elementType:jY,externalForwardedProps:{slots:S,slotProps:{img:{...R,...A.img}}},additionalProps:{alt:u,src:z,srcSet:N,sizes:O},ownerState:W}),[ye,Xe]=Fr("fallback",{className:ue.fallback,elementType:UY,externalForwardedProps:{slots:S,slotProps:A},shouldForwardComponentProp:!0,ownerState:W});return se?K=te.jsx(Le,{...qe}):f||f===0?K=f:ne&&u?K=u[0]:K=te.jsx(ye,{...Xe}),te.jsx(pe,{...Ce,children:K})}),$Y="/sample-page",Jj={fontFamily:"International Mono",borderRadius:8},HY=""+new URL("yourLogoHere-D1NnJ4Dc.jpg",import.meta.url).href;function xD(){return te.jsx("img",{src:HY,alt:"Infra-X-Logo",width:"50"})}function Qj(){return te.jsx(PY,{component:Pg,to:$Y,"aria-label":"theme-logo",children:te.jsx(xD,{})})}function GY(e){return tr("MuiCard",e)}or("MuiCard",["root"]);const qY=e=>{const{classes:t}=e;return er({root:["root"]},GY,t)},WY=Mn(Kg,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Vg=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiCard"}),{className:u,raised:f=!1,...y}=a,r={...a,raised:f},S=qY(r);return te.jsx(WY,{className:si(S.root,u),elevation:f?8:void 0,ref:n,ownerState:r,...y})}),gu=rZ({createStyledComponent:Mn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>nr({props:e,name:"MuiGrid"}),useTheme:xs}),bD=ee.createContext(void 0);function yx(){return ee.useContext(bD)}var j3;const XY=Mn("fieldset",{shouldForwardProp:kc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ZY=Mn("legend",{shouldForwardProp:kc})(Tr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function YY(e){const{children:t,classes:n,className:a,label:u,notched:f,...y}=e,r=u!=null&&u!=="",S={...e,notched:f,withLabel:r};return te.jsx(XY,{"aria-hidden":!0,className:a,ownerState:S,...y,children:te.jsx(ZY,{ownerState:S,children:r?te.jsx("span",{children:u}):j3||(j3=te.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function _x({props:e,states:t,muiFormControl:n}){return t.reduce((a,u)=>(a[u]=e[u],n&&typeof e[u]>"u"&&(a[u]=n[u]),a),{})}function _w(e,t=166){let n;function a(...u){const f=()=>{e.apply(this,u)};clearTimeout(n),n=setTimeout(f,t)}return a.clear=()=>{clearTimeout(n)},a}function _u(e){const t=ee.useRef(e);return Lc(()=>{t.current=e}),ee.useRef((...n)=>(0,t.current)(...n)).current}function sl(e){return e&&e.ownerDocument||document}function bu(e){return sl(e).defaultView||window}function iT(e){return parseInt(e,10)||0}const KY={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function JY(e){for(const t in e)return!1;return!0}function U3(e){return JY(e)||e.outerHeightStyle===0&&!e.overflowing}const QY=ee.forwardRef(function(t,n){const{onChange:a,maxRows:u,minRows:f=1,style:y,value:r,...S}=t,{current:A}=ee.useRef(r!=null),R=ee.useRef(null),O=as(n,R),z=ee.useRef(null),N=ee.useRef(null),U=ee.useCallback(()=>{const ne=R.current,se=N.current;if(!ne||!se)return;const pe=bu(ne).getComputedStyle(ne);if(pe.width==="0px")return{outerHeightStyle:0,overflowing:!1};se.style.width=pe.width,se.value=ne.value||t.placeholder||"x",se.value.slice(-1)===`
`&&(se.value+=" ");const Ce=pe.boxSizing,Le=iT(pe.paddingBottom)+iT(pe.paddingTop),qe=iT(pe.borderBottomWidth)+iT(pe.borderTopWidth),ye=se.scrollHeight;se.value="x";const Xe=se.scrollHeight;let ut=ye;f&&(ut=Math.max(Number(f)*Xe,ut)),u&&(ut=Math.min(Number(u)*Xe,ut)),ut=Math.max(ut,Xe);const et=ut+(Ce==="border-box"?Le+qe:0),ot=Math.abs(ut-ye)<=1;return{outerHeightStyle:et,overflowing:ot}},[u,f,t.placeholder]),H=_u(()=>{const ne=R.current,se=U();if(!ne||!se||U3(se))return!1;const ue=se.outerHeightStyle;return z.current!=null&&z.current!==ue}),K=ee.useCallback(()=>{const ne=R.current,se=U();if(!ne||!se||U3(se))return;const ue=se.outerHeightStyle;z.current!==ue&&(z.current=ue,ne.style.height=`${ue}px`),ne.style.overflow=se.overflowing?"hidden":""},[U]),W=ee.useRef(-1);Lc(()=>{const ne=_w(K),se=R==null?void 0:R.current;if(!se)return;const ue=bu(se);ue.addEventListener("resize",ne);let pe;return typeof ResizeObserver<"u"&&(pe=new ResizeObserver(()=>{H()&&(pe.unobserve(se),cancelAnimationFrame(W.current),K(),W.current=requestAnimationFrame(()=>{pe.observe(se)}))}),pe.observe(se)),()=>{ne.clear(),cancelAnimationFrame(W.current),ue.removeEventListener("resize",ne),pe&&pe.disconnect()}},[U,K,H]),Lc(()=>{K()});const re=ne=>{A||K();const se=ne.target,ue=se.value.length,pe=se.value.endsWith(`
`),Ce=se.selectionStart===ue;pe&&Ce&&se.setSelectionRange(ue,ue),a&&a(ne)};return te.jsxs(ee.Fragment,{children:[te.jsx("textarea",{value:r,onChange:re,ref:O,rows:f,style:y,...S}),te.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:N,tabIndex:-1,style:{...KY.shadow,...y,paddingTop:0,paddingBottom:0}})]})});function N1(e){return typeof e=="string"}function V3(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function RE(e,t=!1){return e&&(V3(e.value)&&e.value!==""||t&&V3(e.defaultValue)&&e.defaultValue!=="")}function eK(e){return e.startAdornment}function tK(e){return tr("MuiInputBase",e)}const tx=or("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var $3;const PC=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Bn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},DC=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},nK=e=>{const{classes:t,color:n,disabled:a,error:u,endAdornment:f,focused:y,formControl:r,fullWidth:S,hiddenLabel:A,multiline:R,readOnly:O,size:z,startAdornment:N,type:U}=e,H={root:["root",`color${Bn(n)}`,a&&"disabled",u&&"error",S&&"fullWidth",y&&"focused",r&&"formControl",z&&z!=="medium"&&`size${Bn(z)}`,R&&"multiline",N&&"adornedStart",f&&"adornedEnd",A&&"hiddenLabel",O&&"readOnly"],input:["input",a&&"disabled",U==="search"&&"inputTypeSearch",R&&"inputMultiline",z==="small"&&"inputSizeSmall",A&&"inputHiddenLabel",N&&"inputAdornedStart",f&&"inputAdornedEnd",O&&"readOnly"]};return er(H,tK,t)},OC=Mn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:PC})(Tr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${tx.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),LC=Mn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:DC})(Tr(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},a={opacity:"0 !important"},u=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${tx.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus::-ms-input-placeholder":u},[`&.${tx.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:f})=>!f.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:f})=>f.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),H3=_D({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),wD=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiInputBase"}),{"aria-describedby":u,autoComplete:f,autoFocus:y,className:r,color:S,components:A={},componentsProps:R={},defaultValue:O,disabled:z,disableInjectingGlobalStyles:N,endAdornment:U,error:H,fullWidth:K=!1,id:W,inputComponent:re="input",inputProps:ne={},inputRef:se,margin:ue,maxRows:pe,minRows:Ce,multiline:Le=!1,name:qe,onBlur:ye,onChange:Xe,onClick:ut,onFocus:et,onKeyDown:ot,onKeyUp:mt,placeholder:$e,readOnly:it,renderSuffix:Tt,rows:xt,size:je,slotProps:ht={},slots:Bt={},startAdornment:Ft,type:on="text",value:en,...jt}=a,Rn=ne.value!=null?ne.value:en,{current:Vn}=ee.useRef(Rn!=null),Hn=ee.useRef(),On=ee.useCallback(Nn=>{},[]),ai=as(Hn,se,ne.ref,On),[oi,Ln]=ee.useState(!1),zn=yx(),hi=_x({props:a,muiFormControl:zn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});hi.focused=zn?zn.focused:oi,ee.useEffect(()=>{!zn&&z&&oi&&(Ln(!1),ye&&ye())},[zn,z,oi,ye]);const fi=zn&&zn.onFilled,ci=zn&&zn.onEmpty,Pi=ee.useCallback(Nn=>{RE(Nn)?fi&&fi():ci&&ci()},[fi,ci]);Lc(()=>{Vn&&Pi({value:Rn})},[Rn,Pi,Vn]);const ii=Nn=>{et&&et(Nn),ne.onFocus&&ne.onFocus(Nn),zn&&zn.onFocus?zn.onFocus(Nn):Ln(!0)},pi=Nn=>{ye&&ye(Nn),ne.onBlur&&ne.onBlur(Nn),zn&&zn.onBlur?zn.onBlur(Nn):Ln(!1)},yi=(Nn,...qr)=>{if(!Vn){const mr=Nn.target||Hn.current;if(mr==null)throw new Error(Sm(1));Pi({value:mr.value})}ne.onChange&&ne.onChange(Nn,...qr),Xe&&Xe(Nn,...qr)};ee.useEffect(()=>{Pi(Hn.current)},[]);const dt=Nn=>{Hn.current&&Nn.currentTarget===Nn.target&&Hn.current.focus(),ut&&ut(Nn)};let Cn=re,wn=ne;Le&&Cn==="input"&&(xt?wn={type:void 0,minRows:xt,maxRows:xt,...wn}:wn={type:void 0,maxRows:pe,minRows:Ce,...wn},Cn=QY);const In=Nn=>{Pi(Nn.animationName==="mui-auto-fill-cancel"?Hn.current:{value:"x"})};ee.useEffect(()=>{zn&&zn.setAdornedStart(!!Ft)},[zn,Ft]);const qn={...a,color:hi.color||"primary",disabled:hi.disabled,endAdornment:U,error:hi.error,focused:hi.focused,formControl:zn,fullWidth:K,hiddenLabel:hi.hiddenLabel,multiline:Le,size:hi.size,startAdornment:Ft,type:on},Xn=nK(qn),Ni=Bt.root||A.Root||OC,Mi=ht.root||R.root||{},pr=Bt.input||A.Input||LC;return wn={...wn,...ht.input??R.input},te.jsxs(ee.Fragment,{children:[!N&&typeof H3=="function"&&($3||($3=te.jsx(H3,{}))),te.jsxs(Ni,{...Mi,ref:n,onClick:dt,...jt,...!N1(Ni)&&{ownerState:{...qn,...Mi.ownerState}},className:si(Xn.root,Mi.className,r,it&&"MuiInputBase-readOnly"),children:[Ft,te.jsx(bD.Provider,{value:null,children:te.jsx(pr,{"aria-invalid":hi.error,"aria-describedby":u,autoComplete:f,autoFocus:y,defaultValue:O,disabled:hi.disabled,id:W,onAnimationStart:In,name:qe,placeholder:$e,readOnly:it,required:hi.required,rows:xt,value:Rn,onKeyDown:ot,onKeyUp:mt,type:on,...wn,...!N1(pr)&&{as:Cn,ownerState:{...qn,...wn.ownerState}},ref:ai,className:si(Xn.input,wn.className,it&&"MuiInputBase-readOnly"),onBlur:pi,onChange:yi,onFocus:ii})}),U,Tt?Tt({...hi,startAdornment:Ft}):null]})]})});function iK(e){return tr("MuiOutlinedInput",e)}const Pf={...tx,...or("MuiOutlinedInput",["root","notchedOutline","input"])},rK=e=>{const{classes:t}=e,a=er({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},iK,t);return{...t,...a}},oK=Mn(OC,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:PC})(Tr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Pf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Pf.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Pf.focused} .${Pf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(la()).map(([n])=>({props:{color:n},style:{[`&.${Pf.focused} .${Pf.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Pf.error} .${Pf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Pf.disabled} .${Pf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:a})=>n.multiline&&a==="small",style:{padding:"8.5px 14px"}}]}})),sK=Mn(YY,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Tr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),aK=Mn(LC,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:DC})(Tr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),N_=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiOutlinedInput"}),{components:u={},fullWidth:f=!1,inputComponent:y="input",label:r,multiline:S=!1,notched:A,slots:R={},slotProps:O={},type:z="text",...N}=a,U=rK(a),H=yx(),K=_x({props:a,muiFormControl:H,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),W={...a,color:K.color||"primary",disabled:K.disabled,error:K.error,focused:K.focused,formControl:H,fullWidth:f,hiddenLabel:K.hiddenLabel,multiline:S,size:K.size,type:z},re=R.root??u.Root??oK,ne=R.input??u.Input??aK,[se,ue]=Fr("notchedOutline",{elementType:sK,className:U.notchedOutline,shouldForwardComponentProp:!0,ownerState:W,externalForwardedProps:{slots:R,slotProps:O},additionalProps:{label:r!=null&&r!==""&&K.required?te.jsxs(ee.Fragment,{children:[r,"","*"]}):r}});return te.jsx(wD,{slots:{root:re,input:ne},slotProps:O,renderSuffix:pe=>te.jsx(se,{...ue,notched:typeof A<"u"?A:!!(pe.startAdornment||pe.filled||pe.focused)}),fullWidth:f,inputComponent:y,multiline:S,ref:n,type:z,...N,classes:{...U,notchedOutline:null}})});N_.muiName="Input";var Rc="top",wh="bottom",Sh="right",Ic="left",SD="auto",vw=[Rc,wh,Sh,Ic],nx="start",j1="end",lK="clippingParents",eU="viewport",Gb="popper",cK="reference",G3=vw.reduce(function(e,t){return e.concat([t+"-"+nx,t+"-"+j1])},[]),tU=[].concat(vw,[SD]).reduce(function(e,t){return e.concat([t,t+"-"+nx,t+"-"+j1])},[]),uK="beforeRead",hK="read",dK="afterRead",fK="beforeMain",pK="main",mK="afterMain",gK="beforeWrite",yK="write",_K="afterWrite",vK=[uK,hK,dK,fK,pK,mK,gK,yK,_K];function Gf(e){return e?(e.nodeName||"").toLowerCase():null}function wu(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Y_(e){var t=wu(e).Element;return e instanceof t||e instanceof Element}function _h(e){var t=wu(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function TD(e){if(typeof ShadowRoot>"u")return!1;var t=wu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function xK(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var a=t.styles[n]||{},u=t.attributes[n]||{},f=t.elements[n];!_h(f)||!Gf(f)||(Object.assign(f.style,a),Object.keys(u).forEach(function(y){var r=u[y];r===!1?f.removeAttribute(y):f.setAttribute(y,r===!0?"":r)}))})}function bK(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(a){var u=t.elements[a],f=t.attributes[a]||{},y=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:n[a]),r=y.reduce(function(S,A){return S[A]="",S},{});!_h(u)||!Gf(u)||(Object.assign(u.style,r),Object.keys(f).forEach(function(S){u.removeAttribute(S)}))})}}const wK={name:"applyStyles",enabled:!0,phase:"write",fn:xK,effect:bK,requires:["computeStyles"]};function Uf(e){return e.split("-")[0]}var j_=Math.max,IE=Math.min,ix=Math.round;function TI(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function nU(){return!/^((?!chrome|android).)*safari/i.test(TI())}function rx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=e.getBoundingClientRect(),u=1,f=1;t&&_h(e)&&(u=e.offsetWidth>0&&ix(a.width)/e.offsetWidth||1,f=e.offsetHeight>0&&ix(a.height)/e.offsetHeight||1);var y=Y_(e)?wu(e):window,r=y.visualViewport,S=!nU()&&n,A=(a.left+(S&&r?r.offsetLeft:0))/u,R=(a.top+(S&&r?r.offsetTop:0))/f,O=a.width/u,z=a.height/f;return{width:O,height:z,top:R,right:A+O,bottom:R+z,left:A,x:A,y:R}}function ED(e){var t=rx(e),n=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:a}}function iU(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&TD(n)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Tm(e){return wu(e).getComputedStyle(e)}function SK(e){return["table","td","th"].indexOf(Gf(e))>=0}function Jg(e){return((Y_(e)?e.ownerDocument:e.document)||window.document).documentElement}function kC(e){return Gf(e)==="html"?e:e.assignedSlot||e.parentNode||(TD(e)?e.host:null)||Jg(e)}function q3(e){return!_h(e)||Tm(e).position==="fixed"?null:e.offsetParent}function TK(e){var t=/firefox/i.test(TI()),n=/Trident/i.test(TI());if(n&&_h(e)){var a=Tm(e);if(a.position==="fixed")return null}var u=kC(e);for(TD(u)&&(u=u.host);_h(u)&&["html","body"].indexOf(Gf(u))<0;){var f=Tm(u);if(f.transform!=="none"||f.perspective!=="none"||f.contain==="paint"||["transform","perspective"].indexOf(f.willChange)!==-1||t&&f.willChange==="filter"||t&&f.filter&&f.filter!=="none")return u;u=u.parentNode}return null}function xw(e){for(var t=wu(e),n=q3(e);n&&SK(n)&&Tm(n).position==="static";)n=q3(n);return n&&(Gf(n)==="html"||Gf(n)==="body"&&Tm(n).position==="static")?t:n||TK(e)||t}function CD(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function g1(e,t,n){return j_(e,IE(t,n))}function EK(e,t,n){var a=g1(e,t,n);return a>n?n:a}function rU(){return{top:0,right:0,bottom:0,left:0}}function oU(e){return Object.assign({},rU(),e)}function sU(e,t){return t.reduce(function(n,a){return n[a]=e,n},{})}var CK=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,oU(typeof t!="number"?t:sU(t,vw))};function AK(e){var t,n=e.state,a=e.name,u=e.options,f=n.elements.arrow,y=n.modifiersData.popperOffsets,r=Uf(n.placement),S=CD(r),A=[Ic,Sh].indexOf(r)>=0,R=A?"height":"width";if(!(!f||!y)){var O=CK(u.padding,n),z=ED(f),N=S==="y"?Rc:Ic,U=S==="y"?wh:Sh,H=n.rects.reference[R]+n.rects.reference[S]-y[S]-n.rects.popper[R],K=y[S]-n.rects.reference[S],W=xw(f),re=W?S==="y"?W.clientHeight||0:W.clientWidth||0:0,ne=H/2-K/2,se=O[N],ue=re-z[R]-O[U],pe=re/2-z[R]/2+ne,Ce=g1(se,pe,ue),Le=S;n.modifiersData[a]=(t={},t[Le]=Ce,t.centerOffset=Ce-pe,t)}}function MK(e){var t=e.state,n=e.options,a=n.element,u=a===void 0?"[data-popper-arrow]":a;u!=null&&(typeof u=="string"&&(u=t.elements.popper.querySelector(u),!u)||iU(t.elements.popper,u)&&(t.elements.arrow=u))}const RK={name:"arrow",enabled:!0,phase:"main",fn:AK,effect:MK,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ox(e){return e.split("-")[1]}var IK={top:"auto",right:"auto",bottom:"auto",left:"auto"};function PK(e,t){var n=e.x,a=e.y,u=t.devicePixelRatio||1;return{x:ix(n*u)/u||0,y:ix(a*u)/u||0}}function W3(e){var t,n=e.popper,a=e.popperRect,u=e.placement,f=e.variation,y=e.offsets,r=e.position,S=e.gpuAcceleration,A=e.adaptive,R=e.roundOffsets,O=e.isFixed,z=y.x,N=z===void 0?0:z,U=y.y,H=U===void 0?0:U,K=typeof R=="function"?R({x:N,y:H}):{x:N,y:H};N=K.x,H=K.y;var W=y.hasOwnProperty("x"),re=y.hasOwnProperty("y"),ne=Ic,se=Rc,ue=window;if(A){var pe=xw(n),Ce="clientHeight",Le="clientWidth";if(pe===wu(n)&&(pe=Jg(n),Tm(pe).position!=="static"&&r==="absolute"&&(Ce="scrollHeight",Le="scrollWidth")),pe=pe,u===Rc||(u===Ic||u===Sh)&&f===j1){se=wh;var qe=O&&pe===ue&&ue.visualViewport?ue.visualViewport.height:pe[Ce];H-=qe-a.height,H*=S?1:-1}if(u===Ic||(u===Rc||u===wh)&&f===j1){ne=Sh;var ye=O&&pe===ue&&ue.visualViewport?ue.visualViewport.width:pe[Le];N-=ye-a.width,N*=S?1:-1}}var Xe=Object.assign({position:r},A&&IK),ut=R===!0?PK({x:N,y:H},wu(n)):{x:N,y:H};if(N=ut.x,H=ut.y,S){var et;return Object.assign({},Xe,(et={},et[se]=re?"0":"",et[ne]=W?"0":"",et.transform=(ue.devicePixelRatio||1)<=1?"translate("+N+"px, "+H+"px)":"translate3d("+N+"px, "+H+"px, 0)",et))}return Object.assign({},Xe,(t={},t[se]=re?H+"px":"",t[ne]=W?N+"px":"",t.transform="",t))}function DK(e){var t=e.state,n=e.options,a=n.gpuAcceleration,u=a===void 0?!0:a,f=n.adaptive,y=f===void 0?!0:f,r=n.roundOffsets,S=r===void 0?!0:r,A={placement:Uf(t.placement),variation:ox(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:u,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,W3(Object.assign({},A,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:y,roundOffsets:S})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,W3(Object.assign({},A,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:S})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const OK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:DK,data:{}};var rT={passive:!0};function LK(e){var t=e.state,n=e.instance,a=e.options,u=a.scroll,f=u===void 0?!0:u,y=a.resize,r=y===void 0?!0:y,S=wu(t.elements.popper),A=[].concat(t.scrollParents.reference,t.scrollParents.popper);return f&&A.forEach(function(R){R.addEventListener("scroll",n.update,rT)}),r&&S.addEventListener("resize",n.update,rT),function(){f&&A.forEach(function(R){R.removeEventListener("scroll",n.update,rT)}),r&&S.removeEventListener("resize",n.update,rT)}}const kK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:LK,data:{}};var zK={left:"right",right:"left",bottom:"top",top:"bottom"};function tE(e){return e.replace(/left|right|bottom|top/g,function(t){return zK[t]})}var BK={start:"end",end:"start"};function X3(e){return e.replace(/start|end/g,function(t){return BK[t]})}function AD(e){var t=wu(e),n=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:n,scrollTop:a}}function MD(e){return rx(Jg(e)).left+AD(e).scrollLeft}function FK(e,t){var n=wu(e),a=Jg(e),u=n.visualViewport,f=a.clientWidth,y=a.clientHeight,r=0,S=0;if(u){f=u.width,y=u.height;var A=nU();(A||!A&&t==="fixed")&&(r=u.offsetLeft,S=u.offsetTop)}return{width:f,height:y,x:r+MD(e),y:S}}function NK(e){var t,n=Jg(e),a=AD(e),u=(t=e.ownerDocument)==null?void 0:t.body,f=j_(n.scrollWidth,n.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),y=j_(n.scrollHeight,n.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),r=-a.scrollLeft+MD(e),S=-a.scrollTop;return Tm(u||n).direction==="rtl"&&(r+=j_(n.clientWidth,u?u.clientWidth:0)-f),{width:f,height:y,x:r,y:S}}function RD(e){var t=Tm(e),n=t.overflow,a=t.overflowX,u=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+u+a)}function aU(e){return["html","body","#document"].indexOf(Gf(e))>=0?e.ownerDocument.body:_h(e)&&RD(e)?e:aU(kC(e))}function y1(e,t){var n;t===void 0&&(t=[]);var a=aU(e),u=a===((n=e.ownerDocument)==null?void 0:n.body),f=wu(a),y=u?[f].concat(f.visualViewport||[],RD(a)?a:[]):a,r=t.concat(y);return u?r:r.concat(y1(kC(y)))}function EI(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function jK(e,t){var n=rx(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Z3(e,t,n){return t===eU?EI(FK(e,n)):Y_(t)?jK(t,n):EI(NK(Jg(e)))}function UK(e){var t=y1(kC(e)),n=["absolute","fixed"].indexOf(Tm(e).position)>=0,a=n&&_h(e)?xw(e):e;return Y_(a)?t.filter(function(u){return Y_(u)&&iU(u,a)&&Gf(u)!=="body"}):[]}function VK(e,t,n,a){var u=t==="clippingParents"?UK(e):[].concat(t),f=[].concat(u,[n]),y=f[0],r=f.reduce(function(S,A){var R=Z3(e,A,a);return S.top=j_(R.top,S.top),S.right=IE(R.right,S.right),S.bottom=IE(R.bottom,S.bottom),S.left=j_(R.left,S.left),S},Z3(e,y,a));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function lU(e){var t=e.reference,n=e.element,a=e.placement,u=a?Uf(a):null,f=a?ox(a):null,y=t.x+t.width/2-n.width/2,r=t.y+t.height/2-n.height/2,S;switch(u){case Rc:S={x:y,y:t.y-n.height};break;case wh:S={x:y,y:t.y+t.height};break;case Sh:S={x:t.x+t.width,y:r};break;case Ic:S={x:t.x-n.width,y:r};break;default:S={x:t.x,y:t.y}}var A=u?CD(u):null;if(A!=null){var R=A==="y"?"height":"width";switch(f){case nx:S[A]=S[A]-(t[R]/2-n[R]/2);break;case j1:S[A]=S[A]+(t[R]/2-n[R]/2);break}}return S}function U1(e,t){t===void 0&&(t={});var n=t,a=n.placement,u=a===void 0?e.placement:a,f=n.strategy,y=f===void 0?e.strategy:f,r=n.boundary,S=r===void 0?lK:r,A=n.rootBoundary,R=A===void 0?eU:A,O=n.elementContext,z=O===void 0?Gb:O,N=n.altBoundary,U=N===void 0?!1:N,H=n.padding,K=H===void 0?0:H,W=oU(typeof K!="number"?K:sU(K,vw)),re=z===Gb?cK:Gb,ne=e.rects.popper,se=e.elements[U?re:z],ue=VK(Y_(se)?se:se.contextElement||Jg(e.elements.popper),S,R,y),pe=rx(e.elements.reference),Ce=lU({reference:pe,element:ne,placement:u}),Le=EI(Object.assign({},ne,Ce)),qe=z===Gb?Le:pe,ye={top:ue.top-qe.top+W.top,bottom:qe.bottom-ue.bottom+W.bottom,left:ue.left-qe.left+W.left,right:qe.right-ue.right+W.right},Xe=e.modifiersData.offset;if(z===Gb&&Xe){var ut=Xe[u];Object.keys(ye).forEach(function(et){var ot=[Sh,wh].indexOf(et)>=0?1:-1,mt=[Rc,wh].indexOf(et)>=0?"y":"x";ye[et]+=ut[mt]*ot})}return ye}function $K(e,t){t===void 0&&(t={});var n=t,a=n.placement,u=n.boundary,f=n.rootBoundary,y=n.padding,r=n.flipVariations,S=n.allowedAutoPlacements,A=S===void 0?tU:S,R=ox(a),O=R?r?G3:G3.filter(function(U){return ox(U)===R}):vw,z=O.filter(function(U){return A.indexOf(U)>=0});z.length===0&&(z=O);var N=z.reduce(function(U,H){return U[H]=U1(e,{placement:H,boundary:u,rootBoundary:f,padding:y})[Uf(H)],U},{});return Object.keys(N).sort(function(U,H){return N[U]-N[H]})}function HK(e){if(Uf(e)===SD)return[];var t=tE(e);return[X3(e),t,X3(t)]}function GK(e){var t=e.state,n=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var u=n.mainAxis,f=u===void 0?!0:u,y=n.altAxis,r=y===void 0?!0:y,S=n.fallbackPlacements,A=n.padding,R=n.boundary,O=n.rootBoundary,z=n.altBoundary,N=n.flipVariations,U=N===void 0?!0:N,H=n.allowedAutoPlacements,K=t.options.placement,W=Uf(K),re=W===K,ne=S||(re||!U?[tE(K)]:HK(K)),se=[K].concat(ne).reduce(function(on,en){return on.concat(Uf(en)===SD?$K(t,{placement:en,boundary:R,rootBoundary:O,padding:A,flipVariations:U,allowedAutoPlacements:H}):en)},[]),ue=t.rects.reference,pe=t.rects.popper,Ce=new Map,Le=!0,qe=se[0],ye=0;ye<se.length;ye++){var Xe=se[ye],ut=Uf(Xe),et=ox(Xe)===nx,ot=[Rc,wh].indexOf(ut)>=0,mt=ot?"width":"height",$e=U1(t,{placement:Xe,boundary:R,rootBoundary:O,altBoundary:z,padding:A}),it=ot?et?Sh:Ic:et?wh:Rc;ue[mt]>pe[mt]&&(it=tE(it));var Tt=tE(it),xt=[];if(f&&xt.push($e[ut]<=0),r&&xt.push($e[it]<=0,$e[Tt]<=0),xt.every(function(on){return on})){qe=Xe,Le=!1;break}Ce.set(Xe,xt)}if(Le)for(var je=U?3:1,ht=function(en){var jt=se.find(function(Rn){var Vn=Ce.get(Rn);if(Vn)return Vn.slice(0,en).every(function(Hn){return Hn})});if(jt)return qe=jt,"break"},Bt=je;Bt>0;Bt--){var Ft=ht(Bt);if(Ft==="break")break}t.placement!==qe&&(t.modifiersData[a]._skip=!0,t.placement=qe,t.reset=!0)}}const qK={name:"flip",enabled:!0,phase:"main",fn:GK,requiresIfExists:["offset"],data:{_skip:!1}};function Y3(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function K3(e){return[Rc,Sh,wh,Ic].some(function(t){return e[t]>=0})}function WK(e){var t=e.state,n=e.name,a=t.rects.reference,u=t.rects.popper,f=t.modifiersData.preventOverflow,y=U1(t,{elementContext:"reference"}),r=U1(t,{altBoundary:!0}),S=Y3(y,a),A=Y3(r,u,f),R=K3(S),O=K3(A);t.modifiersData[n]={referenceClippingOffsets:S,popperEscapeOffsets:A,isReferenceHidden:R,hasPopperEscaped:O},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":R,"data-popper-escaped":O})}const XK={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:WK};function ZK(e,t,n){var a=Uf(e),u=[Ic,Rc].indexOf(a)>=0?-1:1,f=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,y=f[0],r=f[1];return y=y||0,r=(r||0)*u,[Ic,Sh].indexOf(a)>=0?{x:r,y}:{x:y,y:r}}function YK(e){var t=e.state,n=e.options,a=e.name,u=n.offset,f=u===void 0?[0,0]:u,y=tU.reduce(function(R,O){return R[O]=ZK(O,t.rects,f),R},{}),r=y[t.placement],S=r.x,A=r.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=S,t.modifiersData.popperOffsets.y+=A),t.modifiersData[a]=y}const KK={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:YK};function JK(e){var t=e.state,n=e.name;t.modifiersData[n]=lU({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const QK={name:"popperOffsets",enabled:!0,phase:"read",fn:JK,data:{}};function eJ(e){return e==="x"?"y":"x"}function tJ(e){var t=e.state,n=e.options,a=e.name,u=n.mainAxis,f=u===void 0?!0:u,y=n.altAxis,r=y===void 0?!1:y,S=n.boundary,A=n.rootBoundary,R=n.altBoundary,O=n.padding,z=n.tether,N=z===void 0?!0:z,U=n.tetherOffset,H=U===void 0?0:U,K=U1(t,{boundary:S,rootBoundary:A,padding:O,altBoundary:R}),W=Uf(t.placement),re=ox(t.placement),ne=!re,se=CD(W),ue=eJ(se),pe=t.modifiersData.popperOffsets,Ce=t.rects.reference,Le=t.rects.popper,qe=typeof H=="function"?H(Object.assign({},t.rects,{placement:t.placement})):H,ye=typeof qe=="number"?{mainAxis:qe,altAxis:qe}:Object.assign({mainAxis:0,altAxis:0},qe),Xe=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ut={x:0,y:0};if(pe){if(f){var et,ot=se==="y"?Rc:Ic,mt=se==="y"?wh:Sh,$e=se==="y"?"height":"width",it=pe[se],Tt=it+K[ot],xt=it-K[mt],je=N?-Le[$e]/2:0,ht=re===nx?Ce[$e]:Le[$e],Bt=re===nx?-Le[$e]:-Ce[$e],Ft=t.elements.arrow,on=N&&Ft?ED(Ft):{width:0,height:0},en=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:rU(),jt=en[ot],Rn=en[mt],Vn=g1(0,Ce[$e],on[$e]),Hn=ne?Ce[$e]/2-je-Vn-jt-ye.mainAxis:ht-Vn-jt-ye.mainAxis,On=ne?-Ce[$e]/2+je+Vn+Rn+ye.mainAxis:Bt+Vn+Rn+ye.mainAxis,ai=t.elements.arrow&&xw(t.elements.arrow),oi=ai?se==="y"?ai.clientTop||0:ai.clientLeft||0:0,Ln=(et=Xe==null?void 0:Xe[se])!=null?et:0,zn=it+Hn-Ln-oi,hi=it+On-Ln,fi=g1(N?IE(Tt,zn):Tt,it,N?j_(xt,hi):xt);pe[se]=fi,ut[se]=fi-it}if(r){var ci,Pi=se==="x"?Rc:Ic,ii=se==="x"?wh:Sh,pi=pe[ue],yi=ue==="y"?"height":"width",dt=pi+K[Pi],Cn=pi-K[ii],wn=[Rc,Ic].indexOf(W)!==-1,In=(ci=Xe==null?void 0:Xe[ue])!=null?ci:0,qn=wn?dt:pi-Ce[yi]-Le[yi]-In+ye.altAxis,Xn=wn?pi+Ce[yi]+Le[yi]-In-ye.altAxis:Cn,Ni=N&&wn?EK(qn,pi,Xn):g1(N?qn:dt,pi,N?Xn:Cn);pe[ue]=Ni,ut[ue]=Ni-pi}t.modifiersData[a]=ut}}const nJ={name:"preventOverflow",enabled:!0,phase:"main",fn:tJ,requiresIfExists:["offset"]};function iJ(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function rJ(e){return e===wu(e)||!_h(e)?AD(e):iJ(e)}function oJ(e){var t=e.getBoundingClientRect(),n=ix(t.width)/e.offsetWidth||1,a=ix(t.height)/e.offsetHeight||1;return n!==1||a!==1}function sJ(e,t,n){n===void 0&&(n=!1);var a=_h(t),u=_h(t)&&oJ(t),f=Jg(t),y=rx(e,u,n),r={scrollLeft:0,scrollTop:0},S={x:0,y:0};return(a||!a&&!n)&&((Gf(t)!=="body"||RD(f))&&(r=rJ(t)),_h(t)?(S=rx(t,!0),S.x+=t.clientLeft,S.y+=t.clientTop):f&&(S.x=MD(f))),{x:y.left+r.scrollLeft-S.x,y:y.top+r.scrollTop-S.y,width:y.width,height:y.height}}function aJ(e){var t=new Map,n=new Set,a=[];e.forEach(function(f){t.set(f.name,f)});function u(f){n.add(f.name);var y=[].concat(f.requires||[],f.requiresIfExists||[]);y.forEach(function(r){if(!n.has(r)){var S=t.get(r);S&&u(S)}}),a.push(f)}return e.forEach(function(f){n.has(f.name)||u(f)}),a}function lJ(e){var t=aJ(e);return vK.reduce(function(n,a){return n.concat(t.filter(function(u){return u.phase===a}))},[])}function cJ(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function uJ(e){var t=e.reduce(function(n,a){var u=n[a.name];return n[a.name]=u?Object.assign({},u,a,{options:Object.assign({},u.options,a.options),data:Object.assign({},u.data,a.data)}):a,n},{});return Object.keys(t).map(function(n){return t[n]})}var J3={placement:"bottom",modifiers:[],strategy:"absolute"};function Q3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function hJ(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,a=n===void 0?[]:n,u=t.defaultOptions,f=u===void 0?J3:u;return function(r,S,A){A===void 0&&(A=f);var R={placement:"bottom",orderedModifiers:[],options:Object.assign({},J3,f),modifiersData:{},elements:{reference:r,popper:S},attributes:{},styles:{}},O=[],z=!1,N={state:R,setOptions:function(W){var re=typeof W=="function"?W(R.options):W;H(),R.options=Object.assign({},f,R.options,re),R.scrollParents={reference:Y_(r)?y1(r):r.contextElement?y1(r.contextElement):[],popper:y1(S)};var ne=lJ(uJ([].concat(a,R.options.modifiers)));return R.orderedModifiers=ne.filter(function(se){return se.enabled}),U(),N.update()},forceUpdate:function(){if(!z){var W=R.elements,re=W.reference,ne=W.popper;if(Q3(re,ne)){R.rects={reference:sJ(re,xw(ne),R.options.strategy==="fixed"),popper:ED(ne)},R.reset=!1,R.placement=R.options.placement,R.orderedModifiers.forEach(function(ye){return R.modifiersData[ye.name]=Object.assign({},ye.data)});for(var se=0;se<R.orderedModifiers.length;se++){if(R.reset===!0){R.reset=!1,se=-1;continue}var ue=R.orderedModifiers[se],pe=ue.fn,Ce=ue.options,Le=Ce===void 0?{}:Ce,qe=ue.name;typeof pe=="function"&&(R=pe({state:R,options:Le,name:qe,instance:N})||R)}}}},update:cJ(function(){return new Promise(function(K){N.forceUpdate(),K(R)})}),destroy:function(){H(),z=!0}};if(!Q3(r,S))return N;N.setOptions(A).then(function(K){!z&&A.onFirstUpdate&&A.onFirstUpdate(K)});function U(){R.orderedModifiers.forEach(function(K){var W=K.name,re=K.options,ne=re===void 0?{}:re,se=K.effect;if(typeof se=="function"){var ue=se({state:R,name:W,instance:N,options:ne}),pe=function(){};O.push(ue||pe)}})}function H(){O.forEach(function(K){return K()}),O=[]}return N}}var dJ=[kK,QK,OK,wK,KK,qK,nJ,RK,XK],fJ=hJ({defaultModifiers:dJ});function K_(e){var O;const{elementType:t,externalSlotProps:n,ownerState:a,skipResolvingSlotProps:u=!1,...f}=e,y=u?{}:Zj(n,a),{props:r,internalRef:S}=Kj({...f,externalSlotProps:y}),A=as(S,y==null?void 0:y.ref,(O=e.additionalProps)==null?void 0:O.ref);return Xj(t,{...r,ref:A},a)}function eB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Pm(e){var t;return parseInt(ee.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function pJ(e){return typeof e=="function"?e():e}const cU=ee.forwardRef(function(t,n){const{children:a,container:u,disablePortal:f=!1}=t,[y,r]=ee.useState(null),S=as(ee.isValidElement(a)?Pm(a):null,n);if(Lc(()=>{f||r(pJ(u)||document.body)},[u,f]),Lc(()=>{if(y&&!f)return eB(n,y),()=>{eB(n,null)}},[n,y,f]),f){if(ee.isValidElement(a)){const A={ref:S};return ee.cloneElement(a,A)}return a}return y&&fC.createPortal(a,y)});function mJ(e){return tr("MuiPopper",e)}or("MuiPopper",["root"]);function gJ(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function CI(e){return typeof e=="function"?e():e}function yJ(e){return e.nodeType!==void 0}const _J=e=>{const{classes:t}=e;return er({root:["root"]},mJ,t)},vJ={},xJ=ee.forwardRef(function(t,n){const{anchorEl:a,children:u,direction:f,disablePortal:y,modifiers:r,open:S,placement:A,popperOptions:R,popperRef:O,slotProps:z={},slots:N={},TransitionProps:U,ownerState:H,...K}=t,W=ee.useRef(null),re=as(W,n),ne=ee.useRef(null),se=as(ne,O),ue=ee.useRef(se);Lc(()=>{ue.current=se},[se]),ee.useImperativeHandle(O,()=>ne.current,[]);const pe=gJ(A,f),[Ce,Le]=ee.useState(pe),[qe,ye]=ee.useState(CI(a));ee.useEffect(()=>{ne.current&&ne.current.forceUpdate()}),ee.useEffect(()=>{a&&ye(CI(a))},[a]),Lc(()=>{if(!qe||!S)return;const mt=Tt=>{Le(Tt.placement)};let $e=[{name:"preventOverflow",options:{altBoundary:y}},{name:"flip",options:{altBoundary:y}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Tt})=>{mt(Tt)}}];r!=null&&($e=$e.concat(r)),R&&R.modifiers!=null&&($e=$e.concat(R.modifiers));const it=fJ(qe,W.current,{placement:pe,...R,modifiers:$e});return ue.current(it),()=>{it.destroy(),ue.current(null)}},[qe,y,r,S,R,pe]);const Xe={placement:Ce};U!==null&&(Xe.TransitionProps=U);const ut=_J(t),et=N.root??"div",ot=K_({elementType:et,externalSlotProps:z.root,externalForwardedProps:K,additionalProps:{role:"tooltip",ref:re},ownerState:t,className:ut.root});return te.jsx(et,{...ot,children:typeof u=="function"?u(Xe):u})}),bJ=ee.forwardRef(function(t,n){const{anchorEl:a,children:u,container:f,direction:y="ltr",disablePortal:r=!1,keepMounted:S=!1,modifiers:A,open:R,placement:O="bottom",popperOptions:z=vJ,popperRef:N,style:U,transition:H=!1,slotProps:K={},slots:W={},...re}=t,[ne,se]=ee.useState(!0),ue=()=>{se(!1)},pe=()=>{se(!0)};if(!S&&!R&&(!H||ne))return null;let Ce;if(f)Ce=f;else if(a){const ye=CI(a);Ce=ye&&yJ(ye)?sl(ye).body:sl(null).body}const Le=!R&&S&&(!H||ne)?"none":void 0,qe=H?{in:R,onEnter:ue,onExited:pe}:void 0;return te.jsx(cU,{disablePortal:r,container:Ce,children:te.jsx(xJ,{anchorEl:a,direction:y,disablePortal:r,modifiers:A,ref:n,open:H?!ne:R,placement:O,popperOptions:z,popperRef:N,slotProps:K,slots:W,...re,style:{position:"fixed",top:0,left:0,display:Le,...U},TransitionProps:qe,children:u})})}),wJ=Mn(bJ,{name:"MuiPopper",slot:"Root"})({}),zC=ee.forwardRef(function(t,n){const a=uv(),u=nr({props:t,name:"MuiPopper"}),{anchorEl:f,component:y,components:r,componentsProps:S,container:A,disablePortal:R,keepMounted:O,modifiers:z,open:N,placement:U,popperOptions:H,popperRef:K,transition:W,slots:re,slotProps:ne,...se}=u,ue=(re==null?void 0:re.root)??(r==null?void 0:r.Root),pe={anchorEl:f,container:A,disablePortal:R,keepMounted:O,modifiers:z,open:N,placement:U,popperOptions:H,popperRef:K,transition:W,...se};return te.jsx(wJ,{as:y,direction:a?"rtl":"ltr",slots:{root:ue},slotProps:ne??S,...pe,ref:n})});function uU(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function AI(e,t){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},AI(e,t)}function hU(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,AI(e,t)}const tB={disabled:!1},PE=Or.createContext(null);var SJ=function(t){return t.scrollTop},u1="unmounted",E_="exited",C_="entering",k0="entered",MI="exiting",Eu=function(e){hU(t,e);function t(a,u){var f;f=e.call(this,a,u)||this;var y=u,r=y&&!y.isMounting?a.enter:a.appear,S;return f.appearStatus=null,a.in?r?(S=E_,f.appearStatus=C_):S=k0:a.unmountOnExit||a.mountOnEnter?S=u1:S=E_,f.state={status:S},f.nextCallback=null,f}t.getDerivedStateFromProps=function(u,f){var y=u.in;return y&&f.status===u1?{status:E_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(u){var f=null;if(u!==this.props){var y=this.state.status;this.props.in?y!==C_&&y!==k0&&(f=C_):(y===C_||y===k0)&&(f=MI)}this.updateStatus(!1,f)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var u=this.props.timeout,f,y,r;return f=y=r=u,u!=null&&typeof u!="number"&&(f=u.exit,y=u.enter,r=u.appear!==void 0?u.appear:y),{exit:f,enter:y,appear:r}},n.updateStatus=function(u,f){if(u===void 0&&(u=!1),f!==null)if(this.cancelNextCallback(),f===C_){if(this.props.unmountOnExit||this.props.mountOnEnter){var y=this.props.nodeRef?this.props.nodeRef.current:JS.findDOMNode(this);y&&SJ(y)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===E_&&this.setState({status:u1})},n.performEnter=function(u){var f=this,y=this.props.enter,r=this.context?this.context.isMounting:u,S=this.props.nodeRef?[r]:[JS.findDOMNode(this),r],A=S[0],R=S[1],O=this.getTimeouts(),z=r?O.appear:O.enter;if(!u&&!y||tB.disabled){this.safeSetState({status:k0},function(){f.props.onEntered(A)});return}this.props.onEnter(A,R),this.safeSetState({status:C_},function(){f.props.onEntering(A,R),f.onTransitionEnd(z,function(){f.safeSetState({status:k0},function(){f.props.onEntered(A,R)})})})},n.performExit=function(){var u=this,f=this.props.exit,y=this.getTimeouts(),r=this.props.nodeRef?void 0:JS.findDOMNode(this);if(!f||tB.disabled){this.safeSetState({status:E_},function(){u.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:MI},function(){u.props.onExiting(r),u.onTransitionEnd(y.exit,function(){u.safeSetState({status:E_},function(){u.props.onExited(r)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(u,f){f=this.setNextCallback(f),this.setState(u,f)},n.setNextCallback=function(u){var f=this,y=!0;return this.nextCallback=function(r){y&&(y=!1,f.nextCallback=null,u(r))},this.nextCallback.cancel=function(){y=!1},this.nextCallback},n.onTransitionEnd=function(u,f){this.setNextCallback(f);var y=this.props.nodeRef?this.props.nodeRef.current:JS.findDOMNode(this),r=u==null&&!this.props.addEndListener;if(!y||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var S=this.props.nodeRef?[this.nextCallback]:[y,this.nextCallback],A=S[0],R=S[1];this.props.addEndListener(A,R)}u!=null&&setTimeout(this.nextCallback,u)},n.render=function(){var u=this.state.status;if(u===u1)return null;var f=this.props,y=f.children;f.in,f.mountOnEnter,f.unmountOnExit,f.appear,f.enter,f.exit,f.timeout,f.addEndListener,f.onEnter,f.onEntering,f.onEntered,f.onExit,f.onExiting,f.onExited,f.nodeRef;var r=uU(f,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Or.createElement(PE.Provider,{value:null},typeof y=="function"?y(u,r):Or.cloneElement(Or.Children.only(y),r))},t}(Or.Component);Eu.contextType=PE;Eu.propTypes={};function E0(){}Eu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:E0,onEntering:E0,onEntered:E0,onExit:E0,onExiting:E0,onExited:E0};Eu.UNMOUNTED=u1;Eu.EXITED=E_;Eu.ENTERING=C_;Eu.ENTERED=k0;Eu.EXITING=MI;function TJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ID(e,t){var n=function(f){return t&&ee.isValidElement(f)?t(f):f},a=Object.create(null);return e&&ee.Children.map(e,function(u){return u}).forEach(function(u){a[u.key]=n(u)}),a}function EJ(e,t){e=e||{},t=t||{};function n(R){return R in t?t[R]:e[R]}var a=Object.create(null),u=[];for(var f in e)f in t?u.length&&(a[f]=u,u=[]):u.push(f);var y,r={};for(var S in t){if(a[S])for(y=0;y<a[S].length;y++){var A=a[S][y];r[a[S][y]]=n(A)}r[S]=n(S)}for(y=0;y<u.length;y++)r[u[y]]=n(u[y]);return r}function L_(e,t,n){return n[t]!=null?n[t]:e.props[t]}function CJ(e,t){return ID(e.children,function(n){return ee.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:L_(n,"appear",e),enter:L_(n,"enter",e),exit:L_(n,"exit",e)})})}function AJ(e,t,n){var a=ID(e.children),u=EJ(t,a);return Object.keys(u).forEach(function(f){var y=u[f];if(ee.isValidElement(y)){var r=f in t,S=f in a,A=t[f],R=ee.isValidElement(A)&&!A.props.in;S&&(!r||R)?u[f]=ee.cloneElement(y,{onExited:n.bind(null,y),in:!0,exit:L_(y,"exit",e),enter:L_(y,"enter",e)}):!S&&r&&!R?u[f]=ee.cloneElement(y,{in:!1}):S&&r&&ee.isValidElement(A)&&(u[f]=ee.cloneElement(y,{onExited:n.bind(null,y),in:A.props.in,exit:L_(y,"exit",e),enter:L_(y,"enter",e)}))}}),u}var MJ=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},RJ={component:"div",childFactory:function(t){return t}},PD=function(e){hU(t,e);function t(a,u){var f;f=e.call(this,a,u)||this;var y=f.handleExited.bind(TJ(f));return f.state={contextValue:{isMounting:!0},handleExited:y,firstRender:!0},f}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(u,f){var y=f.children,r=f.handleExited,S=f.firstRender;return{children:S?CJ(u,r):AJ(u,y,r),firstRender:!1}},n.handleExited=function(u,f){var y=ID(this.props.children);u.key in y||(u.props.onExited&&u.props.onExited(f),this.mounted&&this.setState(function(r){var S=EE({},r.children);return delete S[u.key],{children:S}}))},n.render=function(){var u=this.props,f=u.component,y=u.childFactory,r=uU(u,["component","childFactory"]),S=this.state.contextValue,A=MJ(this.state.children).map(y);return delete r.appear,delete r.enter,delete r.exit,f===null?Or.createElement(PE.Provider,{value:S},A):Or.createElement(PE.Provider,{value:S},Or.createElement(f,r,A))},t}(Or.Component);PD.propTypes={};PD.defaultProps=RJ;const nB={};function dU(e,t){const n=ee.useRef(nB);return n.current===nB&&(n.current=e(t)),n}const IJ=[];function PJ(e){ee.useEffect(e,IJ)}class BC{constructor(){zb(this,"currentId",null);zb(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});zb(this,"disposeEffect",()=>this.clear)}static create(){return new BC}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function k_(){const e=dU(BC.create).current;return PJ(e.disposeEffect),e}const FC=e=>e.scrollTop;function qf(e,t){const{timeout:n,easing:a,style:u={}}=e;return{duration:u.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:u.transitionTimingFunction??(typeof a=="object"?a[t.mode]:a),delay:u.transitionDelay}}function iB(...e){return e.reduce((t,n)=>n==null?t:function(...u){t.apply(this,u),n.apply(this,u)},()=>{})}let rB=0;function DJ(e){const[t,n]=ee.useState(e),a=e||t;return ee.useEffect(()=>{t==null&&(rB+=1,n(`mui-${rB}`))},[t]),a}const OJ={...xE},oB=OJ.useId;function bw(e){if(oB!==void 0){const t=oB();return e??t}return DJ(e)}function RI(e){const{controlled:t,default:n,name:a,state:u="value"}=e,{current:f}=ee.useRef(t!==void 0),[y,r]=ee.useState(n),S=f?t:y,A=ee.useCallback(R=>{f||r(R)},[]);return[S,A]}function LJ(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function fU(e,t){if(!e)return t;function n(y,r){const S={};return Object.keys(r).forEach(A=>{LJ(A,r[A])&&typeof y[A]=="function"&&(S[A]=(...R)=>{y[A](...R),r[A](...R)})}),S}if(typeof e=="function"||typeof t=="function")return y=>{const r=typeof t=="function"?t(y):t,S=typeof e=="function"?e({...y,...r}):e,A=si(y==null?void 0:y.className,r==null?void 0:r.className,S==null?void 0:S.className),R=n(S,r);return{...r,...S,...R,...!!A&&{className:A},...(r==null?void 0:r.style)&&(S==null?void 0:S.style)&&{style:{...r.style,...S.style}},...(r==null?void 0:r.sx)&&(S==null?void 0:S.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(S.sx)?S.sx:[S.sx]]}}};const a=t,u=n(e,a),f=si(a==null?void 0:a.className,e==null?void 0:e.className);return{...t,...e,...u,...!!f&&{className:f},...(a==null?void 0:a.style)&&(e==null?void 0:e.style)&&{style:{...a.style,...e.style}},...(a==null?void 0:a.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function kJ(e){return tr("MuiCollapse",e)}or("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const zJ=e=>{const{orientation:t,classes:n}=e,a={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return er(a,kJ,n)},BJ=Mn("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(Tr(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),FJ=Mn("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),NJ=Mn("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),DE=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiCollapse"}),{addEndListener:u,children:f,className:y,collapsedSize:r="0px",component:S,easing:A,in:R,onEnter:O,onEntered:z,onEntering:N,onExit:U,onExited:H,onExiting:K,orientation:W="vertical",style:re,timeout:ne=Uj.standard,TransitionComponent:se=Eu,...ue}=a,pe={...a,orientation:W,collapsedSize:r},Ce=zJ(pe),Le=xs(),qe=k_(),ye=ee.useRef(null),Xe=ee.useRef(),ut=typeof r=="number"?`${r}px`:r,et=W==="horizontal",ot=et?"width":"height",mt=ee.useRef(null),$e=as(n,mt),it=jt=>Rn=>{if(jt){const Vn=mt.current;Rn===void 0?jt(Vn):jt(Vn,Rn)}},Tt=()=>ye.current?ye.current[et?"clientWidth":"clientHeight"]:0,xt=it((jt,Rn)=>{ye.current&&et&&(ye.current.style.position="absolute"),jt.style[ot]=ut,O&&O(jt,Rn)}),je=it((jt,Rn)=>{const Vn=Tt();ye.current&&et&&(ye.current.style.position="");const{duration:Hn,easing:On}=qf({style:re,timeout:ne,easing:A},{mode:"enter"});if(ne==="auto"){const ai=Le.transitions.getAutoHeightDuration(Vn);jt.style.transitionDuration=`${ai}ms`,Xe.current=ai}else jt.style.transitionDuration=typeof Hn=="string"?Hn:`${Hn}ms`;jt.style[ot]=`${Vn}px`,jt.style.transitionTimingFunction=On,N&&N(jt,Rn)}),ht=it((jt,Rn)=>{jt.style[ot]="auto",z&&z(jt,Rn)}),Bt=it(jt=>{jt.style[ot]=`${Tt()}px`,U&&U(jt)}),Ft=it(H),on=it(jt=>{const Rn=Tt(),{duration:Vn,easing:Hn}=qf({style:re,timeout:ne,easing:A},{mode:"exit"});if(ne==="auto"){const On=Le.transitions.getAutoHeightDuration(Rn);jt.style.transitionDuration=`${On}ms`,Xe.current=On}else jt.style.transitionDuration=typeof Vn=="string"?Vn:`${Vn}ms`;jt.style[ot]=ut,jt.style.transitionTimingFunction=Hn,K&&K(jt)}),en=jt=>{ne==="auto"&&qe.start(Xe.current||0,jt),u&&u(mt.current,jt)};return te.jsx(se,{in:R,onEnter:xt,onEntered:ht,onEntering:je,onExit:Bt,onExited:Ft,onExiting:on,addEndListener:en,nodeRef:mt,timeout:ne==="auto"?null:ne,...ue,children:(jt,{ownerState:Rn,...Vn})=>te.jsx(BJ,{as:S,className:si(Ce.root,y,{entered:Ce.entered,exited:!R&&ut==="0px"&&Ce.hidden}[jt]),style:{[et?"minWidth":"minHeight"]:ut,...re},ref:$e,ownerState:{...pe,state:jt},...Vn,children:te.jsx(FJ,{ownerState:{...pe,state:jt},className:Ce.wrapper,ref:ye,children:te.jsx(NJ,{ownerState:{...pe,state:jt},className:Ce.wrapperInner,children:f})})})})});DE&&(DE.muiSupportAuto=!0);const jJ={entering:{opacity:1},entered:{opacity:1}},pU=ee.forwardRef(function(t,n){const a=xs(),u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:f,appear:y=!0,children:r,easing:S,in:A,onEnter:R,onEntered:O,onEntering:z,onExit:N,onExited:U,onExiting:H,style:K,timeout:W=u,TransitionComponent:re=Eu,...ne}=t,se=ee.useRef(null),ue=as(se,Pm(r),n),pe=ot=>mt=>{if(ot){const $e=se.current;mt===void 0?ot($e):ot($e,mt)}},Ce=pe(z),Le=pe((ot,mt)=>{FC(ot);const $e=qf({style:K,timeout:W,easing:S},{mode:"enter"});ot.style.webkitTransition=a.transitions.create("opacity",$e),ot.style.transition=a.transitions.create("opacity",$e),R&&R(ot,mt)}),qe=pe(O),ye=pe(H),Xe=pe(ot=>{const mt=qf({style:K,timeout:W,easing:S},{mode:"exit"});ot.style.webkitTransition=a.transitions.create("opacity",mt),ot.style.transition=a.transitions.create("opacity",mt),N&&N(ot)}),ut=pe(U),et=ot=>{f&&f(se.current,ot)};return te.jsx(re,{appear:y,in:A,nodeRef:se,onEnter:Le,onEntered:qe,onEntering:Ce,onExit:Xe,onExited:ut,onExiting:ye,addEndListener:et,timeout:W,...ne,children:(ot,{ownerState:mt,...$e})=>ee.cloneElement(r,{style:{opacity:0,visibility:ot==="exited"&&!A?"hidden":void 0,...jJ[ot],...K,...r.props.style},ref:ue,...$e})})});function II(e){return`scale(${e}, ${e**2})`}const UJ={entering:{opacity:1,transform:II(1)},entered:{opacity:1,transform:"none"}},jM=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),V1=ee.forwardRef(function(t,n){const{addEndListener:a,appear:u=!0,children:f,easing:y,in:r,onEnter:S,onEntered:A,onEntering:R,onExit:O,onExited:z,onExiting:N,style:U,timeout:H="auto",TransitionComponent:K=Eu,...W}=t,re=k_(),ne=ee.useRef(),se=xs(),ue=ee.useRef(null),pe=as(ue,Pm(f),n),Ce=mt=>$e=>{if(mt){const it=ue.current;$e===void 0?mt(it):mt(it,$e)}},Le=Ce(R),qe=Ce((mt,$e)=>{FC(mt);const{duration:it,delay:Tt,easing:xt}=qf({style:U,timeout:H,easing:y},{mode:"enter"});let je;H==="auto"?(je=se.transitions.getAutoHeightDuration(mt.clientHeight),ne.current=je):je=it,mt.style.transition=[se.transitions.create("opacity",{duration:je,delay:Tt}),se.transitions.create("transform",{duration:jM?je:je*.666,delay:Tt,easing:xt})].join(","),S&&S(mt,$e)}),ye=Ce(A),Xe=Ce(N),ut=Ce(mt=>{const{duration:$e,delay:it,easing:Tt}=qf({style:U,timeout:H,easing:y},{mode:"exit"});let xt;H==="auto"?(xt=se.transitions.getAutoHeightDuration(mt.clientHeight),ne.current=xt):xt=$e,mt.style.transition=[se.transitions.create("opacity",{duration:xt,delay:it}),se.transitions.create("transform",{duration:jM?xt:xt*.666,delay:jM?it:it||xt*.333,easing:Tt})].join(","),mt.style.opacity=0,mt.style.transform=II(.75),O&&O(mt)}),et=Ce(z),ot=mt=>{H==="auto"&&re.start(ne.current||0,mt),a&&a(ue.current,mt)};return te.jsx(K,{appear:u,in:r,nodeRef:ue,onEnter:qe,onEntered:ye,onEntering:Le,onExit:ut,onExited:et,onExiting:Xe,addEndListener:ot,timeout:H==="auto"?null:H,...W,children:(mt,{ownerState:$e,...it})=>ee.cloneElement(f,{style:{opacity:0,transform:II(.75),visibility:mt==="exited"&&!r?"hidden":void 0,...UJ[mt],...U,...f.props.style},ref:pe,...it})})});V1&&(V1.muiSupportAuto=!0);function VJ(e,t,n){const a=t.getBoundingClientRect(),u=n&&n.getBoundingClientRect(),f=bu(t);let y;if(t.fakeTransform)y=t.fakeTransform;else{const A=f.getComputedStyle(t);y=A.getPropertyValue("-webkit-transform")||A.getPropertyValue("transform")}let r=0,S=0;if(y&&y!=="none"&&typeof y=="string"){const A=y.split("(")[1].split(")")[0].split(",");r=parseInt(A[4],10),S=parseInt(A[5],10)}return e==="left"?u?`translateX(${u.right+r-a.left}px)`:`translateX(${f.innerWidth+r-a.left}px)`:e==="right"?u?`translateX(-${a.right-u.left-r}px)`:`translateX(-${a.left+a.width-r}px)`:e==="up"?u?`translateY(${u.bottom+S-a.top}px)`:`translateY(${f.innerHeight+S-a.top}px)`:u?`translateY(-${a.top-u.top+a.height-S}px)`:`translateY(-${a.top+a.height-S}px)`}function $J(e){return typeof e=="function"?e():e}function oT(e,t,n){const a=$J(n),u=VJ(e,t,a);u&&(t.style.webkitTransform=u,t.style.transform=u)}const mU=ee.forwardRef(function(t,n){const a=xs(),u={enter:a.transitions.easing.easeOut,exit:a.transitions.easing.sharp},f={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:y,appear:r=!0,children:S,container:A,direction:R="down",easing:O=u,in:z,onEnter:N,onEntered:U,onEntering:H,onExit:K,onExited:W,onExiting:re,style:ne,timeout:se=f,TransitionComponent:ue=Eu,...pe}=t,Ce=ee.useRef(null),Le=as(Pm(S),Ce,n),qe=Tt=>xt=>{Tt&&(xt===void 0?Tt(Ce.current):Tt(Ce.current,xt))},ye=qe((Tt,xt)=>{oT(R,Tt,A),FC(Tt),N&&N(Tt,xt)}),Xe=qe((Tt,xt)=>{const je=qf({timeout:se,style:ne,easing:O},{mode:"enter"});Tt.style.webkitTransition=a.transitions.create("-webkit-transform",{...je}),Tt.style.transition=a.transitions.create("transform",{...je}),Tt.style.webkitTransform="none",Tt.style.transform="none",H&&H(Tt,xt)}),ut=qe(U),et=qe(re),ot=qe(Tt=>{const xt=qf({timeout:se,style:ne,easing:O},{mode:"exit"});Tt.style.webkitTransition=a.transitions.create("-webkit-transform",xt),Tt.style.transition=a.transitions.create("transform",xt),oT(R,Tt,A),K&&K(Tt)}),mt=qe(Tt=>{Tt.style.webkitTransition="",Tt.style.transition="",W&&W(Tt)}),$e=Tt=>{y&&y(Ce.current,Tt)},it=ee.useCallback(()=>{Ce.current&&oT(R,Ce.current,A)},[R,A]);return ee.useEffect(()=>{if(z||R==="down"||R==="right")return;const Tt=_w(()=>{Ce.current&&oT(R,Ce.current,A)}),xt=bu(Ce.current);return xt.addEventListener("resize",Tt),()=>{Tt.clear(),xt.removeEventListener("resize",Tt)}},[R,z,A]),ee.useEffect(()=>{z||it()},[z,it]),te.jsx(ue,{nodeRef:Ce,onEnter:ye,onEntered:ut,onEntering:Xe,onExit:ot,onExited:mt,onExiting:et,addEndListener:$e,appear:r,in:z,timeout:se,...pe,children:(Tt,{ownerState:xt,...je})=>ee.cloneElement(S,{ref:Le,style:{visibility:Tt==="exited"&&!z?"hidden":void 0,...ne,...S.props.style},...je})})}),HJ={entering:{transform:"none"},entered:{transform:"none"}},GJ=ee.forwardRef(function(t,n){const a=xs(),u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:f,appear:y=!0,children:r,easing:S,in:A,onEnter:R,onEntered:O,onEntering:z,onExit:N,onExited:U,onExiting:H,style:K,timeout:W=u,TransitionComponent:re=Eu,...ne}=t,se=ee.useRef(null),ue=as(se,Pm(r),n),pe=ot=>mt=>{if(ot){const $e=se.current;mt===void 0?ot($e):ot($e,mt)}},Ce=pe(z),Le=pe((ot,mt)=>{FC(ot);const $e=qf({style:K,timeout:W,easing:S},{mode:"enter"});ot.style.webkitTransition=a.transitions.create("transform",$e),ot.style.transition=a.transitions.create("transform",$e),R&&R(ot,mt)}),qe=pe(O),ye=pe(H),Xe=pe(ot=>{const mt=qf({style:K,timeout:W,easing:S},{mode:"exit"});ot.style.webkitTransition=a.transitions.create("transform",mt),ot.style.transition=a.transitions.create("transform",mt),N&&N(ot)}),ut=pe(U),et=ot=>{f&&f(se.current,ot)};return te.jsx(re,{appear:y,in:A,nodeRef:se,onEnter:Le,onEntered:qe,onEntering:Ce,onExit:Xe,onExited:ut,onExiting:ye,addEndListener:et,timeout:W,...ne,children:(ot,{ownerState:mt,...$e})=>ee.cloneElement(r,{style:{transform:"scale(0)",visibility:ot==="exited"&&!A?"hidden":void 0,...HJ[ot],...K,...r.props.style},ref:ue,...$e})})});function DD({children:e,position:t="top-left",sx:n,type:a="grow",direction:u="up",ref:f,...y}){let r={transformOrigin:"0 0 0"};switch(t){case"top-right":r={transformOrigin:"top right"};break;case"top":r={transformOrigin:"top"};break;case"bottom-left":r={transformOrigin:"bottom left"};break;case"bottom-right":r={transformOrigin:"bottom right"};break;case"bottom":r={transformOrigin:"bottom"};break;case"top-left":default:r={transformOrigin:"0 0 0"};break}return te.jsxs(fr,{ref:f,children:[a==="grow"&&te.jsx(V1,{...y,children:te.jsx(fr,{sx:r,children:e})}),a==="collapse"&&te.jsx(DE,{...y,sx:r,children:e}),a==="fade"&&te.jsx(pU,{...y,timeout:{appear:500,enter:600,exit:400},children:te.jsx(fr,{sx:r,children:e})}),a==="slide"&&te.jsx(mU,{...y,timeout:{appear:0,enter:400,exit:200},direction:u,children:te.jsx(fr,{sx:r,children:e})}),a==="zoom"&&te.jsx(GJ,{...y,children:te.jsx(fr,{sx:r,children:e})})]})}DD.propTypes={children:Ui.node,position:Ui.string,sx:Ui.any,type:Ui.string,direction:Ui.oneOf(["up","right","left","down"]),others:Ui.any};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qJ={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=(e,t,n,a)=>{const u=ee.forwardRef(({color:f="currentColor",size:y=24,stroke:r=2,title:S,className:A,children:R,...O},z)=>ee.createElement("svg",{ref:z,...qJ[e],width:y,height:y,className:["tabler-icon",`tabler-icon-${t}`,A].join(" "),...e==="filled"?{fill:f}:{strokeWidth:r,stroke:f},...O},[S&&ee.createElement("title",{key:"svg-title"},S),...a.map(([N,U])=>ee.createElement(N,U)),...Array.isArray(R)?R:[R]]));return u.displayName=`${n}`,u};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WJ=qs("outline","brand-chrome","IconBrandChrome",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M12 9h8.4",key:"svg-2"}],["path",{d:"M14.598 13.5l-4.2 7.275",key:"svg-3"}],["path",{d:"M9.402 13.5l-4.2 -7.275",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XJ=qs("outline","brand-facebook","IconBrandFacebook",[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZJ=qs("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gU=qs("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YJ=qs("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KJ=qs("outline","drone-off","IconDroneOff",[["path",{d:"M14 14h-4v-4",key:"svg-0"}],["path",{d:"M10 10l-3.5 -3.5",key:"svg-1"}],["path",{d:"M9.957 5.95a3.503 3.503 0 0 0 -2.917 -2.91m-3.02 .989a3.5 3.5 0 0 0 1.98 5.936",key:"svg-2"}],["path",{d:"M14 10l3.5 -3.5",key:"svg-3"}],["path",{d:"M18 9.965a3.5 3.5 0 1 0 -3.966 -3.965",key:"svg-4"}],["path",{d:"M14 14l3.5 3.5",key:"svg-5"}],["path",{d:"M14.035 18a3.5 3.5 0 0 0 5.936 1.98m.987 -3.026a3.503 3.503 0 0 0 -2.918 -2.913",key:"svg-6"}],["path",{d:"M10 14l-3.5 3.5",key:"svg-7"}],["path",{d:"M6 14.035a3.5 3.5 0 1 0 3.966 3.965",key:"svg-8"}],["path",{d:"M3 3l18 18",key:"svg-9"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JJ=qs("outline","file-spreadsheet","IconFileSpreadsheet",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M8 11h8v7h-8z",key:"svg-2"}],["path",{d:"M8 15h8",key:"svg-3"}],["path",{d:"M11 11v7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QJ=qs("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eQ=qs("outline","file-type-pdf","IconFileTypePdf",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4",key:"svg-1"}],["path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6",key:"svg-2"}],["path",{d:"M17 18h2",key:"svg-3"}],["path",{d:"M20 15h-3v6",key:"svg-4"}],["path",{d:"M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tQ=qs("outline","file-word","IconFileWord",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2",key:"svg-1"}],["path",{d:"M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nQ=qs("outline","file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iQ=qs("outline","logout","IconLogout",[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yU=qs("outline","palette","IconPalette",[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sB=qs("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rQ=qs("outline","shadow","IconShadow",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M13 12h5",key:"svg-1"}],["path",{d:"M13 15h4",key:"svg-2"}],["path",{d:"M13 18h1",key:"svg-3"}],["path",{d:"M13 9h4",key:"svg-4"}],["path",{d:"M13 6h1",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oQ=qs("outline","tallymark-1","IconTallymark1",[["path",{d:"M12 5l0 14",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sQ=qs("outline","typography","IconTypography",[["path",{d:"M4 20l3 0",key:"svg-0"}],["path",{d:"M14 20l7 0",key:"svg-1"}],["path",{d:"M6.9 15l6.9 0",key:"svg-2"}],["path",{d:"M10.2 6.3l5.8 13.7",key:"svg-3"}],["path",{d:"M5 20l6 -16l2 0l7 16",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aQ=qs("filled","brand-instagram-filled","IconBrandInstagramFilled",[["path",{d:"M16 3a5 5 0 0 1 5 5v8a5 5 0 0 1 -5 5h-8a5 5 0 0 1 -5 -5v-8a5 5 0 0 1 5 -5zm-4 5a4 4 0 0 0 -3.995 3.8l-.005 .2a4 4 0 1 0 4 -4m4.5 -1.5a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lQ=qs("filled","brand-linkedin-filled","IconBrandLinkedinFilled",[["path",{d:"M17 2a5 5 0 0 1 5 5v10a5 5 0 0 1 -5 5h-10a5 5 0 0 1 -5 -5v-10a5 5 0 0 1 5 -5zm-9 8a1 1 0 0 0 -1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0 -1 -1m6 0a3 3 0 0 0 -1.168 .236l-.125 .057a1 1 0 0 0 -1.707 .707v5a1 1 0 0 0 2 0v-3a1 1 0 0 1 2 0v3a1 1 0 0 0 2 0v-3a3 3 0 0 0 -3 -3m-6 -3a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cQ=qs("filled","brand-x-filled","IconBrandXFilled",[["path",{d:"M8.267 3a1 1 0 0 1 .73 .317l.076 .092l4.274 5.828l5.946 -5.944a1 1 0 0 1 1.497 1.32l-.083 .094l-6.163 6.162l6.262 8.54a1 1 0 0 1 -.697 1.585l-.109 .006h-4.267a1 1 0 0 1 -.73 -.317l-.076 -.092l-4.276 -5.829l-5.944 5.945a1 1 0 0 1 -1.497 -1.32l.083 -.094l6.161 -6.163l-6.26 -8.539a1 1 0 0 1 .697 -1.585l.109 -.006h4.267z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uQ=qs("filled","brand-youtube-filled","IconBrandYoutubeFilled",[["path",{d:"M18 3a5 5 0 0 1 5 5v8a5 5 0 0 1 -5 5h-12a5 5 0 0 1 -5 -5v-8a5 5 0 0 1 5 -5zm-9 6v6a1 1 0 0 0 1.514 .857l5 -3a1 1 0 0 0 0 -1.714l-5 -3a1 1 0 0 0 -1.514 .857z",key:"svg-0"}]]);Ui.node,Ui.any;Ui.string,Ui.func,Ui.any;function hQ(e){return tr("MuiCardContent",e)}or("MuiCardContent",["root"]);const dQ=e=>{const{classes:t}=e;return er({root:["root"]},hQ,t)},fQ=Mn("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),ww=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiCardContent"}),{className:u,component:f="div",...y}=a,r={...a,component:f},S=dQ(r);return te.jsx(fQ,{as:f,className:si(S.root,u),ownerState:r,ref:n,...y})}),pQ=cc(te.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));class OE{constructor(){zb(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new OE}static use(){const t=dU(OE.create).current,[n,a]=ee.useState(!1);return t.shouldMount=n,t.setShouldMount=a,ee.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=gQ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function mQ(){return OE.use()}function gQ(){let e,t;const n=new Promise((a,u)=>{e=a,t=u});return n.resolve=e,n.reject=t,n}function yQ(e){const{className:t,classes:n,pulsate:a=!1,rippleX:u,rippleY:f,rippleSize:y,in:r,onExited:S,timeout:A}=e,[R,O]=ee.useState(!1),z=si(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),N={width:y,height:y,top:-(y/2)+f,left:-(y/2)+u},U=si(n.child,R&&n.childLeaving,a&&n.childPulsate);return!r&&!R&&O(!0),ee.useEffect(()=>{if(!r&&S!=null){const H=setTimeout(S,A);return()=>{clearTimeout(H)}}},[S,r,A]),te.jsx("span",{className:z,style:N,children:te.jsx("span",{className:U})})}const gh=or("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),PI=550,_Q=80,vQ=Yg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,xQ=Yg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,bQ=Yg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,wQ=Mn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),SQ=Mn(yQ,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${gh.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${vQ};
    animation-duration: ${PI}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${gh.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${gh.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${gh.childLeaving} {
    opacity: 0;
    animation-name: ${xQ};
    animation-duration: ${PI}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${gh.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${bQ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TQ=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiTouchRipple"}),{center:u=!1,classes:f={},className:y,...r}=a,[S,A]=ee.useState([]),R=ee.useRef(0),O=ee.useRef(null);ee.useEffect(()=>{O.current&&(O.current(),O.current=null)},[S]);const z=ee.useRef(!1),N=k_(),U=ee.useRef(null),H=ee.useRef(null),K=ee.useCallback(se=>{const{pulsate:ue,rippleX:pe,rippleY:Ce,rippleSize:Le,cb:qe}=se;A(ye=>[...ye,te.jsx(SQ,{classes:{ripple:si(f.ripple,gh.ripple),rippleVisible:si(f.rippleVisible,gh.rippleVisible),ripplePulsate:si(f.ripplePulsate,gh.ripplePulsate),child:si(f.child,gh.child),childLeaving:si(f.childLeaving,gh.childLeaving),childPulsate:si(f.childPulsate,gh.childPulsate)},timeout:PI,pulsate:ue,rippleX:pe,rippleY:Ce,rippleSize:Le},R.current)]),R.current+=1,O.current=qe},[f]),W=ee.useCallback((se={},ue={},pe=()=>{})=>{const{pulsate:Ce=!1,center:Le=u||ue.pulsate,fakeElement:qe=!1}=ue;if((se==null?void 0:se.type)==="mousedown"&&z.current){z.current=!1;return}(se==null?void 0:se.type)==="touchstart"&&(z.current=!0);const ye=qe?null:H.current,Xe=ye?ye.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ut,et,ot;if(Le||se===void 0||se.clientX===0&&se.clientY===0||!se.clientX&&!se.touches)ut=Math.round(Xe.width/2),et=Math.round(Xe.height/2);else{const{clientX:mt,clientY:$e}=se.touches&&se.touches.length>0?se.touches[0]:se;ut=Math.round(mt-Xe.left),et=Math.round($e-Xe.top)}if(Le)ot=Math.sqrt((2*Xe.width**2+Xe.height**2)/3),ot%2===0&&(ot+=1);else{const mt=Math.max(Math.abs((ye?ye.clientWidth:0)-ut),ut)*2+2,$e=Math.max(Math.abs((ye?ye.clientHeight:0)-et),et)*2+2;ot=Math.sqrt(mt**2+$e**2)}se!=null&&se.touches?U.current===null&&(U.current=()=>{K({pulsate:Ce,rippleX:ut,rippleY:et,rippleSize:ot,cb:pe})},N.start(_Q,()=>{U.current&&(U.current(),U.current=null)})):K({pulsate:Ce,rippleX:ut,rippleY:et,rippleSize:ot,cb:pe})},[u,K,N]),re=ee.useCallback(()=>{W({},{pulsate:!0})},[W]),ne=ee.useCallback((se,ue)=>{if(N.clear(),(se==null?void 0:se.type)==="touchend"&&U.current){U.current(),U.current=null,N.start(0,()=>{ne(se,ue)});return}U.current=null,A(pe=>pe.length>0?pe.slice(1):pe),O.current=ue},[N]);return ee.useImperativeHandle(n,()=>({pulsate:re,start:W,stop:ne}),[re,W,ne]),te.jsx(wQ,{className:si(gh.root,f.root,y),ref:H,...r,children:te.jsx(PD,{component:null,exit:!0,children:S})})});function EQ(e){return tr("MuiButtonBase",e)}const CQ=or("MuiButtonBase",["root","disabled","focusVisible"]),AQ=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:a,classes:u}=e,y=er({root:["root",t&&"disabled",n&&"focusVisible"]},EQ,u);return n&&a&&(y.root+=` ${a}`),y},MQ=Mn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${CQ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Wf=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiButtonBase"}),{action:u,centerRipple:f=!1,children:y,className:r,component:S="button",disabled:A=!1,disableRipple:R=!1,disableTouchRipple:O=!1,focusRipple:z=!1,focusVisibleClassName:N,LinkComponent:U="a",onBlur:H,onClick:K,onContextMenu:W,onDragLeave:re,onFocus:ne,onFocusVisible:se,onKeyDown:ue,onKeyUp:pe,onMouseDown:Ce,onMouseLeave:Le,onMouseUp:qe,onTouchEnd:ye,onTouchMove:Xe,onTouchStart:ut,tabIndex:et=0,TouchRippleProps:ot,touchRippleRef:mt,type:$e,...it}=a,Tt=ee.useRef(null),xt=mQ(),je=as(xt.ref,mt),[ht,Bt]=ee.useState(!1);A&&ht&&Bt(!1),ee.useImperativeHandle(u,()=>({focusVisible:()=>{Bt(!0),Tt.current.focus()}}),[]);const Ft=xt.shouldMount&&!R&&!A;ee.useEffect(()=>{ht&&z&&!R&&xt.pulsate()},[R,z,ht,xt]);const on=cm(xt,"start",Ce,O),en=cm(xt,"stop",W,O),jt=cm(xt,"stop",re,O),Rn=cm(xt,"stop",qe,O),Vn=cm(xt,"stop",dt=>{ht&&dt.preventDefault(),Le&&Le(dt)},O),Hn=cm(xt,"start",ut,O),On=cm(xt,"stop",ye,O),ai=cm(xt,"stop",Xe,O),oi=cm(xt,"stop",dt=>{ex(dt.target)||Bt(!1),H&&H(dt)},!1),Ln=_u(dt=>{Tt.current||(Tt.current=dt.currentTarget),ex(dt.target)&&(Bt(!0),se&&se(dt)),ne&&ne(dt)}),zn=()=>{const dt=Tt.current;return S&&S!=="button"&&!(dt.tagName==="A"&&dt.href)},hi=_u(dt=>{z&&!dt.repeat&&ht&&dt.key===" "&&xt.stop(dt,()=>{xt.start(dt)}),dt.target===dt.currentTarget&&zn()&&dt.key===" "&&dt.preventDefault(),ue&&ue(dt),dt.target===dt.currentTarget&&zn()&&dt.key==="Enter"&&!A&&(dt.preventDefault(),K&&K(dt))}),fi=_u(dt=>{z&&dt.key===" "&&ht&&!dt.defaultPrevented&&xt.stop(dt,()=>{xt.pulsate(dt)}),pe&&pe(dt),K&&dt.target===dt.currentTarget&&zn()&&dt.key===" "&&!dt.defaultPrevented&&K(dt)});let ci=S;ci==="button"&&(it.href||it.to)&&(ci=U);const Pi={};ci==="button"?(Pi.type=$e===void 0?"button":$e,Pi.disabled=A):(!it.href&&!it.to&&(Pi.role="button"),A&&(Pi["aria-disabled"]=A));const ii=as(n,Tt),pi={...a,centerRipple:f,component:S,disabled:A,disableRipple:R,disableTouchRipple:O,focusRipple:z,tabIndex:et,focusVisible:ht},yi=AQ(pi);return te.jsxs(MQ,{as:ci,className:si(yi.root,r),ownerState:pi,onBlur:oi,onClick:K,onContextMenu:en,onFocus:Ln,onKeyDown:hi,onKeyUp:fi,onMouseDown:on,onMouseLeave:Vn,onMouseUp:Rn,onDragLeave:jt,onTouchEnd:On,onTouchMove:ai,onTouchStart:Hn,ref:ii,tabIndex:A?-1:et,type:$e,...Pi,...it,children:[y,Ft?te.jsx(TQ,{ref:je,center:f,...ot}):null]})});function cm(e,t,n,a=!1){return _u(u=>(n&&n(u),a||e[t](u),!0))}function RQ(e){return tr("MuiChip",e)}const uo=or("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),IQ=e=>{const{classes:t,disabled:n,size:a,color:u,iconColor:f,onDelete:y,clickable:r,variant:S}=e,A={root:["root",S,n&&"disabled",`size${Bn(a)}`,`color${Bn(u)}`,r&&"clickable",r&&`clickableColor${Bn(u)}`,y&&"deletable",y&&`deletableColor${Bn(u)}`,`${S}${Bn(u)}`],label:["label",`label${Bn(a)}`],avatar:["avatar",`avatar${Bn(a)}`,`avatarColor${Bn(u)}`],icon:["icon",`icon${Bn(a)}`,`iconColor${Bn(f)}`],deleteIcon:["deleteIcon",`deleteIcon${Bn(a)}`,`deleteIconColor${Bn(u)}`,`deleteIcon${Bn(S)}Color${Bn(u)}`]};return er(A,RQ,t)},PQ=Mn("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:a,iconColor:u,clickable:f,onDelete:y,size:r,variant:S}=n;return[{[`& .${uo.avatar}`]:t.avatar},{[`& .${uo.avatar}`]:t[`avatar${Bn(r)}`]},{[`& .${uo.avatar}`]:t[`avatarColor${Bn(a)}`]},{[`& .${uo.icon}`]:t.icon},{[`& .${uo.icon}`]:t[`icon${Bn(r)}`]},{[`& .${uo.icon}`]:t[`iconColor${Bn(u)}`]},{[`& .${uo.deleteIcon}`]:t.deleteIcon},{[`& .${uo.deleteIcon}`]:t[`deleteIcon${Bn(r)}`]},{[`& .${uo.deleteIcon}`]:t[`deleteIconColor${Bn(a)}`]},{[`& .${uo.deleteIcon}`]:t[`deleteIcon${Bn(S)}Color${Bn(a)}`]},t.root,t[`size${Bn(r)}`],t[`color${Bn(a)}`],f&&t.clickable,f&&a!=="default"&&t[`clickableColor${Bn(a)})`],y&&t.deletable,y&&a!=="default"&&t[`deletableColor${Bn(a)}`],t[S],t[`${S}${Bn(a)}`]]}})(Tr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${uo.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${uo.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${uo.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${uo.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${uo.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${uo.icon}`]:{marginLeft:5,marginRight:-6},[`& .${uo.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Dr(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Dr(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${uo.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${uo.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(la(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${uo.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:Dr(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${uo.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${uo.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${uo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Dr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(la(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${uo.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Dr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${uo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Dr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(la(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${uo.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${uo.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${uo.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${uo.avatar}`]:{marginLeft:4},[`& .${uo.avatarSmall}`]:{marginLeft:2},[`& .${uo.icon}`]:{marginLeft:4},[`& .${uo.iconSmall}`]:{marginLeft:2},[`& .${uo.deleteIcon}`]:{marginRight:5},[`& .${uo.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(la()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:Dr(e.palette[n].main,.7)}`,[`&.${uo.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${uo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Dr(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${uo.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:Dr(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),DQ=Mn("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:a}=n;return[t.label,t[`label${Bn(a)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function aB(e){return e.key==="Backspace"||e.key==="Delete"}const Sw=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiChip"}),{avatar:u,className:f,clickable:y,color:r="default",component:S,deleteIcon:A,disabled:R=!1,icon:O,label:z,onClick:N,onDelete:U,onKeyDown:H,onKeyUp:K,size:W="medium",variant:re="filled",tabIndex:ne,skipFocusWhenDisabled:se=!1,...ue}=a,pe=ee.useRef(null),Ce=as(pe,n),Le=xt=>{xt.stopPropagation(),U&&U(xt)},qe=xt=>{xt.currentTarget===xt.target&&aB(xt)&&xt.preventDefault(),H&&H(xt)},ye=xt=>{xt.currentTarget===xt.target&&U&&aB(xt)&&U(xt),K&&K(xt)},Xe=y!==!1&&N?!0:y,ut=Xe||U?Wf:S||"div",et={...a,component:ut,disabled:R,size:W,color:r,iconColor:ee.isValidElement(O)&&O.props.color||r,onDelete:!!U,clickable:Xe,variant:re},ot=IQ(et),mt=ut===Wf?{component:S||"div",focusVisibleClassName:ot.focusVisible,...U&&{disableRipple:!0}}:{};let $e=null;U&&($e=A&&ee.isValidElement(A)?ee.cloneElement(A,{className:si(A.props.className,ot.deleteIcon),onClick:Le}):te.jsx(pQ,{className:ot.deleteIcon,onClick:Le}));let it=null;u&&ee.isValidElement(u)&&(it=ee.cloneElement(u,{className:si(ot.avatar,u.props.className)}));let Tt=null;return O&&ee.isValidElement(O)&&(Tt=ee.cloneElement(O,{className:si(ot.icon,O.props.className)})),te.jsxs(PQ,{as:ut,className:si(ot.root,f),disabled:Xe&&R?!0:void 0,onClick:N,onKeyDown:qe,onKeyUp:ye,ref:Ce,tabIndex:se&&R?-1:ne,ownerState:et,...mt,...ue,children:[it||Tt,te.jsx(DQ,{className:ot.label,ownerState:et,children:z}),$e]})});function lB(e){return e.substring(2).toLowerCase()}function OQ(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function _U(e){const{children:t,disableReactTree:n=!1,mouseEvent:a="onClick",onClickAway:u,touchEvent:f="onTouchEnd"}=e,y=ee.useRef(!1),r=ee.useRef(null),S=ee.useRef(!1),A=ee.useRef(!1);ee.useEffect(()=>(setTimeout(()=>{S.current=!0},0),()=>{S.current=!1}),[]);const R=as(Pm(t),r),O=_u(U=>{const H=A.current;A.current=!1;const K=sl(r.current);if(!S.current||!r.current||"clientX"in U&&OQ(U,K))return;if(y.current){y.current=!1;return}let W;U.composedPath?W=U.composedPath().includes(r.current):W=!K.documentElement.contains(U.target)||r.current.contains(U.target),!W&&(n||!H)&&u(U)}),z=U=>H=>{A.current=!0;const K=t.props[U];K&&K(H)},N={ref:R};return f!==!1&&(N[f]=z(f)),ee.useEffect(()=>{if(f!==!1){const U=lB(f),H=sl(r.current),K=()=>{y.current=!0};return H.addEventListener(U,O),H.addEventListener("touchmove",K),()=>{H.removeEventListener(U,O),H.removeEventListener("touchmove",K)}}},[O,f]),a!==!1&&(N[a]=z(a)),ee.useEffect(()=>{if(a!==!1){const U=lB(a),H=sl(r.current);return H.addEventListener(U,O),()=>{H.removeEventListener(U,O)}}},[O,a]),ee.cloneElement(t,N)}function LQ(e){return tr("MuiDivider",e)}const cB=or("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),kQ=e=>{const{absolute:t,children:n,classes:a,flexItem:u,light:f,orientation:y,textAlign:r,variant:S}=e;return er({root:["root",t&&"absolute",S,f&&"light",y==="vertical"&&"vertical",u&&"flexItem",n&&"withChildren",n&&y==="vertical"&&"withChildrenVertical",r==="right"&&y!=="vertical"&&"textAlignRight",r==="left"&&y!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",y==="vertical"&&"wrapperVertical"]},LQ,a)},zQ=Mn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(Tr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Dr(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),BQ=Mn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(Tr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),Pd=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiDivider"}),{absolute:u=!1,children:f,className:y,orientation:r="horizontal",component:S=f||r==="vertical"?"div":"hr",flexItem:A=!1,light:R=!1,role:O=S!=="hr"?"separator":void 0,textAlign:z="center",variant:N="fullWidth",...U}=a,H={...a,absolute:u,component:S,flexItem:A,light:R,orientation:r,role:O,textAlign:z,variant:N},K=kQ(H);return te.jsx(zQ,{as:S,className:si(K.root,y),role:O,ref:n,ownerState:H,"aria-orientation":O==="separator"&&(S!=="hr"||r==="vertical")?r:void 0,...U,children:f?te.jsx(BQ,{className:K.wrapper,ownerState:H,children:f}):null})});Pd&&(Pd.muiSkipListHighlight=!0);const vh=ee.createContext({});function FQ(e){return tr("MuiList",e)}or("MuiList",["root","padding","dense","subheader"]);const NQ=e=>{const{classes:t,disablePadding:n,dense:a,subheader:u}=e;return er({root:["root",!n&&"padding",a&&"dense",u&&"subheader"]},FQ,t)},jQ=Mn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),vx=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiList"}),{children:u,className:f,component:y="ul",dense:r=!1,disablePadding:S=!1,subheader:A,...R}=a,O=ee.useMemo(()=>({dense:r}),[r]),z={...a,component:y,dense:r,disablePadding:S},N=NQ(z);return te.jsx(vh.Provider,{value:O,children:te.jsxs(jQ,{as:y,className:si(N.root,f),ref:n,ownerState:z,...R,children:[A,u]})})});function UQ(e){return tr("MuiListItemButton",e)}const z0=or("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),VQ=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},$Q=e=>{const{alignItems:t,classes:n,dense:a,disabled:u,disableGutters:f,divider:y,selected:r}=e,A=er({root:["root",a&&"dense",!f&&"gutters",y&&"divider",u&&"disabled",t==="flex-start"&&"alignItemsFlexStart",r&&"selected"]},UQ,n);return{...n,...A}},HQ=Mn(Wf,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:VQ})(Tr(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${z0.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${z0.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${z0.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${z0.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${z0.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),LE=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiListItemButton"}),{alignItems:u="center",autoFocus:f=!1,component:y="div",children:r,dense:S=!1,disableGutters:A=!1,divider:R=!1,focusVisibleClassName:O,selected:z=!1,className:N,...U}=a,H=ee.useContext(vh),K=ee.useMemo(()=>({dense:S||H.dense||!1,alignItems:u,disableGutters:A}),[u,H.dense,S,A]),W=ee.useRef(null);Lc(()=>{f&&W.current&&W.current.focus()},[f]);const re={...a,alignItems:u,dense:K.dense,disableGutters:A,divider:R,selected:z},ne=$Q(re),se=as(W,n);return te.jsx(vh.Provider,{value:K,children:te.jsx(HQ,{ref:se,href:U.href||U.to,component:(U.href||U.to)&&y==="div"?"button":y,focusVisibleClassName:si(ne.focusVisible,O),ownerState:re,className:si(ne.root,N),...U,classes:ne,children:r})})});function GQ(e){return tr("MuiListItemIcon",e)}const uB=or("MuiListItemIcon",["root","alignItemsFlexStart"]),qQ=e=>{const{alignItems:t,classes:n}=e;return er({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},GQ,n)},WQ=Mn("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(Tr(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),kE=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiListItemIcon"}),{className:u,...f}=a,y=ee.useContext(vh),r={...a,alignItems:y.alignItems},S=qQ(r);return te.jsx(WQ,{className:si(S.root,u),ownerState:r,ref:n,...f})});function XQ(e){return tr("MuiListItemText",e)}const F0=or("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ZQ=e=>{const{classes:t,inset:n,primary:a,secondary:u,dense:f}=e;return er({root:["root",n&&"inset",f&&"dense",a&&u&&"multiline"],primary:["primary"],secondary:["secondary"]},XQ,t)},YQ=Mn("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${F0.primary}`]:t.primary},{[`& .${F0.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${ME.root}:where(& .${F0.primary})`]:{display:"block"},[`.${ME.root}:where(& .${F0.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),$1=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiListItemText"}),{children:u,className:f,disableTypography:y=!1,inset:r=!1,primary:S,primaryTypographyProps:A,secondary:R,secondaryTypographyProps:O,slots:z={},slotProps:N={},...U}=a,{dense:H}=ee.useContext(vh);let K=S??u,W=R;const re={...a,disableTypography:y,inset:r,primary:!!K,secondary:!!W,dense:H},ne=ZQ(re),se={slots:z,slotProps:{primary:A,secondary:O,...N}},[ue,pe]=Fr("root",{className:si(ne.root,f),elementType:YQ,externalForwardedProps:{...se,...U},ownerState:re,ref:n}),[Ce,Le]=Fr("primary",{className:ne.primary,elementType:Ii,externalForwardedProps:se,ownerState:re}),[qe,ye]=Fr("secondary",{className:ne.secondary,elementType:Ii,externalForwardedProps:se,ownerState:re});return K!=null&&K.type!==Ii&&!y&&(K=te.jsx(Ce,{variant:H?"body2":"body1",component:Le!=null&&Le.variant?void 0:"span",...Le,children:K})),W!=null&&W.type!==Ii&&!y&&(W=te.jsx(qe,{variant:"body2",color:"textSecondary",...ye,children:W})),te.jsxs(ue,{...pe,children:[K,W]})});function KQ(e){return tr("MuiCircularProgress",e)}or("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Cg=44,DI=Yg`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,OI=Yg`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,JQ=typeof DI!="string"?mx`
        animation: ${DI} 1.4s linear infinite;
      `:null,QQ=typeof OI!="string"?mx`
        animation: ${OI} 1.4s ease-in-out infinite;
      `:null,eee=e=>{const{classes:t,variant:n,color:a,disableShrink:u}=e,f={root:["root",n,`color${Bn(a)}`],svg:["svg"],circle:["circle",`circle${Bn(n)}`,u&&"circleDisableShrink"]};return er(f,KQ,t)},tee=Mn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Bn(n.color)}`]]}})(Tr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:JQ||{animation:`${DI} 1.4s linear infinite`}},...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),nee=Mn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),iee=Mn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Bn(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Tr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:QQ||{animation:`${OI} 1.4s ease-in-out infinite`}}]}))),vU=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiCircularProgress"}),{className:u,color:f="primary",disableShrink:y=!1,size:r=40,style:S,thickness:A=3.6,value:R=0,variant:O="indeterminate",...z}=a,N={...a,color:f,disableShrink:y,size:r,thickness:A,value:R,variant:O},U=eee(N),H={},K={},W={};if(O==="determinate"){const re=2*Math.PI*((Cg-A)/2);H.strokeDasharray=re.toFixed(3),W["aria-valuenow"]=Math.round(R),H.strokeDashoffset=`${((100-R)/100*re).toFixed(3)}px`,K.transform="rotate(-90deg)"}return te.jsx(tee,{className:si(U.root,u),style:{width:r,height:r,...K,...S},ownerState:N,ref:n,role:"progressbar",...W,...z,children:te.jsx(nee,{className:U.svg,ownerState:N,viewBox:`${Cg/2} ${Cg/2} ${Cg} ${Cg}`,children:te.jsx(iee,{className:U.circle,style:H,ownerState:N,cx:Cg,cy:Cg,r:(Cg-A)/2,fill:"none",strokeWidth:A})})})});function ree(e){return tr("MuiButton",e)}const x_=or("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),oee=ee.createContext({}),see=ee.createContext(void 0),aee=e=>{const{color:t,disableElevation:n,fullWidth:a,size:u,variant:f,loading:y,loadingPosition:r,classes:S}=e,A={root:["root",y&&"loading",f,`${f}${Bn(t)}`,`size${Bn(u)}`,`${f}Size${Bn(u)}`,`color${Bn(t)}`,n&&"disableElevation",a&&"fullWidth",y&&`loadingPosition${Bn(r)}`],startIcon:["icon","startIcon",`iconSize${Bn(u)}`],endIcon:["icon","endIcon",`iconSize${Bn(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},R=er(A,ree,S);return{...S,...R}},xU=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],lee=Mn(Wf,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Bn(n.color)}`],t[`size${Bn(n.size)}`],t[`${n.variant}Size${Bn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Tr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${x_.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${x_.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${x_.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${x_.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(la()).map(([a])=>({props:{color:a},style:{"--variant-textColor":(e.vars||e).palette[a].main,"--variant-outlinedColor":(e.vars||e).palette[a].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[a].mainChannel} / 0.5)`:Dr(e.palette[a].main,.5),"--variant-containedColor":(e.vars||e).palette[a].contrastText,"--variant-containedBg":(e.vars||e).palette[a].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[a].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette[a].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[a].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette[a].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${x_.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${x_.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${x_.loading}`]:{color:"transparent"}}}]}})),cee=Mn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Bn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...xU]})),uee=Mn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Bn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...xU]})),hee=Mn("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),hB=Mn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),J_=ee.forwardRef(function(t,n){const a=ee.useContext(oee),u=ee.useContext(see),f=B1(a,t),y=nr({props:f,name:"MuiButton"}),{children:r,color:S="primary",component:A="button",className:R,disabled:O=!1,disableElevation:z=!1,disableFocusRipple:N=!1,endIcon:U,focusVisibleClassName:H,fullWidth:K=!1,id:W,loading:re=null,loadingIndicator:ne,loadingPosition:se="center",size:ue="medium",startIcon:pe,type:Ce,variant:Le="text",...qe}=y,ye=bw(W),Xe=ne??te.jsx(vU,{"aria-labelledby":ye,color:"inherit",size:16}),ut={...y,color:S,component:A,disabled:O,disableElevation:z,disableFocusRipple:N,fullWidth:K,loading:re,loadingIndicator:Xe,loadingPosition:se,size:ue,type:Ce,variant:Le},et=aee(ut),ot=(pe||re&&se==="start")&&te.jsx(cee,{className:et.startIcon,ownerState:ut,children:pe||te.jsx(hB,{className:et.loadingIconPlaceholder,ownerState:ut})}),mt=(U||re&&se==="end")&&te.jsx(uee,{className:et.endIcon,ownerState:ut,children:U||te.jsx(hB,{className:et.loadingIconPlaceholder,ownerState:ut})}),$e=u||"",it=typeof re=="boolean"?te.jsx("span",{className:et.loadingWrapper,style:{display:"contents"},children:re&&te.jsx(hee,{className:et.loadingIndicator,ownerState:ut,children:Xe})}):null;return te.jsxs(lee,{ownerState:ut,className:si(a.className,et.root,R,$e),component:A,disabled:O||re,focusRipple:!N,focusVisibleClassName:si(et.focusVisible,H),ref:n,type:Ce,id:re?ye:W,...qe,classes:et,children:[ot,se!=="end"&&it,r,se==="end"&&it,mt]})}),bU=ee.createContext({});function dee(e){const t=ee.useRef(null);return t.current===null&&(t.current=e()),t.current}const OD=typeof window<"u",fee=OD?ee.useLayoutEffect:ee.useEffect,LD=ee.createContext(null),wU=ee.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function pee(e=!0){const t=ee.useContext(LD);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:a,register:u}=t,f=ee.useId();ee.useEffect(()=>{if(e)return u(f)},[e]);const y=ee.useCallback(()=>e&&a&&a(f),[f,a,e]);return!n&&a?[!1,y]:[!0]}function kD(e,t){e.indexOf(t)===-1&&e.push(t)}function zD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Em=(e,t,n)=>n>t?t:n<e?e:n;let BD=()=>{};const Cm={},SU=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),TU=e=>/^0[^.\s]+$/u.test(e);function FD(e){let t;return()=>(t===void 0&&(t=e()),t)}const xh=e=>e,mee=(e,t)=>n=>t(e(n)),Tw=(...e)=>e.reduce(mee),H1=(e,t,n)=>{const a=t-e;return a===0?1:(n-e)/a};class ND{constructor(){this.subscriptions=[]}add(t){return kD(this.subscriptions,t),()=>zD(this.subscriptions,t)}notify(t,n,a){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,n,a);else for(let f=0;f<u;f++){const y=this.subscriptions[f];y&&y(t,n,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vf=e=>e*1e3,$f=e=>e/1e3;function EU(e,t){return t?e*(1e3/t):0}const gee=(e,t,n)=>{const a=t-e;return((n-e)%a+a)%a+e},CU=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,yee=1e-7,_ee=12;function vee(e,t,n,a,u){let f,y,r=0;do y=t+(n-t)/2,f=CU(y,a,u)-e,f>0?n=y:t=y;while(Math.abs(f)>yee&&++r<_ee);return y}function Ew(e,t,n,a){if(e===t&&n===a)return xh;const u=f=>vee(f,0,1,e,n);return f=>f===0||f===1?f:CU(u(f),t,a)}const AU=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,MU=e=>t=>1-e(1-t),RU=Ew(.33,1.53,.69,.99),jD=MU(RU),IU=AU(jD),PU=e=>(e*=2)<1?.5*jD(e):.5*(2-Math.pow(2,-10*(e-1))),UD=e=>1-Math.sin(Math.acos(e)),DU=MU(UD),OU=AU(UD),xee=Ew(.42,0,1,1),bee=Ew(0,0,.58,1),LU=Ew(.42,0,.58,1),wee=e=>Array.isArray(e)&&typeof e[0]!="number",kU=e=>Array.isArray(e)&&typeof e[0]=="number",See={linear:xh,easeIn:xee,easeInOut:LU,easeOut:bee,circIn:UD,circInOut:OU,circOut:DU,backIn:jD,backInOut:IU,backOut:RU,anticipate:PU},Tee=e=>typeof e=="string",dB=e=>{if(kU(e)){BD(e.length===4);const[t,n,a,u]=e;return Ew(t,n,a,u)}else if(Tee(e))return See[e];return e},sT=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],fB={value:null};function Eee(e,t){let n=new Set,a=new Set,u=!1,f=!1;const y=new WeakSet;let r={delta:0,timestamp:0,isProcessing:!1},S=0;function A(O){y.has(O)&&(R.schedule(O),e()),S++,O(r)}const R={schedule:(O,z=!1,N=!1)=>{const H=N&&u?n:a;return z&&y.add(O),H.has(O)||H.add(O),O},cancel:O=>{a.delete(O),y.delete(O)},process:O=>{if(r=O,u){f=!0;return}u=!0,[n,a]=[a,n],n.forEach(A),t&&fB.value&&fB.value.frameloop[t].push(S),S=0,n.clear(),u=!1,f&&(f=!1,R.process(O))}};return R}const Cee=40;function zU(e,t){let n=!1,a=!0;const u={delta:0,timestamp:0,isProcessing:!1},f=()=>n=!0,y=sT.reduce((ne,se)=>(ne[se]=Eee(f,t?se:void 0),ne),{}),{setup:r,read:S,resolveKeyframes:A,preUpdate:R,update:O,preRender:z,render:N,postRender:U}=y,H=()=>{const ne=Cm.useManualTiming?u.timestamp:performance.now();n=!1,Cm.useManualTiming||(u.delta=a?1e3/60:Math.max(Math.min(ne-u.timestamp,Cee),1)),u.timestamp=ne,u.isProcessing=!0,r.process(u),S.process(u),A.process(u),R.process(u),O.process(u),z.process(u),N.process(u),U.process(u),u.isProcessing=!1,n&&t&&(a=!1,e(H))},K=()=>{n=!0,a=!0,u.isProcessing||e(H)};return{schedule:sT.reduce((ne,se)=>{const ue=y[se];return ne[se]=(pe,Ce=!1,Le=!1)=>(n||K(),ue.schedule(pe,Ce,Le)),ne},{}),cancel:ne=>{for(let se=0;se<sT.length;se++)y[sT[se]].cancel(ne)},state:u,steps:y}}const{schedule:vs,cancel:$g,state:rl,steps:UM}=zU(typeof requestAnimationFrame<"u"?requestAnimationFrame:xh,!0);let nE;function Aee(){nE=void 0}const Ac={now:()=>(nE===void 0&&Ac.set(rl.isProcessing||Cm.useManualTiming?rl.timestamp:performance.now()),nE),set:e=>{nE=e,queueMicrotask(Aee)}},BU=e=>t=>typeof t=="string"&&t.startsWith(e),VD=BU("--"),Mee=BU("var(--"),$D=e=>Mee(e)?Ree.test(e.split("/*")[0].trim()):!1,Ree=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xx={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},G1={...xx,transform:e=>Em(0,1,e)},aT={...xx,default:1},_1=e=>Math.round(e*1e5)/1e5,HD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Iee(e){return e==null}const Pee=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,GD=(e,t)=>n=>!!(typeof n=="string"&&Pee.test(n)&&n.startsWith(e)||t&&!Iee(n)&&Object.prototype.hasOwnProperty.call(n,t)),FU=(e,t,n)=>a=>{if(typeof a!="string")return a;const[u,f,y,r]=a.match(HD);return{[e]:parseFloat(u),[t]:parseFloat(f),[n]:parseFloat(y),alpha:r!==void 0?parseFloat(r):1}},Dee=e=>Em(0,255,e),VM={...xx,transform:e=>Math.round(Dee(e))},z_={test:GD("rgb","red"),parse:FU("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:a=1})=>"rgba("+VM.transform(e)+", "+VM.transform(t)+", "+VM.transform(n)+", "+_1(G1.transform(a))+")"};function Oee(e){let t="",n="",a="",u="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),a=e.substring(3,4),u=e.substring(4,5),t+=t,n+=n,a+=a,u+=u),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:u?parseInt(u,16)/255:1}}const LI={test:GD("#"),parse:Oee,transform:z_.transform},Cw=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mg=Cw("deg"),Hf=Cw("%"),_r=Cw("px"),Lee=Cw("vh"),kee=Cw("vw"),pB={...Hf,parse:e=>Hf.parse(e)/100,transform:e=>Hf.transform(e*100)},N0={test:GD("hsl","hue"),parse:FU("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:a=1})=>"hsla("+Math.round(e)+", "+Hf.transform(_1(t))+", "+Hf.transform(_1(n))+", "+_1(G1.transform(a))+")"},Pl={test:e=>z_.test(e)||LI.test(e)||N0.test(e),parse:e=>z_.test(e)?z_.parse(e):N0.test(e)?N0.parse(e):LI.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?z_.transform(e):N0.transform(e)},zee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Bee(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(HD))==null?void 0:t.length)||0)+(((n=e.match(zee))==null?void 0:n.length)||0)>0}const NU="number",jU="color",Fee="var",Nee="var(",mB="${}",jee=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function q1(e){const t=e.toString(),n=[],a={color:[],number:[],var:[]},u=[];let f=0;const r=t.replace(jee,S=>(Pl.test(S)?(a.color.push(f),u.push(jU),n.push(Pl.parse(S))):S.startsWith(Nee)?(a.var.push(f),u.push(Fee),n.push(S)):(a.number.push(f),u.push(NU),n.push(parseFloat(S))),++f,mB)).split(mB);return{values:n,split:r,indexes:a,types:u}}function UU(e){return q1(e).values}function VU(e){const{split:t,types:n}=q1(e),a=t.length;return u=>{let f="";for(let y=0;y<a;y++)if(f+=t[y],u[y]!==void 0){const r=n[y];r===NU?f+=_1(u[y]):r===jU?f+=Pl.transform(u[y]):f+=u[y]}return f}}const Uee=e=>typeof e=="number"?0:e;function Vee(e){const t=UU(e);return VU(e)(t.map(Uee))}const Hg={test:Bee,parse:UU,createTransformer:VU,getAnimatableNone:Vee};function $M(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function $ee({hue:e,saturation:t,lightness:n,alpha:a}){e/=360,t/=100,n/=100;let u=0,f=0,y=0;if(!t)u=f=y=n;else{const r=n<.5?n*(1+t):n+t-n*t,S=2*n-r;u=$M(S,r,e+1/3),f=$M(S,r,e),y=$M(S,r,e-1/3)}return{red:Math.round(u*255),green:Math.round(f*255),blue:Math.round(y*255),alpha:a}}function zE(e,t){return n=>n>0?t:e}const _s=(e,t,n)=>e+(t-e)*n,HM=(e,t,n)=>{const a=e*e,u=n*(t*t-a)+a;return u<0?0:Math.sqrt(u)},Hee=[LI,z_,N0],Gee=e=>Hee.find(t=>t.test(e));function gB(e){const t=Gee(e);if(!t)return!1;let n=t.parse(e);return t===N0&&(n=$ee(n)),n}const yB=(e,t)=>{const n=gB(e),a=gB(t);if(!n||!a)return zE(e,t);const u={...n};return f=>(u.red=HM(n.red,a.red,f),u.green=HM(n.green,a.green,f),u.blue=HM(n.blue,a.blue,f),u.alpha=_s(n.alpha,a.alpha,f),z_.transform(u))},kI=new Set(["none","hidden"]);function qee(e,t){return kI.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Wee(e,t){return n=>_s(e,t,n)}function qD(e){return typeof e=="number"?Wee:typeof e=="string"?$D(e)?zE:Pl.test(e)?yB:Yee:Array.isArray(e)?$U:typeof e=="object"?Pl.test(e)?yB:Xee:zE}function $U(e,t){const n=[...e],a=n.length,u=e.map((f,y)=>qD(f)(f,t[y]));return f=>{for(let y=0;y<a;y++)n[y]=u[y](f);return n}}function Xee(e,t){const n={...e,...t},a={};for(const u in n)e[u]!==void 0&&t[u]!==void 0&&(a[u]=qD(e[u])(e[u],t[u]));return u=>{for(const f in a)n[f]=a[f](u);return n}}function Zee(e,t){const n=[],a={color:0,var:0,number:0};for(let u=0;u<t.values.length;u++){const f=t.types[u],y=e.indexes[f][a[f]],r=e.values[y]??0;n[u]=r,a[f]++}return n}const Yee=(e,t)=>{const n=Hg.createTransformer(t),a=q1(e),u=q1(t);return a.indexes.var.length===u.indexes.var.length&&a.indexes.color.length===u.indexes.color.length&&a.indexes.number.length>=u.indexes.number.length?kI.has(e)&&!u.values.length||kI.has(t)&&!a.values.length?qee(e,t):Tw($U(Zee(a,u),u.values),n):zE(e,t)};function HU(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?_s(e,t,n):qD(e)(e,t)}const Kee=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>vs.update(t,n),stop:()=>$g(t),now:()=>rl.isProcessing?rl.timestamp:Ac.now()}},GU=(e,t,n=10)=>{let a="";const u=Math.max(Math.round(t/n),2);for(let f=0;f<u;f++)a+=e(f/(u-1))+", ";return`linear(${a.substring(0,a.length-2)})`},BE=2e4;function WD(e){let t=0;const n=50;let a=e.next(t);for(;!a.done&&t<BE;)t+=n,a=e.next(t);return t>=BE?1/0:t}function Jee(e,t=100,n){const a=n({...e,keyframes:[0,t]}),u=Math.min(WD(a),BE);return{type:"keyframes",ease:f=>a.next(u*f).value/t,duration:$f(u)}}const Qee=5;function qU(e,t,n){const a=Math.max(t-Qee,0);return EU(n-e(a),t-a)}const Ps={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_B=.001;function ete({duration:e=Ps.duration,bounce:t=Ps.bounce,velocity:n=Ps.velocity,mass:a=Ps.mass}){let u,f,y=1-t;y=Em(Ps.minDamping,Ps.maxDamping,y),e=Em(Ps.minDuration,Ps.maxDuration,$f(e)),y<1?(u=A=>{const R=A*y,O=R*e,z=R-n,N=zI(A,y),U=Math.exp(-O);return _B-z/N*U},f=A=>{const O=A*y*e,z=O*n+n,N=Math.pow(y,2)*Math.pow(A,2)*e,U=Math.exp(-O),H=zI(Math.pow(A,2),y);return(-u(A)+_B>0?-1:1)*((z-N)*U)/H}):(u=A=>{const R=Math.exp(-A*e),O=(A-n)*e+1;return-.001+R*O},f=A=>{const R=Math.exp(-A*e),O=(n-A)*(e*e);return R*O});const r=5/e,S=nte(u,f,r);if(e=Vf(e),isNaN(S))return{stiffness:Ps.stiffness,damping:Ps.damping,duration:e};{const A=Math.pow(S,2)*a;return{stiffness:A,damping:y*2*Math.sqrt(a*A),duration:e}}}const tte=12;function nte(e,t,n){let a=n;for(let u=1;u<tte;u++)a=a-e(a)/t(a);return a}function zI(e,t){return e*Math.sqrt(1-t*t)}const ite=["duration","bounce"],rte=["stiffness","damping","mass"];function vB(e,t){return t.some(n=>e[n]!==void 0)}function ote(e){let t={velocity:Ps.velocity,stiffness:Ps.stiffness,damping:Ps.damping,mass:Ps.mass,isResolvedFromDuration:!1,...e};if(!vB(e,rte)&&vB(e,ite))if(e.visualDuration){const n=e.visualDuration,a=2*Math.PI/(n*1.2),u=a*a,f=2*Em(.05,1,1-(e.bounce||0))*Math.sqrt(u);t={...t,mass:Ps.mass,stiffness:u,damping:f}}else{const n=ete(e);t={...t,...n,mass:Ps.mass},t.isResolvedFromDuration=!0}return t}function FE(e=Ps.visualDuration,t=Ps.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:u}=n;const f=n.keyframes[0],y=n.keyframes[n.keyframes.length-1],r={done:!1,value:f},{stiffness:S,damping:A,mass:R,duration:O,velocity:z,isResolvedFromDuration:N}=ote({...n,velocity:-$f(n.velocity||0)}),U=z||0,H=A/(2*Math.sqrt(S*R)),K=y-f,W=$f(Math.sqrt(S/R)),re=Math.abs(K)<5;a||(a=re?Ps.restSpeed.granular:Ps.restSpeed.default),u||(u=re?Ps.restDelta.granular:Ps.restDelta.default);let ne;if(H<1){const ue=zI(W,H);ne=pe=>{const Ce=Math.exp(-H*W*pe);return y-Ce*((U+H*W*K)/ue*Math.sin(ue*pe)+K*Math.cos(ue*pe))}}else if(H===1)ne=ue=>y-Math.exp(-W*ue)*(K+(U+W*K)*ue);else{const ue=W*Math.sqrt(H*H-1);ne=pe=>{const Ce=Math.exp(-H*W*pe),Le=Math.min(ue*pe,300);return y-Ce*((U+H*W*K)*Math.sinh(Le)+ue*K*Math.cosh(Le))/ue}}const se={calculatedDuration:N&&O||null,next:ue=>{const pe=ne(ue);if(N)r.done=ue>=O;else{let Ce=ue===0?U:0;H<1&&(Ce=ue===0?Vf(U):qU(ne,ue,pe));const Le=Math.abs(Ce)<=a,qe=Math.abs(y-pe)<=u;r.done=Le&&qe}return r.value=r.done?y:pe,r},toString:()=>{const ue=Math.min(WD(se),BE),pe=GU(Ce=>se.next(ue*Ce).value,ue,30);return ue+"ms "+pe},toTransition:()=>{}};return se}FE.applyToOptions=e=>{const t=Jee(e,100,FE);return e.ease=t.ease,e.duration=Vf(t.duration),e.type="keyframes",e};function BI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:a=325,bounceDamping:u=10,bounceStiffness:f=500,modifyTarget:y,min:r,max:S,restDelta:A=.5,restSpeed:R}){const O=e[0],z={done:!1,value:O},N=Le=>r!==void 0&&Le<r||S!==void 0&&Le>S,U=Le=>r===void 0?S:S===void 0||Math.abs(r-Le)<Math.abs(S-Le)?r:S;let H=n*t;const K=O+H,W=y===void 0?K:y(K);W!==K&&(H=W-O);const re=Le=>-H*Math.exp(-Le/a),ne=Le=>W+re(Le),se=Le=>{const qe=re(Le),ye=ne(Le);z.done=Math.abs(qe)<=A,z.value=z.done?W:ye};let ue,pe;const Ce=Le=>{N(z.value)&&(ue=Le,pe=FE({keyframes:[z.value,U(z.value)],velocity:qU(ne,Le,z.value),damping:u,stiffness:f,restDelta:A,restSpeed:R}))};return Ce(0),{calculatedDuration:null,next:Le=>{let qe=!1;return!pe&&ue===void 0&&(qe=!0,se(Le),Ce(Le)),ue!==void 0&&Le>=ue?pe.next(Le-ue):(!qe&&se(Le),z)}}}function ste(e,t,n){const a=[],u=n||Cm.mix||HU,f=e.length-1;for(let y=0;y<f;y++){let r=u(e[y],e[y+1]);if(t){const S=Array.isArray(t)?t[y]||xh:t;r=Tw(S,r)}a.push(r)}return a}function ate(e,t,{clamp:n=!0,ease:a,mixer:u}={}){const f=e.length;if(BD(f===t.length),f===1)return()=>t[0];if(f===2&&t[0]===t[1])return()=>t[1];const y=e[0]===e[1];e[0]>e[f-1]&&(e=[...e].reverse(),t=[...t].reverse());const r=ste(t,a,u),S=r.length,A=R=>{if(y&&R<e[0])return t[0];let O=0;if(S>1)for(;O<e.length-2&&!(R<e[O+1]);O++);const z=H1(e[O],e[O+1],R);return r[O](z)};return n?R=>A(Em(e[0],e[f-1],R)):A}function lte(e,t){const n=e[e.length-1];for(let a=1;a<=t;a++){const u=H1(0,t,a);e.push(_s(n,1,u))}}function cte(e){const t=[0];return lte(t,e.length-1),t}function ute(e,t){return e.map(n=>n*t)}function hte(e,t){return e.map(()=>t||LU).splice(0,e.length-1)}function v1({duration:e=300,keyframes:t,times:n,ease:a="easeInOut"}){const u=wee(a)?a.map(dB):dB(a),f={done:!1,value:t[0]},y=ute(n&&n.length===t.length?n:cte(t),e),r=ate(y,t,{ease:Array.isArray(u)?u:hte(t,u)});return{calculatedDuration:e,next:S=>(f.value=r(S),f.done=S>=e,f)}}const dte=e=>e!==null;function XD(e,{repeat:t,repeatType:n="loop"},a,u=1){const f=e.filter(dte),r=u<0||t&&n!=="loop"&&t%2===1?0:f.length-1;return!r||a===void 0?f[r]:a}const fte={decay:BI,inertia:BI,tween:v1,keyframes:v1,spring:FE};function WU(e){typeof e.type=="string"&&(e.type=fte[e.type])}class ZD{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const pte=e=>e/100;class XU extends ZD{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var a,u;if(n){const{motionValue:f}=this.options;f&&f.updatedAt!==Ac.now()&&this.tick(Ac.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(u=(a=this.options).onStop)==null||u.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;WU(t);const{type:n=v1,repeat:a=0,repeatDelay:u=0,repeatType:f,velocity:y=0}=t;let{keyframes:r}=t;const S=n||v1;S!==v1&&typeof r[0]!="number"&&(this.mixKeyframes=Tw(pte,HU(r[0],r[1])),r=[0,100]);const A=S({...t,keyframes:r});f==="mirror"&&(this.mirroredGenerator=S({...t,keyframes:[...r].reverse(),velocity:-y})),A.calculatedDuration===null&&(A.calculatedDuration=WD(A));const{calculatedDuration:R}=A;this.calculatedDuration=R,this.resolvedDuration=R+u,this.totalDuration=this.resolvedDuration*(a+1)-u,this.generator=A}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:a,totalDuration:u,mixKeyframes:f,mirroredGenerator:y,resolvedDuration:r,calculatedDuration:S}=this;if(this.startTime===null)return a.next(0);const{delay:A=0,keyframes:R,repeat:O,repeatType:z,repeatDelay:N,type:U,onUpdate:H,finalKeyframe:K}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const W=this.currentTime-A*(this.playbackSpeed>=0?1:-1),re=this.playbackSpeed>=0?W<0:W>u;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let ne=this.currentTime,se=a;if(O){const Le=Math.min(this.currentTime,u)/r;let qe=Math.floor(Le),ye=Le%1;!ye&&Le>=1&&(ye=1),ye===1&&qe--,qe=Math.min(qe,O+1),!!(qe%2)&&(z==="reverse"?(ye=1-ye,N&&(ye-=N/r)):z==="mirror"&&(se=y)),ne=Em(0,1,ye)*r}const ue=re?{done:!1,value:R[0]}:se.next(ne);f&&(ue.value=f(ue.value));let{done:pe}=ue;!re&&S!==null&&(pe=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const Ce=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&pe);return Ce&&U!==BI&&(ue.value=XD(R,this.options,K,this.speed)),H&&H(ue.value),Ce&&this.finish(),ue}then(t,n){return this.finished.then(t,n)}get duration(){return $f(this.calculatedDuration)}get time(){return $f(this.currentTime)}set time(t){var n;t=Vf(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ac.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=$f(this.currentTime))}play(){var u,f;if(this.isStopped)return;const{driver:t=Kee,startTime:n}=this.options;this.driver||(this.driver=t(y=>this.tick(y))),(f=(u=this.options).onPlay)==null||f.call(u);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=n??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ac.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function mte(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const B_=e=>e*180/Math.PI,FI=e=>{const t=B_(Math.atan2(e[1],e[0]));return NI(t)},gte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:FI,rotateZ:FI,skewX:e=>B_(Math.atan(e[1])),skewY:e=>B_(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},NI=e=>(e=e%360,e<0&&(e+=360),e),xB=FI,bB=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),wB=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),yte={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bB,scaleY:wB,scale:e=>(bB(e)+wB(e))/2,rotateX:e=>NI(B_(Math.atan2(e[6],e[5]))),rotateY:e=>NI(B_(Math.atan2(-e[2],e[0]))),rotateZ:xB,rotate:xB,skewX:e=>B_(Math.atan(e[4])),skewY:e=>B_(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function SB(e){return e.includes("scale")?1:0}function jI(e,t){if(!e||e==="none")return SB(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,u;if(n)a=yte,u=n;else{const r=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=gte,u=r}if(!u)return SB(t);const f=a[t],y=u[1].split(",").map(vte);return typeof f=="function"?f(y):y[f]}const _te=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return jI(n,t)};function vte(e){return parseFloat(e.trim())}const bx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wx=new Set(bx),TB=e=>e===xx||e===_r,xte=new Set(["x","y","z"]),bte=bx.filter(e=>!xte.has(e));function wte(e){const t=[];return bte.forEach(n=>{const a=e.getValue(n);a!==void 0&&(t.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),t}const U_={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>jI(t,"x"),y:(e,{transform:t})=>jI(t,"y")};U_.translateX=U_.x;U_.translateY=U_.y;const V_=new Set;let UI=!1,VI=!1,$I=!1;function ZU(){if(VI){const e=Array.from(V_).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),n=new Map;t.forEach(a=>{const u=wte(a);u.length&&(n.set(a,u),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const u=n.get(a);u&&u.forEach(([f,y])=>{var r;(r=a.getValue(f))==null||r.set(y)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}VI=!1,UI=!1,V_.forEach(e=>e.complete($I)),V_.clear()}function YU(){V_.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(VI=!0)})}function Ste(){$I=!0,YU(),ZU(),$I=!1}class YD{constructor(t,n,a,u,f,y=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=a,this.motionValue=u,this.element=f,this.isAsync=y}scheduleResolve(){this.state="scheduled",this.isAsync?(V_.add(this),UI||(UI=!0,vs.read(YU),vs.resolveKeyframes(ZU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:a,motionValue:u}=this;if(t[0]===null){const f=u==null?void 0:u.get(),y=t[t.length-1];if(f!==void 0)t[0]=f;else if(a&&n){const r=a.readValue(n,y);r!=null&&(t[0]=r)}t[0]===void 0&&(t[0]=y),u&&f===void 0&&u.set(t[0])}mte(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),V_.delete(this)}cancel(){this.state==="scheduled"&&(V_.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Tte=e=>e.startsWith("--");function Ete(e,t,n){Tte(t)?e.style.setProperty(t,n):e.style[t]=n}const Cte=FD(()=>window.ScrollTimeline!==void 0),Ate={};function Mte(e,t){const n=FD(e);return()=>Ate[t]??n()}const KU=Mte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),h1=([e,t,n,a])=>`cubic-bezier(${e}, ${t}, ${n}, ${a})`,EB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:h1([0,.65,.55,1]),circOut:h1([.55,0,1,.45]),backIn:h1([.31,.01,.66,-.59]),backOut:h1([.33,1.53,.69,.99])};function JU(e,t){if(e)return typeof e=="function"?KU()?GU(e,t):"ease-out":kU(e)?h1(e):Array.isArray(e)?e.map(n=>JU(n,t)||EB.easeOut):EB[e]}function Rte(e,t,n,{delay:a=0,duration:u=300,repeat:f=0,repeatType:y="loop",ease:r="easeOut",times:S}={},A=void 0){const R={[t]:n};S&&(R.offset=S);const O=JU(r,u);Array.isArray(O)&&(R.easing=O);const z={delay:a,duration:u,easing:Array.isArray(O)?"linear":O,fill:"both",iterations:f+1,direction:y==="reverse"?"alternate":"normal"};return A&&(z.pseudoElement=A),e.animate(R,z)}function QU(e){return typeof e=="function"&&"applyToOptions"in e}function Ite({type:e,...t}){return QU(e)&&KU()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Pte extends ZD{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:a,keyframes:u,pseudoElement:f,allowFlatten:y=!1,finalKeyframe:r,onComplete:S}=t;this.isPseudoElement=!!f,this.allowFlatten=y,this.options=t,BD(typeof t.type!="string");const A=Ite(t);this.animation=Rte(n,a,u,A,f),A.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!f){const R=XD(u,this.options,r,this.speed);this.updateMotionValue?this.updateMotionValue(R):Ete(n,a,R),this.animation.cancel()}S==null||S(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,a;const t=((a=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:a.call(n).duration)||0;return $f(Number(t))}get time(){return $f(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Vf(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Cte()?(this.animation.timeline=t,xh):n(this)}}const eV={anticipate:PU,backInOut:IU,circInOut:OU};function Dte(e){return e in eV}function Ote(e){typeof e.ease=="string"&&Dte(e.ease)&&(e.ease=eV[e.ease])}const CB=10;class Lte extends Pte{constructor(t){Ote(t),WU(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:a,onComplete:u,element:f,...y}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const r=new XU({...y,autoplay:!1}),S=Vf(this.finishedTime??this.time);n.setWithVelocity(r.sample(S-CB).value,r.sample(S).value,CB),r.stop()}}const AB=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hg.test(e)||e==="0")&&!e.startsWith("url("));function kte(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function zte(e,t,n,a){const u=e[0];if(u===null)return!1;if(t==="display"||t==="visibility")return!0;const f=e[e.length-1],y=AB(u,t),r=AB(f,t);return!y||!r?!1:kte(e)||(n==="spring"||QU(n))&&a}const Bte=new Set(["opacity","clipPath","filter","transform"]),Fte=FD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Nte(e){const{motionValue:t,name:n,repeatDelay:a,repeatType:u,damping:f,type:y}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:r,transformTemplate:S}=t.owner.getProps();return Fte()&&n&&Bte.has(n)&&(n!=="transform"||!S)&&!r&&!a&&u!=="mirror"&&f!==0&&y!=="inertia"}const jte=40;class Ute extends ZD{constructor({autoplay:t=!0,delay:n=0,type:a="keyframes",repeat:u=0,repeatDelay:f=0,repeatType:y="loop",keyframes:r,name:S,motionValue:A,element:R,...O}){var U;super(),this.stop=()=>{var H,K;this._animation&&(this._animation.stop(),(H=this.stopTimeline)==null||H.call(this)),(K=this.keyframeResolver)==null||K.cancel()},this.createdAt=Ac.now();const z={autoplay:t,delay:n,type:a,repeat:u,repeatDelay:f,repeatType:y,name:S,motionValue:A,element:R,...O},N=(R==null?void 0:R.KeyframeResolver)||YD;this.keyframeResolver=new N(r,(H,K,W)=>this.onKeyframesResolved(H,K,z,!W),S,A,R),(U=this.keyframeResolver)==null||U.scheduleResolve()}onKeyframesResolved(t,n,a,u){this.keyframeResolver=void 0;const{name:f,type:y,velocity:r,delay:S,isHandoff:A,onUpdate:R}=a;this.resolvedAt=Ac.now(),zte(t,f,y,r)||((Cm.instantAnimations||!S)&&(R==null||R(XD(t,a,n))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const z={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>jte?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...a,keyframes:t},N=!A&&Nte(z)?new Lte({...z,element:z.motionValue.owner.current}):new XU(z);N.finished.then(()=>this.notifyFinished()).catch(xh),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Ste()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Vte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $te(e){const t=Vte.exec(e);if(!t)return[,];const[,n,a,u]=t;return[`--${n??a}`,u]}function tV(e,t,n=1){const[a,u]=$te(e);if(!a)return;const f=window.getComputedStyle(t).getPropertyValue(a);if(f){const y=f.trim();return SU(y)?parseFloat(y):y}return $D(u)?tV(u,t,n+1):u}function KD(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const nV=new Set(["width","height","top","left","right","bottom",...bx]),Hte={test:e=>e==="auto",parse:e=>e},iV=e=>t=>t.test(e),rV=[xx,_r,Hf,Mg,kee,Lee,Hte],MB=e=>rV.find(iV(e));function Gte(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||TU(e):!0}const qte=new Set(["brightness","contrast","saturate","opacity"]);function Wte(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=n.match(HD)||[];if(!a)return e;const u=n.replace(a,"");let f=qte.has(t)?1:0;return a!==n&&(f*=100),t+"("+f+u+")"}const Xte=/\b([a-z-]*)\(.*?\)/gu,HI={...Hg,getAnimatableNone:e=>{const t=e.match(Xte);return t?t.map(Wte).join(" "):e}},RB={...xx,transform:Math.round},Zte={rotate:Mg,rotateX:Mg,rotateY:Mg,rotateZ:Mg,scale:aT,scaleX:aT,scaleY:aT,scaleZ:aT,skew:Mg,skewX:Mg,skewY:Mg,distance:_r,translateX:_r,translateY:_r,translateZ:_r,x:_r,y:_r,z:_r,perspective:_r,transformPerspective:_r,opacity:G1,originX:pB,originY:pB,originZ:_r},JD={borderWidth:_r,borderTopWidth:_r,borderRightWidth:_r,borderBottomWidth:_r,borderLeftWidth:_r,borderRadius:_r,radius:_r,borderTopLeftRadius:_r,borderTopRightRadius:_r,borderBottomRightRadius:_r,borderBottomLeftRadius:_r,width:_r,maxWidth:_r,height:_r,maxHeight:_r,top:_r,right:_r,bottom:_r,left:_r,padding:_r,paddingTop:_r,paddingRight:_r,paddingBottom:_r,paddingLeft:_r,margin:_r,marginTop:_r,marginRight:_r,marginBottom:_r,marginLeft:_r,backgroundPositionX:_r,backgroundPositionY:_r,...Zte,zIndex:RB,fillOpacity:G1,strokeOpacity:G1,numOctaves:RB},Yte={...JD,color:Pl,backgroundColor:Pl,outlineColor:Pl,fill:Pl,stroke:Pl,borderColor:Pl,borderTopColor:Pl,borderRightColor:Pl,borderBottomColor:Pl,borderLeftColor:Pl,filter:HI,WebkitFilter:HI},oV=e=>Yte[e];function sV(e,t){let n=oV(e);return n!==HI&&(n=Hg),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Kte=new Set(["auto","none","0"]);function Jte(e,t,n){let a=0,u;for(;a<e.length&&!u;){const f=e[a];typeof f=="string"&&!Kte.has(f)&&q1(f).values.length&&(u=e[a]),a++}if(u&&n)for(const f of t)e[f]=sV(n,u)}class Qte extends YD{constructor(t,n,a,u,f){super(t,n,a,u,f,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:a}=this;if(!n||!n.current)return;super.readKeyframes();for(let S=0;S<t.length;S++){let A=t[S];if(typeof A=="string"&&(A=A.trim(),$D(A))){const R=tV(A,n.current);R!==void 0&&(t[S]=R),S===t.length-1&&(this.finalKeyframe=A)}}if(this.resolveNoneKeyframes(),!nV.has(a)||t.length!==2)return;const[u,f]=t,y=MB(u),r=MB(f);if(y!==r)if(TB(y)&&TB(r))for(let S=0;S<t.length;S++){const A=t[S];typeof A=="string"&&(t[S]=parseFloat(A))}else U_[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,a=[];for(let u=0;u<t.length;u++)(t[u]===null||Gte(t[u]))&&a.push(u);a.length&&Jte(t,a,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=U_[a](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const u=n[n.length-1];u!==void 0&&t.getValue(a,u).jump(u,!1)}measureEndState(){var r;const{element:t,name:n,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const u=t.getValue(n);u&&u.jump(this.measuredOrigin,!1);const f=a.length-1,y=a[f];a[f]=U_[n](t.measureViewportBox(),window.getComputedStyle(t.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),(r=this.removedTransforms)!=null&&r.length&&this.removedTransforms.forEach(([S,A])=>{t.getValue(S).set(A)}),this.resolveNoneKeyframes()}}function ene(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const u=(n==null?void 0:n[e])??a.querySelectorAll(e);return u?Array.from(u):[]}return Array.from(e)}const IB=30,tne=e=>!isNaN(parseFloat(e));class nne{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,u=!0)=>{var y,r;const f=Ac.now();if(this.updatedAt!==f&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((y=this.events.change)==null||y.notify(this.current),this.dependents))for(const S of this.dependents)S.dirty();u&&((r=this.events.renderRequest)==null||r.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ac.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=tne(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ND);const a=this.events[t].add(n);return t==="change"?()=>{a(),vs.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,a){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ac.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>IB)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,IB);return EU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function W1(e,t){return new nne(e,t)}const aV=(e,t)=>t&&typeof e=="number"?t.transform(e):e,{schedule:QD}=zU(queueMicrotask,!1),Md={x:!1,y:!1};function lV(){return Md.x||Md.y}function ine(e){return e==="x"||e==="y"?Md[e]?null:(Md[e]=!0,()=>{Md[e]=!1}):Md.x||Md.y?null:(Md.x=Md.y=!0,()=>{Md.x=Md.y=!1})}function cV(e,t){const n=ene(e),a=new AbortController,u={passive:!0,...t,signal:a.signal};return[n,u,()=>a.abort()]}function PB(e){return!(e.pointerType==="touch"||lV())}function rne(e,t,n={}){const[a,u,f]=cV(e,n),y=r=>{if(!PB(r))return;const{target:S}=r,A=t(S,r);if(typeof A!="function"||!S)return;const R=O=>{PB(O)&&(A(O),S.removeEventListener("pointerleave",R))};S.addEventListener("pointerleave",R,u)};return a.forEach(r=>{r.addEventListener("pointerenter",y,u)}),f}const uV=(e,t)=>t?e===t?!0:uV(e,t.parentElement):!1,eO=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,one=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sne(e){return one.has(e.tagName)||e.tabIndex!==-1}const iE=new WeakSet;function DB(e){return t=>{t.key==="Enter"&&e(t)}}function GM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ane=(e,t)=>{const n=e.currentTarget;if(!n)return;const a=DB(()=>{if(iE.has(n))return;GM(n,"down");const u=DB(()=>{GM(n,"up")}),f=()=>GM(n,"cancel");n.addEventListener("keyup",u,t),n.addEventListener("blur",f,t)});n.addEventListener("keydown",a,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",a),t)};function OB(e){return eO(e)&&!lV()}function lne(e,t,n={}){const[a,u,f]=cV(e,n),y=r=>{const S=r.currentTarget;if(!OB(r))return;iE.add(S);const A=t(S,r),R=(N,U)=>{window.removeEventListener("pointerup",O),window.removeEventListener("pointercancel",z),iE.has(S)&&iE.delete(S),OB(N)&&typeof A=="function"&&A(N,{success:U})},O=N=>{R(N,S===window||S===document||n.useGlobalTarget||uV(S,N.target))},z=N=>{R(N,!1)};window.addEventListener("pointerup",O,u),window.addEventListener("pointercancel",z,u)};return a.forEach(r=>{(n.useGlobalTarget?window:r).addEventListener("pointerdown",y,u),r instanceof HTMLElement&&(r.addEventListener("focus",A=>ane(A,u)),!sne(r)&&!r.hasAttribute("tabindex")&&(r.tabIndex=0))}),f}const cne=[...rV,Pl,Hg],une=e=>cne.find(iV(e)),hV=ee.createContext({strict:!1}),LB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sx={};for(const e in LB)sx[e]={isEnabled:t=>LB[e].some(n=>!!t[n])};function hne(e){for(const t in e)sx[t]={...sx[t],...e[t]}}const dne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function NE(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||dne.has(e)}let dV=e=>!NE(e);function fne(e){e&&(dV=t=>t.startsWith("on")?!NE(t):e(t))}try{fne(require("@emotion/is-prop-valid").default)}catch{}function pne(e,t,n){const a={};for(const u in e)u==="values"&&typeof e.values=="object"||(dV(u)||n===!0&&NE(u)||!t&&!NE(u)||e.draggable&&u.startsWith("onDrag"))&&(a[u]=e[u]);return a}function mne(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...a)=>e(...a);return new Proxy(n,{get:(a,u)=>u==="create"?e:(t.has(u)||t.set(u,e(u)),t.get(u))})}const NC=ee.createContext({});function jC(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function X1(e){return typeof e=="string"||Array.isArray(e)}const tO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nO=["initial",...tO];function UC(e){return jC(e.animate)||nO.some(t=>X1(e[t]))}function fV(e){return!!(UC(e)||e.variants)}function gne(e,t){if(UC(e)){const{initial:n,animate:a}=e;return{initial:n===!1||X1(n)?n:void 0,animate:X1(a)?a:void 0}}return e.inherit!==!1?t:{}}function yne(e){const{initial:t,animate:n}=gne(e,ee.useContext(NC));return ee.useMemo(()=>({initial:t,animate:n}),[kB(t),kB(n)])}function kB(e){return Array.isArray(e)?e.join(" "):e}const _ne=Symbol.for("motionComponentSymbol");function j0(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vne(e,t,n){return ee.useCallback(a=>{a&&e.onMount&&e.onMount(a),t&&(a?t.mount(a):t.unmount()),n&&(typeof n=="function"?n(a):j0(n)&&(n.current=a))},[t])}const iO=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xne="framerAppearId",pV="data-"+iO(xne),mV=ee.createContext({});function bne(e,t,n,a,u){var H,K;const{visualElement:f}=ee.useContext(NC),y=ee.useContext(hV),r=ee.useContext(LD),S=ee.useContext(wU).reducedMotion,A=ee.useRef(null);a=a||y.renderer,!A.current&&a&&(A.current=a(e,{visualState:t,parent:f,props:n,presenceContext:r,blockInitialAnimation:r?r.initial===!1:!1,reducedMotionConfig:S}));const R=A.current,O=ee.useContext(mV);R&&!R.projection&&u&&(R.type==="html"||R.type==="svg")&&wne(A.current,n,u,O);const z=ee.useRef(!1);ee.useInsertionEffect(()=>{R&&z.current&&R.update(n,r)});const N=n[pV],U=ee.useRef(!!N&&!((H=window.MotionHandoffIsComplete)!=null&&H.call(window,N))&&((K=window.MotionHasOptimisedAnimation)==null?void 0:K.call(window,N)));return fee(()=>{R&&(z.current=!0,window.MotionIsMounted=!0,R.updateFeatures(),QD.render(R.render),U.current&&R.animationState&&R.animationState.animateChanges())}),ee.useEffect(()=>{R&&(!U.current&&R.animationState&&R.animationState.animateChanges(),U.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,N)}),U.current=!1))}),R}function wne(e,t,n,a){const{layoutId:u,layout:f,drag:y,dragConstraints:r,layoutScroll:S,layoutRoot:A,layoutCrossfade:R}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:gV(e.parent)),e.projection.setOptions({layoutId:u,layout:f,alwaysMeasureLayout:!!y||r&&j0(r),visualElement:e,animationType:typeof f=="string"?f:"both",initialPromotionConfig:a,crossfade:R,layoutScroll:S,layoutRoot:A})}function gV(e){if(e)return e.options.allowProjection!==!1?e.projection:gV(e.parent)}function Sne({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:a,Component:u}){e&&hne(e);function f(r,S){let A;const R={...ee.useContext(wU),...r,layoutId:Tne(r)},{isStatic:O}=R,z=yne(r),N=a(r,O);if(!O&&OD){Ene();const U=Cne(R);A=U.MeasureLayout,z.visualElement=bne(u,N,R,t,U.ProjectionNode)}return te.jsxs(NC.Provider,{value:z,children:[A&&z.visualElement?te.jsx(A,{visualElement:z.visualElement,...R}):null,n(u,r,vne(N,z.visualElement,S),N,O,z.visualElement)]})}f.displayName=`motion.${typeof u=="string"?u:`create(${u.displayName??u.name??""})`}`;const y=ee.forwardRef(f);return y[_ne]=u,y}function Tne({layoutId:e}){const t=ee.useContext(bU).id;return t&&e!==void 0?t+"-"+e:e}function Ene(e,t){ee.useContext(hV).strict}function Cne(e){const{drag:t,layout:n}=sx;if(!t&&!n)return{};const a={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Z1={};function Ane(e){for(const t in e)Z1[t]=e[t],VD(t)&&(Z1[t].isCSSVariable=!0)}function yV(e,{layout:t,layoutId:n}){return wx.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Z1[e]||e==="opacity")}const Ol=e=>!!(e&&e.getVelocity),Mne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Rne=bx.length;function Ine(e,t,n){let a="",u=!0;for(let f=0;f<Rne;f++){const y=bx[f],r=e[y];if(r===void 0)continue;let S=!0;if(typeof r=="number"?S=r===(y.startsWith("scale")?1:0):S=parseFloat(r)===0,!S||n){const A=aV(r,JD[y]);if(!S){u=!1;const R=Mne[y]||y;a+=`${R}(${A}) `}n&&(t[y]=A)}}return a=a.trim(),n?a=n(t,u?"":a):u&&(a="none"),a}function rO(e,t,n){const{style:a,vars:u,transformOrigin:f}=e;let y=!1,r=!1;for(const S in t){const A=t[S];if(wx.has(S)){y=!0;continue}else if(VD(S)){u[S]=A;continue}else{const R=aV(A,JD[S]);S.startsWith("origin")?(r=!0,f[S]=R):a[S]=R}}if(t.transform||(y||n?a.transform=Ine(t,e.transform,n):a.transform&&(a.transform="none")),r){const{originX:S="50%",originY:A="50%",originZ:R=0}=f;a.transformOrigin=`${S} ${A} ${R}`}}const oO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _V(e,t,n){for(const a in t)!Ol(t[a])&&!yV(a,n)&&(e[a]=t[a])}function Pne({transformTemplate:e},t){return ee.useMemo(()=>{const n=oO();return rO(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Dne(e,t){const n=e.style||{},a={};return _V(a,n,e),Object.assign(a,Pne(e,t)),a}function One(e,t){const n={},a=Dne(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const Lne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sO(e){return typeof e!="string"||e.includes("-")?!1:!!(Lne.indexOf(e)>-1||/[A-Z]/u.test(e))}const kne={offset:"stroke-dashoffset",array:"stroke-dasharray"},zne={offset:"strokeDashoffset",array:"strokeDasharray"};function Bne(e,t,n=1,a=0,u=!0){e.pathLength=1;const f=u?kne:zne;e[f.offset]=_r.transform(-a);const y=_r.transform(t),r=_r.transform(n);e[f.array]=`${y} ${r}`}function vV(e,{attrX:t,attrY:n,attrScale:a,pathLength:u,pathSpacing:f=1,pathOffset:y=0,...r},S,A,R){if(rO(e,r,A),S){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:O,style:z}=e;O.transform&&(z.transform=O.transform,delete O.transform),(z.transform||O.transformOrigin)&&(z.transformOrigin=O.transformOrigin??"50% 50%",delete O.transformOrigin),z.transform&&(z.transformBox=(R==null?void 0:R.transformBox)??"fill-box",delete O.transformBox),t!==void 0&&(O.x=t),n!==void 0&&(O.y=n),a!==void 0&&(O.scale=a),u!==void 0&&Bne(O,u,f,y,!1)}const xV=()=>({...oO(),attrs:{}}),bV=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Fne(e,t,n,a){const u=ee.useMemo(()=>{const f=xV();return vV(f,t,bV(a),e.transformTemplate,e.style),{...f.attrs,style:{...f.style}}},[t]);if(e.style){const f={};_V(f,e.style,e),u.style={...f,...u.style}}return u}function Nne(e=!1){return(n,a,u,{latestValues:f},y)=>{const S=(sO(n)?Fne:One)(a,f,y,n),A=pne(a,typeof n=="string",e),R=n!==ee.Fragment?{...A,...S,ref:u}:{},{children:O}=a,z=ee.useMemo(()=>Ol(O)?O.get():O,[O]);return ee.createElement(n,{...R,children:z})}}function zB(e){const t=[{},{}];return e==null||e.values.forEach((n,a)=>{t[0][a]=n.get(),t[1][a]=n.getVelocity()}),t}function aO(e,t,n,a){if(typeof t=="function"){const[u,f]=zB(a);t=t(n!==void 0?n:e.custom,u,f)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[u,f]=zB(a);t=t(n!==void 0?n:e.custom,u,f)}return t}function rE(e){return Ol(e)?e.get():e}function jne({scrapeMotionValuesFromProps:e,createRenderState:t},n,a,u){return{latestValues:Une(n,a,u,e),renderState:t()}}const wV=e=>(t,n)=>{const a=ee.useContext(NC),u=ee.useContext(LD),f=()=>jne(e,t,a,u);return n?f():dee(f)};function Une(e,t,n,a){const u={},f=a(e,{});for(const z in f)u[z]=rE(f[z]);let{initial:y,animate:r}=e;const S=UC(e),A=fV(e);t&&A&&!S&&e.inherit!==!1&&(y===void 0&&(y=t.initial),r===void 0&&(r=t.animate));let R=n?n.initial===!1:!1;R=R||y===!1;const O=R?r:y;if(O&&typeof O!="boolean"&&!jC(O)){const z=Array.isArray(O)?O:[O];for(let N=0;N<z.length;N++){const U=aO(e,z[N]);if(U){const{transitionEnd:H,transition:K,...W}=U;for(const re in W){let ne=W[re];if(Array.isArray(ne)){const se=R?ne.length-1:0;ne=ne[se]}ne!==null&&(u[re]=ne)}for(const re in H)u[re]=H[re]}}}return u}function lO(e,t,n){var f;const{style:a}=e,u={};for(const y in a)(Ol(a[y])||t.style&&Ol(t.style[y])||yV(y,e)||((f=n==null?void 0:n.getValue(y))==null?void 0:f.liveStyle)!==void 0)&&(u[y]=a[y]);return u}const Vne={useVisualState:wV({scrapeMotionValuesFromProps:lO,createRenderState:oO})};function SV(e,t,n){const a=lO(e,t,n);for(const u in e)if(Ol(e[u])||Ol(t[u])){const f=bx.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;a[f]=e[u]}return a}const $ne={useVisualState:wV({scrapeMotionValuesFromProps:SV,createRenderState:xV})};function Hne(e,t){return function(a,{forwardMotionProps:u}={forwardMotionProps:!1}){const y={...sO(a)?$ne:Vne,preloadedFeatures:e,useRender:Nne(u),createVisualElement:t,Component:a};return Sne(y)}}function Y1(e,t,n){const a=e.getProps();return aO(a,t,n!==void 0?n:a.custom,e)}const GI=e=>Array.isArray(e);function Gne(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,W1(n))}function qne(e){return GI(e)?e[e.length-1]||0:e}function Wne(e,t){const n=Y1(e,t);let{transitionEnd:a={},transition:u={},...f}=n||{};f={...f,...a};for(const y in f){const r=qne(f[y]);Gne(e,y,r)}}function Xne(e){return!!(Ol(e)&&e.add)}function qI(e,t){const n=e.getValue("willChange");if(Xne(n))return n.add(t);if(!n&&Cm.WillChange){const a=new Cm.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function TV(e){return e.props[pV]}const Zne=e=>e!==null;function Yne(e,{repeat:t,repeatType:n="loop"},a){const u=e.filter(Zne),f=t&&n!=="loop"&&t%2===1?0:u.length-1;return u[f]}const Kne={type:"spring",stiffness:500,damping:25,restSpeed:10},Jne=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Qne={type:"keyframes",duration:.8},eie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tie=(e,{keyframes:t})=>t.length>2?Qne:wx.has(e)?e.startsWith("scale")?Jne(t[1]):Kne:eie;function nie({when:e,delay:t,delayChildren:n,staggerChildren:a,staggerDirection:u,repeat:f,repeatType:y,repeatDelay:r,from:S,elapsed:A,...R}){return!!Object.keys(R).length}const cO=(e,t,n,a={},u,f)=>y=>{const r=KD(a,e)||{},S=r.delay||a.delay||0;let{elapsed:A=0}=a;A=A-Vf(S);const R={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...r,delay:-A,onUpdate:z=>{t.set(z),r.onUpdate&&r.onUpdate(z)},onComplete:()=>{y(),r.onComplete&&r.onComplete()},name:e,motionValue:t,element:f?void 0:u};nie(r)||Object.assign(R,tie(e,R)),R.duration&&(R.duration=Vf(R.duration)),R.repeatDelay&&(R.repeatDelay=Vf(R.repeatDelay)),R.from!==void 0&&(R.keyframes[0]=R.from);let O=!1;if((R.type===!1||R.duration===0&&!R.repeatDelay)&&(R.duration=0,R.delay===0&&(O=!0)),(Cm.instantAnimations||Cm.skipAnimations)&&(O=!0,R.duration=0,R.delay=0),R.allowFlatten=!r.type&&!r.ease,O&&!f&&t.get()!==void 0){const z=Yne(R.keyframes,r);if(z!==void 0){vs.update(()=>{R.onUpdate(z),R.onComplete()});return}}return new Ute(R)};function iie({protectedKeys:e,needsAnimating:t},n){const a=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,a}function EV(e,t,{delay:n=0,transitionOverride:a,type:u}={}){let{transition:f=e.getDefaultTransition(),transitionEnd:y,...r}=t;a&&(f=a);const S=[],A=u&&e.animationState&&e.animationState.getState()[u];for(const R in r){const O=e.getValue(R,e.latestValues[R]??null),z=r[R];if(z===void 0||A&&iie(A,R))continue;const N={delay:n,...KD(f||{},R)},U=O.get();if(U!==void 0&&!O.isAnimating&&!Array.isArray(z)&&z===U&&!N.velocity)continue;let H=!1;if(window.MotionHandoffAnimation){const W=TV(e);if(W){const re=window.MotionHandoffAnimation(W,R,vs);re!==null&&(N.startTime=re,H=!0)}}qI(e,R),O.start(cO(R,O,z,e.shouldReduceMotion&&nV.has(R)?{type:!1}:N,e,H));const K=O.animation;K&&S.push(K)}return y&&Promise.all(S).then(()=>{vs.update(()=>{y&&Wne(e,y)})}),S}function WI(e,t,n={}){var S;const a=Y1(e,t,n.type==="exit"?(S=e.presenceContext)==null?void 0:S.custom:void 0);let{transition:u=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(u=n.transitionOverride);const f=a?()=>Promise.all(EV(e,a,n)):()=>Promise.resolve(),y=e.variantChildren&&e.variantChildren.size?(A=0)=>{const{delayChildren:R=0,staggerChildren:O,staggerDirection:z}=u;return rie(e,t,R+A,O,z,n)}:()=>Promise.resolve(),{when:r}=u;if(r){const[A,R]=r==="beforeChildren"?[f,y]:[y,f];return A().then(()=>R())}else return Promise.all([f(),y(n.delay)])}function rie(e,t,n=0,a=0,u=1,f){const y=[],r=(e.variantChildren.size-1)*a,S=u===1?(A=0)=>A*a:(A=0)=>r-A*a;return Array.from(e.variantChildren).sort(oie).forEach((A,R)=>{A.notify("AnimationStart",t),y.push(WI(A,t,{...f,delay:n+S(R)}).then(()=>A.notify("AnimationComplete",t)))}),Promise.all(y)}function oie(e,t){return e.sortNodePosition(t)}function sie(e,t,n={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const u=t.map(f=>WI(e,f,n));a=Promise.all(u)}else if(typeof t=="string")a=WI(e,t,n);else{const u=typeof t=="function"?Y1(e,t,n.custom):t;a=Promise.all(EV(e,u,n))}return a.then(()=>{e.notify("AnimationComplete",t)})}function CV(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let a=0;a<n;a++)if(t[a]!==e[a])return!1;return!0}const aie=nO.length;function AV(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?AV(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<aie;n++){const a=nO[n],u=e.props[a];(X1(u)||u===!1)&&(t[a]=u)}return t}const lie=[...tO].reverse(),cie=tO.length;function uie(e){return t=>Promise.all(t.map(({animation:n,options:a})=>sie(e,n,a)))}function hie(e){let t=uie(e),n=BB(),a=!0;const u=S=>(A,R)=>{var z;const O=Y1(e,R,S==="exit"?(z=e.presenceContext)==null?void 0:z.custom:void 0);if(O){const{transition:N,transitionEnd:U,...H}=O;A={...A,...H,...U}}return A};function f(S){t=S(e)}function y(S){const{props:A}=e,R=AV(e.parent)||{},O=[],z=new Set;let N={},U=1/0;for(let K=0;K<cie;K++){const W=lie[K],re=n[W],ne=A[W]!==void 0?A[W]:R[W],se=X1(ne),ue=W===S?re.isActive:null;ue===!1&&(U=K);let pe=ne===R[W]&&ne!==A[W]&&se;if(pe&&a&&e.manuallyAnimateOnMount&&(pe=!1),re.protectedKeys={...N},!re.isActive&&ue===null||!ne&&!re.prevProp||jC(ne)||typeof ne=="boolean")continue;const Ce=die(re.prevProp,ne);let Le=Ce||W===S&&re.isActive&&!pe&&se||K>U&&se,qe=!1;const ye=Array.isArray(ne)?ne:[ne];let Xe=ye.reduce(u(W),{});ue===!1&&(Xe={});const{prevResolvedValues:ut={}}=re,et={...ut,...Xe},ot=it=>{Le=!0,z.has(it)&&(qe=!0,z.delete(it)),re.needsAnimating[it]=!0;const Tt=e.getValue(it);Tt&&(Tt.liveStyle=!1)};for(const it in et){const Tt=Xe[it],xt=ut[it];if(N.hasOwnProperty(it))continue;let je=!1;GI(Tt)&&GI(xt)?je=!CV(Tt,xt):je=Tt!==xt,je?Tt!=null?ot(it):z.add(it):Tt!==void 0&&z.has(it)?ot(it):re.protectedKeys[it]=!0}re.prevProp=ne,re.prevResolvedValues=Xe,re.isActive&&(N={...N,...Xe}),a&&e.blockInitialAnimation&&(Le=!1),Le&&(!(pe&&Ce)||qe)&&O.push(...ye.map(it=>({animation:it,options:{type:W}})))}if(z.size){const K={};if(typeof A.initial!="boolean"){const W=Y1(e,Array.isArray(A.initial)?A.initial[0]:A.initial);W&&W.transition&&(K.transition=W.transition)}z.forEach(W=>{const re=e.getBaseTarget(W),ne=e.getValue(W);ne&&(ne.liveStyle=!0),K[W]=re??null}),O.push({animation:K})}let H=!!O.length;return a&&(A.initial===!1||A.initial===A.animate)&&!e.manuallyAnimateOnMount&&(H=!1),a=!1,H?t(O):Promise.resolve()}function r(S,A){var O;if(n[S].isActive===A)return Promise.resolve();(O=e.variantChildren)==null||O.forEach(z=>{var N;return(N=z.animationState)==null?void 0:N.setActive(S,A)}),n[S].isActive=A;const R=y(S);for(const z in n)n[z].protectedKeys={};return R}return{animateChanges:y,setActive:r,setAnimateFunction:f,getState:()=>n,reset:()=>{n=BB(),a=!0}}}function die(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!CV(t,e):!1}function b_(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function BB(){return{animate:b_(!0),whileInView:b_(),whileHover:b_(),whileTap:b_(),whileDrag:b_(),whileFocus:b_(),exit:b_()}}let Qg=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};class fie extends Qg{constructor(t){super(t),t.animationState||(t.animationState=hie(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();jC(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let pie=0;class mie extends Qg{constructor(){super(...arguments),this.id=pie++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const u=this.node.animationState.setActive("exit",!t);n&&!t&&u.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const gie={animation:{Feature:fie},exit:{Feature:mie}};function K1(e,t,n,a={passive:!0}){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n)}function Aw(e){return{point:{x:e.pageX,y:e.pageY}}}const yie=e=>t=>eO(t)&&e(t,Aw(t));function x1(e,t,n,a){return K1(e,t,yie(n),a)}function MV({top:e,left:t,right:n,bottom:a}){return{x:{min:t,max:n},y:{min:e,max:a}}}function _ie({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function vie(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}const RV=1e-4,xie=1-RV,bie=1+RV,IV=.01,wie=0-IV,Sie=0+IV;function ac(e){return e.max-e.min}function Tie(e,t,n){return Math.abs(e-t)<=n}function FB(e,t,n,a=.5){e.origin=a,e.originPoint=_s(t.min,t.max,e.origin),e.scale=ac(n)/ac(t),e.translate=_s(n.min,n.max,e.origin)-e.originPoint,(e.scale>=xie&&e.scale<=bie||isNaN(e.scale))&&(e.scale=1),(e.translate>=wie&&e.translate<=Sie||isNaN(e.translate))&&(e.translate=0)}function b1(e,t,n,a){FB(e.x,t.x,n.x,a?a.originX:void 0),FB(e.y,t.y,n.y,a?a.originY:void 0)}function NB(e,t,n){e.min=n.min+t.min,e.max=e.min+ac(t)}function Eie(e,t,n){NB(e.x,t.x,n.x),NB(e.y,t.y,n.y)}function jB(e,t,n){e.min=t.min-n.min,e.max=e.min+ac(t)}function w1(e,t,n){jB(e.x,t.x,n.x),jB(e.y,t.y,n.y)}const UB=()=>({translate:0,scale:1,origin:0,originPoint:0}),U0=()=>({x:UB(),y:UB()}),VB=()=>({min:0,max:0}),js=()=>({x:VB(),y:VB()});function fh(e){return[e("x"),e("y")]}function qM(e){return e===void 0||e===1}function XI({scale:e,scaleX:t,scaleY:n}){return!qM(e)||!qM(t)||!qM(n)}function A_(e){return XI(e)||PV(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function PV(e){return $B(e.x)||$B(e.y)}function $B(e){return e&&e!=="0%"}function jE(e,t,n){const a=e-n,u=t*a;return n+u}function HB(e,t,n,a,u){return u!==void 0&&(e=jE(e,u,a)),jE(e,n,a)+t}function ZI(e,t=0,n=1,a,u){e.min=HB(e.min,t,n,a,u),e.max=HB(e.max,t,n,a,u)}function DV(e,{x:t,y:n}){ZI(e.x,t.translate,t.scale,t.originPoint),ZI(e.y,n.translate,n.scale,n.originPoint)}const GB=.999999999999,qB=1.0000000000001;function Cie(e,t,n,a=!1){const u=n.length;if(!u)return;t.x=t.y=1;let f,y;for(let r=0;r<u;r++){f=n[r],y=f.projectionDelta;const{visualElement:S}=f.options;S&&S.props.style&&S.props.style.display==="contents"||(a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&$0(e,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),y&&(t.x*=y.x.scale,t.y*=y.y.scale,DV(e,y)),a&&A_(f.latestValues)&&$0(e,f.latestValues))}t.x<qB&&t.x>GB&&(t.x=1),t.y<qB&&t.y>GB&&(t.y=1)}function V0(e,t){e.min=e.min+t,e.max=e.max+t}function WB(e,t,n,a,u=.5){const f=_s(e.min,e.max,u);ZI(e,t,n,f,a)}function $0(e,t){WB(e.x,t.x,t.scaleX,t.scale,t.originX),WB(e.y,t.y,t.scaleY,t.scale,t.originY)}function OV(e,t){return MV(vie(e.getBoundingClientRect(),t))}function Aie(e,t,n){const a=OV(e,n),{scroll:u}=t;return u&&(V0(a.x,u.offset.x),V0(a.y,u.offset.y)),a}const LV=({current:e})=>e?e.ownerDocument.defaultView:null,XB=(e,t)=>Math.abs(e-t);function Mie(e,t){const n=XB(e.x,t.x),a=XB(e.y,t.y);return Math.sqrt(n**2+a**2)}class kV{constructor(t,n,{transformPagePoint:a,contextWindow:u,dragSnapToOrigin:f=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=XM(this.lastMoveEventInfo,this.history),z=this.startEvent!==null,N=Mie(O.offset,{x:0,y:0})>=3;if(!z&&!N)return;const{point:U}=O,{timestamp:H}=rl;this.history.push({...U,timestamp:H});const{onStart:K,onMove:W}=this.handlers;z||(K&&K(this.lastMoveEvent,O),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,O)},this.handlePointerMove=(O,z)=>{this.lastMoveEvent=O,this.lastMoveEventInfo=WM(z,this.transformPagePoint),vs.update(this.updatePoint,!0)},this.handlePointerUp=(O,z)=>{this.end();const{onEnd:N,onSessionEnd:U,resumeAnimation:H}=this.handlers;if(this.dragSnapToOrigin&&H&&H(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=XM(O.type==="pointercancel"?this.lastMoveEventInfo:WM(z,this.transformPagePoint),this.history);this.startEvent&&N&&N(O,K),U&&U(O,K)},!eO(t))return;this.dragSnapToOrigin=f,this.handlers=n,this.transformPagePoint=a,this.contextWindow=u||window;const y=Aw(t),r=WM(y,this.transformPagePoint),{point:S}=r,{timestamp:A}=rl;this.history=[{...S,timestamp:A}];const{onSessionStart:R}=n;R&&R(t,XM(r,this.history)),this.removeListeners=Tw(x1(this.contextWindow,"pointermove",this.handlePointerMove),x1(this.contextWindow,"pointerup",this.handlePointerUp),x1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),$g(this.updatePoint)}}function WM(e,t){return t?{point:t(e.point)}:e}function ZB(e,t){return{x:e.x-t.x,y:e.y-t.y}}function XM({point:e},t){return{point:e,delta:ZB(e,zV(t)),offset:ZB(e,Rie(t)),velocity:Iie(t,.1)}}function Rie(e){return e[0]}function zV(e){return e[e.length-1]}function Iie(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,a=null;const u=zV(e);for(;n>=0&&(a=e[n],!(u.timestamp-a.timestamp>Vf(t)));)n--;if(!a)return{x:0,y:0};const f=$f(u.timestamp-a.timestamp);if(f===0)return{x:0,y:0};const y={x:(u.x-a.x)/f,y:(u.y-a.y)/f};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function Pie(e,{min:t,max:n},a){return t!==void 0&&e<t?e=a?_s(t,e,a.min):Math.max(e,t):n!==void 0&&e>n&&(e=a?_s(n,e,a.max):Math.min(e,n)),e}function YB(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Die(e,{top:t,left:n,bottom:a,right:u}){return{x:YB(e.x,n,u),y:YB(e.y,t,a)}}function KB(e,t){let n=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,a]=[a,n]),{min:n,max:a}}function Oie(e,t){return{x:KB(e.x,t.x),y:KB(e.y,t.y)}}function Lie(e,t){let n=.5;const a=ac(e),u=ac(t);return u>a?n=H1(t.min,t.max-a,e.min):a>u&&(n=H1(e.min,e.max-u,t.min)),Em(0,1,n)}function kie(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const YI=.35;function zie(e=YI){return e===!1?e=0:e===!0&&(e=YI),{x:JB(e,"left","right"),y:JB(e,"top","bottom")}}function JB(e,t,n){return{min:QB(e,t),max:QB(e,n)}}function QB(e,t){return typeof e=="number"?e:e[t]||0}const Bie=new WeakMap;class Fie{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=js(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const u=R=>{const{dragSnapToOrigin:O}=this.getProps();O?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Aw(R).point)},f=(R,O)=>{const{drag:z,dragPropagation:N,onDragStart:U}=this.getProps();if(z&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ine(z),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fh(K=>{let W=this.getAxisMotionValue(K).get()||0;if(Hf.test(W)){const{projection:re}=this.visualElement;if(re&&re.layout){const ne=re.layout.layoutBox[K];ne&&(W=ac(ne)*(parseFloat(W)/100))}}this.originPoint[K]=W}),U&&vs.postRender(()=>U(R,O)),qI(this.visualElement,"transform");const{animationState:H}=this.visualElement;H&&H.setActive("whileDrag",!0)},y=(R,O)=>{const{dragPropagation:z,dragDirectionLock:N,onDirectionLock:U,onDrag:H}=this.getProps();if(!z&&!this.openDragLock)return;const{offset:K}=O;if(N&&this.currentDirection===null){this.currentDirection=Nie(K),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",O.point,K),this.updateAxis("y",O.point,K),this.visualElement.render(),H&&H(R,O)},r=(R,O)=>this.stop(R,O),S=()=>fh(R=>{var O;return this.getAnimationState(R)==="paused"&&((O=this.getAxisMotionValue(R).animation)==null?void 0:O.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new kV(t,{onSessionStart:u,onStart:f,onMove:y,onSessionEnd:r,resumeAnimation:S},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,contextWindow:LV(this.visualElement)})}stop(t,n){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:u}=n;this.startAnimation(u);const{onDragEnd:f}=this.getProps();f&&vs.postRender(()=>f(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,a){const{drag:u}=this.getProps();if(!a||!lT(t,u,this.currentDirection))return;const f=this.getAxisMotionValue(t);let y=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(y=Pie(y,this.constraints[t],this.elastic[t])),f.set(y)}resolveConstraints(){var f;const{dragConstraints:t,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(f=this.visualElement.projection)==null?void 0:f.layout,u=this.constraints;t&&j0(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=Die(a.layoutBox,t):this.constraints=!1,this.elastic=zie(n),u!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&fh(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=kie(a.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!j0(t))return!1;const a=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const f=Aie(a,u.root,this.visualElement.getTransformPagePoint());let y=Oie(u.layout.layoutBox,f);if(n){const r=n(_ie(y));this.hasMutatedConstraints=!!r,r&&(y=MV(r))}return y}startAnimation(t){const{drag:n,dragMomentum:a,dragElastic:u,dragTransition:f,dragSnapToOrigin:y,onDragTransitionEnd:r}=this.getProps(),S=this.constraints||{},A=fh(R=>{if(!lT(R,n,this.currentDirection))return;let O=S&&S[R]||{};y&&(O={min:0,max:0});const z=u?200:1e6,N=u?40:1e7,U={type:"inertia",velocity:a?t[R]:0,bounceStiffness:z,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...f,...O};return this.startAxisValueAnimation(R,U)});return Promise.all(A).then(r)}startAxisValueAnimation(t,n){const a=this.getAxisMotionValue(t);return qI(this.visualElement,t),a.start(cO(t,a,0,n,this.visualElement,!1))}stopAnimation(){fh(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fh(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),u=a[n];return u||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){fh(n=>{const{drag:a}=this.getProps();if(!lT(n,a,this.currentDirection))return;const{projection:u}=this.visualElement,f=this.getAxisMotionValue(n);if(u&&u.layout){const{min:y,max:r}=u.layout.layoutBox[n];f.set(t[n]-_s(y,r,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:a}=this.visualElement;if(!j0(n)||!a||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};fh(y=>{const r=this.getAxisMotionValue(y);if(r&&this.constraints!==!1){const S=r.get();u[y]=Lie({min:S,max:S},this.constraints[y])}});const{transformTemplate:f}=this.visualElement.getProps();this.visualElement.current.style.transform=f?f({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),fh(y=>{if(!lT(y,t,null))return;const r=this.getAxisMotionValue(y),{min:S,max:A}=this.constraints[y];r.set(_s(S,A,u[y]))})}addListeners(){if(!this.visualElement.current)return;Bie.set(this.visualElement,this);const t=this.visualElement.current,n=x1(t,"pointerdown",S=>{const{drag:A,dragListener:R=!0}=this.getProps();A&&R&&this.start(S)}),a=()=>{const{dragConstraints:S}=this.getProps();j0(S)&&S.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,f=u.addEventListener("measure",a);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),vs.read(a);const y=K1(window,"resize",()=>this.scalePositionWithinConstraints()),r=u.addEventListener("didUpdate",({delta:S,hasLayoutChanged:A})=>{this.isDragging&&A&&(fh(R=>{const O=this.getAxisMotionValue(R);O&&(this.originPoint[R]+=S[R].translate,O.set(O.get()+S[R].translate))}),this.visualElement.render())});return()=>{y(),n(),f(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:a=!1,dragPropagation:u=!1,dragConstraints:f=!1,dragElastic:y=YI,dragMomentum:r=!0}=t;return{...t,drag:n,dragDirectionLock:a,dragPropagation:u,dragConstraints:f,dragElastic:y,dragMomentum:r}}}function lT(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Nie(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jie extends Qg{constructor(t){super(t),this.removeGroupControls=xh,this.removeListeners=xh,this.controls=new Fie(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xh}unmount(){this.removeGroupControls(),this.removeListeners()}}const eF=e=>(t,n)=>{e&&vs.postRender(()=>e(t,n))};class Uie extends Qg{constructor(){super(...arguments),this.removePointerDownListener=xh}onPointerDown(t){this.session=new kV(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LV(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:a,onPanEnd:u}=this.node.getProps();return{onSessionStart:eF(t),onStart:eF(n),onMove:a,onEnd:(f,y)=>{delete this.session,u&&vs.postRender(()=>u(f,y))}}}mount(){this.removePointerDownListener=x1(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const oE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tF(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const qb={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(_r.test(e))e=parseFloat(e);else return e;const n=tF(e,t.target.x),a=tF(e,t.target.y);return`${n}% ${a}%`}},Vie={correct:(e,{treeScale:t,projectionDelta:n})=>{const a=e,u=Hg.parse(e);if(u.length>5)return a;const f=Hg.createTransformer(e),y=typeof u[0]!="number"?1:0,r=n.x.scale*t.x,S=n.y.scale*t.y;u[0+y]/=r,u[1+y]/=S;const A=_s(r,S,.5);return typeof u[2+y]=="number"&&(u[2+y]/=A),typeof u[3+y]=="number"&&(u[3+y]/=A),f(u)}};class $ie extends ee.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:a,layoutId:u}=this.props,{projection:f}=t;Ane(Hie),f&&(n.group&&n.group.add(f),a&&a.register&&u&&a.register(f),f.root.didUpdate(),f.addEventListener("animationComplete",()=>{this.safeToRemove()}),f.setOptions({...f.options,onExitComplete:()=>this.safeToRemove()})),oE.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:a,drag:u,isPresent:f}=this.props,{projection:y}=a;return y&&(y.isPresent=f,u||t.layoutDependency!==n||n===void 0||t.isPresent!==f?y.willUpdate():this.safeToRemove(),t.isPresent!==f&&(f?y.promote():y.relegate()||vs.postRender(()=>{const r=y.getStack();(!r||!r.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),QD.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:a}=this.props,{projection:u}=t;u&&(u.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(u),a&&a.deregister&&a.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function BV(e){const[t,n]=pee(),a=ee.useContext(bU);return te.jsx($ie,{...e,layoutGroup:a,switchLayoutGroup:ee.useContext(mV),isPresent:t,safeToRemove:n})}const Hie={borderRadius:{...qb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qb,borderTopRightRadius:qb,borderBottomLeftRadius:qb,borderBottomRightRadius:qb,boxShadow:Vie};function Gie(e,t,n){const a=Ol(e)?e:W1(e);return a.start(cO("",a,t,n)),a.animation}function qie(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Wie=(e,t)=>e.depth-t.depth;class Xie{constructor(){this.children=[],this.isDirty=!1}add(t){kD(this.children,t),this.isDirty=!0}remove(t){zD(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Wie),this.isDirty=!1,this.children.forEach(t)}}function Zie(e,t){const n=Ac.now(),a=({timestamp:u})=>{const f=u-n;f>=t&&($g(a),e(f-t))};return vs.setup(a,!0),()=>$g(a)}const FV=["TopLeft","TopRight","BottomLeft","BottomRight"],Yie=FV.length,nF=e=>typeof e=="string"?parseFloat(e):e,iF=e=>typeof e=="number"||_r.test(e);function Kie(e,t,n,a,u,f){u?(e.opacity=_s(0,n.opacity??1,Jie(a)),e.opacityExit=_s(t.opacity??1,0,Qie(a))):f&&(e.opacity=_s(t.opacity??1,n.opacity??1,a));for(let y=0;y<Yie;y++){const r=`border${FV[y]}Radius`;let S=rF(t,r),A=rF(n,r);if(S===void 0&&A===void 0)continue;S||(S=0),A||(A=0),S===0||A===0||iF(S)===iF(A)?(e[r]=Math.max(_s(nF(S),nF(A),a),0),(Hf.test(A)||Hf.test(S))&&(e[r]+="%")):e[r]=A}(t.rotate||n.rotate)&&(e.rotate=_s(t.rotate||0,n.rotate||0,a))}function rF(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Jie=NV(0,.5,DU),Qie=NV(.5,.95,xh);function NV(e,t,n){return a=>a<e?0:a>t?1:n(H1(e,t,a))}function oF(e,t){e.min=t.min,e.max=t.max}function ch(e,t){oF(e.x,t.x),oF(e.y,t.y)}function sF(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function aF(e,t,n,a,u){return e-=t,e=jE(e,1/n,a),u!==void 0&&(e=jE(e,1/u,a)),e}function ere(e,t=0,n=1,a=.5,u,f=e,y=e){if(Hf.test(t)&&(t=parseFloat(t),t=_s(y.min,y.max,t/100)-y.min),typeof t!="number")return;let r=_s(f.min,f.max,a);e===f&&(r-=t),e.min=aF(e.min,t,n,r,u),e.max=aF(e.max,t,n,r,u)}function lF(e,t,[n,a,u],f,y){ere(e,t[n],t[a],t[u],t.scale,f,y)}const tre=["x","scaleX","originX"],nre=["y","scaleY","originY"];function cF(e,t,n,a){lF(e.x,t,tre,n?n.x:void 0,a?a.x:void 0),lF(e.y,t,nre,n?n.y:void 0,a?a.y:void 0)}function uF(e){return e.translate===0&&e.scale===1}function jV(e){return uF(e.x)&&uF(e.y)}function hF(e,t){return e.min===t.min&&e.max===t.max}function ire(e,t){return hF(e.x,t.x)&&hF(e.y,t.y)}function dF(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function UV(e,t){return dF(e.x,t.x)&&dF(e.y,t.y)}function fF(e){return ac(e.x)/ac(e.y)}function pF(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class rre{constructor(){this.members=[]}add(t){kD(this.members,t),t.scheduleRender()}remove(t){if(zD(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(u=>t===u);if(n===0)return!1;let a;for(let u=n;u>=0;u--){const f=this.members[u];if(f.isPresent!==!1){a=f;break}}return a?(this.promote(a),!0):!1}promote(t,n){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,n&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:a}=t;n.onExitComplete&&n.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ore(e,t,n){let a="";const u=e.x.translate/t.x,f=e.y.translate/t.y,y=(n==null?void 0:n.z)||0;if((u||f||y)&&(a=`translate3d(${u}px, ${f}px, ${y}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:A,rotate:R,rotateX:O,rotateY:z,skewX:N,skewY:U}=n;A&&(a=`perspective(${A}px) ${a}`),R&&(a+=`rotate(${R}deg) `),O&&(a+=`rotateX(${O}deg) `),z&&(a+=`rotateY(${z}deg) `),N&&(a+=`skewX(${N}deg) `),U&&(a+=`skewY(${U}deg) `)}const r=e.x.scale*t.x,S=e.y.scale*t.y;return(r!==1||S!==1)&&(a+=`scale(${r}, ${S})`),a||"none"}const ZM=["","X","Y","Z"],sre={visibility:"hidden"},mF=1e3;let are=0;function YM(e,t,n,a){const{latestValues:u}=t;u[e]&&(n[e]=u[e],t.setStaticValue(e,0),a&&(a[e]=0))}function VV(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=TV(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:u,layoutId:f}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",vs,!(u||f))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&VV(a)}function $V({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:a,resetTransform:u}){return class{constructor(y={},r=t==null?void 0:t()){this.id=are++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ure),this.nodes.forEach(mre),this.nodes.forEach(gre),this.nodes.forEach(hre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let S=0;S<this.path.length;S++)this.path[S].shouldResetTransform=!0;this.root===this&&(this.nodes=new Xie)}addEventListener(y,r){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new ND),this.eventHandlers.get(y).add(r)}notifyListeners(y,...r){const S=this.eventHandlers.get(y);S&&S.notify(...r)}hasListeners(y){return this.eventHandlers.has(y)}mount(y){if(this.instance)return;this.isSVG=qie(y),this.instance=y;const{layoutId:r,layout:S,visualElement:A}=this.options;if(A&&!A.current&&A.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(S||r)&&(this.isLayoutDirty=!0),e){let R;const O=()=>this.root.updateBlockedByResize=!1;e(y,()=>{this.root.updateBlockedByResize=!0,R&&R(),R=Zie(O,250),oE.hasAnimatedSinceResize&&(oE.hasAnimatedSinceResize=!1,this.nodes.forEach(yF))})}r&&this.root.registerSharedNode(r,this),this.options.animate!==!1&&A&&(r||S)&&this.addEventListener("didUpdate",({delta:R,hasLayoutChanged:O,hasRelativeLayoutChanged:z,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const U=this.options.transition||A.getDefaultTransition()||bre,{onLayoutAnimationStart:H,onLayoutAnimationComplete:K}=A.getProps(),W=!this.targetLayout||!UV(this.targetLayout,N),re=!O&&z;if(this.options.layoutRoot||this.resumeFrom||re||O&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(R,re);const ne={...KD(U,"layout"),onPlay:H,onComplete:K};(A.shouldReduceMotion||this.options.layoutRoot)&&(ne.delay=0,ne.type=!1),this.startAnimation(ne)}else O||yF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$g(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yre),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let R=0;R<this.path.length;R++){const O=this.path[R];O.shouldResetTransform=!0,O.updateScroll("snapshot"),O.options.layoutRoot&&O.willUpdate(!1)}const{layoutId:r,layout:S}=this.options;if(r===void 0&&!S)return;const A=this.getTransformTemplate();this.prevTransformTemplateValue=A?A(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gF);return}this.isUpdating||this.nodes.forEach(fre),this.isUpdating=!1,this.nodes.forEach(pre),this.nodes.forEach(lre),this.nodes.forEach(cre),this.clearAllSnapshots();const r=Ac.now();rl.delta=Em(0,1e3/60,r-rl.timestamp),rl.timestamp=r,rl.isProcessing=!0,UM.update.process(rl),UM.preRender.process(rl),UM.render.process(rl),rl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,QD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dre),this.sharedNodes.forEach(_re)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ac(this.snapshot.measuredBox.x)&&!ac(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let S=0;S<this.path.length;S++)this.path[S].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=js(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:r}=this.options;r&&r.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let r=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(r=!1),r&&this.instance){const S=a(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:S,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:S}}}resetTransform(){if(!u)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,r=this.projectionDelta&&!jV(this.projectionDelta),S=this.getTransformTemplate(),A=S?S(this.latestValues,""):void 0,R=A!==this.prevTransformTemplateValue;y&&this.instance&&(r||A_(this.latestValues)||R)&&(u(this.instance,A),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const r=this.measurePageBox();let S=this.removeElementScroll(r);return y&&(S=this.removeTransform(S)),wre(S),{animationId:this.root.animationId,measuredBox:r,layoutBox:S,latestValues:{},source:this.id}}measurePageBox(){var A;const{visualElement:y}=this.options;if(!y)return js();const r=y.measureViewportBox();if(!(((A=this.scroll)==null?void 0:A.wasRoot)||this.path.some(Sre))){const{scroll:R}=this.root;R&&(V0(r.x,R.offset.x),V0(r.y,R.offset.y))}return r}removeElementScroll(y){var S;const r=js();if(ch(r,y),(S=this.scroll)!=null&&S.wasRoot)return r;for(let A=0;A<this.path.length;A++){const R=this.path[A],{scroll:O,options:z}=R;R!==this.root&&O&&z.layoutScroll&&(O.wasRoot&&ch(r,y),V0(r.x,O.offset.x),V0(r.y,O.offset.y))}return r}applyTransform(y,r=!1){const S=js();ch(S,y);for(let A=0;A<this.path.length;A++){const R=this.path[A];!r&&R.options.layoutScroll&&R.scroll&&R!==R.root&&$0(S,{x:-R.scroll.offset.x,y:-R.scroll.offset.y}),A_(R.latestValues)&&$0(S,R.latestValues)}return A_(this.latestValues)&&$0(S,this.latestValues),S}removeTransform(y){const r=js();ch(r,y);for(let S=0;S<this.path.length;S++){const A=this.path[S];if(!A.instance||!A_(A.latestValues))continue;XI(A.latestValues)&&A.updateSnapshot();const R=js(),O=A.measurePageBox();ch(R,O),cF(r,A.latestValues,A.snapshot?A.snapshot.layoutBox:void 0,R)}return A_(this.latestValues)&&cF(r,this.latestValues),r}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var z;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const S=!!this.resumingFrom||this!==r;if(!(y||S&&this.isSharedProjectionDirty||this.isProjectionDirty||(z=this.parent)!=null&&z.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:R,layoutId:O}=this.options;if(!(!this.layout||!(R||O))){if(this.resolvedRelativeTargetAt=rl.timestamp,!this.targetDelta&&!this.relativeTarget){const N=this.getClosestProjectingParent();N&&N.layout&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=js(),this.relativeTargetOrigin=js(),w1(this.relativeTargetOrigin,this.layout.layoutBox,N.layout.layoutBox),ch(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=js(),this.targetWithTransforms=js()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Eie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ch(this.target,this.layout.layoutBox),DV(this.target,this.targetDelta)):ch(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const N=this.getClosestProjectingParent();N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=js(),this.relativeTargetOrigin=js(),w1(this.relativeTargetOrigin,this.target,N.target),ch(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||XI(this.parent.latestValues)||PV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var U;const y=this.getLead(),r=!!this.resumingFrom||this!==y;let S=!0;if((this.isProjectionDirty||(U=this.parent)!=null&&U.isProjectionDirty)&&(S=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(S=!1),this.resolvedRelativeTargetAt===rl.timestamp&&(S=!1),S)return;const{layout:A,layoutId:R}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(A||R))return;ch(this.layoutCorrected,this.layout.layoutBox);const O=this.treeScale.x,z=this.treeScale.y;Cie(this.layoutCorrected,this.treeScale,this.path,r),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=js());const{target:N}=y;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sF(this.prevProjectionDelta.x,this.projectionDelta.x),sF(this.prevProjectionDelta.y,this.projectionDelta.y)),b1(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==O||this.treeScale.y!==z||!pF(this.projectionDelta.x,this.prevProjectionDelta.x)||!pF(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var r;if((r=this.options.visualElement)==null||r.scheduleRender(),y){const S=this.getStack();S&&S.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=U0(),this.projectionDelta=U0(),this.projectionDeltaWithTransform=U0()}setAnimationOrigin(y,r=!1){const S=this.snapshot,A=S?S.latestValues:{},R={...this.latestValues},O=U0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!r;const z=js(),N=S?S.source:void 0,U=this.layout?this.layout.source:void 0,H=N!==U,K=this.getStack(),W=!K||K.members.length<=1,re=!!(H&&!W&&this.options.crossfade===!0&&!this.path.some(xre));this.animationProgress=0;let ne;this.mixTargetDelta=se=>{const ue=se/1e3;_F(O.x,y.x,ue),_F(O.y,y.y,ue),this.setTargetDelta(O),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(w1(z,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vre(this.relativeTarget,this.relativeTargetOrigin,z,ue),ne&&ire(this.relativeTarget,ne)&&(this.isProjectionDirty=!1),ne||(ne=js()),ch(ne,this.relativeTarget)),H&&(this.animationValues=R,Kie(R,A,this.latestValues,ue,re,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ue},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&($g(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vs.update(()=>{oE.hasAnimatedSinceResize=!0,this.currentAnimation=Gie(0,mF,{...y,onUpdate:r=>{this.mixTargetDelta(r),y.onUpdate&&y.onUpdate(r)},onStop:()=>{},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:r,target:S,layout:A,latestValues:R}=y;if(!(!r||!S||!A)){if(this!==y&&this.layout&&A&&HV(this.options.animationType,this.layout.layoutBox,A.layoutBox)){S=this.target||js();const O=ac(this.layout.layoutBox.x);S.x.min=y.target.x.min,S.x.max=S.x.min+O;const z=ac(this.layout.layoutBox.y);S.y.min=y.target.y.min,S.y.max=S.y.min+z}ch(r,S),$0(r,R),b1(this.projectionDeltaWithTransform,this.layoutCorrected,r,R)}}registerSharedNode(y,r){this.sharedNodes.has(y)||this.sharedNodes.set(y,new rre),this.sharedNodes.get(y).add(r);const A=r.options.initialPromotionConfig;r.promote({transition:A?A.transition:void 0,preserveFollowOpacity:A&&A.shouldPreserveFollowOpacity?A.shouldPreserveFollowOpacity(r):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var r;const{layoutId:y}=this.options;return y?((r=this.getStack())==null?void 0:r.lead)||this:this}getPrevLead(){var r;const{layoutId:y}=this.options;return y?(r=this.getStack())==null?void 0:r.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:r,preserveFollowOpacity:S}={}){const A=this.getStack();A&&A.promote(this,S),y&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let r=!1;const{latestValues:S}=y;if((S.z||S.rotate||S.rotateX||S.rotateY||S.rotateZ||S.skewX||S.skewY)&&(r=!0),!r)return;const A={};S.z&&YM("z",y,A,this.animationValues);for(let R=0;R<ZM.length;R++)YM(`rotate${ZM[R]}`,y,A,this.animationValues),YM(`skew${ZM[R]}`,y,A,this.animationValues);y.render();for(const R in A)y.setStaticValue(R,A[R]),this.animationValues&&(this.animationValues[R]=A[R]);y.scheduleRender()}getProjectionStyles(y){if(!this.instance||this.isSVG)return;if(!this.isVisible)return sre;const r={visibility:""},S=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=rE(y==null?void 0:y.pointerEvents)||"",r.transform=S?S(this.latestValues,""):"none",r;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=rE(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!A_(this.latestValues)&&(N.transform=S?S({},""):"none",this.hasProjected=!1),N}const R=A.animationValues||A.latestValues;this.applyTransformsToTarget(),r.transform=ore(this.projectionDeltaWithTransform,this.treeScale,R),S&&(r.transform=S(R,r.transform));const{x:O,y:z}=this.projectionDelta;r.transformOrigin=`${O.origin*100}% ${z.origin*100}% 0`,A.animationValues?r.opacity=A===this?R.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:R.opacityExit:r.opacity=A===this?R.opacity!==void 0?R.opacity:"":R.opacityExit!==void 0?R.opacityExit:0;for(const N in Z1){if(R[N]===void 0)continue;const{correct:U,applyTo:H,isCSSVariable:K}=Z1[N],W=r.transform==="none"?R[N]:U(R[N],A);if(H){const re=H.length;for(let ne=0;ne<re;ne++)r[H[ne]]=W}else K?this.options.visualElement.renderState.vars[N]=W:r[N]=W}return this.options.layoutId&&(r.pointerEvents=A===this?rE(y==null?void 0:y.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var r;return(r=y.currentAnimation)==null?void 0:r.stop()}),this.root.nodes.forEach(gF),this.root.sharedNodes.clear()}}}function lre(e){e.updateLayout()}function cre(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:u}=e.layout,{animationType:f}=e.options,y=t.source!==e.layout.source;f==="size"?fh(O=>{const z=y?t.measuredBox[O]:t.layoutBox[O],N=ac(z);z.min=a[O].min,z.max=z.min+N}):HV(f,t.layoutBox,a)&&fh(O=>{const z=y?t.measuredBox[O]:t.layoutBox[O],N=ac(a[O]);z.max=z.min+N,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[O].max=e.relativeTarget[O].min+N)});const r=U0();b1(r,a,t.layoutBox);const S=U0();y?b1(S,e.applyTransform(u,!0),t.measuredBox):b1(S,a,t.layoutBox);const A=!jV(r);let R=!1;if(!e.resumeFrom){const O=e.getClosestProjectingParent();if(O&&!O.resumeFrom){const{snapshot:z,layout:N}=O;if(z&&N){const U=js();w1(U,t.layoutBox,z.layoutBox);const H=js();w1(H,a,N.layoutBox),UV(U,H)||(R=!0),O.options.layoutRoot&&(e.relativeTarget=H,e.relativeTargetOrigin=U,e.relativeParent=O)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:S,layoutDelta:r,hasLayoutChanged:A,hasRelativeLayoutChanged:R})}else if(e.isLead()){const{onExitComplete:a}=e.options;a&&a()}e.options.transition=void 0}function ure(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function hre(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dre(e){e.clearSnapshot()}function gF(e){e.clearMeasurements()}function fre(e){e.isLayoutDirty=!1}function pre(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yF(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function mre(e){e.resolveTargetDelta()}function gre(e){e.calcProjection()}function yre(e){e.resetSkewAndRotation()}function _re(e){e.removeLeadSnapshot()}function _F(e,t,n){e.translate=_s(t.translate,0,n),e.scale=_s(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function vF(e,t,n,a){e.min=_s(t.min,n.min,a),e.max=_s(t.max,n.max,a)}function vre(e,t,n,a){vF(e.x,t.x,n.x,a),vF(e.y,t.y,n.y,a)}function xre(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const bre={duration:.45,ease:[.4,0,.1,1]},xF=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),bF=xF("applewebkit/")&&!xF("chrome/")?Math.round:xh;function wF(e){e.min=bF(e.min),e.max=bF(e.max)}function wre(e){wF(e.x),wF(e.y)}function HV(e,t,n){return e==="position"||e==="preserve-aspect"&&!Tie(fF(t),fF(n),.2)}function Sre(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Tre=$V({attachResizeListener:(e,t)=>K1(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),KM={current:void 0},GV=$V({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!KM.current){const e=new Tre({});e.mount(window),e.setOptions({layoutScroll:!0}),KM.current=e}return KM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Ere={pan:{Feature:Uie},drag:{Feature:jie,ProjectionNode:GV,MeasureLayout:BV}};function SF(e,t,n){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",n==="Start");const u="onHover"+n,f=a[u];f&&vs.postRender(()=>f(t,Aw(t)))}class Cre extends Qg{mount(){const{current:t}=this.node;t&&(this.unmount=rne(t,(n,a)=>(SF(this.node,a,"Start"),u=>SF(this.node,u,"End"))))}unmount(){}}class Are extends Qg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tw(K1(this.node.current,"focus",()=>this.onFocus()),K1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TF(e,t,n){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",n==="Start");const u="onTap"+(n==="End"?"":n),f=a[u];f&&vs.postRender(()=>f(t,Aw(t)))}class Mre extends Qg{mount(){const{current:t}=this.node;t&&(this.unmount=lne(t,(n,a)=>(TF(this.node,a,"Start"),(u,{success:f})=>TF(this.node,u,f?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const KI=new WeakMap,JM=new WeakMap,Rre=e=>{const t=KI.get(e.target);t&&t(e)},Ire=e=>{e.forEach(Rre)};function Pre({root:e,...t}){const n=e||document;JM.has(n)||JM.set(n,{});const a=JM.get(n),u=JSON.stringify(t);return a[u]||(a[u]=new IntersectionObserver(Ire,{root:e,...t})),a[u]}function Dre(e,t,n){const a=Pre(t);return KI.set(e,n),a.observe(e),()=>{KI.delete(e),a.unobserve(e)}}const Ore={some:0,all:1};class Lre extends Qg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:a,amount:u="some",once:f}=t,y={root:n?n.current:void 0,rootMargin:a,threshold:typeof u=="number"?u:Ore[u]},r=S=>{const{isIntersecting:A}=S;if(this.isInView===A||(this.isInView=A,f&&!A&&this.hasEnteredView))return;A&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",A);const{onViewportEnter:R,onViewportLeave:O}=this.node.getProps(),z=A?R:O;z&&z(S)};return Dre(this.node.current,y,r)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(kre(t,n))&&this.startObserver()}unmount(){}}function kre({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const zre={inView:{Feature:Lre},tap:{Feature:Mre},focus:{Feature:Are},hover:{Feature:Cre}},Bre={layout:{ProjectionNode:GV,MeasureLayout:BV}},JI={current:null},qV={current:!1};function Fre(){if(qV.current=!0,!!OD)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>JI.current=e.matches;e.addListener(t),t()}else JI.current=!1}const Nre=new WeakMap;function jre(e,t,n){for(const a in t){const u=t[a],f=n[a];if(Ol(u))e.addValue(a,u);else if(Ol(f))e.addValue(a,W1(u,{owner:e}));else if(f!==u)if(e.hasValue(a)){const y=e.getValue(a);y.liveStyle===!0?y.jump(u):y.hasAnimated||y.set(u)}else{const y=e.getStaticValue(a);e.addValue(a,W1(y!==void 0?y:u,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const EF=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ure{scrapeMotionValuesFromProps(t,n,a){return{}}constructor({parent:t,props:n,presenceContext:a,reducedMotionConfig:u,blockInitialAnimation:f,visualState:y},r={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=YD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const z=Ac.now();this.renderScheduledAt<z&&(this.renderScheduledAt=z,vs.render(this.render,!1,!0))};const{latestValues:S,renderState:A}=y;this.latestValues=S,this.baseTarget={...S},this.initialValues=n.initial?{...S}:{},this.renderState=A,this.parent=t,this.props=n,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=r,this.blockInitialAnimation=!!f,this.isControllingVariants=UC(n),this.isVariantNode=fV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:R,...O}=this.scrapeMotionValuesFromProps(n,{},this);for(const z in O){const N=O[z];S[z]!==void 0&&Ol(N)&&N.set(S[z],!1)}}mount(t){this.current=t,Nre.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),qV.current||Fre(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:JI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),$g(this.notifyUpdate),$g(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=wx.has(t);a&&this.onBindTransform&&this.onBindTransform();const u=n.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&vs.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),f=n.on("renderRequest",this.scheduleRender);let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{u(),f(),y&&y(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sx){const n=sx[t];if(!n)continue;const{isEnabled:a,Feature:u}=n;if(!this.features[t]&&u&&a(this.props)&&(this.features[t]=new u(this)),this.features[t]){const f=this.features[t];f.isMounted?f.update():(f.mount(),f.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):js()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let a=0;a<EF.length;a++){const u=EF[a];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const f="on"+u,y=t[f];y&&(this.propEventSubscriptions[u]=this.on(u,y))}this.prevMotionValues=jre(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const a=this.values.get(t);n!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&n!==void 0&&(a=W1(n===null?void 0:n,{owner:this}),this.addValue(t,a)),a}readValue(t,n){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(SU(a)||TU(a))?a=parseFloat(a):!une(a)&&Hg.test(n)&&(a=sV(t,n)),this.setBaseTarget(t,Ol(a)?a.get():a)),Ol(a)?a.get():a}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var f;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const y=aO(this.props,n,(f=this.presenceContext)==null?void 0:f.custom);y&&(a=y[t])}if(n&&a!==void 0)return a;const u=this.getBaseTargetFromProps(this.props,t);return u!==void 0&&!Ol(u)?u:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ND),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class WV extends Ure{constructor(){super(...arguments),this.KeyframeResolver=Qte}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:a}){delete n[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ol(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function XV(e,{style:t,vars:n},a,u){Object.assign(e.style,t,u&&u.getProjectionStyles(a));for(const f in n)e.style.setProperty(f,n[f])}function Vre(e){return window.getComputedStyle(e)}class $re extends WV{constructor(){super(...arguments),this.type="html",this.renderInstance=XV}readValueFromInstance(t,n){if(wx.has(n))return _te(t,n);{const a=Vre(t),u=(VD(n)?a.getPropertyValue(n):a[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return OV(t,n)}build(t,n,a){rO(t,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,n,a){return lO(t,n,a)}}const ZV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hre(e,t,n,a){XV(e,t,void 0,a);for(const u in t.attrs)e.setAttribute(ZV.has(u)?u:iO(u),t.attrs[u])}class Gre extends WV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=js}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(wx.has(n)){const a=oV(n);return a&&a.default||0}return n=ZV.has(n)?n:iO(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,a){return SV(t,n,a)}build(t,n,a){vV(t,n,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,n,a,u){Hre(t,n,a,u)}mount(t){this.isSVGTag=bV(t.tagName),super.mount(t)}}const qre=(e,t)=>sO(e)?new Gre(t):new $re(t,{allowProjection:e!==ee.Fragment}),Wre=Hne({...gie,...zre,...Ere,...Bre},qre),cT=mne(Wre);function CF(...e){const t=ee.useRef(0),[n,a]=ee.useState(e[t.current]),u=ee.useCallback(f=>{t.current=typeof f!="number"?gee(0,e.length,t.current+1):f,a(e[t.current])},[e.length,...e]);return[n,u]}function Xre({children:e,type:t="scale",direction:n="right",offset:a=10,scale:u={hover:1,tap:.9},ref:f}){let y,r;switch(n){case"up":case"left":y=a,r=0;break;case"right":case"down":default:y=0,r=a;break}const[S,A]=CF(y,r),[R,O]=CF(y,r);switch(t){case"rotate":return te.jsx(cT.div,{ref:f,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:e});case"slide":return n==="up"||n==="down"?te.jsx(cT.div,{ref:f,animate:{y:R!==void 0?R:""},onHoverEnd:()=>O(),onHoverStart:()=>O(),children:e}):te.jsx(cT.div,{ref:f,animate:{x:S!==void 0?S:""},onHoverEnd:()=>A(),onHoverStart:()=>A(),children:e});case"scale":default:return typeof u=="number"&&(u={hover:u,tap:u}),te.jsx(cT.div,{ref:f,whileHover:{scale:u==null?void 0:u.hover},whileTap:{scale:u==null?void 0:u.tap},children:e})}}Xre.propTypes={children:Ui.node,type:Ui.oneOf(["slide","scale","rotate"]),direction:Ui.oneOf(["up","down","left","right"]),offset:Ui.number,scale:Ui.object};function Zre(e){return tr("MuiCardHeader",e)}const UE=or("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Yre=e=>{const{classes:t}=e;return er({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Zre,t)},Kre=Mn("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{[`& .${UE.title}`]:t.title},{[`& .${UE.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),Jre=Mn("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),Qre=Mn("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),eoe=Mn("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${ME.root}:where(& .${UE.title})`]:{display:"block"},[`.${ME.root}:where(& .${UE.subheader})`]:{display:"block"}}),AF=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiCardHeader"}),{action:u,avatar:f,component:y="div",disableTypography:r=!1,subheader:S,subheaderTypographyProps:A,title:R,titleTypographyProps:O,slots:z={},slotProps:N={},...U}=a,H={...a,component:y,disableTypography:r},K=Yre(H),W={slots:z,slotProps:{title:O,subheader:A,...N}};let re=R;const[ne,se]=Fr("title",{className:K.title,elementType:Ii,externalForwardedProps:W,ownerState:H,additionalProps:{variant:f?"body2":"h5",component:"span"}});re!=null&&re.type!==Ii&&!r&&(re=te.jsx(ne,{...se,children:re}));let ue=S;const[pe,Ce]=Fr("subheader",{className:K.subheader,elementType:Ii,externalForwardedProps:W,ownerState:H,additionalProps:{variant:f?"body2":"body1",color:"textSecondary",component:"span"}});ue!=null&&ue.type!==Ii&&!r&&(ue=te.jsx(pe,{...Ce,children:ue}));const[Le,qe]=Fr("root",{ref:n,className:K.root,elementType:Kre,externalForwardedProps:{...W,...U,component:y},ownerState:H}),[ye,Xe]=Fr("avatar",{className:K.avatar,elementType:Jre,externalForwardedProps:W,ownerState:H}),[ut,et]=Fr("content",{className:K.content,elementType:eoe,externalForwardedProps:W,ownerState:H}),[ot,mt]=Fr("action",{className:K.action,elementType:Qre,externalForwardedProps:W,ownerState:H});return te.jsxs(Le,{...qe,children:[f&&te.jsx(ye,{...Xe,children:f}),te.jsxs(ut,{...et,children:[re,ue]}),u&&te.jsx(ot,{...mt,children:u})]})}),MF={"& .MuiCardHeader-action":{mr:0}},toe=function({border:t=!1,boxShadow:n,children:a,content:u=!0,contentClass:f="",contentSX:y={},headerSX:r={},darkTitle:S,secondary:A,shadow:R,sx:O={},title:z,ref:N,...U}){return te.jsxs(Vg,{ref:N,...U,sx:{border:t?"1px solid":"none",borderColor:"divider",":hover":{boxShadow:n?R||"0 2px 14px 0 rgb(32 40 45 / 8%)":"inherit"},...O},children:[!S&&z&&te.jsx(AF,{sx:{...MF,...r},title:z,action:A}),S&&z&&te.jsx(AF,{sx:{...MF,...r},title:te.jsx(Ii,{variant:"h3",children:z}),action:A}),z&&te.jsx(Pd,{}),u&&te.jsx(ww,{sx:y,className:f,children:a}),!u&&a]})};function noe(e,t){const[n,a]=ee.useState(()=>{const f=localStorage.getItem(e);return f===null?t:JSON.parse(f)});return ee.useEffect(()=>{const f=y=>{y.storageArea===localStorage&&y.key===e&&a(y.newValue?JSON.parse(y.newValue):y.newValue)};return window.addEventListener("storage",f),()=>{window.removeEventListener("storage",f)}},[e,t]),[n,f=>{a(y=>{const r=typeof f=="function"?f(y):f;return localStorage.setItem(e,JSON.stringify(r)),r})}]}const QI={...Jj,onChangeFontFamily:()=>{},onChangeBorderRadius:()=>{},onReset:()=>{}},YV=ee.createContext(QI);function KV({children:e}){const[t,n]=noe("berry-config-vite-ts",{fontFamily:QI.fontFamily,borderRadius:QI.borderRadius}),a=y=>{n({...t,fontFamily:y})},u=(y,r)=>{n({...t,borderRadius:r})},f=()=>{n({...Jj})};return te.jsx(YV.Provider,{value:{...t,onChangeFontFamily:a,onChangeBorderRadius:u,onReset:f},children:e})}KV.propTypes={children:Ui.node};function Sx(){return ee.useContext(YV)}var QM={exports:{}},eR={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RF;function ioe(){if(RF)return eR;RF=1;var e=Ch();function t(S,A){return S===A&&(S!==0||1/S===1/A)||S!==S&&A!==A}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,u=e.useRef,f=e.useEffect,y=e.useMemo,r=e.useDebugValue;return eR.useSyncExternalStoreWithSelector=function(S,A,R,O,z){var N=u(null);if(N.current===null){var U={hasValue:!1,value:null};N.current=U}else U=N.current;N=y(function(){function K(ue){if(!W){if(W=!0,re=ue,ue=O(ue),z!==void 0&&U.hasValue){var pe=U.value;if(z(pe,ue))return ne=pe}return ne=ue}if(pe=ne,n(re,ue))return pe;var Ce=O(ue);return z!==void 0&&z(pe,Ce)?(re=ue,pe):(re=ue,ne=Ce)}var W=!1,re,ne,se=R===void 0?null:R;return[function(){return K(A())},se===null?void 0:function(){return K(se())}]},[A,R,O,z]);var H=a(S,N[0],N[1]);return f(function(){U.hasValue=!0,U.value=H},[H]),r(H),H},eR}var IF;function roe(){return IF||(IF=1,QM.exports=ioe()),QM.exports}var ooe=roe();function soe(e){e()}function aoe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){soe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const u=t={callback:n,next:null,prev:t};return u.prev?u.prev.next=u:e=u,function(){!a||e===null||(a=!1,u.next?u.next.prev=u.prev:t=u.prev,u.prev?u.prev.next=u.next:e=u.next)}}}}var PF={notify(){},get:()=>[]};function loe(e,t){let n,a=PF,u=0,f=!1;function y(H){R();const K=a.subscribe(H);let W=!1;return()=>{W||(W=!0,K(),O())}}function r(){a.notify()}function S(){U.onStateChange&&U.onStateChange()}function A(){return f}function R(){u++,n||(n=e.subscribe(S),a=aoe())}function O(){u--,n&&u===0&&(n(),n=void 0,a.clear(),a=PF)}function z(){f||(f=!0,R())}function N(){f&&(f=!1,O())}const U={addNestedSub:y,notifyNestedSubs:r,handleChangeWrapper:S,isSubscribed:A,trySubscribe:z,tryUnsubscribe:N,getListeners:()=>a};return U}var coe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uoe=coe(),hoe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",doe=hoe(),foe=()=>uoe||doe?ee.useLayoutEffect:ee.useEffect,poe=foe(),tR=Symbol.for("react-redux-context"),nR=typeof globalThis<"u"?globalThis:{};function moe(){if(!ee.createContext)return{};const e=nR[tR]??(nR[tR]=new Map);let t=e.get(ee.createContext);return t||(t=ee.createContext(null),e.set(ee.createContext,t)),t}var Gg=moe();function goe(e){const{children:t,context:n,serverState:a,store:u}=e,f=ee.useMemo(()=>{const S=loe(u);return{store:u,subscription:S,getServerState:a?()=>a:void 0}},[u,a]),y=ee.useMemo(()=>u.getState(),[u]);poe(()=>{const{subscription:S}=f;return S.onStateChange=S.notifyNestedSubs,S.trySubscribe(),y!==u.getState()&&S.notifyNestedSubs(),()=>{S.tryUnsubscribe(),S.onStateChange=void 0}},[f,y]);const r=n||Gg;return ee.createElement(r.Provider,{value:f},t)}var yoe=goe;function uO(e=Gg){return function(){return ee.useContext(e)}}var JV=uO();function QV(e=Gg){const t=e===Gg?JV:uO(e),n=()=>{const{store:a}=t();return a};return Object.assign(n,{withTypes:()=>n}),n}var _oe=QV();function voe(e=Gg){const t=e===Gg?_oe:QV(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var xoe=voe(),boe=(e,t)=>e===t;function woe(e=Gg){const t=e===Gg?JV:uO(e),n=(a,u={})=>{const{equalityFn:f=boe}=typeof u=="function"?{equalityFn:u}:u,y=t(),{store:r,subscription:S,getServerState:A}=y;ee.useRef(!0);const R=ee.useCallback({[a.name](z){return a(z)}}[a.name],[a]),O=ooe.useSyncExternalStoreWithSelector(S.addNestedSub,r.getState,A||r.getState,R,f);return ee.useDebugValue(O),O};return Object.assign(n,{withTypes:()=>n}),n}var Soe=woe();function il(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Toe=typeof Symbol=="function"&&Symbol.observable||"@@observable",DF=Toe,iR=()=>Math.random().toString(36).substring(7).split("").join("."),Eoe={INIT:`@@redux/INIT${iR()}`,REPLACE:`@@redux/REPLACE${iR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iR()}`},VE=Eoe;function hO(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dO(e,t,n){if(typeof e!="function")throw new Error(il(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(il(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(il(1));return n(dO)(e,t)}let a=e,u=t,f=new Map,y=f,r=0,S=!1;function A(){y===f&&(y=new Map,f.forEach((K,W)=>{y.set(W,K)}))}function R(){if(S)throw new Error(il(3));return u}function O(K){if(typeof K!="function")throw new Error(il(4));if(S)throw new Error(il(5));let W=!0;A();const re=r++;return y.set(re,K),function(){if(W){if(S)throw new Error(il(6));W=!1,A(),y.delete(re),f=null}}}function z(K){if(!hO(K))throw new Error(il(7));if(typeof K.type>"u")throw new Error(il(8));if(typeof K.type!="string")throw new Error(il(17));if(S)throw new Error(il(9));try{S=!0,u=a(u,K)}finally{S=!1}return(f=y).forEach(re=>{re()}),K}function N(K){if(typeof K!="function")throw new Error(il(10));a=K,z({type:VE.REPLACE})}function U(){const K=O;return{subscribe(W){if(typeof W!="object"||W===null)throw new Error(il(11));function re(){const se=W;se.next&&se.next(R())}return re(),{unsubscribe:K(re)}},[DF](){return this}}}return z({type:VE.INIT}),{dispatch:z,subscribe:O,getState:R,replaceReducer:N,[DF]:U}}function Coe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:VE.INIT})>"u")throw new Error(il(12));if(typeof n(void 0,{type:VE.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(il(13))})}function Aoe(e){const t=Object.keys(e),n={};for(let f=0;f<t.length;f++){const y=t[f];typeof e[y]=="function"&&(n[y]=e[y])}const a=Object.keys(n);let u;try{Coe(n)}catch(f){u=f}return function(y={},r){if(u)throw u;let S=!1;const A={};for(let R=0;R<a.length;R++){const O=a[R],z=n[O],N=y[O],U=z(N,r);if(typeof U>"u")throw r&&r.type,new Error(il(14));A[O]=U,S=S||U!==N}return S=S||a.length!==Object.keys(y).length,S?A:y}}function $E(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function Moe(...e){return t=>(n,a)=>{const u=t(n,a);let f=()=>{throw new Error(il(15))};const y={getState:u.getState,dispatch:(S,...A)=>f(S,...A)},r=e.map(S=>S(y));return f=$E(...r)(u.dispatch),{...u,dispatch:f}}}function Roe(e){return hO(e)&&"type"in e&&typeof e.type=="string"}var e6=Symbol.for("immer-nothing"),OF=Symbol.for("immer-draftable"),Su=Symbol.for("immer-state");function Rd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ax=Object.getPrototypeOf;function Q_(e){return!!e&&!!e[Su]}function Am(e){var t;return e?t6(e)||Array.isArray(e)||!!e[OF]||!!((t=e.constructor)!=null&&t[OF])||$C(e)||HC(e):!1}var Ioe=Object.prototype.constructor.toString();function t6(e){if(!e||typeof e!="object")return!1;const t=ax(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ioe}function HE(e,t){VC(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,a)=>t(a,n,e))}function VC(e){const t=e[Su];return t?t.type_:Array.isArray(e)?1:$C(e)?2:HC(e)?3:0}function eP(e,t){return VC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function n6(e,t,n){const a=VC(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function Poe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $C(e){return e instanceof Map}function HC(e){return e instanceof Set}function M_(e){return e.copy_||e.base_}function tP(e,t){if($C(e))return new Map(e);if(HC(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=t6(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[Su];let u=Reflect.ownKeys(a);for(let f=0;f<u.length;f++){const y=u[f],r=a[y];r.writable===!1&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(a[y]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[y]})}return Object.create(ax(e),a)}else{const a=ax(e);if(a!==null&&n)return{...e};const u=Object.create(a);return Object.assign(u,e)}}function fO(e,t=!1){return GC(e)||Q_(e)||!Am(e)||(VC(e)>1&&(e.set=e.add=e.clear=e.delete=Doe),Object.freeze(e),t&&Object.entries(e).forEach(([n,a])=>fO(a,!0))),e}function Doe(){Rd(2)}function GC(e){return Object.isFrozen(e)}var Ooe={};function ev(e){const t=Ooe[e];return t||Rd(0,e),t}var J1;function i6(){return J1}function Loe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LF(e,t){t&&(ev("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function nP(e){iP(e),e.drafts_.forEach(koe),e.drafts_=null}function iP(e){e===J1&&(J1=e.parent_)}function kF(e){return J1=Loe(J1,e)}function koe(e){const t=e[Su];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Su].modified_&&(nP(t),Rd(4)),Am(e)&&(e=GE(t,e),t.parent_||qE(t,e)),t.patches_&&ev("Patches").generateReplacementPatches_(n[Su].base_,e,t.patches_,t.inversePatches_)):e=GE(t,n,[]),nP(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==e6?e:void 0}function GE(e,t,n){if(GC(t))return t;const a=t[Su];if(!a)return HE(t,(u,f)=>BF(e,a,t,u,f,n)),t;if(a.scope_!==e)return t;if(!a.modified_)return qE(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const u=a.copy_;let f=u,y=!1;a.type_===3&&(f=new Set(u),u.clear(),y=!0),HE(f,(r,S)=>BF(e,a,u,r,S,n,y)),qE(e,u,!1),n&&e.patches_&&ev("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function BF(e,t,n,a,u,f,y){if(Q_(u)){const r=f&&t&&t.type_!==3&&!eP(t.assigned_,a)?f.concat(a):void 0,S=GE(e,u,r);if(n6(n,a,S),Q_(S))e.canAutoFreeze_=!1;else return}else y&&n.add(u);if(Am(u)&&!GC(u)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;GE(e,u),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,a)&&qE(e,u)}}function qE(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fO(t,n)}function zoe(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:i6(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=a,f=pO;n&&(u=[a],f=Q1);const{revoke:y,proxy:r}=Proxy.revocable(u,f);return a.draft_=r,a.revoke_=y,r}var pO={get(e,t){if(t===Su)return e;const n=M_(e);if(!eP(n,t))return Boe(e,n,t);const a=n[t];return e.finalized_||!Am(a)?a:a===rR(e.base_,t)?(oR(e),e.copy_[t]=oP(a,e)):a},has(e,t){return t in M_(e)},ownKeys(e){return Reflect.ownKeys(M_(e))},set(e,t,n){const a=r6(M_(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const u=rR(M_(e),t),f=u==null?void 0:u[Su];if(f&&f.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Poe(n,u)&&(n!==void 0||eP(e.base_,t)))return!0;oR(e),rP(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rR(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,oR(e),rP(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=M_(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){Rd(11)},getPrototypeOf(e){return ax(e.base_)},setPrototypeOf(){Rd(12)}},Q1={};HE(pO,(e,t)=>{Q1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Q1.deleteProperty=function(e,t){return Q1.set.call(this,e,t,void 0)};Q1.set=function(e,t,n){return pO.set.call(this,e[0],t,n,e[0])};function rR(e,t){const n=e[Su];return(n?M_(n):e)[t]}function Boe(e,t,n){var u;const a=r6(t,n);return a?"value"in a?a.value:(u=a.get)==null?void 0:u.call(e.draft_):void 0}function r6(e,t){if(!(t in e))return;let n=ax(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=ax(n)}}function rP(e){e.modified_||(e.modified_=!0,e.parent_&&rP(e.parent_))}function oR(e){e.copy_||(e.copy_=tP(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Foe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const f=n;n=t;const y=this;return function(S=f,...A){return y.produce(S,R=>n.call(this,R,...A))}}typeof n!="function"&&Rd(6),a!==void 0&&typeof a!="function"&&Rd(7);let u;if(Am(t)){const f=kF(this),y=oP(t,void 0);let r=!0;try{u=n(y),r=!1}finally{r?nP(f):iP(f)}return LF(f,a),zF(u,f)}else if(!t||typeof t!="object"){if(u=n(t),u===void 0&&(u=t),u===e6&&(u=void 0),this.autoFreeze_&&fO(u,!0),a){const f=[],y=[];ev("Patches").generateReplacementPatches_(t,u,f,y),a(f,y)}return u}else Rd(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(y,...r)=>this.produceWithPatches(y,S=>t(S,...r));let a,u;return[this.produce(t,n,(y,r)=>{a=y,u=r}),a,u]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Am(e)||Rd(8),Q_(e)&&(e=Noe(e));const t=kF(this),n=oP(e,void 0);return n[Su].isManual_=!0,iP(t),n}finishDraft(e,t){const n=e&&e[Su];(!n||!n.isManual_)&&Rd(9);const{scope_:a}=n;return LF(a,t),zF(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const u=t[n];if(u.path.length===0&&u.op==="replace"){e=u.value;break}}n>-1&&(t=t.slice(n+1));const a=ev("Patches").applyPatches_;return Q_(e)?a(e,t):this.produce(e,u=>a(u,t))}};function oP(e,t){const n=$C(e)?ev("MapSet").proxyMap_(e,t):HC(e)?ev("MapSet").proxySet_(e,t):zoe(e,t);return(t?t.scope_:i6()).drafts_.push(n),n}function Noe(e){return Q_(e)||Rd(10,e),o6(e)}function o6(e){if(!Am(e)||GC(e))return e;const t=e[Su];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=tP(e,t.scope_.immer_.useStrictShallowCopy_)}else n=tP(e,!0);return HE(n,(a,u)=>{n6(n,a,o6(u))}),t&&(t.finalized_=!1),n}var Tu=new Foe,s6=Tu.produce;Tu.produceWithPatches.bind(Tu);Tu.setAutoFreeze.bind(Tu);Tu.setUseStrictShallowCopy.bind(Tu);Tu.applyPatches.bind(Tu);Tu.createDraft.bind(Tu);Tu.finishDraft.bind(Tu);function a6(e){return({dispatch:n,getState:a})=>u=>f=>typeof f=="function"?f(n,a,e):u(f)}var joe=a6(),Uoe=a6,Voe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$E:$E.apply(null,arguments)};function FF(e,t){function n(...a){if(t){let u=t(...a);if(!u)throw new Error(vm(0));return{type:e,payload:u.payload,..."meta"in u&&{meta:u.meta},..."error"in u&&{error:u.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>Roe(a)&&a.type===e,n}var l6=class d1 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,d1.prototype)}static get[Symbol.species](){return d1}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new d1(...t[0].concat(this)):new d1(...t.concat(this))}};function NF(e){return Am(e)?s6(e,()=>{}):e}function uT(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function $oe(e){return typeof e=="boolean"}var Hoe=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:u=!0,actionCreatorCheck:f=!0}=t??{};let y=new l6;return n&&($oe(n)?y.push(joe):y.push(Uoe(n.extraArgument))),y},Goe="RTK_autoBatch",jF=e=>t=>{setTimeout(t,e)},qoe=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let u=!0,f=!1,y=!1;const r=new Set,S=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jF(10):e.type==="callback"?e.queueNotification:jF(e.timeout),A=()=>{y=!1,f&&(f=!1,r.forEach(R=>R()))};return Object.assign({},a,{subscribe(R){const O=()=>u&&R(),z=a.subscribe(O);return r.add(R),()=>{z(),r.delete(R)}},dispatch(R){var O;try{return u=!((O=R==null?void 0:R.meta)!=null&&O[Goe]),f=!u,f&&(y||(y=!0,S(A))),a.dispatch(R)}finally{u=!0}}})},Woe=e=>function(n){const{autoBatch:a=!0}=n??{};let u=new l6(e);return a&&u.push(qoe(typeof a=="object"?a:void 0)),u};function Xoe(e){const t=Hoe(),{reducer:n=void 0,middleware:a,devTools:u=!0,preloadedState:f=void 0,enhancers:y=void 0}=e||{};let r;if(typeof n=="function")r=n;else if(hO(n))r=Aoe(n);else throw new Error(vm(1));let S;typeof a=="function"?S=a(t):S=t();let A=$E;u&&(A=Voe({trace:!1,...typeof u=="object"&&u}));const R=Moe(...S),O=Woe(R);let z=typeof y=="function"?y(O):O();const N=A(...z);return dO(r,f,N)}function c6(e){const t={},n=[];let a;const u={addCase(f,y){const r=typeof f=="string"?f:f.type;if(!r)throw new Error(vm(28));if(r in t)throw new Error(vm(29));return t[r]=y,u},addMatcher(f,y){return n.push({matcher:f,reducer:y}),u},addDefaultCase(f){return a=f,u}};return e(u),[t,n,a]}function Zoe(e){return typeof e=="function"}function Yoe(e,t){let[n,a,u]=c6(t),f;if(Zoe(e))f=()=>NF(e());else{const r=NF(e);f=()=>r}function y(r=f(),S){let A=[n[S.type],...a.filter(({matcher:R})=>R(S)).map(({reducer:R})=>R)];return A.filter(R=>!!R).length===0&&(A=[u]),A.reduce((R,O)=>{if(O)if(Q_(R)){const N=O(R,S);return N===void 0?R:N}else{if(Am(R))return s6(R,z=>O(z,S));{const z=O(R,S);if(z===void 0){if(R===null)return R;throw Error("A case reducer on a non-draftable value must not return undefined")}return z}}return R},r)}return y.getInitialState=f,y}var Koe=Symbol.for("rtk-slice-createasyncthunk");function Joe(e,t){return`${e}/${t}`}function Qoe({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Koe];return function(u){const{name:f,reducerPath:y=f}=u;if(!f)throw new Error(vm(11));const r=(typeof u.reducers=="function"?u.reducers(nse()):u.reducers)||{},S=Object.keys(r),A={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},R={addCase(se,ue){const pe=typeof se=="string"?se:se.type;if(!pe)throw new Error(vm(12));if(pe in A.sliceCaseReducersByType)throw new Error(vm(13));return A.sliceCaseReducersByType[pe]=ue,R},addMatcher(se,ue){return A.sliceMatchers.push({matcher:se,reducer:ue}),R},exposeAction(se,ue){return A.actionCreators[se]=ue,R},exposeCaseReducer(se,ue){return A.sliceCaseReducersByName[se]=ue,R}};S.forEach(se=>{const ue=r[se],pe={reducerName:se,type:Joe(f,se),createNotation:typeof u.reducers=="function"};rse(ue)?sse(pe,ue,R,t):ise(pe,ue,R)});function O(){const[se={},ue=[],pe=void 0]=typeof u.extraReducers=="function"?c6(u.extraReducers):[u.extraReducers],Ce={...se,...A.sliceCaseReducersByType};return Yoe(u.initialState,Le=>{for(let qe in Ce)Le.addCase(qe,Ce[qe]);for(let qe of A.sliceMatchers)Le.addMatcher(qe.matcher,qe.reducer);for(let qe of ue)Le.addMatcher(qe.matcher,qe.reducer);pe&&Le.addDefaultCase(pe)})}const z=se=>se,N=new Map,U=new WeakMap;let H;function K(se,ue){return H||(H=O()),H(se,ue)}function W(){return H||(H=O()),H.getInitialState()}function re(se,ue=!1){function pe(Le){let qe=Le[se];return typeof qe>"u"&&ue&&(qe=uT(U,pe,W)),qe}function Ce(Le=z){const qe=uT(N,ue,()=>new WeakMap);return uT(qe,Le,()=>{const ye={};for(const[Xe,ut]of Object.entries(u.selectors??{}))ye[Xe]=ese(ut,Le,()=>uT(U,Le,W),ue);return ye})}return{reducerPath:se,getSelectors:Ce,get selectors(){return Ce(pe)},selectSlice:pe}}const ne={name:f,reducer:K,actions:A.actionCreators,caseReducers:A.sliceCaseReducersByName,getInitialState:W,...re(y),injectInto(se,{reducerPath:ue,...pe}={}){const Ce=ue??y;return se.inject({reducerPath:Ce,reducer:K},pe),{...ne,...re(Ce,!0)}}};return ne}}function ese(e,t,n,a){function u(f,...y){let r=t(f);return typeof r>"u"&&a&&(r=n()),e(r,...y)}return u.unwrapped=e,u}var tse=Qoe();function nse(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function ise({type:e,reducerName:t,createNotation:n},a,u){let f,y;if("reducer"in a){if(n&&!ose(a))throw new Error(vm(17));f=a.reducer,y=a.prepare}else f=a;u.addCase(e,f).exposeCaseReducer(t,f).exposeAction(t,y?FF(e,y):FF(e))}function rse(e){return e._reducerDefinitionType==="asyncThunk"}function ose(e){return e._reducerDefinitionType==="reducerWithPrepare"}function sse({type:e,reducerName:t},n,a,u){if(!u)throw new Error(vm(18));const{payloadCreator:f,fulfilled:y,pending:r,rejected:S,settled:A,options:R}=n,O=u(e,f,R);a.exposeAction(t,O),y&&a.addCase(O.fulfilled,y),r&&a.addCase(O.pending,r),S&&a.addCase(O.rejected,S),A&&a.addMatcher(O.settled,A),a.exposeCaseReducer(t,{fulfilled:y||hT,pending:r||hT,rejected:S||hT,settled:A||hT})}function hT(){}function vm(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const ase={logInProgress:!1,user:null,token:localStorage.getItem("token")||null},u6=tse({name:"auth",initialState:ase,reducers:{setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token},logout:e=>{e.user=null,e.token=null,localStorage.removeItem("token")},setlogInProgress:(e,t)=>{e.logInProgress=t.payload}}}),{setCredentials:dSe,logout:lse,setlogInProgress:fSe}=u6.actions,cse=u6.reducer;function use(){const e=xs(),t=Zg(),n=xoe(),{borderRadius:a}=Sx(),[u,f]=ee.useState(!0),[y,r]=ee.useState(""),[S,A]=ee.useState(!1),[R]=ee.useState(-1),[O,z]=ee.useState(!1),N=Soe(ne=>ne.auth.user),U=ee.useRef(null),H=()=>{z(ne=>!ne)},K=ne=>{U.current&&U.current.contains(ne.target)||z(!1)},W=()=>{n(lse()),t("/login")},re=ee.useRef(O);return ee.useEffect(()=>{re.current===!0&&O===!1&&U.current.focus(),re.current=O},[O]),te.jsxs(te.Fragment,{children:[te.jsx(Sw,{sx:{ml:2,height:"48px",alignItems:"center",borderRadius:"27px","& .MuiChip-label":{lineHeight:0}},icon:te.jsx(IC,{alt:"user-images",sx:{...e.typography.mediumAvatar,margin:"8px 0 8px 8px !important",cursor:"pointer"},ref:U,"aria-controls":O?"menu-list-grow":void 0,"aria-haspopup":"true",color:"inherit"}),label:te.jsx(sB,{stroke:1.5,size:"24px"}),ref:U,"aria-controls":O?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:H,color:"secondary","aria-label":"user-account"}),te.jsx(zC,{placement:"bottom",open:O,anchorEl:U.current,role:void 0,transition:!0,disablePortal:!0,modifiers:[{name:"offset",options:{offset:[0,14]}}],children:({TransitionProps:ne})=>te.jsx(_U,{onClickAway:K,children:te.jsx(DD,{in:O,...ne,children:te.jsx(Kg,{children:O&&te.jsxs(toe,{border:!1,elevation:16,content:!1,boxShadow:!0,shadow:e.shadows[16],children:[te.jsxs(fr,{sx:{p:2,pb:0},children:[te.jsxs(sc,{children:[te.jsx(sc,{direction:"row",spacing:.5,sx:{alignItems:"center"},children:te.jsx(Ii,{component:"span",variant:"h4",sx:{fontWeight:400},children:(N==null?void 0:N.firstName)+" "+(N==null?void 0:N.lastName)})}),te.jsx(Ii,{variant:"subtitle2",children:N==null?void 0:N.role})]}),te.jsx(Pd,{})]}),te.jsxs(fr,{sx:{p:2,py:0,height:"100%",maxHeight:"calc(100vh - 250px)",overflowX:"hidden","&::-webkit-scrollbar":{width:5}},children:[te.jsx(Pd,{}),te.jsx(Pd,{}),te.jsxs(vx,{component:"nav",sx:{width:"100%",maxWidth:350,minWidth:300,borderRadius:`${a}px`,"& .MuiListItemButton-root":{mt:.5}},children:[te.jsxs(LE,{sx:{borderRadius:`${a}px`},selected:R===0,children:[te.jsx(kE,{children:te.jsx(sB,{stroke:1.5,size:"20px"})}),te.jsx($1,{primary:te.jsx(Ii,{variant:"body2",children:"Account Settings"})})]}),te.jsxs(LE,{sx:{borderRadius:`${a}px`},selected:R===4,onClick:W,children:[te.jsx(kE,{children:te.jsx(iQ,{stroke:1.5,size:"20px"})}),te.jsx($1,{primary:te.jsx(Ii,{variant:"body2",children:"Logout"})})]})]})]})]})})})})})]})}function hse(e){return tr("MuiInput",e)}const Wb={...tx,...or("MuiInput",["root","underline","input"])},dse=e=>{const{classes:t,disableUnderline:n}=e,u=er({root:["root",!n&&"underline"],input:["input"]},hse,t);return{...t,...u}},fse=Mn(OC,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...PC(e,t),!n.disableUnderline&&t.underline]}})(Tr(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:a})=>a.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Wb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Wb.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Wb.disabled}, .${Wb.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Wb.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(la()).map(([a])=>({props:{color:a,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[a].main}`}}}))]}})),pse=Mn(LC,{name:"MuiInput",slot:"Input",overridesResolver:DC})({}),mO=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiInput"}),{disableUnderline:u=!1,components:f={},componentsProps:y,fullWidth:r=!1,inputComponent:S="input",multiline:A=!1,slotProps:R,slots:O={},type:z="text",...N}=a,U=dse(a),K={root:{ownerState:{disableUnderline:u}}},W=R??y?Va(R??y,K):K,re=O.root??f.Root??fse,ne=O.input??f.Input??pse;return te.jsx(wD,{slots:{root:re,input:ne},slotProps:W,fullWidth:r,inputComponent:S,multiline:A,ref:n,type:z,...N,classes:U})});mO.muiName="Input";function mse(e){return tr("MuiFilledInput",e)}const w_={...tx,...or("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},gse=e=>{const{classes:t,disableUnderline:n,startAdornment:a,endAdornment:u,size:f,hiddenLabel:y,multiline:r}=e,S={root:["root",!n&&"underline",a&&"adornedStart",u&&"adornedEnd",f==="small"&&`size${Bn(f)}`,y&&"hiddenLabel",r&&"multiline"],input:["input"]},A=er(S,mse,t);return{...t,...A}},yse=Mn(OC,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...PC(e,t),!n.disableUnderline&&t.underline]}})(Tr(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",u=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",f=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:u,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a}},[`&.${w_.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a},[`&.${w_.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:f},variants:[{props:({ownerState:y})=>!y.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${w_.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${w_.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${w_.disabled}, .${w_.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${w_.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(la()).map(([y])=>{var r;return{props:{disableUnderline:!1,color:y},style:{"&::after":{borderBottom:`2px solid ${(r=(e.vars||e).palette[y])==null?void 0:r.main}`}}}}),{props:({ownerState:y})=>y.startAdornment,style:{paddingLeft:12}},{props:({ownerState:y})=>y.endAdornment,style:{paddingRight:12}},{props:({ownerState:y})=>y.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:y,size:r})=>y.multiline&&r==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:y})=>y.multiline&&y.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:y})=>y.multiline&&y.hiddenLabel&&y.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),_se=Mn(LC,{name:"MuiFilledInput",slot:"Input",overridesResolver:DC})(Tr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),gO=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiFilledInput"}),{disableUnderline:u=!1,components:f={},componentsProps:y,fullWidth:r=!1,hiddenLabel:S,inputComponent:A="input",multiline:R=!1,slotProps:O,slots:z={},type:N="text",...U}=a,H={...a,disableUnderline:u,fullWidth:r,inputComponent:A,multiline:R,type:N},K=gse(a),W={root:{ownerState:H},input:{ownerState:H}},re=O??y?Va(W,O??y):W,ne=z.root??f.Root??yse,se=z.input??f.Input??_se;return te.jsx(wD,{slots:{root:ne,input:se},slotProps:re,fullWidth:r,inputComponent:A,multiline:R,ref:n,type:N,...U,classes:K})});gO.muiName="Input";function vse(e){return tr("MuiFormLabel",e)}const S1=or("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),xse=e=>{const{classes:t,color:n,focused:a,disabled:u,error:f,filled:y,required:r}=e,S={root:["root",`color${Bn(n)}`,u&&"disabled",f&&"error",y&&"filled",a&&"focused",r&&"required"],asterisk:["asterisk",f&&"error"]};return er(S,vse,t)},bse=Mn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(Tr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{[`&.${S1.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${S1.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${S1.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),wse=Mn("span",{name:"MuiFormLabel",slot:"Asterisk"})(Tr(({theme:e})=>({[`&.${S1.error}`]:{color:(e.vars||e).palette.error.main}}))),Sse=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiFormLabel"}),{children:u,className:f,color:y,component:r="label",disabled:S,error:A,filled:R,focused:O,required:z,...N}=a,U=yx(),H=_x({props:a,muiFormControl:U,states:["color","required","focused","disabled","error","filled"]}),K={...a,color:H.color||"primary",component:r,disabled:H.disabled,error:H.error,filled:H.filled,focused:H.focused,required:H.required},W=xse(K);return te.jsxs(bse,{as:r,ownerState:K,className:si(W.root,f),ref:n,...N,children:[u,H.required&&te.jsxs(wse,{ownerState:K,"aria-hidden":!0,className:W.asterisk,children:["","*"]})]})});function Tse(e){return tr("MuiInputLabel",e)}or("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Ese=e=>{const{classes:t,formControl:n,size:a,shrink:u,disableAnimation:f,variant:y,required:r}=e,S={root:["root",n&&"formControl",!f&&"animated",u&&"shrink",a&&a!=="medium"&&`size${Bn(a)}`,y],asterisk:[r&&"asterisk"]},A=er(S,Tse,t);return{...t,...A}},Cse=Mn(Sse,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${S1.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(Tr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:a})=>t==="filled"&&n.shrink&&a==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),T1=ee.forwardRef(function(t,n){const a=nr({name:"MuiInputLabel",props:t}),{disableAnimation:u=!1,margin:f,shrink:y,variant:r,className:S,...A}=a,R=yx();let O=y;typeof O>"u"&&R&&(O=R.filled||R.focused||R.adornedStart);const z=_x({props:a,muiFormControl:R,states:["size","variant","required","focused"]}),N={...a,disableAnimation:u,formControl:R,shrink:O,size:z.size,variant:z.variant,required:z.required,focused:z.focused},U=Ese(N);return te.jsx(Cse,{"data-shrink":O,ref:n,className:si(U.root,S),...A,ownerState:N,classes:U})});function Ase(e){return tr("MuiFormControl",e)}or("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Mse=e=>{const{classes:t,margin:n,fullWidth:a}=e,u={root:["root",n!=="none"&&`margin${Bn(n)}`,a&&"fullWidth"]};return er(u,Ase,t)},Rse=Mn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${Bn(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),$_=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiFormControl"}),{children:u,className:f,color:y="primary",component:r="div",disabled:S=!1,error:A=!1,focused:R,fullWidth:O=!1,hiddenLabel:z=!1,margin:N="none",required:U=!1,size:H="medium",variant:K="outlined",...W}=a,re={...a,color:y,component:r,disabled:S,error:A,fullWidth:O,hiddenLabel:z,margin:N,required:U,size:H,variant:K},ne=Mse(re),[se,ue]=ee.useState(()=>{let mt=!1;return u&&ee.Children.forEach(u,$e=>{if(!m1($e,["Input","Select"]))return;const it=m1($e,["Select"])?$e.props.input:$e;it&&eK(it.props)&&(mt=!0)}),mt}),[pe,Ce]=ee.useState(()=>{let mt=!1;return u&&ee.Children.forEach(u,$e=>{m1($e,["Input","Select"])&&(RE($e.props,!0)||RE($e.props.inputProps,!0))&&(mt=!0)}),mt}),[Le,qe]=ee.useState(!1);S&&Le&&qe(!1);const ye=R!==void 0&&!S?R:Le;let Xe;ee.useRef(!1);const ut=ee.useCallback(()=>{Ce(!0)},[]),et=ee.useCallback(()=>{Ce(!1)},[]),ot=ee.useMemo(()=>({adornedStart:se,setAdornedStart:ue,color:y,disabled:S,error:A,filled:pe,focused:ye,fullWidth:O,hiddenLabel:z,size:H,onBlur:()=>{qe(!1)},onFocus:()=>{qe(!0)},onEmpty:et,onFilled:ut,registerEffect:Xe,required:U,variant:K}),[se,y,S,A,pe,ye,O,z,Xe,et,ut,U,H,K]);return te.jsx(bD.Provider,{value:ot,children:te.jsx(Rse,{as:r,ownerState:re,className:si(ne.root,f),ref:n,...W,children:u})})});function Ise(e){return tr("MuiFormHelperText",e)}const UF=or("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var VF;const Pse=e=>{const{classes:t,contained:n,size:a,disabled:u,error:f,filled:y,focused:r,required:S}=e,A={root:["root",u&&"disabled",f&&"error",a&&`size${Bn(a)}`,n&&"contained",r&&"focused",y&&"filled",S&&"required"]};return er(A,Ise,t)},Dse=Mn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Bn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(Tr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${UF.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${UF.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),Ose=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiFormHelperText"}),{children:u,className:f,component:y="p",disabled:r,error:S,filled:A,focused:R,margin:O,required:z,variant:N,...U}=a,H=yx(),K=_x({props:a,muiFormControl:H,states:["variant","size","disabled","error","filled","focused","required"]}),W={...a,component:y,contained:K.variant==="filled"||K.variant==="outlined",variant:K.variant,size:K.size,disabled:K.disabled,error:K.error,filled:K.filled,focused:K.focused,required:K.required};delete W.ownerState;const re=Pse(W);return te.jsx(Dse,{as:y,className:si(re.root,f),ref:n,...U,ownerState:W,children:u===" "?VF||(VF=te.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):u})});function h6(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function sR(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function $F(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function d6(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function Xb(e,t,n,a,u,f){let y=!1,r=u(e,t,t?n:!1);for(;r;){if(r===e.firstChild){if(y)return!1;y=!0}const S=a?!1:r.disabled||r.getAttribute("aria-disabled")==="true";if(!r.hasAttribute("tabindex")||!d6(r,f)||S)r=u(e,r,n);else return r.focus(),!0}return!1}const Lse=ee.forwardRef(function(t,n){const{actions:a,autoFocus:u=!1,autoFocusItem:f=!1,children:y,className:r,disabledItemsFocusable:S=!1,disableListWrap:A=!1,onKeyDown:R,variant:O="selectedMenu",...z}=t,N=ee.useRef(null),U=ee.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Lc(()=>{u&&N.current.focus()},[u]),ee.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(ne,{direction:se})=>{const ue=!N.current.style.width;if(ne.clientHeight<N.current.clientHeight&&ue){const pe=`${h6(bu(ne))}px`;N.current.style[se==="rtl"?"paddingLeft":"paddingRight"]=pe,N.current.style.width=`calc(100% + ${pe})`}return N.current}}),[]);const H=ne=>{const se=N.current,ue=ne.key;if(ne.ctrlKey||ne.metaKey||ne.altKey){R&&R(ne);return}const Ce=sl(se).activeElement;if(ue==="ArrowDown")ne.preventDefault(),Xb(se,Ce,A,S,sR);else if(ue==="ArrowUp")ne.preventDefault(),Xb(se,Ce,A,S,$F);else if(ue==="Home")ne.preventDefault(),Xb(se,null,A,S,sR);else if(ue==="End")ne.preventDefault(),Xb(se,null,A,S,$F);else if(ue.length===1){const Le=U.current,qe=ue.toLowerCase(),ye=performance.now();Le.keys.length>0&&(ye-Le.lastTime>500?(Le.keys=[],Le.repeating=!0,Le.previousKeyMatched=!0):Le.repeating&&qe!==Le.keys[0]&&(Le.repeating=!1)),Le.lastTime=ye,Le.keys.push(qe);const Xe=Ce&&!Le.repeating&&d6(Ce,Le);Le.previousKeyMatched&&(Xe||Xb(se,Ce,!1,S,sR,Le))?ne.preventDefault():Le.previousKeyMatched=!1}R&&R(ne)},K=as(N,n);let W=-1;ee.Children.forEach(y,(ne,se)=>{if(!ee.isValidElement(ne)){W===se&&(W+=1,W>=y.length&&(W=-1));return}ne.props.disabled||(O==="selectedMenu"&&ne.props.selected||W===-1)&&(W=se),W===se&&(ne.props.disabled||ne.props.muiSkipListHighlight||ne.type.muiSkipListHighlight)&&(W+=1,W>=y.length&&(W=-1))});const re=ee.Children.map(y,(ne,se)=>{if(se===W){const ue={};return f&&(ue.autoFocus=!0),ne.props.tabIndex===void 0&&O==="selectedMenu"&&(ue.tabIndex=0),ee.cloneElement(ne,ue)}return ne});return te.jsx(vx,{role:"menu",ref:K,className:r,onKeyDown:H,tabIndex:u?0:-1,...z,children:re})});function kse(e){const t=sl(e);return t.body===e?bu(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function E1(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function HF(e){return parseInt(bu(e).getComputedStyle(e).paddingRight,10)||0}function zse(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function GF(e,t,n,a,u){const f=[t,n,...a];[].forEach.call(e.children,y=>{const r=!f.includes(y),S=!zse(y);r&&S&&E1(y,u)})}function aR(e,t){let n=-1;return e.some((a,u)=>t(a)?(n=u,!0):!1),n}function Bse(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(kse(a)){const y=h6(bu(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${HF(a)+y}px`;const r=sl(a).querySelectorAll(".mui-fixed");[].forEach.call(r,S=>{n.push({value:S.style.paddingRight,property:"padding-right",el:S}),S.style.paddingRight=`${HF(S)+y}px`})}let f;if(a.parentNode instanceof DocumentFragment)f=sl(a).body;else{const y=a.parentElement,r=bu(a);f=(y==null?void 0:y.nodeName)==="HTML"&&r.getComputedStyle(y).overflowY==="scroll"?y:a}n.push({value:f.style.overflow,property:"overflow",el:f},{value:f.style.overflowX,property:"overflow-x",el:f},{value:f.style.overflowY,property:"overflow-y",el:f}),f.style.overflow="hidden"}return()=>{n.forEach(({value:f,el:y,property:r})=>{f?y.style.setProperty(r,f):y.style.removeProperty(r)})}}function Fse(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class Nse{constructor(){this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&E1(t.modalRef,!1);const u=Fse(n);GF(n,t.mount,t.modalRef,u,!0);const f=aR(this.containers,y=>y.container===n);return f!==-1?(this.containers[f].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:u}),a)}mount(t,n){const a=aR(this.containers,f=>f.modals.includes(t)),u=this.containers[a];u.restore||(u.restore=Bse(u,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const u=aR(this.containers,y=>y.modals.includes(t)),f=this.containers[u];if(f.modals.splice(f.modals.indexOf(t),1),this.modals.splice(a,1),f.modals.length===0)f.restore&&f.restore(),t.modalRef&&E1(t.modalRef,n),GF(f.container,t.mount,t.modalRef,f.hiddenSiblings,!1),this.containers.splice(u,1);else{const y=f.modals[f.modals.length-1];y.modalRef&&E1(y.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const jse=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Use(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Vse(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function $se(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Vse(e))}function Hse(e){const t=[],n=[];return Array.from(e.querySelectorAll(jse)).forEach((a,u)=>{const f=Use(a);f===-1||!$se(a)||(f===0?t.push(a):n.push({documentOrder:u,tabIndex:f,node:a}))}),n.sort((a,u)=>a.tabIndex===u.tabIndex?a.documentOrder-u.documentOrder:a.tabIndex-u.tabIndex).map(a=>a.node).concat(t)}function Gse(){return!0}function qse(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:u=!1,getTabbable:f=Hse,isEnabled:y=Gse,open:r}=e,S=ee.useRef(!1),A=ee.useRef(null),R=ee.useRef(null),O=ee.useRef(null),z=ee.useRef(null),N=ee.useRef(!1),U=ee.useRef(null),H=as(Pm(t),U),K=ee.useRef(null);ee.useEffect(()=>{!r||!U.current||(N.current=!n)},[n,r]),ee.useEffect(()=>{if(!r||!U.current)return;const ne=sl(U.current);return U.current.contains(ne.activeElement)||(U.current.hasAttribute("tabIndex")||U.current.setAttribute("tabIndex","-1"),N.current&&U.current.focus()),()=>{u||(O.current&&O.current.focus&&(S.current=!0,O.current.focus()),O.current=null)}},[r]),ee.useEffect(()=>{if(!r||!U.current)return;const ne=sl(U.current),se=Ce=>{K.current=Ce,!(a||!y()||Ce.key!=="Tab")&&ne.activeElement===U.current&&Ce.shiftKey&&(S.current=!0,R.current&&R.current.focus())},ue=()=>{var qe,ye;const Ce=U.current;if(Ce===null)return;if(!ne.hasFocus()||!y()||S.current){S.current=!1;return}if(Ce.contains(ne.activeElement)||a&&ne.activeElement!==A.current&&ne.activeElement!==R.current)return;if(ne.activeElement!==z.current)z.current=null;else if(z.current!==null)return;if(!N.current)return;let Le=[];if((ne.activeElement===A.current||ne.activeElement===R.current)&&(Le=f(U.current)),Le.length>0){const Xe=!!((qe=K.current)!=null&&qe.shiftKey&&((ye=K.current)==null?void 0:ye.key)==="Tab"),ut=Le[0],et=Le[Le.length-1];typeof ut!="string"&&typeof et!="string"&&(Xe?et.focus():ut.focus())}else Ce.focus()};ne.addEventListener("focusin",ue),ne.addEventListener("keydown",se,!0);const pe=setInterval(()=>{ne.activeElement&&ne.activeElement.tagName==="BODY"&&ue()},50);return()=>{clearInterval(pe),ne.removeEventListener("focusin",ue),ne.removeEventListener("keydown",se,!0)}},[n,a,u,y,r,f]);const W=ne=>{O.current===null&&(O.current=ne.relatedTarget),N.current=!0,z.current=ne.target;const se=t.props.onFocus;se&&se(ne)},re=ne=>{O.current===null&&(O.current=ne.relatedTarget),N.current=!0};return te.jsxs(ee.Fragment,{children:[te.jsx("div",{tabIndex:r?0:-1,onFocus:re,ref:A,"data-testid":"sentinelStart"}),ee.cloneElement(t,{ref:H,onFocus:W}),te.jsx("div",{tabIndex:r?0:-1,onFocus:re,ref:R,"data-testid":"sentinelEnd"})]})}function Wse(e){return tr("MuiBackdrop",e)}or("MuiBackdrop",["root","invisible"]);const Xse=e=>{const{classes:t,invisible:n}=e;return er({root:["root",n&&"invisible"]},Wse,t)},Zse=Mn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Yse=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiBackdrop"}),{children:u,className:f,component:y="div",invisible:r=!1,open:S,components:A={},componentsProps:R={},slotProps:O={},slots:z={},TransitionComponent:N,transitionDuration:U,...H}=a,K={...a,component:y,invisible:r},W=Xse(K),re={transition:N,root:A.Root,...z},ne={...R,...O},se={slots:re,slotProps:ne},[ue,pe]=Fr("root",{elementType:Zse,externalForwardedProps:se,className:si(W.root,f),ownerState:K}),[Ce,Le]=Fr("transition",{elementType:pU,externalForwardedProps:se,ownerState:K});return te.jsx(Ce,{in:S,timeout:U,...H,...Le,children:te.jsx(ue,{"aria-hidden":!0,...pe,classes:W,ref:n,children:u})})});function Kse(e){return typeof e=="function"?e():e}function Jse(e){return e?e.props.hasOwnProperty("in"):!1}const qF=()=>{},dT=new Nse;function Qse(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,closeAfterTransition:u=!1,onTransitionEnter:f,onTransitionExited:y,children:r,onClose:S,open:A,rootRef:R}=e,O=ee.useRef({}),z=ee.useRef(null),N=ee.useRef(null),U=as(N,R),[H,K]=ee.useState(!A),W=Jse(r);let re=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(re=!1);const ne=()=>sl(z.current),se=()=>(O.current.modalRef=N.current,O.current.mount=z.current,O.current),ue=()=>{dT.mount(se(),{disableScrollLock:a}),N.current&&(N.current.scrollTop=0)},pe=_u(()=>{const mt=Kse(t)||ne().body;dT.add(se(),mt),N.current&&ue()}),Ce=()=>dT.isTopModal(se()),Le=_u(mt=>{z.current=mt,mt&&(A&&Ce()?ue():N.current&&E1(N.current,re))}),qe=ee.useCallback(()=>{dT.remove(se(),re)},[re]);ee.useEffect(()=>()=>{qe()},[qe]),ee.useEffect(()=>{A?pe():(!W||!u)&&qe()},[A,qe,W,u,pe]);const ye=mt=>$e=>{var it;(it=mt.onKeyDown)==null||it.call(mt,$e),!($e.key!=="Escape"||$e.which===229||!Ce())&&(n||($e.stopPropagation(),S&&S($e,"escapeKeyDown")))},Xe=mt=>$e=>{var it;(it=mt.onClick)==null||it.call(mt,$e),$e.target===$e.currentTarget&&S&&S($e,"backdropClick")};return{getRootProps:(mt={})=>{const $e=Yj(e);delete $e.onTransitionEnter,delete $e.onTransitionExited;const it={...$e,...mt};return{role:"presentation",...it,onKeyDown:ye(it),ref:U}},getBackdropProps:(mt={})=>{const $e=mt;return{"aria-hidden":!0,...$e,onClick:Xe($e),open:A}},getTransitionProps:()=>{const mt=()=>{K(!1),f&&f()},$e=()=>{K(!0),y&&y(),u&&qe()};return{onEnter:iB(mt,(r==null?void 0:r.props.onEnter)??qF),onExited:iB($e,(r==null?void 0:r.props.onExited)??qF)}},rootRef:U,portalRef:Le,isTopModal:Ce,exited:H,hasTransition:W}}function eae(e){return tr("MuiModal",e)}or("MuiModal",["root","hidden","backdrop"]);const tae=e=>{const{open:t,exited:n,classes:a}=e;return er({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},eae,a)},nae=Mn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Tr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),iae=Mn(Yse,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),f6=ee.forwardRef(function(t,n){const a=nr({name:"MuiModal",props:t}),{BackdropComponent:u=iae,BackdropProps:f,classes:y,className:r,closeAfterTransition:S=!1,children:A,container:R,component:O,components:z={},componentsProps:N={},disableAutoFocus:U=!1,disableEnforceFocus:H=!1,disableEscapeKeyDown:K=!1,disablePortal:W=!1,disableRestoreFocus:re=!1,disableScrollLock:ne=!1,hideBackdrop:se=!1,keepMounted:ue=!1,onClose:pe,onTransitionEnter:Ce,onTransitionExited:Le,open:qe,slotProps:ye={},slots:Xe={},theme:ut,...et}=a,ot={...a,closeAfterTransition:S,disableAutoFocus:U,disableEnforceFocus:H,disableEscapeKeyDown:K,disablePortal:W,disableRestoreFocus:re,disableScrollLock:ne,hideBackdrop:se,keepMounted:ue},{getRootProps:mt,getBackdropProps:$e,getTransitionProps:it,portalRef:Tt,isTopModal:xt,exited:je,hasTransition:ht}=Qse({...ot,rootRef:n}),Bt={...ot,exited:je},Ft=tae(Bt),on={};if(A.props.tabIndex===void 0&&(on.tabIndex="-1"),ht){const{onEnter:On,onExited:ai}=it();on.onEnter=On,on.onExited=ai}const en={slots:{root:z.Root,backdrop:z.Backdrop,...Xe},slotProps:{...N,...ye}},[jt,Rn]=Fr("root",{ref:n,elementType:nae,externalForwardedProps:{...en,...et,component:O},getSlotProps:mt,ownerState:Bt,className:si(r,Ft==null?void 0:Ft.root,!Bt.open&&Bt.exited&&(Ft==null?void 0:Ft.hidden))}),[Vn,Hn]=Fr("backdrop",{ref:f==null?void 0:f.ref,elementType:u,externalForwardedProps:en,shouldForwardComponentProp:!0,additionalProps:f,getSlotProps:On=>$e({...On,onClick:ai=>{On!=null&&On.onClick&&On.onClick(ai)}}),className:si(f==null?void 0:f.className,Ft==null?void 0:Ft.backdrop),ownerState:Bt});return!ue&&!qe&&(!ht||je)?null:te.jsx(cU,{ref:Tt,container:R,disablePortal:W,children:te.jsxs(jt,{...Rn,children:[!se&&u?te.jsx(Vn,{...Hn}):null,te.jsx(qse,{disableEnforceFocus:H,disableAutoFocus:U,disableRestoreFocus:re,isEnabled:xt,open:qe,children:ee.cloneElement(A,on)})]})})});function rae(e){return tr("MuiPopover",e)}or("MuiPopover",["root","paper"]);function WF(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function XF(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function ZF(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function fT(e){return typeof e=="function"?e():e}const oae=e=>{const{classes:t}=e;return er({root:["root"],paper:["paper"]},rae,t)},sae=Mn(f6,{name:"MuiPopover",slot:"Root"})({}),p6=Mn(Kg,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),aae=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiPopover"}),{action:u,anchorEl:f,anchorOrigin:y={vertical:"top",horizontal:"left"},anchorPosition:r,anchorReference:S="anchorEl",children:A,className:R,container:O,elevation:z=8,marginThreshold:N=16,open:U,PaperProps:H={},slots:K={},slotProps:W={},transformOrigin:re={vertical:"top",horizontal:"left"},TransitionComponent:ne,transitionDuration:se="auto",TransitionProps:ue={},disableScrollLock:pe=!1,...Ce}=a,Le=ee.useRef(),qe={...a,anchorOrigin:y,anchorReference:S,elevation:z,marginThreshold:N,transformOrigin:re,TransitionComponent:ne,transitionDuration:se,TransitionProps:ue},ye=oae(qe),Xe=ee.useCallback(()=>{if(S==="anchorPosition")return r;const On=fT(f),oi=(On&&On.nodeType===1?On:sl(Le.current).body).getBoundingClientRect();return{top:oi.top+WF(oi,y.vertical),left:oi.left+XF(oi,y.horizontal)}},[f,y.horizontal,y.vertical,r,S]),ut=ee.useCallback(On=>({vertical:WF(On,re.vertical),horizontal:XF(On,re.horizontal)}),[re.horizontal,re.vertical]),et=ee.useCallback(On=>{const ai={width:On.offsetWidth,height:On.offsetHeight},oi=ut(ai);if(S==="none")return{top:null,left:null,transformOrigin:ZF(oi)};const Ln=Xe();let zn=Ln.top-oi.vertical,hi=Ln.left-oi.horizontal;const fi=zn+ai.height,ci=hi+ai.width,Pi=bu(fT(f)),ii=Pi.innerHeight-N,pi=Pi.innerWidth-N;if(N!==null&&zn<N){const yi=zn-N;zn-=yi,oi.vertical+=yi}else if(N!==null&&fi>ii){const yi=fi-ii;zn-=yi,oi.vertical+=yi}if(N!==null&&hi<N){const yi=hi-N;hi-=yi,oi.horizontal+=yi}else if(ci>pi){const yi=ci-pi;hi-=yi,oi.horizontal+=yi}return{top:`${Math.round(zn)}px`,left:`${Math.round(hi)}px`,transformOrigin:ZF(oi)}},[f,S,Xe,ut,N]),[ot,mt]=ee.useState(U),$e=ee.useCallback(()=>{const On=Le.current;if(!On)return;const ai=et(On);ai.top!==null&&On.style.setProperty("top",ai.top),ai.left!==null&&(On.style.left=ai.left),On.style.transformOrigin=ai.transformOrigin,mt(!0)},[et]);ee.useEffect(()=>(pe&&window.addEventListener("scroll",$e),()=>window.removeEventListener("scroll",$e)),[f,pe,$e]);const it=()=>{$e()},Tt=()=>{mt(!1)};ee.useEffect(()=>{U&&$e()}),ee.useImperativeHandle(u,()=>U?{updatePosition:()=>{$e()}}:null,[U,$e]),ee.useEffect(()=>{if(!U)return;const On=_w(()=>{$e()}),ai=bu(fT(f));return ai.addEventListener("resize",On),()=>{On.clear(),ai.removeEventListener("resize",On)}},[f,U,$e]);let xt=se;const je={slots:{transition:ne,...K},slotProps:{transition:ue,paper:H,...W}},[ht,Bt]=Fr("transition",{elementType:V1,externalForwardedProps:je,ownerState:qe,getSlotProps:On=>({...On,onEntering:(ai,oi)=>{var Ln;(Ln=On.onEntering)==null||Ln.call(On,ai,oi),it()},onExited:ai=>{var oi;(oi=On.onExited)==null||oi.call(On,ai),Tt()}}),additionalProps:{appear:!0,in:U}});se==="auto"&&!ht.muiSupportAuto&&(xt=void 0);const Ft=O||(f?sl(fT(f)).body:void 0),[on,{slots:en,slotProps:jt,...Rn}]=Fr("root",{ref:n,elementType:sae,externalForwardedProps:{...je,...Ce},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:K.backdrop},slotProps:{backdrop:fU(typeof W.backdrop=="function"?W.backdrop(qe):W.backdrop,{invisible:!0})},container:Ft,open:U},ownerState:qe,className:si(ye.root,R)}),[Vn,Hn]=Fr("paper",{ref:Le,className:ye.paper,elementType:p6,externalForwardedProps:je,shouldForwardComponentProp:!0,additionalProps:{elevation:z,style:ot?void 0:{opacity:0}},ownerState:qe});return te.jsx(on,{...Rn,...!N1(on)&&{slots:en,slotProps:jt,disableScrollLock:pe},children:te.jsx(ht,{...Bt,timeout:xt,children:te.jsx(Vn,{...Hn,children:A})})})});function lae(e){return tr("MuiMenu",e)}or("MuiMenu",["root","paper","list"]);const cae={vertical:"top",horizontal:"right"},uae={vertical:"top",horizontal:"left"},hae=e=>{const{classes:t}=e;return er({root:["root"],paper:["paper"],list:["list"]},lae,t)},dae=Mn(aae,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),fae=Mn(p6,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),pae=Mn(Lse,{name:"MuiMenu",slot:"List"})({outline:0}),yO=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiMenu"}),{autoFocus:u=!0,children:f,className:y,disableAutoFocusItem:r=!1,MenuListProps:S={},onClose:A,open:R,PaperProps:O={},PopoverClasses:z,transitionDuration:N="auto",TransitionProps:{onEntering:U,...H}={},variant:K="selectedMenu",slots:W={},slotProps:re={},...ne}=a,se=uv(),ue={...a,autoFocus:u,disableAutoFocusItem:r,MenuListProps:S,onEntering:U,PaperProps:O,transitionDuration:N,TransitionProps:H,variant:K},pe=hae(ue),Ce=u&&!r&&R,Le=ee.useRef(null),qe=(xt,je)=>{Le.current&&Le.current.adjustStyleForScrollbar(xt,{direction:se?"rtl":"ltr"}),U&&U(xt,je)},ye=xt=>{xt.key==="Tab"&&(xt.preventDefault(),A&&A(xt,"tabKeyDown"))};let Xe=-1;ee.Children.map(f,(xt,je)=>{ee.isValidElement(xt)&&(xt.props.disabled||(K==="selectedMenu"&&xt.props.selected||Xe===-1)&&(Xe=je))});const ut={slots:W,slotProps:{list:S,transition:H,paper:O,...re}},et=K_({elementType:W.root,externalSlotProps:re.root,ownerState:ue,className:[pe.root,y]}),[ot,mt]=Fr("paper",{className:pe.paper,elementType:fae,externalForwardedProps:ut,shouldForwardComponentProp:!0,ownerState:ue}),[$e,it]=Fr("list",{className:si(pe.list,S.className),elementType:pae,shouldForwardComponentProp:!0,externalForwardedProps:ut,getSlotProps:xt=>({...xt,onKeyDown:je=>{var ht;ye(je),(ht=xt.onKeyDown)==null||ht.call(xt,je)}}),ownerState:ue}),Tt=typeof ut.slotProps.transition=="function"?ut.slotProps.transition(ue):ut.slotProps.transition;return te.jsx(dae,{onClose:A,anchorOrigin:{vertical:"bottom",horizontal:se?"right":"left"},transformOrigin:se?cae:uae,slots:{root:W.root,paper:ot,backdrop:W.backdrop,...W.transition&&{transition:W.transition}},slotProps:{root:et,paper:mt,backdrop:typeof re.backdrop=="function"?re.backdrop(ue):re.backdrop,transition:{...Tt,onEntering:(...xt)=>{var je;qe(...xt),(je=Tt==null?void 0:Tt.onEntering)==null||je.call(Tt,...xt)}}},open:R,ref:n,transitionDuration:N,ownerState:ue,...ne,classes:z,children:te.jsx($e,{actions:Le,autoFocus:u&&(Xe===-1||r),autoFocusItem:Ce,variant:K,...it,children:f})})});function mae(e){return tr("MuiNativeSelect",e)}const _O=or("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),gae=e=>{const{classes:t,variant:n,disabled:a,multiple:u,open:f,error:y}=e,r={select:["select",n,a&&"disabled",u&&"multiple",y&&"error"],icon:["icon",`icon${Bn(n)}`,f&&"iconOpen",a&&"disabled"]};return er(r,mae,t)},m6=Mn("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${_O.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),yae=Mn(m6,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:kc,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${_O.multiple}`]:t.multiple}]}})({}),g6=Mn("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${_O.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),_ae=Mn(g6,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Bn(n.variant)}`],n.open&&t.iconOpen]}})({}),vae=ee.forwardRef(function(t,n){const{className:a,disabled:u,error:f,IconComponent:y,inputRef:r,variant:S="standard",...A}=t,R={...t,disabled:u,variant:S,error:f},O=gae(R);return te.jsxs(ee.Fragment,{children:[te.jsx(yae,{ownerState:R,className:si(O.select,a),disabled:u,ref:r||n,...A}),t.multiple?null:te.jsx(_ae,{as:y,ownerState:R,className:O.icon})]})});function y6(e){return tr("MuiSelect",e)}const Zb=or("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var YF;const xae=Mn(m6,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Zb.select}`]:t.select},{[`&.${Zb.select}`]:t[n.variant]},{[`&.${Zb.error}`]:t.error},{[`&.${Zb.multiple}`]:t.multiple}]}})({[`&.${Zb.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),bae=Mn(g6,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Bn(n.variant)}`],n.open&&t.iconOpen]}})({}),wae=Mn("input",{shouldForwardProp:e=>Gj(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function KF(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Sae(e){return e==null||typeof e=="string"&&!e.trim()}const Tae=e=>{const{classes:t,variant:n,disabled:a,multiple:u,open:f,error:y}=e,r={select:["select",n,a&&"disabled",u&&"multiple",y&&"error"],icon:["icon",`icon${Bn(n)}`,f&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return er(r,y6,t)},Eae=ee.forwardRef(function(t,n){var Qi;const{"aria-describedby":a,"aria-label":u,autoFocus:f,autoWidth:y,children:r,className:S,defaultOpen:A,defaultValue:R,disabled:O,displayEmpty:z,error:N=!1,IconComponent:U,inputRef:H,labelId:K,MenuProps:W={},multiple:re,name:ne,onBlur:se,onChange:ue,onClose:pe,onFocus:Ce,onOpen:Le,open:qe,readOnly:ye,renderValue:Xe,required:ut,SelectDisplayProps:et={},tabIndex:ot,type:mt,value:$e,variant:it="standard",...Tt}=t,[xt,je]=RI({controlled:$e,default:R,name:"Select"}),[ht,Bt]=RI({controlled:qe,default:A,name:"Select"}),Ft=ee.useRef(null),on=ee.useRef(null),[en,jt]=ee.useState(null),{current:Rn}=ee.useRef(qe!=null),[Vn,Hn]=ee.useState(),On=as(n,H),ai=ee.useCallback(li=>{on.current=li,li&&jt(li)},[]),oi=en==null?void 0:en.parentNode;ee.useImperativeHandle(On,()=>({focus:()=>{on.current.focus()},node:Ft.current,value:xt}),[xt]),ee.useEffect(()=>{A&&ht&&en&&!Rn&&(Hn(y?null:oi.clientWidth),on.current.focus())},[en,y]),ee.useEffect(()=>{f&&on.current.focus()},[f]),ee.useEffect(()=>{if(!K)return;const li=sl(on.current).getElementById(K);if(li){const hr=()=>{getSelection().isCollapsed&&on.current.focus()};return li.addEventListener("click",hr),()=>{li.removeEventListener("click",hr)}}},[K]);const Ln=(li,hr)=>{li?Le&&Le(hr):pe&&pe(hr),Rn||(Hn(y?null:oi.clientWidth),Bt(li))},zn=li=>{li.button===0&&(li.preventDefault(),on.current.focus(),Ln(!0,li))},hi=li=>{Ln(!1,li)},fi=ee.Children.toArray(r),ci=li=>{const hr=fi.find(Wr=>Wr.props.value===li.target.value);hr!==void 0&&(je(hr.props.value),ue&&ue(li,hr))},Pi=li=>hr=>{let Wr;if(hr.currentTarget.hasAttribute("tabindex")){if(re){Wr=Array.isArray(xt)?xt.slice():[];const Vi=xt.indexOf(li.props.value);Vi===-1?Wr.push(li.props.value):Wr.splice(Vi,1)}else Wr=li.props.value;if(li.props.onClick&&li.props.onClick(hr),xt!==Wr&&(je(Wr),ue)){const Vi=hr.nativeEvent||hr,ko=new Vi.constructor(Vi.type,Vi);Object.defineProperty(ko,"target",{writable:!0,value:{value:Wr,name:ne}}),ue(ko,li)}re||Ln(!1,hr)}},ii=li=>{ye||[" ","ArrowUp","ArrowDown","Enter"].includes(li.key)&&(li.preventDefault(),Ln(!0,li))},pi=en!==null&&ht,yi=li=>{!pi&&se&&(Object.defineProperty(li,"target",{writable:!0,value:{value:xt,name:ne}}),se(li))};delete Tt["aria-invalid"];let dt,Cn;const wn=[];let In=!1;(RE({value:xt})||z)&&(Xe?dt=Xe(xt):In=!0);const qn=fi.map(li=>{if(!ee.isValidElement(li))return null;let hr;if(re){if(!Array.isArray(xt))throw new Error(Sm(2));hr=xt.some(Wr=>KF(Wr,li.props.value)),hr&&In&&wn.push(li.props.children)}else hr=KF(xt,li.props.value),hr&&In&&(Cn=li.props.children);return ee.cloneElement(li,{"aria-selected":hr?"true":"false",onClick:Pi(li),onKeyUp:Wr=>{Wr.key===" "&&Wr.preventDefault(),li.props.onKeyUp&&li.props.onKeyUp(Wr)},role:"option",selected:hr,value:void 0,"data-value":li.props.value})});In&&(re?wn.length===0?dt=null:dt=wn.reduce((li,hr,Wr)=>(li.push(hr),Wr<wn.length-1&&li.push(", "),li),[]):dt=Cn);let Xn=Vn;!y&&Rn&&en&&(Xn=oi.clientWidth);let Ni;typeof ot<"u"?Ni=ot:Ni=O?null:0;const Mi=et.id||(ne?`mui-component-select-${ne}`:void 0),pr={...t,variant:it,value:xt,open:pi,error:N},Nn=Tae(pr),qr={...W.PaperProps,...(Qi=W.slotProps)==null?void 0:Qi.paper},mr=bw();return te.jsxs(ee.Fragment,{children:[te.jsx(xae,{as:"div",ref:ai,tabIndex:Ni,role:"combobox","aria-controls":pi?mr:void 0,"aria-disabled":O?"true":void 0,"aria-expanded":pi?"true":"false","aria-haspopup":"listbox","aria-label":u,"aria-labelledby":[K,Mi].filter(Boolean).join(" ")||void 0,"aria-describedby":a,"aria-required":ut?"true":void 0,"aria-invalid":N?"true":void 0,onKeyDown:ii,onMouseDown:O||ye?null:zn,onBlur:yi,onFocus:Ce,...et,ownerState:pr,className:si(et.className,Nn.select,S),id:Mi,children:Sae(dt)?YF||(YF=te.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):dt}),te.jsx(wae,{"aria-invalid":N,value:Array.isArray(xt)?xt.join(","):xt,name:ne,ref:Ft,"aria-hidden":!0,onChange:ci,tabIndex:-1,disabled:O,className:Nn.nativeInput,autoFocus:f,required:ut,...Tt,ownerState:pr}),te.jsx(bae,{as:U,className:Nn.icon,ownerState:pr}),te.jsx(yO,{id:`menu-${ne||""}`,anchorEl:oi,open:pi,onClose:hi,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...W,slotProps:{...W.slotProps,list:{"aria-labelledby":K,role:"listbox","aria-multiselectable":re?"true":void 0,disableListWrap:!0,id:mr,...W.MenuListProps},paper:{...qr,style:{minWidth:Xn,...qr!=null?qr.style:null}}},children:qn})]})}),Cae=cc(te.jsx("path",{d:"M7 10l5 5 5-5z"})),Aae=e=>{const{classes:t}=e,a=er({root:["root"]},y6,t);return{...t,...a}},vO={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>kc(e)&&e!=="variant"},Mae=Mn(mO,vO)(""),Rae=Mn(N_,vO)(""),Iae=Mn(gO,vO)(""),WE=ee.forwardRef(function(t,n){const a=nr({name:"MuiSelect",props:t}),{autoWidth:u=!1,children:f,classes:y={},className:r,defaultOpen:S=!1,displayEmpty:A=!1,IconComponent:R=Cae,id:O,input:z,inputProps:N,label:U,labelId:H,MenuProps:K,multiple:W=!1,native:re=!1,onClose:ne,onOpen:se,open:ue,renderValue:pe,SelectDisplayProps:Ce,variant:Le="outlined",...qe}=a,ye=re?vae:Eae,Xe=yx(),ut=_x({props:a,muiFormControl:Xe,states:["variant","error"]}),et=ut.variant||Le,ot={...a,variant:et,classes:y},mt=Aae(ot),{root:$e,...it}=mt,Tt=z||{standard:te.jsx(Mae,{ownerState:ot}),outlined:te.jsx(Rae,{label:U,ownerState:ot}),filled:te.jsx(Iae,{ownerState:ot})}[et],xt=as(n,Pm(Tt));return te.jsx(ee.Fragment,{children:ee.cloneElement(Tt,{inputComponent:ye,inputProps:{children:f,error:ut.error,IconComponent:R,variant:et,type:void 0,multiple:W,...re?{id:O}:{autoWidth:u,defaultOpen:S,displayEmpty:A,labelId:H,MenuProps:K,onClose:ne,onOpen:se,open:ue,renderValue:pe,SelectDisplayProps:{id:O,...Ce}},...N,classes:N?Va(it,N.classes):it,...z?z.props.inputProps:{}},...(W&&re||A)&&et==="outlined"?{notched:!0}:{},ref:xt,className:si(Tt.props.className,r,mt.root),...!z&&{variant:et},...qe})})});WE.muiName="Select";function Pae(e){return tr("MuiTextField",e)}or("MuiTextField",["root"]);const Dae={standard:mO,filled:gO,outlined:N_},Oae=e=>{const{classes:t}=e;return er({root:["root"]},Pae,t)},Lae=Mn($_,{name:"MuiTextField",slot:"Root"})({}),kae=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiTextField"}),{autoComplete:u,autoFocus:f=!1,children:y,className:r,color:S="primary",defaultValue:A,disabled:R=!1,error:O=!1,FormHelperTextProps:z,fullWidth:N=!1,helperText:U,id:H,InputLabelProps:K,inputProps:W,InputProps:re,inputRef:ne,label:se,maxRows:ue,minRows:pe,multiline:Ce=!1,name:Le,onBlur:qe,onChange:ye,onFocus:Xe,placeholder:ut,required:et=!1,rows:ot,select:mt=!1,SelectProps:$e,slots:it={},slotProps:Tt={},type:xt,value:je,variant:ht="outlined",...Bt}=a,Ft={...a,autoFocus:f,color:S,disabled:R,error:O,fullWidth:N,multiline:Ce,required:et,select:mt,variant:ht},on=Oae(Ft),en=bw(H),jt=U&&en?`${en}-helper-text`:void 0,Rn=se&&en?`${en}-label`:void 0,Vn=Dae[ht],Hn={slots:it,slotProps:{input:re,inputLabel:K,htmlInput:W,formHelperText:z,select:$e,...Tt}},On={},ai=Hn.slotProps.inputLabel;ht==="outlined"&&(ai&&typeof ai.shrink<"u"&&(On.notched=ai.shrink),On.label=se),mt&&((!$e||!$e.native)&&(On.id=void 0),On["aria-describedby"]=void 0);const[oi,Ln]=Fr("root",{elementType:Lae,shouldForwardComponentProp:!0,externalForwardedProps:{...Hn,...Bt},ownerState:Ft,className:si(on.root,r),ref:n,additionalProps:{disabled:R,error:O,fullWidth:N,required:et,color:S,variant:ht}}),[zn,hi]=Fr("input",{elementType:Vn,externalForwardedProps:Hn,additionalProps:On,ownerState:Ft}),[fi,ci]=Fr("inputLabel",{elementType:T1,externalForwardedProps:Hn,ownerState:Ft}),[Pi,ii]=Fr("htmlInput",{elementType:"input",externalForwardedProps:Hn,ownerState:Ft}),[pi,yi]=Fr("formHelperText",{elementType:Ose,externalForwardedProps:Hn,ownerState:Ft}),[dt,Cn]=Fr("select",{elementType:WE,externalForwardedProps:Hn,ownerState:Ft}),wn=te.jsx(zn,{"aria-describedby":jt,autoComplete:u,autoFocus:f,defaultValue:A,fullWidth:N,multiline:Ce,name:Le,rows:ot,maxRows:ue,minRows:pe,type:xt,value:je,id:en,inputRef:ne,onBlur:qe,onChange:ye,onFocus:Xe,placeholder:ut,inputProps:ii,slots:{input:it.htmlInput?Pi:void 0},...hi});return te.jsxs(oi,{...Ln,children:[se!=null&&se!==""&&te.jsx(fi,{htmlFor:en,id:Rn,...ci,children:se}),mt?te.jsx(dt,{"aria-describedby":jt,id:en,labelId:Rn,value:je,input:wn,...Cn,children:y}):wn,U&&te.jsx(pi,{id:jt,...yi,children:U})]})});function zae(e){return tr("MuiListItem",e)}or("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Bae(e){return tr("MuiListItemSecondaryAction",e)}or("MuiListItemSecondaryAction",["root","disableGutters"]);const Fae=e=>{const{disableGutters:t,classes:n}=e;return er({root:["root",t&&"disableGutters"]},Bae,n)},Nae=Mn("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),_6=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiListItemSecondaryAction"}),{className:u,...f}=a,y=ee.useContext(vh),r={...a,disableGutters:y.disableGutters},S=Fae(r);return te.jsx(Nae,{className:si(S.root,u),ownerState:r,ref:n,...f})});_6.muiName="ListItemSecondaryAction";const jae=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},Uae=e=>{const{alignItems:t,classes:n,dense:a,disableGutters:u,disablePadding:f,divider:y,hasSecondaryAction:r}=e;return er({root:["root",a&&"dense",!u&&"gutters",!f&&"padding",y&&"divider",t==="flex-start"&&"alignItemsFlexStart",r&&"secondaryAction"],container:["container"]},zae,n)},Vae=Mn("div",{name:"MuiListItem",slot:"Root",overridesResolver:jae})(Tr(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${z0.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),$ae=Mn("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Hae=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiListItem"}),{alignItems:u="center",children:f,className:y,component:r,components:S={},componentsProps:A={},ContainerComponent:R="li",ContainerProps:{className:O,...z}={},dense:N=!1,disableGutters:U=!1,disablePadding:H=!1,divider:K=!1,secondaryAction:W,slotProps:re={},slots:ne={},...se}=a,ue=ee.useContext(vh),pe=ee.useMemo(()=>({dense:N||ue.dense||!1,alignItems:u,disableGutters:U}),[u,ue.dense,N,U]),Ce=ee.useRef(null),Le=ee.Children.toArray(f),qe=Le.length&&m1(Le[Le.length-1],["ListItemSecondaryAction"]),ye={...a,alignItems:u,dense:pe.dense,disableGutters:U,disablePadding:H,divider:K,hasSecondaryAction:qe},Xe=Uae(ye),ut=as(Ce,n),et=ne.root||S.Root||Vae,ot=re.root||A.root||{},mt={className:si(Xe.root,ot.className,y),...se};let $e=r||"li";return qe?($e=!mt.component&&!r?"div":$e,R==="li"&&($e==="li"?$e="div":mt.component==="li"&&(mt.component="div")),te.jsx(vh.Provider,{value:pe,children:te.jsxs($ae,{as:R,className:si(Xe.container,O),ref:ut,ownerState:ye,...z,children:[te.jsx(et,{...ot,...!N1(et)&&{as:$e,ownerState:{...ye,...ot.ownerState}},...mt,children:Le}),Le.pop()]})})):te.jsx(vh.Provider,{value:pe,children:te.jsxs(et,{...ot,as:$e,ref:ut,...!N1(et)&&{ownerState:{...ye,...ot.ownerState}},...mt,children:[Le,W&&te.jsx(_6,{children:W})]})})});function Gae(e){return tr("MuiListItemAvatar",e)}or("MuiListItemAvatar",["root","alignItemsFlexStart"]);const qae=e=>{const{alignItems:t,classes:n}=e;return er({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Gae,n)},Wae=Mn("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),Xae=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiListItemAvatar"}),{className:u,...f}=a,y=ee.useContext(vh),r={...a,alignItems:y.alignItems},S=qae(r);return te.jsx(Wae,{className:si(S.root,u),ownerState:r,ref:n,...f})});Ui.node;var lR={exports:{}},cR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JF;function Zae(){if(JF)return cR;JF=1;var e=Ch();function t(O,z){return O===z&&(O!==0||1/O===1/z)||O!==O&&z!==z}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,u=e.useEffect,f=e.useLayoutEffect,y=e.useDebugValue;function r(O,z){var N=z(),U=a({inst:{value:N,getSnapshot:z}}),H=U[0].inst,K=U[1];return f(function(){H.value=N,H.getSnapshot=z,S(H)&&K({inst:H})},[O,N,z]),u(function(){return S(H)&&K({inst:H}),O(function(){S(H)&&K({inst:H})})},[O]),y(N),N}function S(O){var z=O.getSnapshot;O=O.value;try{var N=z();return!n(O,N)}catch{return!0}}function A(O,z){return z()}var R=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A:r;return cR.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:R,cR}var QF;function Yae(){return QF||(QF=1,lR.exports=Zae()),lR.exports}var Kae=Yae();const v6=0,x6=1,b6=2,e5=3;var t5=Object.prototype.hasOwnProperty;function sP(e,t){var n,a;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((a=e.length)===t.length)for(;a--&&sP(e[a],t[a]););return a===-1}if(!n||typeof e=="object"){a=0;for(n in e)if(t5.call(e,n)&&++a&&!t5.call(t,n)||!(n in t)||!sP(e[n],t[n]))return!1;return Object.keys(t).length===a}}return e!==e&&t!==t}const gm=new WeakMap,Og=()=>{},oc=Og(),aP=Object,vo=e=>e===oc,Bf=e=>typeof e=="function",qg=(e,t)=>({...e,...t}),w6=e=>Bf(e.then),uR={},pT={},xO="undefined",Mw=typeof window!=xO,lP=typeof document!=xO,Jae=Mw&&"Deno"in window,Qae=()=>Mw&&typeof window.requestAnimationFrame!=xO,S6=(e,t)=>{const n=gm.get(e);return[()=>!vo(t)&&e.get(t)||uR,a=>{if(!vo(t)){const u=e.get(t);t in pT||(pT[t]=u),n[5](t,qg(u,a),u||uR)}},n[6],()=>!vo(t)&&t in pT?pT[t]:!vo(t)&&e.get(t)||uR]};let cP=!0;const ele=()=>cP,[uP,hP]=Mw&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Og,Og],tle=()=>{const e=lP&&document.visibilityState;return vo(e)||e!=="hidden"},nle=e=>(lP&&document.addEventListener("visibilitychange",e),uP("focus",e),()=>{lP&&document.removeEventListener("visibilitychange",e),hP("focus",e)}),ile=e=>{const t=()=>{cP=!0,e()},n=()=>{cP=!1};return uP("online",t),uP("offline",n),()=>{hP("online",t),hP("offline",n)}},rle={isOnline:ele,isVisible:tle},ole={initFocus:nle,initReconnect:ile},n5=!Or.useId,ew=!Mw||Jae,sle=e=>Qae()?window.requestAnimationFrame(e):setTimeout(e,1),hR=ew?ee.useEffect:ee.useLayoutEffect,dR=typeof navigator<"u"&&navigator.connection,i5=!ew&&dR&&(["slow-2g","2g"].includes(dR.effectiveType)||dR.saveData),mT=new WeakMap,fR=(e,t)=>aP.prototype.toString.call(e)===`[object ${t}]`;let ale=0;const dP=e=>{const t=typeof e,n=fR(e,"Date"),a=fR(e,"RegExp"),u=fR(e,"Object");let f,y;if(aP(e)===e&&!n&&!a){if(f=mT.get(e),f)return f;if(f=++ale+"~",mT.set(e,f),Array.isArray(e)){for(f="@",y=0;y<e.length;y++)f+=dP(e[y])+",";mT.set(e,f)}if(u){f="#";const r=aP.keys(e).sort();for(;!vo(y=r.pop());)vo(e[y])||(f+=y+":"+dP(e[y])+",");mT.set(e,f)}}else f=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return f},bO=e=>{if(Bf(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?dP(e):"",[e,t]};let lle=0;const fP=()=>++lle;async function T6(...e){const[t,n,a,u]=e,f=qg({populateCache:!0,throwOnError:!0},typeof u=="boolean"?{revalidate:u}:u||{});let y=f.populateCache;const r=f.rollbackOnError;let S=f.optimisticData;const A=z=>typeof r=="function"?r(z):r!==!1,R=f.throwOnError;if(Bf(n)){const z=n,N=[],U=t.keys();for(const H of U)!/^\$(inf|sub)\$/.test(H)&&z(t.get(H)._k)&&N.push(H);return Promise.all(N.map(O))}return O(n);async function O(z){const[N]=bO(z);if(!N)return;const[U,H]=S6(t,N),[K,W,re,ne]=gm.get(t),se=()=>{const et=K[N];return(Bf(f.revalidate)?f.revalidate(U().data,z):f.revalidate!==!1)&&(delete re[N],delete ne[N],et&&et[0])?et[0](b6).then(()=>U().data):U().data};if(e.length<3)return se();let ue=a,pe;const Ce=fP();W[N]=[Ce,0];const Le=!vo(S),qe=U(),ye=qe.data,Xe=qe._c,ut=vo(Xe)?ye:Xe;if(Le&&(S=Bf(S)?S(ut,ye):S,H({data:S,_c:ut})),Bf(ue))try{ue=ue(ut)}catch(et){pe=et}if(ue&&w6(ue))if(ue=await ue.catch(et=>{pe=et}),Ce!==W[N][0]){if(pe)throw pe;return ue}else pe&&Le&&A(pe)&&(y=!0,H({data:ut,_c:oc}));if(y&&!pe)if(Bf(y)){const et=y(ue,ut);H({data:et,error:oc,_c:oc})}else H({data:ue,error:oc,_c:oc});if(W[N][1]=fP(),Promise.resolve(se()).then(()=>{H({_c:oc})}),pe){if(R)throw pe;return}return ue}}const r5=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},cle=(e,t)=>{if(!gm.has(e)){const n=qg(ole,t),a=Object.create(null),u=T6.bind(oc,e);let f=Og;const y=Object.create(null),r=(R,O)=>{const z=y[R]||[];return y[R]=z,z.push(O),()=>z.splice(z.indexOf(O),1)},S=(R,O,z)=>{e.set(R,O);const N=y[R];if(N)for(const U of N)U(O,z)},A=()=>{if(!gm.has(e)&&(gm.set(e,[a,Object.create(null),Object.create(null),Object.create(null),u,S,r]),!ew)){const R=n.initFocus(setTimeout.bind(oc,r5.bind(oc,a,v6))),O=n.initReconnect(setTimeout.bind(oc,r5.bind(oc,a,x6)));f=()=>{R&&R(),O&&O(),gm.delete(e)}}};return A(),[e,u,A,f]}return[e,gm.get(e)[4]]},ule=(e,t,n,a,u)=>{const f=n.errorRetryCount,y=u.retryCount,r=~~((Math.random()+.5)*(1<<(y<8?y:8)))*n.errorRetryInterval;!vo(f)&&y>f||setTimeout(a,r,u)},hle=sP,[E6,C6]=cle(new Map),dle=qg({onLoadingSlow:Og,onSuccess:Og,onError:Og,onErrorRetry:ule,onDiscarded:Og,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:i5?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:i5?5e3:3e3,compare:hle,isPaused:()=>!1,cache:E6,mutate:C6,fallback:{}},rle),fle=(e,t)=>{const n=qg(e,t);if(t){const{use:a,fallback:u}=e,{use:f,fallback:y}=t;a&&f&&(n.use=a.concat(f)),u&&y&&(n.fallback=qg(u,y))}return n},ple=ee.createContext({}),mle="$inf$",A6=Mw&&window.__SWR_DEVTOOLS_USE__,gle=A6?window.__SWR_DEVTOOLS_USE__:[],yle=()=>{A6&&(window.__SWR_DEVTOOLS_REACT__=Or)},_le=e=>Bf(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],vle=()=>qg(dle,ee.useContext(ple)),xle=e=>(t,n,a)=>e(t,n&&((...f)=>{const[y]=bO(t),[,,,r]=gm.get(E6);if(y.startsWith(mle))return n(...f);const S=r[y];return vo(S)?n(...f):(delete r[y],S)}),a),ble=gle.concat(xle),wle=e=>function(...n){const a=vle(),[u,f,y]=_le(n),r=fle(a,y);let S=e;const{use:A}=r,R=(A||[]).concat(ble);for(let O=R.length;O--;)S=R[O](S);return S(u,f||r.fetcher||null,r)},Sle=(e,t,n)=>{const a=t[e]||(t[e]=[]);return a.push(n),()=>{const u=a.indexOf(n);u>=0&&(a[u]=a[a.length-1],a.pop())}};yle();const pR=Or.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),mR={dedupe:!0},Tle=(e,t,n)=>{const{cache:a,compare:u,suspense:f,fallbackData:y,revalidateOnMount:r,revalidateIfStale:S,refreshInterval:A,refreshWhenHidden:R,refreshWhenOffline:O,keepPreviousData:z}=n,[N,U,H,K]=gm.get(a),[W,re]=bO(e),ne=ee.useRef(!1),se=ee.useRef(!1),ue=ee.useRef(W),pe=ee.useRef(t),Ce=ee.useRef(n),Le=()=>Ce.current,qe=()=>Le().isVisible()&&Le().isOnline(),[ye,Xe,ut,et]=S6(a,W),ot=ee.useRef({}).current,mt=vo(y)?vo(n.fallback)?oc:n.fallback[W]:y,$e=(Ln,zn)=>{for(const hi in ot){const fi=hi;if(fi==="data"){if(!u(Ln[fi],zn[fi])&&(!vo(Ln[fi])||!u(en,zn[fi])))return!1}else if(zn[fi]!==Ln[fi])return!1}return!0},it=ee.useMemo(()=>{const Ln=!W||!t?!1:vo(r)?Le().isPaused()||f?!1:S!==!1:r,zn=pi=>{const yi=qg(pi);return delete yi._k,Ln?{isValidating:!0,isLoading:!0,...yi}:yi},hi=ye(),fi=et(),ci=zn(hi),Pi=hi===fi?ci:zn(fi);let ii=ci;return[()=>{const pi=zn(ye());return $e(pi,ii)?(ii.data=pi.data,ii.isLoading=pi.isLoading,ii.isValidating=pi.isValidating,ii.error=pi.error,ii):(ii=pi,pi)},()=>Pi]},[a,W]),Tt=Kae.useSyncExternalStore(ee.useCallback(Ln=>ut(W,(zn,hi)=>{$e(hi,zn)||Ln()}),[a,W]),it[0],it[1]),xt=!ne.current,je=N[W]&&N[W].length>0,ht=Tt.data,Bt=vo(ht)?mt&&w6(mt)?pR(mt):mt:ht,Ft=Tt.error,on=ee.useRef(Bt),en=z?vo(ht)?vo(on.current)?Bt:on.current:ht:Bt,jt=je&&!vo(Ft)?!1:xt&&!vo(r)?r:Le().isPaused()?!1:f?vo(Bt)?!1:S:vo(Bt)||S,Rn=!!(W&&t&&xt&&jt),Vn=vo(Tt.isValidating)?Rn:Tt.isValidating,Hn=vo(Tt.isLoading)?Rn:Tt.isLoading,On=ee.useCallback(async Ln=>{const zn=pe.current;if(!W||!zn||se.current||Le().isPaused())return!1;let hi,fi,ci=!0;const Pi=Ln||{},ii=!H[W]||!Pi.dedupe,pi=()=>n5?!se.current&&W===ue.current&&ne.current:W===ue.current,yi={isValidating:!1,isLoading:!1},dt=()=>{Xe(yi)},Cn=()=>{const In=H[W];In&&In[1]===fi&&delete H[W]},wn={isValidating:!0};vo(ye().data)&&(wn.isLoading=!0);try{if(ii&&(Xe(wn),n.loadingTimeout&&vo(ye().data)&&setTimeout(()=>{ci&&pi()&&Le().onLoadingSlow(W,n)},n.loadingTimeout),H[W]=[zn(re),fP()]),[hi,fi]=H[W],hi=await hi,ii&&setTimeout(Cn,n.dedupingInterval),!H[W]||H[W][1]!==fi)return ii&&pi()&&Le().onDiscarded(W),!1;yi.error=oc;const In=U[W];if(!vo(In)&&(fi<=In[0]||fi<=In[1]||In[1]===0))return dt(),ii&&pi()&&Le().onDiscarded(W),!1;const qn=ye().data;yi.data=u(qn,hi)?qn:hi,ii&&pi()&&Le().onSuccess(hi,W,n)}catch(In){Cn();const qn=Le(),{shouldRetryOnError:Xn}=qn;qn.isPaused()||(yi.error=In,ii&&pi()&&(qn.onError(In,W,qn),(Xn===!0||Bf(Xn)&&Xn(In))&&(!Le().revalidateOnFocus||!Le().revalidateOnReconnect||qe())&&qn.onErrorRetry(In,W,qn,Ni=>{const Mi=N[W];Mi&&Mi[0]&&Mi[0](e5,Ni)},{retryCount:(Pi.retryCount||0)+1,dedupe:!0})))}return ci=!1,dt(),!0},[W,a]),ai=ee.useCallback((...Ln)=>T6(a,ue.current,...Ln),[]);if(hR(()=>{pe.current=t,Ce.current=n,vo(ht)||(on.current=ht)}),hR(()=>{if(!W)return;const Ln=On.bind(oc,mR);let zn=0;Le().revalidateOnFocus&&(zn=Date.now()+Le().focusThrottleInterval);const fi=Sle(W,N,(ci,Pi={})=>{if(ci==v6){const ii=Date.now();Le().revalidateOnFocus&&ii>zn&&qe()&&(zn=ii+Le().focusThrottleInterval,Ln())}else if(ci==x6)Le().revalidateOnReconnect&&qe()&&Ln();else{if(ci==b6)return On();if(ci==e5)return On(Pi)}});return se.current=!1,ue.current=W,ne.current=!0,Xe({_k:re}),jt&&(vo(Bt)||ew?Ln():sle(Ln)),()=>{se.current=!0,fi()}},[W]),hR(()=>{let Ln;function zn(){const fi=Bf(A)?A(ye().data):A;fi&&Ln!==-1&&(Ln=setTimeout(hi,fi))}function hi(){!ye().error&&(R||Le().isVisible())&&(O||Le().isOnline())?On(mR).then(zn):zn()}return zn(),()=>{Ln&&(clearTimeout(Ln),Ln=-1)}},[A,R,O,W]),ee.useDebugValue(en),f&&vo(Bt)&&W){if(!n5&&ew)throw new Error("Fallback data is required when using Suspense in SSR.");pe.current=t,Ce.current=n,se.current=!1;const Ln=K[W];if(!vo(Ln)){const zn=ai(Ln);pR(zn)}if(vo(Ft)){const zn=On(mR);vo(en)||(zn.status="fulfilled",zn.value=!0),pR(zn)}else throw Ft}return{mutate:ai,get data(){return ot.data=!0,en},get error(){return ot.error=!0,Ft},get isValidating(){return ot.isValidating=!0,Vn},get isLoading(){return ot.isLoading=!0,Hn}}},Ele=wle(Tle),Cle={openedItem:"dashboard",openedComponent:"buttons",openedHorizontalItem:null,isDashboardDrawerOpened:!1,isComponentDrawerOpened:!0},XE={key:"api/menu",master:"master"};function dv(){const{data:e,isLoading:t}=Ele(XE.key+XE.master,()=>Cle,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return ee.useMemo(()=>({menuMaster:e,menuMasterLoading:t}),[e,t])}function ZE(e){C6(XE.key+XE.master,t=>({...t,isDashboardDrawerOpened:e}),!1)}function Ale(){const e=xs(),t=RC(e.breakpoints.down("md")),{menuMaster:n}=dv();return n.isDashboardDrawerOpened,te.jsxs(te.Fragment,{children:[te.jsx(fr,{sx:{width:t?"auto":228,display:"flex"},children:te.jsx(fr,{component:"span",sx:{display:{xs:"none",md:"block"},flexGrow:1},children:te.jsx(Qj,{})})}),te.jsx(fr,{sx:{flexGrow:1}}),te.jsx(fr,{sx:{flexGrow:1}}),te.jsx(use,{})]})}function Mle(e){return tr("MuiDrawer",e)}or("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const M6=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},Rle=e=>{const{classes:t,anchor:n,variant:a}=e,u={root:["root",`anchor${Bn(n)}`],docked:[(a==="permanent"||a==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Bn(n)}`,a!=="temporary"&&`paperAnchorDocked${Bn(n)}`]};return er(u,Mle,t)},Ile=Mn(f6,{name:"MuiDrawer",slot:"Root",overridesResolver:M6})(Tr(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),Ple=Mn("div",{shouldForwardProp:kc,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:M6})({flex:"0 0 auto"}),Dle=Mn(Kg,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Bn(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Bn(n.anchor)}`]]}})(Tr(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),R6={left:"right",right:"left",top:"down",bottom:"up"};function Ole(e){return["left","right"].includes(e)}function Lle({direction:e},t){return e==="rtl"&&Ole(t)?R6[t]:t}const I6=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiDrawer"}),u=xs(),f=uv(),y={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{anchor:r="left",BackdropProps:S,children:A,className:R,elevation:O=16,hideBackdrop:z=!1,ModalProps:{BackdropProps:N,...U}={},onClose:H,open:K=!1,PaperProps:W={},SlideProps:re,TransitionComponent:ne,transitionDuration:se=y,variant:ue="temporary",slots:pe={},slotProps:Ce={},...Le}=a,qe=ee.useRef(!1);ee.useEffect(()=>{qe.current=!0},[]);const ye=Lle({direction:f?"rtl":"ltr"},r),ut={...a,anchor:r,elevation:O,open:K,variant:ue,...Le},et=Rle(ut),ot={slots:{transition:ne,...pe},slotProps:{paper:W,transition:re,...Ce,backdrop:fU(Ce.backdrop||{...S,...N},{transitionDuration:se})}},[mt,$e]=Fr("root",{ref:n,elementType:Ile,className:si(et.root,et.modal,R),shouldForwardComponentProp:!0,ownerState:ut,externalForwardedProps:{...ot,...Le,...U},additionalProps:{open:K,onClose:H,hideBackdrop:z,slots:{backdrop:ot.slots.backdrop},slotProps:{backdrop:ot.slotProps.backdrop}}}),[it,Tt]=Fr("paper",{elementType:Dle,shouldForwardComponentProp:!0,className:si(et.paper,W.className),ownerState:ut,externalForwardedProps:ot,additionalProps:{elevation:ue==="temporary"?O:0,square:!0}}),[xt,je]=Fr("docked",{elementType:Ple,ref:n,className:si(et.root,et.docked,R),ownerState:ut,externalForwardedProps:ot,additionalProps:Le}),[ht,Bt]=Fr("transition",{elementType:mU,ownerState:ut,externalForwardedProps:ot,additionalProps:{in:K,direction:R6[ye],timeout:se,appear:qe.current}}),Ft=te.jsx(it,{...Tt,children:A});if(ue==="permanent")return te.jsx(xt,{...je,children:Ft});const on=te.jsx(ht,{...Bt,children:Ft});return ue==="persistent"?te.jsx(xt,{...je,children:on}):te.jsx(mt,{...$e,children:on})});var gT={exports:{}},yT={exports:{}};/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function Ff(e){return getComputedStyle(e)}function Ec(e,t){for(var n in t){var a=t[n];typeof a=="number"&&(a=a+"px"),e.style[n]=a}return e}function _T(e){var t=document.createElement("div");return t.className=e,t}var o5=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Lg(e,t){if(!o5)throw new Error("No element matching method supported");return o5.call(e,t)}function H0(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function s5(e,t){return Array.prototype.filter.call(e.children,function(n){return Lg(n,t)})}var sa={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},P6={x:null,y:null};function D6(e,t){var n=e.element.classList,a=sa.state.scrolling(t);n.contains(a)?clearTimeout(P6[t]):n.add(a)}function O6(e,t){P6[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(sa.state.scrolling(t))},e.settings.scrollingThreshold)}function kle(e,t){D6(e,t),O6(e,t)}var Rw=function(t){this.element=t,this.handlers={}},L6={isEmpty:{configurable:!0}};Rw.prototype.bind=function(t,n){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(n),this.element.addEventListener(t,n,!1)};Rw.prototype.unbind=function(t,n){var a=this;this.handlers[t]=this.handlers[t].filter(function(u){return n&&u!==n?!0:(a.element.removeEventListener(t,u,!1),!1)})};Rw.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};L6.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(Rw.prototype,L6);var Tx=function(){this.eventElements=[]};Tx.prototype.eventElement=function(t){var n=this.eventElements.filter(function(a){return a.element===t})[0];return n||(n=new Rw(t),this.eventElements.push(n)),n};Tx.prototype.bind=function(t,n,a){this.eventElement(t).bind(n,a)};Tx.prototype.unbind=function(t,n,a){var u=this.eventElement(t);u.unbind(n,a),u.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(u),1)};Tx.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};Tx.prototype.once=function(t,n,a){var u=this.eventElement(t),f=function(y){u.unbind(n,f),a(y)};u.bind(n,f)};function vT(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function YE(e,t,n,a,u){a===void 0&&(a=!0),u===void 0&&(u=!1);var f;if(t==="top")f=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")f=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");zle(e,n,f,a,u)}function zle(e,t,n,a,u){var f=n[0],y=n[1],r=n[2],S=n[3],A=n[4],R=n[5];a===void 0&&(a=!0),u===void 0&&(u=!1);var O=e.element;e.reach[S]=null,O[r]<1&&(e.reach[S]="start"),O[r]>e[f]-e[y]-1&&(e.reach[S]="end"),t&&(O.dispatchEvent(vT("ps-scroll-"+S)),t<0?O.dispatchEvent(vT("ps-scroll-"+A)):t>0&&O.dispatchEvent(vT("ps-scroll-"+R)),a&&kle(e,S)),e.reach[S]&&(t||u)&&O.dispatchEvent(vT("ps-"+S+"-reach-"+e.reach[S]))}function ys(e){return parseInt(e,10)||0}function Ble(e){return Lg(e,"input,[contenteditable]")||Lg(e,"select,[contenteditable]")||Lg(e,"textarea,[contenteditable]")||Lg(e,"button,[contenteditable]")}function Fle(e){var t=Ff(e);return ys(t.width)+ys(t.paddingLeft)+ys(t.paddingRight)+ys(t.borderLeftWidth)+ys(t.borderRightWidth)}var B0={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Mm(e){var t=e.element,n=Math.floor(t.scrollTop),a=t.getBoundingClientRect();e.containerWidth=Math.floor(a.width),e.containerHeight=Math.floor(a.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(s5(t,sa.element.rail("x")).forEach(function(u){return H0(u)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(s5(t,sa.element.rail("y")).forEach(function(u){return H0(u)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=a5(e,ys(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=ys((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=a5(e,ys(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=ys(n*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),Nle(t,e),e.scrollbarXActive?t.classList.add(sa.state.active("x")):(t.classList.remove(sa.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add(sa.state.active("y")):(t.classList.remove(sa.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function a5(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function Nle(e,t){var n={width:t.railXWidth},a=Math.floor(e.scrollTop);t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-a:n.top=t.scrollbarXTop+a,Ec(t.scrollbarXRail,n);var u={top:a,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?u.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:u.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?u.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:u.left=t.scrollbarYLeft+e.scrollLeft,Ec(t.scrollbarYRail,u),Ec(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),Ec(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function jle(e){e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,a=n>e.scrollbarYTop?1:-1;e.element.scrollTop+=a*e.containerHeight,Mm(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,a=n>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=a*e.containerWidth,Mm(e),t.stopPropagation()})}var xT=null;function Ule(e){l5(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),l5(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function l5(e,t){var n=t[0],a=t[1],u=t[2],f=t[3],y=t[4],r=t[5],S=t[6],A=t[7],R=t[8],O=e.element,z=null,N=null,U=null;function H(re){re.touches&&re.touches[0]&&(re[u]=re.touches[0]["page"+A.toUpperCase()]),xT===y&&(O[S]=z+U*(re[u]-N),D6(e,A),Mm(e),re.stopPropagation(),re.preventDefault())}function K(){O6(e,A),e[R].classList.remove(sa.state.clicking),document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",K),document.removeEventListener("touchmove",H),document.removeEventListener("touchend",K),xT=null}function W(re){xT===null&&(xT=y,z=O[S],re.touches&&(re[u]=re.touches[0]["page"+A.toUpperCase()]),N=re[u],U=(e[a]-e[n])/(e[f]-e[r]),re.touches?(document.addEventListener("touchmove",H,{passive:!1}),document.addEventListener("touchend",K)):(document.addEventListener("mousemove",H),document.addEventListener("mouseup",K)),e[R].classList.add(sa.state.clicking)),re.stopPropagation(),re.cancelable&&re.preventDefault()}e[y].addEventListener("mousedown",W),e[y].addEventListener("touchstart",W)}function Vle(e){var t=e.element,n=function(){return Lg(t,":hover")},a=function(){return Lg(e.scrollbarX,":focus")||Lg(e.scrollbarY,":focus")};function u(f,y){var r=Math.floor(t.scrollTop);if(f===0){if(!e.scrollbarYActive)return!1;if(r===0&&y>0||r>=e.contentHeight-e.containerHeight&&y<0)return!e.settings.wheelPropagation}var S=t.scrollLeft;if(y===0){if(!e.scrollbarXActive)return!1;if(S===0&&f<0||S>=e.contentWidth-e.containerWidth&&f>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(f){if(!(f.isDefaultPrevented&&f.isDefaultPrevented()||f.defaultPrevented)&&!(!n()&&!a())){var y=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(y){if(y.tagName==="IFRAME")y=y.contentDocument.activeElement;else for(;y.shadowRoot;)y=y.shadowRoot.activeElement;if(Ble(y))return}var r=0,S=0;switch(f.which){case 37:f.metaKey?r=-e.contentWidth:f.altKey?r=-e.containerWidth:r=-30;break;case 38:f.metaKey?S=e.contentHeight:f.altKey?S=e.containerHeight:S=30;break;case 39:f.metaKey?r=e.contentWidth:f.altKey?r=e.containerWidth:r=30;break;case 40:f.metaKey?S=-e.contentHeight:f.altKey?S=-e.containerHeight:S=-30;break;case 32:f.shiftKey?S=e.containerHeight:S=-e.containerHeight;break;case 33:S=e.containerHeight;break;case 34:S=-e.containerHeight;break;case 36:S=e.contentHeight;break;case 35:S=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&r!==0||e.settings.suppressScrollY&&S!==0||(t.scrollTop-=S,t.scrollLeft+=r,Mm(e),u(r,S)&&f.preventDefault())}})}function $le(e){var t=e.element;function n(y,r){var S=Math.floor(t.scrollTop),A=t.scrollTop===0,R=S+t.offsetHeight===t.scrollHeight,O=t.scrollLeft===0,z=t.scrollLeft+t.offsetWidth===t.scrollWidth,N;return Math.abs(r)>Math.abs(y)?N=A||R:N=O||z,N?!e.settings.wheelPropagation:!0}function a(y){var r=y.deltaX,S=-1*y.deltaY;return(typeof r>"u"||typeof S>"u")&&(r=-1*y.wheelDeltaX/6,S=y.wheelDeltaY/6),y.deltaMode&&y.deltaMode===1&&(r*=10,S*=10),r!==r&&S!==S&&(r=0,S=y.wheelDelta),y.shiftKey?[-S,-r]:[r,S]}function u(y,r,S){if(!B0.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(y))return!1;for(var A=y;A&&A!==t;){if(A.classList.contains(sa.element.consuming))return!0;var R=Ff(A);if(S&&R.overflowY.match(/(scroll|auto)/)){var O=A.scrollHeight-A.clientHeight;if(O>0&&(A.scrollTop>0&&S<0||A.scrollTop<O&&S>0))return!0}if(r&&R.overflowX.match(/(scroll|auto)/)){var z=A.scrollWidth-A.clientWidth;if(z>0&&(A.scrollLeft>0&&r<0||A.scrollLeft<z&&r>0))return!0}A=A.parentNode}return!1}function f(y){var r=a(y),S=r[0],A=r[1];if(!u(y.target,S,A)){var R=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(A?t.scrollTop-=A*e.settings.wheelSpeed:t.scrollTop+=S*e.settings.wheelSpeed,R=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(S?t.scrollLeft+=S*e.settings.wheelSpeed:t.scrollLeft-=A*e.settings.wheelSpeed,R=!0):(t.scrollTop-=A*e.settings.wheelSpeed,t.scrollLeft+=S*e.settings.wheelSpeed),Mm(e),R=R||n(S,A),R&&!y.ctrlKey&&(y.stopPropagation(),y.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",f):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",f)}function Hle(e){if(!B0.supportsTouch&&!B0.supportsIePointer)return;var t=e.element,n={startOffset:{},startTime:0,speed:{},easingLoop:null};function a(O,z){var N=Math.floor(t.scrollTop),U=t.scrollLeft,H=Math.abs(O),K=Math.abs(z);if(K>H){if(z<0&&N===e.contentHeight-e.containerHeight||z>0&&N===0)return window.scrollY===0&&z>0&&B0.isChrome}else if(H>K&&(O<0&&U===e.contentWidth-e.containerWidth||O>0&&U===0))return!0;return!0}function u(O,z){t.scrollTop-=z,t.scrollLeft-=O,Mm(e)}function f(O){return O.targetTouches?O.targetTouches[0]:O}function y(O){return O.target===e.scrollbarX||O.target===e.scrollbarY||O.pointerType&&O.pointerType==="pen"&&O.buttons===0?!1:!!(O.targetTouches&&O.targetTouches.length===1||O.pointerType&&O.pointerType!=="mouse"&&O.pointerType!==O.MSPOINTER_TYPE_MOUSE)}function r(O){if(y(O)){var z=f(O);n.startOffset.pageX=z.pageX,n.startOffset.pageY=z.pageY,n.startTime=new Date().getTime(),n.easingLoop!==null&&clearInterval(n.easingLoop)}}function S(O,z,N){if(!t.contains(O))return!1;for(var U=O;U&&U!==t;){if(U.classList.contains(sa.element.consuming))return!0;var H=Ff(U);if(N&&H.overflowY.match(/(scroll|auto)/)){var K=U.scrollHeight-U.clientHeight;if(K>0&&(U.scrollTop>0&&N<0||U.scrollTop<K&&N>0))return!0}if(z&&H.overflowX.match(/(scroll|auto)/)){var W=U.scrollWidth-U.clientWidth;if(W>0&&(U.scrollLeft>0&&z<0||U.scrollLeft<W&&z>0))return!0}U=U.parentNode}return!1}function A(O){if(y(O)){var z=f(O),N={pageX:z.pageX,pageY:z.pageY},U=N.pageX-n.startOffset.pageX,H=N.pageY-n.startOffset.pageY;if(S(O.target,U,H))return;u(U,H),n.startOffset=N;var K=new Date().getTime(),W=K-n.startTime;W>0&&(n.speed.x=U/W,n.speed.y=H/W,n.startTime=K),a(U,H)&&O.cancelable&&O.preventDefault()}}function R(){e.settings.swipeEasing&&(clearInterval(n.easingLoop),n.easingLoop=setInterval(function(){if(e.isInitialized){clearInterval(n.easingLoop);return}if(!n.speed.x&&!n.speed.y){clearInterval(n.easingLoop);return}if(Math.abs(n.speed.x)<.01&&Math.abs(n.speed.y)<.01){clearInterval(n.easingLoop);return}u(n.speed.x*30,n.speed.y*30),n.speed.x*=.8,n.speed.y*=.8},10))}B0.supportsTouch?(e.event.bind(t,"touchstart",r),e.event.bind(t,"touchmove",A),e.event.bind(t,"touchend",R)):B0.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",r),e.event.bind(t,"pointermove",A),e.event.bind(t,"pointerup",R)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",r),e.event.bind(t,"MSPointerMove",A),e.event.bind(t,"MSPointerUp",R)))}var Gle=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},qle={"click-rail":jle,"drag-thumb":Ule,keyboard:Vle,wheel:$le,touch:Hle},Iw=function(t,n){var a=this;if(n===void 0&&(n={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add(sa.main),this.settings=Gle();for(var u in n)this.settings[u]=n[u];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var f=function(){return t.classList.add(sa.state.focus)},y=function(){return t.classList.remove(sa.state.focus)};this.isRtl=Ff(t).direction==="rtl",this.isRtl===!0&&t.classList.add(sa.rtl),this.isNegativeScroll=function(){var A=t.scrollLeft,R=null;return t.scrollLeft=-1,R=t.scrollLeft<0,t.scrollLeft=A,R}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new Tx,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=_T(sa.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=_T(sa.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",f),this.event.bind(this.scrollbarX,"blur",y),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var r=Ff(this.scrollbarXRail);this.scrollbarXBottom=parseInt(r.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=ys(r.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=ys(r.borderLeftWidth)+ys(r.borderRightWidth),Ec(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=ys(r.marginLeft)+ys(r.marginRight),Ec(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=_T(sa.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=_T(sa.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",f),this.event.bind(this.scrollbarY,"blur",y),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var S=Ff(this.scrollbarYRail);this.scrollbarYRight=parseInt(S.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=ys(S.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Fle(this.scrollbarY):null,this.railBorderYWidth=ys(S.borderTopWidth)+ys(S.borderBottomWidth),Ec(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=ys(S.marginTop)+ys(S.marginBottom),Ec(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(A){return qle[A](a)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(A){return a.onScroll(A)}),Mm(this)};Iw.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,Ec(this.scrollbarXRail,{display:"block"}),Ec(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=ys(Ff(this.scrollbarXRail).marginLeft)+ys(Ff(this.scrollbarXRail).marginRight),this.railYMarginHeight=ys(Ff(this.scrollbarYRail).marginTop)+ys(Ff(this.scrollbarYRail).marginBottom),Ec(this.scrollbarXRail,{display:"none"}),Ec(this.scrollbarYRail,{display:"none"}),Mm(this),YE(this,"top",0,!1,!0),YE(this,"left",0,!1,!0),Ec(this.scrollbarXRail,{display:""}),Ec(this.scrollbarYRail,{display:""}))};Iw.prototype.onScroll=function(t){this.isAlive&&(Mm(this),YE(this,"top",this.element.scrollTop-this.lastScrollTop),YE(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Iw.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),H0(this.scrollbarX),H0(this.scrollbarY),H0(this.scrollbarXRail),H0(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Iw.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const Wle=Object.freeze(Object.defineProperty({__proto__:null,default:Iw},Symbol.toStringTag,{value:"Module"})),Xle=Pq(Wle);var c5;function Zle(){return c5||(c5=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(K){for(var W=1;W<arguments.length;W++){var re=arguments[W];for(var ne in re)Object.prototype.hasOwnProperty.call(re,ne)&&(K[ne]=re[ne])}return K},a=function(){function K(W,re){for(var ne=0;ne<re.length;ne++){var se=re[ne];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(W,se.key,se)}}return function(W,re,ne){return re&&K(W.prototype,re),ne&&K(W,ne),W}}(),u=Ch(),f=A(u),y=J4(),r=Xle,S=A(r);function A(K){return K&&K.__esModule?K:{default:K}}function R(K,W){var re={};for(var ne in K)W.indexOf(ne)>=0||Object.prototype.hasOwnProperty.call(K,ne)&&(re[ne]=K[ne]);return re}function O(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")}function z(K,W){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:K}function N(K,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);K.prototype=Object.create(W&&W.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(K,W):K.__proto__=W)}var U={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(U);var H=function(K){N(W,K);function W(re){O(this,W);var ne=z(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,re));return ne.handleRef=ne.handleRef.bind(ne),ne._handlerByEvent={},ne}return a(W,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new S.default(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(ne){this._updateEventHook(ne),this.updateScroll(),ne.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var ne=this;Object.keys(this._handlerByEvent).forEach(function(se){var ue=ne._handlerByEvent[se];ue&&ne._container.removeEventListener(se,ue,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var ne=this,se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(U).forEach(function(ue){var pe=ne.props[U[ue]],Ce=se[U[ue]];if(pe!==Ce){if(Ce){var Le=ne._handlerByEvent[ue];ne._container.removeEventListener(ue,Le,!1),ne._handlerByEvent[ue]=null}if(pe){var qe=function(){return pe(ne._container)};ne._container.addEventListener(ue,qe,!1),ne._handlerByEvent[ue]=qe}}})}},{key:"_updateClassName",value:function(){var ne=this.props.className,se=this._container.className.split(" ").filter(function(ue){return ue.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container"+(ne?" "+ne:"")+(se?" "+se:""))}},{key:"updateScroll",value:function(){this.props.onSync(this._ps)}},{key:"handleRef",value:function(ne){this._container=ne,this.props.containerRef(ne)}},{key:"render",value:function(){var ne=this.props;ne.className;var se=ne.style;ne.option,ne.options,ne.containerRef,ne.onScrollY,ne.onScrollX,ne.onScrollUp,ne.onScrollDown,ne.onScrollLeft,ne.onScrollRight,ne.onYReachStart,ne.onYReachEnd,ne.onXReachStart,ne.onXReachEnd;var ue=ne.component;ne.onSync;var pe=ne.children,Ce=R(ne,["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"]),Le=ue;return f.default.createElement(Le,n({style:se,ref:this.handleRef},Ce),pe)}}]),W}(u.Component);t.default=H,H.defaultProps={className:"",style:void 0,option:void 0,options:void 0,containerRef:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,onSync:function(W){return W.update()},component:"div"},H.propTypes={children:y.PropTypes.node.isRequired,className:y.PropTypes.string,style:y.PropTypes.object,option:y.PropTypes.object,options:y.PropTypes.object,containerRef:y.PropTypes.func,onScrollY:y.PropTypes.func,onScrollX:y.PropTypes.func,onScrollUp:y.PropTypes.func,onScrollDown:y.PropTypes.func,onScrollLeft:y.PropTypes.func,onScrollRight:y.PropTypes.func,onYReachStart:y.PropTypes.func,onYReachEnd:y.PropTypes.func,onXReachStart:y.PropTypes.func,onXReachEnd:y.PropTypes.func,onSync:y.PropTypes.func,component:y.PropTypes.string},e.exports=t.default}(yT,yT.exports)),yT.exports}var u5;function Yle(){return u5||(u5=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Zle(),a=u(n);function u(f){return f&&f.__esModule?f:{default:f}}t.default=a.default,e.exports=t.default}(gT,gT.exports)),gT.exports}var Kle=Yle();const Jle=Im(Kle);function Qle(){return xs(),te.jsx(Vg,{sx:{bgcolor:"primary.light",mb:2.75,overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:157,height:157,bgcolor:"primary.200",borderRadius:"50%",top:-105,right:-96}}})}const ece=ee.memo(Qle);Ui.number,Ui.any;function tce(e){return tr("MuiTooltip",e)}const Is=or("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function nce(e){return Math.round(e*1e5)/1e5}const ice=e=>{const{classes:t,disableInteractive:n,arrow:a,touch:u,placement:f}=e,y={popper:["popper",!n&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",u&&"touch",`tooltipPlacement${Bn(f.split("-")[0])}`],arrow:["arrow"]};return er(y,tce,t)},rce=Mn(zC,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(Tr(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${Is.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Is.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Is.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Is.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Is.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Is.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Is.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Is.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),oce=Mn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${Bn(n.placement.split("-")[0])}`]]}})(Tr(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Dr(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${Is.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Is.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Is.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Is.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${nce(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${Is.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Is.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${Is.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Is.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${Is.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Is.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${Is.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Is.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Is.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Is.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),sce=Mn("span",{name:"MuiTooltip",slot:"Arrow"})(Tr(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Dr(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let bT=!1;const h5=new BC;let Yb={x:0,y:0};function wT(e,t){return(n,...a)=>{t&&t(n,...a),e(n,...a)}}const wO=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiTooltip"}),{arrow:u=!1,children:f,classes:y,components:r={},componentsProps:S={},describeChild:A=!1,disableFocusListener:R=!1,disableHoverListener:O=!1,disableInteractive:z=!1,disableTouchListener:N=!1,enterDelay:U=100,enterNextDelay:H=0,enterTouchDelay:K=700,followCursor:W=!1,id:re,leaveDelay:ne=0,leaveTouchDelay:se=1500,onClose:ue,onOpen:pe,open:Ce,placement:Le="bottom",PopperComponent:qe,PopperProps:ye={},slotProps:Xe={},slots:ut={},title:et,TransitionComponent:ot,TransitionProps:mt,...$e}=a,it=ee.isValidElement(f)?f:te.jsx("span",{children:f}),Tt=xs(),xt=uv(),[je,ht]=ee.useState(),[Bt,Ft]=ee.useState(null),on=ee.useRef(!1),en=z||W,jt=k_(),Rn=k_(),Vn=k_(),Hn=k_(),[On,ai]=RI({controlled:Ce,default:!1,name:"Tooltip",state:"open"});let oi=On;const Ln=bw(re),zn=ee.useRef(),hi=_u(()=>{zn.current!==void 0&&(document.body.style.WebkitUserSelect=zn.current,zn.current=void 0),Hn.clear()});ee.useEffect(()=>hi,[hi]);const fi=Gi=>{h5.clear(),bT=!0,ai(!0),pe&&!oi&&pe(Gi)},ci=_u(Gi=>{h5.start(800+ne,()=>{bT=!1}),ai(!1),ue&&oi&&ue(Gi),jt.start(Tt.transitions.duration.shortest,()=>{on.current=!1})}),Pi=Gi=>{on.current&&Gi.type!=="touchstart"||(je&&je.removeAttribute("title"),Rn.clear(),Vn.clear(),U||bT&&H?Rn.start(bT?H:U,()=>{fi(Gi)}):fi(Gi))},ii=Gi=>{Rn.clear(),Vn.start(ne,()=>{ci(Gi)})},[,pi]=ee.useState(!1),yi=Gi=>{ex(Gi.target)||(pi(!1),ii(Gi))},dt=Gi=>{je||ht(Gi.currentTarget),ex(Gi.target)&&(pi(!0),Pi(Gi))},Cn=Gi=>{on.current=!0;const Te=it.props;Te.onTouchStart&&Te.onTouchStart(Gi)},wn=Gi=>{Cn(Gi),Vn.clear(),jt.clear(),hi(),zn.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Hn.start(K,()=>{document.body.style.WebkitUserSelect=zn.current,Pi(Gi)})},In=Gi=>{it.props.onTouchEnd&&it.props.onTouchEnd(Gi),hi(),Vn.start(se,()=>{ci(Gi)})};ee.useEffect(()=>{if(!oi)return;function Gi(Te){Te.key==="Escape"&&ci(Te)}return document.addEventListener("keydown",Gi),()=>{document.removeEventListener("keydown",Gi)}},[ci,oi]);const qn=as(Pm(it),ht,n);!et&&et!==0&&(oi=!1);const Xn=ee.useRef(),Ni=Gi=>{const Te=it.props;Te.onMouseMove&&Te.onMouseMove(Gi),Yb={x:Gi.clientX,y:Gi.clientY},Xn.current&&Xn.current.update()},Mi={},pr=typeof et=="string";A?(Mi.title=!oi&&pr&&!O?et:null,Mi["aria-describedby"]=oi?Ln:null):(Mi["aria-label"]=pr?et:null,Mi["aria-labelledby"]=oi&&!pr?Ln:null);const Nn={...Mi,...$e,...it.props,className:si($e.className,it.props.className),onTouchStart:Cn,ref:qn,...W?{onMouseMove:Ni}:{}},qr={};N||(Nn.onTouchStart=wn,Nn.onTouchEnd=In),O||(Nn.onMouseOver=wT(Pi,Nn.onMouseOver),Nn.onMouseLeave=wT(ii,Nn.onMouseLeave),en||(qr.onMouseOver=Pi,qr.onMouseLeave=ii)),R||(Nn.onFocus=wT(dt,Nn.onFocus),Nn.onBlur=wT(yi,Nn.onBlur),en||(qr.onFocus=dt,qr.onBlur=yi));const mr={...a,isRtl:xt,arrow:u,disableInteractive:en,placement:Le,PopperComponentProp:qe,touch:on.current},Qi=typeof Xe.popper=="function"?Xe.popper(mr):Xe.popper,li=ee.useMemo(()=>{var Te,Y;let Gi=[{name:"arrow",enabled:!!Bt,options:{element:Bt,padding:4}}];return(Te=ye.popperOptions)!=null&&Te.modifiers&&(Gi=Gi.concat(ye.popperOptions.modifiers)),(Y=Qi==null?void 0:Qi.popperOptions)!=null&&Y.modifiers&&(Gi=Gi.concat(Qi.popperOptions.modifiers)),{...ye.popperOptions,...Qi==null?void 0:Qi.popperOptions,modifiers:Gi}},[Bt,ye.popperOptions,Qi==null?void 0:Qi.popperOptions]),hr=ice(mr),Wr=typeof Xe.transition=="function"?Xe.transition(mr):Xe.transition,Vi={slots:{popper:r.Popper,transition:r.Transition??ot,tooltip:r.Tooltip,arrow:r.Arrow,...ut},slotProps:{arrow:Xe.arrow??S.arrow,popper:{...ye,...Qi??S.popper},tooltip:Xe.tooltip??S.tooltip,transition:{...mt,...Wr??S.transition}}},[ko,Ga]=Fr("popper",{elementType:rce,externalForwardedProps:Vi,ownerState:mr,className:si(hr.popper,ye==null?void 0:ye.className)}),[ts,Ds]=Fr("transition",{elementType:V1,externalForwardedProps:Vi,ownerState:mr}),[Bl,ca]=Fr("tooltip",{elementType:oce,className:hr.tooltip,externalForwardedProps:Vi,ownerState:mr}),[Zt,Os]=Fr("arrow",{elementType:sce,className:hr.arrow,externalForwardedProps:Vi,ownerState:mr,ref:Ft});return te.jsxs(ee.Fragment,{children:[ee.cloneElement(it,Nn),te.jsx(ko,{as:qe??zC,placement:Le,anchorEl:W?{getBoundingClientRect:()=>({top:Yb.y,left:Yb.x,right:Yb.x,bottom:Yb.y,width:0,height:0})}:je,popperRef:Xn,open:je?oi:!1,id:Ln,transition:!0,...qr,...Ga,popperOptions:li,children:({TransitionProps:Gi})=>te.jsx(ts,{timeout:Tt.transitions.duration.shorter,...Gi,...Ds,children:te.jsxs(Bl,{...ca,children:[et,u?te.jsx(Zt,{...Os}):null]})})})]})}),k6=cc(te.jsx("circle",{cx:"12",cy:"12",r:"8"}));function qC({item:e,level:t,isParents:n=!1,setSelectedID:a}){const u=xs(),f=RC(u.breakpoints.down("md")),y=ee.useRef(null),{pathname:r}=Ah(),{borderRadius:S}=Sx(),{menuMaster:A}=dv(),R=A.isDashboardDrawerOpened,O=!!_m({path:e!=null&&e.link?e.link:e.url,end:!1},r),[z,N]=ee.useState(!1),U=()=>{const se=y.current&&y.current.scrollWidth>y.current.clientWidth;N(se)};ee.useEffect(()=>{U(),window.addEventListener("resize",U),window.removeEventListener("resize",U)},[]);const H=e==null?void 0:e.icon,K=e!=null&&e.icon?te.jsx(H,{stroke:1.5,size:R?"20px":"24px",style:{...n&&{fontSize:20,stroke:"1.5"}}}):te.jsx(k6,{sx:{width:O?8:6,height:O?8:6},fontSize:t>0?"inherit":"medium"});let W="_self";e.target&&(W="_blank");const re=()=>{f&&ZE(!1),n&&a&&a()},ne="secondary.main";return te.jsx(te.Fragment,{children:te.jsxs(LE,{component:Pg,to:e.url,target:W,disabled:e.disabled,disableRipple:!R,sx:{zIndex:1201,borderRadius:`${S}px`,mb:.5,...R&&t!==1&&{ml:`${t*18}px`},...!R&&{pl:1.25},...R&&t===1&&{"&:hover":{bgcolor:"secondary.light"},"&.Mui-selected":{bgcolor:"secondary.light",color:ne,"&:hover":{color:ne,bgcolor:"secondary.light"}}},...(!R||t!==1)&&{py:t===1?0:1,"&:hover":{bgcolor:"transparent"},"&.Mui-selected":{"&:hover":{bgcolor:"transparent"},bgcolor:"transparent"}}},selected:O,onClick:()=>re(),children:[te.jsx(Wf,{"aria-label":"theme-icon",sx:{borderRadius:`${S}px`},disableRipple:R,children:te.jsx(kE,{sx:{minWidth:t===1?36:18,color:O?ne:"text.primary",...!R&&t===1&&{borderRadius:`${S}px`,width:46,height:46,alignItems:"center",justifyContent:"center","&:hover":{bgcolor:"secondary.light"},...O&&{bgcolor:"secondary.light","&:hover":{bgcolor:"secondary.light"}}}},children:K})}),(R||!R&&t!==1)&&te.jsx(wO,{title:e.title,disableHoverListener:!z,children:te.jsx($1,{primary:te.jsx(Ii,{ref:y,noWrap:!0,variant:O?"h5":"body1",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",width:102},children:e.title}),secondary:e.caption&&te.jsx(Ii,{variant:"caption",gutterBottom:!0,sx:{display:"block",...u.typography.subMenuCaption},children:e.caption})})}),R&&e.chip&&te.jsx(Sw,{color:e.chip.color,variant:e.chip.variant,size:e.chip.size,label:e.chip.label,avatar:e.chip.avatar&&te.jsx(IC,{children:e.chip.avatar})})]})})}qC.propTypes={item:Ui.any,level:Ui.number,isParents:Ui.bool,setSelectedID:Ui.func};function SO({menu:e,level:t,parentId:n}){var ut;const a=xs(),u=ee.useRef(null),{borderRadius:f}=Sx(),{menuMaster:y}=dv(),r=y.isDashboardDrawerOpened,[S,A]=ee.useState(!1),[R,O]=ee.useState(null),[z,N]=ee.useState(null),U=et=>{N(null),r?(A(!S),O(R?null:e.id)):N(et==null?void 0:et.currentTarget)},H=!!z,K=()=>{A(!1),H||e.url||O(null),N(null)},{pathname:W}=Ah(),re=(et,ot)=>{et.forEach(mt=>{mt.url===W&&(A(!0),O(ot))})};ee.useEffect(()=>{A(!1),H?N(null):O(null),e.children&&e.children.forEach(et=>{var ot;(ot=et.children)!=null&&ot.length&&re(et.children,e.id),et.link&&_m({path:et==null?void 0:et.link,end:!1},W)&&(O(e.id),A(!0)),et.url===W&&(O(e.id),A(!0))})},[W,e.children]);const[ne,se]=ee.useState(!1),ue=()=>{const et=u.current&&u.current.scrollWidth>u.current.clientWidth;se(et)};ee.useEffect(()=>{ue(),window.addEventListener("resize",ue),window.removeEventListener("resize",ue)},[]),ee.useEffect(()=>{e.url===W&&(O(e.id),N(null),A(!0))},[W,e]);const pe=(ut=e.children)==null?void 0:ut.map(et=>{switch(et.type){case"collapse":return te.jsx(SO,{menu:et,level:t+1,parentId:n},et.id);case"item":return te.jsx(qC,{item:et,level:t+1},et.id);default:return te.jsx(Ii,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},et.id)}}),Ce=R===e.id,Le=e.icon,qe=e.icon?te.jsx(Le,{strokeWidth:1.5,size:r?"20px":"24px"}):te.jsx(k6,{sx:{width:Ce?8:6,height:Ce?8:6},fontSize:t>0?"inherit":"medium"}),ye=r?te.jsx(YJ,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}):te.jsx(gU,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}),Xe="secondary.main";return te.jsxs(te.Fragment,{children:[te.jsxs(LE,{sx:{zIndex:1201,borderRadius:`${f}px`,mb:.5,...r&&t!==1&&{ml:`${t*18}px`},...!r&&{pl:1.25},...r&&t===1&&{"&:hover":{bgcolor:"secondary.light"},"&.Mui-selected":{bgcolor:"secondary.light",color:Xe,"&:hover":{color:Xe,bgcolor:"secondary.light"}}},...(!r||t!==1)&&{py:t===1?0:1,"&:hover":{bgcolor:"transparent"},"&.Mui-selected":{"&:hover":{bgcolor:"transparent"},bgcolor:"transparent"}}},selected:Ce,...!r&&{onMouseEnter:U,onMouseLeave:K},onClick:U,children:[qe&&te.jsx(kE,{sx:{minWidth:t===1?36:18,color:Ce?Xe:"text.primary",...!r&&t===1&&{borderRadius:`${f}px`,width:46,height:46,alignItems:"center",justifyContent:"center","&:hover":{bgcolor:"secondary.light"},...Ce&&{bgcolor:"secondary.light","&:hover":{bgcolor:"secondary.light"}}}},children:qe}),(r||!r&&t!==1)&&te.jsx(wO,{title:e.title,disableHoverListener:!ne,children:te.jsx($1,{primary:te.jsx(Ii,{ref:u,noWrap:!0,variant:Ce?"h5":"body1",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",width:120},children:e.title}),secondary:e.caption&&te.jsx(Ii,{variant:"caption",gutterBottom:!0,sx:{display:"block",...a.typography.subMenuCaption},children:e.caption})})}),H||S?ye:te.jsx(ZJ,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}),!r&&te.jsx(zC,{open:H,anchorEl:z,placement:"right-start",modifiers:[{name:"offset",options:{offset:[-12,0]}}],sx:{overflow:"visible",zIndex:2001,minWidth:180,"&:before":{content:'""',bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:120,borderLeft:"1px solid",borderBottom:"1px solid",borderColor:"divider"}},children:({TransitionProps:et})=>te.jsx(DD,{in:H,...et,children:te.jsx(Kg,{sx:{overflow:"hidden",mt:1.5,boxShadow:a.shadows[8],backgroundImage:"none"},children:te.jsx(_U,{onClickAway:K,children:te.jsx(fr,{children:pe})})})})})]}),r&&te.jsx(DE,{in:S,timeout:"auto",unmountOnExit:!0,children:S&&te.jsx(vx,{disablePadding:!0,sx:{position:"relative","&:after":{content:"''",position:"absolute",left:"25px",top:0,height:"100%",width:"1px",opacity:1,bgcolor:"primary.light"}},children:pe})})]})}SO.propTypes={menu:Ui.any,level:Ui.number,parentId:Ui.string};function z6({item:e,lastItem:t,remItems:n,lastItemId:a,setSelectedID:u}){var W;const f=xs(),{pathname:y}=Ah(),{menuMaster:r}=dv(),S=r.isDashboardDrawerOpened,[A,R]=ee.useState(null),[O,z]=ee.useState(e),N=!!A;ee.useEffect(()=>{if(t)if(e.id===a){const re={...e},ne=n.map(se=>se.elements);re.children=ne.flat(1),z(re)}else z(e)},[e,t,n,a]);const U=(re,ne)=>{re.forEach(se=>{var ue;(ue=se.children)!=null&&ue.length&&U(se.children,O.id),se!=null&&se.url&&_m({path:se!=null&&se.link?se.link:se.url,end:!0},y)&&u(ne)})},H=re=>{(re.children?re.children:[]).forEach(se=>{var ue;(ue=se==null?void 0:se.children)!=null&&ue.length&&U(se.children,O.id),se!=null&&se.url&&_m({path:se!=null&&se.link?se.link:se.url,end:!0},y)&&u(O.id)}),re!=null&&re.url&&_m({path:re!=null&&re.link?re.link:re.url,end:!0},y)&&u(O.id)};ee.useEffect(()=>{H(O),N&&R(null)},[y,O]);const K=(W=O.children)==null?void 0:W.map(re=>{switch(re==null?void 0:re.type){case"collapse":return te.jsx(SO,{menu:re,level:1,parentId:O.id},re.id);case"item":return te.jsx(qC,{item:re,level:1},re.id);default:return te.jsx(Ii,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},re==null?void 0:re.id)}});return te.jsxs(te.Fragment,{children:[te.jsx(vx,{disablePadding:!S,subheader:O.title&&S&&te.jsxs(Ii,{variant:"caption",gutterBottom:!0,sx:{display:"block",...f.typography.menuCaption},children:[O.title,O.caption&&te.jsx(Ii,{variant:"caption",gutterBottom:!0,sx:{display:"block",...f.typography.subMenuCaption},children:O.caption})]}),children:K}),S&&te.jsx(Pd,{sx:{mt:.25,mb:1.25}})]})}z6.propTypes={item:Ui.any,lastItem:Ui.number,remItems:Ui.array,lastItemId:Ui.string,selectedID:Ui.oneOfType([Ui.any,Ui.string]),setSelectedID:Ui.oneOfType([Ui.any,Ui.func])};const gR={IconTypography:sQ,IconPalette:yU,IconShadow:rQ},ace={id:"utilities",title:"Utilities",type:"group",children:[{id:"util-typography",title:"Typography",type:"item",url:"/typography",icon:gR.IconTypography,breadcrumbs:!1},{id:"util-color",title:"Color",type:"item",url:"/color",icon:gR.IconPalette,breadcrumbs:!1},{id:"util-shadow",title:"Shadow",type:"item",url:"/shadow",icon:gR.IconShadow,breadcrumbs:!1}]},lce={IconBrandChrome:WJ},cce={id:"sample-docs-roadmap",type:"group",children:[{id:"sample-page",title:"Sample Page",type:"item",url:"/sample-page",icon:lce.IconBrandChrome,breadcrumbs:!1}]},d5={IconDroneOff:KJ,IconPalette:yU},uce={id:"superAdminList",type:"group",children:[{id:"Projects",title:"Projects",type:"item",url:"/project",icon:d5.IconDroneOff,breadcrumbs:!1},{id:"files",title:"Files",type:"item",url:"/file",icon:d5.IconPalette,breadcrumbs:!1}]},C1={items:[uce,cce,ace]};function hce(){const{menuMaster:e}=dv(),t=e.isDashboardDrawerOpened,[n,a]=ee.useState(""),u=null;let f=C1.items.length-1,y=[],r;const S=C1.items.slice(0,f+1).map((A,R)=>{switch(A.type){case"group":return A.url&&A.id!==r?te.jsxs(vx,{children:[te.jsx(qC,{item:A,level:1,isParents:!0,setSelectedID:()=>a("")}),R!==0&&te.jsx(Pd,{sx:{py:.5}})]},A.id):te.jsx(z6,{setSelectedID:a,selectedID:n,item:A,lastItem:u,remItems:y,lastItemId:r},A.id);default:return te.jsx(Ii,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},A.id)}});return te.jsx(fr,{...t&&{sx:{mt:1.5}},children:S})}const f5=ee.memo(hce),pSe=3,H_=260;function p5(e){return{width:H_,borderRight:"none",zIndex:1099,background:e.palette.background.default,overflowX:"hidden",boxShadow:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen+200})}}function m5(e){return{borderRight:"none",zIndex:1099,background:e.palette.background.default,overflowX:"hidden",width:72,height:"auto",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen+200})}}const dce=Mn(I6,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>({width:H_,borderRight:"0px",flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{...p5(e),"& .MuiDrawer-paper":p5(e)},...!t&&{...m5(e),"& .MuiDrawer-paper":m5(e)}}));function fce(){const e=RC(r=>r.breakpoints.down("md")),{menuMaster:t}=dv(),n=t.isDashboardDrawerOpened,{miniDrawer:a,mode:u}=Sx(),f=ee.useMemo(()=>te.jsx(fr,{sx:{display:"flex",p:2},children:te.jsx(Qj,{})}),[]),y=ee.useMemo(()=>{const r=te.jsxs(te.Fragment,{children:[te.jsx(ece,{}),te.jsx(sc,{direction:"row",sx:{justifyContent:"center",mb:2},children:te.jsx(Sw,{label:"v0.0.1",size:"small",color:"default"})})]});let S={paddingLeft:"0px",paddingRight:"0px",marginTop:"20px"};return n&&(S={paddingLeft:"16px",paddingRight:"16px",marginTop:"0px"}),te.jsx(te.Fragment,{children:e?te.jsxs(fr,{sx:S,children:[te.jsx(f5,{}),n&&r]}):te.jsxs(Jle,{style:{height:"calc(100vh - 88px)",...S},children:[te.jsx(f5,{}),n&&r]})})},[e,n,u]);return te.jsx(fr,{component:"nav",sx:{flexShrink:{md:0},width:{xs:"auto",md:H_}},"aria-label":"mailbox folders",children:e||a&&n?te.jsxs(I6,{variant:e?"temporary":"persistent",anchor:"left",open:n,onClose:()=>ZE(!n),sx:{"& .MuiDrawer-paper":{mt:e?0:11,zIndex:1099,width:H_,bgcolor:"background.default",color:"text.primary",borderRight:"none",height:"auto"}},ModalProps:{keepMounted:!0},color:"inherit",children:[e&&f,y]}):te.jsx(dce,{variant:"permanent",open:n,children:te.jsx(fr,{sx:{mt:10},children:y})})})}const pce=ee.memo(fce),mce=Mn("main",{shouldForwardProp:e=>e!=="open"&&e!=="borderRadius"})(({theme:e,open:t,borderRadius:n})=>({backgroundColor:e.palette.grey[100],minWidth:"1%",width:"100%",minHeight:"calc(100vh - 88px)",flexGrow:1,padding:20,marginTop:88,marginRight:20,borderRadius:`${n}px`,borderBottomLeftRadius:0,borderBottomRightRadius:0,...!t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter+200}),[e.breakpoints.up("md")]:{marginLeft:-188,width:`calc(100% - ${H_}px)`,marginTop:88}},...t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shorter+200}),marginLeft:0,marginTop:88,width:`calc(100% - ${H_}px)`,[e.breakpoints.up("md")]:{marginTop:88}},[e.breakpoints.down("md")]:{marginLeft:20,padding:16,marginTop:88,...!t&&{width:`calc(100% - ${H_}px)`}},[e.breakpoints.down("sm")]:{marginLeft:10,marginRight:10}}));function gce(e){return tr("MuiIconButton",e)}const g5=or("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),yce=e=>{const{classes:t,disabled:n,color:a,edge:u,size:f,loading:y}=e,r={root:["root",y&&"loading",n&&"disabled",a!=="default"&&`color${Bn(a)}`,u&&`edge${Bn(u)}`,`size${Bn(f)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return er(r,gce,t)},_ce=Mn(Wf,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Bn(n.color)}`],n.edge&&t[`edge${Bn(n.edge)}`],t[`size${Bn(n.size)}`]]}})(Tr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Tr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(la()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${g5.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${g5.loading}`]:{color:"transparent"}}))),vce=Mn("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),B6=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiIconButton"}),{edge:u=!1,children:f,className:y,color:r="default",disabled:S=!1,disableFocusRipple:A=!1,size:R="medium",id:O,loading:z=null,loadingIndicator:N,...U}=a,H=bw(O),K=N??te.jsx(vU,{"aria-labelledby":H,color:"inherit",size:16}),W={...a,edge:u,color:r,disabled:S,disableFocusRipple:A,loading:z,loadingIndicator:K,size:R},re=yce(W);return te.jsxs(_ce,{id:z?H:O,className:si(re.root,y),centerRipple:!0,focusRipple:!A,disabled:S||z,ref:n,...U,ownerState:W,children:[typeof z=="boolean"&&te.jsx("span",{className:re.loadingWrapper,style:{display:"contents"},children:te.jsx(vce,{className:re.loadingIndicator,ownerState:W,children:z&&K})}),f]})}),xce=cc(te.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),bce=Mn(Wf)(Tr(({theme:e})=>({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`,...e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}},"&:active":{boxShadow:e.shadows[0],...e.palette.mode==="light"?{backgroundColor:dI(e.palette.grey[200],.12)}:{backgroundColor:dI(e.palette.grey[600],.12)}}}))),wce=Mn(xce)({width:24,height:16});function Sce(e){const{slots:t={},slotProps:n={},...a}=e,u=e;return te.jsx("li",{children:te.jsx(bce,{focusRipple:!0,...a,ownerState:u,children:te.jsx(wce,{as:t.CollapsedIcon,ownerState:u,...n.collapsedIcon})})})}function Tce(e){return tr("MuiBreadcrumbs",e)}const Ece=or("MuiBreadcrumbs",["root","ol","li","separator"]),Cce=e=>{const{classes:t}=e;return er({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Tce,t)},Ace=Mn(Ii,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${Ece.li}`]:t.li},t.root]})({}),Mce=Mn("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),Rce=Mn("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Ice(e,t,n,a){return e.reduce((u,f,y)=>(y<e.length-1?u=u.concat(f,te.jsx(Rce,{"aria-hidden":!0,className:t,ownerState:a,children:n},`separator-${y}`)):u.push(f),u),[])}const yR=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiBreadcrumbs"}),{children:u,className:f,component:y="nav",slots:r={},slotProps:S={},expandText:A="Show path",itemsAfterCollapse:R=1,itemsBeforeCollapse:O=1,maxItems:z=8,separator:N="/",...U}=a,[H,K]=ee.useState(!1),W={...a,component:y,expanded:H,expandText:A,itemsAfterCollapse:R,itemsBeforeCollapse:O,maxItems:z,separator:N},re=Cce(W),ne=K_({elementType:r.CollapsedIcon,externalSlotProps:S.collapsedIcon,ownerState:W}),se=ee.useRef(null),ue=Ce=>{const Le=()=>{K(!0);const qe=se.current.querySelector("a[href],button,[tabindex]");qe&&qe.focus()};return O+R>=Ce.length?Ce:[...Ce.slice(0,O),te.jsx(Sce,{"aria-label":A,slots:{CollapsedIcon:r.CollapsedIcon},slotProps:{collapsedIcon:ne},onClick:Le},"ellipsis"),...Ce.slice(Ce.length-R,Ce.length)]},pe=ee.Children.toArray(u).filter(Ce=>ee.isValidElement(Ce)).map((Ce,Le)=>te.jsx("li",{className:re.li,children:Ce},`child-${Le}`));return te.jsx(Ace,{ref:n,component:y,color:"textSecondary",className:si(re.root,f),ownerState:W,...U,children:te.jsx(Mce,{className:re.ol,ref:se,ownerState:W,children:Ice(H||z&&pe.length<=z?pe:ue(pe),re.separator,N,W)})})}),_R=cc([te.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3zM7 9H4V5h3zm10 6h3v4h-3zm0-10h3v4h-3z"},"0"),te.jsx("path",{d:"M7 5v4H4V5zm13 0v4h-3V5zm0 10v4h-3v-4z",opacity:".3"},"1")]),y5=cc(te.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),_5=cc([te.jsx("path",{d:"M12 3 2 12h3v8h6v-6h2v6h6v-8h3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5z"},"0"),te.jsx("path",{d:"M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z",opacity:".3"},"1")]);function f1({title:e}){return te.jsx(gu,{children:te.jsx(Ii,{variant:"h4",sx:{fontWeight:500},children:e})})}function F6({card:e,custom:t=!1,divider:n=!1,heading:a,icon:u=!0,icons:f,links:y,maxItems:r,rightAlign:S=!0,separator:A=gU,title:R=!0,titleBottom:O,sx:z,...N}){const U=xs(),H=Ah(),[K,W]=ee.useState(),[re,ne]=ee.useState(),se={marginRight:6,marginTop:-2,width:"1rem",height:"1rem",color:U.palette.secondary.main},ue={display:"flex",color:"grey.900",textDecoration:"none",alignContent:"center",alignItems:"center"};let pe=H.pathname;ee.useEffect(()=>{var $e;($e=C1==null?void 0:C1.items)==null||$e.map(it=>(it.type&&it.type==="group"&&(it!=null&&it.url&&it.url===pe?(W(it),ne(it)):Ce(it)),!1))});const Ce=$e=>{!t&&$e.children&&$e.children.filter(it=>(it.type&&it.type==="collapse"?(Ce(it),it.url===pe&&(W(it),ne(it))):it.type&&it.type==="item"&&pe===it.url&&(W($e),ne(it)),!1))},Le=A,qe=A?te.jsx(Le,{stroke:1.5,size:"16px"}):te.jsx(oQ,{stroke:1.5,size:"16px"});let ye,Xe,ut=te.jsx(Ii,{}),et="",ot,mt;if(K&&K.type==="collapse"&&(ot=K.icon?K.icon:_R,ye=te.jsxs(Ii,{...K.url&&{component:Pg,to:K.url},variant:"h6",noWrap:!0,sx:{overflow:"hidden",lineHeight:1.5,mb:-.625,textOverflow:"ellipsis",maxWidth:{xs:102,sm:"unset"},display:"inline-block"},color:window.location.pathname===K.url?"text.primary":"text.secondary",children:[f&&te.jsx(ot,{style:{...se}}),K.title]})),!t&&K&&K.type==="collapse"&&K.breadcrumbs===!0&&(ut=te.jsxs(Vg,{sx:e===!1?{mb:3,bgcolor:"transparent",...z}:{mb:3,bgcolor:"background.default",...z},...N,children:[te.jsx(fr,{sx:{p:1.25,px:e===!1?0:2},children:te.jsxs(gu,{container:!0,direction:S?"row":"column",justifyContent:S?"space-between":"flex-start",alignItems:S?"center":"flex-start",spacing:1,children:[R&&!O&&te.jsx(f1,{title:K.title}),te.jsx(gu,{children:te.jsxs(yR,{"aria-label":"breadcrumb",maxItems:r||8,separator:qe,sx:{"& .MuiBreadcrumbs-separator":{width:16,ml:1.25,mr:1.25}},children:[te.jsxs(Ii,{component:Pg,to:"/",color:"textSecondary",variant:"h6",sx:ue,children:[f&&te.jsx(_5,{style:se}),u&&!f&&te.jsx(y5,{style:{...se,marginRight:0}}),(!u||f)&&"Dashboard"]}),ye]})}),R&&O&&te.jsx(f1,{title:K.title})]})}),e===!1&&n!==!1&&te.jsx(Pd,{sx:{mt:2}})]})),re&&re.type==="item"||(re==null?void 0:re.type)==="group"&&(re!=null&&re.url)||t){et=re==null?void 0:re.title,mt=re!=null&&re.icon?re.icon:_R,Xe=te.jsxs(Ii,{variant:"h6",noWrap:!0,sx:{...ue,color:"text.secondary",display:"inline-block",overflow:"hidden",lineHeight:1.5,mb:-.625,textOverflow:"ellipsis",maxWidth:{xs:102,sm:"unset"}},children:[f&&te.jsx(mt,{style:{...se}}),et]});let $e=te.jsxs(yR,{"aria-label":"breadcrumb",maxItems:r||8,separator:qe,sx:{"& .MuiBreadcrumbs-separator":{width:16,mx:.75}},children:[te.jsxs(Ii,{component:Pg,to:"/",color:"textSecondary",variant:"h6",sx:ue,children:[f&&te.jsx(_5,{style:{...se}}),u&&!f&&te.jsx(y5,{style:{...se,marginRight:0}}),(!u||f)&&"Dashboard"]}),ye,Xe]});t&&y&&(y==null?void 0:y.length)>0&&($e=te.jsx(yR,{"aria-label":"breadcrumb",maxItems:r||8,separator:qe,sx:{"& .MuiBreadcrumbs-separator":{width:16,ml:1.25,mr:1.25}},children:y==null?void 0:y.map((it,Tt)=>(ot=it.icon?it.icon:_R,te.jsxs(Ii,{...it.to&&{component:Pg,to:it.to},variant:"h6",sx:ue,color:it.to?"text.secondary":"text.primary",children:[it.icon&&te.jsx(ot,{style:se}),it.title]},Tt)))})),((re==null?void 0:re.breadcrumbs)!==!1||t)&&(ut=te.jsxs(Vg,{sx:e===!1?{mb:3,bgcolor:"transparent",...z}:{mb:3,bgcolor:"background.default",...z},...N,children:[te.jsx(fr,{sx:{p:1.25,px:e===!1?0:2},children:te.jsxs(gu,{container:!0,direction:S?"row":"column",justifyContent:S?"space-between":"flex-start",alignItems:S?"center":"flex-start",spacing:1,children:[R&&!O&&te.jsx(f1,{title:t?a:re==null?void 0:re.title}),te.jsx(gu,{children:$e}),R&&O&&te.jsx(f1,{title:t?a:re==null?void 0:re.title})]})}),e===!1&&n!==!1&&te.jsx(Pd,{sx:{mt:2}})]}))}return ut}f1.propTypes={title:Ui.string};F6.propTypes={card:Ui.bool,custom:Ui.bool,divider:Ui.bool,heading:Ui.string,icon:Ui.bool,icons:Ui.bool,links:Ui.array,maxItems:Ui.number,rightAlign:Ui.bool,separator:Ui.any,IconChevronRight:Ui.any,title:Ui.bool,titleBottom:Ui.bool,sx:Ui.any,others:Ui.any};function Pce(){const e=xs(),t=RC(e.breakpoints.down("md")),{borderRadius:n,miniDrawer:a}=Sx(),{menuMaster:u,menuMasterLoading:f}=dv(),y=u==null?void 0:u.isDashboardDrawerOpened;return ee.useEffect(()=>{ZE(!a)},[a]),ee.useEffect(()=>{t&&ZE(!1)},[t]),f?te.jsx(Wj,{}):te.jsxs(fr,{sx:{display:"flex"},children:[te.jsx(gY,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:0,sx:{bgcolor:"background.default"},children:te.jsx(xY,{sx:{p:2},children:te.jsx(Ale,{})})}),te.jsx(pce,{}),te.jsx(mce,{borderRadius:n,open:y,children:te.jsxs(fr,{sx:{px:{xs:0},minHeight:"calc(100vh - 128px)",display:"flex",flexDirection:"column"},children:[te.jsx(F6,{}),te.jsx(q4,{})]})})]})}function Dce(){return te.jsx("div",{children:"Files"})}function Oce(e){return tr("MuiCardMedia",e)}or("MuiCardMedia",["root","media","img"]);const Lce=e=>{const{classes:t,isMediaComponent:n,isImageComponent:a}=e;return er({root:["root",n&&"media",a&&"img"]},Oce,t)},kce=Mn("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:a,isImageComponent:u}=n;return[t.root,a&&t.media,u&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),zce=["video","audio","picture","iframe","img"],Bce=["picture","img"],N6=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiCardMedia"}),{children:u,className:f,component:y="div",image:r,src:S,style:A,...R}=a,O=zce.includes(y),z=!O&&r?{backgroundImage:`url("${r}")`,...A}:A,N={...a,component:y,isMediaComponent:O,isImageComponent:Bce.includes(y)},U=Lce(N);return te.jsx(kce,{className:si(U.root,f),as:y,role:!O&&r?"img":void 0,ref:n,style:z,ownerState:N,src:O?r||S:void 0,...R,children:u})}),pP=typeof _D({})=="function",Fce=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),Nce=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),j6=(e,t=!1)=>{var f,y;const n={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([r,S])=>{var R,O;const A=e.getColorSchemeSelector(r);A.startsWith("@")?n[A]={":root":{colorScheme:(R=S.palette)==null?void 0:R.mode}}:n[A.replace(/\s*&/,"")]={colorScheme:(O=S.palette)==null?void 0:O.mode}});let a={html:Fce(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...Nce(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...n};const u=(y=(f=e.components)==null?void 0:f.MuiCssBaseline)==null?void 0:y.styleOverrides;return u&&(a=[a,u]),a},sE="mui-ecs",jce=e=>{const t=j6(e,!1),n=Array.isArray(t)?t[0]:t;return!e.vars&&n&&(n.html[`:root:has(${sE})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([a,u])=>{var y,r;const f=e.getColorSchemeSelector(a);f.startsWith("@")?n[f]={[`:root:not(:has(.${sE}))`]:{colorScheme:(y=u.palette)==null?void 0:y.mode}}:n[f.replace(/\s*&/,"")]={[`&:not(:has(.${sE}))`]:{colorScheme:(r=u.palette)==null?void 0:r.mode}}}),t},Uce=_D(pP?({theme:e,enableColorScheme:t})=>j6(e,t):({theme:e})=>jce(e));function Vce(e){const t=nr({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:a=!1}=t;return te.jsxs(ee.Fragment,{children:[pP&&te.jsx(Uce,{enableColorScheme:a}),!pP&&!a&&te.jsx("span",{className:sE,style:{display:"none"}}),n]})}function $ce(e){return tr("MuiMenuItem",e)}const Kb=or("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Hce=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Gce=e=>{const{disabled:t,dense:n,divider:a,disableGutters:u,selected:f,classes:y}=e,S=er({root:["root",n&&"dense",t&&"disabled",!u&&"gutters",a&&"divider",f&&"selected"]},$ce,y);return{...y,...S}},qce=Mn(Wf,{shouldForwardProp:e=>kc(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Hce})(Tr(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Kb.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Kb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Kb.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Dr(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Kb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Kb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${cB.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${cB.inset}`]:{marginLeft:52},[`& .${F0.root}`]:{marginTop:0,marginBottom:0},[`& .${F0.inset}`]:{paddingLeft:36},[`& .${uB.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${uB.root} svg`]:{fontSize:"1.25rem"}}}]}))),Bg=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiMenuItem"}),{autoFocus:u=!1,component:f="li",dense:y=!1,divider:r=!1,disableGutters:S=!1,focusVisibleClassName:A,role:R="menuitem",tabIndex:O,className:z,...N}=a,U=ee.useContext(vh),H=ee.useMemo(()=>({dense:y||U.dense||!1,disableGutters:S}),[U.dense,y,S]),K=ee.useRef(null);Lc(()=>{u&&K.current&&K.current.focus()},[u]);const W={...a,dense:H.dense,divider:r,disableGutters:S},re=Gce(a),ne=as(K,n);let se;return a.disabled||(se=O!==void 0?O:-1),te.jsx(vh.Provider,{value:H,children:te.jsx(qce,{ref:ne,role:R,tabIndex:se,component:f,focusVisibleClassName:si(re.focusVisible,A),className:si(re.root,z),...N,ownerState:W,classes:re})})});function Wce(e){return tr("MuiTab",e)}const uh=or("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Xce=e=>{const{classes:t,textColor:n,fullWidth:a,wrapped:u,icon:f,label:y,selected:r,disabled:S}=e,A={root:["root",f&&y&&"labelIcon",`textColor${Bn(n)}`,a&&"fullWidth",u&&"wrapped",r&&"selected",S&&"disabled"],icon:["iconWrapper","icon"]};return er(A,Wce,t)},Zce=Mn(Wf,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Bn(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${uh.iconWrapper}`]:t.iconWrapper},{[`& .${uh.icon}`]:t.icon}]}})(Tr(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="top",style:{[`& > .${uh.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="bottom",style:{[`& > .${uh.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="start",style:{[`& > .${uh.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="end",style:{[`& > .${uh.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${uh.selected}`]:{opacity:1},[`&.${uh.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${uh.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${uh.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${uh.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${uh.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),Yce=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiTab"}),{className:u,disabled:f=!1,disableFocusRipple:y=!1,fullWidth:r,icon:S,iconPosition:A="top",indicator:R,label:O,onChange:z,onClick:N,onFocus:U,selected:H,selectionFollowsFocus:K,textColor:W="inherit",value:re,wrapped:ne=!1,...se}=a,ue={...a,disabled:f,disableFocusRipple:y,selected:H,icon:!!S,iconPosition:A,label:!!O,fullWidth:r,textColor:W,wrapped:ne},pe=Xce(ue),Ce=S&&O&&ee.isValidElement(S)?ee.cloneElement(S,{className:si(pe.icon,S.props.className)}):S,Le=ye=>{!H&&z&&z(ye,re),N&&N(ye)},qe=ye=>{K&&!H&&z&&z(ye,re),U&&U(ye)};return te.jsxs(Zce,{focusRipple:!y,className:si(pe.root,u),ref:n,role:"tab","aria-selected":H,disabled:f,onClick:Le,onFocus:qe,ownerState:ue,tabIndex:H?0:-1,...se,children:[A==="top"||A==="start"?te.jsxs(ee.Fragment,{children:[Ce,O]}):te.jsxs(ee.Fragment,{children:[O,Ce]}),R]})}),Kce=cc(te.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),Jce=cc(te.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function Qce(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function eue(e,t,n,a={},u=()=>{}){const{ease:f=Qce,duration:y=300}=a;let r=null;const S=t[e];let A=!1;const R=()=>{A=!0},O=z=>{if(A){u(new Error("Animation cancelled"));return}r===null&&(r=z);const N=Math.min(1,(z-r)/y);if(t[e]=f(N)*(n-S)+S,N>=1){requestAnimationFrame(()=>{u(null)});return}requestAnimationFrame(O)};return S===n?(u(new Error("Element already at target position")),R):(requestAnimationFrame(O),R)}const tue={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function nue(e){const{onChange:t,...n}=e,a=ee.useRef(),u=ee.useRef(null),f=()=>{a.current=u.current.offsetHeight-u.current.clientHeight};return Lc(()=>{const y=_w(()=>{const S=a.current;f(),S!==a.current&&t(a.current)}),r=bu(u.current);return r.addEventListener("resize",y),()=>{y.clear(),r.removeEventListener("resize",y)}},[t]),ee.useEffect(()=>{f(),t(a.current)},[t]),te.jsx("div",{style:tue,...n,ref:u})}function iue(e){return tr("MuiTabScrollButton",e)}const rue=or("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),oue=e=>{const{classes:t,orientation:n,disabled:a}=e;return er({root:["root",n,a&&"disabled"]},iue,t)},sue=Mn(Wf,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${rue.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),aue=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiTabScrollButton"}),{className:u,slots:f={},slotProps:y={},direction:r,orientation:S,disabled:A,...R}=a,O=uv(),z={isRtl:O,...a},N=oue(z),U=f.StartScrollButtonIcon??Kce,H=f.EndScrollButtonIcon??Jce,K=K_({elementType:U,externalSlotProps:y.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:z}),W=K_({elementType:H,externalSlotProps:y.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:z});return te.jsx(sue,{component:"div",className:si(N.root,u),ref:n,role:null,ownerState:z,tabIndex:null,...R,style:{...R.style,...S==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${O?-90:90}deg)`}},children:r==="left"?te.jsx(U,{...K}):te.jsx(H,{...W})})});function lue(e){return tr("MuiTabs",e)}const vR=or("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),v5=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,x5=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ST=(e,t,n)=>{let a=!1,u=n(e,t);for(;u;){if(u===e.firstChild){if(a)return;a=!0}const f=u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||f)u=n(e,u);else{u.focus();return}}},cue=e=>{const{vertical:t,fixed:n,hideScrollbar:a,scrollableX:u,scrollableY:f,centered:y,scrollButtonsHideMobile:r,classes:S}=e;return er({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",u&&"scrollableX",f&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",y&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",r&&"scrollButtonsHideMobile"],scrollableX:[u&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},lue,S)},uue=Mn("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${vR.scrollButtons}`]:t.scrollButtons},{[`& .${vR.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(Tr(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${vR.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),hue=Mn("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),due=Mn("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.list,t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),fue=Mn("span",{name:"MuiTabs",slot:"Indicator"})(Tr(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),pue=Mn(nue)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),b5={},mue=ee.forwardRef(function(t,n){const a=nr({props:t,name:"MuiTabs"}),u=xs(),f=uv(),{"aria-label":y,"aria-labelledby":r,action:S,centered:A=!1,children:R,className:O,component:z="div",allowScrollButtonsMobile:N=!1,indicatorColor:U="primary",onChange:H,orientation:K="horizontal",ScrollButtonComponent:W,scrollButtons:re="auto",selectionFollowsFocus:ne,slots:se={},slotProps:ue={},TabIndicatorProps:pe={},TabScrollButtonProps:Ce={},textColor:Le="primary",value:qe,variant:ye="standard",visibleScrollbar:Xe=!1,...ut}=a,et=ye==="scrollable",ot=K==="vertical",mt=ot?"scrollTop":"scrollLeft",$e=ot?"top":"left",it=ot?"bottom":"right",Tt=ot?"clientHeight":"clientWidth",xt=ot?"height":"width",je={...a,component:z,allowScrollButtonsMobile:N,indicatorColor:U,orientation:K,vertical:ot,scrollButtons:re,textColor:Le,variant:ye,visibleScrollbar:Xe,fixed:!et,hideScrollbar:et&&!Xe,scrollableX:et&&!ot,scrollableY:et&&ot,centered:A&&!et,scrollButtonsHideMobile:!N},ht=cue(je),Bt=K_({elementType:se.StartScrollButtonIcon,externalSlotProps:ue.startScrollButtonIcon,ownerState:je}),Ft=K_({elementType:se.EndScrollButtonIcon,externalSlotProps:ue.endScrollButtonIcon,ownerState:je}),[on,en]=ee.useState(!1),[jt,Rn]=ee.useState(b5),[Vn,Hn]=ee.useState(!1),[On,ai]=ee.useState(!1),[oi,Ln]=ee.useState(!1),[zn,hi]=ee.useState({overflow:"hidden",scrollbarWidth:0}),fi=new Map,ci=ee.useRef(null),Pi=ee.useRef(null),ii={slots:se,slotProps:{indicator:pe,scrollButton:Ce,...ue}},pi=()=>{const Y=ci.current;let ie;if(Y){const Ee=Y.getBoundingClientRect();ie={clientWidth:Y.clientWidth,scrollLeft:Y.scrollLeft,scrollTop:Y.scrollTop,scrollWidth:Y.scrollWidth,top:Ee.top,bottom:Ee.bottom,left:Ee.left,right:Ee.right}}let ge;if(Y&&qe!==!1){const Ee=Pi.current.children;if(Ee.length>0){const Pe=Ee[fi.get(qe)];ge=Pe?Pe.getBoundingClientRect():null}}return{tabsMeta:ie,tabMeta:ge}},yi=_u(()=>{const{tabsMeta:Y,tabMeta:ie}=pi();let ge=0,Ee;ot?(Ee="top",ie&&Y&&(ge=ie.top-Y.top+Y.scrollTop)):(Ee=f?"right":"left",ie&&Y&&(ge=(f?-1:1)*(ie[Ee]-Y[Ee]+Y.scrollLeft)));const Pe={[Ee]:ge,[xt]:ie?ie[xt]:0};if(typeof jt[Ee]!="number"||typeof jt[xt]!="number")Rn(Pe);else{const Ue=Math.abs(jt[Ee]-Pe[Ee]),Fe=Math.abs(jt[xt]-Pe[xt]);(Ue>=1||Fe>=1)&&Rn(Pe)}}),dt=(Y,{animation:ie=!0}={})=>{ie?eue(mt,ci.current,Y,{duration:u.transitions.duration.standard}):ci.current[mt]=Y},Cn=Y=>{let ie=ci.current[mt];ot?ie+=Y:ie+=Y*(f?-1:1),dt(ie)},wn=()=>{const Y=ci.current[Tt];let ie=0;const ge=Array.from(Pi.current.children);for(let Ee=0;Ee<ge.length;Ee+=1){const Pe=ge[Ee];if(ie+Pe[Tt]>Y){Ee===0&&(ie=Y);break}ie+=Pe[Tt]}return ie},In=()=>{Cn(-1*wn())},qn=()=>{Cn(wn())},[Xn,{onChange:Ni,...Mi}]=Fr("scrollbar",{className:si(ht.scrollableX,ht.hideScrollbar),elementType:pue,shouldForwardComponentProp:!0,externalForwardedProps:ii,ownerState:je}),pr=ee.useCallback(Y=>{Ni==null||Ni(Y),hi({overflow:null,scrollbarWidth:Y})},[Ni]),[Nn,qr]=Fr("scrollButtons",{className:si(ht.scrollButtons,Ce.className),elementType:aue,externalForwardedProps:ii,ownerState:je,additionalProps:{orientation:K,slots:{StartScrollButtonIcon:se.startScrollButtonIcon||se.StartScrollButtonIcon,EndScrollButtonIcon:se.endScrollButtonIcon||se.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Bt,endScrollButtonIcon:Ft}}}),mr=()=>{const Y={};Y.scrollbarSizeListener=et?te.jsx(Xn,{...Mi,onChange:pr}):null;const ge=et&&(re==="auto"&&(Vn||On)||re===!0);return Y.scrollButtonStart=ge?te.jsx(Nn,{direction:f?"right":"left",onClick:In,disabled:!Vn,...qr}):null,Y.scrollButtonEnd=ge?te.jsx(Nn,{direction:f?"left":"right",onClick:qn,disabled:!On,...qr}):null,Y},Qi=_u(Y=>{const{tabsMeta:ie,tabMeta:ge}=pi();if(!(!ge||!ie)){if(ge[$e]<ie[$e]){const Ee=ie[mt]+(ge[$e]-ie[$e]);dt(Ee,{animation:Y})}else if(ge[it]>ie[it]){const Ee=ie[mt]+(ge[it]-ie[it]);dt(Ee,{animation:Y})}}}),li=_u(()=>{et&&re!==!1&&Ln(!oi)});ee.useEffect(()=>{const Y=_w(()=>{ci.current&&yi()});let ie;const ge=Ue=>{Ue.forEach(Fe=>{Fe.removedNodes.forEach(He=>{ie==null||ie.unobserve(He)}),Fe.addedNodes.forEach(He=>{ie==null||ie.observe(He)})}),Y(),li()},Ee=bu(ci.current);Ee.addEventListener("resize",Y);let Pe;return typeof ResizeObserver<"u"&&(ie=new ResizeObserver(Y),Array.from(Pi.current.children).forEach(Ue=>{ie.observe(Ue)})),typeof MutationObserver<"u"&&(Pe=new MutationObserver(ge),Pe.observe(Pi.current,{childList:!0})),()=>{Y.clear(),Ee.removeEventListener("resize",Y),Pe==null||Pe.disconnect(),ie==null||ie.disconnect()}},[yi,li]),ee.useEffect(()=>{const Y=Array.from(Pi.current.children),ie=Y.length;if(typeof IntersectionObserver<"u"&&ie>0&&et&&re!==!1){const ge=Y[0],Ee=Y[ie-1],Pe={root:ci.current,threshold:.99},Ue=st=>{Hn(!st[0].isIntersecting)},Fe=new IntersectionObserver(Ue,Pe);Fe.observe(ge);const He=st=>{ai(!st[0].isIntersecting)},Je=new IntersectionObserver(He,Pe);return Je.observe(Ee),()=>{Fe.disconnect(),Je.disconnect()}}},[et,re,oi,R==null?void 0:R.length]),ee.useEffect(()=>{en(!0)},[]),ee.useEffect(()=>{yi()}),ee.useEffect(()=>{Qi(b5!==jt)},[Qi,jt]),ee.useImperativeHandle(S,()=>({updateIndicator:yi,updateScrollButtons:li}),[yi,li]);const[hr,Wr]=Fr("indicator",{className:si(ht.indicator,pe.className),elementType:fue,externalForwardedProps:ii,ownerState:je,additionalProps:{style:jt}}),Vi=te.jsx(hr,{...Wr});let ko=0;const Ga=ee.Children.map(R,Y=>{if(!ee.isValidElement(Y))return null;const ie=Y.props.value===void 0?ko:Y.props.value;fi.set(ie,ko);const ge=ie===qe;return ko+=1,ee.cloneElement(Y,{fullWidth:ye==="fullWidth",indicator:ge&&!on&&Vi,selected:ge,selectionFollowsFocus:ne,onChange:H,textColor:Le,value:ie,...ko===1&&qe===!1&&!Y.props.tabIndex?{tabIndex:0}:{}})}),ts=Y=>{if(Y.altKey||Y.shiftKey||Y.ctrlKey||Y.metaKey)return;const ie=Pi.current,ge=sl(ie).activeElement;if(ge.getAttribute("role")!=="tab")return;let Pe=K==="horizontal"?"ArrowLeft":"ArrowUp",Ue=K==="horizontal"?"ArrowRight":"ArrowDown";switch(K==="horizontal"&&f&&(Pe="ArrowRight",Ue="ArrowLeft"),Y.key){case Pe:Y.preventDefault(),ST(ie,ge,x5);break;case Ue:Y.preventDefault(),ST(ie,ge,v5);break;case"Home":Y.preventDefault(),ST(ie,null,v5);break;case"End":Y.preventDefault(),ST(ie,null,x5);break}},Ds=mr(),[Bl,ca]=Fr("root",{ref:n,className:si(ht.root,O),elementType:uue,externalForwardedProps:{...ii,...ut,component:z},ownerState:je}),[Zt,Os]=Fr("scroller",{ref:ci,className:ht.scroller,elementType:hue,externalForwardedProps:ii,ownerState:je,additionalProps:{style:{overflow:zn.overflow,[ot?`margin${f?"Left":"Right"}`:"marginBottom"]:Xe?void 0:-zn.scrollbarWidth}}}),[Gi,Te]=Fr("list",{ref:Pi,className:si(ht.list,ht.flexContainer),elementType:due,externalForwardedProps:ii,ownerState:je,getSlotProps:Y=>({...Y,onKeyDown:ie=>{var ge;ts(ie),(ge=Y.onKeyDown)==null||ge.call(Y,ie)}})});return te.jsxs(Bl,{...ca,children:[Ds.scrollButtonStart,Ds.scrollbarSizeListener,te.jsxs(Zt,{...Os,children:[te.jsx(Gi,{"aria-label":y,"aria-labelledby":r,"aria-orientation":K==="vertical"?"vertical":null,role:"tablist",...Te,children:Ga}),on&&Vi]}),Ds.scrollButtonEnd]})}),U6=cc(te.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),V6=cc(te.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),w5=cc(te.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),gue=cc(te.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),yue=({project:e})=>{const t=Zg(),[n,a]=Or.useState(null),u=!!n,f=S=>a(S.currentTarget),y=()=>a(null),r=()=>{t("/project/1")};return te.jsxs(Vg,{elevation:3,onClick:()=>r(),sx:{position:"relative",width:250,borderRadius:3,overflow:"hidden",cursor:"pointer",transition:"0.3s","&:hover":{boxShadow:6}},children:[te.jsx(fr,{sx:{position:"absolute",top:8,right:8,backgroundColor:"#eee",color:"#2D2F31",borderRadius:"50%",width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:te.jsx(wO,{title:"Example Project",children:te.jsx(w5,{fontSize:"small"})})}),te.jsx(N6,{component:"img",height:"140",image:e.image,alt:e.title,sx:{objectFit:"cover"}}),te.jsxs(ww,{sx:{paddingBottom:"8px !important"},children:[te.jsx(Ii,{variant:"subtitle1",fontWeight:600,children:e.title}),te.jsx(Ii,{variant:"body2",color:"text.secondary",children:e.description}),te.jsxs(sc,{direction:"row",spacing:2,alignItems:"center",mt:1,children:[te.jsxs(sc,{direction:"row",spacing:.5,alignItems:"center",children:[te.jsx(w5,{fontSize:"small"}),te.jsx(Ii,{variant:"caption",children:e.images})]}),te.jsxs(sc,{direction:"row",spacing:.5,alignItems:"center",children:[te.jsx(gue,{fontSize:"small"}),te.jsx(Ii,{variant:"caption",children:e.users})]})]})]}),te.jsxs(fr,{sx:{position:"absolute",bottom:8,right:8},children:[te.jsx(B6,{onClick:f,children:te.jsx(V6,{fontSize:"small"})}),te.jsxs(yO,{anchorEl:n,open:u,onClose:y,children:[te.jsx(Bg,{onClick:y,children:"View"}),te.jsx(Bg,{onClick:y,children:"Edit"}),te.jsx(Bg,{onClick:y,children:"Delete"})]})]})]})},_ue=[{title:"Road Inspection",description:"Track changes over time",image:"https://picsum.photos/200/300?1",images:45,users:2},{title:"Bridge Survey",description:"High-res structural analysis",image:"https://picsum.photos/200/300?2",images:30,users:3},{title:"Pipeline Monitoring",description:"View weekly updates",image:"https://picsum.photos/200/300?3",images:15,users:1},{title:"Agricultural Plot",description:"Growth tracking with NDVI",image:"https://picsum.photos/200/300?4",images:50,users:4}];function vue(){const e=Zg();return te.jsxs(fr,{p:3,children:[te.jsxs(fr,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[te.jsx(Ii,{variant:"h5",fontWeight:600,children:"All Projects"}),te.jsx(J_,{variant:"contained",onClick:()=>e("/createProject"),startIcon:te.jsx(U6,{}),color:"secondary",children:"Create New Project"})]}),te.jsx(gu,{container:!0,spacing:3,children:_ue.map((t,n)=>te.jsx(gu,{item:!0,xs:12,sm:6,md:4,lg:3,children:te.jsx(yue,{project:t})},n))})]})}var xue=function(t){return bue(t)&&!wue(t)};function bue(e){return!!e&&typeof e=="object"}function wue(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Eue(e)}var Sue=typeof Symbol=="function"&&Symbol.for,Tue=Sue?Symbol.for("react.element"):60103;function Eue(e){return e.$$typeof===Tue}function Cue(e){return Array.isArray(e)?[]:{}}function KE(e,t){return t.clone!==!1&&t.isMergeableObject(e)?tw(Cue(e),e,t):e}function Aue(e,t,n){return e.concat(t).map(function(a){return KE(a,n)})}function Mue(e,t,n){var a={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(u){a[u]=KE(e[u],n)}),Object.keys(t).forEach(function(u){!n.isMergeableObject(t[u])||!e[u]?a[u]=KE(t[u],n):a[u]=tw(e[u],t[u],n)}),a}function tw(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||Aue,n.isMergeableObject=n.isMergeableObject||xue;var a=Array.isArray(t),u=Array.isArray(e),f=a===u;return f?a?n.arrayMerge(e,t,n):Mue(e,t,n):KE(t,n)}tw.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,u){return tw(a,u,n)},{})};var mP=tw,$6=typeof window=="object"&&window&&window.Object===Object&&window,Rue=typeof self=="object"&&self&&self.Object===Object&&self,Kf=$6||Rue||Function("return this")(),Wg=Kf.Symbol,H6=Object.prototype,Iue=H6.hasOwnProperty,Pue=H6.toString,Jb=Wg?Wg.toStringTag:void 0;function Due(e){var t=Iue.call(e,Jb),n=e[Jb];try{e[Jb]=void 0;var a=!0}catch{}var u=Pue.call(e);return a&&(t?e[Jb]=n:delete e[Jb]),u}var Oue=Object.prototype,Lue=Oue.toString;function kue(e){return Lue.call(e)}var zue="[object Null]",Bue="[object Undefined]",S5=Wg?Wg.toStringTag:void 0;function fv(e){return e==null?e===void 0?Bue:zue:S5&&S5 in Object(e)?Due(e):kue(e)}function G6(e,t){return function(n){return e(t(n))}}var TO=G6(Object.getPrototypeOf,Object);function ey(e){return e!=null&&typeof e=="object"}var Fue="[object Object]",Nue=Function.prototype,jue=Object.prototype,q6=Nue.toString,Uue=jue.hasOwnProperty,Vue=q6.call(Object);function gP(e){if(!ey(e)||fv(e)!=Fue)return!1;var t=TO(e);if(t===null)return!0;var n=Uue.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&q6.call(n)==Vue}function $ue(){this.__data__=[],this.size=0}function WC(e,t){return e===t||e!==e&&t!==t}function XC(e,t){for(var n=e.length;n--;)if(WC(e[n][0],t))return n;return-1}var Hue=Array.prototype,Gue=Hue.splice;function que(e){var t=this.__data__,n=XC(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():Gue.call(t,n,1),--this.size,!0}function Wue(e){var t=this.__data__,n=XC(t,e);return n<0?void 0:t[n][1]}function Xue(e){return XC(this.__data__,e)>-1}function Zue(e,t){var n=this.__data__,a=XC(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}function Dm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Dm.prototype.clear=$ue;Dm.prototype.delete=que;Dm.prototype.get=Wue;Dm.prototype.has=Xue;Dm.prototype.set=Zue;function Yue(){this.__data__=new Dm,this.size=0}function Kue(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Jue(e){return this.__data__.get(e)}function Que(e){return this.__data__.has(e)}function ty(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ehe="[object AsyncFunction]",the="[object Function]",nhe="[object GeneratorFunction]",ihe="[object Proxy]";function EO(e){if(!ty(e))return!1;var t=fv(e);return t==the||t==nhe||t==ehe||t==ihe}var xR=Kf["__core-js_shared__"],T5=function(){var e=/[^.]+$/.exec(xR&&xR.keys&&xR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function rhe(e){return!!T5&&T5 in e}var ohe=Function.prototype,she=ohe.toString;function pv(e){if(e!=null){try{return she.call(e)}catch{}try{return e+""}catch{}}return""}var ahe=/[\\^$.*+?()[\]{}|]/g,lhe=/^\[object .+?Constructor\]$/,che=Function.prototype,uhe=Object.prototype,hhe=che.toString,dhe=uhe.hasOwnProperty,fhe=RegExp("^"+hhe.call(dhe).replace(ahe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function phe(e){if(!ty(e)||rhe(e))return!1;var t=EO(e)?fhe:lhe;return t.test(pv(e))}function mhe(e,t){return e==null?void 0:e[t]}function mv(e,t){var n=mhe(e,t);return phe(n)?n:void 0}var nw=mv(Kf,"Map"),iw=mv(Object,"create");function ghe(){this.__data__=iw?iw(null):{},this.size=0}function yhe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _he="__lodash_hash_undefined__",vhe=Object.prototype,xhe=vhe.hasOwnProperty;function bhe(e){var t=this.__data__;if(iw){var n=t[e];return n===_he?void 0:n}return xhe.call(t,e)?t[e]:void 0}var whe=Object.prototype,She=whe.hasOwnProperty;function The(e){var t=this.__data__;return iw?t[e]!==void 0:She.call(t,e)}var Ehe="__lodash_hash_undefined__";function Che(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=iw&&t===void 0?Ehe:t,this}function tv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}tv.prototype.clear=ghe;tv.prototype.delete=yhe;tv.prototype.get=bhe;tv.prototype.has=The;tv.prototype.set=Che;function Ahe(){this.size=0,this.__data__={hash:new tv,map:new(nw||Dm),string:new tv}}function Mhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ZC(e,t){var n=e.__data__;return Mhe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Rhe(e){var t=ZC(this,e).delete(e);return this.size-=t?1:0,t}function Ihe(e){return ZC(this,e).get(e)}function Phe(e){return ZC(this,e).has(e)}function Dhe(e,t){var n=ZC(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}function ny(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}ny.prototype.clear=Ahe;ny.prototype.delete=Rhe;ny.prototype.get=Ihe;ny.prototype.has=Phe;ny.prototype.set=Dhe;var Ohe=200;function Lhe(e,t){var n=this.__data__;if(n instanceof Dm){var a=n.__data__;if(!nw||a.length<Ohe-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new ny(a)}return n.set(e,t),this.size=n.size,this}function gv(e){var t=this.__data__=new Dm(e);this.size=t.size}gv.prototype.clear=Yue;gv.prototype.delete=Kue;gv.prototype.get=Jue;gv.prototype.has=Que;gv.prototype.set=Lhe;function khe(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e}var JE=function(){try{var e=mv(Object,"defineProperty");return e({},"",{}),e}catch{}}();function CO(e,t,n){t=="__proto__"&&JE?JE(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var zhe=Object.prototype,Bhe=zhe.hasOwnProperty;function W6(e,t,n){var a=e[t];(!(Bhe.call(e,t)&&WC(a,n))||n===void 0&&!(t in e))&&CO(e,t,n)}function Pw(e,t,n,a){var u=!n;n||(n={});for(var f=-1,y=t.length;++f<y;){var r=t[f],S=void 0;S===void 0&&(S=e[r]),u?CO(n,r,S):W6(n,r,S)}return n}function Fhe(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}var Nhe="[object Arguments]";function E5(e){return ey(e)&&fv(e)==Nhe}var X6=Object.prototype,jhe=X6.hasOwnProperty,Uhe=X6.propertyIsEnumerable,yP=E5(function(){return arguments}())?E5:function(e){return ey(e)&&jhe.call(e,"callee")&&!Uhe.call(e,"callee")},nv=Array.isArray;function Vhe(){return!1}var Z6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,C5=Z6&&typeof module=="object"&&module&&!module.nodeType&&module,$he=C5&&C5.exports===Z6,A5=$he?Kf.Buffer:void 0,Hhe=A5?A5.isBuffer:void 0,AO=Hhe||Vhe,Ghe=9007199254740991,qhe=/^(?:0|[1-9]\d*)$/;function Y6(e,t){var n=typeof e;return t=t??Ghe,!!t&&(n=="number"||n!="symbol"&&qhe.test(e))&&e>-1&&e%1==0&&e<t}var Whe=9007199254740991;function K6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Whe}var Xhe="[object Arguments]",Zhe="[object Array]",Yhe="[object Boolean]",Khe="[object Date]",Jhe="[object Error]",Qhe="[object Function]",ede="[object Map]",tde="[object Number]",nde="[object Object]",ide="[object RegExp]",rde="[object Set]",ode="[object String]",sde="[object WeakMap]",ade="[object ArrayBuffer]",lde="[object DataView]",cde="[object Float32Array]",ude="[object Float64Array]",hde="[object Int8Array]",dde="[object Int16Array]",fde="[object Int32Array]",pde="[object Uint8Array]",mde="[object Uint8ClampedArray]",gde="[object Uint16Array]",yde="[object Uint32Array]",os={};os[cde]=os[ude]=os[hde]=os[dde]=os[fde]=os[pde]=os[mde]=os[gde]=os[yde]=!0;os[Xhe]=os[Zhe]=os[ade]=os[Yhe]=os[lde]=os[Khe]=os[Jhe]=os[Qhe]=os[ede]=os[tde]=os[nde]=os[ide]=os[rde]=os[ode]=os[sde]=!1;function _de(e){return ey(e)&&K6(e.length)&&!!os[fv(e)]}function MO(e){return function(t){return e(t)}}var J6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,A1=J6&&typeof module=="object"&&module&&!module.nodeType&&module,vde=A1&&A1.exports===J6,bR=vde&&$6.process,lx=function(){try{var e=A1&&A1.require&&A1.require("util").types;return e||bR&&bR.binding&&bR.binding("util")}catch{}}(),M5=lx&&lx.isTypedArray,Q6=M5?MO(M5):_de,xde=Object.prototype,bde=xde.hasOwnProperty;function e$(e,t){var n=nv(e),a=!n&&yP(e),u=!n&&!a&&AO(e),f=!n&&!a&&!u&&Q6(e),y=n||a||u||f,r=y?Fhe(e.length,String):[],S=r.length;for(var A in e)(t||bde.call(e,A))&&!(y&&(A=="length"||u&&(A=="offset"||A=="parent")||f&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||Y6(A,S)))&&r.push(A);return r}var wde=Object.prototype;function RO(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||wde;return e===n}var Sde=G6(Object.keys,Object),Tde=Object.prototype,Ede=Tde.hasOwnProperty;function Cde(e){if(!RO(e))return Sde(e);var t=[];for(var n in Object(e))Ede.call(e,n)&&n!="constructor"&&t.push(n);return t}function YC(e){return e!=null&&K6(e.length)&&!EO(e)}function IO(e){return YC(e)?e$(e):Cde(e)}function Ade(e,t){return e&&Pw(t,IO(t),e)}function Mde(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Rde=Object.prototype,Ide=Rde.hasOwnProperty;function Pde(e){if(!ty(e))return Mde(e);var t=RO(e),n=[];for(var a in e)a=="constructor"&&(t||!Ide.call(e,a))||n.push(a);return n}function Dw(e){return YC(e)?e$(e,!0):Pde(e)}function Dde(e,t){return e&&Pw(t,Dw(t),e)}var t$=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R5=t$&&typeof module=="object"&&module&&!module.nodeType&&module,Ode=R5&&R5.exports===t$,I5=Ode?Kf.Buffer:void 0,P5=I5?I5.allocUnsafe:void 0;function n$(e,t){if(t)return e.slice();var n=e.length,a=P5?P5(n):new e.constructor(n);return e.copy(a),a}function PO(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}function Lde(e,t){for(var n=-1,a=e==null?0:e.length,u=0,f=[];++n<a;){var y=e[n];t(y,n,e)&&(f[u++]=y)}return f}function i$(){return[]}var kde=Object.prototype,zde=kde.propertyIsEnumerable,D5=Object.getOwnPropertySymbols,DO=D5?function(e){return e==null?[]:(e=Object(e),Lde(D5(e),function(t){return zde.call(e,t)}))}:i$;function Bde(e,t){return Pw(e,DO(e),t)}function r$(e,t){for(var n=-1,a=t.length,u=e.length;++n<a;)e[u+n]=t[n];return e}var Fde=Object.getOwnPropertySymbols,o$=Fde?function(e){for(var t=[];e;)r$(t,DO(e)),e=TO(e);return t}:i$;function Nde(e,t){return Pw(e,o$(e),t)}function s$(e,t,n){var a=t(e);return nv(e)?a:r$(a,n(e))}function jde(e){return s$(e,IO,DO)}function Ude(e){return s$(e,Dw,o$)}var _P=mv(Kf,"DataView"),vP=mv(Kf,"Promise"),xP=mv(Kf,"Set"),bP=mv(Kf,"WeakMap"),O5="[object Map]",Vde="[object Object]",L5="[object Promise]",k5="[object Set]",z5="[object WeakMap]",B5="[object DataView]",$de=pv(_P),Hde=pv(nw),Gde=pv(vP),qde=pv(xP),Wde=pv(bP),pm=fv;(_P&&pm(new _P(new ArrayBuffer(1)))!=B5||nw&&pm(new nw)!=O5||vP&&pm(vP.resolve())!=L5||xP&&pm(new xP)!=k5||bP&&pm(new bP)!=z5)&&(pm=function(e){var t=fv(e),n=t==Vde?e.constructor:void 0,a=n?pv(n):"";if(a)switch(a){case $de:return B5;case Hde:return O5;case Gde:return L5;case qde:return k5;case Wde:return z5}return t});var Xde=Object.prototype,Zde=Xde.hasOwnProperty;function Yde(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Zde.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var F5=Kf.Uint8Array;function OO(e){var t=new e.constructor(e.byteLength);return new F5(t).set(new F5(e)),t}function Kde(e,t){var n=t?OO(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Jde=/\w*$/;function Qde(e){var t=new e.constructor(e.source,Jde.exec(e));return t.lastIndex=e.lastIndex,t}var N5=Wg?Wg.prototype:void 0,j5=N5?N5.valueOf:void 0;function efe(e){return j5?Object(j5.call(e)):{}}function a$(e,t){var n=t?OO(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var tfe="[object Boolean]",nfe="[object Date]",ife="[object Map]",rfe="[object Number]",ofe="[object RegExp]",sfe="[object Set]",afe="[object String]",lfe="[object Symbol]",cfe="[object ArrayBuffer]",ufe="[object DataView]",hfe="[object Float32Array]",dfe="[object Float64Array]",ffe="[object Int8Array]",pfe="[object Int16Array]",mfe="[object Int32Array]",gfe="[object Uint8Array]",yfe="[object Uint8ClampedArray]",_fe="[object Uint16Array]",vfe="[object Uint32Array]";function xfe(e,t,n){var a=e.constructor;switch(t){case cfe:return OO(e);case tfe:case nfe:return new a(+e);case ufe:return Kde(e,n);case hfe:case dfe:case ffe:case pfe:case mfe:case gfe:case yfe:case _fe:case vfe:return a$(e,n);case ife:return new a;case rfe:case afe:return new a(e);case ofe:return Qde(e);case sfe:return new a;case lfe:return efe(e)}}var U5=Object.create,bfe=function(){function e(){}return function(t){if(!ty(t))return{};if(U5)return U5(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function l$(e){return typeof e.constructor=="function"&&!RO(e)?bfe(TO(e)):{}}var wfe="[object Map]";function Sfe(e){return ey(e)&&pm(e)==wfe}var V5=lx&&lx.isMap,Tfe=V5?MO(V5):Sfe,Efe="[object Set]";function Cfe(e){return ey(e)&&pm(e)==Efe}var $5=lx&&lx.isSet,Afe=$5?MO($5):Cfe,Mfe=1,Rfe=2,Ife=4,c$="[object Arguments]",Pfe="[object Array]",Dfe="[object Boolean]",Ofe="[object Date]",Lfe="[object Error]",u$="[object Function]",kfe="[object GeneratorFunction]",zfe="[object Map]",Bfe="[object Number]",h$="[object Object]",Ffe="[object RegExp]",Nfe="[object Set]",jfe="[object String]",Ufe="[object Symbol]",Vfe="[object WeakMap]",$fe="[object ArrayBuffer]",Hfe="[object DataView]",Gfe="[object Float32Array]",qfe="[object Float64Array]",Wfe="[object Int8Array]",Xfe="[object Int16Array]",Zfe="[object Int32Array]",Yfe="[object Uint8Array]",Kfe="[object Uint8ClampedArray]",Jfe="[object Uint16Array]",Qfe="[object Uint32Array]",Jo={};Jo[c$]=Jo[Pfe]=Jo[$fe]=Jo[Hfe]=Jo[Dfe]=Jo[Ofe]=Jo[Gfe]=Jo[qfe]=Jo[Wfe]=Jo[Xfe]=Jo[Zfe]=Jo[zfe]=Jo[Bfe]=Jo[h$]=Jo[Ffe]=Jo[Nfe]=Jo[jfe]=Jo[Ufe]=Jo[Yfe]=Jo[Kfe]=Jo[Jfe]=Jo[Qfe]=!0;Jo[Lfe]=Jo[u$]=Jo[Vfe]=!1;function M1(e,t,n,a,u,f){var y,r=t&Mfe,S=t&Rfe,A=t&Ife;if(y!==void 0)return y;if(!ty(e))return e;var R=nv(e);if(R){if(y=Yde(e),!r)return PO(e,y)}else{var O=pm(e),z=O==u$||O==kfe;if(AO(e))return n$(e,r);if(O==h$||O==c$||z&&!u){if(y=S||z?{}:l$(e),!r)return S?Nde(e,Dde(y,e)):Bde(e,Ade(y,e))}else{if(!Jo[O])return u?e:{};y=xfe(e,O,r)}}f||(f=new gv);var N=f.get(e);if(N)return N;f.set(e,y),Afe(e)?e.forEach(function(K){y.add(M1(K,t,n,K,e,f))}):Tfe(e)&&e.forEach(function(K,W){y.set(W,M1(K,t,n,W,e,f))});var U=A?S?Ude:jde:S?Dw:IO,H=R?void 0:U(e);return khe(H||e,function(K,W){H&&(W=K,K=e[W]),W6(y,W,M1(K,t,n,W,e,f))}),y}var epe=1,tpe=4;function TT(e){return M1(e,epe|tpe)}var wR,H5;function npe(){if(H5)return wR;H5=1;var e=Array.isArray,t=Object.keys,n=Object.prototype.hasOwnProperty,a=typeof Element<"u";function u(f,y){if(f===y)return!0;if(f&&y&&typeof f=="object"&&typeof y=="object"){var r=e(f),S=e(y),A,R,O;if(r&&S){if(R=f.length,R!=y.length)return!1;for(A=R;A--!==0;)if(!u(f[A],y[A]))return!1;return!0}if(r!=S)return!1;var z=f instanceof Date,N=y instanceof Date;if(z!=N)return!1;if(z&&N)return f.getTime()==y.getTime();var U=f instanceof RegExp,H=y instanceof RegExp;if(U!=H)return!1;if(U&&H)return f.toString()==y.toString();var K=t(f);if(R=K.length,R!==t(y).length)return!1;for(A=R;A--!==0;)if(!n.call(y,K[A]))return!1;if(a&&f instanceof Element&&y instanceof Element)return f===y;for(A=R;A--!==0;)if(O=K[A],!(O==="_owner"&&f.$$typeof)&&!u(f[O],y[O]))return!1;return!0}return f!==f&&y!==y}return wR=function(y,r){try{return u(y,r)}catch(S){if(S.message&&S.message.match(/stack|recursion/i)||S.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",S.name,S.message),!1;throw S}},wR}var ipe=npe();const R_=Im(ipe);var rpe=4;function G5(e){return M1(e,rpe)}function d$(e,t){for(var n=-1,a=e==null?0:e.length,u=Array(a);++n<a;)u[n]=t(e[n],n,e);return u}var ope="[object Symbol]";function LO(e){return typeof e=="symbol"||ey(e)&&fv(e)==ope}var spe="Expected a function";function kO(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(spe);var n=function(){var a=arguments,u=t?t.apply(this,a):a[0],f=n.cache;if(f.has(u))return f.get(u);var y=e.apply(this,a);return n.cache=f.set(u,y)||f,y};return n.cache=new(kO.Cache||ny),n}kO.Cache=ny;var ape=500;function lpe(e){var t=kO(e,function(a){return n.size===ape&&n.clear(),a}),n=t.cache;return t}var cpe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,upe=/\\(\\)?/g,hpe=lpe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(cpe,function(n,a,u,f){t.push(u?f.replace(upe,"$1"):a||n)}),t});function dpe(e){if(typeof e=="string"||LO(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var q5=Wg?Wg.prototype:void 0,W5=q5?q5.toString:void 0;function f$(e){if(typeof e=="string")return e;if(nv(e))return d$(e,f$)+"";if(LO(e))return W5?W5.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function fpe(e){return e==null?"":f$(e)}function p$(e){return nv(e)?d$(e,dpe):LO(e)?[e]:PO(hpe(fpe(e)))}function Ua(){return Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ua.apply(this,arguments)}function m$(e,t){if(e==null)return{};var n={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var KC=ee.createContext(void 0);KC.displayName="FormikContext";var ppe=KC.Provider;KC.Consumer;function mpe(){var e=ee.useContext(KC);return e}var ph=function(t){return typeof t=="function"},JC=function(t){return t!==null&&typeof t=="object"},gpe=function(t){return String(Math.floor(Number(t)))===t},SR=function(t){return Object.prototype.toString.call(t)==="[object String]"},ype=function(t){return ee.Children.count(t)===0},TR=function(t){return JC(t)&&ph(t.then)};function hu(e,t,n,a){a===void 0&&(a=0);for(var u=p$(t);e&&a<u.length;)e=e[u[a++]];return a!==u.length&&!e||e===void 0?n:e}function G_(e,t,n){for(var a=G5(e),u=a,f=0,y=p$(t);f<y.length-1;f++){var r=y[f],S=hu(e,y.slice(0,f+1));if(S&&(JC(S)||Array.isArray(S)))u=u[r]=G5(S);else{var A=y[f+1];u=u[r]=gpe(A)&&Number(A)>=0?[]:{}}}return(f===0?e:u)[y[f]]===n?e:(n===void 0?delete u[y[f]]:u[y[f]]=n,f===0&&n===void 0&&delete a[y[f]],a)}function g$(e,t,n,a){n===void 0&&(n=new WeakMap),a===void 0&&(a={});for(var u=0,f=Object.keys(e);u<f.length;u++){var y=f[u],r=e[y];JC(r)?n.get(r)||(n.set(r,!0),a[y]=Array.isArray(r)?[]:{},g$(r,t,n,a[y])):a[y]=t}return a}function _pe(e,t){switch(t.type){case"SET_VALUES":return Ua({},e,{values:t.payload});case"SET_TOUCHED":return Ua({},e,{touched:t.payload});case"SET_ERRORS":return R_(e.errors,t.payload)?e:Ua({},e,{errors:t.payload});case"SET_STATUS":return Ua({},e,{status:t.payload});case"SET_ISSUBMITTING":return Ua({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Ua({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Ua({},e,{values:G_(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Ua({},e,{touched:G_(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Ua({},e,{errors:G_(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Ua({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Ua({},e,{touched:g$(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Ua({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Ua({},e,{isSubmitting:!1});default:return e}}var S_={},ET={};function y$(e){var t=e.validateOnChange,n=t===void 0?!0:t,a=e.validateOnBlur,u=a===void 0?!0:a,f=e.validateOnMount,y=f===void 0?!1:f,r=e.isInitialValid,S=e.enableReinitialize,A=S===void 0?!1:S,R=e.onSubmit,O=m$(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),z=Ua({validateOnChange:n,validateOnBlur:u,validateOnMount:y,onSubmit:R},O),N=ee.useRef(z.initialValues),U=ee.useRef(z.initialErrors||S_),H=ee.useRef(z.initialTouched||ET),K=ee.useRef(z.initialStatus),W=ee.useRef(!1),re=ee.useRef({});ee.useEffect(function(){return W.current=!0,function(){W.current=!1}},[]);var ne=ee.useState(0),se=ne[1],ue=ee.useRef({values:TT(z.initialValues),errors:TT(z.initialErrors)||S_,touched:TT(z.initialTouched)||ET,status:TT(z.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),pe=ue.current,Ce=ee.useCallback(function(dt){var Cn=ue.current;ue.current=_pe(Cn,dt),Cn!==ue.current&&se(function(wn){return wn+1})},[]),Le=ee.useCallback(function(dt,Cn){return new Promise(function(wn,In){var qn=z.validate(dt,Cn);qn==null?wn(S_):TR(qn)?qn.then(function(Xn){wn(Xn||S_)},function(Xn){In(Xn)}):wn(qn)})},[z.validate]),qe=ee.useCallback(function(dt,Cn){var wn=z.validationSchema,In=ph(wn)?wn(Cn):wn,qn=Cn&&In.validateAt?In.validateAt(Cn,dt):bpe(dt,In);return new Promise(function(Xn,Ni){qn.then(function(){Xn(S_)},function(Mi){Mi.name==="ValidationError"?Xn(xpe(Mi)):Ni(Mi)})})},[z.validationSchema]),ye=ee.useCallback(function(dt,Cn){return new Promise(function(wn){return wn(re.current[dt].validate(Cn))})},[]),Xe=ee.useCallback(function(dt){var Cn=Object.keys(re.current).filter(function(In){return ph(re.current[In].validate)}),wn=Cn.length>0?Cn.map(function(In){return ye(In,hu(dt,In))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(wn).then(function(In){return In.reduce(function(qn,Xn,Ni){return Xn==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Xn&&(qn=G_(qn,Cn[Ni],Xn)),qn},{})})},[ye]),ut=ee.useCallback(function(dt){return Promise.all([Xe(dt),z.validationSchema?qe(dt):{},z.validate?Le(dt):{}]).then(function(Cn){var wn=Cn[0],In=Cn[1],qn=Cn[2],Xn=mP.all([wn,In,qn],{arrayMerge:wpe});return Xn})},[z.validate,z.validationSchema,Xe,Le,qe]),et=hh(function(dt){return dt===void 0&&(dt=pe.values),Ce({type:"SET_ISVALIDATING",payload:!0}),ut(dt).then(function(Cn){return W.current&&(Ce({type:"SET_ISVALIDATING",payload:!1}),Ce({type:"SET_ERRORS",payload:Cn})),Cn})});ee.useEffect(function(){y&&W.current===!0&&R_(N.current,z.initialValues)&&et(N.current)},[y,et]);var ot=ee.useCallback(function(dt){var Cn=dt&&dt.values?dt.values:N.current,wn=dt&&dt.errors?dt.errors:U.current?U.current:z.initialErrors||{},In=dt&&dt.touched?dt.touched:H.current?H.current:z.initialTouched||{},qn=dt&&dt.status?dt.status:K.current?K.current:z.initialStatus;N.current=Cn,U.current=wn,H.current=In,K.current=qn;var Xn=function(){Ce({type:"RESET_FORM",payload:{isSubmitting:!!dt&&!!dt.isSubmitting,errors:wn,touched:In,status:qn,values:Cn,isValidating:!!dt&&!!dt.isValidating,submitCount:dt&&dt.submitCount&&typeof dt.submitCount=="number"?dt.submitCount:0}})};if(z.onReset){var Ni=z.onReset(pe.values,Ln);TR(Ni)?Ni.then(Xn):Xn()}else Xn()},[z.initialErrors,z.initialStatus,z.initialTouched,z.onReset]);ee.useEffect(function(){W.current===!0&&!R_(N.current,z.initialValues)&&A&&(N.current=z.initialValues,ot(),y&&et(N.current))},[A,z.initialValues,ot,y,et]),ee.useEffect(function(){A&&W.current===!0&&!R_(U.current,z.initialErrors)&&(U.current=z.initialErrors||S_,Ce({type:"SET_ERRORS",payload:z.initialErrors||S_}))},[A,z.initialErrors]),ee.useEffect(function(){A&&W.current===!0&&!R_(H.current,z.initialTouched)&&(H.current=z.initialTouched||ET,Ce({type:"SET_TOUCHED",payload:z.initialTouched||ET}))},[A,z.initialTouched]),ee.useEffect(function(){A&&W.current===!0&&!R_(K.current,z.initialStatus)&&(K.current=z.initialStatus,Ce({type:"SET_STATUS",payload:z.initialStatus}))},[A,z.initialStatus,z.initialTouched]);var mt=hh(function(dt){if(re.current[dt]&&ph(re.current[dt].validate)){var Cn=hu(pe.values,dt),wn=re.current[dt].validate(Cn);return TR(wn)?(Ce({type:"SET_ISVALIDATING",payload:!0}),wn.then(function(In){return In}).then(function(In){Ce({type:"SET_FIELD_ERROR",payload:{field:dt,value:In}}),Ce({type:"SET_ISVALIDATING",payload:!1})})):(Ce({type:"SET_FIELD_ERROR",payload:{field:dt,value:wn}}),Promise.resolve(wn))}else if(z.validationSchema)return Ce({type:"SET_ISVALIDATING",payload:!0}),qe(pe.values,dt).then(function(In){return In}).then(function(In){Ce({type:"SET_FIELD_ERROR",payload:{field:dt,value:hu(In,dt)}}),Ce({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),$e=ee.useCallback(function(dt,Cn){var wn=Cn.validate;re.current[dt]={validate:wn}},[]),it=ee.useCallback(function(dt){delete re.current[dt]},[]),Tt=hh(function(dt,Cn){Ce({type:"SET_TOUCHED",payload:dt});var wn=Cn===void 0?u:Cn;return wn?et(pe.values):Promise.resolve()}),xt=ee.useCallback(function(dt){Ce({type:"SET_ERRORS",payload:dt})},[]),je=hh(function(dt,Cn){var wn=ph(dt)?dt(pe.values):dt;Ce({type:"SET_VALUES",payload:wn});var In=Cn===void 0?n:Cn;return In?et(wn):Promise.resolve()}),ht=ee.useCallback(function(dt,Cn){Ce({type:"SET_FIELD_ERROR",payload:{field:dt,value:Cn}})},[]),Bt=hh(function(dt,Cn,wn){Ce({type:"SET_FIELD_VALUE",payload:{field:dt,value:Cn}});var In=wn===void 0?n:wn;return In?et(G_(pe.values,dt,Cn)):Promise.resolve()}),Ft=ee.useCallback(function(dt,Cn){var wn=Cn,In=dt,qn;if(!SR(dt)){dt.persist&&dt.persist();var Xn=dt.target?dt.target:dt.currentTarget,Ni=Xn.type,Mi=Xn.name,pr=Xn.id,Nn=Xn.value,qr=Xn.checked;Xn.outerHTML;var mr=Xn.options,Qi=Xn.multiple;wn=Cn||Mi||pr,In=/number|range/.test(Ni)?(qn=parseFloat(Nn),isNaN(qn)?"":qn):/checkbox/.test(Ni)?Tpe(hu(pe.values,wn),qr,Nn):mr&&Qi?Spe(mr):Nn}wn&&Bt(wn,In)},[Bt,pe.values]),on=hh(function(dt){if(SR(dt))return function(Cn){return Ft(Cn,dt)};Ft(dt)}),en=hh(function(dt,Cn,wn){Cn===void 0&&(Cn=!0),Ce({type:"SET_FIELD_TOUCHED",payload:{field:dt,value:Cn}});var In=wn===void 0?u:wn;return In?et(pe.values):Promise.resolve()}),jt=ee.useCallback(function(dt,Cn){dt.persist&&dt.persist();var wn=dt.target,In=wn.name,qn=wn.id;wn.outerHTML;var Xn=Cn||In||qn;en(Xn,!0)},[en]),Rn=hh(function(dt){if(SR(dt))return function(Cn){return jt(Cn,dt)};jt(dt)}),Vn=ee.useCallback(function(dt){ph(dt)?Ce({type:"SET_FORMIK_STATE",payload:dt}):Ce({type:"SET_FORMIK_STATE",payload:function(){return dt}})},[]),Hn=ee.useCallback(function(dt){Ce({type:"SET_STATUS",payload:dt})},[]),On=ee.useCallback(function(dt){Ce({type:"SET_ISSUBMITTING",payload:dt})},[]),ai=hh(function(){return Ce({type:"SUBMIT_ATTEMPT"}),et().then(function(dt){var Cn=dt instanceof Error,wn=!Cn&&Object.keys(dt).length===0;if(wn){var In;try{if(In=zn(),In===void 0)return}catch(qn){throw qn}return Promise.resolve(In).then(function(qn){return W.current&&Ce({type:"SUBMIT_SUCCESS"}),qn}).catch(function(qn){if(W.current)throw Ce({type:"SUBMIT_FAILURE"}),qn})}else if(W.current&&(Ce({type:"SUBMIT_FAILURE"}),Cn))throw dt})}),oi=hh(function(dt){dt&&dt.preventDefault&&ph(dt.preventDefault)&&dt.preventDefault(),dt&&dt.stopPropagation&&ph(dt.stopPropagation)&&dt.stopPropagation(),ai().catch(function(Cn){console.warn("Warning: An unhandled error was caught from submitForm()",Cn)})}),Ln={resetForm:ot,validateForm:et,validateField:mt,setErrors:xt,setFieldError:ht,setFieldTouched:en,setFieldValue:Bt,setStatus:Hn,setSubmitting:On,setTouched:Tt,setValues:je,setFormikState:Vn,submitForm:ai},zn=hh(function(){return R(pe.values,Ln)}),hi=hh(function(dt){dt&&dt.preventDefault&&ph(dt.preventDefault)&&dt.preventDefault(),dt&&dt.stopPropagation&&ph(dt.stopPropagation)&&dt.stopPropagation(),ot()}),fi=ee.useCallback(function(dt){return{value:hu(pe.values,dt),error:hu(pe.errors,dt),touched:!!hu(pe.touched,dt),initialValue:hu(N.current,dt),initialTouched:!!hu(H.current,dt),initialError:hu(U.current,dt)}},[pe.errors,pe.touched,pe.values]),ci=ee.useCallback(function(dt){return{setValue:function(wn,In){return Bt(dt,wn,In)},setTouched:function(wn,In){return en(dt,wn,In)},setError:function(wn){return ht(dt,wn)}}},[Bt,en,ht]),Pi=ee.useCallback(function(dt){var Cn=JC(dt),wn=Cn?dt.name:dt,In=hu(pe.values,wn),qn={name:wn,value:In,onChange:on,onBlur:Rn};if(Cn){var Xn=dt.type,Ni=dt.value,Mi=dt.as,pr=dt.multiple;Xn==="checkbox"?Ni===void 0?qn.checked=!!In:(qn.checked=!!(Array.isArray(In)&&~In.indexOf(Ni)),qn.value=Ni):Xn==="radio"?(qn.checked=In===Ni,qn.value=Ni):Mi==="select"&&pr&&(qn.value=qn.value||[],qn.multiple=!0)}return qn},[Rn,on,pe.values]),ii=ee.useMemo(function(){return!R_(N.current,pe.values)},[N.current,pe.values]),pi=ee.useMemo(function(){return typeof r<"u"?ii?pe.errors&&Object.keys(pe.errors).length===0:r!==!1&&ph(r)?r(z):r:pe.errors&&Object.keys(pe.errors).length===0},[r,ii,pe.errors,z]),yi=Ua({},pe,{initialValues:N.current,initialErrors:U.current,initialTouched:H.current,initialStatus:K.current,handleBlur:Rn,handleChange:on,handleReset:hi,handleSubmit:oi,resetForm:ot,setErrors:xt,setFormikState:Vn,setFieldTouched:en,setFieldValue:Bt,setFieldError:ht,setStatus:Hn,setSubmitting:On,setTouched:Tt,setValues:je,submitForm:ai,validateForm:et,validateField:mt,isValid:pi,dirty:ii,unregisterField:it,registerField:$e,getFieldProps:Pi,getFieldMeta:fi,getFieldHelpers:ci,validateOnBlur:u,validateOnChange:n,validateOnMount:y});return yi}function vpe(e){var t=y$(e),n=e.component,a=e.children,u=e.render,f=e.innerRef;return ee.useImperativeHandle(f,function(){return t}),ee.createElement(ppe,{value:t},n?ee.createElement(n,t):u?u(t):a?ph(a)?a(t):ype(a)?null:ee.Children.only(a):null)}function xpe(e){var t={};if(e.inner){if(e.inner.length===0)return G_(t,e.path,e.message);for(var u=e.inner,n=Array.isArray(u),a=0,u=n?u:u[Symbol.iterator]();;){var f;if(n){if(a>=u.length)break;f=u[a++]}else{if(a=u.next(),a.done)break;f=a.value}var y=f;hu(t,y.path)||(t=G_(t,y.path,y.message))}}return t}function bpe(e,t,n,a){n===void 0&&(n=!1);var u=wP(e);return t[n?"validateSync":"validate"](u,{abortEarly:!1,context:u})}function wP(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=String(n);Array.isArray(e[a])===!0?t[a]=e[a].map(function(u){return Array.isArray(u)===!0||gP(u)?wP(u):u!==""?u:void 0}):gP(e[a])?t[a]=wP(e[a]):t[a]=e[a]!==""?e[a]:void 0}return t}function wpe(e,t,n){var a=e.slice();return t.forEach(function(f,y){if(typeof a[y]>"u"){var r=n.clone!==!1,S=r&&n.isMergeableObject(f);a[y]=S?mP(Array.isArray(f)?[]:{},f,n):f}else n.isMergeableObject(f)?a[y]=mP(e[y],f,n):e.indexOf(f)===-1&&a.push(f)}),a}function Spe(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function Tpe(e,t,n){if(typeof e=="boolean")return!!t;var a=[],u=!1,f=-1;if(Array.isArray(e))a=e,f=e.indexOf(n),u=f>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!u?a.concat(n):u?a.slice(0,f).concat(a.slice(f+1)):a}var Epe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ee.useLayoutEffect:ee.useEffect;function hh(e){var t=ee.useRef(e);return Epe(function(){t.current=e}),ee.useCallback(function(){for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return t.current.apply(void 0,a)},[])}var _$=ee.forwardRef(function(e,t){var n=e.action,a=m$(e,["action"]),u=n??"#",f=mpe(),y=f.handleReset,r=f.handleSubmit;return ee.createElement("form",Ua({onSubmit:r,ref:t,onReset:y,action:u},a))});_$.displayName="Form";var ER,X5;function Cpe(){if(X5)return ER;X5=1;function e(W){this._maxSize=W,this.clear()}e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(W){return this._values[W]},e.prototype.set=function(W,re){return this._size>=this._maxSize&&this.clear(),W in this._values||this._size++,this._values[W]=re};var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,a=/^\d/,u=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,f=/^\s*(['"]?)(.*?)(\1)\s*$/,y=512,r=new e(y),S=new e(y),A=new e(y);ER={Cache:e,split:O,normalizePath:R,setter:function(W){var re=R(W);return S.get(W)||S.set(W,function(se,ue){for(var pe=0,Ce=re.length,Le=se;pe<Ce-1;){var qe=re[pe];if(qe==="__proto__"||qe==="constructor"||qe==="prototype")return se;Le=Le[re[pe++]]}Le[re[pe]]=ue})},getter:function(W,re){var ne=R(W);return A.get(W)||A.set(W,function(ue){for(var pe=0,Ce=ne.length;pe<Ce;)if(ue!=null||!re)ue=ue[ne[pe++]];else return;return ue})},join:function(W){return W.reduce(function(re,ne){return re+(N(ne)||n.test(ne)?"["+ne+"]":(re?".":"")+ne)},"")},forEach:function(W,re,ne){z(Array.isArray(W)?W:O(W),re,ne)}};function R(W){return r.get(W)||r.set(W,O(W).map(function(re){return re.replace(f,"$2")}))}function O(W){return W.match(t)||[""]}function z(W,re,ne){var se=W.length,ue,pe,Ce,Le;for(pe=0;pe<se;pe++)ue=W[pe],ue&&(K(ue)&&(ue='"'+ue+'"'),Le=N(ue),Ce=!Le&&/^\d+$/.test(ue),re.call(ne,ue,Le,Ce,pe,W))}function N(W){return typeof W=="string"&&W&&["'",'"'].indexOf(W.charAt(0))!==-1}function U(W){return W.match(a)&&!W.match(n)}function H(W){return u.test(W)}function K(W){return!N(W)&&(U(W)||H(W))}return ER}var q_=Cpe(),CR,Z5;function Ape(){if(Z5)return CR;Z5=1;const e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,t=R=>R.match(e)||[],n=R=>R[0].toUpperCase()+R.slice(1),a=(R,O)=>t(R).join(O).toLowerCase(),u=R=>t(R).reduce((O,z)=>`${O}${O?z[0].toUpperCase()+z.slice(1).toLowerCase():z.toLowerCase()}`,"");return CR={words:t,upperFirst:n,camelCase:u,pascalCase:R=>n(u(R)),snakeCase:R=>a(R,"_"),kebabCase:R=>a(R,"-"),sentenceCase:R=>n(a(R," ")),titleCase:R=>t(R).map(n).join(" ")},CR}var AR=Ape(),CT={exports:{}},Y5;function Mpe(){if(Y5)return CT.exports;Y5=1,CT.exports=function(u){return e(t(u),u)},CT.exports.array=e;function e(u,f){var y=u.length,r=new Array(y),S={},A=y,R=n(f),O=a(u);for(f.forEach(function(N){if(!O.has(N[0])||!O.has(N[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});A--;)S[A]||z(u[A],A,new Set);return r;function z(N,U,H){if(H.has(N)){var K;try{K=", node was:"+JSON.stringify(N)}catch{K=""}throw new Error("Cyclic dependency"+K)}if(!O.has(N))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(N));if(!S[U]){S[U]=!0;var W=R.get(N)||new Set;if(W=Array.from(W),U=W.length){H.add(N);do{var re=W[--U];z(re,O.get(re),H)}while(U);H.delete(N)}r[--y]=N}}}function t(u){for(var f=new Set,y=0,r=u.length;y<r;y++){var S=u[y];f.add(S[0]),f.add(S[1])}return Array.from(f)}function n(u){for(var f=new Map,y=0,r=u.length;y<r;y++){var S=u[y];f.has(S[0])||f.set(S[0],new Set),f.has(S[1])||f.set(S[1],new Set),f.get(S[0]).add(S[1])}return f}function a(u){for(var f=new Map,y=0,r=u.length;y<r;y++)f.set(u[y],y);return f}return CT.exports}var Rpe=Mpe();const Ipe=Im(Rpe),Ppe=Object.prototype.toString,Dpe=Error.prototype.toString,Ope=RegExp.prototype.toString,Lpe=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",kpe=/^Symbol\((.*)\)(.*)$/;function zpe(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function K5(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return zpe(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return Lpe.call(e).replace(kpe,"Symbol($1)");const a=Ppe.call(e).slice(8,-1);return a==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):a==="Error"||e instanceof Error?"["+Dpe.call(e)+"]":a==="RegExp"?Ope.call(e):null}function xm(e,t){let n=K5(e,t);return n!==null?n:JSON.stringify(e,function(a,u){let f=K5(this[a],t);return f!==null?f:u},2)}function v$(e){return e==null?[]:[].concat(e)}let x$,b$,w$,Bpe=/\$\{\s*(\w+)\s*\}/g;x$=Symbol.toStringTag;class J5{constructor(t,n,a,u){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[x$]="Error",this.name="ValidationError",this.value=n,this.path=a,this.type=u,this.errors=[],this.inner=[],v$(t).forEach(f=>{if(Cc.isError(f)){this.errors.push(...f.errors);const y=f.inner.length?f.inner:[f];this.inner.push(...y)}else this.errors.push(f)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}b$=Symbol.hasInstance;w$=Symbol.toStringTag;class Cc extends Error{static formatError(t,n){const a=n.label||n.path||"this";return n=Object.assign({},n,{path:a,originalPath:n.path}),typeof t=="string"?t.replace(Bpe,(u,f)=>xm(n[f])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,a,u,f){const y=new J5(t,n,a,u);if(f)return y;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[w$]="Error",this.name=y.name,this.message=y.message,this.type=y.type,this.value=y.value,this.path=y.path,this.errors=y.errors,this.inner=y.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Cc)}static[b$](t){return J5[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Of={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:a})=>{const u=a!=null&&a!==n?` (cast from the value \`${xm(a,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${xm(n,!0)}\``+u:`${e} must match the configured type. The validated value was: \`${xm(n,!0)}\``+u}},Tc={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Fpe={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},SP={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},TP={isValue:"${path} field must be ${value}"},aE={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},lE={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Npe={notType:e=>{const{path:t,value:n,spec:a}=e,u=a.types.length;if(Array.isArray(n)){if(n.length<u)return`${t} tuple value has too few items, expected a length of ${u} but got ${n.length} for value: \`${xm(n,!0)}\``;if(n.length>u)return`${t} tuple value has too many items, expected a length of ${u} but got ${n.length} for value: \`${xm(n,!0)}\``}return Cc.formatError(Of.notType,e)}};Object.assign(Object.create(null),{mixed:Of,string:Tc,number:Fpe,date:SP,object:aE,array:lE,boolean:TP,tuple:Npe});const QC=e=>e&&e.__isYupSchema__;class QE{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:a,then:u,otherwise:f}=n,y=typeof a=="function"?a:(...r)=>r.every(S=>S===a);return new QE(t,(r,S)=>{var A;let R=y(...r)?u:f;return(A=R==null?void 0:R(S))!=null?A:S})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let a=this.refs.map(f=>f.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),u=this.fn(a,t,n);if(u===void 0||u===t)return t;if(!QC(u))throw new TypeError("conditions must return a schema object");return u.resolve(n)}}const AT={context:"$",value:"."};function mSe(e,t){return new iy(e,t)}class iy{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===AT.context,this.isValue=this.key[0]===AT.value,this.isSibling=!this.isContext&&!this.isValue;let a=this.isContext?AT.context:this.isValue?AT.value:"";this.path=this.key.slice(a.length),this.getter=this.path&&q_.getter(this.path,!0),this.map=n.map}getValue(t,n,a){let u=this.isContext?a:this.isValue?t:n;return this.getter&&(u=this.getter(u||{})),this.map&&(u=this.map(u)),u}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}iy.prototype.__isYupRef=!0;const ym=e=>e==null;function C0(e){function t({value:n,path:a="",options:u,originalValue:f,schema:y},r,S){const{name:A,test:R,params:O,message:z,skipAbsent:N}=e;let{parent:U,context:H,abortEarly:K=y.spec.abortEarly,disableStackTrace:W=y.spec.disableStackTrace}=u;function re(Xe){return iy.isRef(Xe)?Xe.getValue(n,U,H):Xe}function ne(Xe={}){const ut=Object.assign({value:n,originalValue:f,label:y.spec.label,path:Xe.path||a,spec:y.spec,disableStackTrace:Xe.disableStackTrace||W},O,Xe.params);for(const ot of Object.keys(ut))ut[ot]=re(ut[ot]);const et=new Cc(Cc.formatError(Xe.message||z,ut),n,ut.path,Xe.type||A,ut.disableStackTrace);return et.params=ut,et}const se=K?r:S;let ue={path:a,parent:U,type:A,from:u.from,createError:ne,resolve:re,options:u,originalValue:f,schema:y};const pe=Xe=>{Cc.isError(Xe)?se(Xe):Xe?S(null):se(ne())},Ce=Xe=>{Cc.isError(Xe)?se(Xe):r(Xe)};if(N&&ym(n))return pe(!0);let qe;try{var ye;if(qe=R.call(ue,n,ue),typeof((ye=qe)==null?void 0:ye.then)=="function"){if(u.sync)throw new Error(`Validation test of type: "${ue.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(qe).then(pe,Ce)}}catch(Xe){Ce(Xe);return}pe(qe)}return t.OPTIONS=e,t}function jpe(e,t,n,a=n){let u,f,y;return t?(q_.forEach(t,(r,S,A)=>{let R=S?r.slice(1,r.length-1):r;e=e.resolve({context:a,parent:u,value:n});let O=e.type==="tuple",z=A?parseInt(R,10):0;if(e.innerType||O){if(O&&!A)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${y}" must contain an index to the tuple element, e.g. "${y}[0]"`);if(n&&z>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${r}, in the path: ${t}. because there is no value at that index. `);u=n,n=n&&n[z],e=O?e.spec.types[z]:e.innerType}if(!A){if(!e.fields||!e.fields[R])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${y} which is a type: "${e.type}")`);u=n,n=n&&n[R],e=e.fields[R]}f=R,y=S?"["+r+"]":"."+r}),{schema:e,parent:u,parentPath:f}):{parent:u,parentPath:t,schema:e}}class eC extends Set{describe(){const t=[];for(const n of this.values())t.push(iy.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const a of this.values())n.push(t(a));return n}clone(){return new eC(this.values())}merge(t,n){const a=this.clone();return t.forEach(u=>a.add(u)),n.forEach(u=>a.delete(u)),a}}function G0(e,t=new Map){if(QC(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let a=0;a<e.length;a++)n[a]=G0(e[a],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[a,u]of e.entries())n.set(a,G0(u,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const a of e)n.add(G0(a,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[a,u]of Object.entries(e))n[a]=G0(u,t)}else throw Error(`Unable to clone ${e}`);return n}class Th{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new eC,this._blacklist=new eC,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Of.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=G0(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let a=t(this);return this._mutate=n,a}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,a=t.clone();const u=Object.assign({},n.spec,a.spec);return a.spec=u,a.internalTests=Object.assign({},n.internalTests,a.internalTests),a._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),a._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),a.tests=n.tests,a.exclusiveTests=n.exclusiveTests,a.withMutation(f=>{t.tests.forEach(y=>{f.test(y.OPTIONS)})}),a.transforms=[...n.transforms,...a.transforms],a}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let a=n.conditions;n=n.clone(),n.conditions=[],n=a.reduce((u,f)=>f.resolve(u,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,a,u,f;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(a=t.abortEarly)!=null?a:this.spec.abortEarly,recursive:(u=t.recursive)!=null?u:this.spec.recursive,disableStackTrace:(f=t.disableStackTrace)!=null?f:this.spec.disableStackTrace})}cast(t,n={}){let a=this.resolve(Object.assign({value:t},n)),u=n.assert==="ignore-optionality",f=a._cast(t,n);if(n.assert!==!1&&!a.isType(f)){if(u&&ym(f))return f;let y=xm(t),r=xm(f);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${a.type}". 

attempted value: ${y} 
`+(r!==y?`result of cast: ${r}`:""))}return f}_cast(t,n){let a=t===void 0?t:this.transforms.reduce((u,f)=>f.call(this,u,t,this),t);return a===void 0&&(a=this.getDefault(n)),a}_validate(t,n={},a,u){let{path:f,originalValue:y=t,strict:r=this.spec.strict}=n,S=t;r||(S=this._cast(S,Object.assign({assert:!1},n)));let A=[];for(let R of Object.values(this.internalTests))R&&A.push(R);this.runTests({path:f,value:S,originalValue:y,options:n,tests:A},a,R=>{if(R.length)return u(R,S);this.runTests({path:f,value:S,originalValue:y,options:n,tests:this.tests},a,u)})}runTests(t,n,a){let u=!1,{tests:f,value:y,originalValue:r,path:S,options:A}=t,R=H=>{u||(u=!0,n(H,y))},O=H=>{u||(u=!0,a(H,y))},z=f.length,N=[];if(!z)return O([]);let U={value:y,originalValue:r,path:S,options:A,schema:this};for(let H=0;H<f.length;H++){const K=f[H];K(U,R,function(re){re&&(Array.isArray(re)?N.push(...re):N.push(re)),--z<=0&&O(N)})}}asNestedTest({key:t,index:n,parent:a,parentPath:u,originalParent:f,options:y}){const r=t??n;if(r==null)throw TypeError("Must include `key` or `index` for nested validations");const S=typeof r=="number";let A=a[r];const R=Object.assign({},y,{strict:!0,parent:a,value:A,originalValue:f[r],key:void 0,[S?"index":"key"]:r,path:S||r.includes(".")?`${u||""}[${S?r:`"${r}"`}]`:(u?`${u}.`:"")+t});return(O,z,N)=>this.resolve(R)._validate(A,R,z,N)}validate(t,n){var a;let u=this.resolve(Object.assign({},n,{value:t})),f=(a=n==null?void 0:n.disableStackTrace)!=null?a:u.spec.disableStackTrace;return new Promise((y,r)=>u._validate(t,n,(S,A)=>{Cc.isError(S)&&(S.value=A),r(S)},(S,A)=>{S.length?r(new Cc(S,A,void 0,void 0,f)):y(A)}))}validateSync(t,n){var a;let u=this.resolve(Object.assign({},n,{value:t})),f,y=(a=n==null?void 0:n.disableStackTrace)!=null?a:u.spec.disableStackTrace;return u._validate(t,Object.assign({},n,{sync:!0}),(r,S)=>{throw Cc.isError(r)&&(r.value=S),r},(r,S)=>{if(r.length)throw new Cc(r,t,void 0,void 0,y);f=S}),f}isValid(t,n){return this.validate(t,n).then(()=>!0,a=>{if(Cc.isError(a))return!1;throw a})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(a){if(Cc.isError(a))return!1;throw a}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):G0(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const a=this.clone({nullable:t});return a.internalTests.nullable=C0({message:n,name:"nullable",test(u){return u===null?this.schema.spec.nullable:!0}}),a}optionality(t,n){const a=this.clone({optional:t});return a.internalTests.optionality=C0({message:n,name:"optionality",test(u){return u===void 0?this.schema.spec.optional:!0}}),a}optional(){return this.optionality(!0)}defined(t=Of.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Of.notNull){return this.nullability(!1,t)}required(t=Of.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=Of.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let a=this.clone(),u=C0(n),f=n.exclusive||n.name&&a.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(a.exclusiveTests[n.name]=!!n.exclusive),a.tests=a.tests.filter(y=>!(y.OPTIONS.name===n.name&&(f||y.OPTIONS.test===u.OPTIONS.test))),a.tests.push(u),a}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let a=this.clone(),u=v$(t).map(f=>new iy(f));return u.forEach(f=>{f.isSibling&&a.deps.push(f.key)}),a.conditions.push(typeof n=="function"?new QE(u,n):QE.fromOptions(u,n)),a}typeError(t){let n=this.clone();return n.internalTests.typeError=C0({message:t,name:"typeError",skipAbsent:!0,test(a){return this.schema._typeCheck(a)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=Of.oneOf){let a=this.clone();return t.forEach(u=>{a._whitelist.add(u),a._blacklist.delete(u)}),a.internalTests.whiteList=C0({message:n,name:"oneOf",skipAbsent:!0,test(u){let f=this.schema._whitelist,y=f.resolveAll(this.resolve);return y.includes(u)?!0:this.createError({params:{values:Array.from(f).join(", "),resolved:y}})}}),a}notOneOf(t,n=Of.notOneOf){let a=this.clone();return t.forEach(u=>{a._blacklist.add(u),a._whitelist.delete(u)}),a.internalTests.blacklist=C0({message:n,name:"notOneOf",test(u){let f=this.schema._blacklist,y=f.resolveAll(this.resolve);return y.includes(u)?this.createError({params:{values:Array.from(f).join(", "),resolved:y}}):!0}}),a}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:a,meta:u,optional:f,nullable:y}=n.spec;return{meta:u,label:a,optional:f,nullable:y,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(S=>({name:S.OPTIONS.name,params:S.OPTIONS.params})).filter((S,A,R)=>R.findIndex(O=>O.name===S.name)===A)}}}Th.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Th.prototype[`${e}At`]=function(t,n,a={}){const{parent:u,parentPath:f,schema:y}=jpe(this,t,n,a.context);return y[e](u&&u[f],Object.assign({},a,{parent:u,path:t}))};for(const e of["equals","is"])Th.prototype[e]=Th.prototype.oneOf;for(const e of["not","nope"])Th.prototype[e]=Th.prototype.notOneOf;function Upe(){return new S$}class S$ extends Th{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,n,a)=>{if(a.spec.coerce&&!a.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=TP.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(n){return ym(n)||n===!0}})}isFalse(t=TP.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(n){return ym(n)||n===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}Upe.prototype=S$.prototype;const Vpe=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $pe(e){const t=EP(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function EP(e){var t,n;const a=Vpe.exec(e);return a?{year:um(a[1]),month:um(a[2],1)-1,day:um(a[3],1),hour:um(a[4]),minute:um(a[5]),second:um(a[6]),millisecond:a[7]?um(a[7].substring(0,3)):0,precision:(t=(n=a[7])==null?void 0:n.length)!=null?t:void 0,z:a[8]||void 0,plusMinus:a[9]||void 0,hourOffset:um(a[10]),minuteOffset:um(a[11])}:null}function um(e,t=0){return Number(e)||t}let Hpe=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gpe=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,qpe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Wpe="^\\d{4}-\\d{2}-\\d{2}",Xpe="\\d{2}:\\d{2}:\\d{2}",Zpe="(([+-]\\d{2}(:?\\d{2})?)|Z)",Ype=new RegExp(`${Wpe}T${Xpe}(\\.\\d+)?${Zpe}$`),Kpe=e=>ym(e)||e===e.trim(),Jpe={}.toString();function mm(){return new T$}class T$ extends Th{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,a)=>{if(!a.spec.coerce||a.isType(t)||Array.isArray(t))return t;const u=t!=null&&t.toString?t.toString():t;return u===Jpe?t:u})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||Of.required,name:"required",skipAbsent:!0,test:a=>!!a.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=Tc.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(a){return a.length===this.resolve(t)}})}min(t,n=Tc.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(a){return a.length>=this.resolve(t)}})}max(t,n=Tc.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(a){return a.length<=this.resolve(t)}})}matches(t,n){let a=!1,u,f;return n&&(typeof n=="object"?{excludeEmptyString:a=!1,message:u,name:f}=n:u=n),this.test({name:f||"matches",message:u||Tc.matches,params:{regex:t},skipAbsent:!0,test:y=>y===""&&a||y.search(t)!==-1})}email(t=Tc.email){return this.matches(Hpe,{name:"email",message:t,excludeEmptyString:!0})}url(t=Tc.url){return this.matches(Gpe,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Tc.uuid){return this.matches(qpe,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",a,u;return t&&(typeof t=="object"?{message:n="",allowOffset:a=!1,precision:u=void 0}=t:n=t),this.matches(Ype,{name:"datetime",message:n||Tc.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Tc.datetime_offset,params:{allowOffset:a},skipAbsent:!0,test:f=>{if(!f||a)return!0;const y=EP(f);return y?!!y.z:!1}}).test({name:"datetime_precision",message:n||Tc.datetime_precision,params:{precision:u},skipAbsent:!0,test:f=>{if(!f||u==null)return!0;const y=EP(f);return y?y.precision===u:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Tc.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:Kpe})}lowercase(t=Tc.lowercase){return this.transform(n=>ym(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>ym(n)||n===n.toLowerCase()})}uppercase(t=Tc.uppercase){return this.transform(n=>ym(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>ym(n)||n===n.toUpperCase()})}}mm.prototype=T$.prototype;let Qpe=new Date(""),eme=e=>Object.prototype.toString.call(e)==="[object Date]";class zO extends Th{constructor(){super({type:"date",check(t){return eme(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,a)=>!a.spec.coerce||a.isType(t)||t===null?t:(t=$pe(t),isNaN(t)?zO.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let a;if(iy.isRef(t))a=t;else{let u=this.cast(t);if(!this._typeCheck(u))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);a=u}return a}min(t,n=SP.min){let a=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(u){return u>=this.resolve(a)}})}max(t,n=SP.max){let a=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(u){return u<=this.resolve(a)}})}}zO.INVALID_DATE=Qpe;function tme(e,t=[]){let n=[],a=new Set,u=new Set(t.map(([y,r])=>`${y}-${r}`));function f(y,r){let S=q_.split(y)[0];a.add(S),u.has(`${r}-${S}`)||n.push([r,S])}for(const y of Object.keys(e)){let r=e[y];a.add(y),iy.isRef(r)&&r.isSibling?f(r.path,y):QC(r)&&"deps"in r&&r.deps.forEach(S=>f(S,y))}return Ipe.array(Array.from(a),n).reverse()}function Q5(e,t){let n=1/0;return e.some((a,u)=>{var f;if((f=t.path)!=null&&f.includes(a))return n=u,!0}),n}function E$(e){return(t,n)=>Q5(e,t)-Q5(e,n)}const C$=(e,t,n)=>{if(typeof e!="string")return e;let a=e;try{a=JSON.parse(e)}catch{}return n.isType(a)?a:e};function cE(e){if("fields"in e){const t={};for(const[n,a]of Object.entries(e.fields))t[n]=cE(a);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=cE(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(cE)}):"optional"in e?e.optional():e}const nme=(e,t)=>{const n=[...q_.normalizePath(t)];if(n.length===1)return n[0]in e;let a=n.pop(),u=q_.getter(q_.join(n),!0)(e);return!!(u&&a in u)};let eN=e=>Object.prototype.toString.call(e)==="[object Object]";function tN(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(a=>n.indexOf(a)===-1)}const ime=E$([]);function BO(e){return new A$(e)}class A$ extends Th{constructor(t){super({type:"object",check(n){return eN(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=ime,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var a;let u=super._cast(t,n);if(u===void 0)return this.getDefault(n);if(!this._typeCheck(u))return u;let f=this.fields,y=(a=n.stripUnknown)!=null?a:this.spec.noUnknown,r=[].concat(this._nodes,Object.keys(u).filter(O=>!this._nodes.includes(O))),S={},A=Object.assign({},n,{parent:S,__validating:n.__validating||!1}),R=!1;for(const O of r){let z=f[O],N=O in u;if(z){let U,H=u[O];A.path=(n.path?`${n.path}.`:"")+O,z=z.resolve({value:H,context:n.context,parent:S});let K=z instanceof Th?z.spec:void 0,W=K==null?void 0:K.strict;if(K!=null&&K.strip){R=R||O in u;continue}U=!n.__validating||!W?z.cast(u[O],A):u[O],U!==void 0&&(S[O]=U)}else N&&!y&&(S[O]=u[O]);(N!==O in S||S[O]!==u[O])&&(R=!0)}return R?S:u}_validate(t,n={},a,u){let{from:f=[],originalValue:y=t,recursive:r=this.spec.recursive}=n;n.from=[{schema:this,value:y},...f],n.__validating=!0,n.originalValue=y,super._validate(t,n,a,(S,A)=>{if(!r||!eN(A)){u(S,A);return}y=y||A;let R=[];for(let O of this._nodes){let z=this.fields[O];!z||iy.isRef(z)||R.push(z.asNestedTest({options:n,key:O,parent:A,parentPath:n.path,originalParent:y}))}this.runTests({tests:R,value:A,originalValue:y,options:n},a,O=>{u(O.sort(this._sortErrors).concat(S),A)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),a=n.fields;for(let[u,f]of Object.entries(this.fields)){const y=a[u];a[u]=y===void 0?f:y}return n.withMutation(u=>u.setFields(a,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(a=>{var u;const f=this.fields[a];let y=t;(u=y)!=null&&u.value&&(y=Object.assign({},y,{parent:y.value,value:y.value[a]})),n[a]=f&&"getDefault"in f?f.getDefault(y):void 0}),n}setFields(t,n){let a=this.clone();return a.fields=t,a._nodes=tme(t,n),a._sortErrors=E$(Object.keys(t)),n&&(a._excludedEdges=n),a}shape(t,n=[]){return this.clone().withMutation(a=>{let u=a._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),u=[...a._excludedEdges,...n]),a.setFields(Object.assign(a.fields,t),u)})}partial(){const t={};for(const[n,a]of Object.entries(this.fields))t[n]="optional"in a&&a.optional instanceof Function?a.optional():a;return this.setFields(t)}deepPartial(){return cE(this)}pick(t){const n={};for(const a of t)this.fields[a]&&(n[a]=this.fields[a]);return this.setFields(n,this._excludedEdges.filter(([a,u])=>t.includes(a)&&t.includes(u)))}omit(t){const n=[];for(const a of Object.keys(this.fields))t.includes(a)||n.push(a);return this.pick(n)}from(t,n,a){let u=q_.getter(t,!0);return this.transform(f=>{if(!f)return f;let y=f;return nme(f,t)&&(y=Object.assign({},f),a||delete y[t],y[n]=u(f)),y})}json(){return this.transform(C$)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||aE.exact,test(n){if(n==null)return!0;const a=tN(this.schema,n);return a.length===0||this.createError({params:{properties:a.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,n=aE.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let a=this.test({name:"noUnknown",exclusive:!0,message:n,test(u){if(u==null)return!0;const f=tN(this.schema,u);return!t||f.length===0||this.createError({params:{unknown:f.join(", ")}})}});return a.spec.noUnknown=t,a}unknown(t=!0,n=aE.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const a={};for(const u of Object.keys(n))a[t(u)]=n[u];return a})}camelCase(){return this.transformKeys(AR.camelCase)}snakeCase(){return this.transformKeys(AR.snakeCase)}constantCase(){return this.transformKeys(t=>AR.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),a=super.describe(t);a.fields={};for(const[f,y]of Object.entries(n.fields)){var u;let r=t;(u=r)!=null&&u.value&&(r=Object.assign({},r,{parent:r.value,value:r.value[f]})),a.fields[f]=y.describe(r)}return a}}BO.prototype=A$.prototype;function M$(e){return new R$(e)}class R$ extends Th{constructor(t){super({type:"array",spec:{types:t},check(n){return Array.isArray(n)}}),this.innerType=void 0,this.innerType=t}_cast(t,n){const a=super._cast(t,n);if(!this._typeCheck(a)||!this.innerType)return a;let u=!1;const f=a.map((y,r)=>{const S=this.innerType.cast(y,Object.assign({},n,{path:`${n.path||""}[${r}]`}));return S!==y&&(u=!0),S});return u?f:a}_validate(t,n={},a,u){var f;let y=this.innerType,r=(f=n.recursive)!=null?f:this.spec.recursive;n.originalValue!=null&&n.originalValue,super._validate(t,n,a,(S,A)=>{var R;if(!r||!y||!this._typeCheck(A)){u(S,A);return}let O=new Array(A.length);for(let N=0;N<A.length;N++){var z;O[N]=y.asNestedTest({options:n,index:N,parent:A,parentPath:n.path,originalParent:(z=n.originalValue)!=null?z:t})}this.runTests({value:A,tests:O,originalValue:(R=n.originalValue)!=null?R:t,options:n},a,N=>u(N.concat(S),A))})}clone(t){const n=super.clone(t);return n.innerType=this.innerType,n}json(){return this.transform(C$)}concat(t){let n=super.concat(t);return n.innerType=this.innerType,t.innerType&&(n.innerType=n.innerType?n.innerType.concat(t.innerType):t.innerType),n}of(t){let n=this.clone();if(!QC(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+xm(t));return n.innerType=t,n.spec=Object.assign({},n.spec,{types:t}),n}length(t,n=lE.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(a){return a.length===this.resolve(t)}})}min(t,n){return n=n||lE.min,this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(a){return a.length>=this.resolve(t)}})}max(t,n){return n=n||lE.max,this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(a){return a.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,n)=>this._typeCheck(t)?t:n==null?[]:[].concat(n))}compact(t){let n=t?(a,u,f)=>!t(a,u,f):a=>!!a;return this.transform(a=>a!=null?a.filter(n):a)}describe(t){const n=(t?this.resolve(t):this).clone(),a=super.describe(t);if(n.innerType){var u;let f=t;(u=f)!=null&&u.value&&(f=Object.assign({},f,{parent:f.value,value:f.value[0]})),a.innerType=n.innerType.describe(f)}return a}}M$.prototype=R$.prototype;const rme=cc(te.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})),ome=BO().shape({name:mm().required("Project name is required"),team:M$().of(mm().email("Invalid email"))}),sme=({onSubmit:e})=>{const[t,n]=ee.useState(""),[a,u]=ee.useState(null),f=F2(),y=Zg();return te.jsxs(fr,{sx:{p:5,maxWidth:500},children:[te.jsx(Ii,{variant:"h3",mb:2,children:"Create New Project"}),te.jsx(vpe,{initialValues:{name:"",team:[]},validationSchema:ome,onSubmit:r=>{e({...r,file:a})},children:({values:r,errors:S,touched:A,setFieldValue:R})=>te.jsxs(_$,{children:[te.jsxs($_,{fullWidth:!0,sx:{...f.typography.customInput},children:[te.jsx(T1,{htmlFor:"outlined-adornment-email-login",children:"Project Name"}),te.jsx(N_,{id:"outlined-adornment-email-login",fullWidth:!0,name:"name",label:"Project Name",value:r.name,onChange:O=>R("name",O.target.value),error:A.name&&!!S.name,helperText:A.name&&S.name,sx:{mb:2}})]}),te.jsxs($_,{fullWidth:!0,sx:{...f.typography.customInput},children:[te.jsx(T1,{htmlFor:"outlined-adornment-email-login",children:"Project's Location"}),te.jsx(N_,{id:"outlined-adornment-email-login",fullWidth:!0,name:"name",label:"Project Name",value:r.name,onChange:O=>R("name",O.target.value),error:A.name&&!!S.name,helperText:A.name&&S.name,sx:{mb:2}})]}),te.jsxs($_,{fullWidth:!0,sx:{...f.typography.customInput},children:[te.jsx(T1,{htmlFor:"teamInvite",children:"Invite Team Member (press Enter to add)"}),te.jsx(N_,{fullWidth:!0,label:"Invite Team Member (press Enter to add)",value:t,onChange:O=>n(O.target.value),onKeyDown:O=>{O.key==="Enter"&&t&&(O.preventDefault(),R("team",[...r.team,t]),n(""))},sx:{mb:1}})]}),te.jsx(sc,{direction:"row",spacing:1,flexWrap:"wrap",mb:2,children:r.team.map((O,z)=>te.jsx(Sw,{label:O,onDelete:()=>{const N=[...r.team];N.splice(z,1),R("team",N)}},z))}),te.jsxs(J_,{variant:"outlined",component:"label",startIcon:te.jsx(rme,{}),sx:{mb:2},children:[a?a.name:"Upload File",te.jsx("input",{type:"file",hidden:!0,onChange:O=>{u(O.target.files[0])}})]}),te.jsx(fr,{mt:3,children:te.jsx(J_,{color:"secondary",variant:"contained",type:"submit",fullWidth:!0,onClick:y("/project/:1"),children:"Create Project"})})]})})]})},ame=""+new URL("teams-CqOgNS9D.jpg",import.meta.url).href,lme=()=>{const e=t=>{console.log("Project submitted:",t)};return te.jsxs(gu,{container:!0,sx:{minHeight:"80vh",flexDirection:"row",width:"100%",justifyContent:"center"},children:[te.jsxs(gu,{item:!0,xs:12,md:12,sx:{backgroundImage:`url(${ame})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative",color:"white"},children:[te.jsx(fr,{sx:{position:"absolute",top:0,left:0,height:"100%",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"}}),te.jsxs(fr,{sx:{position:"relative",zIndex:2,height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",p:4},children:[te.jsx(Ii,{variant:"h3",fontWeight:"bold",gutterBottom:!0,color:"white",children:"Build Your Dream Project"}),te.jsx(Ii,{variant:"h6",color:"white",children:"Invite your team, share files, and collaborate seamlessly."})]})]}),te.jsx(gu,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:te.jsx(sme,{onSubmit:e})})]})},cme=()=>!!localStorage.getItem("token"),MR=({element:e,isBoth:t=!1,...n})=>cme()||t?te.jsx(e,{...n}):te.jsx(h7,{to:"/"});var uE={exports:{}},ume=uE.exports,nN;function hme(){return nN||(nN=1,function(e,t){(function(n,a){e.exports=a()})(ume,function(){var n,a,u;function f(r,S){if(!n)n=S;else if(!a)a=S;else{var A="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk); self.onerror = null;",R={};n(R),u=S(R),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(u.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}f(["exports"],function(r){var S=1e-6,A=typeof Float32Array<"u"?Float32Array:Array;function R(l,i){var s=i[0],h=i[1],p=i[2],v=i[3],x=s*v-p*h;return x?(l[0]=v*(x=1/x),l[1]=-h*x,l[2]=-p*x,l[3]=s*x,l):null}function O(){var l=new A(9);return A!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function z(l,i){var s=i[0],h=i[1],p=i[2],v=i[3],x=i[4],E=i[5],M=i[6],P=i[7],k=i[8];return l[0]=x*k-E*P,l[1]=p*P-h*k,l[2]=h*E-p*x,l[3]=E*M-v*k,l[4]=s*k-p*M,l[5]=p*v-s*E,l[6]=v*P-x*M,l[7]=h*M-s*P,l[8]=s*x-h*v,l}function N(l,i,s){var h=i[0],p=i[1],v=i[2],x=i[3],E=i[4],M=i[5],P=i[6],k=i[7],B=i[8],j=s[0],X=s[1],Z=s[2],oe=s[3],de=s[4],me=s[5],Se=s[6],be=s[7],ae=s[8];return l[0]=j*h+X*x+Z*P,l[1]=j*p+X*E+Z*k,l[2]=j*v+X*M+Z*B,l[3]=oe*h+de*x+me*P,l[4]=oe*p+de*E+me*k,l[5]=oe*v+de*M+me*B,l[6]=Se*h+be*x+ae*P,l[7]=Se*p+be*E+ae*k,l[8]=Se*v+be*M+ae*B,l}function U(){var l=new A(16);return A!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l}function H(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function K(l,i){var s=i[0],h=i[1],p=i[2],v=i[3],x=i[4],E=i[5],M=i[6],P=i[7],k=i[8],B=i[9],j=i[10],X=i[11],Z=i[12],oe=i[13],de=i[14],me=i[15],Se=s*E-h*x,be=s*M-p*x,ae=s*P-v*x,_e=h*M-p*E,we=h*P-v*E,Ie=p*P-v*M,Ge=k*oe-B*Z,Ze=k*de-j*Z,Ye=k*me-X*Z,tt=B*de-j*oe,vt=B*me-X*oe,kt=j*me-X*de,It=Se*kt-be*vt+ae*tt+_e*Ye-we*Ze+Ie*Ge;return It?(l[0]=(E*kt-M*vt+P*tt)*(It=1/It),l[1]=(p*vt-h*kt-v*tt)*It,l[2]=(oe*Ie-de*we+me*_e)*It,l[3]=(j*we-B*Ie-X*_e)*It,l[4]=(M*Ye-x*kt-P*Ze)*It,l[5]=(s*kt-p*Ye+v*Ze)*It,l[6]=(de*ae-Z*Ie-me*be)*It,l[7]=(k*Ie-j*ae+X*be)*It,l[8]=(x*vt-E*Ye+P*Ge)*It,l[9]=(h*Ye-s*vt-v*Ge)*It,l[10]=(Z*we-oe*ae+me*Se)*It,l[11]=(B*ae-k*we-X*Se)*It,l[12]=(E*Ze-x*tt-M*Ge)*It,l[13]=(s*tt-h*Ze+p*Ge)*It,l[14]=(oe*be-Z*_e-de*Se)*It,l[15]=(k*_e-B*be+j*Se)*It,l):null}function W(l,i,s){var h=i[0],p=i[1],v=i[2],x=i[3],E=i[4],M=i[5],P=i[6],k=i[7],B=i[8],j=i[9],X=i[10],Z=i[11],oe=i[12],de=i[13],me=i[14],Se=i[15],be=s[0],ae=s[1],_e=s[2],we=s[3];return l[0]=be*h+ae*E+_e*B+we*oe,l[1]=be*p+ae*M+_e*j+we*de,l[2]=be*v+ae*P+_e*X+we*me,l[3]=be*x+ae*k+_e*Z+we*Se,l[4]=(be=s[4])*h+(ae=s[5])*E+(_e=s[6])*B+(we=s[7])*oe,l[5]=be*p+ae*M+_e*j+we*de,l[6]=be*v+ae*P+_e*X+we*me,l[7]=be*x+ae*k+_e*Z+we*Se,l[8]=(be=s[8])*h+(ae=s[9])*E+(_e=s[10])*B+(we=s[11])*oe,l[9]=be*p+ae*M+_e*j+we*de,l[10]=be*v+ae*P+_e*X+we*me,l[11]=be*x+ae*k+_e*Z+we*Se,l[12]=(be=s[12])*h+(ae=s[13])*E+(_e=s[14])*B+(we=s[15])*oe,l[13]=be*p+ae*M+_e*j+we*de,l[14]=be*v+ae*P+_e*X+we*me,l[15]=be*x+ae*k+_e*Z+we*Se,l}function re(l,i,s){var h,p,v,x,E,M,P,k,B,j,X,Z,oe=s[0],de=s[1],me=s[2];return i===l?(l[12]=i[0]*oe+i[4]*de+i[8]*me+i[12],l[13]=i[1]*oe+i[5]*de+i[9]*me+i[13],l[14]=i[2]*oe+i[6]*de+i[10]*me+i[14],l[15]=i[3]*oe+i[7]*de+i[11]*me+i[15]):(p=i[1],v=i[2],x=i[3],E=i[4],M=i[5],P=i[6],k=i[7],B=i[8],j=i[9],X=i[10],Z=i[11],l[0]=h=i[0],l[1]=p,l[2]=v,l[3]=x,l[4]=E,l[5]=M,l[6]=P,l[7]=k,l[8]=B,l[9]=j,l[10]=X,l[11]=Z,l[12]=h*oe+E*de+B*me+i[12],l[13]=p*oe+M*de+j*me+i[13],l[14]=v*oe+P*de+X*me+i[14],l[15]=x*oe+k*de+Z*me+i[15]),l}function ne(l,i,s){var h=s[0],p=s[1],v=s[2];return l[0]=i[0]*h,l[1]=i[1]*h,l[2]=i[2]*h,l[3]=i[3]*h,l[4]=i[4]*p,l[5]=i[5]*p,l[6]=i[6]*p,l[7]=i[7]*p,l[8]=i[8]*v,l[9]=i[9]*v,l[10]=i[10]*v,l[11]=i[11]*v,l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l}function se(l,i,s){var h=Math.sin(s),p=Math.cos(s),v=i[4],x=i[5],E=i[6],M=i[7],P=i[8],k=i[9],B=i[10],j=i[11];return i!==l&&(l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[4]=v*p+P*h,l[5]=x*p+k*h,l[6]=E*p+B*h,l[7]=M*p+j*h,l[8]=P*p-v*h,l[9]=k*p-x*h,l[10]=B*p-E*h,l[11]=j*p-M*h,l}function ue(l,i,s){var h=Math.sin(s),p=Math.cos(s),v=i[0],x=i[1],E=i[2],M=i[3],P=i[8],k=i[9],B=i[10],j=i[11];return i!==l&&(l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=v*p-P*h,l[1]=x*p-k*h,l[2]=E*p-B*h,l[3]=M*p-j*h,l[8]=v*h+P*p,l[9]=x*h+k*p,l[10]=E*h+B*p,l[11]=M*h+j*p,l}function pe(l,i,s){var h=Math.sin(s),p=Math.cos(s),v=i[0],x=i[1],E=i[2],M=i[3],P=i[4],k=i[5],B=i[6],j=i[7];return i!==l&&(l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=v*p+P*h,l[1]=x*p+k*h,l[2]=E*p+B*h,l[3]=M*p+j*h,l[4]=P*p-v*h,l[5]=k*p-x*h,l[6]=B*p-E*h,l[7]=j*p-M*h,l}function Ce(l,i){return l[0]=i[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=i[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Le(l,i,s){var h,p,v,x=s[0],E=s[1],M=s[2],P=Math.hypot(x,E,M);return P<S?null:(x*=P=1/P,E*=P,M*=P,h=Math.sin(i),p=Math.cos(i),l[0]=x*x*(v=1-p)+p,l[1]=E*x*v+M*h,l[2]=M*x*v-E*h,l[3]=0,l[4]=x*E*v-M*h,l[5]=E*E*v+p,l[6]=M*E*v+x*h,l[7]=0,l[8]=x*M*v+E*h,l[9]=E*M*v-x*h,l[10]=M*M*v+p,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}function qe(l,i){var s=i[0],h=i[1],p=i[2],v=i[3],x=s+s,E=h+h,M=p+p,P=s*x,k=h*x,B=h*E,j=p*x,X=p*E,Z=p*M,oe=v*x,de=v*E,me=v*M;return l[0]=1-B-Z,l[1]=k+me,l[2]=j-de,l[3]=0,l[4]=k-me,l[5]=1-P-Z,l[6]=X+oe,l[7]=0,l[8]=j+de,l[9]=X-oe,l[10]=1-P-B,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}Math.hypot||(Math.hypot=function(){for(var l=0,i=arguments.length;i--;)l+=arguments[i]*arguments[i];return Math.sqrt(l)});var ye=W;function Xe(){var l=new A(3);return A!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function ut(l){var i=new A(3);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i}function et(l){return Math.hypot(l[0],l[1],l[2])}function ot(l,i,s){var h=new A(3);return h[0]=l,h[1]=i,h[2]=s,h}function mt(l,i,s){return l[0]=i[0]+s[0],l[1]=i[1]+s[1],l[2]=i[2]+s[2],l}function $e(l,i,s){return l[0]=i[0]-s[0],l[1]=i[1]-s[1],l[2]=i[2]-s[2],l}function it(l,i,s){return l[0]=i[0]*s[0],l[1]=i[1]*s[1],l[2]=i[2]*s[2],l}function Tt(l,i,s){return l[0]=Math.min(i[0],s[0]),l[1]=Math.min(i[1],s[1]),l[2]=Math.min(i[2],s[2]),l}function xt(l,i,s){return l[0]=Math.max(i[0],s[0]),l[1]=Math.max(i[1],s[1]),l[2]=Math.max(i[2],s[2]),l}function je(l,i,s){return l[0]=i[0]*s,l[1]=i[1]*s,l[2]=i[2]*s,l}function ht(l,i,s,h){return l[0]=i[0]+s[0]*h,l[1]=i[1]+s[1]*h,l[2]=i[2]+s[2]*h,l}function Bt(l,i){var s=i[0]-l[0],h=i[1]-l[1],p=i[2]-l[2];return s*s+h*h+p*p}function Ft(l){var i=l[0],s=l[1],h=l[2];return i*i+s*s+h*h}function on(l,i){return l[0]=-i[0],l[1]=-i[1],l[2]=-i[2],l}function en(l,i){var s=i[0],h=i[1],p=i[2],v=s*s+h*h+p*p;return v>0&&(v=1/Math.sqrt(v)),l[0]=i[0]*v,l[1]=i[1]*v,l[2]=i[2]*v,l}function jt(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]}function Rn(l,i,s){var h=i[0],p=i[1],v=i[2],x=s[0],E=s[1],M=s[2];return l[0]=p*M-v*E,l[1]=v*x-h*M,l[2]=h*E-p*x,l}function Vn(l,i,s,h){var p=i[0],v=i[1],x=i[2];return l[0]=p+h*(s[0]-p),l[1]=v+h*(s[1]-v),l[2]=x+h*(s[2]-x),l}function Hn(l,i,s){var h=i[0],p=i[1],v=i[2],x=s[3]*h+s[7]*p+s[11]*v+s[15];return l[0]=(s[0]*h+s[4]*p+s[8]*v+s[12])/(x=x||1),l[1]=(s[1]*h+s[5]*p+s[9]*v+s[13])/x,l[2]=(s[2]*h+s[6]*p+s[10]*v+s[14])/x,l}function On(l,i,s){var h=i[0],p=i[1],v=i[2];return l[0]=h*s[0]+p*s[3]+v*s[6],l[1]=h*s[1]+p*s[4]+v*s[7],l[2]=h*s[2]+p*s[5]+v*s[8],l}function ai(l,i,s){var h=s[0],p=s[1],v=s[2],x=i[0],E=i[1],M=i[2],P=p*M-v*E,k=v*x-h*M,B=h*E-p*x,j=p*B-v*k,X=v*P-h*B,Z=h*k-p*P,oe=2*s[3];return k*=oe,B*=oe,X*=2,Z*=2,l[0]=x+(P*=oe)+(j*=2),l[1]=E+k+X,l[2]=M+B+Z,l}function oi(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]}var Ln=$e,zn=it,hi=et;function fi(){var l=new A(4);return A!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0,l[3]=0),l}function ci(l,i,s){return l[0]=i[0]*s,l[1]=i[1]*s,l[2]=i[2]*s,l[3]=i[3]*s,l}function Pi(l,i){var s=i[0],h=i[1],p=i[2],v=i[3],x=s*s+h*h+p*p+v*v;return x>0&&(x=1/Math.sqrt(x)),l[0]=s*x,l[1]=h*x,l[2]=p*x,l[3]=v*x,l}function ii(l,i,s){var h=i[0],p=i[1],v=i[2],x=i[3];return l[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,l[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,l[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,l[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,l}function pi(){var l=new A(4);return A!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function yi(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l}function dt(l,i,s){s*=.5;var h=i[0],p=i[1],v=i[2],x=i[3],E=Math.sin(s),M=Math.cos(s);return l[0]=h*M+x*E,l[1]=p*M+v*E,l[2]=v*M-p*E,l[3]=x*M-h*E,l}function Cn(l,i,s){s*=.5;var h=i[0],p=i[1],v=i[2],x=i[3],E=Math.sin(s),M=Math.cos(s);return l[0]=h*M-v*E,l[1]=p*M+x*E,l[2]=v*M+h*E,l[3]=x*M-p*E,l}Xe(),fi();var wn,In,qn,Xn,Ni,Mi=Pi,pr=(wn=Xe(),In=ot(1,0,0),qn=ot(0,1,0),function(l,i,s){var h=jt(i,s);return h<-.999999?(Rn(wn,In,i),hi(wn)<1e-6&&Rn(wn,qn,i),en(wn,wn),function(p,v,x){x*=.5;var E=Math.sin(x);p[0]=E*v[0],p[1]=E*v[1],p[2]=E*v[2],p[3]=Math.cos(x)}(l,wn,Math.PI),l):h>.999999?(l[0]=0,l[1]=0,l[2]=0,l[3]=1,l):(Rn(wn,i,s),l[0]=wn[0],l[1]=wn[1],l[2]=wn[2],l[3]=1+h,Mi(l,l))});function Nn(){var l=new A(2);return A!=Float32Array&&(l[0]=0,l[1]=0),l}function qr(l,i){var s=new A(2);return s[0]=l,s[1]=i,s}function mr(l,i,s){return l[0]=i[0]+s[0],l[1]=i[1]+s[1],l}function Qi(l,i,s){return l[0]=i[0]-s[0],l[1]=i[1]-s[1],l}function li(l,i,s){return l[0]=i[0]*s,l[1]=i[1]*s,l}function hr(l){return Math.hypot(l[0],l[1])}function Wr(l,i){var s=i[0],h=i[1],p=s*s+h*h;return p>0&&(p=1/Math.sqrt(p)),l[0]=i[0]*p,l[1]=i[1]*p,l}function Vi(l,i){return l[0]*i[0]+l[1]*i[1]}function ko(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}pi(),pi(),O(),Nn();var Ga,ts,Ds=function(){if(Ni)return Xn;function l(i,s,h,p){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=s,this.p2x=h,this.p2y=p}return Ni=1,Xn=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,s){if(s===void 0&&(s=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,p=0;p<8;p++){var v=this.sampleCurveX(h)-i;if(Math.abs(v)<s)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=v/x}var E=0,M=1;for(h=i,p=0;p<20&&(v=this.sampleCurveX(h),!(Math.abs(v-i)<s));p++)i>v?E=h:M=h,h=.5*(M-E)+E;return h},solve:function(i,s){return this.sampleCurveY(this.solveCurveX(i,s))}},Xn}(),Bl=ko(Ds);function ca(){if(ts)return Ga;function l(i,s){this.x=i,this.y=s}return ts=1,Ga=l,l.prototype={clone:function(){return new l(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,s){return this.clone()._rotateAround(i,s)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var s=i.x-this.x,h=i.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,s){return Math.atan2(this.x*s-this.y*i,this.x*i+this.y*s)},_matMult:function(i){var s=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=s,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var s=Math.cos(i),h=Math.sin(i),p=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=p,this},_rotateAround:function(i,s){var h=Math.cos(i),p=Math.sin(i),v=s.y+p*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-p*(this.y-s.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(i){return i instanceof l?i:Array.isArray(i)?new l(i[0],i[1]):i},Ga}var Zt=ko(ca());function Os(l,i){if(Array.isArray(l)){if(!Array.isArray(i)||l.length!==i.length)return!1;for(let s=0;s<l.length;s++)if(!Os(l[s],i[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&i!==null){if(typeof i!="object"||Object.keys(l).length!==Object.keys(i).length)return!1;for(const s in l)if(!Os(l[s],i[s]))return!1;return!0}return l===i}const Gi=Math.PI/180,Te=180/Math.PI;function Y(l){return l*Gi}function ie(l){return l*Te}const ge=[[0,0],[1,0],[1,1],[0,1]];function Ee(l){if(l<=0)return 0;if(l>=1)return 1;const i=l*l,s=i*l;return 4*(l<.5?s:3*(l-i)+s-.75)}function Pe(l,i,s,h){const p=new Bl(l,i,s,h);return function(v){return p.solve(v)}}const Ue=Pe(.25,.1,.25,1);function Fe(l,i,s){return Math.min(s,Math.max(i,l))}function He(l,i,s){return(s=Fe((s-l)/(i-l),0,1))*s*(3-2*s)}function Je(l,i,s){const h=s-i,p=((l-i)%h+h)%h+i;return p===i?s:p}function st(l,i,s){if(!l.length)return s(null,[]);let h=l.length;const p=new Array(l.length);let v=null;l.forEach((x,E)=>{i(x,(M,P)=>{M&&(v=M),p[E]=P,--h==0&&s(v,p)})})}function Ke(l,...i){for(const s of i)for(const h in s)l[h]=s[h];return l}let At=1;function qt(){return At++}function tn(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function kn(l,i){l.forEach(s=>{i[s]&&(i[s]=i[s].bind(i))})}function Pn(l,i,s){const h={};for(const p in l)h[p]=i.call(this,l[p],p,l);return h}function Dn(l,i,s){const h={};for(const p in l)i.call(this,l[p],p,l)&&(h[p]=l[p]);return h}function di(l){return Array.isArray(l)?l.map(di):typeof l=="object"&&l?Pn(l,di):l}const sr={};function ui(l){sr[l]||(typeof console<"u"&&console.warn(l),sr[l]=!0)}function $i(l,i,s){return(s.y-l.y)*(i.x-l.x)>(i.y-l.y)*(s.x-l.x)}function Di(l){let i=0;for(let s,h,p=0,v=l.length,x=v-1;p<v;x=p++)s=l[p],h=l[x],i+=(h.x-s.x)*(s.y+h.y);return i}function ar([l,i,s]){const h=Y(i+90),p=Y(s);return{x:l*Math.cos(h)*Math.sin(p),y:l*Math.sin(h)*Math.sin(p),z:l*Math.cos(p),azimuthal:i,polar:s}}function Er(l){return(typeof self<"u"||l!==void 0)&&typeof WorkerGlobalScope<"u"&&(l!==void 0?l:self)instanceof WorkerGlobalScope}function Lr(l){const i={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}let ho=null;function Ri(l,i){return[l[4*i],l[4*i+1],l[4*i+2],l[4*i+3]]}function no(l,i,s,h){for(;i<s;){const p=i+s>>1;l[p]<h?i=p+1:s=p}return i}function ds(l,i,s,h){for(;i<s;){const p=i+s>>1;l[p]<=h?i=p+1:s=p}return i}function So(l){return l>0?1/(1.001-l):1+l}function Go(l){return l>0?1-1/(1.001-l):-l}function vr(l,i,s){return(l-i.min)*(s.max-s.min)/(i.max-i.min)+s.min}const zo={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!zo.API_URL)return null;try{const l=new URL(zo.API_URL);return l.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":l.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Sa(l){return zo.API_URL_REGEX.test(l)}function ls(l){return zo.API_SPRITE_REGEX.test(l)}let Ud,Vd,Rh,$d,hc,tp;function Ta(){return Ud==null&&(Ud=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ud}const qa={now:()=>$d!==void 0?$d:performance.now(),setNow(l){$d=l},restoreNow(){$d=void 0},frame(l){const i=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(l,i=0){const{width:s,height:h}=l;hc||(hc=document.createElement("canvas"));const p=hc.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(s>hc.width||h>hc.height)&&(hc.width=s,hc.height=h),p.clearRect(-i,-i,s+2*i,h+2*i),p.drawImage(l,0,0,s,h),p.getImageData(-i,-i,s+2*i,h+2*i)},resolveURL:l=>(Vd||(Vd=document.createElement("a")),Vd.href=l,Vd.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Rh==null&&(Rh=window.matchMedia("(prefers-reduced-motion: reduce)")),Rh.matches)},hasCanvasFingerprintNoise(){if(tp!==void 0)return tp;if(!Ta())return tp=!1,!1;const l=new OffscreenCanvas(85,1),i=l.getContext("2d",{willReadFrequently:!0});let s=0;for(let p=0;p<l.width;++p)i.fillStyle=`rgba(${s++},${s++},${s++}, 255)`,i.fillRect(p,0,1,1);const h=i.getImageData(0,0,l.width,l.height);s=0;for(let p=0;p<h.data.length;++p)if(p%4!=3&&s++!==h.data[p])return tp=!0,!0;return tp=!1,!1}};function Om(l,i){const s=l.indexOf("?");if(s<0)return`${l}?${new URLSearchParams(i).toString()}`;const h=new URLSearchParams(l.slice(s));for(const p in i)h.set(p,i[p]);return`${l.slice(0,s)}?${h.toString()}`}function Ws(l,i={persistentParams:[]}){const s=l.indexOf("?");if(s<0)return l;const h=new URLSearchParams,p=new URLSearchParams(l.slice(s));for(const x of i.persistentParams){const E=p.get(x);E&&h.set(x,E)}const v=h.toString();return`${l.slice(0,s)}${v.length>0?`?${v}`:""}`}const Xs="mapbox-tiles";let dc=500,cl=50;const Ea=["language","worldview","jobid"];let ul,Hd;function Lm(){try{return caches}catch{}}function Fl(){const l=Lm();l&&ul==null&&(ul=l.open(Xs))}let np=1/0;const sy={supported:!1,testSupport:function(l){!Gd&&bs&&(zc?ay(l):Cu=l)}};let Cu,bs,Gd=!1,zc=!1;const Nl=typeof self<"u"?self:{};function ay(l){const i=l.createTexture();l.bindTexture(l.TEXTURE_2D,i);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,bs),l.isContextLost())return;sy.supported=!0}catch{}l.deleteTexture(i),Gd=!0}Nl.document&&(bs=Nl.document.createElement("img"),bs.onload=function(){Cu&&ay(Cu),Cu=null,zc=!0},bs.onerror=function(){Gd=!0,Cu=null},bs.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const qd={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(qd);class ip extends Error{constructor(i,s,h){s===401&&Sa(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=s,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ji=Er()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Ca=function(l,i){if(!(/^file:/.test(s=l.url)||/^file:/.test(ji())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(h,p){const v=new AbortController,x=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:ji(),referrerPolicy:h.referrerPolicy,signal:v.signal});let E=!1,M=!1;const P=(k=x.url).indexOf("sku=")>0&&Sa(k);var k;h.type==="json"&&x.headers.set("Accept","application/json");const B=(X,Z,oe)=>{if(M)return;if(X&&X.message!=="SecurityError"&&ui(X.toString()),Z&&oe)return j(Z);const de=Date.now();fetch(x).then(me=>{if(me.ok){const Se=P?me.clone():null;return j(me,Se,de)}return p(new ip(me.statusText,me.status,h.url))}).catch(me=>{me.name!=="AbortError"&&p(new Error(`${me.message} ${h.url}`))})},j=(X,Z,oe)=>{(h.type==="arrayBuffer"?X.arrayBuffer():h.type==="json"?X.json():X.text()).then(de=>{M||(Z&&oe&&function(me,Se,be){if(Fl(),ul==null)return;const ae=Lr(Se.headers.get("Cache-Control")||"");if(ae["no-store"])return;const _e={status:Se.status,statusText:Se.statusText,headers:new Headers};Se.headers.forEach((Ge,Ze)=>_e.headers.set(Ze,Ge)),ae["max-age"]&&_e.headers.set("Expires",new Date(be+1e3*ae["max-age"]).toUTCString());const we=_e.headers.get("Expires");if(!we||new Date(we).getTime()-be<42e4)return;let Ie=Ws(me.url,{persistentParams:Ea});if(Se.status===206){const Ge=me.headers.get("Range");if(!Ge)return;_e.status=200,Ie=Om(Ie,{range:Ge})}(function(Ge,Ze){if(Hd===void 0)try{new Response(new ReadableStream),Hd=!0}catch{Hd=!1}Hd?Ze(Ge.body):Ge.blob().then(Ze).catch(Ye=>ui(Ye.message))})(Se,Ge=>{const Ze=new Response((Ye=Se.status)!==200&&Ye!==404&&[101,103,204,205,304].includes(Ye)?null:Ge,_e);var Ye;Fl(),ul!=null&&ul.then(tt=>tt.put(Ie,Ze)).catch(tt=>ui(tt.message))})}(x,Z,oe),E=!0,p(null,de,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(de=>{M||p(new Error(de.message))})};return P?function(X,Z){if(Fl(),ul==null)return Z(null);ul.then(oe=>{let de=Ws(X.url,{persistentParams:Ea});const me=X.headers.get("Range");me&&(de=Om(de,{range:me})),oe.match(de).then(Se=>{const be=function(ae){if(!ae)return!1;const _e=new Date(ae.headers.get("Expires")||0),we=Lr(ae.headers.get("Cache-Control")||"");return Number(_e)>Date.now()&&!we["no-cache"]}(Se);oe.delete(de).catch(Z),be&&oe.put(de,Se.clone()).catch(Z),Z(null,Se,be)}).catch(Z)}).catch(Z)}(x,B):B(null,null),{cancel:()=>{M=!0,E||v.abort()}}}(l,i);if(Er(self)&&self.worker.actor)return self.worker.actor.send("getResource",l,i,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(E){return p(E)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else p(new ip(v.statusText,v.status,h.url))},v.send(h.body),{cancel:()=>v.abort()}}(l,i)},Au=function(l,i){return Ca(Ke(l,{type:"arrayBuffer"}),i)};function rp(l){const i=document.createElement("a");return i.href=l,i.protocol===location.protocol&&i.host===location.host}const Bc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Fc,jl;Fc=[],jl=0;const Ih=function(l,i){if(sy.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),jl>=zo.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:l,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return Fc.push(v),v}jl++;let s=!1;const h=()=>{if(!s)for(s=!0,jl--;Fc.length&&jl<zo.MAX_PARALLEL_IMAGE_REQUESTS;){const v=Fc.shift(),{requestParameters:x,callback:E,cancelled:M}=v;M||(v.cancel=Ih(x,E).cancel)}},p=Au(l,(v,x,E,M)=>{h(),v?i(v):x&&(self.createImageBitmap?function(P,k){const B=new Blob([new Uint8Array(P)],{type:"image/png"});createImageBitmap(B).then(j=>{k(null,j)}).catch(j=>{k(new Error(`Could not load image because of ${j.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(P,k)=>i(P,k,E,M)):function(P,k){const B=new Image;B.onload=()=>{k(null,B),URL.revokeObjectURL(B.src),B.onload=null,requestAnimationFrame(()=>{B.src=Bc})},B.onerror=()=>k(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new Blob([new Uint8Array(P)],{type:"image/png"});B.src=P.byteLength?URL.createObjectURL(j):Bc}(x,(P,k)=>i(P,k,E,M)))});return{cancel:()=>{p.cancel(),h()}}};var op,Wd,Mu,ws={exports:{}},hl={exports:{}},Ph={exports:{}},Dh=function(){if(Mu)return ws.exports;Mu=1;var l=(op||(op=1,hl.exports=function(s,h){var p,v,x,E,M,P,k,B;for(v=s.length-(p=3&s.length),x=h,M=3432918353,P=461845907,B=0;B<v;)k=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24,++B,x=27492+(65535&(E=5*(65535&(x=(x^=k=(65535&(k=(k=(65535&k)*M+(((k>>>16)*M&65535)<<16)&4294967295)<<15|k>>>17))*P+(((k>>>16)*P&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(k=0,p){case 3:k^=(255&s.charCodeAt(B+2))<<16;case 2:k^=(255&s.charCodeAt(B+1))<<8;case 1:x^=k=(65535&(k=(k=(65535&(k^=255&s.charCodeAt(B)))*M+(((k>>>16)*M&65535)<<16)&4294967295)<<15|k>>>17))*P+(((k>>>16)*P&65535)<<16)&4294967295}return x^=s.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),hl.exports),i=(Wd||(Wd=1,Ph.exports=function(s,h){for(var p,v=s.length,x=h^v,E=0;v>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(E)|(255&s.charCodeAt(++E))<<8|(255&s.charCodeAt(++E))<<16|(255&s.charCodeAt(++E))<<24))+((1540483477*(p>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++E;switch(v){case 3:x^=(255&s.charCodeAt(E+2))<<16;case 2:x^=(255&s.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&s.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Ph.exports);return ws.exports=l,ws.exports.murmur3=l,ws.exports.murmur2=i,ws.exports}(),Aa=ko(Dh);class fc{constructor(i,...s){Ke(this,s[0]||{}),this.type=i}}class sp extends fc{constructor(i,s={}){super("error",Ke({error:i},s))}}function Oh(l,i,s){s[l]&&s[l].indexOf(i)!==-1||(s[l]=s[l]||[],s[l].push(i))}function Lh(l,i,s){if(s&&s[l]){const h=s[l].indexOf(i);h!==-1&&s[l].splice(h,1)}}class Ru{on(i,s){return this._listeners=this._listeners||{},Oh(i,s,this._listeners),this}off(i,s){return Lh(i,s,this._listeners),Lh(i,s,this._oneTimeListeners),this}once(i,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Oh(i,s,this._oneTimeListeners),this):new Promise(h=>{this.once(i,h)})}fire(i,s){const h=typeof i=="string"?new fc(i,s):i,p=h.type;if(this.listens(p)){h.target=this;const v=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const M of v)M.call(this,h);const x=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const M of x)Lh(p,M,this._oneTimeListeners),M.call(this,h);const E=this._eventedParent;E&&(Ke(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(h))}else h instanceof sp&&console.error(h.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,s){return this._eventedParent=i,this._eventedParentData=s,this}}class Ma{constructor(i){typeof i=="string"?this.name=i:(this.name=i.name,this.iconsetId=i.iconsetId)}static from(i){return new Ma(i)}static toString(i){return i.iconsetId?`${i.name}${i.iconsetId}`:i.name}static parse(i){const[s,h]=i.split("");return new Ma({name:s,iconsetId:h})}static isEqual(i,s){return i.name===s.name&&i.iconsetId===s.iconsetId}toString(){return Ma.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var ly,km={},kh=function(){if(ly)return km;ly=1;var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(v){return(v=Math.round(v))<0?0:v>255?255:v}function s(v){return i(v[v.length-1]==="%"?parseFloat(v)/100*255:parseInt(v))}function h(v){return(x=v[v.length-1]==="%"?parseFloat(v)/100:parseFloat(v))<0?0:x>1?1:x;var x}function p(v,x,E){return E<0?E+=1:E>1&&(E-=1),6*E<1?v+(x-v)*E*6:2*E<1?x:3*E<2?v+(x-v)*(2/3-E)*6:v}try{km.parseCSSColor=function(v){var x,E=v.replace(/ /g,"").toLowerCase();if(E in l)return l[E].slice();if(E[0]==="#")return E.length===4?(x=parseInt(E.substr(1),16))>=0&&x<=4095?[(3840&x)>>4|(3840&x)>>8,240&x|(240&x)>>4,15&x|(15&x)<<4,1]:null:E.length===7&&(x=parseInt(E.substr(1),16))>=0&&x<=16777215?[(16711680&x)>>16,(65280&x)>>8,255&x,1]:null;var M=E.indexOf("("),P=E.indexOf(")");if(M!==-1&&P+1===E.length){var k=E.substr(0,M),B=E.substr(M+1,P-(M+1)).split(","),j=1;switch(k){case"rgba":if(B.length!==4)return null;j=h(B.pop());case"rgb":return B.length!==3?null:[s(B[0]),s(B[1]),s(B[2]),j];case"hsla":if(B.length!==4)return null;j=h(B.pop());case"hsl":if(B.length!==3)return null;var X=(parseFloat(B[0])%360+360)%360/360,Z=h(B[1]),oe=h(B[2]),de=oe<=.5?oe*(Z+1):oe+Z-oe*Z,me=2*oe-de;return[i(255*p(me,de,X+1/3)),i(255*p(me,de,X)),i(255*p(me,de,X-1/3)),j];default:return null}}return null}}catch{}return km}();class ir{constructor(i,s,h,p=1){this.r=i,this.g=s,this.b=h,this.a=p}static parse(i){if(!i)return;if(i instanceof ir)return i;if(typeof i!="string")return;const s=kh.parseCSSColor(i);return s?new ir(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toStringPremultipliedAlpha(){const[i,s,h,p]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(i)},${Math.round(s)},${Math.round(h)},${p})`}toString(){const[i,s,h,p]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*i)},${Math.round(255*s)},${Math.round(255*h)},${p})`}toRenderColor(i){const{r:s,g:h,b:p,a:v}=this;return new vv(i,s,h,p,v)}clone(){return new ir(this.r,this.g,this.b,this.a)}}class vv{constructor(i,s,h,p,v){if(i){const x=i.image.height,E=x*x;s=v===0?0:s/v*(x-1),h=v===0?0:h/v*(x-1),p=v===0?0:p/v*(x-1);const M=Math.floor(s),P=Math.floor(h),k=Math.floor(p),B=Math.ceil(s),j=Math.ceil(h),X=Math.ceil(p),Z=s-M,oe=h-P,de=p-k,me=i.image.data,Se=4*(M+P*E+k*x),be=4*(M+P*E+X*x),ae=4*(M+j*E+k*x),_e=4*(M+j*E+X*x),we=4*(B+P*E+k*x),Ie=4*(B+P*E+X*x),Ge=4*(B+j*E+k*x),Ze=4*(B+j*E+X*x);if(Se<0||Ze>=me.length)throw new Error("out of range");this.r=jn(jn(jn(me[Se],me[be],de),jn(me[ae],me[_e],de),oe),jn(jn(me[we],me[Ie],de),jn(me[Ge],me[Ze],de),oe),Z)/255*v,this.g=jn(jn(jn(me[Se+1],me[be+1],de),jn(me[ae+1],me[_e+1],de),oe),jn(jn(me[we+1],me[Ie+1],de),jn(me[Ge+1],me[Ze+1],de),oe),Z)/255*v,this.b=jn(jn(jn(me[Se+2],me[be+2],de),jn(me[ae+2],me[_e+2],de),oe),jn(jn(me[we+2],me[Ie+2],de),jn(me[Ge+2],me[Ze+2],de),oe),Z)/255*v,this.a=v}else this.r=s,this.g=h,this.b=p,this.a=v}toArray(){const{r:i,g:s,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*i/p,255*s/p,255*h/p,p]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:i,g:s,b:h,a:p}=this,v=Math.min(Math.max(i/p,0),1),x=Math.min(Math.max(s/p,0),1),E=Math.min(Math.max(h/p,0),1),M=Math.min(v,x,E),P=Math.max(v,x,E),k=(M+P)/2;if(M===P)return[0,0,100*k,p];const B=P-M,j=k>.5?B/(2-P-M):B/(P+M);let X=0;return P===v?X=(x-E)/B+(x<E?6:0):P===x?X=(E-v)/B+2:P===E&&(X=(v-x)/B+4),X*=60,[Math.min(Math.max(X,0),360),Math.min(Math.max(100*j,0),100),Math.min(Math.max(100*k,0),100),p]}toArray01(){const{r:i,g:s,b:h,a:p}=this;return p===0?[0,0,0,0]:[i/p,s/p,h/p,p]}toArray01Scaled(i){const{r:s,g:h,b:p,a:v}=this;return v===0?[0,0,0]:[s/v*i,h/v*i,p/v*i]}toArray01PremultipliedAlpha(){const{r:i,g:s,b:h,a:p}=this;return[i,s,h,p]}toArray01Linear(){const{r:i,g:s,b:h,a:p}=this;return p===0?[0,0,0,0]:[Math.pow(i/p,2.2),Math.pow(s/p,2.2),Math.pow(h/p,2.2),p]}}function jn(l,i,s){return l*(1-s)+i*s}function xv(l,i,s){return l.map((h,p)=>jn(h,i[p],s))}function zm(l){return l*l*l*l*l}ir.black=new ir(0,0,0,1),ir.white=new ir(1,1,1,1),ir.transparent=new ir(0,0,0,0),ir.red=new ir(1,0,0,1),ir.blue=new ir(0,0,1,1);var ap=Object.freeze({__proto__:null,array:xv,color:function(l,i,s){return new ir(jn(l.r,i.r,s),jn(l.g,i.g,s),jn(l.b,i.b,s),jn(l.a,i.a,s))},easeIn:zm,number:jn});function lp(l,...i){for(const s of i)for(const h in s)l[h]=s[h];return l}class dl extends Error{constructor(i,s){super(s),this.message=s,this.key=i}}class zh{constructor(i,s=[]){this.parent=i,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(i){return new zh(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Iu={kind:"null"},An={kind:"number"},Ar={kind:"string"},gr={kind:"boolean"},ua={kind:"color"},Nc={kind:"object"},dr={kind:"value"},Bh={kind:"collator"},cp={kind:"formatted"},up={kind:"resolvedImage"};function Zs(l,i){return{kind:"array",itemType:l,N:i}}function jo(l){if(l.kind==="array"){const i=jo(l.itemType);return typeof l.N=="number"?`array<${i}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${i}>`}return l.kind}const Ix=[Iu,An,Ar,gr,ua,cp,Nc,Zs(dr),up];function hp(l,i){if(i.kind==="error")return null;if(l.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!hp(l.itemType,i.itemType))&&(typeof l.N!="number"||l.N===i.N))return null}else{if(l.kind===i.kind)return null;if(l.kind==="value"){for(const s of Ix)if(!hp(s,i))return null}}return`Expected ${jo(l)} but found ${jo(i)} instead.`}function cy(l,i){return i.some(s=>s.kind===l.kind)}function Pu(l,i){return i.some(s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l)}class fl{constructor(i,s,h){this.sensitivity=i?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,s){return this.collator.compare(i,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bm{constructor(i,s,h,p,v){this.text=i.normalize?i.normalize():i,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class Ls{constructor(i){this.sections=i}static fromString(i){return new Ls([new Bm(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||!!i.image&&i.image.hasPrimary())}static factory(i){return i instanceof Ls?i:Ls.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const s of this.sections){if(s.image){const p=s.image.getPrimary().id.toString();i.push(["image",p]);continue}i.push(s.text);const h={};s.fontStack&&(h["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(h["font-scale"]=s.scale),s.textColor&&(h["text-color"]=["rgba"].concat(s.textColor.toRenderColor(null).toArray())),i.push(h)}return i}}class pl{constructor(i,s={}){if(this.id=Ma.from(i),this.options=Object.assign({},s),s.transform){const{a:h,b:p,c:v,d:x,e:E,f:M}=s.transform;this.options.transform=new DOMMatrix([h,p,v,x,E,M])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:i,b:s,c:h,d:p,e:v,f:x}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:i,b:s,c:h,d:p,e:v,f:x}})}static parse(i){let s,h,p,v;try{({name:s,iconsetId:h,params:p,transform:v}=JSON.parse(i)||{})}catch{return null}if(!s)return null;const{a:x,b:E,c:M,d:P,e:k,f:B}=v||{};return new pl({name:s,iconsetId:h},{params:p,transform:new DOMMatrix([x,E,M,P,k,B])})}scaleSelf(i,s){return this.options.transform.scaleSelf(i,s),this}}class Ys{constructor(i,s,h,p,v=!1){this.primaryId=Ma.from(i),this.primaryOptions=s,h&&(this.secondaryId=Ma.from(h)),this.secondaryOptions=p,this.available=v}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new pl(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new pl(this.secondaryId,this.secondaryOptions):null}static from(i){return typeof i=="string"?Ys.build({name:i}):i}static build(i,s,h,p){return!i||typeof i=="object"&&!("name"in i)?null:new Ys(i,h,s,p)}}function uy(l,i,s,h){return typeof l=="number"&&l>=0&&l<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[l,i,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[l,i,s,h]:[l,i,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fh(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof ir||l instanceof fl||l instanceof Ls||l instanceof Ys)return!0;if(Array.isArray(l)){for(const i of l)if(!Fh(i))return!1;return!0}if(typeof l=="object"){for(const i in l)if(!Fh(l[i]))return!1;return!0}return!1}function To(l){if(l===null)return Iu;if(typeof l=="string")return Ar;if(typeof l=="boolean")return gr;if(typeof l=="number")return An;if(l instanceof ir)return ua;if(l instanceof fl)return Bh;if(l instanceof Ls)return cp;if(l instanceof Ys)return up;if(Array.isArray(l)){const i=l.length;let s;for(const h of l){const p=To(h);if(s){if(s===p)continue;s=dr;break}s=p}return Zs(s||dr,i)}return Nc}function Ks(l){const i=typeof l;return l===null?"":i==="string"||i==="number"||i==="boolean"?String(l):l instanceof ir?l.toStringPremultipliedAlpha():l instanceof Ls||l instanceof Ys?l.toString():JSON.stringify(l)}class vi{constructor(i,s){this.type=i,this.value=s}static parse(i,s){if(i.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Fh(i[1]))return s.error("invalid value");const h=i[1];let p=To(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new vi(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ir?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Ls?this.value.serialize():this.value}}class mn{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Xd={string:Ar,number:An,boolean:gr,object:Nc};class Yn{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=i[0];if(v==="array"){let E,M;if(i.length>2){const P=i[1];if(typeof P!="string"||!(P in Xd)||P==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);E=Xd[P],p++}else E=dr;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return s.error('The length argument to "array" must be a positive integer literal',2);M=i[2],p++}h=Zs(E,M)}else h=Xd[v];const x=[];for(;p<i.length;p++){const E=s.parse(i[p],p,dr);if(!E)return null;x.push(E)}return new Yn(h,x)}evaluate(i){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(i);if(!hp(this.type,To(h)))return h;if(s===this.args.length-1)throw new mn(`The expression ${JSON.stringify(this.args[s].serialize())} evaluated to ${jo(To(h))} but was expected to be of type ${jo(this.type)}.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,s=[i.kind];if(i.kind==="array"){const h=i.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){s.push(h.kind);const p=i.N;(typeof p=="number"||this.args.length>1)&&s.push(p)}}return s.concat(this.args.map(h=>h.serialize()))}}class Ul{constructor(i){this.type=cp,this.sections=i}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=i.length-1;++x){const E=i[x];if(v&&typeof E=="object"&&!Array.isArray(E)){v=!1;let M=null;if(E["font-scale"]&&(M=s.parseObjectValue(E["font-scale"],x,"font-scale",An),!M))return null;let P=null;if(E["text-font"]&&(P=s.parseObjectValue(E["text-font"],x,"text-font",Zs(Ar)),!P))return null;let k=null;if(E["text-color"]&&(k=s.parseObjectValue(E["text-color"],x,"text-color",ua),!k))return null;const B=p[p.length-1];B.scale=M,B.font=P,B.textColor=k}else{const M=s.parse(i[x],x,dr);if(!M)return null;const P=M.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:M,scale:null,font:null,textColor:null})}}return new Ul(p)}evaluate(i){return new Ls(this.sections.map(s=>{const h=s.content.evaluate(i);return To(h)===up?new Bm("",h,null,null,null):new Bm(Ks(h),null,s.scale?s.scale.evaluate(i):null,s.font?s.font.evaluate(i).join(","):null,s.textColor?s.textColor.evaluate(i):null)}))}eachChild(i){for(const s of this.sections)i(s.content),s.scale&&i(s.scale),s.font&&i(s.font),s.textColor&&i(s.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const s of this.sections){i.push(s.content.serialize());const h={};s.scale&&(h["font-scale"]=s.scale.serialize()),s.font&&(h["text-font"]=s.font.serialize()),s.textColor&&(h["text-color"]=s.textColor.serialize()),i.push(h)}return i}}class pc{constructor(i,s,h,p){this._imageWarnHistory={},this.type=up,this.namePrimary=i,this.nameSecondary=s,h&&(this.paramsPrimary=h.params,this.iconsetIdPrimary=h.iconset?h.iconset.id:void 0),p&&(this.paramsSecondary=p.params,this.iconsetIdSecondary=p.iconset?p.iconset.id:void 0)}static parse(i,s){if(i.length<2)return s.error("Expected two or more arguments.");let h=1;const p=[];function v(){if(h<i.length){const E=s.parse(i[h],h++,Ar);return E?(p.push({image:E,options:{}}),!0):(s.error(p.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function x(){if(h<i.length){const M=i[h];if((E=M)===null||typeof E!="object"||Array.isArray(E))return!0;const P=M.params,k=M.iconset,B=s.concat(h);if(!P&&!k)return h++,!0;if(P){if(typeof P!="object"||P.constructor!==Object)return B.error('Image options "params" should be an object'),!1;const j={},X=B.concat(void 0,"params");for(const Z in P){if(!Z)return X.error("Image parameter name should be non-empty"),!1;const oe=X.concat(void 0,Z).parse(P[Z],void 0,ua,void 0,{typeAnnotation:"coerce"});if(!oe)return!1;j[Z]=oe}p[p.length-1].options.params=j}if(k){if(typeof k!="object"||k.constructor!==Object)return B.error('Image options "iconset" should be an object'),!1;if(!k.id)return B.error('Image options "iconset" should have an "id" property'),!1;p[p.length-1].options.iconset=k}return h++,!0}var E;return!0}for(let E=0;E<2;E++)if(!v()||!x())return;return new pc(p[0].image,p[1]?p[1].image:void 0,p[0].options,p[1]?p[1].options:void 0)}evaluateParams(i,s){const h={};if(s){for(const p in s)if(s[p])try{h[p]=s[p].evaluate(i)}catch{continue}if(Object.keys(h).length!==0)return{params:h}}}evaluate(i){const s={name:this.namePrimary.evaluate(i),iconsetId:this.iconsetIdPrimary},h=this.nameSecondary?{name:this.nameSecondary.evaluate(i),iconsetId:this.iconsetIdSecondary}:void 0,p=Ys.build(s,h,this.paramsPrimary?this.evaluateParams(i,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(i,this.paramsSecondary):void 0);if(p&&i.availableImages){const v=p.getPrimary().id;if(p.available=i.availableImages.some(x=>Ma.isEqual(x,v)),p.available){const x=p.getSecondary()?p.getSecondary().id:null;x&&(p.available=i.availableImages.some(E=>Ma.isEqual(E,x)))}}return p}eachChild(i){if(i(this.namePrimary),this.paramsPrimary)for(const s in this.paramsPrimary)this.paramsPrimary[s]&&i(this.paramsPrimary[s]);if(this.nameSecondary&&(i(this.nameSecondary),this.paramsSecondary))for(const s in this.paramsSecondary)this.paramsSecondary[s]&&i(this.paramsSecondary[s])}outputDefined(){return!1}serializeOptions(i,s){const h={};if(s&&(h.iconset={id:s}),i){h.params={};for(const p in i)i[p]&&(h.params[p]=i[p].serialize())}return Object.keys(h).length>0?h:void 0}serialize(){const i=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const s=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);s&&i.push(s)}if(this.nameSecondary&&(i.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const s=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);s&&i.push(s)}return i}}function Jn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}const dp={"to-boolean":gr,"to-color":ua,"to-number":An,"to-string":Ar};class ml{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");const h=i[0],p=[];let v=Iu;if(h==="to-array"){if(!Array.isArray(i[1]))return null;const x=i[1].length;if(s.expectedType){if(s.expectedType.kind!=="array")return s.error(`Expected ${s.expectedType.kind} but found array.`);v=Zs(s.expectedType.itemType,x)}else{if(!(x>0&&Fh(i[1][0])))return null;v=Zs(To(i[1][0]),x)}for(let E=0;E<x;E++){const M=i[1][E];let P;if(Jn(M)==="array")P=s.parse(M,void 0,v.itemType);else{const k=Jn(M);if(k!==v.itemType.kind)return s.error(`Expected ${v.itemType.kind} but found ${k}.`);P=s.registry.literal.parse(["literal",M===void 0?null:M],s)}if(!P)return null;p.push(P)}}else{if((h==="to-boolean"||h==="to-string")&&i.length!==2)return s.error("Expected one argument.");v=dp[h];for(let x=1;x<i.length;x++){const E=s.parse(i[x],x,dr);if(!E)return null;p.push(E)}}return new ml(v,p)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let s,h;for(const p of this.args){if(s=p.evaluate(i),h=null,s instanceof ir)return s;if(typeof s=="string"){const v=i.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:uy(s[0],s[1],s[2],s[3]),!h))return new ir(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new mn(h||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const h of this.args){if(s=h.evaluate(i),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new mn(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Ls.fromString(Ks(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Ys.build(Ks(this.args[0].evaluate(i))):this.type.kind==="array"?this.args.map(s=>s.evaluate(i)):Ks(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ul([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new pc(this.args[0]).serialize();const i=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(s=>{i.push(s.serialize())}),i}}const hy=["Unknown","Point","LineString","Polygon"];class Zd{constructor(i,s){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=s}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:h,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*s-i[0])+this.featureDistanceData.bearing[1]*(p*s-i[1])}return 0}parseColor(i){let s=this._parseColorCache[i];return s||(s=this._parseColorCache[i]=ir.parse(i)),s}getConfig(i){return this.options?this.options.get(i):null}}class fs{constructor(i,s,h,p,v){this.name=i,this.type=s,this._evaluate=h,this.args=p,this._overloadIndex=v}evaluate(i){if(!this._evaluate){const s=fs.definitions[this.name];this._evaluate=Array.isArray(s)?s[2]:s.overloads[this._overloadIndex][1]}return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,s){const h=i[0],p=fs.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,E=[];let M=null,P=-1;for(const[k,B]of x){if(Array.isArray(k)&&k.length!==i.length-1)continue;E.push(k),P++,M=new Wl(s.registry,s.path,null,s.scope,void 0,s._scope,s.options);const j=[];let X=!1;for(let Z=1;Z<i.length;Z++){const oe=i[Z],de=Array.isArray(k)?k[Z-1]:k.type,me=M.parse(oe,1+j.length,de);if(!me){X=!0;break}j.push(me)}if(!X)if(Array.isArray(k)&&k.length!==j.length)M.error(`Expected ${k.length} arguments, but found ${j.length} instead.`);else{for(let Z=0;Z<j.length;Z++){const oe=Array.isArray(k)?k[Z]:k.type,de=j[Z];M.concat(Z+1).checkSubtype(oe,de.type)}if(M.errors.length===0)return new fs(h,v,B,j,P)}}if(E.length===1)s.errors.push(...M.errors);else{const k=(E.length?E:x.map(([j])=>j)).map(ks).join(" | "),B=[];for(let j=1;j<i.length;j++){const X=s.parse(i[j],1+B.length);if(!X)return null;B.push(jo(X.type))}s.error(`Expected arguments of type ${k}, but found (${B.join(", ")}) instead.`)}return null}static register(i,s){fs.definitions=s;for(const h in s)i[h]=fs}}function ks(l){return Array.isArray(l)?`(${l.map(jo).join(", ")})`:`(${jo(l.type)}...)`}class Nh{constructor(i,s,h){this.type=Bh,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=s}static parse(i,s){if(i.length!==2)return s.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=h["case-sensitive"]===void 0?s.parse(!1,1,gr):s.parseObjectValue(h["case-sensitive"],1,"case-sensitive",gr);if(!p)return null;const v=h["diacritic-sensitive"]===void 0?s.parse(!1,1,gr):s.parseObjectValue(h["diacritic-sensitive"],1,"diacritic-sensitive",gr);if(!v)return null;let x=null;return h.locale&&(x=s.parseObjectValue(h.locale,1,"locale",Ar),!x)?null:new Nh(p,v,x)}evaluate(i){return new fl(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}function jc(l,i,s=0,h=l.length-1,p=Uh){for(;h>s;){if(h-s>600){const M=h-s+1,P=i-s+1,k=Math.log(M),B=.5*Math.exp(2*k/3),j=.5*Math.sqrt(k*B*(M-B)/M)*(P-M/2<0?-1:1);jc(l,i,Math.max(s,Math.floor(i-P*B/M+j)),Math.min(h,Math.floor(i+(M-P)*B/M+j)),p)}const v=l[i];let x=s,E=h;for(jh(l,s,i),p(l[h],v)>0&&jh(l,s,h);x<E;){for(jh(l,x,E),x++,E--;p(l[x],v)<0;)x++;for(;p(l[E],v)>0;)E--}p(l[s],v)===0?jh(l,s,E):(E++,jh(l,E,h)),E<=i&&(s=E+1),i<=E&&(h=E-1)}}function jh(l,i,s){const h=l[i];l[i]=l[s],l[s]=h}function Uh(l,i){return l<i?-1:l>i?1:0}function Js(l){let i=0;for(let s,h,p=0,v=l.length,x=v-1;p<v;x=p++)s=l[p],h=l[x],i+=(h.x-s.x)*(s.y+h.y);return i}function fp(l,i){l[0]=Math.min(l[0],i[0]),l[1]=Math.min(l[1],i[1]),l[2]=Math.max(l[2],i[0]),l[3]=Math.max(l[3],i[1])}function pp(l,i){return!(l[0]<=i[0]||l[2]>=i[2]||l[1]<=i[1]||l[3]>=i[3])}function Wa(l,i,s){const h=l[0]-i[0],p=l[1]-i[1],v=l[0]-s[0],x=l[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function Xa(l,i,s=!1){let h=!1;for(let E=0,M=i.length;E<M;E++){const P=i[E];for(let k=0,B=P.length,j=B-1;k<B;j=k++){const X=P[j],Z=P[k];if(Wa(l,X,Z))return s;(v=X)[1]>(p=l)[1]!=(x=Z)[1]>p[1]&&p[0]<(x[0]-v[0])*(p[1]-v[1])/(x[1]-v[1])+v[0]&&(h=!h)}}var p,v,x;return h}function Fm(l,i,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(l[0]-s[0])*v-p*(l[1]-s[1]),E=(i[0]-s[0])*v-p*(i[1]-s[1]);return x>0&&E<0||x<0&&E>0}function Vl(l,i,s,h){return(p=[h[0]-s[0],h[1]-s[1]])[0]*(v=[i[0]-l[0],i[1]-l[1]])[1]-p[1]*v[0]!=0&&!(!Fm(l,i,s,h)||!Fm(s,h,l,i));var p,v}function Nm(l){const i=new Zt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),s=new Zt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const h of l[0])i.x>h.x&&(i.x=h.x),i.y>h.y&&(i.y=h.y),s.x<h.x&&(s.x=h.x),s.y<h.y&&(s.y=h.y);return{min:i,max:s}}const Uc=8192;function dy(l,i){const s=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(s*p*Uc),Math.round(h*p*Uc)]}function Px(l,i){for(let s=0;s<i.length;s++)if(Xa(l,i[s]))return!0;return!1}function Vh(l,i,s){for(const h of s)for(let p=0,v=h.length,x=v-1;p<v;x=p++)if(Vl(l,i,h[x],h[p]))return!0;return!1}function jm(l,i){for(let s=0;s<l.length;++s)if(!Xa(l[s],i))return!1;for(let s=0;s<l.length-1;++s)if(Vh(l[s],l[s+1],i))return!1;return!0}function mp(l,i){for(let s=0;s<i.length;s++)if(jm(l,i[s]))return!0;return!1}function Yd(l,i,s){const h=[];for(let p=0;p<l.length;p++){const v=[];for(let x=0;x<l[p].length;x++){const E=dy(l[p][x],s);fp(i,E),v.push(E)}h.push(v)}return h}function fy(l,i,s){const h=[];for(let p=0;p<l.length;p++){const v=Yd(l[p],i,s);h.push(v)}return h}function Ra(l,i,s,h){if(l[0]<s[0]||l[0]>s[2]){const p=.5*h;let v=l[0]-s[0]>p?-h:s[0]-l[0]>p?h:0;v===0&&(v=l[0]-s[2]>p?-h:s[2]-l[0]>p?h:0),l[0]+=v}fp(i,l)}function $h(l,i,s,h){const p=Math.pow(2,h.z)*Uc,v=[h.x*Uc,h.y*Uc],x=[];if(!l)return x;for(const E of l)for(const M of E){const P=[M.x+v[0],M.y+v[1]];Ra(P,i,s,p),x.push(P)}return x}function Um(l,i,s,h){const p=Math.pow(2,h.z)*Uc,v=[h.x*Uc,h.y*Uc],x=[];if(!l)return x;for(const M of l){const P=[];for(const k of M){const B=[k.x+v[0],k.y+v[1]];fp(i,B),P.push(B)}x.push(P)}if(i[2]-i[0]<=p/2){(E=i)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const M of x)for(const P of M)Ra(P,i,s,p)}var E;return x}class mc{constructor(i,s){this.type=gr,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Fh(i[1])){const h=i[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new mc(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new mc(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new mc(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const E=Yd(h.coordinates,v,x),M=$h(s.geometry(),p,v,x);if(!pp(p,v))return!1;for(const P of M)if(!Xa(P,E))return!1}if(h.type==="MultiPolygon"){const E=fy(h.coordinates,v,x),M=$h(s.geometry(),p,v,x);if(!pp(p,v))return!1;for(const P of M)if(!Px(P,E))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const E=Yd(h.coordinates,v,x),M=Um(s.geometry(),p,v,x);if(!pp(p,v))return!1;for(const P of M)if(!jm(P,E))return!1}if(h.type==="MultiPolygon"){const E=fy(h.coordinates,v,x),M=Um(s.geometry(),p,v,x);if(!pp(p,v))return!1;for(const P of M)if(!mp(P,E))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const $l={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Vm=1/298.257223563,Za=Vm*(2-Vm),Hh=Math.PI/180;class Kd{static fromTile(i,s,h){const p=Math.PI*(1-2*(i+.5)/Math.pow(2,s)),v=Math.atan(.5*(Math.exp(p)-Math.exp(-p)))/Hh;return new Kd(v,h)}static get units(){return $l}constructor(i,s){if(i===void 0)throw new Error("No latitude given.");if(s&&!$l[s])throw new Error(`Unknown unit ${s}. Use one of: ${Object.keys($l).join(", ")}`);const h=6378.137*Hh*(s?$l[s]:1),p=Math.cos(i*Hh),v=1/(1-Za*(1-p*p)),x=Math.sqrt(v);this.kx=h*x*p,this.ky=h*x*v*(1-Za)}distance(i,s){const h=Ia(i[0]-s[0])*this.kx,p=(i[1]-s[1])*this.ky;return Math.sqrt(h*h+p*p)}bearing(i,s){const h=Ia(s[0]-i[0])*this.kx;return Math.atan2(h,(s[1]-i[1])*this.ky)/Hh}destination(i,s,h){const p=h*Hh;return this.offset(i,Math.sin(p)*s,Math.cos(p)*s)}offset(i,s,h){return[i[0]+s/this.kx,i[1]+h/this.ky]}lineDistance(i){let s=0;for(let h=0;h<i.length-1;h++)s+=this.distance(i[h],i[h+1]);return s}area(i){let s=0;for(let h=0;h<i.length;h++){const p=i[h];for(let v=0,x=p.length,E=x-1;v<x;E=v++)s+=Ia(p[v][0]-p[E][0])*(p[v][1]+p[E][1])*(h?-1:1)}return Math.abs(s)/2*this.kx*this.ky}along(i,s){let h=0;if(s<=0)return i[0];for(let p=0;p<i.length-1;p++){const v=i[p],x=i[p+1],E=this.distance(v,x);if(h+=E,h>s)return $m(v,x,(s-(h-E))/E)}return i[i.length-1]}pointToSegmentDistance(i,s,h){let[p,v]=s,x=Ia(h[0]-p)*this.kx,E=(h[1]-v)*this.ky;if(x!==0||E!==0){const M=(Ia(i[0]-p)*this.kx*x+(i[1]-v)*this.ky*E)/(x*x+E*E);M>1?(p=h[0],v=h[1]):M>0&&(p+=x/this.kx*M,v+=E/this.ky*M)}return x=Ia(i[0]-p)*this.kx,E=(i[1]-v)*this.ky,Math.sqrt(x*x+E*E)}pointOnLine(i,s){let h=1/0,p=i[0][0],v=i[0][1],x=0,E=0;for(let M=0;M<i.length-1;M++){let P=i[M][0],k=i[M][1],B=Ia(i[M+1][0]-P)*this.kx,j=(i[M+1][1]-k)*this.ky,X=0;B===0&&j===0||(X=(Ia(s[0]-P)*this.kx*B+(s[1]-k)*this.ky*j)/(B*B+j*j),X>1?(P=i[M+1][0],k=i[M+1][1]):X>0&&(P+=B/this.kx*X,k+=j/this.ky*X)),B=Ia(s[0]-P)*this.kx,j=(s[1]-k)*this.ky;const Z=B*B+j*j;Z<h&&(h=Z,p=P,v=k,x=M,E=X)}return{point:[p,v],index:x,t:Math.max(0,Math.min(1,E))}}lineSlice(i,s,h){let p=this.pointOnLine(h,i),v=this.pointOnLine(h,s);if(p.index>v.index||p.index===v.index&&p.t>v.t){const P=p;p=v,v=P}const x=[p.point],E=p.index+1,M=v.index;!py(h[E],x[0])&&E<=M&&x.push(h[E]);for(let P=E+1;P<=M;P++)x.push(h[P]);return py(h[M],v.point)||x.push(v.point),x}lineSliceAlong(i,s,h){let p=0;const v=[];for(let x=0;x<h.length-1;x++){const E=h[x],M=h[x+1],P=this.distance(E,M);if(p+=P,p>i&&v.length===0&&v.push($m(E,M,(i-(p-P))/P)),p>=s)return v.push($m(E,M,(s-(p-P))/P)),v;p>i&&v.push(M)}return v}bufferPoint(i,s){const h=s/this.ky,p=s/this.kx;return[i[0]-p,i[1]-h,i[0]+p,i[1]+h]}bufferBBox(i,s){const h=s/this.ky,p=s/this.kx;return[i[0]-p,i[1]-h,i[2]+p,i[3]+h]}insideBBox(i,s){return Ia(i[0]-s[0])>=0&&Ia(i[0]-s[2])<=0&&i[1]>=s[1]&&i[1]<=s[3]}}function py(l,i){return l[0]===i[0]&&l[1]===i[1]}function $m(l,i,s){const h=Ia(i[0]-l[0]);return[l[0]+h*s,l[1]+(i[1]-l[1])*s]}function Ia(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}class gp{constructor(i=[],s=(h,p)=>h<p?-1:h>p?1:0){if(this.data=i,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:s,compare:h}=this,p=s[i];for(;i>0;){const v=i-1>>1,x=s[v];if(h(p,x)>=0)break;s[i]=x,i=v}s[i]=p}_down(i){const{data:s,compare:h}=this,p=this.length>>1,v=s[i];for(;i<p;){let x=1+(i<<1);const E=x+1;if(E<this.length&&h(s[E],s[x])<0&&(x=E),h(s[x],v)>=0)break;s[i]=s[x],i=x}s[i]=v}}var Qt=8192;function Ya(l,i){return i.dist-l.dist}const yp=100,ha=50;function Pa(l){const i=[1/0,1/0,-1/0,-1/0];if(i.length!==l.length)return!1;for(let s=0;s<i.length;s++)if(i[s]!==l[s])return!1;return!0}function gl(l){return l[1]-l[0]+1}function Da(l,i){const s=l[1]>=l[0]&&l[1]<i;return s||console.warn("Distance Expression: Index is out of range"),s}function Vc(l,i){if(l[0]>l[1])return[null,null];const s=gl(l);if(i){if(s===2)return[l,null];const h=Math.floor(s/2);return[[l[0],l[0]+h],[l[0]+h,l[1]]]}{if(s===1)return[l,null];const h=Math.floor(s/2)-1;return[[l[0],l[0]+h],[l[0]+h+1,l[1]]]}}function Hl(l,i){const s=[1/0,1/0,-1/0,-1/0];if(!Da(i,l.length))return s;for(let h=i[0];h<=i[1];++h)fp(s,l[h]);return s}function Gh(l){const i=[1/0,1/0,-1/0,-1/0];for(let s=0;s<l.length;++s)for(let h=0;h<l[s].length;++h)fp(i,l[s][h]);return i}function yl(l,i,s){if(Pa(l)||Pa(i))return NaN;let h=0,p=0;return l[2]<i[0]&&(h=i[0]-l[2]),l[0]>i[2]&&(h=l[0]-i[2]),l[1]>i[3]&&(p=l[1]-i[3]),l[3]<i[1]&&(p=i[1]-l[3]),s.distance([0,0],[h,p])}function qh(l){return 360*l-180}function Oi(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Du(l,i){const s=Math.pow(2,i.z),h=(l.y/Qt+i.y)/s;return[qh((l.x/Qt+i.x)/s),Oi(h)]}function Dx(l,i){const s=[];for(let h=0;h<l.length;++h)s.push(Du(l[h],i));return s}function Oa(l,i,s){const h=s.pointOnLine(i,l).point;return s.distance(l,h)}function _p(l,i,s,h,p){const v=s.slice(h[0],h[1]+1);let x=1/0;for(let E=i[0];E<=i[1];++E)if((x=Math.min(x,Oa(l[E],v,p)))===0)return 0;return x}function Gl(l,i,s,h,p){const v=Math.min(p.pointToSegmentDistance(l,s,h),p.pointToSegmentDistance(i,s,h)),x=Math.min(p.pointToSegmentDistance(s,l,i),p.pointToSegmentDistance(h,l,i));return Math.min(v,x)}function lo(l,i,s,h,p){if(!Da(i,l.length)||!Da(h,s.length))return NaN;let v=1/0;for(let x=i[0];x<i[1];++x)for(let E=h[0];E<h[1];++E){if(Vl(l[x],l[x+1],s[E],s[E+1]))return 0;v=Math.min(v,Gl(l[x],l[x+1],s[E],s[E+1],p))}return v}function Hm(l,i,s,h,p){if(!Da(i,l.length)||!Da(h,s.length))return NaN;let v=1/0;for(let x=i[0];x<=i[1];++x)for(let E=h[0];E<=h[1];++E)if((v=Math.min(v,p.distance(l[x],s[E])))===0)return v;return v}function Wh(l,i,s){if(Xa(l,i,!0))return 0;let h=1/0;for(const p of i){const v=p.length;if(v<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(p[0]!==p[v-1]&&(h=Math.min(h,s.pointToSegmentDistance(l,p[v-1],p[0])))===0||(h=Math.min(h,Oa(l,p,s)))===0)return h}return h}function my(l,i,s,h){if(!Da(i,l.length))return NaN;for(let v=i[0];v<=i[1];++v)if(Xa(l[v],s,!0))return 0;let p=1/0;for(let v=i[0];v<i[1];++v)for(const x of s)for(let E=0,M=x.length,P=M-1;E<M;P=E++){if(Vl(l[v],l[v+1],x[P],x[E]))return 0;p=Math.min(p,Gl(l[v],l[v+1],x[P],x[E],h))}return p}function Gm(l,i){for(const s of l)for(let h=0;h<=s.length-1;++h)if(Xa(s[h],i,!0))return!0;return!1}function Jd(l,i,s,h=1/0){const p=Gh(l),v=Gh(i);if(h!==1/0&&yl(p,v,s)>=h)return h;if(pp(p,v)){if(Gm(l,i))return 0}else if(Gm(i,l))return 0;let x=h;for(const E of l)for(let M=0,P=E.length,k=P-1;M<P;k=M++)for(const B of i)for(let j=0,X=B.length,Z=X-1;j<X;Z=j++){if(Vl(E[k],E[M],B[Z],B[j]))return 0;x=Math.min(x,Gl(E[k],E[M],B[Z],B[j],s))}return x}function $c(l,i,s,h,p,v,x){if(v===null||x===null)return;const E=yl(Hl(h,v),Hl(p,x),s);E<i&&l.push({dist:E,range1:v,range2:x})}function qm(l,i,s,h,p=1/0){let v=Math.min(h.distance(l[0],s[0][0]),p);if(v===0)return v;const x=new gp([{dist:0,range1:[0,l.length-1],range2:[0,0]}],Ya),E=i?ha:yp,M=Gh(s);for(;x.length;){const P=x.pop();if(P.dist>=v)continue;const k=P.range1;if(gl(k)<=E){if(!Da(k,l.length))return NaN;if(i){const B=my(l,k,s,h);if((v=Math.min(v,B))===0)return v}else for(let B=k[0];B<=k[1];++B){const j=Wh(l[B],s,h);if((v=Math.min(v,j))===0)return v}}else{const B=Vc(k,i);if(B[0]!==null){const j=yl(Hl(l,B[0]),M,h);j<v&&x.push({dist:j,range1:B[0],range2:[0,0]})}if(B[1]!==null){const j=yl(Hl(l,B[1]),M,h);j<v&&x.push({dist:j,range1:B[1],range2:[0,0]})}}}return v}function vp(l,i,s,h,p,v=1/0){let x=Math.min(v,p.distance(l[0],s[0]));if(x===0)return x;const E=new gp([{dist:0,range1:[0,l.length-1],range2:[0,s.length-1]}],Ya),M=i?ha:yp,P=h?ha:yp;for(;E.length;){const k=E.pop();if(k.dist>=x)continue;const B=k.range1,j=k.range2;if(gl(B)<=M&&gl(j)<=P){if(!Da(B,l.length)||!Da(j,s.length))return NaN;if(i&&h?x=Math.min(x,lo(l,B,s,j,p)):i||h?i&&!h?x=Math.min(x,_p(s,j,l,B,p)):!i&&h&&(x=Math.min(x,_p(l,B,s,j,p))):x=Math.min(x,Hm(l,B,s,j,p)),x===0)return x}else{const X=Vc(B,i),Z=Vc(j,h);$c(E,x,p,l,s,X[0],Z[0]),$c(E,x,p,l,s,X[0],Z[1]),$c(E,x,p,l,s,X[1],Z[0]),$c(E,x,p,l,s,X[1],Z[1])}}return x}function La(l,i,s,h,p=1/0){let v=p;const x=Hl(l,[0,l.length-1]);for(const E of s)if(!(v!==1/0&&yl(x,Hl(E,[0,E.length-1]),h)>=v)&&(v=Math.min(v,vp(l,i,E,!0,h,v)),v===0))return v;return v}function da(l,i,s,h,p=1/0){let v=p;const x=Hl(l,[0,l.length-1]);for(const E of s){if(v!==1/0&&yl(x,Gh(E),h)>=v)continue;const M=qm(l,i,E,h,v);if(isNaN(M))return M;if((v=Math.min(v,M))===0)return v}return v}function Hc(l){return l==="Point"||l==="MultiPoint"||l==="LineString"||l==="MultiLineString"||l==="Polygon"||l==="MultiPolygon"}class fa{constructor(i,s){this.type=An,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'distance' expression requires either one argument, but found ' ${i.length-1} instead.`);if(Fh(i[1])){const h=i[1];if(h.type==="FeatureCollection"){for(let p=0;p<h.features.length;++p)if(Hc(h.features[p].geometry.type))return new fa(h,h.features[p].geometry)}else if(h.type==="Feature"){if(Hc(h.geometry.type))return new fa(h,h.geometry)}else if(Hc(h.type))return new fa(h,h)}return s.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(i){const s=i.geometry(),h=i.canonicalID();if(s!=null&&h!=null){if(i.geometryType()==="Point")return function(p,v,x){const E=[];for(const P of p)for(const k of P)E.push(Du(k,v));const M=new Kd(E[0][1],"meters");return x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString"?vp(E,!1,x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",M):x.type==="MultiLineString"?La(E,!1,x.coordinates,M):x.type==="Polygon"||x.type==="MultiPolygon"?da(E,!1,x.type==="Polygon"?[x.coordinates]:x.coordinates,M):null}(s,h,this.geometries);if(i.geometryType()==="LineString")return function(p,v,x){const E=[];for(const P of p){const k=[];for(const B of P)k.push(Du(B,v));E.push(k)}const M=new Kd(E[0][0][1],"meters");if(x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString")return La(x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",E,M);if(x.type==="MultiLineString"){let P=1/0;for(let k=0;k<x.coordinates.length;k++){const B=La(x.coordinates[k],!0,E,M,P);if(isNaN(B))return B;if((P=Math.min(P,B))===0)return P}return P}if(x.type==="Polygon"||x.type==="MultiPolygon"){let P=1/0;for(let k=0;k<E.length;k++){const B=da(E[k],!0,x.type==="Polygon"?[x.coordinates]:x.coordinates,M,P);if(isNaN(B))return B;if((P=Math.min(P,B))===0)return P}return P}return null}(s,h,this.geometries);if(i.geometryType()==="Polygon")return function(p,v,x){const E=[];for(const P of function(k,B){const j=k.length;if(j<=1)return[k];const X=[];let Z,oe;for(let de=0;de<j;de++){const me=Js(k[de]);me!==0&&(k[de].area=Math.abs(me),oe===void 0&&(oe=me<0),oe===me<0?(Z&&X.push(Z),Z=[k[de]]):Z.push(k[de]))}return Z&&X.push(Z),X}(p)){const k=[];for(let B=0;B<P.length;++B)k.push(Dx(P[B],v));E.push(k)}const M=new Kd(E[0][0][0][1],"meters");if(x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString")return da(x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",E,M);if(x.type==="MultiLineString"){let P=1/0;for(let k=0;k<x.coordinates.length;k++){const B=da(x.coordinates[k],!0,E,M,P);if(isNaN(B))return B;if((P=Math.min(P,B))===0)return P}return P}return x.type==="Polygon"||x.type==="MultiPolygon"?function(P,k,B){let j=1/0;for(const X of P)for(const Z of k){const oe=Jd(X,Z,B,j);if(isNaN(oe))return oe;if((j=Math.min(j,oe))===0)return j}return j}(x.type==="Polygon"?[x.coordinates]:x.coordinates,E,M):null}(s,h,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ql(l,i){switch(l){case"string":return Ks(i);case"number":return+i;case"boolean":return!!i;case"color":return ir.parse(i);case"formatted":return Ls.fromString(Ks(i));case"resolvedImage":return Ys.build(Ks(i))}return i}function Ou(l,i,s,h){return h!==void 0&&(l=h*Math.round(l/h)),i!==void 0&&l<i&&(l=i),s!==void 0&&l>s&&(l=s),l}class Xh{constructor(i,s,h){this.type=i,this.key=s,this.scope=h}static parse(i,s){let h=s.expectedType;if(h==null&&(h=dr),i.length<2||i.length>3)return s.error("Invalid number of arguments for 'config' expression.");const p=s.parse(i[1],1);if(!(p instanceof vi))return s.error("Key name of 'config' expression must be a string literal.");if(i.length>=3){const v=s.parse(i[2],2);return v instanceof vi?new Xh(h,Ks(p.value),Ks(v.value)):s.error("Scope of 'config' expression must be a string literal.")}return new Xh(h,Ks(p.value))}evaluate(i){const s=[this.key,this.scope,i.scope].filter(Boolean).join(""),h=i.getConfig(s);if(!h)return null;const{type:p,value:v,values:x,minValue:E,maxValue:M,stepValue:P}=h,k=h.default.evaluate(i);let B=k;if(v){const j=i.scope;i.scope=(j||"").split("").slice(1).join(""),B=v.evaluate(i),i.scope=j}return p&&(B=ql(p,B)),B===void 0||E===void 0&&M===void 0&&P===void 0||(typeof B=="number"?B=Ou(B,E,M,P):Array.isArray(B)&&(B=B.map(j=>typeof j=="number"?Ou(j,E,M,P):j))),v!==void 0&&B!==void 0&&x&&!x.includes(B)&&(B=k,p&&(B=ql(p,B))),(p&&p!==this.type||B!==void 0&&To(B)!==this.type)&&(B=ql(this.type.kind,B)),B}eachChild(){}outputDefined(){return!1}serialize(){const i=["config",this.key];return this.scope&&i.concat(this.key),i}}function Zh(l){if(l instanceof fs&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof mc||l instanceof fa)return!1;let i=!0;return l.eachChild(s=>{i&&!Zh(s)&&(i=!1)}),i}function Qd(l){if(l instanceof fs&&l.name==="feature-state")return!1;let i=!0;return l.eachChild(s=>{i&&!Qd(s)&&(i=!1)}),i}function Ss(l){if(l instanceof Xh)return new Set([l.key]);let i=new Set;return l.eachChild(s=>{i=new Set([...i,...Ss(s)])}),i}function Eo(l,i){if(l instanceof fs&&i.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild(h=>{s&&!Eo(h,i)&&(s=!1)}),s}class io{constructor(i,s){this.type=s.type,this.name=i,this.boundExpression=s}static parse(i,s){if(i.length!==2||typeof i[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=i[1];return s.scope.has(h)?new io(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Gc{constructor(i,s=[],h,p=new zh,v=[],x,E){this.registry=i,this.path=s,this.key=s.map(M=>typeof M=="string"?`['${M}']`:`[${M}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h,this._scope=x,this.options=E}parse(i,s,h,p,v={}){return s||h?this.concat(s,null,h,p)._parse(i,v):this._parse(i,v)}parseObjectValue(i,s,h,p,v,x={}){return this.concat(s,h,p,v)._parse(i,x)}_parse(i,s){function h(p,v,x){return x==="assert"?new Yn(v,[p]):x==="coerce"?new ml(v,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=typeof i[0]=="string"?this.registry[i[0]]:void 0;if(p){let v=p.parse(i,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,E=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||E.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(x,E))return null}else v=h(v,x,s.typeAnnotation||"coerce");else v=h(v,x,s.typeAnnotation||"assert")}if(!(v instanceof vi)&&v.type.kind!=="resolvedImage"&&xp(v)){const x=new Zd(this._scope,this.options);try{v=new vi(v.type,v.evaluate(x))}catch(E){return this.error(E.message),null}}return v}return ml.parse(["to-array",i],this)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,s,h,p){let v=typeof i=="number"?this.path.concat(i):this.path;v=typeof s=="string"?v.concat(s):v;const x=p?this.scope.concat(p):this.scope;return new Gc(this.registry,v,h||null,x,this.errors,this._scope,this.options)}error(i,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new dl(h,i))}checkSubtype(i,s){const h=hp(i,s);return h&&this.error(h),h}}var Wl=Gc;function xp(l){if(l instanceof io)return xp(l.boundExpression);if(l instanceof fs&&l.name==="error"||l instanceof Nh||l instanceof mc||l instanceof fa||l instanceof Xh)return!1;const i=l instanceof ml||l instanceof Yn;let s=!0;return l.eachChild(h=>{s=i?s&&xp(h):s&&h instanceof vi}),!!s&&Zh(l)&&Eo(l,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function gc(l,i){const s=l.length-1;let h,p,v=0,x=s,E=0;for(;v<=x;)if(E=Math.floor((v+x)/2),h=l[E],p=l[E+1],h<=i){if(E===s||i<p)return E;v=E+1}else{if(!(h>i))throw new mn("Input is not a number.");x=E-1}return 0}class ef{constructor(i,s,h){this.type=i,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(i,s){if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(i[1],1,An);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<i.length;x+=2){const E=x===1?-1/0:i[x],M=i[x+1],P=x,k=x+1;if(typeof E!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(p.length&&p[p.length-1][0]>=E)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const B=s.parse(M,k,v);if(!B)return null;v=v||B.type,p.push([E,B])}return new ef(v,h,p)}evaluate(i){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=s[0])return h[0].evaluate(i);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(i):h[gc(s,p)].evaluate(i)}eachChild(i){i(this.input);for(const s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&i.push(this.labels[s]),i.push(this.outputs[s].serialize());return i}}const gy=.95047,tf=1.08883,nf=4/29,Yh=6/29,rf=3*Yh*Yh,yy=Yh*Yh*Yh,qc=Math.PI/180,Wc=180/Math.PI;function Xl(l){return l>yy?Math.pow(l,1/3):l/rf+nf}function Zl(l){return l>Yh?l*l*l:rf*(l-nf)}function bp(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function wp(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Kh(l){const i=wp(l.r),s=wp(l.g),h=wp(l.b),p=Xl((.4124564*i+.3575761*s+.1804375*h)/gy),v=Xl((.2126729*i+.7151522*s+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-Xl((.0193339*i+.119192*s+.9503041*h)/tf)),alpha:l.a}}function of(l){let i=(l.l+16)/116,s=isNaN(l.a)?i:i+l.a/500,h=isNaN(l.b)?i:i-l.b/200;return i=1*Zl(i),s=gy*Zl(s),h=tf*Zl(h),new ir(bp(3.2404542*s-1.5371385*i-.4985314*h),bp(-.969266*s+1.8760108*i+.041556*h),bp(.0556434*s-.2040259*i+1.0572252*h),l.alpha)}function _l(l,i,s){const h=i-l;return l+s*(h>180||h<-180?h-360*Math.round(h/360):h)}const ns={forward:Kh,reverse:of,interpolate:function(l,i,s){return{l:jn(l.l,i.l,s),a:jn(l.a,i.a,s),b:jn(l.b,i.b,s),alpha:jn(l.alpha,i.alpha,s)}}},Xc={forward:function(l){const{l:i,a:s,b:h}=Kh(l),p=Math.atan2(h,s)*Wc;return{h:p<0?p+360:p,c:Math.sqrt(s*s+h*h),l:i,alpha:l.a}},reverse:function(l){const i=l.h*qc,s=l.c;return of({l:l.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:l.alpha})},interpolate:function(l,i,s){return{h:_l(l.h,i.h,s),c:jn(l.c,i.c,s),l:jn(l.l,i.l,s),alpha:jn(l.alpha,i.alpha,s)}}};var _y=Object.freeze({__proto__:null,hcl:Xc,lab:ns});class pa{constructor(i,s,h,p,v){this.type=i,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,E]of v)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(i,s,h,p){let v=0;if(i.name==="exponential")v=Sp(s,i.base,h,p);else if(i.name==="linear")v=Sp(s,1,h,p);else if(i.name==="cubic-bezier"){const x=i.controlPoints;v=new Bl(x[0],x[1],x[2],x[3]).solve(Sp(s,1,h,p))}return v}static parse(i,s){let[h,p,v,...x]=i;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const P=p[1];if(typeof P!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:P}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const P=p.slice(1);if(P.length!==4||P.some(k=>typeof k!="number"||k<0||k>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:P}}}if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length-1>3&&(i.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,An),!v)return null;const E=[];let M=null;h==="interpolate-hcl"||h==="interpolate-lab"?M=ua:s.expectedType&&s.expectedType.kind!=="value"&&(M=s.expectedType);for(let P=0;P<x.length;P+=2){const k=x[P],B=x[P+1],j=P+3,X=P+4;if(typeof k!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(E.length&&E[E.length-1][0]>=k)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const Z=s.parse(B,X,M);if(!Z)return null;M=M||Z.type,E.push([k,Z])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new pa(M,h,p,v,E):s.error(`Type ${jo(M)} is not interpolatable.`)}evaluate(i){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=s[0])return h[0].evaluate(i);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(i);const x=gc(s,p),E=pa.interpolationFactor(this.interpolation,p,s[x],s[x+1]),M=h[x].evaluate(i),P=h[x+1].evaluate(i);return this.operator==="interpolate"?ap[this.type.kind.toLowerCase()](M,P,E):this.operator==="interpolate-hcl"?Xc.reverse(Xc.interpolate(Xc.forward(M),Xc.forward(P),E)):ns.reverse(ns.interpolate(ns.forward(M),ns.forward(P),E))}eachChild(i){i(this.input);for(const s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const s=[this.operator,i,this.input.serialize()];for(let h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s}}function Sp(l,i,s,h){const p=h-s,v=l-s;return p===0?0:i===1?v/p:(Math.pow(i,v)-1)/(Math.pow(i,p)-1)}class Wm{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const E of i.slice(1)){const M=s.parse(E,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!M)return null;h=h||M.type,v.push(M)}const x=p&&v.some(E=>hp(p,E.type));return new Wm(x?dr:h,v)}evaluate(i){let s,h=null,p=0;for(const v of this.args){if(p++,h=v.evaluate(i),h&&h instanceof Ys&&!h.available&&(s||(s=h),h=null,p===this.args.length))return s;if(h!==null)break}return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(s=>{i.push(s.serialize())}),i}}class Zo{constructor(i,s){this.type=s.type,this.bindings=[].concat(i),this.result=s}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const s of this.bindings)i(s[1]);i(this.result)}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let v=1;v<i.length-1;v+=2){const x=i[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const E=s.parse(i[v+1],v+1);if(!E)return null;h.push([x,E])}const p=s.parse(i[i.length-1],i.length-1,s.expectedType,h);return p?new Zo(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[s,h]of this.bindings)i.push(s,h.serialize());return i.push(this.result.serialize()),i}}class sf{constructor(i,s,h){this.type=i,this.index=s,this.input=h}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=s.parse(i[1],1,An),p=s.parse(i[2],2,Zs(s.expectedType||dr));return h&&p?new sf(p.type.itemType,h,p):null}evaluate(i){const s=this.index.evaluate(i),h=this.input.evaluate(i);if(s<0)throw new mn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new mn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new mn(`Array index must be an integer, but found ${s} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return h[s]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Lu{constructor(i,s,h){this.type=i,this.index=s,this.input=h}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=s.parse(i[1],1,An),p=s.parse(i[2],2,Zs(s.expectedType||dr));return h&&p?new Lu(p.type.itemType,h,p):null}evaluate(i){const s=this.index.evaluate(i),h=this.input.evaluate(i);if(s<0)throw new mn(`Array index out of bounds: ${s} < 0.`);if(s>h.length-1)throw new mn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s===Math.floor(s))return h[s];const p=Math.floor(s),v=Math.ceil(s),x=h[p],E=h[v];if(typeof x!="number"||typeof E!="number")throw new mn(`Cannot interpolate between non-number values at index ${s}.`);const M=s-p;return x*(1-M)+E*M}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class Jh{constructor(i,s){this.type=gr,this.needle=i,this.haystack=s}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=s.parse(i[1],1,dr),p=s.parse(i[2],2,dr);return h&&p?cy(h.type,[gr,Ar,An,Iu,dr])?new Jh(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jo(h.type)} instead`):null}evaluate(i){const s=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(h==null)return!1;if(!Pu(s,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${jo(To(s))} instead.`);if(!Pu(h,["string","array"]))throw new mn(`Expected second argument to be of type array or string, but found ${jo(To(h))} instead.`);return h.indexOf(s)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class af{constructor(i,s,h){this.type=An,this.needle=i,this.haystack=s,this.fromIndex=h}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=s.parse(i[1],1,dr),p=s.parse(i[2],2,dr);if(!h||!p)return null;if(!cy(h.type,[gr,Ar,An,Iu,dr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jo(h.type)} instead`);if(i.length===4){const v=s.parse(i[3],3,An);return v?new af(h,p,v):null}return new af(h,p)}evaluate(i){const s=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Pu(s,["boolean","string","number","null"]))throw new mn(`Expected first argument to be of type boolean, string, number or null, but found ${jo(To(s))} instead.`);if(!Pu(h,["string","array"]))throw new mn(`Expected second argument to be of type array or string, but found ${jo(To(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(i);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ku{constructor(i,s,h,p,v,x){this.inputType=i,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(i,s){if(i.length<5)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let P=2;P<i.length-1;P+=2){let k=i[P];const B=i[P+1];Array.isArray(k)||(k=[k]);const j=s.concat(P);if(k.length===0)return j.error("Expected at least one branch label.");for(const Z of k){if(typeof Z!="number"&&typeof Z!="string")return j.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return j.error("Numeric branch labels must be integer values.");if(h){if(j.checkSubtype(h,To(Z)))return null}else h=To(Z);if(v[String(Z)]!==void 0)return j.error("Branch labels must be unique.");v[String(Z)]=x.length}const X=s.parse(B,P,p);if(!X)return null;p=p||X.type,x.push(X)}const E=s.parse(i[1],1,dr);if(!E)return null;const M=s.parse(i[i.length-1],i.length-1,p);return M?E.type.kind!=="value"&&s.concat(1).checkSubtype(h,E.type)?null:new ku(h,p,E,v,x,M):null}evaluate(i){const s=this.input.evaluate(i);return(To(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),h=[],p={};for(const x of s){const E=p[this.cases[x]];E===void 0?(p[this.cases[x]]=h.length,h.push([this.cases[x],[x]])):h[E][1].push(x)}const v=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,E]of h)i.push(E.length===1?v(E[0]):E.map(v)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}class Zc{constructor(i,s,h){this.type=i,this.branches=s,this.otherwise=h}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<i.length-1;x+=2){const E=s.parse(i[x],x,gr);if(!E)return null;const M=s.parse(i[x+1],x+1,h);if(!M)return null;p.push([E,M]),h=h||M.type}const v=s.parse(i[i.length-1],i.length-1,h);return v?new Zc(h,p,v):null}evaluate(i){for(const[s,h]of this.branches)if(s.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[s,h]of this.branches)i(s),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(s=>{i.push(s.serialize())}),i}}class Tp{constructor(i,s,h,p){this.type=i,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=s.parse(i[1],1,dr),p=s.parse(i[2],2,An);if(!h||!p)return null;if(!cy(h.type,[Zs(dr),Ar,dr]))return s.error(`Expected first argument to be of type array or string, but found ${jo(h.type)} instead`);if(i.length===4){const v=s.parse(i[3],3,An);return v?new Tp(h.type,h,p,v):null}return new Tp(h.type,h,p)}evaluate(i){const s=this.input.evaluate(i),h=this.beginIndex.evaluate(i);if(!Pu(s,["string","array"]))throw new mn(`Expected first argument to be of type array or string, but found ${jo(To(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(i);return s.slice(h,p)}return s.slice(h)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function lf(l,i){return l==="=="||l==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function bv(l,i,s,h){return h.compare(i,s)===0}function zu(l,i,s){const h=l!=="=="&&l!=="!=";return class I${constructor(v,x,E){this.type=gr,this.lhs=v,this.rhs=x,this.collator=E,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const E=v[0];let M=x.parse(v[1],1,dr);if(!M)return null;if(!lf(E,M.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${jo(M.type)}'.`);let P=x.parse(v[2],2,dr);if(!P)return null;if(!lf(E,P.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${jo(P.type)}'.`);if(M.type.kind!==P.type.kind&&M.type.kind!=="value"&&P.type.kind!=="value")return x.error(`Cannot compare types '${jo(M.type)}' and '${jo(P.type)}'.`);h&&(M.type.kind==="value"&&P.type.kind!=="value"?M=new Yn(P.type,[M]):M.type.kind!=="value"&&P.type.kind==="value"&&(P=new Yn(M.type,[P])));let k=null;if(v.length===4){if(M.type.kind!=="string"&&P.type.kind!=="string"&&M.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(k=x.parse(v[3],3,Bh),!k)return null}return new I$(M,P,k)}evaluate(v){const x=this.lhs.evaluate(v),E=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const M=To(x),P=To(E);if(M.kind!==P.kind||M.kind!=="string"&&M.kind!=="number")throw new mn(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${M.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const M=To(x),P=To(E);if(M.kind!=="string"||P.kind!=="string")return i(v,x,E)}return this.collator?s(v,x,E,this.collator.evaluate(v)):i(v,x,E)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[l];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const Qh=zu("==",function(l,i,s){return i===s},bv),vy=zu("!=",function(l,i,s){return i!==s},function(l,i,s,h){return!bv(0,i,s,h)}),Ep=zu("<",function(l,i,s){return i<s},function(l,i,s,h){return h.compare(i,s)<0}),xy=zu(">",function(l,i,s){return i>s},function(l,i,s,h){return h.compare(i,s)>0}),Cp=zu("<=",function(l,i,s){return i<=s},function(l,i,s,h){return h.compare(i,s)<=0}),wv=zu(">=",function(l,i,s){return i>=s},function(l,i,s,h){return h.compare(i,s)>=0});class cf{constructor(i,s,h,p,v,x){this.type=Ar,this.number=i,this.locale=s,this.currency=h,this.unit=p,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(i,s){if(i.length!==3)return s.error("Expected two arguments.");const h=s.parse(i[1],1,An);if(!h)return null;const p=i[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parseObjectValue(p.locale,2,"locale",Ar),!v))return null;let x=null;if(p.currency&&(x=s.parseObjectValue(p.currency,2,"currency",Ar),!x))return null;let E=null;if(p.unit&&(E=s.parseObjectValue(p.unit,2,"unit",Ar),!E))return null;let M=null;if(p["min-fraction-digits"]&&(M=s.parseObjectValue(p["min-fraction-digits"],2,"min-fraction-digits",An),!M))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parseObjectValue(p["max-fraction-digits"],2,"max-fraction-digits",An),!P)?null:new cf(h,v,x,E,M,P)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class ed{constructor(i){this.type=An,this.input=i}static parse(i,s){if(i.length!==2)return s.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=s.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${jo(h.type)} instead.`):new ed(h):null}evaluate(i){const s=this.input.evaluate(i);if(typeof s=="string"||Array.isArray(s))return s.length;throw new mn(`Expected value to be of type string or array, but found ${jo(To(s))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(s=>{i.push(s.serialize())}),i}}function by(l){return function(){l=1831565813+(l|=0)|0;let i=Math.imul(l^l>>>15,1|l);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}const yc={"==":Qh,"!=":vy,">":xy,"<":Ep,">=":wv,"<=":Cp,array:Yn,at:sf,"at-interpolated":Lu,boolean:Yn,case:Zc,coalesce:Wm,collator:Nh,format:Ul,image:pc,in:Jh,"index-of":af,interpolate:pa,"interpolate-hcl":pa,"interpolate-lab":pa,length:ed,let:Zo,literal:vi,match:ku,number:Yn,"number-format":cf,object:Yn,slice:Tp,step:ef,string:Yn,"to-boolean":ml,"to-color":ml,"to-number":ml,"to-string":ml,var:io,within:mc,distance:fa,config:Xh};function wy(l,[i,s,h,p]){i=i.evaluate(l),s=s.evaluate(l),h=h.evaluate(l);const v=p?p.evaluate(l):1,x=uy(i,s,h,v);if(x)throw new mn(x);return new ir(i/255*v,s/255*v,h/255*v,v)}function uf(l,[i,s,h,p]){i=i.evaluate(l),s=s.evaluate(l),h=h.evaluate(l);const v=p?p.evaluate(l):1,x=function(P,k,B,j){return typeof P=="number"&&P>=0&&P<=360?typeof k=="number"&&k>=0&&k<=100&&typeof B=="number"&&B>=0&&B<=100?j===void 0||typeof j=="number"&&j>=0&&j<=1?null:`Invalid hsla value [${[P,k,B,j].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof j=="number"?[P,k,B,j]:[P,k,B]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof j=="number"?[P,k,B,j]:[P,k,B]).join(", ")}]: 'h' must be between 0 and 360.`}(i,s,h,v);if(x)throw new mn(x);const E=`hsla(${i}, ${s}%, ${h}%, ${v})`,M=ir.parse(E);if(!M)throw new mn(`Failed to parse HSLA color: ${E}`);return M}function Xm(l,i){return l in i}function Ap(l,i){const s=i[l];return s===void 0?null:s}function ma(l){return{type:l}}function Zm(l){return{result:"success",value:l}}function ga(l){return{result:"error",value:l}}function _c(l,i){return!!l&&!!l.parameters&&l.parameters.indexOf(i)>-1}function Yl(l){return l["property-type"]==="data-driven"}function hf(l){return _c(l.expression,"measure-light")}function Mp(l){return _c(l.expression,"zoom")}function df(l){return!!l.expression&&l.expression.interpolated}function Bu(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function ff(l){return l}function Rp(l,i){const s=i.type==="color",h=l.stops&&typeof l.stops[0][0]=="object",p=h||!(h||l.property!==void 0),v=l.type||(df(i)?"exponential":"interval");if(s&&((l=lp({},l)).stops&&(l.stops=l.stops.map(P=>[P[0],ir.parse(P[1])])),l.default=ir.parse(l.default?l.default:i.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!_y[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let x,E,M;if(v==="exponential")x=vc;else if(v==="interval")x=Ym;else if(v==="categorical"){x=td,E=Object.create(null);for(const P of l.stops)E[P[0]]=P[1];M=typeof l.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=Sy}if(h){const P={},k=[];for(let X=0;X<l.stops.length;X++){const Z=l.stops[X],oe=Z[0].zoom;P[oe]===void 0&&(P[oe]={zoom:oe,type:l.type,property:l.property,default:l.default,stops:[]},k.push(oe)),P[oe].stops.push([Z[0].value,Z[1]])}const B=[];for(const X of k)B.push([P[X].zoom,Rp(P[X],i)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:pa.interpolationFactor.bind(void 0,j),zoomStops:B.map(X=>X[0]),evaluate:({zoom:X},Z)=>vc({stops:B,base:l.base},i,X).evaluate(X,Z)}}if(p){const P=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:pa.interpolationFactor.bind(void 0,P),zoomStops:l.stops.map(k=>k[0]),evaluate:({zoom:k})=>x(l,i,k,E,M)}}return{kind:"source",evaluate(P,k){const B=k&&k.properties?k.properties[l.property]:void 0;return B===void 0?Fu(l.default,i.default):x(l,i,B,E,M)}}}function Fu(l,i,s){return l!==void 0?l:i!==void 0?i:s!==void 0?s:void 0}function td(l,i,s,h,p){return Fu(typeof s===p?h[s]:void 0,l.default,i.default)}function Ym(l,i,s){if(Jn(s)!=="number")return Fu(l.default,i.default);const h=l.stops.length;if(h===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[h-1][0])return l.stops[h-1][1];const p=gc(l.stops.map(v=>v[0]),s);return l.stops[p][1]}function vc(l,i,s){const h=l.base!==void 0?l.base:1;if(Jn(s)!=="number")return Fu(l.default,i.default);const p=l.stops.length;if(p===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[p-1][0])return l.stops[p-1][1];const v=gc(l.stops.map(k=>k[0]),s),x=function(k,B,j,X){const Z=X-j,oe=k-j;return Z===0?0:B===1?oe/Z:(Math.pow(B,oe)-1)/(Math.pow(B,Z)-1)}(s,h,l.stops[v][0],l.stops[v+1][0]),E=l.stops[v][1],M=l.stops[v+1][1];let P=ap[i.type]||ff;if(l.colorSpace&&l.colorSpace!=="rgb"){const k=_y[l.colorSpace];P=(B,j)=>k.reverse(k.interpolate(k.forward(B),k.forward(j),x))}return typeof E.evaluate=="function"?{evaluate(...k){const B=E.evaluate.apply(void 0,k),j=M.evaluate.apply(void 0,k);if(B!==void 0&&j!==void 0)return P(B,j,x)}}:P(E,M,x)}function Sy(l,i,s){return i.type==="color"?s=ir.parse(s):i.type==="formatted"?s=Ls.fromString(s.toString()):i.type==="resolvedImage"?s=Ys.build(s.toString()):Jn(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Fu(s,l.default,i.default)}fs.register(yc,{error:[{kind:"error"},[Ar],(l,[i])=>{throw new mn(i.evaluate(l))}],typeof:[Ar,[dr],(l,[i])=>jo(To(i.evaluate(l)))],"to-rgba":[Zs(An,4),[ua],(l,[i])=>i.evaluate(l).toRenderColor(null).toArray()],"to-hsla":[Zs(An,4),[ua],(l,[i])=>i.evaluate(l).toRenderColor(null).toHslaArray()],rgb:[ua,[An,An,An],wy],rgba:[ua,[An,An,An,An],wy],hsl:[ua,[An,An,An],uf],hsla:[ua,[An,An,An,An],uf],has:{type:gr,overloads:[[[Ar],(l,[i])=>Xm(i.evaluate(l),l.properties())],[[Ar,Nc],(l,[i,s])=>Xm(i.evaluate(l),s.evaluate(l))]]},get:{type:dr,overloads:[[[Ar],(l,[i])=>Ap(i.evaluate(l),l.properties())],[[Ar,Nc],(l,[i,s])=>Ap(i.evaluate(l),s.evaluate(l))]]},"feature-state":[dr,[Ar],(l,[i])=>Ap(i.evaluate(l),l.featureState||{})],properties:[Nc,[],l=>l.properties()],"geometry-type":[Ar,[],l=>l.geometryType()],id:[dr,[],l=>l.id()],zoom:[An,[],l=>l.globals.zoom],pitch:[An,[],l=>l.globals.pitch||0],"distance-from-center":[An,[],l=>l.distanceFromCenter()],"measure-light":[An,[Ar],(l,[i])=>l.measureLight(i.evaluate(l))],"heatmap-density":[An,[],l=>l.globals.heatmapDensity||0],"line-progress":[An,[],l=>l.globals.lineProgress||0],"raster-value":[An,[],l=>l.globals.rasterValue||0],"raster-particle-speed":[An,[],l=>l.globals.rasterParticleSpeed||0],"sky-radial-progress":[An,[],l=>l.globals.skyRadialProgress||0],accumulated:[dr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[An,ma(An),(l,i)=>{let s=0;for(const h of i)s+=h.evaluate(l);return s}],"*":[An,ma(An),(l,i)=>{let s=1;for(const h of i)s*=h.evaluate(l);return s}],"-":{type:An,overloads:[[[An,An],(l,[i,s])=>i.evaluate(l)-s.evaluate(l)],[[An],(l,[i])=>-i.evaluate(l)]]},"/":[An,[An,An],(l,[i,s])=>i.evaluate(l)/s.evaluate(l)],"%":[An,[An,An],(l,[i,s])=>i.evaluate(l)%s.evaluate(l)],ln2:[An,[],()=>Math.LN2],pi:[An,[],()=>Math.PI],e:[An,[],()=>Math.E],"^":[An,[An,An],(l,[i,s])=>Math.pow(i.evaluate(l),s.evaluate(l))],sqrt:[An,[An],(l,[i])=>Math.sqrt(i.evaluate(l))],log10:[An,[An],(l,[i])=>Math.log(i.evaluate(l))/Math.LN10],ln:[An,[An],(l,[i])=>Math.log(i.evaluate(l))],log2:[An,[An],(l,[i])=>Math.log(i.evaluate(l))/Math.LN2],sin:[An,[An],(l,[i])=>Math.sin(i.evaluate(l))],cos:[An,[An],(l,[i])=>Math.cos(i.evaluate(l))],tan:[An,[An],(l,[i])=>Math.tan(i.evaluate(l))],asin:[An,[An],(l,[i])=>Math.asin(i.evaluate(l))],acos:[An,[An],(l,[i])=>Math.acos(i.evaluate(l))],atan:[An,[An],(l,[i])=>Math.atan(i.evaluate(l))],min:[An,ma(An),(l,i)=>Math.min(...i.map(s=>s.evaluate(l)))],max:[An,ma(An),(l,i)=>Math.max(...i.map(s=>s.evaluate(l)))],abs:[An,[An],(l,[i])=>Math.abs(i.evaluate(l))],round:[An,[An],(l,[i])=>{const s=i.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[An,[An],(l,[i])=>Math.floor(i.evaluate(l))],ceil:[An,[An],(l,[i])=>Math.ceil(i.evaluate(l))],"filter-==":[gr,[Ar,dr],(l,[i,s])=>l.properties()[i.value]===s.value],"filter-id-==":[gr,[dr],(l,[i])=>l.id()===i.value],"filter-type-==":[gr,[Ar],(l,[i])=>l.geometryType()===i.value],"filter-<":[gr,[Ar,dr],(l,[i,s])=>{const h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[gr,[dr],(l,[i])=>{const s=l.id(),h=i.value;return typeof s==typeof h&&s<h}],"filter->":[gr,[Ar,dr],(l,[i,s])=>{const h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[gr,[dr],(l,[i])=>{const s=l.id(),h=i.value;return typeof s==typeof h&&s>h}],"filter-<=":[gr,[Ar,dr],(l,[i,s])=>{const h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[gr,[dr],(l,[i])=>{const s=l.id(),h=i.value;return typeof s==typeof h&&s<=h}],"filter->=":[gr,[Ar,dr],(l,[i,s])=>{const h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[gr,[dr],(l,[i])=>{const s=l.id(),h=i.value;return typeof s==typeof h&&s>=h}],"filter-has":[gr,[dr],(l,[i])=>i.value in l.properties()],"filter-has-id":[gr,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[gr,[Zs(Ar)],(l,[i])=>i.value.indexOf(l.geometryType())>=0],"filter-id-in":[gr,[Zs(dr)],(l,[i])=>i.value.indexOf(l.id())>=0],"filter-in-small":[gr,[Ar,Zs(dr)],(l,[i,s])=>s.value.indexOf(l.properties()[i.value])>=0],"filter-in-large":[gr,[Ar,Zs(dr)],(l,[i,s])=>function(h,p,v,x){for(;v<=x;){const E=v+x>>1;if(p[E]===h)return!0;p[E]>h?x=E-1:v=E+1}return!1}(l.properties()[i.value],s.value,0,s.value.length-1)],all:{type:gr,overloads:[[[gr,gr],(l,[i,s])=>i.evaluate(l)&&s.evaluate(l)],[ma(gr),(l,i)=>{for(const s of i)if(!s.evaluate(l))return!1;return!0}]]},any:{type:gr,overloads:[[[gr,gr],(l,[i,s])=>i.evaluate(l)||s.evaluate(l)],[ma(gr),(l,i)=>{for(const s of i)if(s.evaluate(l))return!0;return!1}]]},"!":[gr,[gr],(l,[i])=>!i.evaluate(l)],"is-supported-script":[gr,[Ar],(l,[i])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(i.evaluate(l))}],upcase:[Ar,[Ar],(l,[i])=>i.evaluate(l).toUpperCase()],downcase:[Ar,[Ar],(l,[i])=>i.evaluate(l).toLowerCase()],concat:[Ar,ma(dr),(l,i)=>i.map(s=>Ks(s.evaluate(l))).join("")],"resolved-locale":[Ar,[Bh],(l,[i])=>i.evaluate(l).resolvedLocale()],random:[An,[An,An,dr],(l,i)=>{const[s,h,p]=i.map(x=>x.evaluate(l));if(s>h||s===h)return s;let v;if(typeof p=="string")v=function(x){let E=0;if(x.length===0)return E;for(let M=0;M<x.length;M++)E=(E<<5)-E+x.charCodeAt(M),E|=0;return E}(p);else{if(typeof p!="number")throw new mn(`Invalid seed input: ${p}`);v=p}return s+by(v)()*(h-s)}]});class Ip{constructor(i,s,h,p){this.expression=i,this._warningHistory={},this._evaluator=new Zd(h,p),this._defaultValue=s?function(v){return v.type==="color"&&(Bu(v.default)||Array.isArray(v.default))?new ir(0,0,0,0):v.type==="color"?ir.parse(v.default)||null:v.default===void 0?null:v.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this.configDependencies=Ss(i)}evaluateWithoutErrorHandling(i,s,h,p,v,x,E,M){return this._evaluator.globals=i,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(i,s,h,p,v,x,E,M){this._evaluator.globals=i,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=M||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new mn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${P.message}`)),this._defaultValue}}}function Kl(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in yc}function yr(l,i,s,h){const p=new Wl(yc,[],i?function(x){const E={color:ua,string:Ar,number:An,enum:Ar,boolean:gr,formatted:cp,resolvedImage:up};return x.type==="array"?Zs(E[x.value]||dr,x.length):E[x.type]}(i):void 0,void 0,void 0,s,h),v=p.parse(l,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Zm(new Ip(v,i,s,h)):ga(p.errors)}class ro{constructor(i,s,h,p){this.kind=i,this._styleExpression=s,this.isLightConstant=h,this.isLineProgressConstant=p,this.isStateDependent=i!=="constant"&&!Qd(s.expression),this.configDependencies=Ss(s.expression)}evaluateWithoutErrorHandling(i,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,s,h,p,v,x)}evaluate(i,s,h,p,v,x){return this._styleExpression.evaluate(i,s,h,p,v,x)}}class Bo{constructor(i,s,h,p,v,x){this.kind=i,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=i!=="camera"&&!Qd(s.expression),this.isLightConstant=v,this.isLineProgressConstant=x,this.configDependencies=Ss(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,s,h,p,v,x)}evaluate(i,s,h,p,v,x){return this._styleExpression.evaluate(i,s,h,p,v,x)}interpolationFactor(i,s,h){return this.interpolationType?pa.interpolationFactor(this.interpolationType,i,s,h):0}}function Nu(l,i,s,h){if((l=yr(l,i,s,h)).result==="error")return l;const p=l.value.expression,v=Zh(p);if(!v&&!Yl(i))return ga([new dl("","data expressions not supported")]);const x=Eo(p,["zoom","pitch","distance-from-center"]);if(!x&&!Mp(i))return ga([new dl("","zoom expressions not supported")]);const E=Eo(p,["measure-light"]);if(!E&&!hf(i))return ga([new dl("","measure-light expression not supported")]);const M=Eo(p,["line-progress"]);if(!M&&!function(B){return _c(B.expression,"line-progress")}(i))return ga([new dl("","line-progress expression not supported")]);const P=i.expression&&i.expression.relaxZoomRestriction,k=bc(p);return k||x||P?k instanceof dl?ga([k]):k instanceof pa&&!df(i)?ga([new dl("",'"interpolate" expressions cannot be used with this property')]):Zm(k?new Bo(v&&M?"camera":"composite",l.value,k.labels,k instanceof pa?k.interpolation:void 0,E,M):new ro(v&&M?"constant":"source",l.value,E,M)):ga([new dl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class xc{constructor(i,s){this._parameters=i,this._specification=s,lp(this,Rp(this._parameters,this._specification))}static deserialize(i){return new xc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function bc(l){let i=null;if(l instanceof Zo)i=bc(l.result);else if(l instanceof Wm){for(const s of l.args)if(i=bc(s),i)break}else(l instanceof ef||l instanceof pa)&&l.input instanceof fs&&l.input.name==="zoom"&&(i=l);return i instanceof dl||l.eachChild(s=>{const h=bc(s);h instanceof dl?i=h:i&&h&&i!==h&&(i=new dl("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}var pf,ju,Uu=function(){if(ju)return pf;ju=1,pf=i;var l=3;function i(s,h,p){var v=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(h=x[1])+2*(p=x[2]);for(var E=0;E<this.d*this.d;E++){var M=x[l+E],P=x[l+E+1];v.push(M===P?null:x.subarray(M,P))}var k=x[l+v.length+1];this.keys=x.subarray(x[l+v.length],k),this.bboxes=x.subarray(k),this.insert=this._insertReadonly}else{this.d=h+2*p;for(var B=0;B<this.d*this.d;B++)v.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=p,this.scale=h/s,this.uid=0;var j=p/h*s;this.min=-j,this.max=s+j}return i.prototype.insert=function(s,h,p,v,x){this._forEachCell(h,p,v,x,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(x)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(s,h,p,v,x,E){this.cells[x].push(E)},i.prototype.query=function(s,h,p,v,x){var E=this.min,M=this.max;if(s<=E&&h<=E&&M<=p&&M<=v&&!x)return Array.prototype.slice.call(this.keys);var P=[];return this._forEachCell(s,h,p,v,this._queryCell,P,{},x),P},i.prototype._queryCell=function(s,h,p,v,x,E,M,P){var k=this.cells[x];if(k!==null)for(var B=this.keys,j=this.bboxes,X=0;X<k.length;X++){var Z=k[X];if(M[Z]===void 0){var oe=4*Z;(P?P(j[oe+0],j[oe+1],j[oe+2],j[oe+3]):s<=j[oe+2]&&h<=j[oe+3]&&p>=j[oe+0]&&v>=j[oe+1])?(M[Z]=!0,E.push(B[Z])):M[Z]=!1}}},i.prototype._forEachCell=function(s,h,p,v,x,E,M,P){for(var k=this._convertToCellCoord(s),B=this._convertToCellCoord(h),j=this._convertToCellCoord(p),X=this._convertToCellCoord(v),Z=k;Z<=j;Z++)for(var oe=B;oe<=X;oe++){var de=this.d*oe+Z;if((!P||P(this._convertFromCellCoord(Z),this._convertFromCellCoord(oe),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(oe+1)))&&x.call(this,s,h,p,v,de,E,M,P))return}},i.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},i.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,h=l+this.cells.length+1+1,p=0,v=0;v<this.cells.length;v++)p+=this.cells[v].length;var x=new Int32Array(h+p+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var E=h,M=0;M<s.length;M++){var P=s[M];x[l+M]=E,x.set(P,E),E+=P.length}return x[l+s.length]=E,x.set(this.keys,E),x[l+s.length+1]=E+=this.keys.length,x.set(this.bboxes,E),E+=this.bboxes.length,x.buffer},pf}(),mf=ko(Uu);const Fo={};function hn(l,i,s={}){Object.defineProperty(l,"_classRegistryKey",{value:i,writable:!1}),Fo[i]={klass:l,omit:s.omit||[]}}hn(Object,"Object"),mf.serialize=function(l,i){const s=l.toArrayBuffer();return i&&i.add(s),{buffer:s}},mf.deserialize=function(l){return new mf(l.buffer)},Object.defineProperty(mf,"name",{value:"Grid"}),hn(mf,"Grid"),typeof DOMMatrix<"u"&&hn(DOMMatrix,"DOMMatrix"),hn(ir,"Color"),hn(Error,"Error"),hn(Ls,"Formatted"),hn(Bm,"FormattedSection"),hn(ip,"AJAXError"),hn(Ys,"ResolvedImage"),hn(xc,"StylePropertyFunction"),hn(Ip,"StyleExpression",{omit:["_evaluator"]}),hn(Ma,"ImageId"),hn(pl,"ImageVariant"),hn(Bo,"ZoomDependentExpression"),hn(ro,"ZoomConstantExpression"),hn(fs,"CompoundExpression",{omit:["_evaluate"]});for(const l in yc)Fo[yc[l]._classRegistryKey]||hn(yc[l],`Expression${l}`);function nd(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Vu(l){return self.ImageBitmap&&l instanceof ImageBitmap}function Yc(l,i){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(nd(l)||Vu(l))return i&&i.add(l),l;if(ArrayBuffer.isView(l))return i&&i.add(l.buffer),l;if(l instanceof ImageData)return i&&i.add(l.data.buffer),l;if(Array.isArray(l)){const s=[];for(const h of l)s.push(Yc(h,i));return s}if(l instanceof Map){const s={$name:"Map",entries:[]};for(const[h,p]of l.entries())s.entries.push(Yc(h),Yc(p,i));return s}if(l instanceof Set){const s={$name:"Set"};let h=0;for(const p of l.values())s[++h]=Yc(p);return s}if(l instanceof DOMMatrix){const s={$name:"DOMMatrix"},h=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const p of h)s[p]=l[p];return s}if(typeof l=="bigint")return{$name:"BigInt",value:l.toString()};if(typeof l=="object"){const s=l.constructor,h=s._classRegistryKey;if(!h)throw new Error(`Can't serialize object of unregistered class "${s.name}".`);const p=s.serialize?s.serialize(l,i):{};if(!s.serialize){for(const v in l)l.hasOwnProperty(v)&&(Fo[h].omit.indexOf(v)>=0||(p[v]=Yc(l[v],i)));l instanceof Error&&(p.message=l.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof l)}function $u(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||nd(l)||Vu(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map($u);if(typeof l=="object"){const i=l.$name||"Object";if(i==="Map"){const p=l.entries||[],v=new Map;for(let x=0;x<p.length;x+=2)v.set($u(p[x]),$u(p[x+1]));return v}if(i==="Set"){const p=new Set;for(const v of Object.keys(l))v!=="$name"&&p.add($u(l[v]));return p}if(i==="DOMMatrix"){let p;return p=l.is2D?[l.a,l.b,l.c,l.d,l.e,l.f]:[l.m11,l.m12,l.m13,l.m14,l.m21,l.m22,l.m23,l.m24,l.m31,l.m32,l.m33,l.m34,l.m41,l.m42,l.m43,l.m44],new DOMMatrix(p)}if(i==="BigInt")return BigInt(l.value);const{klass:s}=Fo[i];if(!s)throw new Error(`Can't deserialize unregistered class "${i}".`);if(s.deserialize)return s.deserialize(l);const h=Object.create(s.prototype);for(const p of Object.keys(l))p!=="$name"&&(h[p]=$u(l[p]));return h}throw new Error("can't deserialize object of type "+typeof l)}const Un={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519,Osage:l=>l>=66736&&l<=66815,"CJK Unified Ideographs Extension B":l=>l>=131072&&l<=173791};function Pp(l){for(const i of l)if(Uo(i.charCodeAt(0)))return!0;return!1}function Ty(l){for(const i of l)if(!ya(i.charCodeAt(0)))return!1;return!0}function ya(l){return!(Un.Arabic(l)||Un["Arabic Supplement"](l)||Un["Arabic Extended-A"](l)||Un["Arabic Presentation Forms-A"](l)||Un["Arabic Presentation Forms-B"](l))}function Uo(l){return!(l!==746&&l!==747&&(l<4352||!(Un["Bopomofo Extended"](l)||Un.Bopomofo(l)||Un["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Un["CJK Compatibility Ideographs"](l)||Un["CJK Compatibility"](l)||Un["CJK Radicals Supplement"](l)||Un["CJK Strokes"](l)||!(!Un["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Un["CJK Unified Ideographs Extension A"](l)||Un["CJK Unified Ideographs"](l)||Un["Enclosed CJK Letters and Months"](l)||Un["Hangul Compatibility Jamo"](l)||Un["Hangul Jamo Extended-A"](l)||Un["Hangul Jamo Extended-B"](l)||Un["Hangul Jamo"](l)||Un["Hangul Syllables"](l)||Un.Hiragana(l)||Un["Ideographic Description Characters"](l)||Un.Kanbun(l)||Un["Kangxi Radicals"](l)||Un["Katakana Phonetic Extensions"](l)||Un.Katakana(l)&&l!==12540||!(!Un["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Un["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Un["Unified Canadian Aboriginal Syllabics"](l)||Un["Unified Canadian Aboriginal Syllabics Extended"](l)||Un["Vertical Forms"](l)||Un["Yijing Hexagram Symbols"](l)||Un["Yi Syllables"](l)||Un["Yi Radicals"](l))))}function Km(l){return!(Uo(l)||function(i){return!!(Un["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Un["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Un["Letterlike Symbols"](i)||Un["Number Forms"](i)||Un["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Un["Control Pictures"](i)&&i!==9251||Un["Optical Character Recognition"](i)||Un["Enclosed Alphanumerics"](i)||Un["Geometric Shapes"](i)||Un["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Un["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Un["CJK Symbols and Punctuation"](i)||Un.Katakana(i)||Un["Private Use Area"](i)||Un["CJK Compatibility Forms"](i)||Un["Small Form Variants"](i)||Un["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(l))}function Dp(l){return Un.Arabic(l)||Un["Arabic Supplement"](l)||Un["Arabic Extended-A"](l)||Un["Arabic Presentation Forms-A"](l)||Un["Arabic Presentation Forms-B"](l)}function Op(l){return l>=1424&&l<=2303||Un["Arabic Presentation Forms-A"](l)||Un["Arabic Presentation Forms-B"](l)}function Ey(l,i){return!(!i&&Op(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Un.Khmer(l))}function Kc(l){for(const i of l)if(Op(i.charCodeAt(0)))return!0;return!1}const gf="deferred",Lp="loading",kp="loaded";let Jm=null,_a="unavailable",Jc=null;const Hu=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(_a="error"),Jm&&Jm(l)};function zp(){Bp.fire(new fc("pluginStateChange",{pluginStatus:_a,pluginURL:Jc}))}const Bp=new Ru,Gu=function(){return _a},Cy=function(){if(_a!==gf||!Jc)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_a=Lp,zp(),Jc&&Au({url:Jc},l=>{l?Hu(l):(_a=kp,zp())})},vl={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>_a===kp||vl.applyArabicShaping!=null,isLoading:()=>_a===Lp,setState(l){_a=l.pluginStatus,Jc=l.pluginURL},isParsed:()=>vl.applyArabicShaping!=null&&vl.processBidirectionalText!=null&&vl.processStyledBidirectionalText!=null,getPluginURL:()=>Jc};class xr{constructor(i,s){this.zoom=i,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch,this.brightness=s.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(i){return function(s,h){for(const p of s)if(!Ey(p.charCodeAt(0),h))return!1;return!0}(i,vl.isLoaded())}}class yf{constructor(i,s,h,p){this.property=i,this.value=s,this.expression=function(v,x,E,M){if(Bu(v))return new xc(v,x);if(Kl(v)||Array.isArray(v)&&v.length>0){const P=Nu(v,x,E,M);if(P.result==="error")throw new Error(P.value.map(k=>`${k.key}: ${k.message}`).join(", "));return P.value}{let P=v;return typeof v=="string"&&x.type==="color"&&(P=ir.parse(v)),{kind:"constant",configDependencies:new Set,evaluate:()=>P}}}(s===void 0?i.specification.default:s,i.specification,h,p)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,s,h){return this.property.possiblyEvaluate(this,i,s,h)}}class Qc{constructor(i,s,h){this.property=i,this.value=new yf(i,void 0,s,h)}transitioned(i,s){return new Ay(this.property,this.value,s,Ke({},i.transition,this.transition),i.now)}untransitioned(){return new Ay(this.property,this.value,null,{},0)}}class Qm{constructor(i,s,h){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._scope=s,this._options=h,this.configDependencies=new Set}getValue(i){return di(this._values[i].value.value)}setValue(i,s){this._values.hasOwnProperty(i)||(this._values[i]=new Qc(this._values[i].property,this._scope,this._options)),this._values[i].value=new yf(this._values[i].property,s===null?void 0:di(s),this._scope,this._options),this._values[i].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].value.expression.configDependencies]))}setTransitionOrValue(i,s){s&&(this._options=s);const h=this._properties.properties;if(i)for(const p in i){const v=i[p];if(p.endsWith("-transition")){const x=p.slice(0,-11);h[x]&&this.setTransition(x,v)}else h.hasOwnProperty(p)&&this.setValue(p,v)}}getTransition(i){return di(this._values[i].transition)}setTransition(i,s){this._values.hasOwnProperty(i)||(this._values[i]=new Qc(this._values[i].property)),this._values[i].transition=di(s)||void 0}serialize(){const i={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(i[s]=h);const p=this.getTransition(s);p!==void 0&&(i[`${s}-transition`]=p)}return i}transitioned(i,s){const h=new My(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,s._values[p]);return h}untransitioned(){const i=new My(this._properties);for(const s of Object.keys(this._values))i._values[s]=this._values[s].untransitioned();return i}}class Ay{constructor(i,s,h,p,v){const x=p.delay||0,E=p.duration||0;v=v||0,this.property=i,this.value=s,this.begin=v+x,this.end=this.begin+E,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,s,h){const p=i.now||0,v=this.value.possiblyEvaluate(i,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(i,s,h);{const E=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,s,h),v,Ee(E))}}return v}}class My{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,s,h){const p=new qu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(i,s,h);return p}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Sv{constructor(i,s,h){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._scope=s,this._options=h,this.configDependencies=new Set}getValue(i){return di(this._values[i].value)}setValue(i,s){this._values[i]=new yf(this._values[i].property,s===null?void 0:di(s),this._scope,this._options),this._values[i].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].expression.configDependencies]))}serialize(){const i={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(i[s]=h)}return i}possiblyEvaluate(i,s,h){const p=new qu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(i,s,h);return p}}class id{constructor(i,s,h){this.property=i,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,s,h,p){return this.property.evaluate(this.value,this.parameters,i,s,h,p)}}class qu{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Kt{constructor(i){this.specification=i}possiblyEvaluate(i,s){return i.expression.evaluate(s)}interpolate(i,s,h){const p=ap[this.specification.type];return p?p(i,s,h):i}}class un{constructor(i,s){this.specification=i,this.overrides=s}possiblyEvaluate(i,s,h,p){return new id(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(s,null,{},h,p)}:i.expression,s)}interpolate(i,s,h){if(i.value.kind!=="constant"||s.value.kind!=="constant")return i;if(i.value.value===void 0||s.value.value===void 0)return new id(this,{kind:"constant",value:void 0},i.parameters);const p=ap[this.specification.type];return p?new id(this,{kind:"constant",value:p(i.value.value,s.value.value,h)},i.parameters):i}evaluate(i,s,h,p,v,x){return i.kind==="constant"?i.value:i.evaluate(s,h,p,v,x)}}class xl{constructor(i){this.specification=i}possiblyEvaluate(i,s,h,p){return!!i.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class co{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new xr(0,{});for(const h in i){const p=i[h];p.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new yf(p,void 0),x=this.defaultTransitionablePropertyValues[h]=new Qc(p);this.defaultTransitioningPropertyValues[h]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate(s)}}}hn(un,"DataDrivenProperty"),hn(Kt,"DataConstantProperty"),hn(xl,"ColorRampProperty");var at=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-wall-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white"},"sky-atmosphere-color":{"type":"color","default":"white"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function ka(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Wu(l){if(Array.isArray(l))return l.map(Wu);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const i={};for(const s in l)i[s]=Wu(l[s]);return i}return ka(l)}function Fp(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const i of l.slice(1))if(!Fp(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function eg(l,i="",s=null,h="fill"){if(l==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Fp(l)||(l=Np(l));const p=l;let v=!0;try{v=function(k){if(!rd(k))return k;let B=Wu(k);return Iy(B),B=Ry(B),B}(p)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(p,null,2)}
        `)}let x=null,E=null;if(h!=="background"&&h!=="sky"&&h!=="slot"){E=at[`filter_${h}`];const k=yr(v,E,i,s);if(k.result==="error")throw new Error(k.value.map(B=>`${B.key}: ${B.message}`).join(", "));x=(B,j,X)=>k.value.evaluate(B,j,{},X)}let M=null,P=null;if(v!==p){const k=yr(p,E,i,s);if(k.result==="error")throw new Error(k.value.map(B=>`${B.key}: ${B.message}`).join(", "));M=(B,j,X,Z,oe)=>k.value.evaluate(B,j,{},X,void 0,void 0,Z,oe),P=!Zh(k.value.expression)}return{filter:x,dynamicFilter:M||void 0,needGeometry:Dy(v),needFeature:!!P}}function Ry(l){if(!Array.isArray(l))return l;const i=function(s){if(Tv.has(s[0])){for(let h=1;h<s.length;h++)if(rd(s[h]))return!0}return s}(l);return i===!0?i:i.map(s=>Ry(s))}function Iy(l){let i=!1;const s=[];if(l[0]==="case"){for(let h=1;h<l.length-1;h+=2)i=i||rd(l[h]),s.push(l[h+1]);s.push(l[l.length-1])}else if(l[0]==="match"){i=i||rd(l[1]);for(let h=2;h<l.length-1;h+=2)s.push(l[h+1]);s.push(l[l.length-1])}else if(l[0]==="step"){i=i||rd(l[1]);for(let h=1;h<l.length-1;h+=2)s.push(l[h+1])}i&&(l.length=0,l.push("any",...s));for(let h=1;h<l.length;h++)Iy(l[h])}function rd(l){if(!Array.isArray(l))return!1;if((i=l[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let s=1;s<l.length;s++)if(rd(l[s]))return!0;return!1}const Tv=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Py(l,i){return l<i?-1:l>i?1:0}function Dy(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let i=1;i<l.length;i++)if(Dy(l[i]))return!0;return!1}function Np(l){if(!l)return!0;const i=l[0];return l.length<=1?i!=="any":i==="=="?jp(l[1],l[2],"=="):i==="!="?ng(jp(l[1],l[2],"==")):i==="<"||i===">"||i==="<="||i===">="?jp(l[1],l[2],i):i==="any"?(s=l.slice(1),["any"].concat(s.map(Np))):i==="all"?["all"].concat(l.slice(1).map(Np)):i==="none"?["all"].concat(l.slice(1).map(Np).map(ng)):i==="in"?tg(l[1],l.slice(2)):i==="!in"?ng(tg(l[1],l.slice(2))):i==="has"?Oy(l[1]):i!=="!has"||ng(Oy(l[1]));var s}function jp(l,i,s){switch(l){case"$type":return[`filter-type-${s}`,i];case"$id":return[`filter-id-${s}`,i];default:return[`filter-${s}`,l,i]}}function tg(l,i){if(i.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(s=>typeof s!=typeof i[0])?["filter-in-large",l,["literal",i.sort(Py)]]:["filter-in-small",l,["literal",i]]}}function Oy(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function ng(l){return["!",l]}const od="";function Xu(l,i){return i?`${l}${od}${i}`:l}const ig="-transition",wc=new Set(["fill","line","background","hillshade","raster"]);class zs extends Ru{constructor(i,s,h,p,v){if(super(),this.id=i.id,this.fqid=Xu(this.id,h),this.type=i.type,this.scope=h,this.lut=p,this.options=v,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,i.type!=="custom"){if(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type&&i.type!=="background"&&i.type!=="sky"&&i.type!=="slot"){this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter;const x=yr(this.filter,at[`filter_${i.type}`]);x.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...x.value.configDependencies]))}if(i.slot&&(this.slot=i.slot),s.layout&&(this._unevaluatedLayout=new Sv(s.layout,this.scope,v),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),s.paint){this._transitionablePaint=new Qm(s.paint,this.scope,v);for(const x in i.paint)this.setPaintProperty(x,i.paint[x]);for(const x in i.layout)this.setLayoutProperty(x,i.layout[x]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qu(s.paint)}}}onAdd(i){}onRemove(i){}isDraped(i){return!this.is3D(!0)&&wc.has(this.type)}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,s){if(this.type==="custom"&&i==="visibility")return void(this.visibility=s);const h=this._unevaluatedLayout;h._properties.properties[i]&&(h.setValue(i,s),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),i==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(i){return i.endsWith(ig)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,s){const h=this._transitionablePaint,p=h._properties.properties;if(i.endsWith(ig)){const B=i.slice(0,-11);return p[B]&&h.setTransition(B,s||void 0),!1}if(!p[i])return!1;const v=h._values[i],x=v.value.isDataDriven(),E=v.value;h.setValue(i,s),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),this._handleSpecialPaintPropertyUpdate(i);const M=h._values[i].value,P=M.isDataDriven(),k=i.endsWith("pattern")||i==="line-dasharray";return P||x||k||this._handleOverridablePaintPropertyUpdate(i,E,M)}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getDefaultProgramParams(i,s,h){return null}_handleOverridablePaintPropertyUpdate(i,s,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,s)}serialize(){return Dn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(i,s)=>!(i===void 0||s==="layout"&&!Object.keys(i).length||s==="paint"&&!Object.keys(i).length))}is3D(i){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const i in this.paint._values){const s=this.paint.get(i);if(s instanceof id&&Yl(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(i){this._filterCompiled||(this._featureFilter=eg(this.filter,this.scope,i),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(i){this._stats&&(i.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(i){}queryIntersectsFeature(i,s,h,p,v,x,E,M,P){}}const Ev={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Up{constructor(i,s){this._structArray=i,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Jr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,s){return i._trim(),s&&(i.isTransferred=!0,s.add(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const s=Object.create(this.prototype);return s.arrayBuffer=i.arrayBuffer,s.length=i.length,s.capacity=i.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...i){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...i){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function qi(l,i=1){let s=0,h=0;return{members:l.map(p=>{const v=Ev[p.type].BYTES_PER_ELEMENT,x=s=sd(s,Math.max(i,v)),E=p.components||1;return h=Math.max(h,v),s+=v*E,{name:p.name,type:p.type,components:E,offset:x}}),size:sd(s,Math.max(h,i)),alignment:i}}function sd(l,i){return Math.ceil(l/i)*i}class Jl extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s){const h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){const p=2*i;return this.int16[p+0]=s,this.int16[p+1]=h,i}}Jl.prototype.bytesPerElement=4,hn(Jl,"StructArrayLayout2i4");class ad extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){const v=3*i;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,i}}ad.prototype.bytesPerElement=6,hn(ad,"StructArrayLayout3i6");class Zu extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,h,p)}emplace(i,s,h,p,v){const x=4*i;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,i}}Zu.prototype.bytesPerElement=8,hn(Zu,"StructArrayLayout4i8");class ld extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.float32[1*i+0]=s,i}}ld.prototype.bytesPerElement=4,hn(ld,"StructArrayLayout1f4");class cd extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){const v=4*i,x=2*i;return this.int16[v+0]=s,this.int16[v+1]=h,this.float32[x+1]=p,i}}cd.prototype.bytesPerElement=8,hn(cd,"StructArrayLayout2i1f8");class ud extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){const v=4*i;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,i}}ud.prototype.bytesPerElement=8,hn(ud,"StructArrayLayout3i8");class rg extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,v)}emplace(i,s,h,p,v,x){const E=5*i;return this.int16[E+0]=s,this.int16[E+1]=h,this.int16[E+2]=p,this.int16[E+3]=v,this.int16[E+4]=x,i}}rg.prototype.bytesPerElement=10,hn(rg,"StructArrayLayout5i10");class Ly extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E){const M=this.length;return this.resize(M+1),this.emplace(M,i,s,h,p,v,x,E)}emplace(i,s,h,p,v,x,E,M){const P=6*i,k=12*i,B=3*i;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[k+4]=p,this.uint8[k+5]=v,this.uint8[k+6]=x,this.uint8[k+7]=E,this.float32[B+2]=M,i}}Ly.prototype.bytesPerElement=12,hn(Ly,"StructArrayLayout2i4ub1f12");class va extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){const v=3*i;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,i}}va.prototype.bytesPerElement=12,hn(va,"StructArrayLayout3f12");class Ka extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,v)}emplace(i,s,h,p,v,x){const E=6*i,M=3*i;return this.uint16[E+0]=s,this.uint16[E+1]=h,this.uint16[E+2]=p,this.uint16[E+3]=v,this.float32[M+2]=x,i}}Ka.prototype.bytesPerElement=12,hn(Ka,"StructArrayLayout4ui1f12");class hd extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,h,p)}emplace(i,s,h,p,v){const x=4*i;return this.uint16[x+0]=s,this.uint16[x+1]=h,this.uint16[x+2]=p,this.uint16[x+3]=v,i}}hd.prototype.bytesPerElement=8,hn(hd,"StructArrayLayout4ui8");class Ql extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,i,s,h,p,v,x)}emplace(i,s,h,p,v,x,E){const M=6*i;return this.int16[M+0]=s,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=E,i}}Ql.prototype.bytesPerElement=12,hn(Ql,"StructArrayLayout6i12");class eu extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P,k,B,j){const X=this.length;return this.resize(X+1),this.emplace(X,i,s,h,p,v,x,E,M,P,k,B,j)}emplace(i,s,h,p,v,x,E,M,P,k,B,j,X){const Z=12*i;return this.int16[Z+0]=s,this.int16[Z+1]=h,this.int16[Z+2]=p,this.int16[Z+3]=v,this.uint16[Z+4]=x,this.uint16[Z+5]=E,this.uint16[Z+6]=M,this.uint16[Z+7]=P,this.int16[Z+8]=k,this.int16[Z+9]=B,this.int16[Z+10]=j,this.int16[Z+11]=X,i}}eu.prototype.bytesPerElement=24,hn(eu,"StructArrayLayout4i4ui4i24");class Qs extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,i,s,h,p,v,x)}emplace(i,s,h,p,v,x,E){const M=10*i,P=5*i;return this.int16[M+0]=s,this.int16[M+1]=h,this.int16[M+2]=p,this.float32[P+2]=v,this.float32[P+3]=x,this.float32[P+4]=E,i}}Qs.prototype.bytesPerElement=20,hn(Qs,"StructArrayLayout3i3f20");class ec extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,h,p)}emplace(i,s,h,p,v){const x=4*i;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,i}}ec.prototype.bytesPerElement=16,hn(ec,"StructArrayLayout4f16");class Yu extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint32[1*i+0]=s,i}}Yu.prototype.bytesPerElement=4,hn(Yu,"StructArrayLayout1ul4");class tu extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s){const h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){const p=2*i;return this.uint16[p+0]=s,this.uint16[p+1]=h,i}}tu.prototype.bytesPerElement=4,hn(tu,"StructArrayLayout2ui4");class za extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P,k,B,j,X){const Z=this.length;return this.resize(Z+1),this.emplace(Z,i,s,h,p,v,x,E,M,P,k,B,j,X)}emplace(i,s,h,p,v,x,E,M,P,k,B,j,X,Z){const oe=20*i,de=10*i;return this.int16[oe+0]=s,this.int16[oe+1]=h,this.int16[oe+2]=p,this.int16[oe+3]=v,this.int16[oe+4]=x,this.float32[de+3]=E,this.float32[de+4]=M,this.float32[de+5]=P,this.float32[de+6]=k,this.int16[oe+14]=B,this.uint32[de+8]=j,this.uint16[oe+18]=X,this.uint16[oe+19]=Z,i}}za.prototype.bytesPerElement=40,hn(za,"StructArrayLayout5i4f1i1ul2ui40");class Ja extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E){const M=this.length;return this.resize(M+1),this.emplace(M,i,s,h,p,v,x,E)}emplace(i,s,h,p,v,x,E,M){const P=8*i;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+4]=v,this.int16[P+5]=x,this.int16[P+6]=E,this.int16[P+7]=M,i}}Ja.prototype.bytesPerElement=16,hn(Ja,"StructArrayLayout3i2i2i16");class bl extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,v)}emplace(i,s,h,p,v,x){const E=4*i,M=8*i;return this.float32[E+0]=s,this.float32[E+1]=h,this.float32[E+2]=p,this.int16[M+6]=v,this.int16[M+7]=x,i}}bl.prototype.bytesPerElement=16,hn(bl,"StructArrayLayout2f1f2i16");class og extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,i,s,h,p,v,x)}emplace(i,s,h,p,v,x,E){const M=20*i,P=5*i;return this.uint8[M+0]=s,this.uint8[M+1]=h,this.float32[P+1]=p,this.float32[P+2]=v,this.float32[P+3]=x,this.float32[P+4]=E,i}}og.prototype.bytesPerElement=20,hn(og,"StructArrayLayout2ub4f20");class xo extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){const v=3*i;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,i}}xo.prototype.bytesPerElement=6,hn(xo,"StructArrayLayout3ui6");class tc extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be,ae,_e){const we=this.length;return this.resize(we+1),this.emplace(we,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be,ae,_e)}emplace(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be,ae,_e,we){const Ie=30*i,Ge=15*i,Ze=60*i;return this.int16[Ie+0]=s,this.int16[Ie+1]=h,this.int16[Ie+2]=p,this.float32[Ge+2]=v,this.float32[Ge+3]=x,this.uint16[Ie+8]=E,this.uint16[Ie+9]=M,this.uint32[Ge+5]=P,this.uint32[Ge+6]=k,this.uint32[Ge+7]=B,this.uint16[Ie+16]=j,this.uint16[Ie+17]=X,this.uint16[Ie+18]=Z,this.float32[Ge+10]=oe,this.float32[Ge+11]=de,this.uint8[Ze+48]=me,this.uint8[Ze+49]=Se,this.uint8[Ze+50]=be,this.uint32[Ge+13]=ae,this.int16[Ie+28]=_e,this.uint8[Ze+58]=we,i}}tc.prototype.bytesPerElement=60,hn(tc,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class is extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be,ae,_e,we,Ie,Ge,Ze,Ye,tt,vt,kt,It,Dt,$t,yt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be,ae,_e,we,Ie,Ge,Ze,Ye,tt,vt,kt,It,Dt,$t,yt)}emplace(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be,ae,_e,we,Ie,Ge,Ze,Ye,tt,vt,kt,It,Dt,$t,yt,Pt){const gt=20*i,_t=40*i,Gt=80*i;return this.float32[gt+0]=s,this.float32[gt+1]=h,this.int16[_t+4]=p,this.int16[_t+5]=v,this.int16[_t+6]=x,this.int16[_t+7]=E,this.int16[_t+8]=M,this.int16[_t+9]=P,this.int16[_t+10]=k,this.int16[_t+11]=B,this.int16[_t+12]=j,this.uint16[_t+13]=X,this.uint16[_t+14]=Z,this.uint16[_t+15]=oe,this.uint16[_t+16]=de,this.uint16[_t+17]=me,this.uint16[_t+18]=Se,this.uint16[_t+19]=be,this.uint16[_t+20]=ae,this.uint16[_t+21]=_e,this.uint16[_t+22]=we,this.uint16[_t+23]=Ie,this.uint16[_t+24]=Ge,this.uint16[_t+25]=Ze,this.uint16[_t+26]=Ye,this.uint16[_t+27]=tt,this.uint32[gt+14]=vt,this.float32[gt+15]=kt,this.float32[gt+16]=It,this.float32[gt+17]=Dt,this.float32[gt+18]=$t,this.uint8[Gt+76]=yt,this.uint16[_t+39]=Pt,i}}is.prototype.bytesPerElement=80,hn(is,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class nc extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,v)}emplace(i,s,h,p,v,x){const E=5*i;return this.float32[E+0]=s,this.float32[E+1]=h,this.float32[E+2]=p,this.float32[E+3]=v,this.float32[E+4]=x,i}}nc.prototype.bytesPerElement=20,hn(nc,"StructArrayLayout5f20");class dd extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E){const M=this.length;return this.resize(M+1),this.emplace(M,i,s,h,p,v,x,E)}emplace(i,s,h,p,v,x,E,M){const P=7*i;return this.float32[P+0]=s,this.float32[P+1]=h,this.float32[P+2]=p,this.float32[P+3]=v,this.float32[P+4]=x,this.float32[P+5]=E,this.float32[P+6]=M,i}}dd.prototype.bytesPerElement=28,hn(dd,"StructArrayLayout7f28");class Vp extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P,k,B){const j=this.length;return this.resize(j+1),this.emplace(j,i,s,h,p,v,x,E,M,P,k,B)}emplace(i,s,h,p,v,x,E,M,P,k,B,j){const X=11*i;return this.float32[X+0]=s,this.float32[X+1]=h,this.float32[X+2]=p,this.float32[X+3]=v,this.float32[X+4]=x,this.float32[X+5]=E,this.float32[X+6]=M,this.float32[X+7]=P,this.float32[X+8]=k,this.float32[X+9]=B,this.float32[X+10]=j,i}}Vp.prototype.bytesPerElement=44,hn(Vp,"StructArrayLayout11f44");class $p extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P){const k=this.length;return this.resize(k+1),this.emplace(k,i,s,h,p,v,x,E,M,P)}emplace(i,s,h,p,v,x,E,M,P,k){const B=9*i;return this.float32[B+0]=s,this.float32[B+1]=h,this.float32[B+2]=p,this.float32[B+3]=v,this.float32[B+4]=x,this.float32[B+5]=E,this.float32[B+6]=M,this.float32[B+7]=P,this.float32[B+8]=k,i}}$p.prototype.bytesPerElement=36,hn($p,"StructArrayLayout9f36");class Ku extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s){const h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){const p=2*i;return this.float32[p+0]=s,this.float32[p+1]=h,i}}Ku.prototype.bytesPerElement=8,hn(Ku,"StructArrayLayout2f8");class nu extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,s,h,p)}emplace(i,s,h,p,v){const x=6*i;return this.uint32[3*i+0]=s,this.uint16[x+2]=h,this.uint16[x+3]=p,this.uint16[x+4]=v,i}}nu.prototype.bytesPerElement=12,hn(nu,"StructArrayLayout1ul3ui12");class Ju extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint16[1*i+0]=s,i}}Ju.prototype.bytesPerElement=2,hn(Ju,"StructArrayLayout1ui2");class fd extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de){const me=this.length;return this.resize(me+1),this.emplace(me,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de)}emplace(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me){const Se=16*i;return this.float32[Se+0]=s,this.float32[Se+1]=h,this.float32[Se+2]=p,this.float32[Se+3]=v,this.float32[Se+4]=x,this.float32[Se+5]=E,this.float32[Se+6]=M,this.float32[Se+7]=P,this.float32[Se+8]=k,this.float32[Se+9]=B,this.float32[Se+10]=j,this.float32[Se+11]=X,this.float32[Se+12]=Z,this.float32[Se+13]=oe,this.float32[Se+14]=de,this.float32[Se+15]=me,i}}fd.prototype.bytesPerElement=64,hn(fd,"StructArrayLayout16f64");class _f extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,v,x,E){const M=this.length;return this.resize(M+1),this.emplace(M,i,s,h,p,v,x,E)}emplace(i,s,h,p,v,x,E,M){const P=10*i,k=5*i;return this.uint16[P+0]=s,this.uint16[P+1]=h,this.uint16[P+2]=p,this.uint16[P+3]=v,this.float32[k+2]=x,this.float32[k+3]=E,this.float32[k+4]=M,i}}_f.prototype.bytesPerElement=20,hn(_f,"StructArrayLayout4ui3f20");class sg extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.int16[1*i+0]=s,i}}sg.prototype.bytesPerElement=2,hn(sg,"StructArrayLayout1i2");class pd extends Jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint8[1*i+0]=s,i}}pd.prototype.bytesPerElement=1,hn(pd,"StructArrayLayout1ub1");class ky extends Up{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ky.prototype.size=40;class vf extends za{get(i){return new ky(this,i)}}hn(vf,"CollisionBoxArray");class zy extends Up{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}zy.prototype.size=60;class By extends tc{get(i){return new zy(this,i)}}hn(By,"PlacedSymbolArray");class Cv extends Up{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(i){this._structArray.uint32[this._pos4+14]=i}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(i){this._structArray.float32[this._pos4+18]=i}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}Cv.prototype.size=80;class Fy extends is{get(i){return new Cv(this,i)}}hn(Fy,"SymbolInstanceArray");class cs extends ld{getoffsetX(i){return this.float32[1*i+0]}}hn(cs,"GlyphOffsetArray");class Ts extends Jl{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}hn(Ts,"SymbolLineVertexArray");class Ny extends Up{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ny.prototype.size=12;class jy extends nu{get(i){return new Ny(this,i)}}hn(jy,"FeatureIndexArray");class Uy extends tu{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}hn(Uy,"FillExtrusionCentroidArray");class Vy extends Up{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Vy.prototype.size=6;class $y extends ad{get(i){return new Vy(this,i)}}hn($y,"FillExtrusionWallArray");const ag=qi([{name:"a_pos",components:2,type:"Int16"}],4),Hy=qi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class oo{constructor(i=[]){this.segments=i}_prepareSegment(i,s,h,p){let v=this.segments[this.segments.length-1];return i>oo.MAX_VERTEX_ARRAY_LENGTH&&ui(`Max vertices per segment is ${oo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!v||v.vertexLength+i>oo.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s,primitiveOffset:h,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}prepareSegment(i,s,h,p){return this._prepareSegment(i,s.length,h.length,p)}get(){return this.segments}destroy(){for(const i of this.segments)for(const s in i.vaos)i.vaos[s].destroy()}static simpleSegment(i,s,h,p){return new oo([{vertexOffset:i,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Gy(l,i){return 256*(l=Fe(Math.floor(l),0,255))+Fe(Math.floor(i),0,255)}oo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hn(oo,"SegmentVector");const Av=qi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Qu=qi([{name:"a_pattern_b",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),qy=qi([{name:"a_dash",components:4,type:"Uint16"}]);class eh{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(i,s,h,p){this.ids.push(Wy(i)),this.positions.push(s,h,p)}eachPosition(i,s){const h=Wy(i);let p=0,v=this.ids.length-1;for(;p<v;){const x=p+v>>1;this.ids[x]>=h?v=x:p=x+1}for(;this.ids[p]===h;)s(this.positions[3*p],this.positions[3*p+1],this.positions[3*p+2]),p++}static serialize(i,s){const h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return xf(h,p,0,h.length-1),s&&(s.add(h.buffer),s.add(p.buffer)),{ids:h,positions:p}}static deserialize(i){const s=new eh;let h;s.ids=i.ids,s.positions=i.positions;for(const p of s.ids)p!==h&&s.uniqueIds.push(p),h=p;return s.indexed=!0,s}}function Wy(l){const i=+l;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:Aa(String(l))}function xf(l,i,s,h){for(;s<h;){const p=l[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(l[v]<p);do x--;while(l[x]>p);if(v>=x)break;th(l,v,x),th(i,3*v,3*x),th(i,3*v+1,3*x+1),th(i,3*v+2,3*x+2)}x-s<h-x?(xf(l,i,s,x),s=x+1):(xf(l,i,x+1,h),h=x)}}function th(l,i,s){const h=l[i];l[i]=l[s],l[s]=h}hn(eh,"FeaturePositionMap");class wl{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,s),this.initialized=!0),!!this.location}set(i,s,h){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Hp extends wl{constructor(i){super(i),this.current=0}set(i,s,h){this.fetchUniformLocation(i,s)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}}class bo extends wl{constructor(i){super(i),this.current=0}set(i,s,h){this.fetchUniformLocation(i,s)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class Sl extends wl{constructor(i){super(i),this.current=[0,0]}set(i,s,h){this.fetchUniformLocation(i,s)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}}class Qa extends wl{constructor(i){super(i),this.current=[0,0,0]}set(i,s,h){this.fetchUniformLocation(i,s)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}}class bf extends wl{constructor(i){super(i),this.current=[0,0,0,0]}set(i,s,h){this.fetchUniformLocation(i,s)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class Mv extends wl{constructor(i){super(i),this.current=ir.transparent.toRenderColor(null)}set(i,s,h){this.fetchUniformLocation(i,s)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const Rv=new Float32Array(16);class el extends wl{constructor(i){super(i),this.current=Rv}set(i,s,h){if(this.fetchUniformLocation(i,s)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let p=1;p<16;p++)if(h[p]!==this.current[p]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}}const Xy=new Float32Array(9),wf=new Float32Array(4);class ea extends wl{constructor(i){super(i),this.current=wf}set(i,s,h){if(this.fetchUniformLocation(i,s)){for(let p=0;p<4;p++)if(h[p]!==this.current[p]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}}}function Co(l){return[Gy(255*l.r,255*l.g),Gy(255*l.b,255*l.a)]}class Gp{constructor(i,s,h,p){this.value=i,this.uniformNames=s.map(v=>`u_${v}`),this.type=h,this.context=p}setUniform(i,s,h,p,v){const x=p.constantOr(this.value);s.set(i,v,x instanceof ir?x.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):x)}getBinding(i,s){return this.type==="color"?new Mv(i):new bo(i)}}class Sf{constructor(i,s){this.uniformNames=s.map(h=>`u_${h}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(i,s){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br),this.patternTransition=s?s.tl.concat(s.br):this.pattern}setUniform(i,s,h,p,v){let x=null;v!=="u_pattern"&&v!=="u_dash"||(x=this.pattern),v==="u_pattern_b"&&(x=this.patternTransition),v==="u_pixel_ratio"&&(x=this.pixelRatio),x&&s.set(i,v,x)}getBinding(i,s){return s==="u_pattern"||s==="u_pattern_b"||s==="u_dash"?new bf(i):new bo(i)}}class Sc{constructor(i,s,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,s,h,p,v,x,E){const M=this.paintVertexArray.length,P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new xr(0,{brightness:x}),s,{},v,p,E):this.expression.kind==="constant"&&this.expression.value,k=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new xr(0,{brightness:x}),s,{},v,p,E):this.lutExpression.value)==="none";this.paintVertexArray.resize(i),this._setPaintValue(M,i,P,k?null:this.context.lut)}updatePaintArray(i,s,h,p,v,x,E){const M=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:E},h,p,void 0,v):this.expression.kind==="constant"&&this.expression.value,P=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new xr(0,{brightness:E}),h,p,void 0,v):this.lutExpression.value)==="none";this._setPaintValue(i,s,M,P?null:this.context.lut)}_setPaintValue(i,s,h,p){if(this.type==="color"){const v=Co(h.toRenderColor(p));for(let x=i;x<s;x++)this.paintVertexArray.emplace(x,v[0],v[1])}else{for(let v=i;v<s;v++)this.paintVertexArray.emplace(v,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xa{constructor(i,s,h,p,v,x){this.expression=i,this.uniformNames=s.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=p,this.context=v,this.maxValue=0,this.paintVertexAttributes=s.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,s,h,p,v,x,E){const M=this.expression.evaluate(new xr(this.context.zoom,{brightness:x}),s,{},v,p,E),P=this.expression.evaluate(new xr(this.context.zoom+1,{brightness:x}),s,{},v,p,E),k=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new xr(0,{brightness:x}),s,{},v,p,E):this.lutExpression.value)==="none",B=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(B,i,M,P,k?null:this.context.lut)}updatePaintArray(i,s,h,p,v,x,E){const M=this.expression.evaluate({zoom:this.context.zoom,brightness:E},h,p,void 0,v),P=this.expression.evaluate({zoom:this.context.zoom+1,brightness:E},h,p,void 0,v),k=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new xr(0,{brightness:E}),h,p,void 0,v):this.lutExpression.value)==="none";this._setPaintValue(i,s,M,P,k?null:this.context.lut)}_setPaintValue(i,s,h,p,v){if(this.type==="color"){const x=Co(h.toRenderColor(v)),E=Co(h.toRenderColor(v));for(let M=i;M<s;M++)this.paintVertexArray.emplace(M,x[0],x[1],E[0],E[1])}else{for(let x=i;x<s;x++)this.paintVertexArray.emplace(x,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,s,h,p,v){const x=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,E=Fe(this.expression.interpolationFactor(x,this.context.zoom,this.context.zoom+1),0,1);s.set(i,v,E)}getBinding(i,s){return new bo(i)}}class Es{constructor(i,s,h,p,v){this.expression=i,this.layerId=v,this.paintVertexAttributes=(h==="array"?qy:Av).members;for(let x=0;x<s.length;++x);this.paintVertexArray=new p,this.paintTransitionVertexArray=new Ka}populatePaintArray(i,s,h,p){const v=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(v,i,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(i,s,h,p,v,x,E){this._setPaintValues(i,s,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(i,s,h,p){if(!p||!h)return;const v=p[h[0]],x=p[h[1]];if(v){if(v){const{tl:E,br:M,pixelRatio:P}=v;for(let k=i;k<s;k++)this.paintVertexArray.emplace(k,E[0],E[1],M[0],M[1],P)}if(x){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:E,br:M,pixelRatio:P}=x;for(let k=i;k<s;k++)this.paintTransitionVertexArray.emplace(k,E[0],E[1],M[0],M[1],P)}}}upload(i){const s=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,s)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=i.createVertexBuffer(this.paintTransitionVertexArray,Qu.members,s))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class iu{constructor(i,s,h=()=>!0){this.binders={},this._buffers=[],this.context=s;const p=[];for(const v in i.paint._values){const x=i.paint.get(v);if(v.endsWith("-use-theme")||!h(v)||!(x instanceof id&&Yl(x.property.specification)))continue;const E=o(v,i.type),M=x.value,P=x.property.specification.type,k=!!x.property.useIntegerZoom,B=v==="line-dasharray"||v.endsWith("pattern"),j=i.paint.get(`${v}-use-theme`),X=v==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant"||j&&j.value.kind!=="constant";if(M.kind!=="constant"||X)if(M.kind==="source"||X||B){const Z=b(v,P,"source");this.binders[v]=B?new Es(M,E,P,Z,i.id):new Sc(M,E,P,Z),p.push(`/a_${v}`)}else{const Z=b(v,P,"composite");this.binders[v]=new xa(M,E,P,k,s,Z),p.push(`/z_${v}`)}else this.binders[v]=B?new Sf(M.value,E):new Gp(M.value,E,P,s),p.push(`/u_${v}`);j&&(this.binders[v].lutExpression=j.value)}this.cacheKey=p.sort().join("")}getMaxValue(i){const s=this.binders[i];return s instanceof Sc||s instanceof xa?s.maxValue:0}populatePaintArrays(i,s,h,p,v,x,E){for(const M in this.binders){const P=this.binders[M];P.context=this.context,(P instanceof Sc||P instanceof xa||P instanceof Es)&&P.populatePaintArray(i,s,h,p,v,x,E)}}setConstantPatternPositions(i,s){for(const h in this.binders){const p=this.binders[h];p instanceof Sf&&p.setConstantPatternPositions(i,s)}}getPatternTransitionVertexBuffer(i){const s=this.binders[i];return s instanceof Es?s.paintTransitionVertexBuffer:null}updatePaintArrays(i,s,h,p,v,x,E,M,P){let k=!1;const B=Object.keys(i),j=B.length!==0&&!M,X=j?B:s.uniqueIds;this.context.lut=v.lut;for(const Z in this.binders){const oe=this.binders[Z];if(oe.context=this.context,(oe instanceof Sc||oe instanceof xa||oe instanceof Es)&&oe.expression&&oe.expression.kind&&oe.expression.kind!=="constant"&&(oe.expression.isStateDependent===!0||oe.expression.isLightConstant===!1)){const de=v.paint.get(Z);oe.expression=de.value;for(const me of X){const Se=i[me.toString()];s.eachPosition(me,(be,ae,_e)=>{const we=p.feature(be);oe.updatePaintArray(ae,_e,we,Se,x,E,P)})}if(!j)for(const me of h.uniqueIds){const Se=i[me.toString()];h.eachPosition(me,(be,ae,_e)=>{const we=p.feature(be);oe.updatePaintArray(ae,_e,we,Se,x,E,P)})}k=!0}}return k}defines(){const i=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Gp||h instanceof Sf)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){const i=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Sc||h instanceof xa||h instanceof Es)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name);if(h instanceof Es)for(let p=0;p<Qu.members.length;p++)i.push(Qu.members[p].name)}return i}getBinderUniforms(){const i=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Gp||h instanceof Sf||h instanceof xa)for(const p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const s=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof Gp||p instanceof Sf||p instanceof xa)for(const v of p.uniformNames)s.push({name:v,property:h,binding:p.getBinding(i,v)})}return s}setUniforms(i,s,h,p,v){for(const{name:x,property:E,binding:M}of h)this.binders[E].setUniform(i,M,v,p.get(E),x)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const s=this.binders[i];(s instanceof Sc||s instanceof xa||s instanceof Es)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer),s instanceof Es&&s.paintTransitionVertexBuffer&&this._buffers.push(s.paintTransitionVertexBuffer)}}upload(i){for(const s in this.binders){const h=this.binders[s];(h instanceof Sc||h instanceof xa||h instanceof Es)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const s=this.binders[i];(s instanceof Sc||s instanceof xa||s instanceof Es)&&s.destroy()}}}class nh{constructor(i,s,h=()=>!0){this.programConfigurations={};for(const p of i)this.programConfigurations[p.id]=new iu(p,s,h);this.needsUpload=!1,this._featureMap=new eh,this._featureMapWithoutIds=new eh,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(i,s,h,p,v,x,E,M){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(i,s,p,v,x,E,M);s.id!==void 0?this._featureMap.add(s.id,h,this._bufferOffset,i):(this._featureMapWithoutIds.add(this._idlessCounter,h,this._bufferOffset,i),this._idlessCounter+=1),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,s,h,p,v,x,E){for(const M of h)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(i,this._featureMap,this._featureMapWithoutIds,s,M,p,v,x,E||0)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const m={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"]};function o(l,i){return m[l]||[l.replace(`${i}-`,"").replace(/-/g,"_")]}const c={"line-pattern":{source:Ka,composite:Ka},"fill-pattern":{source:Ka,composite:Ka},"fill-extrusion-pattern":{source:Ka,composite:Ka},"line-dasharray":{source:hd,composite:hd}},g={color:{source:Ku,composite:ec},number:{source:ld,composite:Ku}};function b(l,i,s){const h=c[l];return h&&h[s]||g[i][s]}hn(Gp,"ConstantBinder"),hn(Sf,"PatternConstantBinder"),hn(Sc,"SourceExpressionBinder"),hn(Es,"PatternCompositeBinder"),hn(xa,"CompositeExpressionBinder"),hn(iu,"ProgramConfiguration",{omit:["_buffers"]}),hn(nh,"ProgramConfigurationSet");const w=Qt/Math.PI/2,C=5,I=6,L=16383,F=64,V=[F,32,16],q=-w,G=w;function J(l,i,s,h=w){return s=Y(s),[l*Math.sin(s)*h,-i*h,l*Math.cos(s)*h]}function he(l,i,s){return J(Math.cos(Y(l)),Math.sin(Y(l)),i,s)}const le=63710088e-1,fe=2*Math.PI*le;class ce{constructor(i,s){if(isNaN(i)||isNaN(s))throw new Error(`Invalid LngLat object: (${i}, ${s})`);if(this.lng=+i,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ce(Je(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const s=Math.PI/180,h=this.lat*s,p=i.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*s);return le*Math.acos(Math.min(v,1))}toBounds(i=0){const s=360*i/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new ve({lng:this.lng-h,lat:this.lat-s},{lng:this.lng+h,lat:this.lat+s})}toEcef(i){return he(this.lat,this.lng,w+i*w/le)}static convert(i){if(i instanceof ce)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ce(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ce(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ve{constructor(i,s){if(i)if(s)this.setSouthWest(i).setNorthEast(s);else if(i.length===4){const h=i;this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]])}else{const h=i;this.setSouthWest(h[0]).setNorthEast(h[1])}}setNorthEast(i){return this._ne=i instanceof ce?new ce(i.lng,i.lat):ce.convert(i),this}setSouthWest(i){return this._sw=i instanceof ce?new ce(i.lng,i.lat):ce.convert(i),this}extend(i){const s=this._sw,h=this._ne;let p,v;if(i instanceof ce)p=i,v=i;else{if(!(i instanceof ve))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(ve.convert(i)):this.extend(ce.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(ce.convert(i)):this;if(p=i._sw,v=i._ne,!p||!v)return this}return s||h?(s.lng=Math.min(p.lng,s.lng),s.lat=Math.min(p.lat,s.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new ce(p.lng,p.lat),this._ne=new ce(v.lng,v.lat)),this}getCenter(){return new ce((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ce(this.getWest(),this.getNorth())}getSouthEast(){return new ce(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:s,lat:h}=ce.convert(i);let p=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(i){if(i)return i instanceof ve?i:new ve(i)}}const Ae=0,De=25.5;function Ne(l){return fe*Math.cos(l*Math.PI/180)}function ze(l){return(180+l)/360}function ke(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Re(l,i){return l/Ne(i)}function Ve(l){return 360*l-180}function We(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function ct(l,i){return l*Ne(We(i))}const rt=85.051129;function Et(l){return Math.cos(Y(Fe(l,-85.051129,rt)))}function wt(l,i){const s=Fe(i,Ae,De),h=Math.pow(2,s);return Et(l)*fe/(512*h)}function Vt(l){return 1/Math.cos(l*Math.PI/180)}function nt(l,i=0){const s=Math.exp(Math.PI*(1-(l.y+i/Qt)/(1<<l.z)*2));return 80150034*s/(s*s+1)/Qt/(1<<l.z)}class ft{constructor(i,s,h=0){this.x=+i,this.y=+s,this.z=+h}static fromLngLat(i,s=0){const h=ce.convert(i);return new ft(ze(h.lng),ke(h.lat),Re(s,h.lat))}toLngLat(){return new ce(Ve(this.x),We(this.y))}toAltitude(){return ct(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fe*Vt(We(this.y))}}function Qe(l,i,s,h,p,v,x,E,M){const P=(i+h)/2,k=(s+p)/2,B=new Zt(P,k);E(B),function(j,X,Z,oe,de,me){const Se=Z-de,be=oe-me;return Math.abs((oe-X)*Se-(Z-j)*be)/Math.hypot(Se,be)}(B.x,B.y,v.x,v.y,x.x,x.y)>=M?(Qe(l,i,s,P,k,v,B,E,M),Qe(l,P,k,h,p,B,x,E,M)):l.push(x)}function Mt(l,i,s){let h=l[0],p=h.x,v=h.y;i(h);const x=[h];for(let E=1;E<l.length;E++){const M=l[E],{x:P,y:k}=M;i(M),Qe(x,p,v,P,k,h,M,i,s),p=P,v=k,h=M}return x}function pt(l,i,s,h){if(h(i,s)){const p=i.add(s)._mult(.5);pt(l,i,p,h),pt(l,p,s,h)}else l.push(s)}function Ot(l,i){let s=l[0];const h=[s];for(let p=1;p<l.length;p++){const v=l[p];pt(h,s,v,i),s=v}return h}const Ct=Math.pow(2,14)-1,Lt=-Ct-1;function Nt(l,i){const s=Math.round(l.x*i),h=Math.round(l.y*i);return l.x=Fe(s,Lt,Ct),l.y=Fe(h,Lt,Ct),(s<l.x||s>l.x+1||h<l.y||h>l.y+1)&&ui("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function pn(l,i,s){const h=l.loadGeometry(),p=l.extent,v=Qt/p;if(i&&s&&s.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:E,x:M,y:P,projection:k}=s,B=j=>{const X=Ve((i.x+j.x/p)/x),Z=We((i.y+j.y/p)/x),oe=k.project(X,Z);j.x=(oe.x*E-M)*p,j.y=(oe.y*E-P)*p};for(let j=0;j<h.length;j++)if(l.type!==1)h[j]=Mt(h[j],B,1);else{const X=[];for(const Z of h[j])Z.x<0||Z.x>=p||Z.y<0||Z.y>=p||(B(Z),X.push(Z));h[j]=X}}for(const x of h)for(const E of x)Nt(E,v);return h}function _n(l,i){return{type:l.type,id:l.id,properties:l.properties,geometry:i?pn(l):[]}}function dn(l,i,s,h,p){l.emplaceBack(2*i+(h+1)/2,2*s+(p+1)/2)}function Sn(l,i,s){l.emplaceBack(i.x,i.y,i.z,s[0]*16384,s[1]*16384,s[2]*16384)}class yn{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new Jl,this.indexArray=new xo,this.segments=new oo,this.programConfigurations=new nh(i.layers,{zoom:i.zoom,lut:i.lut}),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}updateFootprints(i,s){}populate(i,s,h,p){const v=this.layers[0],x=[];let E=null;v.type==="circle"&&(E=v.layout.get("circle-sort-key"));for(const{feature:P,id:k,index:B,sourceLayerIndex:j}of i){const X=this.layers[0]._featureFilter.needGeometry,Z=_n(P,X);if(!this.layers[0]._featureFilter.filter(new xr(this.zoom),Z,h))continue;const oe=E?E.evaluate(Z,{},h):void 0,de={id:k,properties:P.properties,type:P.type,sourceLayerIndex:j,index:B,geometry:X?Z.geometry:pn(P,h,p),patterns:{},sortKey:oe};x.push(de)}E&&x.sort((P,k)=>P.sortKey-k.sortKey);let M=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new Ql,M=p.projection);for(const P of x){const{geometry:k,index:B,sourceLayerIndex:j}=P,X=i[B].feature;this.addFeature(P,k,B,s.availableImages,h,M,s.brightness),s.featureIndex.insert(X,k,B,j,this.index)}}update(i,s,h,p,v,x,E){this.programConfigurations.updatePaintArrays(i,s,v,h,p,x,E)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ag.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,Hy.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,s,h,p,v,x,E){for(const M of s)for(const P of M){const k=P.x,B=P.y;if(k<0||k>=Qt||B<0||B>=Qt)continue;if(x){const Z=x.projectTilePoint(k,B,v),oe=x.upVector(v,k,B),de=this.globeExtVertexArray;Sn(de,Z,oe),Sn(de,Z,oe),Sn(de,Z,oe),Sn(de,Z,oe)}const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),X=j.vertexLength;dn(this.layoutVertexArray,k,B,-1,-1),dn(this.layoutVertexArray,k,B,1,-1),dn(this.layoutVertexArray,k,B,1,1),dn(this.layoutVertexArray,k,B,-1,1),this.indexArray.emplaceBack(X,X+1,X+2),this.indexArray.emplaceBack(X,X+2,X+3),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p,v,E)}}function Gn(l,i){for(let s=0;s<l.length;s++)if(Wi(i,l[s]))return!0;for(let s=0;s<i.length;s++)if(Wi(l,i[s]))return!0;return!!Kn(l,i)}function ti(l,i,s){return!!Wi(l,i)||!!ni(i,l,s)}function $n(l,i){if(l.length===1)return Hi(i,l[0]);for(let s=0;s<i.length;s++){const h=i[s];for(let p=0;p<h.length;p++)if(Wi(l,h[p]))return!0}for(let s=0;s<l.length;s++)if(Hi(i,l[s]))return!0;for(let s=0;s<i.length;s++)if(Kn(l,i[s]))return!0;return!1}function mi(l,i,s){if(l.length>1){if(Kn(l,i))return!0;for(let h=0;h<i.length;h++)if(ni(i[h],l,s))return!0}for(let h=0;h<l.length;h++)if(ni(l[h],i,s))return!0;return!1}function Kn(l,i){if(l.length===0||i.length===0)return!1;for(let s=0;s<l.length-1;s++){const h=l[s],p=l[s+1];for(let v=0;v<i.length-1;v++)if(Fn(h,p,i[v],i[v+1]))return!0}return!1}function Fn(l,i,s,h){return $i(l,s,h)!==$i(i,s,h)&&$i(l,i,s)!==$i(l,i,h)}function Ci(l,i,s){return(l.x-s.x)*(i.y-s.y)-(l.y-s.y)*(i.x-s.x)}function lr(l,i,s,h){const p=Ci(l,i,h),v=Ci(l,i,s);if(Math.sign(p)===Math.sign(v))return;const x=Ci(s,h,l),E=x+v-p;return Math.sign(x)!==Math.sign(E)?[x/(x-E),v/(v-p)]:void 0}function ni(l,i,s){const h=s*s;if(i.length===1)return l.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(Ai(l,i[p-1],i[p])<h)return!0;return!1}function Ai(l,i,s){const h=i.distSqr(s);if(h===0)return l.distSqr(i);const p=((l.x-i.x)*(s.x-i.x)+(l.y-i.y)*(s.y-i.y))/h;return l.distSqr(p<0?i:p>1?s:s.sub(i)._mult(p)._add(i))}function Hi(l,i){let s,h,p,v=!1;for(let x=0;x<l.length;x++){s=l[x];for(let E=0,M=s.length-1;E<s.length;M=E++)h=s[E],p=s[M],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Wi(l,i){let s=!1;for(let h=0,p=l.length-1;h<l.length;p=h++){const v=l[h],x=l[p];v.y>i.y!=x.y>i.y&&i.x<(x.x-v.x)*(i.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function cr(l,i,s,h,p){for(const x of l)if(i<=x.x&&s<=x.y&&h>=x.x&&p>=x.y)return!0;const v=[new Zt(i,s),new Zt(i,p),new Zt(h,p),new Zt(h,s)];if(l.length>2){for(const x of v)if(Wi(l,x))return!0}for(let x=0;x<l.length-1;x++)if(Nr(l[x],l[x+1],v))return!0;return!1}function Nr(l,i,s){const h=s[0],p=s[2];if(l.x<h.x&&i.x<h.x||l.x>p.x&&i.x>p.x||l.y<h.y&&i.y<h.y||l.y>p.y&&i.y>p.y)return!1;const v=$i(l,i,s[0]);return v!==$i(l,i,s[1])||v!==$i(l,i,s[2])||v!==$i(l,i,s[3])}function fo(l,i,s,h,p,v){let x=i.y-l.y,E=l.x-i.x;if(v=v||0){const M=x*x+E*E;if(M===0)return!0;const P=Math.sqrt(M);x/=P,E/=P}return!((s.x-l.x)*x+(s.y-l.y)*E-v<0||(h.x-l.x)*x+(h.y-l.y)*E-v<0||(p.x-l.x)*x+(p.y-l.y)*E-v<0)}function jr(l,i,s,h,p,v,x){return!(fo(l,i,h,p,v,x)||fo(i,s,h,p,v,x)||fo(s,l,h,p,v,x)||fo(h,p,l,i,s,x)||fo(p,v,l,i,s,x)||fo(v,h,l,i,s,x))}function ei(l,i,s){const h=i.paint.get(l).value;return h.kind==="constant"?h.value:s.programConfigurations.get(i.id).getMaxValue(l)}function Mr(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Fi(l,i,s,h,p){if(!i[0]&&!i[1])return l;const v=Zt.convert(i)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let E=0;E<l.length;E++)x.push(l[E].sub(v));return x}function Zi(l,i,s,h){const p=Zt.convert(l)._mult(h);return i==="viewport"&&p._rotate(-s),p}let Yi,Ur;function Vo(l,i,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[l*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}hn(yn,"CircleBucket",{omit:["layers"]});class Rr{constructor(i,s,h){this.z=i,this.x=s,this.y=h,this.key=Po(0,i,i,s,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,s){const h=function(v,x,E){var M=Vo(256*v,256*(x=Math.pow(2,E)-x-1),E),P=Vo(256*(v+1),256*(x+1),E);return M[0]+","+M[1]+","+P[0]+","+P[1]}(this.x,this.y,this.z),p=function(v,x,E){let M,P="";for(let k=v;k>0;k--)M=1<<k-1,P+=(x&M?1:0)+(E&M?2:0);return P}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ao{constructor(i,s){this.wrap=i,this.canonical=s,this.key=Po(i,s.z,s.z,s.x,s.y)}}class br{constructor(i,s,h,p,v){this.overscaledZ=i,this.wrap=s,this.canonical=new Rr(h,+p,+v),this.key=s===0&&i===h?this.canonical.key:Po(s,i,h,p,v)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const s=this.canonical.z-i;return i>this.canonical.z?new br(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new br(i,this.wrap,i,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(i,s=!0){if(this.overscaledZ===i&&s)return this.key;if(i>this.canonical.z)return Po(this.wrap*+s,i,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-i;return Po(this.wrap*+s,i,i,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const s=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.z<this.canonical.z&&i.canonical.x===this.canonical.x>>s&&i.canonical.y===this.canonical.y>>s}children(i){if(this.overscaledZ>=i)return[new br(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new br(s,this.wrap,s,h,p),new br(s,this.wrap,s,h+1,p),new br(s,this.wrap,s,h,p+1),new br(s,this.wrap,s,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new br(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new br(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ao(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Po(l,i,s,h,p){const v=1<<Math.min(s,22);let x=v*(p%v)+h%v;return l&&s<22&&(x+=v*v*((l<0?-2*l-1:2*l)%(1<<2*(22-s)))),16*(32*x+s)+(i-s)}const ta=[l=>{let i=l.canonical.x-1,s=l.wrap;return i<0&&(i=(1<<l.canonical.z)-1,s--),new br(l.overscaledZ,s,l.canonical.z,i,l.canonical.y)},l=>{let i=l.canonical.x+1,s=l.wrap;return i===1<<l.canonical.z&&(i=0,s++),new br(l.overscaledZ,s,l.canonical.z,i,l.canonical.y)},l=>new br(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,(l.canonical.y===0?1<<l.canonical.z:l.canonical.y)-1),l=>new br(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y===(1<<l.canonical.z)-1?0:l.canonical.y+1)];hn(Rr,"CanonicalTileID"),hn(br,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Ba=qi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:na}=Ba,Fa=qi([{name:"a_pos_3",components:3,type:"Int16"}]);var ic=qi([{name:"a_pos",type:"Int16",components:2}]);class Na{constructor(i,s){this.pos=i,this.dir=s}intersectsPlane(i,s,h){const p=Vi(s,this.dir);if(Math.abs(p)<1e-6)return!1;const v=((i[0]-this.pos[0])*s[0]+(i[1]-this.pos[1])*s[1])/p;return h[0]=this.pos[0]+this.dir[0]*v,h[1]=this.pos[1]+this.dir[1]*v,!0}}class tl{constructor(i,s){this.pos=i,this.dir=s}intersectsPlane(i,s,h){const p=jt(s,this.dir);if(Math.abs(p)<1e-6)return!1;const v=((i[0]-this.pos[0])*s[0]+(i[1]-this.pos[1])*s[1]+(i[2]-this.pos[2])*s[2])/p;return h[0]=this.pos[0]+this.dir[0]*v,h[1]=this.pos[1]+this.dir[1]*v,h[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(i,s,h){if(function(X,Z){var oe=X[0],de=X[1],me=X[2],Se=Z[0],be=Z[1],ae=Z[2];return Math.abs(oe-Se)<=S*Math.max(1,Math.abs(oe),Math.abs(Se))&&Math.abs(de-be)<=S*Math.max(1,Math.abs(de),Math.abs(be))&&Math.abs(me-ae)<=S*Math.max(1,Math.abs(me),Math.abs(ae))}(this.pos,i)||s===0)return h[0]=h[1]=h[2]=0,!1;const[p,v,x]=this.dir,E=this.pos[0]-i[0],M=this.pos[1]-i[1],P=this.pos[2]-i[2],k=p*p+v*v+x*x,B=2*(E*p+M*v+P*x),j=B*B-4*k*(E*E+M*M+P*P-s*s);if(j<0){const X=Math.max(-B/2,0),Z=E+p*X,oe=M+v*X,de=P+x*X,me=Math.hypot(Z,oe,de);return h[0]=Z*s/me,h[1]=oe*s/me,h[2]=de*s/me,!1}{const X=(-B-Math.sqrt(j))/(2*k);if(X<0){const Z=Math.hypot(E,M,P);return h[0]=E*s/Z,h[1]=M*s/Z,h[2]=P*s/Z,!1}return h[0]=E+p*X,h[1]=M+v*X,h[2]=P+x*X,!0}}}class Cs{constructor(i,s,h,p,v){this.TL=i,this.TR=s,this.BR=h,this.BL=p,this.horizon=v}static fromInvProjectionMatrix(i,s,h){const p=[-1,1,1],v=[1,1,1],x=[1,-1,1],E=[-1,-1,1],M=Hn(p,p,i),P=Hn(v,v,i),k=Hn(x,x,i),B=Hn(E,E,i);return new Cs(M,P,k,B,s/h)}}function ih(l,i,s){let h=1/0,p=-1/0;const v=[];for(const x of l){Ln(v,x,i);const E=jt(v,s);h=Math.min(h,E),p=Math.max(p,E)}return[h,p]}function ia(l,i){let s=!0;for(let h=0;h<l.planes.length;h++){const p=l.planes[h];let v=0;for(let x=0;x<i.length;x++)v+=jt(p,i[x])+p[3]>=0;if(v===0)return 0;v!==i.length&&(s=!1)}return s?2:1}function qp(l,i){for(const s of l.projections){const h=ih(i,l.points[0],s.axis);if(s.projection[1]<h[0]||s.projection[0]>h[1])return 0}return 1}function Wp(l,i){let s=0;const h=[0,0,0,0];for(let x=0;x<l.length;x++)h[0]=l[x][0],h[1]=l[x][1],h[2]=l[x][2],h[3]=1,(p=h)[0]*(v=i)[0]+p[1]*v[1]+p[2]*v[2]+p[3]*v[3]>=0&&s++;var p,v;return s}class Xp{constructor(i,s){this.points=i||new Array(8).fill([0,0,0]),this.planes=s||new Array(6).fill([0,0,0,0]),this.bounds=wr.fromPoints(this.points),this.projections=[],this.frustumEdges=[Ln([],this.points[2],this.points[3]),Ln([],this.points[0],this.points[3]),Ln([],this.points[4],this.points[0]),Ln([],this.points[5],this.points[1]),Ln([],this.points[6],this.points[2]),Ln([],this.points[7],this.points[3])];for(const h of this.frustumEdges){const p=[0,-h[2],h[1]],v=[h[2],0,-h[0]];this.projections.push({axis:p,projection:ih(this.points,this.points[0],p)}),this.projections.push({axis:v,projection:ih(this.points,this.points[0],v)})}}static fromInvProjectionMatrix(i,s,h,p){const v=Math.pow(2,h),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const k=ii([],P,i),B=1/k[3]/s*v;return(j=k)[0]=(X=k)[0]*(Z=[B,B,p?1/k[3]:B,B])[0],j[1]=X[1]*Z[1],j[2]=X[2]*Z[2],j[3]=X[3]*Z[3],j;var j,X,Z}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const k=en([],Rn([],Ln([],x[P[0]],x[P[1]]),Ln([],x[P[2]],x[P[1]]))),B=-jt(k,x[P[1]]);return k.concat(B)}),M=[];for(let P=0;P<x.length;P++)M.push([x[P][0],x[P][1],x[P][2]]);return new Xp(M,E)}intersectsPrecise(i,s,h){for(let p=0;p<s.length;p++)if(!Wp(i,s[p]))return 0;for(let p=0;p<this.planes.length;p++)if(!Wp(i,this.planes[p]))return 0;for(const p of h)for(const v of this.frustumEdges){const x=Rn([],p,v),E=et(x);if(E===0)continue;je(x,x,1/E);const M=ih(this.points,this.points[0],x),P=ih(i,this.points[0],x);if(M[0]>P[1]||P[0]>M[1])return 0}return 1}containsPoint(i){for(const s of this.planes){const h=s[3];if(jt([s[0],s[1],s[2]],i)+h<0)return!1}return!0}}class wr{static fromPoints(i){const s=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const p of i)Tt(s,s,p),xt(h,h,p);return new wr(s,h)}static fromTileIdAndHeight(i,s,h){const p=1<<i.canonical.z,v=i.canonical.x,x=i.canonical.y;return new wr([v/p,x/p,s],[(v+1)/p,(x+1)/p,h])}static applyTransform(i,s){const h=i.getCorners();for(let p=0;p<h.length;++p)Hn(h[p],h[p],s);return wr.fromPoints(h)}static applyTransformFast(i,s){const h=[s[12],s[13],s[14]],p=[...h];for(let v=0;v<3;v++)for(let x=0;x<3;x++){const E=s[4*x+v],M=E*i.min[x],P=E*i.max[x];h[v]+=Math.min(M,P),p[v]+=Math.max(M,P)}return new wr(h,p)}static projectAabbCorners(i,s){const h=i.getCorners();for(let p=0;p<h.length;++p)Hn(h[p],h[p],s);return h}constructor(i,s){this.min=i,this.max=s,this.center=je([],mt([],this.min,this.max),.5)}quadrant(i){const s=[i%2==0,i<2],h=ut(this.min),p=ut(this.max);for(let v=0;v<s.length;v++)h[v]=s[v]?this.min[v]:this.center[v],p[v]=s[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new wr(h,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,s=this.max;return[[i[0],i[1],i[2]],[s[0],i[1],i[2]],[s[0],s[1],i[2]],[i[0],s[1],i[2]],[i[0],i[1],s[2]],[s[0],i[1],s[2]],[s[0],s[1],s[2]],[i[0],s[1],s[2]]]}intersects(i){return this.intersectsAabb(i.bounds)?ia(i,this.getCorners()):0}intersectsFlat(i){return this.intersectsAabb(i.bounds)?ia(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(i,s){return s||this.intersects(i)?qp(i,this.getCorners()):0}intersectsPreciseFlat(i,s){return s||this.intersectsFlat(i)?qp(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(i){for(let s=0;s<3;++s)if(this.min[s]>i.max[s]||i.min[s]>this.max[s])return!1;return!0}intersectsAabbXY(i){return!(this.min[0]>i.max[0]||i.min[0]>this.max[0]||this.min[1]>i.max[1]||i.min[1]>this.max[1])}encapsulate(i){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],i.min[s]),this.max[s]=Math.max(this.max[s],i.max[s])}encapsulatePoint(i){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],i[s]),this.max[s]=Math.max(this.max[s],i[s])}closestPoint(i){return[Math.max(Math.min(this.max[0],i[0]),this.min[0]),Math.max(Math.min(this.max[1],i[1]),this.min[1]),Math.max(Math.min(this.max[2],i[2]),this.min[2])]}}function ru(l){return l*w/le}hn(wr,"Aabb");const Zp=[new wr([q,q,q],[G,G,G]),new wr([q,q,q],[0,0,G]),new wr([0,q,q],[G,0,G]),new wr([q,0,q],[0,G,G]),new wr([0,0,q],[G,G,G])];function Yp(l,i,s,h=!0){const p=je([],l._camera.position,l.worldSize),v=[i,s,1,1];ii(v,v,l.pixelMatrixInverse),ci(v,v,1/v[3]);const x=en([],Ln([],v,p)),E=l.globeMatrix,M=[E[12],E[13],E[14]],P=Ln([],M,p),k=et(P),B=en([],P),j=l.worldSize/(2*Math.PI),X=jt(B,x),Z=Math.asin(j/k);if(Z<Math.acos(X)){if(!h)return null;const Ye=[],tt=[];je(Ye,x,k/X),en(tt,Ln(tt,Ye,P)),en(x,mt(x,P,je(x,tt,Math.tan(Z)*k)))}const oe=[];new tl(p,x).closestPointOnSphere(M,j,oe);const de=en([],Ri(E,0)),me=en([],Ri(E,1)),Se=en([],Ri(E,2)),be=jt(de,oe),ae=jt(me,oe),_e=jt(Se,oe),we=ie(Math.asin(-ae/j));let Ie=ie(Math.atan2(be,_e));Ie=l.center.lng+function(Ye,tt){const vt=(tt-Ye+180)%360-180;return vt<-180?vt+360:vt}(l.center.lng,Ie);const Ge=ze(Ie),Ze=Fe(ke(we),0,1);return new ft(Ge,Ze)}class Nw{constructor(i,s,h){this.a=Ln([],i,h),this.b=Ln([],s,h),this.center=h;const p=en([],this.a),v=en([],this.b);this.angle=Math.acos(jt(p,v))}}function Iv(l,i){if(l.angle===0)return null;let s;return s=l.a[i]===0?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[i]/l.a[i]/Math.sin(l.angle)-1/Math.tan(l.angle)),s<0||s>1?null:function(h,p,v,x){const E=Math.sin(v);return h*(Math.sin((1-x)*v)/E)+p*(Math.sin(x*v)/E)}(l.a[i],l.b[i],l.angle,Fe(s,0,1))+l.center[i]}function ou(l){if(l.z<=1)return Zp[l.z+2*l.y+l.x];const i=Ox(Dv(l));return wr.fromPoints(i)}function su(l,i,s){return je(l,l,1-s),ht(l,l,i,s)}function Pv(l,i,s){for(const h of l)Hn(h,h,i),je(h,h,s)}function jw(l,i,s,h){const p=i/l.worldSize,v=l.globeMatrix;if(s.z<=1){const Ze=ou(s).getCorners();return Pv(Ze,v,p),wr.fromPoints(Ze)}const x=Dv(s,h),E=Ox(x,w+ru(l._tileCoverLift));Pv(E,v,p);const M=Number.MAX_VALUE,P=[-M,-M,-M],k=[M,M,M];if(x.contains(l.center)){for(const tt of E)Tt(k,k,tt),xt(P,P,tt);P[2]=0;const Ze=l.point,Ye=[Ze.x*p,Ze.y*p,0];return Tt(k,k,Ye),xt(P,P,Ye),new wr(k,P)}if(l._tileCoverLift>0){for(const Ze of E)Tt(k,k,Ze),xt(P,P,Ze);return new wr(k,P)}const B=[v[12]*p,v[13]*p,v[14]*p],j=x.getCenter(),X=Fe(l.center.lat,-85.051129,rt),Z=Fe(j.lat,-85.051129,rt),oe=ze(l.center.lng),de=ke(X);let me=oe-ze(j.lng);const Se=de-ke(Z);me>.5?me-=1:me<-.5&&(me+=1);let be=0;Math.abs(me)>Math.abs(Se)?be=me>=0?1:3:(be=Se>=0?0:2,ht(B,B,[v[4]*p,v[5]*p,v[6]*p],-Math.sin(Y(Se>=0?x.getSouth():x.getNorth()))*w));const ae=E[be],_e=E[(be+1)%4],we=new Nw(ae,_e,B),Ie=[Iv(we,0)||ae[0],Iv(we,1)||ae[1],Iv(we,2)||ae[2]],Ge=md(l.zoom);if(Ge>0){const Ze=function({x:tt,y:vt,z:kt},It,Dt,$t,yt){const Pt=1/(1<<kt);let gt=tt*Pt,_t=gt+Pt,Gt=vt*Pt,Xt=Gt+Pt,En=0;const gn=(gt+_t)/2-$t;return gn>.5?En=-1:gn<-.5&&(En=1),gt=((gt+En)*It-($t*=It))*Dt+$t,_t=((_t+En)*It-$t)*Dt+$t,Gt=(Gt*It-(yt*=It))*Dt+yt,Xt=(Xt*It-yt)*Dt+yt,[[gt,Xt,0],[_t,Xt,0],[_t,Gt,0],[gt,Gt,0]]}(s,i,l._pixelsPerMercatorPixel,oe,de);for(let tt=0;tt<E.length;tt++)su(E[tt],Ze[tt],Ge);const Ye=mt([],Ze[be],Ze[(be+1)%4]);je(Ye,Ye,.5),su(Ie,Ye,Ge)}for(const Ze of E)Tt(k,k,Ze),xt(P,P,Ze);return k[2]=Math.min(ae[2],_e[2]),Tt(k,k,Ie),xt(P,P,Ie),new wr(k,P)}function Dv({x:l,y:i,z:s},h=!1){const p=1/(1<<s),v=new ce(Ve(l*p),i===(1<<s)-1&&h?-90:We((i+1)*p)),x=new ce(Ve((l+1)*p),i===0&&h?90:We(i*p));return new ve(v,x)}function Ox(l,i=w){const s=Y(l.getNorth()),h=Y(l.getSouth()),p=Math.cos(s),v=Math.cos(h),x=Math.sin(s),E=Math.sin(h),M=l.getWest(),P=l.getEast();return[J(v,E,M,i),J(v,E,P,i),J(p,x,P,i),J(p,x,M,i)]}function lg(l,i,s,h){const p=1<<s.z,v=(l/Qt+s.x)/p;return he(We((i/Qt+s.y)/p),Ve(v),h)}function Zy({min:l,max:i}){return L/Math.max(i[0]-l[0],i[1]-l[1],i[2]-l[2])}const Kp=new Float64Array(16);function Jp(l){const i=Zy(l),s=Ce(Kp,[i,i,i]);return re(s,s,on([],l.min))}function Ov(l){const i=(h=l.min,(s=Kp)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=h[0],s[13]=h[1],s[14]=h[2],s[15]=1,s);var s,h;const p=1/Zy(l);return ne(i,i,[p,p,p])}function Lv(l){const i=Qt/(2*Math.PI);return l/(2*Math.PI)/i}function Lx(l,i){return Qt/(512*Math.pow(2,l))*Zy(ou(i))}function kx(l,i,s,h,p){const v=Lv(s),x=[l,i,-s/(2*Math.PI)],E=H(new Float64Array(16));return re(E,E,x),ne(E,E,[v,v,v]),se(E,E,Y(-p)),ue(E,E,Y(-h)),E}function md(l){return He(C,I,l)}function zx(l,i){const s=he(i.lat,i.lng),h=function(Z){const oe=he(Z._center.lat,Z._center.lng);let de=Rn([],ot(0,1,0),oe);const me=Le([],-Z.angle,oe);de=Hn(de,de,me),Le(me,-Z._pitch,de);const Se=en([],oe);return je(Se,Se,ru(Z.cameraToCenterDistance/Z.pixelsPerMeter)),Hn(Se,Se,me),mt([],oe,Se)}(l);return x=(p=$e([],h,s))[0],E=p[1],M=p[2],P=(v=s)[0],k=v[1],B=v[2],X=(j=Math.sqrt(x*x+E*E+M*M)*Math.sqrt(P*P+k*k+B*B))&&jt(p,v)/j,Math.acos(Math.min(Math.max(X,-1),1));var p,v,x,E,M,P,k,B,j,X}function cg(l,i){return zx(l,i)>Math.PI/2*1.01}const Bx=Y(85),Uw=Math.cos(Bx),No=Math.sin(Bx),Fx=U(),Vw=l=>{const i=[];return l.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),l.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i};function Nx(l,i,s,h,p,v,x,E,M){if(v&&l.queryGeometry.isAboveHorizon)return!1;v&&(M*=l.pixelToTileUnitsFactor);const P=l.tileID.canonical,k=s.projection.upVectorScale(P,s.center.lat,s.worldSize).metersToTile;for(const B of i)for(const j of B){const X=j.add(E),Z=p&&s.elevation?s.elevation.exaggeration()*p.getElevationAt(X.x,X.y,!0):0,oe=s.projection.projectTilePoint(X.x,X.y,P);if(Z>0){const be=s.projection.upVector(P,X.x,X.y);oe.x+=be[0]*k*Z,oe.y+=be[1]*k*Z,oe.z+=be[2]*k*Z}const de=v?X:pA(oe.x,oe.y,oe.z,h),me=v?l.tilespaceRays.map(be=>kv(be,Z)):l.queryGeometry.screenGeometry,Se=ii([],[oe.x,oe.y,oe.z,1],h);if(!x&&v?M*=Se[3]/s.cameraToCenterDistance:x&&!v&&(M*=s.cameraToCenterDistance/Se[3]),v){const be=We((j.y/Qt+P.y)/(1<<P.z));M/=s.projection.pixelsPerMeter(be,1)/Re(1,be)}if(ti(me,de,M))return!0}return!1}function pA(l,i,s,h){const p=ii([],[l,i,s,1],h);return new Zt(p[0]/p[3],p[1]/p[3])}const $w=ot(0,0,0),mA=ot(0,0,1);function kv(l,i){const s=Xe();return $w[2]=i,l.intersectsPlane($w,mA,s),new Zt(s[0],s[1])}class Qp extends yn{}let zv,Yy,Bv,Tf;function au(l,{width:i,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*s*h)throw new RangeError("mismatched image size")}else p=new Uint8Array(i*s*h);return l.width=i,l.height=s,l.data=p,l}function ug(l,i,s){const{width:h,height:p}=i;h===l.width&&p===l.height||(jx(l,i,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,h),height:Math.min(l.height,p)},s,null),l.width=h,l.height=p,l.data=i.data)}function jx(l,i,s,h,p,v,x,E){if(p.width===0||p.height===0)return i;if(p.width>l.width||p.height>l.height||s.x>l.width-p.width||s.y>l.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const M=l.data,P=i.data,k=v===4&&E;for(let B=0;B<p.height;B++){const j=((s.y+B)*l.width+s.x)*v,X=((h.y+B)*i.width+h.x)*v;if(k)for(let Z=0;Z<p.width;Z++){const oe=j+Z*v+3,de=X+Z*v;P[de+0]=255,P[de+1]=255,P[de+2]=255,P[de+3]=M[oe]}else if(x)for(let Z=0;Z<p.width;Z++){const oe=j+Z*v,de=X+Z*v,me=M[oe+3],Se=new ir(M[oe+0]/255*me,M[oe+1]/255*me,M[oe+2]/255*me,me).toRenderColor(x).toArray();P[de+0]=Se[0],P[de+1]=Se[1],P[de+2]=Se[2],P[de+3]=Se[3]}else for(let Z=0;Z<p.width*v;Z++)P[X+Z]=M[j+Z]}return i}hn(Qp,"HeatmapBucket",{omit:["layers"]});class gd{constructor(i,s){au(this,i,1,s)}resize(i){ug(this,new gd(i),1)}clone(){return new gd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,h,p,v){jx(i,s,h,p,v,1,null)}}class ps{constructor(i,s){au(this,i,4,s)}resize(i){ug(this,new ps(i),4)}replace(i,s){s?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ps({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,h,p,v,x,E){jx(i,s,h,p,v,4,x,E)}}class Ux{constructor(i,s){this.width=i.width,this.height=i.height,this.data=s instanceof Uint8Array?new Float32Array(s.buffer):s}}function hg(l){const i={},s=l.resolution||256,h=l.clips?l.clips.length:1,p=l.image||new ps({width:s,height:h}),v=(x,E,M)=>{i[l.evaluationKey]=M;const P=l.expression.evaluate(i);P&&(p.data[x+E+0]=Math.floor(255*P.r/P.a),p.data[x+E+1]=Math.floor(255*P.g/P.a),p.data[x+E+2]=Math.floor(255*P.b/P.a),p.data[x+E+3]=Math.floor(255*P.a))};if(l.clips)for(let x=0,E=0;x<h;++x,E+=4*s)for(let M=0,P=0;M<s;M++,P+=4){const k=M/(s-1),{start:B,end:j}=l.clips[x];v(E,P,B*(1-k)+j*k)}else for(let x=0,E=0;x<s;x++,E+=4)v(0,E,x/(s-1));return p}hn(gd,"AlphaImage"),hn(ps,"RGBAImage");const gA=qi([{name:"a_pos",components:2,type:"Int16"}],4),Vx=qi([{name:"a_road_z_offset",components:1,type:"Float32"}],4),Hw=qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),Gw=qi([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function Ky(l,i,s=2){const h=i&&i.length,p=h?i[0]*s:l.length;let v=Fv(l,0,p,s,!0);const x=[];if(!v||v.next===v.prev)return x;let E,M,P;if(h&&(v=function(k,B,j,X){const Z=[];for(let oe=0,de=B.length;oe<de;oe++){const me=Fv(k,B[oe]*X,oe<de-1?B[oe+1]*X:k.length,X,!1);me===me.next&&(me.steiner=!0),Z.push(Ww(me))}Z.sort(Qr);for(let oe=0;oe<Z.length;oe++)j=$x(Z[oe],j);return j}(l,i,v,s)),l.length>80*s){E=1/0,M=1/0;let k=-1/0,B=-1/0;for(let j=s;j<p;j+=s){const X=l[j],Z=l[j+1];X<E&&(E=X),Z<M&&(M=Z),X>k&&(k=X),Z>B&&(B=Z)}P=Math.max(k-E,B-M),P=P!==0?32767/P:0}return Jy(v,x,s,E,M,P,0),x}function Fv(l,i,s,h,p){let v;if(p===function(x,E,M,P){let k=0;for(let B=E,j=M-P;B<M;B+=P)k+=(x[j]-x[B])*(x[B+1]+x[j+1]),j=B;return k}(l,i,s,h)>0)for(let x=i;x<s;x+=h)v=Mo(x/h|0,l[x],l[x+1],v);else for(let x=s-h;x>=i;x-=h)v=Mo(x/h|0,l[x],l[x+1],v);return v&&em(v,v.next)&&(tm(v),v=v.next),v}function yd(l,i){if(!l)return l;i||(i=l);let s,h=l;do if(s=!1,h.steiner||!em(h,h.next)&&Do(h.prev,h,h.next)!==0)h=h.next;else{if(tm(h),h=i=h.prev,h===h.next)break;s=!0}while(s||h!==i);return i}function Jy(l,i,s,h,p,v,x){if(!l)return;!x&&v&&function(M,P,k,B){let j=M;do j.z===0&&(j.z=e_(j.x,j.y,P,k,B)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==M);j.prevZ.nextZ=null,j.prevZ=null,function(X){let Z,oe=1;do{let de,me=X;X=null;let Se=null;for(Z=0;me;){Z++;let be=me,ae=0;for(let we=0;we<oe&&(ae++,be=be.nextZ,be);we++);let _e=oe;for(;ae>0||_e>0&&be;)ae!==0&&(_e===0||!be||me.z<=be.z)?(de=me,me=me.nextZ,ae--):(de=be,be=be.nextZ,_e--),Se?Se.nextZ=de:X=de,de.prevZ=Se,Se=de;me=be}Se.nextZ=null,oe*=2}while(Z>1)}(j)}(l,h,p,v);let E=l;for(;l.prev!==l.next;){const M=l.prev,P=l.next;if(v?Qy(l,h,p,v):yA(l))i.push(M.i,l.i,P.i),tm(l),l=P.next,E=P.next;else if((l=P)===E){x?x===1?Jy(l=_A(yd(l),i),i,s,h,p,v,2):x===2&&qw(l,i,s,h,p,v):Jy(yd(l),i,s,h,p,v,1);break}}}function yA(l){const i=l.prev,s=l,h=l.next;if(Do(i,s,h)>=0)return!1;const p=i.x,v=s.x,x=h.x,E=i.y,M=s.y,P=h.y,k=Math.min(p,v,x),B=Math.min(E,M,P),j=Math.max(p,v,x),X=Math.max(E,M,P);let Z=h.next;for(;Z!==i;){if(Z.x>=k&&Z.x<=j&&Z.y>=B&&Z.y<=X&&_d(p,E,v,M,x,P,Z.x,Z.y)&&Do(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function Qy(l,i,s,h){const p=l.prev,v=l,x=l.next;if(Do(p,v,x)>=0)return!1;const E=p.x,M=v.x,P=x.x,k=p.y,B=v.y,j=x.y,X=Math.min(E,M,P),Z=Math.min(k,B,j),oe=Math.max(E,M,P),de=Math.max(k,B,j),me=e_(X,Z,i,s,h),Se=e_(oe,de,i,s,h);let be=l.prevZ,ae=l.nextZ;for(;be&&be.z>=me&&ae&&ae.z<=Se;){if(be.x>=X&&be.x<=oe&&be.y>=Z&&be.y<=de&&be!==p&&be!==x&&_d(E,k,M,B,P,j,be.x,be.y)&&Do(be.prev,be,be.next)>=0||(be=be.prevZ,ae.x>=X&&ae.x<=oe&&ae.y>=Z&&ae.y<=de&&ae!==p&&ae!==x&&_d(E,k,M,B,P,j,ae.x,ae.y)&&Do(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;be&&be.z>=me;){if(be.x>=X&&be.x<=oe&&be.y>=Z&&be.y<=de&&be!==p&&be!==x&&_d(E,k,M,B,P,j,be.x,be.y)&&Do(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;ae&&ae.z<=Se;){if(ae.x>=X&&ae.x<=oe&&ae.y>=Z&&ae.y<=de&&ae!==p&&ae!==x&&_d(E,k,M,B,P,j,ae.x,ae.y)&&Do(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function _A(l,i){let s=l;do{const h=s.prev,p=s.next.next;!em(h,p)&&Xw(h,s,s.next,p)&&dg(h,p)&&dg(p,h)&&(i.push(h.i,s.i,p.i),tm(s),tm(s.next),s=l=p),s=s.next}while(s!==l);return yd(s)}function qw(l,i,s,h,p,v){let x=l;do{let E=x.next.next;for(;E!==x.prev;){if(x.i!==E.i&&Uv(x,E)){let M=n_(x,E);return x=yd(x,x.next),M=yd(M,M.next),Jy(x,i,s,h,p,v,0),void Jy(M,i,s,h,p,v,0)}E=E.next}x=x.next}while(x!==l)}function Qr(l,i){let s=l.x-i.x;return s===0&&(s=l.y-i.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(i.next.y-i.y)/(i.next.x-i.x)),s}function $x(l,i){const s=function(p,v){let x=v;const E=p.x,M=p.y;let P,k=-1/0;if(em(p,x))return x;do{if(em(p,x.next))return x.next;if(M<=x.y&&M>=x.next.y&&x.next.y!==x.y){const oe=x.x+(M-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(oe<=E&&oe>k&&(k=oe,P=x.x<x.next.x?x:x.next,oe===E))return P}x=x.next}while(x!==v);if(!P)return null;const B=P,j=P.x,X=P.y;let Z=1/0;x=P;do{if(E>=x.x&&x.x>=j&&E!==x.x&&jv(M<X?E:k,M,j,X,M<X?k:E,M,x.x,x.y)){const oe=Math.abs(M-x.y)/(E-x.x);dg(x,p)&&(oe<Z||oe===Z&&(x.x>P.x||x.x===P.x&&Nv(P,x)))&&(P=x,Z=oe)}x=x.next}while(x!==B);return P}(l,i);if(!s)return i;const h=n_(s,l);return yd(h,h.next),yd(s,s.next)}function Nv(l,i){return Do(l.prev,l,i.prev)<0&&Do(i.next,l,l.next)<0}function e_(l,i,s,h,p){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*p|0)|l<<8))|l<<4))|l<<2))|l<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Ww(l){let i=l,s=l;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==l);return s}function jv(l,i,s,h,p,v,x,E){return(p-x)*(i-E)>=(l-x)*(v-E)&&(l-x)*(h-E)>=(s-x)*(i-E)&&(s-x)*(v-E)>=(p-x)*(h-E)}function _d(l,i,s,h,p,v,x,E){return!(l===x&&i===E)&&jv(l,i,s,h,p,v,x,E)}function Uv(l,i){return l.next.i!==i.i&&l.prev.i!==i.i&&!function(s,h){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&Xw(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(l,i)&&(dg(l,i)&&dg(i,l)&&function(s,h){let p=s,v=!1;const x=(s.x+h.x)/2,E=(s.y+h.y)/2;do p.y>E!=p.next.y>E&&p.next.y!==p.y&&x<(p.next.x-p.x)*(E-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(l,i)&&(Do(l.prev,l,i.prev)||Do(l,i.prev,i))||em(l,i)&&Do(l.prev,l,l.next)>0&&Do(i.prev,i,i.next)>0)}function Do(l,i,s){return(i.y-l.y)*(s.x-i.x)-(i.x-l.x)*(s.y-i.y)}function em(l,i){return l.x===i.x&&l.y===i.y}function Xw(l,i,s,h){const p=t_(Do(l,i,s)),v=t_(Do(l,i,h)),x=t_(Do(s,h,l)),E=t_(Do(s,h,i));return p!==v&&x!==E||!(p!==0||!Vv(l,s,i))||!(v!==0||!Vv(l,h,i))||!(x!==0||!Vv(s,l,h))||!(E!==0||!Vv(s,i,h))}function Vv(l,i,s){return i.x<=Math.max(l.x,s.x)&&i.x>=Math.min(l.x,s.x)&&i.y<=Math.max(l.y,s.y)&&i.y>=Math.min(l.y,s.y)}function t_(l){return l>0?1:l<0?-1:0}function dg(l,i){return Do(l.prev,l,l.next)<0?Do(l,i,l.next)>=0&&Do(l,l.prev,i)>=0:Do(l,i,l.prev)<0||Do(l,l.next,i)<0}function n_(l,i){const s=Bs(l.i,l.x,l.y),h=Bs(i.i,i.x,i.y),p=l.next,v=i.prev;return l.next=i,i.prev=l,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Mo(l,i,s,h){const p=Bs(l,i,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function tm(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Bs(l,i,s){return{i:l,x:i,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $v(l,i){const s=l.length;if(s<=1)return[l];const h=[];let p,v;for(let x=0;x<s;x++){const E=Di(l[x]);E!==0&&(l[x].area=Math.abs(E),v===void 0&&(v=E<0),v===E<0?(p&&h.push(p),p=[l[x]]):p.push(l[x]))}if(p&&h.push(p),i>1)for(let x=0;x<h.length;x++)h[x].length<=i||(jc(h[x],i,1,h[x].length-1,Hx),h[x]=h[x].slice(0,i));return h}function Hx(l,i){return i.area-l.area}function Hv(l,i,s=1){if(!l)return null;const h=typeof l=="string"?Ys.from(l).getPrimary():l.getPrimary(),p=typeof l=="string"?null:l.getSecondary();for(const v of[h,p]){if(!v)continue;const x=v.id.toString();i.has(x)||i.set(x,[]),v.scaleSelf(s),i.get(x).push(v)}return{primary:h.toString(),secondary:p?p.toString():null}}function fg(l,i,s,h){const p=h.patternDependencies;let v=!1;for(const x of i){const E=x.paint.get(`${l}-pattern`);E.isConstant()||(v=!0),Hv(E.constantOr(null),p,s)&&(v=!0)}return v}function Gv(l,i,s,h,p,v){const x=v.patternDependencies;for(const E of i){const M=E.paint.get(`${l}-pattern`).value;if(M.kind!=="constant"){let P=M.evaluate({zoom:h},s,{},v.availableImages);P=P&&P.name?P.name:P;const k=Hv(P,x,p);if(!k)continue;const{primary:B,secondary:j}=k;B&&(s.patterns[E.id]=[B,j].filter(Boolean))}}return s}var qv,Wv,i_,Zw,Xv,Yw,Gx,Zv={};function Kw(){if(Wv)return qv;Wv=1;var l=ca();function i(p,v,x,E,M){this.properties={},this.extent=x,this.type=0,this._pbf=p,this._geometry=-1,this._keys=E,this._values=M,p.readFields(s,this,v)}function s(p,v,x){p==1?v.id=x.readVarint():p==2?function(E,M){for(var P=E.readVarint()+E.pos;E.pos<P;){var k=M._keys[E.readVarint()],B=M._values[E.readVarint()];M.properties[k]=B}}(x,v):p==3?v.type=x.readVarint():p==4&&(v._geometry=x.pos)}function h(p){for(var v,x,E=0,M=0,P=p.length,k=P-1;M<P;k=M++)E+=((x=p[k]).x-(v=p[M]).x)*(v.y+x.y);return E}return qv=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var p=this._pbf;p.pos=this._geometry;for(var v,x=p.readVarint()+p.pos,E=1,M=0,P=0,k=0,B=[];p.pos<x;){if(M<=0){var j=p.readVarint();E=7&j,M=j>>3}if(M--,E===1||E===2)P+=p.readSVarint(),k+=p.readSVarint(),E===1&&(v&&B.push(v),v=[]),v.push(new l(P,k));else{if(E!==7)throw new Error("unknown command "+E);v&&v.push(v[0].clone())}}return v&&B.push(v),B},i.prototype.bbox=function(){var p=this._pbf;p.pos=this._geometry;for(var v=p.readVarint()+p.pos,x=1,E=0,M=0,P=0,k=1/0,B=-1/0,j=1/0,X=-1/0;p.pos<v;){if(E<=0){var Z=p.readVarint();x=7&Z,E=Z>>3}if(E--,x===1||x===2)(M+=p.readSVarint())<k&&(k=M),M>B&&(B=M),(P+=p.readSVarint())<j&&(j=P),P>X&&(X=P);else if(x!==7)throw new Error("unknown command "+x)}return[k,j,B,X]},i.prototype.toGeoJSON=function(p,v,x){var E,M,P=this.extent*Math.pow(2,x),k=this.extent*p,B=this.extent*v,j=this.loadGeometry(),X=i.types[this.type];function Z(me){for(var Se=0;Se<me.length;Se++){var be=me[Se];me[Se]=[360*(be.x+k)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+B)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(E=0;E<j.length;E++)oe[E]=j[E][0];Z(j=oe);break;case 2:for(E=0;E<j.length;E++)Z(j[E]);break;case 3:for(j=function(me){var Se=me.length;if(Se<=1)return[me];for(var be,ae,_e=[],we=0;we<Se;we++){var Ie=h(me[we]);Ie!==0&&(ae===void 0&&(ae=Ie<0),ae===Ie<0?(be&&_e.push(be),be=[me[we]]):be.push(me[we]))}return be&&_e.push(be),_e}(j),E=0;E<j.length;E++)for(M=0;M<j[E].length;M++)Z(j[E][M])}j.length===1?j=j[0]:X="Multi"+X;var de={type:"Feature",geometry:{type:X,coordinates:j},properties:this.properties};return"id"in this&&(de.id=this.id),de},qv}function vd(){if(Zw)return i_;Zw=1;var l=Kw();function i(h,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(s,this,p),this.length=this._features.length}function s(h,p,v){h===15?p.version=v.readVarint():h===1?p.name=v.readString():h===5?p.extent=v.readVarint():h===2?p._features.push(v.pos):h===3?p._keys.push(v.readString()):h===4&&p._values.push(function(x){for(var E=null,M=x.readVarint()+x.pos;x.pos<M;){var P=x.readVarint()>>3;E=P===1?x.readString():P===2?x.readFloat():P===3?x.readDouble():P===4?x.readVarint64():P===5?x.readVarint():P===6?x.readSVarint():P===7?x.readBoolean():null}return E}(v))}return i_=i,i.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var p=this._pbf.readVarint()+this._pbf.pos;return new l(this._pbf,p,this.extent,this._keys,this._values)},i_}function qx(){return Gx||(Gx=1,Zv.VectorTile=function(){if(Yw)return Xv;Yw=1;var l=vd();function i(s,h,p){if(s===3){var v=new l(p,p.readVarint()+p.pos);v.length&&(h[v.name]=v)}}return Xv=function(s,h){this.layers=s.readFields(i,{},h)},Xv}(),Zv.VectorTileFeature=Kw(),Zv.VectorTileLayer=vd()),Zv}var rh=qx();const nm="3d_elevation_id",Jw="level";class Wx{constructor(){this._valid=!1}reset(i){return this.feature=i,this._valid=!0,this._geometry=i.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(i,s){return this._valid&&i(s(this._geometry)),this}require(i,s,h){return this.get(i,!0,s,h)}optional(i,s,h){return this.get(i,!1,s,h)}success(){return this._valid}get(i,s,h,p){const v=this.feature.properties.hasOwnProperty(i)?+this.feature.properties[i]:void 0;return this._valid&&v!==void 0&&!Number.isNaN(v)?h(p?p(v):v):s&&(this._valid=!1),this}}class Qw{constructor(i,s){this.featureFunc=i,this.vertexFunc=s}parseFeature(i,s,h){return this.featureFunc(i,s,h)}parseVertex(i,s,h){return this.vertexFunc(i,s,h)}}const lu=new Qw((l,i,s)=>l.reset(i).require(nm,h=>{s.id=h}).optional("fixed_height_relative",h=>{s.constantHeight=h},Ef.decodeRelativeHeight).geometry(h=>{s.bounds=h},Nm).success(),(l,i,s)=>l.reset(i).require(nm,h=>{s.id=h}).require("elevation_idx",h=>{s.idx=h}).require("extent",h=>{s.extent=h}).require("height_relative",h=>{s.height=h},Ef.decodeRelativeHeight).geometry(h=>{s.position=h},Ef.getPoint).success()),Xx=new Qw((l,i,s)=>l.reset(i).require(nm,h=>{s.id=h}).optional("fixed_height",h=>{s.constantHeight=h},Ef.decodeMetricHeight).geometry(h=>{s.bounds=h},Nm).success(),(l,i,s)=>l.reset(i).require(nm,h=>{s.id=h}).require("elevation_idx",h=>{s.idx=h}).require("extent",h=>{s.extent=h}).require("height",h=>{s.height=h},Ef.decodeMetricHeight).geometry(h=>{s.position=h},Ef.getPoint).success());class Ef{static getPoint(i){return qr(i[0][0].x,i[0][0].y)}static decodeRelativeHeight(i){return 1e-4*i*5}static decodeMetricHeight(i){return 1e-4*i}static parse(i){const s=[],h=[],p=i.length,v=new Wx;for(let E=0;E<p;E++){const M=i.feature(E),P=M.properties.hasOwnProperty("version")?String(M.properties.version):void 0,k=(x=P)?x==="1.0.1"?Xx:void 0:lu;if(k===void 0){ui(`Unknown elevation feature version number ${P||"(unknown)"}`);continue}const B=M.properties.hasOwnProperty("type")?M.properties.type:void 0;if(B){if(rh.VectorTileFeature.types[M.type]==="Point"&&B==="curve_point"){const j={};k.parseVertex(v,M,j)&&s.push(j)}else if(rh.VectorTileFeature.types[M.type]==="Polygon"&&B==="curve_meta"){const j={};k.parseFeature(v,M,j)&&h.push(j)}}}var x;return{vertices:s,features:h}}}class Zx{constructor(i,s){this.feature=i,this.metersToTile=s,this.index=0}get(){const i=this.feature.vertices[this.index],s=this.feature.vertexProps[this.index].dir,h=s[1],p=-s[0],v=(i.extent+1)*this.metersToTile;return[new Zt(Math.trunc(i.position[0]+h*v),Math.trunc(i.position[1]+p*v)),new Zt(Math.trunc(i.position[0]-h*v),Math.trunc(i.position[1]-p*v))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class im{constructor(i,s,h,p,v,x){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=i,this.heightRange={min:h,max:h},this.safeArea=s,this.constantHeight=h,this.constantHeight==null&&(this.constantHeight!=null||p.length!==0)){this.vertices=p,this.edges=v,this.edges=this.edges.filter(E=>{return E.a<this.vertices.length&&E.b<this.vertices.length&&!((M=this.vertices[E.a].position)[0]===(P=this.vertices[E.b].position)[0]&&M[1]===P[1]);var M,P}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const E of this.vertices)this.vertexProps.push({dir:qr(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,E.height),this.heightRange.max=Math.max(this.heightRange.max,E.height);for(const E of this.edges){const M=this.vertices[E.a].position,P=this.vertices[E.b].position,k=Qi(Nn(),P,M),B=hr(k),j=li(Nn(),k,1/B);this.edgeProps.push({vec:k,dir:j,len:B});const X=this.vertexProps[E.a].dir,Z=this.vertexProps[E.b].dir;mr(X,X,j),mr(Z,Z,j)}for(const E of this.vertexProps)E.dir[0]===0&&E.dir[1]===0||Wr(E.dir,E.dir);this.tessellate(x)}}pointElevation(i){if(this.constantHeight!=null)return this.constantHeight;const s=this.getClosestEdge(i);if(s==null)return 0;const[h,p]=s;return((v,x,E)=>(1-E)*v+E*x)(this.vertices[this.edges[h].a].height,this.vertices[this.edges[h].b].height,p)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(i){if(this.edges.length===0)return;let s=0,h=Number.POSITIVE_INFINITY,p=0;const v=qr(i.x,i.y);for(let x=0;x<this.edges.length;x++){const E=this.edges[x],M=this.edgeProps[x].dir,P=new Na(v,this.edgeProps[x].dir),k=this.vertices[E.a].position,B=this.vertices[E.b].position,j=Nn(),X=Nn(),Z=P.intersectsPlane(k,this.vertexProps[E.a].dir,j),oe=P.intersectsPlane(B,this.vertexProps[E.b].dir,X);if(!Z||!oe)continue;const de=Qi(Nn(),X,j),me=Qi(Nn(),v,j),Se=Vi(de,de),be=Se>0?Vi(me,de)/Se:0,ae=Fe(be,0,1),_e=Math.abs((be-ae)*this.edgeProps[x].len),we=Qi(Nn(),v,k),Ie=_e+Math.abs(Vi(we,qr(M[1],-M[0])));Ie<h&&(s=x,h=Ie,p=ae)}return[s,p]}tessellate(i){for(let s=this.edges.length-1;s>=0;--s){const h=this.edges[s].a,p=this.edges[s].b,{position:v,height:x,extent:E}=this.vertices[h],{position:M,height:P,extent:k}=this.vertices[p],B=this.vertexProps[h].dir,j=this.vertexProps[p].dir,X=ot(v[0]/i,v[1]/i,x),Z=ot(M[0]/i,M[1]/i,P),oe=ot(B[1],-B[0],0);je(oe,oe,E);const de=ot(j[1],-j[0],0);if(je(de,de,k),this.distSqLines(ot(X[0]+.5*oe[0],X[1]+.5*oe[1],X[2]+.5*oe[2]),ot(Z[0]-.5*de[0],Z[1]-.5*de[1],Z[2]-.5*de[2]),ot(X[0]-.5*oe[0],X[1]-.5*oe[1],X[2]-.5*oe[2]),ot(Z[0]+.5*de[0],Z[1]+.5*de[1],Z[2]+.5*de[2]))<=.0025000000000000005)continue;const me=this.vertices.length,Se=mr(Nn(),v,M);this.vertices.push({position:li(Se,Se,.5),height:.5*(x+P),extent:.5*(E+k)});const be=mr(Nn(),B,j);this.vertexProps.push({dir:Wr(be,be)}),this.edges.splice(s,1),this.edgeProps.splice(s,1),this.edges.push({a:h,b:me}),this.edges.push({a:me,b:p});const ae=Qi(Nn(),this.vertices[me].position,v),_e=hr(ae),we={vec:ae,dir:li(Nn(),ae,1/_e),len:_e};this.edgeProps.push(we),this.edgeProps.push(we)}}distSqLines(i,s,h,p){const v=$e(Xe(),s,i),x=$e(Xe(),p,h),E=$e(Xe(),i,h),M=jt(v,v),P=jt(v,x),k=jt(v,E),B=jt(x,x),j=jt(x,E),X=M*B-P*P;if(X===0){const de=jt(E,x)/jt(x,x);return Bt(Vn(Xe(),h,p,de),i)}const Z=(P*j-k*B)/X,oe=(M*j-P*k)/X;return Bt(Vn(Xe(),i,s,Z),Vn(Xe(),h,p,oe))}}class Tl{static parseFrom(i,s){const h=Ef.parse(i);if(!h)return[];let{vertices:p,features:v}=h;const x=1/nt(s);v.sort((k,B)=>k.id-B.id),p.sort((k,B)=>k.id-B.id||k.idx-B.idx),p=p.filter((k,B,j)=>B===j.findIndex(X=>X.id===k.id&&X.idx===k.idx));const E=new Array;let M=0;const P=p.length;for(const k of v){if(k.constantHeight){E.push(new im(k.id,k.bounds,k.constantHeight));continue}for(;M!==P&&p[M].id<k.id;)M++;if(M===P||p[M].id!==k.id)continue;const B=new Array,j=new Array,X=M;for(;M!==P&&p[M].id===k.id;){const Z=p[M];if(B.push({position:Z.position,height:Z.height,extent:Z.extent}),M!==X&&p[M-1].idx===Z.idx-1){const oe=M-X;j.push({a:oe-1,b:oe})}M++}E.push(new im(k.id,k.bounds,void 0,B,j,x))}return E}static getElevationFeature(i,s){if(!s)return;const h=+i.properties[nm];return Number.isNaN(h)?void 0:s.find(p=>p.id===h)}}class Yx{constructor(i,s){this.zScale=1,this.xOffset=0,this.yOffset=0,i.equals(s)||(this.zScale=Math.pow(2,s.z-i.z),this.xOffset=(i.x*this.zScale-s.x)*Qt,this.yOffset=(i.y*this.zScale-s.y)*Qt)}constantElevation(i,s){if(i.constantHeight!=null)return this.computeBiasedHeight(i.constantHeight,s)}pointElevation(i,s,h){const p=this.constantElevation(s,h);return p??(i.x=i.x*this.zScale+this.xOffset,i.y=i.y*this.zScale+this.yOffset,this.computeBiasedHeight(s.pointElevation(i),h))}computeBiasedHeight(i,s){return s<=0?i:i+s*He(0,s,i>=0?i:Math.abs(.5*i))}}hn(im,"ElevationFeature");class r_{constructor(){this.polygons=new Map}add(i,...s){this.polygons.has(i)?this.polygons.get(i).push(...s):this.polygons.set(i,s)}merge(i){for(const[s,h]of i.polygons)this.add(s,...h)}}class nl{constructor(){this.portals=[]}static evaluate(i){if(i.length===0)return new nl;let s=[];for(const P of i)s.push(...P.portals);if(s.length===0)return new nl;const h=(P,k)=>P<=0&&k<=0||P>=Qt&&k>=Qt;for(const P of s){const k=P.va,B=P.vb;(h(k.x,B.x)||h(k.y,B.y))&&(P.type="border")}const p=s.filter(P=>P.type!=="unevaluated"),v=s.filter(P=>P.type==="unevaluated");if(v.length===0)return new nl;v.sort((P,k)=>P.hash===k.hash?P.isTunnel===k.isTunnel?0:P.isTunnel?-1:1:P.hash<k.hash?1:-1),s=p.concat(v);let x=p.length,E=x,M=x;do if(E++,E===s.length||s[x].hash!==s[E].hash){if(E-x==2){M<x&&(s[M]=s[x],s[x]=null);const P=s[M],k=s[E-1];P.type=P.isTunnel!==k.isTunnel?"tunnel":"polygon",P.connection={a:P.connection.a,b:k.connection.a},M++}x=E}while(x!==s.length);return s.splice(M),s.sort((P,k)=>P.hash<k.hash?1:-1),{portals:s}}}hn(nl,"ElevationPortalGraph"),hn(r_,"ElevationPolygons");class vA{constructor(i,s,h){this.outPositions=i,this.outNormals=s,this.outIndices=h,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(i,s,h){let p=i[2];h!=null&&(p*=h);const v=this.getVec3Bits(i)<<96n|this.getVec3Bits(s),x=this.vertexLookup.get(v);if(x!=null)return x;const E=this.outPositions.length;this.vertexLookup.set(v,E);const M=Math.trunc(16384*s[0]),P=Math.trunc(16384*s[1]),k=Math.trunc(16384*s[2]);return this.outPositions.emplaceBack(i[0],i[1],p),this.outNormals.emplaceBack(M,P,k),E}addVertices(i,s,...h){const p=[];for(const v of h){const x=this.addVertex(v,i,s);p.push(x)}return p}addTriangles(i,s,h){if(s&&h){const p=h.length===1,v=ot(0,0,0);for(let x=0;x<i.length;x+=3){const E=s[i[x+0]],M=s[i[x+1]],P=s[i[x+2]],k=p?h[0]:h[i[x+1]],B=p?h[0]:h[i[x+2]],j=this.addVertex(ot(E.x,E.y,p?h[0]:h[i[x+0]]),v),X=this.addVertex(ot(M.x,M.y,k),v),Z=this.addVertex(ot(P.x,P.y,B),v);this.outIndices.emplaceBack(j,X,Z)}}else for(let p=0;p<i.length;p+=3)this.outIndices.emplaceBack(i[p+0],i[p+1],i[p+2])}addQuad(i,s){const h=this.addVertices(s,void 0,...i.map(M=>ot(M.coord.x,M.coord.y,M.height))),[p,v,x,E]=h;this.addTriangles([p,v,x,x,E,p])}getBits(i){return this.view.setFloat32(0,i),BigInt(this.view.getUint32(0))}getVec3Bits(i){return this.getBits(i[0])<<64n|this.getBits(i[1])<<32n|this.getBits(i[2])}}class El{constructor(i){this.unevaluatedPortals=new nl,this.portalPolygons=new r_,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new cd,this.vertexNormals=new ud,this.indexArray=new xo,this.tileToMeters=nt(i)}addVertices(i,s){const h=this.unevalVertices.length;for(let p=0;p<i.length;p++)this.unevalVertices.push(i[p]),this.unevalHeights.push(s[p]);return h}addTriangles(i,s,h){const p=h?this.unevalTunnelTriangles:this.unevalTriangles;for(const v of i)p.push(v+s)}addRenderableRing(i,s,h,p,v){const x=[new Zt(v.min.x,v.min.y),new Zt(v.max.x,v.min.y),new Zt(v.max.x,v.max.y),new Zt(v.min.x,v.max.y)];for(let E=0;E<h-1;E++){const M=s+E,P=M+1,k=this.unevalVertices[M],B=this.unevalVertices[P];if(!(k.x>=v.min.x&&k.x<=v.max.x&&k.y>=v.min.y&&k.y<=v.max.y||B.x>=v.min.x&&B.x<=v.max.x&&B.y>=v.min.y&&B.y<=v.max.y||Nr(k,B,x))||this.isOnBorder(k.x,B.x)||this.isOnBorder(k.y,B.y))continue;const j=El.computeEdgeHash(this.unevalVertices[M],this.unevalVertices[P]);let X,Z=this.vertexHashLookup.get(El.computePosHash(k));Z!=null?X=Z.next:(Z=this.vertexHashLookup.get(El.computePosHash(B)),X=Z!=null?Z.prev:j),this.unevalEdges.push({polygonIdx:i,a:M,b:P,hash:j,portalHash:X,isTunnel:p,type:"unevaluated"})}}addPortalCandidates(i,s,h,p,v){if(s.length===0)return;this.portalPolygons.add(i,{geometry:s,zLevel:v});const x=s[0];this.vertexHashLookup.clear();let E=El.computeEdgeHash(x[x.length-2],x[x.length-1]);for(let M=0;M<x.length-1;M++){const P=x[M+0],k=x[M+1],B=qr(k.x-P.x,k.y-P.y),j=hr(B);if(j===0)continue;let X="unevaluated";const Z=p.pointElevation(P),oe=p.pointElevation(k);Math.abs(Z)<.01&&Math.abs(oe)<.01?X="entrance":(this.isOnBorder(P.x,k.x)||this.isOnBorder(P.y,k.y))&&(X="border");const de=El.computeEdgeHash(P,k);this.unevaluatedPortals.portals.push({connection:{a:i,b:void 0},va:P,vb:k,vab:B,length:j,hash:de,isTunnel:h,type:X});const me=El.computePosHash(P);this.vertexHashLookup.set(me,{prev:E,next:de}),E=de}}construct(i){if(this.unevalVertices.length===0)return;const s=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),h=B=>{B.primitiveLength=this.indexArray.length-B.primitiveOffset},p=new vA(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(i.portals,this.unevalEdges);const v=s(),x=s(),E=s(),M=(B,j)=>{B.sort((Z,oe)=>Z.type===j&&oe.type!==j?-1:Z.type!==j&&oe.type===j?1:0);const X=B.findIndex(Z=>Z.type!==j);return X>=0?X:B.length};let P=0;this.unevalEdges.length>0&&(P=M(this.unevalEdges,"none"),this.constructBridgeStructures(p,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:P},this.tileToMeters));const k=s();if(this.unevalEdges.length>0){const B=this.unevalEdges.splice(P),j=M(B,"tunnel")+P;this.unevalEdges.push(...B),this.constructTunnelStructures(p,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:P},{min:P,max:j})}h(E),p.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),h(k),p.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),h(x),p.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),h(v),this.maskSegments=oo.simpleSegment(0,k.primitiveOffset,0,k.primitiveLength),this.depthSegments=oo.simpleSegment(0,x.primitiveOffset,0,x.primitiveLength),this.renderableSegments=oo.simpleSegment(0,E.primitiveOffset,0,E.primitiveLength),this.shadowCasterSegments=oo.simpleSegment(0,v.primitiveOffset,0,v.primitiveLength)}upload(i){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=i.createVertexBuffer(this.vertexPositions,Hw.members),this.vertexBufferNormal=i.createVertexBuffer(this.vertexNormals,Gw.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(i,s,h,p,v){const x=new Map;for(let E=p;E<v;E++){const M=h[E],P=M.a,k=M.b,B=El.computePosHash(i[P]),j=El.computePosHash(i[k]);x.has(B)||x.set(B,{}),x.has(j)||x.set(j,{});const X=x.get(B),Z=x.get(j);s[P]<=0&&s[k]<=0||(X.to=k,Z.from=P)}return x}constructBridgeStructures(i,s,h,p,v,x){const E=this.computeVertexConnections(s,h,p,v.min,v.max),M=1/x,P=.5*M,k=j=>ot(s[j].x,s[j].y,h[j]*M),B=j=>{const X=E.get(El.computePosHash(s[j])),Z=X.from,oe=X.to;if(!Z||!oe)return;const de=k(Z),me=k(j),Se=k(oe),be=ot(0,0,0);if(!oi(de,me)){const _e=Ln(Xe(),me,de);mt(be,be,en(_e,_e))}if(!oi(Se,me)){const _e=Ln(Xe(),Se,me);mt(be,be,en(_e,_e))}const ae=hi(be);return ae>0?je(be,be,1/ae):void 0};for(let j=v.min;j<v.max;j++){const X=p[j],Z=this.prepareEdgePoints(s,h,X,(Ht,ri)=>Ht>ri);if(Z==null)continue;const oe=Z[0],de=Z[1],me=ot(oe.coord.x,oe.coord.y,M*oe.height),Se=ot(de.coord.x,de.coord.y,M*de.height);if(oi(me,Se))continue;const be=Ln(Xe(),Se,me);en(be,be);const ae=Ht=>en(Ht,Ht),_e=B(X.a)||be,we=B(X.b)||be,Ie=ae(ot(_e[1],-_e[0],0)),Ge=ae(ot(we[1],-we[0],0)),Ze=ae(Rn(Xe(),Ie,_e)),Ye=ae(Rn(Xe(),Ge,we)),tt=Xe(),vt=[mt(Xe(),me,je(tt,Ln(tt,Ie,Ze),P)),mt(Xe(),me,je(tt,mt(tt,Ie,Ze),P)),mt(Xe(),me,je(tt,Ze,P)),me],kt=[mt(Xe(),Se,je(tt,Ln(tt,Ge,Ye),P)),mt(Xe(),Se,je(tt,mt(tt,Ge,Ye),P)),mt(Xe(),Se,je(tt,Ye,P)),Se],[It,Dt]=i.addVertices(Ie,x,vt[0],vt[1]),[$t,yt]=i.addVertices(Ge,x,kt[0],kt[1]);i.addTriangles([It,Dt,$t,Dt,yt,$t]);const[Pt,gt]=i.addVertices(Ze,x,vt[1],vt[2]),[_t,Gt]=i.addVertices(Ye,x,kt[1],kt[2]);i.addTriangles([Pt,gt,_t,gt,Gt,_t]);const[Xt,En]=i.addVertices(on(Ie,Ie),x,vt[2],vt[3]),[gn,rn]=i.addVertices(on(Ge,Ge),x,kt[2],kt[3]);i.addTriangles([Xt,En,gn,En,rn,gn])}}constructTunnelStructures(i,s,h,p,v,x){const E=M=>en(M,M);for(let M=v.min;M<v.max;M++){const P=this.prepareEdgePoints(s,h,p[M],(X,Z)=>X<Z);if(P==null)continue;const[k,B]=P,j=E(ot(B.coord.y-k.coord.y,-(B.coord.x-k.coord.x),0));i.addQuad([k,B,{coord:B.coord,height:p[M].isTunnel?-.1:0},{coord:k.coord,height:p[M].isTunnel?-.1:0}],j)}for(let M=x.min;M<x.max;M++){const P=p[M],k=s[P.a],B=s[P.b],j=E(ot(B.y-k.y,-(B.x-k.x),0));i.addQuad([{coord:B,height:0},{coord:k,height:0},{coord:k,height:h[P.a]+4},{coord:B,height:h[P.b]+4}],j),i.addQuad([{coord:k,height:0},{coord:B,height:0},{coord:B,height:h[P.b]+4},{coord:k,height:h[P.a]+4}],j)}}prepareEdgePoints(i,s,h,p){let v=s[h.a],x=s[h.b];const E=p(v,0),M=p(x,0);if(E&&M)return[{coord:i[h.a],height:v},{coord:i[h.b],height:x}];if(!E&&!M)return;const P=i[h.a].clone(),k=i[h.b].clone();if(E){if(!M){const B=x/(x-v);k.x=jn(k.x,P.x,B),k.y=jn(k.y,P.y,B),x=jn(x,v,B)}}else{const B=v/(v-x);P.x=jn(P.x,k.x,B),P.y=jn(P.y,k.y,B),v=jn(v,x,B)}return[{coord:P,height:v},{coord:k,height:x}]}prepareEdges(i,s){if(s.length===0)return;s.sort((E,M)=>E.hash===M.hash?M.polygonIdx-E.polygonIdx:M.hash>E.hash?1:-1);let h=0,p=0,v=0,x=s[h].polygonIdx;do p++,(p===s.length||s[h].hash!==s[p].hash)&&((p-h==1||s[p-1].polygonIdx!==x)&&(v<h&&(s[v]=s[h],s[h]=null),s[v].type="none",v++),h=p,h!==s.length&&(x=s[h].polygonIdx));while(h!==s.length);if(s.splice(v),s.length!==0&&i.length!==0){s.sort((P,k)=>P.portalHash<k.portalHash?1:-1);let E=0,M=0;for(;E!==s.length&&M!==i.length;){const P=s[E],k=i[M];P.portalHash>k.hash?E++:k.hash>P.portalHash?M++:(P.type=k.type,E++)}}}isOnBorder(i,s){return i<=0&&s<=0||i>=Qt&&s>=Qt}static computeEdgeHash(i,s){return(i.y===s.y&&i.x>s.x||i.y>s.y)&&([i,s]=[s,i]),BigInt(El.computePosHash(i))<<32n|BigInt(El.computePosHash(s))}static computePosHash(i){return((65535&i.x)<<16|65535&i.y)>>>0}}var rm,Kx={exports:{}},eS=(rm||(rm=1,function(l,i){(function(s){function h(Me,Oe){return Me>Oe?1:Me<Oe?-1:0}var p=function(Me,Oe){Me===void 0&&(Me=h),Oe===void 0&&(Oe=!1),this._compare=Me,this._root=null,this._size=0,this._noDuplicates=!!Oe},v={size:{configurable:!0}};function x(Me,Oe,St,Jt,an){var sn=an-Jt;if(sn>0){var Tn=Jt+Math.floor(sn/2),Zn={key:Oe[Tn],data:St[Tn],parent:Me};return Zn.left=x(Zn,Oe,St,Jt,Tn),Zn.right=x(Zn,Oe,St,Tn+1,an),Zn}return null}function E(Me,Oe,St,Jt,an){if(!(St>=Jt)){for(var sn=Me[St+Jt>>1],Tn=St-1,Zn=Jt+1;;){do Tn++;while(an(Me[Tn],sn)<0);do Zn--;while(an(Me[Zn],sn)>0);if(Tn>=Zn)break;var ki=Me[Tn];Me[Tn]=Me[Zn],Me[Zn]=ki,ki=Oe[Tn],Oe[Tn]=Oe[Zn],Oe[Zn]=ki}E(Me,Oe,St,Zn,an),E(Me,Oe,Zn+1,Jt,an)}}p.prototype.rotateLeft=function(Me){var Oe=Me.right;Oe&&(Me.right=Oe.left,Oe.left&&(Oe.left.parent=Me),Oe.parent=Me.parent),Me.parent?Me===Me.parent.left?Me.parent.left=Oe:Me.parent.right=Oe:this._root=Oe,Oe&&(Oe.left=Me),Me.parent=Oe},p.prototype.rotateRight=function(Me){var Oe=Me.left;Oe&&(Me.left=Oe.right,Oe.right&&(Oe.right.parent=Me),Oe.parent=Me.parent),Me.parent?Me===Me.parent.left?Me.parent.left=Oe:Me.parent.right=Oe:this._root=Oe,Oe&&(Oe.right=Me),Me.parent=Oe},p.prototype._splay=function(Me){for(;Me.parent;){var Oe=Me.parent;Oe.parent?Oe.left===Me&&Oe.parent.left===Oe?(this.rotateRight(Oe.parent),this.rotateRight(Oe)):Oe.right===Me&&Oe.parent.right===Oe?(this.rotateLeft(Oe.parent),this.rotateLeft(Oe)):Oe.left===Me&&Oe.parent.right===Oe?(this.rotateRight(Oe),this.rotateLeft(Oe)):(this.rotateLeft(Oe),this.rotateRight(Oe)):Oe.left===Me?this.rotateRight(Oe):this.rotateLeft(Oe)}},p.prototype.splay=function(Me){for(var Oe,St,Jt,an,sn;Me.parent;)(St=(Oe=Me.parent).parent)&&St.parent?((Jt=St.parent).left===St?Jt.left=Me:Jt.right=Me,Me.parent=Jt):(Me.parent=null,this._root=Me),an=Me.left,sn=Me.right,Me===Oe.left?(St&&(St.left===Oe?(Oe.right?(St.left=Oe.right,St.left.parent=St):St.left=null,Oe.right=St,St.parent=Oe):(an?(St.right=an,an.parent=St):St.right=null,Me.left=St,St.parent=Me)),sn?(Oe.left=sn,sn.parent=Oe):Oe.left=null,Me.right=Oe,Oe.parent=Me):(St&&(St.right===Oe?(Oe.left?(St.right=Oe.left,St.right.parent=St):St.right=null,Oe.left=St,St.parent=Oe):(sn?(St.left=sn,sn.parent=St):St.left=null,Me.right=St,St.parent=Me)),an?(Oe.right=an,an.parent=Oe):Oe.right=null,Me.left=Oe,Oe.parent=Me)},p.prototype.replace=function(Me,Oe){Me.parent?Me===Me.parent.left?Me.parent.left=Oe:Me.parent.right=Oe:this._root=Oe,Oe&&(Oe.parent=Me.parent)},p.prototype.minNode=function(Me){if(Me===void 0&&(Me=this._root),Me)for(;Me.left;)Me=Me.left;return Me},p.prototype.maxNode=function(Me){if(Me===void 0&&(Me=this._root),Me)for(;Me.right;)Me=Me.right;return Me},p.prototype.insert=function(Me,Oe){var St=this._root,Jt=null,an=this._compare;if(this._noDuplicates)for(;St;){if(Jt=St,an(St.key,Me)===0)return;St=an(St.key,Me)<0?St.right:St.left}else for(;St;)Jt=St,St=an(St.key,Me)<0?St.right:St.left;return St={key:Me,data:Oe,left:null,right:null,parent:Jt},Jt?an(Jt.key,St.key)<0?Jt.right=St:Jt.left=St:this._root=St,this.splay(St),this._size++,St},p.prototype.find=function(Me){for(var Oe=this._root,St=this._compare;Oe;){var Jt=St(Oe.key,Me);if(Jt<0)Oe=Oe.right;else{if(!(Jt>0))return Oe;Oe=Oe.left}}return null},p.prototype.contains=function(Me){for(var Oe=this._root,St=this._compare;Oe;){var Jt=St(Me,Oe.key);if(Jt===0)return!0;Oe=Jt<0?Oe.left:Oe.right}return!1},p.prototype.remove=function(Me){var Oe=this.find(Me);if(!Oe)return!1;if(this.splay(Oe),Oe.left)if(Oe.right){var St=this.minNode(Oe.right);St.parent!==Oe&&(this.replace(St,St.right),St.right=Oe.right,St.right.parent=St),this.replace(Oe,St),St.left=Oe.left,St.left.parent=St}else this.replace(Oe,Oe.left);else this.replace(Oe,Oe.right);return this._size--,!0},p.prototype.removeNode=function(Me){if(!Me)return!1;if(this.splay(Me),Me.left)if(Me.right){var Oe=this.minNode(Me.right);Oe.parent!==Me&&(this.replace(Oe,Oe.right),Oe.right=Me.right,Oe.right.parent=Oe),this.replace(Me,Oe),Oe.left=Me.left,Oe.left.parent=Oe}else this.replace(Me,Me.left);else this.replace(Me,Me.right);return this._size--,!0},p.prototype.erase=function(Me){var Oe=this.find(Me);if(Oe){this.splay(Oe);var St=Oe.left,Jt=Oe.right,an=null;St&&(St.parent=null,an=this.maxNode(St),this.splay(an),this._root=an),Jt&&(St?an.right=Jt:this._root=Jt,Jt.parent=an),this._size--}},p.prototype.pop=function(){var Me=this._root,Oe=null;if(Me){for(;Me.left;)Me=Me.left;Oe={key:Me.key,data:Me.data},this.remove(Me.key)}return Oe},p.prototype.next=function(Me){var Oe=Me;if(Oe)if(Oe.right)for(Oe=Oe.right;Oe&&Oe.left;)Oe=Oe.left;else for(Oe=Me.parent;Oe&&Oe.right===Me;)Me=Oe,Oe=Oe.parent;return Oe},p.prototype.prev=function(Me){var Oe=Me;if(Oe)if(Oe.left)for(Oe=Oe.left;Oe&&Oe.right;)Oe=Oe.right;else for(Oe=Me.parent;Oe&&Oe.left===Me;)Me=Oe,Oe=Oe.parent;return Oe},p.prototype.forEach=function(Me){for(var Oe=this._root,St=[],Jt=!1,an=0;!Jt;)Oe?(St.push(Oe),Oe=Oe.left):St.length>0?(Me(Oe=St.pop(),an++),Oe=Oe.right):Jt=!0;return this},p.prototype.range=function(Me,Oe,St,Jt){for(var an=[],sn=this._compare,Tn=this._root;an.length!==0||Tn;)if(Tn)an.push(Tn),Tn=Tn.left;else{if(sn((Tn=an.pop()).key,Oe)>0)break;if(sn(Tn.key,Me)>=0&&St.call(Jt,Tn))return this;Tn=Tn.right}return this},p.prototype.keys=function(){for(var Me=this._root,Oe=[],St=[],Jt=!1;!Jt;)Me?(Oe.push(Me),Me=Me.left):Oe.length>0?(Me=Oe.pop(),St.push(Me.key),Me=Me.right):Jt=!0;return St},p.prototype.values=function(){for(var Me=this._root,Oe=[],St=[],Jt=!1;!Jt;)Me?(Oe.push(Me),Me=Me.left):Oe.length>0?(Me=Oe.pop(),St.push(Me.data),Me=Me.right):Jt=!0;return St},p.prototype.at=function(Me){for(var Oe=this._root,St=[],Jt=!1,an=0;!Jt;)if(Oe)St.push(Oe),Oe=Oe.left;else if(St.length>0){if(Oe=St.pop(),an===Me)return Oe;an++,Oe=Oe.right}else Jt=!0;return null},p.prototype.load=function(Me,Oe,St){if(Me===void 0&&(Me=[]),Oe===void 0&&(Oe=[]),St===void 0&&(St=!1),this._size!==0)throw new Error("bulk-load: tree is not empty");var Jt=Me.length;return St&&E(Me,Oe,0,Jt-1,this._compare),this._root=x(null,Me,Oe,0,Jt),this._size=Jt,this},p.prototype.min=function(){var Me=this.minNode(this._root);return Me?Me.key:null},p.prototype.max=function(){var Me=this.maxNode(this._root);return Me?Me.key:null},p.prototype.isEmpty=function(){return this._root===null},v.size.get=function(){return this._size},p.createTree=function(Me,Oe,St,Jt,an){return new p(St,an).load(Me,Oe,Jt)},Object.defineProperties(p.prototype,v);var M=0,P=1,k=2,B=3,j=0,X=1,Z=2,oe=3;function de(Me,Oe,St){Oe===null?(Me.inOut=!1,Me.otherInOut=!0):(Me.isSubject===Oe.isSubject?(Me.inOut=!Oe.inOut,Me.otherInOut=Oe.otherInOut):(Me.inOut=!Oe.otherInOut,Me.otherInOut=Oe.isVertical()?!Oe.inOut:Oe.inOut),Oe&&(Me.prevInResult=!me(Oe,St)||Oe.isVertical()?Oe.prevInResult:Oe));var Jt=me(Me,St);Me.resultTransition=Jt?function(an,sn){var Tn,Zn=!an.inOut,ki=!an.otherInOut;switch(sn){case j:Tn=Zn&&ki;break;case X:Tn=Zn||ki;break;case oe:Tn=Zn^ki;break;case Z:Tn=an.isSubject?Zn&&!ki:ki&&!Zn}return Tn?1:-1}(Me,St):0}function me(Me,Oe){switch(Me.type){case M:switch(Oe){case j:return!Me.otherInOut;case X:return Me.otherInOut;case Z:return Me.isSubject&&Me.otherInOut||!Me.isSubject&&!Me.otherInOut;case oe:return!0}break;case k:return Oe===j||Oe===X;case B:return Oe===Z;case P:return!1}return!1}var Se=function(Me,Oe,St,Jt,an){this.left=Oe,this.point=Me,this.otherEvent=St,this.isSubject=Jt,this.type=an||M,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},be={inResult:{configurable:!0}};function ae(Me,Oe){return Me[0]===Oe[0]&&Me[1]===Oe[1]}Se.prototype.isBelow=function(Me){var Oe=this.point,St=this.otherEvent.point;return this.left?(Oe[0]-Me[0])*(St[1]-Me[1])-(St[0]-Me[0])*(Oe[1]-Me[1])>0:(St[0]-Me[0])*(Oe[1]-Me[1])-(Oe[0]-Me[0])*(St[1]-Me[1])>0},Se.prototype.isAbove=function(Me){return!this.isBelow(Me)},Se.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},be.inResult.get=function(){return this.resultTransition!==0},Se.prototype.clone=function(){var Me=new Se(this.point,this.left,this.otherEvent,this.isSubject,this.type);return Me.contourId=this.contourId,Me.resultTransition=this.resultTransition,Me.prevInResult=this.prevInResult,Me.isExteriorRing=this.isExteriorRing,Me.inOut=this.inOut,Me.otherInOut=this.otherInOut,Me},Object.defineProperties(Se.prototype,be);var _e=11102230246251565e-32,we=134217729,Ie=(3+8*_e)*_e;function Ge(Me,Oe,St,Jt,an){var sn,Tn,Zn,ki,zi=Oe[0],bi=Jt[0],Cr=0,$r=0;bi>zi==bi>-zi?(sn=zi,zi=Oe[++Cr]):(sn=bi,bi=Jt[++$r]);var Bi=0;if(Cr<Me&&$r<St)for(bi>zi==bi>-zi?(Zn=sn-((Tn=zi+sn)-zi),zi=Oe[++Cr]):(Zn=sn-((Tn=bi+sn)-bi),bi=Jt[++$r]),sn=Tn,Zn!==0&&(an[Bi++]=Zn);Cr<Me&&$r<St;)bi>zi==bi>-zi?(Zn=sn-((Tn=sn+zi)-(ki=Tn-sn))+(zi-ki),zi=Oe[++Cr]):(Zn=sn-((Tn=sn+bi)-(ki=Tn-sn))+(bi-ki),bi=Jt[++$r]),sn=Tn,Zn!==0&&(an[Bi++]=Zn);for(;Cr<Me;)Zn=sn-((Tn=sn+zi)-(ki=Tn-sn))+(zi-ki),zi=Oe[++Cr],sn=Tn,Zn!==0&&(an[Bi++]=Zn);for(;$r<St;)Zn=sn-((Tn=sn+bi)-(ki=Tn-sn))+(bi-ki),bi=Jt[++$r],sn=Tn,Zn!==0&&(an[Bi++]=Zn);return sn===0&&Bi!==0||(an[Bi++]=sn),Bi}function Ze(Me){return new Float64Array(Me)}var Ye=33306690738754716e-32,tt=22204460492503146e-32,vt=11093356479670487e-47,kt=Ze(4),It=Ze(8),Dt=Ze(12),$t=Ze(16),yt=Ze(4);function Pt(Me,Oe,St){var Jt=function(an,sn,Tn,Zn,ki,zi){var bi=(sn-zi)*(Tn-ki),Cr=(an-ki)*(Zn-zi),$r=bi-Cr;if(bi===0||Cr===0||bi>0!=Cr>0)return $r;var Bi=Math.abs(bi+Cr);return Math.abs($r)>=Ye*Bi?$r:-function(mo,Zr,Sr,wo,eo,Hr,Yr){var Ir,Ti,Pr,go,Wn,Xi,to,_o,so,Yo,zr,qo,Al,ra,Ns,Ml,Rf,Ko,us=mo-eo,oa=Sr-eo,ja=Zr-Hr,ba=wo-Hr;kt[0]=(Ns=(_o=us-(to=(Xi=we*us)-(Xi-us)))*(Yo=ba-(so=(Xi=we*ba)-(Xi-ba)))-((ra=us*ba)-to*so-_o*so-to*Yo))-((zr=Ns-(Rf=(_o=ja-(to=(Xi=we*ja)-(Xi-ja)))*(Yo=oa-(so=(Xi=we*oa)-(Xi-oa)))-((Ml=ja*oa)-to*so-_o*so-to*Yo)))+(Wn=Ns-zr))+(Wn-Rf),kt[1]=(Al=ra-((qo=ra+zr)-(Wn=qo-ra))+(zr-Wn))-((zr=Al-Ml)+(Wn=Al-zr))+(Wn-Ml),kt[2]=qo-((Ko=qo+zr)-(Wn=Ko-qo))+(zr-Wn),kt[3]=Ko;var Eg=function(lSe,vz){for(var xz=vz[0],mM=1;mM<4;mM++)xz+=vz[mM];return xz}(0,kt),kb=tt*Yr;if(Eg>=kb||-Eg>=kb||(Ir=mo-(us+(Wn=mo-us))+(Wn-eo),Pr=Sr-(oa+(Wn=Sr-oa))+(Wn-eo),Ti=Zr-(ja+(Wn=Zr-ja))+(Wn-Hr),go=wo-(ba+(Wn=wo-ba))+(Wn-Hr),Ir===0&&Ti===0&&Pr===0&&go===0)||(kb=vt*Yr+Ie*Math.abs(Eg),(Eg+=us*go+ba*Ir-(ja*Pr+oa*Ti))>=kb||-Eg>=kb))return Eg;yt[0]=(Ns=(_o=Ir-(to=(Xi=we*Ir)-(Xi-Ir)))*(Yo=ba-(so=(Xi=we*ba)-(Xi-ba)))-((ra=Ir*ba)-to*so-_o*so-to*Yo))-((zr=Ns-(Rf=(_o=Ti-(to=(Xi=we*Ti)-(Xi-Ti)))*(Yo=oa-(so=(Xi=we*oa)-(Xi-oa)))-((Ml=Ti*oa)-to*so-_o*so-to*Yo)))+(Wn=Ns-zr))+(Wn-Rf),yt[1]=(Al=ra-((qo=ra+zr)-(Wn=qo-ra))+(zr-Wn))-((zr=Al-Ml)+(Wn=Al-zr))+(Wn-Ml),yt[2]=qo-((Ko=qo+zr)-(Wn=Ko-qo))+(zr-Wn),yt[3]=Ko;var Eq=Ge(4,kt,4,yt,It);yt[0]=(Ns=(_o=us-(to=(Xi=we*us)-(Xi-us)))*(Yo=go-(so=(Xi=we*go)-(Xi-go)))-((ra=us*go)-to*so-_o*so-to*Yo))-((zr=Ns-(Rf=(_o=ja-(to=(Xi=we*ja)-(Xi-ja)))*(Yo=Pr-(so=(Xi=we*Pr)-(Xi-Pr)))-((Ml=ja*Pr)-to*so-_o*so-to*Yo)))+(Wn=Ns-zr))+(Wn-Rf),yt[1]=(Al=ra-((qo=ra+zr)-(Wn=qo-ra))+(zr-Wn))-((zr=Al-Ml)+(Wn=Al-zr))+(Wn-Ml),yt[2]=qo-((Ko=qo+zr)-(Wn=Ko-qo))+(zr-Wn),yt[3]=Ko;var Cq=Ge(Eq,It,4,yt,Dt);yt[0]=(Ns=(_o=Ir-(to=(Xi=we*Ir)-(Xi-Ir)))*(Yo=go-(so=(Xi=we*go)-(Xi-go)))-((ra=Ir*go)-to*so-_o*so-to*Yo))-((zr=Ns-(Rf=(_o=Ti-(to=(Xi=we*Ti)-(Xi-Ti)))*(Yo=Pr-(so=(Xi=we*Pr)-(Xi-Pr)))-((Ml=Ti*Pr)-to*so-_o*so-to*Yo)))+(Wn=Ns-zr))+(Wn-Rf),yt[1]=(Al=ra-((qo=ra+zr)-(Wn=qo-ra))+(zr-Wn))-((zr=Al-Ml)+(Wn=Al-zr))+(Wn-Ml),yt[2]=qo-((Ko=qo+zr)-(Wn=Ko-qo))+(zr-Wn),yt[3]=Ko;var Aq=Ge(Cq,Dt,4,yt,$t);return $t[Aq-1]}(an,sn,Tn,Zn,ki,zi,Bi)}(Me[0],Me[1],Oe[0],Oe[1],St[0],St[1]);return Jt>0?-1:Jt<0?1:0}function gt(Me,Oe){var St=Me.point,Jt=Oe.point;return St[0]>Jt[0]?1:St[0]<Jt[0]?-1:St[1]!==Jt[1]?St[1]>Jt[1]?1:-1:function(an,sn,Tn,Zn){return an.left!==sn.left?an.left?1:-1:Pt(Tn,an.otherEvent.point,sn.otherEvent.point)!==0?an.isBelow(sn.otherEvent.point)?-1:1:!an.isSubject&&sn.isSubject?1:-1}(Me,Oe,St)}function _t(Me,Oe,St){var Jt=new Se(Oe,!1,Me,Me.isSubject),an=new Se(Oe,!0,Me.otherEvent,Me.isSubject);return ae(Me.point,Me.otherEvent.point)&&console.warn("what is that, a collapsed segment?",Me),Jt.contourId=an.contourId=Me.contourId,gt(an,Me.otherEvent)>0&&(Me.otherEvent.left=!0,an.left=!1),Me.otherEvent.otherEvent=an,Me.otherEvent=Jt,St.push(an),St.push(Jt),St}function Gt(Me,Oe){return Me[0]*Oe[1]-Me[1]*Oe[0]}function Xt(Me,Oe){return Me[0]*Oe[0]+Me[1]*Oe[1]}function En(Me,Oe,St){var Jt=function(ki,zi,bi,Cr,$r){var Bi=[zi[0]-ki[0],zi[1]-ki[1]],mo=[Cr[0]-bi[0],Cr[1]-bi[1]];function Zr(Xi,to,_o){return[Xi[0]+to*_o[0],Xi[1]+to*_o[1]]}var Sr=[bi[0]-ki[0],bi[1]-ki[1]],wo=Gt(Bi,mo),eo=wo*wo,Hr=Xt(Bi,Bi);if(eo>0){var Yr=Gt(Sr,mo)/wo;if(Yr<0||Yr>1)return null;var Ir=Gt(Sr,Bi)/wo;return Ir<0||Ir>1?null:Yr===0||Yr===1?[Zr(ki,Yr,Bi)]:Ir===0||Ir===1?[Zr(bi,Ir,mo)]:[Zr(ki,Yr,Bi)]}if((eo=(wo=Gt(Sr,Bi))*wo)>0)return null;var Ti=Xt(Bi,Sr)/Hr,Pr=Ti+Xt(Bi,mo)/Hr,go=Math.min(Ti,Pr),Wn=Math.max(Ti,Pr);return go<=1&&Wn>=0?go===1?[Zr(ki,go>0?go:0,Bi)]:Wn===0?[Zr(ki,Wn<1?Wn:1,Bi)]:[Zr(ki,go>0?go:0,Bi),Zr(ki,Wn<1?Wn:1,Bi)]:null}(Me.point,Me.otherEvent.point,Oe.point,Oe.otherEvent.point),an=Jt?Jt.length:0;if(an===0||an===1&&(ae(Me.point,Oe.point)||ae(Me.otherEvent.point,Oe.otherEvent.point))||an===2&&Me.isSubject===Oe.isSubject)return 0;if(an===1)return ae(Me.point,Jt[0])||ae(Me.otherEvent.point,Jt[0])||_t(Me,Jt[0],St),ae(Oe.point,Jt[0])||ae(Oe.otherEvent.point,Jt[0])||_t(Oe,Jt[0],St),1;var sn=[],Tn=!1,Zn=!1;return ae(Me.point,Oe.point)?Tn=!0:gt(Me,Oe)===1?sn.push(Oe,Me):sn.push(Me,Oe),ae(Me.otherEvent.point,Oe.otherEvent.point)?Zn=!0:gt(Me.otherEvent,Oe.otherEvent)===1?sn.push(Oe.otherEvent,Me.otherEvent):sn.push(Me.otherEvent,Oe.otherEvent),Tn&&Zn||Tn?(Oe.type=P,Me.type=Oe.inOut===Me.inOut?k:B,Tn&&!Zn&&_t(sn[1].otherEvent,sn[0].point,St),2):Zn?(_t(sn[0],sn[1].point,St),3):sn[0]!==sn[3].otherEvent?(_t(sn[0],sn[1].point,St),_t(sn[1],sn[2].point,St),3):(_t(sn[0],sn[1].point,St),_t(sn[3].otherEvent,sn[2].point,St),3)}function gn(Me,Oe){if(Me===Oe)return 0;if(Pt(Me.point,Me.otherEvent.point,Oe.point)!==0||Pt(Me.point,Me.otherEvent.point,Oe.otherEvent.point)!==0)return ae(Me.point,Oe.point)?Me.isBelow(Oe.otherEvent.point)?-1:1:Me.point[0]===Oe.point[0]?Me.point[1]<Oe.point[1]?-1:1:gt(Me,Oe)===1?Oe.isAbove(Me.point)?-1:1:Me.isBelow(Oe.point)?-1:1;if(Me.isSubject!==Oe.isSubject)return Me.isSubject?-1:1;var St=Me.point,Jt=Oe.point;return St[0]===Jt[0]&&St[1]===Jt[1]?(St=Me.otherEvent.point)[0]===(Jt=Oe.otherEvent.point)[0]&&St[1]===Jt[1]?0:Me.contourId>Oe.contourId?1:-1:gt(Me,Oe)===1?1:-1}var rn=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function Ht(Me,Oe,St,Jt){var an,sn=Me+1,Tn=Oe[Me].point,Zn=Oe.length;for(sn<Zn&&(an=Oe[sn].point);sn<Zn&&an[0]===Tn[0]&&an[1]===Tn[1];){if(!St[sn])return sn;++sn<Zn&&(an=Oe[sn].point)}for(sn=Me-1;St[sn]&&sn>Jt;)sn--;return sn}rn.prototype.isExterior=function(){return this.holeOf==null};var ri=bn,xn=bn;function bn(Me,Oe){if(!(this instanceof bn))return new bn(Me,Oe);if(this.data=Me||[],this.length=this.data.length,this.compare=Oe||Qn,this.length>0)for(var St=(this.length>>1)-1;St>=0;St--)this._down(St)}function Qn(Me,Oe){return Me<Oe?-1:Me>Oe?1:0}bn.prototype={push:function(Me){this.data.push(Me),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var Me=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),Me}},peek:function(){return this.data[0]},_up:function(Me){for(var Oe=this.data,St=this.compare,Jt=Oe[Me];Me>0;){var an=Me-1>>1,sn=Oe[an];if(St(Jt,sn)>=0)break;Oe[Me]=sn,Me=an}Oe[Me]=Jt},_down:function(Me){for(var Oe=this.data,St=this.compare,Jt=this.length>>1,an=Oe[Me];Me<Jt;){var sn=1+(Me<<1),Tn=sn+1,Zn=Oe[sn];if(Tn<this.length&&St(Oe[Tn],Zn)<0&&(sn=Tn,Zn=Oe[Tn]),St(Zn,an)>=0)break;Oe[Me]=Zn,Me=sn}Oe[Me]=an}},ri.default=xn;var gi=Math.max,_i=Math.min,Ei=0;function Si(Me,Oe,St,Jt,an,sn){var Tn,Zn,ki,zi,bi,Cr;for(Tn=0,Zn=Me.length-1;Tn<Zn;Tn++)if(zi=Me[Tn+1],bi=new Se(ki=Me[Tn],!1,void 0,Oe),Cr=new Se(zi,!1,bi,Oe),bi.otherEvent=Cr,ki[0]!==zi[0]||ki[1]!==zi[1]){bi.contourId=Cr.contourId=St,sn||(bi.isExteriorRing=!1,Cr.isExteriorRing=!1),gt(bi,Cr)>0?Cr.left=!0:bi.left=!0;var $r=ki[0],Bi=ki[1];an[0]=_i(an[0],$r),an[1]=_i(an[1],Bi),an[2]=gi(an[2],$r),an[3]=gi(an[3],Bi),Jt.push(bi),Jt.push(Cr)}}var xi=[];function kr(Me,Oe,St){typeof Me[0][0][0]=="number"&&(Me=[Me]),typeof Oe[0][0][0]=="number"&&(Oe=[Oe]);var Jt=function(Bi,mo,Zr){var Sr=null;return Bi.length*mo.length==0&&(Zr===j?Sr=xi:Zr===Z?Sr=Bi:Zr!==X&&Zr!==oe||(Sr=Bi.length===0?mo:Bi)),Sr}(Me,Oe,St);if(Jt)return Jt===xi?null:Jt;var an=[1/0,1/0,-1/0,-1/0],sn=[1/0,1/0,-1/0,-1/0],Tn=function(Bi,mo,Zr,Sr,wo){var eo,Hr,Yr,Ir,Ti,Pr,go=new ri(null,gt);for(Yr=0,Ir=Bi.length;Yr<Ir;Yr++)for(Ti=0,Pr=(eo=Bi[Yr]).length;Ti<Pr;Ti++)(Hr=Ti===0)&&Ei++,Si(eo[Ti],!0,Ei,go,Zr,Hr);for(Yr=0,Ir=mo.length;Yr<Ir;Yr++)for(Ti=0,Pr=(eo=mo[Yr]).length;Ti<Pr;Ti++)Hr=Ti===0,wo===Z&&(Hr=!1),Hr&&Ei++,Si(eo[Ti],!1,Ei,go,Sr,Hr);return go}(Me,Oe,an,sn,St);if(Jt=function(Bi,mo,Zr,Sr,wo){var eo=null;return(Zr[0]>Sr[2]||Sr[0]>Zr[2]||Zr[1]>Sr[3]||Sr[1]>Zr[3])&&(wo===j?eo=xi:wo===Z?eo=Bi:wo!==X&&wo!==oe||(eo=Bi.concat(mo))),eo}(Me,Oe,an,sn,St))return Jt===xi?null:Jt;for(var Zn=function(Bi){var mo,Zr,Sr=function(Yr){var Ir,Ti,Pr,go,Wn=[];for(Ti=0,Pr=Yr.length;Ti<Pr;Ti++)((Ir=Yr[Ti]).left&&Ir.inResult||!Ir.left&&Ir.otherEvent.inResult)&&Wn.push(Ir);for(var Xi=!1;!Xi;)for(Xi=!0,Ti=0,Pr=Wn.length;Ti<Pr;Ti++)Ti+1<Pr&&gt(Wn[Ti],Wn[Ti+1])===1&&(go=Wn[Ti],Wn[Ti]=Wn[Ti+1],Wn[Ti+1]=go,Xi=!1);for(Ti=0,Pr=Wn.length;Ti<Pr;Ti++)(Ir=Wn[Ti]).otherPos=Ti;for(Ti=0,Pr=Wn.length;Ti<Pr;Ti++)(Ir=Wn[Ti]).left||(go=Ir.otherPos,Ir.otherPos=Ir.otherEvent.otherPos,Ir.otherEvent.otherPos=go);return Wn}(Bi),wo={},eo=[],Hr=function(){if(!wo[mo]){var Yr=eo.length,Ir=function(Wn,Xi,to){var _o=new rn;if(Wn.prevInResult!=null){var so=Wn.prevInResult,Yo=so.outputContourId;if(so.resultTransition>0){var zr=Xi[Yo];if(zr.holeOf!=null){var qo=zr.holeOf;Xi[qo].holeIds.push(to),_o.holeOf=qo,_o.depth=Xi[Yo].depth}else Xi[Yo].holeIds.push(to),_o.holeOf=Yo,_o.depth=Xi[Yo].depth+1}else _o.holeOf=null,_o.depth=Xi[Yo].depth}else _o.holeOf=null,_o.depth=0;return _o}(Sr[mo],eo,Yr),Ti=function(Wn){wo[Wn]=!0,Wn<Sr.length&&Sr[Wn]&&(Sr[Wn].outputContourId=Yr)},Pr=mo,go=mo;for(Ir.points.push(Sr[mo].point);Ti(Pr),Ti(Pr=Sr[Pr].otherPos),Ir.points.push(Sr[Pr].point),!((Pr=Ht(Pr,Sr,wo,go))==go||Pr>=Sr.length)&&Sr[Pr];);eo.push(Ir)}};for(mo=0,Zr=Sr.length;mo<Zr;mo++)Hr();return eo}(function(Bi,mo,Zr,Sr,wo,eo){for(var Hr,Yr,Ir,Ti=new p(gn),Pr=[],go=Math.min(Sr[2],wo[2]);Bi.length!==0;){var Wn=Bi.pop();if(Pr.push(Wn),eo===j&&Wn.point[0]>go||eo===Z&&Wn.point[0]>Sr[2])break;if(Wn.left){Yr=Hr=Ti.insert(Wn),Hr=Hr!==(Ir=Ti.minNode())?Ti.prev(Hr):null,Yr=Ti.next(Yr);var Xi=Hr?Hr.key:null;if(de(Wn,Xi,eo),Yr&&En(Wn,Yr.key,Bi)===2&&(de(Wn,Xi,eo),de(Yr.key,Wn,eo)),Hr&&En(Hr.key,Wn,Bi)===2){var to=Hr;de(Xi,(to=to!==Ir?Ti.prev(to):null)?to.key:null,eo),de(Wn,Xi,eo)}}else Yr=Hr=Ti.find(Wn=Wn.otherEvent),Hr&&Yr&&(Hr=Hr!==Ir?Ti.prev(Hr):null,Yr=Ti.next(Yr),Ti.remove(Wn),Yr&&Hr&&En(Hr.key,Yr.key,Bi))}return Pr}(Tn,0,0,an,sn,St)),ki=[],zi=0;zi<Zn.length;zi++){var bi=Zn[zi];if(bi.isExterior()){for(var Cr=[bi.points],$r=0;$r<bi.holeIds.length;$r++)Cr.push(Zn[bi.holeIds[$r]].points);ki.push(Cr)}}return ki}var Xr={UNION:X,DIFFERENCE:Z,INTERSECTION:j,XOR:oe};s.diff=function(Me,Oe){return kr(Me,Oe,Z)},s.intersection=function(Me,Oe){return kr(Me,Oe,j)},s.operations=Xr,s.union=function(Me,Oe){return kr(Me,Oe,X)},s.xor=function(Me,Oe){return kr(Me,Oe,oe)},Object.defineProperty(s,"__esModule",{value:!0})})(i)}(0,Kx.exports)),Kx.exports);/**
 * martinez v0.7.4
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */function Yv(l,i,s,h){const p=[],v=h===0?(x,E,M,P,k,B)=>{x.push(new Zt(B,M+(B-E)/(P-E)*(k-M)))}:(x,E,M,P,k,B)=>{x.push(new Zt(E+(B-M)/(k-M)*(P-E),B))};for(const x of l){const E=[];for(const M of x){if(M.length<=2)continue;const P=[];for(let j=0;j<M.length-1;j++){const X=M[j].x,Z=M[j].y,oe=M[j+1].x,de=M[j+1].y,me=h===0?X:Z,Se=h===0?oe:de;me<i?Se>i&&v(P,X,Z,oe,de,i):me>s?Se<s&&v(P,X,Z,oe,de,s):P.push(M[j]),Se<i&&me>=i&&v(P,X,Z,oe,de,i),Se>s&&me<=s&&v(P,X,Z,oe,de,s)}let k=M[M.length-1];const B=h===0?k.x:k.y;B>=i&&B<=s&&P.push(k),P.length&&(k=P[P.length-1],P[0].x===k.x&&P[0].y===k.y||P.push(P[0]),E.push(P))}E.length&&p.push(E)}return p}function xA(l,i){const s=Jx(l),h=Jx([i]),p=eS.intersection(s,h);return p==null?[]:tS(p)}function bA(l,i){let h=Jx(l,65536);for(;i.valid();i.next()){const[p,v]=i.get(),x=p.x*65536,E=p.y*65536,M=v.x*65536,P=v.y*65536,k=M-x,B=P-E,j=Math.hypot(k,B),X=Math.trunc(B/j*3),Z=-Math.trunc(k/j*3);h=eS.diff(h,[[[x,E],[M,P],[M+X,P+Z],[x+X,E+Z],[x,E]]])}return tS(h,1/65536)}function Jx(l,i=1){return[l.map(s=>s.map(h=>[h.x*i,h.y*i]))]}function tS(l,i=1){return l.map(s=>s.map((h,p)=>{const v=h.map(x=>new Zt(x[0]*i,x[1]*i).round());return p>0&&v.reverse(),v}))}class Qx{constructor(i,s){this.layoutVertexArray=new Jl,this.indexArray=new xo,this.lineIndexArray=new tu,this.triangleSegments=new oo,this.lineSegments=new oo,this.programConfigurations=new nh(i.layers,{zoom:i.zoom,lut:i.lut}),this.uploaded=!1,s&&(this.elevatedLayoutVertexArray=new ld)}update(i,s,h,p,v,x,E){this.programConfigurations.updatePaintArrays(i,s,v,h,p,x,E)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gA.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.lineIndexBuffer=i.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=i.createVertexBuffer(this.elevatedLayoutVertexArray,Vx.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(i,s,h,p,v,x){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,h,p,v,x)}}class Kv{constructor(i){this.zoom=i.zoom,this.pixelRatio=i.pixelRatio,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new Qx(i,!1),this.elevationBufferData=new Qx(i,!0),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=i.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(i,s){}populate(i,s,h,p){this.hasPattern=fg("fill",this.layers,this.pixelRatio,s);const v=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:E,id:M,index:P,sourceLayerIndex:k}of i){const B=this.layers[0]._featureFilter.needGeometry,j=_n(E,B);if(!this.layers[0]._featureFilter.filter(new xr(this.zoom),j,h))continue;const X=v?v.evaluate(j,{},h,s.availableImages):void 0,Z={id:M,properties:E.properties,type:E.type,sourceLayerIndex:k,index:P,geometry:B?j.geometry:pn(E,h,p),patterns:{},sortKey:X};x.push(Z)}v&&x.sort((E,M)=>E.sortKey-M.sortKey);for(const E of x){const{geometry:M,index:P,sourceLayerIndex:k}=E;if(this.hasPattern){const B=Gv("fill",this.layers,E,this.zoom,this.pixelRatio,s);this.patternFeatures.push(B)}else this.addFeature(E,M,P,h,{},s.availableImages,s.brightness,s.elevationFeatures);s.featureIndex.insert(i[P].feature,M,P,k,this.index)}}update(i,s,h,p,v,x,E){this.bufferData.update(i,s,h,p,v,x,E),this.elevationBufferData.update(i,s,h,p,v,x,E)}addFeatures(i,s,h,p,v,x){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,s,h,p,x,i.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(i){this.bufferData.upload(i),this.elevationBufferData.upload(i),this.elevatedStructures&&this.elevatedStructures.upload(i)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(i,s,h,p,v,x=[],E,M){const P=$v(s,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(i,P,p,h,M):this.addGeometry(P,this.bufferData),this.bufferData.populatePaintArrays(i,h,v,x,p,E),this.elevationBufferData.populatePaintArrays(i,h,v,x,p,E)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(i){this.elevatedStructures&&this.elevatedStructures.construct(i)}addElevatedRoadFeature(i,s,h,p,v){const x=new Array,E=Tl.getElevationFeature(i,v);if(E){{const M=this.clipPolygonsToTile(s,1);M.length>0&&x.push({polygons:M,elevationFeature:E,elevationTileID:h})}for(const M of x)if(M.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new El(M.elevationTileID));const k=M.elevationFeature.isTunnel();let B=0;i.properties.hasOwnProperty(Jw)&&(B=+i.properties[Jw]);for(const j of M.polygons)this.elevatedStructures.addPortalCandidates(M.elevationFeature.id,j,k,M.elevationFeature,B)}M.elevationFeature.constantHeight==null&&(M.polygons=this.prepareElevatedPolygons(M.polygons,M.elevationFeature,M.elevationTileID));const P=new Yx(h,M.elevationTileID);this.addElevatedGeometry(M.polygons,P,M.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,p)}}else this.addGeometry(s,this.bufferData)}addElevatedGeometry(i,s,h,p,v){const x={elevation:h,elevationSampler:s,bias:p,index:v},[E,M]=this.addGeometry(i,this.elevationBufferData,x);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:E,max:M}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,E),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,M))}addGeometry(i,s,h){let p=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,x=null;h&&(x=h.elevationSampler.constantElevation(h.elevation,h.bias),x!=null&&(p=x,v=x));const E=(M,P,k)=>{if(h!=null)if(P.push(M),x!=null)s.elevatedLayoutVertexArray.emplaceBack(x),k.push(x);else{const B=h.elevationSampler.pointElevation(M,h.elevation,h.bias);s.elevatedLayoutVertexArray.emplaceBack(B),k.push(B),p=Math.min(p,B),v=Math.max(v,B)}};for(const M of i){let P=0;for(const be of M)P+=be.length;const k=s.triangleSegments.prepareSegment(P,s.layoutVertexArray,s.indexArray),B=k.vertexLength,j=[],X=[],Z=[],oe=[],de=[],me=s.layoutVertexArray.length;for(const be of M){if(be.length===0)continue;be!==M[0]&&X.push(j.length/2);const ae=s.lineSegments.prepareSegment(be.length,s.layoutVertexArray,s.lineIndexArray),_e=ae.vertexLength;h&&de.push(s.layoutVertexArray.length-me),E(be[0],Z,oe),s.layoutVertexArray.emplaceBack(be[0].x,be[0].y),s.lineIndexArray.emplaceBack(_e+be.length-1,_e),j.push(be[0].x),j.push(be[0].y);for(let we=1;we<be.length;we++)E(be[we],Z,oe),s.layoutVertexArray.emplaceBack(be[we].x,be[we].y),s.lineIndexArray.emplaceBack(_e+we-1,_e+we),j.push(be[we].x),j.push(be[we].y);ae.vertexLength+=be.length,ae.primitiveLength+=be.length}const Se=Ky(j,X);for(let be=0;be<Se.length;be+=3)s.indexArray.emplaceBack(B+Se[be],B+Se[be+1],B+Se[be+2]);if(Se.length>0&&h&&this.elevationMode==="hd-road-base"){const be=h.elevation.isTunnel(),ae=h.elevation.safeArea,_e=this.elevatedStructures.addVertices(Z,oe);this.elevatedStructures.addTriangles(Se,_e,be);const we=de.length;if(we>0){for(let Ie=0;Ie<we-1;Ie++)this.elevatedStructures.addRenderableRing(h.index,de[Ie]+_e,de[Ie+1]-de[Ie],be,ae);this.elevatedStructures.addRenderableRing(h.index,de[we-1]+_e,Z.length-de[we-1],be,ae)}}k.vertexLength+=P,k.primitiveLength+=Se.length/3}return[p,v]}prepareElevatedPolygons(i,s,h){const p=1/nt(h),v=[];for(const x of i){const E=bA(x,new Zx(s,p));v.push(...E)}return v}clipPolygonsToTile(i,s){const h=-s,p=-s,v=Qt+s,x=Qt+s;let E=0;const M=[],P=[];for(;E<i.length;E++){const j=i[E],X=Nm(j);(X.min.x>=h&&X.max.x<=v&&X.min.y>=p&&X.max.y<=x?M:P).push(j)}if(M.length===i.length)return i;const k=[new Zt(h,p),new Zt(v,p),new Zt(v,x),new Zt(h,x),new Zt(h,p)],B=M;for(const j of P)B.push(...xA(j,k));return B}}let om,pg,eb,nS;hn(Kv,"FillBucket",{omit:["layers","patternFeatures"]}),hn(Qx,"FillBufferData"),hn(El,"ElevatedStructures");class Cf{constructor(i,s,h,p){if(this.triangleCount=s.length/3,this.min=new Zt(0,0),this.max=new Zt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||i.length===0)return;const[v,x]=[i[0].clone(),i[0].clone()];for(let B=1;B<i.length;++B){const j=i[B];v.x=Math.min(v.x,j.x),v.y=Math.min(v.y,j.y),x.x=Math.max(x.x,j.x),x.y=Math.max(x.y,j.y)}if(p){const B=Math.ceil(Math.max(x.x-v.x,x.y-v.y)/p);h=Math.max(h,B)}if(h===0)return;this.min=v,this.max=x;const E=this.max.sub(this.min);E.x=Math.max(E.x,1),E.y=Math.max(E.y,1);const M=Math.max(E.x,E.y)/h;this.cellsX=Math.max(1,Math.ceil(E.x/M)),this.cellsY=Math.max(1,Math.ceil(E.y/M)),this.xScale=1/M,this.yScale=1/M;const P=[];for(let B=0;B<this.triangleCount;B++){const j=i[s[3*B+0]].sub(this.min),X=i[s[3*B+1]].sub(this.min),Z=i[s[3*B+2]].sub(this.min),oe=Cl(Math.floor(Math.min(j.x,X.x,Z.x)),this.xScale,this.cellsX),de=Cl(Math.floor(Math.max(j.x,X.x,Z.x)),this.xScale,this.cellsX),me=Cl(Math.floor(Math.min(j.y,X.y,Z.y)),this.yScale,this.cellsY),Se=Cl(Math.floor(Math.max(j.y,X.y,Z.y)),this.yScale,this.cellsY),be=new Zt(0,0),ae=new Zt(0,0),_e=new Zt(0,0),we=new Zt(0,0);for(let Ie=me;Ie<=Se;++Ie){be.y=ae.y=Ie*M,_e.y=we.y=(Ie+1)*M;for(let Ge=oe;Ge<=de;++Ge)be.x=_e.x=Ge*M,ae.x=we.x=(Ge+1)*M,(jr(j,X,Z,be,ae,we)||jr(j,X,Z,be,we,_e))&&P.push({cellIdx:Ie*this.cellsX+Ge,triIdx:B})}}if(P.length===0)return;P.sort((B,j)=>B.cellIdx-j.cellIdx||B.triIdx-j.triIdx);let k=0;for(;k<P.length;){const B=P[k].cellIdx,j={start:this.payload.length,len:0};for(;k<P.length&&P[k].cellIdx===B;)++j.len,this.payload.push(P[k++].triIdx);this.cells[B]=j}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(i,s){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>i.x||i.y>this.max.y||this.min.y>i.y)return;const h=Cl(i.x-this.min.x,this.xScale,this.cellsX),p=Cl(i.y-this.min.y,this.yScale,this.cellsY),v=this.cells[p*this.cellsX+h];if(v){this._lazyInitLookup();for(let x=0;x<v.len;x++){const E=this.payload[v.start+x],M=Math.floor(E/8),P=1<<E%8;if(!(this.lookup[M]&P)&&(this.lookup[M]|=P,s.push(E),s.length===this.triangleCount))return}}}query(i,s,h){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>s.x||i.y>this.max.y||this.min.y>s.y)return;this._lazyInitLookup();const p=Cl(i.x-this.min.x,this.xScale,this.cellsX),v=Cl(s.x-this.min.x,this.xScale,this.cellsX),x=Cl(i.y-this.min.y,this.yScale,this.cellsY),E=Cl(s.y-this.min.y,this.yScale,this.cellsY);for(let M=x;M<=E;M++)for(let P=p;P<=v;P++){const k=this.cells[M*this.cellsX+P];if(k)for(let B=0;B<k.len;B++){const j=this.payload[k.start+B],X=Math.floor(j/8),Z=1<<j%8;if(!(this.lookup[X]&Z)&&(this.lookup[X]|=Z,h.push(j),h.length===this.triangleCount))return}}}}function Cl(l,i,s){return Math.max(0,Math.min(s-1,Math.floor(l*i)))}hn(Cf,"TriangleGridIndex");class tb{constructor(i){this.zoom=i.zoom,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=i.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.footprints=[]}updateFootprints(i,s){for(const h of this.footprints)s.push({footprint:h,id:i})}populate(i,s,h,p){const v=[];for(const{feature:x,id:E,index:M,sourceLayerIndex:P}of i){const k=this.layers[0]._featureFilter.needGeometry,B=_n(x,k);if(!this.layers[0]._featureFilter.filter(new xr(this.zoom),B,h))continue;const j={id:E,properties:x.properties,type:x.type,sourceLayerIndex:P,index:M,geometry:k?B.geometry:pn(x,h,p),patterns:{}};v.push(j)}for(const x of v){const{geometry:E,index:M,sourceLayerIndex:P}=x;this.addFeature(x,E,M,h,{},s.availableImages,s.brightness),s.featureIndex.insert(i[M].feature,E,M,P,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(i){}update(i,s,h,p,v,x,E){}destroy(){}addFeature(i,s,h,p,v,x=[],E){for(const M of $v(s,2)){const P=[],k=[],B=[],j=new Zt(1/0,1/0),X=new Zt(-1/0,-1/0);for(const de of M)if(de.length!==0){de!==M[0]&&B.push(k.length/2);for(let me=0;me<de.length;me++)k.push(de[me].x),k.push(de[me].y),P.push(de[me]),j.x=Math.min(j.x,de[me].x),j.y=Math.min(j.y,de[me].y),X.x=Math.max(X.x,de[me].x),X.y=Math.max(X.y,de[me].y)}const Z=Ky(k,B),oe=new Cf(P,Z,8,256);this.footprints.push({vertices:P,indices:Z,grid:oe,min:j,max:X})}}}hn(tb,"ClipBucket",{omit:["layers"]});const Jv=qi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),nb=qi([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),ib=qi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Qv=qi([{name:"a_join_normal_inside",components:3,type:"Int16"}]),iS=qi([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),rS=qi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:wA}=Jv,o_=Number.MAX_SAFE_INTEGER;function mg(l,i,s,h){return l.order<i||l.order===o_||!(l.clipMask&s)||function(p,v){return v.length!==0&&v.find(x=>x===p)===void 0}(h,l.clipScope)}function e0(l,i){return l.x-i.x||l.y-i.y}function oS(l,i){return e0(l.min,i.min)===0&&e0(l.max,i.max)===0}function rb(l,i){return!(l.min.x>i.max.x||l.max.x<i.min.x||l.min.y>i.max.y||l.max.y<i.min.y)}function gg(l,i){if(l.length!==i.length)return!1;for(let s=0;s<l.length;s++)if(l[s].sourceId!==i[s].sourceId||!oS(l[s],i[s])||l[s].order!==i[s].order||l[s].clipMask!==i[s].clipMask||!Os(l[s].clipScope,i[s].clipScope))return!1;return!0}function s_(l,i,s){const h=1/Qt,p=1/(1<<s.canonical.z),v=(i.x*h+s.canonical.x)*p+s.wrap,x=(i.y*h+s.canonical.y)*p;return{min:new Zt((l.x*h+s.canonical.x)*p+s.wrap,(l.y*h+s.canonical.y)*p),max:new Zt(v,x)}}function ob(l,i,s){const h=1<<s.canonical.z,p=((i.x-s.wrap)*h-s.canonical.x)*Qt,v=(i.y*h-s.canonical.y)*Qt;return{min:new Zt(((l.x-s.wrap)*h-s.canonical.x)*Qt,(l.y*h-s.canonical.y)*Qt),max:new Zt(p,v)}}function sS(l,i,s,h,p,v,x){const E=l.indices,M=l.vertices,P=[];for(let k=h;k<h+p;k+=3){const B=i[s[k+0]+v],j=i[s[k+1]+v],X=i[s[k+2]+v],Z=Math.min(B.x,j.x,X.x),oe=Math.max(B.x,j.x,X.x),de=Math.min(B.y,j.y,X.y),me=Math.max(B.y,j.y,X.y);P.length=0,l.grid.query(new Zt(Z,de),new Zt(oe,me),P);for(let Se=0;Se<P.length;Se++){const be=P[Se];if(jr(M[E[3*be+0]],M[E[3*be+1]],M[E[3*be+2]],B,j,X,x))return!0}}return!1}function yg(l,i,s,h){if(!l||!s)return!1;let p=l.vertices;if(!i.canonical.equals(h.canonical)||i.wrap!==h.wrap){if(s.vertices.length<l.vertices.length)return yg(s,h,l,i);const v=i.canonical,x=h.canonical,E=Math.pow(2,x.z-v.z);p=l.vertices.map(M=>new Zt((M.x+v.x*Qt)*E-x.x*Qt,(M.y+v.y*Qt)*E-x.y*Qt))}return sS(s,p,l.indices,0,l.indices.length,0,0)}function aS(l,i,s,h){const p=Math.pow(2,h.z-s.z);return new Zt((l+s.x*Qt)*p-h.x*Qt,(i+s.y*Qt)*p-h.y*Qt)}function sb(l,i){const s=[];i.grid.queryPoint(l,s);const h=i.indices,p=i.vertices;for(let v=0;v<s.length;v++){const x=s[v];if(Wi([p[h[3*x+0]],p[h[3*x+1]],p[h[3*x+2]]],l))return!0}return!1}const t0=[new Zt(0,0),new Zt(Qt,0),new Zt(Qt,Qt),new Zt(0,Qt)];function ab(l,i){const s=[];let h=[];if(!i||l.length<2)return[l];if(l.length===2)return Nr(l[0],l[1],t0)?[l]:[];for(let p=0;p<l.length+2;p++){const v=l[p%l.length],x=l[(p+1)%l.length],E=Nr(p===0?l[l.length-1]:l[(p-1)%l.length],v,t0),M=Nr(v,x,t0),P=E||M;P&&h.push(v),P&&M||h.length>0&&(h.length>1&&s.push(h),h=[])}return h.length>1&&s.push(h),s}const n0=rh.VectorTileFeature.types,lb=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],lS=["fill-extrusion-flood-light-ground-radius"],i0=Math.pow(2,13),SA=Math.pow(2,15)-1,cS=new Zt(0,1),oh=2147483648;function sm(l,i,s,h,p,v,x,E){l.emplaceBack((i<<1)+x,(s<<1)+v,(Math.floor(h*i0)<<1)+p,Math.round(E))}function Af(l,i,s){l.emplaceBack(i.x*Qt,i.y*Qt,s?1:0)}function _g(l,i,s,h,p,v){l.emplaceBack(i.x,i.y,(s.x<<1)+h,(s.y<<1)+p,v)}function vg(l,i,s){l.emplaceBack(i.x,i.y,i.z,s[0]*16384,s[1]*16384,s[2]*16384)}class r0{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class xd{constructor(){this.centroidXY=new Zt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Zt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Zt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Zt(this.max.x-this.min.x,this.max.y-this.min.y)}}class bd{constructor(){this.acc=new Zt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(i,s){i.min.x===Number.MAX_VALUE&&(i.min.x=i.max.x=s.x,i.min.y=i.max.y=s.y)}appendEdge(i,s,h){this.accCount++,this.acc._add(s);let p=!!this.borders;s.x<i.min.x?(i.min.x=s.x,p=!0):s.x>i.max.x&&(i.max.x=s.x,p=!0),s.y<i.min.y?(i.min.y=s.y,p=!0):s.y>i.max.y&&(i.max.y=s.y,p=!0),((s.x===0||s.x===Qt)&&s.x===h.x)!=((s.y===0||s.y===Qt)&&s.y===h.y)&&this.processBorderOverlap(s,h),p&&this.checkBorderIntersection(s,h)}checkBorderIntersection(i,s){s.x<0!=i.x<0&&this.addBorderIntersection(0,jn(s.y,i.y,(0-s.x)/(i.x-s.x))),s.x>Qt!=i.x>Qt&&this.addBorderIntersection(1,jn(s.y,i.y,(Qt-s.x)/(i.x-s.x))),s.y<0!=i.y<0&&this.addBorderIntersection(2,jn(s.x,i.x,(0-s.y)/(i.y-s.y))),s.y>Qt!=i.y>Qt&&this.addBorderIntersection(3,jn(s.x,i.x,(Qt-s.y)/(i.y-s.y)))}addBorderIntersection(i,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[i];s<h[0]&&(h[0]=s),s>h[1]&&(h[1]=s)}processBorderOverlap(i,s){if(i.x===s.x){if(i.y===s.y)return;const h=i.x===0?0:1;this.addBorderIntersection(h,s.y),this.addBorderIntersection(h,i.y)}else{const h=i.y===0?2:3;this.addBorderIntersection(h,s.x),this.addBorderIntersection(h,i.x)}}centroid(){return this.accCount===0?new Zt(0,0):new Zt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((i,s)=>i+ +(s[0]!==Number.MAX_VALUE),0):0}}function wd(l,i){const s=l.add(i)._unit(),h=Fe(l.x*s.x+l.y*s.y,-1,1);var p,v,x;return p=Math.acos(h),Math.min(4,Math.max(-4,Math.tan(p)))/4*SA*((v=l).x*(x=i).y-v.y*x.x<0?-1:1)}const a_=[l=>l.x<0,l=>l.x>Qt,l=>l.y<0,l=>l.y>Qt];function l_(l,i,s,h){const p=[4];if(h===0)return p;s._mult(h);const v=l.sub(s),x=i.sub(s),E=[l,i,v,x];for(let M=0;M<4;M++)for(const P of E)if(a_[M](P)){p.push(M);break}return p}class Sd{constructor(i){this.vertexArray=new rg,this.indexArray=new xo,this.programConfigurations=new nh(i.layers,{zoom:i.zoom,lut:i.lut},s=>lS.includes(s)),this._segments=new oo,this.hiddenByLandmarkVertexArray=new pd,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new oo}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(i,s,h,p=!1){const v=i.length;if(v>2){let x=Math.max(0,this._segments.get().length-1);const E=this._segments._prepareSegment(4*v,this.vertexArray.length,2*this._segmentToGroundQuads[x].length);let M;x!==this._segments.get().length-1&&(x++,this._segmentToGroundQuads[x]=[],this._segmentToRegionTriCounts[x]=[0,0,0,0,0]);{const P=i[0],k=i[1];M=wd(P.sub(i[v-1])._perp()._unit(),k.sub(P)._perp()._unit())}for(let P=0;P<v;P++){const k=P===v-1?0:P+1,B=i[P],j=i[k],X=i[k===v-1?0:k+1],Z=j.sub(B)._perp()._unit(),oe=wd(Z,X.sub(j)._perp()._unit()),de=M,me=oe;if(s0(B,j,s)||p&&u_(B,s)&&u_(j,s)){M=oe;continue}const Se=E.vertexLength;_g(this.vertexArray,B,j,1,1,de),_g(this.vertexArray,B,j,1,0,de),_g(this.vertexArray,B,j,0,1,me),_g(this.vertexArray,B,j,0,0,me),E.vertexLength+=4;const be=l_(B,j,Z,h);for(const ae of be)this._segmentToGroundQuads[x].push({id:Se,region:ae}),this._segmentToRegionTriCounts[x][ae]+=2,E.primitiveLength+=2;M=oe}}}prepareBorderSegments(){if(!this.hasData())return;const i=this._segments.get(),s=i.length;for(let h=0;h<s;h++)this._segmentToGroundQuads[h].sort((p,v)=>p.region-v.region);for(let h=0;h<s;h++){const p=this._segmentToGroundQuads[h],v=i[h],x=this._segmentToRegionTriCounts[h];x.reduce((M,P)=>M+P,0);let E=0;for(let M=0;M<=4;M++){const P=x[M];if(P!==0){let k=this.regionSegments[M];k||(k=this.regionSegments[M]=new oo);const B={vertexOffset:v.vertexOffset,primitiveOffset:v.primitiveOffset+E,vertexLength:v.vertexLength,primitiveLength:P};k.get().push(B)}E+=P}for(let M=0;M<p.length;M++){const P=p[M].id;this.indexArray.emplaceBack(P,P+1,P+3),this.indexArray.emplaceBack(P,P+3,P+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(i,s,h,p,v,x){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,i,s,h,p,v,x)}upload(i){this.hasData()&&(this.vertexBuffer=i.createVertexBuffer(this.vertexArray,nb.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}uploadPaintProperties(i){this.hasData()&&this.programConfigurations.upload(i)}update(i,s,h,p,v,x,E){this.hasData()&&this.programConfigurations.updatePaintArrays(i,s,h,p,v,x,E)}updateHiddenByLandmark(i){if(!this.hasData())return;const s=i.groundVertexCount+i.groundVertexArrayOffset;if(i.groundVertexCount===0)return;const h=i.flags&oh?1:0;for(let p=i.groundVertexArrayOffset;p<s;++p)this.hiddenByLandmarkVertexArray.emplace(p,h);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(i){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=i.createVertexBuffer(this.hiddenByLandmarkVertexArray,iS.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let i=0;i<=4;i++){const s=this.regionSegments[i];s&&s.destroy()}}}}class o0{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.pixelRatio=i.pixelRatio,this.layerIds=this.layers.map(s=>s.fqid),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new xo,this.footprintVertices=new Jl,this.footprintSegments=[],this.layoutVertexArray=new Zu,this.centroidVertexArray=new Uy,this.wallVertexArray=new $y,this.indexArray=new xo,this.programConfigurations=new nh(i.layers,{zoom:i.zoom,lut:i.lut},s=>lb.includes(s)),this.segments=new oo,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.groundEffect=new Sd(i),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(i,s){}populate(i,s,h,p){this.features=[],this.hasPattern=fg("fill-extrusion",this.layers,this.pixelRatio,s),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=nt(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:v,id:x,index:E,sourceLayerIndex:M}of i){const P=this.layers[0]._featureFilter.needGeometry,k=_n(v,P);if(!this.layers[0]._featureFilter.filter(new xr(this.zoom),k,h))continue;const B={id:x,sourceLayerIndex:M,index:E,geometry:P?k.geometry:pn(v,h,p),properties:v.properties,type:v.type,patterns:{}},j=this.layoutVertexArray.length,X=n0[B.type]==="Polygon";if(this.hasPattern)this.features.push(Gv("fill-extrusion",this.layers,B,this.zoom,this.pixelRatio,s));else if(this.wallMode)for(const Z of B.geometry)for(const oe of ab(Z,X))this.addFeature(B,[oe],E,h,{},s.availableImages,p,s.brightness);else this.addFeature(B,B.geometry,E,h,{},s.availableImages,p,s.brightness);s.featureIndex.insert(v,B.geometry,E,M,this.index,j)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(i,s,h,p,v,x){for(const E of this.features){const M=n0[E.type]==="Polygon",{geometry:P}=E;if(this.wallMode)for(const k of P)for(const B of ab(k,M))this.addFeature(E,[B],E.index,s,h,p,v,x);else this.addFeature(E,P,E.index,s,h,p,v,x)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(i,s,h,p,v,x,E){this.programConfigurations.updatePaintArrays(i,s,v,h,p,x,E),this.groundEffect.update(i,s,v,h,p,x,E)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wA),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.wallVertexBuffer=i.createVertexBuffer(this.wallVertexArray,Qv.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,rS.members,!0)),this.groundEffect.upload(i)),this.groundEffect.uploadPaintProperties(i),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.groundEffect.uploadHiddenByLandmark(i),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,ib.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,s,h,p,v,x,E,M){const P=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(i,{})/this.tileToMeter,k=[new Zt(0,0),new Zt(Qt,Qt)],B=E.projection,j=B.name==="globe",X=this.wallMode||n0[i.type]==="Polygon",Z=new bd;Z.centroidDataIndex=this.centroidData.length;const oe=new xd,de=this.layers[0].paint.get("fill-extrusion-base").evaluate(i,{},p)<=0,me=this.layers[0].paint.get("fill-extrusion-height").evaluate(i,{},p);let Se;if(oe.height=me,oe.vertexArrayOffset=this.layoutVertexArray.length,oe.groundVertexArrayOffset=this.groundEffect.vertexArray.length,j&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ql),this.wallMode){if(j)return void ui("Non zero fill-extrusion-line-width is not yet supported on globe.");if(s.length!==1)return;Se=function(Ye){const tt=Ye[0].x===Ye[Ye.length-1].x&&Ye[0].y===Ye[Ye.length-1].y;(function(rn){let Ht=0;const ri=rn.length;for(let xn=0;xn<ri;xn++)Ht+=(rn[(xn+1)%ri].x-rn[xn].x)*(rn[(xn+1)%ri].y+rn[xn].y);return Ht>=0})(Ye)||(Ye=Ye.reverse());const kt={geometry:[],joinNormals:[],indices:[]},It=[],Dt=[],$t=[];let yt=Ye.length;for(;yt>=2&&Ye[yt-1].equals(Ye[yt-2]);)yt--;if(yt<(tt?3:2))return kt;let Pt,gt,_t,Gt,Xt,En=0;for(;En<yt-1&&Ye[En].equals(Ye[En+1]);)En++;tt&&(Pt=Ye[yt-2],Xt=Ye[En].sub(Pt)._unit()._perp());for(let rn=En;rn<yt;rn++){if(_t=rn===yt-1?tt?Ye[En+1]:void 0:Ye[rn+1],_t&&Ye[rn].equals(_t))continue;Xt&&(Gt=Xt),Pt&&(gt=Pt),Pt=Ye[rn],Xt=_t?_t.sub(Pt)._unit()._perp():Gt,Gt=Gt||Xt;let Ht=Gt.add(Xt);Ht.x===0&&Ht.y===0||Ht._unit();const ri=Ht.x*Xt.x+Ht.y*Xt.y,xn=ri!==0?1/ri:1/0,bn=Gt.x*Xt.y-Gt.y*Xt.x>0;let Qn="miter";const gi=2;Qn==="miter"&&xn>gi&&(Qn="bevel"),Qn==="bevel"&&(xn>100&&(Qn="flipbevel"),xn<gi&&(Qn="miter"));const _i=(Ei,Si,xi,kr)=>{const Xr=new Zt(Ei.x,Ei.y),Me=new Zt(Ei.x,Ei.y);Xr.x+=Si.x*kr,Xr.y+=Si.y*kr,Me.x-=Si.x*Math.max(xi,1),Me.y-=Si.y*Math.max(xi,1),$t.push(Si),It.push(Xr),Dt.push(Me)};if(Qn==="miter")Ht._mult(xn),_i(Pt,Ht,0,0);else if(Qn==="flipbevel")Ht=Xt.mult(-1),_i(Pt,Ht,0,0),_i(Pt,Ht.mult(-1),0,0);else{const Ei=-Math.sqrt(xn*xn-1),Si=bn?Ei:0,xi=bn?0:Ei;gt&&_i(Pt,Gt,Si,xi),_t&&_i(Pt,Xt,Si,xi)}}kt.geometry=[...It,...Dt.reverse(),It[0]],kt.joinNormals=[...$t,...$t.reverse(),$t[$t.length-1]];const gn=kt.geometry.length-1;for(let rn=0;rn<gn/2;rn++)if(rn+1<gn/2){let Ht=rn,ri=rn+1,xn=gn-1-rn,bn=gn-2-rn;Ht=Ht===0?gn-1:Ht-1,ri=ri===0?gn-1:ri-1,xn=xn===0?gn-1:xn-1,bn=bn===0?gn-1:bn-1,kt.indices.push(xn),kt.indices.push(ri),kt.indices.push(Ht),kt.indices.push(xn),kt.indices.push(bn),kt.indices.push(ri)}return kt}(s[0]),s=[Se.geometry]}const be=(Ye,tt)=>Ye<(tt.length-1)/2||Ye===tt.length-1,ae=this.wallMode?[s]:$v(s,500);for(let Ye=ae.length-1;Ye>=0;Ye--){const tt=ae[Ye];(tt.length===0||(_e=tt[0]).every(vt=>vt.x<=0)||_e.every(vt=>vt.x>=Qt)||_e.every(vt=>vt.y<=0)||_e.every(vt=>vt.y>=Qt))&&ae.splice(Ye,1)}var _e;let we;if(j)we=d_(ae,k,p);else{we=[];for(const Ye of ae)we.push({polygon:Ye,bounds:k})}const Ie=X?this.edgeRadius:0,Ge=Ie>0&&this.zoom<17,Ze=(Ye,tt)=>{if(Ye.length===0)return!1;const vt=Ye[Ye.length-1];return tt.x===vt.x&&tt.y===vt.y};for(const{polygon:Ye,bounds:tt}of we){let vt=0,kt=0;for(const yt of Ye)X&&!yt[0].equals(yt[yt.length-1])&&yt.push(yt[0]),kt+=X?yt.length-1:yt.length;const It=this.segments.prepareSegment((X?5:4)*kt,this.layoutVertexArray,this.indexArray);oe.footprintSegIdx<0&&(oe.footprintSegIdx=this.footprintSegments.length),oe.polygonSegIdx<0&&(oe.polygonSegIdx=this.polygonSegments.length);const Dt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},$t=new r0;if($t.vertexOffset=this.footprintVertices.length,$t.indexOffset=3*this.footprintIndices.length,$t.ringIndices=[],X){const yt=[],Pt=[];vt=It.vertexLength;for(let _t=0;_t<Ye.length;_t++){const Gt=Ye[_t];Gt.length&&_t!==0&&Pt.push(yt.length/2);const Xt=[];let En,gn;En=Gt[1].sub(Gt[0])._perp()._unit(),$t.ringIndices.push(Gt.length-1);for(let rn=1;rn<Gt.length;rn++){const Ht=Gt[rn],ri=Gt[rn===Gt.length-1?1:rn+1],xn=Ht.clone();if(Ie){gn=ri.sub(Ht)._perp()._unit();const bn=En.add(gn)._unit(),Qn=Ie*Math.min(4,1/(En.x*bn.x+En.y*bn.y));xn.x+=Qn*bn.x,xn.y+=Qn*bn.y,xn.x=Math.round(xn.x),xn.y=Math.round(xn.y),En=gn}if(!de||Ie!==0&&!Ge||Ze(Xt,xn)||Xt.push(xn),sm(this.layoutVertexArray,xn.x,xn.y,0,0,1,1,0),this.wallMode){const bn=be(rn,Gt);Af(this.wallVertexArray,Se.joinNormals[rn],!bn)}It.vertexLength++,this.footprintVertices.emplaceBack(Ht.x,Ht.y),yt.push(Ht.x,Ht.y),j&&vg(this.layoutVertexExtArray,B.projectTilePoint(xn.x,xn.y,p),B.upVector(p,xn.x,xn.y))}de&&(Ie===0||Ge)&&(Xt.length!==0&&Ze(Xt,Xt[0])&&Xt.pop(),this.groundEffect.addData(Xt,tt,P))}const gt=this.wallMode?Se.indices:Ky(yt,Pt);for(let _t=0;_t<gt.length;_t+=3)this.footprintIndices.emplaceBack($t.vertexOffset+gt[_t+0],$t.vertexOffset+gt[_t+1],$t.vertexOffset+gt[_t+2]),this.indexArray.emplaceBack(vt+gt[_t],vt+gt[_t+2],vt+gt[_t+1]),It.primitiveLength++;$t.indexCount+=gt.length,$t.vertexCount+=this.footprintVertices.length-$t.vertexOffset}for(let yt=0;yt<Ye.length;yt++){const Pt=Ye[yt];Z.startRing(oe,Pt[0]);let gt=Pt.length>4&&ub(Pt[Pt.length-2],Pt[0],Pt[1]),_t=Ie?c_(Pt[Pt.length-2],Pt[0],Pt[1],Ie):0;const Gt=[];let Xt,En,gn;En=Pt[1].sub(Pt[0])._perp()._unit();let rn=!0;for(let Ht=1,ri=0;Ht<Pt.length;Ht++){let xn=Pt[Ht-1],bn=Pt[Ht];const Qn=Pt[Ht===Pt.length-1?1:Ht+1];if(Z.appendEdge(oe,bn,xn),s0(bn,xn,tt)){Ie&&(En=Qn.sub(bn)._perp()._unit(),rn=!rn);continue}const gi=bn.sub(xn)._perp(),_i=gi.x/(Math.abs(gi.x)+Math.abs(gi.y)),Ei=gi.y>0?1:0,Si=xn.dist(bn);if(ri+Si>32768&&(ri=0),Ie){gn=Qn.sub(bn)._perp()._unit();let Me=uS(xn,bn,Qn,cb(En,gn),Ie);isNaN(Me)&&(Me=0);const Oe=bn.sub(xn)._unit();xn=xn.add(Oe.mult(_t))._round(),bn=bn.add(Oe.mult(-Me))._round(),_t=Me,En=gn,de&&this.zoom>=17&&(Ze(Gt,xn)||Gt.push(xn),Ze(Gt,bn)||Gt.push(bn))}const xi=It.vertexLength,kr=Pt.length>4&&ub(xn,bn,Qn);let Xr=hS(ri,gt,rn);if(sm(this.layoutVertexArray,xn.x,xn.y,_i,Ei,0,0,Xr),sm(this.layoutVertexArray,xn.x,xn.y,_i,Ei,0,1,Xr),this.wallMode){const Me=be(Ht-1,Pt),Oe=Se.joinNormals[Ht-1];Af(this.wallVertexArray,Oe,Me),Af(this.wallVertexArray,Oe,Me)}if(ri+=Si,Xr=hS(ri,kr,!rn),gt=kr,sm(this.layoutVertexArray,bn.x,bn.y,_i,Ei,0,0,Xr),sm(this.layoutVertexArray,bn.x,bn.y,_i,Ei,0,1,Xr),this.wallMode){const Me=be(Ht,Pt),Oe=Se.joinNormals[Ht];Af(this.wallVertexArray,Oe,Me),Af(this.wallVertexArray,Oe,Me)}if(It.vertexLength+=4,this.indexArray.emplaceBack(xi+0,xi+1,xi+2),this.indexArray.emplaceBack(xi+1,xi+3,xi+2),It.primitiveLength+=2,Ie){const Me=vt+(Ht===1?Pt.length-2:Ht-2),Oe=Ht===1?vt:Me+1;if(this.indexArray.emplaceBack(xi+1,Me,xi+3),this.indexArray.emplaceBack(Me,Oe,xi+3),It.primitiveLength+=2,Xt===void 0&&(Xt=xi),!s0(Qn,Pt[Ht],tt)){const St=Ht===Pt.length-1?Xt:It.vertexLength;this.indexArray.emplaceBack(xi+2,xi+3,St),this.indexArray.emplaceBack(xi+3,St+1,St),this.indexArray.emplaceBack(xi+3,Oe,St+1),It.primitiveLength+=3}rn=!rn}if(j){const Me=this.layoutVertexExtArray,Oe=B.projectTilePoint(xn.x,xn.y,p),St=B.projectTilePoint(bn.x,bn.y,p),Jt=B.upVector(p,xn.x,xn.y),an=B.upVector(p,bn.x,bn.y);vg(Me,Oe,Jt),vg(Me,Oe,Jt),vg(Me,St,an),vg(Me,St,an)}}X&&(vt+=Pt.length-1),de&&Ie&&this.zoom>=17&&(Gt.length!==0&&Ze(Gt,Gt[0])&&Gt.pop(),this.groundEffect.addData(Gt,tt,P,Ie>0))}this.footprintSegments.push($t),Dt.triangleCount=this.indexArray.length-Dt.triangleArrayOffset,this.polygonSegments.push(Dt),++oe.footprintSegLen,++oe.polygonSegLen}if(oe.vertexCount=this.layoutVertexArray.length-oe.vertexArrayOffset,oe.groundVertexCount=this.groundEffect.vertexArray.length-oe.groundVertexArrayOffset,oe.vertexCount!==0){if(oe.centroidXY=Z.borders?cS:this.encodeCentroid(Z,oe),this.centroidData.push(oe),Z.borders){this.featuresOnBorder.push(Z);const Ye=this.featuresOnBorder.length-1;for(let tt=0;tt<Z.borders.length;tt++)Z.borders[tt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[tt].push(Ye)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,v,x,p,M),this.groundEffect.addPaintPropertiesData(i,h,v,x,p,M),this.maxHeight=Math.max(this.maxHeight,me)}}sortBorders(){for(let i=0;i<this.borderFeatureIndices.length;i++)this.borderFeatureIndices[i].sort((s,h)=>this.featuresOnBorder[s].borders[i][0]-this.featuresOnBorder[h].borders[i][0])}splitToSubtiles(){const i=[];for(let E=0;E<this.centroidData.length;E++){const M=this.centroidData[E],P=+(M.min.y+M.max.y>Qt),k=2*P+(+(M.min.x+M.max.x>Qt)^P);for(let B=0;B<M.polygonSegLen;B++){const j=M.polygonSegIdx+B;i.push({centroidIdx:E,subtile:k,polygonSegmentIdx:j,triangleSegmentIdx:this.polygonSegments[j].triangleSegIdx})}}const s=new xo;i.sort((E,M)=>E.triangleSegmentIdx===M.triangleSegmentIdx?E.subtile-M.subtile:E.triangleSegmentIdx-M.triangleSegmentIdx);let h=0,p=0,v=0;for(const E of i){if(E.triangleSegmentIdx!==h)break;v++}const x=i.length;for(;p!==i.length;){h=i[p].triangleSegmentIdx;let E=0,M=p,P=p;for(let k=M;k<v&&i[k].subtile===E;k++)P++;for(;M!==v;){const k=i[M];E=k.subtile;const B=this.centroidData[k.centroidIdx].min.clone(),j=this.centroidData[k.centroidIdx].max.clone(),X={vertexOffset:this.segments.segments[h].vertexOffset,primitiveOffset:s.length,vertexLength:this.segments.segments[h].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Z=M;Z<P;Z++){const oe=i[Z],de=this.polygonSegments[oe.polygonSegmentIdx],me=this.centroidData[oe.centroidIdx].min,Se=this.centroidData[oe.centroidIdx].max,be=this.indexArray.uint16;for(let ae=de.triangleArrayOffset;ae<de.triangleArrayOffset+de.triangleCount;ae++)s.emplaceBack(be[3*ae],be[3*ae+1],be[3*ae+2]);X.primitiveLength+=de.triangleCount,B.x=Math.min(B.x,me.x),B.y=Math.min(B.y,me.y),j.x=Math.max(j.x,Se.x),j.y=Math.max(j.y,Se.y)}X.primitiveLength>0&&this.triangleSubSegments.push({segment:X,min:B,max:j}),M=P;for(let Z=M;Z<v&&i[Z].subtile===i[M].subtile;Z++)P++}p=v;for(let k=p;k<x&&i[k].triangleSegmentIdx===i[p].triangleSegmentIdx;k++)v++}s._trim(),this.indexArray=s}getVisibleSegments(i,s,h){const p=new oo;if(this.wallMode){for(const oe of this.triangleSubSegments)p.segments.push(oe.segment);return p}let v=0,x=0;const E=1<<i.canonical.z;if(s){const oe=s.getMinMaxForTile(i);oe&&(v=oe.min,x=oe.max)}x+=this.maxHeight;const M=i.toUnwrapped();let P;const k=[M.canonical.x/E+M.wrap,M.canonical.y/E],B=[(M.canonical.x+1)/E+M.wrap,(M.canonical.y+1)/E],j=(oe,de,me)=>[oe[0]*(1-me[0])+de[0]*me[0],oe[1]*(1-me[1])+de[1]*me[1]],X=[],Z=[];for(const oe of this.triangleSubSegments){X[0]=oe.min.x/Qt,X[1]=oe.min.y/Qt,Z[0]=oe.max.x/Qt,Z[1]=oe.max.y/Qt;const de=j(k,B,X),me=j(k,B,Z);if(new wr([de[0],de[1],v],[me[0],me[1],x]).intersectsPrecise(h)===0){P&&(p.segments.push(P),P=void 0);continue}const Se=oe.segment;P&&P.vertexOffset!==Se.vertexOffset&&(p.segments.push(P),P=void 0),P?(P.vertexLength+=Se.vertexLength,P.primitiveLength+=Se.primitiveLength):P={vertexOffset:Se.vertexOffset,primitiveLength:Se.primitiveLength,vertexLength:Se.vertexLength,primitiveOffset:Se.primitiveOffset,sortKey:void 0,vaos:{}}}return P&&p.segments.push(P),p}encodeCentroid(i,s){const h=i.centroid(),p=s.span(),v=Math.min(7,Math.round(p.x*this.tileToMeter/10)),x=Math.min(7,Math.round(p.y*this.tileToMeter/10));return new Zt(Fe(h.x,1,Qt-1)<<3|v,Fe(h.y,1,Qt-1)<<3|x)}encodeBorderCentroid(i){if(!i.borders)return new Zt(0,0);const s=i.borders,h=Number.MAX_VALUE;if(s[0][0]!==h||s[1][0]!==h){const p=s[0][0]!==h?0:1;return new Zt(6|(s[0][0]!==h?0:65528),(s[p][0]+s[p][1])/2<<3|6)}{const p=s[2][0]!==h?2:3;return new Zt((s[p][0]+s[p][1])/2<<3|6,6|(s[2][0]!==h?0:65528))}}showCentroid(i){const s=this.centroidData[i.centroidDataIndex];s.flags&=oh,s.centroidXY.x=0,s.centroidXY.y=0,this.writeCentroidToBuffer(s)}writeCentroidToBuffer(i){this.groundEffect.updateHiddenByLandmark(i);const s=i.vertexArrayOffset,h=i.vertexCount+i.vertexArrayOffset,p=i.flags&oh?cS:i.centroidXY,v=this.centroidVertexArray.geta_centroid_pos0(s);if(this.centroidVertexArray.geta_centroid_pos1(s)!==p.y||v!==p.x){for(let x=s;x<h;++x)this.centroidVertexArray.emplace(x,p.x,p.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const i of this.centroidData)this.writeCentroidToBuffer(i)}updateReplacement(i,s,h){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const p=s.getReplacementRegionsForTile(i.toUnwrapped());if(gg(this.activeReplacements,p))return;if(this.activeReplacements=p,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const x of this.centroidData)x.flags&=2147483647;const v=[];for(const x of this.activeReplacements){if(x.order<h)continue;const E=Math.max(1,Math.pow(2,x.footprintTileId.canonical.z-i.canonical.z));for(const M of this.centroidData)if(!(M.flags&oh||x.min.x>M.max.x||M.min.x>x.max.x||x.min.y>M.max.y||M.min.y>x.max.y))for(let P=0;P<M.footprintSegLen;P++){const k=this.footprintSegments[M.footprintSegIdx+P];if(v.length=0,dS(this.footprintVertices,k.vertexOffset,k.vertexCount,x.footprintTileId.canonical,i.canonical,v),sS(x.footprint,v,this.footprintIndices.uint16,k.indexOffset,k.indexCount,-k.vertexOffset,-E)){M.flags|=oh;break}}}for(const x of this.centroidData)this.writeCentroidToBuffer(x);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(i,s,h){let p=!1;for(let v=0;v<h.footprintSegLen;v++){const x=this.footprintSegments[h.footprintSegIdx+v];let E=0;for(const M of x.ringIndices){for(let P=E,k=M+E-1;P<M+E;k=P++){const B=this.footprintVertices.int16[2*(P+x.vertexOffset)+0],j=this.footprintVertices.int16[2*(P+x.vertexOffset)+1],X=this.footprintVertices.int16[2*(k+x.vertexOffset)+1];j>s!=X>s&&i<(this.footprintVertices.int16[2*(k+x.vertexOffset)+0]-B)*(s-j)/(X-j)+B&&(p=!p)}E=M}}return p}getHeightAtTileCoord(i,s){let h=Number.NEGATIVE_INFINITY,p=!0;const v=4*(i+Qt)*Qt+(s+Qt);if(this.partLookup.hasOwnProperty(v)){const x=this.partLookup[v];return x?{height:x.height,hidden:!!(x.flags&oh)}:void 0}for(const x of this.centroidData)i>x.max.x||x.min.x>i||s>x.max.y||x.min.y>s||this.footprintContainsPoint(i,s,x)&&x&&x.height>h&&(h=x.height,this.partLookup[v]=x,p=!!(x.flags&oh));if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:p};this.partLookup[v]=void 0}}function cb(l,i){const s=l.add(i)._unit();return l.x*s.x+l.y*s.y}function c_(l,i,s,h){const p=i.sub(l)._perp()._unit(),v=s.sub(i)._perp()._unit();return uS(l,i,s,cb(p,v),h)}function uS(l,i,s,h,p){const v=Math.sqrt(1-h*h);return Math.min(l.dist(i)/3,i.dist(s)/3,p*v/h)}function s0(l,i,s){return l.x<s[0].x&&i.x<s[0].x||l.x>s[1].x&&i.x>s[1].x||l.y<s[0].y&&i.y<s[0].y||l.y>s[1].y&&i.y>s[1].y}function u_(l,i){return l.x<i[0].x||l.x>i[1].x||l.y<i[0].y||l.y>i[1].y}function ub(l,i,s){if(l.x<0||l.x>=Qt||i.x<0||i.x>=Qt||s.x<0||s.x>=Qt)return!1;const h=s.sub(i),p=h.perp(),v=l.sub(i);return(h.x*v.x+h.y*v.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(v.x*v.x+v.y*v.y))>-.866&&p.x*v.x+p.y*v.y<0}function hS(l,i,s){const h=i?2|l:-3&l;return s?1|h:-2&h}function h_(){const l=Math.PI/32,i=Math.tan(l),s=le;return s*Math.sqrt(1+2*i*i)-s}function d_(l,i,s){const h=1<<s.z,p=Ve(s.x/h),v=Ve((s.x+1)/h),x=We(s.y/h),E=We((s.y+1)/h);return function(M,P,k,B,j=0,X){const Z=[];if(!M.length||!k||!B)return Z;const oe=(we,Ie)=>{for(const Ge of we)Z.push({polygon:Ge,bounds:Ie})},de=Math.ceil(Math.log2(k)),me=Math.ceil(Math.log2(B)),Se=de-me,be=[];for(let we=0;we<Math.abs(Se);we++)be.push(Se>0?0:1);for(let we=0;we<Math.min(de,me);we++)be.push(0),be.push(1);let ae=M;if(ae=Yv(ae,P[0].y-j,P[1].y+j,1),ae=Yv(ae,P[0].x-j,P[1].x+j,0),!ae.length)return Z;const _e=[];for(be.length?_e.push({polygons:ae,bounds:P,depth:0}):oe(ae,P);_e.length;){const we=_e.pop(),Ie=we.depth,Ge=be[Ie],Ze=we.bounds[0],Ye=we.bounds[1],tt=Ge===0?Ze.x:Ze.y,vt=Ge===0?Ye.x:Ye.y,kt=X?X(Ge,tt,vt):.5*(tt+vt),It=Yv(we.polygons,tt-j,kt+j,Ge),Dt=Yv(we.polygons,kt-j,vt+j,Ge);if(It.length){const $t=[Ze,new Zt(Ge===0?kt:Ye.x,Ge===1?kt:Ye.y)];be.length>Ie+1?_e.push({polygons:It,bounds:$t,depth:Ie+1}):oe(It,$t)}if(Dt.length){const $t=[new Zt(Ge===0?kt:Ze.x,Ge===1?kt:Ze.y),Ye];be.length>Ie+1?_e.push({polygons:Dt,bounds:$t,depth:Ie+1}):oe(Dt,$t)}}return Z}(l,i,Math.ceil((v-p)/11.25),Math.ceil((x-E)/11.25),1,(M,P,k)=>{if(M===0)return .5*(P+k);{const B=We((s.y+P/Qt)/h);return(ke(.5*(We((s.y+k/Qt)/h)+B))*h-s.y)*Qt}})}function dS(l,i,s,h,p,v){const x=Math.pow(2,h.z-p.z);for(let E=0;E<s;E++){let M=l.int16[2*(E+i)+0],P=l.int16[2*(E+i)+1];M=(M+p.x*Qt)*x-h.x*Qt,P=(P+p.y*Qt)*x-h.y*Qt,v.push(new Zt(M,P))}}let xg,a0;hn(o0,"FillExtrusionBucket",{omit:["layers","features"]}),hn(xd,"PartData"),hn(r0,"FootprintSegment"),hn(bd,"BorderCentroidData"),hn(Sd,"GroundEffect");class sh extends Zt{constructor(i,s,h){super(i,s),this.z=h}}class hb extends sh{constructor(i,s,h,p){super(i,s,h),this.w=p}}function fS(l,i,s,h){const p=s==="x"?"y":"x",v=(h-l[s])/(i[s]-l[s]);l[p]=Math.round(l[p]+(i[p]-l[p])*v),l[s]=h,l.hasOwnProperty("z")&&(l.z=jn(l.z,i.z,v)),l.hasOwnProperty("w")&&(l.w=jn(l.w,i.w,v))}function f_(l,i,s,h){const p=s,v=h;for(const x of["x","y"]){let E=l,M=i;E[x]>=M[x]&&(E=i,M=l),E[x]<p&&M[x]>p&&fS(E,M,x,p),E[x]<v&&M[x]>v&&fS(M,E,x,v)}}function d(l,i,s,h,p,v){const x=[];for(let E=0;E<l.length;E++){const M=l[E];let P;const k=x.length;let B=0;for(let j=0;j<M.length-1;j++){let X=M[j],Z=M[j+1],oe=0;const de=B;let me,Se;v&&(oe=Math.hypot(Z.x-X.x,Z.y-X.y),B+=oe,me=X,Se=Z),X.x<i&&Z.x<i||(X.x<i?X=new Zt(i,X.y+(i-X.x)/(Z.x-X.x)*(Z.y-X.y))._round():Z.x<i&&(Z=new Zt(i,X.y+(i-X.x)/(Z.x-X.x)*(Z.y-X.y))._round()),X.y<s&&Z.y<s||(X.y<s?X=new Zt(X.x+(s-X.y)/(Z.y-X.y)*(Z.x-X.x),s)._round():Z.y<s&&(Z=new Zt(X.x+(s-X.y)/(Z.y-X.y)*(Z.x-X.x),s)._round()),X.x>=h&&Z.x>=h||(X.x>=h?X=new Zt(h,X.y+(h-X.x)/(Z.x-X.x)*(Z.y-X.y))._round():Z.x>=h&&(Z=new Zt(h,X.y+(h-X.x)/(Z.x-X.x)*(Z.y-X.y))._round()),X.y>=p&&Z.y>=p||(X.y>=p?X=new Zt(X.x+(p-X.y)/(Z.y-X.y)*(Z.x-X.x),p)._round():Z.y>=p&&(Z=new Zt(X.x+(p-X.y)/(Z.y-X.y)*(Z.x-X.x),p)._round()),P&&X.equals(P[P.length-1])||(P=[X],x.push(P),v&&v.push({progress:{min:de+T(me,Se,X)*oe,max:1},parentIndex:E,prevPoint:me,nextPoint:Se})),P.push(Z),v&&(v[v.length-1].progress.max=de+T(me,Se,Z)*oe,v[v.length-1].nextPoint=Se)))))}if(v&&B>0)for(let j=k;j<x.length;j++)v[j].progress.min/=B,v[j].progress.max/=B}return x}function _(l,i,s,h,p){if(l.length<2)return void h.push(l);const v=[];for(;i.valid();){const[P,k]=i.get();for(let B=0;B<l.length-1;B++){const j=l[B],X=l[B+1],Z=lr(j,X,P,k);if(Z){const[oe]=Z,de=new Zt(jn(j.x,X.x,oe),jn(j.y,X.y,oe));v.push({t:B+oe,distance:0,point:de})}}i.next()}if(v.length===0)return void h.push(l);v.sort((P,k)=>P.t-k.t);let x=0,E=0,M=[];for(h.push(M);x!==l.length;){if(E===v.length){for(;x!==l.length;)M.length!==0&&M[M.length-1].equals(l[x])||M.push(l[x]),x++;break}v[E].t<=x?(M.length!==0&&M[M.length-1].equals(v[E].point)||M.push(v[E].point),Math.trunc(v[E].t),E++):(M.length!==0&&M[M.length-1].equals(l[x])||M.push(l[x]),x++)}}function T(l,i,s){return l.x!==i.x?(s.x-l.x)/(i.x-l.x):l.y!==i.y?(s.y-l.y)/(i.y-l.y):0}function D(l,i){return l.x*i.x+l.y*i.y}function $(l,i){if(l.length===1){let s=0;const h=i[s++];let p;for(;!p||h.equals(p);)if(p=i[s++],!p)return 1/0;for(;s<i.length;s++){const v=i[s],x=l[0],E=p.sub(h),M=v.sub(h),P=x.sub(h),k=D(E,E),B=D(E,M),j=D(M,M),X=D(P,E),Z=D(P,M),oe=k*j-B*B,de=(j*X-B*Z)/oe,me=(k*Z-B*X)/oe,Se=h.z*(1-de-me)+p.z*de+v.z*me;if(isFinite(Se))return Se}return 1/0}{let s=1/0;for(const h of i)s=Math.min(s,h.z);return s}}function Q(l,i,s,h,p,v,x,E){const M=x*p.getElevationAt(l,i,!0,!0),P=v[0]!==0,k=P?v[1]===0?x*(v[0]/7-450):x*function(B,j,X){const Z=Math.floor(j[0]/8),oe=Math.floor(j[1]/8),de=10*(j[0]-8*Z),me=10*(j[1]-8*oe),Se=B.getElevationAt(Z,oe,!0,!0),be=B.getMeterToDEM(X),ae=Math.floor(.5*(de*be-1)),_e=Math.floor(.5*(me*be-1)),we=B.tileCoordToPixel(Z,oe),Ie=2*ae+1,Ge=2*_e+1,Ze=function(Dt,$t,yt,Pt,gt){return[Dt.getElevationAtPixel($t,yt,!0),Dt.getElevationAtPixel($t+gt,yt,!0),Dt.getElevationAtPixel($t,yt+gt,!0),Dt.getElevationAtPixel($t+Pt,yt+gt,!0)]}(B,we.x-ae,we.y-_e,Ie,Ge),Ye=Math.abs(Ze[0]-Ze[1]),tt=Math.abs(Ze[2]-Ze[3]),vt=Math.abs(Ze[0]-Ze[2])+Math.abs(Ze[1]-Ze[3]),kt=Math.min(.25,.5*be*(Ye+tt)/Ie),It=Math.min(.25,.5*be*vt/Ge);return Se+Math.max(kt*de,It*me)}(p,v,E):M;return{base:M+(s===0?-1:s),top:P?Math.max(k+h,M+s+2):M+h}}const xe=qi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),Be=qi([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:lt}=xe,Ut=qi([{name:"a_packed",components:3,type:"Float32"}]),{members:cn}=Ut,vn=qi([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Wt}=vn;class Yt{constructor(i,s){this.width=i,this.height=s,this.nextRow=0,this.image=new gd({width:i,height:s}),this.positions={},this.uploaded=!1}getDash(i,s){const h=this.getKey(i,s);return this.positions[h]}trim(){const i=this.width,s=this.height=tn(this.nextRow);this.image.resize({width:i,height:s})}getKey(i,s){return i.join(",")+s}getDashRanges(i,s,h){const p=[];let v=i.length%2==1?-i[i.length-1]*h:0,x=i[0]*h,E=!0;p.push({left:v,right:x,isDash:E,zeroLength:i[0]===0});let M=i[0];for(let P=1;P<i.length;P++){E=!E;const k=i[P];v=M*h,M+=k,x=M*h,p.push({left:v,right:x,isDash:E,zeroLength:k===0})}return p}addRoundDash(i,s,h){const p=s/2;for(let v=-h;v<=h;v++){const x=this.width*(this.nextRow+h+v);let E=0,M=i[E];for(let P=0;P<this.width;P++){P/M.right>1&&(M=i[++E]);const k=Math.abs(P-M.left),B=Math.abs(P-M.right),j=Math.min(k,B);let X;const Z=v/h*(p+1);if(M.isDash){const oe=p-Math.abs(Z);X=Math.sqrt(j*j+oe*oe)}else X=p-Math.sqrt(j*j+Z*Z);this.image.data[x+P]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(i,s){for(let M=i.length-1;M>=0;--M){const P=i[M],k=i[M+1];P.zeroLength?i.splice(M,1):k&&k.isDash===P.isDash&&(k.left=P.left,i.splice(M,1))}const h=i[0],p=i[i.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const v=this.width*this.nextRow;let x=0,E=i[x];for(let M=0;M<this.width;M++){M/E.right>1&&(E=i[++x]);const P=Math.abs(M-E.left),k=Math.abs(M-E.right),B=Math.min(P,k);this.image.data[v+M]=Math.max(0,Math.min(255,(E.isDash?B:-B)+s+128))}}addDash(i,s){const h=this.getKey(i,s);if(this.positions[h])return this.positions[h];const p=s==="round",v=p?7:0,x=2*v+1;if(this.nextRow+x>this.height)return ui("LineAtlas out of space"),null;i.length===0&&i.push(1);let E=0;for(let k=0;k<i.length;k++)i[k]<0&&(ui("Negative value is found in line dasharray, replacing values with 0"),i[k]=0),E+=i[k];if(E!==0){const k=this.width/E,B=this.getDashRanges(i,this.width,k);p?this.addRoundDash(B,k,v):this.addRegularDash(B,s==="square"?.5*k:0)}const M=this.nextRow+v;this.nextRow+=x;const P={tl:[M,v],br:[E,0]};return this.positions[h]=P,P}}hn(Yt,"LineAtlas");const ur=rh.VectorTileFeature.types,Ki=Math.cos(Math.PI/180*37.5),Oo=Math.cos(Math.PI/180*5);class Rt{constructor(i){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=i.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=i.overscaling,this.pixelRatio=i.pixelRatio,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ly,this.layoutVertexArray2=new va,this.patternVertexArray=new va,this.indexArray=new xo,this.programConfigurations=new nh(i.layers,{zoom:i.zoom,lut:i.lut}),this.segments=new oo,this.maxLineLength=0,this.zOffsetVertexArray=new va,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.tessellationStep=i.tessellationStep?i.tessellationStep:Qt/64}updateFootprints(i,s){}populate(i,s,h,p){this.hasPattern=fg("line",this.layers,this.pixelRatio,s);const v=this.layers[0].layout.get("line-sort-key");this.tileToMeter=nt(h);const x=this.layers[0].layout.get("line-elevation-reference");if(x==="hd-road-markup")this.elevationType="road";else{const j=this.layers[0].layout.get("line-z-offset"),X=j.isConstant()&&!j.constantOr(0);this.elevationType=x!=="sea"&&x!=="ground"&&X?"none":"offset",this.elevationType==="offset"&&x==="none"&&ui(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const E=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&E!==void 0;const M=[];for(const{feature:j,id:X,index:Z,sourceLayerIndex:oe}of i){const de=this.layers[0]._featureFilter.needGeometry,me=_n(j,de);if(!this.layers[0]._featureFilter.filter(new xr(this.zoom),me,h))continue;const Se=v?v.evaluate(me,{},h):void 0,be={id:X,properties:j.properties,type:j.type,sourceLayerIndex:oe,index:Z,geometry:de?me.geometry:pn(j,h,p),patterns:{},sortKey:Se};M.push(be)}v&&M.sort((j,X)=>j.sortKey-X.sortKey);const{lineAtlas:P,featureIndex:k}=s,B=this.addConstantDashes(P);for(const j of M){const{geometry:X,index:Z,sourceLayerIndex:oe}=j;if(B&&this.addFeatureDashes(j,P),this.hasPattern){const de=Gv("line",this.layers,j,this.zoom,this.pixelRatio,s);this.patternFeatures.push(de)}else this.addFeature(j,X,Z,h,P.positions,s.availableImages,s.brightness,s.elevationFeatures);k.insert(i[Z].feature,X,Z,oe,this.index)}}addConstantDashes(i){let s=!1;for(const h of this.layers){const p=h.paint.get("line-dasharray").value,v=h.layout.get("line-cap").value;if(p.kind!=="constant"||v.kind!=="constant")s=!0;else{const x=v.value,E=p.value;if(!E)continue;i.addDash(E,x)}}return s}addFeatureDashes(i,s){const h=this.zoom;for(const p of this.layers){const v=p.paint.get("line-dasharray").value,x=p.layout.get("line-cap").value;if(v.kind==="constant"&&x.kind==="constant")continue;let E,M;if(v.kind==="constant"){if(E=v.value,!E)continue}else E=v.evaluate({zoom:h},i);M=x.kind==="constant"?x.value:x.evaluate({zoom:h},i),s.addDash(E,M),i.patterns[p.id]=[s.getKey(E,M)]}}update(i,s,h,p,v,x,E){this.programConfigurations.updatePaintArrays(i,s,v,h,p,x,E)}addFeatures(i,s,h,p,v,x){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,s,h,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,cn)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=i.createVertexBuffer(this.patternVertexArray,Wt)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,Be.members,!0)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lt),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,s,h,p,v,x,E,M){const P=this.layers[0].layout,k=P.get("line-join").evaluate(i,{}),B=P.get("line-cap").evaluate(i,{}),j=P.get("line-miter-limit"),X=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(i),this.lineFeature=i,this.zOffsetValue=P.get("line-z-offset").value;const Z=this.layers[0].paint.get("line-width").value;if(Z.kind!=="constant"&&Z.isLineProgressConstant===!1&&(this.variableWidthValue=Z),this.elevationType==="road"){const oe=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(i,s,p,M,k,B,j,X)){const[de,me]=this.clipRuntimeLinesToTile(s,1);for(let Se=0;Se<de.length;Se++){const be=de[Se],ae=me[Se],_e={progress:{min:ae.progress.min,max:ae.progress.max},nextDir:this.computeSegNextDir(ae,be),prevDir:this.computeSegPrevDir(ae,be)};this.addLine(be,i,p,k,B,j,X,_e)}this.fillNonElevatedRoadSegment(oe)}}else for(const oe of s)this.addLine(oe,i,p,k,B,j,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,v,x,p,E)}computeSegNextDir(i,s){return i.nextPoint.sub(s.at(-2)).unit()}computeSegPrevDir(i,s){return s[1].sub(i.prevPoint).unit()}clipLinesToTile(i,s){return d(i,-s,-s,Qt+s,Qt+s)}clipRuntimeLinesToTile(i,s){const h=[];return[d(i,-s,-s,Qt+s,Qt+s,h),h]}addElevatedRoadFeature(i,s,h,p,v,x,E,M){const P=[],k=Tl.getElevationFeature(i,p);if(k){const B=this.clipLinesToTile(s,1),j=this.prepareElevatedLines(B,k,h);for(const X of j)P.push({geometry:X,elevation:k,elevationTileID:h,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(P.length===0)return!1;for(const B of P){const j=this.layoutVertexArray.length;this.addLine(B.geometry,i,h,v,x,E,M);const X=new Yx(h,B.elevationTileID);if(B.elevation)for(let Z=j;Z<this.layoutVertexArray.length;Z++){const oe=new Zt(this.layoutVertexArray.int16[6*Z]>>1,this.layoutVertexArray.int16[6*Z+1]>>1),de=X.pointElevation(oe,B.elevation,.05);this.updateHeightRange(de),this.zOffsetVertexArray.emplaceBack(de,0,0)}else this.fillNonElevatedRoadSegment(j)}return!0}prepareElevatedLines(i,s,h){if(s.constantHeight!=null)return i;const p=[],v=1/nt(h);for(const x of i)_(x,new Zx(s,v),0,p);return p}fillNonElevatedRoadSegment(i){for(let s=i;s<this.layoutVertexArray.length;s++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(i){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,i),this.heightRange.max=Math.max(this.heightRange.max,i)):this.heightRange={min:i,max:i}}addLine(i,s,h,p,v,x,E,M){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const P=p==="none";this.patternJoinNone=this.hasPattern&&P,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const k=M&&M.progress.min>0,B=M&&M.progress.max<1;if(this.lineClips){let Ge={min:this.lineClips.start,max:this.lineClips.end},Ze=1;if(M){const vt=this.lineClips.end-this.lineClips.start;Ge=function(kt,It,Dt){return{min:vr(kt.min,It,Dt),max:vr(kt.max,It,Dt)}}(M.progress,{min:0,max:1},Ge),vt>0&&(Ze=(Ge.max-Ge.min)/vt)}const Ye=+s.properties.mapbox_clip_feature_len,tt=+s.properties.mapbox_clip_seg_len;if(Number.isNaN(Ye)||Number.isNaN(tt)){for(let kt=0;kt<i.length-1;kt++)this.totalDistance+=i[kt].dist(i[kt+1]);const vt=this.totalDistance/(Ge.max-Ge.min);this.totalFeatureLength=Number.isFinite(vt)?vt:0,this.lineClips.start=Ge.min,this.lineClips.end=Ge.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=Ye,this.distance=tt*Ze,this.lineClips.start=Ge.min,this.lineClips.end=Ge.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const j=ur[s.type]==="Polygon";let X=i.length;for(;X>=2&&i[X-1].equals(i[X-2]);)X--;let Z=0;for(;Z<X-1&&i[Z].equals(i[Z+1]);)Z++;if(X<(j?3:2))return;p==="bevel"&&(x=1.05);const oe=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let de,me,Se,be,ae,_e,we,Ie;M&&M.prevDir&&(_e=M.prevDir.perp()),M&&M.nextDir&&(we=M.nextDir.perp()),this.e1=this.e2=-1,j&&(de=i[X-2],ae=i[Z].sub(de)._unit()._perp());for(let Ge=Z;Ge<X;Ge++){if(Se=Ge===X-1?j?i[Z+1]:void 0:i[Ge+1],Se&&i[Ge].equals(Se))continue;ae&&(be=ae),de&&(me=de),de=i[Ge],Ie=this.evaluateLineProgressFeatures(me?me.dist(de):0),ae=Se?Se.sub(de)._unit()._perp():be,be=be||ae;const Ze=me&&Se;let Ye=Ze?p:j||P?"butt":v;const tt=be.x*ae.x+be.y*ae.y;if(P){const gt=function(_t){if(_t.patternJoinNone){const Gt=_t.segmentPoints.length/2,Xt=_t.lineSoFar-_t.segmentStart;for(let En=0;En<Gt;++En){const gn=_t.segmentPoints[2*En+1],rn=Math.round(_t.segmentPoints[2*En])+.5+.25*gn;_t.patternVertexArray.emplaceBack(rn,Xt,_t.segmentStart),_t.patternVertexArray.emplaceBack(rn,Xt,_t.segmentStart)}_t.segmentPoints.length=0}_t.e1=_t.e2=-1};if(Ze&&tt<Oo){this.updateDistance(me,de),this.addCurrentVertex(de,be,1,1,oe,Ie),gt(this),this.addCurrentVertex(de,ae,-1,-1,oe,Ie);continue}if(me){if(!Se){this.updateDistance(me,de),this.addCurrentVertex(de,be,1,1,oe,Ie),gt(this);continue}Ye="miter"}}let vt=be.add(ae);vt.x===0&&vt.y===0||vt._unit();const kt=vt.x*ae.x+vt.y*ae.y,It=kt!==0?1/kt:1/0,Dt=2*Math.sqrt(2-2*kt),$t=kt<Ki&&me&&Se,yt=be.x*ae.y-be.y*ae.x>0,Pt=this.overscaling<=16?15*Qt/(512*this.overscaling):0;if(Ze&&Ye==="round"){if(It<E)Ye="miter";else if(It<=2){const gt=bt(de,-10,Qt+10);Ye=this.elevationType==="offset"&&(gt||this.hasCrossSlope)?"miter":"fakeround"}}if(Ye==="miter"&&It>x&&(Ye="bevel"),Ye==="bevel"&&(It>2&&(Ye="flipbevel"),It<x&&(Ye="miter")),me&&!(Ye==="miter"&&$t)&&this.updateDistance(me,de),Ye==="miter")if($t){const gt=de.dist(me);if(gt>2*Pt){const Gt=de.sub(de.sub(me)._mult(Pt/gt)._round());this.updateDistance(me,Gt),this.addCurrentVertex(Gt,be,0,0,oe,Ie),me=Gt}this.updateDistance(me,de),vt._mult(It),this.addCurrentVertex(de,vt,0,0,oe,Ie);const _t=de.dist(Se);if(_t>2*Pt){const Gt=de.add(Se.sub(de)._mult(Pt/_t)._round());this.updateDistance(de,Gt),this.addCurrentVertex(Gt,ae,0,0,oe,Ie),de=Gt}}else vt._mult(It),this.addCurrentVertex(de,vt,0,0,oe,Ie);else if(Ye==="flipbevel"){if(It>100)vt=ae.mult(-1);else{const gt=It*be.add(ae).mag()/be.sub(ae).mag();vt._perp()._mult(gt*(yt?-1:1))}this.addCurrentVertex(de,vt,0,0,oe,Ie),this.addCurrentVertex(de,vt.mult(-1),0,0,oe,Ie)}else if(Ye==="bevel"||Ye==="fakeround"){Ie!=null&&me&&this.addCurrentVertex(de,we||be,-1,-1,oe,Ie);const gt=de.dist(me)<=2*Pt&&Ye!=="bevel",_t=vt.mult(yt?1:-1);_t._mult(It);const Gt=ae.mult(yt?-1:1),Xt=be.mult(yt?-1:1),En=this.evaluateLineProgressFeatures(this.distance);if(Ie==null&&(this.addHalfVertex(de,_t.x,_t.y,!1,!yt,0,oe,En),gt||this.addHalfVertex(de,_t.x+2*Xt.x,_t.y+2*Xt.y,!1,yt,0,oe,En)),Ye==="fakeround"){const gn=Math.round(180*Dt/Math.PI/20);this.addHalfVertex(de,Xt.x,Xt.y,!1,yt,0,oe,En);for(let rn=0;rn<gn;rn++){let Ht=rn/gn;if(Ht!==.5){const xn=Ht-.5;Ht+=Ht*xn*(Ht-1)*((1.0904+tt*(tt*(3.55645-1.43519*tt)-3.2452))*xn*xn+(.848013+tt*(.215638*tt-1.06021)))}const ri=Gt.sub(Xt)._mult(Ht)._add(Xt)._unit();this.addHalfVertex(de,ri.x,ri.y,!1,yt,0,oe,En)}this.addHalfVertex(de,Gt.x,Gt.y,!1,yt,0,oe,En)}gt||Ie!=null||this.addHalfVertex(de,_t.x+2*Gt.x,_t.y+2*Gt.y,!1,yt,0,oe,En),Ie!=null&&Se&&this.addCurrentVertex(de,_e||ae,1,1,oe,Ie)}else if(Ye==="butt")this.addCurrentVertex(de,vt,0,0,oe,Ie);else if(Ye==="square"){if(!me){const gt=k?0:-1;this.addCurrentVertex(de,vt,gt,gt,oe,Ie)}if(this.addCurrentVertex(de,vt,0,0,oe,Ie),me){const gt=B?0:1;this.addCurrentVertex(de,vt,gt,gt,oe,Ie)}}else if(Ye==="round"){if(me){const gt=!Ze&&we?we:be;this.addCurrentVertex(de,gt,0,0,oe,Ie),!Ze&&B||this.addCurrentVertex(de,gt,1,1,oe,Ie,!0)}if(Se){const gt=!Ze&&_e?_e:ae;!Ze&&k||this.addCurrentVertex(de,gt,-1,-1,oe,Ie,!0),this.addCurrentVertex(de,gt,0,0,oe,Ie)}}}}addVerticesTo(i,s,h,p,v,x,E,M,P,k){const B=(s.w-i.w)/this.tessellationStep|0;let j=0;const X=this.scaledDistance;if(B>1){this.lineSoFar=i.w;const oe=(s.x-i.x)/B,de=(s.y-i.y)/B,me=(s.z-i.z)/B,Se=(s.w-i.w)/B;for(let be=1;be<B;++be){i.x+=oe,i.y+=de,i.z+=me,this.lineSoFar+=Se,j+=Se;const ae=this.evaluateLineProgressFeatures(this.prevDistance+j);this.scaledDistance=(this.prevDistance+j)/this.totalDistance,this.addHalfVertex(i,h,p,k,!1,E,P,ae),this.addHalfVertex(i,v,x,k,!0,-M,P,ae)}}this.lineSoFar=s.w,this.scaledDistance=X;const Z=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(s,h,p,k,!1,E,P,Z),this.addHalfVertex(s,v,x,k,!0,-M,P,Z)}evaluateLineProgressFeatures(i){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+i)/this.totalFeatureLength):ui(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let s=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(s=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:s}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:s}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:s}}addCurrentVertex(i,s,h,p,v,x,E=!1){const M=s.x+s.y*h,P=s.y-s.x*h,k=s.y*p-s.x,B=-s.y-s.x*p;if(x!=null){const j=this.elevationType==="offset",X=-10,Z=Qt+10,oe=x.zOffset,de=new hb(i.x,i.y,oe,this.lineSoFar),me=!!j&&bt(i,X,Z),Se=this.lineSoFar,be=this.distance;if(this.currentVertex)if(me){const ae=this.currentVertexIsOutside,_e=this.currentVertex,we=new hb(i.x,i.y,oe,this.lineSoFar);if(f_(_e,we,X,Z),!bt(we,X,Z)){if(ae){this.e1=this.e2=-1,this.distance-=_e.dist(de),this.lineSoFar=_e.w;const Ie=this.evaluateLineProgressFeatures(_e.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(_e,M,P,E,!1,h,v,Ie),this.addHalfVertex(_e,k,B,E,!0,-p,v,Ie),this.prevDistance=this.distance}this.distance=this.prevDistance+_e.dist(we),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(_e,we,M,P,k,B,h,p,v,E),this.distance=be,this.scaledDistance=this.distance/this.totalDistance}}else{const ae=this.currentVertex;if(this.currentVertexIsOutside){f_(ae,de,X,Z),this.e1=this.e2=-1,this.distance-=ae.dist(de),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ae.w;const _e=this.evaluateLineProgressFeatures(ae.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ae,M,P,E,!1,h,v,_e),this.addHalfVertex(ae,k,B,E,!0,-p,v,_e),this.prevDistance=this.distance,this.distance=be,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ae,de,M,P,k,B,h,p,v,E)}else me||(this.addHalfVertex(i,M,P,E,!1,h,v,x),this.addHalfVertex(i,k,B,E,!0,-p,v,x));this.currentVertex=de,this.currentVertexIsOutside=me,this.lineSoFar=Se}else this.addHalfVertex(i,M,P,E,!1,h,v,x),this.addHalfVertex(i,k,B,E,!0,-p,v,x)}addHalfVertex({x:i,y:s},h,p,v,x,E,M,P){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),x||this.segmentPoints.push(this.lineSoFar-this.segmentStart,E)),this.layoutVertexArray.emplaceBack((i<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const B=jn(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,B)}const k=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),M.primitiveLength++),x?this.e2=k:this.e1=k,P!=null&&this.zOffsetVertexArray.emplaceBack(P.zOffset,P.variableWidth,P.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(i,s){this.prevDistance=this.distance,this.distance+=i.dist(s),this.updateScaledDistance()}}function bt(l,i,s){return l.x<i||l.x>s||l.y<i||l.y>s}let zt,fn;function wi(l,i,s){return i*(Qt/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}hn(Rt,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Vr=(l,i,s)=>(1-s)*l+s*i;function Li(l,i){return 1/wi(l,1,i.tileZoom)}function Ji(l,i,s,h){return l.translatePosMatrix(h||i.tileID.projMatrix,i,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const Fs=l=>{const i=[];po(l)&&i.push("RENDER_LINE_DASH"),l.paint.get("line-gradient")&&i.push("RENDER_LINE_GRADIENT");const s=l.paint.get("line-trim-offset");s[0]===0&&s[1]===0||i.push("RENDER_LINE_TRIM_OFFSET"),l.paint.get("line-border-width").constantOr(1)!==0&&i.push("RENDER_LINE_BORDER");const h=l.layout.get("line-join").constantOr("miter")==="none",p=!!l.paint.get("line-pattern").constantOr(1);return h&&p&&i.push("LINE_JOIN_NONE"),i};function po(l){const i=l.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}let ah;const pS=()=>ah||(ah={layout:zt||(zt=new co({"line-cap":new un(at.layout_line["line-cap"]),"line-join":new un(at.layout_line["line-join"]),"line-miter-limit":new Kt(at.layout_line["line-miter-limit"]),"line-round-limit":new Kt(at.layout_line["line-round-limit"]),"line-sort-key":new un(at.layout_line["line-sort-key"]),"line-z-offset":new un(at.layout_line["line-z-offset"]),"line-elevation-reference":new Kt(at.layout_line["line-elevation-reference"]),"line-cross-slope":new Kt(at.layout_line["line-cross-slope"]),visibility:new Kt(at.layout_line.visibility),"line-width-unit":new Kt(at.layout_line["line-width-unit"])})),paint:fn||(fn=new co({"line-opacity":new un(at.paint_line["line-opacity"]),"line-color":new un(at.paint_line["line-color"]),"line-translate":new Kt(at.paint_line["line-translate"]),"line-translate-anchor":new Kt(at.paint_line["line-translate-anchor"]),"line-width":new un(at.paint_line["line-width"]),"line-gap-width":new un(at.paint_line["line-gap-width"]),"line-offset":new un(at.paint_line["line-offset"]),"line-blur":new un(at.paint_line["line-blur"]),"line-dasharray":new un(at.paint_line["line-dasharray"]),"line-pattern":new un(at.paint_line["line-pattern"]),"line-pattern-cross-fade":new Kt(at.paint_line["line-pattern-cross-fade"]),"line-gradient":new xl(at.paint_line["line-gradient"]),"line-trim-offset":new Kt(at.paint_line["line-trim-offset"]),"line-trim-fade-range":new Kt(at.paint_line["line-trim-fade-range"]),"line-trim-color":new Kt(at.paint_line["line-trim-color"]),"line-emissive-strength":new Kt(at.paint_line["line-emissive-strength"]),"line-border-width":new un(at.paint_line["line-border-width"]),"line-border-color":new un(at.paint_line["line-border-color"]),"line-occlusion-opacity":new Kt(at.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},ah);class yH extends un{possiblyEvaluate(i,s){return s=new xr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(i,s)}evaluate(i,s,h,p){return s=Ke({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(i,s,h,p)}}let db;function aL(l,i){return i>0?i+2*l:l}const _H=qi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vH=qi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),xH=qi([{name:"a_projected_pos",components:4,type:"Float32"}],4);qi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const bH=qi([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),wH=qi([{name:"a_texb",components:2,type:"Uint16"}]),SH=qi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),TH=qi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);qi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lL=qi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EH=qi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);qi([{name:"triangle",components:3,type:"Uint16"}]),qi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),qi([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),qi([{type:"Float32",name:"offsetX"}]),qi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var As=24;function CH(l,i,s){return l.sections.forEach(h=>{h.text=function(p,v,x){const E=v.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?p=p.toLocaleUpperCase():E==="lowercase"&&(p=p.toLocaleLowerCase()),vl.applyArabicShaping&&(p=vl.applyArabicShaping(p)),p}(h.text,i,s)}),l}const fb={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function AH(l){return l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""}function MH(l){return l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""}var cL,TA,uL,EA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function RH(){return cL||(cL=1,EA.read=function(l,i,s,h,p){var v,x,E=8*p-h-1,M=(1<<E)-1,P=M>>1,k=-7,B=s?p-1:0,j=s?-1:1,X=l[i+B];for(B+=j,v=X&(1<<-k)-1,X>>=-k,k+=E;k>0;v=256*v+l[i+B],B+=j,k-=8);for(x=v&(1<<-k)-1,v>>=-k,k+=h;k>0;x=256*x+l[i+B],B+=j,k-=8);if(v===0)v=1-P;else{if(v===M)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,h),v-=P}return(X?-1:1)*x*Math.pow(2,v-h)},EA.write=function(l,i,s,h,p,v){var x,E,M,P=8*v-p-1,k=(1<<P)-1,B=k>>1,j=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=h?0:v-1,Z=h?1:-1,oe=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(E=isNaN(i)?1:0,x=k):(x=Math.floor(Math.log(i)/Math.LN2),i*(M=Math.pow(2,-x))<1&&(x--,M*=2),(i+=x+B>=1?j/M:j*Math.pow(2,1-B))*M>=2&&(x++,M/=2),x+B>=k?(E=0,x=k):x+B>=1?(E=(i*M-1)*Math.pow(2,p),x+=B):(E=i*Math.pow(2,B-1)*Math.pow(2,p),x=0));p>=8;l[s+X]=255&E,X+=Z,E/=256,p-=8);for(x=x<<p|E,P+=p;P>0;l[s+X]=255&x,X+=Z,x/=256,P-=8);l[s+X-Z]|=128*oe}),EA}function hL(){if(uL)return TA;uL=1,TA=i;var l=RH();function i(ae){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ae)?ae:new Uint8Array(ae||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var s=4294967296,h=1/s,p=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function v(ae){return ae.type===i.Bytes?ae.readVarint()+ae.pos:ae.pos+1}function x(ae,_e,we){return we?4294967296*_e+(ae>>>0):4294967296*(_e>>>0)+(ae>>>0)}function E(ae,_e,we){var Ie=_e<=16383?1:_e<=2097151?2:_e<=268435455?3:Math.floor(Math.log(_e)/(7*Math.LN2));we.realloc(Ie);for(var Ge=we.pos-1;Ge>=ae;Ge--)we.buf[Ge+Ie]=we.buf[Ge]}function M(ae,_e){for(var we=0;we<ae.length;we++)_e.writeVarint(ae[we])}function P(ae,_e){for(var we=0;we<ae.length;we++)_e.writeSVarint(ae[we])}function k(ae,_e){for(var we=0;we<ae.length;we++)_e.writeFloat(ae[we])}function B(ae,_e){for(var we=0;we<ae.length;we++)_e.writeDouble(ae[we])}function j(ae,_e){for(var we=0;we<ae.length;we++)_e.writeBoolean(ae[we])}function X(ae,_e){for(var we=0;we<ae.length;we++)_e.writeFixed32(ae[we])}function Z(ae,_e){for(var we=0;we<ae.length;we++)_e.writeSFixed32(ae[we])}function oe(ae,_e){for(var we=0;we<ae.length;we++)_e.writeFixed64(ae[we])}function de(ae,_e){for(var we=0;we<ae.length;we++)_e.writeSFixed64(ae[we])}function me(ae,_e){return(ae[_e]|ae[_e+1]<<8|ae[_e+2]<<16)+16777216*ae[_e+3]}function Se(ae,_e,we){ae[we]=_e,ae[we+1]=_e>>>8,ae[we+2]=_e>>>16,ae[we+3]=_e>>>24}function be(ae,_e){return(ae[_e]|ae[_e+1]<<8|ae[_e+2]<<16)+(ae[_e+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(ae,_e,we){for(we=we||this.length;this.pos<we;){var Ie=this.readVarint(),Ge=Ie>>3,Ze=this.pos;this.type=7&Ie,ae(Ge,_e,this),this.pos===Ze&&this.skip(Ie)}return _e},readMessage:function(ae,_e){return this.readFields(ae,_e,this.readVarint()+this.pos)},readFixed32:function(){var ae=me(this.buf,this.pos);return this.pos+=4,ae},readSFixed32:function(){var ae=be(this.buf,this.pos);return this.pos+=4,ae},readFixed64:function(){var ae=me(this.buf,this.pos)+me(this.buf,this.pos+4)*s;return this.pos+=8,ae},readSFixed64:function(){var ae=me(this.buf,this.pos)+be(this.buf,this.pos+4)*s;return this.pos+=8,ae},readFloat:function(){var ae=l.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ae},readDouble:function(){var ae=l.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ae},readVarint:function(ae){var _e,we,Ie=this.buf;return _e=127&(we=Ie[this.pos++]),we<128?_e:(_e|=(127&(we=Ie[this.pos++]))<<7,we<128?_e:(_e|=(127&(we=Ie[this.pos++]))<<14,we<128?_e:(_e|=(127&(we=Ie[this.pos++]))<<21,we<128?_e:function(Ge,Ze,Ye){var tt,vt,kt=Ye.buf;if(tt=(112&(vt=kt[Ye.pos++]))>>4,vt<128||(tt|=(127&(vt=kt[Ye.pos++]))<<3,vt<128)||(tt|=(127&(vt=kt[Ye.pos++]))<<10,vt<128)||(tt|=(127&(vt=kt[Ye.pos++]))<<17,vt<128)||(tt|=(127&(vt=kt[Ye.pos++]))<<24,vt<128)||(tt|=(1&(vt=kt[Ye.pos++]))<<31,vt<128))return x(Ge,tt,Ze);throw new Error("Expected varint not more than 10 bytes")}(_e|=(15&(we=Ie[this.pos]))<<28,ae,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ae=this.readVarint();return ae%2==1?(ae+1)/-2:ae/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ae=this.readVarint()+this.pos,_e=this.pos;return this.pos=ae,ae-_e>=12&&p?function(we,Ie,Ge){return p.decode(we.subarray(Ie,Ge))}(this.buf,_e,ae):function(we,Ie,Ge){for(var Ze="",Ye=Ie;Ye<Ge;){var tt,vt,kt,It=we[Ye],Dt=null,$t=It>239?4:It>223?3:It>191?2:1;if(Ye+$t>Ge)break;$t===1?It<128&&(Dt=It):$t===2?(192&(tt=we[Ye+1]))==128&&(Dt=(31&It)<<6|63&tt)<=127&&(Dt=null):$t===3?(vt=we[Ye+2],(192&(tt=we[Ye+1]))==128&&(192&vt)==128&&((Dt=(15&It)<<12|(63&tt)<<6|63&vt)<=2047||Dt>=55296&&Dt<=57343)&&(Dt=null)):$t===4&&(vt=we[Ye+2],kt=we[Ye+3],(192&(tt=we[Ye+1]))==128&&(192&vt)==128&&(192&kt)==128&&((Dt=(15&It)<<18|(63&tt)<<12|(63&vt)<<6|63&kt)<=65535||Dt>=1114112)&&(Dt=null)),Dt===null?(Dt=65533,$t=1):Dt>65535&&(Dt-=65536,Ze+=String.fromCharCode(Dt>>>10&1023|55296),Dt=56320|1023&Dt),Ze+=String.fromCharCode(Dt),Ye+=$t}return Ze}(this.buf,_e,ae)},readBytes:function(){var ae=this.readVarint()+this.pos,_e=this.buf.subarray(this.pos,ae);return this.pos=ae,_e},readPackedVarint:function(ae,_e){if(this.type!==i.Bytes)return ae.push(this.readVarint(_e));var we=v(this);for(ae=ae||[];this.pos<we;)ae.push(this.readVarint(_e));return ae},readPackedSVarint:function(ae){if(this.type!==i.Bytes)return ae.push(this.readSVarint());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readSVarint());return ae},readPackedBoolean:function(ae){if(this.type!==i.Bytes)return ae.push(this.readBoolean());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readBoolean());return ae},readPackedFloat:function(ae){if(this.type!==i.Bytes)return ae.push(this.readFloat());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readFloat());return ae},readPackedDouble:function(ae){if(this.type!==i.Bytes)return ae.push(this.readDouble());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readDouble());return ae},readPackedFixed32:function(ae){if(this.type!==i.Bytes)return ae.push(this.readFixed32());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readFixed32());return ae},readPackedSFixed32:function(ae){if(this.type!==i.Bytes)return ae.push(this.readSFixed32());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readSFixed32());return ae},readPackedFixed64:function(ae){if(this.type!==i.Bytes)return ae.push(this.readFixed64());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readFixed64());return ae},readPackedSFixed64:function(ae){if(this.type!==i.Bytes)return ae.push(this.readSFixed64());var _e=v(this);for(ae=ae||[];this.pos<_e;)ae.push(this.readSFixed64());return ae},skip:function(ae){var _e=7&ae;if(_e===i.Varint)for(;this.buf[this.pos++]>127;);else if(_e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(_e===i.Fixed32)this.pos+=4;else{if(_e!==i.Fixed64)throw new Error("Unimplemented type: "+_e);this.pos+=8}},writeTag:function(ae,_e){this.writeVarint(ae<<3|_e)},realloc:function(ae){for(var _e=this.length||16;_e<this.pos+ae;)_e*=2;if(_e!==this.length){var we=new Uint8Array(_e);we.set(this.buf),this.buf=we,this.length=_e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ae){this.realloc(4),Se(this.buf,ae,this.pos),this.pos+=4},writeSFixed32:function(ae){this.realloc(4),Se(this.buf,ae,this.pos),this.pos+=4},writeFixed64:function(ae){this.realloc(8),Se(this.buf,-1&ae,this.pos),Se(this.buf,Math.floor(ae*h),this.pos+4),this.pos+=8},writeSFixed64:function(ae){this.realloc(8),Se(this.buf,-1&ae,this.pos),Se(this.buf,Math.floor(ae*h),this.pos+4),this.pos+=8},writeVarint:function(ae){(ae=+ae||0)>268435455||ae<0?function(_e,we){var Ie,Ge;if(_e>=0?(Ie=_e%4294967296|0,Ge=_e/4294967296|0):(Ge=~(-_e/4294967296),4294967295^(Ie=~(-_e%4294967296))?Ie=Ie+1|0:(Ie=0,Ge=Ge+1|0)),_e>=18446744073709552e3||_e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");we.realloc(10),function(Ze,Ye,tt){tt.buf[tt.pos++]=127&Ze|128,Ze>>>=7,tt.buf[tt.pos++]=127&Ze|128,Ze>>>=7,tt.buf[tt.pos++]=127&Ze|128,Ze>>>=7,tt.buf[tt.pos++]=127&Ze|128,tt.buf[tt.pos]=127&(Ze>>>=7)}(Ie,0,we),function(Ze,Ye){var tt=(7&Ze)<<4;Ye.buf[Ye.pos++]|=tt|((Ze>>>=3)?128:0),Ze&&(Ye.buf[Ye.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Ye.buf[Ye.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Ye.buf[Ye.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Ye.buf[Ye.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Ye.buf[Ye.pos++]=127&Ze)))))}(Ge,we)}(ae,this):(this.realloc(4),this.buf[this.pos++]=127&ae|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=ae>>>7&127))))},writeSVarint:function(ae){this.writeVarint(ae<0?2*-ae-1:2*ae)},writeBoolean:function(ae){this.writeVarint(!!ae)},writeString:function(ae){ae=String(ae),this.realloc(4*ae.length),this.pos++;var _e=this.pos;this.pos=function(Ie,Ge,Ze){for(var Ye,tt,vt=0;vt<Ge.length;vt++){if((Ye=Ge.charCodeAt(vt))>55295&&Ye<57344){if(!tt){Ye>56319||vt+1===Ge.length?(Ie[Ze++]=239,Ie[Ze++]=191,Ie[Ze++]=189):tt=Ye;continue}if(Ye<56320){Ie[Ze++]=239,Ie[Ze++]=191,Ie[Ze++]=189,tt=Ye;continue}Ye=tt-55296<<10|Ye-56320|65536,tt=null}else tt&&(Ie[Ze++]=239,Ie[Ze++]=191,Ie[Ze++]=189,tt=null);Ye<128?Ie[Ze++]=Ye:(Ye<2048?Ie[Ze++]=Ye>>6|192:(Ye<65536?Ie[Ze++]=Ye>>12|224:(Ie[Ze++]=Ye>>18|240,Ie[Ze++]=Ye>>12&63|128),Ie[Ze++]=Ye>>6&63|128),Ie[Ze++]=63&Ye|128)}return Ze}(this.buf,ae,this.pos);var we=this.pos-_e;we>=128&&E(_e,we,this),this.pos=_e-1,this.writeVarint(we),this.pos+=we},writeFloat:function(ae){this.realloc(4),l.write(this.buf,ae,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ae){this.realloc(8),l.write(this.buf,ae,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ae){var _e=ae.length;this.writeVarint(_e),this.realloc(_e);for(var we=0;we<_e;we++)this.buf[this.pos++]=ae[we]},writeRawMessage:function(ae,_e){this.pos++;var we=this.pos;ae(_e,this);var Ie=this.pos-we;Ie>=128&&E(we,Ie,this),this.pos=we-1,this.writeVarint(Ie),this.pos+=Ie},writeMessage:function(ae,_e,we){this.writeTag(ae,i.Bytes),this.writeRawMessage(_e,we)},writePackedVarint:function(ae,_e){_e.length&&this.writeMessage(ae,M,_e)},writePackedSVarint:function(ae,_e){_e.length&&this.writeMessage(ae,P,_e)},writePackedBoolean:function(ae,_e){_e.length&&this.writeMessage(ae,j,_e)},writePackedFloat:function(ae,_e){_e.length&&this.writeMessage(ae,k,_e)},writePackedDouble:function(ae,_e){_e.length&&this.writeMessage(ae,B,_e)},writePackedFixed32:function(ae,_e){_e.length&&this.writeMessage(ae,X,_e)},writePackedSFixed32:function(ae,_e){_e.length&&this.writeMessage(ae,Z,_e)},writePackedFixed64:function(ae,_e){_e.length&&this.writeMessage(ae,oe,_e)},writePackedSFixed64:function(ae,_e){_e.length&&this.writeMessage(ae,de,_e)},writeBytesField:function(ae,_e){this.writeTag(ae,i.Bytes),this.writeBytes(_e)},writeFixed32Field:function(ae,_e){this.writeTag(ae,i.Fixed32),this.writeFixed32(_e)},writeSFixed32Field:function(ae,_e){this.writeTag(ae,i.Fixed32),this.writeSFixed32(_e)},writeFixed64Field:function(ae,_e){this.writeTag(ae,i.Fixed64),this.writeFixed64(_e)},writeSFixed64Field:function(ae,_e){this.writeTag(ae,i.Fixed64),this.writeSFixed64(_e)},writeVarintField:function(ae,_e){this.writeTag(ae,i.Varint),this.writeVarint(_e)},writeSVarintField:function(ae,_e){this.writeTag(ae,i.Varint),this.writeSVarint(_e)},writeStringField:function(ae,_e){this.writeTag(ae,i.Bytes),this.writeString(_e)},writeFloatField:function(ae,_e){this.writeTag(ae,i.Fixed32),this.writeFloat(_e)},writeDoubleField:function(ae,_e){this.writeTag(ae,i.Fixed64),this.writeDouble(_e)},writeBooleanField:function(ae,_e){this.writeVarintField(ae,!!_e)}},TA}var mS=ko(hL());const CA=3;function IH(l,i,s){i.glyphs=[],l===1&&s.readMessage(PH,i)}function PH(l,i,s){if(l===3){const{id:h,bitmap:p,width:v,height:x,left:E,top:M,advance:P}=s.readMessage(DH,{});i.glyphs.push({id:h,bitmap:new gd({width:v+2*CA,height:x+2*CA},p),metrics:{width:v,height:x,left:E,top:M,advance:P}})}else l===4?i.ascender=s.readSVarint():l===5&&(i.descender=s.readSVarint())}function DH(l,i,s){l===1?i.id=s.readVarint():l===2?i.bitmap=s.readBytes():l===3?i.width=s.readVarint():l===4?i.height=s.readVarint():l===5?i.left=s.readSVarint():l===6?i.top=s.readSVarint():l===7&&(i.advance=s.readVarint())}const OH=CA,rc={horizontal:1,vertical:2,horizontalOnly:3};class pb{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(i,s){const h=new pb;return h.scale=i||1,h.fontStack=s,h}static forImage(i){const s=new pb;return s.image=i,s}}class l0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,s,h){const p=new l0;for(let v=0;v<i.sections.length;v++){const x=i.sections[v];x.image?p.addImageSection(x,h):p.addTextSection(x,s)}return p}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCodePoint(i){return this.text.codePointAt(i)}verticalizePunctuation(i){this.text=function(s,h){let p="";for(let v=0;v<s.length;v++){const x=s.charCodeAt(v+1)||null,E=s.charCodeAt(v-1)||null;p+=!h&&(x&&Km(x)&&!fb[s[v+1]]||E&&Km(E)&&!fb[s[v-1]])||!fb[s[v]]?s[v]:fb[s[v]]}return p}(this.text,i)}trim(){let i=0;for(let h=0;h<this.text.length&&gS[this.text.charCodeAt(h)];h++)i++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&gS[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)}substring(i,s){const h=new l0;return h.text=this.text.substring(i,s),h.sectionIndex=this.sectionIndex.slice(i,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,s)=>Math.max(i,this.sections[s].scale),0)}addTextSection(i,s){this.text+=i.text,this.sections.push(pb.forText(i.scale,i.fontStack||s));const h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i,s){const h=i.image?i.image.getPrimary():null;if(!h)return void ui("Can't add FormattedSection with an empty image.");h.scaleSelf(s);const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCodePoint(p),this.sections.push(pb.forImage(h)),this.sectionIndex.push(this.sections.length-1)):ui("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function AA(l,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe=1){const de=l0.fromFeature(l,p,oe);B===rc.vertical&&de.verticalizePunctuation(j);let me=[];const Se=function(Ie,Ge,Ze,Ye,tt,vt){if(!Ie)return[];const kt=[],It=function(Pt,gt,_t,Gt,Xt,En){let gn=0;for(let rn=0;rn<Pt.length();rn++){const Ht=Pt.getSection(rn);gn+=dL(Pt.getCodePoint(rn),Ht,Gt,Xt,gt,En)}return gn/Math.max(1,Math.ceil(gn/_t))}(Ie,Ge,Ze,Ye,tt,vt),Dt=Ie.text.indexOf("")>=0;let $t=0;for(let Pt=0;Pt<Ie.length();Pt++){const gt=Ie.getSection(Pt),_t=Ie.getCodePoint(Pt);if(gS[_t]||($t+=dL(_t,gt,Ye,tt,Ge,vt)),Pt<Ie.length()-1){const Gt=!((yt=_t)<11904||!(Un["Bopomofo Extended"](yt)||Un.Bopomofo(yt)||Un["CJK Compatibility Forms"](yt)||Un["CJK Compatibility Ideographs"](yt)||Un["CJK Compatibility"](yt)||Un["CJK Radicals Supplement"](yt)||Un["CJK Strokes"](yt)||Un["CJK Symbols and Punctuation"](yt)||Un["CJK Unified Ideographs Extension A"](yt)||Un["CJK Unified Ideographs"](yt)||Un["Enclosed CJK Letters and Months"](yt)||Un["Halfwidth and Fullwidth Forms"](yt)||Un.Hiragana(yt)||Un["Ideographic Description Characters"](yt)||Un["Kangxi Radicals"](yt)||Un["Katakana Phonetic Extensions"](yt)||Un.Katakana(yt)||Un["Vertical Forms"](yt)||Un["Yi Radicals"](yt)||Un["Yi Syllables"](yt)));(LH[_t]||Gt||gt.image)&&kt.push(pL(Pt+1,$t,It,kt,kH(_t,Ie.getCodePoint(Pt+1),Gt&&Dt),!1))}}var yt;return mL(pL(Ie.length(),$t,It,kt,0,!0))}(de,P,v,i,h,X),{processBidirectionalText:be,processStyledBidirectionalText:ae}=vl;if(be&&de.sections.length===1){const Ie=be(de.toString(),Se);for(const Ge of Ie){const Ze=new l0;Ze.text=Ge,Ze.sections=de.sections;for(let Ye=0;Ye<Ge.length;Ye++)Ze.sectionIndex.push(0);me.push(Ze)}}else if(ae){const Ie=ae(de.text,de.sectionIndex,Se);for(const Ge of Ie){const Ze=new l0;Ze.text=Ge[0],Ze.sectionIndex=Ge[1],Ze.sections=de.sections,me.push(Ze)}}else me=function(Ie,Ge){const Ze=[],Ye=Ie.text;let tt=0;for(const vt of Ge)Ze.push(Ie.substring(tt,vt)),tt=vt;return tt<Ye.length&&Ze.push(Ie.substring(tt,Ye.length)),Ze}(de,Se);const _e=[],we={positionedLines:_e,text:de.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:B,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Ie,Ge,Ze,Ye,tt,vt,kt,It,Dt,$t,yt,Pt){let gt=0,_t=0,Gt=0;const Xt=It==="right"?1:It==="left"?0:.5;let En=!1;for(const bn of tt){const Qn=bn.getSections();for(const gi of Qn){if(gi.image)continue;const _i=Ge[gi.fontStack];if(_i&&(En=_i.ascender!==void 0&&_i.descender!==void 0,!En))break}if(!En)break}let gn=0;for(const bn of tt){bn.trim();const Qn=bn.getMaxScale(),gi=(Qn-1)*As,_i={positionedGlyphs:[],lineOffset:0};Ie.positionedLines[gn]=_i;const Ei=_i.positionedGlyphs;let Si=0;if(!bn.length()){_t+=vt,++gn;continue}let xi=0,kr=0;for(let Me=0;Me<bn.length();Me++){const Oe=bn.getSection(Me),St=bn.getSectionIndex(Me),Jt=bn.getCodePoint(Me);let an=Oe.scale,sn=null,Tn=null,Zn=null,ki=As,zi=0;Dt===rc.vertical&&((rn=Jt)===12312||rn===12313||rn===12316||rn===12540||rn===12448)&&(Dt=rc.horizontal);const bi=!(Dt===rc.horizontal||!yt&&!Uo(Jt)||yt&&(gS[Jt]||Dp(Jt)));if(Oe.image){const Cr=Ye.get(Oe.image.toString());if(!Cr)continue;Zn=Oe.image,Ie.iconsInText=Ie.iconsInText||!0,Tn=Cr.paddedRect;const $r=Cr.displaySize;an=an*As/Pt,sn={width:$r[0],height:$r[1],left:0,top:-3,advance:bi?$r[1]:$r[0],localGlyph:!1},zi=En?-sn.height*an:Qn*As-17-$r[1]*an,ki=sn.advance;const Bi=(bi?$r[0]:$r[1])*an-As*Qn;Bi>0&&Bi>Si&&(Si=Bi)}else{const Cr=Ze[Oe.fontStack];if(!Cr)continue;Cr[Jt]&&(Tn=Cr[Jt]);const $r=Ge[Oe.fontStack];if(!$r)continue;const Bi=$r.glyphs[Jt];if(!Bi)continue;if(sn=Bi.metrics,ki=Jt!==8203?As:0,En){const mo=$r.ascender!==void 0?Math.abs($r.ascender):0,Zr=$r.descender!==void 0?Math.abs($r.descender):0,Sr=(mo+Zr)*an;xi<Sr&&(xi=Sr,kr=(mo-Zr)/2*an),zi=-mo*an}else zi=(Qn-an)*As-17}bi?(Ie.verticalizable=!0,Ei.push({glyph:Jt,image:Zn,x:gt,y:_t+zi,vertical:bi,scale:an,localGlyph:sn.localGlyph,fontStack:Oe.fontStack,sectionIndex:St,metrics:sn,rect:Tn}),gt+=ki*an+$t):(Ei.push({glyph:Jt,image:Zn,x:gt,y:_t+zi,vertical:bi,scale:an,localGlyph:sn.localGlyph,fontStack:Oe.fontStack,sectionIndex:St,metrics:sn,rect:Tn}),gt+=sn.advance*an+$t)}Ei.length!==0&&(Gt=Math.max(gt-$t,Gt),En?gL(Ei,Xt,Si,kr,vt*Qn/2):gL(Ei,Xt,Si,0,vt/2)),gt=0;const Xr=vt*Qn+Si;_i.lineOffset=Math.max(Si,gi),_t+=Xr,++gn}var rn;const Ht=_t,{horizontalAlign:ri,verticalAlign:xn}=MA(kt);(function(bn,Qn,gi,_i,Ei,Si){const xi=(Qn-gi)*Ei,kr=-Si*_i;for(const Xr of bn)for(const Me of Xr.positionedGlyphs)Me.x+=xi,Me.y+=kr})(Ie.positionedLines,Xt,ri,xn,Gt,Ht),Ie.top+=-xn*Ht,Ie.bottom=Ie.top+Ht,Ie.left+=-ri*Gt,Ie.right=Ie.left+Gt,Ie.hasBaseline=En}(we,i,s,h,me,x,E,M,B,P,j,Z),!function(Ie){for(const Ge of Ie)if(Ge.positionedGlyphs.length!==0)return!1;return!0}(_e))return we}const gS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},LH={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function dL(l,i,s,h,p,v){if(i.image){const x=h.get(i.image.toString());return x?x.displaySize[0]*i.scale*As/v+p:0}{const x=s[i.fontStack],E=x&&x.glyphs[l];return E?E.metrics.advance*i.scale+p:0}}function fL(l,i,s,h){const p=Math.pow(l-i,2);return h?l<i?p/2:2*p:p+Math.abs(s)*s}function kH(l,i,s){let h=0;return l===10&&(h-=1e4),s&&(h+=150),l!==40&&l!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function pL(l,i,s,h,p,v){let x=null,E=fL(i,s,p,v);for(const M of h){const P=fL(i-M.x,s,p,v)+M.badness;P<=E&&(x=M,E=P)}return{index:l,x:i,priorBreak:x,badness:E}}function mL(l){return l?mL(l.priorBreak).concat(l.index):[]}function MA(l){let i=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function gL(l,i,s,h,p){if(!(i||s||h||p))return;const v=l.length-1,x=l[v],E=(x.x+x.metrics.advance*x.scale)*i;for(let M=0;M<=v;M++)l[M].x-=E,l[M].y+=s+h+p}function yL(l){return l.imagePrimary!==void 0&&l.top!==void 0&&l.bottom!==void 0&&l.left!==void 0&&l.right!==void 0}function zH(l,i,s,h){const{horizontalAlign:p,verticalAlign:v}=MA(h),x=s[0]-l.displaySize[0]*p,E=s[1]-l.displaySize[1]*v;return{imagePrimary:l,imageSecondary:i,top:E,bottom:E+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function _L(l,i,s,h,p,v){const x=l.imagePrimary;let E;if(x.content){const de=x.content,me=x.pixelRatio||1;E=[de[0]/me,de[1]/me,x.displaySize[0]-de[2]/me,x.displaySize[1]-de[3]/me]}const M=i.left*v,P=i.right*v;let k,B,j,X;s==="width"||s==="both"?(X=p[0]+M-h[3],B=p[0]+P+h[1]):(X=p[0]+(M+P-x.displaySize[0])/2,B=X+x.displaySize[0]);const Z=i.top*v,oe=i.bottom*v;return s==="height"||s==="both"?(k=p[1]+Z-h[0],j=p[1]+oe+h[2]):(k=p[1]+(Z+oe-x.displaySize[1])/2,j=k+x.displaySize[1]),{imagePrimary:x,imageSecondary:void 0,top:k,right:B,bottom:j,left:X,collisionPadding:E}}function vL(l){return!l.imagePrimary.stretchX}function xL(l){return!l.imagePrimary.stretchY}function bL(l){return{width:l.right-l.left,height:l.bottom-l.top}}const Mf=128;function wL(l,i){const{expression:s}=i;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new xr(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=l;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<l+1;)x++;x=Math.min(h.length-1,x);const E=h[v],M=h[x];return s.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:M,interpolationType:p}:{kind:"camera",minZoom:E,maxZoom:M,minSize:s.evaluate(new xr(E)),maxSize:s.evaluate(new xr(M)),interpolationType:p}}}function RA(l,{uSize:i,uSizeT:s},{lowerSize:h,upperSize:p}){return l.kind==="source"?h/Mf:l.kind==="composite"?jn(h/Mf,p/Mf,s):i}function mb(l,i,s=1){let h=0,p=0;if(l.kind==="constant")p=l.layoutSize*s;else if(l.kind!=="source"){const{interpolationType:v,minZoom:x,maxZoom:E}=l,M=v?Fe(pa.interpolationFactor(v,i,x,E),0,1):0;l.kind==="camera"?p=jn(l.minSize,l.maxSize,M)*s:h=M*s}return{uSizeT:h,uSize:p}}class am extends Zt{constructor(i,s,h,p,v){super(i,s),this.angle=p,this.z=h,v!==void 0&&(this.segment=v)}clone(){return new am(this.x,this.y,this.z,this.angle,this.segment)}}function SL(l,i,s,h,p){if(i.segment===void 0)return!0;let v=i,x=i.segment+1,E=0;for(;E>-s/2;){if(x--,x<0)return!1;E-=l[x].dist(v),v=l[x]}E+=l[x].dist(l[x+1]),x++;const M=[];let P=0;for(;E<s/2;){const k=l[x],B=l[x+1];if(!B)return!1;let j=l[x-1].angleTo(k)-k.angleTo(B);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:E,angleDelta:j}),P+=j;E-M[0].distance>h;)P-=M.shift().angleDelta;if(P>p)return!1;x++,E+=k.dist(B)}return!0}function TL(l){let i=0;for(let s=0;s<l.length-1;s++)i+=l[s].dist(l[s+1]);return i}function EL(l,i,s){return l?.6*i*s:0}function CL(l,i){return Math.max(l?l.right-l.left:0,i?i.right-i.left:0)}function BH(l,i,s,h,p,v){const x=EL(s,p,v),E=CL(s,h)*v;let M=0;const P=TL(l)/2;for(let k=0;k<l.length-1;k++){const B=l[k],j=l[k+1],X=B.dist(j);if(M+X>P){const Z=(P-M)/X,oe=jn(B.x,j.x,Z),de=jn(B.y,j.y,Z),me=new am(oe,de,0,j.angleTo(B),k);return!x||SL(l,me,E,x,i)?me:void 0}M+=X}}function FH(l,i,s,h,p,v,x,E,M){const P=EL(h,v,x),k=CL(h,p),B=k*x,j=l[0].x===0||l[0].x===M||l[0].y===0||l[0].y===M;return i-B<i/4&&(i=B+i/4),AL(l,j?i/2*E%i:(k/2+2*v)*x*E%i,i,P,s,B,j,!1,M)}function AL(l,i,s,h,p,v,x,E,M){const P=v/2,k=TL(l);let B=0,j=i-s,X=[];for(let Z=0;Z<l.length-1;Z++){const oe=l[Z],de=l[Z+1],me=oe.dist(de),Se=de.angleTo(oe);for(;j+s<B+me;){j+=s;const be=(j-B)/me,ae=jn(oe.x,de.x,be),_e=jn(oe.y,de.y,be);if(ae>=0&&ae<M&&_e>=0&&_e<M&&j-P>=0&&j+P<=k){const we=new am(ae,_e,0,Se,Z);h&&!SL(l,we,v,h,p)||X.push(we)}}B+=me}return E||X.length||x||(X=AL(l,B/2,s,h,p,v,x,!0,M)),X}function ML(l){let i=0,s=0;for(const x of l)i+=x.w*x.h,s=Math.max(s,x.w);l.sort((x,E)=>E.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}];let p=0,v=0;for(const x of l)for(let E=h.length-1;E>=0;E--){const M=h[E];if(!(x.w>M.w||x.h>M.h)){if(x.x=M.x,x.y=M.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===M.w&&x.h===M.h){const P=h.pop();E<h.length&&(h[E]=P)}else x.h===M.h?(M.x+=x.w,M.w-=x.w):x.w===M.w?(M.y+=x.h,M.h-=x.h):(h.push({x:M.x+x.w,y:M.y,w:M.w-x.w,h:x.h}),M.y+=x.h,M.h-=x.h);break}}return{w:p,h:v,fill:i/(p*v)||0}}hn(am,"Anchor");const p_=1;class gb{static getImagePositionScale(i,s,h){if(s&&i&&i.options&&i.options.transform){const p=i.options.transform;return{x:p.a,y:p.d}}return{x:h,y:h}}constructor(i,s,h,p){this.paddedRect=i;const{pixelRatio:v,version:x,stretchX:E,stretchY:M,content:P,sdf:k,usvg:B}=s;this.pixelRatio=v,this.stretchX=E,this.stretchY=M,this.content=P,this.version=x,this.padding=h,this.sdf=k,this.scale=gb.getImagePositionScale(p,B,v)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function IA(l,i,s){const h=pl.parse(l),p=function(v,x,E=[1,1]){return{x:0,y:0,w:(v.data?v.data.width:v.width*E[0])+2*x,h:(v.data?v.data.height:v.height*E[1])+2*x}}(i,s,[h.options.transform.a,h.options.transform.d]);return{bin:p,imagePosition:new gb(p,i,s,h),imageVariant:h}}class RL{constructor(i,s,h){const p=new Map,v=new Map;this.haveRenderCallbacks=[];const x=[];this.addImages(i,p,p_,x),this.addImages(s,v,2,x);const{w:E,h:M}=ML(x),P=new ps({width:E||1,height:M||1});for(const[k,B]of i.entries()){const j=p.get(k).paddedRect;ps.copy(B.data,P,{x:0,y:0},{x:j.x+p_,y:j.y+p_},B.data,h,B.sdf)}for(const[k,B]of s.entries()){const j=v.get(k),X=j.paddedRect;let Z=j.padding;const oe=X.x+Z,de=X.y+Z,me=B.data.width,Se=B.data.height;Z=Z>1?Z-1:Z,ps.copy(B.data,P,{x:0,y:0},{x:oe,y:de},B.data,h),ps.copy(B.data,P,{x:0,y:Se-Z},{x:oe,y:de-Z},{width:me,height:Z},h),ps.copy(B.data,P,{x:0,y:0},{x:oe,y:de+Se},{width:me,height:Z},h),ps.copy(B.data,P,{x:me-Z,y:0},{x:oe-Z,y:de},{width:Z,height:Se},h),ps.copy(B.data,P,{x:0,y:0},{x:oe+me,y:de},{width:Z,height:Se},h),ps.copy(B.data,P,{x:me-Z,y:Se-Z},{x:oe-Z,y:de-Z},{width:Z,height:Z},h),ps.copy(B.data,P,{x:0,y:Se-Z},{x:oe+me,y:de-Z},{width:Z,height:Z},h),ps.copy(B.data,P,{x:0,y:0},{x:oe+me,y:de+Se},{width:Z,height:Z},h),ps.copy(B.data,P,{x:me-Z,y:0},{x:oe-Z,y:de+Se},{width:Z,height:Z},h)}this.lut=h,this.image=P,this.iconPositions=p,this.patternPositions=v}addImages(i,s,h,p){for(const[v,x]of i.entries()){const{bin:E,imagePosition:M,imageVariant:P}=IA(v,x,h);s.set(v,M),p.push(E),x.hasRenderCallback&&this.haveRenderCallbacks.push(P.id)}}patchUpdatedImages(i,s,h){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>i.hasImage(p,h)),i.dispatchRenderCallbacks(this.haveRenderCallbacks,h);for(const p of i.getUpdatedImages(h)){for(const v of this.iconPositions.keys()){const x=pl.parse(v);if(Ma.isEqual(x.id,p)){const E=i.getImage(p,h);this.patchUpdatedImage(this.iconPositions.get(v),E,s)}}for(const v of this.patternPositions.keys()){const x=pl.parse(v);if(Ma.isEqual(x.id,p)){const E=i.getImage(p,h);this.patchUpdatedImage(this.patternPositions.get(v),E,s)}}}}patchUpdatedImage(i,s,h){if(!i||!s||i.version===s.version)return;i.version=s.version;const[p,v]=i.tl,x=i.sdf;if(this.lut||x){const E={width:s.data.width,height:s.data.height},M=new ps(E);ps.copy(s.data,M,{x:0,y:0},{x:0,y:0},E,this.lut,x),h.update(M,{position:{x:p,y:v}})}else h.update(s.data,{position:{x:p,y:v}})}}hn(gb,"ImagePosition"),hn(RL,"ImageAtlas");const yS=1e20;function IL(l,i,s,h,p,v,x,E,M){for(let P=i;P<i+h;P++)PL(l,s*v+P,v,p,x,E,M);for(let P=s;P<s+p;P++)PL(l,P*v+i,1,h,x,E,M)}function PL(l,i,s,h,p,v,x){v[0]=0,x[0]=-1e20,x[1]=yS,p[0]=l[i];for(let E=1,M=0,P=0;E<h;E++){p[E]=l[i+E*s];const k=E*E;do{const B=v[M];P=(p[E]-p[B]+k-B*B)/(E-B)/2}while(P<=x[M]&&--M>-1);M++,v[M]=E,x[M]=P,x[M+1]=yS}for(let E=0,M=0;E<h;E++){for(;x[M+1]<E;)M++;const P=v[M],k=E-P;l[i+E*s]=p[P]+k*k}}const Td=2,PA={none:0,ideographs:1,all:2};class c0{constructor(i,s,h){this.requestManager=i,this.localGlyphMode=s,this.localFontFamily=h,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i,s){this.urls[s]=i}getGlyphs(i,s,h){const p=[],v=this.urls[s]||zo.GLYPHS_URL;for(const x in i)for(const E of i[x])p.push({stack:x,id:E});st(p,({stack:x,id:E},M)=>{let P=this.entries[x];P||(P=this.entries[x]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let k=P.glyphs[E];if(k!==void 0)return void M(null,{stack:x,id:E,glyph:k});if(k=this._tinySDF(P,x,E),k)return P.glyphs[E]=k,void M(null,{stack:x,id:E,glyph:k});const B=Math.floor(E/256);if(256*B>65535)return ui("glyphs > 65535 not supported"),void M(null,{stack:x,id:E,glyph:k});if(P.ranges[B])return void M(null,{stack:x,id:E,glyph:k});let j=P.requests[B];j||(j=P.requests[B]=[],c0.loadGlyphRange(x,B,v,this.requestManager,(X,Z)=>{if(Z){P.ascender=Z.ascender,P.descender=Z.descender;for(const oe in Z.glyphs)this._doesCharSupportLocalGlyph(+oe)||(P.glyphs[+oe]=Z.glyphs[+oe]);P.ranges[B]=!0}for(const oe of j)oe(X,Z);delete P.requests[B]})),j.push((X,Z)=>{X?M(X):Z&&M(null,{stack:x,id:E,glyph:Z.glyphs[E]||null})})},(x,E)=>{if(x)h(x);else if(E){const M={};for(const{stack:P,id:k,glyph:B}of E)M[P]===void 0&&(M[P]={}),M[P].glyphs===void 0&&(M[P].glyphs={}),M[P].glyphs[k]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics},M[P].ascender=this.entries[P].ascender,M[P].descender=this.entries[P].descender;h(null,M)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==PA.none&&(this.localGlyphMode===PA.all?!!this.localFontFamily:!!this.localFontFamily&&(Un["CJK Unified Ideographs"](i)||Un["Hangul Syllables"](i)||Un.Hiragana(i)||Un.Katakana(i)||Un["CJK Symbols and Punctuation"](i)||Un["CJK Unified Ideographs Extension A"](i)||Un["CJK Unified Ideographs Extension B"](i)||Un.Osage(i)))}_tinySDF(i,s,h){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let v=i.tinySDF;if(!v){let oe="400";/bold/i.test(s)?oe="900":/medium/i.test(s)?oe="500":/light/i.test(s)&&(oe="200"),v=i.tinySDF=new c0.TinySDF({fontFamily:p,fontWeight:oe,fontSize:24*Td,buffer:3*Td,radius:8*Td}),v.fontWeight=oe}if(this.localGlyphs[v.fontWeight][h])return this.localGlyphs[v.fontWeight][h];const x=String.fromCodePoint(h),{data:E,width:M,height:P,glyphWidth:k,glyphHeight:B,glyphLeft:j,glyphTop:X,glyphAdvance:Z}=v.draw(x);return this.localGlyphs[v.fontWeight][h]={id:h,bitmap:new gd({width:M,height:P},E),metrics:{width:k/Td,height:B/Td,left:j/Td,top:X/Td-27,advance:Z/Td,localGlyph:!0}}}}c0.loadGlyphRange=function(l,i,s,h,p){const v=256*i,x=v+255,E=h.transformRequest(h.normalizeGlyphsURL(s).replace("{fontstack}",l).replace("{range}",`${v}-${x}`),qd.Glyphs);Au(E,(M,P)=>{if(M)p(M);else if(P){const k={},B=function(j){return new mS(j).readFields(IH,{})}(P);for(const j of B.glyphs)k[j.id]=j;p(null,{glyphs:k,ascender:B.ascender,descender:B.descender})}})},c0.TinySDF=class{constructor({fontSize:l=24,buffer:i=3,radius:s=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=s;const E=this.size=l+4*i,M=this._createCanvas(E),P=this.ctx=M.getContext("2d",{willReadFrequently:!0});P.font=`${x} ${v} ${l}px ${p}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(l){const i=document.createElement("canvas");return i.width=i.height=l,i}draw(l){const{width:i,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(l),x=Math.ceil(s),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-p))),M=Math.min(this.size-this.buffer,x+Math.ceil(h)),P=E+2*this.buffer,k=M+2*this.buffer,B=Math.max(P*k,0),j=new Uint8ClampedArray(B),X={data:j,width:P,height:k,glyphWidth:E,glyphHeight:M,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(E===0||M===0)return X;const{ctx:Z,buffer:oe,gridInner:de,gridOuter:me}=this;Z.clearRect(oe,oe,E,M),Z.fillText(l,oe,oe+x);const Se=Z.getImageData(oe,oe,E,M);me.fill(yS,0,B),de.fill(0,0,B);for(let be=0;be<M;be++)for(let ae=0;ae<E;ae++){const _e=Se.data[4*(be*E+ae)+3]/255;if(_e===0)continue;const we=(be+oe)*P+ae+oe;if(_e===1)me[we]=0,de[we]=yS;else{const Ie=.5-_e;me[we]=Ie>0?Ie*Ie:0,de[we]=Ie<0?Ie*Ie:0}}IL(me,0,0,P,k,P,this.f,this.v,this.z),IL(de,oe,oe,E,M,P,this.f,this.v,this.z);for(let be=0;be<B;be++){const ae=Math.sqrt(me[be])-Math.sqrt(de[be]);j[be]=Math.round(255-255*(ae/this.radius+this.cutoff))}return X}};const m_=p_;function DL(l,i){return l+i[1]-i[0]}function OL(l,i,s,h,p=1){const v=[],x=l.imagePrimary,E=x.pixelRatio,M=x.paddedRect.w-2*m_,P=x.paddedRect.h-2*m_,k=(l.right-l.left)*p,B=(l.bottom-l.top)*p,j=x.stretchX||[[0,M]],X=x.stretchY||[[0,P]],Z=j.reduce(DL,0),oe=X.reduce(DL,0),de=M-Z,me=P-oe;let Se=0,be=Z,ae=0,_e=oe,we=0,Ie=de,Ge=0,Ze=me;if(x.content&&h){const tt=x.content;Se=_S(j,0,tt[0]),ae=_S(X,0,tt[1]),be=_S(j,tt[0],tt[2]),_e=_S(X,tt[1],tt[3]),we=tt[0]-Se,Ge=tt[1]-ae,Ie=tt[2]-tt[0]-be,Ze=tt[3]-tt[1]-_e}const Ye=(tt,vt,kt,It)=>{const Dt=vS(tt.stretch-Se,be,k,l.left*p),$t=xS(tt.fixed-we,Ie,tt.stretch,Z),yt=vS(vt.stretch-ae,_e,B,l.top*p),Pt=xS(vt.fixed-Ge,Ze,vt.stretch,oe),gt=vS(kt.stretch-Se,be,k,l.left*p),_t=xS(kt.fixed-we,Ie,kt.stretch,Z),Gt=vS(It.stretch-ae,_e,B,l.top*p),Xt=xS(It.fixed-Ge,Ze,It.stretch,oe),En=new Zt(Dt,yt),gn=new Zt(gt,yt),rn=new Zt(gt,Gt),Ht=new Zt(Dt,Gt),ri=new Zt($t/E,Pt/E),xn=new Zt(_t/E,Xt/E),bn=i*Math.PI/180;if(bn){const xi=Math.sin(bn),kr=Math.cos(bn),Xr=[kr,-xi,xi,kr];En._matMult(Xr),gn._matMult(Xr),Ht._matMult(Xr),rn._matMult(Xr)}const Qn=tt.stretch+tt.fixed,gi=kt.stretch+kt.fixed,_i=vt.stretch+vt.fixed,Ei=It.stretch+It.fixed,Si=l.imageSecondary;return{tl:En,tr:gn,bl:Ht,br:rn,texPrimary:{x:x.paddedRect.x+m_+Qn,y:x.paddedRect.y+m_+_i,w:gi-Qn,h:Ei-_i},texSecondary:Si?{x:Si.paddedRect.x+m_+Qn,y:Si.paddedRect.y+m_+_i,w:gi-Qn,h:Ei-_i}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ri,pixelOffsetBR:xn,minFontScaleX:Ie/E/k,minFontScaleY:Ze/E/B,isSDF:s}};if(h&&(x.stretchX||x.stretchY)){const tt=LL(j,de,Z),vt=LL(X,me,oe);for(let kt=0;kt<tt.length-1;kt++){const It=tt[kt],Dt=tt[kt+1];for(let $t=0;$t<vt.length-1;$t++)v.push(Ye(It,vt[$t],Dt,vt[$t+1]))}}else v.push(Ye({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:P+1}));return v}function _S(l,i,s){let h=0;for(const p of l)h+=Math.max(i,Math.min(s,p[1]))-Math.max(i,Math.min(s,p[0]));return h}function LL(l,i,s){const h=[{fixed:-1,stretch:0}];for(const[p,v]of l){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:i+m_,stretch:s}),h}function vS(l,i,s,h){return l/i*s+h}function xS(l,i,s,h){return l-i*s/h}function NH(l,i,s,h){const p=i+l.positionedLines[h].lineOffset;return h===0?s+p/2:s+(p+(i+l.positionedLines[h-1].lineOffset))/2}function jH(l,i=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const E=l[0];for(let X=0;X<E.length;X++){const Z=E[X];(!X||Z.x<h)&&(h=Z.x),(!X||Z.y<p)&&(p=Z.y),(!X||Z.x>v)&&(v=Z.x),(!X||Z.y>x)&&(x=Z.y)}const M=Math.min(v-h,x-p);let P=M/2;const k=new gp([],UH);if(M===0)return new Zt(h,p);for(let X=h;X<v;X+=M)for(let Z=p;Z<x;Z+=M)k.push(new u0(X+P,Z+P,P,l));let B=function(X){let Z=0,oe=0,de=0;const me=X[0];for(let Se=0,be=me.length,ae=be-1;Se<be;ae=Se++){const _e=me[Se],we=me[ae],Ie=_e.x*we.y-we.x*_e.y;oe+=(_e.x+we.x)*Ie,de+=(_e.y+we.y)*Ie,Z+=3*Ie}return new u0(oe/Z,de/Z,0,X)}(l),j=k.length;for(;k.length;){const X=k.pop();(X.d>B.d||!B.d)&&(B=X,s&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,j)),X.max-B.d<=i||(P=X.h/2,k.push(new u0(X.p.x-P,X.p.y-P,P,l)),k.push(new u0(X.p.x+P,X.p.y-P,P,l)),k.push(new u0(X.p.x-P,X.p.y+P,P,l)),k.push(new u0(X.p.x+P,X.p.y+P,P,l)),j+=4)}return s&&(console.log(`num probes: ${j}`),console.log(`best distance: ${B.d}`)),B.p}function UH(l,i){return i.max-l.max}class u0{constructor(i,s,h,p){this.p=new Zt(i,s),this.h=h,this.d=function(v,x){let E=!1,M=1/0;for(let P=0;P<x.length;P++){const k=x[P];for(let B=0,j=k.length,X=j-1;B<j;X=B++){const Z=k[B],oe=k[X];Z.y>v.y!=oe.y>v.y&&v.x<(oe.x-Z.x)*(v.y-Z.y)/(oe.y-Z.y)+Z.x&&(E=!E),M=Math.min(M,Ai(v,Z,oe))}}return(E?1:-1)*Math.sqrt(M)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const VH=Object.keys,DA=Number.POSITIVE_INFINITY,$H=Math.sqrt(2);function kL(l,[i,s]){let h=0,p=0;if(s===DA){i<0&&(i=0);const v=i/$H;switch(l){case"top-right":case"top-left":p=v-7;break;case"bottom-right":case"bottom-left":p=7-v;break;case"bottom":p=7-i;break;case"top":p=i-7}switch(l){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=i;break;case"right":h=-i}}else{switch(i=Math.abs(i),s=Math.abs(s),l){case"top-right":case"top-left":case"top":p=s-7;break;case"bottom-right":case"bottom-left":case"bottom":p=7-s}switch(l){case"top-right":case"bottom-right":case"right":h=-i;break;case"top-left":case"bottom-left":case"left":h=i}}return[h,p]}function bS(l,i,s,h,p,v,x,E,M){if(!i||!i.usvg)return;const P=bL(h),k=bL(p),B=v!=="both"&&v!=="width"||!vL(h)?1:Math.max(1,k.width/P.width),j=v!=="both"&&v!=="height"||!xL(h)?1:Math.max(1,k.height/P.height);s.scaleSelf(B,j);const X=s.toString();x.set(X,s),E.set(X,i);const{imagePosition:Z}=IA(X,i,p_);M.set(X,Z)}function zL(l,i,s,h,p,v,x,E){if(!l)return;const M=function(P,k,B,j,X){if(P.kind==="camera")return P.maxSize;if(P.kind==="composite"){const Z=k.possiblyEvaluate(new xr(P.maxZoom),B).evaluate(X,{},B),oe=k.possiblyEvaluate(new xr(P.minZoom),B).evaluate(X,{},B);return Math.max(Z,oe)}return k.possiblyEvaluate(new xr(j)).evaluate(X,{},B)}(i,s,h,p,v);return l.scaleSelf(M*E*x)}function BL(l,i,s,h,p,v,x,E){return{iconPrimary:zL(l.getPrimary(),i,s,h,p,v,x,E),iconSecondary:zL(l.getSecondary(),i,s,h,p,v,x,E)}}function FL(l,i,s,h){if(!l)return;const p=i.get(s.toString());if(l.imagePrimary=p,h){const v=i.get(h.toString());l.imageSecondary=v}}function HH(l,i){for(const s in l.horizontal)NL(l.horizontal[s],i);NL(l.vertical,i)}function NL(l,i){if(l){for(const s of l.positionedLines)for(const h of s.positionedGlyphs)if(h.image!==null){const p=h.image.toString();h.rect=i.get(p).paddedRect}}}function OA(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function GH(l,i,s,h,p,v,x,E,M){const P=LA(v.horizontal)||v.vertical,k=s.get("icon-text-fit-padding").evaluate(h,{},p);let B,j=i;return i&&M!=="none"&&(l.allowVerticalPlacement&&v.vertical&&(B=_L(i,v.vertical,M,k,E,x)),P&&(j=_L(i,P,M,k,E,x))),{defaultShapedIcon:j,verticallyShapedIcon:B}}function qH(l,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me,Se,be){let ae=x.textMaxSize.evaluate(i,{},j);ae===void 0?ae=E*x.textScaleFactor:ae*=x.textScaleFactor;const _e=l.layers[0].layout,we=LA(s.horizontal)||s.vertical,Ie=X.name==="globe",Ge=As,Ze=l.tilePixelRatio*ae/Ge,Ye=($t=l.overscaling,l.zoom>18&&$t>2&&($t>>=1),Math.max(Qt/(512*$t),1)*_e.get("symbol-spacing")),tt=_e.get("text-padding")*l.tilePixelRatio,vt=_e.get("icon-padding")*l.tilePixelRatio,kt=Y(_e.get("text-max-angle")),It=_e.get("icon-rotation-alignment")==="map"&&be!=="point",Dt=Ye/2;var $t;l.hasAnyIconTextFit===!1&&de!=="none"&&(l.hasAnyIconTextFit=!0);const yt=i.properties?+i.properties[nm]:null,Pt=yt&&l.elevationFeatureIdToIndex?l.elevationFeatureIdToIndex.get(yt):65535,gt=(_t,Gt,Xt)=>{if(Gt.x<0||Gt.x>=Qt||Gt.y<0||Gt.y>=Qt)return;let En=null;if(Ie){const{x:gn,y:rn,z:Ht}=X.projectTilePoint(Gt.x,Gt.y,Xt);En={anchor:new am(gn,rn,Ht,0,void 0),up:X.upVector(Xt,Gt.x,Gt.y)}}(function(gn,rn,Ht,ri,xn,bn,Qn,gi,_i,Ei,Si,xi,kr,Xr,Me,Oe,St,Jt,an,sn,Tn,Zn,ki,zi,bi,Cr,$r,Bi,mo){const Zr=gn.addToLineVertexArray(rn,ri);let Sr,wo,eo,Hr,Yr,Ir,Ti,Pr=0,go=0,Wn=0,Xi=0,to=-1,_o=-1;const so={};let Yo=Aa("");const zr=Ht?Ht.anchor:rn,qo=Bi!=="none";let Al=0,ra=0;if(_i._unevaluatedLayout.getValue("text-radial-offset")===void 0){const Ko=_i.layout.get("text-offset").evaluate(Tn,{},bi);Al=Ko[0]*As,ra=Ko[1]*As}else Al=_i.layout.get("text-radial-offset").evaluate(Tn,{},bi)*As,ra=DA;if(gn.allowVerticalPlacement&&xn.vertical){const Ko=xn.vertical;if(Me)Ir=kA(Ko),gi&&(Ti=kA(gi));else{const us=_i.layout.get("text-rotate").evaluate(Tn,{},bi)+90;eo=wS(Ei,zr,rn,Si,xi,kr,Ko,Xr,us,Oe),gi&&(Hr=wS(Ei,zr,rn,Si,xi,kr,gi,Jt,us))}}if(bn){const Ko=gn.iconSizeData,us=_i.layout.get("icon-rotate").evaluate(Tn,{},bi),oa=OL(bn,us,ki,qo,Zn.iconScaleFactor),ja=gi?OL(gi,us,ki,qo,Zn.iconScaleFactor):void 0;wo=wS(Ei,zr,rn,Si,xi,kr,bn,Jt,us,null),Pr=4*oa.length;let ba=null;Ko.kind==="source"?(ba=[Mf*_i.layout.get("icon-size").evaluate(Tn,{},bi)*Zn.iconScaleFactor],ba[0]>bg&&ui(`${gn.layerIds[0]}: Value for "icon-size" is >= ${yb}. Reduce your "icon-size".`)):Ko.kind==="composite"&&(ba=[Mf*Zn.compositeIconSizes[0].evaluate(Tn,{},bi)*Zn.iconScaleFactor,Mf*Zn.compositeIconSizes[1].evaluate(Tn,{},bi)*Zn.iconScaleFactor],(ba[0]>bg||ba[1]>bg)&&ui(`${gn.layerIds[0]}: Value for "icon-size" is >= ${yb}. Reduce your "icon-size".`)),gn.addSymbols(gn.icon,oa,ba,sn,an,Tn,void 0,Ht,rn,Zr.lineStartIndex,Zr.lineLength,-1,zi,bi,Cr,$r),to=gn.icon.placedSymbolArray.length-1,ja&&(go=4*ja.length,gn.addSymbols(gn.icon,ja,ba,sn,an,Tn,rc.vertical,Ht,rn,Zr.lineStartIndex,Zr.lineLength,-1,zi,bi,Cr,$r),_o=gn.icon.placedSymbolArray.length-1)}for(const Ko in xn.horizontal){const us=Ko,oa=xn.horizontal[us];Sr||(Yo=Aa(oa.text),Me?Yr=kA(oa):Sr=wS(Ei,zr,rn,Si,xi,kr,oa,Xr,_i.layout.get("text-rotate").evaluate(Tn,{},bi),Oe));const ja=oa.positionedLines.length===1;if(Wn+=jL(gn,Ht,rn,oa,Qn,_i,Me,Tn,Oe,Zr,xn.vertical?rc.horizontal:rc.horizontalOnly,ja?VH(xn.horizontal):[us],so,to,Zn,zi,bi,Cr),ja)break}xn.vertical&&(Xi+=jL(gn,Ht,rn,xn.vertical,Qn,_i,Me,Tn,Oe,Zr,rc.vertical,["vertical"],so,_o,Zn,zi,bi,Cr));let Ns=-1;const Ml=(Ko,us)=>Ko?Math.max(Ko,us):us;Ns=Ml(Yr,Ns),Ns=Ml(Ir,Ns),Ns=Ml(Ti,Ns);const Rf=Ns>-1?1:0;gn.glyphOffsetArray.length>=65535&&ui("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&gn.addToSortKeyRanges(gn.symbolInstances.length,Tn.sortKey),gn.symbolInstances.emplaceBack(rn.x,rn.y,zr.x,zr.y,zr.z,so.right>=0?so.right:-1,so.center>=0?so.center:-1,so.left>=0?so.left:-1,so.vertical>=0?so.vertical:-1,to,_o,Yo,Sr!==void 0?Sr:gn.collisionBoxArray.length,Sr!==void 0?Sr+1:gn.collisionBoxArray.length,eo!==void 0?eo:gn.collisionBoxArray.length,eo!==void 0?eo+1:gn.collisionBoxArray.length,wo!==void 0?wo:gn.collisionBoxArray.length,wo!==void 0?wo+1:gn.collisionBoxArray.length,Hr||gn.collisionBoxArray.length,Hr?Hr+1:gn.collisionBoxArray.length,Si,Wn,Xi,Pr,go,Rf,0,Al,ra,Ns,0,qo?1:0,mo)})(l,Gt,En,_t,s,h,v,p,l.layers[0],l.collisionBoxArray,i.index,i.sourceLayerIndex,l.index,tt,Se,P,0,vt,It,me,i,x,k,B,j,Z,oe,de,Pt)};if(be==="line")for(const _t of d(i.geometry,0,0,Qt,Qt)){const Gt=FH(_t,Ye,kt,s.vertical||we,h,Ge,Ze,l.overscaling,Qt);for(const Xt of Gt)we&&WH(l,we.text,Dt,Xt)||gt(_t,Xt,j)}else if(be==="line-center"){for(const _t of i.geometry)if(_t.length>1){const Gt=BH(_t,kt,s.vertical||we,h,Ge,Ze);Gt&&gt(_t,Gt,j)}}else if(i.type==="Polygon")for(const _t of $v(i.geometry,0)){const Gt=jH(_t,16);gt(_t[0],new am(Gt.x,Gt.y,0,0,void 0),j)}else if(i.type==="LineString")for(const _t of i.geometry)gt(_t,new am(_t[0].x,_t[0].y,0,0,void 0),j);else if(i.type==="Point")for(const _t of i.geometry)for(const Gt of _t)gt([Gt],new am(Gt.x,Gt.y,0,0,void 0),j)}const yb=255,bg=yb*Mf;function jL(l,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de,me){const Se=function(_e,we,Ie,Ge,Ze,Ye,tt,vt){const kt=[];if(we.positionedLines.length===0)return kt;const It=Ge.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,Dt=function(_t){const Gt=_t[0],Xt=_t[1],En=Gt*Xt;return En>0?[Gt,-Xt]:En<0?[-Gt,Xt]:Gt===0?[Xt,Gt]:[Xt,-Gt]}(Ie);let $t=Math.abs(we.top-we.bottom);for(const _t of we.positionedLines)$t-=_t.lineOffset;const yt=we.positionedLines.length,Pt=$t/yt;let gt=we.top-Ie[1];for(let _t=0;_t<yt;++_t){const Gt=we.positionedLines[_t];gt=NH(we,Pt,gt,_t);for(const Xt of Gt.positionedGlyphs){if(!Xt.rect)continue;const En=Xt.rect||{};let gn=OH+1,rn=!0,Ht=1,ri=0;if(Xt.image){const Tn=tt.get(Xt.image.toString());if(!Tn)continue;if(Tn.sdf){ui("SDF images are not supported in formatted text and will be ignored.");continue}rn=!1,Ht=Tn.pixelRatio,gn=p_/Ht}const xn=(Ze||vt)&&Xt.vertical,bn=Xt.metrics.advance*Xt.scale/2,Qn=Xt.metrics,gi=Xt.rect;if(gi===null)continue;vt&&we.verticalizable&&(ri=Xt.image?bn-Xt.metrics.width*Xt.scale/2:0);const _i=Ze?[Xt.x+bn,Xt.y]:[0,0];let Ei=[0,0],Si=[0,0],xi=!1;Ze||(xn?(Si=[Xt.x+bn+Dt[0],Xt.y+Dt[1]-ri],xi=!0):Ei=[Xt.x+bn+Ie[0],Xt.y+Ie[1]-ri]);const kr=gi.w*Xt.scale/(Ht*(Xt.localGlyph?Td:1)),Xr=gi.h*Xt.scale/(Ht*(Xt.localGlyph?Td:1));let Me,Oe,St,Jt;if(xn){const Tn=Xt.y-gt,Zn=new Zt(-bn,bn-Tn),ki=-Math.PI/2,zi=new Zt(...Si);Me=new Zt(-bn+Ei[0],Ei[1]),Me._rotateAround(ki,Zn)._add(zi),Me.x+=-Tn+bn,Me.y-=(Qn.left-gn)*Xt.scale;const bi=Xt.image?Qn.advance*Xt.scale:As*Xt.scale,Cr=String.fromCodePoint(Xt.glyph);AH(Cr)?Me.x+=(1-gn)*Xt.scale:MH(Cr)?Me.x+=bi-Qn.height*Xt.scale+(-gn-1)*Xt.scale:Me.x+=Xt.image||Qn.width+2*gn===gi.w&&Qn.height+2*gn===gi.h?(bi-Xr)/2:(bi-(Qn.height+2*gn)*Xt.scale)/2,Oe=new Zt(Me.x,Me.y-kr),St=new Zt(Me.x+Xr,Me.y),Jt=new Zt(Me.x+Xr,Me.y-kr)}else{const Tn=(Qn.left-gn)*Xt.scale-bn+Ei[0],Zn=(-Qn.top-gn)*Xt.scale+Ei[1],ki=Tn+kr,zi=Zn+Xr;Me=new Zt(Tn,Zn),Oe=new Zt(ki,Zn),St=new Zt(Tn,zi),Jt=new Zt(ki,zi)}if(It){let Tn;Tn=Ze?new Zt(0,0):xi?new Zt(Dt[0],Dt[1]):new Zt(Ie[0],Ie[1]),Me._rotateAround(It,Tn),Oe._rotateAround(It,Tn),St._rotateAround(It,Tn),Jt._rotateAround(It,Tn)}const an=new Zt(0,0),sn=new Zt(0,0);kt.push({tl:Me,tr:Oe,bl:St,br:Jt,texPrimary:En,texSecondary:void 0,writingMode:we.writingMode,glyphOffset:_i,sectionIndex:Xt.sectionIndex,isSDF:rn,pixelOffsetTL:an,pixelOffsetBR:sn,minFontScaleX:0,minFontScaleY:0})}}return kt}(0,h,M,v,x,E,p,l.allowVerticalPlacement),be=l.textSizeData;let ae=null;be.kind==="source"?(ae=[Mf*v.layout.get("text-size").evaluate(E,{},de)*Z.textScaleFactor],ae[0]>bg&&ui(`${l.layerIds[0]}: Value for "text-size" is >= ${yb}. Reduce your "text-size".`)):be.kind==="composite"&&(ae=[Mf*Z.compositeTextSizes[0].evaluate(E,{},de)*Z.textScaleFactor,Mf*Z.compositeTextSizes[1].evaluate(E,{},de)*Z.textScaleFactor],(ae[0]>bg||ae[1]>bg)&&ui(`${l.layerIds[0]}: Value for "text-size" is >= ${yb}. Reduce your "text-size".`)),l.addSymbols(l.text,Se,ae,M,x,E,k,i,s,P.lineStartIndex,P.lineLength,X,oe,de,me,!1);for(const _e of B)j[_e]=l.text.placedSymbolArray.length-1;return 4*Se.length}function LA(l){for(const i in l)return l[i];return null}function wS(l,i,s,h,p,v,x,E,M,P){let k=x.top,B=x.bottom,j=x.left,X=x.right;if(yL(x)&&x.collisionPadding){const Z=x.collisionPadding;j-=Z[0],k-=Z[1],X+=Z[2],B+=Z[3]}if(M){const Z=new Zt(j,k),oe=new Zt(X,k),de=new Zt(j,B),me=new Zt(X,B),Se=Y(M);let be=new Zt(0,0);P&&(be=new Zt(P[0],P[1])),Z._rotateAround(Se,be),oe._rotateAround(Se,be),de._rotateAround(Se,be),me._rotateAround(Se,be),j=Math.min(Z.x,oe.x,de.x,me.x),X=Math.max(Z.x,oe.x,de.x,me.x),k=Math.min(Z.y,oe.y,de.y,me.y),B=Math.max(Z.y,oe.y,de.y,me.y)}return l.emplaceBack(i.x,i.y,i.z,s.x,s.y,j,k,X,B,E,h,p,v),l.length-1}function kA(l){yL(l)&&l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const i=l.bottom-l.top;return i>0?Math.max(10,i):null}function WH(l,i,s,h){const p=l.compareText;if(i in p){const v=p[i];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[i]=[];return p[i].push(h),!1}function UL(l,i){const s=l.fovAboveCenter,h=l.elevation?l.elevation.getMinElevationBelowMSL()*i:0,p=(l._camera.position[2]*l.worldSize-h)/Math.cos(l._pitch),v=Math.sin(s)*p/Math.sin(Math.max(Math.PI/2-l._pitch-s,.01));let x=Math.sin(l._pitch)*v+p;const E=p*(1/l._horizonShift);if(!l.elevation||l.elevation.exaggeration()===0){let M=Math.max(l.zoom-17,0);l.isOrthographic&&(M/=10),x*=1+M}return Math.min(1.01*x,E)}function _b(l,i){if(!i.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:i};const s=Math.pow(2,-l.z),h=l.x*s,p=(l.x+1)*s,v=l.y*s,x=(l.y+1)*s,E=Ve(h),M=Ve(p),P=We(v),k=We(x),B=i.project(E,P),j=i.project(M,P),X=i.project(M,k),Z=i.project(E,k);let oe=Math.min(B.x,j.x,X.x,Z.x),de=Math.min(B.y,j.y,X.y,Z.y),me=Math.max(B.x,j.x,X.x,Z.x),Se=Math.max(B.y,j.y,X.y,Z.y);const be=s/16;function ae(we,Ie,Ge,Ze,Ye,tt){const vt=(Ge+Ye)/2,kt=(Ze+tt)/2,It=i.project(Ve(vt),We(kt)),Dt=Math.max(0,oe-It.x,de-It.y,It.x-me,It.y-Se);oe=Math.min(oe,It.x),me=Math.max(me,It.x),de=Math.min(de,It.y),Se=Math.max(Se,It.y),Dt>be&&(ae(we,It,Ge,Ze,vt,kt),ae(It,Ie,vt,kt,Ye,tt))}ae(B,j,h,v,p,v),ae(j,X,p,v,p,x),ae(X,Z,p,x,h,x),ae(Z,B,h,x,h,v),oe-=be,de-=be,me+=be,Se+=be;const _e=1/Math.max(me-oe,Se-de);return{scale:_e,x:oe*_e,y:de*_e,x2:me*_e,y2:Se*_e,projection:i}}function VL(l,{x:i,y:s},h=0){return new Zt(((i-h)*l.scale-l.x)*Qt,(s*l.scale-l.y)*Qt)}const XH=H(new Float32Array(16));class wg{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,s){return{x:0,y:0,z:0}}unproject(i,s){return new ce(0,0)}projectTilePoint(i,s,h){return{x:i,y:s,z:0}}locationPoint(i,s,h,p=!0){return i._coordinatePoint(i.locationCoordinate(s,h),p)}pixelsPerMeter(i,s){return Re(1,i)*s}pixelSpaceConversion(i,s,h){return 1}farthestPixelDistance(i){return UL(i,i.pixelsPerMeter)}pointCoordinate(i,s,h,p){const v=i.horizonLineFromTop(!1),x=new Zt(s,Math.max(v,h));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,p))}pointCoordinate3D(i,s,h){const p=new Zt(s,h);if(i.elevation)return i.elevation.pointCoordinate(p);{const v=this.pointCoordinate(i,p.x,p.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(i,s){if(i.elevation&&i.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(i,s.x,s.y);const h=i.horizonLineFromTop();return s.y<h}createInversionMatrix(i,s){return XH}createTileMatrix(i,s,h){let p,v,x;const E=h.canonical,M=H(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=_b(E,this);p=1,v=P.x+h.wrap*P.scale,x=P.y,ne(M,M,[p/P.scale,p/P.scale,i.pixelsPerMeter/s])}else p=s/i.zoomScale(E.z),v=(E.x+Math.pow(2,E.z)*h.wrap)*p,x=E.y*p;return re(M,M,[v,x,0]),ne(M,M,[p/Qt,p/Qt,1]),M}upVector(i,s,h){return[0,0,1]}upVectorScale(i,s,h){return{metersToTile:1}}}class ZH extends wg{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[s,h]=this.parallels=i.parallels||[29.5,45.5],p=Math.sin(Y(s));this.n=(p+Math.sin(Y(h)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(i,s){const{n:h,c:p,r0:v}=this,x=Y(i-this.center[0]),E=Y(s),M=Math.sqrt(p-2*h*Math.sin(E))/h;return{x:M*Math.sin(x*h),y:M*Math.cos(x*h)-v,z:0}}unproject(i,s){const{n:h,c:p,r0:v}=this,x=v+s;let E=Math.atan2(i,Math.abs(x))*Math.sign(x);x*h<0&&(E-=Math.PI*Math.sign(i)*Math.sign(x));const M=Y(this.center[0])*h;E=Je(E,-Math.PI-M,Math.PI-M);const P=Fe(ie(E/h)+this.center[0],-180,180),k=Math.asin(Fe((p-(i*i+x*x)*h*h)/(2*h),-1,1)),B=Fe(ie(k),-85.051129,rt);return new ce(P,B)}}const vb=1.340264,xb=-.081106,bb=893e-6,wb=.003796,SS=Math.sqrt(3)/2;class YH extends wg{project(i,s){s=s/180*Math.PI,i=i/180*Math.PI;const h=Math.asin(SS*Math.sin(s)),p=h*h,v=p*p*p;return{x:.5*(i*Math.cos(h)/(SS*(vb+3*xb*p+v*(7*bb+9*wb*p)))/Math.PI+.5),y:1-.5*(h*(vb+xb*p+v*(bb+wb*p))/Math.PI+1),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI;let h=s=(2*(1-s)-1)*Math.PI,p=h*h,v=p*p*p;for(let k,B,j,X=0;X<12&&(B=h*(vb+xb*p+v*(bb+wb*p))-s,j=vb+3*xb*p+v*(7*bb+9*wb*p),k=B/j,h=Fe(h-k,-Math.PI/3,Math.PI/3),p=h*h,v=p*p*p,!(Math.abs(k)<1e-12));++X);const x=SS*i*(vb+3*xb*p+v*(7*bb+9*wb*p))/Math.cos(h),E=Math.asin(Math.sin(h)/SS),M=Fe(180*x/Math.PI,-180,180),P=Fe(180*E/Math.PI,-85.051129,rt);return new ce(M,P)}}class KH extends wg{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,s){return{x:.5+i/360,y:.5-s/360,z:0}}unproject(i,s){const h=360*(i-.5),p=Fe(360*(.5-s),-85.051129,rt);return new ce(h,p)}}const h0=Math.PI/2;function TS(l){return Math.tan((h0+l)/2)}class JH extends wg{constructor(i){super(i),this.center=i.center||[0,30];const[s,h]=this.parallels=i.parallels||[30,30];let p=Y(s),v=Y(h);this.southernCenter=p+v<0,this.southernCenter&&(p=-p,v=-v);const x=Math.cos(p),E=TS(p);this.n=p===v?Math.sin(p):Math.log(x/Math.cos(v))/Math.log(TS(v)/E),this.f=x*Math.pow(TS(p),this.n)/this.n}project(i,s){s=Y(s),this.southernCenter&&(s=-s),i=Y(i-this.center[0]);const h=1e-6,{n:p,f:v}=this;v>0?s<-h0+h&&(s=-h0+h):s>h0-h&&(s=h0-h);const x=v/Math.pow(TS(s),p);let E=x*Math.sin(p*i),M=v-x*Math.cos(p*i);return E=.5*(E/Math.PI+.5),M=.5*(M/Math.PI+.5),{x:E,y:this.southernCenter?M:1-M,z:0}}unproject(i,s){i=(2*i-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:h,f:p}=this,v=p-s,x=Math.sign(v),E=Math.sign(h)*Math.sqrt(i*i+v*v);let M=Math.atan2(i,Math.abs(v))*x;v*h<0&&(M-=Math.PI*Math.sign(i)*x);const P=Fe(ie(M/h)+this.center[0],-180,180),k=Fe(ie(2*Math.atan(Math.pow(p/E,1/h))-h0),-85.051129,rt);return new ce(P,this.southernCenter?-k:k)}}class $L extends wg{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,s){return{x:ze(i),y:ke(s),z:0}}unproject(i,s){const h=Ve(i),p=We(s);return new ce(h,p)}}const HL=Y(rt);class QH extends wg{project(i,s){const h=(s=Y(s))*s,p=h*h;return{x:.5*((i=Y(i))*(.8707-.131979*h+p*(p*(.003971*h-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+h*(.015085+p*(.028874*h-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI;let h=s=(2*(1-s)-1)*Math.PI,p=25,v=0,x=h*h;do{x=h*h;const P=x*x;v=(h*(1.007226+x*(.015085+P*(.028874*x-.044475-.005916*P)))-s)/(1.007226+x*(.045255+P*(.259866*x-.311325-.005916*11*P))),h=Fe(h-v,-HL,HL)}while(Math.abs(v)>1e-6&&--p>0);x=h*h;const E=Fe(ie(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),M=ie(h);return new ce(E,M)}}const GL=Y(rt);class eG extends wg{project(i,s){s=Y(s),i=Y(i);const h=Math.cos(s),p=2/Math.PI,v=Math.acos(h*Math.cos(i/2)),x=Math.sin(v)/v,E=.5*(i*p+2*h*Math.sin(i/2)/x)||0,M=.5*(s+Math.sin(s)/x)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(i,s){let h=i=(2*i-.5)*Math.PI,p=s=(2*(1-s)-1)*Math.PI,v=25;const x=1e-6;let E=0,M=0;do{const P=Math.cos(p),k=Math.sin(p),B=2*k*P,j=k*k,X=P*P,Z=Math.cos(h/2),oe=Math.sin(h/2),de=2*Z*oe,me=oe*oe,Se=1-X*Z*Z,be=Se?1/Se:0,ae=Se?Math.acos(P*Z)*Math.sqrt(1/Se):0,_e=.5*(2*ae*P*oe+2*h/Math.PI)-i,we=.5*(ae*k+p)-s,Ie=.5*be*(X*me+ae*P*Z*j)+1/Math.PI,Ge=be*(de*B/4-ae*k*oe),Ze=.125*be*(B*oe-ae*k*X*de),Ye=.5*be*(j*Z+ae*me*P)+.5,tt=Ge*Ze-Ye*Ie;E=(we*Ge-_e*Ye)/tt,M=(_e*Ze-we*Ie)/tt,h=Fe(h-E,-Math.PI,Math.PI),p=Fe(p-M,-GL,GL)}while((Math.abs(E)>x||Math.abs(M)>x)&&--v>0);return new ce(ie(h),ie(p))}}class qL extends wg{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Y(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,s){const{scale:h,cosPhi:p}=this;return{x:Y(i)*p*h+.5,y:-Math.sin(Y(s))/p*h+.5,z:0}}unproject(i,s){const{scale:h,cosPhi:p}=this,v=-(s-.5)/h,x=Fe(ie((i-.5)/h)/p,-180,180),E=Math.asin(Fe(v*p,-1,1)),M=Fe(ie(E),-85.051129,rt);return new ce(x,M)}}class tG extends $L{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,s,h){const p=lg(i,s,h);return Hn(p,p,Jp(ou(h))),{x:p[0],y:p[1],z:p[2]}}locationPoint(i,s,h){const p=he(s.lat,s.lng),v=en([],p),x=h?i._centerAltitude+h:i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(s),i._centerAltitude):i._centerAltitude;ht(p,p,v,Re(1,0)*Qt*x);const E=H(new Float64Array(16));return W(E,i.pixelMatrix,i.globeMatrix),Hn(p,p,E),new Zt(p[0],p[1])}pixelsPerMeter(i,s){return Re(1,0)*s}pixelSpaceConversion(i,s,h){const p=Re(1,i)*s,v=jn(Re(1,45)*s,p,h);return this.pixelsPerMeter(i,s)/v}createTileMatrix(i,s,h){const p=Ov(ou(h.canonical));return W(new Float64Array(16),i.globeMatrix,p)}createInversionMatrix(i,s){const{center:h}=i,p=Jp(ou(s));return ue(p,p,Y(h.lng)),se(p,p,Y(h.lat)),ne(p,p,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(i,s,h,p){return Yp(i,s,h,!0)||new ft(0,0)}pointCoordinate3D(i,s,h){const p=this.pointCoordinate(i,s,h,0);return[p.x,p.y,p.z]}isPointAboveHorizon(i,s){return!Yp(i,s.x,s.y,!1)}farthestPixelDistance(i){const s=function(p,v){const x=p.cameraToCenterDistance,E=p._centerAltitude*v,M=p._camera,P=p._camera.forward(),k=mt([],je([],P,-x),[0,0,E]),B=p.worldSize/(2*Math.PI),j=[0,0,-B],X=p.width/p.height,Z=Math.tan(p.fovAboveCenter),oe=je([],M.up(),Z),de=je([],M.right(),Z*X),me=en([],mt([],mt([],P,oe),de)),Se=[];let be;if(new tl(k,me).closestPointOnSphere(j,B,Se)){const ae=mt([],Se,j),_e=Ln([],ae,k);be=Math.cos(p.fovAboveCenter)*et(_e)}else{const ae=Ln([],k,j),_e=Ln([],j,k);en(_e,_e);const we=et(ae)-B;be=Math.sqrt(we*(we+2*B));const Ie=Math.acos(be/(B+we))-Math.acos(jt(P,_e));be*=Math.cos(Ie)}return 1.01*be}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),h=md(i.zoom);if(h>0){const p=UL(i,Re(1,i.center.lat)*i.worldSize),v=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return jn(s,p+v*(1-Math.cos(x)),Math.pow(h,10))}return s}upVector(i,s,h){return lg(s,h,i,1)}upVectorScale(i){return{metersToTile:ru(Zy(ou(i)))}}}function WL(l){const i=l.parallels,s=!!i&&Math.abs(i[0]+i[1])<.01;switch(l.name){case"mercator":return new $L(l);case"equirectangular":return new KH(l);case"naturalEarth":return new QH(l);case"equalEarth":return new YH(l);case"winkelTripel":return new eG(l);case"albers":return s?new qL(l):new ZH(l);case"lambertConformalConic":return s?new qL(l):new JH(l);case"globe":return new tG(l)}throw new Error(`Invalid projection name: ${l.name}`)}const nG=rh.VectorTileFeature.types,iG=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ES(l,i,s,h,p,v,x,E,M,P,k,B,j){const X=E?Math.min(bg,Math.round(E[0])):0,Z=E?Math.min(bg,Math.round(E[1])):0;l.emplaceBack(i,s,Math.round(32*h),Math.round(32*p),v,x,(X<<1)+(M?1:0),Z,16*P,16*k,256*B,256*j)}function CS(l,i,s){l.emplaceBack(i,s)}function AS(l,i,s,h,p,v,x){l.emplaceBack(i,s,h,p,v,x)}function MS(l,i,s,h,p){l.emplaceBack(i,s,h,p),l.emplaceBack(i,s,h,p),l.emplaceBack(i,s,h,p),l.emplaceBack(i,s,h,p)}function rG(l){for(const i of l.sections)if(Kc(i.text))return!0;return!1}class zA{constructor(i){this.layoutVertexArray=new eu,this.indexArray=new xo,this.programConfigurations=i,this.segments=new oo,this.dynamicLayoutVertexArray=new ec,this.opacityVertexArray=new Yu,this.placedSymbolArray=new By,this.iconTransitioningVertexArray=new tu,this.globeExtVertexArray=new Qs,this.zOffsetVertexArray=new ld}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(i,s,h,p,v){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_H.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,xH.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,iG,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=i.createVertexBuffer(this.iconTransitioningVertexArray,wH.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,vH.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||v)&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,bH.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}hn(zA,"SymbolBuffers");class BA{constructor(i,s,h){this.layoutVertexArray=new i,this.layoutAttributes=s,this.indexArray=new h,this.segments=new oo,this.collisionVertexArray=new og,this.collisionVertexArrayExt=new ec}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,SH.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,TH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}hn(BA,"CollisionBuffers");class RS{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.lut=i.lut,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.fqid),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=H([]),this.placementViewportMatrix=H([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wL(this.zoom,s["text-size"]),this.iconSizeData=wL(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(x=>rc[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new zA(new nh(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("text")||i.startsWith("symbol"))),this.icon=new zA(new nh(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("icon")||i.startsWith("symbol"))),this.glyphOffsetArray=new cs,this.lineVertexArray=new Ts,this.symbolInstances=new Fy}calculateGlyphDependencies(i,s,h,p,v){for(const x of i){const E=x.codePointAt(0);if(E===void 0)break;if(s[E]=!0,p&&v&&E<=65535){const M=fb[x];M&&(s[M.charCodeAt(0)]=!0)}}}updateFootprints(i,s){}updateReplacement(i,s){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const h=s.getReplacementRegionsForTile(i.toUnwrapped(),!0);return!gg(this.activeReplacements,h)&&(this.activeReplacements=h,!0)}populate(i,s,h,p){const v=this.layers[0],x=v.layout,E=this.projection.name==="globe",M=x.get("text-font"),P=x.get("text-field"),k=x.get("icon-image"),[B,j]=x.get("icon-size-scale-range"),X=Fe(s.scaleFactor||1,B,j),Z=(P.value.kind!=="constant"||P.value.value instanceof Ls&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),oe=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,de=x.get("symbol-sort-key");if(this.features=[],!Z&&!oe)return;const me=s.iconDependencies,Se=s.glyphDependencies,be=s.availableImages,ae=new xr(this.zoom);for(const{feature:_e,id:we,index:Ie,sourceLayerIndex:Ge}of i){const Ze=v._featureFilter.needGeometry,Ye=_n(_e,Ze);if(!v._featureFilter.filter(ae,Ye,h))continue;if(Ze||(Ye.geometry=pn(_e,h,p)),E&&_e.type!==1&&h.z<=5){const Dt=Ye.geometry,$t=.98078528056,yt=(Pt,gt)=>jt(lg(Pt.x,Pt.y,h,1),lg(gt.x,gt.y,h,1))<$t;for(let Pt=0;Pt<Dt.length;Pt++)Dt[Pt]=Ot(Dt[Pt],yt)}let tt,vt;if(Z){const Dt=v.getValueAndResolveTokens("text-field",Ye,h,be),$t=Ls.factory(Dt);rG($t)&&(this.hasRTLText=!0),(!this.hasRTLText||Gu()==="unavailable"||this.hasRTLText&&vl.isParsed())&&(tt=CH($t,v,Ye))}if(oe){const Dt=v.getValueAndResolveTokens("icon-image",Ye,h,be);vt=typeof Dt=="string"?Ys.build(Dt):Dt}if(!tt&&!vt)continue;const kt=this.sortFeaturesByKey?de.evaluate(Ye,{},h):void 0,It={id:we,text:tt,icon:vt,index:Ie,sourceLayerIndex:Ge,geometry:Ye.geometry,properties:_e.properties,type:nG[_e.type],sortKey:kt};if(this.features.push(It),vt){const Dt=this.layers[0]._unevaluatedLayout._values,{iconPrimary:$t,iconSecondary:yt}=BL(vt,this.iconSizeData,Dt["icon-size"],h,this.zoom,It,this.pixelRatio,X),Pt=$t.id.toString();if(me.has(Pt)?me.get(Pt).push($t):me.set(Pt,[$t]),yt){const gt=yt.id.toString();me.has(gt)?me.get(gt).push(yt):me.set(gt,[yt])}}if(tt){const Dt=M.evaluate(Ye,{},h).join(","),$t=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rc.vertical)>=0;for(const yt of tt.sections)if(yt.image){const Pt=yt.image.getPrimary().scaleSelf(this.pixelRatio),gt=Pt.id.toString(),_t=me.get(gt)||[];_t.push(Pt),me.set(gt,_t)}else{const Pt=Pp(tt.toString()),gt=yt.fontStack||Dt,_t=Se[gt]=Se[gt]||{};this.calculateGlyphDependencies(yt.text,_t,$t,this.allowVerticalPlacement,Pt)}}}if(x.get("symbol-placement")==="line"&&(this.features=function(_e){const we={},Ie={},Ge=[];let Ze=0;function Ye(It){Ge.push(_e[It]),Ze++}function tt(It,Dt,$t){const yt=Ie[It];return delete Ie[It],Ie[Dt]=yt,Ge[yt].geometry[0].pop(),Ge[yt].geometry[0]=Ge[yt].geometry[0].concat($t[0]),yt}function vt(It,Dt,$t){const yt=we[Dt];return delete we[Dt],we[It]=yt,Ge[yt].geometry[0].shift(),Ge[yt].geometry[0]=$t[0].concat(Ge[yt].geometry[0]),yt}function kt(It,Dt,$t){const yt=$t?Dt[0][Dt[0].length-1]:Dt[0][0];return`${It}:${yt.x}:${yt.y}`}for(let It=0;It<_e.length;It++){const Dt=_e[It],$t=Dt.geometry,yt=Dt.text?Dt.text.toString():null;if(!yt){Ye(It);continue}const Pt=kt(yt,$t),gt=kt(yt,$t,!0);if(Pt in Ie&&gt in we&&Ie[Pt]!==we[gt]){const _t=vt(Pt,gt,$t),Gt=tt(Pt,gt,Ge[_t].geometry);delete we[Pt],delete Ie[gt],Ie[kt(yt,Ge[Gt].geometry,!0)]=Gt,Ge[_t].geometry=null}else Pt in Ie?tt(Pt,gt,$t):gt in we?vt(Pt,gt,$t):(Ye(It),we[Pt]=Ze-1,Ie[gt]=Ze-1)}return Ge.filter(It=>It.geometry)}(this.features)),x.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",s.elevationFeatures){!this.elevationFeatures&&s.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const _e of s.elevationFeatures)this.elevationFeatureIdToIndex.set(_e.id,this.elevationFeatures.length),this.elevationFeatures.push(_e)}}else x.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((_e,we)=>_e.sortKey-we.sortKey)}update(i,s,h,p,v,x,E){this.text.programConfigurations.updatePaintArrays(i,s,v,h,p,x,E),this.icon.programConfigurations.updatePaintArrays(i,s,v,h,p,x,E)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let i=!1;for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);if(h.elevationFeatureIndex===65535)continue;const p=this.elevationFeatures[h.elevationFeatureIndex];if(p){const v=.05+p.pointElevation(new Zt(h.tileAnchorX,h.tileAnchorY));h.zOffset!==v&&(i=!0,h.zOffset=v)}}i&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const i=(v,x,E)=>{h+=x,h>v.length&&v.resize(h);for(let M=-x;M<0;M++)v.emplace(M+h,E)},s=(v,x,E)=>{p+=x,p>v.length&&v.resize(p);for(let M=-x;M<0;M++)v.emplace(M+p,E)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let h=0,p=0;for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v),{numHorizontalGlyphVertices:E,numVerticalGlyphVertices:M,numIconVertices:P}=x,k=x.zOffset,B=P>0;if((E>0||M>0)&&(i(this.text.zOffsetVertexArray,E,k),i(this.text.zOffsetVertexArray,M,k)),B){const{placedIconSymbolIndex:j,verticalPlacedIconSymbolIndex:X}=x;j>=0&&s(this.icon.zOffsetVertexArray,P,k),X>=0&&s(this.icon.zOffsetVertexArray,x.numVerticalIconVertices,k)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=WL(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,s){const h=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:p,y:v}of s)this.lineVertexArray.emplaceBack(p,v);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe,de){const me=i.indexArray,Se=i.layoutVertexArray,be=i.globeExtVertexArray,ae=i.segments.prepareSegment(4*s.length,Se,me,this.canOverlap?x.sortKey:void 0),_e=this.glyphOffsetArray.length,we=ae.vertexLength,Ie=this.allowVerticalPlacement&&E===rc.vertical?Math.PI/2:0,Ge=x.text&&x.text.sections;for(let Ye=0;Ye<s.length;Ye++){const{tl:tt,tr:vt,bl:kt,br:It,texPrimary:Dt,texSecondary:$t,pixelOffsetTL:yt,pixelOffsetBR:Pt,minFontScaleX:gt,minFontScaleY:_t,glyphOffset:Gt,isSDF:Xt,sectionIndex:En}=s[Ye],gn=ae.vertexLength,rn=Gt[1];if(ES(Se,P.x,P.y,tt.x,rn+tt.y,Dt.x,Dt.y,h,Xt,yt.x,yt.y,gt,_t),ES(Se,P.x,P.y,vt.x,rn+vt.y,Dt.x+Dt.w,Dt.y,h,Xt,Pt.x,yt.y,gt,_t),ES(Se,P.x,P.y,kt.x,rn+kt.y,Dt.x,Dt.y+Dt.h,h,Xt,yt.x,Pt.y,gt,_t),ES(Se,P.x,P.y,It.x,rn+It.y,Dt.x+Dt.w,Dt.y+Dt.h,h,Xt,Pt.x,Pt.y,gt,_t),M){const{x:Ht,y:ri,z:xn}=M.anchor,[bn,Qn,gi]=M.up;AS(be,Ht,ri,xn,bn,Qn,gi),AS(be,Ht,ri,xn,bn,Qn,gi),AS(be,Ht,ri,xn,bn,Qn,gi),AS(be,Ht,ri,xn,bn,Qn,gi),MS(i.dynamicLayoutVertexArray,Ht,ri,xn,Ie)}else MS(i.dynamicLayoutVertexArray,P.x,P.y,P.z,Ie);if(de){const Ht=$t||Dt;CS(i.iconTransitioningVertexArray,Ht.x,Ht.y),CS(i.iconTransitioningVertexArray,Ht.x+Ht.w,Ht.y),CS(i.iconTransitioningVertexArray,Ht.x,Ht.y+Ht.h),CS(i.iconTransitioningVertexArray,Ht.x+Ht.w,Ht.y+Ht.h)}me.emplaceBack(gn,gn+1,gn+2),me.emplaceBack(gn+1,gn+2,gn+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Gt[0]),Ye!==s.length-1&&En===s[Ye+1].sectionIndex||i.programConfigurations.populatePaintArrays(Se.length,x,x.index,{},X,Z,oe,Ge&&Ge[En])}const Ze=M?M.anchor:P;i.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Ze.z,P.x,P.y,_e,this.glyphOffsetArray.length-_e,we,k,B,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],E,0,0,0,j,0)}_commitLayoutVertex(i,s,h,p,v,x,E){i.emplaceBack(s,h,p,v,x,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(i,s,h,p,v,x,E){const M=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),P=M.vertexLength,k=E.tileAnchorX,B=E.tileAnchorY;for(let X=0;X<4;X++)h.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(h.collisionVertexArrayExt,s,i.padding,E.zOffset),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,k,B,new Zt(i.x1,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,k,B,new Zt(i.x2,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,k,B,new Zt(i.x2,i.y2)),this._commitLayoutVertex(h.layoutVertexArray,p,v,x,k,B,new Zt(i.x1,i.y2)),M.vertexLength+=4;const j=h.indexArray;j.emplaceBack(P,P+1),j.emplaceBack(P+1,P+2),j.emplaceBack(P+2,P+3),j.emplaceBack(P+3,P),M.primitiveLength+=4}_addTextDebugCollisionBoxes(i,s,h,p,v,x){for(let E=p;E<v;E++){const M=h.get(E),P=this.getSymbolInstanceTextSize(i,x,s,E);this._addCollisionDebugVertices(M,P,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,s,h,p,v,x){for(let E=p;E<v;E++){const M=h.get(E),P=this.getSymbolInstanceIconSize(i,s,x.placedIconSymbolIndex);this._addCollisionDebugVertices(M,P,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,s,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new BA(Ja,lL.members,tu),this.iconCollisionBox=new BA(Ja,lL.members,tu);const p=mb(this.iconSizeData,i),v=mb(this.textSizeData,i,h);for(let x=0;x<this.symbolInstances.length;x++){const E=this.symbolInstances.get(x);this._addTextDebugCollisionBoxes(v,i,s,E.textBoxStartIndex,E.textBoxEndIndex,E),this._addTextDebugCollisionBoxes(v,i,s,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E),this._addIconDebugCollisionBoxes(p,i,s,E.iconBoxStartIndex,E.iconBoxEndIndex,E),this._addIconDebugCollisionBoxes(p,i,s,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E)}}getSymbolInstanceTextSize(i,s,h,p){const v=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:p),x=RA(this.textSizeData,i,v)/As;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,s,h){const p=this.icon.placedSymbolArray.get(h),v=RA(this.iconSizeData,i,p);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(i,s,h,p){i.emplaceBack(s,-h,-h,p),i.emplaceBack(s,h,-h,p),i.emplaceBack(s,h,h,p),i.emplaceBack(s,-h,h,p)}_updateTextDebugCollisionBoxes(i,s,h,p,v,x,E){for(let M=p;M<v;M++){const P=h.get(M),k=this.getSymbolInstanceTextSize(i,x,s,M);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,k,P.padding,x.zOffset)}}_updateIconDebugCollisionBoxes(i,s,h,p,v,x,E){for(let M=p;M<v;M++){const P=h.get(M),k=this.getSymbolInstanceIconSize(i,s,x.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,k,P.padding,x.zOffset)}}updateCollisionDebugBuffers(i,s,h,p){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const v=mb(this.iconSizeData,i,p),x=mb(this.textSizeData,i,h);for(let E=0;E<this.symbolInstances.length;E++){const M=this.symbolInstances.get(E);this._updateTextDebugCollisionBoxes(x,i,s,M.textBoxStartIndex,M.textBoxEndIndex,M,h),this._updateTextDebugCollisionBoxes(x,i,s,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M,h),this._updateIconDebugCollisionBoxes(v,i,s,M.iconBoxStartIndex,M.iconBoxEndIndex,M,p),this._updateIconDebugCollisionBoxes(v,i,s,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M,p)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,s,h,p,v,x,E,M,P){const k={};if(s<h){const{x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae,featureIndex:_e}=i.get(s);k.textBox={x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae},k.textFeatureIndex=_e}if(p<v){const{x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae,featureIndex:_e}=i.get(p);k.verticalTextBox={x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae},k.verticalTextFeatureIndex=_e}if(x<E){const{x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae,featureIndex:_e}=i.get(x);k.iconBox={x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae},k.iconFeatureIndex=_e}if(M<P){const{x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae,featureIndex:_e}=i.get(M);k.verticalIconBox={x1:B,y1:j,x2:X,y2:Z,padding:oe,projectedAnchorX:de,projectedAnchorY:me,projectedAnchorZ:Se,tileAnchorX:be,tileAnchorY:ae},k.verticalIconFeatureIndex=_e}return k}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(i,s){const h=i.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)i.indexArray.emplaceBack(v,v+1,v+2),i.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(i),h=Math.cos(i),p=[],v=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const M=this.symbolInstances.get(E);p.push(0|Math.round(s*M.tileAnchorX+h*M.tileAnchorY)),v.push(M.featureIndex)}return x.sort((E,M)=>p[E]-p[M]||v[M]-v[E]),x}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let i=0;i<this.symbolInstances.length;++i)this.symbolInstanceIndexesSortedZOffset.push(i)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((i,s)=>this.symbolInstances.get(s).zOffset-this.symbolInstances.get(i).zOffset)}addToSortKeyRanges(i,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:v,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:P}=h;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),v>=0&&v!==p&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&x!==v&&x!==p&&this.addIndicesForPlacedSymbol(this.text,x),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let XL,ZL,FA;hn(RS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),RS.addDynamicAttributes=MS;class YL{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:Iu,this.defaultValue=i}evaluate(i){if(i.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(i.formattedSection))return s.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hn(YL,"FormatSectionOverride",{omit:["defaultValue"]});const NA=()=>FA||(FA={layout:XL||(XL=new co({"symbol-placement":new Kt(at.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(at.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(at.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new un(at.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(at.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Kt(at.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Kt(at.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Kt(at.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Kt(at.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(at.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(at.layout_symbol["icon-rotation-alignment"]),"icon-size":new un(at.layout_symbol["icon-size"]),"icon-size-scale-range":new Kt(at.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new un(at.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new un(at.layout_symbol["icon-text-fit-padding"]),"icon-image":new un(at.layout_symbol["icon-image"]),"icon-rotate":new un(at.layout_symbol["icon-rotate"]),"icon-padding":new Kt(at.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(at.layout_symbol["icon-keep-upright"]),"icon-offset":new un(at.layout_symbol["icon-offset"]),"icon-anchor":new un(at.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(at.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(at.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(at.layout_symbol["text-rotation-alignment"]),"text-field":new un(at.layout_symbol["text-field"]),"text-font":new un(at.layout_symbol["text-font"]),"text-size":new un(at.layout_symbol["text-size"]),"text-size-scale-range":new Kt(at.layout_symbol["text-size-scale-range"]),"text-max-width":new un(at.layout_symbol["text-max-width"]),"text-line-height":new un(at.layout_symbol["text-line-height"]),"text-letter-spacing":new un(at.layout_symbol["text-letter-spacing"]),"text-justify":new un(at.layout_symbol["text-justify"]),"text-radial-offset":new un(at.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(at.layout_symbol["text-variable-anchor"]),"text-anchor":new un(at.layout_symbol["text-anchor"]),"text-max-angle":new Kt(at.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(at.layout_symbol["text-writing-mode"]),"text-rotate":new un(at.layout_symbol["text-rotate"]),"text-padding":new Kt(at.layout_symbol["text-padding"]),"text-keep-upright":new Kt(at.layout_symbol["text-keep-upright"]),"text-transform":new un(at.layout_symbol["text-transform"]),"text-offset":new un(at.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(at.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Kt(at.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(at.layout_symbol["text-optional"]),visibility:new Kt(at.layout_symbol.visibility)})),paint:ZL||(ZL=new co({"icon-opacity":new un(at.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new un(at.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new un(at.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new un(at.paint_symbol["text-emissive-strength"]),"icon-color":new un(at.paint_symbol["icon-color"]),"icon-halo-color":new un(at.paint_symbol["icon-halo-color"]),"icon-halo-width":new un(at.paint_symbol["icon-halo-width"]),"icon-halo-blur":new un(at.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(at.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(at.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Kt(at.paint_symbol["icon-image-cross-fade"]),"text-opacity":new un(at.paint_symbol["text-opacity"]),"text-occlusion-opacity":new un(at.paint_symbol["text-occlusion-opacity"]),"text-color":new un(at.paint_symbol["text-color"],{runtimeType:ua,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new un(at.paint_symbol["text-halo-color"]),"text-halo-width":new un(at.paint_symbol["text-halo-width"]),"text-halo-blur":new un(at.paint_symbol["text-halo-blur"]),"text-translate":new Kt(at.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(at.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Kt(at.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Kt(at.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Kt(at.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Kt(at.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new un(at.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},FA);class IS extends zs{constructor(i,s,h,p){super(i,NA(),s,h,p),this._colorAdjustmentMatrix=H([]),this.hasInitialOcclusionOpacityProperties=i.paint!==void 0&&("icon-occlusion-opacity"in i.paint||"text-occlusion-opacity"in i.paint)}recalculate(i,s){super.recalculate(i,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(i,s,h,p){return this._saturation===i&&this._contrast===s&&this._brightnessMin===h&&this._brightnessMax===p||(this._colorAdjustmentMatrix=function(v,x,E,M){v=Go(v),x=So(x);const P=U(),k=v/3,B=1-2*k,j=[B,k,k,0,k,B,k,0,k,k,B,0,0,0,0,1],X=.5-.5*x,Z=M-E;return W(P,[Z,0,0,0,0,Z,0,0,0,0,Z,0,E,E,E,1],[x,0,0,0,0,x,0,0,0,0,x,0,X,X,X,1]),W(P,P,j),P}(i,s,h,p),this._saturation=i,this._contrast=s,this._brightnessMin=h,this._brightnessMax=p),this._colorAdjustmentMatrix}getValueAndResolveTokens(i,s,h,p){const v=this.layout.get(i).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Kl(x.value)||!v?v:function(E,M){return M.replace(/{([^{}]+)}/g,(P,k)=>k in E?String(E[k]):"")}(s.properties,v)}createBucket(i){return new RS(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of NA().paint.overridableProperties){if(!IS.hasPaintOverride(this.layout,i))continue;const s=this.paint.get(i),h=new YL(s),p=new Ip(h,s.property.specification,this.scope,this.options);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new ro("source",p):new Bo("composite",p,s.value.zoomStops,s.value.interpolationType),this.paint._values[i]=new id(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(i,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&IS.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,s){const h=i.get("text-field"),p=NA().paint.properties[s];let v=!1;const x=E=>{for(const M of E)if(p.overrides&&p.overrides.hasOverride(M))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Ls)x(h.value.value.sections);else if(h.value.kind==="source"){const E=P=>{v||(P instanceof vi&&To(P.value)===cp?x(P.value.sections):P instanceof Ul?x(P.sections):P.eachChild(E))},M=h.value;M._styleExpression&&E(M._styleExpression.expression)}return v}getProgramIds(){return["symbol"]}getDefaultProgramParams(i,s,h){return{config:new iu(this,{zoom:s,lut:h}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let KL,JL,QL,ek;var jA=qi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function UA(l){switch(l){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function VA(l){switch(l){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class $A{constructor(i,s,h,p){this.context=i,this.format=h,this.useMipmap=p&&p.useMipmap,this.texture=i.gl.createTexture(),this.update(s,{premultiply:p&&p.premultiply})}update(i,s){const h=i&&i instanceof HTMLVideoElement&&i.width===0?i.videoWidth:i.width,p=i&&i instanceof HTMLVideoElement&&i.height===0?i.videoHeight:i.height,{context:v}=this,{gl:x}=v,{x:E,y:M}=s&&s.position?s.position:{x:0,y:0},P=E+h,k=M+p;!this.size||this.size[0]===P&&this.size[1]===k||(x.bindTexture(x.TEXTURE_2D,null),x.deleteTexture(this.texture),this.texture=x.createTexture(),this.size=null),x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA8&&(!s||s.premultiply!==!1));const B=i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||ImageBitmap&&i instanceof ImageBitmap;if(!this.size&&P>0&&k>0){const j=this.useMipmap?Math.floor(Math.log2(Math.max(P,k)))+1:1;x.texStorage2D(x.TEXTURE_2D,j,this.format,P,k),this.size=[P,k]}if(this.size)if(B)x.texSubImage2D(x.TEXTURE_2D,0,E,M,UA(this.format),VA(this.format),i);else{const j=i.data;j&&x.texSubImage2D(x.TEXTURE_2D,0,E,M,h,p,UA(this.format),VA(this.format),j)}this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(i,s,h=!1){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),i!==this.minFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap&&!h?i===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),s!==this.wrapS&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrapS=s)}bindExtraParam(i,s,h,p){const{context:v}=this,{gl:x}=v;x.bindTexture(x.TEXTURE_2D,this.texture),s!==this.magFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,s),this.magFilter=s),i!==this.minFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.useMipmap?i===x.NEAREST?x.NEAREST_MIPMAP_NEAREST:x.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),h!==this.wrapS&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,h),this.wrapS=h),p!==this.wrapT&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,p),this.wrapT=p)}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class PS{constructor(i,s){this.context=i,this.texture=s}bind(i,s){const{context:h}=this,{gl:p}=h;p.bindTexture(p.TEXTURE_2D,this.texture),i!==this.minFilter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,i),this.minFilter=i),s!==this.wrapS&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,s),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,s),this.wrapS=s)}}function DS(l,i,s,h,p,v,x,E){const M=[l,i,1,s,h,1,p,v,1],P=[x,E,1],k=z([],M),[B,j,X]=On(P,P,k);return N(M,M,[B,0,0,0,j,0,0,0,X])}function tk(l,i,s,h,p,v,x,E){const M=function(P,k,B,j,X,Z,oe,de){const me=DS(0,0,1,0,1,1,0,1),Se=DS(P,k,B,j,X,Z,oe,de);return N(Se,Se,z([],me))}(l,i,s,h,p,v,x,E);return[M[2]/M[8]/Qt,M[5]/M[8]/Qt]}function OS(l){return[l[0],Math.min(Math.max(l[1],-85.051129),rt)]}class nk extends Ru{constructor(i,s,h,p){super(),this.id=i,this.dispatcher=h,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(p),this.options=s,this._dirty=!1}load(i,s){if(this._loaded=s||!1,this.fire(new fc("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return i&&(this.coordinates=i),this._loaded=!0,void this._finishLoading();this._imageRequest=Ih(this.map._requestManager.transformRequest(this.url,qd.Image),(h,p)=>{this._imageRequest=null,this._loaded=!0,h?this.fire(new sp(h)):p&&(this.image=p instanceof HTMLImageElement?qa.getImageData(p):p,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}setTexture(i){if(!(i.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new PS(this.map.painter.context,i.handle),this.width=i.dimensions[0],this.height=i.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new fc("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(i){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof PS||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(i){if(this.coordinates=i,this._boundsArray=void 0,this._unsupportedCoords=!1,!i.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let s=i[0][1],h=i[0][1];for(const v of i)v[1]>h&&(h=v[1]),v[1]<s&&(s=v[1]);const p=(h+s)/2;if(p>rt?this.onNorthPole=!0:p<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const v=i.map(ft.fromLngLat);this.tileID=function(x){let E=1/0,M=1/0,P=-1/0,k=-1/0;for(const oe of x)E=Math.min(E,oe.x),M=Math.min(M,oe.y),P=Math.max(P,oe.x),k=Math.max(k,oe.y);const B=Math.max(P-E,k-M),j=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),X=Math.pow(2,j);let Z=Math.floor((E+P)/2*X);return Z>1&&(Z-=1),new Rr(j,Z,Math.floor((M+k)/2*X))}(v),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new fc("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(i){for(const me in this.tiles){const Se=this.tiles[me];Se.state!=="loaded"&&(Se.state="loaded",Se.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const s=_b(new Rr(0,0,0),this.map.transform.projection),h=[s.projection.project(this.coordinates[0][0],this.coordinates[0][1]),s.projection.project(this.coordinates[1][0],this.coordinates[1][1]),s.projection.project(this.coordinates[2][0],this.coordinates[2][1]),s.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(me){const Se=me[1].x-me[0].x,be=me[1].y-me[0].y,ae=me[2].x-me[1].x,_e=me[2].y-me[1].y,we=me[3].x-me[2].x,Ie=me[3].y-me[2].y,Ge=me[0].x-me[3].x,Ze=me[0].y-me[3].y,Ye=Se*_e-ae*be,tt=ae*Ie-we*_e,vt=we*Ze-Ge*Ie,kt=Ge*be-Se*Ze;return Ye>0&&tt>0&&vt>0&&kt>0||Ye<0&&tt<0&&vt<0&&kt<0}(h))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const p=_b(this.tileID,this.map.transform.projection),[v,x,E,M]=this.coordinates.map(me=>{const Se=p.projection.project(me[0],me[1]);return VL(p,Se)._round()});this.perspectiveTransform=tk(v.x,v.y,x.x,x.y,E.x,E.y,M.x,M.y);const P=this._boundsArray=new Zu;P.emplaceBack(v.x,v.y,0,0),P.emplaceBack(x.x,x.y,Qt,0),P.emplaceBack(M.x,M.y,0,Qt),P.emplaceBack(E.x,E.y,Qt,Qt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=i.createVertexBuffer(P,jA.members),this.boundsSegments=oo.simpleSegment(0,0,4,2);const k=[],B=[OS((j=this.coordinates)[0]),OS(j[1]),OS(j[2]),OS(j[3])];var j;const[X,Z,oe,de]=function(me){let Se=me[0][0],be=Se,ae=me[0][1],_e=ae;for(let we=1;we<me.length;we++)me[we][0]<Se?Se=me[we][0]:me[we][0]>be&&(be=me[we][0]),me[we][1]<ae?ae=me[we][1]:me[we][1]>_e&&(_e=me[we][1]);return[Se,ae,be-Se,_e-ae]}(B);{const me=new Zu,[Se,be,ae,_e]=function(yt){let Pt=yt[0].x,gt=Pt,_t=yt[0].y,Gt=_t;for(let Xt=1;Xt<yt.length;Xt++)yt[Xt].x<Pt?Pt=yt[Xt].x:yt[Xt].x>gt&&(gt=yt[Xt].x),yt[Xt].y<_t?_t=yt[Xt].y:yt[Xt].y>Gt&&(Gt=yt[Xt].y);return[Pt,_t,gt-Pt,Gt-_t]}(h),we=yt=>[(yt.x-Se)/ae,(yt.y-be)/_e],[Ie,Ge,Ze,Ye]=h.map(we),tt=function(yt,Pt,gt,_t,Gt,Xt,En,gn){const rn=DS(0,0,1,0,1,1,0,1);return N(rn,rn,z([],DS(yt,Pt,gt,_t,Gt,Xt,En,gn)))}(Ie[0],Ie[1],Ge[0],Ge[1],Ze[0],Ze[1],Ye[0],Ye[1]);this.elevatedGlobePerspectiveTransform=tk(Ie[0],Ie[1],Ge[0],Ge[1],Ze[0],Ze[1],Ye[0],Ye[1]);const vt=(yt,Pt)=>{k.push(yt.lng);const gt=Math.round((yt.lng-X)/oe*Qt),_t=Math.round((yt.lat-Z)/de*Qt),Gt=we(Pt),Xt=On([],[Gt[0],Gt[1],1],tt),En=Math.round(Xt[0]/Xt[2]*Qt),gn=Math.round(Xt[1]/Xt[2]*Qt);me.emplaceBack(gt,_t,En,gn)},kt=h[3].x-h[0].x,It=h[3].y-h[0].y,Dt=h[2].x-h[1].x,$t=h[2].y-h[1].y;for(let yt=0;yt<65;yt++){const Pt=yt/64,gt=[h[0].x+Pt*kt,h[0].y+Pt*It],_t=[h[1].x+Pt*Dt,h[1].y+Pt*$t],Gt=_t[0]-gt[0],Xt=_t[1]-gt[1];for(let En=0;En<65;En++){const gn=En/64,rn={x:gt[0]+Gt*gn,y:gt[1]+Xt*gn};vt(s.projection.unproject(rn.x,rn.y),rn)}}this.elevatedGlobeVertexBuffer=i.createVertexBuffer(me,jA.members)}{this.maxLongitudeTriangleSize=0;let me=[],Se=new xo;const be=(ae,_e,we)=>{Se.emplaceBack(ae,_e,we);const Ie=k[ae],Ge=k[_e],Ze=k[we],Ye=Math.min(Math.min(Ie,Ge),Ze),tt=Math.max(Math.max(Ie,Ge),Ze)-Ye;tt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=tt),me.push(Ye+tt/2)};for(let ae=0;ae<64;ae++)for(let _e=0;_e<64;_e++){const we=65*ae+_e,Ie=we+1,Ge=we+65,Ze=Ge+1;be(we,Ge,Ie),be(Ie,Ge,Ze)}[me,Se]=function(ae,_e){const we=Array.from({length:ae.length},(Ze,Ye)=>Ye);we.sort((Ze,Ye)=>ae[Ze]-ae[Ye]);const Ie=[],Ge=new xo;for(let Ze=0;Ze<we.length;Ze++){const Ye=we[Ze];Ie.push(ae[Ye]);const tt=3*Ye,vt=tt+1;Ge.emplaceBack(_e.uint16[tt],_e.uint16[vt],_e.uint16[vt+1])}return[Ie,Ge]}(me,Se),this.elevatedGlobeTrianglesCenterLongitudes=me,this.elevatedGlobeIndexBuffer=i.createIndexBuffer(Se)}this.elevatedGlobeSegments=oo.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,oe/Qt,0,de/Qt,0,0,Z,X,0])}prepare(){const i=Object.keys(this.tiles).length!==0;if(this.tileID&&!i)return;const s=this.map.painter.context,h=s.gl;!this._dirty||this.texture instanceof PS||(this.texture?this.texture.update(this.image):(this.texture=new $A(s,this.image,h.RGBA8),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),i&&this._prepareData(s)}loadTile(i,s){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},s(null)):(i.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(i){const s=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!s)return null;const h=this.elevatedGlobeTrianglesCenterLongitudes;let p=(v=i+180)+360*Math.round((h[0]-v)/360);var v;const x=new oo,E=(B,j)=>{x.segments.push({vertexOffset:0,primitiveOffset:B,vertexLength:s.segments[0].vertexLength,primitiveLength:j,sortKey:void 0,vaos:{}})},M=.51*this.maxLongitudeTriangleSize;if(Math.abs(h[0]-p)<=M){const B=ds(h,0,h.length,p+M);return B===h.length||E(B,no(h,B+1,h.length,p+360-M)-B),x}p<h[0]&&(p+=360);const P=no(h,0,h.length,p-M);if(P===h.length)return E(0,h.length),x;E(0,P-0);const k=ds(h,P+1,h.length,p+M);return k!==h.length&&E(k,h.length-k),x}}const oG=(Math.pow(256,2)-1)/16907520;class ik extends zs{constructor(i,s,h,p){super(i,{layout:QL||(QL=new co({visibility:new Kt(at.layout_raster.visibility)})),paint:ek||(ek=new co({"raster-opacity":new Kt(at.paint_raster["raster-opacity"]),"raster-color":new xl(at.paint_raster["raster-color"]),"raster-color-mix":new Kt(at.paint_raster["raster-color-mix"]),"raster-color-range":new Kt(at.paint_raster["raster-color-range"]),"raster-hue-rotate":new Kt(at.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(at.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(at.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(at.paint_raster["raster-saturation"]),"raster-contrast":new Kt(at.paint_raster["raster-contrast"]),"raster-resampling":new Kt(at.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(at.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Kt(at.paint_raster["raster-emissive-strength"]),"raster-array-band":new Kt(at.paint_raster["raster-array-band"]),"raster-elevation":new Kt(at.paint_raster["raster-elevation"]),"raster-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},s,h,p),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(i){return!(i&&i._source instanceof nk&&(i._source.onNorthPole||i._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(i){i!=="raster-color"&&i!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(i){if(!this.hasColorMap()||!this._curRampRange)return;const s=this._transitionablePaint._values["raster-color"].value.expression,[h,p]=i||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(h)&&isNaN(p)||h===this._curRampRange[0]&&p===this._curRampRange[1]||(this.colorRamp=hg({expression:s,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:h,end:p}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[h,p])}}let rk,ok,sk,ak,lk;class ck extends zs{constructor(i,s,h,p){super(i,{layout:rk||(rk=new co({visibility:new Kt(at["layout_raster-particle"].visibility)})),paint:ok||(ok=new co({"raster-particle-array-band":new Kt(at["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Kt(at["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new xl(at["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Kt(at["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Kt(at["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Kt(at["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Kt(at["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Kt(at["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},s,h,p),this._updateColorRamp(),this.lastInvalidatedAt=qa.now()}onRemove(i){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(i){return!1}_handleSpecialPaintPropertyUpdate(i){i!=="raster-particle-color"&&i!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),i==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const i=this._transitionablePaint._values["raster-particle-color"].value.expression,s=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=hg({expression:i,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:s}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=qa.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class sG extends zs{constructor(i,s){super(i,{},s,null),this.implementation=i,i.slot&&(this.slot=i.slot)}is3D(i){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(i){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}function HA(l,i,s){const h=[0,0,1],p=yi([]);return Cn(p,p,s?-Y(l)+Math.PI:Y(l)),dt(p,p,-Y(i)),ai(h,h,p),en(h,h)}function uk(l,i){const s=LS(l.projection,l.zoom,l.width,l.height),h=function(v,x,E,M,P){const k=new ce(E.lng-180*Sg,E.lat),B=new ce(E.lng+180*Sg,E.lat),j=v.project(k.lng,k.lat),X=v.project(B.lng,B.lat),Z=-Math.atan2(X.y-j.y,X.x-j.x),oe=ft.fromLngLat(E);oe.y=Fe(oe.y,-1+Sg,1-Sg);const de=oe.toLngLat(),me=v.project(de.lng,de.lat),Se=ft.fromLngLat(de);Se.x+=Sg;const be=Se.toLngLat(),ae=v.project(be.lng,be.lat),_e=dk(ae.x-me.x,ae.y-me.y,Z),we=ft.fromLngLat(de);we.y+=Sg;const Ie=we.toLngLat(),Ge=v.project(Ie.lng,Ie.lat),Ze=dk(Ge.x-me.x,Ge.y-me.y,Z),Ye=Math.abs(_e.x)/Math.abs(Ze.y),tt=H([]);pe(tt,tt,-Z*(1-(P?0:M)));const vt=H([]);return ne(vt,vt,[1,1-(1-Ye)*M,1]),vt[4]=-Ze.x/Ze.y*M,pe(vt,vt,Z),W(vt,tt,vt),vt}(l.projection,0,l.center,s,i),p=hk(l);return ne(h,h,[p,p,1]),h}function hk(l){const i=l.projection,s=LS(l.projection,l.zoom,l.width,l.height),h=GA(i,l.center),p=GA(i,ce.convert(i.center));return Math.pow(2,h*s+(1-s)*p)}function LS(l,i,s,h,p=1/0){const v=l.range;if(!v)return 0;const x=Math.min(p,Math.max(s,h)),E=Math.log(x/1024)/Math.LN2;return He(v[0]+E,v[1]+E,i)}const Sg=1/4e4;function GA(l,i){const s=Fe(i.lat,-85.051129,rt),h=new ce(i.lng-180*Sg,s),p=new ce(i.lng+180*Sg,s),v=l.project(h.lng,s),x=l.project(p.lng,s),E=ft.fromLngLat(h),M=ft.fromLngLat(p),P=x.x-v.x,k=x.y-v.y,B=M.x-E.x,j=M.y-E.y,X=Math.sqrt((B*B+j*j)/(P*P+k*k));return Math.log(X)/Math.LN2}function dk(l,i,s){const h=Math.cos(s),p=Math.sin(s);return{x:l*h-i*p,y:l*p+i*h}}function fk(l,i,s){H(l),pe(l,l,Y(i[2])),se(l,l,Y(i[0])),ue(l,l,Y(i[1])),ne(l,l,s),W(l,l,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function kS(l,i,s,h,p,v,x,E){const M=[s[0]-i[0],s[1]-i[1],0],P=[h[0]-i[0],h[1]-i[1],0];if(et(M)<1e-12||et(P)<1e-12)return yi(l);const k=Rn([],M,P);en(k,k),$e(P,h,i),M[2]=(v-p)*E,P[2]=(x-p)*E;const B=M;return Rn(B,M,P),en(B,B),pr(l,k,B)}function qA(l,i,s=!1){const h=md(i.zoom),p=function(v,x,E){const M=x.worldSize,P=[v[12],v[13],v[14]],k=We(P[1]/M),B=Ve(P[0]/M),j=H([]),X=Re(1,k)*M,Z=Re(1,0)*M*wt(k,x.zoom),oe=1/Lv(M);let de=Z*oe;if(E){const ae=LS(x.projection,x.zoom,x.width,x.height,1024);de=oe*x.projection.pixelSpaceConversion(x.center.lat,M,ae)}const me=he(k,B);mt(me,me,je([],en([],me),X*de*P[2]));const Se=function(ae){const _e=[ae[0],ae[1],ae[2]];let we=[0,1,0];const Ie=Rn([],we,_e);return Rn(we,_e,Ie),Ft(we)===0&&(we=[0,1,0],Rn(Ie,_e,we)),en(Ie,Ie),en(we,we),en(_e,_e),[Ie[0],Ie[1],Ie[2],0,we[0],we[1],we[2],0,_e[0],_e[1],_e[2],0,ae[0],ae[1],ae[2],1]}(me);ne(j,j,[de,de,de*X]),re(j,j,[-P[0],-P[1],-P[2]]);const be=W([],x.globeMatrix,Se);return W(be,be,j),W(be,be,v),be}(l,i,s);if(h>0){const v=function(x,E){const M=E.worldSize,P=Re(1,0)*M*wt(E.center.lat,E.zoom)/Lv(M),k=Re(1,E.center.lat)*M,B=H([]);return ue(B,B,Y(E.center.lng)),se(B,B,Y(E.center.lat)),re(B,B,[0,0,w]),ne(B,B,[P,P,P*k]),re(B,B,[E.point.x-.5*M,E.point.y-.5*M,0]),W(B,B,x),W(B,E.globeMatrix,B)}(l,i);return function(x,E,M){const P=(Z,oe,de)=>{const me=et(Z),Se=et(oe),be=su(Z,oe,de);return je(be,be,1/et(be)*jn(me,Se,de))},k=P([x[0],x[1],x[2]],[E[0],E[1],E[2]],M),B=P([x[4],x[5],x[6]],[E[4],E[5],E[6]],M),j=P([x[8],x[9],x[10]],[E[8],E[9],E[10]],M),X=su([x[12],x[13],x[14]],[E[12],E[13],E[14]],M);return[k[0],k[1],k[2],0,B[0],B[1],B[2],0,j[0],j[1],j[2],0,X[0],X[1],X[2],1]}(p,v,h)}return p}function pk(l,i,s,h){const p=wr.projectAabbCorners(h,s);let v=Number.MAX_VALUE,x=-1;for(let P=0;P<p.length;++P){const k=p[P];k[0]=(.5*k[0]+.5)*i.width,k[1]=(.5-.5*k[1])*i.height,k[2]<v&&(x=P,v=k[2])}const E=P=>new Zt(p[P][0],p[P][1]);let M;switch(x){case 0:case 6:M=[E(1),E(5),E(4),E(7),E(3),E(2),E(1)];break;case 1:case 7:M=[E(0),E(4),E(5),E(6),E(2),E(3),E(0)];break;case 3:case 5:M=[E(1),E(0),E(4),E(7),E(6),E(2),E(1)];break;default:M=[E(1),E(5),E(6),E(7),E(3),E(0),E(1)]}if(Gn(l,M))return v}const aG=qi([{name:"a_pos_3f",components:3,type:"Float32"}]),lG=qi([{name:"a_color_3f",components:3,type:"Float32"}]),cG=qi([{name:"a_color_4f",components:4,type:"Float32"}]),uG=qi([{name:"a_uv_2f",components:2,type:"Float32"}]),hG=qi([{name:"a_normal_3f",components:3,type:"Float32"}]),dG=qi([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),fG=qi([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),mk={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class zS{constructor(i,s,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function WA(l,i){const s=l.indexOf("://")===-1;try{return new URL(l,s&&i?"http://example.com":void 0),!0}catch{return!1}}class gk{constructor(i,s){this.feature=i,this.instancedDataOffset=s,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class yk{constructor(){this.instancedDataArray=new fd,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class XA{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.fqid),this.projection=i.projection,this.index=i.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=i.styleDefinedModelURLs}updateFootprints(i,s){}populate(i,s,h,p){this.tileToMeter=nt(h);const v=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:x,id:E,index:M,sourceLayerIndex:P}of i){const k=E??(x.properties&&x.properties.hasOwnProperty("id")?x.properties.id:void 0),B=_n(x,v);if(!this.layers[0]._featureFilter.filter(new xr(this.zoom),B,h))continue;const j={id:k,sourceLayerIndex:P,index:M,geometry:v?B.geometry:pn(x,h,p),properties:x.properties,type:x.type,patterns:{}},X=this.addFeature(j,j.geometry,B);X&&s.featureIndex.insert(x,j.geometry,M,P,this.index,this.instancesPerModel[X].instancedDataArray.length,Qt/32)}this.lookup=null}update(i,s,h,p){for(const v in this.instancesPerModel){const x=this.instancesPerModel[v];for(const E in i)x.idToFeaturesIndex.hasOwnProperty(E)&&(this.evaluate(x.features[x.idToFeaturesIndex[E]],i[E],x,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let i=!1;for(const s in this.instancesPerModel){const h=this.instancesPerModel[s];for(const p of h.features){const v=this.layers[0],x=p.feature,E=this.canonical,M=v.paint.get("model-rotation").evaluate(x,{},E),P=v.paint.get("model-scale").evaluate(x,{},E),k=v.paint.get("model-translation").evaluate(x,{},E);oi(p.rotation,M)&&oi(p.scale,P)&&oi(p.translation,k)||(this.evaluate(p,p.featureStates,h,!0),i=!0)}}return i}updateReplacement(i,s,h,p){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const v=s.getReplacementRegionsForTile(i.toUnwrapped(),!0);if(gg(this.activeReplacements,v))return!1;this.activeReplacements=v;let x=!1;for(const E in this.instancesPerModel){const M=this.instancesPerModel[E],P=M.instancedDataArray;for(const k of M.features){const B=k.instancedDataOffset,j=k.instancedDataCount;for(let X=0;X<j;X++){const Z=16*(X+B);let oe=P.float32[Z+0];const de=oe>Qt;oe=de?oe-Qt:oe;const me=Math.floor(oe),Se=P.float32[Z+1];let be=!1;for(const ae of this.activeReplacements)if(!mg(ae,h,mk.Model,p)&&!(ae.min.x>me||me>ae.max.x||ae.min.y>Se||Se>ae.max.y)&&(be=sb(aS(me,Se,i.canonical,ae.footprintTileId.canonical),ae.footprint),be))break;P.float32[Z]=be?oe+Qt:oe,x=x||be!==de}}}return x}isEmpty(){for(const i in this.instancesPerModel)if(this.instancesPerModel[i].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(i){if(!this.uploaded)for(const s in this.instancesPerModel){const h=this.instancesPerModel[s];h.instancedDataArray.length<0||h.instancedDataArray.length===0||(h.instancedDataBuffer?h.instancedDataBuffer.updateData(h.instancedDataArray):h.instancedDataBuffer=i.createVertexBuffer(h.instancedDataArray,dG.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const s in this.instancesPerModel){const h=this.instancesPerModel[s];h.instancedDataArray.length!==0&&h.instancedDataBuffer&&h.instancedDataBuffer.destroy()}const i=this.layers[0].modelManager;if(i&&this.modelUris&&this.modelsRequested)for(const s of this.modelUris)i.removeModel(s,"",!0)}addFeature(i,s,h){const p=this.layers[0],v=p.layout.get("model-id").evaluate(h,{},this.canonical);if(!v)return ui(`modelId is not evaluated for layer ${p.id} and it is not going to get rendered.`),v;(WA(v,!1)||this.styleDefinedModelURLs[v]!==void 0)&&(this.modelUris.includes(v)||this.modelUris.push(v)),this.instancesPerModel[v]||(this.instancesPerModel[v]=new yk);const x=this.instancesPerModel[v],E=x.instancedDataArray,M=new gk(h,E.length);for(const P of s)for(const k of P){if(k.x<0||k.x>=Qt||k.y<0||k.y>=Qt)continue;const B=(this.lookupDim-1)/Qt,j=this.lookupDim*(k.y*B|0)+k.x*B|0;if(this.lookup){if(this.lookup[j]!==0)continue;this.lookup[j]=1}this.instanceCount++;const X=E.length;E.resize(X+1),x.instancesEvaluatedElevation.push(0),E.float32[16*X]=k.x,E.float32[16*X+1]=k.y}return M.instancedDataCount=x.instancedDataArray.length-M.instancedDataOffset,M.instancedDataCount>0&&(i.id&&(x.idToFeaturesIndex[i.id]=x.features.length),x.features.push(M),this.evaluate(M,{},x,!1)),v}getModelUris(){return this.modelUris}evaluate(i,s,h,p){const v=this.layers[0],x=i.feature,E=this.canonical,M=i.rotation=v.paint.get("model-rotation").evaluate(x,s,E),P=i.scale=v.paint.get("model-scale").evaluate(x,s,E),k=i.translation=v.paint.get("model-translation").evaluate(x,s,E),B=v.paint.get("model-color").evaluate(x,s,E);B.a=v.paint.get("model-color-mix-intensity").evaluate(x,s,E);const j=[];this.maxVerticalOffset<k[2]&&(this.maxVerticalOffset=k[2]),this.maxScale=Math.max(Math.max(this.maxScale,P[0]),Math.max(P[1],P[2])),fk(j,M,P);const X=Math.round(100*B.a)+B.b/1.05;for(let Z=0;Z<i.instancedDataCount;++Z){const oe=i.instancedDataOffset+Z,de=16*oe,me=h.instancedDataArray.float32;let Se=0;p&&(Se=me[de+6]-h.instancesEvaluatedElevation[oe]);const be=0|me[de+1];me[de]=(0|me[de])+B.r/1.05,me[de+1]=be+B.g/1.05,me[de+2]=X,me[de+3]=1/(E.z>10?this.tileToMeter:nt(E,be)),me[de+4]=k[0],me[de+5]=k[1],me[de+6]=k[2]+Se,me[de+7]=j[0],me[de+8]=j[1],me[de+9]=j[2],me[de+10]=j[4],me[de+11]=j[5],me[de+12]=j[6],me[de+13]=j[8],me[de+14]=j[9],me[de+15]=j[10],h.instancesEvaluatedElevation[oe]=k[2]}}}let _k,vk;hn(XA,"ModelBucket",{omit:["layers"]}),hn(yk,"PerModelAttributes"),hn(gk,"ModelFeature");const g_=64,d0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function xk(l,i,s,h,p,v,x,E,M,P=!1){const k=s.zoom,B=s.project(h),j=wt(h.lat,k),X=1/j;H(l),re(l,l,[B.x+x[0]*X,B.y+x[1]*X,x[2]]);let Z=1,oe=1;const de=s.worldSize;if(P){if(s.projection.name==="mercator"){let ae=0;s.elevation&&(ae=s.elevation.getAtPointOrZero(new ft(B.x/de,B.y/de),0));const _e=ii([],[B.x,B.y,ae,1],s.projMatrix)[3]/s.cameraToCenterDistance;Z=_e,oe=_e*wt(s.center.lat,k)}else if(s.projection.name==="globe"){const ae=qA(l,s),_e=[0,0,0,1];ii(_e,_e,W([],s.projMatrix,ae));const we=_e[3]/s.cameraToCenterDistance,Ie=md(k),Ge=s.projection.pixelsPerMeter(h.lat,de)*wt(h.lat,k),Ze=s.projection.pixelsPerMeter(s.center.lat,de)*wt(s.center.lat,k);Z=we/jn(Ge,Et(s.center.lat),Ie),oe=we*j/Ge,Z*=Ze,oe*=Ze}}else Z=X;ne(l,l,[Z,Z,oe]);const me=[...l],Se=i.orientation,be=[];if(fk(be,[Se[0]+p[0],Se[1]+p[1],Se[2]+p[2]],v),W(l,me,be),E&&s.elevation){let ae=0;const _e=[];if(M&&s.elevation){ae=function(Ie,Ge,Ze,Ye,tt){const vt=Ge.elevation;if(!vt)return 0;const kt=wr.projectAabbCorners(Ze,Ye),It=Re(1,tt.lat)*Ge.worldSize,Dt=function(Ht,ri){const xn=[0,0,1],bn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Qn of bn){const gi=Ht[Qn.corners[0]],_i=Ht[Qn.corners[1]],Ei=Ht[Qn.corners[2]],Si=[_i[0]-gi[0],_i[1]-gi[1],ri*(_i[2]-gi[2])],xi=Rn(Si,Si,[Ei[0]-gi[0],Ei[1]-gi[1],ri*(Ei[2]-gi[2])]);en(xi,xi),Qn.dotProductWithUp=jt(xi,xn)}return bn.sort((Qn,gi)=>Qn.dotProductWithUp-gi.dotProductWithUp),bn[0].corners}(kt,It),$t=kt[Dt[0]],yt=kt[Dt[1]],Pt=kt[Dt[2]],gt=kt[Dt[3]],_t=vt.getAtPointOrZero(new ft($t[0]/Ge.worldSize,$t[1]/Ge.worldSize),0),Gt=vt.getAtPointOrZero(new ft(yt[0]/Ge.worldSize,yt[1]/Ge.worldSize),0),Xt=vt.getAtPointOrZero(new ft(Pt[0]/Ge.worldSize,Pt[1]/Ge.worldSize),0),En=vt.getAtPointOrZero(new ft(gt[0]/Ge.worldSize,gt[1]/Ge.worldSize),0),gn=(_t+En)/2,rn=(Gt+Xt)/2;return gn>rn?Gt<Xt?kS(Ie,yt,gt,$t,Gt,En,_t,It):kS(Ie,Pt,$t,gt,Xt,_t,En,It):_t<En?kS(Ie,$t,yt,Pt,_t,Gt,Xt,It):kS(Ie,gt,Pt,yt,En,Xt,Gt,It),Math.max(gn,rn)}(_e,s,i.aabb,l,h);const we=W([],qe([],_e),be);W(l,me,we)}else ae=s.elevation.getAtPointOrZero(new ft(B.x/de,B.y/de),0);ae!==0&&(l[14]+=ae)}}function Sb(l,i,s=!1){l.uploaded||(l.gfxTexture=new $A(i,l.image,s?i.gl.R8:i.gl.RGBA8,{useMipmap:l.sampler.minFilter>=i.gl.NEAREST_MIPMAP_NEAREST}),l.uploaded=!0,l.image=null)}function pG(l,i,s){l.indexBuffer=i.createIndexBuffer(l.indexArray,!1,!0),l.vertexBuffer=i.createVertexBuffer(l.vertexArray,aG.members,!1,!0),l.normalArray&&(l.normalBuffer=i.createVertexBuffer(l.normalArray,hG.members,!1,!0)),l.texcoordArray&&(l.texcoordBuffer=i.createVertexBuffer(l.texcoordArray,uG.members,!1,!0)),l.colorArray&&(l.colorBuffer=i.createVertexBuffer(l.colorArray,(l.colorArray.bytesPerElement===12?lG:cG).members,!1,!0)),l.featureArray&&(l.pbrBuffer=i.createVertexBuffer(l.featureArray,fG.members,!0)),l.segments=oo.simpleSegment(0,0,l.vertexArray.length,l.indexArray.length);const h=l.material;h.pbrMetallicRoughness.baseColorTexture&&Sb(h.pbrMetallicRoughness.baseColorTexture,i),h.pbrMetallicRoughness.metallicRoughnessTexture&&Sb(h.pbrMetallicRoughness.metallicRoughnessTexture,i),h.normalTexture&&Sb(h.normalTexture,i),h.occlusionTexture&&Sb(h.occlusionTexture,i,s),h.emissionTexture&&Sb(h.emissionTexture,i)}function ZA(l,i,s){if(l.meshes)for(const h of l.meshes)pG(h,i,s);if(l.children)for(const h of l.children)ZA(h,i,s)}function BS(l){if(l.meshes)for(const i of l.meshes)i.indexArray.destroy(),i.vertexArray.destroy(),i.colorArray&&i.colorArray.destroy(),i.normalArray&&i.normalArray.destroy(),i.texcoordArray&&i.texcoordArray.destroy(),i.featureArray&&i.featureArray.destroy();if(l.children)for(const i of l.children)BS(i)}function YA(l){if(l.meshes)for(const s of l.meshes)s.vertexBuffer&&(s.vertexBuffer.destroy(),s.indexBuffer.destroy(),s.normalBuffer&&s.normalBuffer.destroy(),s.texcoordBuffer&&s.texcoordBuffer.destroy(),s.colorBuffer&&s.colorBuffer.destroy(),s.pbrBuffer&&s.pbrBuffer.destroy(),s.segments.destroy(),s.material&&((i=s.material).pbrMetallicRoughness.baseColorTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),i.pbrMetallicRoughness.metallicRoughnessTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),i.normalTexture&&i.normalTexture.gfxTexture&&i.normalTexture.gfxTexture.destroy(),i.emissionTexture&&i.emissionTexture.gfxTexture&&i.emissionTexture.gfxTexture.destroy(),i.occlusionTexture&&i.occlusionTexture.gfxTexture&&i.occlusionTexture.gfxTexture.destroy()));var i;if(l.children)for(const s of l.children)YA(s)}class f0{constructor(i,s,h){this._demTile=i,this._dem=this._demTile.dem,this._scale=s,this._offset=h}static create(i,s,h){const p=h||i.findDEMTileFor(s);if(!p||!p.dem)return;const v=p.dem,x=p.tileID,E=1<<s.canonical.z-x.canonical.z;return new f0(p,v.dim/Qt/E,[(s.canonical.x/E-x.canonical.x)*v.dim,(s.canonical.y/E-x.canonical.y)*v.dim])}tileCoordToPixel(i,s){const h=s*this._scale+this._offset[1],p=Math.floor(i*this._scale+this._offset[0]),v=Math.floor(h);return new Zt(p,v)}getElevationAt(i,s,h,p){const v=i*this._scale+this._offset[0],x=s*this._scale+this._offset[1],E=Math.floor(v),M=Math.floor(x),P=this._dem;return p=!!p,h?jn(jn(P.get(E,M,p),P.get(E,M+1,p),x-M),jn(P.get(E+1,M,p),P.get(E+1,M+1,p),x-M),v-E):P.get(E,M,p)}getElevationAtPixel(i,s,h){return this._dem.get(i,s,!!h)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Re(1,i)*this._dem.stride}}const KA=new Float32Array(262144),y_=new Uint8Array(262144);function bk(l){let i=0;if(l.meshes)for(const s of l.meshes)i=Math.max(i,s.aabb.max[2]);if(l.children)for(const s of l.children)i=Math.max(i,bk(s));return i}function wk(l,i,s){if(l.meshes)for(const h of l.meshes){if(h.aabb.min[0]===1/0)continue;const p=wr.applyTransform(h.aabb,l.matrix);s.insert(i,p.min[0],p.min[1],p.max[0],p.max[1])}if(l.children)for(const h of l.children)wk(h,i,s)}const Sk=["","wall","door","roof","window","lamp","logo"];class Tk{constructor(i){this.node=i,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:i.id,geometry:[],properties:{height:bk(i)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new wr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let i=0;const s=new wr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const h of this.node.meshes)this.node.lightMeshIndex!==i&&(h.transformedAabb=wr.applyTransformFast(h.aabb,this.node.matrix),s.encapsulate(h.transformedAabb)),i++;this.aabb=s}return this.aabb}}class FS{constructor(i,s,h,p,v,x,E){this.id=h,this.layers=i,this.layerIds=this.layers.map(M=>M.fqid),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.modelTraits|=d0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,p&&(this.modelTraits|=d0.HasMapboxMeshFeatures),v&&(this.modelTraits|=d0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=x,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const M of s)this.nodesInfo.push(new Tk(M)),wk(M,E.featureIndexArray.length,E.grid),E.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,E.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(i,s){for(const h of this.getNodesInfo()){const p=h.node;p.footprint&&s.push({footprint:p.footprint,id:i})}}update(i){const s=Object.keys(i).length!==0;if(s&&!this.stateDependentLayers.length)return;const h=s?this.stateDependentLayers:this.layers;if(!Os(i,this.states))for(const p of h)this.evaluate(p,i);this.states=structuredClone(i)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(i){if(!this.needsUpload)return;const s=this.getNodesInfo();for(const h of s){const p=h.node;this.uploaded?this.updatePbrBuffer(p):ZA(p,i,!0)}for(const h of s)BS(h.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(i){let s=!1;if(!i.meshes)return s;for(const h of i.meshes)h.pbrBuffer&&(h.pbrBuffer.updateData(h.featureArray),s=!0);return s}needsReEvaluation(i,s,h){const p=i.transform.projectionOptions,v=i.style.getBrightness(),x=this.brightness!==v;if(!this.uploaded||this.dirty||p.name!==this.projection.name||Tb(h.paint.get("model-color").value,x)||Tb(h.paint.get("model-color-mix-intensity").value,x)||Tb(h.paint.get("model-roughness").value,x)||Tb(h.paint.get("model-emissive-strength").value,x)||Tb(h.paint.get("model-height-based-emissive-strength-multiplier").value,x)){this.projection=p,this.brightness=v;const E=this.getNodesInfo();for(const M of E)M.state=null;return!0}return!1}evaluateScale(i,s){if(i.transform.zoom===this.zoom)return;this.zoom=i.transform.zoom;const h=this.getNodesInfo(),p=this.id.canonical;for(const v of h){const x=v.feature;v.evaluatedScale=s.paint.get("model-scale").evaluate(x,{},p)}}evaluate(i,s){const h=this.getNodesInfo();for(const p of h){if(!p.node.meshes)continue;const v=p.feature,x=s&&s[v.id];if(Os(x,p.state))continue;p.state=structuredClone(x);const E=p.node.meshes&&p.node.meshes[0].featureData,M=p.evaluatedColor[2],P=p.evaluatedRMEA[2],k=this.id.canonical;if(p.hasTranslucentParts=!1,E){for(let B=0;B<Sk.length;B++){const j=Sk[B];j.length&&(v.properties.part=j);const X=i.paint.get("model-color").evaluate(v,x,k).toRenderColor(null),Z=i.paint.get("model-color-mix-intensity").evaluate(v,x,k);p.evaluatedColor[B]=[X.r,X.g,X.b,Z],p.evaluatedRMEA[B][0]=i.paint.get("model-roughness").evaluate(v,x,k),p.evaluatedRMEA[B][2]=i.paint.get("model-emissive-strength").evaluate(v,x,k),p.evaluatedRMEA[B][3]=X.a,p.emissionHeightBasedParams[B]=i.paint.get("model-height-based-emissive-strength-multiplier").evaluate(v,x,k),!p.hasTranslucentParts&&X.a<1&&(p.hasTranslucentParts=!0)}delete v.properties.part,gG(p,M!==p.evaluatedColor[2]||P!==p.evaluatedRMEA[2],this.modelTraits)}else p.evaluatedRMEA[0][2]=i.paint.get("model-emissive-strength").evaluate(v,x,k);p.evaluatedScale=i.paint.get("model-scale").evaluate(v,x,k),this.updatePbrBuffer(p.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(i,s,h,p){const v=i.findDEMTileFor(h);if(v&&(v.tileID.canonical!==this.terrainTile||s!==this.terrainExaggeration)){if(v.dem&&v.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=v.tileID.overscaledZ;const x=f0.create(i,h,v);if(!x)return;this.modelTraits&d0.HasMapboxMeshFeatures&&this.updateDEM(i,x,h,p);for(const E of this.getNodesInfo()){const M=E.node;if(!M.footprint||!M.footprint.vertices||!M.footprint.vertices.length)continue;const P=M.footprint.vertices;let k=x.getElevationAt(P[0].x,P[0].y,!0,!0);for(let B=1;B<P.length;B++)k=Math.min(k,x.getElevationAt(P[B].x,P[B].y,!0,!0));M.elevation=k}}this.terrainTile=v.tileID.canonical,this.terrainExaggeration=s}}updateDEM(i,s,h,p){let v=s._dem._modifiedForSources[p];if(v===void 0&&(s._dem._modifiedForSources[p]=[],v=s._dem._modifiedForSources[p]),v.includes(h.canonical))return;const x=s._dem.dim;v.push(h.canonical);let E=!1;for(const M of this.getNodesInfo()){const P=M.node;if(!P.footprint||!P.footprint.grid)continue;const k=P.footprint.grid,B=s.tileCoordToPixel(k.min.x,k.min.y),j=s.tileCoordToPixel(k.max.x,k.max.y),X=Math.min(Math.min(x-j.y,B.x),Math.min(B.y,x-j.x));if(X<0)continue;const Z=Fe(X,2,5);let oe=Math.max(0,B.x-Z),de=Math.max(0,B.y-Z),me=Math.min(j.x+Z,x-1),Se=Math.min(j.y+Z,x-1);for(let we=de;we<=Se;++we)for(let Ie=oe;Ie<=me;++Ie)y_[we*x+Ie]=255;let be=0,ae=0;for(let we=0;we<k.cellsY;++we)for(let Ie=0;Ie<k.cellsX;++Ie){if(!k.cells[we*k.cellsX+Ie])continue;const Ge=s.tileCoordToPixel(k.min.x+Ie/k.xScale,k.min.y+we/k.yScale),Ze=s.tileCoordToPixel(k.min.x+(Ie+1)/k.xScale,k.min.y+(we+1)/k.yScale);for(let Ye=Ge.y;Ye<=Math.min(Ze.y+1,x-1);++Ye)for(let tt=Ge.x;tt<=Math.min(Ze.x+1,x-1);++tt)y_[Ye*x+tt]===255&&(y_[Ye*x+tt]=0,be+=s.getElevationAtPixel(tt,Ye),ae++)}const _e=be/ae;oe=Math.max(1,B.x-Z),de=Math.max(1,B.y-Z),me=Math.min(j.x+Z,x-2),Se=Math.min(j.y+Z,x-2),E=!0;for(let we=de;we<=Se;++we)for(let Ie=oe;Ie<=me;++Ie)y_[we*x+Ie]===0&&(KA[we*x+Ie]=s._dem.set(Ie,we,_e));for(let we=1;we<Z;++we){oe=Math.max(1,B.x-we),de=Math.max(1,B.y-we),me=Math.min(j.x+we,x-2),Se=Math.min(j.y+we,x-2);for(let Ie=de;Ie<=Se;++Ie)for(let Ge=oe;Ge<=me;++Ge){const Ze=Ie*x+Ge;if(y_[Ze]===255){let Ye=0,tt=0,vt=-1,kt=-1;for(let It=-1;It<=1;++It)for(let Dt=-1;Dt<=1;++Dt){const $t=(Ie+It)*x+Ge+Dt;if(y_[$t]>=we)continue;const yt=KA[$t],Pt=Math.abs(yt);Pt>tt&&(Ye=yt,tt=Pt,vt=Dt,kt=It)}if(tt>.1){const It=1-(we+.5*Math.abs(vt*kt))/Z;let Dt=s._dem.get(Ge,Ie)+Ye*It;const $t=s._dem.get(Ge+vt,Ie+kt),yt=s._dem.get(Ge-vt,Ie-kt,!0);(Dt-$t)*(Dt-yt)>0&&(Dt=($t+yt)/2),KA[Ze]=s._dem.set(Ge,Ie,Dt),y_[Ze]=we}}}}}E&&(s._demTile.needsDEMTextureUpload=!0,s._dem._timestamp=qa.now())}setFilter(i){this.filter=i?eg(i):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(i=>this.filter.filter(new xr(this.id.overscaledZ),i.feature,this.id.canonical)):this.nodesInfo}destroy(){const i=this.getNodesInfo();for(const s of i)BS(s.node),YA(s.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(i,s){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const h=s.getReplacementRegionsForTile(i.toUnwrapped()),p=this.getNodesInfo();for(let v=0;v<this.nodesInfo.length;v++){const x=p[v].node;p[v].hiddenByReplacement=!!x.footprint&&!h.find(E=>E.footprint===x.footprint)}}getHeightAtTileCoord(i,s){const h=this.getNodesInfo(),p=[],v=[0,0,0],x=H([]);for(let E=0;E<this.nodesInfo.length;E++){const M=h[E],P=M.node.meshes[0],k=P.transformedAabb;if(i<k.min[0]||s<k.min[1]||i>k.max[0]||s>k.max[1])continue;if(M.node.hidden===!0)return{height:1/0,maxHeight:M.feature.properties.height,hidden:!1,verticalScale:M.evaluatedScale[2]};K(x,M.node.matrix),v[0]=i,v[1]=s,Hn(v,v,x);const B=(v[0]-P.aabb.min[0])/(P.aabb.max[0]-P.aabb.min[0])*g_|0,j=Math.min(63,(v[1]-P.aabb.min[1])/(P.aabb.max[1]-P.aabb.min[1])*g_|0)*g_+Math.min(63,B),X=P.heightmap[j];if(!(X<0&&M.node.footprint))return M.hiddenByReplacement?void 0:{height:X,maxHeight:M.feature.properties.height,hidden:!1,verticalScale:M.evaluatedScale[2]};if(M.node.footprint.grid.query(new Zt(i,s),new Zt(i,s),p),p.length>0)return{height:void 0,maxHeight:M.feature.properties.height,hidden:M.hiddenByReplacement,verticalScale:M.evaluatedScale[2]}}}}function Tb(l,i){return l instanceof ro&&!l.isLightConstant&&i}function mG(l,i,s,h,p,v,x,E){let M=(61440&i|(61440&i)>>4)>>8,P=(3840&i|(3840&i)>>4)>>4,k=240&i|(240&i)>>4;s[3]>0&&(M=jn(M,255*s[0],s[3]),P=jn(P,255*s[1],s[3]),k=jn(k,255*s[2],s[3]));const B=M<<8|P,j=k<<8|Math.floor(255*h[3]),X=function(we){const Ie=Fe(we,0,2);return Math.min(Math.round(.5*Ie*255),255)}(h[2])<<8|15*h[0]<<4|15*h[1],Z=Fe(p[0],0,1),oe=Fe(p[1],0,1),de=Fe(p[2],0,1),me=Fe(p[3],0,1);let Se,be,ae,_e;if(Z!==oe&&x!==v&&oe!==Z){const we=x-v;be=1/(we*(oe-Z)),ae=-(v+we*Z)/(we*(oe-Z));const Ie=Fe(p[4],-1,1);_e=Math.pow(10,Ie),Se=255*de<<8|255*me}else Se=65535,be=0,ae=1,_e=1;if(l.emplaceBack(B,j,X,Se,be,ae,_e),E){const we=E.length;E.clear();for(let Ie=0;Ie<we;Ie++)E.emplaceBack(B,j,X,Se,be,ae,_e)}}function gG(l,i,s){const h=l.node;let p=0;const v=s&d0.HasMeshoptCompression;for(const x of h.meshes){if(h.lights&&h.lightMeshIndex===p||!x.featureData)continue;x.featureArray=new _f,x.featureArray.reserve(x.featureData.length);let E=i;for(const M of x.featureData){const P=v?65535&M:M>>16&65535,k=v?M>>16&65535:65535&M,B=(15&k)<8?15&k:0,j=l.evaluatedRMEA[B],X=l.evaluatedColor[B],Z=l.emissionHeightBasedParams[B];let oe;if(E&&B===2&&h.lights&&(oe=new _f,oe.resize(10*h.lights.length)),mG(x.featureArray,P,X,j,Z,x.aabb.min[2],x.aabb.max[2],oe),oe&&E){E=!1;const de=h.meshes[h.lightMeshIndex];de.featureArray=oe,de.featureArray._trim()}}x.featureArray._trim(),p++}}function Ek(l,i,s,h){const p=1<<l.z;i.lat=We((h/Qt+l.y)/p),i.lng=Ve((s/Qt+l.x)/p)}hn(FS,"Tiled3dModelBucket",{omit:["layers"]}),hn(Tk,"Tiled3dModelFeature");const yG={circle:class extends zs{constructor(l,i,s,h){super(l,{layout:Yi||(Yi=new co({"circle-sort-key":new un(at.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Kt(at.layout_circle["circle-elevation-reference"]),visibility:new Kt(at.layout_circle.visibility)})),paint:Ur||(Ur=new co({"circle-radius":new un(at.paint_circle["circle-radius"]),"circle-color":new un(at.paint_circle["circle-color"]),"circle-blur":new un(at.paint_circle["circle-blur"]),"circle-opacity":new un(at.paint_circle["circle-opacity"]),"circle-translate":new Kt(at.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(at.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(at.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(at.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new un(at.paint_circle["circle-stroke-width"]),"circle-stroke-color":new un(at.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new un(at.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Kt(at.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h)}createBucket(l){return new yn(l)}queryRadius(l){const i=l;return ei("circle-radius",this,i)+ei("circle-stroke-width",this,i)+Mr(this.paint.get("circle-translate"))}queryIntersectsFeature(l,i,s,h,p,v,x,E){const M=Zi(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,l.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(i,s)+this.paint.get("circle-stroke-width").evaluate(i,s);return Nx(l,h,v,x,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",M,P)}getProgramIds(){return["circle"]}getDefaultProgramParams(l,i,s){const h=Vw(this);return{config:new iu(this,{zoom:i,lut:s}),defines:h,overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends zs{createBucket(l){return new Qp(l)}constructor(l,i,s,h){super(l,{layout:zv||(zv=new co({visibility:new Kt(at.layout_heatmap.visibility)})),paint:Yy||(Yy=new co({"heatmap-radius":new un(at.paint_heatmap["heatmap-radius"]),"heatmap-weight":new un(at.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(at.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xl(at.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(at.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return ei("heatmap-radius",this,l)}queryIntersectsFeature(l,i,s,h,p,v,x,E){const M=this.paint.get("heatmap-radius").evaluate(i,s);return Nx(l,h,v,x,E,!0,!0,new Zt(0,0),M)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(l,i,s){return l==="heatmap"?{config:new iu(this,{zoom:i,lut:s}),overrideFog:!1}:{}}},hillshade:class extends zs{constructor(l,i,s,h){super(l,{layout:Bv||(Bv=new co({visibility:new Kt(at.layout_hillshade.visibility)})),paint:Tf||(Tf=new co({"hillshade-illumination-direction":new Kt(at.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(at.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(at.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(at.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(at.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(at.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Kt(at.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(l,i,s){return{overrideFog:!1}}},fill:class extends zs{constructor(l,i,s,h){super(l,{layout:om||(om=new co({"fill-sort-key":new un(at.layout_fill["fill-sort-key"]),visibility:new Kt(at.layout_fill.visibility),"fill-elevation-reference":new Kt(at.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new un(at.layout_fill["fill-construct-bridge-guard-rail"])})),paint:pg||(pg=new co({"fill-antialias":new Kt(at.paint_fill["fill-antialias"]),"fill-opacity":new un(at.paint_fill["fill-opacity"]),"fill-color":new un(at.paint_fill["fill-color"]),"fill-outline-color":new un(at.paint_fill["fill-outline-color"]),"fill-translate":new Kt(at.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(at.paint_fill["fill-translate-anchor"]),"fill-pattern":new un(at.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new Kt(at.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new Kt(at.paint_fill["fill-emissive-strength"]),"fill-z-offset":new un(at.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new un(at.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new un(at.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h)}getProgramIds(){const l=this.paint.get("fill-pattern"),i=l&&l.constantOr(1),s=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getDefaultProgramParams(l,i,s){return{config:new iu(this,{zoom:i,lut:s}),overrideFog:!1}}recalculate(l,i){super.recalculate(l,i);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Kv(l)}queryRadius(){return Mr(this.paint.get("fill-translate"))}queryIntersectsFeature(l,i,s,h,p,v){return!l.queryGeometry.isAboveHorizon&&$n(Fi(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,l.pixelToTileUnitsFactor),h)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(l){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const i=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return l!=null?i&&!l:i}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends zs{constructor(l,i,s,h){super(l,{layout:xg||(xg=new co({visibility:new Kt(at["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Kt(at["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:a0||(a0=new co({"fill-extrusion-opacity":new Kt(at["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new un(at["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(at["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(at["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new un(at["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new Kt(at["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new un(at["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new un(at["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Kt(at["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Kt(at["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Kt(at["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Kt(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Kt(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Kt(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Kt(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Kt(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Kt(at["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Kt(at["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new un(at["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new un(at["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Kt(at["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Kt(at["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Kt(at["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Kt(at["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new un(at["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new un(at["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Kt(at["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new o0(l)}queryRadius(){return Mr(this.paint.get("fill-extrusion-translate"))}is3D(l){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(l,i,s,h,p,v,x,E,M){const P=Zi(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,l.pixelToTileUnitsFactor),k=this.paint.get("fill-extrusion-height").evaluate(i,s),B=this.paint.get("fill-extrusion-base").evaluate(i,s),j=[0,0],X=E&&v.elevation,Z=v.elevation?v.elevation.exaggeration():1,oe=l.tile.getBucket(this);if(X&&oe instanceof o0){const ae=oe.centroidVertexArray,_e=M+1;_e<ae.length&&(j[0]=ae.geta_centroid_pos0(_e),j[1]=ae.geta_centroid_pos1(_e))}if(j[0]===0&&j[1]===1)return!1;v.projection.name==="globe"&&(h=d_([h],[new Zt(0,0),new Zt(Qt,Qt)],l.tileID.canonical).map(ae=>ae.polygon).flat());const de=X?E:null,[me,Se]=function(ae,_e,we,Ie,Ge,Ze,Ye,tt,vt,kt,It){return ae.projection.name==="globe"?function(Dt,$t,yt,Pt,gt,_t,Gt,Xt,En,gn,rn){const Ht=[],ri=[],xn=Dt.projection.upVectorScale(rn,Dt.center.lat,Dt.worldSize).metersToTile,bn=[0,0,0,1],Qn=[0,0,0,1],gi=(Ei,Si,xi,kr)=>{Ei[0]=Si,Ei[1]=xi,Ei[2]=kr,Ei[3]=1},_i=h_();yt>0&&(yt+=_i),Pt+=_i;for(const Ei of $t){const Si=[],xi=[];for(const kr of Ei){const Xr=kr.x+gt.x,Me=kr.y+gt.y,Oe=Dt.projection.projectTilePoint(Xr,Me,rn),St=Dt.projection.upVector(rn,kr.x,kr.y);let Jt=yt,an=Pt;if(Gt){const sn=Q(Xr,Me,yt,Pt,Gt,Xt,En,gn);Jt+=sn.base,an+=sn.top}yt!==0?gi(bn,Oe.x+St[0]*xn*Jt,Oe.y+St[1]*xn*Jt,Oe.z+St[2]*xn*Jt):gi(bn,Oe.x,Oe.y,Oe.z),gi(Qn,Oe.x+St[0]*xn*an,Oe.y+St[1]*xn*an,Oe.z+St[2]*xn*an),Hn(bn,bn,_t),Hn(Qn,Qn,_t),Si.push(new sh(bn[0],bn[1],bn[2])),xi.push(new sh(Qn[0],Qn[1],Qn[2]))}Ht.push(Si),ri.push(xi)}return[Ht,ri]}(ae,_e,we,Ie,Ge,Ze,Ye,tt,vt,kt,It):Ye?function(Dt,$t,yt,Pt,gt,_t,Gt,Xt,En){const gn=[],rn=[],Ht=[0,0,0,1];for(const ri of Dt){const xn=[],bn=[];for(const Qn of ri){const gi=Qn.x+Pt.x,_i=Qn.y+Pt.y,Ei=Q(gi,_i,$t,yt,_t,Gt,Xt,En);Ht[0]=gi,Ht[1]=_i,Ht[2]=Ei.base,Ht[3]=1,ii(Ht,Ht,gt),Ht[3]=Math.max(Ht[3],1e-5);const Si=new sh(Ht[0]/Ht[3],Ht[1]/Ht[3],Ht[2]/Ht[3]);Ht[0]=gi,Ht[1]=_i,Ht[2]=Ei.top,Ht[3]=1,ii(Ht,Ht,gt),Ht[3]=Math.max(Ht[3],1e-5);const xi=new sh(Ht[0]/Ht[3],Ht[1]/Ht[3],Ht[2]/Ht[3]);xn.push(Si),bn.push(xi)}gn.push(xn),rn.push(bn)}return[gn,rn]}(_e,we,Ie,Ge,Ze,Ye,tt,vt,kt):function(Dt,$t,yt,Pt,gt){const _t=[],Gt=[],Xt=gt[8]*$t,En=gt[9]*$t,gn=gt[10]*$t,rn=gt[11]*$t,Ht=gt[8]*yt,ri=gt[9]*yt,xn=gt[10]*yt,bn=gt[11]*yt;for(const Qn of Dt){const gi=[],_i=[];for(const Ei of Qn){const Si=Ei.x+Pt.x,xi=Ei.y+Pt.y,kr=gt[0]*Si+gt[4]*xi+gt[12],Xr=gt[1]*Si+gt[5]*xi+gt[13],Me=gt[2]*Si+gt[6]*xi+gt[14],Oe=gt[3]*Si+gt[7]*xi+gt[15],St=kr+Xt,Jt=Xr+En,an=Me+gn,sn=Math.max(Oe+rn,1e-5),Tn=kr+Ht,Zn=Xr+ri,ki=Me+xn,zi=Math.max(Oe+bn,1e-5);gi.push(new sh(St/sn,Jt/sn,an/sn)),_i.push(new sh(Tn/zi,Zn/zi,ki/zi))}_t.push(gi),Gt.push(_i)}return[_t,Gt]}(_e,we,Ie,Ge,Ze)}(v,h,B,k,P,x,de,j,Z,v.center.lat,l.tileID.canonical),be=l.queryGeometry;return function(ae,_e,we){let Ie=1/0;$n(we,_e)&&(Ie=$(we,_e[0]));for(let Ge=0;Ge<_e.length;Ge++){const Ze=_e[Ge],Ye=ae[Ge];for(let tt=0;tt<Ze.length-1;tt++){const vt=Ze[tt],kt=[vt,Ze[tt+1],Ye[tt+1],Ye[tt],vt];Gn(we,kt)&&(Ie=Math.min(Ie,$(we,kt)))}}return Ie!==1/0&&Ie}(me,Se,be.isPointQuery()?be.screenBounds:be.screenGeometry)}},line:class extends zs{constructor(l,i,s,h){const p=pS();super(l,p,i,s,h),p.layout&&(this.layout=new qu(p.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof ef,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,i){super.recalculate(l,i),this.paint._values["line-floorwidth"]=(()=>{if(db)return db;const s=pS();return db=new yH(s.paint.properties["line-width"].specification),db.useIntegerZoom=!0,db})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Rt(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(l,i,s){const h=Fs(this);return{config:new iu(this,{zoom:i,lut:s}),defines:h,overrideFog:!1}}queryRadius(l){const i=l,s=aL(ei("line-width",this,i),ei("line-gap-width",this,i)),h=ei("line-offset",this,i);return s/2+Math.abs(h)+Mr(this.paint.get("line-translate"))}queryIntersectsFeature(l,i,s,h,p,v){if(l.queryGeometry.isAboveHorizon)return!1;const x=Fi(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,l.pixelToTileUnitsFactor),E=l.pixelToTileUnitsFactor/2*aL(this.paint.get("line-width").evaluate(i,s),this.paint.get("line-gap-width").evaluate(i,s)),M=this.paint.get("line-offset").evaluate(i,s);return M&&(h=function(P,k){const B=[],j=new Zt(0,0);for(let X=0;X<P.length;X++){const Z=P[X],oe=[];for(let de=0;de<Z.length;de++){const me=Z[de],Se=Z[de+1],be=de===0?j:me.sub(Z[de-1])._unit()._perp(),ae=de===Z.length-1?j:Se.sub(me)._unit()._perp(),_e=be._add(ae)._unit();_e._mult(1/(_e.x*ae.x+_e.y*ae.y)),oe.push(_e._mult(k)._add(me))}B.push(oe)}return B}(h,M*l.pixelToTileUnitsFactor)),function(P,k,B){for(let j=0;j<k.length;j++){const X=k[j];if(P.length>=3){for(let Z=0;Z<X.length;Z++)if(Wi(P,X[Z]))return!0}if(mi(P,X,B))return!0}return!1}(x,h,E)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(l){return!this.hasElevatedBuckets}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:IS,background:class extends zs{constructor(l,i,s,h){super(l,{layout:KL||(KL=new co({visibility:new Kt(at.layout_background.visibility)})),paint:JL||(JL=new co({"background-pitch-alignment":new Kt(at.paint_background["background-pitch-alignment"]),"background-color":new Kt(at.paint_background["background-color"]),"background-pattern":new Kt(at.paint_background["background-pattern"]),"background-opacity":new Kt(at.paint_background["background-opacity"]),"background-emissive-strength":new Kt(at.paint_background["background-emissive-strength"]),"background-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(l,i,s){return{overrideFog:!1}}is3D(l){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:ik,"raster-particle":ck,sky:class extends zs{constructor(l,i,s,h){super(l,{layout:sk||(sk=new co({visibility:new Kt(at.layout_sky.visibility)})),paint:ak||(ak=new co({"sky-type":new Kt(at.paint_sky["sky-type"]),"sky-atmosphere-sun":new Kt(at.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Kt(at.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Kt(at.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Kt(at.paint_sky["sky-gradient-radius"]),"sky-gradient":new xl(at.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Kt(at.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Kt(at.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Kt(at.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="sky-gradient"?this._updateColorRamp():l!=="sky-atmosphere-sun"&&l!=="sky-atmosphere-halo-color"&&l!=="sky-atmosphere-color"&&l!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=hg({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(l,i){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),p=!h,v=l.style.light,x=v.properties.get("position");return p&&v.properties.get("anchor")==="viewport"&&ui("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?HA(x.azimuthal,90-x.polar,i):HA(h[0],90-h[1],i)}const s=this.paint.get("sky-gradient-center");return HA(s[0],90-s[1],i)}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return l==="atmosphere"?["skyboxCapture","skybox"]:l==="gradient"?["skyboxGradient"]:null}},slot:class extends zs{constructor(l,i,s,h){super(l,{paint:lk||(lk=new co({}))},i,null)}},model:class extends zs{constructor(l,i,s,h){super(l,{layout:_k||(_k=new co({visibility:new Kt(at.layout_model.visibility),"model-id":new un(at.layout_model["model-id"])})),paint:vk||(vk=new co({"model-opacity":new un(at.paint_model["model-opacity"]),"model-rotation":new un(at.paint_model["model-rotation"]),"model-scale":new un(at.paint_model["model-scale"]),"model-translation":new un(at.paint_model["model-translation"]),"model-color":new un(at.paint_model["model-color"]),"model-color-mix-intensity":new un(at.paint_model["model-color-mix-intensity"]),"model-type":new Kt(at.paint_model["model-type"]),"model-cast-shadows":new Kt(at.paint_model["model-cast-shadows"]),"model-receive-shadows":new Kt(at.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Kt(at.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new un(at.paint_model["model-emissive-strength"]),"model-roughness":new un(at.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new un(at.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Kt(at.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Kt(at.paint_model["model-front-cutoff"]),"model-color-use-theme":new un({type:"string",default:"default","property-type":"data-driven"})}))},i,s,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new XA(l)}getProgramIds(){return["model"]}is3D(l){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(l){return l instanceof FS?Qt-1:0}queryIntersectsFeature(l,i,s,h,p,v){if(!this.modelManager)return!1;const x=this.modelManager,E=l.tile.getBucket(this);if(!(E&&E instanceof XA))return!1;for(const M in E.instancesPerModel){const P=E.instancesPerModel[M],k=i.id!==void 0?i.id:i.properties&&i.properties.hasOwnProperty("id")?i.properties.id:void 0;if(P.idToFeaturesIndex.hasOwnProperty(k)){const B=P.features[P.idToFeaturesIndex[k]],j=x.getModel(M,this.scope);if(!j)return!1;let X=U();const Z=new ce(0,0),oe=E.canonical;let de=Number.MAX_VALUE;for(let me=0;me<B.instancedDataCount;++me){const Se=16*(B.instancedDataOffset+me),be=P.instancedDataArray.float32,ae=[be[Se+4],be[Se+5],be[Se+6]];Ek(oe,Z,be[Se],0|be[Se+1]),xk(X,j,v,Z,B.rotation,B.scale,ae,!1,!1,!1),v.projection.name==="globe"&&(X=qA(X,v));const _e=W([],v.projMatrix,X),we=l.queryGeometry,Ie=pk(we.isPointQuery()?we.screenBounds:we.screenGeometry,v,_e,j.aabb);Ie!=null&&(de=Math.min(Ie,de))}return de!==Number.MAX_VALUE&&de}}return!1}_handleOverridablePaintPropertyUpdate(l,i,s){return!(!this.layout||i.isDataDriven()||s.isDataDriven()||l!=="model-color"&&l!=="model-color-mix-intensity"&&l!=="model-rotation"&&l!=="model-scale"&&l!=="model-translation"&&l!=="model-emissive-strength")}_isPropertyZoomDependent(l){const i=this._transitionablePaint._values[l];return i!=null&&i.value!=null&&i.value.expression!=null&&i.value.expression instanceof Bo}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends zs{constructor(l,i,s,h){super(l,{layout:eb||(eb=new co({"clip-layer-types":new Kt(at.layout_clip["clip-layer-types"]),"clip-layer-scope":new Kt(at.layout_clip["clip-layer-scope"])})),paint:nS||(nS=new co({}))},i,s,h)}recalculate(l,i){super.recalculate(l,i)}createBucket(l){return new tb(l)}is3D(l){return!0}}};class _G{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class vG{constructor(){this.tasks={},this.taskQueue=[],kn(["process"],this),this.invoker=new _G(this.process),this.nextId=0}add(i,s){const h=this.nextId++,p=function({type:v,isSymbolTile:x,zoom:E}){return E=E||0,v==="message"?0:v!=="maybePrepare"||x?v!=="parseTile"||x?v==="parseTile"&&x?300-E:v==="maybePrepare"&&x?400-E:500:200-E:100-E}(s);if(p===0){try{i()}finally{}return null}return this.tasks[h]={fn:i,metadata:s,priority:p,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const s=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let i=null,s=1/0;for(let p=0;p<this.taskQueue.length;p++){const v=this.tasks[this.taskQueue[p]];v.priority<s&&(s=v.priority,i=p)}if(i===null)return null;const h=this.taskQueue[i];return this.taskQueue.splice(i,1),h}remove(){this.invoker.remove()}}class Ck{constructor(i,s,h){this.target=i,this.parent=s,this.mapId=h,this.callbacks={},this.cancelCallbacks={},kn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new vG}send(i,s,h,p,v=!1,x){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=x,this.callbacks[E]=h);const M=new Set;return this.target.postMessage({id:E,type:i,hasCallback:!!h,targetMapId:p,mustQueue:v,sourceMapId:this.mapId,data:Yc(s,M)},M),{cancel:()=>{h&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(i){const s=i.data;if(!s)return;const h=s.id;if(h&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){const p=this.cancelCallbacks[h];delete this.cancelCallbacks[h],p&&p.cancel()}else if(s.mustQueue||Er(self)){const p=this.callbacks[h],v=this.scheduler.add(()=>this.processTask(h,s),p&&p.metadata||{type:"message"});v&&(this.cancelCallbacks[h]=v)}else this.processTask(h,s)}processTask(i,s){if(delete this.cancelCallbacks[i],s.type==="<response>"){const h=this.callbacks[i];delete this.callbacks[i],h&&(s.error?h($u(s.error)):h(null,$u(s.data)))}else{const h=new Set,p=s.hasCallback?(x,E)=>{this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:x?Yc(x):null,data:Yc(E,h)},h)}:()=>{},v=$u(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,v,p);else if(this.parent.getWorkerSource){const x=s.type.split("."),{source:E,scope:M}=v;this.parent.getWorkerSource(s.sourceMapId,x[0],E,M)[x[1]](v,p)}else p(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Eb={workerUrl:"",workerClass:null,workerParams:void 0};const JA="mapboxgl_preloaded_worker_pool";class __{constructor(){this.active={}}acquire(i,s=__.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<s;)this.workers.push(Eb.workerClass!=null?new Eb.workerClass:new self.Worker(Eb.workerUrl,Eb.workerParams));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.workers&&this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[JA]}numActive(){return Object.keys(this.active).length}}__.workerCount=2;class p0{constructor(i,s,h="Worker",p=__.workerCount){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=qt();const v=this.workerPool.acquire(this.id,p);for(let x=0;x<v.length;x++){const E=new p0.Actor(v[x],s,this.id);E.name=`${h} ${x}`,this.actors.push(E)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,s,h){st(this.actors,(p,v)=>{p.send(i,s,v)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Cb,QA;function NS(){return Cb||(Cb=new __),Cb}p0.Actor=Ck;const eM=new ir(0,0,0),tM={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},nM={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},jS={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},xG={PAINT_ORDER_FILL_AND_STROKE:1},Ab={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},Ak={MASK_TYPE_LUMINANCE:1};function bG(l,i,s){l===1&&i.icons.push(function(h,p){return function(v){if(v.usvg_tree.height||(v.usvg_tree.height=v.usvg_tree.width),!v.metadata)return v;const{metadata:x}=v;if(x.content_area){const{content_area:E}=x;E.top==null&&(E.top=E.left),E.width==null&&(E.width=v.usvg_tree.width),E.height==null&&(E.height=E.width)}return x.stretch_x&&x.stretch_x.length&&Mk(x,"x"),x.stretch_y&&x.stretch_y.length&&Mk(x,"y"),v}(h.readFields(wG,{name:void 0},p))}(s,s.readVarint()+s.pos))}function Mk(l,i){const s=[],h=l[`stretch_${i}`];let p=null;for(let v=0;v<h.length;v++)p===null?p=s.length===0?h[0]:s[s.length-1][1]+h[v]:(s.push([p,p+h[v]]),p=null);l[`stretch_${i}_areas`]=s}function wG(l,i,s){l===1?i.name=s.readString():l===2?i.metadata=function(h,p){return h.readFields(SG,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},p)}(s,s.readVarint()+s.pos):l===3&&(i.usvg_tree=function(h,p){return h.readFields(CG,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},p)}(s,s.readVarint()+s.pos),i.data="usvg_tree")}function SG(l,i,s){l===1?i.stretch_x=s.readPackedVarint():l===2?i.stretch_y=s.readPackedVarint():l===3?i.content_area=function(h,p){return h.readFields(TG,{left:0},p)}(s,s.readVarint()+s.pos):l===4&&i.variables.push(function(h,p){return h.readFields(EG,{name:void 0},p)}(s,s.readVarint()+s.pos))}function TG(l,i,s){l===1?i.left=s.readVarint():l===2?i.width=s.readVarint():l===3?i.top=s.readVarint():l===4&&(i.height=s.readVarint())}function EG(l,i,s){l===1?i.name=s.readString():l===2&&(i.rgb_color=$S(s.readVarint()),i.value="rgb_color")}function CG(l,i,s){l===1?i.width=i.height=s.readVarint():l===2?i.height=s.readVarint():l===3?i.children.push(US(s,s.readVarint()+s.pos)):l===4?i.linear_gradients.push(function(h,p){return h.readFields(OG,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},p)}(s,s.readVarint()+s.pos)):l===5?i.radial_gradients.push(function(h,p){return h.readFields(kG,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},p)}(s,s.readVarint()+s.pos)):l===7?i.clip_paths.push(function(h,p){return h.readFields(zG,{children:[]},p)}(s,s.readVarint()+s.pos)):l===8&&i.masks.push(function(h,p){const v=h.readFields(BG,{left:0,width:20,mask_type:Ak.MASK_TYPE_LUMINANCE,children:[]},p);return v.height==null&&(v.height=v.width),v.top==null&&(v.top=v.left),v}(s,s.readVarint()+s.pos))}function US(l,i){return l.readFields(AG,{},i)}function AG(l,i,s){l===1?(i.group=function(h,p){return h.readFields(MG,{opacity:255,children:[]},p)}(s,s.readVarint()+s.pos),i.node="group"):l===2&&(i.path=function(h,p){return h.readFields(IG,{paint_order:1,commands:[],step:1,diffs:[],rule:tM.PATH_RULE_NON_ZERO},p)}(s,s.readVarint()+s.pos),i.node="path")}function MG(l,i,s){l===1?i.transform=VS(s,s.readVarint()+s.pos):l===2?i.opacity=s.readVarint():l===5?i.clip_path_idx=s.readVarint():l===6?i.mask_idx=s.readVarint():l===7&&i.children.push(US(s,s.readVarint()+s.pos))}function VS(l,i){return l.readFields(RG,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},i)}function RG(l,i,s){l===1?i.sx=s.readFloat():l===2?i.ky=s.readFloat():l===3?i.kx=s.readFloat():l===4?i.sy=s.readFloat():l===5?i.tx=s.readFloat():l===6&&(i.ty=s.readFloat())}function IG(l,i,s){l===1?i.fill=function(h,p){return h.readFields(PG,{rgb_color:eM,paint:"rgb_color",opacity:255},p)}(s,s.readVarint()+s.pos):l===2?i.stroke=function(h,p){return h.readFields(DG,{rgb_color:eM,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},p)}(s,s.readVarint()+s.pos):l===3?i.paint_order=s.readVarint():l===5?s.readPackedVarint(i.commands):l===6?i.step=s.readFloat():l===7?s.readPackedSVarint(i.diffs):l===8&&(i.rule=s.readVarint())}function PG(l,i,s){l===1?(i.rgb_color=$S(s.readVarint()),i.paint="rgb_color"):l===2?(i.linear_gradient_idx=s.readVarint(),i.paint="linear_gradient_idx"):l===3?(i.radial_gradient_idx=s.readVarint(),i.paint="radial_gradient_idx"):l===5&&(i.opacity=s.readVarint())}function $S(l){return new ir((l>>16&255)/255,(l>>8&255)/255,(255&l)/255,1)}function DG(l,i,s){l===1?(i.rgb_color=$S(s.readVarint()),i.paint="rgb_color"):l===2?(i.linear_gradient_idx=s.readVarint(),i.paint="linear_gradient_idx"):l===3?(i.radial_gradient_idx=s.readVarint(),i.paint="radial_gradient_idx"):l===5?s.readPackedFloat(i.dasharray):l===6?i.dashoffset=s.readFloat():l===7?i.miterlimit=s.readFloat():l===8?i.opacity=s.readVarint():l===9?i.width=s.readFloat():l===10?i.linecap=s.readVarint():l===11&&(i.linejoin=s.readVarint())}function OG(l,i,s){l===1?i.transform=VS(s,s.readVarint()+s.pos):l===2?i.spread_method=s.readVarint():l===3?i.stops.push(Rk(s,s.readVarint()+s.pos)):l===4?i.x1=s.readFloat():l===5?i.y1=s.readFloat():l===6?i.x2=s.readFloat():l===7&&(i.y2=s.readFloat())}function Rk(l,i){return l.readFields(LG,{offset:0,opacity:255,rgb_color:eM},i)}function LG(l,i,s){l===1?i.offset=s.readFloat():l===2?i.opacity=s.readVarint():l===3&&(i.rgb_color=$S(s.readVarint()))}function kG(l,i,s){l===1?i.transform=VS(s,s.readVarint()+s.pos):l===2?i.spread_method=s.readVarint():l===3?i.stops.push(Rk(s,s.readVarint()+s.pos)):l===4?i.cx=s.readFloat():l===5?i.cy=s.readFloat():l===6?i.r=s.readFloat():l===7?i.fx=s.readFloat():l===8?i.fy=s.readFloat():l===9&&(i.fr=s.readFloat())}function zG(l,i,s){l===1?i.transform=VS(s,s.readVarint()+s.pos):l===2?i.clip_path_idx=s.readVarint():l===3&&i.children.push(US(s,s.readVarint()+s.pos))}function BG(l,i,s){l===1?i.left=i.top=s.readFloat():l===2?i.width=i.height=s.readFloat():l===3?i.top=s.readFloat():l===4?i.height=s.readFloat():l===5?i.mask_type=s.readVarint():l===6?i.mask_idx=s.readVarint():l===7&&i.children.push(US(s,s.readVarint()+s.pos))}class FG{static calculate(i={},s=[]){const h=new Map,p=new Map;if(Object.keys(i).length===0)return h;s.forEach(v=>{p.set(v.name,v.rgb_color||new ir(0,0,0))});for(const[v,x]of Object.entries(i))p.has(v)?h.set(p.get(v).toStringPremultipliedAlpha(),x):console.warn(`Ignoring unknown image variable "${v}"`);return h}}function m0(l,i=255,s){const h=i/255,p=l.toStringPremultipliedAlpha(),v=s.has(p)?s.get(p).clone():l.clone();return v.a*=h,v.toString()}function Mb(l,i){if(!Ta()){const s=document.createElement("canvas");return s.width=l,s.height=i,s}return new OffscreenCanvas(l,i)}function NG(l,i){const s=FG.calculate(i.params,l.metadata?l.metadata.variables:[]),h=l.usvg_tree,p=h.width,v=h.height,x=i.transform?i.transform:new DOMMatrix,E=Math.max(1,Math.round(p*x.a)),M=Math.max(1,Math.round(v*x.d)),P=new DOMMatrix([E/p,0,0,M/v,0,0]),k=Mb(E,M).getContext("2d");return iM(k,P,h,h,s),k.getImageData(0,0,E,M)}function iM(l,i,s,h,p){for(const v of h.children)Ik(l,i,s,v,p)}function Ik(l,i,s,h,p){h.group?(l.save(),function(v,x,E,M,P){const k=M.mask_idx!=null?E.masks[M.mask_idx]:null,B=M.clip_path_idx!=null?E.clip_paths[M.clip_path_idx]:null;if(M.transform&&(x=HS(M.transform).preMultiplySelf(x)),!function(Z,oe,de){return Z.opacity!==255||oe||de}(M,B!=null,k!=null))return void iM(v,x,E,M,P);const j=Mb(v.canvas.width,v.canvas.height),X=j.getContext("2d");iM(X,x,E,M,P),B&&Bk(X,x,E,B),k&&Fk(X,x,E,k,P),v.globalAlpha=M.opacity/255,v.drawImage(j,0,0)}(l,i,s,h.group,p),l.restore()):h.path&&(l.save(),function(v,x,E,M,P){const k=Nk(M);v.setTransform(x),M.paint_order===xG.PAINT_ORDER_FILL_AND_STROKE?(Pk(v,E,M,k,P),Ok(v,E,M,k,P)):(Ok(v,E,M,k,P),Pk(v,E,M,k,P))}(l,i,s,h.path,p),l.restore())}function Pk(l,i,s,h,p){const v=s.fill;if(!v)return;const x=v.opacity/255;switch(v.paint){case"rgb_color":l.fillStyle=m0(v.rgb_color,v.opacity,p);break;case"linear_gradient_idx":l.fillStyle=Lk(l,i.linear_gradients[v.linear_gradient_idx],x,p);break;case"radial_gradient_idx":l.fillStyle=kk(l,i.radial_gradients[v.radial_gradient_idx],x,p)}l.fill(h,Dk(s))}function Dk(l){return l.rule===tM.PATH_RULE_NON_ZERO?"nonzero":l.rule===tM.PATH_RULE_EVEN_ODD?"evenodd":void 0}function Ok(l,i,s,h,p){const v=s.stroke;if(!v)return;l.lineWidth=v.width,l.miterLimit=v.miterlimit,l.setLineDash(v.dasharray),l.lineDashOffset=v.dashoffset;const x=v.opacity/255;switch(v.paint){case"rgb_color":l.strokeStyle=m0(v.rgb_color,v.opacity,p);break;case"linear_gradient_idx":l.strokeStyle=Lk(l,i.linear_gradients[v.linear_gradient_idx],x,p);break;case"radial_gradient_idx":l.strokeStyle=kk(l,i.radial_gradients[v.radial_gradient_idx],x,p)}switch(v.linejoin){case jS.LINE_JOIN_MITER_CLIP:case jS.LINE_JOIN_MITER:l.lineJoin="miter";break;case jS.LINE_JOIN_ROUND:l.lineJoin="round";break;case jS.LINE_JOIN_BEVEL:l.lineJoin="bevel"}switch(v.linecap){case nM.LINE_CAP_BUTT:l.lineCap="butt";break;case nM.LINE_CAP_ROUND:l.lineCap="round";break;case nM.LINE_CAP_SQUARE:l.lineCap="square"}l.stroke(h)}function Lk(l,i,s,h){if(i.stops.length===1){const j=i.stops[0];return m0(j.rgb_color,j.opacity*s,h)}const p=HS(i.transform),{x1:v,y1:x,x2:E,y2:M}=i,P=p.transformPoint(new DOMPoint(v,x)),k=p.transformPoint(new DOMPoint(E,M)),B=l.createLinearGradient(P.x,P.y,k.x,k.y);for(const j of i.stops)B.addColorStop(j.offset,m0(j.rgb_color,j.opacity*s,h));return B}function kk(l,i,s,h){if(i.stops.length===1){const j=i.stops[0];return m0(j.rgb_color,j.opacity*s,h)}const p=HS(i.transform),{fx:v,fy:x,cx:E,cy:M}=i,P=p.transformPoint(new DOMPoint(v,x)),k=p.transformPoint(new DOMPoint(E,M)),B=l.createRadialGradient(P.x,P.y,0,k.x,k.y,i.r*((p.a+p.d)/2));for(const j of i.stops)B.addColorStop(j.offset,m0(j.rgb_color,j.opacity*s,h));return B}function zk(l,i,s,h){const p=h.transform?HS(h.transform).preMultiplySelf(i):i,v=Mb(l.canvas.width,l.canvas.height),x=v.getContext("2d");for(const M of h.children)if(M.group)zk(x,p,s,M.group);else if(M.path){const P=M.path,k=new Path2D;k.addPath(Nk(P),p),x.fill(k,Dk(P))}const E=h.clip_path_idx!=null?s.clip_paths[h.clip_path_idx]:null;E&&Bk(x,p,s,E),l.globalCompositeOperation="source-over",l.drawImage(v,0,0)}function Bk(l,i,s,h){const p=Mb(l.canvas.width,l.canvas.height);zk(p.getContext("2d"),i,s,h),l.globalCompositeOperation="destination-in",l.drawImage(p,0,0)}function Fk(l,i,s,h,p){if(h.children.length===0)return;const v=h.mask_idx!=null?s.masks[h.mask_idx]:null;v&&Fk(l,i,s,v,p);const x=l.canvas.width,E=l.canvas.height,M=Mb(x,E),P=M.getContext("2d"),k=h.width,B=h.height,j=h.left,X=h.top,Z=new Path2D,oe=new Path2D;oe.rect(j,X,k,B),Z.addPath(oe,i),P.clip(Z);for(const Se of h.children)Ik(P,i,s,Se,p);const de=P.getImageData(0,0,x,E),me=de.data;if(h.mask_type===Ak.MASK_TYPE_LUMINANCE)for(let Se=0;Se<me.length;Se+=4)me[Se+3]=me[Se+3]/255*(.2126*me[Se]+.7152*me[Se+1]+.0722*me[Se+2]);P.putImageData(de,0,0),l.globalCompositeOperation="destination-in",l.drawImage(M,0,0)}function HS(l){return l?new DOMMatrix([l.sx,l.ky,l.kx,l.sy,l.tx,l.ty]):new DOMMatrix}function Nk(l){const i=new Path2D,s=l.step;let h=l.diffs[0]*s,p=l.diffs[1]*s;i.moveTo(h,p);for(let v=0,x=2;v<l.commands.length;v++)switch(l.commands[v]){case Ab.PATH_COMMAND_MOVE:h+=l.diffs[x++]*s,p+=l.diffs[x++]*s,i.moveTo(h,p);break;case Ab.PATH_COMMAND_LINE:h+=l.diffs[x++]*s,p+=l.diffs[x++]*s,i.lineTo(h,p);break;case Ab.PATH_COMMAND_QUAD:{const E=h+l.diffs[x++]*s,M=p+l.diffs[x++]*s;h=E+l.diffs[x++]*s,p=M+l.diffs[x++]*s,i.quadraticCurveTo(E,M,h,p);break}case Ab.PATH_COMMAND_CUBIC:{const E=h+l.diffs[x++]*s,M=p+l.diffs[x++]*s,P=E+l.diffs[x++]*s,k=M+l.diffs[x++]*s;h=P+l.diffs[x++]*s,p=k+l.diffs[x++]*s,i.bezierCurveTo(E,M,P,k,h,p);break}case Ab.PATH_COMMAND_CLOSE:i.closePath()}return i}class GS{constructor(i){this.capacity=i,this.cache=new Map}get(i){if(!this.cache.has(i))return;const s=this.cache.get(i);return this.cache.delete(i),this.cache.set(i,s),s}put(i,s){this.cache.has(i)?this.cache.delete(i):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(i,s)}delete(i){this.cache.delete(i)}}hn(GS,"LRUCache");class rM{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(i){return new ps(i,i.data)}getFromCache(i,s,h){return this.cacheMap.has(h)||this.cacheMap.set(h,new GS(150)),this.cacheMap.get(h).get(Xu(i.toString(),s))}setInCache(i,s,h,p){this.cacheDependenciesMap.has(p)||this.cacheDependenciesMap.set(p,new Map),this.cacheMap.has(p)||this.cacheMap.set(p,new GS(150));const v=this.cacheDependenciesMap.get(p),x=Xu(i.id.toString(),h);v.get(x)||v.set(x,new Set);const E=this.cacheMap.get(p),M=i.toString();v.get(x).add(M),E.put(Xu(i.toString(),h),s)}removeImagesFromCacheByIds(i,s,h=0){if(!this.cacheMap.has(h)||!this.cacheDependenciesMap.has(h))return;const p=this.cacheMap.get(h),v=this.cacheDependenciesMap.get(h);for(const x of i){const E=Xu(x.toString(),s);if(v.has(E)){for(const M of v.get(E))p.delete(M);v.delete(E)}}}rasterize(i,s,h,p,v=NG){const x=this.getFromCache(i,h,p);if(x)return x.clone();const E=v(s.icon,i.options),M=rM._getImage(E);return this.setInCache(i,M,h,p),M.clone()}}class jk{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,s){const h=this.toIdx(i,s);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(i,s){return this.leaves[this.toIdx(i,s)]}toIdx(i,s){return s*this.size+i}}function Uk(l,i,s,h){let p=0,v=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(h[x])<1e-15){if(s[x]<l[x]||s[x]>i[x])return null}else{const E=1/h[x];let M=(l[x]-s[x])*E,P=(i[x]-s[x])*E;if(M>P){const k=M;M=P,P=k}if(M>p&&(p=M),P<v&&(v=P),p>v)return null}return p}function Vk(l,i,s,h,p,v,x,E,M,P,k){const B=h-l,j=p-i,X=v-s,Z=x-l,oe=E-i,de=M-s,me=k[1]*de-k[2]*oe,Se=k[2]*Z-k[0]*de,be=k[0]*oe-k[1]*Z,ae=B*me+j*Se+X*be;if(Math.abs(ae)<1e-15)return null;const _e=1/ae,we=P[0]-l,Ie=P[1]-i,Ge=P[2]-s,Ze=(we*me+Ie*Se+Ge*be)*_e;if(Ze<0||Ze>1)return null;const Ye=Ie*X-Ge*j,tt=Ge*B-we*X,vt=we*j-Ie*B,kt=(k[0]*Ye+k[1]*tt+k[2]*vt)*_e;return kt<0||Ze+kt>1?null:(Z*Ye+oe*tt+de*vt)*_e}function $k(l,i,s){return(l-i)/(s-i)}function Hk(l,i,s,h,p,v,x,E,M){const P=1<<s,k=v-h,B=x-p,j=(l+1)/P*k+h,X=(i+0)/P*B+p,Z=(i+1)/P*B+p;E[0]=(l+0)/P*k+h,E[1]=X,M[0]=j,M[1]=Z}class Gk{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(v){const x=Math.ceil(Math.log2(v.dim/8)),E=[];let M=Math.ceil(Math.pow(2,x));const P=1/M,k=(X,Z,oe,de,me)=>{const Se=de?1:0,be=(X+1)*oe-Se,ae=Z*oe,_e=(Z+1)*oe-Se;me[0]=X*oe,me[1]=ae,me[2]=be,me[3]=_e};let B=new jk(M);const j=[];for(let X=0;X<M*M;X++){k(X%M,Math.floor(X/M),P,!1,j);const Z=Tg(j[0],j[1],v),oe=Tg(j[2],j[1],v),de=Tg(j[2],j[3],v),me=Tg(j[0],j[3],v);B.minimums.push(Math.min(Z,oe,de,me)),B.maximums.push(Math.max(Z,oe,de,me)),B.leaves.push(1)}for(E.push(B),M/=2;M>=1;M/=2){const X=E[E.length-1];B=new jk(M);for(let Z=0;Z<M*M;Z++){k(Z%M,Math.floor(Z/M),2,!0,j);const oe=X.getElevation(j[0],j[1]),de=X.getElevation(j[2],j[1]),me=X.getElevation(j[2],j[3]),Se=X.getElevation(j[0],j[3]),be=X.isLeaf(j[0],j[1]),ae=X.isLeaf(j[2],j[1]),_e=X.isLeaf(j[2],j[3]),we=X.isLeaf(j[0],j[3]),Ie=Math.min(oe.min,de.min,me.min,Se.min),Ge=Math.max(oe.max,de.max,me.max,Se.max),Ze=be&&ae&&_e&&we;B.maximums.push(Ge),B.minimums.push(Ie),B.leaves.push(Ge-Ie<=5&&Ze?1:0)}E.push(B)}return E}(this.dem),h=s.length-1,p=s[h];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(s,0,0,h,0)}raycastRoot(i,s,h,p,v,x,E=1){return Uk([i,s,-100],[h,p,this.maximums[0]*E],v,x)}raycast(i,s,h,p,v,x,E=1){if(!this.nodeCount)return null;const M=this.raycastRoot(i,s,h,p,v,x,E);if(M==null)return null;const P=[],k=[],B=[],j=[],X=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;X.length>0;){const{idx:Z,t:oe,nodex:de,nodey:me,depth:Se}=X.pop();if(this.leaves[Z]){Hk(de,me,Se,i,s,h,p,B,j);const ae=1<<Se,_e=(de+0)/ae,we=(de+1)/ae,Ie=(me+0)/ae,Ge=(me+1)/ae,Ze=Tg(_e,Ie,this.dem)*E,Ye=Tg(we,Ie,this.dem)*E,tt=Tg(we,Ge,this.dem)*E,vt=Tg(_e,Ge,this.dem)*E,kt=Vk(B[0],B[1],Ze,j[0],B[1],Ye,j[0],j[1],tt,v,x),It=Vk(j[0],j[1],tt,B[0],j[1],vt,B[0],B[1],Ze,v,x),Dt=Math.min(kt!==null?kt:Number.MAX_VALUE,It!==null?It:Number.MAX_VALUE);if(Dt!==Number.MAX_VALUE)return Dt;{const $t=ht([],v,x,oe);if(qk(Ze,Ye,vt,tt,$k($t[0],B[0],j[0]),$k($t[1],B[1],j[1]))>=$t[2])return oe}continue}let be=0;for(let ae=0;ae<this._siblingOffset.length;ae++){Hk((de<<1)+this._siblingOffset[ae][0],(me<<1)+this._siblingOffset[ae][1],Se+1,i,s,h,p,B,j),B[2]=-100,j[2]=this.maximums[this.childOffsets[Z]+ae]*E;const _e=Uk(B,j,v,x);if(_e!=null){const we=_e;P[ae]=we;let Ie=!1;for(let Ge=0;Ge<be&&!Ie;Ge++)we>=P[k[Ge]]&&(k.splice(Ge,0,ae),Ie=!0);Ie||(k[be]=ae),be++}}for(let ae=0;ae<be;ae++){const _e=k[ae];X.push({idx:this.childOffsets[Z]+_e,t:P[_e],nodex:(de<<1)+this._siblingOffset[_e][0],nodey:(me<<1)+this._siblingOffset[_e][1],depth:Se+1})}}return null}_addNode(i,s,h){return this.minimums.push(i),this.maximums.push(s),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(i,s,h,p,v){if(i[p].isLeaf(s,h)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const x=p-1,E=i[x];let M=0,P=0;for(let k=0;k<this._siblingOffset.length;k++){const B=2*s+this._siblingOffset[k][0],j=2*h+this._siblingOffset[k][1],X=E.getElevation(B,j),Z=E.isLeaf(B,j),oe=this._addNode(X.min,X.max,Z);Z&&(M|=1<<k),P||(P=oe)}for(let k=0;k<this._siblingOffset.length;k++)M&1<<k||this._construct(i,2*s+this._siblingOffset[k][0],2*h+this._siblingOffset[k][1],x,P+k)}}function qk(l,i,s,h,p,v){return jn(jn(l,s,v),jn(i,h,v),p)}function Tg(l,i,s){const h=s.dim,p=Fe(l*h-.5,0,h-1),v=Fe(i*h-.5,0,h-1),x=Math.floor(p),E=Math.floor(v),M=Math.min(x+1,h-1),P=Math.min(E+1,h-1);return qk(s.get(x,E),s.get(M,E),s.get(x,P),s.get(M,P),p-x,v-E)}const jG={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function UG(l,i,s){return(256*l*256+256*i+s)/10-1e4}function VG(l,i,s){return 256*l+i+s/256-32768}class qS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,s,h,p=!1){if(this.uid=i,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void ui(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const v=this.dim=s.height-2,x=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.floatView=new Float32Array(s.data.buffer),this.borderReady=p,this._modifiedForSources={},!p){for(let M=0;M<v;M++)x[this._idx(-1,M)]=x[this._idx(0,M)],x[this._idx(v,M)]=x[this._idx(v-1,M)],x[this._idx(M,-1)]=x[this._idx(M,0)],x[this._idx(M,v)]=x[this._idx(M,v-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(v,-1)]=x[this._idx(v-1,0)],x[this._idx(-1,v)]=x[this._idx(0,v-1)],x[this._idx(v,v)]=x[this._idx(v-1,v-1)]}const E=h==="terrarium"?VG:UG;for(let M=0;M<x.length;++M){const P=4*M;this.floatView[M]=E(this.pixels[P],this.pixels[P+1],this.pixels[P+2])}this._timestamp=qa.now()}_buildQuadTree(){this._tree=new Gk(this)}get(i,s,h=!1){h&&(i=Fe(i,-1,this.dim),s=Fe(s,-1,this.dim));const p=this._idx(i,s);return this.floatView[p]}set(i,s,h){const p=this._idx(i,s),v=this.floatView[p];return this.floatView[p]=h,h-v}static getUnpackVector(i){return jG[i]}_idx(i,s){if(i<-1||i>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(i+1)}static pack(i,s){const h=[0,0,0,0],p=qS.getUnpackVector(s);let v=Math.floor((i+p[3])/p[2]);return h[2]=v%256,v=Math.floor(v/256),h[1]=v%256,v=Math.floor(v/256),h[0]=v,h}getPixels(){return new Ux({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,s,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,E=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=E-1;break;case 1:E=x+1}const M=-s*this.dim,P=-h*this.dim;for(let k=x;k<E;k++)for(let B=p;B<v;B++){const j=4*this._idx(B,k),X=4*this._idx(B+M,k+P);this.pixels[j+0]=i.pixels[X+0],this.pixels[j+1]=i.pixels[X+1],this.pixels[j+2]=i.pixels[X+2],this.pixels[j+3]=i.pixels[X+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function $G(l,i,s){l===1?i.headerLength=s.readFixed32():l===2?i.x=s.readVarint():l===3?i.y=s.readVarint():l===4?i.z=s.readVarint():l===5&&i.layers.push(function(h,p){return h.readFields(XG,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},p)}(s,s.readVarint()+s.pos))}function HG(l,i,s){l===1?(i.delta_filter=function(h,p){return h.readFields(GG,{blockSize:0},p)}(s,s.readVarint()+s.pos),i.filter="delta_filter"):l===2?(s.readVarint(),i.filter="zigzag_filter"):l===3?(s.readVarint(),i.filter="bitshuffle_filter"):l===4&&(s.readVarint(),i.filter="byteshuffle_filter")}function GG(l,i,s){l===1&&(i.blockSize=s.readVarint())}function qG(l,i,s){l===1?(s.readVarint(),i.codec="gzip_data"):l===2?(s.readVarint(),i.codec="jpeg_image"):l===3?(s.readVarint(),i.codec="webp_image"):l===4&&(s.readVarint(),i.codec="png_image")}function WG(l,i,s){let h=0,p=0;l===1?i.firstByte=s.readFixed64():l===2?i.lastByte=s.readFixed64():l===3?i.filters.push(function(v,x){return v.readFields(HG,{},x)}(s,s.readVarint()+s.pos)):l===4?i.codec=function(v,x){return v.readFields(qG,{},x)}(s,s.readVarint()+s.pos):l===5?p=s.readFloat():l===6?h=s.readFloat():l===7?i.bands.push(s.readString()):l===8?i.offset=s.readDouble():l===9&&(i.scale=s.readDouble()),i.offset===0&&(i.offset=p),i.scale===0&&(i.scale=h)}function XG(l,i,s){l===1?i.version=s.readVarint():l===2?i.name=s.readString():l===3?i.units=s.readString():l===4?i.tileSize=s.readVarint():l===5?i.buffer=s.readVarint():l===6?i.pixelFormat=s.readVarint():l===7&&i.dataIndex.push(function(h,p){return h.readFields(WG,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},p)}(s,s.readVarint()+s.pos))}function ZG(l,i,s){if(l===2)(function(h,p,v){h.readFields(YG,v,p)})(s,s.readVarint()+s.pos,i);else if(l===3)throw new Error("Not implemented")}function YG(l,i,s){if(l===1){let h=0;const p=s.readVarint()+s.pos;for(;s.pos<p;)i[h++]=s.readVarint()}}function KG(l,i){if(i.length!==4)throw new Error(`Expected data of dimension 4 but got ${i.length}.`);let s=i[3];for(let h=2;h>=1;h--){const p=h===1?1:0,v=h===2?1:0;for(let x=0;x<i[0];x++){const E=i[1]*x;for(let M=p;M<i[1];M++){const P=i[2]*(M+E);for(let k=v;k<i[2];k++){const B=i[3]*(k+P);for(let j=0;j<i[3];j++){const X=B+j;l[X]+=l[X-s]}}}}s*=i[h]}return l}function JG(l){for(let i=0,s=l.length;i<s;i++)l[i]=l[i]>>>1^-(1&l[i]);return l}function QG(l,i){switch(i){case"uint32":return l;case"uint16":for(let s=0;s<l.length;s+=2){const h=l[s],p=l[s+1];l[s]=(240&h)>>4|(61440&h)>>8|(240&p)<<4|61440&p,l[s+1]=15&h|(3840&h)>>4|(15&p)<<8|(3840&p)<<4}return l;case"uint8":for(let s=0;s<l.length;s+=4){const h=l[s],p=l[s+1],v=l[s+2],x=l[s+3];l[s+0]=(192&h)>>6|(192&p)>>4|(192&v)>>2|192&x,l[s+1]=(48&h)>>4|(48&p)>>2|48&v|(48&x)<<2,l[s+2]=(12&h)>>2|12&p|(12&v)<<2|(12&x)<<4,l[s+3]=3&h|(3&p)<<2|(3&v)<<4|(3&x)<<6}return l;default:throw new Error(`Invalid pixel format, "${i}"`)}}hn(qS,"DEMData"),hn(Gk,"DemMinMaxQuadTree",{omit:["dem"]});var cu=Uint8Array,Rb=Uint16Array,eq=Int32Array,Wk=new cu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xk=new cu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tq=new cu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zk=function(l,i){for(var s=new Rb(31),h=0;h<31;++h)s[h]=i+=1<<l[h-1];var p=new eq(s[30]);for(h=1;h<30;++h)for(var v=s[h];v<s[h+1];++v)p[v]=v-s[h]<<5|h;return{b:s,r:p}},Yk=Zk(Wk,2),Kk=Yk.b,nq=Yk.r;Kk[28]=258,nq[258]=28;for(var iq=Zk(Xk,0).b,Jk=new Rb(32768),rs=0;rs<32768;++rs){var g0=(43690&rs)>>1|(21845&rs)<<1;Jk[rs]=((65280&(g0=(61680&(g0=(52428&g0)>>2|(13107&g0)<<2))>>4|(3855&g0)<<4))>>8|(255&g0)<<8)>>1}var Ib=function(l,i,s){for(var h=l.length,p=0,v=new Rb(i);p<h;++p)l[p]&&++v[l[p]-1];var x,E=new Rb(i);for(p=1;p<i;++p)E[p]=E[p-1]+v[p-1]<<1;x=new Rb(1<<i);var M=15-i;for(p=0;p<h;++p)if(l[p])for(var P=p<<4|l[p],k=i-l[p],B=E[l[p]-1]++<<k,j=B|(1<<k)-1;B<=j;++B)x[Jk[B]>>M]=P;return x},Pb=new cu(288);for(rs=0;rs<144;++rs)Pb[rs]=8;for(rs=144;rs<256;++rs)Pb[rs]=9;for(rs=256;rs<280;++rs)Pb[rs]=7;for(rs=280;rs<288;++rs)Pb[rs]=8;var Qk=new cu(32);for(rs=0;rs<32;++rs)Qk[rs]=5;var rq=Ib(Pb,9),oq=Ib(Qk,5),oM=function(l){for(var i=l[0],s=1;s<l.length;++s)l[s]>i&&(i=l[s]);return i},Ed=function(l,i,s){var h=i/8|0;return(l[h]|l[h+1]<<8)>>(7&i)&s},sM=function(l,i){var s=i/8|0;return(l[s]|l[s+1]<<8|l[s+2]<<16)>>(7&i)},sq=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Cd=function(l,i,s){var h=new Error(i||sq[l]);if(h.code=l,Error.captureStackTrace&&Error.captureStackTrace(h,Cd),!s)throw h;return h},aq=new cu(0),lq=typeof TextDecoder<"u"&&new TextDecoder;try{lq.decode(aq,{stream:!0})}catch{}const cq={gzip_data:"gzip"};class lh extends Error{constructor(i){super(i),this.name="MRTError"}}const uq={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},ez={uint32:1,uint16:2,uint8:4},hq={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let aM;class WS{constructor(i=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=i}getLayer(i){const s=this.layers[i];if(!s)throw new lh(`Layer '${i}' not found`);return s}getHeaderLength(i){const s=new Uint8Array(i),h=new DataView(i);if(s[0]!==13)throw new lh("File is not a valid MRT.");return h.getUint32(1,!0)}parseHeader(i){const s=new Uint8Array(i),h=this.getHeaderLength(i);if(s.length<h)throw new lh(`Expected header with length >= ${h} but got buffer of length ${s.length}`);const p=function(v,x){return v.readFields($G,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new aM(s.subarray(0,h)));if(!isNaN(this.x)&&(this.x!==p.x||this.y!==p.y||this.z!==p.z))throw new lh(`Invalid attempt to parse header ${p.z}/${p.x}/${p.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=p.x,this.y=p.y,this.z=p.z;for(const v of p.layers)this.layers[v.name]=new tz(v,{cacheSize:this._cacheSize});return this}createDecodingTask(i){const s=[],h=this.getLayer(i.layerName);for(let p of i.blockIndices){const v=h.dataIndex[p],x=v.firstByte-i.firstByte,E=v.lastByte-i.firstByte;if(h._blocksInProgress.has(p))continue;const M={layerName:h.name,firstByte:x,lastByte:E,pixelFormat:h.pixelFormat,blockIndex:p,blockShape:[v.bands.length].concat(h.bandShape),buffer:h.buffer,codec:v.codec.codec,filters:v.filters.map(P=>P.filter)};h._blocksInProgress.add(p),s.push(M)}return new nz(s,()=>{s.forEach(p=>h._blocksInProgress.delete(p.blockIndex))},(p,v)=>{if(s.forEach(x=>h._blocksInProgress.delete(x.blockIndex)),p)throw p;v.forEach(x=>{this.getLayer(x.layerName).processDecodedData(x)})})}}class tz{constructor({version:i,name:s,units:h,tileSize:p,pixelFormat:v,buffer:x,dataIndex:E},M){if(this.version=i,this.version!==1)throw new lh(`Cannot parse raster layer encoded with MRT version ${i}`);this.name=s,this.units=h,this.tileSize=p,this.buffer=x,this.pixelFormat=uq[v],this.dataIndex=E,this.bandShape=[p+2*x,p+2*x,ez[this.pixelFormat]],this._decodedBlocks=new GS(M?M.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return ez[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:i})=>i).flat()}processDecodedData(i){const s=i.blockIndex.toString();this._decodedBlocks.get(s)||this._decodedBlocks.put(s,i.data)}getBlockForBand(i){let s=0;switch(typeof i){case"string":for(const[h,p]of this.dataIndex.entries()){for(const[v,x]of p.bands.entries())if(x===i)return{bandIndex:s+v,blockIndex:h,blockBandIndex:v};s+=p.bands.length}break;case"number":for(const[h,p]of this.dataIndex.entries()){if(i>=s&&i<s+p.bands.length)return{bandIndex:i,blockIndex:h,blockBandIndex:i-s};s+=p.bands.length}break;default:throw new lh(`Invalid band \`${JSON.stringify(i)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(i){let s=1/0,h=-1/0;const p=[],v=new Set;for(const x of i){const{blockIndex:E}=this.getBlockForBand(x);if(E<0)throw new lh(`Invalid band: ${JSON.stringify(x)}`);const M=this.dataIndex[E];p.includes(E)||p.push(E),v.add(E),s=Math.min(s,M.firstByte),h=Math.max(h,M.lastByte)}if(v.size>this.cacheSize)throw new lh(`Number of blocks to decode (${v.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:s,lastByte:h,blockIndices:p}}hasBand(i){const{blockIndex:s}=this.getBlockForBand(i);return s>=0}hasDataForBand(i){const{blockIndex:s}=this.getBlockForBand(i);return s>=0&&!!this._decodedBlocks.get(s.toString())}getBandView(i){const{blockIndex:s,blockBandIndex:h}=this.getBlockForBand(i);if(s<0)throw new lh(`Band not found: ${JSON.stringify(i)}`);const p=this._decodedBlocks.get(s.toString());if(!p)throw new lh(`Data for band ${JSON.stringify(i)} of layer "${this.name}" not decoded.`);const v=this.dataIndex[s],x=this.bandShape.reduce((P,k)=>P*k,1),E=h*x,M=p.subarray(E,E+x);return{data:M,bytes:new Uint8Array(M.buffer).subarray(M.byteOffset,M.byteOffset+M.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:v.offset,scale:v.scale}}}WS.setPbf=function(l){aM=l};class nz{constructor(i,s,h){this.tasks=i,this._onCancel=s,this._onComplete=h,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(i,s){this._finalized||(this._onComplete(i,s),this._finalized=!0)}}WS.performDecoding=function(l,i){const s=new Uint8Array(l);return Promise.all(i.tasks.map(h=>{const{layerName:p,firstByte:v,lastByte:x,pixelFormat:E,blockShape:M,blockIndex:P,filters:k,codec:B}=h,j=s.subarray(v,x+1),X=new Uint32Array(M[0]*M[1]*M[2]);let Z;if(B!=="gzip_data")throw new lh(`Unhandled codec: ${B}`);return Z=function(oe,de){if(!globalThis.DecompressionStream&&de==="gzip_data")return Promise.resolve(((ae=function(Ie){Ie[0]==31&&Ie[1]==139&&Ie[2]==8||Cd(6,"invalid gzip data");var Ge=Ie[3],Ze=10;4&Ge&&(Ze+=2+(Ie[10]|Ie[11]<<8));for(var Ye=(Ge>>3&1)+(Ge>>4&1);Ye>0;Ye-=!Ie[Ze++]);return Ze+(2&Ge)}(be=oe))+8>be.length&&Cd(6,"invalid gzip data"),function(Ie,Ge,Ze,Ye){var tt=Ie.length;if(!tt||Ge.f&&!Ge.l)return Ze||new cu(0);var vt=!Ze,kt=vt||Ge.i!=2,It=Ge.i;vt&&(Ze=new cu(3*tt));var Dt,$t,yt=function(wo){var eo=Ze.length;if(wo>eo){var Hr=new cu(Math.max(2*eo,wo));Hr.set(Ze),Ze=Hr}},Pt=Ge.f||0,gt=Ge.p||0,_t=Ge.b||0,Gt=Ge.l,Xt=Ge.d,En=Ge.m,gn=Ge.n,rn=8*tt;do{if(!Gt){Pt=Ed(Ie,gt,1);var Ht=Ed(Ie,gt+1,3);if(gt+=3,!Ht){var ri=Ie[(Me=4+((gt+7)/8|0))-4]|Ie[Me-3]<<8,xn=Me+ri;if(xn>tt){It&&Cd(0);break}kt&&yt(_t+ri),Ze.set(Ie.subarray(Me,xn),_t),Ge.b=_t+=ri,Ge.p=gt=8*xn,Ge.f=Pt;continue}if(Ht==1)Gt=rq,Xt=oq,En=9,gn=5;else if(Ht==2){var bn=Ed(Ie,gt,31)+257,Qn=Ed(Ie,gt+10,15)+4,gi=bn+Ed(Ie,gt+5,31)+1;gt+=14;for(var _i=new cu(gi),Ei=new cu(19),Si=0;Si<Qn;++Si)Ei[tq[Si]]=Ed(Ie,gt+3*Si,7);gt+=3*Qn;var xi=oM(Ei),kr=(1<<xi)-1,Xr=Ib(Ei,xi);for(Si=0;Si<gi;){var Me,Oe=Xr[Ed(Ie,gt,kr)];if(gt+=15&Oe,(Me=Oe>>4)<16)_i[Si++]=Me;else{var St=0,Jt=0;for(Me==16?(Jt=3+Ed(Ie,gt,3),gt+=2,St=_i[Si-1]):Me==17?(Jt=3+Ed(Ie,gt,7),gt+=3):Me==18&&(Jt=11+Ed(Ie,gt,127),gt+=7);Jt--;)_i[Si++]=St}}var an=_i.subarray(0,bn),sn=_i.subarray(bn);En=oM(an),gn=oM(sn),Gt=Ib(an,En),Xt=Ib(sn,gn)}else Cd(1);if(gt>rn){It&&Cd(0);break}}kt&&yt(_t+131072);for(var Tn=(1<<En)-1,Zn=(1<<gn)-1,ki=gt;;ki=gt){var zi=(St=Gt[sM(Ie,gt)&Tn])>>4;if((gt+=15&St)>rn){It&&Cd(0);break}if(St||Cd(2),zi<256)Ze[_t++]=zi;else{if(zi==256){ki=gt,Gt=null;break}var bi=zi-254;zi>264&&(bi=Ed(Ie,gt,(1<<(Bi=Wk[Si=zi-257]))-1)+Kk[Si],gt+=Bi);var Cr=Xt[sM(Ie,gt)&Zn],$r=Cr>>4;if(Cr||Cd(3),gt+=15&Cr,sn=iq[$r],$r>3){var Bi=Xk[$r];sn+=sM(Ie,gt)&(1<<Bi)-1,gt+=Bi}if(gt>rn){It&&Cd(0);break}kt&&yt(_t+131072);var mo=_t+bi;if(_t<sn){var Zr=0-sn,Sr=Math.min(sn,mo);for(Zr+_t<0&&Cd(3);_t<Sr;++_t)Ze[_t]=(void 0)[Zr+_t]}for(;_t<mo;++_t)Ze[_t]=Ze[_t-sn]}}Ge.l=Gt,Ge.p=ki,Ge.b=_t,Ge.f=Pt,Gt&&(Pt=1,Ge.m=En,Ge.d=Xt,Ge.n=gn)}while(!Pt);return _t!=Ze.length&&vt?(Dt=Ze,(($t=_t)==null||$t>Dt.length)&&($t=Dt.length),new cu(Dt.subarray(0,$t))):Ze.subarray(0,_t)}(be.subarray(ae,-8),{i:2},new cu(((me=be)[(Se=me.length)-4]|me[Se-3]<<8|me[Se-2]<<16|me[Se-1]<<24)>>>0))));var me,Se,be,ae;const _e=cq[de];if(!_e)throw new Error(`Unhandled codec: ${de}`);const we=new globalThis.DecompressionStream(_e);return new Response(new Blob([oe]).stream().pipeThrough(we)).arrayBuffer().then(Ie=>new Uint8Array(Ie))}(j,B).then(oe=>(function(de,me){de.readFields(ZG,me)}(new aM(oe),X),new hq[E](X.buffer))),Z.then(oe=>{for(let de=k.length-1;de>=0;de--)switch(k[de]){case"delta_filter":KG(oe,M);break;case"zigzag_filter":JG(oe);break;case"bitshuffle_filter":QG(oe,E);break;default:throw new lh(`Unhandled filter "${k[de]}"`)}return{layerName:p,blockIndex:P,data:oe}}).catch(oe=>{throw oe})}))},hn(nz,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),hn(WS,"MapboxRasterTile"),hn(tz,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Db,lM,Ad,y0,cM,_0=null;function iz(){return Er(self)&&self.worker.dracoUrl?self.worker.dracoUrl:lM||zo.DRACO_URL}function rz(){if(Er(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(y0)return y0;const l=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return y0=WebAssembly.validate(l)?zo.MESHOPT_SIMD_URL:zo.MESHOPT_URL,y0}const XS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dq={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Ob={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function oz(l,i,s){const h=s.json.bufferViews.length,p=s.buffers.length;i.bufferView=h,s.json.bufferViews[h]={buffer:p,byteLength:l.byteLength},s.buffers[p]=l}const uM="KHR_draco_mesh_compression";function fq(l,i){const s=l.extensions&&l.extensions[uM];if(!s)return;const h=new Ad.Decoder,p=cz(i,s.bufferView),v=new Ad.Mesh;if(!h.DecodeArrayToMesh(p,p.byteLength,v))throw new Error("Failed to decode Draco mesh");const x=i.json.accessors[l.indices],E=XS[x.componentType],M=x.count*E.BYTES_PER_ELEMENT,P=Ad._malloc(M);E===Uint16Array?h.GetTrianglesUInt16Array(v,M,P):h.GetTrianglesUInt32Array(v,M,P),oz(Ad.memory.buffer.slice(P,P+M),x,i),Ad._free(P);for(const k of Object.keys(s.attributes)){const B=h.GetAttributeByUniqueId(v,s.attributes[k]),j=i.json.accessors[l.attributes[k]],X=dq[j.componentType],Z=j.count*Ob[j.type]*XS[j.componentType].BYTES_PER_ELEMENT,oe=Ad._malloc(Z);h.GetAttributeDataArrayForAllPoints(v,B,Ad[X],Z,oe),oz(Ad.memory.buffer.slice(oe,oe+Z),j,i),Ad._free(oe)}h.destroy(),v.destroy(),delete l.extensions[uM]}const ZS="EXT_meshopt_compression";function pq(l,i){if(!l.extensions||!l.extensions[ZS])return;const s=l.extensions[ZS],h=new Uint8Array(i.buffers[s.buffer],s.byteOffset||0,s.byteLength||0),p=new Uint8Array(s.count*s.byteStride);cM.decodeGltfBuffer(p,s.count,s.byteStride,h,s.mode,s.filter),l.buffer=i.buffers.length,l.byteOffset=0,i.buffers[l.buffer]=p.buffer,delete l.extensions[ZS]}const sz=1179937895,az=new TextDecoder("utf8");function lz(l,i){return new URL(l,i).href}function mq(l,i,s,h){return fetch(lz(l.uri,h)).then(p=>p.arrayBuffer()).then(p=>{i.buffers[s]=p})}function cz(l,i){const s=l.json.bufferViews[i];return new Uint8Array(l.buffers[s.buffer],s.byteOffset||0,s.byteLength)}function gq(l,i,s,h){if(l.uri){const p=lz(l.uri,h);return fetch(p).then(v=>v.blob()).then(v=>createImageBitmap(v)).then(v=>{i.images[s]=v})}if(l.bufferView!==void 0){const p=cz(i,l.bufferView),v=new Blob([p],{type:l.mimeType});return createImageBitmap(v).then(x=>{i.images[s]=x})}}function uz(l,i=0,s){const h={json:null,images:[],buffers:[]};if(new Uint32Array(l,i,1)[0]===sz){const k=new Uint32Array(l,i);let B=2;const j=(k[B++]>>2)-3,X=k[B++]>>2;if(B++,h.json=JSON.parse(az.decode(k.subarray(B,B+X))),B+=X,B<j){const Z=k[B++];B++;const oe=i+(B<<2);h.buffers[0]=l.slice(oe,oe+Z)}}else h.json=JSON.parse(az.decode(new Uint8Array(l,i)));const{buffers:p,images:v,meshes:x,extensionsUsed:E,bufferViews:M}=h.json;let P=Promise.resolve();if(p){const k=[];for(let B=0;B<p.length;B++){const j=p[B];j.uri?k.push(mq(j,h,B,s)):h.buffers[B]||(h.buffers[B]=null)}P=Promise.all(k)}return P.then(()=>{const k=[],B=E&&E.includes(uM),j=E&&E.includes(ZS);if(B&&k.push(function(){if(!Ad)return Db??(Db=function(X){let Z,oe=null;function de(){Z=new Uint8Array(oe.buffer)}function me(){throw new Error("Unexpected Draco error.")}const Se={a:{a:me,d:function(be,ae,_e){return Z.copyWithin(be,ae,ae+_e)},c:function(be){const ae=Z.length,_e=Math.max(be>>>0,Math.ceil(1.2*ae)),we=Math.ceil((_e-ae)/65536);try{return oe.grow(we),de(),!0}catch{return!1}},b:me}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(X,Se):X.then(be=>be.arrayBuffer()).then(be=>WebAssembly.instantiate(be,Se))).then(be=>{const{Rb:ae,Qb:_e,P:we,T:Ie,X:Ge,Ja:Ze,La:Ye,Qa:tt,Va:vt,Wa:kt,eb:It,jb:Dt,f:$t,e:yt,yb:Pt,zb:gt,Ab:_t,Bb:Gt,Db:Xt,Gb:En}=be.instance.exports;oe=yt;const gn=(()=>{let rn=0,Ht=0,ri=0,xn=0;return bn=>{ri&&(ae(xn),ae(rn),Ht+=ri,ri=rn=0),rn||(Ht+=128,rn=_e(Ht));const Qn=bn.length+7&-8;let gi=rn;Qn>=Ht&&(ri=Qn,gi=xn=_e(Qn));for(let _i=0;_i<bn.length;_i++)Z[gi+_i]=bn[_i];return gi}})();return de(),$t(),{memory:yt,_free:ae,_malloc:_e,Mesh:class{constructor(){this.ptr=we()}destroy(){Ie(this.ptr)}},Decoder:class{constructor(){this.ptr=Ze()}destroy(){Dt(this.ptr)}DecodeArrayToMesh(rn,Ht,ri){const xn=gn(rn),bn=Ye(this.ptr,xn,Ht,ri.ptr);return!!Ge(bn)}GetAttributeByUniqueId(rn,Ht){return{ptr:tt(this.ptr,rn.ptr,Ht)}}GetTrianglesUInt16Array(rn,Ht,ri){vt(this.ptr,rn.ptr,Ht,ri)}GetTrianglesUInt32Array(rn,Ht,ri){kt(this.ptr,rn.ptr,Ht,ri)}GetAttributeDataArrayForAllPoints(rn,Ht,ri,xn,bn){It(this.ptr,rn.ptr,Ht.ptr,ri,xn,bn)}},DT_INT8:Pt(),DT_UINT8:gt(),DT_INT16:_t(),DT_UINT16:Gt(),DT_UINT32:Xt(),DT_FLOAT32:En()}})}(fetch(iz())),Db.then(X=>{Ad=X,Db=void 0}))}()),j&&k.push(function(){if(cM)return;const X=function(Z){let oe;const de=WebAssembly.instantiateStreaming(Z,{}).then(be=>{oe=be.instance,oe.exports.__wasm_call_ctors()}),me={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Se={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:de,supported:!0,decodeGltfBuffer(be,ae,_e,we,Ie,Ge){(function(Ze,Ye,tt,vt,kt,It,Dt){const $t=Ze.exports.sbrk,yt=vt+3&-4,Pt=$t(yt*kt),gt=$t(It.length),_t=new Uint8Array(Ze.exports.memory.buffer);_t.set(It,gt);const Gt=Ye(Pt,vt,kt,gt,It.length);if(Gt===0&&Dt&&Dt(Pt,yt,kt),tt.set(_t.subarray(Pt,Pt+vt*kt)),$t(Pt-$t(0)),Gt!==0)throw new Error(`Malformed buffer data: ${Gt}`)})(oe,oe.exports[Se[Ie]],be,ae,_e,we,oe.exports[me[Ge]])}}}(fetch(rz()));return X.ready.then(()=>{cM=X})}()),v)for(let X=0;X<v.length;X++)k.push(gq(v[X],h,X,s));return(k.length?Promise.all(k):Promise.resolve()).then(()=>{if(B&&x)for(const{primitives:X}of x)for(const Z of X)fq(Z,h);if(j&&x&&M)for(const X of M)pq(X,h);return h})})}function v_(l,i){const s=l.json.bufferViews[i.bufferView],h=XS[i.componentType];return new h(l.buffers[s.buffer],(i.byteOffset||0)+(s.byteOffset||0),i.count*(s.byteStride&&s.byteStride!==Ob[i.type]*h.BYTES_PER_ELEMENT?s.byteStride/h.BYTES_PER_ELEMENT:Ob[i.type]))}function hM(l,i,s,h){const p=XS[i.componentType],v=function(k){switch(k){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(p),x=l.json.bufferViews[i.bufferView],E=x.byteStride?x.byteStride/p.BYTES_PER_ELEMENT:Ob[i.type],M=s.float32,P=M.length/s.capacity;for(let k=0,B=0;k<i.count*E;k+=E,B+=P)for(let j=0;j<P;j++)M[B+j]=h[k+j]*v;s._trim()}function yq(l,i,s){const h=l.indices,p=l.attributes,v={};v.indexArray=new xo;const x=i.json.accessors[h],E=x.count/3;v.indexArray.reserve(E);const M=v_(i,x);for(let j=0;j<E;j++)v.indexArray.emplaceBack(M[3*j],M[3*j+1],M[3*j+2]);v.indexArray._trim(),v.vertexArray=new va;const P=i.json.accessors[p.POSITION];v.vertexArray.reserve(P.count);const k=v_(i,P);for(let j=0;j<P.count;j++)v.vertexArray.emplaceBack(k[3*j],k[3*j+1],k[3*j+2]);if(v.vertexArray._trim(),v.aabb=new wr(P.min,P.max),v.centroid=function(j,X){const Z=[0,0,0],oe=j.length;if(oe>0){for(let de=0;de<oe;de++){const me=3*j[de];Z[0]+=X[me],Z[1]+=X[me+1],Z[2]+=X[me+2]}Z[0]/=oe,Z[1]/=oe,Z[2]/=oe}return Z}(M,k),p.COLOR_0!==void 0){const j=i.json.accessors[p.COLOR_0],X=Ob[j.type],Z=v_(i,j);v.colorArray=X===3?new va:new ec,v.colorArray.resize(j.count),hM(i,j,v.colorArray,Z)}if(p.NORMAL!==void 0){v.normalArray=new va;const j=i.json.accessors[p.NORMAL];v.normalArray.resize(j.count);const X=v_(i,j);hM(i,j,v.normalArray,X)}if(p.TEXCOORD_0!==void 0&&s.length>0){v.texcoordArray=new Ku;const j=i.json.accessors[p.TEXCOORD_0];v.texcoordArray.resize(j.count);const X=v_(i,j);hM(i,j,v.texcoordArray,X)}if(p._FEATURE_ID_RGBA4444!==void 0){const j=i.json.accessors[p._FEATURE_ID_RGBA4444];i.json.extensionsUsed&&i.json.extensionsUsed.includes("EXT_meshopt_compression")&&(v.featureData=v_(i,j))}p._FEATURE_RGBA4444!==void 0&&(v.featureData=new Uint32Array(v_(i,i.json.accessors[p._FEATURE_RGBA4444]).buffer));const B=l.material;return v.material=function(j,X){const{emissiveFactor:Z=[0,0,0],alphaMode:oe="OPAQUE",alphaCutoff:de=.5,normalTexture:me,occlusionTexture:Se,emissiveTexture:be,doubleSided:ae}=j,{baseColorFactor:_e=[1,1,1,1],metallicFactor:we=1,roughnessFactor:Ie=1,baseColorTexture:Ge,metallicRoughnessTexture:Ze}=j.pbrMetallicRoughness||{},Ye=Se?X[Se.index]:void 0;if(Se&&Se.extensions&&Se.extensions.KHR_texture_transform&&Ye){const tt=Se.extensions.KHR_texture_transform;Ye.offsetScale=[tt.offset[0],tt.offset[1],tt.scale[0],tt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new ir(..._e),metallicFactor:we,roughnessFactor:Ie,baseColorTexture:Ge?X[Ge.index]:void 0,metallicRoughnessTexture:Ze?X[Ze.index]:void 0},doubleSided:ae,emissiveFactor:Z,alphaMode:oe,alphaCutoff:de,normalTexture:me?X[me.index]:void 0,occlusionTexture:Ye,emissionTexture:be?X[be.index]:void 0,defined:j.defined===void 0}}(B!==void 0?i.json.materials[B]:{defined:!1},s),v}function hz(l,i,s){const{matrix:h,rotation:p,translation:v,scale:x,mesh:E,extras:M,children:P}=l,k={};if(k.matrix=h||function(B,j,X,Z){var oe=j[0],de=j[1],me=j[2],Se=j[3],be=oe+oe,ae=de+de,_e=me+me,we=oe*be,Ie=oe*ae,Ge=oe*_e,Ze=de*ae,Ye=de*_e,tt=me*_e,vt=Se*be,kt=Se*ae,It=Se*_e,Dt=Z[0],$t=Z[1],yt=Z[2];return B[0]=(1-(Ze+tt))*Dt,B[1]=(Ie+It)*Dt,B[2]=(Ge-kt)*Dt,B[3]=0,B[4]=(Ie-It)*$t,B[5]=(1-(we+tt))*$t,B[6]=(Ye+vt)*$t,B[7]=0,B[8]=(Ge+kt)*yt,B[9]=(Ye-vt)*yt,B[10]=(1-(we+Ze))*yt,B[11]=0,B[12]=X[0],B[13]=X[1],B[14]=X[2],B[15]=1,B}([],p||[0,0,0,1],v||[0,0,0],x||[1,1,1]),E!==void 0){k.meshes=s[E];const B=k.anchor=[0,0];for(const j of k.meshes){const{min:X,max:Z}=j.aabb;B[0]+=X[0]+Z[0],B[1]+=X[1]+Z[1]}B[0]=Math.floor(B[0]/k.meshes.length/2),B[1]=Math.floor(B[1]/k.meshes.length/2)}if(M&&(M.id&&(k.id=M.id),M.lights&&(k.lights=function(B){if(!B.length)return[];const j=function(me){const Se=atob(me),be=new Uint8Array(Se.length);for(let ae=0;ae<Se.length;ae++)be[ae]=Se.codePointAt(ae);return be}(B),X=[],Z=j.length/24,oe=new Uint16Array(j.buffer),de=new Float32Array(j.buffer);for(let me=0;me<Z;me++){const Se=oe[2*me*6]/30,be=oe[2*me*6+1]/30,ae=oe[2*me*6+10]/100,_e=de[6*me+1],we=de[6*me+2],Ie=de[6*me+3],Ge=de[6*me+4],Ze=Ie-_e,Ye=Ge-we,tt=Math.hypot(Ze,Ye);X.push({pos:[_e+.5*Ze,we+.5*Ye,be],normal:[Ye/tt,-Ze/tt,0],width:tt,height:Se,depth:ae,points:[_e,we,Ie,Ge]})}return X}(M.lights))),P){const B=[];for(const j of P)B.push(hz(i.json.nodes[j],i,s));k.children=B}return k}function _q(l){if(l.vertices.length===0||l.indices.length===0)return null;const i=new Cf(l.vertices,l.indices,8,256),[s,h]=[i.min.clone(),i.max.clone()];return{vertices:l.vertices,indices:l.indices,grid:i,min:s,max:h}}function vq(l){if(!l.extras||!l.extras.ground)return null;const i=l.extras.ground;if(!i||!Array.isArray(i)||i.length===0)return null;const s=i[0];if(!s||!Array.isArray(s)||s.length===0)return null;const h=[];for(const x of s){if(!Array.isArray(x)||x.length!==2)continue;const E=x[0],M=x[1];typeof E=="number"&&typeof M=="number"&&h.push(new Zt(E,M))}if(h.length<3)return null;h.length>1&&h[h.length-1].equals(h[0])&&h.pop();let p=0;for(let x=0;x<h.length;x++){const E=h[x],M=h[(x+1)%h.length],P=h[(x+2)%h.length];p+=(E.x-M.x)*(P.y-M.y)-(P.x-M.x)*(E.y-M.y)}p>0&&h.reverse();const v=Ky(h.flatMap(x=>[x.x,x.y]),[]);return v.length===0?null:{vertices:h,indices:v}}function xq(l,i){const s=[],h=[];let p=0;const v=[];for(const x of l){p=s.length;const E=x.vertexArray.float32,M=x.indexArray.uint16;for(let P=0;P<x.vertexArray.length;P++)v[0]=E[3*P+0],v[1]=E[3*P+1],v[2]=E[3*P+2],Hn(v,v,i),s.push(new Zt(v[0],v[1]));for(let P=0;P<3*x.indexArray.length;P++)h.push(M[P]+p)}if(h.length%3!=0)return null;for(let x=0;x<h.length;x+=3){const E=s[h[x+0]],M=s[h[x+1]],P=s[h[x+2]];(E.x-M.x)*(P.y-M.y)-(P.x-M.x)*(E.y-M.y)>0&&([h[x+1],h[x+2]]=[h[x+2],h[x+1]])}return{vertices:s,indices:h}}function dz(l){const i=function(M,P){const k=[],B=WebGL2RenderingContext;if(M.json.textures)for(const j of M.json.textures){const X={magFilter:B.LINEAR,minFilter:B.NEAREST,wrapS:B.REPEAT,wrapT:B.REPEAT};j.sampler!==void 0&&Object.assign(X,M.json.samplers[j.sampler]),k.push({image:P[j.source],sampler:X,uploaded:!1})}return k}(l,l.images),s=function(M,P){const k=[];for(const B of M.json.meshes){const j=[];for(const X of B.primitives)j.push(yq(X,M,P));k.push(j)}return k}(l,i),{scenes:h,scene:p,nodes:v}=l.json,x=h?h[p||0].nodes:v,E=[];for(const M of x)E.push(hz(v[M],l,s));return function(M,P,k){const B={},j=new Set;for(let X=0;X<M.length;X++){const Z=k[P[X]];if(!Z.extras)continue;const oe=Z.extras["mapbox:footprint:version"],de=Z.extras["mapbox:footprint:id"];(oe||de)&&j.add(X),oe==="1.0.0"&&de&&(B[de]=X)}for(let X=0;X<M.length;X++){if(j.has(X))continue;const Z=M[X],oe=k[P[X]];if(!oe.extras)continue;let de=null;Z.id in B&&(de=xq(M[B[Z.id]].meshes,Z.matrix)),de||(de=vq(oe)),de&&(Z.footprint=_q(de))}if(j.size>0){const X=Array.from(j.values()).sort((Z,oe)=>Z-oe);for(let Z=X.length-1;Z>=0;Z--)M.splice(X[Z],1)}}(E,x,l.json.nodes),E}function bq(l){l.heightmap=new Float32Array(4096),l.heightmap.fill(-1);const i=l.vertexArray.float32,s=l.aabb.min[0]-1,h=l.aabb.min[1]-1,p=g_/(l.aabb.max[0]-s+2),v=g_/(l.aabb.max[1]-h+2);for(let x=0;x<i.length;x+=3){const E=i[x+2],M=(i[x+0]-s)*p|0,P=(i[x+1]-h)*v|0;E>l.heightmap[P*g_+M]&&(l.heightmap[P*g_+M]=E)}}function wq(l,i){const s={};s.indexArray=new xo,s.indexArray.reserve(4*l.length),s.vertexArray=new va,s.vertexArray.reserve(10*l.length),s.colorArray=new ec,s.vertexArray.reserve(10*l.length);let h=0;for(const x of l){const E=Math.min(10,Math.max(4,1.3*x.height))*i,M=[-x.normal[1],x.normal[0],0],P=Math.min(.29,.1*x.width/x.depth),k=x.width-2*x.depth*i*(P+.01),B=ht([],x.pos,M,k/2),j=ht([],x.pos,M,-k/2),X=[B[0],B[1],B[2]+x.height],Z=[j[0],j[1],j[2]+x.height],oe=ht([],x.normal,M,P);je(oe,oe,E);const de=ht([],x.normal,M,-P);je(de,de,E),mt(oe,B,oe),mt(de,j,de),B[2]+=.1,j[2]+=.1,s.vertexArray.emplaceBack(oe[0],oe[1],oe[2]),s.vertexArray.emplaceBack(de[0],de[1],de[2]),s.vertexArray.emplaceBack(B[0],B[1],B[2]),s.vertexArray.emplaceBack(j[0],j[1],j[2]),s.vertexArray.emplaceBack(X[0],X[1],X[2]),s.vertexArray.emplaceBack(Z[0],Z[1],Z[2]),s.vertexArray.emplaceBack(B[0],B[1],B[2]),s.vertexArray.emplaceBack(j[0],j[1],j[2]),s.vertexArray.emplaceBack(oe[0],oe[1],oe[2]),s.vertexArray.emplaceBack(de[0],de[1],de[2]);const me=k/E/2;s.colorArray.emplaceBack(-me-P,-1,me,.8),s.colorArray.emplaceBack(me+P,-1,me,.8),s.colorArray.emplaceBack(-me,0,me,1.3),s.colorArray.emplaceBack(me,0,me,1.3),s.colorArray.emplaceBack(me+P,-.8,me,.7),s.colorArray.emplaceBack(me+P,-.8,me,.7),s.colorArray.emplaceBack(0,0,me,1.3),s.colorArray.emplaceBack(0,0,me,1.3),s.colorArray.emplaceBack(me+P,-1.2,me,.8),s.colorArray.emplaceBack(me+P,-1.2,me,.8),s.indexArray.emplaceBack(6+h,4+h,8+h),s.indexArray.emplaceBack(7+h,9+h,5+h),s.indexArray.emplaceBack(0+h,1+h,2+h),s.indexArray.emplaceBack(1+h,3+h,2+h),h+=10}const p={defined:!0,emissiveFactor:[0,0,0]},v={};return v.baseColorFactor=ir.white,p.pbrMetallicRoughness=v,s.material=p,s.aabb=new wr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),s}class fz{constructor(i){this._stringToNumber={},this._numberToString=[];for(let s=0;s<i.length;s++){const h=i[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const Sq=["id","tile","layer","source","sourceLayer","state"];class v0{constructor(i,s,h,p,v){this.type="Feature",this._vectorTileFeature=i,this._z=s,this._x=h,this._y=p,this.properties=i.properties,this.id=v}clone(){const i=new v0(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(i.state=Object.assign({},this.state)),this.layer&&(i.layer=Object.assign({},this.layer)),this.source&&(i.source=this.source),this.sourceLayer&&(i.sourceLayer=this.sourceLayer),i}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const s of Sq)this[s]!==void 0&&(i[s]=this[s]);return i}}class pz{constructor(i,s){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new mf(Qt,16,0),this.featureIndexArray=new jy,this.promoteId=s,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(i,s,h,p,v,x=0,E=0){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v,x);const P=this.grid;for(let k=0;k<s.length;k++){const B=s[k],j=[1/0,1/0,-1/0,-1/0];for(let X=0;X<B.length;X++){const Z=B[X];j[0]=Math.min(j[0],Z.x),j[1]=Math.min(j[1],Z.y),j[2]=Math.max(j[2],Z.x),j[3]=Math.max(j[3],Z.y)}E!==0&&(j[0]-=E,j[1]-=E,j[2]+=E,j[3]+=E),j[0]<Qt&&j[1]<Qt&&j[2]>=0&&j[3]>=0&&P.insert(M,j[0],j[1],j[2],j[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new rh.VectorTile(new mS(this.rawTileData)).layers,this.sourceLayerCoder=new fz(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,s){const{tilespaceGeometry:h,transform:p,tileTransform:v,pixelPosMatrix:x,availableImages:E}=s;this.loadVTLayers(),this.serializedLayersCache.clear();const M=h.bufferedTilespaceBounds,P=this.grid.query(M.min.x,M.min.y,M.max.x,M.max.y,(X,Z,oe,de)=>cr(h.bufferedTilespaceGeometry,X,Z,oe,de));P.sort(Tq);let k=null;p.elevation&&P.length>0&&(k=f0.create(p.elevation,this.tileID));const B={};let j;for(let X=0;X<P.length;X++){const Z=P[X];if(Z===j)continue;j=Z;const oe=this.featureIndexArray.get(Z);let de=null;this.is3DTile?this.loadMatchingModelFeature(B,oe,i,h,p):this.loadMatchingFeature(B,oe,i,E,(me,Se,be,ae=0)=>(de||(de=pn(me,this.tileID.canonical,v)),Se.queryIntersectsFeature(h,me,be,de,this.z,p,x,k,ae)))}return B}loadMatchingFeature(i,s,h,p,v){const{featureIndex:x,bucketIndex:E,sourceLayerIndex:M,layoutVertexArrayOffset:P}=s,k=this.bucketLayerIDs[E],B=h.layers,j=Object.keys(B);if(j.length&&!function(me,Se){for(let be=0;be<me.length;be++)if(Se.indexOf(me[be])>=0)return!0;return!1}(j,k))return;const X=h.sourceCache,Z=this.sourceLayerCoder.decode(M),oe=this.vtLayers[Z].feature(x),de=this.getId(oe,Z);for(let me=0;me<k.length;me++){const Se=k[me];if(!B[Se])continue;const{styleLayer:be,targets:ae}=B[Se];let _e={};de!==void 0&&(_e=X.getFeatureState(be.sourceLayer,de));const we=!v||v(oe,be,_e,P);if(!we)continue;const Ie=new v0(oe,this.z,this.x,this.y,de);Ie.tile=this.tileID.canonical,Ie.state=_e;let Ge=this.serializedLayersCache.get(Se);Ge||(Ge=be.serialize(),Ge.id=Se,this.serializedLayersCache.set(Se,Ge)),Ie.source=Ge.source,Ie.sourceLayer=Ge["source-layer"],Ie.layer=Ke({},Ge),Ie.layer.paint=mz(Ge.paint,be.paint,oe,_e,p),Ie.layer.layout=mz(Ge.layout,be.layout,oe,_e,p);let Ze=!1;for(const Ye of ae){this.updateFeatureProperties(Ie,Ye);const{filter:tt}=Ye;if(tt){if(oe.properties=Ie.properties,tt.needGeometry){const vt=_n(oe,!0);if(!tt.filter(new xr(this.tileID.overscaledZ),vt,this.tileID.canonical))continue}else if(!tt.filter(new xr(this.tileID.overscaledZ),oe))continue}Ze=!0,Ye.targetId&&this.addFeatureVariant(Ie,Ye)}Ze&&this.appendToResult(i,Se,x,Ie,we)}}loadMatchingModelFeature(i,s,h,p,v){const x=this.bucketLayerIDs[0][0],E=h.layers;if(!E[x])return;const{styleLayer:M,targets:P}=E[x];if(M.type!=="model")return;const k=p.tile,B=s.featureIndex,j=k.getBucket(M);if(!(j&&j instanceof FS))return;const X=function(Ge,Ze,Ye,tt){const vt=Ge.getNodesInfo()[Ze];if(vt.hiddenByReplacement||!vt.node.meshes)return;let kt=Number.MAX_VALUE;const It=vt.node,Dt=Ye.tile,$t=tt.calculatePosMatrix(Dt.tileID.toUnwrapped(),tt.worldSize),yt=vt.evaluatedScale;let Pt=0;tt.elevation&&It.elevation&&(Pt=It.elevation*tt.elevation.exaggeration()),re($t,$t,[(It.anchor?It.anchor[0]:0)*(yt[0]-1),(It.anchor?It.anchor[1]:0)*(yt[1]-1),Pt]),ne($t,$t,yt);const gt=Ye.queryGeometry,_t=gt.isPointQuery()?gt.screenBounds:gt.screenGeometry,Gt=function(En){const gn=W([],$t,En.matrix);W(gn,tt.expandedFarZProjMatrix,gn);for(let rn=0;rn<En.meshes.length;++rn){const Ht=En.meshes[rn];if(rn===En.lightMeshIndex)continue;const ri=pk(_t,tt,gn,Ht.aabb);ri!=null&&(kt=Math.min(ri,kt))}if(En.children)for(const rn of En.children)Gt(rn)};if(Gt(It),kt===Number.MAX_VALUE)return;const Xt=new ce(0,0);return Ek(Dt.tileID.canonical,Xt,vt.node.anchor[0],vt.node.anchor[1]),{intersectionZ:kt,position:Xt,feature:vt.feature}}(j,B,p,v);if(!X)return;const{z:Z,x:oe,y:de}=k.tileID.canonical,{feature:me,intersectionZ:Se,position:be}=X;let ae={};me.id!==void 0&&(ae=h.sourceCache.getFeatureState(M.sourceLayer,me.id));const _e=new v0({},Z,oe,de,me.id);_e.tile=this.tileID.canonical,_e.state=ae,_e.properties=me.properties,_e.geometry={type:"Point",coordinates:[be.lng,be.lat]};let we=this.serializedLayersCache.get(x);we||(we=M.serialize(),we.id=x,this.serializedLayersCache.set(x,we)),_e.source=we.source,_e.sourceLayer=we["source-layer"],_e.layer=Ke({},we);let Ie=!1;for(const Ge of P){this.updateFeatureProperties(_e,Ge);const{filter:Ze}=Ge;if(Ze){if(me.properties=_e.properties,Ze.needGeometry){if(!Ze.filter(new xr(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!Ze.filter(new xr(this.tileID.overscaledZ),me))continue}Ie=!0,Ge.targetId&&this.addFeatureVariant(_e,Ge)}Ie&&this.appendToResult(i,x,B,_e,Se)}updateFeatureProperties(i,s,h){if(s.properties){const p={};for(const v in s.properties){const x=s.properties[v].evaluate({zoom:this.z},i._vectorTileFeature,i.state,i.tile,h);x!=null&&(p[v]=x)}i.properties=p}}addFeatureVariant(i,s,h){const p={target:s.target,namespace:s.namespace,uniqueFeatureID:s.uniqueFeatureID};s.properties&&(p.properties=i.properties),i.variants=i.variants||{},i.variants[s.targetId]=i.variants[s.targetId]||[],i.variants[s.targetId].push(p)}appendToResult(i,s,h,p,v){let x=i[s];x===void 0&&(x=i[s]=[]),x.push({featureIndex:h,feature:p,intersectionZ:v})}lookupSymbolFeatures(i,s,h,p,v){const x={};this.loadVTLayers();for(const E of i)this.loadMatchingFeature(x,{bucketIndex:s,sourceLayerIndex:h,featureIndex:E,layoutVertexArrayOffset:0},p,v);return x}loadFeature(i){const{featureIndex:s,sourceLayerIndex:h}=i;this.loadVTLayers();const p=this.sourceLayerCoder.decode(h),v=this.vtFeatures[p];if(v[s])return v[s];const x=this.vtLayers[p].feature(s);return v[s]=x,x}hasLayer(i){for(const s of this.bucketLayerIDs)for(const h of s)if(i===h)return!0;return!1}getId(i,s){let h=i.id;if(this.promoteId){const p=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[s];if(p!=null)if(Array.isArray(p)){if(!this.promoteIdExpression){const v=yr(p);if(v.result!=="success"){const x=v.value.map(E=>`${E.key}: ${E.message}`).join(", ");return void ui(`Failed to create expression for promoteId: ${x}`)}this.promoteIdExpression=v.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Zd),h=this.promoteIdExpression.evaluate({zoom:0},i)}else h=i.properties[p];typeof h=="boolean"&&(h=Number(h))}return h}}function mz(l,i,s,h,p){return Pn(l,(v,x)=>{const E=i instanceof qu?i.get(x):null;return E&&E.evaluate?E.evaluate(s,h,void 0,p):E})}function Tq(l,i){return i-l}hn(pz,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const gz=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dM{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(i,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=gz[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[E]=new Uint32Array(i,4,1);return new dM(E,x,v,i)}constructor(i,s=64,h=Float64Array,p){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const v=gz.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,E=i*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-E%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+E+M,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+M),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+E+M,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=i)}add(i,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=s,h}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return fM(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:E}=this,M=[0,v.length-1,0],P=[];for(;M.length;){const k=M.pop()||0,B=M.pop()||0,j=M.pop()||0;if(B-j<=E){for(let de=j;de<=B;de++){const me=x[2*de],Se=x[2*de+1];me>=i&&me<=h&&Se>=s&&Se<=p&&P.push(v[de])}continue}const X=j+B>>1,Z=x[2*X],oe=x[2*X+1];Z>=i&&Z<=h&&oe>=s&&oe<=p&&P.push(v[X]),(k===0?i<=Z:s<=oe)&&(M.push(j),M.push(X-1),M.push(1-k)),(k===0?h>=Z:p>=oe)&&(M.push(X+1),M.push(B),M.push(1-k))}return P}within(i,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,E=[0,p.length-1,0],M=[],P=h*h;for(;E.length;){const k=E.pop()||0,B=E.pop()||0,j=E.pop()||0;if(B-j<=x){for(let de=j;de<=B;de++)_z(v[2*de],v[2*de+1],i,s)<=P&&M.push(p[de]);continue}const X=j+B>>1,Z=v[2*X],oe=v[2*X+1];_z(Z,oe,i,s)<=P&&M.push(p[X]),(k===0?i-h<=Z:s-h<=oe)&&(E.push(j),E.push(X-1),E.push(1-k)),(k===0?i+h>=Z:s+h>=oe)&&(E.push(X+1),E.push(B),E.push(1-k))}return M}}function fM(l,i,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;yz(l,i,x,h,p,v),fM(l,i,s,h,x-1,1-v),fM(l,i,s,x+1,p,1-v)}function yz(l,i,s,h,p,v){for(;p>h;){if(p-h>600){const P=p-h+1,k=s-h+1,B=Math.log(P),j=.5*Math.exp(2*B/3),X=.5*Math.sqrt(B*j*(P-j)/P)*(k-P/2<0?-1:1);yz(l,i,s,Math.max(h,Math.floor(s-k*j/P+X)),Math.min(p,Math.floor(s+(P-k)*j/P+X)),v)}const x=i[2*s+v];let E=h,M=p;for(Lb(l,i,h,s),i[2*p+v]>x&&Lb(l,i,h,p);E<M;){for(Lb(l,i,E,M),E++,M--;i[2*E+v]<x;)E++;for(;i[2*M+v]>x;)M--}i[2*h+v]===x?Lb(l,i,h,M):(M++,Lb(l,i,M,p)),M<=s&&(h=M+1),s<=M&&(p=M-1)}}function Lb(l,i,s,h){pM(l,s,h),pM(i,2*s,2*h),pM(i,2*s+1,2*h+1)}function pM(l,i,s){const h=l[i];l[i]=l[s],l[s]=h}function _z(l,i,s,h){const p=l-s,v=i-h;return p*p+v*v}r.$=fs,r.A=fc,r.B=pl,r.C=Xu,r.D=p0,r.E=Ru,r.F=2,r.G=gb,r.H=ML,r.I=Ma,r.J=class extends zS{},r.K=Jn,r.L=lp,r.M=ka,r.N=df,r.O=Yl,r.P=Zt,r.Q=Mp,r.R=qd,r.S=Kl,r.T=$A,r.U=Wu,r.V=zS,r.W=Nu,r.X=yr,r.Y=Qd,r.Z=Eo,r._=Zh,r.a=function(l){return zo.API_CDN_URL_REGEX.test(l)},r.a$=qt,r.a0=kh,r.a1=Fp,r.a2=Bu,r.a3=hf,r.a4=function(l){const i=l.value;let s=[];if(!i)return s;const h=Jn(i);return h!=="string"?(s=s.concat([new zS(l.key,i,`string expected, "${h}" found`)]),s):(WA(i,!0)||(s=s.concat([new zS(l.key,i,`invalid url "${i}"`)])),s)},r.a5=at,r.a6=Qm,r.a7=co,r.a8=Kt,r.a9=class{constructor(l){this.specification=l}possiblyEvaluate(l,i){return ar(l.expression.evaluate(i))}interpolate(l,i,s){return{x:jn(l.x,i.x,s),y:jn(l.y,i.y,s),z:jn(l.z,i.z,s),azimuthal:jn(l.azimuthal,i.azimuthal,s),polar:jn(l.polar,i.polar,s)}}},r.aA=ii,r.aB=Wi,r.aC=Mt,r.aD=Fe,r.aE=w,r.aF=function(l,i){const s={};for(let h=0;h<i.length;h++){const p=i[h];p in l&&(s[p]=l[p])}return s},r.aG=ve,r.aH=ke,r.aI=class{constructor(l){this.entries={},this.scheduler=l}request(l,i,s,h){const p=this.entries[l]=this.entries[l]||{callbacks:[]};if(p.result){const[v,x]=p.result;return this.scheduler?this.scheduler.add(()=>{h(v,x)},i):h(v,x),()=>{}}return p.callbacks.push(h),p.cancel||(p.cancel=s((v,x)=>{p.result=[v,x];for(const E of p.callbacks)this.scheduler?this.scheduler.add(()=>{E(v,x)},i):E(v,x);setTimeout(()=>delete this.entries[l],3e3)})),()=>{p.result||(p.callbacks=p.callbacks.filter(v=>v!==h),p.callbacks.length||(p.cancel(),delete this.entries[l]))}}},r.aJ=function(l,i,s){const h=JSON.stringify(l.request);return l.data&&(this.deduped.entries[h]={result:[null,l.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},p=>{const v=Au(l.request,(x,E,M,P)=>{x?p(x):E&&p(null,{vectorTile:s?void 0:new rh.VectorTile(new mS(E)),rawData:E,cacheControl:M,expires:P})});return()=>{v.cancel(),p()}},i)},r.aK=function(l){np++,np>cl&&(l.getActor().send("enforceCacheSizeLimit",dc),np=0)},r.aL=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},r.aM=br,r.aN=ik,r.aO=ck,r.aP=nk,r.aQ=function(l,i){const s=document.createElement("video");s.muted=!0,s.onloadstart=function(){i(null,s)};for(let h=0;h<l.length;h++){const p=document.createElement("source");rp(l[h])||(s.crossOrigin="Anonymous"),p.src=l[h],s.appendChild(p)}return{cancel:()=>{}}},r.aR=PS,r.aS=function(l){return fetch(l).then(i=>i.arrayBuffer()).then(i=>uz(i,0,l))},r.aT=dz,r.aU=class{constructor(l,i,s,h){this.id=l,this.position=i!=null?new ce(i[0],i[1]):new ce(0,0),this.orientation=s??[0,0,0],this.nodes=h,this.uploaded=!1,this.aabb=new wr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(l,i){if(W(l.matrix,i,l.matrix),l.meshes)for(const s of l.meshes){const h=wr.applyTransformFast(s.aabb,l.matrix);this.aabb.encapsulate(h)}if(l.children)for(const s of l.children)this._applyTransformations(s,l.matrix)}computeBoundsAndApplyParent(){const l=H([]);for(const i of this.nodes)this._applyTransformations(i,l)}computeModelMatrix(l,i,s,h,p,v,x=!1){xk(this.matrix,this,l.transform,this.position,i,s,h,p,v,x)}upload(l){if(!this.uploaded){for(const i of this.nodes)ZA(i,l);for(const i of this.nodes)BS(i);this.uploaded=!0}}destroy(){for(const l of this.nodes)YA(l)}},r.aV=kn,r.aW=_b,r.aX=Ve,r.aY=We,r.aZ=Zu,r.a_=xo,r.aa=xr,r.ab=Bo,r.ac=ft,r.ad=Hn,r.ae=et,r.af=He,r.ag=qu,r.ah=md,r.ai=jn,r.aj=Qt,r.ak=xv,r.al=Y,r.am=ir,r.an=class{constructor(l){this.specification=l}possiblyEvaluate(l,i){return function([s,h]){const p=ar([1,s,h]);return{x:p.x,y:p.y,z:p.z}}(l.expression.evaluate(i))}interpolate(l,i,s){return{x:jn(l.x,i.x,s),y:jn(l.y,i.y,s),z:jn(l.z,i.z,s)}}},r.ao=function(l,i,s=0,h=!0){const p=new Zt(s,s),v=l.sub(p),x=i.add(p),E=[v,new Zt(x.x,v.y),x,new Zt(v.x,x.y)];return h&&E.push(v.clone()),E},r.ap=function(l,i){const s=[];for(let h=0;h<l.length;h++){const p=Je(h-1,-1,l.length-1),v=Je(h+1,-1,l.length-1),x=l[h],E=l[v],M=l[p].sub(x).unit(),P=E.sub(x).unit(),k=P.angleWithSep(M.x,M.y),B=M.add(P).unit().mult(-1*i/Math.sin(k/2));s.push(x.add(B))}return s},r.aq=VL,r.ar=cr,r.as=function(l,i,s=0){return ot(((i.x-s)*l.scale-l.x)*Qt,(i.y*l.scale-l.y)*Qt,ct(i.z,i.y))},r.at=Ln,r.au=en,r.av=tl,r.aw=wi,r.ax=function(l){let i=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of l)i=Math.min(i,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{min:new Zt(i,s),max:new Zt(h,p)}},r.ay=ze,r.az=W,r.b=function(l){return zo.API_FONTS_REGEX.test(l)},r.b$=je,r.b0=vf,r.b1=RS,r.b2=function(){vl.isLoading()||vl.isLoaded()||Gu()!=="deferred"||Cy()},r.b3=eg,r.b4=_n,r.b5=v0,r.b6=Lr,r.b7=Rt,r.b8=Kv,r.b9=pn,r.bA=function(l,i){const{x:s,y:h}=l.point,p=kx(s,h,l.worldSize/l._pixelsPerMercatorPixel,0,0);return W(p,p,Ov(ou(i)))},r.bB=R,r.bC=function(l){return l[0]=0,l[1]=0,l[2]=0,l},r.bD=function(l,i){return Math.hypot(i[0]-l[0],i[1]-l[1],i[2]-l[2])},r.bE=jt,r.bF=ht,r.bG=Rn,r.bH=mb,r.bI=rc,r.bJ=RA,r.bK=function(l,i,s,h,p){const v=5*i+2;l.float32[v+0]=s,l.float32[v+1]=h,l.float32[v+2]=p},r.bL=MS,r.bM=d,r.bN=Gn,r.bO=As,r.bP=mg,r.bQ=mk,r.bR=aS,r.bS=sb,r.bT=OA,r.bU=kL,r.bV=MA,r.bW=dM,r.bX=Je,r.bY=yi,r.bZ=function(l,i,s){s*=.5;var h=i[0],p=i[1],v=i[2],x=i[3],E=Math.sin(s),M=Math.cos(s);return l[0]=h*M+p*E,l[1]=p*M-h*E,l[2]=v*M+x*E,l[3]=x*M-v*E,l},r.b_=dt,r.ba=Jl,r.bb=Ju,r.bc=ic,r.bd=oo,r.be=Ky,r.bf=jA,r.bg=function(l,i){const s=md(i.zoom);if(s===0)return ou(l);const h=Dv(l),p=Ox(h),v=ze(h.getWest())*i.worldSize,x=ze(h.getEast())*i.worldSize,E=ke(h.getNorth())*i.worldSize,M=ke(h.getSouth())*i.worldSize,P=[v,E,0],k=[x,E,0],B=[v,M,0],j=[x,M,0],X=K([],i.globeMatrix);return Hn(P,P,X),Hn(k,k,X),Hn(B,B,X),Hn(j,j,X),p[0]=su(p[0],B,s),p[1]=su(p[1],j,s),p[2]=su(p[2],k,s),p[3]=su(p[3],P,s),wr.fromPoints(p)},r.bh=Jp,r.bi=K,r.bj=lg,r.bk=su,r.bl=ad,r.bm=Fa,r.bn=Ce,r.bo=re,r.bp=WS,r.bq=mS,r.br=Au,r.bs=function(l,i){const s=[];for(const h in l)h in i||s.push(h);return s},r.bt=st,r.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.bv=Os,r.bw=function(l){var i=new A(16);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],i},r.bx=H,r.by=pe,r.bz=U,r.c=ls,r.c$=function(l){return l({pluginStatus:_a,pluginURL:Jc}),Bp.on("pluginStateChange",l),l},r.c0=hi,r.c1=Ri,r.c2=function(l,i){return l[0]=-i[0],l[1]=-i[1],l[2]=-i[2],l[3]=i[3],l},r.c3=qe,r.c4=function(l,i,s,h,p){var v,x=1/Math.tan(i/2);return l[0]=x/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,p!=null&&p!==1/0?(l[10]=(p+h)*(v=1/(h-p)),l[14]=2*p*h*v):(l[10]=-1,l[14]=-2*h),l},r.c5=function(l,i,s,h,p,v,x){var E=1/(i-s),M=1/(h-p),P=1/(v-x);return l[0]=-2*E,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*M,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*P,l[11]=0,l[12]=(i+s)*E,l[13]=(p+h)*M,l[14]=(x+v)*P,l[15]=1,l},r.c6=Re,r.c7=function(l,i,s){l[4*i+0]=s[0],l[4*i+1]=s[1],l[4*i+2]=s[2],l[4*i+3]=s[3]},r.c8=el,r.c9=Sl,r.cA=LS,r.cB=ye,r.cC=uk,r.cD=function(l){const i=uk(l,!0);return R([],[i[0],i[1],i[4],i[5]])},r.cE=ne,r.cF=Cs,r.cG=se,r.cH=function(l){const{x:i,y:s}=l.point,{lng:h,lat:p}=l._center;return kx(i,s,l.worldSize,h,p)},r.cI=it,r.cJ=ie,r.cK=Po,r.cL=C,r.cM=function(l,i,s){let h=0;for(let p=0;p<2;++p)l[p]>0&&(h+=(l[p]-0)*(l[p]-0)),i[p]<0&&(h+=(0-i[p])*(0-i[p]));return h},r.cN=45,r.cO=zm,r.cP=Ne,r.cQ=bf,r.cR=function(l,i,s){const h=Math.sqrt(l*l+i*i+s*s),p=h>0?Math.acos(s/h)*Te:0;let v=l!==0||i!==0?Math.atan2(-i,-l)*Te+90:0;return v<0&&(v+=360),[h,v,p]},r.cS=ot,r.cT=nt,r.cU=mt,r.cV=wr,r.cW=ar,r.cX=function(l){return[Math.pow(l[0],1/2.2),Math.pow(l[1],1/2.2),Math.pow(l[2],1/2.2)]},r.cY=$e,r.cZ=WA,r.c_=function(l,i){return l.readFields(bG,{icons:[]},i)},r.ca=Qa,r.cb=bo,r.cc=Hp,r.cd=ce,r.ce=WL,r.cf=function(){var l=new A(4);return A!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l},r.cg=function(l,i,s){var h=i[0],p=i[1],v=i[2],x=i[3],E=Math.sin(s),M=Math.cos(s);return l[0]=h*M+v*E,l[1]=p*M+x*E,l[2]=h*-E+v*M,l[3]=p*-E+x*M,l},r.ch=function(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]&&l[3]===i[3]},r.ci=oi,r.cj=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},r.ck=Mi,r.cl=ai,r.cm=Ao,r.cn=Xp,r.co=hk,r.cp=Rr,r.cq=jw,r.cr=function(l,i,s,h,p,v,x,E,M){if(M.name==="globe")return jw(l,i,new Rr(s,h,p),!1);const P=_b({z:s,x:h,y:p},M);return new wr([(v+P.x/P.scale)*i,i*(P.y/P.scale),x],[(v+P.x2/P.scale)*i,i*(P.y2/P.scale),E])},r.cs=function(l,i,s){return l[0]=Math.min(i[0],s[0]),l[1]=Math.min(i[1],s[1]),l[2]=Math.min(i[2],s[2]),l[3]=Math.min(i[3],s[3]),l},r.ct=function(l,i,s){return l[0]=Math.max(i[0],s[0]),l[1]=Math.max(i[1],s[1]),l[2]=Math.max(i[2],s[2]),l[3]=Math.max(i[3],s[3]),l},r.cu=function(l){const i=Math.round((l+45+360)%360/90)%4;return ge[i]},r.cv=rt,r.cw=ci,r.cx=I,r.cy=function(l){const i=H(new Float64Array(16));W(i,l.pixelMatrix,l.globeMatrix);const s=[0,q,0],h=[0,G,0];return Hn(s,s,i),Hn(h,h,i),[s[0]>0&&s[0]<=l.width&&s[1]>0&&s[1]<=l.height&&!cg(l,new ce(l.center.lat,90)),h[0]>0&&h[0]<=l.width&&h[1]>0&&h[1]<=l.height&&!cg(l,new ce(l.center.lat,-90))]},r.cz=function(l,i){const{scale:s}=l.tileTransform,h=s*Qt/(l.tileSize*Math.pow(2,i.zoom-l.tileID.overscaledZ+l.tileID.canonical.z));return function(p,v,x){var E=v[1],M=v[2],P=v[3],k=x[0],B=x[1];return p[0]=v[0]*k,p[1]=E*k,p[2]=M*B,p[3]=P*B,p}(new Float32Array(4),i.inverseAdjustmentMatrix,[h,h])},r.d=function(l){return zo.API_TILEJSON_REGEX.test(l)},r.d$=sg,r.d0=NS,r.d1=c0,r.d2=PA,r.d3=ji,r.d4=Hu,r.d5=Ws,r.d6=Aa,r.d7=di,r.d8=function(l){const i=l.indexOf(od);return i>=0?l.slice(0,i):l},r.d9=function(l){return l.indexOf(od)>=0},r.dA=Lx,r.dB=Go,r.dC=So,r.dD=256,r.dE=function(l,i){const s=[0,0,0];return Hn(s,s,Jp(ou(i.canonical))),Hn(s,s,l),s},r.dF=l=>({u_camera_to_center_distance:new bo(l),u_extrude_scale:new ea(l),u_device_pixel_ratio:new bo(l),u_matrix:new el(l),u_inv_rot_matrix:new el(l),u_merc_center:new Sl(l),u_tile_id:new Qa(l),u_zoom_transition:new bo(l),u_up_dir:new Qa(l),u_emissive_strength:new bo(l)}),r.dG=l=>({u_matrix:new el(l),u_pixels_to_tile_units:new ea(l),u_device_pixel_ratio:new bo(l),u_width_scale:new bo(l),u_floor_width_scale:new bo(l),u_units_to_pixels:new Sl(l),u_dash_image:new Hp(l),u_gradient_image:new Hp(l),u_image_height:new bo(l),u_texsize:new Sl(l),u_tile_units_to_pixels:new bo(l),u_alpha_discard_threshold:new bo(l),u_trim_offset:new Sl(l),u_trim_fade_range:new Sl(l),u_trim_color:new bf(l),u_emissive_strength:new bo(l),u_zbias_factor:new bo(l),u_tile_to_meter:new bo(l),u_ground_shadow_factor:new Qa(l)}),r.dH=l=>({u_matrix:new el(l),u_texsize:new Sl(l),u_pixels_to_tile_units:new ea(l),u_device_pixel_ratio:new bo(l),u_width_scale:new bo(l),u_floor_width_scale:new bo(l),u_image:new Hp(l),u_units_to_pixels:new Sl(l),u_tile_units_to_pixels:new bo(l),u_alpha_discard_threshold:new bo(l),u_trim_offset:new Sl(l),u_trim_fade_range:new Sl(l),u_trim_color:new bf(l),u_emissive_strength:new bo(l),u_zbias_factor:new bo(l),u_tile_to_meter:new bo(l),u_ground_shadow_factor:new Qa(l),u_pattern_transition:new bo(l)}),r.dI=bl,r.dJ=EH,r.dK=Vw,r.dL=(l,i,s,h,p,v)=>{const x=l.transform,E=x.projection.name==="globe";let M;if(v.paint.get("circle-pitch-alignment")==="map")if(E){const k=Lx(x.zoom,i.canonical)*x._pixelsPerMercatorPixel;M=Float32Array.from([k,0,0,k])}else M=x.calculatePixelsToTileUnitsMatrix(s);else M=new Float32Array([x.pixelsToGLUnits[0],0,0,x.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:l.transform.getCameraToCenterDistance(x.projection),u_matrix:l.translatePosMatrix(i.projMatrix,s,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_device_pixel_ratio:qa.devicePixelRatio,u_extrude_scale:M,u_inv_rot_matrix:Fx,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:v.paint.get("circle-emissive-strength")};if(E){P.u_inv_rot_matrix=h,P.u_merc_center=p,P.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],P.u_zoom_transition=md(x.zoom);const k=p[0]*Qt,B=p[1]*Qt;P.u_up_dir=x.projection.upVector(new Rr(0,0,0),k,B)}return P},r.dM=Fs,r.dN=Ys,r.dO=(l,i,s,h,p,v,x,E,M,P)=>{const k=l.transform,B=k.pitch<15?Vr(.07,.7,Fe((14-k.zoom)/5,0,1)):.07,j=s.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:Ji(l,i,s,h),u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:p,u_width_scale:v,u_floor_width_scale:x,u_image:0,u_tile_units_to_pixels:Li(i,k),u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:E,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(j?null:s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength"),u_zbias_factor:B,u_tile_to_meter:nt(i.tileID.canonical,0),u_ground_shadow_factor:M,u_pattern_transition:P}},r.dP=(l,i,s,h,p,v,x,E,M,P)=>{const k=l.transform,B=k.calculatePixelsToTileUnitsMatrix(i),j=s.paint.get("line-trim-color-use-theme").constantOr("default")==="none",X=k.pitch<15?Vr(.07,.7,Fe((14-k.zoom)/5,0,1)):.07;return{u_matrix:Ji(l,i,s,h),u_pixels_to_tile_units:B,u_device_pixel_ratio:v,u_width_scale:x,u_floor_width_scale:E,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:p,u_texsize:po(s)&&i.lineAtlasTexture?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Li(i,l.transform),u_alpha_discard_threshold:0,u_trim_offset:M,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(j?null:s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength"),u_zbias_factor:X,u_tile_to_meter:nt(i.tileID.canonical,0),u_ground_shadow_factor:P}},r.dQ=tn,r.dR=hg,r.dS=ct,r.dT=h_,r.dU=ta,r.dV=o0,r.dW=oh,r.dX=450,r.dY=7,r.dZ=oG,r.d_=qi,r.da=function(l){const i=l.lastIndexOf(od);return i>=0?l.slice(i+1):""},r.db=function(l){const i=[],s=l.id;return s===void 0&&i.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&i.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&i.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),i},r.dc=function(l,i,s,h){return l.type==="custom"?new sG(l,i):new yG[l.type](l,i,s,h)},r.dd=Dn,r.de=function(l){const i=l.indexOf(od);return i>=0?l.slice(i+1):""},r.df=class extends v0{constructor(l,i){super(l._vectorTileFeature,l._z,l._x,l._y,l.id),l.state&&(this.state=Object.assign({},l.state)),this.target=i.target,this.namespace=i.namespace,i.properties&&(this.properties=i.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=l.source,this.sourceLayer=l.sourceLayer,this.layer=l.layer)}toJSON(){const l=super.toJSON();return l.target=this.target,l.namespace=this.namespace,l}},r.dg=Bp,r.dh=Ca,r.di=Mv,r.dj=class extends wl{constructor(l){super(l),this.current=Xy}set(l,i,s){if(this.fetchUniformLocation(l,i)){for(let h=0;h<9;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},r.dk=Ee,r.dl=function(l,i,s){const h=md(s.zoom),p=l.style.map._antialias,v=l.terrain&&l.terrain.exaggeration()>0;return h===0&&!p&&!v},r.dm=function(l){const i=l.pixelsPerMeter,s=i/Re(1,l.center.lat),h=H(new Float64Array(16));return re(h,h,[l.point.x,l.point.y,0]),ne(h,h,[s,s,i]),Float32Array.from(h)},r.dn=Dv,r.dp=function(l){const i=rt-5;l=Fe(l,-80.051129,i)/i*90;const s=Math.pow(Math.abs(Math.sin(Y(l))),3);return Math.round(s*(V.length-1))},r.dq=function(l,i,s,h){const p=i.getNorth(),v=i.getSouth(),x=i.getWest(),E=i.getEast(),M=1<<l.z,P=E-x,k=p-v,B=P/F,j=-k/V[s],X=[0,B,0,j,0,0,p,x,0];if(l.z>0){const Z=180/h;N(X,X,[Z/P+1,0,0,0,Z/k+1,0,-.5*Z/B,.5*Z/j,1])}return X[2]=M,X[5]=l.x,X[8]=l.y,X},r.dr=ou,r.ds=function(l,i,s){const h=H(new Float64Array(16)),p=(i/(1<<l)-.5)*Math.PI*2;return ue(h,s.globeMatrix,p),Float32Array.from(h)},r.dt=class{isDataAvailableAtPoint(l){const i=this._source();if(this.isUsingMockSource()||!i||l.y<0||l.y>1)return!1;const s=i.getSource().maxzoom,h=1<<s,p=Math.floor(l.x),v=Math.floor((l.x-p)*h),x=Math.floor(l.y*h),E=this.findDEMTileFor(new br(s,p,s,v,x));return!(!E||!E.dem)}getAtPointOrZero(l,i=0){return this.getAtPoint(l,i)||0}getAtPoint(l,i,s=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const h=this._source();if(!h||l.y<0||l.y>1)return i;const p=h.getSource().maxzoom,v=1<<p,x=Math.floor(l.x),E=l.x-x,M=new br(p,x,p,Math.floor(E*v),Math.floor(l.y*v)),P=this.findDEMTileFor(M);if(!P||!P.dem)return i;const k=P.dem,B=1<<P.tileID.canonical.z,j=(E*B-P.tileID.canonical.x)*k.dim,X=(l.y*B-P.tileID.canonical.y)*k.dim,Z=Math.floor(j),oe=Math.floor(X);return(s?this.exaggeration():1)*jn(jn(k.get(Z,oe),k.get(Z,oe+1),X-oe),jn(k.get(Z+1,oe),k.get(Z+1,oe+1),X-oe),j-Z)}getAtTileOffset(l,i,s){const h=1<<l.canonical.z;return this.getAtPointOrZero(new ft(l.wrap+(l.canonical.x+i/Qt)/h,(l.canonical.y+s/Qt)/h))}getAtTileOffsetFunc(l,i,s,h){return p=>{const v=this.getAtTileOffset(l,p.x,p.y),x=h.upVector(l.canonical,p.x,p.y);return je(x,x,v*h.upVectorScale(l.canonical,i,s).metersToTile),x}}getForTilePoints(l,i,s,h){if(this.isUsingMockSource())return!1;const p=f0.create(this,l,h);return!!p&&(i.forEach(v=>{v[2]=this.exaggeration()*p.getElevationAt(v[0],v[1],s)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(l);if(!i||!i.dem)return null;const s=i.dem.tree,h=i.tileID,p=1<<l.canonical.z-h.canonical.z;let v=l.canonical.x/p-h.canonical.x,x=l.canonical.y/p-h.canonical.y,E=0;for(let M=0;M<l.canonical.z-h.canonical.z&&!s.leaves[E];M++){v*=2,x*=2;const P=2*Math.floor(x)+Math.floor(v);E=s.childOffsets[E]+P,v%=1,x%=1}return{min:this.exaggeration()*s.minimums[E],max:this.exaggeration()*s.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,i,s){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const l=this.visibleDemTiles;if(l.length===0)return null;let i=!1,s=Number.MAX_VALUE,h=Number.MIN_VALUE;for(const p of l){const v=this.getMinMaxForTile(p.tileID);v&&(s=Math.min(s,v.min),h=Math.max(h,v.max),i=!0)}return i?{min:s,max:h}:null}},r.du=Ux,r.dv=ru,r.dw=function(l,i){return[Math.pow(l[0],2.2)*i,Math.pow(l[1],2.2)*i,Math.pow(l[2],2.2)*i]},r.dx=O,r.dy=function(l,i){var s=Math.sin(i),h=Math.cos(i);return l[0]=h,l[1]=s,l[2]=0,l[3]=-s,l[4]=h,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},r.dz=On,r.e=zo,r.e$=fz,r.e0=256,r.e1=Ov,r.e2=va,r.e3=ue,r.e4=function(l,i){return l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[4],l[4]=i[5],l[5]=i[6],l[6]=i[8],l[7]=i[9],l[8]=i[10],l},r.e5=nc,r.e6=dd,r.e7=function(l,i,s,h,p){return Fe((l-i)/(s-i)*(p-h)+h,h,p)},r.e8=Cn,r.e9=function(l,i){var s=i[0],h=i[1],p=i[2],v=i[3],x=i[4],E=i[5],M=i[6],P=i[7],k=i[8],B=k*x-E*P,j=-k*v+E*M,X=P*v-x*M,Z=s*B+h*j+p*X;return Z?(l[0]=B*(Z=1/Z),l[1]=(-k*h+p*P)*Z,l[2]=(E*h-p*x)*Z,l[3]=j*Z,l[4]=(k*s-p*M)*Z,l[5]=(-E*s+p*v)*Z,l[6]=X*Z,l[7]=(-P*s+h*M)*Z,l[8]=(x*s-h*v)*Z,l):null},r.eA=function(l,i,s){return l[0]=i[0]/s[0],l[1]=i[1]/s[1],l[2]=i[2]/s[2],l},r.eB=zn,r.eC=he,r.eD=Ft,r.eE=function(l,i,s,h){return l[0]=i,l[1]=s,l[2]=h,l},r.eF=function([l,i,s]){const h=Math.hypot(l,i,s),p=Math.atan2(l,s),v=.5*Math.PI-Math.acos(-i/h);return new ce(ie(p),ie(v))},r.eG=Pi,r.eH=GA,r.eI=function(l){const i=l.navigator?l.navigator.userAgent:null;return!!function(s){if(ho==null){const h=s.navigator?s.navigator.userAgent:null;ho=!!s.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return ho}(l)&&!(!i||!(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},r.eJ=function(l,i){dc=l,cl=i},r.eK=cg,r.eL=zx,r.eM=function(l){const i=[0,0,0],s=H(new Float64Array(16));return W(s,l.pixelMatrix,l.globeMatrix),Hn(i,i,s),new Zt(i[0],i[1])},r.eN=function(l,i,s=!1){if(_a===gf||_a===Lp||_a===kp)throw new Error("setRTLTextPlugin cannot be called multiple times.");Jc=qa.resolveURL(l),_a=gf,Jm=i,zp(),s||Cy()},r.eO=Gu,r.eP=function(){NS().acquire(JA)},r.eQ=function(){const l=Cb;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(JA),Cb=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},r.eR=__,r.eS=function(l){const i=Lm();if(!i)return;const s=i.delete(Xs);l&&s.then(()=>l()).catch(l)},r.eT=Eb,r.eU=iz,r.eV=function(l){lM=qa.resolveURL(l),_0||(_0=new p0(NS(),new Ru)),_0.broadcast("setDracoUrl",lM)},r.eW=rz,r.eX=function(l){y0=qa.resolveURL(l),_0||(_0=new p0(NS(),new Ru)),_0.broadcast("setMeshoptUrl",y0)},r.eY=hn,r.eZ=gd,r.e_=Td,r.ea=by,r.eb=on,r.ec=wt,r.ed=class{constructor(l,i,s,h){this.context=l,this.format=h,this.size=s,this.texture=l.gl.createTexture();const[p,v,x]=this.size,{gl:E}=l;E.bindTexture(E.TEXTURE_3D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),E.texImage3D(E.TEXTURE_3D,0,this.format,p,v,x,0,UA(this.format),VA(this.format),i.data)}bind(l,i){const{context:s}=this,{gl:h}=s;h.bindTexture(h.TEXTURE_3D,this.texture),l!==this.minFilter&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MAG_FILTER,l),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MIN_FILTER,l),this.minFilter=l),i!==this.wrapS&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_T,i),this.wrapS=i)}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}},r.ee=function(l,i){if(l===i){var s=i[1],h=i[2],p=i[3],v=i[6],x=i[7],E=i[11];l[1]=i[4],l[2]=i[8],l[3]=i[12],l[4]=s,l[6]=i[9],l[7]=i[13],l[8]=h,l[9]=v,l[11]=i[14],l[12]=p,l[13]=x,l[14]=E}else l[0]=i[0],l[1]=i[4],l[2]=i[8],l[3]=i[12],l[4]=i[1],l[5]=i[5],l[6]=i[9],l[7]=i[13],l[8]=i[2],l[9]=i[6],l[10]=i[10],l[11]=i[14],l[12]=i[3],l[13]=i[7],l[14]=i[11],l[15]=i[15];return l},r.ef=qA,r.eg=Xe,r.eh=[1,1,1],r.ei=function(l,i,s,h){var p=new A(4);return p[0]=l,p[1]=i,p[2]=s,p[3]=h,p},r.ej=fi,r.ek=function(l,i,s,h){var p=i[0],v=i[1],x=i[2],E=i[3];return l[0]=p+h*(s[0]-p),l[1]=v+h*(s[1]-v),l[2]=x+h*(s[2]-x),l[3]=E+h*(s[3]-E),l},r.el=f0,r.em=d0,r.en=tu,r.eo=Ku,r.ep=function(l,i,s,h,p,v,x,E,M,P,k,B,j,X,Z,oe){var de=new A(16);return de[0]=l,de[1]=i,de[2]=s,de[3]=h,de[4]=p,de[5]=v,de[6]=x,de[7]=E,de[8]=M,de[9]=P,de[10]=k,de[11]=B,de[12]=j,de[13]=X,de[14]=Z,de[15]=oe,de},r.eq=le,r.er=$p,r.es=Vp,r.et=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Zt(1/0,1/0),max:new Zt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(l,i=!1){const s=s_(new Zt(0,0),new Zt(Qt,Qt),l),h=[];if(i&&!rb(s,this._globalClipBounds))return h;for(const p of this._activeRegions){if(p.hiddenByOverlap||!rb(s,p))continue;const v=ob(p.min,p.max,l);h.push({min:v.min,max:v.max,sourceId:this._sourceIds[p.priority],footprint:p.footprint,footprintTileId:p.tileId,order:p.order,clipMask:p.clipMask,clipScope:p.clipScope})}return h}setSources(l){this._setSources(l.map(i=>({getSourceId:()=>i.cache.id,getFootprints:()=>{const s=[];for(const h of i.cache.getVisibleCoordinates()){const p=i.cache.getTile(h).buckets[i.layer];p&&p.updateFootprints(h.toUnwrapped(),s)}return s},getOrder:()=>i.order,getClipMask:()=>i.clipMask,getClipScope:()=>i.clipScope})))}_addSource(l){const i=l.getFootprints();if(i.length===0)return;const s=l.getOrder(),h=l.getClipMask(),p=l.getClipScope();for(const v of i){if(!v.footprint)continue;const x=s_(v.footprint.min,v.footprint.max,v.id);this._activeRegions.push({min:x.min,max:x.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:v.id,footprint:v.footprint,order:s,clipMask:h,clipScope:p})}this._sourceIds.push(l.getSourceId())}_computeReplacement(){this._activeRegions.sort((i,s)=>i.priority-s.priority||e0(i.min,s.min)||e0(i.max,s.max)||i.order-s.order||i.clipMask-s.clipMask||function(h,p){const v=(x,E)=>x+E;return h.length-p.length||h.reduce(v,"").localeCompare(p.reduce(v,""))}(i.clipScope,s.clipScope));let l=this._activeRegions.length!==this._prevRegions.length;if(!l){let i=0;for(;!l&&i!==this._activeRegions.length;){const s=this._activeRegions[i],h=this._prevRegions[i];l=s.priority!==h.priority||!oS(s,h)||s.order!==h.order||s.clipMask!==h.clipMask||!Os(s.clipScope,h.clipScope),++i}}if(l){++this._updateTime;for(const s of this._activeRegions)s.order!==o_&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,s.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,s.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,s.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,s.max.y));const i=s=>{const h=this._activeRegions;if(s>=h.length)return s;const p=h[s].priority;for(;s<h.length&&h[s].priority===p;)++s;return s};if(this._sourceIds.length>1){let s=0,h=i(s);for(;s!==h;){let p=s;const v=s;for(;p!==h;){const x=this._activeRegions[p];x.hiddenByOverlap=!1;for(let E=0;E<v;E++){const M=this._activeRegions[E];if(!M.hiddenByOverlap&&x.order===o_&&rb(x,M)&&(x.hiddenByOverlap=yg(x.footprint,x.tileId,M.footprint,M.tileId),x.hiddenByOverlap))break}++p}s=h,h=i(s)}}}}_setSources(l){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=l.length-1;i>=0;i--)this._addSource(l[i]);this._computeReplacement()}},r.eu=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy()}_fillGridMeshWithLods(l,i){const s=new Jl,h=new xo,p=[],v=l+1+2,x=i[0]+1,E=i[0]+1+(1+i.length),M=(P,k,B)=>{let j=P===v-1?P-2:P===0?P:P-1;return j+=B?24575:0,[j,k]};for(let P=0;P<v;++P)s.emplaceBack(...M(P,0,!0));for(let P=0;P<x;++P)for(let k=0;k<v;++k)s.emplaceBack(...M(k,P,(k===0||k===v-1)&&!0));for(let P=0;P<i.length;++P){const k=i[P];for(let B=0;B<v;++B)s.emplaceBack(...M(B,k,!0))}for(let P=0;P<i.length;++P){const k=h.length,B=i[P]+1+2,j=new xo;for(let oe=0;oe<B-1;oe++){const de=oe===B-2,me=de?v*(E-i.length+P-oe):v;for(let Se=0;Se<v-1;Se++){const be=oe*v+Se;oe===0||de||Se===0||Se===v-2?(j.emplaceBack(be+1,be,be+me),j.emplaceBack(be+me,be+me+1,be+1)):(h.emplaceBack(be+1,be,be+me),h.emplaceBack(be+me,be+me+1,be+1))}}const X=oo.simpleSegment(0,k,s.length,h.length-k);for(let oe=0;oe<j.uint16.length;oe+=3)h.emplaceBack(j.uint16[oe],j.uint16[oe+1],j.uint16[oe+2]);const Z=oo.simpleSegment(0,k,s.length,h.length-k);p.push({withoutSkirts:X,withSkirts:Z})}return{vertices:s,indices:h,segments:p}}_createGrid(l){const i=this._fillGridMeshWithLods(F,V);this._gridSegments=i.segments,this._gridBuffer=l.createVertexBuffer(i.vertices,ic.members),this._gridIndexBuffer=l.createIndexBuffer(i.indices,!0)}_createPoles(l){const i=new xo;for(let x=0;x<=F;x++)i.emplaceBack(0,x+1,x+2);this._poleIndexBuffer=l.createIndexBuffer(i,!0);const s=new nc,h=new nc,p=new nc,v=new nc;this._poleSegments=[];for(let x=0,E=0;x<C;x++){const M=360/(1<<x);s.emplaceBack(0,-w,0,.5,0),h.emplaceBack(0,-w,0,.5,1),p.emplaceBack(0,-w,0,.5,.5),v.emplaceBack(0,-w,0,.5,.5);for(let P=0;P<=F;P++){let k=P/F,B=0;const j=jn(0,M,k),[X,Z,oe]=J(Uw,No,j,w);s.emplaceBack(X,Z,oe,k,B),h.emplaceBack(X,Z,oe,k,1-B);const de=Y(j);k=.5+.5*Math.sin(de),B=.5+.5*Math.cos(de),p.emplaceBack(X,Z,oe,k,B),v.emplaceBack(X,Z,oe,k,1-B)}this._poleSegments.push(oo.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(s,na,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(h,na,!1),this._texturedPoleNorthVertexBuffer=l.createVertexBuffer(p,na,!1),this._texturedPoleSouthVertexBuffer=l.createVertexBuffer(v,na,!1)}getGridBuffers(l,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}},r.ev=o_,r.ew=Pe,r.ex=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},r.ey=Ue,r.ez=Vt,r.f=function(l){return l.indexOf("mapbox:")===0},r.f0=pz,r.f1=Yt,r.f2=nm,r.f3="hd_road_elevation",r.f4=Tl,r.f5=Pn,r.f6=nl,r.f7=IA,r.f8=p_,r.f9=function(l,i,s,h,p,v,x,E=1,M,P){l.createArrays(),l.tilePixelRatio=Qt/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const k=l.layers[0].layout,B=l.layers[0]._unevaluatedLayout._values,j={};j.scaleFactor=E,j.textSizeScaleRange=k.get("text-size-scale-range"),j.iconSizeScaleRange=k.get("icon-size-scale-range");const[X,Z]=j.textSizeScaleRange,[oe,de]=j.iconSizeScaleRange;j.textScaleFactor=Fe(j.scaleFactor,X,Z),j.iconScaleFactor=Fe(j.scaleFactor,oe,de);const me=B["text-size"],Se=B["icon-size"];if(l.textSizeData.kind==="composite"){const{minZoom:Ge,maxZoom:Ze}=l.textSizeData;j.compositeTextSizes=[me.possiblyEvaluate(new xr(Ge),v),me.possiblyEvaluate(new xr(Ze),v)]}if(l.iconSizeData.kind==="composite"){const{minZoom:Ge,maxZoom:Ze}=l.iconSizeData;j.compositeIconSizes=[Se.possiblyEvaluate(new xr(Ge),v),Se.possiblyEvaluate(new xr(Ze),v)]}j.layoutTextSize=me.possiblyEvaluate(new xr(x+1),v),j.layoutIconSize=Se.possiblyEvaluate(new xr(x+1),v),j.textMaxSize=me.possiblyEvaluate(new xr(18),v);const be=k.get("symbol-placement"),ae=k.get("text-rotation-alignment")==="map"&&be!=="point",_e=k.get("text-size");let we=!1;const Ie=[];for(const Ge of l.features){const Ze=k.get("text-font").evaluate(Ge,{},v).join(","),Ye=_e.evaluate(Ge,{},v)*j.textScaleFactor,tt=j.layoutTextSize.evaluate(Ge,{},v)*j.textScaleFactor,vt=j.layoutIconSize.evaluate(Ge,{},v)*j.iconScaleFactor,kt={horizontal:{},vertical:void 0},It=Ge.text;let Dt,$t=[0,0];if(It){const bn=It.toString(),Qn=k.get("text-letter-spacing").evaluate(Ge,{},v)*As,gi=k.get("text-line-height").evaluate(Ge,{},v)*As,_i=Ty(bn)?Qn:0,Ei=k.get("text-anchor").evaluate(Ge,{},v),Si=k.get("text-variable-anchor");if(!Si){const Oe=k.get("text-radial-offset").evaluate(Ge,{},v);if(Oe)$t=kL(Ei,[Oe*As,DA]);else{const St=k.get("text-offset").evaluate(Ge,{},v);$t=[St[0]*As,St[1]*As]}}let xi=ae?"center":k.get("text-justify").evaluate(Ge,{},v);const kr=be==="point",Xr=kr?k.get("text-max-width").evaluate(Ge,{},v)*As:1/0,Me=Oe=>{l.allowVerticalPlacement&&Pp(bn)&&(kt.vertical=AA(It,i,s,p,Ze,Xr,gi,Ei,Oe,_i,$t,rc.vertical,!0,tt,Ye,M))};if(!ae&&Si){const Oe=xi==="auto"?Si.map(Jt=>OA(Jt)):[xi];let St=!1;for(let Jt=0;Jt<Oe.length;Jt++){const an=Oe[Jt];if(!kt.horizontal[an])if(St)kt.horizontal[an]=kt.horizontal[0];else{const sn=AA(It,i,s,p,Ze,Xr,gi,"center",an,_i,$t,rc.horizontal,!1,tt,Ye,M);sn&&(kt.horizontal[an]=sn,St=sn.positionedLines.length===1)}}Me("left")}else{if(xi==="auto"&&(xi=OA(Ei)),kr||k.get("text-writing-mode").indexOf("horizontal")>=0||!Pp(bn)){const Oe=AA(It,i,s,p,Ze,Xr,gi,Ei,xi,_i,$t,rc.horizontal,!1,tt,Ye,M);Oe&&(kt.horizontal[xi]=Oe)}Me(kr?"left":xi)}}let yt,Pt,gt,_t,Gt,Xt,En,gn=!1;if(Ge.icon&&Ge.icon.hasPrimary()){const bn=BL(Ge.icon,l.iconSizeData,B["icon-size"],v,l.zoom,Ge,M,j.iconScaleFactor);yt=bn.iconPrimary,gt=bn.iconSecondary;const Qn=yt.toString();if(Pt=h.get(Qn),Pt&&(Gt=k.get("icon-offset").evaluate(Ge,{},v),Xt=k.get("icon-anchor").evaluate(Ge,{},v),En=k.get("icon-text-fit").evaluate(Ge,{},v),Dt=zH(p.get(Qn),gt?p.get(gt.toString()):void 0,Gt,Xt),gn=Pt.sdf,l.sdfIcons===void 0?l.sdfIcons=Pt.sdf:l.sdfIcons!==Pt.sdf&&ui("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pt.pixelRatio!==l.pixelRatio||k.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0)),gt){const gi=gt.toString();_t=h.get(gi)}}we=we||!(!Ge.icon||!Ge.icon.hasSecondary());const rn=LA(kt.horizontal)||kt.vertical;l.iconsInText||(l.iconsInText=!!rn&&rn.iconsInText);const Ht=tt*j.textScaleFactor/As,{defaultShapedIcon:ri,verticallyShapedIcon:xn}=GH(l,Dt,k,Ge,v,kt,Ht,Gt,En);En!=="none"&&Dt&&(vL(Dt)||xL(Dt))&&(bS(0,Pt,yt,Dt,ri,En,P,h,p),bS(0,_t,gt,Dt,ri,En,P,h,p),xn&&(bS(0,Pt,yt,Dt,xn,En,P,h,p),bS(0,_t,gt,Dt,xn,En,P,h,p))),Dt=ri,Ie.push({feature:Ge,shapedTextOrientations:kt,shapedText:rn,shapedIcon:Dt,iconPrimary:yt,iconSecondary:gt,iconOffset:Gt,iconAnchor:Xt,verticallyShapedIcon:xn,layoutTextSize:tt,layoutIconSize:vt,textOffset:$t,isSDFIcon:gn,iconTextFit:En})}return{featureData:Ie,sizes:j,hasAnySecondaryIcon:we,textAlongLine:ae,symbolPlacement:be}},r.fa=RL,r.fb=function(l,i,s,h,p,v,x,E,M,P){const{featureData:k,hasAnySecondaryIcon:B,sizes:j,textAlongLine:X,symbolPlacement:Z}=i;for(const oe of k){const{shapedIcon:de,verticallyShapedIcon:me,feature:Se,shapedTextOrientations:be,shapedText:ae,layoutTextSize:_e,textOffset:we,isSDFIcon:Ie,iconPrimary:Ge,iconSecondary:Ze,iconTextFit:Ye,iconOffset:tt}=oe;FL(de,P.iconPositions,Ge,Ze),FL(me,P.iconPositions,Ge,Ze),HH(be,P.iconPositions),(ae||de)&&qH(l,Se,be,de,me,M,j,_e,0,we,Ie,h,p,x,E,B,Ye,tt,X,Z)}s&&l.generateCollisionDebugBuffers(v,l.collisionBoxArray,j.textScaleFactor)},r.fc=rh,r.fd=qS,r.fe=ca,r.ff=qx,r.fg=hL,r.fh=ko,r.fi=function(l){let i=0;if(new Uint32Array(l,0,1)[0]!==sz){const s=new Uint32Array(l,0,7),[,,h,p,v,x]=s;i=s.byteLength+p+v+x+v,(h!==l.byteLength||i>=l.byteLength)&&ui("Invalid b3dm header information.")}return uz(l,i)},r.fj=function(l,i){const s=dz(l);for(const h of s){for(const p of h.meshes)bq(p);h.lights&&(h.lightMeshIndex=h.meshes.length,h.meshes.push(wq(h.lights,i)))}return s},r.fk=FS,r.fl=Er,r.fm=Ck,r.fn=vl,r.fo=function(l){Fl(),ul!=null&&ul.then(i=>{i.keys().then(s=>{for(let h=0;h<s.length-l;h++)i.delete(s[h]).catch(p=>ui(p.message))}).catch(s=>ui(s.message))}).catch(i=>ui(i.message))},r.g=function(l,i){return Ca(Ke(l,{method:"GET"}),i)},r.h=Sa,r.i=function(l){return zo.API_STYLE_REGEX.test(l)&&!ls(l)},r.j=function(l){return decodeURIComponent(atob(l).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))},r.k=function(l){return btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,(i,s)=>String.fromCharCode(+("0x"+s))))},r.l=Ke,r.m=sy,r.n=function(l,i){return Ca(Ke(l,{type:"json"}),i)},r.o=Ih,r.p=function(l,i){return Ca(Ke(l,{method:"POST"}),i)},r.q=qa,r.r=ps,r.s=function(l){try{const i=self[l];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}},r.t=Ta,r.u=function(){return function l(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()},r.v=function(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)},r.w=ui,r.x=function(){return QA||(QA=new __),QA},r.y=rM,r.z=sp}),f(["./shared"],function(r){function S(Te){const Y=Te?Te.url.toString():void 0;return Y?performance.getEntriesByName(Y):[]}function A(Te){if(typeof Te=="number"||typeof Te=="boolean"||typeof Te=="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){let ie="[";for(const ge of Te)ie+=`${A(ge)},`;return`${ie}]`}let Y="{";for(const ie of Object.keys(Te).sort())Y+=`${ie}:${A(Te[ie])},`;return`${Y}}`}function R(Te){let Y="";for(const ie of r.bu)(Te.type!=="model"||ie!=="minzoom"&&ie!=="maxzoom")&&(Y+=`/${A(Te[ie])}`);return Y}class O{constructor(Y){this.keyCache={},this._layers={},this._layerConfigs={},Y&&this.replace(Y)}replace(Y,ie){this._layerConfigs={},this._layers={},this.update(Y,[],ie)}update(Y,ie,ge){this._options=ge;for(const Pe of Y)this._layerConfigs[Pe.id]=Pe,(this._layers[Pe.id]=r.dc(Pe,this.scope,null,this._options)).compileFilter(ge),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id];for(const Pe of ie)delete this.keyCache[Pe],delete this._layerConfigs[Pe],delete this._layers[Pe];this.familiesBySource={};const Ee=function(Pe,Ue){const Fe={};for(let Je=0;Je<Pe.length;Je++){const st=Pe[Je];let Ke=Ue&&Ue[st.id];Ke||(st.type==="symbol"?Ke=st.id:(Ke=R(st),st.type==="line"&&st.paint&&function qt(tn){return typeof tn=="string"&&tn==="line-progress"||(Array.isArray(tn)?tn.some(qt):!(!tn||typeof tn!="object")&&Object.values(tn).some(qt))}(st.paint["line-width"])&&(Ke+=`/${A(st.paint["line-width"])}`))),Ue&&(Ue[st.id]=Ke);let At=Fe[Ke];At||(At=Fe[Ke]=[]),At.push(st)}const He=[];for(const Je in Fe)He.push(Fe[Je]);return He}(Object.values(this._layerConfigs),this.keyCache);for(const Pe of Ee){const Ue=Pe.map(At=>this._layers[At.id]),Fe=Ue[0];if(Fe.visibility==="none")continue;const He=Fe.source||"";let Je=this.familiesBySource[He];Je||(Je=this.familiesBySource[He]={});const st=Fe.sourceLayer||"_geojsonTileLayer";let Ke=Je[st];Ke||(Ke=Je[st]=[]),Ke.push(Ue)}}}const z=1*r.e_;class N{constructor(Y){const ie={},ge=[];for(const Fe in Y){const He=Y[Fe],Je=ie[Fe]={};for(const st in He.glyphs){const Ke=He.glyphs[+st];if(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)continue;const At=Ke.metrics.localGlyph?z:1,qt={x:0,y:0,w:Ke.bitmap.width+2*At,h:Ke.bitmap.height+2*At};ge.push(qt),Je[st]=qt}}const{w:Ee,h:Pe}=r.H(ge),Ue=new r.eZ({width:Ee||1,height:Pe||1});for(const Fe in Y){const He=Y[Fe];for(const Je in He.glyphs){const st=He.glyphs[+Je];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const Ke=ie[Fe][Je],At=st.metrics.localGlyph?z:1;r.eZ.copy(st.bitmap,Ue,{x:0,y:0},{x:Ke.x+At,y:Ke.y+At},st.bitmap)}}this.image=Ue,this.positions=ie}}r.eY(N,"GlyphAtlas");class U{constructor(Y){this.tileID=new r.aM(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.tileZoom=Y.tileZoom,this.uid=Y.uid,this.zoom=Y.zoom,this.lut=Y.lut,this.canonical=Y.tileID.canonical,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.scope=Y.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.request&&Y.request.collectResourceTiming,this.promoteId=Y.promoteId,this.isSymbolTile=Y.isSymbolTile,this.tileTransform=r.aW(Y.tileID.canonical,Y.projection),this.projection=Y.projection,this.worldview=Y.worldview,this.localizableLayerIds=Y.localizableLayerIds,this.brightness=Y.brightness,this.extraShadowCaster=!!Y.extraShadowCaster,this.tessellationStep=Y.tessellationStep,this.scaleFactor=Y.scaleFactor}parse(Y,ie,ge,Ee,Pe,Ue){this.status="parsing",this.data=Y,this.collisionBoxArray=new r.b0;const Fe=new r.e$(Object.keys(Y.layers).sort()),He=new r.f0(this.tileID,this.promoteId);He.bucketLayerIDs=[];const Je={},st=new r.f1(256,256),Ke={featureIndex:He,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:st,availableImages:ge,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},At=ie.familiesBySource[this.source];for(const Di in At){const ar=Y.layers[Di];if(!ar)continue;let Er=!1,Lr=!1,ho=!1;for(const So of At[Di])So[0].type==="symbol"?Er=!0:Lr=!0,So[0].is3D()&&So[0].type!=="model"&&(ho=!0);if(this.extraShadowCaster&&!ho||this.isSymbolTile===!0&&!Er||this.isSymbolTile===!1&&!Lr)continue;ar.version===1&&r.w(`Vector tile source "${this.source}" layer "${Di}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ri=Fe.encode(Di),no=[];let ds=!1;for(let So=0,Go=0;So<ar.length;So++){const vr=ar.feature(So),zo=He.getId(vr,Di);if(this.localizableLayerIds&&this.localizableLayerIds.has(Di)){const Sa=vr.properties?vr.properties.worldview:null;if(this.worldview&&typeof Sa=="string")if(Sa==="all")vr.properties.$localized=!0;else{if(!Sa.split(",").includes(this.worldview))continue;vr.properties.$localized=!0,vr.properties.worldview=this.worldview}}!ds&&vr.properties&&vr.properties.hasOwnProperty(r.f2)&&(ds=!0),no.push({feature:vr,id:zo,index:Go,sourceLayerIndex:Ri}),Go++}ds&&!Ke.elevationFeatures&&Y.layers.hasOwnProperty(r.f3)&&(Ke.elevationFeatures=r.f4.parseFrom(Y.layers[r.f3],this.canonical));for(const So of At[Di]){const Go=So[0];(!this.extraShadowCaster||Go.is3D()&&Go.type!=="model")&&(this.isSymbolTile!==void 0&&Go.type==="symbol"!==this.isSymbolTile||Go.minzoom&&this.zoom<Math.floor(Go.minzoom)||Go.maxzoom&&this.zoom>=Go.maxzoom||Go.visibility!=="none"&&(H(So,this.zoom,Ke.brightness,ge),(Je[Go.id]=Go.createBucket({index:He.bucketLayerIDs.length,layers:So,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ri,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:Ee})).populate(no,Ke,this.tileID.canonical,this.tileTransform),He.bucketLayerIDs.push(So.map(vr=>r.C(vr.id,vr.scope)))))}}let qt,tn,kn,Pn,Dn,di;st.trim();const sr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ui=()=>{if(qt)return this.status="done",Ue(qt);if(this.extraShadowCaster)this.status="done",Ue(null,{buckets:Object.values(Je).filter(Di=>!Di.isEmpty()),featureIndex:He,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Ke.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(tn&&kn&&Pn){const Di=new N(tn),ar=new Map;for(const[ho,Ri]of kn.entries()){const{imagePosition:no}=r.f7(ho,Ri,r.f8);ar.set(ho,no)}const Er={};for(const ho in Je){const Ri=Je[ho];Ri instanceof r.b1&&(H(Ri.layers,this.zoom,Ke.brightness,ge),Er[ho]=r.f9(Ri,tn,Di.positions,kn,ar,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,Dn))}const Lr={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(Pe,kn,Dn,()=>{Lr.iconsPending=!1,$i(Er,Di,Lr)}),this.rasterizeIfNeeded(Pe,Pn,di,()=>{Lr.patternsPending=!1,$i(Er,Di,Lr)})}},$i=(Di,ar,Er,Lr)=>{if(Er.iconsPending||Er.patternsPending)return;const ho=new r.fa(kn,Pn,this.lut);for(const Ri in Je){const no=Je[Ri];if(Ri in Di)r.fb(no,Di[Ri],this.showCollisionBoxes,ge,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,kn,ho);else if(no.hasPattern&&(no instanceof r.b7||no instanceof r.b8||no instanceof r.dV)){H(no.layers,this.zoom,Ke.brightness,ge);const ds=Object.fromEntries(ho.patternPositions);no.addFeatures(Ke,this.tileID.canonical,ds,ge,this.tileTransform,this.brightness)}}this.status="done",Ue(null,{buckets:Object.values(Je).filter(Ri=>!Ri.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ar.image,lineAtlas:st,imageAtlas:ho,brightness:Ke.brightness})};if(!this.extraShadowCaster){const Di=r.f5(Ke.glyphDependencies,Lr=>Object.keys(Lr).map(Number));Object.keys(Di).length?Pe.send("getGlyphs",{uid:this.uid,stacks:Di,scope:this.scope},(Lr,ho)=>{qt||(qt=Lr,tn=ho,ui())},void 0,!1,sr):tn={};const ar=Array.from(Ke.iconDependencies.keys()).map(Lr=>r.I.parse(Lr));ar.length?Pe.send("getImages",{images:ar,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Lr,ho)=>{qt||(qt=Lr,kn=new Map,Dn=this.updateImageMapAndGetImageTaskQueue(kn,ho,Ke.iconDependencies),ui())},void 0,!1,sr):(kn=new Map,Dn=new Map);const Er=Array.from(Ke.patternDependencies.keys()).map(Lr=>r.I.parse(Lr));Er.length?Pe.send("getImages",{images:Er,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Lr,ho)=>{qt||(qt=Lr,Pn=new Map,di=this.updateImageMapAndGetImageTaskQueue(Pn,ho,Ke.patternDependencies),ui())},void 0,!1,sr):(Pn=new Map,di=new Map)}if(Ke.elevationFeatures&&Ke.elevationFeatures.length>0){const Di=[];for(const Er of Object.values(Je))if(Er instanceof r.b8){const Lr=Er.getUnevaluatedPortalGraph();Lr&&Di.push(Lr)}const ar=r.f6.evaluate(Di);for(const Er of Object.values(Je))Er instanceof r.b8&&Er.setEvaluatedPortalGraph(ar)}ui()}rasterizeIfNeeded(Y,ie,ge,Ee){Array.from(ie.values()).some(Pe=>Pe.usvg)?this.rasterize(Y,ie,ge,Ee):Ee()}updateImageMapAndGetImageTaskQueue(Y,ie,ge){const Ee=new Map;for(const Pe of ie.keys()){const Ue=ge.get(Pe)||[];for(const Fe of Ue){const He=Fe.toString(),Je=ie.get(Fe.id.toString());Je.usvg?Ee.has(He)||(Ee.set(He,Fe),Y.set(He,Object.assign({},Je))):Y.set(He,Je)}}return Ee}rasterize(Y,ie,ge,Ee){this.rasterizeTask=Y.send("rasterizeImages",{scope:this.scope,tasks:ge},(Pe,Ue)=>{if(!Pe)for(const[Fe,He]of Ue.entries()){const Je=Object.assign(ie.get(Fe),{data:He});ie.set(Fe,Je)}Ee()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function H(Te,Y,ie,ge){const Ee=new r.aa(Y,{brightness:ie});for(const Pe of Te)Pe.recalculate(Ee,ge)}class K extends r.E{constructor(Y,ie,ge,Ee,Pe,Ue,Fe){super(),this.actor=Y,this.layerIndex=ie,this.availableImages=ge,this.availableModels=Ee,this.loadVectorData=Ue||r.aJ,this.loading={},this.loaded={},this.deduped=new r.aI(Y.scheduler),this.isSpriteLoaded=Pe,this.scheduler=Y.scheduler,this.brightness=Fe}loadTile(Y,ie){const ge=Y.uid,Ee=Y&&Y.request,Pe=Ee&&Ee.collectResourceTiming,Ue=this.loading[ge]=new U(Y);Ue.abort=this.loadVectorData(Y,(Fe,He)=>{const Je=!this.loading[ge];if(delete this.loading[ge],Ue.cancelRasterize(),Je||Fe||!He)return Ue.status="done",Je||(this.loaded[ge]=Ue),ie(Fe);const st=He.rawData,Ke={};He.expires&&(Ke.expires=He.expires),He.cacheControl&&(Ke.cacheControl=He.cacheControl),Ue.vectorTile=He.vectorTile||new r.fc.VectorTile(new r.bq(st));const At=()=>{Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(qt,tn)=>{if(qt||!tn)return ie(qt);const kn={};if(Pe){const Pn=S(Ee);Pn.length>0&&(kn.resourceTiming=JSON.parse(JSON.stringify(Pn)))}ie(null,r.l({rawTileData:st.slice(0)},tn,Ke,kn))})};this.isSpriteLoaded?At():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(At,{type:"parseTile",isSymbolTile:Y.isSymbolTile,zoom:Y.tileZoom}):At()}),this.loaded=this.loaded||{},this.loaded[ge]=Ue})}reloadTile(Y,ie){const ge=this.loaded,Ee=Y.uid;if(ge&&ge[Ee]){const Pe=ge[Ee];Pe.scaleFactor=Y.scaleFactor,Pe.showCollisionBoxes=Y.showCollisionBoxes,Pe.projection=Y.projection,Pe.brightness=Y.brightness,Pe.tileTransform=r.aW(Y.tileID.canonical,Y.projection),Pe.extraShadowCaster=Y.extraShadowCaster,Pe.lut=Y.lut;const Ue=(Fe,He)=>{const Je=Pe.reloadCallback;Je&&(delete Pe.reloadCallback,Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Je)),ie(Fe,He)};Pe.status==="parsing"?Pe.reloadCallback=Ue:Pe.status==="done"&&(Pe.vectorTile?Pe.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Ue):Ue())}else ie(null,void 0)}abortTile(Y,ie){const ge=Y.uid,Ee=this.loading[ge];Ee&&(Ee.abort&&Ee.abort(),delete this.loading[ge]),ie()}removeTile(Y,ie){const ge=this.loaded,Ee=Y.uid;ge&&ge[Ee]&&delete ge[Ee],ie()}}class W{loadTile(Y,ie){const{uid:ge,encoding:Ee,rawImageData:Pe,padding:Ue}=Y,Fe=ImageBitmap&&Pe instanceof ImageBitmap?this.getImageData(Pe,Ue):Pe;ie(null,new r.fd(ge,Fe,Ee,Ue<1))}reloadTile(Y,ie){ie(null,null)}abortTile(Y,ie){ie()}removeTile(Y,ie){ie()}getImageData(Y,ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const ge=this.offscreenCanvasContext.getImageData(-ie,-ie,Y.width+2*ie,Y.height+2*ie);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ge}}r.bp.setPbf(r.bq);class re{constructor(Y){this._mrt=new r.bp(Y.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=Y.uid,this.tileID=Y.tileID,this.source=Y.source}parse(Y,ie){const ge=this._mrt;this.status="parsing",this._entireBuffer=Y;try{ge.parseHeader(Y),this._isHeaderLoaded=!0;const Ee=[];for(const Pe in ge.layers){const Ue=ge.getLayer(Pe),Fe=Ue.getDataRange(Ue.getBandList()),He=ge.createDecodingTask(Fe),Je=Y.slice(Fe.firstByte,Fe.lastByte+1),st=r.bp.performDecoding(Je,He).then(Ke=>He.complete(null,Ke)).catch(Ke=>He.complete(Ke,null));Ee.push(st)}Promise.allSettled(Ee).then(()=>ie(null,ge)).catch(Pe=>ie(Pe))}catch(Ee){ie(Ee)}}}class ne{constructor(Y){this.actor=Y,this.loading={},this.loaded={}}loadTile(Y,ie){const ge=Y.uid,Ee=Y.request,Pe=this.loading[ge]=new re(Y),{cancel:Ue}=r.br(Ee,(Fe,He,Je,st)=>{const Ke=!this.loading[ge];if(delete this.loading[ge],Ke||Fe||!He)return Pe.status="done",Ke||(this.loaded[ge]=Pe),ie(Fe);Pe.parse(He,(At,qt)=>{if(At||!qt)return ie(At);ie(null,qt,Je,st)}),this.loaded[ge]=Pe});Pe.abort=Ue}reloadTile(Y,ie){ie(null,void 0)}abortTile(Y,ie){const ge=Y.uid,Ee=this.loading[ge];Ee&&(Ee.abort&&Ee.abort(),delete this.loading[ge]),ie()}removeTile(Y,ie){const ge=Y.uid;this.loaded[ge]&&delete this.loaded[ge],ie()}decodeRasterArray(Y,ie){r.bp.performDecoding(Y.buffer,Y.task).then(ge=>ie(null,ge)).catch(ge=>ie(ge))}}const se=r.fc.VectorTileFeature.prototype.toGeoJSON;class ue{constructor(Y){this._feature=Y,this.extent=r.aj,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){const Y=[];for(const ie of this._feature.geometry)Y.push([new r.P(ie[0],ie[1])]);return Y}{const Y=[];for(const ie of this._feature.geometry){const ge=[];for(const Ee of ie)ge.push(new r.P(Ee[0],Ee[1]));Y.push(ge)}return Y}}toGeoJSON(Y,ie,ge){return se.call(this,Y,ie,ge)}}class pe{constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.aj,this.length=Y.length,this._features=Y}feature(Y){return new ue(this._features[Y])}}const Ce=64/4096,Le=128;class qe{constructor(){this.features=new Map}clear(){this.features.clear()}load(Y=[],ie){for(const ge of Y){const Ee=ge.id;if(Ee==null)continue;let Pe=this.features.get(Ee);Pe&&this.updateCache(Pe,ie),ge.geometry?(Pe=Xe(ge),this.updateCache(Pe,ie),this.features.set(Ee,Pe)):this.features.delete(Ee),this.updateCache(Pe,ie)}}updateCache(Y,ie){for(const{canonical:ge,uid:Ee}of Object.values(ie)){const{z:Pe,x:Ue,y:Fe}=ge;ye(Y,Math.pow(2,Pe),Ue,Fe)&&delete ie[Ee]}}getTile(Y,ie,ge){const Ee=Math.pow(2,Y),Pe=[];for(const Ue of this.features.values())ye(Ue,Ee,ie,ge)&&Pe.push(mt(Ue,Ee,ie,ge));return{features:Pe}}getFeatures(){return[...this.features.values()]}}function ye({minX:Te,minY:Y,maxX:ie,maxY:ge},Ee,Pe,Ue){return Te<(Pe+1+Ce)/Ee&&Y<(Ue+1+Ce)/Ee&&ie>(Pe-Ce)/Ee&&ge>(Ue-Ce)/Ee}function Xe(Te){const{id:Y,geometry:ie,properties:ge}=Te;if(!ie)return;if(ie.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Ee,coordinates:Pe}=ie,Ue={id:Y,type:1,geometry:[],tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Fe=Ue.geometry;if(Ee==="Point")ut(Pe,Fe,Ue);else if(Ee==="MultiPoint")for(const He of Pe)ut(He,Fe,Ue);else if(Ee==="LineString")Ue.type=2,et(Pe,Fe,Ue);else if(Ee==="MultiLineString")Ue.type=2,ot(Pe,Fe,Ue);else if(Ee==="Polygon")Ue.type=3,ot(Pe,Fe,Ue,!0);else{if(Ee!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ue.type=3;for(const He of Pe)ot(He,Fe,Ue,!0)}return Ue}function ut([Te,Y],ie,ge){const Ee=r.ay(Te);let Pe=r.aH(Y);Pe=Pe<0?0:Pe>1?1:Pe,ie.push(Ee,Pe),ge.minX=Math.min(ge.minX,Ee),ge.minY=Math.min(ge.minY,Pe),ge.maxX=Math.max(ge.maxX,Ee),ge.maxY=Math.max(ge.maxY,Pe)}function et(Te,Y,ie,ge=!1,Ee=!1){const Pe=[];for(const Ue of Te)ut(Ue,Pe,ie);Y.push(Pe),ge&&function(Ue,Fe){let He=0;for(let Je=0,st=Ue.length,Ke=st-2;Je<st;Ke=Je,Je+=2)He+=(Ue[Je]-Ue[Ke])*(Ue[Je+1]+Ue[Ke+1]);if(He>0===Fe)for(let Je=0,st=Ue.length;Je<st/2;Je+=2){const Ke=Ue[Je],At=Ue[Je+1];Ue[Je]=Ue[st-2-Je],Ue[Je+1]=Ue[st-1-Je],Ue[st-2-Je]=Ke,Ue[st-1-Je]=At}}(Pe,Ee)}function ot(Te,Y,ie,ge=!1){for(let Ee=0;Ee<Te.length;Ee++)et(Te[Ee],Y,ie,ge,Ee===0)}function mt(Te,Y,ie,ge){const{id:Ee,type:Pe,geometry:Ue,tags:Fe}=Te,He=[];if(Pe===1)(function(Je,st,Ke,At,qt){for(let tn=0;tn<Je.length;tn+=2){const kn=Math.round(r.aj*(Je[tn+0]*st-Ke)),Pn=Math.round(r.aj*(Je[tn+1]*st-At));qt.push([kn,Pn])}})(Ue,Y,ie,ge,He);else for(const Je of Ue)$e(Je,Y,ie,ge,He);return{id:Ee,type:Pe,geometry:He,tags:Fe}}function $e(Te,Y,ie,ge,Ee){const Ue=r.aj+Le;let Fe;for(let He=0;He<Te.length-2;He+=2){let Je=Math.round(r.aj*(Te[He+0]*Y-ie)),st=Math.round(r.aj*(Te[He+1]*Y-ge)),Ke=Math.round(r.aj*(Te[He+2]*Y-ie)),At=Math.round(r.aj*(Te[He+3]*Y-ge));const qt=Ke-Je,tn=At-st;Je<-128&&Ke<-128||(Je<-128?(st+=Math.round(tn*((-128-Je)/qt)),Je=-128):Ke<-128&&(At=st+Math.round(tn*((-128-Je)/qt)),Ke=-128),st<-128&&At<-128||(st<-128?(Je+=Math.round(qt*((-128-st)/tn)),st=-128):At<-128&&(Ke=Je+Math.round(qt*((-128-st)/tn)),At=-128),Je>=Ue&&Ke>=Ue||(Je>=Ue?(st+=Math.round(tn*((Ue-Je)/qt)),Je=Ue):Ke>=Ue&&(At=st+Math.round(tn*((Ue-Je)/qt)),Ke=Ue),st>=Ue&&At>=Ue||(st>=Ue?(Je+=Math.round(qt*((Ue-st)/tn)),st=Ue):At>=Ue&&(Ke=Je+Math.round(qt*((Ue-st)/tn)),At=Ue),Fe&&Je===Fe[Fe.length-1][0]&&st===Fe[Fe.length-1][1]||(Fe=[[Je,st]],Ee.push(Fe)),Fe.push([Ke,At])))))}}var it,Tt,xt,je={exports:{}},ht=function(){if(xt)return je.exports;xt=1;var Te=r.fg(),Y=function(){if(Tt)return it;Tt=1;var st=r.fe(),Ke=r.ff().VectorTileFeature;function At(tn,kn){this.options=kn||{},this.features=tn,this.length=tn.length}function qt(tn,kn){this.id=typeof tn.id=="number"?tn.id:void 0,this.type=tn.type,this.rawGeometry=tn.type===1?[tn.geometry]:tn.geometry,this.properties=tn.tags,this.extent=kn||4096}return it=At,At.prototype.feature=function(tn){return new qt(this.features[tn],this.options.extent)},qt.prototype.loadGeometry=function(){var tn=this.rawGeometry;this.geometry=[];for(var kn=0;kn<tn.length;kn++){for(var Pn=tn[kn],Dn=[],di=0;di<Pn.length;di++)Dn.push(new st(Pn[di][0],Pn[di][1]));this.geometry.push(Dn)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tn=this.geometry,kn=1/0,Pn=-1/0,Dn=1/0,di=-1/0,sr=0;sr<tn.length;sr++)for(var ui=tn[sr],$i=0;$i<ui.length;$i++){var Di=ui[$i];kn=Math.min(kn,Di.x),Pn=Math.max(Pn,Di.x),Dn=Math.min(Dn,Di.y),di=Math.max(di,Di.y)}return[kn,Dn,Pn,di]},qt.prototype.toGeoJSON=Ke.prototype.toGeoJSON,it}();function ie(st){var Ke=new Te;return function(At,qt){for(var tn in At.layers)qt.writeMessage(3,ge,At.layers[tn])}(st,Ke),Ke.finish()}function ge(st,Ke){var At;Ke.writeVarintField(15,st.version||1),Ke.writeStringField(1,st.name||""),Ke.writeVarintField(5,st.extent||4096);var qt={keys:[],values:[],keycache:{},valuecache:{}};for(At=0;At<st.length;At++)qt.feature=st.feature(At),Ke.writeMessage(2,Ee,qt);var tn=qt.keys;for(At=0;At<tn.length;At++)Ke.writeStringField(3,tn[At]);var kn=qt.values;for(At=0;At<kn.length;At++)Ke.writeMessage(4,Je,kn[At])}function Ee(st,Ke){var At=st.feature;At.id!==void 0&&Ke.writeVarintField(1,At.id),Ke.writeMessage(2,Pe,st),Ke.writeVarintField(3,At.type),Ke.writeMessage(4,He,At)}function Pe(st,Ke){var At=st.feature,qt=st.keys,tn=st.values,kn=st.keycache,Pn=st.valuecache;for(var Dn in At.properties){var di=At.properties[Dn],sr=kn[Dn];if(di!==null){sr===void 0&&(qt.push(Dn),kn[Dn]=sr=qt.length-1),Ke.writeVarint(sr);var ui=typeof di;ui!=="string"&&ui!=="boolean"&&ui!=="number"&&(di=JSON.stringify(di));var $i=ui+":"+di,Di=Pn[$i];Di===void 0&&(tn.push(di),Pn[$i]=Di=tn.length-1),Ke.writeVarint(Di)}}}function Ue(st,Ke){return(Ke<<3)+(7&st)}function Fe(st){return st<<1^st>>31}function He(st,Ke){for(var At=st.loadGeometry(),qt=st.type,tn=0,kn=0,Pn=At.length,Dn=0;Dn<Pn;Dn++){var di=At[Dn],sr=1;qt===1&&(sr=di.length),Ke.writeVarint(Ue(1,sr));for(var ui=qt===3?di.length-1:di.length,$i=0;$i<ui;$i++){$i===1&&qt!==1&&Ke.writeVarint(Ue(2,ui-1));var Di=di[$i].x-tn,ar=di[$i].y-kn;Ke.writeVarint(Fe(Di)),Ke.writeVarint(Fe(ar)),tn+=Di,kn+=ar}qt===3&&Ke.writeVarint(Ue(7,1))}}function Je(st,Ke){var At=typeof st;At==="string"?Ke.writeStringField(1,st):At==="boolean"?Ke.writeBooleanField(7,st):At==="number"&&(st%1!=0?Ke.writeDoubleField(3,st):st<0?Ke.writeSVarintField(6,st):Ke.writeVarintField(5,st))}return je.exports=ie,je.exports.fromVectorTileJs=ie,je.exports.fromGeojsonVt=function(st,Ke){Ke=Ke||{};var At={};for(var qt in st)At[qt]=new Y(st[qt].features,Ke),At[qt].name=qt,At[qt].version=Ke.version,At[qt].extent=Ke.extent;return ie({layers:At})},je.exports.GeoJSONWrapper=Y,je.exports}(),Bt=r.fh(ht);const Ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},on=Math.fround||(en=new Float32Array(1),Te=>(en[0]=+Te,en[0]));var en;const jt=3,Rn=5,Vn=6;class Hn{constructor(Y){this.options=Object.assign(Object.create(Ft),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:ie,minZoom:ge,maxZoom:Ee}=this.options;ie&&console.time("total time");const Pe=`prepare ${Y.length} points`;ie&&console.time(Pe),this.points=Y;const Ue=[];for(let He=0;He<Y.length;He++){const Je=Y[He];if(!Je.geometry)continue;const[st,Ke]=Je.geometry.coordinates,At=on(oi(st)),qt=on(Ln(Ke));Ue.push(At,qt,1/0,He,-1,1),this.options.reduce&&Ue.push(0)}let Fe=this.trees[Ee+1]=this._createTree(Ue);ie&&console.timeEnd(Pe);for(let He=Ee;He>=ge;He--){const Je=+Date.now();Fe=this.trees[He]=this._createTree(this._cluster(Fe,He)),ie&&console.log("z%d: %d clusters in %dms",He,Fe.numItems,+Date.now()-Je)}return ie&&console.timeEnd("total time"),this}getClusters(Y,ie){let ge=((Y[0]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,Y[1]));let Pe=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)ge=-180,Pe=180;else if(ge>Pe){const Ke=this.getClusters([ge,Ee,180,Ue],ie),At=this.getClusters([-180,Ee,Pe,Ue],ie);return Ke.concat(At)}const Fe=this.trees[this._limitZoom(ie)],He=Fe.range(oi(ge),Ln(Ue),oi(Pe),Ln(Ee)),Je=Fe.data,st=[];for(const Ke of He){const At=this.stride*Ke;st.push(Je[At+Rn]>1?On(Je,At,this.clusterProps):this.points[Je[At+jt]])}return st}getChildren(Y){const ie=this._getOriginId(Y),ge=this._getOriginZoom(Y),Ee="No cluster with the specified id.",Pe=this.trees[ge];if(!Pe)throw new Error(Ee);const Ue=Pe.data;if(ie*this.stride>=Ue.length)throw new Error(Ee);const Fe=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),He=Pe.within(Ue[ie*this.stride],Ue[ie*this.stride+1],Fe),Je=[];for(const st of He){const Ke=st*this.stride;Ue[Ke+4]===Y&&Je.push(Ue[Ke+Rn]>1?On(Ue,Ke,this.clusterProps):this.points[Ue[Ke+jt]])}if(Je.length===0)throw new Error(Ee);return Je}getLeaves(Y,ie,ge){const Ee=[];return this._appendLeaves(Ee,Y,ie=ie||10,ge=ge||0,0),Ee}getTile(Y,ie,ge){const Ee=this.trees[this._limitZoom(Y)],Pe=Math.pow(2,Y),{extent:Ue,radius:Fe}=this.options,He=Fe/Ue,Je=(ge-He)/Pe,st=(ge+1+He)/Pe,Ke={features:[]};return this._addTileFeatures(Ee.range((ie-He)/Pe,Je,(ie+1+He)/Pe,st),Ee.data,ie,ge,Pe,Ke),ie===0&&this._addTileFeatures(Ee.range(1-He/Pe,Je,1,st),Ee.data,Pe,ge,Pe,Ke),ie===Pe-1&&this._addTileFeatures(Ee.range(0,Je,He/Pe,st),Ee.data,-1,ge,Pe,Ke),Ke.features.length?Ke:null}getClusterExpansionZoom(Y){let ie=this._getOriginZoom(Y)-1;for(;ie<=this.options.maxZoom;){const ge=this.getChildren(Y);if(ie++,ge.length!==1)break;Y=ge[0].properties.cluster_id}return ie}_appendLeaves(Y,ie,ge,Ee,Pe){const Ue=this.getChildren(ie);for(const Fe of Ue){const He=Fe.properties;if(He&&He.cluster?Pe+He.point_count<=Ee?Pe+=He.point_count:Pe=this._appendLeaves(Y,He.cluster_id,ge,Ee,Pe):Pe<Ee?Pe++:Y.push(Fe),Y.length===ge)break}return Pe}_createTree(Y){const ie=new r.bW(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<Y.length;ge+=this.stride)ie.add(Y[ge],Y[ge+1]);return ie.finish(),ie.data=Y,ie}_addTileFeatures(Y,ie,ge,Ee,Pe,Ue){for(const Fe of Y){const He=Fe*this.stride,Je=ie[He+Rn]>1;let st,Ke,At;if(Je)st=ai(ie,He,this.clusterProps),Ke=ie[He],At=ie[He+1];else{const kn=this.points[ie[He+jt]];st=kn.properties;const[Pn,Dn]=kn.geometry.coordinates;Ke=oi(Pn),At=Ln(Dn)}const qt={type:1,geometry:[[Math.round(this.options.extent*(Ke*Pe-ge)),Math.round(this.options.extent*(At*Pe-Ee))]],tags:st};let tn;tn=Je||this.options.generateId?ie[He+jt]:this.points[ie[He+jt]].id,tn!==void 0&&(qt.id=tn),Ue.features.push(qt)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,ie){const{radius:ge,extent:Ee,reduce:Pe,minPoints:Ue}=this.options,Fe=ge/(Ee*Math.pow(2,ie)),He=Y.data,Je=[],st=this.stride;for(let Ke=0;Ke<He.length;Ke+=st){if(He[Ke+2]<=ie)continue;He[Ke+2]=ie;const At=He[Ke],qt=He[Ke+1],tn=Y.within(He[Ke],He[Ke+1],Fe),kn=He[Ke+Rn];let Pn=kn;for(const Dn of tn){const di=Dn*st;He[di+2]>ie&&(Pn+=He[di+Rn])}if(Pn>kn&&Pn>=Ue){let Dn,di=At*kn,sr=qt*kn,ui=-1;const $i=(Ke/st<<5)+(ie+1)+this.points.length;for(const Di of tn){const ar=Di*st;if(He[ar+2]<=ie)continue;He[ar+2]=ie;const Er=He[ar+Rn];di+=He[ar]*Er,sr+=He[ar+1]*Er,He[ar+4]=$i,Pe&&(Dn||(Dn=this._map(He,Ke,!0),ui=this.clusterProps.length,this.clusterProps.push(Dn)),Pe(Dn,this._map(He,ar)))}He[Ke+4]=$i,Je.push(di/Pn,sr/Pn,1/0,$i,-1,Pn),Pe&&Je.push(ui)}else{for(let Dn=0;Dn<st;Dn++)Je.push(He[Ke+Dn]);if(Pn>1)for(const Dn of tn){const di=Dn*st;if(!(He[di+2]<=ie)){He[di+2]=ie;for(let sr=0;sr<st;sr++)Je.push(He[di+sr])}}}}return Je}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,ie,ge){if(Y[ie+Rn]>1){const Ue=this.clusterProps[Y[ie+Vn]];return ge?Object.assign({},Ue):Ue}const Ee=this.points[Y[ie+jt]].properties,Pe=this.options.map(Ee);return ge&&Pe===Ee?Object.assign({},Pe):Pe}}function On(Te,Y,ie){return{type:"Feature",id:Te[Y+jt],properties:ai(Te,Y,ie),geometry:{type:"Point",coordinates:[(ge=Te[Y],360*(ge-.5)),zn(Te[Y+1])]}};var ge}function ai(Te,Y,ie){const ge=Te[Y+Rn],Ee=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,Pe=Te[Y+Vn],Ue=Pe===-1?{}:Object.assign({},ie[Pe]);return Object.assign(Ue,{cluster:!0,cluster_id:Te[Y+jt],point_count:ge,point_count_abbreviated:Ee})}function oi(Te){return Te/360+.5}function Ln(Te){const Y=Math.sin(Te*Math.PI/180),ie=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ie<0?0:ie>1?1:ie}function zn(Te){const Y=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function hi(Te,Y,ie,ge){let Ee=ge;const Pe=Y+(ie-Y>>1);let Ue,Fe=ie-Y;const He=Te[Y],Je=Te[Y+1],st=Te[ie],Ke=Te[ie+1];for(let At=Y+3;At<ie;At+=3){const qt=fi(Te[At],Te[At+1],He,Je,st,Ke);if(qt>Ee)Ue=At,Ee=qt;else if(qt===Ee){const tn=Math.abs(At-Pe);tn<Fe&&(Ue=At,Fe=tn)}}Ee>ge&&(Ue-Y>3&&hi(Te,Y,Ue,ge),Te[Ue+2]=Ee,ie-Ue>3&&hi(Te,Ue,ie,ge))}function fi(Te,Y,ie,ge,Ee,Pe){let Ue=Ee-ie,Fe=Pe-ge;if(Ue!==0||Fe!==0){const He=((Te-ie)*Ue+(Y-ge)*Fe)/(Ue*Ue+Fe*Fe);He>1?(ie=Ee,ge=Pe):He>0&&(ie+=Ue*He,ge+=Fe*He)}return Ue=Te-ie,Fe=Y-ge,Ue*Ue+Fe*Fe}function ci(Te,Y,ie,ge){const Ee={id:Te??null,type:Y,geometry:ie,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Y==="Point"||Y==="MultiPoint"||Y==="LineString")Pi(Ee,ie);else if(Y==="Polygon")Pi(Ee,ie[0]);else if(Y==="MultiLineString")for(const Pe of ie)Pi(Ee,Pe);else if(Y==="MultiPolygon")for(const Pe of ie)Pi(Ee,Pe[0]);return Ee}function Pi(Te,Y){for(let ie=0;ie<Y.length;ie+=3)Te.minX=Math.min(Te.minX,Y[ie]),Te.minY=Math.min(Te.minY,Y[ie+1]),Te.maxX=Math.max(Te.maxX,Y[ie]),Te.maxY=Math.max(Te.maxY,Y[ie+1])}function ii(Te,Y,ie,ge){if(!Y.geometry)return;const Ee=Y.geometry.coordinates;if(Ee&&Ee.length===0)return;const Pe=Y.geometry.type,Ue=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let Fe=[],He=Y.id;if(ie.promoteId?He=Y.properties[ie.promoteId]:ie.generateId&&(He=ge||0),Pe==="Point")pi(Ee,Fe);else if(Pe==="MultiPoint")for(const Je of Ee)pi(Je,Fe);else if(Pe==="LineString")yi(Ee,Fe,Ue,!1);else if(Pe==="MultiLineString"){if(ie.lineMetrics){for(const Je of Ee)Fe=[],yi(Je,Fe,Ue,!1),Te.push(ci(He,"LineString",Fe,Y.properties));return}dt(Ee,Fe,Ue,!1)}else if(Pe==="Polygon")dt(Ee,Fe,Ue,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(const Je of Y.geometry.geometries)ii(Te,{id:He,geometry:Je,properties:Y.properties},ie,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Je of Ee){const st=[];dt(Je,st,Ue,!0),Fe.push(st)}}Te.push(ci(He,Pe,Fe,Y.properties))}function pi(Te,Y){Y.push(Cn(Te[0]),wn(Te[1]),0)}function yi(Te,Y,ie,ge){let Ee,Pe,Ue=0;for(let He=0;He<Te.length;He++){const Je=Cn(Te[He][0]),st=wn(Te[He][1]);Y.push(Je,st,0),He>0&&(Ue+=ge?(Ee*st-Je*Pe)/2:Math.sqrt(Math.pow(Je-Ee,2)+Math.pow(st-Pe,2))),Ee=Je,Pe=st}const Fe=Y.length-3;Y[2]=1,hi(Y,0,Fe,ie),Y[Fe+2]=1,Y.size=Math.abs(Ue),Y.start=0,Y.end=Y.size}function dt(Te,Y,ie,ge){for(let Ee=0;Ee<Te.length;Ee++){const Pe=[];yi(Te[Ee],Pe,ie,ge),Y.push(Pe)}}function Cn(Te){return Te/360+.5}function wn(Te){const Y=Math.sin(Te*Math.PI/180),ie=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ie<0?0:ie>1?1:ie}function In(Te,Y,ie,ge,Ee,Pe,Ue,Fe){if(ge/=Y,Pe>=(ie/=Y)&&Ue<ge)return Te;if(Ue<ie||Pe>=ge)return null;const He=[];for(const Je of Te){const st=Je.geometry;let Ke=Je.type;const At=Ee===0?Je.minX:Je.minY,qt=Ee===0?Je.maxX:Je.maxY;if(At>=ie&&qt<ge){He.push(Je);continue}if(qt<ie||At>=ge)continue;let tn=[];if(Ke==="Point"||Ke==="MultiPoint")qn(st,tn,ie,ge,Ee);else if(Ke==="LineString")Xn(st,tn,ie,ge,Ee,!1,Fe.lineMetrics);else if(Ke==="MultiLineString")Mi(st,tn,ie,ge,Ee,!1);else if(Ke==="Polygon")Mi(st,tn,ie,ge,Ee,!0);else if(Ke==="MultiPolygon")for(const kn of st){const Pn=[];Mi(kn,Pn,ie,ge,Ee,!0),Pn.length&&tn.push(Pn)}if(tn.length){if(Fe.lineMetrics&&Ke==="LineString"){for(const kn of tn)He.push(ci(Je.id,Ke,kn,Je.tags));continue}Ke!=="LineString"&&Ke!=="MultiLineString"||(tn.length===1?(Ke="LineString",tn=tn[0]):Ke="MultiLineString"),Ke!=="Point"&&Ke!=="MultiPoint"||(Ke=tn.length===3?"Point":"MultiPoint"),He.push(ci(Je.id,Ke,tn,Je.tags))}}return He.length?He:null}function qn(Te,Y,ie,ge,Ee){for(let Pe=0;Pe<Te.length;Pe+=3){const Ue=Te[Pe+Ee];Ue>=ie&&Ue<=ge&&pr(Y,Te[Pe],Te[Pe+1],Te[Pe+2])}}function Xn(Te,Y,ie,ge,Ee,Pe,Ue){let Fe=Ni(Te);const He=Ee===0?Nn:qr;let Je,st,Ke=Te.start;for(let Pn=0;Pn<Te.length-3;Pn+=3){const Dn=Te[Pn],di=Te[Pn+1],sr=Te[Pn+2],ui=Te[Pn+3],$i=Te[Pn+4],Di=Ee===0?Dn:di,ar=Ee===0?ui:$i;let Er=!1;Ue&&(Je=Math.sqrt(Math.pow(Dn-ui,2)+Math.pow(di-$i,2))),Di<ie?ar>ie&&(st=He(Fe,Dn,di,ui,$i,ie),Ue&&(Fe.start=Ke+Je*st)):Di>ge?ar<ge&&(st=He(Fe,Dn,di,ui,$i,ge),Ue&&(Fe.start=Ke+Je*st)):pr(Fe,Dn,di,sr),ar<ie&&Di>=ie&&(st=He(Fe,Dn,di,ui,$i,ie),Er=!0),ar>ge&&Di<=ge&&(st=He(Fe,Dn,di,ui,$i,ge),Er=!0),!Pe&&Er&&(Ue&&(Fe.end=Ke+Je*st),Y.push(Fe),Fe=Ni(Te)),Ue&&(Ke+=Je)}let At=Te.length-3;const qt=Te[At],tn=Te[At+1],kn=Ee===0?qt:tn;kn>=ie&&kn<=ge&&pr(Fe,qt,tn,Te[At+2]),At=Fe.length-3,Pe&&At>=3&&(Fe[At]!==Fe[0]||Fe[At+1]!==Fe[1])&&pr(Fe,Fe[0],Fe[1],Fe[2]),Fe.length&&Y.push(Fe)}function Ni(Te){const Y=[];return Y.size=Te.size,Y.start=Te.start,Y.end=Te.end,Y}function Mi(Te,Y,ie,ge,Ee,Pe){for(const Ue of Te)Xn(Ue,Y,ie,ge,Ee,Pe,!1)}function pr(Te,Y,ie,ge){Te.push(Y,ie,ge)}function Nn(Te,Y,ie,ge,Ee,Pe){const Ue=(Pe-Y)/(ge-Y);return pr(Te,Pe,ie+(Ee-ie)*Ue,1),Ue}function qr(Te,Y,ie,ge,Ee,Pe){const Ue=(Pe-ie)/(Ee-ie);return pr(Te,Y+(ge-Y)*Ue,Pe,1),Ue}function mr(Te,Y){const ie=[];for(let ge=0;ge<Te.length;ge++){const Ee=Te[ge],Pe=Ee.type;let Ue;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")Ue=Qi(Ee.geometry,Y);else if(Pe==="MultiLineString"||Pe==="Polygon"){Ue=[];for(const Fe of Ee.geometry)Ue.push(Qi(Fe,Y))}else if(Pe==="MultiPolygon"){Ue=[];for(const Fe of Ee.geometry){const He=[];for(const Je of Fe)He.push(Qi(Je,Y));Ue.push(He)}}ie.push(ci(Ee.id,Pe,Ue,Ee.tags))}return ie}function Qi(Te,Y){const ie=[];ie.size=Te.size,Te.start!==void 0&&(ie.start=Te.start,ie.end=Te.end);for(let ge=0;ge<Te.length;ge+=3)ie.push(Te[ge]+Y,Te[ge+1],Te[ge+2]);return ie}function li(Te,Y){if(Te.transformed)return Te;const ie=1<<Te.z,ge=Te.x,Ee=Te.y;for(const Pe of Te.features){const Ue=Pe.geometry,Fe=Pe.type;if(Pe.geometry=[],Fe===1)for(let He=0;He<Ue.length;He+=2)Pe.geometry.push(hr(Ue[He],Ue[He+1],Y,ie,ge,Ee));else for(let He=0;He<Ue.length;He++){const Je=[];for(let st=0;st<Ue[He].length;st+=2)Je.push(hr(Ue[He][st],Ue[He][st+1],Y,ie,ge,Ee));Pe.geometry.push(Je)}}return Te.transformed=!0,Te}function hr(Te,Y,ie,ge,Ee,Pe){return[Math.round(ie*(Te*ge-Ee)),Math.round(ie*(Y*ge-Pe))]}function Wr(Te,Y,ie,ge,Ee){const Pe=Y===Ee.maxZoom?0:Ee.tolerance/((1<<Y)*Ee.extent),Ue={features:[],numPoints:0,numSimplified:0,numFeatures:Te.length,source:null,x:ie,y:ge,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Fe of Te)Vi(Ue,Fe,Pe,Ee);return Ue}function Vi(Te,Y,ie,ge){const Ee=Y.geometry,Pe=Y.type,Ue=[];if(Te.minX=Math.min(Te.minX,Y.minX),Te.minY=Math.min(Te.minY,Y.minY),Te.maxX=Math.max(Te.maxX,Y.maxX),Te.maxY=Math.max(Te.maxY,Y.maxY),Pe==="Point"||Pe==="MultiPoint")for(let Fe=0;Fe<Ee.length;Fe+=3)Ue.push(Ee[Fe],Ee[Fe+1]),Te.numPoints++,Te.numSimplified++;else if(Pe==="LineString")ko(Ue,Ee,Te,ie,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(let Fe=0;Fe<Ee.length;Fe++)ko(Ue,Ee[Fe],Te,ie,Pe==="Polygon",Fe===0);else if(Pe==="MultiPolygon")for(let Fe=0;Fe<Ee.length;Fe++){const He=Ee[Fe];for(let Je=0;Je<He.length;Je++)ko(Ue,He[Je],Te,ie,!0,Je===0)}if(Ue.length){let Fe=Y.tags||null;if(Pe==="LineString"&&ge.lineMetrics){Fe={};for(const Je in Y.tags)Fe[Je]=Y.tags[Je];Fe.mapbox_clip_start=Ee.start/Ee.size,Fe.mapbox_clip_end=Ee.end/Ee.size}const He={geometry:Ue,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:Fe};Y.id!==null&&(He.id=Y.id),Te.features.push(He)}}function ko(Te,Y,ie,ge,Ee,Pe){const Ue=ge*ge;if(ge>0&&Y.size<(Ee?Ue:ge))return void(ie.numPoints+=Y.length/3);const Fe=[];for(let He=0;He<Y.length;He+=3)(ge===0||Y[He+2]>Ue)&&(ie.numSimplified++,Fe.push(Y[He],Y[He+1])),ie.numPoints++;Ee&&function(He,Je){let st=0;for(let Ke=0,At=He.length,qt=At-2;Ke<At;qt=Ke,Ke+=2)st+=(He[Ke]-He[qt])*(He[Ke+1]+He[qt+1]);if(st>0===Je)for(let Ke=0,At=He.length;Ke<At/2;Ke+=2){const qt=He[Ke],tn=He[Ke+1];He[Ke]=He[At-2-Ke],He[Ke+1]=He[At-1-Ke],He[At-2-Ke]=qt,He[At-1-Ke]=tn}}(Fe,Pe),Te.push(Fe)}const Ga={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ts{constructor(Y,ie){const ge=(ie=this.options=function(Pe,Ue){for(const Fe in Ue)Pe[Fe]=Ue[Fe];return Pe}(Object.create(Ga),ie)).debug;if(ge&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ee=function(Pe,Ue){const Fe=[];if(Pe.type==="FeatureCollection")for(let He=0;He<Pe.features.length;He++)ii(Fe,Pe.features[He],Ue,He);else ii(Fe,Pe.type==="Feature"?Pe:{geometry:Pe},Ue);return Fe}(Y,ie);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=function(Pe,Ue){const Fe=Ue.buffer/Ue.extent;let He=Pe;const Je=In(Pe,1,-1-Fe,Fe,0,-1,2,Ue),st=In(Pe,1,1-Fe,2+Fe,0,-1,2,Ue);return(Je||st)&&(He=In(Pe,1,-Fe,1+Fe,0,-1,2,Ue)||[],Je&&(He=mr(Je,1).concat(He)),st&&(He=He.concat(mr(st,-1)))),He}(Ee,ie),Ee.length&&this.splitTile(Ee,0,0,0),ge&&(Ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Y,ie,ge,Ee,Pe,Ue,Fe){const He=[Y,ie,ge,Ee],Je=this.options,st=Je.debug;for(;He.length;){Ee=He.pop(),ge=He.pop(),ie=He.pop(),Y=He.pop();const Ke=1<<ie,At=Ds(ie,ge,Ee);let qt=this.tiles[At];if(!qt&&(st>1&&console.time("creation"),qt=this.tiles[At]=Wr(Y,ie,ge,Ee,Je),this.tileCoords.push({z:ie,x:ge,y:Ee}),st)){st>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,ge,Ee,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const Er=`z${ie}`;this.stats[Er]=(this.stats[Er]||0)+1,this.total++}if(qt.source=Y,Pe==null){if(ie===Je.indexMaxZoom||qt.numPoints<=Je.indexMaxPoints)continue}else{if(ie===Je.maxZoom||ie===Pe)continue;if(Pe!=null){const Er=Pe-ie;if(ge!==Ue>>Er||Ee!==Fe>>Er)continue}}if(qt.source=null,Y.length===0)continue;st>1&&console.time("clipping");const tn=.5*Je.buffer/Je.extent,kn=.5-tn,Pn=.5+tn,Dn=1+tn;let di=null,sr=null,ui=null,$i=null,Di=In(Y,Ke,ge-tn,ge+Pn,0,qt.minX,qt.maxX,Je),ar=In(Y,Ke,ge+kn,ge+Dn,0,qt.minX,qt.maxX,Je);Y=null,Di&&(di=In(Di,Ke,Ee-tn,Ee+Pn,1,qt.minY,qt.maxY,Je),sr=In(Di,Ke,Ee+kn,Ee+Dn,1,qt.minY,qt.maxY,Je),Di=null),ar&&(ui=In(ar,Ke,Ee-tn,Ee+Pn,1,qt.minY,qt.maxY,Je),$i=In(ar,Ke,Ee+kn,Ee+Dn,1,qt.minY,qt.maxY,Je),ar=null),st>1&&console.timeEnd("clipping"),He.push(di||[],ie+1,2*ge,2*Ee),He.push(sr||[],ie+1,2*ge,2*Ee+1),He.push(ui||[],ie+1,2*ge+1,2*Ee),He.push($i||[],ie+1,2*ge+1,2*Ee+1)}}getTile(Y,ie,ge){Y=+Y,ie=+ie,ge=+ge;const Ee=this.options,{extent:Pe,debug:Ue}=Ee;if(Y<0||Y>24)return null;const Fe=1<<Y,He=Ds(Y,ie=ie+Fe&Fe-1,ge);if(this.tiles[He])return li(this.tiles[He],Pe);Ue>1&&console.log("drilling down to z%d-%d-%d",Y,ie,ge);let Je,st=Y,Ke=ie,At=ge;for(;!Je&&st>0;)st--,Ke>>=1,At>>=1,Je=this.tiles[Ds(st,Ke,At)];return Je&&Je.source?(Ue>1&&(console.log("found parent tile z%d-%d-%d",st,Ke,At),console.time("drilling down")),this.splitTile(Je.source,st,Ke,At,Y,ie,ge),Ue>1&&console.timeEnd("drilling down"),this.tiles[He]?li(this.tiles[He],Pe):null):null}}function Ds(Te,Y,ie){return 32*((1<<Te)*ie+Y)+Te}function Bl(Te,Y){const ie=Te.tileID.canonical;if(!this._geoJSONIndex)return void Y(null,null);const ge=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!ge)return void Y(null,null);const Ee=new pe(ge.features);let Pe=Bt(Ee);Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),Y(null,{vectorTile:Ee,rawData:Pe.buffer})}class ca extends K{constructor(Y,ie,ge,Ee,Pe,Ue,Fe){super(Y,ie,ge,Ee,Pe,Bl,Fe),Ue&&(this.loadGeoJSON=Ue),this._dynamicIndex=new qe}loadData(Y,ie){const ge=Y&&Y.request,Ee=ge&&ge.collectResourceTiming;this.loadGeoJSON(Y,(Pe,Ue)=>{if(Pe||!Ue)return ie(Pe);if(typeof Ue!="object")return ie(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{try{if(Y.filter){const He=r.X(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(He.result==="error")throw new Error(He.value.map(Je=>`${Je.key}: ${Je.message}`).join(", "));Ue.features=Ue.features.filter(Je=>He.value.evaluate({zoom:0},Je))}Y.dynamic?(Ue.type==="Feature"&&(Ue={type:"FeatureCollection",features:[Ue]}),Y.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ue.features,this.loaded),Y.cluster&&(Ue.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=Y.cluster?new Hn(function({superclusterOptions:He,clusterProperties:Je}){if(!Je||!He)return He;const st={},Ke={},At={accumulated:null,zoom:0},qt={properties:null},tn=Object.keys(Je);for(const kn of tn){const[Pn,Dn]=Je[kn],di=r.X(Dn),sr=r.X(typeof Pn=="string"?[Pn,["accumulated"],["get",kn]]:Pn);st[kn]=di.value,Ke[kn]=sr.value}return He.map=kn=>{qt.properties=kn;const Pn={};for(const Dn of tn)Pn[Dn]=st[Dn].evaluate(At,qt);return Pn},He.reduce=(kn,Pn)=>{qt.properties=Pn;for(const Dn of tn)At.accumulated=kn[Dn],kn[Dn]=Ke[Dn].evaluate(At,qt)},He}(Y)).load(Ue.features):Y.dynamic?this._dynamicIndex:function(He,Je){return new ts(He,Je)}(Ue,Y.geojsonVtOptions)}catch(He){return ie(He)}const Fe={};if(Ee){const He=S(ge);He&&(Fe.resourceTiming={},Fe.resourceTiming[Y.source]=JSON.parse(JSON.stringify(He)))}ie(null,Fe)}})}reloadTile(Y,ie){const ge=this.loaded;return ge&&ge[Y.uid]?Y.partial?ie(null,void 0):super.reloadTile(Y,ie):this.loadTile(Y,ie)}loadGeoJSON(Y,ie){if(Y.request)r.n(Y.request,ie);else{if(typeof Y.data!="string")return ie(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));try{return ie(null,JSON.parse(Y.data))}catch{return ie(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Y,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(ge){ie(ge)}}getClusterChildren(Y,ie){try{ie(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(ge){ie(ge)}}getClusterLeaves(Y,ie){try{ie(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(ge){ie(ge)}}}class Zt{constructor(Y,ie){this.tileID=new r.aM(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.tileZoom=Y.tileZoom,this.uid=Y.uid,this.zoom=Y.zoom,this.canonical=Y.tileID.canonical,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Y.projection,this.brightness=ie}parse(Y,ie,ge,Ee){this.status="parsing";const Pe=new r.aM(ge.tileID.overscaledZ,ge.tileID.wrap,ge.tileID.canonical.z,ge.tileID.canonical.x,ge.tileID.canonical.y),Ue=[],Fe=ie.familiesBySource[ge.source],He=new r.f0(Pe,ge.promoteId);He.bucketLayerIDs=[],He.is3DTile=!0,r.fi(Y).then(Je=>{if(!Je)return Ee(new Error("Could not parse tile"));const st=r.fj(Je,1/r.cT(ge.tileID.canonical)),Ke=Je.json.extensionsUsed&&Je.json.extensionsUsed.includes("MAPBOX_mesh_features")||Je.json.asset.extras&&Je.json.asset.extras.MAPBOX_mesh_features,At=Je.json.extensionsUsed&&Je.json.extensionsUsed.includes("EXT_meshopt_compression"),qt=new r.aa(this.zoom,{brightness:this.brightness});for(const tn in Fe)for(const kn of Fe[tn]){const Pn=kn[0];He.bucketLayerIDs.push(kn.map(di=>r.C(di.id,di.scope))),Pn.recalculate(qt,[]);const Dn=new r.fk(kn,st,Pe,Ke,At,this.brightness,He);Ke||(Dn.needsUpload=!0),Ue.push(Dn),Dn.evaluate(Pn)}this.status="done",Ee(null,{buckets:Ue,featureIndex:He,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Je=>Ee(new Error(Je.message)))}}class Os{constructor(Y,ie,ge,Ee,Pe,Ue,Fe){this.actor=Y,this.layerIndex=ie,this.availableImages=ge,this.availableModels=Ee,this.brightness=Fe,this.loading={},this.loaded={}}loadTile(Y,ie){const ge=Y.uid,Ee=this.loading[ge]=new Zt(Y,this.brightness);r.br(Y.request,(Pe,Ue)=>{const Fe=!this.loading[ge];return delete this.loading[ge],Fe||Pe?(Ee.status="done",Fe||(this.loaded[ge]=Ee),ie(Pe)):Ue&&Ue.byteLength!==0?void Ee.parse(Ue,this.layerIndex,Y,(He,Je)=>{Ee.status="done",this.loaded=this.loaded||{},this.loaded[ge]=Ee,He||!Je?ie(He):ie(null,Je)}):(Ee.status="done",this.loaded[ge]=Ee,ie())})}reloadTile(Y,ie){const ge=this.loaded,Ee=Y.uid;if(ge&&ge[Ee]){const Pe=ge[Ee];Pe.projection=Y.projection,Pe.brightness=Y.brightness;const Ue=(Fe,He)=>{Pe.reloadCallback&&(delete Pe.reloadCallback,this.loadTile(Y,ie)),ie(Fe,He)};Pe.status==="parsing"?Pe.reloadCallback=Ue:Pe.status==="done"&&this.loadTile(Y,ie)}}abortTile(Y,ie){const ge=Y.uid;this.loading[ge]&&delete this.loading[ge],ie()}removeTile(Y,ie){const ge=this.loaded,Ee=Y.uid;ge&&ge[Ee]&&delete ge[Ee],ie()}}class Gi{constructor(Y){this.self=Y,this.actor=new r.fm(Y,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new r.y,this.projections={},this.defaultProjection=r.ce({name:"mercator"}),this.workerSourceTypes={vector:K,geojson:ca,"raster-dem":W,"raster-array":ne,"batched-model":Os},this.workerSources={},this.self.registerWorkerSource=(ie,ge)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=ge},this.self.registerRTLTextPlugin=ie=>{if(r.fn.isParsed())throw new Error("RTL text plugin already registered.");r.fn.applyArabicShaping=ie.applyArabicShaping,r.fn.processBidirectionalText=ie.processBidirectionalText,r.fn.processStyledBidirectionalText=ie.processStyledBidirectionalText}}clearCaches(Y,ie,ge){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.availableModels[Y],delete this.workerSources[Y],ge()}checkIfReady(Y,ie,ge){ge()}setReferrer(Y,ie){this.referrer=ie}spriteLoaded(Y,ie){this.isSpriteLoaded[Y]||(this.isSpriteLoaded[Y]={});const{scope:ge,isLoaded:Ee}=ie;if(this.isSpriteLoaded[Y][ge]=Ee,this.workerSources[Y]&&this.workerSources[Y][ge])for(const Pe in this.workerSources[Y][ge]){const Ue=this.workerSources[Y][ge][Pe];for(const Fe in Ue){const He=Ue[Fe];He instanceof K&&(He.isSpriteLoaded=Ee,He.fire(new r.A("isSpriteLoaded")))}}}setImages(Y,ie,ge){this.availableImages[Y]||(this.availableImages[Y]={});const{scope:Ee,images:Pe}=ie;if(this.availableImages[Y][Ee]=Pe,this.workerSources[Y]&&this.workerSources[Y][Ee]){for(const Ue in this.workerSources[Y][Ee]){const Fe=this.workerSources[Y][Ee][Ue];for(const He in Fe)Fe[He].availableImages=Pe}ge()}else ge()}setModels(Y,{scope:ie,models:ge},Ee){if(this.availableModels[Y]||(this.availableModels[Y]={}),this.availableModels[Y][ie]=ge,this.workerSources[Y]&&this.workerSources[Y][ie]){for(const Pe in this.workerSources[Y][ie]){const Ue=this.workerSources[Y][ie][Pe];for(const Fe in Ue)Ue[Fe].availableModels=ge}Ee()}else Ee()}setProjection(Y,ie){this.projections[Y]=r.ce(ie)}setBrightness(Y,ie,ge){this.brightness=ie,ge()}setLayers(Y,ie,ge){this.getLayerIndex(Y,ie.scope).replace(ie.layers,ie.options),ge()}updateLayers(Y,ie,ge){this.getLayerIndex(Y,ie.scope).update(ie.layers,ie.removedIds,ie.options),ge()}loadTile(Y,ie,ge){ie.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,ie.type,ie.source,ie.scope).loadTile(ie,ge)}decodeRasterArray(Y,ie,ge){this.getWorkerSource(Y,ie.type,ie.source,ie.scope).decodeRasterArray(ie,ge)}reloadTile(Y,ie,ge){ie.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,ie.type,ie.source,ie.scope).reloadTile(ie,ge)}abortTile(Y,ie,ge){this.getWorkerSource(Y,ie.type,ie.source,ie.scope).abortTile(ie,ge)}removeTile(Y,ie,ge){this.getWorkerSource(Y,ie.type,ie.source,ie.scope).removeTile(ie,ge)}removeSource(Y,ie,ge){if(!(this.workerSources[Y]&&this.workerSources[Y][ie.scope]&&this.workerSources[Y][ie.scope][ie.type]&&this.workerSources[Y][ie.scope][ie.type][ie.source]))return;const Ee=this.workerSources[Y][ie.scope][ie.type][ie.source];delete this.workerSources[Y][ie.scope][ie.type][ie.source],Ee.removeSource!==void 0?Ee.removeSource(ie,ge):ge()}loadWorkerSource(Y,ie,ge){try{this.self.importScripts(ie.url),ge()}catch(Ee){ge(Ee.toString())}}syncRTLPluginState(Y,ie,ge){try{r.fn.setState(ie);const Ee=r.fn.getPluginURL();if(r.fn.isLoaded()&&!r.fn.isParsed()&&Ee!=null){this.self.importScripts(Ee);const Pe=r.fn.isParsed();ge(Pe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ee}`),Pe)}}catch(Ee){ge(Ee.toString())}}setDracoUrl(Y,ie){this.dracoUrl=ie}getAvailableImages(Y,ie){this.availableImages[Y]||(this.availableImages[Y]={});let ge=this.availableImages[Y][ie];return ge||(ge=[]),ge}getAvailableModels(Y,ie){this.availableModels[Y]||(this.availableModels[Y]={});let ge=this.availableModels[Y][ie];return ge||(ge={}),ge}getLayerIndex(Y,ie){this.layerIndexes[Y]||(this.layerIndexes[Y]={});let ge=this.layerIndexes[Y][ie];return ge||(ge=this.layerIndexes[Y][ie]=new O,ge.scope=ie),ge}getWorkerSource(Y,ie,ge,Ee){const Pe=this.workerSources;return Pe[Y]||(Pe[Y]={}),Pe[Y][Ee]||(Pe[Y][Ee]={}),Pe[Y][Ee][ie]||(Pe[Y][Ee][ie]={}),this.isSpriteLoaded[Y]||(this.isSpriteLoaded[Y]={}),Pe[Y][Ee][ie][ge]||(Pe[Y][Ee][ie][ge]=new this.workerSourceTypes[ie]({send:(Ue,Fe,He,Je,st,Ke)=>this.actor.send(Ue,Fe,He,Y,st,Ke),scheduler:this.actor.scheduler},this.getLayerIndex(Y,Ee),this.getAvailableImages(Y,Ee),this.getAvailableModels(Y,Ee),this.isSpriteLoaded[Y][Ee],void 0,this.brightness)),Pe[Y][Ee][ie][ge]}rasterizeImagesWorker(Y,ie,ge){const Ee=new Map;for(const[Pe,{image:Ue,imageVariant:Fe}]of ie.tasks.entries()){const He=this.imageRasterizer.rasterize(Fe,Ue,ie.scope,Y);Ee.set(Pe,He)}ge(void 0,Ee)}removeRasterizedImages(Y,ie,ge){this.imageRasterizer.removeImagesFromCacheByIds(ie.imageIds,ie.scope,Y),ge()}enforceCacheSizeLimit(Y,ie){r.fo(ie)}getWorkerPerformanceMetrics(Y,ie,ge){ge(void 0,void 0)}}return r.fl(self)&&(self.worker=new Gi(self)),Gi}),f(["./shared"],function(r){var S="3.12.0";const A={create:"create",load:"load",fullLoad:"fullLoad"},R={mark(m){performance.mark(m)},measure(m,o,c){performance.measure(m,o,c)}};function O(m){const o=m.name.split("?")[0];return r.a(o)&&o.includes("mapbox-gl.js")?"javascript":r.a(o)&&o.includes("mapbox-gl.css")?"css":r.b(o)?"fontRange":r.c(o)?"sprite":r.i(o)?"style":r.d(o)?"tilejson":"other"}var z,N={},U=function(){if(z)return N;function m(g){return!o(g)}function o(g){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,C,I=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(I);try{C=new Worker(L),w=!0}catch{w=!1}return C&&C.terminate(),URL.revokeObjectURL(L),w}()?function(){var w=document.createElement("canvas");w.width=w.height=1;var C=w.getContext("2d");if(!C)return!1;var I=C.getImageData(0,0,1,1);return I&&I.width===w.width}()?(c[b=g&&g.failIfMajorPerformanceCaveat]===void 0&&(c[b]=function(w){var C,I=function(L){var F=document.createElement("canvas"),V=Object.create(m.webGLContextAttributes);return V.failIfMajorPerformanceCaveat=L,F.getContext("webgl2",V)}(w);if(!I)return!1;try{C=I.createShader(I.VERTEX_SHADER)}catch{return!1}return!(!C||I.isContextLost())&&(I.shaderSource(C,"void main() {}"),I.compileShader(C),I.getShaderParameter(C,I.COMPILE_STATUS)===!0)}(b)),c[b]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var b}z=1,N.supported=m,N.notSupportedReason=o;var c={};return m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},N}();function H(m,o,c){const g=document.createElement(m);return o!=null&&(g.className=o),c&&c.appendChild(g),g}function K(m,o,c){const g=document.createElementNS("http://www.w3.org/2000/svg",m);for(const b of Object.keys(o))g.setAttributeNS(null,b,String(o[b]));return c&&c.appendChild(g),g}const W=typeof document<"u"?document.documentElement&&document.documentElement.style:null,re=W&&W.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ne;function se(){W&&re&&(ne=W[re],W[re]="none")}function ue(){W&&re&&(W[re]=ne)}function pe(m){m.preventDefault(),m.stopPropagation(),window.removeEventListener("click",pe,!0)}function Ce(){window.addEventListener("click",pe,!0),window.setTimeout(()=>{window.removeEventListener("click",pe,!0)},0)}function Le(m,o){const c=m.getBoundingClientRect();return Xe(m,c,o)}function qe(m,o){const c=m.getBoundingClientRect(),g=[];for(let b=0;b<o.length;b++)g.push(Xe(m,c,o[b]));return g}function ye(m){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&m.button===2&&m.ctrlKey?0:m.button}function Xe(m,o,c){const g=m.offsetWidth===o.width?1:m.offsetWidth/o.width;return new r.P((c.clientX-o.left)*g,(c.clientY-o.top)*g)}const ut="01",et="NO_ACCESS_TOKEN";class ot{constructor(o,c,g){this._transformRequestFn=o,this._customAccessToken=c,this._silenceAuthErrors=!!g,this._createSkuToken()}_createSkuToken(){const o=function(){let c="";for(let g=0;g<10;g++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ut,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}normalizeStyleURL(o,c){if(!r.f(o))return o;const g=$e(o);return g.params.push(`sdk=js-${S}`),g.path=`/styles/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||c)}normalizeGlyphsURL(o,c){if(!r.f(o))return o;const g=$e(o);return g.path=`/fonts/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||c)}normalizeModelURL(o,c){if(!r.f(o))return o;const g=$e(o);return g.path=`/models/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||c)}normalizeSourceURL(o,c,g,b){if(!r.f(o))return o;const w=$e(o);return w.path=`/v4/${w.authority}.json`,w.params.push("secure"),g&&w.params.push(`language=${g}`),b&&w.params.push(`worldview=${b}`),this._makeAPIURL(w,this._customAccessToken||c)}normalizeIconsetURL(o,c){const g=$e(o);return r.f(o)?(g.path=`/styles/v1${g.path}/iconset.pbf`,this._makeAPIURL(g,this._customAccessToken||c)):it(g)}normalizeSpriteURL(o,c,g,b){const w=$e(o);return r.f(o)?(w.path=`/styles/v1${w.path}/sprite${c}${g}`,this._makeAPIURL(w,this._customAccessToken||b)):(w.path+=`${c}${g}`,it(w))}normalizeTileURL(o,c,g){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!r.f(o))return o;const b=$e(o);b.path=b.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||g&&b.authority!=="raster"&&g===512?"@2x":""}${r.m.supported?".webp":"$1"}`),b.authority==="raster"?b.path=`/${r.e.RASTER_URL_PREFIX}${b.path}`:b.authority==="rasterarrays"?b.path=`/${r.e.RASTERARRAYS_URL_PREFIX}${b.path}`:b.authority==="3dtiles"?b.path=`/${r.e.TILES3D_URL_PREFIX}${b.path}`:(b.path=b.path.replace(/^.+\/v4\//,"/"),b.path=`/${r.e.TILE_URL_VERSION}${b.path}`);const w=this._customAccessToken||function(C){for(const I of C){const L=I.match(/^access_token=(.*)$/);if(L)return L[1]}return null}(b.params)||r.e.ACCESS_TOKEN;return r.e.REQUIRE_ACCESS_TOKEN&&w&&this._skuToken&&b.params.push(`sku=${this._skuToken}`),this._makeAPIURL(b,w)}canonicalizeTileURL(o,c){const g=$e(o);if(!g.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!g.path.match(/\.[\w]+$/))return o;let b="mapbox://";g.path.match(/^\/raster\/v1\//)?b+=`raster/${g.path.replace(`/${r.e.RASTER_URL_PREFIX}/`,"")}`:g.path.match(/^\/rasterarrays\/v1\//)?b+=`rasterarrays/${g.path.replace(`/${r.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:b+=`tiles/${g.path.replace(`/${r.e.TILE_URL_VERSION}/`,"")}`;let w=g.params;return c&&(w=w.filter(C=>!C.match(/^access_token=/))),w.length&&(b+=`?${w.join("&")}`),b}canonicalizeTileset(o,c){const g=!!c&&r.f(c),b=[];for(const w of o.tiles||[])r.h(w)?b.push(this.canonicalizeTileURL(w,g)):b.push(w);return b}_makeAPIURL(o,c){const g="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",b=$e(r.e.API_URL);if(o.protocol=b.protocol,o.authority=b.authority,o.protocol==="http"){const w=o.params.indexOf("secure");w>=0&&o.params.splice(w,1)}if(b.path!=="/"&&(o.path=`${b.path}${o.path}`),!r.e.REQUIRE_ACCESS_TOKEN)return it(o);if(c=c||r.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${g}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${g}`)}return o.params=o.params.filter(w=>w.indexOf("access_token")===-1),o.params.push(`access_token=${c||""}`),it(o)}}const mt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function $e(m){const o=m.match(mt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function it(m){const o=m.params.length?`?${m.params.join("&")}`:"";return`${m.protocol}://${m.authority}${m.path}${o}`}const Tt="mapbox.eventData";function xt(m){if(!m)return null;const o=m.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(r.j(o[1]))}catch{return null}}class je{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const c=xt(r.e.ACCESS_TOKEN);let g="";return g=c&&c.u?r.k(c.u):r.e.ACCESS_TOKEN||"",o?`${Tt}.${o}:${g}`:`${Tt}:${g}`}fetchEventData(){const o=r.s("localStorage"),c=this.getStorageKey(),g=this.getStorageKey("uuid");if(o)try{const b=localStorage.getItem(c);b&&(this.eventData=JSON.parse(b));const w=localStorage.getItem(g);w&&(this.anonId=w)}catch{r.w("Unable to read from LocalStorage")}}saveEventData(){const o=r.s("localStorage"),c=this.getStorageKey(),g=this.getStorageKey("uuid"),b=this.anonId;if(o&&b)try{localStorage.setItem(g,b),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{r.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,c,g,b){if(!r.e.EVENTS_URL)return;const w=$e(r.e.EVENTS_URL);w.params.push(`access_token=${b||r.e.ACCESS_TOKEN||""}`);const C={event:this.type,created:new Date(o).toISOString()},I=c?r.l(C,c):C,L={url:it(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([I])};this.pendingRequest=r.p(L,F=>{this.pendingRequest=null,g(F),this.saveEventData(),this.processRequests(b)})}queueRequest(o,c){this.queue.push(o),this.processRequests(c)}}const ht=new class extends je{constructor(m){super("appUserTurnstile"),this._customAccessToken=m}postTurnstileEvent(m,o){r.e.EVENTS_URL&&r.e.ACCESS_TOKEN&&Array.isArray(m)&&m.some(c=>r.f(c)||r.h(c))&&this.queueRequest(Date.now(),o)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=xt(r.e.ACCESS_TOKEN),c=o?o.u:r.e.ACCESS_TOKEN;let g=c!==this.eventData.tokenU;r.v(this.anonId)||(this.anonId=r.u(),g=!0);const b=this.queue.shift();if(this.eventData.lastSuccess){const w=new Date(this.eventData.lastSuccess),C=new Date(b),I=(b-this.eventData.lastSuccess)/864e5;g=g||I>=1||I<-1||w.getDate()!==C.getDate()}else g=!0;g?this.postEvent(b,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:ut,"enabled.telemetry":!1,userId:this.anonId},w=>{w||(this.eventData.lastSuccess=b,this.eventData.tokenU=c)},m):this.processRequests()}},Bt=ht.postTurnstileEvent.bind(ht),Ft=new class extends je{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(m,o,c,g){this.skuToken=o,this.errorCb=g,r.e.EVENTS_URL&&(c||r.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},c):this.errorCb(new Error(et)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),r.v(this.anonId)||(this.anonId=r.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:ut,skuToken:this.skuToken,userId:this.anonId},g=>{g?this.errorCb(g):o&&(this.success[o]=!0)},m))}remove(){this.errorCb=null}},on=Ft.postMapLoadEvent.bind(Ft),en=new class extends je{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(m){let o=this.mapInstanceIdMap.get(m);return o||(o=r.u(),this.mapInstanceIdMap.set(m,o)),o}getEventId(m){const o=this.eventIdPerMapInstanceMap.get(m)||0;return this.eventIdPerMapInstanceMap.set(m,o+1),o}postStyleLoadEvent(m,o){const{map:c,style:g,importedStyles:b}=o;if(!r.e.EVENTS_URL||!m&&!r.e.ACCESS_TOKEN)return;const w=this.getMapInstanceId(c),C={mapInstanceId:w,eventId:this.getEventId(w),style:g};b.length&&(C.importedStyles=b),this.queueRequest({timestamp:Date.now(),payload:C},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:c}=this.queue.shift();this.postEvent(o,c,()=>{},m)}},jt=en.postStyleLoadEvent.bind(en),Rn=new class extends je{constructor(){super("gljs.performance")}postPerformanceEvent(m,o){r.e.EVENTS_URL&&(m||r.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:c}=this.queue.shift(),g=function(b){const w=performance.getEntriesByType("resource"),C=performance.getEntriesByType("mark"),I=function(J){const he={};if(J){for(const le in J)if(le!=="other")for(const fe of J[le]){const ce=`${le}ResolveRangeMin`,ve=`${le}ResolveRangeMax`,Ae=`${le}RequestCount`,De=`${le}RequestCachedCount`;he[ce]=Math.min(he[ce]||1/0,fe.startTime),he[ve]=Math.max(he[ve]||-1/0,fe.responseEnd);const Ne=ze=>{he[ze]===void 0&&(he[ze]=0),++he[ze]};fe.transferSize!==void 0&&fe.transferSize===0&&Ne(De),Ne(Ae)}}return he}(function(J,he){const le={};if(J)for(const fe of J){const ce=he(fe);le[ce]===void 0&&(le[ce]=[]),le[ce].push(fe)}return le}(w,O)),L=window.devicePixelRatio,F=navigator.connection||navigator.mozConnection||navigator.webkitConnection,V=F?F.effectiveType:void 0,q={counters:[],metadata:[],attributes:[]},G=(J,he,le)=>{le!=null&&J.push({name:he,value:le.toString()})};for(const J in I)G(q.counters,J,I[J]);if(b.interactionRange[0]!==1/0&&b.interactionRange[1]!==-1/0&&(G(q.counters,"interactionRangeMin",b.interactionRange[0]),G(q.counters,"interactionRangeMax",b.interactionRange[1])),C)for(const J of Object.keys(A)){const he=A[J],le=C.find(fe=>fe.name===he);le&&G(q.counters,he,le.startTime)}return G(q.counters,"visibilityHidden",b.visibilityHidden),G(q.attributes,"style",function(J){if(J)for(const he of J){const le=he.name.split("?")[0];if(r.i(le)){const fe=le.split("/").slice(-2);if(fe.length===2)return`mapbox://styles/${fe[0]}/${fe[1]}`}}}(w)),G(q.attributes,"terrainEnabled",b.terrainEnabled?"true":"false"),G(q.attributes,"fogEnabled",b.fogEnabled?"true":"false"),G(q.attributes,"projection",b.projection),G(q.attributes,"zoom",b.zoom),G(q.metadata,"devicePixelRatio",L),G(q.metadata,"connectionEffectiveType",V),G(q.metadata,"navigatorUserAgent",navigator.userAgent),G(q.metadata,"screenWidth",window.screen.width),G(q.metadata,"screenHeight",window.screen.height),G(q.metadata,"windowWidth",window.innerWidth),G(q.metadata,"windowHeight",window.innerHeight),G(q.metadata,"mapWidth",b.width/L),G(q.metadata,"mapHeight",b.height/L),G(q.metadata,"webglRenderer",b.renderer),G(q.metadata,"webglVendor",b.vendor),G(q.metadata,"sdkVersion",S),G(q.metadata,"sdkIdentifier","mapbox-gl-js"),q}(c);for(const b of g.metadata);for(const b of g.counters);for(const b of g.attributes);this.postEvent(o,g,()=>{},m)}},Vn=Rn.postPerformanceEvent.bind(Rn),Hn=new class extends je{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(m,o,c,g){if(!r.e.API_URL||!r.e.SESSION_PATH)return;const b=$e(r.e.API_URL+r.e.SESSION_PATH);b.params.push(`sku=${o||""}`),b.params.push(`access_token=${g||r.e.ACCESS_TOKEN||""}`);const w={url:it(b),headers:{"Content-Type":"text/plain"}};this.pendingRequest=r.g(w,C=>{this.pendingRequest=null,c(C),this.saveEventData(),this.processRequests(g)})}getSessionAPI(m,o,c,g){this.skuToken=o,this.errorCb=g,r.e.SESSION_PATH&&r.e.API_URL&&(c||r.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},c):this.errorCb(new Error(et)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||this.getSession(c,this.skuToken,g=>{g?this.errorCb(g):o&&(this.success[o]=!0)},m)}remove(){this.errorCb=null}},On=Hn.getSessionAPI.bind(Hn),ai=new Set;function oi(m,o){o?ai.add(m):ai.delete(m)}class Ln{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,c){this._updatedSourceCaches[o]=c,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const c=o.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(o.id),this.setDirty()}removeLayer(o){const c=o.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][o.id]=o,this._updatedLayers[c].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const c in this._updatedLayers)o[c]=o[c]||{},o[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)o[c]=o[c]||{},o[c].removedIds=Object.keys(this._removedLayers[c]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(o){return this._updatedImages[o]?Array.from(this._updatedImages[o].values()):[]}updateImage(o,c){this._updatedImages[c]=this._updatedImages[c]||new Set,this._updatedImages[c].add(r.I.toString(o)),this.setDirty()}resetUpdatedImages(o){this._updatedImages[o]&&this._updatedImages[o].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function zn(m){const{userImage:o}=m;return!!(o&&o.render&&o.render())&&(m.data.replace(new Uint8Array(o.data.buffer)),!0)}class hi extends r.E{constructor(o){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=o,o!=="raster"&&r.t()&&(this.imageRasterizerDispatcher=new r.D(r.x(),this,"Image Rasterizer Worker",1))}addScope(o){this.loaded.set(o,!1),this.imageProviders.set(o,new Map),this.images.set(o,new Map),this.updatedImages.set(o,new Set),this.callbackDispatchedThisFrame.set(o,new Set),this.patterns.set(o,new Map),this.atlasImage.set(o,new r.r({width:1,height:1}))}removeScope(o){this.loaded.delete(o),this.imageProviders.delete(o),this.images.delete(o),this.updatedImages.delete(o),this.callbackDispatchedThisFrame.delete(o),this.patterns.delete(o),this.atlasImage.delete(o);const c=this.atlasTexture.get(o);c&&(c.destroy(),this.atlasTexture.delete(o))}addImageProvider(o,c){this.imageProviders.has(c)||this.imageProviders.set(c,new Map),this.imageProviders.get(c).set(o.id,o)}removeImageProvider(o,c){this.imageProviders.has(c)&&this.imageProviders.get(c).delete(o)}getPendingImageProviders(){const o=[];for(const c of this.imageProviders.values())for(const g of c.values())g.hasPendingRequests()&&o.push(g);return o}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new r.y),this._imageRasterizer}isLoaded(){for(const o of this.loaded.keys())if(!this.loaded.get(o))return!1;return!0}setLoaded(o,c){if(this.loaded.get(c)!==o&&(this.loaded.set(c,o),o)){for(const{ids:g,callback:b}of this.requestors)this._notify(g,c,b);this.requestors=[]}}hasImage(o,c){return!!this.getImage(o,c)}getImage(o,c){return this.images.get(c).get(o.toString())}addImage(o,c,g){this._validate(o,g)&&this.images.get(c).set(o.toString(),g)}_validate(o,c){let g=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new r.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),g=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new r.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),g=!1),this._validateContent(c.content,c)||(this.fire(new r.z(new Error(`Image "${o.name}" has invalid "content" value`))),g=!1),g}_validateStretch(o,c){if(!o)return!0;let g=0;for(const b of o){if(b[0]<g||b[1]<b[0]||c<b[1])return!1;g=b[1]}return!0}_validateContent(o,c){return o?o.length!==4||!c.usvg&&(o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,c,g){const b=this.images.get(c).get(o.toString());g.version=b.version+1,this.images.get(c).set(o.toString(),g),this.updatedImages.get(c).add(o),this.removeFromImageRasterizerCache(o,c)}clearUpdatedImages(o){this.updatedImages.get(o).clear()}removeFromImageRasterizerCache(o,c){this.spriteFormat!=="raster"&&(r.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[o],scope:c}):this.imageRasterizer.removeImagesFromCacheByIds([o],c))}removeImage(o,c){const g=this.images.get(c),b=g.get(o.toString());g.delete(o.toString()),this.patterns.get(c).delete(o.toString()),this.removeFromImageRasterizerCache(o,c),b.userImage&&b.userImage.onRemove&&b.userImage.onRemove()}listImages(o){return Array.from(this.images.get(o).keys()).map(c=>r.I.from(c))}getImages(o,c,g){const b=[],w=[],C=this.imageProviders.get(c);for(const V of o){if(!V.iconsetId){b.push(V);continue}const q=C.get(V.iconsetId);q&&(this.getImage(V,c)?w.push(V):q.addPendingRequest(V))}if(b.length===0)return void this._notify(w,c,g);let I=!0;const L=!!this.loaded.get(c),F=this.images.get(c);if(!L)for(const V of b)F.has(V.toString())||(I=!1);L||I?this._notify(b,c,g):this.requestors.push({ids:b,scope:c,callback:g})}rasterizeImages(o,c){const g=new Map,{tasks:b,scope:w}=o;for(const[C,I]of b.entries()){const L=this.getImage(I.id,w);L&&g.set(C,{image:L,imageVariant:I})}this._rasterizeImages(w,g,c)}_rasterizeImages(o,c,g){if(r.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:c,scope:o},g);else{const b=new Map;for(const[w,{image:C,imageVariant:I}]of c.entries())b.set(w,this.imageRasterizer.rasterize(I,C,o,0));g(void 0,b)}}getUpdatedImages(o){return this.updatedImages.get(o)||new Set}_notify(o,c,g){const b=this.images.get(c),w=new Map;for(const C of o){if(!b.get(C.toString())){if(C.iconsetId)continue;this.fire(new r.A("styleimagemissing",{id:C.name}))}const I=b.get(C.toString());if(!I){r.w(`Image "${C.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const L={data:I.usvg?null:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,usvg:I.usvg,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:!!(I.userImage&&I.userImage.render)};I.usvg&&Object.assign(L,{width:I.icon.usvg_tree.width,height:I.icon.usvg_tree.height}),w.set(r.I.toString(C),L)}g(null,w)}getPixelSize(o){const{width:c,height:g}=this.atlasImage.get(o);return{width:c,height:g}}getPattern(o,c,g){const b=o.toString(),w=this.patterns.get(c),C=w.get(b),I=this.getImage(o,c);if(!I)return null;if(C){if(C.position.version===I.version)return C.position;C.position.version=I.version}else{if(I.usvg&&!I.data){const L=this.getPatternInFlightId(b,c);if(this.patternsInFlight.has(L))return null;this.patternsInFlight.add(L);const F=new r.B(o).scaleSelf(r.q.devicePixelRatio),V=new Map([[F.toString(),{image:I,imageVariant:F}]]);return this._rasterizeImages(c,V,(q,G)=>this.storePatternImage(F,c,I,g,G)),null}this.storePattern(o,c,I)}return this._updatePatternAtlas(c,g),w.get(b).position}getPatternInFlightId(o,c){return r.C(o,c)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,c,g,b,w){const C=o.toString(),I=w?w.get(C):void 0;I&&(g.data=I,this.storePattern(o.id,c,g),this._updatePatternAtlas(c,b),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),c)))}storePattern(o,c,g){const b={w:g.data.width+2*r.F,h:g.data.height+2*r.F,x:0,y:0},w=new r.G(b,g,r.F);this.patterns.get(c).set(o.toString(),{bin:b,position:w})}bind(o,c){const g=o.gl;let b=this.atlasTexture.get(c);b?this.dirty&&(b.update(this.atlasImage.get(c)),this.dirty=!1):(b=new r.T(o,this.atlasImage.get(c),g.RGBA8),this.atlasTexture.set(c,b)),b.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(o,c){const g=this.patterns.get(o),b=Array.from(g.values()).map(({bin:F})=>F),{w,h:C}=r.H(b),I=this.atlasImage.get(o);I.resize({width:w||1,height:C||1});const L=this.images.get(o);for(const[F,{bin:V,position:q}]of g.entries()){let G=q.padding;const J=V.x+G,he=V.y+G,le=L.get(F).data,fe=le.width,ce=le.height;G=G>1?G-1:G,r.r.copy(le,I,{x:0,y:0},{x:J,y:he},{width:fe,height:ce},c),r.r.copy(le,I,{x:0,y:ce-G},{x:J,y:he-G},{width:fe,height:G},c),r.r.copy(le,I,{x:0,y:0},{x:J,y:he+ce},{width:fe,height:G},c),r.r.copy(le,I,{x:fe-G,y:0},{x:J-G,y:he},{width:G,height:ce},c),r.r.copy(le,I,{x:0,y:0},{x:J+fe,y:he},{width:G,height:ce},c),r.r.copy(le,I,{x:fe-G,y:ce-G},{x:J-G,y:he-G},{width:G,height:G},c),r.r.copy(le,I,{x:0,y:ce-G},{x:J+fe,y:he-G},{width:G,height:G},c),r.r.copy(le,I,{x:0,y:0},{x:J+fe,y:he+ce},{width:G,height:G},c),r.r.copy(le,I,{x:fe-G,y:0},{x:J-G,y:he+ce},{width:G,height:G},c)}this.dirty=!0}beginFrame(){for(const o of this.images.keys())this.callbackDispatchedThisFrame.set(o,new Set)}dispatchRenderCallbacks(o,c){const g=this.images.get(c);for(const b of o){if(this.callbackDispatchedThisFrame.get(c).has(b.toString()))continue;this.callbackDispatchedThisFrame.get(c).add(b.toString());const w=g.get(b.toString());zn(w)&&this.updateImage(b,c,w)}}}function fi(m){const o=m.key,c=m.value,g=m.valueSpec||{},b=m.objectElementValidators||{},w=m.style,C=m.styleSpec;let I=[];const L=r.K(c);if(L!=="object")return[new r.V(o,c,`object expected, ${L} found`)];for(const F in c){const V=F.split(".")[0];let q;b[V]?q=b[V]:g[V]?q=Vi:b["*"]?q=b["*"]:g["*"]&&(q=Vi),q?I=I.concat(q({key:(o&&`${o}.`)+F,value:c[F],valueSpec:g[V]||g["*"],style:w,styleSpec:C,object:c,objectKey:F},c)):I.push(new r.J(o,c[F],`unknown property "${F}"`))}for(const F in g)b[F]||g[F].required&&g[F].default===void 0&&c[F]===void 0&&I.push(new r.V(o,c,`missing required property "${F}"`));return I}function ci(m){const o=m.value,c=m.valueSpec,g=m.style,b=m.styleSpec,w=m.key,C=m.arrayElementValidator||Vi;if(r.K(o)!=="array")return[new r.V(w,o,`array expected, ${r.K(o)} found`)];if(c.length&&o.length!==c.length)return[new r.V(w,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new r.V(w,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let I={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};b.$version<7&&(I.function=c.function),r.K(c.value)==="object"&&(I=c.value);let L=[];for(let F=0;F<o.length;F++)L=L.concat(C({array:o,arrayIndex:F,value:o[F],valueSpec:I,style:g,styleSpec:b,key:`${w}[${F}]`},!0));return L}function Pi(m){const o=m.key,c=m.value,g=m.valueSpec;let b=r.K(c);if(b==="number"&&c!=c&&(b="NaN"),b!=="number")return[new r.V(o,c,`number expected, ${b} found`)];if("minimum"in g){let w=g.minimum;if(r.K(g.minimum)==="array"&&(w=g.minimum[m.arrayIndex]),c<w)return[new r.V(o,c,`${c} is less than the minimum value ${w}`)]}if("maximum"in g){let w=g.maximum;if(r.K(g.maximum)==="array"&&(w=g.maximum[m.arrayIndex]),c>w)return[new r.V(o,c,`${c} is greater than the maximum value ${w}`)]}return[]}function ii(m){const o=m.valueSpec,c=r.M(m.value.type);let g,b,w,C={};const I=c!=="categorical"&&m.value.property===void 0,L=!I,F=r.K(m.value.stops)==="array"&&r.K(m.value.stops[0])==="array"&&r.K(m.value.stops[0][0])==="object",V=fi({key:m.key,value:m.value,valueSpec:m.styleSpec.function,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:function(J){if(c==="identity")return[new r.V(J.key,J.value,'identity function may not have a "stops" property')];let he=[];const le=J.value;return he=he.concat(ci({key:J.key,value:le,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:q})),r.K(le)==="array"&&le.length===0&&he.push(new r.V(J.key,le,"array must have at least one stop")),he},default:function(J){return Vi({key:J.key,value:J.value,valueSpec:o,style:J.style,styleSpec:J.styleSpec})}}});return c==="identity"&&I&&V.push(new r.V(m.key,m.value,'missing required property "property"')),c==="identity"||m.value.stops||V.push(new r.V(m.key,m.value,'missing required property "stops"')),c==="exponential"&&m.valueSpec.expression&&!r.N(m.valueSpec)&&V.push(new r.V(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(L&&!r.O(m.valueSpec)?V.push(new r.V(m.key,m.value,"property functions not supported")):I&&!r.Q(m.valueSpec)&&V.push(new r.V(m.key,m.value,"zoom functions not supported"))),c!=="categorical"&&!F||m.value.property!==void 0||V.push(new r.V(m.key,m.value,'"property" property is required')),V;function q(J){let he=[];const le=J.value,fe=J.key;if(r.K(le)!=="array")return[new r.V(fe,le,`array expected, ${r.K(le)} found`)];if(le.length!==2)return[new r.V(fe,le,`array length 2 expected, length ${le.length} found`)];if(F){if(r.K(le[0])!=="object")return[new r.V(fe,le,`object expected, ${r.K(le[0])} found`)];if(le[0].zoom===void 0)return[new r.V(fe,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new r.V(fe,le,"object stop key must have value")];const ce=r.M(le[0].zoom);if(typeof ce!="number")return[new r.V(fe,le[0].zoom,"stop zoom values must be numbers")];if(w&&w>ce)return[new r.V(fe,le[0].zoom,"stop zoom values must appear in ascending order")];ce!==w&&(w=ce,b=void 0,C={}),he=he.concat(fi({key:`${fe}[0]`,value:le[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Pi,value:G}}))}else he=he.concat(G({key:`${fe}[0]`,value:le[0],style:J.style,styleSpec:J.styleSpec},le));return r.S(r.U(le[1]))?he.concat([new r.V(`${fe}[1]`,le[1],"expressions are not allowed in function stops.")]):he.concat(Vi({key:`${fe}[1]`,value:le[1],valueSpec:o,style:J.style,styleSpec:J.styleSpec}))}function G(J,he){const le=r.K(J.value),fe=r.M(J.value),ce=J.value!==null?J.value:he;if(g){if(le!==g)return[new r.V(J.key,ce,`${le} stop domain type must match previous stop domain type ${g}`)]}else g=le;if(le!=="number"&&le!=="string"&&le!=="boolean"&&typeof fe!="number"&&typeof fe!="string"&&typeof fe!="boolean")return[new r.V(J.key,ce,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&c!=="categorical"){let ve=`number expected, ${le} found`;return r.O(o)&&c===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r.V(J.key,ce,ve)]}return c!=="categorical"||le!=="number"||typeof fe=="number"&&isFinite(fe)&&Math.floor(fe)===fe?c!=="categorical"&&le==="number"&&typeof fe=="number"&&typeof b=="number"&&b!==void 0&&fe<b?[new r.V(J.key,ce,"stop domain values must appear in ascending order")]:(b=fe,c==="categorical"&&fe in C?[new r.V(J.key,ce,"stop domain values must be unique")]:(C[fe]=!0,[])):[new r.V(J.key,ce,`integer expected, found ${String(fe)}`)]}}function pi(m){const o=(m.expressionContext==="property"?r.W:r.X)(r.U(m.value),m.valueSpec);if(o.result==="error")return o.value.map(g=>new r.V(`${m.key}${g.key}`,m.value,g.message));const c=o.value.expression||o.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!c.outputDefined())return[new r.V(m.key,m.value,`Invalid data expression for "${m.propertyKey}". Output values must be contained as literals within the expression.`)];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!r.Y(c))return[new r.V(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter")return yi(c,m);if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!r.Z(c,["zoom","feature-state"]))return[new r.V(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!r._(c))return[new r.V(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yi(m,o){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const b of o.valueSpec.expression.parameters)c.delete(b);if(c.size===0)return[];const g=[];return m instanceof r.$&&c.has(m.name)?[new r.V(o.key,o.value,`["${m.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(m.eachChild(b=>{g.push(...yi(b,o))}),g)}function dt(m){const o=m.key,c=m.value,g=m.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(r.M(c))===-1&&b.push(new r.V(o,c,`expected one of [${g.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(g.values).indexOf(r.M(c))===-1&&b.push(new r.V(o,c,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(c)} found`)),b}function Cn(m){return r.a1(r.U(m.value))?pi(r.L({},m,{expressionContext:"filter",valueSpec:m.styleSpec[`filter_${m.layerType||"fill"}`]})):wn(m)}function wn(m){const o=m.value,c=m.key;if(r.K(o)!=="array")return[new r.V(c,o,`array expected, ${r.K(o)} found`)];const g=m.styleSpec;let b,w=[];if(o.length<1)return[new r.V(c,o,"filter array must have at least 1 element")];switch(w=w.concat(dt({key:`${c}[0]`,value:o[0],valueSpec:g.filter_operator,style:m.style,styleSpec:m.styleSpec})),r.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&r.M(o[1])==="$type"&&w.push(new r.V(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&w.push(new r.V(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(b=r.K(o[1]),b!=="string"&&w.push(new r.V(`${c}[1]`,o[1],`string expected, ${b} found`)));for(let C=2;C<o.length;C++)b=r.K(o[C]),r.M(o[1])==="$type"?w=w.concat(dt({key:`${c}[${C}]`,value:o[C],valueSpec:g.geometry_type,style:m.style,styleSpec:m.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&w.push(new r.V(`${c}[${C}]`,o[C],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let C=1;C<o.length;C++)w=w.concat(wn({key:`${c}[${C}]`,value:o[C],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":b=r.K(o[1]),o.length!==2?w.push(new r.V(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):b!=="string"&&w.push(new r.V(`${c}[1]`,o[1],`string expected, ${b} found`))}return w}function In(m,o){const c=m.key,g=m.style,b=m.layer,w=m.styleSpec,C=m.value,I=m.objectKey,L=w[`${o}_${m.layerType}`];if(!L)return[];const F=I.match(/^(.*)-use-theme$/);if(o==="paint"&&F&&L[F[1]])return r.S(C)?[].concat(Vi({key:m.key,value:C,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:g,styleSpec:w,expressionContext:"property",propertyType:o,propertyKey:I})):Vi({key:c,value:C,valueSpec:{type:"string"},style:g,styleSpec:w});const V=I.match(/^(.*)-transition$/);if(o==="paint"&&V&&L[V[1]]&&L[V[1]].transition)return Vi({key:c,value:C,valueSpec:w.transition,style:g,styleSpec:w});const q=m.valueSpec||L[I];if(!q)return[new r.J(c,C,`unknown property "${I}"`)];let G;if(r.K(C)==="string"&&r.O(q)&&!q.tokens&&(G=/^{([^}]+)}$/.exec(C))){const he=`\`{ "type": "identity", "property": ${G?JSON.stringify(G[1]):'"_"'} }\``;return[new r.V(c,C,`"${I}" does not support interpolation syntax
Use an identity property function instead: ${he}.`)]}const J=[];if(m.layerType==="symbol")I!=="text-field"||!g||g.glyphs||g.imports||J.push(new r.V(c,C,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&r.a2(r.U(C))&&r.M(C.type)==="identity"&&J.push(new r.V(c,C,'"text-font" does not support identity functions'));else if(m.layerType==="model"&&o==="paint"&&b&&b.layout&&b.layout.hasOwnProperty("model-id")&&r.O(q)&&(r.a3(q)||r.Q(q))){const he=r.W(r.U(C),q),le=he.value.expression||he.value._styleExpression.expression;le&&!r.Z(le,["measure-light"])&&(I==="model-emissive-strength"&&r._(le)&&r.Y(le)||J.push(new r.V(c,C,`${I} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return J.concat(Vi({key:m.key,value:C,valueSpec:q,style:g,styleSpec:w,expressionContext:"property",propertyType:o,propertyKey:I}))}function qn(m){return In(m,"paint")}function Xn(m){return In(m,"layout")}function Ni(m){let o=[];const c=m.value,g=m.key,b=m.style,w=m.styleSpec;c.type||c.ref||o.push(new r.V(g,c,'either "type" or "ref" is required'));let C=r.M(c.type);const I=r.M(c.ref);if(c.id){const L=r.M(c.id);for(let F=0;F<m.arrayIndex;F++){const V=b.layers[F];r.M(V.id)===L&&o.push(new r.V(g,c.id,`duplicate layer id "${c.id}", previously used at line ${V.id.__line__}`))}}if("ref"in c){let L;["type","source","source-layer","filter","layout"].forEach(F=>{F in c&&o.push(new r.V(g,c[F],`"${F}" is prohibited for ref layers`))}),b.layers.forEach(F=>{r.M(F.id)===I&&(L=F)}),L?L.ref?o.push(new r.V(g,c.ref,"ref cannot reference another ref layer")):C=r.M(L.type):typeof I=="string"&&o.push(new r.V(g,c.ref,`ref layer "${I}" not found`))}else if(C!=="background"&&C!=="sky"&&C!=="slot")if(c.source){const L=b.sources&&b.sources[c.source],F=L&&r.M(L.type);L?F==="vector"&&C==="raster"?o.push(new r.V(g,c.source,`layer "${c.id}" requires a raster source`)):F==="raster"&&C!=="raster"?o.push(new r.V(g,c.source,`layer "${c.id}" requires a vector source`)):F!=="vector"||c["source-layer"]?F==="raster-dem"&&C!=="hillshade"?o.push(new r.V(g,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="raster-array"||["raster","raster-particle"].includes(C)?C==="line"&&c.paint&&(c.paint["line-gradient"]||c.paint["line-trim-offset"])&&F==="geojson"&&!L.lineMetrics?o.push(new r.V(g,c,`layer "${c.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):C==="raster-particle"&&F!=="raster-array"&&o.push(new r.V(g,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):o.push(new r.V(g,c.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new r.V(g,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new r.V(g,c.source,`source "${c.source}" not found`))}else o.push(new r.V(g,c,'missing required property "source"'));return o=o.concat(fi({key:g,value:c,valueSpec:w.layer,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vi({key:`${g}.type`,value:c.type,valueSpec:w.layer.type,style:m.style,styleSpec:m.styleSpec,object:c,objectKey:"type"}),filter:L=>Cn(r.L({layerType:C},L)),layout:L=>fi({layer:c,key:L.key,value:L.value,valueSpec:{},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":F=>Xn(r.L({layerType:C},F))}}),paint:L=>fi({layer:c,key:L.key,value:L.value,valueSpec:{},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":F=>qn(r.L({layerType:C,layer:c},F))}})}})),o}function Mi(m){const o=m.value,c=m.key,g=r.K(o);return g!=="string"?[new r.V(c,o,`string expected, ${g} found`)]:[]}const pr={promoteId:function m({key:o,value:c}){if(r.K(c)==="string")return Mi({key:o,value:c});if(Array.isArray(c)){const g=[],b=r.U(c),w=r.X(b);return w.result==="error"&&w.value.forEach(C=>{g.push(new r.V(`${o}${C.key}`,null,`${C.message}`))}),r.Z(w.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||g.push(new r.V(`${o}`,null,"promoteId expression should be only feature dependent")),g}{const g=[];for(const b in c)g.push(...m({key:`${o}.${b}`,value:c[b]}));return g}}};function Nn(m){const o=m.value,c=m.key,g=m.styleSpec,b=m.style;if(!o.type)return[new r.V(c,o,'"type" is required')];const w=r.M(o.type);let C=[];switch(["vector","raster","raster-dem","raster-array"].includes(w)&&(o.url||o.tiles||C.push(new r.J(c,o,'Either "url" or "tiles" is required.'))),w){case"vector":case"raster":case"raster-dem":case"raster-array":return C=C.concat(fi({key:c,value:o,valueSpec:g[`source_${w.replace("-","_")}`],style:m.style,styleSpec:g,objectElementValidators:pr})),C;case"geojson":if(C=fi({key:c,value:o,valueSpec:g.source_geojson,style:b,styleSpec:g,objectElementValidators:pr}),o.cluster)for(const I in o.clusterProperties){const[L,F]=o.clusterProperties[I],V=typeof L=="string"?[L,["accumulated"],["get",I]]:L;C.push(...pi({key:`${c}.${I}.map`,value:F,expressionContext:"cluster-map"})),C.push(...pi({key:`${c}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return C;case"video":return fi({key:c,value:o,valueSpec:g.source_video,style:b,styleSpec:g});case"image":return fi({key:c,value:o,valueSpec:g.source_image,style:b,styleSpec:g});case"canvas":return[new r.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dt({key:`${c}.type`,value:o.type,valueSpec:{values:qr(g)}})}}function qr(m){return m.source.reduce((o,c)=>{const g=m[c];return g.type.type==="enum"&&(o=o.concat(Object.keys(g.type.values))),o},[])}function mr(m){const o=m.value,c=m.styleSpec,g=c.light,b=m.style;let w=[];const C=r.K(o);if(o===void 0)return w;if(C!=="object")return w=w.concat([new r.V("light",o,`object expected, ${C} found`)]),w;for(const I in o){const L=I.match(/^(.*)-transition$/),F=I.match(/^(.*)-use-theme$/);w=w.concat(F&&g[F[1]]?Vi({key:I,value:o[I],valueSpec:{type:"string"},style:b,styleSpec:c}):L&&g[L[1]]&&g[L[1]].transition?Vi({key:I,value:o[I],valueSpec:c.transition,style:b,styleSpec:c}):g[I]?Vi({key:I,value:o[I],valueSpec:g[I],style:b,styleSpec:c}):[new r.V(I,o[I],`unknown property "${I}"`)])}return w}function Qi(m){const o=m.value;let c=[];if(!o)return c;const g=r.K(o);if(g!=="object")return c=c.concat([new r.V("light-3d",o,`object expected, ${g} found`)]),c;const b=m.styleSpec,w=b["light-3d"],C=m.key,I=m.style,L=m.style.lights;for(const q of["type","id"])if(!(q in o))return c=c.concat([new r.V("light-3d",o,`missing property ${q} on light`)]),c;if(o.type&&L)for(let q=0;q<m.arrayIndex;q++){const G=r.M(o.type),J=L[q];r.M(J.type)===G&&c.push(new r.V(C,o.id,`duplicate light type "${o.type}", previously defined at line ${J.id.__line__}`))}const F=`properties_light_${o.type}`;if(!(F in b))return c=c.concat([new r.V("light-3d",o,`Invalid light type ${o.type}`)]),c;const V=b[F];for(const q in o)if(q==="properties"){const G=o[q],J=r.K(G);if(J!=="object")return c=c.concat([new r.V("properties",G,`object expected, ${J} found`)]),c;for(const he in G)c=c.concat(V[he]?Vi({key:he,value:G[he],valueSpec:V[he],style:I,styleSpec:b}):[new r.J(m.key,G[he],`unknown property "${he}"`)])}else{const G=q.match(/^(.*)-transition$/),J=q.match(/^(.*)-use-theme$/);c=c.concat(J&&w[J[1]]?Vi({key:q,value:o[q],valueSpec:{type:"string"},style:I,styleSpec:b}):G&&w[G[1]]&&w[G[1]].transition?Vi({key:q,value:o[q],valueSpec:b.transition,style:I,styleSpec:b}):w[q]?Vi({key:q,value:o[q],valueSpec:w[q],style:I,styleSpec:b}):[new r.J(q,o[q],`unknown property "${q}"`)])}return c}function li(m){const o=m.value,c=m.key,g=m.style,b=m.styleSpec,w=b.terrain;let C=[];const I=r.K(o);if(o===void 0||I==="null")return C;if(I!=="object")return C=C.concat([new r.V("terrain",o,`object expected, ${I} found`)]),C;for(const L in o){const F=L.match(/^(.*)-transition$/),V=L.match(/^(.*)-use-theme$/);C=C.concat(V&&w[V[1]]?Vi({key:L,value:o[L],valueSpec:{type:"string"},style:g,styleSpec:b}):F&&w[F[1]]&&w[F[1]].transition?Vi({key:L,value:o[L],valueSpec:b.transition,style:g,styleSpec:b}):w[L]?Vi({key:L,value:o[L],valueSpec:w[L],style:g,styleSpec:b}):[new r.J(L,o[L],`unknown property "${L}"`)])}if(o.source){const L=g.sources&&g.sources[o.source],F=L&&r.M(L.type);L?F!=="raster-dem"&&C.push(new r.V(c,o.source,`terrain cannot be used with a source of type ${String(F)}, it only be used with a "raster-dem" source type`)):C.push(new r.V(c,o.source,`source "${o.source}" not found`))}else C.push(new r.V(c,o,'terrain is missing required property "source"'));return C}function hr(m){const o=m.value,c=m.style,g=m.styleSpec,b=g.fog;let w=[];const C=r.K(o);if(o===void 0)return w;if(C!=="object")return w=w.concat([new r.V("fog",o,`object expected, ${C} found`)]),w;for(const I in o){const L=I.match(/^(.*)-transition$/),F=I.match(/^(.*)-use-theme$/);w=w.concat(F&&b[F[1]]?Vi({key:I,value:o[I],valueSpec:{type:"string"},style:c,styleSpec:g}):L&&b[L[1]]&&b[L[1]].transition?Vi({key:I,value:o[I],valueSpec:g.transition,style:c,styleSpec:g}):b[I]?Vi({key:I,value:o[I],valueSpec:b[I],style:c,styleSpec:g}):[new r.J(I,o[I],`unknown property "${I}"`)])}return w}const Wr={"*":()=>[],array:ci,boolean:function(m){const o=m.value,c=m.key,g=r.K(o);return g!=="boolean"?[new r.V(c,o,`boolean expected, ${g} found`)]:[]},number:Pi,color:function(m){const o=m.key,c=m.value,g=r.K(c);return g!=="string"?[new r.V(o,c,`color expected, ${g} found`)]:r.a0.parseCSSColor(c)===null?[new r.V(o,c,`color expected, "${c}" found`)]:[]},enum:dt,filter:Cn,function:ii,layer:Ni,object:fi,source:Nn,model:r.a4,light:mr,"light-3d":Qi,terrain:li,fog:hr,string:Mi,formatted:function(m){return Mi(m).length===0?[]:pi(m)},resolvedImage:function(m){return Mi(m).length===0?[]:pi(m)},projection:function(m){const o=m.value,c=m.styleSpec,g=c.projection,b=m.style;let w=[];const C=r.K(o);if(C==="object")for(const I in o)w=w.concat(Vi({key:I,value:o[I],valueSpec:g[I],style:b,styleSpec:c}));else C!=="string"&&(w=w.concat([new r.V("projection",o,`object or string expected, ${C} found`)]));return w},import:function(m){const{value:o,styleSpec:c}=m,{data:g,...b}=o;Object.defineProperty(b,"__line__",{value:o.__line__,enumerable:!1});let w=fi(r.L({},m,{value:b,valueSpec:c.import}));return r.M(b.id)===""&&w.push(new r.V(`${m.key}.id`,b,"import id can't be an empty string")),g&&(w=w.concat(Ga(g,c,{key:`${m.key}.data`}))),w},iconset:function(m){const o=m.value,c=m.key,g=m.styleSpec,b=m.style;if(!o.type)return[new r.V(c,o,'"type" is required')];const w=r.M(o.type);let C=[];if(C=C.concat(fi({key:c,value:o,valueSpec:g[`iconset_${w}`],style:b,styleSpec:g})),w==="source"&&o.source){const I=b.sources&&b.sources[o.source],L=I&&r.M(I.type);I?L!=="raster-array"&&C.push(new r.V(c,o.source,`iconset cannot be used with a source of type ${String(L)}, it only be used with a "raster-array" source type`)):C.push(new r.V(c,o.source,`source "${o.source}" not found`))}return C}};function Vi(m,o=!1){const c=m.value,g=m.valueSpec,b=m.styleSpec;if(g.expression&&r.a2(r.M(c)))return ii(m);if(g.expression&&r.S(r.U(c)))return pi(m);if(g.type&&Wr[g.type]){const w=Wr[g.type](m);return o===!0&&w.length>0&&r.K(m.value)==="array"?pi(m):w}return fi(r.L({},m,{valueSpec:g.type?b[g.type]:g}))}function ko(m){const o=m.value,c=m.key,g=Mi(m);return g.length||(o.indexOf("{fontstack}")===-1&&g.push(new r.V(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&g.push(new r.V(c,o,'"glyphs" url must include a "{range}" token'))),g}function Ga(m,o=r.a5,c={}){return Vi({key:c.key||"",value:m,valueSpec:o.$root,styleSpec:o,style:m,objectElementValidators:{glyphs:ko,"*":()=>[]}})}function ts(m,o=r.a5){return Ue(Ga(m,o))}const Ds=m=>Ue(Nn(m)),Bl=m=>Ue(mr(m)),ca=m=>Ue(Qi(m)),Zt=m=>Ue(li(m)),Os=m=>Ue(hr(m)),Gi=m=>Ue(function(o){const c=o.value,g=o.style,b=o.styleSpec,w=b.snow;let C=[];const I=r.K(c);if(c===void 0)return C;if(I!=="object")return C=C.concat([new r.V("snow",c,`object expected, ${I} found`)]),C;for(const L in c){const F=L.match(/^(.*)-transition$/);C=C.concat(F&&w[F[1]]&&w[F[1]].transition?Vi({key:L,value:c[L],valueSpec:b.transition,style:g,styleSpec:b}):w[L]?Vi({key:L,value:c[L],valueSpec:w[L],style:g,styleSpec:b}):[new r.J(L,c[L],`unknown property "${L}"`)])}return C}(m)),Te=m=>Ue(function(o){const c=o.value,g=o.style,b=o.styleSpec,w=b.rain;let C=[];const I=r.K(c);if(c===void 0)return C;if(I!=="object")return C=C.concat([new r.V("rain",c,`object expected, ${I} found`)]),C;for(const L in c){const F=L.match(/^(.*)-transition$/);C=C.concat(F&&w[F[1]]&&w[F[1]].transition?Vi({key:L,value:c[L],valueSpec:b.transition,style:g,styleSpec:b}):w[L]?Vi({key:L,value:c[L],valueSpec:w[L],style:g,styleSpec:b}):[new r.J(L,c[L],`unknown property "${L}"`)])}return C}(m)),Y=m=>Ue(Ni(m)),ie=m=>Ue(Cn(m)),ge=m=>Ue(qn(m)),Ee=m=>Ue(Xn(m)),Pe=m=>Ue(r.a4(m));function Ue(m){return m.slice().sort((o,c)=>o.line&&c.line?o.line-c.line:0)}function Fe(m,o){let c=!1;if(o&&o.length)for(const g of o)g instanceof r.J?r.w(g.message):(m.fire(new r.z(new Error(g.message))),c=!0);return c}let He;class Je extends r.E{constructor(o,c="flat"){super(),this._transitionable=new r.a6(He||(He=new r.a7({anchor:new r.a8(r.a5.light.anchor),position:new r.a9(r.a5.light.position),color:new r.a8(r.a5.light.color),intensity:new r.a8(r.a5.light.intensity)}))),this.setLight(o,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c,g={}){this._validate(Bl,o,g)||(this._transitionable.setTransitionOrValue(o),this.id=c)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,g){return(!g||g.validate!==!1)&&Fe(this,o.call(ts,r.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}}let st=class extends r.E{constructor(m,o,c,g){super(),this.scope=c,this._transitionable=new r.a6(new r.a7({source:new r.a8(r.a5.terrain.source),exaggeration:new r.a8(r.a5.terrain.exaggeration)}),c,g),this._transitionable.setTransitionOrValue(m,g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(m,o){this._transitionable.setTransitionOrValue(m,o)}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}getExaggeration(m){return this._transitioning.possiblyEvaluate(new r.aa(m)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const m=this._transitionable._values.exaggeration;if(!m)return null;const o=m.value.expression;if(!o)return null;let c=-1,g=-1,b=1;for(const w of o.zoomStops)b=o.evaluate(new r.aa(w)),b>.01?(c=w,g=-1):g=w;return b<.01&&c>0&&g>c?[c,g]:null}isZoomDependent(){const m=this._transitionable._values.exaggeration;return m!=null&&m.value!=null&&m.value.expression!=null&&m.value.expression instanceof r.ab}};const Ke=45,At=65,qt=.05;function tn(m,o,c,g){const b=r.af(Ke,At,c),[w,C]=kn(m,g);let I=1-Math.min(1,Math.exp((o-w)/(C-w)*-6));return I*=I*I,I=Math.min(1,1.00747*I),I*b*m.alpha}function kn(m,o){const c=.5/Math.tan(.5*o);return[m.range[0]+c,m.range[1]+c]}function Pn(m,o,c,g,b){const w=r.ad([],[o,c,g],b.mercatorFogMatrix);return tn(m,r.ae(w),b.pitch,b._fov)}function Dn(m,o,c,g,b,w,C){const I=[[c,g,0],[b,g,0],[b,w,0],[c,w,0]];let L=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(const V of I){const q=r.ad([],V,o),G=r.ae(q);L=Math.min(L,G),F=Math.max(F,G)}return[tn(m,L,C.pitch,C._fov),tn(m,F,C.pitch,C._fov)]}class di extends r.E{constructor(o,c,g,b){super();const w=new r.a7({range:new r.a8(r.a5.fog.range),color:new r.a8(r.a5.fog.color),"color-use-theme":new r.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new r.a8(r.a5.fog["high-color"]),"high-color-use-theme":new r.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new r.a8(r.a5.fog["space-color"]),"space-color-use-theme":new r.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new r.a8(r.a5.fog["horizon-blend"]),"star-intensity":new r.a8(r.a5.fog["star-intensity"]),"vertical-range":new r.a8(r.a5.fog["vertical-range"])});this._transitionable=new r.a6(w,g,new Map(b)),this.set(o,b),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new r.ag(w),this.scope=g}get state(){const o=this._transform,c=o.projection.name==="globe",g=r.ah(o.zoom),b=this.properties.get("range"),w=[.5,3];return{range:c?[r.ai(w[0],b[0],g),r.ai(w[1],b[1],g)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,c,g={}){if(this._validate(Os,o,g))return;const b=r.l({},o);for(const w of Object.keys(r.a5.fog))b[w]===void 0&&(b[w]=r.a5.fog[w].default);this._options=b,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:r.af(Ke,At,o))*c.a}getOpacityAtLatLng(o,c){return this._transform.projection.supportsFog?function(g,b,w){const C=r.ac.fromLngLat(b),I=w.elevation?w.elevation.getAtPointOrZero(C):0;return Pn(g,C.x,C.y,I,w)}(this.state,o,c):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(o.toUnwrapped());return Dn(this.state,c,0,0,r.aj,r.aj,this._transform)}getOpacityForBounds(o,c,g,b,w){return this._transform.projection.supportsFog?Dn(this.state,o,c,g,b,w,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?kn(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const g of c){const b=o.points[g];let w;if(b[2]>=0)w=b;else{const C=o.points[g-4];w=r.ak(C,b,C[2]/(C[2]-b[2]))}if(Pn(this.state,w[0],w[1],0,this._transform)>=qt)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,g){return(!g||g.validate!==!1)&&Fe(this,o.call(ts,r.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}}let sr,ui,$i,Di,ar=class extends r.E{constructor(m,o,c,g){super();const b=sr||(sr=new r.a7({density:new r.a8(r.a5.snow.density),intensity:new r.a8(r.a5.snow.intensity),color:new r.a8(r.a5.snow.color),opacity:new r.a8(r.a5.snow.opacity),vignette:new r.a8(r.a5.snow.vignette),"vignette-color":new r.a8(r.a5.snow["vignette-color"]),"center-thinning":new r.a8(r.a5.snow["center-thinning"]),direction:new r.a8(r.a5.snow.direction),"flake-size":new r.a8(r.a5.snow["flake-size"])}));this._transitionable=new r.a6(b,c,new Map(g)),this.set(m,g),this._transitioning=this._transitionable.untransitioned(),this.properties=new r.ag(b),this.scope=c}get state(){const m=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),g=r.al(c[0]),b=-Math.max(r.al(c[1]),.01),w=[Math.cos(g)*Math.cos(b),Math.sin(g)*Math.cos(b),Math.sin(b)],C=this.properties.get("vignette"),I=this.properties.get("vignette-color");return I.a=C,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new r.am(o.r,o.g,o.b,o.a*m),direction:w,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:I}}get(){return this._transitionable.serialize()}set(m,o,c={}){if(this._validate(Gi,m,c))return;const g=r.l({},m);for(const b of Object.keys(r.a5.snow))g[b]===void 0&&(g[b]=r.a5.snow[b].default);this._options=g,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(m){this._transitionable.setTransitionOrValue(this._options,new Map(m))}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}_validate(m,o,c){return(!c||c.validate!==!1)&&Fe(this,m.call(ts,r.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}},Er=class extends r.E{constructor(m,o,c,g){super();const b=ui||(ui=new r.a7({density:new r.a8(r.a5.rain.density),intensity:new r.a8(r.a5.rain.intensity),color:new r.a8(r.a5.rain.color),opacity:new r.a8(r.a5.rain.opacity),vignette:new r.a8(r.a5.rain.vignette),"vignette-color":new r.a8(r.a5.rain["vignette-color"]),"center-thinning":new r.a8(r.a5.rain["center-thinning"]),direction:new r.a8(r.a5.rain.direction),"droplet-size":new r.a8(r.a5.rain["droplet-size"]),"distortion-strength":new r.a8(r.a5.rain["distortion-strength"])}));this._transitionable=new r.a6(b,c,new Map(g)),this.set(m,g),this._transitioning=this._transitionable.untransitioned(),this.properties=new r.ag(b),this.scope=c}get state(){const m=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),g=r.al(c[0]),b=-Math.max(r.al(c[1]),.01),w=[Math.cos(g)*Math.cos(b),Math.sin(g)*Math.cos(b),Math.sin(b)],C=this.properties.get("vignette-color");return C.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new r.am(o.r,o.g,o.b,o.a*m),direction:w,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:C}}get(){return this._transitionable.serialize()}set(m,o,c={}){if(this._validate(Te,m,c))return;const g=r.l({},m);for(const b of Object.keys(r.a5.rain))g[b]===void 0&&(g[b]=r.a5.rain[b].default);this._options=g,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(m){this._transitionable.setTransitionOrValue(this._options,new Map(m))}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}_validate(m,o,c){return(!c||c.validate!==!1)&&Fe(this,m.call(ts,r.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:r.a5})))}};class Lr extends r.E{constructor(o,c,g,b){super(),this.scope=g,this._options=o,this.properties=new r.ag(c),this._transitionable=new r.a6(c,g,new Map(b)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,c){this._options=o,this._transitionable.setTransitionOrValue(o.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class ho{constructor(o,c,g,b){this.screenBounds=o,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(o,c){let g,b;if(o instanceof r.P||typeof o[0]=="number"){const w=r.P.convert(o);g=[w],b=c.isPointAboveHorizon(w)}else{const w=r.P.convert(o[0]),C=r.P.convert(o[1]),I=w.add(C)._div(2);g=[w,C],b=r.ao(w,C).every(L=>c.isPointAboveHorizon(L))&&c.isPointAboveHorizon(I)}return new ho(g,c.getCameraPoint(),b,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return r.ao(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const c=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new r.P(1,1)):this.screenBounds[1],b=r.ao(c,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<g.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?b[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(b[3]=this.cameraPoint)),r.ap(b,o)}bufferedCameraGeometryGlobe(o){const c=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new r.P(1,1)):this.screenBounds[1],b=r.ao(c,g,o),w=this.cameraPoint.clone();switch(3*((w.y>c.y)+(w.y>g.y))+((w.x>c.x)+(w.x>g.x))){case 0:b[0]=w,b[4]=w.clone();break;case 1:b.splice(1,0,w);break;case 2:b[1]=w;break;case 3:b.splice(4,0,w);break;case 5:b.splice(2,0,w);break;case 6:b[3]=w;break;case 7:b.splice(3,0,w);break;case 8:b[2]=w}return b}containsTile(o,c,g,b=0){const w=o.queryPadding/c._pixelsPerMercatorPixel+1,C=g?this._bufferedCameraMercator(w,c):this._bufferedScreenMercator(w,c);let I=o.tileID.wrap+(C.unwrapped?b:0);const L=C.polygon.map(fe=>r.aq(o.tileTransform,fe,I));if(!r.ar(L,0,0,r.aj,r.aj))return;I=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const F=this.screenGeometryMercator.polygon.map(fe=>r.as(o.tileTransform,fe,I)),V=F.map(fe=>new r.P(fe[0],fe[1])),q=c.getFreeCameraOptions().position||new r.ac(0,0,0),G=r.as(o.tileTransform,q,I),J=F.map(fe=>{const ce=r.at(fe,fe,G);return r.au(ce,ce),new r.av(G,ce)}),he=r.aw(o,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:V,tilespaceRays:J,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(le=r.ax(L),le.min.x=r.aD(le.min.x,0,r.aj),le.min.y=r.aD(le.min.y,0,r.aj),le.max.x=r.aD(le.max.x,0,r.aj),le.max.y=r.aD(le.max.y,0,r.aj),le),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:he};var le}_bufferedScreenMercator(o,c){const g=ds(o);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let b;return b=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),c):{polygon:this.bufferedScreenGeometry(o).map(w=>c.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[g]=b,b}}_bufferedCameraMercator(o,c){const g=ds(o);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let b;return b=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),c):{polygon:this.bufferedCameraGeometry(o).map(w=>c.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[g]=b,b}}_projectAndResample(o,c){const g=function(w,C){const I=r.az([],C.pixelMatrix,C.globeMatrix),L=[0,-r.aE,0,1],F=[0,r.aE,0,1],V=[0,0,0,1];r.aA(L,L,I),r.aA(F,F,I),r.aA(V,V,I);const q=new r.P(L[0]/L[3],L[1]/L[3]),G=new r.P(F[0]/F[3],F[1]/F[3]),J=r.aB(w,q)&&L[3]<V[3],he=r.aB(w,G)&&F[3]<V[3];if(!J&&!he)return null;const le=function(ke,Re,Ve){for(let We=1;We<ke.length;We++){const ct=no(Re.pointCoordinate3D(ke[We-1]).x),rt=no(Re.pointCoordinate3D(ke[We]).x);if(Ve<0){if(ct<rt)return{idx:We,t:-ct/(rt-1-ct)}}else if(rt<ct)return{idx:We,t:(1-ct)/(rt+1-ct)}}return null}(w,C,J?-1:1);if(!le)return null;const{idx:fe,t:ce}=le;let ve=fe>1?Ri(w.slice(0,fe),C):[],Ae=fe<w.length?Ri(w.slice(fe),C):[];ve=ve.map(ke=>new r.P(no(ke.x),ke.y)),Ae=Ae.map(ke=>new r.P(no(ke.x),ke.y));const De=[...ve];De.length===0&&De.push(Ae[Ae.length-1]);const Ne=r.ai(De[De.length-1].y,(Ae.length===0?ve[0]:Ae[0]).y,ce);let ze;return ze=J?[new r.P(0,Ne),new r.P(0,0),new r.P(1,0),new r.P(1,Ne)]:[new r.P(1,Ne),new r.P(1,1),new r.P(0,1),new r.P(0,Ne)],De.push(...ze),Ae.length===0?De.push(ve[0]):De.push(...Ae),{polygon:De.map(ke=>new r.ac(ke.x,ke.y)),unwrapped:!1}}(o,c);if(g)return g;const b=function(w,C){let I=!1,L=-1/0,F=0;for(let q=0;q<w.length-1;q++)w[q].x>L&&(L=w[q].x,F=q);for(let q=0;q<w.length-1;q++){const G=(F+q)%(w.length-1),J=w[G],he=w[G+1];Math.abs(J.x-he.x)>.5&&(J.x<he.x?(J.x+=1,G===0&&(w[w.length-1].x+=1)):(he.x+=1,G+1===w.length-1&&(w[0].x+=1)),I=!0)}const V=r.ay(C.center.lng);return I&&V<Math.abs(V-1)&&w.forEach(q=>{q.x-=1}),{polygon:w,unwrapped:I}}(Ri(o,c).map(w=>new r.P(no(w.x),w.y)),c);return{polygon:b.polygon.map(w=>new r.ac(w.x,w.y)),unwrapped:b.unwrapped}}}function Ri(m,o){return r.aC(m,c=>{const g=o.pointCoordinate3D(c);c.x=g.x,c.y=g.y},1/256)}function no(m){return m<0?1+m%1:m%1}function ds(m){return 100*m|0}function So(m,o,c,g,b){const w=function(I,L){if(I)return b(I);if(L){if(m.url&&L.tiles&&m.tiles&&delete m.tiles,L.variants){if(!Array.isArray(L.variants))return b(new Error("variants must be an array"));for(const V of L.variants){if(V==null||typeof V!="object"||V.constructor!==Object)return b(new Error("variant must be an object"));if(!Array.isArray(V.capabilities))return b(new Error("capabilities must be an array"));if(V.capabilities.length===1&&V.capabilities[0]==="meshopt"){L=r.l(L,V);break}}}const F=r.aF(r.l({},L,m),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);F.tiles=o.canonicalizeTileset(F,m.url),b(null,F)}},C=function(I,L,F){if(!I)return null;if(!L&&!F)return I;F=F||I.worldview_default;const V=Object.values(I.language||{});if(V.length===0)return null;const q=Object.values(I.worldview||{});if(q.length===0)return null;const G=V.every(he=>he===L),J=q.every(he=>he===F);return G&&J?I:L in(I.language_options||{})||F in(I.worldview_options||{})?null:I.language_options&&I.worldview_options?I:null}(m.data,c,g);return C?r.q.frame(()=>w(null,C)):m.url?r.n(o.transformRequest(o.normalizeSourceURL(m.url,null,c,g),r.R.Source),w):r.q.frame(()=>{const{data:I,...L}=m;w(null,L)})}function Go(m,o){const c=Math.pow(2,o.z),g=Math.floor(r.ay(m.getWest())*c),b=Math.floor(r.aH(m.getNorth())*c),w=Math.ceil(r.ay(m.getEast())*c),C=Math.ceil(r.aH(m.getSouth())*c);return o.x>=g&&o.x<w&&o.y>=b&&o.y<C}class vr{constructor(o,c,g){this.bounds=o?r.aG.convert(this.validateBounds(o)):null,this.minzoom=c||0,this.maxzoom=g||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}addExtraBounds(o){if(o){this.extraBounds||(this.extraBounds=[]);for(const c of o)this.extraBounds.push(r.aG.convert(this.validateBounds(c)))}}contains(o){if(o.z>this.maxzoom||o.z<this.minzoom||this.bounds&&!Go(this.bounds,o))return!1;if(!this.extraBounds)return!0;for(const c of this.extraBounds)if(Go(c,o))return!0;return!1}static fromTileJSON(o){if(!o.bounds&&!o.extra_bounds)return null;const c=new vr(o.bounds,o.minzoom,o.maxzoom);return c.addExtraBounds(o.extra_bounds),c}}class zo extends r.E{constructor(o,c,g,b){if(super(),this.id=o,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.l(this,r.aF(c,["url","scheme","tileSize","promoteId"])),this._options=r.l({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new r.aI}load(o){this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map.getWorldview();this._tileJSONRequest=So(this._options,this.map._requestManager,c,g,(b,w)=>{if(this._tileJSONRequest=null,this._loaded=!0,b)c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),g&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new r.z(b));else if(w){if(r.l(this,w),this.hasWorldviews=!!w.worldview_options,w.worldview_default&&(this.worldviewDefault=w.worldview_default),w.vector_layers){this.vectorLayers=w.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const C of w.vector_layers)this.vectorLayerIds.push(C.id),w.worldview&&w.worldview[C.source]&&this.localizableLayerIds.add(C.id)}this.tileBounds=vr.fromTileJSON(w),Bt(w.tiles,this.map._requestManager._customAccessToken),this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(b)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=r.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return r.l({},this._options)}loadTile(o,c){const g=o.tileID.canonical.url(this.tiles,this.scheme),b=this.map._requestManager.normalizeTileURL(g),w=this.map._requestManager.transformRequest(b,r.R.Tile),C=this.map.style?this.map.style.getLut(this.scope):null,I=C?{image:C.image.clone()}:null,L={request:w,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:I,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:r.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&r.f(g)&&(L.worldview=this.map.getWorldview()||this.worldviewDefault,L.localizableLayerIds=this.localizableLayerIds),L.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",L,F.bind(this));else if(o.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",L,F.bind(this),void 0,!0);else{const V=r.aJ.call({deduped:this._deduped},L,(q,G)=>{q||!G?F.call(this,q):(L.data={cacheControl:G.cacheControl,expires:G.expires,rawData:G.rawData.slice(0)},o.actor&&o.actor.send("loadTile",L,F.bind(this),void 0,!0))},!0);o.request={cancel:V}}function F(V,q){return delete o.request,o.aborted?c(null):V&&V.status!==404?c(V):(q&&q.resourceTiming&&(o.resourceTiming=q.resourceTiming),this.map._refreshExpiredTiles&&q&&o.setExpiryData(q),o.loadVectorData(q,this.map.painter),r.aK(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Sa extends r.E{constructor(o,c,g,b){super(),this.id=o,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.l({type:"raster"},c),r.l(this,r.aF(c,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"})),this._tileJSONRequest=So(this._options,this.map._requestManager,null,null,(c,g)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new r.z(c)):g&&(r.l(this,g),g.raster_layers&&(this.rasterLayers=g.raster_layers,this.rasterLayerIds=this.rasterLayers.map(b=>b.id)),this.tileBounds=vr.fromTileJSON(g),Bt(g.tiles),this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(c)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=r.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return r.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,c){const g=r.q.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);o.request=r.o(this.map._requestManager.transformRequest(b,r.R.Tile),(w,C,I,L)=>(delete o.request,o.aborted?(o.state="unloaded",c(null)):w?(o.state="errored",c(w)):C?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:I,expires:L}),o.setTexture(C,this.map.painter),o.state="loaded",r.aK(this.dispatcher),void c(null)):c(null)))}abortTile(o,c){o.request&&(o.request.cancel(),delete o.request),c&&c()}unloadTile(o,c){o.texture&&o.texture instanceof r.T?(o.destroy(!0),o.texture&&o.texture instanceof r.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ls extends Sa{constructor(o,c,g,b){super(o,c,g,b),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=r.l({type:"raster-array"},c)}triggerRepaint(o){const c=this.map.painter._terrain,g=this.map.style.getSourceCache(this.id);c&&c.enabled&&g&&c._clearRenderCacheForTile(g.id,o.tileID),this.map.triggerRepaint()}loadTile(o,c){const g=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),b=this.map._requestManager.transformRequest(g,r.R.Tile),w={request:b,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=b,o.actor||(o.actor=this.dispatcher.getActor());const C=(I,L,F,V)=>{if(delete o.request,o.aborted)return o.state="unloaded",c(null);if(I)return I.name==="AbortError"?void 0:(o.state="errored",c(I));if(this.map._refreshExpiredTiles&&L&&o.setExpiryData({cacheControl:F,expires:V}),this.partial)o.state="empty";else{if(!L)return c(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=L}c(null)};o.request=this.partial?o.fetchHeader(void 0,C.bind(this)):o.actor.send("loadTile",w,C.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){const g=o.texture;g&&g instanceof r.T?(o.destroy(!0),this.map.painter.saveTileTexture(g)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,c,g){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(c,g,(b,w)=>{if(b)return o.state="errored",this.fire(new r.z(b)),void this.triggerRepaint(o);w&&(o._isHeaderLoaded=!0,o.setTexture(w,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:w})=>w===o),g=c&&c.fields,b=g&&g.bands&&g.bands;return b?b[0]:0}getTextureDescriptor(o,c,g){if(!o)return;const b=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!b)return;let w=null;c instanceof r.aN?w=c.paint.get("raster-array-band"):c instanceof r.aO&&(w=c.paint.get("raster-particle-array-band"));const C=w||this.getInitialBand(b);if(C!=null)if(o.textureDescriptor){if(!o.updateNeeded(b,C)||g)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,b,C)}getImages(o,c){const g=new Map;for(const b of o)for(const w of c){const[C,I]=w.split("/"),L=b.getLayer(C);if(!L||!L.hasBand(I)||!L.hasDataForBand(I))continue;const{bytes:F,tileSize:V,buffer:q}=L.getBandView(I),G=V+2*q,J={data:new r.r({width:G,height:G},F),pixelRatio:2,sdf:!1,usvg:!1,version:0};g.set(w,J)}return g}}const Ud={vector:zo,raster:Sa,"raster-dem":class extends Sa{constructor(m,o,c,g){super(m,o,c,g),this.type="raster-dem",this.maxzoom=22,this._options=r.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(m,o){const c=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(b,w){b&&(m.state="errored",o(b)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",o(null))}m.request=r.o(this.map._requestManager.transformRequest(c,r.R.Tile),(function(b,w,C,I){if(delete m.request,m.aborted)m.state="unloaded",o(null);else if(b)m.state="errored",o(b);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:C,expires:I});const L=ImageBitmap&&w instanceof ImageBitmap&&r.t(),F=1-(w.width-r.aL(w.width))/2;F<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const V=L?w:r.q.getImageData(w,F),q={uid:m.uid,tileID:m.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:V,encoding:this.encoding,padding:F};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadTile",q,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const o=m.canonical,c=Math.pow(2,o.z),g=(o.x-1+c)%c,b=o.x===0?m.wrap-1:m.wrap,w=(o.x+1+c)%c,C=o.x+1===c?m.wrap+1:m.wrap,I={};return I[new r.aM(m.overscaledZ,b,o.z,g,o.y).key]={backfilled:!1},I[new r.aM(m.overscaledZ,C,o.z,w,o.y).key]={backfilled:!1},o.y>0&&(I[new r.aM(m.overscaledZ,b,o.z,g,o.y-1).key]={backfilled:!1},I[new r.aM(m.overscaledZ,m.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},I[new r.aM(m.overscaledZ,C,o.z,w,o.y-1).key]={backfilled:!1}),o.y+1<c&&(I[new r.aM(m.overscaledZ,b,o.z,g,o.y+1).key]={backfilled:!1},I[new r.aM(m.overscaledZ,m.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},I[new r.aM(m.overscaledZ,C,o.z,w,o.y+1).key]={backfilled:!1}),I}},"raster-array":ls,geojson:class extends r.E{constructor(m,o,c,g){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(g),this._data=o.data,this._options=r.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const b=r.aj/this.tileSize;this.workerOptions=r.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*b,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*b,extent:r.aj,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:r.aj,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*b,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}updateData(m){if(!this._options.dynamic)return this.fire(new r.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof m!="string"&&(m.type==="Feature"&&(m={type:"FeatureCollection",features:[m]}),m.type!=="FeatureCollection"))return this.fire(new r.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof m!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const c of this._data.features)o.set(c.id,c);for(const c of m.features)o.set(c.id,c);this._data.features=[...o.values()]}else this._data=m;return this._updateWorkerData(!0),this}getClusterExpansionZoom(m,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id,scope:this.scope},o),this}getClusterChildren(m,o){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id,scope:this.scope},o),this}getClusterLeaves(m,o,c,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:m,limit:o,offset:c},g),this}_updateWorkerData(m=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new r.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=r.l({append:m},this.workerOptions);o.scope=this.scope;const c=this._data;typeof c=="string"?(o.request=this.map._requestManager.transformRequest(r.q.resolveURL(c),r.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(g,b)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new r.z(g));else{const w={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(w.resourceTiming=b.resourceTiming[this.id]),m&&(this._partialReload=!0),this.fire(new r.A("data",w)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(m),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const m=r.C(this.id,this.scope);this.map.style.clearSource(m),this._updateWorkerData()}loadTile(m,o){const c=m.actor?"reloadTile":"loadTile";m.actor=this.actor;const g=this.map.style?this.map.style.getLut(this.scope):null,b=g?{image:g.image.clone()}:null,w=this._partialReload,C={type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:b,scope:this.scope,pixelRatio:r.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:m.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:w};m.request=this.actor.send(c,C,(I,L)=>w&&!L?(m.state="loaded",o(null)):(delete m.request,m.destroy(),m.aborted?o(null):I?o(I):(m.loadVectorData(L,this.map.painter,c==="reloadTile"),o(null))),void 0,c==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m,o){this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id,scope:this.scope}),m.destroy()}onRemove(m){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return r.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends r.aP{constructor(m,o,c,g){super(m,o,c,g),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const o of m.urls)this.urls.push(this.map._requestManager.transformRequest(o,r.R.Source).url);r.aQ(this.urls,(o,c)=>{this._loaded=!0,o?this.fire(new r.z(o)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const o=this.video.seekable;m<o.start(0)||m>o.end(0)?this.fire(new r.z(new r.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,o=m.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new r.T(m,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:r.aP,model:class extends r.E{constructor(m,o,c,g){super(),this.id=m,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const m=[];for(const o in this._options.models){const c=this._options.models[o],g=r.aS(this.map._requestManager.transformRequest(c.uri,r.R.Model).url).then(b=>{if(!b)return;const w=r.aT(b),C=new r.aU(o,c.position,c.orientation,w);C.computeBoundsAndApplyParent(),this.models.push(C)}).catch(b=>{this.fire(new r.z(new Error(`Could not load model ${o} from ${c.uri}: ${b.message}`)))});m.push(g)}Promise.allSettled(m).then(()=>{this._loaded=!0,this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this._loaded=!0,this.fire(new r.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(m){this.map=m,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(m,o){}serialize(){return this._options}},"batched-model":class extends r.E{constructor(m,o,c,g){super(),this.type="batched-model",this.id=m,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(g)}onAdd(m){this.map=m,this.load()}reload(){this.cancelTileJSONRequest();const m=r.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(m))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(m){this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=So(this._options,this.map._requestManager,o,c,(g,b)=>{this._tileJSONRequest=null,this._loaded=!0,g?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new r.z(g))):b&&(r.l(this,b),b.bounds&&(this.tileBounds=new vr(b.bounds,this.minzoom,this.maxzoom)),Bt(b.tiles,this.map._requestManager._customAccessToken),this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))),m&&m(g)})}hasTransition(){return!1}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}loaded(){return this._loaded}loadTile(m,o){const c=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(c,r.R.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:m.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:r.q.devicePixelRatio,promoteId:this.promoteId};if(m.actor&&m.state!=="expired")if(m.state==="loading")m.reloadCallback=o;else{if(m.buckets){const w=Object.values(m.buckets);for(const C of w)C.dirty=!0;return void(m.state="loaded")}m.request=m.actor.send("reloadTile",g,b.bind(this))}else m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",g,b.bind(this),void 0,!0);function b(w,C){return m.aborted?o(null):w&&w.status!==404?o(w):(this.map._refreshExpiredTiles&&C&&m.setExpiryData(C),m.loadModelData(C,this.map.painter),m.state="loaded",void o(null))}}serialize(){return r.l({},this._options)}},canvas:class extends r.aP{constructor(m,o,c,g){super(m,o,c,g),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(w=>typeof w!="number"))||this.fire(new r.z(new r.V(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.z(new r.V(`sources.${m}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new r.z(new r.V(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new r.z(new r.V(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.z(new r.V(`sources.${m}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(m){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!m&&!this._playing||this.texture instanceof r.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends r.E{constructor(m,o,c,g){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=o,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new r.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new r.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new vr(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),r.l(this,r.aF(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return r.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new r.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this.map=m,this._loaded=!1,this.fire(new r.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:o,y:c,z:g}=m.canonical;return this._implementation.hasTile({x:o,y:c,z:g})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,o){const{x:c,y:g,z:b}=m.tileID.canonical,w=new AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:c,y:g,z:b},{signal:w.signal})).then((function(C){return delete m.request,m.aborted?(m.state="unloaded",o(null)):C===void 0?(m.state="errored",o(null)):C===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",o(null)):function(I){return I instanceof ImageData||I instanceof HTMLCanvasElement||I instanceof ImageBitmap||I instanceof HTMLImageElement}(C)?(this.loadTileData(m,C),m.state="loaded",void o(null)):(m.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(C=>{C.name!=="AbortError"&&(m.state="errored",o(C))}),m.request.cancel=()=>w.abort()}loadTileData(m,o){m.setTexture(o,this.map.painter)}unloadTile(m,o){if(m.texture&&m.texture instanceof r.T?(m.destroy(!0),m.texture&&m.texture instanceof r.T&&this.map.painter.saveTileTexture(m.texture)):m.destroy(),this._implementation.unloadTile){const{x:c,y:g,z:b}=m.tileID.canonical;this._implementation.unloadTile({x:c,y:g,z:b})}o&&o()}abortTile(m,o){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){const m=r.C(this.id,this.scope);this.map.style.clearSource(m)}_update(){this.fire(new r.A("data",{dataType:"source",sourceDataType:"content"}))}}},Vd=function(m,o,c,g){const b=new Ud[o.type](m,o,c,g);if(b.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${b.id}`);return r.aV(["load","abort","unload","serialize","prepare"],b),b};function Rh(m,o,c=""){return`${c}:${o.id||""}:${o.layer.id}:${function(g){if("layerId"in g)return`layer:${g.layerId}`;{const{featuresetId:b,importId:w}=g;return`featureset:${b}${w?`:import:${w}`:""}`}}(m.target)}`}function $d(m,o,c,g=""){if(m.uniqueFeatureID){const b=Rh(m,o,g);if(c.has(b))return!0;c.add(b)}return!1}function hc(m,o,c,g,b=!1){const w=o.sourceCache.transform,C=o.sourceCache.tilesIn(m,o.has3DLayers,b);C.sort(qa);const I=[];for(const L of C){const F=L.tile.queryRenderedFeatures(o,L,c,g,w,b);Object.keys(F).length&&I.push({wrappedTileID:L.tile.tileID.wrapped().key,queryResults:F})}return I.length===0?{}:function(L){const F={},V={};for(const q of L){const G=q.queryResults,J=q.wrappedTileID,he=V[J]=V[J]||{};for(const le in G){const fe=G[le],ce=he[le]=he[le]||{},ve=F[le]=F[le]||[];for(const Ae of fe)ce[Ae.featureIndex]||(ce[Ae.featureIndex]=!0,ve.push(Ae))}}return F}(I)}function tp(m,o,c,g,b){const w={},C=g.queryRenderedSymbols(m),I=[];for(const L of Object.keys(C).map(Number))I.push(b[L]);I.sort(qa);for(const L of I){const F=L.featureIndex.lookupSymbolFeatures(C[L.bucketInstanceId],L.bucketIndex,L.sourceLayerIndex,o,c);for(const V in F){const q=w[V]=w[V]||[],G=F[V];G.sort((J,he)=>{const le=L.featureSortOrder;if(le){const fe=le.indexOf(J.featureIndex);return le.indexOf(he.featureIndex)-fe}return he.featureIndex-J.featureIndex});for(const J of G)q.push(J)}}return w}function Ta(m,o){const c=m.getRenderableIds().map(w=>m.getTileByID(w)),g=[],b={};for(let w=0;w<c.length;w++){const C=c[w],I=C.tileID.canonical.key;b[I]||(b[I]=!0,C.querySourceFeatures(g,o))}return g}function qa(m,o){const c=m.tileID,g=o.tileID;return c.overscaledZ-g.overscaledZ||c.canonical.y-g.canonical.y||c.wrap-g.wrap||c.canonical.x-g.canonical.x}function Om(m,o){const c={};if(!o)return c;for(const g of m){const b=g.layerIds.map(w=>o.getLayer(w)).filter(Boolean);if(b.length!==0){g.layers=b,g.stateDependentLayerIds&&(g.stateDependentLayers=g.stateDependentLayerIds.map(w=>b.filter(C=>C.id===w)[0]));for(const w of b)c[w.fqid]=g}}return c}const Ws=32,Xs=33,dc=new Uint16Array(8184);for(let m=0;m<2046;m++){let o=m+2,c=0,g=0,b=0,w=0,C=0,I=0;for(1&o?b=w=C=Ws:c=g=I=Ws;(o>>=1)>1;){const F=c+b>>1,V=g+w>>1;1&o?(b=c,w=g,c=C,g=I):(c=b,g=w,b=C,w=I),C=F,I=V}const L=4*m;dc[L+0]=c,dc[L+1]=g,dc[L+2]=b,dc[L+3]=w}const cl=new Uint16Array(2178),Ea=new Uint8Array(1089),ul=new Uint16Array(1089);function Hd(m){return m===0?-.03125:m===32?.03125:0}const Lm={type:2,extent:r.aj,loadGeometry:()=>[[new r.P(0,0),new r.P(r.aj+1,0),new r.P(r.aj+1,r.aj+1),new r.P(0,r.aj+1),new r.P(0,0)]]};class Fl{constructor(o,c,g,b,w){this.tileID=o,this.uid=r.a$(),this.uses=0,this.tileSize=c,this.tileZoom=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=w,b&&b.style&&(this._lastUpdatedBrightness=b.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",b&&b.transform&&(this.projection=b.transform.projection)}registerFadeDuration(o){const c=o+this.timeAdded;c<r.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=r.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,c,g){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=Om(o.buckets,c.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const w=this.buckets[b];if(w instanceof r.b1){if(this.hasSymbolBuckets=!0,!g)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const w=this.buckets[b];if(w instanceof r.b1&&w.hasRTLText){this.hasRTLText=!0,r.b2();break}}this.queryPadding=0;for(const b in this.buckets){const w=this.buckets[b],C=c.style.getOwnLayer(b);if(!C)continue;const I=C.queryRadius(w);this.queryPadding=Math.max(this.queryPadding,I)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new r.b0}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,c,g){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,Om(o.buckets,c.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const b in this.buckets){const w=this.buckets[b];w.uploadPending()&&w.upload(o)}const c=o.gl,g=this.imageAtlas;g&&!g.uploaded&&(this.imageAtlasTexture=new r.T(o,g.image,c.RGBA8,{useMipmap:!!g.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new r.T(o,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new r.T(o,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(o,c,g){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,g),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const b=c.style.getBrightness();(this._lastUpdatedBrightness||b)&&(this._lastUpdatedBrightness&&b&&Math.abs(this._lastUpdatedBrightness-b)<.001||(this.updateBuckets(c,this._lastUpdatedBrightness!==b),this._lastUpdatedBrightness=b))}queryRenderedFeatures(o,c,g,b,w,C){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const I=function(L,F){const V=r.bn([],[.5*L.width,.5*-L.height,1]);return r.bo(V,V,[1,-1,0]),r.az(V,V,L.calculateProjMatrix(F.toUnwrapped())),Float32Array.from(V)}(w,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:c,pixelPosMatrix:I,transform:b,availableImages:g,tileTransform:this.tileTransform})}querySourceFeatures(o,c){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const b=g.loadVTLayers(),w=c?c.sourceLayer:"",C=b._geojsonTileLayer||b[w];if(!C)return;const I=r.b3(c&&c.filter),{z:L,x:F,y:V}=this.tileID.canonical,q={z:L,x:F,y:V};for(let G=0;G<C.length;G++){const J=C.feature(G);if(I.needGeometry){const fe=r.b4(J,!0);if(!I.filter(new r.aa(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!I.filter(new r.aa(this.tileID.overscaledZ),J))continue;const he=g.getId(J,w),le=new r.b5(J,L,F,V,he);le.tile=q,o.push(le)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const c=this.expirationTime;if(o.cacheControl){const g=r.b6(o.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const g=Date.now();let b=!1;if(this.expirationTime>g)b=!1;else if(c)if(this.expirationTime<c)b=!0;else{const w=this.expirationTime-c;w?this.expirationTime=g+Math.max(w,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,c){if(!this.latestFeatureIndex||!o.style)return;const g=this.latestFeatureIndex.loadVTLayers(),b=o.style.listImages(),w=o.style.getBrightness();for(const C in this.buckets){if(!o.style.hasLayer(C))continue;const I=this.buckets[C],L=I.layers[0],F=L.sourceLayer||"_geojsonTileLayer",V=g[F],q=o.style.getLayerSourceCache(L);let G={};q&&(G=q._state.getState(F,void 0));const J=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},he=Object.keys(G).length>0&&!c;he&&!I.stateDependentLayers.length&&!c||I.update(G,V,b,J,he?I.stateDependentLayers:I.layers,c,w),(I instanceof r.b7||I instanceof r.b8)&&o._terrain&&o._terrain.enabled&&q&&I.uploadPending()&&o._terrain._clearRenderCacheForTile(q.id,this.tileID);const le=o&&o.style&&o.style.getOwnLayer(C);le&&(this.queryPadding=Math.max(this.queryPadding,le.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=r.q.now()+o}setTexture(o,c){const g=c.context,b=g.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof r.T?this.texture.update(o):(this.texture=new r.T(g,o,b.RGBA8,{useMipmap:!0}),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE))}setDependencies(o,c){const g={};for(const b of c)g[b]=!0;this.dependencies[o]=g}hasDependency(o,c){for(const g of o){const b=this.dependencies[g];if(b){for(const w of c)if(b[w])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const g=r.b9(Lm,this.tileID.canonical,this.tileTransform)[0],b=new r.ba,w=new r.bb;for(let C=0;C<g.length;C++){const{x:I,y:L}=g[C];b.emplaceBack(I,L),w.emplaceBack(C)}w.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(w),this._tileDebugBuffer=o.createVertexBuffer(b,r.bc.members),this._tileDebugSegments=r.bd.simpleSegment(0,0,b.length,w.length)}_makeTileBoundsBuffers(o,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const g=r.b9(Lm,this.tileID.canonical,this.tileTransform)[0];let b,w;if(this.isRaster){const C=function(I,L){const F=r.aW(I,L),V=Math.pow(2,I.z);for(let fe=0;fe<Xs;fe++)for(let ce=0;ce<Xs;ce++){const ve=r.aX((I.x+(ce+Hd(ce))/Ws)/V),Ae=r.aY((I.y+(fe+Hd(fe))/Ws)/V),De=L.project(ve,Ae),Ne=fe*Xs+ce;cl[2*Ne+0]=Math.round((De.x*F.scale-F.x)*r.aj),cl[2*Ne+1]=Math.round((De.y*F.scale-F.y)*r.aj)}Ea.fill(0),ul.fill(0);for(let fe=2045;fe>=0;fe--){const ce=4*fe,ve=dc[ce+0],Ae=dc[ce+1],De=dc[ce+2],Ne=dc[ce+3],ze=ve+De>>1,ke=Ae+Ne>>1,Re=ze+ke-Ae,Ve=ke+ve-ze,We=Ae*Xs+ve,ct=Ne*Xs+De,rt=ke*Xs+ze,Et=Math.hypot((cl[2*We+0]+cl[2*ct+0])/2-cl[2*rt+0],(cl[2*We+1]+cl[2*ct+1])/2-cl[2*rt+1])>=16;Ea[rt]=Ea[rt]||(Et?1:0),fe<1022&&(Ea[rt]=Ea[rt]||Ea[(Ae+Ve>>1)*Xs+(ve+Re>>1)]||Ea[(Ne+Ve>>1)*Xs+(De+Re>>1)])}const q=new r.aZ,G=new r.a_;let J=0;function he(fe,ce){const ve=ce*Xs+fe;return ul[ve]===0&&(q.emplaceBack(cl[2*ve+0],cl[2*ve+1],fe*r.aj/Ws,ce*r.aj/Ws),ul[ve]=++J),ul[ve]-1}function le(fe,ce,ve,Ae,De,Ne){const ze=fe+ve>>1,ke=ce+Ae>>1;if(Math.abs(fe-De)+Math.abs(ce-Ne)>1&&Ea[ke*Xs+ze])le(De,Ne,fe,ce,ze,ke),le(ve,Ae,De,Ne,ze,ke);else{const Re=he(fe,ce),Ve=he(ve,Ae),We=he(De,Ne);G.emplaceBack(Re,Ve,We)}}return le(0,0,Ws,Ws,Ws,0),le(Ws,Ws,0,0,0,Ws),{vertices:q,indices:G}}(this.tileID.canonical,c);b=C.vertices,w=C.indices}else{b=new r.aZ,w=new r.a_;for(const{x:I,y:L}of g)b.emplaceBack(I,L,0,0);const C=r.be(b.int16.subarray(0,4*b.length),void 0,4);for(let I=0;I<C.length;I+=3)w.emplaceBack(C[I],C[I+1],C[I+2])}this._tileBoundsBuffer=o.createVertexBuffer(b,r.bf.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(w),this._tileBoundsSegments=r.bd.simpleSegment(0,0,b.length,w.length)}_makeGlobeTileDebugBuffers(o,c){const g=c.projection;if(!g||g.name!=="globe"||c.freezeTileCoverage)return;const b=this.tileID.canonical,w=r.bg(b,c),C=r.bh(w),I=r.ah(c.zoom);let L;I>0&&(L=r.bi(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,b,c,C,L,I),this._makeGlobeTileDebugTextBuffer(o,b,c,C,L,I)}_globePoint(o,c,g,b,w,C,I){let L=r.bj(o,c,g);if(C){const F=1<<g.z,V=r.ay(b.center.lng),q=r.aH(b.center.lat),G=(g.x+.5)/F-V;let J=0;G>.5?J=-1:G<-.5&&(J=1);let he=(o/r.aj+g.x)/F+J,le=(c/r.aj+g.y)/F;he=(he-V)*b._pixelsPerMercatorPixel+V,le=(le-q)*b._pixelsPerMercatorPixel+q;const fe=[he*b.worldSize,le*b.worldSize,0];r.ad(fe,fe,C),L=r.bk(L,fe,I)}return r.ad(L,L,w)}_makeGlobeTileDebugBorderBuffer(o,c,g,b,w,C){const I=new r.ba,L=new r.bb,F=new r.bl,V=(G,J,he,le,fe)=>{const ce=(he-G)/(fe-1),ve=(le-J)/(fe-1),Ae=I.length;for(let De=0;De<fe;De++){const Ne=G+De*ce,ze=J+De*ve;I.emplaceBack(Ne,ze);const ke=this._globePoint(Ne,ze,c,g,b,w,C);F.emplaceBack(ke[0],ke[1],ke[2]),L.emplaceBack(Ae+De)}},q=r.aj;V(0,0,q,0,16),V(q,0,q,q,16),V(q,q,0,q,16),V(0,q,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(L),this._tileDebugBuffer=o.createVertexBuffer(I,r.bc.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(F,r.bm.members),this._tileDebugSegments=r.bd.simpleSegment(0,0,I.length,L.length)}_makeGlobeTileDebugTextBuffer(o,c,g,b,w,C){const I=r.aj/4,L=new r.ba,F=new r.a_,V=new r.bl,q=25;F.reserve(32),L.reserve(q),V.reserve(q);const G=(J,he)=>q*J+he;for(let J=0;J<q;J++){const he=J*I;for(let le=0;le<q;le++){const fe=le*I;L.emplaceBack(fe,he);const ce=this._globePoint(fe,he,c,g,b,w,C);V.emplaceBack(ce[0],ce[1],ce[2])}}for(let J=0;J<4;J++)for(let he=0;he<4;he++){const le=G(J,he),fe=G(J,he+1),ce=G(J+1,he),ve=G(J+1,he+1);F.emplaceBack(le,fe,ce),F.emplaceBack(ce,fe,ve)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(F),this._tileDebugTextBuffer=o.createVertexBuffer(L,r.bc.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(V,r.bm.members),this._tileDebugTextSegments=r.bd.simpleSegment(0,0,q,32)}destroy(o=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof r.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}r.bp.setPbf(r.bq);class np extends Fl{constructor(o,c,g,b,w){super(o,c,g,b,w),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,c){const g=c.context,b=g.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof r.T?this.texture.update(o,{premultiply:!1}):this.texture=new r.T(g,o,b.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,c){const g=this._mrt=new r.bp(30),b=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=r.br(b,(w,C,I,L)=>{if(w)c(w);else try{const F=g.getHeaderLength(C);if(F>o)return void(this.request=this.fetchHeader(F,c));g.parseHeader(C),this._isHeaderLoaded=!0;let V=0;for(const q of Object.values(g.layers))V=Math.max(V,q.dataIndex[q.dataIndex.length-1].lastByte);C.byteLength>=V&&(this.entireBuffer=C),c(null,this.entireBuffer||C,I,L)}catch(F){c(F)}}),this.request}fetchBand(o,c,g){const b=this._mrt;if(!this._isHeaderLoaded||!b)return void g(new Error("Tile header is not ready"));const w=this.actor;if(!w)return void g(new Error("Can't fetch tile band without an actor"));let C;const I=(q,G)=>{C.complete(q,G),q?g(q):(this.updateTextureDescriptor(o,c),g(null,this.textureDescriptor&&this.textureDescriptor.img))},L=(q,G)=>{if(q)return g(q);const J=w.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:G,task:C},I,void 0,!0);this._workQueue.push(()=>{J&&J.cancel(),C.cancel()})},F=b.getLayer(o);if(!F)return void g(new Error(`Unknown sourceLayer "${o}"`));if(F.hasDataForBand(c))return this.updateTextureDescriptor(o,c),void g(null,this.textureDescriptor?this.textureDescriptor.img:null);const V=F.getDataRange([c]);if(C=b.createDecodingTask(V),!C||C.tasks.length)if(this.flushQueues(),this.entireBuffer)L(null,this.entireBuffer.slice(V.firstByte,V.lastByte+1));else{const q=Object.assign({},this.requestParams,{headers:{Range:`bytes=${V.firstByte}-${V.lastByte}`}}),G=r.br(q,L);this._fetchQueue.push(()=>{G.cancel(),C.cancel()})}else g(null)}updateNeeded(o,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,c){if(!this._mrt)return;const g=this._mrt.getLayer(o);if(!g||!g.hasBand(c)||!g.hasDataForBand(c))return;const{bytes:b,tileSize:w,buffer:C,offset:I,scale:L}=g.getBandView(c),F=w+2*C,V=new r.r({width:F,height:F},b),q=this.texture;q&&q instanceof r.T&&q.update(V,{premultiply:!1}),this.textureDescriptor={layer:o,band:c,img:V,buffer:C,offset:I,tileSize:w,format:g.pixelFormat,mix:[L,256*L,65536*L,16777216*L]}}}class sy{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(const o in this.data)for(const c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,g){const b=o.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const w={value:c,timeout:void 0};if(g!==void 0&&(w.timeout=setTimeout(()=>{this.remove(o,w)},g)),this.data[b].push(w),this.order.push(b),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){const c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;const g=o.wrapped().key,b=c===void 0?0:this.data[g].indexOf(c),w=this.data[g][b];return this.data[g].splice(b,1),w.timeout&&clearTimeout(w.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(w.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){const c=[];for(const g in this.data)for(const b of this.data[g])o(b.value)||c.push(b);for(const g of c)this.remove(g.value.tileID,g)}}class Cu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,g){const b=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][b]=this.stateChanges[o][b]||{},r.l(this.stateChanges[o][b],g),this.deletedStates[o]===null){this.deletedStates[o]={};for(const w in this.state[o])w!==b&&(this.deletedStates[o][w]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][b]===null){this.deletedStates[o][b]={};for(const w in this.state[o][b])g[w]||(this.deletedStates[o][b][w]=null)}else for(const w in g)this.deletedStates[o]&&this.deletedStates[o][b]&&this.deletedStates[o][b][w]===null&&delete this.deletedStates[o][b][w]}removeFeatureState(o,c,g){if(this.deletedStates[o]===null)return;const b=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},g&&c!==void 0)this.deletedStates[o][b]!==null&&(this.deletedStates[o][b]=this.deletedStates[o][b]||{},this.deletedStates[o][b][g]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][b])for(g in this.deletedStates[o][b]={},this.stateChanges[o][b])this.deletedStates[o][b][g]=null;else this.deletedStates[o][b]=null;else this.deletedStates[o]=null}getState(o,c){const g=this.state[o]||{},b=this.stateChanges[o]||{},w=this.deletedStates[o];if(w===null)return{};if(c!==void 0){const I=String(c),L=r.l({},g[I],b[I]);if(w){const F=w[c];if(F===null)return{};for(const V in F)delete L[V]}return L}const C=r.l({},g,b);if(w)for(const I in w)delete C[I];return C}initializeTileState(o,c){o.refreshFeatureState(c)}coalesceChanges(o,c){const g={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const w={};for(const C in this.stateChanges[b])this.state[b][C]||(this.state[b][C]={}),r.l(this.state[b][C],this.stateChanges[b][C]),w[C]=this.state[b][C];g[b]=w}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const w={};if(this.deletedStates[b]===null)for(const C in this.state[b])w[C]={},this.state[b][C]={};else for(const C in this.deletedStates[b]){if(this.deletedStates[b][C]===null)this.state[b][C]={};else if(this.state[b][C])for(const I of Object.keys(this.deletedStates[b][C]))delete this.state[b][C][I];w[C]=this.state[b][C]}g[b]=g[b]||{},r.l(g[b],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const b in o)o[b].refreshFeatureState(c)}}class bs extends r.E{constructor(o,c,g){super(),this.id=o,this._onlySymbols=g,c.on("data",b=>{b.dataType==="source"&&b.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new sy(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Cu,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,c){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,c)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const g=this._tiles[c];g.upload(o),g.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Gd).map(o=>o.key)}getRenderableIds(o,c){const g=[];for(const b in this._tiles)this._isIdRenderable(+b,o,c)&&g.push(this._tiles[b]);return o?g.sort((b,w)=>{const C=b.tileID,I=w.tileID,L=new r.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),F=new r.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-I.overscaledZ||F.y-L.y||F.x-L.x}).map(b=>b.tileID.key):g.map(b=>b.tileID).sort(Gd).map(b=>b.key)}hasRenderableParent(o){const c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c,g){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())&&(g||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,c){const g=this._tiles[o];g&&(g.state!=="loading"&&(g.state=c),this._loadTile(g,this._tileLoaded.bind(this,g,o,c)))}_tileLoaded(o,c,g,b){if(b)if(o.state="errored",b.status!==404)this._source.fire(new r.z(b,{tile:o}));else{if(this._source.fire(new r.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const w=this.map.painter.terrain;this.update(this.transform,w.getScaledDemTileSize(),!0),w.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=r.q.now(),g==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new r.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const c=this.getRenderableIds();for(let b=0;b<c.length;b++){const w=c[b];if(o.neighboringTiles&&o.neighboringTiles[w]){const C=this.getTileByID(w);g(o,C),g(C,o)}}function g(b,w){if(!b.dem||b.dem.borderReady)return;b.needsHillshadePrepare=!0,b.needsDEMTextureUpload=!0;let C=w.tileID.canonical.x-b.tileID.canonical.x;const I=w.tileID.canonical.y-b.tileID.canonical.y,L=Math.pow(2,b.tileID.canonical.z),F=w.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+L)===1?C+=L:Math.abs(C-L)===1&&(C-=L)),w.dem&&b.dem&&(b.dem.backfillBorder(w.dem,C,I),b.neighboringTiles&&b.neighboringTiles[F]&&(b.neighboringTiles[F].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,g,b){for(const w in this._tiles){let C=this._tiles[w];if(b[w]||!C.hasData()||C.tileID.overscaledZ<=c||C.tileID.overscaledZ>g)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>c+1;){const F=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[F.key],C&&C.hasData()&&(I=F)}let L=I;for(;L.overscaledZ>c;)if(L=L.scaledTo(L.overscaledZ-1),o[L.key]){b[I.key]=I;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){const g=this._loadedParentTiles[o.key];return g&&g.tileID.overscaledZ>=c?g:null}for(let g=o.overscaledZ-1;g>=c;g--){const b=o.scaledTo(g),w=this._getLoadedTile(b);if(w)return w}}_getLoadedTile(o){const c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,c){c=c||this._source.tileSize;const g=Math.ceil(o.width/c)+1,b=Math.ceil(o.height/c)+1,w=Math.floor(g*b*5),C=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,w):w,I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(I)}handleWrapJump(o){const c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){const g={};for(const b in this._tiles){const w=this._tiles[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+c),g[w.tileID.key]=w}this._tiles=g;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(+b,this._tiles[b])}}update(o,c,g,b,w){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!g)return;this.updateCacheSize(o,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const C=this._source.type==="batched-model";let I,L=this._source.maxzoom;const F=this.map&&this.map.painter?this.map.painter._terrain:null;if(F&&F.sourceCache===this&&F.attenuationRange()){const G=F.attenuationRange()[0],J=Math.floor(G)-Math.log2(F.getDemUpscale());L>J&&(L=J)}if(this.used||this.usedForTerrain){if(this._source.tileID)I=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new r.aM(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y));else if(this.tileCoverLift!==0){const G=o.clone();G.tileCoverLift=this.tileCoverLift,I=G.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.minzoom<=1&&o.projection.name==="globe"&&(I.push(new r.aM(1,0,1,0,0)),I.push(new r.aM(1,0,1,1,0)),I.push(new r.aM(1,0,1,0,1)),I.push(new r.aM(1,0,1,1,1)))}else if(I=o.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.hasTile){const G=this._source.hasTile.bind(this._source);I=I.filter(J=>G(J))}}else I=[];if(I.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!zc(this._source.type)){const G=o.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!g}),J=Math.min(G,this._source.maxzoom);if(C){const he=o.extendTileCover(I,J);for(const le of he)I.push(le)}else if(w){const he=o.extendTileCover(I,J,this.transform._camera.forward());for(const le of he)I.push(le)}else if(this.castsShadows&&b){const he=o.extendTileCover(I,J,b);for(const le of he)this._shadowCasterTiles[le.key]=!0,I.push(le)}}const V=this._updateRetainedTiles(I);if(zc(this._source.type)&&I.length!==0){const G={},J={},he=Object.keys(V);for(const fe of he){const ce=V[fe],ve=this._tiles[fe];if(!ve||ve.fadeEndTime&&ve.fadeEndTime<=r.q.now())continue;const Ae=this.findLoadedParent(ce,Math.max(ce.overscaledZ-bs.maxOverzooming,this._source.minzoom));Ae&&(this._addTile(Ae.tileID),G[Ae.tileID.key]=Ae.tileID),J[fe]=ce}const le=I[I.length-1].overscaledZ;for(const fe in this._tiles){const ce=this._tiles[fe];if(V[fe]||!ce.hasData())continue;let ve=ce.tileID;for(;ve.overscaledZ>le;){ve=ve.scaledTo(ve.overscaledZ-1);const Ae=this._tiles[ve.key];if(Ae&&Ae.hasData()&&J[ve.key]){V[fe]=ce.tileID;break}}}for(const fe in G)V[fe]||(this._coveredTiles[fe]=!0,V[fe]=G[fe])}for(const G in V)this._tiles[G].clearFadeHold();const q=r.bs(this._tiles,V);for(const G of q){const J=this._tiles[G];J.hasSymbolBuckets&&!J.holdingForFade()?J.setHoldDuration(this.map._fadeDuration):J.hasSymbolBuckets&&!J.symbolFadeFinished()||this._removeTile(+G)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const c={};if(o.length===0)return c;const g={},b=o.reduce((F,V)=>Math.min(F,V.overscaledZ),1/0),w=o[0].overscaledZ,C=Math.max(w-bs.maxOverzooming,this._source.minzoom),I=Math.max(w+bs.maxUnderzooming,this._source.minzoom),L={};for(const F of o){const V=this._addTile(F);c[F.key]=F,V.hasData()||b<this._source.maxzoom&&(L[F.key]=F)}this._retainLoadedChildren(L,b,I,c);for(const F of o){let V=this._tiles[F.key];if(V.hasData())continue;if(F.canonical.z>=this._source.maxzoom){const G=F.children(this._source.maxzoom)[0],J=this.getTile(G);if(J&&J.hasData()){c[G.key]=G;continue}}else{const G=F.children(this._source.maxzoom);if(c[G[0].key]&&c[G[1].key]&&c[G[2].key]&&c[G[3].key])continue}let q=V.wasRequested();for(let G=F.overscaledZ-1;G>=C;--G){const J=F.scaledTo(G);if(g[J.key]||(g[J.key]=!0,V=this.getTile(J),!V&&q&&(V=this._addTile(J)),V&&(c[J.key]=J,q=V.wasRequested(),V.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const c=[];let g,b=this._tiles[o].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}c.push(b.key);const w=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(w),g)break;b=w}for(const w of c)this._loadedParentTiles[w]=g}}_addTile(o){let c=this._tiles[o.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));const g=!!c;if(!g){const b=this.map?this.map.painter:null,w=this._source.tileSize*o.overscaleFactor();c=this._source.type==="raster-array"?new np(o,w,this.transform.tileZoom,b,this._isRaster):new Fl(o,w,this.transform.tileZoom,b,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))}return c.uses++,this._tiles[o.key]=c,g||this._source.fire(new r.A("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const g=c.getExpiryTimeout();g&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},g))}_removeTile(o){const c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,c,g){const b=[],w=this.transform;if(!w)return b;const C=w.projection.name==="globe",I=r.ay(w.center.lng);for(const L in this._tiles){const F=this._tiles[L];if(g&&F.clearQueryDebugViz(),F.holdingForFade())continue;let V;if(C){const q=F.tileID.canonical;if(q.z===0){const G=[Math.abs(r.aD(I,...Nl(q,-1))-I),Math.abs(r.aD(I,...Nl(q,1))-I)];V=[0,2*G.indexOf(Math.min(...G))-1]}else{const G=[Math.abs(r.aD(I,...Nl(q,-1))-I),Math.abs(r.aD(I,...Nl(q,0))-I),Math.abs(r.aD(I,...Nl(q,1))-I)];V=[G.indexOf(Math.min(...G))-1]}}else V=[0];for(const q of V){const G=o.containsTile(F,w,c,q);G&&b.push(G)}}return b}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,c){const g=this.getRenderableIds(o,c).map(w=>this._tiles[w].tileID),b=this.transform.projection.name==="globe";for(const w of g)w.projMatrix=this.transform.calculateProjMatrix(w.toUnwrapped()),w.expandedProjMatrix=b?this.transform.calculateProjMatrix(w.toUnwrapped(),!1,!0):w.projMatrix;return g}sortCoordinatesByDistance(o){const c=o.slice(),g=this.transform._camera.position,b=this.transform._camera.forward(),w={};for(const C of c){const I=1/(1<<C.canonical.z);w[C.key]=((C.canonical.x+.5)*I+C.wrap-g[0])*b[0]+((C.canonical.y+.5)*I-g[1])*b[1]-g[2]*b[2]}return c.sort((C,I)=>w[C.key]-w[I.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(zc(this._source.type))for(const o in this._tiles){const c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=r.q.now())return!0}return!1}setFeatureState(o,c,g){this._state.updateState(o=o||"_geojsonTileLayer",c,g)}removeFeatureState(o,c,g){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,g)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,g){const b=this._tiles[o];b&&b.setDependencies(c,g)}reloadTilesForDependencies(o,c){for(const g in this._tiles)this._tiles[g].hasDependency(o,c)&&this._reloadTile(+g,"reloading");this._cache.filter(g=>!g.hasDependency(o,c))}_preloadTiles(o,c){if(!this._sourceLoaded){const L=()=>{this._sourceLoaded&&(this._source.off("data",L),this._preloadTiles(o,c))};return void this._source.on("data",L)}const g=new Map,b=Array.isArray(o)?o:[o],w=this.map.painter.terrain,C=this.usedForTerrain&&w?w.getScaledDemTileSize():this._source.tileSize;for(const L of b){const F=L.coveringTiles({tileSize:C,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const V of F)g.set(V.key,V);this.usedForTerrain&&L.updateElevation(!1)}const I=Array.from(g.values());r.bt(I,(L,F)=>{const V=new Fl(L,this._source.tileSize*L.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(V,q=>{this._source.type==="raster-dem"&&V.dem&&this._backfillDEM(V),F(q,V)})},c)}}function Gd(m,o){const c=Math.abs(2*m.wrap)-+(m.wrap<0),g=Math.abs(2*o.wrap)-+(o.wrap<0);return m.overscaledZ-o.overscaledZ||g-c||o.canonical.y-m.canonical.y||o.canonical.x-m.canonical.x}function zc(m){return m==="raster"||m==="image"||m==="video"||m==="custom"}function Nl(m,o){const c=1<<m.z;return[m.x/c+o,(m.x+1)/c+o]}bs.maxOverzooming=10,bs.maxUnderzooming=3;class ay{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,c=!1;for(const g in this.style._mergedLayers){const b=this.style._mergedLayers[g];if(b.type==="fill-extrusion")this.layers.push({layer:b,visible:o,visibilityChanged:c});else if(b.type==="model"){const w=this.style.getLayerSource(b);w&&w.type==="batched-model"&&this.layers.push({layer:b,visible:o,visibilityChanged:c})}}}onNewFrame(o){this.layersGotHidden=!1;for(const c of this.layers){const g=c.layer;let b=!1;g.type==="fill-extrusion"?b=!g.isHidden(o)&&g.paint.get("fill-extrusion-opacity")>0:g.type==="model"&&(b=!g.isHidden(o)&&g.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!b&&c.visible,c.visible=b}}updateZOffset(o,c){this.currentBuildingBuckets=[];for(const b of this.layers){const w=b.layer,C=this.style.getLayerSourceCache(w);let I=1;w.type==="fill-extrusion"&&(I=b.visible?w.paint.get("fill-extrusion-vertical-scale"):0);let L=C?C.getTile(c):null;if(!L&&C&&c.canonical.z>C.getSource().minzoom){let F=c.scaledTo(Math.min(C.getSource().maxzoom,c.overscaledZ-1));for(;F.overscaledZ>=C.getSource().minzoom&&(L=C.getTile(F),!L&&F.overscaledZ!==0);)F=F.scaledTo(F.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:L?L.getBucket(w):null,tileID:L?L.tileID:c,verticalScale:I})}o.hasAnyZOffset=!1;let g=!1;for(let b=0;b<o.symbolInstances.length;b++){const w=o.symbolInstances.get(b),C=w.zOffset,I=this._getHeightAtTileOffset(c,w.tileAnchorX,w.tileAnchorY);w.zOffset=I!==Number.NEGATIVE_INFINITY?I:C,g||C===w.zOffset||(g=!0),o.hasAnyZOffset||w.zOffset===0||(o.hasAnyZOffset=!0)}g&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,c,g,b){let w=c,C=g;if(o.canonical.z!==b.canonical.z){const I=b.canonical,L=1/(1<<o.canonical.z-I.z);w=(c+o.canonical.x*r.aj)*L-I.x*r.aj|0,C=(g+o.canonical.y*r.aj)*L-I.y*r.aj|0}return{tileX:w,tileY:C}}_getHeightAtTileOffset(o,c,g){let b,w;for(let C=0;C<this.layers.length;++C){if(this.layers[C].layer.type!=="fill-extrusion")continue;const{bucket:I,tileID:L,verticalScale:F}=this.currentBuildingBuckets[C];if(!I)continue;const{tileX:V,tileY:q}=this._mapCoordToOverlappingTile(o,c,g,L),G=I.getHeightAtTileCoord(V,q);G&&G.height!==void 0&&(G.hidden?b=G.height:w=Math.max(G.height*F,w||0))}if(w!==void 0)return w;for(let C=0;C<this.layers.length;++C){const I=this.layers[C];if(I.layer.type!=="model"||!I.visible)continue;const{bucket:L,tileID:F}=this.currentBuildingBuckets[C];if(!L)continue;const{tileX:V,tileY:q}=this._mapCoordToOverlappingTile(o,c,g,F),G=L.getHeightAtTileCoord(V,q);if(G&&!G.hidden)return G.height===void 0&&b!==void 0?Math.min(G.maxHeight,b)*G.verticalScale:G.height?G.height*G.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function qd(m,o){const c={};for(const g in m)g!=="ref"&&(c[g]=m[g]);return r.bu.forEach(g=>{g in o&&(c[g]=o[g])}),c}function ip(m){m=m.slice();const o=Object.create(null);for(let c=0;c<m.length;c++)o[m[c].id]=m[c];for(let c=0;c<m.length;c++)"ref"in m[c]&&(m[c]=qd(m[c],o[m[c].ref]));return m}const ji={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function Ca(m,o,c){c.push({command:ji.addSource,args:[m,o[m]]})}function Au(m,o,c){o.push({command:ji.removeSource,args:[m]}),c[m]=!0}function rp(m,o,c,g){Au(m,c,g),Ca(m,o,c)}function Bc(m,o,c){let g;for(g in m[c])if(m[c].hasOwnProperty(g)&&g!=="data"&&!r.bv(m[c][g],o[c][g]))return!1;for(g in o[c])if(o[c].hasOwnProperty(g)&&g!=="data"&&!r.bv(m[c][g],o[c][g]))return!1;return!0}function Fc(m,o,c,g,b,w){let C;for(C in o=o||{},m=m||{})m.hasOwnProperty(C)&&(r.bv(m[C],o[C])||c.push({command:w,args:[g,C,o[C],b]}));for(C in o)o.hasOwnProperty(C)&&!m.hasOwnProperty(C)&&(r.bv(m[C],o[C])||c.push({command:w,args:[g,C,o[C],b]}))}function jl(m){return m.id}function Ih(m,o){return m[o.id]=o,m}class op{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=r.aD(o,0,1);let c=1,g=this._distances[c];const b=o*this.paddedLength+this.padding;for(;g<b&&c<this._distances.length;)g=this._distances[++c];const w=c-1,C=this._distances[w],I=g-C,L=I>0?(b-C)/I:0;return this.points[w].mult(1-L).add(this.points[c].mult(L))}}class Wd{constructor(o,c,g){const b=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(o/g),this.yCellCount=Math.ceil(c/g);for(let C=0;C<this.xCellCount*this.yCellCount;C++)b.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,g,b,w){this._forEachCell(c,g,b,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(w)}insertCircle(o,c,g,b){this._forEachCell(c-b,g-b,c+b,g+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(g),this.circles.push(b)}_insertBoxCell(o,c,g,b,w,C){this.boxCells[w].push(C)}_insertCircleCell(o,c,g,b,w,C){this.circleCells[w].push(C)}_query(o,c,g,b,w,C){if(g<0||o>this.width||b<0||c>this.height)return!w&&[];const I=[];if(o<=0&&c<=0&&this.width<=g&&this.height<=b){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)I.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const F=this.circles[3*L],V=this.circles[3*L+1],q=this.circles[3*L+2];I.push({key:this.circleKeys[L],x1:F-q,y1:V-q,x2:F+q,y2:V+q})}return C?I.filter(C):I}return this._forEachCell(o,c,g,b,this._queryCell,I,{hitTest:w,seenUids:{box:{},circle:{}}},C),w?I.length>0:I}_queryCircle(o,c,g,b,w){const C=o-g,I=o+g,L=c-g,F=c+g;if(I<0||C>this.width||F<0||L>this.height)return!b&&[];const V=[];return this._forEachCell(C,L,I,F,this._queryCellCircle,V,{hitTest:b,circle:{x:o,y:c,radius:g},seenUids:{box:{},circle:{}}},w),b?V.length>0:V}query(o,c,g,b,w){return this._query(o,c,g,b,!1,w)}hitTest(o,c,g,b,w){return this._query(o,c,g,b,!0,w)}hitTestCircle(o,c,g,b){return this._queryCircle(o,c,g,!0,b)}_queryCell(o,c,g,b,w,C,I,L){const F=I.seenUids,V=this.boxCells[w];if(V!==null){const G=this.bboxes;for(const J of V)if(!F.box[J]){F.box[J]=!0;const he=4*J;if(o<=G[he+2]&&c<=G[he+3]&&g>=G[he+0]&&b>=G[he+1]&&(!L||L(this.boxKeys[J]))){if(I.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[J],x1:G[he],y1:G[he+1],x2:G[he+2],y2:G[he+3]})}}}const q=this.circleCells[w];if(q!==null){const G=this.circles;for(const J of q)if(!F.circle[J]){F.circle[J]=!0;const he=3*J;if(this._circleAndRectCollide(G[he],G[he+1],G[he+2],o,c,g,b)&&(!L||L(this.circleKeys[J]))){if(I.hitTest)return C.push(!0),!0;{const le=G[he],fe=G[he+1],ce=G[he+2];C.push({key:this.circleKeys[J],x1:le-ce,y1:fe-ce,x2:le+ce,y2:fe+ce})}}}}}_queryCellCircle(o,c,g,b,w,C,I,L){const F=I.circle,V=I.seenUids,q=this.boxCells[w];if(q!==null){const J=this.bboxes;for(const he of q)if(!V.box[he]){V.box[he]=!0;const le=4*he;if(this._circleAndRectCollide(F.x,F.y,F.radius,J[le+0],J[le+1],J[le+2],J[le+3])&&(!L||L(this.boxKeys[he])))return C.push(!0),!0}}const G=this.circleCells[w];if(G!==null){const J=this.circles;for(const he of G)if(!V.circle[he]){V.circle[he]=!0;const le=3*he;if(this._circlesCollide(J[le],J[le+1],J[le+2],F.x,F.y,F.radius)&&(!L||L(this.circleKeys[he])))return C.push(!0),!0}}}_forEachCell(o,c,g,b,w,C,I,L){const F=this._convertToXCellCoord(o),V=this._convertToYCellCoord(c),q=this._convertToXCellCoord(g),G=this._convertToYCellCoord(b);for(let J=F;J<=q;J++)for(let he=V;he<=G;he++)if(w.call(this,o,c,g,b,this.xCellCount*he+J,C,I,L))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,g,b,w,C){const I=b-o,L=w-c,F=g+C;return F*F>I*I+L*L}_circleAndRectCollide(o,c,g,b,w,C,I){const L=(C-b)/2,F=Math.abs(o-(b+L));if(F>L+g)return!1;const V=(I-w)/2,q=Math.abs(c-(w+V));if(q>V+g)return!1;if(F<=L||q<=V)return!0;const G=F-L,J=q-V;return G*G+J*J<=g*g}}const Mu={unknown:0,flipRequired:1,flipNotRequired:2},ws=Math.tan(85*Math.PI/180);function hl(m,o,c,g,b,w,C){const I=r.bz();if(c)if(w.name==="globe"){const L=r.bA(b,o);r.az(I,I,L)}else{const L=r.bB([],C);I[0]=L[0],I[1]=L[1],I[4]=L[2],I[5]=L[3],g||r.by(I,I,b.angle)}else r.az(I,b.labelPlaneMatrix,m);return I}function Ph(m,o,c,g,b,w,C){const I=hl(m,o,c,g,b,w,C);return w.name==="globe"&&c||(I[2]=I[6]=I[10]=I[14]=0),I}function Dh(m,o,c,g,b,w,C){if(c){if(w.name==="globe"){const I=hl(m,o,c,g,b,w,C);return r.bi(I,I),r.az(I,m,I),I}{const I=r.bw(m),L=r.bx([]);return L[0]=C[0],L[1]=C[1],L[4]=C[2],L[5]=C[3],r.az(I,I,L),g||r.by(I,I,-b.angle),I}}return b.glCoordMatrix}function Aa(m,o,c,g){const b=[m,o,c,1];c?r.aA(b,b,g):vv(b,b,g);const w=b[3];return b[0]/=w,b[1]/=w,b[2]/=w,b}function fc(m,o){return Math.min(.5+m/o*.5,1.5)}function sp(m,o){const c=m[0]/m[3],g=m[1]/m[3];return c>=-o[0]&&c<=o[0]&&g>=-o[1]&&g<=o[1]}function Oh(m,o,c,g,b,w,C,I,L,F){const V=c.transform,q=g?m.textSizeData:m.iconSizeData,G=r.bH(q,c.transform.zoom),J=V.projection.name==="globe",he=[256/c.width*2+1,256/c.height*2+1],le=g?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;le.clear();let fe=null;J&&(fe=g?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const ce=m.lineVertexArray,ve=g?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ae=c.transform.width/c.transform.height;let De,Ne=!1;for(let ze=0;ze<ve.length;ze++){const ke=ve.get(ze),{numGlyphs:Re,writingMode:Ve}=ke;if(Ve!==r.bI.vertical||Ne||De===r.bI.horizontal||(Ne=!0),De=Ve,(ke.hidden||Ve===r.bI.vertical)&&!Ne){ir(Re,le);continue}Ne=!1;const We=new r.P(ke.tileAnchorX,ke.tileAnchorY);let{x:ct,y:rt,z:Et}=V.projection.projectTilePoint(We.x,We.y,F.canonical);if(L){const[pn,_n,dn]=L(We);ct+=pn,rt+=_n,Et+=dn}const wt=[ct,rt,Et,1];if(r.aA(wt,wt,o),!sp(wt,he)){ir(Re,le);continue}const Vt=wt[3],nt=fc(c.transform.getCameraToCenterDistance(V.projection),Vt),ft=r.bJ(q,G,ke),Qe=C?ft/nt:ft*nt,Mt=Aa(ct,rt,Et,b);if(Mt[3]<=0){ir(Re,le);continue}let pt={};const Ot=r.al(m.layers[0].layout.get("text-max-angle")),Ct=Math.cos(Ot),Lt=C?null:L,Nt=Ma(ke,Qe,!1,I,o,b,w,m.glyphOffsetArray,ce,le,fe,Mt,We,pt,Ae,Lt,V.projection,F,C,Ct);Ne=Nt.useVertical,Lt&&Nt.needsFlipping&&(pt={}),(Nt.notEnoughRoom||Ne||Nt.needsFlipping&&Ma(ke,Qe,!0,I,o,b,w,m.glyphOffsetArray,ce,le,fe,Mt,We,pt,Ae,Lt,V.projection,F,C,Ct).notEnoughRoom)&&ir(Re,le)}g?(m.text.dynamicLayoutVertexBuffer.updateData(le),fe&&m.text.globeExtVertexBuffer&&m.text.globeExtVertexBuffer.updateData(fe)):(m.icon.dynamicLayoutVertexBuffer.updateData(le),fe&&m.icon.globeExtVertexBuffer&&m.icon.globeExtVertexBuffer.updateData(fe))}function Lh(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe){const{lineStartIndex:ce,glyphStartIndex:ve,segment:Ae}=I,De=ve+I.numGlyphs,Ne=ce+I.lineLength,ze=o.getoffsetX(ve),ke=o.getoffsetX(De-1),Re=kh(m*ze,c,g,b,w,C,Ae,ce,Ne,L,F,V,q,G,!0,J,he,le,fe);if(!Re)return null;const Ve=kh(m*ke,c,g,b,w,C,Ae,ce,Ne,L,F,V,q,G,!0,J,he,le,fe);return Ve?{first:Re,last:Ve}:null}function Ru(m,o,c,g){return m===r.bI.horizontal&&Math.abs(g)>Math.abs(c)?{useVertical:!0}:m===r.bI.vertical?g>0?{needsFlipping:!0}:null:o!==Mu.unknown&&function(b,w){return b===0||Math.abs(w/b)>ws}(c,g)?o===Mu.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function Ma(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce,ve,Ae){const De=o/24,Ne=m.lineOffsetX*De,ze=m.lineOffsetY*De,{lineStartIndex:ke,glyphStartIndex:Re,numGlyphs:Ve,segment:We,writingMode:ct,flipState:rt}=m,Et=ke+m.lineLength,wt=Vt=>{if(V){const[Mt,pt,Ot]=Vt.up,Ct=F.length;r.bK(V,Ct+0,Mt,pt,Ot),r.bK(V,Ct+1,Mt,pt,Ot),r.bK(V,Ct+2,Mt,pt,Ot),r.bK(V,Ct+3,Mt,pt,Ot)}const[nt,ft,Qe]=Vt.point;r.bL(F,nt,ft,Qe,Vt.angle)};if(Ve>1){const Vt=Lh(De,I,Ne,ze,c,q,G,m,L,w,J,le,!1,fe,ce,ve,Ae);if(!Vt)return{notEnoughRoom:!0};if(g&&!c){let[nt,ft,Qe]=Vt.first.point,[Mt,pt,Ot]=Vt.last.point;[nt,ft]=Aa(nt,ft,Qe,C),[Mt,pt]=Aa(Mt,pt,Ot,C);const Ct=Ru(ct,rt,(Mt-nt)*he,pt-ft);if(m.flipState=Ct&&Ct.needsFlipping?Mu.flipRequired:Mu.flipNotRequired,Ct)return Ct}wt(Vt.first);for(let nt=Re+1;nt<Re+Ve-1;nt++){const ft=kh(De*I.getoffsetX(nt),Ne,ze,c,q,G,We,ke,Et,L,w,J,le,!1,!1,fe,ce,ve,Ae);if(!ft)return F.length-=4*(nt-Re),{notEnoughRoom:!0};wt(ft)}wt(Vt.last)}else{if(g&&!c){const nt=Aa(G.x,G.y,0,b),ft=ke+We+1,Qe=new r.P(L.getx(ft),L.gety(ft)),Mt=Aa(Qe.x,Qe.y,0,b),pt=Mt[3]>0?Mt:km(G,Qe,nt,1,b,void 0,fe,ce.canonical),Ot=Ru(ct,rt,(pt[0]-nt[0])*he,pt[1]-nt[1]);if(m.flipState=Ot&&Ot.needsFlipping?Mu.flipRequired:Mu.flipNotRequired,Ot)return Ot}const Vt=kh(De*I.getoffsetX(Re),Ne,ze,c,q,G,We,ke,Et,L,w,J,le,!1,!1,fe,ce,ve,Ae);if(!Vt)return{notEnoughRoom:!0};wt(Vt)}return{}}function ly(m,o,c,g,b){const{x:w,y:C,z:I}=g.projectTilePoint(m.x,m.y,o);if(!b)return Aa(w,C,I,c);const[L,F,V]=b(m);return Aa(w+L,C+F,I+V,c)}function km(m,o,c,g,b,w,C,I){const L=ly(m.sub(o)._unit()._add(m),I,b,C,w);return r.at(L,c,L),r.au(L,L),r.bF(L,c,L,g)}function kh(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce,ve){const Ae=g?m-o:m+o;let De=Ae>0?1:-1,Ne=0;g&&(De*=-1,Ne=Math.PI),De<0&&(Ne+=Math.PI);let ze=I+C+(De>0?0:1)|0,ke=b,Re=b,Ve=0,We=0;const ct=Math.abs(Ae),rt=[],Et=[];let wt=w,Vt=wt,nt=r.bC([]);const ft=()=>km(Vt,wt,Re,ct-Ve+1,V,G,le,fe.canonical);for(;Ve+We<=ct;){if(ze+=De,ze<I||ze>=L)return null;if(Re=ke,Vt=wt,rt.push(Re),J&&Et.push(Vt),wt=new r.P(F.getx(ze),F.gety(ze)),ke=q[ze],!ke){const dn=ly(wt,fe.canonical,V,le,G);ke=dn[3]>0?q[ze]=dn:ft()}Ve+=We;const pn=r.at([],ke,Re),_n=r.bD(Re,ke);if(c&&_n>0&&We>0&&r.bE(nt,pn)/(We*_n)<ve)return null;We=_n,nt=pn}he&&G&&(q[ze]&&(ke=ft(),We=r.bD(Re,ke),nt=r.at([],ke,Re)),q[ze]=ke);const Qe=(ct-Ve)/We,Mt=wt.sub(Vt)._mult(Qe)._add(Vt),pt=r.bF([],Re,nt,Qe);let Ot=[0,0,1],Ct=nt[0],Lt=nt[1];if(ce&&(Ot=le.upVector(fe.canonical,Mt.x,Mt.y),Ot[0]!==0||Ot[1]!==0||Ot[2]!==1)){const pn=[Ot[2],0,-Ot[0]],_n=r.bG([],Ot,pn);r.au(pn,pn),r.au(_n,_n),Ct=r.bE(nt,pn),Lt=r.bE(nt,_n)}if(c){const pn=r.bG([],Ot,nt);r.au(pn,pn),r.bF(pt,pt,pn,c*De)}const Nt=Ne+Math.atan2(Lt,Ct);return rt.push(pt),J&&Et.push(Mt),{point:pt,angle:Nt,path:rt,tilePath:Et,up:Ot}}function ir(m,o){const c=o.length,g=c+4*m;o.resize(g),o.float32.fill(-1/0,4*c,4*g)}function vv(m,o,c){const g=o[0],b=o[1];return m[0]=c[0]*g+c[4]*b+c[12],m[1]=c[1]*g+c[5]*b+c[13],m[3]=c[3]*g+c[7]*b+c[15],m}const jn=100;class xv{constructor(o,c,g=new Wd(o.width+200,o.height+200,25),b=new Wd(o.width+200,o.height+200,25)){this.transform=o,this.grid=g,this.ignoredGrid=b,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+jn,this.screenBottomBoundary=o.height+jn,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=c}placeCollisionBox(o,c,g,b,w,C,I,L){let F=g.projectedAnchorX,V=g.projectedAnchorY,q=g.projectedAnchorZ;const G=g.elevation,J=g.tileID,he=o.getProjection();if(G&&J){const[ze,ke,Re]=he.upVector(J.canonical,g.tileAnchorX,g.tileAnchorY),Ve=he.upVectorScale(J.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;F+=ze*G*Ve,V+=ke*G*Ve,q+=Re*G*Ve}const le=this.projectAndGetPerspectiveRatio(I,F,V,q,g.tileID,he.name==="globe"||!!G||this.transform.pitch>0,he),fe=C*le.perspectiveRatio,ce=(g.x1*c+b.x-g.padding)*fe+le.point.x,ve=(g.y1*c+b.y-g.padding)*fe+le.point.y,Ae=(g.x2*c+b.x+g.padding)*fe+le.point.x,De=(g.y2*c+b.y+g.padding)*fe+le.point.y,Ne=le.perspectiveRatio<=.55||le.occluded;return!this.isInsideGrid(ce,ve,Ae,De)||!w&&this.grid.hitTest(ce,ve,Ae,De,L)||Ne?{box:[],offscreen:!1,occluded:le.occluded}:{box:[ce,ve,Ae,De],offscreen:this.isOffscreen(ce,ve,Ae,De),occluded:!1}}placeCollisionCircles(o,c,g,b,w,C,I,L,F,V,q,G,J,he,le){const fe=[],ce=this.transform.elevation,ve=o.getProjection(),Ae=ce?ce.getAtTileOffsetFunc(le,this.transform.center.lat,this.transform.worldSize,ve):null,De=new r.P(g.tileAnchorX,g.tileAnchorY);let{x:Ne,y:ze,z:ke}=ve.projectTilePoint(De.x,De.y,le.canonical);if(Ae){const[Ot,Ct,Lt]=Ae(De);Ne+=Ot,ze+=Ct,ke+=Lt}const Re=ve.name==="globe",Ve=this.projectAndGetPerspectiveRatio(I,Ne,ze,ke,le,Re||!!ce||this.transform.pitch>0,ve),{perspectiveRatio:We}=Ve,ct=(q?C/We:C*We)/r.bO,rt=Aa(Ne,ze,ke,L),Et=g.lineOffsetX*ct,wt=g.lineOffsetY*ct,Vt=r.al(o.layers[0].layout.get("text-max-angle")),nt=Math.cos(Vt),ft=Ve.signedDistanceFromCamera>0?Lh(ct,w,Et,wt,!1,rt,De,g,b,L,{},ce&&!q?Ae:null,q&&!!ce,ve,le,q,nt):null;let Qe=!1,Mt=!1,pt=!0;if(ft&&!Ve.occluded){const Ot=.5*J*We+he,Ct=new r.P(-100,-100),Lt=new r.P(this.screenRightBoundary,this.screenBottomBoundary),Nt=new op,{first:pn,last:_n}=ft,dn=pn.path.length;let Sn=[];for(let ti=dn-1;ti>=1;ti--)Sn.push(pn.path[ti]);for(let ti=1;ti<_n.path.length;ti++)Sn.push(_n.path[ti]);const yn=2.5*Ot;F&&(Sn=Sn.map(([ti,$n,mi],Kn)=>(Ae&&!Re&&(mi=Ae(Kn<dn-1?pn.tilePath[dn-1-Kn]:_n.tilePath[Kn-dn+2])[2]),Aa(ti,$n,mi,F))),Sn.some(ti=>ti[3]<=0)&&(Sn=[]));let Gn=[];if(Sn.length>0){let ti=1/0,$n=-1/0,mi=1/0,Kn=-1/0;for(const Fn of Sn)ti=Math.min(ti,Fn[0]),mi=Math.min(mi,Fn[1]),$n=Math.max($n,Fn[0]),Kn=Math.max(Kn,Fn[1]);$n>=Ct.x&&ti<=Lt.x&&Kn>=Ct.y&&mi<=Lt.y&&(Gn=[Sn.map(Fn=>new r.P(Fn[0],Fn[1]))],(ti<Ct.x||$n>Lt.x||mi<Ct.y||Kn>Lt.y)&&(Gn=r.bM(Gn,Ct.x,Ct.y,Lt.x,Lt.y)))}for(const ti of Gn){Nt.reset(ti,.25*Ot);let $n=0;$n=Nt.length<=.5*Ot?1:Math.ceil(Nt.paddedLength/yn)+1;for(let mi=0;mi<$n;mi++){const Kn=mi/Math.max($n-1,1),Fn=Nt.lerp(Kn),Ci=Fn.x+jn,lr=Fn.y+jn;fe.push(Ci,lr,Ot,0);const ni=Ci-Ot,Ai=lr-Ot,Hi=Ci+Ot,Wi=lr+Ot;if(pt=pt&&this.isOffscreen(ni,Ai,Hi,Wi),Mt=Mt||this.isInsideGrid(ni,Ai,Hi,Wi),!c&&this.grid.hitTestCircle(Ci,lr,Ot,G)&&(Qe=!0,!V))return{circles:[],offscreen:!1,collisionDetected:Qe,occluded:!1}}}}return{circles:!V&&Qe||!Mt?[]:fe,offscreen:pt,collisionDetected:Qe,occluded:Ve.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let g=1/0,b=1/0,w=-1/0,C=-1/0;for(const V of o){const q=new r.P(V.x+jn,V.y+jn);g=Math.min(g,q.x),b=Math.min(b,q.y),w=Math.max(w,q.x),C=Math.max(C,q.y),c.push(q)}const I=this.grid.query(g,b,w,C).concat(this.ignoredGrid.query(g,b,w,C)),L={},F={};for(const V of I){const q=V.key;if(L[q.bucketInstanceId]===void 0&&(L[q.bucketInstanceId]={}),L[q.bucketInstanceId][q.featureIndex])continue;const G=[new r.P(V.x1,V.y1),new r.P(V.x2,V.y1),new r.P(V.x2,V.y2),new r.P(V.x1,V.y2)];r.bN(c,G)&&(L[q.bucketInstanceId][q.featureIndex]=!0,F[q.bucketInstanceId]===void 0&&(F[q.bucketInstanceId]=[]),F[q.bucketInstanceId].push(q.featureIndex))}return F}insertCollisionBox(o,c,g,b,w){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:b,collisionGroupID:w},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,g,b,w){const C=c?this.ignoredGrid:this.grid,I={bucketInstanceId:g,featureIndex:b,collisionGroupID:w};for(let L=0;L<o.length;L+=4)C.insertCircle(I,o[L],o[L+1],o[L+2])}projectAndGetPerspectiveRatio(o,c,g,b,w,C,I){const L=[c,g,b,1];let F=!1;b||this.transform.pitch>0?(r.aA(L,L,o),this.fogState&&w&&I.name!=="globe"&&(F=function(G,J,he,le,fe,ce){const ve=ce.calculateFogTileMatrix(fe),Ae=[J,he,le];return r.ad(Ae,Ae,ve),tn(G,r.ae(Ae),ce.pitch,ce._fov)}(this.fogState,c,g,b,w.toUnwrapped(),this.transform)>.9)):vv(L,L,o);const V=L[3];return{point:new r.P((L[0]/V+1)/2*this.transform.width+jn,(-L[1]/V+1)/2*this.transform.height+jn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(I)/V*.5,1.5),signedDistanceFromCamera:V,occluded:C&&L[2]>V||F}}isOffscreen(o,c,g,b){return g<jn||o>=this.screenRightBoundary||b<jn||c>this.screenBottomBoundary}isInsideGrid(o,c,g,b){return g>=0&&o<this.gridRightBoundary&&b>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const o=r.bx([]);return r.bo(o,o,[-100,-100,0]),o}}function zm(m,o,c){const g=o.createTileMatrix(m,m.worldSize,c.toUnwrapped());return r.az(new Float32Array(16),m.projMatrix,g)}function ap(m,o,c){if(o.projection.name===c.projection.name)return m.projMatrix;const g=c.clone();return g.setProjection(o.projection),zm(g,o.getProjection(),m)}function lp(m,o,c){return o.name===c.projection.name?m.projMatrix:zm(c,o,m)}class dl{constructor(o,c,g,b){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):b&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class zh{constructor(o,c,g,b,w,C=!1){this.text=new dl(o?o.text:null,c,g,w),this.icon=new dl(o?o.icon:null,c,b,w),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Iu{constructor(o,c,g,b=!1){this.text=o,this.icon=c,this.skipFade=g,this.clipped=b}}class An{constructor(){this.invProjMatrix=r.bz(),this.viewportMatrix=r.bz(),this.circles=[]}}class Ar{constructor(o,c,g,b,w){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=g,this.bucketIndex=b,this.tileID=w}}class gr{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:g=>g.collisionGroupID===c}}return this.collisionGroups[o]}}function ua(m,o,c,g,b){const{horizontalAlign:w,verticalAlign:C}=r.bV(m),I=-(w-.5)*o,L=-(C-.5)*c,F=r.bU(m,g);return new r.P(I+F[0]*b,L+F[1]*b)}function Nc(m,o,c,g,b){const w=new r.P(m,o);return c&&w._rotate(g?b:-b),w}class dr{constructor(o,c,g,b,w,C){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new xv(this.transform,w),this.buildingIndex=C,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new gr(g),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,c,g,b,w=1){const C=g.getBucket(c),I=g.latestFeatureIndex;if(!C||!I||c.fqid!==C.layerIds[0])return;const L=C.layers[0].layout,F=C.layers[0].paint,V=g.collisionBoxArray,q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),G=g.tileSize/r.aj,J=g.tileID.toUnwrapped();this.transform.setProjection(C.projection);const he=(le=g.tileID,fe=C.getProjection(),ce=this.transform,fe.name===this.projection?ce.calculateProjMatrix(le.toUnwrapped()):zm(ce,fe,le));var le,fe,ce;const ve=L.get("text-pitch-alignment")==="map",Ae=L.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const De=c.dynamicFilter(),Ne=c.dynamicFilterNeedsFeature(),ze=this.transform.calculatePixelsToTileUnitsMatrix(g),ke=Ph(he,g.tileID.canonical,ve,Ae,this.transform,C.getProjection(),ze);let Re=null;if(ve){const ft=Dh(he,g.tileID.canonical,ve,Ae,this.transform,C.getProjection(),ze);Re=r.az([],this.transform.labelPlaneMatrix,ft)}let Ve=null;De&&g.latestFeatureIndex&&(Ve={unwrappedTileID:J,dynamicFilter:De,dynamicFilterNeedsFeature:Ne}),this.retainedQueryData[C.bucketInstanceId]=new Ar(C.bucketInstanceId,I,C.sourceLayerIndex,C.index,g.tileID);const[We,ct]=C.layers[0].layout.get("text-size-scale-range"),rt=r.aD(w,We,ct),[Et,wt]=L.get("icon-size-scale-range"),Vt=r.aD(w,Et,wt),nt={bucket:C,layout:L,paint:F,posMatrix:he,textLabelPlaneMatrix:ke,labelToScreenMatrix:Re,clippingData:Ve,scale:q,textPixelRatio:G,holdingForFade:g.holdingForFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:r.bH(C.textSizeData,this.transform.zoom,rt),partiallyEvaluatedIconSize:r.bH(C.iconSizeData,this.transform.zoom,Vt),collisionGroup:this.collisionGroups.get(C.sourceID),latestFeatureIndex:g.latestFeatureIndex};if(b)for(const ft of C.sortKeyRanges){const{sortKey:Qe,symbolInstanceStart:Mt,symbolInstanceEnd:pt}=ft;o.push({sortKey:Qe,symbolInstanceStart:Mt,symbolInstanceEnd:pt,parameters:nt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:nt})}attemptAnchorPlacement(o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce,ve){const{textOffset0:Ae,textOffset1:De,crossTileID:Ne}=G,ze=[Ae,De],ke=ua(o,g,b,ze,w),Re=this.collisionIndex.placeCollisionBox(he,w,c,Nc(ke.x,ke.y,C,I,this.transform.angle),q,L,F,V.predicate);if(fe){const Ve=he.getSymbolInstanceIconSize(ve,this.transform.zoom,G.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(he,Ve,fe,Nc(ke.x,ke.y,C,I,this.transform.angle),q,L,F,V.predicate).box.length===0)return}if(Re.box.length>0){let Ve;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ne]&&this.prevPlacement.placements[Ne]&&this.prevPlacement.placements[Ne].text&&(Ve=this.prevPlacement.variableOffsets[Ne].anchor),this.variableOffsets[Ne]={textOffset:ze,width:g,height:b,anchor:o,textScale:w,prevAnchor:Ve},this.markUsedJustification(he,o,G,le),he.allowVerticalPlacement&&(this.markUsedOrientation(he,le,G),this.placedOrientations[Ne]=le),{shift:ke,placedGlyphBoxes:Re}}}placeLayerBucketPart(o,c,g,b,w=1){const{bucket:C,layout:I,paint:L,posMatrix:F,textLabelPlaneMatrix:V,labelToScreenMatrix:q,clippingData:G,textPixelRatio:J,holdingForFade:he,collisionBoxArray:le,partiallyEvaluatedTextSize:fe,partiallyEvaluatedIconSize:ce,collisionGroup:ve,latestFeatureIndex:Ae}=o.parameters,De=I.get("text-optional"),Ne=I.get("icon-optional"),ze=I.get("text-allow-overlap"),ke=I.get("icon-allow-overlap"),Re=I.get("text-rotation-alignment")==="map",Ve=I.get("text-pitch-alignment")==="map",We=L.get("symbol-z-offset"),ct=I.get("symbol-elevation-reference")==="sea",[rt,Et]=I.get("text-size-scale-range"),[wt,Vt]=I.get("icon-size-scale-range"),nt=r.aD(w,rt,Et),ft=r.aD(w,wt,Vt);this.transform.setProjection(C.projection);let Qe=ze&&(ke||!C.hasIconData()||Ne),Mt=ke&&(ze||!C.hasTextData()||De);const pt=!We.isConstant();!C.collisionArrays&&le&&C.deserializeCollisionBoxes(le),g&&b&&C.updateCollisionDebugBuffers(this.transform.zoom,le,nt,ft);const Ot=(Ct,Lt,Nt)=>{const{crossTileID:pn,numVerticalGlyphVertices:_n}=Ct;let dn=null;if(G&&G.dynamicFilterNeedsFeature||pt){const Fi=this.retainedQueryData[C.bucketInstanceId];dn=Ae.loadFeature({featureIndex:Ct.featureIndex,bucketIndex:Fi.bucketIndex,sourceLayerIndex:Fi.sourceLayerIndex,layoutVertexArrayOffset:0})}if(G&&!(0,G.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},dn,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new r.P(Ct.tileAnchorX,Ct.tileAnchorY),this.transform.calculateDistanceTileData(G.unwrappedTileID)))return this.placements[pn]=new Iu(!1,!1,!1,!0),void c.add(pn);const Sn=We.evaluate(dn,{});if(c.has(pn))return;if(he)return void(this.placements[pn]=new Iu(!1,!1,!1));let yn=!1,Gn=!1,ti=!0,$n=!1,mi=!1,Kn=null,Fn={box:null,offscreen:null,occluded:null},Ci={box:null},lr=null,ni=null,Ai=null,Hi=0,Wi=0,cr=0;Nt.textFeatureIndex?Hi=Nt.textFeatureIndex:Ct.useRuntimeCollisionCircles&&(Hi=Ct.featureIndex),Nt.verticalTextFeatureIndex&&(Wi=Nt.verticalTextFeatureIndex);const Nr=Fi=>{Fi.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const Zi=this.transform.elevation;Fi.elevation=ct?Sn:Sn+(Zi?Zi.getAtTileOffset(Fi.tileID,Fi.tileAnchorX,Fi.tileAnchorY):0),Fi.elevation+=Ct.zOffset},fo=Nt.textBox;if(fo){Nr(fo);const Fi=Yi=>{let Ur=r.bI.horizontal;if(C.allowVerticalPlacement&&!Yi&&this.prevPlacement){const Vo=this.prevPlacement.placedOrientations[pn];Vo&&(this.placedOrientations[pn]=Vo,Ur=Vo,this.markUsedOrientation(C,Ur,Ct))}return Ur},Zi=(Yi,Ur)=>{if(C.allowVerticalPlacement&&_n>0&&Nt.verticalTextBox){for(const Vo of C.writingModes)if(Vo===r.bI.vertical?(Fn=Ur(),Ci=Fn):Fn=Yi(),Fn&&Fn.box&&Fn.box.length)break}else Fn=Yi()};if(I.get("text-variable-anchor")){let Yi=I.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[pn]){const Rr=this.prevPlacement.variableOffsets[pn];Yi.indexOf(Rr.anchor)>0&&(Yi=Yi.filter(Ao=>Ao!==Rr.anchor),Yi.unshift(Rr.anchor))}const Ur=(Rr,Ao,br)=>{const Po=C.getSymbolInstanceTextSize(fe,Ct,this.transform.zoom,Lt),ta=(Rr.x2-Rr.x1)*Po+2*Rr.padding,Ba=(Rr.y2-Rr.y1)*Po+2*Rr.padding,na=Ct.hasIconTextFit&&!ke?Ao:null;na&&Nr(na);let Fa={box:[],offscreen:!1,occluded:!1};const ic=ze?2*Yi.length:Yi.length;for(let Na=0;Na<ic;++Na){const tl=this.attemptAnchorPlacement(Yi[Na%Yi.length],Rr,ta,Ba,Po,Re,Ve,J,F,ve,Na>=Yi.length,Ct,Lt,C,br,na,fe,ce);if(tl&&(Fa=tl.placedGlyphBoxes,Fa&&Fa.box&&Fa.box.length)){yn=!0,Kn=tl.shift;break}}return Fa};Zi(()=>Ur(fo,Nt.iconBox,r.bI.horizontal),()=>{const Rr=Nt.verticalTextBox;return Rr&&Nr(Rr),C.allowVerticalPlacement&&!(Fn&&Fn.box&&Fn.box.length)&&_n>0&&Rr?Ur(Rr,Nt.verticalIconBox,r.bI.vertical):{box:null,offscreen:null,occluded:null}}),Fn&&(yn=Fn.box,ti=Fn.offscreen,$n=Fn.occluded);const Vo=Fi(!(!Fn||!Fn.box));if(!yn&&this.prevPlacement){const Rr=this.prevPlacement.variableOffsets[pn];Rr&&(this.variableOffsets[pn]=Rr,this.markUsedJustification(C,Rr.anchor,Ct,Vo))}}else{const Yi=(Ur,Vo)=>{const Rr=C.getSymbolInstanceTextSize(fe,Ct,this.transform.zoom,Lt,w),Ao=this.collisionIndex.placeCollisionBox(C,Rr,Ur,new r.P(0,0),ze,J,F,ve.predicate);return Ao&&Ao.box&&Ao.box.length&&(this.markUsedOrientation(C,Vo,Ct),this.placedOrientations[pn]=Vo),Ao};Zi(()=>Yi(fo,r.bI.horizontal),()=>{const Ur=Nt.verticalTextBox;return C.allowVerticalPlacement&&_n>0&&Ur?(Nr(Ur),Yi(Ur,r.bI.vertical)):{box:null,offscreen:null,occluded:null}}),Fi(!!(Fn&&Fn.box&&Fn.box.length))}}if(lr=Fn,yn=lr&&lr.box&&lr.box.length>0,ti=lr&&lr.offscreen,$n=lr&&lr.occluded,Ct.useRuntimeCollisionCircles){const Fi=C.text.placedSymbolArray.get(Ct.centerJustifiedTextSymbolIndex>=0?Ct.centerJustifiedTextSymbolIndex:Ct.verticalPlacedTextSymbolIndex),Zi=r.bJ(C.textSizeData,fe,Fi),Yi=I.get("text-padding");ni=this.collisionIndex.placeCollisionCircles(C,ze,Fi,C.lineVertexArray,C.glyphOffsetArray,Zi,F,V,q,g,Ve,ve.predicate,Ct.collisionCircleDiameter*Zi/r.bO,Yi,this.retainedQueryData[C.bucketInstanceId].tileID),yn=ze||ni.circles.length>0&&!ni.collisionDetected,ti=ti&&ni.offscreen,$n=ni.occluded}if(Nt.iconFeatureIndex&&(cr=Nt.iconFeatureIndex),Nt.iconBox){const Fi=Zi=>{Nr(Zi);const Yi=Ct.hasIconTextFit&&Kn?Nc(Kn.x,Kn.y,Re,Ve,this.transform.angle):new r.P(0,0),Ur=C.getSymbolInstanceIconSize(ce,this.transform.zoom,Ct.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,Ur,Zi,Yi,ke,J,F,ve.predicate)};Ci&&Ci.box&&Ci.box.length&&Nt.verticalIconBox?(Ai=Fi(Nt.verticalIconBox),Gn=Ai.box.length>0):(Ai=Fi(Nt.iconBox),Gn=Ai.box.length>0),ti=ti&&Ai.offscreen,mi=Ai.occluded}const jr=De||Ct.numHorizontalGlyphVertices===0&&_n===0,ei=Ne||Ct.numIconVertices===0;if(jr||ei?ei?jr||(Gn=Gn&&yn):yn=Gn&&yn:Gn=yn=Gn&&yn,yn&&lr&&lr.box&&this.collisionIndex.insertCollisionBox(lr.box,I.get("text-ignore-placement"),C.bucketInstanceId,Ci&&Ci.box&&Wi?Wi:Hi,ve.ID),Gn&&Ai&&this.collisionIndex.insertCollisionBox(Ai.box,I.get("icon-ignore-placement"),C.bucketInstanceId,cr,ve.ID),ni&&(yn&&this.collisionIndex.insertCollisionCircles(ni.circles,I.get("text-ignore-placement"),C.bucketInstanceId,Hi,ve.ID),g)){const Fi=C.bucketInstanceId;let Zi=this.collisionCircleArrays[Fi];Zi===void 0&&(Zi=this.collisionCircleArrays[Fi]=new An);for(let Yi=0;Yi<ni.circles.length;Yi+=4)Zi.circles.push(ni.circles[Yi+0]),Zi.circles.push(ni.circles[Yi+1]),Zi.circles.push(ni.circles[Yi+2]),Zi.circles.push(ni.collisionDetected?1:0)}const Mr=C.projection.name!=="globe";Qe=Qe&&(Mr||!$n),Mt=Mt&&(Mr||!mi),this.placements[pn]=new Iu(yn||Qe,Gn||Mt,ti||C.justReloaded),c.add(pn)};if(C.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(C,this.retainedQueryData[C.bucketInstanceId].tileID),C.elevationType==="road"&&C.updateRoadElevation(),C.updateZOffset(),C.sortFeaturesByY){const Ct=C.getSortedSymbolIndexes(this.transform.angle);for(let Lt=Ct.length-1;Lt>=0;--Lt){const Nt=Ct[Lt];Ot(C.symbolInstances.get(Nt),Nt,C.collisionArrays[Nt])}C.hasAnyZOffset&&r.w(`${C.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(C.hasAnyZOffset){const Ct=C.getSortedIndexesByZOffset();for(let Lt=0;Lt<Ct.length;++Lt){const Nt=Ct[Lt];Ot(C.symbolInstances.get(Nt),Nt,C.collisionArrays[Nt])}}else for(let Ct=o.symbolInstanceStart;Ct<o.symbolInstanceEnd;Ct++)Ot(C.symbolInstances.get(Ct),Ct,C.collisionArrays[Ct]);if(g&&C.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[C.bucketInstanceId];r.bi(Ct.invProjMatrix,F),Ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(o,c,g,b){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:L,crossTileID:F}=g,V=r.bT(c),q=b===r.bI.vertical?L:V==="left"?w:V==="center"?C:V==="right"?I:-1;w>=0&&(o.text.placedSymbolArray.get(w).crossTileID=q>=0&&w!==q?0:F),C>=0&&(o.text.placedSymbolArray.get(C).crossTileID=q>=0&&C!==q?0:F),I>=0&&(o.text.placedSymbolArray.get(I).crossTileID=q>=0&&I!==q?0:F),L>=0&&(o.text.placedSymbolArray.get(L).crossTileID=q>=0&&L!==q?0:F)}markUsedOrientation(o,c,g){const b=c===r.bI.horizontal||c===r.bI.horizontalOnly?c:0,w=c===r.bI.vertical?c:0,{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:F}=g,V=o.text.placedSymbolArray;C>=0&&(V.get(C).placedOrientation=b),I>=0&&(V.get(I).placedOrientation=b),L>=0&&(V.get(L).placedOrientation=b),F>=0&&(V.get(F).placedOrientation=w)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let g=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const b=c?c.symbolFadeChange(o):1,w=c?c.opacities:{},C=c?c.variableOffsets:{},I=c?c.placedOrientations:{};for(const L in this.placements){const F=this.placements[L],V=w[L];V?(this.opacities[L]=new zh(V,b,F.text,F.icon,null,F.clipped),g=g||F.text!==V.text.placed||F.icon!==V.icon.placed):(this.opacities[L]=new zh(null,b,F.text,F.icon,F.skipFade,F.clipped),g=g||F.text||F.icon)}for(const L in w){const F=w[L];if(!this.opacities[L]){const V=new zh(F,b,!1,!1);V.isHidden()||(this.opacities[L]=V,g=g||F.text.placed||F.icon.placed)}}for(const L in C)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=C[L]);for(const L in I)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=I[L]);g?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c,g,b){const w=new Set;for(const C of c){const I=C.getBucket(o);I&&C.latestFeatureIndex&&o.fqid===I.layerIds[0]&&(this.updateBucketOpacities(I,w,C,C.collisionBoxArray,g,b,C.tileID,o.scope),I.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(I,C.tileID),I.elevationType==="road"&&I.updateRoadElevation(),I.updateZOffset())}}updateBucketOpacities(o,c,g,b,w,C,I,L){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const F=o.layers[0].layout,V=o.layers[0].paint,q=!!o.layers[0].dynamicFilter(),G=new zh(null,0,!1,!1,!0),J=F.get("text-allow-overlap"),he=F.get("icon-allow-overlap"),le=F.get("text-variable-anchor"),fe=F.get("text-rotation-alignment")==="map",ce=F.get("text-pitch-alignment")==="map",ve=V.get("symbol-z-offset"),Ae=F.get("symbol-elevation-reference")==="sea",De=!ve.isConstant(),Ne=new zh(null,0,J&&(he||!o.hasIconData()||F.get("icon-optional")),he&&(J||!o.hasTextData()||F.get("text-optional")),!0);!o.collisionArrays&&b&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(b);const ze=(Re,Ve,We)=>{for(let ct=0;ct<Ve/4;ct++)Re.opacityVertexArray.emplaceBack(We)};let ke=0;C&&o.updateReplacement(I,C);for(let Re=0;Re<o.symbolInstances.length;Re++){const Ve=o.symbolInstances.get(Re),{numHorizontalGlyphVertices:We,numVerticalGlyphVertices:ct,crossTileID:rt,numIconVertices:Et,tileAnchorX:wt,tileAnchorY:Vt}=Ve;let nt=null;const ft=this.retainedQueryData[o.bucketInstanceId];De&&Ve&&ft&&(nt=g.latestFeatureIndex.loadFeature({featureIndex:Ve.featureIndex,bucketIndex:ft.bucketIndex,sourceLayerIndex:ft.sourceLayerIndex,layoutVertexArrayOffset:0}));const Qe=ve.evaluate(nt,{}),Mt=c.has(rt);let pt=this.opacities[rt];Mt?pt=G:pt||(pt=Ne,this.opacities[rt]=pt),c.add(rt);const Ot=We>0||ct>0,Ct=Et>0,Lt=this.placedOrientations[rt],Nt=Lt===r.bI.vertical,pn=Lt===r.bI.horizontal||Lt===r.bI.horizontalOnly;!Ot&&!Ct||pt.isHidden()||ke++;let _n=!1;if((Ot||Ct)&&C)for(const dn of o.activeReplacements){if(r.bP(dn,w,r.bQ.Symbol,L)||dn.min.x>wt||wt>dn.max.x||dn.min.y>Vt||Vt>dn.max.y)continue;const Sn=r.bR(wt,Vt,I.canonical,dn.footprintTileId.canonical);if(_n=r.bS(Sn,dn.footprint),_n)break}if(Ot){const dn=_n?fl:Pu(pt.text);ze(o.text,We,Nt?fl:dn),ze(o.text,ct,pn?fl:dn);const Sn=pt.text.isHidden(),{leftJustifiedTextSymbolIndex:yn,centerJustifiedTextSymbolIndex:Gn,rightJustifiedTextSymbolIndex:ti,verticalPlacedTextSymbolIndex:$n}=Ve,mi=o.text.placedSymbolArray,Kn=Sn||Nt?1:0;yn>=0&&(mi.get(yn).hidden=Kn),Gn>=0&&(mi.get(Gn).hidden=Kn),ti>=0&&(mi.get(ti).hidden=Kn),$n>=0&&(mi.get($n).hidden=Sn||pn?1:0);const Fn=this.variableOffsets[rt];Fn&&this.markUsedJustification(o,Fn.anchor,Ve,Lt);const Ci=this.placedOrientations[rt];Ci&&(this.markUsedJustification(o,"left",Ve,Ci),this.markUsedOrientation(o,Ci,Ve))}if(Ct){const dn=_n?fl:Pu(pt.icon),{placedIconSymbolIndex:Sn,verticalPlacedIconSymbolIndex:yn}=Ve,Gn=o.icon.placedSymbolArray,ti=pt.icon.isHidden()?1:0;Sn>=0&&(ze(o.icon,Et,Nt?fl:dn),Gn.get(Sn).hidden=ti),yn>=0&&(ze(o.icon,Ve.numVerticalIconVertices,pn?fl:dn),Gn.get(yn).hidden=ti)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const dn=o.collisionArrays[Re];if(dn){let Sn=new r.P(0,0),yn=!0;if(dn.textBox||dn.verticalTextBox){if(le){const ti=this.variableOffsets[rt];ti?(Sn=ua(ti.anchor,ti.width,ti.height,ti.textOffset,ti.textScale),fe&&Sn._rotate(ce?this.transform.angle:-this.transform.angle)):yn=!1}q&&(yn=!pt.clipped),dn.textBox&&Bh(o.textCollisionBox.collisionVertexArray,pt.text.placed,!yn||Nt,Qe,Ae,Sn.x,Sn.y),dn.verticalTextBox&&Bh(o.textCollisionBox.collisionVertexArray,pt.text.placed,!yn||pn,Qe,Ae,Sn.x,Sn.y)}const Gn=yn&&!!(!pn&&dn.verticalIconBox);dn.iconBox&&Bh(o.iconCollisionBox.collisionVertexArray,pt.icon.placed,Gn,Qe,Ae,Ve.hasIconTextFit?Sn.x:0,Ve.hasIconTextFit?Sn.y:0),dn.verticalIconBox&&Bh(o.iconCollisionBox.collisionVertexArray,pt.icon.placed,!Gn,Qe,Ae,Ve.hasIconTextFit?Sn.x:0,Ve.hasIconTextFit?Sn.y:0)}}}if(o.fullyClipped=ke===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const Re=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Re.invProjMatrix,o.placementViewportMatrix=Re.viewportMatrix,o.collisionCircleArray=Re.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){const g=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*g>o}setStale(){this.stale=!0}}function Bh(m,o,c,g,b,w,C){m.emplaceBack(o?1:0,c?1:0,w||0,C||0,g,b?1:0),m.emplaceBack(o?1:0,c?1:0,w||0,C||0,g,b?1:0),m.emplaceBack(o?1:0,c?1:0,w||0,C||0,g,b?1:0),m.emplaceBack(o?1:0,c?1:0,w||0,C||0,g,b?1:0)}const cp=Math.pow(2,25),up=Math.pow(2,24),Zs=Math.pow(2,17),jo=Math.pow(2,16),Ix=Math.pow(2,9),hp=Math.pow(2,8),cy=Math.pow(2,1);function Pu(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const o=m.placed?1:0,c=Math.floor(127*m.opacity);return c*cp+o*up+c*Zs+o*jo+c*Ix+o*hp+c*cy+o}const fl=0;class Bm{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,c,g,b,w,C){const I=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(I,b,o[this._currentTileIndex],this._sortAcrossTiles,C),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((L,F)=>L.sortKey-F.sortKey));this._currentPartIndex<I.length;){const L=I[this._currentPartIndex];if(c.placeLayerBucketPart(L,this._seenCrossTileIDs,g,L.symbolInstanceStart===0,C),this._currentPartIndex++,w())return!0}return!1}}class Ls{constructor(o,c,g,b,w,C,I,L,F){this.placement=new dr(o,w,C,I,L,F),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(o,c,g,b,w){const C=r.q.now(),I=()=>{const L=r.q.now()-C;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=c[o[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=F)&&(!L.maxzoom||L.maxzoom>F)){const V=L,q=V.layout.get("symbol-z-elevate"),G=V.layout.get("symbol-sort-key").constantOr(1)!==void 0,J=V.layout.get("symbol-z-order"),he=J==="viewport-y"||J==="auto"&&!(J!=="viewport-y"&&G),le=V.layout.get("text-allow-overlap")||V.layout.get("icon-allow-overlap")||V.layout.get("text-ignore-placement")||V.layout.get("icon-ignore-placement"),fe=he&&le,ce=this._inProgressLayer=this._inProgressLayer||new Bm(V),ve=r.C(L.source,L.scope);if(ce.continuePlacement(q||fe?b[ve]:g[ve],this.placement,this._showCollisionBoxes,L,I,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const pl=512/r.aj/2;class Ys{constructor(o,c,g){this.tileID=o,this.bucketInstanceId=g,this.index=new r.bW(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const b=o.canonical.x*r.aj,w=o.canonical.y*r.aj;for(let C=0;C<c.length;C++){const{key:I,crossTileID:L,tileAnchorX:F,tileAnchorY:V}=c.get(C),q=Math.floor((b+F)*pl),G=Math.floor((w+V)*pl);this.index.add(q,G),this.keys.push(I),this.crossTileIDs.push(L)}this.index.finish()}findMatches(o,c,g){const b=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),w=pl/Math.pow(2,c.canonical.z-this.tileID.canonical.z),C=c.canonical.x*r.aj,I=c.canonical.y*r.aj;for(let L=0;L<o.length;L++){const F=o.get(L);if(F.crossTileID)continue;const{key:V,tileAnchorX:q,tileAnchorY:G}=F,J=Math.floor((C+q)*w),he=Math.floor((I+G)*w),le=this.index.range(J-b,he-b,J+b,he+b).sort((fe,ce)=>fe-ce);for(const fe of le){const ce=this.crossTileIDs[fe];if(this.keys[fe]===V&&!g.has(ce)){g.add(ce),F.crossTileID=ce;break}}}}}class uy{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Fh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const c=Math.round((o-this.lng)/360);if(c!==0)for(const g in this.indexes){const b=this.indexes[g],w={};for(const C in b){const I=b[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+c),w[I.tileID.key]=I}this.indexes[g]=w}this.lng=o}addBucket(o,c,g){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let w=0;w<c.symbolInstances.length;w++)c.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const b=this.usedCrossTileIDs[o.overscaledZ];for(const w in this.indexes){const C=this.indexes[w];if(Number(w)>o.overscaledZ)for(const I in C){const L=C[I];L.tileID.isChildOf(o)&&L.findMatches(c.symbolInstances,o,b)}else{const I=C[o.scaledTo(Number(w)).key];I&&I.findMatches(c.symbolInstances,o,b)}}for(let w=0;w<c.symbolInstances.length;w++){const C=c.symbolInstances.get(w);C.crossTileID||(C.crossTileID=g.generate(),b.add(C.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Ys(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(const g of c.crossTileIDs)this.usedCrossTileIDs[o].delete(g)}removeStaleBuckets(o){let c=!1;for(const g in this.indexes){const b=this.indexes[g];for(const w in b)o[b[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,b[w]),delete b[w],c=!0)}return c}}class To{constructor(){this.layerIndexes={},this.crossTileIDs=new uy,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,g,b){let w=this.layerIndexes[o.fqid];w===void 0&&(w=this.layerIndexes[o.fqid]=new Fh);let C=!1;const I={};b.name!=="globe"&&w.handleWrapJump(g);for(const L of c){const F=L.getBucket(o);F&&o.fqid===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,F,this.crossTileIDs)&&(C=!0),I[F.bucketInstanceId]=!0)}return w.removeStaleBuckets(I)&&(C=!0),C}pruneUnusedLayers(o){const c={};o.forEach(g=>{c[g]=!0});for(const g in this.layerIndexes)c[g]||delete this.layerIndexes[g]}}const Ks=771;class vi{constructor(o,c,g,b){this.blendFunction=o,this.blendColor=c,this.mask=g,this.blendEquation=b}}vi.Replace=[1,0,1,0],vi.disabled=new vi(vi.Replace,r.am.transparent,[!1,!1,!1,!1]),vi.unblended=new vi(vi.Replace,r.am.transparent,[!0,!0,!0,!0]),vi.alphaBlended=new vi([1,Ks,1,Ks],r.am.transparent,[!0,!0,!0,!0]),vi.alphaBlendedNonPremultiplied=new vi([770,Ks,770,Ks],r.am.transparent,[!0,!0,!0,!0]),vi.multiply=new vi([774,0,774,0],r.am.transparent,[!0,!0,!0,!0]);class mn{constructor(o,c,g){this.func=o,this.mask=c,this.range=g}}mn.ReadOnly=!1,mn.ReadWrite=!0,mn.disabled=new mn(519,mn.ReadOnly,[0,1]);const Xd=7680;class Yn{constructor(o,c,g,b,w,C){this.test=o,this.ref=c,this.mask=g,this.fail=b,this.depthFail=w,this.pass=C}}Yn.disabled=new Yn({func:519,mask:0},0,0,Xd,Xd,Xd);const Ul=1029,pc=2305;class Jn{constructor(o,c,g){this.enable=o,this.mode=c,this.frontFace=g}}function dp(m,o){const c=r.c1(m,3);r.c3(m,o),r.c7(m,3,c)}function ml(m,o){const c=r.bY([]);return r.bZ(c,c,-o),r.b_(c,c,-m),c}function hy(m,o){const c=[m[0],m[1],0],g=[o[0],o[1],0];if(r.ae(c)>=1e-15){const C=r.au([],c);r.b$(g,C,r.bE(g,C)),o[0]=g[0],o[1]=g[1]}const b=r.bG([],o,m);if(r.c0(b)<1e-15)return null;const w=Math.atan2(-b[1],b[0]);return ml(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}Jn.disabled=new Jn(!1,Ul,pc),Jn.backCCW=new Jn(!0,Ul,pc),Jn.backCW=new Jn(!0,Ul,2304),Jn.frontCW=new Jn(!0,1028,2304),Jn.frontCCW=new Jn(!0,1028,pc);class Zd{constructor(o,c){this.position=o,this.orientation=c}get position(){return this._position}set position(o){if(o){const c=o instanceof r.ac?o:new r.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(c.x=r.bX(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(o,c){if(this.orientation=null,!this.position)return;const g=this.position,b=this._elevation?this._elevation.getAtPointOrZero(r.ac.fromLngLat(o)):0,w=r.ac.fromLngLat(o,b),C=[w.x-g.x,w.y-g.y,w.z-g.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=hy(C,c)}setPitchBearing(o,c){this.orientation=ml(r.al(o),r.al(-c))}}class fs{constructor(o,c){this._transform=r.bx([]),this.orientation=c,this.position=o}get mercatorPosition(){const o=this.position;return new r.ac(o[0],o[1],o[2])}get position(){const o=r.c1(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var c;o&&r.c7(this._transform,3,[(c=o)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||r.bY([]),o&&dp(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,c){this._orientation=ml(o,c),dp(this._transform,this._orientation)}forward(){const o=r.c1(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=r.c1(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=r.c1(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,c){const g=new Float64Array(16);return r.bi(g,this.getWorldToCamera(o,c)),g}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,c,g){const b=this.position;r.b$(b,b,-o);const w=new Float64Array(16);return r.bn(w,[g,g,g]),r.bo(w,w,b),w[10]*=c,w}getWorldToCamera(o,c){const g=new Float64Array(16),b=new Float64Array(4),w=this.position;return r.c2(b,this._orientation),r.b$(w,w,-o),r.c3(g,b),r.bo(g,g,w),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=c,g[9]*=c,g[10]*=c,g[11]*=c,g}getCameraToClipPerspective(o,c,g,b){const w=new Float64Array(16);return r.c4(w,o,c,g,b),w}getCameraToClipOrthographic(o,c,g,b,w,C){const I=new Float64Array(16);return r.c5(I,o,c,g,b,w,C),I}getDistanceToElevation(o,c=!1){const g=o===0?0:r.c6(o,c?r.aY(this.position[1]):this.position[1]),b=this.forward();return(g-this.position[2])/b[2]}clone(){return new fs([...this.position],[...this.orientation])}}const ks={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Nh{constructor(o=0,c=0,g=0,b=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(g)||g<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=g,this.right=b}interpolate(o,c,g){return c.top!=null&&o.top!=null&&(this.top=r.ai(o.top,c.top,g)),c.bottom!=null&&o.bottom!=null&&(this.bottom=r.ai(o.bottom,c.bottom,g)),c.left!=null&&o.left!=null&&(this.left=r.ai(o.left,c.left,g)),c.right!=null&&o.right!=null&&(this.right=r.ai(o.right,c.right,g)),this}getCenter(o,c){const g=r.aD((this.left+o-this.right)/2,0,o),b=r.aD((this.top+c-this.bottom)/2,0,c);return new r.P(g,b)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Nh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const jc=15;class jh{constructor(o,c,g,b,w,C,I){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=g??0,this._maxPitch=b??60,this.setProjection(C),this.setMaxBounds(I),this.width=0,this.height=0,this._center=new r.cd(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Nh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new fs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new jh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<jc}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,c=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(o||g)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return r.aF(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=r.ce(this.projectionOptions);const g=this.getProjection(),b=!r.bv(c,g);return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=r.ce({name:"mercator"});const c=o!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return r.c6(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.P(this.width,this.height)}get bearing(){return r.bX(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const c=-o*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=r.cf(),r.cg(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const c=r.aD(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=r.al(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const g=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&g.exaggeration()&&this._centerAltitudeValidForExaggeration!==g.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*g.exaggeration(),this._centerAltitudeValidForExaggeration=g.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=g.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let b=0,w=0;for(let C=0;C<c.length;C++){const I=new r.P(c[C][0]*this.width,g+c[C][1]*(this.height-g)),L=o.pointCoordinate(I);if(!L)continue;const F=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);b+=L[3]*F,w+=F}return w===0?NaN:b/w}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*c,b=this._mercatorZfromZoom(o),w=this._mercatorZfromZoom(this._maxZoom),C=Math.max(b-g,w);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let g;g=o.z<this._camera.position[2]?[c.x,c.y,c.z]:[o.x,o.y,o.z];const b=r.ae(r.at([],this._camera.position,g));return r.aD(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let c=!1;if(o.orientation&&!r.ch(o.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(o.orientation)),o.position){const g=[o.position.x,o.position.y,o.position.z];r.ci(g,this._camera.position)||(this._setCameraPosition(g),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,c=new Zd;return c.position=new r.ac(o[0],o[1],o[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(o){if(!r.cj(o))return!1;r.ck(o,o);const c=r.cl([],[0,0,-1],o),g=r.cl([],[0,-1,0],o);if(g[2]<0)return!1;const b=hy(c,g);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(o){const c=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;o[2]=r.aD(o[2],b/g,b/c),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,g){this._unmodified=!1,this._edgeInsets.interpolate(o,c,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){const c=[new r.cm(0,o)];if(this.renderWorldCopies){const g=this.pointCoordinate(new r.P(0,0)),b=this.pointCoordinate(new r.P(this.width,0)),w=this.pointCoordinate(new r.P(this.width,this.height)),C=this.pointCoordinate(new r.P(0,this.height)),I=Math.floor(Math.min(g.x,b.x,w.x,C.x)),L=Math.floor(Math.max(g.x,b.x,w.x,C.x)),F=1;for(let V=I-F;V<=L+F;V++)V!==0&&c.push(new r.cm(V,o))}return c}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,c,g){let b=[];const w=g!=null,C=!w;if(C&&this.zoom<c||w&&g[0]===0&&g[1]===0)return b;const I=new Set,L=(V,q,G,J,he)=>{const le=r.cK(q,V,G,J,he);I.has(le)||(b.push(new r.aM(V,q,G,J,he)),I.add(le))};for(let V=0;V<o.length;V++){const q=o[V];if(C&&q.canonical.z!==c)continue;const G=q.canonical,J=q.overscaledZ,he=q.wrap,le=1<<G.z,fe=G.x+1<le,ce=G.x>0,ve=G.y+1<le,Ae=G.y>0,De=q.wrap-(ce?0:1),Ne=q.wrap+(fe?0:1),ze=ce?G.x-1:le-1,ke=fe?G.x+1:0;if(w)g[0]<0?(L(J,Ne,G.z,ke,G.y),g[1]<0&&ve&&(L(J,he,G.z,G.x,G.y+1),L(J,Ne,G.z,ke,G.y+1)),g[1]>0&&Ae&&(L(J,he,G.z,G.x,G.y-1),L(J,Ne,G.z,ke,G.y-1))):g[0]>0?(L(J,De,G.z,ze,G.y),g[1]<0&&ve&&(L(J,he,G.z,G.x,G.y+1),L(J,De,G.z,ze,G.y+1)),g[1]>0&&Ae&&(L(J,he,G.z,G.x,G.y-1),L(J,De,G.z,ze,G.y-1))):g[1]<0&&ve?L(J,he,G.z,G.x,G.y+1):Ae&&L(J,he,G.z,G.x,G.y-1);else{const Re=q.visibleQuadrants;1&Re&&(L(J,De,G.z,ze,G.y),Ae&&(L(J,he,G.z,G.x,G.y-1),L(J,De,G.z,ze,G.y-1))),2&Re&&(L(J,Ne,G.z,ke,G.y),Ae&&(L(J,he,G.z,G.x,G.y-1),L(J,Ne,G.z,ke,G.y-1))),4&Re&&(L(J,De,G.z,ze,G.y),ve&&(L(J,he,G.z,G.x,G.y+1),L(J,De,G.z,ze,G.y+1))),8&Re&&(L(J,Ne,G.z,ke,G.y),ve&&(L(J,he,G.z,G.x,G.y+1),L(J,Ne,G.z,ke,G.y+1)))}}const F=[];for(const V of b)b.some(q=>V.isChildOf(q))||F.push(V);if(b=F.filter(V=>!o.some(q=>!!(V.overscaledZ<c&&q.isChildOf(V))||V.equals(q)||V.isChildOf(q))),C){const V=1<<c,q=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),G=[V*q.x,V*q.y],J=4,he=J*J;b=b.filter(le=>{const fe=le.canonical.x+.5-G[0],ce=le.canonical.y+.5-G[1];return fe*fe+ce*ce<he})}return b}coveringTiles(o){let c=this.coveringZoomLevel(o);const g=c,b=this.elevation&&this.elevation.exaggeration(),w=b&&!o.isTerrainDEM,C=this.projection.name==="mercator";if(o.minzoom!==void 0&&c<o.minzoom)return[];o.maxzoom!==void 0&&c>o.maxzoom&&(c=o.maxzoom);const I=this.locationCoordinate(this.center),L=this.center.lat,F=1<<c,V=[F*I.x,F*I.y,0],q=this.projection.name==="globe",G=!q,J=r.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,G),he=q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),le=F*r.c6(1,this.center.lat),fe=this._camera.position[2]/r.c6(1,this.center.lat),ce=[F*he.x,F*he.y,fe*(G?1:le)],ve=q||b,Ae=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),De=this.isLODDisabled(!0)?c:0;let Ne;if(this._elevation&&o.isTerrainDEM)Ne=1e4*this._elevation.exaggeration();else if(this._elevation){const Qe=this._elevation.getMinMaxForVisibleTiles();Ne=Qe?Qe.max:this._centerAltitude}else Ne=this._centerAltitude;const ze=o.isTerrainDEM?-Ne:this._elevation?this._elevation.getMinElevationBelowMSL():0,ke=this.projection.isReprojectedInTileSpace?r.co(this):1,Re=Qe=>{const pt=new r.ac(Qe.x+25e-6,Qe.y,Qe.z),Ot=new r.ac(Qe.x,Qe.y+25e-6,Qe.z),Ct=Qe.toLngLat(),Lt=pt.toLngLat(),Nt=Ot.toLngLat(),pn=this.locationCoordinate(Ct),_n=this.locationCoordinate(Lt),dn=this.locationCoordinate(Nt),Sn=Math.hypot(_n.x-pn.x,_n.y-pn.y),yn=Math.hypot(dn.x-pn.x,dn.y-pn.y);return Math.sqrt(Sn*yn)*ke/25e-6},Ve=Qe=>{const Mt=Ne,pt=ze;return{aabb:r.cr(this,F,0,0,0,Qe,pt,Mt,this.projection),zoom:0,x:0,y:0,minZ:pt,maxZ:Mt,wrap:Qe,fullyVisible:!1}},We=[];let ct=[];const rt=c,Et=o.reparseOverscaled?g:c,wt=(fe-this._centerAltitude)*le,Vt=Qe=>{if(!this._elevation||!Qe.tileID||!C)return;const Mt=this._elevation.getMinMaxForTile(Qe.tileID),pt=Qe.aabb;Mt?(pt.min[2]=Mt.min,pt.max[2]=Mt.max,pt.center[2]=(pt.min[2]+pt.max[2])/2):(Qe.shouldSplit=ft(Qe),Qe.shouldSplit||(pt.min[2]=pt.max[2]=pt.center[2]=this._centerAltitude))},nt=(Qe,Mt)=>{if(.707*Mt<Qe)return 1;const pt=Mt/Qe;return pt/(1.4144271570014144+(Math.pow(1.1,pt-1.4144271570014144+1)-1)/(1.1-1)-1)},ft=Qe=>{if(Qe.zoom<De)return!0;if(Qe.zoom===rt)return!1;if(Qe.shouldSplit!=null)return Qe.shouldSplit;const Mt=Qe.aabb.distanceX(ce),pt=Qe.aabb.distanceY(ce);let Ot=wt,Ct=1;if(q){Ot=Qe.aabb.distanceZ(ce);const yn=Math.pow(2,Qe.zoom),Gn=r.aY((Qe.y+1)/yn),ti=r.aY(Qe.y/yn),$n=Math.min(Math.max(L,Gn),ti),mi=r.cP($n)/r.cP(L);if(Ct=$n===L?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,mi/this._mercatorScaleRatio),this.zoom<=r.cL&&Qe.zoom===rt-1&&mi>=.9)return!0}else if(w&&(Ot=Qe.aabb.distanceZ(ce)*le),this.projection.isReprojectedInTileSpace&&g<=5){const yn=Math.pow(2,Qe.zoom),Gn=Re(new r.ac((Qe.x+.5)/yn,(Qe.y+.5)/yn));Ct=Gn>.85?1:Gn}if(!C){const yn=Math.sqrt(Mt*Mt+pt*pt+Ot*Ot);let Gn=(1<<rt-Qe.zoom)*Ae*Ct;return Gn*=nt(Math.max(Ot,wt),yn),yn<Gn}let Lt=Number.MAX_VALUE,Nt=0;const pn=Qe.aabb.getCorners(),_n=[];for(const yn of pn){r.at(_n,yn,ce),q||(w?_n[2]*=le:_n[2]=wt);const Gn=r.bE(_n,this._camera.forward());Gn<Lt&&(Lt=Gn,Nt=Math.abs(_n[2]))}let dn=(1<<rt-Qe.zoom)*Ae*Ct;if(dn*=nt(Math.max(Nt,wt),Lt),Lt<dn)return!0;const Sn=Qe.aabb.closestPoint(V);return Sn[0]===V[0]&&Sn[1]===V[1]};if(this.renderWorldCopies)for(let Qe=1;Qe<=3;Qe++)We.push(Ve(-Qe)),We.push(Ve(Qe));for(We.push(Ve(0));We.length>0;){const Qe=We.pop(),Mt=Qe.x,pt=Qe.y;let Ot=Qe.fullyVisible;const Ct=()=>this.projection.name==="globe"&&(Qe.y===0||Qe.y===(1<<Qe.zoom)-1);if(!Ot){let Lt=ve?Qe.aabb.intersects(J):Qe.aabb.intersectsFlat(J);if(Lt===0&&Ct()){const Nt=new r.cp(Qe.zoom,Mt,pt);Lt=r.cq(this,F,Nt,!0).intersects(J)}if(Lt===0)continue;Ot=Lt===2}if(Qe.zoom!==rt&&ft(Qe))for(let Lt=0;Lt<4;Lt++){const Nt=(Mt<<1)+Lt%2,pn=(pt<<1)+(Lt>>1),_n={aabb:C?Qe.aabb.quadrant(Lt):r.cr(this,F,Qe.zoom+1,Nt,pn,Qe.wrap,Qe.minZ,Qe.maxZ,this.projection),zoom:Qe.zoom+1,x:Nt,y:pn,wrap:Qe.wrap,fullyVisible:Ot,tileID:void 0,shouldSplit:void 0,minZ:Qe.minZ,maxZ:Qe.maxZ};w&&!q&&(_n.tileID=new r.aM(Qe.zoom+1===rt?Et:Qe.zoom+1,Qe.wrap,Qe.zoom+1,Nt,pn),Vt(_n)),We.push(_n)}else{const Lt=Qe.zoom===rt?Et:Qe.zoom;if(o.minzoom&&o.minzoom>Lt)continue;let Nt=0;if(!Ot){let Sn=ve?Qe.aabb.intersectsPrecise(J):Qe.aabb.intersectsPreciseFlat(J);if(Sn===0&&Ct()){const yn=new r.cp(Qe.zoom,Mt,pt);Sn=r.cq(this,F,yn,!0).intersectsPrecise(J)}if(Sn===0)continue;if(o.calculateQuadrantVisibility)if(J.containsPoint(Qe.aabb.center))Nt=15;else for(let yn=0;yn<4;yn++)Qe.aabb.quadrant(yn).intersects(J)!==0&&(Nt|=1<<yn)}const pn=V[0]-(.5+Mt+(Qe.wrap<<Qe.zoom))*(1<<c-Qe.zoom),_n=V[1]-.5-pt,dn=Qe.tileID?Qe.tileID:new r.aM(Lt,Qe.wrap,Qe.zoom,Mt,pt);o.calculateQuadrantVisibility&&(dn.visibleQuadrants=Nt),ct.push({tileID:dn,distanceSq:pn*pn+_n*_n})}}if(this.fogCullDistSq){const Qe=this.fogCullDistSq,Mt=this.horizonLineFromTop();ct=ct.filter(pt=>{const Ot=[0,0,0,1],Ct=[r.aj,r.aj,0,1],Lt=this.calculateFogTileMatrix(pt.tileID.toUnwrapped());r.aA(Ot,Ot,Lt),r.aA(Ct,Ct,Lt);const Nt=r.cs([],Ot,Ct),pn=r.ct([],Ot,Ct),_n=r.cM(Nt,pn);if(_n===0)return!0;let dn=!1;const Sn=this._elevation;if(Sn&&_n>Qe&&Mt!==0){const yn=this.calculateProjMatrix(pt.tileID.toUnwrapped());let Gn;o.isTerrainDEM||(Gn=Sn.getMinMaxForTile(pt.tileID)),Gn||(Gn={min:ze,max:Ne});const ti=r.cu(this.rotation),$n=[ti[0]*r.aj,ti[1]*r.aj,Gn.max];r.ad($n,$n,yn),dn=(1-$n[1])*this.height*.5<Mt}return _n<Qe||dn})}return ct.sort((Qe,Mt)=>Qe.distanceSq-Mt.distanceSq).map(Qe=>Qe.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const c=r.aD(o.lat,-r.cv,r.cv),g=this.projection.project(o.lng,c);return new r.P(g.x*this.worldSize,g.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/r.c6(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,c){let g,b;const w=this.centerPoint;if(this.projection.name==="globe"){const I=this.worldSize;g=(c.x-w.x)/I,b=(c.y-w.y)/I}else{const I=this.pointCoordinate(c),L=this.pointCoordinate(w);g=I.x-L.x,b=I.y-L.y}const C=this.locationCoordinate(o);this.setLocation(new r.ac(C.x-g,C.y-b))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,c){return this.projection.locationPoint(this,o,c)}locationPoint3D(o,c){return this.projection.locationPoint(this,o,c,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,c){return this.coordinateLocation(this.pointCoordinate3D(o,c))}locationCoordinate(o,c){const g=c?r.c6(c,o.lat):void 0,b=this.projection.project(o.lng,o.lat);return new r.ac(b.x,b.y,g)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,c){const g=c??this._centerAltitude,b=[o.x,o.y,0,1],w=[o.x,o.y,1,1];r.aA(b,b,this.pixelMatrixInverse),r.aA(w,w,this.pixelMatrixInverse);const C=w[3];r.cw(b,b,1/b[3]),r.cw(w,w,1/C);const I=b[2],L=w[2];return{p0:b,p1:w,t:I===L?0:(g-I)/(L-I)}}screenPointToMercatorRay(o){const c=[o.x,o.y,0,1],g=[o.x,o.y,1,1];return r.aA(c,c,this.pixelMatrixInverse),r.aA(g,g,this.pixelMatrixInverse),r.cw(c,c,1/c[3]),r.cw(g,g,1/g[3]),c[2]=r.c6(c[2],this._center.lat)*this.worldSize,g[2]=r.c6(g[2],this._center.lat)*this.worldSize,r.cw(c,c,1/this.worldSize),r.cw(g,g,1/this.worldSize),new r.av([c[0],c[1],c[2]],r.au([],r.at([],g,c)))}rayIntersectionCoordinate(o){const{p0:c,p1:g,t:b}=o,w=r.c6(c[2],this._center.lat),C=r.c6(g[2],this._center.lat);return new r.ac(r.ai(c[0],g[0],b)/this.worldSize,r.ai(c[1],g[1],b)/this.worldSize,r.ai(w,C,b))}pointCoordinate(o,c=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,c)}pointCoordinate3D(o,c){if(!this.elevation)return this.pointCoordinate(o,c);let g=this.projection.pointCoordinate3D(this,o.x,o.y);if(g)return new r.ac(g[0],g[1],g[2]);let b=0,w=this.horizonLineFromTop();if(o.y>w)return this.pointCoordinate(o,c);const C=.02*w,I=o.clone();for(let L=0;L<10&&w-b>C;L++){I.y=r.ai(b,w,.66);const F=this.projection.pointCoordinate3D(this,I.x,I.y);F?(w=I.y,g=F):b=I.y}return g?new r.ac(g[0],g[1],g[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=r.cx)return!this.isPointAboveHorizon(o);const c=this.pointCoordinate(o);return c.y>=0&&c.y<=1}_coordinatePoint(o,c){const g=c&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,b=[o.x*this.worldSize,o.y*this.worldSize,g+o.toAltitude(),1];return r.aA(b,b,this.pixelMatrix),b[3]>0?new r.P(b[0]/b[3],b[1]/b[3]):new r.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:c}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,w=this.pointLocation3D(new r.P(c,o)),C=this.pointLocation3D(new r.P(b,o)),I=this.pointLocation3D(new r.P(b,g)),L=this.pointLocation3D(new r.P(c,g));let F=Math.min(w.lng,C.lng,I.lng,L.lng),V=Math.max(w.lng,C.lng,I.lng,L.lng),q=Math.min(w.lat,C.lat,I.lat,L.lat),G=Math.max(w.lat,C.lat,I.lat,L.lat);const J=Math.pow(2,-this.zoom)/16*270,he=this.projection.name==="globe"?1:4,le=(fe,ce,ve,Ae,De)=>{const Ne=(fe+ve)/2,ze=(ce+Ae)/2,ke=new r.P(Ne,ze),{lng:Re,lat:Ve}=this.pointLocation3D(ke),We=Math.max(0,F-Re,q-Ve,Re-V,Ve-G);F=Math.min(F,Re),V=Math.max(V,Re),q=Math.min(q,Ve),G=Math.max(G,Ve),(De<he||We>J)&&(le(fe,ce,Ne,ze,De+1),le(Ne,ze,ve,Ae,De+1))};if(le(c,o,b,o,1),le(b,o,b,g,1),le(b,g,c,g,1),le(c,g,c,o,1),this.projection.name==="globe"){const[fe,ce]=r.cy(this);fe?(G=90,V=180,F=-180):ce&&(q=-90,V=180,F=-180)}return new r.aG(new r.cd(F,q),new r.cd(V,G))}_getBoundsRectangular(o,c){const{top:g,left:b}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,I=new r.P(b,g),L=new r.P(C,g),F=new r.P(C,w),V=new r.P(b,w);let q=this.pointCoordinate(I,o),G=this.pointCoordinate(L,o);const J=this.pointCoordinate(F,c),he=this.pointCoordinate(V,c),le=(fe,ce)=>(ce.y-fe.y)/(ce.x-fe.x);return q.y>1&&G.y>=0?q=new r.ac((1-he.y)/le(he,q)+he.x,1):q.y<0&&G.y<=1&&(q=new r.ac(-he.y/le(he,q)+he.x,0)),G.y>1&&q.y>=0?G=new r.ac((1-J.y)/le(J,G)+J.x,1):G.y<0&&q.y<=1&&(G=new r.ac(-J.y/le(J,G)+J.x,0)),new r.aG().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(G)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(J))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=o.visibleDemTiles.reduce((g,b)=>{if(b.dem){const w=b.dem.tree;g.min=Math.min(g.min,w.minimums[0]),g.max=Math.max(g.max,w.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*o.exaggeration(),c.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,g=this.height/2-c*(1-this._horizonShift);return o?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-r.cv,this.maxLat=r.cv,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=r.ay(this.minLng)*this.tileSize,this.worldMaxX=r.ay(this.maxLng)*this.tileSize,this.worldMinY=r.aH(this.maxLat)*this.tileSize,this.worldMaxY=r.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,c){return this.projection.createTileMatrix(this,c,o)}calculateDistanceTileData(o){const c=o.key,g=this._distanceTileDataCache;if(g[c])return g[c];const b=o.canonical,w=1/this.height,C=this.cameraWorldSize,I=C/this.zoomScale(b.z),L=(b.x+Math.pow(2,b.z)*o.wrap)*I,F=b.y*I,V=this.point;V.x*=C/this.worldSize,V.y*=C/this.worldSize;const q=this.angle,G=Math.sin(-q),J=-Math.cos(-q);return g[c]={bearing:[G,J],center:[(V.x-L)*w,(V.y-F)*w],scale:I/r.aj*w},g[c]}calculateFogTileMatrix(o){const c=o.key,g=this._fogTileMatrixCache;if(g[c])return g[c];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return r.az(b,this.worldToFogMatrix,b),g[c]=new Float32Array(b),g[c]}calculateProjMatrix(o,c=!1,g=!1){const b=o.key;let w;if(w=g?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,w[b])return w[b];const C=this.calculatePosMatrix(o,this.worldSize);let I;return I=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,r.az(C,I,C),w[b]=new Float32Array(C),w[b]}calculatePixelsToTileUnitsMatrix(o){const c=o.tileID.key,g=this._pixelsToTileUnitsCache;if(g[c])return g[c];const b=r.cz(o,this);return g[c]=b,g[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,c=r.bn([],[o,o,o]);return r.az(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const c=r.c6(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(c),b=this._camera.forward(),w=r.c6(1,this._center.lat);g[2]/=w,b[2]/=w,r.au(b,b);const C=o.raycast(g,b,o.exaggeration());if(C){const I=r.bF([],g,b,C),L=new r.ac(I[0],I[1],r.c6(I[2],r.aY(I[1]))),F=(L.z+r.ae([L.x-g[0],L.y-g[1],L.z-g[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(F),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const c=this._elevation,g=r.c6(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(g),w=c.getAtPointOrZero(new r.ac(...b)),C=this.pixelsPerMeter/this.worldSize*w,I=this._minimumHeightOverTerrain(),L=b[2]-C;if(L<=I)if(L<0||o){const F=this.locationCoordinate(this._center,this._centerAltitude),V=[b[0],b[1],F.z-b[2]],q=r.ae(V);V[2]-=(I-L)/this._pixelsPerMercatorPixel;const G=r.ae(V);if(G===0)return;r.b$(V,V,q/G*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],F.z*this._pixelsPerMercatorPixel-V[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const G=this.center;return G.lat=r.aD(G.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(G.lng=r.aD(G.lng,this.minLng,this.maxLng)),this.center=G,void(this._constraining=!1)}const c=this._unmodified,{x:g,y:b}=this.point;let w=0,C=g,I=b;const L=this.width/2,F=this.height/2,V=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(b-F<V&&(I=V+F),b+F>q&&(I=q-F),q-V<this.height&&(w=Math.max(w,this.height/(q-V)),I=(q+V)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const G=this.worldMinX*this.scale,J=this.worldMaxX*this.scale,he=this.worldSize/2-(G+J)/2;C=(g+he+this.worldSize)%this.worldSize-he,C-L<G&&(C=G+L),C+L>J&&(C=J-L),J-G<this.width&&(w=Math.max(w,this.width/(J-G)),C=(J+G)/2)}C===g&&I===b||this._allowWorldUnderZoom||(this.center=this.unproject(new r.P(C,I))),w&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,c=this.projection.name==="globe",g=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=r.c6(1,this.center.lat)/r.c6(1,r.cN));const b=r.cA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const w=this.projection.zAxisUnit==="meters"?g:1,C=this._camera.getWorldToCamera(this.worldSize,w);let I;const L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(L[8]=2*-o.x/this.width,L[9]=2*o.y/this.height,this.isOrthographic){let Ve=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),We=Ve*this.aspect,ct=-We,rt=-Ve;We-=o.x,ct-=o.x,Ve+=o.y,rt+=o.y,I=this._camera.getCameraToClipOrthographic(ct,We,rt,Ve,this._nearZ,this._farZ),((Et,wt,Vt,nt)=>{for(let ft=0;ft<16;ft++)Et[ft]=r.ai(wt[ft],Vt[ft],nt)})(I,I,L,r.cO(this.pitch>=jc?1:this.pitch/jc))}else I=L;const F=r.cB([],L,C);let V=r.cB([],I,C);if(this.projection.isReprojectedInTileSpace){const Ve=this.locationCoordinate(this.center),We=r.bx([]);r.bo(We,We,[Ve.x*this.worldSize,Ve.y*this.worldSize,0]),r.az(We,We,r.cC(this)),r.bo(We,We,[-Ve.x*this.worldSize,-Ve.y*this.worldSize,0]),r.az(V,V,We),r.az(F,F,We),this.inverseAdjustmentMatrix=r.cD(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=r.cE([],V,[this.worldSize,this.worldSize,this.worldSize/w,1]),this.projMatrix=V,this.invProjMatrix=r.bi(new Float64Array(16),this.projMatrix),c){const Ve=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ve[8]=2*-o.x/this.width,Ve[9]=2*o.y/this.height,this.expandedFarZProjMatrix=r.cB([],Ve,C)}else this.expandedFarZProjMatrix=this.projMatrix;const q=r.bi([],I);this.frustumCorners=r.cF.fromInvProjectionMatrix(q,this.horizonLineFromTop(),this.height),this.cameraFrustum=r.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const G=new Float32Array(16);r.bx(G),r.cE(G,G,[1,-1,1]),r.cG(G,G,this._pitch),r.by(G,G,this.angle);const J=r.c4(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=r.bw(J);const he=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;J[8]=2*-o.x/this.width,J[9]=2*(o.y+he)/this.height,this.skyboxMatrix=r.az(G,J,G);const le=this.point,fe=le.x,ce=le.y,ve=this.width%2/2,Ae=this.height%2/2,De=Math.cos(this.angle),Ne=Math.sin(this.angle),ze=fe-Math.round(fe)+De*ve+Ne*Ae,ke=ce-Math.round(ce)+De*Ae+Ne*ve,Re=new Float64Array(V);if(r.bo(Re,Re,[ze>.5?ze-1:ze,ke>.5?ke-1:ke,0]),this.alignedProjMatrix=Re,V=r.bz(),r.cE(V,V,[this.width/2,-this.height/2,1]),r.bo(V,V,[1,-1,0]),this.labelPlaneMatrix=V,V=r.bz(),r.cE(V,V,[1,-1,1]),r.bo(V,V,[-1,-1,0]),r.cE(V,V,[2/this.width,2/this.height,1]),this.glCoordMatrix=V,this.pixelMatrix=r.az(new Float64Array(16),this.labelPlaneMatrix,F),this._calcFogMatrices(),this._distanceTileDataCache={},V=r.bi(new Float64Array(16),this.pixelMatrix),!V)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=V,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=r.cH(this);const Ve=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=r.ad(Ve,Ve,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=V;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,g=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,w=[o,o,c];r.b$(w,w,b),r.b$(g,g,-1),r.cI(g,g,w);const C=r.bz();r.bo(C,C,g),r.cE(C,C,w),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,c,b)}_computeCameraPosition(o){const c=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),b=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-o/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-g[0]*w,b.y/this.worldSize-g[1]*w,o/this.worldSize*this._centerAltitude-g[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],b=o[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(w=Math.min((c-g)/b,1)),this._camera.position=r.bF([],this._camera.position,o,w),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,c=this._camera.forward(),{pitch:g,bearing:b}=this._camera.getPitchBearing(),w=r.c6(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(r.al(this._maxPitch)),I=Math.max((o[2]-w)/Math.cos(g),C),L=this._zoomFromMercatorZ(I);r.bF(o,o,c,I),this._pitch=r.aD(g,r.al(this.minPitch),r.al(this.maxPitch)),this.angle=r.bX(b,-Math.PI,Math.PI),this._setZoom(r.aD(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new r.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let c=0,g=r.cx,b=0,w=1/0;for(;g-c>1e-6&&g>c;){const C=c+.5*(g-c),I=this.tileSize*Math.pow(2,C),L=this.getCameraToCenterDistance(this.projection,C,I),F=this.scaleZoom(L/(o*this.tileSize)),V=Math.abs(C-F);V<w&&(w=V,b=C),C<F?c=C:g=C}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(r.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,c){const g=Math.min(o.x,c.x),b=Math.max(o.x,c.x),w=Math.min(o.y,c.y),C=Math.max(o.y,c.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const I=[new r.P(g,w),new r.P(b,C),new r.P(g,C),new r.P(b,w)],L=this.renderWorldCopies?-3:0,F=this.renderWorldCopies?4:1;for(const V of I){const q=this.pointRayIntersection(V);if(q.t<0)return!0;const G=this.rayIntersectionCoordinate(q);if(G.x<L||G.y<0||G.x>F||G.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+r.cJ(this.fovAboveCenter)>88||this.anyCornerOffEdge(new r.P(0,0),new r.P(this.width,this.height))}zoomDeltaToMovement(o,c){const g=r.ae(r.at([],this._camera.position,o)),b=this._zoomFromMercatorZ(g)+c;return g-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([c,g,b],w){const C=[c,g,b,1];r.aA(C,C,w);const I=C[3]=Math.max(C[3],1e-6);return C[0]/=I,C[1]/=I,C[2]/=I,C}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new r.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.P(0,o))}}getCameraToCenterDistance(o,c=this.zoom,g=this.worldSize){const b=r.cA(o,c,this.width,this.height,1024),w=o.pixelSpaceConversion(this.center.lat,g,b);let C=.5/Math.tan(.5*this._fov)*this.height*w;return this.isOrthographic&&(C=r.ai(1,C,r.cO(this.pitch>=jc?1:this.pitch/jc))),C}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&r.az(o,o,this.globeMatrix),o}getFrustum(o){return r.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const Uh=(m,o)=>{if(o>0&&m.terrain&&r.w("Cutoff is currently disabled on terrain"),o<=0||m.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=m.transform,g=Math.max(Math.abs(c._zoom-(m.minCutoffZoom-1)),1),b=c.isLODDisabled(!1)?r.af(60,45,c.pitch):r.af(30,15,c.pitch),w=c._farZ-c._nearZ,C=o*c.height,I=((1-(L=b))*c.cameraToCenterDistance+L*(c._farZ+C))*g;var L;return{shouldRenderCutoff:b<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(I-c._nearZ)/w,(I-C-c._nearZ)/w]}}},Js={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class fp{constructor(o,c){this.aabb=o,this.lastCascade=c}}class pp{add(o,c){const g=this.receivers[o.key];g!==void 0?(g.aabb.min[0]=Math.min(g.aabb.min[0],c.min[0]),g.aabb.min[1]=Math.min(g.aabb.min[1],c.min[1]),g.aabb.min[2]=Math.min(g.aabb.min[2],c.min[2]),g.aabb.max[0]=Math.max(g.aabb.max[0],c.max[0]),g.aabb.max[1]=Math.max(g.aabb.max[1],c.max[1]),g.aabb.max[2]=Math.max(g.aabb.max[2],c.max[2])):this.receivers[o.key]=new fp(c,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,c,g){const b=r.cV.fromPoints(o.points);let w=0;for(const C in this.receivers){const I=this.receivers[C];if(!I||!b.intersectsAabb(I.aabb))continue;I.aabb.min=b.closestPoint(I.aabb.min),I.aabb.max=b.closestPoint(I.aabb.max);const L=I.aabb.getCorners();for(let F=0;F<g.length;F++){let V=!0;for(const q of L){const G=[q[0]*c,q[1]*c,q[2]];if(r.ad(G,G,g[F].matrix),G[0]<-1||G[0]>1||G[1]<-1||G[1]>1){V=!1;break}}if(I.lastCascade=F,w=Math.max(w,F),V)break}}return w+1}}class Wa{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new pp,this._depthMode=new mn(o.context.gl.LEQUAL,mn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(Js,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(Js,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(Js,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,c){const g=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const b=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||b<=0||(this._shadowLayerCount=g.style.order.reduce((he,le)=>{const fe=g.style._mergedLayers[le];return he+(fe.hasShadowPass()&&!fe.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const w=g.context,C=Js.shadowMapResolution,I=Js.shadowMapResolution;if(this._cascades.length===0||Js.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let he=0;he<Js.cascadeCount;++he){const le=g._shadowMapDebug,fe=w.gl,ce=w.createFramebuffer(C,I,le,"texture"),ve=new r.T(w,{width:C,height:I,data:null},fe.DEPTH_COMPONENT16);if(ce.depthAttachment.set(ve.texture),le){const Ae=new r.T(w,{width:C,height:I,data:null},fe.RGBA8);ce.colorAttachment.set(Ae.texture)}this._cascades.push({framebuffer:ce,texture:ve,matrix:[],far:0,boundingSphereRadius:0,frustum:new r.cn,scale:0})}}this.shadowDirection=Fm(c);let L=0;if(o.elevation){const he=o.elevation,le=[1e4,-1e4];he.visibleDemTiles.filter(fe=>fe.dem).forEach(fe=>{const ce=fe.dem.tree;le[0]=Math.min(le[0],ce.minimums[0]),le[1]=Math.max(le[1],ce.maximums[0])}),le[0]!==1e4&&(L=(le[1]-le[0])*he.exaggeration())}const F=1.5*o.cameraToCenterDistance,V=3*F,q=new Float64Array(16);for(let he=0;he<this._cascades.length;++he){const le=this._cascades[he];let fe=o.height/50,ce=1;Js.cascadeCount===1?ce=V:he===0?ce=F:(fe=F,ce=V);const[ve,Ae]=Nm(o,this.shadowDirection,fe,ce,Js.shadowMapResolution,L);le.scale=o.scale,le.matrix=ve,le.boundingSphereRadius=Ae,r.bi(q,le.matrix),le.frustum=r.cn.fromInvProjectionMatrix(q,1,0,!0),le.far=ce}const G=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[G].far,this._cascades[G].far],this._uniformValues.u_shadow_intensity=b,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Js.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Js.shadowMapResolution,this._uniformValues.u_shadowmap_0=ks.ShadowMap0,this._uniformValues.u_shadowmap_1=ks.ShadowMap0+1,this._groundShadowTiles=g.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const J=g.transform.elevation;for(const he of this._groundShadowTiles){let le={min:0,max:0};if(J){const fe=J.getMinMaxForTile(he);fe&&(le=fe)}this.addShadowReceiver(he.toUnwrapped(),le.min,le.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,c){if(!this.enabled)return;const g=this.painter,b=g.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(g.transform.getFrustum(0),g.transform.worldSize,this._cascades),b.viewport.set([0,0,Js.shadowMapResolution,Js.shadowMapResolution]);for(let w=0;w<this._numCascadesToRender;++w){g.currentShadowCascade=w,b.bindFramebuffer.set(this._cascades[w].framebuffer.framebuffer),b.clear({color:r.am.white,depth:1});for(const C of o.order){const I=o._mergedLayers[C];if(!I.hasShadowPass()||I.isHidden(g.transform.zoom))continue;const L=o.getLayerSourceCache(I),F=L?c[L.id]:void 0;(I.type==="model"||F&&F.length)&&g.renderLayer(g,L,I,F)}}g.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,c=o.style,g=o.context,b=c.directionalLight,w=c.ambientLight;if(!b||!w)return;const C=[],I=Uh(o,o.longestCutoffRange);I.shouldRenderCutoff&&C.push("RENDER_CUTOFF"),C.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&C.push("NORMAL_OFFSET");const L=Vl(c,b,w),F=new mn(g.gl.LEQUAL,mn.ReadOnly,o.depthRangeFor3D);for(const V of this._groundShadowTiles){const q=V.toUnwrapped(),G=o.isTileAffectedByFog(V),J=o.getOrCreateProgram("groundShadow",{defines:C,overrideFog:G});this.setupShadows(q,J),o.uploadCommonUniforms(g,J,q,null,I);const he={u_matrix:o.transform.calculateProjMatrix(q),u_ground_shadow_factor:L};J.draw(o,g.gl.TRIANGLES,F,Yn.disabled,vi.multiply,Jn.disabled,he,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?vi.unblended:vi.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const c=this.painter.transform,g=c.calculatePosMatrix(o,c.worldSize);return r.az(g,this._cascades[this.painter.currentShadowCascade].matrix,g),Float32Array.from(g)}calculateShadowPassMatrixFromMatrix(o){return r.az(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,c,g,b=0){if(!this.enabled)return;const w=this.painter.transform,C=this.painter.context,I=C.gl,L=this._uniformValues,F=new Float64Array(16),V=w.calculatePosMatrix(o,w.worldSize);for(let q=0;q<this._cascades.length;q++)r.az(F,this._cascades[q].matrix,V),L[q===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(F),C.activeTexture.set(I.TEXTURE0+ks.ShadowMap0+q),this._cascades[q].texture.bind(I.NEAREST,I.CLAMP_TO_EDGE);if(this.useNormalOffset=!!g,this.useNormalOffset){const q=r.cT(o.canonical),G=2/w.tileSize*r.aj/Js.shadowMapResolution,J=G*this._cascades[0].boundingSphereRadius,he=G*this._cascades[this._cascades.length-1].boundingSphereRadius,le=(g==="vector-tile"?1:3)/Math.pow(2,b-o.canonical.z-(1-w.zoom+Math.floor(w.zoom)));L.u_shadow_normal_offset=[q,J*le,he*le],L.u_shadow_bias=[6e-5,.0012,.012]}else L.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(C,L)}setupShadowsFromMatrix(o,c,g=!1){if(!this.enabled)return;const b=this.painter.context,w=b.gl,C=this._uniformValues,I=new Float64Array(16);for(let L=0;L<Js.cascadeCount;L++)r.az(I,this._cascades[L].matrix,o),C[L===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(I),b.activeTexture.set(w.TEXTURE0+ks.ShadowMap0+L),this._cascades[L].texture.bind(w.NEAREST,w.CLAMP_TO_EDGE);if(this.useNormalOffset=g,g){const L=Js.normalOffset;C.u_shadow_normal_offset=[1,L,L],C.u_shadow_bias=[6e-5,.0012,.012]}else C.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(b,C)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,c,g,b){if(b[2]>=0)return{};const w=function(L,F,V){const q=V/(1<<L.canonical.z);return new r.cV([L.canonical.x*q+L.wrap*V,L.canonical.y*q+L.wrap*V,0],[(L.canonical.x+1)*q+L.wrap*V,(L.canonical.y+1)*q+L.wrap*V,F])}(o,c,g).getCorners(),C=c/-b[2];b[0]<0?(r.cU(w[0],w[0],[b[0]*C,0,0]),r.cU(w[3],w[3],[b[0]*C,0,0])):b[0]>0&&(r.cU(w[1],w[1],[b[0]*C,0,0]),r.cU(w[2],w[2],[b[0]*C,0,0])),b[1]<0?(r.cU(w[0],w[0],[0,b[1]*C,0]),r.cU(w[1],w[1],[0,b[1]*C,0])):b[1]>0&&(r.cU(w[2],w[2],[0,b[1]*C,0]),r.cU(w[3],w[3],[0,b[1]*C,0]));const I={};return I.vertices=w,I.planes=[Xa(w[1],w[0],w[4]),Xa(w[2],w[1],w[5]),Xa(w[3],w[2],w[6]),Xa(w[0],w[3],w[7])],I}addShadowReceiver(o,c,g){this._receivers.add(o,r.cV.fromTileIdAndHeight(o,c,g))}getMaxCascadeForTile(o){const c=this._receivers.get(o);return c&&c.lastCascade?c.lastCascade:0}}function Xa(m,o,c){const g=r.at([],c,o),b=r.at([],m,o),w=r.bG([],g,b),C=r.ae(w);return C===0?[0,0,1,0]:(r.b$(w,w,1/C),[w[0],w[1],w[2],-r.bE(w,o)])}function Fm(m){const o=m.properties.get("direction"),c=r.cR(o.x,o.y,o.z);c[2]=r.aD(c[2],0,75);const g=r.cW([c[0],c[1],c[2]]);return r.cS(g.x,g.y,g.z)}function Vl(m,o,c){const g=o.properties.get("color-use-theme")==="none",b=o.properties.get("color"),w=o.properties.get("intensity"),C=o.properties.get("direction"),I=[C.x,C.y,C.z],L=c.properties.get("color-use-theme")==="none",F=c.properties.get("color"),V=c.properties.get("intensity"),q=Math.max(r.bE([0,0,1],I),0),G=[0,0,0];r.b$(G,F.toRenderColor(L?null:m.getLut(o.scope)).toArray01Linear().slice(0,3),V);const J=[0,0,0];return r.b$(J,b.toRenderColor(g?null:m.getLut(c.scope)).toArray01Linear().slice(0,3),q*w),r.cX([G[0]>0?G[0]/(G[0]+J[0]):0,G[1]>0?G[1]/(G[1]+J[1]):0,G[2]>0?G[2]/(G[2]+J[2]):0])}function Nm(m,o,c,g,b,w){const C=m.zoom,I=m.scale,L=m.worldSize,F=1/L,V=m.aspect,q=Math.sqrt(1+V*V)*Math.tan(.5*m.fovX),G=q*q,J=g-c,he=g+c;let le,fe;G>J/he?(le=g,fe=g*q):(le=.5*he*(1+G),fe=.5*Math.sqrt(J*J+2*(g*g+c*c)*G+he*he*G*G));const ce=m.projection.pixelsPerMeter(m.center.lat,L),ve=m._camera.getCameraToWorldMercator(),Ae=[0,0,-le*F];r.ad(Ae,Ae,ve);let De=fe*F;const Ne=m._edgeInsets;if(!(Ne.left===0&&Ne.top===0&&Ne.right===0&&Ne.bottom===0||Ne.left===Ne.right&&Ne.top===Ne.bottom)){const Ot=m._camera.getWorldToCamera(m.worldSize,m.projection.zAxisUnit==="meters"?ce:1),Ct=m._camera.getCameraToClipPerspective(m._fov,m.width/m.height,c,g);Ct[8]=2*-m.centerOffset.x/m.width,Ct[9]=2*m.centerOffset.y/m.height;const Lt=new Float64Array(16);r.cB(Lt,Ct,Ot);const Nt=new Float64Array(16);r.bi(Nt,Lt);const pn=r.cn.fromInvProjectionMatrix(Nt,L,C,!0);for(const _n of pn.points){const dn=((ze=_n)[0]/=I,ze[1]/=I,ze[2]=r.c6(ze[2],m._center.lat),ze);De=Math.max(De,r.c0(r.cY([],Ae,dn)))}}var ze;De*=b/(b-1);const ke=Math.acos(o[2]),Re=Math.atan2(-o[0],-o[1]),Ve=new fs;Ve.position=Ae,Ve.setPitchBearing(ke,Re);const We=Ve.getWorldToCamera(L,ce),ct=De*L,rt=Math.min(m._mercatorZfromZoom(17)*L*-2,-2*ct),Et=Ve.getCameraToClipOrthographic(-ct,ct,-ct,ct,rt,(ct+w*ce)/o[2]),wt=new Float64Array(16);r.az(wt,Et,We);const Vt=r.cS(Math.floor(1e6*Ae[0])/1e6*L,Math.floor(1e6*Ae[1])/1e6*L,0),nt=.5*b,ft=[0,0,0];r.ad(ft,Vt,wt),r.b$(ft,ft,nt);const Qe=[Math.floor(ft[0]),Math.floor(ft[1]),Math.floor(ft[2])],Mt=[0,0,0];r.at(Mt,ft,Qe),r.b$(Mt,Mt,-1/nt);const pt=new Float64Array(16);return r.bx(pt),r.bo(pt,pt,Mt),r.az(wt,pt,wt),[wt,ct]}class Uc extends r.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(o,c){return r.aS(this.requestManager.transformRequest(c,r.R.Model).url).then(g=>{if(!g)return;const b=r.aT(g),w=new r.aU(o,void 0,void 0,b);return w.computeBoundsAndApplyParent(),w}).catch(g=>{if(g&&g.status===404)return null;this.fire(new r.z(new Error(`Could not load model ${o} from ${c}: ${g.message}`)))})}load(o,c,g={forceReload:!1}){this.models[c]||(this.models[c]={});const b=Object.keys(o),w=[],C=[];for(const I of b){const L=o[I];this.hasURLBeenRequested(L)&&!g.forceReload||(this.modelByURL[L]={modelId:I,scope:c},w.push(this.loadModel(I,L)),C.push(I)),this.models[c][I]||(this.models[c][I]={model:null,numReferences:1})}this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+C.length,Promise.allSettled(w).then(I=>{for(let L=0;L<I.length;L++){const{status:F}=I[L];if(F==="rejected")continue;const{value:V}=I[L];this.models[c][C[L]]||(this.models[c][C[L]]={model:null,numReferences:1}),this.models[c][C[L]].model=V}this.numModelsLoading[c]-=C.length,this.fire(new r.A("data",{dataType:"style"}))}).catch(I=>{this.fire(new r.z(new Error(`Could not load models: ${I.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,c,g={exactIdMatch:!1}){return!!(g.exactIdMatch?this.getModel(o,c):this.getModelByURL(this.modelUris[c][o]))}getModel(o,c){return this.models[c]||(this.models[c]={}),this.models[c][o]?this.models[c][o].model:void 0}getModelByURL(o){if(!o)return null;const c=this.modelByURL[o];return c?this.models[c.scope][c.modelId].model:null}hasModelBeenAdded(o,c){return this.models[c]&&this.models[c][o]!==void 0}getModelURIs(o){return this.modelUris[o]||{}}addModel(o,c,g){this.models[g]||(this.models[g]={}),this.modelUris[g]||(this.modelUris[g]={});const b=this.requestManager.normalizeModelURL(c);if((this.hasModel(o,g,{exactIdMatch:!0})||this.hasModelBeenAdded(o,g))&&this.modelUris[g][o]===b)this.models[g][o].numReferences++;else if(this.hasURLBeenRequested(b)){const{scope:w,modelId:C}=this.modelByURL[b];this.models[w][C].numReferences++}else this.modelUris[g][o]=b,this.load({[o]:this.modelUris[g][o]},g)}addModelURLs(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const g=this.modelUris[c];for(const b in o)g[b]=this.requestManager.normalizeModelURL(o[b])}reloadModels(o){this.load(this.modelUris[o],o,{forceReload:!0})}addModelsFromBucket(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const g={};for(const b of o)this.hasModel(b,c,{exactIdMatch:!0})||this.hasURLBeenRequested(b)?this.models[c][b].numReferences++:this.modelUris[c][b]&&!this.hasURLBeenRequested(b)?g[b]=this.modelUris[c][b]:!this.hasURLBeenRequested(b)&&r.cZ(b,!1)&&(this.modelUris[c][b]=this.requestManager.normalizeModelURL(b),g[b]=this.modelUris[c][b]);this.load(g,c)}hasURLBeenRequested(o){return this.modelByURL[o]!==void 0}removeModel(o,c,g=!1){if(this.models[c]&&this.models[c][o]&&(this.models[c][o].numReferences--,this.models[c][o].numReferences===0)){const b=this.modelUris[c][o];g||delete this.modelUris[c][o],delete this.modelByURL[b];const w=this.models[c][o].model;if(!w)return;delete this.models[c][o],w.destroy()}}destroy(){for(const o of Object.keys(this.models))for(const c of Object.keys(this.models[o])){const g=this.models[o][c].model;delete this.models[o][c],g&&g.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,c){this.models[c]||(this.models[c]={});for(const g in this.models[c])this.models[c][g].model&&this.models[c][g].model.upload(o.context)}}const dy=new r.a7({data:new r.a8(r.a5.colorTheme.data)}),Px={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Vh(m){return m=m||{},Object.assign(m,Px)}class jm extends r.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},r.aV(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new r.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(C,I){const[L,F]=C,{center:V,radius:q}=I,[G,J]=V,he=Math.abs(L-G);return Math.sqrt((he>180?360-he:he)**2+(F-J)**2)<=q}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new r.A("floorplangone")));const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},g=new r.P(this._map.transform.width/2,this._map.transform.height/2),b=[new r.P(0,0),new r.P(this._map.transform.width,this._map.transform.height)],w=this._map.queryRenderedFeatures(o?b:g,c);w.length>0&&(this._selectedFloorplan&&w[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=w[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(w){const[[C,I],[L,F]]=w,V=(L-C+360)%360,q=V>180?360-V:V;return{center:[(C+q/2+360)%360,(I+F)/2],radius:Math.sqrt(q**2+(F-I)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const c=this._floorplanStates[this._indoorData.id].selectedBuilding,g=this._floorplanStates[this._indoorData.id].selectedLevel;let b;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const w of this._indoorData.levels)w.id===this._selectedLevel.id&&(b=w.id);if(this.fire(new r.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:b})),c){const w=this._indoorData.buildings.find(C=>C.id===c);this._buildingSelected(w,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(g){const w=this._indoorData.levels.find(C=>C.id===g);this._updateLevels(w,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,c){c&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const g=this._indoorData.levels.filter(b=>o.levels.includes(b.id));this.fire(new r.A("buildingselected",{buildingId:o.id,levels:g}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const c=this._indoorData.levels.find(g=>g.id===o);this._updateLevels(c,!0)}this.fire(new r.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,c){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(c&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function g(F){const V=F.indexOf("/floor/");if(V===-1)return F;const q=V+7,G=F.indexOf("/",q);return G===-1?F.slice(q):F.slice(q,G)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const b=[],w={},C={},I={},L={};for(const F of this._indoorData.levels)if(b.push(F.id),w[F.id]=F.height,C[F.id]=F.base,o){if(this.mergeFloors){const V=g(o.id),q=g(F.id);I[F.id]=q===V?"true":"false"}else I[F.id]=F.id===o.id?"true":"false";L[F.id]=F.base<o.base?"true":"false"}else L[F.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",b]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",w]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",C]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",I]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",L]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),c&&o.extent)){const F=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),V=this._map.getZoom(),q=F.zoom?Math.abs(V-F.zoom):0;this._map.fitBounds(o.extent,q>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:V})}}selectFloorplan(o){const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},g=[new r.P(0,0),new r.P(this._map.transform.width,this._map.transform.height)],b=this._map.queryRenderedFeatures(g,c);if(b.length>0){for(const w of b)if(JSON.parse(w.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=w,this._floorplanSelected(!0);break}}}selectBuilding(o){const c=this._indoorData.buildings.find(g=>g.id===o);this._buildingSelected(c,!0)}selectLevel(o){this._levelSelected(o)}}function mp(m){if(!m.metadata||!m.metadata.content_area)return;const o=r.q.devicePixelRatio,{left:c,top:g,width:b,height:w}=m.metadata.content_area,C=c*o,I=g*o;return[C,I,C+b*o,I+w*o]}function Yd(m){if(m)return m.map(([o,c])=>[o*r.q.devicePixelRatio,c*r.q.devicePixelRatio])}class fy{constructor(o,c,g){this.id=o,this.scope=c,this.sourceCache=g,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(o){this.missingRequests.has(o.name)||this.pendingRequests.has(o.name)||this.pendingRequests.add(o.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const o=new Map;if(!this.sourceCache.loaded())return o;const c=this.sourceCache.getVisibleCoordinates();if(c.length===0)return o;const g=this.sourceCache.getSource();if(!(g instanceof ls))return o;const b=c.map(C=>this.sourceCache.getTile(C)),w=g.getImages(b,Array.from(this.pendingRequests));for(const[C,I]of w)o.set(r.I.from({name:C,iconsetId:this.id}),I),this.pendingRequests.delete(C);for(const C of this.pendingRequests)this.missingRequests.add(C);return this.pendingRequests.clear(),o}}const Ra=(m,o)=>Fe(m,o&&o.filter(c=>c.identifier!=="source.canvas")),$h=r.aF(ji,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),Um=r.aF(ji,["setCenter","setZoom","setBearing","setPitch"]),mc=new Set(["background","sky","slot","custom"]),$l={version:8,layers:[],sources:{}},Vm={duration:300,delay:0};class Za extends r.E{constructor(o,c={}){super(),this.map=o,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=r.l({},Vm),this._buildingIndex=new ay(this),this.crossTileSymbolIndex=new To,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new Ln,this.dispatcher=c.dispatcher?c.dispatcher:new r.D(r.d0(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new hi(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new r.d1(o._requestManager,c.localFontFamily?r.d2.all:c.localIdeographFontFamily?r.d2.ideographs:r.d2.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new Uc(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:c.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",r.d3());const g=this;this._rtlTextPluginCallback=Za.registerForPluginStateChange(b=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(w,C)=>{if(r.d4(w),C&&C.every(I=>I))for(const I in g._sourceCaches){const L=g._sourceCaches[I],F=L.getSource().type;F!=="vector"&&F!=="geojson"||L.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const w=this.getOwnSource(b.sourceId);if(w&&w.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===w.id&&this._validateLayer(I)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(r.f(o))return o;const c=r.d5(o);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${r.d6(JSON.stringify(o))}`}_diffStyle(o,c,g){this.globalId=this._getGlobalId(o);const b=(w,C)=>{try{C(null,this.setState(w,g))}catch(I){C(I,!1)}};if(typeof o=="string"){const w=this.map._requestManager.normalizeStyleURL(o),C=this.map._requestManager.transformRequest(w,r.R.Style);r.n(C,(I,L)=>{I?this.fire(new r.z(I)):L&&b(L,c)})}else typeof o=="object"&&b(o,c)}loadURL(o,c={}){this.fire(new r.A("dataloading",{dataType:"style"}));const g=typeof c.validate=="boolean"?c.validate:!r.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,c.accessToken),this.resolvedImports.add(o);const b=this.importsCache.get(o);if(b)return this._load(b,g);const w=this.map._requestManager.transformRequest(o,r.R.Style);this._request=r.n(w,(C,I)=>{if(this._request=null,C)this.fire(new r.z(C));else if(I)return this.importsCache.set(o,I),this._load(I,g)})}loadJSON(o,c={}){this.fire(new r.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=r.q.frame(()=>{this._request=null,this._load(o,c.validate!==!1)})}loadEmpty(){this.fire(new r.A("dataloading",{dataType:"style"})),this._load($l,!1)}_loadImports(o,c,g){if(this.importDepth>=4)return r.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const b=[];for(const w of o){const C=this._createFragmentStyle(w),I=new Promise(V=>{C.once("style.import.load",V),C.once("error",V)}).then(()=>this.mergeAll());if(b.push(I),this.resolvedImports.has(w.url)){C.loadEmpty();continue}const L=w.data||this.importsCache.get(w.url);L?(C.loadJSON(L,{validate:c}),this._isInternalStyle(L)&&(C.globalId=null)):w.url?C.loadURL(w.url,{validate:c}):C.loadEmpty();const F={style:C,id:w.id,config:w.config};if(g){const V=this.fragments.findIndex(({id:q})=>q===g);this.fragments=this.fragments.slice(0,V).concat(F).concat(this.fragments.slice(V))}else this.fragments.push(F)}return Promise.allSettled(b)}getImportGlobalIds(o=this,c=new Set){for(const g of o.fragments)g.style.globalId&&c.add(g.style.globalId),this.getImportGlobalIds(g.style,c);return[...c.values()]}_createFragmentStyle(o){const c=this.scope?r.C(o.id,this.scope):o.id;let g;const b=this._initialConfig&&this._initialConfig[c];(o.config||b)&&(g=r.l({},o.config,b));const w=new Za(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:g,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return w.setEventedParent(this.map,{style:w}),w}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,c){const g=o.indoor?Vh(o.schema):o.schema;if(this._isInternalStyle(o)){const C=r.l({},$l,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(C,c)}if(this.updateConfig(this._config,g),c&&Ra(this,ts(o)))return;this._loaded=!0,this.stylesheet=r.d7(o);const b=()=>{for(const F in o.sources)this.addSource(F,o.sources[F],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const F in o.iconsets)this.addIconset(F,o.iconsets[F]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const C=ip(this.stylesheet.layers);if(this._order=C.map(F=>F.id),this.stylesheet.light&&r.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const F=this.stylesheet.lights[0];this.light=new Je(F.properties,F.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Je(this.stylesheet.light)),this._layers={};for(const F of C){const V=r.dc(F,this.scope,this._styleColorTheme.lut,this.options);V.configDependencies.size!==0&&this._configDependentLayers.add(V.fqid),V.setEventedParent(this,{layer:{id:V.id}}),this._layers[V.id]=V;const q=this.getOwnLayerSourceCache(V),G=!!this.directionalLight&&this.directionalLight.shadowsEnabled();q&&V.canCastShadows()&&G&&(q.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const I=this.stylesheet.terrain;I&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(I,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new r.A("data",{dataType:"style"}));const L=this.isRootStyle();o.imports?this._loadImports(o.imports,c).then(()=>{this._reloadImports(),this.fire(new r.A(L?"style.load":"style.import.load"))}).catch(F=>{this.fire(new r.z(new Error("Failed to load imports",F))),this.fire(new r.A(L?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new r.A(L?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const w=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(w){const C=this._evaluateColorThemeData(w);this._loadColorTheme(C).then(()=>{b()}).catch(I=>{r.w(`Couldn't load color theme from the stylesheet: ${I}`),b()})}else this._styleColorTheme.lut=null,b()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,c,g,b,w,C,I,L,F,V;const q={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(G=>{if(G.stylesheet){if(G.light!=null&&(o=G.light),G.stylesheet.lights)for(const J of G.stylesheet.lights)J.type==="ambient"&&G.ambientLight!=null&&(c=G.ambientLight),J.type==="directional"&&G.directionalLight!=null&&(g=G.directionalLight);b=this._prioritizeTerrain(b,G.terrain,G.stylesheet.terrain),G.stylesheet.fog&&G.fog!=null&&(w=G.fog),G.stylesheet.snow&&G.snow!=null&&(C=G.snow),G.stylesheet.rain&&G.rain!=null&&(I=G.rain),G.stylesheet.camera!=null&&(V=G.stylesheet.camera),G.stylesheet.projection!=null&&(L=G.stylesheet.projection),G.stylesheet.transition!=null&&(F=G.stylesheet.transition),q[G.scope]=G._styleColorTheme}}),this.light=o,this.ambientLight=c,this.directionalLight=g,this.fog=w,this.snow=C,this.rain=I,this._styleColorThemeForScope=q,b===null?delete this.terrain:this.terrain=b,this.camera=V||{"camera-projection":"perspective"},this.projection=L||{name:"mercator"},this.transition=r.l({},Vm,F),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const c=g=>{for(const b of g.fragments)c(b.style);o(g)};c(this)}_prioritizeTerrain(o,c,g){const b=o&&o.drapeRenderMode===0;return g===null?c&&c.drapeRenderMode===0?c:b?o:null:c!=null&&(!o||b||c&&c.drapeRenderMode===1)?c:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{o=this._prioritizeTerrain(o,c.terrain,c.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(o=c.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},c={},g={};this.forEachFragmentStyle(b=>{for(const w in b._sourceCaches){const C=r.C(w,b.scope);o[C]=b._sourceCaches[w]}for(const w in b._otherSourceCaches){const C=r.C(w,b.scope);c[C]=b._otherSourceCaches[w]}for(const w in b._symbolSourceCaches){const C=r.C(w,b.scope);g[C]=b._symbolSourceCaches[w]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=g}mergeLayers(){const o={},c=[],g={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(w=>{for(const C of w._order){const I=w._layers[C];if(I.type==="slot"){const L=r.d8(C);if(o[L])continue;o[L]=[]}I.slot&&o[I.slot]?o[I.slot].push(I):c.push(I)}}),this._mergedOrder=[];const b=(w=[])=>{for(const C of w)if(C.type==="slot"){const I=r.d8(C.id);o[I]&&b(o[I]),this._mergedSlots.push(I)}else{const I=r.C(C.id,C.scope);this._mergedOrder.push(I),g[I]=C,C.is3D(!!this.terrain)&&(this._has3DLayers=!0),C.type==="circle"&&(this._hasCircleLayers=!0),C.type==="symbol"&&(this._hasSymbolLayers=!0),C.type==="clip"&&(this._clipLayerPresent=!0)}};b(c),this._mergedOrder.sort((w,C)=>{const I=g[w],L=g[C];return I.hasInitialOcclusionOpacityProperties?L.is3D(!!this.terrain)?1:0:I.is3D(!!this.terrain)&&L.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=g,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=r.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(c,g,b){const w=r.l({},g);for(const I of Object.keys(r.a5.colorTheme))w[I]===void 0&&(w[I]=r.a5.colorTheme[I].default);const C=new r.a6(dy,c,new Map(b));return C.setTransitionOrValue(w,b),C.untransitioned().possiblyEvaluate(new r.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((g,b)=>{const w="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void g();let C=o;C.startsWith(w)||(C=w+C);const I=r.I.from("mapbox-reserved-lut"),L=new Image;L.src=C,L.onerror=()=>{this._styleColorTheme.lutLoading=!1,b(new Error("Failed to load image data"))},L.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void g();this._styleColorTheme.lutLoading=!1;const{width:F,height:V,data:q}=r.q.getImageData(L);if(V>32)return void b(new Error("The height of the image must be less than or equal to 32 pixels."));if(F!==V*V)return void b(new Error("The width of the image must be equal to the height squared."));this.getImage(I)&&this.removeImage(I),this.addImage(I,{data:new r.r({width:F,height:V},q),pixelRatio:1,sdf:!1,usvg:!1,version:0});const G=this.imageManager.getImage(I,this.scope);G?(this._styleColorTheme.lut={image:G.data,data:o},g()):b(new Error("Missing LUT image."))}})}getLut(o){const c=this._styleColorThemeForScope[o];return c?c.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(c,g,b){let w,C,I;const L=r.q.devicePixelRatio>1?"@2x":"";let F=r.n(g.transformRequest(g.normalizeSpriteURL(c,L,".json"),r.R.SpriteJSON),(G,J)=>{F=null,I||(I=G,w=J,q())}),V=r.o(g.transformRequest(g.normalizeSpriteURL(c,L,".png"),r.R.SpriteImage),(G,J)=>{V=null,I||(I=G,C=J,q())});function q(){if(I)b(I);else if(w&&C){const G=r.q.getImageData(C),J={};for(const he in w){const{width:le,height:fe,x:ce,y:ve,sdf:Ae,pixelRatio:De,stretchX:Ne,stretchY:ze,content:ke}=w[he],Re=new r.r({width:le,height:fe});r.r.copy(G,Re,{x:ce,y:ve},{x:0,y:0},{width:le,height:fe},null),J[he]={data:Re,pixelRatio:De,sdf:Ae,stretchX:Ne,stretchY:ze,content:ke,usvg:!1}}b(null,J)}}return{cancel(){F&&(F.cancel(),F=null),V&&(V.cancel(),V=null)}}}(o,this.map._requestManager,(c,g)=>{if(this._spriteRequest=null,c)this.fire(new r.z(c));else if(g){const b=new Map;for(const w in g)b.set(r.I.from(w),g[w]);this.addImages(b)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new r.A("data",{dataType:"style"}))})}addIconset(o,c){if(c.type==="sprite")return void this._loadSprite(c.url);const g=this.getOwnSourceCache(c.source);if(!g)return void this.fire(new r.z(new Error(`Source "${c.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));const b=g.getSource();if(b.type!=="raster-array")return void this.fire(new r.z(new Error(`Source "${c.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));b.partial=!1;const w=new fy(o,this.scope,g);this.imageManager.addImageProvider(w,this.scope)}removeIconset(o){this.imageManager.removeImageProvider(o,this.scope)}_loadIconset(o){if(!r.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const c=this.map._spriteFormat==="auto";var g,b;this._spriteRequest=(b=(w,C)=>{if(this._spriteRequest=null,w)c?this._loadSprite(o):this.fire(new r.z(w));else if(C){const I=new Map;for(const L in C)I.set(r.I.from(L),C[L]);this.addImages(I)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new r.A("data",{dataType:"style"}))},r.br((g=this.map._requestManager).transformRequest(g.normalizeIconsetURL(o),r.R.Iconset),(w,C)=>{if(w)return void b(w);const I={},L=r.c_(new r.bq(C));for(const F of L.icons){const V={version:1,pixelRatio:r.q.devicePixelRatio,content:mp(F),stretchX:F.metadata?Yd(F.metadata.stretch_x_areas):void 0,stretchY:F.metadata?Yd(F.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:F};I[F.name]=V}b(null,I)}))}_validateLayer(o){const c=this.getOwnSource(o.source);if(!c)return;const g=o.sourceLayer;g&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(g)===-1)&&this.fire(new r.z(new Error(`Source layer "${g}" does not exist on source "${c.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,c)=>{const g=this.fragments[c];return g&&g.style&&(o.data=g.style.serialize()),o})}_serializeSources(){const o={};for(const c in this._sourceCaches){const g=this._sourceCaches[c].getSource();o[g.id]||(o[g.id]=g.serialize())}return o}_serializeLayers(o){const c=[];for(const g of o){const b=this._layers[g];b&&b.type!=="custom"&&c.push(b.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const c=this.getOwnLayer(o);if(c)return c;this.fire(new r.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const c=this.getOwnSource(o);if(c)return c;this.fire(new r.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,c){const g=this.map.painter;if(g)for(let b=o.minzoom||0;b<(o.maxzoom||25.5);b++){const w=o.getProgramIds();if(w)for(const C of w){const I=o.getDefaultProgramParams(C,c.zoom,this._styleColorTheme.lut);I&&(g.style=this,this.fog&&(g._fogVisible=!0,I.overrideFog=!0,g.getOrCreateProgram(C,I)),g._fogVisible=!1,I.overrideFog=!1,g.getOrCreateProgram(C,I),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(I.overrideRtt=!0,g.getOrCreateProgram(C,I)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const c=this.calculateLightsBrightness();o.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c));const g=this._changes.isDirty();let b=!1;if(this._changes.isDirty()){const I=this._changes.getLayerUpdatesByScope();for(const L in I){const{updatedIds:F,removedIds:V}=I[L];(F||V)&&(this._updateWorkerLayers(L,F,V),b=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const w={};for(const I in this._mergedSourceCaches){const L=this._mergedSourceCaches[I];w[I]=L.used,L.used=!1,L.tileCoverLift=0}for(const I of this._mergedOrder){const L=this._mergedLayers[I];if(L.recalculate(o,this._availableImages),!L.isHidden(o.zoom)){const F=this.getLayerSourceCache(L);F&&(F.used=!0,F.tileCoverLift=Math.max(F.tileCoverLift,L.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(L,o)}):this.precompilePrograms(L,o))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&b&&this.mergeLayers();const C=this.imageManager.getPendingImageProviders();for(const I of C)I.sourceCache.used=!0;for(const I in w){const L=this._mergedSourceCaches[I];w[I]!==L.used&&L.getSource().fire(new r.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),g&&this.fire(new r.A("data",{dataType:"style"}))}updateImageProviders(){const o=this.imageManager.getPendingImageProviders();for(const c of o){const g=c.resolvePendingRequests(),b=this.getFragmentStyle(c.scope);b&&b.addImages(g)}}_updateTilesForChangedImages(){const o={};for(const c in this._mergedSourceCaches){const g=this._mergedSourceCaches[c].getSource().scope;o[g]=o[g]||this._changes.getUpdatedImages(g),o[g].length!==0&&this._mergedSourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o[g])}for(const c in o)this._changes.resetUpdatedImages(c)}_updateWorkerLayers(o,c,g){const b=this.getFragmentStyle(o);b&&this.dispatcher.broadcast("updateLayers",{layers:c?b._serializeLayers(c):[],scope:o,removedIds:g||[],options:b.options})}setState(o,c){if(this._checkLoaded(),Ra(this,ts(o)))return!1;(o=r.d7(o)).layers=ip(o.layers);const g=function(C,I){if(!C)return[{command:ji.setStyle,args:[I]}];let L=[];try{if(!r.bv(C.version,I.version))return[{command:ji.setStyle,args:[I]}];if(r.bv(C.center,I.center)||L.push({command:ji.setCenter,args:[I.center]}),r.bv(C.zoom,I.zoom)||L.push({command:ji.setZoom,args:[I.zoom]}),r.bv(C.bearing,I.bearing)||L.push({command:ji.setBearing,args:[I.bearing]}),r.bv(C.pitch,I.pitch)||L.push({command:ji.setPitch,args:[I.pitch]}),r.bv(C.sprite,I.sprite)||L.push({command:ji.setSprite,args:[I.sprite]}),r.bv(C.glyphs,I.glyphs)||L.push({command:ji.setGlyphs,args:[I.glyphs]}),r.bv(C.imports,I.imports)||function(J=[],he=[],le){he=he||[];const fe=(J=J||[]).map(jl),ce=he.map(jl),ve=J.reduce(Ih,{}),Ae=he.reduce(Ih,{}),De=fe.slice();let Ne,ze,ke,Re;for(Ne=0,ze=0;Ne<fe.length;Ne++)ke=fe[Ne],Ae.hasOwnProperty(ke)?ze++:(le.push({command:ji.removeImport,args:[ke]}),De.splice(De.indexOf(ke,ze),1));for(Ne=0,ze=0;Ne<ce.length;Ne++)ke=ce[ce.length-1-Ne],De[De.length-1-Ne]!==ke&&(ve.hasOwnProperty(ke)?(le.push({command:ji.removeImport,args:[ke]}),De.splice(De.lastIndexOf(ke,De.length-ze),1)):ze++,Re=De[De.length-Ne],le.push({command:ji.addImport,args:[Ae[ke],Re]}),De.splice(De.length-Ne,0,ke));for(const Ve of he){const We=ve[Ve.id];We&&!r.bv(We,Ve)&&le.push({command:ji.updateImport,args:[Ve.id,Ve]})}}(C.imports,I.imports,L),r.bv(C.transition,I.transition)||L.push({command:ji.setTransition,args:[I.transition]}),r.bv(C.light,I.light)||L.push({command:ji.setLight,args:[I.light]}),r.bv(C.fog,I.fog)||L.push({command:ji.setFog,args:[I.fog]}),r.bv(C.snow,I.snow)||L.push({command:ji.setSnow,args:[I.snow]}),r.bv(C.rain,I.rain)||L.push({command:ji.setRain,args:[I.rain]}),r.bv(C.projection,I.projection)||L.push({command:ji.setProjection,args:[I.projection]}),r.bv(C.lights,I.lights)||L.push({command:ji.setLights,args:[I.lights]}),r.bv(C.camera,I.camera)||L.push({command:ji.setCamera,args:[I.camera]}),r.bv(C.iconsets,I.iconsets)||function(J,he,le){let fe;for(fe in he=he||{},J=J||{})J.hasOwnProperty(fe)&&(he.hasOwnProperty(fe)||le.push({command:ji.removeIconset,args:[fe]}));for(fe in he){if(!he.hasOwnProperty(fe))continue;const ce=he[fe];J.hasOwnProperty(fe)?r.bv(J[fe],ce)||(le.push({command:ji.removeIconset,args:[fe]}),le.push({command:ji.addIconset,args:[fe,ce]})):le.push({command:ji.addIconset,args:[fe,ce]})}}(C.iconsets,I.iconsets,L),!r.bv(C["color-theme"],I["color-theme"]))return[{command:ji.setStyle,args:[I]}];const F={},V=[];(function(J,he,le,fe){let ce;for(ce in he=he||{},J=J||{})J.hasOwnProperty(ce)&&(he.hasOwnProperty(ce)||Au(ce,le,fe));for(ce in he){if(!he.hasOwnProperty(ce))continue;const ve=he[ce];J.hasOwnProperty(ce)?r.bv(J[ce],ve)||(J[ce].type==="geojson"&&ve.type==="geojson"&&Bc(J,he,ce)?le.push({command:ji.setGeoJSONSourceData,args:[ce,ve.data]}):rp(ce,he,le,fe)):Ca(ce,he,le)}})(C.sources,I.sources,V,F);const q=[];C.layers&&C.layers.forEach(J=>{J.source&&F[J.source]?L.push({command:ji.removeLayer,args:[J.id]}):q.push(J)});let G=C.terrain;G&&F[G.source]&&(L.push({command:ji.setTerrain,args:[void 0]}),G=void 0),L=L.concat(V),r.bv(G,I.terrain)||L.push({command:ji.setTerrain,args:[I.terrain]}),function(J,he,le){he=he||[];const fe=(J=J||[]).map(jl),ce=he.map(jl),ve=J.reduce(Ih,{}),Ae=he.reduce(Ih,{}),De=fe.slice(),Ne=Object.create(null);let ze,ke,Re,Ve,We,ct,rt;for(ze=0,ke=0;ze<fe.length;ze++)Re=fe[ze],Ae.hasOwnProperty(Re)?ke++:(le.push({command:ji.removeLayer,args:[Re]}),De.splice(De.indexOf(Re,ke),1));for(ze=0,ke=0;ze<ce.length;ze++)Re=ce[ce.length-1-ze],De[De.length-1-ze]!==Re&&(ve.hasOwnProperty(Re)?(le.push({command:ji.removeLayer,args:[Re]}),De.splice(De.lastIndexOf(Re,De.length-ke),1)):ke++,ct=De[De.length-ze],le.push({command:ji.addLayer,args:[Ae[Re],ct]}),De.splice(De.length-ze,0,Re),Ne[Re]=!0);for(ze=0;ze<ce.length;ze++)if(Re=ce[ze],Ve=ve[Re],We=Ae[Re],!Ne[Re]&&!r.bv(Ve,We))if(r.bv(Ve.source,We.source)&&r.bv(Ve["source-layer"],We["source-layer"])&&r.bv(Ve.type,We.type)){for(rt in Fc(Ve.layout,We.layout,le,Re,null,ji.setLayoutProperty),Fc(Ve.paint,We.paint,le,Re,null,ji.setPaintProperty),r.bv(Ve.slot,We.slot)||le.push({command:ji.setSlot,args:[Re,We.slot]}),r.bv(Ve.filter,We.filter)||le.push({command:ji.setFilter,args:[Re,We.filter]}),r.bv(Ve.minzoom,We.minzoom)&&r.bv(Ve.maxzoom,We.maxzoom)||le.push({command:ji.setLayerZoomRange,args:[Re,We.minzoom,We.maxzoom]}),Ve)Ve.hasOwnProperty(rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&rt!=="slot"&&(rt.indexOf("paint.")===0?Fc(Ve[rt],We[rt],le,Re,rt.slice(6),ji.setPaintProperty):r.bv(Ve[rt],We[rt])||le.push({command:ji.setLayerProperty,args:[Re,rt,We[rt]]}));for(rt in We)We.hasOwnProperty(rt)&&!Ve.hasOwnProperty(rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&rt!=="slot"&&(rt.indexOf("paint.")===0?Fc(Ve[rt],We[rt],le,Re,rt.slice(6),ji.setPaintProperty):r.bv(Ve[rt],We[rt])||le.push({command:ji.setLayerProperty,args:[Re,rt,We[rt]]}))}else le.push({command:ji.removeLayer,args:[Re]}),ct=De[De.lastIndexOf(Re)+1],le.push({command:ji.addLayer,args:[We,ct]})}(q,I.layers,L)}catch(F){console.warn("Unable to compute style diff:",F),L=[{command:ji.setStyle,args:[I]}]}return L}(this.serialize(),o).filter(C=>!(C.command in Um));if(g.length===0)return!1;const b=g.filter(C=>!(C.command in $h));if(b.length>0)throw new Error(`Unimplemented: ${b.map(C=>C.command).join(", ")}.`);const w=[];return g.forEach(C=>{w.push(this[C.command](...C.args))}),c&&Promise.all(w).then(c).catch(c),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(o){for(const[c,g]of o.entries()){if(this.getImage(c))return this.fire(new r.z(new Error(`An image with the name "${c.name}" already exists.`)));this.imageManager.addImage(c,this.scope,g),this._changes.updateImage(c,this.scope)}return this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})),this}addImage(o,c){return this.getImage(o)?this.fire(new r.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,c),this._changes.updateImage(o,this.scope),this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})),this)}updateImage(o,c,g=!1){this.imageManager.updateImage(o,this.scope,c),g&&(this._changes.updateImage(o,this.scope),this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o,this.scope),this._updateWorkerImages(),this.fire(new r.A("data",{dataType:"style"})),this):this.fire(new r.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(o){return this.modelManager.addModelURLs(o,this.scope),this._updateWorkerModels(),this.fire(new r.A("data",{dataType:"style"})),this}addModel(o,c,g={}){return this._checkLoaded(),this._validate(Pe,`models.${o}`,c,null,g)||(this.modelManager.addModel(o,c,this.scope),this.fire(new r.A("data",{dataType:"style"}))),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this.fire(new r.A("data",{dataType:"style"})),this):this.fire(new r.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,c,g={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(Ds,`sources.${o}`,c,null,g))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const b=Vd(o,c,this.dispatcher,this);b.scope=this.scope,b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(b.id),source:b.serialize(),sourceId:b.id}));const w=C=>{const I=(C?"symbol:":"other:")+b.id,L=r.C(I,this.scope),F=this._sourceCaches[I]=new bs(L,b,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[b.id]=F,F.onAdd(this.map)};w(!1),c.type!=="vector"&&c.type!=="geojson"||w(!0),b.onAdd&&b.onAdd(this.map),g.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const c=this.getOwnSource(o);if(!c)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===o)return this.fire(new r.z(new Error(`Source "${o}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new r.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const b=Object.entries(this.stylesheet.iconsets).find(([w,C])=>C.type==="source"&&C.source===o);if(b)return this.fire(new r.z(new Error(`Source "${o}" cannot be removed while iconset "${b[0]}" is using it.`)))}const g=this.getOwnSourceCaches(o);for(const b of g){const w=r.d8(b.id);delete this._sourceCaches[w],this._changes.discardSourceCacheUpdate(b.id),b.fire(new r.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,c){this._checkLoaded(),this.getOwnSource(o).setData(c),this._changes.setDirty()}getOwnSource(o){const c=this.getOwnSourceCache(o);return c&&c.getSource()}getOwnSources(){const o=[];for(const c in this._otherSourceCaches){const g=this.getOwnSourceCache(c);g&&o.push(g.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const c in o){const g=o[c]._tiles;for(const b in g){const w=g[b];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const b of o){if(this._validate(ca,"lights",b))return;switch(b.type){case"ambient":if(this.ambientLight){const w=this.ambientLight;w.set(b),w.updateTransitions(c)}else this.ambientLight=new Lr(b,$i||($i=new r.a7({color:new r.a8(r.a5.properties_light_ambient.color),"color-use-theme":new r.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new r.a8(r.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const w=this.directionalLight;w.set(b),w.updateTransitions(c)}else this.directionalLight=new Lr(b,Di||(Di=new r.a7({direction:new r.an(r.a5.properties_light_directional.direction),color:new r.a8(r.a5.properties_light_directional.color),"color-use-theme":new r.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new r.a8(r.a5.properties_light_directional.intensity),"cast-shadows":new r.a8(r.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new r.a8(r.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new r.a8(r.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const g=new r.aa(this.z||0,c);this.ambientLight&&this.ambientLight.recalculate(g),this.directionalLight&&this.directionalLight.recalculate(g),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,c=this.ambientLight;if(!o||!c)return;const g=G=>.2126*(G[0]<=.03928?G[0]/12.92:Math.pow((G[0]+.055)/1.055,2.4))+.7152*(G[1]<=.03928?G[1]/12.92:Math.pow((G[1]+.055)/1.055,2.4))+.0722*(G[2]<=.03928?G[2]/12.92:Math.pow((G[2]+.055)/1.055,2.4)),b=o.properties.get("color").toRenderColor(null).toArray01(),w=o.properties.get("intensity"),C=o.properties.get("direction"),I=1-r.cR(C.x,C.y,C.z)[2]/90,L=g(b)*w*I,F=c.properties.get("color").toRenderColor(null).toArray01(),V=c.properties.get("intensity"),q=g(F)*V;return Number(((L+q)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(o==null||o===""&&this.isRootStyle())return this;if(r.d9(o)){const c=r.da(o),g=this.fragments.find(({id:w})=>w===c);if(!g)return;const b=r.d8(o);return g.style.getFragmentStyle(b)}{const c=this.fragments.find(({id:g})=>g===o);return c?c.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const c={},g=(b,w="")=>`${b}::${w}`;this._featuresetSelectors={};for(const b in o){const w=this._featuresetSelectors[b]=[];for(const C of o[b].selectors){if(C.featureNamespace){const L=this.getOwnLayer(C.layer);if(!L){r.w(`Layer is undefined for selector: ${C.layer}`);continue}const F=g(L.source,L.sourceLayer);if(F in c&&c[F]!==C.featureNamespace){r.w(`"featureNamespace ${C.featureNamespace} of featureset ${b}'s selector is not associated to the same source, skip this selector`);continue}c[F]=C.featureNamespace}let I;if(C.properties)for(const L in C.properties){const F=r.X(C.properties[L]);F.result==="success"&&(I=I||{},I[L]=F.value)}w.push({layerId:C.layer,namespace:C.featureNamespace,properties:I,uniqueFeatureID:C._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const c=this.getFragmentStyle(o);if(!c||!c.stylesheet.featuresets)return[];const g=[];for(const b in c.stylesheet.featuresets)g.push({featuresetId:b,importId:c.scope?c.scope:void 0});return g}getFeaturesetLayers(o,c){const g=this.getFragmentStyle(c),b=g.stylesheet.featuresets;if(!b||!b[o])return this.fire(new r.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const w=[];for(const C of b[o].selectors){const I=g.getOwnLayer(C.layer);I&&w.push(I)}return w}getConfigProperty(o,c){const g=this.getFragmentStyle(o);if(!g)return null;const b=r.C(c,g.scope),w=g.options.get(b),C=w?w.value||w.default:null;return C?C.serialize():null}setConfigProperty(o,c,g){const b=this.getFragmentStyle(o);if(!b)return;const w=b.stylesheet.indoor?Vh(b.stylesheet.schema):b.stylesheet.schema;if(!w||!w[c])return;const C=r.X(g);if(C.result!=="success")return void Ra(this,C.value);const I=C.value.expression,L=r.C(c,b.scope),F=b.options.get(L);if(!F)return;let V;const{minValue:q,maxValue:G,stepValue:J,type:he,values:le}=w[c],fe=r.X(w[c].default);fe.result==="success"&&(V=fe.value.expression),V?(this.options.set(L,Object.assign({},F,{value:I,default:V,minValue:q,maxValue:G,stepValue:J,type:he,values:le})),this.updateConfigDependencies(c)):this.fire(new r.z(new Error(`No schema defined for the config option "${c}" in the "${o}" fragment.`)))}getConfig(o){const c=this.getFragmentStyle(o);if(!c)return null;const g=c.stylesheet.schema;if(!g)return null;const b={};for(const w in g){const C=r.C(w,c.scope),I=c.options.get(C),L=I?I.value||I.default:null;b[w]=L?L.serialize():null}return b}setConfig(o,c){const g=this.getFragmentStyle(o);g&&(g.updateConfig(c,g.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const c=this.getFragmentStyle(o);return c?c.stylesheet.schema:null}setSchema(o,c){const g=this.getFragmentStyle(o);g&&(g.stylesheet.schema=c,g.updateConfig(g._config,c),this.updateConfigDependencies())}updateConfig(o,c){if(this._config=o,o||c)if(c)for(const g in c){let b,w;const C=r.X(c[g].default);if(C.result==="success"&&(b=C.value.expression),o&&o[g]!==void 0){const G=r.X(o[g]);G.result==="success"&&(w=G.value.expression)}const{minValue:I,maxValue:L,stepValue:F,type:V,values:q}=c[g];if(b){const G=r.C(g,this.scope);this.options.set(G,{default:b,value:w,minValue:I,maxValue:L,stepValue:F,type:V,values:q})}else this.fire(new r.z(new Error(`No schema defined for config option "${g}".`)))}else this.fire(new r.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const c of this._configDependentLayers){const g=this.getLayer(c);if(g){if(o&&!g.configDependencies.has(o))continue;g.possiblyEvaluateVisibility(),this._updateLayer(g)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(c=>{const g=c._styleColorTheme.colorThemeOverride?c._styleColorTheme.colorThemeOverride:c._styleColorTheme.colorTheme;if(g){const b=c._evaluateColorThemeData(g);(!c._styleColorTheme.lut&&b!==""||c._styleColorTheme.lut&&b!==c._styleColorTheme.lut.data)&&c.setColorTheme(g)}}),this._changes.setDirty()}addLayer(o,c,g={}){this._checkLoaded();const b=o.id;if(this._layers[b])return void this.fire(new r.z(new Error(`Layer with id "${b}" already exists on this map`)));let w;if(o.type==="custom"){if(Ra(this,r.db(o)))return;w=r.dc(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(b,o.source),o=r.d7(o),o=r.l(o,{source:b})),this._validate(Y,`layers.${b}`,o,{arrayIndex:-1},g))return;w=r.dc(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}})}w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid);let C=this._order.length;if(c){const V=this._order.indexOf(c);if(V===-1)return void this.fire(new r.z(new Error(`Layer with id "${c}" does not exist on this map.`)));w.slot===this._layers[c].slot?C=V:r.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,b),this._layerOrderChanged=!0,this._layers[b]=w;const I=this.getOwnLayerSourceCache(w),L=!!this.directionalLight&&this.directionalLight.shadowsEnabled();I&&w.canCastShadows()&&L&&(I.castsShadows=!0);const F=this._changes.getRemovedLayer(w);if(F&&w.source&&I&&w.type!=="custom"){this._changes.discardLayerRemoval(w);const V=r.C(w.source,w.scope);F.type!==w.type?this._changes.updateSourceCache(V,"clear"):(this._changes.updateSourceCache(V,"reload"),I.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),w.scope=this.scope,this.mergeLayers()}moveLayer(o,c){this._checkLoaded();const g=this._checkLayer(o);if(!g||o===c)return;const b=this._order.indexOf(o);this._order.splice(b,1);let w=this._order.length;if(c){const C=this._order.indexOf(c);if(C===-1)return void this.fire(new r.z(new Error(`Layer with id "${c}" does not exist on this map.`)));g.slot===this._layers[c].slot?w=C:r.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(w,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const c=this._checkLayer(o);if(!c)return;c.setEventedParent(null);const g=this._order.indexOf(o);this._order.splice(g,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const b=this.getOwnLayerSourceCache(c);if(b&&b.castsShadows){let w=!1;for(const C in this._layers)if(this._layers[C].source===c.source&&this._layers[C].canCastShadows()){w=!0;break}b.castsShadows=w}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const c in this._layers)if(this._layers[c].type===o)return!0;return!1}setLayerZoomRange(o,c,g){this._checkLoaded();const b=this._checkLayer(o);b&&(b.minzoom===c&&b.maxzoom===g||(c!=null&&(b.minzoom=c),g!=null&&(b.maxzoom=g),this._updateLayer(b)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,c){this._checkLoaded();const g=this._checkLayer(o);g&&g.slot!==c&&(g.slot=c,this._updateLayer(g))}setFilter(o,c,g={}){this._checkLoaded();const b=this._checkLayer(o);if(b&&!r.bv(b.filter,c))return c==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(ie,`layers.${b.id}.filter`,c,{layerType:b.type},g)||(b.filter=r.d7(c),this._updateLayer(b)))}getFilter(o){const c=this._checkLayer(o);if(c)return r.d7(c.filter)}setLayoutProperty(o,c,g,b={}){this._checkLoaded();const w=this._checkLayer(o);if(w&&!r.bv(w.getLayoutProperty(c),g)){if(g!=null&&(!b||b.validate!==!1)&&Ra(w,Ee.call(ts,{key:`layers.${o}.layout.${c}`,layerType:w.type,objectKey:c,value:g,styleSpec:r.a5,style:{glyphs:!0,sprite:!0}})))return;w.setLayoutProperty(c,g),w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid),this._updateLayer(w)}}getLayoutProperty(o,c){const g=this._checkLayer(o);if(g)return g.getLayoutProperty(c)}setPaintProperty(o,c,g,b={}){this._checkLoaded();const w=this._checkLayer(o);if(!w||r.bv(w.getPaintProperty(c),g)||g!=null&&(!b||b.validate!==!1)&&Ra(w,ge.call(ts,{key:`layers.${o}.paint.${c}`,layerType:w.type,objectKey:c,value:g,styleSpec:r.a5})))return;const C=w.setPaintProperty(c,g);w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid),C&&this._updateLayer(w),this._changes.updatePaintProperties(w)}getPaintProperty(o,c){const g=this._checkLayer(o);if(g)return g.getPaintProperty(c)}setFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:L,importId:F}=o.target,V=this.getFragmentStyle(F),q=V.getFeaturesetLayers(L);for(const{source:G,sourceLayer:J}of q)V.setFeatureState({id:o.id,source:G,sourceLayer:J},c)}else if("layerId"in o.target){const{layerId:L}=o.target,F=this.getLayer(L);this.setFeatureState({id:o.id,source:F.source,sourceLayer:F.sourceLayer},c)}return}const g=o.source,b=o.sourceLayer,w=this._checkSource(g);if(!w)return;const C=w.type;if(C==="geojson"&&b)return void this.fire(new r.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!b)return void this.fire(new r.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new r.z(new Error("The feature id parameter must be provided.")));const I=this.getOwnSourceCaches(g);for(const L of I)L.setFeatureState(b,o.id,c)}removeFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:L,importId:F}=o.target,V=this.getFragmentStyle(F),q=V.getFeaturesetLayers(L);for(const{source:G,sourceLayer:J}of q)V.removeFeatureState({id:o.id,source:G,sourceLayer:J},c)}else if("layerId"in o.target){const{layerId:L}=o.target,F=this.getLayer(L);this.removeFeatureState({id:o.id,source:F.source,sourceLayer:F.sourceLayer},c)}return}const g=o.source,b=this._checkSource(g);if(!b)return;const w=b.type,C=w==="vector"?o.sourceLayer:void 0;if(w==="vector"&&!C)return void this.fire(new r.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new r.z(new Error("A feature id is required to remove its specific state property.")));const I=this.getOwnSourceCaches(g);for(const L of I)L.removeFeatureState(C,o.id,c)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let w;if("featuresetId"in o.target){const{featuresetId:C,importId:I}=o.target,L=this.getFragmentStyle(I),F=L.getFeaturesetLayers(C);for(const{source:V,sourceLayer:q}of F){const G=L.getFeatureState({id:o.id,source:V,sourceLayer:q});if(G&&!w)w=G;else if(!r.bv(w,G))return void this.fire(new r.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:C}=o.target,I=this.getLayer(C);w=this.getFeatureState({id:o.id,source:I.source,sourceLayer:I.sourceLayer})}return w}const c=o.source,g=o.sourceLayer,b=this._checkSource(c);if(b){if(b.type!=="vector"||g)return o.id===void 0&&this.fire(new r.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(c)[0].getFeatureState(g,o.id);this.fire(new r.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=r.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return r.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),c=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return r.dd({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},g=>g!==void 0)}_updateFilteredLayers(o){for(const c of Object.values(this._mergedLayers))o(c)&&this._updateLayer(c)}_updateLayer(o){this._changes.updateLayer(o);const c=this.getLayerSourceCache(o),g=r.C(o.source,o.scope),b=this._changes.getUpdatedSourceCaches();o.source&&!b[g]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(g,"reload"),c.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const c=I=>this._mergedLayers[I].is3D(!!this.terrain),g=this.order,b={},w=[];for(let I=g.length-1;I>=0;I--){const L=g[I];if(c(L)){b[L]=I;for(const F of o){const V=F[L];if(V)for(const q of V)w.push(q)}}}w.sort((I,L)=>L.intersectionZ-I.intersectionZ);const C=[];for(let I=g.length-1;I>=0;I--){const L=g[I];if(c(L))for(let F=w.length-1;F>=0;F--){const V=w[F].feature;if(V.layer&&b[V.layer.id]<I)break;C.push(V),w.pop()}else for(const F of o){const V=F[L];if(V)for(const q of V)C.push(q.feature)}}return C}queryRenderedFeatures(o,c,g){let b;c&&!Array.isArray(c)&&c.filter&&(this._validate(ie,"queryRenderedFeatures.filter",c.filter,null,c),b=r.b3(c.filter));const w={},C=V=>{if(mc.has(V.type))return;const q=this.getOwnLayerSourceCache(V),G=w[q.id]=w[q.id]||{sourceCache:q,layers:{},has3DLayers:!1};V.is3D(!!this.terrain)&&(G.has3DLayers=!0),G.layers[V.fqid]=G.layers[V.fqid]||{styleLayer:V,targets:[]},G.layers[V.fqid].targets.push({filter:b})};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new r.z(new Error("parameters.layers must be an Array."))),[];for(const V of c.layers){const q=this._layers[V];if(!q)return this.fire(new r.z(new Error(`The layer '${V}' does not exist in the map's style and cannot be queried for features.`))),[];C(q)}}else for(const V in this._layers)C(this._layers[V]);const I=this._queryRenderedFeatures(o,w,g),L=this._flattenAndSortRenderedFeatures(I),F=[];for(const V of L)r.de(V.layer.id)===this.scope&&F.push(V);return F}queryRenderedFeatureset(o,c,g){let b;c&&!Array.isArray(c)&&c.filter&&(this._validate(ie,"queryRenderedFeatures.filter",c.filter,null,c),b=r.b3(c.filter));const w="mock",C=[];if(c&&c.target)C.push(Object.assign({},c,{targetId:w,filter:b}));else{const V=this.getFeaturesetDescriptors();for(const q of V)C.push({targetId:w,filter:b,target:q});for(const{style:q}of this.fragments){const G=q.getFeaturesetDescriptors();for(const J of G)C.push({targetId:w,filter:b,target:J})}}const I=this.queryRenderedTargets(o,C,g),L=[],F=new Set;for(const V of I)for(const q of V.variants[w])$d(q,V,F)||L.push(new r.df(V,q));return L}queryRenderedTargets(o,c,g){const b={},w=(I,L,F,V)=>{const q=b[L.id]=b[L.id]||{sourceCache:L,layers:{},has3DLayers:!1};if(q.layers[I.fqid]=q.layers[I.fqid]||{styleLayer:I,targets:[]},I.is3D(!!this.terrain)&&(q.has3DLayers=!0),!V)return F.uniqueFeatureID=!1,void q.layers[I.fqid].targets.push(F);q.layers[I.fqid].targets.push(Object.assign({},F,{namespace:V.namespace,properties:V.properties,uniqueFeatureID:V.uniqueFeatureID}))};for(const I of c)if("featuresetId"in I.target){const{featuresetId:L,importId:F}=I.target,V=this.getFragmentStyle(F);if(!V||!V._featuresetSelectors)continue;const q=V._featuresetSelectors[L];if(!q){this.fire(new r.z(new Error(`The featureset '${L}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const G of q){const J=V.getOwnLayer(G.layerId);J&&!mc.has(J.type)&&w(J,V.getOwnLayerSourceCache(J),I,G)}}else if("layerId"in I.target){const{layerId:L}=I.target,F=this.getLayer(L);if(!F||mc.has(F.type))continue;w(F,this.getLayerSourceCache(F),I)}const C=this._queryRenderedFeatures(o,b,g);return this._flattenAndSortRenderedFeatures(C)}_queryRenderedFeatures(o,c,g){const b=[],w=!!this.map._showQueryGeometry,C=ho.createFromScreenPoints(o,g);for(const I in c){const L=hc(C,c[I],this._availableImages,g,w);Object.keys(L).length&&b.push(L)}if(this.placement)for(const I in c){if(!c[I].sourceCache._onlySymbols)continue;const L=tp(C.screenGeometry,c[I],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(L).length&&b.push(L)}return b}querySourceFeatures(o,c){const g=c&&c.filter;g&&this._validate(ie,"querySourceFeatures.filter",g,null,c);let b=[];const w=this.getOwnSourceCaches(o);for(const C of w)b=b.concat(Ta(C,c));return b}addSourceType(o,c,g){return Za.getSourceType(o)?g(new Error(`A source type called "${o}" already exists.`)):(Za.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},g):g(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,c,g={}){this._checkLoaded();const b=this.light.getLight();let w=!1;for(const I in o)if(!r.bv(o[I],b[I])){w=!0;break}if(!w)return;const C=this._getTransitionParameters();this.light.setLight(o,c,g),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=r.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&r.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,c=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let g=o;const b=o.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof g.source=="object"){const I="terrain-dem-src";this.addSource(I,g.source),g=r.d7(g),g=r.l(g,{source:I})}const w=r.l({},g),C={};if(this.terrain&&b){w.source=this.terrain.get().source;const I=this.terrain?this.getFragmentStyle(this.terrain.scope):null;I&&(C.style=I.serialize())}if(this._validate(Zt,"terrain",w,C))return}if(!this.terrain||this.terrain.scope!==this.scope&&!b||this.terrain&&c!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,c),this.fire(new r.A("data",{dataType:"style"}))}else{const w=this.terrain,C=w.get();for(const I of Object.keys(r.a5.terrain))!g.hasOwnProperty(I)&&r.a5.terrain[I].default&&(g[I]=r.a5.terrain[I].default);for(const I in o)if(!r.bv(o[I],C[I])){w.set(o,this.options),this.stylesheet.terrain=o;const L=this._getTransitionParameters({duration:0});w.updateTransitions(L),this.fire(new r.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const c=this.fog=new di(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}_createSnow(o){const c=this.snow=new ar(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}_createRain(o){const c=this.rain=new Er(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!r.bv(c.get(),o)){c.set(o,this.options),this.stylesheet.fog=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const c=this.snow;if(!r.bv(c.get(),o)){c.set(o,this.options),this.stylesheet.snow=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const c=this.rain;if(!r.bv(c.get(),o)){c.set(o,this.options),this.stylesheet.rain=c.get();const g=this._getTransitionParameters({duration:0});c.updateTransitions(g)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const b in this._layers)this._layers[b].lut=this._styleColorTheme.lut;for(const b in this._sourceCaches)this._sourceCaches[b].clearTiles()},c=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!c)return this._styleColorTheme.lut=null,void o();const g=this._evaluateColorThemeData(c);this._loadColorTheme(g).then(()=>{this.fire(new r.A("colorthemeset")),o()}).catch(b=>{r.w(`Couldn't set color theme: ${b}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&r.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,c){const g=this.getFragmentStyle(o);g&&(g._styleColorTheme.colorThemeOverride=c,g._reloadColorTheme())}_getTransitionParameters(o){return{now:r.q.now(),transition:r.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],c=[];for(const g of this._mergedOrder)this.isLayerDraped(this._mergedLayers[g])?o.push(g):c.push(g);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...c)}_createTerrain(o,c){const g=this.terrain=new st(o,c,this.scope,this.options);c===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const b=this._getTransitionParameters({duration:0});g.updateTransitions(b)}_force3DLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="symbol"&&this._updateLayer(c)}}_validate(o,c,g,b,w={}){if(w&&w.validate===!1)return!1;const C=r.l({},this.serialize());return Ra(this,o.call(ts,r.l({key:c,style:C,value:g,styleSpec:r.a5},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.dg.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(o){const c=this.getSourceCaches(o);for(const g of c)g.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const c=this.getSourceCaches(o);for(const g of c)g.resume(),g.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let c;this.directionalLight&&(c=Fm(this.directionalLight));const g=new Set;for(const b in this._mergedLayers){const w=this._mergedLayers[b];w.hasElevation()&&!g.has(w.source)&&g.add(w.source)}for(const b in this._mergedSourceCaches){const w=this._mergedSourceCaches[b],C=g.has(w._source.id);w.update(o,void 0,void 0,c,C)}}_generateCollisionBoxes(){for(const o in this._sourceCaches){const c=this._sourceCaches[o];c.resume(),c.reload()}}_updatePlacement(o,c,g,b,w,C,I=!1){let L=!1,F=!1;const V={},q={};for(const G of this._mergedOrder){const J=this._mergedLayers[G];if(J.type!=="symbol")continue;const he=r.C(J.source,J.scope);let le=V[he];if(!le){const ce=this.getLayerSourceCache(J);if(!ce)continue;const ve=ce.getRenderableIds(!0).map(Ae=>ce.getTileByID(Ae));q[he]=ve.slice(),le=V[he]=ve.sort((Ae,De)=>De.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(De.tileID)?-1:1))}const fe=this.crossTileSymbolIndex.addLayer(J,le,c.center.lng,c.projection);L=L||fe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),I=I||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new r.A("neworder")),(I||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.q.now(),c.zoom))&&(this.pauseablePlacement=new Ls(c,this._mergedOrder,I,g,b,w,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,V,q,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.q.now()),F=!0),L&&this.pauseablePlacement.placement.setStale()),F||L){this._buildingIndex.onNewFrame(c.zoom);for(let G=0;G<this._mergedOrder.length;G++){const J=this._mergedLayers[this._mergedOrder[G]];if(J.type!=="symbol")continue;const he=this.isLayerClipped(J);this.placement.updateLayerOpacities(J,V[r.C(J.source,J.scope)],G,he?C:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,c){this._checkLoaded();const g=this.stylesheet.imports=this.stylesheet.imports||[];if(g.findIndex(({id:w})=>w===o.id)!==-1)return void this.fire(new r.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!c)return g.push(o),this._loadImports([o],!0);const b=g.findIndex(({id:w})=>w===c);return b===-1&&this.fire(new r.z(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=g.slice(0,b).concat(o).concat(g.slice(b)),this._loadImports([o],!0,c)}updateImport(o,c){this._checkLoaded();const g=this.stylesheet.imports||[],b=this.getImportIndex(o);return b===-1?this:typeof c=="string"?(this.setImportUrl(o,c),this):(c.url&&c.url!==g[b].url&&this.setImportUrl(o,c.url),r.bv(c.config,g[b].config)||this.setImportConfig(o,c.config,c.data.schema),r.bv(c.data,g[b].data)||this.setImportData(o,c.data),this)}moveImport(o,c){this._checkLoaded();let g=this.stylesheet.imports||[];const b=this.getImportIndex(o);if(b===-1)return this;const w=this.getImportIndex(c);if(w===-1)return this;const C=g[b],I=this.fragments[b];return g=g.filter(({id:L})=>L!==o),this.fragments=this.fragments.filter(({id:L})=>L!==o),this.stylesheet.imports=g.slice(0,w).concat(C).concat(g.slice(w)),this.fragments=this.fragments.slice(0,w).concat(I).concat(this.fragments.slice(w)),this.mergeLayers(),this}setImportUrl(o,c){this._checkLoaded();const g=this.stylesheet.imports||[],b=this.getImportIndex(o);if(b===-1)return this;g[b].url=c;const w=this.fragments[b];return w.style=this._createFragmentStyle(g[b]),w.style.on("style.import.load",()=>this.mergeAll()),w.style.loadURL(c),this}setImportData(o,c){this._checkLoaded();const g=this.getImportIndex(o),b=this.stylesheet.imports||[];return g===-1?this:c?(this.fragments[g].style.setState(c),this._reloadImports(),this):(delete b[g].data,this.setImportUrl(o,b[g].url))}setImportConfig(o,c,g){this._checkLoaded();const b=this.getImportIndex(o),w=this.stylesheet.imports||[];if(b===-1)return this;c?w[b].config=c:delete w[b].config;const C=this.fragments[b];g&&C.style.stylesheet&&(C.style.stylesheet.schema=g);const I=C.style.stylesheet&&C.style.stylesheet.schema;return C.config=c,C.style.updateConfig(c,I),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const c=this.stylesheet.imports||[],g=this.getImportIndex(o);g!==-1&&(c.splice(g,1),this.fragments[g].style._remove(),this.fragments.splice(g,1),this._reloadImports())}getImportIndex(o){const c=(this.stylesheet.imports||[]).findIndex(g=>g.id===o);return c===-1&&this.fire(new r.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),c}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const c in this._mergedOtherSourceCaches){const g=this._mergedOtherSourceCaches[c];g&&o.push(g.getSource())}return o}getSource(o,c){const g=this.getSourceCache(o,c);return g&&g.getSource()}getLayerSource(o){const c=this.getLayerSourceCache(o);return c&&c.getSource()}getSourceCache(o,c){const g=r.C(o,c);return this._mergedOtherSourceCaches[g]}getLayerSourceCache(o){const c=r.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[o]&&c.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&c.push(this._mergedSymbolSourceCaches[o]),c}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const c in o){const g=o[c];g==="reload"?this.reloadSource(c):g==="clear"&&this.clearSource(c)}}updateLayers(o){const c=this._changes.getUpdatedPaintProperties();for(const g of c){const b=this.getLayer(g);b&&b.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,c,g){this.imageManager.getImages(c.images,c.scope,g),this._updateTilesForChangedImages();const b=C=>{if(C){const I=c.images.map(L=>r.I.toString(L));C.setDependencies(c.tileID.key,c.type,I)}},w=r.C(c.source,c.scope);b(this._mergedOtherSourceCaches[w]),b(this._mergedSymbolSourceCaches[w])}rasterizeImages(o,c,g){this.imageManager.rasterizeImages(c,g)}getGlyphs(o,c,g){this.glyphManager.getGlyphs(c.stacks,c.scope,g)}getResource(o,c,g){return r.dh(c,g)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const c=[];return this._otherSourceCaches[o]&&c.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&c.push(this._symbolSourceCaches[o]),c}_isSourceCacheLoaded(o){const c=this.getOwnSourceCaches(o);return c.length===0?(this.fire(new r.z(new Error(`There is no source with ID '${o}'`))),!1):c.every(g=>g.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,c){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const g=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(g||c&&c.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Za.getSourceType=function(m){return Ud[m]},Za.setSourceType=function(m,o){Ud[m]=o},Za.registerForPluginStateChange=r.c$;var Hh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Kd=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,py=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,$m="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ia=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,gp=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Qt=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Ya=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,yp=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,ha=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Pa=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const gl=[];qh(Hh,gl),qh(py,gl),qh(Kd,gl);const Da={"_prelude_fog.vertex.glsl":gp,"_prelude_terrain.vertex.glsl":Ia,"_prelude_shadow.vertex.glsl":ha,"_prelude_fog.fragment.glsl":Qt,"_prelude_shadow.fragment.glsl":Pa,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Ya,"_prelude_raster_particle.glsl":yp},Vc={};Oi("",Ia),Oi(Qt,gp),Oi(Pa,ha),Oi(Ya,""),Oi(yp,"");const Hl=Oi(Kd,py),Gh=Hh;var yl={background:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in highp vec3 v_normal;in highp float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
uniform lowp float u_opacity;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 apply_lighting_linear(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec4 color=vec4(v_color.rgb,1.0);vec3 normal=normalize(v_normal);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
shadowed_lighting_factor=dot(normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,v_color.rgb,v_color.a);color*=u_opacity;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_height));
#endif
#ifdef RENDER_CUTOFF
color*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_height);
#endif
glFragColor=vec4(linearTosRGB(color.rgb),color.a);
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3f;out vec4 v_color;out highp vec3 v_normal;out highp float v_height;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));vec3 pos=a_pos_3f;v_height=pos.z;gl_Position=u_matrix*vec4(pos,1.0);
#ifdef RENDER_SHADOWS
vec3 shadow_pos=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:Oi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Oi("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Oi(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Oi("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Oi("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:Oi(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:Oi(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Oi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Oi(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Oi(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Oi(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Oi("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Oi("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Oi(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Oi(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(abs(v_z_offset) > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
#endif
}`),terrainRaster:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Oi("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Oi(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$m),skyboxGradient:Oi(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$m),skyboxCapture:Oi(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Oi(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Oi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Oi(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:Oi("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:Oi("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:Oi("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:Oi("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function qh(m,o){const c=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of c)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=g.split(" ");for(const w of b)o.includes(w)||o.push(w)}}function Oi(m,o){const c=/#include\s+"([^"]+)"/g,g=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let b=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);b&&(b=b.map(F=>{const V=F.split(" ");return V[V.length-1]}),b=[...new Set(b)]);const w={},C=[],I=[];if(m=m.replace(c,(F,V)=>(I.push(V),"")),(o=o.replace(c,(F,V)=>(C.push(V),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let L=[...gl];qh(m,L),qh(o,L);for(const F of[...C,...I])Da[F]||console.error(`Undefined include: ${F}`),Vc[F]||(Vc[F]=[],qh(Da[F],Vc[F])),L=[...L,...Vc[F]];return{fragmentSource:m=m.replace(g,(F,V,q,G,J)=>(w[J]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${J}
in ${q} ${G} ${J};
#else
uniform ${q} ${G} u_${J};
#endif
`:V==="initialize"?`
#ifdef HAS_UNIFORM_u_${J}
    ${q} ${G} ${J} = u_${J};
#endif
`:V==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${J}
    in ${q} ${G} ${J};
#endif
`:V==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(g,(F,V,q,G,J)=>{const he=G==="float"?"vec2":G,le=J.match(/color/)?"color":he;return V==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${J}
in ${q} ${G} a_${J};
#endif
`:w[J]?V==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
in ${q} ${he} a_${J};
out ${q} ${G} ${J};
#else
uniform ${q} ${G} u_${J};
#endif
`:V==="initialize"?le==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${q} ${G} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${le}(a_${J}, u_${J}_t);
#else
    ${q} ${G} ${J} = u_${J};
#endif
`:V==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${J}
    in ${q} ${G} a_${J};
    out ${q} ${G} ${J};
#endif
`:V==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${J}
    ${J} = a_${J};
#endif
`:void 0:V==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
in ${q} ${he} a_${J};
#else
uniform ${q} ${G} u_${J};
#endif
`:V==="define-instanced"?le==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${J}0;
in vec4 a_${J}1;
in vec4 a_${J}2;
in vec4 a_${J}3;
#else
uniform ${q} ${G} u_${J};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${q} ${he} a_${J};
#else
uniform ${q} ${G} u_${J};
#endif
`:V==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${J}
    ${q} ${G} ${J} = a_${J};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${q} ${G} ${J} = a_${J};
#else
    ${q} ${G} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${q} ${G} ${J} = unpack_mix_${le}(a_${J}, u_${J}_t);
#else
    ${q} ${G} ${J} = u_${J};
#endif
`}),staticAttributes:b,usedDefines:L,vertexIncludes:C,fragmentIncludes:I}}class Du{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,c,g,b,w,C,I,L){this.context=o;let F=this.boundPaintVertexBuffers.length!==b.length;for(let q=0;!F&&q<b.length;q++)this.boundPaintVertexBuffers[q]!==b[q]&&(F=!0);let V=this.boundDynamicVertexBuffers.length!==I.length;for(let q=0;!V&&q<I.length;q++)this.boundDynamicVertexBuffers[q]!==I[q]&&(V=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==g||F||V||this.boundIndexBuffer!==w||this.boundVertexOffset!==C)this.freshBind(c,g,b,w,C,I,L);else{o.bindVertexArrayOES.set(this.vao);for(const q of I)q&&(q.bind(),L&&q.instanceCount&&q.setVertexAttribDivisor(o.gl,c,L));w&&w.dynamicDraw&&w.bind()}}freshBind(o,c,g,b,w,C,I){const L=o.numAttributes,F=this.context,V=F.gl;this.vao&&this.destroy(),this.vao=F.gl.createVertexArray(),F.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=b,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=C,c.enableAttributes(V,o),c.bind(),c.setVertexAttribPointers(V,o,w);for(const q of g)q.enableAttributes(V,o),q.bind(),q.setVertexAttribPointers(V,o,w);for(const q of C)q&&(q.enableAttributes(V,o),q.bind(),q.setVertexAttribPointers(V,o,w),I&&q.instanceCount&&q.setVertexAttribDivisor(V,o,I));b&&b.bind(),F.currentNumAttributes=L}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Dx(m,o){const c=Math.pow(2,o.canonical.z),g=o.canonical.y;return[new r.ac(0,g/c).toLngLat().lat,new r.ac(0,(g+1)/c).toLngLat().lat]}function Oa(m,o,c,g,b,w,C){const I=m.context,L=I.gl,F=c.hillshadeFBO;if(!F)return;m.prepareDrawTile();const V=m.isTileAffectedByFog(o),q=m.getOrCreateProgram("hillshade",{overrideFog:V});I.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,F.colorAttachment.get());const G=((fe,ce,ve,Ae)=>{const De=ve.paint.get("hillshade-shadow-color"),Ne=ve.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",ze=ve.paint.get("hillshade-highlight-color"),ke=ve.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Re=ve.paint.get("hillshade-accent-color"),Ve=ve.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",We=ve.paint.get("hillshade-emissive-strength");let ct=r.al(ve.paint.get("hillshade-illumination-direction"));if(ve.paint.get("hillshade-illumination-anchor")==="viewport")ct-=fe.transform.angle;else if(fe.style&&fe.style.enable3dLights()&&fe.style.directionalLight){const Et=fe.style.directionalLight.properties.get("direction"),wt=r.cR(Et.x,Et.y,Et.z);ct=r.al(wt[1])}const rt=!fe.options.moving;return{u_matrix:Ae||fe.transform.calculateProjMatrix(ce.tileID.toUnwrapped(),rt),u_image:0,u_latrange:Dx(0,ce.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),ct],u_shadow:De.toRenderColor(Ne?null:ve.lut),u_highlight:ze.toRenderColor(ke?null:ve.lut),u_emissive_strength:We,u_accent:Re.toRenderColor(Ve?null:ve.lut)}})(m,c,g,m.terrain?o.projMatrix:null);m.uploadCommonUniforms(I,q,o.toUnwrapped());const{tileBoundsBuffer:J,tileBoundsIndexBuffer:he,tileBoundsSegments:le}=m.getTileBoundsBuffers(c);q.draw(m,L.TRIANGLES,b,w,C,Jn.disabled,G,g.id,J,he,le)}function _p(m,o,c){if(!o.needsDEMTextureUpload)return;const g=m.context,b=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||m.getTileTexture(c.stride);const w=c.getPixels();o.demTexture?o.demTexture.update(w,{premultiply:!1}):o.demTexture=new r.T(g,w,b.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Gl(m,o,c){const g=m.context,b=g.gl;if(!o.dem)return;const w=o.dem;if(g.activeTexture.set(b.TEXTURE1),_p(m,o,w),!o.demTexture)return;o.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE);const C=w.dim;g.activeTexture.set(b.TEXTURE0);let I=o.hillshadeFBO;if(!I){const G=new r.T(g,{width:C,height:C,data:null},b.RGBA8);G.bind(b.LINEAR,b.CLAMP_TO_EDGE),I=o.hillshadeFBO=g.createFramebuffer(C,C,!0,"renderbuffer"),I.colorAttachment.set(G.texture)}g.bindFramebuffer.set(I.framebuffer),g.viewport.set([0,0,C,C]);const{tileBoundsBuffer:L,tileBoundsIndexBuffer:F,tileBoundsSegments:V}=m.getMercatorTileBoundsBuffers(),q=[];m.linearFloatFilteringSupported()&&q.push("TERRAIN_DEM_FLOAT_FORMAT"),m.getOrCreateProgram("hillshadePrepare",{defines:q}).draw(m,b.TRIANGLES,mn.disabled,Yn.disabled,vi.unblended,Jn.disabled,((G,J)=>{const he=J.stride,le=r.bz();return r.c5(le,0,r.aj,-r.aj,0,0,1),r.bo(le,le,[0,-r.aj,0]),{u_matrix:le,u_image:1,u_dimension:[he,he],u_zoom:G.overscaledZ}})(o.tileID,w),c.id,L,F,V),o.needsHillshadePrepare=!1}class lo{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Hm extends lo{getDefault(){return r.am.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Wh extends lo{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class my extends lo{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Gm extends lo{getDefault(){return[!0,!0,!0,!0]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Jd extends lo{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class $c extends lo{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class qm extends lo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class vp extends lo{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class La extends lo{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class da extends lo{getDefault(){return[0,1]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Hc extends lo{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class fa extends lo{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class ql extends lo{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class Ou extends lo{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Xh extends lo{getDefault(){return r.am.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Zh extends lo{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class Qd extends lo{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class Ss extends lo{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Eo extends lo{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let io=class extends lo{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Gc extends lo{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Wl extends lo{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class xp extends lo{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class gc extends lo{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ef extends lo{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class gy extends lo{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class tf extends lo{getDefault(){return null}set(o){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class nf extends lo{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Yh extends lo{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class rf extends lo{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class yy extends lo{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class qc extends lo{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class Wc extends qc{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Xl extends qc{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Zl extends qc{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class bp extends Xl{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const wp=(m,o,c)=>({u_matrix:m,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:c}),Kh=(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:c,u_zoom_transition:b,u_merc_center:w,u_image0:0,u_frustum_tl:C,u_frustum_tr:I,u_frustum_br:L,u_frustum_bl:F,u_globe_pos:V,u_globe_radius:q,u_viewport:G,u_grid_matrix:le?Float32Array.from(le):new Float32Array(9),u_skirt_height:J,u_far_z_cutoff:he});function of(m,o){return m!=null&&o!=null&&!(!m.hasData()||!o.hasData())&&m.demTexture!=null&&o.demTexture!=null&&m.tileID.key!==o.tileID.key}const _l=new class{constructor(){this.operations={}}newMorphing(m,o,c,g,b){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==c.tileID.key&&(w.queued=c)}else this.operations[m]={startTime:g,phase:0,duration:b,from:o,to:c,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const o=this.operations[m];return{from:o.from,to:o.to,phase:o.phase}}update(m){for(const o in this.operations){const c=this.operations[o];for(c.phase=(m-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,m)){delete this.operations[o];break}}}_nextOp(m,o){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=o,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},ns={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Xc(m,o,c){if(o===0)return 0;const g=o<1&&c===514?.25/o:1;return 6*Math.pow(1.5,22-m)*Math.max(o,1)*g}function _y(m,o){const c=1<<m.z;return!o&&(m.x===0||m.x===c-1)||m.y===0||m.y===c-1}const pa=m=>({u_matrix:m});function Sp(m,o,c,g,b){if(b>0){const w=r.q.now(),C=(w-m.timeAdded)/b,I=o?(w-o.timeAdded)/b:-1,L=c.getSource(),F=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),V=!o||Math.abs(o.tileID.overscaledZ-F)>Math.abs(m.tileID.overscaledZ-F),q=V&&m.refreshedUponExpiration?1:r.aD(V?C:1-I,0,1);return m.refreshedUponExpiration&&C>=1&&(m.refreshedUponExpiration=!1),o?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Wm extends bs{constructor(o){const c={type:"raster-dem",maxzoom:o.transform.maxZoom},g=new r.D(r.d0(),null),b=Vd("mock-dem",c,g,o.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,c){o.state="loaded",c(null)}}class Zo extends bs{constructor(o){const c=Vd("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new r.D(r.d0(),null),o.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,c,g){if(o.freezeTileCoverage)return;this.transform=o;const b=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,C)=>{if(w[C.key]="",!this._tiles[C.key]){const I=new Fl(C,this._source.tileSize*C.overscaleFactor(),o.tileZoom);I.state="loaded",this._tiles[C.key]=I}return w},{});for(const w in this._tiles)w in b||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(o){const c=this.proxyCachedFBO[o];if(c!==void 0){const g=Object.values(c);this.renderCachePool.push(...g),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class sf extends r.aM{constructor(o,c,g){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=c,this.projMatrix=g}}class Lu extends r.dt{constructor(o,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,b,w]=function(L){const F=new r.ba,V=new r.a_,q=131;F.reserve(17161),V.reserve(33800);const G=r.aj/128,J=r.aj+G/2,he=J+G;for(let fe=-G;fe<he;fe+=G)for(let ce=-G;ce<he;ce+=G){const ve=ce<0||ce>J||fe<0||fe>J?24575:0,Ae=r.aD(Math.round(ce),0,r.aj),De=r.aD(Math.round(fe),0,r.aj);F.emplaceBack(Ae+ve,De)}const le=(fe,ce)=>{const ve=ce*q+fe;V.emplaceBack(ve+1,ve,ve+q),V.emplaceBack(ve+q,ve+q+1,ve+1)};for(let fe=1;fe<129;fe++)for(let ce=1;ce<129;ce++)le(ce,fe);return[0,129].forEach(fe=>{for(let ce=0;ce<130;ce++)le(ce,fe),le(fe,ce)}),[F,V,32768]}(),C=o.context;this.gridBuffer=C.createVertexBuffer(g,r.bc.members),this.gridIndexBuffer=C.createIndexBuffer(b),this.gridSegments=r.bd.simpleSegment(0,0,g.length,b.length),this.gridNoSkirtSegments=r.bd.simpleSegment(0,0,g.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Zo(c.map),this.orthoMatrix=r.bz(),r.c5(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,r.aj,0,r.aj,0,1);const I=C.gl;this._overlapStencilMode=new Yn({func:I.GEQUAL,mask:255},0,255,I.KEEP,I.KEEP,I.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Wm(c.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,c,g){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const b=o.terrain.properties,w=o.terrain.drapeRenderMode===0,C=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=r.q.now();const I=o.terrain&&o.terrain.scope,L=b.get("source"),F=w?this._mockSourceCache:o.getSourceCache(L,I);if(!F)return void r.w(`Couldn't find terrain source "${L}".`);if(this.sourceCache=F,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=C?this.calculateExaggeration(c):b.get("exaggeration"),!c.projection.requiresDraping&&C&&this._exaggeration===0)return void this._disable();this.enabled=!0;const V=()=>{this.sourceCache.used&&r.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const q=this.getScaledDemTileSize();this.sourceCache.update(c,q,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,V(),this._initializing=!0),V(),c.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const c=this._previousCameraAltitude,g=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=g;const b=c!=null?g-c:Number.MAX_VALUE;if(Math.abs(b)<2)return this._exaggeration;const w=o.zoom,C=this._style.terrain;if(!this._previousUpdateTimestamp)return C.getExaggeration(w);let I=w-this._previousZoom;const L=this._previousUpdateTimestamp;let F=w;this._evaluationZoom!=null&&(F=this._evaluationZoom,Math.abs(w-F)>.5&&(I=.5*(w-F+I)),I*b<0&&(F+=I)),this._evaluationZoom=F;const V=C.getExaggeration(F),q=V===C.getExaggeration(Math.max(0,F-.1));if(q&&Math.abs(V-this._exaggeration)<.01)return V;let G=Math.min(.1,.00375*(this._updateTimestamp-L));return(q||V<.1||Math.abs(I)<1e-4)&&(G=Math.min(.2,4*G)),r.ai(this._exaggeration,V,G)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(r.ac.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=c.getIds().map(L=>{const F=c.getTileByID(L).tileID;return F.projMatrix=g.calculateProjMatrix(F.toUnwrapped()),F});(function(L,F){const V=F.transform.pointCoordinate(F.transform.getCameraPoint()),q=new r.P(V.x,V.y);L.sort((G,J)=>{if(J.overscaledZ-G.overscaledZ)return J.overscaledZ-G.overscaledZ;const he=new r.P(G.canonical.x+(1<<G.canonical.z)*G.wrap,G.canonical.y),le=new r.P(J.canonical.x+(1<<J.canonical.z)*J.wrap,J.canonical.y),fe=q.mult(1<<G.canonical.z);return fe.x-=.5,fe.y-=.5,fe.distSqr(he)-fe.distSqr(le)})})(b,this.painter);const w=this.proxyToSource||{};this.proxyToSource={},b.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const C=this._style._mergedSourceCaches;for(const L in C){const F=C[L];if(!F.used||(F!==this.sourceCache&&this.resetTileLookupCache(F.id),this._setupProxiedCoordsForOrtho(F,o[L],w),F.usedForTerrain))continue;const V=o[L];F.getSource().reparseOverscaled&&this._assignTerrainTiles(V)}this.proxiedCoords[c.id]=b.map(L=>new sf(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1;const I={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const F=this.terrainTileForTile[L.key];if(!F)continue;const V=F.tileID.key;V in I||(this._visibleDemTiles.push(F),I[V]=V)}}_assignTerrainTiles(o){this._initializing||o.forEach(c=>{if(this.terrainTileForTile[c.key])return;const g=this._findTileCoveringTileID(c,this.sourceCache);g&&(this.terrainTileForTile[c.key]=g)})}_prepareDEMTextures(){const o=this.painter.context,c=o.gl;for(const g in this.terrainTileForTile){const b=this.terrainTileForTile[g],w=b.dem;!w||b.demTexture&&!b.needsDEMTextureUpload||(o.activeTexture.set(c.TEXTURE1),_p(this.painter,b,w))}}_prepareDemTileUniforms(o,c,g,b){if(!c||c.demTexture==null)return!1;const w=o.tileID.canonical,C=Math.pow(2,c.tileID.canonical.z-w.z),I=b||"";return g[`u_dem_tl${I}`]=[w.x*C%1,w.y*C%1],g[`u_dem_scale${I}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const c=this._visibleDemTiles.reduce((g,b)=>{if(!b.dem)return g;const w=b.dem.tree.minimums[0];return w>0&&o++,g+w},0);return o?c/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,c=o.gl;o.activeTexture.set(c.TEXTURE2);const g=this._getLoadedAreaMinimum(),b=new r.du({width:1,height:1},new Float32Array([g]));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(b,{premultiply:!1}):w=this._emptyDEMTexture=new r.T(o,b,c.R32F,{premultiply:!1}),w}setupElevationDraw(o,c,g){const b=this.painter.context,w=b.gl,C={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};C.u_exaggeration=this.exaggeration();let I=null,L=null,F=1;if(g&&g.morphing&&this._useVertexMorphing){const J=g.morphing.srcDemTile,he=g.morphing.dstDemTile;F=g.morphing.phase,J&&he&&(this._prepareDemTileUniforms(o,J,C,"_prev")&&(L=J),this._prepareDemTileUniforms(o,he,C)&&(I=he))}const V=J=>J&&J.demTexture&&this.painter.linearFloatFilteringSupported()?w.LINEAR:w.NEAREST;let q=null;var G;if(this.enabled?L&&I?(q=I.demTexture,b.activeTexture.set(w.TEXTURE4),L.demTexture.bind(V(L),w.CLAMP_TO_EDGE),C.u_dem_lerp=F):(I=this.terrainTileForTile[o.tileID.key],q=this._prepareDemTileUniforms(o,I,C)?I.demTexture:this.emptyDEMTexture):q=this.emptyDEMTexture,b.activeTexture.set(w.TEXTURE2),q&&(C.u_dem_size=(G=q).size[0]===1?1:G.size[0]-2,q.bind(V(I),w.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(g&&g.useDepthForOcclusion,c,C),g&&g.useMeterToDem&&I){const J=(1<<I.tileID.canonical.z)*r.c6(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=J}if(g&&g.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),c.setTerrainUniformValues(b,C),this.painter.transform.projection.name==="globe"){const J=this.globeUniformValues(this.painter.transform,o.tileID.canonical,g&&g.useDenormalizedUpVectorScale);c.setGlobeUniformValues(b,J)}}globeUniformValues(o,c,g){const b=o.projection;return{u_tile_tl_up:b.upVector(c,0,0),u_tile_tr_up:b.upVector(c,r.aj,0),u_tile_br_up:b.upVector(c,r.aj,r.aj),u_tile_bl_up:b.upVector(c,0,r.aj),u_tile_up_scale:g?r.dv(1):b.upVectorScale(c,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const c=this.painter,g=this.painter.context;o.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,w,C,I,L){if(b.transform.projection.name==="globe")(function(F,V,q,G,J){const he=F.context,le=he.gl;let fe,ce;const ve=F.transform,Ae=r.dl(F,he,ve),De=(Et,wt)=>{if(ce===wt)return;const Vt=[ns[wt],"PROJECTION_GLOBE_VIEW"];Ae&&Vt.push("CUSTOM_ANTIALIASING");const nt=F.isTileAffectedByFog(Et);fe=F.getOrCreateProgram("globeRaster",{defines:Vt,overrideFog:nt}),ce=wt},Ne=F.colorModeForRenderPass(),ze=new mn(le.LEQUAL,mn.ReadWrite,F.depthRangeFor3D);_l.update(J);const ke=r.dm(ve),Re=[r.ay(ve.center.lng),r.aH(ve.center.lat)],Ve=F.globeSharedBuffers,We=[ve.width*r.q.devicePixelRatio,ve.height*r.q.devicePixelRatio],ct=Float32Array.from(ve.globeMatrix),rt={useDenormalizedUpVectorScale:!0};{const Et=F.transform,wt=Xc(Et.zoom,V.exaggeration(),V.sourceCache._source.tileSize);ce=-1;const Vt=le.TRIANGLES;for(const nt of G){const ft=q.getTile(nt),Qe=Yn.disabled,Mt=V.prevTerrainTileForTile[nt.key],pt=V.terrainTileForTile[nt.key];of(Mt,pt)&&_l.newMorphing(nt.key,Mt,pt,J,250),he.activeTexture.set(le.TEXTURE0),ft.texture&&ft.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);const Ot=_l.getMorphValuesForProxy(nt.key),Ct=Ot?1:0;Ot&&r.L(rt,{morphing:{srcDemTile:Ot.from,dstDemTile:Ot.to,phase:r.dk(Ot.phase)}});const Lt=r.dn(nt.canonical),Nt=r.dp(Lt.getCenter().lat),pn=r.dq(nt.canonical,Lt,Nt,Et.worldSize/Et._pixelsPerMercatorPixel),_n=r.bh(r.dr(nt.canonical)),dn=Kh(Et.expandedFarZProjMatrix,ct,ke,_n,r.ah(Et.zoom),Re,Et.frustumCorners.TL,Et.frustumCorners.TR,Et.frustumCorners.BR,Et.frustumCorners.BL,Et.globeCenterInViewSpace,Et.globeRadius,We,wt,Et._farZ,pn);if(De(nt,Ct),fe&&(V.setupElevationDraw(ft,fe,rt),F.uploadCommonUniforms(he,fe,nt.toUnwrapped()),Ve)){const[Sn,yn,Gn]=Ve.getGridBuffers(Nt,wt!==0);fe.draw(F,Vt,ze,Qe,Ne,Jn.backCCW,dn,"globe_raster",Sn,yn,Gn)}}}if(Ve&&(F.renderDefaultNorthPole||F.renderDefaultSouthPole)){const Et=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ae&&Et.push("CUSTOM_ANTIALIASING"),fe=F.getOrCreateProgram("globeRaster",{defines:Et});for(const wt of G){const{x:Vt,y:nt,z:ft}=wt.canonical,Qe=nt===0,Mt=nt===(1<<ft)-1,[pt,Ot,Ct,Lt]=Ve.getPoleBuffers(ft,!1);if(Lt&&(Qe||Mt)){const Nt=q.getTile(wt);he.activeTexture.set(le.TEXTURE0),Nt.texture&&Nt.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);let pn=r.ds(ft,Vt,ve);const _n=r.bh(r.dr(wt.canonical)),dn=(Sn,yn)=>Sn.draw(F,le.TRIANGLES,ze,Yn.disabled,Ne,Jn.disabled,Kh(ve.expandedFarZProjMatrix,pn,pn,_n,0,Re,ve.frustumCorners.TL,ve.frustumCorners.TR,ve.frustumCorners.BR,ve.frustumCorners.BL,ve.globeCenterInViewSpace,ve.globeRadius,We,0,ve._farZ),"globe_pole_raster",yn,Ct,Lt);V.setupElevationDraw(Nt,fe,rt),F.uploadCommonUniforms(he,fe,wt.toUnwrapped()),Qe&&F.renderDefaultNorthPole&&dn(fe,pt),Mt&&F.renderDefaultSouthPole&&(pn=r.cE(r.bz(),pn,[1,-1,1]),dn(fe,Ot))}}}})(b,w,C,I,L);else{const F=b.context,V=F.gl;let q,G;const J=b.shadowRenderer,he=Uh(b,b.longestCutoffRange),le=Ne=>{if(G===Ne)return;const ze=[];ze.push(ns[Ne]),he.shouldRenderCutoff&&ze.push("RENDER_CUTOFF"),J&&(ze.push("RENDER_SHADOWS","DEPTH_TEXTURE"),J.useNormalOffset&&ze.push("NORMAL_OFFSET")),q=b.getOrCreateProgram("terrainRaster",{defines:ze}),G=Ne},fe=b.colorModeForRenderPass(),ce=new mn(V.LEQUAL,mn.ReadWrite,b.depthRangeFor3D);_l.update(L);const ve=b.transform,Ae=Xc(ve.zoom,w.exaggeration(),w.sourceCache._source.tileSize);let De=[0,0,0];if(J){const Ne=b.style.directionalLight,ze=b.style.ambientLight;Ne&&ze&&(De=Vl(b.style,Ne,ze))}{G=-1;const Ne=V.TRIANGLES,[ze,ke]=[w.gridIndexBuffer,w.gridSegments];for(const Re of I){const Ve=C.getTile(Re),We=Yn.disabled,ct=w.prevTerrainTileForTile[Re.key],rt=w.terrainTileForTile[Re.key];of(ct,rt)&&_l.newMorphing(Re.key,ct,rt,L,250),F.activeTexture.set(V.TEXTURE0),Ve.texture&&Ve.texture.bind(V.LINEAR,V.CLAMP_TO_EDGE);const Et=_l.getMorphValuesForProxy(Re.key),wt=Et?1:0;let Vt;Et&&(Vt={morphing:{srcDemTile:Et.from,dstDemTile:Et.to,phase:r.dk(Et.phase)}});const nt=wp(Re.projMatrix,_y(Re.canonical,ve.renderWorldCopies)?Ae/10:Ae,De);if(le(wt),!q)continue;w.setupElevationDraw(Ve,q,Vt);const ft=Re.toUnwrapped();J&&J.setupShadows(ft,q),b.uploadCommonUniforms(F,q,ft,null,he),q.draw(b,Ne,ce,We,fe,Jn.backCCW,nt,"terrain_raster",w.gridBuffer,ze,ke)}}}}(c,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const c=this.painter,g=this.painter.context,b=this.proxySourceCache,w=this.proxiedCoords[b.id],C=this._drapedRenderBatches.shift(),I=c.style.order,L=[];let F=0;for(const V of w){const q=b.getTileByID(V.proxyTileKey),G=b.proxyCachedFBO[V.key]?b.proxyCachedFBO[V.key][o]:void 0,J=G!==void 0?b.renderCache[G]:this.pool[F++],he=G!==void 0;if(q.texture=J.tex,he&&!J.dirty){L.push(q.tileID);continue}let le;g.bindFramebuffer.set(J.fb.framebuffer),this.renderedToTile=!1,J.dirty&&(g.clear({color:r.am.transparent,stencil:0}),J.dirty=!1);for(let fe=C.start;fe<=C.end;++fe){const ce=c.style._mergedLayers[I[fe]];if(ce.isHidden(c.transform.zoom))continue;const ve=c.style.getLayerSourceCache(ce),Ae=ve?this.proxyToSource[V.key][ve.id]:[V];if(!Ae)continue;const De=Ae;g.viewport.set([0,0,J.fb.width,J.fb.height]),le!==(ve?ve.id:null)&&(this._setupStencil(J,Ae,ce,ve),le=ve?ve.id:null),c.renderLayer(c,ve,ce,De)}if(this._drapedRenderBatches.length===0)for(const fe of this._pendingGroundEffectLayers){const ce=c.style._mergedLayers[I[fe]];if(ce.isHidden(c.transform.zoom))continue;const ve=c.style.getLayerSourceCache(ce),Ae=ve?this.proxyToSource[V.key][ve.id]:[V];if(!Ae)continue;const De=Ae;g.viewport.set([0,0,J.fb.width,J.fb.height]),le!==(ve?ve.id:null)&&(this._setupStencil(J,Ae,ce,ve),le=ve?ve.id:null),c.renderLayer(c,ve,ce,De)}this.renderedToTile?(J.dirty=!0,L.push(q.tileID)):he||--F,F===5&&(F=0,this.renderToBackBuffer(L))}return this.renderToBackBuffer(L),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,c.width,c.height]),C.end+1}postRender(){}isLayerOrderingCorrect(o){const c=o.order.length;let g=-1,b=c;for(let w=0;w<c;++w)this._style.isLayerDraped(o._mergedLayers[o.order[w]])?g=Math.max(g,w):b=Math.min(b,w);return b>g}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{o=Math.min(o,c.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,c,g){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const C=w.tileID,I=1<<C.overscaledZ,{x:L,y:F}=C.canonical,V=L/I,q=(L+1)/I,G=F/I,J=(F+1)/I;return{minx:V,miny:G,maxx:q,maxy:J,t:w.dem.tree.raycastRoot(V,G,q,J,o,c,g),tile:w}});b.sort((w,C)=>(w.t!==null?w.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const w of b){if(w.t==null)return null;const C=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,o,c,g);if(C!=null)return C}return null}_createFBO(){const o=this.painter.context,c=o.gl,g=this.drapeBufferSize;o.activeTexture.set(c.TEXTURE0);const b=new r.T(o,{width:g[0],height:g[1],data:null},c.RGBA8);b.bind(c.LINEAR,c.CLAMP_TO_EDGE);const w=o.createFramebuffer(g[0],g[1],!0,null);return w.colorAttachment.set(b.texture),w.depthAttachment=new bp(o,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:w,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const c=this._style._mergedLayers[o],g=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!g&&c.shouldRedrape():!g&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const g of this._style.getSources())if(g instanceof zo){o=!0;break}if(!o)return;const c={};for(let g=0;g<this._style.order.length;++g){const b=this._style._mergedLayers[this._style.order[g]],w=this._style.getLayerSourceCache(b);if(w&&!c[w.id]&&!b.isHidden(this.painter.transform.zoom)&&b.type==="line"&&b.widthExpression()instanceof r.ab){c[w.id]=!0;for(const C of this.proxyCoords){const I=this.proxyToSource[C.key][w.id];if(I)for(const L of I)this._clearRenderCacheForTile(w.id,L)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const g in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[g]._source instanceof Sa){o=!0;break}if(!o)return;const c={};for(let g=0;g<this._style.order.length;++g){const b=this._style._mergedLayers[this._style.order[g]],w=this._style.getLayerSourceCache(b);if(!w||c[w.id]||b.isHidden(this.painter.transform.zoom)||b.type!=="raster")continue;const C=b.paint.get("raster-fade-duration");for(const I of this.proxyCoords){const L=this.proxyToSource[I.key][w.id];if(L)for(const F of L){const V=Sp(w.getTile(F),w.findLoadedParent(F,0),w,this.painter.transform,C);(V.opacity!==1||V.mix!==0)&&this._clearRenderCacheForTile(w.id,F)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,c=o.length;if(c===0)return;const g=[];this._pendingGroundEffectLayers=[];let b,w=0,C=this._style._mergedLayers[o[w]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++w<c;)C=this._style._mergedLayers[o[w]];for(;w<c;++w){const I=this._style._mergedLayers[o[w]];I.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(I)?b===void 0&&(b=w):(I.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(w),b!==void 0&&(g.push({start:b,end:w-1}),b=void 0)))}if(b!==void 0&&g.push({start:b,end:w-1}),g.length!==0){const I=g[g.length-1];this._pendingGroundEffectLayers.every(L=>L>I.end)||r.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=g}_setupRenderCache(o){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const C=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let I=0;I<C.length;++I){const L=Object.values(C[I]);c.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,b=this._tilesDirty;for(let C=g.length-1;C>=0;C--){const I=g[C];if(c.getTileByID(I.key),c.proxyCachedFBO[I.key]!==void 0){const L=o[I.key],F=this.proxyToSource[I.key];let V=0;for(const q in F){const G=F[q],J=L[q];if(!J||J.length!==G.length||G.some((he,le)=>he!==J[le]||b[q]&&b[q].hasOwnProperty(he.key))){V=-1;break}++V}for(const q in c.proxyCachedFBO[I.key])c.renderCache[c.proxyCachedFBO[I.key][q]].dirty=V<0||V!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((C,I)=>I.end-I.start-(C.end-C.start));for(const C of w)for(const I of g){if(c.proxyCachedFBO[I.key])continue;let L=c.renderCachePool.pop();L===void 0&&c.renderCache.length<50&&(L=c.renderCache.length,c.renderCache.push(this._createFBO())),L!==void 0&&(c.proxyCachedFBO[I.key]={},c.proxyCachedFBO[I.key][C.start]=L,c.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(o,c,g,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,C=w.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let I;if(g.isTileClipped())I=c.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);I=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+I>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=I,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Yn.disabled}_renderTileClippingMasks(o,c){const g=this.painter,b=this.painter.context,w=b.gl;g._tileClippingMaskIDs={},b.setColorMode(vi.disabled),b.setDepthMode(mn.disabled);const C=g.getOrCreateProgram("clippingMask");for(const I of o){const L=g._tileClippingMaskIDs[I.key]=--c;C.draw(g,w.TRIANGLES,mn.disabled,new Yn({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),vi.disabled,Jn.disabled,pa(I.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(o){const c=this.painter.transform;if(o.x<0||o.x>c.width||o.y<0||o.y>c.height)return null;const g=[o.x,o.y,1,1];r.aA(g,g,c.pixelMatrixInverse),r.cw(g,g,1/g[3]),g[0]/=c.worldSize,g[1]/=c.worldSize;const b=c._camera.position,w=r.c6(1,c.center.lat),C=[b[0],b[1],b[2]/w,0],I=r.cY([],g.slice(0,3),C);r.au(I,I);const L=this.raycast(C,I,this._exaggeration);return L!==null&&L?(r.bF(C,C,I,L),C[3]=C[2],C[2]*=w,C):null}_setupProxiedCoordsForOrtho(o,c,g){if(o.getSource()instanceof r.aP)return this._setupProxiedCoordsForImageSource(o,c,g);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const b=this.proxiedCoords[o.id]=[],w=this.proxyCoords;for(let L=0;L<w.length;L++){const F=w[L],V=this._findTileCoveringTileID(F,o);if(V){const q=this._createProxiedId(F,V,g[F.key]&&g[F.key][o.id]);b.push(q),this.proxyToSource[F.key][o.id]=[q]}}let C=!1;const I=new Set;for(let L=0;L<c.length;L++){const F=o.getTile(c[L]);if(!F||!F.hasData())continue;const V=this._findTileCoveringTileID(F.tileID,this.proxySourceCache);if(V&&V.tileID.canonical.z!==F.tileID.canonical.z){const q=this.proxyToSource[V.tileID.key][o.id],G=this._createProxiedId(V.tileID,F,g[V.tileID.key]&&g[V.tileID.key][o.id]);q?q.splice(q.length-1,0,G):this.proxyToSource[V.tileID.key][o.id]=[G];const J=this.proxyToSource[V.tileID.key][o.id];I.has(J)||I.add(J),b.push(G),C=!0}}if(this._sourceTilesOverlap[o.id]=C,C&&this._debugParams.sortTilesHiZFirst)for(const L of I)L.sort((F,V)=>V.overscaledZ-F.overscaledZ)}_setupProxiedCoordsForImageSource(o,c,g){if(!o.getSource().loaded())return;const b=this.proxiedCoords[o.id]=[],w=this.proxyCoords,C=o.getSource(),I=C.tileID;if(!I)return;const L=new r.P(I.x,I.y)._div(1<<I.z),F=C.coordinates.map(r.ac.fromLngLat).reduce((q,G)=>(q.min.x=Math.min(q.min.x,G.x-L.x),q.min.y=Math.min(q.min.y,G.y-L.y),q.max.x=Math.max(q.max.x,G.x-L.x),q.max.y=Math.max(q.max.y,G.y-L.y),q),{min:new r.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new r.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),V=(q,G)=>{const J=q.wrap+q.canonical.x/(1<<q.canonical.z),he=q.canonical.y/(1<<q.canonical.z),le=r.aj/(1<<q.canonical.z),fe=G.wrap+G.canonical.x/(1<<G.canonical.z),ce=G.canonical.y/(1<<G.canonical.z);return J+le<fe+F.min.x||J>fe+F.max.x||he+le<ce+F.min.y||he>ce+F.max.y};for(let q=0;q<w.length;q++){const G=w[q];for(let J=0;J<c.length;J++){const he=o.getTile(c[J]);if(!he||!he.hasData()||V(G,he.tileID))continue;const le=this._createProxiedId(G,he,g[G.key]&&g[G.key][o.id]),fe=this.proxyToSource[G.key][o.id];fe?fe.push(le):this.proxyToSource[G.key][o.id]=[le],b.push(le)}}}_createProxiedId(o,c,g){let b=this.orthoMatrix;if(g){const w=g.find(C=>C.key===c.tileID.key);if(w)return w}if(c.tileID.key!==o.key){const w=o.canonical.z-c.tileID.canonical.z;let C,I,L;b=r.bz();const F=c.tileID.wrap-o.wrap<<o.overscaledZ;w>0?(C=r.aj>>w,I=C*((c.tileID.canonical.x<<w)-o.canonical.x+F),L=C*((c.tileID.canonical.y<<w)-o.canonical.y)):(C=r.aj<<-w,I=r.aj*(c.tileID.canonical.x-(o.canonical.x+F<<-w)),L=r.aj*(c.tileID.canonical.y-(o.canonical.y<<-w))),r.c5(b,0,C,0,C,0,1),r.bo(b,b,[I,L,0])}return new sf(c.tileID,o.key,b)}_findTileCoveringTileID(o,c){let g=c.getTile(o);if(g&&g.hasData())return g;const b=this._findCoveringTileCache[c.id],w=b[o.key];if(g=w?c.getTileByID(w):null,g&&g.hasData()||w===null)return g;let C=g?g.tileID:o,I=C.overscaledZ;const L=c.getSource().minzoom,F=[];if(!w){const q=c.getSource().maxzoom;if(o.canonical.z>=q){const G=o.canonical.z-q;c.getSource().reparseOverscaled?(I=Math.max(o.canonical.z+2,c.transform.tileZoom),C=new r.aM(I,o.wrap,q,o.canonical.x>>G,o.canonical.y>>G)):G!==0&&(I=q,C=new r.aM(I,o.wrap,q,o.canonical.x>>G,o.canonical.y>>G))}C.key!==o.key&&(F.push(C.key),g=c.getTile(C))}const V=q=>{F.forEach(G=>{b[G]=q}),F.length=0};for(I-=1;I>=L&&(!g||!g.hasData());I--){g&&V(g.tileID.key);const q=C.calculateScaledKey(I);if(g=c.getTileByID(q),g&&g.hasData())break;const G=b[q];if(G===null)break;G===void 0?F.push(q):g=c.getTileByID(G)}return V(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,c){let g=this._tilesDirty[o];g||(g=this._tilesDirty[o]={}),g[c.key]=!0}}function Jh(m,o,c){const g=function(I,L,F){const V=r.bE(L,I),q=r.bE(F,[.2126,.7152,.0722]),G=(he,le,fe)=>(1-fe)*he+fe*le,J=G(1-.3*Math.min(q,1),1,Math.min(V+1,1));return G(.92,1,Math.asin(r.aD(L[2],-1,1))/Math.PI+.5)*J}(m,[0,0,1],o),b=[0,0,0];r.b$(b,c.slice(0,3),g);const w=[0,0,0];r.b$(w,o.slice(0,3),m[2]);const C=[0,0,0];return r.cU(C,b,w),r.cX(C)}const af=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],ku=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Zc{static cacheKey(o,c,g,b){let w=`${c}${b?b.cacheKey:""}`;for(const C of g)o.usedDefines.includes(C)&&(w+=`/${C}`);return w}constructor(o,c,g,b,w,C){const I=o.gl;this.program=I.createProgram(),this.configuration=b,this.name=c,this.fixedDefines=[...C];const L=b?b.getBinderAttributes():[],F=(g.staticAttributes||[]).concat(L);let V=b?b.defines():[];V=V.concat(C.map(fe=>`#define ${fe}`));const q=`#version 300 es
`;let G=q+V.concat("precision mediump float;",Gh,Hl.fragmentSource).join(`
`);for(const fe of g.fragmentIncludes)G+=`
${Da[fe]}`;G+=`
${g.fragmentSource}`;let J=q+V.concat("precision highp float;",Gh,Hl.vertexSource).join(`
`);for(const fe of g.vertexIncludes)J+=`
${Da[fe]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&g.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(J+=`
uniform int u_instanceID;
`),J+=`
${g.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(J=J.replaceAll("gl_InstanceID","u_instanceID"));const he=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(he,G),I.compileShader(he),I.attachShader(this.program,he);const le=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())this.failedToCreate=!0;else{I.shaderSource(le,J),I.compileShader(le),I.attachShader(this.program,le),this.attributes={},this.numAttributes=F.length;for(let fe=0;fe<this.numAttributes;fe++)if(F[fe]){const ce=F[fe].startsWith("a_")?F[fe]:`a_${F[fe]}`;I.bindAttribLocation(this.program,fe,ce),this.attributes[ce]=fe}I.linkProgram(this.program),I.deleteShader(le),I.deleteShader(he),this.fixedUniforms=w(o),this.binderUniforms=b?b.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(fe=>({u_instanceID:new r.cc(fe)}))(o)),(C.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(fe=>({u_dem:new r.cc(fe),u_dem_prev:new r.cc(fe),u_dem_tl:new r.c9(fe),u_dem_scale:new r.cb(fe),u_dem_tl_prev:new r.c9(fe),u_dem_scale_prev:new r.cb(fe),u_dem_size:new r.cb(fe),u_dem_lerp:new r.cb(fe),u_exaggeration:new r.cb(fe),u_depth:new r.cc(fe),u_depth_size_inv:new r.c9(fe),u_depth_range_unpack:new r.c9(fe),u_occluder_half_size:new r.cb(fe),u_occlusion_depth_offset:new r.cb(fe),u_meter_to_dem:new r.cb(fe),u_label_plane_matrix_inv:new r.c8(fe)}))(o)),C.includes("GLOBE")&&(this.globeUniforms=(fe=>({u_tile_tl_up:new r.ca(fe),u_tile_tr_up:new r.ca(fe),u_tile_br_up:new r.ca(fe),u_tile_bl_up:new r.ca(fe),u_tile_up_scale:new r.cb(fe)}))(o)),C.includes("FOG")&&(this.fogUniforms=(fe=>({u_fog_matrix:new r.c8(fe),u_fog_range:new r.c9(fe),u_fog_color:new r.cQ(fe),u_fog_horizon_blend:new r.cb(fe),u_fog_vertical_limit:new r.c9(fe),u_fog_temporal_offset:new r.cb(fe),u_frustum_tl:new r.ca(fe),u_frustum_tr:new r.ca(fe),u_frustum_br:new r.ca(fe),u_frustum_bl:new r.ca(fe),u_globe_pos:new r.ca(fe),u_globe_radius:new r.cb(fe),u_globe_transition:new r.cb(fe),u_is_globe:new r.cc(fe),u_viewport:new r.c9(fe)}))(o)),C.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(fe=>({u_cutoff_params:new r.cQ(fe)}))(o)),C.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(fe=>({u_lighting_ambient_color:new r.ca(fe),u_lighting_directional_dir:new r.ca(fe),u_lighting_directional_color:new r.ca(fe),u_ground_radiance:new r.ca(fe)}))(o)),C.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(fe=>({u_light_matrix_0:new r.c8(fe),u_light_matrix_1:new r.c8(fe),u_fade_range:new r.c9(fe),u_shadow_normal_offset:new r.ca(fe),u_shadow_intensity:new r.cb(fe),u_shadow_texel_size:new r.cb(fe),u_shadow_map_resolution:new r.cb(fe),u_shadow_direction:new r.ca(fe),u_shadow_bias:new r.ca(fe),u_shadowmap_0:new r.cc(fe),u_shadowmap_1:new r.cc(fe)}))(o))}}setTerrainUniformValues(o,c){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const b in c)g[b]&&g[b].set(this.program,b,c[b])}}setGlobeUniformValues(o,c){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const b in c)g[b]&&g[b].set(this.program,b,c[b])}}setFogUniformValues(o,c){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}}setCutoffUniformValues(o,c){if(!this.cutoffUniforms)return;const g=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}}setLightsUniformValues(o,c){if(!this.lightsUniforms)return;const g=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}}setShadowUniformValues(o,c){if(this.failedToCreate||!this.shadowUniforms)return;const g=this.shadowUniforms;o.program.set(this.program);for(const b in c)g[b].set(this.program,b,c[b])}_drawDebugWireframe(o,c,g,b,w,C,I,L,F,V){const q=o.options.wireframe;if(q.terrain===!1&&q.layers2D===!1&&q.layers3D===!1)return;const G=o.context;if(!(!(!q.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!q.layers2D||o._terrain&&o._terrain.renderingToTexture||!af.includes(this.name))||!(!q.layers3D||!ku.includes(this.name))))return;const J=G.gl,he=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,w,G);if(!he)return;const le=[...this.fixedDefines];le.push("DEBUG_WIREFRAME");const fe=o.getOrCreateProgram(this.name,{config:this.configuration,defines:le});G.program.set(fe.program);const ce=(De,Ne,ze)=>{if(Ne[De]&&ze[De])for(const ke in Ne[De])ze[De][ke]&&ze[De][ke].set(ze.program,ke,Ne[De][ke].current)};F&&F.setUniforms(fe.program,G,fe.binderUniforms,I,{zoom:L}),ce("fixedUniforms",this,fe),ce("terrainUniforms",this,fe),ce("globeUniforms",this,fe),ce("fogUniforms",this,fe),ce("lightsUniforms",this,fe),ce("shadowUniforms",this,fe),he.bind(),G.setColorMode(new vi([J.ONE,J.ONE_MINUS_SRC_ALPHA,J.ZERO,J.ONE],r.am.transparent,[!0,!0,!0,!1])),G.setDepthMode(new mn(c.func===J.LESS?J.LEQUAL:c.func,mn.ReadOnly,c.range)),G.setStencilMode(Yn.disabled);const ve=3*C.primitiveLength*2,Ae=3*C.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const De=V||1;for(let Ne=0;Ne<De;++Ne)fe.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ne),J.drawElements(J.LINES,ve,J.UNSIGNED_SHORT,Ae)}else V&&V>1?J.drawElementsInstanced(J.LINES,ve,J.UNSIGNED_SHORT,Ae,V):J.drawElements(J.LINES,ve,J.UNSIGNED_SHORT,Ae);w.bind(),G.program.set(this.program),G.setDepthMode(c),G.setStencilMode(g),G.setColorMode(b)}checkUniforms(o,c,g){if(this.fixedDefines.includes(c)){for(const b of Object.keys(g))if(!g[b].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${b} not set but required by ${c} being defined`)}}draw(o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe){const ce=o.context,ve=ce.gl;if(this.failedToCreate)return;ce.program.set(this.program),ce.setDepthMode(g),ce.setStencilMode(b),ce.setColorMode(w),ce.setCullFace(C);for(const Ne of Object.keys(this.fixedUniforms))this.fixedUniforms[Ne].set(this.program,Ne,I[Ne]);he&&he.setUniforms(this.program,ce,this.binderUniforms,G,{zoom:J});const Ae={[ve.POINTS]:1,[ve.LINES]:2,[ve.TRIANGLES]:3,[ve.LINE_STRIP]:1}[c];this.checkUniforms(L,"RENDER_SHADOWS",this.shadowUniforms);const De=fe&&fe>0?1:void 0;for(const Ne of q.get()){const ze=Ne.vaos||(Ne.vaos={});if((ze[L]||(ze[L]=new Du)).bind(ce,this,F,he?he.getPaintVertexBuffers():[],V,Ne.vertexOffset,le||[],De),this.forceManualRenderingForInstanceIDShaders){const ke=fe||1;for(let Re=0;Re<ke;++Re)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Re),V?ve.drawElements(c,Ne.primitiveLength*Ae,ve.UNSIGNED_SHORT,Ne.primitiveOffset*Ae*2):ve.drawArrays(c,Ne.vertexOffset,Ne.vertexLength)}else fe&&fe>1?ve.drawElementsInstanced(c,Ne.primitiveLength*Ae,ve.UNSIGNED_SHORT,Ne.primitiveOffset*Ae*2,fe):V?ve.drawElements(c,Ne.primitiveLength*Ae,ve.UNSIGNED_SHORT,Ne.primitiveOffset*Ae*2):ve.drawArrays(c,Ne.vertexOffset,Ne.vertexLength);c===ve.TRIANGLES&&V&&this._drawDebugWireframe(o,g,b,w,V,Ne,G,J,he,fe)}}}function Tp(m,o,c=0){const g=Math.pow(2,o.tileID.overscaledZ),b=o.tileSize*Math.pow(2,m.transform.tileZoom)/g,w=b*(o.tileID.canonical.x+o.tileID.wrap*g),C=b*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/r.aw(o,1,m.transform.tileZoom),u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C],u_pattern_transition:c}}const lf={terrain:0,flat:1},bv=r.bz(),zu=(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce)=>{const ve=o.style.light,Ae=ve.properties.get("position"),De=[Ae.x,Ae.y,Ae.z],Ne=r.dx();ve.properties.get("anchor")==="viewport"&&(r.dy(Ne,-o.transform.angle),r.dz(De,De,Ne));const ze=ve.properties.get("color"),ke=o.transform,Re={u_matrix:m,u_lightpos:De,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[ze.r,ze.g,ze.b],u_vertical_gradient:+c,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:bv,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:lf[F],u_base_type:lf[V],u_ao:b,u_edge_radius:w,u_width_scale:C,u_flood_light_color:he,u_vertical_scale:le,u_flood_light_intensity:fe,u_ground_shadow_factor:ce};return ke.projection.name==="globe"&&(Re.u_tile_id=[I.canonical.x,I.canonical.y,1<<I.canonical.z],Re.u_zoom_transition=q,Re.u_inv_rot_matrix=J,Re.u_merc_center=G,Re.u_up_dir=ke.projection.upVector(new r.cp(0,0,0),G[0]*r.aj,G[1]*r.aj),Re.u_height_lift=L),Re},Qh=(m,o,c,g,b,w)=>({u_matrix:m,u_edge_radius:o,u_width_scale:c,u_vertical_scale:g,u_height_type:lf[b],u_base_type:lf[w]}),vy=(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce)=>{const ve=zu(m,o,c,g,b,w,C,I,F,V,q,G,J,he,le,fe,1,[0,0,0]),Ae={u_height_factor:-Math.pow(2,I.overscaledZ)/L.tileSize/8};return r.l(ve,Tp(o,L,ce),Ae)},Ep=(m,o,c)=>({u_matrix:m,u_emissive_strength:o,u_ground_shadow_factor:c}),xy=(m,o,c,g,b,w=0)=>r.l(Ep(m,o,b),Tp(c,g,w)),Cp=(m,o,c,g)=>({u_matrix:m,u_world:c,u_emissive_strength:o,u_ground_shadow_factor:g}),wv=(m,o,c,g,b,w,C=0)=>r.l(xy(m,o,c,g,w,C),{u_world:b}),cf=(m,o)=>({u_matrix:m,u_ground_shadow_factor:o}),ed=(m,o,c,g,b)=>({u_matrix:m,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:c,u_height_scale:g,u_reset_depth:b}),by=(m,o,c,g)=>{const b=r.aj/c.tileSize;return{u_matrix:m,u_camera_to_center_distance:o.getCameraToCenterDistance(g),u_extrude_scale:[o.pixelsToGLUnits[0]/b,o.pixelsToGLUnits[1]/b]}},yc=(m,o,c=1)=>({u_matrix:m,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:c}),wy=r.bz(),uf=(m,o,c,g,b,w,C)=>{const I=m.transform,L=I.projection.name==="globe",F=L?r.dA(I.zoom,o.canonical)*I._pixelsPerMercatorPixel:r.aw(c,1,w),V={u_matrix:o.projMatrix,u_extrude_scale:F,u_intensity:C,u_inv_rot_matrix:wy,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){V.u_inv_rot_matrix=g,V.u_merc_center=b,V.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],V.u_zoom_transition=r.ah(I.zoom);const q=b[0]*r.aj,G=b[1]*r.aj;V.u_up_dir=I.projection.upVector(new r.cp(0,0,0),q,G)}return V};function Xm(m,[o,c,g,b],[w,C]){if(w===C)return[0,0,0,0];const I=255*(m-1)/(m*(C-w));return[o*I,c*I,g*I,b*I]}function Ap(m,o,[c,g]){return c===g?0:.5/m+(o-c)*(m-1)/(m*(g-c))}const ma=(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce,ve,Ae,De)=>({u_matrix:m,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:g,u_grid_matrix:b,u_tl_parent:w,u_scale_parent:F,u_fade_t:V.mix,u_opacity:V.opacity*q.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:q.paint.get("raster-brightness-min"),u_brightness_high:q.paint.get("raster-brightness-max"),u_saturation_factor:r.dB(q.paint.get("raster-saturation")),u_contrast_factor:r.dC(q.paint.get("raster-contrast")),u_spin_weights:Zm(q.paint.get("raster-hue-rotate")),u_perspective_transform:G,u_raster_elevation:J,u_zoom_transition:C,u_merc_center:I,u_cutoff_params:L,u_colorization_mix:Xm(r.dD,le,ce),u_colorization_offset:Ap(r.dD,fe,ce),u_color_ramp:he,u_texture_offset:[Ae/(ve+2*Ae),ve/(ve+2*Ae)],u_texture_res:[ve+2*Ae,ve+2*Ae],u_emissive_strength:De});function Zm(m){m*=Math.PI/180;const o=Math.sin(m),c=Math.cos(m);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}const ga=.05,_c=(m,o,c,g,b,w,C,I,L,F,V,q)=>({u_matrix:m,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:g,u_grid_matrix:b,u_tl_parent:w,u_scale_parent:F,u_fade_t:V.mix,u_opacity:V.opacity,u_image0:0,u_image1:1,u_raster_elevation:q,u_zoom_transition:C,u_merc_center:I,u_cutoff_params:L}),Yl=(m,o,c,g,b,w,C,I,L,F)=>({u_particle_texture:m,u_particle_texture_side_len:o,u_tile_offset:c,u_velocity:g,u_color_ramp:w,u_velocity_res:b,u_max_speed:C,u_uv_offset:I,u_data_scale:[255*L[0],255*L[1]],u_data_offset:F,u_particle_pos_scale:1.1,u_particle_pos_offset:[ga,ga]}),hf=(m,o,c,g,b,w,C,I,L,F)=>({u_particle_texture:m,u_particle_texture_side_len:o,u_velocity:c,u_velocity_res:g,u_max_speed:b,u_speed_factor:w,u_reset_rate:C,u_rand_seed:Math.random(),u_uv_offset:I,u_data_scale:[255*L[0],255*L[1]],u_data_offset:F,u_particle_pos_scale:1.1,u_particle_pos_offset:[ga,ga]}),Mp=r.bz(),df=(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce,ve,Ae,De,Ne,ze)=>{const ke=b.transform,Re={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ke.getCameraToCenterDistance(ve),u_rotate_symbol:+c,u_aspect_ratio:ke.width/ke.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+F,u_elevation_from_sea:L?1:0,u_pitch_with_map:+g,u_texsize:V,u_texsize_icon:q,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Mp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Mp,u_up_vector:[0,-1,0],u_color_adj_mat:De,u_icon_transition:Ne||0,u_gamma_scale:g?b.transform.getCameraToCenterDistance(ve)*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:r.q.devicePixelRatio,u_is_halo:1,u_scale_factor:ze||1,u_ground_shadow_factor:Ae,u_inv_matrix:r.bi(r.bz(),C)};return ve.name==="globe"&&(Re.u_tile_id=[J.canonical.x,J.canonical.y,1<<J.canonical.z],Re.u_zoom_transition=he,Re.u_inv_rot_matrix=fe,Re.u_merc_center=le,Re.u_camera_forward=ke._camera.forward(),Re.u_ecef_origin=r.dE(ke.globeMatrix,J.toUnwrapped()),Re.u_tile_matrix=Float32Array.from(ke.globeMatrix),Re.u_up_vector=ce),Re},Bu=(m,o,c,g)=>({u_matrix:m,u_emissive_strength:o,u_opacity:c,u_color:g}),ff=(m,o,c,g,b,w,C,I,L)=>r.l(function(F,V,q,G,J,he){const{width:le,height:fe}=G.imageManager.getPixelSize(V),ce=Math.pow(2,he.tileID.overscaledZ),ve=he.tileSize*Math.pow(2,G.transform.tileZoom)/ce,Ae=ve*(he.tileID.canonical.x+he.tileID.wrap*ce),De=ve*he.tileID.canonical.y;return{u_image:0,u_pattern_tl:q.tl,u_pattern_br:q.br,u_texsize:[le,fe],u_pattern_size:q.displaySize,u_pattern_units_to_pixels:J?[G.transform.width,-1*G.transform.height]:[1/r.aw(he,1,G.transform.tileZoom),1/r.aw(he,1,G.transform.tileZoom)],u_pixel_coord_upper:[Ae>>16,De>>16],u_pixel_coord_lower:[65535&Ae,65535&De]}}(0,w,C,g,I,L),{u_matrix:m,u_emissive_strength:o,u_opacity:c}),Rp=new Float32Array(r.bx([])),Fu=(m,o,c,g,b,w,C,I,L,F,V,q,G,J=[0,0,0],he)=>{const le=b.style.light,fe=le.properties.get("position"),ce=[-fe.x,-fe.y,fe.z],ve=r.dx();le.properties.get("anchor")==="viewport"&&(r.dy(ve,-b.transform.angle),r.dz(ce,ce,ve));const Ae=V.alphaMode==="MASK",De=le.properties.get("color").toRenderColor(null),Ne=G.paint.get("model-ambient-occlusion-intensity"),ze=G.paint.get("model-color").constantOr(r.am.white).toRenderColor(null),ke=G.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:m,u_lighting_matrix:o,u_normal_matrix:c,u_node_matrix:g||Rp,u_lightpos:ce,u_lightintensity:le.properties.get("intensity"),u_lightcolor:[De.r,De.g,De.b],u_camera_pos:J,u_opacity:w,u_baseTextureIsAlpha:0,u_alphaMask:+Ae,u_alphaCutoff:V.alphaCutoff,u_baseColorFactor:[C.r,C.g,C.b,C.a],u_emissiveFactor:[I[0],I[1],I[2],1],u_metallicFactor:L,u_roughnessFactor:F,u_baseColorTexture:ks.BaseColor,u_metallicRoughnessTexture:ks.MetallicRoughness,u_normalTexture:ks.Normal,u_occlusionTexture:ks.Occlusion,u_emissionTexture:ks.Emission,u_lutTexture:ks.LUT,u_color_mix:[ze.r,ze.g,ze.b,ke],u_aoIntensity:Ne,u_emissive_strength:q,u_occlusionTextureTransform:he||[0,0,0,0]}},td=(m,o=Rp,c=Rp)=>({u_matrix:m,u_instance:o,u_node_matrix:c}),Ym={fillExtrusion:m=>({u_matrix:new r.c8(m),u_lightpos:new r.ca(m),u_lightintensity:new r.cb(m),u_lightcolor:new r.ca(m),u_vertical_gradient:new r.cb(m),u_opacity:new r.cb(m),u_edge_radius:new r.cb(m),u_width_scale:new r.cb(m),u_ao:new r.c9(m),u_height_type:new r.cc(m),u_base_type:new r.cc(m),u_tile_id:new r.ca(m),u_zoom_transition:new r.cb(m),u_inv_rot_matrix:new r.c8(m),u_merc_center:new r.c9(m),u_up_dir:new r.ca(m),u_height_lift:new r.cb(m),u_flood_light_color:new r.ca(m),u_vertical_scale:new r.cb(m),u_flood_light_intensity:new r.cb(m),u_ground_shadow_factor:new r.ca(m)}),fillExtrusionDepth:m=>({u_matrix:new r.c8(m),u_edge_radius:new r.cb(m),u_width_scale:new r.cb(m),u_vertical_scale:new r.cb(m),u_height_type:new r.cc(m),u_base_type:new r.cc(m)}),fillExtrusionPattern:m=>({u_matrix:new r.c8(m),u_lightpos:new r.ca(m),u_lightintensity:new r.cb(m),u_lightcolor:new r.ca(m),u_vertical_gradient:new r.cb(m),u_height_factor:new r.cb(m),u_edge_radius:new r.cb(m),u_width_scale:new r.cb(m),u_ao:new r.c9(m),u_height_type:new r.cc(m),u_base_type:new r.cc(m),u_tile_id:new r.ca(m),u_zoom_transition:new r.cb(m),u_inv_rot_matrix:new r.c8(m),u_merc_center:new r.c9(m),u_up_dir:new r.ca(m),u_height_lift:new r.cb(m),u_image:new r.cc(m),u_texsize:new r.c9(m),u_pixel_coord_upper:new r.c9(m),u_pixel_coord_lower:new r.c9(m),u_tile_units_to_pixels:new r.cb(m),u_opacity:new r.cb(m),u_pattern_transition:new r.cb(m)}),fillExtrusionGroundEffect:m=>({u_matrix:new r.c8(m),u_opacity:new r.cb(m),u_ao_pass:new r.cb(m),u_meter_to_tile:new r.cb(m),u_ao:new r.c9(m),u_flood_light_intensity:new r.cb(m),u_flood_light_color:new r.ca(m),u_attenuation:new r.cb(m),u_edge_radius:new r.cb(m),u_fb:new r.cc(m),u_fb_size:new r.cb(m),u_dynamic_offset:new r.cb(m)}),fill:m=>({u_matrix:new r.c8(m),u_emissive_strength:new r.cb(m),u_ground_shadow_factor:new r.ca(m)}),fillPattern:m=>({u_matrix:new r.c8(m),u_emissive_strength:new r.cb(m),u_image:new r.cc(m),u_texsize:new r.c9(m),u_pixel_coord_upper:new r.c9(m),u_pixel_coord_lower:new r.c9(m),u_tile_units_to_pixels:new r.cb(m),u_ground_shadow_factor:new r.ca(m),u_pattern_transition:new r.cb(m)}),fillOutline:m=>({u_matrix:new r.c8(m),u_emissive_strength:new r.cb(m),u_world:new r.c9(m),u_ground_shadow_factor:new r.ca(m)}),fillOutlinePattern:m=>({u_matrix:new r.c8(m),u_emissive_strength:new r.cb(m),u_world:new r.c9(m),u_image:new r.cc(m),u_texsize:new r.c9(m),u_pixel_coord_upper:new r.c9(m),u_pixel_coord_lower:new r.c9(m),u_tile_units_to_pixels:new r.cb(m),u_ground_shadow_factor:new r.ca(m),u_pattern_transition:new r.cb(m)}),building:m=>({u_matrix:new r.c8(m),u_normal_matrix:new r.c8(m),u_opacity:new r.cb(m)}),buildingDepth:m=>({u_matrix:new r.c8(m)}),elevatedStructuresDepth:m=>({u_matrix:new r.c8(m),u_depth_bias:new r.cb(m)}),elevatedStructures:m=>({u_matrix:new r.c8(m),u_ground_shadow_factor:new r.ca(m)}),elevatedStructuresDepthReconstruct:m=>({u_matrix:new r.c8(m),u_camera_pos:new r.ca(m),u_depth_bias:new r.cb(m),u_height_scale:new r.cb(m),u_reset_depth:new r.cb(m)}),circle:r.dF,collisionBox:m=>({u_matrix:new r.c8(m),u_camera_to_center_distance:new r.cb(m),u_extrude_scale:new r.c9(m)}),collisionCircle:m=>({u_matrix:new r.c8(m),u_inv_matrix:new r.c8(m),u_camera_to_center_distance:new r.cb(m),u_viewport_size:new r.c9(m)}),debug:m=>({u_color:new r.di(m),u_matrix:new r.c8(m),u_overlay:new r.cc(m),u_overlay_scale:new r.cb(m)}),clippingMask:m=>({u_matrix:new r.c8(m)}),heatmap:m=>({u_extrude_scale:new r.cb(m),u_intensity:new r.cb(m),u_matrix:new r.c8(m),u_inv_rot_matrix:new r.c8(m),u_merc_center:new r.c9(m),u_tile_id:new r.ca(m),u_zoom_transition:new r.cb(m),u_up_dir:new r.ca(m)}),heatmapTexture:m=>({u_image:new r.cc(m),u_color_ramp:new r.cc(m),u_opacity:new r.cb(m)}),hillshade:m=>({u_matrix:new r.c8(m),u_image:new r.cc(m),u_latrange:new r.c9(m),u_light:new r.c9(m),u_shadow:new r.di(m),u_highlight:new r.di(m),u_emissive_strength:new r.cb(m),u_accent:new r.di(m)}),hillshadePrepare:m=>({u_matrix:new r.c8(m),u_image:new r.cc(m),u_dimension:new r.c9(m),u_zoom:new r.cb(m)}),line:r.dG,linePattern:r.dH,raster:m=>({u_matrix:new r.c8(m),u_normalize_matrix:new r.c8(m),u_globe_matrix:new r.c8(m),u_merc_matrix:new r.c8(m),u_grid_matrix:new r.dj(m),u_tl_parent:new r.c9(m),u_scale_parent:new r.cb(m),u_fade_t:new r.cb(m),u_opacity:new r.cb(m),u_image0:new r.cc(m),u_image1:new r.cc(m),u_brightness_low:new r.cb(m),u_brightness_high:new r.cb(m),u_saturation_factor:new r.cb(m),u_contrast_factor:new r.cb(m),u_spin_weights:new r.ca(m),u_perspective_transform:new r.c9(m),u_raster_elevation:new r.cb(m),u_zoom_transition:new r.cb(m),u_merc_center:new r.c9(m),u_cutoff_params:new r.cQ(m),u_colorization_mix:new r.cQ(m),u_colorization_offset:new r.cb(m),u_color_ramp:new r.cc(m),u_texture_offset:new r.c9(m),u_texture_res:new r.c9(m),u_emissive_strength:new r.cb(m)}),rasterParticle:m=>({u_matrix:new r.c8(m),u_normalize_matrix:new r.c8(m),u_globe_matrix:new r.c8(m),u_merc_matrix:new r.c8(m),u_grid_matrix:new r.dj(m),u_tl_parent:new r.c9(m),u_scale_parent:new r.cb(m),u_fade_t:new r.cb(m),u_opacity:new r.cb(m),u_image0:new r.cc(m),u_image1:new r.cc(m),u_raster_elevation:new r.cb(m),u_zoom_transition:new r.cb(m),u_merc_center:new r.c9(m),u_cutoff_params:new r.cQ(m)}),rasterParticleTexture:m=>({u_texture:new r.cc(m),u_opacity:new r.cb(m)}),rasterParticleDraw:m=>({u_particle_texture:new r.cc(m),u_particle_texture_side_len:new r.cb(m),u_tile_offset:new r.c9(m),u_velocity:new r.cc(m),u_color_ramp:new r.cc(m),u_velocity_res:new r.c9(m),u_max_speed:new r.cb(m),u_uv_offset:new r.c9(m),u_data_scale:new r.c9(m),u_data_offset:new r.cb(m),u_particle_pos_scale:new r.cb(m),u_particle_pos_offset:new r.c9(m)}),rasterParticleUpdate:m=>({u_particle_texture:new r.cc(m),u_particle_texture_side_len:new r.cb(m),u_velocity:new r.cc(m),u_velocity_res:new r.c9(m),u_max_speed:new r.cb(m),u_speed_factor:new r.cb(m),u_reset_rate:new r.cb(m),u_rand_seed:new r.cb(m),u_uv_offset:new r.c9(m),u_data_scale:new r.c9(m),u_data_offset:new r.cb(m),u_particle_pos_scale:new r.cb(m),u_particle_pos_offset:new r.c9(m)}),symbol:m=>({u_is_size_zoom_constant:new r.cc(m),u_is_size_feature_constant:new r.cc(m),u_size_t:new r.cb(m),u_size:new r.cb(m),u_camera_to_center_distance:new r.cb(m),u_rotate_symbol:new r.cc(m),u_aspect_ratio:new r.cb(m),u_fade_change:new r.cb(m),u_matrix:new r.c8(m),u_label_plane_matrix:new r.c8(m),u_coord_matrix:new r.c8(m),u_is_text:new r.cc(m),u_elevation_from_sea:new r.cc(m),u_pitch_with_map:new r.cc(m),u_texsize:new r.c9(m),u_texsize_icon:new r.c9(m),u_texture:new r.cc(m),u_texture_icon:new r.cc(m),u_gamma_scale:new r.cb(m),u_device_pixel_ratio:new r.cb(m),u_tile_id:new r.ca(m),u_zoom_transition:new r.cb(m),u_inv_rot_matrix:new r.c8(m),u_merc_center:new r.c9(m),u_camera_forward:new r.ca(m),u_tile_matrix:new r.c8(m),u_up_vector:new r.ca(m),u_ecef_origin:new r.ca(m),u_is_halo:new r.cc(m),u_icon_transition:new r.cb(m),u_color_adj_mat:new r.c8(m),u_scale_factor:new r.cb(m),u_ground_shadow_factor:new r.ca(m),u_inv_matrix:new r.c8(m)}),background:m=>({u_matrix:new r.c8(m),u_emissive_strength:new r.cb(m),u_opacity:new r.cb(m),u_color:new r.di(m)}),backgroundPattern:m=>({u_matrix:new r.c8(m),u_emissive_strength:new r.cb(m),u_opacity:new r.cb(m),u_image:new r.cc(m),u_pattern_tl:new r.c9(m),u_pattern_br:new r.c9(m),u_texsize:new r.c9(m),u_pattern_size:new r.c9(m),u_pixel_coord_upper:new r.c9(m),u_pixel_coord_lower:new r.c9(m),u_pattern_units_to_pixels:new r.c9(m)}),terrainRaster:m=>({u_matrix:new r.c8(m),u_image0:new r.cc(m),u_skirt_height:new r.cb(m),u_ground_shadow_factor:new r.ca(m)}),skybox:m=>({u_matrix:new r.c8(m),u_sun_direction:new r.ca(m),u_cubemap:new r.cc(m),u_opacity:new r.cb(m),u_temporal_offset:new r.cb(m)}),skyboxGradient:m=>({u_matrix:new r.c8(m),u_color_ramp:new r.cc(m),u_center_direction:new r.ca(m),u_radius:new r.cb(m),u_opacity:new r.cb(m),u_temporal_offset:new r.cb(m)}),skyboxCapture:m=>({u_matrix_3f:new r.dj(m),u_sun_direction:new r.ca(m),u_sun_intensity:new r.cb(m),u_color_tint_r:new r.cQ(m),u_color_tint_m:new r.cQ(m),u_luminance:new r.cb(m)}),globeRaster:m=>({u_proj_matrix:new r.c8(m),u_globe_matrix:new r.c8(m),u_normalize_matrix:new r.c8(m),u_merc_matrix:new r.c8(m),u_zoom_transition:new r.cb(m),u_merc_center:new r.c9(m),u_image0:new r.cc(m),u_grid_matrix:new r.dj(m),u_skirt_height:new r.cb(m),u_far_z_cutoff:new r.cb(m),u_frustum_tl:new r.ca(m),u_frustum_tr:new r.ca(m),u_frustum_br:new r.ca(m),u_frustum_bl:new r.ca(m),u_globe_pos:new r.ca(m),u_globe_radius:new r.cb(m),u_viewport:new r.c9(m)}),globeAtmosphere:m=>({u_frustum_tl:new r.ca(m),u_frustum_tr:new r.ca(m),u_frustum_br:new r.ca(m),u_frustum_bl:new r.ca(m),u_horizon:new r.cb(m),u_transition:new r.cb(m),u_fadeout_range:new r.cb(m),u_color:new r.cQ(m),u_high_color:new r.cQ(m),u_space_color:new r.cQ(m),u_temporal_offset:new r.cb(m),u_horizon_angle:new r.cb(m)}),model:m=>({u_matrix:new r.c8(m),u_lighting_matrix:new r.c8(m),u_normal_matrix:new r.c8(m),u_node_matrix:new r.c8(m),u_lightpos:new r.ca(m),u_lightintensity:new r.cb(m),u_lightcolor:new r.ca(m),u_camera_pos:new r.ca(m),u_opacity:new r.cb(m),u_baseColorFactor:new r.cQ(m),u_emissiveFactor:new r.cQ(m),u_metallicFactor:new r.cb(m),u_roughnessFactor:new r.cb(m),u_baseTextureIsAlpha:new r.cc(m),u_alphaMask:new r.cc(m),u_alphaCutoff:new r.cb(m),u_baseColorTexture:new r.cc(m),u_metallicRoughnessTexture:new r.cc(m),u_normalTexture:new r.cc(m),u_occlusionTexture:new r.cc(m),u_emissionTexture:new r.cc(m),u_lutTexture:new r.cc(m),u_color_mix:new r.cQ(m),u_aoIntensity:new r.cb(m),u_emissive_strength:new r.cb(m),u_occlusionTextureTransform:new r.cQ(m)}),modelDepth:m=>({u_matrix:new r.c8(m),u_instance:new r.c8(m),u_node_matrix:new r.c8(m)}),groundShadow:m=>({u_matrix:new r.c8(m),u_ground_shadow_factor:new r.ca(m)}),stars:m=>({u_matrix:new r.c8(m),u_up:new r.ca(m),u_right:new r.ca(m),u_intensity_multiplier:new r.cb(m)}),snowParticle:m=>({u_modelview:new r.c8(m),u_projection:new r.c8(m),u_time:new r.cb(m),u_cam_pos:new r.ca(m),u_velocityConeAperture:new r.cb(m),u_velocity:new r.cb(m),u_horizontalOscillationRadius:new r.cb(m),u_horizontalOscillationRate:new r.cb(m),u_boxSize:new r.cb(m),u_billboardSize:new r.cb(m),u_simpleShapeParameters:new r.c9(m),u_screenSize:new r.c9(m),u_thinningCenterPos:new r.c9(m),u_thinningShape:new r.ca(m),u_thinningAffectedRatio:new r.cb(m),u_thinningParticleOffset:new r.cb(m),u_particleColor:new r.cQ(m),u_direction:new r.ca(m)}),rainParticle:m=>({u_modelview:new r.c8(m),u_projection:new r.c8(m),u_time:new r.cb(m),u_cam_pos:new r.ca(m),u_texScreen:new r.cc(m),u_velocityConeAperture:new r.cb(m),u_velocity:new r.cb(m),u_boxSize:new r.cb(m),u_rainDropletSize:new r.c9(m),u_distortionStrength:new r.cb(m),u_rainDirection:new r.ca(m),u_color:new r.cQ(m),u_screenSize:new r.c9(m),u_thinningCenterPos:new r.c9(m),u_thinningShape:new r.ca(m),u_thinningAffectedRatio:new r.cb(m),u_thinningParticleOffset:new r.cb(m),u_shapeDirectionalPower:new r.cb(m),u_shapeNormalPower:new r.cb(m),u_mode:new r.cb(m)}),vignette:m=>({u_vignetteShape:new r.ca(m),u_vignetteColor:new r.cQ(m)}),occlusion:m=>({u_matrix:new r.c8(m),u_anchorPos:new r.ca(m),u_screenSizePx:new r.c9(m),u_occluderSizePx:new r.c9(m),u_color:new r.cQ(m)})};class vc{constructor(o,c,g,b){this.id=vc.uniqueIdxCounter,vc.uniqueIdxCounter++,this.context=o;const w=o.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||b||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=vc.uniqueIdxCounter,vc.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}vc.uniqueIdxCounter=0;const Sy={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ip{constructor(o,c,g,b,w,C){this.length=c.length,this.attributes=g,this.itemSize=c.bytesPerElement,this.dynamicDraw=b,this.instanceCount=C,this.context=o;const I=o.gl;this.buffer=I.createBuffer(),o.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||w||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let g=0;g<this.attributes.length;g++){const b=c.attributes[this.attributes[g].name];b!==void 0&&o.enableVertexAttribArray(b)}}setVertexAttribPointers(o,c,g){for(let b=0;b<this.attributes.length;b++){const w=this.attributes[b],C=c.attributes[w.name];C!==void 0&&o.vertexAttribPointer(C,w.components,o[Sy[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}setVertexAttribDivisor(o,c,g){for(let b=0;b<this.attributes.length;b++){const w=c.attributes[this.attributes[b].name];w!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(w,g)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Kl{constructor(o,c,g,b,w){this.context=o,this.width=c,this.height=g;const C=this.framebuffer=o.gl.createFramebuffer();b&&(this.colorAttachment=new Wc(o,C)),w&&(this.depthAttachmentType=w,this.depthAttachment=w==="renderbuffer"?new Xl(o,C):new Zl(o,C))}destroy(){const o=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&o.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&o.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&o.deleteTexture(c)}o.deleteFramebuffer(this.framebuffer)}}class yr{constructor(o,c){this.gl=o,this.clearColor=new Hm(this),this.clearDepth=new Wh(this),this.clearStencil=new my(this),this.colorMask=new Gm(this),this.depthMask=new Jd(this),this.stencilMask=new $c(this),this.stencilFunc=new qm(this),this.stencilOp=new vp(this),this.stencilTest=new La(this),this.depthRange=new da(this),this.depthTest=new Hc(this),this.depthFunc=new fa(this),this.blend=new ql(this),this.blendFunc=new Ou(this),this.blendColor=new Xh(this),this.blendEquation=new Zh(this),this.cullFace=new Qd(this),this.cullFaceSide=new Ss(this),this.frontFace=new Eo(this),this.program=new io(this),this.activeTexture=new Gc(this),this.viewport=new Wl(this),this.bindFramebuffer=new xp(this),this.bindRenderbuffer=new gc(this),this.bindTexture=new ef(this),this.bindVertexBuffer=new gy(this),this.bindElementBuffer=new tf(this),this.bindVertexArrayOES=new nf(this),this.pixelStoreUnpack=new Yh(this),this.pixelStoreUnpackPremultiplyAlpha=new rf(this),this.pixelStoreUnpackFlipY=new yy(this),this.options=c?Object.assign({},c):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=c&&!!c.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c,g){return new vc(this,o,c,g)}createVertexBuffer(o,c,g,b,w){return new Ip(this,o,c,g,b,w)}createRenderbuffer(o,c,g){const b=this.gl,w=b.createRenderbuffer();return this.bindRenderbuffer.set(w),b.renderbufferStorage(b.RENDERBUFFER,o,c,g),this.bindRenderbuffer.set(null),w}createFramebuffer(o,c,g,b){return new Kl(this,o,c,g,b)}clear({color:o,depth:c,stencil:g,colorMask:b}){const w=this.gl;let C=0;o&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(b||[!0,!0,!0,!0])),c!==void 0&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),g!==void 0&&(C|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),w.clear(C)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){r.bv(o.blendFunction,vi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let ro;function Bo(m,o,c,g,b,w,C){const I=m.context,L=I.gl,F=m.transform,V=m.getOrCreateProgram("collisionBox"),q=[];let G=0,J=0;for(let De=0;De<g.length;De++){const Ne=g[De],ze=o.getTile(Ne),ke=ze.getBucket(c);if(!ke)continue;const Re=ap(Ne,ke,F);let Ve=Re;b[0]===0&&b[1]===0||(Ve=m.translatePosMatrix(Re,ze,b,w));const We=C?ke.textCollisionBox:ke.iconCollisionBox,ct=ke.collisionCircleArray;if(ct.length>0){const rt=r.bz(),Et=Ve;r.cB(rt,ke.placementInvProjMatrix,F.glCoordMatrix),r.cB(rt,rt,ke.placementViewportMatrix),q.push({circleArray:ct,circleOffset:J,transform:Et,invTransform:rt,projection:ke.getProjection()}),G+=ct.length/4,J=G}We&&(m.terrain&&m.terrain.setupElevationDraw(ze,V),V.draw(m,L.LINES,mn.disabled,Yn.disabled,m.colorModeForRenderPass(),Jn.disabled,by(Ve,F,ze,ke.getProjection()),c.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,null,F.zoom,null,[We.collisionVertexBuffer,We.collisionVertexBufferExt]))}if(!C||!q.length)return;const he=m.getOrCreateProgram("collisionCircle"),le=new r.dI;le.resize(4*G),le._trim();let fe=0;for(const De of q)for(let Ne=0;Ne<De.circleArray.length/4;Ne++){const ze=4*Ne,ke=De.circleArray[ze+0],Re=De.circleArray[ze+1],Ve=De.circleArray[ze+2],We=De.circleArray[ze+3];le.emplace(fe++,ke,Re,Ve,We,0),le.emplace(fe++,ke,Re,Ve,We,1),le.emplace(fe++,ke,Re,Ve,We,2),le.emplace(fe++,ke,Re,Ve,We,3)}(!ro||ro.length<2*G)&&(ro=function(De){const Ne=2*De,ze=new r.a_;ze.resize(Ne),ze._trim();for(let ke=0;ke<Ne;ke++){const Re=6*ke;ze.uint16[Re+0]=4*ke+0,ze.uint16[Re+1]=4*ke+1,ze.uint16[Re+2]=4*ke+2,ze.uint16[Re+3]=4*ke+2,ze.uint16[Re+4]=4*ke+3,ze.uint16[Re+5]=4*ke+0}return ze}(G));const ce=I.createIndexBuffer(ro,!0),ve=I.createVertexBuffer(le,r.dJ.members,!0);for(const De of q){const Ne={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(Ae=F).getCameraToCenterDistance(De.projection),u_viewport_size:[Ae.width,Ae.height]};he.draw(m,L.TRIANGLES,mn.disabled,Yn.disabled,m.colorModeForRenderPass(),Jn.disabled,Ne,c.id,ve,ce,r.bd.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,F.zoom)}var Ae;ve.destroy(),ce.destroy()}const Nu=r.bz();function xc(m){const o=m._camera.getWorldToCamera(m.worldSize,1),c=r.az([],o,m.globeMatrix);r.bi(c,c);const g=[0,0,0],b=[0,1,0,0];return r.aA(b,b,c),g[0]=b[0],g[1]=b[1],g[2]=b[2],r.au(g,g),g}function bc({width:m,height:o,anchor:c,textOffset:g,textScale:b},w){const{horizontalAlign:C,verticalAlign:I}=r.bV(c),L=-(C-.5)*m,F=-(I-.5)*o,V=r.bU(c,g);return new r.P((L/b+V[0])*w,(F/b+V[1])*w)}function pf(m,o,c,g,b,w,C,I,L,F){const V=m.text.placedSymbolArray,q=m.text.dynamicLayoutVertexArray,G=m.icon.dynamicLayoutVertexArray,J={},he=m.getProjection(),le=lp(C,he,b),fe=b.elevation,ce=he.upVectorScale(C.canonical,b.center.lat,b.worldSize).metersToTile;q.clear();for(let ve=0;ve<V.length;ve++){const Ae=V.get(ve),{tileAnchorX:De,tileAnchorY:Ne,numGlyphs:ze}=Ae,ke=Ae.hidden||!Ae.crossTileID||m.allowVerticalPlacement&&!Ae.placedOrientation?null:g[Ae.crossTileID];if(ke){let Re=0,Ve=0,We=0;if(fe){const Mt=fe?fe.getAtTileOffset(C,De,Ne):0,[pt,Ot,Ct]=he.upVector(C.canonical,De,Ne);Re=Mt*pt*ce,Ve=Mt*Ot*ce,We=Mt*Ct*ce}let[ct,rt,Et,wt]=Aa(Ae.projectedAnchorX+Re,Ae.projectedAnchorY+Ve,Ae.projectedAnchorZ+We,c?le:w);const Vt=fc(b.getCameraToCenterDistance(he),wt);let nt=r.bJ(m.textSizeData,L,Ae)*Vt/r.bO;c&&(nt*=m.tilePixelRatio/I);const ft=bc(ke,nt);c?({x:ct,y:rt,z:Et}=he.projectTilePoint(De+ft.x,Ne+ft.y,C.canonical),[ct,rt,Et]=Aa(ct+Re,rt+Ve,Et+We,w)):(o&&ft._rotate(-b.angle),ct+=ft.x,rt+=ft.y,Et=0);const Qe=m.allowVerticalPlacement&&Ae.placedOrientation===r.bI.vertical?Math.PI/2:0;for(let Mt=0;Mt<ze;Mt++)r.bL(q,ct,rt,Et,Qe);F&&Ae.associatedIconIndex>=0&&(J[Ae.associatedIconIndex]={x:ct,y:rt,z:Et,angle:Qe})}else ir(ze,q)}if(F){G.clear();const ve=m.icon.placedSymbolArray;for(let Ae=0;Ae<ve.length;Ae++){const De=ve.get(Ae),{numGlyphs:Ne}=De,ze=J[Ae];if(De.hidden||!ze)ir(Ne,G);else{const{x:ke,y:Re,z:Ve,angle:We}=ze;for(let ct=0;ct<Ne;ct++)r.bL(G,ke,Re,Ve,We)}}m.icon.dynamicLayoutVertexBuffer.updateData(G)}m.text.dynamicLayoutVertexBuffer.updateData(q)}function ju(m,o,c,g,b,w,C={}){const I=c.paint.get("icon-translate"),L=c.paint.get("text-translate"),F=c.paint.get("icon-translate-anchor"),V=c.paint.get("text-translate-anchor"),q=c.layout.get("icon-rotation-alignment"),G=c.layout.get("text-rotation-alignment"),J=c.layout.get("icon-pitch-alignment"),he=c.layout.get("text-pitch-alignment"),le=c.layout.get("icon-keep-upright"),fe=c.layout.get("text-keep-upright"),ce=c.paint.get("icon-color-saturation"),ve=c.paint.get("icon-color-contrast"),Ae=c.paint.get("icon-color-brightness-min"),De=c.paint.get("icon-color-brightness-max"),Ne=c.layout.get("symbol-elevation-reference")==="sea",ze=m.context,ke=ze.gl,Re=m.transform,Ve=q==="map",We=G==="map",ct=J==="map",rt=he==="map",Et=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let wt=!1;const Vt=m.depthModeForSublayer(0,mn.ReadOnly),nt=new mn(m.context.gl.LEQUAL,mn.ReadOnly,m.depthRangeFor3D),ft=[r.ay(Re.center.lng),r.aH(Re.center.lat)],Qe=c.layout.get("text-variable-anchor"),Mt=Re.projection.name==="globe",pt=[],Ot=[0,-1,0];for(const Ct of g){const Lt=o.getTile(Ct),Nt=Lt.getBucket(c);if(!Nt||Nt.projection.name==="mercator"&&Mt||Nt.fullyClipped)continue;const pn=Nt.projection.name==="globe",_n=pn?r.ah(Re.zoom):0,dn=lp(Ct,Nt.getProjection(),Re),Sn=Re.calculatePixelsToTileUnitsMatrix(Lt),yn=Qe&&Nt.hasTextData(),Gn=Nt.hasIconTextFit()&&yn&&Nt.hasIconData(),ti=Nt.elevationType==="road"?nt:Vt,$n=Nt.getProjection().createInversionMatrix(Re,Ct.canonical),mi=m.shadowRenderer,Kn=Nt.elevationType==="road"&&!!mi&&mi.enabled;let Fn=[0,0,0];if(Kn){const jr=m.style.directionalLight,ei=m.style.ambientLight;jr&&ei&&(Fn=Vl(m.style,jr,ei))}const Ci=jr=>{Re.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||m.terrain)&&(jr.push("DEPTH_D24"),jr.push("DEPTH_OCCLUSION"))},lr=()=>{const jr=Ve&&c.layout.get("symbol-placement")!=="point",ei=[];Ci(ei);const Mr=jr||Gn,Fi=c.paint.get("icon-image-cross-fade");m.terrainRenderModeElevated()&&ct&&ei.push("PITCH_WITH_MAP_TERRAIN"),pn&&(ei.push("PROJECTION_GLOBE_VIEW"),Mr&&ei.push("PROJECTED_POS_ON_VIEWPORT")),Fi>0&&ei.push("ICON_TRANSITION"),Nt.icon.zOffsetVertexBuffer&&ei.push("Z_OFFSET"),ce===0&&ve===0&&Ae===0&&De===1||ei.push("COLOR_ADJUSTMENT"),Nt.sdfIcons&&ei.push("RENDER_SDF"),Kn&&ei.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const Zi=Nt.icon.programConfigurations.get(c.id),Yi=m.getOrCreateProgram("symbol",{config:Zi,defines:ei}),Ur=Lt.imageAtlasTexture?Lt.imageAtlasTexture.size:[0,0],Vo=Nt.iconSizeData,Rr=r.bH(Vo,Re.zoom),Ao=ct||Re.pitch!==0,br=hl(dn,Lt.tileID.canonical,ct,Ve,Re,Nt.getProjection(),Sn),Po=Dh(dn,Lt.tileID.canonical,ct,Ve,Re,Nt.getProjection(),Sn),ta=m.translatePosMatrix(Po,Lt,I,F,!0),Ba=m.translatePosMatrix(dn,Lt,I,F),na=Mr?Nu:br,Fa=Ve&&!ct&&!jr;let ic=Ot;!Mt&&!Re.mercatorFromTransition||Ve||(ic=xc(Re));const Na=pn?ic:Ot,tl=c.getColorAdjustmentMatrix(ce,ve,Ae,De),Cs=df(Vo.kind,Rr,Fa,ct,m,Ba,na,ta,Ne,!1,Ur,[0,0],!0,Ct,_n,ft,$n,Na,Nt.getProjection(),Fn,tl,Fi),ih=Lt.imageAtlasTexture?Lt.imageAtlasTexture:null,ia=c.layout.get("icon-size").constantOr(0)!==1||Nt.iconsNeedLinear,qp=Nt.sdfIcons||m.options.rotating||m.options.zooming||ia||Ao?ke.LINEAR:ke.NEAREST,Wp=Nt.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,Xp=m.terrain&&ct&&jr?r.bi(r.bz(),br):Nu;if(jr&&Nt.icon){const wr=Re.elevation,ru=wr?wr.getAtTileOffsetFunc(Ct,Re.center.lat,Re.worldSize,Nt.getProjection()):null,Zp=Ph(dn,Lt.tileID.canonical,ct,Ve,Re,Nt.getProjection(),Sn);Oh(Nt,dn,m,!1,Zp,Po,ct,le,ru,Ct)}return{program:Yi,buffers:Nt.icon,uniformValues:Cs,atlasTexture:ih,atlasTextureIcon:null,atlasInterpolation:qp,atlasInterpolationIcon:null,isSDF:Nt.sdfIcons,hasHalo:Wp,depthMode:ti,tile:Lt,renderWithShadows:Kn,labelPlaneMatrixInv:Xp}},ni=()=>{const jr=We&&c.layout.get("symbol-placement")!=="point",ei=[],Mr=jr||Qe||Gn;m.terrainRenderModeElevated()&&rt&&ei.push("PITCH_WITH_MAP_TERRAIN"),pn&&(ei.push("PROJECTION_GLOBE_VIEW"),Mr&&ei.push("PROJECTED_POS_ON_VIEWPORT")),Nt.text.zOffsetVertexBuffer&&ei.push("Z_OFFSET"),Nt.iconsInText&&ei.push("RENDER_TEXT_AND_SYMBOL"),ei.push("RENDER_SDF"),Kn&&ei.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Ci(ei);const Fi=Nt.text.programConfigurations.get(c.id),Zi=m.getOrCreateProgram("symbol",{config:Fi,defines:ei});let Yi,Ur=[0,0],Vo=null;const Rr=Nt.textSizeData;Nt.iconsInText&&(Ur=Lt.imageAtlasTexture?Lt.imageAtlasTexture.size:[0,0],Vo=Lt.imageAtlasTexture?Lt.imageAtlasTexture:null,Yi=rt||Re.pitch!==0||m.options.rotating||m.options.zooming||Rr.kind==="composite"||Rr.kind==="camera"?ke.LINEAR:ke.NEAREST);const Ao=Lt.glyphAtlasTexture?Lt.glyphAtlasTexture.size:[0,0],br=c.layout.get("text-size-scale-range"),Po=r.aD(m.scaleFactor,br[0],br[1]),ta=r.bH(Rr,Re.zoom,Po),Ba=hl(dn,Lt.tileID.canonical,rt,We,Re,Nt.getProjection(),Sn),na=Dh(dn,Lt.tileID.canonical,rt,We,Re,Nt.getProjection(),Sn),Fa=m.translatePosMatrix(na,Lt,L,V,!0),ic=m.translatePosMatrix(dn,Lt,L,V),Na=Mr?Nu:Ba,tl=We&&!rt&&!jr;let Cs=Ot;!Mt&&!Re.mercatorFromTransition||We||(Cs=xc(Re));const ih=df(Rr.kind,ta,tl,rt,m,ic,Na,Fa,Ne,!0,Ao,Ur,!0,Ct,_n,ft,$n,pn?Cs:Ot,Nt.getProjection(),Fn,null,null,Po),ia=Lt.glyphAtlasTexture?Lt.glyphAtlasTexture:null,qp=ke.LINEAR,Wp=c.paint.get("text-halo-width").constantOr(1)!==0,Xp=m.terrain&&rt&&jr?r.bi(r.bz(),Ba):Nu;if(jr&&Nt.text){const wr=Re.elevation,ru=wr?wr.getAtTileOffsetFunc(Ct,Re.center.lat,Re.worldSize,Nt.getProjection()):null,Zp=Ph(dn,Lt.tileID.canonical,rt,We,Re,Nt.getProjection(),Sn);Oh(Nt,dn,m,!0,Zp,na,rt,fe,ru,Ct)}return{program:Zi,buffers:Nt.text,uniformValues:ih,atlasTexture:ia,atlasTextureIcon:Vo,atlasInterpolation:qp,atlasInterpolationIcon:Yi,isSDF:!0,hasHalo:Wp,depthMode:ti,tile:Lt,renderWithShadows:Kn,labelPlaneMatrixInv:Xp}},Ai=Nt.icon.segments.get().length,Hi=Nt.text.segments.get().length,Wi=Ai&&!C.onlyText?lr():null,cr=Hi&&!C.onlyIcons?ni():null,Nr=c.paint.get("icon-opacity").constantOr(1),fo=c.paint.get("text-opacity").constantOr(1);if(Et&&Nt.canOverlap){wt=!0;const jr=Nr&&!C.onlyText?Nt.icon.segments.get():[],ei=fo&&!C.onlyIcons?Nt.text.segments.get():[];for(const Mr of jr)pt.push({segments:new r.bd([Mr]),sortKey:Mr.sortKey,state:Wi});for(const Mr of ei)pt.push({segments:new r.bd([Mr]),sortKey:Mr.sortKey,state:cr})}else C.onlyText||pt.push({segments:Nr?Nt.icon.segments:new r.bd([]),sortKey:0,state:Wi}),C.onlyIcons||pt.push({segments:fo?Nt.text.segments:new r.bd([]),sortKey:0,state:cr})}wt&&pt.sort((Ct,Lt)=>Ct.sortKey-Lt.sortKey);for(const Ct of pt){const Lt=Ct.state;if(Lt)if(m.terrain?m.terrain.setupElevationDraw(Lt.tile,Lt.program,{useDepthForOcclusion:Re.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Lt.labelPlaneMatrixInv}):m.setupDepthForOcclusion(Re.depthOcclusionForSymbolsAndCircles,Lt.program),ze.activeTexture.set(ke.TEXTURE0),Lt.atlasTexture&&Lt.atlasTexture.bind(Lt.atlasInterpolation,ke.CLAMP_TO_EDGE,!0),Lt.atlasTextureIcon&&(ze.activeTexture.set(ke.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,ke.CLAMP_TO_EDGE,!0)),Lt.renderWithShadows&&m.shadowRenderer.setupShadows(Lt.tile.tileID.toUnwrapped(),Lt.program,"vector-tile",Lt.tile.tileID.overscaledZ),m.uploadCommonLightUniforms(m.context,Lt.program),Lt.hasHalo){const Nt=Lt.uniformValues;Nt.u_is_halo=1,Uu(Lt.buffers,Ct.segments,c,m,Lt.program,Lt.depthMode,b,w,Nt,2),Nt.u_is_halo=0}else{if(Lt.isSDF){const Nt=Lt.uniformValues;Lt.hasHalo&&(Nt.u_is_halo=1,Uu(Lt.buffers,Ct.segments,c,m,Lt.program,Lt.depthMode,b,w,Nt,1)),Nt.u_is_halo=0}Uu(Lt.buffers,Ct.segments,c,m,Lt.program,Lt.depthMode,b,w,Lt.uniformValues,1)}}}function Uu(m,o,c,g,b,w,C,I,L,F){const V=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.iconTransitioningVertexBuffer,m.globeExtVertexBuffer,m.zOffsetVertexBuffer];b.draw(g,g.context.gl.TRIANGLES,w,C,I,Jn.disabled,L,c.id,m.layoutVertexBuffer,m.indexBuffer,o,c.paint,g.transform.zoom,m.programConfigurations.get(c.id),V,F)}function mf(m,o){const c=1<<m.canonical.z,g=(o.x*c-m.canonical.x-m.wrap*c)*r.aj,b=(o.y*c-m.canonical.y)*r.aj,w=r.dS(o.z,o.y);return r.cS(g,b,w)}function Fo(m,o,c,g,b){if(!c.layout||c.layout.get("fill-elevation-reference")==="none")return;const w=m.context.gl,C=new mn(m.context.gl.LEQUAL,mn.ReadWrite,m.depthRangeFor3D),I=new mn(m.context.gl.GREATER,mn.ReadWrite,m.depthRangeFor3D),L=function(J){const he=r.cJ(J.pitch);let le=.01;return J.isOrthographic&&(le=r.ai(1e-4,le,r.cO(he>=jc?1:he/jc))),2*le}(m.transform),F=m.transform.getFreeCameraOptions().position,V="elevatedStructuresDepthReconstruct",q=m.getOrCreateProgram(V,{defines:["DEPTH_RECONSTRUCTION"]}),G=m.getOrCreateProgram(V);for(const J of g){const he=o.getTile(J),le=he.getBucket(c);if(!le)continue;const fe=le.elevatedStructures;if(!fe)continue;const ce=le.elevationBufferData.heightRange,ve=mf(J.toUnwrapped(),F),Ae=m.translatePosMatrix(J.projMatrix,he,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));let De,Ne,ze,ke;if(b==="initialize"){if(!ce||ce.min>=1||fe.depthSegments.segments[0].primitiveLength===0)continue;De=ed(Ae,ve,L,1,0),Ne=C,ze=fe.depthSegments,ke=q}else if(b==="reset"){if(!ce||ce.min>=0||fe.maskSegments.segments[0].primitiveLength===0)continue;De=ed(Ae,ve,0,0,1),Ne=I,ze=fe.maskSegments,ke=q}else if(b==="geometry"){if(fe.depthSegments.segments[0].primitiveLength===0)continue;De=ed(Ae,ve,L,1,0),Ne=C,ze=fe.depthSegments,ke=G}ke.draw(m,w.TRIANGLES,Ne,Yn.disabled,vi.disabled,Jn.disabled,De,c.id,fe.vertexBuffer,fe.indexBuffer,ze,c.paint,m.transform.zoom)}}function hn(m,o,c){const{painter:g,sourceCache:b,layer:w,coords:C,colorMode:I,elevationType:L,terrainEnabled:F,pass:V}=m,q=g.context.gl,G=w.paint.get("fill-pattern"),J=w.paint.get("fill-pattern-cross-fade"),he=G.constantOr(null);let le=L;L!=="road"||o&&!F||(le="none");const fe=le==="road",ce=m.painter.shadowRenderer,ve=fe&&!!ce&&ce.enabled,Ae=new mn(g.context.gl.LEQUAL,mn.ReadOnly,g.depthRangeFor3D);let De=[0,0,0];if(ve){const ke=g.style.directionalLight,Re=g.style.ambientLight;ke&&Re&&(De=Vl(g.style,ke,Re))}const Ne=G&&G.constantOr(1),ze=(ke,Re)=>{let Ve,We,ct,rt,Et;Re?(Ve=Ne&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ct=q.LINES):(Ve=Ne?"fillPattern":"fill",ct=q.TRIANGLES);for(const wt of C){const Vt=b.getTile(wt);if(Ne&&!Vt.patternsLoaded())continue;const nt=Vt.getBucket(w);if(!nt)continue;const ft=o?nt.elevationBufferData:nt.bufferData;if(ft.isEmpty())continue;g.prepareDrawTile();const Qe=ft.programConfigurations.get(w.id),Mt=g.isTileAffectedByFog(wt),pt=[],Ot=[];fe&&(pt.push("ELEVATED_ROADS"),Ot.push(ft.elevatedLayoutVertexBuffer)),ve&&pt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Ne&&(g.context.activeTexture.set(q.TEXTURE0),Vt.imageAtlasTexture&&Vt.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Qe.updatePaintBuffers());let Ct=!1;if(he&&Vt.imageAtlas){const dn=Vt.imageAtlas,Sn=r.dN.from(he),yn=Sn.getPrimary().scaleSelf(r.q.devicePixelRatio).toString(),Gn=Sn.getSecondary(),ti=dn.patternPositions.get(yn),$n=Gn?dn.patternPositions.get(Gn.scaleSelf(r.q.devicePixelRatio).toString()):null;Ct=!!ti&&!!$n,ti&&Qe.setConstantPatternPositions(ti,$n)}J>0&&(Ct||Qe.getPatternTransitionVertexBuffer("fill-pattern"))&&pt.push("FILL_PATTERN_TRANSITION");const Lt=g.getOrCreateProgram(Ve,{config:Qe,overrideFog:Mt,defines:pt}),Nt=g.translatePosMatrix(wt.projMatrix,Vt,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));ve&&ce.setupShadows(Vt.tileID.toUnwrapped(),Lt,"vector-tile",Vt.tileID.overscaledZ);const pn=w.paint.get("fill-emissive-strength");if(Re){rt=ft.lineIndexBuffer,Et=ft.lineSegments;const dn=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[q.drawingBufferWidth,q.drawingBufferHeight];We=Ve==="fillOutlinePattern"&&Ne?wv(Nt,pn,g,Vt,dn,De,J):Cp(Nt,pn,dn,De)}else rt=ft.indexBuffer,Et=ft.triangleSegments,We=Ne?xy(Nt,pn,g,Vt,De,J):Ep(Nt,pn,De);g.uploadCommonUniforms(g.context,Lt,wt.toUnwrapped());let _n=ke;(L==="road"&&!F||L==="offset")&&(_n=Ae),Lt.draw(g,ct,_n,c||g.stencilModeForClipping(wt),I,Jn.disabled,We,w.id,ft.layoutVertexBuffer,rt,Et,w.paint,g.transform.zoom,Qe,Ot)}};g.renderPass===V&&ze(g.depthModeForSublayer(1,g.renderPass==="opaque"?mn.ReadWrite:mn.ReadOnly),!1),le==="none"&&g.renderPass==="translucent"&&w.paint.get("fill-antialias")&&ze(g.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,mn.ReadOnly),!0)}function nd(m,o,c,g,b,w,C,I){c.resetLayerRenderingStats(m);const L=m.context,F=L.gl,V=m.transform,q=c.paint.get("fill-extrusion-pattern"),G=c.paint.get("fill-extrusion-pattern-cross-fade"),J=q.constantOr(null),he=q.constantOr(1),le=c.paint.get("fill-extrusion-opacity"),fe=m.style.enable3dLights(),ce=c.paint.get(fe&&!he?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ve=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ce],Ae=c.layout.get("fill-extrusion-edge-radius"),De=Ae>0&&!c.paint.get("fill-extrusion-rounded-roof"),Ne=De?0:Ae,ze=V.projection.name==="globe"?r.dT():0,ke=V.projection.name==="globe",Re=ke?r.ah(V.zoom):0,Ve=[r.ay(V.center.lng),r.aH(V.center.lat)],We=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",ct=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(We?null:c.lut).toArray01().slice(0,3),rt=c.paint.get("fill-extrusion-flood-light-intensity"),Et=c.paint.get("fill-extrusion-vertical-scale"),wt=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Vt=c.paint.get("fill-extrusion-height-alignment"),nt=c.paint.get("fill-extrusion-base-alignment"),ft=Uh(m,c.paint.get("fill-extrusion-cutoff-fade-range")),Qe=[];let Mt;ke&&Qe.push("PROJECTION_GLOBE_VIEW"),ve[0]>0&&Qe.push("FAUX_AO"),De&&Qe.push("ZERO_ROOF_RADIUS"),I&&Qe.push("HAS_CENTROID"),rt>0&&Qe.push("FLOOD_LIGHT"),ft.shouldRenderCutoff&&Qe.push("RENDER_CUTOFF"),wt&&Qe.push("RENDER_WALL_MODE");const pt=m.renderPass==="shadow",Ot=m.shadowRenderer,Ct=pt&&!!Ot,Lt=pt?Jn.disabled:Jn.backCCW;m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!0);let Nt=[0,0,0];if(Ot){const dn=m.style.directionalLight,Sn=m.style.ambientLight;dn&&Sn&&(Nt=Vl(m.style,dn,Sn)),pt||(Qe.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Ot.useNormalOffset&&Qe.push("NORMAL_OFFSET")),Mt=Qe.concat(["SHADOWS_SINGLE_CASCADE"])}const pn=Ct?"fillExtrusionDepth":he?"fillExtrusionPattern":"fillExtrusion",_n=c.getLayerRenderingStats();for(const dn of g){const Sn=o.getTile(dn),yn=Sn.getBucket(c);if(!yn||yn.projection.name!==V.projection.name)continue;let Gn=!1;Ot&&(Gn=Ot.getMaxCascadeForTile(dn.toUnwrapped())===0);const ti=m.isTileAffectedByFog(dn),$n=yn.programConfigurations.get(c.id);let mi=!1;if(J&&Sn.imageAtlas){const Hi=Sn.imageAtlas,Wi=r.dN.from(J),cr=Wi.getPrimary().scaleSelf(r.q.devicePixelRatio).toString(),Nr=Wi.getSecondary(),fo=Hi.patternPositions.get(cr),jr=Nr?Hi.patternPositions.get(Nr.scaleSelf(r.q.devicePixelRatio).toString()):null;mi=!!fo&&!!jr,fo&&$n.setConstantPatternPositions(fo,jr)}G>0&&(mi||$n.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&Qe.push("FILL_EXTRUSION_PATTERN_TRANSITION");const Kn=m.getOrCreateProgram(pn,{config:$n,defines:Gn?Mt:Qe,overrideFog:ti});if(m.terrain&&m.terrain.setupElevationDraw(Sn,Kn,{useMeterToDem:!0}),!yn.centroidVertexBuffer){const Hi=Kn.attributes.a_centroid_pos;Hi!==void 0&&F.vertexAttrib2f(Hi,0,0)}!pt&&Ot&&Ot.setupShadows(Sn.tileID.toUnwrapped(),Kn,"vector-tile",Sn.tileID.overscaledZ),he&&(m.context.activeTexture.set(F.TEXTURE0),Sn.imageAtlasTexture&&Sn.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),$n.updatePaintBuffers());const Fn=c.paint.get("fill-extrusion-vertical-gradient"),Ci=1/yn.tileToMeter;let lr;if(pt&&Ot){if(Ty(Sn.tileID,yn,m))continue;const Hi=Ot.calculateShadowPassMatrixFromTile(Sn.tileID.toUnwrapped());lr=Qh(Hi,Ne,Ci,Et,Vt,nt)}else{const Hi=m.translatePosMatrix(dn.expandedProjMatrix,Sn,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Wi=V.projection.createInversionMatrix(V,dn.canonical);lr=he?vy(Hi,m,Fn,le,ve,Ne,Ci,dn,Sn,ze,Vt,nt,Re,Ve,Wi,ct,Et,G):zu(Hi,m,Fn,le,ve,Ne,Ci,dn,ze,Vt,nt,Re,Ve,Wi,ct,Et,rt,Nt)}m.uploadCommonUniforms(L,Kn,dn.toUnwrapped(),null,ft);let ni=yn.segments;if(V.projection.name==="mercator"&&!pt&&(ni=yn.getVisibleSegments(Sn.tileID,m.terrain,m.transform.getFrustum(0)),!ni.get().length))continue;if(_n)if(pt)for(const Hi of ni.get())_n.numRenderedVerticesInShadowPass+=Hi.primitiveLength;else for(const Hi of ni.get())_n.numRenderedVerticesInTransparentPass+=Hi.primitiveLength;const Ai=[];(m.terrain||I)&&Ai.push(yn.centroidVertexBuffer),ke&&Ai.push(yn.layoutVertexExtBuffer),wt&&Ai.push(yn.wallVertexBuffer),Kn.draw(m,L.gl.TRIANGLES,b,w,C,Lt,lr,c.id,yn.layoutVertexBuffer,yn.indexBuffer,ni,c.paint,m.transform.zoom,$n,Ai)}m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!1)}function Vu(m,o,c,g,b,w,C,I,L,F,V,q,G,J,he,le,fe,ce,ve){const Ae=m.context,De=Ae.gl,Ne=m.transform,ze=m.transform.zoom,ke=[],Re=Uh(m,c.paint.get("fill-extrusion-cutoff-fade-range"));F==="clear"?(ke.push("CLEAR_SUBPASS"),ve&&(ke.push("CLEAR_FROM_TEXTURE"),Ae.activeTexture.set(De.TEXTURE0),ve.bind(De.LINEAR,De.CLAMP_TO_EDGE))):F==="sdf"&&ke.push("SDF_SUBPASS"),fe&&ke.push("HAS_CENTROID"),Re.shouldRenderCutoff&&ke.push("RENDER_CUTOFF");const Ve=c.layout.get("fill-extrusion-edge-radius"),We=(ct,rt,Et,wt,Vt)=>{const nt=rt.programConfigurations.get(c.id),ft=m.isTileAffectedByFog(ct),Qe=m.getOrCreateProgram("fillExtrusionGroundEffect",{config:nt,defines:ke,overrideFog:ft}),Mt=((Ot,Ct,Lt,Nt,pn,_n,dn,Sn,yn,Gn,ti)=>({u_matrix:Ct,u_opacity:Lt,u_ao_pass:Nt?1:0,u_meter_to_tile:pn,u_ao:_n,u_flood_light_intensity:dn,u_flood_light_color:Sn,u_attenuation:yn,u_edge_radius:Gn,u_fb:0,u_fb_size:ti,u_dynamic_offset:1}))(0,wt,V,L,Vt,[q,G*Vt],J,he,le,ze>=17?0:Ve*Vt,ve?ve.size[0]:0),pt=[];fe&&pt.push(rt.hiddenByLandmarkVertexBuffer),m.uploadCommonUniforms(Ae,Qe,ct.toUnwrapped(),null,Re),Qe.draw(m,Ae.gl.TRIANGLES,b,w,C,I,Mt,c.id,rt.vertexBuffer,rt.indexBuffer,Et,c.paint,ze,nt,pt)};for(const ct of g){const rt=o.getTile(ct),Et=rt.getBucket(c);if(!Et||Et.projection.name!==Ne.projection.name||!Et.groundEffect||Et.groundEffect&&!Et.groundEffect.hasData())continue;const wt=Et.groundEffect,Vt=1/Et.tileToMeter;{const nt=m.translatePosMatrix(ct.projMatrix,rt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ft=wt.getDefaultSegment();We(ct,wt,ft,nt,Vt)}if(ce)for(let nt=0;nt<4;nt++){const ft=r.dU[nt](ct),Qe=o.getTile(ft);if(!Qe)continue;const Mt=Qe.getBucket(c);if(!Mt||Mt.projection.name!==Ne.projection.name||!Mt.groundEffect||Mt.groundEffect&&!Mt.groundEffect.hasData())continue;const pt=Mt.groundEffect;let Ot,Ct;nt===0?(Ot=[-r.aj,0,0],Ct=1):nt===1?(Ot=[r.aj,0,0],Ct=0):nt===2?(Ot=[0,-r.aj,0],Ct=3):(Ot=[0,r.aj,0],Ct=2);const Lt=pt.regionSegments[Ct];if(!Lt)continue;const Nt=new Float32Array(16);r.bo(Nt,ct.projMatrix,Ot),We(ct,pt,Lt,m.translatePosMatrix(Nt,rt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Vt)}}}function Yc(m,o,c,g,b,w,C){g.centroidVertexArray.length===0&&g.createCentroidsBuffer();const I=w?w.findDEMTileFor(c):null;if(!(I&&I.dem||C))return;w&&I&&I.dem&&g.selfDEMTileTimestamp!==I.dem._timestamp&&(g.borderDoneWithNeighborZ=[-1,-1,-1,-1],g.selfDEMTileTimestamp=I.dem._timestamp);const L=ce=>new r.P(Math.ceil((ce+r.dX)*r.dY),0),F=ce=>{const ve=o.getSource().minzoom,Ae=Ne=>{const ze=o.getTileByID(Ne);if(ze&&ze.hasData())return ze.getBucket(b)},De=[0,-1,1];for(const Ne of De){if(ce.overscaledZ+Ne<ve)continue;const ze=Ae(ce.calculateScaledKey(ce.overscaledZ+Ne));if(ze)return ze}},V=[0,0,0],q=(ce,ve)=>(V[0]=Math.min(ce.min.y,ve.min.y),V[1]=Math.max(ce.max.y,ve.max.y),V[2]=r.aj-ve.min.x>ce.max.x?ve.min.x-r.aj:ce.max.x,V),G=(ce,ve)=>(V[0]=Math.min(ce.min.x,ve.min.x),V[1]=Math.max(ce.max.x,ve.max.x),V[2]=r.aj-ve.min.y>ce.max.y?ve.min.y-r.aj:ce.max.y,V),J=[(ce,ve)=>q(ce,ve),(ce,ve)=>q(ve,ce),(ce,ve)=>G(ce,ve),(ce,ve)=>G(ve,ce)],he=(ce,ve,Ae,De,Ne,ze,ke)=>{if(!w)return 0;const Re=[[ze?Ae:ce,ze?ce:Ae,0],[ze?Ae:ve,ze?ve:Ae,0]],Ve=ke<0?r.aj+ke:ke,We=[ze?Ve:(ce+ve)/2,ze?(ce+ve)/2:Ve,0];return Ae===0&&ke<0||Ae!==0&&ke>0?w.getForTilePoints(Ne,[We],!0,De):Re.push(We),w.getForTilePoints(c,Re,!0,I),Math.max(Re[0][2],Re[1][2],We[2])/w.exaggeration()};for(let ce=0;ce<4;ce++){const ve=g.borderFeatureIndices[ce];if(ve.length===0)continue;const Ae=r.dU[ce](c),De=F(Ae);if(!(De&&De instanceof r.dV))continue;const Ne=w?w.findDEMTileFor(Ae):null;if(!(Ne&&Ne.dem||C)||(w&&Ne&&Ne.dem&&g.borderDEMTileTimestamp[ce]!==Ne.dem._timestamp&&(g.borderDoneWithNeighborZ[ce]=-1,g.borderDEMTileTimestamp[ce]=Ne.dem._timestamp),g.borderDoneWithNeighborZ[ce]===De.canonical.z))continue;De.centroidVertexArray.length===0&&De.createCentroidsBuffer();const ze=(ce<2?1:5)-ce,ke=De.borderDoneWithNeighborZ[ze]!==g.canonical.z,Re=De.borderFeatureIndices[ze];let Ve=0;if(g.canonical.z!==De.canonical.z){for(const We of ve)g.showCentroid(g.featuresOnBorder[We]);if(ke)for(const We of Re)De.showCentroid(De.featuresOnBorder[We]);g.borderDoneWithNeighborZ[ce]=De.canonical.z,De.borderDoneWithNeighborZ[ze]=g.canonical.z}for(const We of ve){const ct=g.featuresOnBorder[We],rt=g.centroidData[ct.centroidDataIndex],Et=ct.borders[ce];let wt;for(;Ve<Re.length;){wt=De.featuresOnBorder[Re[Ve]];const Vt=wt.borders[ze];if(Vt[1]>Et[0]+3||Vt[0]>Et[0]-3)break;De.showCentroid(wt),Ve++}if(wt&&Ve<Re.length){const Vt=Ve;let nt=0;for(;!(wt.borders[ze][0]>Et[1]-3)&&(nt++,++Ve!==Re.length);)wt=De.featuresOnBorder[Re[Ve]];wt=De.featuresOnBorder[Re[Vt]];let ft=!1;if(nt>=1){const pt=wt.borders[ze];Math.abs(Et[0]-pt[0])<3&&Math.abs(Et[1]-pt[1])<3&&(nt=1,ft=!0,Ve=Vt+1)}else if(nt===0){g.showCentroid(ct);continue}const Qe=De.centroidData[wt.centroidDataIndex];C&&ft&&(((le=rt).flags|(fe=Qe).flags)&r.dW?(le.flags|=r.dW,fe.flags|=r.dW):(le.flags&=~r.dW,fe.flags&=~r.dW));const Mt=ct.intersectsCount()>1||wt.intersectsCount()>1;if(nt>1)Ve=Vt,rt.centroidXY=Qe.centroidXY=new r.P(0,0);else if(Ne&&Ne.dem&&!Mt){const pt=J[ce](rt,Qe),Ot=ce%2?r.aj-1:0,Ct=he(pt[0],Math.min(r.aj-1,pt[1]),Ot,Ne,Ae,ce<2,pt[2]);rt.centroidXY=Qe.centroidXY=L(Ct)}else Mt?rt.centroidXY=Qe.centroidXY=new r.P(0,0):(rt.centroidXY=g.encodeBorderCentroid(ct),Qe.centroidXY=De.encodeBorderCentroid(wt));g.writeCentroidToBuffer(rt),De.writeCentroidToBuffer(Qe)}else g.showCentroid(ct)}g.borderDoneWithNeighborZ[ce]=De.canonical.z,De.borderDoneWithNeighborZ[ze]=g.canonical.z}var le,fe;(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(m)}const $u=[1,0,0],Un=[0,1,0],Pp=[0,0,1];function Ty(m,o,c){const g=c.transform,b=c.shadowRenderer;if(!b)return!0;const w=m.toUnwrapped(),C=g.tileSize*b._cascades[c.currentShadowCascade].scale;let I=o.maxHeight;if(g.elevation){const le=g.elevation.getMinMaxForTile(m);le&&(I+=le.max)}const L=[...b.shadowDirection];L[2]=-L[2];const F=b.computeSimplifiedTileShadowVolume(w,I,C,L);if(!F)return!1;const V=[$u,Un,Pp,L,[L[0],0,L[2]],[0,L[1],L[2]]],q=g.projection.name==="globe",G=g.scaleZoom(C),J=r.cn.fromInvProjectionMatrix(g.invProjMatrix,g.worldSize,G,!q),he=b.getCurrentCascadeFrustum();return J.intersectsPrecise(F.vertices,F.planes,V)===0||he.intersectsPrecise(F.vertices,F.planes,V)===0}function ya(m){return[m[0]*r.dZ,m[1]*r.dZ,m[2]*r.dZ,0]}function Uo(m,o,c,g,b,w,C,I,L){const F=g.getSource(),V=c.globeSharedBuffers;if(!V)return;let q,G,J;if(o&&(q=g.getTile(o)),F instanceof r.aP?(G=F.texture,J=r.ds(0,0,c.transform)):q&&o&&(G=q.texture,J=r.ds(o.canonical.z,o.canonical.x,c.transform)),!G||!J)return;m||(J=r.cE(r.bz(),J,[1,-1,1]));const he=c.context,le=he.gl,fe=b.paint.get("raster-resampling")==="nearest"?le.NEAREST:le.LINEAR,ce=c.colorModeForDrapableLayerRenderPass(w),ve=C.defines;ve.push("GLOBE_POLES");const Ae=new mn(le.LEQUAL,mn.ReadWrite,c.depthRangeFor3D),De=Float32Array.from(c.transform.expandedFarZProjMatrix),Ne=Float32Array.from(r.bh(r.dr(new r.cp(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),he.activeTexture.set(le.TEXTURE0),G.bind(fe,le.CLAMP_TO_EDGE),he.activeTexture.set(le.TEXTURE1),G.bind(fe,le.CLAMP_TO_EDGE),"useMipmap"in G&&he.extTextureFilterAnisotropic&&c.transform.pitch>20&&le.texParameterf(le.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax);const[ze,ke,Re,Ve]=o?V.getPoleBuffers(o.canonical.z,!1):V.getPoleBuffers(0,!0),We=b.paint.get("raster-elevation");let ct;m?(ct=ze,c.renderDefaultNorthPole=We!==0):(ct=ke,c.renderDefaultSouthPole=We!==0);const rt=ya(C.mix),Et=((Vt,nt,ft,Qe,Mt,pt,Ot,Ct,Lt,Nt,pn,_n,dn)=>ma(Vt,nt,ft,new Float32Array(16),new Float32Array(9),[0,0],Qe,[0,0],[0,0,0,0],1,{opacity:1,mix:0},pt,[0,0],Ct,2,Nt,pn,_n,1,0,dn))(De,Ne,J,r.ah(c.transform.zoom),0,b,0,We,0,rt,C.offset,C.range,w),wt=c.getOrCreateProgram("raster",{defines:ve});c.uploadCommonUniforms(he,wt,null),wt.draw(c,le.TRIANGLES,Ae,L,ce,I,Et,b.id,ct,Re,Ve)}function Km(m){const o=m._nearZ,c=m.projection.farthestPixelDistance(m),g=c-o,b=.2*m.height,w=o+b;return[o,c,(w-b-o)/g,(w-o)/g]}function Dp(m,o,c,g){if(m)return o instanceof ls&&m instanceof np?o.getTextureDescriptor(m,c,!0):{texture:m.texture,mix:ya(g.mix),offset:g.offset,buffer:0,tileSize:1}}var Op=r.d_([{name:"a_index",type:"Int16",components:1}]);class Ey{constructor(o,c,g,b){const w={width:g[0],height:g[1],data:null},C=o.gl;this.targetColorTexture=new r.T(o,w,C.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new r.T(o,w,C.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(c,b),this.lastInvalidatedAt=0}updateParticleTexture(o,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const g=this.context.gl,b=c.width*c.height;this.particleTexture0=new r.T(this.context,c,g.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new r.T(this.context,c,g.RGBA8,{premultiply:!1,useMipmap:!1});const w=new r.d$;w.reserve(b);for(let C=0;C<b;C++)w.emplaceBack(C);this.particleIndexBuffer=this.context.createVertexBuffer(w,Op.members,!0),this.particleSegment=r.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=r.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Kc(m,o,c){if(!m)return null;const g=o.getTextureDescriptor(m,c,!0);if(!g)return null;let{texture:b,mix:w,offset:C,tileSize:I,buffer:L,format:F}=g;if(!b||!F)return null;let V=!1;return F==="uint32"&&(V=!0,w[3]=0,w=Xm(r.e0,w,[0,c.paint.get("raster-particle-max-speed")]),C=Ap(r.e0,C,[0,c.paint.get("raster-particle-max-speed")])),{texture:b,textureOffset:[L/(I+2*L),I/(I+2*L)],tileSize:I,scalarData:V,scale:w,offset:C,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[F]]}}function gf(m){const o=m._nearZ,c=m.projection.farthestPixelDistance(m),g=c-o,b=.2*m.height,w=o+b;return[o,c,(w-b-o)/g,(w-o)/g]}const Lp=new r.am(1,0,0,1),kp=new r.am(0,1,0,1),Jm=new r.am(0,0,1,1),_a=new r.am(1,0,1,1),Jc=new r.am(0,1,1,1);function Hu(m,o,c,g,b,w,C){const I=m.context,L=m.transform,F=I.gl,V=L.projection.name==="globe",q=V?["PROJECTION_GLOBE_VIEW"]:[];let G=r.bw(c.projMatrix);if(V&&r.ah(L.zoom)>0){const rt=r.bg(c.canonical,L),Et=r.e1(rt);G=r.az(new Float32Array(16),L.globeMatrix,Et),r.az(G,L.projMatrix,G)}const J=r.bz();J[12]+=2*b/(r.q.devicePixelRatio*L.width),J[13]+=2*w/(r.q.devicePixelRatio*L.height),r.az(G,J,G);const he=m.getOrCreateProgram("debug",{defines:q}),le=o.getTileByID(c.key);m.terrain&&m.terrain.setupElevationDraw(le,he);const fe=mn.disabled,ce=Yn.disabled,ve=m.colorModeForRenderPass(),Ae="$debug";I.activeTexture.set(F.TEXTURE0),m.emptyTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),V?le._makeGlobeTileDebugBuffers(m.context,L):le._makeDebugTileBoundsBuffers(m.context,L.projection);const De=le._tileDebugBuffer||m.debugBuffer,Ne=le._tileDebugIndexBuffer||m.debugIndexBuffer,ze=le._tileDebugSegments||m.debugSegments;if(he.draw(m,F.LINE_STRIP,fe,ce,ve,Jn.disabled,yc(G,g),Ae,De,Ne,ze,null,null,null,[le._globeTileDebugBorderBuffer]),C){const rt=le.latestRawTileData,Et=Math.floor((rt&&rt.byteLength||0)/1024);let wt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(wt+=` => ${c.overscaledZ}`),wt+=` ${le.state}`,wt+=` ${Et}kb`,function(Vt,nt){Vt.initDebugOverlayCanvas();const ft=Vt.debugOverlayCanvas,Qe=Vt.context.gl,Mt=Vt.debugOverlayCanvas.getContext("2d");Mt.clearRect(0,0,ft.width,ft.height),Mt.shadowColor="white",Mt.shadowBlur=2,Mt.lineWidth=1.5,Mt.strokeStyle="white",Mt.textBaseline="top",Mt.font="bold 36px Open Sans, sans-serif",Mt.fillText(nt,5,5),Mt.strokeText(nt,5,5),Vt.debugOverlayTexture.update(ft),Vt.debugOverlayTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE)}(m,wt)}const ke=o.getTile(c).tileSize,Re=512/Math.min(ke,512)*(c.overscaledZ/L.zoom)*.5,Ve=le._tileDebugTextBuffer||m.debugBuffer,We=le._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,ct=le._tileDebugTextSegments||m.debugSegments;he.draw(m,F.TRIANGLES,fe,ce,vi.alphaBlended,Jn.disabled,yc(G,r.am.transparent,Re),Ae,Ve,We,ct,null,null,null,[le._globeTileDebugTextBuffer])}function zp(m,o,c,g){Gu(m,0,o+c/2,m.transform.width,c,g)}function Bp(m,o,c,g){Gu(m,o-c/2,0,c,m.transform.height,g)}function Gu(m,o,c,g,b,w){const C=m.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(o*r.q.devicePixelRatio,c*r.q.devicePixelRatio,g*r.q.devicePixelRatio,b*r.q.devicePixelRatio),C.clear({color:w}),I.disable(I.SCISSOR_TEST)}const Cy=r.d_([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:vl}=Cy;function xr(m,o,c,g){m.emplaceBack(o,c,g)}class yf{constructor(o){this.vertexArray=new r.e2,this.indices=new r.a_,xr(this.vertexArray,-1,-1,1),xr(this.vertexArray,1,-1,1),xr(this.vertexArray,-1,1,1),xr(this.vertexArray,1,1,1),xr(this.vertexArray,-1,-1,-1),xr(this.vertexArray,1,-1,-1),xr(this.vertexArray,-1,1,-1),xr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,vl),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=r.bd.simpleSegment(0,0,36,12)}}function Qc(m,o,c,g,b,w){const C=m.context.gl,I=o.paint.get("sky-atmosphere-color"),L=o.paint.get("sky-atmosphere-halo-color"),F=o.paint.get("sky-atmosphere-sun-intensity"),V=((q,G,J,he,le)=>({u_matrix_3f:q,u_sun_direction:G,u_sun_intensity:J,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[le.r,le.g,le.b,le.a],u_luminance:5e-5}))(r.e4(r.dx(),g),b,F,I,L);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+w,o.skyboxTexture,0),c.draw(m,C.TRIANGLES,mn.disabled,Yn.disabled,vi.unblended,Jn.frontCW,V,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Qm=r.d_([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ay{constructor(o){const c=new r.e5;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const g=new r.a_;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(c,Qm.members),this.indexBuffer=o.createIndexBuffer(g),this.segments=r.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const My=r.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Sv{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class id{constructor(o){this.colorModeAlphaBlendedWriteRGB=new vi([1,Ks,1,Ks],r.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new vi([1,0,1,0],r.am.transparent,[!1,!1,!1,!0]),this.params=new Sv,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const c=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ay(c);const g=this.params.sizeRange,b=this.params.intensityRange,w=function(V){const q=r.ea(30),G=[];for(let J=0;J<V;++J){const he=2*Math.PI*q(),le=Math.acos(1-2*q())-.5*Math.PI;G.push(r.cS(Math.cos(le)*Math.cos(he),Math.cos(le)*Math.sin(he),Math.sin(le)))}return G}(this.params.starsCount),C=r.ea(300),I=new r.e6,L=new r.a_;let F=0;for(let V=0;V<w.length;++V){const q=r.b$([],w[V],200),G=Math.max(0,1+.01*g*(1*C()-.5)),J=Math.max(0,1+.01*b*(1*C()-.5));I.emplaceBack(q[0],q[1],q[2],-1,-1,G,J),I.emplaceBack(q[0],q[1],q[2],1,-1,G,J),I.emplaceBack(q[0],q[1],q[2],1,1,G,J),I.emplaceBack(q[0],q[1],q[2],-1,1,G,J),L.emplaceBack(F+0,F+1,F+2),L.emplaceBack(F+0,F+2,F+3),F+=4}this.starsVx=c.createVertexBuffer(I,My.members),this.starsIdx=c.createIndexBuffer(L),this.starsSegments=r.bd.simpleSegment(0,0,I.length,L.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,c){const g=o.context,b=g.gl,w=o.transform,C=new mn(b.LEQUAL,mn.ReadOnly,[0,1]),I=r.ah(w.zoom),L=o.style.getLut(c.scope),F=c.properties.get("color-use-theme")==="none",V=c.properties.get("color").toRenderColor(F?null:L).toArray01(),q=c.properties.get("high-color-use-theme")==="none",G=c.properties.get("high-color").toRenderColor(q?null:L).toArray01(),J=c.properties.get("space-color-use-theme")==="none",he=c.properties.get("space-color").toRenderColor(J?null:L).toArray01PremultipliedAlpha(),le=5e-4,fe=r.e7(c.properties.get("horizon-blend"),0,1,le,.25),ce=r.dl(o,g,w)&&fe===le?w.worldSize/(2*Math.PI*1.025)-1:w.globeRadius,ve=o.frameCounter/1e3%1,Ae=r.ae(w.globeCenterInViewSpace),De=Math.sqrt(Math.pow(Ae,2)-Math.pow(ce,2)),Ne=Math.acos(De/Ae),ze=ke=>{const Re=w.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ke&&Re.push("ALPHA_PASS");const Ve=o.getOrCreateProgram("globeAtmosphere",{defines:Re}),We=((rt,Et,wt,Vt,nt,ft,Qe,Mt,pt,Ot,Ct,Lt)=>({u_frustum_tl:rt,u_frustum_tr:Et,u_frustum_br:wt,u_frustum_bl:Vt,u_horizon:nt,u_transition:ft,u_fadeout_range:Qe,u_color:Mt,u_high_color:pt,u_space_color:Ot,u_temporal_offset:Ct,u_horizon_angle:Lt}))(w.frustumCorners.TL,w.frustumCorners.TR,w.frustumCorners.BR,w.frustumCorners.BL,w.frustumCorners.horizon,I,fe,V,G,he,ve,Ne);o.uploadCommonUniforms(g,Ve);const ct=this.atmosphereBuffer;ct&&Ve.draw(o,b.TRIANGLES,C,Yn.disabled,ke?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Jn.backCW,We,ke?"atmosphere_glow_alpha":"atmosphere_glow",ct.vertexBuffer,ct.indexBuffer,ct.segments)};ze(!1),ze(!0)}drawStars(o,c){const g=r.aD(c.properties.get("star-intensity"),0,1);if(g===0)return;const b=o.context,w=b.gl,C=o.transform,I=o.getOrCreateProgram("stars"),L=r.bY([]);r.b_(L,L,-C._pitch),r.bZ(L,L,-C.angle),r.b_(L,L,r.al(C._center.lat)),r.e8(L,L,-r.al(C._center.lng));const F=r.c3(new Float32Array(16),L),V=r.az([],C.starsProjMatrix,F),q=r.e4([],F),G=r.e9([],q),J=[0,1,0];r.dz(J,J,G),r.b$(J,J,this.params.sizeMultiplier);const he=[1,0,0];r.dz(he,he,G),r.b$(he,he,this.params.sizeMultiplier);const le=(fe=J,ce=he,ve=g,{u_matrix:Float32Array.from(V),u_up:fe,u_right:ce,u_intensity_multiplier:ve});var fe,ce,ve;o.uploadCommonUniforms(b,I),this.starsVx&&this.starsIdx&&I.draw(o,w.TRIANGLES,mn.disabled,Yn.disabled,this.colorModeAlphaBlendedWriteRGB,Jn.disabled,le,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function qu(m,o){const c=[...m],g=o.cameraWorldSizeForFog/o.worldSize,b=r.bx([]);return r.cE(b,b,[g,g,1]),r.az(c,b,c),r.az(c,o.worldToFogMatrix,c),c}function Kt(m,o,c,g,b){const w=c.material,C=g.context,{baseColorTexture:I,metallicRoughnessTexture:L}=w.pbrMetallicRoughness,{normalTexture:F,occlusionTexture:V,emissionTexture:q}=w;function G(he,le,fe){if(he&&(m.push(le),C.activeTexture.set(C.gl.TEXTURE0+fe),he.gfxTexture)){const{minFilter:ce,magFilter:ve,wrapS:Ae,wrapT:De}=he.sampler;he.gfxTexture.bindExtraParam(ce,ve,Ae,De)}}G(I,"HAS_TEXTURE_u_baseColorTexture",ks.BaseColor),G(L,"HAS_TEXTURE_u_metallicRoughnessTexture",ks.MetallicRoughness),G(F,"HAS_TEXTURE_u_normalTexture",ks.Normal),G(V,"HAS_TEXTURE_u_occlusionTexture",ks.Occlusion),G(q,"HAS_TEXTURE_u_emissionTexture",ks.Emission),b&&(b.texture||(b.texture=new r.ed(g.context,b.image,[b.image.height,b.image.height,b.image.height],C.gl.RGBA8)),C.activeTexture.set(C.gl.TEXTURE0+ks.LUT),b.texture&&b.texture.bind(C.gl.LINEAR,C.gl.CLAMP_TO_EDGE),m.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(m.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(c.texcoordBuffer)),c.colorBuffer&&(m.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(c.colorBuffer)),c.normalBuffer&&(m.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(c.normalBuffer)),c.pbrBuffer&&(m.push("HAS_ATTRIBUTE_a_pbr"),m.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(c.pbrBuffer)),w.alphaMode!=="OPAQUE"&&w.alphaMode!=="MASK"||m.push("UNPREMULT_TEXTURE_IN_SHADER"),w.defined||m.push("DIFFUSE_SHADED");const J=g.shadowRenderer;J&&(m.push("RENDER_SHADOWS","DEPTH_TEXTURE"),J.useNormalOffset&&m.push("NORMAL_OFFSET"))}function un(m,o,c,g,b,w){const C=c.paint.get("model-opacity").constantOr(1),I=o.context,L=new mn(o.context.gl.LEQUAL,mn.ReadWrite,o.depthRangeFor3D),F=o.transform,V=m.mesh,q=V.material,G=q.pbrMetallicRoughness,J=o.style.fog;let he;he=o.transform.projection.zAxisUnit==="pixels"?[...m.nodeModelMatrix]:r.az([],g.zScaleMatrix,m.nodeModelMatrix),r.az(he,g.negCameraPosMatrix,he);const le=r.bi([],he);r.ee(le,le);const fe=c.paint.get("model-color-use-theme").constantOr("default")==="none",ce=c.paint.get("model-emissive-strength").constantOr(0),ve=Fu(new Float32Array(m.worldViewProjection),new Float32Array(he),new Float32Array(le),null,o,C,G.baseColorFactor.toRenderColor(null),q.emissiveFactor,G.metallicFactor,G.roughnessFactor,q,ce,c),Ae={defines:[]},De=[],Ne=o.shadowRenderer;Ne&&(Ne.useNormalOffset=!1),Kt(Ae.defines,De,V,o,fe?null:c.lut);let ze=null;if(J){const Ve=qu(m.nodeModelMatrix,o.transform);if(ze=new Float32Array(Ve),F.projection.name!=="globe"){const We=V.aabb.min,ct=V.aabb.max,[rt,Et]=J.getOpacityForBounds(Ve,We[0],We[1],ct[0],ct[1]);Ae.overrideFog=rt>=qt||Et>=qt}}const ke=Uh(o,c.paint.get("model-cutoff-fade-range"));ke.shouldRenderCutoff&&Ae.defines.push("RENDER_CUTOFF");const Re=o.getOrCreateProgram("model",Ae);o.uploadCommonUniforms(I,Re,null,ze,ke),o.renderPass!=="shadow"&&Ne&&Ne.setupShadowsFromMatrix(m.nodeModelMatrix,Re),Re.draw(o,I.gl.TRIANGLES,L,b,w,V.material.doubleSided?Jn.disabled:Jn.backCCW,ve,c.id,V.vertexBuffer,V.indexBuffer,V.segments,c.paint,o.transform.zoom,void 0,De)}function xl(m,o,c,g,b,w,C){let I;I=m.projection.name==="globe"?r.ef(c,m):[...c],r.az(I,I,o.matrix);const L=r.az([],g,I);if(o.meshes)for(const F of o.meshes){if(F.material.alphaMode!=="BLEND"){C.push({mesh:F,depth:0,modelIndex:b,worldViewProjection:L,nodeModelMatrix:I});continue}const V=r.ad([],F.centroid,L);!m.isOrthographic&&V[2]<=0||w.push({mesh:F,depth:V[2],modelIndex:b,worldViewProjection:L,nodeModelMatrix:I})}if(o.children)for(const F of o.children)xl(m,F,c,g,b,w,C)}function co(m,o,c,g){const b=c.shadowRenderer;if(!b)return;const w=b.getShadowPassDepthMode(),C=b.getShadowPassColorMode(),I=b.calculateShadowPassMatrixFromMatrix(o),L=td(I);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,w,Yn.disabled,C,Jn.backCCW,L,g.id,m.vertexBuffer,m.indexBuffer,m.segments,g.paint,c.transform.zoom,void 0,void 0)}function at(m,o,c){const g=o.updateZoomBasedPaintProperties(),b=function(w,C,I){let L,F,V,q=w.terrain?w.terrain.exaggeration():0;if(w.terrain&&q>0){const G=w.terrain,J=G.findDEMTileFor(I);J&&J.dem?L=r.el.create(G,I,J):q=0}if(q===0&&(C.terrainElevationMin=0,C.terrainElevationMax=0),q===C.validForExaggeration&&(q===0||L&&L._demTile&&L._demTile.tileID===C.validForDEMTile.id&&L._dem._timestamp===C.validForDEMTile.timestamp))return!1;for(const G in C.instancesPerModel){const J=C.instancesPerModel[G];for(let he=0;he<J.instancedDataArray.length;++he){const le=(L?q*L.getElevationAt(0|J.instancedDataArray.float32[16*he],0|J.instancedDataArray.float32[16*he+1],!0,!0):0)+J.instancesEvaluatedElevation[he];J.instancedDataArray.float32[16*he+6]=le,F=F?Math.min(C.terrainElevationMin,le):le,V=V?Math.max(C.terrainElevationMax,le):le}}return C.terrainElevationMin=F||0,C.terrainElevationMax=V||0,C.validForExaggeration=q,C.validForDEMTile=L&&L._demTile?{id:L._demTile.tileID,timestamp:L._dem._timestamp}:{id:void 0,timestamp:0},!0}(m,o,c);(g||b)&&(o.uploaded=!1,o.upload(m.context))}const ka={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new r.cV([0,0,0],[r.aj,r.aj,0])};function Wu(m,o){const c=1<<m.canonical.z,g=o.getFreeCameraOptions().position,b=o.elevation,w=m.canonical.x/c,C=(m.canonical.x+1)/c,I=m.canonical.y/c,L=(m.canonical.y+1)/c;let F=o._centerAltitude;if(b){const J=b.getMinMaxForTile(m);J&&J.max>F&&(F=J.max)}const V=r.aD(g.x,w,C)-g.x,q=r.aD(g.y,I,L)-g.y,G=r.c6(F,o.center.lat)-g.z;return o._zoomFromMercatorZ(Math.sqrt(V*V+q*q+G*G))}function Fp(m,o,c,g,b,w,C){const I=m.context,L=m.renderPass==="shadow",F=m.shadowRenderer,V=L&&F?F.getShadowPassDepthMode():new mn(I.gl.LEQUAL,mn.ReadWrite,m.depthRangeFor3D),q=m.isTileAffectedByFog(w);if(c.meshes)for(const G of c.meshes){const J=["MODEL_POSITION_ON_GPU"],he=[];let le,fe,ce;g.instancedDataArray.length>20&&J.push("INSTANCED_ARRAYS");const ve=Uh(m,o.paint.get("model-cutoff-fade-range"));if(ve.shouldRenderCutoff&&J.push("RENDER_CUTOFF"),L&&F)le=m.getOrCreateProgram("modelDepth",{defines:J}),fe=td(C.shadowTileMatrix,C.shadowTileMatrix,Float32Array.from(c.matrix)),ce=F.getShadowPassColorMode();else{Kt(J,he,G,m,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),le=m.getOrCreateProgram("model",{defines:J,overrideFog:q});const De=G.material,Ne=De.pbrMetallicRoughness,ze=o.paint.get("model-opacity").constantOr(1),ke=o.paint.get("model-emissive-strength").constantOr(0);fe=Fu(w.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,m,ze,Ne.baseColorFactor.toRenderColor(null),De.emissiveFactor,Ne.metallicFactor,Ne.roughnessFactor,De,ke,o,b),F&&(C.shadowUniformsInitialized?le.setShadowUniformValues(I,F.getShadowUniformValues()):(F.setupShadows(w.toUnwrapped(),le,"model-tile",w.overscaledZ),C.shadowUniformsInitialized=!0)),ce=ve.shouldRenderCutoff||ze<1||De.alphaMode!=="OPAQUE"?vi.alphaBlended:vi.unblended}m.uploadCommonUniforms(I,le,w.toUnwrapped(),null,ve);const Ae=G.material.doubleSided?Jn.disabled:Jn.backCCW;if(g.instancedDataArray.length>20)he.push(g.instancedDataBuffer),le.draw(m,I.gl.TRIANGLES,V,Yn.disabled,ce,Ae,fe,o.id,G.vertexBuffer,G.indexBuffer,G.segments,o.paint,m.transform.zoom,void 0,he,g.instancedDataArray.length);else{const De=L?"u_instance":"u_normal_matrix";for(let Ne=0;Ne<g.instancedDataArray.length;++Ne)fe[De]=new Float32Array(g.instancedDataArray.arrayBuffer,64*Ne,16),le.draw(m,I.gl.TRIANGLES,V,Yn.disabled,ce,Ae,fe,o.id,G.vertexBuffer,G.indexBuffer,G.segments,o.paint,m.transform.zoom,void 0,he)}}if(c.children)for(const G of c.children)Fp(m,o,G,g,b,w,C)}const eg=[1,-1,1];function Ry(m,o,c,g){if(!c.modelManager)return!0;const b=c.modelManager;if(!c.shadowRenderer)return!0;const w=c.shadowRenderer,C=o.aabb;let I=!0,L=m.maxHeight;if(L===0){let V=0;for(const q in m.instancesPerModel){const G=b.getModel(q,g);G?V=Math.max(V,Math.max(Math.max(G.aabb.max[0],G.aabb.max[1]),G.aabb.max[2])):I=!1}L=m.maxScale*V*1.41+m.maxVerticalOffset,I&&(m.maxHeight=L)}C.max[2]=L,C.min[2]+=m.terrainElevationMin,C.max[2]+=m.terrainElevationMax,r.ad(C.min,C.min,o.tileMatrix),r.ad(C.max,C.max,o.tileMatrix);const F=C.intersects(w.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(m.isInsideFirstShadowMapFrustum=F===2),F===0}function Iy(m,o){const c=m.uniformValues.u_cutoff_params[0],g=m.uniformValues.u_cutoff_params[1],b=m.uniformValues.u_cutoff_params[2],w=m.uniformValues.u_cutoff_params[3];return g===c||w===b?1:r.aD(((o-c)/(g-c)-b)/(w-b),0,1)}function rd(m,o,c,g){if(o.pitch<20)return 1;const b=o.getWorldToCameraMatrix();r.az(b,b,m);const w=r.ei(c.min[0],c.min[1],c.min[2],1);let C=r.aA(r.ej(),w,b),I=C,L=C;w[1]=c.max[1],C=r.aA(r.ej(),w,b),I=C[1]<I[1]?C:I,L=C[1]>L[1]?C:L,w[0]=c.max[0],C=r.aA(r.ej(),w,b),I=C[1]<I[1]?C:I,L=C[1]>L[1]?C:L,w[1]=c.min[1],C=r.aA(r.ej(),w,b),I=C[1]<I[1]?C:I,L=C[1]>L[1]?C:L;const F=r.aD(g[0],0,1),V=100*o.pixelsPerMeter*r.aD(g[1],0,1),q=r.aD(g[2],0,1),G=r.ek(r.ej(),I,L,F),J=Math.tan(.5*o.fovX),he=-G[2]*J;if(V===0)return G[1]<-Math.abs(he)?q:1;const le=(-Math.abs(he)-G[1])/V,fe=(ve,Ae,De)=>(1-De)*ve+De*Ae,ce=r.aD(fe(1,q,le),q,1);return fe(1,ce,r.aD((o.pitch-20)/20,0,1))}class Tv{}class Py{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,c,g){{const q=this._storage.get(c.id);if(q)return q.lastUsedFrameIdx=o,q.buf}const b=g.gl,w=b.getBufferParameter(b.ELEMENT_ARRAY_BUFFER,b.BUFFER_SIZE),C=new ArrayBuffer(w),I=new Int16Array(C);b.getBufferSubData(b.ELEMENT_ARRAY_BUFFER,0,new Int16Array(C));const L=new r.en;for(let q=0;q<w/2;q+=3){const G=I[q],J=I[q+1],he=I[q+2];L.emplaceBack(G,J),L.emplaceBack(J,he),L.emplaceBack(he,G)}const F=g.bindVertexArrayOES.current,V=new Tv;return V.buf=new vc(g,L),V.lastUsedFrameIdx=o,this._storage.set(c.id,V),g.bindVertexArrayOES.set(F),V.buf}update(o){for(const[c,g]of this._storage)o-g.lastUsedFrameIdx>30&&(g.buf.destroy(),this._storage.delete(c))}destroy(){for(const[o,c]of this._storage)c.buf.destroy(),this._storage.delete(o)}}class Dy{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Np=r.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class jp{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class tg{constructor(o,c){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...c,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...c,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Oy=r.d_([{type:"Float32",name:"a_pos_2f",components:2}]);class ng{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,c){const g=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const C=new r.eo,I=new r.a_;C.emplaceBack(-1,-1),C.emplaceBack(1,-1),C.emplaceBack(1,1),C.emplaceBack(-1,1),I.emplaceBack(0,1,2),I.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(C,Oy.members),this.vignetteIdx=o.context.createIndexBuffer(I)}const b=r.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,g);const C={u_vignetteShape:(w={vignetteShape:[c.start,c.range,Math.pow(10,c.fadePower)],vignetteColor:[c.color.r,c.color.g,c.color.b,c.color.a*c.strength]}).vignetteShape,u_vignetteColor:w.vignetteColor};g.draw(o,o.context.gl.TRIANGLES,mn.disabled,Yn.disabled,vi.alphaBlended,Jn.disabled,C,"vignette",this.vignetteVx,this.vignetteIdx,b)}var w}}class od{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,c){const g=o.getFreeCameraOptions().position,b=g.toAltitude(),w=g.toLngLat(),C=r.al(w.lng),I=r.al(w.lat),L=o.pixelsPerMeter/c,F=C*r.eq,V=r.eq*Math.log(Math.tan(Math.PI/4+I/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const q=-this._offsetYPrev+V,G=-this._elevationPrev+b;this._accumulatedOffsetX+=(-this._offsetXPrev+F)*L,this._accumulatedOffsetY+=q*L,this._accumulatedElevation+=G*L,this._offsetXPrev=F,this._offsetYPrev=V,this._elevationPrev=b}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Xu(m,o){return[-(m[0]-Math.floor(m[0]/o)*o),-(m[1]-Math.floor(m[1]/o)*o),-(m[2]-Math.floor(m[2]/o)*o)]}function ig(m){const o=r.ea(1323123451230),c=[];for(let g=0;g<m;++g){const b=2*o()-1,w=2*o()-1,C=2*o()-1;c.push(r.cS(b,w,C))}return c}function wc(m,o,c,g,b){const w=r.aD((b-c)/(g-c),0,1);return(1-w)*m+w*o}class zs{constructor(o){this._movement=new od,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new ng,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,c){const g=o.transform;this._movement.update(g,this._ppmScaleFactor);const b=g.starsProjMatrix,w=r.bY([]);r.b_(w,w,r.al(90)-g._pitch),r.bZ(w,w,-g.angle);const C=r.c3(new Float32Array(16),w),I=r.ep(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),L=r.ee([],I),F=r.az([],L,C),V=Date.now()/1e3;return this._accumulatedTimeFromStart+=(V-this._prevTime)*c,this._prevTime=V,{projectionMatrix:b,modelviewMatrix:F}}}class Ev extends zs{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new tg(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const g=ig(this.particlesCount),b=new r.er,w=new r.a_;let C=0;const I=r.ea(1323123451230);for(let L=0;L<g.length;++L){const F=g[L],V=[2*I()-1,I(),I(),I()];b.emplaceBack(F[0],F[1],F[2],-1,-1,...V),b.emplaceBack(F[0],F[1],F[2],1,-1,...V),b.emplaceBack(F[0],F[1],F[2],1,1,...V),b.emplaceBack(F[0],F[1],F[2],-1,1,...V),w.emplaceBack(C+0,C+1,C+2),w.emplaceBack(C+0,C+2,C+3),C+=4}this.particlesVx=c.createVertexBuffer(b,Np.members),this.particlesIdx=c.createIndexBuffer(w)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const c=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},g=o.transform.zoom;if(c.revealStart>g)return;const b=wc(0,1,c.revealStart,c.revealStart+c.revealRange,g);if(!this.particlesVx||!this.particlesIdx)return;const w=structuredClone(this._params);let C=[-w.direction.x,w.direction.y,-100];r.au(C,C);const I=structuredClone(this._vignetteParams);I.strength*=b,w.overrideStyleParameters||(w.intensity=o.style.rain.state.density,w.timeFactor=o.style.rain.state.intensity,w.color=structuredClone(o.style.rain.state.color),C=structuredClone(o.style.rain.state.direction),w.screenThinning.intensity=o.style.rain.state.centerThinning,w.dropletSizeX=o.style.rain.state.dropletSize[0],w.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],w.distortionStrength=100*o.style.rain.state.distortionStrength,I.strength=1,I.color=structuredClone(o.style.rain.state.vignetteColor));const L=this.updateOnRender(o,w.timeFactor),F=o.context,V=F.gl,q=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new r.T(F,{width:o.width,height:o.height,data:null},V.RGBA8)),w.distortionStrength>0&&(F.activeTexture.set(V.TEXTURE0),this.screenTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),V.copyTexSubImage2D(V.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const G=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms(F,G),F.activeTexture.set(V.TEXTURE0),this.screenTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE);const J=[w.color.r,w.color.g,w.color.b,w.color.a],he=(le,fe)=>{const ce=Xu(this._movement.getPosition(),le),ve=w.dropletSizeX,Ae=w.dropletSizeX*w.dropletSizeYScale,De=o.width/2,Ne=o.height/2,ze=wc(0,w.screenThinning.start,0,1,w.screenThinning.intensity),ke=wc(.001,w.screenThinning.range,0,1,w.screenThinning.intensity),Re=wc(0,w.screenThinning.particleOffset,0,1,w.screenThinning.intensity),Ve=(We={modelview:L.modelviewMatrix,projection:L.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:ce,velocityConeAperture:w.velocityConeAperture,velocity:w.velocity,boxSize:le,rainDropletSize:[ve,Ae],distortionStrength:w.distortionStrength,rainDirection:C,color:J,screenSize:[q.width,q.height],thinningCenterPos:[De,Ne],thinningShape:[ze,ke,Math.pow(10,w.screenThinning.fadePower)],thinningAffectedRatio:w.screenThinning.affectedRatio,thinningParticleOffset:Re,shapeDirectionalPower:w.shapeDirPower,shapeNormalPower:w.shapeNormalPower,mode:fe?0:1},{u_modelview:Float32Array.from(We.modelview),u_projection:Float32Array.from(We.projection),u_time:We.time,u_cam_pos:We.camPos,u_texScreen:0,u_velocityConeAperture:We.velocityConeAperture,u_velocity:We.velocity,u_boxSize:We.boxSize,u_rainDropletSize:We.rainDropletSize,u_distortionStrength:We.distortionStrength,u_rainDirection:We.rainDirection,u_color:We.color,u_screenSize:We.screenSize,u_thinningCenterPos:We.thinningCenterPos,u_thinningShape:We.thinningShape,u_thinningAffectedRatio:We.thinningAffectedRatio,u_thinningParticleOffset:We.thinningParticleOffset,u_shapeDirectionalPower:We.shapeDirectionalPower,u_shapeNormalPower:We.shapeNormalPower,u_mode:We.mode});var We;const ct=Math.round(w.intensity*this.particlesCount),rt=r.bd.simpleSegment(0,0,4*ct,2*ct);G.draw(o,V.TRIANGLES,mn.disabled,Yn.disabled,vi.alphaBlended,Jn.disabled,Ve,"rain_particles",this.particlesVx,this.particlesIdx,rt)};w.distortionStrength>0&&he(w.boxSize,!0),he(w.boxSize,!1),this._vignette.draw(o,I)}}const Up=r.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Jr extends zs{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new tg(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const g=ig(this.particlesCount),b=new r.es,w=new r.a_;let C=0;const I=r.ea(1323123451230);for(let L=0;L<g.length;++L){const F=g[L],V=I(),q=I(),G=I(),J=[L/g.length,V,q,G],he=[I(),I()];b.emplaceBack(F[0],F[1],F[2],-1,-1,...J,...he),b.emplaceBack(F[0],F[1],F[2],1,-1,...J,...he),b.emplaceBack(F[0],F[1],F[2],1,1,...J,...he),b.emplaceBack(F[0],F[1],F[2],-1,1,...J,...he),w.emplaceBack(C+0,C+1,C+2),w.emplaceBack(C+0,C+2,C+3),C+=4}this.particlesVx=c.createVertexBuffer(b,Up.members),this.particlesIdx=c.createIndexBuffer(w)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const c=structuredClone(this._params);let g=[-c.direction.x,c.direction.y,-100];r.au(g,g);const b=structuredClone(this._vignetteParams),w=c.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},C=o.transform.zoom;if(w.revealStart>C)return;const I=wc(0,1,w.revealStart,w.revealStart+w.revealRange,C);b.strength*=I,c.overrideStyleParameters||(c.intensity=o.style.snow.state.density,c.timeFactor=o.style.snow.state.intensity,c.color=structuredClone(o.style.snow.state.color),g=structuredClone(o.style.snow.state.direction),c.screenThinning.intensity=o.style.snow.state.centerThinning,c.billboardSize=2.79*o.style.snow.state.flakeSize,b.strength=1,b.color=structuredClone(o.style.snow.state.vignetteColor));const L=this.updateOnRender(o,c.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const F=o.context,V=F.gl,q=o.transform,G=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms(F,G),((J,he,le)=>{const fe=Xu(this._movement.getPosition(),J),ce=q.width/2,ve=q.height/2,Ae=wc(0,le.screenThinning.start,0,1,le.screenThinning.intensity),De=wc(.001,le.screenThinning.range,0,1,le.screenThinning.intensity),Ne=wc(0,le.screenThinning.particleOffset,0,1,le.screenThinning.intensity),ze=(ke={modelview:L.modelviewMatrix,projection:L.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:fe,velocityConeAperture:le.velocityConeAperture,velocity:le.velocity,horizontalOscillationRadius:le.horizontalOscillationRadius,horizontalOscillationRate:le.horizontalOscillationRate,boxSize:J,billboardSize:1*le.billboardSize,simpleShapeParameters:[le.shapeFadeStart,le.shapeFadePower],screenSize:[q.width,q.height],thinningCenterPos:[ce,ve],thinningShape:[Ae,De,Math.pow(10,le.screenThinning.fadePower)],thinningAffectedRatio:le.screenThinning.affectedRatio,thinningParticleOffset:Ne,color:[le.color.r,le.color.g,le.color.b,le.color.a],direction:g},{u_modelview:Float32Array.from(ke.modelview),u_projection:Float32Array.from(ke.projection),u_time:ke.time,u_cam_pos:ke.camPos,u_velocityConeAperture:ke.velocityConeAperture,u_velocity:ke.velocity,u_horizontalOscillationRadius:ke.horizontalOscillationRadius,u_horizontalOscillationRate:ke.horizontalOscillationRate,u_boxSize:ke.boxSize,u_billboardSize:ke.billboardSize,u_simpleShapeParameters:ke.simpleShapeParameters,u_screenSize:ke.screenSize,u_thinningCenterPos:ke.thinningCenterPos,u_thinningShape:ke.thinningShape,u_thinningAffectedRatio:ke.thinningAffectedRatio,u_thinningParticleOffset:ke.thinningParticleOffset,u_particleColor:ke.color,u_direction:ke.direction});var ke;const Re=Math.round(le.intensity*this.particlesCount),Ve=r.bd.simpleSegment(0,0,4*Re,2*Re);this.particlesVx&&this.particlesIdx&&G.draw(o,V.TRIANGLES,mn.disabled,Yn.disabled,vi.alphaBlended,Jn.disabled,ze,"snow_particles",this.particlesVx,this.particlesIdx,Ve)})(c.boxSize,0,c),this._vignette.draw(o,b)}}const qi={symbol:function(m,o,c,g,b){if(m.renderPass!=="translucent")return;const w=Yn.disabled,C=m.colorModeForRenderPass(),I=c.layout.get("text-variable-anchor"),L=c.layout.get("text-size-scale-range"),F=r.aD(m.scaleFactor,L[0],L[1]);I&&function(G,J,he,le,fe,ce,ve,Ae){const De=J.transform,Ne=fe==="map",ze=ce==="map";for(const ke of G){const Re=le.getTile(ke),Ve=Re.getBucket(he);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;const We=r.bH(Ve.textSizeData,De.zoom,Ae),ct=lp(ke,Ve.getProjection(),De),rt=De.calculatePixelsToTileUnitsMatrix(Re),Et=hl(ct,Re.tileID.canonical,ze,Ne,De,Ve.getProjection(),rt),wt=Ve.hasIconTextFit()&&Ve.hasIconData();We&&pf(Ve,Ne,ze,ve,De,Et,ke,Math.pow(2,De.zoom-Re.tileID.overscaledZ),We,wt)}}(g,m,c,o,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),b,F);const V=c.paint.get("icon-opacity").constantOr(1)!==0,q=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(V||q)?ju(m,o,c,g,w,C):(V&&ju(m,o,c,g,w,C,{onlyIcons:!0}),q&&ju(m,o,c,g,w,C,{onlyText:!0})),o.map.showCollisionBoxes&&(Bo(m,o,c,g,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Bo(m,o,c,g,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(m,o,c,g){if(m.renderPass!=="translucent")return;const b=c.paint.get("circle-opacity"),w=c.paint.get("circle-stroke-width"),C=c.paint.get("circle-stroke-opacity"),I=c.layout.get("circle-sort-key").constantOr(1)!==void 0,L=c.paint.get("circle-emissive-strength");if(b.constantOr(1)===0&&(w.constantOr(1)===0||C.constantOr(1)===0))return;const F=m.context,V=F.gl,q=m.transform,G=m.depthModeForSublayer(0,mn.ReadOnly),J=Yn.disabled,he=m.colorModeForDrapableLayerRenderPass(L),le=q.projection.name==="globe",fe=[r.ay(q.center.lng),r.aH(q.center.lat)],ce=[];for(let Ae=0;Ae<g.length;Ae++){const De=g[Ae],Ne=o.getTile(De),ze=Ne.getBucket(c);if(!ze||ze.projection.name!==q.projection.name)continue;const ke=ze.programConfigurations.get(c.id),Re=r.dK(c),Ve=m.isTileAffectedByFog(De);le&&Re.push("PROJECTION_GLOBE_VIEW"),Re.push("DEPTH_D24"),m.terrain&&q.depthOcclusionForSymbolsAndCircles&&Re.push("DEPTH_OCCLUSION");const We=m.getOrCreateProgram("circle",{config:ke,defines:Re,overrideFog:Ve}),ct=ze.layoutVertexBuffer,rt=ze.globeExtVertexBuffer,Et=ze.indexBuffer,wt=q.projection.createInversionMatrix(q,De.canonical),Vt={programConfiguration:ke,program:We,layoutVertexBuffer:ct,globeExtVertexBuffer:rt,indexBuffer:Et,uniformValues:r.dL(m,De,Ne,wt,fe,c),tile:Ne};if(I){const nt=ze.segments.get();for(const ft of nt)ce.push({segments:new r.bd([ft]),sortKey:ft.sortKey,state:Vt})}else ce.push({segments:ze.segments,sortKey:0,state:Vt})}I&&ce.sort((Ae,De)=>Ae.sortKey-De.sortKey);const ve={useDepthForOcclusion:q.depthOcclusionForSymbolsAndCircles};for(const Ae of ce){const{programConfiguration:De,program:Ne,layoutVertexBuffer:ze,globeExtVertexBuffer:ke,indexBuffer:Re,uniformValues:Ve,tile:We}=Ae.state,ct=Ae.segments;m.terrain&&m.terrain.setupElevationDraw(We,Ne,ve),m.uploadCommonUniforms(F,Ne,We.tileID.toUnwrapped()),Ne.draw(m,V.TRIANGLES,G,J,he,Jn.disabled,Ve,c.id,ze,Re,ct,c.paint,q.zoom,De,[ke])}},heatmap:function(m,o,c,g){if(c.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const b=m.context,w=b.gl,C=Yn.disabled,I=new vi([w.ONE,w.ONE,w.ONE,w.ONE],r.am.transparent,[!0,!0,!0,!0]);(function(J,he,le,fe){const ce=J.gl,ve=he.width*fe,Ae=he.height*fe;J.activeTexture.set(ce.TEXTURE1),J.viewport.set([0,0,ve,Ae]);let De=le.heatmapFbo;if(!De||De&&(De.width!==ve||De.height!==Ae)){De&&De.destroy();const Ne=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Ne),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),De=le.heatmapFbo=J.createFramebuffer(ve,Ae,!0,null),function(ze,ke,Re,Ve,We,ct){const rt=ze.gl;rt.texImage2D(rt.TEXTURE_2D,0,ze.extRenderToTextureHalfFloat?rt.RGBA16F:rt.RGBA,We,ct,0,rt.RGBA,ze.extRenderToTextureHalfFloat?rt.HALF_FLOAT:rt.UNSIGNED_BYTE,null),Ve.colorAttachment.set(Re)}(J,0,Ne,De,ve,Ae)}else ce.bindTexture(ce.TEXTURE_2D,De.colorAttachment.get()),J.bindFramebuffer.set(De.framebuffer)})(b,m,c,m.transform.projection.name==="globe"?.5:.25),b.clear({color:r.am.transparent});const L=m.transform,F=L.projection.name==="globe",V=F?["PROJECTION_GLOBE_VIEW"]:[],q=F?Jn.frontCCW:Jn.disabled,G=[r.ay(L.center.lng),r.aH(L.center.lat)];for(let J=0;J<g.length;J++){const he=g[J];if(o.hasRenderableParent(he))continue;const le=o.getTile(he),fe=le.getBucket(c);if(!fe||fe.projection.name!==L.projection.name)continue;const ce=m.isTileAffectedByFog(he),ve=fe.programConfigurations.get(c.id),Ae=m.getOrCreateProgram("heatmap",{config:ve,defines:V,overrideFog:ce}),{zoom:De}=m.transform;m.terrain&&m.terrain.setupElevationDraw(le,Ae),m.uploadCommonUniforms(b,Ae,he.toUnwrapped());const Ne=L.projection.createInversionMatrix(L,he.canonical);Ae.draw(m,w.TRIANGLES,mn.disabled,C,I,q,uf(m,he,le,Ne,G,De,c.paint.get("heatmap-intensity")),c.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,c.paint,m.transform.zoom,ve,F?[fe.globeExtVertexBuffer]:null)}b.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(b,w){const C=b.context,I=C.gl,L=w.heatmapFbo;if(!L)return;C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,L.colorAttachment.get()),C.activeTexture.set(I.TEXTURE1);let F=w.colorRampTexture;F||(F=w.colorRampTexture=new r.T(C,w.colorRamp,I.RGBA8)),F.bind(I.LINEAR,I.CLAMP_TO_EDGE),b.getOrCreateProgram("heatmapTexture").draw(b,I.TRIANGLES,mn.disabled,Yn.disabled,b.colorModeForRenderPass(),Jn.disabled,((V,q,G,J)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,w),w.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,w.paint,b.transform.zoom)}(m,c))},line:function(m,o,c,g){if(m.renderPass!=="translucent")return;const b=c.paint.get("line-opacity"),w=c.paint.get("line-width");if(b.constantOr(1)===0||w.constantOr(1)===0)return;const C=c.paint.get("line-emissive-strength"),I=c.paint.get("line-occlusion-opacity"),L=c.layout.get("line-elevation-reference"),F=c.layout.get("line-width-unit")==="meters",V=L==="sea",q=!(!m.terrain||!m.terrain.enabled),G=m.context,J=G.gl;if(c.hasElevatedBuckets&&m.transform.projection.name==="globe")return;const he=c.layout.get("line-cross-slope"),le=he!==void 0,fe=he<1,ce=m.colorModeForDrapableLayerRenderPass(C),ve=m.terrain&&m.terrain.renderingToTexture,Ae=ve?1:r.q.devicePixelRatio,De=c.paint.get("line-dasharray"),Ne=De.constantOr(1),ze=c.layout.get("line-cap"),ke=De.constantOr(null),Re=ze.constantOr(null),Ve=c.paint.get("line-pattern"),We=Ve.constantOr(1),ct=c.paint.get("line-pattern-cross-fade"),rt=Ve.constantOr(null),Et=c.paint.get("line-opacity").constantOr(1);let wt=!We&&Et!==1||m.depthOcclusion&&I>0&&I<1;const Vt=c.paint.get("line-gradient"),nt=We?"linePattern":"line",ft=r.dM(c);let Qe;if(ve&&m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(wt=!1),I!==0&&m.depthOcclusion){const Ct=c.paint._values["line-opacity"];Ct&&Ct.value&&Ct.value.kind==="constant"?Qe=Ct.value:r.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}w.value.kind!=="constant"&&w.value.isLineProgressConstant===!1&&ft.push("VARIABLE_LINE_WIDTH");const Mt=(Ct,Lt,Nt,pn,_n,dn)=>{for(const Sn of Ct){const yn=o.getTile(Sn);if(We&&!yn.patternsLoaded())continue;const Gn=yn.getBucket(c);if(!Gn||Gn.elevationType!=="none"&&!_n||Gn.elevationType==="none"&&_n)continue;m.prepareDrawTile();const ti=[...Lt],$n=m.shadowRenderer,mi=Gn.elevationType==="road"&&!!$n&&$n.enabled;let Kn=[0,0,0];if(mi){const ei=m.style.directionalLight,Mr=m.style.ambientLight;ei&&Mr&&(Kn=Vl(m.style,ei,Mr)),ti.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const Fn=Gn.programConfigurations.get(c.id);let Ci=!1;if(rt&&yn.imageAtlas){const ei=r.dN.from(rt),Mr=ei.getPrimary().scaleSelf(Ae).toString(),Fi=yn.imageAtlas.patternPositions.get(Mr),Zi=ei.getSecondary(),Yi=Zi?yn.imageAtlas.patternPositions.get(Zi.scaleSelf(Ae).toString()):null;Ci=!!Fi&&!!Yi,Fi&&Fn.setConstantPatternPositions(Fi,Yi)}ct>0&&(Ci||Fn.getPatternTransitionVertexBuffer("line-pattern"))&&ti.push("LINE_PATTERN_TRANSITION");const lr=m.isTileAffectedByFog(Sn),ni=m.getOrCreateProgram(nt,{config:Fn,defines:ti,overrideFog:lr,overrideRtt:!_n&&void 0});if(!We&&ke&&Re&&yn.lineAtlas){const ei=yn.lineAtlas.getDash(ke,Re);ei&&Fn.setConstantPatternPositions(ei)}mi&&$n.setupShadows(yn.tileID.toUnwrapped(),ni,"vector-tile",yn.tileID.overscaledZ);let[Ai,Hi]=c.paint.get("line-trim-offset");(Re==="round"||Re==="square")&&Ai!==Hi&&(Ai===0&&(Ai-=1),Hi===1&&(Hi+=1));const Wi=ve?Sn.projMatrix:null,cr=F?1/Gn.tileToMeter/r.aw(yn,1,m.transform.zoom):1,Nr=F?1/Gn.tileToMeter/r.aw(yn,1,Math.floor(m.transform.zoom)):1,fo=We?r.dO(m,yn,c,Wi,Ae,cr,Nr,[Ai,Hi],Kn,ct):r.dP(m,yn,c,Wi,Gn.lineClipsArray.length,Ae,cr,Nr,[Ai,Hi],Kn);if(Vt){const ei=Gn.gradients[c.id];let Mr=ei.texture;if(c.gradientVersion!==ei.version){let Fi=256;if(c.stepInterpolant){const Zi=o.getSource().maxzoom,Yi=Sn.canonical.z===Zi?Math.ceil(1<<m.transform.maxZoom-Sn.canonical.z):1;Fi=r.aD(r.dQ(Gn.maxLineLength/r.aj*1024*Yi),256,G.maxTextureSize)}ei.gradient=r.dR({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:Fi,image:ei.gradient||void 0,clips:Gn.lineClipsArray}),ei.texture?ei.texture.update(ei.gradient):ei.texture=new r.T(G,ei.gradient,J.RGBA8),ei.version=c.gradientVersion,Mr=ei.texture}G.activeTexture.set(J.TEXTURE1),Mr.bind(c.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}Ne&&(G.activeTexture.set(J.TEXTURE0),yn.lineAtlasTexture&&yn.lineAtlasTexture.bind(J.LINEAR,J.REPEAT),Fn.updatePaintBuffers()),We&&(G.activeTexture.set(J.TEXTURE0),yn.imageAtlasTexture&&yn.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Fn.updatePaintBuffers()),_n&&!V&&m.terrain.setupElevationDraw(yn,ni),m.uploadCommonUniforms(G,ni,Sn.toUnwrapped());const jr=ei=>{Qe!=null&&(Qe.value=Et*I),ni.draw(m,J.TRIANGLES,Nt,ei,ce,Jn.disabled,fo,c.id,Gn.layoutVertexBuffer,Gn.indexBuffer,Gn.segments,c.paint,m.transform.zoom,Fn,[Gn.layoutVertexBuffer2,Gn.patternVertexBuffer,Gn.zOffsetVertexBuffer]),Qe!=null&&(Qe.value=Et)};if(wt&&!_n){const ei=m.stencilModeForClipping(Sn).ref;ei===0&&ve&&G.clear({stencil:0});const Mr={func:J.EQUAL,mask:255};fo.u_alpha_discard_threshold=.8,jr(new Yn(Mr,ei,255,J.KEEP,J.KEEP,J.INVERT)),fo.u_alpha_discard_threshold=0,jr(new Yn(Mr,ei,255,J.KEEP,J.KEEP,J.KEEP))}else fo.u_alpha_discard_threshold=wt&&_n&&dn?.8:0,jr(_n?pn:m.stencilModeForClipping(Sn))}};let pt=m.depthModeForSublayer(0,mn.ReadOnly);const Ot=new mn(m.depthOcclusion?J.GREATER:J.LEQUAL,mn.ReadOnly,m.depthRangeFor3D);if(c.hasNonElevatedBuckets){const Ct=!ve&&m.terrain;I!==0&&Ct?r.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`):Ct?r.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${c.id}.`):Mt(g,ft,pt,Yn.disabled,!1,!0)}if(c.hasElevatedBuckets){L==="hd-road-markup"?q||(pt=Ot,ft.push("ELEVATED_ROADS")):(ft.push("ELEVATED"),pt=Ot,le&&ft.push(fe?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),V&&ft.push("ELEVATION_REFERENCE_SEA"));const Ct=wt?m.stencilModeFor3D():Yn.disabled;m.forceTerrainMode=!0,Mt(g,ft,pt,Ct,!0,!0),wt&&Mt(g,ft,pt,Ct,!0,!1),m.forceTerrainMode=!1}wt&&(m.resetStencilClippingMasks(),ve&&G.clear({stencil:0})),I===0||m.depthOcclusion||ve||m.layersWithOcclusionOpacity.push(m.currentLayer)},fill:function(m,o,c,g){const b=c.paint.get("fill-color"),w=c.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const C=c.paint.get("fill-emissive-strength"),I=m.colorModeForDrapableLayerRenderPass(C),L=c.paint.get("fill-pattern"),F=m.opaquePassEnabledForLayer()&&!L.constantOr(1)&&b.constantOr(r.am.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";let V="none";c.layout.get("fill-elevation-reference")!=="none"?V="road":c.paint.get("fill-z-offset").constantOr(1)!==0&&(V="offset");const q=!(!m.terrain||!m.terrain.enabled),G={painter:m,sourceCache:o,layer:c,coords:g,colorMode:I,elevationType:V,terrainEnabled:q,pass:F};if(m.renderPass!=="shadow")if(V!=="offset"){if(hn(G,!1),V==="road"){const J=!q&&m.renderPass==="translucent";J&&Fo(m,o,c,g,"geometry"),hn(G,!0,Yn.disabled),J&&function(he){const{painter:le,sourceCache:fe,layer:ce,coords:ve,colorMode:Ae}=he,De=le.context.gl,Ne=he.painter.shadowRenderer,ze=!!Ne&&Ne.enabled,ke=new mn(le.context.gl.LEQUAL,mn.ReadOnly,le.depthRangeFor3D);let Re=[0,0,0];if(ze){const Ve=le.style.directionalLight,We=le.style.ambientLight;Ve&&We&&(Re=Vl(le.style,Ve,We))}for(const Ve of ve){const We=fe.getTile(Ve),ct=We.getBucket(ce);if(!ct)continue;const rt=ct.elevatedStructures;if(!rt||!rt.renderableSegments||rt.renderableSegments.segments[0].primitiveLength===0)continue;le.prepareDrawTile();const Et=ct.bufferData.programConfigurations.get(ce.id),wt=le.isTileAffectedByFog(Ve),Vt=[];ze&&Vt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const nt=le.getOrCreateProgram("elevatedStructures",{config:Et,overrideFog:wt,defines:Vt}),ft=le.translatePosMatrix(Ve.projMatrix,We,ce.paint.get("fill-translate"),ce.paint.get("fill-translate-anchor"));ze&&Ne.setupShadows(We.tileID.toUnwrapped(),nt,"vector-tile",We.tileID.overscaledZ);const Qe=cf(ft,Re);le.uploadCommonUniforms(le.context,nt,Ve.toUnwrapped()),nt.draw(le,De.TRIANGLES,ke,Yn.disabled,Ae,Jn.backCCW,Qe,ce.id,rt.vertexBuffer,rt.indexBuffer,rt.renderableSegments,ce.paint,le.transform.zoom,Et,[rt.vertexBufferNormal])}}(G)}}else hn(G,!1,m.stencilModeFor3D());else m.shadowRenderer&&V==="road"&&!q&&function(J){const{painter:he,sourceCache:le,layer:fe,coords:ce}=J,ve=he.context.gl,Ae=J.painter.shadowRenderer;for(const De of ce){const Ne=le.getTile(De),ze=Ne.getBucket(fe);if(!ze)continue;const ke=ze.elevatedStructures;if(!ke||!ke.shadowCasterSegments||ke.shadowCasterSegments.segments[0].primitiveLength===0)continue;he.prepareDrawTile();const Re=ze.bufferData.programConfigurations.get(fe.id),Ve=he.isTileAffectedByFog(De),We=he.getOrCreateProgram("elevatedStructuresDepth",{config:Re,overrideFog:Ve}),ct=Ae.calculateShadowPassMatrixFromTile(Ne.tileID.toUnwrapped());he.uploadCommonUniforms(he.context,We,De.toUnwrapped());const rt={u_matrix:ct,u_depth_bias:.001};We.draw(he,ve.TRIANGLES,Ae.getShadowPassDepthMode(),Yn.disabled,Ae.getShadowPassColorMode(),Jn.disabled,rt,fe.id,ke.vertexBuffer,ke.indexBuffer,ke.shadowCasterSegments,fe.paint,he.transform.zoom,Re)}}(G)},"fill-extrusion":function(m,o,c,g){const b=c.paint.get("fill-extrusion-opacity"),w=m.context,C=w.gl,I=m.terrain,L=I&&I.renderingToTexture;if(b===0)return;const F=m.conflationActive&&m.style.isLayerClipped(c,o.getSource()),V=m.style.order.indexOf(c.fqid);if(F&&function(q,G,J,he,le){for(const fe of he){const ce=G.getTile(fe).getBucket(J);ce&&(ce.updateReplacement(fe,q.replacementSource,le),ce.uploadCentroid(q.context))}}(m,o,c,g,V),I||F)for(const q of g){const G=o.getTile(q).getBucket(c);G&&Yc(m.context,o,q,G,c,I,F)}if(m.renderPass==="shadow"&&m.shadowRenderer){const q=m.shadowRenderer;if(I&&b<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof r.ab)return;const G=q.getShadowPassDepthMode(),J=q.getShadowPassColorMode();nd(m,o,c,g,G,Yn.disabled,J,F)}else if(m.renderPass==="translucent"){const q=!c.paint.get("fill-extrusion-pattern").constantOr(1),G=c.paint.get("fill-extrusion-color").constantOr(r.am.white);if(!L&&G.a!==0){const J=new mn(m.context.gl.LEQUAL,mn.ReadWrite,m.depthRangeFor3D);b===1&&q?nd(m,o,c,g,J,Yn.disabled,vi.unblended,F):(nd(m,o,c,g,J,Yn.disabled,vi.disabled,F),nd(m,o,c,g,J,m.stencilModeFor3D(),m.colorModeForRenderPass(),F),m.resetStencilClippingMasks())}if(m.style.enable3dLights()&&q&&(!I&&m.transform.projection.name!=="globe"||L)){const J=c.paint.get("fill-extrusion-opacity"),he=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),le=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),fe=c.paint.get("fill-extrusion-flood-light-intensity"),ce=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",ve=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(ce?null:c.lut).toArray01().slice(0,3),Ae=he>0&&le>0,De=fe>0,Ne=(ke,Re,Ve)=>(1-Ve)*ke+Ve*Re,ze=ke=>{const Re=m.depthModeForSublayer(1,mn.ReadOnly,C.LEQUAL,!0),Ve=c.paint.get(ke?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),We=Ne(.1,3,Ve),ct=m._showOverdrawInspector;if(!ct){const rt=new Yn({func:C.ALWAYS,mask:255},255,255,C.KEEP,C.KEEP,C.REPLACE),Et=new vi([C.ONE,C.ONE,C.ONE,C.ONE],r.am.transparent,[!1,!1,!1,!0],C.MIN);Vu(m,o,c,g,Re,rt,Et,Jn.disabled,ke,"sdf",J,he,le,fe,ve,We,F,!1)}{const rt=ct?Yn.disabled:new Yn({func:C.EQUAL,mask:255},255,255,C.KEEP,C.DECR,C.DECR),Et=ct?m.colorModeForRenderPass():new vi([C.ONE_MINUS_DST_ALPHA,C.DST_ALPHA,C.ONE,C.ONE],r.am.transparent,[!0,!0,!0,!0]);Vu(m,o,c,g,Re,rt,Et,Jn.disabled,ke,"color",J,he,le,fe,ve,We,F,!1)}};if(L){const ke=(Re,Ve,We)=>{const ct=m.depthModeForSublayer(1,mn.ReadOnly,C.LEQUAL,!1),rt=c.paint.get(Re?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Et=Ne(.1,3,rt);{const wt=new vi([C.ONE,C.ONE,C.ONE,C.ONE],r.am.transparent,[!1,!1,!1,!0]);Vu(m,o,c,g,ct,Yn.disabled,wt,Jn.disabled,Re,"clear",J,he,le,fe,ve,Et,F,Ve)}{const wt=new Yn({func:C.ALWAYS,mask:255},255,255,C.KEEP,C.KEEP,C.REPLACE),Vt=new vi([C.ONE,C.ONE,C.ONE,C.ONE],r.am.transparent,[!1,!1,!1,!0],C.MIN);Vu(m,o,c,g,ct,wt,Vt,Jn.disabled,Re,"sdf",J,he,le,fe,ve,Et,F,Ve)}{const wt=Re?C.ZERO:C.ONE_MINUS_DST_ALPHA,Vt=new Yn({func:C.EQUAL,mask:255},255,255,C.KEEP,C.DECR,C.DECR),nt=new vi([wt,C.DST_ALPHA,C.ONE_MINUS_DST_ALPHA,C.ZERO],r.am.transparent,[!0,!0,!0,!0]);Vu(m,o,c,g,ct,Vt,nt,Jn.disabled,Re,"color",J,he,le,fe,ve,Et,F,Ve)}{const wt=new vi([C.ONE,C.ONE,C.ONE,Re?C.ZERO:C.ONE],r.am.transparent,[!1,!1,!1,!0],Re?C.FUNC_ADD:C.MAX);Vu(m,o,c,g,ct,Yn.disabled,wt,Jn.disabled,Re,"clear",J,he,le,fe,ve,Et,F,Ve,We)}};if(Ae||De){let Re;if(m.prepareDrawTile(),I){const Ve=I.drapeBufferSize[0],We=I.drapeBufferSize[1];Re=I.framebufferCopyTexture,Re&&(!Re||Re.size[0]===Ve&&Re.size[1]===We)||(Re&&Re.destroy(),Re=I.framebufferCopyTexture=new r.T(w,new r.r({width:Ve,height:We}),C.RGBA8)),Re.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.copyTexSubImage2D(C.TEXTURE_2D,0,0,0,0,0,Ve,We)}Ae&&ke(!0,!1,Re),De&&ke(!1,!0,Re)}}else Ae&&ze(!0),De&&ze(!1),(Ae||De)&&m.resetStencilClippingMasks()}}},hillshade:function(m,o,c,g){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent"||m.style.disableElevatedTerrain)return;const b=m.context,w=m.terrain&&m.terrain.renderingToTexture,[C,I]=m.renderPass!=="translucent"||w?[{},g]:m.stencilConfigForOverlap(g);for(const L of I){const F=o.getTile(L);if(F.needsHillshadePrepare&&m.renderPass==="offscreen")Gl(m,F,c);else if(m.renderPass==="translucent"){const V=m.depthModeForSublayer(0,mn.ReadOnly),q=c.paint.get("hillshade-emissive-strength"),G=m.colorModeForDrapableLayerRenderPass(q),J=w&&m.terrain?m.terrain.stencilModeForRTTOverlap(L):C[L.overscaledZ];Oa(m,L,F,c,V,J,G)}}b.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,o,c,g,b,w){if(m.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const C=m.transform.projection.name==="globe",I=c.paint.get("raster-elevation")!==0,L=I&&C;if(m.renderElevatedRasterBackface&&!L)return;const F=m.context,V=F.gl,q=o.getSource(),G=function(ze,ke,Re,Ve){const We=ke.paint.get("raster-color"),ct=ze.type==="raster-array",rt=[],Et=ke.paint.get("raster-resampling"),wt=ke.paint.get("raster-color-mix");let Vt=ke.paint.get("raster-color-range");const nt=[wt[0],wt[1],wt[2],0],ft=wt[3];let Qe=Et==="nearest"?Ve.NEAREST:Ve.LINEAR;if(ct&&(rt.push("RASTER_ARRAY"),We||rt.push("RASTER_COLOR"),Et==="linear"&&rt.push("RASTER_ARRAY_LINEAR"),Qe=Ve.NEAREST,!Vt&&ze.rasterLayers)){const Mt=ze.rasterLayers.find(({id:pt})=>pt===ke.sourceLayer);Mt&&Mt.fields&&Mt.fields.range&&(Vt=Mt.fields.range)}if(Vt=Vt||[0,1],We){rt.push("RASTER_COLOR"),Re.activeTexture.set(Ve.TEXTURE2),ke.updateColorRamp(Vt);let Mt=ke.colorRampTexture;Mt||(Mt=ke.colorRampTexture=new r.T(Re,ke.colorRamp,Ve.RGBA8)),Mt.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE)}return{mix:nt,range:Vt,offset:ft,defines:rt,resampling:Qe}}(q,c,F,V);if(q instanceof r.aP&&!g.length&&!C)return;const J=c.paint.get("raster-emissive-strength"),he=m.colorModeForDrapableLayerRenderPass(J),le=m.terrain&&m.terrain.renderingToTexture,fe=!m.options.moving,ce=c.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;if(q instanceof r.aP&&!g.length&&(q.onNorthPole||q.onSouthPole)){const ze=I?m.stencilModeFor3D():Yn.disabled;return void Uo(!!q.onNorthPole,null,m,o,c,J,G,Jn.disabled,ze)}if(!g.length)return;const[ve,Ae]=q instanceof r.aP||le?[{},g]:m.stencilConfigForOverlap(g),De=Ae[Ae.length-1].overscaledZ;L&&G.defines.push("PROJECTION_GLOBE_VIEW"),I&&G.defines.push("RENDER_CUTOFF");const Ne=(ze,ke,Re)=>{for(const Ve of ze){const We=Ve.toUnwrapped(),ct=o.getTile(Ve);if(le&&(!ct||!ct.hasData()))continue;F.activeTexture.set(V.TEXTURE0);const rt=Dp(ct,q,c,G);if(!rt||!rt.texture)continue;const{texture:Et,mix:wt,offset:Vt,tileSize:nt,buffer:ft}=rt;let Qe,Mt;le?(Qe=mn.disabled,Mt=Ve.projMatrix):I?(Qe=new mn(V.LEQUAL,mn.ReadWrite,m.depthRangeFor3D),Mt=C?Float32Array.from(m.transform.expandedFarZProjMatrix):m.transform.calculateProjMatrix(We,fe)):(Qe=m.depthModeForSublayer(Ve.overscaledZ-De,c.paint.get("raster-opacity")===1?mn.ReadWrite:mn.ReadOnly,V.LESS),Mt=m.transform.calculateProjMatrix(We,fe));const pt=m.terrain&&le?m.terrain.stencilModeForRTTOverlap(Ve):ve[Ve.overscaledZ],Ot=w?0:c.paint.get("raster-fade-duration");ct.registerFadeDuration(Ot);const Ct=o.findLoadedParent(Ve,0),Lt=Sp(ct,Ct,o,m.transform,Ot);let Nt,pn;m.terrain&&m.terrain.prepareDrawTile(),F.activeTexture.set(V.TEXTURE0),Et.bind(ce,V.CLAMP_TO_EDGE),F.activeTexture.set(V.TEXTURE1),Ct?(Ct.texture&&Ct.texture.bind(ce,V.CLAMP_TO_EDGE),Nt=Math.pow(2,Ct.tileID.overscaledZ-ct.tileID.overscaledZ),pn=[ct.tileID.canonical.x*Nt%1,ct.tileID.canonical.y*Nt%1]):Et.bind(ce,V.CLAMP_TO_EDGE),"useMipmap"in Et&&F.extTextureFilterAnisotropic&&m.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const _n=m.transform;let dn;const Sn=I?Km(_n):[0,0,0,0];let yn,Gn,ti,$n,mi,Kn=0;if(L&&q instanceof r.aP&&q.coordinates.length>3)yn=Float32Array.from(r.bh(r.dr(new r.cp(0,0,0)))),Gn=Float32Array.from(_n.globeMatrix),ti=Float32Array.from(r.dm(_n)),$n=[r.ay(_n.center.lng),r.aH(_n.center.lat)],dn=q.elevatedGlobePerspectiveTransform,mi=q.elevatedGlobeGridMatrix||new Float32Array(9);else if(L){const ni=r.dn(Ve.canonical);Kn=r.dp(ni.getCenter().lat),yn=Float32Array.from(r.bh(r.dr(Ve.canonical))),Gn=Float32Array.from(_n.globeMatrix),ti=Float32Array.from(r.dm(_n)),$n=[r.ay(_n.center.lng),r.aH(_n.center.lat)],dn=[0,0],mi=Float32Array.from(r.dq(Ve.canonical,ni,Kn,_n.worldSize/_n._pixelsPerMercatorPixel))}else dn=q instanceof r.aP?q.perspectiveTransform:[0,0],yn=new Float32Array(16),Gn=new Float32Array(9),ti=new Float32Array(16),$n=[0,0],mi=new Float32Array(9);const Fn=ma(Mt,yn,Gn,ti,mi,pn||[0,0],r.ah(m.transform.zoom),$n,Sn,Nt||1,Lt,c,dn,I?c.paint.get("raster-elevation"):0,2,wt,Vt,G.range,nt,ft,J),Ci=m.isTileAffectedByFog(Ve),lr=m.getOrCreateProgram("raster",{defines:G.defines,overrideFog:Ci});if(m.uploadCommonUniforms(F,lr,We),q instanceof r.aP){const ni=q.elevatedGlobeVertexBuffer,Ai=q.elevatedGlobeIndexBuffer;if(le||!C)q.boundsBuffer&&q.boundsSegments&&lr.draw(m,V.TRIANGLES,Qe,Yn.disabled,he,Jn.disabled,Fn,c.id,q.boundsBuffer,m.quadTriangleIndexBuffer,q.boundsSegments);else if(ni&&Ai){const Hi=_n.zoom<=r.cL?q.elevatedGlobeSegments:q.getSegmentsForLongitude(_n.center.lng);Hi&&lr.draw(m,V.TRIANGLES,Qe,Yn.disabled,he,ke,Fn,c.id,ni,Ai,Hi)}}else if(L){Qe=new mn(V.LEQUAL,mn.ReadOnly,m.depthRangeFor3D);const ni=m.globeSharedBuffers;if(ni){const[Ai,Hi,Wi]=ni.getGridBuffers(Kn,!1);lr.draw(m,V.TRIANGLES,Qe,Re||pt,m.colorModeForRenderPass(),ke,Fn,c.id,Ai,Hi,Wi)}}else{const{tileBoundsBuffer:ni,tileBoundsIndexBuffer:Ai,tileBoundsSegments:Hi}=m.getTileBoundsBuffers(ct);lr.draw(m,V.TRIANGLES,Qe,pt,he,Jn.disabled,Fn,c.id,ni,Ai,Hi)}}if(!(q instanceof r.aP)&&L)for(const Ve of ze){const We=Ve.canonical.y===(1<<Ve.canonical.z)-1;Ve.canonical.y===0&&Uo(!0,Ve,m,o,c,J,G,ke,Re||Yn.disabled),We&&Uo(!1,Ve,m,o,c,J,G,ke===Jn.frontCW?Jn.backCW:Jn.frontCW,Re||Yn.disabled)}};L?Ne(Ae,m.renderElevatedRasterBackface?Jn.backCW:Jn.frontCW,m.stencilModeFor3D()):Ne(Ae,Jn.disabled,void 0),m.resetStencilClippingMasks()},"raster-particle":function(m,o,c,g,b,w){m.renderPass==="offscreen"&&function(C,I,L,F){if(!F.length)return;const V=C.context,q=V.gl,G=I.getSource();if(!(G instanceof ls))return;const J=Math.ceil(Math.sqrt(L.paint.get("raster-particle-count")));let he=L.particlePositionRGBAImage;if(!he||he.width!==J){const Ae=function(De){const Ne=De*De,ze=new Uint8Array(4*Ne),ke=function(Ve){return Ve|=0,Ve=Math.imul(2747636419^Ve,2654435769),Ve=Math.imul(Ve^Ve>>>16,2654435769),((Ve=Math.imul(Ve^Ve>>>16,2654435769))>>>0)/4294967296},Re=1/1.1;for(let Ve=0;Ve<Ne;Ve++){const We=Re*(ke(2*Ve+0)+ga),ct=Re*(ke(2*Ve+1)+ga),rt=255*We%1,Et=255*ct%1,wt=rt,Vt=ct-Et/255,nt=Et;ze[4*Ve+0]=255*(We-rt/255),ze[4*Ve+1]=255*wt,ze[4*Ve+2]=255*Vt,ze[4*Ve+3]=255*nt}return ze}(J);he=L.particlePositionRGBAImage=new r.r({width:J,height:J},Ae)}let le=L.particleFramebuffer;le?le.width!==J&&(le.destroy(),le=L.particleFramebuffer=V.createFramebuffer(J,J,!0,null)):le=L.particleFramebuffer=V.createFramebuffer(J,J,!0,null);const fe=[];for(const Ae of F){const De=I.getTile(Ae);if(!(De instanceof np))continue;const Ne=Kc(De,G,L);if(!Ne)continue;const ze=[De.tileSize,De.tileSize];let ke=L.tileFramebuffer;ke||(ke=L.tileFramebuffer=V.createFramebuffer(ze[0],ze[1],!0,null));let Re=De.rasterParticleState;Re||(Re=De.rasterParticleState=new Ey(V,Ae,ze,he));const Ve=Re.update(L.lastInvalidatedAt);Re.particleTextureDimension!==J&&Re.updateParticleTexture(Ae,he);const We=Re.targetColorTexture;Re.targetColorTexture=Re.backgroundColorTexture,Re.backgroundColorTexture=We;const ct=Re.particleTexture0;Re.particleTexture0=Re.particleTexture1,Re.particleTexture1=ct,fe.push([Ae,Ne,Re,Ve])}if(fe.length===0)return;const ce=r.q.now(),ve=L.previousDrawTimestamp?.001*(ce-L.previousDrawTimestamp):.0167;if(L.previousDrawTimestamp=ce,L.hasColorMap()){V.activeTexture.set(q.TEXTURE0+2);let Ae=L.colorRampTexture;Ae||(Ae=L.colorRampTexture=new r.T(V,L.colorRamp,q.RGBA8)),Ae.bind(q.LINEAR,q.CLAMP_TO_EDGE)}V.bindFramebuffer.set(L.tileFramebuffer.framebuffer),function(Ae,De,Ne){const ze=Ae.context,ke=ze.gl,Re=De.tileFramebuffer;ze.activeTexture.set(ke.TEXTURE0);const Ve={u_texture:0,u_opacity:1.05*(ct=De.paint.get("raster-particle-fade-opacity-factor"))/(ct+.05)},We=Ae.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var ct;for(const rt of Ne){const[,,Et,wt]=rt;Re.colorAttachment.set(Et.targetColorTexture.texture),ze.viewport.set([0,0,Re.width,Re.height]),ze.clear({color:r.am.transparent}),wt&&(Et.backgroundColorTexture.bind(ke.NEAREST,ke.CLAMP_TO_EDGE),We.draw(Ae,ke.TRIANGLES,mn.disabled,Yn.disabled,vi.alphaBlended,Jn.disabled,Ve,De.id,Ae.viewportBuffer,Ae.quadTriangleIndexBuffer,Ae.viewportSegments))}}(C,L,fe),function(Ae,De,Ne,ze){const ke=Ae.context,Re=ke.gl,Ve=Ne.tileFramebuffer,We=Ae.transform.projection.name==="globe",ct=Ne.paint.get("raster-particle-max-speed");for(const rt of ze){const[Et,wt,Vt]=rt;ke.activeTexture.set(Re.TEXTURE0+0),wt.texture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Ve.colorAttachment.set(Vt.targetColorTexture.texture);const nt=Ae.getOrCreateProgram("rasterParticleDraw",{defines:wt.defines,overrideFog:!1});ke.activeTexture.set(Re.TEXTURE0+1);const ft=wt.scalarData?[]:[0,1,2,3].map(pt=>r.dU[pt](Et));ft.push(Et);const Qe=Et.canonical.x,Mt=Et.canonical.y;for(const pt of ft){const Ot=De.getTile(We?pt.wrapped():pt);if(!Ot)continue;const Ct=Ot.rasterParticleState;if(!Ct)continue;const Lt=pt.canonical.x+(1<<pt.canonical.z)*(pt.wrap-Et.wrap),Nt=pt.canonical.y;Ct.particleTexture0.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);const pn=Yl(1,Ct.particleTexture0.size[0],[Lt-Qe,Nt-Mt],0,wt.texture.size,2,ct,wt.textureOffset,wt.scale,wt.offset);nt.draw(Ae,Re.POINTS,mn.disabled,Yn.disabled,vi.alphaBlended,Jn.disabled,pn,Ne.id,Ct.particleIndexBuffer,void 0,Ct.particleSegment)}}}(C,I,L,fe),V.bindFramebuffer.set(L.particleFramebuffer.framebuffer),function(Ae,De,Ne,ze){const ke=Ae.context,Re=ke.gl,Ve=De.paint.get("raster-particle-max-speed"),We=ze*De.paint.get("raster-particle-speed-factor")*.15,ct=function(Et){return Math.pow(Et,6)}(.01+1*De.paint.get("raster-particle-reset-rate-factor")),rt=De.particleFramebuffer;ke.viewport.set([0,0,rt.width,rt.height]);for(const Et of Ne){const[,wt,Vt]=Et;ke.activeTexture.set(Re.TEXTURE0+0),wt.texture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ke.activeTexture.set(Re.TEXTURE0+1);const nt=Vt.particleTexture0;nt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);const ft=hf(1,nt.size[0],0,wt.texture.size,Ve,We,ct,wt.textureOffset,wt.scale,wt.offset);rt.colorAttachment.set(Vt.particleTexture1.texture),ke.clear({color:r.am.transparent}),Ae.getOrCreateProgram("rasterParticleUpdate",{defines:wt.defines}).draw(Ae,Re.TRIANGLES,mn.disabled,Yn.disabled,vi.unblended,Jn.disabled,ft,De.id,Ae.viewportBuffer,Ae.quadTriangleIndexBuffer,Ae.viewportSegments)}}(C,L,fe,ve)}(m,o,c,g),m.renderPass==="translucent"&&(function(C,I,L,F,V){const q=C.context,G=q.gl,J=I.getSource().tileSize,he=5*(1-r.af(r.cx,r.cx+1,C.transform.zoom))*J+L.paint.get("raster-particle-elevation"),le=!C.options.moving,fe=C.transform.projection.name==="globe";if(!F.length)return;const[ce,ve]=C.stencilConfigForOverlap(F),Ae=[];fe&&Ae.push("PROJECTION_GLOBE_VIEW");const De=C.stencilModeFor3D();for(const Ne of ve){const ze=Ne.toUnwrapped(),ke=I.getTile(Ne);if(!ke.rasterParticleState)continue;const Re=ke.rasterParticleState,Ve=100;ke.registerFadeDuration(Ve);const We=I.findLoadedParent(Ne,0),ct=Sp(ke,We,I,C.transform,Ve);let rt,Et;C.terrain&&C.terrain.prepareDrawTile(),q.activeTexture.set(G.TEXTURE0),Re.targetColorTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),q.activeTexture.set(G.TEXTURE1),We&&We.rasterParticleState?(We.rasterParticleState.targetColorTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),rt=Math.pow(2,We.tileID.overscaledZ-ke.tileID.overscaledZ),Et=[ke.tileID.canonical.x*rt%1,ke.tileID.canonical.y*rt%1]):Re.targetColorTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE);const wt=fe?Float32Array.from(C.transform.expandedFarZProjMatrix):C.transform.calculateProjMatrix(ze,le),Vt=C.transform,nt=gf(Vt),ft=r.dn(Ne.canonical),Qe=r.dp(ft.getCenter().lat);let Mt,pt,Ot,Ct,Lt;fe?(Mt=Float32Array.from(r.bh(r.dr(Ne.canonical))),pt=Float32Array.from(Vt.globeMatrix),Ot=Float32Array.from(r.dm(Vt)),Ct=[r.ay(Vt.center.lng),r.aH(Vt.center.lat)],Lt=Float32Array.from(r.dq(Ne.canonical,ft,Qe,Vt.worldSize/Vt._pixelsPerMercatorPixel))):(Mt=new Float32Array(16),pt=new Float32Array(9),Ot=new Float32Array(16),Ct=[0,0],Lt=new Float32Array(9));const Nt=_c(wt,Mt,pt,Ot,Lt,Et||[0,0],r.ah(C.transform.zoom),Ct,nt,rt||1,ct,he),pn=C.isTileAffectedByFog(Ne),_n=C.getOrCreateProgram("rasterParticle",{defines:Ae,overrideFog:pn});if(C.uploadCommonUniforms(q,_n,ze),fe){const dn=new mn(G.LEQUAL,mn.ReadOnly,C.depthRangeFor3D),Sn=0,yn=C.globeSharedBuffers;if(yn){const[Gn,ti,$n]=yn.getGridBuffers(Qe,Sn!==0);_n.draw(C,G.TRIANGLES,dn,De,vi.alphaBlended,C.renderElevatedRasterBackface?Jn.frontCCW:Jn.backCCW,Nt,L.id,Gn,ti,$n)}}else{const dn=C.depthModeForSublayer(0,mn.ReadOnly),Sn=ce[Ne.overscaledZ],{tileBoundsBuffer:yn,tileBoundsIndexBuffer:Gn,tileBoundsSegments:ti}=C.getTileBoundsBuffers(ke);_n.draw(C,G.TRIANGLES,dn,Sn,vi.alphaBlended,Jn.disabled,Nt,L.id,yn,Gn,ti)}}C.resetStencilClippingMasks()}(m,o,c,g),m.style.map.triggerRepaint())},background:function(m,o,c,g){const b=c.paint.get("background-color"),w=c.paint.get("background-color-use-theme").constantOr("default")==="none",C=c.paint.get("background-opacity"),I=c.paint.get("background-emissive-strength"),L=c.paint.get("background-pitch-alignment")==="viewport";if(C===0)return;const F=m.context,V=F.gl,q=m.transform,G=q.tileSize,J=c.paint.get("background-pattern");let he;if(J!==void 0&&(J===null||(he=m.imageManager.getPattern(r.I.from(J.toString()),c.scope,m.style.getLut(c.scope)),!he)))return;const le=!J&&b.a===1&&C===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==le)return;const fe=Yn.disabled,ce=m.depthModeForSublayer(0,le==="opaque"?mn.ReadWrite:mn.ReadOnly),ve=m.colorModeForDrapableLayerRenderPass(I),Ae=J?"backgroundPattern":"background";let De,Ne=g;if(Ne||(De=m.getBackgroundTiles(),Ne=Object.values(De).map(ze=>ze.tileID)),J&&(F.activeTexture.set(V.TEXTURE0),m.imageManager.bind(m.context,c.scope)),L){const ze=m.getOrCreateProgram(Ae,{overrideFog:!1,overrideRtt:!0}),ke=new Float32Array(r.bx([])),Re=new r.aM(0,0,0,0,0),Ve=J?ff(ke,I,C,m,0,c.scope,he,L,{tileID:Re,tileSize:G}):Bu(ke,I,C,b.toRenderColor(w?null:c.lut));ze.draw(m,V.TRIANGLES,ce,fe,ve,Jn.disabled,Ve,c.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments)}else for(const ze of Ne){const ke=m.isTileAffectedByFog(ze),Re=m.getOrCreateProgram(Ae,{overrideFog:ke}),Ve=ze.toUnwrapped(),We=g?ze.projMatrix:m.transform.calculateProjMatrix(Ve);m.prepareDrawTile();const ct=o?o.getTile(ze):De?De[ze.key]:new Fl(ze,G,q.zoom,m),rt=J?ff(We,I,C,m,0,c.scope,he,L,{tileID:ze,tileSize:G}):Bu(We,I,C,b.toRenderColor(w?null:c.lut));m.uploadCommonUniforms(F,Re,Ve);const{tileBoundsBuffer:Et,tileBoundsIndexBuffer:wt,tileBoundsSegments:Vt}=m.getTileBoundsBuffers(ct);Re.draw(m,V.TRIANGLES,ce,fe,ve,Jn.disabled,rt,c.id,Et,wt,Vt)}},sky:function(m,o,c){const g=m._atmosphere?r.ah(m.transform.zoom):1,b=c.paint.get("sky-opacity")*g;if(b===0)return;const w=m.context,C=c.paint.get("sky-type"),I=new mn(w.gl.LEQUAL,mn.ReadOnly,[0,1]),L=m.frameCounter/1e3%1;C==="atmosphere"?m.renderPass==="offscreen"?c.needsSkyboxCapture(m)&&(function(F,V,q,G){const J=F.context,he=J.gl;let le=V.skyboxFbo;if(!le){le=V.skyboxFbo=J.createFramebuffer(32,32,!0,null),V.skyboxGeometry=new yf(J),V.skyboxTexture=J.gl.createTexture(),he.bindTexture(he.TEXTURE_CUBE_MAP,V.skyboxTexture),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_MAG_FILTER,he.LINEAR);for(let Ae=0;Ae<6;++Ae)he.texImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,he.RGBA,32,32,0,he.RGBA,he.UNSIGNED_BYTE,null)}J.bindFramebuffer.set(le.framebuffer),J.viewport.set([0,0,32,32]);const fe=V.getCenter(F,!0),ce=F.getOrCreateProgram("skyboxCapture"),ve=new Float64Array(16);r.bx(ve),r.e3(ve,ve,.5*-Math.PI),Qc(F,V,ce,ve,fe,0),r.bx(ve),r.e3(ve,ve,.5*Math.PI),Qc(F,V,ce,ve,fe,1),r.bx(ve),r.cG(ve,ve,.5*-Math.PI),Qc(F,V,ce,ve,fe,2),r.bx(ve),r.cG(ve,ve,.5*Math.PI),Qc(F,V,ce,ve,fe,3),r.bx(ve),Qc(F,V,ce,ve,fe,4),r.bx(ve),r.e3(ve,ve,Math.PI),Qc(F,V,ce,ve,fe,5),J.viewport.set([0,0,F.width,F.height])}(m,c),c.markSkyboxValid(m)):m.renderPass==="sky"&&function(F,V,q,G,J){const he=F.context,le=he.gl,fe=F.transform,ce=F.getOrCreateProgram("skybox");he.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_CUBE_MAP,V.skyboxTexture);const ve=((Ae,De,Ne,ze,ke)=>({u_matrix:Ae,u_sun_direction:De,u_cubemap:0,u_opacity:ze,u_temporal_offset:ke}))(fe.skyboxMatrix,V.getCenter(F,!1),0,G,J);F.uploadCommonUniforms(he,ce),ce.draw(F,le.TRIANGLES,q,Yn.disabled,F.colorModeForRenderPass(),Jn.backCW,ve,"skybox",V.skyboxGeometry.vertexBuffer,V.skyboxGeometry.indexBuffer,V.skyboxGeometry.segment)}(m,c,I,b,L):C==="gradient"&&m.renderPass==="sky"&&function(F,V,q,G,J){const he=F.context,le=he.gl,fe=F.transform,ce=F.getOrCreateProgram("skyboxGradient");V.skyboxGeometry||(V.skyboxGeometry=new yf(he)),he.activeTexture.set(le.TEXTURE0);let ve=V.colorRampTexture;ve||(ve=V.colorRampTexture=new r.T(he,V.colorRamp,le.RGBA8)),ve.bind(le.LINEAR,le.CLAMP_TO_EDGE);const Ae=((De,Ne,ze,ke,Re)=>({u_matrix:De,u_color_ramp:0,u_center_direction:Ne,u_radius:r.al(ze),u_opacity:ke,u_temporal_offset:Re}))(fe.skyboxMatrix,V.getCenter(F,!1),V.paint.get("sky-gradient-radius"),G,J);F.uploadCommonUniforms(he,ce),ce.draw(F,le.TRIANGLES,q,Yn.disabled,F.colorModeForRenderPass(),Jn.backCW,Ae,"skyboxGradient",V.skyboxGeometry.vertexBuffer,V.skyboxGeometry.indexBuffer,V.skyboxGeometry.segment)}(m,c,I,b,L)},debug:function(m,o,c,g,b,w){for(let C=0;C<c.length;C++)if(b){const F=new r.am(g.r*.8,g.g*.8,g.b*.8,1);Hu(m,o,c[C],g,-1,-1,w),Hu(m,o,c[C],g,-1,1,w),Hu(m,o,c[C],g,1,1,w),Hu(m,o,c[C],g,1,-1,w),Hu(m,o,c[C],F,0,0,w)}else Hu(m,o,c[C],g,0,0,w)},custom:function(m,o,c,g){const b=m.context,w=c.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&c.isDraped(o)){if(m.renderPass==="offscreen"){const C=w.prerender;if(C){if(m.setCustomLayerDefaults(),b.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;C.call(w,b.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),r.ah(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else C.call(w,b.gl,m.transform.customLayerMatrix());b.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const I=w.renderToTile;if(I){const L=g[0].canonical,F={x:L.x+g[0].wrap*(w.wrapTileId?0:1<<L.z),y:L.y,z:L.z};b.setDepthMode(mn.disabled),b.setStencilMode(Yn.disabled),b.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),I.call(w,b.gl,F),b.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),b.setColorMode(m.colorModeForRenderPass()),b.setStencilMode(Yn.disabled);const C=w.renderingMode==="3d"?new mn(m.context.gl.LEQUAL,mn.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,mn.ReadOnly);if(b.setDepthMode(C),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;w.render(b.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),r.ah(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else w.render(b.gl,m.transform.customLayerMatrix());b.setDirty(),m.setBaseState(),b.bindFramebuffer.set(null)}}else r.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(m,o,c,g){if(m.renderPass==="opaque")return;const b=c.paint.get("model-opacity").constantOr(1);if(b===0)return;const w=c.paint.get("model-cast-shadows");if(m.renderPass==="shadow"&&(!w||m.terrain&&b<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof r.ab))return;const C=m.shadowRenderer,I=c.paint.get("model-receive-shadows");C&&(C.useNormalOffset=!0,I||(C.enabled=!1));const L=()=>{C&&(C.useNormalOffset=!0,I||(C.enabled=!0))},F=o.getSource();if(m.renderPass==="light-beam"&&F.type!=="batched-model")return;if(F.type==="vector"||F.type==="geojson")return function(ce,ve,Ae,De,Ne){const ze=ce.transform;if(ze.projection.name!=="mercator")return void r.w(`Drawing 3D models for ${ze.projection.name} projection is not yet implemented`);const ke=ze.getFreeCameraOptions().position;if(!ce.modelManager)return;const Re=ce.modelManager;Ae.modelManager=Re;const Ve=ce.shadowRenderer;if(!Ae._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const We=Ae._unevaluatedLayout._values["model-id"],ct=Object.assign({},Ae.layout.get("model-id").parameters),rt=ce.style.order.indexOf(Ae.fqid);for(const Et of De){const wt=ve.getTile(Et).getBucket(Ae);if(!wt||wt.projection.name!==ze.projection.name)continue;const Vt=wt.getModelUris();Vt&&!wt.modelsRequested&&(Re.addModelsFromBucket(Vt,Ne),wt.modelsRequested=!0);const nt=Wu(Et,ze);ct.zoom=nt;const ft=We.possiblyEvaluate(ct);if(at(ce,wt,Et),ka.shadowUniformsInitialized=!1,ka.useSingleShadowCascade=!!Ve&&Ve.getMaxCascadeForTile(Et.toUnwrapped())===0,ce.renderPass==="shadow"&&Ve){if(ce.currentShadowCascade===1&&wt.isInsideFirstShadowMapFrustum)continue;const pt=ze.calculatePosMatrix(Et.toUnwrapped(),ze.worldSize);if(ka.tileMatrix.set(pt),ka.shadowTileMatrix=Float32Array.from(Ve.calculateShadowPassMatrixFromMatrix(pt)),ka.aabb.min.fill(0),ka.aabb.max[0]=ka.aabb.max[1]=r.aj,ka.aabb.max[2]=0,Ry(wt,ka,ce,Ae.scope))continue}const Qe=1<<Et.canonical.z,Mt=[((ke.x-Et.wrap)*Qe-Et.canonical.x)*r.aj,(ke.y*Qe-Et.canonical.y)*r.aj,ke.z*Qe*r.aj];ce.conflationActive&&Object.keys(wt.instancesPerModel).length>0&&ce.style.isLayerClipped(Ae,ve.getSource())&&wt.updateReplacement(Et,ce.replacementSource,rt,Ne)&&(wt.uploaded=!1,wt.upload(ce.context));for(let pt in wt.instancesPerModel){const Ot=wt.instancesPerModel[pt];Ot.features.length>0&&(pt=ft.evaluate(Ot.features[0].feature,{}));const Ct=Re.getModel(pt,Ne);if(Ct||Re.hasURLBeenRequested(pt)||wt.modelUris.includes(pt)||(wt.modelUris.push(pt),wt.modelsRequested=!1),Ct&&Ct.uploaded)for(const Lt of Ct.nodes)Fp(ce,Ae,Lt,Ot,Mt,Et,ka)}}}(m,o,c,g,F.type==="vector"?c.scope:""),void L();if(!F.loaded())return;if(F.type==="batched-model")return function(ce,ve,Ae,De){Ae.resetLayerRenderingStats(ce);const Ne=ce.context,ze=ce.transform,ke=ce.style.fog,Re=ce.shadowRenderer;if(ze.projection.name!=="mercator")return void r.w(`Drawing 3D landmark models for ${ze.projection.name} projection is not yet implemented`);const Ve=ce.transform.getFreeCameraOptions().position,We=r.b$([],[Ve.x,Ve.y,Ve.z],ce.transform.worldSize),ct=r.eb([],We),rt=r.bx([]),Et=r.ec(ze.center.lat,ze.zoom),wt=r.bn([],[1,1,1/Et]);r.bo(rt,rt,ct);const Vt=Ae.paint.get("model-opacity").constantOr(1),nt=new mn(Ne.gl.LEQUAL,mn.ReadWrite,ce.depthRangeFor3D),ft=new mn(Ne.gl.LEQUAL,mn.ReadOnly,ce.depthRangeFor3D),Qe=new r.cV([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Mt=ce.renderPass==="shadow",pt=Mt&&Re?Re.getCurrentCascadeFrustum():ze.getFrustum(ze.scaleZoom(ze.worldSize)),Ot=Ae.paint.get("model-front-cutoff"),Ct=Ot[2]<1,Lt=Uh(ce,Ae.paint.get("model-cutoff-fade-range")),Nt=Ae.getLayerRenderingStats();(function(pn,_n,dn,Sn){const yn=pn.terrain?pn.terrain.exaggeration():0,Gn=pn.transform.zoom;for(const ti of Sn){const $n=_n.getTile(ti).getBucket(dn);$n&&($n.setFilter(dn.filter),pn.conflationActive&&$n.updateReplacement(ti,pn.replacementSource),$n.evaluateScale(pn,dn),pn.terrain&&yn>0&&$n.elevationUpdate(pn.terrain,yn,ti,dn.source),$n.needsReEvaluation(pn,Gn,dn)&&$n.evaluate(dn))}})(ce,ve,Ae,De),function(){let pn,_n,dn;Ct?(pn=De.length-1,_n=-1,dn=-1):(pn=0,_n=De.length,dn=1);const Sn=new Float64Array(16),yn=r.eg(),Gn=new r.P(0,0);for(let ti=pn;ti!==_n;ti+=dn){const $n=De[ti],mi=ve.getTile($n).getBucket(Ae);if(!mi||!mi.uploaded)continue;let Kn=!1;Re&&(Kn=Re.getMaxCascadeForTile($n.toUnwrapped())===0);const Fn=ze.calculatePosMatrix($n.toUnwrapped(),ze.worldSize),Ci=mi.modelTraits;!Mt&&Ct&&(r.bi(Sn,Fn),r.ad(yn,We,Sn),Gn.x=yn[0],Gn.y=yn[1]);const lr=[];mi.setFilter(Ae.filter);for(const ni of mi.getNodesInfo()){if(ni.hiddenByReplacement||!ni.node.meshes)continue;const Ai=ni.node;let Hi=0;ce.terrain&&Ai.elevation&&(Hi=Ai.elevation*ce.terrain.exaggeration());const Wi=(()=>{const Ur=ni.aabb;return Qe.min=[...Ur.min],Qe.max=[...Ur.max],Qe.min[2]+=Hi,Qe.max[2]+=Hi,r.ad(Qe.min,Qe.min,Fn),r.ad(Qe.max,Qe.max,Fn),Qe})(),cr=ni.evaluatedScale;if(cr[0]<=1&&cr[1]<=1&&cr[2]<=1&&Wi.intersects(pt)===0)continue;if(!Mt&&Ct){const Ur=.16666666666666666;ni.cameraCollisionOpacity=We[0]>Wi.min[0]&&We[0]<Wi.max[0]&&We[1]>Wi.min[1]&&We[1]<Wi.max[1]&&We[2]*Et<Wi.max[2]&&Ai.footprint&&r.bS(Gn,Ai.footprint)?Math.max(ni.cameraCollisionOpacity-Ur,0):Math.min(1,ni.cameraCollisionOpacity+Ur)}const Nr=[...Fn],fo=Ai.anchor?Ai.anchor[0]:0,jr=Ai.anchor?Ai.anchor[1]:0;r.bo(Nr,Nr,[fo*(cr[0]-1),jr*(cr[1]-1),Hi]),r.ci(cr,r.eh)||r.cE(Nr,Nr,cr);const ei=r.az([],Nr,Ai.matrix),Mr=r.az([],ze.expandedFarZProjMatrix,ei),Fi=r.az([],ze.expandedFarZProjMatrix,Nr),Zi=r.aA([],[fo,jr,Hi,1],Mr)[2];Ai.hidden=!1;let Yi=Vt;Mt||(Ct&&(Yi*=ni.cameraCollisionOpacity,Yi*=rd(Nr,ze,ni.aabb,Ot)),Yi*=Iy(Lt,Zi)),Yi!==0?lr.push({nodeInfo:ni,depth:Zi,opacity:Yi,wvpForNode:Mr,wvpForTile:Fi,nodeModelMatrix:ei,tileModelMatrix:Nr}):Ai.hidden=!0}Mt||lr.sort((ni,Ai)=>!Ct||ni.opacity===1&&Ai.opacity===1?ni.depth<Ai.depth?-1:1:ni.opacity===1?-1:Ai.opacity===1?1:ni.depth>Ai.depth?-1:1);for(const ni of lr){const Ai=ni.nodeInfo,Hi=Ai.node;let Wi=r.az([],wt,ni.tileModelMatrix);r.az(Wi,rt,Wi);const cr=r.bi([],Wi);r.ee(cr,cr),r.cE(cr,cr,eg),Wi=r.az(Wi,Wi,Hi.matrix);const Nr=ce.renderPass==="light-beam",fo=Ae.paint.get("model-color-use-theme").constantOr("default")==="none",jr=Ci&r.em.HasMapboxMeshFeatures,ei=jr?0:Ai.evaluatedRMEA[0][2];for(let Mr=0;Mr<Hi.meshes.length;++Mr){const Fi=Hi.meshes[Mr],Zi=Mr===Hi.lightMeshIndex;let Yi=ni.wvpForNode;if(Zi){if(!Nr&&!ce.terrain&&ce.shadowRenderer){ce.currentLayer<ce.firstLightBeamLayer&&(ce.firstLightBeamLayer=ce.currentLayer);continue}Yi=ni.wvpForTile}else if(Nr)continue;const Ur={defines:[]},Vo=[];if(!Mt&&Re&&(Re.useNormalOffset=!!Fi.normalBuffer),Kt(Ur.defines,Vo,Fi,ce,fo?null:Ae.lut),jr||Ur.defines.push("DIFFUSE_SHADED"),Kn&&Ur.defines.push("SHADOWS_SINGLE_CASCADE"),Nt&&(Mt?Nt.numRenderedVerticesInShadowPass+=Fi.vertexArray.length:Nt.numRenderedVerticesInTransparentPass+=Fi.vertexArray.length),Mt){co(Fi,ni.nodeModelMatrix,ce,Ae);continue}let Rr=null;if(ke){const na=qu(ni.nodeModelMatrix,ce.transform);if(Rr=new Float32Array(na),ze.projection.name!=="globe"){const Fa=Fi.aabb.min,ic=Fi.aabb.max,[Na,tl]=ke.getOpacityForBounds(na,Fa[0],Fa[1],ic[0],ic[1]);Ur.overrideFog=Na>=qt||tl>=qt}}const Ao=Fi.material;let br;Ao.occlusionTexture&&Ao.occlusionTexture.offsetScale&&(br=Ao.occlusionTexture.offsetScale,Ur.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Po=ce.getOrCreateProgram("model",Ur);!Mt&&Re&&Re.setupShadowsFromMatrix(ni.tileModelMatrix,Po,Re.useNormalOffset),ce.uploadCommonUniforms(Ne,Po,null,Rr);const ta=Ao.pbrMetallicRoughness;ta.metallicFactor=.9,ta.roughnessFactor=.5;const Ba=Fu(new Float32Array(Yi),new Float32Array(Wi),new Float32Array(cr),new Float32Array(Hi.matrix),ce,ni.opacity,ta.baseColorFactor.toRenderColor(null),Ao.emissiveFactor,ta.metallicFactor,ta.roughnessFactor,Ao,ei,Ae,[0,0,0],br);!Zi&&(Ai.hasTranslucentParts||ni.opacity<1)&&Po.draw(ce,Ne.gl.TRIANGLES,nt,Yn.disabled,vi.disabled,Jn.backCCW,Ba,Ae.id,Fi.vertexBuffer,Fi.indexBuffer,Fi.segments,Ae.paint,ce.transform.zoom,void 0,Vo),Po.draw(ce,Ne.gl.TRIANGLES,Zi?ft:nt,Yn.disabled,Zi||ni.opacity<1||Ai.hasTranslucentParts?vi.alphaBlended:vi.unblended,Jn.backCCW,Ba,Ae.id,Fi.vertexBuffer,Fi.indexBuffer,Fi.segments,Ae.paint,ce.transform.zoom,void 0,Vo)}}}}()}(m,o,c,g),void L();if(F.type!=="model")return;const V=F.getModels(),q=[],G=m.transform.getFreeCameraOptions().position,J=r.b$([],[G.x,G.y,G.z],m.transform.worldSize);r.eb(J,J);const he=[],le=[];let fe=0;for(const ce of V){const ve=c.paint.get("model-rotation").constantOr(null),Ae=c.paint.get("model-scale").constantOr(null),De=c.paint.get("model-translation").constantOr(null);ce.computeModelMatrix(m,ve,Ae,De,!0,!0,!1);const Ne=r.bx([]),ze=r.ec(ce.position.lat,m.transform.zoom),ke=r.bn([],[1,1,1/ze]);r.bo(Ne,Ne,J),q.push({zScaleMatrix:ke,negCameraPosMatrix:Ne});for(const Re of ce.nodes)xl(m.transform,Re,ce.matrix,m.transform.expandedFarZProjMatrix,fe,he,le);fe++}if(he.sort((ce,ve)=>ve.depth-ce.depth),m.renderPass!=="shadow"){if(b===1)for(const ce of le)un(ce,m,c,q[ce.modelIndex],Yn.disabled,m.colorModeForRenderPass());else{for(const ce of le)un(ce,m,c,q[ce.modelIndex],Yn.disabled,vi.disabled);for(const ce of le)un(ce,m,c,q[ce.modelIndex],m.stencilModeFor3D(),m.colorModeForRenderPass());m.resetStencilClippingMasks()}for(const ce of he)un(ce,m,c,q[ce.modelIndex],Yn.disabled,m.colorModeForRenderPass());L()}else{for(const ce of le)co(ce.mesh,ce.nodeModelMatrix,m,c);for(const ce of he)co(ce.mesh,ce.nodeModelMatrix,m,c);L()}}},sd={line:function(m,o,c){if(m.hasElevatedBuckets=!1,m.hasNonElevatedBuckets=!1,m._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||m._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const g=o.getVisibleCoordinates();for(const b of g){const w=o.getTile(b).getBucket(m);if(w&&(w.elevationType!=="none"?m.hasElevatedBuckets=!0:m.hasNonElevatedBuckets=!0,m.hasElevatedBuckets&&m.hasNonElevatedBuckets))break}}}else m.hasNonElevatedBuckets=!0},model:function(m,o,c){const g=o.getSource();if(!g.loaded())return;if(g.type==="vector"||g.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,g.type==="vector"?m.scope:""));if(g.type==="batched-model"||g.type!=="model")return;const b=g.getModels();for(const w of b)w.upload(c.context)},raster:function(m,o,c){const g=o.getSource();if(!(g instanceof ls&&g.loaded()))return;const b=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!b)return;const w=m.paint.get("raster-array-band")||g.getInitialBand(b);if(w==null)return;const C=o.getIds().map(I=>o.getTileByID(I));for(const I of C)I.updateNeeded(b,w)&&g.prepareTile(I,b,w)},"raster-particle":function(m,o,c){const g=o.getSource();if(!(g instanceof ls&&g.loaded()))return;const b=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!b)return;const w=m.paint.get("raster-particle-array-band")||g.getInitialBand(b);if(w==null)return;const C=o.getIds().map(I=>o.getTileByID(I));for(const I of C)I.updateNeeded(b,w)&&g.prepareTile(I,b,w)}},Jl={fill:Fo};class ad{constructor(o,c,g,b,w){this.context=new yr(o,c),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=w,this._timeStamp=r.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const C=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const L of C)this._debugParams.enabledLayers[L]=!0;w.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),w.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),w.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),w.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),w.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),w.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const L of C)w.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],L);this.occlusionParams=new Dy(w),this.setup(),this.numSublayers=bs.maxUnderzooming+bs.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new r.et,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Wa(this),this._wireframeDebugCache=new Py,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const I=new r.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new r.T(this.context,I,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=b}updateTerrain(o,c){const g=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Lu(this,o));const b=this._terrain;this.transform.elevation=g?b:null,b.update(o,this.transform,c),this.transform.elevation&&!b.enabled&&(this.transform.elevation=null)}_updateFog(o){const c=o.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,b]=c.getFovAdjustedRange(this.transform._fov);if(g>b)return void(this.transform.fogCullDistSq=null);const w=g+.78*(b-g);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new Lu(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,c){if(this.width=o*r.q.devicePixelRatio,this.height=c*r.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._mergedLayers[g].resize()}setup(){const o=this.context,c=new r.ba;c.emplaceBack(0,0),c.emplaceBack(r.aj,0),c.emplaceBack(0,r.aj),c.emplaceBack(r.aj,r.aj),this.tileExtentBuffer=o.createVertexBuffer(c,r.bc.members),this.tileExtentSegments=r.bd.simpleSegment(0,0,4,2);const g=new r.ba;g.emplaceBack(0,0),g.emplaceBack(r.aj,0),g.emplaceBack(0,r.aj),g.emplaceBack(r.aj,r.aj),this.debugBuffer=o.createVertexBuffer(g,r.bc.members),this.debugSegments=r.bd.simpleSegment(0,0,4,5);const b=new r.ba;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(b,r.bc.members),this.viewportSegments=r.bd.simpleSegment(0,0,4,2);const w=new r.aZ;w.emplaceBack(0,0,0,0),w.emplaceBack(r.aj,0,r.aj,0),w.emplaceBack(0,r.aj,0,r.aj),w.emplaceBack(r.aj,r.aj,r.aj,r.aj),this.mercatorBoundsBuffer=o.createVertexBuffer(w,r.bf.members),this.mercatorBoundsSegments=r.bd.simpleSegment(0,0,4,2);const C=new r.a_;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(C);const I=new r.bb;for(const F of[0,1,3,2,0])I.emplaceBack(F);this.debugIndexBuffer=o.createIndexBuffer(I),this.emptyTexture=new r.T(o,new r.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=r.bz();const L=this.context.gl;this.stencilClearMode=new Yn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,mn.disabled,this.stencilClearMode,vi.disabled,Jn.disabled,pa(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,c,g){if(!c||this.currentStencilSource===c.id||!o.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let I=!1;for(const L of g)if(this._tileClippingMaskIDs[L.key]===void 0){I=!0;break}if(!I)return}this.currentStencilSource=c.id;const b=this.context,w=b.gl;this.nextStencilID+g.length>256&&this.clearStencil(),b.setColorMode(vi.disabled),b.setDepthMode(mn.disabled);const C=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of g){const L=c.getTile(I),F=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,{tileBoundsBuffer:V,tileBoundsIndexBuffer:q,tileBoundsSegments:G}=this.getTileBoundsBuffers(L);C.draw(this,w.TRIANGLES,mn.disabled,new Yn({func:w.ALWAYS,mask:0},F,255,w.KEEP,w.KEEP,w.REPLACE),vi.disabled,Jn.disabled,pa(I.projMatrix),"$clipping",V,q,G)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,c=this.context.gl;return new Yn({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const c=this.context.gl;return new Yn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){const c=this.context.gl,g=o.sort((C,I)=>I.overscaledZ-C.overscaledZ),b=g[g.length-1].overscaledZ,w=g[0].overscaledZ-b+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const C={};for(let I=0;I<w;I++)C[I+b]=new Yn({func:c.GEQUAL,mask:255},I+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=w,[C,g]}return[{[b]:Yn.disabled},g]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new vi([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new r.am(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vi.unblended:vi.alphaBlended}colorModeForDrapableLayerRenderPass(o){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new vi([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new r.am(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,c,g,b=!1){if(this.depthOcclusion)return new mn(this.context.gl.GREATER,mn.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!b)return mn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new mn(g||this.context.gl.LEQUAL,c,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,c=Math.ceil(this.width),g=Math.ceil(this.height),b=this.context.bindFramebuffer.get(),w=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===g||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&g!==0&&(this.depthFBO=new Kl(this.context,c,g,!1,"texture"),this.depthTexture=new r.T(this.context,{width:c,height:g,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(b),o.bindTexture(o.TEXTURE_2D,w),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,c,g,0,0,c,g,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,c)=>o+c/this._fpsHistory.length,0))}render(o,c){const g=r.q.now();this._dt=g-this._timeStamp,this._timeStamp=g,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=c;const b=this.style._mergedLayers,w=!(!this.terrain||!this.terrain.enabled),C=()=>this.style._getOrder(w).filter(nt=>{const ft=b[nt];return!(ft.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[ft.type]});let I=C(),L=!1,F=!1;for(const nt of I){const ft=b[nt];ft.type==="circle"&&(L=!0),ft.type==="symbol"&&(ft.hasInitialOcclusionOpacityProperties?F=!0:L=!0)}let V=I.map(nt=>b[nt]);const q=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(r.q.now()),this.imageManager.beginFrame();let G=0,J=!1;for(const nt in q){const ft=q[nt];ft.used&&(ft.prepare(this.context),ft.getSource().usedInConflation&&++G)}let he=!1;for(const nt of V)nt.isHidden(this.transform.zoom)||(nt.type==="clip"&&(he=!0),this.prepareLayer(nt));const le={},fe={},ce={},ve={},Ae={};for(const nt in q){const ft=q[nt];le[nt]=ft.getVisibleCoordinates(),fe[nt]=le[nt].slice().reverse(),ce[nt]=ft.getVisibleCoordinates(!0).reverse(),ve[nt]=ft.getShadowCasterCoordinates(),Ae[nt]=ft.sortCoordinatesByDistance(le[nt])}const De=nt=>{const ft=this.style.getLayerSourceCache(nt);return ft&&ft.used?ft.getSource():null};if(G||he||this._clippingActiveLastFrame){const nt=[],ft=[];let Qe=0;for(const Mt of V)this.isSourceForClippingOrConflation(Mt,De(Mt))&&(nt.push(Mt),ft.push(Qe)),Qe++;if(nt&&(he||nt.length>1)||this._clippingActiveLastFrame){he=!1;const Mt=[];for(let pt=0;pt<nt.length;pt++){const Ot=nt[pt],Ct=ft[pt],Lt=this.style.getLayerSourceCache(Ot);if(!Lt||!Lt.used||!Lt.getSource().usedInConflation&&Ot.type!=="clip")continue;let Nt=r.ev,pn=r.bQ.None;const _n=[];let dn=!0;if(Ot.type==="clip"){Nt=Ct;for(const Sn of Ot.layout.get("clip-layer-types"))pn|=Sn==="model"?r.bQ.Model:Sn==="symbol"?r.bQ.Symbol:r.bQ.FillExtrusion;for(const Sn of Ot.layout.get("clip-layer-scope"))_n.push(Sn);Ot.isHidden(this.transform.zoom)?dn=!1:he=!0}dn&&Mt.push({layer:Ot.fqid,cache:Lt,order:Nt,clipMask:pn,clipScope:_n})}this.replacementSource.setSources(Mt),J=!0}}this._clippingActiveLastFrame=he,J||this.replacementSource.clear(),this.conflationActive=J,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let nt=0;nt<V.length;nt++){const ft=V[nt],Qe=ft.cutoffRange();if(this.longestCutoffRange=Math.max(Qe,this.longestCutoffRange),Qe>0){const Mt=De(ft);Mt&&(this.minCutoffZoom=Math.max(Mt.minzoom,this.minCutoffZoom)),ft.minzoom&&(this.minCutoffZoom=Math.max(ft.minzoom,this.minCutoffZoom))}ft.is3D(w)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=nt),this._lastOcclusionLayer=nt)}const Ne=this.style&&this.style.fog;Ne?(this._fogVisible=Ne.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Ne.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(ce),this.opaquePassCutoff=0,I=C(),V=I.map(nt=>b[nt]));const ze=this._shadowRenderer;if(ze){ze.updateShadowParameters(this.transform,this.style.directionalLight);for(const nt in q)for(const ft of le[nt]){let Qe={min:0,max:0};this.terrain&&(Qe=this.terrain.getMinMaxForTile(ft)||Qe),ze.addShadowReceiver(ft.toUnwrapped(),Qe.min,Qe.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new r.eu(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new id(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ke=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Re=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ke&&!this._snow&&(this._snow=new Jr(this)),!ke&&this._snow&&(this._snow.destroy(),delete this._snow),Re&&!this._rain&&(this._rain=new Ev(this)),!Re&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!ai.has(this.context.gl))return;this.renderPass="offscreen";for(const nt of V){const ft=o.getLayerSourceCache(nt);if(!nt.hasOffscreenPass()||nt.isHidden(this.transform.zoom))continue;const Qe=ft?fe[ft.id]:void 0;(nt.type==="custom"||nt.type==="raster"||nt.type==="raster-particle"||nt.isSky()||Qe&&Qe.length)&&this.renderLayer(this,ft,nt,Qe)}this.depthRangeFor3D=[0,1-(V.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ve)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Ve=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),We=(()=>{if(c.showOverdrawInspector)return r.am.black;const nt=this.style.fog;if(nt&&this.transform.projection.supportsFog){const ft=this.style.getLut(nt.scope);if(!Ve){const Qe=nt.properties.get("color-use-theme")==="none",Mt=nt.properties.get("color").toRenderColor(Qe?null:ft).toArray01();return new r.am(...Mt)}if(Ve){const Qe=nt.properties.get("space-color-use-theme")==="none",Mt=nt.properties.get("space-color").toRenderColor(Qe?null:ft).toArray01();return new r.am(...Mt)}}return r.am.transparent})();if(this.context.clear({color:We,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ve&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const nt=V[this.currentLayer],ft=o.getLayerSourceCache(nt);if(nt.isSky())continue;const Qe=ft?(nt.is3D(w)?Ae:fe)[ft.id]:void 0;this._renderTileClippingMasks(nt,ft,Qe),this.renderLayer(this,ft,nt,Qe)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ve&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||r.ah(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const nt=V[this.currentLayer],ft=o.getLayerSourceCache(nt);nt.isSky()&&this.renderLayer(this,ft,nt,ft?fe[ft.id]:void 0)}function ct(nt,ft){let Qe;return ft&&(Qe=(nt.type==="symbol"?ce:nt.is3D(w)?Ae:fe)[ft.id]),Qe}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<I.length;){const nt=V[this.currentLayer];if(nt.type==="raster"||nt.type==="raster-particle"){const ft=o.getLayerSourceCache(nt);this.renderLayer(this,ft,nt,ct(nt,ft))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let rt=0;ze&&(rt=ze.getShadowCastingLayerCount());let Et=!1,wt=-1;for(let nt=0;nt<I.length;++nt){const ft=V[nt];ft.isHidden(this.transform.zoom)||ft.is3D(w)&&(wt=nt)}F&&wt===-1&&(L=!0);let Vt=!1;for(;this.currentLayer<I.length;){const nt=V[this.currentLayer],ft=o.getLayerSourceCache(nt);if(nt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(nt)){if(nt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!Vt&&nt.is3D(w)&&!w){const Qe=this.currentLayer,Mt=pt=>{for(this.currentLayer=0;this.currentLayer<V.length;this.currentLayer++){const Ot=V[this.currentLayer];if(Jl[Ot.type]){const Ct=this.style.getLayerSourceCache(Ot);Jl[Ot.type](this,Ct,Ot,ct(Ot,Ct),pt)}}};Mt("initialize"),Mt("reset"),this.currentLayer=Qe,Vt=!0}if(L&&!Et&&this.terrain&&!this.transform.isOrthographic&&(Et=!0,this.blitDepth()),F&&wt!==-1&&this.currentLayer===wt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(nt,ft,ft?le[ft.id]:void 0),this.renderLayer(this,ft,nt,ct(nt,ft)),!this.terrain&&ze&&rt>0&&nt.hasShadowPass()&&--rt==0&&(ze.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Qe=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Qe;this.currentLayer++){const Mt=V[this.currentLayer];if(!Mt.hasLightBeamPass())continue;const pt=o.getLayerSourceCache(Mt);this.renderLayer(this,pt,Mt,pt?fe[pt.id]:void 0)}this.currentLayer=Qe,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Qe=this.currentLayer;this.depthOcclusion=!0;for(const Mt of this.layersWithOcclusionOpacity){this.currentLayer=Mt;const pt=V[this.currentLayer],Ot=o.getLayerSourceCache(pt),Ct=Ot?fe[Ot.id]:void 0;this.terrain||this._renderTileClippingMasks(pt,Ot,Ot?le[Ot.id]:void 0),this.renderLayer(this,Ot,pt,Ct)}this.depthOcclusion=!1,this.currentLayer=Qe,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let nt=null;V.forEach(ft=>{const Qe=o.getLayerSourceCache(ft);Qe&&!ft.isHidden(this.transform.zoom)&&Qe.getVisibleCoordinates().length&&(!nt||nt.getSource().maxzoom<Qe.getSource().maxzoom)&&(nt=Qe)}),nt&&this.options.showTileBoundaries&&qi.debug(this,nt,nt.getVisibleCoordinates(),r.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&qi.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new r.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(nt){const ft=nt.transform.padding;zp(nt,nt.transform.height-(ft.top||0),3,Lp),zp(nt,ft.bottom||0,3,kp),Bp(nt,ft.left||0,3,Jm),Bp(nt,nt.transform.width-(ft.right||0),3,_a);const Qe=nt.transform.centerPoint;(function(Mt,pt,Ot,Ct){Gu(Mt,pt-1,Ot-10,2,20,Ct),Gu(Mt,pt-10,Ot-1,20,2,Ct)})(nt,Qe.x,nt.transform.height-Qe.y,Jc)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),J||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:c}=this.transform.projection,g=!c||!c.includes(o.type);if(sd[o.type]&&(g||this.terrain&&o.type==="custom")){const b=this.style.getLayerSourceCache(o);sd[o.type](o,b,this)}this.gpuTimingEnd()}renderLayer(o,c,g,b){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||g.type==="model"||g.type==="raster"||g.type==="raster-particle"||b&&b.length)&&(this.id=g.id,this.gpuTimingStart(g),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(g.type)&&(!o.terrain||g.type!=="custom")||g.type==="clip"||qi[g.type](o,c,g,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,g=this.context.gl;let b=this.gpuTimers[o.id];b||(b=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:g.createQuery()}),b.calls++,g.beginQuery(c.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,c=this.context.gl,g=c.createQuery();this.deferredRenderGpuTimeQueries.push(g),c.beginQuery(o.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const c={};for(const g in o){const b=o[g],w=this.context.extTimerQuery,C=w.getQueryParameter(b.query,this.context.gl.QUERY_RESULT)/1e6;w.deleteQueryEXT(b.query),c[g]=C}return c}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let g=0;for(const b of o)g+=c.getQueryParameter(b,c.QUERY_RESULT)/1e6,c.deleteQuery(b);return g}translatePosMatrix(o,c,g,b,w){if(!g[0]&&!g[1])return o;const C=w?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(C){const F=Math.sin(C),V=Math.cos(C);g=[g[0]*V-g[1]*F,g[0]*F+g[1]*V]}const I=[w?g[0]:r.aw(c,g[0],this.transform.zoom),w?g[1]:r.aw(c,g[1],this.transform.zoom),0],L=new Float32Array(16);return r.bo(L,o,I),L}saveTileTexture(o){const c=o.size[0],g=this._tileTextures[c];g?g.push(o):this._tileTextures[c]=[o]}getTileTexture(o){const c=this._tileTextures[o];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,c,g){const b=g===void 0?this.terrain&&this.terrain.renderingToTexture:g,w=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(w.push("LIGHTING_3D_MODE"),w.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):b||w.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||w.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(w.push("TERRAIN"),this.linearFloatFilteringSupported()&&w.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&w.push("GLOBE"),!this._fogVisible||b||c!==void 0&&!c||w.push("FOG","FOG_DITHERING"),b&&w.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&w.push("OVERDRAW_INSPECTOR"),w}getOrCreateProgram(o,c){this.cache=this.cache||{};const g=c&&c.defines||[],b=c&&c.config,w=this.currentGlobalDefines(o,c&&c.overrideFog,c&&c.overrideRtt).concat(g),C=Zc.cacheKey(yl[o],o,w,b);return this.cache[C]||(this.cache[C]=new Zc(this.context,o,yl[o],b,Ym[o],w)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,c){if(this.style.enable3dLights()){const g=this.style.directionalLight,b=this.style.ambientLight;if(g&&b){const w=((C,I,L)=>{const F=C.properties.get("direction"),V=C.properties.get("color-use-theme")==="none",q=C.properties.get("color").toRenderColor(V?null:L.getLut(C.scope)).toArray01(),G=C.properties.get("intensity"),J=I.properties.get("color-use-theme")==="none",he=I.properties.get("color").toRenderColor(J?null:L.getLut(I.scope)).toArray01(),le=I.properties.get("intensity"),fe=[F.x,F.y,F.z],ce=r.dw(he,le),ve=r.dw(q,G);return{u_lighting_ambient_color:ce,u_lighting_directional_dir:fe,u_lighting_directional_color:ve,u_ground_radiance:Jh(fe,ve,ce)}})(g,b,this.style);c.setLightsUniformValues(o,w)}}}uploadCommonUniforms(o,c,g,b,w){if(this.uploadCommonLightUniforms(o,c),this.terrain&&this.terrain.renderingToTexture)return;const C=this.style.fog;if(C){const I=C.getOpacity(this.transform.pitch),L=((F,V,q,G,J,he,le,fe,ce,ve,Ae,De)=>{const Ne=F.transform,ze=V.properties.get("color-use-theme")==="none",ke=V.properties.get("color").toRenderColor(ze?null:F.style.getLut(V.scope)).toArray01();ke[3]=G;const Re=F.frameCounter/1e3%1,[Ve,We]=V.properties.get("vertical-range");return{u_fog_matrix:q?Ne.calculateFogTileMatrix(q):De||F.identityMat,u_fog_range:V.getFovAdjustedRange(Ne._fov),u_fog_color:ke,u_fog_horizon_blend:V.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ve,We),We],u_fog_temporal_offset:Re,u_frustum_tl:J,u_frustum_tr:he,u_frustum_br:le,u_frustum_bl:fe,u_globe_pos:ce,u_globe_radius:ve,u_viewport:Ae,u_globe_transition:r.ah(Ne.zoom),u_is_globe:+(Ne.projection.name==="globe")}})(this,C,g,I,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*r.q.devicePixelRatio,this.transform.height*r.q.devicePixelRatio],b);c.setFogUniformValues(o,L)}w&&c.setCutoffUniformValues(o,w.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,c=o.createTexture();return o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,c=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const b of g)c[b.key]=o[b.key]||new Fl(b,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,c){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[o.key];return c||(this._cachedTileFogOpacities[o.key]=c=this.style.fog.getOpacityForTile(o)),c[0]>=qt||c[1]>=qt}setupDepthForOcclusion(o,c,g){const b=this.context,w=b.gl,C=!!g;var I;g||(g={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),b.activeTexture.set(w.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),g.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],g.u_depth_range_unpack=[2/((I=this.depthRangeFor3D)[1]-I[0]),-1-2*I[0]/(I[1]-I[0])],g.u_occluder_half_size=.5*this.occlusionParams.occluderSize,g.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),b.activeTexture.set(w.TEXTURE0),C||c.setTerrainUniformValues(b,g)}}function Zu(m,o){let c=!1,g=null;const b=()=>{g=null,c&&(m(),g=setTimeout(b,o),c=!1)};return()=>(c=!0,g||b(),g)}class ld{constructor(o){this._hashName=o&&encodeURIComponent(o),r.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Zu(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const c=cd(o);if(this._hashName){const g=this._hashName;let b=!1;const w=location.hash.slice(1).split("&").map(C=>{const I=C.split("=")[0];return I===g?(b=!0,`${I}=${c}`):C}).filter(C=>C);return b||w.push(`${g}=${c}`),`#${w.join("&")}`}return`#${c}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(c=g)}),(c&&c[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(g=>isNaN(Number(g)))){const g=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(c[3]||0):o.getBearing();return o.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:g,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function cd(m,o){const c=m.getCenter(),g=Math.round(100*m.getZoom())/100,b=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,b),C=Math.round(c.lng*w)/w,I=Math.round(c.lat*w)/w,L=m.getBearing(),F=m.getPitch();let V=o?`/${C}/${I}/${g}`:`${g}/${I}/${C}`;return(L||F)&&(V+="/"+Math.round(10*L)/10),F&&(V+=`/${Math.round(F)}`),V}const ud={linearity:.3,easing:r.ew(0,0,.3,1)},rg=r.l({deceleration:2500,maxSpeed:1400},ud),Ly=r.l({deceleration:20,maxSpeed:1400},ud),va=r.l({deceleration:1e3,maxSpeed:360},ud),Ka=r.l({deceleration:1e3,maxSpeed:90},ud);class hd{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,c=r.q.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new r.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)c.zoom+=w.zoomDelta||0,c.bearing+=w.bearingDelta||0,c.pitch+=w.pitchDelta||0,w.panDelta&&c.pan._add(w.panDelta),w.around&&(c.around=w.around),w.pinchAround&&(c.pinchAround=w.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(c.pan.mag()){const w=eu(c.pan.mag(),g,r.l({},rg,o||{}));b.offset=c.pan.mult(w.amount/c.pan.mag()),b.center=this._map.transform.center,Ql(b,w)}if(c.zoom){const w=eu(c.zoom,g,Ly);b.zoom=this._map.transform.zoom+w.amount,Ql(b,w)}if(c.bearing){const w=eu(c.bearing,g,va);b.bearing=this._map.transform.bearing+r.aD(w.amount,-179,179),Ql(b,w)}if(c.pitch){const w=eu(c.pitch,g,Ka);b.pitch=this._map.transform.pitch+w.amount,Ql(b,w)}if(b.zoom||b.bearing){const w=c.pinchAround===void 0?c.around:c.pinchAround;b.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function Ql(m,o){(!m.duration||m.duration<o.duration)&&(m.duration=o.duration,m.easing=o.easing)}function eu(m,o,c){const{maxSpeed:g,linearity:b,deceleration:w}=c,C=r.aD(m*b/(o/1e3),-g,g),I=Math.abs(C)/(w*b);return{easing:c.easing,duration:1e3*I,amount:C*(I/2)}}class Qs extends r.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,g,b={}){const w=Le(c.getCanvasContainer(),g),C=c.unproject(w);super(o,r.l({point:w,lngLat:C,originalEvent:g},b)),this._defaultPrevented=!1,this.target=c}}class ec extends r.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,g){const b=o==="touchend"?g.changedTouches:g.touches,w=qe(c.getCanvasContainer(),b),C=w.map(L=>c.unproject(L)),I=w.reduce((L,F,V,q)=>L.add(F.div(q.length)),new r.P(0,0));super(o,{points:w,point:I,lngLats:C,lngLat:c.unproject(I),originalEvent:g}),this._defaultPrevented=!1}}class Yu extends r.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class tu{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Yu(this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new Qs(o.type,this._map,o))}mouseup(o){this._map.fire(new Qs(o.type,this._map,o))}preclick(o){const c=r.l({},o);c.type="preclick",this._map.fire(new Qs(c.type,this._map,c))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Qs(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Qs(o.type,this._map,o))}mouseover(o){this._map.fire(new Qs(o.type,this._map,o))}mouseout(o){this._map.fire(new Qs(o.type,this._map,o))}touchstart(o){return this._firePreventable(new ec(o.type,this._map,o))}touchmove(o){this._map.fire(new ec(o.type,this._map,o))}touchend(o){this._map.fire(new ec(o.type,this._map,o))}touchcancel(o){this._map.fire(new ec(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class za{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Qs(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Qs(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ja{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(se(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;const g=c,b=this._startPos,w=this._lastPos;if(!b||!w||w.equals(g)||!this._box&&g.dist(b)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=H("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const C=Math.min(b.x,g.x),I=Math.max(b.x,g.x),L=Math.min(b.y,g.y),F=Math.max(b.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${L}px)`,this._box.style.width=I-C+"px",this._box.style.height=F-L+"px")})}mouseupWindow(o,c){if(!this._active)return;const g=this._startPos,b=c;if(g&&o.button===0){if(this.reset(),Ce(),g.x!==b.x||g.y!==b.y)return this._map.fire(new r.A("boxzoomend",{originalEvent:o})),{cameraAnimation:w=>w.fitScreenCoordinates(g,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ue(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new r.A(o,{originalEvent:c}))}}function bl(m,o){const c={};for(let g=0;g<m.length;g++)c[m[g].identifier]=o[g];return c}class og{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,c,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),g.length===this.numTouches&&(this.centroid=function(b){const w=new r.P(0,0);for(const C of b)w._add(C);return w.div(b.length)}(c),this.touches=bl(g,c)))}touchmove(o,c,g){if(this.aborted||!this.centroid)return;const b=bl(g,c);for(const w in this.touches){const C=b[w];(!C||C.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(o,c,g){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class xo{constructor(o){this.singleTap=new og(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,c,g){this.singleTap.touchstart(o,c,g)}touchmove(o,c,g){this.singleTap.touchmove(o,c,g)}touchend(o,c,g){const b=this.singleTap.touchend(o,c,g);if(b){const w=o.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(b)<30;if(w&&C||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class tc{constructor(){this._zoomIn=new xo({numTouches:1,numTaps:2}),this._zoomOut=new xo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,g){this._zoomIn.touchstart(o,c,g),this._zoomOut.touchstart(o,c,g)}touchmove(o,c,g){this._zoomIn.touchmove(o,c,g),this._zoomOut.touchmove(o,c,g)}touchend(o,c,g){const b=this._zoomIn.touchend(o,c,g),w=this._zoomOut.touchend(o,c,g);return b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(b)},{originalEvent:o})}):w?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(w)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const is={0:1,2:2},nc={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class dd{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,c){return!1}_move(o,c){return{}}mousedown(o,c){if(this._lastPoint)return;const g=ye(o);this._correctButton(o,g)&&(this._lastPoint=c,this._eventButton=g)}mousemoveWindow(o,c){const g=this._lastPoint;if(g){if(o.preventDefault(),this._eventButton!=null&&function(b,w){const C=is[w];return b.buttons===void 0||(b.buttons&C)!==C}(o,this._eventButton))this.reset();else if(this._moved||!(c.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(g,c)}}mouseupWindow(o){this._lastPoint&&ye(o)===this._eventButton&&(this._moved&&Ce(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vp extends dd{mousedown(o,c){super.mousedown(o,c),this._lastPoint&&(this._active=!0)}_correctButton(o,c){return c===0&&!o.ctrlKey}_move(o,c){return{around:c,panDelta:c.sub(o)}}}class $p extends dd{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?nc[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const g=.8*(c.x-o.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Ku extends dd{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?nc[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const g=-.5*(c.y-o.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class nu{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),r.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new r.P(0,0)}touchstart(o,c,g){return this._calculateTransform(o,c,g)}touchmove(o,c,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!r.ex())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,c,g)}}touchend(o,c,g){this._calculateTransform(o,c,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,g){g.length>0&&(this._active=!0);const b=bl(g,c),w=new r.P(0,0),C=new r.P(0,0);let I=0;for(const F in b){const V=b[F],q=this._touches[F];q&&(w._add(V),C._add(V.sub(q)),I++,b[F]=V)}if(this._touches=b,I<this._minTouches||!C.mag())return;const L=C.div(I);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Ju{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,c,g){return{}}touchstart(o,c,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,g){const b=this._firstTwoTouches;if(!b)return;o.preventDefault();const[w,C]=b,I=fd(g,c,w),L=fd(g,c,C);if(!I||!L)return;const F=this._aroundCenter?null:I.add(L).div(2);return this._move([I,L],F,o)}touchend(o,c,g){if(!this._firstTwoTouches)return;const[b,w]=this._firstTwoTouches,C=fd(g,c,b),I=fd(g,c,w);C&&I||(this._active&&Ce(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fd(m,o,c){for(let g=0;g<m.length;g++)if(m[g].identifier===c)return o[g]}function _f(m,o){return Math.log(m/o)/Math.LN2}class sg extends Ju{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){const g=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(_f(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_f(this._distance,g),pinchAround:c}}}function pd(m,o){return 180*m.angleWith(o)/Math.PI}class ky extends Ju{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c){const g=this._vector;if(this._vector=o[0].sub(o[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:pd(this._vector,g),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const c=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const b=pd(o,g);return Math.abs(b)<c}}function vf(m){return Math.abs(m.y)>Math.abs(m.x)}class zy extends Ju{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,vf(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,g){const b=this._lastPoints;if(!b)return;const w=o[0].sub(b[0]),C=o[1].sub(b[1]);return this._map._cooperativeGestures&&!r.ex()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(w,C,g.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5})}gestureBeginsVertically(o,c,g){if(this._valid!==void 0)return this._valid;const b=o.mag()>=2,w=c.mag()>=2;if(!b&&!w)return;if(!b||!w)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const C=o.y>0==c.y>0;return vf(o)&&vf(c)&&C}}const By={panStep:100,bearingStep:15,pitchStep:10};class Cv{constructor(){const o=By;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,g=0,b=0,w=0,C=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?g=-1:(o.preventDefault(),w=-1);break;case 39:o.shiftKey?g=1:(o.preventDefault(),w=1);break;case 38:o.shiftKey?b=1:(o.preventDefault(),C=-1);break;case 40:o.shiftKey?b=-1:(o.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(g=0,b=0),{cameraAnimation:I=>{const L=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:Fy,zoom:c?Math.round(L)+c*(o.shiftKey?2:1):L,bearing:I.getBearing()+g*this._bearingStep,pitch:I.getPitch()+b*this._pitchStep,offset:[-w*this._panStep,-C*this._panStep],center:I.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fy(m){return m*(2-m)}const cs=4.000244140625,Ts=1/450;class Ny{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ts,r.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||r.ex()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const g=r.q.now(),b=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,c!==0&&c%cs==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(b*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Le(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>cs?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&V!==0&&(V=1/V);const q=c(),G=Math.pow(2,q),J=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):G;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(J*V))),this._type==="wheel"&&(this._startZoom=q,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:c(),b=this._startZoom,w=this._easing;let C,I=!1;if(this._type==="wheel"&&b&&w){const F=Math.min((r.q.now()-this._lastWheelEventTime)/200,1),V=w(F);C=r.ai(b,g,V),F<1?this._frameId||(this._frameId=!0):I=!0}else C=g,I=!0;this._active=!0,I&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let L=C-c();return L*this._lastDelta<0&&(L=0),{noInertia:!0,needsRenderFrame:!I,zoomDelta:L,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=r.ey;if(this._prevEase){const g=this._prevEase,b=(r.q.now()-g.start)/g.duration,w=g.easing(b+.01)-g.easing(b),C=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-C*C);c=r.ew(C,I,.25,1)}return this._prevEase={start:r.q.now(),duration:o,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class jy{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Uy{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,c){return o.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(o.shiftKey?-1:1),around:g.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vy{constructor(){this._tap=new xo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,c,g){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=c[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(o,c,g))}touchmove(o,c,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const b=c[0],w=b.y-this._swipePoint.y;return this._swipePoint=b,o.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(o,c,g)}touchend(o,c,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(o,c,g)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $y{constructor(o,c,g){this._el=o,this._mousePan=c,this._touchPan=g}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ag{constructor(o,c,g){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Hy{constructor(o,c,g,b){this._el=o,this._touchZoom=c,this._touchRotate=g,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const oo=m=>m.zoom||m.drag||m.pitch||m.rotate;class Gy extends r.A{}class Av{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,c){const g=r.at([],c,o);this.radius=r.ae(g[2]<0?r.eA([],g,this.constants):[g[0],g[1],0])}projectRay(o){r.eA(o,o,this.constants),r.au(o,o),r.eB(o,o,this.constants);const c=r.b$([],o,this.radius);if(c[2]>0){const g=r.b$([],[0,0,1],r.bE(c,[0,0,1])),b=r.b$([],r.au([],[c[0],c[1],0]),this.radius),w=r.cU([],c,r.b$([],r.at([],r.cU([],b,g),c),2));c[0]=w[0],c[1]=w[1]}return c}}function Qu(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class qy{constructor(o,c){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hd(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Av,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),r.aV(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,w,C]of this._listeners){const I=b===document?this.handleWindowEvent:this.handleEvent;b.addEventListener(w,I,C)}}destroy(){for(const[o,c,g]of this._listeners){const b=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(c,b,g)}}_addDefaultHandlers(o){const c=this._map,g=c.getCanvasContainer();this._add("mapEvent",new tu(c,o));const b=c.boxZoom=new Ja(c,o);this._add("boxZoom",b);const w=new tc,C=new Uy;c.doubleClickZoom=new jy(C,w),this._add("tapZoom",w),this._add("clickZoom",C);const I=new Vy;this._add("tapDragZoom",I);const L=c.touchPitch=new zy(c);this._add("touchPitch",L);const F=new $p(o),V=new Ku(o);c.dragRotate=new ag(o,F,V),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",V,["mouseRotate"]);const q=new Vp(o),G=new nu(c,o);c.dragPan=new $y(g,q,G),this._add("mousePan",q),this._add("touchPan",G,["touchZoom","touchRotate"]);const J=new ky,he=new sg;c.touchZoomRotate=new Hy(g,he,J,I),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new za(c));const le=c.scrollZoom=new Ny(c,this);this._add("scrollZoom",le,["mousePan"]);const fe=c.keyboard=new Cv;this._add("keyboard",fe);for(const ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[ce]&&c[ce].enable(o[ce])}_add(o,c,g){this._handlers.push({handlerName:o,handler:c,allowed:g}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!oo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,c,g){for(const b in o)if(b!==g&&(!c||c.indexOf(b)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const c=[];for(const g of o)this._el.contains(g.target)&&c.push(g);return c}handleEvent(o,c){this._updatingCamera=!0;const g=o.type==="renderFrame",b=g?void 0:o,w={needsRenderFrame:!1},C={},I={},L=o.touches?this._getMapTouches(o.touches):void 0,F=L?qe(this._el,L):g?void 0:Le(this._el,o);for(const{handlerName:G,handler:J,allowed:he}of this._handlers){if(!J.isEnabled())continue;let le;this._blockedByActive(I,he,G)?J.reset():J[c||o.type]&&(le=J[c||o.type](o,F,L),this.mergeHandlerResult(w,C,le,G,b),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||J.isActive())&&(I[G]=J)}const V={};for(const G in this._previousActiveHandlers)I[G]||(V[G]=b);this._previousActiveHandlers=I,(Object.keys(V).length||Qu(w))&&(this._changes.push([w,C,V]),this._triggerRenderFrame()),(Object.keys(I).length||Qu(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=w;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(o,c,g,b,w){if(!g)return;r.l(o,g);const C={handlerName:b,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(c.zoom=C),g.panDelta!==void 0&&(c.drag=C),g.pitchDelta!==void 0&&(c.pitch=C),g.bearingDelta!==void 0&&(c.rotate=C)}_applyChanges(){const o={},c={},g={};for(const[b,w,C]of this._changes)b.panDelta&&(o.panDelta=(o.panDelta||new r.P(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.aroundCoord!==void 0&&(o.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),r.l(c,w),r.l(g,C);this._updateMapTransform(o,c,g),this._changes=[]}_updateMapTransform(o,c,g){const b=this._map,w=b.transform,C=ve=>[ve.x,ve.y,ve.z];if((ve=>{const Ae=this._eventsInProgress.drag;return Ae&&!this._handlersById[Ae.handlerName].isActive()})()&&!Qu(o)){const ve=w.zoom;w.cameraElevationReference="sea",this._originalZoom!=null&&w._orthographicProjectionAtLowPitch&&w.projection.name!=="globe"&&w.pitch===0?(w.cameraElevationReference="ground",w.zoom=this._originalZoom):(w.recenterOnTerrain(),w.cameraElevationReference="ground"),ve!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&b._stop(!0),!Qu(o))return void this._fireEvents(c,g,!0);let{panDelta:I,zoomDelta:L,bearingDelta:F,pitchDelta:V,around:q,aroundCoord:G,pinchAround:J}=o;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),J!==void 0&&(q=J),(L||(ve=>c[ve]&&!this._eventsInProgress[ve])("drag"))&&q&&(this._dragOrigin=C(w.pointCoordinate3D(q)),this._originalZoom=w.zoom,this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",b._stop(!0),q=q||b.transform.centerPoint,F&&(w.bearing+=F),V&&(w.pitch+=V),w._updateCameraState();const he=[0,0,0];if(I)if(w.projection.name==="mercator"){const ve=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(q).dir),Ae=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(q.sub(I)).dir);he[0]=Ae[0]-ve[0],he[1]=Ae[1]-ve[1]}else{const ve=w.pointCoordinate(q);if(w.projection.name==="globe"){I=I.rotate(-w.angle);const Ae=w._pixelsPerMercatorPixel/w.worldSize;he[0]=-I.x*r.ez(r.aY(ve.y))*Ae,he[1]=-I.y*r.ez(w.center.lat)*Ae}else{const Ae=w.pointCoordinate(q.sub(I));ve&&Ae&&(he[0]=Ae.x-ve.x,he[1]=Ae.y-ve.y)}}const le=w.zoom,fe=[0,0,0];if(L){const ve=C(G||w.pointCoordinate3D(q)),Ae={dir:r.au([],r.at([],ve,w._camera.position))};if(Ae.dir[2]<0){const De=w.zoomDeltaToMovement(ve,L);r.b$(fe,Ae.dir,De)}}const ce=r.cU(he,he,fe);w._translateCameraConstrained(ce),L&&Math.abs(w.zoom-le)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,g,!0)}_fireEvents(o,c,g){const b=oo(this._eventsInProgress),w=oo(o),C={};for(const V in o){const{originalEvent:q}=o[V];this._eventsInProgress[V]||(C[`${V}start`]=q),this._eventsInProgress[V]=o[V]}!b&&w&&this._fireEvent("movestart",w.originalEvent);for(const V in C)this._fireEvent(V,C[V]);w&&this._fireEvent("move",w.originalEvent);for(const V in o){const{originalEvent:q}=o[V];this._fireEvent(V,q)}const I={};let L;for(const V in this._eventsInProgress){const{handlerName:q,originalEvent:G}=this._eventsInProgress[V];this._handlersById[q].isActive()||(delete this._eventsInProgress[V],L=c[q]||G,I[`${V}end`]=L)}for(const V in I)this._fireEvent(V,I[V]);const F=oo(this._eventsInProgress);if(g&&(b||w)&&!F){this._updatingCamera=!0;const V=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;V?(q(V.bearing||this._map.getBearing())&&(V.bearing=0),this._map.easeTo(V,{originalEvent:L})):(this._map.fire(new r.A("moveend",{originalEvent:L})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new r.A(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Gy("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const eh="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Wy extends r.E{constructor(o,c){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,r.aV(["_renderFrameCallback"],this)}getCenter(){return new r.cd(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,g){return o=r.P.convert(o).mult(-1),this.panTo(this.transform.center,r.l({offset:o},c),g)}panTo(o,c,g){return this.easeTo(r.l({center:o},c),g)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,g){return this.easeTo(r.l({zoom:o},c),g)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,g){return this.easeTo(r.l({bearing:o},c),g)}resetNorth(o,c){return this.rotateTo(0,r.l({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(r.l({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=r.aG.convert(o);const g=c&&c.bearing||0,b=c&&c.pitch||0,w=o.getNorthWest(),C=o.getSouthEast();return this._cameraForBounds(this.transform,w,C,g,b,c)}_extendPadding(o){const c={top:0,right:0,bottom:0,left:0};return o==null?r.l({},c,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:r.l({},c,o)}_extendCameraOptions(o){return(o=r.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,c){const g=c.max[0]-c.min[0],b=c.max[1]-c.min[1];return g/b>o.aspect?g/(2*Math.tan(.5*o.fovX)*o.aspect):b/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,c,g,b,w,C){const I=o.clone(),L=this._extendCameraOptions(C);I.bearing=b,I.pitch=w;const F=r.cd.convert(c),V=r.cd.convert(g),q=.5*(F.lat+V.lat),G=.5*(F.lng+V.lng),J=r.eC(q,G),he=r.au([],J),le=r.au([],r.bG([],he,[0,1,0])),fe=r.bG([],le,he),ce=[le[0],le[1],le[2],0,fe[0],fe[1],fe[2],0,he[0],he[1],he[2],0,0,0,0,1],ve=[J,r.eC(F.lat,F.lng),r.eC(V.lat,F.lng),r.eC(V.lat,V.lng),r.eC(F.lat,V.lng),r.eC(q,F.lng),r.eC(q,V.lng),r.eC(F.lat,G),r.eC(V.lat,G)];let Ae=r.cV.fromPoints(ve.map(pt=>[r.bE(le,pt),r.bE(fe,pt),r.bE(he,pt)]));const De=r.ad([],Ae.center,ce);r.eD(De)===0&&r.eE(De,0,0,1),r.au(De,De),r.b$(De,De,r.aE),I.center=r.eF(De);const Ne=I.getWorldToCameraMatrix(),ze=r.bi(new Float64Array(16),Ne);Ae=r.cV.applyTransform(Ae,r.az([],Ne,ce));const ke=this._extendAABB(Ae,I,L,b);if(!ke)return void r.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ae=ke,r.ad(De,De,Ne);const Re=.5*(Ae.max[2]-Ae.min[2]),Ve=this._minimumAABBFrustumDistance(I,Ae),We=r.b$([],[0,0,1],Re),ct=r.cU(We,De,We),rt=Ve+(I.pitch===0?0:r.bD(De,ct)),Et=I.globeCenterInViewSpace,wt=r.at([],De,[Et[0],Et[1],Et[2]]);r.au(wt,wt),r.b$(wt,wt,rt);const Vt=r.cU([],De,wt);r.ad(Vt,Vt,ze);const nt=r.eq/r.aE,ft=r.ae(Vt),Qe=r.c6(Math.max(ft*nt-r.eq,Number.EPSILON),0),Mt=Math.min(I.zoomFromMercatorZAdjusted(Qe),L.maxZoom);return Mt>.5*(r.cL+r.cx)?(I.setProjection({name:"mercator"}),I.zoom=Mt,this._cameraForBounds(I,c,g,b,w,C)):{center:I.center,zoom:Mt,bearing:b,pitch:w}}_extendAABB(o,c,g,b){const w=.5*((g.padding.left||0)+(g.padding.right||0)),C=.5*((g.padding.top||0)+(g.padding.bottom||0)),I=C,L=w,F=w,V=C,q=c.width-(L+F),G=c.height-(I+V),J=r.at([],o.max,o.min),he=Math.min(q/J[0],G/J[1]),le=Math.min(c.scaleZoom(c.scale*he),g.maxZoom);if(isNaN(le))return null;const fe=c.scale/c.zoomScale(le),ce=new r.cV([o.min[0]-L*fe,o.min[1]-V*fe,o.min[2]],[o.max[0]+F*fe,o.max[1]+I*fe,o.max[2]]),ve=(typeof g.offset.x=="number"&&typeof g.offset.y=="number"?new r.P(g.offset.x,g.offset.y):r.P.convert(g.offset)).rotate(-r.al(b));return ce.center[0]-=ve.x*fe,ce.center[1]+=ve.y*fe,ce}queryTerrainElevation(o,c){const g=this.transform.elevation;return g?(c=r.l({},{exaggerated:!0},c),g.getAtPoint(r.ac.fromLngLat(o),null,c.exaggerated)):null}_cameraForBounds(o,c,g,b,w,C){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,c,g,b,w,C);const I=o.clone(),L=this._extendCameraOptions(C);I.bearing=b,I.pitch=w;const F=r.cd.convert(c),V=r.cd.convert(g),q=new r.cd(F.lng,V.lat),G=new r.cd(V.lng,F.lat),J=I.project(F),he=I.project(V),le=this.queryTerrainElevation(F),fe=this.queryTerrainElevation(V),ce=this.queryTerrainElevation(q),ve=this.queryTerrainElevation(G),Ae=[[J.x,J.y,Math.min(le||0,fe||0,ce||0,ve||0)],[he.x,he.y,Math.max(le||0,fe||0,ce||0,ve||0)]];let De=r.cV.fromPoints(Ae);const Ne=I.getWorldToCameraMatrix(),ze=r.bi(new Float64Array(16),Ne);De=r.cV.applyTransform(De,Ne);const ke=this._extendAABB(De,I,L,b);if(!ke)return void r.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");De=ke;const Re=.5*r.at([],De.max,De.min)[2],Ve=this._minimumAABBFrustumDistance(I,De),We=[0,0,1,0];r.aA(We,We,Ne),r.eG(We,We);const ct=r.b$([],We,Ve+Re),rt=r.cU([],De.center,ct);r.ad(De.center,De.center,ze),r.ad(rt,rt,ze);const Et=I.unproject(new r.P(De.center[0],De.center[1])),wt=r.eH(I.projection,Et),Vt=Math.pow(2,wt),nt=Math.min(I._zoomFromMercatorZ(rt[2]*I.pixelsPerMeter*Vt/I.worldSize),L.maxZoom);return I.mercatorFromTransition&&nt<.5*(r.cL+r.cx)?(I.setProjection({name:"globe"}),I.zoom=nt,this._cameraForBounds(I,c,g,b,w,C)):{center:Et,zoom:nt,bearing:b,pitch:w}}fitBounds(o,c,g){const b=this.cameraForBounds(o,c);return this._fitInternal(b,c,g)}fitScreenCoordinates(o,c,g,b,w){const C=r.P.convert(o),I=r.P.convert(c),L=new r.P(Math.min(C.x,I.x),Math.min(C.y,I.y)),F=new r.P(Math.max(C.x,I.x),Math.max(C.y,I.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(C,I))return this;const V=this.transform.pointLocation3D(L),q=this.transform.pointLocation3D(F),G=this.transform.pointLocation3D(new r.P(L.x,F.y)),J=this.transform.pointLocation3D(new r.P(F.x,L.y)),he=[Math.min(V.lng,q.lng,G.lng,J.lng),Math.min(V.lat,q.lat,G.lat,J.lat)],le=[Math.max(V.lng,q.lng,G.lng,J.lng),Math.max(V.lat,q.lat,G.lat,J.lat)],fe=b&&b.pitch?b.pitch:this.getPitch(),ce=this._cameraForBounds(this.transform,he,le,g,fe,b);return this._fitInternal(ce,b,w)}_fitInternal(o,c,g){return o?(c=r.l(o,c)).linear?this.easeTo(c,g):this.flyTo(c,g):this}jumpTo(o,c){this.stop();const g=o.preloadOnly?this.transform.clone():this.transform;let b=!1,w=!1,C=!1;"zoom"in o&&g.zoom!==+o.zoom&&(b=!0,g.zoom=+o.zoom),o.center!==void 0&&(g.center=r.cd.convert(o.center)),"bearing"in o&&g.bearing!==+o.bearing&&(w=!0,g.bearing=+o.bearing),"pitch"in o&&g.pitch!==+o.pitch&&(C=!0,g.pitch=+o.pitch);const I=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!g.isPaddingEqual(I))if(o.retainPadding===!1){const L=g.clone();L.padding=I,g.setLocationAtPoint(g.center,L.centerPoint)}else g.padding=I;return o.preloadOnly?(this._preloadTiles(g),this):(this.fire(new r.A("movestart",c)).fire(new r.A("move",c)),b&&this.fire(new r.A("zoomstart",c)).fire(new r.A("zoom",c)).fire(new r.A("zoomend",c)),w&&this.fire(new r.A("rotatestart",c)).fire(new r.A("rotate",c)).fire(new r.A("rotateend",c)),C&&this.fire(new r.A("pitchstart",c)).fire(new r.A("pitch",c)).fire(new r.A("pitchend",c)),this.fire(new r.A("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||r.w(eh),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,c){const g=this.transform;if(!g.projection.supportsFreeCamera)return r.w(eh),this;this.stop();const b=g.zoom,w=g.pitch,C=g.bearing;g.setFreeCameraOptions(o);const I=b!==g.zoom,L=w!==g.pitch,F=C!==g.bearing;return this.fire(new r.A("movestart",c)).fire(new r.A("move",c)),I&&this.fire(new r.A("zoomstart",c)).fire(new r.A("zoom",c)).fire(new r.A("zoomend",c)),F&&this.fire(new r.A("rotatestart",c)).fire(new r.A("rotate",c)).fire(new r.A("rotateend",c)),L&&this.fire(new r.A("pitchstart",c)).fire(new r.A("pitch",c)).fire(new r.A("pitchend",c)),this.fire(new r.A("moveend",c)),this}easeTo(o,c){this._stop(!1,o.easeId),((o=r.l({offset:[0,0],duration:500,easing:r.ey},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const g=this.transform,b=this.getZoom(),w=this.getBearing(),C=this.getPitch(),I=this.getPadding(),L="zoom"in o?+o.zoom:b,F="bearing"in o?this._normalizeBearing(o.bearing,w):w,V="pitch"in o?+o.pitch:C,q=this._extendPadding(o.padding),G=r.P.convert(o.offset);let J,he,le;if(g.projection.name==="globe"){const We=r.ac.fromLngLat(g.center),ct=G.rotate(-g.angle);We.x+=ct.x/g.worldSize,We.y+=ct.y/g.worldSize;const rt=We.toLngLat(),Et=r.cd.convert(o.center||rt);this._normalizeCenter(Et),J=g.centerPoint.add(ct),he=new r.P(We.x,We.y).mult(g.worldSize),le=new r.P(r.ay(Et.lng),r.aH(Et.lat)).mult(g.worldSize).sub(he)}else{J=g.centerPoint.add(G);const We=g.pointLocation(J),ct=r.cd.convert(o.center||We);this._normalizeCenter(ct),he=g.project(We),le=g.project(ct).sub(he)}const fe=g.zoomScale(L-b);let ce,ve;o.around&&(ce=r.cd.convert(o.around),ve=g.locationPoint(ce));const Ae=this._zooming||L!==b,De=this._rotating||w!==F,Ne=this._pitching||V!==C,ze=!g.isPaddingEqual(q),ke=o.retainPadding===!1?g.clone():g,Re=We=>ct=>{if(Ae&&(We.zoom=r.ai(b,L,ct)),De&&(We.bearing=r.ai(w,F,ct)),Ne&&(We.pitch=r.ai(C,V,ct)),ze&&(ke.interpolatePadding(I,q,ct),J=ke.centerPoint.add(G)),ce)We.setLocationAtPoint(ce,ve);else{const rt=We.zoomScale(We.zoom-b),Et=L>b?Math.min(2,fe):Math.max(.5,fe),wt=Math.pow(Et,1-ct),Vt=We.unproject(he.add(le.mult(ct*wt)).mult(rt));We.setLocationAtPoint(We.renderWorldCopies?Vt.wrap():Vt,J)}return o.preloadOnly||this._fireMoveEvents(c),We};if(o.preloadOnly){const We=this._emulate(Re,o.duration,g);return this._preloadTiles(We),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ae,this._rotating=De,this._pitching=Ne,this._padding=ze,this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,Ve),this._ease(Re(g),We=>{g.cameraElevationReference==="sea"&&g.recenterOnTerrain(),this._afterEase(c,We)},o),this}_prepareEase(o,c,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||g.moving||this.fire(new r.A("movestart",o)),this._zooming&&!g.zooming&&this.fire(new r.A("zoomstart",o)),this._rotating&&!g.rotating&&this.fire(new r.A("rotatestart",o)),this._pitching&&!g.pitching&&this.fire(new r.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new r.A("move",o)),this._zooming&&this.fire(new r.A("zoom",o)),this._rotating&&this.fire(new r.A("rotate",o)),this._pitching&&this.fire(new r.A("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new r.A("zoomend",o)),b&&this.fire(new r.A("rotateend",o)),w&&this.fire(new r.A("pitchend",o)),this.fire(new r.A("moveend",o))}flyTo(o,c){if(this._prefersReducedMotion(o)){const pt=r.aF(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(pt,c)}this.stop(),o=r.l({offset:[0,0],speed:1.2,curve:1.42,easing:r.ey},o);const g=this.transform,b=this.getZoom(),w=this.getBearing(),C=this.getPitch(),I=this.getPadding(),L="zoom"in o?r.aD(+o.zoom,g.minZoom,g.maxZoom):b,F="bearing"in o?this._normalizeBearing(o.bearing,w):w,V="pitch"in o?+o.pitch:C,q=this._extendPadding(o.padding),G=g.zoomScale(L-b),J=r.P.convert(o.offset);let he=g.centerPoint.add(J);const le=g.pointLocation(he),fe=r.cd.convert(o.center||le);this._normalizeCenter(fe);const ce=g.project(le),ve=g.project(fe).sub(ce);let Ae=o.curve;const De=Math.max(g.width,g.height),Ne=De/G,ze=ve.mag();if("minZoom"in o){const pt=r.aD(Math.min(o.minZoom,b,L),g.minZoom,g.maxZoom),Ot=De/g.zoomScale(pt-b);Ae=Math.sqrt(Ot/ze*2)}const ke=Ae*Ae;function Re(pt){const Ot=(Ne*Ne-De*De+(pt?-1:1)*ke*ke*ze*ze)/(2*(pt?Ne:De)*ke*ze);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function Ve(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function We(pt){return(Math.exp(pt)+Math.exp(-pt))/2}const ct=Re(0);let rt=function(pt){return We(ct)/We(ct+Ae*pt)},Et=function(pt){return De*((We(ct)*(Ve(Ot=ct+Ae*pt)/We(Ot))-Ve(ct))/ke)/ze;var Ot},wt=(Re(1)-ct)/Ae;if(Math.abs(ze)<1e-6||!isFinite(wt)){if(Math.abs(De-Ne)<1e-6)return this.easeTo(o,c);const pt=Ne<De?-1:1;wt=Math.abs(Math.log(Ne/De))/Ae,Et=function(){return 0},rt=function(Ot){return Math.exp(pt*Ae*Ot)}}o.duration="duration"in o?+o.duration:1e3*wt/("screenSpeed"in o?+o.screenSpeed/Ae:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Vt=w!==F,nt=V!==C,ft=!g.isPaddingEqual(q),Qe=o.retainPadding===!1?g.clone():g,Mt=pt=>Ot=>{const Ct=Ot*wt,Lt=1/rt(Ct);pt.zoom=Ot===1?L:b+pt.scaleZoom(Lt),Vt&&(pt.bearing=r.ai(w,F,Ot)),nt&&(pt.pitch=r.ai(C,V,Ot)),ft&&(Qe.interpolatePadding(I,q,Ot),he=Qe.centerPoint.add(J));const Nt=Ot===1?fe:pt.unproject(ce.add(ve.mult(Et(Ct))).mult(Lt));return pt.setLocationAtPoint(pt.renderWorldCopies?Nt.wrap():Nt,he),pt._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(c),pt};if(o.preloadOnly){const pt=this._emulate(Mt,o.duration,g);return this._preloadTiles(pt),this}return this._zooming=!0,this._rotating=Vt,this._pitching=nt,this._padding=ft,this._prepareEase(c,!1),this._ease(Mt(g),()=>this._afterEase(c),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,c)}if(!o){const g=this.handlers;g&&g.stop(!1)}return this}_ease(o,c,g){g.animate===!1||g.duration===0?(o(1),c()):(this._easeStart=r.q.now(),this._easeOptions=g,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((r.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,c){o=r.bX(o,-180,180);const g=Math.abs(o-c);return Math.abs(o-360-c)<g&&(o-=360),Math.abs(o+360-c)<g&&(o+=360),o}_normalizeCenter(o){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const g=o.lng-c.center.lng;o.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&r.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,c,g){const b=Math.ceil(15*c/1e3),w=[],C=o(g.clone());for(let I=0;I<=b;I++){const L=C(I/b);w.push(L.clone())}return w}_preloadTiles(o,c){}}class xf{constructor(o={}){this.options=o,r.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const c=this.options&&this.options.compact,g=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=H("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",g);const b=H("span","mapboxgl-ctrl-icon",this._compactButton);return b.setAttribute("aria-hidden","true"),b.setAttribute("title",g),this._innerContainer=H("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.e.ACCESS_TOKEN}];if(o){const g=c.reduce((b,w,C)=>(w.value&&(b+=`${w.key}=${w.value}${C<c.length-1?"&":""}`),b),"?");o.href=`${r.e.FEEDBACK_URL}/${g}#${cd(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const c=this._map.style._mergedSourceCaches;for(const b in c){const w=c[b];if(w.used){const C=w.getSource();C.attribution&&o.indexOf(C.attribution)<0&&o.push(C.attribution)}}o.sort((b,w)=>b.length-w.length),o=o.filter((b,w)=>{for(let C=w+1;C<o.length;C++)if(o[C].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const g=o.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,o.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class th{constructor(){r.aV(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=H("div","mapboxgl-ctrl");const c=H("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const c in o){const g=o[c].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class wl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){const c=this._currentlyRunning,g=c?this._queue.concat(c):this._queue;for(const b of g)if(b.id===o)return void(b.cancelled=!0)}run(o=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const g of c)if(!g.cancelled&&(g.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Hp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const c=r.dk((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,c,g){this._start=this.getValue(c),this._end=o,this._startTime=c,this._endTime=c+g}}const bo={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class Sl extends r.A{constructor(o,c,g,b){const{point:w,lngLat:C,originalEvent:I,target:L}=o;super(o.type,{point:w,lngLat:C,originalEvent:I,target:L}),this.preventDefault=()=>{o.preventDefault()},this.id=c,this.interaction=g,this.feature=b}}class Qa{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,c){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const g=c.filter;let b=c.type;g&&this.filters.set(o,r.b3(g)),b==="mouseover"&&(b="mouseenter"),b==="mouseout"&&(b="mouseleave");const w=this.interactionsByType.get(b)||new Map;b==="mouseenter"||b==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,c)):w.size===0&&this.map.on(b,this.handleType),w.size===0&&this.interactionsByType.set(b,w),w.set(o,c),this.typeById.set(o,b)}get(o){const c=this.typeById.get(o);if(!c)return;const g=this.interactionsByType.get(c);return g?g.get(o):void 0}remove(o){const c=this.typeById.get(o);if(!c)return;this.typeById.delete(o),this.filters.delete(o);const g=this.interactionsByType.get(c);g&&(g.delete(o),c==="mouseenter"||c==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):g.size===0&&this.map.off(c,this.handleType))}queryTargets(o,c){const g=[];for(const[b,w]of c)w.target&&g.push({targetId:b,target:w.target,filter:this.filters.get(b)});return this.map.style.queryRenderedTargets(o,g,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const c=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());c.length&&(o.type="mouseenter",this.handleType(o,c));const g=new Map;for(const[b,{feature:w}]of this.prevHoveredFeatures)this.hoveredFeatures.has(b)||g.set(w.id,w);g.size&&(o.type="mouseleave",this.handleType(o,Array.from(g.values())))}handleOut(o){const c=Array.from(this.hoveredFeatures.values()).map(({feature:g})=>g);c.length&&(o.type="mouseleave",this.handleType(o,c)),this.hoveredFeatures.clear()}handleType(o,c){const g=Array.from(this.interactionsByType.get(o.type)).reverse(),b=!!c;c=c||this.queryTargets(o.point,g);const w=o.type==="mouseenter";let C=!1;const I=new Set;for(const L of c){for(const[F,V]of g){if(!V.target)continue;const q=L.variants?L.variants[F]:null;if(q){for(const G of q){if($d(G,L,I,F))continue;const J=new r.df(L,G),he=Rh(G,L,F);b&&(J.state=this.map.getFeatureState(J));const le=w?this.prevHoveredFeatures.get(he):null,fe=new Sl(o,F,V,J),ce=le?le.stop:V.handler(fe);if(w&&this.hoveredFeatures.set(he,{feature:L,stop:ce}),ce!==!1){C=!0;break}}if(C)break}}if(C)break}if(!C)for(const[L,F]of g){const{handler:V,target:q}=F;if(!q&&V(new Sl(o,L,F,null))!==!1)break}}}function bf(m,o){if(Array.isArray(m)&&Array.isArray(o)){const c=new Set(m),g=new Set(o);return c.size===g.size&&m.every(b=>g.has(b))}return r.bv(m,o)}const Mv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},Rv={showCompass:!0,showZoom:!0,visualizePitch:!1};class el{constructor(o,c,g=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new $p({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,g&&(this.mousePitch=new Ku({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),r.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(o,c){this.mouseRotate.mousedown(o,c),this.mousePitch&&this.mousePitch.mousedown(o,c),se()}move(o,c){const g=this.map,b=this.mouseRotate.mousemoveWindow(o,c),w=b&&b.bearingDelta;if(w&&g.setBearing(g.getBearing()+w),this.mousePitch){const C=this.mousePitch.mousemoveWindow(o,c),I=C&&C.pitchDelta;I&&g.setPitch(g.getPitch()+I)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ue(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(r.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Le(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Le(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=qe(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=qe(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Xy(m,o,c){if(m=new r.cd(m.lng,m.lat),o){const g=new r.cd(m.lng-360,m.lat),b=new r.cd(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-c.center.lng)/360),C=c.locationPoint3D(m).distSqr(o),I=o.x<0||o.y<0||o.x>c.width||o.y>c.height;c.locationPoint3D(g).distSqr(o)<C&&(I||Math.abs(g.lng-c.center.lng)<w)?m=g:c.locationPoint3D(b).distSqr(o)<C&&(I||Math.abs(b.lng-c.center.lng)<w)&&(m=b)}for(;Math.abs(m.lng-c.center.lng)>180;){const g=c.locationPoint3D(m);if(g.x>=0&&g.y>=0&&g.x<=c.width&&g.y<=c.height)break;m.lng>c.center.lng?m.lng-=360:m.lng+=360}return m}const wf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},ea={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Co extends r.E{constructor(o,c){super(),(o instanceof HTMLElement||c)&&(o=r.l({element:o},c)),r.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:g="center",color:b="#3FB1CE",scale:w=1,draggable:C=!1,clickTolerance:I=0,rotation:L=ea.rotation,rotationAlignment:F=ea.rotationAlignment,pitchAlignment:V=ea.pitchAlignment,occludedOpacity:q=ea.occludedOpacity,altitude:G=ea.altitude}=o||{};this._anchor=g,this._color=b,this._scale=w,this._draggable=C,this._clickTolerance=I,this._rotation=L,this._rotationAlignment=F,this._pitchAlignment=V,this._occludedOpacity=q,this._altitude=G,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=r.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=r.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",le=>{le.preventDefault()}),this._element.addEventListener("mousedown",le=>{le.preventDefault()});const J=this._element.classList;for(const le in wf)J.remove(`mapboxgl-marker-anchor-${le}`);J.add(`mapboxgl-marker-anchor-${this._anchor}`);const he=o&&o.className?o.className.trim().split(/\s+/):[];J.add(...he),this._popup=null}_createDefaultMarker(){const o=H("div"),c=K("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const g=K("radialGradient",{id:"shadowGradient"},K("defs",{},c));K("stop",{offset:"10%","stop-opacity":.4},g),K("stop",{offset:"100%","stop-opacity":.05},g),K("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c)}return K("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),K("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),K("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=r.cd.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||ea.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const c=o.code,g=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(o){const c=o.originalEvent.target,g=this._element;this._popup&&(c===g||g.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,c=this._pos;if(!o||!c)return!1;const g=o.unproject(c,this._altitude),b=o.getFreeCameraOptions();if(!b.position)return!1;const w=b.position.toLngLat();return w.distanceTo(g)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const c=this._pos;if(!c||c.x<0||c.x>o.transform.width||c.y<0||c.y>o.transform.height)return void this._clearFadeTimer();const g=o.unproject(c,this._altitude);let b;o._showingGlobe()&&r.eK(o.transform,this._lngLat)?b=0:(b=1-o._queryFogOpacity(g),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${wf[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const o=this._pos,c=this._map,g=this.getPitchAlignment();if(!c||!o||g!=="map")return"";if(!c._showingGlobe()){const L=c.getPitch();return L?`rotateX(${L}deg)`:""}const b=r.cJ(r.eL(c.transform,this._lngLat)),w=o.sub(r.eM(c.transform)),C=Math.abs(w.x)+Math.abs(w.y);if(C===0)return"";const I=b/C;return`rotateX(${-w.y*I}deg) rotateY(${w.x*I}deg)`}_calculateZTransform(){const o=this._pos,c=this._map;if(!c||!o)return"";let g=0;const b=this.getRotationAlignment();if(b==="map")if(c._showingGlobe()){const w=c.project(new r.cd(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),C=c.project(new r.cd(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(w);g=r.cJ(Math.atan2(C.y,C.x))-90}else g=-c.getBearing();else if(b==="horizon"){const w=r.af(4,6,c.getZoom()),C=r.eM(c.transform);C.y+=w*c.transform.height;const I=o.sub(C),L=r.cJ(Math.atan2(I.y,I.x));g=(L>90?L-270:L+90)*(1-w)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=Xy(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=r.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const c=this._map;if(!c)return;const g=this._pointerdownPos,b=this._positionDelta;if(g&&b){if(!this._isDragging){const w=this._clickTolerance||c._clickTolerance;if(o.point.dist(g)<w)return;this._isDragging=!0}this._pos=o.point.sub(b),this._lngLat=c.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.A("dragstart"))),this.fire(new r.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new r.A("dragend")),this._state="inactive"}_addDragHandler(o){const c=this._map,g=this._pos;c&&g&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(g),this._pointerdownPos=o.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const c=this._map;return c&&(o?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||ea.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||ea.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||ea.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||ea.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Gp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Sf={maxWidth:100,unit:"metric"},Sc={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},xa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},Es=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function iu(m=new r.P(0,0),o="bottom"){if(typeof m=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(o){case"top":return new r.P(0,m);case"top-left":return new r.P(c,c);case"top-right":return new r.P(-c,c);case"bottom":return new r.P(0,-m);case"bottom-left":return new r.P(c,-c);case"bottom-right":return new r.P(-c,-c);case"left":return new r.P(m,0);case"right":return new r.P(-m,0)}return new r.P(0,0)}return m instanceof r.P||Array.isArray(m)?r.P.convert(m):r.P.convert(m[o]||[0,0])}return{version:S,supported:U.supported,setRTLTextPlugin:r.eN,getRTLTextPluginStatus:r.eO,Map:class extends Wy{constructor(m){R.mark(A.create);const o=m;if((m=r.l({},Mv,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&r.eI(window)&&(m.antialias=!1,r.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new jh(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies,null,null),m),this._repaint=!!m.repaint,this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new wl,this._domRenderTaskQueue=new wl,this._controls=[],this._markers=[],this._popups=[],this._mapId=r.a$(),this._locale=r.l({},bo,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._tessellationStep=m.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=m.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Hp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=m.scaleFactor,this._requestManager=new ot(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,this._contextCreateOptions=m.contextCreateOptions?Object.assign({},m.contextCreateOptions):{},typeof m.container=="string"){const c=document.getElementById(m.container);if(!c)throw new Error(`Container '${m.container.toString()}' not found.`);this._container=c}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&r.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),this._spriteFormat=m.spriteFormat,r.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new jp),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new qy(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,(m.style||!m.testMode)&&this.setStyle(m.style||r.e.DEFAULT_STYLE,{config:m.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this.indoor=new jm(this),m.hash&&(this._hash=new ld(typeof m.hash=="string"&&m.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch});const c=m.bounds;c&&(this.resize(),this.fitBounds(c,r.l({},m.fitBoundsOptions,{duration:0})))}this.resize(),m.attributionControl&&this.addControl(new xf({customAttribution:m.customAttribution})),this._logoControl=new th,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new r.A(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new r.A(`${c.dataType}dataloading`,c))}),this._interactions=new Qa(this)}_getMapId(){return this._mapId}addControl(m,o){if(o===void 0&&(o=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new r.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=m.onAdd(this);this._controls.push(m);const g=this._controlPositions[o];return o.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new r.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(m);return o>-1&&this._controls.splice(o,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new r.A("movestart",m)).fire(new r.A("move",m)),this.fire(new r.A("resize",m)),o&&this.fire(new r.A("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(r.aG.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new r.A("zoomstart")).fire(new r.A("zoom")).fire(new r.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new r.A("zoomstart")).fire(new r.A("zoom")).fire(new r.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new r.A("pitchstart")).fire(new r.A("pitch")).fire(new r.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new r.A("pitchstart")).fire(new r.A("pitch")).fire(new r.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(m){return this._scaleFactor=m,this.painter.scaleFactor=m,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(o=>o==="auto"?navigator.language:o):m}setLanguage(m){const o=this._parseLanguage(m);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,o=m.projection.name;let c;o==="globe"&&m.zoom>=r.cx?(m.setMercatorFromTransition(),c=!0):o==="mercator"&&m.zoom<r.cx&&(m.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,o){return this._updateProjection(m||o||{name:"mercator"})}_updateProjection(m){let o;return o=m.name==="globe"&&this.transform.zoom>=r.cx?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(m,o){return this.transform.locationPoint3D(r.cd.convert(m),o)}unproject(m,o){return this.transform.pointLocation3D(r.P.convert(m),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,o,c){const g=b=>{let w=[];if(Array.isArray(o)){const C=o.filter(I=>this.getLayer(I));w=C.length?this.queryRenderedFeatures(b,{layers:C}):[]}else w=this.queryRenderedFeatures(b,{target:o});return w};if(m==="mouseenter"||m==="mouseover"){let b=!1;return{listener:c,targets:o,delegates:{mousemove:C=>{const I=g(C.point);I.length?b||(b=!0,c.call(this,new Qs(m,this,C.originalEvent,{features:I}))):b=!1},mouseout:()=>{b=!1}}}}if(m==="mouseleave"||m==="mouseout"){let b=!1;return{listener:c,targets:o,delegates:{mousemove:I=>{g(I.point).length?b=!0:b&&(b=!1,c.call(this,new Qs(m,this,I.originalEvent)))},mouseout:I=>{b&&(b=!1,c.call(this,new Qs(m,this,I.originalEvent)))}}}}{const b=w=>{const C=g(w.point);C.length&&(w.features=C,c.call(this,w),delete w.features)};return{listener:c,targets:o,delegates:{[m]:b}}}}on(m,o,c){if(typeof o=="function"||c===void 0)return super.on(m,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const g=this._createDelegatedListener(m,o,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(g);for(const b in g.delegates)this.on(b,g.delegates[b]);return this}once(m,o,c){if(typeof o=="function"||c===void 0)return super.once(m,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const g=this._createDelegatedListener(m,o,c);for(const b in g.delegates)this.once(b,g.delegates[b]);return this}off(m,o,c){if(typeof o=="function"||c===void 0)return super.off(m,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const g=this._delegatedListeners?this._delegatedListeners[m]:void 0;return g&&(b=>{for(let w=0;w<b.length;w++){const C=b[w];if(C.listener===c&&bf(C.targets,o)){for(const I in C.delegates)this.off(I,C.delegates[I]);return b.splice(w,1),this}}})(g),this}queryRenderedFeatures(m,o){if(!this.style)return[];if(m===void 0||m instanceof r.P||Array.isArray(m)||o!==void 0||(o=m,m=void 0),m=m||[[0,0],[this.transform.width,this.transform.height]],!o){const w=this.style.queryRenderedFeatures(m,void 0,this.transform),C=this.style.queryRenderedFeatureset(m,void 0,this.transform);return w.concat(C)}let c=!0;if(o.target&&(c=this._isTargetValid(o.target),c&&!o.layers))return this.style.queryRenderedFeatureset(m,o,this.transform);let g=!0;if(o.layers&&Array.isArray(o.layers)){for(const w of o.layers)if(!this._isValidId(w)){g=!1;break}if(g&&!o.target)return this.style.queryRenderedFeatures(m,o,this.transform)}let b=[];return g&&(b=b.concat(this.style.queryRenderedFeatures(m,o,this.transform))),c&&(b=b.concat(this.style.queryRenderedFeatureset(m,o,this.transform))),b}querySourceFeatures(m,o){return!m||typeof m=="string"&&!this._isValidId(m)?[]:this.style.querySourceFeatures(m,o)}isPointOnSurface(m){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&r.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(r.P.convert(m))}addInteraction(m,o){return this._interactions.add(m,o),this}removeInteraction(m){return this._interactions.remove(m),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(m){return this._cooperativeGestures=m,this}setStyle(m,o){return o=r.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&m&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(m,(c,g)=>{if(c){const b=typeof c=="string"?c:c instanceof Error?c.message:c.error;r.w(`Unable to perform style diff: ${b}. Rebuilding the style from scratch.`),this._updateStyle(m,o)}else g&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(m,o))}_getUIString(m){const o=this._locale[m];if(o==null)throw new Error(`Missing UI string '${m}'`);return o}_updateStyle(m,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m){const c=r.l({},o);o&&o.config&&(c.initialConfig=o.config,delete c.config),this.style=new Za(this,c).load(m),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Za(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(r.w("There is no style added to the map."),!1)}_isValidId(m){return m==null?(this.fire(new r.z(new Error("IDs can't be empty."))),!1):!r.d9(m)||(this.fire(new r.z(new Error(`IDs can't contain special symbols: "${m}".`))),!1)}_isTargetValid(m){return"featuresetId"in m?this._isValidId("importId"in m?m.importId:m.featuresetId):"layerId"in m&&this._isValidId(m.layerId)}_areTargetsValid(m){if(Array.isArray(m)){for(const o of m)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(m)}addSource(m,o){return this._isValidId(m)?(this._lazyInitEmptyStyle(),this.style.addSource(m,o),this._update(!0)):this}isSourceLoaded(m){return!!this._isValidId(m)&&!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(m,o,c){this._lazyInitEmptyStyle(),this.style.addSourceType(m,o,c)}removeSource(m){return this._isValidId(m)?(this.style.removeSource(m),this._updateTerrain(),this._update(!0)):this}getSource(m){return this._isValidId(m)?this.style.getOwnSource(m):null}addImage(m,o,{pixelRatio:c=1,sdf:g=!1,stretchX:b,stretchY:w,content:C}={}){this._lazyInitEmptyStyle();const I=r.I.from(m);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:L,height:F,data:V}=r.q.getImageData(o);this.style.addImage(I,{data:new r.r({width:L,height:F},V),pixelRatio:c,stretchX:b,stretchY:w,content:C,sdf:g,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new r.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:L,height:F}=o,V=o;this.style.addImage(I,{data:new r.r({width:L,height:F},new Uint8Array(V.data)),pixelRatio:c,stretchX:b,stretchY:w,content:C,sdf:g,usvg:!1,version:0,userImage:V}),V.onAdd&&V.onAdd(this,m)}}updateImage(m,o){this._lazyInitEmptyStyle();const c=r.I.from(m),g=this.style.getImage(c);if(!g)return void this.fire(new r.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?r.q.getImageData(o):o,{width:w,height:C,data:I}=b;if(w===void 0||C===void 0)return void this.fire(new r.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==(g.usvg?g.icon.usvg_tree.width:g.data.width)||C!==(g.usvg?g.icon.usvg_tree.height:g.data.height))return void this.fire(new r.z(new Error(`The width and height of the updated image (${w}, ${C})
                must be that same as the previous version of the image
                (${g.data.width}, ${g.data.height})`)));const L=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let F=!1;g.usvg?(g.data=new r.r({width:w,height:C},new Uint8Array(I)),g.usvg=!1,g.icon=void 0,F=!0):g.data.replace(I,L),this.style.updateImage(c,g,F)}hasImage(m){return m?!!this.style&&!!this.style.getImage(r.I.from(m)):(this.fire(new r.z(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(r.I.from(m))}loadImage(m,o){r.o(this._requestManager.transformRequest(m,r.R.Image),(c,g)=>{o(c,g instanceof HTMLImageElement?r.q.getImageData(g):g)})}listImages(){return this.style.listImages().map(m=>m.name)}addModel(m,o){this._lazyInitEmptyStyle(),this.style.addModel(m,o)}hasModel(m){return m?this.style.hasModel(m):(this.fire(new r.z(new Error("Missing required model id"))),!1)}removeModel(m){this.style.removeModel(m)}listModels(){return this.style.listModels()}addLayer(m,o){return this._isValidId(m.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(m,o),this._update(!0)):this}getSlot(m){const o=this.getLayer(m);return o&&o.slot||null}setSlot(m,o){return this.style.setSlot(m,o),this.style.mergeLayers(),this._update(!0)}addImport(m,o){return this.style.addImport(m,o).catch(c=>this.fire(new r.z(new Error("Failed to add import",c)))),this}updateImport(m,o){return typeof o!="string"&&o.id!==m?(this.removeImport(m),this.addImport(o)):(this.style.updateImport(m,o),this._update(!0))}removeImport(m){return this.style.removeImport(m),this}moveImport(m,o){return this.style.moveImport(m,o),this._update(!0)}moveLayer(m,o){return this._isValidId(m)?(this.style.moveLayer(m,o),this._update(!0)):this}removeLayer(m){return this._isValidId(m)?(this.style.removeLayer(m),this._update(!0)):this}getLayer(m){if(!this._isValidId(m))return null;const o=this.style.getOwnLayer(m);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(m,o,c){return this._isValidId(m)?(this.style.setLayerZoomRange(m,o,c),this._update(!0)):this}setFilter(m,o,c={}){return this._isValidId(m)?(this.style.setFilter(m,o,c),this._update(!0)):this}getFilter(m){return this._isValidId(m)?this.style.getFilter(m):null}setPaintProperty(m,o,c,g={}){return this._isValidId(m)?(this.style.setPaintProperty(m,o,c,g),this._update(!0)):this}getPaintProperty(m,o){return this._isValidId(m)?this.style.getPaintProperty(m,o):null}setLayoutProperty(m,o,c,g={}){return this._isValidId(m)?(this.style.setLayoutProperty(m,o,c,g),this._update(!0)):this}getLayoutProperty(m,o){return this._isValidId(m)?this.style.getLayoutProperty(m,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(m){return this.style.setGlyphsUrl(m),this._update(!0)}getSchema(m){return this.style.getSchema(m)}setSchema(m,o){return this.style.setSchema(m,o),this._update(!0)}getConfig(m){return this.style.getConfig(m)}setConfig(m,o){return this.style.setConfig(m,o),this._update(!0)}getConfigProperty(m,o){return this.style.getConfigProperty(m,o)}setConfigProperty(m,o,c){return this.style.setConfigProperty(m,o,c),this._update(!0)}getFeaturesetDescriptors(m){return this.style.getFeaturesetDescriptors(m)}setLights(m){if(this._lazyInitEmptyStyle(),m&&m.length===1&&m[0].type==="flat"){const o=m[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(m),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const m=this.style.getLights()||[];return m.length===0&&m.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),m}setLight(m,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:m}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(m){return this._lazyInitEmptyStyle(),this.style.setSnow(m),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(m){return this._lazyInitEmptyStyle(),this.style.setRain(m),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(m){return this._lazyInitEmptyStyle(),this.style.setColorTheme(m),this._update(!0)}setImportColorTheme(m,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(m,o),this._update(!0)}setCamera(m){return this.style.setCamera(m),this._triggerCameraUpdate(m)}_triggerCameraUpdate(m){return this._update(this.transform.setOrthographicProjectionAtLowPitch(m["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(r.cd.convert(m),this.transform):0}setFeatureState(m,o){return m.source&&!this._isValidId(m.source)?this:(this.style.setFeatureState(m,o),this._update())}removeFeatureState(m,o){return m.source&&!this._isValidId(m.source)?this:(this.style.removeFeatureState(m,o),this._update())}getFeatureState(m){return m.source&&!this._isValidId(m.source)?null:this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let c,g,b,w=this._container;for(;w&&(!g||!b);){const C=window.getComputedStyle(w).transform;C&&C!=="none"&&(c=C.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(g=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(b=c[3])),w=w.parentElement}this._containerWidth=g?Math.abs(m/g):m,this._containerHeight=b?Math.abs(o/b):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=H("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=H("div","mapboxgl-canvas-container",m);this._canvas=H("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=H("div","mapboxgl-control-container",m),g=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(b=>{g[b]=H("div",`mapboxgl-ctrl-${b}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,o){const c=r.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(m),this._canvas.height=c*Math.ceil(o),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${o}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const o=this._markers.indexOf(m);o!==-1&&this._markers.splice(o,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const o=this._popups.indexOf(m);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const m=r.l({},U.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",m);o?(oi(o,!0),this.painter=new ad(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),r.m.testSupport(o)):this.fire(new r.z(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.A("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new r.A("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let o;this.fire(new r.A("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,g=r.q.now(),b=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=b.createQuery(),b.beginQuery(c.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const w=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const F=this.transform.zoom,V=this.transform.pitch,q=r.q.now(),G=new r.aa(F,{now:q,fadeDuration:w,pitch:V,transition:this.style.transition});this.style.update(G)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(g),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(g);const I=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),I&&(this._placementDirty=I.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new r.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,R.mark(A.load),this.fire(new r.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const F=r.q.now()-g;b.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const V=b.getQueryParameter(o,b.QUERY_RESULT)/1e6;b.deleteQuery(o),this.fire(new r.A("gpu-timing-frame",{cpuTime:F,gpuTime:V}))},50)}if(this.listens("gpu-timing-layer")){const F=this.painter.collectGpuTimers();setTimeout(()=>{const V=this.painter.queryGpuTimers(F);this.fire(new r.A("gpu-timing-layer",{layerTimes:V}))},50)}if(this.listens("gpu-timing-deferred-render")){const F=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const V=this.painter.queryGpuTimeDeferredRender(F);this.fire(new r.A("gpu-timing-deferred-render",{gpuTime:V}))},50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(L||this._repaint)this.triggerRepaint();else{const F=this.idle();if(F&&(C=this._updateAverageElevation(g,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),F&&(this.fire(new r.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const V=this._calculateSpeedIndex();this.fire(new r.A("speedindexcompleted",{speedIndex:V})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,R.mark(A.fullLoad),this._performanceMetricsCollection&&Vn(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const o of this._markers)m&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!m||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(m,o=!1){const c=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const g=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(g||(o||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const b=this.transform.averageElevation;let w=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(w)?w=0:this._averageElevationLastSampledAt=m;const C=Math.abs(b-w);if(C>1){if(this._isInitialLoad||g)return this._averageElevation.jumpTo(w),c(w);this._averageElevation.easeTo(w,m,300)}else if(C>1e-4)return this._averageElevation.jumpTo(w),c(w)}return!!this._averageElevation.isEasing(m)&&c(this._averageElevation.getValue(m))}_authenticate(){On(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===et||m.status===401)){const o=this.painter.context.gl;oi(o,!1),this._logoControl instanceof th&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new r.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),on(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&jt(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const c=this.painter.context.gl,g=c.createFramebuffer();function b(w){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,w,0);const C=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,C),C}return c.bindFramebuffer(c.FRAMEBUFFER,g),this._canvasPixelComparison(b(m),o.canvasCopies.map(b),o.timeStamps)}_canvasPixelComparison(m,o,c){let g=c[1]-c[0];const b=m.length/4;for(let w=0;w<o.length;w++){const C=o[w];let I=0;for(let L=0;L<C.length;L+=4)C[L]===m[L]&&C[L+1]===m[L+1]&&C[L+2]===m[L+2]&&C[L+3]===m[L+3]&&(I+=1);g+=(c[w+2]-c[w+1])*(1-I/b)}return g}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),ai.delete(this.painter.context.gl),Hn.remove(),Ft.remove(),this._removed=!0,this.fire(new r.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=r.q.frame(o=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(o)}))}_preloadTiles(m){const o=this.style?this.style.getSourceCaches():[];return r.bt(o,(c,g)=>c._preloadTiles(m,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(m){this._showParseStatus!==m&&(this._showParseStatus=m,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(m){this._showLayers2DWireframe!==m&&(this._showLayers2DWireframe=m,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(m){this._showLayers3DWireframe!==m&&(this._showLayers3DWireframe=m,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,this._tp.refreshUI(),m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,this._tp.refreshUI(),m&&this._update())}_setCacheLimits(m,o){r.eJ(m,o)}get version(){return S}},NavigationControl:class{constructor(m={}){this.options=r.l({},Rv,m),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(r.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:o}):c.resetNorth({},{originalEvent:o}))}),this._compassIcon=H("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const o=m.getZoom(),c=o===m.getMaxZoom(),g=o===m.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new el(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,o){const c=H("button",m,this._container);return c.type="button",c.addEventListener("click",o),c}_setButtonTitle(m,o){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${o}`);m.setAttribute("aria-label",c),m.firstElementChild&&m.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends r.E{constructor(m={}){super();const o=navigator.geolocation;this.options=r.l({geolocation:o},Gp,m),r.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Zu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const o=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,m(c)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>o(c.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(m){const o=this._map.getMaxBounds(),c=m.coords;return!!o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new r.A("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new r.A("geolocate",m)),this._finish()}}_updateCamera(m){const o=new r.cd(m.coords.longitude,m.coords.latitude),c=m.coords.accuracy,g=this._map.getBearing(),b=r.l({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(c),b,{geolocateSource:!0})}_updateMarker(m){if(m){const o=new r.cd(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,o=r.c6(1,m._center.lat)*m.worldSize,c=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new r.A("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=H("button","mapboxgl-ctrl-geolocate",this._container),H("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){r.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H("div","mapboxgl-user-location"),this._dotElement.appendChild(H("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(H("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Co({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=H("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Co({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new r.A("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return r.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xf,ScaleControl:class{constructor(m={}){this.options=r.l({},Sf,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),r.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,o=this._map,c=o._containerHeight/2,g=o._containerWidth/2-m/2,b=o.unproject([g,c]),w=o.unproject([g+m,c]),C=b.distanceTo(w);if(this.options.unit==="imperial"){const I=3.2808*C;I>5280?this._setScale(m,I/5280,"mile"):this._setScale(m,I,"foot")}else this.options.unit==="nautical"?this._setScale(m,C/1852,"nautical-mile"):C>=1e3?this._setScale(m,C/1e3,"kilometer"):this._setScale(m,C,"meter")}_setScale(m,o,c){this._map._requestDomTask(()=>{const g=function(w){const C=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(L){const F=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*F)/F}(I),C*I}(o),b=g/o;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(g):`${g}&nbsp;${Sc[c]}`,this._container.style.width=m*b+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m={}){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:r.w("Full screen control 'container' must be a DOM element.")),r.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=H("button","mapboxgl-ctrl-fullscreen",this._controlContainer);H("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends r.E{constructor(m){super(),this.options=r.l(Object.create(xa),m),this._altitude=this.options.altitude,r.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new r.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new r.A("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=r.cd.convert(m),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(m){return this._altitude=m,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const o=document.createDocumentFragment(),c=document.createElement("body");let g;for(c.innerHTML=m;g=c.firstChild,g;)o.appendChild(g);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=H("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(m),this.options.closeButton){const c=this._closeButton=H("button","mapboxgl-popup-close-button",o);c.type="button",c.setAttribute("aria-label","Close popup"),c.innerHTML='<span aria-hidden="true">&#215;</span>',c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let o;return this._classList.delete(m)?o=!1:(this._classList.add(m),o=!0),this._updateClassList(),o}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const o=this._map,c=this._container,g=this._pos;if(!o||!c||!g)return"bottom";const b=c.offsetWidth,w=c.offsetHeight,C=g.x<b/2,I=g.x>o.transform.width-b/2;if(g.y+m<w)return C?"top-left":I?"top-right":"top";if(g.y>o.transform.height-w){if(C)return"bottom-left";if(I)return"bottom-right"}return C?"left":I?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),m.className=o.join(" ")}_update(m){const o=this._map,c=this._content;if(!o||!this._lngLat&&!this._trackPointer||!c)return;let g=this._container;if(g||(g=this._container=H("div","mapboxgl-popup",o.getContainer()),this._tip=H("div","mapboxgl-popup-tip",g),g.appendChild(c)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Xy(this._lngLat,this._pos,o.transform)),!this._trackPointer||m){const b=this._pos=this._trackPointer&&m instanceof r.P?m:o.project(this._lngLat,this._altitude),w=iu(this.options.offset),C=this._anchor=this._getAnchor(w.y),I=iu(this.options.offset,C),L=b.add(I).round();o._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${wf[C]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&o._showingGlobe()){const b=r.eK(o.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Es);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Co,Style:Za,LngLat:r.cd,LngLatBounds:r.aG,Point:r.P,MercatorCoordinate:r.ac,FreeCameraOptions:Zd,Evented:r.E,config:r.e,prewarm:r.eP,clearPrewarmedResources:r.eQ,get accessToken(){return r.e.ACCESS_TOKEN},set accessToken(m){r.e.ACCESS_TOKEN=m},get baseApiUrl(){return r.e.API_URL},set baseApiUrl(m){r.e.API_URL=m},get workerCount(){return r.eR.workerCount},set workerCount(m){r.eR.workerCount=m},get maxParallelImageRequests(){return r.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){r.e.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){r.eS(m)},get workerUrl(){return r.eT.workerUrl},set workerUrl(m){r.eT.workerUrl=m},get workerClass(){return r.eT.workerClass},set workerClass(m){r.eT.workerClass=m},get workerParams(){return r.eT.workerParams},set workerParams(m){r.eT.workerParams=m},get dracoUrl(){return r.eU()},set dracoUrl(m){r.eV(m)},get meshoptUrl(){return r.eW()},set meshoptUrl(m){r.eX(m)},setNow:r.q.setNow,restoreNow:r.q.restoreNow}});var y=u;return y})}(uE)),uE.exports}var dme=hme();const Ex=Im(dme);var MT={},Qb={},iN;function fme(){return iN||(iN=1,Qb.RADIUS=6378137,Qb.FLATTENING=1/298.257223563,Qb.POLAR_RADIUS=63567523142e-4),Qb}var rN;function pme(){if(rN)return MT;rN=1;var e=fme();MT.geometry=t,MT.ring=a;function t(f){var y=0,r;switch(f.type){case"Polygon":return n(f.coordinates);case"MultiPolygon":for(r=0;r<f.coordinates.length;r++)y+=n(f.coordinates[r]);return y;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<f.geometries.length;r++)y+=t(f.geometries[r]);return y}}function n(f){var y=0;if(f&&f.length>0){y+=Math.abs(a(f[0]));for(var r=1;r<f.length;r++)y-=Math.abs(a(f[r]))}return y}function a(f){var y,r,S,A,R,O,z,N=0,U=f.length;if(U>2){for(z=0;z<U;z++)z===U-2?(A=U-2,R=U-1,O=0):z===U-1?(A=U-1,R=0,O=1):(A=z,R=z+1,O=z+2),y=f[A],r=f[R],S=f[O],N+=(u(S[0])-u(y[0]))*Math.sin(u(r[1]));N=N*e.RADIUS*e.RADIUS/2}return N}function u(f){return f*Math.PI/180}return MT}pme();const P$={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},mme={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},wa={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},eA={POLYGON:"polygon",LINE:"line_string",POINT:"point"},yo={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},$s={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},ry={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},FO={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},Ll={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},al={ACTIVE:"true",INACTIVE:"false"},gme=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],yme=-90,CP=-85,_me=90,AP=85,vme=-270,xme=270,bme=Object.freeze(Object.defineProperty({__proto__:null,LAT_MAX:_me,LAT_MIN:yme,LAT_RENDERED_MAX:AP,LAT_RENDERED_MIN:CP,LNG_MAX:xme,LNG_MIN:vme,activeStates:al,classes:P$,cursors:wa,events:ry,geojsonTypes:yo,interactions:gme,meta:Ll,modes:$s,sources:mme,types:eA,updateActions:FO},Symbol.toStringTag,{value:"Module"}));function Cx(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}Cx.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};Cx.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};Cx.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};Cx.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,n)=>t.v-n.v).map(t=>t.k)};Cx.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};Ll.FEATURE,Ll.MIDPOINT,Ll.VERTEX;let wme=(e,t=21)=>(n=t)=>{let a="",u=n|0;for(;u--;)a+=e[Math.random()*e.length|0];return a};const Sme=wme("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function D$(){return Sme()}const uc=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||D$(),this.type=t.geometry.type};uc.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};uc.prototype.incomingCoords=function(e){this.setCoordinates(e)};uc.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};uc.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};uc.prototype.setProperty=function(e,t){this.properties[e]=t};uc.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:yo.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};uc.prototype.internal=function(e){const t={id:this.id,meta:Ll.FEATURE,"meta:type":this.type,active:al.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t[`user_${n}`]=this.properties[n];return{type:yo.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const Ow=function(e,t){uc.call(this,e,t)};Ow.prototype=Object.create(uc.prototype);Ow.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};Ow.prototype.updateCoordinate=function(e,t,n){arguments.length===3?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()};Ow.prototype.getCoordinate=function(){return this.getCoordinates()};const yv=function(e,t){uc.call(this,e,t)};yv.prototype=Object.create(uc.prototype);yv.prototype.isValid=function(){return this.coordinates.length>1};yv.prototype.addCoordinate=function(e,t,n){this.changed();const a=parseInt(e,10);this.coordinates.splice(a,0,[t,n])};yv.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};yv.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};yv.prototype.updateCoordinate=function(e,t,n){const a=parseInt(e,10);this.coordinates[a]=[t,n],this.changed()};const Jf=function(e,t){uc.call(this,e,t),this.coordinates=this.coordinates.map(n=>n.slice(0,-1))};Jf.prototype=Object.create(uc.prototype);Jf.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Jf.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Jf.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Jf.prototype.addCoordinate=function(e,t,n){this.changed();const a=e.split(".").map(f=>parseInt(f,10));this.coordinates[a[0]].splice(a[1],0,[t,n])};Jf.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(a=>parseInt(a,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))};Jf.prototype.getCoordinate=function(e){const t=e.split(".").map(a=>parseInt(a,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))};Jf.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Jf.prototype.updateCoordinate=function(e,t,n){this.changed();const a=e.split("."),u=parseInt(a[0],10),f=parseInt(a[1],10);this.coordinates[u]===void 0&&(this.coordinates[u]=[]),this.coordinates[u][f]=[t,n]};const Tme={MultiPoint:Ow,MultiLineString:yv,MultiPolygon:Jf},tA=(e,t,n,a,u)=>{const f=n.split("."),y=parseInt(f[0],10),r=f[1]?f.slice(1).join("."):null;return e[y][t](r,a,u)},Qf=function(e,t){if(uc.call(this,e,t),delete this.coordinates,this.model=Tme[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};Qf.prototype=Object.create(uc.prototype);Qf.prototype._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(n=>new t(this.ctx,{id:D$(),type:yo.FEATURE,properties:{},geometry:{coordinates:n,type:this.type.replace("Multi","")}}))};Qf.prototype.isValid=function(){return this.features.every(e=>e.isValid())};Qf.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};Qf.prototype.getCoordinate=function(e){return tA(this.features,"getCoordinate",e)};Qf.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===yo.POLYGON?e.getCoordinates():e.coordinates)))};Qf.prototype.updateCoordinate=function(e,t,n){tA(this.features,"updateCoordinate",e,t,n),this.changed()};Qf.prototype.addCoordinate=function(e,t,n){tA(this.features,"addCoordinate",e,t,n),this.changed()};Qf.prototype.removeCoordinate=function(e){tA(this.features,"removeCoordinate",e),this.changed()};Qf.prototype.getFeatures=function(){return this.features};function NO(e){return function(t){const n=t.featureTarget;return!n||!n.properties?!1:n.properties.meta===e}}function Eme(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function Ax(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===al.ACTIVE&&e.featureTarget.properties.meta===Ll.FEATURE}function O$(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===al.INACTIVE&&e.featureTarget.properties.meta===Ll.FEATURE}function jO(e){return e.featureTarget===void 0}function L$(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===Ll.FEATURE}function nA(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===Ll.VERTEX}function MP(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function UO(e){return e.keyCode===27}function VO(e){return e.keyCode===13}function kg(e,t){this.x=e,this.y=t}kg.prototype={clone(){return new kg(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),a=t*this.x-n*this.y,u=n*this.x+t*this.y;return this.x=a,this.y=u,this},_rotateAround(e,t){const n=Math.cos(e),a=Math.sin(e),u=t.x+n*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+n*(this.y-t.y);return this.x=u,this.y=f,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:kg};kg.convert=function(e){if(e instanceof kg)return e;if(Array.isArray(e))return new kg(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new kg(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function $O(e,t){const n=t.getBoundingClientRect();return new kg(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function rw(e,t,n,a){return{type:yo.FEATURE,properties:{meta:Ll.VERTEX,parent:e,coord_path:n,active:a?al.ACTIVE:al.INACTIVE},geometry:{type:yo.POINT,coordinates:t}}}function Cme(e,t,n){const a=t.geometry.coordinates,u=n.geometry.coordinates;if(a[1]>AP||a[1]<CP||u[1]>AP||u[1]<CP)return null;const f={lng:(a[0]+u[0])/2,lat:(a[1]+u[1])/2};return{type:yo.FEATURE,properties:{meta:Ll.MIDPOINT,parent:e,lng:f.lng,lat:f.lat,coord_path:n.properties.coord_path},geometry:{type:yo.POINT,coordinates:[f.lng,f.lat]}}}function HO(e,t={},n=null){const{type:a,coordinates:u}=e.geometry,f=e.properties&&e.properties.id;let y=[];a===yo.POINT?y.push(rw(f,u,n,S(n))):a===yo.POLYGON?u.forEach((R,O)=>{r(R,n!==null?`${n}.${O}`:String(O))}):a===yo.LINE_STRING?r(u,n):a.indexOf(yo.MULTI_PREFIX)===0&&A();function r(R,O){let z="",N=null;R.forEach((U,H)=>{const K=O!=null?`${O}.${H}`:String(H),W=rw(f,U,K,S(K));if(t.midpoints&&N){const ne=Cme(f,N,W);ne&&y.push(ne)}N=W;const re=JSON.stringify(U);z!==re&&y.push(W),H===0&&(z=re)})}function S(R){return t.selectedPaths?t.selectedPaths.indexOf(R)!==-1:!1}function A(){const R=a.replace(yo.MULTI_PREFIX,"");u.forEach((O,z)=>{const N={type:yo.FEATURE,properties:e.properties,geometry:{type:R,coordinates:O}};y=y.concat(HO(N,t,z))})}return y}const Xf={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},{LAT_MIN:RT,LAT_MAX:IT,LAT_RENDERED_MIN:oN,LAT_RENDERED_MAX:sN,LNG_MIN:aN,LNG_MAX:lN}=bme;function Ame(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],n=[e.geometry.coordinates].flat(t),a=n.map(r=>r[0]),u=n.map(r=>r[1]),f=r=>Math.min.apply(null,r),y=r=>Math.max.apply(null,r);return[f(a),f(u),y(a),y(u)]}function k$(e,t){let n=RT,a=IT,u=RT,f=IT,y=lN,r=aN;e.forEach(A=>{const R=Ame(A),O=R[1],z=R[3],N=R[0],U=R[2];O>n&&(n=O),z<a&&(a=z),z>u&&(u=z),O<f&&(f=O),N<y&&(y=N),U>r&&(r=U)});const S=t;return n+S.lat>sN&&(S.lat=sN-n),u+S.lat>IT&&(S.lat=IT-u),a+S.lat<oN&&(S.lat=oN-a),f+S.lat<RT&&(S.lat=RT-f),y+S.lng<=aN&&(S.lng+=Math.ceil(Math.abs(S.lng)/360)*360),r+S.lng>=lN&&(S.lng-=Math.ceil(Math.abs(S.lng)/360)*360),S}function z$(e,t){const n=k$(e.map(a=>a.toGeoJSON()),t);e.forEach(a=>{const u=a.getCoordinates(),f=A=>{const R={lng:A[0]+n.lng,lat:A[1]+n.lat};return[R.lng,R.lat]},y=A=>A.map(R=>f(R)),r=A=>A.map(R=>y(R));let S;a.type===yo.POINT?S=f(u):a.type===yo.LINE_STRING||a.type===yo.MULTI_POINT?S=u.map(f):a.type===yo.POLYGON||a.type===yo.MULTI_LINE_STRING?S=u.map(y):a.type===yo.MULTI_POLYGON&&(S=u.map(r)),a.incomingCoords(S)})}const Qo={};Qo.onSetup=function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(n=>this.getFeature(n)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};Qo.fireUpdate=function(){this.fire(ry.UPDATE,{action:FO.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};Qo.fireActionable=function(){const e=this.getSelected(),t=e.filter(f=>this.isInstanceOf("MultiFeature",f));let n=!1;if(e.length>1){n=!0;const f=e[0].type.replace("Multi","");e.forEach(y=>{y.type.replace("Multi","")!==f&&(n=!1)})}const a=t.length>0,u=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:a,trash:u})};Qo.getUniqueIds=function(e){return e.length?e.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,a)=>(n.add(a),n),new Cx).values():[]};Qo.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};Qo.onStop=function(){Xf.enable(this)};Qo.onMouseMove=function(e,t){return L$(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};Qo.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};Qo.onTap=Qo.onClick=function(e,t){if(jO(t))return this.clickAnywhere(e,t);if(NO(Ll.VERTEX)(t))return this.clickOnVertex(e,t);if(L$(t))return this.clickOnFeature(e,t)};Qo.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(n=>this.doRender(n))),Xf.enable(this),this.stopExtendedInteractions(e)};Qo.clickOnVertex=function(e,t){this.changeMode($s.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:wa.MOVE})};Qo.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Qo.clickOnFeature=function(e,t){Xf.disable(this),this.stopExtendedInteractions(e);const n=MP(t),a=this.getSelectedIds(),u=t.featureTarget.properties.id,f=this.isSelected(u);if(!n&&f&&this.getFeature(u).type!==yo.POINT)return this.changeMode($s.DIRECT_SELECT,{featureId:u});f&&n?(this.deselect(u),this.updateUIClasses({mouse:wa.POINTER}),a.length===1&&Xf.enable(this)):!f&&n?(this.select(u),this.updateUIClasses({mouse:wa.MOVE})):!f&&!n&&(a.forEach(y=>this.doRender(y)),this.setSelected(u),this.updateUIClasses({mouse:wa.MOVE})),this.doRender(u)};Qo.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),Ax(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&Eme(t))return this.startBoxSelect(e,t)};Qo.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=$O(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};Qo.onTouchStart=function(e,t){if(Ax(t))return this.startOnActiveFeature(e,t)};Qo.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};Qo.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:wa.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(P$.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=$O(t.originalEvent,this.map.getContainer()),a=Math.min(e.boxSelectStartLocation.x,n.x),u=Math.max(e.boxSelectStartLocation.x,n.x),f=Math.min(e.boxSelectStartLocation.y,n.y),y=Math.max(e.boxSelectStartLocation.y,n.y),r=`translate(${a}px, ${f}px)`;e.boxSelectElement.style.transform=r,e.boxSelectElement.style.WebkitTransform=r,e.boxSelectElement.style.width=`${u-a}px`,e.boxSelectElement.style.height=`${y-f}px`};Qo.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};z$(this.getSelected(),n),e.dragMoveLocation=t.lngLat};Qo.onTouchEnd=Qo.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,$O(t.originalEvent,this.map.getContainer())],a=this.featuresAt(null,n,"click"),u=this.getUniqueIds(a).filter(f=>!this.isSelected(f));u.length&&(this.select(u),u.forEach(f=>this.doRender(f)),this.updateUIClasses({mouse:wa.MOVE}))}this.stopExtendedInteractions(e)};Qo.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?al.ACTIVE:al.INACTIVE,n(t),this.fireActionable(),!(t.properties.active!==al.ACTIVE||t.geometry.type===yo.POINT)&&HO(t).forEach(n)};Qo.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};Qo.onCombineFeatures=function(){const e=this.getSelected();if(e.length===0||e.length<2)return;const t=[],n=[],a=e[0].type.replace("Multi","");for(let u=0;u<e.length;u++){const f=e[u];if(f.type.replace("Multi","")!==a)return;f.type.includes("Multi")?f.getCoordinates().forEach(y=>{t.push(y)}):t.push(f.getCoordinates()),n.push(f.toGeoJSON())}if(n.length>1){const u=this.newFeature({type:yo.FEATURE,properties:n[0].properties,geometry:{type:`Multi${a}`,coordinates:t}});this.addFeature(u),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([u.id]),this.fire(ry.COMBINE_FEATURES,{createdFeatures:[u.toGeoJSON()],deletedFeatures:n})}this.fireActionable()};Qo.onUncombineFeatures=function(){const e=this.getSelected();if(e.length===0)return;const t=[],n=[];for(let a=0;a<e.length;a++){const u=e[a];this.isInstanceOf("MultiFeature",u)&&(u.getFeatures().forEach(f=>{this.addFeature(f),f.properties=u.properties,t.push(f.toGeoJSON()),this.select([f.id])}),this.deleteFeature(u.id,{silent:!0}),n.push(u.toGeoJSON()))}t.length>1&&this.fire(ry.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const B$=NO(Ll.VERTEX),F$=NO(Ll.MIDPOINT),es={};es.fireUpdate=function(){this.fire(ry.UPDATE,{action:FO.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};es.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};es.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};es.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};es.onVertex=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,a=e.selectedCoordPaths.indexOf(n.coord_path);!MP(t)&&a===-1?e.selectedCoordPaths=[n.coord_path]:MP(t)&&a===-1&&e.selectedCoordPaths.push(n.coord_path);const u=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(u)};es.onMidpoint=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]};es.pathsToCoordinates=function(e,t){return t.map(n=>({feature_id:e,coord_path:n}))};es.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};es.dragFeature=function(e,t,n){z$(this.getSelected(),n),e.dragMoveLocation=t.lngLat};es.dragVertex=function(e,t,n){const a=e.selectedCoordPaths.map(y=>e.feature.getCoordinate(y)),u=a.map(y=>({type:yo.FEATURE,properties:{},geometry:{type:yo.POINT,coordinates:y}})),f=k$(u,n);for(let y=0;y<a.length;y++){const r=a[y];e.feature.updateCoordinate(e.selectedCoordPaths[y],r[0]+f.lng,r[1]+f.lat)}};es.clickNoTarget=function(){this.changeMode($s.SIMPLE_SELECT)};es.clickInactive=function(){this.changeMode($s.SIMPLE_SELECT)};es.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};es.onSetup=function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===yo.POINT)throw new TypeError("direct_select mode doesn't handle point features");const a={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,a.selectedCoordPaths)),this.setSelected(t),Xf.disable(this),this.setActionableState({trash:!0}),a};es.onStop=function(){Xf.enable(this),this.clearSelectedCoordinates()};es.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=al.ACTIVE,n(t),HO(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=al.INACTIVE,n(t)),this.fireActionable(e)};es.onTrash=function(e){e.selectedCoordPaths.sort((t,n)=>n.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode($s.SIMPLE_SELECT,{}))};es.onMouseMove=function(e,t){const n=Ax(t),a=B$(t),u=F$(t),f=e.selectedCoordPaths.length===0;return n&&f?this.updateUIClasses({mouse:wa.MOVE}):a&&!f?this.updateUIClasses({mouse:wa.MOVE}):this.updateUIClasses({mouse:wa.NONE}),(a||n||u)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};es.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};es.onTouchStart=es.onMouseDown=function(e,t){if(B$(t))return this.onVertex(e,t);if(Ax(t))return this.onFeature(e,t);if(F$(t))return this.onMidpoint(e,t)};es.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat};es.onClick=function(e,t){if(jO(t))return this.clickNoTarget(e,t);if(Ax(t))return this.clickActiveFeature(e,t);if(O$(t))return this.clickInactive(e,t);this.stopDragging(e)};es.onTap=function(e,t){if(jO(t))return this.clickNoTarget(e,t);if(Ax(t))return this.clickActiveFeature(e,t);if(O$(t))return this.clickInactive(e,t)};es.onTouchEnd=es.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const Rm={};Rm.onSetup=function(){const e=this.newFeature({type:yo.FEATURE,properties:{},geometry:{type:yo.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:wa.ADD}),this.activateUIButton(eA.POINT),this.setActionableState({trash:!0}),{point:e}};Rm.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT)};Rm.onTap=Rm.onClick=function(e,t){this.updateUIClasses({mouse:wa.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(ry.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.point.id]})};Rm.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};Rm.toDisplayFeatures=function(e,t,n){const a=t.properties.id===e.point.id;if(t.properties.active=a?al.ACTIVE:al.INACTIVE,!a)return n(t)};Rm.onTrash=Rm.stopDrawingAndRemove;Rm.onKeyUp=function(e,t){if(UO(t)||VO(t))return this.stopDrawingAndRemove(e,t)};function RP(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}const Zf={};Zf.onSetup=function(){const e=this.newFeature({type:yo.FEATURE,properties:{},geometry:{type:yo.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Xf.disable(this),this.updateUIClasses({mouse:wa.ADD}),this.activateUIButton(eA.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};Zf.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&RP(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:wa.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};Zf.clickOnVertex=function(e){return this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};Zf.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),nA(t)&&this.updateUIClasses({mouse:wa.POINTER})};Zf.onTap=Zf.onClick=function(e,t){return nA(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};Zf.onKeyUp=function(e,t){UO(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT)):VO(t)&&this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};Zf.onStop=function(e){this.updateUIClasses({mouse:wa.NONE}),Xf.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(ry.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT,{},{silent:!0})))};Zf.toDisplayFeatures=function(e,t,n){const a=t.properties.id===e.polygon.id;if(t.properties.active=a?al.ACTIVE:al.INACTIVE,!a)return n(t);if(t.geometry.coordinates.length===0)return;const u=t.geometry.coordinates[0].length;if(!(u<3)){if(t.properties.meta=Ll.FEATURE,n(rw(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),u>3){const f=t.geometry.coordinates[0].length-3;n(rw(e.polygon.id,t.geometry.coordinates[0][f],`0.${f}`,!1))}if(u<=4){const f=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:yo.FEATURE,properties:t.properties,geometry:{coordinates:f,type:yo.LINE_STRING}}),u===3)return}return n(t)}};Zf.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT)};const Yf={};Yf.onSetup=function(e){e=e||{};const t=e.featureId;let n,a,u="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let f=e.from;if(f&&f.type==="Feature"&&f.geometry&&f.geometry.type==="Point"&&(f=f.geometry),f&&f.type==="Point"&&f.coordinates&&f.coordinates.length===2&&(f=f.coordinates),!f||!Array.isArray(f))throw new Error("Please use the `from` property to indicate which point to continue the line from");const y=n.coordinates.length-1;if(n.coordinates[y][0]===f[0]&&n.coordinates[y][1]===f[1])a=y+1,n.addCoordinate(a,...n.coordinates[y]);else if(n.coordinates[0][0]===f[0]&&n.coordinates[0][1]===f[1])u="backwards",a=0,n.addCoordinate(a,...n.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else n=this.newFeature({type:yo.FEATURE,properties:{},geometry:{type:yo.LINE_STRING,coordinates:[]}}),a=0,this.addFeature(n);return this.clearSelectedFeatures(),Xf.disable(this),this.updateUIClasses({mouse:wa.ADD}),this.activateUIButton(eA.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:a,direction:u}};Yf.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&RP(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&RP(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:wa.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};Yf.clickOnVertex=function(e){return this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.line.id]})};Yf.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),nA(t)&&this.updateUIClasses({mouse:wa.POINTER})};Yf.onTap=Yf.onClick=function(e,t){if(nA(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};Yf.onKeyUp=function(e,t){VO(t)?this.changeMode($s.SIMPLE_SELECT,{featureIds:[e.line.id]}):UO(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT))};Yf.onStop=function(e){Xf.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(ry.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT,{},{silent:!0})))};Yf.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode($s.SIMPLE_SELECT)};Yf.toDisplayFeatures=function(e,t,n){const a=t.properties.id===e.line.id;if(t.properties.active=a?al.ACTIVE:al.INACTIVE,!a)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=Ll.FEATURE,n(rw(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),n(t))};$s.SIMPLE_SELECT;Ex.accessToken="YOUR_MAPBOX_ACCESS_TOKEN";const Mme=({project:e})=>{const[t,n]=Or.useState(null),a=!!t,u=Zg(),f=S=>n(S.currentTarget),y=()=>n(null),r=()=>{u("1")};return te.jsxs(Vg,{elevation:3,sx:{position:"relative",width:250,borderRadius:3,overflow:"hidden",cursor:"pointer",transition:"0.3s","&:hover":{boxShadow:6}},children:[te.jsx(N6,{component:"img",height:"140",image:e.image,alt:e.title,sx:{objectFit:"cover"}}),te.jsxs(ww,{sx:{paddingBottom:"8px !important"},children:[te.jsx(Ii,{variant:"subtitle1",fontWeight:600,children:e.title}),te.jsx(Ii,{variant:"body2",color:"text.secondary",children:e.description})]}),te.jsxs(fr,{sx:{position:"absolute",bottom:8,right:8},children:[te.jsx(B6,{onClick:f,children:te.jsx(V6,{fontSize:"small"})}),te.jsxs(yO,{anchorEl:t,open:a,onClose:y,children:[te.jsx(Bg,{onClick:r,children:"View"}),te.jsx(Bg,{onClick:y,children:"Edit"}),te.jsx(Bg,{onClick:y,children:"Delete"})]})]})]})},Rme=[{name:"User I",role:"Project Manager"},{name:"User II",role:"Lead Engineer"},{name:"User III",role:"GIS Specialist"}],Ime=[{title:"Day I",description:"Track changes over time",image:"https://picsum.photos/200/300?1"},{title:"Day II",description:"High-res structural analysis",image:"https://picsum.photos/200/300?2"},{title:"Day III",description:"Thermal imaging results",image:"https://picsum.photos/200/300?3"}];function Pme(){const[e,t]=ee.useState(""),[n,a]=ee.useState(["someone@example.com"]),u=xs(),f=r=>{r.key==="Enter"&&e&&(r.preventDefault(),n.includes(e)||a([...n,e]),t(""))},y=r=>{a(n.filter(S=>S!==r))};return te.jsxs(fr,{p:4,children:[te.jsx(Ii,{variant:"h2",fontWeight:600,gutterBottom:!0,children:"Project I Overview"}),te.jsxs(sc,{direction:"row",spacing:4,mb:4,children:[te.jsxs(fr,{flex:1,children:[te.jsx(Ii,{variant:"h5",gutterBottom:!0,children:"Project Details"}),te.jsxs(sc,{spacing:1,children:[te.jsx(Ii,{children:"Name: Project I"}),te.jsx(Ii,{children:"Status: In Progress"}),te.jsx(Ii,{children:"Remarks: Site is under survey"})]})]}),te.jsxs(fr,{flex:1,children:[te.jsx(Ii,{variant:"h5",gutterBottom:!0,children:"Collaborators"}),te.jsx(vx,{dense:!0,children:Rme.map((r,S)=>te.jsxs(Hae,{children:[te.jsx(Xae,{children:te.jsx(IC,{children:r.name.charAt(0)})}),te.jsx($1,{primary:r.name,secondary:r.role})]},S))})]})]}),te.jsxs(fr,{mb:5,children:[te.jsx(Ii,{variant:"h6",gutterBottom:!0,children:"Invite More People"}),te.jsxs($_,{sx:{...u.typography.customInput,width:300},children:[te.jsx(T1,{htmlFor:"teamInvite",children:"Email"}),te.jsx(N_,{id:"teamInvite",label:"Email",value:e,onChange:r=>t(r.target.value),onKeyDown:f,sx:{mb:2}})]}),te.jsx(sc,{direction:"row",spacing:1,flexWrap:"wrap",mb:2,children:n.map((r,S)=>te.jsx(Sw,{label:r,onDelete:()=>y(r),color:"primary"},S))}),te.jsx(J_,{variant:"contained",color:"secondary",children:"Send Invite"})]}),te.jsxs(fr,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[te.jsx(Ii,{variant:"h4",children:"Work Days"}),te.jsx(J_,{variant:"contained",color:"secondary",startIcon:te.jsx(U6,{}),children:"Create New Entry"})]}),te.jsx(gu,{container:!0,spacing:3,children:Ime.map((r,S)=>te.jsx(Mme,{project:r}))})]})}Ex.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";function N$(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=N$(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function _v(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=N$(e))&&(a&&(a+=" "),a+=t);return a}let Dme={data:""},Ome=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Dme,Lme=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kme=/\/\*[^]*?\*\/|  +/g,cN=/\n+/g,D_=(e,t)=>{let n="",a="",u="";for(let f in e){let y=e[f];f[0]=="@"?f[1]=="i"?n=f+" "+y+";":a+=f[1]=="f"?D_(y,f):f+"{"+D_(y,f[1]=="k"?"":t)+"}":typeof y=="object"?a+=D_(y,t?t.replace(/([^,])+/g,r=>f.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,S=>/&/.test(S)?S.replace(/&/g,r):r?r+" "+S:S)):f):y!=null&&(f=/^--/.test(f)?f:f.replace(/[A-Z]/g,"-$&").toLowerCase(),u+=D_.p?D_.p(f,y):f+":"+y+";")}return n+(t&&u?t+"{"+u+"}":u)+a},hm={},j$=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+j$(e[n]);return t}return e},zme=(e,t,n,a,u)=>{let f=j$(e),y=hm[f]||(hm[f]=(S=>{let A=0,R=11;for(;A<S.length;)R=101*R+S.charCodeAt(A++)>>>0;return"go"+R})(f));if(!hm[y]){let S=f!==e?e:(A=>{let R,O,z=[{}];for(;R=Lme.exec(A.replace(kme,""));)R[4]?z.shift():R[3]?(O=R[3].replace(cN," ").trim(),z.unshift(z[0][O]=z[0][O]||{})):z[0][R[1]]=R[2].replace(cN," ").trim();return z[0]})(e);hm[y]=D_(u?{["@keyframes "+y]:S}:S,n?"":"."+y)}let r=n&&hm.g?hm.g:null;return n&&(hm.g=hm[y]),((S,A,R,O)=>{O?A.data=A.data.replace(O,S):A.data.indexOf(S)===-1&&(A.data=R?S+A.data:A.data+S)})(hm[y],t,a,r),y},Bme=(e,t,n)=>e.reduce((a,u,f)=>{let y=t[f];if(y&&y.call){let r=y(n),S=r&&r.props&&r.props.className||/^go/.test(r)&&r;y=S?"."+S:r&&typeof r=="object"?r.props?"":D_(r,""):r===!1?"":r}return a+u+(y??"")},"");function GO(e){let t=this||{},n=e.call?e(t.p):e;return zme(n.unshift?n.raw?Bme(n,[].slice.call(arguments,1),t.p):n.reduce((a,u)=>Object.assign(a,u&&u.call?u(t.p):u),{}):n,Ome(t.target),t.g,t.o,t.k)}GO.bind({g:1});GO.bind({k:1});function Fme(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U$(e,t,n){return t&&Fme(e.prototype,t),e}function Ho(){return Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ho.apply(this,arguments)}function V$(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Lw(e,t){if(e==null)return{};var n={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}function uN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var hN=function(){return""},$$=Or.createContext({enqueueSnackbar:hN,closeSnackbar:hN}),I_={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},dN=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},qO=function(t){return""+dN(t.vertical)+dN(t.horizontal)},PT=function(t){return!!t||t===0},DT="unmounted",A0="exited",M0="entering",e1="entered",fN="exiting",WO=function(e){V$(t,e);function t(a){var u;u=e.call(this,a)||this;var f=a.appear,y;return u.appearStatus=null,a.in?f?(y=A0,u.appearStatus=M0):y=e1:a.unmountOnExit||a.mountOnEnter?y=DT:y=A0,u.state={status:y},u.nextCallback=null,u}t.getDerivedStateFromProps=function(u,f){var y=u.in;return y&&f.status===DT?{status:A0}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(u){var f=null;if(u!==this.props){var y=this.state.status;this.props.in?y!==M0&&y!==e1&&(f=M0):(y===M0||y===e1)&&(f=fN)}this.updateStatus(!1,f)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var u=this.props.timeout,f=u,y=u;return u!=null&&typeof u!="number"&&typeof u!="string"&&(y=u.exit,f=u.enter),{exit:y,enter:f}},n.updateStatus=function(u,f){u===void 0&&(u=!1),f!==null?(this.cancelNextCallback(),f===M0?this.performEnter(u):this.performExit()):this.props.unmountOnExit&&this.state.status===A0&&this.setState({status:DT})},n.performEnter=function(u){var f=this,y=this.props.enter,r=u,S=this.getTimeouts();if(!u&&!y){this.safeSetState({status:e1},function(){f.props.onEntered&&f.props.onEntered(f.node,r)});return}this.props.onEnter&&this.props.onEnter(this.node,r),this.safeSetState({status:M0},function(){f.props.onEntering&&f.props.onEntering(f.node,r),f.onTransitionEnd(S.enter,function(){f.safeSetState({status:e1},function(){f.props.onEntered&&f.props.onEntered(f.node,r)})})})},n.performExit=function(){var u=this,f=this.props.exit,y=this.getTimeouts();if(!f){this.safeSetState({status:A0},function(){u.props.onExited&&u.props.onExited(u.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:fN},function(){u.props.onExiting&&u.props.onExiting(u.node),u.onTransitionEnd(y.exit,function(){u.safeSetState({status:A0},function(){u.props.onExited&&u.props.onExited(u.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(u,f){f=this.setNextCallback(f),this.setState(u,f)},n.setNextCallback=function(u){var f=this,y=!0;return this.nextCallback=function(){y&&(y=!1,f.nextCallback=null,u())},this.nextCallback.cancel=function(){y=!1},this.nextCallback},n.onTransitionEnd=function(u,f){this.setNextCallback(f);var y=u==null&&!this.props.addEndListener;if(!this.node||y){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),u!=null&&setTimeout(this.nextCallback,u)},n.render=function(){var u=this.state.status;if(u===DT)return null;var f=this.props,y=f.children,r=Lw(f,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return y(u,r)},U$(t,[{key:"node",get:function(){var u,f=(u=this.props.nodeRef)===null||u===void 0?void 0:u.current;if(!f)throw new Error("notistack - Custom snackbar is not refForwarding");return f}}]),t}(Or.Component);function R0(){}WO.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:R0,onEntering:R0,onEntered:R0,onExit:R0,onExiting:R0,onExited:R0};function pN(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function IP(e,t){return ee.useMemo(function(){return e==null&&t==null?null:function(n){pN(e,n),pN(t,n)}},[e,t])}function tC(e){var t=e.timeout,n=e.style,a=n===void 0?{}:n,u=e.mode;return{duration:typeof t=="object"?t[u]||0:t,easing:a.transitionTimingFunction,delay:a.transitionDelay}}var PP={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},H$=function(t){t.scrollTop=t.scrollTop},mN=function(t){return Math.round(t)+"ms"};function q0(e,t){e===void 0&&(e=["all"]);var n=t||{},a=n.duration,u=a===void 0?300:a,f=n.easing,y=f===void 0?PP.easeInOut:f,r=n.delay,S=r===void 0?0:r,A=Array.isArray(e)?e:[e];return A.map(function(R){var O=typeof u=="string"?u:mN(u),z=typeof S=="string"?S:mN(S);return R+" "+O+" "+y+" "+z}).join(",")}function Nme(e){return e&&e.ownerDocument||document}function G$(e){var t=Nme(e);return t.defaultView||window}function jme(e,t){t===void 0&&(t=166);var n;function a(){for(var u=this,f=arguments.length,y=new Array(f),r=0;r<f;r++)y[r]=arguments[r];var S=function(){e.apply(u,y)};clearTimeout(n),n=setTimeout(S,t)}return a.clear=function(){clearTimeout(n)},a}function Ume(e,t){var n=t.getBoundingClientRect(),a=G$(t),u;if(t.fakeTransform)u=t.fakeTransform;else{var f=a.getComputedStyle(t);u=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}var y=0,r=0;if(u&&u!=="none"&&typeof u=="string"){var S=u.split("(")[1].split(")")[0].split(",");y=parseInt(S[4],10),r=parseInt(S[5],10)}switch(e){case"left":return"translateX("+(a.innerWidth+y-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-y)+"px)";case"up":return"translateY("+(a.innerHeight+r-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-r)+"px)"}}function OT(e,t){if(t){var n=Ume(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}}var q$=ee.forwardRef(function(e,t){var n=e.children,a=e.direction,u=a===void 0?"down":a,f=e.in,y=e.style,r=e.timeout,S=r===void 0?0:r,A=e.onEnter,R=e.onEntered,O=e.onExit,z=e.onExited,N=Lw(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),U=ee.useRef(null),H=IP(n.ref,U),K=IP(H,t),W=function(Ce,Le){OT(u,Ce),H$(Ce),A&&A(Ce,Le)},re=function(Ce){var Le=(y==null?void 0:y.transitionTimingFunction)||PP.easeOut,qe=tC({timeout:S,mode:"enter",style:Ho({},y,{transitionTimingFunction:Le})});Ce.style.webkitTransition=q0("-webkit-transform",qe),Ce.style.transition=q0("transform",qe),Ce.style.webkitTransform="none",Ce.style.transform="none"},ne=function(Ce){var Le=(y==null?void 0:y.transitionTimingFunction)||PP.sharp,qe=tC({timeout:S,mode:"exit",style:Ho({},y,{transitionTimingFunction:Le})});Ce.style.webkitTransition=q0("-webkit-transform",qe),Ce.style.transition=q0("transform",qe),OT(u,Ce),O&&O(Ce)},se=function(Ce){Ce.style.webkitTransition="",Ce.style.transition="",z&&z(Ce)},ue=ee.useCallback(function(){U.current&&OT(u,U.current)},[u]);return ee.useEffect(function(){if(!(f||u==="down"||u==="right")){var pe=jme(function(){U.current&&OT(u,U.current)}),Ce=G$(U.current);return Ce.addEventListener("resize",pe),function(){pe.clear(),Ce.removeEventListener("resize",pe)}}},[u,f]),ee.useEffect(function(){f||ue()},[f,ue]),ee.createElement(WO,Object.assign({appear:!0,nodeRef:U,onEnter:W,onEntered:R,onEntering:re,onExit:ne,onExited:se,in:f,timeout:S},N),function(pe,Ce){return ee.cloneElement(n,Ho({ref:K,style:Ho({visibility:pe==="exited"&&!f?"hidden":void 0},y,{},n.props.style)},Ce))})});q$.displayName="Slide";var iA=function(t){return Or.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},Vme=function(){return Or.createElement(iA,null,Or.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},$me=function(){return Or.createElement(iA,null,Or.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Hme=function(){return Or.createElement(iA,null,Or.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Gme=function(){return Or.createElement(iA,null,Or.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},qme={default:void 0,success:Or.createElement(Vme,null),warning:Or.createElement($me,null),error:Or.createElement(Hme,null),info:Or.createElement(Gme,null)},W_={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:qme,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:q$,transitionDuration:{enter:225,exit:195}},Wme=function(t,n){var a=function(f){return typeof f=="number"||f===null};return a(t)?t:a(n)?n:W_.autoHideDuration},Xme=function(t,n){var a=function(f,y){return y.some(function(r){return typeof f===r})};return a(t,["string","number"])?t:a(t,["object"])?Ho({},W_.transitionDuration,{},a(n,["object"])&&n,{},t):a(n,["string","number"])?n:a(n,["object"])?Ho({},W_.transitionDuration,{},n):W_.transitionDuration},Zme=function(t,n){return function(a,u){return u===void 0&&(u=!1),u?Ho({},W_[a],{},n[a],{},t[a]):a==="autoHideDuration"?Wme(t.autoHideDuration,n.autoHideDuration):a==="transitionDuration"?Xme(t.transitionDuration,n.transitionDuration):t[a]||n[a]||W_[a]}};function kw(e){return Object.entries(e).reduce(function(t,n){var a,u=n[0],f=n[1];return Ho({},t,(a={},a[u]=GO(f),a))},{})}var cx={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},gN=kw({root:{height:0},entered:{height:"auto"}}),RR="0px",IR=175,W$=ee.forwardRef(function(e,t){var n=e.children,a=e.in,u=e.onExited,f=ee.useRef(null),y=ee.useRef(null),r=IP(t,y),S=function(){return f.current?f.current.clientHeight:0},A=function(H){H.style.height=RR},R=function(H){var K=S(),W=tC({timeout:IR,mode:"enter"}),re=W.duration,ne=W.easing;H.style.transitionDuration=typeof re=="string"?re:re+"ms",H.style.height=K+"px",H.style.transitionTimingFunction=ne||""},O=function(H){H.style.height="auto"},z=function(H){H.style.height=S()+"px"},N=function(H){H$(H);var K=tC({timeout:IR,mode:"exit"}),W=K.duration,re=K.easing;H.style.transitionDuration=typeof W=="string"?W:W+"ms",H.style.height=RR,H.style.transitionTimingFunction=re||""};return ee.createElement(WO,{in:a,unmountOnExit:!0,onEnter:A,onEntered:O,onEntering:R,onExit:z,onExited:u,onExiting:N,nodeRef:y,timeout:IR},function(U,H){return ee.createElement("div",Object.assign({ref:r,className:_v(gN.root,U==="entered"&&gN.entered),style:Ho({pointerEvents:"all",overflow:"hidden",minHeight:RR,transition:q0("height")},U==="entered"&&{overflow:"visible"},{},U==="exited"&&!a&&{visibility:"hidden"})},H),ee.createElement("div",{ref:f,className:cx.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});W$.displayName="Collapse";var yN={right:"left",left:"right",bottom:"up",top:"down"},Yme=function(t){return t.horizontal!=="center"?yN[t.horizontal]:yN[t.vertical]},Kme=function(t){return"anchorOrigin"+qO(t)},Jme=function(t){t===void 0&&(t={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(a){return!n[a]}).reduce(function(a,u){var f;return Ho({},a,(f={},f[u]=t[u],f))},{})},Qme=function(){};function R1(e,t){return e.reduce(function(n,a){return a==null?n:function(){for(var f=arguments.length,y=new Array(f),r=0;r<f;r++)y[r]=arguments[r];var S=[].concat(y);t&&S.indexOf(t)===-1&&S.push(t),n.apply(this,S),a.apply(this,S)}},Qme)}var ege=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function _N(e){var t=ee.useRef(e);return ege(function(){t.current=e}),ee.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var X$=ee.forwardRef(function(e,t){var n=e.children,a=e.className,u=e.autoHideDuration,f=e.disableWindowBlurListener,y=f===void 0?!1:f,r=e.onClose,S=e.id,A=e.open,R=e.SnackbarProps,O=R===void 0?{}:R,z=ee.useRef(),N=_N(function(){r&&r.apply(void 0,arguments)}),U=_N(function(ne){!r||ne==null||(z.current&&clearTimeout(z.current),z.current=setTimeout(function(){N(null,"timeout",S)},ne))});ee.useEffect(function(){return A&&U(u),function(){z.current&&clearTimeout(z.current)}},[A,u,U]);var H=function(){z.current&&clearTimeout(z.current)},K=ee.useCallback(function(){u!=null&&U(u*.5)},[u,U]),W=function(se){O.onMouseEnter&&O.onMouseEnter(se),H()},re=function(se){O.onMouseLeave&&O.onMouseLeave(se),K()};return ee.useEffect(function(){if(!y&&A)return window.addEventListener("focus",K),window.addEventListener("blur",H),function(){window.removeEventListener("focus",K),window.removeEventListener("blur",H)}},[y,K,A]),ee.createElement("div",Object.assign({ref:t},O,{className:_v(cx.Snackbar,a),onMouseEnter:W,onMouseLeave:re}),n)});X$.displayName="Snackbar";var PR,tge=kw({root:(PR={display:"flex",flexWrap:"wrap",flexGrow:1},PR[I_.upSm]={flexGrow:"initial",minWidth:"288px"},PR)}),Z$=ee.forwardRef(function(e,t){var n=e.className,a=Lw(e,["className"]);return Or.createElement("div",Object.assign({ref:t,className:_v(tge.root,n)},a))});Z$.displayName="SnackbarContent";var t1=kw({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),vN="notistack-snackbar",Y$=ee.forwardRef(function(e,t){var n=e.id,a=e.message,u=e.action,f=e.iconVariant,y=e.variant,r=e.hideIconVariant,S=e.style,A=e.className,R=f[y],O=u;return typeof O=="function"&&(O=O(n)),Or.createElement(Z$,{ref:t,role:"alert","aria-describedby":vN,style:S,className:_v(cx.MuiContent,cx.MuiContentVariant(y),t1.root,t1[y],A,!r&&R&&t1.lessPadding)},Or.createElement("div",{id:vN,className:t1.message},r?null:R,a),O&&Or.createElement("div",{className:t1.action},O))});Y$.displayName="MaterialDesignContent";var nge=ee.memo(Y$),ige=kw({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),rge=function(t){var n=ee.useRef(),a=ee.useState(!0),u=a[0],f=a[1],y=R1([t.snack.onClose,t.onClose]),r=function(){t.snack.requestClose&&y(null,"instructed",t.snack.id)},S=ee.useCallback(function(){n.current=setTimeout(function(){f(function(qe){return!qe})},125)},[]);ee.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var A=t.snack,R=t.classes,O=t.Component,z=O===void 0?nge:O,N=ee.useMemo(function(){return Jme(R)},[R]),U=A.open,H=A.SnackbarProps,K=A.TransitionComponent,W=A.TransitionProps,re=A.transitionDuration,ne=A.disableWindowBlurListener,se=A.content,ue=Lw(A,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),pe=Ho({direction:Yme(ue.anchorOrigin),timeout:re},W),Ce=se;typeof Ce=="function"&&(Ce=Ce(ue.id,ue.message));var Le=["onEnter","onEntered","onExit","onExited"].reduce(function(qe,ye){var Xe;return Ho({},qe,(Xe={},Xe[ye]=R1([t.snack[ye],t[ye]],ue.id),Xe))},{});return Or.createElement(W$,{in:u,onExited:Le.onExited},Or.createElement(X$,{open:U,id:ue.id,disableWindowBlurListener:ne,autoHideDuration:ue.autoHideDuration,className:_v(ige.wrappedRoot,N.root,N[Kme(ue.anchorOrigin)]),SnackbarProps:H,onClose:y},Or.createElement(K,Object.assign({},pe,{appear:!0,in:U,onExit:Le.onExit,onExited:S,onEnter:Le.onEnter,onEntered:R1([Le.onEntered,r],ue.id)}),Ce||Or.createElement(z,Object.assign({},ue)))))},n1,DR,LT,kT,OR,dm={view:{default:20},snackbar:{default:6,dense:2}},xN="."+cx.CollapseWrapper,LR=16,zT=kw({root:(n1={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:q0(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},n1[xN]={padding:dm.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},n1.maxWidth="calc(100% - "+dm.view.default*2+"px)",n1[I_.downXs]={width:"100%",maxWidth:"calc(100% - "+LR*2+"px)"},n1),rootDense:(DR={},DR[xN]={padding:dm.snackbar.dense+"px 0px"},DR),top:{top:dm.view.default-dm.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:dm.view.default-dm.snackbar.default+"px",flexDirection:"column-reverse"},left:(LT={left:dm.view.default+"px"},LT[I_.upSm]={alignItems:"flex-start"},LT[I_.downXs]={left:LR+"px"},LT),right:(kT={right:dm.view.default+"px"},kT[I_.upSm]={alignItems:"flex-end"},kT[I_.downXs]={right:LR+"px"},kT),center:(OR={left:"50%",transform:"translateX(-50%)"},OR[I_.upSm]={alignItems:"center"},OR)}),oge=function(t){var n=t.classes,a=n===void 0?{}:n,u=t.anchorOrigin,f=t.dense,y=t.children,r=_v(cx.SnackbarContainer,zT[u.vertical],zT[u.horizontal],zT.root,a.containerRoot,a["containerAnchorOrigin"+qO(u)],f&&zT.rootDense);return Or.createElement("div",{className:r},y)},sge=ee.memo(oge),bN=function(t){var n=typeof t=="string"||ee.isValidElement(t);return!n},age=function(e){V$(t,e);function t(a){var u;return u=e.call(this,a)||this,u.enqueueSnackbar=function(f,y){if(y===void 0&&(y={}),f==null)throw new Error("enqueueSnackbar called with invalid argument");var r=bN(f)?f:y,S=bN(f)?f.message:f,A=r.key,R=r.preventDuplicate,O=Lw(r,["key","preventDuplicate"]),z=PT(A),N=z?A:new Date().getTime()+Math.random(),U=Zme(O,u.props),H=Ho({id:N},O,{message:S,open:!0,entered:!1,requestClose:!1,persist:U("persist"),action:U("action"),content:U("content"),variant:U("variant"),anchorOrigin:U("anchorOrigin"),disableWindowBlurListener:U("disableWindowBlurListener"),autoHideDuration:U("autoHideDuration"),hideIconVariant:U("hideIconVariant"),TransitionComponent:U("TransitionComponent"),transitionDuration:U("transitionDuration"),TransitionProps:U("TransitionProps",!0),iconVariant:U("iconVariant",!0),style:U("style",!0),SnackbarProps:U("SnackbarProps",!0),className:_v(u.props.className,O.className)});return H.persist&&(H.autoHideDuration=void 0),u.setState(function(K){if(R===void 0&&u.props.preventDuplicate||R){var W=function(ue){return z?ue.id===N:ue.message===S},re=K.queue.findIndex(W)>-1,ne=K.snacks.findIndex(W)>-1;if(re||ne)return K}return u.handleDisplaySnack(Ho({},K,{queue:[].concat(K.queue,[H])}))}),N},u.handleDisplaySnack=function(f){var y=f.snacks;return y.length>=u.maxSnack?u.handleDismissOldest(f):u.processQueue(f)},u.processQueue=function(f){var y=f.queue,r=f.snacks;return y.length>0?Ho({},f,{snacks:[].concat(r,[y[0]]),queue:y.slice(1,y.length)}):f},u.handleDismissOldest=function(f){if(f.snacks.some(function(R){return!R.open||R.requestClose}))return f;var y=!1,r=!1,S=f.snacks.reduce(function(R,O){return R+(O.open&&O.persist?1:0)},0);S===u.maxSnack&&(r=!0);var A=f.snacks.map(function(R){return!y&&(!R.persist||r)?(y=!0,R.entered?(R.onClose&&R.onClose(null,"maxsnack",R.id),u.props.onClose&&u.props.onClose(null,"maxsnack",R.id),Ho({},R,{open:!1})):Ho({},R,{requestClose:!0})):Ho({},R)});return Ho({},f,{snacks:A})},u.handleEnteredSnack=function(f,y,r){if(!PT(r))throw new Error("handleEnteredSnack Cannot be called with undefined key");u.setState(function(S){var A=S.snacks;return{snacks:A.map(function(R){return R.id===r?Ho({},R,{entered:!0}):Ho({},R)})}})},u.handleCloseSnack=function(f,y,r){u.props.onClose&&u.props.onClose(f,y,r);var S=r===void 0;u.setState(function(A){var R=A.snacks,O=A.queue;return{snacks:R.map(function(z){return!S&&z.id!==r?Ho({},z):z.entered?Ho({},z,{open:!1}):Ho({},z,{requestClose:!0})}),queue:O.filter(function(z){return z.id!==r})}})},u.closeSnackbar=function(f){var y=u.state.snacks.find(function(r){return r.id===f});PT(f)&&y&&y.onClose&&y.onClose(null,"instructed",f),u.handleCloseSnack(null,"instructed",f)},u.handleExitedSnack=function(f,y){if(!PT(y))throw new Error("handleExitedSnack Cannot be called with undefined key");u.setState(function(r){var S=u.processQueue(Ho({},r,{snacks:r.snacks.filter(function(A){return A.id!==y})}));return S.queue.length===0?S:u.handleDismissOldest(S)})},u.enqueueSnackbar,u.closeSnackbar,u.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:u.enqueueSnackbar.bind(uN(u)),closeSnackbar:u.closeSnackbar.bind(uN(u))}},u}var n=t.prototype;return n.render=function(){var u=this,f=this.state.contextValue,y=this.props,r=y.domRoot,S=y.children,A=y.dense,R=A===void 0?!1:A,O=y.Components,z=O===void 0?{}:O,N=y.classes,U=this.state.snacks.reduce(function(K,W){var re,ne=qO(W.anchorOrigin),se=K[ne]||[];return Ho({},K,(re={},re[ne]=[].concat(se,[W]),re))},{}),H=Object.keys(U).map(function(K){var W=U[K],re=W[0];return Or.createElement(sge,{key:K,dense:R,anchorOrigin:re.anchorOrigin,classes:N},W.map(function(ne){return Or.createElement(rge,{key:ne.id,snack:ne,classes:N,Component:z[ne.variant],onClose:u.handleCloseSnack,onEnter:u.props.onEnter,onExit:u.props.onExit,onExited:R1([u.handleExitedSnack,u.props.onExited],ne.id),onEntered:R1([u.handleEnteredSnack,u.props.onEntered],ne.id)})}))});return Or.createElement($$.Provider,{value:f},S,r?fC.createPortal(H,r):H)},U$(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||W_.maxSnack}}]),t}(ee.Component),K$=function(){return ee.useContext($$)};const lge=e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":return te.jsx(eQ,{size:32,color:"red"});case"doc":case"docx":return te.jsx(tQ,{size:32,color:"blue"});case"xls":case"xlsx":return te.jsx(JJ,{size:32,color:"green"});case"txt":return te.jsx(QJ,{size:32});default:return te.jsx(nQ,{size:32})}},BT=()=>new Date().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});function cge(){const[e,t]=ee.useState([{name:"report.pdf",uploadedAt:BT()},{name:"site-notes.docx",uploadedAt:BT()},{name:"data-sheet.xlsx",uploadedAt:BT()}]),[n,a]=ee.useState(0),u=xs(),{enqueueSnackbar:f}=K$(),y=S=>{const A=S.target.files[0];if(!A)return;a(0);const R=setInterval(()=>{a(O=>(O>=100&&(clearInterval(R),t(z=>[...z,{name:A.name,uploadedAt:BT()}])),Math.min(O+10,100)))},200)},r=S=>{f(`Downloading "${S.name}"...`,{variant:"info"}),setTimeout(()=>{f(`"${S.name}" downloaded`,{variant:"success"})},1500)};return te.jsxs(fr,{sx:{px:3,py:2},children:[te.jsx(Ii,{variant:"h4",mb:2,children:"Upload Files"}),te.jsxs(J_,{variant:"contained",component:"label",sx:{mb:2},children:["Choose File",te.jsx("input",{type:"file",hidden:!0,onChange:y})]}),n>0&&n<100&&te.jsx(qj,{variant:"determinate",value:n,sx:{mb:3,borderRadius:2}}),te.jsx(Ii,{variant:"h5",gutterBottom:!0,children:"Uploaded Files"}),te.jsx(gu,{container:!0,spacing:2,children:e.map((S,A)=>te.jsx(gu,{item:!0,xs:12,sm:6,md:4,children:te.jsx(Kg,{elevation:3,onClick:()=>r(S),sx:{p:2,borderRadius:2,cursor:"pointer",transition:"all 0.2s ease","&:hover":{boxShadow:`0 0 0 2px ${u.palette.primary.main}`}},children:te.jsxs(sc,{direction:"row",spacing:2,alignItems:"center",children:[lge(S.name),te.jsxs(fr,{children:[te.jsx(Ii,{variant:"subtitle1",fontWeight:"bold",children:S.name}),te.jsxs(Ii,{variant:"caption",color:"text.secondary",children:["Uploaded on: ",S.uploadedAt]})]})]})})},A))})]})}function uge(){return te.jsxs(fr,{children:[te.jsx(Ii,{variant:"h6",children:"Other Tab"}),te.jsx(Ii,{children:"This is an empty tab for future content."})]})}var J$=ee.forwardRef(({transition:e,...t},n)=>{let a={position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:e?`clip-path ${e}`:void 0,userSelect:"none",willChange:"clip-path, transition",KhtmlUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"};return te.jsx("div",{...t,style:a,"data-rcs":"clip-item",ref:n})});J$.displayName="ContainerClip";var Q$=ee.forwardRef(({children:e,disabled:t,portrait:n,position:a,transition:u},f)=>{let y={position:"absolute",top:0,width:n?"100%":void 0,height:n?void 0:"100%",background:"none",border:0,padding:0,pointerEvents:"all",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:0,transform:n?"translate3d(0, -50% ,0)":"translate3d(-50%, 0, 0)",transition:u?`${n?"top":"left"} ${u}`:void 0};return te.jsx("button",{ref:f,"aria-label":"Drag to move or focus and use arrow keys","aria-orientation":n?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":a,"data-rcs":"handle-container",disabled:t,role:"slider",style:y,children:e})});Q$.displayName="ThisHandleContainer";var wN=({flip:e})=>te.jsx("div",{className:"__rcs-handle-arrow",style:{width:0,height:0,borderTop:"8px solid transparent",borderRight:"10px solid",borderBottom:"8px solid transparent",transform:e?"rotate(180deg)":void 0}}),hge=({className:e="__rcs-handle-root",disabled:t,buttonStyle:n,linesStyle:a,portrait:u,style:f,...y})=>{let r={display:"flex",flexDirection:u?"row":"column",placeItems:"center",height:"100%",cursor:t?"not-allowed":u?"ns-resize":"ew-resize",pointerEvents:"none",color:"#fff",...f},S={flexGrow:1,height:u?2:"100%",width:u?"100%":2,backgroundColor:"currentColor",pointerEvents:"auto",boxShadow:"0 0 4px rgba(0,0,0,.5)",...a},A={display:"grid",gridAutoFlow:"column",gap:8,placeContent:"center",flexShrink:0,width:56,height:56,borderRadius:"50%",borderStyle:"solid",borderWidth:2,pointerEvents:"auto",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",backgroundColor:"rgba(0, 0, 0, 0.125)",boxShadow:"0 0 4px rgba(0,0,0,.35)",transform:u?"rotate(90deg)":void 0,...n};return te.jsxs("div",{...y,className:e,style:r,children:[te.jsx("div",{className:"__rcs-handle-line",style:S}),te.jsxs("div",{className:"__rcs-handle-button",style:A,children:[te.jsx(wN,{}),te.jsx(wN,{flip:!0})]}),te.jsx("div",{className:"__rcs-handle-line",style:S})]})},e8=(e=>(e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e))(e8||{}),dge=({boxSizing:e="border-box",objectFit:t="cover",objectPosition:n="center center",...a}={})=>({display:"block",width:"100%",height:"100%",maxWidth:"100%",boxSizing:e,objectFit:t,objectPosition:n,...a}),fge=e=>{let t=ee.useRef(e);return ee.useEffect(()=>{t.current=e}),t.current},kR=(e,t,n,a)=>{let u=ee.useRef();ee.useEffect(()=>{u.current=t},[t]),ee.useEffect(()=>{if(!(n&&n.addEventListener))return;let f=y=>u.current&&u.current(y);return n.addEventListener(e,f,a),()=>{n.removeEventListener(e,f,a)}},[e,n,a])},pge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ee.useLayoutEffect:ee.useEffect,mge=(e,t)=>{let n=ee.useRef(),a=ee.useCallback(()=>{e.current&&n.current&&n.current.observe(e.current)},[e]);pge(()=>(n.current=new ResizeObserver(([u])=>t(u.contentRect)),a(),()=>{n.current&&n.current.disconnect()}),[t,a])},FT={capture:!1,passive:!0},zR={capture:!0,passive:!1},gge=e=>{e.preventDefault(),e.currentTarget.focus()},t8=ee.forwardRef(({boundsPadding:e=0,browsingContext:t=globalThis,changePositionOnHover:n=!1,disabled:a=!1,handle:u,itemOne:f,itemTwo:y,keyboardIncrement:r="5%",onlyHandleDraggable:S=!1,onPositionChange:A,portrait:R=!1,position:O=50,style:z,transition:N,...U},H)=>{let K=ee.useRef(null),W=ee.useRef(null),re=ee.useRef(null),ne=ee.useRef(O),[se,ue]=ee.useState(!1),[pe,Ce]=ee.useState(!0),Le=ee.useRef(!1),[qe,ye]=ee.useState(),Xe=fge(O),ut=ee.useCallback(function({x:ht,y:Bt,isOffset:Ft}){let on=K.current,en=re.current,jt=W.current,{width:Rn,height:Vn,left:Hn,top:On}=on.getBoundingClientRect();if(Rn===0||Vn===0)return;let ai=R?Ft?Bt-On-t.scrollY:Bt:Ft?ht-Hn-t.scrollX:ht,oi=Math.min(Math.max(ai/(R?Vn:Rn)*100,0),100),Ln=R?Vn/(on.offsetHeight||1):Rn/(on.offsetWidth||1),zn=e*Ln/(R?Vn:Rn)*100,hi=Math.min(Math.max(oi,zn*Ln),100-zn*Ln);ne.current=oi,en.setAttribute("aria-valuenow",`${Math.round(ne.current)}`),en.style.top=R?`${hi}%`:"0",en.style.left=R?"0":`${hi}%`,jt.style.clipPath=R?`inset(${hi}% 0 0 0)`:`inset(0 0 0 ${hi}%)`,A&&A(ne.current)},[e,A,R,t]);ee.useEffect(()=>{let{width:ht,height:Bt}=K.current.getBoundingClientRect(),Ft=O===Xe?ne.current:O;ut({x:ht/100*Ft,y:Bt/100*Ft})},[e,O,R,Xe,ut]);let et=ee.useCallback(ht=>{ht.preventDefault(),!(a||ht.button!==0)&&(ut({isOffset:!0,x:ht.pageX,y:ht.pageY}),ue(!0),Ce(!0))},[a,ut]),ot=ee.useCallback(function(ht){ut({isOffset:!0,x:ht.pageX,y:ht.pageY}),Ce(!1)},[ut]),mt=ee.useCallback(()=>{ue(!1),Ce(!0)},[]),$e=ee.useCallback(({width:ht,height:Bt})=>{let{width:Ft,height:on}=K.current.getBoundingClientRect();ut({x:ht/100*ne.current*Ft/ht,y:Bt/100*ne.current*on/Bt})},[ut]),it=ee.useCallback(ht=>{if(!Object.values(e8).includes(ht.key))return;ht.preventDefault(),Ce(!0);let{top:Bt,left:Ft}=re.current.getBoundingClientRect(),{width:on,height:en}=K.current.getBoundingClientRect(),jt=typeof r=="string"?parseFloat(r):r/on*100,Rn=R?ht.key==="ArrowLeft"||ht.key==="ArrowDown":ht.key==="ArrowRight"||ht.key==="ArrowUp",Vn=Math.min(Math.max(Rn?ne.current+jt:ne.current-jt,0),100);ut({x:R?Ft:on*Vn/100,y:R?en*Vn/100:Bt})},[r,R,ut]);ee.useEffect(()=>{ye(S?re.current:K.current)},[S]),ee.useEffect(()=>{let ht=K.current,Bt=()=>{se||mt()};return n&&(ht.addEventListener("pointermove",ot,FT),ht.addEventListener("pointerleave",Bt,FT)),()=>{ht.removeEventListener("pointermove",ot),ht.removeEventListener("pointerleave",Bt)}},[n,ot,mt,se]),ee.useEffect(()=>(se&&!Le.current&&(t.addEventListener("pointermove",ot,FT),t.addEventListener("pointerup",mt,FT),Le.current=!0),()=>{Le.current&&(t.removeEventListener("pointermove",ot),t.removeEventListener("pointerup",mt),Le.current=!1)}),[ot,mt,se,t]),ee.useImperativeHandle(H,()=>({rootContainer:K.current,handleContainer:re.current,setPosition(ht){let{width:Bt,height:Ft}=K.current.getBoundingClientRect();ut({x:Bt/100*ht,y:Ft/100*ht})}}),[ut]),mge(K,$e),kR("keydown",it,re.current,zR),kR("click",gge,re.current,zR),kR("pointerdown",et,qe,zR);let Tt=u||te.jsx(hge,{disabled:a,portrait:R}),xt=pe?N:void 0,je={position:"relative",display:"flex",overflow:"hidden",cursor:se?R?"ns-resize":"ew-resize":void 0,touchAction:"none",userSelect:"none",KhtmlUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",...z};return te.jsxs("div",{...U,ref:K,style:je,"data-rcs":"root",children:[f,te.jsx(J$,{ref:W,transition:xt,children:y}),te.jsx(Q$,{disabled:a,portrait:R,position:Math.round(ne.current),ref:re,transition:xt,children:Tt})]})});t8.displayName="ReactCompareSlider";var yge=ee.forwardRef(({style:e,...t},n)=>{let a=dge(e);return te.jsx("img",{ref:n,...t,style:a,"data-rcs":"image"})});yge.displayName="ReactCompareSliderImage";var NT={},I0={},ms={},BR={},SN;function XO(){return SN||(SN=1,function(e){function t(y,r,S){var A=r.slidesToShow,R=r.currentSlide;return S.length>2*A?y+2*A:R>=S.length?S.length+y:y}function n(y,r){if(r.length>2*y){for(var S={},A=r.length-2*y,R=r.length-A,O=A,z=0;z<R;z++)S[z]=O,O++;var N=r.length+R,U=N+r.slice(0,2*y).length,H=0;for(z=N;z<=U;z++)S[z]=H,H++;var K=N,W=0;for(z=R;z<K;z++)S[z]=W,W++;return S}S={};var re=3*r.length,ne=0;for(z=0;z<re;z++)S[z]=ne,++ne===r.length&&(ne=0);return S}function a(y,r){return r.length<y?r:r.length>2*y?r.slice(r.length-2*y,r.length).concat(r,r.slice(0,2*y)):r.concat(r,r)}function u(y,r){return r.length>2*y?2*y:r.length}function f(y,r,S){var A,R=y.currentSlide,O=y.slidesToShow,z=y.itemWidth,N=y.totalItems,U=0,H=0,K=R===0,W=r.length-(r.length-2*O);return r.length<O?(H=U=0,K=A=!1):r.length>2*O?((A=R>=W+r.length)&&(H=-z*(U=R-r.length)),K&&(H=-z*(U=W+(r.length-2*O)))):((A=R>=2*r.length)&&(H=-z*(U=R-r.length)),K&&(H=S.showDots?-z*(U=r.length):-z*(U=N/3))),{isReachingTheEnd:A,isReachingTheStart:K,nextSlide:U,nextPosition:H}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOriginalCounterPart=t,e.getOriginalIndexLookupTableByClones=n,e.getClones=a,e.getInitialSlideInInfiniteMode=u,e.checkClonesPosition=f}(BR)),BR}var P0={},TN;function n8(){if(TN)return P0;TN=1,Object.defineProperty(P0,"__esModule",{value:!0});function e(a,u,f,y){var r=0,S=y||f;return u&&S&&(r=a[S].partialVisibilityGutter||a[S].paritialVisibilityGutter),r}function t(a,u){var f;return u[a]&&(f=(100/u[a].items).toFixed(1)),f}function n(a,u,f){return Math.round(f/(u+(a.centerMode?1:0)))}return P0.getPartialVisibilityGutter=e,P0.getWidthFromDeviceType=t,P0.getItemClientSideWidth=n,P0}var uu={},EN;function iv(){if(EN)return uu;EN=1,Object.defineProperty(uu,"__esModule",{value:!0});var e=n8();function t(O){var z=O.slidesToShow;return O.totalItems<z}function n(O,z){var N,U=O.domLoaded,H=O.slidesToShow,K=O.containerWidth,W=O.itemWidth,re=z.deviceType,ne=z.responsive,se=z.ssr,ue=z.partialVisbile,pe=z.partialVisible,Ce=!!(U&&H&&K&&W);se&&re&&!Ce&&(N=e.getWidthFromDeviceType(re,ne));var Le=!!(se&&re&&!Ce&&N);return{shouldRenderOnSSR:Le,flexBisis:N,domFullyLoaded:Ce,partialVisibilityGutter:e.getPartialVisibilityGutter(ne,ue||pe,re,O.deviceType),shouldRenderAtAll:Le||Ce}}function a(O,z){var N=z.currentSlide,U=z.slidesToShow;return N<=O&&O<N+U}function u(O,z,N){var U=N||O.transform;return!z.infinite&&O.currentSlide===0||t(O)?U:U+O.itemWidth/2}function f(O){return!(0<O.currentSlide)}function y(O){var z=O.currentSlide,N=O.totalItems;return!(z+O.slidesToShow<N)}function r(O,z,N,U){z===void 0&&(z=0);var H=O.currentSlide,K=O.slidesToShow,W=y(O),re=!N.infinite&&W,ne=U||O.transform;if(t(O))return ne;var se=ne+H*z;return re?se+(O.containerWidth-(O.itemWidth-z)*K):se}function S(O,z){return O.rtl?-1*z:z}function A(O,z,N){var U=z.partialVisbile,H=z.partialVisible,K=z.responsive,W=z.deviceType,re=z.centerMode,ne=N||O.transform,se=e.getPartialVisibilityGutter(K,U||H,W,O.deviceType);return S(z,H||U?r(O,se,z,N):re?u(O,z,N):ne)}function R(O,z){var N=O.domLoaded,U=O.slidesToShow,H=O.containerWidth,K=O.itemWidth,W=z.deviceType,re=z.responsive,ne=z.slidesToSlide||1,se=!!(N&&U&&H&&K);return z.ssr&&z.deviceType&&!se&&Object.keys(re).forEach(function(ue){var pe=re[ue].slidesToSlide;W===ue&&pe&&(ne=pe)}),se&&Object.keys(re).forEach(function(ue){var pe=re[ue],Ce=pe.breakpoint,Le=pe.slidesToSlide,qe=Ce.max,ye=Ce.min;Le&&window.innerWidth>=ye&&window.innerWidth<=qe&&(ne=Le)}),ne}return uu.notEnoughChildren=t,uu.getInitialState=n,uu.getIfSlideIsVisbile=a,uu.getTransformForCenterMode=u,uu.isInLeftEnd=f,uu.isInRightEnd=y,uu.getTransformForPartialVsibile=r,uu.parsePosition=S,uu.getTransform=A,uu.getSlidesToSlide=R,uu}var jT={},CN;function _ge(){if(CN)return jT;CN=1,Object.defineProperty(jT,"__esModule",{value:!0});var e=function(t,n,a){var u;return function(){var f=arguments;u||(t.apply(this,f),u=!0,typeof a=="function"&&a(!0),setTimeout(function(){u=!1,typeof a=="function"&&a(!1)},n))}};return jT.default=e,jT}var FR={},AN;function vge(){return AN||(AN=1,function(e){function t(n,a){var u=a.partialVisbile,f=a.partialVisible,y=a.centerMode,r=a.ssr,S=a.responsive;if((u||f)&&y)throw new Error("center mode can not be used at the same time with partialVisible");if(!S)throw r?new Error("ssr mode need to be used in conjunction with responsive prop"):new Error("Responsive prop is needed for deciding the amount of items to show on the screen");if(S&&typeof S!="object")throw new Error("responsive prop must be an object")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}(FR)),FR}var UT={},MN;function xge(){if(MN)return UT;MN=1,Object.defineProperty(UT,"__esModule",{value:!0});var e=iv();function t(n,a,u){u===void 0&&(u=0);var f,y,r=n.slidesToShow,S=n.currentSlide,A=n.itemWidth,R=n.totalItems,O=e.getSlidesToSlide(n,a),z=S+1+u+r+(0<u?0:O);return y=z<=R?-A*(f=S+u+(0<u?0:O)):R<z&&S!==R-r?-A*(f=R-r):f=void 0,{nextSlides:f,nextPosition:y}}return UT.populateNextSlides=t,UT}var VT={},RN;function bge(){if(RN)return VT;RN=1,Object.defineProperty(VT,"__esModule",{value:!0});var e=Ch(),t=iv(),n=iv();function a(u,f,y){y===void 0&&(y=0);var r,S,A=u.currentSlide,R=u.itemWidth,O=u.slidesToShow,z=f.children,N=f.showDots,U=f.infinite,H=t.getSlidesToSlide(u,f),K=A-y-(0<y?0:H),W=(e.Children.toArray(z).length-O)%H;return S=0<=K?(r=K,N&&!U&&0<W&&n.isInRightEnd(u)&&(r=A-W),-R*r):r=K<0&&A!==0?0:void 0,{nextSlides:r,nextPosition:S}}return VT.populatePreviousSlides=a,VT}var NR={},IN;function wge(){return IN||(IN=1,function(e){function t(n,a,u,f,y,r){var S,A,R=n.itemWidth,O=n.slidesToShow,z=n.totalItems,N=n.currentSlide,U=a.infinite,H=!1,K=Math.round((u-f)/R),W=Math.round((f-u)/R),re=u<y;if(y<u&&K<=O){S="right";var ne=Math.abs(-R*(z-O)),se=r-(f-y),ue=N===z-O;(Math.abs(se)<=ne||ue&&U)&&(A=se,H=!0)}return re&&W<=O&&(S="left",((se=r+(y-f))<=0||N===0&&U)&&(H=!0,A=se)),{direction:S,nextPosition:A,canContinue:H}}Object.defineProperty(e,"__esModule",{value:!0}),e.populateSlidesOnMouseTouchMove=t}(NR)),NR}var PN;function i8(){if(PN)return ms;PN=1,Object.defineProperty(ms,"__esModule",{value:!0});var e=XO();ms.getOriginalCounterPart=e.getOriginalCounterPart,ms.getClones=e.getClones,ms.checkClonesPosition=e.checkClonesPosition,ms.getInitialSlideInInfiniteMode=e.getInitialSlideInInfiniteMode;var t=n8();ms.getWidthFromDeviceType=t.getWidthFromDeviceType,ms.getPartialVisibilityGutter=t.getPartialVisibilityGutter,ms.getItemClientSideWidth=t.getItemClientSideWidth;var n=iv();ms.getInitialState=n.getInitialState,ms.getIfSlideIsVisbile=n.getIfSlideIsVisbile,ms.getTransformForCenterMode=n.getTransformForCenterMode,ms.getTransformForPartialVsibile=n.getTransformForPartialVsibile,ms.isInLeftEnd=n.isInLeftEnd,ms.isInRightEnd=n.isInRightEnd,ms.notEnoughChildren=n.notEnoughChildren,ms.getSlidesToSlide=n.getSlidesToSlide;var a=_ge();ms.throttle=a.default;var u=vge();ms.throwError=u.default;var f=xge();ms.populateNextSlides=f.populateNextSlides;var y=bge();ms.populatePreviousSlides=y.populatePreviousSlides;var r=wge();return ms.populateSlidesOnMouseTouchMove=r.populateSlidesOnMouseTouchMove,ms}var T_={},DN;function Sge(){if(DN)return T_;DN=1;var e=T_&&T_.__extends||function(){var u=function(f,y){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,S){r.__proto__=S}||function(r,S){for(var A in S)S.hasOwnProperty(A)&&(r[A]=S[A])})(f,y)};return function(f,y){function r(){this.constructor=f}u(f,y),f.prototype=y===null?Object.create(y):(r.prototype=y.prototype,new r)}}();Object.defineProperty(T_,"__esModule",{value:!0});var t=Ch();function n(u){return"clientY"in u}T_.isMouseMoveEvent=n;var a=function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return e(f,u),f}(t.Component);return T_.default=a,T_}var $T={},HT={},ON;function Tge(){if(ON)return HT;ON=1,Object.defineProperty(HT,"__esModule",{value:!0});var e=XO(),t=iv();function n(a,u,f,y){var r={},S=t.getSlidesToSlide(u,f);return Array(a).fill(0).forEach(function(A,R){var O=e.getOriginalCounterPart(R,u,y);if(R===0)r[0]=O;else{var z=r[R-1]+S;r[R]=z}}),r}return HT.getLookupTableForNextSlides=n,HT}var LN;function Ege(){if(LN)return $T;LN=1,Object.defineProperty($T,"__esModule",{value:!0});var e=Ch(),t=XO(),n=Tge(),a=iv(),u=function(f){var y=f.props,r=f.state,S=f.goToSlide,A=f.getState,R=y.showDots,O=y.customDot,z=y.dotListClass,N=y.infinite,U=y.children;if(!R||a.notEnoughChildren(r))return null;var H,K=r.currentSlide,W=r.slidesToShow,re=a.getSlidesToSlide(r,y),ne=e.Children.toArray(U);H=N?Math.ceil(ne.length/re):Math.ceil((ne.length-W)/re)+1;var se=n.getLookupTableForNextSlides(H,r,y,ne),ue=t.getOriginalIndexLookupTableByClones(W,ne),pe=ue[K];return e.createElement("ul",{className:"react-multi-carousel-dot-list "+z},Array(H).fill(0).map(function(Ce,Le){var qe,ye;if(N){ye=se[Le];var Xe=ue[ye];qe=pe===Xe||Xe<=pe&&pe<Xe+re}else{var ut=ne.length-W,et=Le*re;qe=(ye=ut<et?ut:et)===K||ye<K&&K<ye+re&&K<ne.length-W}return O?e.cloneElement(O,{index:Le,active:qe,key:Le,onClick:function(){return S(ye)},carouselState:A()}):e.createElement("li",{"data-index":Le,key:Le,className:"react-multi-carousel-dot "+(qe?"react-multi-carousel-dot--active":"")},e.createElement("button",{"aria-label":"Go to slide "+(Le+1),onClick:function(){return S(ye)}}))}))};return $T.default=u,$T}var i1={},kN;function Cge(){if(kN)return i1;kN=1,Object.defineProperty(i1,"__esModule",{value:!0});var e=Ch(),t=function(a){var u=a.customLeftArrow,f=a.getState,y=a.previous,r=a.disabled,S=a.rtl;if(u)return e.cloneElement(u,{onClick:function(){return y()},carouselState:f(),disabled:r,rtl:S});var A=S?"rtl":"";return e.createElement("button",{"aria-label":"Go to previous slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left "+A,onClick:function(){return y()},type:"button",disabled:r})};i1.LeftArrow=t;var n=function(a){var u=a.customRightArrow,f=a.getState,y=a.next,r=a.disabled,S=a.rtl;if(u)return e.cloneElement(u,{onClick:function(){return y()},carouselState:f(),disabled:r,rtl:S});var A=S?"rtl":"";return e.createElement("button",{"aria-label":"Go to next slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right "+A,onClick:function(){return y()},type:"button",disabled:r})};return i1.RightArrow=n,i1}var GT={},zN;function Age(){if(zN)return GT;zN=1,Object.defineProperty(GT,"__esModule",{value:!0});var e=Ch(),t=i8(),n=function(a){var u=a.props,f=a.state,y=a.goToSlide,r=a.clones,S=a.notEnoughChildren,A=f.itemWidth,R=u.children,O=u.infinite,z=u.itemClass,N=u.itemAriaLabel,U=u.partialVisbile,H=u.partialVisible,K=t.getInitialState(f,u),W=K.flexBisis,re=K.shouldRenderOnSSR,ne=K.domFullyLoaded,se=K.partialVisibilityGutter;return K.shouldRenderAtAll?(U&&console.warn('WARNING: Please correct props name: "partialVisible" as old typo will be removed in future versions!'),e.createElement(e.Fragment,null,(O?r:e.Children.toArray(R)).map(function(ue,pe){return e.createElement("li",{key:pe,"data-index":pe,onClick:function(){u.focusOnSelect&&y(pe)},"aria-hidden":t.getIfSlideIsVisbile(pe,f)?"false":"true","aria-label":N||(ue.props.ariaLabel?ue.props.ariaLabel:null),style:{flex:re?"1 0 "+W+"%":"auto",position:"relative",width:ne?((U||H)&&se&&!S?A-se:A)+"px":"auto"},className:"react-multi-carousel-item "+(t.getIfSlideIsVisbile(pe,f)?"react-multi-carousel-item--active":"")+" "+z},ue)}))):null};return GT.default=n,GT}var BN;function Mge(){if(BN)return I0;BN=1;var e=I0&&I0.__extends||function(){var O=function(z,N){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,H){U.__proto__=H}||function(U,H){for(var K in H)H.hasOwnProperty(K)&&(U[K]=H[K])})(z,N)};return function(z,N){function U(){this.constructor=z}O(z,N),z.prototype=N===null?Object.create(N):(U.prototype=N.prototype,new U)}}();Object.defineProperty(I0,"__esModule",{value:!0});var t=Ch(),n=i8(),a=Sge(),u=Ege(),f=Cge(),y=Age(),r=iv(),S=400,A="transform 400ms ease-in-out",R=function(O){function z(N){var U=O.call(this,N)||this;return U.containerRef=t.createRef(),U.listRef=t.createRef(),U.state={itemWidth:0,slidesToShow:0,currentSlide:0,totalItems:t.Children.count(N.children),deviceType:"",domLoaded:!1,transform:0,containerWidth:0},U.onResize=U.onResize.bind(U),U.handleDown=U.handleDown.bind(U),U.handleMove=U.handleMove.bind(U),U.handleOut=U.handleOut.bind(U),U.onKeyUp=U.onKeyUp.bind(U),U.handleEnter=U.handleEnter.bind(U),U.setIsInThrottle=U.setIsInThrottle.bind(U),U.next=n.throttle(U.next.bind(U),N.transitionDuration||S,U.setIsInThrottle),U.previous=n.throttle(U.previous.bind(U),N.transitionDuration||S,U.setIsInThrottle),U.goToSlide=n.throttle(U.goToSlide.bind(U),N.transitionDuration||S,U.setIsInThrottle),U.onMove=!1,U.initialX=0,U.lastX=0,U.isAnimationAllowed=!1,U.direction="",U.initialY=0,U.isInThrottle=!1,U.transformPlaceHolder=0,U}return e(z,O),z.prototype.resetTotalItems=function(){var N=this,U=t.Children.count(this.props.children),H=n.notEnoughChildren(this.state)?0:Math.max(0,Math.min(this.state.currentSlide,U));this.setState({totalItems:U,currentSlide:H},function(){N.setContainerAndItemWidth(N.state.slidesToShow,!0)})},z.prototype.setIsInThrottle=function(N){N===void 0&&(N=!1),this.isInThrottle=N},z.prototype.setTransformDirectly=function(N,U){var H=this.props.additionalTransfrom;this.transformPlaceHolder=N;var K=r.getTransform(this.state,this.props,this.transformPlaceHolder);this.listRef&&this.listRef.current&&(this.setAnimationDirectly(U),this.listRef.current.style.transform="translate3d("+(K+H)+"px,0,0)")},z.prototype.setAnimationDirectly=function(N){this.listRef&&this.listRef.current&&(this.listRef.current.style.transition=N?this.props.customTransition||A:"none")},z.prototype.componentDidMount=function(){this.setState({domLoaded:!0}),this.setItemsToShow(),window.addEventListener("resize",this.onResize),this.onResize(!0),this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),this.props.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},z.prototype.setClones=function(N,U,H,K){var W=this;K===void 0&&(K=!1),this.isAnimationAllowed=!1;var re=t.Children.toArray(this.props.children),ne=n.getInitialSlideInInfiniteMode(N||this.state.slidesToShow,re),se=n.getClones(this.state.slidesToShow,re),ue=re.length<this.state.slidesToShow?0:this.state.currentSlide;this.setState({totalItems:se.length,currentSlide:H&&!K?ue:ne},function(){W.correctItemsPosition(U||W.state.itemWidth)})},z.prototype.setItemsToShow=function(N,U){var H=this,K=this.props.responsive;Object.keys(K).forEach(function(W){var re=K[W],ne=re.breakpoint,se=re.items,ue=ne.max,pe=ne.min,Ce=[window.innerWidth];window.screen&&window.screen.width&&Ce.push(window.screen.width);var Le=Math.min.apply(Math,Ce);pe<=Le&&Le<=ue&&(H.setState({slidesToShow:se,deviceType:W}),H.setContainerAndItemWidth(se,N,U))})},z.prototype.setContainerAndItemWidth=function(N,U,H){var K=this;if(this.containerRef&&this.containerRef.current){var W=this.containerRef.current.offsetWidth,re=n.getItemClientSideWidth(this.props,N,W);this.setState({containerWidth:W,itemWidth:re},function(){K.props.infinite&&K.setClones(N,re,U,H)}),U&&this.correctItemsPosition(re)}},z.prototype.correctItemsPosition=function(N,U,H){U&&(this.isAnimationAllowed=!0),!U&&this.isAnimationAllowed&&(this.isAnimationAllowed=!1);var K=this.state.totalItems<this.state.slidesToShow?0:-N*this.state.currentSlide;H&&this.setTransformDirectly(K,!0),this.setState({transform:K})},z.prototype.onResize=function(N){var U;U=!!this.props.infinite&&(typeof N!="boolean"||!N),this.setItemsToShow(U)},z.prototype.componentDidUpdate=function(N,U){var H=this,K=N.keyBoardControl,W=N.autoPlay,re=N.children,ne=U.containerWidth,se=U.domLoaded,ue=U.currentSlide;if(this.containerRef&&this.containerRef.current&&this.containerRef.current.offsetWidth!==ne&&(this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),this.itemsToShowTimeout=setTimeout(function(){H.setItemsToShow(!0)},this.props.transitionDuration||S)),K&&!this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),!K&&this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),W&&!this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),W||!this.props.autoPlay||this.autoPlay||(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed)),re.length!==this.props.children.length?z.clonesTimeout=setTimeout(function(){H.props.infinite?H.setClones(H.state.slidesToShow,H.state.itemWidth,!0,!0):H.resetTotalItems()},this.props.transitionDuration||S):this.props.infinite&&this.state.currentSlide!==ue&&this.correctClonesPosition({domLoaded:se}),this.transformPlaceHolder!==this.state.transform&&(this.transformPlaceHolder=this.state.transform),this.props.autoPlay&&this.props.rewind&&!this.props.infinite&&n.isInRightEnd(this.state)){var pe=this.props.transitionDuration||S;z.isInThrottleTimeout=setTimeout(function(){H.setIsInThrottle(!1),H.resetAutoplayInterval(),H.goToSlide(0,void 0,!!H.props.rewindWithAnimation)},pe+this.props.autoPlaySpeed)}},z.prototype.correctClonesPosition=function(N){var U=this,H=N.domLoaded,K=t.Children.toArray(this.props.children),W=n.checkClonesPosition(this.state,K,this.props),re=W.isReachingTheEnd,ne=W.isReachingTheStart,se=W.nextSlide,ue=W.nextPosition;this.state.domLoaded&&H&&(re||ne)&&(this.isAnimationAllowed=!1,z.transformTimeout=setTimeout(function(){U.setState({transform:ue,currentSlide:se})},this.props.transitionDuration||S))},z.prototype.next=function(N){var U=this;N===void 0&&(N=0);var H=this.props,K=H.afterChange,W=H.beforeChange;if(!n.notEnoughChildren(this.state)){var re=n.populateNextSlides(this.state,this.props,N),ne=re.nextSlides,se=re.nextPosition,ue=this.state.currentSlide;ne!==void 0&&se!==void 0&&(typeof W=="function"&&W(ne,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:se,currentSlide:ne},function(){typeof K=="function"&&(z.afterChangeTimeout=setTimeout(function(){K(ue,U.getState())},U.props.transitionDuration||S))}))}},z.prototype.previous=function(N){var U=this;N===void 0&&(N=0);var H=this.props,K=H.afterChange,W=H.beforeChange;if(!n.notEnoughChildren(this.state)){var re=n.populatePreviousSlides(this.state,this.props,N),ne=re.nextSlides,se=re.nextPosition;if(ne!==void 0&&se!==void 0){var ue=this.state.currentSlide;typeof W=="function"&&W(ne,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:se,currentSlide:ne},function(){typeof K=="function"&&(z.afterChangeTimeout2=setTimeout(function(){K(ue,U.getState())},U.props.transitionDuration||S))})}}},z.prototype.resetAutoplayInterval=function(){this.props.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},z.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),z.clonesTimeout&&clearTimeout(z.clonesTimeout),z.isInThrottleTimeout&&clearTimeout(z.isInThrottleTimeout),z.transformTimeout&&clearTimeout(z.transformTimeout),z.afterChangeTimeout&&clearTimeout(z.afterChangeTimeout),z.afterChangeTimeout2&&clearTimeout(z.afterChangeTimeout2),z.afterChangeTimeout3&&clearTimeout(z.afterChangeTimeout3)},z.prototype.resetMoveStatus=function(){this.onMove=!1,this.initialX=0,this.lastX=0,this.direction="",this.initialY=0},z.prototype.getCords=function(N){var U=N.clientX,H=N.clientY;return{clientX:r.parsePosition(this.props,U),clientY:r.parsePosition(this.props,H)}},z.prototype.handleDown=function(N){if(!(!a.isMouseMoveEvent(N)&&!this.props.swipeable||a.isMouseMoveEvent(N)&&!this.props.draggable||this.isInThrottle)){var U=this.getCords(a.isMouseMoveEvent(N)?N:N.touches[0]),H=U.clientX,K=U.clientY;this.onMove=!0,this.initialX=H,this.initialY=K,this.lastX=H,this.isAnimationAllowed=!1}},z.prototype.handleMove=function(N){if(!(!a.isMouseMoveEvent(N)&&!this.props.swipeable||a.isMouseMoveEvent(N)&&!this.props.draggable||n.notEnoughChildren(this.state))){var U=this.getCords(a.isMouseMoveEvent(N)?N:N.touches[0]),H=U.clientX,K=U.clientY,W=this.initialX-H,re=this.initialY-K;if(this.onMove){if(!(Math.abs(W)>Math.abs(re)))return;var ne=n.populateSlidesOnMouseTouchMove(this.state,this.props,this.initialX,this.lastX,H,this.transformPlaceHolder),se=ne.direction,ue=ne.nextPosition,pe=ne.canContinue;se&&(this.direction=se,pe&&ue!==void 0&&this.setTransformDirectly(ue)),this.lastX=H}}},z.prototype.handleOut=function(N){this.props.autoPlay&&!this.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed));var U=N.type==="touchend"&&!this.props.swipeable,H=(N.type==="mouseleave"||N.type==="mouseup")&&!this.props.draggable;if(!U&&!H&&this.onMove){if(this.setAnimationDirectly(!0),this.direction==="right")if(this.initialX-this.lastX>=this.props.minimumTouchDrag){var K=Math.round((this.initialX-this.lastX)/this.state.itemWidth);this.next(K)}else this.correctItemsPosition(this.state.itemWidth,!0,!0);this.direction==="left"&&(this.lastX-this.initialX>this.props.minimumTouchDrag?(K=Math.round((this.lastX-this.initialX)/this.state.itemWidth),this.previous(K)):this.correctItemsPosition(this.state.itemWidth,!0,!0)),this.resetMoveStatus()}},z.prototype.isInViewport=function(N){var U=N.getBoundingClientRect(),H=U.top,K=H===void 0?0:H,W=U.left,re=W===void 0?0:W,ne=U.bottom,se=ne===void 0?0:ne,ue=U.right,pe=ue===void 0?0:ue;return 0<=K&&0<=re&&se<=(window.innerHeight||document.documentElement.clientHeight)&&pe<=(window.innerWidth||document.documentElement.clientWidth)},z.prototype.isChildOfCarousel=function(N){return!!(N instanceof Element&&this.listRef&&this.listRef.current)&&this.listRef.current.contains(N)},z.prototype.onKeyUp=function(N){var U=N.target;switch(N.keyCode){case 37:if(this.isChildOfCarousel(U))return this.previous();break;case 39:if(this.isChildOfCarousel(U))return this.next();break;case 9:if(this.isChildOfCarousel(U)&&U instanceof HTMLInputElement&&this.isInViewport(U))return this.next()}},z.prototype.handleEnter=function(N){a.isMouseMoveEvent(N)&&this.autoPlay&&this.props.autoPlay&&this.props.pauseOnHover&&(clearInterval(this.autoPlay),this.autoPlay=void 0)},z.prototype.goToSlide=function(N,U,H){var K=this;if(H===void 0&&(H=!0),!this.isInThrottle){var W=this.state.itemWidth,re=this.props,ne=re.afterChange,se=re.beforeChange,ue=this.state.currentSlide;typeof se!="function"||U&&(typeof U!="object"||U.skipBeforeChange)||se(N,this.getState()),this.isAnimationAllowed=H,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({currentSlide:N,transform:-W*N},function(){K.props.infinite&&K.correctClonesPosition({domLoaded:!0}),typeof ne!="function"||U&&(typeof U!="object"||U.skipAfterChange)||(z.afterChangeTimeout3=setTimeout(function(){ne(ue,K.getState())},K.props.transitionDuration||S))})}},z.prototype.getState=function(){return this.state},z.prototype.renderLeftArrow=function(N){var U=this,H=this.props,K=H.customLeftArrow,W=H.rtl;return t.createElement(f.LeftArrow,{customLeftArrow:K,getState:function(){return U.getState()},previous:this.previous,disabled:N,rtl:W})},z.prototype.renderRightArrow=function(N){var U=this,H=this.props,K=H.customRightArrow,W=H.rtl;return t.createElement(f.RightArrow,{customRightArrow:K,getState:function(){return U.getState()},next:this.next,disabled:N,rtl:W})},z.prototype.renderButtonGroups=function(){var N=this,U=this.props.customButtonGroup;return U?t.cloneElement(U,{previous:function(){return N.previous()},next:function(){return N.next()},goToSlide:function(H,K){return N.goToSlide(H,K)},carouselState:this.getState()}):null},z.prototype.renderDotsList=function(){var N=this;return t.createElement(u.default,{state:this.state,props:this.props,goToSlide:this.goToSlide,getState:function(){return N.getState()}})},z.prototype.renderCarouselItems=function(){var N=[];if(this.props.infinite){var U=t.Children.toArray(this.props.children);N=n.getClones(this.state.slidesToShow,U)}return t.createElement(y.default,{clones:N,goToSlide:this.goToSlide,state:this.state,notEnoughChildren:n.notEnoughChildren(this.state),props:this.props})},z.prototype.render=function(){var N=this.props,U=N.deviceType,H=N.arrows,K=N.renderArrowsWhenDisabled,W=N.removeArrowOnDeviceType,re=N.infinite,ne=N.containerClass,se=N.sliderClass,ue=N.customTransition,pe=N.additionalTransfrom,Ce=N.renderDotsOutside,Le=N.renderButtonGroupOutside,qe=N.className,ye=N.rtl,Xe=n.getInitialState(this.state,this.props),ut=Xe.shouldRenderOnSSR,et=Xe.shouldRenderAtAll,ot=n.isInLeftEnd(this.state),mt=n.isInRightEnd(this.state),$e=H&&!(W&&(U&&-1<W.indexOf(U)||this.state.deviceType&&-1<W.indexOf(this.state.deviceType)))&&!n.notEnoughChildren(this.state)&&et,it=!re&&ot,Tt=!re&&mt,xt=r.getTransform(this.state,this.props);return t.createElement(t.Fragment,null,t.createElement("div",{className:"react-multi-carousel-list "+ne+" "+qe,dir:ye?"rtl":"ltr",ref:this.containerRef},t.createElement("ul",{ref:this.listRef,className:"react-multi-carousel-track "+se,style:{transition:this.isAnimationAllowed?ue||A:"none",overflow:ut?"hidden":"unset",transform:"translate3d("+(xt+pe)+"px,0,0)"},onMouseMove:this.handleMove,onMouseDown:this.handleDown,onMouseUp:this.handleOut,onMouseEnter:this.handleEnter,onMouseLeave:this.handleOut,onTouchStart:this.handleDown,onTouchMove:this.handleMove,onTouchEnd:this.handleOut},this.renderCarouselItems()),$e&&(!it||K)&&this.renderLeftArrow(it),$e&&(!Tt||K)&&this.renderRightArrow(Tt),et&&!Le&&this.renderButtonGroups(),et&&!Ce&&this.renderDotsList()),et&&Ce&&this.renderDotsList(),et&&Le&&this.renderButtonGroups())},z.defaultProps={slidesToSlide:1,infinite:!1,draggable:!0,swipeable:!0,arrows:!0,renderArrowsWhenDisabled:!1,containerClass:"",sliderClass:"",itemClass:"",keyBoardControl:!0,autoPlaySpeed:3e3,showDots:!1,renderDotsOutside:!1,renderButtonGroupOutside:!1,minimumTouchDrag:80,className:"",dotListClass:"",focusOnSelect:!1,centerMode:!1,additionalTransfrom:0,pauseOnHover:!0,shouldResetAutoplay:!0,rewind:!1,rtl:!1,rewindWithAnimation:!1},z}(t.Component);return I0.default=R,I0}var FN;function Rge(){if(FN)return NT;FN=1,Object.defineProperty(NT,"__esModule",{value:!0});var e=Mge();return NT.default=e.default,NT}var jR,NN;function Ige(){return NN||(NN=1,jR=Rge()),jR}var Pge=Ige();const Dge=Im(Pge);Ex.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";const D0=new Array(10).fill(null).map((e,t)=>({id:t,label:`Day ${t+1}`,center:[72.5714+t*.1,23.0225+t*.1],zoom:10+t%3})),jN=({center:e,zoom:t,mapStyle:n})=>{const a=ee.useRef(null);return ee.useEffect(()=>{if(!a.current)return;const u=new Ex.Map({container:a.current,style:n,center:e,zoom:t});return()=>u.remove()},[e,t,n]),te.jsx(fr,{ref:a,sx:{width:"100%",height:"100%"}})};function Oge(){const[e,t]=ee.useState(D0[0]),[n,a]=ee.useState(D0[1]),u=xs(),f=(r,S)=>{const A=D0.find(R=>R.id===S);r==="first"?t(A):a(A)},y={superLargeDesktop:{breakpoint:{max:4e3,min:1536},items:5},desktop:{breakpoint:{max:1536,min:1024},items:4},tablet:{breakpoint:{max:1024,min:640},items:3},mobile:{breakpoint:{max:640,min:0},items:2}};return te.jsxs(fr,{p:3,children:[te.jsx(Ii,{variant:"h4",gutterBottom:!0,children:"Compare Progress"}),te.jsx(fr,{sx:{mt:4,mb:4,height:100},children:te.jsx(Dge,{responsive:y,centerMode:!0,infinite:!0,autoPlay:!0,autoPlaySpeed:5e3,itemClass:"carousel-item-padding-40-px",children:D0.map((r,S)=>te.jsx(Vg,{sx:{mx:1,borderColor:u.palette.primary,borderRadius:2,border:1,boxShadow:6,height:"80px"},children:te.jsx(ww,{children:te.jsx(Ii,{align:"center",variant:"subtitle1",children:r.label})})},r.id))})}),te.jsxs(fr,{display:"flex",gap:2,mb:3,children:[te.jsx($_,{fullWidth:!0,children:te.jsx(WE,{value:e.id,onChange:r=>f("first",r.target.value),children:D0.map(r=>te.jsx(Bg,{value:r.id,children:r.label},r.id))})}),te.jsx($_,{fullWidth:!0,children:te.jsx(WE,{value:n.id,onChange:r=>f("second",r.target.value),children:D0.map(r=>te.jsx(Bg,{value:r.id,children:r.label},r.id))})})]}),te.jsx(fr,{mb:5,borderRadius:2,overflow:"hidden",sx:{height:400},children:te.jsx(t8,{itemOne:te.jsx(fr,{sx:{width:"100%",height:"100%"},children:te.jsx(jN,{center:e.center,zoom:e.zoom,mapStyle:"mapbox://styles/mapbox/streets-v11"})}),itemTwo:te.jsx(fr,{sx:{width:"100%",height:"100%"},children:te.jsx(jN,{center:n.center,zoom:n.zoom,mapStyle:"mapbox://styles/mapbox/satellite-v9"})}),style:{height:"100%"}})})]})}const Lge=["Info","Files","Compare","DPR FORM"],kge=()=>{const[e,t]=ee.useState(0),n=(a,u)=>{t(u)};return te.jsxs(Kg,{elevation:3,sx:{p:2},children:[te.jsx(mue,{value:e,onChange:n,variant:"fullWidth",sx:{mb:2,borderBottom:"1px solid #e0e0e0"},children:Lge.map((a,u)=>te.jsx(Yce,{label:a},u))}),te.jsxs(fr,{children:[e===0?te.jsx(Pme,{}):null,e===1?te.jsx(cge,{}):null,e===2?te.jsx(Oge,{}):null,e===3?te.jsx(uge,{}):null]})]})};Ex.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";function zge(){const e=ee.useRef(null),t=xs(),[n,a]=ee.useState(""),[u,f]=ee.useState([{user:"User I",text:"Initial survey completed.",time:"Just now"},{user:"User II",text:"Awaiting GIS data upload.",time:"2 hours ago"}]);ee.useEffect(()=>{const r=new Ex.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v11",center:[72.5714,23.0225],zoom:10});return()=>r.remove()},[]);const y=()=>{if(!n.trim())return;const r={user:"You",text:n.trim(),time:"Just now"};f([r,...u]),a("")};return te.jsxs(fr,{sx:{px:3,py:2},children:[te.jsx(Ii,{variant:"h4",mb:2,children:"Project Map View"}),te.jsx(fr,{ref:e,sx:{height:"60vh",borderRadius:2,overflow:"hidden",mb:4}}),te.jsx(Ii,{variant:"h5",gutterBottom:!0,children:"Comments"}),te.jsxs(sc,{direction:"row",justifyContent:"center",spacing:2,alignItems:"center",mb:2,children:[te.jsx(kae,{fullWidth:!0,multiline:!0,minRows:1,placeholder:"Add a comment...",value:n,onChange:r=>a(r.target.value),sx:{backgroundColor:t.palette.background.paper,borderRadius:2}}),te.jsx(J_,{variant:"contained",color:"secondary",onClick:y,sx:{height:"fit-content",mt:1},children:"Post"})]}),te.jsx(sc,{spacing:2,children:u.map((r,S)=>te.jsx(Vg,{elevation:1,sx:{borderRadius:2},children:te.jsxs(ww,{children:[te.jsxs(sc,{direction:"row",spacing:2,alignItems:"center",mb:1,children:[te.jsx(IC,{children:r.user.charAt(0)}),te.jsxs(sc,{children:[te.jsx(Ii,{fontWeight:600,children:r.user}),te.jsx(Ii,{variant:"caption",color:"text.secondary",children:r.time})]})]}),te.jsx(Pd,{sx:{my:1}}),te.jsx(Ii,{color:"text.primary",children:r.text})]})},S))})]})}const Bge=hv(ee.lazy(()=>cv(()=>import("./index-Cal895TT.js"),[],import.meta.url))),Fge=hv(ee.lazy(()=>cv(()=>import("./Typography-BDVnZRk3.js"),__vite__mapDeps([3,4]),import.meta.url))),Nge=hv(ee.lazy(()=>cv(()=>import("./Color-B-NZ0slH.js"),__vite__mapDeps([5,4]),import.meta.url))),jge=hv(ee.lazy(()=>cv(()=>import("./Shadow-FRULrHxL.js"),__vite__mapDeps([6,4]),import.meta.url))),Uge=hv(ee.lazy(()=>cv(()=>import("./index-BLsr5WRB.js"),[],import.meta.url))),Vge={path:"/",element:te.jsx(Pce,{}),children:[{path:"/dashboard",element:te.jsx(MR,{element:Bge})},{path:"file",element:te.jsx(Dce,{})},{path:"createProject",element:te.jsx(MR,{element:lme})},{path:"typography",element:te.jsx(Fge,{})},{path:"color",element:te.jsx(Nge,{})},{path:"shadow",element:te.jsx(jge,{})},{path:"/sample-page",element:te.jsx(Uge,{})},{path:"/project/:projectID",element:te.jsx(kge,{})},{path:"/project",element:te.jsx(MR,{element:vue})},{path:"/project/:projectID/:projectWorkDayID",element:te.jsx(zge,{})}]},$ge=""+new URL("1-DNv9qW5S.png",import.meta.url).href,Hge="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAZhtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAANGlsb2MAAAAAREAAAgACAAAAAAG8AAEAAAAAAAAGkgABAAAAAAhOAAEAAAAAAAACsQAAADhpaW5mAAAAAAACAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAFWluZmUCAAAAAAIAAGF2MDEAAAAA12lwcnAAAACxaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EBHAAAAAAUaXNwZQAAAAAAAALCAAAA7AAAAA5waXhpAAAAAAEIAAAAOGF1eEMAAAAAdXJuOm1wZWc6bXBlZ0I6Y2ljcDpzeXN0ZW1zOmF1eGlsaWFyeTphbHBoYQAAAAAMYXYxQ4EhAgAAAAAUaXNwZQAAAAAAAALCAAAA7AAAABBwaXhpAAAAAAMICAgAAAAeaXBtYQAAAAAAAAACAAEEgYYHiAACBIIDhIUAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAACUttZGF0EgAKBhhl7B62FTKFDUyACAJ0BBFbO8aIkEZoPEP/rOoYLZ6e5oAO+917OXuCwLfbFpMuBJoKzvBjD9MohY5sHcU1IulfEP6Cd/MdIltEks/56docRnAc1Z+nvCYG/1ZNWjnVAzV30W5wEZtR2e8kIBf4haGYpgoAQK9y5IqolKMfb4UpGNyKMuZBBQgSPfixXHtxqLElzba3ev8t91WJ4A8+etTjp//5LKGy4iJ6f3V3884s92niMU8efaMbQFEx34zEthCLPKpWSmRlrsfvAELGvputiztPnXtyuIFGOZ6pO3za+j/PojcY8Bjmq7APJOWcWt4lc67MAOazw/sUqvWWlb315M3VR4Og6LQaTRcFeHeN8KrnxtFeu4tYlcsiisXokG4f5MuehwA5mUbKpLxBfbEs3Soy/OPGb7H3kApphMPnlkJuMus60S41OxUU95RQIiV1JaDFe0RpVFaek30DgURMrrNjvysh6oTsURVd3jkNX3WuqZtoiq6aoVmg9JkwAv+lN2nOpbNmAlVcTnoTgz/wMh8S8e+UR6ZIfFjeZA/1fDi2qj81svHtknWtvsmv8U+Ljgl4Yf4IQO31F0/QmZo2VLyHSKO/6IK6RtT3okLVznuAYMBwcG77xt4pmxwH86xAHkWIh0K3TYjvI3Uhsr5Outeigu+awitCl+JSokfs8pnbJBxS4cQ/Yuxrf1z/Ebu17MSUx3gSEJqnqdxZkrGqeIz+tZfv1BEjG+Cj6H+30FpLvrBDeS81mLj87n9/22RnUyWgTz6SzAh93O4tRZLOK2iS3gpdGl2cOlOJsRSr/J4y0gUqsr5KiaNOdqD2qO5sb5TGjcpkcftM5Cu7unZK0kcmC1HjFBiV/4J1Hkud8V3ca3cPh80rZ6U5QC/5a6lh3cnhLQ0SbdxCuZgxzrQbz819dZA0j4hDEnBZLD+eLKBjEnvEoyBs58+ZZXqo8pL5rCqFggD/ek/wsXkJ1WuOuzSV52lju0ULt1DpKLEoJQRAt4p9IUssjj+18qP7665hmZbYTqlhC9KA4kMZTHP/5KikwMmQPQPJP0ZLDb9Dk/Tb/K7tTlML2eQYc5KanWMby6kPQTqls6oXobcGRoRCnDmRlPx3MHMhEq/GPgCGyTLTCFj7GkU/YM/RmC7X50lV+hG9/qX97L9+hbr04CErUTsIPcRA9An5TrG/ZMVfeHpL+xY7s49qdsnoN0GNn9mDku0u5XWJ2byz51yc/RvaLXVeS0O6OFjeh32ozyfh7leCpkLfIU/yDe0664iPjcE3z+ABFR4ToK+M0UHEprFn+qVpC3gm6AuvHpxE+Yv1pHqSl5GrewDGxqO7/eP//xjl4g/6IRdvG2V/tCwNsVrpqP21Oe5T6sCv4ax2/OnKUDahRz9TP7Ov6Ds62emXTFvWW2pTD8/3Nk2zajiatKla3zvX3DjLvWyNE9OnNExi67CRBUnYkAOaw8caT+pbSqpRs9YoOb/MShNDdbViTp4DLSynsaNjHJ66NQqMRKhcXSvxPPnoh5zRl7VrFF+17a9EjuA0GpWi78/Lz5+TbVGThePr8MGIU3892KFdtdQORN3Utm3x/O+pnYDoCBbGeUtRt6ICCdjlDnT7M6dQ0UCT73GtHSUdrhx1fF3KU5S4iNbFJXZYDbS+onDddTcIgzdmKUyv0V3VoATzKgYYKo4Zw/96xlyngX52iVAu2Zd2fOKJ4/fNs2JvU/upn5MKgoik5Vk2qiZPywqPhkYYbyLOam0HVELWp2DUpBKIQyEskoGd59vwDS4ITss29afLY1yngomN1GlEtzzCo6CI/KiustJcb27UWvBlHZeofhqy0hjdssk6GgoJfGOZg4dcgs1aZAzD0XCoWPyauFc0QGsx10q66fM5N2zvQKyF7ptzKEXo74RNFJRmYfEiMsKI260+zLtx9WTtA9gWgfN/L4FW73fsECPe4eMGOIg0ygMIprEYi7wO4aVOmqPZP+tyMDcfdqp5zQqKfZqZ+eB6C36UWjafvuKhPt/7E+Qf2ngyEmWWuUebcfzxsJeADlRqeax9T5qF0y3N5lhCoMsMpf9e3SviYuLnRd9oPga5Z8rZU+rYmBHyafClTrTc7AM3Yuu/R5EIQYvFkpP0vrQzUx/5U0xoBlGsJZRCE+B7iEQl7bbm2f4viG0yCVVW3ClpBWNBnufJYM46cVtDwI9J/Ijm2+mMZv6j/Ls2g4yZRqsBaH6QhucLdVg9oYPCmx4SAAoGOGXsHrYJMqQFTIACAaIvtJd+as80kWpqntUrStMHankfVhjtg6xtS9FnEtd4uvk7Nu0HQJKOtPC6lsS1i5bPVsOU9+Qt6tYsTLzETc8dGalrZlMZqYavMc9wwBB39iLZIaM1/CyLLZDAS0MpMcvPCVnbpj2iI+fQl2R8CZHfXJOvacAE2aXSJAhUeMs6HICPWK25OkWIgc/j5o3HXRoOHFd8ef2A7rn6eG2dlPEBu7XbT15l8p9uJn1rHKAVs3aSqiHwoar0y7E0rqpxsx67i4xsAWfbdhTzFt9aCeOKcu6TVJM+39ru/x0Qg9HNpfg5HxvAZdEJGab5YcDvkDMpYjfNOaBLVjd9ZDvaM5fKGJZptAar9Ale83+2FB0HADKX41VQYCibISaaZkPaqgjlTQCpx16R+S0bC3dBqrziC0v7Yr+FmfbA0fa+bqHygxa3jMO5jDa0Yiov2ik696bZnV7vG03AG5yIAa1k7Urt7N9IFkbMj5JBbQIj9o9w8d8yKwN8DJs+ig0/7ny6TSnIhA45aDg8kc8zQdUDPYQ/mnIH4bJ/m//GTOIk0PRi8TRzFtrlaq7JIdYf23Pf1t1rU6DEn3qsQ8v42b1ZCJdhNp9o76qcxp3gLeymOM1d5btjN1vG9acUCbOj111hxWAAEyqIoB4+GnQ3gqytFrYv7m37pI12q/aK44f6vq1Tkk7cC77ic4qG+rDKyc8bkKl2lYyOsciHLxDMsQacGjcDj6CuW5dxoi8iPxrA0BRPWKmWj66EGt7dSI6sMQcYwqoFAb9OqNcutksZzqMY53lG0ICIIPa0rbe57HiZifAYkn4d1HrOXXn5R6/JfxvfIFGrdYaTUMhQSAACzNHYGkaiHteHYX0q3cGZMAHRFdlZzezUe7rRp40ZieKR/rVs8A==",Gge="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAZhtZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAANGlsb2MAAAAAREAAAgACAAAAAAG8AAEAAAAAAAAFjAABAAAAAAdIAAEAAAAAAAACfQAAADhpaW5mAAAAAAACAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAFWluZmUCAAAAAAIAAGF2MDEAAAAA12lwcnAAAACxaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EBHAAAAAAUaXNwZQAAAAAAAALCAAAA7AAAAA5waXhpAAAAAAEIAAAAOGF1eEMAAAAAdXJuOm1wZWc6bXBlZ0I6Y2ljcDpzeXN0ZW1zOmF1eGlsaWFyeTphbHBoYQAAAAAMYXYxQ4EhAgAAAAAUaXNwZQAAAAAAAALCAAAA7AAAABBwaXhpAAAAAAMICAgAAAAeaXBtYQAAAAAAAAACAAEEgYYHiAACBIIDhIUAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAACBFtZGF0EgAKBhhl7B62FTL/CkyACAJ0BBFbO8hH+nnalVAYLaJyv4FDq0sXtyWD0opMnCXTYmkGR2tOdBdT+UoFVG5/EfMmqr3CSnmf57X9h3FffwByOqJg9yGviI+Z2G8NfKoAwGVajuA0j8yTT0nbwTC39R989kx8TRdDod/RMePHZJ6ftA0JxWwwJIgtX/+JaTBWuF6dheB69pcn1Z6+BpUb51XjM9qh6mZEyzL15+owMm0UABRvJQL7/O1panTPn+H2S/wjAerFvutHMkZfWKhyRxZs+iNCk/YsoaxQHwBfvZw6ipZmVbIfB/6LFvKme/z46W+iKausOoHnltM3RZKn0VUbYVz/ft8xG818h7RzCh4p9OPdRfPo9h3zi8bMKkzgyfJz5a1fx2RfEmC/KWLasIr6qOm4cZ5wbAmanHr6cWFRcby9yTUXKJWlQvw7xVaHY7Z3WtTfGMbGYGTkhpgULS3QHJt83xGLeJ8lYGLbiMnFxDgdL+gMQ/Xcroo+dLD3tdYb2/h+ak0l717xGJ6pw47bO0/HSFV7AtY4CZni+0yLR9CES8Dg1y/83d2P/9Njxk98CjMxLrpS+y+dEf+RhQdqQMETUKLiPZzP2SCd4ZDsFJHGlrPnJeNp+7EKwV7ScD2Zfoy4LKQQJWTCI2G/yRsZGaY+6f8SPBuAyc5L4jtzFmB+E5M9oFjXyjI9K9uTFaFAILLL9vqcWbG1sffp31Y94q/7FHzAnebizt9WrFRDtZ8y6R/iOU3jwIdOMk1qnL6DKhi+1dxvw/JfJYAMtnF528Of81fbvLJCon6slqBdzzaeYeqw8C/IPjeK6Qt9wNgKN76DzSF4pVAkY8RsZEpEE9PHYQUrRg4Q63OudTc49nL+QlghFHQPKrL9QTMvBFLc9tB1HXRDExdFeocs/bUXc7mcxdNs2SETkOgzMGyHbbS4NBJ/rqU9jDYvPM971NviSs2klmeldT5+2Xh/yVJr3sXplW3icuCvH9k7LgHGs4RnvF2rPP0ffubvKZug06X+bIrX1MY7IW60j+HnJmHOPHX/kPMfENDSV88q2prxiRYTdieIV1JYY3nL7SFo9SeO5DCArpb13I/au55OGHH4U26ybPGSDy4i93pgV/N3hdO/Thb2sLBZPPT/IAbBGQeJRrVQFxQpKFtpEvcJu3POczK4MZWRvS5L3ey7DV1YwSi/5eY0jWaTNpwVL5he18PtOY6li7oua1Uz4Oc1783ypoDCBiPb+jKBBqTzvXZVuovY+NZ/9aUR3/Awo9Mg07tJLZ+3SZlk4Y7P/mEus5i/ISR/MXOpHXJyEqeSCrzgUAqKOs+KWiS4PVSGW5xw7oP0QkYDToCpsq4NZ+gdceRKH+BBmxyzVvt4I1hM3f5lmths/nqkzSC4FiMNbL6AYs/q02GllEA7mQhE5kUQwjnNc9DcK/wq1UM5tlhs48krz5PrbI+AwN7foHPtI97Z1UnCShK4EkJ0suLvm5AFZVd6grfd0TXKdh9rFDr9l++dT/74L/JwLRwDT4rFAs1tYeGMEmREnCBxRicz9sbOs36Z8KVugrpeSXYgnuMV4mWzVGHUHMIRDVLYeY9Uic/k+zoLk2qcu8UqyZS+VNB8599EOvd00m5O/DMEMKI0jnMQLZ1Q4+3Ma7h1Le8YwUnNgORji+8lvD81EitRyTcMS6htibZf+TLls94LwuboHrvo5Wrm9J1fUlCgoU8Oqe6F7Dm5s4P9L2GKy8Bjkg6CRP9oj2CcdM5o+u3fzMEkQHvSJrRY3f68RFjS8u7FCm+DqyXqBQh5AqPFF0uVidcmOWEI0tC35eOSsm+Qv1iIXtUOmsxXlxfKPXwcSVE+9YrTsLBXjzn29nYW3AZizKiKSI7DUn5VYUX0RbEZyBIACgY4Zewetgky8ARMgAIBoi+0l35qttEfZnCU4yVmj4hdeFANtfyKYFKYIm+uWVskhJWtk02a6ZpWFMzHz7rUt60Lcdc29/dtRsaOvtRGIkiGLeFYGRiLGbfVg8ZIvRu4m+7eQ36Uf+J/r0i2MtZEEOB/iq1bZRCh7COW5kKqjO7rjKz+NzZ7au6sd135GijKTGAuuWONMenbk0/nvfLB8WVzpNpo6qYRa8AOWeChAc1Xi69vOJ5MRdX1AADUygzAZcy5Z6fz/7Sr2upia1m+lMrM1WzYrVOUyy7O+AihP///JoRFdWwbIopJix/2G0sDtb5LuP3HYMzZmkku46+BYohl9kIMdU9n8MN1yrV/7TR6/8534tdC+6V1fszi7vy6wIZHviwcZp5DI51+GXWa4aTNhDYFomrNTxVA2IWlZKXiMCKpbXLwak3vpRNcohzl3kJ7rEvii3+kfwktRArtgPVkqsqvYuZa9cM1S+wEg5t0B+oH7mSUykU1ALMsCd+sHX5NUpX5GnW5klDpqysJf1CwkAXrqUSN/f0uqqyCUqigIX+IcfZOW+eyfYgeeOhAyqa7oks2OXqja6+m+eV0Zq4g7oRscVBWlIAOLP6FzgN4zDq5DV8aIgqAjdBx+tGaAo6S/rt/fc+q1DErM1dGDaEb71dED9w79Fj0rSIYQ2FSjgsQ9xtGEIaFT37E2UjuqHnzssKE91aJAuWTouVvAIUo0xNwloW4YbXQc//8cKXadyKgC5wrrg6xRYm3SrrP8wFz6YHUapxSd0xKf73moLMwuOSNIk3SfyWbXvbacdZfCN5+5idrDJXar5m7Mrg0bGxTySq0C+2yBcA=",qge=""+new URL("4-C56Hdvn7.avif",import.meta.url).href,Wge=""+new URL("5-DCd5AKeS.avif",import.meta.url).href,Xge=[{prefix:" Trusted by Industry Leaders.",word:"",suffix:"",logos:[$ge,Hge,Gge,qge,Wge]}],Zge=()=>{const[e,t]=ee.useState(0),[n,a]=ee.useState(!0),{prefix:u,word:f,suffix:y,logos:r}=Xge[e];return te.jsxs("div",{className:"company-group",children:[te.jsxs("h2",{className:"company-group__heading",children:[u,te.jsx("span",{className:`highlight animated-word ${n?"in":"out"}`,children:f}),y]}),te.jsx("div",{className:"company-group__logos",children:r.map((S,A)=>te.jsx("img",{src:S,alt:`Logo ${A+1}`,className:"company-group__logo",style:{animationDelay:`${A*.05}s`}},S))})]})},r8=""+new URL("hero-KKkz536v.mp4",import.meta.url).href,Yge=()=>{const[e,t]=ee.useState({opacity:1,transform:"scale(1)"});return ee.useEffect(()=>{const n=()=>{const a=window.scrollY,u=300,f=Math.max(1-a/u,0),y=Math.max(1-a/(u*2),.85);t({opacity:f,transform:`scale(${y})`})};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),te.jsxs("section",{className:"hero",children:[te.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0},children:[te.jsx("source",{src:r8,type:"video/mp4"}),"Your browser does not support the video tag."]}),te.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:0}}),te.jsx("div",{className:"hero__overlay",children:te.jsxs("div",{className:"hero__left",style:{...e},children:[te.jsx("h1",{className:"hero__title",children:"Every corner of your site always in sight"}),te.jsx("h2",{className:"hero__running",children:"See Everything. Control What Matters."}),te.jsx("p",{className:"hero__description",children:"InfraX transforms how you manage your sitescombining real-time progress tracking, quality control, and safety oversight in one place."})]})})]})},Kge=""+new URL("1-Dno5NRNN.jpg",import.meta.url).href,Jge=""+new URL("2-J640JdC3.jpg",import.meta.url).href,Qge=""+new URL("3-DvkoTwvw.jpg",import.meta.url).href,UN=""+new URL("4-CWXh9BDz.jpg",import.meta.url).href,eye=[{id:1,text:"Construction & Infrastructure ",image:Kge},{id:2,text:"Energy, Utilities & Industrial ",image:Jge},{id:3,text:"Heritage & Conservation",image:Qge},{id:4,text:"Agriculture & Forest",image:UN},{id:5,text:"Surveying & land development",image:UN}],tye=()=>te.jsx("div",{className:"feature-section",children:te.jsxs("div",{className:"content",children:[te.jsx("h2",{className:"section-heading",children:"Explore the Industries embracing the innovation."}),te.jsx("div",{className:"boxes",children:eye.map(({id:e,text:t,image:n})=>te.jsx("div",{className:"box",style:{backgroundImage:`url(${n})`},children:te.jsx("span",{className:"box-text",children:t})},e))})]})}),I1="generated",nye="pointerdown",iye="pointerup",DP="pointerleave",rye="pointerout",rv="pointermove",oye="touchstart",VN="touchend",sye="touchmove",aye="touchcancel",lye="resize",cye="visibilitychange",Eh="tsParticles - Error";class du{constructor(t,n,a){if(this._updateFromAngle=(u,f)=>{this.x=Math.cos(u)*f,this.y=Math.sin(u)*f},!Od(t)&&t){this.x=t.x,this.y=t.y;const u=t;this.z=u.z?u.z:0}else if(t!==void 0&&n!==void 0)this.x=t,this.y=n,this.z=a??0;else throw new Error(`${Eh} Vector3d not initialized correctly`)}static get origin(){return du.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return du.create(t.x,t.y,t.z)}static create(t,n,a){return new du(t,n,a)}add(t){return du.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return du.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return du.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**2+this.y**2}mult(t){return du.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(1/t)}rotate(t){return du.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),0)}setTo(t){this.x=t.x,this.y=t.y;const n=t;this.z=n.z?n.z:0}sub(t){return du.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class $a extends du{constructor(t,n){super(t,n,0)}static get origin(){return $a.create(0,0)}static clone(t){return $a.create(t.x,t.y)}static create(t,n){return new $a(t,n)}}let uye=Math.random;const OP=new Map;function UR(e,t){OP.get(e)||OP.set(e,t)}function o8(e){return OP.get(e)||(t=>t)}function ss(){return zd(uye(),0,1-1e-16)}function zd(e,t,n){return Math.min(Math.max(e,t),n)}function VR(e,t,n,a){return Math.floor((e*n+t*a)/(n+a))}function Mc(e){const t=zg(e);let n=ZO(e);return t===n&&(n=0),ss()*(t-n)+n}function rr(e){return Od(e)?e:Mc(e)}function ZO(e){return Od(e)?e:e.min}function zg(e){return Od(e)?e:e.max}function Kr(e,t){if(e===t||t===void 0&&Od(e))return e;const n=ZO(e),a=zg(e);return t!==void 0?{min:Math.min(n,t),max:Math.max(a,t)}:Kr(n,a)}function ov(e){const t=e.random,{enable:n,minimumValue:a}=Fg(t)?{enable:t,minimumValue:0}:t;return rr(n?Kr(e.value,a):e.value)}function lc(e,t){const n=e.x-t.x,a=e.y-t.y;return{dx:n,dy:a,distance:Math.sqrt(n**2+a**2)}}function vu(e,t){return lc(e,t).distance}function hye(e,t,n){if(Od(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-t.y,n.x-t.x);case"outside":return Math.atan2(t.y-n.y,t.x-n.x);default:return ss()*Math.PI*2}}function dye(e){const t=$a.origin;return t.length=1,t.angle=e,t}function $N(e,t,n,a){return $a.create(e.x*(n-a)/(n+a)+t.x*2*a/(n+a),e.y)}function fye(e){var t,n;return{x:((t=e.position)==null?void 0:t.x)??ss()*e.size.width,y:((n=e.position)==null?void 0:n.y)??ss()*e.size.height}}function s8(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}const pye={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function sv(){return pye}function HN(e){const t={bounced:!1},{pSide:n,pOtherSide:a,rectSide:u,rectOtherSide:f,velocity:y,factor:r}=e;return a.min<f.min||a.min>f.max||a.max<f.min||a.max>f.max||(n.max>=u.min&&n.max<=(u.max+u.min)/2&&y>0||n.min<=u.max&&n.min>(u.max+u.min)/2&&y<0)&&(t.velocity=y*-r,t.bounced=!0),t}function mye(e,t){const n=Ha(t,a=>e.matches(a));return xu(n)?n.some(a=>a):n}function ux(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function gye(){return!ux()&&typeof matchMedia<"u"}function a8(e){if(gye())return matchMedia(e)}function yye(e){if(!(ux()||typeof MutationObserver>"u"))return new MutationObserver(e)}function Us(e,t){return e===t||xu(t)&&t.indexOf(e)>-1}async function _ye(e,t){try{await document.fonts.load(`${t??"400"} 36px '${e??"Verdana"}'`)}catch{}}function vye(e){return Math.floor(ss()*e.length)}function rA(e,t,n=!0){return e[t!==void 0&&n?t%e.length:vye(e)]}function YO(e,t,n,a,u){return xye(zw(e,a??0),t,n,u)}function xye(e,t,n,a){let u=!0;return(!a||a==="bottom")&&(u=e.top<t.height+n.x),u&&(!a||a==="left")&&(u=e.right>n.x),u&&(!a||a==="right")&&(u=e.left<t.width+n.y),u&&(!a||a==="top")&&(u=e.bottom>n.y),u}function zw(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function kl(e,...t){for(const n of t){if(n==null)continue;if(!W0(n)){e=n;continue}const a=Array.isArray(n);a&&(W0(e)||!e||!Array.isArray(e))?e=[]:!a&&(W0(e)||!e||Array.isArray(e))&&(e={});for(const u in n){if(u==="__proto__")continue;const f=n,y=f[u],r=e;r[u]=W0(y)&&Array.isArray(y)?y.map(S=>kl(r[u],S)):kl(r[u],y)}}return e}function KO(e,t){return!!u8(t,n=>n.enable&&Us(e,n.mode))}function JO(e,t,n){Ha(t,a=>{const u=a.mode;a.enable&&Us(e,u)&&bye(a,n)})}function bye(e,t){const n=e.selectors;Ha(n,a=>{t(a,e)})}function l8(e,t){if(!(!t||!e))return u8(e,n=>mye(t,n.selectors))}function LP(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:$a.create(ov(e.options.bounce.horizontal),ov(e.options.bounce.vertical))}}function c8(e,t){const{x:n,y:a}=e.velocity.sub(t.velocity),[u,f]=[e.position,t.position],{dx:y,dy:r}=lc(f,u);if(n*y+a*r<0)return;const S=-Math.atan2(r,y),A=e.mass,R=t.mass,O=e.velocity.rotate(S),z=t.velocity.rotate(S),N=$N(O,z,A,R),U=$N(z,O,A,R),H=N.rotate(-S),K=U.rotate(-S);e.velocity.x=H.x*e.factor.x,e.velocity.y=H.y*e.factor.y,t.velocity.x=K.x*t.factor.x,t.velocity.y=K.y*t.factor.y}function wye(e,t){const n=e.getPosition(),a=e.getRadius(),u=zw(n,a),f=HN({pSide:{min:u.left,max:u.right},pOtherSide:{min:u.top,max:u.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:ov(e.options.bounce.horizontal)});f.bounced&&(f.velocity!==void 0&&(e.velocity.x=f.velocity),f.position!==void 0&&(e.position.x=f.position));const y=HN({pSide:{min:u.top,max:u.bottom},pOtherSide:{min:u.left,max:u.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:ov(e.options.bounce.vertical)});y.bounced&&(y.velocity!==void 0&&(e.velocity.y=y.velocity),y.position!==void 0&&(e.position.y=y.position))}function Ha(e,t){return xu(e)?e.map((n,a)=>t(n,a)):t(e,0)}function bm(e,t,n){return xu(e)?rA(e,t,n):e}function u8(e,t){return xu(e)?e.find((n,a)=>t(n,a)):t(e,0)?e:void 0}function h8(e,t){const n=e.value,a=e.animation,u={delayTime:rr(a.delay)*1e3,enable:a.enable,value:rr(e.value)*t,max:zg(n)*t,min:ZO(n)*t,loops:0,maxLoops:rr(a.count),time:0};if(a.enable){switch(u.decay=1-rr(a.decay),a.mode){case"increase":u.status="increasing";break;case"decrease":u.status="decreasing";break;case"random":u.status=ss()>=.5?"increasing":"decreasing";break}const f=a.mode==="auto";switch(a.startValue){case"min":u.value=u.min,f&&(u.status="increasing");break;case"max":u.value=u.max,f&&(u.status="decreasing");break;case"random":default:u.value=Mc(u),f&&(u.status=ss()>=.5?"increasing":"decreasing");break}}return u.initialValue=u.value,u}function Sye(e,t){if(!(e.mode==="percent")){const{mode:u,...f}=e;return f}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function d8(e,t){return Sye(e,t)}function Fg(e){return typeof e=="boolean"}function Dd(e){return typeof e=="string"}function Od(e){return typeof e=="number"}function f8(e){return typeof e=="function"}function W0(e){return typeof e=="object"&&e!==null}function xu(e){return Array.isArray(e)}const nC="random",hE="mid",oA=new Map;function GN(e){oA.set(e.key,e)}function $R(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Tye(e){for(const[,f]of oA)if(e.startsWith(f.stringPrefix))return f.parseString(e);const t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,n=e.replace(t,(f,y,r,S,A)=>y+y+r+r+S+S+(A!==void 0?A+A:"")),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,u=a.exec(n);return u?{a:u[4]!==void 0?parseInt(u[4],16)/255:1,b:parseInt(u[3],16),g:parseInt(u[2],16),r:parseInt(u[1],16)}:void 0}function Ld(e,t,n=!0){if(!e)return;const a=Dd(e)?{value:e}:e;if(Dd(a.value))return p8(a.value,t,n);if(xu(a.value))return Ld({value:rA(a.value,t,n)});for(const[,u]of oA){const f=u.handleRangeColor(a);if(f)return f}}function p8(e,t,n=!0){if(!e)return;const a=Dd(e)?{value:e}:e;if(Dd(a.value))return a.value===nC?g8():Eye(a.value);if(xu(a.value))return p8({value:rA(a.value,t,n)});for(const[,u]of oA){const f=u.handleColor(a);if(f)return f}}function ow(e,t,n=!0){const a=Ld(e,t,n);return a?m8(a):void 0}function m8(e){const t=e.r/255,n=e.g/255,a=e.b/255,u=Math.max(t,n,a),f=Math.min(t,n,a),y={h:0,l:(u+f)/2,s:0};return u!==f&&(y.s=y.l<.5?(u-f)/(u+f):(u-f)/(2-u-f),y.h=t===u?(n-a)/(u-f):y.h=n===u?2+(a-t)/(u-f):4+(t-n)/(u-f)),y.l*=100,y.s*=100,y.h*=60,y.h<0&&(y.h+=360),y.h>=360&&(y.h-=360),y}function Eye(e){return Tye(e)}function hx(e){const t={b:0,g:0,r:0},n={h:e.h/360,l:e.l/100,s:e.s/100};if(!n.s)t.r=t.g=t.b=n.l;else{const a=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,u=2*n.l-a;t.r=$R(u,a,n.h+1/3),t.g=$R(u,a,n.h),t.b=$R(u,a,n.h-1/3)}return t.r=Math.floor(t.r*255),t.g=Math.floor(t.g*255),t.b=Math.floor(t.b*255),t}function Cye(e){const t=hx(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}function g8(e){return{b:Math.floor(Mc(Kr(0,256))),g:Math.floor(Mc(Kr(0,256))),r:Math.floor(Mc(Kr(0,256)))}}function wm(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t??1})`}function sw(e,t){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${t??1})`}function QO(e,t,n,a){let u=e,f=t;return u.r===void 0&&(u=hx(e)),f.r===void 0&&(f=hx(t)),{b:VR(u.b,f.b,n,a),g:VR(u.g,f.g,n,a),r:VR(u.r,f.r,n,a)}}function kP(e,t,n){if(n===nC)return g8();if(n===hE){const a=e.getFillColor()??e.getStrokeColor(),u=(t==null?void 0:t.getFillColor())??(t==null?void 0:t.getStrokeColor());if(a&&u&&t)return QO(a,u,e.getRadius(),t.getRadius());{const f=a??u;if(f)return hx(f)}}else return n}function y8(e,t,n){const a=Dd(e)?e:e.value;return a===nC?n?Ld({value:a}):t?nC:hE:a===hE?hE:Ld({value:a})}function qN(e){return e!==void 0?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function _8(e,t,n){const a={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(HR(a.h,t.h,n),HR(a.s,t.s,n),HR(a.l,t.l,n)),a}function HR(e,t,n){e.enable=t.enable,e.enable?(e.velocity=rr(t.speed)/100*n,e.decay=1-rr(t.decay),e.status="increasing",e.loops=0,e.maxLoops=rr(t.count),e.time=0,e.delayTime=rr(t.delay)*1e3,t.sync||(e.velocity*=ss(),e.value*=ss()),e.initialValue=e.value):e.velocity=0}function P1(e,t,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath()}function Aye(e,t,n,a){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.lineTo(a.x,a.y),e.closePath()}function Mye(e,t,n){e.fillStyle=n??"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}function Rye(e,t,n,a){n&&(e.globalAlpha=a,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1)}function GR(e,t){e.clearRect(0,0,t.width,t.height)}function Iye(e){const{container:t,context:n,particle:a,delta:u,colorStyles:f,backgroundMask:y,composite:r,radius:S,opacity:A,shadow:R,transform:O}=e,z=a.getPosition(),N=a.rotation+(a.pathRotation?a.velocity.angle:0),U={sin:Math.sin(N),cos:Math.cos(N)},H={a:U.cos*(O.a??1),b:U.sin*(O.b??1),c:-U.sin*(O.c??1),d:U.cos*(O.d??1)};n.setTransform(H.a,H.b,H.c,H.d,z.x,z.y),n.beginPath(),y&&(n.globalCompositeOperation=r);const K=a.shadowColor;R.enable&&K&&(n.shadowBlur=R.blur,n.shadowColor=wm(K),n.shadowOffsetX=R.offset.x,n.shadowOffsetY=R.offset.y),f.fill&&(n.fillStyle=f.fill);const W=a.strokeWidth??0;n.lineWidth=W,f.stroke&&(n.strokeStyle=f.stroke),Pye(t,n,a,S,A,u),W>0&&n.stroke(),a.close&&n.closePath(),a.fill&&n.fill(),Dye(t,n,a,S,A,u),n.globalCompositeOperation="source-over",n.setTransform(1,0,0,1,0,0)}function Pye(e,t,n,a,u,f){if(!n.shape)return;const y=e.drawers.get(n.shape);y&&y.draw(t,n,a,u,f,e.retina.pixelRatio)}function Dye(e,t,n,a,u,f){if(!n.shape)return;const y=e.drawers.get(n.shape);!y||!y.afterEffect||y.afterEffect(t,n,a,u,f,e.retina.pixelRatio)}function Oye(e,t,n){t.draw&&t.draw(e,n)}function Lye(e,t,n,a){t.drawParticle&&t.drawParticle(e,n,a)}function kye(e,t,n){return{h:e.h,s:e.s,l:e.l+(t==="darken"?-1:1)*n}}function zye(e,t,n){const a=t[n];a!==void 0&&(e[n]=(e[n]??1)*a)}class Bye{constructor(t){this.container=t,this._applyPostDrawUpdaters=n=>{for(const a of this._postDrawUpdaters)a.afterDraw&&a.afterDraw(n)},this._applyPreDrawUpdaters=(n,a,u,f,y,r)=>{for(const S of this._preDrawUpdaters){if(S.getColorStyles){const{fill:A,stroke:R}=S.getColorStyles(a,n,u,f);A&&(y.fill=A),R&&(y.stroke=R)}if(S.getTransformValues){const A=S.getTransformValues(a);for(const R in A)zye(r,A,R)}S.beforeDraw&&S.beforeDraw(a)}},this._applyResizePlugins=()=>{for(const n of this._resizePlugins)n.resize&&n.resize()},this._getPluginParticleColors=n=>{let a,u;for(const f of this._colorPlugins)if(!a&&f.particleFillColor&&(a=ow(f.particleFillColor(n))),!u&&f.particleStrokeColor&&(u=ow(f.particleStrokeColor(n))),a&&u)break;return[a,u]},this._initCover=()=>{const n=this.container.actualOptions,a=n.backgroundMask.cover,u=a.color,f=Ld(u);if(f){const y={...f,a:a.opacity};this._coverColorStyle=wm(y,y.a)}},this._initStyle=()=>{const n=this.element,a=this.container.actualOptions;if(n){this._fullScreen?(this._originalStyle=kl({},n.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const u in a.style){if(!u||!a.style)continue;const f=a.style[u];f&&n.style.setProperty(u,f,"important")}}},this._initTrail=async()=>{const n=this.container.actualOptions,a=n.particles.move.trail,u=a.fill;if(a.enable)if(u.color){const f=Ld(u.color);if(!f)return;const y=n.particles.move.trail;this._trailFill={color:{...f},opacity:1/y.length}}else await new Promise((f,y)=>{if(!u.image)return;const r=document.createElement("img");r.addEventListener("load",()=>{this._trailFill={image:r,opacity:1/a.length},f()}),r.addEventListener("error",S=>{y(S.error)}),r.src=u.image})},this._paintBase=n=>{this.draw(a=>Mye(a,this.size,n))},this._paintImage=(n,a)=>{this.draw(u=>Rye(u,this.size,n,a))},this._repairStyle=()=>{const n=this.element;n&&(this._safeMutationObserver(a=>a.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(a=>a.observe(n,{attributes:!0})))},this._resetOriginalStyle=()=>{const n=this.element,a=this._originalStyle;if(!(n&&a))return;const u=n.style;u.position=a.position,u.zIndex=a.zIndex,u.top=a.top,u.left=a.left,u.width=a.width,u.height=a.height},this._safeMutationObserver=n=>{this._mutationObserver&&n(this._mutationObserver)},this._setFullScreenStyle=()=>{const n=this.element;if(!n)return;const a="important",u=n.style;u.setProperty("position","fixed",a),u.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),a),u.setProperty("top","0",a),u.setProperty("left","0",a),u.setProperty("width","100%",a),u.setProperty("height","100%",a)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const t=this.container.actualOptions,n=t.particles.move.trail,a=this._trailFill;t.backgroundMask.enable?this.paint():n.enable&&n.length>0&&a?a.color?this._paintBase(wm(a.color,a.opacity)):a.image&&this._paintImage(a.image,a.opacity):this.draw(u=>{GR(u,this.size)})}destroy(){if(this.stop(),this._generated){const t=this.element;t&&t.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(t){const n=this._context;if(n)return t(n)}drawParticle(t,n){if(t.spawning||t.destroyed)return;const a=t.getRadius();if(a<=0)return;const u=t.getFillColor(),f=t.getStrokeColor()??u;let[y,r]=this._getPluginParticleColors(t);y||(y=u),r||(r=f),!(!y&&!r)&&this.draw(S=>{var ne;const A=this.container,R=A.actualOptions,O=t.options.zIndex,z=(1-t.zIndexFactor)**O.opacityRate,N=t.bubble.opacity??((ne=t.opacity)==null?void 0:ne.value)??1,U=t.strokeOpacity??N,H=N*z,K=U*z,W={},re={fill:y?sw(y,H):void 0};re.stroke=r?sw(r,K):re.fill,this._applyPreDrawUpdaters(S,t,a,H,re,W),Iye({container:A,context:S,particle:t,delta:n,colorStyles:re,backgroundMask:R.backgroundMask.enable,composite:R.backgroundMask.composite,radius:a*(1-t.zIndexFactor)**O.sizeRate,opacity:H,shadow:t.options.shadow,transform:W}),this._applyPostDrawUpdaters(t)})}drawParticlePlugin(t,n,a){this.draw(u=>Lye(u,t,n,a))}drawPlugin(t,n){this.draw(a=>Oye(a,t,n))}async init(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=yye(t=>{for(const n of t)n.type==="attributes"&&n.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(t){sv().error(t)}this.initBackground(),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const t=this.container.actualOptions,n=t.background,a=this.element;if(!a)return;const u=a.style;if(u){if(n.color){const f=Ld(n.color);u.backgroundColor=f?wm(f,n.opacity):""}else u.backgroundColor="";u.backgroundImage=n.image||"",u.backgroundPosition=n.position||"",u.backgroundRepeat=n.repeat||"",u.backgroundSize=n.size||""}}initPlugins(){this._resizePlugins=[];for(const[,t]of this.container.plugins)t.resize&&this._resizePlugins.push(t),(t.particleFillColor||t.particleStrokeColor)&&this._colorPlugins.push(t)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const t of this.container.particles.updaters)t.afterDraw&&this._postDrawUpdaters.push(t),(t.getColorStyles||t.getTransformValues||t.beforeDraw)&&this._preDrawUpdaters.push(t)}loadCanvas(t){this._generated&&this.element&&this.element.remove(),this._generated=t.dataset&&I1 in t.dataset?t.dataset[I1]==="true":this._generated,this.element=t,this.element.ariaHidden="true",this._originalStyle=kl({},this.element.style),this.size.height=t.offsetHeight,this.size.width=t.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(n=>{this.element&&n.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const t=this.container.actualOptions;this.draw(n=>{t.backgroundMask.enable&&t.backgroundMask.cover?(GR(n,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const t=this.container,n=t.retina.pixelRatio,a=t.canvas.size,u={width:this.element.offsetWidth*n,height:this.element.offsetHeight*n};if(u.height===a.height&&u.width===a.width&&u.height===this.element.height&&u.width===this.element.width)return!1;const f={...a};return this.element.width=a.width=this.element.offsetWidth*n,this.element.height=a.height=this.element.offsetHeight*n,this.container.started&&(this.resizeFactor={width:a.width/f.width,height:a.height/f.height}),!0}stop(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=void 0,this.draw(t=>GR(t,this.size))}async windowResize(){if(!this.element||!this.resize())return;const t=this.container,n=t.updateActualOptions();t.particles.setDensity(),this._applyResizePlugins(),n&&await t.refresh()}}function dh(e,t,n,a,u){if(a){let f={passive:!0};Fg(u)?f.capture=u:u!==void 0&&(f=u),e.addEventListener(t,n,f)}else{const f=u;e.removeEventListener(t,n,f)}}class Fye{constructor(t){this.container=t,this._doMouseTouchClick=n=>{const a=this.container,u=a.actualOptions;if(this._canPush){const f=a.interactivity.mouse,y=f.position;if(!y)return;f.clickPosition={...y},f.clickTime=new Date().getTime();const r=u.interactivity.events.onClick;Ha(r.mode,S=>this.container.handleClickMode(S))}n.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=n=>{const a=n,u=this.container,f=u.options,y=f.defaultThemes,r=a.matches?y.dark:y.light,S=f.themes.find(A=>A.name===r);S&&S.default.auto&&u.loadTheme(r)},this._handleVisibilityChange=()=>{const n=this.container,a=n.actualOptions;this._mouseTouchFinish(),a.pauseOnBlur&&(document&&document.hidden?(n.pageHidden=!0,n.pause()):(n.pageHidden=!1,n.getAnimationStatus()?n.play(!0):n.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const n=this.container.canvas;n&&await n.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(n,a)=>{const u=this._handlers,f=this.container,y=f.actualOptions,r=f.interactivity.element;if(!r)return;const S=r,A=f.canvas.element;A&&(A.style.pointerEvents=S===A?"initial":"none"),(y.interactivity.events.onHover.enable||y.interactivity.events.onClick.enable)&&(dh(r,rv,u.mouseMove,a),dh(r,oye,u.touchStart,a),dh(r,sye,u.touchMove,a),y.interactivity.events.onClick.enable?(dh(r,VN,u.touchEndClick,a),dh(r,iye,u.mouseUp,a),dh(r,nye,u.mouseDown,a)):dh(r,VN,u.touchEnd,a),dh(r,n,u.mouseLeave,a),dh(r,aye,u.touchCancel,a))},this._manageListeners=n=>{const a=this._handlers,u=this.container,f=u.actualOptions,y=f.interactivity.detectsOn,r=u.canvas.element;let S=DP;y==="window"?(u.interactivity.element=window,S=rye):y==="parent"&&r?u.interactivity.element=r.parentElement??r.parentNode:u.interactivity.element=r,this._manageMediaMatch(n),this._manageResize(n),this._manageInteractivityListeners(S,n),document&&dh(document,cye,a.visibilityChange,n,!1)},this._manageMediaMatch=n=>{const a=this._handlers,u=a8("(prefers-color-scheme: dark)");if(u){if(u.addEventListener!==void 0){dh(u,"change",a.themeChange,n);return}u.addListener!==void 0&&(n?u.addListener(a.oldThemeChange):u.removeListener(a.oldThemeChange))}},this._manageResize=n=>{const a=this._handlers,u=this.container;if(!u.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){dh(window,lye,a.resize,n);return}const y=u.canvas.element;this._resizeObserver&&!n?(y&&this._resizeObserver.unobserve(y),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&n&&y&&(this._resizeObserver=new ResizeObserver(async r=>{r.find(A=>A.target===y)&&await this._handleWindowResize()}),this._resizeObserver.observe(y))},this._mouseDown=()=>{const{interactivity:n}=this.container;if(!n)return;const{mouse:a}=n;a.clicking=!0,a.downPosition=a.position},this._mouseTouchClick=n=>{const a=this.container,u=a.actualOptions,{mouse:f}=a.interactivity;f.inside=!0;let y=!1;const r=f.position;if(!(!r||!u.interactivity.events.onClick.enable)){for(const[,S]of a.plugins)if(S.clickPositionValid&&(y=S.clickPositionValid(r),y))break;y||this._doMouseTouchClick(n),f.clicking=!1}},this._mouseTouchFinish=()=>{const n=this.container.interactivity;if(!n)return;const a=n.mouse;delete a.position,delete a.clickPosition,delete a.downPosition,n.status=DP,a.inside=!1,a.clicking=!1},this._mouseTouchMove=n=>{const a=this.container,u=a.actualOptions,f=a.interactivity,y=a.canvas.element;if(!f||!f.element)return;f.mouse.inside=!0;let r;if(n.type.startsWith("pointer")){this._canPush=!0;const A=n;if(f.element===window){if(y){const R=y.getBoundingClientRect();r={x:A.clientX-R.left,y:A.clientY-R.top}}}else if(u.interactivity.detectsOn==="parent"){const R=A.target,O=A.currentTarget;if(R&&O&&y){const z=R.getBoundingClientRect(),N=O.getBoundingClientRect(),U=y.getBoundingClientRect();r={x:A.offsetX+2*z.left-(N.left+U.left),y:A.offsetY+2*z.top-(N.top+U.top)}}else r={x:A.offsetX??A.clientX,y:A.offsetY??A.clientY}}else A.target===y&&(r={x:A.offsetX??A.clientX,y:A.offsetY??A.clientY})}else if(this._canPush=n.type!=="touchmove",y){const A=n,R=A.touches[A.touches.length-1],O=y.getBoundingClientRect();r={x:R.clientX-(O.left??0),y:R.clientY-(O.top??0)}}const S=a.retina.pixelRatio;r&&(r.x*=S,r.y*=S),f.mouse.position=r,f.status=rv},this._touchEnd=n=>{const a=n,u=Array.from(a.changedTouches);for(const f of u)this._touches.delete(f.identifier);this._mouseTouchFinish()},this._touchEndClick=n=>{const a=n,u=Array.from(a.changedTouches);for(const f of u)this._touches.delete(f.identifier);this._mouseTouchClick(n)},this._touchStart=n=>{const a=n,u=Array.from(a.changedTouches);for(const f of u)this._touches.set(f.identifier,performance.now());this._mouseTouchMove(n)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:n=>this._mouseTouchMove(n),mouseUp:n=>this._mouseTouchClick(n),touchStart:n=>this._touchStart(n),touchMove:n=>this._mouseTouchMove(n),touchEnd:n=>this._touchEnd(n),touchCancel:n=>this._touchEnd(n),touchEndClick:n=>this._touchEndClick(n),visibilityChange:()=>this._handleVisibilityChange(),themeChange:n=>this._handleThemeChange(n),oldThemeChange:n=>this._handleThemeChange(n),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class ll{constructor(){this.value=""}static create(t,n){const a=new ll;return a.load(t),n!==void 0&&(Dd(n)||xu(n)?a.load({value:n}):a.load(n)),a}load(t){(t==null?void 0:t.value)!==void 0&&(this.value=t.value)}}class Nye{constructor(){this.color=new ll,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=ll.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.position!==void 0&&(this.position=t.position),t.repeat!==void 0&&(this.repeat=t.repeat),t.size!==void 0&&(this.size=t.size),t.opacity!==void 0&&(this.opacity=t.opacity))}}class jye{constructor(){this.color=new ll,this.color.value="#fff",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=ll.create(this.color,t.color)),t.opacity!==void 0&&(this.opacity=t.opacity))}}class Uye{constructor(){this.composite="destination-out",this.cover=new jye,this.enable=!1}load(t){if(t){if(t.composite!==void 0&&(this.composite=t.composite),t.cover!==void 0){const n=t.cover,a=Dd(t.cover)?{color:t.cover}:t.cover;this.cover.load(n.color!==void 0?n:{color:a})}t.enable!==void 0&&(this.enable=t.enable)}}}class Vye{constructor(){this.enable=!0,this.zIndex=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.zIndex!==void 0&&(this.zIndex=t.zIndex))}}class $ye{constructor(){this.enable=!1,this.mode=[]}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode))}}class WN{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(t){this.elementId=t}get elementId(){return this.ids}set elementId(t){this.ids=t}get ids(){return Ha(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Ha(t,n=>`#${n}`)}load(t){if(!t)return;const n=t.ids??t.elementId??t.el;n!==void 0&&(this.ids=n),t.selectors!==void 0&&(this.selectors=t.selectors),t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),t.type!==void 0&&(this.type=t.type)}}class Hye{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.force!==void 0&&(this.force=t.force),t.smooth!==void 0&&(this.smooth=t.smooth))}}class Gye{constructor(){this.enable=!1,this.mode=[],this.parallax=new Hye}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),this.parallax.load(t.parallax))}}class qye{constructor(){this.delay=.5,this.enable=!0}load(t){t!==void 0&&(t.delay!==void 0&&(this.delay=t.delay),t.enable!==void 0&&(this.enable=t.enable))}}class Wye{constructor(){this.onClick=new $ye,this.onDiv=new WN,this.onHover=new Gye,this.resize=new qye}get onclick(){return this.onClick}set onclick(t){this.onClick=t}get ondiv(){return this.onDiv}set ondiv(t){this.onDiv=t}get onhover(){return this.onHover}set onhover(t){this.onHover=t}load(t){if(!t)return;this.onClick.load(t.onClick??t.onclick);const n=t.onDiv??t.ondiv;n!==void 0&&(this.onDiv=Ha(n,a=>{const u=new WN;return u.load(a),u})),this.onHover.load(t.onHover??t.onhover),Fg(t.resize)?this.resize.enable=t.resize:this.resize.load(t.resize)}}class Xye{constructor(t,n){this._engine=t,this._container=n}load(t){if(!t||!this._container)return;const n=this._engine.plugins.interactors.get(this._container);if(n)for(const a of n)a.loadModeOptions&&a.loadModeOptions(this,t)}}class v8{constructor(t,n){this.detectsOn="window",this.events=new Wye,this.modes=new Xye(t,n)}get detect_on(){return this.detectsOn}set detect_on(t){this.detectsOn=t}load(t){if(!t)return;const n=t.detectsOn??t.detect_on;n!==void 0&&(this.detectsOn=n),this.events.load(t.events),this.modes.load(t.modes)}}class Zye{load(t){t&&(t.position&&(this.position={x:t.position.x??50,y:t.position.y??50,mode:t.position.mode??"percent"}),t.options&&(this.options=kl({},t.options)))}}class Yye{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(t){t&&(t.maxWidth!==void 0&&(this.maxWidth=t.maxWidth),t.mode!==void 0&&(t.mode==="screen"?this.mode="screen":this.mode="canvas"),t.options!==void 0&&(this.options=kl({},t.options)))}}class Kye{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(t){t&&(t.auto!==void 0&&(this.auto=t.auto),t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class Jye{constructor(){this.name="",this.default=new Kye}load(t){t&&(t.name!==void 0&&(this.name=t.name),this.default.load(t.default),t.options!==void 0&&(this.options=kl({},t.options)))}}class qR{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(t){t&&(t.count!==void 0&&(this.count=Kr(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(this.offset=Kr(t.offset)),t.speed!==void 0&&(this.speed=Kr(t.speed)),t.decay!==void 0&&(this.decay=Kr(t.decay)),t.delay!==void 0&&(this.delay=Kr(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class Qye{constructor(){this.h=new qR,this.s=new qR,this.l=new qR}load(t){t&&(this.h.load(t.h),this.s.load(t.s),this.l.load(t.l))}}class aw extends ll{constructor(){super(),this.animation=new Qye}static create(t,n){const a=new aw;return a.load(t),n!==void 0&&(Dd(n)||xu(n)?a.load({value:n}):a.load(n)),a}load(t){if(super.load(t),!t)return;const n=t.animation;n!==void 0&&(n.enable!==void 0?this.animation.h.load(n):this.animation.load(t.animation))}}class e_e{constructor(){this.speed=2}load(t){t&&t.speed!==void 0&&(this.speed=t.speed)}}class t_e{constructor(){this.enable=!0,this.retries=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.retries!==void 0&&(this.retries=t.retries))}}class n_e{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(t){t&&(t.count!==void 0&&(this.count=Kr(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=Kr(t.speed)),t.decay!==void 0&&(this.decay=Kr(t.decay)),t.delay!==void 0&&(this.delay=Kr(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class x8 extends n_e{constructor(){super(),this.mode="auto",this.startValue="random"}load(t){super.load(t),t&&(t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue),t.mode!==void 0&&(this.mode=t.mode),t.startValue!==void 0&&(this.startValue=t.startValue))}}class i_e{constructor(){this.enable=!1,this.minimumValue=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue))}}class oy{constructor(){this.random=new i_e,this.value=0}load(t){t&&(Fg(t.random)?this.random.enable=t.random:this.random.load(t.random),t.value!==void 0&&(this.value=Kr(t.value,this.random.enable?this.random.minimumValue:void 0)))}}class XN extends oy{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class b8{constructor(){this.horizontal=new XN,this.vertical=new XN}load(t){t&&(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}class r_e{constructor(){this.absorb=new e_e,this.bounce=new b8,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new t_e}load(t){t&&(this.absorb.load(t.absorb),this.bounce.load(t.bounce),t.enable!==void 0&&(this.enable=t.enable),t.maxSpeed!==void 0&&(this.maxSpeed=Kr(t.maxSpeed)),t.mode!==void 0&&(this.mode=t.mode),this.overlap.load(t.overlap))}}class o_e{constructor(){this.offset=0,this.value=90}load(t){t&&(t.offset!==void 0&&(this.offset=Kr(t.offset)),t.value!==void 0&&(this.value=Kr(t.value)))}}class s_e{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(t){this.rotate.x=t}get rotateY(){return this.rotate.y}set rotateY(t){this.rotate.y=t}load(t){var u,f;if(!t)return;t.distance!==void 0&&(this.distance=Kr(t.distance)),t.enable!==void 0&&(this.enable=t.enable);const n=((u=t.rotate)==null?void 0:u.x)??t.rotateX;n!==void 0&&(this.rotate.x=n);const a=((f=t.rotate)==null?void 0:f.y)??t.rotateY;a!==void 0&&(this.rotate.y=a)}}class a_e{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(t){t&&(t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.mode!==void 0&&(this.mode=t.mode),t.radius!==void 0&&(this.radius=t.radius))}}class l_e{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=Kr(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.inverse!==void 0&&(this.inverse=t.inverse),t.maxSpeed!==void 0&&(this.maxSpeed=Kr(t.maxSpeed)))}}class c_e{constructor(){this.clamp=!0,this.delay=new oy,this.enable=!1,this.options={}}load(t){t&&(t.clamp!==void 0&&(this.clamp=t.clamp),this.delay.load(t.delay),t.enable!==void 0&&(this.enable=t.enable),this.generator=t.generator,t.options&&(this.options=kl(this.options,t.options)))}}class u_e{load(t){t&&(t.color!==void 0&&(this.color=ll.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image))}}class h_e{constructor(){this.enable=!1,this.length=10,this.fill=new u_e}get fillColor(){return this.fill.color}set fillColor(t){this.fill.load({color:t})}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),(t.fill!==void 0||t.fillColor!==void 0)&&this.fill.load(t.fill||{color:t.fillColor}),t.length!==void 0&&(this.length=t.length))}}class d_e{constructor(){this.default="out"}load(t){t&&(t.default!==void 0&&(this.default=t.default),this.bottom=t.bottom??t.default,this.left=t.left??t.default,this.right=t.right??t.default,this.top=t.top??t.default)}}class f_e{constructor(){this.acceleration=0,this.enable=!1}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=Kr(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.position&&(this.position=kl({},t.position)))}}class p_e{constructor(){this.angle=new o_e,this.attract=new s_e,this.center=new a_e,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new l_e,this.path=new c_e,this.outModes=new d_e,this.random=!1,this.size=!1,this.speed=2,this.spin=new f_e,this.straight=!1,this.trail=new h_e,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(t){this.collisions=t}get collisions(){return!1}set collisions(t){}get noise(){return this.path}set noise(t){this.path=t}get outMode(){return this.outModes.default}set outMode(t){this.outModes.default=t}get out_mode(){return this.outMode}set out_mode(t){this.outMode=t}load(t){if(!t)return;this.angle.load(Od(t.angle)?{value:t.angle}:t.angle),this.attract.load(t.attract),this.center.load(t.center),t.decay!==void 0&&(this.decay=Kr(t.decay)),t.direction!==void 0&&(this.direction=t.direction),t.distance!==void 0&&(this.distance=Od(t.distance)?{horizontal:t.distance,vertical:t.distance}:{...t.distance}),t.drift!==void 0&&(this.drift=Kr(t.drift)),t.enable!==void 0&&(this.enable=t.enable),this.gravity.load(t.gravity);const n=t.outModes??t.outMode??t.out_mode;n!==void 0&&(W0(n)?this.outModes.load(n):this.outModes.load({default:n})),this.path.load(t.path??t.noise),t.random!==void 0&&(this.random=t.random),t.size!==void 0&&(this.size=t.size),t.speed!==void 0&&(this.speed=Kr(t.speed)),this.spin.load(t.spin),t.straight!==void 0&&(this.straight=t.straight),this.trail.load(t.trail),t.vibrate!==void 0&&(this.vibrate=t.vibrate),t.warp!==void 0&&(this.warp=t.warp)}}class m_e extends x8{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.opacity_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.opacity_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class g_e extends oy{constructor(){super(),this.animation=new m_e,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(!t)return;super.load(t);const n=t.animation??t.anim;n!==void 0&&(this.animation.load(n),this.value=Kr(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class y_e{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(t){this.width=t}get factor(){return this.height}set factor(t){this.height=t}get value_area(){return this.area}set value_area(t){this.area=t}load(t){if(!t)return;t.enable!==void 0&&(this.enable=t.enable);const n=t.width??t.area??t.value_area;n!==void 0&&(this.width=n);const a=t.height??t.factor;a!==void 0&&(this.height=a)}}class __e{constructor(){this.density=new y_e,this.limit=0,this.value=0}get max(){return this.limit}set max(t){this.limit=t}load(t){if(!t)return;this.density.load(t.density);const n=t.limit??t.max;n!==void 0&&(this.limit=n),t.value!==void 0&&(this.value=t.value)}}class v_e{constructor(){this.blur=0,this.color=new ll,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=ll.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(t.offset.x!==void 0&&(this.offset.x=t.offset.x),t.offset.y!==void 0&&(this.offset.y=t.offset.y)))}}const WR="character",XR="char",ZR="image",YR="images",KR="polygon",JR="star";class x_e{constructor(){this.loadShape=(t,n,a,u)=>{if(!t)return;const f=xu(t),y=f?[]:{},r=f!==xu(this.options[n]),S=f!==xu(this.options[a]);r&&(this.options[n]=y),S&&u&&(this.options[a]=y),this.options[n]=kl(this.options[n]??y,t),(!this.options[a]||u)&&(this.options[a]=kl(this.options[a]??y,t))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[WR]??this.options[XR]}set character(t){this.options[XR]=this.options[WR]=t}get custom(){return this.options}set custom(t){this.options=t}get image(){return this.options[ZR]??this.options[YR]}set image(t){this.options[YR]=this.options[ZR]=t}get images(){return this.image}set images(t){this.image=t}get polygon(){return this.options[KR]??this.options[JR]}set polygon(t){this.options[JR]=this.options[KR]=t}get stroke(){return[]}set stroke(t){}load(t){if(!t)return;const n=t.options??t.custom;if(n!==void 0)for(const a in n){const u=n[a];u&&(this.options[a]=kl(this.options[a]??{},u))}this.loadShape(t.character,WR,XR,!0),this.loadShape(t.polygon,KR,JR,!1),this.loadShape(t.image??t.images,ZR,YR,!0),t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class b_e extends x8{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.size_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.size_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class w_e extends oy{constructor(){super(),this.animation=new b_e,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(super.load(t),!t)return;const n=t.animation??t.anim;n!==void 0&&(this.animation.load(n),this.value=Kr(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class ZN{constructor(){this.width=0}load(t){t&&(t.color!==void 0&&(this.color=aw.create(this.color,t.color)),t.width!==void 0&&(this.width=Kr(t.width)),t.opacity!==void 0&&(this.opacity=Kr(t.opacity)))}}class S_e extends oy{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(t){super.load(t),t&&(t.opacityRate!==void 0&&(this.opacityRate=t.opacityRate),t.sizeRate!==void 0&&(this.sizeRate=t.sizeRate),t.velocityRate!==void 0&&(this.velocityRate=t.velocityRate))}}class T_e{constructor(t,n){this._engine=t,this._container=n,this.bounce=new b8,this.collisions=new r_e,this.color=new aw,this.color.value="#fff",this.groups={},this.move=new p_e,this.number=new __e,this.opacity=new g_e,this.reduceDuplicates=!1,this.shadow=new v_e,this.shape=new x_e,this.size=new w_e,this.stroke=new ZN,this.zIndex=new S_e}load(t){var u,f,y;if(!t)return;if(this.bounce.load(t.bounce),this.color.load(aw.create(this.color,t.color)),t.groups!==void 0)for(const r in t.groups){const S=t.groups[r];S!==void 0&&(this.groups[r]=kl(this.groups[r]??{},S))}this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),t.reduceDuplicates!==void 0&&(this.reduceDuplicates=t.reduceDuplicates),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.zIndex.load(t.zIndex);const n=((u=t.move)==null?void 0:u.collisions)??((f=t.move)==null?void 0:f.bounce);n!==void 0&&(this.collisions.enable=n),this.collisions.load(t.collisions),t.interactivity!==void 0&&(this.interactivity=kl({},t.interactivity));const a=t.stroke??((y=t.shape)==null?void 0:y.stroke);if(a&&(this.stroke=Ha(a,r=>{const S=new ZN;return S.load(r),S})),this._container){const r=this._engine.plugins.updaters.get(this._container);if(r)for(const A of r)A.loadOptions&&A.loadOptions(this,t);const S=this._engine.plugins.interactors.get(this._container);if(S)for(const A of S)A.loadParticlesOptions&&A.loadParticlesOptions(this,t)}}}function w8(e,...t){for(const n of t)e.load(n)}function S8(e,t,...n){const a=new T_e(e,t);return w8(a,...n),a}class E_e{constructor(t,n){this._findDefaultTheme=a=>this.themes.find(u=>u.default.value&&u.default.mode===a)??this.themes.find(u=>u.default.value&&u.default.mode==="any"),this._importPreset=a=>{this.load(this._engine.plugins.getPreset(a))},this._engine=t,this._container=n,this.autoPlay=!0,this.background=new Nye,this.backgroundMask=new Uye,this.defaultThemes={},this.delay=0,this.fullScreen=new Vye,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new v8(t,n),this.manualParticles=[],this.particles=S8(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(t){this.fullScreen.load(t)}get fps_limit(){return this.fpsLimit}set fps_limit(t){this.fpsLimit=t}get retina_detect(){return this.detectRetina}set retina_detect(t){this.detectRetina=t}load(t){var y,r;if(!t)return;t.preset!==void 0&&Ha(t.preset,S=>this._importPreset(S)),t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.delay!==void 0&&(this.delay=Kr(t.delay));const n=t.detectRetina??t.retina_detect;n!==void 0&&(this.detectRetina=n),t.duration!==void 0&&(this.duration=Kr(t.duration));const a=t.fpsLimit??t.fps_limit;a!==void 0&&(this.fpsLimit=a),t.pauseOnBlur!==void 0&&(this.pauseOnBlur=t.pauseOnBlur),t.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),t.zLayers!==void 0&&(this.zLayers=t.zLayers),this.background.load(t.background);const u=t.fullScreen??t.backgroundMode;Fg(u)?this.fullScreen.enable=u:this.fullScreen.load(u),this.backgroundMask.load(t.backgroundMask),this.interactivity.load(t.interactivity),t.manualParticles&&(this.manualParticles=t.manualParticles.map(S=>{const A=new Zye;return A.load(S),A})),this.particles.load(t.particles),this.style=kl(this.style,t.style),this._engine.plugins.loadOptions(this,t),t.smooth!==void 0&&(this.smooth=t.smooth);const f=this._engine.plugins.interactors.get(this._container);if(f)for(const S of f)S.loadOptions&&S.loadOptions(this,t);if(t.responsive!==void 0)for(const S of t.responsive){const A=new Yye;A.load(S),this.responsive.push(A)}if(this.responsive.sort((S,A)=>S.maxWidth-A.maxWidth),t.themes!==void 0)for(const S of t.themes){const A=this.themes.find(R=>R.name===S.name);if(A)A.load(S);else{const R=new Jye;R.load(S),this.themes.push(R)}}this.defaultThemes.dark=(y=this._findDefaultTheme("dark"))==null?void 0:y.name,this.defaultThemes.light=(r=this._findDefaultTheme("light"))==null?void 0:r.name}setResponsive(t,n,a){this.load(a);const u=this.responsive.find(f=>f.mode==="screen"&&screen?f.maxWidth>screen.availWidth:f.maxWidth*n>t);return this.load(u==null?void 0:u.options),u==null?void 0:u.maxWidth}setTheme(t){if(t){const n=this.themes.find(a=>a.name===t);n&&this.load(n.options)}else{const n=a8("(prefers-color-scheme: dark)"),a=n&&n.matches,u=this._findDefaultTheme(a?"dark":"light");u&&this.load(u.options)}}}class C_e{constructor(t,n){this.container=n,this._engine=t,this._interactors=t.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(t){for(const n of this._externalInteractors)n.isEnabled()&&await n.interact(t)}handleClickMode(t){for(const n of this._externalInteractors)n.handleClickMode&&n.handleClickMode(t)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const t of this._interactors){switch(t.type){case"external":this._externalInteractors.push(t);break;case"particles":this._particleInteractors.push(t);break}t.init()}}async particlesInteract(t,n){for(const a of this._externalInteractors)a.clear(t,n);for(const a of this._particleInteractors)a.isEnabled(t)&&await a.interact(t,n)}async reset(t){for(const n of this._externalInteractors)n.isEnabled()&&n.reset(t);for(const n of this._particleInteractors)n.isEnabled(t)&&n.reset(t)}}const YN=e=>{if(!Us(e.outMode,e.checkModes))return;const t=e.radius*2;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class A_e{constructor(t,n,a,u,f,y){this.container=a,this._calcPosition=(r,S,A,R=0)=>{for(const[,re]of r.plugins){const ne=re.particlePosition!==void 0?re.particlePosition(S,this):void 0;if(ne)return du.create(ne.x,ne.y,A)}const O=r.canvas.size,z=fye({size:O,position:S}),N=du.create(z.x,z.y,A),U=this.getRadius(),H=this.options.move.outModes,K=re=>{YN({outMode:re,checkModes:["bounce","bounce-horizontal"],coord:N.x,maxCoord:r.canvas.size.width,setCb:ne=>N.x+=ne,radius:U})},W=re=>{YN({outMode:re,checkModes:["bounce","bounce-vertical"],coord:N.y,maxCoord:r.canvas.size.height,setCb:ne=>N.y+=ne,radius:U})};return K(H.left??H.default),K(H.right??H.default),W(H.top??H.default),W(H.bottom??H.default),this._checkOverlap(N,R)?this._calcPosition(r,void 0,A,R+1):N},this._calculateVelocity=()=>{const r=dye(this.direction),S=r.copy(),A=this.options.move;if(A.direction==="inside"||A.direction==="outside")return S;const R=Math.PI/180*rr(A.angle.value),O=Math.PI/180*rr(A.angle.offset),z={left:O-R/2,right:O+R/2};return A.straight||(S.angle+=Mc(Kr(z.left,z.right))),A.random&&typeof A.speed=="number"&&(S.length*=ss()),S},this._checkOverlap=(r,S=0)=>{const A=this.options.collisions,R=this.getRadius();if(!A.enable)return!1;const O=A.overlap;if(O.enable)return!1;const z=O.retries;if(z>=0&&S>z)throw new Error(`${Eh} particle is overlapping and can't be placed`);return!!this.container.particles.find(N=>vu(r,N.position)<R+N.getRadius())},this._getRollColor=r=>{if(!r||!this.roll||!this.backColor&&!this.roll.alter)return r;const S=this.roll.horizontal&&this.roll.vertical?2:1,A=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+A)/(Math.PI/S))%2?this.backColor?this.backColor:this.roll.alter?kye(r,this.roll.alter.type,this.roll.alter.value):r:r},this._initPosition=r=>{const S=this.container,A=rr(this.options.zIndex.value);this.position=this._calcPosition(S,r,zd(A,0,S.zLayers)),this.initialPosition=this.position.copy();const R=S.canvas.size;switch(this.moveCenter={...d8(this.options.move.center,R),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=hye(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=$a.origin},this._loadShapeData=(r,S)=>{const A=r.options[this.shape];if(A)return kl({close:r.close,fill:r.fill},bm(A,this.id,S))},this._engine=t,this.init(n,u,f,y)}destroy(t){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const n=this.container,a=this.pathGenerator;for(const[,u]of n.plugins)u.particleDestroyed&&u.particleDestroyed(this,t);for(const u of n.particles.updaters)u.particleDestroyed&&u.particleDestroyed(this,t);a&&a.reset(this)}draw(t){const n=this.container;for(const[,a]of n.plugins)n.canvas.drawParticlePlugin(a,this,t);n.canvas.drawParticle(this,t)}getFillColor(){return this._getRollColor(this.bubble.color??qN(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??qN(this.strokeColor))}init(t,n,a,u){const f=this.container,y=this._engine;this.id=t,this.group=u,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const r=f.retina.pixelRatio,S=f.actualOptions,A=S8(this._engine,f,S.particles),R=A.shape.type,{reduceDuplicates:O}=A;this.shape=bm(R,this.id,O);const z=A.shape;if(a&&a.shape&&a.shape.type){const ne=a.shape.type,se=bm(ne,this.id,O);se&&(this.shape=se,z.load(a.shape))}this.shapeData=this._loadShapeData(z,O),A.load(a);const N=this.shapeData;N&&A.load(N.particles);const U=new v8(y,f);U.load(f.actualOptions.interactivity),U.load(A.interactivity),this.interactivity=U,this.fill=(N==null?void 0:N.fill)??A.shape.fill,this.close=(N==null?void 0:N.close)??A.shape.close,this.options=A;const H=this.options.move.path;this.pathDelay=ov(H.delay)*1e3,H.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(H.generator),this.pathGenerator&&f.addPath(H.generator,this.pathGenerator)&&this.pathGenerator.init(f)),f.retina.initParticle(this),this.size=h8(this.options.size,r),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(n),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-rr(this.options.move.decay);const K=f.particles;K.needsSort=K.needsSort||K.lastZIndex<this.position.z,K.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/f.zLayers,this.sides=24;let W=f.drawers.get(this.shape);W||(W=this._engine.plugins.getShapeDrawer(this.shape),W&&f.drawers.set(this.shape,W)),W&&W.loadShape&&W.loadShape(this);const re=W==null?void 0:W.getSidesCount;re&&(this.sides=re(this)),this.spawning=!1,this.shadowColor=Ld(this.options.shadow.color);for(const ne of f.particles.updaters)ne.init(this);for(const ne of f.particles.movers)ne.init&&ne.init(this);W&&W.particleInit&&W.particleInit(f,this);for(const[,ne]of f.plugins)ne.particleCreated&&ne.particleCreated(this)}isInsideCanvas(){const t=this.getRadius(),n=this.container.canvas.size,a=this.position;return a.x>=-t&&a.y>=-t&&a.y<=n.height+t&&a.x<=n.width+t}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const t of this.container.particles.updaters)t.reset&&t.reset(this)}}class M_e{constructor(t,n){this.position=t,this.particle=n}}class T8{constructor(t,n){this.position={x:t,y:n}}}class Bd extends T8{constructor(t,n,a,u){super(t,n),this.size={height:u,width:a}}contains(t){const n=this.size.width,a=this.size.height,u=this.position;return t.x>=u.x&&t.x<=u.x+n&&t.y>=u.y&&t.y<=u.y+a}intersects(t){t instanceof zl&&t.intersects(this);const n=this.size.width,a=this.size.height,u=this.position,f=t.position,y=t instanceof Bd?t.size:{width:0,height:0},r=y.width,S=y.height;return f.x<u.x+n&&f.x+r>u.x&&f.y<u.y+a&&f.y+S>u.y}}class zl extends T8{constructor(t,n,a){super(t,n),this.radius=a}contains(t){return vu(t,this.position)<=this.radius}intersects(t){const n=this.position,a=t.position,u={x:Math.abs(a.x-n.x),y:Math.abs(a.y-n.y)},f=this.radius;if(t instanceof zl){const y=f+t.radius,r=Math.sqrt(u.x**2+u.y**2);return y>r}else if(t instanceof Bd){const{width:y,height:r}=t.size;return Math.pow(u.x-y,2)+Math.pow(u.y-r,2)<=f**2||u.x<=f+y&&u.y<=f+r||u.x<=y||u.y<=r}return!1}}class iC{constructor(t,n){this.rectangle=t,this.capacity=n,this._subdivide=()=>{const{x:a,y:u}=this.rectangle.position,{width:f,height:y}=this.rectangle.size,{capacity:r}=this;for(let S=0;S<4;S++)this._subs.push(new iC(new Bd(a+f/2*(S%2),u+y/2*(Math.round(S/2)-S%2),f/2,y/2),r));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(t){return this.rectangle.contains(t.position)?this._points.length<this.capacity?(this._points.push(t),!0):(this._divided||this._subdivide(),this._subs.some(n=>n.insert(t))):!1}query(t,n,a){const u=a||[];if(!t.intersects(this.rectangle))return[];for(const f of this._points)!t.contains(f.position)&&vu(t.position,f.position)>f.particle.getRadius()&&(!n||n(f.particle))||u.push(f.particle);if(this._divided)for(const f of this._subs)f.query(t,n,u);return u}queryCircle(t,n,a){return this.query(new zl(t.x,t.y,n),a)}queryRectangle(t,n,a){return this.query(new Bd(t.x,t.y,n.width,n.height),a)}}const KN=4,JN=e=>new Bd(-e.width/4,-e.height/4,e.width*3/2,e.height*3/2);let R_e=class{constructor(t,n){this._applyDensity=(u,f,y)=>{var N;if(!((N=u.number.density)!=null&&N.enable))return;const r=u.number,S=this._initDensityFactor(r.density),A=r.value,R=r.limit>0?r.limit:A,O=Math.min(A,R)*S+f,z=Math.min(this.count,this.filter(U=>U.group===y).length);this.limit=r.limit*S,z<O?this.push(Math.abs(O-z),void 0,u,y):z>O&&this.removeQuantity(z-O,y)},this._initDensityFactor=u=>{const f=this._container;if(!f.canvas.element||!u.enable)return 1;const y=f.canvas.element,r=f.retina.pixelRatio;return y.width*y.height/(u.factor*r**2*u.area)},this._pushParticle=(u,f,y,r)=>{try{let S=this.pool.pop();S?S.init(this._nextId,u,f,y):S=new A_e(this._engine,this._nextId,this._container,u,f,y);let A=!0;return r&&(A=r(S)),A?(this._array.push(S),this._zArray.push(S),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:S}}),S):void 0}catch(S){sv().warning(`${Eh} adding particle: ${S}`);return}},this._removeParticle=(u,f,y)=>{const r=this._array[u];if(!r||r.group!==f)return!1;r.destroy(y);const S=this._zArray.indexOf(r);return this._array.splice(u,1),this._zArray.splice(S,1),this.pool.push(r),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:r}}),!0},this._engine=t,this._container=n,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new C_e(t,n);const a=n.canvas.size;this.quadTree=new iC(JN(a),KN),this.movers=this._engine.plugins.getMovers(n,!0),this.updaters=this._engine.plugins.getUpdaters(n,!0)}get count(){return this._array.length}addManualParticles(){const t=this._container,n=t.actualOptions;for(const a of n.manualParticles)this.addParticle(a.position?d8(a.position,t.canvas.size):void 0,a.options)}addParticle(t,n,a,u){const f=this._container,y=f.actualOptions,r=y.particles.number.limit;if(r>0){const S=this.count+1-r;S>0&&this.removeQuantity(S)}return this._pushParticle(t,n,a,u)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(t){const n=this._container;n.canvas.clear(),await this.update(t);for(const[,a]of n.plugins)n.canvas.drawPlugin(a,t);for(const a of this._zArray)a.draw(t)}filter(t){return this._array.filter(t)}find(t){return this._array.find(t)}handleClickMode(t){this._interactionManager.handleClickMode(t)}init(){var u;const t=this._container,n=t.actualOptions;this.lastZIndex=0,this.needsSort=!1;let a=!1;this.updaters=this._engine.plugins.getUpdaters(t,!0),this._interactionManager.init();for(const[,f]of t.plugins)if(f.particlesInitialization!==void 0&&(a=f.particlesInitialization()),a)break;this._interactionManager.init();for(const[,f]of t.pathGenerators)f.init(t);if(this.addManualParticles(),!a){for(const f in n.particles.groups){const y=n.particles.groups[f];for(let r=this.count,S=0;S<((u=y.number)==null?void 0:u.value)&&r<n.particles.number.value;r++,S++)this.addParticle(void 0,y,f)}for(let f=this.count;f<n.particles.number.value;f++)this.addParticle()}}push(t,n,a,u){this.pushing=!0;for(let f=0;f<t;f++)this.addParticle(n==null?void 0:n.position,a,u);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(t,n,a){this.removeAt(this._array.indexOf(t),void 0,n,a)}removeAt(t,n=1,a,u){if(t<0||t>this.count)return;let f=0;for(let y=t;f<n&&y<this.count;y++)this._removeParticle(y--,a,u)&&f++}removeQuantity(t,n){this.removeAt(0,t,n)}setDensity(){const t=this._container.actualOptions,n=t.particles.groups;for(const a in n)this._applyDensity(n[a],0,a);this._applyDensity(t.particles,t.manualParticles.length)}async update(t){const n=this._container,a=new Set;this.quadTree=new iC(JN(n.canvas.size),KN);for(const[,u]of n.pathGenerators)u.update();for(const[,u]of n.plugins)u.update&&u.update(t);for(const u of this._array){const f=n.canvas.resizeFactor;f&&!u.ignoresResizeRatio&&(u.position.x*=f.width,u.position.y*=f.height,u.initialPosition.x*=f.width,u.initialPosition.y*=f.height),u.ignoresResizeRatio=!1,await this._interactionManager.reset(u);for(const[,y]of this._container.plugins){if(u.destroyed)break;y.particleUpdate&&y.particleUpdate(u,t)}for(const y of this.movers)y.isEnabled(u)&&y.move(u,t);if(u.destroyed){a.add(u);continue}this.quadTree.insert(new M_e(u.getPosition(),u))}if(a.size){const u=f=>!a.has(f);this._array=this.filter(u),this._zArray=this._zArray.filter(u),this.pool.push(...a)}await this._interactionManager.externalInteract(t);for(const u of this._array){for(const f of this.updaters)f.update(u,t);!u.destroyed&&!u.spawning&&await this._interactionManager.particlesInteract(u,t)}if(delete n.canvas.resizeFactor,this.needsSort){const u=this._zArray;u.sort((f,y)=>y.position.z-f.position.z||f.id-y.id),this.lastZIndex=u[u.length-1].position.z,this.needsSort=!1}}};class I_e{constructor(t){this.container=t,this.pixelRatio=1,this.reduceFactor=1}init(){const t=this.container,n=t.actualOptions;this.pixelRatio=!n.detectRetina||ux()?1:window.devicePixelRatio,this.reduceFactor=1;const a=this.pixelRatio;if(t.canvas.element){const y=t.canvas.element;t.canvas.size.width=y.offsetWidth*a,t.canvas.size.height=y.offsetHeight*a}const u=n.particles,f=u.move;this.attractDistance=rr(f.attract.distance)*a,this.maxSpeed=rr(f.gravity.maxSpeed)*a,this.sizeAnimationSpeed=rr(u.size.animation.speed)*a}initParticle(t){const n=t.options,a=this.pixelRatio,u=n.move,f=u.distance,y=t.retina;y.attractDistance=rr(u.attract.distance)*a,y.moveDrift=rr(u.drift)*a,y.moveSpeed=rr(u.speed)*a,y.sizeAnimationSpeed=rr(n.size.animation.speed)*a;const r=y.maxDistance;r.horizontal=f.horizontal!==void 0?f.horizontal*a:void 0,r.vertical=f.vertical!==void 0?f.vertical*a:void 0,y.maxSpeed=rr(u.gravity.maxSpeed)*a}}function gs(e){return e&&!e.destroyed}function P_e(e,t=60,n=!1){return{value:e,factor:n?60/t:60*e/1e3}}function O0(e,t,...n){const a=new E_e(e,t);return w8(a,...n),a}const D_e="default",QN={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};class O_e{constructor(t,n,a){this.id=n,this._intersectionManager=u=>{if(!(!gs(this)||!this.actualOptions.pauseOnOutsideViewport))for(const f of u)f.target===this.interactivity.element&&(f.isIntersecting?this.play:this.pause)()},this._nextFrame=async u=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&u<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=u);const f=P_e(u-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(f.value),this.lastFrameTime=u,f.value>1e3){this.draw(!1);return}if(await this.particles.draw(f),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(f){sv().error(`${Eh} in animation loop`,f)}},this._engine=t,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=a,this._initialSourceOptions=a,this.retina=new I_e(this),this.canvas=new Bye(this),this.particles=new R_e(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=O0(this._engine,this),this.actualOptions=O0(this._engine,this),this._eventListeners=new Fye(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(u=>this._intersectionManager(u))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(t){if(!gs(this))return;const n=this.interactivity.element;if(!n)return;const a=(O,z,N)=>{if(!gs(this))return;const U=this.retina.pixelRatio,H={x:z.x*U,y:z.y*U},K=this.particles.quadTree.queryCircle(H,N*U);t(O,K)},u=O=>{if(!gs(this))return;const z=O,N={x:z.offsetX||z.clientX,y:z.offsetY||z.clientY};a(O,N,1)},f=()=>{gs(this)&&(A=!0,R=!1)},y=()=>{gs(this)&&(R=!0)},r=O=>{if(gs(this)){if(A&&!R){const z=O;let N=z.touches[z.touches.length-1];if(!N&&(N=z.changedTouches[z.changedTouches.length-1],!N))return;const U=this.canvas.element,H=U?U.getBoundingClientRect():void 0,K={x:N.clientX-(H?H.left:0),y:N.clientY-(H?H.top:0)};a(O,K,Math.max(N.radiusX,N.radiusY))}A=!1,R=!1}},S=()=>{gs(this)&&(A=!1,R=!1)};let A=!1,R=!1;n.addEventListener("click",u),n.addEventListener("touchstart",f),n.addEventListener("touchmove",y),n.addEventListener("touchend",r),n.addEventListener("touchcancel",S)}addLifeTime(t){this._lifeTime+=t}addPath(t,n,a=!1){return!gs(this)||!a&&this.pathGenerators.has(t)?!1:(this.pathGenerators.set(t,n??QN),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!gs(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,a]of this.drawers)a.destroy&&a.destroy(this);for(const a of this.drawers.keys())this.drawers.delete(a);this._engine.plugins.destroy(this),this.destroyed=!0;const t=this._engine.dom(),n=t.findIndex(a=>a===this);n>=0&&t.splice(n,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(t){if(!gs(this))return;let n=t;this._drawAnimationFrame=requestAnimationFrame(async a=>{n&&(this.lastFrameTime=void 0,n=!1),await this._nextFrame(a)})}async export(t,n={}){for(const[,a]of this.plugins){if(!a.export)continue;const u=await a.export(t,n);if(u.supported)return u.blob}sv().error(`${Eh} - Export plugin with type ${t} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&gs(this)}handleClickMode(t){if(gs(this)){this.particles.handleClickMode(t);for(const[,n]of this.plugins)n.handleClickMode&&n.handleClickMode(t)}}async init(){if(!gs(this))return;const t=this._engine.plugins.getSupportedShapes();for(const a of t){const u=this._engine.plugins.getShapeDrawer(a);u&&this.drawers.set(a,u)}this._options=O0(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=O0(this._engine,this,this._options);const n=this._engine.plugins.getAvailablePlugins(this);for(const[a,u]of n)this.plugins.set(a,u);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=rr(this.actualOptions.duration)*1e3,this._delay=rr(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,a]of this.drawers)a.init&&await a.init(this);for(const[,a]of this.plugins)a.init&&await a.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,a]of this.plugins)a.particlesSetup&&a.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(t){gs(this)&&(this._currentTheme=t,await this.refresh())}pause(){if(gs(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,t]of this.plugins)t.pause&&t.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(t){if(!gs(this))return;const n=this._paused||t;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),n)for(const[,a]of this.plugins)a.play&&a.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(n||!1)}async refresh(){if(gs(this))return this.stop(),this.start()}async reset(){if(gs(this))return this._initialSourceOptions=void 0,this._options=O0(this._engine,this),this.actualOptions=O0(this._engine,this,this._options),this.refresh()}setNoise(t,n,a){gs(this)&&this.setPath(t,n,a)}setPath(t,n,a){if(!t||!gs(this))return;const u={...QN};if(f8(t))u.generate=t,n&&(u.init=n),a&&(u.update=a);else{const f=u;u.generate=t.generate||f.generate,u.init=t.init||f.init,u.update=t.update||f.update}this.addPath(D_e,u,!0)}async start(){!gs(this)||this.started||(await this.init(),this.started=!0,await new Promise(t=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,n]of this.plugins)n.start&&await n.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),t()},this._delay)}))}stop(){if(!(!gs(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,t]of this.plugins)t.stop&&t.stop();for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const t=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===t?!1:(this.responsiveMaxWidth=t,!0)}}class L_e{constructor(){this._listeners=new Map}addEventListener(t,n){this.removeEventListener(t,n);let a=this._listeners.get(t);a||(a=[],this._listeners.set(t,a)),a.push(n)}dispatchEvent(t,n){const a=this._listeners.get(t);a&&a.forEach(u=>u(n))}hasEventListener(t){return!!this._listeners.get(t)}removeAllEventListeners(t){t?this._listeners.delete(t):this._listeners=new Map}removeEventListener(t,n){const a=this._listeners.get(t);if(!a)return;const u=a.length,f=a.indexOf(n);f<0||(u===1?this._listeners.delete(t):a.splice(f,1))}}function QR(e,t,n,a=!1){let u=t.get(e);return(!u||a)&&(u=[...n.values()].map(f=>f(e)),t.set(e,u)),u}class k_e{constructor(t){this._engine=t,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(t,n){this._initializers.interactors.set(t,n)}addParticleMover(t,n){this._initializers.movers.set(t,n)}addParticleUpdater(t,n){this._initializers.updaters.set(t,n)}addPathGenerator(t,n){!this.getPathGenerator(t)&&this.pathGenerators.set(t,n)}addPlugin(t){!this.getPlugin(t.id)&&this.plugins.push(t)}addPreset(t,n,a=!1){(a||!this.getPreset(t))&&this.presets.set(t,n)}addShapeDrawer(t,n){Ha(t,a=>{!this.getShapeDrawer(a)&&this.drawers.set(a,n)})}destroy(t){this.updaters.delete(t),this.movers.delete(t),this.interactors.delete(t)}getAvailablePlugins(t){const n=new Map;for(const a of this.plugins)a.needsPlugin(t.actualOptions)&&n.set(a.id,a.getPlugin(t));return n}getInteractors(t,n=!1){return QR(t,this.interactors,this._initializers.interactors,n)}getMovers(t,n=!1){return QR(t,this.movers,this._initializers.movers,n)}getPathGenerator(t){return this.pathGenerators.get(t)}getPlugin(t){return this.plugins.find(n=>n.id===t)}getPreset(t){return this.presets.get(t)}getShapeDrawer(t){return this.drawers.get(t)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(t,n=!1){return QR(t,this.updaters,this._initializers.updaters,n)}loadOptions(t,n){for(const a of this.plugins)a.loadOptions(t,n)}loadParticlesOptions(t,n,...a){const u=this.updaters.get(t);if(u)for(const f of u)f.loadOptions&&f.loadOptions(n,...a)}}async function z_e(e){const t=bm(e.url,e.index);if(!t)return e.fallback;const n=await fetch(t);return n.ok?n.json():(sv().error(`${Eh} ${n.status} while retrieving config file`),e.fallback)}function B_e(e){return!e.id&&!e.element&&!e.url&&!e.options}function F_e(e){return!B_e(e)}class N_e{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new L_e,this._initialized=!1,this.plugins=new k_e(this)}get configs(){const t={};for(const[n,a]of this._configs)t[n]=a;return t}get version(){return"2.12.0"}addConfig(t,n){Dd(t)?n&&(n.name=t,this._configs.set(t,n)):this._configs.set(t.name??"default",t)}addEventListener(t,n){this._eventDispatcher.addEventListener(t,n)}async addInteractor(t,n,a=!0){this.plugins.addInteractor(t,n),await this.refresh(a)}async addMover(t,n,a=!0){this.plugins.addParticleMover(t,n),await this.refresh(a)}async addParticleUpdater(t,n,a=!0){this.plugins.addParticleUpdater(t,n),await this.refresh(a)}async addPathGenerator(t,n,a=!0){this.plugins.addPathGenerator(t,n),await this.refresh(a)}async addPlugin(t,n=!0){this.plugins.addPlugin(t),await this.refresh(n)}async addPreset(t,n,a=!1,u=!0){this.plugins.addPreset(t,n,a),await this.refresh(u)}async addShape(t,n,a,u,f,y=!0){let r,S=y,A,R,O;Fg(a)?(S=a,A=void 0):A=a,Fg(u)?(S=u,R=void 0):R=u,Fg(f)?(S=f,O=void 0):O=f,f8(n)?r={afterEffect:R,destroy:O,draw:n,init:A}:r=n,this.plugins.addShapeDrawer(t,r),await this.refresh(S)}dispatchEvent(t,n){this._eventDispatcher.dispatchEvent(t,n)}dom(){return this._domArray}domItem(t){const n=this.dom(),a=n[t];if(!a||a.destroyed){n.splice(t,1);return}return a}init(){this._initialized||(this._initialized=!0)}async load(t,n){return this.loadFromArray(t,n)}async loadFromArray(t,n,a){let u;return F_e(t)?u=t:(u={},Dd(t)?u.id=t:u.options=t,Od(n)?u.index=n:u.options=n??u.options,u.index=a??u.index),this._loadParams(u)}async loadJSON(t,n,a){let u,f;return Od(n)||n===void 0?u=t:(f=t,u=n),this._loadParams({id:f,url:u,index:a})}async refresh(t=!0){t&&this.dom().forEach(n=>n.refresh())}removeEventListener(t,n){this._eventDispatcher.removeEventListener(t,n)}async set(t,n,a,u){const f={index:u};return Dd(t)?f.id=t:f.element=t,n instanceof HTMLElement?f.element=n:f.options=n,Od(a)?f.index=a:f.options=a??f.options,this._loadParams(f)}async setJSON(t,n,a,u){const f={};return t instanceof HTMLElement?(f.element=t,f.url=n,f.index=a):(f.id=t,f.element=n,f.url=a,f.index=u),this._loadParams(f)}setOnClickHandler(t){const n=this.dom();if(!n.length)throw new Error(`${Eh} can only set click handlers after calling tsParticles.load()`);for(const a of n)a.addClickHandler(t)}async _loadParams(t){const n=t.id??`tsparticles${Math.floor(ss()*1e4)}`,{index:a,url:u}=t,f=u?await z_e({fallback:t.options,url:u,index:a}):t.options;let y=t.element??document.getElementById(n);y||(y=document.createElement("div"),y.id=n,document.body.append(y));const r=bm(f,a),S=this.dom(),A=S.findIndex(z=>z.id===n);if(A>=0){const z=this.domItem(A);z&&!z.destroyed&&(z.destroy(),S.splice(A,1))}let R;if(y.tagName.toLowerCase()==="canvas")R=y,R.dataset[I1]="false";else{const z=y.getElementsByTagName("canvas");z.length?(R=z[0],R.dataset[I1]="false"):(R=document.createElement("canvas"),R.dataset[I1]="true",y.appendChild(R))}R.style.width||(R.style.width="100%"),R.style.height||(R.style.height="100%");const O=new O_e(this,n,r);return A>=0?S.splice(A,0,O):S.push(O),O.canvas.loadCanvas(R),await O.start(),O}}class j_e{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(t){const n=t.value,a=n.hsl??t.value;if(a.h!==void 0&&a.s!==void 0&&a.l!==void 0)return hx(a)}handleRangeColor(t){const n=t.value,a=n.hsl??t.value;if(a.h!==void 0&&a.l!==void 0)return hx({h:rr(a.h),l:rr(a.l),s:rr(a.s)})}parseString(t){if(!t.startsWith("hsl"))return;const n=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,a=n.exec(t);return a?Cye({a:a.length>4?s8(a[5]):1,h:parseInt(a[1],10),l:parseInt(a[3],10),s:parseInt(a[2],10)}):void 0}}class U_e{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(t){const n=t.value,a=n.rgb??t.value;if(a.r!==void 0)return a}handleRangeColor(t){const n=t.value,a=n.rgb??t.value;if(a.r!==void 0)return{r:rr(a.r),g:rr(a.g),b:rr(a.b)}}parseString(t){if(!t.startsWith(this.stringPrefix))return;const n=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,a=n.exec(t);return a?{a:a.length>4?s8(a[5]):1,b:parseInt(a[3],10),g:parseInt(a[2],10),r:parseInt(a[1],10)}:void 0}}function V_e(){const e=new U_e,t=new j_e;GN(e),GN(t);const n=new N_e;return n.init(),n}class ep{constructor(t){this.container=t,this.type="external"}}class eL{constructor(t){this.container=t,this.type="particles"}}const rC=V_e();ux()||(window.tsParticles=rC);const X0=e=>typeof e=="object"&&e!==null;function oC(e,t,n=()=>!1){if(!X0(e)||!X0(t))return e===t;const a=Object.keys(e).filter(f=>!n(f)),u=Object.keys(t).filter(f=>!n(f));if(a.length!==u.length)return!1;for(const f of a){const y=e[f],r=t[f];if(X0(y)&&X0(r)){if(y===t&&r===e)continue;if(!oC(y,r,n))return!1}else if(Array.isArray(y)&&Array.isArray(r)){if(!E8(y,r,n))return!1}else if(y!==r)return!1}return!0}function E8(e,t,n){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){const u=e[a],f=t[a];if(Array.isArray(u)&&Array.isArray(f)){if(!E8(u,f,n))return!1}else if(X0(u)&&X0(f)){if(!oC(u,f,n))return!1}else if(u!==f)return!1}return!0}const C8="tsparticles";let A8=class M8 extends ee.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const n=t.options??t.params,a=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!oC(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!oC(n,a,u=>u.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(rC),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:n,className:a,canvasClassName:u,id:f}=this.props;return Or.createElement("div",{className:a,id:f},Or.createElement("canvas",{className:u,style:{...this.props.style,width:t,height:n}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??M8.defaultProps.id??C8,n=await rC.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=n),this.setState({library:n}),this.props.loaded&&await this.props.loaded(n)}};A8.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:C8};class sC{static init(t){var f;const n=new sC,a=t.selector;if(!a)throw new Error("No selector provided");const u=document.querySelector(a);if(!u)throw new Error("No element found for selector");return rC.set(a.replace(".","").replace("!",""),u,{fullScreen:{enable:!1},particles:{color:{value:t.color??"!000000"},links:{color:"random",distance:t.minDistance??120,enable:t.connectParticles??!1},move:{enable:!0,speed:t.speed??.5},number:{value:t.maxParticles??100},size:{value:{min:1,max:t.sizeVariations??3}}},responsive:(f=t.responsive)==null?void 0:f.map(y=>{var r,S,A,R,O;return{maxWidth:y.breakpoint,options:{particles:{color:{value:(r=y.options)==null?void 0:r.color},links:{distance:(S=y.options)==null?void 0:S.minDistance,enable:(A=y.options)==null?void 0:A.connectParticles},number:{value:t.maxParticles},move:{enable:!0,speed:(R=y.options)==null?void 0:R.speed},size:{value:(O=y.options)==null?void 0:O.sizeVariations}}}}})}).then(y=>{n._container=y}),n}destroy(){const t=this._container;t&&t.destroy()}pauseAnimation(){const t=this._container;t&&t.pause()}resumeAnimation(){const t=this._container;t&&t.play()}}const $_e=e=>{const t=(a,u)=>e.load(a,u);t.load=(a,u,f)=>{e.loadJSON(a,u).then(y=>{y&&f(y)}).catch(()=>{f(void 0)})},t.setOnClickHandler=a=>{e.setOnClickHandler(a)};const n=e.dom();return{particlesJS:t,pJSDom:n}},H_e=e=>{const{particlesJS:t,pJSDom:n}=$_e(e);return window.particlesJS=t,window.pJSDom=n,window.Particles=sC,{particlesJS:t,pJSDom:n,Particles:sC}};function G_e(e){const t=e.initialPosition,{dx:n,dy:a}=lc(t,e.position),u=Math.abs(n),f=Math.abs(a),{maxDistance:y}=e.retina,r=y.horizontal,S=y.vertical;if(!(!r&&!S)){if((r&&u>=r||S&&f>=S)&&!e.misplaced)e.misplaced=!!r&&u>r||!!S&&f>S,r&&(e.velocity.x=e.velocity.y/2-e.velocity.x),S&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!r||u<r)&&(!S||f<S)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const A=e.position,R=e.velocity;r&&(A.x<t.x&&R.x<0||A.x>t.x&&R.x>0)&&(R.x*=-ss()),S&&(A.y<t.y&&R.y<0||A.y>t.y&&R.y>0)&&(R.y*=-ss())}}}function q_e(e,t,n,a,u,f){X_e(e,f);const y=e.gravity,r=y!=null&&y.enable&&y.inverse?-1:1;u&&n&&(e.velocity.x+=u*f.factor/(60*n)),y!=null&&y.enable&&n&&(e.velocity.y+=r*(y.acceleration*f.factor)/(60*n));const S=e.moveDecay;e.velocity.multTo(S);const A=e.velocity.mult(n);y!=null&&y.enable&&a>0&&(!y.inverse&&A.y>=0&&A.y>=a||y.inverse&&A.y<=0&&A.y<=-a)&&(A.y=r*a,n&&(e.velocity.y=A.y/n));const R=e.options.zIndex,O=(1-e.zIndexFactor)**R.velocityRate;A.multTo(O);const{position:z}=e;z.addTo(A),t.vibrate&&(z.x+=Math.sin(z.x*Math.cos(z.y)),z.y+=Math.cos(z.y*Math.sin(z.x)))}function W_e(e,t){const n=e.container;if(!e.spin)return;const a={x:e.spin.direction==="clockwise"?Math.cos:Math.sin,y:e.spin.direction==="clockwise"?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*a.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*a.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const u=Math.max(n.canvas.size.width,n.canvas.size.height);e.spin.radius>u/2?(e.spin.radius=u/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/u)}function X_e(e,t){var y;const n=e.options,a=n.move.path;if(!a.enable)return;if(e.lastPathTime<=e.pathDelay){e.lastPathTime+=t.value;return}const f=(y=e.pathGenerator)==null?void 0:y.generate(e,t);f&&e.velocity.addTo(f),a.clamp&&(e.velocity.x=zd(e.velocity.x,-1,1),e.velocity.y=zd(e.velocity.y,-1,1)),e.lastPathTime-=e.pathDelay}function Z_e(e){return e.slow.inRange?e.slow.factor:1}const Y_e=2;class K_e{constructor(){this._initSpin=t=>{const n=t.container,a=t.options,u=a.move.spin;if(!u.enable)return;const f=u.position??{x:50,y:50},y={x:f.x/100*n.canvas.size.width,y:f.y/100*n.canvas.size.height},r=t.getPosition(),S=vu(r,y),A=rr(u.acceleration);t.retina.spinAcceleration=A*n.retina.pixelRatio,t.spin={center:y,direction:t.velocity.x>=0?"clockwise":"counter-clockwise",angle:t.velocity.angle,radius:S,acceleration:t.retina.spinAcceleration}}}init(t){const n=t.options,a=n.move.gravity;t.gravity={enable:a.enable,acceleration:rr(a.acceleration),inverse:a.inverse},this._initSpin(t)}isEnabled(t){return!t.destroyed&&t.options.move.enable}move(t,n){var U,H;const a=t.options,u=a.move;if(!u.enable)return;const f=t.container,y=f.retina.pixelRatio,r=Z_e(t),S=((U=t.retina).moveSpeed??(U.moveSpeed=rr(u.speed)*y))*f.retina.reduceFactor,A=(H=t.retina).moveDrift??(H.moveDrift=rr(t.options.move.drift)*y),R=zg(a.size.value)*y,O=u.size?t.getRadius()/R:1,z=S*O*r*(n.factor||1)/Y_e,N=t.retina.maxSpeed??f.retina.maxSpeed;u.spin.enable?W_e(t,z):q_e(t,u,z,N,A,n),G_e(t)}}async function J_e(e,t=!0){await e.addMover("base",()=>new K_e,t)}class Q_e{draw(t,n,a){n.circleRange||(n.circleRange={min:0,max:Math.PI*2});const u=n.circleRange;t.arc(0,0,a,u.min,u.max,!1)}getSidesCount(){return 12}particleInit(t,n){const a=n.shapeData,u=(a==null?void 0:a.angle)??{max:360,min:0};n.circleRange=W0(u)?{min:u.min*Math.PI/180,max:u.max*Math.PI/180}:{min:0,max:u*Math.PI/180}}}async function eve(e,t=!0){await e.addShape("circle",new Q_e,t)}function eI(e,t,n,a,u){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const f=Mc(n.offset),y=(t.velocity??0)*e.factor+f*3.6,r=t.decay??1;!u||t.status==="increasing"?(t.value+=y,t.value>a&&(t.loops||(t.loops=0),t.loops++,u&&(t.status="decreasing",t.value-=t.value%a))):(t.value-=y,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&r!==1&&(t.velocity*=r),t.value>a&&(t.value%=a)}function tve(e,t){const{h:n,s:a,l:u}=e.options.color.animation,{color:f}=e;if(!f)return;const{h:y,s:r,l:S}=f;y&&eI(t,y,n,360,!1),r&&eI(t,r,a,100,!0),S&&eI(t,S,u,100,!0)}class nve{constructor(t){this.container=t}init(t){const n=ow(t.options.color,t.id,t.options.reduceDuplicates);n&&(t.color=_8(n,t.options.color.animation,this.container.retina.reduceFactor))}isEnabled(t){const{h:n,s:a,l:u}=t.options.color.animation,{color:f}=t;return!t.destroyed&&!t.spawning&&((f==null?void 0:f.h.value)!==void 0&&n.enable||(f==null?void 0:f.s.value)!==void 0&&a.enable||(f==null?void 0:f.l.value)!==void 0&&u.enable)}update(t,n){tve(t,n)}}async function ive(e,t=!0){await e.addParticleUpdater("color",n=>new nve(n),t)}function rve(e,t,n,a){switch(e.options.opacity.animation.destroy){case"max":t>=a&&e.destroy();break;case"min":t<=n&&e.destroy();break}}function ove(e,t){const n=e.opacity;if(e.destroyed||!(n!=null&&n.enable)||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const a=n.min,u=n.max,f=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=u?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=(n.velocity??0)*t.factor;break;case"decreasing":n.value<=a?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=(n.velocity??0)*t.factor;break}n.velocity&&n.decay!==1&&(n.velocity*=f),rve(e,n.value,a,u),e.destroyed||(n.value=zd(n.value,a,u))}}class sve{constructor(t){this.container=t}init(t){const n=t.options.opacity;t.opacity=h8(n,1);const a=n.animation;a.enable&&(t.opacity.velocity=rr(a.speed)/100*this.container.retina.reduceFactor,a.sync||(t.opacity.velocity*=ss()))}isEnabled(t){return!t.destroyed&&!t.spawning&&!!t.opacity&&t.opacity.enable&&((t.opacity.maxLoops??0)<=0||(t.opacity.maxLoops??0)>0&&(t.opacity.loops??0)<(t.opacity.maxLoops??0))}reset(t){t.opacity&&(t.opacity.time=0,t.opacity.loops=0)}update(t,n){this.isEnabled(t)&&ove(t,n)}}async function ave(e,t=!0){await e.addParticleUpdater("opacity",n=>new sve(n),t)}function lve(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-horizontal"&&e.outMode!=="bounceHorizontal"&&e.outMode!=="split"||e.direction!=="left"&&e.direction!=="right")return;e.bounds.right<0&&e.direction==="left"?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&e.direction==="right"&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let n=!1;if(e.direction==="right"&&e.bounds.right>=e.canvasSize.width&&t>0||e.direction==="left"&&e.bounds.left<=0&&t<0){const u=ov(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-u,n=!0}if(!n)return;const a=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&e.direction==="right"?e.particle.position.x=e.canvasSize.width-a:e.bounds.left<=0&&e.direction==="left"&&(e.particle.position.x=a),e.outMode==="split"&&e.particle.destroy()}function cve(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-vertical"&&e.outMode!=="bounceVertical"&&e.outMode!=="split"||e.direction!=="bottom"&&e.direction!=="top")return;e.bounds.bottom<0&&e.direction==="top"?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&e.direction==="bottom"&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let n=!1;if(e.direction==="bottom"&&e.bounds.bottom>=e.canvasSize.height&&t>0||e.direction==="top"&&e.bounds.top<=0&&t<0){const u=ov(e.particle.options.bounce.vertical);e.particle.velocity.y*=-u,n=!0}if(!n)return;const a=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&e.direction==="bottom"?e.particle.position.y=e.canvasSize.height-a:e.bounds.top<=0&&e.direction==="top"&&(e.particle.position.y=a),e.outMode==="split"&&e.particle.destroy()}class uve{constructor(t){this.container=t,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(t,n,a,u){if(!this.modes.includes(u))return;const f=this.container;let y=!1;for(const[,z]of f.plugins)if(z.particleBounce!==void 0&&(y=z.particleBounce(t,a,n)),y)break;if(y)return;const r=t.getPosition(),S=t.offset,A=t.getRadius(),R=zw(r,A),O=f.canvas.size;lve({particle:t,outMode:u,direction:n,bounds:R,canvasSize:O,offset:S,size:A}),cve({particle:t,outMode:u,direction:n,bounds:R,canvasSize:O,offset:S,size:A})}}class hve{constructor(t){this.container=t,this.modes=["destroy"]}update(t,n,a,u){if(!this.modes.includes(u))return;const f=this.container;switch(t.outType){case"normal":case"outside":if(YO(t.position,f.canvas.size,$a.origin,t.getRadius(),n))return;break;case"inside":{const{dx:y,dy:r}=lc(t.position,t.moveCenter),{x:S,y:A}=t.velocity;if(S<0&&y>t.moveCenter.radius||A<0&&r>t.moveCenter.radius||S>=0&&y<-t.moveCenter.radius||A>=0&&r<-t.moveCenter.radius)return;break}}f.particles.remove(t,void 0,!0)}}class dve{constructor(t){this.container=t,this.modes=["none"]}update(t,n,a,u){if(!this.modes.includes(u)||t.options.move.distance.horizontal&&(n==="left"||n==="right")||t.options.move.distance.vertical&&(n==="top"||n==="bottom"))return;const f=t.options.move.gravity,y=this.container,r=y.canvas.size,S=t.getRadius();if(f.enable){const A=t.position;(!f.inverse&&A.y>r.height+S&&n==="bottom"||f.inverse&&A.y<-S&&n==="top")&&y.particles.remove(t)}else{if(t.velocity.y>0&&t.position.y<=r.height+S||t.velocity.y<0&&t.position.y>=-S||t.velocity.x>0&&t.position.x<=r.width+S||t.velocity.x<0&&t.position.x>=-S)return;YO(t.position,y.canvas.size,$a.origin,S,n)||y.particles.remove(t)}}}class fve{constructor(t){this.container=t,this.modes=["out"]}update(t,n,a,u){if(!this.modes.includes(u))return;const f=this.container;switch(t.outType){case"inside":{const{x:y,y:r}=t.velocity,S=$a.origin;S.length=t.moveCenter.radius,S.angle=t.velocity.angle+Math.PI,S.addTo($a.create(t.moveCenter));const{dx:A,dy:R}=lc(t.position,S);if(y<=0&&A>=0||r<=0&&R>=0||y>=0&&A<=0||r>=0&&R<=0)return;t.position.x=Math.floor(Mc({min:0,max:f.canvas.size.width})),t.position.y=Math.floor(Mc({min:0,max:f.canvas.size.height}));const{dx:O,dy:z}=lc(t.position,t.moveCenter);t.direction=Math.atan2(-z,-O),t.velocity.angle=t.direction;break}default:{if(YO(t.position,f.canvas.size,$a.origin,t.getRadius(),n))return;switch(t.outType){case"outside":{t.position.x=Math.floor(Mc({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.x,t.position.y=Math.floor(Mc({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.y;const{dx:y,dy:r}=lc(t.position,t.moveCenter);t.moveCenter.radius&&(t.direction=Math.atan2(r,y),t.velocity.angle=t.direction);break}case"normal":{const y=t.options.move.warp,r=f.canvas.size,S={bottom:r.height+t.getRadius()+t.offset.y,left:-t.getRadius()-t.offset.x,right:r.width+t.getRadius()+t.offset.x,top:-t.getRadius()-t.offset.y},A=t.getRadius(),R=zw(t.position,A);n==="right"&&R.left>r.width+t.offset.x?(t.position.x=S.left,t.initialPosition.x=t.position.x,y||(t.position.y=ss()*r.height,t.initialPosition.y=t.position.y)):n==="left"&&R.right<-t.offset.x&&(t.position.x=S.right,t.initialPosition.x=t.position.x,y||(t.position.y=ss()*r.height,t.initialPosition.y=t.position.y)),n==="bottom"&&R.top>r.height+t.offset.y?(y||(t.position.x=ss()*r.width,t.initialPosition.x=t.position.x),t.position.y=S.top,t.initialPosition.y=t.position.y):n==="top"&&R.bottom<-t.offset.y&&(y||(t.position.x=ss()*r.width,t.initialPosition.x=t.position.x),t.position.y=S.bottom,t.initialPosition.y=t.position.y);break}}break}}}}class pve{constructor(t){this.container=t,this._updateOutMode=(n,a,u,f)=>{for(const y of this.updaters)y.update(n,f,a,u)},this.updaters=[new uve(t),new hve(t),new fve(t),new dve(t)]}init(){}isEnabled(t){return!t.destroyed&&!t.spawning}update(t,n){const a=t.options.move.outModes;this._updateOutMode(t,n,a.bottom??a.default,"bottom"),this._updateOutMode(t,n,a.left??a.default,"left"),this._updateOutMode(t,n,a.right??a.default,"right"),this._updateOutMode(t,n,a.top??a.default,"top")}}async function mve(e,t=!0){await e.addParticleUpdater("outModes",n=>new pve(n),t)}function gve(e,t,n,a){switch(e.options.size.animation.destroy){case"max":t>=a&&e.destroy();break;case"min":t<=n&&e.destroy();break}}function yve(e,t){const n=e.size;if(e.destroyed||!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const a=(n.velocity??0)*t.factor,u=n.min,f=n.max,y=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=f?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=a;break;case"decreasing":n.value<=u?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=a}n.velocity&&y!==1&&(n.velocity*=y),gve(e,n.value,u,f),e.destroyed||(n.value=zd(n.value,u,f))}}class _ve{init(t){const n=t.container,a=t.options.size,u=a.animation;u.enable&&(t.size.velocity=(t.retina.sizeAnimationSpeed??n.retina.sizeAnimationSpeed)/100*n.retina.reduceFactor,u.sync||(t.size.velocity*=ss()))}isEnabled(t){return!t.destroyed&&!t.spawning&&t.size.enable&&((t.size.maxLoops??0)<=0||(t.size.maxLoops??0)>0&&(t.size.loops??0)<(t.size.maxLoops??0))}reset(t){t.size.loops=0}update(t,n){this.isEnabled(t)&&yve(t,n)}}async function vve(e,t=!0){await e.addParticleUpdater("size",()=>new _ve,t)}async function xve(e,t=!0){await J_e(e,!1),await eve(e,!1),await ive(e,!1),await ave(e,!1),await mve(e,!1),await vve(e,!1),await e.refresh(t)}async function bve(){UR("ease-in-quad",e=>e**2),UR("ease-out-quad",e=>1-(1-e)**2),UR("ease-in-out-quad",e=>e<.5?2*e**2:1-(-2*e+2)**2/2)}class wve{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}let Sve=class extends ep{constructor(t,n){super(n),this._clickAttract=()=>{const a=this.container;a.attract||(a.attract={particles:[]});const{attract:u}=a;if(u.finish||(u.count||(u.count=0),u.count++,u.count===a.particles.count&&(u.finish=!0)),u.clicking){const f=a.interactivity.mouse.clickPosition,y=a.retina.attractModeDistance;if(!y||y<0||!f)return;this._processAttract(f,y,new zl(f.x,f.y,y))}else u.clicking===!1&&(u.particles=[])},this._hoverAttract=()=>{const a=this.container,u=a.interactivity.mouse.position,f=a.retina.attractModeDistance;!f||f<0||!u||this._processAttract(u,f,new zl(u.x,u.y,f))},this._processAttract=(a,u,f)=>{const y=this.container,r=y.actualOptions.interactivity.modes.attract;if(!r)return;const S=y.particles.quadTree.query(f,A=>this.isEnabled(A));for(const A of S){const{dx:R,dy:O,distance:z}=lc(A.position,a),N=r.speed*r.factor,U=zd(o8(r.easing)(1-z/u)*N,0,r.maxSpeed),H=$a.create(z===0?N:R/z*U,z===0?N:O/z*U);A.position.subFrom(H)}},this._engine=t,n.attract||(n.attract={particles:[]}),this.handleClickMode=a=>{const u=this.container.actualOptions,f=u.interactivity.modes.attract;if(!(!f||a!=="attract")){n.attract||(n.attract={particles:[]}),n.attract.clicking=!0,n.attract.count=0;for(const y of n.attract.particles)this.isEnabled(y)&&y.velocity.setTo(y.initialVelocity);n.attract.particles=[],n.attract.finish=!1,setTimeout(()=>{n.destroyed||(n.attract||(n.attract={particles:[]}),n.attract.clicking=!1)},f.duration*1e3)}}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.attract;n&&(t.retina.attractModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,a=t.interactivity.status===rv,u=n.interactivity.events,f=u.onHover.enable,y=u.onHover.mode,r=u.onClick.enable,S=u.onClick.mode;a&&f&&Us("attract",y)?this._hoverAttract():r&&Us("attract",S)&&this._clickAttract()}isEnabled(t){const n=this.container,a=n.actualOptions,u=n.interactivity.mouse,f=((t==null?void 0:t.interactivity)??a.interactivity).events;if((!u.position||!f.onHover.enable)&&(!u.clickPosition||!f.onClick.enable))return!1;const y=f.onHover.mode,r=f.onClick.mode;return Us("attract",y)||Us("attract",r)}loadModeOptions(t,...n){t.attract||(t.attract=new wve);for(const a of n)t.attract.load(a==null?void 0:a.attract)}reset(){}};async function Tve(e,t=!0){await e.addInteractor("externalAttract",n=>new Sve(e,n),t)}class Eve{constructor(){this.distance=200}load(t){t&&t.distance!==void 0&&(this.distance=t.distance)}}class Cve extends ep{constructor(t){super(t),this._processBounce=(n,a,u)=>{const f=this.container.particles.quadTree.query(u,y=>this.isEnabled(y));for(const y of f)u instanceof zl?c8(LP(y),{position:n,mass:a**2*Math.PI/2,velocity:$a.origin,factor:$a.origin}):u instanceof Bd&&wye(y,zw(n,a))},this._processMouseBounce=()=>{const n=this.container,a=n.retina.pixelRatio,u=10*a,f=n.interactivity.mouse.position,y=n.retina.bounceModeDistance;!y||y<0||!f||this._processBounce(f,y,new zl(f.x,f.y,y+u))},this._singleSelectorBounce=(n,a)=>{const u=this.container,f=document.querySelectorAll(n);f.length&&f.forEach(y=>{const r=y,S=u.retina.pixelRatio,A={x:(r.offsetLeft+r.offsetWidth/2)*S,y:(r.offsetTop+r.offsetHeight/2)*S},R=r.offsetWidth/2*S,O=10*S,z=a.type==="circle"?new zl(A.x,A.y,R+O):new Bd(r.offsetLeft*S-O,r.offsetTop*S-O,r.offsetWidth*S+O*2,r.offsetHeight*S+O*2);this._processBounce(A,R,z)})}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.bounce;n&&(t.retina.bounceModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,a=n.interactivity.events,u=t.interactivity.status===rv,f=a.onHover.enable,y=a.onHover.mode,r=a.onDiv;u&&f&&Us("bounce",y)?this._processMouseBounce():JO("bounce",r,(S,A)=>this._singleSelectorBounce(S,A))}isEnabled(t){const n=this.container,a=n.actualOptions,u=n.interactivity.mouse,f=((t==null?void 0:t.interactivity)??a.interactivity).events,y=f.onDiv;return u.position&&f.onHover.enable&&Us("bounce",f.onHover.mode)||KO("bounce",y)}loadModeOptions(t,...n){t.bounce||(t.bounce=new Eve);for(const a of n)t.bounce.load(a==null?void 0:a.bounce)}reset(){}}async function Ave(e,t=!0){await e.addInteractor("externalBounce",n=>new Cve(n),t)}class R8{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(t){if(t){if(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.mix!==void 0&&(this.mix=t.mix),t.opacity!==void 0&&(this.opacity=t.opacity),t.color!==void 0){const n=xu(this.color)?void 0:this.color;this.color=Ha(t.color,a=>ll.create(n,a))}t.size!==void 0&&(this.size=t.size)}}}class Mve extends R8{constructor(){super(),this.selectors=[]}get ids(){return Ha(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Ha(t,n=>`#${n}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class Rve extends R8{load(t){super.load(t),t&&(this.divs=Ha(t.divs,n=>{const a=new Mve;return a.load(n),a}))}}function e4(e,t,n,a){if(t>=n){const u=e+(t-n)*a;return zd(u,e,t)}else if(t<n){const u=e-(n-t)*a;return zd(u,t,e)}}class Ive extends ep{constructor(t){super(t),this._clickBubble=()=>{var A;const n=this.container,a=n.actualOptions,u=n.interactivity.mouse.clickPosition,f=a.interactivity.modes.bubble;if(!f||!u)return;n.bubble||(n.bubble={});const y=n.retina.bubbleModeDistance;if(!y||y<0)return;const r=n.particles.quadTree.queryCircle(u,y,R=>this.isEnabled(R)),{bubble:S}=n;for(const R of r){if(!S.clicking)continue;R.bubble.inRange=!S.durationEnd;const O=R.getPosition(),z=vu(O,u),N=(new Date().getTime()-(n.interactivity.mouse.clickTime||0))/1e3;N>f.duration&&(S.durationEnd=!0),N>f.duration*2&&(S.clicking=!1,S.durationEnd=!1);const U={bubbleObj:{optValue:n.retina.bubbleModeSize,value:R.bubble.radius},particlesObj:{optValue:zg(R.options.size.value)*n.retina.pixelRatio,value:R.size.value},type:"size"};this._process(R,z,N,U);const H={bubbleObj:{optValue:f.opacity,value:R.bubble.opacity},particlesObj:{optValue:zg(R.options.opacity.value),value:((A=R.opacity)==null?void 0:A.value)??1},type:"opacity"};this._process(R,z,N,H),!S.durationEnd&&z<=y?this._hoverBubbleColor(R,z):delete R.bubble.color}},this._hoverBubble=()=>{const n=this.container,a=n.interactivity.mouse.position,u=n.retina.bubbleModeDistance;if(!u||u<0||a===void 0)return;const f=n.particles.quadTree.queryCircle(a,u,y=>this.isEnabled(y));for(const y of f){y.bubble.inRange=!0;const r=y.getPosition(),S=vu(r,a),A=1-S/u;S<=u?A>=0&&n.interactivity.status===rv&&(this._hoverBubbleSize(y,A),this._hoverBubbleOpacity(y,A),this._hoverBubbleColor(y,A)):this.reset(y),n.interactivity.status===DP&&this.reset(y)}},this._hoverBubbleColor=(n,a,u)=>{const f=this.container.actualOptions,y=u??f.interactivity.modes.bubble;if(y){if(!n.bubble.finalColor){const r=y.color;if(!r)return;const S=bm(r);n.bubble.finalColor=ow(S)}if(n.bubble.finalColor)if(y.mix){n.bubble.color=void 0;const r=n.getFillColor();n.bubble.color=r?m8(QO(r,n.bubble.finalColor,1-a,a)):n.bubble.finalColor}else n.bubble.color=n.bubble.finalColor}},this._hoverBubbleOpacity=(n,a,u)=>{var O,z;const f=this.container,y=f.actualOptions,r=(u==null?void 0:u.opacity)??((O=y.interactivity.modes.bubble)==null?void 0:O.opacity);if(!r)return;const S=n.options.opacity.value,A=((z=n.opacity)==null?void 0:z.value)??1,R=e4(A,r,zg(S),a);R!==void 0&&(n.bubble.opacity=R)},this._hoverBubbleSize=(n,a,u)=>{const f=this.container,y=u!=null&&u.size?u.size*f.retina.pixelRatio:f.retina.bubbleModeSize;if(y===void 0)return;const r=zg(n.options.size.value)*f.retina.pixelRatio,S=n.size.value,A=e4(S,y,r,a);A!==void 0&&(n.bubble.radius=A)},this._process=(n,a,u,f)=>{const y=this.container,r=f.bubbleObj.optValue,S=y.actualOptions,A=S.interactivity.modes.bubble;if(!A||r===void 0)return;const R=A.duration,O=y.retina.bubbleModeDistance,z=f.particlesObj.optValue,N=f.bubbleObj.value,U=f.particlesObj.value||0,H=f.type;if(!(!O||O<0||r===z))if(y.bubble||(y.bubble={}),y.bubble.durationEnd)N&&(H==="size"&&delete n.bubble.radius,H==="opacity"&&delete n.bubble.opacity);else if(a<=O){if((N??U)!==r){const W=U-u*(U-r)/R;H==="size"&&(n.bubble.radius=W),H==="opacity"&&(n.bubble.opacity=W)}}else H==="size"&&delete n.bubble.radius,H==="opacity"&&delete n.bubble.opacity},this._singleSelectorHover=(n,a,u)=>{const f=this.container,y=document.querySelectorAll(a),r=f.actualOptions.interactivity.modes.bubble;!r||!y.length||y.forEach(S=>{const A=S,R=f.retina.pixelRatio,O={x:(A.offsetLeft+A.offsetWidth/2)*R,y:(A.offsetTop+A.offsetHeight/2)*R},z=A.offsetWidth/2*R,N=u.type==="circle"?new zl(O.x,O.y,z):new Bd(A.offsetLeft*R,A.offsetTop*R,A.offsetWidth*R,A.offsetHeight*R),U=f.particles.quadTree.query(N,H=>this.isEnabled(H));for(const H of U){if(!N.contains(H.getPosition()))continue;H.bubble.inRange=!0;const K=r.divs,W=l8(K,A);(!H.bubble.div||H.bubble.div!==A)&&(this.clear(H,n,!0),H.bubble.div=A),this._hoverBubbleSize(H,1,W),this._hoverBubbleOpacity(H,1,W),this._hoverBubbleColor(H,1,W)}})},t.bubble||(t.bubble={}),this.handleClickMode=n=>{n==="bubble"&&(t.bubble||(t.bubble={}),t.bubble.clicking=!0)}}clear(t,n,a){t.bubble.inRange&&!a||(delete t.bubble.div,delete t.bubble.opacity,delete t.bubble.radius,delete t.bubble.color)}init(){const t=this.container,n=t.actualOptions.interactivity.modes.bubble;n&&(t.retina.bubbleModeDistance=n.distance*t.retina.pixelRatio,n.size!==void 0&&(t.retina.bubbleModeSize=n.size*t.retina.pixelRatio))}async interact(t){const n=this.container.actualOptions,a=n.interactivity.events,u=a.onHover,f=a.onClick,y=u.enable,r=u.mode,S=f.enable,A=f.mode,R=a.onDiv;y&&Us("bubble",r)?this._hoverBubble():S&&Us("bubble",A)?this._clickBubble():JO("bubble",R,(O,z)=>this._singleSelectorHover(t,O,z))}isEnabled(t){const n=this.container,a=n.actualOptions,u=n.interactivity.mouse,f=((t==null?void 0:t.interactivity)??a.interactivity).events,{onClick:y,onDiv:r,onHover:S}=f,A=KO("bubble",r);return A||S.enable&&u.position||y.enable&&u.clickPosition?Us("bubble",S.mode)||Us("bubble",y.mode)||A:!1}loadModeOptions(t,...n){t.bubble||(t.bubble=new Rve);for(const a of n)t.bubble.load(a==null?void 0:a.bubble)}reset(t){t.bubble.inRange=!1}}async function Pve(e,t=!0){await e.addInteractor("externalBubble",n=>new Ive(n),t)}class Dve{constructor(){this.opacity=.5}load(t){t&&t.opacity!==void 0&&(this.opacity=t.opacity)}}class Ove{constructor(){this.distance=80,this.links=new Dve,this.radius=60}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked),t.radius!==void 0&&(this.radius=t.radius))}}function Lve(e,t,n,a){const u=Math.floor(n.getRadius()/t.getRadius()),f=t.getFillColor(),y=n.getFillColor();if(!f||!y)return;const r=t.getPosition(),S=n.getPosition(),A=QO(f,y,t.getRadius(),n.getRadius()),R=e.createLinearGradient(r.x,r.y,S.x,S.y);return R.addColorStop(0,sw(f,a)),R.addColorStop(u>1?1:u,wm(A,a)),R.addColorStop(1,sw(y,a)),R}function kve(e,t,n,a,u){P1(e,a,u),e.lineWidth=t,e.strokeStyle=n,e.stroke()}function zve(e,t,n,a){const u=e.actualOptions,f=u.interactivity.modes.connect;if(f)return Lve(t,n,a,f.links.opacity)}function Bve(e,t,n){e.canvas.draw(a=>{const u=zve(e,a,t,n);if(!u)return;const f=t.getPosition(),y=n.getPosition();kve(a,t.retina.linksWidth??0,u,f,y)})}class Fve extends ep{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.connect;n&&(t.retina.connectModeDistance=n.distance*t.retina.pixelRatio,t.retina.connectModeRadius=n.radius*t.retina.pixelRatio)}async interact(){const t=this.container;if(t.actualOptions.interactivity.events.onHover.enable&&t.interactivity.status==="pointermove"){const a=t.interactivity.mouse.position;if(!t.retina.connectModeDistance||t.retina.connectModeDistance<0||!t.retina.connectModeRadius||t.retina.connectModeRadius<0||!a)return;const u=Math.abs(t.retina.connectModeRadius),f=t.particles.quadTree.queryCircle(a,u,r=>this.isEnabled(r));let y=0;for(const r of f){const S=r.getPosition();for(const A of f.slice(y+1)){const R=A.getPosition(),O=Math.abs(t.retina.connectModeDistance),z=Math.abs(S.x-R.x),N=Math.abs(S.y-R.y);z<O&&N<O&&Bve(t,r,A)}++y}}}isEnabled(t){const n=this.container,a=n.interactivity.mouse,u=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return u.onHover.enable&&a.position?Us("connect",u.onHover.mode):!1}loadModeOptions(t,...n){t.connect||(t.connect=new Ove);for(const a of n)t.connect.load(a==null?void 0:a.connect)}reset(){}}async function Nve(e,t=!0){await e.addInteractor("externalConnect",n=>new Fve(n),t)}class jve{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(t){t&&(t.blink!==void 0&&(this.blink=t.blink),t.color!==void 0&&(this.color=ll.create(this.color,t.color)),t.consent!==void 0&&(this.consent=t.consent),t.opacity!==void 0&&(this.opacity=t.opacity))}}class Uve{constructor(){this.distance=100,this.links=new jve}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked))}}function Vve(e,t,n,a,u,f){P1(e,n,a),e.strokeStyle=wm(u,f),e.lineWidth=t,e.stroke()}function $ve(e,t,n,a,u){e.canvas.draw(f=>{const y=t.getPosition();Vve(f,t.retina.linksWidth??0,y,u,n,a)})}class Hve extends ep{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.grab;n&&(t.retina.grabModeDistance=n.distance*t.retina.pixelRatio)}async interact(){var r;const t=this.container,n=t.actualOptions,a=n.interactivity;if(!a.modes.grab||!a.events.onHover.enable||t.interactivity.status!==rv)return;const u=t.interactivity.mouse.position;if(!u)return;const f=t.retina.grabModeDistance;if(!f||f<0)return;const y=t.particles.quadTree.queryCircle(u,f,S=>this.isEnabled(S));for(const S of y){const A=S.getPosition(),R=vu(A,u);if(R>f)continue;const O=a.modes.grab.links,z=O.opacity,N=z-R*z/f;if(N<=0)continue;const U=O.color??((r=S.options.links)==null?void 0:r.color);if(!t.particles.grabLineColor&&U){const K=a.modes.grab.links;t.particles.grabLineColor=y8(U,K.blink,K.consent)}const H=kP(S,void 0,t.particles.grabLineColor);H&&$ve(t,S,H,N,u)}}isEnabled(t){const n=this.container,a=n.interactivity.mouse,u=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return u.onHover.enable&&!!a.position&&Us("grab",u.onHover.mode)}loadModeOptions(t,...n){t.grab||(t.grab=new Uve);for(const a of n)t.grab.load(a==null?void 0:a.grab)}reset(){}}async function Gve(e,t=!0){await e.addInteractor("externalGrab",n=>new Hve(n),t)}class qve extends ep{constructor(t){super(t),this.handleClickMode=n=>{if(n!=="pause")return;const a=this.container;a.getAnimationStatus()?a.pause():a.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function Wve(e,t=!0){await e.addInteractor("externalPause",n=>new qve(n),t)}class Xve{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=Kr(t)}load(t){if(!t)return;t.default!==void 0&&(this.default=t.default),t.groups!==void 0&&(this.groups=t.groups.map(a=>a)),this.groups.length||(this.default=!0);const n=t.quantity??t.particles_nb;n!==void 0&&(this.quantity=Kr(n))}}class Zve extends ep{constructor(t){super(t),this.handleClickMode=n=>{if(n!=="push")return;const a=this.container,u=a.actualOptions,f=u.interactivity.modes.push;if(!f)return;const y=rr(f.quantity);if(y<=0)return;const r=rA([void 0,...f.groups]),S=r!==void 0?a.actualOptions.particles.groups[r]:void 0;a.particles.push(y,a.interactivity.mouse,S,r)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...n){t.push||(t.push=new Xve);for(const a of n)t.push.load(a==null?void 0:a.push)}reset(){}}async function Yve(e,t=!0){await e.addInteractor("externalPush",n=>new Zve(n),t)}class Kve{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=Kr(t)}load(t){if(!t)return;const n=t.quantity??t.particles_nb;n!==void 0&&(this.quantity=Kr(n))}}class Jve extends ep{constructor(t){super(t),this.handleClickMode=n=>{const a=this.container,u=a.actualOptions;if(!u.interactivity.modes.remove||n!=="remove")return;const f=rr(u.interactivity.modes.remove.quantity);a.particles.removeQuantity(f)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...n){t.remove||(t.remove=new Kve);for(const a of n)t.remove.load(a==null?void 0:a.remove)}reset(){}}async function Qve(e,t=!0){await e.addInteractor("externalRemove",n=>new Jve(n),t)}class I8{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.speed!==void 0&&(this.speed=t.speed),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed))}}class e0e extends I8{constructor(){super(),this.selectors=[]}get ids(){return Ha(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Ha(t,n=>`#${n}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class t0e extends I8{load(t){super.load(t),t&&(this.divs=Ha(t.divs,n=>{const a=new e0e;return a.load(n),a}))}}class n0e extends ep{constructor(t,n){super(n),this._clickRepulse=()=>{const a=this.container,u=a.actualOptions.interactivity.modes.repulse;if(!u)return;const f=a.repulse||{particles:[]};if(f.finish||(f.count||(f.count=0),f.count++,f.count===a.particles.count&&(f.finish=!0)),f.clicking){const y=a.retina.repulseModeDistance;if(!y||y<0)return;const r=Math.pow(y/6,3),S=a.interactivity.mouse.clickPosition;if(S===void 0)return;const A=new zl(S.x,S.y,r),R=a.particles.quadTree.query(A,O=>this.isEnabled(O));for(const O of R){const{dx:z,dy:N,distance:U}=lc(S,O.position),H=U**2,K=u.speed,W=-r*K/H;if(H<=r){f.particles.push(O);const re=$a.create(z,N);re.length=W,O.velocity.setTo(re)}}}else if(f.clicking===!1){for(const y of f.particles)y.velocity.setTo(y.initialVelocity);f.particles=[]}},this._hoverRepulse=()=>{const a=this.container,u=a.interactivity.mouse.position,f=a.retina.repulseModeDistance;!f||f<0||!u||this._processRepulse(u,f,new zl(u.x,u.y,f))},this._processRepulse=(a,u,f,y)=>{const r=this.container,S=r.particles.quadTree.query(f,R=>this.isEnabled(R)),A=r.actualOptions.interactivity.modes.repulse;if(A)for(const R of S){const{dx:O,dy:z,distance:N}=lc(R.position,a),U=((y==null?void 0:y.speed)??A.speed)*A.factor,H=zd(o8(A.easing)(1-N/u)*U,0,A.maxSpeed),K=$a.create(N===0?U:O/N*H,N===0?U:z/N*H);R.position.addTo(K)}},this._singleSelectorRepulse=(a,u)=>{const f=this.container,y=f.actualOptions.interactivity.modes.repulse;if(!y)return;const r=document.querySelectorAll(a);r.length&&r.forEach(S=>{const A=S,R=f.retina.pixelRatio,O={x:(A.offsetLeft+A.offsetWidth/2)*R,y:(A.offsetTop+A.offsetHeight/2)*R},z=A.offsetWidth/2*R,N=u.type==="circle"?new zl(O.x,O.y,z):new Bd(A.offsetLeft*R,A.offsetTop*R,A.offsetWidth*R,A.offsetHeight*R),U=y.divs,H=l8(U,A);this._processRepulse(O,z,N,H)})},this._engine=t,n.repulse||(n.repulse={particles:[]}),this.handleClickMode=a=>{const u=this.container.actualOptions,f=u.interactivity.modes.repulse;if(!f||a!=="repulse")return;n.repulse||(n.repulse={particles:[]});const y=n.repulse;y.clicking=!0,y.count=0;for(const r of n.repulse.particles)this.isEnabled(r)&&r.velocity.setTo(r.initialVelocity);y.particles=[],y.finish=!1,setTimeout(()=>{n.destroyed||(y.clicking=!1)},f.duration*1e3)}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.repulse;n&&(t.retina.repulseModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,a=t.interactivity.status===rv,u=n.interactivity.events,f=u.onHover,y=f.enable,r=f.mode,S=u.onClick,A=S.enable,R=S.mode,O=u.onDiv;a&&y&&Us("repulse",r)?this._hoverRepulse():A&&Us("repulse",R)?this._clickRepulse():JO("repulse",O,(z,N)=>this._singleSelectorRepulse(z,N))}isEnabled(t){const n=this.container,a=n.actualOptions,u=n.interactivity.mouse,f=((t==null?void 0:t.interactivity)??a.interactivity).events,y=f.onDiv,r=f.onHover,S=f.onClick,A=KO("repulse",y);if(!(A||r.enable&&u.position||S.enable&&u.clickPosition))return!1;const R=r.mode,O=S.mode;return Us("repulse",R)||Us("repulse",O)||A}loadModeOptions(t,...n){t.repulse||(t.repulse=new t0e);for(const a of n)t.repulse.load(a==null?void 0:a.repulse)}reset(){}}async function i0e(e,t=!0){await e.addInteractor("externalRepulse",n=>new n0e(e,n),t)}class r0e{constructor(){this.factor=3,this.radius=200}load(t){t&&(t.factor!==void 0&&(this.factor=t.factor),t.radius!==void 0&&(this.radius=t.radius))}}class o0e extends ep{constructor(t){super(t)}clear(t,n,a){t.slow.inRange&&!a||(t.slow.factor=1)}init(){const t=this.container,n=t.actualOptions.interactivity.modes.slow;n&&(t.retina.slowModeRadius=n.radius*t.retina.pixelRatio)}async interact(){}isEnabled(t){const n=this.container,a=n.interactivity.mouse,u=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return u.onHover.enable&&!!a.position&&Us("slow",u.onHover.mode)}loadModeOptions(t,...n){t.slow||(t.slow=new r0e);for(const a of n)t.slow.load(a==null?void 0:a.slow)}reset(t){t.slow.inRange=!1;const n=this.container,a=n.actualOptions,u=n.interactivity.mouse.position,f=n.retina.slowModeRadius,y=a.interactivity.modes.slow;if(!y||!f||f<0||!u)return;const r=t.getPosition(),S=vu(u,r),A=S/f,R=y.factor,{slow:O}=t;S>f||(O.inRange=!0,O.factor=A/R)}}async function s0e(e,t=!0){await e.addInteractor("externalSlow",n=>new o0e(n),t)}const tI=[0,4,2,1],t4=[8,8,4,2];class a0e{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t)}getString(t){const n=this.data.slice(this.pos,this.pos+t);return this.pos+=n.length,n.reduce((a,u)=>a+String.fromCharCode(u),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let t="",n=0;do{n=this.data[this.pos++];for(let a=n;--a>=0;t+=String.fromCharCode(this.data[this.pos++]));}while(n!==0);return t}readSubBlocksBin(){let t=0,n=0;for(let u=0;(t=this.data[this.pos+u])!==0;u+=t+1)n+=t;const a=new Uint8Array(n);for(let u=0;(t=this.data[this.pos++])!==0;)for(let f=t;--f>=0;a[u++]=this.data[this.pos++]);return a}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function P8(e,t){const n=[];for(let a=0;a<t;a++)n.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return n}async function l0e(e,t,n,a){switch(e.nextByte()){case 249:{const u=t.frames[n(!1)];e.pos++;const f=e.nextByte();u.GCreserved=(f&224)>>>5,u.disposalMethod=(f&28)>>>2,u.userInputDelayFlag=(f&2)===2;const y=(f&1)===1;u.delayTime=e.nextTwoBytes()*10;const r=e.nextByte();y&&a(r),e.pos++;break}case 255:{e.pos++;const u={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(u);break}case 254:{t.comments.push([n(!1),e.readSubBlocks()]);break}case 1:{if(t.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[n(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break}default:e.skipSubBlocks();break}}async function c0e(e,t,n,a,u,f){const y=t.frames[a(!0)];y.left=e.nextTwoBytes(),y.top=e.nextTwoBytes(),y.width=e.nextTwoBytes(),y.height=e.nextTwoBytes();const r=e.nextByte(),S=(r&128)===128,A=(r&64)===64;y.sortFlag=(r&32)===32,y.reserved=(r&24)>>>3;const R=1<<(r&7)+1;S&&(y.localColorTable=P8(e,R));const O=W=>{const{r:re,g:ne,b:se}=(S?y.localColorTable:t.globalColorTable)[W];return{r:re,g:ne,b:se,a:W===u(null)?n?~~((re+ne+se)/3):0:255}},z=(()=>{try{return new ImageData(y.width,y.height,{colorSpace:"srgb"})}catch(W){if(W instanceof DOMException&&W.name==="IndexSizeError")return null;throw W}})();if(z==null)throw new EvalError("GIF frame size is to large");const N=e.nextByte(),U=e.readSubBlocksBin(),H=1<<N,K=(W,re)=>{const ne=W>>>3,se=W&7;return(U[ne]+(U[ne+1]<<8)+(U[ne+2]<<16)&(1<<re)-1<<se)>>>se};if(A){for(let W=0,re=N+1,ne=0,se=[[0]],ue=0;ue<4;ue++)if(tI[ue]<y.height)for(let pe=0,Ce=0;;){const Le=W;if(W=K(ne,re),ne+=re+1,W===H){re=N+1,se.length=H+2;for(let qe=0;qe<se.length;qe++)se[qe]=qe<H?[qe]:[]}else{W>=se.length?se.push(se[Le].concat(se[Le][0])):Le!==H&&se.push(se[Le].concat(se[W][0]));for(let qe=0;qe<se[W].length;qe++){const{r:ye,g:Xe,b:ut,a:et}=O(se[W][qe]);z.data.set([ye,Xe,ut,et],tI[ue]*y.width+t4[ue]*Ce+pe%(y.width*4)),pe+=4}se.length===1<<re&&re<12&&re++}if(pe===y.width*4*(Ce+1)&&(Ce++,tI[ue]+t4[ue]*Ce>=y.height))break}y.image=z,y.bitmap=await createImageBitmap(z)}else{for(let W=0,re=N+1,ne=0,se=[[0]],ue=-4;;){const pe=W;if(W=K(ne,re),ne+=re,W===H){re=N+1,se.length=H+2;for(let Ce=0;Ce<se.length;Ce++)se[Ce]=Ce<H?[Ce]:[]}else{if(W===H+1)break;W>=se.length?se.push(se[pe].concat(se[pe][0])):pe!==H&&se.push(se[pe].concat(se[W][0]));for(let Ce=0;Ce<se[W].length;Ce++){const{r:Le,g:qe,b:ye,a:Xe}=O(se[W][Ce]);z.data.set([Le,qe,ye,Xe],ue+=4)}se.length>=1<<re&&re<12&&re++}}y.image=z,y.bitmap=await createImageBitmap(z)}}async function u0e(e,t,n,a,u,f){switch(e.nextByte()){case 59:return!0;case 44:await c0e(e,t,n,a,u);break;case 33:await l0e(e,t,a,u);break;default:throw new EvalError("undefined block found")}return!1}function h0e(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}async function d0e(e,t,n){n||(n=!1);const a=await fetch(e);if(!a.ok&&a.status===404)throw new EvalError("file not found");const u=await a.arrayBuffer(),f={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},y=new a0e(new Uint8ClampedArray(u));if(y.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");f.width=y.nextTwoBytes(),f.height=y.nextTwoBytes();const r=y.nextByte(),S=(r&128)===128;f.colorRes=(r&112)>>>4,f.sortFlag=(r&8)===8;const A=1<<(r&7)+1,R=y.nextByte();f.pixelAspectRatio=y.nextByte(),f.pixelAspectRatio!==0&&(f.pixelAspectRatio=(f.pixelAspectRatio+15)/64),S&&(f.globalColorTable=P8(y,A));const O=(()=>{try{return new ImageData(f.width,f.height,{colorSpace:"srgb"})}catch(se){if(se instanceof DOMException&&se.name==="IndexSizeError")return null;throw se}})();if(O==null)throw new Error("GIF frame size is to large");const{r:z,g:N,b:U}=f.globalColorTable[R];O.data.set(S?[z,N,U,255]:[0,0,0,0]);for(let se=4;se<O.data.length;se*=2)O.data.copyWithin(se,0,se);f.backgroundImage=O;let H=-1,K=!0,W=-1;const re=se=>(se&&(K=!0),H),ne=se=>(se!=null&&(W=se),W);try{do K&&(f.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),H++,W=-1,K=!1);while(!await u0e(y,f,n,re,ne,t));f.frames.length--;for(const se of f.frames){if(se.userInputDelayFlag&&se.delayTime===0){f.totalTime=1/0;break}f.totalTime+=se.delayTime}return f}catch(se){throw se instanceof EvalError?new Error(`error while parsing frame ${H} "${se.message}"`):se}}const f0e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function p0e(e,t,n){const{svgData:a}=e;if(!a)return"";const u=sw(t,n);if(a.includes("fill"))return a.replace(f0e,()=>u);const f=a.indexOf(">");return`${a.substring(0,f)} fill="${u}"${a.substring(f)}`}async function sA(e){return new Promise(t=>{e.loading=!0;const n=new Image;e.element=n,n.addEventListener("load",()=>{e.loading=!1,t()}),n.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,sv().error(`${Eh} loading image: ${e.source}`),t()}),n.src=e.source})}async function m0e(e){if(e.type!=="gif"){await sA(e);return}e.loading=!0;try{e.gifData=await d0e(e.source),e.gifLoopCount=h0e(e.gifData)??0,e.gifLoopCount===0&&(e.gifLoopCount=1/0)}catch{e.error=!0}e.loading=!1}async function g0e(e){if(e.type!=="svg"){await sA(e);return}e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(sv().error(`${Eh} Image not found`),e.error=!0),e.loading=!1}function y0e(e,t,n,a){var y;const u=p0e(e,n,((y=a.opacity)==null?void 0:y.value)??1),f={color:n,gif:t.gif,data:{...e,svgData:u},loaded:!1,ratio:t.width/t.height,replaceColor:t.replaceColor??t.replace_color,source:t.src};return new Promise(r=>{const S=new Blob([u],{type:"image/svg+xml"}),A=URL||window.URL||window.webkitURL||window,R=A.createObjectURL(S),O=new Image;O.addEventListener("load",()=>{f.loaded=!0,f.element=O,r(f),A.revokeObjectURL(R)}),O.addEventListener("error",async()=>{A.revokeObjectURL(R);const z={...e,error:!1,loading:!0};await sA(z),f.loaded=!0,f.element=z.element,r(f)}),O.src=R})}class _0e{constructor(t){this.loadImageShape=async n=>{if(!this._engine.loadImage)throw new Error(`${Eh} image shape not initialized`);await this._engine.loadImage({gif:n.gif,name:n.name,replaceColor:n.replaceColor??n.replace_color??!1,src:n.src})},this._engine=t}addImage(t){this._engine.images||(this._engine.images=[]),this._engine.images.push(t)}draw(t,n,a,u,f){const y=n.image,r=y==null?void 0:y.element;if(y){if(t.globalAlpha=u,y.gif&&y.gifData){const S=new OffscreenCanvas(y.gifData.width,y.gifData.height),A=S.getContext("2d");if(!A)throw new Error("could not create offscreen canvas context");A.imageSmoothingQuality="low",A.imageSmoothingEnabled=!1,A.clearRect(0,0,S.width,S.height),n.gifLoopCount===void 0&&(n.gifLoopCount=y.gifLoopCount??0);let R=n.gifFrame??0;const O={x:-y.gifData.width*.5,y:-y.gifData.height*.5},z=y.gifData.frames[R];if(n.gifTime===void 0&&(n.gifTime=0),!z.bitmap)return;switch(t.scale(a/y.gifData.width,a/y.gifData.height),z.disposalMethod){case 4:case 5:case 6:case 7:case 0:A.drawImage(z.bitmap,z.left,z.top),t.drawImage(S,O.x,O.y),A.clearRect(0,0,S.width,S.height);break;case 1:A.drawImage(z.bitmap,z.left,z.top),t.drawImage(S,O.x,O.y);break;case 2:A.drawImage(z.bitmap,z.left,z.top),t.drawImage(S,O.x,O.y),A.clearRect(0,0,S.width,S.height),y.gifData.globalColorTable.length===0?A.putImageData(y.gifData.frames[0].image,O.x+z.left,O.y+z.top):A.putImageData(y.gifData.backgroundImage,O.x,O.y);break;case 3:{const N=A.getImageData(0,0,S.width,S.height);A.drawImage(z.bitmap,z.left,z.top),t.drawImage(S,O.x,O.y),A.clearRect(0,0,S.width,S.height),A.putImageData(N,0,0)}break}if(n.gifTime+=f.value,n.gifTime>z.delayTime){if(n.gifTime-=z.delayTime,++R>=y.gifData.frames.length){if(--n.gifLoopCount<=0)return;R=0,A.clearRect(0,0,S.width,S.height)}n.gifFrame=R}t.scale(y.gifData.width/a,y.gifData.height/a)}else if(r){const S=y.ratio,A={x:-a,y:-a};t.drawImage(r,A.x,A.y,a*2,a*2/S)}t.globalAlpha=1}}getSidesCount(){return 12}async init(t){const n=t.actualOptions;if(!(!n.preload||!this._engine.loadImage))for(const a of n.preload)await this._engine.loadImage(a)}loadShape(t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const n=t.shapeData;this._engine.images.find(u=>u.name===n.name||u.source===n.src)||this.loadImageShape(n).then(()=>{this.loadShape(t)})}particleInit(t,n){if(n.shape!=="image"&&n.shape!=="images")return;this._engine.images||(this._engine.images=[]);const a=this._engine.images,u=n.shapeData,f=n.getFillColor(),y=a.find(S=>S.name===u.name||S.source===u.src);if(!y)return;const r=u.replaceColor??u.replace_color??y.replaceColor;if(y.loading){setTimeout(()=>{this.particleInit(t,n)});return}(async()=>{let S;y.svgData&&f?S=await y0e(y,u,f,n):S={color:f,data:y,element:y.element,gif:y.gif,gifData:y.gifData,gifLoopCount:y.gifLoopCount,loaded:!0,ratio:u.width&&u.height?u.width/u.height:y.ratio??1,replaceColor:r,source:u.src},S.ratio||(S.ratio=1);const A=u.fill??n.fill,R=u.close??n.close,O={image:S,fill:A,close:R};n.image=O.image,n.fill=O.fill,n.close=O.close})()}}class v0e{constructor(){this.src="",this.gif=!1}load(t){t&&(t.gif!==void 0&&(this.gif=t.gif),t.height!==void 0&&(this.height=t.height),t.name!==void 0&&(this.name=t.name),t.replaceColor!==void 0&&(this.replaceColor=t.replaceColor),t.src!==void 0&&(this.src=t.src),t.width!==void 0&&(this.width=t.width))}}class x0e{constructor(t){this.id="imagePreloader",this._engine=t}getPlugin(){return{}}loadOptions(t,n){if(!n||!n.preload)return;t.preload||(t.preload=[]);const a=t.preload;for(const u of n.preload){const f=a.find(y=>y.name===u.name||y.src===u.src);if(f)f.load(u);else{const y=new v0e;y.load(u),a.push(y)}}}needsPlugin(){return!0}}function b0e(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error(`${Eh} no image source provided`);if(e.images||(e.images=[]),!e.images.find(n=>n.name===t.name||n.source===t.src))try{const n={gif:t.gif??!1,name:t.name??t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};e.images.push(n),await(t.gif?m0e:t.replaceColor?g0e:sA)(n)}catch{throw new Error(`${Eh} ${t.name??t.src} not found`)}})}async function w0e(e,t=!0){b0e(e);const n=new x0e(e);await e.addPlugin(n,t),await e.addShape(["image","images"],new _0e(e),t)}class S0e extends oy{constructor(){super(),this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class T0e extends oy{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class E0e{constructor(){this.count=0,this.delay=new S0e,this.duration=new T0e}load(t){t&&(t.count!==void 0&&(this.count=t.count),this.delay.load(t.delay),this.duration.load(t.duration))}}class C0e{constructor(t){this.container=t}init(t){const n=this.container,a=t.options,u=a.life;u&&(t.life={delay:n.retina.reduceFactor?rr(u.delay.value)*(u.delay.sync?1:ss())/n.retina.reduceFactor*1e3:0,delayTime:0,duration:n.retina.reduceFactor?rr(u.duration.value)*(u.duration.sync?1:ss())/n.retina.reduceFactor*1e3:0,time:0,count:u.count},t.life.duration<=0&&(t.life.duration=-1),t.life.count<=0&&(t.life.count=-1),t.life&&(t.spawning=t.life.delay>0))}isEnabled(t){return!t.destroyed}loadOptions(t,...n){t.life||(t.life=new E0e);for(const a of n)t.life.load(a==null?void 0:a.life)}update(t,n){if(!this.isEnabled(t)||!t.life)return;const a=t.life;let u=!1;if(t.spawning)if(a.delayTime+=n.value,a.delayTime>=t.life.delay)u=!0,t.spawning=!1,a.delayTime=0,a.time=0;else return;if(a.duration===-1||t.spawning||(u?a.time=0:a.time+=n.value,a.time<a.duration))return;if(a.time=0,t.life.count>0&&t.life.count--,t.life.count===0){t.destroy();return}const f=this.container.canvas.size,y=Kr(0,f.width),r=Kr(0,f.width);t.position.x=Mc(y),t.position.y=Mc(r),t.spawning=!0,a.delayTime=0,a.time=0,t.reset();const S=t.options.life;S&&(a.delay=rr(S.delay.value)*1e3,a.duration=rr(S.duration.value)*1e3)}}async function A0e(e,t=!0){await e.addParticleUpdater("life",n=>new C0e(n),t)}class M0e{draw(t,n,a){const u=n.shapeData;t.moveTo(-a/2,0),t.lineTo(a/2,0),t.lineCap=(u==null?void 0:u.cap)??"butt"}getSidesCount(){return 1}}async function R0e(e,t=!0){await e.addShape("line",new M0e,t)}class I0e{init(){}isEnabled(t){return!ux()&&!t.destroyed&&t.container.actualOptions.interactivity.events.onHover.parallax.enable}move(t){const n=t.container,a=n.actualOptions,u=a.interactivity.events.onHover.parallax;if(ux()||!u.enable)return;const f=u.force,y=n.interactivity.mouse.position;if(!y)return;const r=n.canvas.size,S={x:r.width/2,y:r.height/2},A=u.smooth,R=t.getRadius()/f,O={x:(y.x-S.x)*R,y:(y.y-S.y)*R},{offset:z}=t;z.x+=(O.x-z.x)/A,z.y+=(O.y-z.y)/A}}async function P0e(e,t=!0){await e.addMover("parallax",()=>new I0e,t)}class D0e extends eL{constructor(t){super(t)}clear(){}init(){}async interact(t){const n=this.container,a=t.retina.attractDistance??n.retina.attractDistance,u=t.getPosition(),f=n.particles.quadTree.queryCircle(u,a);for(const y of f){if(t===y||!y.options.move.attract.enable||y.destroyed||y.spawning)continue;const r=y.getPosition(),{dx:S,dy:A}=lc(u,r),R=t.options.move.attract.rotate,O=S/(R.x*1e3),z=A/(R.y*1e3),N=y.size.value/t.size.value,U=1/N;t.velocity.x-=O*N,t.velocity.y-=z*N,y.velocity.x+=O*U,y.velocity.y+=z*U}}isEnabled(t){return t.options.move.attract.enable}reset(){}}async function O0e(e,t=!0){await e.addInteractor("particlesAttract",n=>new D0e(n),t)}function n4(e,t,n,a,u,f){const y=zd(e.options.collisions.absorb.speed*u.factor/10,0,a);e.size.value+=y/2,n.size.value-=y,a<=f&&(n.size.value=0,n.destroy())}function L0e(e,t,n,a){const u=e.getRadius(),f=t.getRadius();u===void 0&&f!==void 0?e.destroy():u!==void 0&&f===void 0?t.destroy():u!==void 0&&f!==void 0&&(u>=f?n4(e,u,t,f,n,a):n4(t,f,e,u,n,a))}const i4=e=>{e.collisionMaxSpeed===void 0&&(e.collisionMaxSpeed=rr(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function D8(e,t){c8(LP(e),LP(t)),i4(e),i4(t)}function k0e(e,t){!e.unbreakable&&!t.unbreakable&&D8(e,t),e.getRadius()===void 0&&t.getRadius()!==void 0?e.destroy():e.getRadius()!==void 0&&t.getRadius()===void 0?t.destroy():e.getRadius()!==void 0&&t.getRadius()!==void 0&&(e.getRadius()>=t.getRadius()?t:e).destroy()}function z0e(e,t,n,a){switch(e.options.collisions.mode){case"absorb":{L0e(e,t,n,a);break}case"bounce":{D8(e,t);break}case"destroy":{k0e(e,t);break}}}class B0e extends eL{constructor(t){super(t)}clear(){}init(){}async interact(t,n){if(t.destroyed||t.spawning)return;const a=this.container,u=t.getPosition(),f=t.getRadius(),y=a.particles.quadTree.queryCircle(u,f*2);for(const r of y){if(t===r||!r.options.collisions.enable||t.options.collisions.mode!==r.options.collisions.mode||r.destroyed||r.spawning)continue;const S=r.getPosition(),A=r.getRadius();if(Math.abs(Math.round(u.z)-Math.round(S.z))>f+A)continue;const R=vu(u,S),O=f+A;R>O||z0e(t,r,n,a.retina.pixelRatio)}}isEnabled(t){return t.options.collisions.enable}reset(){}}async function F0e(e,t=!0){await e.addInteractor("particlesCollisions",n=>new B0e(n),t)}class N0e extends zl{constructor(t,n,a,u){super(t,n,a),this.canvasSize=u,this.canvasSize={...u}}contains(t){const{width:n,height:a}=this.canvasSize,{x:u,y:f}=t;return super.contains(t)||super.contains({x:u-n,y:f})||super.contains({x:u-n,y:f-a})||super.contains({x:u,y:f-a})}intersects(t){if(super.intersects(t))return!0;const n=t,a=t,u={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(a.radius!==void 0){const f=new zl(u.x,u.y,a.radius*2);return super.intersects(f)}else if(n.size!==void 0){const f=new Bd(u.x,u.y,n.size.width*2,n.size.height*2);return super.intersects(f)}return!1}}class j0e{constructor(){this.blur=5,this.color=new ll,this.color.value="#000",this.enable=!1}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=ll.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable))}}class U0e{constructor(){this.enable=!1,this.frequency=1}load(t){t&&(t.color!==void 0&&(this.color=ll.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity))}}class V0e{constructor(){this.blink=!1,this.color=new ll,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new j0e,this.triangles=new U0e,this.width=1,this.warp=!1}load(t){t&&(t.id!==void 0&&(this.id=t.id),t.blink!==void 0&&(this.blink=t.blink),this.color=ll.create(this.color,t.color),t.consent!==void 0&&(this.consent=t.consent),t.distance!==void 0&&(this.distance=t.distance),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),t.width!==void 0&&(this.width=t.width),t.warp!==void 0&&(this.warp=t.warp))}}function $0e(e,t,n,a,u){const{dx:f,dy:y,distance:r}=lc(e,t);if(!u||r<=n)return r;const S={x:Math.abs(f),y:Math.abs(y)},A={x:Math.min(S.x,a.width-S.x),y:Math.min(S.y,a.height-S.y)};return Math.sqrt(A.x**2+A.y**2)}class H0e extends eL{constructor(t){super(t),this._setColor=n=>{if(!n.options.links)return;const a=this.linkContainer,u=n.options.links;let f=u.id===void 0?a.particles.linksColor:a.particles.linksColors.get(u.id);if(f)return;const y=u.color;f=y8(y,u.blink,u.consent),u.id===void 0?a.particles.linksColor=f:a.particles.linksColors.set(u.id,f)},this.linkContainer=t}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(t){if(!t.options.links)return;t.links=[];const n=t.getPosition(),a=this.container,u=a.canvas.size;if(n.x<0||n.y<0||n.x>u.width||n.y>u.height)return;const f=t.options.links,y=f.opacity,r=t.retina.linksDistance??0,S=f.warp,A=S?new N0e(n.x,n.y,r,u):new zl(n.x,n.y,r),R=a.particles.quadTree.query(A);for(const O of R){const z=O.options.links;if(t===O||!(z!=null&&z.enable)||f.id!==z.id||O.spawning||O.destroyed||!O.links||t.links.some(K=>K.destination===O)||O.links.some(K=>K.destination===t))continue;const N=O.getPosition();if(N.x<0||N.y<0||N.x>u.width||N.y>u.height)continue;const U=$0e(n,N,r,u,S&&z.warp);if(U>r)continue;const H=(1-U/r)*y;this._setColor(t),t.links.push({destination:O,opacity:H})}}isEnabled(t){var n;return!!((n=t.options.links)!=null&&n.enable)}loadParticlesOptions(t,...n){t.links||(t.links=new V0e);for(const a of n)t.links.load((a==null?void 0:a.links)??(a==null?void 0:a.lineLinked)??(a==null?void 0:a.line_linked))}reset(){}}async function G0e(e,t=!0){await e.addInteractor("particlesLinks",n=>new H0e(n),t)}function q0e(e){let t=!1;const{begin:n,end:a,maxDistance:u,context:f,canvasSize:y,width:r,backgroundMask:S,colorLine:A,opacity:R,links:O}=e;if(vu(n,a)<=u)P1(f,n,a),t=!0;else if(O.warp){let N,U;const H={x:a.x-y.width,y:a.y},K=lc(n,H);if(K.distance<=u){const W=n.y-K.dy/K.dx*n.x;N={x:0,y:W},U={x:y.width,y:W}}else{const W={x:a.x,y:a.y-y.height},re=lc(n,W);if(re.distance<=u){const se=-(n.y-re.dy/re.dx*n.x)/(re.dy/re.dx);N={x:se,y:0},U={x:se,y:y.height}}else{const ne={x:a.x-y.width,y:a.y-y.height},se=lc(n,ne);if(se.distance<=u){const ue=n.y-se.dy/se.dx*n.x;N={x:-ue/(se.dy/se.dx),y:ue},U={x:N.x+y.width,y:N.y+y.height}}}}N&&U&&(P1(f,n,N),P1(f,a,U),t=!0)}if(!t)return;f.lineWidth=r,S.enable&&(f.globalCompositeOperation=S.composite),f.strokeStyle=wm(A,R);const{shadow:z}=O;if(z.enable){const N=Ld(z.color);N&&(f.shadowBlur=z.blur,f.shadowColor=wm(N))}f.stroke()}function W0e(e){const{context:t,pos1:n,pos2:a,pos3:u,backgroundMask:f,colorTriangle:y,opacityTriangle:r}=e;Aye(t,n,a,u),f.enable&&(t.globalCompositeOperation=f.composite),t.fillStyle=wm(y,r),t.fill()}function X0e(e){return e.sort((t,n)=>t-n),e.join("_")}function r4(e,t){const n=X0e(e.map(u=>u.id));let a=t.get(n);return a===void 0&&(a=ss(),t.set(n,a)),a}class Z0e{constructor(t){this.container=t,this._drawLinkLine=(n,a)=>{const u=n.options.links;if(!(u!=null&&u.enable))return;const f=this.container,y=f.actualOptions,r=a.destination,S=n.getPosition(),A=r.getPosition();let R=a.opacity;f.canvas.draw(O=>{var W;let z;const N=(W=n.options.twinkle)==null?void 0:W.lines;if(N!=null&&N.enable){const re=N.frequency,ne=Ld(N.color);ss()<re&&ne&&(z=ne,R=rr(N.opacity))}if(!z){const re=u.id!==void 0?f.particles.linksColors.get(u.id):f.particles.linksColor;z=kP(n,r,re)}if(!z)return;const U=n.retina.linksWidth??0,H=n.retina.linksDistance??0,{backgroundMask:K}=y;q0e({context:O,width:U,begin:S,end:A,maxDistance:H,canvasSize:f.canvas.size,links:u,backgroundMask:K,colorLine:z,opacity:R})})},this._drawLinkTriangle=(n,a,u)=>{const f=n.options.links;if(!(f!=null&&f.enable))return;const y=f.triangles;if(!y.enable)return;const r=this.container,S=r.actualOptions,A=a.destination,R=u.destination,O=y.opacity??(a.opacity+u.opacity)/2;O<=0||r.canvas.draw(z=>{const N=n.getPosition(),U=A.getPosition(),H=R.getPosition(),K=n.retina.linksDistance??0;if(vu(N,U)>K||vu(H,U)>K||vu(H,N)>K)return;let W=Ld(y.color);if(!W){const re=f.id!==void 0?r.particles.linksColors.get(f.id):r.particles.linksColor;W=kP(n,A,re)}W&&W0e({context:z,pos1:N,pos2:U,pos3:H,backgroundMask:S.backgroundMask,colorTriangle:W,opacityTriangle:O})})},this._drawTriangles=(n,a,u,f)=>{var S,A,R;const y=u.destination;if(!((S=n.links)!=null&&S.triangles.enable&&((A=y.options.links)!=null&&A.triangles.enable)))return;const r=(R=y.links)==null?void 0:R.filter(O=>{const z=this._getLinkFrequency(y,O.destination);return y.options.links&&z<=y.options.links.frequency&&f.findIndex(N=>N.destination===O.destination)>=0});if(r!=null&&r.length)for(const O of r){const z=O.destination;this._getTriangleFrequency(a,y,z)>n.links.triangles.frequency||this._drawLinkTriangle(a,u,O)}},this._getLinkFrequency=(n,a)=>r4([n,a],this._freqs.links),this._getTriangleFrequency=(n,a,u)=>r4([n,a,u],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(t,n){const{links:a,options:u}=n;if(!a||a.length<=0)return;const f=a.filter(y=>u.links&&this._getLinkFrequency(n,y.destination)<=u.links.frequency);for(const y of f)this._drawTriangles(u,n,y,f),y.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,y)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(t){if(t.links=[],!t.options.links)return;const n=this.container.retina.pixelRatio,{retina:a}=t,{distance:u,width:f}=t.options.links;a.linksDistance=u*n,a.linksWidth=f*n}particleDestroyed(t){t.links=[]}}class Y0e{constructor(){this.id="links"}getPlugin(t){return new Z0e(t)}loadOptions(){}needsPlugin(){return!0}}async function K0e(e,t=!0){const n=new Y0e;await e.addPlugin(n,t)}async function J0e(e,t=!0){await G0e(e,t),await K0e(e,t)}class O8{draw(t,n,a){const u=this.getCenter(n,a),f=this.getSidesData(n,a),y=f.count.numerator*f.count.denominator,r=f.count.numerator/f.count.denominator,S=180*(r-2)/r,A=Math.PI-Math.PI*S/180;if(t){t.beginPath(),t.translate(u.x,u.y),t.moveTo(0,0);for(let R=0;R<y;R++)t.lineTo(f.length,0),t.translate(f.length,0),t.rotate(A)}}getSidesCount(t){const n=t.shapeData;return Math.round(rr((n==null?void 0:n.sides)??(n==null?void 0:n.nb_sides)??5))}}class Q0e extends O8{getCenter(t,n){return{x:-n/(t.sides/3.5),y:-n/(2.66/3.5)}}getSidesData(t,n){const a=t.sides;return{count:{denominator:1,numerator:a},length:n*2.66/(a/3)}}}class exe extends O8{getCenter(t,n){return{x:-n,y:n/1.66}}getSidesCount(){return 3}getSidesData(t,n){return{count:{denominator:2,numerator:3},length:n*2}}}async function txe(e,t=!0){await e.addShape("polygon",new Q0e,t)}async function nxe(e,t=!0){await e.addShape("triangle",new exe,t)}async function ixe(e,t=!0){await txe(e,t),await nxe(e,t)}class rxe{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=Kr(t.speed)),t.decay!==void 0&&(this.decay=Kr(t.decay)),t.sync!==void 0&&(this.sync=t.sync))}}class oxe extends oy{constructor(){super(),this.animation=new rxe,this.direction="clockwise",this.path=!1,this.value=0}load(t){t&&(super.load(t),t.direction!==void 0&&(this.direction=t.direction),this.animation.load(t.animation),t.path!==void 0&&(this.path=t.path))}}function sxe(e,t){const n=e.rotate,a=e.options.rotate;if(!n||!a)return;const u=a.animation,f=(n.velocity??0)*t.factor,y=2*Math.PI,r=n.decay??1;if(u.enable){switch(n.status){case"increasing":n.value+=f,n.value>y&&(n.value-=y);break;case"decreasing":default:n.value-=f,n.value<0&&(n.value+=y);break}n.velocity&&r!==1&&(n.velocity*=r)}}class axe{constructor(t){this.container=t}init(t){const n=t.options.rotate;if(!n)return;t.rotate={enable:n.animation.enable,value:rr(n.value)*Math.PI/180},t.pathRotation=n.path;let a=n.direction;switch(a==="random"&&(a=Math.floor(ss()*2)>0?"counter-clockwise":"clockwise"),a){case"counter-clockwise":case"counterClockwise":t.rotate.status="decreasing";break;case"clockwise":t.rotate.status="increasing";break}const u=n.animation;u.enable&&(t.rotate.decay=1-rr(u.decay),t.rotate.velocity=rr(u.speed)/360*this.container.retina.reduceFactor,u.sync||(t.rotate.velocity*=ss())),t.rotation=t.rotate.value}isEnabled(t){const n=t.options.rotate;return n?!t.destroyed&&!t.spawning&&n.animation.enable&&!n.path:!1}loadOptions(t,...n){t.rotate||(t.rotate=new oxe);for(const a of n)t.rotate.load(a==null?void 0:a.rotate)}update(t,n){var a;this.isEnabled(t)&&(sxe(t,n),t.rotation=((a=t.rotate)==null?void 0:a.value)??0)}}async function lxe(e,t=!0){await e.addParticleUpdater("rotate",n=>new axe(n),t)}const cxe=Math.sqrt(2);class uxe{draw(t,n,a){const u=a/cxe,f=u*2;t.rect(-u,-u,f,f)}getSidesCount(){return 4}}async function hxe(e,t=!0){await e.addShape(["edge","square"],new uxe,t)}class dxe{draw(t,n,a){const u=n.sides,f=n.starInset??2;t.moveTo(0,0-a);for(let y=0;y<u;y++)t.rotate(Math.PI/u),t.lineTo(0,0-a*f),t.rotate(Math.PI/u),t.lineTo(0,0-a)}getSidesCount(t){const n=t.shapeData;return Math.round(rr((n==null?void 0:n.sides)??(n==null?void 0:n.nb_sides)??5))}particleInit(t,n){const a=n.shapeData,u=rr((a==null?void 0:a.inset)??2);n.starInset=u}}async function fxe(e,t=!0){await e.addShape("star",new dxe,t)}function nI(e,t,n,a,u){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const f=Mc(n.offset),y=(t.velocity??0)*e.factor+f*3.6,r=t.decay??1;!u||t.status==="increasing"?(t.value+=y,t.value>a&&(t.loops||(t.loops=0),t.loops++,u&&(t.status="decreasing",t.value-=t.value%a))):(t.value-=y,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&r!==1&&(t.velocity*=r),t.value>a&&(t.value%=a)}function pxe(e,t){if(!e.strokeColor||!e.strokeAnimation)return;const{h:n,s:a,l:u}=e.strokeColor,{h:f,s:y,l:r}=e.strokeAnimation;n&&nI(t,n,f,360,!1),a&&nI(t,a,y,100,!0),u&&nI(t,u,r,100,!0)}class mxe{constructor(t){this.container=t}init(t){var y;const n=this.container,a=t.options,u=bm(a.stroke,t.id,a.reduceDuplicates);t.strokeWidth=rr(u.width)*n.retina.pixelRatio,t.strokeOpacity=rr(u.opacity??1),t.strokeAnimation=(y=u.color)==null?void 0:y.animation;const f=ow(u.color)??t.getFillColor();f&&(t.strokeColor=_8(f,t.strokeAnimation,n.retina.reduceFactor))}isEnabled(t){const n=t.strokeAnimation,{strokeColor:a}=t;return!t.destroyed&&!t.spawning&&!!n&&((a==null?void 0:a.h.value)!==void 0&&a.h.enable||(a==null?void 0:a.s.value)!==void 0&&a.s.enable||(a==null?void 0:a.l.value)!==void 0&&a.l.enable)}update(t,n){this.isEnabled(t)&&pxe(t,n)}}async function gxe(e,t=!0){await e.addParticleUpdater("strokeColor",n=>new mxe(n),t)}const dE=["text","character","char"];class yxe{draw(t,n,a,u){const f=n.shapeData;if(f===void 0)return;const y=f.value;if(y===void 0)return;n.text===void 0&&(n.text=bm(y,n.randomIndexData));const r=n.text,S=f.style??"",A=f.weight??"400",R=Math.round(a)*2,O=f.font??"Verdana",z=n.fill,N=r.length*a/2;t.font=`${S} ${A} ${R}px "${O}"`;const U={x:-N,y:a/2};t.globalAlpha=u,z?t.fillText(r,U.x,U.y):t.strokeText(r,U.x,U.y),t.globalAlpha=1}getSidesCount(){return 12}async init(t){const n=t.actualOptions;if(dE.find(a=>Us(a,n.particles.shape.type))){const a=dE.map(f=>n.particles.shape.options[f]).find(f=>!!f),u=[];Ha(a,f=>{u.push(_ye(f.font,f.weight))}),await Promise.all(u)}}particleInit(t,n){if(!n.shape||!dE.includes(n.shape))return;const a=n.shapeData;if(a===void 0)return;const u=a.value;u!==void 0&&(n.text=bm(u,n.randomIndexData))}}async function _xe(e,t=!0){await e.addShape(dE,new yxe,t)}async function vxe(e,t=!0){H_e(e),await P0e(e,!1),await Tve(e,!1),await Ave(e,!1),await Pve(e,!1),await Nve(e,!1),await Gve(e,!1),await Wve(e,!1),await Yve(e,!1),await Qve(e,!1),await i0e(e,!1),await s0e(e,!1),await O0e(e,!1),await F0e(e,!1),await J0e(e,!1),await bve(),await w0e(e,!1),await R0e(e,!1),await ixe(e,!1),await hxe(e,!1),await fxe(e,!1),await _xe(e,!1),await A0e(e,!1),await lxe(e,!1),await gxe(e,!1),await xve(e,t)}const xxe=()=>{const e=ee.useCallback(async t=>{await vxe(t)},[]);return te.jsx(A8,{id:"tsparticles",init:e,options:{background:{color:{value:"#000000"}},fullScreen:{enable:!1},fpsLimit:120,particles:{number:{value:120,density:{enable:!0,area:1e3}},color:{value:"#2563EB"},links:{enable:!0,color:"#2563EB",distance:130,opacity:.5,width:1},move:{enable:!0,speed:2,direction:"none",outModes:{default:"bounce"},trail:{enable:!0,length:5,fillColor:"#000000"}},shape:{type:"square"},opacity:{value:.7},size:{value:{min:1.5,max:3.5},animation:{enable:!0,speed:3,minimumValue:1,sync:!1}}},interactivity:{events:{onHover:{enable:!0,mode:"repulse"},onClick:{enable:!0,mode:"push"},resize:!0},modes:{repulse:{distance:50,duration:.4},push:{quantity:4}}}}})};function L8(e,t){return function(){return e.apply(t,arguments)}}const{toString:bxe}=Object.prototype,{getPrototypeOf:tL}=Object,{iterator:aA,toStringTag:k8}=Symbol,lA=(e=>t=>{const n=bxe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jd=e=>(e=e.toLowerCase(),t=>lA(t)===e),cA=e=>t=>typeof t===e,{isArray:Mx}=Array,lw=cA("undefined");function wxe(e){return e!==null&&!lw(e)&&e.constructor!==null&&!lw(e.constructor)&&Pc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const z8=jd("ArrayBuffer");function Sxe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&z8(e.buffer),t}const Txe=cA("string"),Pc=cA("function"),B8=cA("number"),uA=e=>e!==null&&typeof e=="object",Exe=e=>e===!0||e===!1,fE=e=>{if(lA(e)!=="object")return!1;const t=tL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(k8 in e)&&!(aA in e)},Cxe=jd("Date"),Axe=jd("File"),Mxe=jd("Blob"),Rxe=jd("FileList"),Ixe=e=>uA(e)&&Pc(e.pipe),Pxe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Pc(e.append)&&((t=lA(e))==="formdata"||t==="object"&&Pc(e.toString)&&e.toString()==="[object FormData]"))},Dxe=jd("URLSearchParams"),[Oxe,Lxe,kxe,zxe]=["ReadableStream","Request","Response","Headers"].map(jd),Bxe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bw(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,u;if(typeof e!="object"&&(e=[e]),Mx(e))for(a=0,u=e.length;a<u;a++)t.call(null,e[a],a,e);else{const f=n?Object.getOwnPropertyNames(e):Object.keys(e),y=f.length;let r;for(a=0;a<y;a++)r=f[a],t.call(null,e[r],r,e)}}function F8(e,t){t=t.toLowerCase();const n=Object.keys(e);let a=n.length,u;for(;a-- >0;)if(u=n[a],t===u.toLowerCase())return u;return null}const F_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,N8=e=>!lw(e)&&e!==F_;function zP(){const{caseless:e}=N8(this)&&this||{},t={},n=(a,u)=>{const f=e&&F8(t,u)||u;fE(t[f])&&fE(a)?t[f]=zP(t[f],a):fE(a)?t[f]=zP({},a):Mx(a)?t[f]=a.slice():t[f]=a};for(let a=0,u=arguments.length;a<u;a++)arguments[a]&&Bw(arguments[a],n);return t}const Fxe=(e,t,n,{allOwnKeys:a}={})=>(Bw(t,(u,f)=>{n&&Pc(u)?e[f]=L8(u,n):e[f]=u},{allOwnKeys:a}),e),Nxe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jxe=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Uxe=(e,t,n,a)=>{let u,f,y;const r={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),f=u.length;f-- >0;)y=u[f],(!a||a(y,e,t))&&!r[y]&&(t[y]=e[y],r[y]=!0);e=n!==!1&&tL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Vxe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},$xe=e=>{if(!e)return null;if(Mx(e))return e;let t=e.length;if(!B8(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Hxe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&tL(Uint8Array)),Gxe=(e,t)=>{const a=(e&&e[aA]).call(e);let u;for(;(u=a.next())&&!u.done;){const f=u.value;t.call(e,f[0],f[1])}},qxe=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},Wxe=jd("HTMLFormElement"),Xxe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,u){return a.toUpperCase()+u}),o4=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Zxe=jd("RegExp"),j8=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Bw(n,(u,f)=>{let y;(y=t(u,f,e))!==!1&&(a[f]=y||u)}),Object.defineProperties(e,a)},Yxe=e=>{j8(e,(t,n)=>{if(Pc(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(Pc(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Kxe=(e,t)=>{const n={},a=u=>{u.forEach(f=>{n[f]=!0})};return Mx(e)?a(e):a(String(e).split(t)),n},Jxe=()=>{},Qxe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ebe(e){return!!(e&&Pc(e.append)&&e[k8]==="FormData"&&e[aA])}const tbe=e=>{const t=new Array(10),n=(a,u)=>{if(uA(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[u]=a;const f=Mx(a)?[]:{};return Bw(a,(y,r)=>{const S=n(y,u+1);!lw(S)&&(f[r]=S)}),t[u]=void 0,f}}return a};return n(e,0)},nbe=jd("AsyncFunction"),ibe=e=>e&&(uA(e)||Pc(e))&&Pc(e.then)&&Pc(e.catch),U8=((e,t)=>e?setImmediate:t?((n,a)=>(F_.addEventListener("message",({source:u,data:f})=>{u===F_&&f===n&&a.length&&a.shift()()},!1),u=>{a.push(u),F_.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Pc(F_.postMessage)),rbe=typeof queueMicrotask<"u"?queueMicrotask.bind(F_):typeof process<"u"&&process.nextTick||U8,obe=e=>e!=null&&Pc(e[aA]),nn={isArray:Mx,isArrayBuffer:z8,isBuffer:wxe,isFormData:Pxe,isArrayBufferView:Sxe,isString:Txe,isNumber:B8,isBoolean:Exe,isObject:uA,isPlainObject:fE,isReadableStream:Oxe,isRequest:Lxe,isResponse:kxe,isHeaders:zxe,isUndefined:lw,isDate:Cxe,isFile:Axe,isBlob:Mxe,isRegExp:Zxe,isFunction:Pc,isStream:Ixe,isURLSearchParams:Dxe,isTypedArray:Hxe,isFileList:Rxe,forEach:Bw,merge:zP,extend:Fxe,trim:Bxe,stripBOM:Nxe,inherits:jxe,toFlatObject:Uxe,kindOf:lA,kindOfTest:jd,endsWith:Vxe,toArray:$xe,forEachEntry:Gxe,matchAll:qxe,isHTMLForm:Wxe,hasOwnProperty:o4,hasOwnProp:o4,reduceDescriptors:j8,freezeMethods:Yxe,toObjectSet:Kxe,toCamelCase:Xxe,noop:Jxe,toFiniteNumber:Qxe,findKey:F8,global:F_,isContextDefined:N8,isSpecCompliantForm:ebe,toJSONObject:tbe,isAsyncFn:nbe,isThenable:ibe,setImmediate:U8,asap:rbe,isIterable:obe};function Br(e,t,n,a,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),u&&(this.response=u,this.status=u.status?u.status:null)}nn.inherits(Br,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nn.toJSONObject(this.config),code:this.code,status:this.status}}});const V8=Br.prototype,$8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$8[e]={value:e}});Object.defineProperties(Br,$8);Object.defineProperty(V8,"isAxiosError",{value:!0});Br.from=(e,t,n,a,u,f)=>{const y=Object.create(V8);return nn.toFlatObject(e,y,function(S){return S!==Error.prototype},r=>r!=="isAxiosError"),Br.call(y,e.message,t,n,a,u),y.cause=e,y.name=e.name,f&&Object.assign(y,f),y};const sbe=null;function BP(e){return nn.isPlainObject(e)||nn.isArray(e)}function H8(e){return nn.endsWith(e,"[]")?e.slice(0,-2):e}function s4(e,t,n){return e?e.concat(t).map(function(u,f){return u=H8(u),!n&&f?"["+u+"]":u}).join(n?".":""):t}function abe(e){return nn.isArray(e)&&!e.some(BP)}const lbe=nn.toFlatObject(nn,{},null,function(t){return/^is[A-Z]/.test(t)});function hA(e,t,n){if(!nn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=nn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,K){return!nn.isUndefined(K[H])});const a=n.metaTokens,u=n.visitor||R,f=n.dots,y=n.indexes,S=(n.Blob||typeof Blob<"u"&&Blob)&&nn.isSpecCompliantForm(t);if(!nn.isFunction(u))throw new TypeError("visitor must be a function");function A(U){if(U===null)return"";if(nn.isDate(U))return U.toISOString();if(!S&&nn.isBlob(U))throw new Br("Blob is not supported. Use a Buffer instead.");return nn.isArrayBuffer(U)||nn.isTypedArray(U)?S&&typeof Blob=="function"?new Blob([U]):Buffer.from(U):U}function R(U,H,K){let W=U;if(U&&!K&&typeof U=="object"){if(nn.endsWith(H,"{}"))H=a?H:H.slice(0,-2),U=JSON.stringify(U);else if(nn.isArray(U)&&abe(U)||(nn.isFileList(U)||nn.endsWith(H,"[]"))&&(W=nn.toArray(U)))return H=H8(H),W.forEach(function(ne,se){!(nn.isUndefined(ne)||ne===null)&&t.append(y===!0?s4([H],se,f):y===null?H:H+"[]",A(ne))}),!1}return BP(U)?!0:(t.append(s4(K,H,f),A(U)),!1)}const O=[],z=Object.assign(lbe,{defaultVisitor:R,convertValue:A,isVisitable:BP});function N(U,H){if(!nn.isUndefined(U)){if(O.indexOf(U)!==-1)throw Error("Circular reference detected in "+H.join("."));O.push(U),nn.forEach(U,function(W,re){(!(nn.isUndefined(W)||W===null)&&u.call(t,W,nn.isString(re)?re.trim():re,H,z))===!0&&N(W,H?H.concat(re):[re])}),O.pop()}}if(!nn.isObject(e))throw new TypeError("data must be an object");return N(e),t}function a4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function nL(e,t){this._pairs=[],e&&hA(e,this,t)}const G8=nL.prototype;G8.append=function(t,n){this._pairs.push([t,n])};G8.toString=function(t){const n=t?function(a){return t.call(this,a,a4)}:a4;return this._pairs.map(function(u){return n(u[0])+"="+n(u[1])},"").join("&")};function cbe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function q8(e,t,n){if(!t)return e;const a=n&&n.encode||cbe;nn.isFunction(n)&&(n={serialize:n});const u=n&&n.serialize;let f;if(u?f=u(t,n):f=nn.isURLSearchParams(t)?t.toString():new nL(t,n).toString(a),f){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class l4{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){nn.forEach(this.handlers,function(a){a!==null&&t(a)})}}const W8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ube=typeof URLSearchParams<"u"?URLSearchParams:nL,hbe=typeof FormData<"u"?FormData:null,dbe=typeof Blob<"u"?Blob:null,fbe={isBrowser:!0,classes:{URLSearchParams:ube,FormData:hbe,Blob:dbe},protocols:["http","https","file","blob","url","data"]},iL=typeof window<"u"&&typeof document<"u",FP=typeof navigator=="object"&&navigator||void 0,pbe=iL&&(!FP||["ReactNative","NativeScript","NS"].indexOf(FP.product)<0),mbe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gbe=iL&&window.location.href||"http://localhost",ybe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:iL,hasStandardBrowserEnv:pbe,hasStandardBrowserWebWorkerEnv:mbe,navigator:FP,origin:gbe},Symbol.toStringTag,{value:"Module"})),Dl={...ybe,...fbe};function _be(e,t){return hA(e,new Dl.classes.URLSearchParams,Object.assign({visitor:function(n,a,u,f){return Dl.isNode&&nn.isBuffer(n)?(this.append(a,n.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},t))}function vbe(e){return nn.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xbe(e){const t={},n=Object.keys(e);let a;const u=n.length;let f;for(a=0;a<u;a++)f=n[a],t[f]=e[f];return t}function X8(e){function t(n,a,u,f){let y=n[f++];if(y==="__proto__")return!0;const r=Number.isFinite(+y),S=f>=n.length;return y=!y&&nn.isArray(u)?u.length:y,S?(nn.hasOwnProp(u,y)?u[y]=[u[y],a]:u[y]=a,!r):((!u[y]||!nn.isObject(u[y]))&&(u[y]=[]),t(n,a,u[y],f)&&nn.isArray(u[y])&&(u[y]=xbe(u[y])),!r)}if(nn.isFormData(e)&&nn.isFunction(e.entries)){const n={};return nn.forEachEntry(e,(a,u)=>{t(vbe(a),u,n,0)}),n}return null}function bbe(e,t,n){if(nn.isString(e))try{return(t||JSON.parse)(e),nn.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const Fw={transitional:W8,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",u=a.indexOf("application/json")>-1,f=nn.isObject(t);if(f&&nn.isHTMLForm(t)&&(t=new FormData(t)),nn.isFormData(t))return u?JSON.stringify(X8(t)):t;if(nn.isArrayBuffer(t)||nn.isBuffer(t)||nn.isStream(t)||nn.isFile(t)||nn.isBlob(t)||nn.isReadableStream(t))return t;if(nn.isArrayBufferView(t))return t.buffer;if(nn.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(f){if(a.indexOf("application/x-www-form-urlencoded")>-1)return _be(t,this.formSerializer).toString();if((r=nn.isFileList(t))||a.indexOf("multipart/form-data")>-1){const S=this.env&&this.env.FormData;return hA(r?{"files[]":t}:t,S&&new S,this.formSerializer)}}return f||u?(n.setContentType("application/json",!1),bbe(t)):t}],transformResponse:[function(t){const n=this.transitional||Fw.transitional,a=n&&n.forcedJSONParsing,u=this.responseType==="json";if(nn.isResponse(t)||nn.isReadableStream(t))return t;if(t&&nn.isString(t)&&(a&&!this.responseType||u)){const y=!(n&&n.silentJSONParsing)&&u;try{return JSON.parse(t)}catch(r){if(y)throw r.name==="SyntaxError"?Br.from(r,Br.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dl.classes.FormData,Blob:Dl.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nn.forEach(["delete","get","head","post","put","patch"],e=>{Fw.headers[e]={}});const wbe=nn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sbe=e=>{const t={};let n,a,u;return e&&e.split(`
`).forEach(function(y){u=y.indexOf(":"),n=y.substring(0,u).trim().toLowerCase(),a=y.substring(u+1).trim(),!(!n||t[n]&&wbe[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},c4=Symbol("internals");function r1(e){return e&&String(e).trim().toLowerCase()}function pE(e){return e===!1||e==null?e:nn.isArray(e)?e.map(pE):String(e)}function Tbe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const Ebe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function iI(e,t,n,a,u){if(nn.isFunction(a))return a.call(this,t,n);if(u&&(t=n),!!nn.isString(t)){if(nn.isString(a))return t.indexOf(a)!==-1;if(nn.isRegExp(a))return a.test(t)}}function Cbe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Abe(e,t){const n=nn.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(u,f,y){return this[a].call(this,t,u,f,y)},configurable:!0})})}let Dc=class{constructor(t){t&&this.set(t)}set(t,n,a){const u=this;function f(r,S,A){const R=r1(S);if(!R)throw new Error("header name must be a non-empty string");const O=nn.findKey(u,R);(!O||u[O]===void 0||A===!0||A===void 0&&u[O]!==!1)&&(u[O||S]=pE(r))}const y=(r,S)=>nn.forEach(r,(A,R)=>f(A,R,S));if(nn.isPlainObject(t)||t instanceof this.constructor)y(t,n);else if(nn.isString(t)&&(t=t.trim())&&!Ebe(t))y(Sbe(t),n);else if(nn.isObject(t)&&nn.isIterable(t)){let r={},S,A;for(const R of t){if(!nn.isArray(R))throw TypeError("Object iterator must return a key-value pair");r[A=R[0]]=(S=r[A])?nn.isArray(S)?[...S,R[1]]:[S,R[1]]:R[1]}y(r,n)}else t!=null&&f(n,t,a);return this}get(t,n){if(t=r1(t),t){const a=nn.findKey(this,t);if(a){const u=this[a];if(!n)return u;if(n===!0)return Tbe(u);if(nn.isFunction(n))return n.call(this,u,a);if(nn.isRegExp(n))return n.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=r1(t),t){const a=nn.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||iI(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let u=!1;function f(y){if(y=r1(y),y){const r=nn.findKey(a,y);r&&(!n||iI(a,a[r],r,n))&&(delete a[r],u=!0)}}return nn.isArray(t)?t.forEach(f):f(t),u}clear(t){const n=Object.keys(this);let a=n.length,u=!1;for(;a--;){const f=n[a];(!t||iI(this,this[f],f,t,!0))&&(delete this[f],u=!0)}return u}normalize(t){const n=this,a={};return nn.forEach(this,(u,f)=>{const y=nn.findKey(a,f);if(y){n[y]=pE(u),delete n[f];return}const r=t?Cbe(f):String(f).trim();r!==f&&delete n[f],n[r]=pE(u),a[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return nn.forEach(this,(a,u)=>{a!=null&&a!==!1&&(n[u]=t&&nn.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(u=>a.set(u)),a}static accessor(t){const a=(this[c4]=this[c4]={accessors:{}}).accessors,u=this.prototype;function f(y){const r=r1(y);a[r]||(Abe(u,y),a[r]=!0)}return nn.isArray(t)?t.forEach(f):f(t),this}};Dc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);nn.reduceDescriptors(Dc.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});nn.freezeMethods(Dc);function rI(e,t){const n=this||Fw,a=t||n,u=Dc.from(a.headers);let f=a.data;return nn.forEach(e,function(r){f=r.call(n,f,u.normalize(),t?t.status:void 0)}),u.normalize(),f}function Z8(e){return!!(e&&e.__CANCEL__)}function Rx(e,t,n){Br.call(this,e??"canceled",Br.ERR_CANCELED,t,n),this.name="CanceledError"}nn.inherits(Rx,Br,{__CANCEL__:!0});function Y8(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new Br("Request failed with status code "+n.status,[Br.ERR_BAD_REQUEST,Br.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Mbe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rbe(e,t){e=e||10;const n=new Array(e),a=new Array(e);let u=0,f=0,y;return t=t!==void 0?t:1e3,function(S){const A=Date.now(),R=a[f];y||(y=A),n[u]=S,a[u]=A;let O=f,z=0;for(;O!==u;)z+=n[O++],O=O%e;if(u=(u+1)%e,u===f&&(f=(f+1)%e),A-y<t)return;const N=R&&A-R;return N?Math.round(z*1e3/N):void 0}}function Ibe(e,t){let n=0,a=1e3/t,u,f;const y=(A,R=Date.now())=>{n=R,u=null,f&&(clearTimeout(f),f=null),e.apply(null,A)};return[(...A)=>{const R=Date.now(),O=R-n;O>=a?y(A,R):(u=A,f||(f=setTimeout(()=>{f=null,y(u)},a-O)))},()=>u&&y(u)]}const aC=(e,t,n=3)=>{let a=0;const u=Rbe(50,250);return Ibe(f=>{const y=f.loaded,r=f.lengthComputable?f.total:void 0,S=y-a,A=u(S),R=y<=r;a=y;const O={loaded:y,total:r,progress:r?y/r:void 0,bytes:S,rate:A||void 0,estimated:A&&r&&R?(r-y)/A:void 0,event:f,lengthComputable:r!=null,[t?"download":"upload"]:!0};e(O)},n)},u4=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},h4=e=>(...t)=>nn.asap(()=>e(...t)),Pbe=Dl.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Dl.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Dl.origin),Dl.navigator&&/(msie|trident)/i.test(Dl.navigator.userAgent)):()=>!0,Dbe=Dl.hasStandardBrowserEnv?{write(e,t,n,a,u,f){const y=[e+"="+encodeURIComponent(t)];nn.isNumber(n)&&y.push("expires="+new Date(n).toGMTString()),nn.isString(a)&&y.push("path="+a),nn.isString(u)&&y.push("domain="+u),f===!0&&y.push("secure"),document.cookie=y.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Obe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Lbe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function K8(e,t,n){let a=!Obe(t);return e&&(a||n==!1)?Lbe(e,t):t}const d4=e=>e instanceof Dc?{...e}:e;function av(e,t){t=t||{};const n={};function a(A,R,O,z){return nn.isPlainObject(A)&&nn.isPlainObject(R)?nn.merge.call({caseless:z},A,R):nn.isPlainObject(R)?nn.merge({},R):nn.isArray(R)?R.slice():R}function u(A,R,O,z){if(nn.isUndefined(R)){if(!nn.isUndefined(A))return a(void 0,A,O,z)}else return a(A,R,O,z)}function f(A,R){if(!nn.isUndefined(R))return a(void 0,R)}function y(A,R){if(nn.isUndefined(R)){if(!nn.isUndefined(A))return a(void 0,A)}else return a(void 0,R)}function r(A,R,O){if(O in t)return a(A,R);if(O in e)return a(void 0,A)}const S={url:f,method:f,data:f,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:r,headers:(A,R,O)=>u(d4(A),d4(R),O,!0)};return nn.forEach(Object.keys(Object.assign({},e,t)),function(R){const O=S[R]||u,z=O(e[R],t[R],R);nn.isUndefined(z)&&O!==r||(n[R]=z)}),n}const J8=e=>{const t=av({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:u,xsrfCookieName:f,headers:y,auth:r}=t;t.headers=y=Dc.from(y),t.url=q8(K8(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),r&&y.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):"")));let S;if(nn.isFormData(n)){if(Dl.hasStandardBrowserEnv||Dl.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((S=y.getContentType())!==!1){const[A,...R]=S?S.split(";").map(O=>O.trim()).filter(Boolean):[];y.setContentType([A||"multipart/form-data",...R].join("; "))}}if(Dl.hasStandardBrowserEnv&&(a&&nn.isFunction(a)&&(a=a(t)),a||a!==!1&&Pbe(t.url))){const A=u&&f&&Dbe.read(f);A&&y.set(u,A)}return t},kbe=typeof XMLHttpRequest<"u",zbe=kbe&&function(e){return new Promise(function(n,a){const u=J8(e);let f=u.data;const y=Dc.from(u.headers).normalize();let{responseType:r,onUploadProgress:S,onDownloadProgress:A}=u,R,O,z,N,U;function H(){N&&N(),U&&U(),u.cancelToken&&u.cancelToken.unsubscribe(R),u.signal&&u.signal.removeEventListener("abort",R)}let K=new XMLHttpRequest;K.open(u.method.toUpperCase(),u.url,!0),K.timeout=u.timeout;function W(){if(!K)return;const ne=Dc.from("getAllResponseHeaders"in K&&K.getAllResponseHeaders()),ue={data:!r||r==="text"||r==="json"?K.responseText:K.response,status:K.status,statusText:K.statusText,headers:ne,config:e,request:K};Y8(function(Ce){n(Ce),H()},function(Ce){a(Ce),H()},ue),K=null}"onloadend"in K?K.onloadend=W:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(W)},K.onabort=function(){K&&(a(new Br("Request aborted",Br.ECONNABORTED,e,K)),K=null)},K.onerror=function(){a(new Br("Network Error",Br.ERR_NETWORK,e,K)),K=null},K.ontimeout=function(){let se=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const ue=u.transitional||W8;u.timeoutErrorMessage&&(se=u.timeoutErrorMessage),a(new Br(se,ue.clarifyTimeoutError?Br.ETIMEDOUT:Br.ECONNABORTED,e,K)),K=null},f===void 0&&y.setContentType(null),"setRequestHeader"in K&&nn.forEach(y.toJSON(),function(se,ue){K.setRequestHeader(ue,se)}),nn.isUndefined(u.withCredentials)||(K.withCredentials=!!u.withCredentials),r&&r!=="json"&&(K.responseType=u.responseType),A&&([z,U]=aC(A,!0),K.addEventListener("progress",z)),S&&K.upload&&([O,N]=aC(S),K.upload.addEventListener("progress",O),K.upload.addEventListener("loadend",N)),(u.cancelToken||u.signal)&&(R=ne=>{K&&(a(!ne||ne.type?new Rx(null,e,K):ne),K.abort(),K=null)},u.cancelToken&&u.cancelToken.subscribe(R),u.signal&&(u.signal.aborted?R():u.signal.addEventListener("abort",R)));const re=Mbe(u.url);if(re&&Dl.protocols.indexOf(re)===-1){a(new Br("Unsupported protocol "+re+":",Br.ERR_BAD_REQUEST,e));return}K.send(f||null)})},Bbe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,u;const f=function(A){if(!u){u=!0,r();const R=A instanceof Error?A:this.reason;a.abort(R instanceof Br?R:new Rx(R instanceof Error?R.message:R))}};let y=t&&setTimeout(()=>{y=null,f(new Br(`timeout ${t} of ms exceeded`,Br.ETIMEDOUT))},t);const r=()=>{e&&(y&&clearTimeout(y),y=null,e.forEach(A=>{A.unsubscribe?A.unsubscribe(f):A.removeEventListener("abort",f)}),e=null)};e.forEach(A=>A.addEventListener("abort",f));const{signal:S}=a;return S.unsubscribe=()=>nn.asap(r),S}},Fbe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,u;for(;a<n;)u=a+t,yield e.slice(a,u),a=u},Nbe=async function*(e,t){for await(const n of jbe(e))yield*Fbe(n,t)},jbe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},f4=(e,t,n,a)=>{const u=Nbe(e,t);let f=0,y,r=S=>{y||(y=!0,a&&a(S))};return new ReadableStream({async pull(S){try{const{done:A,value:R}=await u.next();if(A){r(),S.close();return}let O=R.byteLength;if(n){let z=f+=O;n(z)}S.enqueue(new Uint8Array(R))}catch(A){throw r(A),A}},cancel(S){return r(S),u.return()}},{highWaterMark:2})},dA=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Q8=dA&&typeof ReadableStream=="function",Ube=dA&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),eH=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Vbe=Q8&&eH(()=>{let e=!1;const t=new Request(Dl.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),p4=64*1024,NP=Q8&&eH(()=>nn.isReadableStream(new Response("").body)),lC={stream:NP&&(e=>e.body)};dA&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!lC[t]&&(lC[t]=nn.isFunction(e[t])?n=>n[t]():(n,a)=>{throw new Br(`Response type '${t}' is not supported`,Br.ERR_NOT_SUPPORT,a)})})})(new Response);const $be=async e=>{if(e==null)return 0;if(nn.isBlob(e))return e.size;if(nn.isSpecCompliantForm(e))return(await new Request(Dl.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(nn.isArrayBufferView(e)||nn.isArrayBuffer(e))return e.byteLength;if(nn.isURLSearchParams(e)&&(e=e+""),nn.isString(e))return(await Ube(e)).byteLength},Hbe=async(e,t)=>{const n=nn.toFiniteNumber(e.getContentLength());return n??$be(t)},Gbe=dA&&(async e=>{let{url:t,method:n,data:a,signal:u,cancelToken:f,timeout:y,onDownloadProgress:r,onUploadProgress:S,responseType:A,headers:R,withCredentials:O="same-origin",fetchOptions:z}=J8(e);A=A?(A+"").toLowerCase():"text";let N=Bbe([u,f&&f.toAbortSignal()],y),U;const H=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let K;try{if(S&&Vbe&&n!=="get"&&n!=="head"&&(K=await Hbe(R,a))!==0){let ue=new Request(t,{method:"POST",body:a,duplex:"half"}),pe;if(nn.isFormData(a)&&(pe=ue.headers.get("content-type"))&&R.setContentType(pe),ue.body){const[Ce,Le]=u4(K,aC(h4(S)));a=f4(ue.body,p4,Ce,Le)}}nn.isString(O)||(O=O?"include":"omit");const W="credentials"in Request.prototype;U=new Request(t,{...z,signal:N,method:n.toUpperCase(),headers:R.normalize().toJSON(),body:a,duplex:"half",credentials:W?O:void 0});let re=await fetch(U);const ne=NP&&(A==="stream"||A==="response");if(NP&&(r||ne&&H)){const ue={};["status","statusText","headers"].forEach(qe=>{ue[qe]=re[qe]});const pe=nn.toFiniteNumber(re.headers.get("content-length")),[Ce,Le]=r&&u4(pe,aC(h4(r),!0))||[];re=new Response(f4(re.body,p4,Ce,()=>{Le&&Le(),H&&H()}),ue)}A=A||"text";let se=await lC[nn.findKey(lC,A)||"text"](re,e);return!ne&&H&&H(),await new Promise((ue,pe)=>{Y8(ue,pe,{data:se,headers:Dc.from(re.headers),status:re.status,statusText:re.statusText,config:e,request:U})})}catch(W){throw H&&H(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Br("Network Error",Br.ERR_NETWORK,e,U),{cause:W.cause||W}):Br.from(W,W&&W.code,e,U)}}),jP={http:sbe,xhr:zbe,fetch:Gbe};nn.forEach(jP,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const m4=e=>`- ${e}`,qbe=e=>nn.isFunction(e)||e===null||e===!1,tH={getAdapter:e=>{e=nn.isArray(e)?e:[e];const{length:t}=e;let n,a;const u={};for(let f=0;f<t;f++){n=e[f];let y;if(a=n,!qbe(n)&&(a=jP[(y=String(n)).toLowerCase()],a===void 0))throw new Br(`Unknown adapter '${y}'`);if(a)break;u[y||"#"+f]=a}if(!a){const f=Object.entries(u).map(([r,S])=>`adapter ${r} `+(S===!1?"is not supported by the environment":"is not available in the build"));let y=t?f.length>1?`since :
`+f.map(m4).join(`
`):" "+m4(f[0]):"as no adapter specified";throw new Br("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return a},adapters:jP};function oI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rx(null,e)}function g4(e){return oI(e),e.headers=Dc.from(e.headers),e.data=rI.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tH.getAdapter(e.adapter||Fw.adapter)(e).then(function(a){return oI(e),a.data=rI.call(e,e.transformResponse,a),a.headers=Dc.from(a.headers),a},function(a){return Z8(a)||(oI(e),a&&a.response&&(a.response.data=rI.call(e,e.transformResponse,a.response),a.response.headers=Dc.from(a.response.headers))),Promise.reject(a)})}const nH="1.9.0",fA={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fA[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const y4={};fA.transitional=function(t,n,a){function u(f,y){return"[Axios v"+nH+"] Transitional option '"+f+"'"+y+(a?". "+a:"")}return(f,y,r)=>{if(t===!1)throw new Br(u(y," has been removed"+(n?" in "+n:"")),Br.ERR_DEPRECATED);return n&&!y4[y]&&(y4[y]=!0,console.warn(u(y," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(f,y,r):!0}};fA.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Wbe(e,t,n){if(typeof e!="object")throw new Br("options must be an object",Br.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let u=a.length;for(;u-- >0;){const f=a[u],y=t[f];if(y){const r=e[f],S=r===void 0||y(r,f,e);if(S!==!0)throw new Br("option "+f+" must be "+S,Br.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Br("Unknown option "+f,Br.ERR_BAD_OPTION)}}const mE={assertOptions:Wbe,validators:fA},Df=mE.validators;let X_=class{constructor(t){this.defaults=t||{},this.interceptors={request:new l4,response:new l4}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const f=u.stack?u.stack.replace(/^.+\n/,""):"";try{a.stack?f&&!String(a.stack).endsWith(f.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+f):a.stack=f}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=av(this.defaults,n);const{transitional:a,paramsSerializer:u,headers:f}=n;a!==void 0&&mE.assertOptions(a,{silentJSONParsing:Df.transitional(Df.boolean),forcedJSONParsing:Df.transitional(Df.boolean),clarifyTimeoutError:Df.transitional(Df.boolean)},!1),u!=null&&(nn.isFunction(u)?n.paramsSerializer={serialize:u}:mE.assertOptions(u,{encode:Df.function,serialize:Df.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),mE.assertOptions(n,{baseUrl:Df.spelling("baseURL"),withXsrfToken:Df.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let y=f&&nn.merge(f.common,f[n.method]);f&&nn.forEach(["delete","get","head","post","put","patch","common"],U=>{delete f[U]}),n.headers=Dc.concat(y,f);const r=[];let S=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(n)===!1||(S=S&&H.synchronous,r.unshift(H.fulfilled,H.rejected))});const A=[];this.interceptors.response.forEach(function(H){A.push(H.fulfilled,H.rejected)});let R,O=0,z;if(!S){const U=[g4.bind(this),void 0];for(U.unshift.apply(U,r),U.push.apply(U,A),z=U.length,R=Promise.resolve(n);O<z;)R=R.then(U[O++],U[O++]);return R}z=r.length;let N=n;for(O=0;O<z;){const U=r[O++],H=r[O++];try{N=U(N)}catch(K){H.call(this,K);break}}try{R=g4.call(this,N)}catch(U){return Promise.reject(U)}for(O=0,z=A.length;O<z;)R=R.then(A[O++],A[O++]);return R}getUri(t){t=av(this.defaults,t);const n=K8(t.baseURL,t.url,t.allowAbsoluteUrls);return q8(n,t.params,t.paramsSerializer)}};nn.forEach(["delete","get","head","options"],function(t){X_.prototype[t]=function(n,a){return this.request(av(a||{},{method:t,url:n,data:(a||{}).data}))}});nn.forEach(["post","put","patch"],function(t){function n(a){return function(f,y,r){return this.request(av(r||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:f,data:y}))}}X_.prototype[t]=n(),X_.prototype[t+"Form"]=n(!0)});let Xbe=class iH{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(f){n=f});const a=this;this.promise.then(u=>{if(!a._listeners)return;let f=a._listeners.length;for(;f-- >0;)a._listeners[f](u);a._listeners=null}),this.promise.then=u=>{let f;const y=new Promise(r=>{a.subscribe(r),f=r}).then(u);return y.cancel=function(){a.unsubscribe(f)},y},t(function(f,y,r){a.reason||(a.reason=new Rx(f,y,r),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new iH(function(u){t=u}),cancel:t}}};function Zbe(e){return function(n){return e.apply(null,n)}}function Ybe(e){return nn.isObject(e)&&e.isAxiosError===!0}const UP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(UP).forEach(([e,t])=>{UP[t]=e});function rH(e){const t=new X_(e),n=L8(X_.prototype.request,t);return nn.extend(n,X_.prototype,t,{allOwnKeys:!0}),nn.extend(n,t,null,{allOwnKeys:!0}),n.create=function(u){return rH(av(e,u))},n}const Hs=rH(Fw);Hs.Axios=X_;Hs.CanceledError=Rx;Hs.CancelToken=Xbe;Hs.isCancel=Z8;Hs.VERSION=nH;Hs.toFormData=hA;Hs.AxiosError=Br;Hs.Cancel=Hs.CanceledError;Hs.all=function(t){return Promise.all(t)};Hs.spread=Zbe;Hs.isAxiosError=Ybe;Hs.mergeConfig=av;Hs.AxiosHeaders=Dc;Hs.formToJSON=e=>X8(nn.isHTMLForm(e)?new FormData(e):e);Hs.getAdapter=tH.getAdapter;Hs.HttpStatusCode=UP;Hs.default=Hs;const{Axios:xSe,AxiosError:bSe,CanceledError:wSe,isCancel:SSe,CancelToken:TSe,VERSION:ESe,all:CSe,Cancel:ASe,isAxiosError:MSe,spread:RSe,toFormData:ISe,AxiosHeaders:PSe,HttpStatusCode:DSe,formToJSON:OSe,getAdapter:LSe,mergeConfig:kSe}=Hs,rL=Hs.create({baseURL:"http://3.108.63.213:3001/api/",headers:{"Content-Type":"application/json"}});rL.interceptors.request.use(e=>e,e=>Promise.reject(e));rL.interceptors.response.use(e=>e,e=>{var t;return(t=e.response)==null||t.status,Promise.reject(e)});const sI=e=>{var t;(t=document.querySelector(e))==null||t.scrollIntoView({behavior:"smooth"})};function Kbe(){const{enqueueSnackbar:e}=K$(),t=BO().shape({name:mm().required("Name is required"),email:mm().email("Invalid email").required("Email is required"),phone:mm(),company:mm(),designation:mm(),message:mm().required("Message is required")}),n=y$({initialValues:{name:"",email:"",phone:"",company:"",designation:"",message:""},validationSchema:t,onSubmit:async(a,{resetForm:u})=>{var f,y,r,S;try{(await rL.post("/user/contact",a)).status===200&&(e("Message sent successfully!",{variant:"success"}),u())}catch(A){(y=(f=A==null?void 0:A.response)==null?void 0:f.data)!=null&&y.message?e((S=(r=A==null?void 0:A.response)==null?void 0:r.data)==null?void 0:S.message,{variant:"error"}):(e("Failed to send message. Please try again later.",{variant:"error"}),console.log(A))}}});return te.jsxs("footer",{className:"footer",children:[te.jsx(xxe,{}),te.jsxs("div",{className:"footer__main",children:[te.jsx("div",{className:"logo",children:te.jsx(xD,{})}),te.jsx("div",{className:"footer__column",children:te.jsxs("form",{className:"contact-form",onSubmit:n.handleSubmit,children:[te.jsx("input",{type:"text",name:"name",placeholder:"Name",value:n.values.name,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.name&&n.errors.name&&te.jsx("small",{className:"form-error",children:n.errors.name}),te.jsx("input",{type:"email",name:"email",placeholder:"Email",value:n.values.email,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.email&&n.errors.email&&te.jsx("small",{className:"form-error",children:n.errors.email}),te.jsx("input",{type:"tel",name:"phone",placeholder:"Phone",value:n.values.phone,onChange:n.handleChange}),te.jsx("input",{type:"text",name:"company",placeholder:"Company",value:n.values.company,onChange:n.handleChange}),te.jsx("input",{type:"text",name:"designation",placeholder:"Designation",value:n.values.designation,onChange:n.handleChange}),te.jsx("textarea",{name:"message",placeholder:"Message",rows:"3",value:n.values.message,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.message&&n.errors.message&&te.jsx("small",{className:"form-error",children:n.errors.message}),te.jsx("button",{type:"submit",disabled:n.isSubmitting,children:n.isSubmitting?"Sending...":"Send"}),status==="success"&&te.jsx("div",{className:"form-success",children:"Message sent successfully!"}),status==="error"&&te.jsx("div",{className:"form-error",children:"Failed to send. Try again."})]})}),te.jsxs("div",{className:"footer__column",children:[te.jsx("h4",{onClick:()=>sI(".hero"),children:"Platform"}),te.jsx("a",{href:"#",children:"About Us"}),te.jsx("a",{href:"#",children:"Careers"}),te.jsx("a",{href:"#",children:"Blog"}),te.jsx("a",{href:"#",children:"Press"})]}),te.jsxs("div",{className:"footer__column",children:[te.jsx("h4",{onClick:()=>sI(".feature-section"),children:"Industry"}),te.jsx("a",{href:"#",children:"Construction"}),te.jsx("a",{href:"#",children:"Energy"}),te.jsx("a",{href:"#",children:"Surveying"}),te.jsx("a",{href:"#",children:"Agriculture"})]}),te.jsxs("div",{className:"footer__column",children:[te.jsx("h4",{onClick:()=>sI(".simple-tabs-container"),children:"Solutions & Features"}),te.jsx("a",{href:"#",children:"Help Center"}),te.jsx("a",{href:"#",children:"Documentation"}),te.jsx("a",{href:"#",children:"Community"}),te.jsx("a",{href:"#",children:"Support"})]})]}),te.jsxs("div",{className:"footer__bottom",children:[te.jsx("p",{children:" 2025 Infra-X. All rights reserved."}),te.jsx("div",{className:"footer__socials",children:te.jsxs("div",{className:"icons",children:[te.jsx("a",{href:"#",children:te.jsx(lQ,{})}),te.jsx("a",{href:"#",children:te.jsx(uQ,{})}),te.jsx("a",{href:"#",children:te.jsx(cQ,{})}),te.jsx("a",{href:"#",children:te.jsx(aQ,{})}),te.jsx("a",{href:"#",children:te.jsx(XJ,{})})]})}),te.jsxs("div",{className:"footer__legal",children:[te.jsx("a",{href:"#",children:"Privacy Policy"}),te.jsx("a",{href:"#",children:"Terms of Service"})]})]})]})}const Jbe=()=>{const[e,t]=ee.useState(!1),[n,a]=ee.useState(0),u=Zg(),f=()=>{const r=window.scrollY;t(r>n&&r>50),a(r)},y=r=>{var S;(S=document.querySelector(r))==null||S.scrollIntoView({behavior:"smooth"})};return ee.useEffect(()=>(window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)),[n]),te.jsxs("header",{className:`transparent-header ${e?"hide":""}`,children:[te.jsx("div",{className:"ribbon",children:te.jsx("div",{className:"marquee",children:te.jsx("div",{className:"marquee__inner",children:te.jsx("span",{children:" Welcome to our platform  Explore what's new!"})})})}),te.jsxs("div",{className:"header-main",children:[te.jsxs("div",{className:"header-main-left",children:[te.jsx("div",{className:"header-main-left-logo",children:te.jsx(xD,{})}),te.jsxs("div",{className:"header-main-left-tabs",children:[te.jsx("button",{onClick:()=>y(".hero"),className:"button-tabs",children:"Platform"}),te.jsx("button",{onClick:()=>y(".company-group"),className:"button-tabs",children:"Industries"}),te.jsx("button",{onClick:()=>y(".simple-tabs-container"),className:"button-tabs",children:"Solutions"}),te.jsx("button",{onClick:()=>y(".footer"),className:"button-tabs",children:"Contact Us"})]})]}),te.jsxs("div",{className:"header-main-right",children:[te.jsx("button",{onClick:()=>u("/register"),className:"login-btn",children:"Get Started"}),te.jsx("button",{onClick:()=>u("/login"),className:"login-btn",children:"Log In"})]})]})]})};function Qbe({children:e}){return te.jsx("div",{className:"main-layout",children:e})}const _4=["Orthomosaic Viewer ","Comparison Slider"," Automated Customized Reporting","Issue Tagging & coordination "," 360 Virtual Tour"];function e1e(){const[e,t]=ee.useState(0),n=ee.useRef(null);return ee.useEffect(()=>{const a=n.current;if(!a)return;const u=()=>{t(f=>(f+1)%_4.length)};return a.addEventListener("ended",u),()=>a.removeEventListener("ended",u)},[]),te.jsxs("div",{className:"simple-tabs-container",children:[te.jsxs("div",{className:"headings",children:[te.jsx("h4",{className:"small-heading",children:"Visualize your site like never before"}),te.jsx("h1",{className:"big-heading",children:"All in one platform to visualize, track, and manage every site throughout entire project lifecycle"})]}),te.jsxs("div",{className:"content-wrapper",children:[te.jsx("div",{className:"tabs-left",children:_4.map((a,u)=>te.jsx("div",{className:`tab-item ${u===e?"active":""}`,onClick:()=>t(u),children:a},u))}),te.jsx("div",{className:"tabs-right",children:te.jsx("video",{ref:n,src:r8,autoPlay:!0,muted:!0,loop:!1,controls:!1,playsInline:!0},e)})]})]})}function t1e(){return te.jsx(te.Fragment,{children:te.jsxs(Qbe,{children:[te.jsx(Jbe,{}),te.jsx(Yge,{}),te.jsx(e1e,{}),te.jsx(tye,{}),te.jsx(Zge,{}),te.jsx(Kbe,{})]})})}const n1e=z7([{path:"/",element:te.jsx(t1e,{})},cY,Vge],{basename:""});function oH({children:e}){return ee.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[]),e||null}oH.propTypes={children:Ui.oneOfType([Ui.any,Ui.node])};const i1e="#ffffff",r1e="#e3f2fd",o1e="#90caf9",s1e="#2563EB",a1e="#999999",l1e="#1565c0",c1e="#D6E6F5",u1e="#B3D3F0",h1e="#578FCA",d1e="#3E6EA3",f1e="#1F3F66",p1e="#b9f6ca",m1e="#69f0ae",g1e="#00e676",y1e="#00c853",_1e="#ef9a9a",v1e="#f44336",x1e="#c62828",b1e="#fbe9e7",w1e="#ffab91",S1e="#d84315",T1e="#fff8e1",E1e="#ffe57f",C1e="#ffc107",A1e="#f8fafc",M1e="#eef2f6",R1e="#e3e8ef",I1e="#cdd5df",P1e="#697586",D1e="#4b5565",O1e="#364152",L1e="#121926",k1e="#111936",z1e="#1a223f",B1e="#29314f",F1e="#212946",N1e="#d7dcec",j1e="#bdc8f0",U1e="#8492c4",V1e="#e3f2fd",$1e="#2196f3",H1e="#1e88e5",G1e="#90caf9",q1e="#1565c0",W1e="#d1c4e9",X1e="#7c4dff",Z1e="#651fff",Y1e="#b39ddb",K1e="#6200ea",J1e={paper:i1e,primaryLight:r1e,primary200:o1e,primaryMain:s1e,primaryDark:a1e,primary800:l1e,secondaryLight:c1e,secondary200:u1e,secondaryMain:h1e,secondaryDark:d1e,secondary800:f1e,successLight:p1e,success200:m1e,successMain:g1e,successDark:y1e,errorLight:_1e,errorMain:v1e,errorDark:x1e,orangeLight:b1e,orangeMain:w1e,orangeDark:S1e,warningLight:T1e,warningMain:E1e,warningDark:C1e,grey50:A1e,grey100:M1e,grey200:R1e,grey300:I1e,grey500:P1e,grey600:D1e,grey700:O1e,grey900:L1e,darkPaper:k1e,darkBackground:z1e,darkLevel1:B1e,darkLevel2:F1e,darkTextTitle:N1e,darkTextPrimary:j1e,darkTextSecondary:U1e,darkPrimaryLight:V1e,darkPrimaryMain:$1e,darkPrimaryDark:H1e,darkPrimary200:G1e,darkPrimary800:q1e,darkSecondaryLight:W1e,darkSecondaryMain:X1e,darkSecondaryDark:Z1e,darkSecondary200:Y1e,darkSecondary800:K1e};function Q1e(e,t){let n;switch(t){case"default":default:n=J1e}return yw({palette:{mode:e,common:{black:n.darkPaper},primary:{light:n.primaryLight,main:n.primaryMain,dark:n.primaryDark,200:n.primary200,800:n.primary800},secondary:{light:n.secondaryLight,main:n.secondaryMain,dark:n.secondaryDark,200:n.secondary200,800:n.secondary800},error:{light:n.errorLight,main:n.errorMain,dark:n.errorDark},orange:{light:n.orangeLight,main:n.orangeMain,dark:n.orangeDark},warning:{light:n.warningLight,main:n.warningMain,dark:n.warningDark,contrastText:n.grey700},success:{light:n.successLight,200:n.success200,main:n.successMain,dark:n.successDark},grey:{50:n.grey50,100:n.grey100,500:n.grey500,600:n.grey600,700:n.grey700,900:n.grey900},dark:{light:n.darkTextPrimary,main:n.darkLevel1,dark:n.darkLevel2,800:n.darkBackground,900:n.darkPaper},text:{primary:n.grey700,secondary:n.grey500,dark:n.grey900,hint:n.grey100},divider:n.grey200,background:{paper:n.paper,default:n.paper}}})}function ewe(e,t,n){return{fontFamily:n,h6:{fontWeight:500,color:e.palette.grey[900],fontSize:"0.75rem"},h5:{fontSize:"0.875rem",color:e.palette.grey[900],fontWeight:500},h4:{fontSize:"1rem",color:e.palette.grey[900],fontWeight:600},h3:{fontSize:"1.25rem",color:e.palette.grey[900],fontWeight:600},h2:{fontSize:"1.5rem",color:e.palette.grey[900],fontWeight:700},h1:{fontSize:"2.125rem",color:e.palette.grey[900],fontWeight:700},subtitle1:{fontSize:"0.875rem",fontWeight:500,color:e.palette.text.dark},subtitle2:{fontSize:"0.75rem",fontWeight:400,color:e.palette.text.secondary},caption:{fontSize:"0.75rem",color:e.palette.text.secondary,fontWeight:400},body1:{fontSize:"0.875rem",fontWeight:400,lineHeight:"1.334em"},body2:{letterSpacing:"0em",fontWeight:400,lineHeight:"1.5em",color:e.palette.text.primary},button:{textTransform:"capitalize"},customInput:{marginTop:1,marginBottom:1,"& > label":{top:23,left:0,color:e.palette.grey[500],'&[data-shrink="false"]':{top:5}},"& > div > input":{padding:"30.5px 14px 11.5px !important"},"& legend":{display:"none"},"& fieldset":{top:0}},customMultiSelect:{marginTop:1,marginBottom:1,"& > label":{top:20,left:0,color:e.grey500,'&[data-shrink="false"]':{top:5}},"& > div > input, & > div > select, & > div > div":{padding:"30px 14px 10px !important",height:"56px"},"& legend":{display:"none"},"& fieldset":{top:0}},customSelect:{"& > label":{top:23,left:0,color:e.palette.grey[500],'&[data-shrink="false"]':{top:5}},"& .MuiOutlinedInput-root":{height:"64px",paddingRight:"14px"},"& .MuiOutlinedInput-input":{padding:"30.5px 14px 11.5px !important",display:"flex",alignItems:"center"},"& legend":{display:"none"},"& fieldset":{top:0}},mainContent:{backgroundColor:e.palette.grey[100],width:"100%",minHeight:"calc(100vh - 88px)",flexGrow:1,padding:"20px",marginTop:"88px",marginRight:"20px",borderRadius:`${t}px`},menuCaption:{fontSize:"0.875rem",fontWeight:500,color:e.palette.grey[900],padding:"6px",textTransform:"capitalize",marginTop:"10px"},subMenuCaption:{fontSize:"0.6875rem",fontWeight:500,color:e.palette.text.secondary,textTransform:"capitalize"},commonAvatar:{cursor:"pointer",borderRadius:"8px"},smallAvatar:{width:"22px",height:"22px",fontSize:"1rem"},mediumAvatar:{width:"34px",height:"34px",fontSize:"1.2rem"},largeAvatar:{width:"44px",height:"44px",fontSize:"1.5rem"}}}function sH(e){return e}function twe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var nwe=800,iwe=16,rwe=Date.now;function owe(e){var t=0,n=0;return function(){var a=rwe(),u=iwe-(a-n);if(n=a,u>0){if(++t>=nwe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function swe(e){return function(){return e}}var awe=JE?function(e,t){return JE(e,"toString",{configurable:!0,enumerable:!1,value:swe(t),writable:!0})}:sH,lwe=owe(awe),v4=Math.max;function cwe(e,t,n){return t=v4(t===void 0?e.length-1:t,0),function(){for(var a=arguments,u=-1,f=v4(a.length-t,0),y=Array(f);++u<f;)y[u]=a[t+u];u=-1;for(var r=Array(t+1);++u<t;)r[u]=a[u];return r[t]=n(y),twe(e,this,r)}}function uwe(e,t){return lwe(cwe(e,t,sH),e+"")}function hwe(e,t,n){if(!ty(n))return!1;var a=typeof t;return(a=="number"?YC(n)&&Y6(t,n.length):a=="string"&&t in n)?WC(n[t],e):!1}function dwe(e){return uwe(function(t,n){var a=-1,u=n.length,f=u>1?n[u-1]:void 0,y=u>2?n[2]:void 0;for(f=e.length>3&&typeof f=="function"?(u--,f):void 0,y&&hwe(n[0],n[1],y)&&(f=u<3?void 0:f,u=1),t=Object(t);++a<u;){var r=n[a];r&&e(t,r,a,f)}return t})}function fwe(e){return function(t,n,a){for(var u=-1,f=Object(t),y=a(t),r=y.length;r--;){var S=y[++u];if(n(f[S],S,f)===!1)break}return t}}var pwe=fwe();function VP(e,t,n){(n!==void 0&&!WC(e[t],n)||n===void 0&&!(t in e))&&CO(e,t,n)}function mwe(e){return ey(e)&&YC(e)}function $P(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function gwe(e){return Pw(e,Dw(e))}function ywe(e,t,n,a,u,f,y){var r=$P(e,n),S=$P(t,n),A=y.get(S);if(A){VP(e,n,A);return}var R=f?f(r,S,n+"",e,t,y):void 0,O=R===void 0;if(O){var z=nv(S),N=!z&&AO(S),U=!z&&!N&&Q6(S);R=S,z||N||U?nv(r)?R=r:mwe(r)?R=PO(r):N?(O=!1,R=n$(S,!0)):U?(O=!1,R=a$(S,!0)):R=[]:gP(S)||yP(S)?(R=r,yP(r)?R=gwe(r):(!ty(r)||EO(r))&&(R=l$(S))):O=!1}O&&(y.set(S,R),u(R,S,a,f,y),y.delete(S)),VP(e,n,R)}function aH(e,t,n,a,u){e!==t&&pwe(t,function(f,y){if(u||(u=new gv),ty(f))ywe(e,t,y,n,aH,a,u);else{var r=a?a($P(e,y),f,y+"",e,t,u):void 0;r===void 0&&(r=f),VP(e,y,r)}},Dw)}var _we=dwe(function(e,t,n){aH(e,t,n)});function vwe(e){return{MuiChip:{defaultProps:{color:"primary",variant:"light"},styleOverrides:{root:{"&.MuiChip-deletable .MuiChip-deleteIcon":{color:"inherit"},variants:[{props:{variant:"light"},style:({ownerState:t})=>{const n=e.palette[t.color];return{...n&&{color:n.main,backgroundColor:n.light,...t.color==="error"&&{backgroundColor:Dr(n.light,.25)},...t.color==="success"&&{backgroundColor:Dr(n.light,.5)},...(t.color==="warning"||t.color==="success")&&{color:n.dark},"&.MuiChip-clickable":{"&:hover":{color:n.light,backgroundColor:n.dark}}}}}},{props:{variant:"outlined",color:"warning"},style:{borderColor:e.palette.warning.dark,color:e.palette.warning.dark}},{props:{variant:"outlined",color:"success"},style:{borderColor:e.palette.success.dark,color:e.palette.success.dark}}]}}}}}function xwe(e){return _we(vwe(e))}function bwe(e,t,n){const a=e.palette.grey[50],u=e.palette.secondary.light,f=e.palette.secondary.dark;return{MuiButton:{styleOverrides:{root:{fontWeight:500,borderRadius:"4px"}}},MuiCheckbox:{styleOverrides:{root:{"& + .MuiFormControlLabel-label":{marginTop:2}}}},MuiPaper:{defaultProps:{elevation:0},styleOverrides:{root:{backgroundImage:"none"},rounded:{borderRadius:`${t}px`}}},MuiCardHeader:{styleOverrides:{root:{color:e.palette.text.dark,padding:"24px"},title:{fontSize:"1.125rem"}}},MuiCardContent:{styleOverrides:{root:{padding:"24px"}}},MuiCardActions:{styleOverrides:{root:{padding:"24px"}}},MuiAlert:{styleOverrides:{root:{alignItems:"center"},outlined:{border:"1px dashed"}}},MuiListItemButton:{styleOverrides:{root:{color:e.palette.text.primary,paddingTop:"10px",paddingBottom:"10px","&.Mui-selected":{color:f,backgroundColor:u,"&:hover":{backgroundColor:u},"& .MuiListItemIcon-root":{color:f}},"&:hover":{backgroundColor:u,color:f,"& .MuiListItemIcon-root":{color:f}}}}},MuiListItemIcon:{styleOverrides:{root:{color:e.palette.text.primary,minWidth:"36px"}}},MuiListItemText:{styleOverrides:{primary:{color:e.palette.text.dark}}},MuiInputBase:{styleOverrides:{input:{color:e.palette.text.dark,"&::placeholder":{color:e.palette.text.secondary,fontSize:"0.875rem"}}}},MuiOutlinedInput:{styleOverrides:{root:{background:n?a:"transparent",borderRadius:`${t}px`,"& .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.grey[400]},"&:hover $notchedOutline":{borderColor:e.palette.primary.light},"&.MuiInputBase-multiline":{padding:1}},input:{fontWeight:500,background:n?a:"transparent",padding:"15.5px 14px",borderRadius:`${t}px`,"&.MuiInputBase-inputSizeSmall":{padding:"10px 14px","&.MuiInputBase-inputAdornedStart":{paddingLeft:0}}},inputAdornedStart:{paddingLeft:4},notchedOutline:{borderRadius:`${t}px`}}},MuiSlider:{styleOverrides:{root:{"&.Mui-disabled":{color:e.palette.grey[300]}},mark:{backgroundColor:e.palette.background.paper,width:"4px"},valueLabel:{color:e.palette.primary.light}}},MuiAutocomplete:{styleOverrides:{root:{"& .MuiAutocomplete-tag":{background:e.palette.secondary.light,borderRadius:4,color:e.palette.text.dark,".MuiChip-deleteIcon":{color:e.palette.secondary[200]}}},popper:{borderRadius:`${t}px`,boxShadow:"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)"}}},MuiDivider:{styleOverrides:{root:{borderColor:e.palette.divider}}},MuiSelect:{styleOverrides:{select:{"&:focus":{backgroundColor:"transparent"}}}},MuiAvatar:{styleOverrides:{root:{color:e.palette.primary.dark,background:e.palette.primary[200]}}},MuiTimelineContent:{styleOverrides:{root:{color:e.palette.text.dark,fontSize:"16px"}}},MuiTreeItem:{styleOverrides:{label:{marginTop:14,marginBottom:14}}},MuiTimelineDot:{styleOverrides:{root:{boxShadow:"none"}}},MuiInternalDateTimePickerTabs:{styleOverrides:{tabs:{backgroundColor:e.palette.primary.light,"& .MuiTabs-flexContainer":{borderColor:e.palette.primary[200]},"& .MuiTab-root":{color:e.palette.text.dark},"& .MuiTabs-indicator":{backgroundColor:e.palette.primary.dark},"& .Mui-selected":{color:e.palette.primary.dark}}}},MuiTabs:{styleOverrides:{flexContainer:{borderBottom:"1px solid",borderColor:e.palette.grey[200]}}},MuiDialog:{styleOverrides:{paper:{padding:"12px 0 12px 0"}}},MuiTableCell:{styleOverrides:{root:{borderColor:e.palette.grey[200],"&.MuiTableCell-head":{fontSize:"0.875rem",color:e.palette.grey[900],fontWeight:500}}}},MuiDateTimePickerToolbar:{styleOverrides:{timeDigitsContainer:{alignItems:"center"}}},MuiTooltip:{styleOverrides:{tooltip:{margin:0,lineHeight:1.4,color:e.palette.background.paper,background:e.palette.text.primary}}},MuiDialogTitle:{styleOverrides:{root:{fontSize:"1.25rem"}}},MuiPaginationItem:{styleOverrides:{root:{margin:"3px"}}},MuiDataGrid:{defaultProps:{rowHeight:54},styleOverrides:{root:{borderWidth:0,"& .MuiDataGrid-columnHeader--filledGroup":{borderBottomWidth:0},"& .MuiDataGrid-columnHeader--emptyGroup":{borderBottomWidth:0},"& .MuiFormControl-root>.MuiInputBase-root":{backgroundColor:`${e.palette.background.default} !important`,borderColor:`${e.palette.divider} !important`}},withBorderColor:{borderColor:e.palette.divider},toolbarContainer:{"& .MuiButton-root":{paddingLeft:"16px !important",paddingRight:"16px !important"}},columnHeader:{color:e.palette.grey[600],paddingLeft:24,paddingRight:24},footerContainer:{"&.MuiDataGrid-withBorderColor":{borderBottom:"none"}},columnHeaderCheckbox:{paddingLeft:0,paddingRight:0},cellCheckbox:{paddingLeft:0,paddingRight:0},cell:{borderWidth:1,paddingLeft:24,paddingRight:24,borderColor:e.palette.divider,"&.MuiDataGrid-cell--withRenderer > div ":{" > .high":{background:e.palette.success.light},"& > .medium":{background:e.palette.warning.light},"& > .low":{background:e.palette.error.light}}}}},...xwe(e)}}function wwe(e,t){const n=Dr(t,.24);return{z1:`0 1px 2px 0 ${n}`,z8:`0 8px 16px 0 ${n}`,z12:`0 12px 24px 0 ${n} 0 10px 20px 0 ${n}`,z16:`0 0 3px 0 ${n} 0 14px 28px -5px ${n}`,z20:`0 0 3px 0 ${n} 0 18px 36px -5px ${n}`,z24:`0 0 6px 0 ${n} 0 21px 44px 0 ${n}`,primary:`0px 12px 14px 0px ${Dr(e.palette.primary.main,.3)}`,secondary:`0px 12px 14px 0px ${Dr(e.palette.secondary.main,.3)}`,orange:`0px 12px 14px 0px ${Dr(e.palette.orange.main,.3)}`,success:`0px 12px 14px 0px ${Dr(e.palette.success.main,.3)}`,warning:`0px 12px 14px 0px ${Dr(e.palette.warning.main,.3)}`,error:`0px 12px 14px 0px ${Dr(e.palette.error.main,.3)}`}}function Swe(e,t){return wwe(t,t.palette.grey[900])}function lH({children:e}){const{borderRadius:t,fontFamily:n,mode:a,outlinedFilled:u,presetColor:f}=Sx(),y=ee.useMemo(()=>Q1e(a,f),[a,f]),r=ee.useMemo(()=>ewe(y,t,n),[y,t,n]),S=ee.useMemo(()=>Swe(a,y),[a,y]),A=ee.useMemo(()=>({direction:"ltr",palette:y.palette,mixins:{toolbar:{minHeight:"48px",padding:"16px","@media (min-width: 600px)":{minHeight:"48px"}}},typography:r,customShadows:S}),[y,S,r]),R=yw(A);return R.components=ee.useMemo(()=>bwe(R,t,u),[R,t,u]),te.jsx(Q2,{injectFirst:!0,children:te.jsxs(iY,{theme:R,children:[te.jsx(Vce,{enableColorScheme:!0}),e]})})}lH.propTypes={children:Ui.node};function Twe(){return te.jsx(lH,{children:te.jsx(oH,{children:te.jsx(te.Fragment,{children:te.jsx(X7,{router:n1e})})})})}window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function Ewe(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}var oL="persist:",cH="persist/FLUSH",sL="persist/REHYDRATE",uH="persist/PAUSE",hH="persist/PERSIST",dH="persist/PURGE",fH="persist/REGISTER",Cwe=-1;function gE(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gE=function(n){return typeof n}:gE=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gE(e)}function x4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function Awe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x4(n,!0).forEach(function(a){Mwe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x4(n).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Mwe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rwe(e,t,n,a){a.debug;var u=Awe({},n);return e&&gE(e)==="object"&&Object.keys(e).forEach(function(f){f!=="_persist"&&t[f]===n[f]&&(u[f]=e[f])}),u}function Iwe(e){var t=e.blacklist||null,n=e.whitelist||null,a=e.transforms||[],u=e.throttle||0,f="".concat(e.keyPrefix!==void 0?e.keyPrefix:oL).concat(e.key),y=e.storage,r;e.serialize===!1?r=function(ue){return ue}:typeof e.serialize=="function"?r=e.serialize:r=Pwe;var S=e.writeFailHandler||null,A={},R={},O=[],z=null,N=null,U=function(ue){Object.keys(ue).forEach(function(pe){W(pe)&&A[pe]!==ue[pe]&&O.indexOf(pe)===-1&&O.push(pe)}),Object.keys(A).forEach(function(pe){ue[pe]===void 0&&W(pe)&&O.indexOf(pe)===-1&&A[pe]!==void 0&&O.push(pe)}),z===null&&(z=setInterval(H,u)),A=ue};function H(){if(O.length===0){z&&clearInterval(z),z=null;return}var se=O.shift(),ue=a.reduce(function(pe,Ce){return Ce.in(pe,se,A)},A[se]);if(ue!==void 0)try{R[se]=r(ue)}catch(pe){console.error("redux-persist/createPersistoid: error serializing state",pe)}else delete R[se];O.length===0&&K()}function K(){Object.keys(R).forEach(function(se){A[se]===void 0&&delete R[se]}),N=y.setItem(f,r(R)).catch(re)}function W(se){return!(n&&n.indexOf(se)===-1&&se!=="_persist"||t&&t.indexOf(se)!==-1)}function re(se){S&&S(se)}var ne=function(){for(;O.length!==0;)H();return N||Promise.resolve()};return{update:U,flush:ne}}function Pwe(e){return JSON.stringify(e)}function Dwe(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:oL).concat(e.key),a=e.storage;e.debug;var u;return e.deserialize===!1?u=function(y){return y}:typeof e.deserialize=="function"?u=e.deserialize:u=Owe,a.getItem(n).then(function(f){if(f)try{var y={},r=u(f);return Object.keys(r).forEach(function(S){y[S]=t.reduceRight(function(A,R){return R.out(A,S,r)},u(r[S]))}),y}catch(S){throw S}else return})}function Owe(e){return JSON.parse(e)}function Lwe(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:oL).concat(e.key);return t.removeItem(n,kwe)}function kwe(e){}function b4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function fm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b4(n,!0).forEach(function(a){zwe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b4(n).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zwe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bwe(e,t){if(e==null)return{};var n=Fwe(e,t),a,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)a=f[u],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Fwe(e,t){if(e==null)return{};var n={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var Nwe=5e3;function jwe(e,t){var n=e.version!==void 0?e.version:Cwe;e.debug;var a=e.stateReconciler===void 0?Rwe:e.stateReconciler,u=e.getStoredState||Dwe,f=e.timeout!==void 0?e.timeout:Nwe,y=null,r=!1,S=!0,A=function(O){return O._persist.rehydrated&&y&&!S&&y.update(O),O};return function(R,O){var z=R||{},N=z._persist,U=Bwe(z,["_persist"]),H=U;if(O.type===hH){var K=!1,W=function(Le,qe){K||(O.rehydrate(e.key,Le,qe),K=!0)};if(f&&setTimeout(function(){!K&&W(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},f),S=!1,y||(y=Iwe(e)),N)return fm({},t(H,O),{_persist:N});if(typeof O.rehydrate!="function"||typeof O.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return O.register(e.key),u(e).then(function(Ce){var Le=e.migrate||function(qe,ye){return Promise.resolve(qe)};Le(Ce,n).then(function(qe){W(qe)},function(qe){W(void 0,qe)})},function(Ce){W(void 0,Ce)}),fm({},t(H,O),{_persist:{version:n,rehydrated:!1}})}else{if(O.type===dH)return r=!0,O.result(Lwe(e)),fm({},t(H,O),{_persist:N});if(O.type===cH)return O.result(y&&y.flush()),fm({},t(H,O),{_persist:N});if(O.type===uH)S=!0;else if(O.type===sL){if(r)return fm({},H,{_persist:fm({},N,{rehydrated:!0})});if(O.key===e.key){var re=t(H,O),ne=O.payload,se=a!==!1&&ne!==void 0?a(ne,R,re,e):re,ue=fm({},se,{_persist:fm({},N,{rehydrated:!0})});return A(ue)}}}if(!N)return t(R,O);var pe=t(H,O);return pe===H?R:A(fm({},pe,{_persist:N}))}}function w4(e){return $we(e)||Vwe(e)||Uwe()}function Uwe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Vwe(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function $we(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function S4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,a)}return n}function HP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S4(n,!0).forEach(function(a){Hwe(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4(n).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Hwe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pH={registry:[],bootstrapped:!1},Gwe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pH,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case fH:return HP({},t,{registry:[].concat(w4(t.registry),[n.key])});case sL:var a=t.registry.indexOf(n.key),u=w4(t.registry);return u.splice(a,1),HP({},t,{registry:u,bootstrapped:u.length===0});default:return t}};function qwe(e,t,n){var a=dO(Gwe,pH,void 0),u=function(S){a.dispatch({type:fH,key:S})},f=function(S,A,R){var O={type:sL,payload:A,err:R,key:S};e.dispatch(O),a.dispatch(O)},y=HP({},a,{purge:function(){var S=[];return e.dispatch({type:dH,result:function(R){S.push(R)}}),Promise.all(S)},flush:function(){var S=[];return e.dispatch({type:cH,result:function(R){S.push(R)}}),Promise.all(S)},pause:function(){e.dispatch({type:uH})},persist:function(){e.dispatch({type:hH,register:u,rehydrate:f})}});return y.persist(),y}var o1={},qT={},WT={},T4;function Wwe(){if(T4)return WT;T4=1,WT.__esModule=!0,WT.default=u;function e(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(r){return typeof r}:e=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(f)}function t(){}var n={getItem:t,setItem:t,removeItem:t};function a(f){if((typeof self>"u"?"undefined":e(self))!=="object"||!(f in self))return!1;try{var y=self[f],r="redux-persist ".concat(f," test");y.setItem(r,"test"),y.getItem(r),y.removeItem(r)}catch{return!1}return!0}function u(f){var y="".concat(f,"Storage");return a(y)?self[y]:n}return WT}var E4;function Xwe(){if(E4)return qT;E4=1,qT.__esModule=!0,qT.default=n;var e=t(Wwe());function t(a){return a&&a.__esModule?a:{default:a}}function n(a){var u=(0,e.default)(a);return{getItem:function(y){return new Promise(function(r,S){r(u.getItem(y))})},setItem:function(y,r){return new Promise(function(S,A){S(u.setItem(y,r))})},removeItem:function(y){return new Promise(function(r,S){r(u.removeItem(y))})}}}return qT}var C4;function Zwe(){if(C4)return o1;C4=1,o1.__esModule=!0,o1.default=void 0;var e=t(Xwe());function t(a){return a&&a.__esModule?a:{default:a}}var n=(0,e.default)("local");return o1.default=n,o1}var Ywe=Zwe();const Kwe=Im(Ywe),Jwe={key:"lockedByMe",storage:Kwe,whitelist:["token","user"]},Qwe=jwe(Jwe,cse),mH=Xoe({reducer:{auth:Qwe}}),eSe=qwe(mH);function yE(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yE=function(n){return typeof n}:yE=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yE(e)}function tSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nSe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function iSe(e,t,n){return t&&nSe(e.prototype,t),e}function rSe(e,t){return t&&(yE(t)==="object"||typeof t=="function")?t:_E(e)}function GP(e){return GP=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},GP(e)}function _E(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qP(e,t)}function qP(e,t){return qP=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},qP(e,t)}function vE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gH=function(e){oSe(t,e);function t(){var n,a;tSe(this,t);for(var u=arguments.length,f=new Array(u),y=0;y<u;y++)f[y]=arguments[y];return a=rSe(this,(n=GP(t)).call.apply(n,[this].concat(f))),vE(_E(a),"state",{bootstrapped:!1}),vE(_E(a),"_unsubscribe",void 0),vE(_E(a),"handlePersistorState",function(){var r=a.props.persistor,S=r.getState(),A=S.bootstrapped;A&&(a.props.onBeforeLift?Promise.resolve(a.props.onBeforeLift()).finally(function(){return a.setState({bootstrapped:!0})}):a.setState({bootstrapped:!0}),a._unsubscribe&&a._unsubscribe())}),a}return iSe(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(ee.PureComponent);vE(gH,"defaultProps",{children:null,loading:null});const sSe=document.getElementById("root"),aSe=jq.createRoot(sSe);aSe.render(te.jsx(KV,{children:te.jsx(yoe,{store:mH,children:te.jsx(gH,{loading:null,persistor:eSe,children:te.jsx(age,{maxSnack:3,children:te.jsx(Twe,{})})})})}));Ewe();export{Pq as $,Xre as A,fr as B,Mn as C,Pd as D,si as E,$_ as F,gu as G,Bn as H,T1 as I,er as J,Tr as K,Pg as L,Bg as M,RI as N,N_ as O,Fr as P,Wf as Q,kc as R,sc as S,Ii as T,_x as U,cc as V,fU as W,Dr as X,la as Y,toe as Z,Ui as _,Zg as a,Ch as a0,J4 as a1,pSe as a2,PY as a3,Vg as a4,AF as a5,ww as a6,IC as a7,wO as a8,K$ as b,xoe as c,Soe as d,y$ as e,BO as f,mm as g,B6 as h,J_ as i,te as j,rL as k,F2 as l,RC as m,xD as n,Upe as o,mSe as p,Ose as q,ee as r,dSe as s,WE as t,xs as u,or as v,tr as w,nr as x,yx as y,bD as z};
