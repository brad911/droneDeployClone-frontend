const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-Bdg7X2lo.js","assets/VisibilityOff-CsC9kDpJ.js","assets/Register-DASAJdFm.js","assets/ResetPassword-cSwxWodM.js"])))=>i.map(i=>d[i]);
var dle=Object.defineProperty;var hle=(e,t,n)=>t in e?dle(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Or=(e,t,n)=>hle(e,typeof t!="symbol"?t+"":t,n);function fle(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(r,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function Ls(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ple(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var XI={exports:{}},Qw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gU;function mle(){if(gU)return Qw;gU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var i in s)i!=="key"&&(c[i]=s[i])}else c=s;return s=c.ref,{$$typeof:e,type:r,key:d,ref:s!==void 0?s:null,props:c}}return Qw.Fragment=t,Qw.jsx=n,Qw.jsxs=n,Qw}var yU;function gle(){return yU||(yU=1,XI.exports=mle()),XI.exports}var z=gle(),ZI={exports:{}},Jw={},KI={exports:{}},QI={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vU;function yle(){return vU||(vU=1,function(e){function t(_e,Pe){var We=_e.length;_e.push(Pe);e:for(;0<We;){var Fe=We-1>>>1,Ce=_e[Fe];if(0<s(Ce,Pe))_e[Fe]=Pe,_e[We]=Ce,We=Fe;else break e}}function n(_e){return _e.length===0?null:_e[0]}function r(_e){if(_e.length===0)return null;var Pe=_e[0],We=_e.pop();if(We!==Pe){_e[0]=We;e:for(var Fe=0,Ce=_e.length,He=Ce>>>1;Fe<He;){var dt=2*(Fe+1)-1,gt=_e[dt],Nt=dt+1,wt=_e[Nt];if(0>s(gt,We))Nt<Ce&&0>s(wt,gt)?(_e[Fe]=wt,_e[Nt]=We,Fe=Nt):(_e[Fe]=gt,_e[dt]=We,Fe=dt);else if(Nt<Ce&&0>s(wt,We))_e[Fe]=wt,_e[Nt]=We,Fe=Nt;else break e}}return Pe}function s(_e,Pe){var We=_e.sortIndex-Pe.sortIndex;return We!==0?We:_e.id-Pe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,i=d.now();e.unstable_now=function(){return d.now()-i}}var m=[],x=[],T=1,C=null,A=3,I=!1,k=!1,B=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function X(_e){for(var Pe=n(x);Pe!==null;){if(Pe.callback===null)r(x);else if(Pe.startTime<=_e)r(x),Pe.sortIndex=Pe.expirationTime,t(m,Pe);else break;Pe=n(x)}}function Q(_e){if(B=!1,X(_e),!k)if(n(m)!==null)k=!0,ee||(ee=!0,we());else{var Pe=n(x);Pe!==null&&Ae(Q,Pe.startTime-_e)}}var ee=!1,ce=-1,fe=5,ue=-1;function ae(){return j?!0:!(e.unstable_now()-ue<fe)}function xe(){if(j=!1,ee){var _e=e.unstable_now();ue=_e;var Pe=!0;try{e:{k=!1,B&&(B=!1,H(ce),ce=-1),I=!0;var We=A;try{t:{for(X(_e),C=n(m);C!==null&&!(C.expirationTime>_e&&ae());){var Fe=C.callback;if(typeof Fe=="function"){C.callback=null,A=C.priorityLevel;var Ce=Fe(C.expirationTime<=_e);if(_e=e.unstable_now(),typeof Ce=="function"){C.callback=Ce,X(_e),Pe=!0;break t}C===n(m)&&r(m),X(_e)}else r(m);C=n(m)}if(C!==null)Pe=!0;else{var He=n(x);He!==null&&Ae(Q,He.startTime-_e),Pe=!1}}break e}finally{C=null,A=We,I=!1}Pe=void 0}}finally{Pe?we():ee=!1}}}var we;if(typeof G=="function")we=function(){G(xe)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Se=Me.port2;Me.port1.onmessage=xe,we=function(){Se.postMessage(null)}}else we=function(){V(xe,0)};function Ae(_e,Pe){ce=V(function(){_e(e.unstable_now())},Pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_e){_e.callback=null},e.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<_e?Math.floor(1e3/_e):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(_e){switch(A){case 1:case 2:case 3:var Pe=3;break;default:Pe=A}var We=A;A=Pe;try{return _e()}finally{A=We}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(_e,Pe){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var We=A;A=_e;try{return Pe()}finally{A=We}},e.unstable_scheduleCallback=function(_e,Pe,We){var Fe=e.unstable_now();switch(typeof We=="object"&&We!==null?(We=We.delay,We=typeof We=="number"&&0<We?Fe+We:Fe):We=Fe,_e){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=We+Ce,_e={id:T++,callback:Pe,priorityLevel:_e,startTime:We,expirationTime:Ce,sortIndex:-1},We>Fe?(_e.sortIndex=We,t(x,_e),n(m)===null&&_e===n(x)&&(B?(H(ce),ce=-1):B=!0,Ae(Q,We-Fe))):(_e.sortIndex=Ce,t(m,_e),k||I||(k=!0,ee||(ee=!0,we()))),_e},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(_e){var Pe=A;return function(){var We=A;A=Pe;try{return _e.apply(this,arguments)}finally{A=We}}}}(QI)),QI}var _U;function vle(){return _U||(_U=1,KI.exports=yle()),KI.exports}var JI={exports:{}},oo={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xU;function _le(){if(xU)return oo;xU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.iterator;function A(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=C&&Ce[C]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,B={};function j(Ce,He,dt){this.props=Ce,this.context=He,this.refs=B,this.updater=dt||I}j.prototype.isReactComponent={},j.prototype.setState=function(Ce,He){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,He,"setState")},j.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function V(){}V.prototype=j.prototype;function H(Ce,He,dt){this.props=Ce,this.context=He,this.refs=B,this.updater=dt||I}var G=H.prototype=new V;G.constructor=H,k(G,j.prototype),G.isPureReactComponent=!0;var X=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},ee=Object.prototype.hasOwnProperty;function ce(Ce,He,dt,gt,Nt,wt){return dt=wt.ref,{$$typeof:e,type:Ce,key:He,ref:dt!==void 0?dt:null,props:wt}}function fe(Ce,He){return ce(Ce.type,He,void 0,void 0,void 0,Ce.props)}function ue(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===e}function ae(Ce){var He={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(dt){return He[dt]})}var xe=/\/+/g;function we(Ce,He){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?ae(""+Ce.key):He.toString(36)}function Me(){}function Se(Ce){switch(Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason;default:switch(typeof Ce.status=="string"?Ce.then(Me,Me):(Ce.status="pending",Ce.then(function(He){Ce.status==="pending"&&(Ce.status="fulfilled",Ce.value=He)},function(He){Ce.status==="pending"&&(Ce.status="rejected",Ce.reason=He)})),Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason}}throw Ce}function Ae(Ce,He,dt,gt,Nt){var wt=typeof Ce;(wt==="undefined"||wt==="boolean")&&(Ce=null);var ot=!1;if(Ce===null)ot=!0;else switch(wt){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(Ce.$$typeof){case e:case t:ot=!0;break;case T:return ot=Ce._init,Ae(ot(Ce._payload),He,dt,gt,Nt)}}if(ot)return Nt=Nt(Ce),ot=gt===""?"."+we(Ce,0):gt,X(Nt)?(dt="",ot!=null&&(dt=ot.replace(xe,"$&/")+"/"),Ae(Nt,He,dt,"",function(Dt){return Dt})):Nt!=null&&(ue(Nt)&&(Nt=fe(Nt,dt+(Nt.key==null||Ce&&Ce.key===Nt.key?"":(""+Nt.key).replace(xe,"$&/")+"/")+ot)),He.push(Nt)),1;ot=0;var st=gt===""?".":gt+":";if(X(Ce))for(var St=0;St<Ce.length;St++)gt=Ce[St],wt=st+we(gt,St),ot+=Ae(gt,He,dt,wt,Nt);else if(St=A(Ce),typeof St=="function")for(Ce=St.call(Ce),St=0;!(gt=Ce.next()).done;)gt=gt.value,wt=st+we(gt,St++),ot+=Ae(gt,He,dt,wt,Nt);else if(wt==="object"){if(typeof Ce.then=="function")return Ae(Se(Ce),He,dt,gt,Nt);throw He=String(Ce),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.")}return ot}function _e(Ce,He,dt){if(Ce==null)return Ce;var gt=[],Nt=0;return Ae(Ce,gt,"","",function(wt){return He.call(dt,wt,Nt++)}),gt}function Pe(Ce){if(Ce._status===-1){var He=Ce._result;He=He(),He.then(function(dt){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=dt)},function(dt){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=dt)}),Ce._status===-1&&(Ce._status=0,Ce._result=He)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var We=typeof reportError=="function"?reportError:function(Ce){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var He=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ce=="object"&&Ce!==null&&typeof Ce.message=="string"?String(Ce.message):String(Ce),error:Ce});if(!window.dispatchEvent(He))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ce);return}console.error(Ce)};function Fe(){}return oo.Children={map:_e,forEach:function(Ce,He,dt){_e(Ce,function(){He.apply(this,arguments)},dt)},count:function(Ce){var He=0;return _e(Ce,function(){He++}),He},toArray:function(Ce){return _e(Ce,function(He){return He})||[]},only:function(Ce){if(!ue(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}},oo.Component=j,oo.Fragment=n,oo.Profiler=s,oo.PureComponent=H,oo.StrictMode=r,oo.Suspense=m,oo.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,oo.__COMPILER_RUNTIME={__proto__:null,c:function(Ce){return Q.H.useMemoCache(Ce)}},oo.cache=function(Ce){return function(){return Ce.apply(null,arguments)}},oo.cloneElement=function(Ce,He,dt){if(Ce==null)throw Error("The argument must be a React element, but you passed "+Ce+".");var gt=k({},Ce.props),Nt=Ce.key,wt=void 0;if(He!=null)for(ot in He.ref!==void 0&&(wt=void 0),He.key!==void 0&&(Nt=""+He.key),He)!ee.call(He,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&He.ref===void 0||(gt[ot]=He[ot]);var ot=arguments.length-2;if(ot===1)gt.children=dt;else if(1<ot){for(var st=Array(ot),St=0;St<ot;St++)st[St]=arguments[St+2];gt.children=st}return ce(Ce.type,Nt,void 0,void 0,wt,gt)},oo.createContext=function(Ce){return Ce={$$typeof:d,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null},Ce.Provider=Ce,Ce.Consumer={$$typeof:c,_context:Ce},Ce},oo.createElement=function(Ce,He,dt){var gt,Nt={},wt=null;if(He!=null)for(gt in He.key!==void 0&&(wt=""+He.key),He)ee.call(He,gt)&&gt!=="key"&&gt!=="__self"&&gt!=="__source"&&(Nt[gt]=He[gt]);var ot=arguments.length-2;if(ot===1)Nt.children=dt;else if(1<ot){for(var st=Array(ot),St=0;St<ot;St++)st[St]=arguments[St+2];Nt.children=st}if(Ce&&Ce.defaultProps)for(gt in ot=Ce.defaultProps,ot)Nt[gt]===void 0&&(Nt[gt]=ot[gt]);return ce(Ce,wt,void 0,void 0,null,Nt)},oo.createRef=function(){return{current:null}},oo.forwardRef=function(Ce){return{$$typeof:i,render:Ce}},oo.isValidElement=ue,oo.lazy=function(Ce){return{$$typeof:T,_payload:{_status:-1,_result:Ce},_init:Pe}},oo.memo=function(Ce,He){return{$$typeof:x,type:Ce,compare:He===void 0?null:He}},oo.startTransition=function(Ce){var He=Q.T,dt={};Q.T=dt;try{var gt=Ce(),Nt=Q.S;Nt!==null&&Nt(dt,gt),typeof gt=="object"&&gt!==null&&typeof gt.then=="function"&&gt.then(Fe,We)}catch(wt){We(wt)}finally{Q.T=He}},oo.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},oo.use=function(Ce){return Q.H.use(Ce)},oo.useActionState=function(Ce,He,dt){return Q.H.useActionState(Ce,He,dt)},oo.useCallback=function(Ce,He){return Q.H.useCallback(Ce,He)},oo.useContext=function(Ce){return Q.H.useContext(Ce)},oo.useDebugValue=function(){},oo.useDeferredValue=function(Ce,He){return Q.H.useDeferredValue(Ce,He)},oo.useEffect=function(Ce,He,dt){var gt=Q.H;if(typeof dt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return gt.useEffect(Ce,He)},oo.useId=function(){return Q.H.useId()},oo.useImperativeHandle=function(Ce,He,dt){return Q.H.useImperativeHandle(Ce,He,dt)},oo.useInsertionEffect=function(Ce,He){return Q.H.useInsertionEffect(Ce,He)},oo.useLayoutEffect=function(Ce,He){return Q.H.useLayoutEffect(Ce,He)},oo.useMemo=function(Ce,He){return Q.H.useMemo(Ce,He)},oo.useOptimistic=function(Ce,He){return Q.H.useOptimistic(Ce,He)},oo.useReducer=function(Ce,He,dt){return Q.H.useReducer(Ce,He,dt)},oo.useRef=function(Ce){return Q.H.useRef(Ce)},oo.useState=function(Ce){return Q.H.useState(Ce)},oo.useSyncExternalStore=function(Ce,He,dt){return Q.H.useSyncExternalStore(Ce,He,dt)},oo.useTransition=function(){return Q.H.useTransition()},oo.version="19.1.0",oo}var bU;function Fh(){return bU||(bU=1,JI.exports=_le()),JI.exports}var ek={exports:{}},fc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wU;function xle(){if(wU)return fc;wU=1;var e=Fh();function t(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)x+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(m,x,T){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:C==null?null:""+C,children:m,containerInfo:x,implementation:T}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function i(m,x){if(m==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return fc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,fc.createPortal=function(m,x){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return c(m,x,null,T)},fc.flushSync=function(m){var x=d.T,T=r.p;try{if(d.T=null,r.p=2,m)return m()}finally{d.T=x,r.p=T,r.d.f()}},fc.preconnect=function(m,x){typeof m=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(m,x))},fc.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},fc.preinit=function(m,x){if(typeof m=="string"&&x&&typeof x.as=="string"){var T=x.as,C=i(T,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,I=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;T==="style"?r.d.S(m,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:C,integrity:A,fetchPriority:I}):T==="script"&&r.d.X(m,{crossOrigin:C,integrity:A,fetchPriority:I,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},fc.preinitModule=function(m,x){if(typeof m=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var T=i(x.as,x.crossOrigin);r.d.M(m,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(m)},fc.preload=function(m,x){if(typeof m=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var T=x.as,C=i(T,x.crossOrigin);r.d.L(m,T,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},fc.preloadModule=function(m,x){if(typeof m=="string")if(x){var T=i(x.as,x.crossOrigin);r.d.m(m,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(m)},fc.requestFormReset=function(m){r.d.r(m)},fc.unstable_batchedUpdates=function(m,x){return m(x)},fc.useFormState=function(m,x,T){return d.H.useFormState(m,x,T)},fc.useFormStatus=function(){return d.H.useHostTransitionStatus()},fc.version="19.1.0",fc}var SU;function BX(){if(SU)return ek.exports;SU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ek.exports=xle(),ek.exports}var TU;function ble(){if(TU)return Jw;TU=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=vle(),t=Fh(),n=BX();function r(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var M=2;M<arguments.length;M++)_+="&args[]="+encodeURIComponent(arguments[M])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function c(p){var _=p,M=p;if(p.alternate)for(;_.return;)_=_.return;else{p=_;do _=p,(_.flags&4098)!==0&&(M=_.return),p=_.return;while(p)}return _.tag===3?M:null}function d(p){if(p.tag===13){var _=p.memoizedState;if(_===null&&(p=p.alternate,p!==null&&(_=p.memoizedState)),_!==null)return _.dehydrated}return null}function i(p){if(c(p)!==p)throw Error(r(188))}function m(p){var _=p.alternate;if(!_){if(_=c(p),_===null)throw Error(r(188));return _!==p?null:p}for(var M=p,F=_;;){var K=M.return;if(K===null)break;var se=K.alternate;if(se===null){if(F=K.return,F!==null){M=F;continue}break}if(K.child===se.child){for(se=K.child;se;){if(se===M)return i(K),p;if(se===F)return i(K),_;se=se.sibling}throw Error(r(188))}if(M.return!==F.return)M=K,F=se;else{for(var De=!1,Xe=K.child;Xe;){if(Xe===M){De=!0,M=K,F=se;break}if(Xe===F){De=!0,F=K,M=se;break}Xe=Xe.sibling}if(!De){for(Xe=se.child;Xe;){if(Xe===M){De=!0,M=se,F=K;break}if(Xe===F){De=!0,F=se,M=K;break}Xe=Xe.sibling}if(!De)throw Error(r(189))}}if(M.alternate!==F)throw Error(r(190))}if(M.tag!==3)throw Error(r(188));return M.stateNode.current===M?p:_}function x(p){var _=p.tag;if(_===5||_===26||_===27||_===6)return p;for(p=p.child;p!==null;){if(_=x(p),_!==null)return _;p=p.sibling}return null}var T=Object.assign,C=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),G=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function we(p){return p===null||typeof p!="object"?null:(p=xe&&p[xe]||p["@@iterator"],typeof p=="function"?p:null)}var Me=Symbol.for("react.client.reference");function Se(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===Me?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case k:return"Fragment";case j:return"Profiler";case B:return"StrictMode";case Q:return"Suspense";case ee:return"SuspenseList";case ue:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case I:return"Portal";case G:return(p.displayName||"Context")+".Provider";case H:return(p._context.displayName||"Context")+".Consumer";case X:var _=p.render;return p=p.displayName,p||(p=_.displayName||_.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case ce:return _=p.displayName||null,_!==null?_:Se(p.type)||"Memo";case fe:_=p._payload,p=p._init;try{return Se(p(_))}catch{}}return null}var Ae=Array.isArray,_e=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,We={pending:!1,data:null,method:null,action:null},Fe=[],Ce=-1;function He(p){return{current:p}}function dt(p){0>Ce||(p.current=Fe[Ce],Fe[Ce]=null,Ce--)}function gt(p,_){Ce++,Fe[Ce]=p.current,p.current=_}var Nt=He(null),wt=He(null),ot=He(null),st=He(null);function St(p,_){switch(gt(ot,_),gt(wt,p),gt(Nt,null),_.nodeType){case 9:case 11:p=(p=_.documentElement)&&(p=p.namespaceURI)?Bx(p):0;break;default:if(p=_.tagName,_=_.namespaceURI)_=Bx(_),p=jx(_,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}dt(Nt),gt(Nt,p)}function Dt(){dt(Nt),dt(wt),dt(ot)}function Et(p){p.memoizedState!==null&&gt(st,p);var _=Nt.current,M=jx(_,p.type);_!==M&&(gt(wt,p),gt(Nt,M))}function yt(p){wt.current===p&&(dt(Nt),dt(wt)),st.current===p&&(dt(st),Uy._currentValue=We)}var Lt=Object.prototype.hasOwnProperty,Ct=e.unstable_scheduleCallback,Wt=e.unstable_cancelCallback,fn=e.unstable_shouldYield,Zt=e.unstable_requestPaint,Ut=e.unstable_now,kn=e.unstable_getCurrentPriorityLevel,Bn=e.unstable_ImmediatePriority,bn=e.unstable_UserBlockingPriority,Nn=e.unstable_NormalPriority,ft=e.unstable_LowPriority,vn=e.unstable_IdlePriority,Ot=e.log,tn=e.unstable_setDisableYieldValue,Rn=null,Hn=null;function mr(p){if(typeof Ot=="function"&&tn(p),Hn&&typeof Hn.setStrictMode=="function")try{Hn.setStrictMode(Rn,p)}catch{}}var Xn=Math.clz32?Math.clz32:Fr,or=Math.log,Mn=Math.LN2;function Fr(p){return p>>>=0,p===0?32:31-(or(p)/Mn|0)|0}var Cr=256,xr=4194304;function ir(p){var _=p&42;if(_!==0)return _;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Yr(p,_,M){var F=p.pendingLanes;if(F===0)return 0;var K=0,se=p.suspendedLanes,De=p.pingedLanes;p=p.warmLanes;var Xe=F&134217727;return Xe!==0?(F=Xe&~se,F!==0?K=ir(F):(De&=Xe,De!==0?K=ir(De):M||(M=Xe&~p,M!==0&&(K=ir(M))))):(Xe=F&~se,Xe!==0?K=ir(Xe):De!==0?K=ir(De):M||(M=F&~p,M!==0&&(K=ir(M)))),K===0?0:_!==0&&_!==K&&(_&se)===0&&(se=K&-K,M=_&-_,se>=M||se===32&&(M&4194048)!==0)?_:K}function Sr(p,_){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&_)===0}function Dr(p,_){switch(p){case 1:case 2:case 4:case 8:case 64:return _+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ki(){var p=Cr;return Cr<<=1,(Cr&4194048)===0&&(Cr=256),p}function ns(){var p=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),p}function Vo(p){for(var _=[],M=0;31>M;M++)_.push(p);return _}function zo(p,_){p.pendingLanes|=_,_!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function Rl(p,_,M,F,K,se){var De=p.pendingLanes;p.pendingLanes=M,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=M,p.entangledLanes&=M,p.errorRecoveryDisabledLanes&=M,p.shellSuspendCounter=0;var Xe=p.entanglements,xt=p.expirationTimes,sn=p.hiddenUpdates;for(M=De&~M;0<M;){var On=31-Xn(M),Yn=1<<On;Xe[On]=0,xt[On]=-1;var hn=sn[On];if(hn!==null)for(sn[On]=null,On=0;On<hn.length;On++){var gn=hn[On];gn!==null&&(gn.lane&=-536870913)}M&=~Yn}F!==0&&ma(p,F,0),se!==0&&K===0&&p.tag!==0&&(p.suspendedLanes|=se&~(De&~_))}function ma(p,_,M){p.pendingLanes|=_,p.suspendedLanes&=~_;var F=31-Xn(_);p.entangledLanes|=_,p.entanglements[F]=p.entanglements[F]|1073741824|M&4194090}function mn(p,_){var M=p.entangledLanes|=_;for(p=p.entanglements;M;){var F=31-Xn(M),K=1<<F;K&_|p[F]&_&&(p[F]|=_),M&=~K}}function ea(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function Pr(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function ke(){var p=Pe.p;return p!==0?p:(p=window.event,p===void 0?32:Hy(p.type))}function ie(p,_){var M=Pe.p;try{return Pe.p=p,_()}finally{Pe.p=M}}var le=Math.random().toString(36).slice(2),Te="__reactFiber$"+le,ze="__reactProps$"+le,$e="__reactContainer$"+le,Qe="__reactEvents$"+le,Ze="__reactListeners$"+le,et="__reactHandles$"+le,ct="__reactResources$"+le,vt="__reactMarker$"+le;function lt(p){delete p[Te],delete p[ze],delete p[Qe],delete p[Ze],delete p[et]}function Ht(p){var _=p[Te];if(_)return _;for(var M=p.parentNode;M;){if(_=M[$e]||M[Te]){if(M=_.alternate,_.child!==null||M!==null&&M.child!==null)for(p=$p(p);p!==null;){if(M=p[Te])return M;p=$p(p)}return _}p=M,M=p.parentNode}return null}function dn(p){if(p=p[Te]||p[$e]){var _=p.tag;if(_===5||_===6||_===13||_===26||_===27||_===3)return p}return null}function wn(p){var _=p.tag;if(_===5||_===26||_===27||_===6)return p.stateNode;throw Error(r(33))}function sr(p){var _=p[ct];return _||(_=p[ct]={hoistableStyles:new Map,hoistableScripts:new Map}),_}function nr(p){p[vt]=!0}var rr=new Set,kr={};function Si(p,_){Ir(p,_),Ir(p+"Capture",_)}function Ir(p,_){for(kr[p]=_,p=0;p<_.length;p++)rr.add(_[p])}var ui=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ti={},Ti={};function ji(p){return Lt.call(Ti,p)?!0:Lt.call(ti,p)?!1:ui.test(p)?Ti[p]=!0:(ti[p]=!0,!1)}function Xi(p,_,M){if(ji(_))if(M===null)p.removeAttribute(_);else{switch(typeof M){case"undefined":case"function":case"symbol":p.removeAttribute(_);return;case"boolean":var F=_.toLowerCase().slice(0,5);if(F!=="data-"&&F!=="aria-"){p.removeAttribute(_);return}}p.setAttribute(_,""+M)}}function Mo(p,_,M){if(M===null)p.removeAttribute(_);else{switch(typeof M){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(_);return}p.setAttribute(_,""+M)}}function Jr(p,_,M,F){if(F===null)p.removeAttribute(M);else{switch(typeof F){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(M);return}p.setAttributeNS(_,M,""+F)}}var go,$s;function $o(p){if(go===void 0)try{throw Error()}catch(M){var _=M.stack.trim().match(/\n( *(at )?)/);go=_&&_[1]||"",$s=-1<M.stack.indexOf(`
    at`)?" (<anonymous>)":-1<M.stack.indexOf("@")?"@unknown:0:0":""}return`
`+go+p+$s}var fs=!1;function Oi(p,_){if(!p||fs)return"";fs=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var F={DetermineComponentFrameRoot:function(){try{if(_){var Yn=function(){throw Error()};if(Object.defineProperty(Yn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yn,[])}catch(gn){var hn=gn}Reflect.construct(p,[],Yn)}else{try{Yn.call()}catch(gn){hn=gn}p.call(Yn.prototype)}}else{try{throw Error()}catch(gn){hn=gn}(Yn=p())&&typeof Yn.catch=="function"&&Yn.catch(function(){})}}catch(gn){if(gn&&hn&&typeof gn.stack=="string")return[gn.stack,hn.stack]}return[null,null]}};F.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var K=Object.getOwnPropertyDescriptor(F.DetermineComponentFrameRoot,"name");K&&K.configurable&&Object.defineProperty(F.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=F.DetermineComponentFrameRoot(),De=se[0],Xe=se[1];if(De&&Xe){var xt=De.split(`
`),sn=Xe.split(`
`);for(K=F=0;F<xt.length&&!xt[F].includes("DetermineComponentFrameRoot");)F++;for(;K<sn.length&&!sn[K].includes("DetermineComponentFrameRoot");)K++;if(F===xt.length||K===sn.length)for(F=xt.length-1,K=sn.length-1;1<=F&&0<=K&&xt[F]!==sn[K];)K--;for(;1<=F&&0<=K;F--,K--)if(xt[F]!==sn[K]){if(F!==1||K!==1)do if(F--,K--,0>K||xt[F]!==sn[K]){var On=`
`+xt[F].replace(" at new "," at ");return p.displayName&&On.includes("<anonymous>")&&(On=On.replace("<anonymous>",p.displayName)),On}while(1<=F&&0<=K);break}}}finally{fs=!1,Error.prepareStackTrace=M}return(M=p?p.displayName||p.name:"")?$o(M):""}function rs(p){switch(p.tag){case 26:case 27:case 5:return $o(p.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 15:return Oi(p.type,!1);case 11:return Oi(p.type.render,!1);case 1:return Oi(p.type,!0);case 31:return $o("Activity");default:return""}}function ol(p){try{var _="";do _+=rs(p),p=p.return;while(p);return _}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}function zs(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function op(p){var _=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function sp(p){var _=op(p)?"checked":"value",M=Object.getOwnPropertyDescriptor(p.constructor.prototype,_),F=""+p[_];if(!p.hasOwnProperty(_)&&typeof M<"u"&&typeof M.get=="function"&&typeof M.set=="function"){var K=M.get,se=M.set;return Object.defineProperty(p,_,{configurable:!0,get:function(){return K.call(this)},set:function(De){F=""+De,se.call(this,De)}}),Object.defineProperty(p,_,{enumerable:M.enumerable}),{getValue:function(){return F},setValue:function(De){F=""+De},stopTracking:function(){p._valueTracker=null,delete p[_]}}}}function Vh(p){p._valueTracker||(p._valueTracker=sp(p))}function ap(p){if(!p)return!1;var _=p._valueTracker;if(!_)return!0;var M=_.getValue(),F="";return p&&(F=op(p)?p.checked?"true":"false":p.value),p=F,p!==M?(_.setValue(p),!0):!1}function ou(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var Em=/[\n"\\]/g;function sl(p){return p.replace(Em,function(_){return"\\"+_.charCodeAt(0).toString(16)+" "})}function Dl(p,_,M,F,K,se,De,Xe){p.name="",De!=null&&typeof De!="function"&&typeof De!="symbol"&&typeof De!="boolean"?p.type=De:p.removeAttribute("type"),_!=null?De==="number"?(_===0&&p.value===""||p.value!=_)&&(p.value=""+zs(_)):p.value!==""+zs(_)&&(p.value=""+zs(_)):De!=="submit"&&De!=="reset"||p.removeAttribute("value"),_!=null?Ra(p,De,zs(_)):M!=null?Ra(p,De,zs(M)):F!=null&&p.removeAttribute("value"),K==null&&se!=null&&(p.defaultChecked=!!se),K!=null&&(p.checked=K&&typeof K!="function"&&typeof K!="symbol"),Xe!=null&&typeof Xe!="function"&&typeof Xe!="symbol"&&typeof Xe!="boolean"?p.name=""+zs(Xe):p.removeAttribute("name")}function oy(p,_,M,F,K,se,De,Xe){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(p.type=se),_!=null||M!=null){if(!(se!=="submit"&&se!=="reset"||_!=null))return;M=M!=null?""+zs(M):"",_=_!=null?""+zs(_):M,Xe||_===p.value||(p.value=_),p.defaultValue=_}F=F??K,F=typeof F!="function"&&typeof F!="symbol"&&!!F,p.checked=Xe?p.checked:!!F,p.defaultChecked=!!F,De!=null&&typeof De!="function"&&typeof De!="symbol"&&typeof De!="boolean"&&(p.name=De)}function Ra(p,_,M){_==="number"&&ou(p.ownerDocument)===p||p.defaultValue===""+M||(p.defaultValue=""+M)}function Da(p,_,M,F){if(p=p.options,_){_={};for(var K=0;K<M.length;K++)_["$"+M[K]]=!0;for(M=0;M<p.length;M++)K=_.hasOwnProperty("$"+p[M].value),p[M].selected!==K&&(p[M].selected=K),K&&F&&(p[M].defaultSelected=!0)}else{for(M=""+zs(M),_=null,K=0;K<p.length;K++){if(p[K].value===M){p[K].selected=!0,F&&(p[K].defaultSelected=!0);return}_!==null||p[K].disabled||(_=p[K])}_!==null&&(_.selected=!0)}}function su(p,_,M){if(_!=null&&(_=""+zs(_),_!==p.value&&(p.value=_),M==null)){p.defaultValue!==_&&(p.defaultValue=_);return}p.defaultValue=M!=null?""+zs(M):""}function Gl(p,_,M,F){if(_==null){if(F!=null){if(M!=null)throw Error(r(92));if(Ae(F)){if(1<F.length)throw Error(r(93));F=F[0]}M=F}M==null&&(M=""),_=M}M=zs(_),p.defaultValue=M,F=p.textContent,F===M&&F!==""&&F!==null&&(p.value=F)}function al(p,_){if(_){var M=p.firstChild;if(M&&M===p.lastChild&&M.nodeType===3){M.nodeValue=_;return}}p.textContent=_}var Yl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lp(p,_,M){var F=_.indexOf("--")===0;M==null||typeof M=="boolean"||M===""?F?p.setProperty(_,""):_==="float"?p.cssFloat="":p[_]="":F?p.setProperty(_,M):typeof M!="number"||M===0||Yl.has(_)?_==="float"?p.cssFloat=M:p[_]=(""+M).trim():p[_]=M+"px"}function sy(p,_,M){if(_!=null&&typeof _!="object")throw Error(r(62));if(p=p.style,M!=null){for(var F in M)!M.hasOwnProperty(F)||_!=null&&_.hasOwnProperty(F)||(F.indexOf("--")===0?p.setProperty(F,""):F==="float"?p.cssFloat="":p[F]="");for(var K in _)F=_[K],_.hasOwnProperty(K)&&M[K]!==F&&lp(p,K,F)}else for(var se in _)_.hasOwnProperty(se)&&lp(p,se,_[se])}function Mc(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Md(p){return jv.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var ta=null;function cp(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var ku=null,Ac=null;function Nv(p){var _=dn(p);if(_&&(p=_.stateNode)){var M=p[ze]||null;e:switch(p=_.stateNode,_.type){case"input":if(Dl(p,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name),_=M.name,M.type==="radio"&&_!=null){for(M=p;M.parentNode;)M=M.parentNode;for(M=M.querySelectorAll('input[name="'+sl(""+_)+'"][type="radio"]'),_=0;_<M.length;_++){var F=M[_];if(F!==p&&F.form===p.form){var K=F[ze]||null;if(!K)throw Error(r(90));Dl(F,K.value,K.defaultValue,K.defaultValue,K.checked,K.defaultChecked,K.type,K.name)}}for(_=0;_<M.length;_++)F=M[_],F.form===p.form&&ap(F)}break e;case"textarea":su(p,M.value,M.defaultValue);break e;case"select":_=M.value,_!=null&&Da(p,!!M.multiple,_,!1)}}}var up=!1;function Mm(p,_,M){if(up)return p(_,M);up=!0;try{var F=p(_);return F}finally{if(up=!1,(ku!==null||Ac!==null)&&(td(),ku&&(_=ku,p=Ac,Ac=ku=null,Nv(_),p)))for(_=0;_<p.length;_++)Nv(p[_])}}function ci(p,_){var M=p.stateNode;if(M===null)return null;var F=M[ze]||null;if(F===null)return null;M=F[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(p=p.type,F=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!F;break e;default:p=!1}if(p)return null;if(M&&typeof M!="function")throw Error(r(231,_,typeof M));return M}var ll=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ad=!1;if(ll)try{var Am={};Object.defineProperty(Am,"passive",{get:function(){Ad=!0}}),window.addEventListener("test",Am,Am),window.removeEventListener("test",Am,Am)}catch{Ad=!1}var Ou=null,Lu=null,Rc=null;function $h(){if(Rc)return Rc;var p,_=Lu,M=_.length,F,K="value"in Ou?Ou.value:Ou.textContent,se=K.length;for(p=0;p<M&&_[p]===K[p];p++);var De=M-p;for(F=1;F<=De&&_[M-F]===K[se-F];F++);return Rc=K.slice(p,1<F?1-F:void 0)}function Rm(p){var _=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&_===13&&(p=13)):p=_,p===10&&(p=13),32<=p||p===13?p:0}function dp(){return!0}function Rd(){return!1}function na(p){function _(M,F,K,se,De){this._reactName=M,this._targetInst=K,this.type=F,this.nativeEvent=se,this.target=De,this.currentTarget=null;for(var Xe in p)p.hasOwnProperty(Xe)&&(M=p[Xe],this[Xe]=M?M(se):se[Xe]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?dp:Rd,this.isPropagationStopped=Rd,this}return T(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var M=this.nativeEvent;M&&(M.preventDefault?M.preventDefault():typeof M.returnValue!="unknown"&&(M.returnValue=!1),this.isDefaultPrevented=dp)},stopPropagation:function(){var M=this.nativeEvent;M&&(M.stopPropagation?M.stopPropagation():typeof M.cancelBubble!="unknown"&&(M.cancelBubble=!0),this.isPropagationStopped=dp)},persist:function(){},isPersistent:dp}),_}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uh=na(Xl),qh=T({},Xl,{view:0,detail:0}),cl=na(qh),au,Dm,Hh,Wh=T({},qh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Hh&&(Hh&&p.type==="mousemove"?(au=p.screenX-Hh.screenX,Dm=p.screenY-Hh.screenY):Dm=au=0,Hh=p),au)},movementY:function(p){return"movementY"in p?p.movementY:Dm}}),Dd=na(Wh),ul=T({},Wh,{dataTransfer:0}),Vv=na(ul),ay=T({},qh,{relatedTarget:0}),Gh=na(ay),bi=T({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=na(bi),lr=T({},Xl,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),fx=na(lr),ly=T({},Xl,{data:0}),Pm=na(ly),Im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(p){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(p):(p=Yh[p])?!!_[p]:!1}function tr(){return Pd}var $i=T({},qh,{key:function(p){if(p.key){var _=Im[p.key]||p.key;if(_!=="Unidentified")return _}return p.type==="keypress"?(p=Rm(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Zl[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(p){return p.type==="keypress"?Rm(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Rm(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Ri=na($i),Ha=T({},Wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=na(Ha),Ai=T({},qh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),Xh=na(Ai),km=T({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Om=na(km),Pa=T({},Wh,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),ls=na(Pa),W1=T({},Xl,{newState:0,oldState:0}),Lm=na(W1),$v=[9,13,27,32],Id=ll&&"CompositionEvent"in window,Kl=null;ll&&"documentMode"in document&&(Kl=document.documentMode);var cy=ll&&"TextEvent"in window&&!Kl,ga=ll&&(!Id||Kl&&8<Kl&&11>=Kl),Ql=" ",Ia=!1;function Uv(p,_){switch(p){case"keyup":return $v.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zh(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Uo=!1;function ka(p,_){switch(p){case"compositionend":return Zh(_);case"keypress":return _.which!==32?null:(Ia=!0,Ql);case"textInput":return p=_.data,p===Ql&&Ia?null:p;default:return null}}function Nr(p,_){if(Uo)return p==="compositionend"||!Id&&Uv(p,_)?(p=$h(),Rc=Lu=Ou=null,Uo=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return ga&&_.locale!=="ko"?null:_.data;default:return null}}var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(p){var _=p&&p.nodeName&&p.nodeName.toLowerCase();return _==="input"?!!Un[p.type]:_==="textarea"}function vr(p,_,M,F){ku?Ac?Ac.push(F):Ac=[F]:ku=F,_=Ox(_,"onChange"),0<_.length&&(M=new Uh("onChange","change",null,M,F),p.push({event:M,listeners:_}))}var Dc=null,lu=null;function br(p){iC(p,0)}function zm(p){var _=wn(p);if(ap(_))return p}function Jl(p,_){if(p==="change")return _}var qv=!1;if(ll){var fp;if(ll){var Us="oninput"in document;if(!Us){var ya=document.createElement("div");ya.setAttribute("oninput","return;"),Us=typeof ya.oninput=="function"}fp=Us}else fp=!1;qv=fp&&(!document.documentMode||9<document.documentMode)}function Kh(){Dc&&(Dc.detachEvent("onpropertychange",Fu),lu=Dc=null)}function Fu(p){if(p.propertyName==="value"&&zm(lu)){var _=[];vr(_,lu,p,cp(p)),Mm(br,_)}}function Qh(p,_,M){p==="focusin"?(Kh(),Dc=_,lu=M,Dc.attachEvent("onpropertychange",Fu)):p==="focusout"&&Kh()}function Jh(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return zm(lu)}function Oa(p,_){if(p==="click")return zm(_)}function Fm(p,_){if(p==="input"||p==="change")return zm(_)}function Bm(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var Pl=typeof Object.is=="function"?Object.is:Bm;function Il(p,_){if(Pl(p,_))return!0;if(typeof p!="object"||p===null||typeof _!="object"||_===null)return!1;var M=Object.keys(p),F=Object.keys(_);if(M.length!==F.length)return!1;for(F=0;F<M.length;F++){var K=M[F];if(!Lt.call(_,K)||!Pl(p[K],_[K]))return!1}return!0}function uy(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Pc(p,_){var M=uy(p);p=0;for(var F;M;){if(M.nodeType===3){if(F=p+M.textContent.length,p<=_&&F>=_)return{node:M,offset:_-p};p=F}e:{for(;M;){if(M.nextSibling){M=M.nextSibling;break e}M=M.parentNode}M=void 0}M=uy(M)}}function dy(p,_){return p&&_?p===_?!0:p&&p.nodeType===3?!1:_&&_.nodeType===3?dy(p,_.parentNode):"contains"in p?p.contains(_):p.compareDocumentPosition?!!(p.compareDocumentPosition(_)&16):!1:!1}function Bu(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var _=ou(p.document);_ instanceof p.HTMLIFrameElement;){try{var M=typeof _.contentWindow.location.href=="string"}catch{M=!1}if(M)p=_.contentWindow;else break;_=ou(p.document)}return _}function Hv(p){var _=p&&p.nodeName&&p.nodeName.toLowerCase();return _&&(_==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||_==="textarea"||p.contentEditable==="true")}var G1=ll&&"documentMode"in document&&11>=document.documentMode,ef=null,hy=null,jm=null,pp=!1;function Wv(p,_,M){var F=M.window===M?M.document:M.nodeType===9?M:M.ownerDocument;pp||ef==null||ef!==ou(F)||(F=ef,"selectionStart"in F&&Hv(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),jm&&Il(jm,F)||(jm=F,F=Ox(hy,"onSelect"),0<F.length&&(_=new Uh("onSelect","select",null,_,M),p.push({event:_,listeners:F}),_.target=ef)))}function dl(p,_){var M={};return M[p.toLowerCase()]=_.toLowerCase(),M["Webkit"+p]="webkit"+_,M["Moz"+p]="moz"+_,M}var tf={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionrun:dl("Transition","TransitionRun"),transitionstart:dl("Transition","TransitionStart"),transitioncancel:dl("Transition","TransitionCancel"),transitionend:dl("Transition","TransitionEnd")},fy={},cu={};ll&&(cu=document.createElement("div").style,"AnimationEvent"in window||(delete tf.animationend.animation,delete tf.animationiteration.animation,delete tf.animationstart.animation),"TransitionEvent"in window||delete tf.transitionend.transition);function Ic(p){if(fy[p])return fy[p];if(!tf[p])return p;var _=tf[p],M;for(M in _)if(_.hasOwnProperty(M)&&M in cu)return fy[p]=_[M];return p}var py=Ic("animationend"),kl=Ic("animationiteration"),nf=Ic("animationstart"),mp=Ic("transitionrun"),Gv=Ic("transitionstart"),my=Ic("transitioncancel"),hl=Ic("transitionend"),Nm=new Map,xn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xn.push("scrollEnd");function Ol(p,_){Nm.set(p,_),Si(_,[p])}var Vm=new WeakMap;function Wa(p,_){if(typeof p=="object"&&p!==null){var M=Vm.get(p);return M!==void 0?M:(_={value:p,source:_,stack:ol(_)},Vm.set(p,_),_)}return{value:p,source:_,stack:ol(_)}}var fl=[],ec=0,pl=0;function ju(){for(var p=ec,_=pl=ec=0;_<p;){var M=fl[_];fl[_++]=null;var F=fl[_];fl[_++]=null;var K=fl[_];fl[_++]=null;var se=fl[_];if(fl[_++]=null,F!==null&&K!==null){var De=F.pending;De===null?K.next=K:(K.next=De.next,De.next=K),F.pending=K}se!==0&&of(M,K,se)}}function kc(p,_,M,F){fl[ec++]=p,fl[ec++]=_,fl[ec++]=M,fl[ec++]=F,pl|=F,p.lanes|=F,p=p.alternate,p!==null&&(p.lanes|=F)}function rf(p,_,M,F){return kc(p,_,M,F),ni(p)}function tc(p,_){return kc(p,null,null,_),ni(p)}function of(p,_,M){p.lanes|=M;var F=p.alternate;F!==null&&(F.lanes|=M);for(var K=!1,se=p.return;se!==null;)se.childLanes|=M,F=se.alternate,F!==null&&(F.childLanes|=M),se.tag===22&&(p=se.stateNode,p===null||p._visibility&1||(K=!0)),p=se,se=se.return;return p.tag===3?(se=p.stateNode,K&&_!==null&&(K=31-Xn(M),p=se.hiddenUpdates,F=p[K],F===null?p[K]=[_]:F.push(_),_.lane=M|536870912),se):null}function ni(p){if(50<bl)throw bl=0,jl=null,Error(r(185));for(var _=p.return;_!==null;)p=_,_=p.return;return p.tag===3?p.stateNode:null}var kd={};function Y1(p,_,M,F){this.tag=p,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ml(p,_,M,F){return new Y1(p,_,M,F)}function $m(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Oc(p,_){var M=p.alternate;return M===null?(M=ml(p.tag,_,p.key,p.mode),M.elementType=p.elementType,M.type=p.type,M.stateNode=p.stateNode,M.alternate=p,p.alternate=M):(M.pendingProps=_,M.type=p.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=p.flags&65011712,M.childLanes=p.childLanes,M.lanes=p.lanes,M.child=p.child,M.memoizedProps=p.memoizedProps,M.memoizedState=p.memoizedState,M.updateQueue=p.updateQueue,_=p.dependencies,M.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},M.sibling=p.sibling,M.index=p.index,M.ref=p.ref,M.refCleanup=p.refCleanup,M}function So(p,_){p.flags&=65011714;var M=p.alternate;return M===null?(p.childLanes=0,p.lanes=_,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=M.childLanes,p.lanes=M.lanes,p.child=M.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=M.memoizedProps,p.memoizedState=M.memoizedState,p.updateQueue=M.updateQueue,p.type=M.type,_=M.dependencies,p.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),p}function gy(p,_,M,F,K,se){var De=0;if(F=p,typeof p=="function")$m(p)&&(De=1);else if(typeof p=="string")De=tI(p,M,Nt.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case ue:return p=ml(31,M,_,K),p.elementType=ue,p.lanes=se,p;case k:return sf(M.children,K,se,_);case B:De=8,K|=24;break;case j:return p=ml(12,M,_,K|2),p.elementType=j,p.lanes=se,p;case Q:return p=ml(13,M,_,K),p.elementType=Q,p.lanes=se,p;case ee:return p=ml(19,M,_,K),p.elementType=ee,p.lanes=se,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case V:case G:De=10;break e;case H:De=9;break e;case X:De=11;break e;case ce:De=14;break e;case fe:De=16,F=null;break e}De=29,M=Error(r(130,p===null?"null":typeof p,"")),F=null}return _=ml(De,M,_,K),_.elementType=p,_.type=F,_.lanes=se,_}function sf(p,_,M,F){return p=ml(7,p,F,_),p.lanes=M,p}function Yv(p,_,M){return p=ml(6,p,null,_),p.lanes=M,p}function yy(p,_,M){return _=ml(4,p.children!==null?p.children:[],p.key,_),_.lanes=M,_.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},_}var gp=[],Nu=0,vy=null,Um=0,gl=[],Ga=0,Vu=null,Ya=1,Lc="";function Od(p,_){gp[Nu++]=Um,gp[Nu++]=vy,vy=p,Um=_}function af(p,_,M){gl[Ga++]=Ya,gl[Ga++]=Lc,gl[Ga++]=Vu,Vu=p;var F=Ya;p=Lc;var K=32-Xn(F)-1;F&=~(1<<K),M+=1;var se=32-Xn(_)+K;if(30<se){var De=K-K%5;se=(F&(1<<De)-1).toString(32),F>>=De,K-=De,Ya=1<<32-Xn(_)+K|M<<K|F,Lc=se+p}else Ya=1<<se|M<<K|F,Lc=p}function lf(p){p.return!==null&&(Od(p,1),af(p,1,0))}function yp(p){for(;p===vy;)vy=gp[--Nu],gp[Nu]=null,Um=gp[--Nu],gp[Nu]=null;for(;p===Vu;)Vu=gl[--Ga],gl[Ga]=null,Lc=gl[--Ga],gl[Ga]=null,Ya=gl[--Ga],gl[Ga]=null}var ra=null,qo=null,yo=!1,$u=null,zc=!1,qm=Error(r(519));function uu(p){var _=Error(r(418,""));throw bp(Wa(_,p)),qm}function vp(p){var _=p.stateNode,M=p.type,F=p.memoizedProps;switch(_[Te]=p,_[ze]=F,M){case"dialog":fo("cancel",_),fo("close",_);break;case"iframe":case"object":case"embed":fo("load",_);break;case"video":case"audio":for(M=0;M<I_.length;M++)fo(I_[M],_);break;case"source":fo("error",_);break;case"img":case"image":case"link":fo("error",_),fo("load",_);break;case"details":fo("toggle",_);break;case"input":fo("invalid",_),oy(_,F.value,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name,!0),Vh(_);break;case"select":fo("invalid",_);break;case"textarea":fo("invalid",_),Gl(_,F.value,F.defaultValue,F.children),Vh(_)}M=F.children,typeof M!="string"&&typeof M!="number"&&typeof M!="bigint"||_.textContent===""+M||F.suppressHydrationWarning===!0||By(_.textContent,M)?(F.popover!=null&&(fo("beforetoggle",_),fo("toggle",_)),F.onScroll!=null&&fo("scroll",_),F.onScrollEnd!=null&&fo("scrollend",_),F.onClick!=null&&(_.onclick=L_),_=!0):_=!1,_||uu(p)}function Xv(p){for(ra=p.return;ra;)switch(ra.tag){case 5:case 13:zc=!1;return;case 27:case 3:zc=!0;return;default:ra=ra.return}}function _p(p){if(p!==ra)return!1;if(!yo)return Xv(p),yo=!0,!1;var _=p.tag,M;if((M=_!==3&&_!==27)&&((M=_===5)&&(M=p.type,M=!(M!=="form"&&M!=="button")||Nx(p.type,p.memoizedProps)),M=!M),M&&qo&&uu(p),Xv(p),_===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,_=0;p;){if(p.nodeType===8)if(M=p.data,M==="/$"){if(_===0){qo=od(p.nextSibling);break e}_--}else M!=="$"&&M!=="$!"&&M!=="$?"||_++;p=p.nextSibling}qo=null}}else _===27?(_=qo,If(p.type)?(p=uw,uw=null,qo=p):qo=_):qo=ra?od(p.stateNode.nextSibling):null;return!0}function xp(){qo=ra=null,yo=!1}function cf(){var p=$u;return p!==null&&(gi===null?gi=p:gi.push.apply(gi,p),$u=null),p}function bp(p){$u===null?$u=[p]:$u.push(p)}var Zv=He(null),Uu=null,qu=null;function Fc(p,_,M){gt(Zv,_._currentValue),_._currentValue=M}function Bc(p){p._currentValue=Zv.current,dt(Zv)}function Hm(p,_,M){for(;p!==null;){var F=p.alternate;if((p.childLanes&_)!==_?(p.childLanes|=_,F!==null&&(F.childLanes|=_)):F!==null&&(F.childLanes&_)!==_&&(F.childLanes|=_),p===M)break;p=p.return}}function Wm(p,_,M,F){var K=p.child;for(K!==null&&(K.return=p);K!==null;){var se=K.dependencies;if(se!==null){var De=K.child;se=se.firstContext;e:for(;se!==null;){var Xe=se;se=K;for(var xt=0;xt<_.length;xt++)if(Xe.context===_[xt]){se.lanes|=M,Xe=se.alternate,Xe!==null&&(Xe.lanes|=M),Hm(se.return,M,p),F||(De=null);break e}se=Xe.next}}else if(K.tag===18){if(De=K.return,De===null)throw Error(r(341));De.lanes|=M,se=De.alternate,se!==null&&(se.lanes|=M),Hm(De,M,p),De=null}else De=K.child;if(De!==null)De.return=K;else for(De=K;De!==null;){if(De===p){De=null;break}if(K=De.sibling,K!==null){K.return=De.return,De=K;break}De=De.return}K=De}}function uf(p,_,M,F){p=null;for(var K=_,se=!1;K!==null;){if(!se){if((K.flags&524288)!==0)se=!0;else if((K.flags&262144)!==0)break}if(K.tag===10){var De=K.alternate;if(De===null)throw Error(r(387));if(De=De.memoizedProps,De!==null){var Xe=K.type;Pl(K.pendingProps.value,De.value)||(p!==null?p.push(Xe):p=[Xe])}}else if(K===st.current){if(De=K.alternate,De===null)throw Error(r(387));De.memoizedState.memoizedState!==K.memoizedState.memoizedState&&(p!==null?p.push(Uy):p=[Uy])}K=K.return}p!==null&&Wm(_,p,M,F),_.flags|=262144}function wp(p){for(p=p.firstContext;p!==null;){if(!Pl(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function nc(p){Uu=p,qu=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Ms(p){return Kv(Uu,p)}function Hu(p,_){return Uu===null&&nc(p),Kv(p,_)}function Kv(p,_){var M=_._currentValue;if(_={context:_,memoizedValue:M,next:null},qu===null){if(p===null)throw Error(r(308));qu=_,p.dependencies={lanes:0,firstContext:_},p.flags|=524288}else qu=qu.next=_;return M}var Xa=typeof AbortController<"u"?AbortController:function(){var p=[],_=this.signal={aborted:!1,addEventListener:function(M,F){p.push(F)}};this.abort=function(){_.aborted=!0,p.forEach(function(M){return M()})}},Gm=e.unstable_scheduleCallback,_y=e.unstable_NormalPriority,ws={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sp(){return{controller:new Xa,data:new Map,refCount:0}}function Ld(p){p.refCount--,p.refCount===0&&Gm(_y,function(){p.controller.abort()})}var df=null,Tp=0,zd=0,Wu=null;function Ym(p,_){if(df===null){var M=df=[];Tp=0,zd=iw(),Wu={status:"pending",value:void 0,then:function(F){M.push(F)}}}return Tp++,_.then(Ep,Ep),_}function Ep(){if(--Tp===0&&df!==null){Wu!==null&&(Wu.status="fulfilled");var p=df;df=null,zd=0,Wu=null;for(var _=0;_<p.length;_++)(0,p[_])()}}function px(p,_){var M=[],F={status:"pending",value:null,reason:null,then:function(K){M.push(K)}};return p.then(function(){F.status="fulfilled",F.value=_;for(var K=0;K<M.length;K++)(0,M[K])(_)},function(K){for(F.status="rejected",F.reason=K,K=0;K<M.length;K++)(0,M[K])(void 0)}),F}var Fd=_e.S;_e.S=function(p,_){typeof _=="object"&&_!==null&&typeof _.then=="function"&&Ym(p,_),Fd!==null&&Fd(p,_)};var hf=He(null);function Qv(){var p=hf.current;return p!==null?p:Lr.pooledCache}function Xm(p,_){_===null?gt(hf,hf.current):gt(hf,_.pool)}function Jv(){var p=Qv();return p===null?null:{parent:ws._currentValue,pool:p}}var Zm=Error(r(460)),mx=Error(r(474)),Cp=Error(r(542)),ff={then:function(){}};function e_(p){return p=p.status,p==="fulfilled"||p==="rejected"}function du(){}function t_(p,_,M){switch(M=p[M],M===void 0?p.push(_):M!==_&&(_.then(du,du),_=M),_.status){case"fulfilled":return _.value;case"rejected":throw p=_.reason,Km(p),p;default:if(typeof _.status=="string")_.then(du,du);else{if(p=Lr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=_,p.status="pending",p.then(function(F){if(_.status==="pending"){var K=_;K.status="fulfilled",K.value=F}},function(F){if(_.status==="pending"){var K=_;K.status="rejected",K.reason=F}})}switch(_.status){case"fulfilled":return _.value;case"rejected":throw p=_.reason,Km(p),p}throw Mp=_,Zm}}var Mp=null;function xy(){if(Mp===null)throw Error(r(459));var p=Mp;return Mp=null,p}function Km(p){if(p===Zm||p===Cp)throw Error(r(483))}var Za=!1;function by(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ka(p,_){p=p.updateQueue,_.updateQueue===p&&(_.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function hu(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function jc(p,_,M){var F=p.updateQueue;if(F===null)return null;if(F=F.shared,(ur&2)!==0){var K=F.pending;return K===null?_.next=_:(_.next=K.next,K.next=_),F.pending=_,_=ni(p),of(p,null,M),_}return kc(p,F,_,M),ni(p)}function Ap(p,_,M){if(_=_.updateQueue,_!==null&&(_=_.shared,(M&4194048)!==0)){var F=_.lanes;F&=p.pendingLanes,M|=F,_.lanes=M,mn(p,M)}}function Qm(p,_){var M=p.updateQueue,F=p.alternate;if(F!==null&&(F=F.updateQueue,M===F)){var K=null,se=null;if(M=M.firstBaseUpdate,M!==null){do{var De={lane:M.lane,tag:M.tag,payload:M.payload,callback:null,next:null};se===null?K=se=De:se=se.next=De,M=M.next}while(M!==null);se===null?K=se=_:se=se.next=_}else K=se=_;M={baseState:F.baseState,firstBaseUpdate:K,lastBaseUpdate:se,shared:F.shared,callbacks:F.callbacks},p.updateQueue=M;return}p=M.lastBaseUpdate,p===null?M.firstBaseUpdate=_:p.next=_,M.lastBaseUpdate=_}var Rp=!1;function Bd(){if(Rp){var p=Wu;if(p!==null)throw p}}function Dp(p,_,M,F){Rp=!1;var K=p.updateQueue;Za=!1;var se=K.firstBaseUpdate,De=K.lastBaseUpdate,Xe=K.shared.pending;if(Xe!==null){K.shared.pending=null;var xt=Xe,sn=xt.next;xt.next=null,De===null?se=sn:De.next=sn,De=xt;var On=p.alternate;On!==null&&(On=On.updateQueue,Xe=On.lastBaseUpdate,Xe!==De&&(Xe===null?On.firstBaseUpdate=sn:Xe.next=sn,On.lastBaseUpdate=xt))}if(se!==null){var Yn=K.baseState;De=0,On=sn=xt=null,Xe=se;do{var hn=Xe.lane&-536870913,gn=hn!==Xe.lane;if(gn?(ar&hn)===hn:(F&hn)===hn){hn!==0&&hn===zd&&(Rp=!0),On!==null&&(On=On.next={lane:0,tag:Xe.tag,payload:Xe.payload,callback:null,next:null});e:{var Mi=p,vi=Xe;hn=_;var es=M;switch(vi.tag){case 1:if(Mi=vi.payload,typeof Mi=="function"){Yn=Mi.call(es,Yn,hn);break e}Yn=Mi;break e;case 3:Mi.flags=Mi.flags&-65537|128;case 0:if(Mi=vi.payload,hn=typeof Mi=="function"?Mi.call(es,Yn,hn):Mi,hn==null)break e;Yn=T({},Yn,hn);break e;case 2:Za=!0}}hn=Xe.callback,hn!==null&&(p.flags|=64,gn&&(p.flags|=8192),gn=K.callbacks,gn===null?K.callbacks=[hn]:gn.push(hn))}else gn={lane:hn,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},On===null?(sn=On=gn,xt=Yn):On=On.next=gn,De|=hn;if(Xe=Xe.next,Xe===null){if(Xe=K.shared.pending,Xe===null)break;gn=Xe,Xe=gn.next,gn.next=null,K.lastBaseUpdate=gn,K.shared.pending=null}}while(!0);On===null&&(xt=Yn),K.baseState=xt,K.firstBaseUpdate=sn,K.lastBaseUpdate=On,se===null&&(K.shared.lanes=0),Ji|=De,p.lanes=De,p.memoizedState=Yn}}function Jm(p,_){if(typeof p!="function")throw Error(r(191,p));p.call(_)}function jd(p,_){var M=p.callbacks;if(M!==null)for(p.callbacks=null,p=0;p<M.length;p++)Jm(M[p],_)}var pf=He(null),wy=He(0);function fu(p,_){p=pi,gt(wy,p),gt(pf,_),pi=p|_.baseLanes}function n_(){gt(wy,pi),gt(pf,pf.current)}function eg(){pi=wy.current,dt(pf),dt(wy)}var Nc=0,Di=null,vo=null,is=null,Nd=!1,pu=!1,mu=!1,Pp=0,Vd=0,$d=null,Ip=0;function os(){throw Error(r(321))}function zn(p,_){if(_===null)return!1;for(var M=0;M<_.length&&M<p.length;M++)if(!Pl(p[M],_[M]))return!1;return!0}function mf(p,_,M,F,K,se){return Nc=se,Di=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,_e.H=p===null||p.memoizedState===null?Sf:Dy,mu=!1,se=M(F,K),mu=!1,pu&&(se=Gu(_,M,F,K)),Ud(p),se}function Ud(p){_e.H=wf;var _=vo!==null&&vo.next!==null;if(Nc=0,is=vo=Di=null,Nd=!1,Vd=0,$d=null,_)throw Error(r(300));p===null||Fs||(p=p.dependencies,p!==null&&wp(p)&&(Fs=!0))}function Gu(p,_,M,F){Di=p;var K=0;do{if(pu&&($d=null),Vd=0,pu=!1,25<=K)throw Error(r(301));if(K+=1,is=vo=null,p.updateQueue!=null){var se=p.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}_e.H=f_,se=_(M,F)}while(pu);return se}function qd(){var p=_e.H,_=p.useState()[0];return _=typeof _.then=="function"?ng(_):_,p=p.useState()[0],(vo!==null?vo.memoizedState:null)!==p&&(Di.flags|=1024),_}function cr(){var p=Pp!==0;return Pp=0,p}function tg(p,_,M){_.updateQueue=p.updateQueue,_.flags&=-2053,p.lanes&=~M}function r_(p){if(Nd){for(p=p.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}Nd=!1}Nc=0,is=vo=Di=null,pu=!1,Vd=Pp=0,$d=null}function Qa(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?Di.memoizedState=is=p:is=is.next=p,is}function cs(){if(vo===null){var p=Di.alternate;p=p!==null?p.memoizedState:null}else p=vo.next;var _=is===null?Di.memoizedState:is.next;if(_!==null)is=_,vo=p;else{if(p===null)throw Di.alternate===null?Error(r(467)):Error(r(310));vo=p,p={memoizedState:vo.memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},is===null?Di.memoizedState=is=p:is=is.next=p}return is}function Sy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ng(p){var _=Vd;return Vd+=1,$d===null&&($d=[]),p=t_($d,p,_),_=Di,(is===null?_.memoizedState:is.next)===null&&(_=_.alternate,_e.H=_===null||_.memoizedState===null?Sf:Dy),p}function rg(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return ng(p);if(p.$$typeof===G)return Ms(p)}throw Error(r(438,String(p)))}function i_(p){var _=null,M=Di.updateQueue;if(M!==null&&(_=M.memoCache),_==null){var F=Di.alternate;F!==null&&(F=F.updateQueue,F!==null&&(F=F.memoCache,F!=null&&(_={data:F.data.map(function(K){return K.slice()}),index:0})))}if(_==null&&(_={data:[],index:0}),M===null&&(M=Sy(),Di.updateQueue=M),M.memoCache=_,M=_.data[_.index],M===void 0)for(M=_.data[_.index]=Array(p),F=0;F<p;F++)M[F]=ae;return _.index++,M}function Yu(p,_){return typeof _=="function"?_(p):_}function kp(p){var _=cs();return ig(_,vo,p)}function ig(p,_,M){var F=p.queue;if(F===null)throw Error(r(311));F.lastRenderedReducer=M;var K=p.baseQueue,se=F.pending;if(se!==null){if(K!==null){var De=K.next;K.next=se.next,se.next=De}_.baseQueue=K=se,F.pending=null}if(se=p.baseState,K===null)p.memoizedState=se;else{_=K.next;var Xe=De=null,xt=null,sn=_,On=!1;do{var Yn=sn.lane&-536870913;if(Yn!==sn.lane?(ar&Yn)===Yn:(Nc&Yn)===Yn){var hn=sn.revertLane;if(hn===0)xt!==null&&(xt=xt.next={lane:0,revertLane:0,action:sn.action,hasEagerState:sn.hasEagerState,eagerState:sn.eagerState,next:null}),Yn===zd&&(On=!0);else if((Nc&hn)===hn){sn=sn.next,hn===zd&&(On=!0);continue}else Yn={lane:0,revertLane:sn.revertLane,action:sn.action,hasEagerState:sn.hasEagerState,eagerState:sn.eagerState,next:null},xt===null?(Xe=xt=Yn,De=se):xt=xt.next=Yn,Di.lanes|=hn,Ji|=hn;Yn=sn.action,mu&&M(se,Yn),se=sn.hasEagerState?sn.eagerState:M(se,Yn)}else hn={lane:Yn,revertLane:sn.revertLane,action:sn.action,hasEagerState:sn.hasEagerState,eagerState:sn.eagerState,next:null},xt===null?(Xe=xt=hn,De=se):xt=xt.next=hn,Di.lanes|=Yn,Ji|=Yn;sn=sn.next}while(sn!==null&&sn!==_);if(xt===null?De=se:xt.next=Xe,!Pl(se,p.memoizedState)&&(Fs=!0,On&&(M=Wu,M!==null)))throw M;p.memoizedState=se,p.baseState=De,p.baseQueue=xt,F.lastRenderedState=se}return K===null&&(F.lanes=0),[p.memoizedState,F.dispatch]}function og(p){var _=cs(),M=_.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=p;var F=M.dispatch,K=M.pending,se=_.memoizedState;if(K!==null){M.pending=null;var De=K=K.next;do se=p(se,De.action),De=De.next;while(De!==K);Pl(se,_.memoizedState)||(Fs=!0),_.memoizedState=se,_.baseQueue===null&&(_.baseState=se),M.lastRenderedState=se}return[se,F]}function Ty(p,_,M){var F=Di,K=cs(),se=yo;if(se){if(M===void 0)throw Error(r(407));M=M()}else M=_();var De=!Pl((vo||K).memoizedState,M);De&&(K.memoizedState=M,Fs=!0),K=K.queue;var Xe=Hd.bind(null,F,K,p);if(Yd(2048,8,Xe,[p]),K.getSnapshot!==_||De||is!==null&&is.memoizedState.tag&1){if(F.flags|=2048,ic(9,To(),Xu.bind(null,F,K,M,_),null),Lr===null)throw Error(r(349));se||(Nc&124)!==0||Ja(F,_,M)}return M}function Ja(p,_,M){p.flags|=16384,p={getSnapshot:_,value:M},_=Di.updateQueue,_===null?(_=Sy(),Di.updateQueue=_,_.stores=[p]):(M=_.stores,M===null?_.stores=[p]:M.push(p))}function Xu(p,_,M,F){_.value=M,_.getSnapshot=F,sg(_)&&ag(p)}function Hd(p,_,M){return M(function(){sg(_)&&ag(p)})}function sg(p){var _=p.getSnapshot;p=p.value;try{var M=_();return!Pl(p,M)}catch{return!0}}function ag(p){var _=tc(p,2);_!==null&&ja(_,p,2)}function Wd(p){var _=Qa();if(typeof p=="function"){var M=p;if(p=M(),mu){mr(!0);try{M()}finally{mr(!1)}}}return _.memoizedState=_.baseState=p,_.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:p},_}function o_(p,_,M,F){return p.baseState=M,ig(p,vo,typeof F=="function"?F:Yu)}function rc(p,_,M,F,K){if(xf(p))throw Error(r(485));if(p=_.action,p!==null){var se={payload:K,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(De){se.listeners.push(De)}};_e.T!==null?M(!0):se.isTransition=!1,F(se),M=_.pending,M===null?(se.next=_.pending=se,Li(_,se)):(se.next=M.next,_.pending=M.next=se)}}function Li(p,_){var M=_.action,F=_.payload,K=p.state;if(_.isTransition){var se=_e.T,De={};_e.T=De;try{var Xe=M(K,F),xt=_e.S;xt!==null&&xt(De,Xe),Op(p,_,Xe)}catch(sn){Ey(p,_,sn)}finally{_e.T=se}}else try{se=M(K,F),Op(p,_,se)}catch(sn){Ey(p,_,sn)}}function Op(p,_,M){M!==null&&typeof M=="object"&&typeof M.then=="function"?M.then(function(F){Zu(p,_,F)},function(F){return Ey(p,_,F)}):Zu(p,_,M)}function Zu(p,_,M){_.status="fulfilled",_.value=M,s_(_),p.state=M,_=p.pending,_!==null&&(M=_.next,M===_?p.pending=null:(M=M.next,_.next=M,Li(p,M)))}function Ey(p,_,M){var F=p.pending;if(p.pending=null,F!==null){F=F.next;do _.status="rejected",_.reason=M,s_(_),_=_.next;while(_!==F)}p.action=null}function s_(p){p=p.listeners;for(var _=0;_<p.length;_++)(0,p[_])()}function a_(p,_){return _}function gx(p,_){if(yo){var M=Lr.formState;if(M!==null){e:{var F=Di;if(yo){if(qo){t:{for(var K=qo,se=zc;K.nodeType!==8;){if(!se){K=null;break t}if(K=od(K.nextSibling),K===null){K=null;break t}}se=K.data,K=se==="F!"||se==="F"?K:null}if(K){qo=od(K.nextSibling),F=K.data==="F!";break e}}uu(F)}F=!1}F&&(_=M[0])}}return M=Qa(),M.memoizedState=M.baseState=_,F={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a_,lastRenderedState:_},M.queue=F,M=fi.bind(null,Di,F),F.dispatch=M,F=Wd(!1),se=Vc.bind(null,Di,!1,F.queue),F=Qa(),K={state:_,dispatch:null,action:p,pending:null},F.queue=K,M=rc.bind(null,Di,K,se,M),K.dispatch=M,F.memoizedState=p,[_,M,!1]}function gf(p){var _=cs();return Gd(_,vo,p)}function Gd(p,_,M){if(_=ig(p,_,a_)[0],p=kp(Yu)[0],typeof _=="object"&&_!==null&&typeof _.then=="function")try{var F=ng(_)}catch(De){throw De===Zm?Cp:De}else F=_;_=cs();var K=_.queue,se=K.dispatch;return M!==_.memoizedState&&(Di.flags|=2048,ic(9,To(),yn.bind(null,K,M),null)),[F,se,p]}function yn(p,_){p.action=_}function Ln(p){var _=cs(),M=vo;if(M!==null)return Gd(_,M,p);cs(),_=_.memoizedState,M=cs();var F=M.queue.dispatch;return M.memoizedState=p,[_,F,!1]}function ic(p,_,M,F){return p={tag:p,create:M,deps:F,inst:_,next:null},_=Di.updateQueue,_===null&&(_=Sy(),Di.updateQueue=_),M=_.lastEffect,M===null?_.lastEffect=p.next=p:(F=M.next,M.next=p,p.next=F,_.lastEffect=p),p}function To(){return{destroy:void 0,resource:void 0}}function _t(){return cs().memoizedState}function yl(p,_,M,F){var K=Qa();F=F===void 0?null:F,Di.flags|=p,K.memoizedState=ic(1|_,To(),M,F)}function Yd(p,_,M,F){var K=cs();F=F===void 0?null:F;var se=K.memoizedState.inst;vo!==null&&F!==null&&zn(F,vo.memoizedState.deps)?K.memoizedState=ic(_,se,M,F):(Di.flags|=p,K.memoizedState=ic(1|_,se,M,F))}function lg(p,_){yl(8390656,8,p,_)}function Cy(p,_){Yd(2048,8,p,_)}function l_(p,_){return Yd(4,2,p,_)}function c_(p,_){return Yd(4,4,p,_)}function yf(p,_){if(typeof _=="function"){p=p();var M=_(p);return function(){typeof M=="function"?M():_(null)}}if(_!=null)return p=p(),_.current=p,function(){_.current=null}}function yx(p,_,M){M=M!=null?M.concat([p]):null,Yd(4,4,yf.bind(null,_,p),M)}function u_(){}function d_(p,_){var M=cs();_=_===void 0?null:_;var F=M.memoizedState;return _!==null&&zn(_,F[1])?F[0]:(M.memoizedState=[p,_],p)}function cg(p,_){var M=cs();_=_===void 0?null:_;var F=M.memoizedState;if(_!==null&&zn(_,F[1]))return F[0];if(F=p(),mu){mr(!0);try{p()}finally{mr(!1)}}return M.memoizedState=[F,_],F}function ug(p,_,M){return M===void 0||(Nc&1073741824)!==0?p.memoizedState=_:(p.memoizedState=M,p=ih(),Di.lanes|=p,Ji|=p,M)}function My(p,_,M,F){return Pl(M,_)?M:pf.current!==null?(p=ug(p,M,F),Pl(p,_)||(Fs=!0),p):(Nc&42)===0?(Fs=!0,p.memoizedState=M):(p=ih(),Di.lanes|=p,Ji|=p,_)}function h_(p,_,M,F,K){var se=Pe.p;Pe.p=se!==0&&8>se?se:8;var De=_e.T,Xe={};_e.T=Xe,Vc(p,!1,_,M);try{var xt=K(),sn=_e.S;if(sn!==null&&sn(Xe,xt),xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){var On=px(xt,F);_f(p,_,On,sa(p))}else _f(p,_,F,sa(p))}catch(Yn){_f(p,_,{then:function(){},status:"rejected",reason:Yn},sa())}finally{Pe.p=se,_e.T=De}}function Ay(){}function vf(p,_,M,F){if(p.tag!==5)throw Error(r(476));var K=Xd(p).queue;h_(p,K,_,We,M===null?Ay:function(){return Ry(p),M(F)})}function Xd(p){var _=p.memoizedState;if(_!==null)return _;_={memoizedState:We,baseState:We,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:We},next:null};var M={};return _.next={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:M},next:null},p.memoizedState=_,p=p.alternate,p!==null&&(p.memoizedState=_),_}function Ry(p){var _=Xd(p).next.queue;_f(p,_,{},sa())}function gu(){return Ms(Uy)}function va(){return cs().memoizedState}function vx(){return cs().memoizedState}function dg(p){for(var _=p.return;_!==null;){switch(_.tag){case 24:case 3:var M=sa();p=hu(M);var F=jc(_,p,M);F!==null&&(ja(F,_,M),Ap(F,_,M)),_={cache:Sp()},p.payload=_;return}_=_.return}}function ho(p,_,M){var F=sa();M={lane:F,revertLane:0,action:M,hasEagerState:!1,eagerState:null,next:null},xf(p)?Zd(_,M):(M=rf(p,_,M,F),M!==null&&(ja(M,p,F),bf(M,_,F)))}function fi(p,_,M){var F=sa();_f(p,_,M,F)}function _f(p,_,M,F){var K={lane:F,revertLane:0,action:M,hasEagerState:!1,eagerState:null,next:null};if(xf(p))Zd(_,K);else{var se=p.alternate;if(p.lanes===0&&(se===null||se.lanes===0)&&(se=_.lastRenderedReducer,se!==null))try{var De=_.lastRenderedState,Xe=se(De,M);if(K.hasEagerState=!0,K.eagerState=Xe,Pl(Xe,De))return kc(p,_,K,0),Lr===null&&ju(),!1}catch{}finally{}if(M=rf(p,_,K,F),M!==null)return ja(M,p,F),bf(M,_,F),!0}return!1}function Vc(p,_,M,F){if(F={lane:2,revertLane:iw(),action:F,hasEagerState:!1,eagerState:null,next:null},xf(p)){if(_)throw Error(r(479))}else _=rf(p,M,F,2),_!==null&&ja(_,p,2)}function xf(p){var _=p.alternate;return p===Di||_!==null&&_===Di}function Zd(p,_){pu=Nd=!0;var M=p.pending;M===null?_.next=_:(_.next=M.next,M.next=_),p.pending=_}function bf(p,_,M){if((M&4194048)!==0){var F=_.lanes;F&=p.pendingLanes,M|=F,_.lanes=M,mn(p,M)}}var wf={readContext:Ms,use:rg,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useInsertionEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useSyncExternalStore:os,useId:os,useHostTransitionStatus:os,useFormState:os,useActionState:os,useOptimistic:os,useMemoCache:os,useCacheRefresh:os},Sf={readContext:Ms,use:rg,useCallback:function(p,_){return Qa().memoizedState=[p,_===void 0?null:_],p},useContext:Ms,useEffect:lg,useImperativeHandle:function(p,_,M){M=M!=null?M.concat([p]):null,yl(4194308,4,yf.bind(null,_,p),M)},useLayoutEffect:function(p,_){return yl(4194308,4,p,_)},useInsertionEffect:function(p,_){yl(4,2,p,_)},useMemo:function(p,_){var M=Qa();_=_===void 0?null:_;var F=p();if(mu){mr(!0);try{p()}finally{mr(!1)}}return M.memoizedState=[F,_],F},useReducer:function(p,_,M){var F=Qa();if(M!==void 0){var K=M(_);if(mu){mr(!0);try{M(_)}finally{mr(!1)}}}else K=_;return F.memoizedState=F.baseState=K,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:K},F.queue=p,p=p.dispatch=ho.bind(null,Di,p),[F.memoizedState,p]},useRef:function(p){var _=Qa();return p={current:p},_.memoizedState=p},useState:function(p){p=Wd(p);var _=p.queue,M=fi.bind(null,Di,_);return _.dispatch=M,[p.memoizedState,M]},useDebugValue:u_,useDeferredValue:function(p,_){var M=Qa();return ug(M,p,_)},useTransition:function(){var p=Wd(!1);return p=h_.bind(null,Di,p.queue,!0,!1),Qa().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,_,M){var F=Di,K=Qa();if(yo){if(M===void 0)throw Error(r(407));M=M()}else{if(M=_(),Lr===null)throw Error(r(349));(ar&124)!==0||Ja(F,_,M)}K.memoizedState=M;var se={value:M,getSnapshot:_};return K.queue=se,lg(Hd.bind(null,F,se,p),[p]),F.flags|=2048,ic(9,To(),Xu.bind(null,F,se,M,_),null),M},useId:function(){var p=Qa(),_=Lr.identifierPrefix;if(yo){var M=Lc,F=Ya;M=(F&~(1<<32-Xn(F)-1)).toString(32)+M,_="«"+_+"R"+M,M=Pp++,0<M&&(_+="H"+M.toString(32)),_+="»"}else M=Ip++,_="«"+_+"r"+M.toString(32)+"»";return p.memoizedState=_},useHostTransitionStatus:gu,useFormState:gx,useActionState:gx,useOptimistic:function(p){var _=Qa();_.memoizedState=_.baseState=p;var M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return _.queue=M,_=Vc.bind(null,Di,!0,M),M.dispatch=_,[p,_]},useMemoCache:i_,useCacheRefresh:function(){return Qa().memoizedState=dg.bind(null,Di)}},Dy={readContext:Ms,use:rg,useCallback:d_,useContext:Ms,useEffect:Cy,useImperativeHandle:yx,useInsertionEffect:l_,useLayoutEffect:c_,useMemo:cg,useReducer:kp,useRef:_t,useState:function(){return kp(Yu)},useDebugValue:u_,useDeferredValue:function(p,_){var M=cs();return My(M,vo.memoizedState,p,_)},useTransition:function(){var p=kp(Yu)[0],_=cs().memoizedState;return[typeof p=="boolean"?p:ng(p),_]},useSyncExternalStore:Ty,useId:va,useHostTransitionStatus:gu,useFormState:gf,useActionState:gf,useOptimistic:function(p,_){var M=cs();return o_(M,vo,p,_)},useMemoCache:i_,useCacheRefresh:vx},f_={readContext:Ms,use:rg,useCallback:d_,useContext:Ms,useEffect:Cy,useImperativeHandle:yx,useInsertionEffect:l_,useLayoutEffect:c_,useMemo:cg,useReducer:og,useRef:_t,useState:function(){return og(Yu)},useDebugValue:u_,useDeferredValue:function(p,_){var M=cs();return vo===null?ug(M,p,_):My(M,vo.memoizedState,p,_)},useTransition:function(){var p=og(Yu)[0],_=cs().memoizedState;return[typeof p=="boolean"?p:ng(p),_]},useSyncExternalStore:Ty,useId:va,useHostTransitionStatus:gu,useFormState:Ln,useActionState:Ln,useOptimistic:function(p,_){var M=cs();return vo!==null?o_(M,vo,p,_):(M.baseState=p,[p,M.queue.dispatch])},useMemoCache:i_,useCacheRefresh:vx},el=null,Ll=0;function Tf(p){var _=Ll;return Ll+=1,el===null&&(el=[]),t_(el,p,_)}function $c(p,_){_=_.props.ref,p.ref=_!==void 0?_:null}function Ku(p,_){throw _.$$typeof===C?Error(r(525)):(p=Object.prototype.toString.call(_),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":p)))}function La(p){var _=p._init;return _(p._payload)}function Uc(p){function _(Yt,Bt){if(p){var rn=Yt.deletions;rn===null?(Yt.deletions=[Bt],Yt.flags|=16):rn.push(Bt)}}function M(Yt,Bt){if(!p)return null;for(;Bt!==null;)_(Yt,Bt),Bt=Bt.sibling;return null}function F(Yt){for(var Bt=new Map;Yt!==null;)Yt.key!==null?Bt.set(Yt.key,Yt):Bt.set(Yt.index,Yt),Yt=Yt.sibling;return Bt}function K(Yt,Bt){return Yt=Oc(Yt,Bt),Yt.index=0,Yt.sibling=null,Yt}function se(Yt,Bt,rn){return Yt.index=rn,p?(rn=Yt.alternate,rn!==null?(rn=rn.index,rn<Bt?(Yt.flags|=67108866,Bt):rn):(Yt.flags|=67108866,Bt)):(Yt.flags|=1048576,Bt)}function De(Yt){return p&&Yt.alternate===null&&(Yt.flags|=67108866),Yt}function Xe(Yt,Bt,rn,jn){return Bt===null||Bt.tag!==6?(Bt=Yv(rn,Yt.mode,jn),Bt.return=Yt,Bt):(Bt=K(Bt,rn),Bt.return=Yt,Bt)}function xt(Yt,Bt,rn,jn){var qr=rn.type;return qr===k?On(Yt,Bt,rn.props.children,jn,rn.key):Bt!==null&&(Bt.elementType===qr||typeof qr=="object"&&qr!==null&&qr.$$typeof===fe&&La(qr)===Bt.type)?(Bt=K(Bt,rn.props),$c(Bt,rn),Bt.return=Yt,Bt):(Bt=gy(rn.type,rn.key,rn.props,null,Yt.mode,jn),$c(Bt,rn),Bt.return=Yt,Bt)}function sn(Yt,Bt,rn,jn){return Bt===null||Bt.tag!==4||Bt.stateNode.containerInfo!==rn.containerInfo||Bt.stateNode.implementation!==rn.implementation?(Bt=yy(rn,Yt.mode,jn),Bt.return=Yt,Bt):(Bt=K(Bt,rn.children||[]),Bt.return=Yt,Bt)}function On(Yt,Bt,rn,jn,qr){return Bt===null||Bt.tag!==7?(Bt=sf(rn,Yt.mode,jn,qr),Bt.return=Yt,Bt):(Bt=K(Bt,rn),Bt.return=Yt,Bt)}function Yn(Yt,Bt,rn){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number"||typeof Bt=="bigint")return Bt=Yv(""+Bt,Yt.mode,rn),Bt.return=Yt,Bt;if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case A:return rn=gy(Bt.type,Bt.key,Bt.props,null,Yt.mode,rn),$c(rn,Bt),rn.return=Yt,rn;case I:return Bt=yy(Bt,Yt.mode,rn),Bt.return=Yt,Bt;case fe:var jn=Bt._init;return Bt=jn(Bt._payload),Yn(Yt,Bt,rn)}if(Ae(Bt)||we(Bt))return Bt=sf(Bt,Yt.mode,rn,null),Bt.return=Yt,Bt;if(typeof Bt.then=="function")return Yn(Yt,Tf(Bt),rn);if(Bt.$$typeof===G)return Yn(Yt,Hu(Yt,Bt),rn);Ku(Yt,Bt)}return null}function hn(Yt,Bt,rn,jn){var qr=Bt!==null?Bt.key:null;if(typeof rn=="string"&&rn!==""||typeof rn=="number"||typeof rn=="bigint")return qr!==null?null:Xe(Yt,Bt,""+rn,jn);if(typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case A:return rn.key===qr?xt(Yt,Bt,rn,jn):null;case I:return rn.key===qr?sn(Yt,Bt,rn,jn):null;case fe:return qr=rn._init,rn=qr(rn._payload),hn(Yt,Bt,rn,jn)}if(Ae(rn)||we(rn))return qr!==null?null:On(Yt,Bt,rn,jn,null);if(typeof rn.then=="function")return hn(Yt,Bt,Tf(rn),jn);if(rn.$$typeof===G)return hn(Yt,Bt,Hu(Yt,rn),jn);Ku(Yt,rn)}return null}function gn(Yt,Bt,rn,jn,qr){if(typeof jn=="string"&&jn!==""||typeof jn=="number"||typeof jn=="bigint")return Yt=Yt.get(rn)||null,Xe(Bt,Yt,""+jn,qr);if(typeof jn=="object"&&jn!==null){switch(jn.$$typeof){case A:return Yt=Yt.get(jn.key===null?rn:jn.key)||null,xt(Bt,Yt,jn,qr);case I:return Yt=Yt.get(jn.key===null?rn:jn.key)||null,sn(Bt,Yt,jn,qr);case fe:var no=jn._init;return jn=no(jn._payload),gn(Yt,Bt,rn,jn,qr)}if(Ae(jn)||we(jn))return Yt=Yt.get(rn)||null,On(Bt,Yt,jn,qr,null);if(typeof jn.then=="function")return gn(Yt,Bt,rn,Tf(jn),qr);if(jn.$$typeof===G)return gn(Yt,Bt,rn,Hu(Bt,jn),qr);Ku(Bt,jn)}return null}function Mi(Yt,Bt,rn,jn){for(var qr=null,no=null,ri=Bt,_i=Bt=0,xa=null;ri!==null&&_i<rn.length;_i++){ri.index>_i?(xa=ri,ri=null):xa=ri.sibling;var Do=hn(Yt,ri,rn[_i],jn);if(Do===null){ri===null&&(ri=xa);break}p&&ri&&Do.alternate===null&&_(Yt,ri),Bt=se(Do,Bt,_i),no===null?qr=Do:no.sibling=Do,no=Do,ri=xa}if(_i===rn.length)return M(Yt,ri),yo&&Od(Yt,_i),qr;if(ri===null){for(;_i<rn.length;_i++)ri=Yn(Yt,rn[_i],jn),ri!==null&&(Bt=se(ri,Bt,_i),no===null?qr=ri:no.sibling=ri,no=ri);return yo&&Od(Yt,_i),qr}for(ri=F(ri);_i<rn.length;_i++)xa=gn(ri,Yt,_i,rn[_i],jn),xa!==null&&(p&&xa.alternate!==null&&ri.delete(xa.key===null?_i:xa.key),Bt=se(xa,Bt,_i),no===null?qr=xa:no.sibling=xa,no=xa);return p&&ri.forEach(function(lh){return _(Yt,lh)}),yo&&Od(Yt,_i),qr}function vi(Yt,Bt,rn,jn){if(rn==null)throw Error(r(151));for(var qr=null,no=null,ri=Bt,_i=Bt=0,xa=null,Do=rn.next();ri!==null&&!Do.done;_i++,Do=rn.next()){ri.index>_i?(xa=ri,ri=null):xa=ri.sibling;var lh=hn(Yt,ri,Do.value,jn);if(lh===null){ri===null&&(ri=xa);break}p&&ri&&lh.alternate===null&&_(Yt,ri),Bt=se(lh,Bt,_i),no===null?qr=lh:no.sibling=lh,no=lh,ri=xa}if(Do.done)return M(Yt,ri),yo&&Od(Yt,_i),qr;if(ri===null){for(;!Do.done;_i++,Do=rn.next())Do=Yn(Yt,Do.value,jn),Do!==null&&(Bt=se(Do,Bt,_i),no===null?qr=Do:no.sibling=Do,no=Do);return yo&&Od(Yt,_i),qr}for(ri=F(ri);!Do.done;_i++,Do=rn.next())Do=gn(ri,Yt,_i,Do.value,jn),Do!==null&&(p&&Do.alternate!==null&&ri.delete(Do.key===null?_i:Do.key),Bt=se(Do,Bt,_i),no===null?qr=Do:no.sibling=Do,no=Do);return p&&ri.forEach(function(CC){return _(Yt,CC)}),yo&&Od(Yt,_i),qr}function es(Yt,Bt,rn,jn){if(typeof rn=="object"&&rn!==null&&rn.type===k&&rn.key===null&&(rn=rn.props.children),typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case A:e:{for(var qr=rn.key;Bt!==null;){if(Bt.key===qr){if(qr=rn.type,qr===k){if(Bt.tag===7){M(Yt,Bt.sibling),jn=K(Bt,rn.props.children),jn.return=Yt,Yt=jn;break e}}else if(Bt.elementType===qr||typeof qr=="object"&&qr!==null&&qr.$$typeof===fe&&La(qr)===Bt.type){M(Yt,Bt.sibling),jn=K(Bt,rn.props),$c(jn,rn),jn.return=Yt,Yt=jn;break e}M(Yt,Bt);break}else _(Yt,Bt);Bt=Bt.sibling}rn.type===k?(jn=sf(rn.props.children,Yt.mode,jn,rn.key),jn.return=Yt,Yt=jn):(jn=gy(rn.type,rn.key,rn.props,null,Yt.mode,jn),$c(jn,rn),jn.return=Yt,Yt=jn)}return De(Yt);case I:e:{for(qr=rn.key;Bt!==null;){if(Bt.key===qr)if(Bt.tag===4&&Bt.stateNode.containerInfo===rn.containerInfo&&Bt.stateNode.implementation===rn.implementation){M(Yt,Bt.sibling),jn=K(Bt,rn.children||[]),jn.return=Yt,Yt=jn;break e}else{M(Yt,Bt);break}else _(Yt,Bt);Bt=Bt.sibling}jn=yy(rn,Yt.mode,jn),jn.return=Yt,Yt=jn}return De(Yt);case fe:return qr=rn._init,rn=qr(rn._payload),es(Yt,Bt,rn,jn)}if(Ae(rn))return Mi(Yt,Bt,rn,jn);if(we(rn)){if(qr=we(rn),typeof qr!="function")throw Error(r(150));return rn=qr.call(rn),vi(Yt,Bt,rn,jn)}if(typeof rn.then=="function")return es(Yt,Bt,Tf(rn),jn);if(rn.$$typeof===G)return es(Yt,Bt,Hu(Yt,rn),jn);Ku(Yt,rn)}return typeof rn=="string"&&rn!==""||typeof rn=="number"||typeof rn=="bigint"?(rn=""+rn,Bt!==null&&Bt.tag===6?(M(Yt,Bt.sibling),jn=K(Bt,rn),jn.return=Yt,Yt=jn):(M(Yt,Bt),jn=Yv(rn,Yt.mode,jn),jn.return=Yt,Yt=jn),De(Yt)):M(Yt,Bt)}return function(Yt,Bt,rn,jn){try{Ll=0;var qr=es(Yt,Bt,rn,jn);return el=null,qr}catch(ri){if(ri===Zm||ri===Cp)throw ri;var no=ml(29,ri,null,Yt.mode);return no.lanes=jn,no.return=Yt,no}finally{}}}var Kd=Uc(!0),Qu=Uc(!1),vl=He(null),zl=null;function oc(p){var _=p.alternate;gt(As,As.current&1),gt(vl,p),zl===null&&(_===null||pf.current!==null||_.memoizedState!==null)&&(zl=p)}function Py(p){if(p.tag===22){if(gt(As,As.current),gt(vl,p),zl===null){var _=p.alternate;_!==null&&_.memoizedState!==null&&(zl=p)}}else Fo()}function Fo(){gt(As,As.current),gt(vl,vl.current)}function qc(p){dt(vl),zl===p&&(zl=null),dt(As)}var As=He(0);function Hc(p){for(var _=p;_!==null;){if(_.tag===13){var M=_.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||M.data==="$?"||cw(M)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}function Ef(p,_,M,F){_=p.memoizedState,M=M(F,_),M=M==null?_:T({},_,M),p.memoizedState=M,p.lanes===0&&(p.updateQueue.baseState=M)}var hg={enqueueSetState:function(p,_,M){p=p._reactInternals;var F=sa(),K=hu(F);K.payload=_,M!=null&&(K.callback=M),_=jc(p,K,F),_!==null&&(ja(_,p,F),Ap(_,p,F))},enqueueReplaceState:function(p,_,M){p=p._reactInternals;var F=sa(),K=hu(F);K.tag=1,K.payload=_,M!=null&&(K.callback=M),_=jc(p,K,F),_!==null&&(ja(_,p,F),Ap(_,p,F))},enqueueForceUpdate:function(p,_){p=p._reactInternals;var M=sa(),F=hu(M);F.tag=2,_!=null&&(F.callback=_),_=jc(p,F,M),_!==null&&(ja(_,p,M),Ap(_,p,M))}};function fg(p,_,M,F,K,se,De){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(F,se,De):_.prototype&&_.prototype.isPureReactComponent?!Il(M,F)||!Il(K,se):!0}function Qd(p,_,M,F){p=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(M,F),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(M,F),_.state!==p&&hg.enqueueReplaceState(_,_.state,null)}function Ju(p,_){var M=_;if("ref"in _){M={};for(var F in _)F!=="ref"&&(M[F]=_[F])}if(p=p.defaultProps){M===_&&(M=T({},M));for(var K in p)M[K]===void 0&&(M[K]=p[K])}return M}var Jd=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function Cf(p){Jd(p)}function Lp(p){console.error(p)}function Iy(p){Jd(p)}function Mf(p,_){try{var M=p.onUncaughtError;M(_.value,{componentStack:_.stack})}catch(F){setTimeout(function(){throw F})}}function p_(p,_,M){try{var F=p.onCaughtError;F(M.value,{componentStack:M.stack,errorBoundary:_.tag===1?_.stateNode:null})}catch(K){setTimeout(function(){throw K})}}function zp(p,_,M){return M=hu(M),M.tag=3,M.payload={element:null},M.callback=function(){Mf(p,_)},M}function m_(p){return p=hu(p),p.tag=3,p}function g_(p,_,M,F){var K=M.type.getDerivedStateFromError;if(typeof K=="function"){var se=F.value;p.payload=function(){return K(se)},p.callback=function(){p_(_,M,F)}}var De=M.stateNode;De!==null&&typeof De.componentDidCatch=="function"&&(p.callback=function(){p_(_,M,F),typeof K!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var Xe=F.stack;this.componentDidCatch(F.value,{componentStack:Xe!==null?Xe:""})})}function _x(p,_,M,F,K){if(M.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){if(_=M.alternate,_!==null&&uf(_,M,K,!0),M=vl.current,M!==null){switch(M.tag){case 13:return zl===null?rd():M.alternate===null&&Ci===0&&(Ci=3),M.flags&=-257,M.flags|=65536,M.lanes=K,F===ff?M.flags|=16384:(_=M.updateQueue,_===null?M.updateQueue=new Set([F]):_.add(F),ew(p,F,K)),!1;case 22:return M.flags|=65536,F===ff?M.flags|=16384:(_=M.updateQueue,_===null?(_={transitions:null,markerInstances:null,retryQueue:new Set([F])},M.updateQueue=_):(M=_.retryQueue,M===null?_.retryQueue=new Set([F]):M.add(F)),ew(p,F,K)),!1}throw Error(r(435,M.tag))}return ew(p,F,K),rd(),!1}if(yo)return _=vl.current,_!==null?((_.flags&65536)===0&&(_.flags|=256),_.flags|=65536,_.lanes=K,F!==qm&&(p=Error(r(422),{cause:F}),bp(Wa(p,M)))):(F!==qm&&(_=Error(r(423),{cause:F}),bp(Wa(_,M))),p=p.current.alternate,p.flags|=65536,K&=-K,p.lanes|=K,F=Wa(F,M),K=zp(p.stateNode,F,K),Qm(p,K),Ci!==4&&(Ci=2)),!1;var se=Error(r(520),{cause:F});if(se=Wa(se,M),ai===null?ai=[se]:ai.push(se),Ci!==4&&(Ci=2),_===null)return!0;F=Wa(F,M),M=_;do{switch(M.tag){case 3:return M.flags|=65536,p=K&-K,M.lanes|=p,p=zp(M.stateNode,F,p),Qm(M,p),!1;case 1:if(_=M.type,se=M.stateNode,(M.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Wo===null||!Wo.has(se))))return M.flags|=65536,K&=-K,M.lanes|=K,K=m_(K),g_(K,p,M,F),Qm(M,K),!1}M=M.return}while(M!==null);return!1}var y_=Error(r(461)),Fs=!1;function ia(p,_,M,F){_.child=p===null?Qu(_,null,M,F):Kd(_,p.child,M,F)}function v_(p,_,M,F,K){M=M.render;var se=_.ref;if("ref"in F){var De={};for(var Xe in F)Xe!=="ref"&&(De[Xe]=F[Xe])}else De=F;return nc(_),F=mf(p,_,M,De,se,K),Xe=cr(),p!==null&&!Fs?(tg(p,_,K),Fl(p,_,K)):(yo&&Xe&&lf(_),_.flags|=1,ia(p,_,F,K),_.child)}function __(p,_,M,F,K){if(p===null){var se=M.type;return typeof se=="function"&&!$m(se)&&se.defaultProps===void 0&&M.compare===null?(_.tag=15,_.type=se,x_(p,_,se,F,K)):(p=gy(M.type,null,F,_,_.mode,K),p.ref=_.ref,p.return=_,_.child=p)}if(se=p.child,!Bp(p,K)){var De=se.memoizedProps;if(M=M.compare,M=M!==null?M:Il,M(De,F)&&p.ref===_.ref)return Fl(p,_,K)}return _.flags|=1,p=Oc(se,F),p.ref=_.ref,p.return=_,_.child=p}function x_(p,_,M,F,K){if(p!==null){var se=p.memoizedProps;if(Il(se,F)&&p.ref===_.ref)if(Fs=!1,_.pendingProps=F=se,Bp(p,K))(p.flags&131072)!==0&&(Fs=!0);else return _.lanes=p.lanes,Fl(p,_,K)}return S_(p,_,M,F,K)}function b_(p,_,M){var F=_.pendingProps,K=F.children,se=p!==null?p.memoizedState:null;if(F.mode==="hidden"){if((_.flags&128)!==0){if(F=se!==null?se.baseLanes|M:M,p!==null){for(K=_.child=p.child,se=0;K!==null;)se=se|K.lanes|K.childLanes,K=K.sibling;_.childLanes=se&~F}else _.childLanes=0,_.child=null;return w_(p,_,F,M)}if((M&536870912)!==0)_.memoizedState={baseLanes:0,cachePool:null},p!==null&&Xm(_,se!==null?se.cachePool:null),se!==null?fu(_,se):n_(),Py(_);else return _.lanes=_.childLanes=536870912,w_(p,_,se!==null?se.baseLanes|M:M,M)}else se!==null?(Xm(_,se.cachePool),fu(_,se),Fo(),_.memoizedState=null):(p!==null&&Xm(_,null),n_(),Fo());return ia(p,_,K,M),_.child}function w_(p,_,M,F){var K=Qv();return K=K===null?null:{parent:ws._currentValue,pool:K},_.memoizedState={baseLanes:M,cachePool:K},p!==null&&Xm(_,null),n_(),Py(_),p!==null&&uf(p,_,F,!0),null}function ky(p,_){var M=_.ref;if(M===null)p!==null&&p.ref!==null&&(_.flags|=4194816);else{if(typeof M!="function"&&typeof M!="object")throw Error(r(284));(p===null||p.ref!==M)&&(_.flags|=4194816)}}function S_(p,_,M,F,K){return nc(_),M=mf(p,_,M,F,void 0,K),F=cr(),p!==null&&!Fs?(tg(p,_,K),Fl(p,_,K)):(yo&&F&&lf(_),_.flags|=1,ia(p,_,M,K),_.child)}function _o(p,_,M,F,K,se){return nc(_),_.updateQueue=null,M=Gu(_,F,M,K),Ud(p),F=cr(),p!==null&&!Fs?(tg(p,_,se),Fl(p,_,se)):(yo&&F&&lf(_),_.flags|=1,ia(p,_,M,se),_.child)}function T_(p,_,M,F,K){if(nc(_),_.stateNode===null){var se=kd,De=M.contextType;typeof De=="object"&&De!==null&&(se=Ms(De)),se=new M(F,se),_.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=hg,_.stateNode=se,se._reactInternals=_,se=_.stateNode,se.props=F,se.state=_.memoizedState,se.refs={},by(_),De=M.contextType,se.context=typeof De=="object"&&De!==null?Ms(De):kd,se.state=_.memoizedState,De=M.getDerivedStateFromProps,typeof De=="function"&&(Ef(_,M,De,F),se.state=_.memoizedState),typeof M.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(De=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),De!==se.state&&hg.enqueueReplaceState(se,se.state,null),Dp(_,F,se,K),Bd(),se.state=_.memoizedState),typeof se.componentDidMount=="function"&&(_.flags|=4194308),F=!0}else if(p===null){se=_.stateNode;var Xe=_.memoizedProps,xt=Ju(M,Xe);se.props=xt;var sn=se.context,On=M.contextType;De=kd,typeof On=="object"&&On!==null&&(De=Ms(On));var Yn=M.getDerivedStateFromProps;On=typeof Yn=="function"||typeof se.getSnapshotBeforeUpdate=="function",Xe=_.pendingProps!==Xe,On||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Xe||sn!==De)&&Qd(_,se,F,De),Za=!1;var hn=_.memoizedState;se.state=hn,Dp(_,F,se,K),Bd(),sn=_.memoizedState,Xe||hn!==sn||Za?(typeof Yn=="function"&&(Ef(_,M,Yn,F),sn=_.memoizedState),(xt=Za||fg(_,M,xt,F,hn,sn,De))?(On||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(_.flags|=4194308)):(typeof se.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=F,_.memoizedState=sn),se.props=F,se.state=sn,se.context=De,F=xt):(typeof se.componentDidMount=="function"&&(_.flags|=4194308),F=!1)}else{se=_.stateNode,Ka(p,_),De=_.memoizedProps,On=Ju(M,De),se.props=On,Yn=_.pendingProps,hn=se.context,sn=M.contextType,xt=kd,typeof sn=="object"&&sn!==null&&(xt=Ms(sn)),Xe=M.getDerivedStateFromProps,(sn=typeof Xe=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(De!==Yn||hn!==xt)&&Qd(_,se,F,xt),Za=!1,hn=_.memoizedState,se.state=hn,Dp(_,F,se,K),Bd();var gn=_.memoizedState;De!==Yn||hn!==gn||Za||p!==null&&p.dependencies!==null&&wp(p.dependencies)?(typeof Xe=="function"&&(Ef(_,M,Xe,F),gn=_.memoizedState),(On=Za||fg(_,M,On,F,hn,gn,xt)||p!==null&&p.dependencies!==null&&wp(p.dependencies))?(sn||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(F,gn,xt),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(F,gn,xt)),typeof se.componentDidUpdate=="function"&&(_.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof se.componentDidUpdate!="function"||De===p.memoizedProps&&hn===p.memoizedState||(_.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&hn===p.memoizedState||(_.flags|=1024),_.memoizedProps=F,_.memoizedState=gn),se.props=F,se.state=gn,se.context=xt,F=On):(typeof se.componentDidUpdate!="function"||De===p.memoizedProps&&hn===p.memoizedState||(_.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&hn===p.memoizedState||(_.flags|=1024),F=!1)}return se=F,ky(p,_),F=(_.flags&128)!==0,se||F?(se=_.stateNode,M=F&&typeof M.getDerivedStateFromError!="function"?null:se.render(),_.flags|=1,p!==null&&F?(_.child=Kd(_,p.child,null,K),_.child=Kd(_,null,M,K)):ia(p,_,M,K),_.memoizedState=se.state,p=_.child):p=Fl(p,_,K),p}function xx(p,_,M,F){return xp(),_.flags|=256,ia(p,_,M,F),_.child}var eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function E_(p){return{baseLanes:p,cachePool:Jv()}}function th(p,_,M){return p=p!==null?p.childLanes&~M:0,_&&(p|=Tr),p}function C_(p,_,M){var F=_.pendingProps,K=!1,se=(_.flags&128)!==0,De;if((De=se)||(De=p!==null&&p.memoizedState===null?!1:(As.current&2)!==0),De&&(K=!0,_.flags&=-129),De=(_.flags&32)!==0,_.flags&=-33,p===null){if(yo){if(K?oc(_):Fo(),yo){var Xe=qo,xt;if(xt=Xe){e:{for(xt=Xe,Xe=zc;xt.nodeType!==8;){if(!Xe){Xe=null;break e}if(xt=od(xt.nextSibling),xt===null){Xe=null;break e}}Xe=xt}Xe!==null?(_.memoizedState={dehydrated:Xe,treeContext:Vu!==null?{id:Ya,overflow:Lc}:null,retryLane:536870912,hydrationErrors:null},xt=ml(18,null,null,0),xt.stateNode=Xe,xt.return=_,_.child=xt,ra=_,qo=null,xt=!0):xt=!1}xt||uu(_)}if(Xe=_.memoizedState,Xe!==null&&(Xe=Xe.dehydrated,Xe!==null))return cw(Xe)?_.lanes=32:_.lanes=536870912,null;qc(_)}return Xe=F.children,F=F.fallback,K?(Fo(),K=_.mode,Xe=nh({mode:"hidden",children:Xe},K),F=sf(F,K,M,null),Xe.return=_,F.return=_,Xe.sibling=F,_.child=Xe,K=_.child,K.memoizedState=E_(M),K.childLanes=th(p,De,M),_.memoizedState=eh,F):(oc(_),Fp(_,Xe))}if(xt=p.memoizedState,xt!==null&&(Xe=xt.dehydrated,Xe!==null)){if(se)_.flags&256?(oc(_),_.flags&=-257,_=sc(p,_,M)):_.memoizedState!==null?(Fo(),_.child=p.child,_.flags|=128,_=null):(Fo(),K=F.fallback,Xe=_.mode,F=nh({mode:"visible",children:F.children},Xe),K=sf(K,Xe,M,null),K.flags|=2,F.return=_,K.return=_,F.sibling=K,_.child=F,Kd(_,p.child,null,M),F=_.child,F.memoizedState=E_(M),F.childLanes=th(p,De,M),_.memoizedState=eh,_=K);else if(oc(_),cw(Xe)){if(De=Xe.nextSibling&&Xe.nextSibling.dataset,De)var sn=De.dgst;De=sn,F=Error(r(419)),F.stack="",F.digest=De,bp({value:F,source:null,stack:null}),_=sc(p,_,M)}else if(Fs||uf(p,_,M,!1),De=(M&p.childLanes)!==0,Fs||De){if(De=Lr,De!==null&&(F=M&-M,F=(F&42)!==0?1:ea(F),F=(F&(De.suspendedLanes|M))!==0?0:F,F!==0&&F!==xt.retryLane))throw xt.retryLane=F,tc(p,F),ja(De,p,F),y_;Xe.data==="$?"||rd(),_=sc(p,_,M)}else Xe.data==="$?"?(_.flags|=192,_.child=p.child,_=null):(p=xt.treeContext,qo=od(Xe.nextSibling),ra=_,yo=!0,$u=null,zc=!1,p!==null&&(gl[Ga++]=Ya,gl[Ga++]=Lc,gl[Ga++]=Vu,Ya=p.id,Lc=p.overflow,Vu=_),_=Fp(_,F.children),_.flags|=4096);return _}return K?(Fo(),K=F.fallback,Xe=_.mode,xt=p.child,sn=xt.sibling,F=Oc(xt,{mode:"hidden",children:F.children}),F.subtreeFlags=xt.subtreeFlags&65011712,sn!==null?K=Oc(sn,K):(K=sf(K,Xe,M,null),K.flags|=2),K.return=_,F.return=_,F.sibling=K,_.child=F,F=K,K=_.child,Xe=p.child.memoizedState,Xe===null?Xe=E_(M):(xt=Xe.cachePool,xt!==null?(sn=ws._currentValue,xt=xt.parent!==sn?{parent:sn,pool:sn}:xt):xt=Jv(),Xe={baseLanes:Xe.baseLanes|M,cachePool:xt}),K.memoizedState=Xe,K.childLanes=th(p,De,M),_.memoizedState=eh,F):(oc(_),M=p.child,p=M.sibling,M=Oc(M,{mode:"visible",children:F.children}),M.return=_,M.sibling=null,p!==null&&(De=_.deletions,De===null?(_.deletions=[p],_.flags|=16):De.push(p)),_.child=M,_.memoizedState=null,M)}function Fp(p,_){return _=nh({mode:"visible",children:_},p.mode),_.return=p,p.child=_}function nh(p,_){return p=ml(22,p,null,_),p.lanes=0,p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},p}function sc(p,_,M){return Kd(_,p.child,null,M),p=Fp(_,_.pendingProps.children),p.flags|=2,_.memoizedState=null,p}function pg(p,_,M){p.lanes|=_;var F=p.alternate;F!==null&&(F.lanes|=_),Hm(p.return,_,M)}function Bo(p,_,M,F,K){var se=p.memoizedState;se===null?p.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:F,tail:M,tailMode:K}:(se.isBackwards=_,se.rendering=null,se.renderingStartTime=0,se.last=F,se.tail=M,se.tailMode=K)}function ac(p,_,M){var F=_.pendingProps,K=F.revealOrder,se=F.tail;if(ia(p,_,F.children,M),F=As.current,(F&2)!==0)F=F&1|2,_.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=_.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&pg(p,M,_);else if(p.tag===19)pg(p,M,_);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===_)break e;for(;p.sibling===null;){if(p.return===null||p.return===_)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}F&=1}switch(gt(As,F),K){case"forwards":for(M=_.child,K=null;M!==null;)p=M.alternate,p!==null&&Hc(p)===null&&(K=M),M=M.sibling;M=K,M===null?(K=_.child,_.child=null):(K=M.sibling,M.sibling=null),Bo(_,!1,K,M,se);break;case"backwards":for(M=null,K=_.child,_.child=null;K!==null;){if(p=K.alternate,p!==null&&Hc(p)===null){_.child=K;break}p=K.sibling,K.sibling=M,M=K,K=p}Bo(_,!0,M,null,se);break;case"together":Bo(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Fl(p,_,M){if(p!==null&&(_.dependencies=p.dependencies),Ji|=_.lanes,(M&_.childLanes)===0)if(p!==null){if(uf(p,_,M,!1),(M&_.childLanes)===0)return null}else return null;if(p!==null&&_.child!==p.child)throw Error(r(153));if(_.child!==null){for(p=_.child,M=Oc(p,p.pendingProps),_.child=M,M.return=_;p.sibling!==null;)p=p.sibling,M=M.sibling=Oc(p,p.pendingProps),M.return=_;M.sibling=null}return _.child}function Bp(p,_){return(p.lanes&_)!==0?!0:(p=p.dependencies,!!(p!==null&&wp(p)))}function bx(p,_,M){switch(_.tag){case 3:St(_,_.stateNode.containerInfo),Fc(_,ws,p.memoizedState.cache),xp();break;case 27:case 5:Et(_);break;case 4:St(_,_.stateNode.containerInfo);break;case 10:Fc(_,_.type,_.memoizedProps.value);break;case 13:var F=_.memoizedState;if(F!==null)return F.dehydrated!==null?(oc(_),_.flags|=128,null):(M&_.child.childLanes)!==0?C_(p,_,M):(oc(_),p=Fl(p,_,M),p!==null?p.sibling:null);oc(_);break;case 19:var K=(p.flags&128)!==0;if(F=(M&_.childLanes)!==0,F||(uf(p,_,M,!1),F=(M&_.childLanes)!==0),K){if(F)return ac(p,_,M);_.flags|=128}if(K=_.memoizedState,K!==null&&(K.rendering=null,K.tail=null,K.lastEffect=null),gt(As,As.current),F)break;return null;case 22:case 23:return _.lanes=0,b_(p,_,M);case 24:Fc(_,ws,p.memoizedState.cache)}return Fl(p,_,M)}function wx(p,_,M){if(p!==null)if(p.memoizedProps!==_.pendingProps)Fs=!0;else{if(!Bp(p,M)&&(_.flags&128)===0)return Fs=!1,bx(p,_,M);Fs=(p.flags&131072)!==0}else Fs=!1,yo&&(_.flags&1048576)!==0&&af(_,Um,_.index);switch(_.lanes=0,_.tag){case 16:e:{p=_.pendingProps;var F=_.elementType,K=F._init;if(F=K(F._payload),_.type=F,typeof F=="function")$m(F)?(p=Ju(F,p),_.tag=1,_=T_(null,_,F,p,M)):(_.tag=0,_=S_(null,_,F,p,M));else{if(F!=null){if(K=F.$$typeof,K===X){_.tag=11,_=v_(null,_,F,p,M);break e}else if(K===ce){_.tag=14,_=__(null,_,F,p,M);break e}}throw _=Se(F)||F,Error(r(306,_,""))}}return _;case 0:return S_(p,_,_.type,_.pendingProps,M);case 1:return F=_.type,K=Ju(F,_.pendingProps),T_(p,_,F,K,M);case 3:e:{if(St(_,_.stateNode.containerInfo),p===null)throw Error(r(387));F=_.pendingProps;var se=_.memoizedState;K=se.element,Ka(p,_),Dp(_,F,null,M);var De=_.memoizedState;if(F=De.cache,Fc(_,ws,F),F!==se.cache&&Wm(_,[ws],M,!0),Bd(),F=De.element,se.isDehydrated)if(se={element:F,isDehydrated:!1,cache:De.cache},_.updateQueue.baseState=se,_.memoizedState=se,_.flags&256){_=xx(p,_,F,M);break e}else if(F!==K){K=Wa(Error(r(424)),_),bp(K),_=xx(p,_,F,M);break e}else{switch(p=_.stateNode.containerInfo,p.nodeType){case 9:p=p.body;break;default:p=p.nodeName==="HTML"?p.ownerDocument.body:p}for(qo=od(p.firstChild),ra=_,yo=!0,$u=null,zc=!0,M=Qu(_,null,F,M),_.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling}else{if(xp(),F===K){_=Fl(p,_,M);break e}ia(p,_,F,M)}_=_.child}return _;case 26:return ky(p,_),p===null?(M=qx(_.type,null,_.pendingProps,null))?_.memoizedState=M:yo||(M=_.type,p=_.pendingProps,F=jy(ot.current).createElement(M),F[Te]=_,F[ze]=p,_a(F,M,p),nr(F),_.stateNode=F):_.memoizedState=qx(_.type,p.memoizedProps,_.pendingProps,p.memoizedState),null;case 27:return Et(_),p===null&&yo&&(F=_.stateNode=dw(_.type,_.pendingProps,ot.current),ra=_,zc=!0,K=qo,If(_.type)?(uw=K,qo=od(F.firstChild)):qo=K),ia(p,_,_.pendingProps.children,M),ky(p,_),p===null&&(_.flags|=4194304),_.child;case 5:return p===null&&yo&&((K=F=qo)&&(F=Cg(F,_.type,_.pendingProps,zc),F!==null?(_.stateNode=F,ra=_,qo=od(F.firstChild),zc=!1,K=!0):K=!1),K||uu(_)),Et(_),K=_.type,se=_.pendingProps,De=p!==null?p.memoizedProps:null,F=se.children,Nx(K,se)?F=null:De!==null&&Nx(K,De)&&(_.flags|=32),_.memoizedState!==null&&(K=mf(p,_,qd,null,null,M),Uy._currentValue=K),ky(p,_),ia(p,_,F,M),_.child;case 6:return p===null&&yo&&((p=M=qo)&&(M=uC(M,_.pendingProps,zc),M!==null?(_.stateNode=M,ra=_,qo=null,p=!0):p=!1),p||uu(_)),null;case 13:return C_(p,_,M);case 4:return St(_,_.stateNode.containerInfo),F=_.pendingProps,p===null?_.child=Kd(_,null,F,M):ia(p,_,F,M),_.child;case 11:return v_(p,_,_.type,_.pendingProps,M);case 7:return ia(p,_,_.pendingProps,M),_.child;case 8:return ia(p,_,_.pendingProps.children,M),_.child;case 12:return ia(p,_,_.pendingProps.children,M),_.child;case 10:return F=_.pendingProps,Fc(_,_.type,F.value),ia(p,_,F.children,M),_.child;case 9:return K=_.type._context,F=_.pendingProps.children,nc(_),K=Ms(K),F=F(K),_.flags|=1,ia(p,_,F,M),_.child;case 14:return __(p,_,_.type,_.pendingProps,M);case 15:return x_(p,_,_.type,_.pendingProps,M);case 19:return ac(p,_,M);case 31:return F=_.pendingProps,M=_.mode,F={mode:F.mode,children:F.children},p===null?(M=nh(F,M),M.ref=_.ref,_.child=M,M.return=_,_=M):(M=Oc(p.child,F),M.ref=_.ref,_.child=M,M.return=_,_=M),_;case 22:return b_(p,_,M);case 24:return nc(_),F=Ms(ws),p===null?(K=Qv(),K===null&&(K=Lr,se=Sp(),K.pooledCache=se,se.refCount++,se!==null&&(K.pooledCacheLanes|=M),K=se),_.memoizedState={parent:F,cache:K},by(_),Fc(_,ws,K)):((p.lanes&M)!==0&&(Ka(p,_),Dp(_,null,null,M),Bd()),K=p.memoizedState,se=_.memoizedState,K.parent!==F?(K={parent:F,cache:F},_.memoizedState=K,_.lanes===0&&(_.memoizedState=_.updateQueue.baseState=K),Fc(_,ws,F)):(F=se.cache,Fc(_,ws,F),F!==K.cache&&Wm(_,[ws],M,!0))),ia(p,_,_.pendingProps.children,M),_.child;case 29:throw _.pendingProps}throw Error(r(156,_.tag))}function Bl(p){p.flags|=4}function M_(p,_){if(_.type!=="stylesheet"||(_.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!B_(_)){if(_=vl.current,_!==null&&((ar&4194048)===ar?zl!==null:(ar&62914560)!==ar&&(ar&536870912)===0||_!==zl))throw Mp=ff,mx;p.flags|=8192}}function jp(p,_){_!==null&&(p.flags|=4),p.flags&16384&&(_=p.tag!==22?ns():536870912,p.lanes|=_,Ui|=_)}function za(p,_){if(!yo)switch(p.tailMode){case"hidden":_=p.tail;for(var M=null;_!==null;)_.alternate!==null&&(M=_),_=_.sibling;M===null?p.tail=null:M.sibling=null;break;case"collapsed":M=p.tail;for(var F=null;M!==null;)M.alternate!==null&&(F=M),M=M.sibling;F===null?_||p.tail===null?p.tail=null:p.tail.sibling=null:F.sibling=null}}function Ho(p){var _=p.alternate!==null&&p.alternate.child===p.child,M=0,F=0;if(_)for(var K=p.child;K!==null;)M|=K.lanes|K.childLanes,F|=K.subtreeFlags&65011712,F|=K.flags&65011712,K.return=p,K=K.sibling;else for(K=p.child;K!==null;)M|=K.lanes|K.childLanes,F|=K.subtreeFlags,F|=K.flags,K.return=p,K=K.sibling;return p.subtreeFlags|=F,p.childLanes=M,_}function mg(p,_,M){var F=_.pendingProps;switch(yp(_),_.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(_),null;case 1:return Ho(_),null;case 3:return M=_.stateNode,F=null,p!==null&&(F=p.memoizedState.cache),_.memoizedState.cache!==F&&(_.flags|=2048),Bc(ws),Dt(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(p===null||p.child===null)&&(_p(_)?Bl(_):p===null||p.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,cf())),Ho(_),null;case 26:return M=_.memoizedState,p===null?(Bl(_),M!==null?(Ho(_),M_(_,M)):(Ho(_),_.flags&=-16777217)):M?M!==p.memoizedState?(Bl(_),Ho(_),M_(_,M)):(Ho(_),_.flags&=-16777217):(p.memoizedProps!==F&&Bl(_),Ho(_),_.flags&=-16777217),null;case 27:yt(_),M=ot.current;var K=_.type;if(p!==null&&_.stateNode!=null)p.memoizedProps!==F&&Bl(_);else{if(!F){if(_.stateNode===null)throw Error(r(166));return Ho(_),null}p=Nt.current,_p(_)?vp(_):(p=dw(K,F,M),_.stateNode=p,Bl(_))}return Ho(_),null;case 5:if(yt(_),M=_.type,p!==null&&_.stateNode!=null)p.memoizedProps!==F&&Bl(_);else{if(!F){if(_.stateNode===null)throw Error(r(166));return Ho(_),null}if(p=Nt.current,_p(_))vp(_);else{switch(K=jy(ot.current),p){case 1:p=K.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:p=K.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":p=K.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":p=K.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":p=K.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof F.is=="string"?K.createElement("select",{is:F.is}):K.createElement("select"),F.multiple?p.multiple=!0:F.size&&(p.size=F.size);break;default:p=typeof F.is=="string"?K.createElement(M,{is:F.is}):K.createElement(M)}}p[Te]=_,p[ze]=F;e:for(K=_.child;K!==null;){if(K.tag===5||K.tag===6)p.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===_)break e;for(;K.sibling===null;){if(K.return===null||K.return===_)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}_.stateNode=p;e:switch(_a(p,M,F),M){case"button":case"input":case"select":case"textarea":p=!!F.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Bl(_)}}return Ho(_),_.flags&=-16777217,null;case 6:if(p&&_.stateNode!=null)p.memoizedProps!==F&&Bl(_);else{if(typeof F!="string"&&_.stateNode===null)throw Error(r(166));if(p=ot.current,_p(_)){if(p=_.stateNode,M=_.memoizedProps,F=null,K=ra,K!==null)switch(K.tag){case 27:case 5:F=K.memoizedProps}p[Te]=_,p=!!(p.nodeValue===M||F!==null&&F.suppressHydrationWarning===!0||By(p.nodeValue,M)),p||uu(_)}else p=jy(p).createTextNode(F),p[Te]=_,_.stateNode=p}return Ho(_),null;case 13:if(F=_.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(K=_p(_),F!==null&&F.dehydrated!==null){if(p===null){if(!K)throw Error(r(318));if(K=_.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(r(317));K[Te]=_}else xp(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;Ho(_),K=!1}else K=cf(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=K),K=!0;if(!K)return _.flags&256?(qc(_),_):(qc(_),null)}if(qc(_),(_.flags&128)!==0)return _.lanes=M,_;if(M=F!==null,p=p!==null&&p.memoizedState!==null,M){F=_.child,K=null,F.alternate!==null&&F.alternate.memoizedState!==null&&F.alternate.memoizedState.cachePool!==null&&(K=F.alternate.memoizedState.cachePool.pool);var se=null;F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(se=F.memoizedState.cachePool.pool),se!==K&&(F.flags|=2048)}return M!==p&&M&&(_.child.flags|=8192),jp(_,_.updateQueue),Ho(_),null;case 4:return Dt(),p===null&&k_(_.stateNode.containerInfo),Ho(_),null;case 10:return Bc(_.type),Ho(_),null;case 19:if(dt(As),K=_.memoizedState,K===null)return Ho(_),null;if(F=(_.flags&128)!==0,se=K.rendering,se===null)if(F)za(K,!1);else{if(Ci!==0||p!==null&&(p.flags&128)!==0)for(p=_.child;p!==null;){if(se=Hc(p),se!==null){for(_.flags|=128,za(K,!1),p=se.updateQueue,_.updateQueue=p,jp(_,p),_.subtreeFlags=0,p=M,M=_.child;M!==null;)So(M,p),M=M.sibling;return gt(As,As.current&1|2),_.child}p=p.sibling}K.tail!==null&&Ut()>us&&(_.flags|=128,F=!0,za(K,!1),_.lanes=4194304)}else{if(!F)if(p=Hc(se),p!==null){if(_.flags|=128,F=!0,p=p.updateQueue,_.updateQueue=p,jp(_,p),za(K,!0),K.tail===null&&K.tailMode==="hidden"&&!se.alternate&&!yo)return Ho(_),null}else 2*Ut()-K.renderingStartTime>us&&M!==536870912&&(_.flags|=128,F=!0,za(K,!1),_.lanes=4194304);K.isBackwards?(se.sibling=_.child,_.child=se):(p=K.last,p!==null?p.sibling=se:_.child=se,K.last=se)}return K.tail!==null?(_=K.tail,K.rendering=_,K.tail=_.sibling,K.renderingStartTime=Ut(),_.sibling=null,p=As.current,gt(As,F?p&1|2:p&1),_):(Ho(_),null);case 22:case 23:return qc(_),eg(),F=_.memoizedState!==null,p!==null?p.memoizedState!==null!==F&&(_.flags|=8192):F&&(_.flags|=8192),F?(M&536870912)!==0&&(_.flags&128)===0&&(Ho(_),_.subtreeFlags&6&&(_.flags|=8192)):Ho(_),M=_.updateQueue,M!==null&&jp(_,M.retryQueue),M=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(M=p.memoizedState.cachePool.pool),F=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(F=_.memoizedState.cachePool.pool),F!==M&&(_.flags|=2048),p!==null&&dt(hf),null;case 24:return M=null,p!==null&&(M=p.memoizedState.cache),_.memoizedState.cache!==M&&(_.flags|=2048),Bc(ws),Ho(_),null;case 25:return null;case 30:return null}throw Error(r(156,_.tag))}function Np(p,_){switch(yp(_),_.tag){case 1:return p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 3:return Bc(ws),Dt(),p=_.flags,(p&65536)!==0&&(p&128)===0?(_.flags=p&-65537|128,_):null;case 26:case 27:case 5:return yt(_),null;case 13:if(qc(_),p=_.memoizedState,p!==null&&p.dehydrated!==null){if(_.alternate===null)throw Error(r(340));xp()}return p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 19:return dt(As),null;case 4:return Dt(),null;case 10:return Bc(_.type),null;case 22:case 23:return qc(_),eg(),p!==null&&dt(hf),p=_.flags,p&65536?(_.flags=p&-65537|128,_):null;case 24:return Bc(ws),null;case 25:return null;default:return null}}function yu(p,_){switch(yp(_),_.tag){case 3:Bc(ws),Dt();break;case 26:case 27:case 5:yt(_);break;case 4:Dt();break;case 13:qc(_);break;case 19:dt(As);break;case 10:Bc(_.type);break;case 22:case 23:qc(_),eg(),p!==null&&dt(hf);break;case 24:Bc(ws)}}function tl(p,_){try{var M=_.updateQueue,F=M!==null?M.lastEffect:null;if(F!==null){var K=F.next;M=K;do{if((M.tag&p)===p){F=void 0;var se=M.create,De=M.inst;F=se(),De.destroy=F}M=M.next}while(M!==K)}}catch(Xe){ss(_,_.return,Xe)}}function oa(p,_,M){try{var F=_.updateQueue,K=F!==null?F.lastEffect:null;if(K!==null){var se=K.next;F=se;do{if((F.tag&p)===p){var De=F.inst,Xe=De.destroy;if(Xe!==void 0){De.destroy=void 0,K=_;var xt=M,sn=Xe;try{sn()}catch(On){ss(K,xt,On)}}}F=F.next}while(F!==se)}}catch(On){ss(_,_.return,On)}}function ed(p){var _=p.updateQueue;if(_!==null){var M=p.stateNode;try{jd(_,M)}catch(F){ss(p,p.return,F)}}}function rh(p,_,M){M.props=Ju(p.type,p.memoizedProps),M.state=p.memoizedState;try{M.componentWillUnmount()}catch(F){ss(p,_,F)}}function y(p,_){try{var M=p.ref;if(M!==null){switch(p.tag){case 26:case 27:case 5:var F=p.stateNode;break;case 30:F=p.stateNode;break;default:F=p.stateNode}typeof M=="function"?p.refCleanup=M(F):M.current=F}}catch(K){ss(p,_,K)}}function a(p,_){var M=p.ref,F=p.refCleanup;if(M!==null)if(typeof F=="function")try{F()}catch(K){ss(p,_,K)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof M=="function")try{M(null)}catch(K){ss(p,_,K)}else M.current=null}function h(p){var _=p.type,M=p.memoizedProps,F=p.stateNode;try{e:switch(_){case"button":case"input":case"select":case"textarea":M.autoFocus&&F.focus();break e;case"img":M.src?F.src=M.src:M.srcSet&&(F.srcset=M.srcSet)}}catch(K){ss(p,p.return,K)}}function v(p,_,M){try{var F=p.stateNode;zx(F,p.type,M,_),F[ze]=_}catch(K){ss(p,p.return,K)}}function S(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&If(p.type)||p.tag===4}function E(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||S(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&If(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function D(p,_,M){var F=p.tag;if(F===5||F===6)p=p.stateNode,_?(M.nodeType===9?M.body:M.nodeName==="HTML"?M.ownerDocument.body:M).insertBefore(p,_):(_=M.nodeType===9?M.body:M.nodeName==="HTML"?M.ownerDocument.body:M,_.appendChild(p),M=M._reactRootContainer,M!=null||_.onclick!==null||(_.onclick=L_));else if(F!==4&&(F===27&&If(p.type)&&(M=p.stateNode,_=null),p=p.child,p!==null))for(D(p,_,M),p=p.sibling;p!==null;)D(p,_,M),p=p.sibling}function O(p,_,M){var F=p.tag;if(F===5||F===6)p=p.stateNode,_?M.insertBefore(p,_):M.appendChild(p);else if(F!==4&&(F===27&&If(p.type)&&(M=p.stateNode),p=p.child,p!==null))for(O(p,_,M),p=p.sibling;p!==null;)O(p,_,M),p=p.sibling}function N(p){var _=p.stateNode,M=p.memoizedProps;try{for(var F=p.type,K=_.attributes;K.length;)_.removeAttributeNode(K[0]);_a(_,F,M),_[Te]=p,_[ze]=M}catch(se){ss(p,p.return,se)}}var W=!1,Z=!1,te=!1,J=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ge(p,_){if(p=p.containerInfo,sw=Zx,p=Bu(p),Hv(p)){if("selectionStart"in p)var M={start:p.selectionStart,end:p.selectionEnd};else e:{M=(M=p.ownerDocument)&&M.defaultView||window;var F=M.getSelection&&M.getSelection();if(F&&F.rangeCount!==0){M=F.anchorNode;var K=F.anchorOffset,se=F.focusNode;F=F.focusOffset;try{M.nodeType,se.nodeType}catch{M=null;break e}var De=0,Xe=-1,xt=-1,sn=0,On=0,Yn=p,hn=null;t:for(;;){for(var gn;Yn!==M||K!==0&&Yn.nodeType!==3||(Xe=De+K),Yn!==se||F!==0&&Yn.nodeType!==3||(xt=De+F),Yn.nodeType===3&&(De+=Yn.nodeValue.length),(gn=Yn.firstChild)!==null;)hn=Yn,Yn=gn;for(;;){if(Yn===p)break t;if(hn===M&&++sn===K&&(Xe=De),hn===se&&++On===F&&(xt=De),(gn=Yn.nextSibling)!==null)break;Yn=hn,hn=Yn.parentNode}Yn=gn}M=Xe===-1||xt===-1?null:{start:Xe,end:xt}}else M=null}M=M||{start:0,end:0}}else M=null;for(Fx={focusedElem:p,selectionRange:M},Zx=!1,oe=_;oe!==null;)if(_=oe,p=_.child,(_.subtreeFlags&1024)!==0&&p!==null)p.return=_,oe=p;else for(;oe!==null;){switch(_=oe,se=_.alternate,p=_.flags,_.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&se!==null){p=void 0,M=_,K=se.memoizedProps,se=se.memoizedState,F=M.stateNode;try{var Mi=Ju(M.type,K,M.elementType===M.type);p=F.getSnapshotBeforeUpdate(Mi,se),F.__reactInternalSnapshotBeforeUpdate=p}catch(vi){ss(M,M.return,vi)}}break;case 3:if((p&1024)!==0){if(p=_.stateNode.containerInfo,M=p.nodeType,M===9)oh(p);else if(M===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":oh(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=_.sibling,p!==null){p.return=_.return,oe=p;break}oe=_.return}}function pe(p,_,M){var F=M.flags;switch(M.tag){case 0:case 11:case 15:$t(p,M),F&4&&tl(5,M);break;case 1:if($t(p,M),F&4)if(p=M.stateNode,_===null)try{p.componentDidMount()}catch(De){ss(M,M.return,De)}else{var K=Ju(M.type,_.memoizedProps);_=_.memoizedState;try{p.componentDidUpdate(K,_,p.__reactInternalSnapshotBeforeUpdate)}catch(De){ss(M,M.return,De)}}F&64&&ed(M),F&512&&y(M,M.return);break;case 3:if($t(p,M),F&64&&(p=M.updateQueue,p!==null)){if(_=null,M.child!==null)switch(M.child.tag){case 27:case 5:_=M.child.stateNode;break;case 1:_=M.child.stateNode}try{jd(p,_)}catch(De){ss(M,M.return,De)}}break;case 27:_===null&&F&4&&N(M);case 26:case 5:$t(p,M),_===null&&F&4&&h(M),F&512&&y(M,M.return);break;case 12:$t(p,M);break;case 13:$t(p,M),F&4&&Ke(p,M),F&64&&(p=M.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(M=GP.bind(null,M),dC(p,M))));break;case 22:if(F=M.memoizedState!==null||W,!F){_=_!==null&&_.memoizedState!==null||Z,K=W;var se=Z;W=F,(Z=_)&&!se?an(p,M,(M.subtreeFlags&8772)!==0):$t(p,M),W=K,Z=se}break;case 30:break;default:$t(p,M)}}function ve(p){var _=p.alternate;_!==null&&(p.alternate=null,ve(_)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(_=p.stateNode,_!==null&&lt(_)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var me=null,Re=!1;function Be(p,_,M){for(M=M.child;M!==null;)Ue(p,_,M),M=M.sibling}function Ue(p,_,M){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Rn,M)}catch{}switch(M.tag){case 26:Z||a(M,_),Be(p,_,M),M.memoizedState?M.memoizedState.count--:M.stateNode&&(M=M.stateNode,M.parentNode.removeChild(M));break;case 27:Z||a(M,_);var F=me,K=Re;If(M.type)&&(me=M.stateNode,Re=!1),Be(p,_,M),Mg(M.stateNode),me=F,Re=K;break;case 5:Z||a(M,_);case 6:if(F=me,K=Re,me=null,Be(p,_,M),me=F,Re=K,me!==null)if(Re)try{(me.nodeType===9?me.body:me.nodeName==="HTML"?me.ownerDocument.body:me).removeChild(M.stateNode)}catch(se){ss(M,_,se)}else try{me.removeChild(M.stateNode)}catch(se){ss(M,_,se)}break;case 18:me!==null&&(Re?(p=me,lw(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,M.stateNode),Wy(p)):lw(me,M.stateNode));break;case 4:F=me,K=Re,me=M.stateNode.containerInfo,Re=!0,Be(p,_,M),me=F,Re=K;break;case 0:case 11:case 14:case 15:Z||oa(2,M,_),Z||oa(4,M,_),Be(p,_,M);break;case 1:Z||(a(M,_),F=M.stateNode,typeof F.componentWillUnmount=="function"&&rh(M,_,F)),Be(p,_,M);break;case 21:Be(p,_,M);break;case 22:Z=(F=Z)||M.memoizedState!==null,Be(p,_,M),Z=F;break;default:Be(p,_,M)}}function Ke(p,_){if(_.memoizedState===null&&(p=_.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Wy(p)}catch(M){ss(_,_.return,M)}}function Ye(p){switch(p.tag){case 13:case 19:var _=p.stateNode;return _===null&&(_=p.stateNode=new J),_;case 22:return p=p.stateNode,_=p._retryCache,_===null&&(_=p._retryCache=new J),_;default:throw Error(r(435,p.tag))}}function Ge(p,_){var M=Ye(p);_.forEach(function(F){var K=tC.bind(null,p,F);M.has(F)||(M.add(F),F.then(K,K))})}function Ne(p,_){var M=_.deletions;if(M!==null)for(var F=0;F<M.length;F++){var K=M[F],se=p,De=_,Xe=De;e:for(;Xe!==null;){switch(Xe.tag){case 27:if(If(Xe.type)){me=Xe.stateNode,Re=!1;break e}break;case 5:me=Xe.stateNode,Re=!1;break e;case 3:case 4:me=Xe.stateNode.containerInfo,Re=!0;break e}Xe=Xe.return}if(me===null)throw Error(r(160));Ue(se,De,K),me=null,Re=!1,se=K.alternate,se!==null&&(se.return=null),K.return=null}if(_.subtreeFlags&13878)for(_=_.child;_!==null;)nt(_,p),_=_.sibling}var Je=null;function nt(p,_){var M=p.alternate,F=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Ne(_,p),bt(p),F&4&&(oa(3,p,p.return),tl(3,p),oa(5,p,p.return));break;case 1:Ne(_,p),bt(p),F&512&&(Z||M===null||a(M,M.return)),F&64&&W&&(p=p.updateQueue,p!==null&&(F=p.callbacks,F!==null&&(M=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=M===null?F:M.concat(F))));break;case 26:var K=Je;if(Ne(_,p),bt(p),F&512&&(Z||M===null||a(M,M.return)),F&4){var se=M!==null?M.memoizedState:null;if(F=p.memoizedState,M===null)if(F===null)if(p.stateNode===null){e:{F=p.type,M=p.memoizedProps,K=K.ownerDocument||K;t:switch(F){case"title":se=K.getElementsByTagName("title")[0],(!se||se[vt]||se[Te]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=K.createElement(F),K.head.insertBefore(se,K.querySelector("head > title"))),_a(se,F,M),se[Te]=p,nr(se),F=se;break e;case"link":var De=mC("link","href",K).get(F+(M.href||""));if(De){for(var Xe=0;Xe<De.length;Xe++)if(se=De[Xe],se.getAttribute("href")===(M.href==null||M.href===""?null:M.href)&&se.getAttribute("rel")===(M.rel==null?null:M.rel)&&se.getAttribute("title")===(M.title==null?null:M.title)&&se.getAttribute("crossorigin")===(M.crossOrigin==null?null:M.crossOrigin)){De.splice(Xe,1);break t}}se=K.createElement(F),_a(se,F,M),K.head.appendChild(se);break;case"meta":if(De=mC("meta","content",K).get(F+(M.content||""))){for(Xe=0;Xe<De.length;Xe++)if(se=De[Xe],se.getAttribute("content")===(M.content==null?null:""+M.content)&&se.getAttribute("name")===(M.name==null?null:M.name)&&se.getAttribute("property")===(M.property==null?null:M.property)&&se.getAttribute("http-equiv")===(M.httpEquiv==null?null:M.httpEquiv)&&se.getAttribute("charset")===(M.charSet==null?null:M.charSet)){De.splice(Xe,1);break t}}se=K.createElement(F),_a(se,F,M),K.head.appendChild(se);break;default:throw Error(r(468,F))}se[Te]=p,nr(se),F=se}p.stateNode=F}else gC(K,p.type,p.stateNode);else p.stateNode=yw(K,F,p.memoizedProps);else se!==F?(se===null?M.stateNode!==null&&(M=M.stateNode,M.parentNode.removeChild(M)):se.count--,F===null?gC(K,p.type,p.stateNode):yw(K,F,p.memoizedProps)):F===null&&p.stateNode!==null&&v(p,p.memoizedProps,M.memoizedProps)}break;case 27:Ne(_,p),bt(p),F&512&&(Z||M===null||a(M,M.return)),M!==null&&F&4&&v(p,p.memoizedProps,M.memoizedProps);break;case 5:if(Ne(_,p),bt(p),F&512&&(Z||M===null||a(M,M.return)),p.flags&32){K=p.stateNode;try{al(K,"")}catch(gn){ss(p,p.return,gn)}}F&4&&p.stateNode!=null&&(K=p.memoizedProps,v(p,K,M!==null?M.memoizedProps:K)),F&1024&&(te=!0);break;case 6:if(Ne(_,p),bt(p),F&4){if(p.stateNode===null)throw Error(r(162));F=p.memoizedProps,M=p.stateNode;try{M.nodeValue=F}catch(gn){ss(p,p.return,gn)}}break;case 3:if(Wx=null,K=Je,Je=F_(_.containerInfo),Ne(_,p),Je=K,bt(p),F&4&&M!==null&&M.memoizedState.isDehydrated)try{Wy(_.containerInfo)}catch(gn){ss(p,p.return,gn)}te&&(te=!1,mt(p));break;case 4:F=Je,Je=F_(p.stateNode.containerInfo),Ne(_,p),bt(p),Je=F;break;case 12:Ne(_,p),bt(p);break;case 13:Ne(_,p),bt(p),p.child.flags&8192&&p.memoizedState!==null!=(M!==null&&M.memoizedState!==null)&&(to=Ut()),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,Ge(p,F)));break;case 22:K=p.memoizedState!==null;var xt=M!==null&&M.memoizedState!==null,sn=W,On=Z;if(W=sn||K,Z=On||xt,Ne(_,p),Z=On,W=sn,bt(p),F&8192)e:for(_=p.stateNode,_._visibility=K?_._visibility&-2:_._visibility|1,K&&(M===null||xt||W||Z||jt(p)),M=null,_=p;;){if(_.tag===5||_.tag===26){if(M===null){xt=M=_;try{if(se=xt.stateNode,K)De=se.style,typeof De.setProperty=="function"?De.setProperty("display","none","important"):De.display="none";else{Xe=xt.stateNode;var Yn=xt.memoizedProps.style,hn=Yn!=null&&Yn.hasOwnProperty("display")?Yn.display:null;Xe.style.display=hn==null||typeof hn=="boolean"?"":(""+hn).trim()}}catch(gn){ss(xt,xt.return,gn)}}}else if(_.tag===6){if(M===null){xt=_;try{xt.stateNode.nodeValue=K?"":xt.memoizedProps}catch(gn){ss(xt,xt.return,gn)}}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===p)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break e;for(;_.sibling===null;){if(_.return===null||_.return===p)break e;M===_&&(M=null),_=_.return}M===_&&(M=null),_.sibling.return=_.return,_=_.sibling}F&4&&(F=p.updateQueue,F!==null&&(M=F.retryQueue,M!==null&&(F.retryQueue=null,Ge(p,M))));break;case 19:Ne(_,p),bt(p),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,Ge(p,F)));break;case 30:break;case 21:break;default:Ne(_,p),bt(p)}}function bt(p){var _=p.flags;if(_&2){try{for(var M,F=p.return;F!==null;){if(S(F)){M=F;break}F=F.return}if(M==null)throw Error(r(160));switch(M.tag){case 27:var K=M.stateNode,se=E(p);O(p,se,K);break;case 5:var De=M.stateNode;M.flags&32&&(al(De,""),M.flags&=-33);var Xe=E(p);O(p,Xe,De);break;case 3:case 4:var xt=M.stateNode.containerInfo,sn=E(p);D(p,sn,xt);break;default:throw Error(r(161))}}catch(On){ss(p,p.return,On)}p.flags&=-3}_&4096&&(p.flags&=-4097)}function mt(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var _=p;mt(_),_.tag===5&&_.flags&1024&&_.stateNode.reset(),p=p.sibling}}function $t(p,_){if(_.subtreeFlags&8772)for(_=_.child;_!==null;)pe(p,_.alternate,_),_=_.sibling}function jt(p){for(p=p.child;p!==null;){var _=p;switch(_.tag){case 0:case 11:case 14:case 15:oa(4,_,_.return),jt(_);break;case 1:a(_,_.return);var M=_.stateNode;typeof M.componentWillUnmount=="function"&&rh(_,_.return,M),jt(_);break;case 27:Mg(_.stateNode);case 26:case 5:a(_,_.return),jt(_);break;case 22:_.memoizedState===null&&jt(_);break;case 30:jt(_);break;default:jt(_)}p=p.sibling}}function an(p,_,M){for(M=M&&(_.subtreeFlags&8772)!==0,_=_.child;_!==null;){var F=_.alternate,K=p,se=_,De=se.flags;switch(se.tag){case 0:case 11:case 15:an(K,se,M),tl(4,se);break;case 1:if(an(K,se,M),F=se,K=F.stateNode,typeof K.componentDidMount=="function")try{K.componentDidMount()}catch(sn){ss(F,F.return,sn)}if(F=se,K=F.updateQueue,K!==null){var Xe=F.stateNode;try{var xt=K.shared.hiddenCallbacks;if(xt!==null)for(K.shared.hiddenCallbacks=null,K=0;K<xt.length;K++)Jm(xt[K],Xe)}catch(sn){ss(F,F.return,sn)}}M&&De&64&&ed(se),y(se,se.return);break;case 27:N(se);case 26:case 5:an(K,se,M),M&&F===null&&De&4&&h(se),y(se,se.return);break;case 12:an(K,se,M);break;case 13:an(K,se,M),M&&De&4&&Ke(K,se);break;case 22:se.memoizedState===null&&an(K,se,M),y(se,se.return);break;case 30:break;default:an(K,se,M)}_=_.sibling}}function pt(p,_){var M=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(M=p.memoizedState.cachePool.pool),p=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(p=_.memoizedState.cachePool.pool),p!==M&&(p!=null&&p.refCount++,M!=null&&Ld(M))}function Tt(p,_){p=null,_.alternate!==null&&(p=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==p&&(_.refCount++,p!=null&&Ld(p))}function ut(p,_,M,F){if(_.subtreeFlags&10256)for(_=_.child;_!==null;)Gt(p,_,M,F),_=_.sibling}function Gt(p,_,M,F){var K=_.flags;switch(_.tag){case 0:case 11:case 15:ut(p,_,M,F),K&2048&&tl(9,_);break;case 1:ut(p,_,M,F);break;case 3:ut(p,_,M,F),K&2048&&(p=null,_.alternate!==null&&(p=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==p&&(_.refCount++,p!=null&&Ld(p)));break;case 12:if(K&2048){ut(p,_,M,F),p=_.stateNode;try{var se=_.memoizedProps,De=se.id,Xe=se.onPostCommit;typeof Xe=="function"&&Xe(De,_.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(xt){ss(_,_.return,xt)}}else ut(p,_,M,F);break;case 13:ut(p,_,M,F);break;case 23:break;case 22:se=_.stateNode,De=_.alternate,_.memoizedState!==null?se._visibility&2?ut(p,_,M,F):Jt(p,_):se._visibility&2?ut(p,_,M,F):(se._visibility|=2,Mt(p,_,M,F,(_.subtreeFlags&10256)!==0)),K&2048&&pt(De,_);break;case 24:ut(p,_,M,F),K&2048&&Tt(_.alternate,_);break;default:ut(p,_,M,F)}}function Mt(p,_,M,F,K){for(K=K&&(_.subtreeFlags&10256)!==0,_=_.child;_!==null;){var se=p,De=_,Xe=M,xt=F,sn=De.flags;switch(De.tag){case 0:case 11:case 15:Mt(se,De,Xe,xt,K),tl(8,De);break;case 23:break;case 22:var On=De.stateNode;De.memoizedState!==null?On._visibility&2?Mt(se,De,Xe,xt,K):Jt(se,De):(On._visibility|=2,Mt(se,De,Xe,xt,K)),K&&sn&2048&&pt(De.alternate,De);break;case 24:Mt(se,De,Xe,xt,K),K&&sn&2048&&Tt(De.alternate,De);break;default:Mt(se,De,Xe,xt,K)}_=_.sibling}}function Jt(p,_){if(_.subtreeFlags&10256)for(_=_.child;_!==null;){var M=p,F=_,K=F.flags;switch(F.tag){case 22:Jt(M,F),K&2048&&pt(F.alternate,F);break;case 24:Jt(M,F),K&2048&&Tt(F.alternate,F);break;default:Jt(M,F)}_=_.sibling}}var qt=8192;function en(p){if(p.subtreeFlags&qt)for(p=p.child;p!==null;)on(p),p=p.sibling}function on(p){switch(p.tag){case 26:en(p),p.flags&qt&&p.memoizedState!==null&&yC(Je,p.memoizedState,p.memoizedProps);break;case 5:en(p);break;case 3:case 4:var _=Je;Je=F_(p.stateNode.containerInfo),en(p),Je=_;break;case 22:p.memoizedState===null&&(_=p.alternate,_!==null&&_.memoizedState!==null?(_=qt,qt=16777216,en(p),qt=_):en(p));break;default:en(p)}}function Vn(p){var _=p.alternate;if(_!==null&&(p=_.child,p!==null)){_.child=null;do _=p.sibling,p.sibling=null,p=_;while(p!==null)}}function Gn(p){var _=p.deletions;if((p.flags&16)!==0){if(_!==null)for(var M=0;M<_.length;M++){var F=_[M];oe=F,Wn(F,p)}Vn(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Fn(p),p=p.sibling}function Fn(p){switch(p.tag){case 0:case 11:case 15:Gn(p),p.flags&2048&&oa(9,p,p.return);break;case 3:Gn(p);break;case 12:Gn(p);break;case 22:var _=p.stateNode;p.memoizedState!==null&&_._visibility&2&&(p.return===null||p.return.tag!==13)?(_._visibility&=-3,Qn(p)):Gn(p);break;default:Gn(p)}}function Qn(p){var _=p.deletions;if((p.flags&16)!==0){if(_!==null)for(var M=0;M<_.length;M++){var F=_[M];oe=F,Wn(F,p)}Vn(p)}for(p=p.child;p!==null;){switch(_=p,_.tag){case 0:case 11:case 15:oa(8,_,_.return),Qn(_);break;case 22:M=_.stateNode,M._visibility&2&&(M._visibility&=-3,Qn(_));break;default:Qn(_)}p=p.sibling}}function Wn(p,_){for(;oe!==null;){var M=oe;switch(M.tag){case 0:case 11:case 15:oa(8,M,_);break;case 23:case 22:if(M.memoizedState!==null&&M.memoizedState.cachePool!==null){var F=M.memoizedState.cachePool.pool;F!=null&&F.refCount++}break;case 24:Ld(M.memoizedState.cache)}if(F=M.child,F!==null)F.return=M,oe=F;else e:for(M=p;oe!==null;){F=oe;var K=F.sibling,se=F.return;if(ve(F),F===M){oe=null;break e}if(K!==null){K.return=se,oe=K;break e}oe=se}}}var hr={getCacheForType:function(p){var _=Ms(ws),M=_.data.get(p);return M===void 0&&(M=p(),_.data.set(p,M)),M}},Mr=typeof WeakMap=="function"?WeakMap:Map,ur=0,Lr=null,_r=null,ar=0,Zr=0,Ei=null,Ar=!1,Kr=!1,di=!1,pi=0,Ci=0,Ji=0,Ao=0,eo=0,Tr=0,Ui=0,ai=null,gi=null,yi=!1,to=0,us=1/0,qi=null,Wo=null,zi=0,Qo=null,Fa=null,_l=0,Ba=0,xl=null,Wc=null,bl=0,jl=null;function sa(){if((ur&2)!==0&&ar!==0)return ar&-ar;if(_e.T!==null){var p=zd;return p!==0?p:iw()}return ke()}function ih(){Tr===0&&(Tr=(ar&536870912)===0||yo?ki():536870912);var p=vl.current;return p!==null&&(p.flags|=32),Tr}function ja(p,_,M){(p===Lr&&(Zr===2||Zr===9)||p.cancelPendingCommit!==null)&&(xg(p,0),Fi(p,ar,Tr,!1)),zo(p,M),((ur&2)===0||p!==Lr)&&(p===Lr&&((ur&2)===0&&(Ao|=M),Ci===4&&Fi(p,ar,Tr,!1)),id(p))}function gg(p,_,M){if((ur&6)!==0)throw Error(r(327));var F=!M&&(_&124)===0&&(_&p.expiredLanes)===0||Sr(p,_),K=F?Ex(p,_):Tx(p,_,!0),se=F;do{if(K===0){Kr&&!F&&Fi(p,_,0,!1);break}else{if(M=p.current.alternate,se&&!vg(M)){K=Tx(p,_,!1),se=!1;continue}if(K===2){if(se=_,p.errorRecoveryDisabledLanes&se)var De=0;else De=p.pendingLanes&-536870913,De=De!==0?De:De&536870912?536870912:0;if(De!==0){_=De;e:{var Xe=p;K=ai;var xt=Xe.current.memoizedState.isDehydrated;if(xt&&(xg(Xe,De).flags|=256),De=Tx(Xe,De,!1),De!==2){if(di&&!xt){Xe.errorRecoveryDisabledLanes|=se,Ao|=se,K=4;break e}se=gi,gi=K,se!==null&&(gi===null?gi=se:gi.push.apply(gi,se))}K=De}if(se=!1,K!==2)continue}}if(K===1){xg(p,0),Fi(p,_,0,!0);break}e:{switch(F=p,se=K,se){case 0:case 1:throw Error(r(345));case 4:if((_&4194048)!==_)break;case 6:Fi(F,_,Tr,!Ar);break e;case 2:gi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((_&62914560)===_&&(K=to+300-Ut(),10<K)){if(Fi(F,_,Tr,!Ar),Yr(F,0,!0)!==0)break e;F.timeoutHandle=Vx(yg.bind(null,F,M,gi,qi,yi,_,Tr,Ao,Ui,Ar,se,2,-0,0),K);break e}yg(F,M,gi,qi,yi,_,Tr,Ao,Ui,Ar,se,0,-0,0)}}break}while(!0);id(p)}function yg(p,_,M,F,K,se,De,Xe,xt,sn,On,Yn,hn,gn){if(p.timeoutHandle=-1,Yn=_.subtreeFlags,(Yn&8192||(Yn&16785408)===16785408)&&(Vy={stylesheets:null,count:0,unsuspend:Gx},on(_),Yn=xw(),Yn!==null)){p.cancelPendingCommit=Yn(Mx.bind(null,p,_,se,M,F,K,De,Xe,xt,On,1,hn,gn)),Fi(p,se,De,!sn);return}Mx(p,_,se,M,F,K,De,Xe,xt)}function vg(p){for(var _=p;;){var M=_.tag;if((M===0||M===11||M===15)&&_.flags&16384&&(M=_.updateQueue,M!==null&&(M=M.stores,M!==null)))for(var F=0;F<M.length;F++){var K=M[F],se=K.getSnapshot;K=K.value;try{if(!Pl(se(),K))return!1}catch{return!1}}if(M=_.child,_.subtreeFlags&16384&&M!==null)M.return=_,_=M;else{if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Fi(p,_,M,F){_&=~eo,_&=~Ao,p.suspendedLanes|=_,p.pingedLanes&=~_,F&&(p.warmLanes|=_),F=p.expirationTimes;for(var K=_;0<K;){var se=31-Xn(K),De=1<<se;F[se]=-1,K&=~De}M!==0&&ma(p,M,_)}function td(){return(ur&6)===0?(zy(0),!1):!0}function _g(){if(_r!==null){if(Zr===0)var p=_r.return;else p=_r,qu=Uu=null,r_(p),el=null,Ll=0,p=_r;for(;p!==null;)yu(p.alternate,p),p=p.return;_r=null}}function xg(p,_){var M=p.timeoutHandle;M!==-1&&(p.timeoutHandle=-1,lC(M)),M=p.cancelPendingCommit,M!==null&&(p.cancelPendingCommit=null,M()),_g(),Lr=p,_r=M=Oc(p.current,null),ar=_,Zr=0,Ei=null,Ar=!1,Kr=Sr(p,_),di=!1,Ui=Tr=eo=Ao=Ji=Ci=0,gi=ai=null,yi=!1,(_&8)!==0&&(_|=_&32);var F=p.entangledLanes;if(F!==0)for(p=p.entanglements,F&=_;0<F;){var K=31-Xn(F),se=1<<K;_|=p[K],F&=~se}return pi=_,ju(),M}function KE(p,_){Di=null,_e.H=wf,_===Zm||_===Cp?(_=xy(),Zr=3):_===mx?(_=xy(),Zr=4):Zr=_===y_?8:_!==null&&typeof _=="object"&&typeof _.then=="function"?6:1,Ei=_,_r===null&&(Ci=1,Mf(p,Wa(_,p.current)))}function Sx(){var p=_e.H;return _e.H=wf,p===null?wf:p}function nd(){var p=_e.A;return _e.A=hr,p}function rd(){Ci=4,Ar||(ar&4194048)!==ar&&vl.current!==null||(Kr=!0),(Ji&134217727)===0&&(Ao&134217727)===0||Lr===null||Fi(Lr,ar,Tr,!1)}function Tx(p,_,M){var F=ur;ur|=2;var K=Sx(),se=nd();(Lr!==p||ar!==_)&&(qi=null,xg(p,_)),_=!1;var De=Ci;e:do try{if(Zr!==0&&_r!==null){var Xe=_r,xt=Ei;switch(Zr){case 8:_g(),De=6;break e;case 3:case 2:case 9:case 6:vl.current===null&&(_=!0);var sn=Zr;if(Zr=0,Ei=null,bg(p,Xe,xt,sn),M&&Kr){De=0;break e}break;default:sn=Zr,Zr=0,Ei=null,bg(p,Xe,xt,sn)}}QE(),De=Ci;break}catch(On){KE(p,On)}while(!0);return _&&p.shellSuspendCounter++,qu=Uu=null,ur=F,_e.H=K,_e.A=se,_r===null&&(Lr=null,ar=0,ju()),De}function QE(){for(;_r!==null;)Oy(_r)}function Ex(p,_){var M=ur;ur|=2;var F=Sx(),K=nd();Lr!==p||ar!==_?(qi=null,us=Ut()+500,xg(p,_)):Kr=Sr(p,_);e:do try{if(Zr!==0&&_r!==null){_=_r;var se=Ei;t:switch(Zr){case 1:Zr=0,Ei=null,bg(p,_,se,1);break;case 2:case 9:if(e_(se)){Zr=0,Ei=null,A_(_);break}_=function(){Zr!==2&&Zr!==9||Lr!==p||(Zr=7),id(p)},se.then(_,_);break e;case 3:Zr=7;break e;case 4:Zr=5;break e;case 7:e_(se)?(Zr=0,Ei=null,A_(_)):(Zr=0,Ei=null,bg(p,_,se,7));break;case 5:var De=null;switch(_r.tag){case 26:De=_r.memoizedState;case 5:case 27:var Xe=_r;if(!De||B_(De)){Zr=0,Ei=null;var xt=Xe.sibling;if(xt!==null)_r=xt;else{var sn=Xe.return;sn!==null?(_r=sn,wg(sn)):_r=null}break t}}Zr=0,Ei=null,bg(p,_,se,5);break;case 6:Zr=0,Ei=null,bg(p,_,se,6);break;case 8:_g(),Ci=6;break e;default:throw Error(r(462))}}X1();break}catch(On){KE(p,On)}while(!0);return qu=Uu=null,_e.H=F,_e.A=K,ur=M,_r!==null?0:(Lr=null,ar=0,ju(),Ci)}function X1(){for(;_r!==null&&!fn();)Oy(_r)}function Oy(p){var _=wx(p.alternate,p,pi);p.memoizedProps=p.pendingProps,_===null?wg(p):_r=_}function A_(p){var _=p,M=_.alternate;switch(_.tag){case 15:case 0:_=_o(M,_,_.pendingProps,_.type,void 0,ar);break;case 11:_=_o(M,_,_.pendingProps,_.type.render,_.ref,ar);break;case 5:r_(_);default:yu(M,_),_=_r=So(_,pi),_=wx(M,_,pi)}p.memoizedProps=p.pendingProps,_===null?wg(p):_r=_}function bg(p,_,M,F){qu=Uu=null,r_(_),el=null,Ll=0;var K=_.return;try{if(_x(p,K,_,M,ar)){Ci=1,Mf(p,Wa(M,p.current)),_r=null;return}}catch(se){if(K!==null)throw _r=K,se;Ci=1,Mf(p,Wa(M,p.current)),_r=null;return}_.flags&32768?(yo||F===1?p=!0:Kr||(ar&536870912)!==0?p=!1:(Ar=p=!0,(F===2||F===9||F===3||F===6)&&(F=vl.current,F!==null&&F.tag===13&&(F.flags|=16384))),Cx(_,p)):wg(_)}function wg(p){var _=p;do{if((_.flags&32768)!==0){Cx(_,Ar);return}p=_.return;var M=mg(_.alternate,_,pi);if(M!==null){_r=M;return}if(_=_.sibling,_!==null){_r=_;return}_r=_=p}while(_!==null);Ci===0&&(Ci=5)}function Cx(p,_){do{var M=Np(p.alternate,p);if(M!==null){M.flags&=32767,_r=M;return}if(M=p.return,M!==null&&(M.flags|=32768,M.subtreeFlags=0,M.deletions=null),!_&&(p=p.sibling,p!==null)){_r=p;return}_r=p=M}while(p!==null);Ci=6,_r=null}function Mx(p,_,M,F,K,se,De,Xe,xt){p.cancelPendingCommit=null;do Ly();while(zi!==0);if((ur&6)!==0)throw Error(r(327));if(_!==null){if(_===p.current)throw Error(r(177));if(se=_.lanes|_.childLanes,se|=pl,Rl(p,M,se,De,Xe,xt),p===Lr&&(_r=Lr=null,ar=0),Fa=_,Qo=p,_l=M,Ba=se,xl=K,Wc=F,(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,YP(Nn,function(){return J1(),null})):(p.callbackNode=null,p.callbackPriority=0),F=(_.flags&13878)!==0,(_.subtreeFlags&13878)!==0||F){F=_e.T,_e.T=null,K=Pe.p,Pe.p=2,De=ur,ur|=4;try{ge(p,_,M)}finally{ur=De,Pe.p=K,_e.T=F}}zi=1,Z1(),K1(),Af()}}function Z1(){if(zi===1){zi=0;var p=Qo,_=Fa,M=(_.flags&13878)!==0;if((_.subtreeFlags&13878)!==0||M){M=_e.T,_e.T=null;var F=Pe.p;Pe.p=2;var K=ur;ur|=4;try{nt(_,p);var se=Fx,De=Bu(p.containerInfo),Xe=se.focusedElem,xt=se.selectionRange;if(De!==Xe&&Xe&&Xe.ownerDocument&&dy(Xe.ownerDocument.documentElement,Xe)){if(xt!==null&&Hv(Xe)){var sn=xt.start,On=xt.end;if(On===void 0&&(On=sn),"selectionStart"in Xe)Xe.selectionStart=sn,Xe.selectionEnd=Math.min(On,Xe.value.length);else{var Yn=Xe.ownerDocument||document,hn=Yn&&Yn.defaultView||window;if(hn.getSelection){var gn=hn.getSelection(),Mi=Xe.textContent.length,vi=Math.min(xt.start,Mi),es=xt.end===void 0?vi:Math.min(xt.end,Mi);!gn.extend&&vi>es&&(De=es,es=vi,vi=De);var Yt=Pc(Xe,vi),Bt=Pc(Xe,es);if(Yt&&Bt&&(gn.rangeCount!==1||gn.anchorNode!==Yt.node||gn.anchorOffset!==Yt.offset||gn.focusNode!==Bt.node||gn.focusOffset!==Bt.offset)){var rn=Yn.createRange();rn.setStart(Yt.node,Yt.offset),gn.removeAllRanges(),vi>es?(gn.addRange(rn),gn.extend(Bt.node,Bt.offset)):(rn.setEnd(Bt.node,Bt.offset),gn.addRange(rn))}}}}for(Yn=[],gn=Xe;gn=gn.parentNode;)gn.nodeType===1&&Yn.push({element:gn,left:gn.scrollLeft,top:gn.scrollTop});for(typeof Xe.focus=="function"&&Xe.focus(),Xe=0;Xe<Yn.length;Xe++){var jn=Yn[Xe];jn.element.scrollLeft=jn.left,jn.element.scrollTop=jn.top}}Zx=!!sw,Fx=sw=null}finally{ur=K,Pe.p=F,_e.T=M}}p.current=_,zi=2}}function K1(){if(zi===2){zi=0;var p=Qo,_=Fa,M=(_.flags&8772)!==0;if((_.subtreeFlags&8772)!==0||M){M=_e.T,_e.T=null;var F=Pe.p;Pe.p=2;var K=ur;ur|=4;try{pe(p,_.alternate,_)}finally{ur=K,Pe.p=F,_e.T=M}}zi=3}}function Af(){if(zi===4||zi===3){zi=0,Zt();var p=Qo,_=Fa,M=_l,F=Wc;(_.subtreeFlags&10256)!==0||(_.flags&10256)!==0?zi=5:(zi=0,Fa=Qo=null,Q1(p,p.pendingLanes));var K=p.pendingLanes;if(K===0&&(Wo=null),Pr(M),_=_.stateNode,Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Rn,_,void 0,(_.current.flags&128)===128)}catch{}if(F!==null){_=_e.T,K=Pe.p,Pe.p=2,_e.T=null;try{for(var se=p.onRecoverableError,De=0;De<F.length;De++){var Xe=F[De];se(Xe.value,{componentStack:Xe.stack})}}finally{_e.T=_,Pe.p=K}}(_l&3)!==0&&Ly(),id(p),K=p.pendingLanes,(M&4194090)!==0&&(K&42)!==0?p===jl?bl++:(bl=0,jl=p):bl=0,zy(0)}}function Q1(p,_){(p.pooledCacheLanes&=_)===0&&(_=p.pooledCache,_!=null&&(p.pooledCache=null,Ld(_)))}function Ly(p){return Z1(),K1(),Af(),J1()}function J1(){if(zi!==5)return!1;var p=Qo,_=Ba;Ba=0;var M=Pr(_l),F=_e.T,K=Pe.p;try{Pe.p=32>M?32:M,_e.T=null,M=xl,xl=null;var se=Qo,De=_l;if(zi=0,Fa=Qo=null,_l=0,(ur&6)!==0)throw Error(r(331));var Xe=ur;if(ur|=4,Fn(se.current),Gt(se,se.current,De,M),ur=Xe,zy(0,!1),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Rn,se)}catch{}return!0}finally{Pe.p=K,_e.T=F,Q1(p,_)}}function JE(p,_,M){_=Wa(M,_),_=zp(p.stateNode,_,2),p=jc(p,_,2),p!==null&&(zo(p,2),id(p))}function ss(p,_,M){if(p.tag===3)JE(p,p,M);else for(;_!==null;){if(_.tag===3){JE(_,p,M);break}else if(_.tag===1){var F=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Wo===null||!Wo.has(F))){p=Wa(M,p),M=m_(2),F=jc(_,M,2),F!==null&&(g_(M,F,_,p),zo(F,2),id(F));break}}_=_.return}}function ew(p,_,M){var F=p.pingCache;if(F===null){F=p.pingCache=new Mr;var K=new Set;F.set(_,K)}else K=F.get(_),K===void 0&&(K=new Set,F.set(_,K));K.has(M)||(di=!0,K.add(M),p=eC.bind(null,p,_,M),_.then(p,p))}function eC(p,_,M){var F=p.pingCache;F!==null&&F.delete(_),p.pingedLanes|=p.suspendedLanes&M,p.warmLanes&=~M,Lr===p&&(ar&M)===M&&(Ci===4||Ci===3&&(ar&62914560)===ar&&300>Ut()-to?(ur&2)===0&&xg(p,0):eo|=M,Ui===ar&&(Ui=0)),id(p)}function tw(p,_){_===0&&(_=ns()),p=tc(p,_),p!==null&&(zo(p,_),id(p))}function GP(p){var _=p.memoizedState,M=0;_!==null&&(M=_.retryLane),tw(p,M)}function tC(p,_){var M=0;switch(p.tag){case 13:var F=p.stateNode,K=p.memoizedState;K!==null&&(M=K.retryLane);break;case 19:F=p.stateNode;break;case 22:F=p.stateNode._retryCache;break;default:throw Error(r(314))}F!==null&&F.delete(_),tw(p,M)}function YP(p,_){return Ct(p,_)}var Ax=null,Sg=null,Rx=!1,R_=!1,Dx=!1,Vp=0;function id(p){p!==Sg&&p.next===null&&(Sg===null?Ax=Sg=p:Sg=Sg.next=p),R_=!0,Rx||(Rx=!0,XP())}function zy(p,_){if(!Dx&&R_){Dx=!0;do for(var M=!1,F=Ax;F!==null;){if(p!==0){var K=F.pendingLanes;if(K===0)var se=0;else{var De=F.suspendedLanes,Xe=F.pingedLanes;se=(1<<31-Xn(42|p)+1)-1,se&=K&~(De&~Xe),se=se&201326741?se&201326741|1:se?se|2:0}se!==0&&(M=!0,Fy(F,se))}else se=ar,se=Yr(F,F===Lr?se:0,F.cancelPendingCommit!==null||F.timeoutHandle!==-1),(se&3)===0||Sr(F,se)||(M=!0,Fy(F,se));F=F.next}while(M);Dx=!1}}function nw(){Rf()}function Rf(){R_=Rx=!1;var p=0;Vp!==0&&(aC()&&(p=Vp),Vp=0);for(var _=Ut(),M=null,F=Ax;F!==null;){var K=F.next,se=qs(F,_);se===0?(F.next=null,M===null?Ax=K:M.next=K,K===null&&(Sg=M)):(M=F,(p!==0||(se&3)!==0)&&(R_=!0)),F=K}zy(p)}function qs(p,_){for(var M=p.suspendedLanes,F=p.pingedLanes,K=p.expirationTimes,se=p.pendingLanes&-62914561;0<se;){var De=31-Xn(se),Xe=1<<De,xt=K[De];xt===-1?((Xe&M)===0||(Xe&F)!==0)&&(K[De]=Dr(Xe,_)):xt<=_&&(p.expiredLanes|=Xe),se&=~Xe}if(_=Lr,M=ar,M=Yr(p,p===_?M:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),F=p.callbackNode,M===0||p===_&&(Zr===2||Zr===9)||p.cancelPendingCommit!==null)return F!==null&&F!==null&&Wt(F),p.callbackNode=null,p.callbackPriority=0;if((M&3)===0||Sr(p,M)){if(_=M&-M,_===p.callbackPriority)return _;switch(F!==null&&Wt(F),Pr(M)){case 2:case 8:M=bn;break;case 32:M=Nn;break;case 268435456:M=vn;break;default:M=Nn}return F=rw.bind(null,p),M=Ct(M,F),p.callbackPriority=_,p.callbackNode=M,_}return F!==null&&F!==null&&Wt(F),p.callbackPriority=2,p.callbackNode=null,2}function rw(p,_){if(zi!==0&&zi!==5)return p.callbackNode=null,p.callbackPriority=0,null;var M=p.callbackNode;if(Ly()&&p.callbackNode!==M)return null;var F=ar;return F=Yr(p,p===Lr?F:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),F===0?null:(gg(p,F,_),qs(p,Ut()),p.callbackNode!=null&&p.callbackNode===M?rw.bind(null,p):null)}function Fy(p,_){if(Ly())return null;gg(p,_,!0)}function XP(){$x(function(){(ur&6)!==0?Ct(Bn,nw):Rf()})}function iw(){return Vp===0&&(Vp=ki()),Vp}function nC(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:Md(""+p)}function rC(p,_){var M=_.ownerDocument.createElement("input");return M.name=_.name,M.value=_.value,p.id&&M.setAttribute("form",p.id),_.parentNode.insertBefore(M,_),p=new FormData(p),M.parentNode.removeChild(M),p}function D_(p,_,M,F,K){if(_==="submit"&&M&&M.stateNode===K){var se=nC((K[ze]||null).action),De=F.submitter;De&&(_=(_=De[ze]||null)?nC(_.formAction):De.getAttribute("formAction"),_!==null&&(se=_,De=null));var Xe=new Uh("action","action",null,F,K);p.push({event:Xe,listeners:[{instance:null,listener:function(){if(F.defaultPrevented){if(Vp!==0){var xt=De?rC(K,De):new FormData(K);vf(M,{pending:!0,data:xt,method:K.method,action:se},null,xt)}}else typeof se=="function"&&(Xe.preventDefault(),xt=De?rC(K,De):new FormData(K),vf(M,{pending:!0,data:xt,method:K.method,action:se},se,xt))},currentTarget:K}]})}}for(var Px=0;Px<xn.length;Px++){var Df=xn[Px],P_=Df.toLowerCase(),ZP=Df[0].toUpperCase()+Df.slice(1);Ol(P_,"on"+ZP)}Ol(py,"onAnimationEnd"),Ol(kl,"onAnimationIteration"),Ol(nf,"onAnimationStart"),Ol("dblclick","onDoubleClick"),Ol("focusin","onFocus"),Ol("focusout","onBlur"),Ol(mp,"onTransitionRun"),Ol(Gv,"onTransitionStart"),Ol(my,"onTransitionCancel"),Ol(hl,"onTransitionEnd"),Ir("onMouseEnter",["mouseout","mouseover"]),Ir("onMouseLeave",["mouseout","mouseover"]),Ir("onPointerEnter",["pointerout","pointerover"]),Ir("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var I_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(I_));function iC(p,_){_=(_&4)!==0;for(var M=0;M<p.length;M++){var F=p[M],K=F.event;F=F.listeners;e:{var se=void 0;if(_)for(var De=F.length-1;0<=De;De--){var Xe=F[De],xt=Xe.instance,sn=Xe.currentTarget;if(Xe=Xe.listener,xt!==se&&K.isPropagationStopped())break e;se=Xe,K.currentTarget=sn;try{se(K)}catch(On){Jd(On)}K.currentTarget=null,se=xt}else for(De=0;De<F.length;De++){if(Xe=F[De],xt=Xe.instance,sn=Xe.currentTarget,Xe=Xe.listener,xt!==se&&K.isPropagationStopped())break e;se=Xe,K.currentTarget=sn;try{se(K)}catch(On){Jd(On)}K.currentTarget=null,se=xt}}}}function fo(p,_){var M=_[Qe];M===void 0&&(M=_[Qe]=new Set);var F=p+"__bubble";M.has(F)||(oC(_,p,2,!1),M.add(F))}function ow(p,_,M){var F=0;_&&(F|=4),oC(M,p,F,_)}var Ix="_reactListening"+Math.random().toString(36).slice(2);function k_(p){if(!p[Ix]){p[Ix]=!0,rr.forEach(function(M){M!=="selectionchange"&&(KP.has(M)||ow(M,!1,p),ow(M,!0,p))});var _=p.nodeType===9?p:p.ownerDocument;_===null||_[Ix]||(_[Ix]=!0,ow("selectionchange",!1,_))}}function oC(p,_,M,F){switch(Hy(_)){case 2:var K=nI;break;case 8:K=bC;break;default:K=sh}M=K.bind(null,_,M,p),K=void 0,!Ad||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(K=!0),F?K!==void 0?p.addEventListener(_,M,{capture:!0,passive:K}):p.addEventListener(_,M,!0):K!==void 0?p.addEventListener(_,M,{passive:K}):p.addEventListener(_,M,!1)}function kx(p,_,M,F,K){var se=F;if((_&1)===0&&(_&2)===0&&F!==null)e:for(;;){if(F===null)return;var De=F.tag;if(De===3||De===4){var Xe=F.stateNode.containerInfo;if(Xe===K)break;if(De===4)for(De=F.return;De!==null;){var xt=De.tag;if((xt===3||xt===4)&&De.stateNode.containerInfo===K)return;De=De.return}for(;Xe!==null;){if(De=Ht(Xe),De===null)return;if(xt=De.tag,xt===5||xt===6||xt===26||xt===27){F=se=De;continue e}Xe=Xe.parentNode}}F=F.return}Mm(function(){var sn=se,On=cp(M),Yn=[];e:{var hn=Nm.get(p);if(hn!==void 0){var gn=Uh,Mi=p;switch(p){case"keypress":if(Rm(M)===0)break e;case"keydown":case"keyup":gn=Ri;break;case"focusin":Mi="focus",gn=Gh;break;case"focusout":Mi="blur",gn=Gh;break;case"beforeblur":case"afterblur":gn=Gh;break;case"click":if(M.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gn=Dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gn=Vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gn=Xh;break;case py:case kl:case nf:gn=hx;break;case hl:gn=Om;break;case"scroll":case"scrollend":gn=cl;break;case"wheel":gn=ls;break;case"copy":case"cut":case"paste":gn=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gn=zu;break;case"toggle":case"beforetoggle":gn=Lm}var vi=(_&4)!==0,es=!vi&&(p==="scroll"||p==="scrollend"),Yt=vi?hn!==null?hn+"Capture":null:hn;vi=[];for(var Bt=sn,rn;Bt!==null;){var jn=Bt;if(rn=jn.stateNode,jn=jn.tag,jn!==5&&jn!==26&&jn!==27||rn===null||Yt===null||(jn=ci(Bt,Yt),jn!=null&&vi.push(Pf(Bt,jn,rn))),es)break;Bt=Bt.return}0<vi.length&&(hn=new gn(hn,Mi,null,M,On),Yn.push({event:hn,listeners:vi}))}}if((_&7)===0){e:{if(hn=p==="mouseover"||p==="pointerover",gn=p==="mouseout"||p==="pointerout",hn&&M!==ta&&(Mi=M.relatedTarget||M.fromElement)&&(Ht(Mi)||Mi[$e]))break e;if((gn||hn)&&(hn=On.window===On?On:(hn=On.ownerDocument)?hn.defaultView||hn.parentWindow:window,gn?(Mi=M.relatedTarget||M.toElement,gn=sn,Mi=Mi?Ht(Mi):null,Mi!==null&&(es=c(Mi),vi=Mi.tag,Mi!==es||vi!==5&&vi!==27&&vi!==6)&&(Mi=null)):(gn=null,Mi=sn),gn!==Mi)){if(vi=Dd,jn="onMouseLeave",Yt="onMouseEnter",Bt="mouse",(p==="pointerout"||p==="pointerover")&&(vi=zu,jn="onPointerLeave",Yt="onPointerEnter",Bt="pointer"),es=gn==null?hn:wn(gn),rn=Mi==null?hn:wn(Mi),hn=new vi(jn,Bt+"leave",gn,M,On),hn.target=es,hn.relatedTarget=rn,jn=null,Ht(On)===sn&&(vi=new vi(Yt,Bt+"enter",Mi,M,On),vi.target=rn,vi.relatedTarget=es,jn=vi),es=jn,gn&&Mi)t:{for(vi=gn,Yt=Mi,Bt=0,rn=vi;rn;rn=Jo(rn))Bt++;for(rn=0,jn=Yt;jn;jn=Jo(jn))rn++;for(;0<Bt-rn;)vi=Jo(vi),Bt--;for(;0<rn-Bt;)Yt=Jo(Yt),rn--;for(;Bt--;){if(vi===Yt||Yt!==null&&vi===Yt.alternate)break t;vi=Jo(vi),Yt=Jo(Yt)}vi=null}else vi=null;gn!==null&&Tg(Yn,hn,gn,vi,!1),Mi!==null&&es!==null&&Tg(Yn,es,Mi,vi,!0)}}e:{if(hn=sn?wn(sn):window,gn=hn.nodeName&&hn.nodeName.toLowerCase(),gn==="select"||gn==="input"&&hn.type==="file")var qr=Jl;else if(hp(hn))if(qv)qr=Fm;else{qr=Jh;var no=Qh}else gn=hn.nodeName,!gn||gn.toLowerCase()!=="input"||hn.type!=="checkbox"&&hn.type!=="radio"?sn&&Mc(sn.elementType)&&(qr=Jl):qr=Oa;if(qr&&(qr=qr(p,sn))){vr(Yn,qr,M,On);break e}no&&no(p,hn,sn),p==="focusout"&&sn&&hn.type==="number"&&sn.memoizedProps.value!=null&&Ra(hn,"number",hn.value)}switch(no=sn?wn(sn):window,p){case"focusin":(hp(no)||no.contentEditable==="true")&&(ef=no,hy=sn,jm=null);break;case"focusout":jm=hy=ef=null;break;case"mousedown":pp=!0;break;case"contextmenu":case"mouseup":case"dragend":pp=!1,Wv(Yn,M,On);break;case"selectionchange":if(G1)break;case"keydown":case"keyup":Wv(Yn,M,On)}var ri;if(Id)e:{switch(p){case"compositionstart":var _i="onCompositionStart";break e;case"compositionend":_i="onCompositionEnd";break e;case"compositionupdate":_i="onCompositionUpdate";break e}_i=void 0}else Uo?Uv(p,M)&&(_i="onCompositionEnd"):p==="keydown"&&M.keyCode===229&&(_i="onCompositionStart");_i&&(ga&&M.locale!=="ko"&&(Uo||_i!=="onCompositionStart"?_i==="onCompositionEnd"&&Uo&&(ri=$h()):(Ou=On,Lu="value"in Ou?Ou.value:Ou.textContent,Uo=!0)),no=Ox(sn,_i),0<no.length&&(_i=new Pm(_i,p,null,M,On),Yn.push({event:_i,listeners:no}),ri?_i.data=ri:(ri=Zh(M),ri!==null&&(_i.data=ri)))),(ri=cy?ka(p,M):Nr(p,M))&&(_i=Ox(sn,"onBeforeInput"),0<_i.length&&(no=new Pm("onBeforeInput","beforeinput",null,M,On),Yn.push({event:no,listeners:_i}),no.data=ri)),D_(Yn,p,sn,M,On)}iC(Yn,_)})}function Pf(p,_,M){return{instance:p,listener:_,currentTarget:M}}function Ox(p,_){for(var M=_+"Capture",F=[];p!==null;){var K=p,se=K.stateNode;if(K=K.tag,K!==5&&K!==26&&K!==27||se===null||(K=ci(p,M),K!=null&&F.unshift(Pf(p,K,se)),K=ci(p,_),K!=null&&F.push(Pf(p,K,se))),p.tag===3)return F;p=p.return}return[]}function Jo(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function Tg(p,_,M,F,K){for(var se=_._reactName,De=[];M!==null&&M!==F;){var Xe=M,xt=Xe.alternate,sn=Xe.stateNode;if(Xe=Xe.tag,xt!==null&&xt===F)break;Xe!==5&&Xe!==26&&Xe!==27||sn===null||(xt=sn,K?(sn=ci(M,se),sn!=null&&De.unshift(Pf(M,sn,xt))):K||(sn=ci(M,se),sn!=null&&De.push(Pf(M,sn,xt)))),M=M.return}De.length!==0&&p.push({event:_,listeners:De})}var sC=/\r\n?/g,Lx=/\u0000|\uFFFD/g;function O_(p){return(typeof p=="string"?p:""+p).replace(sC,`
`).replace(Lx,"")}function By(p,_){return _=O_(_),O_(p)===_}function L_(){}function Go(p,_,M,F,K,se){switch(M){case"children":typeof F=="string"?_==="body"||_==="textarea"&&F===""||al(p,F):(typeof F=="number"||typeof F=="bigint")&&_!=="body"&&al(p,""+F);break;case"className":Mo(p,"class",F);break;case"tabIndex":Mo(p,"tabindex",F);break;case"dir":case"role":case"viewBox":case"width":case"height":Mo(p,M,F);break;case"style":sy(p,F,se);break;case"data":if(_!=="object"){Mo(p,"data",F);break}case"src":case"href":if(F===""&&(_!=="a"||M!=="href")){p.removeAttribute(M);break}if(F==null||typeof F=="function"||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(M);break}F=Md(""+F),p.setAttribute(M,F);break;case"action":case"formAction":if(typeof F=="function"){p.setAttribute(M,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(M==="formAction"?(_!=="input"&&Go(p,_,"name",K.name,K,null),Go(p,_,"formEncType",K.formEncType,K,null),Go(p,_,"formMethod",K.formMethod,K,null),Go(p,_,"formTarget",K.formTarget,K,null)):(Go(p,_,"encType",K.encType,K,null),Go(p,_,"method",K.method,K,null),Go(p,_,"target",K.target,K,null)));if(F==null||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(M);break}F=Md(""+F),p.setAttribute(M,F);break;case"onClick":F!=null&&(p.onclick=L_);break;case"onScroll":F!=null&&fo("scroll",p);break;case"onScrollEnd":F!=null&&fo("scrollend",p);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(M=F.__html,M!=null){if(K.children!=null)throw Error(r(60));p.innerHTML=M}}break;case"multiple":p.multiple=F&&typeof F!="function"&&typeof F!="symbol";break;case"muted":p.muted=F&&typeof F!="function"&&typeof F!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(F==null||typeof F=="function"||typeof F=="boolean"||typeof F=="symbol"){p.removeAttribute("xlink:href");break}M=Md(""+F),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",M);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(M,""+F):p.removeAttribute(M);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":F&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(M,""):p.removeAttribute(M);break;case"capture":case"download":F===!0?p.setAttribute(M,""):F!==!1&&F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(M,F):p.removeAttribute(M);break;case"cols":case"rows":case"size":case"span":F!=null&&typeof F!="function"&&typeof F!="symbol"&&!isNaN(F)&&1<=F?p.setAttribute(M,F):p.removeAttribute(M);break;case"rowSpan":case"start":F==null||typeof F=="function"||typeof F=="symbol"||isNaN(F)?p.removeAttribute(M):p.setAttribute(M,F);break;case"popover":fo("beforetoggle",p),fo("toggle",p),Xi(p,"popover",F);break;case"xlinkActuate":Jr(p,"http://www.w3.org/1999/xlink","xlink:actuate",F);break;case"xlinkArcrole":Jr(p,"http://www.w3.org/1999/xlink","xlink:arcrole",F);break;case"xlinkRole":Jr(p,"http://www.w3.org/1999/xlink","xlink:role",F);break;case"xlinkShow":Jr(p,"http://www.w3.org/1999/xlink","xlink:show",F);break;case"xlinkTitle":Jr(p,"http://www.w3.org/1999/xlink","xlink:title",F);break;case"xlinkType":Jr(p,"http://www.w3.org/1999/xlink","xlink:type",F);break;case"xmlBase":Jr(p,"http://www.w3.org/XML/1998/namespace","xml:base",F);break;case"xmlLang":Jr(p,"http://www.w3.org/XML/1998/namespace","xml:lang",F);break;case"xmlSpace":Jr(p,"http://www.w3.org/XML/1998/namespace","xml:space",F);break;case"is":Xi(p,"is",F);break;case"innerText":case"textContent":break;default:(!(2<M.length)||M[0]!=="o"&&M[0]!=="O"||M[1]!=="n"&&M[1]!=="N")&&(M=Cm.get(M)||M,Xi(p,M,F))}}function Eg(p,_,M,F,K,se){switch(M){case"style":sy(p,F,se);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(M=F.__html,M!=null){if(K.children!=null)throw Error(r(60));p.innerHTML=M}}break;case"children":typeof F=="string"?al(p,F):(typeof F=="number"||typeof F=="bigint")&&al(p,""+F);break;case"onScroll":F!=null&&fo("scroll",p);break;case"onScrollEnd":F!=null&&fo("scrollend",p);break;case"onClick":F!=null&&(p.onclick=L_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kr.hasOwnProperty(M))e:{if(M[0]==="o"&&M[1]==="n"&&(K=M.endsWith("Capture"),_=M.slice(2,K?M.length-7:void 0),se=p[ze]||null,se=se!=null?se[M]:null,typeof se=="function"&&p.removeEventListener(_,se,K),typeof F=="function")){typeof se!="function"&&se!==null&&(M in p?p[M]=null:p.hasAttribute(M)&&p.removeAttribute(M)),p.addEventListener(_,F,K);break e}M in p?p[M]=F:F===!0?p.setAttribute(M,""):Xi(p,M,F)}}}function _a(p,_,M){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fo("error",p),fo("load",p);var F=!1,K=!1,se;for(se in M)if(M.hasOwnProperty(se)){var De=M[se];if(De!=null)switch(se){case"src":F=!0;break;case"srcSet":K=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,_));default:Go(p,_,se,De,M,null)}}K&&Go(p,_,"srcSet",M.srcSet,M,null),F&&Go(p,_,"src",M.src,M,null);return;case"input":fo("invalid",p);var Xe=se=De=K=null,xt=null,sn=null;for(F in M)if(M.hasOwnProperty(F)){var On=M[F];if(On!=null)switch(F){case"name":K=On;break;case"type":De=On;break;case"checked":xt=On;break;case"defaultChecked":sn=On;break;case"value":se=On;break;case"defaultValue":Xe=On;break;case"children":case"dangerouslySetInnerHTML":if(On!=null)throw Error(r(137,_));break;default:Go(p,_,F,On,M,null)}}oy(p,se,Xe,xt,sn,De,K,!1),Vh(p);return;case"select":fo("invalid",p),F=De=se=null;for(K in M)if(M.hasOwnProperty(K)&&(Xe=M[K],Xe!=null))switch(K){case"value":se=Xe;break;case"defaultValue":De=Xe;break;case"multiple":F=Xe;default:Go(p,_,K,Xe,M,null)}_=se,M=De,p.multiple=!!F,_!=null?Da(p,!!F,_,!1):M!=null&&Da(p,!!F,M,!0);return;case"textarea":fo("invalid",p),se=K=F=null;for(De in M)if(M.hasOwnProperty(De)&&(Xe=M[De],Xe!=null))switch(De){case"value":F=Xe;break;case"defaultValue":K=Xe;break;case"children":se=Xe;break;case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(91));break;default:Go(p,_,De,Xe,M,null)}Gl(p,F,K,se),Vh(p);return;case"option":for(xt in M)if(M.hasOwnProperty(xt)&&(F=M[xt],F!=null))switch(xt){case"selected":p.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Go(p,_,xt,F,M,null)}return;case"dialog":fo("beforetoggle",p),fo("toggle",p),fo("cancel",p),fo("close",p);break;case"iframe":case"object":fo("load",p);break;case"video":case"audio":for(F=0;F<I_.length;F++)fo(I_[F],p);break;case"image":fo("error",p),fo("load",p);break;case"details":fo("toggle",p);break;case"embed":case"source":case"link":fo("error",p),fo("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(sn in M)if(M.hasOwnProperty(sn)&&(F=M[sn],F!=null))switch(sn){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,_));default:Go(p,_,sn,F,M,null)}return;default:if(Mc(_)){for(On in M)M.hasOwnProperty(On)&&(F=M[On],F!==void 0&&Eg(p,_,On,F,M,void 0));return}}for(Xe in M)M.hasOwnProperty(Xe)&&(F=M[Xe],F!=null&&Go(p,_,Xe,F,M,null))}function zx(p,_,M,F){switch(_){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var K=null,se=null,De=null,Xe=null,xt=null,sn=null,On=null;for(gn in M){var Yn=M[gn];if(M.hasOwnProperty(gn)&&Yn!=null)switch(gn){case"checked":break;case"value":break;case"defaultValue":xt=Yn;default:F.hasOwnProperty(gn)||Go(p,_,gn,null,F,Yn)}}for(var hn in F){var gn=F[hn];if(Yn=M[hn],F.hasOwnProperty(hn)&&(gn!=null||Yn!=null))switch(hn){case"type":se=gn;break;case"name":K=gn;break;case"checked":sn=gn;break;case"defaultChecked":On=gn;break;case"value":De=gn;break;case"defaultValue":Xe=gn;break;case"children":case"dangerouslySetInnerHTML":if(gn!=null)throw Error(r(137,_));break;default:gn!==Yn&&Go(p,_,hn,gn,F,Yn)}}Dl(p,De,Xe,xt,sn,On,se,K);return;case"select":gn=De=Xe=hn=null;for(se in M)if(xt=M[se],M.hasOwnProperty(se)&&xt!=null)switch(se){case"value":break;case"multiple":gn=xt;default:F.hasOwnProperty(se)||Go(p,_,se,null,F,xt)}for(K in F)if(se=F[K],xt=M[K],F.hasOwnProperty(K)&&(se!=null||xt!=null))switch(K){case"value":hn=se;break;case"defaultValue":Xe=se;break;case"multiple":De=se;default:se!==xt&&Go(p,_,K,se,F,xt)}_=Xe,M=De,F=gn,hn!=null?Da(p,!!M,hn,!1):!!F!=!!M&&(_!=null?Da(p,!!M,_,!0):Da(p,!!M,M?[]:"",!1));return;case"textarea":gn=hn=null;for(Xe in M)if(K=M[Xe],M.hasOwnProperty(Xe)&&K!=null&&!F.hasOwnProperty(Xe))switch(Xe){case"value":break;case"children":break;default:Go(p,_,Xe,null,F,K)}for(De in F)if(K=F[De],se=M[De],F.hasOwnProperty(De)&&(K!=null||se!=null))switch(De){case"value":hn=K;break;case"defaultValue":gn=K;break;case"children":break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(91));break;default:K!==se&&Go(p,_,De,K,F,se)}su(p,hn,gn);return;case"option":for(var Mi in M)if(hn=M[Mi],M.hasOwnProperty(Mi)&&hn!=null&&!F.hasOwnProperty(Mi))switch(Mi){case"selected":p.selected=!1;break;default:Go(p,_,Mi,null,F,hn)}for(xt in F)if(hn=F[xt],gn=M[xt],F.hasOwnProperty(xt)&&hn!==gn&&(hn!=null||gn!=null))switch(xt){case"selected":p.selected=hn&&typeof hn!="function"&&typeof hn!="symbol";break;default:Go(p,_,xt,hn,F,gn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vi in M)hn=M[vi],M.hasOwnProperty(vi)&&hn!=null&&!F.hasOwnProperty(vi)&&Go(p,_,vi,null,F,hn);for(sn in F)if(hn=F[sn],gn=M[sn],F.hasOwnProperty(sn)&&hn!==gn&&(hn!=null||gn!=null))switch(sn){case"children":case"dangerouslySetInnerHTML":if(hn!=null)throw Error(r(137,_));break;default:Go(p,_,sn,hn,F,gn)}return;default:if(Mc(_)){for(var es in M)hn=M[es],M.hasOwnProperty(es)&&hn!==void 0&&!F.hasOwnProperty(es)&&Eg(p,_,es,void 0,F,hn);for(On in F)hn=F[On],gn=M[On],!F.hasOwnProperty(On)||hn===gn||hn===void 0&&gn===void 0||Eg(p,_,On,hn,F,gn);return}}for(var Yt in M)hn=M[Yt],M.hasOwnProperty(Yt)&&hn!=null&&!F.hasOwnProperty(Yt)&&Go(p,_,Yt,null,F,hn);for(Yn in F)hn=F[Yn],gn=M[Yn],!F.hasOwnProperty(Yn)||hn===gn||hn==null&&gn==null||Go(p,_,Yn,hn,F,gn)}var sw=null,Fx=null;function jy(p){return p.nodeType===9?p:p.ownerDocument}function Bx(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jx(p,_){if(p===0)switch(_){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&_==="foreignObject"?0:p}function Nx(p,_){return p==="textarea"||p==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.children=="bigint"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var z_=null;function aC(){var p=window.event;return p&&p.type==="popstate"?p===z_?!1:(z_=p,!0):(z_=null,!1)}var Vx=typeof setTimeout=="function"?setTimeout:void 0,lC=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,$x=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(p){return aw.resolve(null).then(p).catch(cC)}:Vx;function cC(p){setTimeout(function(){throw p})}function If(p){return p==="head"}function lw(p,_){var M=_,F=0,K=0;do{var se=M.nextSibling;if(p.removeChild(M),se&&se.nodeType===8)if(M=se.data,M==="/$"){if(0<F&&8>F){M=F;var De=p.ownerDocument;if(M&1&&Mg(De.documentElement),M&2&&Mg(De.body),M&4)for(M=De.head,Mg(M),De=M.firstChild;De;){var Xe=De.nextSibling,xt=De.nodeName;De[vt]||xt==="SCRIPT"||xt==="STYLE"||xt==="LINK"&&De.rel.toLowerCase()==="stylesheet"||M.removeChild(De),De=Xe}}if(K===0){p.removeChild(se),Wy(_);return}K--}else M==="$"||M==="$?"||M==="$!"?K++:F=M.charCodeAt(0)-48;else F=0;M=se}while(M);Wy(_)}function oh(p){var _=p.firstChild;for(_&&_.nodeType===10&&(_=_.nextSibling);_;){var M=_;switch(_=_.nextSibling,M.nodeName){case"HTML":case"HEAD":case"BODY":oh(M),lt(M);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(M.rel.toLowerCase()==="stylesheet")continue}p.removeChild(M)}}function Cg(p,_,M,F){for(;p.nodeType===1;){var K=M;if(p.nodeName.toLowerCase()!==_.toLowerCase()){if(!F&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(F){if(!p[vt])switch(_){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(se=p.getAttribute("rel"),se==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(se!==K.rel||p.getAttribute("href")!==(K.href==null||K.href===""?null:K.href)||p.getAttribute("crossorigin")!==(K.crossOrigin==null?null:K.crossOrigin)||p.getAttribute("title")!==(K.title==null?null:K.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(se=p.getAttribute("src"),(se!==(K.src==null?null:K.src)||p.getAttribute("type")!==(K.type==null?null:K.type)||p.getAttribute("crossorigin")!==(K.crossOrigin==null?null:K.crossOrigin))&&se&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(_==="input"&&p.type==="hidden"){var se=K.name==null?null:""+K.name;if(K.type==="hidden"&&p.getAttribute("name")===se)return p}else return p;if(p=od(p.nextSibling),p===null)break}return null}function uC(p,_,M){if(_==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!M||(p=od(p.nextSibling),p===null))return null;return p}function cw(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState==="complete"}function dC(p,_){var M=p.ownerDocument;if(p.data!=="$?"||M.readyState==="complete")_();else{var F=function(){_(),M.removeEventListener("DOMContentLoaded",F)};M.addEventListener("DOMContentLoaded",F),p._reactRetry=F}}function od(p){for(;p!=null;p=p.nextSibling){var _=p.nodeType;if(_===1||_===3)break;if(_===8){if(_=p.data,_==="$"||_==="$!"||_==="$?"||_==="F!"||_==="F")break;if(_==="/$")return null}}return p}var uw=null;function $p(p){p=p.previousSibling;for(var _=0;p;){if(p.nodeType===8){var M=p.data;if(M==="$"||M==="$!"||M==="$?"){if(_===0)return p;_--}else M==="/$"&&_++}p=p.previousSibling}return null}function dw(p,_,M){switch(_=jy(M),p){case"html":if(p=_.documentElement,!p)throw Error(r(452));return p;case"head":if(p=_.head,!p)throw Error(r(453));return p;case"body":if(p=_.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function Mg(p){for(var _=p.attributes;_.length;)p.removeAttributeNode(_[0]);lt(p)}var lc=new Map,hw=new Set;function F_(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var Nl=Pe.d;Pe.d={f:QP,r:cc,D:hC,C:Ux,L:JP,m:eI,X:fC,S:pw,M:mw};function QP(){var p=Nl.f(),_=td();return p||_}function cc(p){var _=dn(p);_!==null&&_.tag===5&&_.type==="form"?Ry(_):Nl.r(p)}var Ag=typeof document>"u"?null:document;function fw(p,_,M){var F=Ag;if(F&&typeof _=="string"&&_){var K=sl(_);K='link[rel="'+p+'"][href="'+K+'"]',typeof M=="string"&&(K+='[crossorigin="'+M+'"]'),hw.has(K)||(hw.add(K),p={rel:p,crossOrigin:M,href:_},F.querySelector(K)===null&&(_=F.createElement("link"),_a(_,"link",p),nr(_),F.head.appendChild(_)))}}function hC(p){Nl.D(p),fw("dns-prefetch",p,null)}function Ux(p,_){Nl.C(p,_),fw("preconnect",p,_)}function JP(p,_,M){Nl.L(p,_,M);var F=Ag;if(F&&p&&_){var K='link[rel="preload"][as="'+sl(_)+'"]';_==="image"&&M&&M.imageSrcSet?(K+='[imagesrcset="'+sl(M.imageSrcSet)+'"]',typeof M.imageSizes=="string"&&(K+='[imagesizes="'+sl(M.imageSizes)+'"]')):K+='[href="'+sl(p)+'"]';var se=K;switch(_){case"style":se=Rg(p);break;case"script":se=Up(p)}lc.has(se)||(p=T({rel:"preload",href:_==="image"&&M&&M.imageSrcSet?void 0:p,as:_},M),lc.set(se,p),F.querySelector(K)!==null||_==="style"&&F.querySelector(Ny(se))||_==="script"&&F.querySelector(uc(se))||(_=F.createElement("link"),_a(_,"link",p),nr(_),F.head.appendChild(_)))}}function eI(p,_){Nl.m(p,_);var M=Ag;if(M&&p){var F=_&&typeof _.as=="string"?_.as:"script",K='link[rel="modulepreload"][as="'+sl(F)+'"][href="'+sl(p)+'"]',se=K;switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=Up(p)}if(!lc.has(se)&&(p=T({rel:"modulepreload",href:p},_),lc.set(se,p),M.querySelector(K)===null)){switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(M.querySelector(uc(se)))return}F=M.createElement("link"),_a(F,"link",p),nr(F),M.head.appendChild(F)}}}function pw(p,_,M){Nl.S(p,_,M);var F=Ag;if(F&&p){var K=sr(F).hoistableStyles,se=Rg(p);_=_||"default";var De=K.get(se);if(!De){var Xe={loading:0,preload:null};if(De=F.querySelector(Ny(se)))Xe.loading=5;else{p=T({rel:"stylesheet",href:p,"data-precedence":_},M),(M=lc.get(se))&&vw(p,M);var xt=De=F.createElement("link");nr(xt),_a(xt,"link",p),xt._p=new Promise(function(sn,On){xt.onload=sn,xt.onerror=On}),xt.addEventListener("load",function(){Xe.loading|=1}),xt.addEventListener("error",function(){Xe.loading|=2}),Xe.loading|=4,Hx(De,_,F)}De={type:"stylesheet",instance:De,count:1,state:Xe},K.set(se,De)}}}function fC(p,_){Nl.X(p,_);var M=Ag;if(M&&p){var F=sr(M).hoistableScripts,K=Up(p),se=F.get(K);se||(se=M.querySelector(uc(K)),se||(p=T({src:p,async:!0},_),(_=lc.get(K))&&_w(p,_),se=M.createElement("script"),nr(se),_a(se,"link",p),M.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(K,se))}}function mw(p,_){Nl.M(p,_);var M=Ag;if(M&&p){var F=sr(M).hoistableScripts,K=Up(p),se=F.get(K);se||(se=M.querySelector(uc(K)),se||(p=T({src:p,async:!0,type:"module"},_),(_=lc.get(K))&&_w(p,_),se=M.createElement("script"),nr(se),_a(se,"link",p),M.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(K,se))}}function qx(p,_,M,F){var K=(K=ot.current)?F_(K):null;if(!K)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof M.precedence=="string"&&typeof M.href=="string"?(_=Rg(M.href),M=sr(K).hoistableStyles,F=M.get(_),F||(F={type:"style",instance:null,count:0,state:null},M.set(_,F)),F):{type:"void",instance:null,count:0,state:null};case"link":if(M.rel==="stylesheet"&&typeof M.href=="string"&&typeof M.precedence=="string"){p=Rg(M.href);var se=sr(K).hoistableStyles,De=se.get(p);if(De||(K=K.ownerDocument||K,De={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(p,De),(se=K.querySelector(Ny(p)))&&!se._p&&(De.instance=se,De.state.loading=5),lc.has(p)||(M={rel:"preload",as:"style",href:M.href,crossOrigin:M.crossOrigin,integrity:M.integrity,media:M.media,hrefLang:M.hrefLang,referrerPolicy:M.referrerPolicy},lc.set(p,M),se||pC(K,p,M,De.state))),_&&F===null)throw Error(r(528,""));return De}if(_&&F!==null)throw Error(r(529,""));return null;case"script":return _=M.async,M=M.src,typeof M=="string"&&_&&typeof _!="function"&&typeof _!="symbol"?(_=Up(M),M=sr(K).hoistableScripts,F=M.get(_),F||(F={type:"script",instance:null,count:0,state:null},M.set(_,F)),F):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function Rg(p){return'href="'+sl(p)+'"'}function Ny(p){return'link[rel="stylesheet"]['+p+"]"}function gw(p){return T({},p,{"data-precedence":p.precedence,precedence:null})}function pC(p,_,M,F){p.querySelector('link[rel="preload"][as="style"]['+_+"]")?F.loading=1:(_=p.createElement("link"),F.preload=_,_.addEventListener("load",function(){return F.loading|=1}),_.addEventListener("error",function(){return F.loading|=2}),_a(_,"link",M),nr(_),p.head.appendChild(_))}function Up(p){return'[src="'+sl(p)+'"]'}function uc(p){return"script[async]"+p}function yw(p,_,M){if(_.count++,_.instance===null)switch(_.type){case"style":var F=p.querySelector('style[data-href~="'+sl(M.href)+'"]');if(F)return _.instance=F,nr(F),F;var K=T({},M,{"data-href":M.href,"data-precedence":M.precedence,href:null,precedence:null});return F=(p.ownerDocument||p).createElement("style"),nr(F),_a(F,"style",K),Hx(F,M.precedence,p),_.instance=F;case"stylesheet":K=Rg(M.href);var se=p.querySelector(Ny(K));if(se)return _.state.loading|=4,_.instance=se,nr(se),se;F=gw(M),(K=lc.get(K))&&vw(F,K),se=(p.ownerDocument||p).createElement("link"),nr(se);var De=se;return De._p=new Promise(function(Xe,xt){De.onload=Xe,De.onerror=xt}),_a(se,"link",F),_.state.loading|=4,Hx(se,M.precedence,p),_.instance=se;case"script":return se=Up(M.src),(K=p.querySelector(uc(se)))?(_.instance=K,nr(K),K):(F=M,(K=lc.get(se))&&(F=T({},M),_w(F,K)),p=p.ownerDocument||p,K=p.createElement("script"),nr(K),_a(K,"link",F),p.head.appendChild(K),_.instance=K);case"void":return null;default:throw Error(r(443,_.type))}else _.type==="stylesheet"&&(_.state.loading&4)===0&&(F=_.instance,_.state.loading|=4,Hx(F,M.precedence,p));return _.instance}function Hx(p,_,M){for(var F=M.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),K=F.length?F[F.length-1]:null,se=K,De=0;De<F.length;De++){var Xe=F[De];if(Xe.dataset.precedence===_)se=Xe;else if(se!==K)break}se?se.parentNode.insertBefore(p,se.nextSibling):(_=M.nodeType===9?M.head:M,_.insertBefore(p,_.firstChild))}function vw(p,_){p.crossOrigin==null&&(p.crossOrigin=_.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=_.referrerPolicy),p.title==null&&(p.title=_.title)}function _w(p,_){p.crossOrigin==null&&(p.crossOrigin=_.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=_.referrerPolicy),p.integrity==null&&(p.integrity=_.integrity)}var Wx=null;function mC(p,_,M){if(Wx===null){var F=new Map,K=Wx=new Map;K.set(M,F)}else K=Wx,F=K.get(M),F||(F=new Map,K.set(M,F));if(F.has(p))return F;for(F.set(p,null),M=M.getElementsByTagName(p),K=0;K<M.length;K++){var se=M[K];if(!(se[vt]||se[Te]||p==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var De=se.getAttribute(_)||"";De=p+De;var Xe=F.get(De);Xe?Xe.push(se):F.set(De,[se])}}return F}function gC(p,_,M){p=p.ownerDocument||p,p.head.insertBefore(M,_==="title"?p.querySelector("head > title"):null)}function tI(p,_,M){if(M===1||_.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof _.precedence!="string"||typeof _.href!="string"||_.href==="")break;return!0;case"link":if(typeof _.rel!="string"||typeof _.href!="string"||_.href===""||_.onLoad||_.onError)break;switch(_.rel){case"stylesheet":return p=_.disabled,typeof _.precedence=="string"&&p==null;default:return!0}case"script":if(_.async&&typeof _.async!="function"&&typeof _.async!="symbol"&&!_.onLoad&&!_.onError&&_.src&&typeof _.src=="string")return!0}return!1}function B_(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var Vy=null;function Gx(){}function yC(p,_,M){if(Vy===null)throw Error(r(475));var F=Vy;if(_.type==="stylesheet"&&(typeof M.media!="string"||matchMedia(M.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var K=Rg(M.href),se=p.querySelector(Ny(K));if(se){p=se._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(F.count++,F=$y.bind(F),p.then(F,F)),_.state.loading|=4,_.instance=se,nr(se);return}se=p.ownerDocument||p,M=gw(M),(K=lc.get(K))&&vw(M,K),se=se.createElement("link"),nr(se);var De=se;De._p=new Promise(function(Xe,xt){De.onload=Xe,De.onerror=xt}),_a(se,"link",M),_.instance=se}F.stylesheets===null&&(F.stylesheets=new Map),F.stylesheets.set(_,p),(p=_.state.preload)&&(_.state.loading&3)===0&&(F.count++,_=$y.bind(F),p.addEventListener("load",_),p.addEventListener("error",_))}}function xw(){if(Vy===null)throw Error(r(475));var p=Vy;return p.stylesheets&&p.count===0&&bw(p,p.stylesheets),0<p.count?function(_){var M=setTimeout(function(){if(p.stylesheets&&bw(p,p.stylesheets),p.unsuspend){var F=p.unsuspend;p.unsuspend=null,F()}},6e4);return p.unsuspend=_,function(){p.unsuspend=null,clearTimeout(M)}}:null}function $y(){if(this.count--,this.count===0){if(this.stylesheets)bw(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var j_=null;function bw(p,_){p.stylesheets=null,p.unsuspend!==null&&(p.count++,j_=new Map,_.forEach(vC,p),j_=null,$y.call(p))}function vC(p,_){if(!(_.state.loading&4)){var M=j_.get(p);if(M)var F=M.get(null);else{M=new Map,j_.set(p,M);for(var K=p.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<K.length;se++){var De=K[se];(De.nodeName==="LINK"||De.getAttribute("media")!=="not all")&&(M.set(De.dataset.precedence,De),F=De)}F&&M.set(null,F)}K=_.instance,De=K.getAttribute("data-precedence"),se=M.get(De)||F,se===F&&M.set(null,K),M.set(De,K),this.count++,F=$y.bind(this),K.addEventListener("load",F),K.addEventListener("error",F),se?se.parentNode.insertBefore(K,se.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(K,p.firstChild)),_.state.loading|=4}}var Uy={$$typeof:G,Provider:null,Consumer:null,_currentValue:We,_currentValue2:We,_threadCount:0};function _C(p,_,M,F,K,se,De,Xe){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.hiddenUpdates=Vo(null),this.identifierPrefix=F,this.onUncaughtError=K,this.onCaughtError=se,this.onRecoverableError=De,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Xe,this.incompleteTransitions=new Map}function ww(p,_,M,F,K,se,De,Xe,xt,sn,On,Yn){return p=new _C(p,_,M,De,Xe,xt,sn,Yn),_=1,se===!0&&(_|=24),se=ml(3,null,null,_),p.current=se,se.stateNode=p,_=Sp(),_.refCount++,p.pooledCache=_,_.refCount++,se.memoizedState={element:F,isDehydrated:M,cache:_},by(se),p}function Yx(p){return p?(p=kd,p):kd}function Sw(p,_,M,F,K,se){K=Yx(K),F.context===null?F.context=K:F.pendingContext=K,F=hu(_),F.payload={element:M},se=se===void 0?null:se,se!==null&&(F.callback=se),M=jc(p,F,_),M!==null&&(ja(M,p,_),Ap(M,p,_))}function Xx(p,_){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var M=p.retryLane;p.retryLane=M!==0&&M<_?M:_}}function Tw(p,_){Xx(p,_),(p=p.alternate)&&Xx(p,_)}function xC(p){if(p.tag===13){var _=tc(p,67108864);_!==null&&ja(_,p,67108864),Tw(p,67108864)}}var Zx=!0;function nI(p,_,M,F){var K=_e.T;_e.T=null;var se=Pe.p;try{Pe.p=2,sh(p,_,M,F)}finally{Pe.p=se,_e.T=K}}function bC(p,_,M,F){var K=_e.T;_e.T=null;var se=Pe.p;try{Pe.p=8,sh(p,_,M,F)}finally{Pe.p=se,_e.T=K}}function sh(p,_,M,F){if(Zx){var K=Dg(F);if(K===null)kx(p,_,F,qp,M),Ew(p,F);else if(wC(K,p,_,M,F))F.stopPropagation();else if(Ew(p,F),_&4&&-1<Qx.indexOf(p)){for(;K!==null;){var se=dn(K);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var De=ir(se.pendingLanes);if(De!==0){var Xe=se;for(Xe.pendingLanes|=2,Xe.entangledLanes|=2;De;){var xt=1<<31-Xn(De);Xe.entanglements[1]|=xt,De&=~xt}id(se),(ur&6)===0&&(us=Ut()+500,zy(0))}}break;case 13:Xe=tc(se,2),Xe!==null&&ja(Xe,se,2),td(),Tw(se,2)}if(se=Dg(F),se===null&&kx(p,_,F,qp,M),se===K)break;K=se}K!==null&&F.stopPropagation()}else kx(p,_,F,null,M)}}function Dg(p){return p=cp(p),qy(p)}var qp=null;function qy(p){if(qp=null,p=Ht(p),p!==null){var _=c(p);if(_===null)p=null;else{var M=_.tag;if(M===13){if(p=d(_),p!==null)return p;p=null}else if(M===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;p=null}else _!==p&&(p=null)}}return qp=p,null}function Hy(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case Bn:return 2;case bn:return 8;case Nn:case ft:return 32;case vn:return 268435456;default:return 32}default:return 32}}var Kx=!1,kf=null,Of=null,Lf=null,N_=new Map,V_=new Map,zf=[],Qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ew(p,_){switch(p){case"focusin":case"focusout":kf=null;break;case"dragenter":case"dragleave":Of=null;break;case"mouseover":case"mouseout":Lf=null;break;case"pointerover":case"pointerout":N_.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":V_.delete(_.pointerId)}}function $_(p,_,M,F,K,se){return p===null||p.nativeEvent!==se?(p={blockedOn:_,domEventName:M,eventSystemFlags:F,nativeEvent:se,targetContainers:[K]},_!==null&&(_=dn(_),_!==null&&xC(_)),p):(p.eventSystemFlags|=F,_=p.targetContainers,K!==null&&_.indexOf(K)===-1&&_.push(K),p)}function wC(p,_,M,F,K){switch(_){case"focusin":return kf=$_(kf,p,_,M,F,K),!0;case"dragenter":return Of=$_(Of,p,_,M,F,K),!0;case"mouseover":return Lf=$_(Lf,p,_,M,F,K),!0;case"pointerover":var se=K.pointerId;return N_.set(se,$_(N_.get(se)||null,p,_,M,F,K)),!0;case"gotpointercapture":return se=K.pointerId,V_.set(se,$_(V_.get(se)||null,p,_,M,F,K)),!0}return!1}function Jx(p){var _=Ht(p.target);if(_!==null){var M=c(_);if(M!==null){if(_=M.tag,_===13){if(_=d(M),_!==null){p.blockedOn=_,ie(p.priority,function(){if(M.tag===13){var F=sa();F=ea(F);var K=tc(M,F);K!==null&&ja(K,M,F),Tw(M,F)}});return}}else if(_===3&&M.stateNode.current.memoizedState.isDehydrated){p.blockedOn=M.tag===3?M.stateNode.containerInfo:null;return}}}p.blockedOn=null}function U_(p){if(p.blockedOn!==null)return!1;for(var _=p.targetContainers;0<_.length;){var M=Dg(p.nativeEvent);if(M===null){M=p.nativeEvent;var F=new M.constructor(M.type,M);ta=F,M.target.dispatchEvent(F),ta=null}else return _=dn(M),_!==null&&xC(_),p.blockedOn=M,!1;_.shift()}return!0}function Cw(p,_,M){U_(p)&&M.delete(_)}function SC(){Kx=!1,kf!==null&&U_(kf)&&(kf=null),Of!==null&&U_(Of)&&(Of=null),Lf!==null&&U_(Lf)&&(Lf=null),N_.forEach(Cw),V_.forEach(Cw)}function q_(p,_){p.blockedOn===_&&(p.blockedOn=null,Kx||(Kx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,SC)))}var H_=null;function TC(p){H_!==p&&(H_=p,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){H_===p&&(H_=null);for(var _=0;_<p.length;_+=3){var M=p[_],F=p[_+1],K=p[_+2];if(typeof F!="function"){if(qy(F||M)===null)continue;break}var se=dn(M);se!==null&&(p.splice(_,3),_-=3,vf(se,{pending:!0,data:K,method:M.method,action:F},F,K))}}))}function Wy(p){function _(xt){return q_(xt,p)}kf!==null&&q_(kf,p),Of!==null&&q_(Of,p),Lf!==null&&q_(Lf,p),N_.forEach(_),V_.forEach(_);for(var M=0;M<zf.length;M++){var F=zf[M];F.blockedOn===p&&(F.blockedOn=null)}for(;0<zf.length&&(M=zf[0],M.blockedOn===null);)Jx(M),M.blockedOn===null&&zf.shift();if(M=(p.ownerDocument||p).$$reactFormReplay,M!=null)for(F=0;F<M.length;F+=3){var K=M[F],se=M[F+1],De=K[ze]||null;if(typeof se=="function")De||TC(M);else if(De){var Xe=null;if(se&&se.hasAttribute("formAction")){if(K=se,De=se[ze]||null)Xe=De.formAction;else if(qy(K)!==null)continue}else Xe=De.action;typeof Xe=="function"?M[F+1]=Xe:(M.splice(F,3),F-=3),TC(M)}}}function eb(p){this._internalRoot=p}ah.prototype.render=eb.prototype.render=function(p){var _=this._internalRoot;if(_===null)throw Error(r(409));var M=_.current,F=sa();Sw(M,F,p,_,null,null)},ah.prototype.unmount=eb.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var _=p.containerInfo;Sw(p.current,2,null,p,null,null),td(),_[$e]=null}};function ah(p){this._internalRoot=p}ah.prototype.unstable_scheduleHydration=function(p){if(p){var _=ke();p={blockedOn:null,target:p,priority:_};for(var M=0;M<zf.length&&_!==0&&_<zf[M].priority;M++);zf.splice(M,0,p),M===0&&Jx(p)}};var Mw=t.version;if(Mw!=="19.1.0")throw Error(r(527,Mw,"19.1.0"));Pe.findDOMNode=function(p){var _=p._reactInternals;if(_===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=m(_),p=p!==null?x(p):null,p=p===null?null:p.stateNode,p};var EC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_e,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var W_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!W_.isDisabled&&W_.supportsFiber)try{Rn=W_.inject(EC),Hn=W_}catch{}}return Jw.createRoot=function(p,_){if(!s(p))throw Error(r(299));var M=!1,F="",K=Cf,se=Lp,De=Iy,Xe=null;return _!=null&&(_.unstable_strictMode===!0&&(M=!0),_.identifierPrefix!==void 0&&(F=_.identifierPrefix),_.onUncaughtError!==void 0&&(K=_.onUncaughtError),_.onCaughtError!==void 0&&(se=_.onCaughtError),_.onRecoverableError!==void 0&&(De=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(Xe=_.unstable_transitionCallbacks)),_=ww(p,1,!1,null,null,M,F,K,se,De,Xe,null),p[$e]=_.current,k_(p),new eb(_)},Jw.hydrateRoot=function(p,_,M){if(!s(p))throw Error(r(299));var F=!1,K="",se=Cf,De=Lp,Xe=Iy,xt=null,sn=null;return M!=null&&(M.unstable_strictMode===!0&&(F=!0),M.identifierPrefix!==void 0&&(K=M.identifierPrefix),M.onUncaughtError!==void 0&&(se=M.onUncaughtError),M.onCaughtError!==void 0&&(De=M.onCaughtError),M.onRecoverableError!==void 0&&(Xe=M.onRecoverableError),M.unstable_transitionCallbacks!==void 0&&(xt=M.unstable_transitionCallbacks),M.formState!==void 0&&(sn=M.formState)),_=ww(p,1,!0,_,M??null,F,K,se,De,Xe,xt,sn),_.context=Yx(null),M=_.current,F=sa(),F=ea(F),K=hu(F),K.callback=null,jc(M,K,F),M=F,_.current.lanes=M,zo(_,M),id(_),p[$e]=_.current,k_(p),new ah(_)},Jw.version="19.1.0",Jw}var EU;function wle(){if(EU)return ZI.exports;EU=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ZI.exports=ble(),ZI.exports}var Sle=wle(),U=Fh();const Rt=Ls(U),eR=fle({__proto__:null,default:Rt},[U]);var eS={},CU;function Tle(){if(CU)return eS;CU=1,Object.defineProperty(eS,"__esModule",{value:!0}),eS.parse=d,eS.serialize=x;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function d(A,I){const k=new c,B=A.length;if(B<2)return k;const j=(I==null?void 0:I.decode)||T;let V=0;do{const H=A.indexOf("=",V);if(H===-1)break;const G=A.indexOf(";",V),X=G===-1?B:G;if(H>X){V=A.lastIndexOf(";",H-1)+1;continue}const Q=i(A,V,H),ee=m(A,H,Q),ce=A.slice(Q,ee);if(k[ce]===void 0){let fe=i(A,H+1,X),ue=m(A,X,fe);const ae=j(A.slice(fe,ue));k[ce]=ae}V=X+1}while(V<B);return k}function i(A,I,k){do{const B=A.charCodeAt(I);if(B!==32&&B!==9)return I}while(++I<k);return k}function m(A,I,k){for(;I>k;){const B=A.charCodeAt(--I);if(B!==32&&B!==9)return I+1}return k}function x(A,I,k){const B=(k==null?void 0:k.encode)||encodeURIComponent;if(!e.test(A))throw new TypeError(`argument name is invalid: ${A}`);const j=B(I);if(!t.test(j))throw new TypeError(`argument val is invalid: ${I}`);let V=A+"="+j;if(!k)return V;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);V+="; Max-Age="+k.maxAge}if(k.domain){if(!n.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);V+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);V+="; Path="+k.path}if(k.expires){if(!C(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);V+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(V+="; HttpOnly"),k.secure&&(V+="; Secure"),k.partitioned&&(V+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return V}function T(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function C(A){return s.call(A)==="[object Date]"}return eS}Tle();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jX=e=>{throw TypeError(e)},Ele=(e,t,n)=>t.has(e)||jX("Cannot "+n),tk=(e,t,n)=>(Ele(e,t,"read from private field"),n?n.call(e):t.get(e)),Cle=(e,t,n)=>t.has(e)?jX("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),MU="popstate";function Mle(e={}){function t(r,s){let{pathname:c,search:d,hash:i}=r.location;return dT("",{pathname:c,search:d,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:dv(s)}return Rle(t,n,null,e)}function bo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ca(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ale(){return Math.random().toString(36).substring(2,10)}function AU(e,t){return{usr:e.state,key:e.key,idx:t}}function dT(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?xv(t):t,state:n,key:t&&t.key||r||Ale()}}function dv({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function xv(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Rle(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:c=!1}=r,d=s.history,i="POP",m=null,x=T();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function T(){return(d.state||{idx:null}).idx}function C(){i="POP";let j=T(),V=j==null?null:j-x;x=j,m&&m({action:i,location:B.location,delta:V})}function A(j,V){i="PUSH";let H=dT(B.location,j,V);x=T()+1;let G=AU(H,x),X=B.createHref(H);try{d.pushState(G,"",X)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(X)}c&&m&&m({action:i,location:B.location,delta:1})}function I(j,V){i="REPLACE";let H=dT(B.location,j,V);x=T();let G=AU(H,x),X=B.createHref(H);d.replaceState(G,"",X),c&&m&&m({action:i,location:B.location,delta:0})}function k(j){let V=s.location.origin!=="null"?s.location.origin:s.location.href,H=typeof j=="string"?j:dv(j);return H=H.replace(/ $/,"%20"),bo(V,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,V)}let B={get action(){return i},get location(){return e(s,d)},listen(j){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(MU,C),m=j,()=>{s.removeEventListener(MU,C),m=null}},createHref(j){return t(s,j)},createURL:k,encodeLocation(j){let V=k(j);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:A,replace:I,go(j){return d.go(j)}};return B}var IS,RU=class{constructor(e){if(Cle(this,IS,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(tk(this,IS).has(e))return tk(this,IS).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){tk(this,IS).set(e,t)}};IS=new WeakMap;var Dle=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ple(e){return Dle.has(e)}var Ile=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function kle(e){return Ile.has(e)}function Ole(e){return e.index===!0}function tR(e,t,n=[],r={}){return e.map((s,c)=>{let d=[...n,String(c)],i=typeof s.id=="string"?s.id:d.join("-");if(bo(s.index!==!0||!s.children,"Cannot specify children on an index route"),bo(!r[i],`Found a route id collision on id "${i}".  Route id's must be globally unique within Data Router usages`),Ole(s)){let m={...s,...t(s),id:i};return r[i]=m,m}else{let m={...s,...t(s),id:i,children:void 0};return r[i]=m,s.children&&(m.children=tR(s.children,t,d,r)),m}})}function rv(e,t,n="/"){return hA(e,t,n,!1)}function hA(e,t,n,r){let s=typeof t=="string"?xv(t):t,c=Dh(s.pathname||"/",n);if(c==null)return null;let d=NX(e);zle(d);let i=null;for(let m=0;i==null&&m<d.length;++m){let x=Gle(c);i=Hle(d[m],x,r)}return i}function Lle(e,t){let{route:n,pathname:r,params:s}=e;return{id:n.id,pathname:r,params:s,data:t[n.id],handle:n.handle}}function NX(e,t=[],n=[],r=""){let s=(c,d,i)=>{let m={relativePath:i===void 0?c.path||"":i,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};m.relativePath.startsWith("/")&&(bo(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let x=am([r,m.relativePath]),T=n.concat(m);c.children&&c.children.length>0&&(bo(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),NX(c.children,t,T,x)),!(c.path==null&&!c.index)&&t.push({path:x,score:Ule(x,c.index),routesMeta:T})};return e.forEach((c,d)=>{var i;if(c.path===""||!((i=c.path)!=null&&i.includes("?")))s(c,d);else for(let m of VX(c.path))s(c,d,m)}),t}function VX(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return s?[c,""]:[c];let d=VX(r.join("/")),i=[];return i.push(...d.map(m=>m===""?c:[c,m].join("/"))),s&&i.push(...d),i.map(m=>e.startsWith("/")&&m===""?"/":m)}function zle(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qle(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Fle=/^:[\w-]+$/,Ble=3,jle=2,Nle=1,Vle=10,$le=-2,DU=e=>e==="*";function Ule(e,t){let n=e.split("/"),r=n.length;return n.some(DU)&&(r+=$le),t&&(r+=jle),n.filter(s=>!DU(s)).reduce((s,c)=>s+(Fle.test(c)?Ble:c===""?Nle:Vle),r)}function qle(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Hle(e,t,n=!1){let{routesMeta:r}=e,s={},c="/",d=[];for(let i=0;i<r.length;++i){let m=r[i],x=i===r.length-1,T=c==="/"?t:t.slice(c.length)||"/",C=$g({path:m.relativePath,caseSensitive:m.caseSensitive,end:x},T),A=m.route;if(!C&&x&&n&&!r[r.length-1].route.index&&(C=$g({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},T)),!C)return null;Object.assign(s,C.params),d.push({params:s,pathname:am([c,C.pathname]),pathnameBase:Zle(am([c,C.pathnameBase])),route:A}),C.pathnameBase!=="/"&&(c=am([c,C.pathnameBase]))}return d}function $g(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Wle(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let c=s[0],d=c.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((x,{paramName:T,isOptional:C},A)=>{if(T==="*"){let k=i[A]||"";d=c.slice(0,c.length-k.length).replace(/(.)\/+$/,"$1")}const I=i[A];return C&&!I?x[T]=void 0:x[T]=(I||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:d,pattern:e}}function Wle(e,t=!1,n=!0){Ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,i,m)=>(r.push({paramName:i,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Gle(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ca(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Dh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Yle(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?xv(e):e;return{pathname:n?n.startsWith("/")?n:Xle(n,t):t,search:Kle(r),hash:Qle(s)}}function Xle(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nk(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $X(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function iD(e){let t=$X(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function oD(e,t,n,r=!1){let s;typeof e=="string"?s=xv(e):(s={...e},bo(!s.pathname||!s.pathname.includes("?"),nk("?","pathname","search",s)),bo(!s.pathname||!s.pathname.includes("#"),nk("#","pathname","hash",s)),bo(!s.search||!s.search.includes("#"),nk("#","search","hash",s)));let c=e===""||s.pathname==="",d=c?"/":s.pathname,i;if(d==null)i=n;else{let C=t.length-1;if(!r&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),C-=1;s.pathname=A.join("/")}i=C>=0?t[C]:"/"}let m=Yle(s,i),x=d&&d!=="/"&&d.endsWith("/"),T=(c||d===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(x||T)&&(m.pathname+="/"),m}var am=e=>e.join("/").replace(/\/\/+/g,"/"),Zle=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qle=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,nR=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function hT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var UX=["POST","PUT","PATCH","DELETE"],Jle=new Set(UX),ece=["GET",...UX],tce=new Set(ece),nce=new Set([301,302,303,307,308]),rce=new Set([307,308]),rk={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ice={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tS={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oce=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),qX="remix-router-transitions",HX=Symbol("ResetLoaderData");function sce(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";bo(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.hydrationRouteProperties||[],s=e.mapRouteProperties||oce,c={},d=tR(e.routes,s,void 0,c),i,m=e.basename||"/",x=e.dataStrategy||dce,T={unstable_middleware:!1,...e.future},C=null,A=new Set,I=null,k=null,B=null,j=e.hydrationData!=null,V=rv(d,e.history.location,m),H=!1,G=null;if(V==null&&!e.patchRoutesOnNavigation){let ke=yh(404,{pathname:e.history.location.pathname}),{matches:ie,route:le}=$U(d);V=ie,G={[le.id]:ke}}V&&!e.hydrationData&&ma(V,d,e.history.location.pathname).active&&(V=null);let X;if(V)if(V.some(ke=>ke.route.lazy))X=!1;else if(!V.some(ke=>ke.route.loader))X=!0;else{let ke=e.hydrationData?e.hydrationData.loaderData:null,ie=e.hydrationData?e.hydrationData.errors:null;if(ie){let le=V.findIndex(Te=>ie[Te.route.id]!==void 0);X=V.slice(0,le+1).every(Te=>!PF(Te.route,ke,ie))}else X=V.every(le=>!PF(le.route,ke,ie))}else{X=!1,V=[];let ke=ma(null,d,e.history.location.pathname);ke.active&&ke.matches&&(H=!0,V=ke.matches)}let Q,ee={historyAction:e.history.action,location:e.history.location,matches:V,initialized:X,navigation:rk,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||G,fetchers:new Map,blockers:new Map},ce="POP",fe=!1,ue,ae=!1,xe=new Map,we=null,Me=!1,Se=!1,Ae=new Set,_e=new Map,Pe=0,We=-1,Fe=new Map,Ce=new Set,He=new Map,dt=new Map,gt=new Set,Nt=new Map,wt,ot=null;function st(){if(C=e.history.listen(({action:ke,location:ie,delta:le})=>{if(wt){wt(),wt=void 0;return}Ca(Nt.size===0||le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Te=Dr({currentLocation:ee.location,nextLocation:ie,historyAction:ke});if(Te&&le!=null){let ze=new Promise($e=>{wt=$e});e.history.go(le*-1),Sr(Te,{state:"blocked",location:ie,proceed(){Sr(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:ie}),ze.then(()=>e.history.go(le))},reset(){let $e=new Map(ee.blockers);$e.set(Te,tS),Et({blockers:$e})}});return}return Wt(ke,ie)}),n){wce(t,xe);let ke=()=>Sce(t,xe);t.addEventListener("pagehide",ke),we=()=>t.removeEventListener("pagehide",ke)}return ee.initialized||Wt("POP",ee.location,{initialHydration:!0}),Q}function St(){C&&C(),we&&we(),A.clear(),ue&&ue.abort(),ee.fetchers.forEach((ke,ie)=>Xn(ie)),ee.blockers.forEach((ke,ie)=>Yr(ie))}function Dt(ke){return A.add(ke),()=>A.delete(ke)}function Et(ke,ie={}){ee={...ee,...ke};let le=[],Te=[];ee.fetchers.forEach((ze,$e)=>{ze.state==="idle"&&(gt.has($e)?le.push($e):Te.push($e))}),gt.forEach(ze=>{!ee.fetchers.has(ze)&&!_e.has(ze)&&le.push(ze)}),[...A].forEach(ze=>ze(ee,{deletedFetchers:le,viewTransitionOpts:ie.viewTransitionOpts,flushSync:ie.flushSync===!0})),le.forEach(ze=>Xn(ze)),Te.forEach(ze=>ee.fetchers.delete(ze))}function yt(ke,ie,{flushSync:le}={}){var ct,vt;let Te=ee.actionData!=null&&ee.navigation.formMethod!=null&&fd(ee.navigation.formMethod)&&ee.navigation.state==="loading"&&((ct=ke.state)==null?void 0:ct._isRedirect)!==!0,ze;ie.actionData?Object.keys(ie.actionData).length>0?ze=ie.actionData:ze=null:Te?ze=ee.actionData:ze=null;let $e=ie.loaderData?NU(ee.loaderData,ie.loaderData,ie.matches||[],ie.errors):ee.loaderData,Qe=ee.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((lt,Ht)=>Qe.set(Ht,tS)));let Ze=fe===!0||ee.navigation.formMethod!=null&&fd(ee.navigation.formMethod)&&((vt=ke.state)==null?void 0:vt._isRedirect)!==!0;i&&(d=i,i=void 0),Me||ce==="POP"||(ce==="PUSH"?e.history.push(ke,ke.state):ce==="REPLACE"&&e.history.replace(ke,ke.state));let et;if(ce==="POP"){let lt=xe.get(ee.location.pathname);lt&&lt.has(ke.pathname)?et={currentLocation:ee.location,nextLocation:ke}:xe.has(ke.pathname)&&(et={currentLocation:ke,nextLocation:ee.location})}else if(ae){let lt=xe.get(ee.location.pathname);lt?lt.add(ke.pathname):(lt=new Set([ke.pathname]),xe.set(ee.location.pathname,lt)),et={currentLocation:ee.location,nextLocation:ke}}Et({...ie,actionData:ze,loaderData:$e,historyAction:ce,location:ke,initialized:!0,navigation:rk,revalidation:"idle",restoreScrollPosition:Rl(ke,ie.matches||ee.matches),preventScrollReset:Ze,blockers:Qe},{viewTransitionOpts:et,flushSync:le===!0}),ce="POP",fe=!1,ae=!1,Me=!1,Se=!1,ot==null||ot.resolve(),ot=null}async function Lt(ke,ie){if(typeof ke=="number"){e.history.go(ke);return}let le=DF(ee.location,ee.matches,m,ke,ie==null?void 0:ie.fromRouteId,ie==null?void 0:ie.relative),{path:Te,submission:ze,error:$e}=PU(!1,le,ie),Qe=ee.location,Ze=dT(ee.location,Te,ie&&ie.state);Ze={...Ze,...e.history.encodeLocation(Ze)};let et=ie&&ie.replace!=null?ie.replace:void 0,ct="PUSH";et===!0?ct="REPLACE":et===!1||ze!=null&&fd(ze.formMethod)&&ze.formAction===ee.location.pathname+ee.location.search&&(ct="REPLACE");let vt=ie&&"preventScrollReset"in ie?ie.preventScrollReset===!0:void 0,lt=(ie&&ie.flushSync)===!0,Ht=Dr({currentLocation:Qe,nextLocation:Ze,historyAction:ct});if(Ht){Sr(Ht,{state:"blocked",location:Ze,proceed(){Sr(Ht,{state:"proceeding",proceed:void 0,reset:void 0,location:Ze}),Lt(ke,ie)},reset(){let dn=new Map(ee.blockers);dn.set(Ht,tS),Et({blockers:dn})}});return}await Wt(ct,Ze,{submission:ze,pendingError:$e,preventScrollReset:vt,replace:ie&&ie.replace,enableViewTransition:ie&&ie.viewTransition,flushSync:lt})}function Ct(){ot||(ot=Tce()),tn(),Et({revalidation:"loading"});let ke=ot.promise;return ee.navigation.state==="submitting"?ke:ee.navigation.state==="idle"?(Wt(ee.historyAction,ee.location,{startUninterruptedRevalidation:!0}),ke):(Wt(ce||ee.historyAction,ee.navigation.location,{overrideNavigation:ee.navigation,enableViewTransition:ae===!0}),ke)}async function Wt(ke,ie,le){ue&&ue.abort(),ue=null,ce=ke,Me=(le&&le.startUninterruptedRevalidation)===!0,zo(ee.location,ee.matches),fe=(le&&le.preventScrollReset)===!0,ae=(le&&le.enableViewTransition)===!0;let Te=i||d,ze=le&&le.overrideNavigation,$e=le!=null&&le.initialHydration&&ee.matches&&ee.matches.length>0&&!H?ee.matches:rv(Te,ie,m),Qe=(le&&le.flushSync)===!0;if($e&&ee.initialized&&!Se&&yce(ee.location,ie)&&!(le&&le.submission&&fd(le.submission.formMethod))){yt(ie,{matches:$e},{flushSync:Qe});return}let Ze=ma($e,Te,ie.pathname);if(Ze.active&&Ze.matches&&($e=Ze.matches),!$e){let{error:sr,notFoundMatches:nr,route:rr}=ki(ie.pathname);yt(ie,{matches:nr,loaderData:{},errors:{[rr.id]:sr}},{flushSync:Qe});return}ue=new AbortController;let et=Pb(e.history,ie,ue.signal,le&&le.submission),ct=new RU(e.unstable_getContext?await e.unstable_getContext():void 0),vt;if(le&&le.pendingError)vt=[p0($e).route.id,{type:"error",error:le.pendingError}];else if(le&&le.submission&&fd(le.submission.formMethod)){let sr=await fn(et,ie,le.submission,$e,ct,Ze.active,le&&le.initialHydration===!0,{replace:le.replace,flushSync:Qe});if(sr.shortCircuited)return;if(sr.pendingActionResult){let[nr,rr]=sr.pendingActionResult;if(hd(rr)&&hT(rr.error)&&rr.error.status===404){ue=null,yt(ie,{matches:sr.matches,loaderData:{},errors:{[nr]:rr.error}});return}}$e=sr.matches||$e,vt=sr.pendingActionResult,ze=ik(ie,le.submission),Qe=!1,Ze.active=!1,et=Pb(e.history,et.url,et.signal)}let{shortCircuited:lt,matches:Ht,loaderData:dn,errors:wn}=await Zt(et,ie,$e,ct,Ze.active,ze,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,Qe,vt);lt||(ue=null,yt(ie,{matches:Ht||$e,...VU(vt),loaderData:dn,errors:wn}))}async function fn(ke,ie,le,Te,ze,$e,Qe,Ze={}){tn();let et=xce(ie,le);if(Et({navigation:et},{flushSync:Ze.flushSync===!0}),$e){let lt=await mn(Te,ie.pathname,ke.signal);if(lt.type==="aborted")return{shortCircuited:!0};if(lt.type==="error"){let Ht=p0(lt.partialMatches).route.id;return{matches:lt.partialMatches,pendingActionResult:[Ht,{type:"error",error:lt.error}]}}else if(lt.matches)Te=lt.matches;else{let{notFoundMatches:Ht,error:dn,route:wn}=ki(ie.pathname);return{matches:Ht,pendingActionResult:[wn.id,{type:"error",error:dn}]}}}let ct,vt=kS(Te,ie);if(!vt.route.action&&!vt.route.lazy)ct={type:"error",error:yh(405,{method:ke.method,pathname:ie.pathname,routeId:vt.route.id})};else{let lt=Zb(s,c,ke,Te,vt,Qe?[]:r,ze),Ht=await vn(ke,lt,ze,null);if(ct=Ht[vt.route.id],!ct){for(let dn of Te)if(Ht[dn.route.id]){ct=Ht[dn.route.id];break}}if(ke.signal.aborted)return{shortCircuited:!0}}if(v0(ct)){let lt;return Ze&&Ze.replace!=null?lt=Ze.replace:lt=FU(ct.response.headers.get("Location"),new URL(ke.url),m)===ee.location.pathname+ee.location.search,await ft(ke,ct,!0,{submission:le,replace:lt}),{shortCircuited:!0}}if(hd(ct)){let lt=p0(Te,vt.route.id);return(Ze&&Ze.replace)!==!0&&(ce="PUSH"),{matches:Te,pendingActionResult:[lt.route.id,ct,vt.route.id]}}return{matches:Te,pendingActionResult:[vt.route.id,ct]}}async function Zt(ke,ie,le,Te,ze,$e,Qe,Ze,et,ct,vt,lt){let Ht=$e||ik(ie,Qe),dn=Qe||Ze||qU(Ht),wn=!Me&&!ct;if(ze){if(wn){let go=Ut(lt);Et({navigation:Ht,...go!==void 0?{actionData:go}:{}},{flushSync:vt})}let Jr=await mn(le,ie.pathname,ke.signal);if(Jr.type==="aborted")return{shortCircuited:!0};if(Jr.type==="error"){let go=p0(Jr.partialMatches).route.id;return{matches:Jr.partialMatches,loaderData:{},errors:{[go]:Jr.error}}}else if(Jr.matches)le=Jr.matches;else{let{error:go,notFoundMatches:$s,route:$o}=ki(ie.pathname);return{matches:$s,loaderData:{},errors:{[$o.id]:go}}}}let sr=i||d,{dsMatches:nr,revalidatingFetchers:rr}=IU(ke,Te,s,c,e.history,ee,le,dn,ie,ct?[]:r,ct===!0,Se,Ae,gt,He,Ce,sr,m,lt);if(We=++Pe,!e.dataStrategy&&!nr.some(Jr=>Jr.shouldLoad)&&rr.length===0){let Jr=Cr();return yt(ie,{matches:le,loaderData:{},errors:lt&&hd(lt[1])?{[lt[0]]:lt[1].error}:null,...VU(lt),...Jr?{fetchers:new Map(ee.fetchers)}:{}},{flushSync:vt}),{shortCircuited:!0}}if(wn){let Jr={};if(!ze){Jr.navigation=Ht;let go=Ut(lt);go!==void 0&&(Jr.actionData=go)}rr.length>0&&(Jr.fetchers=kn(rr)),Et(Jr,{flushSync:vt})}rr.forEach(Jr=>{Mn(Jr.key),Jr.controller&&_e.set(Jr.key,Jr.controller)});let kr=()=>rr.forEach(Jr=>Mn(Jr.key));ue&&ue.signal.addEventListener("abort",kr);let{loaderResults:Si,fetcherResults:Ir}=await Ot(nr,rr,ke,Te);if(ke.signal.aborted)return{shortCircuited:!0};ue&&ue.signal.removeEventListener("abort",kr),rr.forEach(Jr=>_e.delete(Jr.key));let ui=lM(Si);if(ui)return await ft(ke,ui.result,!0,{replace:et}),{shortCircuited:!0};if(ui=lM(Ir),ui)return Ce.add(ui.key),await ft(ke,ui.result,!0,{replace:et}),{shortCircuited:!0};let{loaderData:ti,errors:Ti}=jU(ee,le,Si,lt,rr,Ir);ct&&ee.errors&&(Ti={...ee.errors,...Ti});let ji=Cr(),Xi=xr(We),Mo=ji||Xi||rr.length>0;return{matches:le,loaderData:ti,errors:Ti,...Mo?{fetchers:new Map(ee.fetchers)}:{}}}function Ut(ke){if(ke&&!hd(ke[1]))return{[ke[0]]:ke[1].data};if(ee.actionData)return Object.keys(ee.actionData).length===0?null:ee.actionData}function kn(ke){return ke.forEach(ie=>{let le=ee.fetchers.get(ie.key),Te=nS(void 0,le?le.data:void 0);ee.fetchers.set(ie.key,Te)}),new Map(ee.fetchers)}async function Bn(ke,ie,le,Te){Mn(ke);let ze=(Te&&Te.flushSync)===!0,$e=i||d,Qe=DF(ee.location,ee.matches,m,le,ie,Te==null?void 0:Te.relative),Ze=rv($e,Qe,m),et=ma(Ze,$e,Qe);if(et.active&&et.matches&&(Ze=et.matches),!Ze){Hn(ke,ie,yh(404,{pathname:Qe}),{flushSync:ze});return}let{path:ct,submission:vt,error:lt}=PU(!0,Qe,Te);if(lt){Hn(ke,ie,lt,{flushSync:ze});return}let Ht=kS(Ze,ct),dn=new RU(e.unstable_getContext?await e.unstable_getContext():void 0),wn=(Te&&Te.preventScrollReset)===!0;if(vt&&fd(vt.formMethod)){await bn(ke,ie,ct,Ht,Ze,dn,et.active,ze,wn,vt);return}He.set(ke,{routeId:ie,path:ct}),await Nn(ke,ie,ct,Ht,Ze,dn,et.active,ze,wn,vt)}async function bn(ke,ie,le,Te,ze,$e,Qe,Ze,et,ct){tn(),He.delete(ke);function vt(Oi){if(!Oi.route.action&&!Oi.route.lazy){let rs=yh(405,{method:ct.formMethod,pathname:le,routeId:ie});return Hn(ke,ie,rs,{flushSync:Ze}),!0}return!1}if(!Qe&&vt(Te))return;let lt=ee.fetchers.get(ke);Rn(ke,bce(ct,lt),{flushSync:Ze});let Ht=new AbortController,dn=Pb(e.history,le,Ht.signal,ct);if(Qe){let Oi=await mn(ze,le,dn.signal,ke);if(Oi.type==="aborted")return;if(Oi.type==="error"){Hn(ke,ie,Oi.error,{flushSync:Ze});return}else if(Oi.matches){if(ze=Oi.matches,Te=kS(ze,le),vt(Te))return}else{Hn(ke,ie,yh(404,{pathname:le}),{flushSync:Ze});return}}_e.set(ke,Ht);let wn=Pe,sr=Zb(s,c,dn,ze,Te,r,$e),rr=(await vn(dn,sr,$e,ke))[Te.route.id];if(dn.signal.aborted){_e.get(ke)===Ht&&_e.delete(ke);return}if(gt.has(ke)){if(v0(rr)||hd(rr)){Rn(ke,ev(void 0));return}}else{if(v0(rr))if(_e.delete(ke),We>wn){Rn(ke,ev(void 0));return}else return Ce.add(ke),Rn(ke,nS(ct)),ft(dn,rr,!1,{fetcherSubmission:ct,preventScrollReset:et});if(hd(rr)){Hn(ke,ie,rr.error);return}}let kr=ee.navigation.location||ee.location,Si=Pb(e.history,kr,Ht.signal),Ir=i||d,ui=ee.navigation.state!=="idle"?rv(Ir,ee.navigation.location,m):ee.matches;bo(ui,"Didn't find any matches after fetcher action");let ti=++Pe;Fe.set(ke,ti);let Ti=nS(ct,rr.data);ee.fetchers.set(ke,Ti);let{dsMatches:ji,revalidatingFetchers:Xi}=IU(Si,$e,s,c,e.history,ee,ui,ct,kr,r,!1,Se,Ae,gt,He,Ce,Ir,m,[Te.route.id,rr]);Xi.filter(Oi=>Oi.key!==ke).forEach(Oi=>{let rs=Oi.key,ol=ee.fetchers.get(rs),zs=nS(void 0,ol?ol.data:void 0);ee.fetchers.set(rs,zs),Mn(rs),Oi.controller&&_e.set(rs,Oi.controller)}),Et({fetchers:new Map(ee.fetchers)});let Mo=()=>Xi.forEach(Oi=>Mn(Oi.key));Ht.signal.addEventListener("abort",Mo);let{loaderResults:Jr,fetcherResults:go}=await Ot(ji,Xi,Si,$e);if(Ht.signal.aborted)return;Ht.signal.removeEventListener("abort",Mo),Fe.delete(ke),_e.delete(ke),Xi.forEach(Oi=>_e.delete(Oi.key));let $s=lM(Jr);if($s)return ft(Si,$s.result,!1,{preventScrollReset:et});if($s=lM(go),$s)return Ce.add($s.key),ft(Si,$s.result,!1,{preventScrollReset:et});let{loaderData:$o,errors:fs}=jU(ee,ui,Jr,void 0,Xi,go);if(ee.fetchers.has(ke)){let Oi=ev(rr.data);ee.fetchers.set(ke,Oi)}xr(ti),ee.navigation.state==="loading"&&ti>We?(bo(ce,"Expected pending action"),ue&&ue.abort(),yt(ee.navigation.location,{matches:ui,loaderData:$o,errors:fs,fetchers:new Map(ee.fetchers)})):(Et({errors:fs,loaderData:NU(ee.loaderData,$o,ui,fs),fetchers:new Map(ee.fetchers)}),Se=!1)}async function Nn(ke,ie,le,Te,ze,$e,Qe,Ze,et,ct){let vt=ee.fetchers.get(ke);Rn(ke,nS(ct,vt?vt.data:void 0),{flushSync:Ze});let lt=new AbortController,Ht=Pb(e.history,le,lt.signal);if(Qe){let rr=await mn(ze,le,Ht.signal,ke);if(rr.type==="aborted")return;if(rr.type==="error"){Hn(ke,ie,rr.error,{flushSync:Ze});return}else if(rr.matches)ze=rr.matches,Te=kS(ze,le);else{Hn(ke,ie,yh(404,{pathname:le}),{flushSync:Ze});return}}_e.set(ke,lt);let dn=Pe,wn=Zb(s,c,Ht,ze,Te,r,$e),nr=(await vn(Ht,wn,$e,ke))[Te.route.id];if(_e.get(ke)===lt&&_e.delete(ke),!Ht.signal.aborted){if(gt.has(ke)){Rn(ke,ev(void 0));return}if(v0(nr))if(We>dn){Rn(ke,ev(void 0));return}else{Ce.add(ke),await ft(Ht,nr,!1,{preventScrollReset:et});return}if(hd(nr)){Hn(ke,ie,nr.error);return}Rn(ke,ev(nr.data))}}async function ft(ke,ie,le,{submission:Te,fetcherSubmission:ze,preventScrollReset:$e,replace:Qe}={}){ie.response.headers.has("X-Remix-Revalidate")&&(Se=!0);let Ze=ie.response.headers.get("Location");bo(Ze,"Expected a Location header on the redirect Response"),Ze=FU(Ze,new URL(ke.url),m);let et=dT(ee.location,Ze,{_isRedirect:!0});if(n){let wn=!1;if(ie.response.headers.has("X-Remix-Reload-Document"))wn=!0;else if(Nj.test(Ze)){const sr=e.history.createURL(Ze);wn=sr.origin!==t.location.origin||Dh(sr.pathname,m)==null}if(wn){Qe?t.location.replace(Ze):t.location.assign(Ze);return}}ue=null;let ct=Qe===!0||ie.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:vt,formAction:lt,formEncType:Ht}=ee.navigation;!Te&&!ze&&vt&&lt&&Ht&&(Te=qU(ee.navigation));let dn=Te||ze;if(rce.has(ie.response.status)&&dn&&fd(dn.formMethod))await Wt(ct,et,{submission:{...dn,formAction:Ze},preventScrollReset:$e||fe,enableViewTransition:le?ae:void 0});else{let wn=ik(et,Te);await Wt(ct,et,{overrideNavigation:wn,fetcherSubmission:ze,preventScrollReset:$e||fe,enableViewTransition:le?ae:void 0})}}async function vn(ke,ie,le,Te){let ze,$e={};try{ze=await hce(x,ke,ie,Te,le,!1)}catch(Qe){return ie.filter(Ze=>Ze.shouldLoad).forEach(Ze=>{$e[Ze.route.id]={type:"error",error:Qe}}),$e}for(let[Qe,Ze]of Object.entries(ze))if(vce(Ze)){let et=Ze.result;$e[Qe]={type:"redirect",response:mce(et,ke,Qe,ie,m)}}else $e[Qe]=await pce(Ze);return $e}async function Ot(ke,ie,le,Te){let ze=vn(le,ke,Te,null),$e=Promise.all(ie.map(async et=>{if(et.matches&&et.match&&et.request&&et.controller){let vt=(await vn(et.request,et.matches,Te,et.key))[et.match.route.id];return{[et.key]:vt}}else return Promise.resolve({[et.key]:{type:"error",error:yh(404,{pathname:et.path})}})})),Qe=await ze,Ze=(await $e).reduce((et,ct)=>Object.assign(et,ct),{});return{loaderResults:Qe,fetcherResults:Ze}}function tn(){Se=!0,He.forEach((ke,ie)=>{_e.has(ie)&&Ae.add(ie),Mn(ie)})}function Rn(ke,ie,le={}){ee.fetchers.set(ke,ie),Et({fetchers:new Map(ee.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Hn(ke,ie,le,Te={}){let ze=p0(ee.matches,ie);Xn(ke),Et({errors:{[ze.route.id]:le},fetchers:new Map(ee.fetchers)},{flushSync:(Te&&Te.flushSync)===!0})}function mr(ke){return dt.set(ke,(dt.get(ke)||0)+1),gt.has(ke)&&gt.delete(ke),ee.fetchers.get(ke)||ice}function Xn(ke){let ie=ee.fetchers.get(ke);_e.has(ke)&&!(ie&&ie.state==="loading"&&Fe.has(ke))&&Mn(ke),He.delete(ke),Fe.delete(ke),Ce.delete(ke),gt.delete(ke),Ae.delete(ke),ee.fetchers.delete(ke)}function or(ke){let ie=(dt.get(ke)||0)-1;ie<=0?(dt.delete(ke),gt.add(ke)):dt.set(ke,ie),Et({fetchers:new Map(ee.fetchers)})}function Mn(ke){let ie=_e.get(ke);ie&&(ie.abort(),_e.delete(ke))}function Fr(ke){for(let ie of ke){let le=mr(ie),Te=ev(le.data);ee.fetchers.set(ie,Te)}}function Cr(){let ke=[],ie=!1;for(let le of Ce){let Te=ee.fetchers.get(le);bo(Te,`Expected fetcher: ${le}`),Te.state==="loading"&&(Ce.delete(le),ke.push(le),ie=!0)}return Fr(ke),ie}function xr(ke){let ie=[];for(let[le,Te]of Fe)if(Te<ke){let ze=ee.fetchers.get(le);bo(ze,`Expected fetcher: ${le}`),ze.state==="loading"&&(Mn(le),Fe.delete(le),ie.push(le))}return Fr(ie),ie.length>0}function ir(ke,ie){let le=ee.blockers.get(ke)||tS;return Nt.get(ke)!==ie&&Nt.set(ke,ie),le}function Yr(ke){ee.blockers.delete(ke),Nt.delete(ke)}function Sr(ke,ie){let le=ee.blockers.get(ke)||tS;bo(le.state==="unblocked"&&ie.state==="blocked"||le.state==="blocked"&&ie.state==="blocked"||le.state==="blocked"&&ie.state==="proceeding"||le.state==="blocked"&&ie.state==="unblocked"||le.state==="proceeding"&&ie.state==="unblocked",`Invalid blocker state transition: ${le.state} -> ${ie.state}`);let Te=new Map(ee.blockers);Te.set(ke,ie),Et({blockers:Te})}function Dr({currentLocation:ke,nextLocation:ie,historyAction:le}){if(Nt.size===0)return;Nt.size>1&&Ca(!1,"A router only supports one blocker at a time");let Te=Array.from(Nt.entries()),[ze,$e]=Te[Te.length-1],Qe=ee.blockers.get(ze);if(!(Qe&&Qe.state==="proceeding")&&$e({currentLocation:ke,nextLocation:ie,historyAction:le}))return ze}function ki(ke){let ie=yh(404,{pathname:ke}),le=i||d,{matches:Te,route:ze}=$U(le);return{notFoundMatches:Te,route:ze,error:ie}}function ns(ke,ie,le){if(I=ke,B=ie,k=le||null,!j&&ee.navigation===rk){j=!0;let Te=Rl(ee.location,ee.matches);Te!=null&&Et({restoreScrollPosition:Te})}return()=>{I=null,B=null,k=null}}function Vo(ke,ie){return k&&k(ke,ie.map(Te=>Lle(Te,ee.loaderData)))||ke.key}function zo(ke,ie){if(I&&B){let le=Vo(ke,ie);I[le]=B()}}function Rl(ke,ie){if(I){let le=Vo(ke,ie),Te=I[le];if(typeof Te=="number")return Te}return null}function ma(ke,ie,le){if(e.patchRoutesOnNavigation)if(ke){if(Object.keys(ke[0].params).length>0)return{active:!0,matches:hA(ie,le,m,!0)}}else return{active:!0,matches:hA(ie,le,m,!0)||[]};return{active:!1,matches:null}}async function mn(ke,ie,le,Te){if(!e.patchRoutesOnNavigation)return{type:"success",matches:ke};let ze=ke;for(;;){let $e=i==null,Qe=i||d,Ze=c;try{await e.patchRoutesOnNavigation({signal:le,path:ie,matches:ze,fetcherKey:Te,patch:(vt,lt)=>{le.aborted||kU(vt,lt,Qe,Ze,s)}})}catch(vt){return{type:"error",error:vt,partialMatches:ze}}finally{$e&&!le.aborted&&(d=[...d])}if(le.aborted)return{type:"aborted"};let et=rv(Qe,ie,m);if(et)return{type:"success",matches:et};let ct=hA(Qe,ie,m,!0);if(!ct||ze.length===ct.length&&ze.every((vt,lt)=>vt.route.id===ct[lt].route.id))return{type:"success",matches:null};ze=ct}}function ea(ke){c={},i=tR(ke,s,void 0,c)}function Pr(ke,ie){let le=i==null;kU(ke,ie,i||d,c,s),le&&(d=[...d],Et({}))}return Q={get basename(){return m},get future(){return T},get state(){return ee},get routes(){return d},get window(){return t},initialize:st,subscribe:Dt,enableScrollRestoration:ns,navigate:Lt,fetch:Bn,revalidate:Ct,createHref:ke=>e.history.createHref(ke),encodeLocation:ke=>e.history.encodeLocation(ke),getFetcher:mr,deleteFetcher:or,dispose:St,getBlocker:ir,deleteBlocker:Yr,patchRoutes:Pr,_internalFetchControllers:_e,_internalSetRoutes:ea},Q}function ace(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function DF(e,t,n,r,s,c){let d,i;if(s){d=[];for(let x of t)if(d.push(x),x.route.id===s){i=x;break}}else d=t,i=t[t.length-1];let m=oD(r||".",iD(d),Dh(e.pathname,n)||e.pathname,c==="path");if(r==null&&(m.search=e.search,m.hash=e.hash),(r==null||r===""||r===".")&&i){let x=Vj(m.search);if(i.route.index&&!x)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!i.route.index&&x){let T=new URLSearchParams(m.search),C=T.getAll("index");T.delete("index"),C.filter(I=>I).forEach(I=>T.append("index",I));let A=T.toString();m.search=A?`?${A}`:""}}return n!=="/"&&(m.pathname=m.pathname==="/"?n:am([n,m.pathname])),dv(m)}function PU(e,t,n){if(!n||!ace(n))return{path:t};if(n.formMethod&&!_ce(n.formMethod))return{path:t,error:yh(405,{method:n.formMethod})};let r=()=>({path:t,error:yh(400,{type:"invalid-body"})}),c=(n.formMethod||"get").toUpperCase(),d=KX(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!fd(c))return r();let C=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((A,[I,k])=>`${A}${I}=${k}
`,""):String(n.body);return{path:t,submission:{formMethod:c,formAction:d,formEncType:n.formEncType,formData:void 0,json:void 0,text:C}}}else if(n.formEncType==="application/json"){if(!fd(c))return r();try{let C=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:c,formAction:d,formEncType:n.formEncType,formData:void 0,json:C,text:void 0}}}catch{return r()}}}bo(typeof FormData=="function","FormData is not available in this environment");let i,m;if(n.formData)i=kF(n.formData),m=n.formData;else if(n.body instanceof FormData)i=kF(n.body),m=n.body;else if(n.body instanceof URLSearchParams)i=n.body,m=BU(i);else if(n.body==null)i=new URLSearchParams,m=new FormData;else try{i=new URLSearchParams(n.body),m=BU(i)}catch{return r()}let x={formMethod:c,formAction:d,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(fd(x.formMethod))return{path:t,submission:x};let T=xv(t);return e&&T.search&&Vj(T.search)&&i.append("index",""),T.search=`?${i}`,{path:dv(T),submission:x}}function IU(e,t,n,r,s,c,d,i,m,x,T,C,A,I,k,B,j,V,H){var we;let G=H?hd(H[1])?H[1].error:H[1].data:void 0,X=s.createURL(c.location),Q=s.createURL(m),ee;if(T&&c.errors){let Me=Object.keys(c.errors)[0];ee=d.findIndex(Se=>Se.route.id===Me)}else if(H&&hd(H[1])){let Me=H[0];ee=d.findIndex(Se=>Se.route.id===Me)-1}let ce=H?H[1].statusCode:void 0,fe=ce&&ce>=400,ue={currentUrl:X,currentParams:((we=c.matches[0])==null?void 0:we.params)||{},nextUrl:Q,nextParams:d[0].params,...i,actionResult:G,actionStatus:ce},ae=d.map((Me,Se)=>{let{route:Ae}=Me,_e=null;if(ee!=null&&Se>ee?_e=!1:Ae.lazy?_e=!0:Ae.loader==null?_e=!1:T?_e=PF(Ae,c.loaderData,c.errors):lce(c.loaderData,c.matches[Se],Me)&&(_e=!0),_e!==null)return IF(n,r,e,Me,x,t,_e);let Pe=fe?!1:C||X.pathname+X.search===Q.pathname+Q.search||X.search!==Q.search||cce(c.matches[Se],Me),We={...ue,defaultShouldRevalidate:Pe},Fe=rR(Me,We);return IF(n,r,e,Me,x,t,Fe,We)}),xe=[];return k.forEach((Me,Se)=>{if(T||!d.some(He=>He.route.id===Me.routeId)||I.has(Se))return;let Ae=rv(j,Me.path,V);if(!Ae){xe.push({key:Se,routeId:Me.routeId,path:Me.path,matches:null,match:null,request:null,controller:null});return}if(B.has(Se))return;let _e=c.fetchers.get(Se),Pe=kS(Ae,Me.path),We=new AbortController,Fe=Pb(s,Me.path,We.signal),Ce=null;if(A.has(Se))A.delete(Se),Ce=Zb(n,r,Fe,Ae,Pe,x,t);else if(_e&&_e.state!=="idle"&&_e.data===void 0)C&&(Ce=Zb(n,r,Fe,Ae,Pe,x,t));else{let He={...ue,defaultShouldRevalidate:fe?!1:C};rR(Pe,He)&&(Ce=Zb(n,r,Fe,Ae,Pe,x,t,He))}Ce&&xe.push({key:Se,routeId:Me.routeId,path:Me.path,matches:Ce,match:Pe,request:Fe,controller:We})}),{dsMatches:ae,revalidatingFetchers:xe}}function PF(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,s=n!=null&&n[e.id]!==void 0;return!r&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!s}function lce(e,t,n){let r=!t||n.route.id!==t.route.id,s=!e.hasOwnProperty(n.route.id);return r||s}function cce(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function rR(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function kU(e,t,n,r,s){let c;if(e){let m=r[e];bo(m,`No route found to patch children into: routeId = ${e}`),m.children||(m.children=[]),c=m.children}else c=n;let d=t.filter(m=>!c.some(x=>WX(m,x))),i=tR(d,s,[e||"_","patch",String((c==null?void 0:c.length)||"0")],r);c.push(...i)}function WX(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var s;return(s=t.children)==null?void 0:s.some(c=>WX(n,c))}):!1}var OU=new WeakMap,GX=({key:e,route:t,manifest:n,mapRouteProperties:r})=>{let s=n[t.id];if(bo(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let c=s.lazy[e];if(!c)return;let d=OU.get(s);d||(d={},OU.set(s,d));let i=d[e];if(i)return i;let m=(async()=>{let x=Ple(e),C=s[e]!==void 0&&e!=="hasErrorBoundary";if(x)Ca(!x,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),d[e]=Promise.resolve();else if(C)Ca(!1,`Route "${s.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let A=await c();A!=null&&(Object.assign(s,{[e]:A}),Object.assign(s,r(s)))}typeof s.lazy=="object"&&(s.lazy[e]=void 0,Object.values(s.lazy).every(A=>A===void 0)&&(s.lazy=void 0))})();return d[e]=m,m},LU=new WeakMap;function uce(e,t,n,r,s){let c=n[e.id];if(bo(c,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let T=LU.get(c);if(T)return{lazyRoutePromise:T,lazyHandlerPromise:T};let C=(async()=>{bo(typeof e.lazy=="function","No lazy route function found");let A=await e.lazy(),I={};for(let k in A){let B=A[k];if(B===void 0)continue;let j=kle(k),H=c[k]!==void 0&&k!=="hasErrorBoundary";j?Ca(!j,"Route property "+k+" is not a supported property to be returned from a lazy route function. This property will be ignored."):H?Ca(!H,`Route "${c.id}" has a static property "${k}" defined but its lazy function is also returning a value for this property. The lazy route property "${k}" will be ignored.`):I[k]=B}Object.assign(c,I),Object.assign(c,{...r(c),lazy:void 0})})();return LU.set(c,C),C.catch(()=>{}),{lazyRoutePromise:C,lazyHandlerPromise:C}}let d=Object.keys(e.lazy),i=[],m;for(let T of d){if(s&&s.includes(T))continue;let C=GX({key:T,route:e,manifest:n,mapRouteProperties:r});C&&(i.push(C),T===t&&(m=C))}let x=i.length>0?Promise.all(i).then(()=>{}):void 0;return x==null||x.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:x,lazyHandlerPromise:m}}async function zU(e){let t=e.matches.filter(s=>s.shouldLoad),n={};return(await Promise.all(t.map(s=>s.resolve()))).forEach((s,c)=>{n[t[c].route.id]=s}),n}async function dce(e){return e.matches.some(t=>t.route.unstable_middleware)?YX(e,!1,()=>zU(e),(t,n)=>({[n]:{type:"error",result:t}})):zU(e)}async function YX(e,t,n,r){let{matches:s,request:c,params:d,context:i}=e,m={handlerResult:void 0};try{let x=s.flatMap(C=>C.route.unstable_middleware?C.route.unstable_middleware.map(A=>[C.route.id,A]):[]),T=await XX({request:c,params:d,context:i},x,t,m,n);return t?T:m.handlerResult}catch(x){if(!m.middlewareError)throw x;let T=await r(m.middlewareError.error,m.middlewareError.routeId);return m.handlerResult?Object.assign(m.handlerResult,T):T}}async function XX(e,t,n,r,s,c=0){let{request:d}=e;if(d.signal.aborted)throw d.signal.reason?d.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${d.method} ${d.url}`);let i=t[c];if(!i)return r.handlerResult=await s(),r.handlerResult;let[m,x]=i,T=!1,C,A=async()=>{if(T)throw new Error("You may only call `next()` once per middleware");T=!0,await XX(e,t,n,r,s,c+1)};try{let I=await x({request:e.request,params:e.params,context:e.context},A);return T?I===void 0?C:I:A()}catch(I){throw r.middlewareError?r.middlewareError.error!==I&&(r.middlewareError={routeId:m,error:I}):r.middlewareError={routeId:m,error:I},I}}function ZX(e,t,n,r,s){let c=GX({key:"unstable_middleware",route:r.route,manifest:t,mapRouteProperties:e}),d=uce(r.route,fd(n.method)?"action":"loader",t,e,s);return{middleware:c,route:d.lazyRoutePromise,handler:d.lazyHandlerPromise}}function IF(e,t,n,r,s,c,d,i=null){let m=!1,x=ZX(e,t,n,r,s);return{...r,_lazyPromises:x,shouldLoad:d,unstable_shouldRevalidateArgs:i,unstable_shouldCallHandler(T){return m=!0,i?typeof T=="boolean"?rR(r,{...i,defaultShouldRevalidate:T}):rR(r,i):d},resolve(T){return m||d||T&&n.method==="GET"&&(r.route.lazy||r.route.loader)?fce({request:n,match:r,lazyHandlerPromise:x==null?void 0:x.handler,lazyRoutePromise:x==null?void 0:x.route,handlerOverride:T,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Zb(e,t,n,r,s,c,d,i=null){return r.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,unstable_shouldRevalidateArgs:i,unstable_shouldCallHandler:()=>!1,_lazyPromises:ZX(e,t,n,m,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:IF(e,t,n,m,c,d,!0,i))}async function hce(e,t,n,r,s,c){n.some(x=>{var T;return(T=x._lazyPromises)==null?void 0:T.middleware})&&await Promise.all(n.map(x=>{var T;return(T=x._lazyPromises)==null?void 0:T.middleware}));let d={request:t,params:n[0].params,context:s,matches:n},m=await e({...d,fetcherKey:r,unstable_runClientMiddleware:x=>{let T=d;return YX(T,!1,()=>x({...T,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(C,A)=>({[A]:{type:"error",result:C}}))}});try{await Promise.all(n.flatMap(x=>{var T,C;return[(T=x._lazyPromises)==null?void 0:T.handler,(C=x._lazyPromises)==null?void 0:C.route]}))}catch{}return m}async function fce({request:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:s,scopedContext:c}){let d,i,m=fd(e.method),x=m?"action":"loader",T=C=>{let A,I=new Promise((j,V)=>A=V);i=()=>A(),e.signal.addEventListener("abort",i);let k=j=>typeof C!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${x}" [routeId: ${t.route.id}]`)):C({request:e,params:t.params,context:c},...j!==void 0?[j]:[]),B=(async()=>{try{return{type:"data",result:await(s?s(V=>k(V)):k())}}catch(j){return{type:"error",result:j}}})();return Promise.race([B,I])};try{let C=m?t.route.action:t.route.loader;if(n||r)if(C){let A,[I]=await Promise.all([T(C).catch(k=>{A=k}),n,r]);if(A!==void 0)throw A;d=I}else{await n;let A=m?t.route.action:t.route.loader;if(A)[d]=await Promise.all([T(A),r]);else if(x==="action"){let I=new URL(e.url),k=I.pathname+I.search;throw yh(405,{method:e.method,pathname:k,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(C)d=await T(C);else{let A=new URL(e.url),I=A.pathname+A.search;throw yh(404,{pathname:I})}}catch(C){return{type:"error",result:C}}finally{i&&e.signal.removeEventListener("abort",i)}return d}async function pce(e){var r,s,c,d,i,m;let{result:t,type:n}=e;if(QX(t)){let x;try{let T=t.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?t.body==null?x=null:x=await t.json():x=await t.text()}catch(T){return{type:"error",error:T}}return n==="error"?{type:"error",error:new nR(t.status,t.statusText,x),statusCode:t.status,headers:t.headers}:{type:"data",data:x,statusCode:t.status,headers:t.headers}}return n==="error"?UU(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new nR(((c=t.init)==null?void 0:c.status)||500,void 0,t.data),statusCode:hT(t)?t.status:void 0,headers:(d=t.init)!=null&&d.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:hT(t)?t.status:void 0}:UU(t)?{type:"data",data:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(m=t.init)!=null&&m.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function mce(e,t,n,r,s){let c=e.headers.get("Location");if(bo(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!Nj.test(c)){let d=r.slice(0,r.findIndex(i=>i.route.id===n)+1);c=DF(new URL(t.url),d,s,c),e.headers.set("Location",c)}return e}function FU(e,t,n){if(Nj.test(e)){let r=e,s=r.startsWith("//")?new URL(t.protocol+r):new URL(r),c=Dh(s.pathname,n)!=null;if(s.origin===t.origin&&c)return s.pathname+s.search+s.hash}return e}function Pb(e,t,n,r){let s=e.createURL(KX(t)).toString(),c={signal:n};if(r&&fd(r.formMethod)){let{formMethod:d,formEncType:i}=r;c.method=d.toUpperCase(),i==="application/json"?(c.headers=new Headers({"Content-Type":i}),c.body=JSON.stringify(r.json)):i==="text/plain"?c.body=r.text:i==="application/x-www-form-urlencoded"&&r.formData?c.body=kF(r.formData):c.body=r.formData}return new Request(s,c)}function kF(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function BU(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function gce(e,t,n,r=!1,s=!1){let c={},d=null,i,m=!1,x={},T=n&&hd(n[1])?n[1].error:void 0;return e.forEach(C=>{if(!(C.route.id in t))return;let A=C.route.id,I=t[A];if(bo(!v0(I),"Cannot handle redirect results in processLoaderData"),hd(I)){let k=I.error;if(T!==void 0&&(k=T,T=void 0),d=d||{},s)d[A]=k;else{let B=p0(e,A);d[B.route.id]==null&&(d[B.route.id]=k)}r||(c[A]=HX),m||(m=!0,i=hT(I.error)?I.error.status:500),I.headers&&(x[A]=I.headers)}else c[A]=I.data,I.statusCode&&I.statusCode!==200&&!m&&(i=I.statusCode),I.headers&&(x[A]=I.headers)}),T!==void 0&&n&&(d={[n[0]]:T},n[2]&&(c[n[2]]=void 0)),{loaderData:c,errors:d,statusCode:i||200,loaderHeaders:x}}function jU(e,t,n,r,s,c){let{loaderData:d,errors:i}=gce(t,n,r);return s.filter(m=>!m.matches||m.matches.some(x=>x.shouldLoad)).forEach(m=>{let{key:x,match:T,controller:C}=m,A=c[x];if(bo(A,"Did not find corresponding fetcher result"),!(C&&C.signal.aborted))if(hd(A)){let I=p0(e.matches,T==null?void 0:T.route.id);i&&i[I.route.id]||(i={...i,[I.route.id]:A.error}),e.fetchers.delete(x)}else if(v0(A))bo(!1,"Unhandled fetcher revalidation redirect");else{let I=ev(A.data);e.fetchers.set(x,I)}}),{loaderData:d,errors:i}}function NU(e,t,n,r){let s=Object.entries(t).filter(([,c])=>c!==HX).reduce((c,[d,i])=>(c[d]=i,c),{});for(let c of n){let d=c.route.id;if(!t.hasOwnProperty(d)&&e.hasOwnProperty(d)&&c.route.loader&&(s[d]=e[d]),r&&r.hasOwnProperty(d))break}return s}function VU(e){return e?hd(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function p0(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function $U(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function yh(e,{pathname:t,routeId:n,method:r,type:s,message:c}={}){let d="Unknown Server Error",i="Unknown @remix-run/router error";return e===400?(d="Bad Request",r&&t&&n?i=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:s==="invalid-body"&&(i="Unable to encode submission body")):e===403?(d="Forbidden",i=`Route "${n}" does not match URL "${t}"`):e===404?(d="Not Found",i=`No route matches URL "${t}"`):e===405&&(d="Method Not Allowed",r&&t&&n?i=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(i=`Invalid request method "${r.toUpperCase()}"`)),new nR(e||500,d,new Error(i),!0)}function lM(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,s]=t[n];if(v0(s))return{key:r,result:s}}}function KX(e){let t=typeof e=="string"?xv(e):e;return dv({...t,hash:""})}function yce(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function vce(e){return QX(e.result)&&nce.has(e.result.status)}function hd(e){return e.type==="error"}function v0(e){return(e&&e.type)==="redirect"}function UU(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function QX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _ce(e){return tce.has(e.toUpperCase())}function fd(e){return Jle.has(e.toUpperCase())}function Vj(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function kS(e,t){let n=typeof t=="string"?xv(t).search:t.search;if(e[e.length-1].route.index&&Vj(n||""))return e[e.length-1];let r=$X(e);return r[r.length-1]}function qU(e){let{formMethod:t,formAction:n,formEncType:r,text:s,formData:c,json:d}=e;if(!(!t||!n||!r)){if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(c!=null)return{formMethod:t,formAction:n,formEncType:r,formData:c,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:d,text:void 0}}}function ik(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function xce(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function nS(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function bce(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ev(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function wce(e,t){try{let n=e.sessionStorage.getItem(qX);if(n){let r=JSON.parse(n);for(let[s,c]of Object.entries(r||{}))c&&Array.isArray(c)&&t.set(s,new Set(c||[]))}}catch{}}function Sce(e,t){if(t.size>0){let n={};for(let[r,s]of t)n[r]=[...s];try{e.sessionStorage.setItem(qX,JSON.stringify(n))}catch(r){Ca(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Tce(){let e,t,n=new Promise((r,s)=>{e=async c=>{r(c);try{await n}catch{}},t=async c=>{s(c);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var ex=U.createContext(null);ex.displayName="DataRouter";var rE=U.createContext(null);rE.displayName="DataRouterState";var $j=U.createContext({isTransitioning:!1});$j.displayName="ViewTransition";var JX=U.createContext(new Map);JX.displayName="Fetchers";var Ece=U.createContext(null);Ece.displayName="Await";var np=U.createContext(null);np.displayName="Navigation";var sD=U.createContext(null);sD.displayName="Location";var rp=U.createContext({outlet:null,matches:[],isDataRoute:!1});rp.displayName="Route";var Uj=U.createContext(null);Uj.displayName="RouteError";function Cce(e,{relative:t}={}){bo(E1(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=U.useContext(np),{hash:s,pathname:c,search:d}=iE(e,{relative:t}),i=c;return n!=="/"&&(i=c==="/"?n:am([n,c])),r.createHref({pathname:i,search:d,hash:s})}function E1(){return U.useContext(sD)!=null}function Ed(){return bo(E1(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(sD).location}var eZ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tZ(e){U.useContext(np).static||U.useLayoutEffect(e)}function bv(){let{isDataRoute:e}=U.useContext(rp);return e?Vce():Mce()}function Mce(){bo(E1(),"useNavigate() may be used only in the context of a <Router> component.");let e=U.useContext(ex),{basename:t,navigator:n}=U.useContext(np),{matches:r}=U.useContext(rp),{pathname:s}=Ed(),c=JSON.stringify(iD(r)),d=U.useRef(!1);return tZ(()=>{d.current=!0}),U.useCallback((m,x={})=>{if(Ca(d.current,eZ),!d.current)return;if(typeof m=="number"){n.go(m);return}let T=oD(m,JSON.parse(c),s,x.relative==="path");e==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:am([t,T.pathname])),(x.replace?n.replace:n.push)(T,x.state,x)},[t,n,c,s,e])}var Ace=U.createContext(null);function Rce(e){let t=U.useContext(rp).outlet;return t&&U.createElement(Ace.Provider,{value:e},t)}function iE(e,{relative:t}={}){let{matches:n}=U.useContext(rp),{pathname:r}=Ed(),s=JSON.stringify(iD(n));return U.useMemo(()=>oD(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function Dce(e,t,n,r){bo(E1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:c}=U.useContext(np),{matches:d}=U.useContext(rp),i=d[d.length-1],m=i?i.params:{},x=i?i.pathname:"/",T=i?i.pathnameBase:"/",C=i&&i.route;{let H=C&&C.path||"";nZ(x,!C||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let A=Ed(),I;I=A;let k=I.pathname||"/",B=k;if(T!=="/"){let H=T.replace(/^\//,"").split("/");B="/"+k.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=!c&&n&&n.matches&&n.matches.length>0?n.matches:rv(e,{pathname:B});return Ca(C||j!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Ca(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Lce(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:am([T,s.encodeLocation?s.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?T:am([T,s.encodeLocation?s.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),d,n,r)}function Pce(){let e=Nce(),t=hT(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=U.createElement(U.Fragment,null,U.createElement("p",null,"💿 Hey developer 👋"),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:c},"ErrorBoundary")," or"," ",U.createElement("code",{style:c},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),n?U.createElement("pre",{style:s},n):null,d)}var Ice=U.createElement(Pce,null),kce=class extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?U.createElement(rp.Provider,{value:this.props.routeContext},U.createElement(Uj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Oce({routeContext:e,match:t,children:n}){let r=U.useContext(ex);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(rp.Provider,{value:e},n)}function Lce(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,c=n==null?void 0:n.errors;if(c!=null){let m=s.findIndex(x=>x.route.id&&(c==null?void 0:c[x.route.id])!==void 0);bo(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,m+1))}let d=!1,i=-1;if(n)for(let m=0;m<s.length;m++){let x=s[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(i=m),x.route.id){let{loaderData:T,errors:C}=n,A=x.route.loader&&!T.hasOwnProperty(x.route.id)&&(!C||C[x.route.id]===void 0);if(x.route.lazy||A){d=!0,i>=0?s=s.slice(0,i+1):s=[s[0]];break}}}return s.reduceRight((m,x,T)=>{let C,A=!1,I=null,k=null;n&&(C=c&&x.route.id?c[x.route.id]:void 0,I=x.route.errorElement||Ice,d&&(i<0&&T===0?(nZ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,k=null):i===T&&(A=!0,k=x.route.hydrateFallbackElement||null)));let B=t.concat(s.slice(0,T+1)),j=()=>{let V;return C?V=I:A?V=k:x.route.Component?V=U.createElement(x.route.Component,null):x.route.element?V=x.route.element:V=m,U.createElement(Oce,{match:x,routeContext:{outlet:m,matches:B,isDataRoute:n!=null},children:V})};return n&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?U.createElement(kce,{location:n.location,revalidation:n.revalidation,component:I,error:C,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):j()},null)}function qj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zce(e){let t=U.useContext(ex);return bo(t,qj(e)),t}function Fce(e){let t=U.useContext(rE);return bo(t,qj(e)),t}function Bce(e){let t=U.useContext(rp);return bo(t,qj(e)),t}function Hj(e){let t=Bce(e),n=t.matches[t.matches.length-1];return bo(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function jce(){return Hj("useRouteId")}function Nce(){var r;let e=U.useContext(Uj),t=Fce("useRouteError"),n=Hj("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Vce(){let{router:e}=zce("useNavigate"),t=Hj("useNavigate"),n=U.useRef(!1);return tZ(()=>{n.current=!0}),U.useCallback(async(s,c={})=>{Ca(n.current,eZ),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...c}))},[e,t])}var HU={};function nZ(e,t,n){!t&&!HU[e]&&(HU[e]=!0,Ca(!1,n))}var WU={};function GU(e,t){!e&&!WU[t]&&(WU[t]=!0,console.warn(t))}function $ce(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Ca(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:U.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Ca(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:U.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Ca(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:U.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var Uce=["HydrateFallback","hydrateFallbackElement"],qce=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function Hce({router:e,flushSync:t}){let[n,r]=U.useState(e.state),[s,c]=U.useState(),[d,i]=U.useState({isTransitioning:!1}),[m,x]=U.useState(),[T,C]=U.useState(),[A,I]=U.useState(),k=U.useRef(new Map),B=U.useCallback((G,{deletedFetchers:X,flushSync:Q,viewTransitionOpts:ee})=>{G.fetchers.forEach((fe,ue)=>{fe.data!==void 0&&k.current.set(ue,fe.data)}),X.forEach(fe=>k.current.delete(fe)),GU(Q===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let ce=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(GU(ee==null||ce,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ee||!ce){t&&Q?t(()=>r(G)):U.startTransition(()=>r(G));return}if(t&&Q){t(()=>{T&&(m&&m.resolve(),T.skipTransition()),i({isTransitioning:!0,flushSync:!0,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation})});let fe=e.window.document.startViewTransition(()=>{t(()=>r(G))});fe.finished.finally(()=>{t(()=>{x(void 0),C(void 0),c(void 0),i({isTransitioning:!1})})}),t(()=>C(fe));return}T?(m&&m.resolve(),T.skipTransition(),I({state:G,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation})):(c(G),i({isTransitioning:!0,flushSync:!1,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation}))},[e.window,t,T,m]);U.useLayoutEffect(()=>e.subscribe(B),[e,B]),U.useEffect(()=>{d.isTransitioning&&!d.flushSync&&x(new qce)},[d]),U.useEffect(()=>{if(m&&s&&e.window){let G=s,X=m.promise,Q=e.window.document.startViewTransition(async()=>{U.startTransition(()=>r(G)),await X});Q.finished.finally(()=>{x(void 0),C(void 0),c(void 0),i({isTransitioning:!1})}),C(Q)}},[s,m,e.window]),U.useEffect(()=>{m&&s&&n.location.key===s.location.key&&m.resolve()},[m,T,n.location,s]),U.useEffect(()=>{!d.isTransitioning&&A&&(c(A.state),i({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}),I(void 0))},[d.isTransitioning,A]);let j=U.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:G=>e.navigate(G),push:(G,X,Q)=>e.navigate(G,{state:X,preventScrollReset:Q==null?void 0:Q.preventScrollReset}),replace:(G,X,Q)=>e.navigate(G,{replace:!0,state:X,preventScrollReset:Q==null?void 0:Q.preventScrollReset})}),[e]),V=e.basename||"/",H=U.useMemo(()=>({router:e,navigator:j,static:!1,basename:V}),[e,j,V]);return U.createElement(U.Fragment,null,U.createElement(ex.Provider,{value:H},U.createElement(rE.Provider,{value:n},U.createElement(JX.Provider,{value:k.current},U.createElement($j.Provider,{value:d},U.createElement(Xce,{basename:V,location:n.location,navigationType:n.historyAction,navigator:j},U.createElement(Wce,{routes:e.routes,future:e.future,state:n})))))),null)}var Wce=U.memo(Gce);function Gce({routes:e,future:t,state:n}){return Dce(e,void 0,n,t)}function Yce({to:e,replace:t,state:n,relative:r}){bo(E1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=U.useContext(np);Ca(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=U.useContext(rp),{pathname:d}=Ed(),i=bv(),m=oD(e,iD(c),d,r==="path"),x=JSON.stringify(m);return U.useEffect(()=>{i(JSON.parse(x),{replace:t,state:n,relative:r})},[i,x,r,t,n]),null}function rZ(e){return Rce(e.context)}function Xce({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:c=!1}){bo(!E1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),i=U.useMemo(()=>({basename:d,navigator:s,static:c,future:{}}),[d,s,c]);typeof n=="string"&&(n=xv(n));let{pathname:m="/",search:x="",hash:T="",state:C=null,key:A="default"}=n,I=U.useMemo(()=>{let k=Dh(m,d);return k==null?null:{location:{pathname:k,search:x,hash:T,state:C,key:A},navigationType:r}},[d,m,x,T,C,A,r]);return Ca(I!=null,`<Router basename="${d}"> is not able to match the URL "${m}${x}${T}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:U.createElement(np.Provider,{value:i},U.createElement(sD.Provider,{children:t,value:I}))}var fA="get",pA="application/x-www-form-urlencoded";function aD(e){return e!=null&&typeof e.tagName=="string"}function Zce(e){return aD(e)&&e.tagName.toLowerCase()==="button"}function Kce(e){return aD(e)&&e.tagName.toLowerCase()==="form"}function Qce(e){return aD(e)&&e.tagName.toLowerCase()==="input"}function Jce(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function eue(e,t){return e.button===0&&(!t||t==="_self")&&!Jce(e)}var cM=null;function tue(){if(cM===null)try{new FormData(document.createElement("form"),0),cM=!1}catch{cM=!0}return cM}var nue=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ok(e){return e!=null&&!nue.has(e)?(Ca(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pA}"`),null):e}function rue(e,t){let n,r,s,c,d;if(Kce(e)){let i=e.getAttribute("action");r=i?Dh(i,t):null,n=e.getAttribute("method")||fA,s=ok(e.getAttribute("enctype"))||pA,c=new FormData(e)}else if(Zce(e)||Qce(e)&&(e.type==="submit"||e.type==="image")){let i=e.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||i.getAttribute("action");if(r=m?Dh(m,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||fA,s=ok(e.getAttribute("formenctype"))||ok(i.getAttribute("enctype"))||pA,c=new FormData(i,e),!tue()){let{name:x,type:T,value:C}=e;if(T==="image"){let A=x?`${x}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else x&&c.append(x,C)}}else{if(aD(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fA,r=null,s=pA,d=e}return c&&s==="text/plain"&&(d=c,c=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:c,body:d}}function Wj(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function iue(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oue(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function sue(e,t,n){let r=await Promise.all(e.map(async s=>{let c=t.routes[s.route.id];if(c){let d=await iue(c,n);return d.links?d.links():[]}return[]}));return uue(r.flat(1).filter(oue).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function YU(e,t,n,r,s,c){let d=(m,x)=>n[x]?m.route.id!==n[x].route.id:!0,i=(m,x)=>{var T;return n[x].pathname!==m.pathname||((T=n[x].route.path)==null?void 0:T.endsWith("*"))&&n[x].params["*"]!==m.params["*"]};return c==="assets"?t.filter((m,x)=>d(m,x)||i(m,x)):c==="data"?t.filter((m,x)=>{var C;let T=r.routes[m.route.id];if(!T||!T.hasLoader)return!1;if(d(m,x)||i(m,x))return!0;if(m.route.shouldRevalidate){let A=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((C=n[0])==null?void 0:C.params)||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function aue(e,t,{includeHydrateFallback:n}={}){return lue(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let c=[s.module];return s.clientActionModule&&(c=c.concat(s.clientActionModule)),s.clientLoaderModule&&(c=c.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(c=c.concat(s.hydrateFallbackModule)),s.imports&&(c=c.concat(s.imports)),c}).flat(1))}function lue(e){return[...new Set(e)]}function cue(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function uue(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let c=JSON.stringify(cue(s));return n.has(c)||(n.add(c),r.push({key:c,link:s})),r},[])}var due=new Set([100,101,204,205]);function hue(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Dh(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function iZ(){let e=U.useContext(ex);return Wj(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function fue(){let e=U.useContext(rE);return Wj(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Gj=U.createContext(void 0);Gj.displayName="FrameworkContext";function oZ(){let e=U.useContext(Gj);return Wj(e,"You must render this element inside a <HydratedRouter> element"),e}function pue(e,t){let n=U.useContext(Gj),[r,s]=U.useState(!1),[c,d]=U.useState(!1),{onFocus:i,onBlur:m,onMouseEnter:x,onMouseLeave:T,onTouchStart:C}=t,A=U.useRef(null);U.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let B=V=>{V.forEach(H=>{d(H.isIntersecting)})},j=new IntersectionObserver(B,{threshold:.5});return A.current&&j.observe(A.current),()=>{j.disconnect()}}},[e]),U.useEffect(()=>{if(r){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[r]);let I=()=>{s(!0)},k=()=>{s(!1),d(!1)};return n?e!=="intent"?[c,A,{}]:[c,A,{onFocus:rS(i,I),onBlur:rS(m,k),onMouseEnter:rS(x,I),onMouseLeave:rS(T,k),onTouchStart:rS(C,I)}]:[!1,A,{}]}function rS(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mue({page:e,...t}){let{router:n}=iZ(),r=U.useMemo(()=>rv(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?U.createElement(yue,{page:e,matches:r,...t}):null}function gue(e){let{manifest:t,routeModules:n}=oZ(),[r,s]=U.useState([]);return U.useEffect(()=>{let c=!1;return sue(e,t,n).then(d=>{c||s(d)}),()=>{c=!0}},[e,t,n]),r}function yue({page:e,matches:t,...n}){let r=Ed(),{manifest:s,routeModules:c}=oZ(),{basename:d}=iZ(),{loaderData:i,matches:m}=fue(),x=U.useMemo(()=>YU(e,t,m,s,r,"data"),[e,t,m,s,r]),T=U.useMemo(()=>YU(e,t,m,s,r,"assets"),[e,t,m,s,r]),C=U.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let k=new Set,B=!1;if(t.forEach(V=>{var G;let H=s.routes[V.route.id];!H||!H.hasLoader||(!x.some(X=>X.route.id===V.route.id)&&V.route.id in i&&((G=c[V.route.id])!=null&&G.shouldRevalidate)||H.hasClientLoader?B=!0:k.add(V.route.id))}),k.size===0)return[];let j=hue(e,d);return B&&k.size>0&&j.searchParams.set("_routes",t.filter(V=>k.has(V.route.id)).map(V=>V.route.id).join(",")),[j.pathname+j.search]},[d,i,r,s,x,t,e,c]),A=U.useMemo(()=>aue(T,s),[T,s]),I=gue(T);return U.createElement(U.Fragment,null,C.map(k=>U.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),A.map(k=>U.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),I.map(({key:k,link:B})=>U.createElement("link",{key:k,...B})))}function vue(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var sZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sZ&&(window.__reactRouterVersion="7.5.3")}catch{}function _ue(e,t){return sce({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:Mle({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||xue(),routes:e,mapRouteProperties:$ce,hydrationRouteProperties:Uce,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function xue(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:bue(e.errors)}),e}function bue(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,s]of t)if(s&&s.__type==="RouteErrorResponse")n[r]=new nR(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let c=window[s.__subType];if(typeof c=="function")try{let d=new c(s.message);d.stack="",n[r]=d}catch{}}if(n[r]==null){let c=new Error(s.message);c.stack="",n[r]=c}}else n[r]=s;return n}var aZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iv=U.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:c,replace:d,state:i,target:m,to:x,preventScrollReset:T,viewTransition:C,...A},I){let{basename:k}=U.useContext(np),B=typeof x=="string"&&aZ.test(x),j,V=!1;if(typeof x=="string"&&B&&(j=x,sZ))try{let ue=new URL(window.location.href),ae=x.startsWith("//")?new URL(ue.protocol+x):new URL(x),xe=Dh(ae.pathname,k);ae.origin===ue.origin&&xe!=null?x=xe+ae.search+ae.hash:V=!0}catch{Ca(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=Cce(x,{relative:s}),[G,X,Q]=pue(r,A),ee=Eue(x,{replace:d,state:i,target:m,preventScrollReset:T,relative:s,viewTransition:C});function ce(ue){t&&t(ue),ue.defaultPrevented||ee(ue)}let fe=U.createElement("a",{...A,...Q,href:j||H,onClick:V||c?t:ce,ref:vue(I,X),target:m,"data-discover":!B&&n==="render"?"true":void 0});return G&&!B?U.createElement(U.Fragment,null,fe,U.createElement(mue,{page:H})):fe});iv.displayName="Link";var wue=U.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:c,to:d,viewTransition:i,children:m,...x},T){let C=iE(d,{relative:x.relative}),A=Ed(),I=U.useContext(rE),{navigator:k,basename:B}=U.useContext(np),j=I!=null&&Due(C)&&i===!0,V=k.encodeLocation?k.encodeLocation(C).pathname:C.pathname,H=A.pathname,G=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(H=H.toLowerCase(),G=G?G.toLowerCase():null,V=V.toLowerCase()),G&&B&&(G=Dh(G,B)||G);const X=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let Q=H===V||!s&&H.startsWith(V)&&H.charAt(X)==="/",ee=G!=null&&(G===V||!s&&G.startsWith(V)&&G.charAt(V.length)==="/"),ce={isActive:Q,isPending:ee,isTransitioning:j},fe=Q?t:void 0,ue;typeof r=="function"?ue=r(ce):ue=[r,Q?"active":null,ee?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let ae=typeof c=="function"?c(ce):c;return U.createElement(iv,{...x,"aria-current":fe,className:ue,ref:T,style:ae,to:d,viewTransition:i},typeof m=="function"?m(ce):m)});wue.displayName="NavLink";var Sue=U.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:c,method:d=fA,action:i,onSubmit:m,relative:x,preventScrollReset:T,viewTransition:C,...A},I)=>{let k=Aue(),B=Rue(i,{relative:x}),j=d.toLowerCase()==="get"?"get":"post",V=typeof i=="string"&&aZ.test(i),H=G=>{if(m&&m(G),G.defaultPrevented)return;G.preventDefault();let X=G.nativeEvent.submitter,Q=(X==null?void 0:X.getAttribute("formmethod"))||d;k(X||G.currentTarget,{fetcherKey:t,method:Q,navigate:n,replace:s,state:c,relative:x,preventScrollReset:T,viewTransition:C})};return U.createElement("form",{ref:I,method:j,action:B,onSubmit:r?m:H,...A,"data-discover":!V&&e==="render"?"true":void 0})});Sue.displayName="Form";function Tue(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lZ(e){let t=U.useContext(ex);return bo(t,Tue(e)),t}function Eue(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:c,viewTransition:d}={}){let i=bv(),m=Ed(),x=iE(e,{relative:c});return U.useCallback(T=>{if(eue(T,t)){T.preventDefault();let C=n!==void 0?n:dv(m)===dv(x);i(e,{replace:C,state:r,preventScrollReset:s,relative:c,viewTransition:d})}},[m,i,x,n,r,t,e,s,c,d])}var Cue=0,Mue=()=>`__${String(++Cue)}__`;function Aue(){let{router:e}=lZ("useSubmit"),{basename:t}=U.useContext(np),n=jce();return U.useCallback(async(r,s={})=>{let{action:c,method:d,encType:i,formData:m,body:x}=rue(r,t);if(s.navigate===!1){let T=s.fetcherKey||Mue();await e.fetch(T,n,s.action||c,{preventScrollReset:s.preventScrollReset,formData:m,body:x,formMethod:s.method||d,formEncType:s.encType||i,flushSync:s.flushSync})}else await e.navigate(s.action||c,{preventScrollReset:s.preventScrollReset,formData:m,body:x,formMethod:s.method||d,formEncType:s.encType||i,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function Rue(e,{relative:t}={}){let{basename:n}=U.useContext(np),r=U.useContext(rp);bo(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),c={...iE(e||".",{relative:t})},d=Ed();if(e==null){c.search=d.search;let i=new URLSearchParams(c.search),m=i.getAll("index");if(m.some(T=>T==="")){i.delete("index"),m.filter(C=>C).forEach(C=>i.append("index",C));let T=i.toString();c.search=T?`?${T}`:""}}return(!e||e===".")&&s.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:am([n,c.pathname])),dv(c)}function Due(e,t={}){let n=U.useContext($j);bo(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lZ("useViewTransitionState"),s=iE(e,{relative:t.relative});if(!n.isTransitioning)return!1;let c=Dh(n.currentLocation.pathname,r)||n.currentLocation.pathname,d=Dh(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $g(s.pathname,d)!=null||$g(s.pathname,c)!=null}new TextEncoder;[...due];var lD=BX();const zb=Ls(lD);/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pue(e){return U.createElement(Hce,{flushSync:lD.flushSync,...e})}const Iue="modulepreload",kue=function(e){return"/"+e},XU={},oE=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(x){return Promise.all(x.map(T=>Promise.resolve(T).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),m=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=d(n.map(x=>{if(x=kue(x),x in XU)return;XU[x]=!0;const T=x.endsWith(".css"),C=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${C}`))return;const A=document.createElement("link");if(A.rel=T?"stylesheet":Iue,T||(A.as="script"),A.crossOrigin="",A.href=x,m&&A.setAttribute("nonce",m),document.head.appendChild(A),T)return new Promise((I,k)=>{A.addEventListener("load",I),A.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return s.then(d=>{for(const i of d||[])i.status==="rejected"&&c(i.reason);return t().catch(c)})};var sk={exports:{}},ak,ZU;function Oue(){if(ZU)return ak;ZU=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ak=e,ak}var lk,KU;function Lue(){if(KU)return lk;KU=1;var e=Oue();function t(){}function n(){}return n.resetWarningCache=t,lk=function(){function r(d,i,m,x,T,C){if(C!==e){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}r.isRequired=r;function s(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return c.PropTypes=c,c},lk}var QU;function cZ(){return QU||(QU=1,sk.exports=Lue()()),sk.exports}var zue=cZ();const rt=Ls(zue);function uZ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=uZ(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $n(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=uZ(e))&&(r&&(r+=" "),r+=t);return r}function dr(e,t,n=void 0){const r={};for(const s in e){const c=e[s];let d="",i=!0;for(let m=0;m<c.length;m+=1){const x=c[m];x&&(d+=(i===!0?"":" ")+t(x),i=!1,n&&n[x]&&(d+=" "+n[x]))}r[s]=d}return r}function Gg(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}function Fue(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Yj(e,t=0,n=1){return Fue(e,t,n)}function Bue(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function hv(e){if(e.type)return e;if(e.charAt(0)==="#")return hv(Bue(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Gg(9,e));let r=e.substring(t+1,e.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Gg(10,s))}else r=r.split(",");return r=r.map(c=>parseFloat(c)),{type:n,values:r,colorSpace:s}}const jue=e=>{const t=hv(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},OS=(e,t)=>{try{return jue(e)}catch{return e}};function cD(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((s,c)=>c<3?parseInt(s,10):s):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function dZ(e){e=hv(e);const{values:t}=e,n=t[0],r=t[1]/100,s=t[2]/100,c=r*Math.min(s,1-s),d=(x,T=(x+n/30)%12)=>s-c*Math.max(Math.min(T-3,9-T,1),-1);let i="rgb";const m=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(i+="a",m.push(t[3])),cD({type:i,values:m})}function OF(e){e=hv(e);let t=e.type==="hsl"||e.type==="hsla"?hv(dZ(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Nue(e,t){const n=OF(e),r=OF(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function ei(e,t){return e=hv(e),t=Yj(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,cD(e)}function uM(e,t,n){try{return ei(e,t)}catch{return e}}function I0(e,t){if(e=hv(e),t=Yj(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return cD(e)}function ms(e,t,n){try{return I0(e,t)}catch{return e}}function k0(e,t){if(e=hv(e),t=Yj(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return cD(e)}function gs(e,t,n){try{return k0(e,t)}catch{return e}}function LF(e,t=.15){return OF(e)>.5?I0(e,t):k0(e,t)}function dM(e,t,n){try{return LF(e,t)}catch{return e}}const hZ=U.createContext();function Vue({value:e,...t}){return z.jsx(hZ.Provider,{value:e??!0,...t})}const Al=()=>U.useContext(hZ)??!1;function Dn(e){if(typeof e!="string")throw new Error(Gg(7));return e.charAt(0).toUpperCase()+e.slice(1)}var ck={exports:{}},ds={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JU;function $ue(){if(JU)return ds;JU=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),A=Symbol.for("react.view_transition"),I=Symbol.for("react.client.reference");function k(B){if(typeof B=="object"&&B!==null){var j=B.$$typeof;switch(j){case e:switch(B=B.type,B){case n:case s:case r:case m:case x:case A:return B;default:switch(B=B&&B.$$typeof,B){case d:case i:case C:case T:return B;case c:return B;default:return j}}case t:return j}}}return ds.ContextConsumer=c,ds.ContextProvider=d,ds.Element=e,ds.ForwardRef=i,ds.Fragment=n,ds.Lazy=C,ds.Memo=T,ds.Portal=t,ds.Profiler=s,ds.StrictMode=r,ds.Suspense=m,ds.SuspenseList=x,ds.isContextConsumer=function(B){return k(B)===c},ds.isContextProvider=function(B){return k(B)===d},ds.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===e},ds.isForwardRef=function(B){return k(B)===i},ds.isFragment=function(B){return k(B)===n},ds.isLazy=function(B){return k(B)===C},ds.isMemo=function(B){return k(B)===T},ds.isPortal=function(B){return k(B)===t},ds.isProfiler=function(B){return k(B)===s},ds.isStrictMode=function(B){return k(B)===r},ds.isSuspense=function(B){return k(B)===m},ds.isSuspenseList=function(B){return k(B)===x},ds.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===n||B===s||B===r||B===m||B===x||typeof B=="object"&&B!==null&&(B.$$typeof===C||B.$$typeof===T||B.$$typeof===d||B.$$typeof===c||B.$$typeof===i||B.$$typeof===I||B.getModuleId!==void 0)},ds.typeOf=k,ds}var e6;function Uue(){return e6||(e6=1,ck.exports=$ue()),ck.exports}var fZ=Uue();function nm(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pZ(e){if(U.isValidElement(e)||fZ.isValidElementType(e)||!nm(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=pZ(e[n])}),t}function Tl(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return nm(e)&&nm(t)&&Object.keys(t).forEach(s=>{U.isValidElement(t[s])||fZ.isValidElementType(t[s])?r[s]=t[s]:nm(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&nm(e[s])?r[s]=Tl(e[s],t[s],n):n.clone?r[s]=nm(t[s])?pZ(t[s]):t[s]:r[s]=t[s]}),r}function WS(e,t){return t?Tl(e,t,{clone:!1}):e}function que(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,s)=>{var d,i;const c=/min-width:\s*([0-9.]+)/;return+(((d=r.match(c))==null?void 0:d[1])||0)-+(((i=s.match(c))==null?void 0:i[1])||0)});return n.length?n.reduce((r,s)=>{const c=t[s];return delete r[s],r[s]=c,r},{...t}):t}function Hue(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function Wue(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,c=Number.isNaN(+r)?r||0:+r;return e.containerQueries(s).up(c)}function Gue(e){const t=(c,d)=>c.replace("@media",d?`@container ${d}`:"@container");function n(c,d){c.up=(...i)=>t(e.breakpoints.up(...i),d),c.down=(...i)=>t(e.breakpoints.down(...i),d),c.between=(...i)=>t(e.breakpoints.between(...i),d),c.only=(...i)=>t(e.breakpoints.only(...i),d),c.not=(...i)=>{const m=t(e.breakpoints.not(...i),d);return m.includes("not all and")?m.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):m}}const r={},s=c=>(n(r,c),r);return n(s),{...e,containerQueries:s}}const uD={xs:0,sm:600,md:900,lg:1200,xl:1536},t6={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${uD[e]}px)`},Yue={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:uD[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Yf(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const c=r.breakpoints||t6;return t.reduce((d,i,m)=>(d[c.up(c.keys[m])]=n(t[m]),d),{})}if(typeof t=="object"){const c=r.breakpoints||t6;return Object.keys(t).reduce((d,i)=>{if(Hue(c.keys,i)){const m=Wue(r.containerQueries?r:Yue,i);m&&(d[m]=n(t[i],i))}else if(Object.keys(c.values||uD).includes(i)){const m=c.up(i);d[m]=n(t[i],i)}else{const m=i;d[m]=t[m]}return d},{})}return n(t)}function mZ(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,s)=>{const c=e.up(s);return r[c]={},r},{}))||{}}function gZ(e,t){return e.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},t)}function Xue(e,...t){const n=mZ(e),r=[n,...t].reduce((s,c)=>Tl(s,c),{});return gZ(Object.keys(n),r)}function Zue(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((s,c)=>{c<e.length&&(n[s]=!0)}):r.forEach(s=>{e[s]!=null&&(n[s]=!0)}),n}function uk({values:e,breakpoints:t,base:n}){const r=n||Zue(e,t),s=Object.keys(r);if(s.length===0)return e;let c;return s.reduce((d,i,m)=>(Array.isArray(e)?(d[i]=e[m]!=null?e[m]:e[c],c=m):typeof e=="object"?(d[i]=e[i]!=null?e[i]:e[c],c=i):d[i]=e,d),{})}function ov(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((s,c)=>s&&s[c]?s[c]:null,e);if(r!=null)return r}return t.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,e)}function iR(e,t,n,r=n){let s;return typeof e=="function"?s=e(n):Array.isArray(e)?s=e[n]||r:s=ov(e,n)||r,t&&(s=t(s,r,e)),s}function Aa(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:s}=e,c=d=>{if(d[t]==null)return null;const i=d[t],m=d.theme,x=ov(m,r)||{};return Yf(d,i,C=>{let A=iR(x,s,C);return C===A&&typeof C=="string"&&(A=iR(x,s,`${t}${C==="default"?"":Dn(C)}`,C)),n===!1?A:{[n]:A}})};return c.propTypes={},c.filterProps=[t],c}function Kue(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Que={m:"margin",p:"padding"},Jue={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},n6={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ede=Kue(e=>{if(e.length>2)if(n6[e])e=n6[e];else return[e];const[t,n]=e.split(""),r=Que[t],s=Jue[n]||"";return Array.isArray(s)?s.map(c=>r+c):[r+s]}),Xj=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Zj=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Xj,...Zj];function sE(e,t,n,r){const s=ov(e,t,!0)??n;return typeof s=="number"||typeof s=="string"?c=>typeof c=="string"?c:typeof s=="string"?s.startsWith("var(")&&c===0?0:s.startsWith("var(")&&c===1?s:`calc(${c} * ${s})`:s*c:Array.isArray(s)?c=>{if(typeof c=="string")return c;const d=Math.abs(c),i=s[d];return c>=0?i:typeof i=="number"?-i:typeof i=="string"&&i.startsWith("var(")?`calc(-1 * ${i})`:`-${i}`}:typeof s=="function"?s:()=>{}}function dD(e){return sE(e,"spacing",8)}function O0(e,t){return typeof t=="string"||t==null?t:e(t)}function tde(e,t){return n=>e.reduce((r,s)=>(r[s]=O0(t,n),r),{})}function nde(e,t,n,r){if(!t.includes(n))return null;const s=ede(n),c=tde(s,r),d=e[n];return Yf(e,d,c)}function yZ(e,t){const n=dD(e.theme);return Object.keys(e).map(r=>nde(e,t,r,n)).reduce(WS,{})}function la(e){return yZ(e,Xj)}la.propTypes={};la.filterProps=Xj;function ca(e){return yZ(e,Zj)}ca.propTypes={};ca.filterProps=Zj;function hD(...e){const t=e.reduce((r,s)=>(s.filterProps.forEach(c=>{r[c]=s}),r),{}),n=r=>Object.keys(r).reduce((s,c)=>t[c]?WS(s,t[c](r)):s,{});return n.propTypes={},n.filterProps=e.reduce((r,s)=>r.concat(s.filterProps),[]),n}function bh(e){return typeof e!="number"?e:`${e}px solid`}function Bh(e,t){return Aa({prop:e,themeKey:"borders",transform:t})}const rde=Bh("border",bh),ide=Bh("borderTop",bh),ode=Bh("borderRight",bh),sde=Bh("borderBottom",bh),ade=Bh("borderLeft",bh),lde=Bh("borderColor"),cde=Bh("borderTopColor"),ude=Bh("borderRightColor"),dde=Bh("borderBottomColor"),hde=Bh("borderLeftColor"),fde=Bh("outline",bh),pde=Bh("outlineColor"),fD=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=sE(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:O0(t,r)});return Yf(e,e.borderRadius,n)}return null};fD.propTypes={};fD.filterProps=["borderRadius"];hD(rde,ide,ode,sde,ade,lde,cde,ude,dde,hde,fD,fde,pde);const pD=e=>{if(e.gap!==void 0&&e.gap!==null){const t=sE(e.theme,"spacing",8),n=r=>({gap:O0(t,r)});return Yf(e,e.gap,n)}return null};pD.propTypes={};pD.filterProps=["gap"];const mD=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=sE(e.theme,"spacing",8),n=r=>({columnGap:O0(t,r)});return Yf(e,e.columnGap,n)}return null};mD.propTypes={};mD.filterProps=["columnGap"];const gD=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=sE(e.theme,"spacing",8),n=r=>({rowGap:O0(t,r)});return Yf(e,e.rowGap,n)}return null};gD.propTypes={};gD.filterProps=["rowGap"];const mde=Aa({prop:"gridColumn"}),gde=Aa({prop:"gridRow"}),yde=Aa({prop:"gridAutoFlow"}),vde=Aa({prop:"gridAutoColumns"}),_de=Aa({prop:"gridAutoRows"}),xde=Aa({prop:"gridTemplateColumns"}),bde=Aa({prop:"gridTemplateRows"}),wde=Aa({prop:"gridTemplateAreas"}),Sde=Aa({prop:"gridArea"});hD(pD,mD,gD,mde,gde,yde,vde,_de,xde,bde,wde,Sde);function Kb(e,t){return t==="grey"?t:e}const Tde=Aa({prop:"color",themeKey:"palette",transform:Kb}),Ede=Aa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Kb}),Cde=Aa({prop:"backgroundColor",themeKey:"palette",transform:Kb});hD(Tde,Ede,Cde);function pd(e){return e<=1&&e!==0?`${e*100}%`:e}const Mde=Aa({prop:"width",transform:pd}),Kj=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var s,c,d,i,m;const r=((d=(c=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:c.values)==null?void 0:d[n])||uD[n];return r?((m=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:m.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:pd(n)}};return Yf(e,e.maxWidth,t)}return null};Kj.filterProps=["maxWidth"];const Ade=Aa({prop:"minWidth",transform:pd}),Rde=Aa({prop:"height",transform:pd}),Dde=Aa({prop:"maxHeight",transform:pd}),Pde=Aa({prop:"minHeight",transform:pd});Aa({prop:"size",cssProperty:"width",transform:pd});Aa({prop:"size",cssProperty:"height",transform:pd});const Ide=Aa({prop:"boxSizing"});hD(Mde,Kj,Ade,Rde,Dde,Pde,Ide);const aE={border:{themeKey:"borders",transform:bh},borderTop:{themeKey:"borders",transform:bh},borderRight:{themeKey:"borders",transform:bh},borderBottom:{themeKey:"borders",transform:bh},borderLeft:{themeKey:"borders",transform:bh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bh},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:fD},color:{themeKey:"palette",transform:Kb},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Kb},backgroundColor:{themeKey:"palette",transform:Kb},p:{style:ca},pt:{style:ca},pr:{style:ca},pb:{style:ca},pl:{style:ca},px:{style:ca},py:{style:ca},padding:{style:ca},paddingTop:{style:ca},paddingRight:{style:ca},paddingBottom:{style:ca},paddingLeft:{style:ca},paddingX:{style:ca},paddingY:{style:ca},paddingInline:{style:ca},paddingInlineStart:{style:ca},paddingInlineEnd:{style:ca},paddingBlock:{style:ca},paddingBlockStart:{style:ca},paddingBlockEnd:{style:ca},m:{style:la},mt:{style:la},mr:{style:la},mb:{style:la},ml:{style:la},mx:{style:la},my:{style:la},margin:{style:la},marginTop:{style:la},marginRight:{style:la},marginBottom:{style:la},marginLeft:{style:la},marginX:{style:la},marginY:{style:la},marginInline:{style:la},marginInlineStart:{style:la},marginInlineEnd:{style:la},marginBlock:{style:la},marginBlockStart:{style:la},marginBlockEnd:{style:la},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:pD},rowGap:{style:gD},columnGap:{style:mD},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:pd},maxWidth:{style:Kj},minWidth:{transform:pd},height:{transform:pd},maxHeight:{transform:pd},minHeight:{transform:pd},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function kde(...e){const t=e.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Ode(e,t){return typeof e=="function"?e(t):e}function Lde(){function e(n,r,s,c){const d={[n]:r,theme:s},i=c[n];if(!i)return{[n]:r};const{cssProperty:m=n,themeKey:x,transform:T,style:C}=i;if(r==null)return null;if(x==="typography"&&r==="inherit")return{[n]:r};const A=ov(s,x)||{};return C?C(d):Yf(d,r,k=>{let B=iR(A,T,k);return k===B&&typeof k=="string"&&(B=iR(A,T,`${n}${k==="default"?"":Dn(k)}`,k)),m===!1?B:{[m]:B}})}function t(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const c=s.unstable_sxConfig??aE;function d(i){let m=i;if(typeof i=="function")m=i(s);else if(typeof i!="object")return i;if(!m)return null;const x=mZ(s.breakpoints),T=Object.keys(x);let C=x;return Object.keys(m).forEach(A=>{const I=Ode(m[A],s);if(I!=null)if(typeof I=="object")if(c[A])C=WS(C,e(A,I,s,c));else{const k=Yf({theme:s},I,B=>({[A]:B}));kde(k,I)?C[A]=t({sx:I,theme:s}):C=WS(C,k)}else C=WS(C,e(A,I,s,c))}),que(s,gZ(T,C))}return Array.isArray(r)?r.map(d):d(r)}return t}const fv=Lde();fv.filterProps=["sx"];const zde=e=>{var r;const t={systemProps:{},otherProps:{}},n=((r=e==null?void 0:e.theme)==null?void 0:r.unstable_sxConfig)??aE;return Object.keys(e).forEach(s=>{n[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function yD(e){const{sx:t,...n}=e,{systemProps:r,otherProps:s}=zde(n);let c;return Array.isArray(t)?c=[r,...t]:typeof t=="function"?c=(...d)=>{const i=t(...d);return nm(i)?{...r,...i}:r}:c={...r,...t},{...s,sx:c}}function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(null,arguments)}function Fde(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Bde(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var vZ=function(){function e(n){var r=this;this._insertTag=function(s){var c;r.tags.length===0?r.insertionPoint?c=r.insertionPoint.nextSibling:r.prepend?c=r.container.firstChild:c=r.before:c=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,c),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bde(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var c=Fde(s);try{c.insertRule(r,c.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},e}(),mc="-ms-",oR="-moz-",Yo="-webkit-",_Z="comm",Qj="rule",Jj="decl",jde="@import",xZ="@keyframes",Nde="@layer",Vde=Math.abs,vD=String.fromCharCode,$de=Object.assign;function Ude(e,t){return Ul(e,0)^45?(((t<<2^Ul(e,0))<<2^Ul(e,1))<<2^Ul(e,2))<<2^Ul(e,3):0}function bZ(e){return e.trim()}function qde(e,t){return(e=t.exec(e))?e[0]:e}function Xo(e,t,n){return e.replace(t,n)}function zF(e,t){return e.indexOf(t)}function Ul(e,t){return e.charCodeAt(t)|0}function fT(e,t,n){return e.slice(t,n)}function Jp(e){return e.length}function eN(e){return e.length}function hM(e,t){return t.push(e),e}function Hde(e,t){return e.map(t).join("")}var _D=1,r1=1,wZ=0,Du=0,Ua=0,C1="";function xD(e,t,n,r,s,c,d){return{value:e,root:t,parent:n,type:r,props:s,children:c,line:_D,column:r1,length:d,return:""}}function iS(e,t){return $de(xD("",null,null,"",null,null,0),e,{length:-e.length},t)}function Wde(){return Ua}function Gde(){return Ua=Du>0?Ul(C1,--Du):0,r1--,Ua===10&&(r1=1,_D--),Ua}function gd(){return Ua=Du<wZ?Ul(C1,Du++):0,r1++,Ua===10&&(r1=1,_D++),Ua}function lm(){return Ul(C1,Du)}function mA(){return Du}function lE(e,t){return fT(C1,e,t)}function pT(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function SZ(e){return _D=r1=1,wZ=Jp(C1=e),Du=0,[]}function TZ(e){return C1="",e}function gA(e){return bZ(lE(Du-1,FF(e===91?e+2:e===40?e+1:e)))}function Yde(e){for(;(Ua=lm())&&Ua<33;)gd();return pT(e)>2||pT(Ua)>3?"":" "}function Xde(e,t){for(;--t&&gd()&&!(Ua<48||Ua>102||Ua>57&&Ua<65||Ua>70&&Ua<97););return lE(e,mA()+(t<6&&lm()==32&&gd()==32))}function FF(e){for(;gd();)switch(Ua){case e:return Du;case 34:case 39:e!==34&&e!==39&&FF(Ua);break;case 40:e===41&&FF(e);break;case 92:gd();break}return Du}function Zde(e,t){for(;gd()&&e+Ua!==57;)if(e+Ua===84&&lm()===47)break;return"/*"+lE(t,Du-1)+"*"+vD(e===47?e:gd())}function Kde(e){for(;!pT(lm());)gd();return lE(e,Du)}function Qde(e){return TZ(yA("",null,null,null,[""],e=SZ(e),0,[0],e))}function yA(e,t,n,r,s,c,d,i,m){for(var x=0,T=0,C=d,A=0,I=0,k=0,B=1,j=1,V=1,H=0,G="",X=s,Q=c,ee=r,ce=G;j;)switch(k=H,H=gd()){case 40:if(k!=108&&Ul(ce,C-1)==58){zF(ce+=Xo(gA(H),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:ce+=gA(H);break;case 9:case 10:case 13:case 32:ce+=Yde(k);break;case 92:ce+=Xde(mA()-1,7);continue;case 47:switch(lm()){case 42:case 47:hM(Jde(Zde(gd(),mA()),t,n),m);break;default:ce+="/"}break;case 123*B:i[x++]=Jp(ce)*V;case 125*B:case 59:case 0:switch(H){case 0:case 125:j=0;case 59+T:V==-1&&(ce=Xo(ce,/\f/g,"")),I>0&&Jp(ce)-C&&hM(I>32?i6(ce+";",r,n,C-1):i6(Xo(ce," ","")+";",r,n,C-2),m);break;case 59:ce+=";";default:if(hM(ee=r6(ce,t,n,x,T,s,i,G,X=[],Q=[],C),c),H===123)if(T===0)yA(ce,t,ee,ee,X,c,C,i,Q);else switch(A===99&&Ul(ce,3)===110?100:A){case 100:case 108:case 109:case 115:yA(e,ee,ee,r&&hM(r6(e,ee,ee,0,0,s,i,G,s,X=[],C),Q),s,Q,C,i,r?X:Q);break;default:yA(ce,ee,ee,ee,[""],Q,0,i,Q)}}x=T=I=0,B=V=1,G=ce="",C=d;break;case 58:C=1+Jp(ce),I=k;default:if(B<1){if(H==123)--B;else if(H==125&&B++==0&&Gde()==125)continue}switch(ce+=vD(H),H*B){case 38:V=T>0?1:(ce+="\f",-1);break;case 44:i[x++]=(Jp(ce)-1)*V,V=1;break;case 64:lm()===45&&(ce+=gA(gd())),A=lm(),T=C=Jp(G=ce+=Kde(mA())),H++;break;case 45:k===45&&Jp(ce)==2&&(B=0)}}return c}function r6(e,t,n,r,s,c,d,i,m,x,T){for(var C=s-1,A=s===0?c:[""],I=eN(A),k=0,B=0,j=0;k<r;++k)for(var V=0,H=fT(e,C+1,C=Vde(B=d[k])),G=e;V<I;++V)(G=bZ(B>0?A[V]+" "+H:Xo(H,/&\f/g,A[V])))&&(m[j++]=G);return xD(e,t,n,s===0?Qj:i,m,x,T)}function Jde(e,t,n){return xD(e,t,n,_Z,vD(Wde()),fT(e,2,-2),0)}function i6(e,t,n,r){return xD(e,t,n,Jj,fT(e,0,r),fT(e,r+1,-1),r)}function Qb(e,t){for(var n="",r=eN(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function ehe(e,t,n,r){switch(e.type){case Nde:if(e.children.length)break;case jde:case Jj:return e.return=e.return||e.value;case _Z:return"";case xZ:return e.return=e.value+"{"+Qb(e.children,r)+"}";case Qj:e.value=e.props.join(",")}return Jp(n=Qb(e.children,r))?e.return=e.value+"{"+n+"}":""}function the(e){var t=eN(e);return function(n,r,s,c){for(var d="",i=0;i<t;i++)d+=e[i](n,r,s,c)||"";return d}}function nhe(e){return function(t){t.root||(t=t.return)&&e(t)}}function EZ(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var rhe=function(t,n,r){for(var s=0,c=0;s=c,c=lm(),s===38&&c===12&&(n[r]=1),!pT(c);)gd();return lE(t,Du)},ihe=function(t,n){var r=-1,s=44;do switch(pT(s)){case 0:s===38&&lm()===12&&(n[r]=1),t[r]+=rhe(Du-1,n,r);break;case 2:t[r]+=gA(s);break;case 4:if(s===44){t[++r]=lm()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=vD(s)}while(s=gd());return t},ohe=function(t,n){return TZ(ihe(SZ(t),n))},o6=new WeakMap,she=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!o6.get(r))&&!s){o6.set(t,!0);for(var c=[],d=ohe(n,c),i=r.props,m=0,x=0;m<d.length;m++)for(var T=0;T<i.length;T++,x++)t.props[x]=c[m]?d[m].replace(/&\f/g,i[T]):i[T]+" "+d[m]}}},ahe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function CZ(e,t){switch(Ude(e,t)){case 5103:return Yo+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yo+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Yo+e+oR+e+mc+e+e;case 6828:case 4268:return Yo+e+mc+e+e;case 6165:return Yo+e+mc+"flex-"+e+e;case 5187:return Yo+e+Xo(e,/(\w+).+(:[^]+)/,Yo+"box-$1$2"+mc+"flex-$1$2")+e;case 5443:return Yo+e+mc+"flex-item-"+Xo(e,/flex-|-self/,"")+e;case 4675:return Yo+e+mc+"flex-line-pack"+Xo(e,/align-content|flex-|-self/,"")+e;case 5548:return Yo+e+mc+Xo(e,"shrink","negative")+e;case 5292:return Yo+e+mc+Xo(e,"basis","preferred-size")+e;case 6060:return Yo+"box-"+Xo(e,"-grow","")+Yo+e+mc+Xo(e,"grow","positive")+e;case 4554:return Yo+Xo(e,/([^-])(transform)/g,"$1"+Yo+"$2")+e;case 6187:return Xo(Xo(Xo(e,/(zoom-|grab)/,Yo+"$1"),/(image-set)/,Yo+"$1"),e,"")+e;case 5495:case 3959:return Xo(e,/(image-set\([^]*)/,Yo+"$1$`$1");case 4968:return Xo(Xo(e,/(.+:)(flex-)?(.*)/,Yo+"box-pack:$3"+mc+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yo+e+e;case 4095:case 3583:case 4068:case 2532:return Xo(e,/(.+)-inline(.+)/,Yo+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jp(e)-1-t>6)switch(Ul(e,t+1)){case 109:if(Ul(e,t+4)!==45)break;case 102:return Xo(e,/(.+:)(.+)-([^]+)/,"$1"+Yo+"$2-$3$1"+oR+(Ul(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~zF(e,"stretch")?CZ(Xo(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ul(e,t+1)!==115)break;case 6444:switch(Ul(e,Jp(e)-3-(~zF(e,"!important")&&10))){case 107:return Xo(e,":",":"+Yo)+e;case 101:return Xo(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yo+(Ul(e,14)===45?"inline-":"")+"box$3$1"+Yo+"$2$3$1"+mc+"$2box$3")+e}break;case 5936:switch(Ul(e,t+11)){case 114:return Yo+e+mc+Xo(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Yo+e+mc+Xo(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Yo+e+mc+Xo(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Yo+e+mc+e+e}return e}var lhe=function(t,n,r,s){if(t.length>-1&&!t.return)switch(t.type){case Jj:t.return=CZ(t.value,t.length);break;case xZ:return Qb([iS(t,{value:Xo(t.value,"@","@"+Yo)})],s);case Qj:if(t.length)return Hde(t.props,function(c){switch(qde(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qb([iS(t,{props:[Xo(c,/:(read-\w+)/,":"+oR+"$1")]})],s);case"::placeholder":return Qb([iS(t,{props:[Xo(c,/:(plac\w+)/,":"+Yo+"input-$1")]}),iS(t,{props:[Xo(c,/:(plac\w+)/,":"+oR+"$1")]}),iS(t,{props:[Xo(c,/:(plac\w+)/,mc+"input-$1")]})],s)}return""})}},che=[lhe],MZ=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(B){var j=B.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(B),B.setAttribute("data-s",""))})}var s=t.stylisPlugins||che,c={},d,i=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(B){for(var j=B.getAttribute("data-emotion").split(" "),V=1;V<j.length;V++)c[j[V]]=!0;i.push(B)});var m,x=[she,ahe];{var T,C=[ehe,nhe(function(B){T.insert(B)})],A=the(x.concat(s,C)),I=function(j){return Qb(Qde(j),A)};m=function(j,V,H,G){T=H,I(j?j+"{"+V.styles+"}":V.styles),G&&(k.inserted[V.name]=!0)}}var k={key:n,sheet:new vZ({key:n,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:m};return k.sheet.hydrate(i),k},dk={exports:{}},ts={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6;function uhe(){if(s6)return ts;s6=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,c=e?Symbol.for("react.profiler"):60114,d=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,m=e?Symbol.for("react.async_mode"):60111,x=e?Symbol.for("react.concurrent_mode"):60111,T=e?Symbol.for("react.forward_ref"):60112,C=e?Symbol.for("react.suspense"):60113,A=e?Symbol.for("react.suspense_list"):60120,I=e?Symbol.for("react.memo"):60115,k=e?Symbol.for("react.lazy"):60116,B=e?Symbol.for("react.block"):60121,j=e?Symbol.for("react.fundamental"):60117,V=e?Symbol.for("react.responder"):60118,H=e?Symbol.for("react.scope"):60119;function G(Q){if(typeof Q=="object"&&Q!==null){var ee=Q.$$typeof;switch(ee){case t:switch(Q=Q.type,Q){case m:case x:case r:case c:case s:case C:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case i:case T:case k:case I:case d:return Q;default:return ee}}case n:return ee}}}function X(Q){return G(Q)===x}return ts.AsyncMode=m,ts.ConcurrentMode=x,ts.ContextConsumer=i,ts.ContextProvider=d,ts.Element=t,ts.ForwardRef=T,ts.Fragment=r,ts.Lazy=k,ts.Memo=I,ts.Portal=n,ts.Profiler=c,ts.StrictMode=s,ts.Suspense=C,ts.isAsyncMode=function(Q){return X(Q)||G(Q)===m},ts.isConcurrentMode=X,ts.isContextConsumer=function(Q){return G(Q)===i},ts.isContextProvider=function(Q){return G(Q)===d},ts.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t},ts.isForwardRef=function(Q){return G(Q)===T},ts.isFragment=function(Q){return G(Q)===r},ts.isLazy=function(Q){return G(Q)===k},ts.isMemo=function(Q){return G(Q)===I},ts.isPortal=function(Q){return G(Q)===n},ts.isProfiler=function(Q){return G(Q)===c},ts.isStrictMode=function(Q){return G(Q)===s},ts.isSuspense=function(Q){return G(Q)===C},ts.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===r||Q===x||Q===c||Q===s||Q===C||Q===A||typeof Q=="object"&&Q!==null&&(Q.$$typeof===k||Q.$$typeof===I||Q.$$typeof===d||Q.$$typeof===i||Q.$$typeof===T||Q.$$typeof===j||Q.$$typeof===V||Q.$$typeof===H||Q.$$typeof===B)},ts.typeOf=G,ts}var a6;function dhe(){return a6||(a6=1,dk.exports=uhe()),dk.exports}var hk,l6;function hhe(){if(l6)return hk;l6=1;var e=dhe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[e.ForwardRef]=r,c[e.Memo]=s;function d(k){return e.isMemo(k)?s:c[k.$$typeof]||t}var i=Object.defineProperty,m=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,T=Object.getOwnPropertyDescriptor,C=Object.getPrototypeOf,A=Object.prototype;function I(k,B,j){if(typeof B!="string"){if(A){var V=C(B);V&&V!==A&&I(k,V,j)}var H=m(B);x&&(H=H.concat(x(B)));for(var G=d(k),X=d(B),Q=0;Q<H.length;++Q){var ee=H[Q];if(!n[ee]&&!(j&&j[ee])&&!(X&&X[ee])&&!(G&&G[ee])){var ce=T(B,ee);try{i(k,ee,ce)}catch{}}}}return k}return hk=I,hk}hhe();var fhe=!0;function AZ(e,t,n){var r="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(r+=s+" ")}),r}var tN=function(t,n,r){var s=t.key+"-"+n.name;(r===!1||fhe===!1)&&t.registered[s]===void 0&&(t.registered[s]=n.styles)},nN=function(t,n,r){tN(t,n,r);var s=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var c=n;do t.insert(n===c?"."+s:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function phe(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var mhe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ghe=/[A-Z]|^ms/g,yhe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RZ=function(t){return t.charCodeAt(1)===45},c6=function(t){return t!=null&&typeof t!="boolean"},fk=EZ(function(e){return RZ(e)?e:e.replace(ghe,"-$&").toLowerCase()}),u6=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(yhe,function(r,s,c){return em={name:s,styles:c,next:em},s})}return mhe[t]!==1&&!RZ(t)&&typeof n=="number"&&n!==0?n+"px":n};function mT(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return em={name:s.name,styles:s.styles,next:em},s.name;var c=n;if(c.styles!==void 0){var d=c.next;if(d!==void 0)for(;d!==void 0;)em={name:d.name,styles:d.styles,next:em},d=d.next;var i=c.styles+";";return i}return vhe(e,t,n)}case"function":{if(e!==void 0){var m=em,x=n(e);return em=m,mT(e,t,x)}break}}var T=n;if(t==null)return T;var C=t[T];return C!==void 0?C:T}function vhe(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=mT(e,t,n[s])+";";else for(var c in n){var d=n[c];if(typeof d!="object"){var i=d;t!=null&&t[i]!==void 0?r+=c+"{"+t[i]+"}":c6(i)&&(r+=fk(c)+":"+u6(c,i)+";")}else if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var m=0;m<d.length;m++)c6(d[m])&&(r+=fk(c)+":"+u6(c,d[m])+";");else{var x=mT(e,t,d);switch(c){case"animation":case"animationName":{r+=fk(c)+":"+x+";";break}default:r+=c+"{"+x+"}"}}}return r}var d6=/label:\s*([^\s;{]+)\s*(;|$)/g,em;function cE(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";em=void 0;var c=e[0];if(c==null||c.raw===void 0)r=!1,s+=mT(n,t,c);else{var d=c;s+=d[0]}for(var i=1;i<e.length;i++)if(s+=mT(n,t,e[i]),r){var m=c;s+=m[i]}d6.lastIndex=0;for(var x="",T;(T=d6.exec(s))!==null;)x+="-"+T[1];var C=phe(s)+x;return{name:C,styles:s,next:em}}var _he=function(t){return t()},DZ=eR.useInsertionEffect?eR.useInsertionEffect:!1,PZ=DZ||_he,h6=DZ||U.useLayoutEffect,IZ=U.createContext(typeof HTMLElement<"u"?MZ({key:"css"}):null),xhe=IZ.Provider,rN=function(t){return U.forwardRef(function(n,r){var s=U.useContext(IZ);return t(n,s,r)})},M1=U.createContext({}),bhe=function(){return U.useContext(M1)},iN={}.hasOwnProperty,BF="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",whe=function(t,n){var r={};for(var s in n)iN.call(n,s)&&(r[s]=n[s]);return r[BF]=t,r},She=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return tN(n,r,s),PZ(function(){return nN(n,r,s)}),null},The=rN(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var s=e[BF],c=[r],d="";typeof e.className=="string"?d=AZ(t.registered,c,e.className):e.className!=null&&(d=e.className+" ");var i=cE(c,void 0,U.useContext(M1));d+=t.key+"-"+i.name;var m={};for(var x in e)iN.call(e,x)&&x!=="css"&&x!==BF&&(m[x]=e[x]);return m.className=d,n&&(m.ref=n),U.createElement(U.Fragment,null,U.createElement(She,{cache:t,serialized:i,isStringTag:typeof s=="string"}),U.createElement(s,m))}),Ehe=The,f6=function(t,n){var r=arguments;if(n==null||!iN.call(n,"css"))return U.createElement.apply(void 0,r);var s=r.length,c=new Array(s);c[0]=Ehe,c[1]=whe(t,n);for(var d=2;d<s;d++)c[d]=r[d];return U.createElement.apply(null,c)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(f6||(f6={}));var Che=rN(function(e,t){var n=e.styles,r=cE([n],void 0,U.useContext(M1)),s=U.useRef();return h6(function(){var c=t.key+"-global",d=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,m=document.querySelector('style[data-emotion="'+c+" "+r.name+'"]');return t.sheet.tags.length&&(d.before=t.sheet.tags[0]),m!==null&&(i=!0,m.setAttribute("data-emotion",c),d.hydrate([m])),s.current=[d,i],function(){d.flush()}},[t]),h6(function(){var c=s.current,d=c[0],i=c[1];if(i){c[1]=!1;return}if(r.next!==void 0&&nN(t,r.next,!0),d.tags.length){var m=d.tags[d.tags.length-1].nextElementSibling;d.before=m,d.flush()}t.insert("",r,d,!1)},[t,r.name]),null});function A1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cE(t)}function wv(){var e=A1.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Mhe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ahe=EZ(function(e){return Mhe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Rhe=Ahe,Dhe=function(t){return t!=="theme"},p6=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Rhe:Dhe},m6=function(t,n,r){var s;if(n){var c=n.shouldForwardProp;s=t.__emotion_forwardProp&&c?function(d){return t.__emotion_forwardProp(d)&&c(d)}:c}return typeof s!="function"&&r&&(s=t.__emotion_forwardProp),s},Phe=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return tN(n,r,s),PZ(function(){return nN(n,r,s)}),null},Ihe=function e(t,n){var r=t.__emotion_real===t,s=r&&t.__emotion_base||t,c,d;n!==void 0&&(c=n.label,d=n.target);var i=m6(t,n,r),m=i||p6(s),x=!m("as");return function(){var T=arguments,C=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&C.push("label:"+c+";"),T[0]==null||T[0].raw===void 0)C.push.apply(C,T);else{var A=T[0];C.push(A[0]);for(var I=T.length,k=1;k<I;k++)C.push(T[k],A[k])}var B=rN(function(j,V,H){var G=x&&j.as||s,X="",Q=[],ee=j;if(j.theme==null){ee={};for(var ce in j)ee[ce]=j[ce];ee.theme=U.useContext(M1)}typeof j.className=="string"?X=AZ(V.registered,Q,j.className):j.className!=null&&(X=j.className+" ");var fe=cE(C.concat(Q),V.registered,ee);X+=V.key+"-"+fe.name,d!==void 0&&(X+=" "+d);var ue=x&&i===void 0?p6(G):m,ae={};for(var xe in j)x&&xe==="as"||ue(xe)&&(ae[xe]=j[xe]);return ae.className=X,H&&(ae.ref=H),U.createElement(U.Fragment,null,U.createElement(Phe,{cache:V,serialized:fe,isStringTag:typeof G=="string"}),U.createElement(G,ae))});return B.displayName=c!==void 0?c:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",B.defaultProps=t.defaultProps,B.__emotion_real=B,B.__emotion_base=s,B.__emotion_styles=C,B.__emotion_forwardProp=i,Object.defineProperty(B,"toString",{value:function(){return"."+d}}),B.withComponent=function(j,V){var H=e(j,Pt({},n,V,{shouldForwardProp:m6(B,V,!0)}));return H.apply(void 0,C)},B}},khe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jF=Ihe.bind(null);khe.forEach(function(e){jF[e]=jF(e)});const pk=new Map,Ohe=(e,t)=>{const n=MZ(e);return n.sheet=new t({key:n.key,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy,prepend:n.sheet.prepend,insertionPoint:n.sheet.insertionPoint}),n};let nv;if(typeof document=="object"&&(nv=document.querySelector('[name="emotion-insertion-point"]'),!nv)){nv=document.createElement("meta"),nv.setAttribute("name","emotion-insertion-point"),nv.setAttribute("content","");const e=document.querySelector("head");e&&e.prepend(nv)}function Lhe(e,t){if(e||t){class n extends vZ{insert(c,d){return this.key&&this.key.endsWith("global")&&(this.before=nv),super.insert(c,d)}}const r=Ohe({key:"css",insertionPoint:e?nv:void 0},n);if(t){const s=r.insert;r.insert=(...c)=>(c[1].styles.startsWith("@layer")||(c[1].styles=`@layer mui {${c[1].styles}}`),s(...c))}return r}}function zhe(e){const{injectFirst:t,enableCssLayer:n,children:r}=e,s=U.useMemo(()=>{const c=`${t}-${n}`;if(pk.has(c))return pk.get(c);const d=Lhe(t,n);return pk.set(c,d),d},[t,n]);return s?z.jsx(xhe,{value:s,children:r}):r}function Fhe(e){return e==null||Object.keys(e).length===0}function kZ(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?s=>t(Fhe(s)?n:s):t;return z.jsx(Che,{styles:r})}function OZ(e,t){return jF(e,t)}function Bhe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const g6=[];function y6(e){return g6[0]=e,cE(g6)}const jhe=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Nhe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=e,c=jhe(t),d=Object.keys(c);function i(A){return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${n})`}function m(A){return`@media (max-width:${(typeof t[A]=="number"?t[A]:A)-r/100}${n})`}function x(A,I){const k=d.indexOf(I);return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${n}) and (max-width:${(k!==-1&&typeof t[d[k]]=="number"?t[d[k]]:I)-r/100}${n})`}function T(A){return d.indexOf(A)+1<d.length?x(A,d[d.indexOf(A)+1]):i(A)}function C(A){const I=d.indexOf(A);return I===0?i(d[1]):I===d.length-1?m(d[I]):x(A,d[d.indexOf(A)+1]).replace("@media","@media not all and")}return{keys:d,values:c,up:i,down:m,between:x,only:T,not:C,unit:n,...s}}const Vhe={borderRadius:4};function LZ(e=8,t=dD({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(c=>{const d=t(c);return typeof d=="number"?`${d}px`:d}).join(" ");return n.mui=!0,n}function $he(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return n.palette.mode===e?t:{}}function uE(e={},...t){const{breakpoints:n={},palette:r={},spacing:s,shape:c={},...d}=e,i=Nhe(n),m=LZ(s);let x=Tl({breakpoints:i,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:m,shape:{...Vhe,...c}},d);return x=Gue(x),x.applyStyles=$he,x=t.reduce((T,C)=>Tl(T,C),x),x.unstable_sxConfig={...aE,...d==null?void 0:d.unstable_sxConfig},x.unstable_sx=function(C){return fv({sx:C,theme:this})},x}function Uhe(e){return Object.keys(e).length===0}function oN(e=null){const t=U.useContext(M1);return!t||Uhe(t)?e:t}const qhe=uE();function dE(e=qhe){return oN(e)}function Hhe({styles:e,themeId:t,defaultTheme:n={}}){const r=dE(n),s=typeof e=="function"?e(t&&r[t]||r):e;return z.jsx(kZ,{styles:s})}const v6=e=>e,Whe=()=>{let e=v6;return{configure(t){e=t},generate(t){return e(t)},reset(){e=v6}}},zZ=Whe();function Ghe(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:s}=e,c=OZ("div",{shouldForwardProp:i=>i!=="theme"&&i!=="sx"&&i!=="as"})(fv);return U.forwardRef(function(m,x){const T=dE(n),{className:C,component:A="div",...I}=yD(m);return z.jsx(c,{as:A,ref:x,className:$n(C,s?s(r):r),theme:t&&T[t]||T,...I})})}const Yhe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fr(e,t,n="Mui"){const r=Yhe[t];return r?`${n}-${r}`:`${zZ.generate(e)}-${t}`}function pr(e,t,n="Mui"){const r={};return t.forEach(s=>{r[s]=fr(e,s,n)}),r}function FZ(e){const{variants:t,...n}=e,r={variants:t,style:y6(n),isProcessed:!0};return r.style===n||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=y6(s.style))}),r}const Xhe=uE();function cm(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Zhe(e){return e?(t,n)=>n[e]:null}function Khe(e,t,n){e.theme=Jhe(e.theme)?n:e.theme[t]||e.theme}function vA(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>vA(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...c}=n;r=c}return BZ(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function BZ(e,t,n=[]){var s;let r;e:for(let c=0;c<t.length;c+=1){const d=t[c];if(typeof d.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!d.props(r))continue}else for(const i in d.props)if(e[i]!==d.props[i]&&((s=e.ownerState)==null?void 0:s[i])!==d.props[i])continue e;typeof d.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(d.style(r))):n.push(d.style)}return n}function jZ(e={}){const{themeId:t,defaultTheme:n=Xhe,rootShouldForwardProp:r=cm,slotShouldForwardProp:s=cm}=e;function c(i){Khe(i,t,n)}return(i,m={})=>{Bhe(i,Q=>Q.filter(ee=>ee!==fv));const{name:x,slot:T,skipVariantsResolver:C,skipSx:A,overridesResolver:I=Zhe(tfe(T)),...k}=m,B=C!==void 0?C:T&&T!=="Root"&&T!=="root"||!1,j=A||!1;let V=cm;T==="Root"||T==="root"?V=r:T?V=s:efe(i)&&(V=void 0);const H=OZ(i,{shouldForwardProp:V,label:Qhe(),...k}),G=Q=>{if(typeof Q=="function"&&Q.__emotion_real!==Q)return function(ce){return vA(ce,Q)};if(nm(Q)){const ee=FZ(Q);return ee.variants?function(fe){return vA(fe,ee)}:ee.style}return Q},X=(...Q)=>{const ee=[],ce=Q.map(G),fe=[];if(ee.push(c),x&&I&&fe.push(function(we){var _e,Pe;const Se=(Pe=(_e=we.theme.components)==null?void 0:_e[x])==null?void 0:Pe.styleOverrides;if(!Se)return null;const Ae={};for(const We in Se)Ae[We]=vA(we,Se[We]);return I(we,Ae)}),x&&!B&&fe.push(function(we){var Ae,_e;const Me=we.theme,Se=(_e=(Ae=Me==null?void 0:Me.components)==null?void 0:Ae[x])==null?void 0:_e.variants;return Se?BZ(we,Se):null}),j||fe.push(fv),Array.isArray(ce[0])){const xe=ce.shift(),we=new Array(ee.length).fill(""),Me=new Array(fe.length).fill("");let Se;Se=[...we,...xe,...Me],Se.raw=[...we,...xe.raw,...Me],ee.unshift(Se)}const ue=[...ee,...ce,...fe],ae=H(...ue);return i.muiName&&(ae.muiName=i.muiName),ae};return H.withConfig&&(X.withConfig=H.withConfig),X}}function Qhe(e,t){return void 0}function Jhe(e){for(const t in e)return!1;return!0}function efe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function tfe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const NZ=jZ();function gT(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const s=r;if(s==="components"||s==="slots")n[s]={...e[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const c=e[s],d=t[s];if(!d)n[s]=c||{};else if(!c)n[s]=d;else{n[s]={...d};for(const i in c)if(Object.prototype.hasOwnProperty.call(c,i)){const m=i;n[s][m]=gT(c[m],d[m])}}}else n[s]===void 0&&(n[s]=e[s])}return n}function VZ(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:gT(t.components[n].defaultProps,r)}function sN({props:e,name:t,defaultTheme:n,themeId:r}){let s=dE(n);return r&&(s=s[r]||s),VZ({theme:s,name:t,props:e})}const Qs=typeof window<"u"?U.useLayoutEffect:U.useEffect;function nfe(e,t,n,r,s){const[c,d]=U.useState(()=>s&&n?n(e).matches:r?r(e).matches:t);return Qs(()=>{if(!n)return;const i=n(e),m=()=>{d(i.matches)};return m(),i.addEventListener("change",m),()=>{i.removeEventListener("change",m)}},[e,n]),c}const rfe={...eR},$Z=rfe.useSyncExternalStore;function ife(e,t,n,r,s){const c=U.useCallback(()=>t,[t]),d=U.useMemo(()=>{if(s&&n)return()=>n(e).matches;if(r!==null){const{matches:T}=r(e);return()=>T}return c},[c,e,r,s,n]),[i,m]=U.useMemo(()=>{if(n===null)return[c,()=>()=>{}];const T=n(e);return[()=>T.matches,C=>(T.addEventListener("change",C),()=>{T.removeEventListener("change",C)})]},[c,n,e]);return $Z(m,i,d)}function UZ(e={}){const{themeId:t}=e;return function(r,s={}){let c=oN();c&&t&&(c=c[t]||c);const d=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:m=d?window.matchMedia:null,ssrMatchMedia:x=null,noSsr:T=!1}=VZ({name:"MuiUseMediaQuery",props:s,theme:c});let C=typeof r=="function"?r(c):r;return C=C.replace(/^@media( ?)/m,""),C.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),($Z!==void 0?ife:nfe)(C,i,m,x,T)}}UZ();const qZ=U.createContext(null);function aN(){return U.useContext(qZ)}const ofe=typeof Symbol=="function"&&Symbol.for,sfe=ofe?Symbol.for("mui.nested"):"__THEME_NESTED__";function afe(e,t){return typeof t=="function"?t(e):{...e,...t}}function lfe(e){const{children:t,theme:n}=e,r=aN(),s=U.useMemo(()=>{const c=r===null?{...n}:afe(r,n);return c!=null&&(c[sfe]=r!==null),c},[n,r]);return z.jsx(qZ.Provider,{value:s,children:t})}const HZ=U.createContext(void 0);function cfe({value:e,children:t}){return z.jsx(HZ.Provider,{value:e,children:t})}function ufe(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const s=t.components[n];return s.defaultProps?gT(s.defaultProps,r):!s.styleOverrides&&!s.variants?gT(s,r):r}function dfe({props:e,name:t}){const n=U.useContext(HZ);return ufe({props:e,name:t,theme:{components:n}})}const _6={};function x6(e,t,n,r=!1){return U.useMemo(()=>{const s=e&&t[e]||t;if(typeof n=="function"){const c=n(s),d=e?{...t,[e]:c}:c;return r?()=>d:d}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,r])}function WZ(e){const{children:t,theme:n,themeId:r}=e,s=oN(_6),c=aN()||_6,d=x6(r,s,n),i=x6(r,c,n,!0),m=(r?d[r]:d).direction==="rtl";return z.jsx(lfe,{theme:i,children:z.jsx(M1.Provider,{value:d,children:z.jsx(Vue,{value:m,children:z.jsx(cfe,{value:r?d[r].components:d.components,children:t})})})})}const b6={theme:void 0};function hfe(e){let t,n;return function(s){let c=t;return(c===void 0||s.theme!==n)&&(b6.theme=s.theme,c=FZ(e(b6)),t=c,n=s.theme),c}}const lN="mode",cN="color-scheme",ffe="data-color-scheme";function pfe(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:s=lN,colorSchemeStorageKey:c=cN,attribute:d=ffe,colorSchemeNode:i="document.documentElement",nonce:m}=e||{};let x="",T=d;if(d==="class"&&(T=".%s"),d==="data"&&(T="[data-%s]"),T.startsWith(".")){const A=T.substring(1);x+=`${i}.classList.remove('${A}'.replace('%s', light), '${A}'.replace('%s', dark));
      ${i}.classList.add('${A}'.replace('%s', colorScheme));`}const C=T.match(/\[([^\]]+)\]/);if(C){const[A,I]=C[1].split("=");I||(x+=`${i}.removeAttribute('${A}'.replace('%s', light));
      ${i}.removeAttribute('${A}'.replace('%s', dark));`),x+=`
      ${i}.setAttribute('${A}'.replace('%s', colorScheme), ${I?`${I}.replace('%s', colorScheme)`:'""'});`}else x+=`${i}.setAttribute('${T}', colorScheme);`;return z.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${s}') || '${t}';
  const dark = localStorage.getItem('${c}-dark') || '${r}';
  const light = localStorage.getItem('${c}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${x}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function mfe(){}const gfe=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(n){if(typeof window>"u")return;if(!t)return n;let r;try{r=t.localStorage.getItem(e)}catch{}return r||n},set:n=>{if(t)try{t.localStorage.setItem(e,n)}catch{}},subscribe:n=>{if(!t)return mfe;const r=s=>{const c=s.newValue;s.key===e&&n(c)};return t.addEventListener("storage",r),()=>{t.removeEventListener("storage",r)}}});function mk(){}function w6(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function GZ(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function yfe(e){return GZ(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function vfe(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:s=[],modeStorageKey:c=lN,colorSchemeStorageKey:d=cN,storageWindow:i=typeof window>"u"?void 0:window,storageManager:m=gfe,noSsr:x=!1}=e,T=s.join(","),C=s.length>1,A=U.useMemo(()=>m==null?void 0:m({key:c,storageWindow:i}),[m,c,i]),I=U.useMemo(()=>m==null?void 0:m({key:`${d}-light`,storageWindow:i}),[m,d,i]),k=U.useMemo(()=>m==null?void 0:m({key:`${d}-dark`,storageWindow:i}),[m,d,i]),[B,j]=U.useState(()=>{const fe=(A==null?void 0:A.get(t))||t,ue=(I==null?void 0:I.get(n))||n,ae=(k==null?void 0:k.get(r))||r;return{mode:fe,systemMode:w6(fe),lightColorScheme:ue,darkColorScheme:ae}}),[V,H]=U.useState(x||!C);U.useEffect(()=>{H(!0)},[]);const G=yfe(B),X=U.useCallback(fe=>{j(ue=>{if(fe===ue.mode)return ue;const ae=fe??t;return A==null||A.set(ae),{...ue,mode:ae,systemMode:w6(ae)}})},[A,t]),Q=U.useCallback(fe=>{fe?typeof fe=="string"?fe&&!T.includes(fe)?console.error(`\`${fe}\` does not exist in \`theme.colorSchemes\`.`):j(ue=>{const ae={...ue};return GZ(ue,xe=>{xe==="light"&&(I==null||I.set(fe),ae.lightColorScheme=fe),xe==="dark"&&(k==null||k.set(fe),ae.darkColorScheme=fe)}),ae}):j(ue=>{const ae={...ue},xe=fe.light===null?n:fe.light,we=fe.dark===null?r:fe.dark;return xe&&(T.includes(xe)?(ae.lightColorScheme=xe,I==null||I.set(xe)):console.error(`\`${xe}\` does not exist in \`theme.colorSchemes\`.`)),we&&(T.includes(we)?(ae.darkColorScheme=we,k==null||k.set(we)):console.error(`\`${we}\` does not exist in \`theme.colorSchemes\`.`)),ae}):j(ue=>(I==null||I.set(n),k==null||k.set(r),{...ue,lightColorScheme:n,darkColorScheme:r}))},[T,I,k,n,r]),ee=U.useCallback(fe=>{B.mode==="system"&&j(ue=>{const ae=fe!=null&&fe.matches?"dark":"light";return ue.systemMode===ae?ue:{...ue,systemMode:ae}})},[B.mode]),ce=U.useRef(ee);return ce.current=ee,U.useEffect(()=>{if(typeof window.matchMedia!="function"||!C)return;const fe=(...ae)=>ce.current(...ae),ue=window.matchMedia("(prefers-color-scheme: dark)");return ue.addListener(fe),fe(ue),()=>{ue.removeListener(fe)}},[C]),U.useEffect(()=>{if(C){const fe=(A==null?void 0:A.subscribe(xe=>{(!xe||["light","dark","system"].includes(xe))&&X(xe||t)}))||mk,ue=(I==null?void 0:I.subscribe(xe=>{(!xe||T.match(xe))&&Q({light:xe})}))||mk,ae=(k==null?void 0:k.subscribe(xe=>{(!xe||T.match(xe))&&Q({dark:xe})}))||mk;return()=>{fe(),ue(),ae()}}},[Q,X,T,t,i,C,A,I,k]),{...B,mode:V?B.mode:void 0,systemMode:V?B.systemMode:void 0,colorScheme:V?G:void 0,setMode:X,setColorScheme:Q}}const _fe="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function xfe(e){const{themeId:t,theme:n={},modeStorageKey:r=lN,colorSchemeStorageKey:s=cN,disableTransitionOnChange:c=!1,defaultColorScheme:d,resolveTheme:i}=e,m={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},x=U.createContext(void 0),T=()=>U.useContext(x)||m,C={},A={};function I(V){var Rn,Hn,mr,Xn;const{children:H,theme:G,modeStorageKey:X=r,colorSchemeStorageKey:Q=s,disableTransitionOnChange:ee=c,storageManager:ce,storageWindow:fe=typeof window>"u"?void 0:window,documentNode:ue=typeof document>"u"?void 0:document,colorSchemeNode:ae=typeof document>"u"?void 0:document.documentElement,disableNestedContext:xe=!1,disableStyleSheetGeneration:we=!1,defaultMode:Me="system",forceThemeRerender:Se=!1,noSsr:Ae}=V,_e=U.useRef(!1),Pe=aN(),We=U.useContext(x),Fe=!!We&&!xe,Ce=U.useMemo(()=>G||(typeof n=="function"?n():n),[G]),He=Ce[t],dt=He||Ce,{colorSchemes:gt=C,components:Nt=A,cssVarPrefix:wt}=dt,ot=Object.keys(gt).filter(or=>!!gt[or]).join(","),st=U.useMemo(()=>ot.split(","),[ot]),St=typeof d=="string"?d:d.light,Dt=typeof d=="string"?d:d.dark,Et=gt[St]&&gt[Dt]?Me:((Hn=(Rn=gt[dt.defaultColorScheme])==null?void 0:Rn.palette)==null?void 0:Hn.mode)||((mr=dt.palette)==null?void 0:mr.mode),{mode:yt,setMode:Lt,systemMode:Ct,lightColorScheme:Wt,darkColorScheme:fn,colorScheme:Zt,setColorScheme:Ut}=vfe({supportedColorSchemes:st,defaultLightColorScheme:St,defaultDarkColorScheme:Dt,modeStorageKey:X,colorSchemeStorageKey:Q,defaultMode:Et,storageManager:ce,storageWindow:fe,noSsr:Ae});let kn=yt,Bn=Zt;Fe&&(kn=We.mode,Bn=We.colorScheme);let bn=Bn||dt.defaultColorScheme;dt.vars&&!Se&&(bn=dt.defaultColorScheme);const Nn=U.useMemo(()=>{var Fr;const or=((Fr=dt.generateThemeVars)==null?void 0:Fr.call(dt))||dt.vars,Mn={...dt,components:Nt,colorSchemes:gt,cssVarPrefix:wt,vars:or};if(typeof Mn.generateSpacing=="function"&&(Mn.spacing=Mn.generateSpacing()),bn){const Cr=gt[bn];Cr&&typeof Cr=="object"&&Object.keys(Cr).forEach(xr=>{Cr[xr]&&typeof Cr[xr]=="object"?Mn[xr]={...Mn[xr],...Cr[xr]}:Mn[xr]=Cr[xr]})}return i?i(Mn):Mn},[dt,bn,Nt,gt,wt]),ft=dt.colorSchemeSelector;Qs(()=>{if(Bn&&ae&&ft&&ft!=="media"){const or=ft;let Mn=ft;if(or==="class"&&(Mn=".%s"),or==="data"&&(Mn="[data-%s]"),or!=null&&or.startsWith("data-")&&!or.includes("%s")&&(Mn=`[${or}="%s"]`),Mn.startsWith("."))ae.classList.remove(...st.map(Fr=>Mn.substring(1).replace("%s",Fr))),ae.classList.add(Mn.substring(1).replace("%s",Bn));else{const Fr=Mn.replace("%s",Bn).match(/\[([^\]]+)\]/);if(Fr){const[Cr,xr]=Fr[1].split("=");xr||st.forEach(ir=>{ae.removeAttribute(Cr.replace(Bn,ir))}),ae.setAttribute(Cr,xr?xr.replace(/"|'/g,""):"")}else ae.setAttribute(Mn,Bn)}}},[Bn,ft,ae,st]),U.useEffect(()=>{let or;if(ee&&_e.current&&ue){const Mn=ue.createElement("style");Mn.appendChild(ue.createTextNode(_fe)),ue.head.appendChild(Mn),window.getComputedStyle(ue.body),or=setTimeout(()=>{ue.head.removeChild(Mn)},1)}return()=>{clearTimeout(or)}},[Bn,ee,ue]),U.useEffect(()=>(_e.current=!0,()=>{_e.current=!1}),[]);const vn=U.useMemo(()=>({allColorSchemes:st,colorScheme:Bn,darkColorScheme:fn,lightColorScheme:Wt,mode:kn,setColorScheme:Ut,setMode:Lt,systemMode:Ct}),[st,Bn,fn,Wt,kn,Ut,Lt,Ct,Nn.colorSchemeSelector]);let Ot=!0;(we||dt.cssVariables===!1||Fe&&(Pe==null?void 0:Pe.cssVarPrefix)===wt)&&(Ot=!1);const tn=z.jsxs(U.Fragment,{children:[z.jsx(WZ,{themeId:He?t:void 0,theme:Nn,children:H}),Ot&&z.jsx(kZ,{styles:((Xn=Nn.generateStyleSheets)==null?void 0:Xn.call(Nn))||[]})]});return Fe?tn:z.jsx(x.Provider,{value:vn,children:tn})}const k=typeof d=="string"?d:d.light,B=typeof d=="string"?d:d.dark;return{CssVarsProvider:I,useColorScheme:T,getInitColorSchemeScript:V=>pfe({colorSchemeStorageKey:s,defaultLightColorScheme:k,defaultDarkColorScheme:B,modeStorageKey:r,...V})}}function bfe(e=""){function t(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${e?`${e}-`:""}${r}${t(...s)})`}const S6=(e,t,n,r=[])=>{let s=e;t.forEach((c,d)=>{d===t.length-1?Array.isArray(s)?s[Number(c)]=n:s&&typeof s=="object"&&(s[c]=n):s&&typeof s=="object"&&(s[c]||(s[c]=r.includes(c)?[]:{}),s=s[c])})},wfe=(e,t,n)=>{function r(s,c=[],d=[]){Object.entries(s).forEach(([i,m])=>{(!n||n&&!n([...c,i]))&&m!=null&&(typeof m=="object"&&Object.keys(m).length>0?r(m,[...c,i],Array.isArray(m)?[...d,i]:d):t([...c,i],m,d))})}r(e)},Sfe=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function gk(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},s={},c={},d={};return wfe(e,(i,m,x)=>{if((typeof m=="string"||typeof m=="number")&&(!r||!r(i,m))){const T=`--${n?`${n}-`:""}${i.join("-")}`,C=Sfe(i,m);Object.assign(s,{[T]:C}),S6(c,i,`var(${T})`,x),S6(d,i,`var(${T}, ${C})`,x)}},i=>i[0]==="vars"),{css:s,vars:c,varsWithDefaults:d}}function Tfe(e,t={}){const{getSelector:n=j,disableCssColorScheme:r,colorSchemeSelector:s}=t,{colorSchemes:c={},components:d,defaultColorScheme:i="light",...m}=e,{vars:x,css:T,varsWithDefaults:C}=gk(m,t);let A=C;const I={},{[i]:k,...B}=c;if(Object.entries(B||{}).forEach(([G,X])=>{const{vars:Q,css:ee,varsWithDefaults:ce}=gk(X,t);A=Tl(A,ce),I[G]={css:ee,vars:Q}}),k){const{css:G,vars:X,varsWithDefaults:Q}=gk(k,t);A=Tl(A,Q),I[i]={css:G,vars:X}}function j(G,X){var ee,ce;let Q=s;if(s==="class"&&(Q=".%s"),s==="data"&&(Q="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(Q=`[${s}="%s"]`),G){if(Q==="media")return e.defaultColorScheme===G?":root":{[`@media (prefers-color-scheme: ${((ce=(ee=c[G])==null?void 0:ee.palette)==null?void 0:ce.mode)||G})`]:{":root":X}};if(Q)return e.defaultColorScheme===G?`:root, ${Q.replace("%s",String(G))}`:Q.replace("%s",String(G))}return":root"}return{vars:A,generateThemeVars:()=>{let G={...x};return Object.entries(I).forEach(([,{vars:X}])=>{G=Tl(G,X)}),G},generateStyleSheets:()=>{var fe,ue;const G=[],X=e.defaultColorScheme||"light";function Q(ae,xe){Object.keys(xe).length&&G.push(typeof ae=="string"?{[ae]:{...xe}}:ae)}Q(n(void 0,{...T}),T);const{[X]:ee,...ce}=I;if(ee){const{css:ae}=ee,xe=(ue=(fe=c[X])==null?void 0:fe.palette)==null?void 0:ue.mode,we=!r&&xe?{colorScheme:xe,...ae}:{...ae};Q(n(X,{...we}),we)}return Object.entries(ce).forEach(([ae,{css:xe}])=>{var Se,Ae;const we=(Ae=(Se=c[ae])==null?void 0:Se.palette)==null?void 0:Ae.mode,Me=!r&&we?{colorScheme:we,...xe}:{...xe};Q(n(ae,{...Me}),Me)}),G}}}function Efe(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function GS(e,t){var n,r,s;return U.isValidElement(e)&&t.indexOf(e.type.muiName??((s=(r=(n=e.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}const Cfe=(e,t)=>e.filter(n=>t.includes(n)),R1=(e,t,n)=>{const r=e.keys[0];Array.isArray(t)?t.forEach((s,c)=>{n((d,i)=>{c<=e.keys.length-1&&(c===0?Object.assign(d,i):d[e.up(e.keys[c])]=i)},s)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Cfe(e.keys,Object.keys(t))).forEach(c=>{if(e.keys.includes(c)){const d=t[c];d!==void 0&&n((i,m)=>{r===c?Object.assign(i,m):i[e.up(c)]=m},d)}}):(typeof t=="number"||typeof t=="string")&&n((s,c)=>{Object.assign(s,c)},t)};function sR(e){return`--Grid-${e}Spacing`}function bD(e){return`--Grid-parent-${e}Spacing`}const T6="--Grid-columns",Jb="--Grid-parent-columns",Mfe=({theme:e,ownerState:t})=>{const n={};return R1(e.breakpoints,t.size,(r,s)=>{let c={};s==="grow"&&(c={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(c={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / var(${Jb}) - (var(${Jb}) - ${s}) * (var(${bD("column")}) / var(${Jb})))`}),r(n,c)}),n},Afe=({theme:e,ownerState:t})=>{const n={};return R1(e.breakpoints,t.offset,(r,s)=>{let c={};s==="auto"&&(c={marginLeft:"auto"}),typeof s=="number"&&(c={marginLeft:s===0?"0px":`calc(100% * ${s} / var(${Jb}) + var(${bD("column")}) * ${s} / var(${Jb}))`}),r(n,c)}),n},Rfe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[T6]:12};return R1(e.breakpoints,t.columns,(r,s)=>{const c=s??12;r(n,{[T6]:c,"> *":{[Jb]:c}})}),n},Dfe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return R1(e.breakpoints,t.rowSpacing,(r,s)=>{var d;const c=typeof s=="string"?s:(d=e.spacing)==null?void 0:d.call(e,s);r(n,{[sR("row")]:c,"> *":{[bD("row")]:c}})}),n},Pfe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return R1(e.breakpoints,t.columnSpacing,(r,s)=>{var d;const c=typeof s=="string"?s:(d=e.spacing)==null?void 0:d.call(e,s);r(n,{[sR("column")]:c,"> *":{[bD("column")]:c}})}),n},Ife=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return R1(e.breakpoints,t.direction,(r,s)=>{r(n,{flexDirection:s})}),n},kfe=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${sR("row")}) var(${sR("column")})`}}),Ofe=e=>{const t=[];return Object.entries(e).forEach(([n,r])=>{r!==!1&&r!==void 0&&t.push(`grid-${n}-${String(r)}`)}),t},Lfe=(e,t="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const r=[];return Object.entries(e).forEach(([s,c])=>{n(c)&&r.push(`spacing-${s}-${String(c)}`)}),r}return[]},zfe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function Ffe(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const Bfe=uE(),jfe=NZ("div",{name:"MuiGrid",slot:"Root"});function Nfe(e){return sN({props:e,name:"MuiGrid",defaultTheme:Bfe})}function Vfe(e={}){const{createStyledComponent:t=jfe,useThemeProps:n=Nfe,useTheme:r=dE,componentName:s="MuiGrid"}=e,c=(x,T)=>{const{container:C,direction:A,spacing:I,wrap:k,size:B}=x,j={root:["root",C&&"container",k!=="wrap"&&`wrap-xs-${String(k)}`,...zfe(A),...Ofe(B),...C?Lfe(I,T.breakpoints.keys[0]):[]]};return dr(j,V=>fr(s,V),{})};function d(x,T,C=()=>!0){const A={};return x===null||(Array.isArray(x)?x.forEach((I,k)=>{I!==null&&C(I)&&T.keys[k]&&(A[T.keys[k]]=I)}):typeof x=="object"?Object.keys(x).forEach(I=>{const k=x[I];k!=null&&C(k)&&(A[I]=k)}):A[T.keys[0]]=x),A}const i=t(Rfe,Pfe,Dfe,Mfe,Ife,kfe,Afe),m=U.forwardRef(function(T,C){const A=r(),I=n(T),k=yD(I);Ffe(k,A.breakpoints);const{className:B,children:j,columns:V=12,container:H=!1,component:G="div",direction:X="row",wrap:Q="wrap",size:ee={},offset:ce={},spacing:fe=0,rowSpacing:ue=fe,columnSpacing:ae=fe,unstable_level:xe=0,...we}=k,Me=d(ee,A.breakpoints,He=>He!==!1),Se=d(ce,A.breakpoints),Ae=T.columns??(xe?void 0:V),_e=T.spacing??(xe?void 0:fe),Pe=T.rowSpacing??T.spacing??(xe?void 0:ue),We=T.columnSpacing??T.spacing??(xe?void 0:ae),Fe={...k,level:xe,columns:Ae,container:H,direction:X,wrap:Q,spacing:_e,rowSpacing:Pe,columnSpacing:We,size:Me,offset:Se},Ce=c(Fe,A);return z.jsx(i,{ref:C,as:G,ownerState:Fe,className:$n(Ce.root,B),...we,children:U.Children.map(j,He=>{var dt;return U.isValidElement(He)&&GS(He,["Grid"])&&H&&He.props.container?U.cloneElement(He,{unstable_level:((dt=He.props)==null?void 0:dt.unstable_level)??xe+1}):He})})});return m.muiName="Grid",m}const $fe=uE(),Ufe=NZ("div",{name:"MuiStack",slot:"Root"});function qfe(e){return sN({props:e,name:"MuiStack",defaultTheme:$fe})}function Hfe(e,t){const n=U.Children.toArray(e).filter(Boolean);return n.reduce((r,s,c)=>(r.push(s),c<n.length-1&&r.push(U.cloneElement(t,{key:`separator-${c}`})),r),[])}const Wfe=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Gfe=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...Yf({theme:t},uk({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r}))};if(e.spacing){const r=dD(t),s=Object.keys(t.breakpoints.values).reduce((m,x)=>((typeof e.spacing=="object"&&e.spacing[x]!=null||typeof e.direction=="object"&&e.direction[x]!=null)&&(m[x]=!0),m),{}),c=uk({values:e.direction,base:s}),d=uk({values:e.spacing,base:s});typeof c=="object"&&Object.keys(c).forEach((m,x,T)=>{if(!c[m]){const A=x>0?c[T[x-1]]:"column";c[m]=A}}),n=Tl(n,Yf({theme:t},d,(m,x)=>e.useFlexGap?{gap:O0(r,m)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Wfe(x?c[x]:e.direction)}`]:O0(r,m)}}))}return n=Xue(t.breakpoints,n),n};function Yfe(e={}){const{createStyledComponent:t=Ufe,useThemeProps:n=qfe,componentName:r="MuiStack"}=e,s=()=>dr({root:["root"]},m=>fr(r,m),{}),c=t(Gfe);return U.forwardRef(function(m,x){const T=n(m),C=yD(T),{component:A="div",direction:I="column",spacing:k=0,divider:B,children:j,className:V,useFlexGap:H=!1,...G}=C,X={direction:I,spacing:k,useFlexGap:H},Q=s();return z.jsx(c,{as:A,ownerState:X,ref:x,className:$n(Q.root,V),...G,children:B?Hfe(j,B):j})})}const yT={black:"#000",white:"#fff"},Xfe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},fb={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},pb={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},oS={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},mb={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},gb={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},yb={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function YZ(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:yT.white,default:yT.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Zfe=YZ();function XZ(){return{text:{primary:yT.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:yT.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const E6=XZ();function C6(e,t,n,r){const s=r.light||r,c=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=k0(e.main,s):t==="dark"&&(e.dark=I0(e.main,c)))}function Kfe(e="light"){return e==="dark"?{main:mb[200],light:mb[50],dark:mb[400]}:{main:mb[700],light:mb[400],dark:mb[800]}}function Qfe(e="light"){return e==="dark"?{main:fb[200],light:fb[50],dark:fb[400]}:{main:fb[500],light:fb[300],dark:fb[700]}}function Jfe(e="light"){return e==="dark"?{main:pb[500],light:pb[300],dark:pb[700]}:{main:pb[700],light:pb[400],dark:pb[800]}}function epe(e="light"){return e==="dark"?{main:gb[400],light:gb[300],dark:gb[700]}:{main:gb[700],light:gb[500],dark:gb[900]}}function tpe(e="light"){return e==="dark"?{main:yb[400],light:yb[300],dark:yb[700]}:{main:yb[800],light:yb[500],dark:yb[900]}}function npe(e="light"){return e==="dark"?{main:oS[400],light:oS[300],dark:oS[700]}:{main:"#ed6c02",light:oS[500],dark:oS[900]}}function uN(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=e,c=e.primary||Kfe(t),d=e.secondary||Qfe(t),i=e.error||Jfe(t),m=e.info||epe(t),x=e.success||tpe(t),T=e.warning||npe(t);function C(B){return Nue(B,E6.text.primary)>=n?E6.text.primary:Zfe.text.primary}const A=({color:B,name:j,mainShade:V=500,lightShade:H=300,darkShade:G=700})=>{if(B={...B},!B.main&&B[V]&&(B.main=B[V]),!B.hasOwnProperty("main"))throw new Error(Gg(11,j?` (${j})`:"",V));if(typeof B.main!="string")throw new Error(Gg(12,j?` (${j})`:"",JSON.stringify(B.main)));return C6(B,"light",H,r),C6(B,"dark",G,r),B.contrastText||(B.contrastText=C(B.main)),B};let I;return t==="light"?I=YZ():t==="dark"&&(I=XZ()),Tl({common:{...yT},mode:t,primary:A({color:c,name:"primary"}),secondary:A({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:i,name:"error"}),warning:A({color:T,name:"warning"}),info:A({color:m,name:"info"}),success:A({color:x,name:"success"}),grey:Xfe,contrastThreshold:n,getContrastText:C,augmentColor:A,tonalOffset:r,...I},s)}function rpe(e){const t={};return Object.entries(e).forEach(r=>{const[s,c]=r;typeof c=="object"&&(t[s]=`${c.fontStyle?`${c.fontStyle} `:""}${c.fontVariant?`${c.fontVariant} `:""}${c.fontWeight?`${c.fontWeight} `:""}${c.fontStretch?`${c.fontStretch} `:""}${c.fontSize||""}${c.lineHeight?`/${c.lineHeight} `:""}${c.fontFamily||""}`)}),t}function ipe(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function ope(e){return Math.round(e*1e5)/1e5}const M6={textTransform:"uppercase"},A6='"Roboto", "Helvetica", "Arial", sans-serif';function ZZ(e,t){const{fontFamily:n=A6,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:c=400,fontWeightMedium:d=500,fontWeightBold:i=700,htmlFontSize:m=16,allVariants:x,pxToRem:T,...C}=typeof t=="function"?t(e):t,A=r/14,I=T||(j=>`${j/m*A}rem`),k=(j,V,H,G,X)=>({fontFamily:n,fontWeight:j,fontSize:I(V),lineHeight:H,...n===A6?{letterSpacing:`${ope(G/V)}em`}:{},...X,...x}),B={h1:k(s,96,1.167,-1.5),h2:k(s,60,1.2,-.5),h3:k(c,48,1.167,0),h4:k(c,34,1.235,.25),h5:k(c,24,1.334,0),h6:k(d,20,1.6,.15),subtitle1:k(c,16,1.75,.15),subtitle2:k(d,14,1.57,.1),body1:k(c,16,1.5,.15),body2:k(c,14,1.43,.15),button:k(d,14,1.75,.4,M6),caption:k(c,12,1.66,.4),overline:k(c,12,2.66,1,M6),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Tl({htmlFontSize:m,pxToRem:I,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:c,fontWeightMedium:d,fontWeightBold:i,...B},C,{clone:!1})}const spe=.2,ape=.14,lpe=.12;function js(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${spe})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${ape})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${lpe})`].join(",")}const cpe=["none",js(0,2,1,-1,0,1,1,0,0,1,3,0),js(0,3,1,-2,0,2,2,0,0,1,5,0),js(0,3,3,-2,0,3,4,0,0,1,8,0),js(0,2,4,-1,0,4,5,0,0,1,10,0),js(0,3,5,-1,0,5,8,0,0,1,14,0),js(0,3,5,-1,0,6,10,0,0,1,18,0),js(0,4,5,-2,0,7,10,1,0,2,16,1),js(0,5,5,-3,0,8,10,1,0,3,14,2),js(0,5,6,-3,0,9,12,1,0,3,16,2),js(0,6,6,-3,0,10,14,1,0,4,18,3),js(0,6,7,-4,0,11,15,1,0,4,20,3),js(0,7,8,-4,0,12,17,2,0,5,22,4),js(0,7,8,-4,0,13,19,2,0,5,24,4),js(0,7,9,-4,0,14,21,2,0,5,26,4),js(0,8,9,-5,0,15,22,2,0,6,28,5),js(0,8,10,-5,0,16,24,2,0,6,30,5),js(0,8,11,-5,0,17,26,2,0,6,32,5),js(0,9,11,-5,0,18,28,2,0,7,34,6),js(0,9,12,-6,0,19,29,2,0,7,36,6),js(0,10,13,-6,0,20,31,3,0,8,38,7),js(0,10,13,-6,0,21,33,3,0,8,40,7),js(0,10,14,-6,0,22,35,3,0,8,42,7),js(0,11,14,-7,0,23,36,3,0,9,44,8),js(0,11,15,-7,0,24,38,3,0,9,46,8)],upe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},KZ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function R6(e){return`${Math.round(e)}ms`}function dpe(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function hpe(e){const t={...upe,...e.easing},n={...KZ,...e.duration};return{getAutoHeightDuration:dpe,create:(s=["all"],c={})=>{const{duration:d=n.standard,easing:i=t.easeInOut,delay:m=0,...x}=c;return(Array.isArray(s)?s:[s]).map(T=>`${T} ${typeof d=="string"?d:R6(d)} ${i} ${typeof m=="string"?m:R6(m)}`).join(",")},...e,easing:t,duration:n}}const fpe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ppe(e){return nm(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function QZ(e={}){const t={...e};function n(r){const s=Object.entries(r);for(let c=0;c<s.length;c++){const[d,i]=s[c];!ppe(i)||d.startsWith("unstable_")?delete r[d]:nm(i)&&(r[d]={...i},n(r[d]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function NF(e={},...t){const{breakpoints:n,mixins:r={},spacing:s,palette:c={},transitions:d={},typography:i={},shape:m,...x}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Gg(20));const T=uN(c),C=uE(e);let A=Tl(C,{mixins:ipe(C.breakpoints,r),palette:T,shadows:cpe.slice(),typography:ZZ(T,i),transitions:hpe(d),zIndex:{...fpe}});return A=Tl(A,x),A=t.reduce((I,k)=>Tl(I,k),A),A.unstable_sxConfig={...aE,...x==null?void 0:x.unstable_sxConfig},A.unstable_sx=function(k){return fv({sx:k,theme:this})},A.toRuntimeSource=QZ,A}function VF(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const mpe=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=VF(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function JZ(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function eK(e){return e==="dark"?mpe:[]}function gpe(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...s}=e,c=uN(t);return{palette:c,opacity:{...JZ(c.mode),...n},overlays:r||eK(c.mode),...s}}function ype(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const vpe=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],_pe=e=>(t,n)=>{const r=e.rootSelector||":root",s=e.colorSchemeSelector;let c=s;if(s==="class"&&(c=".%s"),s==="data"&&(c="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(c=`[${s}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const d={};return vpe(e.cssVarPrefix).forEach(i=>{d[i]=n[i],delete n[i]}),c==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:d}}:c?{[c.replace("%s",t)]:d,[`${r}, ${c.replace("%s",t)}`]:n}:{[r]:{...n,...d}}}if(c&&c!=="media")return`${r}, ${c.replace("%s",String(t))}`}else if(t){if(c==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(c)return c.replace("%s",String(t))}return r};function xpe(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function In(e,t,n){!e[t]&&n&&(e[t]=n)}function LS(e){return typeof e!="string"||!e.startsWith("hsl")?e:dZ(e)}function Ig(e,t){`${t}Channel`in e||(e[`${t}Channel`]=OS(LS(e[t])))}function bpe(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Gp=e=>{try{return e()}catch{}},wpe=(e="mui")=>bfe(e);function yk(e,t,n,r){if(!t)return;t=t===!0?{}:t;const s=r==="dark"?"dark":"light";if(!n){e[r]=gpe({...t,palette:{mode:s,...t==null?void 0:t.palette}});return}const{palette:c,...d}=NF({...n,palette:{mode:s,...t==null?void 0:t.palette}});return e[r]={...t,palette:c,opacity:{...JZ(s),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||eK(s)},d}function Spe(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:c="mui",shouldSkipGeneratingVar:d=ype,colorSchemeSelector:i=n.light&&n.dark?"media":void 0,rootSelector:m=":root",...x}=e,T=Object.keys(n)[0],C=r||(n.light&&T!=="light"?"light":T),A=wpe(c),{[C]:I,light:k,dark:B,...j}=n,V={...j};let H=I;if((C==="dark"&&!("dark"in n)||C==="light"&&!("light"in n))&&(H=!0),!H)throw new Error(Gg(21,C));const G=yk(V,H,x,C);k&&!V.light&&yk(V,k,void 0,"light"),B&&!V.dark&&yk(V,B,void 0,"dark");let X={defaultColorScheme:C,...G,cssVarPrefix:c,colorSchemeSelector:i,rootSelector:m,getCssVar:A,colorSchemes:V,font:{...rpe(G.typography),...G.font},spacing:bpe(x.spacing)};Object.keys(X.colorSchemes).forEach(ue=>{const ae=X.colorSchemes[ue].palette,xe=we=>{const Me=we.split("-"),Se=Me[1],Ae=Me[2];return A(we,ae[Se][Ae])};if(ae.mode==="light"&&(In(ae.common,"background","#fff"),In(ae.common,"onBackground","#000")),ae.mode==="dark"&&(In(ae.common,"background","#000"),In(ae.common,"onBackground","#fff")),xpe(ae,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ae.mode==="light"){In(ae.Alert,"errorColor",ms(ae.error.light,.6)),In(ae.Alert,"infoColor",ms(ae.info.light,.6)),In(ae.Alert,"successColor",ms(ae.success.light,.6)),In(ae.Alert,"warningColor",ms(ae.warning.light,.6)),In(ae.Alert,"errorFilledBg",xe("palette-error-main")),In(ae.Alert,"infoFilledBg",xe("palette-info-main")),In(ae.Alert,"successFilledBg",xe("palette-success-main")),In(ae.Alert,"warningFilledBg",xe("palette-warning-main")),In(ae.Alert,"errorFilledColor",Gp(()=>ae.getContrastText(ae.error.main))),In(ae.Alert,"infoFilledColor",Gp(()=>ae.getContrastText(ae.info.main))),In(ae.Alert,"successFilledColor",Gp(()=>ae.getContrastText(ae.success.main))),In(ae.Alert,"warningFilledColor",Gp(()=>ae.getContrastText(ae.warning.main))),In(ae.Alert,"errorStandardBg",gs(ae.error.light,.9)),In(ae.Alert,"infoStandardBg",gs(ae.info.light,.9)),In(ae.Alert,"successStandardBg",gs(ae.success.light,.9)),In(ae.Alert,"warningStandardBg",gs(ae.warning.light,.9)),In(ae.Alert,"errorIconColor",xe("palette-error-main")),In(ae.Alert,"infoIconColor",xe("palette-info-main")),In(ae.Alert,"successIconColor",xe("palette-success-main")),In(ae.Alert,"warningIconColor",xe("palette-warning-main")),In(ae.AppBar,"defaultBg",xe("palette-grey-100")),In(ae.Avatar,"defaultBg",xe("palette-grey-400")),In(ae.Button,"inheritContainedBg",xe("palette-grey-300")),In(ae.Button,"inheritContainedHoverBg",xe("palette-grey-A100")),In(ae.Chip,"defaultBorder",xe("palette-grey-400")),In(ae.Chip,"defaultAvatarColor",xe("palette-grey-700")),In(ae.Chip,"defaultIconColor",xe("palette-grey-700")),In(ae.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),In(ae.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),In(ae.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),In(ae.LinearProgress,"primaryBg",gs(ae.primary.main,.62)),In(ae.LinearProgress,"secondaryBg",gs(ae.secondary.main,.62)),In(ae.LinearProgress,"errorBg",gs(ae.error.main,.62)),In(ae.LinearProgress,"infoBg",gs(ae.info.main,.62)),In(ae.LinearProgress,"successBg",gs(ae.success.main,.62)),In(ae.LinearProgress,"warningBg",gs(ae.warning.main,.62)),In(ae.Skeleton,"bg",`rgba(${xe("palette-text-primaryChannel")} / 0.11)`),In(ae.Slider,"primaryTrack",gs(ae.primary.main,.62)),In(ae.Slider,"secondaryTrack",gs(ae.secondary.main,.62)),In(ae.Slider,"errorTrack",gs(ae.error.main,.62)),In(ae.Slider,"infoTrack",gs(ae.info.main,.62)),In(ae.Slider,"successTrack",gs(ae.success.main,.62)),In(ae.Slider,"warningTrack",gs(ae.warning.main,.62));const we=dM(ae.background.default,.8);In(ae.SnackbarContent,"bg",we),In(ae.SnackbarContent,"color",Gp(()=>ae.getContrastText(we))),In(ae.SpeedDialAction,"fabHoverBg",dM(ae.background.paper,.15)),In(ae.StepConnector,"border",xe("palette-grey-400")),In(ae.StepContent,"border",xe("palette-grey-400")),In(ae.Switch,"defaultColor",xe("palette-common-white")),In(ae.Switch,"defaultDisabledColor",xe("palette-grey-100")),In(ae.Switch,"primaryDisabledColor",gs(ae.primary.main,.62)),In(ae.Switch,"secondaryDisabledColor",gs(ae.secondary.main,.62)),In(ae.Switch,"errorDisabledColor",gs(ae.error.main,.62)),In(ae.Switch,"infoDisabledColor",gs(ae.info.main,.62)),In(ae.Switch,"successDisabledColor",gs(ae.success.main,.62)),In(ae.Switch,"warningDisabledColor",gs(ae.warning.main,.62)),In(ae.TableCell,"border",gs(uM(ae.divider,1),.88)),In(ae.Tooltip,"bg",uM(ae.grey[700],.92))}if(ae.mode==="dark"){In(ae.Alert,"errorColor",gs(ae.error.light,.6)),In(ae.Alert,"infoColor",gs(ae.info.light,.6)),In(ae.Alert,"successColor",gs(ae.success.light,.6)),In(ae.Alert,"warningColor",gs(ae.warning.light,.6)),In(ae.Alert,"errorFilledBg",xe("palette-error-dark")),In(ae.Alert,"infoFilledBg",xe("palette-info-dark")),In(ae.Alert,"successFilledBg",xe("palette-success-dark")),In(ae.Alert,"warningFilledBg",xe("palette-warning-dark")),In(ae.Alert,"errorFilledColor",Gp(()=>ae.getContrastText(ae.error.dark))),In(ae.Alert,"infoFilledColor",Gp(()=>ae.getContrastText(ae.info.dark))),In(ae.Alert,"successFilledColor",Gp(()=>ae.getContrastText(ae.success.dark))),In(ae.Alert,"warningFilledColor",Gp(()=>ae.getContrastText(ae.warning.dark))),In(ae.Alert,"errorStandardBg",ms(ae.error.light,.9)),In(ae.Alert,"infoStandardBg",ms(ae.info.light,.9)),In(ae.Alert,"successStandardBg",ms(ae.success.light,.9)),In(ae.Alert,"warningStandardBg",ms(ae.warning.light,.9)),In(ae.Alert,"errorIconColor",xe("palette-error-main")),In(ae.Alert,"infoIconColor",xe("palette-info-main")),In(ae.Alert,"successIconColor",xe("palette-success-main")),In(ae.Alert,"warningIconColor",xe("palette-warning-main")),In(ae.AppBar,"defaultBg",xe("palette-grey-900")),In(ae.AppBar,"darkBg",xe("palette-background-paper")),In(ae.AppBar,"darkColor",xe("palette-text-primary")),In(ae.Avatar,"defaultBg",xe("palette-grey-600")),In(ae.Button,"inheritContainedBg",xe("palette-grey-800")),In(ae.Button,"inheritContainedHoverBg",xe("palette-grey-700")),In(ae.Chip,"defaultBorder",xe("palette-grey-700")),In(ae.Chip,"defaultAvatarColor",xe("palette-grey-300")),In(ae.Chip,"defaultIconColor",xe("palette-grey-300")),In(ae.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),In(ae.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),In(ae.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),In(ae.LinearProgress,"primaryBg",ms(ae.primary.main,.5)),In(ae.LinearProgress,"secondaryBg",ms(ae.secondary.main,.5)),In(ae.LinearProgress,"errorBg",ms(ae.error.main,.5)),In(ae.LinearProgress,"infoBg",ms(ae.info.main,.5)),In(ae.LinearProgress,"successBg",ms(ae.success.main,.5)),In(ae.LinearProgress,"warningBg",ms(ae.warning.main,.5)),In(ae.Skeleton,"bg",`rgba(${xe("palette-text-primaryChannel")} / 0.13)`),In(ae.Slider,"primaryTrack",ms(ae.primary.main,.5)),In(ae.Slider,"secondaryTrack",ms(ae.secondary.main,.5)),In(ae.Slider,"errorTrack",ms(ae.error.main,.5)),In(ae.Slider,"infoTrack",ms(ae.info.main,.5)),In(ae.Slider,"successTrack",ms(ae.success.main,.5)),In(ae.Slider,"warningTrack",ms(ae.warning.main,.5));const we=dM(ae.background.default,.98);In(ae.SnackbarContent,"bg",we),In(ae.SnackbarContent,"color",Gp(()=>ae.getContrastText(we))),In(ae.SpeedDialAction,"fabHoverBg",dM(ae.background.paper,.15)),In(ae.StepConnector,"border",xe("palette-grey-600")),In(ae.StepContent,"border",xe("palette-grey-600")),In(ae.Switch,"defaultColor",xe("palette-grey-300")),In(ae.Switch,"defaultDisabledColor",xe("palette-grey-600")),In(ae.Switch,"primaryDisabledColor",ms(ae.primary.main,.55)),In(ae.Switch,"secondaryDisabledColor",ms(ae.secondary.main,.55)),In(ae.Switch,"errorDisabledColor",ms(ae.error.main,.55)),In(ae.Switch,"infoDisabledColor",ms(ae.info.main,.55)),In(ae.Switch,"successDisabledColor",ms(ae.success.main,.55)),In(ae.Switch,"warningDisabledColor",ms(ae.warning.main,.55)),In(ae.TableCell,"border",ms(uM(ae.divider,1),.68)),In(ae.Tooltip,"bg",uM(ae.grey[700],.92))}Ig(ae.background,"default"),Ig(ae.background,"paper"),Ig(ae.common,"background"),Ig(ae.common,"onBackground"),Ig(ae,"divider"),Object.keys(ae).forEach(we=>{const Me=ae[we];we!=="tonalOffset"&&Me&&typeof Me=="object"&&(Me.main&&In(ae[we],"mainChannel",OS(LS(Me.main))),Me.light&&In(ae[we],"lightChannel",OS(LS(Me.light))),Me.dark&&In(ae[we],"darkChannel",OS(LS(Me.dark))),Me.contrastText&&In(ae[we],"contrastTextChannel",OS(LS(Me.contrastText))),we==="text"&&(Ig(ae[we],"primary"),Ig(ae[we],"secondary")),we==="action"&&(Me.active&&Ig(ae[we],"active"),Me.selected&&Ig(ae[we],"selected")))})}),X=t.reduce((ue,ae)=>Tl(ue,ae),X);const Q={prefix:c,disableCssColorScheme:s,shouldSkipGeneratingVar:d,getSelector:_pe(X)},{vars:ee,generateThemeVars:ce,generateStyleSheets:fe}=Tfe(X,Q);return X.vars=ee,Object.entries(X.colorSchemes[X.defaultColorScheme]).forEach(([ue,ae])=>{X[ue]=ae}),X.generateThemeVars=ce,X.generateStyleSheets=fe,X.generateSpacing=function(){return LZ(x.spacing,dD(this))},X.getColorSchemeSelector=Efe(i),X.spacing=X.generateSpacing(),X.shouldSkipGeneratingVar=d,X.unstable_sxConfig={...aE,...x==null?void 0:x.unstable_sxConfig},X.unstable_sx=function(ae){return fv({sx:ae,theme:this})},X.toRuntimeSource=QZ,X}function D6(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:uN({...n===!0?{}:n.palette,mode:t})})}function hE(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:c=n==null?void 0:n.mode,...d}=e,i=c||"light",m=s==null?void 0:s[i],x={...s,...n?{[i]:{...typeof m!="boolean"&&m,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return NF(e,...t);let T=n;"palette"in e||x[i]&&(x[i]!==!0?T=x[i].palette:i==="dark"&&(T={mode:"dark"}));const C=NF({...e,palette:T},...t);return C.defaultColorScheme=i,C.colorSchemes=x,C.palette.mode==="light"&&(C.colorSchemes.light={...x.light!==!0&&x.light,palette:C.palette},D6(C,"dark",x.dark)),C.palette.mode==="dark"&&(C.colorSchemes.dark={...x.dark!==!0&&x.dark,palette:C.palette},D6(C,"light",x.light)),C}return!n&&!("light"in x)&&i==="light"&&(x.light=!0),Spe({...d,colorSchemes:x,defaultColorScheme:i,...typeof r!="boolean"&&r},...t)}const wD=hE(),Th="$$material";function Zo(){const e=dE(wD);return e[Th]||e}function Tpe(e){return z.jsx(Hhe,{...e,defaultTheme:wD,themeId:Th})}function tK(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Tc=e=>tK(e)&&e!=="classes",Ft=jZ({themeId:Th,defaultTheme:wD,rootShouldForwardProp:Tc});function dN(e){return function(n){return z.jsx(Tpe,{styles:typeof e=="function"?r=>e({theme:r,...n}):e})}}function Epe(){return yD}const Xr=hfe;function Cpe(e){return typeof e.main=="string"}function Mpe(e,t=[]){if(!Cpe(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function vs(e=[]){return([,t])=>t&&Mpe(t,e)}function Br(e){return dfe(e)}function Ape(e){return fr("MuiLinearProgress",e)}pr("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const $F=4,UF=wv`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Rpe=typeof UF!="string"?A1`
        animation: ${UF} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,qF=wv`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,Dpe=typeof qF!="string"?A1`
        animation: ${qF} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,HF=wv`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Ppe=typeof HF!="string"?A1`
        animation: ${HF} 3s infinite linear;
      `:null,Ipe=e=>{const{classes:t,variant:n,color:r}=e,s={root:["root",`color${Dn(r)}`,n],dashed:["dashed",`dashedColor${Dn(r)}`],bar1:["bar","bar1",`barColor${Dn(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${Dn(r)}`,n==="buffer"&&`color${Dn(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return dr(s,Ape,t)},hN=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?k0(e.palette[t].main,.62):I0(e.palette[t].main,.5),kpe=Ft("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Dn(n.color)}`],t[n.variant]]}})(Xr(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{backgroundColor:hN(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),Ope=Ft("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${Dn(n.color)}`]]}})(Xr(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(vs()).map(([t])=>{const n=hN(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),Ppe||{animation:`${HF} 3s infinite linear`}),Lpe=Ft("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t[`barColor${Dn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(Xr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${$F}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${$F}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:Rpe||{animation:`${UF} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),zpe=Ft("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t[`barColor${Dn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(Xr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:hN(e,t),transition:`transform .${$F}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:Dpe||{animation:`${qF} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),fN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiLinearProgress"}),{className:s,color:c="primary",value:d,valueBuffer:i,variant:m="indeterminate",...x}=r,T={...r,color:c,variant:m},C=Ipe(T),A=Al(),I={},k={bar1:{},bar2:{}};if((m==="determinate"||m==="buffer")&&d!==void 0){I["aria-valuenow"]=Math.round(d),I["aria-valuemin"]=0,I["aria-valuemax"]=100;let B=d-100;A&&(B=-B),k.bar1.transform=`translateX(${B}%)`}if(m==="buffer"&&i!==void 0){let B=(i||0)-100;A&&(B=-B),k.bar2.transform=`translateX(${B}%)`}return z.jsxs(kpe,{className:$n(C.root,s),ownerState:T,role:"progressbar",...I,ref:n,...x,children:[m==="buffer"?z.jsx(Ope,{className:C.dashed,ownerState:T}):null,z.jsx(Lpe,{className:C.bar1,ownerState:T,style:k.bar1}),m==="determinate"?null:z.jsx(zpe,{className:C.bar2,ownerState:T,style:k.bar2})]})});function Js({props:e,name:t}){return sN({props:e,name:t,defaultTheme:wD,themeId:Th})}function Fpe({theme:e,...t}){const n=Th in e?e[Th]:void 0;return z.jsx(WZ,{...t,themeId:n?Th:void 0,theme:n||e})}const fM={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:Bpe}=xfe({themeId:Th,theme:()=>hE({cssVariables:!0}),colorSchemeStorageKey:fM.colorSchemeStorageKey,modeStorageKey:fM.modeStorageKey,defaultColorScheme:{light:fM.defaultLightColorScheme,dark:fM.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:ZZ(e.palette,e.typography)};return t.unstable_sx=function(r){return fv({sx:r,theme:this})},t}}),jpe=Bpe;function Npe({theme:e,...t}){const n=U.useMemo(()=>{if(typeof e=="function")return e;const r=Th in e?e[Th]:e;return"colorSchemes"in r?null:"vars"in r?e:{...e,vars:null}},[e]);return n?z.jsx(Fpe,{theme:n,...t}):z.jsx(jpe,{theme:e,...t})}const Vpe=pr("MuiBox",["root"]),$pe=hE(),Pn=Ghe({themeId:Th,defaultTheme:$pe,defaultClassName:Vpe.root,generateClassName:zZ.generate});function pN(){return z.jsx(Pn,{sx:{position:"fixed",top:0,left:0,zIndex:1301,width:"100%"},children:z.jsx(fN,{color:"primary"})})}function fE(e){return n=>z.jsx(U.Suspense,{fallback:z.jsx(pN,{}),children:z.jsx(e,{...n})})}function Upe(){return z.jsx(z.Fragment,{children:z.jsx(rZ,{})})}const D1=UZ({themeId:Th});function qpe(e){return fr("MuiDivider",e)}const P6=pr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Hpe=e=>{const{absolute:t,children:n,classes:r,flexItem:s,light:c,orientation:d,textAlign:i,variant:m}=e;return dr({root:["root",t&&"absolute",m,c&&"light",d==="vertical"&&"vertical",s&&"flexItem",n&&"withChildren",n&&d==="vertical"&&"withChildrenVertical",i==="right"&&d!=="vertical"&&"textAlignRight",i==="left"&&d!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",d==="vertical"&&"wrapperVertical"]},qpe,r)},Wpe=Ft("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(Xr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:ei(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Gpe=Ft("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(Xr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),xc=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiDivider"}),{absolute:s=!1,children:c,className:d,orientation:i="horizontal",component:m=c||i==="vertical"?"div":"hr",flexItem:x=!1,light:T=!1,role:C=m!=="hr"?"separator":void 0,textAlign:A="center",variant:I="fullWidth",...k}=r,B={...r,absolute:s,component:m,flexItem:x,light:T,orientation:i,role:C,textAlign:A,variant:I},j=Hpe(B);return z.jsx(Wpe,{as:m,className:$n(j.root,d),role:C,ref:n,ownerState:B,"aria-orientation":C==="separator"&&(m!=="hr"||i==="vertical")?i:void 0,...k,children:c?z.jsx(Gpe,{className:j.wrapper,ownerState:B,children:c}):null})});xc&&(xc.muiSkipListHighlight=!0);const Ii=Vfe({createStyledComponent:Ft("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>Br({props:e,name:"MuiGrid"}),useTheme:Zo}),Ns=Yfe({createStyledComponent:Ft("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Br({props:e,name:"MuiStack"})});function Ype(e){return fr("MuiTypography",e)}const aR=pr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Xpe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Zpe=Epe(),Kpe=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:s,variant:c,classes:d}=e,i={root:["root",c,e.align!=="inherit"&&`align${Dn(t)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return dr(i,Ype,d)},Qpe=Ft("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Dn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Xr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(e.palette).filter(vs()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Dn(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),I6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},En=U.forwardRef(function(t,n){const{color:r,...s}=Br({props:t,name:"MuiTypography"}),c=!Xpe[r],d=Zpe({...s,...c&&{color:r}}),{align:i="inherit",className:m,component:x,gutterBottom:T=!1,noWrap:C=!1,paragraph:A=!1,variant:I="body1",variantMapping:k=I6,...B}=d,j={...d,align:i,color:r,className:m,component:x,gutterBottom:T,noWrap:C,paragraph:A,variant:I,variantMapping:k},V=x||(A?"p":k[I]||I6[I])||"span",H=Kpe(j);return z.jsx(Qpe,{as:V,ref:n,className:$n(H.root,m),...B,ownerState:j,style:{...i!=="inherit"&&{"--Typography-textAlign":i},...B.style}})}),sZe=Ft("div")(({theme:e})=>({backgroundColor:e.palette.grey[100],minHeight:"100vh"}));function Jpe(e){return fr("MuiPaper",e)}pr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const eme=e=>{const{square:t,elevation:n,variant:r,classes:s}=e,c={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return dr(c,Jpe,s)},tme=Ft("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(Xr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),fa=U.forwardRef(function(t,n){var I;const r=Br({props:t,name:"MuiPaper"}),s=Zo(),{className:c,component:d="div",elevation:i=1,square:m=!1,variant:x="elevation",...T}=r,C={...r,component:d,elevation:i,square:m,variant:x},A=eme(C);return z.jsx(tme,{as:d,ownerState:C,className:$n(A.root,c),ref:n,...T,style:{...x==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[i],...s.vars&&{"--Paper-overlay":(I=s.vars.overlays)==null?void 0:I[i]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ei("#fff",VF(i))}, ${ei("#fff",VF(i))})`}},...T.style}})});function nme(e){return fr("MuiCard",e)}pr("MuiCard",["root"]);const rme=e=>{const{classes:t}=e;return dr({root:["root"]},nme,t)},ime=Ft(fa,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),L0=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCard"}),{className:s,raised:c=!1,...d}=r,i={...r,raised:c},m=rme(i);return z.jsx(ime,{className:$n(m.root,s),elevation:c?8:void 0,ref:n,ownerState:i,...d})});function ome(e){return fr("MuiCardContent",e)}pr("MuiCardContent",["root"]);const sme=e=>{const{classes:t}=e;return dr({root:["root"]},ome,t)},ame=Ft("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),SD=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCardContent"}),{className:s,component:c="div",...d}=r,i={...r,component:c},m=sme(i);return z.jsx(ame,{as:c,className:$n(m.root,s),ownerState:i,ref:n,...d})});function lme(e){return fr("MuiCardHeader",e)}const lR=pr("MuiCardHeader",["root","avatar","action","content","title","subheader"]);function wo(...e){const t=U.useRef(void 0),n=U.useCallback(r=>{const s=e.map(c=>{if(c==null)return null;if(typeof c=="function"){const d=c,i=d(r);return typeof i=="function"?i:()=>{d(null)}}return c.current=r,()=>{c.current=null}});return()=>{s.forEach(c=>c==null?void 0:c())}},e);return U.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function cme(e){return typeof e=="string"}function nK(e,t,n){return e===void 0||cme(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function i1(e,t,n){return typeof e=="function"?e(t,n):e}function rK(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function k6(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function iK(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:c}=e;if(!t){const I=$n(n==null?void 0:n.className,c,s==null?void 0:s.className,r==null?void 0:r.className),k={...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},B={...n,...s,...r};return I.length>0&&(B.className=I),Object.keys(k).length>0&&(B.style=k),{props:B,internalRef:void 0}}const d=rK({...s,...r}),i=k6(r),m=k6(s),x=t(d),T=$n(x==null?void 0:x.className,n==null?void 0:n.className,c,s==null?void 0:s.className,r==null?void 0:r.className),C={...x==null?void 0:x.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},A={...x,...n,...m,...i};return T.length>0&&(A.className=T),Object.keys(C).length>0&&(A.style=C),{props:A,internalRef:x.ref}}function Ur(e,t){const{className:n,elementType:r,ownerState:s,externalForwardedProps:c,internalForwardedProps:d,shouldForwardComponentProp:i=!1,...m}=t,{component:x,slots:T={[e]:void 0},slotProps:C={[e]:void 0},...A}=c,I=T[e]||r,k=i1(C[e],s),{props:{component:B,...j},internalRef:V}=iK({className:n,...m,externalForwardedProps:e==="root"?A:void 0,externalSlotProps:k}),H=wo(V,k==null?void 0:k.ref,t.ref),G=e==="root"?B||x:B,X=nK(I,{...e==="root"&&!x&&!T[e]&&d,...e!=="root"&&!T[e]&&d,...j,...G&&!i&&{as:G},...G&&i&&{component:G},ref:H},s);return[I,X]}const ume=e=>{const{classes:t}=e;return dr({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},lme,t)},dme=Ft("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{[`& .${lR.title}`]:t.title},{[`& .${lR.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),hme=Ft("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),fme=Ft("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),pme=Ft("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${aR.root}:where(& .${lR.title})`]:{display:"block"},[`.${aR.root}:where(& .${lR.subheader})`]:{display:"block"}}),O6=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCardHeader"}),{action:s,avatar:c,component:d="div",disableTypography:i=!1,subheader:m,subheaderTypographyProps:x,title:T,titleTypographyProps:C,slots:A={},slotProps:I={},...k}=r,B={...r,component:d,disableTypography:i},j=ume(B),V={slots:A,slotProps:{title:C,subheader:x,...I}};let H=T;const[G,X]=Ur("title",{className:j.title,elementType:En,externalForwardedProps:V,ownerState:B,additionalProps:{variant:c?"body2":"h5",component:"span"}});H!=null&&H.type!==En&&!i&&(H=z.jsx(G,{...X,children:H}));let Q=m;const[ee,ce]=Ur("subheader",{className:j.subheader,elementType:En,externalForwardedProps:V,ownerState:B,additionalProps:{variant:c?"body2":"body1",color:"textSecondary",component:"span"}});Q!=null&&Q.type!==En&&!i&&(Q=z.jsx(ee,{...ce,children:Q}));const[fe,ue]=Ur("root",{ref:n,className:j.root,elementType:dme,externalForwardedProps:{...V,...k,component:d},ownerState:B}),[ae,xe]=Ur("avatar",{className:j.avatar,elementType:hme,externalForwardedProps:V,ownerState:B}),[we,Me]=Ur("content",{className:j.content,elementType:pme,externalForwardedProps:V,ownerState:B}),[Se,Ae]=Ur("action",{className:j.action,elementType:fme,externalForwardedProps:V,ownerState:B});return z.jsxs(fe,{...ue,children:[c&&z.jsx(ae,{...xe,children:c}),z.jsxs(we,{...Me,children:[H,Q]}),s&&z.jsx(Se,{...Ae,children:s})]})}),L6={"& .MuiCardHeader-action":{mr:0}},Ph=function({border:t=!1,boxShadow:n,children:r,content:s=!0,contentClass:c="",contentSX:d={},headerSX:i={},darkTitle:m,secondary:x,shadow:T,sx:C={},title:A,ref:I,...k}){return z.jsxs(L0,{ref:I,...k,sx:{border:t?"1px solid":"none",borderColor:"divider",":hover":{boxShadow:n?T||"0 2px 14px 0 rgb(32 40 45 / 8%)":"inherit"},...C},children:[!m&&A&&z.jsx(O6,{sx:{...L6,...i},title:A,action:x}),m&&A&&z.jsx(O6,{sx:{...L6,...i},title:z.jsx(En,{variant:"h3",children:A}),action:x}),A&&z.jsx(xc,{}),s&&z.jsx(SD,{sx:d,className:c,children:r}),!s&&r]})};function mme({children:e,...t}){return z.jsx(Ph,{sx:{boxShadow:6,maxWidth:{xs:400,lg:475},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...t,children:z.jsx(Pn,{sx:{p:{xs:2,sm:3,xl:5}},children:e})})}mme.propTypes={children:rt.any,other:rt.any};var gme=function(t){return yme(t)&&!vme(t)};function yme(e){return!!e&&typeof e=="object"}function vme(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||bme(e)}var _me=typeof Symbol=="function"&&Symbol.for,xme=_me?Symbol.for("react.element"):60103;function bme(e){return e.$$typeof===xme}function wme(e){return Array.isArray(e)?[]:{}}function cR(e,t){return t.clone!==!1&&t.isMergeableObject(e)?vT(wme(e),e,t):e}function Sme(e,t,n){return e.concat(t).map(function(r){return cR(r,n)})}function Tme(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(s){r[s]=cR(e[s],n)}),Object.keys(t).forEach(function(s){!n.isMergeableObject(t[s])||!e[s]?r[s]=cR(t[s],n):r[s]=vT(e[s],t[s],n)}),r}function vT(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||Sme,n.isMergeableObject=n.isMergeableObject||gme;var r=Array.isArray(t),s=Array.isArray(e),c=r===s;return c?r?n.arrayMerge(e,t,n):Tme(e,t,n):cR(t,n)}vT.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,s){return vT(r,s,n)},{})};var WF=vT,oK=typeof window=="object"&&window&&window.Object===Object&&window,Eme=typeof self=="object"&&self&&self.Object===Object&&self,bm=oK||Eme||Function("return this")(),pv=bm.Symbol,sK=Object.prototype,Cme=sK.hasOwnProperty,Mme=sK.toString,sS=pv?pv.toStringTag:void 0;function Ame(e){var t=Cme.call(e,sS),n=e[sS];try{e[sS]=void 0;var r=!0}catch{}var s=Mme.call(e);return r&&(t?e[sS]=n:delete e[sS]),s}var Rme=Object.prototype,Dme=Rme.toString;function Pme(e){return Dme.call(e)}var Ime="[object Null]",kme="[object Undefined]",z6=pv?pv.toStringTag:void 0;function tx(e){return e==null?e===void 0?kme:Ime:z6&&z6 in Object(e)?Ame(e):Pme(e)}function aK(e,t){return function(n){return e(t(n))}}var mN=aK(Object.getPrototypeOf,Object);function Sv(e){return e!=null&&typeof e=="object"}var Ome="[object Object]",Lme=Function.prototype,zme=Object.prototype,lK=Lme.toString,Fme=zme.hasOwnProperty,Bme=lK.call(Object);function GF(e){if(!Sv(e)||tx(e)!=Ome)return!1;var t=mN(e);if(t===null)return!0;var n=Fme.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&lK.call(n)==Bme}function jme(){this.__data__=[],this.size=0}function TD(e,t){return e===t||e!==e&&t!==t}function ED(e,t){for(var n=e.length;n--;)if(TD(e[n][0],t))return n;return-1}var Nme=Array.prototype,Vme=Nme.splice;function $me(e){var t=this.__data__,n=ED(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Vme.call(t,n,1),--this.size,!0}function Ume(e){var t=this.__data__,n=ED(t,e);return n<0?void 0:t[n][1]}function qme(e){return ED(this.__data__,e)>-1}function Hme(e,t){var n=this.__data__,r=ED(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ty(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ty.prototype.clear=jme;ty.prototype.delete=$me;ty.prototype.get=Ume;ty.prototype.has=qme;ty.prototype.set=Hme;function Wme(){this.__data__=new ty,this.size=0}function Gme(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Yme(e){return this.__data__.get(e)}function Xme(e){return this.__data__.has(e)}function Tv(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zme="[object AsyncFunction]",Kme="[object Function]",Qme="[object GeneratorFunction]",Jme="[object Proxy]";function gN(e){if(!Tv(e))return!1;var t=tx(e);return t==Kme||t==Qme||t==Zme||t==Jme}var vk=bm["__core-js_shared__"],F6=function(){var e=/[^.]+$/.exec(vk&&vk.keys&&vk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ege(e){return!!F6&&F6 in e}var tge=Function.prototype,nge=tge.toString;function nx(e){if(e!=null){try{return nge.call(e)}catch{}try{return e+""}catch{}}return""}var rge=/[\\^$.*+?()[\]{}|]/g,ige=/^\[object .+?Constructor\]$/,oge=Function.prototype,sge=Object.prototype,age=oge.toString,lge=sge.hasOwnProperty,cge=RegExp("^"+age.call(lge).replace(rge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uge(e){if(!Tv(e)||ege(e))return!1;var t=gN(e)?cge:ige;return t.test(nx(e))}function dge(e,t){return e==null?void 0:e[t]}function rx(e,t){var n=dge(e,t);return uge(n)?n:void 0}var _T=rx(bm,"Map"),xT=rx(Object,"create");function hge(){this.__data__=xT?xT(null):{},this.size=0}function fge(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var pge="__lodash_hash_undefined__",mge=Object.prototype,gge=mge.hasOwnProperty;function yge(e){var t=this.__data__;if(xT){var n=t[e];return n===pge?void 0:n}return gge.call(t,e)?t[e]:void 0}var vge=Object.prototype,_ge=vge.hasOwnProperty;function xge(e){var t=this.__data__;return xT?t[e]!==void 0:_ge.call(t,e)}var bge="__lodash_hash_undefined__";function wge(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xT&&t===void 0?bge:t,this}function z0(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}z0.prototype.clear=hge;z0.prototype.delete=fge;z0.prototype.get=yge;z0.prototype.has=xge;z0.prototype.set=wge;function Sge(){this.size=0,this.__data__={hash:new z0,map:new(_T||ty),string:new z0}}function Tge(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function CD(e,t){var n=e.__data__;return Tge(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Ege(e){var t=CD(this,e).delete(e);return this.size-=t?1:0,t}function Cge(e){return CD(this,e).get(e)}function Mge(e){return CD(this,e).has(e)}function Age(e,t){var n=CD(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Ev(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ev.prototype.clear=Sge;Ev.prototype.delete=Ege;Ev.prototype.get=Cge;Ev.prototype.has=Mge;Ev.prototype.set=Age;var Rge=200;function Dge(e,t){var n=this.__data__;if(n instanceof ty){var r=n.__data__;if(!_T||r.length<Rge-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ev(r)}return n.set(e,t),this.size=n.size,this}function ix(e){var t=this.__data__=new ty(e);this.size=t.size}ix.prototype.clear=Wme;ix.prototype.delete=Gme;ix.prototype.get=Yme;ix.prototype.has=Xme;ix.prototype.set=Dge;function Pge(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var uR=function(){try{var e=rx(Object,"defineProperty");return e({},"",{}),e}catch{}}();function yN(e,t,n){t=="__proto__"&&uR?uR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Ige=Object.prototype,kge=Ige.hasOwnProperty;function cK(e,t,n){var r=e[t];(!(kge.call(e,t)&&TD(r,n))||n===void 0&&!(t in e))&&yN(e,t,n)}function pE(e,t,n,r){var s=!n;n||(n={});for(var c=-1,d=t.length;++c<d;){var i=t[c],m=void 0;m===void 0&&(m=e[i]),s?yN(n,i,m):cK(n,i,m)}return n}function Oge(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Lge="[object Arguments]";function B6(e){return Sv(e)&&tx(e)==Lge}var uK=Object.prototype,zge=uK.hasOwnProperty,Fge=uK.propertyIsEnumerable,YF=B6(function(){return arguments}())?B6:function(e){return Sv(e)&&zge.call(e,"callee")&&!Fge.call(e,"callee")},F0=Array.isArray;function Bge(){return!1}var dK=typeof exports=="object"&&exports&&!exports.nodeType&&exports,j6=dK&&typeof module=="object"&&module&&!module.nodeType&&module,jge=j6&&j6.exports===dK,N6=jge?bm.Buffer:void 0,Nge=N6?N6.isBuffer:void 0,vN=Nge||Bge,Vge=9007199254740991,$ge=/^(?:0|[1-9]\d*)$/;function hK(e,t){var n=typeof e;return t=t??Vge,!!t&&(n=="number"||n!="symbol"&&$ge.test(e))&&e>-1&&e%1==0&&e<t}var Uge=9007199254740991;function fK(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Uge}var qge="[object Arguments]",Hge="[object Array]",Wge="[object Boolean]",Gge="[object Date]",Yge="[object Error]",Xge="[object Function]",Zge="[object Map]",Kge="[object Number]",Qge="[object Object]",Jge="[object RegExp]",eye="[object Set]",tye="[object String]",nye="[object WeakMap]",rye="[object ArrayBuffer]",iye="[object DataView]",oye="[object Float32Array]",sye="[object Float64Array]",aye="[object Int8Array]",lye="[object Int16Array]",cye="[object Int32Array]",uye="[object Uint8Array]",dye="[object Uint8ClampedArray]",hye="[object Uint16Array]",fye="[object Uint32Array]",Ds={};Ds[oye]=Ds[sye]=Ds[aye]=Ds[lye]=Ds[cye]=Ds[uye]=Ds[dye]=Ds[hye]=Ds[fye]=!0;Ds[qge]=Ds[Hge]=Ds[rye]=Ds[Wge]=Ds[iye]=Ds[Gge]=Ds[Yge]=Ds[Xge]=Ds[Zge]=Ds[Kge]=Ds[Qge]=Ds[Jge]=Ds[eye]=Ds[tye]=Ds[nye]=!1;function pye(e){return Sv(e)&&fK(e.length)&&!!Ds[tx(e)]}function _N(e){return function(t){return e(t)}}var pK=typeof exports=="object"&&exports&&!exports.nodeType&&exports,YS=pK&&typeof module=="object"&&module&&!module.nodeType&&module,mye=YS&&YS.exports===pK,_k=mye&&oK.process,o1=function(){try{var e=YS&&YS.require&&YS.require("util").types;return e||_k&&_k.binding&&_k.binding("util")}catch{}}(),V6=o1&&o1.isTypedArray,mK=V6?_N(V6):pye,gye=Object.prototype,yye=gye.hasOwnProperty;function gK(e,t){var n=F0(e),r=!n&&YF(e),s=!n&&!r&&vN(e),c=!n&&!r&&!s&&mK(e),d=n||r||s||c,i=d?Oge(e.length,String):[],m=i.length;for(var x in e)(t||yye.call(e,x))&&!(d&&(x=="length"||s&&(x=="offset"||x=="parent")||c&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||hK(x,m)))&&i.push(x);return i}var vye=Object.prototype;function xN(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||vye;return e===n}var _ye=aK(Object.keys,Object),xye=Object.prototype,bye=xye.hasOwnProperty;function wye(e){if(!xN(e))return _ye(e);var t=[];for(var n in Object(e))bye.call(e,n)&&n!="constructor"&&t.push(n);return t}function MD(e){return e!=null&&fK(e.length)&&!gN(e)}function bN(e){return MD(e)?gK(e):wye(e)}function Sye(e,t){return e&&pE(t,bN(t),e)}function Tye(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Eye=Object.prototype,Cye=Eye.hasOwnProperty;function Mye(e){if(!Tv(e))return Tye(e);var t=xN(e),n=[];for(var r in e)r=="constructor"&&(t||!Cye.call(e,r))||n.push(r);return n}function mE(e){return MD(e)?gK(e,!0):Mye(e)}function Aye(e,t){return e&&pE(t,mE(t),e)}var yK=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$6=yK&&typeof module=="object"&&module&&!module.nodeType&&module,Rye=$6&&$6.exports===yK,U6=Rye?bm.Buffer:void 0,q6=U6?U6.allocUnsafe:void 0;function vK(e,t){if(t)return e.slice();var n=e.length,r=q6?q6(n):new e.constructor(n);return e.copy(r),r}function wN(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Dye(e,t){for(var n=-1,r=e==null?0:e.length,s=0,c=[];++n<r;){var d=e[n];t(d,n,e)&&(c[s++]=d)}return c}function _K(){return[]}var Pye=Object.prototype,Iye=Pye.propertyIsEnumerable,H6=Object.getOwnPropertySymbols,SN=H6?function(e){return e==null?[]:(e=Object(e),Dye(H6(e),function(t){return Iye.call(e,t)}))}:_K;function kye(e,t){return pE(e,SN(e),t)}function xK(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}var Oye=Object.getOwnPropertySymbols,bK=Oye?function(e){for(var t=[];e;)xK(t,SN(e)),e=mN(e);return t}:_K;function Lye(e,t){return pE(e,bK(e),t)}function wK(e,t,n){var r=t(e);return F0(e)?r:xK(r,n(e))}function zye(e){return wK(e,bN,SN)}function Fye(e){return wK(e,mE,bK)}var XF=rx(bm,"DataView"),ZF=rx(bm,"Promise"),KF=rx(bm,"Set"),QF=rx(bm,"WeakMap"),W6="[object Map]",Bye="[object Object]",G6="[object Promise]",Y6="[object Set]",X6="[object WeakMap]",Z6="[object DataView]",jye=nx(XF),Nye=nx(_T),Vye=nx(ZF),$ye=nx(KF),Uye=nx(QF),jg=tx;(XF&&jg(new XF(new ArrayBuffer(1)))!=Z6||_T&&jg(new _T)!=W6||ZF&&jg(ZF.resolve())!=G6||KF&&jg(new KF)!=Y6||QF&&jg(new QF)!=X6)&&(jg=function(e){var t=tx(e),n=t==Bye?e.constructor:void 0,r=n?nx(n):"";if(r)switch(r){case jye:return Z6;case Nye:return W6;case Vye:return G6;case $ye:return Y6;case Uye:return X6}return t});var qye=Object.prototype,Hye=qye.hasOwnProperty;function Wye(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Hye.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var K6=bm.Uint8Array;function TN(e){var t=new e.constructor(e.byteLength);return new K6(t).set(new K6(e)),t}function Gye(e,t){var n=t?TN(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Yye=/\w*$/;function Xye(e){var t=new e.constructor(e.source,Yye.exec(e));return t.lastIndex=e.lastIndex,t}var Q6=pv?pv.prototype:void 0,J6=Q6?Q6.valueOf:void 0;function Zye(e){return J6?Object(J6.call(e)):{}}function SK(e,t){var n=t?TN(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Kye="[object Boolean]",Qye="[object Date]",Jye="[object Map]",eve="[object Number]",tve="[object RegExp]",nve="[object Set]",rve="[object String]",ive="[object Symbol]",ove="[object ArrayBuffer]",sve="[object DataView]",ave="[object Float32Array]",lve="[object Float64Array]",cve="[object Int8Array]",uve="[object Int16Array]",dve="[object Int32Array]",hve="[object Uint8Array]",fve="[object Uint8ClampedArray]",pve="[object Uint16Array]",mve="[object Uint32Array]";function gve(e,t,n){var r=e.constructor;switch(t){case ove:return TN(e);case Kye:case Qye:return new r(+e);case sve:return Gye(e,n);case ave:case lve:case cve:case uve:case dve:case hve:case fve:case pve:case mve:return SK(e,n);case Jye:return new r;case eve:case rve:return new r(e);case tve:return Xye(e);case nve:return new r;case ive:return Zye(e)}}var e2=Object.create,yve=function(){function e(){}return function(t){if(!Tv(t))return{};if(e2)return e2(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function TK(e){return typeof e.constructor=="function"&&!xN(e)?yve(mN(e)):{}}var vve="[object Map]";function _ve(e){return Sv(e)&&jg(e)==vve}var t2=o1&&o1.isMap,xve=t2?_N(t2):_ve,bve="[object Set]";function wve(e){return Sv(e)&&jg(e)==bve}var n2=o1&&o1.isSet,Sve=n2?_N(n2):wve,Tve=1,Eve=2,Cve=4,EK="[object Arguments]",Mve="[object Array]",Ave="[object Boolean]",Rve="[object Date]",Dve="[object Error]",CK="[object Function]",Pve="[object GeneratorFunction]",Ive="[object Map]",kve="[object Number]",MK="[object Object]",Ove="[object RegExp]",Lve="[object Set]",zve="[object String]",Fve="[object Symbol]",Bve="[object WeakMap]",jve="[object ArrayBuffer]",Nve="[object DataView]",Vve="[object Float32Array]",$ve="[object Float64Array]",Uve="[object Int8Array]",qve="[object Int16Array]",Hve="[object Int32Array]",Wve="[object Uint8Array]",Gve="[object Uint8ClampedArray]",Yve="[object Uint16Array]",Xve="[object Uint32Array]",Es={};Es[EK]=Es[Mve]=Es[jve]=Es[Nve]=Es[Ave]=Es[Rve]=Es[Vve]=Es[$ve]=Es[Uve]=Es[qve]=Es[Hve]=Es[Ive]=Es[kve]=Es[MK]=Es[Ove]=Es[Lve]=Es[zve]=Es[Fve]=Es[Wve]=Es[Gve]=Es[Yve]=Es[Xve]=!0;Es[Dve]=Es[CK]=Es[Bve]=!1;function XS(e,t,n,r,s,c){var d,i=t&Tve,m=t&Eve,x=t&Cve;if(d!==void 0)return d;if(!Tv(e))return e;var T=F0(e);if(T){if(d=Wye(e),!i)return wN(e,d)}else{var C=jg(e),A=C==CK||C==Pve;if(vN(e))return vK(e,i);if(C==MK||C==EK||A&&!s){if(d=m||A?{}:TK(e),!i)return m?Lye(e,Aye(d,e)):kye(e,Sye(d,e))}else{if(!Es[C])return s?e:{};d=gve(e,C,i)}}c||(c=new ix);var I=c.get(e);if(I)return I;c.set(e,d),Sve(e)?e.forEach(function(j){d.add(XS(j,t,n,j,e,c))}):xve(e)&&e.forEach(function(j,V){d.set(V,XS(j,t,n,V,e,c))});var k=x?m?Fye:zye:m?mE:bN,B=T?void 0:k(e);return Pge(B||e,function(j,V){B&&(V=j,j=e[V]),cK(d,V,XS(j,t,n,V,e,c))}),d}var Zve=1,Kve=4;function pM(e){return XS(e,Zve|Kve)}var xk,r2;function Qve(){if(r2)return xk;r2=1;var e=Array.isArray,t=Object.keys,n=Object.prototype.hasOwnProperty,r=typeof Element<"u";function s(c,d){if(c===d)return!0;if(c&&d&&typeof c=="object"&&typeof d=="object"){var i=e(c),m=e(d),x,T,C;if(i&&m){if(T=c.length,T!=d.length)return!1;for(x=T;x--!==0;)if(!s(c[x],d[x]))return!1;return!0}if(i!=m)return!1;var A=c instanceof Date,I=d instanceof Date;if(A!=I)return!1;if(A&&I)return c.getTime()==d.getTime();var k=c instanceof RegExp,B=d instanceof RegExp;if(k!=B)return!1;if(k&&B)return c.toString()==d.toString();var j=t(c);if(T=j.length,T!==t(d).length)return!1;for(x=T;x--!==0;)if(!n.call(d,j[x]))return!1;if(r&&c instanceof Element&&d instanceof Element)return c===d;for(x=T;x--!==0;)if(C=j[x],!(C==="_owner"&&c.$$typeof)&&!s(c[C],d[C]))return!1;return!0}return c!==c&&d!==d}return xk=function(d,i){try{return s(d,i)}catch(m){if(m.message&&m.message.match(/stack|recursion/i)||m.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",m.name,m.message),!1;throw m}},xk}var Jve=Qve();const a0=Ls(Jve);var e_e=4;function i2(e){return XS(e,e_e)}function AK(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var t_e="[object Symbol]";function EN(e){return typeof e=="symbol"||Sv(e)&&tx(e)==t_e}var n_e="Expected a function";function CN(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(n_e);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],c=n.cache;if(c.has(s))return c.get(s);var d=e.apply(this,r);return n.cache=c.set(s,d)||c,d};return n.cache=new(CN.Cache||Ev),n}CN.Cache=Ev;var r_e=500;function i_e(e){var t=CN(e,function(r){return n.size===r_e&&n.clear(),r}),n=t.cache;return t}var o_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s_e=/\\(\\)?/g,a_e=i_e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(o_e,function(n,r,s,c){t.push(s?c.replace(s_e,"$1"):r||n)}),t});function l_e(e){if(typeof e=="string"||EN(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var o2=pv?pv.prototype:void 0,s2=o2?o2.toString:void 0;function RK(e){if(typeof e=="string")return e;if(F0(e))return AK(e,RK)+"";if(EN(e))return s2?s2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function c_e(e){return e==null?"":RK(e)}function DK(e){return F0(e)?AK(e,l_e):EN(e)?[e]:wN(a_e(c_e(e)))}function Sl(){return Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sl.apply(this,arguments)}function PK(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var AD=U.createContext(void 0);AD.displayName="FormikContext";var u_e=AD.Provider;AD.Consumer;function d_e(){var e=U.useContext(AD);return e}var mh=function(t){return typeof t=="function"},RD=function(t){return t!==null&&typeof t=="object"},h_e=function(t){return String(Math.floor(Number(t)))===t},bk=function(t){return Object.prototype.toString.call(t)==="[object String]"},f_e=function(t){return U.Children.count(t)===0},wk=function(t){return RD(t)&&mh(t.then)};function ud(e,t,n,r){r===void 0&&(r=0);for(var s=DK(t);e&&r<s.length;)e=e[s[r++]];return r!==s.length&&!e||e===void 0?n:e}function S0(e,t,n){for(var r=i2(e),s=r,c=0,d=DK(t);c<d.length-1;c++){var i=d[c],m=ud(e,d.slice(0,c+1));if(m&&(RD(m)||Array.isArray(m)))s=s[i]=i2(m);else{var x=d[c+1];s=s[i]=h_e(x)&&Number(x)>=0?[]:{}}}return(c===0?e:s)[d[c]]===n?e:(n===void 0?delete s[d[c]]:s[d[c]]=n,c===0&&n===void 0&&delete r[d[c]],r)}function IK(e,t,n,r){n===void 0&&(n=new WeakMap),r===void 0&&(r={});for(var s=0,c=Object.keys(e);s<c.length;s++){var d=c[s],i=e[d];RD(i)?n.get(i)||(n.set(i,!0),r[d]=Array.isArray(i)?[]:{},IK(i,t,n,r[d])):r[d]=t}return r}function p_e(e,t){switch(t.type){case"SET_VALUES":return Sl({},e,{values:t.payload});case"SET_TOUCHED":return Sl({},e,{touched:t.payload});case"SET_ERRORS":return a0(e.errors,t.payload)?e:Sl({},e,{errors:t.payload});case"SET_STATUS":return Sl({},e,{status:t.payload});case"SET_ISSUBMITTING":return Sl({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Sl({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Sl({},e,{values:S0(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Sl({},e,{touched:S0(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Sl({},e,{errors:S0(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Sl({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Sl({},e,{touched:IK(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return Sl({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return Sl({},e,{isSubmitting:!1});default:return e}}var J_={},mM={};function kK(e){var t=e.validateOnChange,n=t===void 0?!0:t,r=e.validateOnBlur,s=r===void 0?!0:r,c=e.validateOnMount,d=c===void 0?!1:c,i=e.isInitialValid,m=e.enableReinitialize,x=m===void 0?!1:m,T=e.onSubmit,C=PK(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),A=Sl({validateOnChange:n,validateOnBlur:s,validateOnMount:d,onSubmit:T},C),I=U.useRef(A.initialValues),k=U.useRef(A.initialErrors||J_),B=U.useRef(A.initialTouched||mM),j=U.useRef(A.initialStatus),V=U.useRef(!1),H=U.useRef({});U.useEffect(function(){return V.current=!0,function(){V.current=!1}},[]);var G=U.useState(0),X=G[1],Q=U.useRef({values:pM(A.initialValues),errors:pM(A.initialErrors)||J_,touched:pM(A.initialTouched)||mM,status:pM(A.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),ee=Q.current,ce=U.useCallback(function(ft){var vn=Q.current;Q.current=p_e(vn,ft),vn!==Q.current&&X(function(Ot){return Ot+1})},[]),fe=U.useCallback(function(ft,vn){return new Promise(function(Ot,tn){var Rn=A.validate(ft,vn);Rn==null?Ot(J_):wk(Rn)?Rn.then(function(Hn){Ot(Hn||J_)},function(Hn){tn(Hn)}):Ot(Rn)})},[A.validate]),ue=U.useCallback(function(ft,vn){var Ot=A.validationSchema,tn=mh(Ot)?Ot(vn):Ot,Rn=vn&&tn.validateAt?tn.validateAt(vn,ft):y_e(ft,tn);return new Promise(function(Hn,mr){Rn.then(function(){Hn(J_)},function(Xn){Xn.name==="ValidationError"?Hn(g_e(Xn)):mr(Xn)})})},[A.validationSchema]),ae=U.useCallback(function(ft,vn){return new Promise(function(Ot){return Ot(H.current[ft].validate(vn))})},[]),xe=U.useCallback(function(ft){var vn=Object.keys(H.current).filter(function(tn){return mh(H.current[tn].validate)}),Ot=vn.length>0?vn.map(function(tn){return ae(tn,ud(ft,tn))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Ot).then(function(tn){return tn.reduce(function(Rn,Hn,mr){return Hn==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||Hn&&(Rn=S0(Rn,vn[mr],Hn)),Rn},{})})},[ae]),we=U.useCallback(function(ft){return Promise.all([xe(ft),A.validationSchema?ue(ft):{},A.validate?fe(ft):{}]).then(function(vn){var Ot=vn[0],tn=vn[1],Rn=vn[2],Hn=WF.all([Ot,tn,Rn],{arrayMerge:v_e});return Hn})},[A.validate,A.validationSchema,xe,fe,ue]),Me=uh(function(ft){return ft===void 0&&(ft=ee.values),ce({type:"SET_ISVALIDATING",payload:!0}),we(ft).then(function(vn){return V.current&&(ce({type:"SET_ISVALIDATING",payload:!1}),ce({type:"SET_ERRORS",payload:vn})),vn})});U.useEffect(function(){d&&V.current===!0&&a0(I.current,A.initialValues)&&Me(I.current)},[d,Me]);var Se=U.useCallback(function(ft){var vn=ft&&ft.values?ft.values:I.current,Ot=ft&&ft.errors?ft.errors:k.current?k.current:A.initialErrors||{},tn=ft&&ft.touched?ft.touched:B.current?B.current:A.initialTouched||{},Rn=ft&&ft.status?ft.status:j.current?j.current:A.initialStatus;I.current=vn,k.current=Ot,B.current=tn,j.current=Rn;var Hn=function(){ce({type:"RESET_FORM",payload:{isSubmitting:!!ft&&!!ft.isSubmitting,errors:Ot,touched:tn,status:Rn,values:vn,isValidating:!!ft&&!!ft.isValidating,submitCount:ft&&ft.submitCount&&typeof ft.submitCount=="number"?ft.submitCount:0}})};if(A.onReset){var mr=A.onReset(ee.values,Ct);wk(mr)?mr.then(Hn):Hn()}else Hn()},[A.initialErrors,A.initialStatus,A.initialTouched,A.onReset]);U.useEffect(function(){V.current===!0&&!a0(I.current,A.initialValues)&&x&&(I.current=A.initialValues,Se(),d&&Me(I.current))},[x,A.initialValues,Se,d,Me]),U.useEffect(function(){x&&V.current===!0&&!a0(k.current,A.initialErrors)&&(k.current=A.initialErrors||J_,ce({type:"SET_ERRORS",payload:A.initialErrors||J_}))},[x,A.initialErrors]),U.useEffect(function(){x&&V.current===!0&&!a0(B.current,A.initialTouched)&&(B.current=A.initialTouched||mM,ce({type:"SET_TOUCHED",payload:A.initialTouched||mM}))},[x,A.initialTouched]),U.useEffect(function(){x&&V.current===!0&&!a0(j.current,A.initialStatus)&&(j.current=A.initialStatus,ce({type:"SET_STATUS",payload:A.initialStatus}))},[x,A.initialStatus,A.initialTouched]);var Ae=uh(function(ft){if(H.current[ft]&&mh(H.current[ft].validate)){var vn=ud(ee.values,ft),Ot=H.current[ft].validate(vn);return wk(Ot)?(ce({type:"SET_ISVALIDATING",payload:!0}),Ot.then(function(tn){return tn}).then(function(tn){ce({type:"SET_FIELD_ERROR",payload:{field:ft,value:tn}}),ce({type:"SET_ISVALIDATING",payload:!1})})):(ce({type:"SET_FIELD_ERROR",payload:{field:ft,value:Ot}}),Promise.resolve(Ot))}else if(A.validationSchema)return ce({type:"SET_ISVALIDATING",payload:!0}),ue(ee.values,ft).then(function(tn){return tn}).then(function(tn){ce({type:"SET_FIELD_ERROR",payload:{field:ft,value:ud(tn,ft)}}),ce({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),_e=U.useCallback(function(ft,vn){var Ot=vn.validate;H.current[ft]={validate:Ot}},[]),Pe=U.useCallback(function(ft){delete H.current[ft]},[]),We=uh(function(ft,vn){ce({type:"SET_TOUCHED",payload:ft});var Ot=vn===void 0?s:vn;return Ot?Me(ee.values):Promise.resolve()}),Fe=U.useCallback(function(ft){ce({type:"SET_ERRORS",payload:ft})},[]),Ce=uh(function(ft,vn){var Ot=mh(ft)?ft(ee.values):ft;ce({type:"SET_VALUES",payload:Ot});var tn=vn===void 0?n:vn;return tn?Me(Ot):Promise.resolve()}),He=U.useCallback(function(ft,vn){ce({type:"SET_FIELD_ERROR",payload:{field:ft,value:vn}})},[]),dt=uh(function(ft,vn,Ot){ce({type:"SET_FIELD_VALUE",payload:{field:ft,value:vn}});var tn=Ot===void 0?n:Ot;return tn?Me(S0(ee.values,ft,vn)):Promise.resolve()}),gt=U.useCallback(function(ft,vn){var Ot=vn,tn=ft,Rn;if(!bk(ft)){ft.persist&&ft.persist();var Hn=ft.target?ft.target:ft.currentTarget,mr=Hn.type,Xn=Hn.name,or=Hn.id,Mn=Hn.value,Fr=Hn.checked;Hn.outerHTML;var Cr=Hn.options,xr=Hn.multiple;Ot=vn||Xn||or,tn=/number|range/.test(mr)?(Rn=parseFloat(Mn),isNaN(Rn)?"":Rn):/checkbox/.test(mr)?x_e(ud(ee.values,Ot),Fr,Mn):Cr&&xr?__e(Cr):Mn}Ot&&dt(Ot,tn)},[dt,ee.values]),Nt=uh(function(ft){if(bk(ft))return function(vn){return gt(vn,ft)};gt(ft)}),wt=uh(function(ft,vn,Ot){vn===void 0&&(vn=!0),ce({type:"SET_FIELD_TOUCHED",payload:{field:ft,value:vn}});var tn=Ot===void 0?s:Ot;return tn?Me(ee.values):Promise.resolve()}),ot=U.useCallback(function(ft,vn){ft.persist&&ft.persist();var Ot=ft.target,tn=Ot.name,Rn=Ot.id;Ot.outerHTML;var Hn=vn||tn||Rn;wt(Hn,!0)},[wt]),st=uh(function(ft){if(bk(ft))return function(vn){return ot(vn,ft)};ot(ft)}),St=U.useCallback(function(ft){mh(ft)?ce({type:"SET_FORMIK_STATE",payload:ft}):ce({type:"SET_FORMIK_STATE",payload:function(){return ft}})},[]),Dt=U.useCallback(function(ft){ce({type:"SET_STATUS",payload:ft})},[]),Et=U.useCallback(function(ft){ce({type:"SET_ISSUBMITTING",payload:ft})},[]),yt=uh(function(){return ce({type:"SUBMIT_ATTEMPT"}),Me().then(function(ft){var vn=ft instanceof Error,Ot=!vn&&Object.keys(ft).length===0;if(Ot){var tn;try{if(tn=Wt(),tn===void 0)return}catch(Rn){throw Rn}return Promise.resolve(tn).then(function(Rn){return V.current&&ce({type:"SUBMIT_SUCCESS"}),Rn}).catch(function(Rn){if(V.current)throw ce({type:"SUBMIT_FAILURE"}),Rn})}else if(V.current&&(ce({type:"SUBMIT_FAILURE"}),vn))throw ft})}),Lt=uh(function(ft){ft&&ft.preventDefault&&mh(ft.preventDefault)&&ft.preventDefault(),ft&&ft.stopPropagation&&mh(ft.stopPropagation)&&ft.stopPropagation(),yt().catch(function(vn){console.warn("Warning: An unhandled error was caught from submitForm()",vn)})}),Ct={resetForm:Se,validateForm:Me,validateField:Ae,setErrors:Fe,setFieldError:He,setFieldTouched:wt,setFieldValue:dt,setStatus:Dt,setSubmitting:Et,setTouched:We,setValues:Ce,setFormikState:St,submitForm:yt},Wt=uh(function(){return T(ee.values,Ct)}),fn=uh(function(ft){ft&&ft.preventDefault&&mh(ft.preventDefault)&&ft.preventDefault(),ft&&ft.stopPropagation&&mh(ft.stopPropagation)&&ft.stopPropagation(),Se()}),Zt=U.useCallback(function(ft){return{value:ud(ee.values,ft),error:ud(ee.errors,ft),touched:!!ud(ee.touched,ft),initialValue:ud(I.current,ft),initialTouched:!!ud(B.current,ft),initialError:ud(k.current,ft)}},[ee.errors,ee.touched,ee.values]),Ut=U.useCallback(function(ft){return{setValue:function(Ot,tn){return dt(ft,Ot,tn)},setTouched:function(Ot,tn){return wt(ft,Ot,tn)},setError:function(Ot){return He(ft,Ot)}}},[dt,wt,He]),kn=U.useCallback(function(ft){var vn=RD(ft),Ot=vn?ft.name:ft,tn=ud(ee.values,Ot),Rn={name:Ot,value:tn,onChange:Nt,onBlur:st};if(vn){var Hn=ft.type,mr=ft.value,Xn=ft.as,or=ft.multiple;Hn==="checkbox"?mr===void 0?Rn.checked=!!tn:(Rn.checked=!!(Array.isArray(tn)&&~tn.indexOf(mr)),Rn.value=mr):Hn==="radio"?(Rn.checked=tn===mr,Rn.value=mr):Xn==="select"&&or&&(Rn.value=Rn.value||[],Rn.multiple=!0)}return Rn},[st,Nt,ee.values]),Bn=U.useMemo(function(){return!a0(I.current,ee.values)},[I.current,ee.values]),bn=U.useMemo(function(){return typeof i<"u"?Bn?ee.errors&&Object.keys(ee.errors).length===0:i!==!1&&mh(i)?i(A):i:ee.errors&&Object.keys(ee.errors).length===0},[i,Bn,ee.errors,A]),Nn=Sl({},ee,{initialValues:I.current,initialErrors:k.current,initialTouched:B.current,initialStatus:j.current,handleBlur:st,handleChange:Nt,handleReset:fn,handleSubmit:Lt,resetForm:Se,setErrors:Fe,setFormikState:St,setFieldTouched:wt,setFieldValue:dt,setFieldError:He,setStatus:Dt,setSubmitting:Et,setTouched:We,setValues:Ce,submitForm:yt,validateForm:Me,validateField:Ae,isValid:bn,dirty:Bn,unregisterField:Pe,registerField:_e,getFieldProps:kn,getFieldMeta:Zt,getFieldHelpers:Ut,validateOnBlur:s,validateOnChange:n,validateOnMount:d});return Nn}function m_e(e){var t=kK(e),n=e.component,r=e.children,s=e.render,c=e.innerRef;return U.useImperativeHandle(c,function(){return t}),U.createElement(u_e,{value:t},n?U.createElement(n,t):s?s(t):r?mh(r)?r(t):f_e(r)?null:U.Children.only(r):null)}function g_e(e){var t={};if(e.inner){if(e.inner.length===0)return S0(t,e.path,e.message);for(var s=e.inner,n=Array.isArray(s),r=0,s=n?s:s[Symbol.iterator]();;){var c;if(n){if(r>=s.length)break;c=s[r++]}else{if(r=s.next(),r.done)break;c=r.value}var d=c;ud(t,d.path)||(t=S0(t,d.path,d.message))}}return t}function y_e(e,t,n,r){n===void 0&&(n=!1);var s=JF(e);return t[n?"validateSync":"validate"](s,{abortEarly:!1,context:s})}function JF(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);Array.isArray(e[r])===!0?t[r]=e[r].map(function(s){return Array.isArray(s)===!0||GF(s)?JF(s):s!==""?s:void 0}):GF(e[r])?t[r]=JF(e[r]):t[r]=e[r]!==""?e[r]:void 0}return t}function v_e(e,t,n){var r=e.slice();return t.forEach(function(c,d){if(typeof r[d]>"u"){var i=n.clone!==!1,m=i&&n.isMergeableObject(c);r[d]=m?WF(Array.isArray(c)?[]:{},c,n):c}else n.isMergeableObject(c)?r[d]=WF(e[d],c,n):e.indexOf(c)===-1&&r.push(c)}),r}function __e(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function x_e(e,t,n){if(typeof e=="boolean")return!!t;var r=[],s=!1,c=-1;if(Array.isArray(e))r=e,c=e.indexOf(n),s=c>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!s?r.concat(n):s?r.slice(0,c).concat(r.slice(c+1)):r}var b_e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?U.useLayoutEffect:U.useEffect;function uh(e){var t=U.useRef(e);return b_e(function(){t.current=e}),U.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current.apply(void 0,r)},[])}var OK=U.forwardRef(function(e,t){var n=e.action,r=PK(e,["action"]),s=n??"#",c=d_e(),d=c.handleReset,i=c.handleSubmit;return U.createElement("form",Sl({onSubmit:i,ref:t,onReset:d,action:s},r))});OK.displayName="Form";var Sk,a2;function w_e(){if(a2)return Sk;a2=1;function e(V){this._maxSize=V,this.clear()}e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(V){return this._values[V]},e.prototype.set=function(V,H){return this._size>=this._maxSize&&this.clear(),V in this._values||this._size++,this._values[V]=H};var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,c=/^\s*(['"]?)(.*?)(\1)\s*$/,d=512,i=new e(d),m=new e(d),x=new e(d);Sk={Cache:e,split:C,normalizePath:T,setter:function(V){var H=T(V);return m.get(V)||m.set(V,function(X,Q){for(var ee=0,ce=H.length,fe=X;ee<ce-1;){var ue=H[ee];if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return X;fe=fe[H[ee++]]}fe[H[ee]]=Q})},getter:function(V,H){var G=T(V);return x.get(V)||x.set(V,function(Q){for(var ee=0,ce=G.length;ee<ce;)if(Q!=null||!H)Q=Q[G[ee++]];else return;return Q})},join:function(V){return V.reduce(function(H,G){return H+(I(G)||n.test(G)?"["+G+"]":(H?".":"")+G)},"")},forEach:function(V,H,G){A(Array.isArray(V)?V:C(V),H,G)}};function T(V){return i.get(V)||i.set(V,C(V).map(function(H){return H.replace(c,"$2")}))}function C(V){return V.match(t)||[""]}function A(V,H,G){var X=V.length,Q,ee,ce,fe;for(ee=0;ee<X;ee++)Q=V[ee],Q&&(j(Q)&&(Q='"'+Q+'"'),fe=I(Q),ce=!fe&&/^\d+$/.test(Q),H.call(G,Q,fe,ce,ee,V))}function I(V){return typeof V=="string"&&V&&["'",'"'].indexOf(V.charAt(0))!==-1}function k(V){return V.match(r)&&!V.match(n)}function B(V){return s.test(V)}function j(V){return!I(V)&&(k(V)||B(V))}return Sk}var T0=w_e(),Tk,l2;function S_e(){if(l2)return Tk;l2=1;const e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,t=T=>T.match(e)||[],n=T=>T[0].toUpperCase()+T.slice(1),r=(T,C)=>t(T).join(C).toLowerCase(),s=T=>t(T).reduce((C,A)=>`${C}${C?A[0].toUpperCase()+A.slice(1).toLowerCase():A.toLowerCase()}`,"");return Tk={words:t,upperFirst:n,camelCase:s,pascalCase:T=>n(s(T)),snakeCase:T=>r(T,"_"),kebabCase:T=>r(T,"-"),sentenceCase:T=>n(r(T," ")),titleCase:T=>t(T).map(n).join(" ")},Tk}var Ek=S_e(),gM={exports:{}},c2;function T_e(){if(c2)return gM.exports;c2=1,gM.exports=function(s){return e(t(s),s)},gM.exports.array=e;function e(s,c){var d=s.length,i=new Array(d),m={},x=d,T=n(c),C=r(s);for(c.forEach(function(I){if(!C.has(I[0])||!C.has(I[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});x--;)m[x]||A(s[x],x,new Set);return i;function A(I,k,B){if(B.has(I)){var j;try{j=", node was:"+JSON.stringify(I)}catch{j=""}throw new Error("Cyclic dependency"+j)}if(!C.has(I))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(I));if(!m[k]){m[k]=!0;var V=T.get(I)||new Set;if(V=Array.from(V),k=V.length){B.add(I);do{var H=V[--k];A(H,C.get(H),B)}while(k);B.delete(I)}i[--d]=I}}}function t(s){for(var c=new Set,d=0,i=s.length;d<i;d++){var m=s[d];c.add(m[0]),c.add(m[1])}return Array.from(c)}function n(s){for(var c=new Map,d=0,i=s.length;d<i;d++){var m=s[d];c.has(m[0])||c.set(m[0],new Set),c.has(m[1])||c.set(m[1],new Set),c.get(m[0]).add(m[1])}return c}function r(s){for(var c=new Map,d=0,i=s.length;d<i;d++)c.set(s[d],d);return c}return gM.exports}var E_e=T_e();const C_e=Ls(E_e),M_e=Object.prototype.toString,A_e=Error.prototype.toString,R_e=RegExp.prototype.toString,D_e=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",P_e=/^Symbol\((.*)\)(.*)$/;function I_e(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function u2(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return I_e(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return D_e.call(e).replace(P_e,"Symbol($1)");const r=M_e.call(e).slice(8,-1);return r==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):r==="Error"||e instanceof Error?"["+A_e.call(e)+"]":r==="RegExp"?R_e.call(e):null}function Ug(e,t){let n=u2(e,t);return n!==null?n:JSON.stringify(e,function(r,s){let c=u2(this[r],t);return c!==null?c:s},2)}function LK(e){return e==null?[]:[].concat(e)}let zK,FK,BK,k_e=/\$\{\s*(\w+)\s*\}/g;zK=Symbol.toStringTag;class d2{constructor(t,n,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[zK]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],LK(t).forEach(c=>{if(bu.isError(c)){this.errors.push(...c.errors);const d=c.inner.length?c.inner:[c];this.inner.push(...d)}else this.errors.push(c)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}FK=Symbol.hasInstance;BK=Symbol.toStringTag;class bu extends Error{static formatError(t,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof t=="string"?t.replace(k_e,(s,c)=>Ug(n[c])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,r,s,c){const d=new d2(t,n,r,s);if(c)return d;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[BK]="Error",this.name=d.name,this.message=d.message,this.type=d.type,this.value=d.value,this.path=d.path,this.errors=d.errors,this.inner=d.inner,Error.captureStackTrace&&Error.captureStackTrace(this,bu)}static[FK](t){return d2[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Qp={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Ug(r,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${Ug(n,!0)}\``+s:`${e} must match the configured type. The validated value was: \`${Ug(n,!0)}\``+s}},vu={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},O_e={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},eB={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},tB={isValue:"${path} field must be ${value}"},_A={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},xA={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},L_e={notType:e=>{const{path:t,value:n,spec:r}=e,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${t} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Ug(n,!0)}\``;if(n.length>s)return`${t} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Ug(n,!0)}\``}return bu.formatError(Qp.notType,e)}};Object.assign(Object.create(null),{mixed:Qp,string:vu,number:O_e,date:eB,object:_A,array:xA,boolean:tB,tuple:L_e});const DD=e=>e&&e.__isYupSchema__;class dR{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:c}=n,d=typeof r=="function"?r:(...i)=>i.every(m=>m===r);return new dR(t,(i,m)=>{var x;let T=d(...i)?s:c;return(x=T==null?void 0:T(m))!=null?x:m})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let r=this.refs.map(c=>c.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,t,n);if(s===void 0||s===t)return t;if(!DD(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const yM={context:"$",value:"."};function aZe(e,t){return new Cv(e,t)}class Cv{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===yM.context,this.isValue=this.key[0]===yM.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?yM.context:this.isValue?yM.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&T0.getter(this.path,!0),this.map=n.map}getValue(t,n,r){let s=this.isContext?r:this.isValue?t:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Cv.prototype.__isYupRef=!0;const Vg=e=>e==null;function vb(e){function t({value:n,path:r="",options:s,originalValue:c,schema:d},i,m){const{name:x,test:T,params:C,message:A,skipAbsent:I}=e;let{parent:k,context:B,abortEarly:j=d.spec.abortEarly,disableStackTrace:V=d.spec.disableStackTrace}=s;function H(xe){return Cv.isRef(xe)?xe.getValue(n,k,B):xe}function G(xe={}){const we=Object.assign({value:n,originalValue:c,label:d.spec.label,path:xe.path||r,spec:d.spec,disableStackTrace:xe.disableStackTrace||V},C,xe.params);for(const Se of Object.keys(we))we[Se]=H(we[Se]);const Me=new bu(bu.formatError(xe.message||A,we),n,we.path,xe.type||x,we.disableStackTrace);return Me.params=we,Me}const X=j?i:m;let Q={path:r,parent:k,type:x,from:s.from,createError:G,resolve:H,options:s,originalValue:c,schema:d};const ee=xe=>{bu.isError(xe)?X(xe):xe?m(null):X(G())},ce=xe=>{bu.isError(xe)?X(xe):i(xe)};if(I&&Vg(n))return ee(!0);let ue;try{var ae;if(ue=T.call(Q,n,Q),typeof((ae=ue)==null?void 0:ae.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${Q.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(ue).then(ee,ce)}}catch(xe){ce(xe);return}ee(ue)}return t.OPTIONS=e,t}function z_e(e,t,n,r=n){let s,c,d;return t?(T0.forEach(t,(i,m,x)=>{let T=m?i.slice(1,i.length-1):i;e=e.resolve({context:r,parent:s,value:n});let C=e.type==="tuple",A=x?parseInt(T,10):0;if(e.innerType||C){if(C&&!x)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${d}" must contain an index to the tuple element, e.g. "${d}[0]"`);if(n&&A>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${i}, in the path: ${t}. because there is no value at that index. `);s=n,n=n&&n[A],e=C?e.spec.types[A]:e.innerType}if(!x){if(!e.fields||!e.fields[T])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${d} which is a type: "${e.type}")`);s=n,n=n&&n[T],e=e.fields[T]}c=T,d=m?"["+i+"]":"."+i}),{schema:e,parent:s,parentPath:c}):{parent:s,parentPath:t,schema:e}}class hR extends Set{describe(){const t=[];for(const n of this.values())t.push(Cv.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const r of this.values())n.push(t(r));return n}clone(){return new hR(this.values())}merge(t,n){const r=this.clone();return t.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function Fb(e,t=new Map){if(DD(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=Fb(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,s]of e.entries())n.set(r,Fb(s,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(Fb(r,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[r,s]of Object.entries(e))n[r]=Fb(s,t)}else throw Error(`Unable to clone ${e}`);return n}class Ih{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new hR,this._blacklist=new hR,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Qp.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Fb(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let r=t(this);return this._mutate=n,r}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,r=t.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),r._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(c=>{t.tests.forEach(d=>{c.test(d.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,c)=>c.resolve(s,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,r,s,c;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(r=t.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=t.recursive)!=null?s:this.spec.recursive,disableStackTrace:(c=t.disableStackTrace)!=null?c:this.spec.disableStackTrace})}cast(t,n={}){let r=this.resolve(Object.assign({value:t},n)),s=n.assert==="ignore-optionality",c=r._cast(t,n);if(n.assert!==!1&&!r.isType(c)){if(s&&Vg(c))return c;let d=Ug(t),i=Ug(c);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${d} 
`+(i!==d?`result of cast: ${i}`:""))}return c}_cast(t,n){let r=t===void 0?t:this.transforms.reduce((s,c)=>c.call(this,s,t,this),t);return r===void 0&&(r=this.getDefault(n)),r}_validate(t,n={},r,s){let{path:c,originalValue:d=t,strict:i=this.spec.strict}=n,m=t;i||(m=this._cast(m,Object.assign({assert:!1},n)));let x=[];for(let T of Object.values(this.internalTests))T&&x.push(T);this.runTests({path:c,value:m,originalValue:d,options:n,tests:x},r,T=>{if(T.length)return s(T,m);this.runTests({path:c,value:m,originalValue:d,options:n,tests:this.tests},r,s)})}runTests(t,n,r){let s=!1,{tests:c,value:d,originalValue:i,path:m,options:x}=t,T=B=>{s||(s=!0,n(B,d))},C=B=>{s||(s=!0,r(B,d))},A=c.length,I=[];if(!A)return C([]);let k={value:d,originalValue:i,path:m,options:x,schema:this};for(let B=0;B<c.length;B++){const j=c[B];j(k,T,function(H){H&&(Array.isArray(H)?I.push(...H):I.push(H)),--A<=0&&C(I)})}}asNestedTest({key:t,index:n,parent:r,parentPath:s,originalParent:c,options:d}){const i=t??n;if(i==null)throw TypeError("Must include `key` or `index` for nested validations");const m=typeof i=="number";let x=r[i];const T=Object.assign({},d,{strict:!0,parent:r,value:x,originalValue:c[i],key:void 0,[m?"index":"key"]:i,path:m||i.includes(".")?`${s||""}[${m?i:`"${i}"`}]`:(s?`${s}.`:"")+t});return(C,A,I)=>this.resolve(T)._validate(x,T,A,I)}validate(t,n){var r;let s=this.resolve(Object.assign({},n,{value:t})),c=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((d,i)=>s._validate(t,n,(m,x)=>{bu.isError(m)&&(m.value=x),i(m)},(m,x)=>{m.length?i(new bu(m,x,void 0,void 0,c)):d(x)}))}validateSync(t,n){var r;let s=this.resolve(Object.assign({},n,{value:t})),c,d=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(t,Object.assign({},n,{sync:!0}),(i,m)=>{throw bu.isError(i)&&(i.value=m),i},(i,m)=>{if(i.length)throw new bu(i,t,void 0,void 0,d);c=m}),c}isValid(t,n){return this.validate(t,n).then(()=>!0,r=>{if(bu.isError(r))return!1;throw r})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(r){if(bu.isError(r))return!1;throw r}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):Fb(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const r=this.clone({nullable:t});return r.internalTests.nullable=vb({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(t,n){const r=this.clone({optional:t});return r.internalTests.optionality=vb({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(t=Qp.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Qp.notNull){return this.nullability(!1,t)}required(t=Qp.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=Qp.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=vb(n),c=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(d=>!(d.OPTIONS.name===n.name&&(c||d.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let r=this.clone(),s=LK(t).map(c=>new Cv(c));return s.forEach(c=>{c.isSibling&&r.deps.push(c.key)}),r.conditions.push(typeof n=="function"?new dR(s,n):dR.fromOptions(s,n)),r}typeError(t){let n=this.clone();return n.internalTests.typeError=vb({message:t,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=Qp.oneOf){let r=this.clone();return t.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=vb({message:n,name:"oneOf",skipAbsent:!0,test(s){let c=this.schema._whitelist,d=c.resolveAll(this.resolve);return d.includes(s)?!0:this.createError({params:{values:Array.from(c).join(", "),resolved:d}})}}),r}notOneOf(t,n=Qp.notOneOf){let r=this.clone();return t.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=vb({message:n,name:"notOneOf",test(s){let c=this.schema._blacklist,d=c.resolveAll(this.resolve);return d.includes(s)?this.createError({params:{values:Array.from(c).join(", "),resolved:d}}):!0}}),r}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:r,meta:s,optional:c,nullable:d}=n.spec;return{meta:s,label:r,optional:c,nullable:d,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(m=>({name:m.OPTIONS.name,params:m.OPTIONS.params})).filter((m,x,T)=>T.findIndex(C=>C.name===m.name)===x)}}}Ih.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Ih.prototype[`${e}At`]=function(t,n,r={}){const{parent:s,parentPath:c,schema:d}=z_e(this,t,n,r.context);return d[e](s&&s[c],Object.assign({},r,{parent:s,path:t}))};for(const e of["equals","is"])Ih.prototype[e]=Ih.prototype.oneOf;for(const e of["not","nope"])Ih.prototype[e]=Ih.prototype.notOneOf;function F_e(){return new jK}class jK extends Ih{constructor(){super({type:"boolean",check(t){return t instanceof Boolean&&(t=t.valueOf()),typeof t=="boolean"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(r.spec.coerce&&!r.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t})})}isTrue(t=tB.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test(n){return Vg(n)||n===!0}})}isFalse(t=tB.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test(n){return Vg(n)||n===!1}})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}F_e.prototype=jK.prototype;const B_e=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function j_e(e){const t=nB(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function nB(e){var t,n;const r=B_e.exec(e);return r?{year:kg(r[1]),month:kg(r[2],1)-1,day:kg(r[3],1),hour:kg(r[4]),minute:kg(r[5]),second:kg(r[6]),millisecond:r[7]?kg(r[7].substring(0,3)):0,precision:(t=(n=r[7])==null?void 0:n.length)!=null?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:kg(r[10]),minuteOffset:kg(r[11])}:null}function kg(e,t=0){return Number(e)||t}let N_e=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,V_e=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,$_e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,U_e="^\\d{4}-\\d{2}-\\d{2}",q_e="\\d{2}:\\d{2}:\\d{2}",H_e="(([+-]\\d{2}(:?\\d{2})?)|Z)",W_e=new RegExp(`${U_e}T${q_e}(\\.\\d+)?${H_e}$`),G_e=e=>Vg(e)||e===e.trim(),Y_e={}.toString();function vh(){return new NK}class NK extends Ih{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce||r.isType(t)||Array.isArray(t))return t;const s=t!=null&&t.toString?t.toString():t;return s===Y_e?t:s})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||Qp.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=vu.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n=vu.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n=vu.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}matches(t,n){let r=!1,s,c;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:c}=n:s=n),this.test({name:c||"matches",message:s||vu.matches,params:{regex:t},skipAbsent:!0,test:d=>d===""&&r||d.search(t)!==-1})}email(t=vu.email){return this.matches(N_e,{name:"email",message:t,excludeEmptyString:!0})}url(t=vu.url){return this.matches(V_e,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=vu.uuid){return this.matches($_e,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",r,s;return t&&(typeof t=="object"?{message:n="",allowOffset:r=!1,precision:s=void 0}=t:n=t),this.matches(W_e,{name:"datetime",message:n||vu.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||vu.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:c=>{if(!c||r)return!0;const d=nB(c);return d?!!d.z:!1}}).test({name:"datetime_precision",message:n||vu.datetime_precision,params:{precision:s},skipAbsent:!0,test:c=>{if(!c||s==null)return!0;const d=nB(c);return d?d.precision===s:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=vu.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:G_e})}lowercase(t=vu.lowercase){return this.transform(n=>Vg(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Vg(n)||n===n.toLowerCase()})}uppercase(t=vu.uppercase){return this.transform(n=>Vg(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Vg(n)||n===n.toUpperCase()})}}vh.prototype=NK.prototype;let VK=new Date(""),X_e=e=>Object.prototype.toString.call(e)==="[object Date]";function fR(){return new gE}class gE extends Ih{constructor(){super({type:"date",check(t){return X_e(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,r)=>!r.spec.coerce||r.isType(t)||t===null?t:(t=j_e(t),isNaN(t)?gE.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let r;if(Cv.isRef(t))r=t;else{let s=this.cast(t);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(t,n=eB.min){let r=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(t,n=eB.max){let r=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}gE.INVALID_DATE=VK;fR.prototype=gE.prototype;fR.INVALID_DATE=VK;function Z_e(e,t=[]){let n=[],r=new Set,s=new Set(t.map(([d,i])=>`${d}-${i}`));function c(d,i){let m=T0.split(d)[0];r.add(m),s.has(`${i}-${m}`)||n.push([i,m])}for(const d of Object.keys(e)){let i=e[d];r.add(d),Cv.isRef(i)&&i.isSibling?c(i.path,d):DD(i)&&"deps"in i&&i.deps.forEach(m=>c(m,d))}return C_e.array(Array.from(r),n).reverse()}function h2(e,t){let n=1/0;return e.some((r,s)=>{var c;if((c=t.path)!=null&&c.includes(r))return n=s,!0}),n}function $K(e){return(t,n)=>h2(e,t)-h2(e,n)}const UK=(e,t,n)=>{if(typeof e!="string")return e;let r=e;try{r=JSON.parse(e)}catch{}return n.isType(r)?r:e};function bA(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=bA(r);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=bA(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(bA)}):"optional"in e?e.optional():e}const K_e=(e,t)=>{const n=[...T0.normalizePath(t)];if(n.length===1)return n[0]in e;let r=n.pop(),s=T0.getter(T0.join(n),!0)(e);return!!(s&&r in s)};let f2=e=>Object.prototype.toString.call(e)==="[object Object]";function p2(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(r=>n.indexOf(r)===-1)}const Q_e=$K([]);function MN(e){return new qK(e)}class qK extends Ih{constructor(t){super({type:"object",check(n){return f2(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=Q_e,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var r;let s=super._cast(t,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let c=this.fields,d=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(s).filter(C=>!this._nodes.includes(C))),m={},x=Object.assign({},n,{parent:m,__validating:n.__validating||!1}),T=!1;for(const C of i){let A=c[C],I=C in s;if(A){let k,B=s[C];x.path=(n.path?`${n.path}.`:"")+C,A=A.resolve({value:B,context:n.context,parent:m});let j=A instanceof Ih?A.spec:void 0,V=j==null?void 0:j.strict;if(j!=null&&j.strip){T=T||C in s;continue}k=!n.__validating||!V?A.cast(s[C],x):s[C],k!==void 0&&(m[C]=k)}else I&&!d&&(m[C]=s[C]);(I!==C in m||m[C]!==s[C])&&(T=!0)}return T?m:s}_validate(t,n={},r,s){let{from:c=[],originalValue:d=t,recursive:i=this.spec.recursive}=n;n.from=[{schema:this,value:d},...c],n.__validating=!0,n.originalValue=d,super._validate(t,n,r,(m,x)=>{if(!i||!f2(x)){s(m,x);return}d=d||x;let T=[];for(let C of this._nodes){let A=this.fields[C];!A||Cv.isRef(A)||T.push(A.asNestedTest({options:n,key:C,parent:x,parentPath:n.path,originalParent:d}))}this.runTests({tests:T,value:x,originalValue:d,options:n},r,C=>{s(C.sort(this._sortErrors).concat(m),x)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),r=n.fields;for(let[s,c]of Object.entries(this.fields)){const d=r[s];r[s]=d===void 0?c:d}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const c=this.fields[r];let d=t;(s=d)!=null&&s.value&&(d=Object.assign({},d,{parent:d.value,value:d.value[r]})),n[r]=c&&"getDefault"in c?c.getDefault(d):void 0}),n}setFields(t,n){let r=this.clone();return r.fields=t,r._nodes=Z_e(t,n),r._sortErrors=$K(Object.keys(t)),n&&(r._excludedEdges=n),r}shape(t,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,t),s)})}partial(){const t={};for(const[n,r]of Object.entries(this.fields))t[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(t)}deepPartial(){return bA(this)}pick(t){const n={};for(const r of t)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>t.includes(r)&&t.includes(s)))}omit(t){const n=[];for(const r of Object.keys(this.fields))t.includes(r)||n.push(r);return this.pick(n)}from(t,n,r){let s=T0.getter(t,!0);return this.transform(c=>{if(!c)return c;let d=c;return K_e(c,t)&&(d=Object.assign({},c),r||delete d[t],d[n]=s(c)),d})}json(){return this.transform(UK)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||_A.exact,test(n){if(n==null)return!0;const r=p2(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,n=_A.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const c=p2(this.schema,s);return!t||c.length===0||this.createError({params:{unknown:c.join(", ")}})}});return r.spec.noUnknown=t,r}unknown(t=!0,n=_A.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[t(s)]=n[s];return r})}camelCase(){return this.transformKeys(Ek.camelCase)}snakeCase(){return this.transformKeys(Ek.snakeCase)}constantCase(){return this.transformKeys(t=>Ek.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);r.fields={};for(const[c,d]of Object.entries(n.fields)){var s;let i=t;(s=i)!=null&&s.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[c]})),r.fields[c]=d.describe(i)}return r}}MN.prototype=qK.prototype;function HK(e){return new WK(e)}class WK extends Ih{constructor(t){super({type:"array",spec:{types:t},check(n){return Array.isArray(n)}}),this.innerType=void 0,this.innerType=t}_cast(t,n){const r=super._cast(t,n);if(!this._typeCheck(r)||!this.innerType)return r;let s=!1;const c=r.map((d,i)=>{const m=this.innerType.cast(d,Object.assign({},n,{path:`${n.path||""}[${i}]`}));return m!==d&&(s=!0),m});return s?c:r}_validate(t,n={},r,s){var c;let d=this.innerType,i=(c=n.recursive)!=null?c:this.spec.recursive;n.originalValue!=null&&n.originalValue,super._validate(t,n,r,(m,x)=>{var T;if(!i||!d||!this._typeCheck(x)){s(m,x);return}let C=new Array(x.length);for(let I=0;I<x.length;I++){var A;C[I]=d.asNestedTest({options:n,index:I,parent:x,parentPath:n.path,originalParent:(A=n.originalValue)!=null?A:t})}this.runTests({value:x,tests:C,originalValue:(T=n.originalValue)!=null?T:t,options:n},r,I=>s(I.concat(m),x))})}clone(t){const n=super.clone(t);return n.innerType=this.innerType,n}json(){return this.transform(UK)}concat(t){let n=super.concat(t);return n.innerType=this.innerType,t.innerType&&(n.innerType=n.innerType?n.innerType.concat(t.innerType):t.innerType),n}of(t){let n=this.clone();if(!DD(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Ug(t));return n.innerType=t,n.spec=Object.assign({},n.spec,{types:t}),n}length(t,n=xA.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n){return n=n||xA.min,this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n){return n=n||xA.max,this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}ensure(){return this.default(()=>[]).transform((t,n)=>this._typeCheck(t)?t:n==null?[]:[].concat(n))}compact(t){let n=t?(r,s,c)=>!t(r,s,c):r=>!!r;return this.transform(r=>r!=null?r.filter(n):r)}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);if(n.innerType){var s;let c=t;(s=c)!=null&&s.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[0]})),r.innerType=n.innerType.describe(c)}return r}}HK.prototype=WK.prototype;function GK(e,t){return function(){return e.apply(t,arguments)}}const{toString:J_e}=Object.prototype,{getPrototypeOf:AN}=Object,{iterator:PD,toStringTag:YK}=Symbol,ID=(e=>t=>{const n=J_e.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ip=e=>(e=e.toLowerCase(),t=>ID(t)===e),kD=e=>t=>typeof t===e,{isArray:P1}=Array,bT=kD("undefined");function e0e(e){return e!==null&&!bT(e)&&e.constructor!==null&&!bT(e.constructor)&&Eu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const XK=ip("ArrayBuffer");function t0e(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&XK(e.buffer),t}const n0e=kD("string"),Eu=kD("function"),ZK=kD("number"),OD=e=>e!==null&&typeof e=="object",r0e=e=>e===!0||e===!1,wA=e=>{if(ID(e)!=="object")return!1;const t=AN(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(YK in e)&&!(PD in e)},i0e=ip("Date"),o0e=ip("File"),s0e=ip("Blob"),a0e=ip("FileList"),l0e=e=>OD(e)&&Eu(e.pipe),c0e=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Eu(e.append)&&((t=ID(e))==="formdata"||t==="object"&&Eu(e.toString)&&e.toString()==="[object FormData]"))},u0e=ip("URLSearchParams"),[d0e,h0e,f0e,p0e]=["ReadableStream","Request","Response","Headers"].map(ip),m0e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yE(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),P1(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const c=n?Object.getOwnPropertyNames(e):Object.keys(e),d=c.length;let i;for(r=0;r<d;r++)i=c[r],t.call(null,e[i],i,e)}}function KK(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const _0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,QK=e=>!bT(e)&&e!==_0;function rB(){const{caseless:e}=QK(this)&&this||{},t={},n=(r,s)=>{const c=e&&KK(t,s)||s;wA(t[c])&&wA(r)?t[c]=rB(t[c],r):wA(r)?t[c]=rB({},r):P1(r)?t[c]=r.slice():t[c]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&yE(arguments[r],n);return t}const g0e=(e,t,n,{allOwnKeys:r}={})=>(yE(t,(s,c)=>{n&&Eu(s)?e[c]=GK(s,n):e[c]=s},{allOwnKeys:r}),e),y0e=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),v0e=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},_0e=(e,t,n,r)=>{let s,c,d;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),c=s.length;c-- >0;)d=s[c],(!r||r(d,e,t))&&!i[d]&&(t[d]=e[d],i[d]=!0);e=n!==!1&&AN(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},x0e=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},b0e=e=>{if(!e)return null;if(P1(e))return e;let t=e.length;if(!ZK(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},w0e=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&AN(Uint8Array)),S0e=(e,t)=>{const r=(e&&e[PD]).call(e);let s;for(;(s=r.next())&&!s.done;){const c=s.value;t.call(e,c[0],c[1])}},T0e=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},E0e=ip("HTMLFormElement"),C0e=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),m2=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),M0e=ip("RegExp"),JK=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};yE(n,(s,c)=>{let d;(d=t(s,c,e))!==!1&&(r[c]=d||s)}),Object.defineProperties(e,r)},A0e=e=>{JK(e,(t,n)=>{if(Eu(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Eu(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},R0e=(e,t)=>{const n={},r=s=>{s.forEach(c=>{n[c]=!0})};return P1(e)?r(e):r(String(e).split(t)),n},D0e=()=>{},P0e=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function I0e(e){return!!(e&&Eu(e.append)&&e[YK]==="FormData"&&e[PD])}const k0e=e=>{const t=new Array(10),n=(r,s)=>{if(OD(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const c=P1(r)?[]:{};return yE(r,(d,i)=>{const m=n(d,s+1);!bT(m)&&(c[i]=m)}),t[s]=void 0,c}}return r};return n(e,0)},O0e=ip("AsyncFunction"),L0e=e=>e&&(OD(e)||Eu(e))&&Eu(e.then)&&Eu(e.catch),eQ=((e,t)=>e?setImmediate:t?((n,r)=>(_0.addEventListener("message",({source:s,data:c})=>{s===_0&&c===n&&r.length&&r.shift()()},!1),s=>{r.push(s),_0.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Eu(_0.postMessage)),z0e=typeof queueMicrotask<"u"?queueMicrotask.bind(_0):typeof process<"u"&&process.nextTick||eQ,F0e=e=>e!=null&&Eu(e[PD]),Sn={isArray:P1,isArrayBuffer:XK,isBuffer:e0e,isFormData:c0e,isArrayBufferView:t0e,isString:n0e,isNumber:ZK,isBoolean:r0e,isObject:OD,isPlainObject:wA,isReadableStream:d0e,isRequest:h0e,isResponse:f0e,isHeaders:p0e,isUndefined:bT,isDate:i0e,isFile:o0e,isBlob:s0e,isRegExp:M0e,isFunction:Eu,isStream:l0e,isURLSearchParams:u0e,isTypedArray:w0e,isFileList:a0e,forEach:yE,merge:rB,extend:g0e,trim:m0e,stripBOM:y0e,inherits:v0e,toFlatObject:_0e,kindOf:ID,kindOfTest:ip,endsWith:x0e,toArray:b0e,forEachEntry:S0e,matchAll:T0e,isHTMLForm:E0e,hasOwnProperty:m2,hasOwnProp:m2,reduceDescriptors:JK,freezeMethods:A0e,toObjectSet:R0e,toCamelCase:C0e,noop:D0e,toFiniteNumber:P0e,findKey:KK,global:_0,isContextDefined:QK,isSpecCompliantForm:I0e,toJSONObject:k0e,isAsyncFn:O0e,isThenable:L0e,setImmediate:eQ,asap:z0e,isIterable:F0e};function Qi(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Sn.inherits(Qi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Sn.toJSONObject(this.config),code:this.code,status:this.status}}});const tQ=Qi.prototype,nQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nQ[e]={value:e}});Object.defineProperties(Qi,nQ);Object.defineProperty(tQ,"isAxiosError",{value:!0});Qi.from=(e,t,n,r,s,c)=>{const d=Object.create(tQ);return Sn.toFlatObject(e,d,function(m){return m!==Error.prototype},i=>i!=="isAxiosError"),Qi.call(d,e.message,t,n,r,s),d.cause=e,d.name=e.name,c&&Object.assign(d,c),d};const B0e=null;function iB(e){return Sn.isPlainObject(e)||Sn.isArray(e)}function rQ(e){return Sn.endsWith(e,"[]")?e.slice(0,-2):e}function g2(e,t,n){return e?e.concat(t).map(function(s,c){return s=rQ(s),!n&&c?"["+s+"]":s}).join(n?".":""):t}function j0e(e){return Sn.isArray(e)&&!e.some(iB)}const N0e=Sn.toFlatObject(Sn,{},null,function(t){return/^is[A-Z]/.test(t)});function LD(e,t,n){if(!Sn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Sn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,j){return!Sn.isUndefined(j[B])});const r=n.metaTokens,s=n.visitor||T,c=n.dots,d=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&Sn.isSpecCompliantForm(t);if(!Sn.isFunction(s))throw new TypeError("visitor must be a function");function x(k){if(k===null)return"";if(Sn.isDate(k))return k.toISOString();if(!m&&Sn.isBlob(k))throw new Qi("Blob is not supported. Use a Buffer instead.");return Sn.isArrayBuffer(k)||Sn.isTypedArray(k)?m&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function T(k,B,j){let V=k;if(k&&!j&&typeof k=="object"){if(Sn.endsWith(B,"{}"))B=r?B:B.slice(0,-2),k=JSON.stringify(k);else if(Sn.isArray(k)&&j0e(k)||(Sn.isFileList(k)||Sn.endsWith(B,"[]"))&&(V=Sn.toArray(k)))return B=rQ(B),V.forEach(function(G,X){!(Sn.isUndefined(G)||G===null)&&t.append(d===!0?g2([B],X,c):d===null?B:B+"[]",x(G))}),!1}return iB(k)?!0:(t.append(g2(j,B,c),x(k)),!1)}const C=[],A=Object.assign(N0e,{defaultVisitor:T,convertValue:x,isVisitable:iB});function I(k,B){if(!Sn.isUndefined(k)){if(C.indexOf(k)!==-1)throw Error("Circular reference detected in "+B.join("."));C.push(k),Sn.forEach(k,function(V,H){(!(Sn.isUndefined(V)||V===null)&&s.call(t,V,Sn.isString(H)?H.trim():H,B,A))===!0&&I(V,B?B.concat(H):[H])}),C.pop()}}if(!Sn.isObject(e))throw new TypeError("data must be an object");return I(e),t}function y2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function RN(e,t){this._pairs=[],e&&LD(e,this,t)}const iQ=RN.prototype;iQ.append=function(t,n){this._pairs.push([t,n])};iQ.toString=function(t){const n=t?function(r){return t.call(this,r,y2)}:y2;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function V0e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oQ(e,t,n){if(!t)return e;const r=n&&n.encode||V0e;Sn.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let c;if(s?c=s(t,n):c=Sn.isURLSearchParams(t)?t.toString():new RN(t,n).toString(r),c){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class v2{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Sn.forEach(this.handlers,function(r){r!==null&&t(r)})}}const sQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$0e=typeof URLSearchParams<"u"?URLSearchParams:RN,U0e=typeof FormData<"u"?FormData:null,q0e=typeof Blob<"u"?Blob:null,H0e={isBrowser:!0,classes:{URLSearchParams:$0e,FormData:U0e,Blob:q0e},protocols:["http","https","file","blob","url","data"]},DN=typeof window<"u"&&typeof document<"u",oB=typeof navigator=="object"&&navigator||void 0,W0e=DN&&(!oB||["ReactNative","NativeScript","NS"].indexOf(oB.product)<0),G0e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Y0e=DN&&window.location.href||"http://localhost",X0e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:DN,hasStandardBrowserEnv:W0e,hasStandardBrowserWebWorkerEnv:G0e,navigator:oB,origin:Y0e},Symbol.toStringTag,{value:"Module"})),vc={...X0e,...H0e};function Z0e(e,t){return LD(e,new vc.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,c){return vc.isNode&&Sn.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function K0e(e){return Sn.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Q0e(e){const t={},n=Object.keys(e);let r;const s=n.length;let c;for(r=0;r<s;r++)c=n[r],t[c]=e[c];return t}function aQ(e){function t(n,r,s,c){let d=n[c++];if(d==="__proto__")return!0;const i=Number.isFinite(+d),m=c>=n.length;return d=!d&&Sn.isArray(s)?s.length:d,m?(Sn.hasOwnProp(s,d)?s[d]=[s[d],r]:s[d]=r,!i):((!s[d]||!Sn.isObject(s[d]))&&(s[d]=[]),t(n,r,s[d],c)&&Sn.isArray(s[d])&&(s[d]=Q0e(s[d])),!i)}if(Sn.isFormData(e)&&Sn.isFunction(e.entries)){const n={};return Sn.forEachEntry(e,(r,s)=>{t(K0e(r),s,n,0)}),n}return null}function J0e(e,t,n){if(Sn.isString(e))try{return(t||JSON.parse)(e),Sn.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const vE={transitional:sQ,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,c=Sn.isObject(t);if(c&&Sn.isHTMLForm(t)&&(t=new FormData(t)),Sn.isFormData(t))return s?JSON.stringify(aQ(t)):t;if(Sn.isArrayBuffer(t)||Sn.isBuffer(t)||Sn.isStream(t)||Sn.isFile(t)||Sn.isBlob(t)||Sn.isReadableStream(t))return t;if(Sn.isArrayBufferView(t))return t.buffer;if(Sn.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Z0e(t,this.formSerializer).toString();if((i=Sn.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return LD(i?{"files[]":t}:t,m&&new m,this.formSerializer)}}return c||s?(n.setContentType("application/json",!1),J0e(t)):t}],transformResponse:[function(t){const n=this.transitional||vE.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Sn.isResponse(t)||Sn.isReadableStream(t))return t;if(t&&Sn.isString(t)&&(r&&!this.responseType||s)){const d=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(i){if(d)throw i.name==="SyntaxError"?Qi.from(i,Qi.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vc.classes.FormData,Blob:vc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Sn.forEach(["delete","get","head","post","put","patch"],e=>{vE.headers[e]={}});const exe=Sn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),txe=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(d){s=d.indexOf(":"),n=d.substring(0,s).trim().toLowerCase(),r=d.substring(s+1).trim(),!(!n||t[n]&&exe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},_2=Symbol("internals");function aS(e){return e&&String(e).trim().toLowerCase()}function SA(e){return e===!1||e==null?e:Sn.isArray(e)?e.map(SA):String(e)}function nxe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const rxe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ck(e,t,n,r,s){if(Sn.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!Sn.isString(t)){if(Sn.isString(r))return t.indexOf(r)!==-1;if(Sn.isRegExp(r))return r.test(t)}}function ixe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function oxe(e,t){const n=Sn.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,c,d){return this[r].call(this,t,s,c,d)},configurable:!0})})}let Cu=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function c(i,m,x){const T=aS(m);if(!T)throw new Error("header name must be a non-empty string");const C=Sn.findKey(s,T);(!C||s[C]===void 0||x===!0||x===void 0&&s[C]!==!1)&&(s[C||m]=SA(i))}const d=(i,m)=>Sn.forEach(i,(x,T)=>c(x,T,m));if(Sn.isPlainObject(t)||t instanceof this.constructor)d(t,n);else if(Sn.isString(t)&&(t=t.trim())&&!rxe(t))d(txe(t),n);else if(Sn.isObject(t)&&Sn.isIterable(t)){let i={},m,x;for(const T of t){if(!Sn.isArray(T))throw TypeError("Object iterator must return a key-value pair");i[x=T[0]]=(m=i[x])?Sn.isArray(m)?[...m,T[1]]:[m,T[1]]:T[1]}d(i,n)}else t!=null&&c(n,t,r);return this}get(t,n){if(t=aS(t),t){const r=Sn.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return nxe(s);if(Sn.isFunction(n))return n.call(this,s,r);if(Sn.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=aS(t),t){const r=Sn.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ck(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function c(d){if(d=aS(d),d){const i=Sn.findKey(r,d);i&&(!n||Ck(r,r[i],i,n))&&(delete r[i],s=!0)}}return Sn.isArray(t)?t.forEach(c):c(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const c=n[r];(!t||Ck(this,this[c],c,t,!0))&&(delete this[c],s=!0)}return s}normalize(t){const n=this,r={};return Sn.forEach(this,(s,c)=>{const d=Sn.findKey(r,c);if(d){n[d]=SA(s),delete n[c];return}const i=t?ixe(c):String(c).trim();i!==c&&delete n[c],n[i]=SA(s),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Sn.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&Sn.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[_2]=this[_2]={accessors:{}}).accessors,s=this.prototype;function c(d){const i=aS(d);r[i]||(oxe(s,d),r[i]=!0)}return Sn.isArray(t)?t.forEach(c):c(t),this}};Cu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Sn.reduceDescriptors(Cu.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Sn.freezeMethods(Cu);function Mk(e,t){const n=this||vE,r=t||n,s=Cu.from(r.headers);let c=r.data;return Sn.forEach(e,function(i){c=i.call(n,c,s.normalize(),t?t.status:void 0)}),s.normalize(),c}function lQ(e){return!!(e&&e.__CANCEL__)}function I1(e,t,n){Qi.call(this,e??"canceled",Qi.ERR_CANCELED,t,n),this.name="CanceledError"}Sn.inherits(I1,Qi,{__CANCEL__:!0});function cQ(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Qi("Request failed with status code "+n.status,[Qi.ERR_BAD_REQUEST,Qi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function sxe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function axe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,c=0,d;return t=t!==void 0?t:1e3,function(m){const x=Date.now(),T=r[c];d||(d=x),n[s]=m,r[s]=x;let C=c,A=0;for(;C!==s;)A+=n[C++],C=C%e;if(s=(s+1)%e,s===c&&(c=(c+1)%e),x-d<t)return;const I=T&&x-T;return I?Math.round(A*1e3/I):void 0}}function lxe(e,t){let n=0,r=1e3/t,s,c;const d=(x,T=Date.now())=>{n=T,s=null,c&&(clearTimeout(c),c=null),e.apply(null,x)};return[(...x)=>{const T=Date.now(),C=T-n;C>=r?d(x,T):(s=x,c||(c=setTimeout(()=>{c=null,d(s)},r-C)))},()=>s&&d(s)]}const pR=(e,t,n=3)=>{let r=0;const s=axe(50,250);return lxe(c=>{const d=c.loaded,i=c.lengthComputable?c.total:void 0,m=d-r,x=s(m),T=d<=i;r=d;const C={loaded:d,total:i,progress:i?d/i:void 0,bytes:m,rate:x||void 0,estimated:x&&i&&T?(i-d)/x:void 0,event:c,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(C)},n)},x2=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},b2=e=>(...t)=>Sn.asap(()=>e(...t)),cxe=vc.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,vc.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(vc.origin),vc.navigator&&/(msie|trident)/i.test(vc.navigator.userAgent)):()=>!0,uxe=vc.hasStandardBrowserEnv?{write(e,t,n,r,s,c){const d=[e+"="+encodeURIComponent(t)];Sn.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),Sn.isString(r)&&d.push("path="+r),Sn.isString(s)&&d.push("domain="+s),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dxe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hxe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function uQ(e,t,n){let r=!dxe(t);return e&&(r||n==!1)?hxe(e,t):t}const w2=e=>e instanceof Cu?{...e}:e;function B0(e,t){t=t||{};const n={};function r(x,T,C,A){return Sn.isPlainObject(x)&&Sn.isPlainObject(T)?Sn.merge.call({caseless:A},x,T):Sn.isPlainObject(T)?Sn.merge({},T):Sn.isArray(T)?T.slice():T}function s(x,T,C,A){if(Sn.isUndefined(T)){if(!Sn.isUndefined(x))return r(void 0,x,C,A)}else return r(x,T,C,A)}function c(x,T){if(!Sn.isUndefined(T))return r(void 0,T)}function d(x,T){if(Sn.isUndefined(T)){if(!Sn.isUndefined(x))return r(void 0,x)}else return r(void 0,T)}function i(x,T,C){if(C in t)return r(x,T);if(C in e)return r(void 0,x)}const m={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:i,headers:(x,T,C)=>s(w2(x),w2(T),C,!0)};return Sn.forEach(Object.keys(Object.assign({},e,t)),function(T){const C=m[T]||s,A=C(e[T],t[T],T);Sn.isUndefined(A)&&C!==i||(n[T]=A)}),n}const dQ=e=>{const t=B0({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:c,headers:d,auth:i}=t;t.headers=d=Cu.from(d),t.url=oQ(uQ(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&d.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let m;if(Sn.isFormData(n)){if(vc.hasStandardBrowserEnv||vc.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((m=d.getContentType())!==!1){const[x,...T]=m?m.split(";").map(C=>C.trim()).filter(Boolean):[];d.setContentType([x||"multipart/form-data",...T].join("; "))}}if(vc.hasStandardBrowserEnv&&(r&&Sn.isFunction(r)&&(r=r(t)),r||r!==!1&&cxe(t.url))){const x=s&&c&&uxe.read(c);x&&d.set(s,x)}return t},fxe=typeof XMLHttpRequest<"u",pxe=fxe&&function(e){return new Promise(function(n,r){const s=dQ(e);let c=s.data;const d=Cu.from(s.headers).normalize();let{responseType:i,onUploadProgress:m,onDownloadProgress:x}=s,T,C,A,I,k;function B(){I&&I(),k&&k(),s.cancelToken&&s.cancelToken.unsubscribe(T),s.signal&&s.signal.removeEventListener("abort",T)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function V(){if(!j)return;const G=Cu.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),Q={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:G,config:e,request:j};cQ(function(ce){n(ce),B()},function(ce){r(ce),B()},Q),j=null}"onloadend"in j?j.onloadend=V:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(V)},j.onabort=function(){j&&(r(new Qi("Request aborted",Qi.ECONNABORTED,e,j)),j=null)},j.onerror=function(){r(new Qi("Network Error",Qi.ERR_NETWORK,e,j)),j=null},j.ontimeout=function(){let X=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const Q=s.transitional||sQ;s.timeoutErrorMessage&&(X=s.timeoutErrorMessage),r(new Qi(X,Q.clarifyTimeoutError?Qi.ETIMEDOUT:Qi.ECONNABORTED,e,j)),j=null},c===void 0&&d.setContentType(null),"setRequestHeader"in j&&Sn.forEach(d.toJSON(),function(X,Q){j.setRequestHeader(Q,X)}),Sn.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),i&&i!=="json"&&(j.responseType=s.responseType),x&&([A,k]=pR(x,!0),j.addEventListener("progress",A)),m&&j.upload&&([C,I]=pR(m),j.upload.addEventListener("progress",C),j.upload.addEventListener("loadend",I)),(s.cancelToken||s.signal)&&(T=G=>{j&&(r(!G||G.type?new I1(null,e,j):G),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(T),s.signal&&(s.signal.aborted?T():s.signal.addEventListener("abort",T)));const H=sxe(s.url);if(H&&vc.protocols.indexOf(H)===-1){r(new Qi("Unsupported protocol "+H+":",Qi.ERR_BAD_REQUEST,e));return}j.send(c||null)})},mxe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const c=function(x){if(!s){s=!0,i();const T=x instanceof Error?x:this.reason;r.abort(T instanceof Qi?T:new I1(T instanceof Error?T.message:T))}};let d=t&&setTimeout(()=>{d=null,c(new Qi(`timeout ${t} of ms exceeded`,Qi.ETIMEDOUT))},t);const i=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(x=>{x.unsubscribe?x.unsubscribe(c):x.removeEventListener("abort",c)}),e=null)};e.forEach(x=>x.addEventListener("abort",c));const{signal:m}=r;return m.unsubscribe=()=>Sn.asap(i),m}},gxe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},yxe=async function*(e,t){for await(const n of vxe(e))yield*gxe(n,t)},vxe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},S2=(e,t,n,r)=>{const s=yxe(e,t);let c=0,d,i=m=>{d||(d=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:x,value:T}=await s.next();if(x){i(),m.close();return}let C=T.byteLength;if(n){let A=c+=C;n(A)}m.enqueue(new Uint8Array(T))}catch(x){throw i(x),x}},cancel(m){return i(m),s.return()}},{highWaterMark:2})},zD=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",hQ=zD&&typeof ReadableStream=="function",_xe=zD&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),fQ=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xxe=hQ&&fQ(()=>{let e=!1;const t=new Request(vc.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),T2=64*1024,sB=hQ&&fQ(()=>Sn.isReadableStream(new Response("").body)),mR={stream:sB&&(e=>e.body)};zD&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!mR[t]&&(mR[t]=Sn.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Qi(`Response type '${t}' is not supported`,Qi.ERR_NOT_SUPPORT,r)})})})(new Response);const bxe=async e=>{if(e==null)return 0;if(Sn.isBlob(e))return e.size;if(Sn.isSpecCompliantForm(e))return(await new Request(vc.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Sn.isArrayBufferView(e)||Sn.isArrayBuffer(e))return e.byteLength;if(Sn.isURLSearchParams(e)&&(e=e+""),Sn.isString(e))return(await _xe(e)).byteLength},wxe=async(e,t)=>{const n=Sn.toFiniteNumber(e.getContentLength());return n??bxe(t)},Sxe=zD&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:c,timeout:d,onDownloadProgress:i,onUploadProgress:m,responseType:x,headers:T,withCredentials:C="same-origin",fetchOptions:A}=dQ(e);x=x?(x+"").toLowerCase():"text";let I=mxe([s,c&&c.toAbortSignal()],d),k;const B=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let j;try{if(m&&xxe&&n!=="get"&&n!=="head"&&(j=await wxe(T,r))!==0){let Q=new Request(t,{method:"POST",body:r,duplex:"half"}),ee;if(Sn.isFormData(r)&&(ee=Q.headers.get("content-type"))&&T.setContentType(ee),Q.body){const[ce,fe]=x2(j,pR(b2(m)));r=S2(Q.body,T2,ce,fe)}}Sn.isString(C)||(C=C?"include":"omit");const V="credentials"in Request.prototype;k=new Request(t,{...A,signal:I,method:n.toUpperCase(),headers:T.normalize().toJSON(),body:r,duplex:"half",credentials:V?C:void 0});let H=await fetch(k);const G=sB&&(x==="stream"||x==="response");if(sB&&(i||G&&B)){const Q={};["status","statusText","headers"].forEach(ue=>{Q[ue]=H[ue]});const ee=Sn.toFiniteNumber(H.headers.get("content-length")),[ce,fe]=i&&x2(ee,pR(b2(i),!0))||[];H=new Response(S2(H.body,T2,ce,()=>{fe&&fe(),B&&B()}),Q)}x=x||"text";let X=await mR[Sn.findKey(mR,x)||"text"](H,e);return!G&&B&&B(),await new Promise((Q,ee)=>{cQ(Q,ee,{data:X,headers:Cu.from(H.headers),status:H.status,statusText:H.statusText,config:e,request:k})})}catch(V){throw B&&B(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new Qi("Network Error",Qi.ERR_NETWORK,e,k),{cause:V.cause||V}):Qi.from(V,V&&V.code,e,k)}}),aB={http:B0e,xhr:pxe,fetch:Sxe};Sn.forEach(aB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const E2=e=>`- ${e}`,Txe=e=>Sn.isFunction(e)||e===null||e===!1,pQ={getAdapter:e=>{e=Sn.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let c=0;c<t;c++){n=e[c];let d;if(r=n,!Txe(n)&&(r=aB[(d=String(n)).toLowerCase()],r===void 0))throw new Qi(`Unknown adapter '${d}'`);if(r)break;s[d||"#"+c]=r}if(!r){const c=Object.entries(s).map(([i,m])=>`adapter ${i} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=t?c.length>1?`since :
`+c.map(E2).join(`
`):" "+E2(c[0]):"as no adapter specified";throw new Qi("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return r},adapters:aB};function Ak(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new I1(null,e)}function C2(e){return Ak(e),e.headers=Cu.from(e.headers),e.data=Mk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),pQ.getAdapter(e.adapter||vE.adapter)(e).then(function(r){return Ak(e),r.data=Mk.call(e,e.transformResponse,r),r.headers=Cu.from(r.headers),r},function(r){return lQ(r)||(Ak(e),r&&r.response&&(r.response.data=Mk.call(e,e.transformResponse,r.response),r.response.headers=Cu.from(r.response.headers))),Promise.reject(r)})}const mQ="1.9.0",FD={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{FD[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const M2={};FD.transitional=function(t,n,r){function s(c,d){return"[Axios v"+mQ+"] Transitional option '"+c+"'"+d+(r?". "+r:"")}return(c,d,i)=>{if(t===!1)throw new Qi(s(d," has been removed"+(n?" in "+n:"")),Qi.ERR_DEPRECATED);return n&&!M2[d]&&(M2[d]=!0,console.warn(s(d," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,d,i):!0}};FD.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Exe(e,t,n){if(typeof e!="object")throw new Qi("options must be an object",Qi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const c=r[s],d=t[c];if(d){const i=e[c],m=i===void 0||d(i,c,e);if(m!==!0)throw new Qi("option "+c+" must be "+m,Qi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Qi("Unknown option "+c,Qi.ERR_BAD_OPTION)}}const TA={assertOptions:Exe,validators:FD},Yp=TA.validators;let E0=class{constructor(t){this.defaults=t||{},this.interceptors={request:new v2,response:new v2}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const c=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=B0(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:c}=n;r!==void 0&&TA.assertOptions(r,{silentJSONParsing:Yp.transitional(Yp.boolean),forcedJSONParsing:Yp.transitional(Yp.boolean),clarifyTimeoutError:Yp.transitional(Yp.boolean)},!1),s!=null&&(Sn.isFunction(s)?n.paramsSerializer={serialize:s}:TA.assertOptions(s,{encode:Yp.function,serialize:Yp.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),TA.assertOptions(n,{baseUrl:Yp.spelling("baseURL"),withXsrfToken:Yp.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=c&&Sn.merge(c.common,c[n.method]);c&&Sn.forEach(["delete","get","head","post","put","patch","common"],k=>{delete c[k]}),n.headers=Cu.concat(d,c);const i=[];let m=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(n)===!1||(m=m&&B.synchronous,i.unshift(B.fulfilled,B.rejected))});const x=[];this.interceptors.response.forEach(function(B){x.push(B.fulfilled,B.rejected)});let T,C=0,A;if(!m){const k=[C2.bind(this),void 0];for(k.unshift.apply(k,i),k.push.apply(k,x),A=k.length,T=Promise.resolve(n);C<A;)T=T.then(k[C++],k[C++]);return T}A=i.length;let I=n;for(C=0;C<A;){const k=i[C++],B=i[C++];try{I=k(I)}catch(j){B.call(this,j);break}}try{T=C2.call(this,I)}catch(k){return Promise.reject(k)}for(C=0,A=x.length;C<A;)T=T.then(x[C++],x[C++]);return T}getUri(t){t=B0(this.defaults,t);const n=uQ(t.baseURL,t.url,t.allowAbsoluteUrls);return oQ(n,t.params,t.paramsSerializer)}};Sn.forEach(["delete","get","head","options"],function(t){E0.prototype[t]=function(n,r){return this.request(B0(r||{},{method:t,url:n,data:(r||{}).data}))}});Sn.forEach(["post","put","patch"],function(t){function n(r){return function(c,d,i){return this.request(B0(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}E0.prototype[t]=n(),E0.prototype[t+"Form"]=n(!0)});let Cxe=class gQ{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(s=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](s);r._listeners=null}),this.promise.then=s=>{let c;const d=new Promise(i=>{r.subscribe(i),c=i}).then(s);return d.cancel=function(){r.unsubscribe(c)},d},t(function(c,d,i){r.reason||(r.reason=new I1(c,d,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new gQ(function(s){t=s}),cancel:t}}};function Mxe(e){return function(n){return e.apply(null,n)}}function Axe(e){return Sn.isObject(e)&&e.isAxiosError===!0}const lB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lB).forEach(([e,t])=>{lB[t]=e});function yQ(e){const t=new E0(e),n=GK(E0.prototype.request,t);return Sn.extend(n,E0.prototype,t,{allOwnKeys:!0}),Sn.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return yQ(B0(e,s))},n}const Ma=yQ(vE);Ma.Axios=E0;Ma.CanceledError=I1;Ma.CancelToken=Cxe;Ma.isCancel=lQ;Ma.VERSION=mQ;Ma.toFormData=LD;Ma.AxiosError=Qi;Ma.Cancel=Ma.CanceledError;Ma.all=function(t){return Promise.all(t)};Ma.spread=Mxe;Ma.isAxiosError=Axe;Ma.mergeConfig=B0;Ma.AxiosHeaders=Cu;Ma.formToJSON=e=>aQ(Sn.isHTMLForm(e)?new FormData(e):e);Ma.getAdapter=pQ.getAdapter;Ma.HttpStatusCode=lB;Ma.default=Ma;const{Axios:uZe,AxiosError:dZe,CanceledError:hZe,isCancel:fZe,CancelToken:pZe,VERSION:mZe,all:gZe,Cancel:yZe,isAxiosError:vZe,spread:_Ze,toFormData:xZe,AxiosHeaders:bZe,HttpStatusCode:wZe,formToJSON:SZe,getAdapter:TZe,mergeConfig:EZe}=Ma,Ps=Ma.create({baseURL:"http://3.108.250.84:3001/api/",headers:{"Content-Type":"application/json"}});Ps.interceptors.request.use(e=>e,e=>Promise.reject(e));Ps.interceptors.response.use(e=>e,e=>{var t;return console.error(e),((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});function vQ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=vQ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ox(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=vQ(e))&&(r&&(r+=" "),r+=t);return r}let Rxe={data:""},Dxe=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Rxe,Pxe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ixe=/\/\*[^]*?\*\/|  +/g,A2=/\n+/g,m0=(e,t)=>{let n="",r="",s="";for(let c in e){let d=e[c];c[0]=="@"?c[1]=="i"?n=c+" "+d+";":r+=c[1]=="f"?m0(d,c):c+"{"+m0(d,c[1]=="k"?"":t)+"}":typeof d=="object"?r+=m0(d,t?t.replace(/([^,])+/g,i=>c.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,i):i?i+" "+m:m)):c):d!=null&&(c=/^--/.test(c)?c:c.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=m0.p?m0.p(c,d):c+":"+d+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Og={},_Q=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+_Q(e[n]);return t}return e},kxe=(e,t,n,r,s)=>{let c=_Q(e),d=Og[c]||(Og[c]=(m=>{let x=0,T=11;for(;x<m.length;)T=101*T+m.charCodeAt(x++)>>>0;return"go"+T})(c));if(!Og[d]){let m=c!==e?e:(x=>{let T,C,A=[{}];for(;T=Pxe.exec(x.replace(Ixe,""));)T[4]?A.shift():T[3]?(C=T[3].replace(A2," ").trim(),A.unshift(A[0][C]=A[0][C]||{})):A[0][T[1]]=T[2].replace(A2," ").trim();return A[0]})(e);Og[d]=m0(s?{["@keyframes "+d]:m}:m,n?"":"."+d)}let i=n&&Og.g?Og.g:null;return n&&(Og.g=Og[d]),((m,x,T,C)=>{C?x.data=x.data.replace(C,m):x.data.indexOf(m)===-1&&(x.data=T?m+x.data:x.data+m)})(Og[d],t,r,i),d},Oxe=(e,t,n)=>e.reduce((r,s,c)=>{let d=t[c];if(d&&d.call){let i=d(n),m=i&&i.props&&i.props.className||/^go/.test(i)&&i;d=m?"."+m:i&&typeof i=="object"?i.props?"":m0(i,""):i===!1?"":i}return r+s+(d??"")},"");function PN(e){let t=this||{},n=e.call?e(t.p):e;return kxe(n.unshift?n.raw?Oxe(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,Dxe(t.target),t.g,t.o,t.k)}PN.bind({g:1});PN.bind({k:1});function Lxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xQ(e,t,n){return t&&Lxe(e.prototype,t),e}function hs(){return hs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hs.apply(this,arguments)}function bQ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _E(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function R2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var D2=function(){return""},wQ=Rt.createContext({enqueueSnackbar:D2,closeSnackbar:D2}),l0={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},P2=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},IN=function(t){return""+P2(t.vertical)+P2(t.horizontal)},vM=function(t){return!!t||t===0},_M="unmounted",_b="exited",xb="entering",lS="entered",I2="exiting",kN=function(e){bQ(t,e);function t(r){var s;s=e.call(this,r)||this;var c=r.appear,d;return s.appearStatus=null,r.in?c?(d=_b,s.appearStatus=xb):d=lS:r.unmountOnExit||r.mountOnEnter?d=_M:d=_b,s.state={status:d},s.nextCallback=null,s}t.getDerivedStateFromProps=function(s,c){var d=s.in;return d&&c.status===_M?{status:_b}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var c=null;if(s!==this.props){var d=this.state.status;this.props.in?d!==xb&&d!==lS&&(c=xb):(d===xb||d===lS)&&(c=I2)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,c=s,d=s;return s!=null&&typeof s!="number"&&typeof s!="string"&&(d=s.exit,c=s.enter),{exit:d,enter:c}},n.updateStatus=function(s,c){s===void 0&&(s=!1),c!==null?(this.cancelNextCallback(),c===xb?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===_b&&this.setState({status:_M})},n.performEnter=function(s){var c=this,d=this.props.enter,i=s,m=this.getTimeouts();if(!s&&!d){this.safeSetState({status:lS},function(){c.props.onEntered&&c.props.onEntered(c.node,i)});return}this.props.onEnter&&this.props.onEnter(this.node,i),this.safeSetState({status:xb},function(){c.props.onEntering&&c.props.onEntering(c.node,i),c.onTransitionEnd(m.enter,function(){c.safeSetState({status:lS},function(){c.props.onEntered&&c.props.onEntered(c.node,i)})})})},n.performExit=function(){var s=this,c=this.props.exit,d=this.getTimeouts();if(!c){this.safeSetState({status:_b},function(){s.props.onExited&&s.props.onExited(s.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:I2},function(){s.props.onExiting&&s.props.onExiting(s.node),s.onTransitionEnd(d.exit,function(){s.safeSetState({status:_b},function(){s.props.onExited&&s.props.onExited(s.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,c){c=this.setNextCallback(c),this.setState(s,c)},n.setNextCallback=function(s){var c=this,d=!0;return this.nextCallback=function(){d&&(d=!1,c.nextCallback=null,s())},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(s,c){this.setNextCallback(c);var d=s==null&&!this.props.addEndListener;if(!this.node||d){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===_M)return null;var c=this.props,d=c.children,i=_E(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return d(s,i)},xQ(t,[{key:"node",get:function(){var s,c=(s=this.props.nodeRef)===null||s===void 0?void 0:s.current;if(!c)throw new Error("notistack - Custom snackbar is not refForwarding");return c}}]),t}(Rt.Component);function bb(){}kN.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:bb,onEntering:bb,onEntered:bb,onExit:bb,onExiting:bb,onExited:bb};function k2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function cB(e,t){return U.useMemo(function(){return e==null&&t==null?null:function(n){k2(e,n),k2(t,n)}},[e,t])}function gR(e){var t=e.timeout,n=e.style,r=n===void 0?{}:n,s=e.mode;return{duration:typeof t=="object"?t[s]||0:t,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var uB={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},SQ=function(t){t.scrollTop=t.scrollTop},O2=function(t){return Math.round(t)+"ms"};function Bb(e,t){e===void 0&&(e=["all"]);var n=t||{},r=n.duration,s=r===void 0?300:r,c=n.easing,d=c===void 0?uB.easeInOut:c,i=n.delay,m=i===void 0?0:i,x=Array.isArray(e)?e:[e];return x.map(function(T){var C=typeof s=="string"?s:O2(s),A=typeof m=="string"?m:O2(m);return T+" "+C+" "+d+" "+A}).join(",")}function zxe(e){return e&&e.ownerDocument||document}function TQ(e){var t=zxe(e);return t.defaultView||window}function Fxe(e,t){t===void 0&&(t=166);var n;function r(){for(var s=this,c=arguments.length,d=new Array(c),i=0;i<c;i++)d[i]=arguments[i];var m=function(){e.apply(s,d)};clearTimeout(n),n=setTimeout(m,t)}return r.clear=function(){clearTimeout(n)},r}function Bxe(e,t){var n=t.getBoundingClientRect(),r=TQ(t),s;if(t.fakeTransform)s=t.fakeTransform;else{var c=r.getComputedStyle(t);s=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}var d=0,i=0;if(s&&s!=="none"&&typeof s=="string"){var m=s.split("(")[1].split(")")[0].split(",");d=parseInt(m[4],10),i=parseInt(m[5],10)}switch(e){case"left":return"translateX("+(r.innerWidth+d-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-d)+"px)";case"up":return"translateY("+(r.innerHeight+i-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-i)+"px)"}}function xM(e,t){if(t){var n=Bxe(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}}var EQ=U.forwardRef(function(e,t){var n=e.children,r=e.direction,s=r===void 0?"down":r,c=e.in,d=e.style,i=e.timeout,m=i===void 0?0:i,x=e.onEnter,T=e.onEntered,C=e.onExit,A=e.onExited,I=_E(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),k=U.useRef(null),B=cB(n.ref,k),j=cB(B,t),V=function(ce,fe){xM(s,ce),SQ(ce),x&&x(ce,fe)},H=function(ce){var fe=(d==null?void 0:d.transitionTimingFunction)||uB.easeOut,ue=gR({timeout:m,mode:"enter",style:hs({},d,{transitionTimingFunction:fe})});ce.style.webkitTransition=Bb("-webkit-transform",ue),ce.style.transition=Bb("transform",ue),ce.style.webkitTransform="none",ce.style.transform="none"},G=function(ce){var fe=(d==null?void 0:d.transitionTimingFunction)||uB.sharp,ue=gR({timeout:m,mode:"exit",style:hs({},d,{transitionTimingFunction:fe})});ce.style.webkitTransition=Bb("-webkit-transform",ue),ce.style.transition=Bb("transform",ue),xM(s,ce),C&&C(ce)},X=function(ce){ce.style.webkitTransition="",ce.style.transition="",A&&A(ce)},Q=U.useCallback(function(){k.current&&xM(s,k.current)},[s]);return U.useEffect(function(){if(!(c||s==="down"||s==="right")){var ee=Fxe(function(){k.current&&xM(s,k.current)}),ce=TQ(k.current);return ce.addEventListener("resize",ee),function(){ee.clear(),ce.removeEventListener("resize",ee)}}},[s,c]),U.useEffect(function(){c||Q()},[c,Q]),U.createElement(kN,Object.assign({appear:!0,nodeRef:k,onEnter:V,onEntered:T,onEntering:H,onExit:G,onExited:X,in:c,timeout:m},I),function(ee,ce){return U.cloneElement(n,hs({ref:j,style:hs({visibility:ee==="exited"&&!c?"hidden":void 0},d,{},n.props.style)},ce))})});EQ.displayName="Slide";var BD=function(t){return Rt.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},t))},jxe=function(){return Rt.createElement(BD,null,Rt.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},Nxe=function(){return Rt.createElement(BD,null,Rt.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Vxe=function(){return Rt.createElement(BD,null,Rt.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},$xe=function(){return Rt.createElement(BD,null,Rt.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Uxe={default:void 0,success:Rt.createElement(jxe,null),warning:Rt.createElement(Nxe,null),error:Rt.createElement(Vxe,null),info:Rt.createElement($xe,null)},C0={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Uxe,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:EQ,transitionDuration:{enter:225,exit:195}},qxe=function(t,n){var r=function(c){return typeof c=="number"||c===null};return r(t)?t:r(n)?n:C0.autoHideDuration},Hxe=function(t,n){var r=function(c,d){return d.some(function(i){return typeof c===i})};return r(t,["string","number"])?t:r(t,["object"])?hs({},C0.transitionDuration,{},r(n,["object"])&&n,{},t):r(n,["string","number"])?n:r(n,["object"])?hs({},C0.transitionDuration,{},n):C0.transitionDuration},Wxe=function(t,n){return function(r,s){return s===void 0&&(s=!1),s?hs({},C0[r],{},n[r],{},t[r]):r==="autoHideDuration"?qxe(t.autoHideDuration,n.autoHideDuration):r==="transitionDuration"?Hxe(t.transitionDuration,n.transitionDuration):t[r]||n[r]||C0[r]}};function xE(e){return Object.entries(e).reduce(function(t,n){var r,s=n[0],c=n[1];return hs({},t,(r={},r[s]=PN(c),r))},{})}var s1={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(t){return"notistack-MuiContent-"+t}},L2=xE({root:{height:0},entered:{height:"auto"}}),Rk="0px",Dk=175,CQ=U.forwardRef(function(e,t){var n=e.children,r=e.in,s=e.onExited,c=U.useRef(null),d=U.useRef(null),i=cB(t,d),m=function(){return c.current?c.current.clientHeight:0},x=function(B){B.style.height=Rk},T=function(B){var j=m(),V=gR({timeout:Dk,mode:"enter"}),H=V.duration,G=V.easing;B.style.transitionDuration=typeof H=="string"?H:H+"ms",B.style.height=j+"px",B.style.transitionTimingFunction=G||""},C=function(B){B.style.height="auto"},A=function(B){B.style.height=m()+"px"},I=function(B){SQ(B);var j=gR({timeout:Dk,mode:"exit"}),V=j.duration,H=j.easing;B.style.transitionDuration=typeof V=="string"?V:V+"ms",B.style.height=Rk,B.style.transitionTimingFunction=H||""};return U.createElement(kN,{in:r,unmountOnExit:!0,onEnter:x,onEntered:C,onEntering:T,onExit:A,onExited:s,onExiting:I,nodeRef:d,timeout:Dk},function(k,B){return U.createElement("div",Object.assign({ref:i,className:ox(L2.root,k==="entered"&&L2.entered),style:hs({pointerEvents:"all",overflow:"hidden",minHeight:Rk,transition:Bb("height")},k==="entered"&&{overflow:"visible"},{},k==="exited"&&!r&&{visibility:"hidden"})},B),U.createElement("div",{ref:c,className:s1.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});CQ.displayName="Collapse";var z2={right:"left",left:"right",bottom:"up",top:"down"},Gxe=function(t){return t.horizontal!=="center"?z2[t.horizontal]:z2[t.vertical]},Yxe=function(t){return"anchorOrigin"+IN(t)},Xxe=function(t){t===void 0&&(t={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(t).filter(function(r){return!n[r]}).reduce(function(r,s){var c;return hs({},r,(c={},c[s]=t[s],c))},{})},Zxe=function(){};function ZS(e,t){return e.reduce(function(n,r){return r==null?n:function(){for(var c=arguments.length,d=new Array(c),i=0;i<c;i++)d[i]=arguments[i];var m=[].concat(d);t&&m.indexOf(t)===-1&&m.push(t),n.apply(this,m),r.apply(this,m)}},Zxe)}var Kxe=typeof window<"u"?U.useLayoutEffect:U.useEffect;function F2(e){var t=U.useRef(e);return Kxe(function(){t.current=e}),U.useCallback(function(){return t.current.apply(void 0,arguments)},[])}var MQ=U.forwardRef(function(e,t){var n=e.children,r=e.className,s=e.autoHideDuration,c=e.disableWindowBlurListener,d=c===void 0?!1:c,i=e.onClose,m=e.id,x=e.open,T=e.SnackbarProps,C=T===void 0?{}:T,A=U.useRef(),I=F2(function(){i&&i.apply(void 0,arguments)}),k=F2(function(G){!i||G==null||(A.current&&clearTimeout(A.current),A.current=setTimeout(function(){I(null,"timeout",m)},G))});U.useEffect(function(){return x&&k(s),function(){A.current&&clearTimeout(A.current)}},[x,s,k]);var B=function(){A.current&&clearTimeout(A.current)},j=U.useCallback(function(){s!=null&&k(s*.5)},[s,k]),V=function(X){C.onMouseEnter&&C.onMouseEnter(X),B()},H=function(X){C.onMouseLeave&&C.onMouseLeave(X),j()};return U.useEffect(function(){if(!d&&x)return window.addEventListener("focus",j),window.addEventListener("blur",B),function(){window.removeEventListener("focus",j),window.removeEventListener("blur",B)}},[d,j,x]),U.createElement("div",Object.assign({ref:t},C,{className:ox(s1.Snackbar,r),onMouseEnter:V,onMouseLeave:H}),n)});MQ.displayName="Snackbar";var Pk,Qxe=xE({root:(Pk={display:"flex",flexWrap:"wrap",flexGrow:1},Pk[l0.upSm]={flexGrow:"initial",minWidth:"288px"},Pk)}),AQ=U.forwardRef(function(e,t){var n=e.className,r=_E(e,["className"]);return Rt.createElement("div",Object.assign({ref:t,className:ox(Qxe.root,n)},r))});AQ.displayName="SnackbarContent";var cS=xE({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),B2="notistack-snackbar",RQ=U.forwardRef(function(e,t){var n=e.id,r=e.message,s=e.action,c=e.iconVariant,d=e.variant,i=e.hideIconVariant,m=e.style,x=e.className,T=c[d],C=s;return typeof C=="function"&&(C=C(n)),Rt.createElement(AQ,{ref:t,role:"alert","aria-describedby":B2,style:m,className:ox(s1.MuiContent,s1.MuiContentVariant(d),cS.root,cS[d],x,!i&&T&&cS.lessPadding)},Rt.createElement("div",{id:B2,className:cS.message},i?null:T,r),C&&Rt.createElement("div",{className:cS.action},C))});RQ.displayName="MaterialDesignContent";var Jxe=U.memo(RQ),ebe=xE({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),tbe=function(t){var n=U.useRef(),r=U.useState(!0),s=r[0],c=r[1],d=ZS([t.snack.onClose,t.onClose]),i=function(){t.snack.requestClose&&d(null,"instructed",t.snack.id)},m=U.useCallback(function(){n.current=setTimeout(function(){c(function(ue){return!ue})},125)},[]);U.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var x=t.snack,T=t.classes,C=t.Component,A=C===void 0?Jxe:C,I=U.useMemo(function(){return Xxe(T)},[T]),k=x.open,B=x.SnackbarProps,j=x.TransitionComponent,V=x.TransitionProps,H=x.transitionDuration,G=x.disableWindowBlurListener,X=x.content,Q=_E(x,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),ee=hs({direction:Gxe(Q.anchorOrigin),timeout:H},V),ce=X;typeof ce=="function"&&(ce=ce(Q.id,Q.message));var fe=["onEnter","onEntered","onExit","onExited"].reduce(function(ue,ae){var xe;return hs({},ue,(xe={},xe[ae]=ZS([t.snack[ae],t[ae]],Q.id),xe))},{});return Rt.createElement(CQ,{in:s,onExited:fe.onExited},Rt.createElement(MQ,{open:k,id:Q.id,disableWindowBlurListener:G,autoHideDuration:Q.autoHideDuration,className:ox(ebe.wrappedRoot,I.root,I[Yxe(Q.anchorOrigin)]),SnackbarProps:B,onClose:d},Rt.createElement(j,Object.assign({},ee,{appear:!0,in:k,onExit:fe.onExit,onExited:m,onEnter:fe.onEnter,onEntered:ZS([fe.onEntered,i],Q.id)}),ce||Rt.createElement(A,Object.assign({},Q)))))},uS,Ik,bM,wM,kk,Lg={view:{default:20},snackbar:{default:6,dense:2}},j2="."+s1.CollapseWrapper,Ok=16,SM=xE({root:(uS={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Bb(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},uS[j2]={padding:Lg.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},uS.maxWidth="calc(100% - "+Lg.view.default*2+"px)",uS[l0.downXs]={width:"100%",maxWidth:"calc(100% - "+Ok*2+"px)"},uS),rootDense:(Ik={},Ik[j2]={padding:Lg.snackbar.dense+"px 0px"},Ik),top:{top:Lg.view.default-Lg.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Lg.view.default-Lg.snackbar.default+"px",flexDirection:"column-reverse"},left:(bM={left:Lg.view.default+"px"},bM[l0.upSm]={alignItems:"flex-start"},bM[l0.downXs]={left:Ok+"px"},bM),right:(wM={right:Lg.view.default+"px"},wM[l0.upSm]={alignItems:"flex-end"},wM[l0.downXs]={right:Ok+"px"},wM),center:(kk={left:"50%",transform:"translateX(-50%)"},kk[l0.upSm]={alignItems:"center"},kk)}),nbe=function(t){var n=t.classes,r=n===void 0?{}:n,s=t.anchorOrigin,c=t.dense,d=t.children,i=ox(s1.SnackbarContainer,SM[s.vertical],SM[s.horizontal],SM.root,r.containerRoot,r["containerAnchorOrigin"+IN(s)],c&&SM.rootDense);return Rt.createElement("div",{className:i},d)},rbe=U.memo(nbe),N2=function(t){var n=typeof t=="string"||U.isValidElement(t);return!n},jb,ibe=function(e){bQ(t,e);function t(r){var s;return s=e.call(this,r)||this,s.enqueueSnackbar=function(c,d){if(d===void 0&&(d={}),c==null)throw new Error("enqueueSnackbar called with invalid argument");var i=N2(c)?c:d,m=N2(c)?c.message:c,x=i.key,T=i.preventDuplicate,C=_E(i,["key","preventDuplicate"]),A=vM(x),I=A?x:new Date().getTime()+Math.random(),k=Wxe(C,s.props),B=hs({id:I},C,{message:m,open:!0,entered:!1,requestClose:!1,persist:k("persist"),action:k("action"),content:k("content"),variant:k("variant"),anchorOrigin:k("anchorOrigin"),disableWindowBlurListener:k("disableWindowBlurListener"),autoHideDuration:k("autoHideDuration"),hideIconVariant:k("hideIconVariant"),TransitionComponent:k("TransitionComponent"),transitionDuration:k("transitionDuration"),TransitionProps:k("TransitionProps",!0),iconVariant:k("iconVariant",!0),style:k("style",!0),SnackbarProps:k("SnackbarProps",!0),className:ox(s.props.className,C.className)});return B.persist&&(B.autoHideDuration=void 0),s.setState(function(j){if(T===void 0&&s.props.preventDuplicate||T){var V=function(Q){return A?Q.id===I:Q.message===m},H=j.queue.findIndex(V)>-1,G=j.snacks.findIndex(V)>-1;if(H||G)return j}return s.handleDisplaySnack(hs({},j,{queue:[].concat(j.queue,[B])}))}),I},s.handleDisplaySnack=function(c){var d=c.snacks;return d.length>=s.maxSnack?s.handleDismissOldest(c):s.processQueue(c)},s.processQueue=function(c){var d=c.queue,i=c.snacks;return d.length>0?hs({},c,{snacks:[].concat(i,[d[0]]),queue:d.slice(1,d.length)}):c},s.handleDismissOldest=function(c){if(c.snacks.some(function(T){return!T.open||T.requestClose}))return c;var d=!1,i=!1,m=c.snacks.reduce(function(T,C){return T+(C.open&&C.persist?1:0)},0);m===s.maxSnack&&(i=!0);var x=c.snacks.map(function(T){return!d&&(!T.persist||i)?(d=!0,T.entered?(T.onClose&&T.onClose(null,"maxsnack",T.id),s.props.onClose&&s.props.onClose(null,"maxsnack",T.id),hs({},T,{open:!1})):hs({},T,{requestClose:!0})):hs({},T)});return hs({},c,{snacks:x})},s.handleEnteredSnack=function(c,d,i){if(!vM(i))throw new Error("handleEnteredSnack Cannot be called with undefined key");s.setState(function(m){var x=m.snacks;return{snacks:x.map(function(T){return T.id===i?hs({},T,{entered:!0}):hs({},T)})}})},s.handleCloseSnack=function(c,d,i){s.props.onClose&&s.props.onClose(c,d,i);var m=i===void 0;s.setState(function(x){var T=x.snacks,C=x.queue;return{snacks:T.map(function(A){return!m&&A.id!==i?hs({},A):A.entered?hs({},A,{open:!1}):hs({},A,{requestClose:!0})}),queue:C.filter(function(A){return A.id!==i})}})},s.closeSnackbar=function(c){var d=s.state.snacks.find(function(i){return i.id===c});vM(c)&&d&&d.onClose&&d.onClose(null,"instructed",c),s.handleCloseSnack(null,"instructed",c)},s.handleExitedSnack=function(c,d){if(!vM(d))throw new Error("handleExitedSnack Cannot be called with undefined key");s.setState(function(i){var m=s.processQueue(hs({},i,{snacks:i.snacks.filter(function(x){return x.id!==d})}));return m.queue.length===0?m:s.handleDismissOldest(m)})},jb=s.enqueueSnackbar,s.closeSnackbar,s.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:s.enqueueSnackbar.bind(R2(s)),closeSnackbar:s.closeSnackbar.bind(R2(s))}},s}var n=t.prototype;return n.render=function(){var s=this,c=this.state.contextValue,d=this.props,i=d.domRoot,m=d.children,x=d.dense,T=x===void 0?!1:x,C=d.Components,A=C===void 0?{}:C,I=d.classes,k=this.state.snacks.reduce(function(j,V){var H,G=IN(V.anchorOrigin),X=j[G]||[];return hs({},j,(H={},H[G]=[].concat(X,[V]),H))},{}),B=Object.keys(k).map(function(j){var V=k[j],H=V[0];return Rt.createElement(rbe,{key:j,dense:T,anchorOrigin:H.anchorOrigin,classes:I},V.map(function(G){return Rt.createElement(tbe,{key:G.id,snack:G,classes:I,Component:A[G.variant],onClose:s.handleCloseSnack,onEnter:s.props.onEnter,onExit:s.props.onExit,onExited:ZS([s.handleExitedSnack,s.props.onExited],G.id),onEntered:ZS([s.handleEnteredSnack,s.props.onEntered],G.id)})}))});return Rt.createElement(wQ.Provider,{value:c},m,i?lD.createPortal(B,i):B)},xQ(t,[{key:"maxSnack",get:function(){return this.props.maxSnack||C0.maxSnack}}]),t}(U.Component),k1=function(){return U.useContext(wQ)};function V2(...e){return e.reduce((t,n)=>n==null?t:function(...s){t.apply(this,s),n.apply(this,s)},()=>{})}function obe(e){return fr("MuiSvgIcon",e)}pr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const sbe=e=>{const{color:t,fontSize:n,classes:r}=e,s={root:["root",t!=="inherit"&&`color${Dn(t)}`,`fontSize${Dn(n)}`]};return dr(s,obe,r)},abe=Ft("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Dn(n.color)}`],t[`fontSize${Dn(n.fontSize)}`]]}})(Xr(({theme:e})=>{var t,n,r,s,c,d,i,m,x,T,C,A,I,k;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(t=e.transitions)==null?void 0:t.create)==null?void 0:s.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:B=>!B.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((d=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:d.call(c,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((m=(i=e.typography)==null?void 0:i.pxToRem)==null?void 0:m.call(i,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((T=(x=e.typography)==null?void 0:x.pxToRem)==null?void 0:T.call(x,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,B])=>B&&B.main).map(([B])=>{var j,V;return{props:{color:B},style:{color:(V=(j=(e.vars??e).palette)==null?void 0:j[B])==null?void 0:V.main}}}),{props:{color:"action"},style:{color:(A=(C=(e.vars??e).palette)==null?void 0:C.action)==null?void 0:A.active}},{props:{color:"disabled"},style:{color:(k=(I=(e.vars??e).palette)==null?void 0:I.action)==null?void 0:k.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),dB=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiSvgIcon"}),{children:s,className:c,color:d="inherit",component:i="svg",fontSize:m="medium",htmlColor:x,inheritViewBox:T=!1,titleAccess:C,viewBox:A="0 0 24 24",...I}=r,k=U.isValidElement(s)&&s.type==="svg",B={...r,color:d,component:i,fontSize:m,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:A,hasSvgAsChild:k},j={};T||(j.viewBox=A);const V=sbe(B);return z.jsxs(abe,{as:i,className:$n(V.root,c),focusable:"false",color:x,"aria-hidden":C?void 0:!0,role:C?"img":void 0,ref:n,...j,...I,...k&&s.props,ownerState:B,children:[k?s.props.children:s,C?z.jsx("title",{children:C}):null]})});dB.muiName="SvgIcon";function Gi(e,t){function n(r,s){return z.jsx(dB,{"data-testid":void 0,ref:s,...r,children:e})}return n.muiName=dB.muiName,U.memo(U.forwardRef(n))}function bE(e,t=166){let n;function r(...s){const c=()=>{e.apply(this,s)};clearTimeout(n),n=setTimeout(c,t)}return r.clear=()=>{clearTimeout(n)},r}function qa(e){return e&&e.ownerDocument||document}function xd(e){return qa(e).defaultView||window}function $2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let U2=0;function lbe(e){const[t,n]=U.useState(e),r=e||t;return U.useEffect(()=>{t==null&&(U2+=1,n(`mui-${U2}`))},[t]),r}const cbe={...eR},q2=cbe.useId;function kh(e){if(q2!==void 0){const t=q2();return e??t}return lbe(e)}function Xf(e){const{controlled:t,default:n,name:r,state:s="value"}=e,{current:c}=U.useRef(t!==void 0),[d,i]=U.useState(n),m=c?t:d,x=U.useCallback(T=>{c||i(T)},[]);return[m,x]}function Er(e){const t=U.useRef(e);return Qs(()=>{t.current=e}),U.useRef((...n)=>(0,t.current)(...n)).current}function ube(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function ON(e,t){if(!e)return t;function n(d,i){const m={};return Object.keys(i).forEach(x=>{ube(x,i[x])&&typeof d[x]=="function"&&(m[x]=(...T)=>{d[x](...T),i[x](...T)})}),m}if(typeof e=="function"||typeof t=="function")return d=>{const i=typeof t=="function"?t(d):t,m=typeof e=="function"?e({...d,...i}):e,x=$n(d==null?void 0:d.className,i==null?void 0:i.className,m==null?void 0:m.className),T=n(m,i);return{...i,...m,...T,...!!x&&{className:x},...(i==null?void 0:i.style)&&(m==null?void 0:m.style)&&{style:{...i.style,...m.style}},...(i==null?void 0:i.sx)&&(m==null?void 0:m.sx)&&{sx:[...Array.isArray(i.sx)?i.sx:[i.sx],...Array.isArray(m.sx)?m.sx:[m.sx]]}}};const r=t,s=n(e,r),c=$n(r==null?void 0:r.className,e==null?void 0:e.className);return{...t,...e,...s,...!!c&&{className:c},...(r==null?void 0:r.style)&&(e==null?void 0:e.style)&&{style:{...r.style,...e.style}},...(r==null?void 0:r.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function xi(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yR(e,t){return yR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},yR(e,t)}function jD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yR(e,t)}function dbe(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function DQ(e,t){e.classList?e.classList.add(t):dbe(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function H2(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function PQ(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=H2(e.className,t):e.setAttribute("class",H2(e.className&&e.className.baseVal||"",t))}const W2={disabled:!1},vR=Rt.createContext(null);var IQ=function(t){return t.scrollTop},zS="unmounted",c0="exited",u0="entering",Ib="entered",hB="exiting",Iu=function(e){jD(t,e);function t(r,s){var c;c=e.call(this,r,s)||this;var d=s,i=d&&!d.isMounting?r.enter:r.appear,m;return c.appearStatus=null,r.in?i?(m=c0,c.appearStatus=u0):m=Ib:r.unmountOnExit||r.mountOnEnter?m=zS:m=c0,c.state={status:m},c.nextCallback=null,c}t.getDerivedStateFromProps=function(s,c){var d=s.in;return d&&c.status===zS?{status:c0}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var c=null;if(s!==this.props){var d=this.state.status;this.props.in?d!==u0&&d!==Ib&&(c=u0):(d===u0||d===Ib)&&(c=hB)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,c,d,i;return c=d=i=s,s!=null&&typeof s!="number"&&(c=s.exit,d=s.enter,i=s.appear!==void 0?s.appear:d),{exit:c,enter:d,appear:i}},n.updateStatus=function(s,c){if(s===void 0&&(s=!1),c!==null)if(this.cancelNextCallback(),c===u0){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:zb.findDOMNode(this);d&&IQ(d)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===c0&&this.setState({status:zS})},n.performEnter=function(s){var c=this,d=this.props.enter,i=this.context?this.context.isMounting:s,m=this.props.nodeRef?[i]:[zb.findDOMNode(this),i],x=m[0],T=m[1],C=this.getTimeouts(),A=i?C.appear:C.enter;if(!s&&!d||W2.disabled){this.safeSetState({status:Ib},function(){c.props.onEntered(x)});return}this.props.onEnter(x,T),this.safeSetState({status:u0},function(){c.props.onEntering(x,T),c.onTransitionEnd(A,function(){c.safeSetState({status:Ib},function(){c.props.onEntered(x,T)})})})},n.performExit=function(){var s=this,c=this.props.exit,d=this.getTimeouts(),i=this.props.nodeRef?void 0:zb.findDOMNode(this);if(!c||W2.disabled){this.safeSetState({status:c0},function(){s.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:hB},function(){s.props.onExiting(i),s.onTransitionEnd(d.exit,function(){s.safeSetState({status:c0},function(){s.props.onExited(i)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,c){c=this.setNextCallback(c),this.setState(s,c)},n.setNextCallback=function(s){var c=this,d=!0;return this.nextCallback=function(i){d&&(d=!1,c.nextCallback=null,s(i))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(s,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:zb.findDOMNode(this),i=s==null&&!this.props.addEndListener;if(!d||i){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],x=m[0],T=m[1];this.props.addEndListener(x,T)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===zS)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var i=xi(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Rt.createElement(vR.Provider,{value:null},typeof d=="function"?d(s,i):Rt.cloneElement(Rt.Children.only(d),i))},t}(Rt.Component);Iu.contextType=vR;Iu.propTypes={};function wb(){}Iu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wb,onEntering:wb,onEntered:wb,onExit:wb,onExiting:wb,onExited:wb};Iu.UNMOUNTED=zS;Iu.EXITED=c0;Iu.ENTERING=u0;Iu.ENTERED=Ib;Iu.EXITING=hB;var hbe=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return DQ(t,r)})},Lk=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return PQ(t,r)})},LN=function(e){jD(t,e);function t(){for(var r,s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return r=e.call.apply(e,[this].concat(c))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(i,m){var x=r.resolveArguments(i,m),T=x[0],C=x[1];r.removeClasses(T,"exit"),r.addClass(T,C?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(i,m)},r.onEntering=function(i,m){var x=r.resolveArguments(i,m),T=x[0],C=x[1],A=C?"appear":"enter";r.addClass(T,A,"active"),r.props.onEntering&&r.props.onEntering(i,m)},r.onEntered=function(i,m){var x=r.resolveArguments(i,m),T=x[0],C=x[1],A=C?"appear":"enter";r.removeClasses(T,A),r.addClass(T,A,"done"),r.props.onEntered&&r.props.onEntered(i,m)},r.onExit=function(i){var m=r.resolveArguments(i),x=m[0];r.removeClasses(x,"appear"),r.removeClasses(x,"enter"),r.addClass(x,"exit","base"),r.props.onExit&&r.props.onExit(i)},r.onExiting=function(i){var m=r.resolveArguments(i),x=m[0];r.addClass(x,"exit","active"),r.props.onExiting&&r.props.onExiting(i)},r.onExited=function(i){var m=r.resolveArguments(i),x=m[0];r.removeClasses(x,"exit"),r.addClass(x,"exit","done"),r.props.onExited&&r.props.onExited(i)},r.resolveArguments=function(i,m){return r.props.nodeRef?[r.props.nodeRef.current,i]:[i,m]},r.getClassNames=function(i){var m=r.props.classNames,x=typeof m=="string",T=x&&m?m+"-":"",C=x?""+T+i:m[i],A=x?C+"-active":m[i+"Active"],I=x?C+"-done":m[i+"Done"];return{baseClassName:C,activeClassName:A,doneClassName:I}},r}var n=t.prototype;return n.addClass=function(s,c,d){var i=this.getClassNames(c)[d+"ClassName"],m=this.getClassNames("enter"),x=m.doneClassName;c==="appear"&&d==="done"&&x&&(i+=" "+x),d==="active"&&s&&IQ(s),i&&(this.appliedClasses[c][d]=i,hbe(s,i))},n.removeClasses=function(s,c){var d=this.appliedClasses[c],i=d.base,m=d.active,x=d.done;this.appliedClasses[c]={},i&&Lk(s,i),m&&Lk(s,m),x&&Lk(s,x)},n.render=function(){var s=this.props;s.classNames;var c=xi(s,["classNames"]);return Rt.createElement(Iu,Pt({},c,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Rt.Component);LN.defaultProps={classNames:""};LN.propTypes={};function kQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zN(e,t){var n=function(c){return t&&U.isValidElement(c)?t(c):c},r=Object.create(null);return e&&U.Children.map(e,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function fbe(e,t){e=e||{},t=t||{};function n(T){return T in t?t[T]:e[T]}var r=Object.create(null),s=[];for(var c in e)c in t?s.length&&(r[c]=s,s=[]):s.push(c);var d,i={};for(var m in t){if(r[m])for(d=0;d<r[m].length;d++){var x=r[m][d];i[r[m][d]]=n(x)}i[m]=n(m)}for(d=0;d<s.length;d++)i[s[d]]=n(s[d]);return i}function x0(e,t,n){return n[t]!=null?n[t]:e.props[t]}function pbe(e,t){return zN(e.children,function(n){return U.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:x0(n,"appear",e),enter:x0(n,"enter",e),exit:x0(n,"exit",e)})})}function mbe(e,t,n){var r=zN(e.children),s=fbe(t,r);return Object.keys(s).forEach(function(c){var d=s[c];if(U.isValidElement(d)){var i=c in t,m=c in r,x=t[c],T=U.isValidElement(x)&&!x.props.in;m&&(!i||T)?s[c]=U.cloneElement(d,{onExited:n.bind(null,d),in:!0,exit:x0(d,"exit",e),enter:x0(d,"enter",e)}):!m&&i&&!T?s[c]=U.cloneElement(d,{in:!1}):m&&i&&U.isValidElement(x)&&(s[c]=U.cloneElement(d,{onExited:n.bind(null,d),in:x.props.in,exit:x0(d,"exit",e),enter:x0(d,"enter",e)}))}}),s}var gbe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},ybe={component:"div",childFactory:function(t){return t}},wE=function(e){jD(t,e);function t(r,s){var c;c=e.call(this,r,s)||this;var d=c.handleExited.bind(kQ(c));return c.state={contextValue:{isMounting:!0},handleExited:d,firstRender:!0},c}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,c){var d=c.children,i=c.handleExited,m=c.firstRender;return{children:m?pbe(s,i):mbe(s,d,i),firstRender:!1}},n.handleExited=function(s,c){var d=zN(this.props.children);s.key in d||(s.props.onExited&&s.props.onExited(c),this.mounted&&this.setState(function(i){var m=Pt({},i.children);return delete m[s.key],{children:m}}))},n.render=function(){var s=this.props,c=s.component,d=s.childFactory,i=xi(s,["component","childFactory"]),m=this.state.contextValue,x=gbe(this.state.children).map(d);return delete i.appear,delete i.enter,delete i.exit,c===null?Rt.createElement(vR.Provider,{value:m},x):Rt.createElement(vR.Provider,{value:m},Rt.createElement(c,i,x))},t}(Rt.Component);wE.propTypes={};wE.defaultProps=ybe;const G2={};function OQ(e,t){const n=U.useRef(G2);return n.current===G2&&(n.current=e(t)),n}const vbe=[];function _be(e){U.useEffect(e,vbe)}class ND{constructor(){Or(this,"currentId",null);Or(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Or(this,"disposeEffect",()=>this.clear)}static create(){return new ND}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function md(){const e=OQ(ND.create).current;return _be(e.disposeEffect),e}const VD=e=>e.scrollTop;function pm(e,t){const{timeout:n,easing:r,style:s={}}=e;return{duration:s.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:s.transitionDelay}}function xbe(e){return fr("MuiCollapse",e)}pr("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const bbe=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return dr(r,xbe,n)},wbe=Ft("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(Xr(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Sbe=Ft("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Tbe=Ft("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),_R=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCollapse"}),{addEndListener:s,children:c,className:d,collapsedSize:i="0px",component:m,easing:x,in:T,onEnter:C,onEntered:A,onEntering:I,onExit:k,onExited:B,onExiting:j,orientation:V="vertical",style:H,timeout:G=KZ.standard,TransitionComponent:X=Iu,...Q}=r,ee={...r,orientation:V,collapsedSize:i},ce=bbe(ee),fe=Zo(),ue=md(),ae=U.useRef(null),xe=U.useRef(),we=typeof i=="number"?`${i}px`:i,Me=V==="horizontal",Se=Me?"width":"height",Ae=U.useRef(null),_e=wo(n,Ae),Pe=ot=>st=>{if(ot){const St=Ae.current;st===void 0?ot(St):ot(St,st)}},We=()=>ae.current?ae.current[Me?"clientWidth":"clientHeight"]:0,Fe=Pe((ot,st)=>{ae.current&&Me&&(ae.current.style.position="absolute"),ot.style[Se]=we,C&&C(ot,st)}),Ce=Pe((ot,st)=>{const St=We();ae.current&&Me&&(ae.current.style.position="");const{duration:Dt,easing:Et}=pm({style:H,timeout:G,easing:x},{mode:"enter"});if(G==="auto"){const yt=fe.transitions.getAutoHeightDuration(St);ot.style.transitionDuration=`${yt}ms`,xe.current=yt}else ot.style.transitionDuration=typeof Dt=="string"?Dt:`${Dt}ms`;ot.style[Se]=`${St}px`,ot.style.transitionTimingFunction=Et,I&&I(ot,st)}),He=Pe((ot,st)=>{ot.style[Se]="auto",A&&A(ot,st)}),dt=Pe(ot=>{ot.style[Se]=`${We()}px`,k&&k(ot)}),gt=Pe(B),Nt=Pe(ot=>{const st=We(),{duration:St,easing:Dt}=pm({style:H,timeout:G,easing:x},{mode:"exit"});if(G==="auto"){const Et=fe.transitions.getAutoHeightDuration(st);ot.style.transitionDuration=`${Et}ms`,xe.current=Et}else ot.style.transitionDuration=typeof St=="string"?St:`${St}ms`;ot.style[Se]=we,ot.style.transitionTimingFunction=Dt,j&&j(ot)}),wt=ot=>{G==="auto"&&ue.start(xe.current||0,ot),s&&s(Ae.current,ot)};return z.jsx(X,{in:T,onEnter:Fe,onEntered:He,onEntering:Ce,onExit:dt,onExited:gt,onExiting:Nt,addEndListener:wt,nodeRef:Ae,timeout:G==="auto"?null:G,...Q,children:(ot,{ownerState:st,...St})=>z.jsx(wbe,{as:m,className:$n(ce.root,d,{entered:ce.entered,exited:!T&&we==="0px"&&ce.hidden}[ot]),style:{[Me?"minWidth":"minHeight"]:we,...H},ref:_e,ownerState:{...ee,state:ot},...St,children:z.jsx(Sbe,{ownerState:{...ee,state:ot},className:ce.wrapper,ref:ae,children:z.jsx(Tbe,{ownerState:{...ee,state:ot},className:ce.wrapperInner,children:c})})})})});_R&&(_R.muiSupportAuto=!0);const LQ=rt.oneOfType([rt.func,rt.object]);function a1(e){try{return e.matches(":focus-visible")}catch{}return!1}class xR{constructor(){Or(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new xR}static use(){const t=OQ(xR.create).current,[n,r]=U.useState(!1);return t.shouldMount=n,t.setShouldMount=r,U.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=Cbe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function Ebe(){return xR.use()}function Cbe(){let e,t;const n=new Promise((r,s)=>{e=r,t=s});return n.resolve=e,n.reject=t,n}function Mbe(e){const{className:t,classes:n,pulsate:r=!1,rippleX:s,rippleY:c,rippleSize:d,in:i,onExited:m,timeout:x}=e,[T,C]=U.useState(!1),A=$n(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),I={width:d,height:d,top:-(d/2)+c,left:-(d/2)+s},k=$n(n.child,T&&n.childLeaving,r&&n.childPulsate);return!i&&!T&&C(!0),U.useEffect(()=>{if(!i&&m!=null){const B=setTimeout(m,x);return()=>{clearTimeout(B)}}},[m,i,x]),z.jsx("span",{className:A,style:I,children:z.jsx("span",{className:k})})}const _h=pr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),fB=550,Abe=80,Rbe=wv`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Dbe=wv`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Pbe=wv`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Ibe=Ft("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),kbe=Ft(Mbe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${_h.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Rbe};
    animation-duration: ${fB}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${_h.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${_h.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${_h.childLeaving} {
    opacity: 0;
    animation-name: ${Dbe};
    animation-duration: ${fB}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${_h.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Pbe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Obe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:c={},className:d,...i}=r,[m,x]=U.useState([]),T=U.useRef(0),C=U.useRef(null);U.useEffect(()=>{C.current&&(C.current(),C.current=null)},[m]);const A=U.useRef(!1),I=md(),k=U.useRef(null),B=U.useRef(null),j=U.useCallback(X=>{const{pulsate:Q,rippleX:ee,rippleY:ce,rippleSize:fe,cb:ue}=X;x(ae=>[...ae,z.jsx(kbe,{classes:{ripple:$n(c.ripple,_h.ripple),rippleVisible:$n(c.rippleVisible,_h.rippleVisible),ripplePulsate:$n(c.ripplePulsate,_h.ripplePulsate),child:$n(c.child,_h.child),childLeaving:$n(c.childLeaving,_h.childLeaving),childPulsate:$n(c.childPulsate,_h.childPulsate)},timeout:fB,pulsate:Q,rippleX:ee,rippleY:ce,rippleSize:fe},T.current)]),T.current+=1,C.current=ue},[c]),V=U.useCallback((X={},Q={},ee=()=>{})=>{const{pulsate:ce=!1,center:fe=s||Q.pulsate,fakeElement:ue=!1}=Q;if((X==null?void 0:X.type)==="mousedown"&&A.current){A.current=!1;return}(X==null?void 0:X.type)==="touchstart"&&(A.current=!0);const ae=ue?null:B.current,xe=ae?ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let we,Me,Se;if(fe||X===void 0||X.clientX===0&&X.clientY===0||!X.clientX&&!X.touches)we=Math.round(xe.width/2),Me=Math.round(xe.height/2);else{const{clientX:Ae,clientY:_e}=X.touches&&X.touches.length>0?X.touches[0]:X;we=Math.round(Ae-xe.left),Me=Math.round(_e-xe.top)}if(fe)Se=Math.sqrt((2*xe.width**2+xe.height**2)/3),Se%2===0&&(Se+=1);else{const Ae=Math.max(Math.abs((ae?ae.clientWidth:0)-we),we)*2+2,_e=Math.max(Math.abs((ae?ae.clientHeight:0)-Me),Me)*2+2;Se=Math.sqrt(Ae**2+_e**2)}X!=null&&X.touches?k.current===null&&(k.current=()=>{j({pulsate:ce,rippleX:we,rippleY:Me,rippleSize:Se,cb:ee})},I.start(Abe,()=>{k.current&&(k.current(),k.current=null)})):j({pulsate:ce,rippleX:we,rippleY:Me,rippleSize:Se,cb:ee})},[s,j,I]),H=U.useCallback(()=>{V({},{pulsate:!0})},[V]),G=U.useCallback((X,Q)=>{if(I.clear(),(X==null?void 0:X.type)==="touchend"&&k.current){k.current(),k.current=null,I.start(0,()=>{G(X,Q)});return}k.current=null,x(ee=>ee.length>0?ee.slice(1):ee),C.current=Q},[I]);return U.useImperativeHandle(n,()=>({pulsate:H,start:V,stop:G}),[H,V,G]),z.jsx(Ibe,{className:$n(_h.root,c.root,d),ref:B,...i,children:z.jsx(wE,{component:null,exit:!0,children:m})})});function Lbe(e){return fr("MuiButtonBase",e)}const zbe=pr("MuiButtonBase",["root","disabled","focusVisible"]),Fbe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:s}=e,d=dr({root:["root",t&&"disabled",n&&"focusVisible"]},Lbe,s);return n&&r&&(d.root+=` ${r}`),d},Bbe=Ft("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${zbe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),bd=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:c=!1,children:d,className:i,component:m="button",disabled:x=!1,disableRipple:T=!1,disableTouchRipple:C=!1,focusRipple:A=!1,focusVisibleClassName:I,LinkComponent:k="a",onBlur:B,onClick:j,onContextMenu:V,onDragLeave:H,onFocus:G,onFocusVisible:X,onKeyDown:Q,onKeyUp:ee,onMouseDown:ce,onMouseLeave:fe,onMouseUp:ue,onTouchEnd:ae,onTouchMove:xe,onTouchStart:we,tabIndex:Me=0,TouchRippleProps:Se,touchRippleRef:Ae,type:_e,...Pe}=r,We=U.useRef(null),Fe=Ebe(),Ce=wo(Fe.ref,Ae),[He,dt]=U.useState(!1);x&&He&&dt(!1),U.useImperativeHandle(s,()=>({focusVisible:()=>{dt(!0),We.current.focus()}}),[]);const gt=Fe.shouldMount&&!T&&!x;U.useEffect(()=>{He&&A&&!T&&Fe.pulsate()},[T,A,He,Fe]);const Nt=zg(Fe,"start",ce,C),wt=zg(Fe,"stop",V,C),ot=zg(Fe,"stop",H,C),st=zg(Fe,"stop",ue,C),St=zg(Fe,"stop",ft=>{He&&ft.preventDefault(),fe&&fe(ft)},C),Dt=zg(Fe,"start",we,C),Et=zg(Fe,"stop",ae,C),yt=zg(Fe,"stop",xe,C),Lt=zg(Fe,"stop",ft=>{a1(ft.target)||dt(!1),B&&B(ft)},!1),Ct=Er(ft=>{We.current||(We.current=ft.currentTarget),a1(ft.target)&&(dt(!0),X&&X(ft)),G&&G(ft)}),Wt=()=>{const ft=We.current;return m&&m!=="button"&&!(ft.tagName==="A"&&ft.href)},fn=Er(ft=>{A&&!ft.repeat&&He&&ft.key===" "&&Fe.stop(ft,()=>{Fe.start(ft)}),ft.target===ft.currentTarget&&Wt()&&ft.key===" "&&ft.preventDefault(),Q&&Q(ft),ft.target===ft.currentTarget&&Wt()&&ft.key==="Enter"&&!x&&(ft.preventDefault(),j&&j(ft))}),Zt=Er(ft=>{A&&ft.key===" "&&He&&!ft.defaultPrevented&&Fe.stop(ft,()=>{Fe.pulsate(ft)}),ee&&ee(ft),j&&ft.target===ft.currentTarget&&Wt()&&ft.key===" "&&!ft.defaultPrevented&&j(ft)});let Ut=m;Ut==="button"&&(Pe.href||Pe.to)&&(Ut=k);const kn={};Ut==="button"?(kn.type=_e===void 0?"button":_e,kn.disabled=x):(!Pe.href&&!Pe.to&&(kn.role="button"),x&&(kn["aria-disabled"]=x));const Bn=wo(n,We),bn={...r,centerRipple:c,component:m,disabled:x,disableRipple:T,disableTouchRipple:C,focusRipple:A,tabIndex:Me,focusVisible:He},Nn=Fbe(bn);return z.jsxs(Bbe,{as:Ut,className:$n(Nn.root,i),ownerState:bn,onBlur:Lt,onClick:j,onContextMenu:wt,onFocus:Ct,onKeyDown:fn,onKeyUp:Zt,onMouseDown:Nt,onMouseLeave:St,onMouseUp:st,onDragLeave:ot,onTouchEnd:Et,onTouchMove:yt,onTouchStart:Dt,ref:Bn,tabIndex:x?-1:Me,type:_e,...kn,...Pe,children:[d,gt?z.jsx(Obe,{ref:Ce,center:c,...Se}):null]})});function zg(e,t,n,r=!1){return Er(s=>(n&&n(s),r||e[t](s),!0))}function jbe(e){return fr("MuiAlert",e)}const Y2=pr("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function Nbe(e){return fr("MuiCircularProgress",e)}pr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Qy=44,pB=wv`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,mB=wv`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Vbe=typeof pB!="string"?A1`
        animation: ${pB} 1.4s linear infinite;
      `:null,$be=typeof mB!="string"?A1`
        animation: ${mB} 1.4s ease-in-out infinite;
      `:null,Ube=e=>{const{classes:t,variant:n,color:r,disableShrink:s}=e,c={root:["root",n,`color${Dn(r)}`],svg:["svg"],circle:["circle",`circle${Dn(n)}`,s&&"circleDisableShrink"]};return dr(c,Nbe,t)},qbe=Ft("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Dn(n.color)}`]]}})(Xr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Vbe||{animation:`${pB} 1.4s linear infinite`}},...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Hbe=Ft("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Wbe=Ft("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Dn(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Xr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:$be||{animation:`${mB} 1.4s ease-in-out infinite`}}]}))),wT=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCircularProgress"}),{className:s,color:c="primary",disableShrink:d=!1,size:i=40,style:m,thickness:x=3.6,value:T=0,variant:C="indeterminate",...A}=r,I={...r,color:c,disableShrink:d,size:i,thickness:x,value:T,variant:C},k=Ube(I),B={},j={},V={};if(C==="determinate"){const H=2*Math.PI*((Qy-x)/2);B.strokeDasharray=H.toFixed(3),V["aria-valuenow"]=Math.round(T),B.strokeDashoffset=`${((100-T)/100*H).toFixed(3)}px`,j.transform="rotate(-90deg)"}return z.jsx(qbe,{className:$n(k.root,s),style:{width:i,height:i,...j,...m},ownerState:I,ref:n,role:"progressbar",...V,...A,children:z.jsx(Hbe,{className:k.svg,ownerState:I,viewBox:`${Qy/2} ${Qy/2} ${Qy} ${Qy}`,children:z.jsx(Wbe,{className:k.circle,style:B,ownerState:I,cx:Qy,cy:Qy,r:(Qy-x)/2,fill:"none",strokeWidth:x})})})});function Gbe(e){return fr("MuiIconButton",e)}const X2=pr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Ybe=e=>{const{classes:t,disabled:n,color:r,edge:s,size:c,loading:d}=e,i={root:["root",d&&"loading",n&&"disabled",r!=="default"&&`color${Dn(r)}`,s&&`edge${Dn(s)}`,`size${Dn(c)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return dr(i,Gbe,t)},Xbe=Ft(bd,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Dn(n.color)}`],n.edge&&t[`edge${Dn(n.edge)}`],t[`size${Dn(n.size)}`]]}})(Xr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Xr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ei((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${X2.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${X2.loading}`]:{color:"transparent"}}))),Zbe=Ft("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Kc=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiIconButton"}),{edge:s=!1,children:c,className:d,color:i="default",disabled:m=!1,disableFocusRipple:x=!1,size:T="medium",id:C,loading:A=null,loadingIndicator:I,...k}=r,B=kh(C),j=I??z.jsx(wT,{"aria-labelledby":B,color:"inherit",size:16}),V={...r,edge:s,color:i,disabled:m,disableFocusRipple:x,loading:A,loadingIndicator:j,size:T},H=Ybe(V);return z.jsxs(Xbe,{id:A?B:C,className:$n(H.root,d),centerRipple:!0,focusRipple:!x,disabled:m||A,ref:n,...k,ownerState:V,children:[typeof A=="boolean"&&z.jsx("span",{className:H.loadingWrapper,style:{display:"contents"},children:z.jsx(Zbe,{className:H.loadingIndicator,ownerState:V,children:A&&j})}),c]})}),Kbe=Gi(z.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Qbe=Gi(z.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Jbe=Gi(z.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),e1e=Gi(z.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),t1e=Gi(z.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),n1e=e=>{const{variant:t,color:n,severity:r,classes:s}=e,c={root:["root",`color${Dn(n||r)}`,`${t}${Dn(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return dr(c,jbe,s)},r1e=Ft(fa,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Dn(n.color||n.severity)}`]]}})(Xr(({theme:e})=>{const t=e.palette.mode==="light"?I0:k0,n=e.palette.mode==="light"?k0:I0;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(vs(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:n(e.palette[r].light,.9),[`& .${Y2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(vs(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${Y2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(vs(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${r}FilledColor`],backgroundColor:e.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[r].dark:e.palette[r].main,color:e.palette.getContrastText(e.palette[r].main)}}}))]}})),i1e=Ft("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),o1e=Ft("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),s1e=Ft("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Z2={success:z.jsx(Kbe,{fontSize:"inherit"}),warning:z.jsx(Qbe,{fontSize:"inherit"}),error:z.jsx(Jbe,{fontSize:"inherit"}),info:z.jsx(e1e,{fontSize:"inherit"})},zk=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiAlert"}),{action:s,children:c,className:d,closeText:i="Close",color:m,components:x={},componentsProps:T={},icon:C,iconMapping:A=Z2,onClose:I,role:k="alert",severity:B="success",slotProps:j={},slots:V={},variant:H="standard",...G}=r,X={...r,color:m,severity:B,variant:H,colorSeverity:m||B},Q=n1e(X),ee={slots:{closeButton:x.CloseButton,closeIcon:x.CloseIcon,...V},slotProps:{...T,...j}},[ce,fe]=Ur("root",{ref:n,shouldForwardComponentProp:!0,className:$n(Q.root,d),elementType:r1e,externalForwardedProps:{...ee,...G},ownerState:X,additionalProps:{role:k,elevation:0}}),[ue,ae]=Ur("icon",{className:Q.icon,elementType:i1e,externalForwardedProps:ee,ownerState:X}),[xe,we]=Ur("message",{className:Q.message,elementType:o1e,externalForwardedProps:ee,ownerState:X}),[Me,Se]=Ur("action",{className:Q.action,elementType:s1e,externalForwardedProps:ee,ownerState:X}),[Ae,_e]=Ur("closeButton",{elementType:Kc,externalForwardedProps:ee,ownerState:X}),[Pe,We]=Ur("closeIcon",{elementType:t1e,externalForwardedProps:ee,ownerState:X});return z.jsxs(ce,{...fe,children:[C!==!1?z.jsx(ue,{...ae,children:C||A[B]||Z2[B]}):null,z.jsx(xe,{...we,children:c}),s!=null?z.jsx(Me,{...Se,children:s}):null,s==null&&I?z.jsx(Me,{...Se,children:z.jsx(Ae,{size:"small","aria-label":i,title:i,color:"inherit",onClick:I,..._e,children:z.jsx(Pe,{fontSize:"small",...We})})}):null]})});function a1e(e){return fr("MuiAppBar",e)}pr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const l1e=e=>{const{color:t,position:n,classes:r}=e,s={root:["root",`color${Dn(t)}`,`position${Dn(n)}`]};return dr(s,a1e,r)},K2=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,c1e=Ft(fa,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Dn(n.position)}`],t[`color${Dn(n.color)}`]]}})(Xr(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(vs(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?K2(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?K2(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),u1e=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiAppBar"}),{className:s,color:c="primary",enableColorOnDark:d=!1,position:i="fixed",...m}=r,x={...r,color:c,position:i,enableColorOnDark:d},T=l1e(x);return z.jsx(c1e,{square:!0,component:"header",ownerState:x,elevation:4,className:$n(T.root,s,i==="fixed"&&"mui-fixed"),ref:n,...m})});var Mu="top",Oh="bottom",Lh="right",Au="left",FN="auto",SE=[Mu,Oh,Lh,Au],l1="start",ST="end",d1e="clippingParents",zQ="viewport",dS="popper",h1e="reference",Q2=SE.reduce(function(e,t){return e.concat([t+"-"+l1,t+"-"+ST])},[]),BN=[].concat(SE,[FN]).reduce(function(e,t){return e.concat([t,t+"-"+l1,t+"-"+ST])},[]),f1e="beforeRead",p1e="read",m1e="afterRead",g1e="beforeMain",y1e="main",v1e="afterMain",_1e="beforeWrite",x1e="write",b1e="afterWrite",w1e=[f1e,p1e,m1e,g1e,y1e,v1e,_1e,x1e,b1e];function mm(e){return e?(e.nodeName||"").toLowerCase():null}function wd(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function j0(e){var t=wd(e).Element;return e instanceof t||e instanceof Element}function Eh(e){var t=wd(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function jN(e){if(typeof ShadowRoot>"u")return!1;var t=wd(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function S1e(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},s=t.attributes[n]||{},c=t.elements[n];!Eh(c)||!mm(c)||(Object.assign(c.style,r),Object.keys(s).forEach(function(d){var i=s[d];i===!1?c.removeAttribute(d):c.setAttribute(d,i===!0?"":i)}))})}function T1e(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],c=t.attributes[r]||{},d=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),i=d.reduce(function(m,x){return m[x]="",m},{});!Eh(s)||!mm(s)||(Object.assign(s.style,i),Object.keys(c).forEach(function(m){s.removeAttribute(m)}))})}}const E1e={name:"applyStyles",enabled:!0,phase:"write",fn:S1e,effect:T1e,requires:["computeStyles"]};function um(e){return e.split("-")[0]}var M0=Math.max,bR=Math.min,c1=Math.round;function gB(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function FQ(){return!/^((?!chrome|android).)*safari/i.test(gB())}function u1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),s=1,c=1;t&&Eh(e)&&(s=e.offsetWidth>0&&c1(r.width)/e.offsetWidth||1,c=e.offsetHeight>0&&c1(r.height)/e.offsetHeight||1);var d=j0(e)?wd(e):window,i=d.visualViewport,m=!FQ()&&n,x=(r.left+(m&&i?i.offsetLeft:0))/s,T=(r.top+(m&&i?i.offsetTop:0))/c,C=r.width/s,A=r.height/c;return{width:C,height:A,top:T,right:x+C,bottom:T+A,left:x,x,y:T}}function NN(e){var t=u1(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function BQ(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&jN(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Yg(e){return wd(e).getComputedStyle(e)}function C1e(e){return["table","td","th"].indexOf(mm(e))>=0}function Mv(e){return((j0(e)?e.ownerDocument:e.document)||window.document).documentElement}function $D(e){return mm(e)==="html"?e:e.assignedSlot||e.parentNode||(jN(e)?e.host:null)||Mv(e)}function J2(e){return!Eh(e)||Yg(e).position==="fixed"?null:e.offsetParent}function M1e(e){var t=/firefox/i.test(gB()),n=/Trident/i.test(gB());if(n&&Eh(e)){var r=Yg(e);if(r.position==="fixed")return null}var s=$D(e);for(jN(s)&&(s=s.host);Eh(s)&&["html","body"].indexOf(mm(s))<0;){var c=Yg(s);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return s;s=s.parentNode}return null}function TE(e){for(var t=wd(e),n=J2(e);n&&C1e(n)&&Yg(n).position==="static";)n=J2(n);return n&&(mm(n)==="html"||mm(n)==="body"&&Yg(n).position==="static")?t:n||M1e(e)||t}function VN(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function KS(e,t,n){return M0(e,bR(t,n))}function A1e(e,t,n){var r=KS(e,t,n);return r>n?n:r}function jQ(){return{top:0,right:0,bottom:0,left:0}}function NQ(e){return Object.assign({},jQ(),e)}function VQ(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var R1e=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,NQ(typeof t!="number"?t:VQ(t,SE))};function D1e(e){var t,n=e.state,r=e.name,s=e.options,c=n.elements.arrow,d=n.modifiersData.popperOffsets,i=um(n.placement),m=VN(i),x=[Au,Lh].indexOf(i)>=0,T=x?"height":"width";if(!(!c||!d)){var C=R1e(s.padding,n),A=NN(c),I=m==="y"?Mu:Au,k=m==="y"?Oh:Lh,B=n.rects.reference[T]+n.rects.reference[m]-d[m]-n.rects.popper[T],j=d[m]-n.rects.reference[m],V=TE(c),H=V?m==="y"?V.clientHeight||0:V.clientWidth||0:0,G=B/2-j/2,X=C[I],Q=H-A[T]-C[k],ee=H/2-A[T]/2+G,ce=KS(X,ee,Q),fe=m;n.modifiersData[r]=(t={},t[fe]=ce,t.centerOffset=ce-ee,t)}}function P1e(e){var t=e.state,n=e.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||BQ(t.elements.popper,s)&&(t.elements.arrow=s))}const $Q={name:"arrow",enabled:!0,phase:"main",fn:D1e,effect:P1e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function d1(e){return e.split("-")[1]}var I1e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function k1e(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:c1(n*s)/s||0,y:c1(r*s)/s||0}}function e8(e){var t,n=e.popper,r=e.popperRect,s=e.placement,c=e.variation,d=e.offsets,i=e.position,m=e.gpuAcceleration,x=e.adaptive,T=e.roundOffsets,C=e.isFixed,A=d.x,I=A===void 0?0:A,k=d.y,B=k===void 0?0:k,j=typeof T=="function"?T({x:I,y:B}):{x:I,y:B};I=j.x,B=j.y;var V=d.hasOwnProperty("x"),H=d.hasOwnProperty("y"),G=Au,X=Mu,Q=window;if(x){var ee=TE(n),ce="clientHeight",fe="clientWidth";if(ee===wd(n)&&(ee=Mv(n),Yg(ee).position!=="static"&&i==="absolute"&&(ce="scrollHeight",fe="scrollWidth")),ee=ee,s===Mu||(s===Au||s===Lh)&&c===ST){X=Oh;var ue=C&&ee===Q&&Q.visualViewport?Q.visualViewport.height:ee[ce];B-=ue-r.height,B*=m?1:-1}if(s===Au||(s===Mu||s===Oh)&&c===ST){G=Lh;var ae=C&&ee===Q&&Q.visualViewport?Q.visualViewport.width:ee[fe];I-=ae-r.width,I*=m?1:-1}}var xe=Object.assign({position:i},x&&I1e),we=T===!0?k1e({x:I,y:B},wd(n)):{x:I,y:B};if(I=we.x,B=we.y,m){var Me;return Object.assign({},xe,(Me={},Me[X]=H?"0":"",Me[G]=V?"0":"",Me.transform=(Q.devicePixelRatio||1)<=1?"translate("+I+"px, "+B+"px)":"translate3d("+I+"px, "+B+"px, 0)",Me))}return Object.assign({},xe,(t={},t[X]=H?B+"px":"",t[G]=V?I+"px":"",t.transform="",t))}function O1e(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=r===void 0?!0:r,c=n.adaptive,d=c===void 0?!0:c,i=n.roundOffsets,m=i===void 0?!0:i,x={placement:um(t.placement),variation:d1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,e8(Object.assign({},x,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,e8(Object.assign({},x,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const UQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:O1e,data:{}};var TM={passive:!0};function L1e(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,c=s===void 0?!0:s,d=r.resize,i=d===void 0?!0:d,m=wd(t.elements.popper),x=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&x.forEach(function(T){T.addEventListener("scroll",n.update,TM)}),i&&m.addEventListener("resize",n.update,TM),function(){c&&x.forEach(function(T){T.removeEventListener("scroll",n.update,TM)}),i&&m.removeEventListener("resize",n.update,TM)}}const qQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:L1e,data:{}};var z1e={left:"right",right:"left",bottom:"top",top:"bottom"};function EA(e){return e.replace(/left|right|bottom|top/g,function(t){return z1e[t]})}var F1e={start:"end",end:"start"};function t8(e){return e.replace(/start|end/g,function(t){return F1e[t]})}function $N(e){var t=wd(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function UN(e){return u1(Mv(e)).left+$N(e).scrollLeft}function B1e(e,t){var n=wd(e),r=Mv(e),s=n.visualViewport,c=r.clientWidth,d=r.clientHeight,i=0,m=0;if(s){c=s.width,d=s.height;var x=FQ();(x||!x&&t==="fixed")&&(i=s.offsetLeft,m=s.offsetTop)}return{width:c,height:d,x:i+UN(e),y:m}}function j1e(e){var t,n=Mv(e),r=$N(e),s=(t=e.ownerDocument)==null?void 0:t.body,c=M0(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),d=M0(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-r.scrollLeft+UN(e),m=-r.scrollTop;return Yg(s||n).direction==="rtl"&&(i+=M0(n.clientWidth,s?s.clientWidth:0)-c),{width:c,height:d,x:i,y:m}}function qN(e){var t=Yg(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function HQ(e){return["html","body","#document"].indexOf(mm(e))>=0?e.ownerDocument.body:Eh(e)&&qN(e)?e:HQ($D(e))}function QS(e,t){var n;t===void 0&&(t=[]);var r=HQ(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),c=wd(r),d=s?[c].concat(c.visualViewport||[],qN(r)?r:[]):r,i=t.concat(d);return s?i:i.concat(QS($D(d)))}function yB(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function N1e(e,t){var n=u1(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function n8(e,t,n){return t===zQ?yB(B1e(e,n)):j0(t)?N1e(t,n):yB(j1e(Mv(e)))}function V1e(e){var t=QS($D(e)),n=["absolute","fixed"].indexOf(Yg(e).position)>=0,r=n&&Eh(e)?TE(e):e;return j0(r)?t.filter(function(s){return j0(s)&&BQ(s,r)&&mm(s)!=="body"}):[]}function $1e(e,t,n,r){var s=t==="clippingParents"?V1e(e):[].concat(t),c=[].concat(s,[n]),d=c[0],i=c.reduce(function(m,x){var T=n8(e,x,r);return m.top=M0(T.top,m.top),m.right=bR(T.right,m.right),m.bottom=bR(T.bottom,m.bottom),m.left=M0(T.left,m.left),m},n8(e,d,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function WQ(e){var t=e.reference,n=e.element,r=e.placement,s=r?um(r):null,c=r?d1(r):null,d=t.x+t.width/2-n.width/2,i=t.y+t.height/2-n.height/2,m;switch(s){case Mu:m={x:d,y:t.y-n.height};break;case Oh:m={x:d,y:t.y+t.height};break;case Lh:m={x:t.x+t.width,y:i};break;case Au:m={x:t.x-n.width,y:i};break;default:m={x:t.x,y:t.y}}var x=s?VN(s):null;if(x!=null){var T=x==="y"?"height":"width";switch(c){case l1:m[x]=m[x]-(t[T]/2-n[T]/2);break;case ST:m[x]=m[x]+(t[T]/2-n[T]/2);break}}return m}function TT(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=r===void 0?e.placement:r,c=n.strategy,d=c===void 0?e.strategy:c,i=n.boundary,m=i===void 0?d1e:i,x=n.rootBoundary,T=x===void 0?zQ:x,C=n.elementContext,A=C===void 0?dS:C,I=n.altBoundary,k=I===void 0?!1:I,B=n.padding,j=B===void 0?0:B,V=NQ(typeof j!="number"?j:VQ(j,SE)),H=A===dS?h1e:dS,G=e.rects.popper,X=e.elements[k?H:A],Q=$1e(j0(X)?X:X.contextElement||Mv(e.elements.popper),m,T,d),ee=u1(e.elements.reference),ce=WQ({reference:ee,element:G,placement:s}),fe=yB(Object.assign({},G,ce)),ue=A===dS?fe:ee,ae={top:Q.top-ue.top+V.top,bottom:ue.bottom-Q.bottom+V.bottom,left:Q.left-ue.left+V.left,right:ue.right-Q.right+V.right},xe=e.modifiersData.offset;if(A===dS&&xe){var we=xe[s];Object.keys(ae).forEach(function(Me){var Se=[Lh,Oh].indexOf(Me)>=0?1:-1,Ae=[Mu,Oh].indexOf(Me)>=0?"y":"x";ae[Me]+=we[Ae]*Se})}return ae}function U1e(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=n.boundary,c=n.rootBoundary,d=n.padding,i=n.flipVariations,m=n.allowedAutoPlacements,x=m===void 0?BN:m,T=d1(r),C=T?i?Q2:Q2.filter(function(k){return d1(k)===T}):SE,A=C.filter(function(k){return x.indexOf(k)>=0});A.length===0&&(A=C);var I=A.reduce(function(k,B){return k[B]=TT(e,{placement:B,boundary:s,rootBoundary:c,padding:d})[um(B)],k},{});return Object.keys(I).sort(function(k,B){return I[k]-I[B]})}function q1e(e){if(um(e)===FN)return[];var t=EA(e);return[t8(e),t,t8(t)]}function H1e(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,c=s===void 0?!0:s,d=n.altAxis,i=d===void 0?!0:d,m=n.fallbackPlacements,x=n.padding,T=n.boundary,C=n.rootBoundary,A=n.altBoundary,I=n.flipVariations,k=I===void 0?!0:I,B=n.allowedAutoPlacements,j=t.options.placement,V=um(j),H=V===j,G=m||(H||!k?[EA(j)]:q1e(j)),X=[j].concat(G).reduce(function(Nt,wt){return Nt.concat(um(wt)===FN?U1e(t,{placement:wt,boundary:T,rootBoundary:C,padding:x,flipVariations:k,allowedAutoPlacements:B}):wt)},[]),Q=t.rects.reference,ee=t.rects.popper,ce=new Map,fe=!0,ue=X[0],ae=0;ae<X.length;ae++){var xe=X[ae],we=um(xe),Me=d1(xe)===l1,Se=[Mu,Oh].indexOf(we)>=0,Ae=Se?"width":"height",_e=TT(t,{placement:xe,boundary:T,rootBoundary:C,altBoundary:A,padding:x}),Pe=Se?Me?Lh:Au:Me?Oh:Mu;Q[Ae]>ee[Ae]&&(Pe=EA(Pe));var We=EA(Pe),Fe=[];if(c&&Fe.push(_e[we]<=0),i&&Fe.push(_e[Pe]<=0,_e[We]<=0),Fe.every(function(Nt){return Nt})){ue=xe,fe=!1;break}ce.set(xe,Fe)}if(fe)for(var Ce=k?3:1,He=function(wt){var ot=X.find(function(st){var St=ce.get(st);if(St)return St.slice(0,wt).every(function(Dt){return Dt})});if(ot)return ue=ot,"break"},dt=Ce;dt>0;dt--){var gt=He(dt);if(gt==="break")break}t.placement!==ue&&(t.modifiersData[r]._skip=!0,t.placement=ue,t.reset=!0)}}const GQ={name:"flip",enabled:!0,phase:"main",fn:H1e,requiresIfExists:["offset"],data:{_skip:!1}};function r8(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function i8(e){return[Mu,Lh,Oh,Au].some(function(t){return e[t]>=0})}function W1e(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,c=t.modifiersData.preventOverflow,d=TT(t,{elementContext:"reference"}),i=TT(t,{altBoundary:!0}),m=r8(d,r),x=r8(i,s,c),T=i8(m),C=i8(x);t.modifiersData[n]={referenceClippingOffsets:m,popperEscapeOffsets:x,isReferenceHidden:T,hasPopperEscaped:C},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":C})}const YQ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:W1e};function G1e(e,t,n){var r=um(e),s=[Au,Mu].indexOf(r)>=0?-1:1,c=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,d=c[0],i=c[1];return d=d||0,i=(i||0)*s,[Au,Lh].indexOf(r)>=0?{x:i,y:d}:{x:d,y:i}}function Y1e(e){var t=e.state,n=e.options,r=e.name,s=n.offset,c=s===void 0?[0,0]:s,d=BN.reduce(function(T,C){return T[C]=G1e(C,t.rects,c),T},{}),i=d[t.placement],m=i.x,x=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=x),t.modifiersData[r]=d}const XQ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Y1e};function X1e(e){var t=e.state,n=e.name;t.modifiersData[n]=WQ({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const ZQ={name:"popperOffsets",enabled:!0,phase:"read",fn:X1e,data:{}};function Z1e(e){return e==="x"?"y":"x"}function K1e(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,c=s===void 0?!0:s,d=n.altAxis,i=d===void 0?!1:d,m=n.boundary,x=n.rootBoundary,T=n.altBoundary,C=n.padding,A=n.tether,I=A===void 0?!0:A,k=n.tetherOffset,B=k===void 0?0:k,j=TT(t,{boundary:m,rootBoundary:x,padding:C,altBoundary:T}),V=um(t.placement),H=d1(t.placement),G=!H,X=VN(V),Q=Z1e(X),ee=t.modifiersData.popperOffsets,ce=t.rects.reference,fe=t.rects.popper,ue=typeof B=="function"?B(Object.assign({},t.rects,{placement:t.placement})):B,ae=typeof ue=="number"?{mainAxis:ue,altAxis:ue}:Object.assign({mainAxis:0,altAxis:0},ue),xe=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,we={x:0,y:0};if(ee){if(c){var Me,Se=X==="y"?Mu:Au,Ae=X==="y"?Oh:Lh,_e=X==="y"?"height":"width",Pe=ee[X],We=Pe+j[Se],Fe=Pe-j[Ae],Ce=I?-fe[_e]/2:0,He=H===l1?ce[_e]:fe[_e],dt=H===l1?-fe[_e]:-ce[_e],gt=t.elements.arrow,Nt=I&&gt?NN(gt):{width:0,height:0},wt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:jQ(),ot=wt[Se],st=wt[Ae],St=KS(0,ce[_e],Nt[_e]),Dt=G?ce[_e]/2-Ce-St-ot-ae.mainAxis:He-St-ot-ae.mainAxis,Et=G?-ce[_e]/2+Ce+St+st+ae.mainAxis:dt+St+st+ae.mainAxis,yt=t.elements.arrow&&TE(t.elements.arrow),Lt=yt?X==="y"?yt.clientTop||0:yt.clientLeft||0:0,Ct=(Me=xe==null?void 0:xe[X])!=null?Me:0,Wt=Pe+Dt-Ct-Lt,fn=Pe+Et-Ct,Zt=KS(I?bR(We,Wt):We,Pe,I?M0(Fe,fn):Fe);ee[X]=Zt,we[X]=Zt-Pe}if(i){var Ut,kn=X==="x"?Mu:Au,Bn=X==="x"?Oh:Lh,bn=ee[Q],Nn=Q==="y"?"height":"width",ft=bn+j[kn],vn=bn-j[Bn],Ot=[Mu,Au].indexOf(V)!==-1,tn=(Ut=xe==null?void 0:xe[Q])!=null?Ut:0,Rn=Ot?ft:bn-ce[Nn]-fe[Nn]-tn+ae.altAxis,Hn=Ot?bn+ce[Nn]+fe[Nn]-tn-ae.altAxis:vn,mr=I&&Ot?A1e(Rn,bn,Hn):KS(I?Rn:ft,bn,I?Hn:vn);ee[Q]=mr,we[Q]=mr-bn}t.modifiersData[r]=we}}const KQ={name:"preventOverflow",enabled:!0,phase:"main",fn:K1e,requiresIfExists:["offset"]};function Q1e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function J1e(e){return e===wd(e)||!Eh(e)?$N(e):Q1e(e)}function ewe(e){var t=e.getBoundingClientRect(),n=c1(t.width)/e.offsetWidth||1,r=c1(t.height)/e.offsetHeight||1;return n!==1||r!==1}function twe(e,t,n){n===void 0&&(n=!1);var r=Eh(t),s=Eh(t)&&ewe(t),c=Mv(t),d=u1(e,s,n),i={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(r||!r&&!n)&&((mm(t)!=="body"||qN(c))&&(i=J1e(t)),Eh(t)?(m=u1(t,!0),m.x+=t.clientLeft,m.y+=t.clientTop):c&&(m.x=UN(c))),{x:d.left+i.scrollLeft-m.x,y:d.top+i.scrollTop-m.y,width:d.width,height:d.height}}function nwe(e){var t=new Map,n=new Set,r=[];e.forEach(function(c){t.set(c.name,c)});function s(c){n.add(c.name);var d=[].concat(c.requires||[],c.requiresIfExists||[]);d.forEach(function(i){if(!n.has(i)){var m=t.get(i);m&&s(m)}}),r.push(c)}return e.forEach(function(c){n.has(c.name)||s(c)}),r}function rwe(e){var t=nwe(e);return w1e.reduce(function(n,r){return n.concat(t.filter(function(s){return s.phase===r}))},[])}function iwe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function owe(e){var t=e.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var o8={placement:"bottom",modifiers:[],strategy:"absolute"};function s8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function QQ(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,s=t.defaultOptions,c=s===void 0?o8:s;return function(i,m,x){x===void 0&&(x=c);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},o8,c),modifiersData:{},elements:{reference:i,popper:m},attributes:{},styles:{}},C=[],A=!1,I={state:T,setOptions:function(V){var H=typeof V=="function"?V(T.options):V;B(),T.options=Object.assign({},c,T.options,H),T.scrollParents={reference:j0(i)?QS(i):i.contextElement?QS(i.contextElement):[],popper:QS(m)};var G=rwe(owe([].concat(r,T.options.modifiers)));return T.orderedModifiers=G.filter(function(X){return X.enabled}),k(),I.update()},forceUpdate:function(){if(!A){var V=T.elements,H=V.reference,G=V.popper;if(s8(H,G)){T.rects={reference:twe(H,TE(G),T.options.strategy==="fixed"),popper:NN(G)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(ae){return T.modifiersData[ae.name]=Object.assign({},ae.data)});for(var X=0;X<T.orderedModifiers.length;X++){if(T.reset===!0){T.reset=!1,X=-1;continue}var Q=T.orderedModifiers[X],ee=Q.fn,ce=Q.options,fe=ce===void 0?{}:ce,ue=Q.name;typeof ee=="function"&&(T=ee({state:T,options:fe,name:ue,instance:I})||T)}}}},update:iwe(function(){return new Promise(function(j){I.forceUpdate(),j(T)})}),destroy:function(){B(),A=!0}};if(!s8(i,m))return I;I.setOptions(x).then(function(j){!A&&x.onFirstUpdate&&x.onFirstUpdate(j)});function k(){T.orderedModifiers.forEach(function(j){var V=j.name,H=j.options,G=H===void 0?{}:H,X=j.effect;if(typeof X=="function"){var Q=X({state:T,name:V,instance:I,options:G}),ee=function(){};C.push(Q||ee)}})}function B(){C.forEach(function(j){return j()}),C=[]}return I}}var swe=[qQ,ZQ,UQ,E1e,XQ,GQ,KQ,$Q,YQ],awe=QQ({defaultModifiers:swe});function Co(e){var C;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...c}=e,d=s?{}:i1(n,r),{props:i,internalRef:m}=iK({...c,externalSlotProps:d}),x=wo(m,d==null?void 0:d.ref,(C=e.additionalProps)==null?void 0:C.ref);return nK(t,{...i,ref:x},r)}function ny(e){var t;return parseInt(U.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function lwe(e){return typeof e=="function"?e():e}const JQ=U.forwardRef(function(t,n){const{children:r,container:s,disablePortal:c=!1}=t,[d,i]=U.useState(null),m=wo(U.isValidElement(r)?ny(r):null,n);if(Qs(()=>{c||i(lwe(s)||document.body)},[s,c]),Qs(()=>{if(d&&!c)return $2(n,d),()=>{$2(n,null)}},[n,d,c]),c){if(U.isValidElement(r)){const x={ref:m};return U.cloneElement(r,x)}return r}return d&&lD.createPortal(r,d)});function cwe(e){return fr("MuiPopper",e)}pr("MuiPopper",["root"]);function uwe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function vB(e){return typeof e=="function"?e():e}function dwe(e){return e.nodeType!==void 0}const hwe=e=>{const{classes:t}=e;return dr({root:["root"]},cwe,t)},fwe={},pwe=U.forwardRef(function(t,n){const{anchorEl:r,children:s,direction:c,disablePortal:d,modifiers:i,open:m,placement:x,popperOptions:T,popperRef:C,slotProps:A={},slots:I={},TransitionProps:k,ownerState:B,...j}=t,V=U.useRef(null),H=wo(V,n),G=U.useRef(null),X=wo(G,C),Q=U.useRef(X);Qs(()=>{Q.current=X},[X]),U.useImperativeHandle(C,()=>G.current,[]);const ee=uwe(x,c),[ce,fe]=U.useState(ee),[ue,ae]=U.useState(vB(r));U.useEffect(()=>{G.current&&G.current.forceUpdate()}),U.useEffect(()=>{r&&ae(vB(r))},[r]),Qs(()=>{if(!ue||!m)return;const Ae=We=>{fe(We.placement)};let _e=[{name:"preventOverflow",options:{altBoundary:d}},{name:"flip",options:{altBoundary:d}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:We})=>{Ae(We)}}];i!=null&&(_e=_e.concat(i)),T&&T.modifiers!=null&&(_e=_e.concat(T.modifiers));const Pe=awe(ue,V.current,{placement:ee,...T,modifiers:_e});return Q.current(Pe),()=>{Pe.destroy(),Q.current(null)}},[ue,d,i,m,T,ee]);const xe={placement:ce};k!==null&&(xe.TransitionProps=k);const we=hwe(t),Me=I.root??"div",Se=Co({elementType:Me,externalSlotProps:A.root,externalForwardedProps:j,additionalProps:{role:"tooltip",ref:H},ownerState:t,className:we.root});return z.jsx(Me,{...Se,children:typeof s=="function"?s(xe):s})}),mwe=U.forwardRef(function(t,n){const{anchorEl:r,children:s,container:c,direction:d="ltr",disablePortal:i=!1,keepMounted:m=!1,modifiers:x,open:T,placement:C="bottom",popperOptions:A=fwe,popperRef:I,style:k,transition:B=!1,slotProps:j={},slots:V={},...H}=t,[G,X]=U.useState(!0),Q=()=>{X(!1)},ee=()=>{X(!0)};if(!m&&!T&&(!B||G))return null;let ce;if(c)ce=c;else if(r){const ae=vB(r);ce=ae&&dwe(ae)?qa(ae).body:qa(null).body}const fe=!T&&m&&(!B||G)?"none":void 0,ue=B?{in:T,onEnter:Q,onExited:ee}:void 0;return z.jsx(JQ,{disablePortal:i,container:ce,children:z.jsx(pwe,{anchorEl:r,direction:d,disablePortal:i,modifiers:x,ref:n,open:B?!G:T,placement:C,popperOptions:A,popperRef:I,slotProps:j,slots:V,...H,style:{position:"fixed",top:0,left:0,display:fe,...k},TransitionProps:ue,children:s})})}),gwe=Ft(mwe,{name:"MuiPopper",slot:"Root"})({}),EE=U.forwardRef(function(t,n){const r=Al(),s=Br({props:t,name:"MuiPopper"}),{anchorEl:c,component:d,components:i,componentsProps:m,container:x,disablePortal:T,keepMounted:C,modifiers:A,open:I,placement:k,popperOptions:B,popperRef:j,transition:V,slots:H,slotProps:G,...X}=s,Q=(H==null?void 0:H.root)??(i==null?void 0:i.Root),ee={anchorEl:c,container:x,disablePortal:T,keepMounted:C,modifiers:A,open:I,placement:k,popperOptions:B,popperRef:j,transition:V,...X};return z.jsx(gwe,{as:d,direction:r?"rtl":"ltr",slots:{root:Q},slotProps:G??m,...ee,ref:n})}),ywe=Gi(z.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function vwe(e){return fr("MuiChip",e)}const Eo=pr("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_we=e=>{const{classes:t,disabled:n,size:r,color:s,iconColor:c,onDelete:d,clickable:i,variant:m}=e,x={root:["root",m,n&&"disabled",`size${Dn(r)}`,`color${Dn(s)}`,i&&"clickable",i&&`clickableColor${Dn(s)}`,d&&"deletable",d&&`deletableColor${Dn(s)}`,`${m}${Dn(s)}`],label:["label",`label${Dn(r)}`],avatar:["avatar",`avatar${Dn(r)}`,`avatarColor${Dn(s)}`],icon:["icon",`icon${Dn(r)}`,`iconColor${Dn(c)}`],deleteIcon:["deleteIcon",`deleteIcon${Dn(r)}`,`deleteIconColor${Dn(s)}`,`deleteIcon${Dn(m)}Color${Dn(s)}`]};return dr(x,vwe,t)},xwe=Ft("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:s,clickable:c,onDelete:d,size:i,variant:m}=n;return[{[`& .${Eo.avatar}`]:t.avatar},{[`& .${Eo.avatar}`]:t[`avatar${Dn(i)}`]},{[`& .${Eo.avatar}`]:t[`avatarColor${Dn(r)}`]},{[`& .${Eo.icon}`]:t.icon},{[`& .${Eo.icon}`]:t[`icon${Dn(i)}`]},{[`& .${Eo.icon}`]:t[`iconColor${Dn(s)}`]},{[`& .${Eo.deleteIcon}`]:t.deleteIcon},{[`& .${Eo.deleteIcon}`]:t[`deleteIcon${Dn(i)}`]},{[`& .${Eo.deleteIcon}`]:t[`deleteIconColor${Dn(r)}`]},{[`& .${Eo.deleteIcon}`]:t[`deleteIcon${Dn(m)}Color${Dn(r)}`]},t.root,t[`size${Dn(i)}`],t[`color${Dn(r)}`],c&&t.clickable,c&&r!=="default"&&t[`clickableColor${Dn(r)})`],d&&t.deletable,d&&r!=="default"&&t[`deletableColor${Dn(r)}`],t[m],t[`${m}${Dn(r)}`]]}})(Xr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Eo.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Eo.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${Eo.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Eo.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Eo.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Eo.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Eo.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:ei(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ei(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Eo.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Eo.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(vs(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${Eo.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:ei(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${Eo.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${Eo.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Eo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(vs(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${Eo.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ei(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Eo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(vs(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${Eo.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Eo.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Eo.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Eo.avatar}`]:{marginLeft:4},[`& .${Eo.avatarSmall}`]:{marginLeft:2},[`& .${Eo.icon}`]:{marginLeft:4},[`& .${Eo.iconSmall}`]:{marginLeft:2},[`& .${Eo.deleteIcon}`]:{marginRight:5},[`& .${Eo.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(vs()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:ei(e.palette[n].main,.7)}`,[`&.${Eo.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${Eo.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:ei(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${Eo.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:ei(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),bwe=Ft("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${Dn(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function a8(e){return e.key==="Backspace"||e.key==="Delete"}const yd=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiChip"}),{avatar:s,className:c,clickable:d,color:i="default",component:m,deleteIcon:x,disabled:T=!1,icon:C,label:A,onClick:I,onDelete:k,onKeyDown:B,onKeyUp:j,size:V="medium",variant:H="filled",tabIndex:G,skipFocusWhenDisabled:X=!1,...Q}=r,ee=U.useRef(null),ce=wo(ee,n),fe=Fe=>{Fe.stopPropagation(),k&&k(Fe)},ue=Fe=>{Fe.currentTarget===Fe.target&&a8(Fe)&&Fe.preventDefault(),B&&B(Fe)},ae=Fe=>{Fe.currentTarget===Fe.target&&k&&a8(Fe)&&k(Fe),j&&j(Fe)},xe=d!==!1&&I?!0:d,we=xe||k?bd:m||"div",Me={...r,component:we,disabled:T,size:V,color:i,iconColor:U.isValidElement(C)&&C.props.color||i,onDelete:!!k,clickable:xe,variant:H},Se=_we(Me),Ae=we===bd?{component:m||"div",focusVisibleClassName:Se.focusVisible,...k&&{disableRipple:!0}}:{};let _e=null;k&&(_e=x&&U.isValidElement(x)?U.cloneElement(x,{className:$n(x.props.className,Se.deleteIcon),onClick:fe}):z.jsx(ywe,{className:Se.deleteIcon,onClick:fe}));let Pe=null;s&&U.isValidElement(s)&&(Pe=U.cloneElement(s,{className:$n(Se.avatar,s.props.className)}));let We=null;return C&&U.isValidElement(C)&&(We=U.cloneElement(C,{className:$n(Se.icon,C.props.className)})),z.jsxs(xwe,{as:we,className:$n(Se.root,c),disabled:xe&&T?!0:void 0,onClick:I,onKeyDown:ue,onKeyUp:ae,ref:ce,tabIndex:X&&T?-1:G,ownerState:Me,...Ae,...Q,children:[Pe||We,z.jsx(bwe,{className:Se.label,ownerState:Me,children:A}),_e]})});function EM(e){return parseInt(e,10)||0}const wwe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Swe(e){for(const t in e)return!1;return!0}function l8(e){return Swe(e)||e.outerHeightStyle===0&&!e.overflowing}const Twe=U.forwardRef(function(t,n){const{onChange:r,maxRows:s,minRows:c=1,style:d,value:i,...m}=t,{current:x}=U.useRef(i!=null),T=U.useRef(null),C=wo(n,T),A=U.useRef(null),I=U.useRef(null),k=U.useCallback(()=>{const G=T.current,X=I.current;if(!G||!X)return;const ee=xd(G).getComputedStyle(G);if(ee.width==="0px")return{outerHeightStyle:0,overflowing:!1};X.style.width=ee.width,X.value=G.value||t.placeholder||"x",X.value.slice(-1)===`
`&&(X.value+=" ");const ce=ee.boxSizing,fe=EM(ee.paddingBottom)+EM(ee.paddingTop),ue=EM(ee.borderBottomWidth)+EM(ee.borderTopWidth),ae=X.scrollHeight;X.value="x";const xe=X.scrollHeight;let we=ae;c&&(we=Math.max(Number(c)*xe,we)),s&&(we=Math.min(Number(s)*xe,we)),we=Math.max(we,xe);const Me=we+(ce==="border-box"?fe+ue:0),Se=Math.abs(we-ae)<=1;return{outerHeightStyle:Me,overflowing:Se}},[s,c,t.placeholder]),B=Er(()=>{const G=T.current,X=k();if(!G||!X||l8(X))return!1;const Q=X.outerHeightStyle;return A.current!=null&&A.current!==Q}),j=U.useCallback(()=>{const G=T.current,X=k();if(!G||!X||l8(X))return;const Q=X.outerHeightStyle;A.current!==Q&&(A.current=Q,G.style.height=`${Q}px`),G.style.overflow=X.overflowing?"hidden":""},[k]),V=U.useRef(-1);Qs(()=>{const G=bE(j),X=T==null?void 0:T.current;if(!X)return;const Q=xd(X);Q.addEventListener("resize",G);let ee;return typeof ResizeObserver<"u"&&(ee=new ResizeObserver(()=>{B()&&(ee.unobserve(X),cancelAnimationFrame(V.current),j(),V.current=requestAnimationFrame(()=>{ee.observe(X)}))}),ee.observe(X)),()=>{G.clear(),cancelAnimationFrame(V.current),Q.removeEventListener("resize",G),ee&&ee.disconnect()}},[k,j,B]),Qs(()=>{j()});const H=G=>{x||j();const X=G.target,Q=X.value.length,ee=X.value.endsWith(`
`),ce=X.selectionStart===Q;ee&&ce&&X.setSelectionRange(Q,Q),r&&r(G)};return z.jsxs(U.Fragment,{children:[z.jsx("textarea",{value:i,onChange:H,ref:C,rows:c,style:d,...m}),z.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:I,tabIndex:-1,style:{...wwe.shadow,...d,paddingTop:0,paddingBottom:0}})]})});function ET(e){return typeof e=="string"}function Av({props:e,states:t,muiFormControl:n}){return t.reduce((r,s)=>(r[s]=e[s],n&&typeof e[s]>"u"&&(r[s]=n[s]),r),{})}const UD=U.createContext(void 0);function jh(){return U.useContext(UD)}function c8(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function wR(e,t=!1){return e&&(c8(e.value)&&e.value!==""||t&&c8(e.defaultValue)&&e.defaultValue!=="")}function Ewe(e){return e.startAdornment}function Cwe(e){return fr("MuiInputBase",e)}const h1=pr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var u8;const qD=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Dn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},HD=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Mwe=e=>{const{classes:t,color:n,disabled:r,error:s,endAdornment:c,focused:d,formControl:i,fullWidth:m,hiddenLabel:x,multiline:T,readOnly:C,size:A,startAdornment:I,type:k}=e,B={root:["root",`color${Dn(n)}`,r&&"disabled",s&&"error",m&&"fullWidth",d&&"focused",i&&"formControl",A&&A!=="medium"&&`size${Dn(A)}`,T&&"multiline",I&&"adornedStart",c&&"adornedEnd",x&&"hiddenLabel",C&&"readOnly"],input:["input",r&&"disabled",k==="search"&&"inputTypeSearch",T&&"inputMultiline",A==="small"&&"inputSizeSmall",x&&"inputHiddenLabel",I&&"inputAdornedStart",c&&"inputAdornedEnd",C&&"readOnly"]};return dr(B,Cwe,t)},WD=Ft("div",{name:"MuiInputBase",slot:"Root",overridesResolver:qD})(Xr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${h1.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),GD=Ft("input",{name:"MuiInputBase",slot:"Input",overridesResolver:HD})(Xr(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${h1.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${h1.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:c})=>!c.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:c})=>c.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),d8=dN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),YD=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:c,autoFocus:d,className:i,color:m,components:x={},componentsProps:T={},defaultValue:C,disabled:A,disableInjectingGlobalStyles:I,endAdornment:k,error:B,fullWidth:j=!1,id:V,inputComponent:H="input",inputProps:G={},inputRef:X,margin:Q,maxRows:ee,minRows:ce,multiline:fe=!1,name:ue,onBlur:ae,onChange:xe,onClick:we,onFocus:Me,onKeyDown:Se,onKeyUp:Ae,placeholder:_e,readOnly:Pe,renderSuffix:We,rows:Fe,size:Ce,slotProps:He={},slots:dt={},startAdornment:gt,type:Nt="text",value:wt,...ot}=r,st=G.value!=null?G.value:wt,{current:St}=U.useRef(st!=null),Dt=U.useRef(),Et=U.useCallback(Mn=>{},[]),yt=wo(Dt,X,G.ref,Et),[Lt,Ct]=U.useState(!1),Wt=jh(),fn=Av({props:r,muiFormControl:Wt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});fn.focused=Wt?Wt.focused:Lt,U.useEffect(()=>{!Wt&&A&&Lt&&(Ct(!1),ae&&ae())},[Wt,A,Lt,ae]);const Zt=Wt&&Wt.onFilled,Ut=Wt&&Wt.onEmpty,kn=U.useCallback(Mn=>{wR(Mn)?Zt&&Zt():Ut&&Ut()},[Zt,Ut]);Qs(()=>{St&&kn({value:st})},[st,kn,St]);const Bn=Mn=>{Me&&Me(Mn),G.onFocus&&G.onFocus(Mn),Wt&&Wt.onFocus?Wt.onFocus(Mn):Ct(!0)},bn=Mn=>{ae&&ae(Mn),G.onBlur&&G.onBlur(Mn),Wt&&Wt.onBlur?Wt.onBlur(Mn):Ct(!1)},Nn=(Mn,...Fr)=>{if(!St){const Cr=Mn.target||Dt.current;if(Cr==null)throw new Error(Gg(1));kn({value:Cr.value})}G.onChange&&G.onChange(Mn,...Fr),xe&&xe(Mn,...Fr)};U.useEffect(()=>{kn(Dt.current)},[]);const ft=Mn=>{Dt.current&&Mn.currentTarget===Mn.target&&Dt.current.focus(),we&&we(Mn)};let vn=H,Ot=G;fe&&vn==="input"&&(Fe?Ot={type:void 0,minRows:Fe,maxRows:Fe,...Ot}:Ot={type:void 0,maxRows:ee,minRows:ce,...Ot},vn=Twe);const tn=Mn=>{kn(Mn.animationName==="mui-auto-fill-cancel"?Dt.current:{value:"x"})};U.useEffect(()=>{Wt&&Wt.setAdornedStart(!!gt)},[Wt,gt]);const Rn={...r,color:fn.color||"primary",disabled:fn.disabled,endAdornment:k,error:fn.error,focused:fn.focused,formControl:Wt,fullWidth:j,hiddenLabel:fn.hiddenLabel,multiline:fe,size:fn.size,startAdornment:gt,type:Nt},Hn=Mwe(Rn),mr=dt.root||x.Root||WD,Xn=He.root||T.root||{},or=dt.input||x.Input||GD;return Ot={...Ot,...He.input??T.input},z.jsxs(U.Fragment,{children:[!I&&typeof d8=="function"&&(u8||(u8=z.jsx(d8,{}))),z.jsxs(mr,{...Xn,ref:n,onClick:ft,...ot,...!ET(mr)&&{ownerState:{...Rn,...Xn.ownerState}},className:$n(Hn.root,Xn.className,i,Pe&&"MuiInputBase-readOnly"),children:[gt,z.jsx(UD.Provider,{value:null,children:z.jsx(or,{"aria-invalid":fn.error,"aria-describedby":s,autoComplete:c,autoFocus:d,defaultValue:C,disabled:fn.disabled,id:V,onAnimationStart:tn,name:ue,placeholder:_e,readOnly:Pe,required:fn.required,rows:Fe,value:st,onKeyDown:Se,onKeyUp:Ae,type:Nt,...Ot,...!ET(or)&&{as:vn,ownerState:{...Rn,...Ot.ownerState}},ref:yt,className:$n(Hn.input,Ot.className,Pe&&"MuiInputBase-readOnly"),onBlur:bn,onChange:Nn,onFocus:Bn})}),k,We?We({...fn,startAdornment:gt}):null]})]})});function Awe(e){return fr("MuiInput",e)}const hS={...h1,...pr("MuiInput",["root","underline","input"])};function Rwe(e){return fr("MuiOutlinedInput",e)}const Xp={...h1,...pr("MuiOutlinedInput",["root","notchedOutline","input"])};function Dwe(e){return fr("MuiFilledInput",e)}const e0={...h1,...pr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Pwe=Gi(z.jsx("path",{d:"M7 10l5 5 5-5z"})),Iwe=Gi(z.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function kwe(e){return fr("MuiAvatar",e)}pr("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Owe=e=>{const{classes:t,variant:n,colorDefault:r}=e;return dr({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},kwe,t)},Lwe=Ft("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(Xr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),zwe=Ft("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Fwe=Ft(Iwe,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function Bwe({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[s,c]=U.useState(!1);return U.useEffect(()=>{if(!n&&!r)return;c(!1);let d=!0;const i=new Image;return i.onload=()=>{d&&c("loaded")},i.onerror=()=>{d&&c("error")},i.crossOrigin=e,i.referrerPolicy=t,i.src=n,r&&(i.srcset=r),()=>{d=!1}},[e,t,n,r]),s}const sx=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiAvatar"}),{alt:s,children:c,className:d,component:i="div",slots:m={},slotProps:x={},imgProps:T,sizes:C,src:A,srcSet:I,variant:k="circular",...B}=r;let j=null;const V={...r,component:i,variant:k},H=Bwe({...T,...typeof x.img=="function"?x.img(V):x.img,src:A,srcSet:I}),G=A||I,X=G&&H!=="error";V.colorDefault=!X,delete V.ownerState;const Q=Owe(V),[ee,ce]=Ur("root",{ref:n,className:$n(Q.root,d),elementType:Lwe,externalForwardedProps:{slots:m,slotProps:x,component:i,...B},ownerState:V}),[fe,ue]=Ur("img",{className:Q.img,elementType:zwe,externalForwardedProps:{slots:m,slotProps:{img:{...T,...x.img}}},additionalProps:{alt:s,src:A,srcSet:I,sizes:C},ownerState:V}),[ae,xe]=Ur("fallback",{className:Q.fallback,elementType:Fwe,externalForwardedProps:{slots:m,slotProps:x},shouldForwardComponentProp:!0,ownerState:V});return X?j=z.jsx(fe,{...ue}):c||c===0?j=c:G&&s?j=s[0]:j=z.jsx(ae,{...xe}),z.jsx(ee,{...ce,children:j})}),jwe={entering:{opacity:1},entered:{opacity:1}},gm=U.forwardRef(function(t,n){const r=Zo(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:d=!0,children:i,easing:m,in:x,onEnter:T,onEntered:C,onEntering:A,onExit:I,onExited:k,onExiting:B,style:j,timeout:V=s,TransitionComponent:H=Iu,...G}=t,X=U.useRef(null),Q=wo(X,ny(i),n),ee=Se=>Ae=>{if(Se){const _e=X.current;Ae===void 0?Se(_e):Se(_e,Ae)}},ce=ee(A),fe=ee((Se,Ae)=>{VD(Se);const _e=pm({style:j,timeout:V,easing:m},{mode:"enter"});Se.style.webkitTransition=r.transitions.create("opacity",_e),Se.style.transition=r.transitions.create("opacity",_e),T&&T(Se,Ae)}),ue=ee(C),ae=ee(B),xe=ee(Se=>{const Ae=pm({style:j,timeout:V,easing:m},{mode:"exit"});Se.style.webkitTransition=r.transitions.create("opacity",Ae),Se.style.transition=r.transitions.create("opacity",Ae),I&&I(Se)}),we=ee(k),Me=Se=>{c&&c(X.current,Se)};return z.jsx(H,{appear:d,in:x,nodeRef:X,onEnter:fe,onEntered:ue,onEntering:ce,onExit:xe,onExited:we,onExiting:ae,addEndListener:Me,timeout:V,...G,children:(Se,{ownerState:Ae,..._e})=>U.cloneElement(i,{style:{opacity:0,visibility:Se==="exited"&&!x?"hidden":void 0,...jwe[Se],...j,...i.props.style},ref:Q,..._e})})});function Nwe(e){return fr("MuiBackdrop",e)}pr("MuiBackdrop",["root","invisible"]);const Vwe=e=>{const{classes:t,invisible:n}=e;return dr({root:["root",n&&"invisible"]},Nwe,t)},$we=Ft("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),eJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiBackdrop"}),{children:s,className:c,component:d="div",invisible:i=!1,open:m,components:x={},componentsProps:T={},slotProps:C={},slots:A={},TransitionComponent:I,transitionDuration:k,...B}=r,j={...r,component:d,invisible:i},V=Vwe(j),H={transition:I,root:x.Root,...A},G={...T,...C},X={slots:H,slotProps:G},[Q,ee]=Ur("root",{elementType:$we,externalForwardedProps:X,className:$n(V.root,c),ownerState:j}),[ce,fe]=Ur("transition",{elementType:gm,externalForwardedProps:X,ownerState:j});return z.jsx(ce,{in:m,timeout:k,...B,...fe,children:z.jsx(Q,{"aria-hidden":!0,...ee,classes:V,ref:n,children:s})})}),Uwe=Gi(z.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),qwe=Ft(bd)(Xr(({theme:e})=>({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`,...e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}},"&:active":{boxShadow:e.shadows[0],...e.palette.mode==="light"?{backgroundColor:LF(e.palette.grey[200],.12)}:{backgroundColor:LF(e.palette.grey[600],.12)}}}))),Hwe=Ft(Uwe)({width:24,height:16});function Wwe(e){const{slots:t={},slotProps:n={},...r}=e,s=e;return z.jsx("li",{children:z.jsx(qwe,{focusRipple:!0,...r,ownerState:s,children:z.jsx(Hwe,{as:t.CollapsedIcon,ownerState:s,...n.collapsedIcon})})})}function Gwe(e){return fr("MuiBreadcrumbs",e)}const Ywe=pr("MuiBreadcrumbs",["root","ol","li","separator"]),Xwe=e=>{const{classes:t}=e;return dr({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Gwe,t)},Zwe=Ft(En,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${Ywe.li}`]:t.li},t.root]})({}),Kwe=Ft("ol",{name:"MuiBreadcrumbs",slot:"Ol"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),Qwe=Ft("li",{name:"MuiBreadcrumbs",slot:"Separator"})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Jwe(e,t,n,r){return e.reduce((s,c,d)=>(d<e.length-1?s=s.concat(c,z.jsx(Qwe,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${d}`)):s.push(c),s),[])}const Fk=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiBreadcrumbs"}),{children:s,className:c,component:d="nav",slots:i={},slotProps:m={},expandText:x="Show path",itemsAfterCollapse:T=1,itemsBeforeCollapse:C=1,maxItems:A=8,separator:I="/",...k}=r,[B,j]=U.useState(!1),V={...r,component:d,expanded:B,expandText:x,itemsAfterCollapse:T,itemsBeforeCollapse:C,maxItems:A,separator:I},H=Xwe(V),G=Co({elementType:i.CollapsedIcon,externalSlotProps:m.collapsedIcon,ownerState:V}),X=U.useRef(null),Q=ce=>{const fe=()=>{j(!0);const ue=X.current.querySelector("a[href],button,[tabindex]");ue&&ue.focus()};return C+T>=ce.length?ce:[...ce.slice(0,C),z.jsx(Wwe,{"aria-label":x,slots:{CollapsedIcon:i.CollapsedIcon},slotProps:{collapsedIcon:G},onClick:fe},"ellipsis"),...ce.slice(ce.length-T,ce.length)]},ee=U.Children.toArray(s).filter(ce=>U.isValidElement(ce)).map((ce,fe)=>z.jsx("li",{className:H.li,children:ce},`child-${fe}`));return z.jsx(Zwe,{ref:n,component:d,color:"textSecondary",className:$n(H.root,c),ownerState:V,...k,children:z.jsx(Kwe,{className:H.ol,ref:X,ownerState:V,children:Jwe(B||A&&ee.length<=A?ee:Q(ee),H.separator,I,V)})})});function eSe(e){return fr("MuiButton",e)}const t0=pr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),tSe=U.createContext({}),nSe=U.createContext(void 0),rSe=e=>{const{color:t,disableElevation:n,fullWidth:r,size:s,variant:c,loading:d,loadingPosition:i,classes:m}=e,x={root:["root",d&&"loading",c,`${c}${Dn(t)}`,`size${Dn(s)}`,`${c}Size${Dn(s)}`,`color${Dn(t)}`,n&&"disableElevation",r&&"fullWidth",d&&`loadingPosition${Dn(i)}`],startIcon:["icon","startIcon",`iconSize${Dn(s)}`],endIcon:["icon","endIcon",`iconSize${Dn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},T=dr(x,eSe,m);return{...m,...T}},tJ=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],iSe=Ft(bd,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Dn(n.color)}`],t[`size${Dn(n.size)}`],t[`${n.variant}Size${Dn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Xr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${t0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${t0.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${t0.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${t0.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(vs()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.5)`:ei(e.palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette[r].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette[r].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${t0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${t0.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${t0.loading}`]:{color:"transparent"}}}]}})),oSe=Ft("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Dn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...tJ]})),sSe=Ft("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Dn(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...tJ]})),aSe=Ft("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),h8=Ft("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Wi=U.forwardRef(function(t,n){const r=U.useContext(tSe),s=U.useContext(nSe),c=gT(r,t),d=Br({props:c,name:"MuiButton"}),{children:i,color:m="primary",component:x="button",className:T,disabled:C=!1,disableElevation:A=!1,disableFocusRipple:I=!1,endIcon:k,focusVisibleClassName:B,fullWidth:j=!1,id:V,loading:H=null,loadingIndicator:G,loadingPosition:X="center",size:Q="medium",startIcon:ee,type:ce,variant:fe="text",...ue}=d,ae=kh(V),xe=G??z.jsx(wT,{"aria-labelledby":ae,color:"inherit",size:16}),we={...d,color:m,component:x,disabled:C,disableElevation:A,disableFocusRipple:I,fullWidth:j,loading:H,loadingIndicator:xe,loadingPosition:X,size:Q,type:ce,variant:fe},Me=rSe(we),Se=(ee||H&&X==="start")&&z.jsx(oSe,{className:Me.startIcon,ownerState:we,children:ee||z.jsx(h8,{className:Me.loadingIconPlaceholder,ownerState:we})}),Ae=(k||H&&X==="end")&&z.jsx(sSe,{className:Me.endIcon,ownerState:we,children:k||z.jsx(h8,{className:Me.loadingIconPlaceholder,ownerState:we})}),_e=s||"",Pe=typeof H=="boolean"?z.jsx("span",{className:Me.loadingWrapper,style:{display:"contents"},children:H&&z.jsx(aSe,{className:Me.loadingIndicator,ownerState:we,children:xe})}):null;return z.jsxs(iSe,{ownerState:we,className:$n(r.className,Me.root,T,_e),component:x,disabled:C||H,focusRipple:!I,focusVisibleClassName:$n(Me.focusVisible,B),ref:n,type:ce,id:H?ae:V,...ue,classes:Me,children:[Se,X!=="end"&&Pe,i,X==="end"&&Pe,Ae]})});function lSe(e){return fr("MuiCardMedia",e)}pr("MuiCardMedia",["root","media","img"]);const cSe=e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return dr({root:["root",n&&"media",r&&"img"]},lSe,t)},uSe=Ft("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:s}=n;return[t.root,r&&t.media,s&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),dSe=["video","audio","picture","iframe","img"],hSe=["picture","img"],nJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCardMedia"}),{children:s,className:c,component:d="div",image:i,src:m,style:x,...T}=r,C=dSe.includes(d),A=!C&&i?{backgroundImage:`url("${i}")`,...x}:x,I={...r,component:d,isMediaComponent:C,isImageComponent:hSe.includes(d)},k=cSe(I);return z.jsx(uSe,{className:$n(k.root,c),as:d,role:!C&&i?"img":void 0,ref:n,style:A,ownerState:I,src:C?i||m:void 0,...T,children:s})});function fSe(e){return fr("PrivateSwitchBase",e)}pr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const pSe=e=>{const{classes:t,checked:n,disabled:r,edge:s}=e,c={root:["root",n&&"checked",r&&"disabled",s&&`edge${Dn(s)}`],input:["input"]};return dr(c,fSe,t)},mSe=Ft(bd)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),gSe=Ft("input",{shouldForwardProp:Tc})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ySe=U.forwardRef(function(t,n){const{autoFocus:r,checked:s,checkedIcon:c,defaultChecked:d,disabled:i,disableFocusRipple:m=!1,edge:x=!1,icon:T,id:C,inputProps:A,inputRef:I,name:k,onBlur:B,onChange:j,onFocus:V,readOnly:H,required:G=!1,tabIndex:X,type:Q,value:ee,slots:ce={},slotProps:fe={},...ue}=t,[ae,xe]=Xf({controlled:s,default:!!d,name:"SwitchBase",state:"checked"}),we=jh(),Me=wt=>{V&&V(wt),we&&we.onFocus&&we.onFocus(wt)},Se=wt=>{B&&B(wt),we&&we.onBlur&&we.onBlur(wt)},Ae=wt=>{if(wt.nativeEvent.defaultPrevented)return;const ot=wt.target.checked;xe(ot),j&&j(wt,ot)};let _e=i;we&&typeof _e>"u"&&(_e=we.disabled);const Pe=Q==="checkbox"||Q==="radio",We={...t,checked:ae,disabled:_e,disableFocusRipple:m,edge:x},Fe=pSe(We),Ce={slots:ce,slotProps:{input:A,...fe}},[He,dt]=Ur("root",{ref:n,elementType:mSe,className:Fe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Ce,component:"span",...ue},getSlotProps:wt=>({...wt,onFocus:ot=>{var st;(st=wt.onFocus)==null||st.call(wt,ot),Me(ot)},onBlur:ot=>{var st;(st=wt.onBlur)==null||st.call(wt,ot),Se(ot)}}),ownerState:We,additionalProps:{centerRipple:!0,focusRipple:!m,disabled:_e,role:void 0,tabIndex:null}}),[gt,Nt]=Ur("input",{ref:I,elementType:gSe,className:Fe.input,externalForwardedProps:Ce,getSlotProps:wt=>({...wt,onChange:ot=>{var st;(st=wt.onChange)==null||st.call(wt,ot),Ae(ot)}}),ownerState:We,additionalProps:{autoFocus:r,checked:s,defaultChecked:d,disabled:_e,id:Pe?C:void 0,name:k,readOnly:H,required:G,tabIndex:X,type:Q,...Q==="checkbox"&&ee===void 0?{}:{value:ee}}});return z.jsxs(He,{...dt,children:[z.jsx(gt,{...Nt}),ae?c:T]})}),vSe=Gi(z.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),_Se=Gi(z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),xSe=Gi(z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function bSe(e){return fr("MuiCheckbox",e)}const Bk=pr("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),wSe=e=>{const{classes:t,indeterminate:n,color:r,size:s}=e,c={root:["root",n&&"indeterminate",`color${Dn(r)}`,`size${Dn(s)}`]},d=dr(c,bSe,t);return{...t,...d}},SSe=Ft(ySe,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${Dn(n.size)}`],n.color!=="default"&&t[`color${Dn(n.color)}`]]}})(Xr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{[`&.${Bk.checked}, &.${Bk.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${Bk.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),TSe=z.jsx(_Se,{}),ESe=z.jsx(vSe,{}),CSe=z.jsx(xSe,{}),f8=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiCheckbox"}),{checkedIcon:s=TSe,color:c="primary",icon:d=ESe,indeterminate:i=!1,indeterminateIcon:m=CSe,inputProps:x,size:T="medium",disableRipple:C=!1,className:A,slots:I={},slotProps:k={},...B}=r,j=i?m:d,V=i?m:s,H={...r,disableRipple:C,color:c,indeterminate:i,size:T},G=wSe(H),X=k.input??x,[Q,ee]=Ur("root",{ref:n,elementType:SSe,className:$n(G.root,A),shouldForwardComponentProp:!0,externalForwardedProps:{slots:I,slotProps:k,...B},ownerState:H,additionalProps:{type:"checkbox",icon:U.cloneElement(j,{fontSize:j.props.fontSize??T}),checkedIcon:U.cloneElement(V,{fontSize:V.props.fontSize??T}),disableRipple:C,slots:I,slotProps:{input:ON(typeof X=="function"?X(H):X,{"data-indeterminate":i})}}});return z.jsx(Q,{...ee,classes:G})});function p8(e){return e.substring(2).toLowerCase()}function MSe(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function rJ(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:s,touchEvent:c="onTouchEnd"}=e,d=U.useRef(!1),i=U.useRef(null),m=U.useRef(!1),x=U.useRef(!1);U.useEffect(()=>(setTimeout(()=>{m.current=!0},0),()=>{m.current=!1}),[]);const T=wo(ny(t),i),C=Er(k=>{const B=x.current;x.current=!1;const j=qa(i.current);if(!m.current||!i.current||"clientX"in k&&MSe(k,j))return;if(d.current){d.current=!1;return}let V;k.composedPath?V=k.composedPath().includes(i.current):V=!j.documentElement.contains(k.target)||i.current.contains(k.target),!V&&(n||!B)&&s(k)}),A=k=>B=>{x.current=!0;const j=t.props[k];j&&j(B)},I={ref:T};return c!==!1&&(I[c]=A(c)),U.useEffect(()=>{if(c!==!1){const k=p8(c),B=qa(i.current),j=()=>{d.current=!0};return B.addEventListener(k,C),B.addEventListener("touchmove",j),()=>{B.removeEventListener(k,C),B.removeEventListener("touchmove",j)}}},[C,c]),r!==!1&&(I[r]=A(r)),U.useEffect(()=>{if(r!==!1){const k=p8(r),B=qa(i.current);return B.addEventListener(k,C),()=>{B.removeEventListener(k,C)}}},[C,r]),U.cloneElement(t,I)}const _B=typeof dN({})=="function",ASe=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),RSe=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),iJ=(e,t=!1)=>{var c,d;const n={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([i,m])=>{var T,C;const x=e.getColorSchemeSelector(i);x.startsWith("@")?n[x]={":root":{colorScheme:(T=m.palette)==null?void 0:T.mode}}:n[x.replace(/\s*&/,"")]={colorScheme:(C=m.palette)==null?void 0:C.mode}});let r={html:ASe(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...RSe(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...n};const s=(d=(c=e.components)==null?void 0:c.MuiCssBaseline)==null?void 0:d.styleOverrides;return s&&(r=[r,s]),r},CA="mui-ecs",DSe=e=>{const t=iJ(e,!1),n=Array.isArray(t)?t[0]:t;return!e.vars&&n&&(n.html[`:root:has(${CA})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([r,s])=>{var d,i;const c=e.getColorSchemeSelector(r);c.startsWith("@")?n[c]={[`:root:not(:has(.${CA}))`]:{colorScheme:(d=s.palette)==null?void 0:d.mode}}:n[c.replace(/\s*&/,"")]={[`&:not(:has(.${CA}))`]:{colorScheme:(i=s.palette)==null?void 0:i.mode}}}),t},PSe=dN(_B?({theme:e,enableColorScheme:t})=>iJ(e,t):({theme:e})=>DSe(e));function ISe(e){const t=Br({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return z.jsxs(U.Fragment,{children:[_B&&z.jsx(PSe,{enableColorScheme:r}),!_B&&!r&&z.jsx("span",{className:CA,style:{display:"none"}}),n]})}function oJ(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function kSe(e){const t=qa(e);return t.body===e?xd(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function JS(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function m8(e){return parseInt(xd(e).getComputedStyle(e).paddingRight,10)||0}function OSe(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function g8(e,t,n,r,s){const c=[t,n,...r];[].forEach.call(e.children,d=>{const i=!c.includes(d),m=!OSe(d);i&&m&&JS(d,s)})}function jk(e,t){let n=-1;return e.some((r,s)=>t(r)?(n=s,!0):!1),n}function LSe(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(kSe(r)){const d=oJ(xd(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${m8(r)+d}px`;const i=qa(r).querySelectorAll(".mui-fixed");[].forEach.call(i,m=>{n.push({value:m.style.paddingRight,property:"padding-right",el:m}),m.style.paddingRight=`${m8(m)+d}px`})}let c;if(r.parentNode instanceof DocumentFragment)c=qa(r).body;else{const d=r.parentElement,i=xd(r);c=(d==null?void 0:d.nodeName)==="HTML"&&i.getComputedStyle(d).overflowY==="scroll"?d:r}n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{n.forEach(({value:c,el:d,property:i})=>{c?d.style.setProperty(i,c):d.style.removeProperty(i)})}}function zSe(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class FSe{constructor(){this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&JS(t.modalRef,!1);const s=zSe(n);g8(n,t.mount,t.modalRef,s,!0);const c=jk(this.containers,d=>d.container===n);return c!==-1?(this.containers[c].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:s}),r)}mount(t,n){const r=jk(this.containers,c=>c.modals.includes(t)),s=this.containers[r];s.restore||(s.restore=LSe(s,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const s=jk(this.containers,d=>d.modals.includes(t)),c=this.containers[s];if(c.modals.splice(c.modals.indexOf(t),1),this.modals.splice(r,1),c.modals.length===0)c.restore&&c.restore(),t.modalRef&&JS(t.modalRef,n),g8(c.container,t.mount,t.modalRef,c.hiddenSiblings,!1),this.containers.splice(s,1);else{const d=c.modals[c.modals.length-1];d.modalRef&&JS(d.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const BSe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function jSe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function NSe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function VSe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||NSe(e))}function $Se(e){const t=[],n=[];return Array.from(e.querySelectorAll(BSe)).forEach((r,s)=>{const c=jSe(r);c===-1||!VSe(r)||(c===0?t.push(r):n.push({documentOrder:s,tabIndex:c,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(t)}function USe(){return!0}function sJ(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:c=$Se,isEnabled:d=USe,open:i}=e,m=U.useRef(!1),x=U.useRef(null),T=U.useRef(null),C=U.useRef(null),A=U.useRef(null),I=U.useRef(!1),k=U.useRef(null),B=wo(ny(t),k),j=U.useRef(null);U.useEffect(()=>{!i||!k.current||(I.current=!n)},[n,i]),U.useEffect(()=>{if(!i||!k.current)return;const G=qa(k.current);return k.current.contains(G.activeElement)||(k.current.hasAttribute("tabIndex")||k.current.setAttribute("tabIndex","-1"),I.current&&k.current.focus()),()=>{s||(C.current&&C.current.focus&&(m.current=!0,C.current.focus()),C.current=null)}},[i]),U.useEffect(()=>{if(!i||!k.current)return;const G=qa(k.current),X=ce=>{j.current=ce,!(r||!d()||ce.key!=="Tab")&&G.activeElement===k.current&&ce.shiftKey&&(m.current=!0,T.current&&T.current.focus())},Q=()=>{var ue,ae;const ce=k.current;if(ce===null)return;if(!G.hasFocus()||!d()||m.current){m.current=!1;return}if(ce.contains(G.activeElement)||r&&G.activeElement!==x.current&&G.activeElement!==T.current)return;if(G.activeElement!==A.current)A.current=null;else if(A.current!==null)return;if(!I.current)return;let fe=[];if((G.activeElement===x.current||G.activeElement===T.current)&&(fe=c(k.current)),fe.length>0){const xe=!!((ue=j.current)!=null&&ue.shiftKey&&((ae=j.current)==null?void 0:ae.key)==="Tab"),we=fe[0],Me=fe[fe.length-1];typeof we!="string"&&typeof Me!="string"&&(xe?Me.focus():we.focus())}else ce.focus()};G.addEventListener("focusin",Q),G.addEventListener("keydown",X,!0);const ee=setInterval(()=>{G.activeElement&&G.activeElement.tagName==="BODY"&&Q()},50);return()=>{clearInterval(ee),G.removeEventListener("focusin",Q),G.removeEventListener("keydown",X,!0)}},[n,r,s,d,i,c]);const V=G=>{C.current===null&&(C.current=G.relatedTarget),I.current=!0,A.current=G.target;const X=t.props.onFocus;X&&X(G)},H=G=>{C.current===null&&(C.current=G.relatedTarget),I.current=!0};return z.jsxs(U.Fragment,{children:[z.jsx("div",{tabIndex:i?0:-1,onFocus:H,ref:x,"data-testid":"sentinelStart"}),U.cloneElement(t,{ref:B,onFocus:V}),z.jsx("div",{tabIndex:i?0:-1,onFocus:H,ref:T,"data-testid":"sentinelEnd"})]})}function qSe(e){return typeof e=="function"?e():e}function HSe(e){return e?e.props.hasOwnProperty("in"):!1}const y8=()=>{},CM=new FSe;function WSe(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:c,onTransitionExited:d,children:i,onClose:m,open:x,rootRef:T}=e,C=U.useRef({}),A=U.useRef(null),I=U.useRef(null),k=wo(I,T),[B,j]=U.useState(!x),V=HSe(i);let H=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(H=!1);const G=()=>qa(A.current),X=()=>(C.current.modalRef=I.current,C.current.mount=A.current,C.current),Q=()=>{CM.mount(X(),{disableScrollLock:r}),I.current&&(I.current.scrollTop=0)},ee=Er(()=>{const Ae=qSe(t)||G().body;CM.add(X(),Ae),I.current&&Q()}),ce=()=>CM.isTopModal(X()),fe=Er(Ae=>{A.current=Ae,Ae&&(x&&ce()?Q():I.current&&JS(I.current,H))}),ue=U.useCallback(()=>{CM.remove(X(),H)},[H]);U.useEffect(()=>()=>{ue()},[ue]),U.useEffect(()=>{x?ee():(!V||!s)&&ue()},[x,ue,V,s,ee]);const ae=Ae=>_e=>{var Pe;(Pe=Ae.onKeyDown)==null||Pe.call(Ae,_e),!(_e.key!=="Escape"||_e.which===229||!ce())&&(n||(_e.stopPropagation(),m&&m(_e,"escapeKeyDown")))},xe=Ae=>_e=>{var Pe;(Pe=Ae.onClick)==null||Pe.call(Ae,_e),_e.target===_e.currentTarget&&m&&m(_e,"backdropClick")};return{getRootProps:(Ae={})=>{const _e=rK(e);delete _e.onTransitionEnter,delete _e.onTransitionExited;const Pe={..._e,...Ae};return{role:"presentation",...Pe,onKeyDown:ae(Pe),ref:k}},getBackdropProps:(Ae={})=>{const _e=Ae;return{"aria-hidden":!0,..._e,onClick:xe(_e),open:x}},getTransitionProps:()=>{const Ae=()=>{j(!1),c&&c()},_e=()=>{j(!0),d&&d(),s&&ue()};return{onEnter:V2(Ae,(i==null?void 0:i.props.onEnter)??y8),onExited:V2(_e,(i==null?void 0:i.props.onExited)??y8)}},rootRef:k,portalRef:fe,isTopModal:ce,exited:B,hasTransition:V}}function GSe(e){return fr("MuiModal",e)}pr("MuiModal",["root","hidden","backdrop"]);const YSe=e=>{const{open:t,exited:n,classes:r}=e;return dr({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},GSe,r)},XSe=Ft("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Xr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),ZSe=Ft(eJ,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),CE=U.forwardRef(function(t,n){const r=Br({name:"MuiModal",props:t}),{BackdropComponent:s=ZSe,BackdropProps:c,classes:d,className:i,closeAfterTransition:m=!1,children:x,container:T,component:C,components:A={},componentsProps:I={},disableAutoFocus:k=!1,disableEnforceFocus:B=!1,disableEscapeKeyDown:j=!1,disablePortal:V=!1,disableRestoreFocus:H=!1,disableScrollLock:G=!1,hideBackdrop:X=!1,keepMounted:Q=!1,onClose:ee,onTransitionEnter:ce,onTransitionExited:fe,open:ue,slotProps:ae={},slots:xe={},theme:we,...Me}=r,Se={...r,closeAfterTransition:m,disableAutoFocus:k,disableEnforceFocus:B,disableEscapeKeyDown:j,disablePortal:V,disableRestoreFocus:H,disableScrollLock:G,hideBackdrop:X,keepMounted:Q},{getRootProps:Ae,getBackdropProps:_e,getTransitionProps:Pe,portalRef:We,isTopModal:Fe,exited:Ce,hasTransition:He}=WSe({...Se,rootRef:n}),dt={...Se,exited:Ce},gt=YSe(dt),Nt={};if(x.props.tabIndex===void 0&&(Nt.tabIndex="-1"),He){const{onEnter:Et,onExited:yt}=Pe();Nt.onEnter=Et,Nt.onExited=yt}const wt={slots:{root:A.Root,backdrop:A.Backdrop,...xe},slotProps:{...I,...ae}},[ot,st]=Ur("root",{ref:n,elementType:XSe,externalForwardedProps:{...wt,...Me,component:C},getSlotProps:Ae,ownerState:dt,className:$n(i,gt==null?void 0:gt.root,!dt.open&&dt.exited&&(gt==null?void 0:gt.hidden))}),[St,Dt]=Ur("backdrop",{ref:c==null?void 0:c.ref,elementType:s,externalForwardedProps:wt,shouldForwardComponentProp:!0,additionalProps:c,getSlotProps:Et=>_e({...Et,onClick:yt=>{Et!=null&&Et.onClick&&Et.onClick(yt)}}),className:$n(c==null?void 0:c.className,gt==null?void 0:gt.backdrop),ownerState:dt});return!Q&&!ue&&(!He||Ce)?null:z.jsx(JQ,{ref:We,container:T,disablePortal:V,children:z.jsxs(ot,{...st,children:[!X&&s?z.jsx(St,{...Dt}):null,z.jsx(sJ,{disableEnforceFocus:B,disableAutoFocus:k,disableRestoreFocus:H,isEnabled:Fe,open:ue,children:U.cloneElement(x,Nt)})]})})});function KSe(e){return fr("MuiDialog",e)}const eT=pr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),aJ=U.createContext({}),QSe=Ft(eJ,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),JSe=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:s,fullScreen:c}=e,d={root:["root"],container:["container",`scroll${Dn(n)}`],paper:["paper",`paperScroll${Dn(n)}`,`paperWidth${Dn(String(r))}`,s&&"paperFullWidth",c&&"paperFullScreen"]};return dr(d,KSe,t)},eTe=Ft(CE,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),tTe=Ft("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Dn(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),nTe=Ft(fa,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Dn(n.scroll)}`],t[`paperWidth${Dn(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(Xr(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${eT.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${eT.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${eT.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),SR=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiDialog"}),s=Zo(),c={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":d,"aria-labelledby":i,"aria-modal":m=!0,BackdropComponent:x,BackdropProps:T,children:C,className:A,disableEscapeKeyDown:I=!1,fullScreen:k=!1,fullWidth:B=!1,maxWidth:j="sm",onClick:V,onClose:H,open:G,PaperComponent:X=fa,PaperProps:Q={},scroll:ee="paper",slots:ce={},slotProps:fe={},TransitionComponent:ue=gm,transitionDuration:ae=c,TransitionProps:xe,...we}=r,Me={...r,disableEscapeKeyDown:I,fullScreen:k,fullWidth:B,maxWidth:j,scroll:ee},Se=JSe(Me),Ae=U.useRef(),_e=Ct=>{Ae.current=Ct.target===Ct.currentTarget},Pe=Ct=>{V&&V(Ct),Ae.current&&(Ae.current=null,H&&H(Ct,"backdropClick"))},We=kh(i),Fe=U.useMemo(()=>({titleId:We}),[We]),Ce={transition:ue,...ce},He={transition:xe,paper:Q,backdrop:T,...fe},dt={slots:Ce,slotProps:He},[gt,Nt]=Ur("root",{elementType:eTe,shouldForwardComponentProp:!0,externalForwardedProps:dt,ownerState:Me,className:$n(Se.root,A),ref:n}),[wt,ot]=Ur("backdrop",{elementType:QSe,shouldForwardComponentProp:!0,externalForwardedProps:dt,ownerState:Me}),[st,St]=Ur("paper",{elementType:nTe,shouldForwardComponentProp:!0,externalForwardedProps:dt,ownerState:Me,className:$n(Se.paper,Q.className)}),[Dt,Et]=Ur("container",{elementType:tTe,externalForwardedProps:dt,ownerState:Me,className:Se.container}),[yt,Lt]=Ur("transition",{elementType:gm,externalForwardedProps:dt,ownerState:Me,additionalProps:{appear:!0,in:G,timeout:ae,role:"presentation"}});return z.jsx(gt,{closeAfterTransition:!0,slots:{backdrop:wt},slotProps:{backdrop:{transitionDuration:ae,as:x,...ot}},disableEscapeKeyDown:I,onClose:H,open:G,onClick:Pe,...Nt,...we,children:z.jsx(yt,{...Lt,children:z.jsx(Dt,{onMouseDown:_e,...Et,children:z.jsx(st,{as:X,elevation:24,role:"dialog","aria-describedby":d,"aria-labelledby":We,"aria-modal":m,...St,children:z.jsx(aJ.Provider,{value:Fe,children:C})})})})})});function rTe(e){return fr("MuiDialogActions",e)}pr("MuiDialogActions",["root","spacing"]);const iTe=e=>{const{classes:t,disableSpacing:n}=e;return dr({root:["root",!n&&"spacing"]},rTe,t)},oTe=Ft("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),TR=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiDialogActions"}),{className:s,disableSpacing:c=!1,...d}=r,i={...r,disableSpacing:c},m=iTe(i);return z.jsx(oTe,{className:$n(m.root,s),ownerState:i,ref:n,...d})});function sTe(e){return fr("MuiDialogContent",e)}pr("MuiDialogContent",["root","dividers"]);function aTe(e){return fr("MuiDialogTitle",e)}const lTe=pr("MuiDialogTitle",["root"]),cTe=e=>{const{classes:t,dividers:n}=e;return dr({root:["root",n&&"dividers"]},sTe,t)},uTe=Ft("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(Xr(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${lTe.root} + &`]:{paddingTop:0}}}]}))),ER=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiDialogContent"}),{className:s,dividers:c=!1,...d}=r,i={...r,dividers:c},m=cTe(i);return z.jsx(uTe,{className:$n(m.root,s),ownerState:i,ref:n,...d})}),dTe=e=>{const{classes:t}=e;return dr({root:["root"]},aTe,t)},hTe=Ft(En,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),xB=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiDialogTitle"}),{className:s,id:c,...d}=r,i=r,m=dTe(i),{titleId:x=c}=U.useContext(aJ);return z.jsx(hTe,{component:"h2",className:$n(m.root,s),ownerState:i,ref:n,variant:"h6",id:c??x,...d})});function fTe(e,t,n){const r=t.getBoundingClientRect(),s=n&&n.getBoundingClientRect(),c=xd(t);let d;if(t.fakeTransform)d=t.fakeTransform;else{const x=c.getComputedStyle(t);d=x.getPropertyValue("-webkit-transform")||x.getPropertyValue("transform")}let i=0,m=0;if(d&&d!=="none"&&typeof d=="string"){const x=d.split("(")[1].split(")")[0].split(",");i=parseInt(x[4],10),m=parseInt(x[5],10)}return e==="left"?s?`translateX(${s.right+i-r.left}px)`:`translateX(${c.innerWidth+i-r.left}px)`:e==="right"?s?`translateX(-${r.right-s.left-i}px)`:`translateX(-${r.left+r.width-i}px)`:e==="up"?s?`translateY(${s.bottom+m-r.top}px)`:`translateY(${c.innerHeight+m-r.top}px)`:s?`translateY(-${r.top-s.top+r.height-m}px)`:`translateY(-${r.top+r.height-m}px)`}function pTe(e){return typeof e=="function"?e():e}function MM(e,t,n){const r=pTe(n),s=fTe(e,t,r);s&&(t.style.webkitTransform=s,t.style.transform=s)}const lJ=U.forwardRef(function(t,n){const r=Zo(),s={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},c={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:d,appear:i=!0,children:m,container:x,direction:T="down",easing:C=s,in:A,onEnter:I,onEntered:k,onEntering:B,onExit:j,onExited:V,onExiting:H,style:G,timeout:X=c,TransitionComponent:Q=Iu,...ee}=t,ce=U.useRef(null),fe=wo(ny(m),ce,n),ue=We=>Fe=>{We&&(Fe===void 0?We(ce.current):We(ce.current,Fe))},ae=ue((We,Fe)=>{MM(T,We,x),VD(We),I&&I(We,Fe)}),xe=ue((We,Fe)=>{const Ce=pm({timeout:X,style:G,easing:C},{mode:"enter"});We.style.webkitTransition=r.transitions.create("-webkit-transform",{...Ce}),We.style.transition=r.transitions.create("transform",{...Ce}),We.style.webkitTransform="none",We.style.transform="none",B&&B(We,Fe)}),we=ue(k),Me=ue(H),Se=ue(We=>{const Fe=pm({timeout:X,style:G,easing:C},{mode:"exit"});We.style.webkitTransition=r.transitions.create("-webkit-transform",Fe),We.style.transition=r.transitions.create("transform",Fe),MM(T,We,x),j&&j(We)}),Ae=ue(We=>{We.style.webkitTransition="",We.style.transition="",V&&V(We)}),_e=We=>{d&&d(ce.current,We)},Pe=U.useCallback(()=>{ce.current&&MM(T,ce.current,x)},[T,x]);return U.useEffect(()=>{if(A||T==="down"||T==="right")return;const We=bE(()=>{ce.current&&MM(T,ce.current,x)}),Fe=xd(ce.current);return Fe.addEventListener("resize",We),()=>{We.clear(),Fe.removeEventListener("resize",We)}},[T,A,x]),U.useEffect(()=>{A||Pe()},[A,Pe]),z.jsx(Q,{nodeRef:ce,onEnter:ae,onEntered:we,onEntering:xe,onExit:Se,onExited:Ae,onExiting:Me,addEndListener:_e,appear:i,in:A,timeout:X,...ee,children:(We,{ownerState:Fe,...Ce})=>U.cloneElement(m,{ref:fe,style:{visibility:We==="exited"&&!A?"hidden":void 0,...G,...m.props.style},...Ce})})});function mTe(e){return fr("MuiDrawer",e)}pr("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const cJ=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},gTe=e=>{const{classes:t,anchor:n,variant:r}=e,s={root:["root",`anchor${Dn(n)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Dn(n)}`,r!=="temporary"&&`paperAnchorDocked${Dn(n)}`]};return dr(s,mTe,t)},yTe=Ft(CE,{name:"MuiDrawer",slot:"Root",overridesResolver:cJ})(Xr(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),vTe=Ft("div",{shouldForwardProp:Tc,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:cJ})({flex:"0 0 auto"}),_Te=Ft(fa,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Dn(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Dn(n.anchor)}`]]}})(Xr(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),uJ={left:"right",right:"left",top:"down",bottom:"up"};function xTe(e){return["left","right"].includes(e)}function bTe({direction:e},t){return e==="rtl"&&xTe(t)?uJ[t]:t}const dJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiDrawer"}),s=Zo(),c=Al(),d={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{anchor:i="left",BackdropProps:m,children:x,className:T,elevation:C=16,hideBackdrop:A=!1,ModalProps:{BackdropProps:I,...k}={},onClose:B,open:j=!1,PaperProps:V={},SlideProps:H,TransitionComponent:G,transitionDuration:X=d,variant:Q="temporary",slots:ee={},slotProps:ce={},...fe}=r,ue=U.useRef(!1);U.useEffect(()=>{ue.current=!0},[]);const ae=bTe({direction:c?"rtl":"ltr"},i),we={...r,anchor:i,elevation:C,open:j,variant:Q,...fe},Me=gTe(we),Se={slots:{transition:G,...ee},slotProps:{paper:V,transition:H,...ce,backdrop:ON(ce.backdrop||{...m,...I},{transitionDuration:X})}},[Ae,_e]=Ur("root",{ref:n,elementType:yTe,className:$n(Me.root,Me.modal,T),shouldForwardComponentProp:!0,ownerState:we,externalForwardedProps:{...Se,...fe,...k},additionalProps:{open:j,onClose:B,hideBackdrop:A,slots:{backdrop:Se.slots.backdrop},slotProps:{backdrop:Se.slotProps.backdrop}}}),[Pe,We]=Ur("paper",{elementType:_Te,shouldForwardComponentProp:!0,className:$n(Me.paper,V.className),ownerState:we,externalForwardedProps:Se,additionalProps:{elevation:Q==="temporary"?C:0,square:!0}}),[Fe,Ce]=Ur("docked",{elementType:vTe,ref:n,className:$n(Me.root,Me.docked,T),ownerState:we,externalForwardedProps:Se,additionalProps:fe}),[He,dt]=Ur("transition",{elementType:lJ,ownerState:we,externalForwardedProps:Se,additionalProps:{in:j,direction:uJ[ae],timeout:X,appear:ue.current}}),gt=z.jsx(Pe,{...We,children:x});if(Q==="permanent")return z.jsx(Fe,{...Ce,children:gt});const Nt=z.jsx(He,{...dt,children:gt});return Q==="persistent"?z.jsx(Fe,{...Ce,children:Nt}):z.jsx(Ae,{..._e,children:Nt})}),wTe=e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:s,size:c,hiddenLabel:d,multiline:i}=e,m={root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd",c==="small"&&`size${Dn(c)}`,d&&"hiddenLabel",i&&"multiline"],input:["input"]},x=dr(m,Dwe,t);return{...t,...x}},STe=Ft(WD,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...qD(e,t),!n.disableUnderline&&t.underline]}})(Xr(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${e0.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${e0.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[{props:({ownerState:d})=>!d.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${e0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${e0.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${e0.disabled}, .${e0.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${e0.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(vs()).map(([d])=>{var i;return{props:{disableUnderline:!1,color:d},style:{"&::after":{borderBottom:`2px solid ${(i=(e.vars||e).palette[d])==null?void 0:i.main}`}}}}),{props:({ownerState:d})=>d.startAdornment,style:{paddingLeft:12}},{props:({ownerState:d})=>d.endAdornment,style:{paddingRight:12}},{props:({ownerState:d})=>d.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:d,size:i})=>d.multiline&&i==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel&&d.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),TTe=Ft(GD,{name:"MuiFilledInput",slot:"Input",overridesResolver:HD})(Xr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),HN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:c={},componentsProps:d,fullWidth:i=!1,hiddenLabel:m,inputComponent:x="input",multiline:T=!1,slotProps:C,slots:A={},type:I="text",...k}=r,B={...r,disableUnderline:s,fullWidth:i,inputComponent:x,multiline:T,type:I},j=wTe(r),V={root:{ownerState:B},input:{ownerState:B}},H=C??d?Tl(V,C??d):V,G=A.root??c.Root??STe,X=A.input??c.Input??TTe;return z.jsx(YD,{slots:{root:G,input:X},slotProps:H,fullWidth:i,inputComponent:x,multiline:T,ref:n,type:I,...k,classes:j})});HN.muiName="Input";function ETe(e){return fr("MuiFormControl",e)}pr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const CTe=e=>{const{classes:t,margin:n,fullWidth:r}=e,s={root:["root",n!=="none"&&`margin${Dn(n)}`,r&&"fullWidth"]};return dr(s,ETe,t)},MTe=Ft("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${Dn(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),tu=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiFormControl"}),{children:s,className:c,color:d="primary",component:i="div",disabled:m=!1,error:x=!1,focused:T,fullWidth:C=!1,hiddenLabel:A=!1,margin:I="none",required:k=!1,size:B="medium",variant:j="outlined",...V}=r,H={...r,color:d,component:i,disabled:m,error:x,fullWidth:C,hiddenLabel:A,margin:I,required:k,size:B,variant:j},G=CTe(H),[X,Q]=U.useState(()=>{let Ae=!1;return s&&U.Children.forEach(s,_e=>{if(!GS(_e,["Input","Select"]))return;const Pe=GS(_e,["Select"])?_e.props.input:_e;Pe&&Ewe(Pe.props)&&(Ae=!0)}),Ae}),[ee,ce]=U.useState(()=>{let Ae=!1;return s&&U.Children.forEach(s,_e=>{GS(_e,["Input","Select"])&&(wR(_e.props,!0)||wR(_e.props.inputProps,!0))&&(Ae=!0)}),Ae}),[fe,ue]=U.useState(!1);m&&fe&&ue(!1);const ae=T!==void 0&&!m?T:fe;let xe;U.useRef(!1);const we=U.useCallback(()=>{ce(!0)},[]),Me=U.useCallback(()=>{ce(!1)},[]),Se=U.useMemo(()=>({adornedStart:X,setAdornedStart:Q,color:d,disabled:m,error:x,filled:ee,focused:ae,fullWidth:C,hiddenLabel:A,size:B,onBlur:()=>{ue(!1)},onFocus:()=>{ue(!0)},onEmpty:Me,onFilled:we,registerEffect:xe,required:k,variant:j}),[X,d,m,x,ee,ae,C,A,xe,Me,we,k,B,j]);return z.jsx(UD.Provider,{value:Se,children:z.jsx(MTe,{as:i,ownerState:H,className:$n(G.root,c),ref:n,...V,children:s})})});function ATe(e){return fr("MuiFormControlLabel",e)}const FS=pr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),RTe=e=>{const{classes:t,disabled:n,labelPlacement:r,error:s,required:c}=e,d={root:["root",n&&"disabled",`labelPlacement${Dn(r)}`,s&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return dr(d,ATe,t)},DTe=Ft("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${FS.label}`]:t.label},t.root,t[`labelPlacement${Dn(n.labelPlacement)}`]]}})(Xr(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${FS.disabled}`]:{cursor:"default"},[`& .${FS.label}`]:{[`&.${FS.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),PTe=Ft("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Xr(({theme:e})=>({[`&.${FS.error}`]:{color:(e.vars||e).palette.error.main}}))),v8=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiFormControlLabel"}),{checked:s,className:c,componentsProps:d={},control:i,disabled:m,disableTypography:x,inputRef:T,label:C,labelPlacement:A="end",name:I,onChange:k,required:B,slots:j={},slotProps:V={},value:H,...G}=r,X=jh(),Q=m??i.props.disabled??(X==null?void 0:X.disabled),ee=B??i.props.required,ce={disabled:Q,required:ee};["checked","name","onChange","value","inputRef"].forEach(Ae=>{typeof i.props[Ae]>"u"&&typeof r[Ae]<"u"&&(ce[Ae]=r[Ae])});const fe=Av({props:r,muiFormControl:X,states:["error"]}),ue={...r,disabled:Q,labelPlacement:A,required:ee,error:fe.error},ae=RTe(ue),xe={slots:j,slotProps:{...d,...V}},[we,Me]=Ur("typography",{elementType:En,externalForwardedProps:xe,ownerState:ue});let Se=C;return Se!=null&&Se.type!==En&&!x&&(Se=z.jsx(we,{component:"span",...Me,className:$n(ae.label,Me==null?void 0:Me.className),children:Se})),z.jsxs(DTe,{className:$n(ae.root,c),ownerState:ue,ref:n,...G,children:[U.cloneElement(i,ce),ee?z.jsxs("div",{children:[Se,z.jsxs(PTe,{ownerState:ue,"aria-hidden":!0,className:ae.asterisk,children:[" ","*"]})]}):Se]})});function ITe(e){return fr("MuiFormGroup",e)}pr("MuiFormGroup",["root","row","error"]);const kTe=e=>{const{classes:t,row:n,error:r}=e;return dr({root:["root",n&&"row",r&&"error"]},ITe,t)},OTe=Ft("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),LTe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiFormGroup"}),{className:s,row:c=!1,...d}=r,i=jh(),m=Av({props:r,muiFormControl:i,states:["error"]}),x={...r,row:c,error:m.error},T=kTe(x);return z.jsx(OTe,{className:$n(T.root,s),ownerState:x,ref:n,...d})});function zTe(e){return fr("MuiFormHelperText",e)}const _8=pr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var x8;const FTe=e=>{const{classes:t,contained:n,size:r,disabled:s,error:c,filled:d,focused:i,required:m}=e,x={root:["root",s&&"disabled",c&&"error",r&&`size${Dn(r)}`,n&&"contained",i&&"focused",d&&"filled",m&&"required"]};return dr(x,zTe,t)},BTe=Ft("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Dn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(Xr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${_8.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${_8.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),hJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiFormHelperText"}),{children:s,className:c,component:d="p",disabled:i,error:m,filled:x,focused:T,margin:C,required:A,variant:I,...k}=r,B=jh(),j=Av({props:r,muiFormControl:B,states:["variant","size","disabled","error","filled","focused","required"]}),V={...r,component:d,contained:j.variant==="filled"||j.variant==="outlined",variant:j.variant,size:j.size,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required};delete V.ownerState;const H=FTe(V);return z.jsx(BTe,{as:d,className:$n(H.root,c),ref:n,...k,ownerState:V,children:s===" "?x8||(x8=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):s})});function jTe(e){return fr("MuiFormLabel",e)}const tT=pr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),NTe=e=>{const{classes:t,color:n,focused:r,disabled:s,error:c,filled:d,required:i}=e,m={root:["root",`color${Dn(n)}`,s&&"disabled",c&&"error",d&&"filled",r&&"focused",i&&"required"],asterisk:["asterisk",c&&"error"]};return dr(m,jTe,t)},VTe=Ft("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(Xr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{color:t},style:{[`&.${tT.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${tT.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${tT.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),$Te=Ft("span",{name:"MuiFormLabel",slot:"Asterisk"})(Xr(({theme:e})=>({[`&.${tT.error}`]:{color:(e.vars||e).palette.error.main}}))),UTe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiFormLabel"}),{children:s,className:c,color:d,component:i="label",disabled:m,error:x,filled:T,focused:C,required:A,...I}=r,k=jh(),B=Av({props:r,muiFormControl:k,states:["color","required","focused","disabled","error","filled"]}),j={...r,color:B.color||"primary",component:i,disabled:B.disabled,error:B.error,filled:B.filled,focused:B.focused,required:B.required},V=NTe(j);return z.jsxs(VTe,{as:i,ownerState:j,className:$n(V.root,c),ref:n,...I,children:[s,B.required&&z.jsxs($Te,{ownerState:j,"aria-hidden":!0,className:V.asterisk,children:[" ","*"]})]})});function bB(e){return`scale(${e}, ${e**2})`}const qTe={entering:{opacity:1,transform:bB(1)},entered:{opacity:1,transform:"none"}},Nk=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),f1=U.forwardRef(function(t,n){const{addEndListener:r,appear:s=!0,children:c,easing:d,in:i,onEnter:m,onEntered:x,onEntering:T,onExit:C,onExited:A,onExiting:I,style:k,timeout:B="auto",TransitionComponent:j=Iu,...V}=t,H=md(),G=U.useRef(),X=Zo(),Q=U.useRef(null),ee=wo(Q,ny(c),n),ce=Ae=>_e=>{if(Ae){const Pe=Q.current;_e===void 0?Ae(Pe):Ae(Pe,_e)}},fe=ce(T),ue=ce((Ae,_e)=>{VD(Ae);const{duration:Pe,delay:We,easing:Fe}=pm({style:k,timeout:B,easing:d},{mode:"enter"});let Ce;B==="auto"?(Ce=X.transitions.getAutoHeightDuration(Ae.clientHeight),G.current=Ce):Ce=Pe,Ae.style.transition=[X.transitions.create("opacity",{duration:Ce,delay:We}),X.transitions.create("transform",{duration:Nk?Ce:Ce*.666,delay:We,easing:Fe})].join(","),m&&m(Ae,_e)}),ae=ce(x),xe=ce(I),we=ce(Ae=>{const{duration:_e,delay:Pe,easing:We}=pm({style:k,timeout:B,easing:d},{mode:"exit"});let Fe;B==="auto"?(Fe=X.transitions.getAutoHeightDuration(Ae.clientHeight),G.current=Fe):Fe=_e,Ae.style.transition=[X.transitions.create("opacity",{duration:Fe,delay:Pe}),X.transitions.create("transform",{duration:Nk?Fe:Fe*.666,delay:Nk?Pe:Pe||Fe*.333,easing:We})].join(","),Ae.style.opacity=0,Ae.style.transform=bB(.75),C&&C(Ae)}),Me=ce(A),Se=Ae=>{B==="auto"&&H.start(G.current||0,Ae),r&&r(Q.current,Ae)};return z.jsx(j,{appear:s,in:i,nodeRef:Q,onEnter:ue,onEntered:ae,onEntering:fe,onExit:we,onExited:Me,onExiting:xe,addEndListener:Se,timeout:B==="auto"?null:B,...V,children:(Ae,{ownerState:_e,...Pe})=>U.cloneElement(c,{style:{opacity:0,transform:bB(.75),visibility:Ae==="exited"&&!i?"hidden":void 0,...qTe[Ae],...k,...c.props.style},ref:ee,...Pe})})});f1&&(f1.muiSupportAuto=!0);const HTe=e=>{const{classes:t,disableUnderline:n}=e,s=dr({root:["root",!n&&"underline"],input:["input"]},Awe,t);return{...t,...s}},WTe=Ft(WD,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...qD(e,t),!n.disableUnderline&&t.underline]}})(Xr(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hS.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hS.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hS.disabled}, .${hS.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${hS.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(vs()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}}))]}})),GTe=Ft(GD,{name:"MuiInput",slot:"Input",overridesResolver:HD})({}),WN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiInput"}),{disableUnderline:s=!1,components:c={},componentsProps:d,fullWidth:i=!1,inputComponent:m="input",multiline:x=!1,slotProps:T,slots:C={},type:A="text",...I}=r,k=HTe(r),j={root:{ownerState:{disableUnderline:s}}},V=T??d?Tl(T??d,j):j,H=C.root??c.Root??WTe,G=C.input??c.Input??GTe;return z.jsx(YD,{slots:{root:H,input:G},slotProps:V,fullWidth:i,inputComponent:m,multiline:x,ref:n,type:A,...I,classes:k})});WN.muiName="Input";function YTe(e){return fr("MuiInputAdornment",e)}const b8=pr("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var w8;const XTe=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Dn(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},ZTe=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:s,size:c,variant:d}=e,i={root:["root",n&&"disablePointerEvents",s&&`position${Dn(s)}`,d,r&&"hiddenLabel",c&&`size${Dn(c)}`]};return dr(i,YTe,t)},KTe=Ft("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:XTe})(Xr(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${b8.positionStart}&:not(.${b8.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),BS=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiInputAdornment"}),{children:s,className:c,component:d="div",disablePointerEvents:i=!1,disableTypography:m=!1,position:x,variant:T,...C}=r,A=jh()||{};let I=T;T&&A.variant,A&&!I&&(I=A.variant);const k={...r,hiddenLabel:A.hiddenLabel,size:A.size,disablePointerEvents:i,position:x,variant:I},B=ZTe(k);return z.jsx(UD.Provider,{value:null,children:z.jsx(KTe,{as:d,ownerState:k,className:$n(B.root,c),ref:n,...C,children:typeof s=="string"&&!m?z.jsx(En,{color:"textSecondary",children:s}):z.jsxs(U.Fragment,{children:[x==="start"?w8||(w8=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,s]})})})});function QTe(e){return fr("MuiInputLabel",e)}pr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const JTe=e=>{const{classes:t,formControl:n,size:r,shrink:s,disableAnimation:c,variant:d,required:i}=e,m={root:["root",n&&"formControl",!c&&"animated",s&&"shrink",r&&r!=="medium"&&`size${Dn(r)}`,d],asterisk:[i&&"asterisk"]},x=dr(m,QTe,t);return{...t,...x}},eEe=Ft(UTe,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${tT.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(Xr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:r})=>t==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Xg=U.forwardRef(function(t,n){const r=Br({name:"MuiInputLabel",props:t}),{disableAnimation:s=!1,margin:c,shrink:d,variant:i,className:m,...x}=r,T=jh();let C=d;typeof C>"u"&&T&&(C=T.filled||T.focused||T.adornedStart);const A=Av({props:r,muiFormControl:T,states:["size","variant","required","focused"]}),I={...r,disableAnimation:s,formControl:T,shrink:C,size:A.size,variant:A.variant,required:A.required,focused:A.focused},k=JTe(I);return z.jsx(eEe,{"data-shrink":C,ref:n,className:$n(k.root,m),...x,ownerState:I,classes:k})});function tEe(e){return fr("MuiLink",e)}const nEe=pr("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),rEe=({theme:e,ownerState:t})=>{const n=t.color,r=ov(e,`palette.${n}.main`,!1)||ov(e,`palette.${n}`,!1)||t.color,s=ov(e,`palette.${n}.mainChannel`)||ov(e,`palette.${n}Channel`);return"vars"in e&&s?`rgba(${s} / 0.4)`:ei(r,.4)},S8={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},iEe=e=>{const{classes:t,component:n,focusVisible:r,underline:s}=e,c={root:["root",`underline${Dn(s)}`,n==="button"&&"button",r&&"focusVisible"]};return dr(c,tEe,t)},oEe=Ft(En,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${Dn(n.underline)}`],n.component==="button"&&t.button]}})(Xr(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:n})=>t==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(vs()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:ei(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ei(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:ei(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${nEe.focusVisible}`]:{outline:"auto"}}}]}))),sEe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiLink"}),s=Zo(),{className:c,color:d="primary",component:i="a",onBlur:m,onFocus:x,TypographyClasses:T,underline:C="always",variant:A="inherit",sx:I,...k}=r,[B,j]=U.useState(!1),V=Q=>{a1(Q.target)||j(!1),m&&m(Q)},H=Q=>{a1(Q.target)&&j(!0),x&&x(Q)},G={...r,color:d,component:i,focusVisible:B,underline:C,variant:A},X=iEe(G);return z.jsx(oEe,{color:d,className:$n(X.root,c),classes:T,component:i,onBlur:V,onFocus:H,ref:n,ownerState:G,variant:A,...k,sx:[...S8[d]===void 0?[{color:d}]:[],...Array.isArray(I)?I:[I]],style:{...k.style,...C==="always"&&d!=="inherit"&&!S8[d]&&{"--Link-underlineColor":rEe({theme:s,ownerState:G})}}})}),Ch=U.createContext({});function aEe(e){return fr("MuiList",e)}pr("MuiList",["root","padding","dense","subheader"]);const lEe=e=>{const{classes:t,disablePadding:n,dense:r,subheader:s}=e;return dr({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},aEe,t)},cEe=Ft("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),Rv=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiList"}),{children:s,className:c,component:d="ul",dense:i=!1,disablePadding:m=!1,subheader:x,...T}=r,C=U.useMemo(()=>({dense:i}),[i]),A={...r,component:d,dense:i,disablePadding:m},I=lEe(A);return z.jsx(Ch.Provider,{value:C,children:z.jsxs(cEe,{as:d,className:$n(I.root,c),ref:n,ownerState:A,...T,children:[x,s]})})});function uEe(e){return fr("MuiListItem",e)}pr("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function dEe(e){return fr("MuiListItemButton",e)}const kb=pr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),hEe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},fEe=e=>{const{alignItems:t,classes:n,dense:r,disabled:s,disableGutters:c,divider:d,selected:i}=e,x=dr({root:["root",r&&"dense",!c&&"gutters",d&&"divider",s&&"disabled",t==="flex-start"&&"alignItemsFlexStart",i&&"selected"]},dEe,n);return{...n,...x}},pEe=Ft(bd,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:hEe})(Xr(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${kb.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ei(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${kb.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${kb.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ei(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ei(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${kb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${kb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),GN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:c=!1,component:d="div",children:i,dense:m=!1,disableGutters:x=!1,divider:T=!1,focusVisibleClassName:C,selected:A=!1,className:I,...k}=r,B=U.useContext(Ch),j=U.useMemo(()=>({dense:m||B.dense||!1,alignItems:s,disableGutters:x}),[s,B.dense,m,x]),V=U.useRef(null);Qs(()=>{c&&V.current&&V.current.focus()},[c]);const H={...r,alignItems:s,dense:j.dense,disableGutters:x,divider:T,selected:A},G=fEe(H),X=wo(V,n);return z.jsx(Ch.Provider,{value:j,children:z.jsx(pEe,{ref:X,href:k.href||k.to,component:(k.href||k.to)&&d==="div"?"button":d,focusVisibleClassName:$n(G.focusVisible,C),ownerState:H,className:$n(G.root,I),...k,classes:G,children:i})})});function mEe(e){return fr("MuiListItemSecondaryAction",e)}pr("MuiListItemSecondaryAction",["root","disableGutters"]);const gEe=e=>{const{disableGutters:t,classes:n}=e;return dr({root:["root",t&&"disableGutters"]},mEe,n)},yEe=Ft("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),fJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiListItemSecondaryAction"}),{className:s,...c}=r,d=U.useContext(Ch),i={...r,disableGutters:d.disableGutters},m=gEe(i);return z.jsx(yEe,{className:$n(m.root,s),ownerState:i,ref:n,...c})});fJ.muiName="ListItemSecondaryAction";const vEe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},_Ee=e=>{const{alignItems:t,classes:n,dense:r,disableGutters:s,disablePadding:c,divider:d,hasSecondaryAction:i}=e;return dr({root:["root",r&&"dense",!s&&"gutters",!c&&"padding",d&&"divider",t==="flex-start"&&"alignItemsFlexStart",i&&"secondaryAction"],container:["container"]},uEe,n)},xEe=Ft("div",{name:"MuiListItem",slot:"Root",overridesResolver:vEe})(Xr(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${kb.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),bEe=Ft("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),YN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiListItem"}),{alignItems:s="center",children:c,className:d,component:i,components:m={},componentsProps:x={},ContainerComponent:T="li",ContainerProps:{className:C,...A}={},dense:I=!1,disableGutters:k=!1,disablePadding:B=!1,divider:j=!1,secondaryAction:V,slotProps:H={},slots:G={},...X}=r,Q=U.useContext(Ch),ee=U.useMemo(()=>({dense:I||Q.dense||!1,alignItems:s,disableGutters:k}),[s,Q.dense,I,k]),ce=U.useRef(null),fe=U.Children.toArray(c),ue=fe.length&&GS(fe[fe.length-1],["ListItemSecondaryAction"]),ae={...r,alignItems:s,dense:ee.dense,disableGutters:k,disablePadding:B,divider:j,hasSecondaryAction:ue},xe=_Ee(ae),we=wo(ce,n),Me=G.root||m.Root||xEe,Se=H.root||x.root||{},Ae={className:$n(xe.root,Se.className,d),...X};let _e=i||"li";return ue?(_e=!Ae.component&&!i?"div":_e,T==="li"&&(_e==="li"?_e="div":Ae.component==="li"&&(Ae.component="div")),z.jsx(Ch.Provider,{value:ee,children:z.jsxs(bEe,{as:T,className:$n(xe.container,C),ref:we,ownerState:ae,...A,children:[z.jsx(Me,{...Se,...!ET(Me)&&{as:_e,ownerState:{...ae,...Se.ownerState}},...Ae,children:fe}),fe.pop()]})})):z.jsx(Ch.Provider,{value:ee,children:z.jsxs(Me,{...Se,as:_e,ref:we,...!ET(Me)&&{ownerState:{...ae,...Se.ownerState}},...Ae,children:[fe,V&&z.jsx(fJ,{children:V})]})})});function wEe(e){return fr("MuiListItemAvatar",e)}pr("MuiListItemAvatar",["root","alignItemsFlexStart"]);const SEe=e=>{const{alignItems:t,classes:n}=e;return dr({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},wEe,n)},TEe=Ft("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),pJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiListItemAvatar"}),{className:s,...c}=r,d=U.useContext(Ch),i={...r,alignItems:d.alignItems},m=SEe(i);return z.jsx(TEe,{className:$n(m.root,s),ownerState:i,ref:n,...c})});function EEe(e){return fr("MuiListItemIcon",e)}const T8=pr("MuiListItemIcon",["root","alignItemsFlexStart"]),CEe=e=>{const{alignItems:t,classes:n}=e;return dr({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},EEe,n)},MEe=Ft("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(Xr(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),XN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiListItemIcon"}),{className:s,...c}=r,d=U.useContext(Ch),i={...r,alignItems:d.alignItems},m=CEe(i);return z.jsx(MEe,{className:$n(m.root,s),ownerState:i,ref:n,...c})});function AEe(e){return fr("MuiListItemText",e)}const Nb=pr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),REe=e=>{const{classes:t,inset:n,primary:r,secondary:s,dense:c}=e;return dr({root:["root",n&&"inset",c&&"dense",r&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},AEe,t)},DEe=Ft("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Nb.primary}`]:t.primary},{[`& .${Nb.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${aR.root}:where(& .${Nb.primary})`]:{display:"block"},[`.${aR.root}:where(& .${Nb.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),XD=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiListItemText"}),{children:s,className:c,disableTypography:d=!1,inset:i=!1,primary:m,primaryTypographyProps:x,secondary:T,secondaryTypographyProps:C,slots:A={},slotProps:I={},...k}=r,{dense:B}=U.useContext(Ch);let j=m??s,V=T;const H={...r,disableTypography:d,inset:i,primary:!!j,secondary:!!V,dense:B},G=REe(H),X={slots:A,slotProps:{primary:x,secondary:C,...I}},[Q,ee]=Ur("root",{className:$n(G.root,c),elementType:DEe,externalForwardedProps:{...X,...k},ownerState:H,ref:n}),[ce,fe]=Ur("primary",{className:G.primary,elementType:En,externalForwardedProps:X,ownerState:H}),[ue,ae]=Ur("secondary",{className:G.secondary,elementType:En,externalForwardedProps:X,ownerState:H});return j!=null&&j.type!==En&&!d&&(j=z.jsx(ce,{variant:B?"body2":"body1",component:fe!=null&&fe.variant?void 0:"span",...fe,children:j})),V!=null&&V.type!==En&&!d&&(V=z.jsx(ue,{variant:"body2",color:"textSecondary",...ae,children:V})),z.jsxs(Q,{...ee,children:[j,V]})});function Vk(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function E8(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function mJ(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function fS(e,t,n,r,s,c){let d=!1,i=s(e,t,t?n:!1);for(;i;){if(i===e.firstChild){if(d)return!1;d=!0}const m=r?!1:i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||!mJ(i,c)||m)i=s(e,i,n);else return i.focus(),!0}return!1}const PEe=U.forwardRef(function(t,n){const{actions:r,autoFocus:s=!1,autoFocusItem:c=!1,children:d,className:i,disabledItemsFocusable:m=!1,disableListWrap:x=!1,onKeyDown:T,variant:C="selectedMenu",...A}=t,I=U.useRef(null),k=U.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Qs(()=>{s&&I.current.focus()},[s]),U.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(G,{direction:X})=>{const Q=!I.current.style.width;if(G.clientHeight<I.current.clientHeight&&Q){const ee=`${oJ(xd(G))}px`;I.current.style[X==="rtl"?"paddingLeft":"paddingRight"]=ee,I.current.style.width=`calc(100% + ${ee})`}return I.current}}),[]);const B=G=>{const X=I.current,Q=G.key;if(G.ctrlKey||G.metaKey||G.altKey){T&&T(G);return}const ce=qa(X).activeElement;if(Q==="ArrowDown")G.preventDefault(),fS(X,ce,x,m,Vk);else if(Q==="ArrowUp")G.preventDefault(),fS(X,ce,x,m,E8);else if(Q==="Home")G.preventDefault(),fS(X,null,x,m,Vk);else if(Q==="End")G.preventDefault(),fS(X,null,x,m,E8);else if(Q.length===1){const fe=k.current,ue=Q.toLowerCase(),ae=performance.now();fe.keys.length>0&&(ae-fe.lastTime>500?(fe.keys=[],fe.repeating=!0,fe.previousKeyMatched=!0):fe.repeating&&ue!==fe.keys[0]&&(fe.repeating=!1)),fe.lastTime=ae,fe.keys.push(ue);const xe=ce&&!fe.repeating&&mJ(ce,fe);fe.previousKeyMatched&&(xe||fS(X,ce,!1,m,Vk,fe))?G.preventDefault():fe.previousKeyMatched=!1}T&&T(G)},j=wo(I,n);let V=-1;U.Children.forEach(d,(G,X)=>{if(!U.isValidElement(G)){V===X&&(V+=1,V>=d.length&&(V=-1));return}G.props.disabled||(C==="selectedMenu"&&G.props.selected||V===-1)&&(V=X),V===X&&(G.props.disabled||G.props.muiSkipListHighlight||G.type.muiSkipListHighlight)&&(V+=1,V>=d.length&&(V=-1))});const H=U.Children.map(d,(G,X)=>{if(X===V){const Q={};return c&&(Q.autoFocus=!0),G.props.tabIndex===void 0&&C==="selectedMenu"&&(Q.tabIndex=0),U.cloneElement(G,Q)}return G});return z.jsx(Rv,{role:"menu",ref:j,className:i,onKeyDown:B,tabIndex:s?0:-1,...A,children:H})});function IEe(e){return fr("MuiPopover",e)}pr("MuiPopover",["root","paper"]);function C8(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function M8(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function A8(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function AM(e){return typeof e=="function"?e():e}const kEe=e=>{const{classes:t}=e;return dr({root:["root"],paper:["paper"]},IEe,t)},OEe=Ft(CE,{name:"MuiPopover",slot:"Root"})({}),gJ=Ft(fa,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),LEe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiPopover"}),{action:s,anchorEl:c,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:i,anchorReference:m="anchorEl",children:x,className:T,container:C,elevation:A=8,marginThreshold:I=16,open:k,PaperProps:B={},slots:j={},slotProps:V={},transformOrigin:H={vertical:"top",horizontal:"left"},TransitionComponent:G,transitionDuration:X="auto",TransitionProps:Q={},disableScrollLock:ee=!1,...ce}=r,fe=U.useRef(),ue={...r,anchorOrigin:d,anchorReference:m,elevation:A,marginThreshold:I,transformOrigin:H,TransitionComponent:G,transitionDuration:X,TransitionProps:Q},ae=kEe(ue),xe=U.useCallback(()=>{if(m==="anchorPosition")return i;const Et=AM(c),Lt=(Et&&Et.nodeType===1?Et:qa(fe.current).body).getBoundingClientRect();return{top:Lt.top+C8(Lt,d.vertical),left:Lt.left+M8(Lt,d.horizontal)}},[c,d.horizontal,d.vertical,i,m]),we=U.useCallback(Et=>({vertical:C8(Et,H.vertical),horizontal:M8(Et,H.horizontal)}),[H.horizontal,H.vertical]),Me=U.useCallback(Et=>{const yt={width:Et.offsetWidth,height:Et.offsetHeight},Lt=we(yt);if(m==="none")return{top:null,left:null,transformOrigin:A8(Lt)};const Ct=xe();let Wt=Ct.top-Lt.vertical,fn=Ct.left-Lt.horizontal;const Zt=Wt+yt.height,Ut=fn+yt.width,kn=xd(AM(c)),Bn=kn.innerHeight-I,bn=kn.innerWidth-I;if(I!==null&&Wt<I){const Nn=Wt-I;Wt-=Nn,Lt.vertical+=Nn}else if(I!==null&&Zt>Bn){const Nn=Zt-Bn;Wt-=Nn,Lt.vertical+=Nn}if(I!==null&&fn<I){const Nn=fn-I;fn-=Nn,Lt.horizontal+=Nn}else if(Ut>bn){const Nn=Ut-bn;fn-=Nn,Lt.horizontal+=Nn}return{top:`${Math.round(Wt)}px`,left:`${Math.round(fn)}px`,transformOrigin:A8(Lt)}},[c,m,xe,we,I]),[Se,Ae]=U.useState(k),_e=U.useCallback(()=>{const Et=fe.current;if(!Et)return;const yt=Me(Et);yt.top!==null&&Et.style.setProperty("top",yt.top),yt.left!==null&&(Et.style.left=yt.left),Et.style.transformOrigin=yt.transformOrigin,Ae(!0)},[Me]);U.useEffect(()=>(ee&&window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)),[c,ee,_e]);const Pe=()=>{_e()},We=()=>{Ae(!1)};U.useEffect(()=>{k&&_e()}),U.useImperativeHandle(s,()=>k?{updatePosition:()=>{_e()}}:null,[k,_e]),U.useEffect(()=>{if(!k)return;const Et=bE(()=>{_e()}),yt=xd(AM(c));return yt.addEventListener("resize",Et),()=>{Et.clear(),yt.removeEventListener("resize",Et)}},[c,k,_e]);let Fe=X;const Ce={slots:{transition:G,...j},slotProps:{transition:Q,paper:B,...V}},[He,dt]=Ur("transition",{elementType:f1,externalForwardedProps:Ce,ownerState:ue,getSlotProps:Et=>({...Et,onEntering:(yt,Lt)=>{var Ct;(Ct=Et.onEntering)==null||Ct.call(Et,yt,Lt),Pe()},onExited:yt=>{var Lt;(Lt=Et.onExited)==null||Lt.call(Et,yt),We()}}),additionalProps:{appear:!0,in:k}});X==="auto"&&!He.muiSupportAuto&&(Fe=void 0);const gt=C||(c?qa(AM(c)).body:void 0),[Nt,{slots:wt,slotProps:ot,...st}]=Ur("root",{ref:n,elementType:OEe,externalForwardedProps:{...Ce,...ce},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:j.backdrop},slotProps:{backdrop:ON(typeof V.backdrop=="function"?V.backdrop(ue):V.backdrop,{invisible:!0})},container:gt,open:k},ownerState:ue,className:$n(ae.root,T)}),[St,Dt]=Ur("paper",{ref:fe,className:ae.paper,elementType:gJ,externalForwardedProps:Ce,shouldForwardComponentProp:!0,additionalProps:{elevation:A,style:Se?void 0:{opacity:0}},ownerState:ue});return z.jsx(Nt,{...st,...!ET(Nt)&&{slots:wt,slotProps:ot,disableScrollLock:ee},children:z.jsx(He,{...dt,timeout:Fe,children:z.jsx(St,{...Dt,children:x})})})});function zEe(e){return fr("MuiMenu",e)}pr("MuiMenu",["root","paper","list"]);const FEe={vertical:"top",horizontal:"right"},BEe={vertical:"top",horizontal:"left"},jEe=e=>{const{classes:t}=e;return dr({root:["root"],paper:["paper"],list:["list"]},zEe,t)},NEe=Ft(LEe,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),VEe=Ft(gJ,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),$Ee=Ft(PEe,{name:"MuiMenu",slot:"List"})({outline:0}),yJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiMenu"}),{autoFocus:s=!0,children:c,className:d,disableAutoFocusItem:i=!1,MenuListProps:m={},onClose:x,open:T,PaperProps:C={},PopoverClasses:A,transitionDuration:I="auto",TransitionProps:{onEntering:k,...B}={},variant:j="selectedMenu",slots:V={},slotProps:H={},...G}=r,X=Al(),Q={...r,autoFocus:s,disableAutoFocusItem:i,MenuListProps:m,onEntering:k,PaperProps:C,transitionDuration:I,TransitionProps:B,variant:j},ee=jEe(Q),ce=s&&!i&&T,fe=U.useRef(null),ue=(Fe,Ce)=>{fe.current&&fe.current.adjustStyleForScrollbar(Fe,{direction:X?"rtl":"ltr"}),k&&k(Fe,Ce)},ae=Fe=>{Fe.key==="Tab"&&(Fe.preventDefault(),x&&x(Fe,"tabKeyDown"))};let xe=-1;U.Children.map(c,(Fe,Ce)=>{U.isValidElement(Fe)&&(Fe.props.disabled||(j==="selectedMenu"&&Fe.props.selected||xe===-1)&&(xe=Ce))});const we={slots:V,slotProps:{list:m,transition:B,paper:C,...H}},Me=Co({elementType:V.root,externalSlotProps:H.root,ownerState:Q,className:[ee.root,d]}),[Se,Ae]=Ur("paper",{className:ee.paper,elementType:VEe,externalForwardedProps:we,shouldForwardComponentProp:!0,ownerState:Q}),[_e,Pe]=Ur("list",{className:$n(ee.list,m.className),elementType:$Ee,shouldForwardComponentProp:!0,externalForwardedProps:we,getSlotProps:Fe=>({...Fe,onKeyDown:Ce=>{var He;ae(Ce),(He=Fe.onKeyDown)==null||He.call(Fe,Ce)}}),ownerState:Q}),We=typeof we.slotProps.transition=="function"?we.slotProps.transition(Q):we.slotProps.transition;return z.jsx(NEe,{onClose:x,anchorOrigin:{vertical:"bottom",horizontal:X?"right":"left"},transformOrigin:X?FEe:BEe,slots:{root:V.root,paper:Se,backdrop:V.backdrop,...V.transition&&{transition:V.transition}},slotProps:{root:Me,paper:Ae,backdrop:typeof H.backdrop=="function"?H.backdrop(Q):H.backdrop,transition:{...We,onEntering:(...Fe)=>{var Ce;ue(...Fe),(Ce=We==null?void 0:We.onEntering)==null||Ce.call(We,...Fe)}}},open:T,ref:n,transitionDuration:I,ownerState:Q,...G,classes:A,children:z.jsx(_e,{actions:fe,autoFocus:s&&(xe===-1||i),autoFocusItem:ce,variant:j,...Pe,children:c})})});function UEe(e){return fr("MuiMenuItem",e)}const pS=pr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),qEe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},HEe=e=>{const{disabled:t,dense:n,divider:r,disableGutters:s,selected:c,classes:d}=e,m=dr({root:["root",n&&"dense",t&&"disabled",!s&&"gutters",r&&"divider",c&&"selected"]},UEe,d);return{...d,...m}},WEe=Ft(bd,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:qEe})(Xr(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${pS.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ei(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${pS.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${pS.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ei(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ei(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${pS.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${pS.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${P6.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${P6.inset}`]:{marginLeft:52},[`& .${Nb.root}`]:{marginTop:0,marginBottom:0},[`& .${Nb.inset}`]:{paddingLeft:36},[`& .${T8.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${T8.root} svg`]:{fontSize:"1.25rem"}}}]}))),ko=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiMenuItem"}),{autoFocus:s=!1,component:c="li",dense:d=!1,divider:i=!1,disableGutters:m=!1,focusVisibleClassName:x,role:T="menuitem",tabIndex:C,className:A,...I}=r,k=U.useContext(Ch),B=U.useMemo(()=>({dense:d||k.dense||!1,disableGutters:m}),[k.dense,d,m]),j=U.useRef(null);Qs(()=>{s&&j.current&&j.current.focus()},[s]);const V={...r,dense:B.dense,divider:i,disableGutters:m},H=HEe(r),G=wo(j,n);let X;return r.disabled||(X=C!==void 0?C:-1),z.jsx(Ch.Provider,{value:B,children:z.jsx(WEe,{ref:G,role:T,tabIndex:X,component:c,focusVisibleClassName:$n(H.focusVisible,x),className:$n(H.root,A),...I,ownerState:V,classes:H})})});function GEe(e){return fr("MuiNativeSelect",e)}const ZN=pr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),YEe=e=>{const{classes:t,variant:n,disabled:r,multiple:s,open:c,error:d}=e,i={select:["select",n,r&&"disabled",s&&"multiple",d&&"error"],icon:["icon",`icon${Dn(n)}`,c&&"iconOpen",r&&"disabled"]};return dr(i,GEe,t)},vJ=Ft("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${ZN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),XEe=Ft(vJ,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Tc,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${ZN.multiple}`]:t.multiple}]}})({}),_J=Ft("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${ZN.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),ZEe=Ft(_J,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Dn(n.variant)}`],n.open&&t.iconOpen]}})({}),KEe=U.forwardRef(function(t,n){const{className:r,disabled:s,error:c,IconComponent:d,inputRef:i,variant:m="standard",...x}=t,T={...t,disabled:s,variant:m,error:c},C=YEe(T);return z.jsxs(U.Fragment,{children:[z.jsx(XEe,{ownerState:T,className:$n(C.select,r),disabled:s,ref:i||n,...x}),t.multiple?null:z.jsx(ZEe,{as:d,ownerState:T,className:C.icon})]})});var R8;const QEe=Ft("fieldset",{shouldForwardProp:Tc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),JEe=Ft("legend",{shouldForwardProp:Tc})(Xr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function eCe(e){const{children:t,classes:n,className:r,label:s,notched:c,...d}=e,i=s!=null&&s!=="",m={...e,notched:c,withLabel:i};return z.jsx(QEe,{"aria-hidden":!0,className:r,ownerState:m,...d,children:z.jsx(JEe,{ownerState:m,children:i?z.jsx("span",{children:s}):R8||(R8=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const tCe=e=>{const{classes:t}=e,r=dr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Rwe,t);return{...t,...r}},nCe=Ft(WD,{shouldForwardProp:e=>Tc(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:qD})(Xr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Xp.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Xp.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Xp.focused} .${Xp.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(vs()).map(([n])=>({props:{color:n},style:{[`&.${Xp.focused} .${Xp.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Xp.error} .${Xp.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Xp.disabled} .${Xp.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),rCe=Ft(eCe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Xr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),iCe=Ft(GD,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:HD})(Xr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),ZD=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiOutlinedInput"}),{components:s={},fullWidth:c=!1,inputComponent:d="input",label:i,multiline:m=!1,notched:x,slots:T={},slotProps:C={},type:A="text",...I}=r,k=tCe(r),B=jh(),j=Av({props:r,muiFormControl:B,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),V={...r,color:j.color||"primary",disabled:j.disabled,error:j.error,focused:j.focused,formControl:B,fullWidth:c,hiddenLabel:j.hiddenLabel,multiline:m,size:j.size,type:A},H=T.root??s.Root??nCe,G=T.input??s.Input??iCe,[X,Q]=Ur("notchedOutline",{elementType:rCe,className:k.notchedOutline,shouldForwardComponentProp:!0,ownerState:V,externalForwardedProps:{slots:T,slotProps:C},additionalProps:{label:i!=null&&i!==""&&j.required?z.jsxs(U.Fragment,{children:[i," ","*"]}):i}});return z.jsx(YD,{slots:{root:H,input:G},slotProps:C,renderSuffix:ee=>z.jsx(X,{...Q,notched:typeof x<"u"?x:!!(ee.startAdornment||ee.filled||ee.focused)}),fullWidth:c,inputComponent:d,multiline:m,ref:n,type:A,...I,classes:{...k,notchedOutline:null}})});ZD.muiName="Input";function oCe(e){return fr("MuiPagination",e)}pr("MuiPagination",["root","ul","outlined","text"]);function sCe(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:s=1,disabled:c=!1,hideNextButton:d=!1,hidePrevButton:i=!1,onChange:m,page:x,showFirstButton:T=!1,showLastButton:C=!1,siblingCount:A=1,...I}=e,[k,B]=Xf({controlled:x,default:s,name:n,state:"page"}),j=(ue,ae)=>{x||B(ae),m&&m(ue,ae)},V=(ue,ae)=>{const xe=ae-ue+1;return Array.from({length:xe},(we,Me)=>ue+Me)},H=V(1,Math.min(t,r)),G=V(Math.max(r-t+1,t+1),r),X=Math.max(Math.min(k-A,r-t-A*2-1),t+2),Q=Math.min(Math.max(k+A,t+A*2+2),r-t-1),ee=[...T?["first"]:[],...i?[]:["previous"],...H,...X>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...V(X,Q),...Q<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...G,...d?[]:["next"],...C?["last"]:[]],ce=ue=>{switch(ue){case"first":return 1;case"previous":return k-1;case"next":return k+1;case"last":return r;default:return null}};return{items:ee.map(ue=>typeof ue=="number"?{onClick:ae=>{j(ae,ue)},type:"page",page:ue,selected:ue===k,disabled:c,"aria-current":ue===k?"page":void 0}:{onClick:ae=>{j(ae,ce(ue))},type:ue,page:ce(ue),selected:!1,disabled:c||!ue.includes("ellipsis")&&(ue==="next"||ue==="last"?k>=r:k<=1)}),...I}}function aCe(e){return fr("MuiPaginationItem",e)}const Yc=pr("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),xJ=Gi(z.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),bJ=Gi(z.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),lCe=Gi(z.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),cCe=Gi(z.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),wJ=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Dn(n.size)}`],n.variant==="text"&&t[`text${Dn(n.color)}`],n.variant==="outlined"&&t[`outlined${Dn(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},uCe=e=>{const{classes:t,color:n,disabled:r,selected:s,size:c,shape:d,type:i,variant:m}=e,x={root:["root",`size${Dn(c)}`,m,d,n!=="standard"&&`color${Dn(n)}`,n!=="standard"&&`${m}${Dn(n)}`,r&&"disabled",s&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[i]],icon:["icon"]};return dr(x,aCe,t)},dCe=Ft("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:wJ})(Xr(({theme:e})=>({...e.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Yc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:{size:"small"},style:{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)}}]}))),hCe=Ft(bd,{name:"MuiPaginationItem",slot:"Root",overridesResolver:wJ})(Xr(({theme:e})=>({...e.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Yc.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Yc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Yc.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ei(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Yc.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Yc.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}},variants:[{props:{size:"small"},style:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)}},{props:{shape:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"outlined"},style:{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Yc.selected}`]:{[`&.${Yc.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}}}},{props:{variant:"text"},style:{[`&.${Yc.selected}`]:{[`&.${Yc.disabled}`]:{color:(e.vars||e).palette.action.disabled}}}},...Object.entries(e.palette).filter(vs(["dark","contrastText"])).map(([t])=>({props:{variant:"text",color:t},style:{[`&.${Yc.selected}`]:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}},[`&.${Yc.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t].dark},[`&.${Yc.disabled}`]:{color:(e.vars||e).palette.action.disabled}}}})),...Object.entries(e.palette).filter(vs(["light"])).map(([t])=>({props:{variant:"outlined",color:t},style:{[`&.${Yc.selected}`]:{color:(e.vars||e).palette[t].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.5)`:ei(e.palette[t].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:ei(e.palette[t].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette[t].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Yc.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ei(e.palette[t].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}}}}))]}))),fCe=Ft("div",{name:"MuiPaginationItem",slot:"Icon"})(Xr(({theme:e})=>({fontSize:e.typography.pxToRem(20),margin:"0 -8px",variants:[{props:{size:"small"},style:{fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:e.typography.pxToRem(22)}}]}))),pCe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiPaginationItem"}),{className:s,color:c="standard",component:d,components:i={},disabled:m=!1,page:x,selected:T=!1,shape:C="circular",size:A="medium",slots:I={},slotProps:k={},type:B="page",variant:j="text",...V}=r,H={...r,color:c,disabled:m,selected:T,shape:C,size:A,type:B,variant:j},G=Al(),X=uCe(H),Q={slots:{previous:I.previous??i.previous,next:I.next??i.next,first:I.first??i.first,last:I.last??i.last},slotProps:k},[ee,ce]=Ur("previous",{elementType:lCe,externalForwardedProps:Q,ownerState:H}),[fe,ue]=Ur("next",{elementType:cCe,externalForwardedProps:Q,ownerState:H}),[ae,xe]=Ur("first",{elementType:xJ,externalForwardedProps:Q,ownerState:H}),[we,Me]=Ur("last",{elementType:bJ,externalForwardedProps:Q,ownerState:H}),Se=G?{previous:"next",next:"previous",first:"last",last:"first"}[B]:B,Ae={previous:ee,next:fe,first:ae,last:we}[Se],_e={previous:ce,next:ue,first:xe,last:Me}[Se];return B==="start-ellipsis"||B==="end-ellipsis"?z.jsx(dCe,{ref:n,ownerState:H,className:$n(X.root,s),children:"…"}):z.jsxs(hCe,{ref:n,ownerState:H,component:d,disabled:m,className:$n(X.root,s),...V,children:[B==="page"&&x,Ae?z.jsx(fCe,{..._e,className:X.icon,as:Ae}):null]})}),mCe=e=>{const{classes:t,variant:n}=e;return dr({root:["root",n],ul:["ul"]},oCe,t)},gCe=Ft("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),yCe=Ft("ul",{name:"MuiPagination",slot:"Ul"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function vCe(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const KN=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiPagination"}),{boundaryCount:s=1,className:c,color:d="standard",count:i=1,defaultPage:m=1,disabled:x=!1,getItemAriaLabel:T=vCe,hideNextButton:C=!1,hidePrevButton:A=!1,onChange:I,page:k,renderItem:B=ae=>z.jsx(pCe,{...ae}),shape:j="circular",showFirstButton:V=!1,showLastButton:H=!1,siblingCount:G=1,size:X="medium",variant:Q="text",...ee}=r,{items:ce}=sCe({...r,componentName:"Pagination"}),fe={...r,boundaryCount:s,color:d,count:i,defaultPage:m,disabled:x,getItemAriaLabel:T,hideNextButton:C,hidePrevButton:A,renderItem:B,shape:j,showFirstButton:V,showLastButton:H,siblingCount:G,size:X,variant:Q},ue=mCe(fe);return z.jsx(gCe,{"aria-label":"pagination navigation",className:$n(ue.root,c),ownerState:fe,ref:n,...ee,children:z.jsx(yCe,{className:ue.ul,ownerState:fe,children:ce.map((ae,xe)=>z.jsx("li",{children:B({...ae,color:d,"aria-label":T(ae.type,ae.page,ae.selected),shape:j,size:X,variant:Q})},xe))})})}),_Ce={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function SJ(e){return fr("MuiSelect",e)}const mS=pr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var D8;const xCe=Ft(vJ,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${mS.select}`]:t.select},{[`&.${mS.select}`]:t[n.variant]},{[`&.${mS.error}`]:t.error},{[`&.${mS.multiple}`]:t.multiple}]}})({[`&.${mS.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),bCe=Ft(_J,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Dn(n.variant)}`],n.open&&t.iconOpen]}})({}),wCe=Ft("input",{shouldForwardProp:e=>tK(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function P8(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function SCe(e){return e==null||typeof e=="string"&&!e.trim()}const TCe=e=>{const{classes:t,variant:n,disabled:r,multiple:s,open:c,error:d}=e,i={select:["select",n,r&&"disabled",s&&"multiple",d&&"error"],icon:["icon",`icon${Dn(n)}`,c&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return dr(i,SJ,t)},ECe=U.forwardRef(function(t,n){var xr;const{"aria-describedby":r,"aria-label":s,autoFocus:c,autoWidth:d,children:i,className:m,defaultOpen:x,defaultValue:T,disabled:C,displayEmpty:A,error:I=!1,IconComponent:k,inputRef:B,labelId:j,MenuProps:V={},multiple:H,name:G,onBlur:X,onChange:Q,onClose:ee,onFocus:ce,onOpen:fe,open:ue,readOnly:ae,renderValue:xe,required:we,SelectDisplayProps:Me={},tabIndex:Se,type:Ae,value:_e,variant:Pe="standard",...We}=t,[Fe,Ce]=Xf({controlled:_e,default:T,name:"Select"}),[He,dt]=Xf({controlled:ue,default:x,name:"Select"}),gt=U.useRef(null),Nt=U.useRef(null),[wt,ot]=U.useState(null),{current:st}=U.useRef(ue!=null),[St,Dt]=U.useState(),Et=wo(n,B),yt=U.useCallback(ir=>{Nt.current=ir,ir&&ot(ir)},[]),Lt=wt==null?void 0:wt.parentNode;U.useImperativeHandle(Et,()=>({focus:()=>{Nt.current.focus()},node:gt.current,value:Fe}),[Fe]),U.useEffect(()=>{x&&He&&wt&&!st&&(Dt(d?null:Lt.clientWidth),Nt.current.focus())},[wt,d]),U.useEffect(()=>{c&&Nt.current.focus()},[c]),U.useEffect(()=>{if(!j)return;const ir=qa(Nt.current).getElementById(j);if(ir){const Yr=()=>{getSelection().isCollapsed&&Nt.current.focus()};return ir.addEventListener("click",Yr),()=>{ir.removeEventListener("click",Yr)}}},[j]);const Ct=(ir,Yr)=>{ir?fe&&fe(Yr):ee&&ee(Yr),st||(Dt(d?null:Lt.clientWidth),dt(ir))},Wt=ir=>{ir.button===0&&(ir.preventDefault(),Nt.current.focus(),Ct(!0,ir))},fn=ir=>{Ct(!1,ir)},Zt=U.Children.toArray(i),Ut=ir=>{const Yr=Zt.find(Sr=>Sr.props.value===ir.target.value);Yr!==void 0&&(Ce(Yr.props.value),Q&&Q(ir,Yr))},kn=ir=>Yr=>{let Sr;if(Yr.currentTarget.hasAttribute("tabindex")){if(H){Sr=Array.isArray(Fe)?Fe.slice():[];const Dr=Fe.indexOf(ir.props.value);Dr===-1?Sr.push(ir.props.value):Sr.splice(Dr,1)}else Sr=ir.props.value;if(ir.props.onClick&&ir.props.onClick(Yr),Fe!==Sr&&(Ce(Sr),Q)){const Dr=Yr.nativeEvent||Yr,ki=new Dr.constructor(Dr.type,Dr);Object.defineProperty(ki,"target",{writable:!0,value:{value:Sr,name:G}}),Q(ki,ir)}H||Ct(!1,Yr)}},Bn=ir=>{ae||[" ","ArrowUp","ArrowDown","Enter"].includes(ir.key)&&(ir.preventDefault(),Ct(!0,ir))},bn=wt!==null&&He,Nn=ir=>{!bn&&X&&(Object.defineProperty(ir,"target",{writable:!0,value:{value:Fe,name:G}}),X(ir))};delete We["aria-invalid"];let ft,vn;const Ot=[];let tn=!1;(wR({value:Fe})||A)&&(xe?ft=xe(Fe):tn=!0);const Rn=Zt.map(ir=>{if(!U.isValidElement(ir))return null;let Yr;if(H){if(!Array.isArray(Fe))throw new Error(Gg(2));Yr=Fe.some(Sr=>P8(Sr,ir.props.value)),Yr&&tn&&Ot.push(ir.props.children)}else Yr=P8(Fe,ir.props.value),Yr&&tn&&(vn=ir.props.children);return U.cloneElement(ir,{"aria-selected":Yr?"true":"false",onClick:kn(ir),onKeyUp:Sr=>{Sr.key===" "&&Sr.preventDefault(),ir.props.onKeyUp&&ir.props.onKeyUp(Sr)},role:"option",selected:Yr,value:void 0,"data-value":ir.props.value})});tn&&(H?Ot.length===0?ft=null:ft=Ot.reduce((ir,Yr,Sr)=>(ir.push(Yr),Sr<Ot.length-1&&ir.push(", "),ir),[]):ft=vn);let Hn=St;!d&&st&&wt&&(Hn=Lt.clientWidth);let mr;typeof Se<"u"?mr=Se:mr=C?null:0;const Xn=Me.id||(G?`mui-component-select-${G}`:void 0),or={...t,variant:Pe,value:Fe,open:bn,error:I},Mn=TCe(or),Fr={...V.PaperProps,...(xr=V.slotProps)==null?void 0:xr.paper},Cr=kh();return z.jsxs(U.Fragment,{children:[z.jsx(xCe,{as:"div",ref:yt,tabIndex:mr,role:"combobox","aria-controls":bn?Cr:void 0,"aria-disabled":C?"true":void 0,"aria-expanded":bn?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[j,Xn].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":we?"true":void 0,"aria-invalid":I?"true":void 0,onKeyDown:Bn,onMouseDown:C||ae?null:Wt,onBlur:Nn,onFocus:ce,...Me,ownerState:or,className:$n(Me.className,Mn.select,m),id:Xn,children:SCe(ft)?D8||(D8=z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):ft}),z.jsx(wCe,{"aria-invalid":I,value:Array.isArray(Fe)?Fe.join(","):Fe,name:G,ref:gt,"aria-hidden":!0,onChange:Ut,tabIndex:-1,disabled:C,className:Mn.nativeInput,autoFocus:c,required:we,...We,ownerState:or}),z.jsx(bCe,{as:k,className:Mn.icon,ownerState:or}),z.jsx(yJ,{id:`menu-${G||""}`,anchorEl:Lt,open:bn,onClose:fn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...V,slotProps:{...V.slotProps,list:{"aria-labelledby":j,role:"listbox","aria-multiselectable":H?"true":void 0,disableListWrap:!0,id:Cr,...V.MenuListProps},paper:{...Fr,style:{minWidth:Hn,...Fr!=null?Fr.style:null}}},children:Rn})]})}),CCe=e=>{const{classes:t}=e,r=dr({root:["root"]},SJ,t);return{...t,...r}},QN={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>Tc(e)&&e!=="variant"},MCe=Ft(WN,QN)(""),ACe=Ft(ZD,QN)(""),RCe=Ft(HN,QN)(""),nu=U.forwardRef(function(t,n){const r=Br({name:"MuiSelect",props:t}),{autoWidth:s=!1,children:c,classes:d={},className:i,defaultOpen:m=!1,displayEmpty:x=!1,IconComponent:T=Pwe,id:C,input:A,inputProps:I,label:k,labelId:B,MenuProps:j,multiple:V=!1,native:H=!1,onClose:G,onOpen:X,open:Q,renderValue:ee,SelectDisplayProps:ce,variant:fe="outlined",...ue}=r,ae=H?KEe:ECe,xe=jh(),we=Av({props:r,muiFormControl:xe,states:["variant","error"]}),Me=we.variant||fe,Se={...r,variant:Me,classes:d},Ae=CCe(Se),{root:_e,...Pe}=Ae,We=A||{standard:z.jsx(MCe,{ownerState:Se}),outlined:z.jsx(ACe,{label:k,ownerState:Se}),filled:z.jsx(RCe,{ownerState:Se})}[Me],Fe=wo(n,ny(We));return z.jsx(U.Fragment,{children:U.cloneElement(We,{inputComponent:ae,inputProps:{children:c,error:we.error,IconComponent:T,variant:Me,type:void 0,multiple:V,...H?{id:C}:{autoWidth:s,defaultOpen:m,displayEmpty:x,labelId:B,MenuProps:j,onClose:G,onOpen:X,open:Q,renderValue:ee,SelectDisplayProps:{id:C,...ce}},...I,classes:I?Tl(Pe,I.classes):Pe,...A?A.props.inputProps:{}},...(V&&H||x)&&Me==="outlined"?{notched:!0}:{},ref:Fe,className:$n(We.props.className,i,Ae.root),...!A&&{variant:Me},...ue})})});nu.muiName="Select";const DCe={entering:{transform:"none"},entered:{transform:"none"}},PCe=U.forwardRef(function(t,n){const r=Zo(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:d=!0,children:i,easing:m,in:x,onEnter:T,onEntered:C,onEntering:A,onExit:I,onExited:k,onExiting:B,style:j,timeout:V=s,TransitionComponent:H=Iu,...G}=t,X=U.useRef(null),Q=wo(X,ny(i),n),ee=Se=>Ae=>{if(Se){const _e=X.current;Ae===void 0?Se(_e):Se(_e,Ae)}},ce=ee(A),fe=ee((Se,Ae)=>{VD(Se);const _e=pm({style:j,timeout:V,easing:m},{mode:"enter"});Se.style.webkitTransition=r.transitions.create("transform",_e),Se.style.transition=r.transitions.create("transform",_e),T&&T(Se,Ae)}),ue=ee(C),ae=ee(B),xe=ee(Se=>{const Ae=pm({style:j,timeout:V,easing:m},{mode:"exit"});Se.style.webkitTransition=r.transitions.create("transform",Ae),Se.style.transition=r.transitions.create("transform",Ae),I&&I(Se)}),we=ee(k),Me=Se=>{c&&c(X.current,Se)};return z.jsx(H,{appear:d,in:x,nodeRef:X,onEnter:fe,onEntered:ue,onEntering:ce,onExit:xe,onExited:we,onExiting:ae,addEndListener:Me,timeout:V,...G,children:(Se,{ownerState:Ae,..._e})=>U.cloneElement(i,{style:{transform:"scale(0)",visibility:Se==="exited"&&!x?"hidden":void 0,...DCe[Se],...j,...i.props.style},ref:Q,..._e})})});function ICe(e){return fr("MuiTooltip",e)}const ua=pr("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function kCe(e){return Math.round(e*1e5)/1e5}const OCe=e=>{const{classes:t,disableInteractive:n,arrow:r,touch:s,placement:c}=e,d={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",s&&"touch",`tooltipPlacement${Dn(c.split("-")[0])}`],arrow:["arrow"]};return dr(d,ICe,t)},LCe=Ft(EE,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(Xr(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${ua.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ua.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ua.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${ua.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ua.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${ua.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ua.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${ua.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),zCe=Ft("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${Dn(n.placement.split("-")[0])}`]]}})(Xr(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:ei(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${ua.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${ua.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${ua.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${ua.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${kCe(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${ua.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${ua.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${ua.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${ua.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${ua.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${ua.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${ua.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${ua.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ua.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${ua.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),FCe=Ft("span",{name:"MuiTooltip",slot:"Arrow"})(Xr(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:ei(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let RM=!1;const I8=new ND;let gS={x:0,y:0};function DM(e,t){return(n,...r)=>{t&&t(n,...r),e(n,...r)}}const nT=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTooltip"}),{arrow:s=!1,children:c,classes:d,components:i={},componentsProps:m={},describeChild:x=!1,disableFocusListener:T=!1,disableHoverListener:C=!1,disableInteractive:A=!1,disableTouchListener:I=!1,enterDelay:k=100,enterNextDelay:B=0,enterTouchDelay:j=700,followCursor:V=!1,id:H,leaveDelay:G=0,leaveTouchDelay:X=1500,onClose:Q,onOpen:ee,open:ce,placement:fe="bottom",PopperComponent:ue,PopperProps:ae={},slotProps:xe={},slots:we={},title:Me,TransitionComponent:Se,TransitionProps:Ae,..._e}=r,Pe=U.isValidElement(c)?c:z.jsx("span",{children:c}),We=Zo(),Fe=Al(),[Ce,He]=U.useState(),[dt,gt]=U.useState(null),Nt=U.useRef(!1),wt=A||V,ot=md(),st=md(),St=md(),Dt=md(),[Et,yt]=Xf({controlled:ce,default:!1,name:"Tooltip",state:"open"});let Lt=Et;const Ct=kh(H),Wt=U.useRef(),fn=Er(()=>{Wt.current!==void 0&&(document.body.style.WebkitUserSelect=Wt.current,Wt.current=void 0),Dt.clear()});U.useEffect(()=>fn,[fn]);const Zt=Pr=>{I8.clear(),RM=!0,yt(!0),ee&&!Lt&&ee(Pr)},Ut=Er(Pr=>{I8.start(800+G,()=>{RM=!1}),yt(!1),Q&&Lt&&Q(Pr),ot.start(We.transitions.duration.shortest,()=>{Nt.current=!1})}),kn=Pr=>{Nt.current&&Pr.type!=="touchstart"||(Ce&&Ce.removeAttribute("title"),st.clear(),St.clear(),k||RM&&B?st.start(RM?B:k,()=>{Zt(Pr)}):Zt(Pr))},Bn=Pr=>{st.clear(),St.start(G,()=>{Ut(Pr)})},[,bn]=U.useState(!1),Nn=Pr=>{a1(Pr.target)||(bn(!1),Bn(Pr))},ft=Pr=>{Ce||He(Pr.currentTarget),a1(Pr.target)&&(bn(!0),kn(Pr))},vn=Pr=>{Nt.current=!0;const ke=Pe.props;ke.onTouchStart&&ke.onTouchStart(Pr)},Ot=Pr=>{vn(Pr),St.clear(),ot.clear(),fn(),Wt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Dt.start(j,()=>{document.body.style.WebkitUserSelect=Wt.current,kn(Pr)})},tn=Pr=>{Pe.props.onTouchEnd&&Pe.props.onTouchEnd(Pr),fn(),St.start(X,()=>{Ut(Pr)})};U.useEffect(()=>{if(!Lt)return;function Pr(ke){ke.key==="Escape"&&Ut(ke)}return document.addEventListener("keydown",Pr),()=>{document.removeEventListener("keydown",Pr)}},[Ut,Lt]);const Rn=wo(ny(Pe),He,n);!Me&&Me!==0&&(Lt=!1);const Hn=U.useRef(),mr=Pr=>{const ke=Pe.props;ke.onMouseMove&&ke.onMouseMove(Pr),gS={x:Pr.clientX,y:Pr.clientY},Hn.current&&Hn.current.update()},Xn={},or=typeof Me=="string";x?(Xn.title=!Lt&&or&&!C?Me:null,Xn["aria-describedby"]=Lt?Ct:null):(Xn["aria-label"]=or?Me:null,Xn["aria-labelledby"]=Lt&&!or?Ct:null);const Mn={...Xn,..._e,...Pe.props,className:$n(_e.className,Pe.props.className),onTouchStart:vn,ref:Rn,...V?{onMouseMove:mr}:{}},Fr={};I||(Mn.onTouchStart=Ot,Mn.onTouchEnd=tn),C||(Mn.onMouseOver=DM(kn,Mn.onMouseOver),Mn.onMouseLeave=DM(Bn,Mn.onMouseLeave),wt||(Fr.onMouseOver=kn,Fr.onMouseLeave=Bn)),T||(Mn.onFocus=DM(ft,Mn.onFocus),Mn.onBlur=DM(Nn,Mn.onBlur),wt||(Fr.onFocus=ft,Fr.onBlur=Nn));const Cr={...r,isRtl:Fe,arrow:s,disableInteractive:wt,placement:fe,PopperComponentProp:ue,touch:Nt.current},xr=typeof xe.popper=="function"?xe.popper(Cr):xe.popper,ir=U.useMemo(()=>{var ke,ie;let Pr=[{name:"arrow",enabled:!!dt,options:{element:dt,padding:4}}];return(ke=ae.popperOptions)!=null&&ke.modifiers&&(Pr=Pr.concat(ae.popperOptions.modifiers)),(ie=xr==null?void 0:xr.popperOptions)!=null&&ie.modifiers&&(Pr=Pr.concat(xr.popperOptions.modifiers)),{...ae.popperOptions,...xr==null?void 0:xr.popperOptions,modifiers:Pr}},[dt,ae.popperOptions,xr==null?void 0:xr.popperOptions]),Yr=OCe(Cr),Sr=typeof xe.transition=="function"?xe.transition(Cr):xe.transition,Dr={slots:{popper:i.Popper,transition:i.Transition??Se,tooltip:i.Tooltip,arrow:i.Arrow,...we},slotProps:{arrow:xe.arrow??m.arrow,popper:{...ae,...xr??m.popper},tooltip:xe.tooltip??m.tooltip,transition:{...Ae,...Sr??m.transition}}},[ki,ns]=Ur("popper",{elementType:LCe,externalForwardedProps:Dr,ownerState:Cr,className:$n(Yr.popper,ae==null?void 0:ae.className)}),[Vo,zo]=Ur("transition",{elementType:f1,externalForwardedProps:Dr,ownerState:Cr}),[Rl,ma]=Ur("tooltip",{elementType:zCe,className:Yr.tooltip,externalForwardedProps:Dr,ownerState:Cr}),[mn,ea]=Ur("arrow",{elementType:FCe,className:Yr.arrow,externalForwardedProps:Dr,ownerState:Cr,ref:gt});return z.jsxs(U.Fragment,{children:[U.cloneElement(Pe,Mn),z.jsx(ki,{as:ue??EE,placement:fe,anchorEl:V?{getBoundingClientRect:()=>({top:gS.y,left:gS.x,right:gS.x,bottom:gS.y,width:0,height:0})}:Ce,popperRef:Hn,open:Ce?Lt:!1,id:Ct,transition:!0,...Fr,...ns,popperOptions:ir,children:({TransitionProps:Pr})=>z.jsx(Vo,{timeout:We.transitions.duration.shorter,...Pr,...zo,children:z.jsxs(Rl,{...ma,children:[Me,s?z.jsx(mn,{...ea}):null]})})})]})});function BCe(e){return fr("MuiTab",e)}const dh=pr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),jCe=e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:s,icon:c,label:d,selected:i,disabled:m}=e,x={root:["root",c&&d&&"labelIcon",`textColor${Dn(n)}`,r&&"fullWidth",s&&"wrapped",i&&"selected",m&&"disabled"],icon:["iconWrapper","icon"]};return dr(x,BCe,t)},NCe=Ft(bd,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Dn(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${dh.iconWrapper}`]:t.iconWrapper},{[`& .${dh.icon}`]:t.icon}]}})(Xr(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="top",style:{[`& > .${dh.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="bottom",style:{[`& > .${dh.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="start",style:{[`& > .${dh.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:n})=>t.icon&&t.label&&n==="end",style:{[`& > .${dh.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${dh.selected}`]:{opacity:1},[`&.${dh.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${dh.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${dh.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${dh.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${dh.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),TJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTab"}),{className:s,disabled:c=!1,disableFocusRipple:d=!1,fullWidth:i,icon:m,iconPosition:x="top",indicator:T,label:C,onChange:A,onClick:I,onFocus:k,selected:B,selectionFollowsFocus:j,textColor:V="inherit",value:H,wrapped:G=!1,...X}=r,Q={...r,disabled:c,disableFocusRipple:d,selected:B,icon:!!m,iconPosition:x,label:!!C,fullWidth:i,textColor:V,wrapped:G},ee=jCe(Q),ce=m&&C&&U.isValidElement(m)?U.cloneElement(m,{className:$n(ee.icon,m.props.className)}):m,fe=ae=>{!B&&A&&A(ae,H),I&&I(ae)},ue=ae=>{j&&!B&&A&&A(ae,H),k&&k(ae)};return z.jsxs(NCe,{focusRipple:!d,className:$n(ee.root,s),ref:n,role:"tab","aria-selected":B,disabled:c,onClick:fe,onFocus:ue,ownerState:Q,tabIndex:B?0:-1,...X,children:[x==="top"||x==="start"?z.jsxs(U.Fragment,{children:[ce,C]}):z.jsxs(U.Fragment,{children:[C,ce]}),T]})}),EJ=U.createContext();function VCe(e){return fr("MuiTable",e)}pr("MuiTable",["root","stickyHeader"]);const $Ce=e=>{const{classes:t,stickyHeader:n}=e;return dr({root:["root",n&&"stickyHeader"]},VCe,t)},UCe=Ft("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(Xr(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),k8="table",KD=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTable"}),{className:s,component:c=k8,padding:d="normal",size:i="medium",stickyHeader:m=!1,...x}=r,T={...r,component:c,padding:d,size:i,stickyHeader:m},C=$Ce(T),A=U.useMemo(()=>({padding:d,size:i,stickyHeader:m}),[d,i,m]);return z.jsx(EJ.Provider,{value:A,children:z.jsx(UCe,{as:c,role:c===k8?null:"table",ref:n,className:$n(C.root,s),ownerState:T,...x})})}),QD=U.createContext();function qCe(e){return fr("MuiTableBody",e)}pr("MuiTableBody",["root"]);const HCe=e=>{const{classes:t}=e;return dr({root:["root"]},qCe,t)},WCe=Ft("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),GCe={variant:"body"},O8="tbody",JD=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTableBody"}),{className:s,component:c=O8,...d}=r,i={...r,component:c},m=HCe(i);return z.jsx(QD.Provider,{value:GCe,children:z.jsx(WCe,{className:$n(m.root,s),as:c,ref:n,role:c===O8?null:"rowgroup",ownerState:i,...d})})});function YCe(e){return fr("MuiTableCell",e)}const XCe=pr("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ZCe=e=>{const{classes:t,variant:n,align:r,padding:s,size:c,stickyHeader:d}=e,i={root:["root",n,d&&"stickyHeader",r!=="inherit"&&`align${Dn(r)}`,s!=="normal"&&`padding${Dn(s)}`,`size${Dn(c)}`]};return dr(i,YCe,t)},KCe=Ft("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Dn(n.size)}`],n.padding!=="normal"&&t[`padding${Dn(n.padding)}`],n.align!=="inherit"&&t[`align${Dn(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(Xr(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?k0(ei(e.palette.divider,1),.88):I0(ei(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${XCe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),Qr=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTableCell"}),{align:s="inherit",className:c,component:d,padding:i,scope:m,size:x,sortDirection:T,variant:C,...A}=r,I=U.useContext(EJ),k=U.useContext(QD),B=k&&k.variant==="head";let j;d?j=d:j=B?"th":"td";let V=m;j==="td"?V=void 0:!V&&B&&(V="col");const H=C||k&&k.variant,G={...r,align:s,component:j,padding:i||(I&&I.padding?I.padding:"normal"),size:x||(I&&I.size?I.size:"medium"),sortDirection:T,stickyHeader:H==="head"&&I&&I.stickyHeader,variant:H},X=ZCe(G);let Q=null;return T&&(Q=T==="asc"?"ascending":"descending"),z.jsx(KCe,{as:j,ref:n,className:$n(X.root,c),"aria-sort":Q,scope:V,ownerState:G,...A})});function QCe(e){return fr("MuiTableContainer",e)}pr("MuiTableContainer",["root"]);const JCe=e=>{const{classes:t}=e;return dr({root:["root"]},QCe,t)},eMe=Ft("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),eP=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTableContainer"}),{className:s,component:c="div",...d}=r,i={...r,component:c},m=JCe(i);return z.jsx(eMe,{ref:n,as:c,className:$n(m.root,s),ownerState:i,...d})});function tMe(e){return fr("MuiTableHead",e)}pr("MuiTableHead",["root"]);const nMe=e=>{const{classes:t}=e;return dr({root:["root"]},tMe,t)},rMe=Ft("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),iMe={variant:"head"},L8="thead",tP=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTableHead"}),{className:s,component:c=L8,...d}=r,i={...r,component:c},m=nMe(i);return z.jsx(QD.Provider,{value:iMe,children:z.jsx(rMe,{as:c,className:$n(m.root,s),ref:n,role:c===L8?null:"rowgroup",ownerState:i,...d})})});function oMe(e){return fr("MuiToolbar",e)}pr("MuiToolbar",["root","gutters","regular","dense"]);const sMe=e=>{const{classes:t,disableGutters:n,variant:r}=e;return dr({root:["root",!n&&"gutters",r]},oMe,t)},aMe=Ft("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(Xr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),CJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiToolbar"}),{className:s,component:c="div",disableGutters:d=!1,variant:i="regular",...m}=r,x={...r,component:c,disableGutters:d,variant:i},T=sMe(x);return z.jsx(aMe,{as:c,className:$n(T.root,s),ref:n,ownerState:x,...m})}),MJ=Gi(z.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),AJ=Gi(z.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"})),lMe=U.forwardRef(function(t,n){const{backIconButtonProps:r,count:s,disabled:c=!1,getItemAriaLabel:d,nextIconButtonProps:i,onPageChange:m,page:x,rowsPerPage:T,showFirstButton:C,showLastButton:A,slots:I={},slotProps:k={},...B}=t,j=Al(),V=He=>{m(He,0)},H=He=>{m(He,x-1)},G=He=>{m(He,x+1)},X=He=>{m(He,Math.max(0,Math.ceil(s/T)-1))},Q=I.firstButton??Kc,ee=I.lastButton??Kc,ce=I.nextButton??Kc,fe=I.previousButton??Kc,ue=I.firstButtonIcon??xJ,ae=I.lastButtonIcon??bJ,xe=I.nextButtonIcon??AJ,we=I.previousButtonIcon??MJ,Me=j?ee:Q,Se=j?ce:fe,Ae=j?fe:ce,_e=j?Q:ee,Pe=j?k.lastButton:k.firstButton,We=j?k.nextButton:k.previousButton,Fe=j?k.previousButton:k.nextButton,Ce=j?k.firstButton:k.lastButton;return z.jsxs("div",{ref:n,...B,children:[C&&z.jsx(Me,{onClick:V,disabled:c||x===0,"aria-label":d("first",x),title:d("first",x),...Pe,children:j?z.jsx(ae,{...k.lastButtonIcon}):z.jsx(ue,{...k.firstButtonIcon})}),z.jsx(Se,{onClick:H,disabled:c||x===0,color:"inherit","aria-label":d("previous",x),title:d("previous",x),...We??r,children:j?z.jsx(xe,{...k.nextButtonIcon}):z.jsx(we,{...k.previousButtonIcon})}),z.jsx(Ae,{onClick:G,disabled:c||(s!==-1?x>=Math.ceil(s/T)-1:!1),color:"inherit","aria-label":d("next",x),title:d("next",x),...Fe??i,children:j?z.jsx(we,{...k.previousButtonIcon}):z.jsx(xe,{...k.nextButtonIcon})}),A&&z.jsx(_e,{onClick:X,disabled:c||x>=Math.ceil(s/T)-1,"aria-label":d("last",x),title:d("last",x),...Ce,children:j?z.jsx(ue,{...k.firstButtonIcon}):z.jsx(ae,{...k.lastButtonIcon})})]})});function cMe(e){return fr("MuiTablePagination",e)}const rT=pr("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var z8;const uMe=Ft(Qr,{name:"MuiTablePagination",slot:"Root"})(Xr(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),dMe=Ft(CJ,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>({[`& .${rT.actions}`]:t.actions,...t.toolbar})})(Xr(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${rT.actions}`]:{flexShrink:0,marginLeft:20}}))),hMe=Ft("div",{name:"MuiTablePagination",slot:"Spacer"})({flex:"1 1 100%"}),fMe=Ft("p",{name:"MuiTablePagination",slot:"SelectLabel"})(Xr(({theme:e})=>({...e.typography.body2,flexShrink:0}))),pMe=Ft(nu,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>({[`& .${rT.selectIcon}`]:t.selectIcon,[`& .${rT.select}`]:t.select,...t.input,...t.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${rT.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),mMe=Ft(ko,{name:"MuiTablePagination",slot:"MenuItem"})({}),gMe=Ft("p",{name:"MuiTablePagination",slot:"DisplayedRows"})(Xr(({theme:e})=>({...e.typography.body2,flexShrink:0})));function yMe({from:e,to:t,count:n}){return`${e}–${t} of ${n!==-1?n:`more than ${t}`}`}function vMe(e){return`Go to ${e} page`}const _Me=e=>{const{classes:t}=e;return dr({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},cMe,t)},xMe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTablePagination"}),{ActionsComponent:s=lMe,backIconButtonProps:c,colSpan:d,component:i=Qr,count:m,disabled:x=!1,getItemAriaLabel:T=vMe,labelDisplayedRows:C=yMe,labelRowsPerPage:A="Rows per page:",nextIconButtonProps:I,onPageChange:k,onRowsPerPageChange:B,page:j,rowsPerPage:V,rowsPerPageOptions:H=[10,25,50,100],SelectProps:G={},showFirstButton:X=!1,showLastButton:Q=!1,slotProps:ee={},slots:ce={},...fe}=r,ue=r,ae=_Me(ue),xe=(ee==null?void 0:ee.select)??G,we=xe.native?"option":mMe;let Me;(i===Qr||i==="td")&&(Me=d||1e3);const Se=kh(xe.id),Ae=kh(xe.labelId),_e=()=>m===-1?(j+1)*V:V===-1?m:Math.min(m,(j+1)*V),Pe={slots:ce,slotProps:ee},[We,Fe]=Ur("root",{ref:n,className:ae.root,elementType:uMe,externalForwardedProps:{...Pe,component:i,...fe},ownerState:ue,additionalProps:{colSpan:Me}}),[Ce,He]=Ur("toolbar",{className:ae.toolbar,elementType:dMe,externalForwardedProps:Pe,ownerState:ue}),[dt,gt]=Ur("spacer",{className:ae.spacer,elementType:hMe,externalForwardedProps:Pe,ownerState:ue}),[Nt,wt]=Ur("selectLabel",{className:ae.selectLabel,elementType:fMe,externalForwardedProps:Pe,ownerState:ue,additionalProps:{id:Ae}}),[ot,st]=Ur("select",{className:ae.select,elementType:pMe,externalForwardedProps:Pe,ownerState:ue}),[St,Dt]=Ur("menuItem",{className:ae.menuItem,elementType:we,externalForwardedProps:Pe,ownerState:ue}),[Et,yt]=Ur("displayedRows",{className:ae.displayedRows,elementType:gMe,externalForwardedProps:Pe,ownerState:ue});return z.jsx(We,{...Fe,children:z.jsxs(Ce,{...He,children:[z.jsx(dt,{...gt}),H.length>1&&z.jsx(Nt,{...wt,children:A}),H.length>1&&z.jsx(ot,{variant:"standard",...!xe.variant&&{input:z8||(z8=z.jsx(YD,{}))},value:V,onChange:B,id:Se,labelId:Ae,...xe,classes:{...xe.classes,root:$n(ae.input,ae.selectRoot,(xe.classes||{}).root),select:$n(ae.select,(xe.classes||{}).select),icon:$n(ae.selectIcon,(xe.classes||{}).icon)},disabled:x,...st,children:H.map(Lt=>U.createElement(St,{...Dt,key:Lt.label?Lt.label:Lt,value:Lt.value?Lt.value:Lt},Lt.label?Lt.label:Lt))}),z.jsx(Et,{...yt,children:C({from:m===0?0:j*V+1,to:_e(),count:m===-1?-1:m,page:j})}),z.jsx(s,{className:ae.actions,backIconButtonProps:c,count:m,nextIconButtonProps:I,onPageChange:k,page:j,rowsPerPage:V,showFirstButton:X,showLastButton:Q,slotProps:ee.actions,slots:ce.actions,getItemAriaLabel:T,disabled:x})]})})});function bMe(e){return fr("MuiTableRow",e)}const F8=pr("MuiTableRow",["root","selected","hover","head","footer"]),wMe=e=>{const{classes:t,selected:n,hover:r,head:s,footer:c}=e;return dr({root:["root",n&&"selected",r&&"hover",s&&"head",c&&"footer"]},bMe,t)},SMe=Ft("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(Xr(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${F8.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${F8.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ei(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ei(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),B8="tr",Mh=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTableRow"}),{className:s,component:c=B8,hover:d=!1,selected:i=!1,...m}=r,x=U.useContext(QD),T={...r,component:c,hover:d,selected:i,head:x&&x.variant==="head",footer:x&&x.variant==="footer"},C=wMe(T);return z.jsx(SMe,{as:c,ref:n,className:$n(C.root,s),role:c===B8?null:"row",ownerState:T,...m})});function TMe(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function EMe(e,t,n,r={},s=()=>{}){const{ease:c=TMe,duration:d=300}=r;let i=null;const m=t[e];let x=!1;const T=()=>{x=!0},C=A=>{if(x){s(new Error("Animation cancelled"));return}i===null&&(i=A);const I=Math.min(1,(A-i)/d);if(t[e]=c(I)*(n-m)+m,I>=1){requestAnimationFrame(()=>{s(null)});return}requestAnimationFrame(C)};return m===n?(s(new Error("Element already at target position")),T):(requestAnimationFrame(C),T)}const CMe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function MMe(e){const{onChange:t,...n}=e,r=U.useRef(),s=U.useRef(null),c=()=>{r.current=s.current.offsetHeight-s.current.clientHeight};return Qs(()=>{const d=bE(()=>{const m=r.current;c(),m!==r.current&&t(r.current)}),i=xd(s.current);return i.addEventListener("resize",d),()=>{d.clear(),i.removeEventListener("resize",d)}},[t]),U.useEffect(()=>{c(),t(r.current)},[t]),z.jsx("div",{style:CMe,...n,ref:s})}function AMe(e){return fr("MuiTabScrollButton",e)}const RMe=pr("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),DMe=e=>{const{classes:t,orientation:n,disabled:r}=e;return dr({root:["root",n,r&&"disabled"]},AMe,t)},PMe=Ft(bd,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${RMe.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),IMe=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTabScrollButton"}),{className:s,slots:c={},slotProps:d={},direction:i,orientation:m,disabled:x,...T}=r,C=Al(),A={isRtl:C,...r},I=DMe(A),k=c.StartScrollButtonIcon??MJ,B=c.EndScrollButtonIcon??AJ,j=Co({elementType:k,externalSlotProps:d.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:A}),V=Co({elementType:B,externalSlotProps:d.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:A});return z.jsx(PMe,{component:"div",className:$n(I.root,s),ref:n,role:null,ownerState:A,tabIndex:null,...T,style:{...T.style,...m==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${C?-90:90}deg)`}},children:i==="left"?z.jsx(k,{...j}):z.jsx(B,{...V})})});function kMe(e){return fr("MuiTabs",e)}const $k=pr("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),j8=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,N8=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,PM=(e,t,n)=>{let r=!1,s=n(e,t);for(;s;){if(s===e.firstChild){if(r)return;r=!0}const c=s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||c)s=n(e,s);else{s.focus();return}}},OMe=e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:s,scrollableY:c,centered:d,scrollButtonsHideMobile:i,classes:m}=e;return dr({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",s&&"scrollableX",c&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",d&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",i&&"scrollButtonsHideMobile"],scrollableX:[s&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},kMe,m)},LMe=Ft("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${$k.scrollButtons}`]:t.scrollButtons},{[`& .${$k.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(Xr(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${$k.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),zMe=Ft("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),FMe=Ft("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.list,t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),BMe=Ft("span",{name:"MuiTabs",slot:"Indicator"})(Xr(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),jMe=Ft(MMe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),V8={},RJ=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTabs"}),s=Zo(),c=Al(),{"aria-label":d,"aria-labelledby":i,action:m,centered:x=!1,children:T,className:C,component:A="div",allowScrollButtonsMobile:I=!1,indicatorColor:k="primary",onChange:B,orientation:j="horizontal",ScrollButtonComponent:V,scrollButtons:H="auto",selectionFollowsFocus:G,slots:X={},slotProps:Q={},TabIndicatorProps:ee={},TabScrollButtonProps:ce={},textColor:fe="primary",value:ue,variant:ae="standard",visibleScrollbar:xe=!1,...we}=r,Me=ae==="scrollable",Se=j==="vertical",Ae=Se?"scrollTop":"scrollLeft",_e=Se?"top":"left",Pe=Se?"bottom":"right",We=Se?"clientHeight":"clientWidth",Fe=Se?"height":"width",Ce={...r,component:A,allowScrollButtonsMobile:I,indicatorColor:k,orientation:j,vertical:Se,scrollButtons:H,textColor:fe,variant:ae,visibleScrollbar:xe,fixed:!Me,hideScrollbar:Me&&!xe,scrollableX:Me&&!Se,scrollableY:Me&&Se,centered:x&&!Me,scrollButtonsHideMobile:!I},He=OMe(Ce),dt=Co({elementType:X.StartScrollButtonIcon,externalSlotProps:Q.startScrollButtonIcon,ownerState:Ce}),gt=Co({elementType:X.EndScrollButtonIcon,externalSlotProps:Q.endScrollButtonIcon,ownerState:Ce}),[Nt,wt]=U.useState(!1),[ot,st]=U.useState(V8),[St,Dt]=U.useState(!1),[Et,yt]=U.useState(!1),[Lt,Ct]=U.useState(!1),[Wt,fn]=U.useState({overflow:"hidden",scrollbarWidth:0}),Zt=new Map,Ut=U.useRef(null),kn=U.useRef(null),Bn={slots:X,slotProps:{indicator:ee,scrollButton:ce,...Q}},bn=()=>{const ie=Ut.current;let le;if(ie){const ze=ie.getBoundingClientRect();le={clientWidth:ie.clientWidth,scrollLeft:ie.scrollLeft,scrollTop:ie.scrollTop,scrollWidth:ie.scrollWidth,top:ze.top,bottom:ze.bottom,left:ze.left,right:ze.right}}let Te;if(ie&&ue!==!1){const ze=kn.current.children;if(ze.length>0){const $e=ze[Zt.get(ue)];Te=$e?$e.getBoundingClientRect():null}}return{tabsMeta:le,tabMeta:Te}},Nn=Er(()=>{const{tabsMeta:ie,tabMeta:le}=bn();let Te=0,ze;Se?(ze="top",le&&ie&&(Te=le.top-ie.top+ie.scrollTop)):(ze=c?"right":"left",le&&ie&&(Te=(c?-1:1)*(le[ze]-ie[ze]+ie.scrollLeft)));const $e={[ze]:Te,[Fe]:le?le[Fe]:0};if(typeof ot[ze]!="number"||typeof ot[Fe]!="number")st($e);else{const Qe=Math.abs(ot[ze]-$e[ze]),Ze=Math.abs(ot[Fe]-$e[Fe]);(Qe>=1||Ze>=1)&&st($e)}}),ft=(ie,{animation:le=!0}={})=>{le?EMe(Ae,Ut.current,ie,{duration:s.transitions.duration.standard}):Ut.current[Ae]=ie},vn=ie=>{let le=Ut.current[Ae];Se?le+=ie:le+=ie*(c?-1:1),ft(le)},Ot=()=>{const ie=Ut.current[We];let le=0;const Te=Array.from(kn.current.children);for(let ze=0;ze<Te.length;ze+=1){const $e=Te[ze];if(le+$e[We]>ie){ze===0&&(le=ie);break}le+=$e[We]}return le},tn=()=>{vn(-1*Ot())},Rn=()=>{vn(Ot())},[Hn,{onChange:mr,...Xn}]=Ur("scrollbar",{className:$n(He.scrollableX,He.hideScrollbar),elementType:jMe,shouldForwardComponentProp:!0,externalForwardedProps:Bn,ownerState:Ce}),or=U.useCallback(ie=>{mr==null||mr(ie),fn({overflow:null,scrollbarWidth:ie})},[mr]),[Mn,Fr]=Ur("scrollButtons",{className:$n(He.scrollButtons,ce.className),elementType:IMe,externalForwardedProps:Bn,ownerState:Ce,additionalProps:{orientation:j,slots:{StartScrollButtonIcon:X.startScrollButtonIcon||X.StartScrollButtonIcon,EndScrollButtonIcon:X.endScrollButtonIcon||X.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:dt,endScrollButtonIcon:gt}}}),Cr=()=>{const ie={};ie.scrollbarSizeListener=Me?z.jsx(Hn,{...Xn,onChange:or}):null;const Te=Me&&(H==="auto"&&(St||Et)||H===!0);return ie.scrollButtonStart=Te?z.jsx(Mn,{direction:c?"right":"left",onClick:tn,disabled:!St,...Fr}):null,ie.scrollButtonEnd=Te?z.jsx(Mn,{direction:c?"left":"right",onClick:Rn,disabled:!Et,...Fr}):null,ie},xr=Er(ie=>{const{tabsMeta:le,tabMeta:Te}=bn();if(!(!Te||!le)){if(Te[_e]<le[_e]){const ze=le[Ae]+(Te[_e]-le[_e]);ft(ze,{animation:ie})}else if(Te[Pe]>le[Pe]){const ze=le[Ae]+(Te[Pe]-le[Pe]);ft(ze,{animation:ie})}}}),ir=Er(()=>{Me&&H!==!1&&Ct(!Lt)});U.useEffect(()=>{const ie=bE(()=>{Ut.current&&Nn()});let le;const Te=Qe=>{Qe.forEach(Ze=>{Ze.removedNodes.forEach(et=>{le==null||le.unobserve(et)}),Ze.addedNodes.forEach(et=>{le==null||le.observe(et)})}),ie(),ir()},ze=xd(Ut.current);ze.addEventListener("resize",ie);let $e;return typeof ResizeObserver<"u"&&(le=new ResizeObserver(ie),Array.from(kn.current.children).forEach(Qe=>{le.observe(Qe)})),typeof MutationObserver<"u"&&($e=new MutationObserver(Te),$e.observe(kn.current,{childList:!0})),()=>{ie.clear(),ze.removeEventListener("resize",ie),$e==null||$e.disconnect(),le==null||le.disconnect()}},[Nn,ir]),U.useEffect(()=>{const ie=Array.from(kn.current.children),le=ie.length;if(typeof IntersectionObserver<"u"&&le>0&&Me&&H!==!1){const Te=ie[0],ze=ie[le-1],$e={root:Ut.current,threshold:.99},Qe=vt=>{Dt(!vt[0].isIntersecting)},Ze=new IntersectionObserver(Qe,$e);Ze.observe(Te);const et=vt=>{yt(!vt[0].isIntersecting)},ct=new IntersectionObserver(et,$e);return ct.observe(ze),()=>{Ze.disconnect(),ct.disconnect()}}},[Me,H,Lt,T==null?void 0:T.length]),U.useEffect(()=>{wt(!0)},[]),U.useEffect(()=>{Nn()}),U.useEffect(()=>{xr(V8!==ot)},[xr,ot]),U.useImperativeHandle(m,()=>({updateIndicator:Nn,updateScrollButtons:ir}),[Nn,ir]);const[Yr,Sr]=Ur("indicator",{className:$n(He.indicator,ee.className),elementType:BMe,externalForwardedProps:Bn,ownerState:Ce,additionalProps:{style:ot}}),Dr=z.jsx(Yr,{...Sr});let ki=0;const ns=U.Children.map(T,ie=>{if(!U.isValidElement(ie))return null;const le=ie.props.value===void 0?ki:ie.props.value;Zt.set(le,ki);const Te=le===ue;return ki+=1,U.cloneElement(ie,{fullWidth:ae==="fullWidth",indicator:Te&&!Nt&&Dr,selected:Te,selectionFollowsFocus:G,onChange:B,textColor:fe,value:le,...ki===1&&ue===!1&&!ie.props.tabIndex?{tabIndex:0}:{}})}),Vo=ie=>{if(ie.altKey||ie.shiftKey||ie.ctrlKey||ie.metaKey)return;const le=kn.current,Te=qa(le).activeElement;if(Te.getAttribute("role")!=="tab")return;let $e=j==="horizontal"?"ArrowLeft":"ArrowUp",Qe=j==="horizontal"?"ArrowRight":"ArrowDown";switch(j==="horizontal"&&c&&($e="ArrowRight",Qe="ArrowLeft"),ie.key){case $e:ie.preventDefault(),PM(le,Te,N8);break;case Qe:ie.preventDefault(),PM(le,Te,j8);break;case"Home":ie.preventDefault(),PM(le,null,j8);break;case"End":ie.preventDefault(),PM(le,null,N8);break}},zo=Cr(),[Rl,ma]=Ur("root",{ref:n,className:$n(He.root,C),elementType:LMe,externalForwardedProps:{...Bn,...we,component:A},ownerState:Ce}),[mn,ea]=Ur("scroller",{ref:Ut,className:He.scroller,elementType:zMe,externalForwardedProps:Bn,ownerState:Ce,additionalProps:{style:{overflow:Wt.overflow,[Se?`margin${c?"Left":"Right"}`:"marginBottom"]:xe?void 0:-Wt.scrollbarWidth}}}),[Pr,ke]=Ur("list",{ref:kn,className:$n(He.list,He.flexContainer),elementType:FMe,externalForwardedProps:Bn,ownerState:Ce,getSlotProps:ie=>({...ie,onKeyDown:le=>{var Te;Vo(le),(Te=ie.onKeyDown)==null||Te.call(ie,le)}})});return z.jsxs(Rl,{...ma,children:[zo.scrollButtonStart,zo.scrollbarSizeListener,z.jsxs(mn,{...ea,children:[z.jsx(Pr,{"aria-label":d,"aria-labelledby":i,"aria-orientation":j==="vertical"?"vertical":null,role:"tablist",...ke,children:ns}),Nt&&Dr]}),zo.scrollButtonEnd]})});function NMe(e){return fr("MuiTextField",e)}pr("MuiTextField",["root"]);const VMe={standard:WN,filled:HN,outlined:ZD},$Me=e=>{const{classes:t}=e;return dr({root:["root"]},NMe,t)},UMe=Ft(tu,{name:"MuiTextField",slot:"Root"})({}),Vi=U.forwardRef(function(t,n){const r=Br({props:t,name:"MuiTextField"}),{autoComplete:s,autoFocus:c=!1,children:d,className:i,color:m="primary",defaultValue:x,disabled:T=!1,error:C=!1,FormHelperTextProps:A,fullWidth:I=!1,helperText:k,id:B,InputLabelProps:j,inputProps:V,InputProps:H,inputRef:G,label:X,maxRows:Q,minRows:ee,multiline:ce=!1,name:fe,onBlur:ue,onChange:ae,onFocus:xe,placeholder:we,required:Me=!1,rows:Se,select:Ae=!1,SelectProps:_e,slots:Pe={},slotProps:We={},type:Fe,value:Ce,variant:He="outlined",...dt}=r,gt={...r,autoFocus:c,color:m,disabled:T,error:C,fullWidth:I,multiline:ce,required:Me,select:Ae,variant:He},Nt=$Me(gt),wt=kh(B),ot=k&&wt?`${wt}-helper-text`:void 0,st=X&&wt?`${wt}-label`:void 0,St=VMe[He],Dt={slots:Pe,slotProps:{input:H,inputLabel:j,htmlInput:V,formHelperText:A,select:_e,...We}},Et={},yt=Dt.slotProps.inputLabel;He==="outlined"&&(yt&&typeof yt.shrink<"u"&&(Et.notched=yt.shrink),Et.label=X),Ae&&((!_e||!_e.native)&&(Et.id=void 0),Et["aria-describedby"]=void 0);const[Lt,Ct]=Ur("root",{elementType:UMe,shouldForwardComponentProp:!0,externalForwardedProps:{...Dt,...dt},ownerState:gt,className:$n(Nt.root,i),ref:n,additionalProps:{disabled:T,error:C,fullWidth:I,required:Me,color:m,variant:He}}),[Wt,fn]=Ur("input",{elementType:St,externalForwardedProps:Dt,additionalProps:Et,ownerState:gt}),[Zt,Ut]=Ur("inputLabel",{elementType:Xg,externalForwardedProps:Dt,ownerState:gt}),[kn,Bn]=Ur("htmlInput",{elementType:"input",externalForwardedProps:Dt,ownerState:gt}),[bn,Nn]=Ur("formHelperText",{elementType:hJ,externalForwardedProps:Dt,ownerState:gt}),[ft,vn]=Ur("select",{elementType:nu,externalForwardedProps:Dt,ownerState:gt}),Ot=z.jsx(Wt,{"aria-describedby":ot,autoComplete:s,autoFocus:c,defaultValue:x,fullWidth:I,multiline:ce,name:fe,rows:Se,maxRows:Q,minRows:ee,type:Fe,value:Ce,id:wt,inputRef:G,onBlur:ue,onChange:ae,onFocus:xe,placeholder:we,inputProps:Bn,slots:{input:Pe.htmlInput?kn:void 0},...fn});return z.jsxs(Lt,{...Ct,children:[X!=null&&X!==""&&z.jsx(Zt,{htmlFor:wt,id:st,...Ut,children:X}),Ae?z.jsx(ft,{"aria-describedby":ot,id:wt,labelId:st,value:Ce,input:Ot,...vn,children:d}):Ot,k&&z.jsx(bn,{id:ot,...Nn,children:k})]})}),DJ=U.createContext({});function qMe(e){const t=U.useRef(null);return t.current===null&&(t.current=e()),t.current}const JN=typeof window<"u",HMe=JN?U.useLayoutEffect:U.useEffect,e5=U.createContext(null),PJ=U.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function WMe(e=!0){const t=U.useContext(e5);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,c=U.useId();U.useEffect(()=>{if(e)return s(c)},[e]);const d=U.useCallback(()=>e&&r&&r(c),[c,r,e]);return!n&&r?[!1,d]:[!0]}function t5(e,t){e.indexOf(t)===-1&&e.push(t)}function n5(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Zg=(e,t,n)=>n>t?t:n<e?e:n;let r5=()=>{};const Kg={},IJ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),kJ=e=>/^0[^.\s]+$/u.test(e);function i5(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ah=e=>e,GMe=(e,t)=>n=>t(e(n)),ME=(...e)=>e.reduce(GMe),CT=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class o5{constructor(){this.subscriptions=[]}add(t){return t5(this.subscriptions,t),()=>n5(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let c=0;c<s;c++){const d=this.subscriptions[c];d&&d(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dm=e=>e*1e3,hm=e=>e/1e3;function OJ(e,t){return t?e*(1e3/t):0}const YMe=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},LJ=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,XMe=1e-7,ZMe=12;function KMe(e,t,n,r,s){let c,d,i=0;do d=t+(n-t)/2,c=LJ(d,r,s)-e,c>0?n=d:t=d;while(Math.abs(c)>XMe&&++i<ZMe);return d}function AE(e,t,n,r){if(e===t&&n===r)return Ah;const s=c=>KMe(c,0,1,e,n);return c=>c===0||c===1?c:LJ(s(c),t,r)}const zJ=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,FJ=e=>t=>1-e(1-t),BJ=AE(.33,1.53,.69,.99),s5=FJ(BJ),jJ=zJ(s5),NJ=e=>(e*=2)<1?.5*s5(e):.5*(2-Math.pow(2,-10*(e-1))),a5=e=>1-Math.sin(Math.acos(e)),VJ=FJ(a5),$J=zJ(a5),QMe=AE(.42,0,1,1),JMe=AE(0,0,.58,1),UJ=AE(.42,0,.58,1),eAe=e=>Array.isArray(e)&&typeof e[0]!="number",qJ=e=>Array.isArray(e)&&typeof e[0]=="number",tAe={linear:Ah,easeIn:QMe,easeInOut:UJ,easeOut:JMe,circIn:a5,circInOut:$J,circOut:VJ,backIn:s5,backInOut:jJ,backOut:BJ,anticipate:NJ},nAe=e=>typeof e=="string",$8=e=>{if(qJ(e)){r5(e.length===4);const[t,n,r,s]=e;return AE(t,n,r,s)}else if(nAe(e))return tAe[e];return e},IM=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],U8={value:null};function rAe(e,t){let n=new Set,r=new Set,s=!1,c=!1;const d=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1},m=0;function x(C){d.has(C)&&(T.schedule(C),e()),m++,C(i)}const T={schedule:(C,A=!1,I=!1)=>{const B=I&&s?n:r;return A&&d.add(C),B.has(C)||B.add(C),C},cancel:C=>{r.delete(C),d.delete(C)},process:C=>{if(i=C,s){c=!0;return}s=!0,[n,r]=[r,n],n.forEach(x),t&&U8.value&&U8.value.frameloop[t].push(m),m=0,n.clear(),s=!1,c&&(c=!1,T.process(C))}};return T}const iAe=40;function HJ(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,d=IM.reduce((G,X)=>(G[X]=rAe(c,t?X:void 0),G),{}),{setup:i,read:m,resolveKeyframes:x,preUpdate:T,update:C,preRender:A,render:I,postRender:k}=d,B=()=>{const G=Kg.useManualTiming?s.timestamp:performance.now();n=!1,Kg.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(G-s.timestamp,iAe),1)),s.timestamp=G,s.isProcessing=!0,i.process(s),m.process(s),x.process(s),T.process(s),C.process(s),A.process(s),I.process(s),k.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(B))},j=()=>{n=!0,r=!0,s.isProcessing||e(B)};return{schedule:IM.reduce((G,X)=>{const Q=d[X];return G[X]=(ee,ce=!1,fe=!1)=>(n||j(),Q.schedule(ee,ce,fe)),G},{}),cancel:G=>{for(let X=0;X<IM.length;X++)d[IM[X]].cancel(G)},state:s,steps:d}}const{schedule:Ks,cancel:mv,state:$l,steps:Uk}=HJ(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ah,!0);let MA;function oAe(){MA=void 0}const Su={now:()=>(MA===void 0&&Su.set($l.isProcessing||Kg.useManualTiming?$l.timestamp:performance.now()),MA),set:e=>{MA=e,queueMicrotask(oAe)}},WJ=e=>t=>typeof t=="string"&&t.startsWith(e),l5=WJ("--"),sAe=WJ("var(--"),c5=e=>sAe(e)?aAe.test(e.split("/*")[0].trim()):!1,aAe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,O1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},MT={...O1,transform:e=>Zg(0,1,e)},kM={...O1,default:1},iT=e=>Math.round(e*1e5)/1e5,u5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lAe(e){return e==null}const cAe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,d5=(e,t)=>n=>!!(typeof n=="string"&&cAe.test(n)&&n.startsWith(e)||t&&!lAe(n)&&Object.prototype.hasOwnProperty.call(n,t)),GJ=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,c,d,i]=r.match(u5);return{[e]:parseFloat(s),[t]:parseFloat(c),[n]:parseFloat(d),alpha:i!==void 0?parseFloat(i):1}},uAe=e=>Zg(0,255,e),qk={...O1,transform:e=>Math.round(uAe(e))},b0={test:d5("rgb","red"),parse:GJ("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+qk.transform(e)+", "+qk.transform(t)+", "+qk.transform(n)+", "+iT(MT.transform(r))+")"};function dAe(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const wB={test:d5("#"),parse:dAe,transform:b0.transform},RE=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),tv=RE("deg"),fm=RE("%"),Pi=RE("px"),hAe=RE("vh"),fAe=RE("vw"),q8={...fm,parse:e=>fm.parse(e)/100,transform:e=>fm.transform(e*100)},Vb={test:d5("hsl","hue"),parse:GJ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+fm.transform(iT(t))+", "+fm.transform(iT(n))+", "+iT(MT.transform(r))+")"},gc={test:e=>b0.test(e)||wB.test(e)||Vb.test(e),parse:e=>b0.test(e)?b0.parse(e):Vb.test(e)?Vb.parse(e):wB.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?b0.transform(e):Vb.transform(e)},pAe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mAe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(u5))==null?void 0:t.length)||0)+(((n=e.match(pAe))==null?void 0:n.length)||0)>0}const YJ="number",XJ="color",gAe="var",yAe="var(",H8="${}",vAe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function AT(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let c=0;const i=t.replace(vAe,m=>(gc.test(m)?(r.color.push(c),s.push(XJ),n.push(gc.parse(m))):m.startsWith(yAe)?(r.var.push(c),s.push(gAe),n.push(m)):(r.number.push(c),s.push(YJ),n.push(parseFloat(m))),++c,H8)).split(H8);return{values:n,split:i,indexes:r,types:s}}function ZJ(e){return AT(e).values}function KJ(e){const{split:t,types:n}=AT(e),r=t.length;return s=>{let c="";for(let d=0;d<r;d++)if(c+=t[d],s[d]!==void 0){const i=n[d];i===YJ?c+=iT(s[d]):i===XJ?c+=gc.transform(s[d]):c+=s[d]}return c}}const _Ae=e=>typeof e=="number"?0:e;function xAe(e){const t=ZJ(e);return KJ(e)(t.map(_Ae))}const gv={test:mAe,parse:ZJ,createTransformer:KJ,getAnimatableNone:xAe};function Hk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bAe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,c=0,d=0;if(!t)s=c=d=n;else{const i=n<.5?n*(1+t):n+t-n*t,m=2*n-i;s=Hk(m,i,e+1/3),c=Hk(m,i,e),d=Hk(m,i,e-1/3)}return{red:Math.round(s*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:r}}function CR(e,t){return n=>n>0?t:e}const Xs=(e,t,n)=>e+(t-e)*n,Wk=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},wAe=[wB,b0,Vb],SAe=e=>wAe.find(t=>t.test(e));function W8(e){const t=SAe(e);if(!t)return!1;let n=t.parse(e);return t===Vb&&(n=bAe(n)),n}const G8=(e,t)=>{const n=W8(e),r=W8(t);if(!n||!r)return CR(e,t);const s={...n};return c=>(s.red=Wk(n.red,r.red,c),s.green=Wk(n.green,r.green,c),s.blue=Wk(n.blue,r.blue,c),s.alpha=Xs(n.alpha,r.alpha,c),b0.transform(s))},SB=new Set(["none","hidden"]);function TAe(e,t){return SB.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function EAe(e,t){return n=>Xs(e,t,n)}function h5(e){return typeof e=="number"?EAe:typeof e=="string"?c5(e)?CR:gc.test(e)?G8:AAe:Array.isArray(e)?QJ:typeof e=="object"?gc.test(e)?G8:CAe:CR}function QJ(e,t){const n=[...e],r=n.length,s=e.map((c,d)=>h5(c)(c,t[d]));return c=>{for(let d=0;d<r;d++)n[d]=s[d](c);return n}}function CAe(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=h5(e[s])(e[s],t[s]));return s=>{for(const c in r)n[c]=r[c](s);return n}}function MAe(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const c=t.types[s],d=e.indexes[c][r[c]],i=e.values[d]??0;n[s]=i,r[c]++}return n}const AAe=(e,t)=>{const n=gv.createTransformer(t),r=AT(e),s=AT(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?SB.has(e)&&!s.values.length||SB.has(t)&&!r.values.length?TAe(e,t):ME(QJ(MAe(r,s),s.values),n):CR(e,t)};function JJ(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Xs(e,t,n):h5(e)(e,t)}const RAe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Ks.update(t,n),stop:()=>mv(t),now:()=>$l.isProcessing?$l.timestamp:Su.now()}},eee=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let c=0;c<s;c++)r+=e(c/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},MR=2e4;function f5(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<MR;)t+=n,r=e.next(t);return t>=MR?1/0:t}function DAe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(f5(r),MR);return{type:"keyframes",ease:c=>r.next(s*c).value/t,duration:hm(s)}}const PAe=5;function tee(e,t,n){const r=Math.max(t-PAe,0);return OJ(n-e(r),t-r)}const da={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Y8=.001;function IAe({duration:e=da.duration,bounce:t=da.bounce,velocity:n=da.velocity,mass:r=da.mass}){let s,c,d=1-t;d=Zg(da.minDamping,da.maxDamping,d),e=Zg(da.minDuration,da.maxDuration,hm(e)),d<1?(s=x=>{const T=x*d,C=T*e,A=T-n,I=TB(x,d),k=Math.exp(-C);return Y8-A/I*k},c=x=>{const C=x*d*e,A=C*n+n,I=Math.pow(d,2)*Math.pow(x,2)*e,k=Math.exp(-C),B=TB(Math.pow(x,2),d);return(-s(x)+Y8>0?-1:1)*((A-I)*k)/B}):(s=x=>{const T=Math.exp(-x*e),C=(x-n)*e+1;return-.001+T*C},c=x=>{const T=Math.exp(-x*e),C=(n-x)*(e*e);return T*C});const i=5/e,m=OAe(s,c,i);if(e=dm(e),isNaN(m))return{stiffness:da.stiffness,damping:da.damping,duration:e};{const x=Math.pow(m,2)*r;return{stiffness:x,damping:d*2*Math.sqrt(r*x),duration:e}}}const kAe=12;function OAe(e,t,n){let r=n;for(let s=1;s<kAe;s++)r=r-e(r)/t(r);return r}function TB(e,t){return e*Math.sqrt(1-t*t)}const LAe=["duration","bounce"],zAe=["stiffness","damping","mass"];function X8(e,t){return t.some(n=>e[n]!==void 0)}function FAe(e){let t={velocity:da.velocity,stiffness:da.stiffness,damping:da.damping,mass:da.mass,isResolvedFromDuration:!1,...e};if(!X8(e,zAe)&&X8(e,LAe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,c=2*Zg(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:da.mass,stiffness:s,damping:c}}else{const n=IAe(e);t={...t,...n,mass:da.mass},t.isResolvedFromDuration=!0}return t}function AR(e=da.visualDuration,t=da.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const c=n.keyframes[0],d=n.keyframes[n.keyframes.length-1],i={done:!1,value:c},{stiffness:m,damping:x,mass:T,duration:C,velocity:A,isResolvedFromDuration:I}=FAe({...n,velocity:-hm(n.velocity||0)}),k=A||0,B=x/(2*Math.sqrt(m*T)),j=d-c,V=hm(Math.sqrt(m/T)),H=Math.abs(j)<5;r||(r=H?da.restSpeed.granular:da.restSpeed.default),s||(s=H?da.restDelta.granular:da.restDelta.default);let G;if(B<1){const Q=TB(V,B);G=ee=>{const ce=Math.exp(-B*V*ee);return d-ce*((k+B*V*j)/Q*Math.sin(Q*ee)+j*Math.cos(Q*ee))}}else if(B===1)G=Q=>d-Math.exp(-V*Q)*(j+(k+V*j)*Q);else{const Q=V*Math.sqrt(B*B-1);G=ee=>{const ce=Math.exp(-B*V*ee),fe=Math.min(Q*ee,300);return d-ce*((k+B*V*j)*Math.sinh(fe)+Q*j*Math.cosh(fe))/Q}}const X={calculatedDuration:I&&C||null,next:Q=>{const ee=G(Q);if(I)i.done=Q>=C;else{let ce=Q===0?k:0;B<1&&(ce=Q===0?dm(k):tee(G,Q,ee));const fe=Math.abs(ce)<=r,ue=Math.abs(d-ee)<=s;i.done=fe&&ue}return i.value=i.done?d:ee,i},toString:()=>{const Q=Math.min(f5(X),MR),ee=eee(ce=>X.next(Q*ce).value,Q,30);return Q+"ms "+ee},toTransition:()=>{}};return X}AR.applyToOptions=e=>{const t=DAe(e,100,AR);return e.ease=t.ease,e.duration=dm(t.duration),e.type="keyframes",e};function EB({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:c=500,modifyTarget:d,min:i,max:m,restDelta:x=.5,restSpeed:T}){const C=e[0],A={done:!1,value:C},I=fe=>i!==void 0&&fe<i||m!==void 0&&fe>m,k=fe=>i===void 0?m:m===void 0||Math.abs(i-fe)<Math.abs(m-fe)?i:m;let B=n*t;const j=C+B,V=d===void 0?j:d(j);V!==j&&(B=V-C);const H=fe=>-B*Math.exp(-fe/r),G=fe=>V+H(fe),X=fe=>{const ue=H(fe),ae=G(fe);A.done=Math.abs(ue)<=x,A.value=A.done?V:ae};let Q,ee;const ce=fe=>{I(A.value)&&(Q=fe,ee=AR({keyframes:[A.value,k(A.value)],velocity:tee(G,fe,A.value),damping:s,stiffness:c,restDelta:x,restSpeed:T}))};return ce(0),{calculatedDuration:null,next:fe=>{let ue=!1;return!ee&&Q===void 0&&(ue=!0,X(fe),ce(fe)),Q!==void 0&&fe>=Q?ee.next(fe-Q):(!ue&&X(fe),A)}}}function BAe(e,t,n){const r=[],s=n||Kg.mix||JJ,c=e.length-1;for(let d=0;d<c;d++){let i=s(e[d],e[d+1]);if(t){const m=Array.isArray(t)?t[d]||Ah:t;i=ME(m,i)}r.push(i)}return r}function jAe(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const c=e.length;if(r5(c===t.length),c===1)return()=>t[0];if(c===2&&t[0]===t[1])return()=>t[1];const d=e[0]===e[1];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=BAe(t,r,s),m=i.length,x=T=>{if(d&&T<e[0])return t[0];let C=0;if(m>1)for(;C<e.length-2&&!(T<e[C+1]);C++);const A=CT(e[C],e[C+1],T);return i[C](A)};return n?T=>x(Zg(e[0],e[c-1],T)):x}function NAe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=CT(0,t,r);e.push(Xs(n,1,s))}}function VAe(e){const t=[0];return NAe(t,e.length-1),t}function $Ae(e,t){return e.map(n=>n*t)}function UAe(e,t){return e.map(()=>t||UJ).splice(0,e.length-1)}function oT({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=eAe(r)?r.map($8):$8(r),c={done:!1,value:t[0]},d=$Ae(n&&n.length===t.length?n:VAe(t),e),i=jAe(d,t,{ease:Array.isArray(s)?s:UAe(t,s)});return{calculatedDuration:e,next:m=>(c.value=i(m),c.done=m>=e,c)}}const qAe=e=>e!==null;function p5(e,{repeat:t,repeatType:n="loop"},r,s=1){const c=e.filter(qAe),i=s<0||t&&n!=="loop"&&t%2===1?0:c.length-1;return!i||r===void 0?c[i]:r}const HAe={decay:EB,inertia:EB,tween:oT,keyframes:oT,spring:AR};function nee(e){typeof e.type=="string"&&(e.type=HAe[e.type])}class m5{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const WAe=e=>e/100;class ree extends m5{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,s;if(n){const{motionValue:c}=this.options;c&&c.updatedAt!==Su.now()&&this.tick(Su.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;nee(t);const{type:n=oT,repeat:r=0,repeatDelay:s=0,repeatType:c,velocity:d=0}=t;let{keyframes:i}=t;const m=n||oT;m!==oT&&typeof i[0]!="number"&&(this.mixKeyframes=ME(WAe,JJ(i[0],i[1])),i=[0,100]);const x=m({...t,keyframes:i});c==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...i].reverse(),velocity:-d})),x.calculatedDuration===null&&(x.calculatedDuration=f5(x));const{calculatedDuration:T}=x;this.calculatedDuration=T,this.resolvedDuration=T+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=x}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:c,mirroredGenerator:d,resolvedDuration:i,calculatedDuration:m}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:T,repeat:C,repeatType:A,repeatDelay:I,type:k,onUpdate:B,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const V=this.currentTime-x*(this.playbackSpeed>=0?1:-1),H=this.playbackSpeed>=0?V<0:V>s;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let G=this.currentTime,X=r;if(C){const fe=Math.min(this.currentTime,s)/i;let ue=Math.floor(fe),ae=fe%1;!ae&&fe>=1&&(ae=1),ae===1&&ue--,ue=Math.min(ue,C+1),!!(ue%2)&&(A==="reverse"?(ae=1-ae,I&&(ae-=I/i)):A==="mirror"&&(X=d)),G=Zg(0,1,ae)*i}const Q=H?{done:!1,value:T[0]}:X.next(G);c&&(Q.value=c(Q.value));let{done:ee}=Q;!H&&m!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const ce=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return ce&&k!==EB&&(Q.value=p5(T,this.options,j,this.speed)),B&&B(Q.value),ce&&this.finish(),Q}then(t,n){return this.finished.then(t,n)}get duration(){return hm(this.calculatedDuration)}get time(){return hm(this.currentTime)}set time(t){var n;t=dm(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Su.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hm(this.currentTime))}play(){var s,c;if(this.isStopped)return;const{driver:t=RAe,startTime:n}=this.options;this.driver||(this.driver=t(d=>this.tick(d))),(c=(s=this.options).onPlay)==null||c.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Su.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function GAe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const w0=e=>e*180/Math.PI,CB=e=>{const t=w0(Math.atan2(e[1],e[0]));return MB(t)},YAe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:CB,rotateZ:CB,skewX:e=>w0(Math.atan(e[1])),skewY:e=>w0(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},MB=e=>(e=e%360,e<0&&(e+=360),e),Z8=CB,K8=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Q8=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),XAe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:K8,scaleY:Q8,scale:e=>(K8(e)+Q8(e))/2,rotateX:e=>MB(w0(Math.atan2(e[6],e[5]))),rotateY:e=>MB(w0(Math.atan2(-e[2],e[0]))),rotateZ:Z8,rotate:Z8,skewX:e=>w0(Math.atan(e[4])),skewY:e=>w0(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function J8(e){return e.includes("scale")?1:0}function AB(e,t){if(!e||e==="none")return J8(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=XAe,s=n;else{const i=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=YAe,s=i}if(!s)return J8(t);const c=r[t],d=s[1].split(",").map(KAe);return typeof c=="function"?c(d):d[c]}const ZAe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return AB(n,t)};function KAe(e){return parseFloat(e.trim())}const L1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],z1=new Set(L1),eq=e=>e===O1||e===Pi,QAe=new Set(["x","y","z"]),JAe=L1.filter(e=>!QAe.has(e));function eRe(e){const t=[];return JAe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const A0={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>AB(t,"x"),y:(e,{transform:t})=>AB(t,"y")};A0.translateX=A0.x;A0.translateY=A0.y;const R0=new Set;let RB=!1,DB=!1,PB=!1;function iee(){if(DB){const e=Array.from(R0).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=eRe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([c,d])=>{var i;(i=r.getValue(c))==null||i.set(d)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}DB=!1,RB=!1,R0.forEach(e=>e.complete(PB)),R0.clear()}function oee(){R0.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(DB=!0)})}function tRe(){PB=!0,oee(),iee(),PB=!1}class g5{constructor(t,n,r,s,c,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=c,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(R0.add(this),RB||(RB=!0,Ks.read(oee),Ks.resolveKeyframes(iee))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const c=s==null?void 0:s.get(),d=t[t.length-1];if(c!==void 0)t[0]=c;else if(r&&n){const i=r.readValue(n,d);i!=null&&(t[0]=i)}t[0]===void 0&&(t[0]=d),s&&c===void 0&&s.set(t[0])}GAe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),R0.delete(this)}cancel(){this.state==="scheduled"&&(R0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nRe=e=>e.startsWith("--");function rRe(e,t,n){nRe(t)?e.style.setProperty(t,n):e.style[t]=n}const iRe=i5(()=>window.ScrollTimeline!==void 0),oRe={};function sRe(e,t){const n=i5(e);return()=>oRe[t]??n()}const see=sRe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jS=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,tq={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jS([0,.65,.55,1]),circOut:jS([.55,0,1,.45]),backIn:jS([.31,.01,.66,-.59]),backOut:jS([.33,1.53,.69,.99])};function aee(e,t){if(e)return typeof e=="function"?see()?eee(e,t):"ease-out":qJ(e)?jS(e):Array.isArray(e)?e.map(n=>aee(n,t)||tq.easeOut):tq[e]}function aRe(e,t,n,{delay:r=0,duration:s=300,repeat:c=0,repeatType:d="loop",ease:i="easeOut",times:m}={},x=void 0){const T={[t]:n};m&&(T.offset=m);const C=aee(i,s);Array.isArray(C)&&(T.easing=C);const A={delay:r,duration:s,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"};return x&&(A.pseudoElement=x),e.animate(T,A)}function lee(e){return typeof e=="function"&&"applyToOptions"in e}function lRe({type:e,...t}){return lee(e)&&see()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class cRe extends m5{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:c,allowFlatten:d=!1,finalKeyframe:i,onComplete:m}=t;this.isPseudoElement=!!c,this.allowFlatten=d,this.options=t,r5(typeof t.type!="string");const x=lRe(t);this.animation=aRe(n,r,s,x,c),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const T=p5(s,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(T):rRe(n,r,T),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return hm(Number(t))}get time(){return hm(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=dm(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&iRe()?(this.animation.timeline=t,Ah):n(this)}}const cee={anticipate:NJ,backInOut:jJ,circInOut:$J};function uRe(e){return e in cee}function dRe(e){typeof e.ease=="string"&&uRe(e.ease)&&(e.ease=cee[e.ease])}const nq=10;class hRe extends cRe{constructor(t){dRe(t),nee(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:c,...d}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const i=new ree({...d,autoplay:!1}),m=dm(this.finishedTime??this.time);n.setWithVelocity(i.sample(m-nq).value,i.sample(m).value,nq),i.stop()}}const rq=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(gv.test(e)||e==="0")&&!e.startsWith("url("));function fRe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function pRe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const c=e[e.length-1],d=rq(s,t),i=rq(c,t);return!d||!i?!1:fRe(e)||(n==="spring"||lee(n))&&r}const mRe=new Set(["opacity","clipPath","filter","transform"]),gRe=i5(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yRe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:c,type:d}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:i,transformTemplate:m}=t.owner.getProps();return gRe()&&n&&mRe.has(n)&&(n!=="transform"||!m)&&!i&&!r&&s!=="mirror"&&c!==0&&d!=="inertia"}const vRe=40;class _Re extends m5{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:c=0,repeatType:d="loop",keyframes:i,name:m,motionValue:x,element:T,...C}){var k;super(),this.stop=()=>{var B,j;this._animation&&(this._animation.stop(),(B=this.stopTimeline)==null||B.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Su.now();const A={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:c,repeatType:d,name:m,motionValue:x,element:T,...C},I=(T==null?void 0:T.KeyframeResolver)||g5;this.keyframeResolver=new I(i,(B,j,V)=>this.onKeyframesResolved(B,j,A,!V),m,x,T),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:c,type:d,velocity:i,delay:m,isHandoff:x,onUpdate:T}=r;this.resolvedAt=Su.now(),pRe(t,c,d,i)||((Kg.instantAnimations||!m)&&(T==null||T(p5(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const A={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>vRe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},I=!x&&yRe(A)?new hRe({...A,element:A.motionValue.owner.current}):new ree(A);I.finished.then(()=>this.notifyFinished()).catch(Ah),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),tRe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const xRe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bRe(e){const t=xRe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function uee(e,t,n=1){const[r,s]=bRe(e);if(!r)return;const c=window.getComputedStyle(t).getPropertyValue(r);if(c){const d=c.trim();return IJ(d)?parseFloat(d):d}return c5(s)?uee(s,t,n+1):s}function y5(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const dee=new Set(["width","height","top","left","right","bottom",...L1]),wRe={test:e=>e==="auto",parse:e=>e},hee=e=>t=>t.test(e),fee=[O1,Pi,fm,tv,fAe,hAe,wRe],iq=e=>fee.find(hee(e));function SRe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||kJ(e):!0}const TRe=new Set(["brightness","contrast","saturate","opacity"]);function ERe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(u5)||[];if(!r)return e;const s=n.replace(r,"");let c=TRe.has(t)?1:0;return r!==n&&(c*=100),t+"("+c+s+")"}const CRe=/\b([a-z-]*)\(.*?\)/gu,IB={...gv,getAnimatableNone:e=>{const t=e.match(CRe);return t?t.map(ERe).join(" "):e}},oq={...O1,transform:Math.round},MRe={rotate:tv,rotateX:tv,rotateY:tv,rotateZ:tv,scale:kM,scaleX:kM,scaleY:kM,scaleZ:kM,skew:tv,skewX:tv,skewY:tv,distance:Pi,translateX:Pi,translateY:Pi,translateZ:Pi,x:Pi,y:Pi,z:Pi,perspective:Pi,transformPerspective:Pi,opacity:MT,originX:q8,originY:q8,originZ:Pi},v5={borderWidth:Pi,borderTopWidth:Pi,borderRightWidth:Pi,borderBottomWidth:Pi,borderLeftWidth:Pi,borderRadius:Pi,radius:Pi,borderTopLeftRadius:Pi,borderTopRightRadius:Pi,borderBottomRightRadius:Pi,borderBottomLeftRadius:Pi,width:Pi,maxWidth:Pi,height:Pi,maxHeight:Pi,top:Pi,right:Pi,bottom:Pi,left:Pi,padding:Pi,paddingTop:Pi,paddingRight:Pi,paddingBottom:Pi,paddingLeft:Pi,margin:Pi,marginTop:Pi,marginRight:Pi,marginBottom:Pi,marginLeft:Pi,backgroundPositionX:Pi,backgroundPositionY:Pi,...MRe,zIndex:oq,fillOpacity:MT,strokeOpacity:MT,numOctaves:oq},ARe={...v5,color:gc,backgroundColor:gc,outlineColor:gc,fill:gc,stroke:gc,borderColor:gc,borderTopColor:gc,borderRightColor:gc,borderBottomColor:gc,borderLeftColor:gc,filter:IB,WebkitFilter:IB},pee=e=>ARe[e];function mee(e,t){let n=pee(e);return n!==IB&&(n=gv),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const RRe=new Set(["auto","none","0"]);function DRe(e,t,n){let r=0,s;for(;r<e.length&&!s;){const c=e[r];typeof c=="string"&&!RRe.has(c)&&AT(c).values.length&&(s=e[r]),r++}if(s&&n)for(const c of t)e[c]=mee(n,s)}class PRe extends g5{constructor(t,n,r,s,c){super(t,n,r,s,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let x=t[m];if(typeof x=="string"&&(x=x.trim(),c5(x))){const T=uee(x,n.current);T!==void 0&&(t[m]=T),m===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!dee.has(r)||t.length!==2)return;const[s,c]=t,d=iq(s),i=iq(c);if(d!==i)if(eq(d)&&eq(i))for(let m=0;m<t.length;m++){const x=t[m];typeof x=="string"&&(t[m]=parseFloat(x))}else A0[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||SRe(t[s]))&&r.push(s);r.length&&DRe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=A0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var i;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const c=r.length-1,d=r[c];r[c]=A0[n](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),(i=this.removedTransforms)!=null&&i.length&&this.removedTransforms.forEach(([m,x])=>{t.getValue(m).set(x)}),this.resolveNoneKeyframes()}}function IRe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const sq=30,kRe=e=>!isNaN(parseFloat(e));class ORe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var d,i;const c=Su.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((d=this.events.change)==null||d.notify(this.current),this.dependents))for(const m of this.dependents)m.dirty();s&&((i=this.events.renderRequest)==null||i.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Su.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kRe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new o5);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ks.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Su.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>sq)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,sq);return OJ(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function RT(e,t){return new ORe(e,t)}const gee=(e,t)=>t&&typeof e=="number"?t.transform(e):e,{schedule:_5}=HJ(queueMicrotask,!1),$f={x:!1,y:!1};function yee(){return $f.x||$f.y}function LRe(e){return e==="x"||e==="y"?$f[e]?null:($f[e]=!0,()=>{$f[e]=!1}):$f.x||$f.y?null:($f.x=$f.y=!0,()=>{$f.x=$f.y=!1})}function vee(e,t){const n=IRe(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function aq(e){return!(e.pointerType==="touch"||yee())}function zRe(e,t,n={}){const[r,s,c]=vee(e,n),d=i=>{if(!aq(i))return;const{target:m}=i,x=t(m,i);if(typeof x!="function"||!m)return;const T=C=>{aq(C)&&(x(C),m.removeEventListener("pointerleave",T))};m.addEventListener("pointerleave",T,s)};return r.forEach(i=>{i.addEventListener("pointerenter",d,s)}),c}const _ee=(e,t)=>t?e===t?!0:_ee(e,t.parentElement):!1,x5=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,FRe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BRe(e){return FRe.has(e.tagName)||e.tabIndex!==-1}const AA=new WeakSet;function lq(e){return t=>{t.key==="Enter"&&e(t)}}function Gk(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const jRe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=lq(()=>{if(AA.has(n))return;Gk(n,"down");const s=lq(()=>{Gk(n,"up")}),c=()=>Gk(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",c,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function cq(e){return x5(e)&&!yee()}function NRe(e,t,n={}){const[r,s,c]=vee(e,n),d=i=>{const m=i.currentTarget;if(!cq(i))return;AA.add(m);const x=t(m,i),T=(I,k)=>{window.removeEventListener("pointerup",C),window.removeEventListener("pointercancel",A),AA.has(m)&&AA.delete(m),cq(I)&&typeof x=="function"&&x(I,{success:k})},C=I=>{T(I,m===window||m===document||n.useGlobalTarget||_ee(m,I.target))},A=I=>{T(I,!1)};window.addEventListener("pointerup",C,s),window.addEventListener("pointercancel",A,s)};return r.forEach(i=>{(n.useGlobalTarget?window:i).addEventListener("pointerdown",d,s),i instanceof HTMLElement&&(i.addEventListener("focus",x=>jRe(x,s)),!BRe(i)&&!i.hasAttribute("tabindex")&&(i.tabIndex=0))}),c}const VRe=[...fee,gc,gv],$Re=e=>VRe.find(hee(e)),xee=U.createContext({strict:!1}),uq={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},p1={};for(const e in uq)p1[e]={isEnabled:t=>uq[e].some(n=>!!t[n])};function URe(e){for(const t in e)p1[t]={...p1[t],...e[t]}}const qRe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function RR(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||qRe.has(e)}let bee=e=>!RR(e);function HRe(e){e&&(bee=t=>t.startsWith("on")?!RR(t):e(t))}try{HRe(require("@emotion/is-prop-valid").default)}catch{}function WRe(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(bee(s)||n===!0&&RR(s)||!t&&!RR(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function GRe(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const nP=U.createContext({});function rP(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function DT(e){return typeof e=="string"||Array.isArray(e)}const b5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],w5=["initial",...b5];function iP(e){return rP(e.animate)||w5.some(t=>DT(e[t]))}function wee(e){return!!(iP(e)||e.variants)}function YRe(e,t){if(iP(e)){const{initial:n,animate:r}=e;return{initial:n===!1||DT(n)?n:void 0,animate:DT(r)?r:void 0}}return e.inherit!==!1?t:{}}function XRe(e){const{initial:t,animate:n}=YRe(e,U.useContext(nP));return U.useMemo(()=>({initial:t,animate:n}),[dq(t),dq(n)])}function dq(e){return Array.isArray(e)?e.join(" "):e}const ZRe=Symbol.for("motionComponentSymbol");function $b(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function KRe(e,t,n){return U.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):$b(n)&&(n.current=r))},[t])}const S5=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),QRe="framerAppearId",See="data-"+S5(QRe),Tee=U.createContext({});function JRe(e,t,n,r,s){var B,j;const{visualElement:c}=U.useContext(nP),d=U.useContext(xee),i=U.useContext(e5),m=U.useContext(PJ).reducedMotion,x=U.useRef(null);r=r||d.renderer,!x.current&&r&&(x.current=r(e,{visualState:t,parent:c,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:m}));const T=x.current,C=U.useContext(Tee);T&&!T.projection&&s&&(T.type==="html"||T.type==="svg")&&eDe(x.current,n,s,C);const A=U.useRef(!1);U.useInsertionEffect(()=>{T&&A.current&&T.update(n,i)});const I=n[See],k=U.useRef(!!I&&!((B=window.MotionHandoffIsComplete)!=null&&B.call(window,I))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,I)));return HMe(()=>{T&&(A.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),_5.render(T.render),k.current&&T.animationState&&T.animationState.animateChanges())}),U.useEffect(()=>{T&&(!k.current&&T.animationState&&T.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,I)}),k.current=!1))}),T}function eDe(e,t,n,r){const{layoutId:s,layout:c,drag:d,dragConstraints:i,layoutScroll:m,layoutRoot:x,layoutCrossfade:T}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Eee(e.parent)),e.projection.setOptions({layoutId:s,layout:c,alwaysMeasureLayout:!!d||i&&$b(i),visualElement:e,animationType:typeof c=="string"?c:"both",initialPromotionConfig:r,crossfade:T,layoutScroll:m,layoutRoot:x})}function Eee(e){if(e)return e.options.allowProjection!==!1?e.projection:Eee(e.parent)}function tDe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&URe(e);function c(i,m){let x;const T={...U.useContext(PJ),...i,layoutId:nDe(i)},{isStatic:C}=T,A=XRe(i),I=r(i,C);if(!C&&JN){rDe();const k=iDe(T);x=k.MeasureLayout,A.visualElement=JRe(s,I,T,t,k.ProjectionNode)}return z.jsxs(nP.Provider,{value:A,children:[x&&A.visualElement?z.jsx(x,{visualElement:A.visualElement,...T}):null,n(s,i,KRe(I,A.visualElement,m),I,C,A.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const d=U.forwardRef(c);return d[ZRe]=s,d}function nDe({layoutId:e}){const t=U.useContext(DJ).id;return t&&e!==void 0?t+"-"+e:e}function rDe(e,t){U.useContext(xee).strict}function iDe(e){const{drag:t,layout:n}=p1;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const PT={};function oDe(e){for(const t in e)PT[t]=e[t],l5(t)&&(PT[t].isCSSVariable=!0)}function Cee(e,{layout:t,layoutId:n}){return z1.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!PT[e]||e==="opacity")}const _c=e=>!!(e&&e.getVelocity),sDe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aDe=L1.length;function lDe(e,t,n){let r="",s=!0;for(let c=0;c<aDe;c++){const d=L1[c],i=e[d];if(i===void 0)continue;let m=!0;if(typeof i=="number"?m=i===(d.startsWith("scale")?1:0):m=parseFloat(i)===0,!m||n){const x=gee(i,v5[d]);if(!m){s=!1;const T=sDe[d]||d;r+=`${T}(${x}) `}n&&(t[d]=x)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function T5(e,t,n){const{style:r,vars:s,transformOrigin:c}=e;let d=!1,i=!1;for(const m in t){const x=t[m];if(z1.has(m)){d=!0;continue}else if(l5(m)){s[m]=x;continue}else{const T=gee(x,v5[m]);m.startsWith("origin")?(i=!0,c[m]=T):r[m]=T}}if(t.transform||(d||n?r.transform=lDe(t,e.transform,n):r.transform&&(r.transform="none")),i){const{originX:m="50%",originY:x="50%",originZ:T=0}=c;r.transformOrigin=`${m} ${x} ${T}`}}const E5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Mee(e,t,n){for(const r in t)!_c(t[r])&&!Cee(r,n)&&(e[r]=t[r])}function cDe({transformTemplate:e},t){return U.useMemo(()=>{const n=E5();return T5(n,t,e),Object.assign({},n.vars,n.style)},[t])}function uDe(e,t){const n=e.style||{},r={};return Mee(r,n,e),Object.assign(r,cDe(e,t)),r}function dDe(e,t){const n={},r=uDe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const hDe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C5(e){return typeof e!="string"||e.includes("-")?!1:!!(hDe.indexOf(e)>-1||/[A-Z]/u.test(e))}const fDe={offset:"stroke-dashoffset",array:"stroke-dasharray"},pDe={offset:"strokeDashoffset",array:"strokeDasharray"};function mDe(e,t,n=1,r=0,s=!0){e.pathLength=1;const c=s?fDe:pDe;e[c.offset]=Pi.transform(-r);const d=Pi.transform(t),i=Pi.transform(n);e[c.array]=`${d} ${i}`}function Aee(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:c=1,pathOffset:d=0,...i},m,x,T){if(T5(e,i,x),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:C,style:A}=e;C.transform&&(A.transform=C.transform,delete C.transform),(A.transform||C.transformOrigin)&&(A.transformOrigin=C.transformOrigin??"50% 50%",delete C.transformOrigin),A.transform&&(A.transformBox=(T==null?void 0:T.transformBox)??"fill-box",delete C.transformBox),t!==void 0&&(C.x=t),n!==void 0&&(C.y=n),r!==void 0&&(C.scale=r),s!==void 0&&mDe(C,s,c,d,!1)}const Ree=()=>({...E5(),attrs:{}}),Dee=e=>typeof e=="string"&&e.toLowerCase()==="svg";function gDe(e,t,n,r){const s=U.useMemo(()=>{const c=Ree();return Aee(c,t,Dee(r),e.transformTemplate,e.style),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Mee(c,e.style,e),s.style={...c,...s.style}}return s}function yDe(e=!1){return(n,r,s,{latestValues:c},d)=>{const m=(C5(n)?gDe:dDe)(r,c,d,n),x=WRe(r,typeof n=="string",e),T=n!==U.Fragment?{...x,...m,ref:s}:{},{children:C}=r,A=U.useMemo(()=>_c(C)?C.get():C,[C]);return U.createElement(n,{...T,children:A})}}function hq(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function M5(e,t,n,r){if(typeof t=="function"){const[s,c]=hq(r);t=t(n!==void 0?n:e.custom,s,c)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,c]=hq(r);t=t(n!==void 0?n:e.custom,s,c)}return t}function RA(e){return _c(e)?e.get():e}function vDe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:_De(n,r,s,e),renderState:t()}}const Pee=e=>(t,n)=>{const r=U.useContext(nP),s=U.useContext(e5),c=()=>vDe(e,t,r,s);return n?c():qMe(c)};function _De(e,t,n,r){const s={},c=r(e,{});for(const A in c)s[A]=RA(c[A]);let{initial:d,animate:i}=e;const m=iP(e),x=wee(e);t&&x&&!m&&e.inherit!==!1&&(d===void 0&&(d=t.initial),i===void 0&&(i=t.animate));let T=n?n.initial===!1:!1;T=T||d===!1;const C=T?i:d;if(C&&typeof C!="boolean"&&!rP(C)){const A=Array.isArray(C)?C:[C];for(let I=0;I<A.length;I++){const k=M5(e,A[I]);if(k){const{transitionEnd:B,transition:j,...V}=k;for(const H in V){let G=V[H];if(Array.isArray(G)){const X=T?G.length-1:0;G=G[X]}G!==null&&(s[H]=G)}for(const H in B)s[H]=B[H]}}}return s}function A5(e,t,n){var c;const{style:r}=e,s={};for(const d in r)(_c(r[d])||t.style&&_c(t.style[d])||Cee(d,e)||((c=n==null?void 0:n.getValue(d))==null?void 0:c.liveStyle)!==void 0)&&(s[d]=r[d]);return s}const xDe={useVisualState:Pee({scrapeMotionValuesFromProps:A5,createRenderState:E5})};function Iee(e,t,n){const r=A5(e,t,n);for(const s in e)if(_c(e[s])||_c(t[s])){const c=L1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[c]=e[s]}return r}const bDe={useVisualState:Pee({scrapeMotionValuesFromProps:Iee,createRenderState:Ree})};function wDe(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const d={...C5(r)?bDe:xDe,preloadedFeatures:e,useRender:yDe(s),createVisualElement:t,Component:r};return tDe(d)}}function IT(e,t,n){const r=e.getProps();return M5(r,t,n!==void 0?n:r.custom,e)}const kB=e=>Array.isArray(e);function SDe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,RT(n))}function TDe(e){return kB(e)?e[e.length-1]||0:e}function EDe(e,t){const n=IT(e,t);let{transitionEnd:r={},transition:s={},...c}=n||{};c={...c,...r};for(const d in c){const i=TDe(c[d]);SDe(e,d,i)}}function CDe(e){return!!(_c(e)&&e.add)}function OB(e,t){const n=e.getValue("willChange");if(CDe(n))return n.add(t);if(!n&&Kg.WillChange){const r=new Kg.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function kee(e){return e.props[See]}const MDe=e=>e!==null;function ADe(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(MDe),c=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[c]}const RDe={type:"spring",stiffness:500,damping:25,restSpeed:10},DDe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),PDe={type:"keyframes",duration:.8},IDe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kDe=(e,{keyframes:t})=>t.length>2?PDe:z1.has(e)?e.startsWith("scale")?DDe(t[1]):RDe:IDe;function ODe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:c,repeatType:d,repeatDelay:i,from:m,elapsed:x,...T}){return!!Object.keys(T).length}const R5=(e,t,n,r={},s,c)=>d=>{const i=y5(r,e)||{},m=i.delay||r.delay||0;let{elapsed:x=0}=r;x=x-dm(m);const T={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...i,delay:-x,onUpdate:A=>{t.set(A),i.onUpdate&&i.onUpdate(A)},onComplete:()=>{d(),i.onComplete&&i.onComplete()},name:e,motionValue:t,element:c?void 0:s};ODe(i)||Object.assign(T,kDe(e,T)),T.duration&&(T.duration=dm(T.duration)),T.repeatDelay&&(T.repeatDelay=dm(T.repeatDelay)),T.from!==void 0&&(T.keyframes[0]=T.from);let C=!1;if((T.type===!1||T.duration===0&&!T.repeatDelay)&&(T.duration=0,T.delay===0&&(C=!0)),(Kg.instantAnimations||Kg.skipAnimations)&&(C=!0,T.duration=0,T.delay=0),T.allowFlatten=!i.type&&!i.ease,C&&!c&&t.get()!==void 0){const A=ADe(T.keyframes,i);if(A!==void 0){Ks.update(()=>{T.onUpdate(A),T.onComplete()});return}}return new _Re(T)};function LDe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Oee(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:d,...i}=t;r&&(c=r);const m=[],x=s&&e.animationState&&e.animationState.getState()[s];for(const T in i){const C=e.getValue(T,e.latestValues[T]??null),A=i[T];if(A===void 0||x&&LDe(x,T))continue;const I={delay:n,...y5(c||{},T)},k=C.get();if(k!==void 0&&!C.isAnimating&&!Array.isArray(A)&&A===k&&!I.velocity)continue;let B=!1;if(window.MotionHandoffAnimation){const V=kee(e);if(V){const H=window.MotionHandoffAnimation(V,T,Ks);H!==null&&(I.startTime=H,B=!0)}}OB(e,T),C.start(R5(T,C,A,e.shouldReduceMotion&&dee.has(T)?{type:!1}:I,e,B));const j=C.animation;j&&m.push(j)}return d&&Promise.all(m).then(()=>{Ks.update(()=>{d&&EDe(e,d)})}),m}function LB(e,t,n={}){var m;const r=IT(e,t,n.type==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const c=r?()=>Promise.all(Oee(e,r,n)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(x=0)=>{const{delayChildren:T=0,staggerChildren:C,staggerDirection:A}=s;return zDe(e,t,T+x,C,A,n)}:()=>Promise.resolve(),{when:i}=s;if(i){const[x,T]=i==="beforeChildren"?[c,d]:[d,c];return x().then(()=>T())}else return Promise.all([c(),d(n.delay)])}function zDe(e,t,n=0,r=0,s=1,c){const d=[],i=(e.variantChildren.size-1)*r,m=s===1?(x=0)=>x*r:(x=0)=>i-x*r;return Array.from(e.variantChildren).sort(FDe).forEach((x,T)=>{x.notify("AnimationStart",t),d.push(LB(x,t,{...c,delay:n+m(T)}).then(()=>x.notify("AnimationComplete",t)))}),Promise.all(d)}function FDe(e,t){return e.sortNodePosition(t)}function BDe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(c=>LB(e,c,n));r=Promise.all(s)}else if(typeof t=="string")r=LB(e,t,n);else{const s=typeof t=="function"?IT(e,t,n.custom):t;r=Promise.all(Oee(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Lee(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const jDe=w5.length;function zee(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?zee(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<jDe;n++){const r=w5[n],s=e.props[r];(DT(s)||s===!1)&&(t[r]=s)}return t}const NDe=[...b5].reverse(),VDe=b5.length;function $De(e){return t=>Promise.all(t.map(({animation:n,options:r})=>BDe(e,n,r)))}function UDe(e){let t=$De(e),n=fq(),r=!0;const s=m=>(x,T)=>{var A;const C=IT(e,T,m==="exit"?(A=e.presenceContext)==null?void 0:A.custom:void 0);if(C){const{transition:I,transitionEnd:k,...B}=C;x={...x,...B,...k}}return x};function c(m){t=m(e)}function d(m){const{props:x}=e,T=zee(e.parent)||{},C=[],A=new Set;let I={},k=1/0;for(let j=0;j<VDe;j++){const V=NDe[j],H=n[V],G=x[V]!==void 0?x[V]:T[V],X=DT(G),Q=V===m?H.isActive:null;Q===!1&&(k=j);let ee=G===T[V]&&G!==x[V]&&X;if(ee&&r&&e.manuallyAnimateOnMount&&(ee=!1),H.protectedKeys={...I},!H.isActive&&Q===null||!G&&!H.prevProp||rP(G)||typeof G=="boolean")continue;const ce=qDe(H.prevProp,G);let fe=ce||V===m&&H.isActive&&!ee&&X||j>k&&X,ue=!1;const ae=Array.isArray(G)?G:[G];let xe=ae.reduce(s(V),{});Q===!1&&(xe={});const{prevResolvedValues:we={}}=H,Me={...we,...xe},Se=Pe=>{fe=!0,A.has(Pe)&&(ue=!0,A.delete(Pe)),H.needsAnimating[Pe]=!0;const We=e.getValue(Pe);We&&(We.liveStyle=!1)};for(const Pe in Me){const We=xe[Pe],Fe=we[Pe];if(I.hasOwnProperty(Pe))continue;let Ce=!1;kB(We)&&kB(Fe)?Ce=!Lee(We,Fe):Ce=We!==Fe,Ce?We!=null?Se(Pe):A.add(Pe):We!==void 0&&A.has(Pe)?Se(Pe):H.protectedKeys[Pe]=!0}H.prevProp=G,H.prevResolvedValues=xe,H.isActive&&(I={...I,...xe}),r&&e.blockInitialAnimation&&(fe=!1),fe&&(!(ee&&ce)||ue)&&C.push(...ae.map(Pe=>({animation:Pe,options:{type:V}})))}if(A.size){const j={};if(typeof x.initial!="boolean"){const V=IT(e,Array.isArray(x.initial)?x.initial[0]:x.initial);V&&V.transition&&(j.transition=V.transition)}A.forEach(V=>{const H=e.getBaseTarget(V),G=e.getValue(V);G&&(G.liveStyle=!0),j[V]=H??null}),C.push({animation:j})}let B=!!C.length;return r&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(B=!1),r=!1,B?t(C):Promise.resolve()}function i(m,x){var C;if(n[m].isActive===x)return Promise.resolve();(C=e.variantChildren)==null||C.forEach(A=>{var I;return(I=A.animationState)==null?void 0:I.setActive(m,x)}),n[m].isActive=x;const T=d(m);for(const A in n)n[A].protectedKeys={};return T}return{animateChanges:d,setActive:i,setAnimateFunction:c,getState:()=>n,reset:()=>{n=fq(),r=!0}}}function qDe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Lee(t,e):!1}function n0(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fq(){return{animate:n0(!0),whileInView:n0(),whileHover:n0(),whileTap:n0(),whileDrag:n0(),whileFocus:n0(),exit:n0()}}let Dv=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};class HDe extends Dv{constructor(t){super(t),t.animationState||(t.animationState=UDe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();rP(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let WDe=0;class GDe extends Dv{constructor(){super(...arguments),this.id=WDe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const YDe={animation:{Feature:HDe},exit:{Feature:GDe}};function kT(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function DE(e){return{point:{x:e.pageX,y:e.pageY}}}const XDe=e=>t=>x5(t)&&e(t,DE(t));function sT(e,t,n,r){return kT(e,t,XDe(n),r)}function Fee({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function ZDe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KDe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Bee=1e-4,QDe=1-Bee,JDe=1+Bee,jee=.01,ePe=0-jee,tPe=0+jee;function Qc(e){return e.max-e.min}function nPe(e,t,n){return Math.abs(e-t)<=n}function pq(e,t,n,r=.5){e.origin=r,e.originPoint=Xs(t.min,t.max,e.origin),e.scale=Qc(n)/Qc(t),e.translate=Xs(n.min,n.max,e.origin)-e.originPoint,(e.scale>=QDe&&e.scale<=JDe||isNaN(e.scale))&&(e.scale=1),(e.translate>=ePe&&e.translate<=tPe||isNaN(e.translate))&&(e.translate=0)}function aT(e,t,n,r){pq(e.x,t.x,n.x,r?r.originX:void 0),pq(e.y,t.y,n.y,r?r.originY:void 0)}function mq(e,t,n){e.min=n.min+t.min,e.max=e.min+Qc(t)}function rPe(e,t,n){mq(e.x,t.x,n.x),mq(e.y,t.y,n.y)}function gq(e,t,n){e.min=t.min-n.min,e.max=e.min+Qc(t)}function lT(e,t,n){gq(e.x,t.x,n.x),gq(e.y,t.y,n.y)}const yq=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ub=()=>({x:yq(),y:yq()}),vq=()=>({min:0,max:0}),wa=()=>({x:vq(),y:vq()});function gh(e){return[e("x"),e("y")]}function Yk(e){return e===void 0||e===1}function zB({scale:e,scaleX:t,scaleY:n}){return!Yk(e)||!Yk(t)||!Yk(n)}function d0(e){return zB(e)||Nee(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Nee(e){return _q(e.x)||_q(e.y)}function _q(e){return e&&e!=="0%"}function DR(e,t,n){const r=e-n,s=t*r;return n+s}function xq(e,t,n,r,s){return s!==void 0&&(e=DR(e,s,r)),DR(e,n,r)+t}function FB(e,t=0,n=1,r,s){e.min=xq(e.min,t,n,r,s),e.max=xq(e.max,t,n,r,s)}function Vee(e,{x:t,y:n}){FB(e.x,t.translate,t.scale,t.originPoint),FB(e.y,n.translate,n.scale,n.originPoint)}const bq=.999999999999,wq=1.0000000000001;function iPe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let c,d;for(let i=0;i<s;i++){c=n[i],d=c.projectionDelta;const{visualElement:m}=c.options;m&&m.props.style&&m.props.style.display==="contents"||(r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Hb(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,Vee(e,d)),r&&d0(c.latestValues)&&Hb(e,c.latestValues))}t.x<wq&&t.x>bq&&(t.x=1),t.y<wq&&t.y>bq&&(t.y=1)}function qb(e,t){e.min=e.min+t,e.max=e.max+t}function Sq(e,t,n,r,s=.5){const c=Xs(e.min,e.max,s);FB(e,t,n,c,r)}function Hb(e,t){Sq(e.x,t.x,t.scaleX,t.scale,t.originX),Sq(e.y,t.y,t.scaleY,t.scale,t.originY)}function $ee(e,t){return Fee(KDe(e.getBoundingClientRect(),t))}function oPe(e,t,n){const r=$ee(e,n),{scroll:s}=t;return s&&(qb(r.x,s.offset.x),qb(r.y,s.offset.y)),r}const Uee=({current:e})=>e?e.ownerDocument.defaultView:null,Tq=(e,t)=>Math.abs(e-t);function sPe(e,t){const n=Tq(e.x,t.x),r=Tq(e.y,t.y);return Math.sqrt(n**2+r**2)}class qee{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Zk(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,I=sPe(C.offset,{x:0,y:0})>=3;if(!A&&!I)return;const{point:k}=C,{timestamp:B}=$l;this.history.push({...k,timestamp:B});const{onStart:j,onMove:V}=this.handlers;A||(j&&j(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,C)},this.handlePointerMove=(C,A)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=Xk(A,this.transformPagePoint),Ks.update(this.updatePoint,!0)},this.handlePointerUp=(C,A)=>{this.end();const{onEnd:I,onSessionEnd:k,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Zk(C.type==="pointercancel"?this.lastMoveEventInfo:Xk(A,this.transformPagePoint),this.history);this.startEvent&&I&&I(C,j),k&&k(C,j)},!x5(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const d=DE(t),i=Xk(d,this.transformPagePoint),{point:m}=i,{timestamp:x}=$l;this.history=[{...m,timestamp:x}];const{onSessionStart:T}=n;T&&T(t,Zk(i,this.history)),this.removeListeners=ME(sT(this.contextWindow,"pointermove",this.handlePointerMove),sT(this.contextWindow,"pointerup",this.handlePointerUp),sT(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),mv(this.updatePoint)}}function Xk(e,t){return t?{point:t(e.point)}:e}function Eq(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zk({point:e},t){return{point:e,delta:Eq(e,Hee(t)),offset:Eq(e,aPe(t)),velocity:lPe(t,.1)}}function aPe(e){return e[0]}function Hee(e){return e[e.length-1]}function lPe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Hee(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>dm(t)));)n--;if(!r)return{x:0,y:0};const c=hm(s.timestamp-r.timestamp);if(c===0)return{x:0,y:0};const d={x:(s.x-r.x)/c,y:(s.y-r.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function cPe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Xs(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Xs(n,e,r.max):Math.min(e,n)),e}function Cq(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function uPe(e,{top:t,left:n,bottom:r,right:s}){return{x:Cq(e.x,n,s),y:Cq(e.y,t,r)}}function Mq(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function dPe(e,t){return{x:Mq(e.x,t.x),y:Mq(e.y,t.y)}}function hPe(e,t){let n=.5;const r=Qc(e),s=Qc(t);return s>r?n=CT(t.min,t.max-r,e.min):r>s&&(n=CT(e.min,e.max-s,t.min)),Zg(0,1,n)}function fPe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const BB=.35;function pPe(e=BB){return e===!1?e=0:e===!0&&(e=BB),{x:Aq(e,"left","right"),y:Aq(e,"top","bottom")}}function Aq(e,t,n){return{min:Rq(e,t),max:Rq(e,n)}}function Rq(e,t){return typeof e=="number"?e:e[t]||0}const mPe=new WeakMap;class gPe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wa(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=T=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(DE(T).point)},c=(T,C)=>{const{drag:A,dragPropagation:I,onDragStart:k}=this.getProps();if(A&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LRe(A),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gh(j=>{let V=this.getAxisMotionValue(j).get()||0;if(fm.test(V)){const{projection:H}=this.visualElement;if(H&&H.layout){const G=H.layout.layoutBox[j];G&&(V=Qc(G)*(parseFloat(V)/100))}}this.originPoint[j]=V}),k&&Ks.postRender(()=>k(T,C)),OB(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},d=(T,C)=>{const{dragPropagation:A,dragDirectionLock:I,onDirectionLock:k,onDrag:B}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:j}=C;if(I&&this.currentDirection===null){this.currentDirection=yPe(j),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",C.point,j),this.updateAxis("y",C.point,j),this.visualElement.render(),B&&B(T,C)},i=(T,C)=>this.stop(T,C),m=()=>gh(T=>{var C;return this.getAnimationState(T)==="paused"&&((C=this.getAxisMotionValue(T).animation)==null?void 0:C.play())}),{dragSnapToOrigin:x}=this.getProps();this.panSession=new qee(t,{onSessionStart:s,onStart:c,onMove:d,onSessionEnd:i,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,contextWindow:Uee(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:c}=this.getProps();c&&Ks.postRender(()=>c(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!OM(t,s,this.currentDirection))return;const c=this.getAxisMotionValue(t);let d=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(d=cPe(d,this.constraints[t],this.elastic[t])),c.set(d)}resolveConstraints(){var c;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,s=this.constraints;t&&$b(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=uPe(r.layoutBox,t):this.constraints=!1,this.elastic=pPe(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gh(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=fPe(r.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!$b(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const c=oPe(r,s.root,this.visualElement.getTransformPagePoint());let d=dPe(s.layout.layoutBox,c);if(n){const i=n(ZDe(d));this.hasMutatedConstraints=!!i,i&&(d=Fee(i))}return d}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:i}=this.getProps(),m=this.constraints||{},x=gh(T=>{if(!OM(T,n,this.currentDirection))return;let C=m&&m[T]||{};d&&(C={min:0,max:0});const A=s?200:1e6,I=s?40:1e7,k={type:"inertia",velocity:r?t[T]:0,bounceStiffness:A,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...c,...C};return this.startAxisValueAnimation(T,k)});return Promise.all(x).then(i)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return OB(this.visualElement,t),r.start(R5(t,r,0,n,this.visualElement,!1))}stopAnimation(){gh(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gh(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){gh(n=>{const{drag:r}=this.getProps();if(!OM(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,c=this.getAxisMotionValue(n);if(s&&s.layout){const{min:d,max:i}=s.layout.layoutBox[n];c.set(t[n]-Xs(d,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$b(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};gh(d=>{const i=this.getAxisMotionValue(d);if(i&&this.constraints!==!1){const m=i.get();s[d]=hPe({min:m,max:m},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gh(d=>{if(!OM(d,t,null))return;const i=this.getAxisMotionValue(d),{min:m,max:x}=this.constraints[d];i.set(Xs(m,x,s[d]))})}addListeners(){if(!this.visualElement.current)return;mPe.set(this.visualElement,this);const t=this.visualElement.current,n=sT(t,"pointerdown",m=>{const{drag:x,dragListener:T=!0}=this.getProps();x&&T&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();$b(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,c=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ks.read(r);const d=kT(window,"resize",()=>this.scalePositionWithinConstraints()),i=s.addEventListener("didUpdate",({delta:m,hasLayoutChanged:x})=>{this.isDragging&&x&&(gh(T=>{const C=this.getAxisMotionValue(T);C&&(this.originPoint[T]+=m[T].translate,C.set(C.get()+m[T].translate))}),this.visualElement.render())});return()=>{d(),n(),c(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:c=!1,dragElastic:d=BB,dragMomentum:i=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:c,dragElastic:d,dragMomentum:i}}}function OM(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function yPe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class vPe extends Dv{constructor(t){super(t),this.removeGroupControls=Ah,this.removeListeners=Ah,this.controls=new gPe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ah}unmount(){this.removeGroupControls(),this.removeListeners()}}const Dq=e=>(t,n)=>{e&&Ks.postRender(()=>e(t,n))};class _Pe extends Dv{constructor(){super(...arguments),this.removePointerDownListener=Ah}onPointerDown(t){this.session=new qee(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Uee(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Dq(t),onStart:Dq(n),onMove:r,onEnd:(c,d)=>{delete this.session,s&&Ks.postRender(()=>s(c,d))}}}mount(){this.removePointerDownListener=sT(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const DA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pq(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const yS={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Pi.test(e))e=parseFloat(e);else return e;const n=Pq(e,t.target.x),r=Pq(e,t.target.y);return`${n}% ${r}%`}},xPe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=gv.parse(e);if(s.length>5)return r;const c=gv.createTransformer(e),d=typeof s[0]!="number"?1:0,i=n.x.scale*t.x,m=n.y.scale*t.y;s[0+d]/=i,s[1+d]/=m;const x=Xs(i,m,.5);return typeof s[2+d]=="number"&&(s[2+d]/=x),typeof s[3+d]=="number"&&(s[3+d]/=x),c(s)}};class bPe extends U.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:c}=t;oDe(wPe),c&&(n.group&&n.group.add(c),r&&r.register&&s&&r.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),DA.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:c}=this.props,{projection:d}=r;return d&&(d.isPresent=c,s||t.layoutDependency!==n||n===void 0||t.isPresent!==c?d.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?d.promote():d.relegate()||Ks.postRender(()=>{const i=d.getStack();(!i||!i.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),_5.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Wee(e){const[t,n]=WMe(),r=U.useContext(DJ);return z.jsx(bPe,{...e,layoutGroup:r,switchLayoutGroup:U.useContext(Tee),isPresent:t,safeToRemove:n})}const wPe={borderRadius:{...yS,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yS,borderTopRightRadius:yS,borderBottomLeftRadius:yS,borderBottomRightRadius:yS,boxShadow:xPe};function SPe(e,t,n){const r=_c(e)?e:RT(e);return r.start(R5("",r,t,n)),r.animation}function TPe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const EPe=(e,t)=>e.depth-t.depth;class CPe{constructor(){this.children=[],this.isDirty=!1}add(t){t5(this.children,t),this.isDirty=!0}remove(t){n5(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(EPe),this.isDirty=!1,this.children.forEach(t)}}function MPe(e,t){const n=Su.now(),r=({timestamp:s})=>{const c=s-n;c>=t&&(mv(r),e(c-t))};return Ks.setup(r,!0),()=>mv(r)}const Gee=["TopLeft","TopRight","BottomLeft","BottomRight"],APe=Gee.length,Iq=e=>typeof e=="string"?parseFloat(e):e,kq=e=>typeof e=="number"||Pi.test(e);function RPe(e,t,n,r,s,c){s?(e.opacity=Xs(0,n.opacity??1,DPe(r)),e.opacityExit=Xs(t.opacity??1,0,PPe(r))):c&&(e.opacity=Xs(t.opacity??1,n.opacity??1,r));for(let d=0;d<APe;d++){const i=`border${Gee[d]}Radius`;let m=Oq(t,i),x=Oq(n,i);if(m===void 0&&x===void 0)continue;m||(m=0),x||(x=0),m===0||x===0||kq(m)===kq(x)?(e[i]=Math.max(Xs(Iq(m),Iq(x),r),0),(fm.test(x)||fm.test(m))&&(e[i]+="%")):e[i]=x}(t.rotate||n.rotate)&&(e.rotate=Xs(t.rotate||0,n.rotate||0,r))}function Oq(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const DPe=Yee(0,.5,VJ),PPe=Yee(.5,.95,Ah);function Yee(e,t,n){return r=>r<e?0:r>t?1:n(CT(e,t,r))}function Lq(e,t){e.min=t.min,e.max=t.max}function hh(e,t){Lq(e.x,t.x),Lq(e.y,t.y)}function zq(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Fq(e,t,n,r,s){return e-=t,e=DR(e,1/n,r),s!==void 0&&(e=DR(e,1/s,r)),e}function IPe(e,t=0,n=1,r=.5,s,c=e,d=e){if(fm.test(t)&&(t=parseFloat(t),t=Xs(d.min,d.max,t/100)-d.min),typeof t!="number")return;let i=Xs(c.min,c.max,r);e===c&&(i-=t),e.min=Fq(e.min,t,n,i,s),e.max=Fq(e.max,t,n,i,s)}function Bq(e,t,[n,r,s],c,d){IPe(e,t[n],t[r],t[s],t.scale,c,d)}const kPe=["x","scaleX","originX"],OPe=["y","scaleY","originY"];function jq(e,t,n,r){Bq(e.x,t,kPe,n?n.x:void 0,r?r.x:void 0),Bq(e.y,t,OPe,n?n.y:void 0,r?r.y:void 0)}function Nq(e){return e.translate===0&&e.scale===1}function Xee(e){return Nq(e.x)&&Nq(e.y)}function Vq(e,t){return e.min===t.min&&e.max===t.max}function LPe(e,t){return Vq(e.x,t.x)&&Vq(e.y,t.y)}function $q(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Zee(e,t){return $q(e.x,t.x)&&$q(e.y,t.y)}function Uq(e){return Qc(e.x)/Qc(e.y)}function qq(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class zPe{constructor(){this.members=[]}add(t){t5(this.members,t),t.scheduleRender()}remove(t){if(n5(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const c=this.members[s];if(c.isPresent!==!1){r=c;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FPe(e,t,n){let r="";const s=e.x.translate/t.x,c=e.y.translate/t.y,d=(n==null?void 0:n.z)||0;if((s||c||d)&&(r=`translate3d(${s}px, ${c}px, ${d}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:x,rotate:T,rotateX:C,rotateY:A,skewX:I,skewY:k}=n;x&&(r=`perspective(${x}px) ${r}`),T&&(r+=`rotate(${T}deg) `),C&&(r+=`rotateX(${C}deg) `),A&&(r+=`rotateY(${A}deg) `),I&&(r+=`skewX(${I}deg) `),k&&(r+=`skewY(${k}deg) `)}const i=e.x.scale*t.x,m=e.y.scale*t.y;return(i!==1||m!==1)&&(r+=`scale(${i}, ${m})`),r||"none"}const Kk=["","X","Y","Z"],BPe={visibility:"hidden"},Hq=1e3;let jPe=0;function Qk(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Kee(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=kee(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:c}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ks,!(s||c))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Kee(r)}function Qee({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(d={},i=t==null?void 0:t()){this.id=jPe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($Pe),this.nodes.forEach(GPe),this.nodes.forEach(YPe),this.nodes.forEach(UPe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new CPe)}addEventListener(d,i){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new o5),this.eventHandlers.get(d).add(i)}notifyListeners(d,...i){const m=this.eventHandlers.get(d);m&&m.notify(...i)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=TPe(d),this.instance=d;const{layoutId:i,layout:m,visualElement:x}=this.options;if(x&&!x.current&&x.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||i)&&(this.isLayoutDirty=!0),e){let T;const C=()=>this.root.updateBlockedByResize=!1;e(d,()=>{this.root.updateBlockedByResize=!0,T&&T(),T=MPe(C,250),DA.hasAnimatedSinceResize&&(DA.hasAnimatedSinceResize=!1,this.nodes.forEach(Gq))})}i&&this.root.registerSharedNode(i,this),this.options.animate!==!1&&x&&(i||m)&&this.addEventListener("didUpdate",({delta:T,hasLayoutChanged:C,hasRelativeLayoutChanged:A,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||x.getDefaultTransition()||JPe,{onLayoutAnimationStart:B,onLayoutAnimationComplete:j}=x.getProps(),V=!this.targetLayout||!Zee(this.targetLayout,I),H=!C&&A;if(this.options.layoutRoot||this.resumeFrom||H||C&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(T,H);const G={...y5(k,"layout"),onPlay:B,onComplete:j};(x.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else C||Gq(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mv(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XPe),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Kee(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let T=0;T<this.path.length;T++){const C=this.path[T];C.shouldResetTransform=!0,C.updateScroll("snapshot"),C.options.layoutRoot&&C.willUpdate(!1)}const{layoutId:i,layout:m}=this.options;if(i===void 0&&!m)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wq);return}this.isUpdating||this.nodes.forEach(HPe),this.isUpdating=!1,this.nodes.forEach(WPe),this.nodes.forEach(NPe),this.nodes.forEach(VPe),this.clearAllSnapshots();const i=Su.now();$l.delta=Zg(0,1e3/60,i-$l.timestamp),$l.timestamp=i,$l.isProcessing=!0,Uk.update.process($l),Uk.preRender.process($l),Uk.render.process($l),$l.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qPe),this.sharedNodes.forEach(ZPe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ks.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ks.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qc(this.snapshot.measuredBox.x)&&!Qc(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:i}=this.options;i&&i.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let i=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(i=!1),i&&this.instance){const m=r(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:m,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!s)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,i=this.projectionDelta&&!Xee(this.projectionDelta),m=this.getTransformTemplate(),x=m?m(this.latestValues,""):void 0,T=x!==this.prevTransformTemplateValue;d&&this.instance&&(i||d0(this.latestValues)||T)&&(s(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const i=this.measurePageBox();let m=this.removeElementScroll(i);return d&&(m=this.removeTransform(m)),eIe(m),{animationId:this.root.animationId,measuredBox:i,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:d}=this.options;if(!d)return wa();const i=d.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(tIe))){const{scroll:T}=this.root;T&&(qb(i.x,T.offset.x),qb(i.y,T.offset.y))}return i}removeElementScroll(d){var m;const i=wa();if(hh(i,d),(m=this.scroll)!=null&&m.wasRoot)return i;for(let x=0;x<this.path.length;x++){const T=this.path[x],{scroll:C,options:A}=T;T!==this.root&&C&&A.layoutScroll&&(C.wasRoot&&hh(i,d),qb(i.x,C.offset.x),qb(i.y,C.offset.y))}return i}applyTransform(d,i=!1){const m=wa();hh(m,d);for(let x=0;x<this.path.length;x++){const T=this.path[x];!i&&T.options.layoutScroll&&T.scroll&&T!==T.root&&Hb(m,{x:-T.scroll.offset.x,y:-T.scroll.offset.y}),d0(T.latestValues)&&Hb(m,T.latestValues)}return d0(this.latestValues)&&Hb(m,this.latestValues),m}removeTransform(d){const i=wa();hh(i,d);for(let m=0;m<this.path.length;m++){const x=this.path[m];if(!x.instance||!d0(x.latestValues))continue;zB(x.latestValues)&&x.updateSnapshot();const T=wa(),C=x.measurePageBox();hh(T,C),jq(i,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,T)}return d0(this.latestValues)&&jq(i,this.latestValues),i}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$l.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var A;const i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==i;if(!(d||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:T,layoutId:C}=this.options;if(!(!this.layout||!(T||C))){if(this.resolvedRelativeTargetAt=$l.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wa(),this.relativeTargetOrigin=wa(),lT(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),hh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wa(),this.targetWithTransforms=wa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rPe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hh(this.target,this.layout.layoutBox),Vee(this.target,this.targetDelta)):hh(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wa(),this.relativeTargetOrigin=wa(),lT(this.relativeTargetOrigin,this.target,I.target),hh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zB(this.parent.latestValues)||Nee(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const d=this.getLead(),i=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(m=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===$l.timestamp&&(m=!1),m)return;const{layout:x,layoutId:T}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||T))return;hh(this.layoutCorrected,this.layout.layoutBox);const C=this.treeScale.x,A=this.treeScale.y;iPe(this.layoutCorrected,this.treeScale,this.path,i),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=wa());const{target:I}=d;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zq(this.prevProjectionDelta.x,this.projectionDelta.x),zq(this.prevProjectionDelta.y,this.projectionDelta.y)),aT(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==C||this.treeScale.y!==A||!qq(this.projectionDelta.x,this.prevProjectionDelta.x)||!qq(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var i;if((i=this.options.visualElement)==null||i.scheduleRender(),d){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ub(),this.projectionDelta=Ub(),this.projectionDeltaWithTransform=Ub()}setAnimationOrigin(d,i=!1){const m=this.snapshot,x=m?m.latestValues:{},T={...this.latestValues},C=Ub();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!i;const A=wa(),I=m?m.source:void 0,k=this.layout?this.layout.source:void 0,B=I!==k,j=this.getStack(),V=!j||j.members.length<=1,H=!!(B&&!V&&this.options.crossfade===!0&&!this.path.some(QPe));this.animationProgress=0;let G;this.mixTargetDelta=X=>{const Q=X/1e3;Yq(C.x,d.x,Q),Yq(C.y,d.y,Q),this.setTargetDelta(C),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lT(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KPe(this.relativeTarget,this.relativeTargetOrigin,A,Q),G&&LPe(this.relativeTarget,G)&&(this.isProjectionDirty=!1),G||(G=wa()),hh(G,this.relativeTarget)),B&&(this.animationValues=T,RPe(T,x,this.latestValues,Q,H,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mv(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ks.update(()=>{DA.hasAnimatedSinceResize=!0,this.currentAnimation=SPe(0,Hq,{...d,onUpdate:i=>{this.mixTargetDelta(i),d.onUpdate&&d.onUpdate(i)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:i,target:m,layout:x,latestValues:T}=d;if(!(!i||!m||!x)){if(this!==d&&this.layout&&x&&Jee(this.options.animationType,this.layout.layoutBox,x.layoutBox)){m=this.target||wa();const C=Qc(this.layout.layoutBox.x);m.x.min=d.target.x.min,m.x.max=m.x.min+C;const A=Qc(this.layout.layoutBox.y);m.y.min=d.target.y.min,m.y.max=m.y.min+A}hh(i,m),Hb(i,T),aT(this.projectionDeltaWithTransform,this.layoutCorrected,i,T)}}registerSharedNode(d,i){this.sharedNodes.has(d)||this.sharedNodes.set(d,new zPe),this.sharedNodes.get(d).add(i);const x=i.options.initialPromotionConfig;i.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(i):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var i;const{layoutId:d}=this.options;return d?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:d}=this.options;return d?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:i,preserveFollowOpacity:m}={}){const x=this.getStack();x&&x.promote(this,m),d&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let i=!1;const{latestValues:m}=d;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(i=!0),!i)return;const x={};m.z&&Qk("z",d,x,this.animationValues);for(let T=0;T<Kk.length;T++)Qk(`rotate${Kk[T]}`,d,x,this.animationValues),Qk(`skew${Kk[T]}`,d,x,this.animationValues);d.render();for(const T in x)d.setStaticValue(T,x[T]),this.animationValues&&(this.animationValues[T]=x[T]);d.scheduleRender()}getProjectionStyles(d){if(!this.instance||this.isSVG)return;if(!this.isVisible)return BPe;const i={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=RA(d==null?void 0:d.pointerEvents)||"",i.transform=m?m(this.latestValues,""):"none",i;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=RA(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!d0(this.latestValues)&&(I.transform=m?m({},""):"none",this.hasProjected=!1),I}const T=x.animationValues||x.latestValues;this.applyTransformsToTarget(),i.transform=FPe(this.projectionDeltaWithTransform,this.treeScale,T),m&&(i.transform=m(T,i.transform));const{x:C,y:A}=this.projectionDelta;i.transformOrigin=`${C.origin*100}% ${A.origin*100}% 0`,x.animationValues?i.opacity=x===this?T.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:i.opacity=x===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const I in PT){if(T[I]===void 0)continue;const{correct:k,applyTo:B,isCSSVariable:j}=PT[I],V=i.transform==="none"?T[I]:k(T[I],x);if(B){const H=B.length;for(let G=0;G<H;G++)i[B[G]]=V}else j?this.options.visualElement.renderState.vars[I]=V:i[I]=V}return this.options.layoutId&&(i.pointerEvents=x===this?RA(d==null?void 0:d.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var i;return(i=d.currentAnimation)==null?void 0:i.stop()}),this.root.nodes.forEach(Wq),this.root.sharedNodes.clear()}}}function NPe(e){e.updateLayout()}function VPe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:c}=e.options,d=t.source!==e.layout.source;c==="size"?gh(C=>{const A=d?t.measuredBox[C]:t.layoutBox[C],I=Qc(A);A.min=r[C].min,A.max=A.min+I}):Jee(c,t.layoutBox,r)&&gh(C=>{const A=d?t.measuredBox[C]:t.layoutBox[C],I=Qc(r[C]);A.max=A.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[C].max=e.relativeTarget[C].min+I)});const i=Ub();aT(i,r,t.layoutBox);const m=Ub();d?aT(m,e.applyTransform(s,!0),t.measuredBox):aT(m,r,t.layoutBox);const x=!Xee(i);let T=!1;if(!e.resumeFrom){const C=e.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:A,layout:I}=C;if(A&&I){const k=wa();lT(k,t.layoutBox,A.layoutBox);const B=wa();lT(B,r,I.layoutBox),Zee(k,B)||(T=!0),C.options.layoutRoot&&(e.relativeTarget=B,e.relativeTargetOrigin=k,e.relativeParent=C)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:m,layoutDelta:i,hasLayoutChanged:x,hasRelativeLayoutChanged:T})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function $Pe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function UPe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qPe(e){e.clearSnapshot()}function Wq(e){e.clearMeasurements()}function HPe(e){e.isLayoutDirty=!1}function WPe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Gq(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function GPe(e){e.resolveTargetDelta()}function YPe(e){e.calcProjection()}function XPe(e){e.resetSkewAndRotation()}function ZPe(e){e.removeLeadSnapshot()}function Yq(e,t,n){e.translate=Xs(t.translate,0,n),e.scale=Xs(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Xq(e,t,n,r){e.min=Xs(t.min,n.min,r),e.max=Xs(t.max,n.max,r)}function KPe(e,t,n,r){Xq(e.x,t.x,n.x,r),Xq(e.y,t.y,n.y,r)}function QPe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const JPe={duration:.45,ease:[.4,0,.1,1]},Zq=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Kq=Zq("applewebkit/")&&!Zq("chrome/")?Math.round:Ah;function Qq(e){e.min=Kq(e.min),e.max=Kq(e.max)}function eIe(e){Qq(e.x),Qq(e.y)}function Jee(e,t,n){return e==="position"||e==="preserve-aspect"&&!nPe(Uq(t),Uq(n),.2)}function tIe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const nIe=Qee({attachResizeListener:(e,t)=>kT(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jk={current:void 0},ete=Qee({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Jk.current){const e=new nIe({});e.mount(window),e.setOptions({layoutScroll:!0}),Jk.current=e}return Jk.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),rIe={pan:{Feature:_Pe},drag:{Feature:vPe,ProjectionNode:ete,MeasureLayout:Wee}};function Jq(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,c=r[s];c&&Ks.postRender(()=>c(t,DE(t)))}class iIe extends Dv{mount(){const{current:t}=this.node;t&&(this.unmount=zRe(t,(n,r)=>(Jq(this.node,r,"Start"),s=>Jq(this.node,s,"End"))))}unmount(){}}class oIe extends Dv{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ME(kT(this.node.current,"focus",()=>this.onFocus()),kT(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eH(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),c=r[s];c&&Ks.postRender(()=>c(t,DE(t)))}class sIe extends Dv{mount(){const{current:t}=this.node;t&&(this.unmount=NRe(t,(n,r)=>(eH(this.node,r,"Start"),(s,{success:c})=>eH(this.node,s,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const jB=new WeakMap,eO=new WeakMap,aIe=e=>{const t=jB.get(e.target);t&&t(e)},lIe=e=>{e.forEach(aIe)};function cIe({root:e,...t}){const n=e||document;eO.has(n)||eO.set(n,{});const r=eO.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(lIe,{root:e,...t})),r[s]}function uIe(e,t,n){const r=cIe(t);return jB.set(e,n),r.observe(e),()=>{jB.delete(e),r.unobserve(e)}}const dIe={some:0,all:1};class hIe extends Dv{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:c}=t,d={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:dIe[s]},i=m=>{const{isIntersecting:x}=m;if(this.isInView===x||(this.isInView=x,c&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:T,onViewportLeave:C}=this.node.getProps(),A=x?T:C;A&&A(m)};return uIe(this.node.current,d,i)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(fIe(t,n))&&this.startObserver()}unmount(){}}function fIe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const pIe={inView:{Feature:hIe},tap:{Feature:sIe},focus:{Feature:oIe},hover:{Feature:iIe}},mIe={layout:{ProjectionNode:ete,MeasureLayout:Wee}},NB={current:null},tte={current:!1};function gIe(){if(tte.current=!0,!!JN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>NB.current=e.matches;e.addListener(t),t()}else NB.current=!1}const yIe=new WeakMap;function vIe(e,t,n){for(const r in t){const s=t[r],c=n[r];if(_c(s))e.addValue(r,s);else if(_c(c))e.addValue(r,RT(s,{owner:e}));else if(c!==s)if(e.hasValue(r)){const d=e.getValue(r);d.liveStyle===!0?d.jump(s):d.hasAnimated||d.set(s)}else{const d=e.getStaticValue(r);e.addValue(r,RT(d!==void 0?d:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const tH=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _Ie{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:c,visualState:d},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=g5,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Su.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,Ks.render(this.render,!1,!0))};const{latestValues:m,renderState:x}=d;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=x,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=i,this.blockInitialAnimation=!!c,this.isControllingVariants=iP(n),this.isVariantNode=wee(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:T,...C}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in C){const I=C[A];m[A]!==void 0&&_c(I)&&I.set(m[A],!1)}}mount(t){this.current=t,yIe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),tte.current||gIe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:NB.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),mv(this.notifyUpdate),mv(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=z1.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Ks.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),c=n.on("renderRequest",this.scheduleRender);let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),c(),d&&d(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in p1){const n=p1[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wa()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tH.length;r++){const s=tH[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const c="on"+s,d=t[c];d&&(this.propEventSubscriptions[s]=this.on(s,d))}this.prevMotionValues=vIe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=RT(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(IJ(r)||kJ(r))?r=parseFloat(r):!$Re(r)&&gv.test(n)&&(r=mee(t,n)),this.setBaseTarget(t,_c(r)?r.get():r)),_c(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var c;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const d=M5(this.props,n,(c=this.presenceContext)==null?void 0:c.custom);d&&(r=d[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!_c(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new o5),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class nte extends _Ie{constructor(){super(...arguments),this.KeyframeResolver=PRe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;_c(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function rte(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const c in n)e.style.setProperty(c,n[c])}function xIe(e){return window.getComputedStyle(e)}class bIe extends nte{constructor(){super(...arguments),this.type="html",this.renderInstance=rte}readValueFromInstance(t,n){if(z1.has(n))return ZAe(t,n);{const r=xIe(t),s=(l5(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $ee(t,n)}build(t,n,r){T5(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return A5(t,n,r)}}const ite=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wIe(e,t,n,r){rte(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(ite.has(s)?s:S5(s),t.attrs[s])}class SIe extends nte{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wa}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(z1.has(n)){const r=pee(n);return r&&r.default||0}return n=ite.has(n)?n:S5(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Iee(t,n,r)}build(t,n,r){Aee(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){wIe(t,n,r,s)}mount(t){this.isSVGTag=Dee(t.tagName),super.mount(t)}}const TIe=(e,t)=>C5(e)?new SIe(t):new bIe(t,{allowProjection:e!==U.Fragment}),EIe=wDe({...YDe,...pIe,...rIe,...mIe},TIe),LM=GRe(EIe);function nH(...e){const t=U.useRef(0),[n,r]=U.useState(e[t.current]),s=U.useCallback(c=>{t.current=typeof c!="number"?YMe(0,e.length,t.current+1):c,r(e[t.current])},[e.length,...e]);return[n,s]}function CIe({children:e,type:t="scale",direction:n="right",offset:r=10,scale:s={hover:1,tap:.9},ref:c}){let d,i;switch(n){case"up":case"left":d=r,i=0;break;case"right":case"down":default:d=0,i=r;break}const[m,x]=nH(d,i),[T,C]=nH(d,i);switch(t){case"rotate":return z.jsx(LM.div,{ref:c,animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:e});case"slide":return n==="up"||n==="down"?z.jsx(LM.div,{ref:c,animate:{y:T!==void 0?T:""},onHoverEnd:()=>C(),onHoverStart:()=>C(),children:e}):z.jsx(LM.div,{ref:c,animate:{x:m!==void 0?m:""},onHoverEnd:()=>x(),onHoverStart:()=>x(),children:e});case"scale":default:return typeof s=="number"&&(s={hover:s,tap:s}),z.jsx(LM.div,{ref:c,whileHover:{scale:s==null?void 0:s.hover},whileTap:{scale:s==null?void 0:s.tap},children:e})}}CIe.propTypes={children:rt.node,type:rt.oneOf(["slide","scale","rotate"]),direction:rt.oneOf(["up","down","left","right"]),offset:rt.number,scale:rt.object};function D5(){return z.jsxs("p",{style:{color:"black",fontFamily:"BlackGold",fontSize:"24px",textDecoration:"none"},children:["INFRA",z.jsx("span",{style:{color:" #2563EB"},children:"X"})]})}var tO={exports:{}},nO={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rH;function MIe(){if(rH)return nO;rH=1;var e=Fh();function t(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=e.useRef,c=e.useEffect,d=e.useMemo,i=e.useDebugValue;return nO.useSyncExternalStoreWithSelector=function(m,x,T,C,A){var I=s(null);if(I.current===null){var k={hasValue:!1,value:null};I.current=k}else k=I.current;I=d(function(){function j(Q){if(!V){if(V=!0,H=Q,Q=C(Q),A!==void 0&&k.hasValue){var ee=k.value;if(A(ee,Q))return G=ee}return G=Q}if(ee=G,n(H,Q))return ee;var ce=C(Q);return A!==void 0&&A(ee,ce)?(H=Q,ee):(H=Q,G=ce)}var V=!1,H,G,X=T===void 0?null:T;return[function(){return j(x())},X===null?void 0:function(){return j(X())}]},[x,T,C,A]);var B=r(m,I[0],I[1]);return c(function(){k.hasValue=!0,k.value=B},[B]),i(B),B},nO}var iH;function AIe(){return iH||(iH=1,tO.exports=MIe()),tO.exports}var RIe=AIe();function DIe(e){e()}function PIe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){DIe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var oH={notify(){},get:()=>[]};function IIe(e,t){let n,r=oH,s=0,c=!1;function d(B){T();const j=r.subscribe(B);let V=!1;return()=>{V||(V=!0,j(),C())}}function i(){r.notify()}function m(){k.onStateChange&&k.onStateChange()}function x(){return c}function T(){s++,n||(n=e.subscribe(m),r=PIe())}function C(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=oH)}function A(){c||(c=!0,T())}function I(){c&&(c=!1,C())}const k={addNestedSub:d,notifyNestedSubs:i,handleChangeWrapper:m,isSubscribed:x,trySubscribe:A,tryUnsubscribe:I,getListeners:()=>r};return k}var kIe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OIe=kIe(),LIe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zIe=LIe(),FIe=()=>OIe||zIe?U.useLayoutEffect:U.useEffect,BIe=FIe(),rO=Symbol.for("react-redux-context"),iO=typeof globalThis<"u"?globalThis:{};function jIe(){if(!U.createContext)return{};const e=iO[rO]??(iO[rO]=new Map);let t=e.get(U.createContext);return t||(t=U.createContext(null),e.set(U.createContext,t)),t}var yv=jIe();function NIe(e){const{children:t,context:n,serverState:r,store:s}=e,c=U.useMemo(()=>{const m=IIe(s);return{store:s,subscription:m,getServerState:r?()=>r:void 0}},[s,r]),d=U.useMemo(()=>s.getState(),[s]);BIe(()=>{const{subscription:m}=c;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),d!==s.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[c,d]);const i=n||yv;return U.createElement(i.Provider,{value:c},t)}var VIe=NIe;function P5(e=yv){return function(){return U.useContext(e)}}var ote=P5();function ste(e=yv){const t=e===yv?ote:P5(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var $Ie=ste();function UIe(e=yv){const t=e===yv?$Ie:ste(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ate=UIe(),qIe=(e,t)=>e===t;function HIe(e=yv){const t=e===yv?ote:P5(e),n=(r,s={})=>{const{equalityFn:c=qIe}=typeof s=="function"?{equalityFn:s}:s,d=t(),{store:i,subscription:m,getServerState:x}=d;U.useRef(!0);const T=U.useCallback({[r.name](A){return r(A)}}[r.name],[r]),C=RIe.useSyncExternalStoreWithSelector(m.addNestedSub,i.getState,x||i.getState,T,c);return U.useDebugValue(C),C};return Object.assign(n,{withTypes:()=>n}),n}var Pu=HIe();function Vl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var WIe=typeof Symbol=="function"&&Symbol.observable||"@@observable",sH=WIe,oO=()=>Math.random().toString(36).substring(7).split("").join("."),GIe={INIT:`@@redux/INIT${oO()}`,REPLACE:`@@redux/REPLACE${oO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${oO()}`},PR=GIe;function I5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function k5(e,t,n){if(typeof e!="function")throw new Error(Vl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Vl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Vl(1));return n(k5)(e,t)}let r=e,s=t,c=new Map,d=c,i=0,m=!1;function x(){d===c&&(d=new Map,c.forEach((j,V)=>{d.set(V,j)}))}function T(){if(m)throw new Error(Vl(3));return s}function C(j){if(typeof j!="function")throw new Error(Vl(4));if(m)throw new Error(Vl(5));let V=!0;x();const H=i++;return d.set(H,j),function(){if(V){if(m)throw new Error(Vl(6));V=!1,x(),d.delete(H),c=null}}}function A(j){if(!I5(j))throw new Error(Vl(7));if(typeof j.type>"u")throw new Error(Vl(8));if(typeof j.type!="string")throw new Error(Vl(17));if(m)throw new Error(Vl(9));try{m=!0,s=r(s,j)}finally{m=!1}return(c=d).forEach(H=>{H()}),j}function I(j){if(typeof j!="function")throw new Error(Vl(10));r=j,A({type:PR.REPLACE})}function k(){const j=C;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(Vl(11));function H(){const X=V;X.next&&X.next(T())}return H(),{unsubscribe:j(H)}},[sH](){return this}}}return A({type:PR.INIT}),{dispatch:A,subscribe:C,getState:T,replaceReducer:I,[sH]:k}}function YIe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:PR.INIT})>"u")throw new Error(Vl(12));if(typeof n(void 0,{type:PR.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vl(13))})}function lte(e){const t=Object.keys(e),n={};for(let c=0;c<t.length;c++){const d=t[c];typeof e[d]=="function"&&(n[d]=e[d])}const r=Object.keys(n);let s;try{YIe(n)}catch(c){s=c}return function(d={},i){if(s)throw s;let m=!1;const x={};for(let T=0;T<r.length;T++){const C=r[T],A=n[C],I=d[C],k=A(I,i);if(typeof k>"u")throw i&&i.type,new Error(Vl(14));x[C]=k,m=m||k!==I}return m=m||r.length!==Object.keys(d).length,m?x:d}}function IR(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function XIe(...e){return t=>(n,r)=>{const s=t(n,r);let c=()=>{throw new Error(Vl(15))};const d={getState:s.getState,dispatch:(m,...x)=>c(m,...x)},i=e.map(m=>m(d));return c=IR(...i)(s.dispatch),{...s,dispatch:c}}}function ZIe(e){return I5(e)&&"type"in e&&typeof e.type=="string"}var cte=Symbol.for("immer-nothing"),aH=Symbol.for("immer-draftable"),Sd=Symbol.for("immer-state");function Uf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var m1=Object.getPrototypeOf;function N0(e){return!!e&&!!e[Sd]}function Qg(e){var t;return e?ute(e)||Array.isArray(e)||!!e[aH]||!!((t=e.constructor)!=null&&t[aH])||sP(e)||aP(e):!1}var KIe=Object.prototype.constructor.toString();function ute(e){if(!e||typeof e!="object")return!1;const t=m1(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===KIe}function kR(e,t){oP(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function oP(e){const t=e[Sd];return t?t.type_:Array.isArray(e)?1:sP(e)?2:aP(e)?3:0}function VB(e,t){return oP(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dte(e,t,n){const r=oP(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function QIe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function sP(e){return e instanceof Map}function aP(e){return e instanceof Set}function h0(e){return e.copy_||e.base_}function $B(e,t){if(sP(e))return new Map(e);if(aP(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ute(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Sd];let s=Reflect.ownKeys(r);for(let c=0;c<s.length;c++){const d=s[c],i=r[d];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[d]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[d]})}return Object.create(m1(e),r)}else{const r=m1(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function O5(e,t=!1){return lP(e)||N0(e)||!Qg(e)||(oP(e)>1&&(e.set=e.add=e.clear=e.delete=JIe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>O5(r,!0))),e}function JIe(){Uf(2)}function lP(e){return Object.isFrozen(e)}var eke={};function V0(e){const t=eke[e];return t||Uf(0,e),t}var OT;function hte(){return OT}function tke(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lH(e,t){t&&(V0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function UB(e){qB(e),e.drafts_.forEach(nke),e.drafts_=null}function qB(e){e===OT&&(OT=e.parent_)}function cH(e){return OT=tke(OT,e)}function nke(e){const t=e[Sd];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uH(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Sd].modified_&&(UB(t),Uf(4)),Qg(e)&&(e=OR(t,e),t.parent_||LR(t,e)),t.patches_&&V0("Patches").generateReplacementPatches_(n[Sd].base_,e,t.patches_,t.inversePatches_)):e=OR(t,n,[]),UB(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cte?e:void 0}function OR(e,t,n){if(lP(t))return t;const r=t[Sd];if(!r)return kR(t,(s,c)=>dH(e,r,t,s,c,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return LR(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let c=s,d=!1;r.type_===3&&(c=new Set(s),s.clear(),d=!0),kR(c,(i,m)=>dH(e,r,s,i,m,n,d)),LR(e,s,!1),n&&e.patches_&&V0("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function dH(e,t,n,r,s,c,d){if(N0(s)){const i=c&&t&&t.type_!==3&&!VB(t.assigned_,r)?c.concat(r):void 0,m=OR(e,s,i);if(dte(n,r,m),N0(m))e.canAutoFreeze_=!1;else return}else d&&n.add(s);if(Qg(s)&&!lP(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;OR(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&LR(e,s)}}function LR(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&O5(t,n)}function rke(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:hte(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,c=L5;n&&(s=[r],c=LT);const{revoke:d,proxy:i}=Proxy.revocable(s,c);return r.draft_=i,r.revoke_=d,i}var L5={get(e,t){if(t===Sd)return e;const n=h0(e);if(!VB(n,t))return ike(e,n,t);const r=n[t];return e.finalized_||!Qg(r)?r:r===sO(e.base_,t)?(aO(e),e.copy_[t]=WB(r,e)):r},has(e,t){return t in h0(e)},ownKeys(e){return Reflect.ownKeys(h0(e))},set(e,t,n){const r=fte(h0(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=sO(h0(e),t),c=s==null?void 0:s[Sd];if(c&&c.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(QIe(n,s)&&(n!==void 0||VB(e.base_,t)))return!0;aO(e),HB(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return sO(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,aO(e),HB(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=h0(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Uf(11)},getPrototypeOf(e){return m1(e.base_)},setPrototypeOf(){Uf(12)}},LT={};kR(L5,(e,t)=>{LT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});LT.deleteProperty=function(e,t){return LT.set.call(this,e,t,void 0)};LT.set=function(e,t,n){return L5.set.call(this,e[0],t,n,e[0])};function sO(e,t){const n=e[Sd];return(n?h0(n):e)[t]}function ike(e,t,n){var s;const r=fte(t,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function fte(e,t){if(!(t in e))return;let n=m1(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=m1(n)}}function HB(e){e.modified_||(e.modified_=!0,e.parent_&&HB(e.parent_))}function aO(e){e.copy_||(e.copy_=$B(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oke=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const c=n;n=t;const d=this;return function(m=c,...x){return d.produce(m,T=>n.call(this,T,...x))}}typeof n!="function"&&Uf(6),r!==void 0&&typeof r!="function"&&Uf(7);let s;if(Qg(t)){const c=cH(this),d=WB(t,void 0);let i=!0;try{s=n(d),i=!1}finally{i?UB(c):qB(c)}return lH(c,r),uH(s,c)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===cte&&(s=void 0),this.autoFreeze_&&O5(s,!0),r){const c=[],d=[];V0("Patches").generateReplacementPatches_(t,s,c,d),r(c,d)}return s}else Uf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(d,...i)=>this.produceWithPatches(d,m=>t(m,...i));let r,s;return[this.produce(t,n,(d,i)=>{r=d,s=i}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qg(e)||Uf(8),N0(e)&&(e=ske(e));const t=cH(this),n=WB(e,void 0);return n[Sd].isManual_=!0,qB(t),n}finishDraft(e,t){const n=e&&e[Sd];(!n||!n.isManual_)&&Uf(9);const{scope_:r}=n;return lH(r,t),uH(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=V0("Patches").applyPatches_;return N0(e)?r(e,t):this.produce(e,s=>r(s,t))}};function WB(e,t){const n=sP(e)?V0("MapSet").proxyMap_(e,t):aP(e)?V0("MapSet").proxySet_(e,t):rke(e,t);return(t?t.scope_:hte()).drafts_.push(n),n}function ske(e){return N0(e)||Uf(10,e),pte(e)}function pte(e){if(!Qg(e)||lP(e))return e;const t=e[Sd];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$B(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$B(e,!0);return kR(n,(r,s)=>{dte(n,r,pte(s))}),t&&(t.finalized_=!1),n}var Td=new oke,mte=Td.produce;Td.produceWithPatches.bind(Td);Td.setAutoFreeze.bind(Td);Td.setUseStrictShallowCopy.bind(Td);Td.applyPatches.bind(Td);Td.createDraft.bind(Td);Td.finishDraft.bind(Td);function gte(e){return({dispatch:n,getState:r})=>s=>c=>typeof c=="function"?c(n,r,e):s(c)}var ake=gte(),lke=gte,cke=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IR:IR.apply(null,arguments)};function hH(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(qg(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>ZIe(r)&&r.type===e,n}var yte=class NS extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,NS.prototype)}static get[Symbol.species](){return NS}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new NS(...t[0].concat(this)):new NS(...t.concat(this))}};function fH(e){return Qg(e)?mte(e,()=>{}):e}function zM(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function uke(e){return typeof e=="boolean"}var dke=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:c=!0}=t??{};let d=new yte;return n&&(uke(n)?d.push(ake):d.push(lke(n.extraArgument))),d},hke="RTK_autoBatch",pH=e=>t=>{setTimeout(t,e)},fke=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,c=!1,d=!1;const i=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pH(10):e.type==="callback"?e.queueNotification:pH(e.timeout),x=()=>{d=!1,c&&(c=!1,i.forEach(T=>T()))};return Object.assign({},r,{subscribe(T){const C=()=>s&&T(),A=r.subscribe(C);return i.add(T),()=>{A(),i.delete(T)}},dispatch(T){var C;try{return s=!((C=T==null?void 0:T.meta)!=null&&C[hke]),c=!s,c&&(d||(d=!0,m(x))),r.dispatch(T)}finally{s=!0}}})},pke=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new yte(e);return r&&s.push(fke(typeof r=="object"?r:void 0)),s};function mke(e){const t=dke(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:c=void 0,enhancers:d=void 0}=e||{};let i;if(typeof n=="function")i=n;else if(I5(n))i=lte(n);else throw new Error(qg(1));let m;typeof r=="function"?m=r(t):m=t();let x=IR;s&&(x=cke({trace:!1,...typeof s=="object"&&s}));const T=XIe(...m),C=pke(T);let A=typeof d=="function"?d(C):C();const I=x(...A);return k5(i,c,I)}function vte(e){const t={},n=[];let r;const s={addCase(c,d){const i=typeof c=="string"?c:c.type;if(!i)throw new Error(qg(28));if(i in t)throw new Error(qg(29));return t[i]=d,s},addMatcher(c,d){return n.push({matcher:c,reducer:d}),s},addDefaultCase(c){return r=c,s}};return e(s),[t,n,r]}function gke(e){return typeof e=="function"}function yke(e,t){let[n,r,s]=vte(t),c;if(gke(e))c=()=>fH(e());else{const i=fH(e);c=()=>i}function d(i=c(),m){let x=[n[m.type],...r.filter(({matcher:T})=>T(m)).map(({reducer:T})=>T)];return x.filter(T=>!!T).length===0&&(x=[s]),x.reduce((T,C)=>{if(C)if(N0(T)){const I=C(T,m);return I===void 0?T:I}else{if(Qg(T))return mte(T,A=>C(A,m));{const A=C(T,m);if(A===void 0){if(T===null)return T;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return T},i)}return d.getInitialState=c,d}var vke=Symbol.for("rtk-slice-createasyncthunk");function _ke(e,t){return`${e}/${t}`}function xke({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[vke];return function(s){const{name:c,reducerPath:d=c}=s;if(!c)throw new Error(qg(11));const i=(typeof s.reducers=="function"?s.reducers(wke()):s.reducers)||{},m=Object.keys(i),x={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},T={addCase(X,Q){const ee=typeof X=="string"?X:X.type;if(!ee)throw new Error(qg(12));if(ee in x.sliceCaseReducersByType)throw new Error(qg(13));return x.sliceCaseReducersByType[ee]=Q,T},addMatcher(X,Q){return x.sliceMatchers.push({matcher:X,reducer:Q}),T},exposeAction(X,Q){return x.actionCreators[X]=Q,T},exposeCaseReducer(X,Q){return x.sliceCaseReducersByName[X]=Q,T}};m.forEach(X=>{const Q=i[X],ee={reducerName:X,type:_ke(c,X),createNotation:typeof s.reducers=="function"};Tke(Q)?Cke(ee,Q,T,t):Ske(ee,Q,T)});function C(){const[X={},Q=[],ee=void 0]=typeof s.extraReducers=="function"?vte(s.extraReducers):[s.extraReducers],ce={...X,...x.sliceCaseReducersByType};return yke(s.initialState,fe=>{for(let ue in ce)fe.addCase(ue,ce[ue]);for(let ue of x.sliceMatchers)fe.addMatcher(ue.matcher,ue.reducer);for(let ue of Q)fe.addMatcher(ue.matcher,ue.reducer);ee&&fe.addDefaultCase(ee)})}const A=X=>X,I=new Map,k=new WeakMap;let B;function j(X,Q){return B||(B=C()),B(X,Q)}function V(){return B||(B=C()),B.getInitialState()}function H(X,Q=!1){function ee(fe){let ue=fe[X];return typeof ue>"u"&&Q&&(ue=zM(k,ee,V)),ue}function ce(fe=A){const ue=zM(I,Q,()=>new WeakMap);return zM(ue,fe,()=>{const ae={};for(const[xe,we]of Object.entries(s.selectors??{}))ae[xe]=bke(we,fe,()=>zM(k,fe,V),Q);return ae})}return{reducerPath:X,getSelectors:ce,get selectors(){return ce(ee)},selectSlice:ee}}const G={name:c,reducer:j,actions:x.actionCreators,caseReducers:x.sliceCaseReducersByName,getInitialState:V,...H(d),injectInto(X,{reducerPath:Q,...ee}={}){const ce=Q??d;return X.inject({reducerPath:ce,reducer:j},ee),{...G,...H(ce,!0)}}};return G}}function bke(e,t,n,r){function s(c,...d){let i=t(c);return typeof i>"u"&&r&&(i=n()),e(i,...d)}return s.unwrapped=e,s}var _te=xke();function wke(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Ske({type:e,reducerName:t,createNotation:n},r,s){let c,d;if("reducer"in r){if(n&&!Eke(r))throw new Error(qg(17));c=r.reducer,d=r.prepare}else c=r;s.addCase(e,c).exposeCaseReducer(t,c).exposeAction(t,d?hH(e,d):hH(e))}function Tke(e){return e._reducerDefinitionType==="asyncThunk"}function Eke(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Cke({type:e,reducerName:t},n,r,s){if(!s)throw new Error(qg(18));const{payloadCreator:c,fulfilled:d,pending:i,rejected:m,settled:x,options:T}=n,C=s(e,c,T);r.exposeAction(t,C),d&&r.addCase(C.fulfilled,d),i&&r.addCase(C.pending,i),m&&r.addCase(C.rejected,m),x&&r.addMatcher(C.settled,x),r.exposeCaseReducer(t,{fulfilled:d||FM,pending:i||FM,rejected:m||FM,settled:x||FM})}function FM(){}function qg(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Mke={logInProgress:!1,user:null,token:localStorage.getItem("token")||null},xte=_te({name:"auth",initialState:Mke,reducers:{setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token},logout:e=>{e.user=null,e.token=null,localStorage.removeItem("token")},setlogInProgress:(e,t)=>{e.logInProgress=t.payload}}}),{setCredentials:AZe,logout:Ake,setlogInProgress:RZe}=xte.actions,Rke=xte.reducer,Dke=fE(U.lazy(()=>oE(()=>import("./Login-Bdg7X2lo.js"),__vite__mapDeps([0,1])))),Pke=fE(U.lazy(()=>oE(()=>import("./Register-DASAJdFm.js"),__vite__mapDeps([2,1])))),Ike=fE(U.lazy(()=>oE(()=>import("./ForgetPassword-BskJCTat.js"),[]))),kke=fE(U.lazy(()=>oE(()=>import("./ResetPassword-cSwxWodM.js"),__vite__mapDeps([3,1])))),Oke={path:"/",element:z.jsx(Upe,{}),children:[{path:"/login",element:z.jsx(Dke,{})},{path:"/register",element:z.jsx(Pke,{})},{path:"/reset-password",element:z.jsx(kke,{})},{path:"/forget-password",element:z.jsx(Ike,{})}]},bte={fontFamily:"Inter",borderRadius:8};function wte(){return z.jsx(sEe,{style:{textDecoration:"none"},component:iv,to:"/","aria-label":"theme-logo",children:z.jsx(D5,{})})}function z5({children:e,position:t="top-left",sx:n,type:r="grow",direction:s="up",ref:c,...d}){let i={transformOrigin:"0 0 0"};switch(t){case"top-right":i={transformOrigin:"top right"};break;case"top":i={transformOrigin:"top"};break;case"bottom-left":i={transformOrigin:"bottom left"};break;case"bottom-right":i={transformOrigin:"bottom right"};break;case"bottom":i={transformOrigin:"bottom"};break;case"top-left":default:i={transformOrigin:"0 0 0"};break}return z.jsxs(Pn,{ref:c,children:[r==="grow"&&z.jsx(f1,{...d,children:z.jsx(Pn,{sx:i,children:e})}),r==="collapse"&&z.jsx(_R,{...d,sx:i,children:e}),r==="fade"&&z.jsx(gm,{...d,timeout:{appear:500,enter:600,exit:400},children:z.jsx(Pn,{sx:i,children:e})}),r==="slide"&&z.jsx(lJ,{...d,timeout:{appear:0,enter:400,exit:200},direction:s,children:z.jsx(Pn,{sx:i,children:e})}),r==="zoom"&&z.jsx(PCe,{...d,children:z.jsx(Pn,{sx:i,children:e})})]})}z5.propTypes={children:rt.node,position:rt.string,sx:rt.any,type:rt.string,direction:rt.oneOf(["up","right","left","down"]),others:rt.any};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lke={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=(e,t,n,r)=>{const s=U.forwardRef(({color:c="currentColor",size:d=24,stroke:i=2,title:m,className:x,children:T,...C},A)=>U.createElement("svg",{ref:A,...Lke[e],width:d,height:d,className:["tabler-icon",`tabler-icon-${t}`,x].join(" "),...e==="filled"?{fill:c}:{strokeWidth:i,stroke:c},...C},[m&&U.createElement("title",{key:"svg-title"},m),...r.map(([I,k])=>U.createElement(I,k)),...Array.isArray(T)?T:[T]]));return s.displayName=`${n}`,s};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zke=No("outline","brand-facebook","IconBrandFacebook",[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ax=No("outline","building-cog","IconBuildingCog",[["path",{d:"M3 21h9",key:"svg-0"}],["path",{d:"M9 8h1",key:"svg-1"}],["path",{d:"M9 12h1",key:"svg-2"}],["path",{d:"M9 16h1",key:"svg-3"}],["path",{d:"M14 8h1",key:"svg-4"}],["path",{d:"M14 12h1",key:"svg-5"}],["path",{d:"M5 21v-16c0 -.53 .211 -1.039 .586 -1.414c.375 -.375 .884 -.586 1.414 -.586h10c.53 0 1.039 .211 1.414 .586c.375 .375 .586 .884 .586 1.414v7",key:"svg-6"}],["path",{d:"M16 18c0 .53 .211 1.039 .586 1.414c.375 .375 .884 .586 1.414 .586c.53 0 1.039 -.211 1.414 -.586c.375 -.375 .586 -.884 .586 -1.414c0 -.53 -.211 -1.039 -.586 -1.414c-.375 -.375 -.884 -.586 -1.414 -.586c-.53 0 -1.039 .211 -1.414 .586c-.375 .375 -.586 .884 -.586 1.414z",key:"svg-7"}],["path",{d:"M18 14.5v1.5",key:"svg-8"}],["path",{d:"M18 20v1.5",key:"svg-9"}],["path",{d:"M21.032 16.25l-1.299 .75",key:"svg-10"}],["path",{d:"M16.27 19l-1.3 .75",key:"svg-11"}],["path",{d:"M14.97 16.25l1.3 .75",key:"svg-12"}],["path",{d:"M19.733 19l1.3 .75",key:"svg-13"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fke=No("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ste=No("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bke=No("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tte=No("outline","cloud-upload","IconCloudUpload",[["path",{d:"M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1",key:"svg-0"}],["path",{d:"M9 15l3 -3l3 3",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jke=No("outline","database-import","IconDatabaseImport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c.856 0 1.68 -.05 2.454 -.144m5.546 -2.856v-6",key:"svg-1"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.171 0 .341 -.002 .51 -.006",key:"svg-2"}],["path",{d:"M19 22v-6",key:"svg-3"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pv=No("outline","drone-off","IconDroneOff",[["path",{d:"M14 14h-4v-4",key:"svg-0"}],["path",{d:"M10 10l-3.5 -3.5",key:"svg-1"}],["path",{d:"M9.957 5.95a3.503 3.503 0 0 0 -2.917 -2.91m-3.02 .989a3.5 3.5 0 0 0 1.98 5.936",key:"svg-2"}],["path",{d:"M14 10l3.5 -3.5",key:"svg-3"}],["path",{d:"M18 9.965a3.5 3.5 0 1 0 -3.966 -3.965",key:"svg-4"}],["path",{d:"M14 14l3.5 3.5",key:"svg-5"}],["path",{d:"M14.035 18a3.5 3.5 0 0 0 5.936 1.98m.987 -3.026a3.503 3.503 0 0 0 -2.918 -2.913",key:"svg-6"}],["path",{d:"M10 14l-3.5 3.5",key:"svg-7"}],["path",{d:"M6 14.035a3.5 3.5 0 1 0 3.966 3.965",key:"svg-8"}],["path",{d:"M3 3l18 18",key:"svg-9"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nke=No("outline","file-spreadsheet","IconFileSpreadsheet",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M8 11h8v7h-8z",key:"svg-2"}],["path",{d:"M8 15h8",key:"svg-3"}],["path",{d:"M11 11v7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vke=No("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ke=No("outline","file-type-pdf","IconFileTypePdf",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4",key:"svg-1"}],["path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6",key:"svg-2"}],["path",{d:"M17 18h2",key:"svg-3"}],["path",{d:"M20 15h-3v6",key:"svg-4"}],["path",{d:"M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uke=No("outline","file-word","IconFileWord",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2",key:"svg-1"}],["path",{d:"M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qke=No("outline","file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ete=No("outline","files","IconFiles",[["path",{d:"M15 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M18 17h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h4l5 5v7a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M16 17v2a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cte=No("outline","git-compare","IconGitCompare",[["path",{d:"M6 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M11 6h5a2 2 0 0 1 2 2v8",key:"svg-2"}],["path",{d:"M14 9l-3 -3l3 -3",key:"svg-3"}],["path",{d:"M13 18h-5a2 2 0 0 1 -2 -2v-8",key:"svg-4"}],["path",{d:"M10 15l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hke=No("outline","logout","IconLogout",[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wke=No("outline","menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lO=No("outline","photo-edit","IconPhotoEdit",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4",key:"svg-1"}],["path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596",key:"svg-3"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mte=No("outline","report","IconReport",[["path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697",key:"svg-0"}],["path",{d:"M18 14v4h4",key:"svg-1"}],["path",{d:"M18 11v-4a2 2 0 0 0 -2 -2h-2",key:"svg-2"}],["path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-4"}],["path",{d:"M8 11h4",key:"svg-5"}],["path",{d:"M8 15h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ate=No("outline","tag-starred","IconTagStarred",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}],["path",{d:"M12.5 13.847l-1.5 1.153l.532 -1.857l-1.532 -1.143h1.902l.598 -1.8l.598 1.8h1.902l-1.532 1.143l.532 1.857z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gke=No("outline","tallymark-1","IconTallymark1",[["path",{d:"M12 5l0 14",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yke=No("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rte=No("outline","users","IconUsers",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dte=No("outline","view-360-number","IconView360Number",[["path",{d:"M14 6a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v6a1 1 0 0 0 1 1h2a1 1 0 0 0 1 -1v-2a1 1 0 0 0 -1 -1h-3",key:"svg-0"}],["path",{d:"M3 5h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-1"}],["path",{d:"M17 7v4a2 2 0 1 0 4 0v-4a2 2 0 1 0 -4 0z",key:"svg-2"}],["path",{d:"M3 16c0 1.657 4.03 3 9 3s9 -1.343 9 -3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xke=No("outline","windmill","IconWindmill",[["path",{d:"M12 12c2.76 0 5 -2.01 5 -4.5s-2.24 -4.5 -5 -4.5v9z",key:"svg-0"}],["path",{d:"M12 12c0 2.76 2.01 5 4.5 5s4.5 -2.24 4.5 -5h-9z",key:"svg-1"}],["path",{d:"M12 12c-2.76 0 -5 2.01 -5 4.5s2.24 4.5 5 4.5v-9z",key:"svg-2"}],["path",{d:"M12 12c0 -2.76 -2.01 -5 -4.5 -5s-4.5 2.24 -4.5 5h9z",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mH=No("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zke=No("filled","brand-instagram-filled","IconBrandInstagramFilled",[["path",{d:"M16 3a5 5 0 0 1 5 5v8a5 5 0 0 1 -5 5h-8a5 5 0 0 1 -5 -5v-8a5 5 0 0 1 5 -5zm-4 5a4 4 0 0 0 -3.995 3.8l-.005 .2a4 4 0 1 0 4 -4m4.5 -1.5a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kke=No("filled","brand-linkedin-filled","IconBrandLinkedinFilled",[["path",{d:"M17 2a5 5 0 0 1 5 5v10a5 5 0 0 1 -5 5h-10a5 5 0 0 1 -5 -5v-10a5 5 0 0 1 5 -5zm-9 8a1 1 0 0 0 -1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0 -1 -1m6 0a3 3 0 0 0 -1.168 .236l-.125 .057a1 1 0 0 0 -1.707 .707v5a1 1 0 0 0 2 0v-3a1 1 0 0 1 2 0v3a1 1 0 0 0 2 0v-3a3 3 0 0 0 -3 -3m-6 -3a1 1 0 0 0 -.993 .883l-.007 .127a1 1 0 0 0 1.993 .117l.007 -.127a1 1 0 0 0 -1 -1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qke=No("filled","brand-x-filled","IconBrandXFilled",[["path",{d:"M8.267 3a1 1 0 0 1 .73 .317l.076 .092l4.274 5.828l5.946 -5.944a1 1 0 0 1 1.497 1.32l-.083 .094l-6.163 6.162l6.262 8.54a1 1 0 0 1 -.697 1.585l-.109 .006h-4.267a1 1 0 0 1 -.73 -.317l-.076 -.092l-4.276 -5.829l-5.944 5.945a1 1 0 0 1 -1.497 -1.32l.083 -.094l6.161 -6.163l-6.26 -8.539a1 1 0 0 1 .697 -1.585l.109 -.006h4.267z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jke=No("filled","brand-youtube-filled","IconBrandYoutubeFilled",[["path",{d:"M18 3a5 5 0 0 1 5 5v8a5 5 0 0 1 -5 5h-12a5 5 0 0 1 -5 -5v-8a5 5 0 0 1 5 -5zm-9 6v6a1 1 0 0 0 1.514 .857l5 -3a1 1 0 0 0 0 -1.714l-5 -3a1 1 0 0 0 -1.514 .857z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pte=No("filled","live-view-filled","IconLiveViewFilled",[["path",{d:"M8 3a1 1 0 1 1 0 2h-2a1 1 0 0 0 -1 1v2a1 1 0 1 1 -2 0v-2a3 3 0 0 1 3 -3z",key:"svg-0"}],["path",{d:"M4 15a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 1 0 2h-2a3 3 0 0 1 -3 -3v-2a1 1 0 0 1 1 -1",key:"svg-1"}],["path",{d:"M18 3a3 3 0 0 1 3 3v2a1 1 0 0 1 -2 0v-2a1 1 0 0 0 -1 -1h-2a1 1 0 0 1 0 -2z",key:"svg-2"}],["path",{d:"M20 15a1 1 0 0 1 1 1v2a3 3 0 0 1 -3 3h-2a1 1 0 0 1 0 -2h2a1 1 0 0 0 1 -1v-2a1 1 0 0 1 1 -1",key:"svg-3"}],["path",{d:"M15.19 7.214a5 5 0 0 1 1.185 6.27l-.056 .09l-3.484 4.976a1 1 0 0 1 -.077 .103l-.017 .019l-.057 .056l-.012 .013l-.019 .017a1 1 0 0 1 -.096 .073l-.053 .03l-.038 .024l-.011 .005a1 1 0 0 1 -.223 .083l-.045 .008l-.066 .012a1 1 0 0 1 -.242 0l-.061 -.011l-.05 -.01a1 1 0 0 1 -.234 -.087l-.047 -.028l-.044 -.026l-.011 -.008l-.032 -.025l-.053 -.04l-.01 -.01l-.009 -.007l-.034 -.035l-.035 -.034l-.007 -.01l-.01 -.009l-.037 -.05l-.024 -.03l-3.5 -5l-.056 -.089a5 5 0 0 1 7.566 -6.27m-3.191 2.786a1 1 0 0 0 -1 1v.01a1 1 0 0 0 2 0v-.01a1 1 0 0 0 -1 -1",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gH=No("filled","settings-filled","IconSettingsFilled",[["path",{d:"M14.647 4.081a.724 .724 0 0 0 1.08 .448c2.439 -1.485 5.23 1.305 3.745 3.744a.724 .724 0 0 0 .447 1.08c2.775 .673 2.775 4.62 0 5.294a.724 .724 0 0 0 -.448 1.08c1.485 2.439 -1.305 5.23 -3.744 3.745a.724 .724 0 0 0 -1.08 .447c-.673 2.775 -4.62 2.775 -5.294 0a.724 .724 0 0 0 -1.08 -.448c-2.439 1.485 -5.23 -1.305 -3.745 -3.744a.724 .724 0 0 0 -.447 -1.08c-2.775 -.673 -2.775 -4.62 0 -5.294a.724 .724 0 0 0 .448 -1.08c-1.485 -2.439 1.305 -5.23 3.744 -3.745a.722 .722 0 0 0 1.08 -.447c.673 -2.775 4.62 -2.775 5.294 0zm-2.647 4.919a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z",key:"svg-0"}]]);rt.node,rt.any;rt.string,rt.func,rt.any;function eOe(e,t){const[n,r]=U.useState(()=>{const c=localStorage.getItem(e);return c===null?t:JSON.parse(c)});return U.useEffect(()=>{const c=d=>{d.storageArea===localStorage&&d.key===e&&r(d.newValue?JSON.parse(d.newValue):d.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}},[e,t]),[n,c=>{r(d=>{const i=typeof c=="function"?c(d):c;return localStorage.setItem(e,JSON.stringify(i)),i})}]}const GB={...bte,onChangeFontFamily:()=>{},onChangeBorderRadius:()=>{},onReset:()=>{}},Ite=U.createContext(GB);function kte({children:e}){const[t,n]=eOe("berry-config-vite-ts",{fontFamily:GB.fontFamily,borderRadius:GB.borderRadius}),r=d=>{n({...t,fontFamily:d})},s=(d,i)=>{n({...t,borderRadius:i})},c=()=>{n({...bte})};return z.jsx(Ite.Provider,{value:{...t,onChangeFontFamily:r,onChangeBorderRadius:s,onReset:c},children:e})}kte.propTypes={children:rt.node};function F1(){return U.useContext(Ite)}function tOe(){const e=Zo(),t=bv(),n=ate(),{borderRadius:r}=F1(),[s,c]=U.useState(!0),[d,i]=U.useState(""),[m,x]=U.useState(!1),[T]=U.useState(-1),[C,A]=U.useState(!1),I=Pu(G=>G.auth.user),k=U.useRef(null),B=()=>{A(G=>!G)},j=G=>{k.current&&k.current.contains(G.target)||A(!1)},V=()=>{n(Ake()),t("/login")},H=U.useRef(C);return U.useEffect(()=>{H.current===!0&&C===!1&&k.current.focus(),H.current=C},[C]),z.jsxs(z.Fragment,{children:[z.jsx(yd,{sx:{ml:2,height:"48px",alignItems:"center",borderRadius:"27px","& .MuiChip-label":{lineHeight:0}},icon:z.jsx(sx,{alt:"user-images",sx:{...e.typography.mediumAvatar,margin:"8px 0 8px 8px !important",cursor:"pointer"},ref:k,"aria-controls":C?"menu-list-grow":void 0,"aria-haspopup":"true",color:"inherit"}),ref:k,"aria-controls":C?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:B,color:"secondary","aria-label":"user-account"}),z.jsx(EE,{placement:"bottom",open:C,anchorEl:k.current,role:void 0,transition:!0,disablePortal:!0,modifiers:[{name:"offset",options:{offset:[0,14]}}],children:({TransitionProps:G})=>z.jsx(rJ,{onClickAway:j,children:z.jsx(z5,{in:C,...G,children:z.jsx(fa,{children:C&&z.jsxs(Ph,{border:!1,elevation:16,content:!1,boxShadow:!0,shadow:e.shadows[16],children:[z.jsxs(Pn,{sx:{p:2,pb:0},children:[z.jsxs(Ns,{children:[z.jsx(Ns,{direction:"row",spacing:.5,sx:{alignItems:"center"},children:z.jsx(En,{component:"span",variant:"h4",sx:{fontWeight:400},children:(I==null?void 0:I.firstName)+" "+(I==null?void 0:I.lastName)})}),z.jsx(En,{variant:"subtitle2",children:I==null?void 0:I.designation})]}),z.jsx(xc,{})]}),z.jsxs(Pn,{sx:{p:2,py:0,height:"100%",maxHeight:"calc(100vh - 250px)",overflowX:"hidden","&::-webkit-scrollbar":{width:5}},children:[z.jsx(xc,{}),z.jsx(xc,{}),z.jsx(Rv,{component:"nav",sx:{width:"100%",maxWidth:350,minWidth:300,borderRadius:`${r}px`,"& .MuiListItemButton-root":{mt:.5}},children:z.jsxs(GN,{sx:{borderRadius:`${r}px`},selected:T===4,onClick:V,children:[z.jsx(XN,{children:z.jsx(Hke,{stroke:1.5,size:"20px"})}),z.jsx(XD,{primary:z.jsx(En,{variant:"body2",children:"Logout"})})]})})]})]})})})})})]})}rt.node;var cO={exports:{}},uO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yH;function nOe(){if(yH)return uO;yH=1;var e=Fh();function t(C,A){return C===A&&(C!==0||1/C===1/A)||C!==C&&A!==A}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,c=e.useLayoutEffect,d=e.useDebugValue;function i(C,A){var I=A(),k=r({inst:{value:I,getSnapshot:A}}),B=k[0].inst,j=k[1];return c(function(){B.value=I,B.getSnapshot=A,m(B)&&j({inst:B})},[C,I,A]),s(function(){return m(B)&&j({inst:B}),C(function(){m(B)&&j({inst:B})})},[C]),d(I),I}function m(C){var A=C.getSnapshot;C=C.value;try{var I=A();return!n(C,I)}catch{return!0}}function x(C,A){return A()}var T=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:i;return uO.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:T,uO}var vH;function rOe(){return vH||(vH=1,cO.exports=nOe()),cO.exports}var iOe=rOe();const Ote=0,Lte=1,zte=2,_H=3;var xH=Object.prototype.hasOwnProperty;function YB(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&YB(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(xH.call(e,n)&&++r&&!xH.call(t,n)||!(n in t)||!YB(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const Ng=new WeakMap,sv=()=>{},Xc=sv(),XB=Object,Lo=e=>e===Xc,rm=e=>typeof e=="function",vv=(e,t)=>({...e,...t}),Fte=e=>rm(e.then),dO={},BM={},F5="undefined",PE=typeof window!=F5,ZB=typeof document!=F5,oOe=PE&&"Deno"in window,sOe=()=>PE&&typeof window.requestAnimationFrame!=F5,Bte=(e,t)=>{const n=Ng.get(e);return[()=>!Lo(t)&&e.get(t)||dO,r=>{if(!Lo(t)){const s=e.get(t);t in BM||(BM[t]=s),n[5](t,vv(s,r),s||dO)}},n[6],()=>!Lo(t)&&t in BM?BM[t]:!Lo(t)&&e.get(t)||dO]};let KB=!0;const aOe=()=>KB,[QB,JB]=PE&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[sv,sv],lOe=()=>{const e=ZB&&document.visibilityState;return Lo(e)||e!=="hidden"},cOe=e=>(ZB&&document.addEventListener("visibilitychange",e),QB("focus",e),()=>{ZB&&document.removeEventListener("visibilitychange",e),JB("focus",e)}),uOe=e=>{const t=()=>{KB=!0,e()},n=()=>{KB=!1};return QB("online",t),QB("offline",n),()=>{JB("online",t),JB("offline",n)}},dOe={isOnline:aOe,isVisible:lOe},hOe={initFocus:cOe,initReconnect:uOe},bH=!Rt.useId,zT=!PE||oOe,fOe=e=>sOe()?window.requestAnimationFrame(e):setTimeout(e,1),hO=zT?U.useEffect:U.useLayoutEffect,fO=typeof navigator<"u"&&navigator.connection,wH=!zT&&fO&&(["slow-2g","2g"].includes(fO.effectiveType)||fO.saveData),jM=new WeakMap,pO=(e,t)=>XB.prototype.toString.call(e)===`[object ${t}]`;let pOe=0;const ej=e=>{const t=typeof e,n=pO(e,"Date"),r=pO(e,"RegExp"),s=pO(e,"Object");let c,d;if(XB(e)===e&&!n&&!r){if(c=jM.get(e),c)return c;if(c=++pOe+"~",jM.set(e,c),Array.isArray(e)){for(c="@",d=0;d<e.length;d++)c+=ej(e[d])+",";jM.set(e,c)}if(s){c="#";const i=XB.keys(e).sort();for(;!Lo(d=i.pop());)Lo(e[d])||(c+=d+":"+ej(e[d])+",");jM.set(e,c)}}else c=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return c},B5=e=>{if(rm(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?ej(e):"",[e,t]};let mOe=0;const tj=()=>++mOe;async function jte(...e){const[t,n,r,s]=e,c=vv({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let d=c.populateCache;const i=c.rollbackOnError;let m=c.optimisticData;const x=A=>typeof i=="function"?i(A):i!==!1,T=c.throwOnError;if(rm(n)){const A=n,I=[],k=t.keys();for(const B of k)!/^\$(inf|sub)\$/.test(B)&&A(t.get(B)._k)&&I.push(B);return Promise.all(I.map(C))}return C(n);async function C(A){const[I]=B5(A);if(!I)return;const[k,B]=Bte(t,I),[j,V,H,G]=Ng.get(t),X=()=>{const Me=j[I];return(rm(c.revalidate)?c.revalidate(k().data,A):c.revalidate!==!1)&&(delete H[I],delete G[I],Me&&Me[0])?Me[0](zte).then(()=>k().data):k().data};if(e.length<3)return X();let Q=r,ee;const ce=tj();V[I]=[ce,0];const fe=!Lo(m),ue=k(),ae=ue.data,xe=ue._c,we=Lo(xe)?ae:xe;if(fe&&(m=rm(m)?m(we,ae):m,B({data:m,_c:we})),rm(Q))try{Q=Q(we)}catch(Me){ee=Me}if(Q&&Fte(Q))if(Q=await Q.catch(Me=>{ee=Me}),ce!==V[I][0]){if(ee)throw ee;return Q}else ee&&fe&&x(ee)&&(d=!0,B({data:we,_c:Xc}));if(d&&!ee)if(rm(d)){const Me=d(Q,we);B({data:Me,error:Xc,_c:Xc})}else B({data:Q,error:Xc,_c:Xc});if(V[I][1]=tj(),Promise.resolve(X()).then(()=>{B({_c:Xc})}),ee){if(T)throw ee;return}return Q}}const SH=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},gOe=(e,t)=>{if(!Ng.has(e)){const n=vv(hOe,t),r=Object.create(null),s=jte.bind(Xc,e);let c=sv;const d=Object.create(null),i=(T,C)=>{const A=d[T]||[];return d[T]=A,A.push(C),()=>A.splice(A.indexOf(C),1)},m=(T,C,A)=>{e.set(T,C);const I=d[T];if(I)for(const k of I)k(C,A)},x=()=>{if(!Ng.has(e)&&(Ng.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,m,i]),!zT)){const T=n.initFocus(setTimeout.bind(Xc,SH.bind(Xc,r,Ote))),C=n.initReconnect(setTimeout.bind(Xc,SH.bind(Xc,r,Lte)));c=()=>{T&&T(),C&&C(),Ng.delete(e)}}};return x(),[e,s,x,c]}return[e,Ng.get(e)[4]]},yOe=(e,t,n,r,s)=>{const c=n.errorRetryCount,d=s.retryCount,i=~~((Math.random()+.5)*(1<<(d<8?d:8)))*n.errorRetryInterval;!Lo(c)&&d>c||setTimeout(r,i,s)},vOe=YB,[Nte,Vte]=gOe(new Map),_Oe=vv({onLoadingSlow:sv,onSuccess:sv,onError:sv,onErrorRetry:yOe,onDiscarded:sv,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:wH?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:wH?5e3:3e3,compare:vOe,isPaused:()=>!1,cache:Nte,mutate:Vte,fallback:{}},dOe),xOe=(e,t)=>{const n=vv(e,t);if(t){const{use:r,fallback:s}=e,{use:c,fallback:d}=t;r&&c&&(n.use=r.concat(c)),s&&d&&(n.fallback=vv(s,d))}return n},bOe=U.createContext({}),wOe="$inf$",$te=PE&&window.__SWR_DEVTOOLS_USE__,SOe=$te?window.__SWR_DEVTOOLS_USE__:[],TOe=()=>{$te&&(window.__SWR_DEVTOOLS_REACT__=Rt)},EOe=e=>rm(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],COe=()=>vv(_Oe,U.useContext(bOe)),MOe=e=>(t,n,r)=>e(t,n&&((...c)=>{const[d]=B5(t),[,,,i]=Ng.get(Nte);if(d.startsWith(wOe))return n(...c);const m=i[d];return Lo(m)?n(...c):(delete i[d],m)}),r),AOe=SOe.concat(MOe),ROe=e=>function(...n){const r=COe(),[s,c,d]=EOe(n),i=xOe(r,d);let m=e;const{use:x}=i,T=(x||[]).concat(AOe);for(let C=T.length;C--;)m=T[C](m);return m(s,c||i.fetcher||null,i)},DOe=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};TOe();const mO=Rt.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),gO={dedupe:!0},POe=(e,t,n)=>{const{cache:r,compare:s,suspense:c,fallbackData:d,revalidateOnMount:i,revalidateIfStale:m,refreshInterval:x,refreshWhenHidden:T,refreshWhenOffline:C,keepPreviousData:A}=n,[I,k,B,j]=Ng.get(r),[V,H]=B5(e),G=U.useRef(!1),X=U.useRef(!1),Q=U.useRef(V),ee=U.useRef(t),ce=U.useRef(n),fe=()=>ce.current,ue=()=>fe().isVisible()&&fe().isOnline(),[ae,xe,we,Me]=Bte(r,V),Se=U.useRef({}).current,Ae=Lo(d)?Lo(n.fallback)?Xc:n.fallback[V]:d,_e=(Ct,Wt)=>{for(const fn in Se){const Zt=fn;if(Zt==="data"){if(!s(Ct[Zt],Wt[Zt])&&(!Lo(Ct[Zt])||!s(wt,Wt[Zt])))return!1}else if(Wt[Zt]!==Ct[Zt])return!1}return!0},Pe=U.useMemo(()=>{const Ct=!V||!t?!1:Lo(i)?fe().isPaused()||c?!1:m!==!1:i,Wt=bn=>{const Nn=vv(bn);return delete Nn._k,Ct?{isValidating:!0,isLoading:!0,...Nn}:Nn},fn=ae(),Zt=Me(),Ut=Wt(fn),kn=fn===Zt?Ut:Wt(Zt);let Bn=Ut;return[()=>{const bn=Wt(ae());return _e(bn,Bn)?(Bn.data=bn.data,Bn.isLoading=bn.isLoading,Bn.isValidating=bn.isValidating,Bn.error=bn.error,Bn):(Bn=bn,bn)},()=>kn]},[r,V]),We=iOe.useSyncExternalStore(U.useCallback(Ct=>we(V,(Wt,fn)=>{_e(fn,Wt)||Ct()}),[r,V]),Pe[0],Pe[1]),Fe=!G.current,Ce=I[V]&&I[V].length>0,He=We.data,dt=Lo(He)?Ae&&Fte(Ae)?mO(Ae):Ae:He,gt=We.error,Nt=U.useRef(dt),wt=A?Lo(He)?Lo(Nt.current)?dt:Nt.current:He:dt,ot=Ce&&!Lo(gt)?!1:Fe&&!Lo(i)?i:fe().isPaused()?!1:c?Lo(dt)?!1:m:Lo(dt)||m,st=!!(V&&t&&Fe&&ot),St=Lo(We.isValidating)?st:We.isValidating,Dt=Lo(We.isLoading)?st:We.isLoading,Et=U.useCallback(async Ct=>{const Wt=ee.current;if(!V||!Wt||X.current||fe().isPaused())return!1;let fn,Zt,Ut=!0;const kn=Ct||{},Bn=!B[V]||!kn.dedupe,bn=()=>bH?!X.current&&V===Q.current&&G.current:V===Q.current,Nn={isValidating:!1,isLoading:!1},ft=()=>{xe(Nn)},vn=()=>{const tn=B[V];tn&&tn[1]===Zt&&delete B[V]},Ot={isValidating:!0};Lo(ae().data)&&(Ot.isLoading=!0);try{if(Bn&&(xe(Ot),n.loadingTimeout&&Lo(ae().data)&&setTimeout(()=>{Ut&&bn()&&fe().onLoadingSlow(V,n)},n.loadingTimeout),B[V]=[Wt(H),tj()]),[fn,Zt]=B[V],fn=await fn,Bn&&setTimeout(vn,n.dedupingInterval),!B[V]||B[V][1]!==Zt)return Bn&&bn()&&fe().onDiscarded(V),!1;Nn.error=Xc;const tn=k[V];if(!Lo(tn)&&(Zt<=tn[0]||Zt<=tn[1]||tn[1]===0))return ft(),Bn&&bn()&&fe().onDiscarded(V),!1;const Rn=ae().data;Nn.data=s(Rn,fn)?Rn:fn,Bn&&bn()&&fe().onSuccess(fn,V,n)}catch(tn){vn();const Rn=fe(),{shouldRetryOnError:Hn}=Rn;Rn.isPaused()||(Nn.error=tn,Bn&&bn()&&(Rn.onError(tn,V,Rn),(Hn===!0||rm(Hn)&&Hn(tn))&&(!fe().revalidateOnFocus||!fe().revalidateOnReconnect||ue())&&Rn.onErrorRetry(tn,V,Rn,mr=>{const Xn=I[V];Xn&&Xn[0]&&Xn[0](_H,mr)},{retryCount:(kn.retryCount||0)+1,dedupe:!0})))}return Ut=!1,ft(),!0},[V,r]),yt=U.useCallback((...Ct)=>jte(r,Q.current,...Ct),[]);if(hO(()=>{ee.current=t,ce.current=n,Lo(He)||(Nt.current=He)}),hO(()=>{if(!V)return;const Ct=Et.bind(Xc,gO);let Wt=0;fe().revalidateOnFocus&&(Wt=Date.now()+fe().focusThrottleInterval);const Zt=DOe(V,I,(Ut,kn={})=>{if(Ut==Ote){const Bn=Date.now();fe().revalidateOnFocus&&Bn>Wt&&ue()&&(Wt=Bn+fe().focusThrottleInterval,Ct())}else if(Ut==Lte)fe().revalidateOnReconnect&&ue()&&Ct();else{if(Ut==zte)return Et();if(Ut==_H)return Et(kn)}});return X.current=!1,Q.current=V,G.current=!0,xe({_k:H}),ot&&(Lo(dt)||zT?Ct():fOe(Ct)),()=>{X.current=!0,Zt()}},[V]),hO(()=>{let Ct;function Wt(){const Zt=rm(x)?x(ae().data):x;Zt&&Ct!==-1&&(Ct=setTimeout(fn,Zt))}function fn(){!ae().error&&(T||fe().isVisible())&&(C||fe().isOnline())?Et(gO).then(Wt):Wt()}return Wt(),()=>{Ct&&(clearTimeout(Ct),Ct=-1)}},[x,T,C,V]),U.useDebugValue(wt),c&&Lo(dt)&&V){if(!bH&&zT)throw new Error("Fallback data is required when using Suspense in SSR.");ee.current=t,ce.current=n,X.current=!1;const Ct=j[V];if(!Lo(Ct)){const Wt=yt(Ct);mO(Wt)}if(Lo(gt)){const Wt=Et(gO);Lo(wt)||(Wt.status="fulfilled",Wt.value=!0),mO(Wt)}else throw gt}return{mutate:yt,get data(){return Se.data=!0,wt},get error(){return Se.error=!0,gt},get isValidating(){return Se.isValidating=!0,St},get isLoading(){return Se.isLoading=!0,Dt}}},IOe=ROe(POe),kOe={openedItem:"dashboard",openedComponent:"buttons",openedHorizontalItem:null,isDashboardDrawerOpened:!1,isComponentDrawerOpened:!0},zR={key:"api/menu",master:"master"};function lx(){const{data:e,isLoading:t}=IOe(zR.key+zR.master,()=>kOe,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return U.useMemo(()=>({menuMaster:e,menuMasterLoading:t}),[e,t])}function FR(e){Vte(zR.key+zR.master,t=>({...t,isDashboardDrawerOpened:e}),!1)}function OOe(){const e=Zo(),t=D1(e.breakpoints.down("md")),{menuMaster:n}=lx(),r=n.isDashboardDrawerOpened;return z.jsxs(z.Fragment,{children:[z.jsxs(Pn,{sx:{width:t?"auto":228,display:"flex"},children:[z.jsx(Pn,{component:"span",sx:{display:{xs:"none",md:"block"},flexGrow:1},children:z.jsx(wte,{})}),z.jsx(sx,{variant:"rounded",sx:{mt:2,...e.typography.commonAvatar,...e.typography.mediumAvatar,overflow:"hidden",transition:"all .2s ease-in-out",bgcolor:"secondary.light",color:"secondary.dark","&:hover":{bgcolor:"secondary.dark",color:"secondary.light"}},onClick:()=>FR(!r),color:"inherit",children:z.jsx(Wke,{stroke:1.5,size:"20px"})})]}),z.jsx(Pn,{sx:{flexGrow:1}}),z.jsx(Pn,{sx:{flexGrow:1}}),z.jsx(tOe,{})]})}var NM={exports:{}},VM={exports:{}};/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function sm(e){return getComputedStyle(e)}function wu(e,t){for(var n in t){var r=t[n];typeof r=="number"&&(r=r+"px"),e.style[n]=r}return e}function $M(e){var t=document.createElement("div");return t.className=e,t}var TH=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function av(e,t){if(!TH)throw new Error("No element matching method supported");return TH.call(e,t)}function Wb(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function EH(e,t){return Array.prototype.filter.call(e.children,function(n){return av(n,t)})}var $a={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},Ute={x:null,y:null};function qte(e,t){var n=e.element.classList,r=$a.state.scrolling(t);n.contains(r)?clearTimeout(Ute[t]):n.add(r)}function Hte(e,t){Ute[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove($a.state.scrolling(t))},e.settings.scrollingThreshold)}function LOe(e,t){qte(e,t),Hte(e,t)}var IE=function(t){this.element=t,this.handlers={}},Wte={isEmpty:{configurable:!0}};IE.prototype.bind=function(t,n){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(n),this.element.addEventListener(t,n,!1)};IE.prototype.unbind=function(t,n){var r=this;this.handlers[t]=this.handlers[t].filter(function(s){return n&&s!==n?!0:(r.element.removeEventListener(t,s,!1),!1)})};IE.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};Wte.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(IE.prototype,Wte);var B1=function(){this.eventElements=[]};B1.prototype.eventElement=function(t){var n=this.eventElements.filter(function(r){return r.element===t})[0];return n||(n=new IE(t),this.eventElements.push(n)),n};B1.prototype.bind=function(t,n,r){this.eventElement(t).bind(n,r)};B1.prototype.unbind=function(t,n,r){var s=this.eventElement(t);s.unbind(n,r),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};B1.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};B1.prototype.once=function(t,n,r){var s=this.eventElement(t),c=function(d){s.unbind(n,c),r(d)};s.bind(n,c)};function UM(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function BR(e,t,n,r,s){r===void 0&&(r=!0),s===void 0&&(s=!1);var c;if(t==="top")c=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")c=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");zOe(e,n,c,r,s)}function zOe(e,t,n,r,s){var c=n[0],d=n[1],i=n[2],m=n[3],x=n[4],T=n[5];r===void 0&&(r=!0),s===void 0&&(s=!1);var C=e.element;e.reach[m]=null,C[i]<1&&(e.reach[m]="start"),C[i]>e[c]-e[d]-1&&(e.reach[m]="end"),t&&(C.dispatchEvent(UM("ps-scroll-"+m)),t<0?C.dispatchEvent(UM("ps-scroll-"+x)):t>0&&C.dispatchEvent(UM("ps-scroll-"+T)),r&&LOe(e,m)),e.reach[m]&&(t||s)&&C.dispatchEvent(UM("ps-"+m+"-reach-"+e.reach[m]))}function Ys(e){return parseInt(e,10)||0}function FOe(e){return av(e,"input,[contenteditable]")||av(e,"select,[contenteditable]")||av(e,"textarea,[contenteditable]")||av(e,"button,[contenteditable]")}function BOe(e){var t=sm(e);return Ys(t.width)+Ys(t.paddingLeft)+Ys(t.paddingRight)+Ys(t.borderLeftWidth)+Ys(t.borderRightWidth)}var Ob={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Jg(e){var t=e.element,n=Math.floor(t.scrollTop),r=t.getBoundingClientRect();e.containerWidth=Math.floor(r.width),e.containerHeight=Math.floor(r.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(EH(t,$a.element.rail("x")).forEach(function(s){return Wb(s)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(EH(t,$a.element.rail("y")).forEach(function(s){return Wb(s)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=CH(e,Ys(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=Ys((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=CH(e,Ys(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=Ys(n*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),jOe(t,e),e.scrollbarXActive?t.classList.add($a.state.active("x")):(t.classList.remove($a.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add($a.state.active("y")):(t.classList.remove($a.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function CH(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function jOe(e,t){var n={width:t.railXWidth},r=Math.floor(e.scrollTop);t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-r:n.top=t.scrollbarXTop+r,wu(t.scrollbarXRail,n);var s={top:r,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?s.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:s.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?s.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:s.left=t.scrollbarYLeft+e.scrollLeft,wu(t.scrollbarYRail,s),wu(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),wu(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function NOe(e){e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,r=n>e.scrollbarYTop?1:-1;e.element.scrollTop+=r*e.containerHeight,Jg(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,r=n>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=r*e.containerWidth,Jg(e),t.stopPropagation()})}var qM=null;function VOe(e){MH(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),MH(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function MH(e,t){var n=t[0],r=t[1],s=t[2],c=t[3],d=t[4],i=t[5],m=t[6],x=t[7],T=t[8],C=e.element,A=null,I=null,k=null;function B(H){H.touches&&H.touches[0]&&(H[s]=H.touches[0]["page"+x.toUpperCase()]),qM===d&&(C[m]=A+k*(H[s]-I),qte(e,x),Jg(e),H.stopPropagation(),H.preventDefault())}function j(){Hte(e,x),e[T].classList.remove($a.state.clicking),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",B),document.removeEventListener("touchend",j),qM=null}function V(H){qM===null&&(qM=d,A=C[m],H.touches&&(H[s]=H.touches[0]["page"+x.toUpperCase()]),I=H[s],k=(e[r]-e[n])/(e[c]-e[i]),H.touches?(document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",j)):(document.addEventListener("mousemove",B),document.addEventListener("mouseup",j)),e[T].classList.add($a.state.clicking)),H.stopPropagation(),H.cancelable&&H.preventDefault()}e[d].addEventListener("mousedown",V),e[d].addEventListener("touchstart",V)}function $Oe(e){var t=e.element,n=function(){return av(t,":hover")},r=function(){return av(e.scrollbarX,":focus")||av(e.scrollbarY,":focus")};function s(c,d){var i=Math.floor(t.scrollTop);if(c===0){if(!e.scrollbarYActive)return!1;if(i===0&&d>0||i>=e.contentHeight-e.containerHeight&&d<0)return!e.settings.wheelPropagation}var m=t.scrollLeft;if(d===0){if(!e.scrollbarXActive)return!1;if(m===0&&c<0||m>=e.contentWidth-e.containerWidth&&c>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)&&!(!n()&&!r())){var d=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(d){if(d.tagName==="IFRAME")d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(FOe(d))return}var i=0,m=0;switch(c.which){case 37:c.metaKey?i=-e.contentWidth:c.altKey?i=-e.containerWidth:i=-30;break;case 38:c.metaKey?m=e.contentHeight:c.altKey?m=e.containerHeight:m=30;break;case 39:c.metaKey?i=e.contentWidth:c.altKey?i=e.containerWidth:i=30;break;case 40:c.metaKey?m=-e.contentHeight:c.altKey?m=-e.containerHeight:m=-30;break;case 32:c.shiftKey?m=e.containerHeight:m=-e.containerHeight;break;case 33:m=e.containerHeight;break;case 34:m=-e.containerHeight;break;case 36:m=e.contentHeight;break;case 35:m=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&i!==0||e.settings.suppressScrollY&&m!==0||(t.scrollTop-=m,t.scrollLeft+=i,Jg(e),s(i,m)&&c.preventDefault())}})}function UOe(e){var t=e.element;function n(d,i){var m=Math.floor(t.scrollTop),x=t.scrollTop===0,T=m+t.offsetHeight===t.scrollHeight,C=t.scrollLeft===0,A=t.scrollLeft+t.offsetWidth===t.scrollWidth,I;return Math.abs(i)>Math.abs(d)?I=x||T:I=C||A,I?!e.settings.wheelPropagation:!0}function r(d){var i=d.deltaX,m=-1*d.deltaY;return(typeof i>"u"||typeof m>"u")&&(i=-1*d.wheelDeltaX/6,m=d.wheelDeltaY/6),d.deltaMode&&d.deltaMode===1&&(i*=10,m*=10),i!==i&&m!==m&&(i=0,m=d.wheelDelta),d.shiftKey?[-m,-i]:[i,m]}function s(d,i,m){if(!Ob.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(d))return!1;for(var x=d;x&&x!==t;){if(x.classList.contains($a.element.consuming))return!0;var T=sm(x);if(m&&T.overflowY.match(/(scroll|auto)/)){var C=x.scrollHeight-x.clientHeight;if(C>0&&(x.scrollTop>0&&m<0||x.scrollTop<C&&m>0))return!0}if(i&&T.overflowX.match(/(scroll|auto)/)){var A=x.scrollWidth-x.clientWidth;if(A>0&&(x.scrollLeft>0&&i<0||x.scrollLeft<A&&i>0))return!0}x=x.parentNode}return!1}function c(d){var i=r(d),m=i[0],x=i[1];if(!s(d.target,m,x)){var T=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(x?t.scrollTop-=x*e.settings.wheelSpeed:t.scrollTop+=m*e.settings.wheelSpeed,T=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(m?t.scrollLeft+=m*e.settings.wheelSpeed:t.scrollLeft-=x*e.settings.wheelSpeed,T=!0):(t.scrollTop-=x*e.settings.wheelSpeed,t.scrollLeft+=m*e.settings.wheelSpeed),Jg(e),T=T||n(m,x),T&&!d.ctrlKey&&(d.stopPropagation(),d.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",c):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",c)}function qOe(e){if(!Ob.supportsTouch&&!Ob.supportsIePointer)return;var t=e.element,n={startOffset:{},startTime:0,speed:{},easingLoop:null};function r(C,A){var I=Math.floor(t.scrollTop),k=t.scrollLeft,B=Math.abs(C),j=Math.abs(A);if(j>B){if(A<0&&I===e.contentHeight-e.containerHeight||A>0&&I===0)return window.scrollY===0&&A>0&&Ob.isChrome}else if(B>j&&(C<0&&k===e.contentWidth-e.containerWidth||C>0&&k===0))return!0;return!0}function s(C,A){t.scrollTop-=A,t.scrollLeft-=C,Jg(e)}function c(C){return C.targetTouches?C.targetTouches[0]:C}function d(C){return C.target===e.scrollbarX||C.target===e.scrollbarY||C.pointerType&&C.pointerType==="pen"&&C.buttons===0?!1:!!(C.targetTouches&&C.targetTouches.length===1||C.pointerType&&C.pointerType!=="mouse"&&C.pointerType!==C.MSPOINTER_TYPE_MOUSE)}function i(C){if(d(C)){var A=c(C);n.startOffset.pageX=A.pageX,n.startOffset.pageY=A.pageY,n.startTime=new Date().getTime(),n.easingLoop!==null&&clearInterval(n.easingLoop)}}function m(C,A,I){if(!t.contains(C))return!1;for(var k=C;k&&k!==t;){if(k.classList.contains($a.element.consuming))return!0;var B=sm(k);if(I&&B.overflowY.match(/(scroll|auto)/)){var j=k.scrollHeight-k.clientHeight;if(j>0&&(k.scrollTop>0&&I<0||k.scrollTop<j&&I>0))return!0}if(A&&B.overflowX.match(/(scroll|auto)/)){var V=k.scrollWidth-k.clientWidth;if(V>0&&(k.scrollLeft>0&&A<0||k.scrollLeft<V&&A>0))return!0}k=k.parentNode}return!1}function x(C){if(d(C)){var A=c(C),I={pageX:A.pageX,pageY:A.pageY},k=I.pageX-n.startOffset.pageX,B=I.pageY-n.startOffset.pageY;if(m(C.target,k,B))return;s(k,B),n.startOffset=I;var j=new Date().getTime(),V=j-n.startTime;V>0&&(n.speed.x=k/V,n.speed.y=B/V,n.startTime=j),r(k,B)&&C.cancelable&&C.preventDefault()}}function T(){e.settings.swipeEasing&&(clearInterval(n.easingLoop),n.easingLoop=setInterval(function(){if(e.isInitialized){clearInterval(n.easingLoop);return}if(!n.speed.x&&!n.speed.y){clearInterval(n.easingLoop);return}if(Math.abs(n.speed.x)<.01&&Math.abs(n.speed.y)<.01){clearInterval(n.easingLoop);return}s(n.speed.x*30,n.speed.y*30),n.speed.x*=.8,n.speed.y*=.8},10))}Ob.supportsTouch?(e.event.bind(t,"touchstart",i),e.event.bind(t,"touchmove",x),e.event.bind(t,"touchend",T)):Ob.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",i),e.event.bind(t,"pointermove",x),e.event.bind(t,"pointerup",T)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",i),e.event.bind(t,"MSPointerMove",x),e.event.bind(t,"MSPointerUp",T)))}var HOe=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},WOe={"click-rail":NOe,"drag-thumb":VOe,keyboard:$Oe,wheel:UOe,touch:qOe},kE=function(t,n){var r=this;if(n===void 0&&(n={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add($a.main),this.settings=HOe();for(var s in n)this.settings[s]=n[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var c=function(){return t.classList.add($a.state.focus)},d=function(){return t.classList.remove($a.state.focus)};this.isRtl=sm(t).direction==="rtl",this.isRtl===!0&&t.classList.add($a.rtl),this.isNegativeScroll=function(){var x=t.scrollLeft,T=null;return t.scrollLeft=-1,T=t.scrollLeft<0,t.scrollLeft=x,T}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new B1,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=$M($a.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=$M($a.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",c),this.event.bind(this.scrollbarX,"blur",d),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var i=sm(this.scrollbarXRail);this.scrollbarXBottom=parseInt(i.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Ys(i.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Ys(i.borderLeftWidth)+Ys(i.borderRightWidth),wu(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Ys(i.marginLeft)+Ys(i.marginRight),wu(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=$M($a.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=$M($a.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",c),this.event.bind(this.scrollbarY,"blur",d),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var m=sm(this.scrollbarYRail);this.scrollbarYRight=parseInt(m.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Ys(m.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?BOe(this.scrollbarY):null,this.railBorderYWidth=Ys(m.borderTopWidth)+Ys(m.borderBottomWidth),wu(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Ys(m.marginTop)+Ys(m.marginBottom),wu(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(x){return WOe[x](r)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(x){return r.onScroll(x)}),Jg(this)};kE.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,wu(this.scrollbarXRail,{display:"block"}),wu(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Ys(sm(this.scrollbarXRail).marginLeft)+Ys(sm(this.scrollbarXRail).marginRight),this.railYMarginHeight=Ys(sm(this.scrollbarYRail).marginTop)+Ys(sm(this.scrollbarYRail).marginBottom),wu(this.scrollbarXRail,{display:"none"}),wu(this.scrollbarYRail,{display:"none"}),Jg(this),BR(this,"top",0,!1,!0),BR(this,"left",0,!1,!0),wu(this.scrollbarXRail,{display:""}),wu(this.scrollbarYRail,{display:""}))};kE.prototype.onScroll=function(t){this.isAlive&&(Jg(this),BR(this,"top",this.element.scrollTop-this.lastScrollTop),BR(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};kE.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),Wb(this.scrollbarX),Wb(this.scrollbarY),Wb(this.scrollbarXRail),Wb(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};kE.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const GOe=Object.freeze(Object.defineProperty({__proto__:null,default:kE},Symbol.toStringTag,{value:"Module"})),YOe=ple(GOe);var AH;function XOe(){return AH||(AH=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(j){for(var V=1;V<arguments.length;V++){var H=arguments[V];for(var G in H)Object.prototype.hasOwnProperty.call(H,G)&&(j[G]=H[G])}return j},r=function(){function j(V,H){for(var G=0;G<H.length;G++){var X=H[G];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(V,X.key,X)}}return function(V,H,G){return H&&j(V.prototype,H),G&&j(V,G),V}}(),s=Fh(),c=x(s),d=cZ(),i=YOe,m=x(i);function x(j){return j&&j.__esModule?j:{default:j}}function T(j,V){var H={};for(var G in j)V.indexOf(G)>=0||Object.prototype.hasOwnProperty.call(j,G)&&(H[G]=j[G]);return H}function C(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}function A(j,V){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:j}function I(j,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);j.prototype=Object.create(V&&V.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(j,V):j.__proto__=V)}var k={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(k);var B=function(j){I(V,j);function V(H){C(this,V);var G=A(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,H));return G.handleRef=G.handleRef.bind(G),G._handlerByEvent={},G}return r(V,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new m.default(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(G){this._updateEventHook(G),this.updateScroll(),G.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var G=this;Object.keys(this._handlerByEvent).forEach(function(X){var Q=G._handlerByEvent[X];Q&&G._container.removeEventListener(X,Q,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var G=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(k).forEach(function(Q){var ee=G.props[k[Q]],ce=X[k[Q]];if(ee!==ce){if(ce){var fe=G._handlerByEvent[Q];G._container.removeEventListener(Q,fe,!1),G._handlerByEvent[Q]=null}if(ee){var ue=function(){return ee(G._container)};G._container.addEventListener(Q,ue,!1),G._handlerByEvent[Q]=ue}}})}},{key:"_updateClassName",value:function(){var G=this.props.className,X=this._container.className.split(" ").filter(function(Q){return Q.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container"+(G?" "+G:"")+(X?" "+X:""))}},{key:"updateScroll",value:function(){this.props.onSync(this._ps)}},{key:"handleRef",value:function(G){this._container=G,this.props.containerRef(G)}},{key:"render",value:function(){var G=this.props;G.className;var X=G.style;G.option,G.options,G.containerRef,G.onScrollY,G.onScrollX,G.onScrollUp,G.onScrollDown,G.onScrollLeft,G.onScrollRight,G.onYReachStart,G.onYReachEnd,G.onXReachStart,G.onXReachEnd;var Q=G.component;G.onSync;var ee=G.children,ce=T(G,["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"]),fe=Q;return c.default.createElement(fe,n({style:X,ref:this.handleRef},ce),ee)}}]),V}(s.Component);t.default=B,B.defaultProps={className:"",style:void 0,option:void 0,options:void 0,containerRef:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,onSync:function(V){return V.update()},component:"div"},B.propTypes={children:d.PropTypes.node.isRequired,className:d.PropTypes.string,style:d.PropTypes.object,option:d.PropTypes.object,options:d.PropTypes.object,containerRef:d.PropTypes.func,onScrollY:d.PropTypes.func,onScrollX:d.PropTypes.func,onScrollUp:d.PropTypes.func,onScrollDown:d.PropTypes.func,onScrollLeft:d.PropTypes.func,onScrollRight:d.PropTypes.func,onYReachStart:d.PropTypes.func,onYReachEnd:d.PropTypes.func,onXReachStart:d.PropTypes.func,onXReachEnd:d.PropTypes.func,onSync:d.PropTypes.func,component:d.PropTypes.string},e.exports=t.default}(VM,VM.exports)),VM.exports}var RH;function ZOe(){return RH||(RH=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=XOe(),r=s(n);function s(c){return c&&c.__esModule?c:{default:c}}t.default=r.default,e.exports=t.default}(NM,NM.exports)),NM.exports}var KOe=ZOe();const QOe=Ls(KOe);function JOe(){return Zo(),z.jsx(L0,{sx:{bgcolor:"primary.light",mb:2.75,overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:157,height:157,bgcolor:"primary.200",borderRadius:"50%",top:-105,right:-96}}})}const eLe=U.memo(JOe);rt.number,rt.any;const Gte=Gi(z.jsx("circle",{cx:"12",cy:"12",r:"8"}));function cP({item:e,level:t,isParents:n=!1,setSelectedID:r}){const s=Zo();D1(s.breakpoints.down("md"));const c=U.useRef(null),{pathname:d}=Ed(),{borderRadius:i}=F1(),{menuMaster:m}=lx(),x=m.isDashboardDrawerOpened,T=!!$g({path:e!=null&&e.link?e.link:e.url,end:!1},d),[C,A]=U.useState(!1),I=()=>{const G=c.current&&c.current.scrollWidth>c.current.clientWidth;A(G)};U.useEffect(()=>{I(),window.addEventListener("resize",I),window.removeEventListener("resize",I)},[]);const k=e==null?void 0:e.icon,B=e!=null&&e.icon?z.jsx(k,{stroke:1.5,size:x?"20px":"24px",style:{...n&&{fontSize:20,stroke:"1.5"}}}):z.jsx(Gte,{sx:{width:T?8:6,height:T?8:6},fontSize:t>0?"inherit":"medium"});let j="_self";e.target&&(j="_blank");const V=()=>{n&&r&&r()},H="secondary.main";return z.jsx(z.Fragment,{children:z.jsxs(GN,{component:iv,to:e.url,target:j,disabled:e.disabled,disableRipple:!x,sx:{zIndex:1201,borderRadius:`${i}px`,mb:.5,...x&&t!==1&&{ml:`${t*18}px`},...!x&&{pl:1.25},...x&&t===1&&{"&:hover":{bgcolor:"secondary.light"},"&.Mui-selected":{bgcolor:"secondary.light",color:H,"&:hover":{color:H,bgcolor:"secondary.light"}}},...(!x||t!==1)&&{py:t===1?0:1,"&:hover":{bgcolor:"transparent"},"&.Mui-selected":{"&:hover":{bgcolor:"transparent"},bgcolor:"transparent"}}},selected:T,onClick:()=>V(),children:[z.jsx(bd,{"aria-label":"theme-icon",sx:{borderRadius:`${i}px`},disableRipple:x,children:z.jsx(XN,{sx:{minWidth:t===1?36:18,color:T?H:"text.primary",...!x&&t===1&&{borderRadius:`${i}px`,width:46,height:46,alignItems:"center",justifyContent:"center","&:hover":{bgcolor:"secondary.light"},...T&&{bgcolor:"secondary.light","&:hover":{bgcolor:"secondary.light"}}}},children:B})}),(x||!x&&t!==1)&&z.jsx(nT,{title:e.title,disableHoverListener:!C,children:z.jsx(XD,{primary:z.jsx(En,{ref:c,noWrap:!0,color:"inherit",sx:{fontSize:T?"13px":"12px",overflow:"hidden",textOverflow:"ellipsis",width:200},children:e.title}),secondary:e.caption&&z.jsx(En,{variant:"caption",gutterBottom:!0,sx:{display:"block",...s.typography.subMenuCaption},children:e.caption})})}),x&&e.chip&&z.jsx(yd,{color:e.chip.color,variant:e.chip.variant,size:e.chip.size,label:e.chip.label,avatar:e.chip.avatar&&z.jsx(sx,{children:e.chip.avatar})})]})})}cP.propTypes={item:rt.any,level:rt.number,isParents:rt.bool,setSelectedID:rt.func};function j5({menu:e,level:t,parentId:n}){var we;const r=Zo(),s=U.useRef(null),{borderRadius:c}=F1(),{menuMaster:d}=lx(),i=d.isDashboardDrawerOpened,[m,x]=U.useState(!1),[T,C]=U.useState(null),[A,I]=U.useState(null),k=Me=>{I(null),i?(x(!m),C(T?null:e.id)):I(Me==null?void 0:Me.currentTarget)},B=!!A,j=()=>{x(!1),B||e.url||C(null),I(null)},{pathname:V}=Ed(),H=(Me,Se)=>{Me.forEach(Ae=>{Ae.url===V&&(x(!0),C(Se))})};U.useEffect(()=>{x(!1),B?I(null):C(null),e.children&&e.children.forEach(Me=>{var Se;(Se=Me.children)!=null&&Se.length&&H(Me.children,e.id),Me.link&&$g({path:Me==null?void 0:Me.link,end:!1},V)&&(C(e.id),x(!0)),Me.url===V&&(C(e.id),x(!0))})},[V,e.children]);const[G,X]=U.useState(!1),Q=()=>{const Me=s.current&&s.current.scrollWidth>s.current.clientWidth;X(Me)};U.useEffect(()=>{Q(),window.addEventListener("resize",Q),window.removeEventListener("resize",Q)},[]),U.useEffect(()=>{e.url===V&&(C(e.id),I(null),x(!0))},[V,e]);const ee=(we=e.children)==null?void 0:we.map(Me=>{switch(Me.type){case"collapse":return z.jsx(j5,{menu:Me,level:t+1,parentId:n},Me.id);case"item":return z.jsx(cP,{item:Me,level:t+1},Me.id);default:return z.jsx(En,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},Me.id)}}),ce=T===e.id,fe=e.icon,ue=e.icon?z.jsx(fe,{strokeWidth:1.5,size:i?"20px":"24px"}):z.jsx(Gte,{sx:{width:ce?8:6,height:ce?8:6},fontSize:t>0?"inherit":"medium"}),ae=i?z.jsx(Bke,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}):z.jsx(Ste,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}),xe="secondary.main";return z.jsxs(z.Fragment,{children:[z.jsxs(GN,{sx:{zIndex:1201,borderRadius:`${c}px`,mb:.5,...i&&t!==1&&{ml:`${t*18}px`},...!i&&{pl:1.25},...i&&t===1&&{"&:hover":{bgcolor:"secondary.light"},"&.Mui-selected":{bgcolor:"secondary.light",color:xe,"&:hover":{color:xe,bgcolor:"secondary.light"}}},...(!i||t!==1)&&{py:t===1?0:1,"&:hover":{bgcolor:"transparent"},"&.Mui-selected":{"&:hover":{bgcolor:"transparent"},bgcolor:"transparent"}}},selected:ce,...!i&&{onMouseEnter:k,onMouseLeave:j},onClick:k,children:[ue&&z.jsx(XN,{sx:{minWidth:t===1?36:18,color:ce?xe:"text.primary",...!i&&t===1&&{borderRadius:`${c}px`,width:46,height:46,alignItems:"center",justifyContent:"center","&:hover":{bgcolor:"secondary.light"},...ce&&{bgcolor:"secondary.light","&:hover":{bgcolor:"secondary.light"}}}},children:ue}),(i||!i&&t!==1)&&z.jsx(nT,{title:e.title,disableHoverListener:!G,children:z.jsx(XD,{primary:z.jsx(En,{ref:s,noWrap:!0,variant:ce?"h5":"body1",color:"inherit",sx:{overflow:"hidden",textOverflow:"ellipsis",width:120},children:e.title}),secondary:e.caption&&z.jsx(En,{variant:"caption",gutterBottom:!0,sx:{display:"block",...r.typography.subMenuCaption},children:e.caption})})}),B||m?ae:z.jsx(Fke,{stroke:1.5,size:"16px",style:{marginTop:"auto",marginBottom:"auto"}}),!i&&z.jsx(EE,{open:B,anchorEl:A,placement:"right-start",modifiers:[{name:"offset",options:{offset:[-12,0]}}],sx:{overflow:"visible",zIndex:2001,minWidth:180,"&:before":{content:'""',bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:120,borderLeft:"1px solid",borderBottom:"1px solid",borderColor:"divider"}},children:({TransitionProps:Me})=>z.jsx(z5,{in:B,...Me,children:z.jsx(fa,{sx:{overflow:"hidden",mt:1.5,boxShadow:r.shadows[8],backgroundImage:"none"},children:z.jsx(rJ,{onClickAway:j,children:z.jsx(Pn,{children:ee})})})})})]}),i&&z.jsx(_R,{in:m,timeout:"auto",unmountOnExit:!0,children:m&&z.jsx(Rv,{disablePadding:!0,sx:{position:"relative","&:after":{content:"''",position:"absolute",left:"25px",top:0,height:"100%",width:"1px",opacity:1,bgcolor:"primary.light"}},children:ee})})]})}j5.propTypes={menu:rt.any,level:rt.number,parentId:rt.string};function Yte({item:e,lastItem:t,remItems:n,lastItemId:r,setSelectedID:s}){var V;const c=Zo(),{pathname:d}=Ed(),{menuMaster:i}=lx(),m=i.isDashboardDrawerOpened,[x,T]=U.useState(null),[C,A]=U.useState(e),I=!!x;U.useEffect(()=>{if(t)if(e.id===r){const H={...e},G=n.map(X=>X.elements);H.children=G.flat(1),A(H)}else A(e)},[e,t,n,r]);const k=(H,G)=>{H.forEach(X=>{var Q;(Q=X.children)!=null&&Q.length&&k(X.children,C.id),X!=null&&X.url&&$g({path:X!=null&&X.link?X.link:X.url,end:!0},d)&&s(G)})},B=H=>{(H.children?H.children:[]).forEach(X=>{var Q;(Q=X==null?void 0:X.children)!=null&&Q.length&&k(X.children,C.id),X!=null&&X.url&&$g({path:X!=null&&X.link?X.link:X.url,end:!0},d)&&s(C.id)}),H!=null&&H.url&&$g({path:H!=null&&H.link?H.link:H.url,end:!0},d)&&s(C.id)};U.useEffect(()=>{B(C),I&&T(null)},[d,C]);const j=(V=C.children)==null?void 0:V.map(H=>{switch(H==null?void 0:H.type){case"collapse":return z.jsx(j5,{menu:H,level:1,parentId:C.id},H.id);case"item":return z.jsx(cP,{item:H,level:1},H.id);default:return z.jsx(En,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},H==null?void 0:H.id)}});return z.jsxs(z.Fragment,{children:[z.jsx(Rv,{disablePadding:!m,subheader:C.title&&m&&z.jsxs(En,{variant:"caption",gutterBottom:!0,sx:{display:"block",...c.typography.menuCaption},children:[C.title,C.caption&&z.jsx(En,{variant:"caption",gutterBottom:!0,sx:{display:"block",...c.typography.subMenuCaption},children:C.caption})]}),children:j}),m&&z.jsx(xc,{sx:{mt:.25,mb:1.25}})]})}Yte.propTypes={item:rt.any,lastItem:rt.number,remItems:rt.array,lastItemId:rt.string,selectedID:rt.oneOfType([rt.any,rt.string]),setSelectedID:rt.oneOfType([rt.any,rt.func])};const Xte=e=>({id:"platform",title:"Platform",type:"group",children:[{id:"util-typography",title:"Exterior (Map View)",type:"item",url:`/project/${e}/View`,icon:Pte,breadcrumbs:!1},{id:"util-color",title:"Compare View",type:"item",url:`/project/${e}/compare`,icon:Cte,breadcrumbs:!1},{id:"progressReport",title:"Progress Report",type:"item",url:`/project/${e}/dpr`,icon:Mte,breadcrumbs:!1},{id:"issueTaggingAndCoordination",title:"Coordination Logs",type:"item",url:`/project/${e}/issue`,icon:Ate,breadcrumbs:!1},{id:"360viewer",title:"Interior (360 View) ",type:"item",url:`/project/${e}/360view`,icon:Dte,breadcrumbs:!1},{id:"projectFiles",title:"Project Files",type:"item",url:`/project/${e}/files`,icon:Ete,breadcrumbs:!1},{id:"projectTeam",title:"Project Team",type:"item",url:`/project/${e}/team`,icon:Rte,breadcrumbs:!1}]}),yO={IconDroneOff:Pv,IconWindmill:Xke,IconDatabaseImport:jke},Zte=e=>{const t=[{id:"Projects",title:"Projects",type:"item",url:"/project",icon:yO.IconDroneOff,breadcrumbs:!1}];return e==="admin"&&(t.push({id:"UserControlPanel",title:"User Control Panel",type:"item",url:"/user-control-panel",icon:yO.IconWindmill,breadcrumbs:!1}),t.push({id:"WorkDayList",title:"Data Management",type:"item",url:"/work-days",icon:yO.IconDatabaseImport,breadcrumbs:!1})),{id:"superAdminList",type:"group",children:t}},Kte={id:"pages",title:"",caption:"",icon:gH,type:"group",children:[{id:"Settings",title:"Settings",type:"collapse",icon:gH,children:[{id:"Account",title:"Account",type:"item",url:"/pages/login",target:!0},{id:"Privacy",title:"Privacy",type:"item",url:"/pages/login",target:!0},{id:"Security",title:"Security",type:"item",url:"/pages/register",target:!0}]}]},vO={items:[Zte(),Xte(),Kte]};function tLe(){const{menuMaster:e}=lx(),t=e.isDashboardDrawerOpened,[n,r]=U.useState(""),s=null,c=Ed(),d=Pu(I=>I.project.selectedProjectId),i=Pu(I=>I.auth.user.type);let m=[Zte(i)];/^\/project\/*\//.test(c.pathname)&&m.push(Xte(d)),m.push(Kte);let x=m.length-1,T=[],C;const A=m.slice(0,x+1).map((I,k)=>{switch(I.type){case"group":return I.url&&I.id!==C?z.jsxs(Rv,{children:[z.jsx(cP,{item:I,level:1,isParents:!0,setSelectedID:()=>r("")}),k!==0&&z.jsx(xc,{sx:{py:.5}})]},I.id):z.jsx(Yte,{setSelectedID:r,selectedID:n,item:I,lastItem:s,remItems:T,lastItemId:C},I.id);default:return z.jsx(En,{variant:"h6",color:"error",align:"center",children:"Menu Items Error"},I.id)}});return z.jsx(Pn,{...t&&{sx:{mt:1.5}},children:A})}const DH=U.memo(tLe),DZe=3,D0=260;function PH(e){return{width:D0,borderRight:"none",zIndex:1099,background:e.palette.background.default,overflowX:"hidden",boxShadow:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen+200})}}function IH(e){return{borderRight:"none",zIndex:1099,background:e.palette.background.default,overflowX:"hidden",width:72,height:"auto",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen+200})}}const nLe=Ft(dJ,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>({width:D0,borderRight:"0px",flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{...PH(e),"& .MuiDrawer-paper":PH(e)},...!t&&{...IH(e),"& .MuiDrawer-paper":IH(e)}}));function rLe(){const e=D1(m=>m.breakpoints.down("md")),t=Pu(m=>m.auth.user),{menuMaster:n}=lx(),r=n.isDashboardDrawerOpened,{miniDrawer:s,mode:c}=F1(),d=U.useMemo(()=>z.jsx(Pn,{sx:{display:"flex",p:2},children:z.jsx(wte,{})}),[]),i=U.useMemo(()=>{var T,C;const m=z.jsxs(z.Fragment,{children:[z.jsx(eLe,{}),z.jsx(Ns,{direction:"row",sx:{justifyContent:"space-between",mb:2},children:z.jsx(yd,{avatar:z.jsx(sx,{alt:`${t.firstName} ${t.lastName}`,sx:{bgcolor:"text.secondary",width:32,height:32,fontSize:10},children:`${((T=t.firstName)==null?void 0:T[0])??""}${((C=t.lastName)==null?void 0:C[0])??""}`}),label:z.jsxs(Pn,{display:"flex",flexDirection:"column",lineHeight:1.2,children:[z.jsxs(En,{variant:"body1",fontWeight:"500",children:[t.firstName," ",t.lastName]}),z.jsx(En,{variant:"caption",color:"text.secondary",children:t.designation})]}),variant:"outlined",sx:{border:"none",height:"100%",width:"100%",alignItems:"center",justifyContent:"flex-start",gap:2,"& .MuiChip-label":{display:"flex",flexDirection:"column",padding:0}}})})]});let x={paddingLeft:"0px",paddingRight:"0px",marginTop:"20px"};return r&&(x={paddingLeft:"16px",paddingRight:"16px",marginTop:"0px"}),z.jsx(z.Fragment,{children:e?z.jsxs(Pn,{sx:x,children:[z.jsx(DH,{}),r&&m]}):z.jsxs(QOe,{style:{height:"calc(100vh - 88px)",...x},children:[z.jsx(DH,{}),r&&m]})})},[e,r,c]);return z.jsx(Pn,{component:"nav",sx:{flexShrink:{md:0},width:{xs:"auto",md:D0}},"aria-label":"mailbox folders",children:e||s&&r?z.jsxs(dJ,{variant:e?"temporary":"persistent",anchor:"left",open:r,onClose:()=>FR(!r),sx:{"& .MuiDrawer-paper":{mt:e?0:11,zIndex:1099,width:D0,bgcolor:"background.default",color:"text.primary",borderRight:"none",height:"auto"}},ModalProps:{keepMounted:!0},color:"inherit",children:[e&&d,i]}):z.jsx(nLe,{variant:"permanent",open:r,children:z.jsx(Pn,{sx:{mt:10},children:i})})})}const iLe=U.memo(rLe),oLe=Ft("main",{shouldForwardProp:e=>e!=="open"&&e!=="borderRadius"})(({theme:e,open:t,borderRadius:n})=>({backgroundColor:e.palette.grey[100],minWidth:"1%",width:"100%",minHeight:"calc(100vh - 88px)",flexGrow:1,padding:20,marginTop:88,marginRight:20,borderRadius:`${n}px`,borderBottomLeftRadius:0,borderBottomRightRadius:0,...!t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.shorter+200}),[e.breakpoints.up("md")]:{marginLeft:-188,width:`calc(100% - ${D0}px)`,marginTop:88}},...t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shorter+200}),marginLeft:0,marginTop:88,width:`calc(100% - ${D0}px)`,[e.breakpoints.up("md")]:{marginTop:88}},[e.breakpoints.down("md")]:{marginLeft:20,padding:16,marginTop:88,...!t&&{width:`calc(100% - ${D0}px)`}},[e.breakpoints.down("sm")]:{marginLeft:10,marginRight:10}})),_O=Gi([z.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3zM7 9H4V5h3zm10 6h3v4h-3zm0-10h3v4h-3z"},"0"),z.jsx("path",{d:"M7 5v4H4V5zm13 0v4h-3V5zm0 10v4h-3v-4z",opacity:".3"},"1")]),kH=Gi(z.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),OH=Gi([z.jsx("path",{d:"M12 3 2 12h3v8h6v-6h2v6h6v-8h3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5z"},"0"),z.jsx("path",{d:"M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z",opacity:".3"},"1")]);function VS({title:e}){return z.jsx(Ii,{children:z.jsx(En,{variant:"h4",sx:{fontWeight:500},children:e})})}function ry({card:e,custom:t=!1,divider:n=!1,heading:r,icon:s=!0,icons:c,links:d,maxItems:i,rightAlign:m=!0,separator:x=Ste,title:T=!0,titleBottom:C,sx:A,...I}){const k=Zo(),B=Ed(),[j,V]=U.useState(),[H,G]=U.useState(),X={marginRight:6,marginTop:-2,width:"1rem",height:"1rem",color:k.palette.secondary.main},Q={display:"flex",color:"grey.900",textDecoration:"none",alignContent:"center",alignItems:"center"};let ee=B.pathname;U.useEffect(()=>{var _e;(_e=vO==null?void 0:vO.items)==null||_e.map(Pe=>(Pe.type&&Pe.type==="group"&&(Pe!=null&&Pe.url&&Pe.url===ee?(V(Pe),G(Pe)):ce(Pe)),!1))});const ce=_e=>{!t&&_e.children&&_e.children.filter(Pe=>(Pe.type&&Pe.type==="collapse"?(ce(Pe),Pe.url===ee&&(V(Pe),G(Pe))):Pe.type&&Pe.type==="item"&&ee===Pe.url&&(V(_e),G(Pe)),!1))},fe=x,ue=x?z.jsx(fe,{stroke:1.5,size:"16px"}):z.jsx(Gke,{stroke:1.5,size:"16px"});let ae,xe,we=z.jsx(En,{}),Me="",Se,Ae;if(j&&j.type==="collapse"&&(Se=j.icon?j.icon:_O,ae=z.jsxs(En,{...j.url&&{component:iv,to:j.url},variant:"h6",noWrap:!0,sx:{overflow:"hidden",lineHeight:1.5,mb:-.625,textOverflow:"ellipsis",maxWidth:{xs:102,sm:"unset"},display:"inline-block"},color:window.location.pathname===j.url?"text.primary":"text.secondary",children:[c&&z.jsx(Se,{style:{...X}}),j.title]})),!t&&j&&j.type==="collapse"&&j.breadcrumbs===!0&&(we=z.jsxs(L0,{sx:e===!1?{mb:3,bgcolor:"transparent",...A}:{mb:3,bgcolor:"background.default",...A},...I,children:[z.jsx(Pn,{sx:{p:1.25,px:e===!1?0:2},children:z.jsxs(Ii,{container:!0,direction:m?"row":"column",justifyContent:m?"space-between":"flex-start",alignItems:m?"center":"flex-start",spacing:1,children:[T&&!C&&z.jsx(VS,{title:j.title}),z.jsx(Ii,{children:z.jsxs(Fk,{"aria-label":"breadcrumb",maxItems:i||8,separator:ue,sx:{"& .MuiBreadcrumbs-separator":{width:16,ml:1.25,mr:1.25}},children:[z.jsxs(En,{component:iv,to:"/",color:"textSecondary",variant:"h6",sx:Q,children:[c&&z.jsx(OH,{style:X}),s&&!c&&z.jsx(kH,{style:{...X,marginRight:0}}),(!s||c)&&"Dashboard"]}),ae]})}),T&&C&&z.jsx(VS,{title:j.title})]})}),e===!1&&n!==!1&&z.jsx(xc,{sx:{mt:2}})]})),H&&H.type==="item"||(H==null?void 0:H.type)==="group"&&(H!=null&&H.url)||t){Me=H==null?void 0:H.title,Ae=H!=null&&H.icon?H.icon:_O,xe=z.jsxs(En,{variant:"h6",noWrap:!0,sx:{...Q,color:"text.secondary",display:"inline-block",overflow:"hidden",lineHeight:1.5,mb:-.625,textOverflow:"ellipsis",maxWidth:{xs:102,sm:"unset"}},children:[c&&z.jsx(Ae,{style:{...X}}),Me]});let _e=z.jsxs(Fk,{"aria-label":"breadcrumb",maxItems:i||8,separator:ue,sx:{"& .MuiBreadcrumbs-separator":{width:16,mx:.75}},children:[z.jsxs(En,{component:iv,to:"/",color:"textSecondary",variant:"h6",sx:Q,children:[c&&z.jsx(OH,{style:{...X}}),s&&!c&&z.jsx(kH,{style:{...X,marginRight:0}}),(!s||c)&&"Dashboard"]}),ae,xe]});t&&d&&(d==null?void 0:d.length)>0&&(_e=z.jsx(Fk,{"aria-label":"breadcrumb",maxItems:i||8,separator:ue,sx:{"& .MuiBreadcrumbs-separator":{width:16,ml:1.25,mr:1.25}},children:d==null?void 0:d.map((Pe,We)=>(Se=Pe.icon?Pe.icon:_O,z.jsxs(En,{...Pe.to&&{component:iv,to:Pe.to},variant:"h6",sx:Q,color:Pe.to?"text.secondary":"text.primary",children:[Pe.icon&&z.jsx(Se,{style:X}),Pe.title]},We)))})),((H==null?void 0:H.breadcrumbs)!==!1||t)&&(we=z.jsxs(L0,{sx:e===!1?{mb:3,bgcolor:"transparent",...A}:{mb:3,bgcolor:"background.default",...A},...I,children:[z.jsx(Pn,{sx:{p:1.25,px:e===!1?0:2},children:z.jsxs(Ii,{container:!0,direction:m?"row":"column",justifyContent:m?"space-between":"flex-start",alignItems:m?"center":"flex-start",spacing:1,children:[T&&!C&&z.jsx(VS,{title:t?r:H==null?void 0:H.title}),z.jsx(Ii,{children:_e}),T&&C&&z.jsx(VS,{title:t?r:H==null?void 0:H.title})]})}),e===!1&&n!==!1&&z.jsx(xc,{sx:{mt:2}})]}))}return we}VS.propTypes={title:rt.string};ry.propTypes={card:rt.bool,custom:rt.bool,divider:rt.bool,heading:rt.string,icon:rt.bool,icons:rt.bool,links:rt.array,maxItems:rt.number,rightAlign:rt.bool,separator:rt.any,IconChevronRight:rt.any,title:rt.bool,titleBottom:rt.bool,sx:rt.any,others:rt.any};function sLe(){const e=Zo(),t=D1(e.breakpoints.down("md")),{borderRadius:n,miniDrawer:r}=F1(),{menuMaster:s,menuMasterLoading:c}=lx(),d=s==null?void 0:s.isDashboardDrawerOpened;return U.useEffect(()=>{FR(!r)},[r]),U.useEffect(()=>{t&&FR(!1)},[t]),c?z.jsx(pN,{}):z.jsxs(Pn,{sx:{display:"flex"},children:[z.jsx(u1e,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:0,sx:{bgcolor:"background.default"},children:z.jsx(CJ,{sx:{p:2},children:z.jsx(OOe,{})})}),z.jsx(iLe,{}),z.jsx(oLe,{borderRadius:n,open:d,children:z.jsxs(Pn,{sx:{px:{xs:0},minHeight:"calc(100vh - 128px)",display:"flex",flexDirection:"column"},children:[z.jsx(ry,{}),z.jsx(rZ,{})]})})]})}const N5=Gi(z.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),aLe=Gi(z.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),V5=Gi(z.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Qte=6048e5,lLe=864e5,Jte=6e4,ene=36e5,cLe=1e3,HM=43200,LH=1440,zH=Symbol.for("constructDateFrom");function Os(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&zH in e?e[zH](t):e instanceof Date?new e.constructor(t):new Date(t)}function li(e,t){return Os(t||e,e)}function uP(e,t,n){const r=li(e,n==null?void 0:n.in);return isNaN(t)?Os((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function tne(e,t,n){const r=li(e,n==null?void 0:n.in);if(isNaN(t))return Os(e,NaN);if(!t)return r;const s=r.getDate(),c=Os(e,r.getTime());c.setMonth(r.getMonth()+t+1,0);const d=c.getDate();return s>=d?c:(r.setFullYear(c.getFullYear(),c.getMonth(),s),r)}function nne(e,t,n){return Os(e,+li(e)+t)}function uLe(e,t,n){return nne(e,t*ene)}let dLe={};function Iv(){return dLe}function ym(e,t){var i,m,x,T;const n=Iv(),r=(t==null?void 0:t.weekStartsOn)??((m=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((T=(x=n.locale)==null?void 0:x.options)==null?void 0:T.weekStartsOn)??0,s=li(e,t==null?void 0:t.in),c=s.getDay(),d=(c<r?7:0)+c-r;return s.setDate(s.getDate()-d),s.setHours(0,0,0,0),s}function g1(e,t){return ym(e,{...t,weekStartsOn:1})}function rne(e,t){const n=li(e,t==null?void 0:t.in),r=n.getFullYear(),s=Os(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const c=g1(s),d=Os(n,0);d.setFullYear(r,0,4),d.setHours(0,0,0,0);const i=g1(d);return n.getTime()>=c.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function y1(e){const t=li(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function kv(e,...t){const n=Os.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function FT(e,t){const n=li(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function hLe(e,t,n){const[r,s]=kv(n==null?void 0:n.in,e,t),c=FT(r),d=FT(s),i=+c-y1(c),m=+d-y1(d);return Math.round((i-m)/lLe)}function fLe(e,t){const n=rne(e,t),r=Os(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),g1(r)}function pLe(e,t,n){const r=li(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*Jte),r}function mLe(e,t,n){return nne(e,t*1e3)}function gLe(e,t,n){return uP(e,t*7,n)}function yLe(e,t,n){return tne(e,t*12,n)}function PA(e,t){const n=+li(e)-+li(t);return n<0?-1:n>0?1:n}function vLe(e){return Os(e,Date.now())}function _Le(e,t,n){const[r,s]=kv(n==null?void 0:n.in,e,t);return+FT(r)==+FT(s)}function xLe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ine(e){return!(!xLe(e)&&typeof e!="number"||isNaN(+li(e)))}function bLe(e,t,n){const[r,s]=kv(n==null?void 0:n.in,e,t),c=r.getFullYear()-s.getFullYear(),d=r.getMonth()-s.getMonth();return c*12+d}function wLe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function SLe(e,t){return+li(e)-+li(t)}function nj(e,t){const n=li(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function one(e,t){const n=li(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function TLe(e,t){const n=li(e,t==null?void 0:t.in);return+nj(n,t)==+one(n,t)}function ELe(e,t,n){const[r,s,c]=kv(n==null?void 0:n.in,e,e,t),d=PA(s,c),i=Math.abs(bLe(s,c));if(i<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-d*i);let m=PA(s,c)===-d;TLe(r)&&i===1&&PA(r,c)===1&&(m=!1);const x=d*(i-+m);return x===0?0:x}function CLe(e,t,n){const r=SLe(e,t)/1e3;return wLe(n==null?void 0:n.roundingMethod)(r)}function MLe(e,t){const n=li(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function FH(e,t){const n=li(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function sne(e,t){const n=li(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function ALe(e,t){var i,m,x,T;const n=Iv(),r=(t==null?void 0:t.weekStartsOn)??((m=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((T=(x=n.locale)==null?void 0:x.options)==null?void 0:T.weekStartsOn)??0,s=li(e,t==null?void 0:t.in),c=s.getDay(),d=(c<r?-7:0)+6-(c-r);return s.setDate(s.getDate()+d),s.setHours(23,59,59,999),s}const RLe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},DLe=(e,t,n)=>{let r;const s=RLe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function xO(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const PLe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ILe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kLe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OLe={date:xO({formats:PLe,defaultWidth:"full"}),time:xO({formats:ILe,defaultWidth:"full"}),dateTime:xO({formats:kLe,defaultWidth:"full"})},LLe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zLe=(e,t,n,r)=>LLe[e];function vS(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):d;s=e.formattingValues[i]||e.formattingValues[d]}else{const d=e.defaultWidth,i=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[i]||e.values[d]}const c=e.argumentCallback?e.argumentCallback(t):t;return s[c]}}const FLe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BLe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jLe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},NLe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VLe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$Le={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ULe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qLe={ordinalNumber:ULe,era:vS({values:FLe,defaultWidth:"wide"}),quarter:vS({values:BLe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:vS({values:jLe,defaultWidth:"wide"}),day:vS({values:NLe,defaultWidth:"wide"}),dayPeriod:vS({values:VLe,defaultWidth:"wide",formattingValues:$Le,defaultFormattingWidth:"wide"})};function _S(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],c=t.match(s);if(!c)return null;const d=c[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(i)?WLe(i,C=>C.test(d)):HLe(i,C=>C.test(d));let x;x=e.valueCallback?e.valueCallback(m):m,x=n.valueCallback?n.valueCallback(x):x;const T=t.slice(d.length);return{value:x,rest:T}}}function HLe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function WLe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function GLe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],c=t.match(e.parsePattern);if(!c)return null;let d=e.valueCallback?e.valueCallback(c[0]):c[0];d=n.valueCallback?n.valueCallback(d):d;const i=t.slice(s.length);return{value:d,rest:i}}}const YLe=/^(\d+)(th|st|nd|rd)?/i,XLe=/\d+/i,ZLe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},KLe={any:[/^b/i,/^(a|c)/i]},QLe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JLe={any:[/1/i,/2/i,/3/i,/4/i]},eze={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tze={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nze={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rze={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ize={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oze={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sze={ordinalNumber:GLe({matchPattern:YLe,parsePattern:XLe,valueCallback:e=>parseInt(e,10)}),era:_S({matchPatterns:ZLe,defaultMatchWidth:"wide",parsePatterns:KLe,defaultParseWidth:"any"}),quarter:_S({matchPatterns:QLe,defaultMatchWidth:"wide",parsePatterns:JLe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_S({matchPatterns:eze,defaultMatchWidth:"wide",parsePatterns:tze,defaultParseWidth:"any"}),day:_S({matchPatterns:nze,defaultMatchWidth:"wide",parsePatterns:rze,defaultParseWidth:"any"}),dayPeriod:_S({matchPatterns:ize,defaultMatchWidth:"any",parsePatterns:oze,defaultParseWidth:"any"})},OE={code:"en-US",formatDistance:DLe,formatLong:OLe,formatRelative:zLe,localize:qLe,match:sze,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aze(e,t){const n=li(e,t==null?void 0:t.in);return hLe(n,sne(n))+1}function ane(e,t){const n=li(e,t==null?void 0:t.in),r=+g1(n)-+fLe(n);return Math.round(r/Qte)+1}function $5(e,t){var T,C,A,I;const n=li(e,t==null?void 0:t.in),r=n.getFullYear(),s=Iv(),c=(t==null?void 0:t.firstWeekContainsDate)??((C=(T=t==null?void 0:t.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??s.firstWeekContainsDate??((I=(A=s.locale)==null?void 0:A.options)==null?void 0:I.firstWeekContainsDate)??1,d=Os((t==null?void 0:t.in)||e,0);d.setFullYear(r+1,0,c),d.setHours(0,0,0,0);const i=ym(d,t),m=Os((t==null?void 0:t.in)||e,0);m.setFullYear(r,0,c),m.setHours(0,0,0,0);const x=ym(m,t);return+n>=+i?r+1:+n>=+x?r:r-1}function lze(e,t){var i,m,x,T;const n=Iv(),r=(t==null?void 0:t.firstWeekContainsDate)??((m=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((T=(x=n.locale)==null?void 0:x.options)==null?void 0:T.firstWeekContainsDate)??1,s=$5(e,t),c=Os((t==null?void 0:t.in)||e,0);return c.setFullYear(s,0,r),c.setHours(0,0,0,0),ym(c,t)}function U5(e,t){const n=li(e,t==null?void 0:t.in),r=+ym(n,t)-+lze(n,t);return Math.round(r/Qte)+1}function as(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Jy={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return as(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):as(n+1,2)},d(e,t){return as(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return as(e.getHours()%12||12,t.length)},H(e,t){return as(e.getHours(),t.length)},m(e,t){return as(e.getMinutes(),t.length)},s(e,t){return as(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return as(s,t.length)}},Sb={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},BH={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Jy.y(e,t)},Y:function(e,t,n,r){const s=$5(e,r),c=s>0?s:1-s;if(t==="YY"){const d=c%100;return as(d,2)}return t==="Yo"?n.ordinalNumber(c,{unit:"year"}):as(c,t.length)},R:function(e,t){const n=rne(e);return as(n,t.length)},u:function(e,t){const n=e.getFullYear();return as(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return as(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return as(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Jy.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return as(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=U5(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):as(s,t.length)},I:function(e,t,n){const r=ane(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):as(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Jy.d(e,t)},D:function(e,t,n){const r=aze(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):as(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),c=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return as(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),c=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return as(c,t.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return as(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Sb.noon:r===0?s=Sb.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Sb.evening:r>=12?s=Sb.afternoon:r>=4?s=Sb.morning:s=Sb.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Jy.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Jy.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):as(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):as(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Jy.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Jy.s(e,t)},S:function(e,t){return Jy.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return NH(r);case"XXXX":case"XX":return f0(r);case"XXXXX":case"XXX":default:return f0(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return NH(r);case"xxxx":case"xx":return f0(r);case"xxxxx":case"xxx":default:return f0(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+jH(r,":");case"OOOO":default:return"GMT"+f0(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+jH(r,":");case"zzzz":default:return"GMT"+f0(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return as(r,t.length)},T:function(e,t,n){return as(+e,t.length)}};function jH(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),c=r%60;return c===0?n+String(s):n+String(s)+t+as(c,2)}function NH(e,t){return e%60===0?(e>0?"-":"+")+as(Math.abs(e)/60,2):f0(e,t)}function f0(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=as(Math.trunc(r/60),2),c=as(r%60,2);return n+s+t+c}const VH=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lne=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},cze=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return VH(e,t);let c;switch(r){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",VH(r,t)).replace("{{time}}",lne(s,t))},jR={p:lne,P:cze},uze=/^D+$/,dze=/^Y+$/,hze=["D","DD","YY","YYYY"];function cne(e){return uze.test(e)}function une(e){return dze.test(e)}function rj(e,t,n){const r=fze(e,t,n);if(console.warn(r),hze.includes(e))throw new RangeError(r)}function fze(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pze=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mze=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gze=/^'([^]*?)'?$/,yze=/''/g,vze=/[a-zA-Z]/;function dne(e,t,n){var T,C,A,I,k,B,j,V;const r=Iv(),s=(n==null?void 0:n.locale)??r.locale??OE,c=(n==null?void 0:n.firstWeekContainsDate)??((C=(T=n==null?void 0:n.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??r.firstWeekContainsDate??((I=(A=r.locale)==null?void 0:A.options)==null?void 0:I.firstWeekContainsDate)??1,d=(n==null?void 0:n.weekStartsOn)??((B=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:B.weekStartsOn)??r.weekStartsOn??((V=(j=r.locale)==null?void 0:j.options)==null?void 0:V.weekStartsOn)??0,i=li(e,n==null?void 0:n.in);if(!ine(i))throw new RangeError("Invalid time value");let m=t.match(mze).map(H=>{const G=H[0];if(G==="p"||G==="P"){const X=jR[G];return X(H,s.formatLong)}return H}).join("").match(pze).map(H=>{if(H==="''")return{isToken:!1,value:"'"};const G=H[0];if(G==="'")return{isToken:!1,value:_ze(H)};if(BH[G])return{isToken:!0,value:H};if(G.match(vze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+G+"`");return{isToken:!1,value:H}});s.localize.preprocessor&&(m=s.localize.preprocessor(i,m));const x={firstWeekContainsDate:c,weekStartsOn:d,locale:s};return m.map(H=>{if(!H.isToken)return H.value;const G=H.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&une(G)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&cne(G))&&rj(G,t,String(e));const X=BH[G[0]];return X(i,G,s.localize,x)}).join("")}function _ze(e){const t=e.match(gze);return t?t[1].replace(yze,"'"):e}function xze(e,t,n){const r=Iv(),s=(n==null?void 0:n.locale)??r.locale??OE,c=2520,d=PA(e,t);if(isNaN(d))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:d}),[m,x]=kv(n==null?void 0:n.in,...d>0?[t,e]:[e,t]),T=CLe(x,m),C=(y1(x)-y1(m))/1e3,A=Math.round((T-C)/60);let I;if(A<2)return n!=null&&n.includeSeconds?T<5?s.formatDistance("lessThanXSeconds",5,i):T<10?s.formatDistance("lessThanXSeconds",10,i):T<20?s.formatDistance("lessThanXSeconds",20,i):T<40?s.formatDistance("halfAMinute",0,i):T<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):A===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",A,i);if(A<45)return s.formatDistance("xMinutes",A,i);if(A<90)return s.formatDistance("aboutXHours",1,i);if(A<LH){const k=Math.round(A/60);return s.formatDistance("aboutXHours",k,i)}else{if(A<c)return s.formatDistance("xDays",1,i);if(A<HM){const k=Math.round(A/LH);return s.formatDistance("xDays",k,i)}else if(A<HM*2)return I=Math.round(A/HM),s.formatDistance("aboutXMonths",I,i)}if(I=ELe(x,m),I<12){const k=Math.round(A/HM);return s.formatDistance("xMonths",k,i)}else{const k=I%12,B=Math.trunc(I/12);return k<3?s.formatDistance("aboutXYears",B,i):k<9?s.formatDistance("overXYears",B,i):s.formatDistance("almostXYears",B+1,i)}}function bze(e,t){return xze(e,vLe(e),t)}function wze(e,t){return li(e,t==null?void 0:t.in).getDate()}function Sze(e,t){return li(e,t==null?void 0:t.in).getDay()}function hne(e,t){const n=li(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),c=Os(n,0);return c.setFullYear(r,s+1,0),c.setHours(0,0,0,0),c.getDate()}function Tze(){return Object.assign({},Iv())}function Eze(e,t){return li(e,t==null?void 0:t.in).getHours()}function Cze(e,t){const n=li(e,t==null?void 0:t.in).getDay();return n===0?7:n}function Mze(e){return li(e).getMilliseconds()}function Aze(e,t){return li(e,t==null?void 0:t.in).getMinutes()}function Rze(e,t){return li(e,t==null?void 0:t.in).getMonth()}function Dze(e){return li(e).getSeconds()}function Pze(e,t){return li(e,t==null?void 0:t.in).getFullYear()}function bO(e,t){return+li(e)>+li(t)}function wO(e,t){return+li(e)<+li(t)}function Ize(e,t){return+li(e)==+li(t)}function kze(e,t){const n=Oze(t)?new t(0):Os(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}function Oze(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}const Lze=10;class fne{constructor(){Or(this,"subPriority",0)}validate(t,n){return!0}}class zze extends fne{constructor(t,n,r,s,c){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=s,c&&(this.subPriority=c)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class Fze extends fne{constructor(n,r){super();Or(this,"priority",Lze);Or(this,"subPriority",-1);this.context=n||(s=>Os(r,s))}set(n,r){return r.timestampIsSet?n:Os(n,kze(n,this.context))}}class Ko{run(t,n,r,s){const c=this.parse(t,n,r,s);return c?{setter:new zze(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(t,n,r){return!0}}class Bze extends Ko{constructor(){super(...arguments);Or(this,"priority",140);Or(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Sa={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},im={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ta(e,t){return e&&{value:t(e.value),rest:e.rest}}function Zs(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function om(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,c=n[3]?parseInt(n[3],10):0,d=n[5]?parseInt(n[5],10):0;return{value:r*(s*ene+c*Jte+d*cLe),rest:t.slice(n[0].length)}}function pne(e){return Zs(Sa.anyDigitsSigned,e)}function pa(e,t){switch(e){case 1:return Zs(Sa.singleDigit,t);case 2:return Zs(Sa.twoDigits,t);case 3:return Zs(Sa.threeDigits,t);case 4:return Zs(Sa.fourDigits,t);default:return Zs(new RegExp("^\\d{1,"+e+"}"),t)}}function NR(e,t){switch(e){case 1:return Zs(Sa.singleDigitSigned,t);case 2:return Zs(Sa.twoDigitsSigned,t);case 3:return Zs(Sa.threeDigitsSigned,t);case 4:return Zs(Sa.fourDigitsSigned,t);default:return Zs(new RegExp("^-?\\d{1,"+e+"}"),t)}}function q5(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function mne(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const c=r+50,d=Math.trunc(c/100)*100,i=e>=c%100;s=e+d-(i?100:0)}return n?s:1-s}function gne(e){return e%400===0||e%4===0&&e%100!==0}class jze extends Ko{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const c=d=>({year:d,isTwoDigitYear:r==="yy"});switch(r){case"y":return Ta(pa(4,n),c);case"yo":return Ta(s.ordinalNumber(n,{unit:"year"}),c);default:return Ta(pa(r.length,n),c)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const c=n.getFullYear();if(s.isTwoDigitYear){const i=mne(s.year,c);return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}const d=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(d,0,1),n.setHours(0,0,0,0),n}}class Nze extends Ko{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const c=d=>({year:d,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Ta(pa(4,n),c);case"Yo":return Ta(s.ordinalNumber(n,{unit:"year"}),c);default:return Ta(pa(r.length,n),c)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,c){const d=$5(n,c);if(s.isTwoDigitYear){const m=mne(s.year,d);return n.setFullYear(m,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),ym(n,c)}const i=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(i,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),ym(n,c)}}class Vze extends Ko{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return NR(r==="R"?4:r.length,n)}set(n,r,s){const c=Os(n,0);return c.setFullYear(s,0,4),c.setHours(0,0,0,0),g1(c)}}class $ze extends Ko{constructor(){super(...arguments);Or(this,"priority",130);Or(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return NR(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class Uze extends Ko{constructor(){super(...arguments);Or(this,"priority",120);Or(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return pa(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class qze extends Ko{constructor(){super(...arguments);Or(this,"priority",120);Or(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return pa(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class Hze extends Ko{constructor(){super(...arguments);Or(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Or(this,"priority",110)}parse(n,r,s){const c=d=>d-1;switch(r){case"M":return Ta(Zs(Sa.month,n),c);case"MM":return Ta(pa(2,n),c);case"Mo":return Ta(s.ordinalNumber(n,{unit:"month"}),c);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class Wze extends Ko{constructor(){super(...arguments);Or(this,"priority",110);Or(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const c=d=>d-1;switch(r){case"L":return Ta(Zs(Sa.month,n),c);case"LL":return Ta(pa(2,n),c);case"Lo":return Ta(s.ordinalNumber(n,{unit:"month"}),c);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function Gze(e,t,n){const r=li(e,n==null?void 0:n.in),s=U5(r,n)-t;return r.setDate(r.getDate()-s*7),li(r,n==null?void 0:n.in)}class Yze extends Ko{constructor(){super(...arguments);Or(this,"priority",100);Or(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return Zs(Sa.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return pa(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,c){return ym(Gze(n,s,c),c)}}function Xze(e,t,n){const r=li(e,n==null?void 0:n.in),s=ane(r,n)-t;return r.setDate(r.getDate()-s*7),r}class Zze extends Ko{constructor(){super(...arguments);Or(this,"priority",100);Or(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return Zs(Sa.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return pa(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return g1(Xze(n,s))}}const Kze=[31,28,31,30,31,30,31,31,30,31,30,31],Qze=[31,29,31,30,31,30,31,31,30,31,30,31];class Jze extends Ko{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"subPriority",1);Or(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return Zs(Sa.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return pa(r.length,n)}}validate(n,r){const s=n.getFullYear(),c=gne(s),d=n.getMonth();return c?r>=1&&r<=Qze[d]:r>=1&&r<=Kze[d]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class e3e extends Ko{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"subpriority",1);Or(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return Zs(Sa.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return pa(r.length,n)}}validate(n,r){const s=n.getFullYear();return gne(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function H5(e,t,n){var C,A,I,k;const r=Iv(),s=(n==null?void 0:n.weekStartsOn)??((A=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:A.weekStartsOn)??r.weekStartsOn??((k=(I=r.locale)==null?void 0:I.options)==null?void 0:k.weekStartsOn)??0,c=li(e,n==null?void 0:n.in),d=c.getDay(),m=(t%7+7)%7,x=7-s,T=t<0||t>6?t-(d+x)%7:(m+x)%7-(d+x)%7;return uP(c,T,n)}class t3e extends Ko{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,c){return n=H5(n,s,c),n.setHours(0,0,0,0),n}}class n3e extends Ko{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,c){const d=i=>{const m=Math.floor((i-1)/7)*7;return(i+c.weekStartsOn+6)%7+m};switch(r){case"e":case"ee":return Ta(pa(r.length,n),d);case"eo":return Ta(s.ordinalNumber(n,{unit:"day"}),d);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,c){return n=H5(n,s,c),n.setHours(0,0,0,0),n}}class r3e extends Ko{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,c){const d=i=>{const m=Math.floor((i-1)/7)*7;return(i+c.weekStartsOn+6)%7+m};switch(r){case"c":case"cc":return Ta(pa(r.length,n),d);case"co":return Ta(s.ordinalNumber(n,{unit:"day"}),d);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,c){return n=H5(n,s,c),n.setHours(0,0,0,0),n}}function i3e(e,t,n){const r=li(e,n==null?void 0:n.in),s=Cze(r,n),c=t-s;return uP(r,c,n)}class o3e extends Ko{constructor(){super(...arguments);Or(this,"priority",90);Or(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const c=d=>d===0?7:d;switch(r){case"i":case"ii":return pa(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return Ta(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),c);case"iiiii":return Ta(s.day(n,{width:"narrow",context:"formatting"}),c);case"iiiiii":return Ta(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),c);case"iiii":default:return Ta(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),c)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=i3e(n,s),n.setHours(0,0,0,0),n}}class s3e extends Ko{constructor(){super(...arguments);Or(this,"priority",80);Or(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(q5(s),0,0,0),n}}class a3e extends Ko{constructor(){super(...arguments);Or(this,"priority",80);Or(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(q5(s),0,0,0),n}}class l3e extends Ko{constructor(){super(...arguments);Or(this,"priority",80);Or(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(q5(s),0,0,0),n}}class c3e extends Ko{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return Zs(Sa.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return pa(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const c=n.getHours()>=12;return c&&s<12?n.setHours(s+12,0,0,0):!c&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class u3e extends Ko{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return Zs(Sa.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return pa(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class d3e extends Ko{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return Zs(Sa.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return pa(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class h3e extends Ko{constructor(){super(...arguments);Or(this,"priority",70);Or(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return Zs(Sa.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return pa(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const c=s<=24?s%24:s;return n.setHours(c,0,0,0),n}}class f3e extends Ko{constructor(){super(...arguments);Or(this,"priority",60);Or(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return Zs(Sa.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return pa(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class p3e extends Ko{constructor(){super(...arguments);Or(this,"priority",50);Or(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return Zs(Sa.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return pa(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class m3e extends Ko{constructor(){super(...arguments);Or(this,"priority",30);Or(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=c=>Math.trunc(c*Math.pow(10,-r.length+3));return Ta(pa(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class g3e extends Ko{constructor(){super(...arguments);Or(this,"priority",10);Or(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return om(im.basicOptionalMinutes,n);case"XX":return om(im.basic,n);case"XXXX":return om(im.basicOptionalSeconds,n);case"XXXXX":return om(im.extendedOptionalSeconds,n);case"XXX":default:return om(im.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Os(n,n.getTime()-y1(n)-s)}}class y3e extends Ko{constructor(){super(...arguments);Or(this,"priority",10);Or(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return om(im.basicOptionalMinutes,n);case"xx":return om(im.basic,n);case"xxxx":return om(im.basicOptionalSeconds,n);case"xxxxx":return om(im.extendedOptionalSeconds,n);case"xxx":default:return om(im.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Os(n,n.getTime()-y1(n)-s)}}class v3e extends Ko{constructor(){super(...arguments);Or(this,"priority",40);Or(this,"incompatibleTokens","*")}parse(n){return pne(n)}set(n,r,s){return[Os(n,s*1e3),{timestampIsSet:!0}]}}class _3e extends Ko{constructor(){super(...arguments);Or(this,"priority",20);Or(this,"incompatibleTokens","*")}parse(n){return pne(n)}set(n,r,s){return[Os(n,s),{timestampIsSet:!0}]}}const x3e={G:new Bze,y:new jze,Y:new Nze,R:new Vze,u:new $ze,Q:new Uze,q:new qze,M:new Hze,L:new Wze,w:new Yze,I:new Zze,d:new Jze,D:new e3e,E:new t3e,e:new n3e,c:new r3e,i:new o3e,a:new s3e,b:new a3e,B:new l3e,h:new c3e,H:new u3e,K:new d3e,k:new h3e,m:new f3e,s:new p3e,S:new m3e,X:new g3e,x:new y3e,t:new v3e,T:new _3e},b3e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,w3e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S3e=/^'([^]*?)'?$/,T3e=/''/g,E3e=/\S/,C3e=/[a-zA-Z]/;function M3e(e,t,n,r){var j,V,H,G,X,Q,ee,ce;const s=()=>Os((r==null?void 0:r.in)||n,NaN),c=Tze(),d=(r==null?void 0:r.locale)??c.locale??OE,i=(r==null?void 0:r.firstWeekContainsDate)??((V=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:V.firstWeekContainsDate)??c.firstWeekContainsDate??((G=(H=c.locale)==null?void 0:H.options)==null?void 0:G.firstWeekContainsDate)??1,m=(r==null?void 0:r.weekStartsOn)??((Q=(X=r==null?void 0:r.locale)==null?void 0:X.options)==null?void 0:Q.weekStartsOn)??c.weekStartsOn??((ce=(ee=c.locale)==null?void 0:ee.options)==null?void 0:ce.weekStartsOn)??0;if(!t)return e?s():li(n,r==null?void 0:r.in);const x={firstWeekContainsDate:i,weekStartsOn:m,locale:d},T=[new Fze(r==null?void 0:r.in,n)],C=t.match(w3e).map(fe=>{const ue=fe[0];if(ue in jR){const ae=jR[ue];return ae(fe,d.formatLong)}return fe}).join("").match(b3e),A=[];for(let fe of C){!(r!=null&&r.useAdditionalWeekYearTokens)&&une(fe)&&rj(fe,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&cne(fe)&&rj(fe,t,e);const ue=fe[0],ae=x3e[ue];if(ae){const{incompatibleTokens:xe}=ae;if(Array.isArray(xe)){const Me=A.find(Se=>xe.includes(Se.token)||Se.token===ue);if(Me)throw new RangeError(`The format string mustn't contain \`${Me.fullToken}\` and \`${fe}\` at the same time`)}else if(ae.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${fe}\` and any other token at the same time`);A.push({token:ue,fullToken:fe});const we=ae.run(e,fe,d.match,x);if(!we)return s();T.push(we.setter),e=we.rest}else{if(ue.match(C3e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");if(fe==="''"?fe="'":ue==="'"&&(fe=A3e(fe)),e.indexOf(fe)===0)e=e.slice(fe.length);else return s()}}if(e.length>0&&E3e.test(e))return s();const I=T.map(fe=>fe.priority).sort((fe,ue)=>ue-fe).filter((fe,ue,ae)=>ae.indexOf(fe)===ue).map(fe=>T.filter(ue=>ue.priority===fe).sort((ue,ae)=>ae.subPriority-ue.subPriority)).map(fe=>fe[0]);let k=li(n,r==null?void 0:r.in);if(isNaN(+k))return s();const B={};for(const fe of I){if(!fe.validate(k,x))return s();const ue=fe.set(k,B,x);Array.isArray(ue)?(k=ue[0],Object.assign(B,ue[1])):k=ue}return k}function A3e(e){return e.match(S3e)[1].replace(T3e,"'")}function $H(e,t){const n=li(e,t==null?void 0:t.in);return n.setMinutes(0,0,0),n}function R3e(e,t,n){const[r,s]=kv(n==null?void 0:n.in,e,t);return+$H(r)==+$H(s)}function D3e(e,t,n){const[r,s]=kv(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function P3e(e,t,n){const[r,s]=kv(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function I3e(e,t,n){const r=+li(e,n==null?void 0:n.in),[s,c]=[+li(t.start,n==null?void 0:n.in),+li(t.end,n==null?void 0:n.in)].sort((d,i)=>d-i);return r>=s&&r<=c}function k3e(e,t,n){const r=li(e,n==null?void 0:n.in),s=r.getFullYear(),c=r.getDate(),d=Os(e,0);d.setFullYear(s,t,15),d.setHours(0,0,0,0);const i=hne(d);return r.setMonth(t,Math.min(c,i)),r}function O3e(e,t,n){const r=li(e,n==null?void 0:n.in);return r.setDate(t),r}function L3e(e,t,n){const r=li(e,n==null?void 0:n.in);return r.setHours(t),r}function z3e(e,t,n){const r=li(e,n==null?void 0:n.in);return r.setMilliseconds(t),r}function F3e(e,t,n){const r=li(e,n==null?void 0:n.in);return r.setMinutes(t),r}function B3e(e,t,n){const r=li(e,n==null?void 0:n.in);return r.setSeconds(t),r}function j3e(e,t,n){const r=li(e,n==null?void 0:n.in);return isNaN(+r)?Os(e,NaN):(r.setFullYear(t),r)}const N3e={selectedProjectId:null},yne=_te({name:"project",initialState:N3e,reducers:{setSelectedProjectId:(e,t)=>{e.selectedProjectId=t.payload},clearSelectedProjectId:e=>{e.selectedProjectId=null}}}),{setSelectedProjectId:V3e,clearSelectedProjectId:PZe}=yne.actions,$3e=yne.reducer,U3e="/assets/conture-map-DVTY2EDp.jpg",q3e=({project:e,count:t})=>{const n=bv(),r=ate(),s=()=>{const c=e._id||e.id;r(V3e(c)),n(`/project/${c}/View`)};return z.jsxs(L0,{elevation:4,sx:{maxHeight:220,position:"relative",width:320,maxWidth:320,borderRadius:3,overflow:"hidden",cursor:"pointer",transition:"0.3s","&:hover":{boxShadow:6}},onClick:s,children:[z.jsxs(Pn,{sx:{position:"relative",height:140},children:[z.jsx(nJ,{component:"img",height:"140",image:U3e,alt:e==null?void 0:e.name,sx:{objectFit:"cover",filter:"brightness(60%)"}}),z.jsx(Pn,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",px:2},children:z.jsx(En,{variant:"subtitle1",fontWeight:700,color:"white",noWrap:!0,children:e==null?void 0:e.name})})]}),z.jsx(SD,{sx:{pt:1,pb:1},children:z.jsxs(Ns,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[z.jsxs(Ns,{direction:"row",spacing:2,alignItems:"center",children:[z.jsxs(Ns,{direction:"row",spacing:.5,alignItems:"center",children:[z.jsx(aLe,{fontSize:"small"}),z.jsx(En,{variant:"caption",children:e.location})]}),z.jsxs(Ns,{direction:"row",spacing:.5,alignItems:"center",children:[z.jsx(V5,{fontSize:"small"}),z.jsx(En,{variant:"caption",children:t})]}),z.jsx(Ns,{children:z.jsx(En,{variant:"caption",fontSize:8,color:"text.secondary",children:e.createdAt?`${bze(new Date(e.createdAt),{addSuffix:!0})}`:"Time unknown"})})]}),z.jsx(Wi,{size:"small",onClick:c=>{c.stopPropagation(),s()},children:"View"})]})})]})};function UH(){const e=bhe(),t=bv(),n=Pu(X=>X.auth),[r,s]=U.useState(""),[c,d]=U.useState(""),[i,m]=U.useState([]),[x,T]=U.useState(!1),[C,A]=U.useState(null),[I,k]=U.useState(1),[B,j]=U.useState(1),V=12,H=async(X="",Q="",ee=1)=>{var ce;T(!0),A(null);try{const fe={email:n.user.email,status:"active",page:ee,limit:V};X&&(fe.search=X),Q&&(fe.sortBy=Q);const ae=(ce=(await Ps.get("/project-members",{params:fe,headers:{Authorization:n.token}})).data)==null?void 0:ce.data;m((ae==null?void 0:ae.results)||[]),j((ae==null?void 0:ae.totalPages)||1)}catch(fe){A(fe.message||"Failed to fetch projects")}finally{T(!1)}};U.useEffect(()=>{H(r,c,I)},[I]);const G=()=>{k(1),H(r,c,1)};return z.jsxs(Pn,{p:3,children:[z.jsxs(Ii,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",mb:3,children:[z.jsx(Ii,{item:!0,xs:12,md:3,children:z.jsx(En,{variant:"h2",fontWeight:600,children:"All Projects"})}),z.jsx(Ii,{item:!0,xs:12,md:6,children:z.jsxs(Ii,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:[z.jsx(Ii,{item:!0,xs:12,sm:6,children:z.jsx(Vi,{label:"Search by Name",variant:"outlined",size:"small",fullWidth:!0,value:r,onChange:X=>s(X.target.value)})}),z.jsx(Ii,{item:!0,xs:12,sm:6,children:z.jsxs(tu,{sx:{...e.typography.customSelect2,minWidth:"100px"},fullWidth:!0,children:[z.jsx(Xg,{children:"Sort By"}),z.jsxs(nu,{size:"small",value:c,label:"Sort By",onChange:X=>d(X.target.value),children:[z.jsx(ko,{value:"name",children:"Name"}),z.jsx(ko,{value:"images",children:"Date"})]})]})}),z.jsx(Ii,{item:!0,xs:12,sm:2,children:z.jsx(Wi,{variant:"contained",fullWidth:!0,onClick:G,children:"Search"})})]})}),z.jsx(Ii,{item:!0,xs:12,md:3,textAlign:{xs:"left",md:"right"},children:z.jsx(Wi,{variant:"contained",onClick:()=>t("/createProject"),startIcon:z.jsx(N5,{}),color:"primary",children:"Create New Project"})})]}),x?z.jsx(En,{variant:"body1",children:"Loading projects..."}):C?z.jsx(En,{color:"error",children:C}):i.length===0?z.jsx(Pn,{mt:6,textAlign:"center",children:z.jsx(En,{variant:"h6",color:"text.secondary",children:"No projects found. Create a project to start working."})}):z.jsxs(z.Fragment,{children:[z.jsx(Ii,{container:!0,spacing:3,children:i.map((X,Q)=>z.jsx(Ii,{item:!0,xs:12,sm:6,md:4,lg:3,children:z.jsx(q3e,{project:X.projectId,count:X.memberCount})},Q))}),B>1&&z.jsx(Pn,{mt:4,display:"flex",justifyContent:"center",children:z.jsx(KN,{count:B,page:I,onChange:(X,Q)=>k(Q),color:"primary"})})]})]})}const H3e=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:Pt({},e)}}}}),vne={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(e,t)=>`Select ${e}. ${t?`Selected time is ${t}`:"No time selected"}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:e=>e?`Choose date, selected date is ${e}`:"Choose date",openTimePickerDialogue:e=>e?`Choose time, selected time is ${e}`:"Choose time",openRangePickerDialogue:e=>e?`Choose range, selected range is ${e}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},W3e=vne;H3e(vne);const G3e=["localeText"],ij=U.createContext(null),_ne=function(t){const{localeText:n}=t,r=xi(t,G3e),{adapter:s,localeText:c}=U.useContext(ij)??{adapter:void 0,localeText:void 0},d=Js({props:r,name:"MuiLocalizationProvider"}),{children:i,dateAdapter:m,dateFormats:x,dateLibInstance:T,adapterLocale:C,localeText:A}=d,I=U.useMemo(()=>Pt({},A,c,n),[A,c,n]),k=U.useMemo(()=>{if(!m)return s||null;const V=new m({locale:C,formats:x,instance:T});if(!V.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return V},[m,C,x,T,s]),B=U.useMemo(()=>k?{minDate:k.date("1900-01-01T00:00:00.000"),maxDate:k.date("2099-12-31T00:00:00.000")}:null,[k]),j=U.useMemo(()=>({utils:k,adapter:k,defaultDates:B,localeText:I}),[B,k,I]);return z.jsx(ij.Provider,{value:j,children:i})},W5=()=>{const e=U.useContext(ij);if(e===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=U.useMemo(()=>Pt({},W3e,e.localeText),[e.localeText]);return U.useMemo(()=>Pt({},e,{localeText:t}),[e,t])},bs=()=>W5().adapter,Ov=()=>W5().localeText,oj=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],sj=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],xne=["minDateTime","maxDateTime"],Y3e=[...oj,...sj,...xne],bne=e=>Y3e.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{}),X3e=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],wne=(e,t)=>U.useMemo(()=>{const n=Pt({},e),r={},s=c=>{n.hasOwnProperty(c)&&(r[c]=n[c],delete n[c])};return X3e.forEach(s),t==="date"?oj.forEach(s):t==="time"?sj.forEach(s):t==="date-time"&&(oj.forEach(s),sj.forEach(s),xne.forEach(s)),{forwardedProps:n,internalProps:r}},[e,t]),xS=(e,t)=>e.length!==t.length?!1:t.every(n=>e.includes(n)),Z3e=({openTo:e,defaultOpenTo:t,views:n,defaultViews:r})=>{const s=n??r;let c;if(e!=null)c=e;else if(s.includes(t))c=t;else if(s.length>0)c=s[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:s,openTo:c}},VR=(e,t,n)=>{let r=t;return r=e.setHours(r,e.getHours(n)),r=e.setMinutes(r,e.getMinutes(n)),r=e.setSeconds(r,e.getSeconds(n)),r=e.setMilliseconds(r,e.getMilliseconds(n)),r},BT=({date:e,disableFuture:t,disablePast:n,maxDate:r,minDate:s,isDateDisabled:c,adapter:d,timezone:i})=>{const m=VR(d,d.date(void 0,i),e);n&&d.isBefore(s,m)&&(s=m),t&&d.isAfter(r,m)&&(r=m);let x=e,T=e;for(d.isBefore(e,s)&&(x=s,T=null),d.isAfter(e,r)&&(T&&(T=r),x=null);x||T;){if(x&&d.isAfter(x,r)&&(x=null),T&&d.isBefore(T,s)&&(T=null),x){if(!c(x))return x;x=d.addDays(x,1)}if(T){if(!c(T))return T;T=d.addDays(T,-1)}}return null},K3e=(e,t)=>e.isValid(t)?t:null,qH=(e,t,n)=>t==null||!e.isValid(t)?n:t,Q3e=(e,t,n)=>!e.isValid(t)&&t!=null&&!e.isValid(n)&&n!=null?!0:e.isEqual(t,n),G5=(e,t)=>{const r=[e.startOfYear(t)];for(;r.length<12;){const s=r[r.length-1];r.push(e.addMonths(s,1))}return r},Sne=(e,t,n)=>n==="date"?e.startOfDay(e.date(void 0,t)):e.date(void 0,t),J3e=["year","month","day"],HH=e=>J3e.includes(e),Y5=(e,{format:t,views:n},r)=>{if(t!=null)return t;const s=e.formats;return xS(n,["year"])?s.year:xS(n,["month"])?s.month:xS(n,["day"])?s.dayOfMonth:xS(n,["month","year"])?`${s.month} ${s.year}`:xS(n,["day","month"])?`${s.month} ${s.dayOfMonth}`:r?/en/.test(e.getCurrentLocaleCode())?s.normalDateWithWeekday:s.normalDate:s.keyboardDate},eFe=(e,t)=>{const n=e.startOfWeek(t);return[0,1,2,3,4,5,6].map(r=>e.addDays(n,r))},Tne=(e,t)=>{const n=e.formatTokenMap[t];if(n==null)throw new Error([`MUI X: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},dP=(e,t)=>{const n=[],r=e.date(void 0,"default"),s=e.startOfWeek(r),c=e.endOfWeek(r);let d=s;for(;e.isBefore(d,c);)n.push(d),d=e.addDays(d,1);return n.map(i=>e.formatByString(i,t))},Ene=(e,t,n,r)=>{switch(n){case"month":return G5(e,e.date(void 0,t)).map(s=>e.formatByString(s,r));case"weekDay":return dP(e,r);case"meridiem":{const s=e.date(void 0,t);return[e.startOfDay(s),e.endOfDay(s)].map(c=>e.formatByString(c,r))}default:return[]}},WH="s",tFe=["0","1","2","3","4","5","6","7","8","9"],nFe=e=>{const t=e.date(void 0);return e.formatByString(e.setSeconds(t,0),WH)==="0"?tFe:Array.from({length:10}).map((r,s)=>e.formatByString(e.setSeconds(t,s),WH))},$0=(e,t)=>{if(t[0]==="0")return e;const n=[];let r="";for(let s=0;s<e.length;s+=1){r+=e[s];const c=t.indexOf(r);c>-1&&(n.push(c.toString()),r="")}return n.join("")},X5=(e,t)=>t[0]==="0"?e:e.split("").map(n=>t[Number(n)]).join(""),GH=(e,t)=>{const n=$0(e,t);return n!==" "&&!Number.isNaN(Number(n))},Z5=(e,t)=>Number(e).toString().padStart(t,"0"),Cne=(e,t,n,r,s)=>{if(s.type==="day"&&s.contentType==="digit-with-letter"){const d=e.setDate(n.longestMonth,t);return e.formatByString(d,s.format)}let c=t.toString();return s.hasLeadingZerosInInput&&(c=Z5(c,s.maxLength)),X5(c,r)},K5=(e,t,n)=>{let r=e.value||e.placeholder;const s=t==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return t==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(r=Number($0(r,n)).toString()),["input-rtl","input-ltr"].includes(t)&&e.contentType==="digit"&&!s&&r.length===1&&(r=`${r}‎`),t==="input-rtl"&&(r=`⁨${r}⁩`),r},YH=(e,t,n,r)=>e.formatByString(e.parse(t,n),r),rFe=(e,t)=>e.formatByString(e.date(void 0,"system"),t).length===4,Mne=(e,t,n,r)=>{if(t!=="digit")return!1;const s=e.date(void 0,"default");switch(n){case"year":return e.lib==="dayjs"&&r==="YY"?!0:e.formatByString(e.setYear(s,1),r).startsWith("0");case"month":return e.formatByString(e.startOfYear(s),r).length>1;case"day":return e.formatByString(e.startOfMonth(s),r).length>1;case"weekDay":return e.formatByString(e.startOfWeek(s),r).length>1;case"hours":return e.formatByString(e.setHours(s,1),r).length>1;case"minutes":return e.formatByString(e.setMinutes(s,1),r).length>1;case"seconds":return e.formatByString(e.setSeconds(s,1),r).length>1;default:throw new Error("Invalid section type")}},iFe=(e,t,n)=>{const r=t.some(m=>m.type==="day"),s=[],c=[];for(let m=0;m<t.length;m+=1){const x=t[m];r&&x.type==="weekDay"||(s.push(x.format),c.push(K5(x,"non-input",n)))}const d=s.join(" "),i=c.join(" ");return e.parse(i,d)},oFe=e=>e.map(t=>`${t.startSeparator}${t.value||t.placeholder}${t.endSeparator}`).join(""),sFe=(e,t,n)=>{const s=e.map(c=>{const d=K5(c,n?"input-rtl":"input-ltr",t);return`${c.startSeparator}${d}${c.endSeparator}`}).join("");return n?`⁦${s}⁩`:s},aFe=(e,t,n)=>{const r=e.date(void 0,n),s=e.endOfYear(r),c=e.endOfDay(r),{maxDaysInMonth:d,longestMonth:i}=G5(e,r).reduce((m,x)=>{const T=e.getDaysInMonth(x);return T>m.maxDaysInMonth?{maxDaysInMonth:T,longestMonth:x}:m},{maxDaysInMonth:0,longestMonth:null});return{year:({format:m})=>({minimum:0,maximum:rFe(e,m)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(s)+1}),day:({currentDate:m})=>({minimum:1,maximum:e.isValid(m)?e.getDaysInMonth(m):d,longestMonth:i}),weekDay:({format:m,contentType:x})=>{if(x==="digit"){const T=dP(e,m).map(Number);return{minimum:Math.min(...T),maximum:Math.max(...T)}}return{minimum:1,maximum:7}},hours:({format:m})=>{const x=e.getHours(c);return $0(e.formatByString(e.endOfDay(r),m),t)!==x.toString()?{minimum:1,maximum:Number($0(e.formatByString(e.startOfDay(r),m),t))}:{minimum:0,maximum:x}},minutes:()=>({minimum:0,maximum:e.getMinutes(c)}),seconds:()=>({minimum:0,maximum:e.getSeconds(c)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},lFe=(e,t,n,r)=>{switch(t.type){case"year":return e.setYear(r,e.getYear(n));case"month":return e.setMonth(r,e.getMonth(n));case"weekDay":{let s=e.formatByString(n,t.format);t.hasLeadingZerosInInput&&(s=Z5(s,t.maxLength));const c=dP(e,t.format),d=c.indexOf(s),m=c.indexOf(t.value)-d;return e.addDays(n,m)}case"day":return e.setDate(r,e.getDate(n));case"meridiem":{const s=e.getHours(n)<12,c=e.getHours(r);return s&&c>=12?e.addHours(r,-12):!s&&c<12?e.addHours(r,12):r}case"hours":return e.setHours(r,e.getHours(n));case"minutes":return e.setMinutes(r,e.getMinutes(n));case"seconds":return e.setSeconds(r,e.getSeconds(n));default:return r}},XH={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},ZH=(e,t,n,r,s)=>[...n].sort((c,d)=>XH[c.type]-XH[d.type]).reduce((c,d)=>!s||d.modified?lFe(e,d,t,c):c,r),cFe=()=>navigator.userAgent.toLowerCase().includes("android"),uFe=(e,t)=>{const n={};if(!t)return e.forEach((m,x)=>{const T=x===0?null:x-1,C=x===e.length-1?null:x+1;n[x]={leftIndex:T,rightIndex:C}}),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},s={};let c=0,d=0,i=e.length-1;for(;i>=0;){d=e.findIndex((m,x)=>{var T;return x>=c&&((T=m.endSeparator)==null?void 0:T.includes(" "))&&m.endSeparator!==" / "}),d===-1&&(d=e.length-1);for(let m=d;m>=c;m-=1)s[m]=i,r[i]=m,i-=1;c=d+1}return e.forEach((m,x)=>{const T=s[x],C=T===0?null:r[T-1],A=T===e.length-1?null:r[T+1];n[x]={leftIndex:C,rightIndex:A}}),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}},aj=(e,t)=>{if(e==null)return null;if(e==="all")return"all";if(typeof e=="string"){const n=t.findIndex(r=>r.type===e);return n===-1?null:n}return e},dFe=({adapter:e,format:t})=>{let n=10,r=t,s=e.expandFormat(t);for(;s!==r;)if(r=s,s=e.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return s},hFe=({adapter:e,expandedFormat:t})=>{const n=[],{start:r,end:s}=e.escapedCharacters,c=new RegExp(`(\\${r}[^\\${s}]*\\${s})+`,"g");let d=null;for(;d=c.exec(t);)n.push({start:d.index,end:c.lastIndex-1});return n},fFe=(e,t,n,r)=>{switch(n.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),r).length,format:r});case"month":return t.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return t.fieldDayPlaceholder({format:r});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return t.fieldHoursPlaceholder({format:r});case"minutes":return t.fieldMinutesPlaceholder({format:r});case"seconds":return t.fieldSecondsPlaceholder({format:r});case"meridiem":return t.fieldMeridiemPlaceholder({format:r});default:return r}},pFe=({adapter:e,date:t,shouldRespectLeadingZeros:n,localeText:r,localizedDigits:s,now:c,token:d,startSeparator:i})=>{if(d==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const m=Tne(e,d),x=Mne(e,m.contentType,m.type,d),T=n?x:m.contentType==="digit",C=e.isValid(t);let A=C?e.formatByString(t,d):"",I=null;if(T)if(x)I=A===""?e.formatByString(c,d).length:A.length;else{if(m.maxLength==null)throw new Error(`MUI X: The token ${d} should have a 'maxLength' property on it's adapter`);I=m.maxLength,C&&(A=X5(Z5($0(A,s),I),s))}return Pt({},m,{format:d,maxLength:I,value:A,placeholder:fFe(e,r,m,d),hasLeadingZerosInFormat:x,hasLeadingZerosInInput:T,startSeparator:i,endSeparator:"",modified:!1})},mFe=e=>{var I;const{adapter:t,expandedFormat:n,escapedParts:r}=e,s=t.date(void 0),c=[];let d="";const i=Object.keys(t.formatTokenMap).sort((k,B)=>B.length-k.length),m=/^([a-zA-Z]+)/,x=new RegExp(`^(${i.join("|")})*$`),T=new RegExp(`^(${i.join("|")})`),C=k=>r.find(B=>B.start<=k&&B.end>=k);let A=0;for(;A<n.length;){const k=C(A),B=k!=null,j=(I=m.exec(n.slice(A)))==null?void 0:I[1];if(!B&&j!=null&&x.test(j)){let V=j;for(;V.length>0;){const H=T.exec(V)[1];V=V.slice(H.length),c.push(pFe(Pt({},e,{now:s,token:H,startSeparator:d}))),d=""}A+=j.length}else{const V=n[A];B&&(k==null?void 0:k.start)===A||(k==null?void 0:k.end)===A||(c.length===0?d+=V:(c[c.length-1].endSeparator+=V,c[c.length-1].isEndFormatSeparator=!0)),A+=1}}return c.length===0&&d.length>0&&c.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:d,endSeparator:"",modified:!1}),c},gFe=({isRtl:e,formatDensity:t,sections:n})=>n.map(r=>{const s=c=>{let d=c;return e&&d!==null&&d.includes(" ")&&(d=`⁩${d}⁦`),t==="spacious"&&["/",".","-"].includes(d)&&(d=` ${d} `),d};return r.startSeparator=s(r.startSeparator),r.endSeparator=s(r.endSeparator),r}),KH=e=>{let t=dFe(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(t=t.split(" ").reverse().join(" "));const n=hFe(Pt({},e,{expandedFormat:t})),r=mFe(Pt({},e,{expandedFormat:t,escapedParts:n}));return gFe(Pt({},e,{sections:r}))},Q5=U.createContext(null),j1=()=>{const e=U.useContext(Q5);if(e==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return e},J5=()=>U.useContext(Q5),Ane=U.createContext(()=>!0);function yFe(){return U.useContext(Ane)}const Rne=U.createContext(null);function Dne(){return U.useContext(Rne)}const Pne=U.createContext(null),Ine=U.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function kne(e){const{contextValue:t,actionsContextValue:n,privateContextValue:r,fieldPrivateContextValue:s,isValidContextValue:c,localeText:d,children:i}=e;return z.jsx(Q5.Provider,{value:t,children:z.jsx(Pne.Provider,{value:n,children:z.jsx(Ine.Provider,{value:r,children:z.jsx(Rne.Provider,{value:s,children:z.jsx(Ane.Provider,{value:c,children:z.jsx(_ne,{localeText:d,children:i})})})})})})}const vFe=()=>{const e=U.useContext(Pne);if(e==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return e},_Fe=()=>W5().defaultDates,hP=e=>{const t=bs(),n=U.useRef(void 0);return n.current===void 0&&(n.current=t.date(void 0,e)),n.current},xFe=Gi(z.jsx("path",{d:"M7 10l5 5 5-5z"})),bFe=Gi(z.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),wFe=Gi(z.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),SFe=Gi(z.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Gi(z.jsxs(U.Fragment,{children:[z.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),z.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));Gi(z.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));Gi(z.jsxs(U.Fragment,{children:[z.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),z.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const TFe=Gi(z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function EFe(e){return fr("MuiPickersArrowSwitcher",e)}pr("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const ql=()=>U.useContext(Ine),CFe=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],MFe=["ownerState"],AFe=["ownerState"],RFe=Ft("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),DFe=Ft("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:e})=>({width:e.spacing(3)})),QH=Ft(Kc,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),PFe=e=>dr({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},EFe,e),IFe=U.forwardRef(function(t,n){const r=Al(),s=Js({props:t,name:"MuiPickersArrowSwitcher"}),{children:c,className:d,slots:i,slotProps:m,isNextDisabled:x,isNextHidden:T,onGoToNext:C,nextLabel:A,isPreviousDisabled:I,isPreviousHidden:k,onGoToPrevious:B,previousLabel:j,labelId:V,classes:H}=s,G=xi(s,CFe),{ownerState:X}=ql(),Q=PFe(H),ee={isDisabled:x,isHidden:T,goTo:C,label:A},ce={isDisabled:I,isHidden:k,goTo:B,label:j},fe=(i==null?void 0:i.previousIconButton)??QH,ue=Co({elementType:fe,externalSlotProps:m==null?void 0:m.previousIconButton,additionalProps:{size:"medium",title:ce.label,"aria-label":ce.label,disabled:ce.isDisabled,edge:"end",onClick:ce.goTo},ownerState:Pt({},X,{isButtonHidden:ce.isHidden??!1}),className:$n(Q.button,Q.previousIconButton)}),ae=(i==null?void 0:i.nextIconButton)??QH,xe=Co({elementType:ae,externalSlotProps:m==null?void 0:m.nextIconButton,additionalProps:{size:"medium",title:ee.label,"aria-label":ee.label,disabled:ee.isDisabled,edge:"start",onClick:ee.goTo},ownerState:Pt({},X,{isButtonHidden:ee.isHidden??!1}),className:$n(Q.button,Q.nextIconButton)}),we=(i==null?void 0:i.leftArrowIcon)??bFe,Me=Co({elementType:we,externalSlotProps:m==null?void 0:m.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:X,className:Q.leftArrowIcon}),Se=xi(Me,MFe),Ae=(i==null?void 0:i.rightArrowIcon)??wFe,_e=Co({elementType:Ae,externalSlotProps:m==null?void 0:m.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:X,className:Q.rightArrowIcon}),Pe=xi(_e,AFe);return z.jsxs(RFe,Pt({ref:n,className:$n(Q.root,d),ownerState:X},G,{children:[z.jsx(fe,Pt({},ue,{children:r?z.jsx(Ae,Pt({},Pe)):z.jsx(we,Pt({},Se))})),c?z.jsx(En,{variant:"subtitle1",component:"span",id:V,children:c}):z.jsx(DFe,{className:Q.spacer,ownerState:X}),z.jsx(ae,Pt({},xe,{children:r?z.jsx(we,Pt({},Se)):z.jsx(Ae,Pt({},Pe))}))]}))}),kFe=["hours","minutes","seconds"],OFe=e=>kFe.includes(e),JH=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),LFe=(e,t)=>(n,r)=>e?t.isAfter(n,r):JH(n,t)>JH(r,t),One={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function zFe(e){const{steps:t,isViewMatchingStep:n,onStepChange:r}=e;return s=>{if(t==null)return One;const c=t.findIndex(i=>n(s.view,i)),d=c===-1||c===t.length-1?null:t[c+1];return{hasNextStep:d!=null,hasSeveralSteps:t.length>1,goToNextStep:()=>{d!=null&&r(Pt({},s,{step:d}))},areViewsInSameStep:(i,m)=>{const x=t.find(C=>n(i,C)),T=t.find(C=>n(m,C));return x===T}}}}function Lne({onChange:e,onViewChange:t,openTo:n,view:r,views:s,autoFocus:c,focusedView:d,onFocusedViewChange:i,getStepNavigation:m}){const x=U.useRef(n),T=U.useRef(s),C=U.useRef(s.includes(n)?n:s[0]),[A,I]=Xf({name:"useViews",state:"view",controlled:r,default:C.current}),k=U.useRef(c?A:null),[B,j]=Xf({name:"useViews",state:"focusedView",controlled:d,default:k.current}),V=m?m({setView:I,view:A,defaultView:C.current,views:s}):One;U.useEffect(()=>{(x.current&&x.current!==n||T.current&&T.current.some(ue=>!s.includes(ue)))&&(I(s.includes(n)?n:s[0]),T.current=s,x.current=n)},[n,I,A,s]);const H=s.indexOf(A),G=s[H-1]??null,X=s[H+1]??null,Q=Er((ue,ae)=>{j(ae?ue:xe=>ue===xe?null:xe),i==null||i(ue,ae)}),ee=Er(ue=>{Q(ue,!0),ue!==A&&(I(ue),t&&t(ue))}),ce=Er(()=>{X&&ee(X)}),fe=Er((ue,ae,xe)=>{const we=ae==="finish",Me=xe?s.indexOf(xe)<s.length-1:!!X;e(ue,we&&Me?"partial":ae,xe);let Ae=null;if(xe!=null&&xe!==A?Ae=xe:we&&(Ae=A),Ae==null)return;const _e=s[s.indexOf(Ae)+1];_e==null||!V.areViewsInSameStep(Ae,_e)||ee(_e)});return Pt({},V,{view:A,setView:ee,focusedView:B,setFocusedView:Q,nextView:X,previousView:G,defaultView:s.includes(n)?n:s[0],goToNextView:ce,setValueAndGoToNextView:fe})}function FFe(e,{disableFuture:t,maxDate:n,timezone:r}){const s=bs();return U.useMemo(()=>{const c=s.date(void 0,r),d=s.startOfMonth(t&&s.isBefore(c,n)?c:n);return!s.isAfter(d,e)},[t,n,e,s,r])}function BFe(e,{disablePast:t,minDate:n,timezone:r}){const s=bs();return U.useMemo(()=>{const c=s.date(void 0,r),d=s.startOfMonth(t&&s.isAfter(c,n)?c:n);return!s.isBefore(d,e)},[t,n,e,s,r])}const jT=36,fP=2,pP=320,jFe=280,e4=336,NFe=Ft("div")({overflow:"hidden",width:pP,maxHeight:e4,display:"flex",flexDirection:"column",margin:"0 auto"}),LE=({name:e,timezone:t,value:n,defaultValue:r,referenceDate:s,onChange:c,valueManager:d})=>{const i=bs(),[m,x]=Xf({name:e,state:"value",controlled:n,default:r??d.emptyValue}),T=U.useMemo(()=>d.getTimezone(i,m),[i,d,m]),C=Er(B=>T==null?B:d.setTimezone(i,T,B)),A=U.useMemo(()=>t||T||(s?i.getTimezone(s):"default"),[t,T,s,i]),I=U.useMemo(()=>d.setTimezone(i,A,m),[d,i,A,m]),k=Er((B,...j)=>{const V=C(B);x(V),c==null||c(V,...j)});return{value:I,handleValueChange:k,timezone:A}},tm={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},VFe=e=>Math.max(...e.map(t=>tm[t.type]??1)),bS=(e,t,n)=>{if(t===tm.year)return e.startOfYear(n);if(t===tm.month)return e.startOfMonth(n);if(t===tm.day)return e.startOfDay(n);let r=n;return t<tm.minutes&&(r=e.setMinutes(r,0)),t<tm.seconds&&(r=e.setSeconds(r,0)),t<tm.milliseconds&&(r=e.setMilliseconds(r,0)),r},$Fe=({props:e,adapter:t,granularity:n,timezone:r,getTodayDate:s})=>{let c=s?s():bS(t,n,Sne(t,r));e.minDate!=null&&t.isAfterDay(e.minDate,c)&&(c=bS(t,n,e.minDate)),e.maxDate!=null&&t.isBeforeDay(e.maxDate,c)&&(c=bS(t,n,e.maxDate));const d=LFe(e.disableIgnoringDatePartForTimeValidation??!1,t);return e.minTime!=null&&d(e.minTime,c)&&(c=bS(t,n,e.disableIgnoringDatePartForTimeValidation?e.minTime:VR(t,c,e.minTime))),e.maxTime!=null&&d(c,e.maxTime)&&(c=bS(t,n,e.disableIgnoringDatePartForTimeValidation?e.maxTime:VR(t,c,e.maxTime))),c},UFe=["value","referenceDate"],vm={emptyValue:null,getTodayValue:Sne,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=xi(e,UFe);return r.adapter.isValid(t)?t:n??$Fe(r)},cleanValue:K3e,areValuesEqual:Q3e,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>e.isValid(t)?e.getTimezone(t):null,setTimezone:(e,t,n)=>n==null?null:e.setTimezone(n,t)},qFe={updateReferenceValue:(e,t,n)=>e.isValid(t)?t:n,getSectionsFromValue:(e,t)=>t(e),getV7HiddenInputValueFromSections:oFe,getV6InputValueFromSections:sFe,parseValueStr:(e,t,n)=>n(e.trim(),t),getDateFromSection:e=>e,getDateSectionsFromValue:e=>e,updateDateInValue:(e,t,n)=>n,clearDateSections:e=>e.map(t=>Pt({},t,{value:""}))};function HFe(e,t){return Array.isArray(t)?t.every(n=>e.indexOf(n)!==-1):e.indexOf(t)!==-1}const WFe=e=>{setTimeout(e,0)},yc=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?yc(t.shadowRoot):t:null},GFe="@media (pointer: fine)";function YFe(e){return fr("MuiPickersDay",e)}const r0=pr("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function zne(e){const{disabled:t,selected:n,today:r,outsideCurrentMonth:s,day:c,disableMargin:d,disableHighlightToday:i,showDaysOutsideCurrentMonth:m}=e,x=bs(),{ownerState:T}=ql();return U.useMemo(()=>Pt({},T,{day:c,isDaySelected:n??!1,isDayDisabled:t??!1,isDayCurrent:r??!1,isDayOutsideMonth:s??!1,isDayStartOfWeek:x.isSameDay(c,x.startOfWeek(c)),isDayEndOfWeek:x.isSameDay(c,x.endOfWeek(c)),disableMargin:d??!1,disableHighlightToday:i??!1,showDaysOutsideCurrentMonth:m??!1}),[x,T,c,n,t,r,s,d,i,m])}const XFe=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],ZFe=(e,t)=>{const{isDaySelected:n,isDayDisabled:r,isDayCurrent:s,isDayOutsideMonth:c,disableMargin:d,disableHighlightToday:i,showDaysOutsideCurrentMonth:m}=t,x=c&&!m;return dr({root:["root",n&&!x&&"selected",r&&"disabled",!d&&"dayWithMargin",!i&&s&&"today",c&&m&&"dayOutsideMonth",x&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},YFe,e)},Fne=({theme:e})=>Pt({},e.typography.caption,{width:jT,height:jT,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:ei(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${r0.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${r0.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${r0.disabled}:not(.${r0.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${r0.disabled}&.${r0.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${fP}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(e.vars||e).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${r0.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}}]}),Bne=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&t.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},KFe=Ft(bd,{name:"MuiPickersDay",slot:"Root",overridesResolver:Bne})(Fne),QFe=Ft("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Bne})(({theme:e})=>Pt({},Fne({theme:e}),{opacity:0,pointerEvents:"none"})),wS=()=>{},JFe=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersDay"}),{autoFocus:s=!1,className:c,classes:d,isAnimating:i,onClick:m,onDaySelect:x,onFocus:T=wS,onBlur:C=wS,onKeyDown:A=wS,onMouseDown:I=wS,onMouseEnter:k=wS,children:B,day:j,selected:V,disabled:H,today:G,outsideCurrentMonth:X,disableMargin:Q,disableHighlightToday:ee,showDaysOutsideCurrentMonth:ce}=r,fe=xi(r,XFe),ue=zne({day:j,selected:V,disabled:H,today:G,outsideCurrentMonth:X,disableMargin:Q,disableHighlightToday:ee,showDaysOutsideCurrentMonth:ce}),ae=ZFe(d,ue),xe=bs(),we=U.useRef(null),Me=wo(we,n);Qs(()=>{s&&!H&&!i&&!X&&we.current.focus()},[s,H,i,X]);const Se=_e=>{I(_e),X&&_e.preventDefault()},Ae=_e=>{H||x(j),X&&_e.currentTarget.focus(),m&&m(_e)};return X&&!ce?z.jsx(QFe,{className:$n(ae.root,ae.hiddenDaySpacingFiller,c),ownerState:ue,role:fe.role}):z.jsx(KFe,Pt({className:$n(ae.root,c),ref:Me,centerRipple:!0,disabled:H,tabIndex:V?0:-1,onKeyDown:_e=>A(_e,j),onFocus:_e=>T(_e,j),onBlur:_e=>C(_e,j),onMouseEnter:_e=>k(_e,j),onClick:Ae,onMouseDown:Se},fe,{ownerState:ue,children:B??xe.format(j,"dayOfMonth")}))}),eBe=U.memo(JFe),Tb=e=>e.saveQuery!=null,jne=({stateResponse:{localizedDigits:e,sectionsValueBoundaries:t,state:n,timezone:r,setCharacterQuery:s,setTempAndroidValueStr:c,updateSectionValue:d}})=>{const i=bs(),m=({keyPressed:C,sectionIndex:A},I,k)=>{const B=C.toLowerCase(),j=n.sections[A];if(n.characterQuery!=null&&(!k||k(n.characterQuery.value))&&n.characterQuery.sectionIndex===A){const H=`${n.characterQuery.value}${B}`,G=I(H,j);if(!Tb(G))return s({sectionIndex:A,value:H,sectionType:j.type}),G}const V=I(B,j);return Tb(V)&&!V.saveQuery?(s(null),null):(s({sectionIndex:A,value:B,sectionType:j.type}),Tb(V)?null:V)},x=C=>{const A=(B,j,V)=>{const H=j.filter(G=>G.toLowerCase().startsWith(V));return H.length===0?{saveQuery:!1}:{sectionValue:H[0],shouldGoToNextSection:H.length===1}},I=(B,j,V,H)=>{const G=X=>Ene(i,r,j.type,X);if(j.contentType==="letter")return A(j.format,G(j.format),B);if(V&&H!=null&&Tne(i,V).contentType==="letter"){const X=G(V),Q=A(V,X,B);return Tb(Q)?{saveQuery:!1}:Pt({},Q,{sectionValue:H(Q.sectionValue,X)})}return{saveQuery:!1}};return m(C,(B,j)=>{switch(j.type){case"month":{const V=H=>YH(i,H,i.formats.month,j.format);return I(B,j,i.formats.month,V)}case"weekDay":{const V=(H,G)=>G.indexOf(H).toString();return I(B,j,i.formats.weekday,V)}case"meridiem":return I(B,j);default:return{saveQuery:!1}}})},T=C=>{const A=({queryValue:k,skipIfBelowMinimum:B,section:j})=>{const V=$0(k,e),H=Number(V),G=t[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(H>G.maximum)return{saveQuery:!1};if(B&&H<G.minimum)return{saveQuery:!0};const X=H*10>G.maximum||V.length===G.maximum.toString().length;return{sectionValue:Cne(i,H,G,e,j),shouldGoToNextSection:X}};return m(C,(k,B)=>{if(B.contentType==="digit"||B.contentType==="digit-with-letter")return A({queryValue:k,skipIfBelowMinimum:!1,section:B});if(B.type==="month"){Mne(i,"digit","month","MM");const j=A({queryValue:k,skipIfBelowMinimum:!0,section:{type:B.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(Tb(j))return j;const V=YH(i,j.sectionValue,"MM",B.format);return Pt({},j,{sectionValue:V})}if(B.type==="weekDay"){const j=A({queryValue:k,skipIfBelowMinimum:!0,section:B});if(Tb(j))return j;const V=dP(i,B.format)[Number(j.sectionValue)-1];return Pt({},j,{sectionValue:V})}return{saveQuery:!1}},k=>GH(k,e))};return Er(C=>{const A=n.sections[C.sectionIndex],k=GH(C.keyPressed,e)?T(Pt({},C,{keyPressed:X5(C.keyPressed,e)})):x(C);if(k==null){c(null);return}d({section:A,newSectionValue:k.sectionValue,shouldGoToNextSection:k.shouldGoToNextSection})})},zE=({props:e,value:t,timezone:n,adapter:r})=>{if(t===null)return null;const{shouldDisableDate:s,shouldDisableMonth:c,shouldDisableYear:d,disablePast:i,disableFuture:m,minDate:x,maxDate:T}=e,C=r.date(void 0,n);switch(!0){case!r.isValid(t):return"invalidDate";case!!(s&&s(t)):return"shouldDisableDate";case!!(c&&c(t)):return"shouldDisableMonth";case!!(d&&d(t)):return"shouldDisableYear";case!!(m&&r.isAfterDay(t,C)):return"disableFuture";case!!(i&&r.isBeforeDay(t,C)):return"disablePast";case!!(x&&r.isBeforeDay(t,x)):return"minDate";case!!(T&&r.isAfterDay(t,T)):return"maxDate";default:return null}};zE.valueManager=vm;function Nne(e){const{props:t,validator:n,value:r,timezone:s,onError:c}=e,d=bs(),i=U.useRef(n.valueManager.defaultErrorState),m=n({adapter:d,value:r,timezone:s,props:t}),x=n.valueManager.hasError(m);U.useEffect(()=>{c&&!n.valueManager.isSameError(m,i.current)&&c(m,r),i.current=m},[n,c,m,r]);const T=Er(C=>n({adapter:d,value:C,timezone:s,props:t}));return{validationError:m,hasValidationError:x,getValidationErrorForNewValue:T}}const tBe=5e3,Vne=e=>{var Zt;const t=bs(),n=Ov(),r=Al(),{manager:{validator:s,valueType:c,internal_valueManager:d,internal_fieldValueManager:i},internalPropsWithDefaults:m,internalPropsWithDefaults:{value:x,defaultValue:T,referenceDate:C,onChange:A,format:I,formatDensity:k="dense",selectedSections:B,onSelectedSectionsChange:j,shouldRespectLeadingZeros:V=!1,timezone:H,enableAccessibleFieldDOMStructure:G=!0},forwardedProps:{error:X}}=e,{value:Q,handleValueChange:ee,timezone:ce}=LE({name:"a field component",timezone:H,value:x,defaultValue:T,referenceDate:C,onChange:A,valueManager:d}),fe=U.useRef(Q);U.useEffect(()=>{fe.current=Q},[Q]);const{hasValidationError:ue}=Nne({props:m,validator:s,timezone:ce,value:Q,onError:m.onError}),ae=U.useMemo(()=>X!==void 0?X:ue,[ue,X]),xe=U.useMemo(()=>nFe(t),[t]),we=U.useMemo(()=>aFe(t,xe,ce),[t,xe,ce]),Me=U.useCallback(Ut=>i.getSectionsFromValue(Ut,kn=>KH({adapter:t,localeText:n,localizedDigits:xe,format:I,date:kn,formatDensity:k,shouldRespectLeadingZeros:V,enableAccessibleFieldDOMStructure:G,isRtl:r})),[i,I,n,xe,r,V,t,k,G]),[Se,Ae]=U.useState(()=>{const Ut=Me(Q),kn={sections:Ut,lastExternalValue:Q,lastSectionsDependencies:{format:I,isRtl:r,locale:t.locale},tempValueStrAndroid:null,characterQuery:null},Bn=VFe(Ut),bn=d.getInitialReferenceValue({referenceDate:C,value:Q,adapter:t,props:m,granularity:Bn,timezone:ce});return Pt({},kn,{referenceValue:bn})}),[_e,Pe]=Xf({controlled:B,default:null,name:"useField",state:"selectedSections"}),We=Ut=>{Pe(Ut),j==null||j(Ut)},Fe=U.useMemo(()=>aj(_e,Se.sections),[_e,Se.sections]),Ce=Fe==="all"?0:Fe,He=U.useMemo(()=>uFe(Se.sections,r&&!G),[Se.sections,r,G]),dt=U.useMemo(()=>Se.sections.every(Ut=>Ut.value===""),[Se.sections]),gt=Ut=>{const kn={validationError:s({adapter:t,value:Ut,timezone:ce,props:m})};ee(Ut,kn)},Nt=(Ut,kn)=>{const Bn=[...Se.sections];return Bn[Ut]=Pt({},Bn[Ut],{value:kn,modified:!0}),Bn},wt=U.useRef(null),ot=md(),st=Ut=>{Ce!=null&&(wt.current={sectionIndex:Ce,value:Ut},ot.start(0,()=>{wt.current=null}))},St=()=>{d.areValuesEqual(t,Q,d.emptyValue)?Ae(Ut=>Pt({},Ut,{sections:Ut.sections.map(kn=>Pt({},kn,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(Ae(Ut=>Pt({},Ut,{characterQuery:null})),gt(d.emptyValue))},Dt=()=>{if(Ce==null)return;const Ut=Se.sections[Ce];Ut.value!==""&&(st(""),i.getDateFromSection(Q,Ut)===null?Ae(kn=>Pt({},kn,{sections:Nt(Ce,""),tempValueStrAndroid:null,characterQuery:null})):(Ae(kn=>Pt({},kn,{characterQuery:null})),gt(i.updateDateInValue(Q,Ut,null))))},Et=Ut=>{const kn=(bn,Nn)=>{const ft=t.parse(bn,I);if(!t.isValid(ft))return null;const vn=KH({adapter:t,localeText:n,localizedDigits:xe,format:I,date:ft,formatDensity:k,shouldRespectLeadingZeros:V,enableAccessibleFieldDOMStructure:G,isRtl:r});return ZH(t,ft,vn,Nn,!1)},Bn=i.parseValueStr(Ut,Se.referenceValue,kn);gt(Bn)},yt=md(),Lt=({section:Ut,newSectionValue:kn,shouldGoToNextSection:Bn})=>{ot.clear(),yt.clear();const bn=i.getDateFromSection(Q,Ut);Bn&&Ce<Se.sections.length-1&&We(Ce+1);const Nn=Nt(Ce,kn),ft=i.getDateSectionsFromValue(Nn,Ut),vn=iFe(t,ft,xe);if(t.isValid(vn)){const Ot=ZH(t,vn,ft,i.getDateFromSection(Se.referenceValue,Ut),!0);return bn==null&&yt.start(0,()=>{fe.current===Q&&Ae(tn=>Pt({},tn,{sections:i.clearDateSections(Se.sections,Ut),tempValueStrAndroid:null}))}),gt(i.updateDateInValue(Q,Ut,Ot))}return ft.every(Ot=>Ot.value!=="")&&(bn==null||t.isValid(bn))?(st(kn),gt(i.updateDateInValue(Q,Ut,vn))):bn!=null?(st(kn),gt(i.updateDateInValue(Q,Ut,null))):Ae(Ot=>Pt({},Ot,{sections:Nn,tempValueStrAndroid:null}))},Ct=Ut=>Ae(kn=>Pt({},kn,{tempValueStrAndroid:Ut})),Wt=Er(Ut=>{Ae(kn=>Pt({},kn,{characterQuery:Ut}))});if(Q!==Se.lastExternalValue){let Ut;wt.current!=null&&!t.isValid(i.getDateFromSection(Q,Se.sections[wt.current.sectionIndex]))?Ut=Nt(wt.current.sectionIndex,wt.current.value):Ut=Me(Q),Ae(kn=>Pt({},kn,{lastExternalValue:Q,sections:Ut,sectionsDependencies:{format:I,isRtl:r,locale:t.locale},referenceValue:i.updateReferenceValue(t,Q,kn.referenceValue),tempValueStrAndroid:null}))}if(r!==Se.lastSectionsDependencies.isRtl||I!==Se.lastSectionsDependencies.format||t.locale!==Se.lastSectionsDependencies.locale){const Ut=Me(Q);Ae(kn=>Pt({},kn,{lastSectionsDependencies:{format:I,isRtl:r,locale:t.locale},sections:Ut,tempValueStrAndroid:null,characterQuery:null}))}Se.characterQuery!=null&&!ae&&Ce==null&&Wt(null),Se.characterQuery!=null&&((Zt=Se.sections[Se.characterQuery.sectionIndex])==null?void 0:Zt.type)!==Se.characterQuery.sectionType&&Wt(null),U.useEffect(()=>{wt.current!=null&&(wt.current=null)});const fn=md();return U.useEffect(()=>(Se.characterQuery!=null&&fn.start(tBe,()=>Wt(null)),()=>{}),[Se.characterQuery,Wt,fn]),U.useEffect(()=>{Se.tempValueStrAndroid!=null&&Ce!=null&&Dt()},[Se.sections]),{activeSectionIndex:Ce,areAllSectionsEmpty:dt,error:ae,localizedDigits:xe,parsedSelectedSections:Fe,sectionOrder:He,sectionsValueBoundaries:we,state:Se,timezone:ce,value:Q,clearValue:St,clearActiveSection:Dt,setCharacterQuery:Wt,setSelectedSections:We,setTempAndroidValueStr:Ct,updateSectionValue:Lt,updateValueFromValueStr:Et,getSectionsFromValue:Me}};function $ne(e){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:t},internalProps:n,skipContextFieldRefAssignment:r}=e,s=J5(),c=Dne(),d=wo(n.unstableFieldRef,r?null:c==null?void 0:c.fieldRef),i=s==null?void 0:s.setValue,m=U.useCallback((T,C)=>i==null?void 0:i(T,{validationError:C.validationError,shouldClose:!1}),[i]),x=U.useMemo(()=>c!=null&&s!=null?Pt({value:s.value,onChange:m,timezone:s.timezone,disabled:s.disabled,readOnly:s.readOnly,autoFocus:s.autoFocus&&!s.open,focused:s.open?!0:void 0,format:s.fieldFormat,formatDensity:c.formatDensity,enableAccessibleFieldDOMStructure:c.enableAccessibleFieldDOMStructure,selectedSections:c.selectedSections,onSelectedSectionsChange:c.onSelectedSectionsChange,unstableFieldRef:d},n):n,[s,c,n,m,d]);return t(x)}function t4(e){const{focused:t,domGetters:n,stateResponse:{parsedSelectedSections:r,state:s}}=e;if(!n.isReady())return;const c=document.getSelection();if(!c)return;if(r==null){c.rangeCount>0&&n.getRoot().contains(c.getRangeAt(0).startContainer)&&c.removeAllRanges(),t&&n.getRoot().blur();return}if(!n.getRoot().contains(yc(document)))return;const d=new window.Range;let i;r==="all"?i=n.getRoot():s.sections[r].type==="empty"?i=n.getSectionContainer(r):i=n.getSectionContent(r),d.selectNodeContents(i),i.focus(),c.removeAllRanges(),c.addRange(d)}function Une(e){const t=bs(),{manager:{internal_fieldValueManager:n},internalPropsWithDefaults:{minutesStep:r,disabled:s,readOnly:c},stateResponse:{state:d,value:i,activeSectionIndex:m,parsedSelectedSections:x,sectionsValueBoundaries:T,localizedDigits:C,timezone:A,sectionOrder:I,clearValue:k,clearActiveSection:B,setSelectedSections:j,updateSectionValue:V}}=e;return Er(H=>{if(!s)switch(!0){case((H.ctrlKey||H.metaKey)&&String.fromCharCode(H.keyCode)==="A"&&!H.shiftKey&&!H.altKey):{H.preventDefault(),j("all");break}case H.key==="ArrowRight":{if(H.preventDefault(),x==null)j(I.startIndex);else if(x==="all")j(I.endIndex);else{const G=I.neighbors[x].rightIndex;G!==null&&j(G)}break}case H.key==="ArrowLeft":{if(H.preventDefault(),x==null)j(I.endIndex);else if(x==="all")j(I.startIndex);else{const G=I.neighbors[x].leftIndex;G!==null&&j(G)}break}case H.key==="Delete":{if(H.preventDefault(),c)break;x==null||x==="all"?k():B();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(H.key):{if(H.preventDefault(),c||m==null)break;x==="all"&&j(m);const G=d.sections[m],X=rBe(t,A,G,H.key,T,C,n.getDateFromSection(i,G),{minutesStep:r});V({section:G,newSectionValue:X,shouldGoToNextSection:!1});break}}})}function nBe(e){switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function rBe(e,t,n,r,s,c,d,i){const m=nBe(r),x=r==="Home",T=r==="End",C=n.value===""||x||T,A=()=>{const k=s[n.type]({currentDate:d,format:n.format,contentType:n.contentType}),B=H=>Cne(e,H,k,c,n),j=n.type==="minutes"&&(i!=null&&i.minutesStep)?i.minutesStep:1;let V;if(C){if(n.type==="year"&&!T&&!x)return e.formatByString(e.date(void 0,t),n.format);m>0||x?V=k.minimum:V=k.maximum}else V=parseInt($0(n.value,c),10)+m*j;return V%j!==0&&((m<0||x)&&(V+=j-(j+V)%j),(m>0||T)&&(V-=V%j)),V>k.maximum?B(k.minimum+(V-k.maximum-1)%(k.maximum-k.minimum+1)):V<k.minimum?B(k.maximum-(k.minimum-V-1)%(k.maximum-k.minimum+1)):B(V)},I=()=>{const k=Ene(e,t,n.type,n.format);if(k.length===0)return n.value;if(C)return m>0||x?k[0]:k[k.length-1];const V=((k.indexOf(n.value)+m)%k.length+k.length)%k.length;return k[V]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?A():I()}function iBe(e){const{manager:t,focused:n,setFocused:r,domGetters:s,stateResponse:c,applyCharacterEditing:d,internalPropsWithDefaults:i,stateResponse:{parsedSelectedSections:m,sectionOrder:x,state:T,clearValue:C,setCharacterQuery:A,setSelectedSections:I,updateValueFromValueStr:k},internalPropsWithDefaults:{disabled:B=!1,readOnly:j=!1}}=e,V=Une({manager:t,internalPropsWithDefaults:i,stateResponse:c}),H=md(),G=Er(fe=>{B||!s.isReady()||(r(!0),m==="all"?H.start(0,()=>{const ue=document.getSelection().getRangeAt(0).startOffset;if(ue===0){I(x.startIndex);return}let ae=0,xe=0;for(;xe<ue&&ae<T.sections.length;){const we=T.sections[ae];ae+=1,xe+=`${we.startSeparator}${we.value||we.placeholder}${we.endSeparator}`.length}I(ae-1)}):n?s.getRoot().contains(fe.target)||I(x.startIndex):(r(!0),I(x.startIndex)))}),X=Er(fe=>{if(!s.isReady()||m!=="all")return;const ae=fe.target.textContent??"";s.getRoot().innerHTML=T.sections.map(xe=>`${xe.startSeparator}${xe.value||xe.placeholder}${xe.endSeparator}`).join(""),t4({focused:n,domGetters:s,stateResponse:c}),ae.length===0||ae.charCodeAt(0)===10?(C(),I("all")):ae.length>1?k(ae):(m==="all"&&I(0),d({keyPressed:ae,sectionIndex:0}))}),Q=Er(fe=>{if(j||m!=="all"){fe.preventDefault();return}const ue=fe.clipboardData.getData("text");fe.preventDefault(),A(null),k(ue)}),ee=Er(()=>{if(n||B||!s.isReady())return;const fe=yc(document);r(!0),s.getSectionIndexFromDOMElement(fe)!=null||I(x.startIndex)}),ce=Er(()=>{setTimeout(()=>{if(!s.isReady())return;const fe=yc(document);!s.getRoot().contains(fe)&&(r(!1),I(null))})});return{onKeyDown:V,onBlur:ce,onFocus:ee,onClick:G,onPaste:Q,onInput:X,contentEditable:m==="all",tabIndex:m===0?-1:0}}function oBe(e){const{manager:{internal_fieldValueManager:t},stateResponse:{areAllSectionsEmpty:n,state:r,updateValueFromValueStr:s}}=e,c=Er(i=>{s(i.target.value)});return{value:U.useMemo(()=>n?"":t.getV7HiddenInputValueFromSections(r.sections),[n,r.sections,t]),onChange:c}}function sBe(e){const{stateResponse:{setSelectedSections:t},internalPropsWithDefaults:{disabled:n=!1}}=e,r=U.useCallback(s=>c=>{n||c.isDefaultPrevented()||t(s)},[n,t]);return U.useCallback(s=>({"data-sectionindex":s,onClick:r(s)}),[r])}function aBe(e){const t=bs(),n=Ov(),r=kh(),{focused:s,domGetters:c,stateResponse:d,applyCharacterEditing:i,manager:{internal_fieldValueManager:m},stateResponse:{parsedSelectedSections:x,sectionsValueBoundaries:T,state:C,value:A,clearActiveSection:I,setCharacterQuery:k,setSelectedSections:B,updateSectionValue:j,updateValueFromValueStr:V},internalPropsWithDefaults:{disabled:H=!1,readOnly:G=!1}}=e,X=x==="all",Q=!X&&!H&&!G,ee=Er(we=>{if(!c.isReady())return;const Me=C.sections[we];c.getSectionContent(we).innerHTML=Me.value||Me.placeholder,t4({focused:s,domGetters:c,stateResponse:d})}),ce=Er(we=>{if(!c.isReady())return;const Me=we.target,Se=Me.textContent??"",Ae=c.getSectionIndexFromDOMElement(Me),_e=C.sections[Ae];if(G){ee(Ae);return}if(Se.length===0){if(_e.value===""){ee(Ae);return}const Pe=we.nativeEvent.inputType;if(Pe==="insertParagraph"||Pe==="insertLineBreak"){ee(Ae);return}ee(Ae),I();return}i({keyPressed:Se,sectionIndex:Ae}),ee(Ae)}),fe=Er(we=>{we.preventDefault()}),ue=Er(we=>{if(we.preventDefault(),G||H||typeof x!="number")return;const Me=C.sections[x],Se=we.clipboardData.getData("text"),Ae=/^[a-zA-Z]+$/.test(Se),_e=/^[0-9]+$/.test(Se),Pe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Se);Me.contentType==="letter"&&Ae||Me.contentType==="digit"&&_e||Me.contentType==="digit-with-letter"&&Pe?(k(null),j({section:Me,newSectionValue:Se,shouldGoToNextSection:!0})):!Ae&&!_e&&(k(null),V(Se))}),ae=Er(we=>{we.preventDefault(),we.dataTransfer.dropEffect="none"}),xe=U.useCallback(we=>()=>{H||B(we)},[H,B]);return U.useCallback((we,Me)=>{const Se=T[we.type]({currentDate:m.getDateFromSection(A,we),contentType:we.contentType,format:we.format});return{onInput:ce,onPaste:ue,onMouseUp:fe,onDragOver:ae,onFocus:xe(Me),"aria-labelledby":`${r}-${we.type}`,"aria-readonly":G,"aria-valuenow":cBe(we,t),"aria-valuemin":Se.minimum,"aria-valuemax":Se.maximum,"aria-valuetext":we.value?lBe(we,t):n.empty,"aria-label":n[we.type],"aria-disabled":H,tabIndex:X||Me>0?-1:0,contentEditable:!X&&!H&&!G,role:"spinbutton",id:`${r}-${we.type}`,"data-range-position":we.dateName||void 0,spellCheck:Q?!1:void 0,autoCapitalize:Q?"off":void 0,autoCorrect:Q?"off":void 0,children:we.value||we.placeholder,inputMode:we.contentType==="letter"?"text":"numeric"}},[T,r,X,H,G,Q,n,t,ce,ue,fe,ae,xe,m,A])}function lBe(e,t){if(e.value)switch(e.type){case"month":{if(e.contentType==="digit")return t.format(t.setMonth(t.date(),Number(e.value)-1),"month");const n=t.parse(e.value,e.format);return n?t.format(n,"month"):void 0}case"day":return e.contentType==="digit"?t.format(t.setDate(t.startOfYear(t.date()),Number(e.value)),"dayOfMonthFull"):e.value;case"weekDay":return;default:return}}function cBe(e,t){if(e.value)switch(e.type){case"weekDay":return e.contentType==="letter"?void 0:Number(e.value);case"meridiem":{const n=t.parse(`01:00 ${e.value}`,`${t.formats.hours12h}:${t.formats.minutes} ${e.format}`);return n?t.getHours(n)>=12?1:0:void 0}case"day":return e.contentType==="digit-with-letter"?parseInt(e.value,10):Number(e.value);case"month":{if(e.contentType==="digit")return Number(e.value);const n=t.parse(e.value,e.format);return n?t.getMonth(n)+1:void 0}default:return e.contentType!=="letter"?Number(e.value):void 0}}const uBe=e=>{const{props:t,manager:n,skipContextFieldRefAssignment:r,manager:{valueType:s,internal_useOpenPickerButtonAriaLabel:c}}=e,{internalProps:d,forwardedProps:i}=wne(t,s),m=$ne({manager:n,internalProps:d,skipContextFieldRefAssignment:r}),{sectionListRef:x,onBlur:T,onClick:C,onFocus:A,onInput:I,onPaste:k,onKeyDown:B,onClear:j,clearable:V}=i,{disabled:H=!1,readOnly:G=!1,autoFocus:X=!1,focused:Q,unstableFieldRef:ee}=m,ce=U.useRef(null),fe=wo(x,ce),ue=U.useMemo(()=>({isReady:()=>ce.current!=null,getRoot:()=>ce.current.getRoot(),getSectionContainer:Zt=>ce.current.getSectionContainer(Zt),getSectionContent:Zt=>ce.current.getSectionContent(Zt),getSectionIndexFromDOMElement:Zt=>ce.current.getSectionIndexFromDOMElement(Zt)}),[ce]),ae=Vne({manager:n,internalPropsWithDefaults:m,forwardedProps:i}),{areAllSectionsEmpty:xe,error:we,parsedSelectedSections:Me,sectionOrder:Se,state:Ae,value:_e,clearValue:Pe,setSelectedSections:We}=ae,Fe=jne({stateResponse:ae}),Ce=c(_e),[He,dt]=U.useState(!1);function gt(Zt=0){if(H||!ce.current||eW(ce)!=null)return;const Ut=aj(Zt,Ae.sections);dt(!0),ce.current.getSectionContent(Ut).focus()}const Nt=iBe({manager:n,internalPropsWithDefaults:m,stateResponse:ae,applyCharacterEditing:Fe,focused:He,setFocused:dt,domGetters:ue}),wt=oBe({manager:n,stateResponse:ae}),ot=sBe({stateResponse:ae,internalPropsWithDefaults:m}),st=aBe({manager:n,stateResponse:ae,applyCharacterEditing:Fe,internalPropsWithDefaults:m,domGetters:ue,focused:He}),St=Er(Zt=>{B==null||B(Zt),Nt.onKeyDown(Zt)}),Dt=Er(Zt=>{T==null||T(Zt),Nt.onBlur(Zt)}),Et=Er(Zt=>{A==null||A(Zt),Nt.onFocus(Zt)}),yt=Er(Zt=>{Zt.isDefaultPrevented()||(C==null||C(Zt),Nt.onClick(Zt))}),Lt=Er(Zt=>{k==null||k(Zt),Nt.onPaste(Zt)}),Ct=Er(Zt=>{I==null||I(Zt),Nt.onInput(Zt)}),Wt=Er((Zt,...Ut)=>{Zt.preventDefault(),j==null||j(Zt,...Ut),Pe(),tW(ce)?We(Se.startIndex):gt(0)}),fn=U.useMemo(()=>Ae.sections.map((Zt,Ut)=>{const kn=st(Zt,Ut);return{container:ot(Ut),content:st(Zt,Ut),before:{children:Zt.startSeparator},after:{children:Zt.endSeparator,"data-range-position":Zt.isEndFormatSeparator?kn["data-range-position"]:void 0}}}),[Ae.sections,ot,st]);return U.useEffect(()=>{if(ce.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));X&&!H&&ce.current&&ce.current.getSectionContent(Se.startIndex).focus()},[]),Qs(()=>{if(!(!He||!ce.current)){if(Me==="all")ce.current.getRoot().focus();else if(typeof Me=="number"){const Zt=ce.current.getSectionContent(Me);Zt&&Zt.focus()}}},[Me,He]),Qs(()=>{t4({focused:He,domGetters:ue,stateResponse:ae})}),U.useImperativeHandle(ee,()=>({getSections:()=>Ae.sections,getActiveSectionIndex:()=>eW(ce),setSelectedSections:Zt=>{if(H||!ce.current)return;const Ut=aj(Zt,Ae.sections);dt((Ut==="all"?0:Ut)!==null),We(Zt)},focusField:gt,isFieldFocused:()=>tW(ce)})),Pt({},i,Nt,{onBlur:Dt,onClick:yt,onFocus:Et,onInput:Ct,onPaste:Lt,onKeyDown:St,onClear:Wt},wt,{error:we,clearable:!!(V&&!xe&&!G&&!H),focused:Q??He,sectionListRef:fe,enableAccessibleFieldDOMStructure:!0,elements:fn,areAllSectionsEmpty:xe,disabled:H,readOnly:G,autoFocus:X,openPickerAriaLabel:Ce})};function eW(e){const t=yc(document);return!t||!e.current||!e.current.getRoot().contains(t)?null:e.current.getSectionIndexFromDOMElement(t)}function tW(e){const t=yc(document);return!!e.current&&e.current.getRoot().contains(t)}const Gb=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),dBe=(e,t,n)=>{let r=0,s=n?1:0;const c=[];for(let d=0;d<e.length;d+=1){const i=e[d],m=K5(i,n?"input-rtl":"input-ltr",t),x=`${i.startSeparator}${m}${i.endSeparator}`,T=Gb(x).length,C=x.length,A=Gb(m),I=s+(A===""?0:m.indexOf(A[0]))+i.startSeparator.length,k=I+A.length;c.push(Pt({},i,{start:r,end:r+T,startInInput:I,endInInput:k})),r+=T,s+=C}return c},hBe=e=>{const t=Al(),n=md(),r=md(),{props:s,manager:c,skipContextFieldRefAssignment:d,manager:{valueType:i,internal_valueManager:m,internal_fieldValueManager:x,internal_useOpenPickerButtonAriaLabel:T}}=e,{internalProps:C,forwardedProps:A}=wne(s,i),I=$ne({manager:c,internalProps:C,skipContextFieldRefAssignment:d}),{onFocus:k,onClick:B,onPaste:j,onBlur:V,onKeyDown:H,onClear:G,clearable:X,inputRef:Q,placeholder:ee}=A,{readOnly:ce=!1,disabled:fe=!1,autoFocus:ue=!1,focused:ae,unstableFieldRef:xe}=I,we=U.useRef(null),Me=wo(Q,we),Se=Vne({manager:c,internalPropsWithDefaults:I,forwardedProps:A}),{activeSectionIndex:Ae,areAllSectionsEmpty:_e,error:Pe,localizedDigits:We,parsedSelectedSections:Fe,sectionOrder:Ce,state:He,value:dt,clearValue:gt,clearActiveSection:Nt,setCharacterQuery:wt,setSelectedSections:ot,setTempAndroidValueStr:st,updateSectionValue:St,updateValueFromValueStr:Dt,getSectionsFromValue:Et}=Se,yt=jne({stateResponse:Se}),Lt=T(dt),Ct=U.useMemo(()=>dBe(He.sections,We,t),[He.sections,We,t]);function Wt(){const Xn=we.current.selectionStart??0;let or;Xn<=Ct[0].startInInput||Xn>=Ct[Ct.length-1].endInInput?or=1:or=Ct.findIndex(Fr=>Fr.startInInput-Fr.startSeparator.length>Xn);const Mn=or===-1?Ct.length-1:or-1;ot(Mn)}function fn(Xn=0){var or;yc(document)!==we.current&&((or=we.current)==null||or.focus(),ot(Xn))}const Zt=Er(Xn=>{k==null||k(Xn);const or=we.current;n.start(0,()=>{!or||or!==we.current||Ae==null&&(or.value.length&&Number(or.selectionEnd)-Number(or.selectionStart)===or.value.length?ot("all"):Wt())})}),Ut=Er((Xn,...or)=>{Xn.isDefaultPrevented()||(B==null||B(Xn,...or),Wt())}),kn=Er(Xn=>{if(j==null||j(Xn),Xn.preventDefault(),ce||fe)return;const or=Xn.clipboardData.getData("text");if(typeof Fe=="number"){const Mn=He.sections[Fe],Fr=/^[a-zA-Z]+$/.test(or),Cr=/^[0-9]+$/.test(or),xr=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(or);if(Mn.contentType==="letter"&&Fr||Mn.contentType==="digit"&&Cr||Mn.contentType==="digit-with-letter"&&xr){wt(null),St({section:Mn,newSectionValue:or,shouldGoToNextSection:!0});return}if(Fr||Cr)return}wt(null),Dt(or)}),Bn=Er(Xn=>{V==null||V(Xn),ot(null)}),bn=Er(Xn=>{if(ce)return;const or=Xn.target.value;if(or===""){gt();return}const Mn=Xn.nativeEvent.data,Fr=Mn&&Mn.length>1,Cr=Fr?Mn:or,xr=Gb(Cr);if(Fe==="all"&&ot(Ae),Ae==null||Fr){Dt(Fr?Mn:xr);return}let ir;if(Fe==="all"&&xr.length===1)ir=xr;else{const Yr=Gb(x.getV6InputValueFromSections(Ct,We,t));let Sr=-1,Dr=-1;for(let zo=0;zo<Yr.length;zo+=1)Sr===-1&&Yr[zo]!==xr[zo]&&(Sr=zo),Dr===-1&&Yr[Yr.length-zo-1]!==xr[xr.length-zo-1]&&(Dr=zo);const ki=Ct[Ae];if(Sr<ki.start||Yr.length-Dr-1>ki.end)return;const Vo=xr.length-Yr.length+ki.end-Gb(ki.endSeparator||"").length;ir=xr.slice(ki.start+Gb(ki.startSeparator||"").length,Vo)}if(ir.length===0){cFe()&&st(Cr),Nt();return}yt({keyPressed:ir,sectionIndex:Ae})}),Nn=Er((Xn,...or)=>{Xn.preventDefault(),G==null||G(Xn,...or),gt(),nW(we)?ot(Ce.startIndex):fn(0)}),ft=Une({manager:c,internalPropsWithDefaults:I,stateResponse:Se}),vn=Er(Xn=>{H==null||H(Xn),ft(Xn)}),Ot=U.useMemo(()=>ee!==void 0?ee:x.getV6InputValueFromSections(Et(m.emptyValue),We,t),[ee,x,Et,m.emptyValue,We,t]),tn=U.useMemo(()=>He.tempValueStrAndroid??x.getV6InputValueFromSections(He.sections,We,t),[He.sections,x,He.tempValueStrAndroid,We,t]);U.useEffect(()=>{we.current&&we.current===yc(document)&&ot("all")},[]),Qs(()=>{function Xn(){if(!we.current)return;if(Fe==null){we.current.scrollLeft&&(we.current.scrollLeft=0);return}if(we.current!==yc(document))return;const or=we.current.scrollTop;if(Fe==="all")we.current.select();else{const Mn=Ct[Fe],Fr=Mn.type==="empty"?Mn.startInInput-Mn.startSeparator.length:Mn.startInInput,Cr=Mn.type==="empty"?Mn.endInInput+Mn.endSeparator.length:Mn.endInInput;(Fr!==we.current.selectionStart||Cr!==we.current.selectionEnd)&&we.current===yc(document)&&we.current.setSelectionRange(Fr,Cr),r.start(0,()=>{we.current&&we.current===yc(document)&&we.current.selectionStart===we.current.selectionEnd&&(we.current.selectionStart!==Fr||we.current.selectionEnd!==Cr)&&Xn()})}we.current.scrollTop=or}Xn()});const Rn=U.useMemo(()=>Ae==null||He.sections[Ae].contentType==="letter"?"text":"numeric",[Ae,He.sections]),mr=!(we.current&&we.current===yc(document))&&_e;return U.useImperativeHandle(xe,()=>({getSections:()=>He.sections,getActiveSectionIndex:()=>{const Xn=we.current.selectionStart??0,or=we.current.selectionEnd??0;if(Xn===0&&or===0)return null;const Mn=Xn<=Ct[0].startInInput?1:Ct.findIndex(Fr=>Fr.startInInput-Fr.startSeparator.length>Xn);return Mn===-1?Ct.length-1:Mn-1},setSelectedSections:Xn=>ot(Xn),focusField:fn,isFieldFocused:()=>nW(we)})),Pt({},A,{error:Pe,clearable:!!(X&&!_e&&!ce&&!fe),onBlur:Bn,onClick:Ut,onFocus:Zt,onPaste:kn,onKeyDown:vn,onClear:Nn,inputRef:Me,enableAccessibleFieldDOMStructure:!1,placeholder:Ot,inputMode:Rn,autoComplete:"off",value:mr?"":tn,onChange:bn,focused:ae,disabled:fe,readOnly:ce,autoFocus:ue,openPickerAriaLabel:Lt})};function nW(e){return e.current===yc(document)}const fBe=e=>{const t=Dne();return(e.props.enableAccessibleFieldDOMStructure??(t==null?void 0:t.enableAccessibleFieldDOMStructure)??!0?uBe:hBe)(e)};function pBe(e={}){const{enableAccessibleFieldDOMStructure:t=!0}=e;return U.useMemo(()=>({valueType:"date",validator:zE,internal_valueManager:vm,internal_fieldValueManager:qFe,internal_enableAccessibleFieldDOMStructure:t,internal_useApplyDefaultValuesToFieldInternalProps:gBe,internal_useOpenPickerButtonAriaLabel:mBe}),[t])}function mBe(e){const t=bs(),n=Ov();return U.useMemo(()=>{const r=t.isValid(e)?t.format(e,"fullDate"):null;return n.openDatePickerDialogue(r)},[e,n,t])}function gBe(e){const t=bs(),n=FE(e);return U.useMemo(()=>Pt({},e,n,{format:e.format??t.formats.keyboardDate}),[e,n,t])}function FE(e){const t=bs(),n=_Fe();return U.useMemo(()=>({disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,minDate:qH(t,e.minDate,n.minDate),maxDate:qH(t,e.maxDate,n.maxDate)}),[e.minDate,e.maxDate,e.disableFuture,e.disablePast,t,n])}const yBe=e=>{const t=pBe(e);return fBe({manager:t,props:e})};function n4(e){const{ownerState:t}=ql(),n=Al();return U.useMemo(()=>Pt({},t,{isFieldDisabled:e.disabled??!1,isFieldReadOnly:e.readOnly??!1,isFieldRequired:e.required??!1,fieldDirection:n?"rtl":"ltr"}),[t,e.disabled,e.readOnly,e.required,n])}function vBe(e){return fr("MuiPickersTextField",e)}pr("MuiPickersTextField",["root","focused","disabled","error","required"]);function _Be(e){return fr("MuiPickersInputBase",e)}const e1=pr("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","inputSizeSmall","activeBar"]);function xBe(e){return fr("MuiPickersSectionList",e)}const SS=pr("MuiPickersSectionList",["root","section","sectionContent"]),bBe=["slots","slotProps","elements","sectionListRef","classes"],qne=Ft("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),Hne=Ft("span",{name:"MuiPickersSectionList",slot:"Section"})({}),Wne=Ft("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),Gne=Ft("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),wBe=e=>dr({root:["root"],section:["section"],sectionContent:["sectionContent"]},xBe,e);function SBe(e){const{slots:t,slotProps:n,element:r,classes:s}=e,{ownerState:c}=ql(),d=(t==null?void 0:t.section)??Hne,i=Co({elementType:d,externalSlotProps:n==null?void 0:n.section,externalForwardedProps:r.container,className:s.section,ownerState:c}),m=(t==null?void 0:t.sectionContent)??Gne,x=Co({elementType:m,externalSlotProps:n==null?void 0:n.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:s.sectionContent,ownerState:c}),T=(t==null?void 0:t.sectionSeparator)??Wne,C=Co({elementType:T,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.before,ownerState:Pt({},c,{separatorPosition:"before"})}),A=Co({elementType:T,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.after,ownerState:Pt({},c,{separatorPosition:"after"})});return z.jsxs(d,Pt({},i,{children:[z.jsx(T,Pt({},C)),z.jsx(m,Pt({},x)),z.jsx(T,Pt({},A))]}))}const TBe=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersSectionList"}),{slots:s,slotProps:c,elements:d,sectionListRef:i,classes:m}=r,x=xi(r,bBe),T=wBe(m),{ownerState:C}=ql(),A=U.useRef(null),I=wo(n,A),k=V=>{if(!A.current)throw new Error(`MUI X: Cannot call sectionListRef.${V} before the mount of the component.`);return A.current};U.useImperativeHandle(i,()=>({getRoot(){return k("getRoot")},getSectionContainer(V){return k("getSectionContainer").querySelector(`.${SS.section}[data-sectionindex="${V}"]`)},getSectionContent(V){return k("getSectionContent").querySelector(`.${SS.section}[data-sectionindex="${V}"] .${SS.sectionContent}`)},getSectionIndexFromDOMElement(V){const H=k("getSectionIndexFromDOMElement");if(V==null||!H.contains(V))return null;let G=null;return V.classList.contains(SS.section)?G=V:V.classList.contains(SS.sectionContent)&&(G=V.parentElement),G==null?null:Number(G.dataset.sectionindex)}}));const B=(s==null?void 0:s.root)??qne,j=Co({elementType:B,externalSlotProps:c==null?void 0:c.root,externalForwardedProps:x,additionalProps:{ref:I,suppressContentEditableWarning:!0},className:T.root,ownerState:C});return z.jsx(B,Pt({},j,{children:j.contentEditable?d.map(({content:V,before:H,after:G})=>`${H.children}${V.children}${G.children}`).join(""):z.jsx(U.Fragment,{children:d.map((V,H)=>z.jsx(SBe,{slots:s,slotProps:c,element:V,classes:T},H))})}))}),Yne=U.createContext(null),mP=()=>{const e=U.useContext(Yne);if(e==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return e},EBe=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],CBe=e=>Math.round(e*1e5)/1e5,gP=Ft("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:e})=>Pt({},e.typography.body1,{color:(e.vars||e).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${CBe(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),r4=Ft(qne,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:e})=>({padding:"4px 0 5px",fontFamily:e.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{textAlign:"right /*! @noflip */"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:e.palette.mode==="light"?.42:.5}}]})),MBe=Ft(Hne,{name:"MuiPickersInputBase",slot:"Section"})(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),ABe=Ft(Gne,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})(({theme:e})=>({fontFamily:e.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),RBe=Ft(Wne,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),DBe=Ft("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})(Pt({},_Ce)),PBe=Ft("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:e,ownerState:t})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:e.transitions.create(["width","left"],{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:t.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:t.sectionOffsets[1]}})),IBe=(e,t)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldReadOnly:s,hasFieldError:c,inputSize:d,isInputInFullWidth:i,inputColor:m,hasStartAdornment:x,hasEndAdornment:T}=t,C={root:["root",n&&!r&&"focused",r&&"disabled",s&&"readOnly",c&&"error",i&&"fullWidth",`color${Dn(m)}`,d==="small"&&"inputSizeSmall",x&&"adornedStart",T&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return dr(C,_Be,e)};function rW(e,t,n,r){var s;if(e.content.id){const c=(s=t.current)==null?void 0:s.querySelectorAll(`[data-sectionindex="${n}"] [data-range-position="${r}"]`);if(c)return Array.from(c).reduce((d,i)=>d+i.offsetWidth,0)}return 0}function kBe(e,t){var s,c,d,i,m;let n=0;if(((s=t.current)==null?void 0:s.getAttribute("data-active-range-position"))==="end")for(let x=e.length-1;x>=e.length/2;x-=1)n+=rW(e[x],t,x,"end");else for(let x=0;x<e.length/2;x+=1)n+=rW(e[x],t,x,"start");return{activeBarWidth:n,sectionOffsets:[((d=(c=t.current)==null?void 0:c.querySelector('[data-sectionindex="0"]'))==null?void 0:d.offsetLeft)||0,((m=(i=t.current)==null?void 0:i.querySelector(`[data-sectionindex="${e.length/2}"]`))==null?void 0:m.offsetLeft)||0]}}const i4=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersInputBase"}),{elements:s,areAllSectionsEmpty:c,value:d,onChange:i,id:m,endAdornment:x,startAdornment:T,renderSuffix:C,slots:A,slotProps:I,contentEditable:k,tabIndex:B,onInput:j,onPaste:V,onKeyDown:H,name:G,readOnly:X,inputProps:Q,inputRef:ee,sectionListRef:ce,onFocus:fe,onBlur:ue,classes:ae,ownerState:xe}=r,we=xi(r,EBe),Me=mP(),Se=U.useRef(null),Ae=U.useRef(null),_e=U.useRef([]),Pe=wo(n,Se),We=wo(Q==null?void 0:Q.ref,ee),Fe=jh();if(!Fe)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const Ce=xe??Me,He=Et=>{var yt;(yt=Fe.onFocus)==null||yt.call(Fe,Et),fe==null||fe(Et)},dt=Et=>{He(Et)},gt=Et=>{var yt,Lt;if(H==null||H(Et),Et.key==="Enter"&&!Et.defaultMuiPrevented){if((yt=Se.current)!=null&&yt.dataset.multiInput)return;const Ct=(Lt=Se.current)==null?void 0:Lt.closest("form"),Wt=Ct==null?void 0:Ct.querySelector('[type="submit"]');if(!Ct||!Wt)return;Et.preventDefault(),Ct.requestSubmit(Wt)}},Nt=Et=>{var yt;(yt=Fe.onBlur)==null||yt.call(Fe,Et),ue==null||ue(Et)};U.useEffect(()=>{Fe&&Fe.setAdornedStart(!!T)},[Fe,T]),U.useEffect(()=>{Fe&&(c?Fe.onEmpty():Fe.onFilled())},[Fe,c]);const wt=IBe(ae,Ce),ot=(A==null?void 0:A.root)||gP,st=Co({elementType:ot,externalSlotProps:I==null?void 0:I.root,externalForwardedProps:we,additionalProps:{"aria-invalid":Fe.error,ref:Pe},className:wt.root,ownerState:Ce}),St=(A==null?void 0:A.input)||r4,Dt=s.some(Et=>Et.content["data-range-position"]!==void 0);return U.useEffect(()=>{if(!Dt||!Ce.isPickerOpen)return;const{activeBarWidth:Et,sectionOffsets:yt}=kBe(s,Se);_e.current=[yt[0],yt[1]],Ae.current&&(Ae.current.style.width=`${Et}px`)},[s,Dt,Ce.isPickerOpen]),z.jsxs(ot,Pt({},st,{children:[T,z.jsx(TBe,{sectionListRef:ce,elements:s,contentEditable:k,tabIndex:B,className:wt.sectionsContainer,onFocus:He,onBlur:Nt,onInput:j,onPaste:V,onKeyDown:gt,slots:{root:St,section:MBe,sectionContent:ABe,sectionSeparator:RBe},slotProps:{root:Pt({},I==null?void 0:I.input,{ownerState:Ce}),sectionContent:{className:e1.sectionContent},sectionSeparator:({separatorPosition:Et})=>({className:Et==="before"?e1.sectionBefore:e1.sectionAfter})}}),x,C?C(Pt({},Fe)):null,z.jsx(DBe,Pt({name:G,className:wt.input,value:d,onChange:i,id:m,"aria-hidden":"true",tabIndex:-1,readOnly:X,required:Fe.required,disabled:Fe.disabled,onFocus:dt},Q,{ref:We})),Dt&&z.jsx(PBe,{className:wt.activeBar,ref:Ae,ownerState:{sectionOffsets:_e.current}})]}))});function OBe(e){return fr("MuiPickersOutlinedInput",e)}const Vf=Pt({},e1,pr("MuiPickersOutlinedInput",["root","notchedOutline","input"])),LBe=["children","className","label","notched","shrink"],zBe=Ft("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),iW=Ft("span")(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit"})),FBe=Ft("legend",{shouldForwardProp:e=>cm(e)&&e!=="notched"})(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]}));function BBe(e){const{className:t,label:n,notched:r}=e,s=xi(e,LBe),c=mP();return z.jsx(zBe,Pt({"aria-hidden":!0,className:t},s,{ownerState:c,children:z.jsx(FBe,{ownerState:c,notched:r,children:n?z.jsx(iW,{children:n}):z.jsx(iW,{className:"notranslate",children:"​"})})}))}const jBe=["label","autoFocus","ownerState","classes","notched"],NBe=Ft(gP,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Vf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Vf.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Vf.focused} .${Vf.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${Vf.disabled}`]:{[`& .${Vf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled},"*":{color:(e.vars||e).palette.action.disabled}},[`&.${Vf.error} .${Vf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},variants:Object.keys((e.vars??e).palette).filter(n=>{var r;return((r=(e.vars??e).palette[n])==null?void 0:r.main)??!1}).map(n=>({props:{inputColor:n},style:{[`&.${Vf.focused}:not(.${Vf.error}) .${Vf.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}}))}}),VBe=Ft(r4,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),$Be=e=>{const n=dr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},OBe,e);return Pt({},e,n)},Xne=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersOutlinedInput"}),{label:s,classes:c,notched:d}=r,i=xi(r,jBe),m=jh(),x=$Be(c);return z.jsx(i4,Pt({slots:{root:NBe,input:VBe},renderSuffix:T=>z.jsx(BBe,{shrink:!!(d||T.adornedStart||T.focused||T.filled),notched:!!(d||T.adornedStart||T.focused||T.filled),className:x.notchedOutline,label:s!=null&&s!==""&&(m!=null&&m.required)?z.jsxs(U.Fragment,{children:[s," ","*"]}):s})},i,{label:s,classes:x,ref:n}))});Xne.muiName="Input";function UBe(e){return fr("MuiPickersFilledInput",e)}const i0=Pt({},e1,pr("MuiPickersFilledInput",["root","underline","input"])),qBe=["label","autoFocus","disableUnderline","hiddenLabel","classes"],HBe=Ft(gP,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:e=>cm(e)&&e!=="disableUnderline"})(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${i0.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${i0.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[...Object.keys((e.vars??e).palette).filter(d=>(e.vars??e).palette[d].main).map(d=>{var i;return{props:{inputColor:d,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(i=(e.vars||e).palette[d])==null?void 0:i.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${i0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${i0.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${i0.disabled}, .${i0.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${i0.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),WBe=Ft(r4,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:e=>cm(e)&&e!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),GBe=(e,t)=>{const{inputHasUnderline:n}=t,s=dr({root:["root",n&&"underline"],input:["input"]},UBe,e);return Pt({},e,s)},Zne=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersFilledInput"}),{label:s,disableUnderline:c=!1,hiddenLabel:d=!1,classes:i}=r,m=xi(r,qBe),x=mP(),T=Pt({},x,{inputHasUnderline:!c}),C=GBe(i,T);return z.jsx(i4,Pt({slots:{root:HBe,input:WBe},slotProps:{root:{disableUnderline:c},input:{hiddenLabel:d}}},m,{label:s,classes:C,ref:n,ownerState:T}))});Zne.muiName="Input";function YBe(e){return fr("MuiPickersFilledInput",e)}const TS=Pt({},e1,pr("MuiPickersInput",["root","underline","input"])),XBe=["label","autoFocus","disableUnderline","ownerState","classes"],ZBe=Ft(gP,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:e=>cm(e)&&e!=="disableUnderline"})(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((e.vars??e).palette).filter(r=>(e.vars??e).palette[r].main).map(r=>({props:{inputColor:r,inputHasUnderline:!0},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}})),{props:{inputHasUnderline:!0},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${TS.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${TS.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${TS.disabled}, .${TS.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${TS.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),KBe=(e,t)=>{const{inputHasUnderline:n}=t,s=dr({root:["root",!n&&"underline"],input:["input"]},YBe,e);return Pt({},e,s)},Kne=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersInput"}),{label:s,disableUnderline:c=!1,classes:d}=r,i=xi(r,XBe),m=mP(),x=Pt({},m,{inputHasUnderline:!c}),T=KBe(d,x);return z.jsx(i4,Pt({slots:{root:ZBe},slotProps:{root:{disableUnderline:c}}},i,{ownerState:x,label:s,classes:T,ref:n}))});Kne.muiName="Input";const QBe=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","hiddenLabel","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],JBe={standard:Kne,filled:Zne,outlined:Xne},eje=Ft(tu,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),tje=(e,t)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldRequired:s}=t;return dr({root:["root",n&&!r&&"focused",r&&"disabled",s&&"required"]},vBe,e)},Qne=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersTextField"}),{onFocus:s,onBlur:c,className:d,classes:i,color:m="primary",disabled:x=!1,error:T=!1,variant:C="outlined",required:A=!1,hiddenLabel:I=!1,InputProps:k,inputProps:B,inputRef:j,sectionListRef:V,elements:H,areAllSectionsEmpty:G,onClick:X,onKeyDown:Q,onKeyUp:ee,onPaste:ce,onInput:fe,endAdornment:ue,startAdornment:ae,tabIndex:xe,contentEditable:we,focused:Me,value:Se,onChange:Ae,fullWidth:_e,id:Pe,name:We,helperText:Fe,FormHelperTextProps:Ce,label:He,InputLabelProps:dt,"data-active-range-position":gt}=r,Nt=xi(r,QBe),wt=U.useRef(null),ot=wo(n,wt),st=kh(Pe),St=Fe&&st?`${st}-helper-text`:void 0,Dt=He&&st?`${st}-label`:void 0,Et=n4({disabled:r.disabled,required:r.required,readOnly:k==null?void 0:k.readOnly}),yt=U.useMemo(()=>Pt({},Et,{isFieldValueEmpty:G,isFieldFocused:Me??!1,hasFieldError:T??!1,inputSize:r.size??"medium",inputColor:m??"primary",isInputInFullWidth:_e??!1,hasStartAdornment:!!(ae??(k==null?void 0:k.startAdornment)),hasEndAdornment:!!(ue??(k==null?void 0:k.endAdornment)),inputHasLabel:!!He}),[Et,G,Me,T,r.size,m,_e,ae,ue,k==null?void 0:k.startAdornment,k==null?void 0:k.endAdornment,He]),Lt=tje(i,yt),Ct=JBe[C],Wt={};return C==="outlined"?(dt&&typeof dt.shrink<"u"&&(Wt.notched=dt.shrink),Wt.label=He):C==="filled"&&(Wt.hiddenLabel=I),z.jsx(Yne.Provider,{value:yt,children:z.jsxs(eje,Pt({className:$n(Lt.root,d),ref:ot,focused:Me,disabled:x,variant:C,error:T,color:m,fullWidth:_e,required:A,ownerState:yt},Nt,{children:[He!=null&&He!==""&&z.jsx(Xg,Pt({htmlFor:st,id:Dt},dt,{children:He})),z.jsx(Ct,Pt({elements:H,areAllSectionsEmpty:G,onClick:X,onKeyDown:Q,onKeyUp:ee,onInput:fe,onPaste:ce,onFocus:s,onBlur:c,endAdornment:ue,startAdornment:ae,tabIndex:xe,contentEditable:we,value:Se,onChange:Ae,id:st,fullWidth:_e,inputProps:B,inputRef:j,sectionListRef:V,label:He,name:We,role:"group","aria-labelledby":Dt,"aria-describedby":St,"aria-live":St?"polite":void 0,"data-active-range-position":gt},Wt,k)),Fe&&z.jsx(hJ,Pt({id:St},Ce,{children:Fe}))]}))})}),nje=["enableAccessibleFieldDOMStructure"],rje=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],ije=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],oje=["ownerState"],sje=["ownerState"],aje=["ownerState"],lje=["ownerState"],cje=["InputProps","inputProps"],uje=e=>{let{enableAccessibleFieldDOMStructure:t}=e,n=xi(e,nje);if(t){const{InputProps:j,readOnly:V,onClear:H,clearable:G,clearButtonPosition:X,openPickerButtonPosition:Q,openPickerAriaLabel:ee}=n,ce=xi(n,rje);return{clearable:G,onClear:H,clearButtonPosition:X,openPickerButtonPosition:Q,openPickerAriaLabel:ee,textFieldProps:Pt({},ce,{InputProps:Pt({},j??{},{readOnly:V})})}}const{onPaste:r,onKeyDown:s,inputMode:c,readOnly:d,InputProps:i,inputProps:m,inputRef:x,onClear:T,clearable:C,clearButtonPosition:A,openPickerButtonPosition:I,openPickerAriaLabel:k}=n,B=xi(n,ije);return{clearable:C,onClear:T,clearButtonPosition:A,openPickerButtonPosition:I,openPickerAriaLabel:k,textFieldProps:Pt({},B,{InputProps:Pt({},i??{},{readOnly:d}),inputProps:Pt({},m??{},{inputMode:c,onPaste:r,onKeyDown:s,ref:x})})}},o4=U.createContext({slots:{},slotProps:{},inputRef:void 0});function dje(e){var Fe,Ce;const{slots:t,slotProps:n,fieldResponse:r,defaultOpenPickerIcon:s}=e,c=Ov(),d=J5(),i=U.useContext(o4),{textFieldProps:m,onClear:x,clearable:T,openPickerAriaLabel:C,clearButtonPosition:A="end",openPickerButtonPosition:I="end"}=uje(r),k=n4(m),B=Er(He=>{He.preventDefault(),d==null||d.setOpen(dt=>!dt)}),j=d?d.triggerStatus:"hidden",V=T?A:null,H=j!=="hidden"?I:null,G=(t==null?void 0:t.textField)??i.slots.textField??(r.enableAccessibleFieldDOMStructure===!1?Vi:Qne),X=(t==null?void 0:t.inputAdornment)??i.slots.inputAdornment??BS,Q=Co({elementType:X,externalSlotProps:IA(i.slotProps.inputAdornment,n==null?void 0:n.inputAdornment),additionalProps:{position:"start"},ownerState:Pt({},k,{position:"start"})}),ee=xi(Q,oje),ce=Co({elementType:X,externalSlotProps:n==null?void 0:n.inputAdornment,additionalProps:{position:"end"},ownerState:Pt({},k,{position:"end"})}),fe=xi(ce,sje),ue=i.slots.openPickerButton??Kc,ae=Co({elementType:ue,externalSlotProps:i.slotProps.openPickerButton,additionalProps:{disabled:j==="disabled",onClick:B,"aria-label":C,edge:m.variant!=="standard"?H:!1},ownerState:k}),xe=xi(ae,aje),we=i.slots.openPickerIcon??s,Me=Co({elementType:we,externalSlotProps:i.slotProps.openPickerIcon,ownerState:k}),Se=(t==null?void 0:t.clearButton)??i.slots.clearButton??Kc,Ae=Co({elementType:Se,externalSlotProps:IA(i.slotProps.clearButton,n==null?void 0:n.clearButton),className:"clearButton",additionalProps:{title:c.fieldClearLabel,tabIndex:-1,onClick:x,disabled:r.disabled||r.readOnly,edge:m.variant!=="standard"&&V!==H?V:!1},ownerState:k}),_e=xi(Ae,lje),Pe=(t==null?void 0:t.clearIcon)??i.slots.clearIcon??TFe,We=Co({elementType:Pe,externalSlotProps:IA(i.slotProps.clearIcon,n==null?void 0:n.clearIcon),additionalProps:{fontSize:"small"},ownerState:k});return m.ref=wo(m.ref,d==null?void 0:d.rootRef),m.InputProps||(m.InputProps={}),d&&(m.InputProps.ref=d.triggerRef),!((Fe=m.InputProps)!=null&&Fe.startAdornment)&&(V==="start"||H==="start")&&(m.InputProps.startAdornment=z.jsxs(X,Pt({},ee,{children:[H==="start"&&z.jsx(ue,Pt({},xe,{children:z.jsx(we,Pt({},Me))})),V==="start"&&z.jsx(Se,Pt({},_e,{children:z.jsx(Pe,Pt({},We))}))]}))),!((Ce=m.InputProps)!=null&&Ce.endAdornment)&&(V==="end"||H==="end")&&(m.InputProps.endAdornment=z.jsxs(X,Pt({},fe,{children:[V==="end"&&z.jsx(Se,Pt({},_e,{children:z.jsx(Pe,Pt({},We))})),H==="end"&&z.jsx(ue,Pt({},xe,{children:z.jsx(we,Pt({},Me))}))]}))),V!=null&&(m.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(m.sx)?m.sx:[m.sx]]),z.jsx(G,Pt({},m))}function IA(e,t){return e?t?n=>Pt({},i1(t,n),i1(e,n)):e:t}function hje(e){const{ref:t,externalForwardedProps:n,slotProps:r}=e,s=U.useContext(o4),c=J5(),d=n4(n),{InputProps:i,inputProps:m}=n,x=xi(n,cje),T=Co({elementType:Qne,externalSlotProps:IA(s.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:x,additionalProps:{ref:t,sx:c==null?void 0:c.rootSx,label:c==null?void 0:c.label,name:c==null?void 0:c.name,className:c==null?void 0:c.rootClassName,inputRef:s.inputRef},ownerState:d});return T.inputProps=Pt({},m,T.inputProps),T.InputProps=Pt({},i,T.InputProps),T}function Jne(e){const{slots:t={},slotProps:n={},inputRef:r,children:s}=e,c=U.useMemo(()=>({inputRef:r,slots:{openPickerButton:t.openPickerButton,openPickerIcon:t.openPickerIcon,textField:t.textField,inputAdornment:t.inputAdornment,clearIcon:t.clearIcon,clearButton:t.clearButton},slotProps:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton}}),[r,t.openPickerButton,t.openPickerIcon,t.textField,t.inputAdornment,t.clearIcon,t.clearButton,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton]);return z.jsx(o4.Provider,{value:c,children:s})}const fje=["slots","slotProps"],ere=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiDateField"}),{slots:s,slotProps:c}=r,d=xi(r,fje),i=hje({slotProps:c,ref:n,externalForwardedProps:d}),m=yBe(i);return z.jsx(dje,{slots:s,slotProps:c,fieldResponse:m,defaultOpenPickerIcon:SFe})}),tre=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:r,maxDate:s,disableFuture:c,disablePast:d,timezone:i})=>{const m=bs();return U.useCallback(x=>zE({adapter:m,value:x,timezone:i,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:r,maxDate:s,disableFuture:c,disablePast:d}})!==null,[m,e,t,n,r,s,c,d,i])},pje=(e,t)=>(n,r)=>{switch(r.type){case"setVisibleDate":return Pt({},n,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!t.isSameMonth(r.month,n.currentMonth)&&!e&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const s=r.newTimezone;if(t.getTimezone(n.currentMonth)===s)return n;let c=t.setTimezone(n.currentMonth,s);return t.getMonth(c)!==t.getMonth(n.currentMonth)&&(c=t.setMonth(c,t.getMonth(n.currentMonth))),Pt({},n,{currentMonth:c})}case"finishMonthSwitchingAnimation":return Pt({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},mje=e=>{const{value:t,referenceDate:n,disableFuture:r,disablePast:s,maxDate:c,minDate:d,onMonthChange:i,onYearChange:m,reduceAnimations:x,shouldDisableDate:T,timezone:C,getCurrentMonthFromVisibleDate:A}=e,I=bs(),k=U.useRef(pje(!!x,I)).current,B=U.useMemo(()=>vm.getInitialReferenceValue({value:t,adapter:I,timezone:C,props:e,referenceDate:n,granularity:tm.day}),[n,C]),[j,V]=U.useReducer(k,{isMonthSwitchingAnimating:!1,focusedDay:B,currentMonth:I.startOfMonth(B),slideDirection:"left"}),H=tre({shouldDisableDate:T,minDate:d,maxDate:c,disableFuture:r,disablePast:s,timezone:C});U.useEffect(()=>{V({type:"changeMonthTimezone",newTimezone:I.getTimezone(B)})},[B,I]);const G=Er(({target:Q,reason:ee})=>{if(ee==="cell-interaction"&&j.focusedDay!=null&&I.isSameDay(Q,j.focusedDay))return;const ce=ee==="cell-interaction";let fe,ue;if(ee==="cell-interaction")fe=A(Q,j.currentMonth),ue=Q;else if(fe=I.isSameMonth(Q,j.currentMonth)?j.currentMonth:I.startOfMonth(Q),ue=Q,H(ue)){const we=I.startOfMonth(Q),Me=I.endOfMonth(Q);ue=BT({adapter:I,date:ue,minDate:I.isBefore(d,we)?we:d,maxDate:I.isAfter(c,Me)?Me:c,disablePast:s,disableFuture:r,isDateDisabled:H,timezone:C})}const ae=!I.isSameMonth(j.currentMonth,fe),xe=!I.isSameYear(j.currentMonth,fe);ae&&(i==null||i(fe)),xe&&(m==null||m(I.startOfYear(fe))),V({type:"setVisibleDate",month:fe,direction:I.isAfterDay(fe,j.currentMonth)?"left":"right",focusedDay:j.focusedDay!=null&&ue!=null&&I.isSameDay(ue,j.focusedDay)?j.focusedDay:ue,skipAnimation:ce})}),X=U.useCallback(()=>{V({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:B,calendarState:j,setVisibleDate:G,isDateDisabled:H,onMonthSwitchingAnimationEnd:X}},gje=e=>fr("MuiPickersFadeTransitionGroup",e);pr("MuiPickersFadeTransitionGroup",["root"]);const yje=["children"],vje=e=>dr({root:["root"]},gje,e),_je=Ft(wE,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function nre(e){const t=Js({props:e,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:r,transKey:s,classes:c}=t,{children:d}=t,i=xi(t,yje),m=vje(c),x=Zo();return r?d:z.jsx(_je,{className:$n(m.root,n),ownerState:i,children:z.jsx(gm,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:x.transitions.duration.enteringScreen,enter:x.transitions.duration.enteringScreen,exit:0},children:d},s)})}const xje=e=>fr("MuiPickersSlideTransition",e),fh=pr("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),bje=["children","className","reduceAnimations","slideDirection","transKey","classes"],wje=(e,t)=>{const{slideDirection:n}=t,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return dr(r,xje,e)},Sje=Ft(wE,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${fh["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${fh["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${fh.slideEnterActive}`]:t.slideEnterActive},{[`.${fh.slideExit}`]:t.slideExit},{[`.${fh["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${fh["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${fh["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${fh["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${fh.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${fh.slideExit}`]:{transform:"translate(0%)"},[`& .${fh["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${fh["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function Tje(e){const t=Js({props:e,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:s,slideDirection:c,transKey:d,classes:i}=t,m=xi(t,bje),{ownerState:x}=ql(),T=Pt({},x,{slideDirection:c}),C=wje(i,T),A=Zo();if(s)return z.jsx("div",{className:$n(C.root,r),children:n});const I={exit:C.exit,enterActive:C.enterActive,enter:C.enter,exitActive:C.exitActive};return z.jsx(Sje,{className:$n(C.root,r),childFactory:k=>U.cloneElement(k,{classNames:I}),role:"presentation",ownerState:T,children:z.jsx(LN,Pt({mountOnEnter:!0,unmountOnExit:!0,timeout:A.transitions.duration.complex,classNames:I},m,{children:n}),d)})}const Eje=e=>fr("MuiDayCalendar",e);pr("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const Cje=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],Mje=["ownerState"],Aje=e=>dr({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},Eje,e),rre=(jT+fP*2)*6,Rje=Ft("div",{name:"MuiDayCalendar",slot:"Root"})({}),Dje=Ft("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),Pje=Ft(En,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),Ije=Ft(En,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.disabled})),kje=Ft(En,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:e})=>Pt({},e.typography.caption,{width:jT,height:jT,padding:0,margin:`0 ${fP}px`,color:(e.vars||e).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),Oje=Ft("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:rre}),Lje=Ft(Tje,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:rre}),zje=Ft("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),Fje=Ft("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${fP}px 0`,display:"flex",justifyContent:"center"});function Bje(e){let{parentProps:t,day:n,focusedDay:r,selectedDays:s,isDateDisabled:c,currentMonthNumber:d,isViewFocused:i}=e,m=xi(e,Cje);const{disabled:x,disableHighlightToday:T,isMonthSwitchingAnimating:C,showDaysOutsideCurrentMonth:A,slots:I,slotProps:k,timezone:B}=t,j=bs(),V=hP(B),H=r!=null&&j.isSameDay(n,r),G=i&&H,X=s.some(Se=>j.isSameDay(Se,n)),Q=j.isSameDay(n,V),ee=U.useMemo(()=>x||c(n),[x,c,n]),ce=U.useMemo(()=>j.getMonth(n)!==d,[j,n,d]),fe=zne({day:n,selected:X,disabled:ee,today:Q,outsideCurrentMonth:ce,disableMargin:void 0,disableHighlightToday:T,showDaysOutsideCurrentMonth:A}),ue=(I==null?void 0:I.day)??eBe,ae=Co({elementType:ue,externalSlotProps:k==null?void 0:k.day,additionalProps:Pt({disableHighlightToday:T,showDaysOutsideCurrentMonth:A,role:"gridcell",isAnimating:C,"data-timestamp":j.toJsDate(n).valueOf()},m),ownerState:Pt({},fe,{day:n,isDayDisabled:ee,isDaySelected:X})}),xe=xi(ae,Mje),we=U.useMemo(()=>{const Se=j.startOfMonth(j.setMonth(n,d));return A?j.isSameDay(n,j.startOfWeek(Se)):j.isSameDay(n,Se)},[d,n,A,j]),Me=U.useMemo(()=>{const Se=j.endOfMonth(j.setMonth(n,d));return A?j.isSameDay(n,j.endOfWeek(Se)):j.isSameDay(n,Se)},[d,n,A,j]);return z.jsx(ue,Pt({},xe,{day:n,disabled:ee,autoFocus:!ce&&G,today:Q,outsideCurrentMonth:ce,isFirstVisibleCell:we,isLastVisibleCell:Me,selected:X,tabIndex:H?0:-1,"aria-selected":X,"aria-current":Q?"date":void 0}))}function jje(e){const t=Js({props:e,name:"MuiDayCalendar"}),n=bs(),{onFocusedDayChange:r,className:s,classes:c,currentMonth:d,selectedDays:i,focusedDay:m,loading:x,onSelectedDaysChange:T,onMonthSwitchingAnimationEnd:C,readOnly:A,reduceAnimations:I,renderLoading:k=()=>z.jsx("span",{children:"..."}),slideDirection:B,TransitionProps:j,disablePast:V,disableFuture:H,minDate:G,maxDate:X,shouldDisableDate:Q,shouldDisableMonth:ee,shouldDisableYear:ce,dayOfWeekFormatter:fe=yt=>n.format(yt,"weekdayShort").charAt(0).toUpperCase(),hasFocus:ue,onFocusedViewChange:ae,gridLabelId:xe,displayWeekNumber:we,fixedWeekNumber:Me,timezone:Se}=t,Ae=hP(Se),_e=Aje(c),Pe=Al(),We=tre({shouldDisableDate:Q,shouldDisableMonth:ee,shouldDisableYear:ce,minDate:G,maxDate:X,disablePast:V,disableFuture:H,timezone:Se}),Fe=Ov(),Ce=Er(yt=>{A||T(yt)}),He=yt=>{We(yt)||(r(yt),ae==null||ae(!0))},dt=Er((yt,Lt)=>{switch(yt.key){case"ArrowUp":He(n.addDays(Lt,-7)),yt.preventDefault();break;case"ArrowDown":He(n.addDays(Lt,7)),yt.preventDefault();break;case"ArrowLeft":{const Ct=n.addDays(Lt,Pe?1:-1),Wt=n.addMonths(Lt,Pe?1:-1),fn=BT({adapter:n,date:Ct,minDate:Pe?Ct:n.startOfMonth(Wt),maxDate:Pe?n.endOfMonth(Wt):Ct,isDateDisabled:We,timezone:Se});He(fn||Ct),yt.preventDefault();break}case"ArrowRight":{const Ct=n.addDays(Lt,Pe?-1:1),Wt=n.addMonths(Lt,Pe?-1:1),fn=BT({adapter:n,date:Ct,minDate:Pe?n.startOfMonth(Wt):Ct,maxDate:Pe?Ct:n.endOfMonth(Wt),isDateDisabled:We,timezone:Se});He(fn||Ct),yt.preventDefault();break}case"Home":He(n.startOfWeek(Lt)),yt.preventDefault();break;case"End":He(n.endOfWeek(Lt)),yt.preventDefault();break;case"PageUp":He(n.addMonths(Lt,1)),yt.preventDefault();break;case"PageDown":He(n.addMonths(Lt,-1)),yt.preventDefault();break}}),gt=Er((yt,Lt)=>He(Lt)),Nt=Er((yt,Lt)=>{m!=null&&n.isSameDay(m,Lt)&&(ae==null||ae(!1))}),wt=n.getMonth(d),ot=n.getYear(d),st=U.useMemo(()=>i.filter(yt=>!!yt).map(yt=>n.startOfDay(yt)),[n,i]),St=`${ot}-${wt}`,Dt=U.useMemo(()=>U.createRef(),[St]),Et=U.useMemo(()=>{const yt=n.getWeekArray(d);let Lt=n.addMonths(d,1);for(;Me&&yt.length<Me;){const Ct=n.getWeekArray(Lt),Wt=n.isSameDay(yt[yt.length-1][0],Ct[0][0]);Ct.slice(Wt?1:0).forEach(fn=>{yt.length<Me&&yt.push(fn)}),Lt=n.addMonths(Lt,1)}return yt},[d,Me,n]);return z.jsxs(Rje,{role:"grid","aria-labelledby":xe,className:_e.root,children:[z.jsxs(Dje,{role:"row",className:_e.header,children:[we&&z.jsx(Ije,{variant:"caption",role:"columnheader","aria-label":Fe.calendarWeekNumberHeaderLabel,className:_e.weekNumberLabel,children:Fe.calendarWeekNumberHeaderText}),eFe(n,Ae).map((yt,Lt)=>z.jsx(Pje,{variant:"caption",role:"columnheader","aria-label":n.format(yt,"weekday"),className:_e.weekDayLabel,children:fe(yt)},Lt.toString()))]}),x?z.jsx(Oje,{className:_e.loadingContainer,children:k()}):z.jsx(Lje,Pt({transKey:St,onExited:C,reduceAnimations:I,slideDirection:B,className:$n(s,_e.slideTransition)},j,{nodeRef:Dt,children:z.jsx(zje,{ref:Dt,role:"rowgroup",className:_e.monthContainer,children:Et.map((yt,Lt)=>z.jsxs(Fje,{role:"row",className:_e.weekContainer,"aria-rowindex":Lt+1,children:[we&&z.jsx(kje,{className:_e.weekNumber,role:"rowheader","aria-label":Fe.calendarWeekNumberAriaLabelText(n.getWeekNumber(yt[0])),children:Fe.calendarWeekNumberText(n.getWeekNumber(yt[0]))}),yt.map((Ct,Wt)=>z.jsx(Bje,{parentProps:t,day:Ct,selectedDays:st,isViewFocused:ue,focusedDay:m,onKeyDown:dt,onFocus:gt,onBlur:Nt,onDaySelect:Ce,isDateDisabled:We,currentMonthNumber:wt,"aria-colindex":Wt+1},Ct.toString()))]},`week-${yt[0]}`))})}))]})}function ire(e){return fr("MuiMonthCalendar",e)}const WM=pr("MuiMonthCalendar",["root","button","disabled","selected"]),Nje=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],Vje=(e,t)=>{const n={button:["button",t.isMonthDisabled&&"disabled",t.isMonthSelected&&"selected"]};return dr(n,ire,e)},$je=Ft("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${WM.disabled}`]:t.disabled},{[`&.${WM.selected}`]:t.selected}]})(({theme:e})=>Pt({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${WM.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${WM.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),Uje=U.memo(function(t){const{autoFocus:n,classes:r,disabled:s,selected:c,value:d,onClick:i,onKeyDown:m,onFocus:x,onBlur:T,slots:C,slotProps:A}=t,I=xi(t,Nje),k=U.useRef(null),{ownerState:B}=ql(),j=Pt({},B,{isMonthDisabled:s,isMonthSelected:c}),V=Vje(r,j);Qs(()=>{var X;n&&((X=k.current)==null||X.focus())},[n]);const H=(C==null?void 0:C.monthButton)??$je,G=Co({elementType:H,externalSlotProps:A==null?void 0:A.monthButton,externalForwardedProps:I,additionalProps:{disabled:s,ref:k,type:"button",role:"radio","aria-checked":c,onClick:X=>i(X,d),onKeyDown:X=>m(X,d),onFocus:X=>x(X,d),onBlur:X=>T(X,d)},ownerState:j,className:V.button});return z.jsx(H,Pt({},G))}),qje=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],Hje=e=>dr({root:["root"]},ire,e);function Wje(e,t){const n=Js({props:e,name:t}),r=FE(n);return Pt({},n,r,{monthsPerRow:n.monthsPerRow??3})}const Gje=Ft("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:e=>cm(e)&&e!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:pP,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),Yje=U.forwardRef(function(t,n){const r=Wje(t,"MuiMonthCalendar"),{autoFocus:s,className:c,classes:d,value:i,defaultValue:m,referenceDate:x,disabled:T,disableFuture:C,disablePast:A,maxDate:I,minDate:k,onChange:B,shouldDisableMonth:j,readOnly:V,onMonthFocus:H,hasFocus:G,onFocusedViewChange:X,monthsPerRow:Q,timezone:ee,gridLabelId:ce,slots:fe,slotProps:ue}=r,ae=xi(r,qje),{value:xe,handleValueChange:we,timezone:Me}=LE({name:"MonthCalendar",timezone:ee,value:i,defaultValue:m,referenceDate:x,onChange:B,valueManager:vm}),Se=hP(Me),Ae=Al(),_e=bs(),{ownerState:Pe}=ql(),We=U.useMemo(()=>vm.getInitialReferenceValue({value:xe,adapter:_e,props:r,timezone:Me,referenceDate:x,granularity:tm.month}),[]),Fe=Hje(d),Ce=U.useMemo(()=>_e.getMonth(Se),[_e,Se]),He=U.useMemo(()=>xe!=null?_e.getMonth(xe):null,[xe,_e]),[dt,gt]=U.useState(()=>He||_e.getMonth(We)),[Nt,wt]=Xf({name:"MonthCalendar",state:"hasFocus",controlled:G,default:s??!1}),ot=Er(Ct=>{wt(Ct),X&&X(Ct)}),st=U.useCallback(Ct=>{const Wt=_e.startOfMonth(A&&_e.isAfter(Se,k)?Se:k),fn=_e.startOfMonth(C&&_e.isBefore(Se,I)?Se:I),Zt=_e.startOfMonth(Ct);return _e.isBefore(Zt,Wt)||_e.isAfter(Zt,fn)?!0:j?j(Zt):!1},[C,A,I,k,Se,j,_e]),St=Er((Ct,Wt)=>{if(V)return;const fn=_e.setMonth(xe??We,Wt);we(fn)}),Dt=Er(Ct=>{st(_e.setMonth(xe??We,Ct))||(gt(Ct),ot(!0),H&&H(Ct))});U.useEffect(()=>{gt(Ct=>He!==null&&Ct!==He?He:Ct)},[He]);const Et=Er((Ct,Wt)=>{switch(Ct.key){case"ArrowUp":Dt((12+Wt-3)%12),Ct.preventDefault();break;case"ArrowDown":Dt((12+Wt+3)%12),Ct.preventDefault();break;case"ArrowLeft":Dt((12+Wt+(Ae?1:-1))%12),Ct.preventDefault();break;case"ArrowRight":Dt((12+Wt+(Ae?-1:1))%12),Ct.preventDefault();break}}),yt=Er((Ct,Wt)=>{Dt(Wt)}),Lt=Er((Ct,Wt)=>{dt===Wt&&ot(!1)});return z.jsx(Gje,Pt({ref:n,className:$n(Fe.root,c),ownerState:Pe,role:"radiogroup","aria-labelledby":ce,monthsPerRow:Q},ae,{children:G5(_e,xe??We).map(Ct=>{const Wt=_e.getMonth(Ct),fn=_e.format(Ct,"monthShort"),Zt=_e.format(Ct,"month"),Ut=Wt===He,kn=T||st(Ct);return z.jsx(Uje,{selected:Ut,value:Wt,onClick:St,onKeyDown:Et,autoFocus:Nt&&Wt===dt,disabled:kn,tabIndex:Wt===dt&&!kn?0:-1,onFocus:yt,onBlur:Lt,"aria-current":Ce===Wt?"date":void 0,"aria-label":Zt,slots:fe,slotProps:ue,classes:d,children:fn},fn)})}))});function ore(e){return fr("MuiYearCalendar",e)}const GM=pr("MuiYearCalendar",["root","button","disabled","selected"]),Xje=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],Zje=(e,t)=>{const n={button:["button",t.isYearDisabled&&"disabled",t.isYearSelected&&"selected"]};return dr(n,ore,e)},Kje=Ft("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(e,t)=>[t.button,{[`&.${GM.disabled}`]:t.disabled},{[`&.${GM.selected}`]:t.selected}]})(({theme:e})=>Pt({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:ei(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ei(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${GM.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${GM.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),Qje=U.memo(function(t){const{autoFocus:n,classes:r,disabled:s,selected:c,value:d,onClick:i,onKeyDown:m,onFocus:x,onBlur:T,slots:C,slotProps:A}=t,I=xi(t,Xje),k=U.useRef(null),{ownerState:B}=ql(),j=Pt({},B,{isYearDisabled:s,isYearSelected:c}),V=Zje(r,j);Qs(()=>{var X;n&&((X=k.current)==null||X.focus())},[n]);const H=(C==null?void 0:C.yearButton)??Kje,G=Co({elementType:H,externalSlotProps:A==null?void 0:A.yearButton,externalForwardedProps:I,additionalProps:{disabled:s,ref:k,type:"button",role:"radio","aria-checked":c,onClick:X=>i(X,d),onKeyDown:X=>m(X,d),onFocus:X=>x(X,d),onBlur:X=>T(X,d)},ownerState:j,className:V.button});return z.jsx(H,Pt({},G))}),Jje=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],eNe=e=>dr({root:["root"]},ore,e);function tNe(e,t){const n=Js({props:e,name:t}),r=FE(n);return Pt({},n,r,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const nNe=Ft("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:e=>cm(e)&&e!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:pP,maxHeight:jFe,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),rNe=Ft("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),iNe=U.forwardRef(function(t,n){const r=tNe(t,"MuiYearCalendar"),{autoFocus:s,className:c,classes:d,value:i,defaultValue:m,referenceDate:x,disabled:T,disableFuture:C,disablePast:A,maxDate:I,minDate:k,onChange:B,readOnly:j,shouldDisableYear:V,onYearFocus:H,hasFocus:G,onFocusedViewChange:X,yearsOrder:Q,yearsPerRow:ee,timezone:ce,gridLabelId:fe,slots:ue,slotProps:ae}=r,xe=xi(r,Jje),{value:we,handleValueChange:Me,timezone:Se}=LE({name:"YearCalendar",timezone:ce,value:i,defaultValue:m,referenceDate:x,onChange:B,valueManager:vm}),Ae=hP(Se),_e=Al(),Pe=bs(),{ownerState:We}=ql(),Fe=U.useMemo(()=>vm.getInitialReferenceValue({value:we,adapter:Pe,props:r,timezone:Se,referenceDate:x,granularity:tm.year}),[]),Ce=eNe(d),He=U.useMemo(()=>Pe.getYear(Ae),[Pe,Ae]),dt=U.useMemo(()=>we!=null?Pe.getYear(we):null,[we,Pe]),[gt,Nt]=U.useState(()=>dt||Pe.getYear(Fe)),[wt,ot]=Xf({name:"YearCalendar",state:"hasFocus",controlled:G,default:s??!1}),st=Er(bn=>{ot(bn),X&&X(bn)}),St=U.useCallback(bn=>{if(A&&Pe.isBeforeYear(bn,Ae)||C&&Pe.isAfterYear(bn,Ae)||k&&Pe.isBeforeYear(bn,k)||I&&Pe.isAfterYear(bn,I))return!0;if(!V)return!1;const Nn=Pe.startOfYear(bn);return V(Nn)},[C,A,I,k,Ae,V,Pe]),Dt=Er((bn,Nn)=>{if(j)return;const ft=Pe.setYear(we??Fe,Nn);Me(ft)}),Et=Er(bn=>{St(Pe.setYear(we??Fe,bn))||(Nt(bn),st(!0),H==null||H(bn))});U.useEffect(()=>{Nt(bn=>dt!==null&&bn!==dt?dt:bn)},[dt]);const yt=Q!=="desc"?ee*1:ee*-1,Lt=_e&&Q==="asc"||!_e&&Q==="desc"?-1:1,Ct=Er((bn,Nn)=>{switch(bn.key){case"ArrowUp":Et(Nn-yt),bn.preventDefault();break;case"ArrowDown":Et(Nn+yt),bn.preventDefault();break;case"ArrowLeft":Et(Nn-Lt),bn.preventDefault();break;case"ArrowRight":Et(Nn+Lt),bn.preventDefault();break}}),Wt=Er((bn,Nn)=>{Et(Nn)}),fn=Er((bn,Nn)=>{gt===Nn&&st(!1)}),Zt=U.useRef(null),Ut=wo(n,Zt);U.useEffect(()=>{if(s||Zt.current===null)return;const bn=Zt.current.querySelector('[tabindex="0"]');if(!bn)return;const Nn=bn.offsetHeight,ft=bn.offsetTop,vn=Zt.current.clientHeight,Ot=Zt.current.scrollTop,tn=ft+Nn;Nn>vn||ft<Ot||(Zt.current.scrollTop=tn-vn/2-Nn/2)},[s]);const kn=Pe.getYearRange([k,I]);Q==="desc"&&kn.reverse();let Bn=ee-kn.length%ee;return Bn===ee&&(Bn=0),z.jsxs(nNe,Pt({ref:Ut,className:$n(Ce.root,c),ownerState:We,role:"radiogroup","aria-labelledby":fe,yearsPerRow:ee},xe,{children:[kn.map(bn=>{const Nn=Pe.getYear(bn),ft=Nn===dt,vn=T||St(bn);return z.jsx(Qje,{selected:ft,value:Nn,onClick:Dt,onKeyDown:Ct,autoFocus:wt&&Nn===gt,disabled:vn,tabIndex:Nn===gt&&!vn?0:-1,onFocus:Wt,onBlur:fn,"aria-current":He===Nn?"date":void 0,slots:ue,slotProps:ae,classes:d,children:Pe.format(bn,"year")},Pe.format(bn,"year"))}),Array.from({length:Bn},(bn,Nn)=>z.jsx(rNe,{},Nn))]}))}),oNe=e=>fr("MuiPickersCalendarHeader",e),sNe=pr("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),aNe=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],lNe=["ownerState"],cNe=e=>dr({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},oNe,e),uNe=Ft("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),dNe=Ft("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:e})=>Pt({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),hNe=Ft("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),fNe=Ft(Kc,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${sNe.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),pNe=Ft(xFe,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),mNe=U.forwardRef(function(t,n){const r=Ov(),s=bs(),c=Js({props:t,name:"MuiPickersCalendarHeader"}),{slots:d,slotProps:i,currentMonth:m,disabled:x,disableFuture:T,disablePast:C,maxDate:A,minDate:I,onMonthChange:k,onViewChange:B,view:j,reduceAnimations:V,views:H,labelId:G,className:X,classes:Q,timezone:ee,format:ce=`${s.formats.month} ${s.formats.year}`}=c,fe=xi(c,aNe),{ownerState:ue}=ql(),ae=cNe(Q),xe=(d==null?void 0:d.switchViewButton)??fNe,we=Co({elementType:xe,externalSlotProps:i==null?void 0:i.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(j)},ownerState:Pt({},ue,{view:j}),className:ae.switchViewButton}),Me=(d==null?void 0:d.switchViewIcon)??pNe,Se=Co({elementType:Me,externalSlotProps:i==null?void 0:i.switchViewIcon,ownerState:ue,className:ae.switchViewIcon}),Ae=xi(Se,lNe),_e=()=>k(s.addMonths(m,1)),Pe=()=>k(s.addMonths(m,-1)),We=FFe(m,{disableFuture:T,maxDate:A,timezone:ee}),Fe=BFe(m,{disablePast:C,minDate:I,timezone:ee}),Ce=()=>{if(!(H.length===1||!B||x))if(H.length===2)B(H.find(dt=>dt!==j)||H[0]);else{const dt=H.indexOf(j)!==0?0:1;B(H[dt])}};if(H.length===1&&H[0]==="year")return null;const He=s.formatByString(m,ce);return z.jsxs(uNe,Pt({},fe,{ownerState:ue,className:$n(ae.root,X),ref:n,children:[z.jsxs(dNe,{role:"presentation",onClick:Ce,ownerState:ue,"aria-live":"polite",className:ae.labelContainer,children:[z.jsx(nre,{reduceAnimations:V,transKey:He,children:z.jsx(hNe,{id:G,ownerState:ue,className:ae.label,children:He})}),H.length>1&&!x&&z.jsx(xe,Pt({},we,{children:z.jsx(Me,Pt({},Ae))}))]}),z.jsx(gm,{in:j==="day",appear:!V,enter:!V,children:z.jsx(IFe,{slots:d,slotProps:i,onGoToPrevious:Pe,isPreviousDisabled:Fe,previousLabel:r.previousMonth,onGoToNext:_e,isNextDisabled:We,nextLabel:r.nextMonth})})]}))}),gNe="@media (prefers-reduced-motion: reduce)",t1=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),oW=t1&&t1[1]?parseInt(t1[1],10):null,sW=t1&&t1[2]?parseInt(t1[2],10):null,yNe=oW&&oW<10||sW&&sW<13||!1;function sre(e){const t=D1(gNe,{defaultMatches:!1});return e??(t||yNe)}const vNe=e=>fr("MuiDateCalendar",e);pr("MuiDateCalendar",["root","viewTransitionContainer"]);const _Ne=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],xNe=e=>dr({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},vNe,e);function bNe(e,t){const n=Js({props:e,name:t}),r=sre(n.reduceAnimations),s=FE(n);return Pt({},n,s,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:r,renderLoading:n.renderLoading??(()=>z.jsx("span",{children:"..."}))})}const wNe=Ft(NFe,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:e4}),SNe=Ft(nre,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),TNe=U.forwardRef(function(t,n){const r=bs(),{ownerState:s}=ql(),c=kh(),d=bNe(t,"MuiDateCalendar"),{autoFocus:i,onViewChange:m,value:x,defaultValue:T,referenceDate:C,disableFuture:A,disablePast:I,onChange:k,onMonthChange:B,reduceAnimations:j,shouldDisableDate:V,shouldDisableMonth:H,shouldDisableYear:G,view:X,views:Q,openTo:ee,className:ce,classes:fe,disabled:ue,readOnly:ae,minDate:xe,maxDate:we,disableHighlightToday:Me,focusedView:Se,onFocusedViewChange:Ae,showDaysOutsideCurrentMonth:_e,fixedWeekNumber:Pe,dayOfWeekFormatter:We,slots:Fe,slotProps:Ce,loading:He,renderLoading:dt,displayWeekNumber:gt,yearsOrder:Nt,yearsPerRow:wt,monthsPerRow:ot,timezone:st}=d,St=xi(d,_Ne),{value:Dt,handleValueChange:Et,timezone:yt}=LE({name:"DateCalendar",timezone:st,value:x,defaultValue:T,referenceDate:C,onChange:k,valueManager:vm}),{view:Lt,setView:Ct,focusedView:Wt,setFocusedView:fn,goToNextView:Zt,setValueAndGoToNextView:Ut}=Lne({view:X,views:Q,openTo:ee,onChange:Et,onViewChange:m,autoFocus:i,focusedView:Se,onFocusedViewChange:Ae}),{referenceDate:kn,calendarState:Bn,setVisibleDate:bn,isDateDisabled:Nn,onMonthSwitchingAnimationEnd:ft}=mje({value:Dt,referenceDate:C,reduceAnimations:j,onMonthChange:B,minDate:xe,maxDate:we,shouldDisableDate:V,disablePast:I,disableFuture:A,timezone:yt,getCurrentMonthFromVisibleDate:(Sr,Dr)=>r.isSameMonth(Sr,Dr)?Dr:r.startOfMonth(Sr)}),vn=ue&&Dt||xe,Ot=ue&&Dt||we,tn=`${c}-grid-label`,Rn=Wt!==null,Hn=(Fe==null?void 0:Fe.calendarHeader)??mNe,mr=Co({elementType:Hn,externalSlotProps:Ce==null?void 0:Ce.calendarHeader,additionalProps:{views:Q,view:Lt,currentMonth:Bn.currentMonth,onViewChange:Ct,onMonthChange:Sr=>bn({target:Sr,reason:"header-navigation"}),minDate:vn,maxDate:Ot,disabled:ue,disablePast:I,disableFuture:A,reduceAnimations:j,timezone:yt,labelId:tn},ownerState:s}),Xn=Er(Sr=>{const Dr=r.startOfMonth(Sr),ki=r.endOfMonth(Sr),ns=Nn(Sr)?BT({adapter:r,date:Sr,minDate:r.isBefore(xe,Dr)?Dr:xe,maxDate:r.isAfter(we,ki)?ki:we,disablePast:I,disableFuture:A,isDateDisabled:Nn,timezone:yt}):Sr;ns?(Ut(ns,"finish"),bn({target:ns,reason:"cell-interaction"})):(Zt(),bn({target:Dr,reason:"cell-interaction"}))}),or=Er(Sr=>{const Dr=r.startOfYear(Sr),ki=r.endOfYear(Sr),ns=Nn(Sr)?BT({adapter:r,date:Sr,minDate:r.isBefore(xe,Dr)?Dr:xe,maxDate:r.isAfter(we,ki)?ki:we,disablePast:I,disableFuture:A,isDateDisabled:Nn,timezone:yt}):Sr;ns?(Ut(ns,"finish"),bn({target:ns,reason:"cell-interaction"})):(Zt(),bn({target:Dr,reason:"cell-interaction"}))}),Mn=Er(Sr=>Et(Sr&&VR(r,Sr,Dt??kn),"finish",Lt));U.useEffect(()=>{r.isValid(Dt)&&bn({target:Dt,reason:"controlled-value-change"})},[Dt]);const Fr=xNe(fe),Cr={disablePast:I,disableFuture:A,maxDate:we,minDate:xe},xr={disableHighlightToday:Me,readOnly:ae,disabled:ue,timezone:yt,gridLabelId:tn,slots:Fe,slotProps:Ce},ir=U.useRef(Lt);U.useEffect(()=>{ir.current!==Lt&&(Wt===ir.current&&fn(Lt,!0),ir.current=Lt)},[Wt,fn,Lt]);const Yr=U.useMemo(()=>[Dt],[Dt]);return z.jsxs(wNe,Pt({ref:n,className:$n(Fr.root,ce),ownerState:s},St,{children:[z.jsx(Hn,Pt({},mr,{slots:Fe,slotProps:Ce})),z.jsx(SNe,{reduceAnimations:j,className:Fr.viewTransitionContainer,transKey:Lt,ownerState:s,children:z.jsxs("div",{children:[Lt==="year"&&z.jsx(iNe,Pt({},Cr,xr,{value:Dt,onChange:or,shouldDisableYear:G,hasFocus:Rn,onFocusedViewChange:Sr=>fn("year",Sr),yearsOrder:Nt,yearsPerRow:wt,referenceDate:kn})),Lt==="month"&&z.jsx(Yje,Pt({},Cr,xr,{hasFocus:Rn,className:ce,value:Dt,onChange:Xn,shouldDisableMonth:H,onFocusedViewChange:Sr=>fn("month",Sr),monthsPerRow:ot,referenceDate:kn})),Lt==="day"&&z.jsx(jje,Pt({},Bn,Cr,xr,{onMonthSwitchingAnimationEnd:ft,hasFocus:Rn,onFocusedDayChange:Sr=>bn({target:Sr,reason:"cell-interaction"}),reduceAnimations:j,selectedDays:Yr,onSelectedDaysChange:Mn,shouldDisableDate:V,shouldDisableMonth:H,shouldDisableYear:G,onFocusedViewChange:Sr=>fn("day",Sr),showDaysOutsideCurrentMonth:_e,fixedWeekNumber:Pe,dayOfWeekFormatter:We,displayWeekNumber:gt,loading:He,renderLoading:dt}))]})})]}))});function ENe(e){return fr("MuiPickersToolbar",e)}pr("MuiPickersToolbar",["root","title","content"]);function are(){const{ownerState:e}=ql(),t=Al();return U.useMemo(()=>Pt({},e,{toolbarDirection:t?"rtl":"ltr"}),[e,t])}const CNe=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],MNe=e=>dr({root:["root"],title:["title"],content:["content"]},ENe,e),ANe=Ft("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),RNe=Ft("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:e=>cm(e)&&e!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),DNe=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersToolbar"}),{children:s,className:c,classes:d,toolbarTitle:i,hidden:m,titleId:x,landscapeDirection:T}=r,C=xi(r,CNe),A=are(),I=MNe(d);return m?null:z.jsxs(ANe,Pt({ref:n,className:$n(I.root,c),ownerState:A},C,{children:[z.jsx(En,{color:"text.secondary",variant:"overline",id:x,className:I.title,children:i}),z.jsx(RNe,{className:I.content,ownerState:A,landscapeDirection:T,children:s})]}))});function PNe(e){return fr("MuiDatePickerToolbar",e)}pr("MuiDatePickerToolbar",["root","title"]);const INe=["toolbarFormat","toolbarPlaceholder","className","classes"],kNe=e=>dr({root:["root"],title:["title"]},PNe,e),ONe=Ft(DNe,{name:"MuiDatePickerToolbar",slot:"Root"})({}),LNe=Ft(En,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),zNe=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiDatePickerToolbar"}),{toolbarFormat:s,toolbarPlaceholder:c="––",className:d,classes:i}=r,m=xi(r,INe),x=bs(),{value:T,views:C,orientation:A}=j1(),I=Ov(),k=are(),B=kNe(i),j=U.useMemo(()=>{if(!x.isValid(T))return c;const V=Y5(x,{format:s,views:C},!0);return x.formatByString(T,V)},[T,s,c,x,C]);return z.jsx(ONe,Pt({ref:n,toolbarTitle:I.datePickerToolbarTitle,className:$n(B.root,d)},m,{children:z.jsx(LNe,{variant:"h4",align:A==="landscape"?"left":"center",ownerState:k,className:B.title,children:j})}))});function lre(e,t){const n=Js({props:e,name:t}),r=FE(n),s=U.useMemo(()=>{var c;return((c=n.localeText)==null?void 0:c.toolbarTitle)==null?n.localeText:Pt({},n.localeText,{datePickerToolbarTitle:n.localeText.toolbarTitle})},[n.localeText]);return Pt({},n,r,{localeText:s},Z3e({views:n.views,openTo:n.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:Pt({toolbar:zNe},n.slots)})}function FNe(e){return fr("MuiPickerPopper",e)}pr("MuiPickerPopper",["root","paper"]);const BNe=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],jNe=e=>dr({root:["root"],paper:["paper"]},FNe,e),NNe=Ft(EE,{name:"MuiPickerPopper",slot:"Root"})(({theme:e})=>({zIndex:e.zIndex.modal})),VNe=Ft(fa,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:e})=>new Set(["top","top-start","top-end"]).has(e),style:{transformOrigin:"bottom center"}}]});function $Ne(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function UNe(e,t){const n=U.useRef(!1),r=U.useRef(!1),s=U.useRef(null),c=U.useRef(!1);U.useEffect(()=>{if(!e)return;function m(){c.current=!0}return document.addEventListener("mousedown",m,!0),document.addEventListener("touchstart",m,!0),()=>{document.removeEventListener("mousedown",m,!0),document.removeEventListener("touchstart",m,!0),c.current=!1}},[e]);const d=Er(m=>{if(!c.current)return;const x=r.current;r.current=!1;const T=qa(s.current);if(!s.current||"clientX"in m&&$Ne(m,T))return;if(n.current){n.current=!1;return}let C;m.composedPath?C=m.composedPath().indexOf(s.current)>-1:C=!T.documentElement.contains(m.target)||s.current.contains(m.target),!C&&!x&&t(m)}),i=()=>{r.current=!0};return U.useEffect(()=>{if(e){const m=qa(s.current),x=()=>{n.current=!0};return m.addEventListener("touchstart",d),m.addEventListener("touchmove",x),()=>{m.removeEventListener("touchstart",d),m.removeEventListener("touchmove",x)}}},[e,d]),U.useEffect(()=>{if(e){const m=qa(s.current);return m.addEventListener("click",d),()=>{m.removeEventListener("click",d),r.current=!1}}},[e,d]),[s,i,i]}const qNe=U.forwardRef((e,t)=>{const{PaperComponent:n,ownerState:r,children:s,paperSlotProps:c,paperClasses:d,onPaperClick:i,onPaperTouchStart:m}=e,x=xi(e,BNe),T=Co({elementType:n,externalSlotProps:c,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:d,ownerState:r});return z.jsx(n,Pt({},x,T,{onClick:C=>{var A;i(C),(A=T.onClick)==null||A.call(T,C)},onTouchStart:C=>{var A;m(C),(A=T.onTouchStart)==null||A.call(T,C)},ownerState:r,children:s}))});function HNe(e){const t=Js({props:e,name:"MuiPickerPopper"}),{children:n,placement:r="bottom-start",slots:s,slotProps:c,classes:d}=t,{open:i,popupRef:m,reduceAnimations:x}=j1(),{dismissViews:T,getCurrentViewMode:C,onPopperExited:A,triggerElement:I,viewContainerRole:k}=ql();U.useEffect(()=>{function Pe(We){i&&We.key==="Escape"&&T()}return document.addEventListener("keydown",Pe),()=>{document.removeEventListener("keydown",Pe)}},[T,i]);const B=U.useRef(null);U.useEffect(()=>{k==="tooltip"||C()==="field"||(i?B.current=yc(document):B.current&&B.current instanceof HTMLElement&&setTimeout(()=>{B.current instanceof HTMLElement&&B.current.focus()}))},[i,k,C]);const j=jNe(d),{ownerState:V,rootRefObject:H}=ql(),G=Er(()=>{k==="tooltip"?WFe(()=>{var Pe,We;(Pe=H.current)!=null&&Pe.contains(yc(document))||(We=m.current)!=null&&We.contains(yc(document))||T()}):T()}),[X,Q,ee]=UNe(i,G),ce=U.useRef(null),fe=wo(ce,m),ue=wo(fe,X),ae=Pe=>{Pe.key==="Escape"&&(Pe.stopPropagation(),T())},xe=(s==null?void 0:s.desktopTransition)??x?gm:f1,we=(s==null?void 0:s.desktopTrapFocus)??sJ,Me=(s==null?void 0:s.desktopPaper)??VNe,Se=(s==null?void 0:s.popper)??NNe,Ae=Co({elementType:Se,externalSlotProps:c==null?void 0:c.popper,additionalProps:{transition:!0,role:k??void 0,open:i,placement:r,anchorEl:I,onKeyDown:ae},className:j.root,ownerState:V}),_e=U.useMemo(()=>Pt({},V,{popperPlacement:Ae.placement}),[V,Ae.placement]);return z.jsx(Se,Pt({},Ae,{children:({TransitionProps:Pe})=>z.jsx(we,Pt({open:i,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:k==="tooltip",isEnabled:()=>!0},c==null?void 0:c.desktopTrapFocus,{children:z.jsx(xe,Pt({},Pe,c==null?void 0:c.desktopTransition,{onExited:We=>{var Fe,Ce,He;A==null||A(),(Ce=(Fe=c==null?void 0:c.desktopTransition)==null?void 0:Fe.onExited)==null||Ce.call(Fe,We),(He=Pe==null?void 0:Pe.onExited)==null||He.call(Pe)},children:z.jsx(qNe,{PaperComponent:Me,ownerState:_e,ref:ue,onPaperClick:Q,onPaperTouchStart:ee,paperClasses:j.paper,paperSlotProps:c==null?void 0:c.desktopPaper,children:n})}))}))}))}function aW(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function WNe(e,t){const[n,r]=U.useState(aW);return Qs(()=>{const s=()=>{r(aW())};return window.addEventListener("orientationchange",s),()=>{window.removeEventListener("orientationchange",s)}},[]),HFe(e,["hours","minutes","seconds"])?"portrait":t??n}function GNe(e){const{props:t,valueManager:n,validator:r}=e,{value:s,defaultValue:c,onChange:d,referenceDate:i,timezone:m,onAccept:x,closeOnSelect:T,open:C,onOpen:A,onClose:I}=t,{current:k}=U.useRef(c),{current:B}=U.useRef(s!==void 0),{current:j}=U.useRef(C!==void 0),V=bs(),{timezone:H,value:G,handleValueChange:X}=LE({name:"a picker component",timezone:m,value:s,defaultValue:k,referenceDate:i,onChange:d,valueManager:n}),[Q,ee]=U.useState(()=>({open:!1,lastExternalValue:G,clockShallowValue:void 0,lastCommittedValue:G,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:ce}=Nne({props:t,validator:r,timezone:H,value:G,onError:t.onError}),fe=Er(we=>{const Me=typeof we=="function"?we(Q.open):we;j||ee(Se=>Pt({},Se,{open:Me})),Me&&A&&A(),Me||I==null||I()}),ue=Er((we,Me)=>{const{changeImportance:Se="accept",skipPublicationIfPristine:Ae=!1,validationError:_e,shortcut:Pe,shouldClose:We=Se==="accept"}=Me??{};let Fe,Ce;!Ae&&!B&&!Q.hasBeenModifiedSinceMount?(Fe=!0,Ce=Se==="accept"):(Fe=!n.areValuesEqual(V,we,G),Ce=Se==="accept"&&!n.areValuesEqual(V,we,Q.lastCommittedValue)),ee(gt=>Pt({},gt,{clockShallowValue:Fe?void 0:gt.clockShallowValue,lastCommittedValue:Ce?we:gt.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let He=null;const dt=()=>(He||(He={validationError:_e??ce(we)},Pe&&(He.shortcut=Pe)),He);Fe&&X(we,dt()),Ce&&x&&x(we,dt()),We&&fe(!1)});G!==Q.lastExternalValue&&ee(we=>Pt({},we,{lastExternalValue:G,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const ae=Er((we,Me="partial")=>{if(Me==="shallow"){ee(Se=>Pt({},Se,{clockShallowValue:we,hasBeenModifiedSinceMount:!0}));return}ue(we,{changeImportance:Me==="finish"&&T?"accept":"set"})});U.useEffect(()=>{if(j){if(C===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");ee(we=>Pt({},we,{open:C}))}},[j,C]);const xe=U.useMemo(()=>n.cleanValue(V,Q.clockShallowValue===void 0?G:Q.clockShallowValue),[V,n,Q.clockShallowValue,G]);return{timezone:H,state:Q,setValue:ue,setValueFromView:ae,setOpen:fe,value:G,viewValue:xe}}const YNe=["className","sx"],cre=({ref:e,props:t,valueManager:n,valueType:r,variant:s,validator:c,onPopperExited:d,autoFocusView:i,rendererInterceptor:m,localeText:x,viewContainerRole:T,getStepNavigation:C})=>{const{views:A,view:I,openTo:k,onViewChange:B,viewRenderers:j,reduceAnimations:V,orientation:H,disableOpenPicker:G,closeOnSelect:X,disabled:Q,readOnly:ee,formatDensity:ce,enableAccessibleFieldDOMStructure:fe,selectedSections:ue,onSelectedSectionsChange:ae,format:xe,label:we,autoFocus:Me,name:Se}=t,{className:Ae,sx:_e}=t,Pe=xi(t,YNe),We=kh(),Fe=bs(),Ce=sre(V),He=WNe(A,H),{current:dt}=U.useRef(k??null),[gt,Nt]=U.useState(null),wt=U.useRef(null),ot=U.useRef(null),st=U.useRef(null),St=wo(e,st),{timezone:Dt,state:Et,setOpen:yt,setValue:Lt,setValueFromView:Ct,value:Wt,viewValue:fn}=GNe({props:t,valueManager:n,validator:c}),{view:Zt,setView:Ut,defaultView:kn,focusedView:Bn,setFocusedView:bn,setValueAndGoToNextView:Nn,goToNextStep:ft,hasNextStep:vn,hasSeveralSteps:Ot}=Lne({view:I,views:A,openTo:k,onChange:Ct,onViewChange:B,autoFocus:i,getStepNavigation:C}),tn=Er(()=>Lt(n.emptyValue)),Rn=Er(()=>Lt(n.getTodayValue(Fe,Dt,r))),Hn=Er(()=>Lt(Wt)),mr=Er(()=>Lt(Et.lastCommittedValue,{skipPublicationIfPristine:!0})),Xn=Er(()=>{Lt(Wt,{skipPublicationIfPristine:!0})}),{hasUIView:or,viewModeLookup:Mn,timeViewsCount:Fr}=U.useMemo(()=>A.reduce((Pr,ke)=>{const ie=j[ke]==null?"field":"UI";return Pr.viewModeLookup[ke]=ie,ie==="UI"&&(Pr.hasUIView=!0,OFe(ke)&&(Pr.timeViewsCount+=1)),Pr},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[j,A]),Cr=Mn[Zt],xr=Er(()=>Cr),[ir,Yr]=U.useState(Cr==="UI"?Zt:null);ir!==Zt&&Mn[Zt]==="UI"&&Yr(Zt),Qs(()=>{Cr==="field"&&Et.open&&(yt(!1),setTimeout(()=>{var Pr,ke;(Pr=ot==null?void 0:ot.current)==null||Pr.setSelectedSections(Zt),(ke=ot==null?void 0:ot.current)==null||ke.focusField(Zt)}))},[Zt]),Qs(()=>{if(!Et.open)return;let Pr=Zt;Cr==="field"&&ir!=null&&(Pr=ir),Pr!==kn&&Mn[Pr]==="UI"&&Mn[kn]==="UI"&&(Pr=kn),Pr!==Zt&&Ut(Pr),bn(Pr,!0)},[Et.open]);const Sr=U.useMemo(()=>({isPickerValueEmpty:n.areValuesEqual(Fe,Wt,n.emptyValue),isPickerOpen:Et.open,isPickerDisabled:t.disabled??!1,isPickerReadOnly:t.readOnly??!1,pickerOrientation:He,pickerVariant:s}),[Fe,n,Wt,Et.open,He,s,t.disabled,t.readOnly]),Dr=U.useMemo(()=>G||!or?"hidden":Q||ee?"disabled":"enabled",[G,or,Q,ee]),ki=Er(ft),ns=U.useMemo(()=>X&&!Ot?[]:["cancel","nextOrAccept"],[X,Ot]),Vo=U.useMemo(()=>({setValue:Lt,setOpen:yt,clearValue:tn,setValueToToday:Rn,acceptValueChanges:Hn,cancelValueChanges:mr,setView:Ut,goToNextStep:ki}),[Lt,yt,tn,Rn,Hn,mr,Ut,ki]),zo=U.useMemo(()=>Pt({},Vo,{value:Wt,timezone:Dt,open:Et.open,views:A,view:ir,initialView:dt,disabled:Q??!1,readOnly:ee??!1,autoFocus:Me??!1,variant:s,orientation:He,popupRef:wt,reduceAnimations:Ce,triggerRef:Nt,triggerStatus:Dr,hasNextStep:vn,fieldFormat:xe??"",name:Se,label:we,rootSx:_e,rootRef:St,rootClassName:Ae}),[Vo,Wt,St,s,He,Ce,Q,ee,xe,Ae,Se,we,_e,Dr,vn,Dt,Et.open,ir,A,dt,Me]),Rl=U.useMemo(()=>({dismissViews:Xn,ownerState:Sr,hasUIView:or,getCurrentViewMode:xr,rootRefObject:st,labelId:We,triggerElement:gt,viewContainerRole:T,defaultActionBarActions:ns,onPopperExited:d}),[Xn,Sr,or,xr,We,gt,T,ns,d]),ma=U.useMemo(()=>({formatDensity:ce,enableAccessibleFieldDOMStructure:fe,selectedSections:ue,onSelectedSectionsChange:ae,fieldRef:ot}),[ce,fe,ue,ae,ot]);return{providerProps:{localeText:x,contextValue:zo,privateContextValue:Rl,actionsContextValue:Vo,fieldPrivateContextValue:ma,isValidContextValue:Pr=>{const ke=c({adapter:Fe,value:Pr,timezone:Dt,props:t});return!n.hasError(ke)}},renderCurrentView:()=>{if(ir==null)return null;const Pr=j[ir];if(Pr==null)return null;const ke=Pt({},Pe,{views:A,timezone:Dt,value:fn,onChange:Nn,view:ir,onViewChange:Ut,showViewSwitcher:Fr>1,timeViewsCount:Fr},T==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:Bn,onFocusedViewChange:bn});return m?z.jsx(m,{viewRenderers:j,popperView:ir,rendererProps:ke}):Pr(ke)},ownerState:Sr}};function ure(e){return fr("MuiPickersLayout",e)}const o0=pr("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),XNe=["actions"],ZNe=Ft(TR,{name:"MuiPickersLayout",slot:"ActionBar"})({});function KNe(e){const{actions:t}=e,n=xi(e,XNe),r=Ov(),{clearValue:s,setValueToToday:c,acceptValueChanges:d,cancelValueChanges:i,goToNextStep:m,hasNextStep:x}=j1();if(t==null||t.length===0)return null;const T=t==null?void 0:t.map(C=>{switch(C){case"clear":return z.jsx(Wi,{onClick:s,children:r.clearButtonLabel},C);case"cancel":return z.jsx(Wi,{onClick:i,children:r.cancelButtonLabel},C);case"accept":return z.jsx(Wi,{onClick:d,children:r.okButtonLabel},C);case"today":return z.jsx(Wi,{onClick:c,children:r.todayButtonLabel},C);case"next":return z.jsx(Wi,{onClick:m,children:r.nextStepButtonLabel},C);case"nextOrAccept":return x?z.jsx(Wi,{onClick:m,children:r.nextStepButtonLabel},C):z.jsx(Wi,{onClick:d,children:r.okButtonLabel},C);default:return null}});return z.jsx(ZNe,Pt({},n,{children:T}))}const QNe=U.memo(KNe),JNe=["items","changeImportance"],e5e=["getValue"],t5e=Ft(Rv,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function n5e(e){const{items:t,changeImportance:n="accept"}=e,r=xi(e,JNe),{setValue:s}=vFe(),c=yFe();if(t==null||t.length===0)return null;const d=t.map(i=>{let{getValue:m}=i,x=xi(i,e5e);const T=m({isValid:c});return Pt({},x,{label:x.label,onClick:()=>{s(T,{changeImportance:n,shortcut:x})},disabled:!c(T)})});return z.jsx(t5e,Pt({dense:!0,sx:[{maxHeight:e4,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:d.map(i=>z.jsx(YN,{children:z.jsx(yd,Pt({},i))},i.id??i.label))}))}const r5e=["ownerState"];function i5e(e){return e.view!==null}const o5e=(e,t)=>{const{pickerOrientation:n}=t;return dr({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},ure,e)},s5e=e=>{const{ownerState:t,defaultActionBarActions:n}=ql(),{view:r}=j1(),s=Al(),{children:c,slots:d,slotProps:i,classes:m}=e,x=U.useMemo(()=>Pt({},t,{layoutDirection:s?"rtl":"ltr"}),[t,s]),T=o5e(m,x),C=(d==null?void 0:d.actionBar)??QNe,A=Co({elementType:C,externalSlotProps:i==null?void 0:i.actionBar,additionalProps:{actions:n},className:T.actionBar,ownerState:x}),I=xi(A,r5e),k=z.jsx(C,Pt({},I)),B=d==null?void 0:d.toolbar,j=Co({elementType:B,externalSlotProps:i==null?void 0:i.toolbar,className:T.toolbar,ownerState:x}),V=i5e(j)&&B?z.jsx(B,Pt({},j)):null,H=c,G=d==null?void 0:d.tabs,X=r&&G?z.jsx(G,Pt({className:T.tabs},i==null?void 0:i.tabs)):null,Q=(d==null?void 0:d.shortcuts)??n5e,ee=Co({elementType:Q,externalSlotProps:i==null?void 0:i.shortcuts,className:T.shortcuts,ownerState:x}),ce=r&&Q?z.jsx(Q,Pt({},ee)):null;return{toolbar:V,content:H,tabs:X,actionBar:k,shortcuts:ce,ownerState:x}},a5e=(e,t)=>{const{pickerOrientation:n}=t;return dr({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},ure,e)},l5e=Ft("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${o0.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape"},style:{[`& .${o0.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${o0.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{pickerOrientation:"landscape",layoutDirection:"rtl"},style:{[`& .${o0.toolbar}`]:{gridColumn:3}}},{props:{pickerOrientation:"portrait"},style:{[`& .${o0.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${o0.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{pickerOrientation:"portrait",layoutDirection:"rtl"},style:{[`& .${o0.shortcuts}`]:{gridColumn:3}}}]}),c5e=Ft("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),dre=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiPickersLayout"}),{toolbar:s,content:c,tabs:d,actionBar:i,shortcuts:m,ownerState:x}=s5e(r),{orientation:T,variant:C}=j1(),{sx:A,className:I,classes:k}=r,B=a5e(k,x);return z.jsxs(l5e,{ref:n,sx:A,className:$n(B.root,I),ownerState:x,children:[T==="landscape"?m:s,T==="landscape"?s:m,z.jsx(c5e,{className:B.contentWrapper,ownerState:x,children:C==="desktop"?z.jsxs(U.Fragment,{children:[c,d]}):z.jsxs(U.Fragment,{children:[d,c]})}),i]})});function hre(e){const{steps:t}=e;return zFe({steps:t,isViewMatchingStep:(n,r)=>r.views==null||r.views.includes(n),onStepChange:({step:n,defaultView:r,setView:s,view:c,views:d})=>{const i=n.views==null?r:n.views.find(m=>d.includes(m));i!==c&&s(i)}})}const u5e=["props","steps"],d5e=["ownerState"],h5e=e=>{var ee;let{props:t,steps:n}=e,r=xi(e,u5e);const{slots:s,slotProps:c,label:d,inputRef:i,localeText:m}=t,x=hre({steps:n}),{providerProps:T,renderCurrentView:C,ownerState:A}=cre(Pt({},r,{props:t,localeText:m,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:x})),I=T.privateContextValue.labelId,k=((ee=c==null?void 0:c.toolbar)==null?void 0:ee.hidden)??!1,B=s.field,j=Co({elementType:B,externalSlotProps:c==null?void 0:c.field,additionalProps:Pt({},k&&{id:I}),ownerState:A}),V=xi(j,d5e),H=s.layout??dre;let G=I;k&&(d?G=`${I}-label`:G=void 0);const X=Pt({},c,{toolbar:Pt({},c==null?void 0:c.toolbar,{titleId:I}),popper:Pt({"aria-labelledby":G},c==null?void 0:c.popper)});return{renderPicker:()=>z.jsx(kne,Pt({},T,{children:z.jsxs(Jne,{slots:s,slotProps:X,inputRef:i,children:[z.jsx(B,Pt({},V)),z.jsx(HNe,{slots:s,slotProps:X,children:z.jsx(H,Pt({},X==null?void 0:X.layout,{slots:s,slotProps:X,children:C()}))})]})}))}},n1=({view:e,onViewChange:t,views:n,focusedView:r,onFocusedViewChange:s,value:c,defaultValue:d,referenceDate:i,onChange:m,className:x,classes:T,disableFuture:C,disablePast:A,minDate:I,maxDate:k,shouldDisableDate:B,shouldDisableMonth:j,shouldDisableYear:V,reduceAnimations:H,onMonthChange:G,monthsPerRow:X,onYearChange:Q,yearsOrder:ee,yearsPerRow:ce,slots:fe,slotProps:ue,loading:ae,renderLoading:xe,disableHighlightToday:we,readOnly:Me,disabled:Se,showDaysOutsideCurrentMonth:Ae,dayOfWeekFormatter:_e,sx:Pe,autoFocus:We,fixedWeekNumber:Fe,displayWeekNumber:Ce,timezone:He})=>z.jsx(TNe,{view:e,onViewChange:t,views:n.filter(HH),focusedView:r&&HH(r)?r:null,onFocusedViewChange:s,value:c,defaultValue:d,referenceDate:i,onChange:m,className:x,classes:T,disableFuture:C,disablePast:A,minDate:I,maxDate:k,shouldDisableDate:B,shouldDisableMonth:j,shouldDisableYear:V,reduceAnimations:H,onMonthChange:G,monthsPerRow:X,onYearChange:Q,yearsOrder:ee,yearsPerRow:ce,slots:fe,slotProps:ue,loading:ae,renderLoading:xe,disableHighlightToday:we,readOnly:Me,disabled:Se,showDaysOutsideCurrentMonth:Ae,dayOfWeekFormatter:_e,sx:Pe,autoFocus:We,fixedWeekNumber:Fe,displayWeekNumber:Ce,timezone:He}),fre=U.forwardRef(function(t,n){var m;const r=bs(),s=lre(t,"MuiDesktopDatePicker"),c=Pt({day:n1,month:n1,year:n1},s.viewRenderers),d=Pt({},s,{closeOnSelect:s.closeOnSelect??!0,viewRenderers:c,format:Y5(r,s,!1),yearsPerRow:s.yearsPerRow??4,slots:Pt({field:ere},s.slots),slotProps:Pt({},s.slotProps,{field:x=>{var T;return Pt({},i1((T=s.slotProps)==null?void 0:T.field,x),bne(s))},toolbar:Pt({hidden:!0},(m=s.slotProps)==null?void 0:m.toolbar)})}),{renderPicker:i}=h5e({ref:n,props:d,valueManager:vm,valueType:"date",validator:zE,steps:null});return i()});fre.propTypes={autoFocus:rt.bool,className:rt.string,closeOnSelect:rt.bool,dayOfWeekFormatter:rt.func,defaultValue:rt.object,disabled:rt.bool,disableFuture:rt.bool,disableHighlightToday:rt.bool,disableOpenPicker:rt.bool,disablePast:rt.bool,displayWeekNumber:rt.bool,enableAccessibleFieldDOMStructure:rt.any,fixedWeekNumber:rt.number,format:rt.string,formatDensity:rt.oneOf(["dense","spacious"]),inputRef:LQ,label:rt.node,loading:rt.bool,localeText:rt.object,maxDate:rt.object,minDate:rt.object,monthsPerRow:rt.oneOf([3,4]),name:rt.string,onAccept:rt.func,onChange:rt.func,onClose:rt.func,onError:rt.func,onMonthChange:rt.func,onOpen:rt.func,onSelectedSectionsChange:rt.func,onViewChange:rt.func,onYearChange:rt.func,open:rt.bool,openTo:rt.oneOf(["day","month","year"]),orientation:rt.oneOf(["landscape","portrait"]),readOnly:rt.bool,reduceAnimations:rt.bool,referenceDate:rt.object,renderLoading:rt.func,selectedSections:rt.oneOfType([rt.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),rt.number]),shouldDisableDate:rt.func,shouldDisableMonth:rt.func,shouldDisableYear:rt.func,showDaysOutsideCurrentMonth:rt.bool,slotProps:rt.object,slots:rt.object,sx:rt.oneOfType([rt.arrayOf(rt.oneOfType([rt.func,rt.object,rt.bool])),rt.func,rt.object]),timezone:rt.string,value:rt.object,view:rt.oneOf(["day","month","year"]),viewRenderers:rt.shape({day:rt.func,month:rt.func,year:rt.func}),views:rt.arrayOf(rt.oneOf(["day","month","year"]).isRequired),yearsOrder:rt.oneOf(["asc","desc"]),yearsPerRow:rt.oneOf([3,4])};const f5e=Ft(SR)({[`& .${eT.container}`]:{outline:0},[`& .${eT.paper}`]:{outline:0,minWidth:pP}}),p5e=Ft(ER)({"&:first-of-type":{padding:0}});function m5e(e){const{children:t,slots:n,slotProps:r}=e,{open:s}=j1(),{dismissViews:c,onPopperExited:d}=ql(),i=(n==null?void 0:n.dialog)??f5e,m=(n==null?void 0:n.mobileTransition)??gm;return z.jsx(i,Pt({open:s,onClose:()=>{c(),d==null||d()}},r==null?void 0:r.dialog,{TransitionComponent:m,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:n==null?void 0:n.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:z.jsx(p5e,{children:t})}))}const g5e=["props","steps"],y5e=["ownerState"],v5e=e=>{var ee;let{props:t,steps:n}=e,r=xi(e,g5e);const{slots:s,slotProps:c,label:d,inputRef:i,localeText:m}=t,x=hre({steps:n}),{providerProps:T,renderCurrentView:C,ownerState:A}=cre(Pt({},r,{props:t,localeText:m,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:x})),I=T.privateContextValue.labelId,k=((ee=c==null?void 0:c.toolbar)==null?void 0:ee.hidden)??!1,B=s.field,j=Co({elementType:B,externalSlotProps:c==null?void 0:c.field,additionalProps:Pt({},k&&{id:I}),ownerState:A}),V=xi(j,y5e),H=s.layout??dre;let G=I;k&&(d?G=`${I}-label`:G=void 0);const X=Pt({},c,{toolbar:Pt({},c==null?void 0:c.toolbar,{titleId:I}),mobilePaper:Pt({"aria-labelledby":G},c==null?void 0:c.mobilePaper)});return{renderPicker:()=>z.jsx(kne,Pt({},T,{children:z.jsxs(Jne,{slots:s,slotProps:X,inputRef:i,children:[z.jsx(B,Pt({},V)),z.jsx(m5e,{slots:s,slotProps:X,children:z.jsx(H,Pt({},X==null?void 0:X.layout,{slots:s,slotProps:X,children:C()}))})]})}))}},pre=U.forwardRef(function(t,n){var m;const r=bs(),s=lre(t,"MuiMobileDatePicker"),c=Pt({day:n1,month:n1,year:n1},s.viewRenderers),d=Pt({},s,{viewRenderers:c,format:Y5(r,s,!1),slots:Pt({field:ere},s.slots),slotProps:Pt({},s.slotProps,{field:x=>{var T;return Pt({},i1((T=s.slotProps)==null?void 0:T.field,x),bne(s))},toolbar:Pt({hidden:!1},(m=s.slotProps)==null?void 0:m.toolbar)})}),{renderPicker:i}=v5e({ref:n,props:d,valueManager:vm,valueType:"date",validator:zE,steps:null});return i()});pre.propTypes={autoFocus:rt.bool,className:rt.string,closeOnSelect:rt.bool,dayOfWeekFormatter:rt.func,defaultValue:rt.object,disabled:rt.bool,disableFuture:rt.bool,disableHighlightToday:rt.bool,disableOpenPicker:rt.bool,disablePast:rt.bool,displayWeekNumber:rt.bool,enableAccessibleFieldDOMStructure:rt.any,fixedWeekNumber:rt.number,format:rt.string,formatDensity:rt.oneOf(["dense","spacious"]),inputRef:LQ,label:rt.node,loading:rt.bool,localeText:rt.object,maxDate:rt.object,minDate:rt.object,monthsPerRow:rt.oneOf([3,4]),name:rt.string,onAccept:rt.func,onChange:rt.func,onClose:rt.func,onError:rt.func,onMonthChange:rt.func,onOpen:rt.func,onSelectedSectionsChange:rt.func,onViewChange:rt.func,onYearChange:rt.func,open:rt.bool,openTo:rt.oneOf(["day","month","year"]),orientation:rt.oneOf(["landscape","portrait"]),readOnly:rt.bool,reduceAnimations:rt.bool,referenceDate:rt.object,renderLoading:rt.func,selectedSections:rt.oneOfType([rt.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),rt.number]),shouldDisableDate:rt.func,shouldDisableMonth:rt.func,shouldDisableYear:rt.func,showDaysOutsideCurrentMonth:rt.bool,slotProps:rt.object,slots:rt.object,sx:rt.oneOfType([rt.arrayOf(rt.oneOfType([rt.func,rt.object,rt.bool])),rt.func,rt.object]),timezone:rt.string,value:rt.object,view:rt.oneOf(["day","month","year"]),viewRenderers:rt.shape({day:rt.func,month:rt.func,year:rt.func}),views:rt.arrayOf(rt.oneOf(["day","month","year"]).isRequired),yearsOrder:rt.oneOf(["asc","desc"]),yearsPerRow:rt.oneOf([3,4])};const _5e=["desktopModeMediaQuery"],lW=U.forwardRef(function(t,n){const r=Js({props:t,name:"MuiDatePicker"}),{desktopModeMediaQuery:s=GFe}=r,c=xi(r,_5e);return D1(s,{defaultMatches:!0})?z.jsx(fre,Pt({ref:n},c)):z.jsx(pre,Pt({ref:n},c))}),x5e={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},b5e={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class w5e{constructor(t){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=x5e,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=d=>typeof d>"u"?new Date:d===null?null:new Date(d),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=d=>d,this.toJsDate=d=>d,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=d=>{const i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return d.match(i).map(m=>{const x=m[0];if(x==="p"||x==="P"){const T=this.longFormatters[x];return T(m,this.locale.formatLong)}return m}).join("")},this.formatNumber=d=>d,this.getDayOfWeek=d=>d.getDay()+1;const{locale:n,formats:r,longFormatters:s,lib:c}=t;this.locale=n,this.formats=Pt({},b5e,r),this.longFormatters=s,this.lib=c||"date-fns"}}class S5e extends w5e{constructor({locale:t,formats:n}={}){super({locale:t??OE,formats:n,longFormatters:jR}),this.parse=(r,s)=>r===""?null:M3e(r,s,new Date,{locale:this.locale}),this.isValid=r=>r==null?!1:ine(r),this.format=(r,s)=>this.formatByString(r,this.formats[s]),this.formatByString=(r,s)=>dne(r,s,{locale:this.locale}),this.isEqual=(r,s)=>r===null&&s===null?!0:r===null||s===null?!1:Ize(r,s),this.isSameYear=(r,s)=>P3e(r,s),this.isSameMonth=(r,s)=>D3e(r,s),this.isSameDay=(r,s)=>_Le(r,s),this.isSameHour=(r,s)=>R3e(r,s),this.isAfter=(r,s)=>bO(r,s),this.isAfterYear=(r,s)=>bO(r,FH(s)),this.isAfterDay=(r,s)=>bO(r,nj(s)),this.isBefore=(r,s)=>wO(r,s),this.isBeforeYear=(r,s)=>wO(r,this.startOfYear(s)),this.isBeforeDay=(r,s)=>wO(r,this.startOfDay(s)),this.isWithinRange=(r,[s,c])=>I3e(r,{start:s,end:c}),this.startOfYear=r=>sne(r),this.startOfMonth=r=>MLe(r),this.startOfWeek=r=>ym(r,{locale:this.locale}),this.startOfDay=r=>FT(r),this.endOfYear=r=>FH(r),this.endOfMonth=r=>one(r),this.endOfWeek=r=>ALe(r,{locale:this.locale}),this.endOfDay=r=>nj(r),this.addYears=(r,s)=>yLe(r,s),this.addMonths=(r,s)=>tne(r,s),this.addWeeks=(r,s)=>gLe(r,s),this.addDays=(r,s)=>uP(r,s),this.addHours=(r,s)=>uLe(r,s),this.addMinutes=(r,s)=>pLe(r,s),this.addSeconds=(r,s)=>mLe(r,s),this.getYear=r=>Pze(r),this.getMonth=r=>Rze(r),this.getDate=r=>wze(r),this.getHours=r=>Eze(r),this.getMinutes=r=>Aze(r),this.getSeconds=r=>Dze(r),this.getMilliseconds=r=>Mze(r),this.setYear=(r,s)=>j3e(r,s),this.setMonth=(r,s)=>k3e(r,s),this.setDate=(r,s)=>O3e(r,s),this.setHours=(r,s)=>L3e(r,s),this.setMinutes=(r,s)=>F3e(r,s),this.setSeconds=(r,s)=>B3e(r,s),this.setMilliseconds=(r,s)=>z3e(r,s),this.getDaysInMonth=r=>hne(r),this.getWeekArray=r=>{const s=this.startOfWeek(this.startOfMonth(r)),c=this.endOfWeek(this.endOfMonth(r));let d=0,i=s;const m=[];for(;this.isBefore(i,c);){const x=Math.floor(d/7);m[x]=m[x]||[],m[x].push(i),i=this.addDays(i,1),d+=1}return m},this.getWeekNumber=r=>U5(r,{locale:this.locale}),this.getYearRange=([r,s])=>{const c=this.startOfYear(r),d=this.endOfYear(s),i=[];let m=c;for(;this.isBefore(m,d);)i.push(m),m=this.addYears(m,1);return i}}}function cx(e,t,n,r){function s(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function i(T){try{x(r.next(T))}catch(C){d(C)}}function m(T){try{x(r.throw(T))}catch(C){d(C)}}function x(T){T.done?c(T.value):s(T.value).then(i,m)}x((r=r.apply(e,t||[])).next())})}const T5e=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function v1(e,t,n){const r=E5e(e),{webkitRelativePath:s}=e,c=typeof t=="string"?t:typeof s=="string"&&s.length>0?s:`./${e.name}`;return typeof r.path!="string"&&cW(r,"path",c),cW(r,"relativePath",c),r}function E5e(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const r=t.split(".").pop().toLowerCase(),s=T5e.get(r);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}function cW(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const C5e=[".DS_Store","Thumbs.db"];function M5e(e){return cx(this,void 0,void 0,function*(){return $R(e)&&A5e(e.dataTransfer)?I5e(e.dataTransfer,e.type):R5e(e)?D5e(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?P5e(e):[]})}function A5e(e){return $R(e)}function R5e(e){return $R(e)&&$R(e.target)}function $R(e){return typeof e=="object"&&e!==null}function D5e(e){return lj(e.target.files).map(t=>v1(t))}function P5e(e){return cx(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>v1(n))})}function I5e(e,t){return cx(this,void 0,void 0,function*(){if(e.items){const n=lj(e.items).filter(s=>s.kind==="file");if(t!=="drop")return n;const r=yield Promise.all(n.map(k5e));return uW(mre(r))}return uW(lj(e.files).map(n=>v1(n)))})}function uW(e){return e.filter(t=>C5e.indexOf(t.name)===-1)}function lj(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function k5e(e){if(typeof e.webkitGetAsEntry!="function")return dW(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?gre(t):dW(e,t)}function mre(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?mre(n):[n]],[])}function dW(e,t){return cx(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const c=yield e.getAsFileSystemHandle();if(c===null)throw new Error(`${e} is not a File`);if(c!==void 0){const d=yield c.getFile();return d.handle=c,v1(d)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return v1(r,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function O5e(e){return cx(this,void 0,void 0,function*(){return e.isDirectory?gre(e):L5e(e)})}function gre(e){const t=e.createReader();return new Promise((n,r)=>{const s=[];function c(){t.readEntries(d=>cx(this,void 0,void 0,function*(){if(d.length){const i=Promise.all(d.map(O5e));s.push(i),c()}else try{const i=yield Promise.all(s);n(i)}catch(i){r(i)}}),d=>{r(d)})}c()})}function L5e(e){return cx(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(r=>{const s=v1(r,e.fullPath);t(s)},r=>{n(r)})})})}var YM={},hW;function z5e(){return hW||(hW=1,YM.__esModule=!0,YM.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",s=(e.type||"").toLowerCase(),c=s.replace(/\/.*$/,"");return n.some(function(d){var i=d.trim().toLowerCase();return i.charAt(0)==="."?r.toLowerCase().endsWith(i):i.endsWith("/*")?c===i.replace(/\/.*$/,""):s===i})}return!0}),YM}var F5e=z5e();const SO=Ls(F5e);function fW(e){return N5e(e)||j5e(e)||vre(e)||B5e()}function B5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function N5e(e){if(Array.isArray(e))return cj(e)}function pW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function mW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pW(Object(n),!0).forEach(function(r){yre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pW(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NT(e,t){return U5e(e)||$5e(e,t)||vre(e,t)||V5e()}function V5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vre(e,t){if(e){if(typeof e=="string")return cj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cj(e,t)}}function cj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $5e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,c=!1,d,i;try{for(n=n.call(e);!(s=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));s=!0);}catch(m){c=!0,i=m}finally{try{!s&&n.return!=null&&n.return()}finally{if(c)throw i}}return r}}function U5e(e){if(Array.isArray(e))return e}var q5e=typeof SO=="function"?SO:SO.default,H5e="file-invalid-type",W5e="file-too-large",G5e="file-too-small",Y5e="too-many-files",X5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:H5e,message:"File type must be ".concat(r)}},gW=function(t){return{code:W5e,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},yW=function(t){return{code:G5e,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Z5e={code:Y5e,message:"Too many files"};function _re(e,t){var n=e.type==="application/x-moz-file"||q5e(e,t);return[n,n?null:X5e(t)]}function xre(e,t,n){if(g0(e.size))if(g0(t)&&g0(n)){if(e.size>n)return[!1,gW(n)];if(e.size<t)return[!1,yW(t)]}else{if(g0(t)&&e.size<t)return[!1,yW(t)];if(g0(n)&&e.size>n)return[!1,gW(n)]}return[!0,null]}function g0(e){return e!=null}function K5e(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,c=e.multiple,d=e.maxFiles,i=e.validator;return!c&&t.length>1||c&&d>=1&&t.length>d?!1:t.every(function(m){var x=_re(m,n),T=NT(x,1),C=T[0],A=xre(m,r,s),I=NT(A,1),k=I[0],B=i?i(m):null;return C&&k&&!B})}function UR(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function XM(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function vW(e){e.preventDefault()}function Q5e(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function J5e(e){return e.indexOf("Edge/")!==-1}function e4e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Q5e(e)||J5e(e)}function Zp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var s=arguments.length,c=new Array(s>1?s-1:0),d=1;d<s;d++)c[d-1]=arguments[d];return t.some(function(i){return!UR(r)&&i&&i.apply(void 0,[r].concat(c)),UR(r)})}}function t4e(){return"showOpenFilePicker"in window}function n4e(e){if(g0(e)){var t=Object.entries(e).filter(function(n){var r=NT(n,2),s=r[0],c=r[1],d=!0;return bre(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(c)||!c.every(wre))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(n,r){var s=NT(r,2),c=s[0],d=s[1];return mW(mW({},n),{},yre({},c,d))},{});return[{description:"Files",accept:t}]}return e}function r4e(e){if(g0(e))return Object.entries(e).reduce(function(t,n){var r=NT(n,2),s=r[0],c=r[1];return[].concat(fW(t),[s],fW(c))},[]).filter(function(t){return bre(t)||wre(t)}).join(",")}function i4e(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function o4e(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function bre(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function wre(e){return/^.*\.[\w]+$/.test(e)}var s4e=["children"],a4e=["open"],l4e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],c4e=["refKey","onChange","onClick"];function u4e(e){return f4e(e)||h4e(e)||Sre(e)||d4e()}function d4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f4e(e){if(Array.isArray(e))return uj(e)}function TO(e,t){return g4e(e)||m4e(e,t)||Sre(e,t)||p4e()}function p4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sre(e,t){if(e){if(typeof e=="string")return uj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uj(e,t)}}function uj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,c=!1,d,i;try{for(n=n.call(e);!(s=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));s=!0);}catch(m){c=!0,i=m}finally{try{!s&&n.return!=null&&n.return()}finally{if(c)throw i}}return r}}function g4e(e){if(Array.isArray(e))return e}function _W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_W(Object(n),!0).forEach(function(r){dj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_W(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qR(e,t){if(e==null)return{};var n=y4e(e,t),r,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y4e(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var s4=U.forwardRef(function(e,t){var n=e.children,r=qR(e,s4e),s=a4(r),c=s.open,d=qR(s,a4e);return U.useImperativeHandle(t,function(){return{open:c}},[c]),Rt.createElement(U.Fragment,null,n(Gs(Gs({},d),{},{open:c})))});s4.displayName="Dropzone";var Tre={disabled:!1,getFilesFromEvent:M5e,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};s4.defaultProps=Tre;s4.propTypes={children:rt.func,accept:rt.objectOf(rt.arrayOf(rt.string)),multiple:rt.bool,preventDropOnDocument:rt.bool,noClick:rt.bool,noKeyboard:rt.bool,noDrag:rt.bool,noDragEventsBubbling:rt.bool,minSize:rt.number,maxSize:rt.number,maxFiles:rt.number,disabled:rt.bool,getFilesFromEvent:rt.func,onFileDialogCancel:rt.func,onFileDialogOpen:rt.func,useFsAccessApi:rt.bool,autoFocus:rt.bool,onDragEnter:rt.func,onDragLeave:rt.func,onDragOver:rt.func,onDrop:rt.func,onDropAccepted:rt.func,onDropRejected:rt.func,onError:rt.func,validator:rt.func};var hj={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function a4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Gs(Gs({},Tre),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,c=t.maxSize,d=t.minSize,i=t.multiple,m=t.maxFiles,x=t.onDragEnter,T=t.onDragLeave,C=t.onDragOver,A=t.onDrop,I=t.onDropAccepted,k=t.onDropRejected,B=t.onFileDialogCancel,j=t.onFileDialogOpen,V=t.useFsAccessApi,H=t.autoFocus,G=t.preventDropOnDocument,X=t.noClick,Q=t.noKeyboard,ee=t.noDrag,ce=t.noDragEventsBubbling,fe=t.onError,ue=t.validator,ae=U.useMemo(function(){return r4e(n)},[n]),xe=U.useMemo(function(){return n4e(n)},[n]),we=U.useMemo(function(){return typeof j=="function"?j:xW},[j]),Me=U.useMemo(function(){return typeof B=="function"?B:xW},[B]),Se=U.useRef(null),Ae=U.useRef(null),_e=U.useReducer(v4e,hj),Pe=TO(_e,2),We=Pe[0],Fe=Pe[1],Ce=We.isFocused,He=We.isFileDialogActive,dt=U.useRef(typeof window<"u"&&window.isSecureContext&&V&&t4e()),gt=function(){!dt.current&&He&&setTimeout(function(){if(Ae.current){var tn=Ae.current.files;tn.length||(Fe({type:"closeDialog"}),Me())}},300)};U.useEffect(function(){return window.addEventListener("focus",gt,!1),function(){window.removeEventListener("focus",gt,!1)}},[Ae,He,Me,dt]);var Nt=U.useRef([]),wt=function(tn){Se.current&&Se.current.contains(tn.target)||(tn.preventDefault(),Nt.current=[])};U.useEffect(function(){return G&&(document.addEventListener("dragover",vW,!1),document.addEventListener("drop",wt,!1)),function(){G&&(document.removeEventListener("dragover",vW),document.removeEventListener("drop",wt))}},[Se,G]),U.useEffect(function(){return!r&&H&&Se.current&&Se.current.focus(),function(){}},[Se,H,r]);var ot=U.useCallback(function(Ot){fe?fe(Ot):console.error(Ot)},[fe]),st=U.useCallback(function(Ot){Ot.preventDefault(),Ot.persist(),bn(Ot),Nt.current=[].concat(u4e(Nt.current),[Ot.target]),XM(Ot)&&Promise.resolve(s(Ot)).then(function(tn){if(!(UR(Ot)&&!ce)){var Rn=tn.length,Hn=Rn>0&&K5e({files:tn,accept:ae,minSize:d,maxSize:c,multiple:i,maxFiles:m,validator:ue}),mr=Rn>0&&!Hn;Fe({isDragAccept:Hn,isDragReject:mr,isDragActive:!0,type:"setDraggedFiles"}),x&&x(Ot)}}).catch(function(tn){return ot(tn)})},[s,x,ot,ce,ae,d,c,i,m,ue]),St=U.useCallback(function(Ot){Ot.preventDefault(),Ot.persist(),bn(Ot);var tn=XM(Ot);if(tn&&Ot.dataTransfer)try{Ot.dataTransfer.dropEffect="copy"}catch{}return tn&&C&&C(Ot),!1},[C,ce]),Dt=U.useCallback(function(Ot){Ot.preventDefault(),Ot.persist(),bn(Ot);var tn=Nt.current.filter(function(Hn){return Se.current&&Se.current.contains(Hn)}),Rn=tn.indexOf(Ot.target);Rn!==-1&&tn.splice(Rn,1),Nt.current=tn,!(tn.length>0)&&(Fe({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),XM(Ot)&&T&&T(Ot))},[Se,T,ce]),Et=U.useCallback(function(Ot,tn){var Rn=[],Hn=[];Ot.forEach(function(mr){var Xn=_re(mr,ae),or=TO(Xn,2),Mn=or[0],Fr=or[1],Cr=xre(mr,d,c),xr=TO(Cr,2),ir=xr[0],Yr=xr[1],Sr=ue?ue(mr):null;if(Mn&&ir&&!Sr)Rn.push(mr);else{var Dr=[Fr,Yr];Sr&&(Dr=Dr.concat(Sr)),Hn.push({file:mr,errors:Dr.filter(function(ki){return ki})})}}),(!i&&Rn.length>1||i&&m>=1&&Rn.length>m)&&(Rn.forEach(function(mr){Hn.push({file:mr,errors:[Z5e]})}),Rn.splice(0)),Fe({acceptedFiles:Rn,fileRejections:Hn,isDragReject:Hn.length>0,type:"setFiles"}),A&&A(Rn,Hn,tn),Hn.length>0&&k&&k(Hn,tn),Rn.length>0&&I&&I(Rn,tn)},[Fe,i,ae,d,c,m,A,I,k,ue]),yt=U.useCallback(function(Ot){Ot.preventDefault(),Ot.persist(),bn(Ot),Nt.current=[],XM(Ot)&&Promise.resolve(s(Ot)).then(function(tn){UR(Ot)&&!ce||Et(tn,Ot)}).catch(function(tn){return ot(tn)}),Fe({type:"reset"})},[s,Et,ot,ce]),Lt=U.useCallback(function(){if(dt.current){Fe({type:"openDialog"}),we();var Ot={multiple:i,types:xe};window.showOpenFilePicker(Ot).then(function(tn){return s(tn)}).then(function(tn){Et(tn,null),Fe({type:"closeDialog"})}).catch(function(tn){i4e(tn)?(Me(tn),Fe({type:"closeDialog"})):o4e(tn)?(dt.current=!1,Ae.current?(Ae.current.value=null,Ae.current.click()):ot(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ot(tn)});return}Ae.current&&(Fe({type:"openDialog"}),we(),Ae.current.value=null,Ae.current.click())},[Fe,we,Me,V,Et,ot,xe,i]),Ct=U.useCallback(function(Ot){!Se.current||!Se.current.isEqualNode(Ot.target)||(Ot.key===" "||Ot.key==="Enter"||Ot.keyCode===32||Ot.keyCode===13)&&(Ot.preventDefault(),Lt())},[Se,Lt]),Wt=U.useCallback(function(){Fe({type:"focus"})},[]),fn=U.useCallback(function(){Fe({type:"blur"})},[]),Zt=U.useCallback(function(){X||(e4e()?setTimeout(Lt,0):Lt())},[X,Lt]),Ut=function(tn){return r?null:tn},kn=function(tn){return Q?null:Ut(tn)},Bn=function(tn){return ee?null:Ut(tn)},bn=function(tn){ce&&tn.stopPropagation()},Nn=U.useMemo(function(){return function(){var Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tn=Ot.refKey,Rn=tn===void 0?"ref":tn,Hn=Ot.role,mr=Ot.onKeyDown,Xn=Ot.onFocus,or=Ot.onBlur,Mn=Ot.onClick,Fr=Ot.onDragEnter,Cr=Ot.onDragOver,xr=Ot.onDragLeave,ir=Ot.onDrop,Yr=qR(Ot,l4e);return Gs(Gs(dj({onKeyDown:kn(Zp(mr,Ct)),onFocus:kn(Zp(Xn,Wt)),onBlur:kn(Zp(or,fn)),onClick:Ut(Zp(Mn,Zt)),onDragEnter:Bn(Zp(Fr,st)),onDragOver:Bn(Zp(Cr,St)),onDragLeave:Bn(Zp(xr,Dt)),onDrop:Bn(Zp(ir,yt)),role:typeof Hn=="string"&&Hn!==""?Hn:"presentation"},Rn,Se),!r&&!Q?{tabIndex:0}:{}),Yr)}},[Se,Ct,Wt,fn,Zt,st,St,Dt,yt,Q,ee,r]),ft=U.useCallback(function(Ot){Ot.stopPropagation()},[]),vn=U.useMemo(function(){return function(){var Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tn=Ot.refKey,Rn=tn===void 0?"ref":tn,Hn=Ot.onChange,mr=Ot.onClick,Xn=qR(Ot,c4e),or=dj({accept:ae,multiple:i,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ut(Zp(Hn,yt)),onClick:Ut(Zp(mr,ft)),tabIndex:-1},Rn,Ae);return Gs(Gs({},or),Xn)}},[Ae,n,i,yt,r]);return Gs(Gs({},We),{},{isFocused:Ce&&!r,getRootProps:Nn,getInputProps:vn,rootRef:Se,inputRef:Ae,open:Ut(Lt)})}function v4e(e,t){switch(t.type){case"focus":return Gs(Gs({},e),{},{isFocused:!0});case"blur":return Gs(Gs({},e),{},{isFocused:!1});case"openDialog":return Gs(Gs({},hj),{},{isFileDialogActive:!0});case"closeDialog":return Gs(Gs({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Gs(Gs({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Gs(Gs({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Gs({},hj);default:return e}}function xW(){}const _4e=MN().shape({name:vh().required("Project name is required"),description:vh().required("Project Description is required"),team:HK().of(vh().email("Invalid email")),location:vh().required("Location  is required"),startDate:fR().nullable().test("start-required-if-end","Start date is required if end date is set",function(e){const{endDate:t}=this.parent;return t&&!e?this.createError({message:"Start date is required if end date is set"}):!0}),endDate:fR().nullable().test("end-required-if-start","End date is required if start date is set",function(e){const{startDate:t}=this.parent;return t&&!e?this.createError({message:"End date is required if start date is set"}):!0})}),x4e=({onSubmit:e})=>{const[t,n]=U.useState(""),[r,s]=U.useState(null),[c,d]=U.useState(!1),[i,m]=U.useState(null),[x,T]=U.useState(0),C=bv(),A=Pu(H=>H.auth.token),I=H=>{H.length&&s(H[0])},{getRootProps:k,getInputProps:B,isDragActive:j}=a4({onDrop:I,multiple:!1}),V=async H=>{var X,Q,ee,ce,fe,ue,ae,xe,we,Me,Se,Ae;if(d(!0),m(null),T(0),!r)try{const _e=await Ps.post("/project",H,{headers:{Authorization:A}}),Pe=(Q=(X=_e.data)==null?void 0:X.data)==null?void 0:Q._id;C(Pe?`/project/${Pe}/View`:"/project"),_e.status===201&&jb("Successfully Created Project",{variant:"success"});return}catch(_e){m(((ce=(ee=_e.response)==null?void 0:ee.data)==null?void 0:ce.message)||_e.message||"Failed to create project"),d(!1);return}H.file={filename:r.name,contentType:r.type,size:r.size};let G=null;try{const _e=await Ps.post("/project",H,{headers:{Authorization:A}}),Pe=_e.data.data;if(G=((fe=Pe==null?void 0:Pe.project)==null?void 0:fe.id)||((ae=(ue=_e.data)==null?void 0:ue.data)==null?void 0:ae._id),((xe=Pe.upload)==null?void 0:xe.uploadType)==="single")await Ps.put(Pe.upload.url,r,{headers:{"Content-Type":r.type},onUploadProgress:We=>{const Fe=Math.round(We.loaded*100/We.total);T(Fe)}});else if(((we=Pe.upload)==null?void 0:we.uploadType)==="multipart"){const{parts:We,uploadId:Fe,key:Ce,partSize:He}=Pe.upload,dt=[];let gt=0;for(;gt<r.size;){const wt=Math.min(gt+He,r.size);dt.push(r.slice(gt,wt)),gt=wt}const Nt=[];for(let wt=0;wt<We.length;wt++){const ot=await fetch(We[wt].url,{method:"PUT",body:dt[wt]});if(!ot.ok)throw new Error(`Chunk ${wt+1} failed to upload`);const st=(Me=ot.headers.get("ETag"))==null?void 0:Me.replace(/"/g,"");Nt.push({PartNumber:We[wt].partNumber,ETag:st});const St=Math.round((wt+1)/We.length*100);T(St)}await Ps.post("/work-day/complete-upload",{projectId:G,name:new Date,key:Ce,uploadId:Fe,parts:Nt},{headers:{Authorization:A}})}jb("Upload successful!",{variant:"success"}),jb("Successfully Created Historical Data",{variant:"success"})}catch(_e){jb(((Ae=(Se=_e.response)==null?void 0:Se.data)==null?void 0:Ae.message)||_e.message||"Failed to create project",{variant:"error"})}finally{d(!1),C(G?`/project/${G}/View`:"/project")}};return z.jsxs(fa,{elevation:4,sx:{p:5,maxWidth:500},children:[z.jsx(En,{variant:"h2",mb:2,children:"Create New Project"}),z.jsx(m_e,{initialValues:{name:"",team:[],startDate:null,endDate:null,description:"",location:""},validationSchema:_4e,onSubmit:V,children:({values:H,errors:G,touched:X,setFieldValue:Q})=>z.jsxs(OK,{children:[z.jsxs(Pn,{mb:2,children:[z.jsx(Vi,{fullWidth:!0,name:"name",label:"Project Name",value:H.name,onChange:ee=>Q("name",ee.target.value),error:X.name&&!!G.name}),X.name&&G.name&&z.jsx(En,{color:"error",variant:"caption",children:G.name})]}),z.jsxs(Pn,{mb:2,children:[z.jsx(Vi,{fullWidth:!0,name:"location",label:"Project Location",value:H.location||"",onChange:ee=>Q("location",ee.target.value)}),X.location&&G.location&&z.jsx(En,{color:"error",variant:"caption",children:G.location})]}),z.jsx(_ne,{dateAdapter:S5e,children:z.jsxs(Ns,{direction:"row",spacing:2,mb:2,children:[z.jsx(lW,{label:"Start Date",value:H.startDate,onChange:ee=>Q("startDate",ee),renderInput:ee=>z.jsx(Pn,{sx:{"& .MuiInputBase-root":{borderRadius:"30px"}},children:z.jsx(Vi,{...ee,fullWidth:!0,error:X.startDate&&!!G.startDate,helperText:X.startDate&&G.startDate})})}),z.jsx(lW,{label:"End Date",value:H.endDate,onChange:ee=>Q("endDate",ee),renderInput:ee=>z.jsx(Vi,{...ee,fullWidth:!0,error:X.endDate&&!!G.endDate,helperText:X.endDate&&G.endDate})})]})}),z.jsxs(Pn,{mb:2,children:[z.jsx(Vi,{fullWidth:!0,name:"description",label:"Project Description",value:H.description||"",onChange:ee=>Q("description",ee.target.value)}),X.description&&G.description&&z.jsx(En,{color:"error",variant:"caption",children:G.description})]}),z.jsx(Vi,{sx:{mb:2},fullWidth:!0,label:"Invite Team Member (press Enter to add)",value:t,onChange:ee=>n(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&t&&(ee.preventDefault(),Q("team",[...H.team,t]),n(""))}}),z.jsx(Ns,{direction:"row",spacing:1,flexWrap:"wrap",mb:2,children:H.team.map((ee,ce)=>z.jsx(yd,{label:ee,onDelete:()=>{const fe=[...H.team];fe.splice(ce,1),Q("team",fe)}},ce))}),z.jsxs(Pn,{...k(),sx:{border:"2px dashed #ccc",borderRadius:"8px",padding:4,textAlign:"center",justifyContent:"center",cursor:"pointer",backgroundColor:j?"#f0f0f0":"transparent",mb:2},children:[z.jsx("input",{...B()}),z.jsx(Tte,{}),z.jsx(En,{variant:"h6",gutterBottom:!0,children:"Upload Supporting File"}),z.jsx(En,{variant:"body2",sx:{mb:2},children:"Drag & drop a .zip file or click below to browse"}),z.jsx(Wi,{variant:"outlined",children:"Browse Files"}),r&&z.jsxs(En,{variant:"body2",sx:{mt:1},children:["Selected: ",r.name]}),c&&x>0&&z.jsxs(Pn,{sx:{mt:2,justifyContent:"center",alignContent:"center",textAlign:"center"},children:[z.jsxs(En,{variant:"caption",children:["Uploading... ",x,"%"]}),z.jsx(Pn,{sx:{width:"100%"},children:z.jsx(Ns,{spacing:1,children:z.jsx(Pn,{sx:{width:"100%"},children:z.jsx(Pn,{sx:{height:4,bgcolor:"#eee",borderRadius:2,overflow:"hidden"},children:z.jsx(Pn,{sx:{width:`${x}%`,height:"100%",bgcolor:"primary.main",transition:"width 0.2s"}})})})})})]})]}),i&&z.jsx(En,{color:"error",variant:"body2",sx:{mb:2},children:i}),z.jsx(Wi,{color:"primary",variant:"contained",type:"submit",fullWidth:!0,disabled:c,children:c?"Creating...":"Create Project"})]})})]})},b4e=()=>{const e=t=>{console.log("Project submitted:",t)};return z.jsx(Ii,{container:!0,sx:{minHeight:"80vh",flexDirection:"row",width:"100%",justifyContent:"center"},children:z.jsx(Ii,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:z.jsx(x4e,{onSubmit:e})})})},w4e=()=>!!localStorage.getItem("token"),Eb=({element:e,isBoth:t=!1,...n})=>w4e()||t?z.jsx(e,{...n}):z.jsx(Yce,{to:"/"});var kA={exports:{}},S4e=kA.exports,bW;function T4e(){return bW||(bW=1,function(e,t){(function(n,r){e.exports=r()})(S4e,function(){var n,r,s;function c(i,m){if(!n)n=m;else if(!r)r=m;else{var x="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",T={};n(T),s=m(T),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}c(["exports"],function(i){var m=1e-6,x=typeof Float32Array<"u"?Float32Array:Array;function T(u,o){var l=o[0],f=o[1],g=o[2],b=o[3],w=l*b-g*f;return w?(u[0]=b*(w=1/w),u[1]=-f*w,u[2]=-g*w,u[3]=l*w,u):null}function C(){var u=new x(9);return x!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function A(u,o){var l=o[0],f=o[1],g=o[2],b=o[3],w=o[4],R=o[5],P=o[6],L=o[7],$=o[8];return u[0]=w*$-R*L,u[1]=g*L-f*$,u[2]=f*R-g*w,u[3]=R*P-b*$,u[4]=l*$-g*P,u[5]=g*b-l*R,u[6]=b*L-w*P,u[7]=f*P-l*L,u[8]=l*w-f*b,u}function I(u,o,l){var f=o[0],g=o[1],b=o[2],w=o[3],R=o[4],P=o[5],L=o[6],$=o[7],q=o[8],Y=l[0],ne=l[1],re=l[2],de=l[3],ye=l[4],be=l[5],Le=l[6],Ie=l[7],he=l[8];return u[0]=Y*f+ne*w+re*L,u[1]=Y*g+ne*R+re*$,u[2]=Y*b+ne*P+re*q,u[3]=de*f+ye*w+be*L,u[4]=de*g+ye*R+be*$,u[5]=de*b+ye*P+be*q,u[6]=Le*f+Ie*w+he*L,u[7]=Le*g+Ie*R+he*$,u[8]=Le*b+Ie*P+he*q,u}function k(){var u=new x(16);return x!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u}function B(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function j(u,o){var l=o[0],f=o[1],g=o[2],b=o[3],w=o[4],R=o[5],P=o[6],L=o[7],$=o[8],q=o[9],Y=o[10],ne=o[11],re=o[12],de=o[13],ye=o[14],be=o[15],Le=l*R-f*w,Ie=l*P-g*w,he=l*L-b*w,Ee=f*P-g*R,Oe=f*L-b*R,Ve=g*L-b*P,tt=$*de-q*re,it=$*ye-Y*re,at=$*be-ne*re,ht=q*ye-Y*de,zt=q*be-ne*de,nn=Y*be-ne*ye,Xt=Le*nn-Ie*zt+he*ht+Ee*at-Oe*it+Ve*tt;return Xt?(u[0]=(R*nn-P*zt+L*ht)*(Xt=1/Xt),u[1]=(g*zt-f*nn-b*ht)*Xt,u[2]=(de*Ve-ye*Oe+be*Ee)*Xt,u[3]=(Y*Oe-q*Ve-ne*Ee)*Xt,u[4]=(P*at-w*nn-L*it)*Xt,u[5]=(l*nn-g*at+b*it)*Xt,u[6]=(ye*he-re*Ve-be*Ie)*Xt,u[7]=($*Ve-Y*he+ne*Ie)*Xt,u[8]=(w*zt-R*at+L*tt)*Xt,u[9]=(f*at-l*zt-b*tt)*Xt,u[10]=(re*Oe-de*he+be*Le)*Xt,u[11]=(q*he-$*Oe-ne*Le)*Xt,u[12]=(R*it-w*ht-P*tt)*Xt,u[13]=(l*ht-f*it+g*tt)*Xt,u[14]=(de*Ie-re*Ee-ye*Le)*Xt,u[15]=($*Ee-q*Ie+Y*Le)*Xt,u):null}function V(u,o,l){var f=o[0],g=o[1],b=o[2],w=o[3],R=o[4],P=o[5],L=o[6],$=o[7],q=o[8],Y=o[9],ne=o[10],re=o[11],de=o[12],ye=o[13],be=o[14],Le=o[15],Ie=l[0],he=l[1],Ee=l[2],Oe=l[3];return u[0]=Ie*f+he*R+Ee*q+Oe*de,u[1]=Ie*g+he*P+Ee*Y+Oe*ye,u[2]=Ie*b+he*L+Ee*ne+Oe*be,u[3]=Ie*w+he*$+Ee*re+Oe*Le,u[4]=(Ie=l[4])*f+(he=l[5])*R+(Ee=l[6])*q+(Oe=l[7])*de,u[5]=Ie*g+he*P+Ee*Y+Oe*ye,u[6]=Ie*b+he*L+Ee*ne+Oe*be,u[7]=Ie*w+he*$+Ee*re+Oe*Le,u[8]=(Ie=l[8])*f+(he=l[9])*R+(Ee=l[10])*q+(Oe=l[11])*de,u[9]=Ie*g+he*P+Ee*Y+Oe*ye,u[10]=Ie*b+he*L+Ee*ne+Oe*be,u[11]=Ie*w+he*$+Ee*re+Oe*Le,u[12]=(Ie=l[12])*f+(he=l[13])*R+(Ee=l[14])*q+(Oe=l[15])*de,u[13]=Ie*g+he*P+Ee*Y+Oe*ye,u[14]=Ie*b+he*L+Ee*ne+Oe*be,u[15]=Ie*w+he*$+Ee*re+Oe*Le,u}function H(u,o,l){var f,g,b,w,R,P,L,$,q,Y,ne,re,de=l[0],ye=l[1],be=l[2];return o===u?(u[12]=o[0]*de+o[4]*ye+o[8]*be+o[12],u[13]=o[1]*de+o[5]*ye+o[9]*be+o[13],u[14]=o[2]*de+o[6]*ye+o[10]*be+o[14],u[15]=o[3]*de+o[7]*ye+o[11]*be+o[15]):(g=o[1],b=o[2],w=o[3],R=o[4],P=o[5],L=o[6],$=o[7],q=o[8],Y=o[9],ne=o[10],re=o[11],u[0]=f=o[0],u[1]=g,u[2]=b,u[3]=w,u[4]=R,u[5]=P,u[6]=L,u[7]=$,u[8]=q,u[9]=Y,u[10]=ne,u[11]=re,u[12]=f*de+R*ye+q*be+o[12],u[13]=g*de+P*ye+Y*be+o[13],u[14]=b*de+L*ye+ne*be+o[14],u[15]=w*de+$*ye+re*be+o[15]),u}function G(u,o,l){var f=l[0],g=l[1],b=l[2];return u[0]=o[0]*f,u[1]=o[1]*f,u[2]=o[2]*f,u[3]=o[3]*f,u[4]=o[4]*g,u[5]=o[5]*g,u[6]=o[6]*g,u[7]=o[7]*g,u[8]=o[8]*b,u[9]=o[9]*b,u[10]=o[10]*b,u[11]=o[11]*b,u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u}function X(u,o,l){var f=Math.sin(l),g=Math.cos(l),b=o[4],w=o[5],R=o[6],P=o[7],L=o[8],$=o[9],q=o[10],Y=o[11];return o!==u&&(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[4]=b*g+L*f,u[5]=w*g+$*f,u[6]=R*g+q*f,u[7]=P*g+Y*f,u[8]=L*g-b*f,u[9]=$*g-w*f,u[10]=q*g-R*f,u[11]=Y*g-P*f,u}function Q(u,o,l){var f=Math.sin(l),g=Math.cos(l),b=o[0],w=o[1],R=o[2],P=o[3],L=o[8],$=o[9],q=o[10],Y=o[11];return o!==u&&(u[4]=o[4],u[5]=o[5],u[6]=o[6],u[7]=o[7],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=b*g-L*f,u[1]=w*g-$*f,u[2]=R*g-q*f,u[3]=P*g-Y*f,u[8]=b*f+L*g,u[9]=w*f+$*g,u[10]=R*f+q*g,u[11]=P*f+Y*g,u}function ee(u,o,l){var f=Math.sin(l),g=Math.cos(l),b=o[0],w=o[1],R=o[2],P=o[3],L=o[4],$=o[5],q=o[6],Y=o[7];return o!==u&&(u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15]),u[0]=b*g+L*f,u[1]=w*g+$*f,u[2]=R*g+q*f,u[3]=P*g+Y*f,u[4]=L*g-b*f,u[5]=$*g-w*f,u[6]=q*g-R*f,u[7]=Y*g-P*f,u}function ce(u,o){return u[0]=o[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=o[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=o[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function fe(u,o,l){var f,g,b,w=l[0],R=l[1],P=l[2],L=Math.hypot(w,R,P);return L<m?null:(w*=L=1/L,R*=L,P*=L,f=Math.sin(o),g=Math.cos(o),u[0]=w*w*(b=1-g)+g,u[1]=R*w*b+P*f,u[2]=P*w*b-R*f,u[3]=0,u[4]=w*R*b-P*f,u[5]=R*R*b+g,u[6]=P*R*b+w*f,u[7]=0,u[8]=w*P*b+R*f,u[9]=R*P*b-w*f,u[10]=P*P*b+g,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u)}function ue(u,o){var l=o[0],f=o[1],g=o[2],b=o[3],w=l+l,R=f+f,P=g+g,L=l*w,$=f*w,q=f*R,Y=g*w,ne=g*R,re=g*P,de=b*w,ye=b*R,be=b*P;return u[0]=1-q-re,u[1]=$+be,u[2]=Y-ye,u[3]=0,u[4]=$-be,u[5]=1-L-re,u[6]=ne+de,u[7]=0,u[8]=Y+ye,u[9]=ne-de,u[10]=1-L-q,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}Math.hypot||(Math.hypot=function(){for(var u=0,o=arguments.length;o--;)u+=arguments[o]*arguments[o];return Math.sqrt(u)});var ae=V;function xe(){var u=new x(3);return x!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function we(u){var o=new x(3);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o}function Me(u){return Math.hypot(u[0],u[1],u[2])}function Se(u,o,l){var f=new x(3);return f[0]=u,f[1]=o,f[2]=l,f}function Ae(u,o,l){return u[0]=o[0]+l[0],u[1]=o[1]+l[1],u[2]=o[2]+l[2],u}function _e(u,o,l){return u[0]=o[0]-l[0],u[1]=o[1]-l[1],u[2]=o[2]-l[2],u}function Pe(u,o,l){return u[0]=o[0]*l[0],u[1]=o[1]*l[1],u[2]=o[2]*l[2],u}function We(u,o,l){return u[0]=Math.min(o[0],l[0]),u[1]=Math.min(o[1],l[1]),u[2]=Math.min(o[2],l[2]),u}function Fe(u,o,l){return u[0]=Math.max(o[0],l[0]),u[1]=Math.max(o[1],l[1]),u[2]=Math.max(o[2],l[2]),u}function Ce(u,o,l){return u[0]=o[0]*l,u[1]=o[1]*l,u[2]=o[2]*l,u}function He(u,o,l,f){return u[0]=o[0]+l[0]*f,u[1]=o[1]+l[1]*f,u[2]=o[2]+l[2]*f,u}function dt(u,o){var l=o[0]-u[0],f=o[1]-u[1],g=o[2]-u[2];return l*l+f*f+g*g}function gt(u){var o=u[0],l=u[1],f=u[2];return o*o+l*l+f*f}function Nt(u,o){return u[0]=-o[0],u[1]=-o[1],u[2]=-o[2],u}function wt(u,o){var l=o[0],f=o[1],g=o[2],b=l*l+f*f+g*g;return b>0&&(b=1/Math.sqrt(b)),u[0]=o[0]*b,u[1]=o[1]*b,u[2]=o[2]*b,u}function ot(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]}function st(u,o,l){var f=o[0],g=o[1],b=o[2],w=l[0],R=l[1],P=l[2];return u[0]=g*P-b*R,u[1]=b*w-f*P,u[2]=f*R-g*w,u}function St(u,o,l,f){var g=o[0],b=o[1],w=o[2];return u[0]=g+f*(l[0]-g),u[1]=b+f*(l[1]-b),u[2]=w+f*(l[2]-w),u}function Dt(u,o,l){var f=o[0],g=o[1],b=o[2],w=l[3]*f+l[7]*g+l[11]*b+l[15];return u[0]=(l[0]*f+l[4]*g+l[8]*b+l[12])/(w=w||1),u[1]=(l[1]*f+l[5]*g+l[9]*b+l[13])/w,u[2]=(l[2]*f+l[6]*g+l[10]*b+l[14])/w,u}function Et(u,o,l){var f=o[0],g=o[1],b=o[2];return u[0]=f*l[0]+g*l[3]+b*l[6],u[1]=f*l[1]+g*l[4]+b*l[7],u[2]=f*l[2]+g*l[5]+b*l[8],u}function yt(u,o,l){var f=l[0],g=l[1],b=l[2],w=o[0],R=o[1],P=o[2],L=g*P-b*R,$=b*w-f*P,q=f*R-g*w,Y=g*q-b*$,ne=b*L-f*q,re=f*$-g*L,de=2*l[3];return $*=de,q*=de,ne*=2,re*=2,u[0]=w+(L*=de)+(Y*=2),u[1]=R+$+ne,u[2]=P+q+re,u}function Lt(u,o){return u[0]===o[0]&&u[1]===o[1]&&u[2]===o[2]}var Ct=_e,Wt=Pe,fn=Me;function Zt(){var u=new x(4);return x!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0),u}function Ut(u,o,l){return u[0]=o[0]*l,u[1]=o[1]*l,u[2]=o[2]*l,u[3]=o[3]*l,u}function kn(u,o){var l=o[0],f=o[1],g=o[2],b=o[3],w=l*l+f*f+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),u[0]=l*w,u[1]=f*w,u[2]=g*w,u[3]=b*w,u}function Bn(u,o,l){var f=o[0],g=o[1],b=o[2],w=o[3];return u[0]=l[0]*f+l[4]*g+l[8]*b+l[12]*w,u[1]=l[1]*f+l[5]*g+l[9]*b+l[13]*w,u[2]=l[2]*f+l[6]*g+l[10]*b+l[14]*w,u[3]=l[3]*f+l[7]*g+l[11]*b+l[15]*w,u}function bn(){var u=new x(4);return x!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function Nn(u){return u[0]=0,u[1]=0,u[2]=0,u[3]=1,u}function ft(u,o,l){l*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],R=Math.sin(l),P=Math.cos(l);return u[0]=f*P+w*R,u[1]=g*P+b*R,u[2]=b*P-g*R,u[3]=w*P-f*R,u}function vn(u,o,l){l*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],R=Math.sin(l),P=Math.cos(l);return u[0]=f*P-b*R,u[1]=g*P+w*R,u[2]=b*P+f*R,u[3]=w*P-g*R,u}xe(),Zt();var Ot,tn,Rn,Hn,mr,Xn=kn,or=(Ot=xe(),tn=Se(1,0,0),Rn=Se(0,1,0),function(u,o,l){var f=ot(o,l);return f<-.999999?(st(Ot,tn,o),fn(Ot)<1e-6&&st(Ot,Rn,o),wt(Ot,Ot),function(g,b,w){w*=.5;var R=Math.sin(w);g[0]=R*b[0],g[1]=R*b[1],g[2]=R*b[2],g[3]=Math.cos(w)}(u,Ot,Math.PI),u):f>.999999?(u[0]=0,u[1]=0,u[2]=0,u[3]=1,u):(st(Ot,o,l),u[0]=Ot[0],u[1]=Ot[1],u[2]=Ot[2],u[3]=1+f,Xn(u,u))});function Mn(){var u=new x(2);return x!=Float32Array&&(u[0]=0,u[1]=0),u}function Fr(u,o){var l=new x(2);return l[0]=u,l[1]=o,l}function Cr(u,o,l){return u[0]=o[0]+l[0],u[1]=o[1]+l[1],u}function xr(u,o,l){return u[0]=o[0]-l[0],u[1]=o[1]-l[1],u}function ir(u,o,l){return u[0]=o[0]*l,u[1]=o[1]*l,u}function Yr(u){return Math.hypot(u[0],u[1])}function Sr(u,o){var l=o[0],f=o[1],g=l*l+f*f;return g>0&&(g=1/Math.sqrt(g)),u[0]=o[0]*g,u[1]=o[1]*g,u}function Dr(u,o){return u[0]*o[0]+u[1]*o[1]}function ki(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}bn(),bn(),C(),Mn();var ns,Vo,zo=function(){if(mr)return Hn;function u(o,l,f,g){this.cx=3*o,this.bx=3*(f-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=l,this.p2x=f,this.p2y=g}return mr=1,Hn=u,u.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,l){if(l===void 0&&(l=1e-6),o<0)return 0;if(o>1)return 1;for(var f=o,g=0;g<8;g++){var b=this.sampleCurveX(f)-o;if(Math.abs(b)<l)return f;var w=this.sampleCurveDerivativeX(f);if(Math.abs(w)<1e-6)break;f-=b/w}var R=0,P=1;for(f=o,g=0;g<20&&(b=this.sampleCurveX(f),!(Math.abs(b-o)<l));g++)o>b?R=f:P=f,f=.5*(P-R)+R;return f},solve:function(o,l){return this.sampleCurveY(this.solveCurveX(o,l))}},Hn}(),Rl=ki(zo);function ma(){if(Vo)return ns;function u(o,l){this.x=o,this.y=l}return Vo=1,ns=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,l){return this.clone()._rotateAround(o,l)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var l=o.x-this.x,f=o.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,l){return Math.atan2(this.x*l-this.y*o,this.x*o+this.y*l)},_matMult:function(o){var l=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=l,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var l=Math.cos(o),f=Math.sin(o),g=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=g,this},_rotateAround:function(o,l){var f=Math.cos(o),g=Math.sin(o),b=l.y+g*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-g*(this.y-l.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(o){return o instanceof u?o:Array.isArray(o)?new u(o[0],o[1]):o},ns}var mn=ki(ma());function ea(u,o){if(Array.isArray(u)){if(!Array.isArray(o)||u.length!==o.length)return!1;for(let l=0;l<u.length;l++)if(!ea(u[l],o[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&o!==null){if(typeof o!="object"||Object.keys(u).length!==Object.keys(o).length)return!1;for(const l in u)if(!ea(u[l],o[l]))return!1;return!0}return u===o}const Pr=Math.PI/180,ke=180/Math.PI;function ie(u){return u*Pr}function le(u){return u*ke}const Te=[[0,0],[1,0],[1,1],[0,1]];function ze(u){if(u<=0)return 0;if(u>=1)return 1;const o=u*u,l=o*u;return 4*(u<.5?l:3*(u-o)+l-.75)}function $e(u,o,l,f){const g=new Rl(u,o,l,f);return function(b){return g.solve(b)}}const Qe=$e(.25,.1,.25,1);function Ze(u,o,l){return Math.min(l,Math.max(o,u))}function et(u,o,l){return(l=Ze((l-u)/(o-u),0,1))*l*(3-2*l)}function ct(u,o,l){const f=l-o,g=((u-o)%f+f)%f+o;return g===o?l:g}function vt(u,o,l){if(!u.length)return l(null,[]);let f=u.length;const g=new Array(u.length);let b=null;u.forEach((w,R)=>{o(w,(P,L)=>{P&&(b=P),g[R]=L,--f==0&&l(b,g)})})}function lt(u,...o){for(const l of o)for(const f in l)u[f]=l[f];return u}let Ht=1;function dn(){return Ht++}function wn(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))}function sr(u,o){u.forEach(l=>{o[l]&&(o[l]=o[l].bind(o))})}function nr(u,o,l){const f={};for(const g in u)f[g]=o.call(this,u[g],g,u);return f}function rr(u,o,l){const f={};for(const g in u)o.call(this,u[g],g,u)&&(f[g]=u[g]);return f}function kr(u){return Array.isArray(u)?u.map(kr):typeof u=="object"&&u?nr(u,kr):u}const Si={};function Ir(u){Si[u]||(typeof console<"u"&&console.warn(u),Si[u]=!0)}function ui(u,o,l){return(l.y-u.y)*(o.x-u.x)>(o.y-u.y)*(l.x-u.x)}function ti(u){let o=0;for(let l,f,g=0,b=u.length,w=b-1;g<b;w=g++)l=u[g],f=u[w],o+=(f.x-l.x)*(l.y+f.y);return o}function Ti([u,o,l]){const f=ie(o+90),g=ie(l);return{x:u*Math.cos(f)*Math.sin(g),y:u*Math.sin(f)*Math.sin(g),z:u*Math.cos(g),azimuthal:o,polar:l}}function ji(u){return(typeof self<"u"||u!==void 0)&&typeof WorkerGlobalScope<"u"&&(u!==void 0?u:self)instanceof WorkerGlobalScope}function Xi(u){const o={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,g,b)=>{const w=g||b;return o[f]=!w||w.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o}let Mo=null;function Jr(u,o){return[u[4*o],u[4*o+1],u[4*o+2],u[4*o+3]]}function go(u,o,l,f){for(;o<l;){const g=o+l>>1;u[g]<f?o=g+1:l=g}return o}function $s(u,o,l,f){for(;o<l;){const g=o+l>>1;u[g]<=f?o=g+1:l=g}return o}function $o(u){return u>0?1/(1.001-u):1+u}function fs(u){return u>0?1-1/(1.001-u):-u}function Oi(u,o,l){return(u-o.min)*(l.max-l.min)/(o.max-o.min)+l.min}const rs={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!rs.API_URL)return null;try{const u=new URL(rs.API_URL);return u.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":u.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function ol(u){return rs.API_URL_REGEX.test(u)}function zs(u){return rs.API_SPRITE_REGEX.test(u)}let op,sp,Vh,ap,ou,Em;function sl(){return op==null&&(op=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),op}const Dl={now:()=>ap!==void 0?ap:performance.now(),setNow(u){ap=u},restoreNow(){ap=void 0},frame(u){const o=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(u,o=0){const{width:l,height:f}=u;ou||(ou=document.createElement("canvas"));const g=ou.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(l>ou.width||f>ou.height)&&(ou.width=l,ou.height=f),g.clearRect(-o,-o,l+2*o,f+2*o),g.drawImage(u,0,0,l,f),g.getImageData(-o,-o,l+2*o,f+2*o)},resolveURL:u=>(sp||(sp=document.createElement("a")),sp.href=u,sp.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Vh==null&&(Vh=window.matchMedia("(prefers-reduced-motion: reduce)")),Vh.matches)},hasCanvasFingerprintNoise(){if(Em!==void 0)return Em;if(!sl())return Em=!1,!1;const u=new OffscreenCanvas(85,1),o=u.getContext("2d",{willReadFrequently:!0});let l=0;for(let g=0;g<u.width;++g)o.fillStyle=`rgba(${l++},${l++},${l++}, 255)`,o.fillRect(g,0,1,1);const f=o.getImageData(0,0,u.width,u.height);l=0;for(let g=0;g<f.data.length;++g)if(g%4!=3&&l++!==f.data[g])return Em=!0,!0;return Em=!1,!1}};function oy(u,o){const l=u.indexOf("?");if(l<0)return`${u}?${new URLSearchParams(o).toString()}`;const f=new URLSearchParams(u.slice(l));for(const g in o)f.set(g,o[g]);return`${u.slice(0,l)}?${f.toString()}`}function Ra(u,o={persistentParams:[]}){const l=u.indexOf("?");if(l<0)return u;const f=new URLSearchParams,g=new URLSearchParams(u.slice(l));for(const w of o.persistentParams){const R=g.get(w);R&&f.set(w,R)}const b=f.toString();return`${u.slice(0,l)}${b.length>0?`?${b}`:""}`}const Da="mapbox-tiles";let su=500,Gl=50;const al=["language","worldview","jobid"];let Yl,lp;function sy(){try{return caches}catch{}}function Mc(){const u=sy();u&&Yl==null&&(Yl=u.open(Da))}let Cm=1/0;const jv={supported:!1,testSupport:function(u){!cp&&ta&&(ku?Nv(u):Md=u)}};let Md,ta,cp=!1,ku=!1;const Ac=typeof self<"u"?self:{};function Nv(u){const o=u.createTexture();u.bindTexture(u.TEXTURE_2D,o);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,ta),u.isContextLost())return;jv.supported=!0}catch{}u.deleteTexture(o),cp=!0}Ac.document&&(ta=Ac.document.createElement("img"),ta.onload=function(){Md&&Nv(Md),Md=null,ku=!0},ta.onerror=function(){cp=!0,Md=null},ta.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const up={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(up);class Mm extends Error{constructor(o,l,f){l===401&&ol(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=l,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ci=ji()?()=>self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,ll=function(u,o){if(!(/^file:/.test(l=u.url)||/^file:/.test(ci())&&!/^\w+:/.test(l))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,g){const b=new AbortController,w=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:ci(),referrerPolicy:f.referrerPolicy,signal:b.signal});let R=!1,P=!1;const L=($=w.url).indexOf("sku=")>0&&ol($);var $;f.type==="json"&&w.headers.set("Accept","application/json");const q=(ne,re,de)=>{if(P)return;if(ne&&ne.message!=="SecurityError"&&Ir(ne.toString()),re&&de)return Y(re);const ye=Date.now();fetch(w).then(be=>{if(be.ok){const Le=L?be.clone():null;return Y(be,Le,ye)}return g(new Mm(be.statusText,be.status,f.url))}).catch(be=>{be.name!=="AbortError"&&g(new Error(`${be.message} ${f.url}`))})},Y=(ne,re,de)=>{(f.type==="arrayBuffer"?ne.arrayBuffer():f.type==="json"?ne.json():ne.text()).then(ye=>{P||(re&&de&&function(be,Le,Ie){if(Mc(),Yl==null)return;const he=Xi(Le.headers.get("Cache-Control")||"");if(he["no-store"])return;const Ee={status:Le.status,statusText:Le.statusText,headers:new Headers};Le.headers.forEach((tt,it)=>Ee.headers.set(it,tt)),he["max-age"]&&Ee.headers.set("Expires",new Date(Ie+1e3*he["max-age"]).toUTCString());const Oe=Ee.headers.get("Expires");if(!Oe||new Date(Oe).getTime()-Ie<42e4)return;let Ve=Ra(be.url,{persistentParams:al});if(Le.status===206){const tt=be.headers.get("Range");if(!tt)return;Ee.status=200,Ve=oy(Ve,{range:tt})}(function(tt,it){if(lp===void 0)try{new Response(new ReadableStream),lp=!0}catch{lp=!1}lp?it(tt.body):tt.blob().then(it).catch(at=>Ir(at.message))})(Le,tt=>{const it=new Response((at=Le.status)!==200&&at!==404&&[101,103,204,205,304].includes(at)?null:tt,Ee);var at;Mc(),Yl!=null&&Yl.then(ht=>ht.put(Ve,it)).catch(ht=>Ir(ht.message))})}(w,re,de),R=!0,g(null,ye,ne.headers.get("Cache-Control"),ne.headers.get("Expires")))}).catch(ye=>{P||g(new Error(ye.message))})};return L?function(ne,re){if(Mc(),Yl==null)return re(null);Yl.then(de=>{let ye=Ra(ne.url,{persistentParams:al});const be=ne.headers.get("Range");be&&(ye=oy(ye,{range:be})),de.match(ye).then(Le=>{const Ie=function(he){if(!he)return!1;const Ee=new Date(he.headers.get("Expires")||0),Oe=Xi(he.headers.get("Cache-Control")||"");return Number(Ee)>Date.now()&&!Oe["no-cache"]}(Le);de.delete(ye).catch(re),Ie&&de.put(ye,Le.clone()).catch(re),re(null,Le,Ie)}).catch(re)}).catch(re)}(w,q):q(null,null),{cancel:()=>{P=!0,R||b.abort()}}}(u,o);if(ji(self)&&self.worker.actor)return self.worker.actor.send("getResource",u,o,void 0,!0)}var l;return function(f,g){const b=new XMLHttpRequest;b.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in f.headers)b.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=f.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(f.type==="json")try{w=JSON.parse(b.response)}catch(R){return g(R)}g(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else g(new Mm(b.statusText,b.status,f.url))},b.send(f.body),{cancel:()=>b.abort()}}(u,o)},Ad=function(u,o){return ll(lt(u,{type:"arrayBuffer"}),o)};function Am(u){const o=document.createElement("a");return o.href=u,o.protocol===location.protocol&&o.host===location.host}const Ou="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Lu,Rc;Lu=[],Rc=0;const $h=function(u,o){if(jv.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),Rc>=rs.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:u,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Lu.push(b),b}Rc++;let l=!1;const f=()=>{if(!l)for(l=!0,Rc--;Lu.length&&Rc<rs.MAX_PARALLEL_IMAGE_REQUESTS;){const b=Lu.shift(),{requestParameters:w,callback:R,cancelled:P}=b;P||(b.cancel=$h(w,R).cancel)}},g=Ad(u,(b,w,R,P)=>{f(),b?o(b):w&&(self.createImageBitmap?function(L,$){const q=new Blob([new Uint8Array(L)],{type:"image/png"});createImageBitmap(q).then(Y=>{$(null,Y)}).catch(Y=>{$(new Error(`Could not load image because of ${Y.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(w,(L,$)=>o(L,$,R,P)):function(L,$){const q=new Image;q.onload=()=>{$(null,q),URL.revokeObjectURL(q.src),q.onload=null,requestAnimationFrame(()=>{q.src=Ou})},q.onerror=()=>$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Y=new Blob([new Uint8Array(L)],{type:"image/png"});q.src=L.byteLength?URL.createObjectURL(Y):Ou}(w,(L,$)=>o(L,$,R,P)))});return{cancel:()=>{g.cancel(),f()}}};var Rm,dp,Rd,na={exports:{}},Xl={exports:{}},Uh={exports:{}},qh=function(){if(Rd)return na.exports;Rd=1;var u=(Rm||(Rm=1,Xl.exports=function(l,f){var g,b,w,R,P,L,$,q;for(b=l.length-(g=3&l.length),w=f,P=3432918353,L=461845907,q=0;q<b;)$=255&l.charCodeAt(q)|(255&l.charCodeAt(++q))<<8|(255&l.charCodeAt(++q))<<16|(255&l.charCodeAt(++q))<<24,++q,w=27492+(65535&(R=5*(65535&(w=(w^=$=(65535&($=($=(65535&$)*P+((($>>>16)*P&65535)<<16)&4294967295)<<15|$>>>17))*L+((($>>>16)*L&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(R>>>16)&65535)<<16);switch($=0,g){case 3:$^=(255&l.charCodeAt(q+2))<<16;case 2:$^=(255&l.charCodeAt(q+1))<<8;case 1:w^=$=(65535&($=($=(65535&($^=255&l.charCodeAt(q)))*P+((($>>>16)*P&65535)<<16)&4294967295)<<15|$>>>17))*L+((($>>>16)*L&65535)<<16)&4294967295}return w^=l.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Xl.exports),o=(dp||(dp=1,Uh.exports=function(l,f){for(var g,b=l.length,w=f^b,R=0;b>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(R)|(255&l.charCodeAt(++R))<<8|(255&l.charCodeAt(++R))<<16|(255&l.charCodeAt(++R))<<24))+((1540483477*(g>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),b-=4,++R;switch(b){case 3:w^=(255&l.charCodeAt(R+2))<<16;case 2:w^=(255&l.charCodeAt(R+1))<<8;case 1:w=1540483477*(65535&(w^=255&l.charCodeAt(R)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Uh.exports);return na.exports=u,na.exports.murmur3=u,na.exports.murmur2=o,na.exports}(),cl=ki(qh);class au{constructor(o,...l){lt(this,l[0]||{}),this.type=o}}class Dm extends au{constructor(o,l={}){super("error",lt({error:o},l))}}function Hh(u,o,l){l[u]&&l[u].indexOf(o)!==-1||(l[u]=l[u]||[],l[u].push(o))}function Wh(u,o,l){if(l&&l[u]){const f=l[u].indexOf(o);f!==-1&&l[u].splice(f,1)}}class Dd{on(o,l){return this._listeners=this._listeners||{},Hh(o,l,this._listeners),this}off(o,l){return Wh(o,l,this._listeners),Wh(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Hh(o,l,this._oneTimeListeners),this):new Promise(f=>{this.once(o,f)})}fire(o,l){const f=typeof o=="string"?new au(o,l):o,g=f.type;if(this.listens(g)){f.target=this;const b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const P of b)P.call(this,f);const w=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const P of w)Wh(g,P,this._oneTimeListeners),P.call(this,f);const R=this._eventedParent;R&&(lt(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),R.fire(f))}else f instanceof Dm&&console.error(f.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}class ul{constructor(o){typeof o=="string"?this.name=o:(this.name=o.name,this.iconsetId=o.iconsetId)}static from(o){return new ul(o)}static toString(o){return o.iconsetId?`${o.name}${o.iconsetId}`:o.name}static parse(o){const[l,f]=o.split("");return new ul({name:l,iconsetId:f})}static isEqual(o,l){return o.name===l.name&&o.iconsetId===l.iconsetId}toString(){return ul.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Vv,ay={},Gh=function(){if(Vv)return ay;Vv=1;var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(b){return(b=Math.round(b))<0?0:b>255?255:b}function l(b){return o(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function f(b){return(w=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:w>1?1:w;var w}function g(b,w,R){return R<0?R+=1:R>1&&(R-=1),6*R<1?b+(w-b)*R*6:2*R<1?w:3*R<2?b+(w-b)*(2/3-R)*6:b}try{ay.parseCSSColor=function(b){var w,R=b.replace(/ /g,"").toLowerCase();if(R in u)return u[R].slice();if(R[0]==="#")return R.length===4?(w=parseInt(R.substr(1),16))>=0&&w<=4095?[(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1]:null:R.length===7&&(w=parseInt(R.substr(1),16))>=0&&w<=16777215?[(16711680&w)>>16,(65280&w)>>8,255&w,1]:null;var P=R.indexOf("("),L=R.indexOf(")");if(P!==-1&&L+1===R.length){var $=R.substr(0,P),q=R.substr(P+1,L-(P+1)).split(","),Y=1;switch($){case"rgba":if(q.length!==4)return null;Y=f(q.pop());case"rgb":return q.length!==3?null:[l(q[0]),l(q[1]),l(q[2]),Y];case"hsla":if(q.length!==4)return null;Y=f(q.pop());case"hsl":if(q.length!==3)return null;var ne=(parseFloat(q[0])%360+360)%360/360,re=f(q[1]),de=f(q[2]),ye=de<=.5?de*(re+1):de+re-de*re,be=2*de-ye;return[o(255*g(be,ye,ne+1/3)),o(255*g(be,ye,ne)),o(255*g(be,ye,ne-1/3)),Y];default:return null}}return null}}catch{}return ay}();class bi{constructor(o,l,f,g=1){this.r=o,this.g=l,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof bi)return o;if(typeof o!="string")return;const l=Gh.parseCSSColor(o);return l?new bi(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toStringPremultipliedAlpha(){const[o,l,f,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(o)},${Math.round(l)},${Math.round(f)},${g})`}toString(){const[o,l,f,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*o)},${Math.round(255*l)},${Math.round(255*f)},${g})`}toRenderColor(o){const{r:l,g:f,b:g,a:b}=this;return new hx(o,l,f,g,b)}clone(){return new bi(this.r,this.g,this.b,this.a)}}class hx{constructor(o,l,f,g,b){if(o){const w=o.image.height,R=w*w;l=b===0?0:l/b*(w-1),f=b===0?0:f/b*(w-1),g=b===0?0:g/b*(w-1);const P=Math.floor(l),L=Math.floor(f),$=Math.floor(g),q=Math.ceil(l),Y=Math.ceil(f),ne=Math.ceil(g),re=l-P,de=f-L,ye=g-$,be=o.image.data,Le=4*(P+L*R+$*w),Ie=4*(P+L*R+ne*w),he=4*(P+Y*R+$*w),Ee=4*(P+Y*R+ne*w),Oe=4*(q+L*R+$*w),Ve=4*(q+L*R+ne*w),tt=4*(q+Y*R+$*w),it=4*(q+Y*R+ne*w);if(Le<0||it>=be.length)throw new Error("out of range");this.r=lr(lr(lr(be[Le],be[Ie],ye),lr(be[he],be[Ee],ye),de),lr(lr(be[Oe],be[Ve],ye),lr(be[tt],be[it],ye),de),re)/255*b,this.g=lr(lr(lr(be[Le+1],be[Ie+1],ye),lr(be[he+1],be[Ee+1],ye),de),lr(lr(be[Oe+1],be[Ve+1],ye),lr(be[tt+1],be[it+1],ye),de),re)/255*b,this.b=lr(lr(lr(be[Le+2],be[Ie+2],ye),lr(be[he+2],be[Ee+2],ye),de),lr(lr(be[Oe+2],be[Ve+2],ye),lr(be[tt+2],be[it+2],ye),de),re)/255*b,this.a=b}else this.r=l,this.g=f,this.b=g,this.a=b}toArray(){const{r:o,g:l,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*l/g,255*f/g,g]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:o,g:l,b:f,a:g}=this,b=Math.min(Math.max(o/g,0),1),w=Math.min(Math.max(l/g,0),1),R=Math.min(Math.max(f/g,0),1),P=Math.min(b,w,R),L=Math.max(b,w,R),$=(P+L)/2;if(P===L)return[0,0,100*$,g];const q=L-P,Y=$>.5?q/(2-L-P):q/(L+P);let ne=0;return L===b?ne=(w-R)/q+(w<R?6:0):L===w?ne=(R-b)/q+2:L===R&&(ne=(b-w)/q+4),ne*=60,[Math.min(Math.max(ne,0),360),Math.min(Math.max(100*Y,0),100),Math.min(Math.max(100*$,0),100),g]}toArray01(){const{r:o,g:l,b:f,a:g}=this;return g===0?[0,0,0,0]:[o/g,l/g,f/g,g]}toArray01Scaled(o){const{r:l,g:f,b:g,a:b}=this;return b===0?[0,0,0]:[l/b*o,f/b*o,g/b*o]}toArray01PremultipliedAlpha(){const{r:o,g:l,b:f,a:g}=this;return[o,l,f,g]}toArray01Linear(){const{r:o,g:l,b:f,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(o/g,2.2),Math.pow(l/g,2.2),Math.pow(f/g,2.2),g]}}function lr(u,o,l){return u*(1-l)+o*l}function fx(u,o,l){return u.map((f,g)=>lr(f,o[g],l))}function ly(u){return u*u*u*u*u}bi.black=new bi(0,0,0,1),bi.white=new bi(1,1,1,1),bi.transparent=new bi(0,0,0,0),bi.red=new bi(1,0,0,1),bi.blue=new bi(0,0,1,1);var Pm=Object.freeze({__proto__:null,array:fx,color:function(u,o,l){return new bi(lr(u.r,o.r,l),lr(u.g,o.g,l),lr(u.b,o.b,l),lr(u.a,o.a,l))},easeIn:ly,number:lr});function Im(u,...o){for(const l of o)for(const f in l)u[f]=l[f];return u}class Zl extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}class Yh{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[f,g]of l)this.bindings[f]=g}concat(o){return new Yh(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Pd={kind:"null"},tr={kind:"number"},$i={kind:"string"},Ri={kind:"boolean"},Ha={kind:"color"},zu={kind:"object"},Ai={kind:"value"},Xh={kind:"collator"},km={kind:"formatted"},Om={kind:"resolvedImage"};function Pa(u,o){return{kind:"array",itemType:u,N:o}}function ls(u){if(u.kind==="array"){const o=ls(u.itemType);return typeof u.N=="number"?`array<${o}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${o}>`}return u.kind}const W1=[Pd,tr,$i,Ri,Ha,km,zu,Pa(Ai),Om];function Lm(u,o){if(o.kind==="error")return null;if(u.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Lm(u.itemType,o.itemType))&&(typeof u.N!="number"||u.N===o.N))return null}else{if(u.kind===o.kind)return null;if(u.kind==="value"){for(const l of W1)if(!Lm(l,o))return null}}return`Expected ${ls(u)} but found ${ls(o)} instead.`}function $v(u,o){return o.some(l=>l.kind===u.kind)}function Id(u,o){return o.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}class Kl{constructor(o,l,f){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class cy{constructor(o,l,f,g,b){this.text=o.normalize?o.normalize():o,this.image=l,this.scale=f,this.fontStack=g,this.textColor=b}}class ga{constructor(o){this.sections=o}static fromString(o){return new ga([new cy(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||!!o.image&&o.image.hasPrimary())}static factory(o){return o instanceof ga?o:ga.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const l of this.sections){if(l.image){const g=l.image.getPrimary().id.toString();o.push(["image",g]);continue}o.push(l.text);const f={};l.fontStack&&(f["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(f["font-scale"]=l.scale),l.textColor&&(f["text-color"]=["rgba"].concat(l.textColor.toRenderColor(null).toArray())),o.push(f)}return o}}class Ql{constructor(o,l={}){if(this.id=ul.from(o),this.options=Object.assign({},l),l.transform){const{a:f,b:g,c:b,d:w,e:R,f:P}=l.transform;this.options.transform=new DOMMatrix([f,g,b,w,R,P])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:o,b:l,c:f,d:g,e:b,f:w}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:o,b:l,c:f,d:g,e:b,f:w}})}static parse(o){let l,f,g,b;try{({name:l,iconsetId:f,params:g,transform:b}=JSON.parse(o)||{})}catch{return null}if(!l)return null;const{a:w,b:R,c:P,d:L,e:$,f:q}=b||{};return new Ql({name:l,iconsetId:f},{params:g,transform:new DOMMatrix([w,R,P,L,$,q])})}scaleSelf(o,l){return this.options.transform.scaleSelf(o,l),this}}class Ia{constructor(o,l,f,g,b=!1){this.primaryId=ul.from(o),this.primaryOptions=l,f&&(this.secondaryId=ul.from(f)),this.secondaryOptions=g,this.available=b}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Ql(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Ql(this.secondaryId,this.secondaryOptions):null}static from(o){return typeof o=="string"?Ia.build({name:o}):o}static build(o,l,f,g){return!o||typeof o=="object"&&!("name"in o)?null:new Ia(o,f,l,g)}}function Uv(u,o,l,f){return typeof u=="number"&&u>=0&&u<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,o,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,o,l,f]:[u,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zh(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof bi||u instanceof Kl||u instanceof ga||u instanceof Ia)return!0;if(Array.isArray(u)){for(const o of u)if(!Zh(o))return!1;return!0}if(typeof u=="object"){for(const o in u)if(!Zh(u[o]))return!1;return!0}return!1}function Uo(u){if(u===null)return Pd;if(typeof u=="string")return $i;if(typeof u=="boolean")return Ri;if(typeof u=="number")return tr;if(u instanceof bi)return Ha;if(u instanceof Kl)return Xh;if(u instanceof ga)return km;if(u instanceof Ia)return Om;if(Array.isArray(u)){const o=u.length;let l;for(const f of u){const g=Uo(f);if(l){if(l===g)continue;l=Ai;break}l=g}return Pa(l||Ai,o)}return zu}function ka(u){const o=typeof u;return u===null?"":o==="string"||o==="number"||o==="boolean"?String(u):u instanceof bi?u.toStringPremultipliedAlpha():u instanceof ga||u instanceof Ia?u.toString():JSON.stringify(u)}class Nr{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(o.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Zh(o[1]))return l.error("invalid value");const f=o[1];let g=Uo(f);const b=l.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new Nr(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof bi?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof ga?this.value.serialize():this.value}}class Un{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const hp={string:$i,number:tr,boolean:Ri,object:zu};class vr{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let f,g=1;const b=o[0];if(b==="array"){let R,P;if(o.length>2){const L=o[1];if(typeof L!="string"||!(L in hp)||L==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);R=hp[L],g++}else R=Ai;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=o[2],g++}f=Pa(R,P)}else f=hp[b];const w=[];for(;g<o.length;g++){const R=l.parse(o[g],g,Ai);if(!R)return null;w.push(R)}return new vr(f,w)}evaluate(o){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(o);if(!Lm(this.type,Uo(f)))return f;if(l===this.args.length-1)throw new Un(`The expression ${JSON.stringify(this.args[l].serialize())} evaluated to ${ls(Uo(f))} but was expected to be of type ${ls(this.type)}.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,l=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){l.push(f.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&l.push(g)}}return l.concat(this.args.map(f=>f.serialize()))}}class Dc{constructor(o){this.type=km,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const R=o[w];if(b&&typeof R=="object"&&!Array.isArray(R)){b=!1;let P=null;if(R["font-scale"]&&(P=l.parseObjectValue(R["font-scale"],w,"font-scale",tr),!P))return null;let L=null;if(R["text-font"]&&(L=l.parseObjectValue(R["text-font"],w,"text-font",Pa($i)),!L))return null;let $=null;if(R["text-color"]&&($=l.parseObjectValue(R["text-color"],w,"text-color",Ha),!$))return null;const q=g[g.length-1];q.scale=P,q.font=L,q.textColor=$}else{const P=l.parse(o[w],w,Ai);if(!P)return null;const L=P.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:P,scale:null,font:null,textColor:null})}}return new Dc(g)}evaluate(o){return new ga(this.sections.map(l=>{const f=l.content.evaluate(o);return Uo(f)===Om?new cy("",f,null,null,null):new cy(ka(f),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const l of this.sections){o.push(l.content.serialize());const f={};l.scale&&(f["font-scale"]=l.scale.serialize()),l.font&&(f["text-font"]=l.font.serialize()),l.textColor&&(f["text-color"]=l.textColor.serialize()),o.push(f)}return o}}class lu{constructor(o,l,f,g){this._imageWarnHistory={},this.type=Om,this.namePrimary=o,this.nameSecondary=l,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),g&&(this.paramsSecondary=g.params,this.iconsetIdSecondary=g.iconset?g.iconset.id:void 0)}static parse(o,l){if(o.length<2)return l.error("Expected two or more arguments.");let f=1;const g=[];function b(){if(f<o.length){const R=l.parse(o[f],f++,$i);return R?(g.push({image:R,options:{}}),!0):(l.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function w(){if(f<o.length){const P=o[f];if((R=P)===null||typeof R!="object"||Array.isArray(R))return!0;const L=P.params,$=P.iconset,q=l.concat(f);if(!L&&!$)return f++,!0;if(L){if(typeof L!="object"||L.constructor!==Object)return q.error('Image options "params" should be an object'),!1;const Y={},ne=q.concat(void 0,"params");for(const re in L){if(!re)return ne.error("Image parameter name should be non-empty"),!1;const de=ne.concat(void 0,re).parse(L[re],void 0,Ha,void 0,{typeAnnotation:"coerce"});if(!de)return!1;Y[re]=de}g[g.length-1].options.params=Y}if($){if(typeof $!="object"||$.constructor!==Object)return q.error('Image options "iconset" should be an object'),!1;if(!$.id)return q.error('Image options "iconset" should have an "id" property'),!1;g[g.length-1].options.iconset=$}return f++,!0}var R;return!0}for(let R=0;R<2;R++)if(!b()||!w())return;return new lu(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(o,l){const f={};if(l){for(const g in l)if(l[g])try{f[g]=l[g].evaluate(o)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(o){const l={name:this.namePrimary.evaluate(o),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(o),iconsetId:this.iconsetIdSecondary}:void 0,g=Ia.build(l,f,this.paramsPrimary?this.evaluateParams(o,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(o,this.paramsSecondary):void 0);if(g&&o.availableImages){const b=g.getPrimary().id;if(g.available=o.availableImages.some(w=>ul.isEqual(w,b)),g.available){const w=g.getSecondary()?g.getSecondary().id:null;w&&(g.available=o.availableImages.some(R=>ul.isEqual(R,w)))}}return g}eachChild(o){if(o(this.namePrimary),this.paramsPrimary)for(const l in this.paramsPrimary)this.paramsPrimary[l]&&o(this.paramsPrimary[l]);if(this.nameSecondary&&(o(this.nameSecondary),this.paramsSecondary))for(const l in this.paramsSecondary)this.paramsSecondary[l]&&o(this.paramsSecondary[l])}outputDefined(){return!1}serializeOptions(o,l){const f={};if(l&&(f.iconset={id:l}),o){f.params={};for(const g in o)o[g]&&(f.params[g]=o[g].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const o=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const l=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);l&&o.push(l)}if(this.nameSecondary&&(o.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const l=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);l&&o.push(l)}return o}}function br(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}const zm={"to-boolean":Ri,"to-color":Ha,"to-number":tr,"to-string":$i};class Jl{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const f=o[0],g=[];let b=Pd;if(f==="to-array"){if(!Array.isArray(o[1]))return null;const w=o[1].length;if(l.expectedType){if(l.expectedType.kind!=="array")return l.error(`Expected ${l.expectedType.kind} but found array.`);b=Pa(l.expectedType.itemType,w)}else{if(!(w>0&&Zh(o[1][0])))return null;b=Pa(Uo(o[1][0]),w)}for(let R=0;R<w;R++){const P=o[1][R];let L;if(br(P)==="array")L=l.parse(P,void 0,b.itemType);else{const $=br(P);if($!==b.itemType.kind)return l.error(`Expected ${b.itemType.kind} but found ${$}.`);L=l.registry.literal.parse(["literal",P===void 0?null:P],l)}if(!L)return null;g.push(L)}}else{if((f==="to-boolean"||f==="to-string")&&o.length!==2)return l.error("Expected one argument.");b=zm[f];for(let w=1;w<o.length;w++){const R=l.parse(o[w],w,Ai);if(!R)return null;g.push(R)}}return new Jl(b,g)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let l,f;for(const g of this.args){if(l=g.evaluate(o),f=null,l instanceof bi)return l;if(typeof l=="string"){const b=o.parseColor(l);if(b)return b}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Uv(l[0],l[1],l[2],l[3]),!f))return new bi(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Un(f||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const f of this.args){if(l=f.evaluate(o),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new Un(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?ga.fromString(ka(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Ia.build(ka(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(l=>l.evaluate(o)):ka(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Dc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new lu(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(l=>{o.push(l.serialize())}),o}}const qv=["Unknown","Point","LineString","Polygon"];class fp{constructor(o,l){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=o,this.options=l}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qv[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(o){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,l=this.featureDistanceData.scale,{x:f,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*l-o[0])+this.featureDistanceData.bearing[1]*(g*l-o[1])}return 0}parseColor(o){let l=this._parseColorCache[o];return l||(l=this._parseColorCache[o]=bi.parse(o)),l}getConfig(o){return this.options?this.options.get(o):null}}class Us{constructor(o,l,f,g,b){this.name=o,this.type=l,this._evaluate=f,this.args=g,this._overloadIndex=b}evaluate(o){if(!this._evaluate){const l=Us.definitions[this.name];this._evaluate=Array.isArray(l)?l[2]:l.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,l){const f=o[0],g=Us.definitions[f];if(!g)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,R=[];let P=null,L=-1;for(const[$,q]of w){if(Array.isArray($)&&$.length!==o.length-1)continue;R.push($),L++,P=new zc(l.registry,l.path,null,l.scope,void 0,l._scope,l.options);const Y=[];let ne=!1;for(let re=1;re<o.length;re++){const de=o[re],ye=Array.isArray($)?$[re-1]:$.type,be=P.parse(de,1+Y.length,ye);if(!be){ne=!0;break}Y.push(be)}if(!ne)if(Array.isArray($)&&$.length!==Y.length)P.error(`Expected ${$.length} arguments, but found ${Y.length} instead.`);else{for(let re=0;re<Y.length;re++){const de=Array.isArray($)?$[re]:$.type,ye=Y[re];P.concat(re+1).checkSubtype(de,ye.type)}if(P.errors.length===0)return new Us(f,b,q,Y,L)}}if(R.length===1)l.errors.push(...P.errors);else{const $=(R.length?R:w.map(([Y])=>Y)).map(ya).join(" | "),q=[];for(let Y=1;Y<o.length;Y++){const ne=l.parse(o[Y],1+q.length);if(!ne)return null;q.push(ls(ne.type))}l.error(`Expected arguments of type ${$}, but found (${q.join(", ")}) instead.`)}return null}static register(o,l){Us.definitions=l;for(const f in l)o[f]=Us}}function ya(u){return Array.isArray(u)?`(${u.map(ls).join(", ")})`:`(${ls(u.type)}...)`}class Kh{constructor(o,l,f){this.type=Xh,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(o.length!==2)return l.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const g=f["case-sensitive"]===void 0?l.parse(!1,1,Ri):l.parseObjectValue(f["case-sensitive"],1,"case-sensitive",Ri);if(!g)return null;const b=f["diacritic-sensitive"]===void 0?l.parse(!1,1,Ri):l.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",Ri);if(!b)return null;let w=null;return f.locale&&(w=l.parseObjectValue(f.locale,1,"locale",$i),!w)?null:new Kh(g,b,w)}evaluate(o){return new Kl(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}function Fu(u,o,l=0,f=u.length-1,g=Jh){for(;f>l;){if(f-l>600){const P=f-l+1,L=o-l+1,$=Math.log(P),q=.5*Math.exp(2*$/3),Y=.5*Math.sqrt($*q*(P-q)/P)*(L-P/2<0?-1:1);Fu(u,o,Math.max(l,Math.floor(o-L*q/P+Y)),Math.min(f,Math.floor(o+(P-L)*q/P+Y)),g)}const b=u[o];let w=l,R=f;for(Qh(u,l,o),g(u[f],b)>0&&Qh(u,l,f);w<R;){for(Qh(u,w,R),w++,R--;g(u[w],b)<0;)w++;for(;g(u[R],b)>0;)R--}g(u[l],b)===0?Qh(u,l,R):(R++,Qh(u,R,f)),R<=o&&(l=R+1),o<=R&&(f=R-1)}}function Qh(u,o,l){const f=u[o];u[o]=u[l],u[l]=f}function Jh(u,o){return u<o?-1:u>o?1:0}function Oa(u){let o=0;for(let l,f,g=0,b=u.length,w=b-1;g<b;w=g++)l=u[g],f=u[w],o+=(f.x-l.x)*(l.y+f.y);return o}function Fm(u,o){u[0]=Math.min(u[0],o[0]),u[1]=Math.min(u[1],o[1]),u[2]=Math.max(u[2],o[0]),u[3]=Math.max(u[3],o[1])}function Bm(u,o){return!(u[0]<=o[0]||u[2]>=o[2]||u[1]<=o[1]||u[3]>=o[3])}function Pl(u,o,l){const f=u[0]-o[0],g=u[1]-o[1],b=u[0]-l[0],w=u[1]-l[1];return f*w-b*g==0&&f*b<=0&&g*w<=0}function Il(u,o,l=!1){let f=!1;for(let R=0,P=o.length;R<P;R++){const L=o[R];for(let $=0,q=L.length,Y=q-1;$<q;Y=$++){const ne=L[Y],re=L[$];if(Pl(u,ne,re))return l;(b=ne)[1]>(g=u)[1]!=(w=re)[1]>g[1]&&g[0]<(w[0]-b[0])*(g[1]-b[1])/(w[1]-b[1])+b[0]&&(f=!f)}}var g,b,w;return f}function uy(u,o,l,f){const g=f[0]-l[0],b=f[1]-l[1],w=(u[0]-l[0])*b-g*(u[1]-l[1]),R=(o[0]-l[0])*b-g*(o[1]-l[1]);return w>0&&R<0||w<0&&R>0}function Pc(u,o,l,f){return(g=[f[0]-l[0],f[1]-l[1]])[0]*(b=[o[0]-u[0],o[1]-u[1]])[1]-g[1]*b[0]!=0&&!(!uy(u,o,l,f)||!uy(l,f,u,o));var g,b}function dy(u){const o=new mn(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),l=new mn(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const f of u[0])o.x>f.x&&(o.x=f.x),o.y>f.y&&(o.y=f.y),l.x<f.x&&(l.x=f.x),l.y<f.y&&(l.y=f.y);return{min:o,max:l}}const Bu=8192;function Hv(u,o){const l=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(l*g*Bu),Math.round(f*g*Bu)]}function G1(u,o){for(let l=0;l<o.length;l++)if(Il(u,o[l]))return!0;return!1}function ef(u,o,l){for(const f of l)for(let g=0,b=f.length,w=b-1;g<b;w=g++)if(Pc(u,o,f[w],f[g]))return!0;return!1}function hy(u,o){for(let l=0;l<u.length;++l)if(!Il(u[l],o))return!1;for(let l=0;l<u.length-1;++l)if(ef(u[l],u[l+1],o))return!1;return!0}function jm(u,o){for(let l=0;l<o.length;l++)if(hy(u,o[l]))return!0;return!1}function pp(u,o,l){const f=[];for(let g=0;g<u.length;g++){const b=[];for(let w=0;w<u[g].length;w++){const R=Hv(u[g][w],l);Fm(o,R),b.push(R)}f.push(b)}return f}function Wv(u,o,l){const f=[];for(let g=0;g<u.length;g++){const b=pp(u[g],o,l);f.push(b)}return f}function dl(u,o,l,f){if(u[0]<l[0]||u[0]>l[2]){const g=.5*f;let b=u[0]-l[0]>g?-f:l[0]-u[0]>g?f:0;b===0&&(b=u[0]-l[2]>g?-f:l[2]-u[0]>g?f:0),u[0]+=b}Fm(o,u)}function tf(u,o,l,f){const g=Math.pow(2,f.z)*Bu,b=[f.x*Bu,f.y*Bu],w=[];if(!u)return w;for(const R of u)for(const P of R){const L=[P.x+b[0],P.y+b[1]];dl(L,o,l,g),w.push(L)}return w}function fy(u,o,l,f){const g=Math.pow(2,f.z)*Bu,b=[f.x*Bu,f.y*Bu],w=[];if(!u)return w;for(const P of u){const L=[];for(const $ of P){const q=[$.x+b[0],$.y+b[1]];Fm(o,q),L.push(q)}w.push(L)}if(o[2]-o[0]<=g/2){(R=o)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const P of w)for(const L of P)dl(L,o,l,g)}var R;return w}class cu{constructor(o,l){this.type=Ri,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Zh(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const b=f.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new cu(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new cu(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new cu(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const R=pp(f.coordinates,b,w),P=tf(l.geometry(),g,b,w);if(!Bm(g,b))return!1;for(const L of P)if(!Il(L,R))return!1}if(f.type==="MultiPolygon"){const R=Wv(f.coordinates,b,w),P=tf(l.geometry(),g,b,w);if(!Bm(g,b))return!1;for(const L of P)if(!G1(L,R))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const R=pp(f.coordinates,b,w),P=fy(l.geometry(),g,b,w);if(!Bm(g,b))return!1;for(const L of P)if(!hy(L,R))return!1}if(f.type==="MultiPolygon"){const R=Wv(f.coordinates,b,w),P=fy(l.geometry(),g,b,w);if(!Bm(g,b))return!1;for(const L of P)if(!jm(L,R))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Ic={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},py=1/298.257223563,kl=py*(2-py),nf=Math.PI/180;class mp{static fromTile(o,l,f){const g=Math.PI*(1-2*(o+.5)/Math.pow(2,l)),b=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/nf;return new mp(b,f)}static get units(){return Ic}constructor(o,l){if(o===void 0)throw new Error("No latitude given.");if(l&&!Ic[l])throw new Error(`Unknown unit ${l}. Use one of: ${Object.keys(Ic).join(", ")}`);const f=6378.137*nf*(l?Ic[l]:1),g=Math.cos(o*nf),b=1/(1-kl*(1-g*g)),w=Math.sqrt(b);this.kx=f*w*g,this.ky=f*w*b*(1-kl)}distance(o,l){const f=hl(o[0]-l[0])*this.kx,g=(o[1]-l[1])*this.ky;return Math.sqrt(f*f+g*g)}bearing(o,l){const f=hl(l[0]-o[0])*this.kx;return Math.atan2(f,(l[1]-o[1])*this.ky)/nf}destination(o,l,f){const g=f*nf;return this.offset(o,Math.sin(g)*l,Math.cos(g)*l)}offset(o,l,f){return[o[0]+l/this.kx,o[1]+f/this.ky]}lineDistance(o){let l=0;for(let f=0;f<o.length-1;f++)l+=this.distance(o[f],o[f+1]);return l}area(o){let l=0;for(let f=0;f<o.length;f++){const g=o[f];for(let b=0,w=g.length,R=w-1;b<w;R=b++)l+=hl(g[b][0]-g[R][0])*(g[b][1]+g[R][1])*(f?-1:1)}return Math.abs(l)/2*this.kx*this.ky}along(o,l){let f=0;if(l<=0)return o[0];for(let g=0;g<o.length-1;g++){const b=o[g],w=o[g+1],R=this.distance(b,w);if(f+=R,f>l)return my(b,w,(l-(f-R))/R)}return o[o.length-1]}pointToSegmentDistance(o,l,f){let[g,b]=l,w=hl(f[0]-g)*this.kx,R=(f[1]-b)*this.ky;if(w!==0||R!==0){const P=(hl(o[0]-g)*this.kx*w+(o[1]-b)*this.ky*R)/(w*w+R*R);P>1?(g=f[0],b=f[1]):P>0&&(g+=w/this.kx*P,b+=R/this.ky*P)}return w=hl(o[0]-g)*this.kx,R=(o[1]-b)*this.ky,Math.sqrt(w*w+R*R)}pointOnLine(o,l){let f=1/0,g=o[0][0],b=o[0][1],w=0,R=0;for(let P=0;P<o.length-1;P++){let L=o[P][0],$=o[P][1],q=hl(o[P+1][0]-L)*this.kx,Y=(o[P+1][1]-$)*this.ky,ne=0;q===0&&Y===0||(ne=(hl(l[0]-L)*this.kx*q+(l[1]-$)*this.ky*Y)/(q*q+Y*Y),ne>1?(L=o[P+1][0],$=o[P+1][1]):ne>0&&(L+=q/this.kx*ne,$+=Y/this.ky*ne)),q=hl(l[0]-L)*this.kx,Y=(l[1]-$)*this.ky;const re=q*q+Y*Y;re<f&&(f=re,g=L,b=$,w=P,R=ne)}return{point:[g,b],index:w,t:Math.max(0,Math.min(1,R))}}lineSlice(o,l,f){let g=this.pointOnLine(f,o),b=this.pointOnLine(f,l);if(g.index>b.index||g.index===b.index&&g.t>b.t){const L=g;g=b,b=L}const w=[g.point],R=g.index+1,P=b.index;!Gv(f[R],w[0])&&R<=P&&w.push(f[R]);for(let L=R+1;L<=P;L++)w.push(f[L]);return Gv(f[P],b.point)||w.push(b.point),w}lineSliceAlong(o,l,f){let g=0;const b=[];for(let w=0;w<f.length-1;w++){const R=f[w],P=f[w+1],L=this.distance(R,P);if(g+=L,g>o&&b.length===0&&b.push(my(R,P,(o-(g-L))/L)),g>=l)return b.push(my(R,P,(l-(g-L))/L)),b;g>o&&b.push(P)}return b}bufferPoint(o,l){const f=l/this.ky,g=l/this.kx;return[o[0]-g,o[1]-f,o[0]+g,o[1]+f]}bufferBBox(o,l){const f=l/this.ky,g=l/this.kx;return[o[0]-g,o[1]-f,o[2]+g,o[3]+f]}insideBBox(o,l){return hl(o[0]-l[0])>=0&&hl(o[0]-l[2])<=0&&o[1]>=l[1]&&o[1]<=l[3]}}function Gv(u,o){return u[0]===o[0]&&u[1]===o[1]}function my(u,o,l){const f=hl(o[0]-u[0]);return[u[0]+f*l,u[1]+(o[1]-u[1])*l]}function hl(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}class Nm{constructor(o=[],l=(f,g)=>f<g?-1:f>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:f}=this,g=l[o];for(;o>0;){const b=o-1>>1,w=l[b];if(f(g,w)>=0)break;l[o]=w,o=b}l[o]=g}_down(o){const{data:l,compare:f}=this,g=this.length>>1,b=l[o];for(;o<g;){let w=1+(o<<1);const R=w+1;if(R<this.length&&f(l[R],l[w])<0&&(w=R),f(l[w],b)>=0)break;l[o]=l[w],o=w}l[o]=b}}var xn=8192;function Ol(u,o){return o.dist-u.dist}const Vm=100,Wa=50;function fl(u){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==u.length)return!1;for(let l=0;l<o.length;l++)if(o[l]!==u[l])return!1;return!0}function ec(u){return u[1]-u[0]+1}function pl(u,o){const l=u[1]>=u[0]&&u[1]<o;return l||console.warn("Distance Expression: Index is out of range"),l}function ju(u,o){if(u[0]>u[1])return[null,null];const l=ec(u);if(o){if(l===2)return[u,null];const f=Math.floor(l/2);return[[u[0],u[0]+f],[u[0]+f,u[1]]]}{if(l===1)return[u,null];const f=Math.floor(l/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}}function kc(u,o){const l=[1/0,1/0,-1/0,-1/0];if(!pl(o,u.length))return l;for(let f=o[0];f<=o[1];++f)Fm(l,u[f]);return l}function rf(u){const o=[1/0,1/0,-1/0,-1/0];for(let l=0;l<u.length;++l)for(let f=0;f<u[l].length;++f)Fm(o,u[l][f]);return o}function tc(u,o,l){if(fl(u)||fl(o))return NaN;let f=0,g=0;return u[2]<o[0]&&(f=o[0]-u[2]),u[0]>o[2]&&(f=u[0]-o[2]),u[1]>o[3]&&(g=u[1]-o[3]),u[3]<o[1]&&(g=o[1]-u[3]),l.distance([0,0],[f,g])}function of(u){return 360*u-180}function ni(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function kd(u,o){const l=Math.pow(2,o.z),f=(u.y/xn+o.y)/l;return[of((u.x/xn+o.x)/l),ni(f)]}function Y1(u,o){const l=[];for(let f=0;f<u.length;++f)l.push(kd(u[f],o));return l}function ml(u,o,l){const f=l.pointOnLine(o,u).point;return l.distance(u,f)}function $m(u,o,l,f,g){const b=l.slice(f[0],f[1]+1);let w=1/0;for(let R=o[0];R<=o[1];++R)if((w=Math.min(w,ml(u[R],b,g)))===0)return 0;return w}function Oc(u,o,l,f,g){const b=Math.min(g.pointToSegmentDistance(u,l,f),g.pointToSegmentDistance(o,l,f)),w=Math.min(g.pointToSegmentDistance(l,u,o),g.pointToSegmentDistance(f,u,o));return Math.min(b,w)}function So(u,o,l,f,g){if(!pl(o,u.length)||!pl(f,l.length))return NaN;let b=1/0;for(let w=o[0];w<o[1];++w)for(let R=f[0];R<f[1];++R){if(Pc(u[w],u[w+1],l[R],l[R+1]))return 0;b=Math.min(b,Oc(u[w],u[w+1],l[R],l[R+1],g))}return b}function gy(u,o,l,f,g){if(!pl(o,u.length)||!pl(f,l.length))return NaN;let b=1/0;for(let w=o[0];w<=o[1];++w)for(let R=f[0];R<=f[1];++R)if((b=Math.min(b,g.distance(u[w],l[R])))===0)return b;return b}function sf(u,o,l){if(Il(u,o,!0))return 0;let f=1/0;for(const g of o){const b=g.length;if(b<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[b-1]&&(f=Math.min(f,l.pointToSegmentDistance(u,g[b-1],g[0])))===0||(f=Math.min(f,ml(u,g,l)))===0)return f}return f}function Yv(u,o,l,f){if(!pl(o,u.length))return NaN;for(let b=o[0];b<=o[1];++b)if(Il(u[b],l,!0))return 0;let g=1/0;for(let b=o[0];b<o[1];++b)for(const w of l)for(let R=0,P=w.length,L=P-1;R<P;L=R++){if(Pc(u[b],u[b+1],w[L],w[R]))return 0;g=Math.min(g,Oc(u[b],u[b+1],w[L],w[R],f))}return g}function yy(u,o){for(const l of u)for(let f=0;f<=l.length-1;++f)if(Il(l[f],o,!0))return!0;return!1}function gp(u,o,l,f=1/0){const g=rf(u),b=rf(o);if(f!==1/0&&tc(g,b,l)>=f)return f;if(Bm(g,b)){if(yy(u,o))return 0}else if(yy(o,u))return 0;let w=f;for(const R of u)for(let P=0,L=R.length,$=L-1;P<L;$=P++)for(const q of o)for(let Y=0,ne=q.length,re=ne-1;Y<ne;re=Y++){if(Pc(R[$],R[P],q[re],q[Y]))return 0;w=Math.min(w,Oc(R[$],R[P],q[re],q[Y],l))}return w}function Nu(u,o,l,f,g,b,w){if(b===null||w===null)return;const R=tc(kc(f,b),kc(g,w),l);R<o&&u.push({dist:R,range1:b,range2:w})}function vy(u,o,l,f,g=1/0){let b=Math.min(f.distance(u[0],l[0][0]),g);if(b===0)return b;const w=new Nm([{dist:0,range1:[0,u.length-1],range2:[0,0]}],Ol),R=o?Wa:Vm,P=rf(l);for(;w.length;){const L=w.pop();if(L.dist>=b)continue;const $=L.range1;if(ec($)<=R){if(!pl($,u.length))return NaN;if(o){const q=Yv(u,$,l,f);if((b=Math.min(b,q))===0)return b}else for(let q=$[0];q<=$[1];++q){const Y=sf(u[q],l,f);if((b=Math.min(b,Y))===0)return b}}else{const q=ju($,o);if(q[0]!==null){const Y=tc(kc(u,q[0]),P,f);Y<b&&w.push({dist:Y,range1:q[0],range2:[0,0]})}if(q[1]!==null){const Y=tc(kc(u,q[1]),P,f);Y<b&&w.push({dist:Y,range1:q[1],range2:[0,0]})}}}return b}function Um(u,o,l,f,g,b=1/0){let w=Math.min(b,g.distance(u[0],l[0]));if(w===0)return w;const R=new Nm([{dist:0,range1:[0,u.length-1],range2:[0,l.length-1]}],Ol),P=o?Wa:Vm,L=f?Wa:Vm;for(;R.length;){const $=R.pop();if($.dist>=w)continue;const q=$.range1,Y=$.range2;if(ec(q)<=P&&ec(Y)<=L){if(!pl(q,u.length)||!pl(Y,l.length))return NaN;if(o&&f?w=Math.min(w,So(u,q,l,Y,g)):o||f?o&&!f?w=Math.min(w,$m(l,Y,u,q,g)):!o&&f&&(w=Math.min(w,$m(u,q,l,Y,g))):w=Math.min(w,gy(u,q,l,Y,g)),w===0)return w}else{const ne=ju(q,o),re=ju(Y,f);Nu(R,w,g,u,l,ne[0],re[0]),Nu(R,w,g,u,l,ne[0],re[1]),Nu(R,w,g,u,l,ne[1],re[0]),Nu(R,w,g,u,l,ne[1],re[1])}}return w}function gl(u,o,l,f,g=1/0){let b=g;const w=kc(u,[0,u.length-1]);for(const R of l)if(!(b!==1/0&&tc(w,kc(R,[0,R.length-1]),f)>=b)&&(b=Math.min(b,Um(u,o,R,!0,f,b)),b===0))return b;return b}function Ga(u,o,l,f,g=1/0){let b=g;const w=kc(u,[0,u.length-1]);for(const R of l){if(b!==1/0&&tc(w,rf(R),f)>=b)continue;const P=vy(u,o,R,f,b);if(isNaN(P))return P;if((b=Math.min(b,P))===0)return b}return b}function Vu(u){return u==="Point"||u==="MultiPoint"||u==="LineString"||u==="MultiLineString"||u==="Polygon"||u==="MultiPolygon"}class Ya{constructor(o,l){this.type=tr,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(Zh(o[1])){const f=o[1];if(f.type==="FeatureCollection"){for(let g=0;g<f.features.length;++g)if(Vu(f.features[g].geometry.type))return new Ya(f,f.features[g].geometry)}else if(f.type==="Feature"){if(Vu(f.geometry.type))return new Ya(f,f.geometry)}else if(Vu(f.type))return new Ya(f,f)}return l.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const l=o.geometry(),f=o.canonicalID();if(l!=null&&f!=null){if(o.geometryType()==="Point")return function(g,b,w){const R=[];for(const L of g)for(const $ of L)R.push(kd($,b));const P=new mp(R[0][1],"meters");return w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString"?Um(R,!1,w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",P):w.type==="MultiLineString"?gl(R,!1,w.coordinates,P):w.type==="Polygon"||w.type==="MultiPolygon"?Ga(R,!1,w.type==="Polygon"?[w.coordinates]:w.coordinates,P):null}(l,f,this.geometries);if(o.geometryType()==="LineString")return function(g,b,w){const R=[];for(const L of g){const $=[];for(const q of L)$.push(kd(q,b));R.push($)}const P=new mp(R[0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return gl(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",R,P);if(w.type==="MultiLineString"){let L=1/0;for(let $=0;$<w.coordinates.length;$++){const q=gl(w.coordinates[$],!0,R,P,L);if(isNaN(q))return q;if((L=Math.min(L,q))===0)return L}return L}if(w.type==="Polygon"||w.type==="MultiPolygon"){let L=1/0;for(let $=0;$<R.length;$++){const q=Ga(R[$],!0,w.type==="Polygon"?[w.coordinates]:w.coordinates,P,L);if(isNaN(q))return q;if((L=Math.min(L,q))===0)return L}return L}return null}(l,f,this.geometries);if(o.geometryType()==="Polygon")return function(g,b,w){const R=[];for(const L of function($,q){const Y=$.length;if(Y<=1)return[$];const ne=[];let re,de;for(let ye=0;ye<Y;ye++){const be=Oa($[ye]);be!==0&&($[ye].area=Math.abs(be),de===void 0&&(de=be<0),de===be<0?(re&&ne.push(re),re=[$[ye]]):re.push($[ye]))}return re&&ne.push(re),ne}(g)){const $=[];for(let q=0;q<L.length;++q)$.push(Y1(L[q],b));R.push($)}const P=new mp(R[0][0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return Ga(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",R,P);if(w.type==="MultiLineString"){let L=1/0;for(let $=0;$<w.coordinates.length;$++){const q=Ga(w.coordinates[$],!0,R,P,L);if(isNaN(q))return q;if((L=Math.min(L,q))===0)return L}return L}return w.type==="Polygon"||w.type==="MultiPolygon"?function(L,$,q){let Y=1/0;for(const ne of L)for(const re of $){const de=gp(ne,re,q,Y);if(isNaN(de))return de;if((Y=Math.min(Y,de))===0)return Y}return Y}(w.type==="Polygon"?[w.coordinates]:w.coordinates,R,P):null}(l,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Lc(u,o){switch(u){case"string":return ka(o);case"number":return+o;case"boolean":return!!o;case"color":return bi.parse(o);case"formatted":return ga.fromString(ka(o));case"resolvedImage":return Ia.build(ka(o))}return o}function Od(u,o,l,f){return f!==void 0&&(u=f*Math.round(u/f)),o!==void 0&&u<o&&(u=o),l!==void 0&&u>l&&(u=l),u}class af{constructor(o,l,f){this.type=o,this.key=l,this.scope=f}static parse(o,l){let f=l.expectedType;if(f==null&&(f=Ai),o.length<2||o.length>3)return l.error("Invalid number of arguments for 'config' expression.");const g=l.parse(o[1],1);if(!(g instanceof Nr))return l.error("Key name of 'config' expression must be a string literal.");if(o.length>=3){const b=l.parse(o[2],2);return b instanceof Nr?new af(f,ka(g.value),ka(b.value)):l.error("Scope of 'config' expression must be a string literal.")}return new af(f,ka(g.value))}evaluate(o){const l=[this.key,this.scope,o.scope].filter(Boolean).join(""),f=o.getConfig(l);if(!f)return null;const{type:g,value:b,values:w,minValue:R,maxValue:P,stepValue:L}=f,$=f.default.evaluate(o);let q=$;if(b){const Y=o.scope;o.scope=(Y||"").split("").slice(1).join(""),q=b.evaluate(o),o.scope=Y}return g&&(q=Lc(g,q)),q===void 0||R===void 0&&P===void 0&&L===void 0||(typeof q=="number"?q=Od(q,R,P,L):Array.isArray(q)&&(q=q.map(Y=>typeof Y=="number"?Od(Y,R,P,L):Y))),b!==void 0&&q!==void 0&&w&&!w.includes(q)&&(q=$,g&&(q=Lc(g,q))),(g&&g!==this.type||q!==void 0&&Uo(q)!==this.type)&&(q=Lc(this.type.kind,q)),q}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.key),o}}function lf(u){if(u instanceof Us&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof cu||u instanceof Ya)return!1;let o=!0;return u.eachChild(l=>{o&&!lf(l)&&(o=!1)}),o}function yp(u){if(u instanceof Us&&u.name==="feature-state")return!1;let o=!0;return u.eachChild(l=>{o&&!yp(l)&&(o=!1)}),o}function ra(u){if(u instanceof af)return new Set([u.key]);let o=new Set;return u.eachChild(l=>{o=new Set([...o,...ra(l)])}),o}function qo(u,o){if(u instanceof Us&&o.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(f=>{l&&!qo(f,o)&&(l=!1)}),l}class yo{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(o.length!==2||typeof o[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=o[1];return l.scope.has(f)?new yo(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class $u{constructor(o,l=[],f,g=new Yh,b=[],w,R){this.registry=o,this.path=l,this.key=l.map(P=>typeof P=="string"?`['${P}']`:`[${P}]`).join(""),this.scope=g,this.errors=b,this.expectedType=f,this._scope=w,this.options=R}parse(o,l,f,g,b={}){return l||f?this.concat(l,null,f,g)._parse(o,b):this._parse(o,b)}parseObjectValue(o,l,f,g,b,w={}){return this.concat(l,f,g,b)._parse(o,w)}_parse(o,l){function f(g,b,w){return w==="assert"?new vr(b,[g]):w==="coerce"?new Jl(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(g){let b=g.parse(o,this);if(!b)return null;if(this.expectedType){const w=this.expectedType,R=b.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||R.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string"){if(this.checkSubtype(w,R))return null}else b=f(b,w,l.typeAnnotation||"coerce");else b=f(b,w,l.typeAnnotation||"assert")}if(!(b instanceof Nr)&&b.type.kind!=="resolvedImage"&&qm(b)){const w=new fp(this._scope,this.options);try{b=new Nr(b.type,b.evaluate(w))}catch(R){return this.error(R.message),null}}return b}return Jl.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,f,g){let b=typeof o=="number"?this.path.concat(o):this.path;b=typeof l=="string"?b.concat(l):b;const w=g?this.scope.concat(g):this.scope;return new $u(this.registry,b,f||null,w,this.errors,this._scope,this.options)}error(o,...l){const f=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new Zl(f,o))}checkSubtype(o,l){const f=Lm(o,l);return f&&this.error(f),f}}var zc=$u;function qm(u){if(u instanceof yo)return qm(u.boundExpression);if(u instanceof Us&&u.name==="error"||u instanceof Kh||u instanceof cu||u instanceof Ya||u instanceof af)return!1;const o=u instanceof Jl||u instanceof vr;let l=!0;return u.eachChild(f=>{l=o?l&&qm(f):l&&f instanceof Nr}),!!l&&lf(u)&&qo(u,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function uu(u,o){const l=u.length-1;let f,g,b=0,w=l,R=0;for(;b<=w;)if(R=Math.floor((b+w)/2),f=u[R],g=u[R+1],f<=o){if(R===l||o<g)return R;b=R+1}else{if(!(f>o))throw new Un("Input is not a number.");w=R-1}return 0}class vp{constructor(o,l,f){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[g,b]of f)this.labels.push(g),this.outputs.push(b)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(o[1],1,tr);if(!f)return null;const g=[];let b=null;l.expectedType&&l.expectedType.kind!=="value"&&(b=l.expectedType);for(let w=1;w<o.length;w+=2){const R=w===1?-1/0:o[w],P=o[w+1],L=w,$=w+1;if(typeof R!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(g.length&&g[g.length-1][0]>=R)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const q=l.parse(P,$,b);if(!q)return null;b=b||q.type,g.push([R,q])}return new vp(b,f,g)}evaluate(o){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return f[0].evaluate(o);const b=l.length;return g>=l[b-1]?f[b-1].evaluate(o):f[uu(l,g)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&o.push(this.labels[l]),o.push(this.outputs[l].serialize());return o}}const Xv=.95047,_p=1.08883,xp=4/29,cf=6/29,bp=3*cf*cf,Zv=cf*cf*cf,Uu=Math.PI/180,qu=180/Math.PI;function Fc(u){return u>Zv?Math.pow(u,1/3):u/bp+xp}function Bc(u){return u>cf?u*u*u:bp*(u-xp)}function Hm(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Wm(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function uf(u){const o=Wm(u.r),l=Wm(u.g),f=Wm(u.b),g=Fc((.4124564*o+.3575761*l+.1804375*f)/Xv),b=Fc((.2126729*o+.7151522*l+.072175*f)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Fc((.0193339*o+.119192*l+.9503041*f)/_p)),alpha:u.a}}function wp(u){let o=(u.l+16)/116,l=isNaN(u.a)?o:o+u.a/500,f=isNaN(u.b)?o:o-u.b/200;return o=1*Bc(o),l=Xv*Bc(l),f=_p*Bc(f),new bi(Hm(3.2404542*l-1.5371385*o-.4985314*f),Hm(-.969266*l+1.8760108*o+.041556*f),Hm(.0556434*l-.2040259*o+1.0572252*f),u.alpha)}function nc(u,o,l){const f=o-u;return u+l*(f>180||f<-180?f-360*Math.round(f/360):f)}const Ms={forward:uf,reverse:wp,interpolate:function(u,o,l){return{l:lr(u.l,o.l,l),a:lr(u.a,o.a,l),b:lr(u.b,o.b,l),alpha:lr(u.alpha,o.alpha,l)}}},Hu={forward:function(u){const{l:o,a:l,b:f}=uf(u),g=Math.atan2(f,l)*qu;return{h:g<0?g+360:g,c:Math.sqrt(l*l+f*f),l:o,alpha:u.a}},reverse:function(u){const o=u.h*Uu,l=u.c;return wp({l:u.l,a:Math.cos(o)*l,b:Math.sin(o)*l,alpha:u.alpha})},interpolate:function(u,o,l){return{h:nc(u.h,o.h,l),c:lr(u.c,o.c,l),l:lr(u.l,o.l,l),alpha:lr(u.alpha,o.alpha,l)}}};var Kv=Object.freeze({__proto__:null,hcl:Hu,lab:Ms});class Xa{constructor(o,l,f,g,b){this.type=o,this.operator=l,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,R]of b)this.labels.push(w),this.outputs.push(R)}static interpolationFactor(o,l,f,g){let b=0;if(o.name==="exponential")b=Gm(l,o.base,f,g);else if(o.name==="linear")b=Gm(l,1,f,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new Rl(w[0],w[1],w[2],w[3]).solve(Gm(l,1,f,g))}return b}static parse(o,l){let[f,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const L=g[1];if(typeof L!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:L}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const L=g.slice(1);if(L.length!==4||L.some($=>typeof $!="number"||$<0||$>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:L}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length-1>3&&(o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(b=l.parse(b,2,tr),!b)return null;const R=[];let P=null;f==="interpolate-hcl"||f==="interpolate-lab"?P=Ha:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let L=0;L<w.length;L+=2){const $=w[L],q=w[L+1],Y=L+3,ne=L+4;if(typeof $!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(R.length&&R[R.length-1][0]>=$)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const re=l.parse(q,ne,P);if(!re)return null;P=P||re.type,R.push([$,re])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new Xa(P,f,g,b,R):l.error(`Type ${ls(P)} is not interpolatable.`)}evaluate(o){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return f[0].evaluate(o);const b=l.length;if(g>=l[b-1])return f[b-1].evaluate(o);const w=uu(l,g),R=Xa.interpolationFactor(this.interpolation,g,l[w],l[w+1]),P=f[w].evaluate(o),L=f[w+1].evaluate(o);return this.operator==="interpolate"?Pm[this.type.kind.toLowerCase()](P,L,R):this.operator==="interpolate-hcl"?Hu.reverse(Hu.interpolate(Hu.forward(P),Hu.forward(L),R)):Ms.reverse(Ms.interpolate(Ms.forward(P),Ms.forward(L),R))}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const l=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)l.push(this.labels[f],this.outputs[f].serialize());return l}}function Gm(u,o,l,f){const g=f-l,b=u-l;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}class _y{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expectected at least one argument.");let f=null;const g=l.expectedType;g&&g.kind!=="value"&&(f=g);const b=[];for(const R of o.slice(1)){const P=l.parse(R,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!P)return null;f=f||P.type,b.push(P)}const w=g&&b.some(R=>Lm(g,R.type));return new _y(w?Ai:f,b)}evaluate(o){let l,f=null,g=0;for(const b of this.args){if(g++,f=b.evaluate(o),f&&f instanceof Ia&&!f.available&&(l||(l=f),f=null,g===this.args.length))return l;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(l=>{o.push(l.serialize())}),o}}class ws{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return l.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",b);const R=l.parse(o[b+1],b+1);if(!R)return null;f.push([w,R])}const g=l.parse(o[o.length-1],o.length-1,l.expectedType,f);return g?new ws(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[l,f]of this.bindings)o.push(l,f.serialize());return o.push(this.result.serialize()),o}}class Sp{constructor(o,l,f){this.type=o,this.index=l,this.input=f}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,tr),g=l.parse(o[2],2,Pa(l.expectedType||Ai));return f&&g?new Sp(g.type.itemType,f,g):null}evaluate(o){const l=this.index.evaluate(o),f=this.input.evaluate(o);if(l<0)throw new Un(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new Un(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new Un(`Array index must be an integer, but found ${l} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[l]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ld{constructor(o,l,f){this.type=o,this.index=l,this.input=f}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,tr),g=l.parse(o[2],2,Pa(l.expectedType||Ai));return f&&g?new Ld(g.type.itemType,f,g):null}evaluate(o){const l=this.index.evaluate(o),f=this.input.evaluate(o);if(l<0)throw new Un(`Array index out of bounds: ${l} < 0.`);if(l>f.length-1)throw new Un(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l===Math.floor(l))return f[l];const g=Math.floor(l),b=Math.ceil(l),w=f[g],R=f[b];if(typeof w!="number"||typeof R!="number")throw new Un(`Cannot interpolate between non-number values at index ${l}.`);const P=l-g;return w*(1-P)+R*P}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class df{constructor(o,l){this.type=Ri,this.needle=o,this.haystack=l}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Ai),g=l.parse(o[2],2,Ai);return f&&g?$v(f.type,[Ri,$i,tr,Pd,Ai])?new df(f,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ls(f.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!Id(l,["boolean","string","number","null"]))throw new Un(`Expected first argument to be of type boolean, string, number or null, but found ${ls(Uo(l))} instead.`);if(!Id(f,["string","array"]))throw new Un(`Expected second argument to be of type array or string, but found ${ls(Uo(f))} instead.`);return f.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Tp{constructor(o,l,f){this.type=tr,this.needle=o,this.haystack=l,this.fromIndex=f}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Ai),g=l.parse(o[2],2,Ai);if(!f||!g)return null;if(!$v(f.type,[Ri,$i,tr,Pd,Ai]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ls(f.type)} instead`);if(o.length===4){const b=l.parse(o[3],3,tr);return b?new Tp(f,g,b):null}return new Tp(f,g)}evaluate(o){const l=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!Id(l,["boolean","string","number","null"]))throw new Un(`Expected first argument to be of type boolean, string, number or null, but found ${ls(Uo(l))} instead.`);if(!Id(f,["string","array"]))throw new Un(`Expected second argument to be of type array or string, but found ${ls(Uo(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(l,g)}return f.indexOf(l)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class zd{constructor(o,l,f,g,b,w){this.inputType=o,this.type=l,this.input=f,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let f,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const b={},w=[];for(let L=2;L<o.length-1;L+=2){let $=o[L];const q=o[L+1];Array.isArray($)||($=[$]);const Y=l.concat(L);if($.length===0)return Y.error("Expected at least one branch label.");for(const re of $){if(typeof re!="number"&&typeof re!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return Y.error("Numeric branch labels must be integer values.");if(f){if(Y.checkSubtype(f,Uo(re)))return null}else f=Uo(re);if(b[String(re)]!==void 0)return Y.error("Branch labels must be unique.");b[String(re)]=w.length}const ne=l.parse(q,L,g);if(!ne)return null;g=g||ne.type,w.push(ne)}const R=l.parse(o[1],1,Ai);if(!R)return null;const P=l.parse(o[o.length-1],o.length-1,g);return P?R.type.kind!=="value"&&l.concat(1).checkSubtype(f,R.type)?null:new zd(f,g,R,b,w,P):null}evaluate(o){const l=this.input.evaluate(o);return(Uo(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),f=[],g={};for(const w of l){const R=g[this.cases[w]];R===void 0?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[R][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,R]of f)o.push(R.length===1?b(R[0]):R.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}class Wu{constructor(o,l,f){this.type=o,this.branches=l,this.otherwise=f}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const R=l.parse(o[w],w,Ri);if(!R)return null;const P=l.parse(o[w+1],w+1,f);if(!P)return null;g.push([R,P]),f=f||P.type}const b=l.parse(o[o.length-1],o.length-1,f);return b?new Wu(f,g,b):null}evaluate(o){for(const[l,f]of this.branches)if(l.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,f]of this.branches)o(l),o(f);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(l=>{o.push(l.serialize())}),o}}class Ym{constructor(o,l,f,g){this.type=o,this.input=l,this.beginIndex=f,this.endIndex=g}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=l.parse(o[1],1,Ai),g=l.parse(o[2],2,tr);if(!f||!g)return null;if(!$v(f.type,[Pa(Ai),$i,Ai]))return l.error(`Expected first argument to be of type array or string, but found ${ls(f.type)} instead`);if(o.length===4){const b=l.parse(o[3],3,tr);return b?new Ym(f.type,f,g,b):null}return new Ym(f.type,f,g)}evaluate(o){const l=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!Id(l,["string","array"]))throw new Un(`Expected first argument to be of type array or string, but found ${ls(Uo(l))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return l.slice(f,g)}return l.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ep(u,o){return u==="=="||u==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function px(u,o,l,f){return f.compare(o,l)===0}function Fd(u,o,l){const f=u!=="=="&&u!=="!=";return class Ere{constructor(b,w,R){this.type=Ri,this.lhs=b,this.rhs=w,this.collator=R,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const R=b[0];let P=w.parse(b[1],1,Ai);if(!P)return null;if(!Ep(R,P.type))return w.concat(1).error(`"${R}" comparisons are not supported for type '${ls(P.type)}'.`);let L=w.parse(b[2],2,Ai);if(!L)return null;if(!Ep(R,L.type))return w.concat(2).error(`"${R}" comparisons are not supported for type '${ls(L.type)}'.`);if(P.type.kind!==L.type.kind&&P.type.kind!=="value"&&L.type.kind!=="value")return w.error(`Cannot compare types '${ls(P.type)}' and '${ls(L.type)}'.`);f&&(P.type.kind==="value"&&L.type.kind!=="value"?P=new vr(L.type,[P]):P.type.kind!=="value"&&L.type.kind==="value"&&(L=new vr(P.type,[L])));let $=null;if(b.length===4){if(P.type.kind!=="string"&&L.type.kind!=="string"&&P.type.kind!=="value"&&L.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if($=w.parse(b[3],3,Xh),!$)return null}return new Ere(P,L,$)}evaluate(b){const w=this.lhs.evaluate(b),R=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const P=Uo(w),L=Uo(R);if(P.kind!==L.kind||P.kind!=="string"&&P.kind!=="number")throw new Un(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${P.kind}, ${L.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const P=Uo(w),L=Uo(R);if(P.kind!=="string"||L.kind!=="string")return o(b,w,R)}return this.collator?l(b,w,R,this.collator.evaluate(b)):o(b,w,R)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[u];return this.eachChild(w=>{b.push(w.serialize())}),b}}}const hf=Fd("==",function(u,o,l){return o===l},px),Qv=Fd("!=",function(u,o,l){return o!==l},function(u,o,l,f){return!px(0,o,l,f)}),Xm=Fd("<",function(u,o,l){return o<l},function(u,o,l,f){return f.compare(o,l)<0}),Jv=Fd(">",function(u,o,l){return o>l},function(u,o,l,f){return f.compare(o,l)>0}),Zm=Fd("<=",function(u,o,l){return o<=l},function(u,o,l,f){return f.compare(o,l)<=0}),mx=Fd(">=",function(u,o,l){return o>=l},function(u,o,l,f){return f.compare(o,l)>=0});class Cp{constructor(o,l,f,g,b,w){this.type=$i,this.number=o,this.locale=l,this.currency=f,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,l){if(o.length!==3)return l.error("Expected two arguments.");const f=l.parse(o[1],1,tr);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=l.parseObjectValue(g.locale,2,"locale",$i),!b))return null;let w=null;if(g.currency&&(w=l.parseObjectValue(g.currency,2,"currency",$i),!w))return null;let R=null;if(g.unit&&(R=l.parseObjectValue(g.unit,2,"unit",$i),!R))return null;let P=null;if(g["min-fraction-digits"]&&(P=l.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",tr),!P))return null;let L=null;return g["max-fraction-digits"]&&(L=l.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",tr),!L)?null:new Cp(f,b,w,R,P,L)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class ff{constructor(o){this.type=tr,this.input=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=l.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${ls(f.type)} instead.`):new ff(f):null}evaluate(o){const l=this.input.evaluate(o);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Un(`Expected value to be of type string or array, but found ${ls(Uo(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(l=>{o.push(l.serialize())}),o}}function e_(u){return function(){u=1831565813+(u|=0)|0;let o=Math.imul(u^u>>>15,1|u);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const du={"==":hf,"!=":Qv,">":Jv,"<":Xm,">=":mx,"<=":Zm,array:vr,at:Sp,"at-interpolated":Ld,boolean:vr,case:Wu,coalesce:_y,collator:Kh,format:Dc,image:lu,in:df,"index-of":Tp,interpolate:Xa,"interpolate-hcl":Xa,"interpolate-lab":Xa,length:ff,let:ws,literal:Nr,match:zd,number:vr,"number-format":Cp,object:vr,slice:Ym,step:vp,string:vr,"to-boolean":Jl,"to-color":Jl,"to-number":Jl,"to-string":Jl,var:yo,within:cu,distance:Ya,config:af};function t_(u,[o,l,f,g]){o=o.evaluate(u),l=l.evaluate(u),f=f.evaluate(u);const b=g?g.evaluate(u):1,w=Uv(o,l,f,b);if(w)throw new Un(w);return new bi(o/255*b,l/255*b,f/255*b,b)}function Mp(u,[o,l,f,g]){o=o.evaluate(u),l=l.evaluate(u),f=f.evaluate(u);const b=g?g.evaluate(u):1,w=function(L,$,q,Y){return typeof L=="number"&&L>=0&&L<=360?typeof $=="number"&&$>=0&&$<=100&&typeof q=="number"&&q>=0&&q<=100?Y===void 0||typeof Y=="number"&&Y>=0&&Y<=1?null:`Invalid hsla value [${[L,$,q,Y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof Y=="number"?[L,$,q,Y]:[L,$,q]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof Y=="number"?[L,$,q,Y]:[L,$,q]).join(", ")}]: 'h' must be between 0 and 360.`}(o,l,f,b);if(w)throw new Un(w);const R=`hsla(${o}, ${l}%, ${f}%, ${b})`,P=bi.parse(R);if(!P)throw new Un(`Failed to parse HSLA color: ${R}`);return P}function xy(u,o){return u in o}function Km(u,o){const l=o[u];return l===void 0?null:l}function Za(u){return{type:u}}function by(u){return{result:"success",value:u}}function Ka(u){return{result:"error",value:u}}function hu(u,o){return!!u&&!!u.parameters&&u.parameters.indexOf(o)>-1}function jc(u){return u["property-type"]==="data-driven"}function Ap(u){return hu(u.expression,"measure-light")}function Qm(u){return hu(u.expression,"zoom")}function Rp(u){return!!u.expression&&u.expression.interpolated}function Bd(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Dp(u){return u}function Jm(u,o){const l=o.type==="color",f=u.stops&&typeof u.stops[0][0]=="object",g=f||!(f||u.property!==void 0),b=u.type||(Rp(o)?"exponential":"interval");if(l&&((u=Im({},u)).stops&&(u.stops=u.stops.map(L=>[L[0],bi.parse(L[1])])),u.default=bi.parse(u.default?u.default:o.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!Kv[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let w,R,P;if(b==="exponential")w=fu;else if(b==="interval")w=wy;else if(b==="categorical"){w=pf,R=Object.create(null);for(const L of u.stops)R[L[0]]=L[1];P=typeof u.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=n_}if(f){const L={},$=[];for(let ne=0;ne<u.stops.length;ne++){const re=u.stops[ne],de=re[0].zoom;L[de]===void 0&&(L[de]={zoom:de,type:u.type,property:u.property,default:u.default,stops:[]},$.push(de)),L[de].stops.push([re[0].value,re[1]])}const q=[];for(const ne of $)q.push([L[ne].zoom,Jm(L[ne],o)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Xa.interpolationFactor.bind(void 0,Y),zoomStops:q.map(ne=>ne[0]),evaluate:({zoom:ne},re)=>fu({stops:q,base:u.base},o,ne).evaluate(ne,re)}}if(g){const L=b==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Xa.interpolationFactor.bind(void 0,L),zoomStops:u.stops.map($=>$[0]),evaluate:({zoom:$})=>w(u,o,$,R,P)}}return{kind:"source",evaluate(L,$){const q=$&&$.properties?$.properties[u.property]:void 0;return q===void 0?jd(u.default,o.default):w(u,o,q,R,P)}}}function jd(u,o,l){return u!==void 0?u:o!==void 0?o:l!==void 0?l:void 0}function pf(u,o,l,f,g){return jd(typeof l===g?f[l]:void 0,u.default,o.default)}function wy(u,o,l){if(br(l)!=="number")return jd(u.default,o.default);const f=u.stops.length;if(f===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[f-1][0])return u.stops[f-1][1];const g=uu(u.stops.map(b=>b[0]),l);return u.stops[g][1]}function fu(u,o,l){const f=u.base!==void 0?u.base:1;if(br(l)!=="number")return jd(u.default,o.default);const g=u.stops.length;if(g===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[g-1][0])return u.stops[g-1][1];const b=uu(u.stops.map($=>$[0]),l),w=function($,q,Y,ne){const re=ne-Y,de=$-Y;return re===0?0:q===1?de/re:(Math.pow(q,de)-1)/(Math.pow(q,re)-1)}(l,f,u.stops[b][0],u.stops[b+1][0]),R=u.stops[b][1],P=u.stops[b+1][1];let L=Pm[o.type]||Dp;if(u.colorSpace&&u.colorSpace!=="rgb"){const $=Kv[u.colorSpace];L=(q,Y)=>$.reverse($.interpolate($.forward(q),$.forward(Y),w))}return typeof R.evaluate=="function"?{evaluate(...$){const q=R.evaluate.apply(void 0,$),Y=P.evaluate.apply(void 0,$);if(q!==void 0&&Y!==void 0)return L(q,Y,w)}}:L(R,P,w)}function n_(u,o,l){return o.type==="color"?l=bi.parse(l):o.type==="formatted"?l=ga.fromString(l.toString()):o.type==="resolvedImage"?l=Ia.build(l.toString()):br(l)===o.type||o.type==="enum"&&o.values[l]||(l=void 0),jd(l,u.default,o.default)}Us.register(du,{error:[{kind:"error"},[$i],(u,[o])=>{throw new Un(o.evaluate(u))}],typeof:[$i,[Ai],(u,[o])=>ls(Uo(o.evaluate(u)))],"to-rgba":[Pa(tr,4),[Ha],(u,[o])=>o.evaluate(u).toRenderColor(null).toArray()],"to-hsla":[Pa(tr,4),[Ha],(u,[o])=>o.evaluate(u).toRenderColor(null).toHslaArray()],rgb:[Ha,[tr,tr,tr],t_],rgba:[Ha,[tr,tr,tr,tr],t_],hsl:[Ha,[tr,tr,tr],Mp],hsla:[Ha,[tr,tr,tr,tr],Mp],has:{type:Ri,overloads:[[[$i],(u,[o])=>xy(o.evaluate(u),u.properties())],[[$i,zu],(u,[o,l])=>xy(o.evaluate(u),l.evaluate(u))]]},get:{type:Ai,overloads:[[[$i],(u,[o])=>Km(o.evaluate(u),u.properties())],[[$i,zu],(u,[o,l])=>Km(o.evaluate(u),l.evaluate(u))]]},"feature-state":[Ai,[$i],(u,[o])=>Km(o.evaluate(u),u.featureState||{})],properties:[zu,[],u=>u.properties()],"geometry-type":[$i,[],u=>u.geometryType()],id:[Ai,[],u=>u.id()],zoom:[tr,[],u=>u.globals.zoom],pitch:[tr,[],u=>u.globals.pitch||0],"distance-from-center":[tr,[],u=>u.distanceFromCenter()],"measure-light":[tr,[$i],(u,[o])=>u.measureLight(o.evaluate(u))],"heatmap-density":[tr,[],u=>u.globals.heatmapDensity||0],"line-progress":[tr,[],u=>u.globals.lineProgress||0],"raster-value":[tr,[],u=>u.globals.rasterValue||0],"raster-particle-speed":[tr,[],u=>u.globals.rasterParticleSpeed||0],"sky-radial-progress":[tr,[],u=>u.globals.skyRadialProgress||0],accumulated:[Ai,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[tr,Za(tr),(u,o)=>{let l=0;for(const f of o)l+=f.evaluate(u);return l}],"*":[tr,Za(tr),(u,o)=>{let l=1;for(const f of o)l*=f.evaluate(u);return l}],"-":{type:tr,overloads:[[[tr,tr],(u,[o,l])=>o.evaluate(u)-l.evaluate(u)],[[tr],(u,[o])=>-o.evaluate(u)]]},"/":[tr,[tr,tr],(u,[o,l])=>o.evaluate(u)/l.evaluate(u)],"%":[tr,[tr,tr],(u,[o,l])=>o.evaluate(u)%l.evaluate(u)],ln2:[tr,[],()=>Math.LN2],pi:[tr,[],()=>Math.PI],e:[tr,[],()=>Math.E],"^":[tr,[tr,tr],(u,[o,l])=>Math.pow(o.evaluate(u),l.evaluate(u))],sqrt:[tr,[tr],(u,[o])=>Math.sqrt(o.evaluate(u))],log10:[tr,[tr],(u,[o])=>Math.log(o.evaluate(u))/Math.LN10],ln:[tr,[tr],(u,[o])=>Math.log(o.evaluate(u))],log2:[tr,[tr],(u,[o])=>Math.log(o.evaluate(u))/Math.LN2],sin:[tr,[tr],(u,[o])=>Math.sin(o.evaluate(u))],cos:[tr,[tr],(u,[o])=>Math.cos(o.evaluate(u))],tan:[tr,[tr],(u,[o])=>Math.tan(o.evaluate(u))],asin:[tr,[tr],(u,[o])=>Math.asin(o.evaluate(u))],acos:[tr,[tr],(u,[o])=>Math.acos(o.evaluate(u))],atan:[tr,[tr],(u,[o])=>Math.atan(o.evaluate(u))],min:[tr,Za(tr),(u,o)=>Math.min(...o.map(l=>l.evaluate(u)))],max:[tr,Za(tr),(u,o)=>Math.max(...o.map(l=>l.evaluate(u)))],abs:[tr,[tr],(u,[o])=>Math.abs(o.evaluate(u))],round:[tr,[tr],(u,[o])=>{const l=o.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[tr,[tr],(u,[o])=>Math.floor(o.evaluate(u))],ceil:[tr,[tr],(u,[o])=>Math.ceil(o.evaluate(u))],"filter-==":[Ri,[$i,Ai],(u,[o,l])=>u.properties()[o.value]===l.value],"filter-id-==":[Ri,[Ai],(u,[o])=>u.id()===o.value],"filter-type-==":[Ri,[$i],(u,[o])=>u.geometryType()===o.value],"filter-<":[Ri,[$i,Ai],(u,[o,l])=>{const f=u.properties()[o.value],g=l.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Ri,[Ai],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l<f}],"filter->":[Ri,[$i,Ai],(u,[o,l])=>{const f=u.properties()[o.value],g=l.value;return typeof f==typeof g&&f>g}],"filter-id->":[Ri,[Ai],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l>f}],"filter-<=":[Ri,[$i,Ai],(u,[o,l])=>{const f=u.properties()[o.value],g=l.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Ri,[Ai],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l<=f}],"filter->=":[Ri,[$i,Ai],(u,[o,l])=>{const f=u.properties()[o.value],g=l.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Ri,[Ai],(u,[o])=>{const l=u.id(),f=o.value;return typeof l==typeof f&&l>=f}],"filter-has":[Ri,[Ai],(u,[o])=>o.value in u.properties()],"filter-has-id":[Ri,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Ri,[Pa($i)],(u,[o])=>o.value.indexOf(u.geometryType())>=0],"filter-id-in":[Ri,[Pa(Ai)],(u,[o])=>o.value.indexOf(u.id())>=0],"filter-in-small":[Ri,[$i,Pa(Ai)],(u,[o,l])=>l.value.indexOf(u.properties()[o.value])>=0],"filter-in-large":[Ri,[$i,Pa(Ai)],(u,[o,l])=>function(f,g,b,w){for(;b<=w;){const R=b+w>>1;if(g[R]===f)return!0;g[R]>f?w=R-1:b=R+1}return!1}(u.properties()[o.value],l.value,0,l.value.length-1)],all:{type:Ri,overloads:[[[Ri,Ri],(u,[o,l])=>o.evaluate(u)&&l.evaluate(u)],[Za(Ri),(u,o)=>{for(const l of o)if(!l.evaluate(u))return!1;return!0}]]},any:{type:Ri,overloads:[[[Ri,Ri],(u,[o,l])=>o.evaluate(u)||l.evaluate(u)],[Za(Ri),(u,o)=>{for(const l of o)if(l.evaluate(u))return!0;return!1}]]},"!":[Ri,[Ri],(u,[o])=>!o.evaluate(u)],"is-supported-script":[Ri,[$i],(u,[o])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(o.evaluate(u))}],upcase:[$i,[$i],(u,[o])=>o.evaluate(u).toUpperCase()],downcase:[$i,[$i],(u,[o])=>o.evaluate(u).toLowerCase()],concat:[$i,Za(Ai),(u,o)=>o.map(l=>ka(l.evaluate(u))).join("")],"resolved-locale":[$i,[Xh],(u,[o])=>o.evaluate(u).resolvedLocale()],random:[tr,[tr,tr,Ai],(u,o)=>{const[l,f,g]=o.map(w=>w.evaluate(u));if(l>f||l===f)return l;let b;if(typeof g=="string")b=function(w){let R=0;if(w.length===0)return R;for(let P=0;P<w.length;P++)R=(R<<5)-R+w.charCodeAt(P),R|=0;return R}(g);else{if(typeof g!="number")throw new Un(`Invalid seed input: ${g}`);b=g}return l+e_(b)()*(f-l)}]});class eg{constructor(o,l,f,g){this.expression=o,this._warningHistory={},this._evaluator=new fp(f,g),this._defaultValue=l?function(b){return b.type==="color"&&(Bd(b.default)||Array.isArray(b.default))?new bi(0,0,0,0):b.type==="color"?bi.parse(b.default)||null:b.default===void 0?null:b.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this.configDependencies=ra(o)}evaluateWithoutErrorHandling(o,l,f,g,b,w,R,P){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=P||null,this.expression.evaluate(this._evaluator)}evaluate(o,l,f,g,b,w,R,P){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=P||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Un(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${L.message}`)),this._defaultValue}}}function Nc(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in du}function Di(u,o,l,f){const g=new zc(du,[],o?function(w){const R={color:Ha,string:$i,number:tr,enum:$i,boolean:Ri,formatted:km,resolvedImage:Om};return w.type==="array"?Pa(R[w.value]||Ai,w.length):R[w.type]}(o):void 0,void 0,void 0,l,f),b=g.parse(u,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?by(new eg(b,o,l,f)):Ka(g.errors)}class vo{constructor(o,l,f,g){this.kind=o,this._styleExpression=l,this.isLightConstant=f,this.isLineProgressConstant=g,this.isStateDependent=o!=="constant"&&!yp(l.expression),this.configDependencies=ra(l.expression)}evaluateWithoutErrorHandling(o,l,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,l,f,g,b,w)}evaluate(o,l,f,g,b,w){return this._styleExpression.evaluate(o,l,f,g,b,w)}}class is{constructor(o,l,f,g,b,w){this.kind=o,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=o!=="camera"&&!yp(l.expression),this.isLightConstant=b,this.isLineProgressConstant=w,this.configDependencies=ra(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,l,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,l,f,g,b,w)}evaluate(o,l,f,g,b,w){return this._styleExpression.evaluate(o,l,f,g,b,w)}interpolationFactor(o,l,f){return this.interpolationType?Xa.interpolationFactor(this.interpolationType,o,l,f):0}}function Nd(u,o,l,f){if((u=Di(u,o,l,f)).result==="error")return u;const g=u.value.expression,b=lf(g);if(!b&&!jc(o))return Ka([new Zl("","data expressions not supported")]);const w=qo(g,["zoom","pitch","distance-from-center"]);if(!w&&!Qm(o))return Ka([new Zl("","zoom expressions not supported")]);const R=qo(g,["measure-light"]);if(!R&&!Ap(o))return Ka([new Zl("","measure-light expression not supported")]);const P=qo(g,["line-progress"]);if(!P&&!function(q){return hu(q.expression,"line-progress")}(o))return Ka([new Zl("","line-progress expression not supported")]);const L=o.expression&&o.expression.relaxZoomRestriction,$=mu(g);return $||w||L?$ instanceof Zl?Ka([$]):$ instanceof Xa&&!Rp(o)?Ka([new Zl("",'"interpolate" expressions cannot be used with this property')]):by($?new is(b&&P?"camera":"composite",u.value,$.labels,$ instanceof Xa?$.interpolation:void 0,R,P):new vo(b&&P?"constant":"source",u.value,R,P)):Ka([new Zl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class pu{constructor(o,l){this._parameters=o,this._specification=l,Im(this,Jm(this._parameters,this._specification))}static deserialize(o){return new pu(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function mu(u){let o=null;if(u instanceof ws)o=mu(u.result);else if(u instanceof _y){for(const l of u.args)if(o=mu(l),o)break}else(u instanceof vp||u instanceof Xa)&&u.input instanceof Us&&u.input.name==="zoom"&&(o=u);return o instanceof Zl||u.eachChild(l=>{const f=mu(l);f instanceof Zl?o=f:o&&f&&o!==f&&(o=new Zl("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var Pp,Vd,$d=function(){if(Vd)return Pp;Vd=1,Pp=o;var u=3;function o(l,f,g){var b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var w=new Int32Array(this.arrayBuffer);l=w[0],this.d=(f=w[1])+2*(g=w[2]);for(var R=0;R<this.d*this.d;R++){var P=w[u+R],L=w[u+R+1];b.push(P===L?null:w.subarray(P,L))}var $=w[u+b.length+1];this.keys=w.subarray(w[u+b.length],$),this.bboxes=w.subarray($),this.insert=this._insertReadonly}else{this.d=f+2*g;for(var q=0;q<this.d*this.d;q++)b.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=g,this.scale=f/l,this.uid=0;var Y=g/f*l;this.min=-Y,this.max=l+Y}return o.prototype.insert=function(l,f,g,b,w){this._forEachCell(f,g,b,w,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(w)},o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},o.prototype._insertCell=function(l,f,g,b,w,R){this.cells[w].push(R)},o.prototype.query=function(l,f,g,b,w){var R=this.min,P=this.max;if(l<=R&&f<=R&&P<=g&&P<=b&&!w)return Array.prototype.slice.call(this.keys);var L=[];return this._forEachCell(l,f,g,b,this._queryCell,L,{},w),L},o.prototype._queryCell=function(l,f,g,b,w,R,P,L){var $=this.cells[w];if($!==null)for(var q=this.keys,Y=this.bboxes,ne=0;ne<$.length;ne++){var re=$[ne];if(P[re]===void 0){var de=4*re;(L?L(Y[de+0],Y[de+1],Y[de+2],Y[de+3]):l<=Y[de+2]&&f<=Y[de+3]&&g>=Y[de+0]&&b>=Y[de+1])?(P[re]=!0,R.push(q[re])):P[re]=!1}}},o.prototype._forEachCell=function(l,f,g,b,w,R,P,L){for(var $=this._convertToCellCoord(l),q=this._convertToCellCoord(f),Y=this._convertToCellCoord(g),ne=this._convertToCellCoord(b),re=$;re<=Y;re++)for(var de=q;de<=ne;de++){var ye=this.d*de+re;if((!L||L(this._convertFromCellCoord(re),this._convertFromCellCoord(de),this._convertFromCellCoord(re+1),this._convertFromCellCoord(de+1)))&&w.call(this,l,f,g,b,ye,R,P,L))return}},o.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},o.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,f=u+this.cells.length+1+1,g=0,b=0;b<this.cells.length;b++)g+=this.cells[b].length;var w=new Int32Array(f+g+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var R=f,P=0;P<l.length;P++){var L=l[P];w[u+P]=R,w.set(L,R),R+=L.length}return w[u+l.length]=R,w.set(this.keys,R),w[u+l.length+1]=R+=this.keys.length,w.set(this.bboxes,R),R+=this.bboxes.length,w.buffer},Pp}(),Ip=ki($d);const os={};function zn(u,o,l={}){Object.defineProperty(u,"_classRegistryKey",{value:o,writable:!1}),os[o]={klass:u,omit:l.omit||[]}}zn(Object,"Object"),Ip.serialize=function(u,o){const l=u.toArrayBuffer();return o&&o.add(l),{buffer:l}},Ip.deserialize=function(u){return new Ip(u.buffer)},Object.defineProperty(Ip,"name",{value:"Grid"}),zn(Ip,"Grid"),typeof DOMMatrix<"u"&&zn(DOMMatrix,"DOMMatrix"),zn(bi,"Color"),zn(Error,"Error"),zn(ga,"Formatted"),zn(cy,"FormattedSection"),zn(Mm,"AJAXError"),zn(Ia,"ResolvedImage"),zn(pu,"StylePropertyFunction"),zn(eg,"StyleExpression",{omit:["_evaluator"]}),zn(ul,"ImageId"),zn(Ql,"ImageVariant"),zn(is,"ZoomDependentExpression"),zn(vo,"ZoomConstantExpression"),zn(Us,"CompoundExpression",{omit:["_evaluate"]});for(const u in du)os[du[u]._classRegistryKey]||zn(du[u],`Expression${u}`);function mf(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Ud(u){return self.ImageBitmap&&u instanceof ImageBitmap}function Gu(u,o){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(mf(u)||Ud(u))return o&&o.add(u),u;if(ArrayBuffer.isView(u))return o&&o.add(u.buffer),u;if(u instanceof ImageData)return o&&o.add(u.data.buffer),u;if(Array.isArray(u)){const l=[];for(const f of u)l.push(Gu(f,o));return l}if(u instanceof Map){const l={$name:"Map",entries:[]};for(const[f,g]of u.entries())l.entries.push(Gu(f),Gu(g,o));return l}if(u instanceof Set){const l={$name:"Set"};let f=0;for(const g of u.values())l[++f]=Gu(g);return l}if(u instanceof DOMMatrix){const l={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const g of f)l[g]=u[g];return l}if(typeof u=="bigint")return{$name:"BigInt",value:u.toString()};if(typeof u=="object"){const l=u.constructor,f=l._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${l.name}".`);const g=l.serialize?l.serialize(u,o):{};if(!l.serialize){for(const b in u)u.hasOwnProperty(b)&&(os[f].omit.indexOf(b)>=0||(g[b]=Gu(u[b],o)));u instanceof Error&&(g.message=u.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof u)}function qd(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||mf(u)||Ud(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(qd);if(typeof u=="object"){const o=u.$name||"Object";if(o==="Map"){const g=u.entries||[],b=new Map;for(let w=0;w<g.length;w+=2)b.set(qd(g[w]),qd(g[w+1]));return b}if(o==="Set"){const g=new Set;for(const b of Object.keys(u))b!=="$name"&&g.add(qd(u[b]));return g}if(o==="DOMMatrix"){let g;return g=u.is2D?[u.a,u.b,u.c,u.d,u.e,u.f]:[u.m11,u.m12,u.m13,u.m14,u.m21,u.m22,u.m23,u.m24,u.m31,u.m32,u.m33,u.m34,u.m41,u.m42,u.m43,u.m44],new DOMMatrix(g)}if(o==="BigInt")return BigInt(u.value);const{klass:l}=os[o];if(!l)throw new Error(`Can't deserialize unregistered class "${o}".`);if(l.deserialize)return l.deserialize(u);const f=Object.create(l.prototype);for(const g of Object.keys(u))g!=="$name"&&(f[g]=qd(u[g]));return f}throw new Error("can't deserialize object of type "+typeof u)}const cr={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519,Osage:u=>u>=66736&&u<=66815,"CJK Unified Ideographs Extension B":u=>u>=131072&&u<=173791};function tg(u){for(const o of u)if(cs(o.charCodeAt(0)))return!0;return!1}function r_(u){for(const o of u)if(!Qa(o.charCodeAt(0)))return!1;return!0}function Qa(u){return!(cr.Arabic(u)||cr["Arabic Supplement"](u)||cr["Arabic Extended-A"](u)||cr["Arabic Presentation Forms-A"](u)||cr["Arabic Presentation Forms-B"](u))}function cs(u){return!(u!==746&&u!==747&&(u<4352||!(cr["Bopomofo Extended"](u)||cr.Bopomofo(u)||cr["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||cr["CJK Compatibility Ideographs"](u)||cr["CJK Compatibility"](u)||cr["CJK Radicals Supplement"](u)||cr["CJK Strokes"](u)||!(!cr["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||cr["CJK Unified Ideographs Extension A"](u)||cr["CJK Unified Ideographs"](u)||cr["Enclosed CJK Letters and Months"](u)||cr["Hangul Compatibility Jamo"](u)||cr["Hangul Jamo Extended-A"](u)||cr["Hangul Jamo Extended-B"](u)||cr["Hangul Jamo"](u)||cr["Hangul Syllables"](u)||cr.Hiragana(u)||cr["Ideographic Description Characters"](u)||cr.Kanbun(u)||cr["Kangxi Radicals"](u)||cr["Katakana Phonetic Extensions"](u)||cr.Katakana(u)&&u!==12540||!(!cr["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!cr["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||cr["Unified Canadian Aboriginal Syllabics"](u)||cr["Unified Canadian Aboriginal Syllabics Extended"](u)||cr["Vertical Forms"](u)||cr["Yijing Hexagram Symbols"](u)||cr["Yi Syllables"](u)||cr["Yi Radicals"](u))))}function Sy(u){return!(cs(u)||function(o){return!!(cr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||cr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||cr["Letterlike Symbols"](o)||cr["Number Forms"](o)||cr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||cr["Control Pictures"](o)&&o!==9251||cr["Optical Character Recognition"](o)||cr["Enclosed Alphanumerics"](o)||cr["Geometric Shapes"](o)||cr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||cr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||cr["CJK Symbols and Punctuation"](o)||cr.Katakana(o)||cr["Private Use Area"](o)||cr["CJK Compatibility Forms"](o)||cr["Small Form Variants"](o)||cr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(u))}function ng(u){return cr.Arabic(u)||cr["Arabic Supplement"](u)||cr["Arabic Extended-A"](u)||cr["Arabic Presentation Forms-A"](u)||cr["Arabic Presentation Forms-B"](u)}function rg(u){return u>=1424&&u<=2303||cr["Arabic Presentation Forms-A"](u)||cr["Arabic Presentation Forms-B"](u)}function i_(u,o){return!(!o&&rg(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||cr.Khmer(u))}function Yu(u){for(const o of u)if(rg(o.charCodeAt(0)))return!0;return!1}const kp="deferred",ig="loading",og="loaded";let Ty=null,Ja="unavailable",Xu=null;const Hd=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(Ja="error"),Ty&&Ty(u)};function sg(){ag.fire(new au("pluginStateChange",{pluginStatus:Ja,pluginURL:Xu}))}const ag=new Dd,Wd=function(){return Ja},o_=function(){if(Ja!==kp||!Xu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ja=ig,sg(),Xu&&Ad({url:Xu},u=>{u?Hd(u):(Ja=og,sg())})},rc={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ja===og||rc.applyArabicShaping!=null,isLoading:()=>Ja===ig,setState(u){Ja=u.pluginStatus,Xu=u.pluginURL},isParsed:()=>rc.applyArabicShaping!=null&&rc.processBidirectionalText!=null&&rc.processStyledBidirectionalText!=null,getPluginURL:()=>Xu};class Li{constructor(o,l){this.zoom=o,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch,this.brightness=l.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return function(l,f){for(const g of l)if(!i_(g.charCodeAt(0),f))return!1;return!0}(o,rc.isLoaded())}}class Op{constructor(o,l,f,g){this.property=o,this.value=l,this.expression=function(b,w,R,P){if(Bd(b))return new pu(b,w);if(Nc(b)||Array.isArray(b)&&b.length>0){const L=Nd(b,w,R,P);if(L.result==="error")throw new Error(L.value.map($=>`${$.key}: ${$.message}`).join(", "));return L.value}{let L=b;return typeof b=="string"&&w.type==="color"&&(L=bi.parse(b)),{kind:"constant",configDependencies:new Set,evaluate:()=>L}}}(l===void 0?o.specification.default:l,o.specification,f,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,l,f){return this.property.possiblyEvaluate(this,o,l,f)}}class Zu{constructor(o,l,f){this.property=o,this.value=new Op(o,void 0,l,f)}transitioned(o,l){return new s_(this.property,this.value,l,lt({},o.transition,this.transition),o.now)}untransitioned(){return new s_(this.property,this.value,null,{},0)}}class Ey{constructor(o,l,f){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=l,this._options=f,this.configDependencies=new Set}getValue(o){return kr(this._values[o].value.value)}setValue(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new Zu(this._values[o].property,this._scope,this._options)),this._values[o].value=new Op(this._values[o].property,l===null?void 0:kr(l),this._scope,this._options),this._values[o].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].value.expression.configDependencies]))}setTransitionOrValue(o,l){l&&(this._options=l);const f=this._properties.properties;if(o)for(const g in o){const b=o[g];if(g.endsWith("-transition")){const w=g.slice(0,-11);f[w]&&this.setTransition(w,b)}else f.hasOwnProperty(g)&&this.setValue(g,b)}}getTransition(o){return kr(this._values[o].transition)}setTransition(o,l){this._values.hasOwnProperty(o)||(this._values[o]=new Zu(this._values[o].property)),this._values[o].transition=kr(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(o[l]=f);const g=this.getTransition(l);g!==void 0&&(o[`${l}-transition`]=g)}return o}transitioned(o,l){const f=new a_(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,l._values[g]);return f}untransitioned(){const o=new a_(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class s_{constructor(o,l,f,g,b){const w=g.delay||0,R=g.duration||0;b=b||0,this.property=o,this.value=l,this.begin=b+w,this.end=this.begin+R,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,l,f){const g=o.now||0,b=this.value.possiblyEvaluate(o,l,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,l,f);{const R=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,l,f),b,ze(R))}}return b}}class a_{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,f){const g=new Gd(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,l,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class gx{constructor(o,l,f){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=l,this._options=f,this.configDependencies=new Set}getValue(o){return kr(this._values[o].value)}setValue(o,l){this._values[o]=new Op(this._values[o].property,l===null?void 0:kr(l),this._scope,this._options),this._values[o].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].expression.configDependencies]))}serialize(){const o={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(o[l]=f)}return o}possiblyEvaluate(o,l,f){const g=new Gd(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,l,f);return g}}class gf{constructor(o,l,f){this.property=o,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,l,f,g){return this.property.evaluate(this.value,this.parameters,o,l,f,g)}}class Gd{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class yn{constructor(o){this.specification=o}possiblyEvaluate(o,l){return o.expression.evaluate(l)}interpolate(o,l,f){const g=Pm[this.specification.type];return g?g(o,l,f):o}}class Ln{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,f,g){return new gf(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(l,null,{},f,g)}:o.expression,l)}interpolate(o,l,f){if(o.value.kind!=="constant"||l.value.kind!=="constant")return o;if(o.value.value===void 0||l.value.value===void 0)return new gf(this,{kind:"constant",value:void 0},o.parameters);const g=Pm[this.specification.type];return g?new gf(this,{kind:"constant",value:g(o.value.value,l.value.value,f)},o.parameters):o}evaluate(o,l,f,g,b,w){return o.kind==="constant"?o.value:o.evaluate(l,f,g,b,w)}}class ic{constructor(o){this.specification=o}possiblyEvaluate(o,l,f,g){return!!o.expression.evaluate(l,null,{},f,g)}interpolate(){return!1}}class To{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new Li(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const b=this.defaultPropertyValues[f]=new Op(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new Zu(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=b.possiblyEvaluate(l)}}}zn(Ln,"DataDrivenProperty"),zn(yn,"DataConstantProperty"),zn(ic,"ColorRampProperty");var _t=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-wall-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white"},"sky-atmosphere-color":{"type":"color","default":"white"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function yl(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Yd(u){if(Array.isArray(u))return u.map(Yd);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const o={};for(const l in u)o[l]=Yd(u[l]);return o}return yl(u)}function lg(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const o of u.slice(1))if(!lg(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function Cy(u,o="",l=null,f="fill"){if(u==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};lg(u)||(u=cg(u));const g=u;let b=!0;try{b=function($){if(!yf($))return $;let q=Yd($);return c_(q),q=l_(q),q}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let w=null,R=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){R=_t[`filter_${f}`];const $=Di(b,R,o,l);if($.result==="error")throw new Error($.value.map(q=>`${q.key}: ${q.message}`).join(", "));w=(q,Y,ne)=>$.value.evaluate(q,Y,{},ne)}let P=null,L=null;if(b!==g){const $=Di(g,R,o,l);if($.result==="error")throw new Error($.value.map(q=>`${q.key}: ${q.message}`).join(", "));P=(q,Y,ne,re,de)=>$.value.evaluate(q,Y,{},ne,void 0,void 0,re,de),L=!lf($.value.expression)}return{filter:w,dynamicFilter:P||void 0,needGeometry:d_(b),needFeature:!!L}}function l_(u){if(!Array.isArray(u))return u;const o=function(l){if(yx.has(l[0])){for(let f=1;f<l.length;f++)if(yf(l[f]))return!0}return l}(u);return o===!0?o:o.map(l=>l_(l))}function c_(u){let o=!1;const l=[];if(u[0]==="case"){for(let f=1;f<u.length-1;f+=2)o=o||yf(u[f]),l.push(u[f+1]);l.push(u[u.length-1])}else if(u[0]==="match"){o=o||yf(u[1]);for(let f=2;f<u.length-1;f+=2)l.push(u[f+1]);l.push(u[u.length-1])}else if(u[0]==="step"){o=o||yf(u[1]);for(let f=1;f<u.length-1;f+=2)l.push(u[f+1])}o&&(u.length=0,u.push("any",...l));for(let f=1;f<u.length;f++)c_(u[f])}function yf(u){if(!Array.isArray(u))return!1;if((o=u[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let l=1;l<u.length;l++)if(yf(u[l]))return!0;return!1}const yx=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function u_(u,o){return u<o?-1:u>o?1:0}function d_(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let o=1;o<u.length;o++)if(d_(u[o]))return!0;return!1}function cg(u){if(!u)return!0;const o=u[0];return u.length<=1?o!=="any":o==="=="?ug(u[1],u[2],"=="):o==="!="?Ay(ug(u[1],u[2],"==")):o==="<"||o===">"||o==="<="||o===">="?ug(u[1],u[2],o):o==="any"?(l=u.slice(1),["any"].concat(l.map(cg))):o==="all"?["all"].concat(u.slice(1).map(cg)):o==="none"?["all"].concat(u.slice(1).map(cg).map(Ay)):o==="in"?My(u[1],u.slice(2)):o==="!in"?Ay(My(u[1],u.slice(2))):o==="has"?h_(u[1]):o!=="!has"||Ay(h_(u[1]));var l}function ug(u,o,l){switch(u){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,u,o]}}function My(u,o){if(o.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",u,["literal",o.sort(u_)]]:["filter-in-small",u,["literal",o]]}}function h_(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Ay(u){return["!",u]}const vf="";function Xd(u,o){return o?`${u}${vf}${o}`:u}const Ry="-transition",gu=new Set(["fill","line","background","hillshade","raster"]);class va extends Dd{constructor(o,l,f,g,b){if(super(),this.id=o.id,this.fqid=Xd(this.id,f),this.type=o.type,this.scope=f,this.lut=g,this.options=b,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,o.type!=="custom"){if(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type&&o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"){this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter;const w=Di(this.filter,_t[`filter_${o.type}`]);w.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...w.value.configDependencies]))}if(o.slot&&(this.slot=o.slot),l.layout&&(this._unevaluatedLayout=new gx(l.layout,this.scope,b),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),l.paint){this._transitionablePaint=new Ey(l.paint,this.scope,b);for(const w in o.paint)this.setPaintProperty(w,o.paint[w]);for(const w in o.layout)this.setLayoutProperty(w,o.layout[w]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Gd(l.paint)}}}onAdd(o){}onRemove(o){}isDraped(o){return!this.is3D(!0)&&gu.has(this.type)}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,l){if(this.type==="custom"&&o==="visibility")return void(this.visibility=l);const f=this._unevaluatedLayout;f._properties.properties[o]&&(f.setValue(o,l),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),o==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(o){return o.endsWith(Ry)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l){const f=this._transitionablePaint,g=f._properties.properties;if(o.endsWith(Ry)){const q=o.slice(0,-11);return g[q]&&f.setTransition(q,l||void 0),!1}if(!g[o])return!1;const b=f._values[o],w=b.value.isDataDriven(),R=b.value;f.setValue(o,l),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(o);const P=f._values[o].value,L=P.isDataDriven(),$=o.endsWith("pattern")||o==="line-dasharray";return L||w||$||this._handleOverridablePaintPropertyUpdate(o,R,P)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,l,f){return null}_handleOverridablePaintPropertyUpdate(o,l,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){return rr({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}is3D(o){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof gf&&jc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(o){this._filterCompiled||(this._featureFilter=Cy(this.filter,this.scope,o),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(o){}queryIntersectsFeature(o,l,f,g,b,w,R,P,L){}}const vx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dg{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ho{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.add(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function fi(u,o=1){let l=0,f=0;return{members:u.map(g=>{const b=vx[g.type].BYTES_PER_ELEMENT,w=l=_f(l,Math.max(o,b)),R=g.components||1;return f=Math.max(f,b),l+=b*R,{name:g.name,type:g.type,components:R,offset:w}}),size:_f(l,Math.max(f,o)),alignment:o}}function _f(u,o){return Math.ceil(u/o)*o}class Vc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const g=2*o;return this.int16[g+0]=l,this.int16[g+1]=f,o}}Vc.prototype.bytesPerElement=4,zn(Vc,"StructArrayLayout2i4");class xf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const b=3*o;return this.int16[b+0]=l,this.int16[b+1]=f,this.int16[b+2]=g,o}}xf.prototype.bytesPerElement=6,zn(xf,"StructArrayLayout3i6");class Zd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,g)}emplace(o,l,f,g,b){const w=4*o;return this.int16[w+0]=l,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=b,o}}Zd.prototype.bytesPerElement=8,zn(Zd,"StructArrayLayout4i8");class bf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}bf.prototype.bytesPerElement=4,zn(bf,"StructArrayLayout1f4");class wf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const b=4*o,w=2*o;return this.int16[b+0]=l,this.int16[b+1]=f,this.float32[w+1]=g,o}}wf.prototype.bytesPerElement=8,zn(wf,"StructArrayLayout2i1f8");class Sf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const b=4*o;return this.int16[b+0]=l,this.int16[b+1]=f,this.int16[b+2]=g,o}}Sf.prototype.bytesPerElement=8,zn(Sf,"StructArrayLayout3i8");class Dy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,b)}emplace(o,l,f,g,b,w){const R=5*o;return this.int16[R+0]=l,this.int16[R+1]=f,this.int16[R+2]=g,this.int16[R+3]=b,this.int16[R+4]=w,o}}Dy.prototype.bytesPerElement=10,zn(Dy,"StructArrayLayout5i10");class f_ extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,g,b,w,R)}emplace(o,l,f,g,b,w,R,P){const L=6*o,$=12*o,q=3*o;return this.int16[L+0]=l,this.int16[L+1]=f,this.uint8[$+4]=g,this.uint8[$+5]=b,this.uint8[$+6]=w,this.uint8[$+7]=R,this.float32[q+2]=P,o}}f_.prototype.bytesPerElement=12,zn(f_,"StructArrayLayout2i4ub1f12");class el extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const b=3*o;return this.float32[b+0]=l,this.float32[b+1]=f,this.float32[b+2]=g,o}}el.prototype.bytesPerElement=12,zn(el,"StructArrayLayout3f12");class Ll extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,b)}emplace(o,l,f,g,b,w){const R=6*o,P=3*o;return this.uint16[R+0]=l,this.uint16[R+1]=f,this.uint16[R+2]=g,this.uint16[R+3]=b,this.float32[P+2]=w,o}}Ll.prototype.bytesPerElement=12,zn(Ll,"StructArrayLayout4ui1f12");class Tf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,g)}emplace(o,l,f,g,b){const w=4*o;return this.uint16[w+0]=l,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}Tf.prototype.bytesPerElement=8,zn(Tf,"StructArrayLayout4ui8");class $c extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w){const R=this.length;return this.resize(R+1),this.emplace(R,o,l,f,g,b,w)}emplace(o,l,f,g,b,w,R){const P=6*o;return this.int16[P+0]=l,this.int16[P+1]=f,this.int16[P+2]=g,this.int16[P+3]=b,this.int16[P+4]=w,this.int16[P+5]=R,o}}$c.prototype.bytesPerElement=12,zn($c,"StructArrayLayout6i12");class Ku extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L,$,q,Y){const ne=this.length;return this.resize(ne+1),this.emplace(ne,o,l,f,g,b,w,R,P,L,$,q,Y)}emplace(o,l,f,g,b,w,R,P,L,$,q,Y,ne){const re=12*o;return this.int16[re+0]=l,this.int16[re+1]=f,this.int16[re+2]=g,this.int16[re+3]=b,this.uint16[re+4]=w,this.uint16[re+5]=R,this.uint16[re+6]=P,this.uint16[re+7]=L,this.int16[re+8]=$,this.int16[re+9]=q,this.int16[re+10]=Y,this.int16[re+11]=ne,o}}Ku.prototype.bytesPerElement=24,zn(Ku,"StructArrayLayout4i4ui4i24");class La extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w){const R=this.length;return this.resize(R+1),this.emplace(R,o,l,f,g,b,w)}emplace(o,l,f,g,b,w,R){const P=10*o,L=5*o;return this.int16[P+0]=l,this.int16[P+1]=f,this.int16[P+2]=g,this.float32[L+2]=b,this.float32[L+3]=w,this.float32[L+4]=R,o}}La.prototype.bytesPerElement=20,zn(La,"StructArrayLayout3i3f20");class Uc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,g)}emplace(o,l,f,g,b){const w=4*o;return this.float32[w+0]=l,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=b,o}}Uc.prototype.bytesPerElement=16,zn(Uc,"StructArrayLayout4f16");class Kd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}Kd.prototype.bytesPerElement=4,zn(Kd,"StructArrayLayout1ul4");class Qu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const g=2*o;return this.uint16[g+0]=l,this.uint16[g+1]=f,o}}Qu.prototype.bytesPerElement=4,zn(Qu,"StructArrayLayout2ui4");class vl extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L,$,q,Y,ne){const re=this.length;return this.resize(re+1),this.emplace(re,o,l,f,g,b,w,R,P,L,$,q,Y,ne)}emplace(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re){const de=20*o,ye=10*o;return this.int16[de+0]=l,this.int16[de+1]=f,this.int16[de+2]=g,this.int16[de+3]=b,this.int16[de+4]=w,this.float32[ye+3]=R,this.float32[ye+4]=P,this.float32[ye+5]=L,this.float32[ye+6]=$,this.int16[de+14]=q,this.uint32[ye+8]=Y,this.uint16[de+18]=ne,this.uint16[de+19]=re,o}}vl.prototype.bytesPerElement=40,zn(vl,"StructArrayLayout5i4f1i1ul2ui40");class zl extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,g,b,w,R)}emplace(o,l,f,g,b,w,R,P){const L=8*o;return this.int16[L+0]=l,this.int16[L+1]=f,this.int16[L+2]=g,this.int16[L+4]=b,this.int16[L+5]=w,this.int16[L+6]=R,this.int16[L+7]=P,o}}zl.prototype.bytesPerElement=16,zn(zl,"StructArrayLayout3i2i2i16");class oc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,b)}emplace(o,l,f,g,b,w){const R=4*o,P=8*o;return this.float32[R+0]=l,this.float32[R+1]=f,this.float32[R+2]=g,this.int16[P+6]=b,this.int16[P+7]=w,o}}oc.prototype.bytesPerElement=16,zn(oc,"StructArrayLayout2f1f2i16");class Py extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w){const R=this.length;return this.resize(R+1),this.emplace(R,o,l,f,g,b,w)}emplace(o,l,f,g,b,w,R){const P=20*o,L=5*o;return this.uint8[P+0]=l,this.uint8[P+1]=f,this.float32[L+1]=g,this.float32[L+2]=b,this.float32[L+3]=w,this.float32[L+4]=R,o}}Py.prototype.bytesPerElement=20,zn(Py,"StructArrayLayout2ub4f20");class Fo extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,f)}emplace(o,l,f,g){const b=3*o;return this.uint16[b+0]=l,this.uint16[b+1]=f,this.uint16[b+2]=g,o}}Fo.prototype.bytesPerElement=6,zn(Fo,"StructArrayLayout3ui6");class qc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie,he,Ee){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie,he,Ee)}emplace(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie,he,Ee,Oe){const Ve=30*o,tt=15*o,it=60*o;return this.int16[Ve+0]=l,this.int16[Ve+1]=f,this.int16[Ve+2]=g,this.float32[tt+2]=b,this.float32[tt+3]=w,this.uint16[Ve+8]=R,this.uint16[Ve+9]=P,this.uint32[tt+5]=L,this.uint32[tt+6]=$,this.uint32[tt+7]=q,this.uint16[Ve+16]=Y,this.uint16[Ve+17]=ne,this.uint16[Ve+18]=re,this.float32[tt+10]=de,this.float32[tt+11]=ye,this.uint8[it+48]=be,this.uint8[it+49]=Le,this.uint8[it+50]=Ie,this.uint32[tt+13]=he,this.int16[Ve+28]=Ee,this.uint8[it+58]=Oe,o}}qc.prototype.bytesPerElement=60,zn(qc,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class As extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie,he,Ee,Oe,Ve,tt,it,at,ht,zt,nn,Xt,Qt,ln,It){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie,he,Ee,Oe,Ve,tt,it,at,ht,zt,nn,Xt,Qt,ln,It)}emplace(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie,he,Ee,Oe,Ve,tt,it,at,ht,zt,nn,Xt,Qt,ln,It,Kt){const At=20*o,kt=40*o,un=80*o;return this.float32[At+0]=l,this.float32[At+1]=f,this.int16[kt+4]=g,this.int16[kt+5]=b,this.int16[kt+6]=w,this.int16[kt+7]=R,this.int16[kt+8]=P,this.int16[kt+9]=L,this.int16[kt+10]=$,this.int16[kt+11]=q,this.int16[kt+12]=Y,this.uint16[kt+13]=ne,this.uint16[kt+14]=re,this.uint16[kt+15]=de,this.uint16[kt+16]=ye,this.uint16[kt+17]=be,this.uint16[kt+18]=Le,this.uint16[kt+19]=Ie,this.uint16[kt+20]=he,this.uint16[kt+21]=Ee,this.uint16[kt+22]=Oe,this.uint16[kt+23]=Ve,this.uint16[kt+24]=tt,this.uint16[kt+25]=it,this.uint16[kt+26]=at,this.uint16[kt+27]=ht,this.uint32[At+14]=zt,this.float32[At+15]=nn,this.float32[At+16]=Xt,this.float32[At+17]=Qt,this.float32[At+18]=ln,this.uint8[un+76]=It,this.uint16[kt+39]=Kt,o}}As.prototype.bytesPerElement=80,zn(As,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Hc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,l,f,g,b)}emplace(o,l,f,g,b,w){const R=5*o;return this.float32[R+0]=l,this.float32[R+1]=f,this.float32[R+2]=g,this.float32[R+3]=b,this.float32[R+4]=w,o}}Hc.prototype.bytesPerElement=20,zn(Hc,"StructArrayLayout5f20");class Ef extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,g,b,w,R)}emplace(o,l,f,g,b,w,R,P){const L=7*o;return this.float32[L+0]=l,this.float32[L+1]=f,this.float32[L+2]=g,this.float32[L+3]=b,this.float32[L+4]=w,this.float32[L+5]=R,this.float32[L+6]=P,o}}Ef.prototype.bytesPerElement=28,zn(Ef,"StructArrayLayout7f28");class hg extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L,$,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,o,l,f,g,b,w,R,P,L,$,q)}emplace(o,l,f,g,b,w,R,P,L,$,q,Y){const ne=11*o;return this.float32[ne+0]=l,this.float32[ne+1]=f,this.float32[ne+2]=g,this.float32[ne+3]=b,this.float32[ne+4]=w,this.float32[ne+5]=R,this.float32[ne+6]=P,this.float32[ne+7]=L,this.float32[ne+8]=$,this.float32[ne+9]=q,this.float32[ne+10]=Y,o}}hg.prototype.bytesPerElement=44,zn(hg,"StructArrayLayout11f44");class fg extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L){const $=this.length;return this.resize($+1),this.emplace($,o,l,f,g,b,w,R,P,L)}emplace(o,l,f,g,b,w,R,P,L,$){const q=9*o;return this.float32[q+0]=l,this.float32[q+1]=f,this.float32[q+2]=g,this.float32[q+3]=b,this.float32[q+4]=w,this.float32[q+5]=R,this.float32[q+6]=P,this.float32[q+7]=L,this.float32[q+8]=$,o}}fg.prototype.bytesPerElement=36,zn(fg,"StructArrayLayout9f36");class Qd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const f=this.length;return this.resize(f+1),this.emplace(f,o,l)}emplace(o,l,f){const g=2*o;return this.float32[g+0]=l,this.float32[g+1]=f,o}}Qd.prototype.bytesPerElement=8,zn(Qd,"StructArrayLayout2f8");class Ju extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,l,f,g)}emplace(o,l,f,g,b){const w=6*o;return this.uint32[3*o+0]=l,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}Ju.prototype.bytesPerElement=12,zn(Ju,"StructArrayLayout1ul3ui12");class Jd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}Jd.prototype.bytesPerElement=2,zn(Jd,"StructArrayLayout1ui2");class Cf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye){const be=this.length;return this.resize(be+1),this.emplace(be,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye)}emplace(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be){const Le=16*o;return this.float32[Le+0]=l,this.float32[Le+1]=f,this.float32[Le+2]=g,this.float32[Le+3]=b,this.float32[Le+4]=w,this.float32[Le+5]=R,this.float32[Le+6]=P,this.float32[Le+7]=L,this.float32[Le+8]=$,this.float32[Le+9]=q,this.float32[Le+10]=Y,this.float32[Le+11]=ne,this.float32[Le+12]=re,this.float32[Le+13]=de,this.float32[Le+14]=ye,this.float32[Le+15]=be,o}}Cf.prototype.bytesPerElement=64,zn(Cf,"StructArrayLayout16f64");class Lp extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,f,g,b,w,R){const P=this.length;return this.resize(P+1),this.emplace(P,o,l,f,g,b,w,R)}emplace(o,l,f,g,b,w,R,P){const L=10*o,$=5*o;return this.uint16[L+0]=l,this.uint16[L+1]=f,this.uint16[L+2]=g,this.uint16[L+3]=b,this.float32[$+2]=w,this.float32[$+3]=R,this.float32[$+4]=P,o}}Lp.prototype.bytesPerElement=20,zn(Lp,"StructArrayLayout4ui3f20");class Iy extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.int16[1*o+0]=l,o}}Iy.prototype.bytesPerElement=2,zn(Iy,"StructArrayLayout1i2");class Mf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint8[1*o+0]=l,o}}Mf.prototype.bytesPerElement=1,zn(Mf,"StructArrayLayout1ub1");class p_ extends dg{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}p_.prototype.size=40;class zp extends vl{get(o){return new p_(this,o)}}zn(zp,"CollisionBoxArray");class m_ extends dg{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}m_.prototype.size=60;class g_ extends qc{get(o){return new m_(this,o)}}zn(g_,"PlacedSymbolArray");class _x extends dg{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}_x.prototype.size=80;class y_ extends As{get(o){return new _x(this,o)}}zn(y_,"SymbolInstanceArray");class Fs extends bf{getoffsetX(o){return this.float32[1*o+0]}}zn(Fs,"GlyphOffsetArray");class ia extends Vc{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}zn(ia,"SymbolLineVertexArray");class v_ extends dg{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}v_.prototype.size=12;class __ extends Ju{get(o){return new v_(this,o)}}zn(__,"FeatureIndexArray");class x_ extends Qu{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}zn(x_,"FillExtrusionCentroidArray");class b_ extends dg{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}b_.prototype.size=6;class w_ extends xf{get(o){return new b_(this,o)}}zn(w_,"FillExtrusionWallArray");const ky=fi([{name:"a_pos",components:2,type:"Int16"}],4),S_=fi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class _o{constructor(o=[]){this.segments=o}_prepareSegment(o,l,f,g){let b=this.segments[this.segments.length-1];return o>_o.MAX_VERTEX_ARRAY_LENGTH&&Ir(`Max vertices per segment is ${_o.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>_o.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:l,primitiveOffset:f,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}prepareSegment(o,l,f,g){return this._prepareSegment(o,l.length,f.length,g)}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,f,g){return new _o([{vertexOffset:o,primitiveOffset:l,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function T_(u,o){return 256*(u=Ze(Math.floor(u),0,255))+Ze(Math.floor(o),0,255)}_o.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zn(_o,"SegmentVector");const xx=fi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),eh=fi([{name:"a_pattern_b",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),E_=fi([{name:"a_dash",components:4,type:"Uint16"}]);class th{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,l,f,g){this.ids.push(C_(o)),this.positions.push(l,f,g)}eachPosition(o,l){const f=C_(o);let g=0,b=this.ids.length-1;for(;g<b;){const w=g+b>>1;this.ids[w]>=f?b=w:g=w+1}for(;this.ids[g]===f;)l(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(o,l){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return Fp(f,g,0,f.length-1),l&&(l.add(f.buffer),l.add(g.buffer)),{ids:f,positions:g}}static deserialize(o){const l=new th;let f;l.ids=o.ids,l.positions=o.positions;for(const g of l.ids)g!==f&&l.uniqueIds.push(g),f=g;return l.indexed=!0,l}}function C_(u){const o=+u;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:cl(String(u))}function Fp(u,o,l,f){for(;l<f;){const g=u[l+f>>1];let b=l-1,w=f+1;for(;;){do b++;while(u[b]<g);do w--;while(u[w]>g);if(b>=w)break;nh(u,b,w),nh(o,3*b,3*w),nh(o,3*b+1,3*w+1),nh(o,3*b+2,3*w+2)}w-l<f-w?(Fp(u,o,l,w),l=w+1):(Fp(u,o,w+1,f),f=w)}}function nh(u,o,l){const f=u[o];u[o]=u[l],u[l]=f}zn(th,"FeaturePositionMap");class sc{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,l),this.initialized=!0),!!this.location}set(o,l,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class pg extends sc{constructor(o){super(o),this.current=0}set(o,l,f){this.fetchUniformLocation(o,l)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class Bo extends sc{constructor(o){super(o),this.current=0}set(o,l,f){this.fetchUniformLocation(o,l)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class ac extends sc{constructor(o){super(o),this.current=[0,0]}set(o,l,f){this.fetchUniformLocation(o,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class Fl extends sc{constructor(o){super(o),this.current=[0,0,0]}set(o,l,f){this.fetchUniformLocation(o,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class Bp extends sc{constructor(o){super(o),this.current=[0,0,0,0]}set(o,l,f){this.fetchUniformLocation(o,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class bx extends sc{constructor(o){super(o),this.current=bi.transparent.toRenderColor(null)}set(o,l,f){this.fetchUniformLocation(o,l)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const wx=new Float32Array(16);class Bl extends sc{constructor(o){super(o),this.current=wx}set(o,l,f){if(this.fetchUniformLocation(o,l)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let g=1;g<16;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const M_=new Float32Array(9),jp=new Float32Array(4);class za extends sc{constructor(o){super(o),this.current=jp}set(o,l,f){if(this.fetchUniformLocation(o,l)){for(let g=0;g<4;g++)if(f[g]!==this.current[g]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function Ho(u){return[T_(255*u.r,255*u.g),T_(255*u.b,255*u.a)]}class mg{constructor(o,l,f,g){this.value=o,this.uniformNames=l.map(b=>`u_${b}`),this.type=f,this.context=g}setUniform(o,l,f,g,b){const w=g.constantOr(this.value);l.set(o,b,w instanceof bi?w.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):w)}getBinding(o,l){return this.type==="color"?new bx(o):new Bo(o)}}class Np{constructor(o,l){this.uniformNames=l.map(f=>`u_${f}`),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(o,l){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br),this.patternTransition=l?l.tl.concat(l.br):this.pattern}setUniform(o,l,f,g,b){let w=null;b!=="u_pattern"&&b!=="u_dash"||(w=this.pattern),b==="u_pattern_b"&&(w=this.patternTransition),b==="u_pixel_ratio"&&(w=this.pixelRatio),w&&l.set(o,b,w)}getBinding(o,l){return l==="u_pattern"||l==="u_pattern_b"||l==="u_dash"?new Bp(o):new Bo(o)}}class yu{constructor(o,l,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,l,f,g,b,w,R){const P=this.paintVertexArray.length,L=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new Li(0,{brightness:w}),l,{},b,g,R):this.expression.kind==="constant"&&this.expression.value,$=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Li(0,{brightness:w}),l,{},b,g,R):this.lutExpression.value)==="none";this.paintVertexArray.resize(o),this._setPaintValue(P,o,L,$?null:this.context.lut)}updatePaintArray(o,l,f,g,b,w,R){const P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:R},f,g,void 0,b):this.expression.kind==="constant"&&this.expression.value,L=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Li(0,{brightness:R}),f,g,void 0,b):this.lutExpression.value)==="none";this._setPaintValue(o,l,P,L?null:this.context.lut)}_setPaintValue(o,l,f,g){if(this.type==="color"){const b=Ho(f.toRenderColor(g));for(let w=o;w<l;w++)this.paintVertexArray.emplace(w,b[0],b[1])}else{for(let b=o;b<l;b++)this.paintVertexArray.emplace(b,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class tl{constructor(o,l,f,g,b,w){this.expression=o,this.uniformNames=l.map(R=>`u_${R}_t`),this.type=f,this.useIntegerZoom=g,this.context=b,this.maxValue=0,this.paintVertexAttributes=l.map(R=>({name:`a_${R}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,l,f,g,b,w,R){const P=this.expression.evaluate(new Li(this.context.zoom,{brightness:w}),l,{},b,g,R),L=this.expression.evaluate(new Li(this.context.zoom+1,{brightness:w}),l,{},b,g,R),$=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Li(0,{brightness:w}),l,{},b,g,R):this.lutExpression.value)==="none",q=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(q,o,P,L,$?null:this.context.lut)}updatePaintArray(o,l,f,g,b,w,R){const P=this.expression.evaluate({zoom:this.context.zoom,brightness:R},f,g,void 0,b),L=this.expression.evaluate({zoom:this.context.zoom+1,brightness:R},f,g,void 0,b),$=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new Li(0,{brightness:R}),f,g,void 0,b):this.lutExpression.value)==="none";this._setPaintValue(o,l,P,L,$?null:this.context.lut)}_setPaintValue(o,l,f,g,b){if(this.type==="color"){const w=Ho(f.toRenderColor(b)),R=Ho(f.toRenderColor(b));for(let P=o;P<l;P++)this.paintVertexArray.emplace(P,w[0],w[1],R[0],R[1])}else{for(let w=o;w<l;w++)this.paintVertexArray.emplace(w,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l,f,g,b){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,R=Ze(this.expression.interpolationFactor(w,this.context.zoom,this.context.zoom+1),0,1);l.set(o,b,R)}getBinding(o,l){return new Bo(o)}}class oa{constructor(o,l,f,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(f==="array"?E_:xx).members;for(let w=0;w<l.length;++w);this.paintVertexArray=new g,this.paintTransitionVertexArray=new Ll}populatePaintArray(o,l,f,g){const b=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(b,o,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(o,l,f,g,b,w,R){this._setPaintValues(o,l,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(o,l,f,g){if(!g||!f)return;const b=g[f[0]],w=g[f[1]];if(b){if(b){const{tl:R,br:P,pixelRatio:L}=b;for(let $=o;$<l;$++)this.paintVertexArray.emplace($,R[0],R[1],P[0],P[1],L)}if(w){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:R,br:P,pixelRatio:L}=w;for(let $=o;$<l;$++)this.paintTransitionVertexArray.emplace($,R[0],R[1],P[0],P[1],L)}}}upload(o){const l=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,l)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=o.createVertexBuffer(this.paintTransitionVertexArray,eh.members,l))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class ed{constructor(o,l,f=()=>!0){this.binders={},this._buffers=[],this.context=l;const g=[];for(const b in o.paint._values){const w=o.paint.get(b);if(b.endsWith("-use-theme")||!f(b)||!(w instanceof gf&&jc(w.property.specification)))continue;const R=a(b,o.type),P=w.value,L=w.property.specification.type,$=!!w.property.useIntegerZoom,q=b==="line-dasharray"||b.endsWith("pattern"),Y=o.paint.get(`${b}-use-theme`),ne=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant"||Y&&Y.value.kind!=="constant";if(P.kind!=="constant"||ne)if(P.kind==="source"||ne||q){const re=S(b,L,"source");this.binders[b]=q?new oa(P,R,L,re,o.id):new yu(P,R,L,re),g.push(`/a_${b}`)}else{const re=S(b,L,"composite");this.binders[b]=new tl(P,R,L,$,l,re),g.push(`/z_${b}`)}else this.binders[b]=q?new Np(P.value,R):new mg(P.value,R,L,l),g.push(`/u_${b}`);Y&&(this.binders[b].lutExpression=Y.value)}this.cacheKey=g.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof yu||l instanceof tl?l.maxValue:0}populatePaintArrays(o,l,f,g,b,w,R){for(const P in this.binders){const L=this.binders[P];L.context=this.context,(L instanceof yu||L instanceof tl||L instanceof oa)&&L.populatePaintArray(o,l,f,g,b,w,R)}}setConstantPatternPositions(o,l){for(const f in this.binders){const g=this.binders[f];g instanceof Np&&g.setConstantPatternPositions(o,l)}}getPatternTransitionVertexBuffer(o){const l=this.binders[o];return l instanceof oa?l.paintTransitionVertexBuffer:null}updatePaintArrays(o,l,f,g,b,w,R,P,L){let $=!1;const q=Object.keys(o),Y=q.length!==0&&!P,ne=Y?q:l.uniqueIds;this.context.lut=b.lut;for(const re in this.binders){const de=this.binders[re];if(de.context=this.context,(de instanceof yu||de instanceof tl||de instanceof oa)&&de.expression&&de.expression.kind&&de.expression.kind!=="constant"&&(de.expression.isStateDependent===!0||de.expression.isLightConstant===!1)){const ye=b.paint.get(re);de.expression=ye.value;for(const be of ne){const Le=o[be.toString()];l.eachPosition(be,(Ie,he,Ee)=>{const Oe=g.feature(Ie);de.updatePaintArray(he,Ee,Oe,Le,w,R,L)})}if(!Y)for(const be of f.uniqueIds){const Le=o[be.toString()];f.eachPosition(be,(Ie,he,Ee)=>{const Oe=g.feature(Ie);de.updatePaintArray(he,Ee,Oe,Le,w,R,L)})}$=!0}}return $}defines(){const o=[];for(const l in this.binders){const f=this.binders[l];(f instanceof mg||f instanceof Np)&&o.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof yu||f instanceof tl||f instanceof oa)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name);if(f instanceof oa)for(let g=0;g<eh.members.length;g++)o.push(eh.members[g].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof mg||f instanceof Np||f instanceof tl)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const l=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof mg||g instanceof Np||g instanceof tl)for(const b of g.uniformNames)l.push({name:b,property:f,binding:g.getBinding(o,b)})}return l}setUniforms(o,l,f,g,b){for(const{name:w,property:R,binding:P}of f)this.binders[R].setUniform(o,P,b,g.get(R),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const l=this.binders[o];(l instanceof yu||l instanceof tl||l instanceof oa)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer),l instanceof oa&&l.paintTransitionVertexBuffer&&this._buffers.push(l.paintTransitionVertexBuffer)}}upload(o){for(const l in this.binders){const f=this.binders[l];(f instanceof yu||f instanceof tl||f instanceof oa)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof yu||l instanceof tl||l instanceof oa)&&l.destroy()}}}class rh{constructor(o,l,f=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new ed(g,l,f);this.needsUpload=!1,this._featureMap=new th,this._featureMapWithoutIds=new th,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,l,f,g,b,w,R,P){for(const L in this.programConfigurations)this.programConfigurations[L].populatePaintArrays(o,l,g,b,w,R,P);l.id!==void 0?this._featureMap.add(l.id,f,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,f,g,b,w,R){for(const P of f)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,l,P,g,b,w,R||0)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const y={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"]};function a(u,o){return y[u]||[u.replace(`${o}-`,"").replace(/-/g,"_")]}const h={"line-pattern":{source:Ll,composite:Ll},"fill-pattern":{source:Ll,composite:Ll},"fill-extrusion-pattern":{source:Ll,composite:Ll},"line-dasharray":{source:Tf,composite:Tf}},v={color:{source:Qd,composite:Uc},number:{source:bf,composite:Qd}};function S(u,o,l){const f=h[u];return f&&f[l]||v[o][l]}zn(mg,"ConstantBinder"),zn(Np,"PatternConstantBinder"),zn(yu,"SourceExpressionBinder"),zn(oa,"PatternCompositeBinder"),zn(tl,"CompositeExpressionBinder"),zn(ed,"ProgramConfiguration",{omit:["_buffers"]}),zn(rh,"ProgramConfigurationSet");const E=xn/Math.PI/2,D=5,O=6,N=16383,W=64,Z=[W,32,16],te=-E,J=E;function oe(u,o,l,f=E){return l=ie(l),[u*Math.sin(l)*f,-o*f,u*Math.cos(l)*f]}function ge(u,o,l){return oe(Math.cos(ie(u)),Math.sin(ie(u)),o,l)}const pe=63710088e-1,ve=2*Math.PI*pe;class me{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new me(ct(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,f=this.lat*l,g=o.lat*l,b=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*l);return pe*Math.acos(Math.min(b,1))}toBounds(o=0){const l=360*o/40075017,f=l/Math.cos(Math.PI/180*this.lat);return new Re({lng:this.lng-f,lat:this.lat-l},{lng:this.lng+f,lat:this.lat+l})}toEcef(o){return ge(this.lat,this.lng,E+o*E/pe)}static convert(o){if(o instanceof me)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new me(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new me(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Re{constructor(o,l){if(o)if(l)this.setSouthWest(o).setNorthEast(l);else if(o.length===4){const f=o;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=o;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(o){return this._ne=o instanceof me?new me(o.lng,o.lat):me.convert(o),this}setSouthWest(o){return this._sw=o instanceof me?new me(o.lng,o.lat):me.convert(o),this}extend(o){const l=this._sw,f=this._ne;let g,b;if(o instanceof me)g=o,b=o;else{if(!(o instanceof Re))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Re.convert(o)):this.extend(me.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(me.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return l||f?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new me(g.lng,g.lat),this._ne=new me(b.lng,b.lat)),this}getCenter(){return new me((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new me(this.getWest(),this.getNorth())}getSouthEast(){return new me(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:l,lat:f}=me.convert(o);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){if(o)return o instanceof Re?o:new Re(o)}}const Be=0,Ue=25.5;function Ke(u){return ve*Math.cos(u*Math.PI/180)}function Ye(u){return(180+u)/360}function Ge(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Ne(u,o){return u/Ke(o)}function Je(u){return 360*u-180}function nt(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function bt(u,o){return u*Ke(nt(o))}const mt=85.051129;function $t(u){return Math.cos(ie(Ze(u,-85.051129,mt)))}function jt(u,o){const l=Ze(o,Be,Ue),f=Math.pow(2,l);return $t(u)*ve/(512*f)}function an(u){return 1/Math.cos(u*Math.PI/180)}function pt(u,o=0){const l=Math.exp(Math.PI*(1-(u.y+o/xn)/(1<<u.z)*2));return 80150034*l/(l*l+1)/xn/(1<<u.z)}class Tt{constructor(o,l,f=0){this.x=+o,this.y=+l,this.z=+f}static fromLngLat(o,l=0){const f=me.convert(o);return new Tt(Ye(f.lng),Ge(f.lat),Ne(l,f.lat))}toLngLat(){return new me(Je(this.x),nt(this.y))}toAltitude(){return bt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ve*an(nt(this.y))}}function ut(u,o,l,f,g,b,w,R,P){const L=(o+f)/2,$=(l+g)/2,q=new mn(L,$);R(q),function(Y,ne,re,de,ye,be){const Le=re-ye,Ie=de-be;return Math.abs((de-ne)*Le-(re-Y)*Ie)/Math.hypot(Le,Ie)}(q.x,q.y,b.x,b.y,w.x,w.y)>=P?(ut(u,o,l,L,$,b,q,R,P),ut(u,L,$,f,g,q,w,R,P)):u.push(w)}function Gt(u,o,l){let f=u[0],g=f.x,b=f.y;o(f);const w=[f];for(let R=1;R<u.length;R++){const P=u[R],{x:L,y:$}=P;o(P),ut(w,g,b,L,$,f,P,o,l),g=L,b=$,f=P}return w}function Mt(u,o,l,f){if(f(o,l)){const g=o.add(l)._mult(.5);Mt(u,o,g,f),Mt(u,g,l,f)}else u.push(l)}function Jt(u,o){let l=u[0];const f=[l];for(let g=1;g<u.length;g++){const b=u[g];Mt(f,l,b,o),l=b}return f}const qt=Math.pow(2,14)-1,en=-qt-1;function on(u,o){const l=Math.round(u.x*o),f=Math.round(u.y*o);return u.x=Ze(l,en,qt),u.y=Ze(f,en,qt),(l<u.x||l>u.x+1||f<u.y||f>u.y+1)&&Ir("Geometry exceeds allowed extent, reduce your vector tile buffer size"),u}function Vn(u,o,l){const f=u.loadGeometry(),g=u.extent,b=xn/g;if(o&&l&&l.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:R,x:P,y:L,projection:$}=l,q=Y=>{const ne=Je((o.x+Y.x/g)/w),re=nt((o.y+Y.y/g)/w),de=$.project(ne,re);Y.x=(de.x*R-P)*g,Y.y=(de.y*R-L)*g};for(let Y=0;Y<f.length;Y++)if(u.type!==1)f[Y]=Gt(f[Y],q,1);else{const ne=[];for(const re of f[Y])re.x<0||re.x>=g||re.y<0||re.y>=g||(q(re),ne.push(re));f[Y]=ne}}for(const w of f)for(const R of w)on(R,b);return f}function Gn(u,o){return{type:u.type,id:u.id,properties:u.properties,geometry:o?Vn(u):[]}}function Fn(u,o,l,f,g){u.emplaceBack(2*o+(f+1)/2,2*l+(g+1)/2)}function Qn(u,o,l){u.emplaceBack(o.x,o.y,o.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Wn{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Vc,this.indexArray=new Fo,this.segments=new _o,this.programConfigurations=new rh(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}updateFootprints(o,l){}populate(o,l,f,g){const b=this.layers[0],w=[];let R=null;b.type==="circle"&&(R=b.layout.get("circle-sort-key"));for(const{feature:L,id:$,index:q,sourceLayerIndex:Y}of o){const ne=this.layers[0]._featureFilter.needGeometry,re=Gn(L,ne);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),re,f))continue;const de=R?R.evaluate(re,{},f):void 0,ye={id:$,properties:L.properties,type:L.type,sourceLayerIndex:Y,index:q,geometry:ne?re.geometry:Vn(L,f,g),patterns:{},sortKey:de};w.push(ye)}R&&w.sort((L,$)=>L.sortKey-$.sortKey);let P=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new $c,P=g.projection);for(const L of w){const{geometry:$,index:q,sourceLayerIndex:Y}=L,ne=o[q].feature;this.addFeature(L,$,q,l.availableImages,f,P,l.brightness),l.featureIndex.insert(ne,$,q,Y,this.index)}}update(o,l,f,g,b,w,R){this.programConfigurations.updatePaintArrays(o,l,b,f,g,w,R)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ky.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,S_.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,l,f,g,b,w,R){for(const P of l)for(const L of P){const $=L.x,q=L.y;if($<0||$>=xn||q<0||q>=xn)continue;if(w){const re=w.projectTilePoint($,q,b),de=w.upVector(b,$,q),ye=this.globeExtVertexArray;Qn(ye,re,de),Qn(ye,re,de),Qn(ye,re,de),Qn(ye,re,de)}const Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),ne=Y.vertexLength;Fn(this.layoutVertexArray,$,q,-1,-1),Fn(this.layoutVertexArray,$,q,1,-1),Fn(this.layoutVertexArray,$,q,1,1),Fn(this.layoutVertexArray,$,q,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+2,ne+3),Y.vertexLength+=4,Y.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,b,R)}}function hr(u,o){for(let l=0;l<u.length;l++)if(pi(o,u[l]))return!0;for(let l=0;l<o.length;l++)if(pi(u,o[l]))return!0;return!!_r(u,o)}function Mr(u,o,l){return!!pi(u,o)||!!Ar(o,u,l)}function ur(u,o){if(u.length===1)return di(o,u[0]);for(let l=0;l<o.length;l++){const f=o[l];for(let g=0;g<f.length;g++)if(pi(u,f[g]))return!0}for(let l=0;l<u.length;l++)if(di(o,u[l]))return!0;for(let l=0;l<o.length;l++)if(_r(u,o[l]))return!0;return!1}function Lr(u,o,l){if(u.length>1){if(_r(u,o))return!0;for(let f=0;f<o.length;f++)if(Ar(o[f],u,l))return!0}for(let f=0;f<u.length;f++)if(Ar(u[f],o,l))return!0;return!1}function _r(u,o){if(u.length===0||o.length===0)return!1;for(let l=0;l<u.length-1;l++){const f=u[l],g=u[l+1];for(let b=0;b<o.length-1;b++)if(ar(f,g,o[b],o[b+1]))return!0}return!1}function ar(u,o,l,f){return ui(u,l,f)!==ui(o,l,f)&&ui(u,o,l)!==ui(u,o,f)}function Zr(u,o,l){return(u.x-l.x)*(o.y-l.y)-(u.y-l.y)*(o.x-l.x)}function Ei(u,o,l,f){const g=Zr(u,o,f),b=Zr(u,o,l);if(Math.sign(g)===Math.sign(b))return;const w=Zr(l,f,u),R=w+b-g;return Math.sign(w)!==Math.sign(R)?[w/(w-R),b/(b-g)]:void 0}function Ar(u,o,l){const f=l*l;if(o.length===1)return u.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(Kr(u,o[g-1],o[g])<f)return!0;return!1}function Kr(u,o,l){const f=o.distSqr(l);if(f===0)return u.distSqr(o);const g=((u.x-o.x)*(l.x-o.x)+(u.y-o.y)*(l.y-o.y))/f;return u.distSqr(g<0?o:g>1?l:l.sub(o)._mult(g)._add(o))}function di(u,o){let l,f,g,b=!1;for(let w=0;w<u.length;w++){l=u[w];for(let R=0,P=l.length-1;R<l.length;P=R++)f=l[R],g=l[P],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(b=!b)}return b}function pi(u,o){let l=!1;for(let f=0,g=u.length-1;f<u.length;g=f++){const b=u[f],w=u[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(l=!l)}return l}function Ci(u,o,l,f,g){for(const w of u)if(o<=w.x&&l<=w.y&&f>=w.x&&g>=w.y)return!0;const b=[new mn(o,l),new mn(o,g),new mn(f,g),new mn(f,l)];if(u.length>2){for(const w of b)if(pi(u,w))return!0}for(let w=0;w<u.length-1;w++)if(Ji(u[w],u[w+1],b))return!0;return!1}function Ji(u,o,l){const f=l[0],g=l[2];if(u.x<f.x&&o.x<f.x||u.x>g.x&&o.x>g.x||u.y<f.y&&o.y<f.y||u.y>g.y&&o.y>g.y)return!1;const b=ui(u,o,l[0]);return b!==ui(u,o,l[1])||b!==ui(u,o,l[2])||b!==ui(u,o,l[3])}function Ao(u,o,l,f,g,b){let w=o.y-u.y,R=u.x-o.x;if(b=b||0){const P=w*w+R*R;if(P===0)return!0;const L=Math.sqrt(P);w/=L,R/=L}return!((l.x-u.x)*w+(l.y-u.y)*R-b<0||(f.x-u.x)*w+(f.y-u.y)*R-b<0||(g.x-u.x)*w+(g.y-u.y)*R-b<0)}function eo(u,o,l,f,g,b,w){return!(Ao(u,o,f,g,b,w)||Ao(o,l,f,g,b,w)||Ao(l,u,f,g,b,w)||Ao(f,g,u,o,l,w)||Ao(g,b,u,o,l,w)||Ao(b,f,u,o,l,w))}function Tr(u,o,l){const f=o.paint.get(u).value;return f.kind==="constant"?f.value:l.programConfigurations.get(o.id).getMaxValue(u)}function Ui(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function ai(u,o,l,f,g){if(!o[0]&&!o[1])return u;const b=mn.convert(o)._mult(g);l==="viewport"&&b._rotate(-f);const w=[];for(let R=0;R<u.length;R++)w.push(u[R].sub(b));return w}function gi(u,o,l,f){const g=mn.convert(u)._mult(f);return o==="viewport"&&g._rotate(-l),g}let yi,to;function us(u,o,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[u*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}zn(Wn,"CircleBucket",{omit:["layers"]});class qi{constructor(o,l,f){this.z=o,this.x=l,this.y=f,this.key=Qo(0,o,o,l,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l){const f=function(b,w,R){var P=us(256*b,256*(w=Math.pow(2,R)-w-1),R),L=us(256*(b+1),256*(w+1),R);return P[0]+","+P[1]+","+L[0]+","+L[1]}(this.x,this.y,this.z),g=function(b,w,R){let P,L="";for(let $=b;$>0;$--)P=1<<$-1,L+=(w&P?1:0)+(R&P?2:0);return L}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Wo{constructor(o,l){this.wrap=o,this.canonical=l,this.key=Qo(o,l.z,l.z,l.x,l.y)}}class zi{constructor(o,l,f,g,b){this.overscaledZ=o,this.wrap=l,this.canonical=new qi(f,+g,+b),this.key=l===0&&o===f?this.canonical.key:Qo(l,o,f,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const l=this.canonical.z-o;return o>this.canonical.z?new zi(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zi(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l=!0){if(this.overscaledZ===o&&l)return this.key;if(o>this.canonical.z)return Qo(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return Qo(this.wrap*+l,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new zi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new zi(l,this.wrap,l,f,g),new zi(l,this.wrap,l,f+1,g),new zi(l,this.wrap,l,f,g+1),new zi(l,this.wrap,l,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new zi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new zi(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Wo(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Qo(u,o,l,f,g){const b=1<<Math.min(l,22);let w=b*(g%b)+f%b;return u&&l<22&&(w+=b*b*((u<0?-2*u-1:2*u)%(1<<2*(22-l)))),16*(32*w+l)+(o-l)}const Fa=[u=>{let o=u.canonical.x-1,l=u.wrap;return o<0&&(o=(1<<u.canonical.z)-1,l--),new zi(u.overscaledZ,l,u.canonical.z,o,u.canonical.y)},u=>{let o=u.canonical.x+1,l=u.wrap;return o===1<<u.canonical.z&&(o=0,l++),new zi(u.overscaledZ,l,u.canonical.z,o,u.canonical.y)},u=>new zi(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,(u.canonical.y===0?1<<u.canonical.z:u.canonical.y)-1),u=>new zi(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y===(1<<u.canonical.z)-1?0:u.canonical.y+1)];zn(qi,"CanonicalTileID"),zn(zi,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const _l=fi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ba}=_l,xl=fi([{name:"a_pos_3",components:3,type:"Int16"}]);var Wc=fi([{name:"a_pos",type:"Int16",components:2}]);class bl{constructor(o,l){this.pos=o,this.dir=l}intersectsPlane(o,l,f){const g=Dr(l,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*l[0]+(o[1]-this.pos[1])*l[1])/g;return f[0]=this.pos[0]+this.dir[0]*b,f[1]=this.pos[1]+this.dir[1]*b,!0}}class jl{constructor(o,l){this.pos=o,this.dir=l}intersectsPlane(o,l,f){const g=ot(l,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*l[0]+(o[1]-this.pos[1])*l[1]+(o[2]-this.pos[2])*l[2])/g;return f[0]=this.pos[0]+this.dir[0]*b,f[1]=this.pos[1]+this.dir[1]*b,f[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,l,f){if(function(ne,re){var de=ne[0],ye=ne[1],be=ne[2],Le=re[0],Ie=re[1],he=re[2];return Math.abs(de-Le)<=m*Math.max(1,Math.abs(de),Math.abs(Le))&&Math.abs(ye-Ie)<=m*Math.max(1,Math.abs(ye),Math.abs(Ie))&&Math.abs(be-he)<=m*Math.max(1,Math.abs(be),Math.abs(he))}(this.pos,o)||l===0)return f[0]=f[1]=f[2]=0,!1;const[g,b,w]=this.dir,R=this.pos[0]-o[0],P=this.pos[1]-o[1],L=this.pos[2]-o[2],$=g*g+b*b+w*w,q=2*(R*g+P*b+L*w),Y=q*q-4*$*(R*R+P*P+L*L-l*l);if(Y<0){const ne=Math.max(-q/2,0),re=R+g*ne,de=P+b*ne,ye=L+w*ne,be=Math.hypot(re,de,ye);return f[0]=re*l/be,f[1]=de*l/be,f[2]=ye*l/be,!1}{const ne=(-q-Math.sqrt(Y))/(2*$);if(ne<0){const re=Math.hypot(R,P,L);return f[0]=R*l/re,f[1]=P*l/re,f[2]=L*l/re,!1}return f[0]=R+g*ne,f[1]=P+b*ne,f[2]=L+w*ne,!0}}}class sa{constructor(o,l,f,g,b){this.TL=o,this.TR=l,this.BR=f,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,l,f){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],R=[-1,-1,1],P=Dt(g,g,o),L=Dt(b,b,o),$=Dt(w,w,o),q=Dt(R,R,o);return new sa(P,L,$,q,l/f)}}function ih(u,o,l){let f=1/0,g=-1/0;const b=[];for(const w of u){Ct(b,w,o);const R=ot(b,l);f=Math.min(f,R),g=Math.max(g,R)}return[f,g]}function ja(u,o){let l=!0;for(let f=0;f<u.planes.length;f++){const g=u.planes[f];let b=0;for(let w=0;w<o.length;w++)b+=ot(g,o[w])+g[3]>=0;if(b===0)return 0;b!==o.length&&(l=!1)}return l?2:1}function gg(u,o){for(const l of u.projections){const f=ih(o,u.points[0],l.axis);if(l.projection[1]<f[0]||l.projection[0]>f[1])return 0}return 1}function yg(u,o){let l=0;const f=[0,0,0,0];for(let w=0;w<u.length;w++)f[0]=u[w][0],f[1]=u[w][1],f[2]=u[w][2],f[3]=1,(g=f)[0]*(b=o)[0]+g[1]*b[1]+g[2]*b[2]+g[3]*b[3]>=0&&l++;var g,b;return l}class vg{constructor(o,l){this.points=o||new Array(8).fill([0,0,0]),this.planes=l||new Array(6).fill([0,0,0,0]),this.bounds=Fi.fromPoints(this.points),this.projections=[],this.frustumEdges=[Ct([],this.points[2],this.points[3]),Ct([],this.points[0],this.points[3]),Ct([],this.points[4],this.points[0]),Ct([],this.points[5],this.points[1]),Ct([],this.points[6],this.points[2]),Ct([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const g=[0,-f[2],f[1]],b=[f[2],0,-f[0]];this.projections.push({axis:g,projection:ih(this.points,this.points[0],g)}),this.projections.push({axis:b,projection:ih(this.points,this.points[0],b)})}}static fromInvProjectionMatrix(o,l,f,g){const b=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const $=Bn([],L,o),q=1/$[3]/l*b;return(Y=$)[0]=(ne=$)[0]*(re=[q,q,g?1/$[3]:q,q])[0],Y[1]=ne[1]*re[1],Y[2]=ne[2]*re[2],Y[3]=ne[3]*re[3],Y;var Y,ne,re}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const $=wt([],st([],Ct([],w[L[0]],w[L[1]]),Ct([],w[L[2]],w[L[1]]))),q=-ot($,w[L[1]]);return $.concat(q)}),P=[];for(let L=0;L<w.length;L++)P.push([w[L][0],w[L][1],w[L][2]]);return new vg(P,R)}intersectsPrecise(o,l,f){for(let g=0;g<l.length;g++)if(!yg(o,l[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!yg(o,this.planes[g]))return 0;for(const g of f)for(const b of this.frustumEdges){const w=st([],g,b),R=Me(w);if(R===0)continue;Ce(w,w,1/R);const P=ih(this.points,this.points[0],w),L=ih(o,this.points[0],w);if(P[0]>L[1]||L[0]>P[1])return 0}return 1}containsPoint(o){for(const l of this.planes){const f=l[3];if(ot([l[0],l[1],l[2]],o)+f<0)return!1}return!0}}class Fi{static fromPoints(o){const l=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)We(l,l,g),Fe(f,f,g);return new Fi(l,f)}static fromTileIdAndHeight(o,l,f){const g=1<<o.canonical.z,b=o.canonical.x,w=o.canonical.y;return new Fi([b/g,w/g,l],[(b+1)/g,(w+1)/g,f])}static applyTransform(o,l){const f=o.getCorners();for(let g=0;g<f.length;++g)Dt(f[g],f[g],l);return Fi.fromPoints(f)}static applyTransformFast(o,l){const f=[l[12],l[13],l[14]],g=[...f];for(let b=0;b<3;b++)for(let w=0;w<3;w++){const R=l[4*w+b],P=R*o.min[w],L=R*o.max[w];f[b]+=Math.min(P,L),g[b]+=Math.max(P,L)}return new Fi(f,g)}static projectAabbCorners(o,l){const f=o.getCorners();for(let g=0;g<f.length;++g)Dt(f[g],f[g],l);return f}constructor(o,l){this.min=o,this.max=l,this.center=Ce([],Ae([],this.min,this.max),.5)}quadrant(o){const l=[o%2==0,o<2],f=we(this.min),g=we(this.max);for(let b=0;b<l.length;b++)f[b]=l[b]?this.min[b]:this.center[b],g[b]=l[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Fi(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,l=this.max;return[[o[0],o[1],o[2]],[l[0],o[1],o[2]],[l[0],l[1],o[2]],[o[0],l[1],o[2]],[o[0],o[1],l[2]],[l[0],o[1],l[2]],[l[0],l[1],l[2]],[o[0],l[1],l[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?ja(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?ja(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,l){return l||this.intersects(o)?gg(o,this.getCorners()):0}intersectsPreciseFlat(o,l){return l||this.intersectsFlat(o)?gg(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let l=0;l<3;++l)if(this.min[l]>o.max[l]||o.min[l]>this.max[l])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],o.min[l]),this.max[l]=Math.max(this.max[l],o.max[l])}encapsulatePoint(o){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],o[l]),this.max[l]=Math.max(this.max[l],o[l])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}function td(u){return u*E/pe}zn(Fi,"Aabb");const _g=[new Fi([te,te,te],[J,J,J]),new Fi([te,te,te],[0,0,J]),new Fi([0,te,te],[J,0,J]),new Fi([te,0,te],[0,J,J]),new Fi([0,0,te],[J,J,J])];function xg(u,o,l,f=!0){const g=Ce([],u._camera.position,u.worldSize),b=[o,l,1,1];Bn(b,b,u.pixelMatrixInverse),Ut(b,b,1/b[3]);const w=wt([],Ct([],b,g)),R=u.globeMatrix,P=[R[12],R[13],R[14]],L=Ct([],P,g),$=Me(L),q=wt([],L),Y=u.worldSize/(2*Math.PI),ne=ot(q,w),re=Math.asin(Y/$);if(re<Math.acos(ne)){if(!f)return null;const at=[],ht=[];Ce(at,w,$/ne),wt(ht,Ct(ht,at,L)),wt(w,Ae(w,L,Ce(w,ht,Math.tan(re)*$)))}const de=[];new jl(g,w).closestPointOnSphere(P,Y,de);const ye=wt([],Jr(R,0)),be=wt([],Jr(R,1)),Le=wt([],Jr(R,2)),Ie=ot(ye,de),he=ot(be,de),Ee=ot(Le,de),Oe=le(Math.asin(-he/Y));let Ve=le(Math.atan2(Ie,Ee));Ve=u.center.lng+function(at,ht){const zt=(ht-at+180)%360-180;return zt<-180?zt+360:zt}(u.center.lng,Ve);const tt=Ye(Ve),it=Ze(Ge(Oe),0,1);return new Tt(tt,it)}class KE{constructor(o,l,f){this.a=Ct([],o,f),this.b=Ct([],l,f),this.center=f;const g=wt([],this.a),b=wt([],this.b);this.angle=Math.acos(ot(g,b))}}function Sx(u,o){if(u.angle===0)return null;let l;return l=u.a[o]===0?1/u.angle*.5*Math.PI:1/u.angle*Math.atan(u.b[o]/u.a[o]/Math.sin(u.angle)-1/Math.tan(u.angle)),l<0||l>1?null:function(f,g,b,w){const R=Math.sin(b);return f*(Math.sin((1-w)*b)/R)+g*(Math.sin(w*b)/R)}(u.a[o],u.b[o],u.angle,Ze(l,0,1))+u.center[o]}function nd(u){if(u.z<=1)return _g[u.z+2*u.y+u.x];const o=X1(Ex(u));return Fi.fromPoints(o)}function rd(u,o,l){return Ce(u,u,1-l),He(u,u,o,l)}function Tx(u,o,l){for(const f of u)Dt(f,f,o),Ce(f,f,l)}function QE(u,o,l,f){const g=o/u.worldSize,b=u.globeMatrix;if(l.z<=1){const it=nd(l).getCorners();return Tx(it,b,g),Fi.fromPoints(it)}const w=Ex(l,f),R=X1(w,E+td(u._tileCoverLift));Tx(R,b,g);const P=Number.MAX_VALUE,L=[-P,-P,-P],$=[P,P,P];if(w.contains(u.center)){for(const ht of R)We($,$,ht),Fe(L,L,ht);L[2]=0;const it=u.point,at=[it.x*g,it.y*g,0];return We($,$,at),Fe(L,L,at),new Fi($,L)}if(u._tileCoverLift>0){for(const it of R)We($,$,it),Fe(L,L,it);return new Fi($,L)}const q=[b[12]*g,b[13]*g,b[14]*g],Y=w.getCenter(),ne=Ze(u.center.lat,-85.051129,mt),re=Ze(Y.lat,-85.051129,mt),de=Ye(u.center.lng),ye=Ge(ne);let be=de-Ye(Y.lng);const Le=ye-Ge(re);be>.5?be-=1:be<-.5&&(be+=1);let Ie=0;Math.abs(be)>Math.abs(Le)?Ie=be>=0?1:3:(Ie=Le>=0?0:2,He(q,q,[b[4]*g,b[5]*g,b[6]*g],-Math.sin(ie(Le>=0?w.getSouth():w.getNorth()))*E));const he=R[Ie],Ee=R[(Ie+1)%4],Oe=new KE(he,Ee,q),Ve=[Sx(Oe,0)||he[0],Sx(Oe,1)||he[1],Sx(Oe,2)||he[2]],tt=Af(u.zoom);if(tt>0){const it=function({x:ht,y:zt,z:nn},Xt,Qt,ln,It){const Kt=1/(1<<nn);let At=ht*Kt,kt=At+Kt,un=zt*Kt,pn=un+Kt,er=0;const qn=(At+kt)/2-ln;return qn>.5?er=-1:qn<-.5&&(er=1),At=((At+er)*Xt-(ln*=Xt))*Qt+ln,kt=((kt+er)*Xt-ln)*Qt+ln,un=(un*Xt-(It*=Xt))*Qt+It,pn=(pn*Xt-It)*Qt+It,[[At,pn,0],[kt,pn,0],[kt,un,0],[At,un,0]]}(l,o,u._pixelsPerMercatorPixel,de,ye);for(let ht=0;ht<R.length;ht++)rd(R[ht],it[ht],tt);const at=Ae([],it[Ie],it[(Ie+1)%4]);Ce(at,at,.5),rd(Ve,at,tt)}for(const it of R)We($,$,it),Fe(L,L,it);return $[2]=Math.min(he[2],Ee[2]),We($,$,Ve),Fe(L,L,Ve),new Fi($,L)}function Ex({x:u,y:o,z:l},f=!1){const g=1/(1<<l),b=new me(Je(u*g),o===(1<<l)-1&&f?-90:nt((o+1)*g)),w=new me(Je((u+1)*g),o===0&&f?90:nt(o*g));return new Re(b,w)}function X1(u,o=E){const l=ie(u.getNorth()),f=ie(u.getSouth()),g=Math.cos(l),b=Math.cos(f),w=Math.sin(l),R=Math.sin(f),P=u.getWest(),L=u.getEast();return[oe(b,R,P,o),oe(b,R,L,o),oe(g,w,L,o),oe(g,w,P,o)]}function Oy(u,o,l,f){const g=1<<l.z,b=(u/xn+l.x)/g;return ge(nt((o/xn+l.y)/g),Je(b),f)}function A_({min:u,max:o}){return N/Math.max(o[0]-u[0],o[1]-u[1],o[2]-u[2])}const bg=new Float64Array(16);function wg(u){const o=A_(u),l=ce(bg,[o,o,o]);return H(l,l,Nt([],u.min))}function Cx(u){const o=(f=u.min,(l=bg)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=f[0],l[13]=f[1],l[14]=f[2],l[15]=1,l);var l,f;const g=1/A_(u);return G(o,o,[g,g,g])}function Mx(u){const o=xn/(2*Math.PI);return u/(2*Math.PI)/o}function Z1(u,o){return xn/(512*Math.pow(2,u))*A_(nd(o))}function K1(u,o,l,f,g){const b=Mx(l),w=[u,o,-l/(2*Math.PI)],R=B(new Float64Array(16));return H(R,R,w),G(R,R,[b,b,b]),X(R,R,ie(-g)),Q(R,R,ie(-f)),R}function Af(u){return et(D,O,u)}function Q1(u,o){const l=ge(o.lat,o.lng),f=function(re){const de=ge(re._center.lat,re._center.lng);let ye=st([],Se(0,1,0),de);const be=fe([],-re.angle,de);ye=Dt(ye,ye,be),fe(be,-re._pitch,ye);const Le=wt([],de);return Ce(Le,Le,td(re.cameraToCenterDistance/re.pixelsPerMeter)),Dt(Le,Le,be),Ae([],de,Le)}(u);return w=(g=_e([],f,l))[0],R=g[1],P=g[2],L=(b=l)[0],$=b[1],q=b[2],ne=(Y=Math.sqrt(w*w+R*R+P*P)*Math.sqrt(L*L+$*$+q*q))&&ot(g,b)/Y,Math.acos(Math.min(Math.max(ne,-1),1));var g,b,w,R,P,L,$,q,Y,ne}function Ly(u,o){return Q1(u,o)>Math.PI/2*1.01}const J1=ie(85),JE=Math.cos(J1),ss=Math.sin(J1),ew=k(),eC=u=>{const o=[];return u.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),u.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function tw(u,o,l,f,g,b,w,R,P){if(b&&u.queryGeometry.isAboveHorizon)return!1;b&&(P*=u.pixelToTileUnitsFactor);const L=u.tileID.canonical,$=l.projection.upVectorScale(L,l.center.lat,l.worldSize).metersToTile;for(const q of o)for(const Y of q){const ne=Y.add(R),re=g&&l.elevation?l.elevation.exaggeration()*g.getElevationAt(ne.x,ne.y,!0):0,de=l.projection.projectTilePoint(ne.x,ne.y,L);if(re>0){const Ie=l.projection.upVector(L,ne.x,ne.y);de.x+=Ie[0]*$*re,de.y+=Ie[1]*$*re,de.z+=Ie[2]*$*re}const ye=b?ne:GP(de.x,de.y,de.z,f),be=b?u.tilespaceRays.map(Ie=>Ax(Ie,re)):u.queryGeometry.screenGeometry,Le=Bn([],[de.x,de.y,de.z,1],f);if(!w&&b?P*=Le[3]/l.cameraToCenterDistance:w&&!b&&(P*=l.cameraToCenterDistance/Le[3]),b){const Ie=nt((Y.y/xn+L.y)/(1<<L.z));P/=l.projection.pixelsPerMeter(Ie,1)/Ne(1,Ie)}if(Mr(be,ye,P))return!0}return!1}function GP(u,o,l,f){const g=Bn([],[u,o,l,1],f);return new mn(g[0]/g[3],g[1]/g[3])}const tC=Se(0,0,0),YP=Se(0,0,1);function Ax(u,o){const l=xe();return tC[2]=o,u.intersectsPlane(tC,YP,l),new mn(l[0],l[1])}class Sg extends Wn{}let Rx,R_,Dx,Vp;function id(u,{width:o,height:l},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*l*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*l*f);return u.width=o,u.height=l,u.data=g,u}function zy(u,o,l){const{width:f,height:g}=o;f===u.width&&g===u.height||(nw(u,o,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,f),height:Math.min(u.height,g)},l,null),u.width=f,u.height=g,u.data=o.data)}function nw(u,o,l,f,g,b,w,R){if(g.width===0||g.height===0)return o;if(g.width>u.width||g.height>u.height||l.x>u.width-g.width||l.y>u.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const P=u.data,L=o.data,$=b===4&&R;for(let q=0;q<g.height;q++){const Y=((l.y+q)*u.width+l.x)*b,ne=((f.y+q)*o.width+f.x)*b;if($)for(let re=0;re<g.width;re++){const de=Y+re*b+3,ye=ne+re*b;L[ye+0]=255,L[ye+1]=255,L[ye+2]=255,L[ye+3]=P[de]}else if(w)for(let re=0;re<g.width;re++){const de=Y+re*b,ye=ne+re*b,be=P[de+3],Le=new bi(P[de+0]/255*be,P[de+1]/255*be,P[de+2]/255*be,be).toRenderColor(w).toArray();L[ye+0]=Le[0],L[ye+1]=Le[1],L[ye+2]=Le[2],L[ye+3]=Le[3]}else for(let re=0;re<g.width*b;re++)L[ne+re]=P[Y+re]}return o}zn(Sg,"HeatmapBucket",{omit:["layers"]});class Rf{constructor(o,l){id(this,o,1,l)}resize(o){zy(this,new Rf(o),1)}clone(){return new Rf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,f,g,b){nw(o,l,f,g,b,1,null)}}class qs{constructor(o,l){id(this,o,4,l)}resize(o){zy(this,new qs(o),4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new qs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,f,g,b,w,R){nw(o,l,f,g,b,4,w,R)}}class rw{constructor(o,l){this.width=o.width,this.height=o.height,this.data=l instanceof Uint8Array?new Float32Array(l.buffer):l}}function Fy(u){const o={},l=u.resolution||256,f=u.clips?u.clips.length:1,g=u.image||new qs({width:l,height:f}),b=(w,R,P)=>{o[u.evaluationKey]=P;const L=u.expression.evaluate(o);L&&(g.data[w+R+0]=Math.floor(255*L.r/L.a),g.data[w+R+1]=Math.floor(255*L.g/L.a),g.data[w+R+2]=Math.floor(255*L.b/L.a),g.data[w+R+3]=Math.floor(255*L.a))};if(u.clips)for(let w=0,R=0;w<f;++w,R+=4*l)for(let P=0,L=0;P<l;P++,L+=4){const $=P/(l-1),{start:q,end:Y}=u.clips[w];b(R,L,q*(1-$)+Y*$)}else for(let w=0,R=0;w<l;w++,R+=4)b(0,R,w/(l-1));return g}zn(Rf,"AlphaImage"),zn(qs,"RGBAImage");const XP=fi([{name:"a_pos",components:2,type:"Int16"}],4),iw=fi([{name:"a_road_z_offset",components:1,type:"Float32"}],4),nC=fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),rC=fi([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function D_(u,o,l=2){const f=o&&o.length,g=f?o[0]*l:u.length;let b=Px(u,0,g,l,!0);const w=[];if(!b||b.next===b.prev)return w;let R,P,L;if(f&&(b=function($,q,Y,ne){const re=[];for(let de=0,ye=q.length;de<ye;de++){const be=Px($,q[de]*ne,de<ye-1?q[de+1]*ne:$.length,ne,!1);be===be.next&&(be.steiner=!0),re.push(oC(be))}re.sort(fo);for(let de=0;de<re.length;de++)Y=ow(re[de],Y);return Y}(u,o,b,l)),u.length>80*l){R=1/0,P=1/0;let $=-1/0,q=-1/0;for(let Y=l;Y<g;Y+=l){const ne=u[Y],re=u[Y+1];ne<R&&(R=ne),re<P&&(P=re),ne>$&&($=ne),re>q&&(q=re)}L=Math.max($-R,q-P),L=L!==0?32767/L:0}return P_(b,w,l,R,P,L,0),w}function Px(u,o,l,f,g){let b;if(g===function(w,R,P,L){let $=0;for(let q=R,Y=P-L;q<P;q+=L)$+=(w[Y]-w[q])*(w[q+1]+w[Y+1]),Y=q;return $}(u,o,l,f)>0)for(let w=o;w<l;w+=f)b=Go(w/f|0,u[w],u[w+1],b);else for(let w=l-f;w>=o;w-=f)b=Go(w/f|0,u[w],u[w+1],b);return b&&Tg(b,b.next)&&(Eg(b),b=b.next),b}function Df(u,o){if(!u)return u;o||(o=u);let l,f=u;do if(l=!1,f.steiner||!Tg(f,f.next)&&Jo(f.prev,f,f.next)!==0)f=f.next;else{if(Eg(f),f=o=f.prev,f===f.next)break;l=!0}while(l||f!==o);return o}function P_(u,o,l,f,g,b,w){if(!u)return;!w&&b&&function(P,L,$,q){let Y=P;do Y.z===0&&(Y.z=k_(Y.x,Y.y,L,$,q)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==P);Y.prevZ.nextZ=null,Y.prevZ=null,function(ne){let re,de=1;do{let ye,be=ne;ne=null;let Le=null;for(re=0;be;){re++;let Ie=be,he=0;for(let Oe=0;Oe<de&&(he++,Ie=Ie.nextZ,Ie);Oe++);let Ee=de;for(;he>0||Ee>0&&Ie;)he!==0&&(Ee===0||!Ie||be.z<=Ie.z)?(ye=be,be=be.nextZ,he--):(ye=Ie,Ie=Ie.nextZ,Ee--),Le?Le.nextZ=ye:ne=ye,ye.prevZ=Le,Le=ye;be=Ie}Le.nextZ=null,de*=2}while(re>1)}(Y)}(u,f,g,b);let R=u;for(;u.prev!==u.next;){const P=u.prev,L=u.next;if(b?I_(u,f,g,b):ZP(u))o.push(P.i,u.i,L.i),Eg(u),u=L.next,R=L.next;else if((u=L)===R){w?w===1?P_(u=KP(Df(u),o),o,l,f,g,b,2):w===2&&iC(u,o,l,f,g,b):P_(Df(u),o,l,f,g,b,1);break}}}function ZP(u){const o=u.prev,l=u,f=u.next;if(Jo(o,l,f)>=0)return!1;const g=o.x,b=l.x,w=f.x,R=o.y,P=l.y,L=f.y,$=Math.min(g,b,w),q=Math.min(R,P,L),Y=Math.max(g,b,w),ne=Math.max(R,P,L);let re=f.next;for(;re!==o;){if(re.x>=$&&re.x<=Y&&re.y>=q&&re.y<=ne&&Pf(g,R,b,P,w,L,re.x,re.y)&&Jo(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function I_(u,o,l,f){const g=u.prev,b=u,w=u.next;if(Jo(g,b,w)>=0)return!1;const R=g.x,P=b.x,L=w.x,$=g.y,q=b.y,Y=w.y,ne=Math.min(R,P,L),re=Math.min($,q,Y),de=Math.max(R,P,L),ye=Math.max($,q,Y),be=k_(ne,re,o,l,f),Le=k_(de,ye,o,l,f);let Ie=u.prevZ,he=u.nextZ;for(;Ie&&Ie.z>=be&&he&&he.z<=Le;){if(Ie.x>=ne&&Ie.x<=de&&Ie.y>=re&&Ie.y<=ye&&Ie!==g&&Ie!==w&&Pf(R,$,P,q,L,Y,Ie.x,Ie.y)&&Jo(Ie.prev,Ie,Ie.next)>=0||(Ie=Ie.prevZ,he.x>=ne&&he.x<=de&&he.y>=re&&he.y<=ye&&he!==g&&he!==w&&Pf(R,$,P,q,L,Y,he.x,he.y)&&Jo(he.prev,he,he.next)>=0))return!1;he=he.nextZ}for(;Ie&&Ie.z>=be;){if(Ie.x>=ne&&Ie.x<=de&&Ie.y>=re&&Ie.y<=ye&&Ie!==g&&Ie!==w&&Pf(R,$,P,q,L,Y,Ie.x,Ie.y)&&Jo(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.prevZ}for(;he&&he.z<=Le;){if(he.x>=ne&&he.x<=de&&he.y>=re&&he.y<=ye&&he!==g&&he!==w&&Pf(R,$,P,q,L,Y,he.x,he.y)&&Jo(he.prev,he,he.next)>=0)return!1;he=he.nextZ}return!0}function KP(u,o){let l=u;do{const f=l.prev,g=l.next.next;!Tg(f,g)&&sC(f,l,l.next,g)&&By(f,g)&&By(g,f)&&(o.push(f.i,l.i,g.i),Eg(l),Eg(l.next),l=u=g),l=l.next}while(l!==u);return Df(l)}function iC(u,o,l,f,g,b){let w=u;do{let R=w.next.next;for(;R!==w.prev;){if(w.i!==R.i&&Ox(w,R)){let P=L_(w,R);return w=Df(w,w.next),P=Df(P,P.next),P_(w,o,l,f,g,b,0),void P_(P,o,l,f,g,b,0)}R=R.next}w=w.next}while(w!==u)}function fo(u,o){let l=u.x-o.x;return l===0&&(l=u.y-o.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(o.next.y-o.y)/(o.next.x-o.x)),l}function ow(u,o){const l=function(g,b){let w=b;const R=g.x,P=g.y;let L,$=-1/0;if(Tg(g,w))return w;do{if(Tg(g,w.next))return w.next;if(P<=w.y&&P>=w.next.y&&w.next.y!==w.y){const de=w.x+(P-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(de<=R&&de>$&&($=de,L=w.x<w.next.x?w:w.next,de===R))return L}w=w.next}while(w!==b);if(!L)return null;const q=L,Y=L.x,ne=L.y;let re=1/0;w=L;do{if(R>=w.x&&w.x>=Y&&R!==w.x&&kx(P<ne?R:$,P,Y,ne,P<ne?$:R,P,w.x,w.y)){const de=Math.abs(P-w.y)/(R-w.x);By(w,g)&&(de<re||de===re&&(w.x>L.x||w.x===L.x&&Ix(L,w)))&&(L=w,re=de)}w=w.next}while(w!==q);return L}(u,o);if(!l)return o;const f=L_(l,u);return Df(f,f.next),Df(l,l.next)}function Ix(u,o){return Jo(u.prev,u,o.prev)<0&&Jo(o.next,u,u.next)<0}function k_(u,o,l,f,g){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*g|0)|u<<8))|u<<4))|u<<2))|u<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function oC(u){let o=u,l=u;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==u);return l}function kx(u,o,l,f,g,b,w,R){return(g-w)*(o-R)>=(u-w)*(b-R)&&(u-w)*(f-R)>=(l-w)*(o-R)&&(l-w)*(b-R)>=(g-w)*(f-R)}function Pf(u,o,l,f,g,b,w,R){return!(u===w&&o===R)&&kx(u,o,l,f,g,b,w,R)}function Ox(u,o){return u.next.i!==o.i&&u.prev.i!==o.i&&!function(l,f){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==f.i&&g.next.i!==f.i&&sC(g,g.next,l,f))return!0;g=g.next}while(g!==l);return!1}(u,o)&&(By(u,o)&&By(o,u)&&function(l,f){let g=l,b=!1;const w=(l.x+f.x)/2,R=(l.y+f.y)/2;do g.y>R!=g.next.y>R&&g.next.y!==g.y&&w<(g.next.x-g.x)*(R-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==l);return b}(u,o)&&(Jo(u.prev,u,o.prev)||Jo(u,o.prev,o))||Tg(u,o)&&Jo(u.prev,u,u.next)>0&&Jo(o.prev,o,o.next)>0)}function Jo(u,o,l){return(o.y-u.y)*(l.x-o.x)-(o.x-u.x)*(l.y-o.y)}function Tg(u,o){return u.x===o.x&&u.y===o.y}function sC(u,o,l,f){const g=O_(Jo(u,o,l)),b=O_(Jo(u,o,f)),w=O_(Jo(l,f,u)),R=O_(Jo(l,f,o));return g!==b&&w!==R||!(g!==0||!Lx(u,l,o))||!(b!==0||!Lx(u,f,o))||!(w!==0||!Lx(l,u,f))||!(R!==0||!Lx(l,o,f))}function Lx(u,o,l){return o.x<=Math.max(u.x,l.x)&&o.x>=Math.min(u.x,l.x)&&o.y<=Math.max(u.y,l.y)&&o.y>=Math.min(u.y,l.y)}function O_(u){return u>0?1:u<0?-1:0}function By(u,o){return Jo(u.prev,u,u.next)<0?Jo(u,o,u.next)>=0&&Jo(u,u.prev,o)>=0:Jo(u,o,u.prev)<0||Jo(u,u.next,o)<0}function L_(u,o){const l=_a(u.i,u.x,u.y),f=_a(o.i,o.x,o.y),g=u.next,b=o.prev;return u.next=o,o.prev=u,l.next=g,g.prev=l,f.next=l,l.prev=f,b.next=f,f.prev=b,f}function Go(u,o,l,f){const g=_a(u,o,l);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function Eg(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function _a(u,o,l){return{i:u,x:o,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function zx(u,o){const l=u.length;if(l<=1)return[u];const f=[];let g,b;for(let w=0;w<l;w++){const R=ti(u[w]);R!==0&&(u[w].area=Math.abs(R),b===void 0&&(b=R<0),b===R<0?(g&&f.push(g),g=[u[w]]):g.push(u[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(Fu(f[w],o,1,f[w].length-1,sw),f[w]=f[w].slice(0,o));return f}function sw(u,o){return o.area-u.area}function Fx(u,o,l=1){if(!u)return null;const f=typeof u=="string"?Ia.from(u).getPrimary():u.getPrimary(),g=typeof u=="string"?null:u.getSecondary();for(const b of[f,g]){if(!b)continue;const w=b.id.toString();o.has(w)||o.set(w,[]),b.scaleSelf(l),o.get(w).push(b)}return{primary:f.toString(),secondary:g?g.toString():null}}function jy(u,o,l,f){const g=f.patternDependencies;let b=!1;for(const w of o){const R=w.paint.get(`${u}-pattern`);R.isConstant()||(b=!0),Fx(R.constantOr(null),g,l)&&(b=!0)}return b}function Bx(u,o,l,f,g,b){const w=b.patternDependencies;for(const R of o){const P=R.paint.get(`${u}-pattern`).value;if(P.kind!=="constant"){let L=P.evaluate({zoom:f},l,{},b.availableImages);L=L&&L.name?L.name:L;const $=Fx(L,w,g);if(!$)continue;const{primary:q,secondary:Y}=$;q&&(l.patterns[R.id]=[q,Y].filter(Boolean))}}return l}var jx,Nx,z_,aC,Vx,lC,aw,$x={};function cC(){if(Nx)return jx;Nx=1;var u=ma();function o(g,b,w,R,P){this.properties={},this.extent=w,this.type=0,this._pbf=g,this._geometry=-1,this._keys=R,this._values=P,g.readFields(l,this,b)}function l(g,b,w){g==1?b.id=w.readVarint():g==2?function(R,P){for(var L=R.readVarint()+R.pos;R.pos<L;){var $=P._keys[R.readVarint()],q=P._values[R.readVarint()];P.properties[$]=q}}(w,b):g==3?b.type=w.readVarint():g==4&&(b._geometry=w.pos)}function f(g){for(var b,w,R=0,P=0,L=g.length,$=L-1;P<L;$=P++)R+=((w=g[$]).x-(b=g[P]).x)*(b.y+w.y);return R}return jx=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var b,w=g.readVarint()+g.pos,R=1,P=0,L=0,$=0,q=[];g.pos<w;){if(P<=0){var Y=g.readVarint();R=7&Y,P=Y>>3}if(P--,R===1||R===2)L+=g.readSVarint(),$+=g.readSVarint(),R===1&&(b&&q.push(b),b=[]),b.push(new u(L,$));else{if(R!==7)throw new Error("unknown command "+R);b&&b.push(b[0].clone())}}return b&&q.push(b),q},o.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var b=g.readVarint()+g.pos,w=1,R=0,P=0,L=0,$=1/0,q=-1/0,Y=1/0,ne=-1/0;g.pos<b;){if(R<=0){var re=g.readVarint();w=7&re,R=re>>3}if(R--,w===1||w===2)(P+=g.readSVarint())<$&&($=P),P>q&&(q=P),(L+=g.readSVarint())<Y&&(Y=L),L>ne&&(ne=L);else if(w!==7)throw new Error("unknown command "+w)}return[$,Y,q,ne]},o.prototype.toGeoJSON=function(g,b,w){var R,P,L=this.extent*Math.pow(2,w),$=this.extent*g,q=this.extent*b,Y=this.loadGeometry(),ne=o.types[this.type];function re(be){for(var Le=0;Le<be.length;Le++){var Ie=be[Le];be[Le]=[360*(Ie.x+$)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ie.y+q)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var de=[];for(R=0;R<Y.length;R++)de[R]=Y[R][0];re(Y=de);break;case 2:for(R=0;R<Y.length;R++)re(Y[R]);break;case 3:for(Y=function(be){var Le=be.length;if(Le<=1)return[be];for(var Ie,he,Ee=[],Oe=0;Oe<Le;Oe++){var Ve=f(be[Oe]);Ve!==0&&(he===void 0&&(he=Ve<0),he===Ve<0?(Ie&&Ee.push(Ie),Ie=[be[Oe]]):Ie.push(be[Oe]))}return Ie&&Ee.push(Ie),Ee}(Y),R=0;R<Y.length;R++)for(P=0;P<Y[R].length;P++)re(Y[R][P])}Y.length===1?Y=Y[0]:ne="Multi"+ne;var ye={type:"Feature",geometry:{type:ne,coordinates:Y},properties:this.properties};return"id"in this&&(ye.id=this.id),ye},jx}function If(){if(aC)return z_;aC=1;var u=cC();function o(f,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(l,this,g),this.length=this._features.length}function l(f,g,b){f===15?g.version=b.readVarint():f===1?g.name=b.readString():f===5?g.extent=b.readVarint():f===2?g._features.push(b.pos):f===3?g._keys.push(b.readString()):f===4&&g._values.push(function(w){for(var R=null,P=w.readVarint()+w.pos;w.pos<P;){var L=w.readVarint()>>3;R=L===1?w.readString():L===2?w.readFloat():L===3?w.readDouble():L===4?w.readVarint64():L===5?w.readVarint():L===6?w.readSVarint():L===7?w.readBoolean():null}return R}(b))}return z_=o,o.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var g=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,g,this.extent,this._keys,this._values)},z_}function lw(){return aw||(aw=1,$x.VectorTile=function(){if(lC)return Vx;lC=1;var u=If();function o(l,f,g){if(l===3){var b=new u(g,g.readVarint()+g.pos);b.length&&(f[b.name]=b)}}return Vx=function(l,f){this.layers=l.readFields(o,{},f)},Vx}(),$x.VectorTileFeature=cC(),$x.VectorTileLayer=If()),$x}var oh=lw();const Cg="3d_elevation_id",uC="level";class cw{constructor(){this._valid=!1}reset(o){return this.feature=o,this._valid=!0,this._geometry=o.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(o,l){return this._valid&&o(l(this._geometry)),this}require(o,l,f){return this.get(o,!0,l,f)}optional(o,l,f){return this.get(o,!1,l,f)}success(){return this._valid}get(o,l,f,g){const b=this.feature.properties.hasOwnProperty(o)?+this.feature.properties[o]:void 0;return this._valid&&b!==void 0&&!Number.isNaN(b)?f(g?g(b):b):l&&(this._valid=!1),this}}class dC{constructor(o,l){this.featureFunc=o,this.vertexFunc=l}parseFeature(o,l,f){return this.featureFunc(o,l,f)}parseVertex(o,l,f){return this.vertexFunc(o,l,f)}}const od=new dC((u,o,l)=>u.reset(o).require(Cg,f=>{l.id=f}).optional("fixed_height_relative",f=>{l.constantHeight=f},$p.decodeRelativeHeight).geometry(f=>{l.bounds=f},dy).success(),(u,o,l)=>u.reset(o).require(Cg,f=>{l.id=f}).require("elevation_idx",f=>{l.idx=f}).require("extent",f=>{l.extent=f}).require("height_relative",f=>{l.height=f},$p.decodeRelativeHeight).geometry(f=>{l.position=f},$p.getPoint).success()),uw=new dC((u,o,l)=>u.reset(o).require(Cg,f=>{l.id=f}).optional("fixed_height",f=>{l.constantHeight=f},$p.decodeMetricHeight).geometry(f=>{l.bounds=f},dy).success(),(u,o,l)=>u.reset(o).require(Cg,f=>{l.id=f}).require("elevation_idx",f=>{l.idx=f}).require("extent",f=>{l.extent=f}).require("height",f=>{l.height=f},$p.decodeMetricHeight).geometry(f=>{l.position=f},$p.getPoint).success());class $p{static getPoint(o){return Fr(o[0][0].x,o[0][0].y)}static decodeRelativeHeight(o){return 1e-4*o*5}static decodeMetricHeight(o){return 1e-4*o}static parse(o){const l=[],f=[],g=o.length,b=new cw;for(let R=0;R<g;R++){const P=o.feature(R),L=P.properties.hasOwnProperty("version")?String(P.properties.version):void 0,$=(w=L)?w==="1.0.1"?uw:void 0:od;if($===void 0){Ir(`Unknown elevation feature version number ${L||"(unknown)"}`);continue}const q=P.properties.hasOwnProperty("type")?P.properties.type:void 0;if(q){if(oh.VectorTileFeature.types[P.type]==="Point"&&q==="curve_point"){const Y={};$.parseVertex(b,P,Y)&&l.push(Y)}else if(oh.VectorTileFeature.types[P.type]==="Polygon"&&q==="curve_meta"){const Y={};$.parseFeature(b,P,Y)&&f.push(Y)}}}var w;return{vertices:l,features:f}}}class dw{constructor(o,l){this.feature=o,this.metersToTile=l,this.index=0}get(){const o=this.feature.vertices[this.index],l=this.feature.vertexProps[this.index].dir,f=l[1],g=-l[0],b=(o.extent+1)*this.metersToTile;return[new mn(Math.trunc(o.position[0]+f*b),Math.trunc(o.position[1]+g*b)),new mn(Math.trunc(o.position[0]-f*b),Math.trunc(o.position[1]-g*b))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class Mg{constructor(o,l,f,g,b,w){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=o,this.heightRange={min:f,max:f},this.safeArea=l,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||g.length!==0)){this.vertices=g,this.edges=b,this.edges=this.edges.filter(R=>{return R.a<this.vertices.length&&R.b<this.vertices.length&&!((P=this.vertices[R.a].position)[0]===(L=this.vertices[R.b].position)[0]&&P[1]===L[1]);var P,L}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const R of this.vertices)this.vertexProps.push({dir:Fr(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,R.height),this.heightRange.max=Math.max(this.heightRange.max,R.height);for(const R of this.edges){const P=this.vertices[R.a].position,L=this.vertices[R.b].position,$=xr(Mn(),L,P),q=Yr($),Y=ir(Mn(),$,1/q);this.edgeProps.push({vec:$,dir:Y,len:q});const ne=this.vertexProps[R.a].dir,re=this.vertexProps[R.b].dir;Cr(ne,ne,Y),Cr(re,re,Y)}for(const R of this.vertexProps)R.dir[0]===0&&R.dir[1]===0||Sr(R.dir,R.dir);this.tessellate(w)}}pointElevation(o){if(this.constantHeight!=null)return this.constantHeight;const l=this.getClosestEdge(o);if(l==null)return 0;const[f,g]=l;return((b,w,R)=>(1-R)*b+R*w)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,g)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(o){if(this.edges.length===0)return;let l=0,f=Number.POSITIVE_INFINITY,g=0;const b=Fr(o.x,o.y);for(let w=0;w<this.edges.length;w++){const R=this.edges[w],P=this.edgeProps[w].dir,L=new bl(b,this.edgeProps[w].dir),$=this.vertices[R.a].position,q=this.vertices[R.b].position,Y=Mn(),ne=Mn(),re=L.intersectsPlane($,this.vertexProps[R.a].dir,Y),de=L.intersectsPlane(q,this.vertexProps[R.b].dir,ne);if(!re||!de)continue;const ye=xr(Mn(),ne,Y),be=xr(Mn(),b,Y),Le=Dr(ye,ye),Ie=Le>0?Dr(be,ye)/Le:0,he=Ze(Ie,0,1),Ee=Math.abs((Ie-he)*this.edgeProps[w].len),Oe=xr(Mn(),b,$),Ve=Ee+Math.abs(Dr(Oe,Fr(P[1],-P[0])));Ve<f&&(l=w,f=Ve,g=he)}return[l,g]}tessellate(o){for(let l=this.edges.length-1;l>=0;--l){const f=this.edges[l].a,g=this.edges[l].b,{position:b,height:w,extent:R}=this.vertices[f],{position:P,height:L,extent:$}=this.vertices[g],q=this.vertexProps[f].dir,Y=this.vertexProps[g].dir,ne=Se(b[0]/o,b[1]/o,w),re=Se(P[0]/o,P[1]/o,L),de=Se(q[1],-q[0],0);Ce(de,de,R);const ye=Se(Y[1],-Y[0],0);if(Ce(ye,ye,$),this.distSqLines(Se(ne[0]+.5*de[0],ne[1]+.5*de[1],ne[2]+.5*de[2]),Se(re[0]-.5*ye[0],re[1]-.5*ye[1],re[2]-.5*ye[2]),Se(ne[0]-.5*de[0],ne[1]-.5*de[1],ne[2]-.5*de[2]),Se(re[0]+.5*ye[0],re[1]+.5*ye[1],re[2]+.5*ye[2]))<=.0025000000000000005)continue;const be=this.vertices.length,Le=Cr(Mn(),b,P);this.vertices.push({position:ir(Le,Le,.5),height:.5*(w+L),extent:.5*(R+$)});const Ie=Cr(Mn(),q,Y);this.vertexProps.push({dir:Sr(Ie,Ie)}),this.edges.splice(l,1),this.edgeProps.splice(l,1),this.edges.push({a:f,b:be}),this.edges.push({a:be,b:g});const he=xr(Mn(),this.vertices[be].position,b),Ee=Yr(he),Oe={vec:he,dir:ir(Mn(),he,1/Ee),len:Ee};this.edgeProps.push(Oe),this.edgeProps.push(Oe)}}distSqLines(o,l,f,g){const b=_e(xe(),l,o),w=_e(xe(),g,f),R=_e(xe(),o,f),P=ot(b,b),L=ot(b,w),$=ot(b,R),q=ot(w,w),Y=ot(w,R),ne=P*q-L*L;if(ne===0){const ye=ot(R,w)/ot(w,w);return dt(St(xe(),f,g,ye),o)}const re=(L*Y-$*q)/ne,de=(P*Y-L*$)/ne;return dt(St(xe(),o,l,re),St(xe(),f,g,de))}}class lc{static parseFrom(o,l){const f=$p.parse(o);if(!f)return[];let{vertices:g,features:b}=f;const w=1/pt(l);b.sort(($,q)=>$.id-q.id),g.sort(($,q)=>$.id-q.id||$.idx-q.idx),g=g.filter(($,q,Y)=>q===Y.findIndex(ne=>ne.id===$.id&&ne.idx===$.idx));const R=new Array;let P=0;const L=g.length;for(const $ of b){if($.constantHeight){R.push(new Mg($.id,$.bounds,$.constantHeight));continue}for(;P!==L&&g[P].id<$.id;)P++;if(P===L||g[P].id!==$.id)continue;const q=new Array,Y=new Array,ne=P;for(;P!==L&&g[P].id===$.id;){const re=g[P];if(q.push({position:re.position,height:re.height,extent:re.extent}),P!==ne&&g[P-1].idx===re.idx-1){const de=P-ne;Y.push({a:de-1,b:de})}P++}R.push(new Mg($.id,$.bounds,void 0,q,Y,w))}return R}static getElevationFeature(o,l){if(!l)return;const f=+o.properties[Cg];return Number.isNaN(f)?void 0:l.find(g=>g.id===f)}}class hw{constructor(o,l){this.zScale=1,this.xOffset=0,this.yOffset=0,o.equals(l)||(this.zScale=Math.pow(2,l.z-o.z),this.xOffset=(o.x*this.zScale-l.x)*xn,this.yOffset=(o.y*this.zScale-l.y)*xn)}constantElevation(o,l){if(o.constantHeight!=null)return this.computeBiasedHeight(o.constantHeight,l)}pointElevation(o,l,f){const g=this.constantElevation(l,f);return g??(o.x=o.x*this.zScale+this.xOffset,o.y=o.y*this.zScale+this.yOffset,this.computeBiasedHeight(l.pointElevation(o),f))}computeBiasedHeight(o,l){return l<=0?o:o+l*et(0,l,o>=0?o:Math.abs(.5*o))}}zn(Mg,"ElevationFeature");class F_{constructor(){this.polygons=new Map}add(o,...l){this.polygons.has(o)?this.polygons.get(o).push(...l):this.polygons.set(o,l)}merge(o){for(const[l,f]of o.polygons)this.add(l,...f)}}class Nl{constructor(){this.portals=[]}static evaluate(o){if(o.length===0)return new Nl;let l=[];for(const L of o)l.push(...L.portals);if(l.length===0)return new Nl;const f=(L,$)=>L<=0&&$<=0||L>=xn&&$>=xn;for(const L of l){const $=L.va,q=L.vb;(f($.x,q.x)||f($.y,q.y))&&(L.type="border")}const g=l.filter(L=>L.type!=="unevaluated"),b=l.filter(L=>L.type==="unevaluated");if(b.length===0)return new Nl;b.sort((L,$)=>L.hash===$.hash?L.isTunnel===$.isTunnel?0:L.isTunnel?-1:1:L.hash<$.hash?1:-1),l=g.concat(b);let w=g.length,R=w,P=w;do if(R++,R===l.length||l[w].hash!==l[R].hash){if(R-w==2){P<w&&(l[P]=l[w],l[w]=null);const L=l[P],$=l[R-1];L.type=L.isTunnel!==$.isTunnel?"tunnel":"polygon",L.connection={a:L.connection.a,b:$.connection.a},P++}w=R}while(w!==l.length);return l.splice(P),l.sort((L,$)=>L.hash<$.hash?1:-1),{portals:l}}}zn(Nl,"ElevationPortalGraph"),zn(F_,"ElevationPolygons");class QP{constructor(o,l,f){this.outPositions=o,this.outNormals=l,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(o,l,f){let g=o[2];f!=null&&(g*=f);const b=this.getVec3Bits(o)<<96n|this.getVec3Bits(l),w=this.vertexLookup.get(b);if(w!=null)return w;const R=this.outPositions.length;this.vertexLookup.set(b,R);const P=Math.trunc(16384*l[0]),L=Math.trunc(16384*l[1]),$=Math.trunc(16384*l[2]);return this.outPositions.emplaceBack(o[0],o[1],g),this.outNormals.emplaceBack(P,L,$),R}addVertices(o,l,...f){const g=[];for(const b of f){const w=this.addVertex(b,o,l);g.push(w)}return g}addTriangles(o,l,f){if(l&&f){const g=f.length===1,b=Se(0,0,0);for(let w=0;w<o.length;w+=3){const R=l[o[w+0]],P=l[o[w+1]],L=l[o[w+2]],$=g?f[0]:f[o[w+1]],q=g?f[0]:f[o[w+2]],Y=this.addVertex(Se(R.x,R.y,g?f[0]:f[o[w+0]]),b),ne=this.addVertex(Se(P.x,P.y,$),b),re=this.addVertex(Se(L.x,L.y,q),b);this.outIndices.emplaceBack(Y,ne,re)}}else for(let g=0;g<o.length;g+=3)this.outIndices.emplaceBack(o[g+0],o[g+1],o[g+2])}addQuad(o,l){const f=this.addVertices(l,void 0,...o.map(P=>Se(P.coord.x,P.coord.y,P.height))),[g,b,w,R]=f;this.addTriangles([g,b,w,w,R,g])}getBits(o){return this.view.setFloat32(0,o),BigInt(this.view.getUint32(0))}getVec3Bits(o){return this.getBits(o[0])<<64n|this.getBits(o[1])<<32n|this.getBits(o[2])}}class cc{constructor(o){this.unevaluatedPortals=new Nl,this.portalPolygons=new F_,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new wf,this.vertexNormals=new Sf,this.indexArray=new Fo,this.tileToMeters=pt(o)}addVertices(o,l){const f=this.unevalVertices.length;for(let g=0;g<o.length;g++)this.unevalVertices.push(o[g]),this.unevalHeights.push(l[g]);return f}addTriangles(o,l,f){const g=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const b of o)g.push(b+l)}addRenderableRing(o,l,f,g,b){const w=[new mn(b.min.x,b.min.y),new mn(b.max.x,b.min.y),new mn(b.max.x,b.max.y),new mn(b.min.x,b.max.y)];for(let R=0;R<f-1;R++){const P=l+R,L=P+1,$=this.unevalVertices[P],q=this.unevalVertices[L];if(!($.x>=b.min.x&&$.x<=b.max.x&&$.y>=b.min.y&&$.y<=b.max.y||q.x>=b.min.x&&q.x<=b.max.x&&q.y>=b.min.y&&q.y<=b.max.y||Ji($,q,w))||this.isOnBorder($.x,q.x)||this.isOnBorder($.y,q.y))continue;const Y=cc.computeEdgeHash(this.unevalVertices[P],this.unevalVertices[L]);let ne,re=this.vertexHashLookup.get(cc.computePosHash($));re!=null?ne=re.next:(re=this.vertexHashLookup.get(cc.computePosHash(q)),ne=re!=null?re.prev:Y),this.unevalEdges.push({polygonIdx:o,a:P,b:L,hash:Y,portalHash:ne,isTunnel:g,type:"unevaluated"})}}addPortalCandidates(o,l,f,g,b){if(l.length===0)return;this.portalPolygons.add(o,{geometry:l,zLevel:b});const w=l[0];this.vertexHashLookup.clear();let R=cc.computeEdgeHash(w[w.length-2],w[w.length-1]);for(let P=0;P<w.length-1;P++){const L=w[P+0],$=w[P+1],q=Fr($.x-L.x,$.y-L.y),Y=Yr(q);if(Y===0)continue;let ne="unevaluated";const re=g.pointElevation(L),de=g.pointElevation($);Math.abs(re)<.01&&Math.abs(de)<.01?ne="entrance":(this.isOnBorder(L.x,$.x)||this.isOnBorder(L.y,$.y))&&(ne="border");const ye=cc.computeEdgeHash(L,$);this.unevaluatedPortals.portals.push({connection:{a:o,b:void 0},va:L,vb:$,vab:q,length:Y,hash:ye,isTunnel:f,type:ne});const be=cc.computePosHash(L);this.vertexHashLookup.set(be,{prev:R,next:ye}),R=ye}}construct(o){if(this.unevalVertices.length===0)return;const l=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=q=>{q.primitiveLength=this.indexArray.length-q.primitiveOffset},g=new QP(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(o.portals,this.unevalEdges);const b=l(),w=l(),R=l(),P=(q,Y)=>{q.sort((re,de)=>re.type===Y&&de.type!==Y?-1:re.type!==Y&&de.type===Y?1:0);const ne=q.findIndex(re=>re.type!==Y);return ne>=0?ne:q.length};let L=0;this.unevalEdges.length>0&&(L=P(this.unevalEdges,"none"),this.constructBridgeStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:L},this.tileToMeters));const $=l();if(this.unevalEdges.length>0){const q=this.unevalEdges.splice(L),Y=P(q,"tunnel")+L;this.unevalEdges.push(...q),this.constructTunnelStructures(g,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:L},{min:L,max:Y})}f(R),g.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f($),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(w),g.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(b),this.maskSegments=_o.simpleSegment(0,$.primitiveOffset,0,$.primitiveLength),this.depthSegments=_o.simpleSegment(0,w.primitiveOffset,0,w.primitiveLength),this.renderableSegments=_o.simpleSegment(0,R.primitiveOffset,0,R.primitiveLength),this.shadowCasterSegments=_o.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength)}upload(o){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=o.createVertexBuffer(this.vertexPositions,nC.members),this.vertexBufferNormal=o.createVertexBuffer(this.vertexNormals,rC.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(o,l,f,g,b){const w=new Map;for(let R=g;R<b;R++){const P=f[R],L=P.a,$=P.b,q=cc.computePosHash(o[L]),Y=cc.computePosHash(o[$]);w.has(q)||w.set(q,{}),w.has(Y)||w.set(Y,{});const ne=w.get(q),re=w.get(Y);l[L]<=0&&l[$]<=0||(ne.to=$,re.from=L)}return w}constructBridgeStructures(o,l,f,g,b,w){const R=this.computeVertexConnections(l,f,g,b.min,b.max),P=1/w,L=.5*P,$=Y=>Se(l[Y].x,l[Y].y,f[Y]*P),q=Y=>{const ne=R.get(cc.computePosHash(l[Y])),re=ne.from,de=ne.to;if(!re||!de)return;const ye=$(re),be=$(Y),Le=$(de),Ie=Se(0,0,0);if(!Lt(ye,be)){const Ee=Ct(xe(),be,ye);Ae(Ie,Ie,wt(Ee,Ee))}if(!Lt(Le,be)){const Ee=Ct(xe(),Le,be);Ae(Ie,Ie,wt(Ee,Ee))}const he=fn(Ie);return he>0?Ce(Ie,Ie,1/he):void 0};for(let Y=b.min;Y<b.max;Y++){const ne=g[Y],re=this.prepareEdgePoints(l,f,ne,(cn,Rr)=>cn>Rr);if(re==null)continue;const de=re[0],ye=re[1],be=Se(de.coord.x,de.coord.y,P*de.height),Le=Se(ye.coord.x,ye.coord.y,P*ye.height);if(Lt(be,Le))continue;const Ie=Ct(xe(),Le,be);wt(Ie,Ie);const he=cn=>wt(cn,cn),Ee=q(ne.a)||Ie,Oe=q(ne.b)||Ie,Ve=he(Se(Ee[1],-Ee[0],0)),tt=he(Se(Oe[1],-Oe[0],0)),it=he(st(xe(),Ve,Ee)),at=he(st(xe(),tt,Oe)),ht=xe(),zt=[Ae(xe(),be,Ce(ht,Ct(ht,Ve,it),L)),Ae(xe(),be,Ce(ht,Ae(ht,Ve,it),L)),Ae(xe(),be,Ce(ht,it,L)),be],nn=[Ae(xe(),Le,Ce(ht,Ct(ht,tt,at),L)),Ae(xe(),Le,Ce(ht,Ae(ht,tt,at),L)),Ae(xe(),Le,Ce(ht,at,L)),Le],[Xt,Qt]=o.addVertices(Ve,w,zt[0],zt[1]),[ln,It]=o.addVertices(tt,w,nn[0],nn[1]);o.addTriangles([Xt,Qt,ln,Qt,It,ln]);const[Kt,At]=o.addVertices(it,w,zt[1],zt[2]),[kt,un]=o.addVertices(at,w,nn[1],nn[2]);o.addTriangles([Kt,At,kt,At,un,kt]);const[pn,er]=o.addVertices(Nt(Ve,Ve),w,zt[2],zt[3]),[qn,Tn]=o.addVertices(Nt(tt,tt),w,nn[2],nn[3]);o.addTriangles([pn,er,qn,er,Tn,qn])}}constructTunnelStructures(o,l,f,g,b,w){const R=P=>wt(P,P);for(let P=b.min;P<b.max;P++){const L=this.prepareEdgePoints(l,f,g[P],(ne,re)=>ne<re);if(L==null)continue;const[$,q]=L,Y=R(Se(q.coord.y-$.coord.y,-(q.coord.x-$.coord.x),0));o.addQuad([$,q,{coord:q.coord,height:g[P].isTunnel?-.1:0},{coord:$.coord,height:g[P].isTunnel?-.1:0}],Y)}for(let P=w.min;P<w.max;P++){const L=g[P],$=l[L.a],q=l[L.b],Y=R(Se(q.y-$.y,-(q.x-$.x),0));o.addQuad([{coord:q,height:0},{coord:$,height:0},{coord:$,height:f[L.a]+4},{coord:q,height:f[L.b]+4}],Y),o.addQuad([{coord:$,height:0},{coord:q,height:0},{coord:q,height:f[L.b]+4},{coord:$,height:f[L.a]+4}],Y)}}prepareEdgePoints(o,l,f,g){let b=l[f.a],w=l[f.b];const R=g(b,0),P=g(w,0);if(R&&P)return[{coord:o[f.a],height:b},{coord:o[f.b],height:w}];if(!R&&!P)return;const L=o[f.a].clone(),$=o[f.b].clone();if(R){if(!P){const q=w/(w-b);$.x=lr($.x,L.x,q),$.y=lr($.y,L.y,q),w=lr(w,b,q)}}else{const q=b/(b-w);L.x=lr(L.x,$.x,q),L.y=lr(L.y,$.y,q),b=lr(b,w,q)}return[{coord:L,height:b},{coord:$,height:w}]}prepareEdges(o,l){if(l.length===0)return;l.sort((R,P)=>R.hash===P.hash?P.polygonIdx-R.polygonIdx:P.hash>R.hash?1:-1);let f=0,g=0,b=0,w=l[f].polygonIdx;do g++,(g===l.length||l[f].hash!==l[g].hash)&&((g-f==1||l[g-1].polygonIdx!==w)&&(b<f&&(l[b]=l[f],l[f]=null),l[b].type="none",b++),f=g,f!==l.length&&(w=l[f].polygonIdx));while(f!==l.length);if(l.splice(b),l.length!==0&&o.length!==0){l.sort((L,$)=>L.portalHash<$.portalHash?1:-1);let R=0,P=0;for(;R!==l.length&&P!==o.length;){const L=l[R],$=o[P];L.portalHash>$.hash?R++:$.hash>L.portalHash?P++:(L.type=$.type,R++)}}}isOnBorder(o,l){return o<=0&&l<=0||o>=xn&&l>=xn}static computeEdgeHash(o,l){return(o.y===l.y&&o.x>l.x||o.y>l.y)&&([o,l]=[l,o]),BigInt(cc.computePosHash(o))<<32n|BigInt(cc.computePosHash(l))}static computePosHash(o){return((65535&o.x)<<16|65535&o.y)>>>0}}var Ag,fw={exports:{}},hC=(Ag||(Ag=1,function(u,o){(function(l){function f(je,qe){return je>qe?1:je<qe?-1:0}var g=function(je,qe){je===void 0&&(je=f),qe===void 0&&(qe=!1),this._compare=je,this._root=null,this._size=0,this._noDuplicates=!!qe},b={size:{configurable:!0}};function w(je,qe,Vt,_n,An){var Cn=An-_n;if(Cn>0){var Jn=_n+Math.floor(Cn/2),yr={key:qe[Jn],data:Vt[Jn],parent:je};return yr.left=w(yr,qe,Vt,_n,Jn),yr.right=w(yr,qe,Vt,Jn+1,An),yr}return null}function R(je,qe,Vt,_n,An){if(!(Vt>=_n)){for(var Cn=je[Vt+_n>>1],Jn=Vt-1,yr=_n+1;;){do Jn++;while(An(je[Jn],Cn)<0);do yr--;while(An(je[yr],Cn)>0);if(Jn>=yr)break;var ii=je[Jn];je[Jn]=je[yr],je[yr]=ii,ii=qe[Jn],qe[Jn]=qe[yr],qe[yr]=ii}R(je,qe,Vt,yr,An),R(je,qe,yr+1,_n,An)}}g.prototype.rotateLeft=function(je){var qe=je.right;qe&&(je.right=qe.left,qe.left&&(qe.left.parent=je),qe.parent=je.parent),je.parent?je===je.parent.left?je.parent.left=qe:je.parent.right=qe:this._root=qe,qe&&(qe.left=je),je.parent=qe},g.prototype.rotateRight=function(je){var qe=je.left;qe&&(je.left=qe.right,qe.right&&(qe.right.parent=je),qe.parent=je.parent),je.parent?je===je.parent.left?je.parent.left=qe:je.parent.right=qe:this._root=qe,qe&&(qe.right=je),je.parent=qe},g.prototype._splay=function(je){for(;je.parent;){var qe=je.parent;qe.parent?qe.left===je&&qe.parent.left===qe?(this.rotateRight(qe.parent),this.rotateRight(qe)):qe.right===je&&qe.parent.right===qe?(this.rotateLeft(qe.parent),this.rotateLeft(qe)):qe.left===je&&qe.parent.right===qe?(this.rotateRight(qe),this.rotateLeft(qe)):(this.rotateLeft(qe),this.rotateRight(qe)):qe.left===je?this.rotateRight(qe):this.rotateLeft(qe)}},g.prototype.splay=function(je){for(var qe,Vt,_n,An,Cn;je.parent;)(Vt=(qe=je.parent).parent)&&Vt.parent?((_n=Vt.parent).left===Vt?_n.left=je:_n.right=je,je.parent=_n):(je.parent=null,this._root=je),An=je.left,Cn=je.right,je===qe.left?(Vt&&(Vt.left===qe?(qe.right?(Vt.left=qe.right,Vt.left.parent=Vt):Vt.left=null,qe.right=Vt,Vt.parent=qe):(An?(Vt.right=An,An.parent=Vt):Vt.right=null,je.left=Vt,Vt.parent=je)),Cn?(qe.left=Cn,Cn.parent=qe):qe.left=null,je.right=qe,qe.parent=je):(Vt&&(Vt.right===qe?(qe.left?(Vt.right=qe.left,Vt.right.parent=Vt):Vt.right=null,qe.left=Vt,Vt.parent=qe):(Cn?(Vt.left=Cn,Cn.parent=Vt):Vt.left=null,je.right=Vt,Vt.parent=je)),An?(qe.right=An,An.parent=qe):qe.right=null,je.left=qe,qe.parent=je)},g.prototype.replace=function(je,qe){je.parent?je===je.parent.left?je.parent.left=qe:je.parent.right=qe:this._root=qe,qe&&(qe.parent=je.parent)},g.prototype.minNode=function(je){if(je===void 0&&(je=this._root),je)for(;je.left;)je=je.left;return je},g.prototype.maxNode=function(je){if(je===void 0&&(je=this._root),je)for(;je.right;)je=je.right;return je},g.prototype.insert=function(je,qe){var Vt=this._root,_n=null,An=this._compare;if(this._noDuplicates)for(;Vt;){if(_n=Vt,An(Vt.key,je)===0)return;Vt=An(Vt.key,je)<0?Vt.right:Vt.left}else for(;Vt;)_n=Vt,Vt=An(Vt.key,je)<0?Vt.right:Vt.left;return Vt={key:je,data:qe,left:null,right:null,parent:_n},_n?An(_n.key,Vt.key)<0?_n.right=Vt:_n.left=Vt:this._root=Vt,this.splay(Vt),this._size++,Vt},g.prototype.find=function(je){for(var qe=this._root,Vt=this._compare;qe;){var _n=Vt(qe.key,je);if(_n<0)qe=qe.right;else{if(!(_n>0))return qe;qe=qe.left}}return null},g.prototype.contains=function(je){for(var qe=this._root,Vt=this._compare;qe;){var _n=Vt(je,qe.key);if(_n===0)return!0;qe=_n<0?qe.left:qe.right}return!1},g.prototype.remove=function(je){var qe=this.find(je);if(!qe)return!1;if(this.splay(qe),qe.left)if(qe.right){var Vt=this.minNode(qe.right);Vt.parent!==qe&&(this.replace(Vt,Vt.right),Vt.right=qe.right,Vt.right.parent=Vt),this.replace(qe,Vt),Vt.left=qe.left,Vt.left.parent=Vt}else this.replace(qe,qe.left);else this.replace(qe,qe.right);return this._size--,!0},g.prototype.removeNode=function(je){if(!je)return!1;if(this.splay(je),je.left)if(je.right){var qe=this.minNode(je.right);qe.parent!==je&&(this.replace(qe,qe.right),qe.right=je.right,qe.right.parent=qe),this.replace(je,qe),qe.left=je.left,qe.left.parent=qe}else this.replace(je,je.left);else this.replace(je,je.right);return this._size--,!0},g.prototype.erase=function(je){var qe=this.find(je);if(qe){this.splay(qe);var Vt=qe.left,_n=qe.right,An=null;Vt&&(Vt.parent=null,An=this.maxNode(Vt),this.splay(An),this._root=An),_n&&(Vt?An.right=_n:this._root=_n,_n.parent=An),this._size--}},g.prototype.pop=function(){var je=this._root,qe=null;if(je){for(;je.left;)je=je.left;qe={key:je.key,data:je.data},this.remove(je.key)}return qe},g.prototype.next=function(je){var qe=je;if(qe)if(qe.right)for(qe=qe.right;qe&&qe.left;)qe=qe.left;else for(qe=je.parent;qe&&qe.right===je;)je=qe,qe=qe.parent;return qe},g.prototype.prev=function(je){var qe=je;if(qe)if(qe.left)for(qe=qe.left;qe&&qe.right;)qe=qe.right;else for(qe=je.parent;qe&&qe.left===je;)je=qe,qe=qe.parent;return qe},g.prototype.forEach=function(je){for(var qe=this._root,Vt=[],_n=!1,An=0;!_n;)qe?(Vt.push(qe),qe=qe.left):Vt.length>0?(je(qe=Vt.pop(),An++),qe=qe.right):_n=!0;return this},g.prototype.range=function(je,qe,Vt,_n){for(var An=[],Cn=this._compare,Jn=this._root;An.length!==0||Jn;)if(Jn)An.push(Jn),Jn=Jn.left;else{if(Cn((Jn=An.pop()).key,qe)>0)break;if(Cn(Jn.key,je)>=0&&Vt.call(_n,Jn))return this;Jn=Jn.right}return this},g.prototype.keys=function(){for(var je=this._root,qe=[],Vt=[],_n=!1;!_n;)je?(qe.push(je),je=je.left):qe.length>0?(je=qe.pop(),Vt.push(je.key),je=je.right):_n=!0;return Vt},g.prototype.values=function(){for(var je=this._root,qe=[],Vt=[],_n=!1;!_n;)je?(qe.push(je),je=je.left):qe.length>0?(je=qe.pop(),Vt.push(je.data),je=je.right):_n=!0;return Vt},g.prototype.at=function(je){for(var qe=this._root,Vt=[],_n=!1,An=0;!_n;)if(qe)Vt.push(qe),qe=qe.left;else if(Vt.length>0){if(qe=Vt.pop(),An===je)return qe;An++,qe=qe.right}else _n=!0;return null},g.prototype.load=function(je,qe,Vt){if(je===void 0&&(je=[]),qe===void 0&&(qe=[]),Vt===void 0&&(Vt=!1),this._size!==0)throw new Error("bulk-load: tree is not empty");var _n=je.length;return Vt&&R(je,qe,0,_n-1,this._compare),this._root=w(null,je,qe,0,_n),this._size=_n,this},g.prototype.min=function(){var je=this.minNode(this._root);return je?je.key:null},g.prototype.max=function(){var je=this.maxNode(this._root);return je?je.key:null},g.prototype.isEmpty=function(){return this._root===null},b.size.get=function(){return this._size},g.createTree=function(je,qe,Vt,_n,An){return new g(Vt,An).load(je,qe,_n)},Object.defineProperties(g.prototype,b);var P=0,L=1,$=2,q=3,Y=0,ne=1,re=2,de=3;function ye(je,qe,Vt){qe===null?(je.inOut=!1,je.otherInOut=!0):(je.isSubject===qe.isSubject?(je.inOut=!qe.inOut,je.otherInOut=qe.otherInOut):(je.inOut=!qe.otherInOut,je.otherInOut=qe.isVertical()?!qe.inOut:qe.inOut),qe&&(je.prevInResult=!be(qe,Vt)||qe.isVertical()?qe.prevInResult:qe));var _n=be(je,Vt);je.resultTransition=_n?function(An,Cn){var Jn,yr=!An.inOut,ii=!An.otherInOut;switch(Cn){case Y:Jn=yr&&ii;break;case ne:Jn=yr||ii;break;case de:Jn=yr^ii;break;case re:Jn=An.isSubject?yr&&!ii:ii&&!yr}return Jn?1:-1}(je,Vt):0}function be(je,qe){switch(je.type){case P:switch(qe){case Y:return!je.otherInOut;case ne:return je.otherInOut;case re:return je.isSubject&&je.otherInOut||!je.isSubject&&!je.otherInOut;case de:return!0}break;case $:return qe===Y||qe===ne;case q:return qe===re;case L:return!1}return!1}var Le=function(je,qe,Vt,_n,An){this.left=qe,this.point=je,this.otherEvent=Vt,this.isSubject=_n,this.type=An||P,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},Ie={inResult:{configurable:!0}};function he(je,qe){return je[0]===qe[0]&&je[1]===qe[1]}Le.prototype.isBelow=function(je){var qe=this.point,Vt=this.otherEvent.point;return this.left?(qe[0]-je[0])*(Vt[1]-je[1])-(Vt[0]-je[0])*(qe[1]-je[1])>0:(Vt[0]-je[0])*(qe[1]-je[1])-(qe[0]-je[0])*(Vt[1]-je[1])>0},Le.prototype.isAbove=function(je){return!this.isBelow(je)},Le.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},Ie.inResult.get=function(){return this.resultTransition!==0},Le.prototype.clone=function(){var je=new Le(this.point,this.left,this.otherEvent,this.isSubject,this.type);return je.contourId=this.contourId,je.resultTransition=this.resultTransition,je.prevInResult=this.prevInResult,je.isExteriorRing=this.isExteriorRing,je.inOut=this.inOut,je.otherInOut=this.otherInOut,je},Object.defineProperties(Le.prototype,Ie);var Ee=11102230246251565e-32,Oe=134217729,Ve=(3+8*Ee)*Ee;function tt(je,qe,Vt,_n,An){var Cn,Jn,yr,ii,oi=qe[0],$r=_n[0],Ni=0,ro=0;$r>oi==$r>-oi?(Cn=oi,oi=qe[++Ni]):(Cn=$r,$r=_n[++ro]);var si=0;if(Ni<je&&ro<Vt)for($r>oi==$r>-oi?(yr=Cn-((Jn=oi+Cn)-oi),oi=qe[++Ni]):(yr=Cn-((Jn=$r+Cn)-$r),$r=_n[++ro]),Cn=Jn,yr!==0&&(An[si++]=yr);Ni<je&&ro<Vt;)$r>oi==$r>-oi?(yr=Cn-((Jn=Cn+oi)-(ii=Jn-Cn))+(oi-ii),oi=qe[++Ni]):(yr=Cn-((Jn=Cn+$r)-(ii=Jn-Cn))+($r-ii),$r=_n[++ro]),Cn=Jn,yr!==0&&(An[si++]=yr);for(;Ni<je;)yr=Cn-((Jn=Cn+oi)-(ii=Jn-Cn))+(oi-ii),oi=qe[++Ni],Cn=Jn,yr!==0&&(An[si++]=yr);for(;ro<Vt;)yr=Cn-((Jn=Cn+$r)-(ii=Jn-Cn))+($r-ii),$r=_n[++ro],Cn=Jn,yr!==0&&(An[si++]=yr);return Cn===0&&si!==0||(An[si++]=Cn),si}function it(je){return new Float64Array(je)}var at=33306690738754716e-32,ht=22204460492503146e-32,zt=11093356479670487e-47,nn=it(4),Xt=it(8),Qt=it(12),ln=it(16),It=it(4);function Kt(je,qe,Vt){var _n=function(An,Cn,Jn,yr,ii,oi){var $r=(Cn-oi)*(Jn-ii),Ni=(An-ii)*(yr-oi),ro=$r-Ni;if($r===0||Ni===0||$r>0!=Ni>0)return ro;var si=Math.abs($r+Ni);return Math.abs(ro)>=at*si?ro:-function(Po,ao,Bi,jo,po,io,lo){var Hi,Wr,Yi,Io,gr,mi,mo,Oo,xo,Ss,Ki,ps,dc,Na,ba,hc,Wp,Ts,Bs=Po-po,Va=Bi-po,wl=ao-io,nl=jo-io;nn[0]=(ba=(Oo=Bs-(mo=(mi=Oe*Bs)-(mi-Bs)))*(Ss=nl-(xo=(mi=Oe*nl)-(mi-nl)))-((Na=Bs*nl)-mo*xo-Oo*xo-mo*Ss))-((Ki=ba-(Wp=(Oo=wl-(mo=(mi=Oe*wl)-(mi-wl)))*(Ss=Va-(xo=(mi=Oe*Va)-(mi-Va)))-((hc=wl*Va)-mo*xo-Oo*xo-mo*Ss)))+(gr=ba-Ki))+(gr-Wp),nn[1]=(dc=Na-((ps=Na+Ki)-(gr=ps-Na))+(Ki-gr))-((Ki=dc-hc)+(gr=dc-Ki))+(gr-hc),nn[2]=ps-((Ts=ps+Ki)-(gr=Ts-ps))+(Ki-gr),nn[3]=Ts;var Ky=function(iZe,pU){for(var mU=pU[0],YI=1;YI<4;YI++)mU+=pU[YI];return mU}(0,nn),Kw=ht*lo;if(Ky>=Kw||-Ky>=Kw||(Hi=Po-(Bs+(gr=Po-Bs))+(gr-po),Yi=Bi-(Va+(gr=Bi-Va))+(gr-po),Wr=ao-(wl+(gr=ao-wl))+(gr-io),Io=jo-(nl+(gr=jo-nl))+(gr-io),Hi===0&&Wr===0&&Yi===0&&Io===0)||(Kw=zt*lo+Ve*Math.abs(Ky),(Ky+=Bs*Io+nl*Hi-(wl*Yi+Va*Wr))>=Kw||-Ky>=Kw))return Ky;It[0]=(ba=(Oo=Hi-(mo=(mi=Oe*Hi)-(mi-Hi)))*(Ss=nl-(xo=(mi=Oe*nl)-(mi-nl)))-((Na=Hi*nl)-mo*xo-Oo*xo-mo*Ss))-((Ki=ba-(Wp=(Oo=Wr-(mo=(mi=Oe*Wr)-(mi-Wr)))*(Ss=Va-(xo=(mi=Oe*Va)-(mi-Va)))-((hc=Wr*Va)-mo*xo-Oo*xo-mo*Ss)))+(gr=ba-Ki))+(gr-Wp),It[1]=(dc=Na-((ps=Na+Ki)-(gr=ps-Na))+(Ki-gr))-((Ki=dc-hc)+(gr=dc-Ki))+(gr-hc),It[2]=ps-((Ts=ps+Ki)-(gr=Ts-ps))+(Ki-gr),It[3]=Ts;var lle=tt(4,nn,4,It,Xt);It[0]=(ba=(Oo=Bs-(mo=(mi=Oe*Bs)-(mi-Bs)))*(Ss=Io-(xo=(mi=Oe*Io)-(mi-Io)))-((Na=Bs*Io)-mo*xo-Oo*xo-mo*Ss))-((Ki=ba-(Wp=(Oo=wl-(mo=(mi=Oe*wl)-(mi-wl)))*(Ss=Yi-(xo=(mi=Oe*Yi)-(mi-Yi)))-((hc=wl*Yi)-mo*xo-Oo*xo-mo*Ss)))+(gr=ba-Ki))+(gr-Wp),It[1]=(dc=Na-((ps=Na+Ki)-(gr=ps-Na))+(Ki-gr))-((Ki=dc-hc)+(gr=dc-Ki))+(gr-hc),It[2]=ps-((Ts=ps+Ki)-(gr=Ts-ps))+(Ki-gr),It[3]=Ts;var cle=tt(lle,Xt,4,It,Qt);It[0]=(ba=(Oo=Hi-(mo=(mi=Oe*Hi)-(mi-Hi)))*(Ss=Io-(xo=(mi=Oe*Io)-(mi-Io)))-((Na=Hi*Io)-mo*xo-Oo*xo-mo*Ss))-((Ki=ba-(Wp=(Oo=Wr-(mo=(mi=Oe*Wr)-(mi-Wr)))*(Ss=Yi-(xo=(mi=Oe*Yi)-(mi-Yi)))-((hc=Wr*Yi)-mo*xo-Oo*xo-mo*Ss)))+(gr=ba-Ki))+(gr-Wp),It[1]=(dc=Na-((ps=Na+Ki)-(gr=ps-Na))+(Ki-gr))-((Ki=dc-hc)+(gr=dc-Ki))+(gr-hc),It[2]=ps-((Ts=ps+Ki)-(gr=Ts-ps))+(Ki-gr),It[3]=Ts;var ule=tt(cle,Qt,4,It,ln);return ln[ule-1]}(An,Cn,Jn,yr,ii,oi,si)}(je[0],je[1],qe[0],qe[1],Vt[0],Vt[1]);return _n>0?-1:_n<0?1:0}function At(je,qe){var Vt=je.point,_n=qe.point;return Vt[0]>_n[0]?1:Vt[0]<_n[0]?-1:Vt[1]!==_n[1]?Vt[1]>_n[1]?1:-1:function(An,Cn,Jn,yr){return An.left!==Cn.left?An.left?1:-1:Kt(Jn,An.otherEvent.point,Cn.otherEvent.point)!==0?An.isBelow(Cn.otherEvent.point)?-1:1:!An.isSubject&&Cn.isSubject?1:-1}(je,qe,Vt)}function kt(je,qe,Vt){var _n=new Le(qe,!1,je,je.isSubject),An=new Le(qe,!0,je.otherEvent,je.isSubject);return he(je.point,je.otherEvent.point)&&console.warn("what is that, a collapsed segment?",je),_n.contourId=An.contourId=je.contourId,At(An,je.otherEvent)>0&&(je.otherEvent.left=!0,An.left=!1),je.otherEvent.otherEvent=An,je.otherEvent=_n,Vt.push(An),Vt.push(_n),Vt}function un(je,qe){return je[0]*qe[1]-je[1]*qe[0]}function pn(je,qe){return je[0]*qe[0]+je[1]*qe[1]}function er(je,qe,Vt){var _n=function(ii,oi,$r,Ni,ro){var si=[oi[0]-ii[0],oi[1]-ii[1]],Po=[Ni[0]-$r[0],Ni[1]-$r[1]];function ao(mi,mo,Oo){return[mi[0]+mo*Oo[0],mi[1]+mo*Oo[1]]}var Bi=[$r[0]-ii[0],$r[1]-ii[1]],jo=un(si,Po),po=jo*jo,io=pn(si,si);if(po>0){var lo=un(Bi,Po)/jo;if(lo<0||lo>1)return null;var Hi=un(Bi,si)/jo;return Hi<0||Hi>1?null:lo===0||lo===1?[ao(ii,lo,si)]:Hi===0||Hi===1?[ao($r,Hi,Po)]:[ao(ii,lo,si)]}if((po=(jo=un(Bi,si))*jo)>0)return null;var Wr=pn(si,Bi)/io,Yi=Wr+pn(si,Po)/io,Io=Math.min(Wr,Yi),gr=Math.max(Wr,Yi);return Io<=1&&gr>=0?Io===1?[ao(ii,Io>0?Io:0,si)]:gr===0?[ao(ii,gr<1?gr:1,si)]:[ao(ii,Io>0?Io:0,si),ao(ii,gr<1?gr:1,si)]:null}(je.point,je.otherEvent.point,qe.point,qe.otherEvent.point),An=_n?_n.length:0;if(An===0||An===1&&(he(je.point,qe.point)||he(je.otherEvent.point,qe.otherEvent.point))||An===2&&je.isSubject===qe.isSubject)return 0;if(An===1)return he(je.point,_n[0])||he(je.otherEvent.point,_n[0])||kt(je,_n[0],Vt),he(qe.point,_n[0])||he(qe.otherEvent.point,_n[0])||kt(qe,_n[0],Vt),1;var Cn=[],Jn=!1,yr=!1;return he(je.point,qe.point)?Jn=!0:At(je,qe)===1?Cn.push(qe,je):Cn.push(je,qe),he(je.otherEvent.point,qe.otherEvent.point)?yr=!0:At(je.otherEvent,qe.otherEvent)===1?Cn.push(qe.otherEvent,je.otherEvent):Cn.push(je.otherEvent,qe.otherEvent),Jn&&yr||Jn?(qe.type=L,je.type=qe.inOut===je.inOut?$:q,Jn&&!yr&&kt(Cn[1].otherEvent,Cn[0].point,Vt),2):yr?(kt(Cn[0],Cn[1].point,Vt),3):Cn[0]!==Cn[3].otherEvent?(kt(Cn[0],Cn[1].point,Vt),kt(Cn[1],Cn[2].point,Vt),3):(kt(Cn[0],Cn[1].point,Vt),kt(Cn[3].otherEvent,Cn[2].point,Vt),3)}function qn(je,qe){if(je===qe)return 0;if(Kt(je.point,je.otherEvent.point,qe.point)!==0||Kt(je.point,je.otherEvent.point,qe.otherEvent.point)!==0)return he(je.point,qe.point)?je.isBelow(qe.otherEvent.point)?-1:1:je.point[0]===qe.point[0]?je.point[1]<qe.point[1]?-1:1:At(je,qe)===1?qe.isAbove(je.point)?-1:1:je.isBelow(qe.point)?-1:1;if(je.isSubject!==qe.isSubject)return je.isSubject?-1:1;var Vt=je.point,_n=qe.point;return Vt[0]===_n[0]&&Vt[1]===_n[1]?(Vt=je.otherEvent.point)[0]===(_n=qe.otherEvent.point)[0]&&Vt[1]===_n[1]?0:je.contourId>qe.contourId?1:-1:At(je,qe)===1?1:-1}var Tn=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function cn(je,qe,Vt,_n){var An,Cn=je+1,Jn=qe[je].point,yr=qe.length;for(Cn<yr&&(An=qe[Cn].point);Cn<yr&&An[0]===Jn[0]&&An[1]===Jn[1];){if(!Vt[Cn])return Cn;++Cn<yr&&(An=qe[Cn].point)}for(Cn=je-1;Vt[Cn]&&Cn>_n;)Cn--;return Cn}Tn.prototype.isExterior=function(){return this.holeOf==null};var Rr=Kn,Zn=Kn;function Kn(je,qe){if(!(this instanceof Kn))return new Kn(je,qe);if(this.data=je||[],this.length=this.data.length,this.compare=qe||wr,this.length>0)for(var Vt=(this.length>>1)-1;Vt>=0;Vt--)this._down(Vt)}function wr(je,qe){return je<qe?-1:je>qe?1:0}Kn.prototype={push:function(je){this.data.push(je),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var je=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),je}},peek:function(){return this.data[0]},_up:function(je){for(var qe=this.data,Vt=this.compare,_n=qe[je];je>0;){var An=je-1>>1,Cn=qe[An];if(Vt(_n,Cn)>=0)break;qe[je]=Cn,je=An}qe[je]=_n},_down:function(je){for(var qe=this.data,Vt=this.compare,_n=this.length>>1,An=qe[je];je<_n;){var Cn=1+(je<<1),Jn=Cn+1,yr=qe[Cn];if(Jn<this.length&&Vt(qe[Jn],yr)<0&&(Cn=Jn,yr=qe[Jn]),Vt(yr,An)>=0)break;qe[je]=yr,je=Cn}qe[je]=An}},Rr.default=Zn;var zr=Math.max,jr=Math.min,Gr=0;function Hr(je,qe,Vt,_n,An,Cn){var Jn,yr,ii,oi,$r,Ni;for(Jn=0,yr=je.length-1;Jn<yr;Jn++)if(oi=je[Jn+1],$r=new Le(ii=je[Jn],!1,void 0,qe),Ni=new Le(oi,!1,$r,qe),$r.otherEvent=Ni,ii[0]!==oi[0]||ii[1]!==oi[1]){$r.contourId=Ni.contourId=Vt,Cn||($r.isExteriorRing=!1,Ni.isExteriorRing=!1),At($r,Ni)>0?Ni.left=!0:$r.left=!0;var ro=ii[0],si=ii[1];An[0]=jr(An[0],ro),An[1]=jr(An[1],si),An[2]=zr(An[2],ro),An[3]=zr(An[3],si),_n.push($r),_n.push(Ni)}}var Vr=[];function Zi(je,qe,Vt){typeof je[0][0][0]=="number"&&(je=[je]),typeof qe[0][0][0]=="number"&&(qe=[qe]);var _n=function(si,Po,ao){var Bi=null;return si.length*Po.length==0&&(ao===Y?Bi=Vr:ao===re?Bi=si:ao!==ne&&ao!==de||(Bi=si.length===0?Po:si)),Bi}(je,qe,Vt);if(_n)return _n===Vr?null:_n;var An=[1/0,1/0,-1/0,-1/0],Cn=[1/0,1/0,-1/0,-1/0],Jn=function(si,Po,ao,Bi,jo){var po,io,lo,Hi,Wr,Yi,Io=new Rr(null,At);for(lo=0,Hi=si.length;lo<Hi;lo++)for(Wr=0,Yi=(po=si[lo]).length;Wr<Yi;Wr++)(io=Wr===0)&&Gr++,Hr(po[Wr],!0,Gr,Io,ao,io);for(lo=0,Hi=Po.length;lo<Hi;lo++)for(Wr=0,Yi=(po=Po[lo]).length;Wr<Yi;Wr++)io=Wr===0,jo===re&&(io=!1),io&&Gr++,Hr(po[Wr],!1,Gr,Io,Bi,io);return Io}(je,qe,An,Cn,Vt);if(_n=function(si,Po,ao,Bi,jo){var po=null;return(ao[0]>Bi[2]||Bi[0]>ao[2]||ao[1]>Bi[3]||Bi[1]>ao[3])&&(jo===Y?po=Vr:jo===re?po=si:jo!==ne&&jo!==de||(po=si.concat(Po))),po}(je,qe,An,Cn,Vt))return _n===Vr?null:_n;for(var yr=function(si){var Po,ao,Bi=function(lo){var Hi,Wr,Yi,Io,gr=[];for(Wr=0,Yi=lo.length;Wr<Yi;Wr++)((Hi=lo[Wr]).left&&Hi.inResult||!Hi.left&&Hi.otherEvent.inResult)&&gr.push(Hi);for(var mi=!1;!mi;)for(mi=!0,Wr=0,Yi=gr.length;Wr<Yi;Wr++)Wr+1<Yi&&At(gr[Wr],gr[Wr+1])===1&&(Io=gr[Wr],gr[Wr]=gr[Wr+1],gr[Wr+1]=Io,mi=!1);for(Wr=0,Yi=gr.length;Wr<Yi;Wr++)(Hi=gr[Wr]).otherPos=Wr;for(Wr=0,Yi=gr.length;Wr<Yi;Wr++)(Hi=gr[Wr]).left||(Io=Hi.otherPos,Hi.otherPos=Hi.otherEvent.otherPos,Hi.otherEvent.otherPos=Io);return gr}(si),jo={},po=[],io=function(){if(!jo[Po]){var lo=po.length,Hi=function(gr,mi,mo){var Oo=new Tn;if(gr.prevInResult!=null){var xo=gr.prevInResult,Ss=xo.outputContourId;if(xo.resultTransition>0){var Ki=mi[Ss];if(Ki.holeOf!=null){var ps=Ki.holeOf;mi[ps].holeIds.push(mo),Oo.holeOf=ps,Oo.depth=mi[Ss].depth}else mi[Ss].holeIds.push(mo),Oo.holeOf=Ss,Oo.depth=mi[Ss].depth+1}else Oo.holeOf=null,Oo.depth=mi[Ss].depth}else Oo.holeOf=null,Oo.depth=0;return Oo}(Bi[Po],po,lo),Wr=function(gr){jo[gr]=!0,gr<Bi.length&&Bi[gr]&&(Bi[gr].outputContourId=lo)},Yi=Po,Io=Po;for(Hi.points.push(Bi[Po].point);Wr(Yi),Wr(Yi=Bi[Yi].otherPos),Hi.points.push(Bi[Yi].point),!((Yi=cn(Yi,Bi,jo,Io))==Io||Yi>=Bi.length)&&Bi[Yi];);po.push(Hi)}};for(Po=0,ao=Bi.length;Po<ao;Po++)io();return po}(function(si,Po,ao,Bi,jo,po){for(var io,lo,Hi,Wr=new g(qn),Yi=[],Io=Math.min(Bi[2],jo[2]);si.length!==0;){var gr=si.pop();if(Yi.push(gr),po===Y&&gr.point[0]>Io||po===re&&gr.point[0]>Bi[2])break;if(gr.left){lo=io=Wr.insert(gr),io=io!==(Hi=Wr.minNode())?Wr.prev(io):null,lo=Wr.next(lo);var mi=io?io.key:null;if(ye(gr,mi,po),lo&&er(gr,lo.key,si)===2&&(ye(gr,mi,po),ye(lo.key,gr,po)),io&&er(io.key,gr,si)===2){var mo=io;ye(mi,(mo=mo!==Hi?Wr.prev(mo):null)?mo.key:null,po),ye(gr,mi,po)}}else lo=io=Wr.find(gr=gr.otherEvent),io&&lo&&(io=io!==Hi?Wr.prev(io):null,lo=Wr.next(lo),Wr.remove(gr),lo&&io&&er(io.key,lo.key,si))}return Yi}(Jn,0,0,An,Cn,Vt)),ii=[],oi=0;oi<yr.length;oi++){var $r=yr[oi];if($r.isExterior()){for(var Ni=[$r.points],ro=0;ro<$r.holeIds.length;ro++)Ni.push(yr[$r.holeIds[ro]].points);ii.push(Ni)}}return ii}var so={UNION:ne,DIFFERENCE:re,INTERSECTION:Y,XOR:de};l.diff=function(je,qe){return Zi(je,qe,re)},l.intersection=function(je,qe){return Zi(je,qe,Y)},l.operations=so,l.union=function(je,qe){return Zi(je,qe,ne)},l.xor=function(je,qe){return Zi(je,qe,de)},Object.defineProperty(l,"__esModule",{value:!0})})(o)}(0,fw.exports)),fw.exports);/**
 * martinez v0.7.4
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */function Ux(u,o,l,f){const g=[],b=f===0?(w,R,P,L,$,q)=>{w.push(new mn(q,P+(q-R)/(L-R)*($-P)))}:(w,R,P,L,$,q)=>{w.push(new mn(R+(q-P)/($-P)*(L-R),q))};for(const w of u){const R=[];for(const P of w){if(P.length<=2)continue;const L=[];for(let Y=0;Y<P.length-1;Y++){const ne=P[Y].x,re=P[Y].y,de=P[Y+1].x,ye=P[Y+1].y,be=f===0?ne:re,Le=f===0?de:ye;be<o?Le>o&&b(L,ne,re,de,ye,o):be>l?Le<l&&b(L,ne,re,de,ye,l):L.push(P[Y]),Le<o&&be>=o&&b(L,ne,re,de,ye,o),Le>l&&be<=l&&b(L,ne,re,de,ye,l)}let $=P[P.length-1];const q=f===0?$.x:$.y;q>=o&&q<=l&&L.push($),L.length&&($=L[L.length-1],L[0].x===$.x&&L[0].y===$.y||L.push(L[0]),R.push(L))}R.length&&g.push(R)}return g}function JP(u,o){const l=pw(u),f=pw([o]),g=hC.intersection(l,f);return g==null?[]:fC(g)}function eI(u,o){let f=pw(u,65536);for(;o.valid();o.next()){const[g,b]=o.get(),w=g.x*65536,R=g.y*65536,P=b.x*65536,L=b.y*65536,$=P-w,q=L-R,Y=Math.hypot($,q),ne=Math.trunc(q/Y*3),re=-Math.trunc($/Y*3);f=hC.diff(f,[[[w,R],[P,L],[P+ne,L+re],[w+ne,R+re],[w,R]]])}return fC(f,1/65536)}function pw(u,o=1){return[u.map(l=>l.map(f=>[f.x*o,f.y*o]))]}function fC(u,o=1){return u.map(l=>l.map((f,g)=>{const b=f.map(w=>new mn(w[0]*o,w[1]*o).round());return g>0&&b.reverse(),b}))}class mw{constructor(o,l){this.layoutVertexArray=new Vc,this.indexArray=new Fo,this.lineIndexArray=new Qu,this.triangleSegments=new _o,this.lineSegments=new _o,this.programConfigurations=new rh(o.layers,{zoom:o.zoom,lut:o.lut}),this.uploaded=!1,l&&(this.elevatedLayoutVertexArray=new bf)}update(o,l,f,g,b,w,R){this.programConfigurations.updatePaintArrays(o,l,b,f,g,w,R)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,XP.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.lineIndexBuffer=o.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=o.createVertexBuffer(this.elevatedLayoutVertexArray,iw.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(o,l,f,g,b,w){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,l,f,g,b,w)}}class qx{constructor(o){this.zoom=o.zoom,this.pixelRatio=o.pixelRatio,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new mw(o,!1),this.elevationBufferData=new mw(o,!0),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=o.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(o,l){}populate(o,l,f,g){this.hasPattern=jy("fill",this.layers,this.pixelRatio,l);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:R,id:P,index:L,sourceLayerIndex:$}of o){const q=this.layers[0]._featureFilter.needGeometry,Y=Gn(R,q);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),Y,f))continue;const ne=b?b.evaluate(Y,{},f,l.availableImages):void 0,re={id:P,properties:R.properties,type:R.type,sourceLayerIndex:$,index:L,geometry:q?Y.geometry:Vn(R,f,g),patterns:{},sortKey:ne};w.push(re)}b&&w.sort((R,P)=>R.sortKey-P.sortKey);for(const R of w){const{geometry:P,index:L,sourceLayerIndex:$}=R;if(this.hasPattern){const q=Bx("fill",this.layers,R,this.zoom,this.pixelRatio,l);this.patternFeatures.push(q)}else this.addFeature(R,P,L,f,{},l.availableImages,l.brightness,l.elevationFeatures);l.featureIndex.insert(o[L].feature,P,L,$,this.index)}}update(o,l,f,g,b,w,R){this.bufferData.update(o,l,f,g,b,w,R),this.elevationBufferData.update(o,l,f,g,b,w,R)}addFeatures(o,l,f,g,b,w){for(const R of this.patternFeatures)this.addFeature(R,R.geometry,R.index,l,f,g,w,o.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(o){this.bufferData.upload(o),this.elevationBufferData.upload(o),this.elevatedStructures&&this.elevatedStructures.upload(o)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(o,l,f,g,b,w=[],R,P){const L=zx(l,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(o,L,g,f,P):this.addGeometry(L,this.bufferData),this.bufferData.populatePaintArrays(o,f,b,w,g,R),this.elevationBufferData.populatePaintArrays(o,f,b,w,g,R)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(o){this.elevatedStructures&&this.elevatedStructures.construct(o)}addElevatedRoadFeature(o,l,f,g,b){const w=new Array,R=lc.getElevationFeature(o,b);if(R){{const P=this.clipPolygonsToTile(l,1);P.length>0&&w.push({polygons:P,elevationFeature:R,elevationTileID:f})}for(const P of w)if(P.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new cc(P.elevationTileID));const $=P.elevationFeature.isTunnel();let q=0;o.properties.hasOwnProperty(uC)&&(q=+o.properties[uC]);for(const Y of P.polygons)this.elevatedStructures.addPortalCandidates(P.elevationFeature.id,Y,$,P.elevationFeature,q)}P.elevationFeature.constantHeight==null&&(P.polygons=this.prepareElevatedPolygons(P.polygons,P.elevationFeature,P.elevationTileID));const L=new hw(f,P.elevationTileID);this.addElevatedGeometry(P.polygons,L,P.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,g)}}else this.addGeometry(l,this.bufferData)}addElevatedGeometry(o,l,f,g,b){const w={elevation:f,elevationSampler:l,bias:g,index:b},[R,P]=this.addGeometry(o,this.elevationBufferData,w);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:R,max:P}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,R),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,P))}addGeometry(o,l,f){let g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,w=null;f&&(w=f.elevationSampler.constantElevation(f.elevation,f.bias),w!=null&&(g=w,b=w));const R=(P,L,$)=>{if(f!=null)if(L.push(P),w!=null)l.elevatedLayoutVertexArray.emplaceBack(w),$.push(w);else{const q=f.elevationSampler.pointElevation(P,f.elevation,f.bias);l.elevatedLayoutVertexArray.emplaceBack(q),$.push(q),g=Math.min(g,q),b=Math.max(b,q)}};for(const P of o){let L=0;for(const Ie of P)L+=Ie.length;const $=l.triangleSegments.prepareSegment(L,l.layoutVertexArray,l.indexArray),q=$.vertexLength,Y=[],ne=[],re=[],de=[],ye=[],be=l.layoutVertexArray.length;for(const Ie of P){if(Ie.length===0)continue;Ie!==P[0]&&ne.push(Y.length/2);const he=l.lineSegments.prepareSegment(Ie.length,l.layoutVertexArray,l.lineIndexArray),Ee=he.vertexLength;f&&ye.push(l.layoutVertexArray.length-be),R(Ie[0],re,de),l.layoutVertexArray.emplaceBack(Ie[0].x,Ie[0].y),l.lineIndexArray.emplaceBack(Ee+Ie.length-1,Ee),Y.push(Ie[0].x),Y.push(Ie[0].y);for(let Oe=1;Oe<Ie.length;Oe++)R(Ie[Oe],re,de),l.layoutVertexArray.emplaceBack(Ie[Oe].x,Ie[Oe].y),l.lineIndexArray.emplaceBack(Ee+Oe-1,Ee+Oe),Y.push(Ie[Oe].x),Y.push(Ie[Oe].y);he.vertexLength+=Ie.length,he.primitiveLength+=Ie.length}const Le=D_(Y,ne);for(let Ie=0;Ie<Le.length;Ie+=3)l.indexArray.emplaceBack(q+Le[Ie],q+Le[Ie+1],q+Le[Ie+2]);if(Le.length>0&&f&&this.elevationMode==="hd-road-base"){const Ie=f.elevation.isTunnel(),he=f.elevation.safeArea,Ee=this.elevatedStructures.addVertices(re,de);this.elevatedStructures.addTriangles(Le,Ee,Ie);const Oe=ye.length;if(Oe>0){for(let Ve=0;Ve<Oe-1;Ve++)this.elevatedStructures.addRenderableRing(f.index,ye[Ve]+Ee,ye[Ve+1]-ye[Ve],Ie,he);this.elevatedStructures.addRenderableRing(f.index,ye[Oe-1]+Ee,re.length-ye[Oe-1],Ie,he)}}$.vertexLength+=L,$.primitiveLength+=Le.length/3}return[g,b]}prepareElevatedPolygons(o,l,f){const g=1/pt(f),b=[];for(const w of o){const R=eI(w,new dw(l,g));b.push(...R)}return b}clipPolygonsToTile(o,l){const f=-l,g=-l,b=xn+l,w=xn+l;let R=0;const P=[],L=[];for(;R<o.length;R++){const Y=o[R],ne=dy(Y);(ne.min.x>=f&&ne.max.x<=b&&ne.min.y>=g&&ne.max.y<=w?P:L).push(Y)}if(P.length===o.length)return o;const $=[new mn(f,g),new mn(b,g),new mn(b,w),new mn(f,w),new mn(f,g)],q=P;for(const Y of L)q.push(...JP(Y,$));return q}}let Rg,Ny,gw,pC;zn(qx,"FillBucket",{omit:["layers","patternFeatures"]}),zn(mw,"FillBufferData"),zn(cc,"ElevatedStructures");class Up{constructor(o,l,f,g){if(this.triangleCount=l.length/3,this.min=new mn(0,0),this.max=new mn(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0)return;const[b,w]=[o[0].clone(),o[0].clone()];for(let q=1;q<o.length;++q){const Y=o[q];b.x=Math.min(b.x,Y.x),b.y=Math.min(b.y,Y.y),w.x=Math.max(w.x,Y.x),w.y=Math.max(w.y,Y.y)}if(g){const q=Math.ceil(Math.max(w.x-b.x,w.y-b.y)/g);f=Math.max(f,q)}if(f===0)return;this.min=b,this.max=w;const R=this.max.sub(this.min);R.x=Math.max(R.x,1),R.y=Math.max(R.y,1);const P=Math.max(R.x,R.y)/f;this.cellsX=Math.max(1,Math.ceil(R.x/P)),this.cellsY=Math.max(1,Math.ceil(R.y/P)),this.xScale=1/P,this.yScale=1/P;const L=[];for(let q=0;q<this.triangleCount;q++){const Y=o[l[3*q+0]].sub(this.min),ne=o[l[3*q+1]].sub(this.min),re=o[l[3*q+2]].sub(this.min),de=uc(Math.floor(Math.min(Y.x,ne.x,re.x)),this.xScale,this.cellsX),ye=uc(Math.floor(Math.max(Y.x,ne.x,re.x)),this.xScale,this.cellsX),be=uc(Math.floor(Math.min(Y.y,ne.y,re.y)),this.yScale,this.cellsY),Le=uc(Math.floor(Math.max(Y.y,ne.y,re.y)),this.yScale,this.cellsY),Ie=new mn(0,0),he=new mn(0,0),Ee=new mn(0,0),Oe=new mn(0,0);for(let Ve=be;Ve<=Le;++Ve){Ie.y=he.y=Ve*P,Ee.y=Oe.y=(Ve+1)*P;for(let tt=de;tt<=ye;++tt)Ie.x=Ee.x=tt*P,he.x=Oe.x=(tt+1)*P,(eo(Y,ne,re,Ie,he,Oe)||eo(Y,ne,re,Ie,Oe,Ee))&&L.push({cellIdx:Ve*this.cellsX+tt,triIdx:q})}}if(L.length===0)return;L.sort((q,Y)=>q.cellIdx-Y.cellIdx||q.triIdx-Y.triIdx);let $=0;for(;$<L.length;){const q=L[$].cellIdx,Y={start:this.payload.length,len:0};for(;$<L.length&&L[$].cellIdx===q;)++Y.len,this.payload.push(L[$++].triIdx);this.cells[q]=Y}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(o,l){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>o.x||o.y>this.max.y||this.min.y>o.y)return;const f=uc(o.x-this.min.x,this.xScale,this.cellsX),g=uc(o.y-this.min.y,this.yScale,this.cellsY),b=this.cells[g*this.cellsX+f];if(b){this._lazyInitLookup();for(let w=0;w<b.len;w++){const R=this.payload[b.start+w],P=Math.floor(R/8),L=1<<R%8;if(!(this.lookup[P]&L)&&(this.lookup[P]|=L,l.push(R),l.length===this.triangleCount))return}}}query(o,l,f){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>l.x||o.y>this.max.y||this.min.y>l.y)return;this._lazyInitLookup();const g=uc(o.x-this.min.x,this.xScale,this.cellsX),b=uc(l.x-this.min.x,this.xScale,this.cellsX),w=uc(o.y-this.min.y,this.yScale,this.cellsY),R=uc(l.y-this.min.y,this.yScale,this.cellsY);for(let P=w;P<=R;P++)for(let L=g;L<=b;L++){const $=this.cells[P*this.cellsX+L];if($)for(let q=0;q<$.len;q++){const Y=this.payload[$.start+q],ne=Math.floor(Y/8),re=1<<Y%8;if(!(this.lookup[ne]&re)&&(this.lookup[ne]|=re,f.push(Y),f.length===this.triangleCount))return}}}}function uc(u,o,l){return Math.max(0,Math.min(l-1,Math.floor(u*o)))}zn(Up,"TriangleGridIndex");class yw{constructor(o){this.zoom=o.zoom,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.footprints=[]}updateFootprints(o,l){for(const f of this.footprints)l.push({footprint:f,id:o})}populate(o,l,f,g){const b=[];for(const{feature:w,id:R,index:P,sourceLayerIndex:L}of o){const $=this.layers[0]._featureFilter.needGeometry,q=Gn(w,$);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),q,f))continue;const Y={id:R,properties:w.properties,type:w.type,sourceLayerIndex:L,index:P,geometry:$?q.geometry:Vn(w,f,g),patterns:{}};b.push(Y)}for(const w of b){const{geometry:R,index:P,sourceLayerIndex:L}=w;this.addFeature(w,R,P,f,{},l.availableImages,l.brightness),l.featureIndex.insert(o[P].feature,R,P,L,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(o){}update(o,l,f,g,b,w,R){}destroy(){}addFeature(o,l,f,g,b,w=[],R){for(const P of zx(l,2)){const L=[],$=[],q=[],Y=new mn(1/0,1/0),ne=new mn(-1/0,-1/0);for(const ye of P)if(ye.length!==0){ye!==P[0]&&q.push($.length/2);for(let be=0;be<ye.length;be++)$.push(ye[be].x),$.push(ye[be].y),L.push(ye[be]),Y.x=Math.min(Y.x,ye[be].x),Y.y=Math.min(Y.y,ye[be].y),ne.x=Math.max(ne.x,ye[be].x),ne.y=Math.max(ne.y,ye[be].y)}const re=D_($,q),de=new Up(L,re,8,256);this.footprints.push({vertices:L,indices:re,grid:de,min:Y,max:ne})}}}zn(yw,"ClipBucket",{omit:["layers"]});const Hx=fi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),vw=fi([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),_w=fi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Wx=fi([{name:"a_join_normal_inside",components:3,type:"Int16"}]),mC=fi([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),gC=fi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:tI}=Hx,B_=Number.MAX_SAFE_INTEGER;function Vy(u,o,l,f){return u.order<o||u.order===B_||!(u.clipMask&l)||function(g,b){return b.length!==0&&b.find(w=>w===g)===void 0}(f,u.clipScope)}function Gx(u,o){return u.x-o.x||u.y-o.y}function yC(u,o){return Gx(u.min,o.min)===0&&Gx(u.max,o.max)===0}function xw(u,o){return!(u.min.x>o.max.x||u.max.x<o.min.x||u.min.y>o.max.y||u.max.y<o.min.y)}function $y(u,o){if(u.length!==o.length)return!1;for(let l=0;l<u.length;l++)if(u[l].sourceId!==o[l].sourceId||!yC(u[l],o[l])||u[l].order!==o[l].order||u[l].clipMask!==o[l].clipMask||!ea(u[l].clipScope,o[l].clipScope))return!1;return!0}function j_(u,o,l){const f=1/xn,g=1/(1<<l.canonical.z),b=(o.x*f+l.canonical.x)*g+l.wrap,w=(o.y*f+l.canonical.y)*g;return{min:new mn((u.x*f+l.canonical.x)*g+l.wrap,(u.y*f+l.canonical.y)*g),max:new mn(b,w)}}function bw(u,o,l){const f=1<<l.canonical.z,g=((o.x-l.wrap)*f-l.canonical.x)*xn,b=(o.y*f-l.canonical.y)*xn;return{min:new mn(((u.x-l.wrap)*f-l.canonical.x)*xn,(u.y*f-l.canonical.y)*xn),max:new mn(g,b)}}function vC(u,o,l,f,g,b,w){const R=u.indices,P=u.vertices,L=[];for(let $=f;$<f+g;$+=3){const q=o[l[$+0]+b],Y=o[l[$+1]+b],ne=o[l[$+2]+b],re=Math.min(q.x,Y.x,ne.x),de=Math.max(q.x,Y.x,ne.x),ye=Math.min(q.y,Y.y,ne.y),be=Math.max(q.y,Y.y,ne.y);L.length=0,u.grid.query(new mn(re,ye),new mn(de,be),L);for(let Le=0;Le<L.length;Le++){const Ie=L[Le];if(eo(P[R[3*Ie+0]],P[R[3*Ie+1]],P[R[3*Ie+2]],q,Y,ne,w))return!0}}return!1}function Uy(u,o,l,f){if(!u||!l)return!1;let g=u.vertices;if(!o.canonical.equals(f.canonical)||o.wrap!==f.wrap){if(l.vertices.length<u.vertices.length)return Uy(l,f,u,o);const b=o.canonical,w=f.canonical,R=Math.pow(2,w.z-b.z);g=u.vertices.map(P=>new mn((P.x+b.x*xn)*R-w.x*xn,(P.y+b.y*xn)*R-w.y*xn))}return vC(l,g,u.indices,0,u.indices.length,0,0)}function _C(u,o,l,f){const g=Math.pow(2,f.z-l.z);return new mn((u+l.x*xn)*g-f.x*xn,(o+l.y*xn)*g-f.y*xn)}function ww(u,o){const l=[];o.grid.queryPoint(u,l);const f=o.indices,g=o.vertices;for(let b=0;b<l.length;b++){const w=l[b];if(pi([g[f[3*w+0]],g[f[3*w+1]],g[f[3*w+2]]],u))return!0}return!1}const Yx=[new mn(0,0),new mn(xn,0),new mn(xn,xn),new mn(0,xn)];function Sw(u,o){const l=[];let f=[];if(!o||u.length<2)return[u];if(u.length===2)return Ji(u[0],u[1],Yx)?[u]:[];for(let g=0;g<u.length+2;g++){const b=u[g%u.length],w=u[(g+1)%u.length],R=Ji(g===0?u[u.length-1]:u[(g-1)%u.length],b,Yx),P=Ji(b,w,Yx),L=R||P;L&&f.push(b),L&&P||f.length>0&&(f.length>1&&l.push(f),f=[])}return f.length>1&&l.push(f),l}const Xx=oh.VectorTileFeature.types,Tw=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],xC=["fill-extrusion-flood-light-ground-radius"],Zx=Math.pow(2,13),nI=Math.pow(2,15)-1,bC=new mn(0,1),sh=2147483648;function Dg(u,o,l,f,g,b,w,R){u.emplaceBack((o<<1)+w,(l<<1)+b,(Math.floor(f*Zx)<<1)+g,Math.round(R))}function qp(u,o,l){u.emplaceBack(o.x*xn,o.y*xn,l?1:0)}function qy(u,o,l,f,g,b){u.emplaceBack(o.x,o.y,(l.x<<1)+f,(l.y<<1)+g,b)}function Hy(u,o,l){u.emplaceBack(o.x,o.y,o.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Kx{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class kf{constructor(){this.centroidXY=new mn(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new mn(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new mn(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new mn(this.max.x-this.min.x,this.max.y-this.min.y)}}class Of{constructor(){this.acc=new mn(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,l){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=l.x,o.min.y=o.max.y=l.y)}appendEdge(o,l,f){this.accCount++,this.acc._add(l);let g=!!this.borders;l.x<o.min.x?(o.min.x=l.x,g=!0):l.x>o.max.x&&(o.max.x=l.x,g=!0),l.y<o.min.y?(o.min.y=l.y,g=!0):l.y>o.max.y&&(o.max.y=l.y,g=!0),((l.x===0||l.x===xn)&&l.x===f.x)!=((l.y===0||l.y===xn)&&l.y===f.y)&&this.processBorderOverlap(l,f),g&&this.checkBorderIntersection(l,f)}checkBorderIntersection(o,l){l.x<0!=o.x<0&&this.addBorderIntersection(0,lr(l.y,o.y,(0-l.x)/(o.x-l.x))),l.x>xn!=o.x>xn&&this.addBorderIntersection(1,lr(l.y,o.y,(xn-l.x)/(o.x-l.x))),l.y<0!=o.y<0&&this.addBorderIntersection(2,lr(l.x,o.x,(0-l.y)/(o.y-l.y))),l.y>xn!=o.y>xn&&this.addBorderIntersection(3,lr(l.x,o.x,(xn-l.y)/(o.y-l.y)))}addBorderIntersection(o,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];l<f[0]&&(f[0]=l),l>f[1]&&(f[1]=l)}processBorderOverlap(o,l){if(o.x===l.x){if(o.y===l.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,l.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,l.x),this.addBorderIntersection(f,o.x)}}centroid(){return this.accCount===0?new mn(0,0):new mn(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,l)=>o+ +(l[0]!==Number.MAX_VALUE),0):0}}function Lf(u,o){const l=u.add(o)._unit(),f=Ze(u.x*l.x+u.y*l.y,-1,1);var g,b,w;return g=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(g)))/4*nI*((b=u).x*(w=o).y-b.y*w.x<0?-1:1)}const N_=[u=>u.x<0,u=>u.x>xn,u=>u.y<0,u=>u.y>xn];function V_(u,o,l,f){const g=[4];if(f===0)return g;l._mult(f);const b=u.sub(l),w=o.sub(l),R=[u,o,b,w];for(let P=0;P<4;P++)for(const L of R)if(N_[P](L)){g.push(P);break}return g}class zf{constructor(o){this.vertexArray=new Dy,this.indexArray=new Fo,this.programConfigurations=new rh(o.layers,{zoom:o.zoom,lut:o.lut},l=>xC.includes(l)),this._segments=new _o,this.hiddenByLandmarkVertexArray=new Mf,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new _o}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,l,f,g=!1){const b=o.length;if(b>2){let w=Math.max(0,this._segments.get().length-1);const R=this._segments._prepareSegment(4*b,this.vertexArray.length,2*this._segmentToGroundQuads[w].length);let P;w!==this._segments.get().length-1&&(w++,this._segmentToGroundQuads[w]=[],this._segmentToRegionTriCounts[w]=[0,0,0,0,0]);{const L=o[0],$=o[1];P=Lf(L.sub(o[b-1])._perp()._unit(),$.sub(L)._perp()._unit())}for(let L=0;L<b;L++){const $=L===b-1?0:L+1,q=o[L],Y=o[$],ne=o[$===b-1?0:$+1],re=Y.sub(q)._perp()._unit(),de=Lf(re,ne.sub(Y)._perp()._unit()),ye=P,be=de;if(Jx(q,Y,l)||g&&U_(q,l)&&U_(Y,l)){P=de;continue}const Le=R.vertexLength;qy(this.vertexArray,q,Y,1,1,ye),qy(this.vertexArray,q,Y,1,0,ye),qy(this.vertexArray,q,Y,0,1,be),qy(this.vertexArray,q,Y,0,0,be),R.vertexLength+=4;const Ie=V_(q,Y,re,f);for(const he of Ie)this._segmentToGroundQuads[w].push({id:Le,region:he}),this._segmentToRegionTriCounts[w][he]+=2,R.primitiveLength+=2;P=de}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),l=o.length;for(let f=0;f<l;f++)this._segmentToGroundQuads[f].sort((g,b)=>g.region-b.region);for(let f=0;f<l;f++){const g=this._segmentToGroundQuads[f],b=o[f],w=this._segmentToRegionTriCounts[f];w.reduce((P,L)=>P+L,0);let R=0;for(let P=0;P<=4;P++){const L=w[P];if(L!==0){let $=this.regionSegments[P];$||($=this.regionSegments[P]=new _o);const q={vertexOffset:b.vertexOffset,primitiveOffset:b.primitiveOffset+R,vertexLength:b.vertexLength,primitiveLength:L};$.get().push(q)}R+=L}for(let P=0;P<g.length;P++){const L=g[P].id;this.indexArray.emplaceBack(L,L+1,L+3),this.indexArray.emplaceBack(L,L+3,L+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,l,f,g,b,w){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,l,f,g,b,w)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,vw.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,l,f,g,b,w,R){this.hasData()&&this.programConfigurations.updatePaintArrays(o,l,f,g,b,w,R)}updateHiddenByLandmark(o){if(!this.hasData())return;const l=o.groundVertexCount+o.groundVertexArrayOffset;if(o.groundVertexCount===0)return;const f=o.flags&sh?1:0;for(let g=o.groundVertexArrayOffset;g<l;++g)this.hiddenByLandmarkVertexArray.emplace(g,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,mC.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const l=this.regionSegments[o];l&&l.destroy()}}}}class Qx{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.pixelRatio=o.pixelRatio,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Fo,this.footprintVertices=new Vc,this.footprintSegments=[],this.layoutVertexArray=new Zd,this.centroidVertexArray=new x_,this.wallVertexArray=new w_,this.indexArray=new Fo,this.programConfigurations=new rh(o.layers,{zoom:o.zoom,lut:o.lut},l=>Tw.includes(l)),this.segments=new _o,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.groundEffect=new zf(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(o,l){}populate(o,l,f,g){this.features=[],this.hasPattern=jy("fill-extrusion",this.layers,this.pixelRatio,l),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=pt(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:b,id:w,index:R,sourceLayerIndex:P}of o){const L=this.layers[0]._featureFilter.needGeometry,$=Gn(b,L);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),$,f))continue;const q={id:w,sourceLayerIndex:P,index:R,geometry:L?$.geometry:Vn(b,f,g),properties:b.properties,type:b.type,patterns:{}},Y=this.layoutVertexArray.length,ne=Xx[q.type]==="Polygon";if(this.hasPattern)this.features.push(Bx("fill-extrusion",this.layers,q,this.zoom,this.pixelRatio,l));else if(this.wallMode)for(const re of q.geometry)for(const de of Sw(re,ne))this.addFeature(q,[de],R,f,{},l.availableImages,g,l.brightness);else this.addFeature(q,q.geometry,R,f,{},l.availableImages,g,l.brightness);l.featureIndex.insert(b,q.geometry,R,P,this.index,Y)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,l,f,g,b,w){for(const R of this.features){const P=Xx[R.type]==="Polygon",{geometry:L}=R;if(this.wallMode)for(const $ of L)for(const q of Sw($,P))this.addFeature(R,[q],R.index,l,f,g,b,w);else this.addFeature(R,L,R.index,l,f,g,b,w)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,l,f,g,b,w,R){this.programConfigurations.updatePaintArrays(o,l,b,f,g,w,R),this.groundEffect.update(o,l,b,f,g,w,R)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,tI),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.wallVertexBuffer=o.createVertexBuffer(this.wallVertexArray,Wx.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,gC.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,_w.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,f,g,b,w,R,P){const L=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(o,{})/this.tileToMeter,$=[new mn(0,0),new mn(xn,xn)],q=R.projection,Y=q.name==="globe",ne=this.wallMode||Xx[o.type]==="Polygon",re=new Of;re.centroidDataIndex=this.centroidData.length;const de=new kf,ye=this.layers[0].paint.get("fill-extrusion-base").evaluate(o,{},g)<=0,be=this.layers[0].paint.get("fill-extrusion-height").evaluate(o,{},g);let Le;if(de.height=be,de.vertexArrayOffset=this.layoutVertexArray.length,de.groundVertexArrayOffset=this.groundEffect.vertexArray.length,Y&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new $c),this.wallMode){if(Y)return void Ir("Non zero fill-extrusion-line-width is not yet supported on globe.");if(l.length!==1)return;Le=function(at){const ht=at[0].x===at[at.length-1].x&&at[0].y===at[at.length-1].y;(function(Tn){let cn=0;const Rr=Tn.length;for(let Zn=0;Zn<Rr;Zn++)cn+=(Tn[(Zn+1)%Rr].x-Tn[Zn].x)*(Tn[(Zn+1)%Rr].y+Tn[Zn].y);return cn>=0})(at)||(at=at.reverse());const nn={geometry:[],joinNormals:[],indices:[]},Xt=[],Qt=[],ln=[];let It=at.length;for(;It>=2&&at[It-1].equals(at[It-2]);)It--;if(It<(ht?3:2))return nn;let Kt,At,kt,un,pn,er=0;for(;er<It-1&&at[er].equals(at[er+1]);)er++;ht&&(Kt=at[It-2],pn=at[er].sub(Kt)._unit()._perp());for(let Tn=er;Tn<It;Tn++){if(kt=Tn===It-1?ht?at[er+1]:void 0:at[Tn+1],kt&&at[Tn].equals(kt))continue;pn&&(un=pn),Kt&&(At=Kt),Kt=at[Tn],pn=kt?kt.sub(Kt)._unit()._perp():un,un=un||pn;let cn=un.add(pn);cn.x===0&&cn.y===0||cn._unit();const Rr=cn.x*pn.x+cn.y*pn.y,Zn=Rr!==0?1/Rr:1/0,Kn=un.x*pn.y-un.y*pn.x>0;let wr="miter";const zr=2;wr==="miter"&&Zn>zr&&(wr="bevel"),wr==="bevel"&&(Zn>100&&(wr="flipbevel"),Zn<zr&&(wr="miter"));const jr=(Gr,Hr,Vr,Zi)=>{const so=new mn(Gr.x,Gr.y),je=new mn(Gr.x,Gr.y);so.x+=Hr.x*Zi,so.y+=Hr.y*Zi,je.x-=Hr.x*Math.max(Vr,1),je.y-=Hr.y*Math.max(Vr,1),ln.push(Hr),Xt.push(so),Qt.push(je)};if(wr==="miter")cn._mult(Zn),jr(Kt,cn,0,0);else if(wr==="flipbevel")cn=pn.mult(-1),jr(Kt,cn,0,0),jr(Kt,cn.mult(-1),0,0);else{const Gr=-Math.sqrt(Zn*Zn-1),Hr=Kn?Gr:0,Vr=Kn?0:Gr;At&&jr(Kt,un,Hr,Vr),kt&&jr(Kt,pn,Hr,Vr)}}nn.geometry=[...Xt,...Qt.reverse(),Xt[0]],nn.joinNormals=[...ln,...ln.reverse(),ln[ln.length-1]];const qn=nn.geometry.length-1;for(let Tn=0;Tn<qn/2;Tn++)if(Tn+1<qn/2){let cn=Tn,Rr=Tn+1,Zn=qn-1-Tn,Kn=qn-2-Tn;cn=cn===0?qn-1:cn-1,Rr=Rr===0?qn-1:Rr-1,Zn=Zn===0?qn-1:Zn-1,Kn=Kn===0?qn-1:Kn-1,nn.indices.push(Zn),nn.indices.push(Rr),nn.indices.push(cn),nn.indices.push(Zn),nn.indices.push(Kn),nn.indices.push(Rr)}return nn}(l[0]),l=[Le.geometry]}const Ie=(at,ht)=>at<(ht.length-1)/2||at===ht.length-1,he=this.wallMode?[l]:zx(l,500);for(let at=he.length-1;at>=0;at--){const ht=he[at];(ht.length===0||(Ee=ht[0]).every(zt=>zt.x<=0)||Ee.every(zt=>zt.x>=xn)||Ee.every(zt=>zt.y<=0)||Ee.every(zt=>zt.y>=xn))&&he.splice(at,1)}var Ee;let Oe;if(Y)Oe=H_(he,$,g);else{Oe=[];for(const at of he)Oe.push({polygon:at,bounds:$})}const Ve=ne?this.edgeRadius:0,tt=Ve>0&&this.zoom<17,it=(at,ht)=>{if(at.length===0)return!1;const zt=at[at.length-1];return ht.x===zt.x&&ht.y===zt.y};for(const{polygon:at,bounds:ht}of Oe){let zt=0,nn=0;for(const It of at)ne&&!It[0].equals(It[It.length-1])&&It.push(It[0]),nn+=ne?It.length-1:It.length;const Xt=this.segments.prepareSegment((ne?5:4)*nn,this.layoutVertexArray,this.indexArray);de.footprintSegIdx<0&&(de.footprintSegIdx=this.footprintSegments.length),de.polygonSegIdx<0&&(de.polygonSegIdx=this.polygonSegments.length);const Qt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},ln=new Kx;if(ln.vertexOffset=this.footprintVertices.length,ln.indexOffset=3*this.footprintIndices.length,ln.ringIndices=[],ne){const It=[],Kt=[];zt=Xt.vertexLength;for(let kt=0;kt<at.length;kt++){const un=at[kt];un.length&&kt!==0&&Kt.push(It.length/2);const pn=[];let er,qn;er=un[1].sub(un[0])._perp()._unit(),ln.ringIndices.push(un.length-1);for(let Tn=1;Tn<un.length;Tn++){const cn=un[Tn],Rr=un[Tn===un.length-1?1:Tn+1],Zn=cn.clone();if(Ve){qn=Rr.sub(cn)._perp()._unit();const Kn=er.add(qn)._unit(),wr=Ve*Math.min(4,1/(er.x*Kn.x+er.y*Kn.y));Zn.x+=wr*Kn.x,Zn.y+=wr*Kn.y,Zn.x=Math.round(Zn.x),Zn.y=Math.round(Zn.y),er=qn}if(!ye||Ve!==0&&!tt||it(pn,Zn)||pn.push(Zn),Dg(this.layoutVertexArray,Zn.x,Zn.y,0,0,1,1,0),this.wallMode){const Kn=Ie(Tn,un);qp(this.wallVertexArray,Le.joinNormals[Tn],!Kn)}Xt.vertexLength++,this.footprintVertices.emplaceBack(cn.x,cn.y),It.push(cn.x,cn.y),Y&&Hy(this.layoutVertexExtArray,q.projectTilePoint(Zn.x,Zn.y,g),q.upVector(g,Zn.x,Zn.y))}ye&&(Ve===0||tt)&&(pn.length!==0&&it(pn,pn[0])&&pn.pop(),this.groundEffect.addData(pn,ht,L))}const At=this.wallMode?Le.indices:D_(It,Kt);for(let kt=0;kt<At.length;kt+=3)this.footprintIndices.emplaceBack(ln.vertexOffset+At[kt+0],ln.vertexOffset+At[kt+1],ln.vertexOffset+At[kt+2]),this.indexArray.emplaceBack(zt+At[kt],zt+At[kt+2],zt+At[kt+1]),Xt.primitiveLength++;ln.indexCount+=At.length,ln.vertexCount+=this.footprintVertices.length-ln.vertexOffset}for(let It=0;It<at.length;It++){const Kt=at[It];re.startRing(de,Kt[0]);let At=Kt.length>4&&Cw(Kt[Kt.length-2],Kt[0],Kt[1]),kt=Ve?$_(Kt[Kt.length-2],Kt[0],Kt[1],Ve):0;const un=[];let pn,er,qn;er=Kt[1].sub(Kt[0])._perp()._unit();let Tn=!0;for(let cn=1,Rr=0;cn<Kt.length;cn++){let Zn=Kt[cn-1],Kn=Kt[cn];const wr=Kt[cn===Kt.length-1?1:cn+1];if(re.appendEdge(de,Kn,Zn),Jx(Kn,Zn,ht)){Ve&&(er=wr.sub(Kn)._perp()._unit(),Tn=!Tn);continue}const zr=Kn.sub(Zn)._perp(),jr=zr.x/(Math.abs(zr.x)+Math.abs(zr.y)),Gr=zr.y>0?1:0,Hr=Zn.dist(Kn);if(Rr+Hr>32768&&(Rr=0),Ve){qn=wr.sub(Kn)._perp()._unit();let je=wC(Zn,Kn,wr,Ew(er,qn),Ve);isNaN(je)&&(je=0);const qe=Kn.sub(Zn)._unit();Zn=Zn.add(qe.mult(kt))._round(),Kn=Kn.add(qe.mult(-je))._round(),kt=je,er=qn,ye&&this.zoom>=17&&(it(un,Zn)||un.push(Zn),it(un,Kn)||un.push(Kn))}const Vr=Xt.vertexLength,Zi=Kt.length>4&&Cw(Zn,Kn,wr);let so=SC(Rr,At,Tn);if(Dg(this.layoutVertexArray,Zn.x,Zn.y,jr,Gr,0,0,so),Dg(this.layoutVertexArray,Zn.x,Zn.y,jr,Gr,0,1,so),this.wallMode){const je=Ie(cn-1,Kt),qe=Le.joinNormals[cn-1];qp(this.wallVertexArray,qe,je),qp(this.wallVertexArray,qe,je)}if(Rr+=Hr,so=SC(Rr,Zi,!Tn),At=Zi,Dg(this.layoutVertexArray,Kn.x,Kn.y,jr,Gr,0,0,so),Dg(this.layoutVertexArray,Kn.x,Kn.y,jr,Gr,0,1,so),this.wallMode){const je=Ie(cn,Kt),qe=Le.joinNormals[cn];qp(this.wallVertexArray,qe,je),qp(this.wallVertexArray,qe,je)}if(Xt.vertexLength+=4,this.indexArray.emplaceBack(Vr+0,Vr+1,Vr+2),this.indexArray.emplaceBack(Vr+1,Vr+3,Vr+2),Xt.primitiveLength+=2,Ve){const je=zt+(cn===1?Kt.length-2:cn-2),qe=cn===1?zt:je+1;if(this.indexArray.emplaceBack(Vr+1,je,Vr+3),this.indexArray.emplaceBack(je,qe,Vr+3),Xt.primitiveLength+=2,pn===void 0&&(pn=Vr),!Jx(wr,Kt[cn],ht)){const Vt=cn===Kt.length-1?pn:Xt.vertexLength;this.indexArray.emplaceBack(Vr+2,Vr+3,Vt),this.indexArray.emplaceBack(Vr+3,Vt+1,Vt),this.indexArray.emplaceBack(Vr+3,qe,Vt+1),Xt.primitiveLength+=3}Tn=!Tn}if(Y){const je=this.layoutVertexExtArray,qe=q.projectTilePoint(Zn.x,Zn.y,g),Vt=q.projectTilePoint(Kn.x,Kn.y,g),_n=q.upVector(g,Zn.x,Zn.y),An=q.upVector(g,Kn.x,Kn.y);Hy(je,qe,_n),Hy(je,qe,_n),Hy(je,Vt,An),Hy(je,Vt,An)}}ne&&(zt+=Kt.length-1),ye&&Ve&&this.zoom>=17&&(un.length!==0&&it(un,un[0])&&un.pop(),this.groundEffect.addData(un,ht,L,Ve>0))}this.footprintSegments.push(ln),Qt.triangleCount=this.indexArray.length-Qt.triangleArrayOffset,this.polygonSegments.push(Qt),++de.footprintSegLen,++de.polygonSegLen}if(de.vertexCount=this.layoutVertexArray.length-de.vertexArrayOffset,de.groundVertexCount=this.groundEffect.vertexArray.length-de.groundVertexArrayOffset,de.vertexCount!==0){if(de.centroidXY=re.borders?bC:this.encodeCentroid(re,de),this.centroidData.push(de),re.borders){this.featuresOnBorder.push(re);const at=this.featuresOnBorder.length-1;for(let ht=0;ht<re.borders.length;ht++)re.borders[ht][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[ht].push(at)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g,P),this.groundEffect.addPaintPropertiesData(o,f,b,w,g,P),this.maxHeight=Math.max(this.maxHeight,be)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((l,f)=>this.featuresOnBorder[l].borders[o][0]-this.featuresOnBorder[f].borders[o][0])}splitToSubtiles(){const o=[];for(let R=0;R<this.centroidData.length;R++){const P=this.centroidData[R],L=+(P.min.y+P.max.y>xn),$=2*L+(+(P.min.x+P.max.x>xn)^L);for(let q=0;q<P.polygonSegLen;q++){const Y=P.polygonSegIdx+q;o.push({centroidIdx:R,subtile:$,polygonSegmentIdx:Y,triangleSegmentIdx:this.polygonSegments[Y].triangleSegIdx})}}const l=new Fo;o.sort((R,P)=>R.triangleSegmentIdx===P.triangleSegmentIdx?R.subtile-P.subtile:R.triangleSegmentIdx-P.triangleSegmentIdx);let f=0,g=0,b=0;for(const R of o){if(R.triangleSegmentIdx!==f)break;b++}const w=o.length;for(;g!==o.length;){f=o[g].triangleSegmentIdx;let R=0,P=g,L=g;for(let $=P;$<b&&o[$].subtile===R;$++)L++;for(;P!==b;){const $=o[P];R=$.subtile;const q=this.centroidData[$.centroidIdx].min.clone(),Y=this.centroidData[$.centroidIdx].max.clone(),ne={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:l.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let re=P;re<L;re++){const de=o[re],ye=this.polygonSegments[de.polygonSegmentIdx],be=this.centroidData[de.centroidIdx].min,Le=this.centroidData[de.centroidIdx].max,Ie=this.indexArray.uint16;for(let he=ye.triangleArrayOffset;he<ye.triangleArrayOffset+ye.triangleCount;he++)l.emplaceBack(Ie[3*he],Ie[3*he+1],Ie[3*he+2]);ne.primitiveLength+=ye.triangleCount,q.x=Math.min(q.x,be.x),q.y=Math.min(q.y,be.y),Y.x=Math.max(Y.x,Le.x),Y.y=Math.max(Y.y,Le.y)}ne.primitiveLength>0&&this.triangleSubSegments.push({segment:ne,min:q,max:Y}),P=L;for(let re=P;re<b&&o[re].subtile===o[P].subtile;re++)L++}g=b;for(let $=g;$<w&&o[$].triangleSegmentIdx===o[g].triangleSegmentIdx;$++)b++}l._trim(),this.indexArray=l}getVisibleSegments(o,l,f){const g=new _o;if(this.wallMode){for(const de of this.triangleSubSegments)g.segments.push(de.segment);return g}let b=0,w=0;const R=1<<o.canonical.z;if(l){const de=l.getMinMaxForTile(o);de&&(b=de.min,w=de.max)}w+=this.maxHeight;const P=o.toUnwrapped();let L;const $=[P.canonical.x/R+P.wrap,P.canonical.y/R],q=[(P.canonical.x+1)/R+P.wrap,(P.canonical.y+1)/R],Y=(de,ye,be)=>[de[0]*(1-be[0])+ye[0]*be[0],de[1]*(1-be[1])+ye[1]*be[1]],ne=[],re=[];for(const de of this.triangleSubSegments){ne[0]=de.min.x/xn,ne[1]=de.min.y/xn,re[0]=de.max.x/xn,re[1]=de.max.y/xn;const ye=Y($,q,ne),be=Y($,q,re);if(new Fi([ye[0],ye[1],b],[be[0],be[1],w]).intersectsPrecise(f)===0){L&&(g.segments.push(L),L=void 0);continue}const Le=de.segment;L&&L.vertexOffset!==Le.vertexOffset&&(g.segments.push(L),L=void 0),L?(L.vertexLength+=Le.vertexLength,L.primitiveLength+=Le.primitiveLength):L={vertexOffset:Le.vertexOffset,primitiveLength:Le.primitiveLength,vertexLength:Le.vertexLength,primitiveOffset:Le.primitiveOffset,sortKey:void 0,vaos:{}}}return L&&g.segments.push(L),g}encodeCentroid(o,l){const f=o.centroid(),g=l.span(),b=Math.min(7,Math.round(g.x*this.tileToMeter/10)),w=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new mn(Ze(f.x,1,xn-1)<<3|b,Ze(f.y,1,xn-1)<<3|w)}encodeBorderCentroid(o){if(!o.borders)return new mn(0,0);const l=o.borders,f=Number.MAX_VALUE;if(l[0][0]!==f||l[1][0]!==f){const g=l[0][0]!==f?0:1;return new mn(6|(l[0][0]!==f?0:65528),(l[g][0]+l[g][1])/2<<3|6)}{const g=l[2][0]!==f?2:3;return new mn((l[g][0]+l[g][1])/2<<3|6,6|(l[2][0]!==f?0:65528))}}showCentroid(o){const l=this.centroidData[o.centroidDataIndex];l.flags&=sh,l.centroidXY.x=0,l.centroidXY.y=0,this.writeCentroidToBuffer(l)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const l=o.vertexArrayOffset,f=o.vertexCount+o.vertexArrayOffset,g=o.flags&sh?bC:o.centroidXY,b=this.centroidVertexArray.geta_centroid_pos0(l);if(this.centroidVertexArray.geta_centroid_pos1(l)!==g.y||b!==g.x){for(let w=l;w<f;++w)this.centroidVertexArray.emplace(w,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,l,f){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const g=l.getReplacementRegionsForTile(o.toUnwrapped());if($y(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const w of this.centroidData)w.flags&=2147483647;const b=[];for(const w of this.activeReplacements){if(w.order<f)continue;const R=Math.max(1,Math.pow(2,w.footprintTileId.canonical.z-o.canonical.z));for(const P of this.centroidData)if(!(P.flags&sh||w.min.x>P.max.x||P.min.x>w.max.x||w.min.y>P.max.y||P.min.y>w.max.y))for(let L=0;L<P.footprintSegLen;L++){const $=this.footprintSegments[P.footprintSegIdx+L];if(b.length=0,TC(this.footprintVertices,$.vertexOffset,$.vertexCount,w.footprintTileId.canonical,o.canonical,b),vC(w.footprint,b,this.footprintIndices.uint16,$.indexOffset,$.indexCount,-$.vertexOffset,-R)){P.flags|=sh;break}}}for(const w of this.centroidData)this.writeCentroidToBuffer(w);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,l,f){let g=!1;for(let b=0;b<f.footprintSegLen;b++){const w=this.footprintSegments[f.footprintSegIdx+b];let R=0;for(const P of w.ringIndices){for(let L=R,$=P+R-1;L<P+R;$=L++){const q=this.footprintVertices.int16[2*(L+w.vertexOffset)+0],Y=this.footprintVertices.int16[2*(L+w.vertexOffset)+1],ne=this.footprintVertices.int16[2*($+w.vertexOffset)+1];Y>l!=ne>l&&o<(this.footprintVertices.int16[2*($+w.vertexOffset)+0]-q)*(l-Y)/(ne-Y)+q&&(g=!g)}R=P}}return g}getHeightAtTileCoord(o,l){let f=Number.NEGATIVE_INFINITY,g=!0;const b=4*(o+xn)*xn+(l+xn);if(this.partLookup.hasOwnProperty(b)){const w=this.partLookup[b];return w?{height:w.height,hidden:!!(w.flags&sh)}:void 0}for(const w of this.centroidData)o>w.max.x||w.min.x>o||l>w.max.y||w.min.y>l||this.footprintContainsPoint(o,l,w)&&w&&w.height>f&&(f=w.height,this.partLookup[b]=w,g=!!(w.flags&sh));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:g};this.partLookup[b]=void 0}}function Ew(u,o){const l=u.add(o)._unit();return u.x*l.x+u.y*l.y}function $_(u,o,l,f){const g=o.sub(u)._perp()._unit(),b=l.sub(o)._perp()._unit();return wC(u,o,l,Ew(g,b),f)}function wC(u,o,l,f,g){const b=Math.sqrt(1-f*f);return Math.min(u.dist(o)/3,o.dist(l)/3,g*b/f)}function Jx(u,o,l){return u.x<l[0].x&&o.x<l[0].x||u.x>l[1].x&&o.x>l[1].x||u.y<l[0].y&&o.y<l[0].y||u.y>l[1].y&&o.y>l[1].y}function U_(u,o){return u.x<o[0].x||u.x>o[1].x||u.y<o[0].y||u.y>o[1].y}function Cw(u,o,l){if(u.x<0||u.x>=xn||o.x<0||o.x>=xn||l.x<0||l.x>=xn)return!1;const f=l.sub(o),g=f.perp(),b=u.sub(o);return(f.x*b.x+f.y*b.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function SC(u,o,l){const f=o?2|u:-3&u;return l?1|f:-2&f}function q_(){const u=Math.PI/32,o=Math.tan(u),l=pe;return l*Math.sqrt(1+2*o*o)-l}function H_(u,o,l){const f=1<<l.z,g=Je(l.x/f),b=Je((l.x+1)/f),w=nt(l.y/f),R=nt((l.y+1)/f);return function(P,L,$,q,Y=0,ne){const re=[];if(!P.length||!$||!q)return re;const de=(Oe,Ve)=>{for(const tt of Oe)re.push({polygon:tt,bounds:Ve})},ye=Math.ceil(Math.log2($)),be=Math.ceil(Math.log2(q)),Le=ye-be,Ie=[];for(let Oe=0;Oe<Math.abs(Le);Oe++)Ie.push(Le>0?0:1);for(let Oe=0;Oe<Math.min(ye,be);Oe++)Ie.push(0),Ie.push(1);let he=P;if(he=Ux(he,L[0].y-Y,L[1].y+Y,1),he=Ux(he,L[0].x-Y,L[1].x+Y,0),!he.length)return re;const Ee=[];for(Ie.length?Ee.push({polygons:he,bounds:L,depth:0}):de(he,L);Ee.length;){const Oe=Ee.pop(),Ve=Oe.depth,tt=Ie[Ve],it=Oe.bounds[0],at=Oe.bounds[1],ht=tt===0?it.x:it.y,zt=tt===0?at.x:at.y,nn=ne?ne(tt,ht,zt):.5*(ht+zt),Xt=Ux(Oe.polygons,ht-Y,nn+Y,tt),Qt=Ux(Oe.polygons,nn-Y,zt+Y,tt);if(Xt.length){const ln=[it,new mn(tt===0?nn:at.x,tt===1?nn:at.y)];Ie.length>Ve+1?Ee.push({polygons:Xt,bounds:ln,depth:Ve+1}):de(Xt,ln)}if(Qt.length){const ln=[new mn(tt===0?nn:it.x,tt===1?nn:it.y),at];Ie.length>Ve+1?Ee.push({polygons:Qt,bounds:ln,depth:Ve+1}):de(Qt,ln)}}return re}(u,o,Math.ceil((b-g)/11.25),Math.ceil((w-R)/11.25),1,(P,L,$)=>{if(P===0)return .5*(L+$);{const q=nt((l.y+L/xn)/f);return(Ge(.5*(nt((l.y+$/xn)/f)+q))*f-l.y)*xn}})}function TC(u,o,l,f,g,b){const w=Math.pow(2,f.z-g.z);for(let R=0;R<l;R++){let P=u.int16[2*(R+o)+0],L=u.int16[2*(R+o)+1];P=(P+g.x*xn)*w-f.x*xn,L=(L+g.y*xn)*w-f.y*xn,b.push(new mn(P,L))}}let Wy,eb;zn(Qx,"FillExtrusionBucket",{omit:["layers","features"]}),zn(kf,"PartData"),zn(Kx,"FootprintSegment"),zn(Of,"BorderCentroidData"),zn(zf,"GroundEffect");class ah extends mn{constructor(o,l,f){super(o,l),this.z=f}}class Mw extends ah{constructor(o,l,f,g){super(o,l,f),this.w=g}}function EC(u,o,l,f){const g=l==="x"?"y":"x",b=(f-u[l])/(o[l]-u[l]);u[g]=Math.round(u[g]+(o[g]-u[g])*b),u[l]=f,u.hasOwnProperty("z")&&(u.z=lr(u.z,o.z,b)),u.hasOwnProperty("w")&&(u.w=lr(u.w,o.w,b))}function W_(u,o,l,f){const g=l,b=f;for(const w of["x","y"]){let R=u,P=o;R[w]>=P[w]&&(R=o,P=u),R[w]<g&&P[w]>g&&EC(R,P,w,g),R[w]<b&&P[w]>b&&EC(P,R,w,b)}}function p(u,o,l,f,g,b){const w=[];for(let R=0;R<u.length;R++){const P=u[R];let L;const $=w.length;let q=0;for(let Y=0;Y<P.length-1;Y++){let ne=P[Y],re=P[Y+1],de=0;const ye=q;let be,Le;b&&(de=Math.hypot(re.x-ne.x,re.y-ne.y),q+=de,be=ne,Le=re),ne.x<o&&re.x<o||(ne.x<o?ne=new mn(o,ne.y+(o-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<o&&(re=new mn(o,ne.y+(o-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<l&&re.y<l||(ne.y<l?ne=new mn(ne.x+(l-ne.y)/(re.y-ne.y)*(re.x-ne.x),l)._round():re.y<l&&(re=new mn(ne.x+(l-ne.y)/(re.y-ne.y)*(re.x-ne.x),l)._round()),ne.x>=f&&re.x>=f||(ne.x>=f?ne=new mn(f,ne.y+(f-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=f&&(re=new mn(f,ne.y+(f-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=g&&re.y>=g||(ne.y>=g?ne=new mn(ne.x+(g-ne.y)/(re.y-ne.y)*(re.x-ne.x),g)._round():re.y>=g&&(re=new mn(ne.x+(g-ne.y)/(re.y-ne.y)*(re.x-ne.x),g)._round()),L&&ne.equals(L[L.length-1])||(L=[ne],w.push(L),b&&b.push({progress:{min:ye+M(be,Le,ne)*de,max:1},parentIndex:R,prevPoint:be,nextPoint:Le})),L.push(re),b&&(b[b.length-1].progress.max=ye+M(be,Le,re)*de,b[b.length-1].nextPoint=Le)))))}if(b&&q>0)for(let Y=$;Y<w.length;Y++)b[Y].progress.min/=q,b[Y].progress.max/=q}return w}function _(u,o,l,f,g){if(u.length<2)return void f.push(u);const b=[];for(;o.valid();){const[L,$]=o.get();for(let q=0;q<u.length-1;q++){const Y=u[q],ne=u[q+1],re=Ei(Y,ne,L,$);if(re){const[de]=re,ye=new mn(lr(Y.x,ne.x,de),lr(Y.y,ne.y,de));b.push({t:q+de,distance:0,point:ye})}}o.next()}if(b.length===0)return void f.push(u);b.sort((L,$)=>L.t-$.t);let w=0,R=0,P=[];for(f.push(P);w!==u.length;){if(R===b.length){for(;w!==u.length;)P.length!==0&&P[P.length-1].equals(u[w])||P.push(u[w]),w++;break}b[R].t<=w?(P.length!==0&&P[P.length-1].equals(b[R].point)||P.push(b[R].point),Math.trunc(b[R].t),R++):(P.length!==0&&P[P.length-1].equals(u[w])||P.push(u[w]),w++)}}function M(u,o,l){return u.x!==o.x?(l.x-u.x)/(o.x-u.x):u.y!==o.y?(l.y-u.y)/(o.y-u.y):0}function F(u,o){return u.x*o.x+u.y*o.y}function K(u,o){if(u.length===1){let l=0;const f=o[l++];let g;for(;!g||f.equals(g);)if(g=o[l++],!g)return 1/0;for(;l<o.length;l++){const b=o[l],w=u[0],R=g.sub(f),P=b.sub(f),L=w.sub(f),$=F(R,R),q=F(R,P),Y=F(P,P),ne=F(L,R),re=F(L,P),de=$*Y-q*q,ye=(Y*ne-q*re)/de,be=($*re-q*ne)/de,Le=f.z*(1-ye-be)+g.z*ye+b.z*be;if(isFinite(Le))return Le}return 1/0}{let l=1/0;for(const f of o)l=Math.min(l,f.z);return l}}function se(u,o,l,f,g,b,w,R){const P=w*g.getElevationAt(u,o,!0,!0),L=b[0]!==0,$=L?b[1]===0?w*(b[0]/7-450):w*function(q,Y,ne){const re=Math.floor(Y[0]/8),de=Math.floor(Y[1]/8),ye=10*(Y[0]-8*re),be=10*(Y[1]-8*de),Le=q.getElevationAt(re,de,!0,!0),Ie=q.getMeterToDEM(ne),he=Math.floor(.5*(ye*Ie-1)),Ee=Math.floor(.5*(be*Ie-1)),Oe=q.tileCoordToPixel(re,de),Ve=2*he+1,tt=2*Ee+1,it=function(Qt,ln,It,Kt,At){return[Qt.getElevationAtPixel(ln,It,!0),Qt.getElevationAtPixel(ln+At,It,!0),Qt.getElevationAtPixel(ln,It+At,!0),Qt.getElevationAtPixel(ln+Kt,It+At,!0)]}(q,Oe.x-he,Oe.y-Ee,Ve,tt),at=Math.abs(it[0]-it[1]),ht=Math.abs(it[2]-it[3]),zt=Math.abs(it[0]-it[2])+Math.abs(it[1]-it[3]),nn=Math.min(.25,.5*Ie*(at+ht)/Ve),Xt=Math.min(.25,.5*Ie*zt/tt);return Le+Math.max(nn*ye,Xt*be)}(g,b,R):P;return{base:P+(l===0?-1:l),top:L?Math.max($+f,P+l+2):P+f}}const De=fi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),Xe=fi([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:xt}=De,sn=fi([{name:"a_packed",components:3,type:"Float32"}]),{members:On}=sn,Yn=fi([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:hn}=Yn;class gn{constructor(o,l){this.width=o,this.height=l,this.nextRow=0,this.image=new Rf({width:o,height:l}),this.positions={},this.uploaded=!1}getDash(o,l){const f=this.getKey(o,l);return this.positions[f]}trim(){const o=this.width,l=this.height=wn(this.nextRow);this.image.resize({width:o,height:l})}getKey(o,l){return o.join(",")+l}getDashRanges(o,l,f){const g=[];let b=o.length%2==1?-o[o.length-1]*f:0,w=o[0]*f,R=!0;g.push({left:b,right:w,isDash:R,zeroLength:o[0]===0});let P=o[0];for(let L=1;L<o.length;L++){R=!R;const $=o[L];b=P*f,P+=$,w=P*f,g.push({left:b,right:w,isDash:R,zeroLength:$===0})}return g}addRoundDash(o,l,f){const g=l/2;for(let b=-f;b<=f;b++){const w=this.width*(this.nextRow+f+b);let R=0,P=o[R];for(let L=0;L<this.width;L++){L/P.right>1&&(P=o[++R]);const $=Math.abs(L-P.left),q=Math.abs(L-P.right),Y=Math.min($,q);let ne;const re=b/f*(g+1);if(P.isDash){const de=g-Math.abs(re);ne=Math.sqrt(Y*Y+de*de)}else ne=g-Math.sqrt(Y*Y+re*re);this.image.data[w+L]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(o,l){for(let P=o.length-1;P>=0;--P){const L=o[P],$=o[P+1];L.zeroLength?o.splice(P,1):$&&$.isDash===L.isDash&&($.left=L.left,o.splice(P,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const b=this.width*this.nextRow;let w=0,R=o[w];for(let P=0;P<this.width;P++){P/R.right>1&&(R=o[++w]);const L=Math.abs(P-R.left),$=Math.abs(P-R.right),q=Math.min(L,$);this.image.data[b+P]=Math.max(0,Math.min(255,(R.isDash?q:-q)+l+128))}}addDash(o,l){const f=this.getKey(o,l);if(this.positions[f])return this.positions[f];const g=l==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return Ir("LineAtlas out of space"),null;o.length===0&&o.push(1);let R=0;for(let $=0;$<o.length;$++)o[$]<0&&(Ir("Negative value is found in line dasharray, replacing values with 0"),o[$]=0),R+=o[$];if(R!==0){const $=this.width/R,q=this.getDashRanges(o,this.width,$);g?this.addRoundDash(q,$,b):this.addRegularDash(q,l==="square"?.5*$:0)}const P=this.nextRow+b;this.nextRow+=w;const L={tl:[P,b],br:[R,0]};return this.positions[f]=L,L}}zn(gn,"LineAtlas");const Mi=oh.VectorTileFeature.types,vi=Math.cos(Math.PI/180*37.5),es=Math.cos(Math.PI/180*5);class Yt{constructor(o){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=o.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=o.overscaling,this.pixelRatio=o.pixelRatio,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new f_,this.layoutVertexArray2=new el,this.patternVertexArray=new el,this.indexArray=new Fo,this.programConfigurations=new rh(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new _o,this.maxLineLength=0,this.zOffsetVertexArray=new el,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.tessellationStep=o.tessellationStep?o.tessellationStep:xn/64}updateFootprints(o,l){}populate(o,l,f,g){this.hasPattern=jy("line",this.layers,this.pixelRatio,l);const b=this.layers[0].layout.get("line-sort-key");this.tileToMeter=pt(f);const w=this.layers[0].layout.get("line-elevation-reference");if(w==="hd-road-markup")this.elevationType="road";else{const Y=this.layers[0].layout.get("line-z-offset"),ne=Y.isConstant()&&!Y.constantOr(0);this.elevationType=w!=="sea"&&w!=="ground"&&ne?"none":"offset",this.elevationType==="offset"&&w==="none"&&Ir(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`)}const R=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.elevationType==="offset"&&R!==void 0;const P=[];for(const{feature:Y,id:ne,index:re,sourceLayerIndex:de}of o){const ye=this.layers[0]._featureFilter.needGeometry,be=Gn(Y,ye);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),be,f))continue;const Le=b?b.evaluate(be,{},f):void 0,Ie={id:ne,properties:Y.properties,type:Y.type,sourceLayerIndex:de,index:re,geometry:ye?be.geometry:Vn(Y,f,g),patterns:{},sortKey:Le};P.push(Ie)}b&&P.sort((Y,ne)=>Y.sortKey-ne.sortKey);const{lineAtlas:L,featureIndex:$}=l,q=this.addConstantDashes(L);for(const Y of P){const{geometry:ne,index:re,sourceLayerIndex:de}=Y;if(q&&this.addFeatureDashes(Y,L),this.hasPattern){const ye=Bx("line",this.layers,Y,this.zoom,this.pixelRatio,l);this.patternFeatures.push(ye)}else this.addFeature(Y,ne,re,f,L.positions,l.availableImages,l.brightness,l.elevationFeatures);$.insert(o[re].feature,ne,re,de,this.index)}}addConstantDashes(o){let l=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,b=f.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")l=!0;else{const w=b.value,R=g.value;if(!R)continue;o.addDash(R,w)}}return l}addFeatureDashes(o,l){const f=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let R,P;if(b.kind==="constant"){if(R=b.value,!R)continue}else R=b.evaluate({zoom:f},o);P=w.kind==="constant"?w.value:w.evaluate({zoom:f},o),l.addDash(R,P),o.patterns[g.id]=[l.getKey(R,P)]}}update(o,l,f,g,b,w,R){this.programConfigurations.updatePaintArrays(o,l,b,f,g,w,R)}addFeatures(o,l,f,g,b,w){for(const R of this.patternFeatures)this.addFeature(R,R.geometry,R.index,l,f,g,w)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,On)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=o.createVertexBuffer(this.patternVertexArray,hn)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,Xe.members,!0)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,xt),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,f,g,b,w,R,P){const L=this.layers[0].layout,$=L.get("line-join").evaluate(o,{}),q=L.get("line-cap").evaluate(o,{}),Y=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(o),this.lineFeature=o,this.zOffsetValue=L.get("line-z-offset").value;const re=this.layers[0].paint.get("line-width").value;if(re.kind!=="constant"&&re.isLineProgressConstant===!1&&(this.variableWidthValue=re),this.elevationType==="road"){const de=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(o,l,g,P,$,q,Y,ne)){const[ye,be]=this.clipRuntimeLinesToTile(l,1);for(let Le=0;Le<ye.length;Le++){const Ie=ye[Le],he=be[Le],Ee={progress:{min:he.progress.min,max:he.progress.max},nextDir:this.computeSegNextDir(he,Ie),prevDir:this.computeSegPrevDir(he,Ie)};this.addLine(Ie,o,g,$,q,Y,ne,Ee)}this.fillNonElevatedRoadSegment(de)}}else for(const de of l)this.addLine(de,o,g,$,q,Y,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g,R)}computeSegNextDir(o,l){return o.nextPoint.sub(l.at(-2)).unit()}computeSegPrevDir(o,l){return l[1].sub(o.prevPoint).unit()}clipLinesToTile(o,l){return p(o,-l,-l,xn+l,xn+l)}clipRuntimeLinesToTile(o,l){const f=[];return[p(o,-l,-l,xn+l,xn+l,f),f]}addElevatedRoadFeature(o,l,f,g,b,w,R,P){const L=[],$=lc.getElevationFeature(o,g);if($){const q=this.clipLinesToTile(l,1),Y=this.prepareElevatedLines(q,$,f);for(const ne of Y)L.push({geometry:ne,elevation:$,elevationTileID:f,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(L.length===0)return!1;for(const q of L){const Y=this.layoutVertexArray.length;this.addLine(q.geometry,o,f,b,w,R,P);const ne=new hw(f,q.elevationTileID);if(q.elevation)for(let re=Y;re<this.layoutVertexArray.length;re++){const de=new mn(this.layoutVertexArray.int16[6*re]>>1,this.layoutVertexArray.int16[6*re+1]>>1),ye=ne.pointElevation(de,q.elevation,.05);this.updateHeightRange(ye),this.zOffsetVertexArray.emplaceBack(ye,0,0)}else this.fillNonElevatedRoadSegment(Y)}return!0}prepareElevatedLines(o,l,f){if(l.constantHeight!=null)return o;const g=[],b=1/pt(f);for(const w of o)_(w,new dw(l,b),0,g);return g}fillNonElevatedRoadSegment(o){for(let l=o;l<this.layoutVertexArray.length;l++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(o){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,o),this.heightRange.max=Math.max(this.heightRange.max,o)):this.heightRange={min:o,max:o}}addLine(o,l,f,g,b,w,R,P){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const L=g==="none";this.patternJoinNone=this.hasPattern&&L,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const $=P&&P.progress.min>0,q=P&&P.progress.max<1;if(this.lineClips){let tt={min:this.lineClips.start,max:this.lineClips.end},it=1;if(P){const zt=this.lineClips.end-this.lineClips.start;tt=function(nn,Xt,Qt){return{min:Oi(nn.min,Xt,Qt),max:Oi(nn.max,Xt,Qt)}}(P.progress,{min:0,max:1},tt),zt>0&&(it=(tt.max-tt.min)/zt)}const at=+l.properties.mapbox_clip_feature_len,ht=+l.properties.mapbox_clip_seg_len;if(Number.isNaN(at)||Number.isNaN(ht)){for(let nn=0;nn<o.length-1;nn++)this.totalDistance+=o[nn].dist(o[nn+1]);const zt=this.totalDistance/(tt.max-tt.min);this.totalFeatureLength=Number.isFinite(zt)?zt:0,this.lineClips.start=tt.min,this.lineClips.end=tt.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=at,this.distance=ht*it,this.lineClips.start=tt.min,this.lineClips.end=tt.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const Y=Mi[l.type]==="Polygon";let ne=o.length;for(;ne>=2&&o[ne-1].equals(o[ne-2]);)ne--;let re=0;for(;re<ne-1&&o[re].equals(o[re+1]);)re++;if(ne<(Y?3:2))return;g==="bevel"&&(w=1.05);const de=this.segments.prepareSegment(10*ne,this.layoutVertexArray,this.indexArray);let ye,be,Le,Ie,he,Ee,Oe,Ve;P&&P.prevDir&&(Ee=P.prevDir.perp()),P&&P.nextDir&&(Oe=P.nextDir.perp()),this.e1=this.e2=-1,Y&&(ye=o[ne-2],he=o[re].sub(ye)._unit()._perp());for(let tt=re;tt<ne;tt++){if(Le=tt===ne-1?Y?o[re+1]:void 0:o[tt+1],Le&&o[tt].equals(Le))continue;he&&(Ie=he),ye&&(be=ye),ye=o[tt],Ve=this.evaluateLineProgressFeatures(be?be.dist(ye):0),he=Le?Le.sub(ye)._unit()._perp():Ie,Ie=Ie||he;const it=be&&Le;let at=it?g:Y||L?"butt":b;const ht=Ie.x*he.x+Ie.y*he.y;if(L){const At=function(kt){if(kt.patternJoinNone){const un=kt.segmentPoints.length/2,pn=kt.lineSoFar-kt.segmentStart;for(let er=0;er<un;++er){const qn=kt.segmentPoints[2*er+1],Tn=Math.round(kt.segmentPoints[2*er])+.5+.25*qn;kt.patternVertexArray.emplaceBack(Tn,pn,kt.segmentStart),kt.patternVertexArray.emplaceBack(Tn,pn,kt.segmentStart)}kt.segmentPoints.length=0}kt.e1=kt.e2=-1};if(it&&ht<es){this.updateDistance(be,ye),this.addCurrentVertex(ye,Ie,1,1,de,Ve),At(this),this.addCurrentVertex(ye,he,-1,-1,de,Ve);continue}if(be){if(!Le){this.updateDistance(be,ye),this.addCurrentVertex(ye,Ie,1,1,de,Ve),At(this);continue}at="miter"}}let zt=Ie.add(he);zt.x===0&&zt.y===0||zt._unit();const nn=zt.x*he.x+zt.y*he.y,Xt=nn!==0?1/nn:1/0,Qt=2*Math.sqrt(2-2*nn),ln=nn<vi&&be&&Le,It=Ie.x*he.y-Ie.y*he.x>0,Kt=this.overscaling<=16?15*xn/(512*this.overscaling):0;if(it&&at==="round"){if(Xt<R)at="miter";else if(Xt<=2){const At=Bt(ye,-10,xn+10);at=this.elevationType==="offset"&&(At||this.hasCrossSlope)?"miter":"fakeround"}}if(at==="miter"&&Xt>w&&(at="bevel"),at==="bevel"&&(Xt>2&&(at="flipbevel"),Xt<w&&(at="miter")),be&&!(at==="miter"&&ln)&&this.updateDistance(be,ye),at==="miter")if(ln){const At=ye.dist(be);if(At>2*Kt){const un=ye.sub(ye.sub(be)._mult(Kt/At)._round());this.updateDistance(be,un),this.addCurrentVertex(un,Ie,0,0,de,Ve),be=un}this.updateDistance(be,ye),zt._mult(Xt),this.addCurrentVertex(ye,zt,0,0,de,Ve);const kt=ye.dist(Le);if(kt>2*Kt){const un=ye.add(Le.sub(ye)._mult(Kt/kt)._round());this.updateDistance(ye,un),this.addCurrentVertex(un,he,0,0,de,Ve),ye=un}}else zt._mult(Xt),this.addCurrentVertex(ye,zt,0,0,de,Ve);else if(at==="flipbevel"){if(Xt>100)zt=he.mult(-1);else{const At=Xt*Ie.add(he).mag()/Ie.sub(he).mag();zt._perp()._mult(At*(It?-1:1))}this.addCurrentVertex(ye,zt,0,0,de,Ve),this.addCurrentVertex(ye,zt.mult(-1),0,0,de,Ve)}else if(at==="bevel"||at==="fakeround"){Ve!=null&&be&&this.addCurrentVertex(ye,Oe||Ie,-1,-1,de,Ve);const At=ye.dist(be)<=2*Kt&&at!=="bevel",kt=zt.mult(It?1:-1);kt._mult(Xt);const un=he.mult(It?-1:1),pn=Ie.mult(It?-1:1),er=this.evaluateLineProgressFeatures(this.distance);if(Ve==null&&(this.addHalfVertex(ye,kt.x,kt.y,!1,!It,0,de,er),At||this.addHalfVertex(ye,kt.x+2*pn.x,kt.y+2*pn.y,!1,It,0,de,er)),at==="fakeround"){const qn=Math.round(180*Qt/Math.PI/20);this.addHalfVertex(ye,pn.x,pn.y,!1,It,0,de,er);for(let Tn=0;Tn<qn;Tn++){let cn=Tn/qn;if(cn!==.5){const Zn=cn-.5;cn+=cn*Zn*(cn-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*Zn*Zn+(.848013+ht*(.215638*ht-1.06021)))}const Rr=un.sub(pn)._mult(cn)._add(pn)._unit();this.addHalfVertex(ye,Rr.x,Rr.y,!1,It,0,de,er)}this.addHalfVertex(ye,un.x,un.y,!1,It,0,de,er)}At||Ve!=null||this.addHalfVertex(ye,kt.x+2*un.x,kt.y+2*un.y,!1,It,0,de,er),Ve!=null&&Le&&this.addCurrentVertex(ye,Ee||he,1,1,de,Ve)}else if(at==="butt")this.addCurrentVertex(ye,zt,0,0,de,Ve);else if(at==="square"){if(!be){const At=$?0:-1;this.addCurrentVertex(ye,zt,At,At,de,Ve)}if(this.addCurrentVertex(ye,zt,0,0,de,Ve),be){const At=q?0:1;this.addCurrentVertex(ye,zt,At,At,de,Ve)}}else if(at==="round"){if(be){const At=!it&&Oe?Oe:Ie;this.addCurrentVertex(ye,At,0,0,de,Ve),!it&&q||this.addCurrentVertex(ye,At,1,1,de,Ve,!0)}if(Le){const At=!it&&Ee?Ee:he;!it&&$||this.addCurrentVertex(ye,At,-1,-1,de,Ve,!0),this.addCurrentVertex(ye,At,0,0,de,Ve)}}}}addVerticesTo(o,l,f,g,b,w,R,P,L,$){const q=(l.w-o.w)/this.tessellationStep|0;let Y=0;const ne=this.scaledDistance;if(q>1){this.lineSoFar=o.w;const de=(l.x-o.x)/q,ye=(l.y-o.y)/q,be=(l.z-o.z)/q,Le=(l.w-o.w)/q;for(let Ie=1;Ie<q;++Ie){o.x+=de,o.y+=ye,o.z+=be,this.lineSoFar+=Le,Y+=Le;const he=this.evaluateLineProgressFeatures(this.prevDistance+Y);this.scaledDistance=(this.prevDistance+Y)/this.totalDistance,this.addHalfVertex(o,f,g,$,!1,R,L,he),this.addHalfVertex(o,b,w,$,!0,-P,L,he)}}this.lineSoFar=l.w,this.scaledDistance=ne;const re=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(l,f,g,$,!1,R,L,re),this.addHalfVertex(l,b,w,$,!0,-P,L,re)}evaluateLineProgressFeatures(o){if(!this.variableWidthValue&&this.elevationType!=="offset")return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+o)/this.totalFeatureLength):Ir(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let l=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(l=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.elevationType!=="offset"?{zOffset:0,variableWidth:l}:this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:l}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:l}}addCurrentVertex(o,l,f,g,b,w,R=!1){const P=l.x+l.y*f,L=l.y-l.x*f,$=l.y*g-l.x,q=-l.y-l.x*g;if(w!=null){const Y=this.elevationType==="offset",ne=-10,re=xn+10,de=w.zOffset,ye=new Mw(o.x,o.y,de,this.lineSoFar),be=!!Y&&Bt(o,ne,re),Le=this.lineSoFar,Ie=this.distance;if(this.currentVertex)if(be){const he=this.currentVertexIsOutside,Ee=this.currentVertex,Oe=new Mw(o.x,o.y,de,this.lineSoFar);if(W_(Ee,Oe,ne,re),!Bt(Oe,ne,re)){if(he){this.e1=this.e2=-1,this.distance-=Ee.dist(ye),this.lineSoFar=Ee.w;const Ve=this.evaluateLineProgressFeatures(Ee.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(Ee,P,L,R,!1,f,b,Ve),this.addHalfVertex(Ee,$,q,R,!0,-g,b,Ve),this.prevDistance=this.distance}this.distance=this.prevDistance+Ee.dist(Oe),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(Ee,Oe,P,L,$,q,f,g,b,R),this.distance=Ie,this.scaledDistance=this.distance/this.totalDistance}}else{const he=this.currentVertex;if(this.currentVertexIsOutside){W_(he,ye,ne,re),this.e1=this.e2=-1,this.distance-=he.dist(ye),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=he.w;const Ee=this.evaluateLineProgressFeatures(he.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(he,P,L,R,!1,f,b,Ee),this.addHalfVertex(he,$,q,R,!0,-g,b,Ee),this.prevDistance=this.distance,this.distance=Ie,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(he,ye,P,L,$,q,f,g,b,R)}else be||(this.addHalfVertex(o,P,L,R,!1,f,b,w),this.addHalfVertex(o,$,q,R,!0,-g,b,w));this.currentVertex=ye,this.currentVertexIsOutside=be,this.lineSoFar=Le}else this.addHalfVertex(o,P,L,R,!1,f,b,w),this.addHalfVertex(o,$,q,R,!0,-g,b,w)}addHalfVertex({x:o,y:l},f,g,b,w,R,P,L){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),w||this.segmentPoints.push(this.lineSoFar-this.segmentStart,R)),this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(l<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(R===0?0:R<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const q=lr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,q)}const $=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),P.primitiveLength++),w?this.e2=$:this.e1=$,L!=null&&this.zOffsetVertexArray.emplaceBack(L.zOffset,L.variableWidth,L.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(o,l){this.prevDistance=this.distance,this.distance+=o.dist(l),this.updateScaledDistance()}}function Bt(u,o,l){return u.x<o||u.x>l||u.y<o||u.y>l}let rn,jn;function qr(u,o,l){return o*(xn/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}zn(Yt,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const no=(u,o,l)=>(1-l)*u+l*o;function ri(u,o){return 1/qr(u,1,o.tileZoom)}function _i(u,o,l,f){return u.translatePosMatrix(f||o.tileID.projMatrix,o,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const xa=u=>{const o=[];Do(u)&&o.push("RENDER_LINE_DASH"),u.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const l=u.paint.get("line-trim-offset");l[0]===0&&l[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),u.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER");const f=u.layout.get("line-join").constantOr("miter")==="none",g=!!u.paint.get("line-pattern").constantOr(1);return f&&g&&o.push("LINE_JOIN_NONE"),o};function Do(u){const o=u.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}let lh;const CC=()=>lh||(lh={layout:rn||(rn=new To({"line-cap":new Ln(_t.layout_line["line-cap"]),"line-join":new Ln(_t.layout_line["line-join"]),"line-miter-limit":new yn(_t.layout_line["line-miter-limit"]),"line-round-limit":new yn(_t.layout_line["line-round-limit"]),"line-sort-key":new Ln(_t.layout_line["line-sort-key"]),"line-z-offset":new Ln(_t.layout_line["line-z-offset"]),"line-elevation-reference":new yn(_t.layout_line["line-elevation-reference"]),"line-cross-slope":new yn(_t.layout_line["line-cross-slope"]),visibility:new yn(_t.layout_line.visibility),"line-width-unit":new yn(_t.layout_line["line-width-unit"])})),paint:jn||(jn=new To({"line-opacity":new Ln(_t.paint_line["line-opacity"]),"line-color":new Ln(_t.paint_line["line-color"]),"line-translate":new yn(_t.paint_line["line-translate"]),"line-translate-anchor":new yn(_t.paint_line["line-translate-anchor"]),"line-width":new Ln(_t.paint_line["line-width"]),"line-gap-width":new Ln(_t.paint_line["line-gap-width"]),"line-offset":new Ln(_t.paint_line["line-offset"]),"line-blur":new Ln(_t.paint_line["line-blur"]),"line-dasharray":new Ln(_t.paint_line["line-dasharray"]),"line-pattern":new Ln(_t.paint_line["line-pattern"]),"line-pattern-cross-fade":new yn(_t.paint_line["line-pattern-cross-fade"]),"line-gradient":new ic(_t.paint_line["line-gradient"]),"line-trim-offset":new yn(_t.paint_line["line-trim-offset"]),"line-trim-fade-range":new yn(_t.paint_line["line-trim-fade-range"]),"line-trim-color":new yn(_t.paint_line["line-trim-color"]),"line-emissive-strength":new yn(_t.paint_line["line-emissive-strength"]),"line-border-width":new Ln(_t.paint_line["line-border-width"]),"line-border-color":new Ln(_t.paint_line["line-border-color"]),"line-occlusion-opacity":new yn(_t.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},lh);class ese extends Ln{possiblyEvaluate(o,l){return l=new Li(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,transition:l.transition}),super.possiblyEvaluate(o,l)}evaluate(o,l,f,g){return l=lt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(o,l,f,g)}}let Aw;function nV(u,o){return o>0?o+2*u:u}const tse=fi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nse=fi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),rse=fi([{name:"a_projected_pos",components:4,type:"Float32"}],4);fi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ise=fi([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),ose=fi([{name:"a_texb",components:2,type:"Uint16"}]),sse=fi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),ase=fi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);fi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rV=fi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lse=fi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);fi([{name:"triangle",components:3,type:"Uint16"}]),fi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),fi([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),fi([{type:"Float32",name:"offsetX"}]),fi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var aa=24;function cse(u,o,l){return u.sections.forEach(f=>{f.text=function(g,b,w){const R=b.layout.get("text-transform").evaluate(w,{});return R==="uppercase"?g=g.toLocaleUpperCase():R==="lowercase"&&(g=g.toLocaleLowerCase()),rc.applyArabicShaping&&(g=rc.applyArabicShaping(g)),g}(f.text,o,l)}),u}const Rw={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function use(u){return u==="︶"||u==="﹈"||u==="︸"||u==="﹄"||u==="﹂"||u==="︾"||u==="︼"||u==="︺"||u==="︘"||u==="﹀"||u==="︐"||u==="︓"||u==="︔"||u==="｀"||u==="￣"||u==="︑"||u==="︒"}function dse(u){return u==="︵"||u==="﹇"||u==="︷"||u==="﹃"||u==="﹁"||u==="︽"||u==="︻"||u==="︹"||u==="︗"||u==="︿"}var iV,rI,oV,iI={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function hse(){return iV||(iV=1,iI.read=function(u,o,l,f,g){var b,w,R=8*g-f-1,P=(1<<R)-1,L=P>>1,$=-7,q=l?g-1:0,Y=l?-1:1,ne=u[o+q];for(q+=Y,b=ne&(1<<-$)-1,ne>>=-$,$+=R;$>0;b=256*b+u[o+q],q+=Y,$-=8);for(w=b&(1<<-$)-1,b>>=-$,$+=f;$>0;w=256*w+u[o+q],q+=Y,$-=8);if(b===0)b=1-L;else{if(b===P)return w?NaN:1/0*(ne?-1:1);w+=Math.pow(2,f),b-=L}return(ne?-1:1)*w*Math.pow(2,b-f)},iI.write=function(u,o,l,f,g,b){var w,R,P,L=8*b-g-1,$=(1<<L)-1,q=$>>1,Y=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=f?0:b-1,re=f?1:-1,de=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(R=isNaN(o)?1:0,w=$):(w=Math.floor(Math.log(o)/Math.LN2),o*(P=Math.pow(2,-w))<1&&(w--,P*=2),(o+=w+q>=1?Y/P:Y*Math.pow(2,1-q))*P>=2&&(w++,P/=2),w+q>=$?(R=0,w=$):w+q>=1?(R=(o*P-1)*Math.pow(2,g),w+=q):(R=o*Math.pow(2,q-1)*Math.pow(2,g),w=0));g>=8;u[l+ne]=255&R,ne+=re,R/=256,g-=8);for(w=w<<g|R,L+=g;L>0;u[l+ne]=255&w,ne+=re,w/=256,L-=8);u[l+ne-re]|=128*de}),iI}function sV(){if(oV)return rI;oV=1,rI=o;var u=hse();function o(he){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(he)?he:new Uint8Array(he||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var l=4294967296,f=1/l,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function b(he){return he.type===o.Bytes?he.readVarint()+he.pos:he.pos+1}function w(he,Ee,Oe){return Oe?4294967296*Ee+(he>>>0):4294967296*(Ee>>>0)+(he>>>0)}function R(he,Ee,Oe){var Ve=Ee<=16383?1:Ee<=2097151?2:Ee<=268435455?3:Math.floor(Math.log(Ee)/(7*Math.LN2));Oe.realloc(Ve);for(var tt=Oe.pos-1;tt>=he;tt--)Oe.buf[tt+Ve]=Oe.buf[tt]}function P(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeVarint(he[Oe])}function L(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeSVarint(he[Oe])}function $(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeFloat(he[Oe])}function q(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeDouble(he[Oe])}function Y(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeBoolean(he[Oe])}function ne(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeFixed32(he[Oe])}function re(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeSFixed32(he[Oe])}function de(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeFixed64(he[Oe])}function ye(he,Ee){for(var Oe=0;Oe<he.length;Oe++)Ee.writeSFixed64(he[Oe])}function be(he,Ee){return(he[Ee]|he[Ee+1]<<8|he[Ee+2]<<16)+16777216*he[Ee+3]}function Le(he,Ee,Oe){he[Oe]=Ee,he[Oe+1]=Ee>>>8,he[Oe+2]=Ee>>>16,he[Oe+3]=Ee>>>24}function Ie(he,Ee){return(he[Ee]|he[Ee+1]<<8|he[Ee+2]<<16)+(he[Ee+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(he,Ee,Oe){for(Oe=Oe||this.length;this.pos<Oe;){var Ve=this.readVarint(),tt=Ve>>3,it=this.pos;this.type=7&Ve,he(tt,Ee,this),this.pos===it&&this.skip(Ve)}return Ee},readMessage:function(he,Ee){return this.readFields(he,Ee,this.readVarint()+this.pos)},readFixed32:function(){var he=be(this.buf,this.pos);return this.pos+=4,he},readSFixed32:function(){var he=Ie(this.buf,this.pos);return this.pos+=4,he},readFixed64:function(){var he=be(this.buf,this.pos)+be(this.buf,this.pos+4)*l;return this.pos+=8,he},readSFixed64:function(){var he=be(this.buf,this.pos)+Ie(this.buf,this.pos+4)*l;return this.pos+=8,he},readFloat:function(){var he=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,he},readDouble:function(){var he=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,he},readVarint:function(he){var Ee,Oe,Ve=this.buf;return Ee=127&(Oe=Ve[this.pos++]),Oe<128?Ee:(Ee|=(127&(Oe=Ve[this.pos++]))<<7,Oe<128?Ee:(Ee|=(127&(Oe=Ve[this.pos++]))<<14,Oe<128?Ee:(Ee|=(127&(Oe=Ve[this.pos++]))<<21,Oe<128?Ee:function(tt,it,at){var ht,zt,nn=at.buf;if(ht=(112&(zt=nn[at.pos++]))>>4,zt<128||(ht|=(127&(zt=nn[at.pos++]))<<3,zt<128)||(ht|=(127&(zt=nn[at.pos++]))<<10,zt<128)||(ht|=(127&(zt=nn[at.pos++]))<<17,zt<128)||(ht|=(127&(zt=nn[at.pos++]))<<24,zt<128)||(ht|=(1&(zt=nn[at.pos++]))<<31,zt<128))return w(tt,ht,it);throw new Error("Expected varint not more than 10 bytes")}(Ee|=(15&(Oe=Ve[this.pos]))<<28,he,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var he=this.readVarint();return he%2==1?(he+1)/-2:he/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var he=this.readVarint()+this.pos,Ee=this.pos;return this.pos=he,he-Ee>=12&&g?function(Oe,Ve,tt){return g.decode(Oe.subarray(Ve,tt))}(this.buf,Ee,he):function(Oe,Ve,tt){for(var it="",at=Ve;at<tt;){var ht,zt,nn,Xt=Oe[at],Qt=null,ln=Xt>239?4:Xt>223?3:Xt>191?2:1;if(at+ln>tt)break;ln===1?Xt<128&&(Qt=Xt):ln===2?(192&(ht=Oe[at+1]))==128&&(Qt=(31&Xt)<<6|63&ht)<=127&&(Qt=null):ln===3?(zt=Oe[at+2],(192&(ht=Oe[at+1]))==128&&(192&zt)==128&&((Qt=(15&Xt)<<12|(63&ht)<<6|63&zt)<=2047||Qt>=55296&&Qt<=57343)&&(Qt=null)):ln===4&&(zt=Oe[at+2],nn=Oe[at+3],(192&(ht=Oe[at+1]))==128&&(192&zt)==128&&(192&nn)==128&&((Qt=(15&Xt)<<18|(63&ht)<<12|(63&zt)<<6|63&nn)<=65535||Qt>=1114112)&&(Qt=null)),Qt===null?(Qt=65533,ln=1):Qt>65535&&(Qt-=65536,it+=String.fromCharCode(Qt>>>10&1023|55296),Qt=56320|1023&Qt),it+=String.fromCharCode(Qt),at+=ln}return it}(this.buf,Ee,he)},readBytes:function(){var he=this.readVarint()+this.pos,Ee=this.buf.subarray(this.pos,he);return this.pos=he,Ee},readPackedVarint:function(he,Ee){if(this.type!==o.Bytes)return he.push(this.readVarint(Ee));var Oe=b(this);for(he=he||[];this.pos<Oe;)he.push(this.readVarint(Ee));return he},readPackedSVarint:function(he){if(this.type!==o.Bytes)return he.push(this.readSVarint());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readSVarint());return he},readPackedBoolean:function(he){if(this.type!==o.Bytes)return he.push(this.readBoolean());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readBoolean());return he},readPackedFloat:function(he){if(this.type!==o.Bytes)return he.push(this.readFloat());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readFloat());return he},readPackedDouble:function(he){if(this.type!==o.Bytes)return he.push(this.readDouble());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readDouble());return he},readPackedFixed32:function(he){if(this.type!==o.Bytes)return he.push(this.readFixed32());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readFixed32());return he},readPackedSFixed32:function(he){if(this.type!==o.Bytes)return he.push(this.readSFixed32());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readSFixed32());return he},readPackedFixed64:function(he){if(this.type!==o.Bytes)return he.push(this.readFixed64());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readFixed64());return he},readPackedSFixed64:function(he){if(this.type!==o.Bytes)return he.push(this.readSFixed64());var Ee=b(this);for(he=he||[];this.pos<Ee;)he.push(this.readSFixed64());return he},skip:function(he){var Ee=7&he;if(Ee===o.Varint)for(;this.buf[this.pos++]>127;);else if(Ee===o.Bytes)this.pos=this.readVarint()+this.pos;else if(Ee===o.Fixed32)this.pos+=4;else{if(Ee!==o.Fixed64)throw new Error("Unimplemented type: "+Ee);this.pos+=8}},writeTag:function(he,Ee){this.writeVarint(he<<3|Ee)},realloc:function(he){for(var Ee=this.length||16;Ee<this.pos+he;)Ee*=2;if(Ee!==this.length){var Oe=new Uint8Array(Ee);Oe.set(this.buf),this.buf=Oe,this.length=Ee}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(he){this.realloc(4),Le(this.buf,he,this.pos),this.pos+=4},writeSFixed32:function(he){this.realloc(4),Le(this.buf,he,this.pos),this.pos+=4},writeFixed64:function(he){this.realloc(8),Le(this.buf,-1&he,this.pos),Le(this.buf,Math.floor(he*f),this.pos+4),this.pos+=8},writeSFixed64:function(he){this.realloc(8),Le(this.buf,-1&he,this.pos),Le(this.buf,Math.floor(he*f),this.pos+4),this.pos+=8},writeVarint:function(he){(he=+he||0)>268435455||he<0?function(Ee,Oe){var Ve,tt;if(Ee>=0?(Ve=Ee%4294967296|0,tt=Ee/4294967296|0):(tt=~(-Ee/4294967296),4294967295^(Ve=~(-Ee%4294967296))?Ve=Ve+1|0:(Ve=0,tt=tt+1|0)),Ee>=18446744073709552e3||Ee<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Oe.realloc(10),function(it,at,ht){ht.buf[ht.pos++]=127&it|128,it>>>=7,ht.buf[ht.pos++]=127&it|128,it>>>=7,ht.buf[ht.pos++]=127&it|128,it>>>=7,ht.buf[ht.pos++]=127&it|128,ht.buf[ht.pos]=127&(it>>>=7)}(Ve,0,Oe),function(it,at){var ht=(7&it)<<4;at.buf[at.pos++]|=ht|((it>>>=3)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it|((it>>>=7)?128:0),it&&(at.buf[at.pos++]=127&it)))))}(tt,Oe)}(he,this):(this.realloc(4),this.buf[this.pos++]=127&he|(he>127?128:0),he<=127||(this.buf[this.pos++]=127&(he>>>=7)|(he>127?128:0),he<=127||(this.buf[this.pos++]=127&(he>>>=7)|(he>127?128:0),he<=127||(this.buf[this.pos++]=he>>>7&127))))},writeSVarint:function(he){this.writeVarint(he<0?2*-he-1:2*he)},writeBoolean:function(he){this.writeVarint(!!he)},writeString:function(he){he=String(he),this.realloc(4*he.length),this.pos++;var Ee=this.pos;this.pos=function(Ve,tt,it){for(var at,ht,zt=0;zt<tt.length;zt++){if((at=tt.charCodeAt(zt))>55295&&at<57344){if(!ht){at>56319||zt+1===tt.length?(Ve[it++]=239,Ve[it++]=191,Ve[it++]=189):ht=at;continue}if(at<56320){Ve[it++]=239,Ve[it++]=191,Ve[it++]=189,ht=at;continue}at=ht-55296<<10|at-56320|65536,ht=null}else ht&&(Ve[it++]=239,Ve[it++]=191,Ve[it++]=189,ht=null);at<128?Ve[it++]=at:(at<2048?Ve[it++]=at>>6|192:(at<65536?Ve[it++]=at>>12|224:(Ve[it++]=at>>18|240,Ve[it++]=at>>12&63|128),Ve[it++]=at>>6&63|128),Ve[it++]=63&at|128)}return it}(this.buf,he,this.pos);var Oe=this.pos-Ee;Oe>=128&&R(Ee,Oe,this),this.pos=Ee-1,this.writeVarint(Oe),this.pos+=Oe},writeFloat:function(he){this.realloc(4),u.write(this.buf,he,this.pos,!0,23,4),this.pos+=4},writeDouble:function(he){this.realloc(8),u.write(this.buf,he,this.pos,!0,52,8),this.pos+=8},writeBytes:function(he){var Ee=he.length;this.writeVarint(Ee),this.realloc(Ee);for(var Oe=0;Oe<Ee;Oe++)this.buf[this.pos++]=he[Oe]},writeRawMessage:function(he,Ee){this.pos++;var Oe=this.pos;he(Ee,this);var Ve=this.pos-Oe;Ve>=128&&R(Oe,Ve,this),this.pos=Oe-1,this.writeVarint(Ve),this.pos+=Ve},writeMessage:function(he,Ee,Oe){this.writeTag(he,o.Bytes),this.writeRawMessage(Ee,Oe)},writePackedVarint:function(he,Ee){Ee.length&&this.writeMessage(he,P,Ee)},writePackedSVarint:function(he,Ee){Ee.length&&this.writeMessage(he,L,Ee)},writePackedBoolean:function(he,Ee){Ee.length&&this.writeMessage(he,Y,Ee)},writePackedFloat:function(he,Ee){Ee.length&&this.writeMessage(he,$,Ee)},writePackedDouble:function(he,Ee){Ee.length&&this.writeMessage(he,q,Ee)},writePackedFixed32:function(he,Ee){Ee.length&&this.writeMessage(he,ne,Ee)},writePackedSFixed32:function(he,Ee){Ee.length&&this.writeMessage(he,re,Ee)},writePackedFixed64:function(he,Ee){Ee.length&&this.writeMessage(he,de,Ee)},writePackedSFixed64:function(he,Ee){Ee.length&&this.writeMessage(he,ye,Ee)},writeBytesField:function(he,Ee){this.writeTag(he,o.Bytes),this.writeBytes(Ee)},writeFixed32Field:function(he,Ee){this.writeTag(he,o.Fixed32),this.writeFixed32(Ee)},writeSFixed32Field:function(he,Ee){this.writeTag(he,o.Fixed32),this.writeSFixed32(Ee)},writeFixed64Field:function(he,Ee){this.writeTag(he,o.Fixed64),this.writeFixed64(Ee)},writeSFixed64Field:function(he,Ee){this.writeTag(he,o.Fixed64),this.writeSFixed64(Ee)},writeVarintField:function(he,Ee){this.writeTag(he,o.Varint),this.writeVarint(Ee)},writeSVarintField:function(he,Ee){this.writeTag(he,o.Varint),this.writeSVarint(Ee)},writeStringField:function(he,Ee){this.writeTag(he,o.Bytes),this.writeString(Ee)},writeFloatField:function(he,Ee){this.writeTag(he,o.Fixed32),this.writeFloat(Ee)},writeDoubleField:function(he,Ee){this.writeTag(he,o.Fixed64),this.writeDouble(Ee)},writeBooleanField:function(he,Ee){this.writeVarintField(he,!!Ee)}},rI}var MC=ki(sV());const oI=3;function fse(u,o,l){o.glyphs=[],u===1&&l.readMessage(pse,o)}function pse(u,o,l){if(u===3){const{id:f,bitmap:g,width:b,height:w,left:R,top:P,advance:L}=l.readMessage(mse,{});o.glyphs.push({id:f,bitmap:new Rf({width:b+2*oI,height:w+2*oI},g),metrics:{width:b,height:w,left:R,top:P,advance:L}})}else u===4?o.ascender=l.readSVarint():u===5&&(o.descender=l.readSVarint())}function mse(u,o,l){u===1?o.id=l.readVarint():u===2?o.bitmap=l.readBytes():u===3?o.width=l.readVarint():u===4?o.height=l.readVarint():u===5?o.left=l.readSVarint():u===6?o.top=l.readSVarint():u===7&&(o.advance=l.readVarint())}const gse=oI,Gc={horizontal:1,vertical:2,horizontalOnly:3};class Dw{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(o,l){const f=new Dw;return f.scale=o||1,f.fontStack=l,f}static forImage(o){const l=new Dw;return l.image=o,l}}class tb{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l,f){const g=new tb;for(let b=0;b<o.sections.length;b++){const w=o.sections[b];w.image?g.addImageSection(w,f):g.addTextSection(w,l)}return g}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=function(l,f){let g="";for(let b=0;b<l.length;b++){const w=l.charCodeAt(b+1)||null,R=l.charCodeAt(b-1)||null;g+=!f&&(w&&Sy(w)&&!Rw[l[b+1]]||R&&Sy(R)&&!Rw[l[b-1]])||!Rw[l[b]]?l[b]:Rw[l[b]]}return g}(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&AC[this.text.charCodeAt(f)];f++)o++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&AC[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const f=new tb;return f.text=this.text.substring(o,l),f.sectionIndex=this.sectionIndex.slice(o,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}addTextSection(o,l){this.text+=o.text,this.sections.push(Dw.forText(o.scale,o.fontStack||l));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o,l){const f=o.image?o.image.getPrimary():null;if(!f)return void Ir("Can't add FormattedSection with an empty image.");f.scaleSelf(l);const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(Dw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Ir("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sI(u,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de=1){const ye=tb.fromFeature(u,g,de);q===Gc.vertical&&ye.verticalizePunctuation(Y);let be=[];const Le=function(Ve,tt,it,at,ht,zt){if(!Ve)return[];const nn=[],Xt=function(Kt,At,kt,un,pn,er){let qn=0;for(let Tn=0;Tn<Kt.length();Tn++){const cn=Kt.getSection(Tn);qn+=aV(Kt.getCodePoint(Tn),cn,un,pn,At,er)}return qn/Math.max(1,Math.ceil(qn/kt))}(Ve,tt,it,at,ht,zt),Qt=Ve.text.indexOf("​")>=0;let ln=0;for(let Kt=0;Kt<Ve.length();Kt++){const At=Ve.getSection(Kt),kt=Ve.getCodePoint(Kt);if(AC[kt]||(ln+=aV(kt,At,at,ht,tt,zt)),Kt<Ve.length()-1){const un=!((It=kt)<11904||!(cr["Bopomofo Extended"](It)||cr.Bopomofo(It)||cr["CJK Compatibility Forms"](It)||cr["CJK Compatibility Ideographs"](It)||cr["CJK Compatibility"](It)||cr["CJK Radicals Supplement"](It)||cr["CJK Strokes"](It)||cr["CJK Symbols and Punctuation"](It)||cr["CJK Unified Ideographs Extension A"](It)||cr["CJK Unified Ideographs"](It)||cr["Enclosed CJK Letters and Months"](It)||cr["Halfwidth and Fullwidth Forms"](It)||cr.Hiragana(It)||cr["Ideographic Description Characters"](It)||cr["Kangxi Radicals"](It)||cr["Katakana Phonetic Extensions"](It)||cr.Katakana(It)||cr["Vertical Forms"](It)||cr["Yi Radicals"](It)||cr["Yi Syllables"](It)));(yse[kt]||un||At.image)&&nn.push(cV(Kt+1,ln,Xt,nn,vse(kt,Ve.getCodePoint(Kt+1),un&&Qt),!1))}}var It;return uV(cV(Ve.length(),ln,Xt,nn,0,!0))}(ye,L,b,o,f,ne),{processBidirectionalText:Ie,processStyledBidirectionalText:he}=rc;if(Ie&&ye.sections.length===1){const Ve=Ie(ye.toString(),Le);for(const tt of Ve){const it=new tb;it.text=tt,it.sections=ye.sections;for(let at=0;at<tt.length;at++)it.sectionIndex.push(0);be.push(it)}}else if(he){const Ve=he(ye.text,ye.sectionIndex,Le);for(const tt of Ve){const it=new tb;it.text=tt[0],it.sectionIndex=tt[1],it.sections=ye.sections,be.push(it)}}else be=function(Ve,tt){const it=[],at=Ve.text;let ht=0;for(const zt of tt)it.push(Ve.substring(ht,zt)),ht=zt;return ht<at.length&&it.push(Ve.substring(ht,at.length)),it}(ye,Le);const Ee=[],Oe={positionedLines:Ee,text:ye.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:q,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Ve,tt,it,at,ht,zt,nn,Xt,Qt,ln,It,Kt){let At=0,kt=0,un=0;const pn=Xt==="right"?1:Xt==="left"?0:.5;let er=!1;for(const Kn of ht){const wr=Kn.getSections();for(const zr of wr){if(zr.image)continue;const jr=tt[zr.fontStack];if(jr&&(er=jr.ascender!==void 0&&jr.descender!==void 0,!er))break}if(!er)break}let qn=0;for(const Kn of ht){Kn.trim();const wr=Kn.getMaxScale(),zr=(wr-1)*aa,jr={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[qn]=jr;const Gr=jr.positionedGlyphs;let Hr=0;if(!Kn.length()){kt+=zt,++qn;continue}let Vr=0,Zi=0;for(let je=0;je<Kn.length();je++){const qe=Kn.getSection(je),Vt=Kn.getSectionIndex(je),_n=Kn.getCodePoint(je);let An=qe.scale,Cn=null,Jn=null,yr=null,ii=aa,oi=0;Qt===Gc.vertical&&((Tn=_n)===12312||Tn===12313||Tn===12316||Tn===12540||Tn===12448)&&(Qt=Gc.horizontal);const $r=!(Qt===Gc.horizontal||!It&&!cs(_n)||It&&(AC[_n]||ng(_n)));if(qe.image){const Ni=at.get(qe.image.toString());if(!Ni)continue;yr=qe.image,Ve.iconsInText=Ve.iconsInText||!0,Jn=Ni.paddedRect;const ro=Ni.displaySize;An=An*aa/Kt,Cn={width:ro[0],height:ro[1],left:0,top:-3,advance:$r?ro[1]:ro[0],localGlyph:!1},oi=er?-Cn.height*An:wr*aa-17-ro[1]*An,ii=Cn.advance;const si=($r?ro[0]:ro[1])*An-aa*wr;si>0&&si>Hr&&(Hr=si)}else{const Ni=it[qe.fontStack];if(!Ni)continue;Ni[_n]&&(Jn=Ni[_n]);const ro=tt[qe.fontStack];if(!ro)continue;const si=ro.glyphs[_n];if(!si)continue;if(Cn=si.metrics,ii=_n!==8203?aa:0,er){const Po=ro.ascender!==void 0?Math.abs(ro.ascender):0,ao=ro.descender!==void 0?Math.abs(ro.descender):0,Bi=(Po+ao)*An;Vr<Bi&&(Vr=Bi,Zi=(Po-ao)/2*An),oi=-Po*An}else oi=(wr-An)*aa-17}$r?(Ve.verticalizable=!0,Gr.push({glyph:_n,image:yr,x:At,y:kt+oi,vertical:$r,scale:An,localGlyph:Cn.localGlyph,fontStack:qe.fontStack,sectionIndex:Vt,metrics:Cn,rect:Jn}),At+=ii*An+ln):(Gr.push({glyph:_n,image:yr,x:At,y:kt+oi,vertical:$r,scale:An,localGlyph:Cn.localGlyph,fontStack:qe.fontStack,sectionIndex:Vt,metrics:Cn,rect:Jn}),At+=Cn.advance*An+ln)}Gr.length!==0&&(un=Math.max(At-ln,un),er?dV(Gr,pn,Hr,Zi,zt*wr/2):dV(Gr,pn,Hr,0,zt/2)),At=0;const so=zt*wr+Hr;jr.lineOffset=Math.max(Hr,zr),kt+=so,++qn}var Tn;const cn=kt,{horizontalAlign:Rr,verticalAlign:Zn}=aI(nn);(function(Kn,wr,zr,jr,Gr,Hr){const Vr=(wr-zr)*Gr,Zi=-Hr*jr;for(const so of Kn)for(const je of so.positionedGlyphs)je.x+=Vr,je.y+=Zi})(Ve.positionedLines,pn,Rr,Zn,un,cn),Ve.top+=-Zn*cn,Ve.bottom=Ve.top+cn,Ve.left+=-Rr*un,Ve.right=Ve.left+un,Ve.hasBaseline=er}(Oe,o,l,f,be,w,R,P,q,L,Y,re),!function(Ve){for(const tt of Ve)if(tt.positionedGlyphs.length!==0)return!1;return!0}(Ee))return Oe}const AC={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yse={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function aV(u,o,l,f,g,b){if(o.image){const w=f.get(o.image.toString());return w?w.displaySize[0]*o.scale*aa/b+g:0}{const w=l[o.fontStack],R=w&&w.glyphs[u];return R?R.metrics.advance*o.scale+g:0}}function lV(u,o,l,f){const g=Math.pow(u-o,2);return f?u<o?g/2:2*g:g+Math.abs(l)*l}function vse(u,o,l){let f=0;return u===10&&(f-=1e4),l&&(f+=150),u!==40&&u!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function cV(u,o,l,f,g,b){let w=null,R=lV(o,l,g,b);for(const P of f){const L=lV(o-P.x,l,g,b)+P.badness;L<=R&&(w=P,R=L)}return{index:u,x:o,priorBreak:w,badness:R}}function uV(u){return u?uV(u.priorBreak).concat(u.index):[]}function aI(u){let o=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function dV(u,o,l,f,g){if(!(o||l||f||g))return;const b=u.length-1,w=u[b],R=(w.x+w.metrics.advance*w.scale)*o;for(let P=0;P<=b;P++)u[P].x-=R,u[P].y+=l+f+g}function hV(u){return u.imagePrimary!==void 0&&u.top!==void 0&&u.bottom!==void 0&&u.left!==void 0&&u.right!==void 0}function _se(u,o,l,f){const{horizontalAlign:g,verticalAlign:b}=aI(f),w=l[0]-u.displaySize[0]*g,R=l[1]-u.displaySize[1]*b;return{imagePrimary:u,imageSecondary:o,top:R,bottom:R+u.displaySize[1],left:w,right:w+u.displaySize[0]}}function fV(u,o,l,f,g,b){const w=u.imagePrimary;let R;if(w.content){const ye=w.content,be=w.pixelRatio||1;R=[ye[0]/be,ye[1]/be,w.displaySize[0]-ye[2]/be,w.displaySize[1]-ye[3]/be]}const P=o.left*b,L=o.right*b;let $,q,Y,ne;l==="width"||l==="both"?(ne=g[0]+P-f[3],q=g[0]+L+f[1]):(ne=g[0]+(P+L-w.displaySize[0])/2,q=ne+w.displaySize[0]);const re=o.top*b,de=o.bottom*b;return l==="height"||l==="both"?($=g[1]+re-f[0],Y=g[1]+de+f[2]):($=g[1]+(re+de-w.displaySize[1])/2,Y=$+w.displaySize[1]),{imagePrimary:w,imageSecondary:void 0,top:$,right:q,bottom:Y,left:ne,collisionPadding:R}}function pV(u){return!u.imagePrimary.stretchX}function mV(u){return!u.imagePrimary.stretchY}function gV(u){return{width:u.right-u.left,height:u.bottom-u.top}}const Hp=128;function yV(u,o){const{expression:l}=o;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Li(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=l;let b=0;for(;b<f.length&&f[b]<=u;)b++;b=Math.max(0,b-1);let w=b;for(;w<f.length&&f[w]<u+1;)w++;w=Math.min(f.length-1,w);const R=f[b],P=f[w];return l.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:P,interpolationType:g}:{kind:"camera",minZoom:R,maxZoom:P,minSize:l.evaluate(new Li(R)),maxSize:l.evaluate(new Li(P)),interpolationType:g}}}function lI(u,{uSize:o,uSizeT:l},{lowerSize:f,upperSize:g}){return u.kind==="source"?f/Hp:u.kind==="composite"?lr(f/Hp,g/Hp,l):o}function Pw(u,o,l=1){let f=0,g=0;if(u.kind==="constant")g=u.layoutSize*l;else if(u.kind!=="source"){const{interpolationType:b,minZoom:w,maxZoom:R}=u,P=b?Ze(Xa.interpolationFactor(b,o,w,R),0,1):0;u.kind==="camera"?g=lr(u.minSize,u.maxSize,P)*l:f=P*l}return{uSizeT:f,uSize:g}}class Pg extends mn{constructor(o,l,f,g,b){super(o,l),this.angle=g,this.z=f,b!==void 0&&(this.segment=b)}clone(){return new Pg(this.x,this.y,this.z,this.angle,this.segment)}}function vV(u,o,l,f,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,R=0;for(;R>-l/2;){if(w--,w<0)return!1;R-=u[w].dist(b),b=u[w]}R+=u[w].dist(u[w+1]),w++;const P=[];let L=0;for(;R<l/2;){const $=u[w],q=u[w+1];if(!q)return!1;let Y=u[w-1].angleTo($)-$.angleTo(q);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:R,angleDelta:Y}),L+=Y;R-P[0].distance>f;)L-=P.shift().angleDelta;if(L>g)return!1;w++,R+=$.dist(q)}return!0}function _V(u){let o=0;for(let l=0;l<u.length-1;l++)o+=u[l].dist(u[l+1]);return o}function xV(u,o,l){return u?.6*o*l:0}function bV(u,o){return Math.max(u?u.right-u.left:0,o?o.right-o.left:0)}function xse(u,o,l,f,g,b){const w=xV(l,g,b),R=bV(l,f)*b;let P=0;const L=_V(u)/2;for(let $=0;$<u.length-1;$++){const q=u[$],Y=u[$+1],ne=q.dist(Y);if(P+ne>L){const re=(L-P)/ne,de=lr(q.x,Y.x,re),ye=lr(q.y,Y.y,re),be=new Pg(de,ye,0,Y.angleTo(q),$);return!w||vV(u,be,R,w,o)?be:void 0}P+=ne}}function bse(u,o,l,f,g,b,w,R,P){const L=xV(f,b,w),$=bV(f,g),q=$*w,Y=u[0].x===0||u[0].x===P||u[0].y===0||u[0].y===P;return o-q<o/4&&(o=q+o/4),wV(u,Y?o/2*R%o:($/2+2*b)*w*R%o,o,L,l,q,Y,!1,P)}function wV(u,o,l,f,g,b,w,R,P){const L=b/2,$=_V(u);let q=0,Y=o-l,ne=[];for(let re=0;re<u.length-1;re++){const de=u[re],ye=u[re+1],be=de.dist(ye),Le=ye.angleTo(de);for(;Y+l<q+be;){Y+=l;const Ie=(Y-q)/be,he=lr(de.x,ye.x,Ie),Ee=lr(de.y,ye.y,Ie);if(he>=0&&he<P&&Ee>=0&&Ee<P&&Y-L>=0&&Y+L<=$){const Oe=new Pg(he,Ee,0,Le,re);f&&!vV(u,Oe,b,f,g)||ne.push(Oe)}}q+=be}return R||ne.length||w||(ne=wV(u,q/2,l,f,g,b,w,!0,P)),ne}function SV(u){let o=0,l=0;for(const w of u)o+=w.w*w.h,l=Math.max(l,w.w);u.sort((w,R)=>R.h-w.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let g=0,b=0;for(const w of u)for(let R=f.length-1;R>=0;R--){const P=f[R];if(!(w.w>P.w||w.h>P.h)){if(w.x=P.x,w.y=P.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===P.w&&w.h===P.h){const L=f.pop();R<f.length&&(f[R]=L)}else w.h===P.h?(P.x+=w.w,P.w-=w.w):w.w===P.w?(P.y+=w.h,P.h-=w.h):(f.push({x:P.x+w.w,y:P.y,w:P.w-w.w,h:w.h}),P.y+=w.h,P.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}zn(Pg,"Anchor");const G_=1;class Iw{static getImagePositionScale(o,l,f){if(l&&o&&o.options&&o.options.transform){const g=o.options.transform;return{x:g.a,y:g.d}}return{x:f,y:f}}constructor(o,l,f,g){this.paddedRect=o;const{pixelRatio:b,version:w,stretchX:R,stretchY:P,content:L,sdf:$,usvg:q}=l;this.pixelRatio=b,this.stretchX=R,this.stretchY=P,this.content=L,this.version=w,this.padding=f,this.sdf=$,this.scale=Iw.getImagePositionScale(g,q,b)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function cI(u,o,l){const f=Ql.parse(u),g=function(b,w,R=[1,1]){return{x:0,y:0,w:(b.data?b.data.width:b.width*R[0])+2*w,h:(b.data?b.data.height:b.height*R[1])+2*w}}(o,l,[f.options.transform.a,f.options.transform.d]);return{bin:g,imagePosition:new Iw(g,o,l,f),imageVariant:f}}class TV{constructor(o,l,f){const g=new Map,b=new Map;this.haveRenderCallbacks=[];const w=[];this.addImages(o,g,G_,w),this.addImages(l,b,2,w);const{w:R,h:P}=SV(w),L=new qs({width:R||1,height:P||1});for(const[$,q]of o.entries()){const Y=g.get($).paddedRect;qs.copy(q.data,L,{x:0,y:0},{x:Y.x+G_,y:Y.y+G_},q.data,f,q.sdf)}for(const[$,q]of l.entries()){const Y=b.get($),ne=Y.paddedRect;let re=Y.padding;const de=ne.x+re,ye=ne.y+re,be=q.data.width,Le=q.data.height;re=re>1?re-1:re,qs.copy(q.data,L,{x:0,y:0},{x:de,y:ye},q.data,f),qs.copy(q.data,L,{x:0,y:Le-re},{x:de,y:ye-re},{width:be,height:re},f),qs.copy(q.data,L,{x:0,y:0},{x:de,y:ye+Le},{width:be,height:re},f),qs.copy(q.data,L,{x:be-re,y:0},{x:de-re,y:ye},{width:re,height:Le},f),qs.copy(q.data,L,{x:0,y:0},{x:de+be,y:ye},{width:re,height:Le},f),qs.copy(q.data,L,{x:be-re,y:Le-re},{x:de-re,y:ye-re},{width:re,height:re},f),qs.copy(q.data,L,{x:0,y:Le-re},{x:de+be,y:ye-re},{width:re,height:re},f),qs.copy(q.data,L,{x:0,y:0},{x:de+be,y:ye+Le},{width:re,height:re},f),qs.copy(q.data,L,{x:be-re,y:0},{x:de-re,y:ye+Le},{width:re,height:re},f)}this.lut=f,this.image=L,this.iconPositions=g,this.patternPositions=b}addImages(o,l,f,g){for(const[b,w]of o.entries()){const{bin:R,imagePosition:P,imageVariant:L}=cI(b,w,f);l.set(b,P),g.push(R),w.hasRenderCallback&&this.haveRenderCallbacks.push(L.id)}}patchUpdatedImages(o,l,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>o.hasImage(g,f)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const g of o.getUpdatedImages(f)){for(const b of this.iconPositions.keys()){const w=Ql.parse(b);if(ul.isEqual(w.id,g)){const R=o.getImage(g,f);this.patchUpdatedImage(this.iconPositions.get(b),R,l)}}for(const b of this.patternPositions.keys()){const w=Ql.parse(b);if(ul.isEqual(w.id,g)){const R=o.getImage(g,f);this.patchUpdatedImage(this.patternPositions.get(b),R,l)}}}}patchUpdatedImage(o,l,f){if(!o||!l||o.version===l.version)return;o.version=l.version;const[g,b]=o.tl,w=o.sdf;if(this.lut||w){const R={width:l.data.width,height:l.data.height},P=new qs(R);qs.copy(l.data,P,{x:0,y:0},{x:0,y:0},R,this.lut,w),f.update(P,{position:{x:g,y:b}})}else f.update(l.data,{position:{x:g,y:b}})}}zn(Iw,"ImagePosition"),zn(TV,"ImageAtlas");const RC=1e20;function EV(u,o,l,f,g,b,w,R,P){for(let L=o;L<o+f;L++)CV(u,l*b+L,b,g,w,R,P);for(let L=l;L<l+g;L++)CV(u,L*b+o,1,f,w,R,P)}function CV(u,o,l,f,g,b,w){b[0]=0,w[0]=-1e20,w[1]=RC,g[0]=u[o];for(let R=1,P=0,L=0;R<f;R++){g[R]=u[o+R*l];const $=R*R;do{const q=b[P];L=(g[R]-g[q]+$-q*q)/(R-q)/2}while(L<=w[P]&&--P>-1);P++,b[P]=R,w[P]=L,w[P+1]=RC}for(let R=0,P=0;R<f;R++){for(;w[P+1]<R;)P++;const L=b[P],$=R-L;u[o+R*l]=g[L]+$*$}}const Ff=2,uI={none:0,ideographs:1,all:2};class nb{constructor(o,l,f){this.requestManager=o,this.localGlyphMode=l,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o,l){this.urls[l]=o}getGlyphs(o,l,f){const g=[],b=this.urls[l]||rs.GLYPHS_URL;for(const w in o)for(const R of o[w])g.push({stack:w,id:R});vt(g,({stack:w,id:R},P)=>{let L=this.entries[w];L||(L=this.entries[w]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let $=L.glyphs[R];if($!==void 0)return void P(null,{stack:w,id:R,glyph:$});if($=this._tinySDF(L,w,R),$)return L.glyphs[R]=$,void P(null,{stack:w,id:R,glyph:$});const q=Math.floor(R/256);if(256*q>65535)return Ir("glyphs > 65535 not supported"),void P(null,{stack:w,id:R,glyph:$});if(L.ranges[q])return void P(null,{stack:w,id:R,glyph:$});let Y=L.requests[q];Y||(Y=L.requests[q]=[],nb.loadGlyphRange(w,q,b,this.requestManager,(ne,re)=>{if(re){L.ascender=re.ascender,L.descender=re.descender;for(const de in re.glyphs)this._doesCharSupportLocalGlyph(+de)||(L.glyphs[+de]=re.glyphs[+de]);L.ranges[q]=!0}for(const de of Y)de(ne,re);delete L.requests[q]})),Y.push((ne,re)=>{ne?P(ne):re&&P(null,{stack:w,id:R,glyph:re.glyphs[R]||null})})},(w,R)=>{if(w)f(w);else if(R){const P={};for(const{stack:L,id:$,glyph:q}of R)P[L]===void 0&&(P[L]={}),P[L].glyphs===void 0&&(P[L].glyphs={}),P[L].glyphs[$]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics},P[L].ascender=this.entries[L].ascender,P[L].descender=this.entries[L].descender;f(null,P)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==uI.none&&(this.localGlyphMode===uI.all?!!this.localFontFamily:!!this.localFontFamily&&(cr["CJK Unified Ideographs"](o)||cr["Hangul Syllables"](o)||cr.Hiragana(o)||cr.Katakana(o)||cr["CJK Symbols and Punctuation"](o)||cr["CJK Unified Ideographs Extension A"](o)||cr["CJK Unified Ideographs Extension B"](o)||cr.Osage(o)))}_tinySDF(o,l,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let b=o.tinySDF;if(!b){let de="400";/bold/i.test(l)?de="900":/medium/i.test(l)?de="500":/light/i.test(l)&&(de="200"),b=o.tinySDF=new nb.TinySDF({fontFamily:g,fontWeight:de,fontSize:24*Ff,buffer:3*Ff,radius:8*Ff}),b.fontWeight=de}if(this.localGlyphs[b.fontWeight][f])return this.localGlyphs[b.fontWeight][f];const w=String.fromCodePoint(f),{data:R,width:P,height:L,glyphWidth:$,glyphHeight:q,glyphLeft:Y,glyphTop:ne,glyphAdvance:re}=b.draw(w);return this.localGlyphs[b.fontWeight][f]={id:f,bitmap:new Rf({width:P,height:L},R),metrics:{width:$/Ff,height:q/Ff,left:Y/Ff,top:ne/Ff-27,advance:re/Ff,localGlyph:!0}}}}nb.loadGlyphRange=function(u,o,l,f,g){const b=256*o,w=b+255,R=f.transformRequest(f.normalizeGlyphsURL(l).replace("{fontstack}",u).replace("{range}",`${b}-${w}`),up.Glyphs);Ad(R,(P,L)=>{if(P)g(P);else if(L){const $={},q=function(Y){return new MC(Y).readFields(fse,{})}(L);for(const Y of q.glyphs)$[Y.id]=Y;g(null,{glyphs:$,ascender:q.ascender,descender:q.descender})}})},nb.TinySDF=class{constructor({fontSize:u=24,buffer:o=3,radius:l=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=l;const R=this.size=u+4*o,P=this._createCanvas(R),L=this.ctx=P.getContext("2d",{willReadFrequently:!0});L.font=`${w} ${b} ${u}px ${g}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(u){const o=document.createElement("canvas");return o.width=o.height=u,o}draw(u){const{width:o,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(u),w=Math.ceil(l),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),P=Math.min(this.size-this.buffer,w+Math.ceil(f)),L=R+2*this.buffer,$=P+2*this.buffer,q=Math.max(L*$,0),Y=new Uint8ClampedArray(q),ne={data:Y,width:L,height:$,glyphWidth:R,glyphHeight:P,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(R===0||P===0)return ne;const{ctx:re,buffer:de,gridInner:ye,gridOuter:be}=this;re.clearRect(de,de,R,P),re.fillText(u,de,de+w);const Le=re.getImageData(de,de,R,P);be.fill(RC,0,q),ye.fill(0,0,q);for(let Ie=0;Ie<P;Ie++)for(let he=0;he<R;he++){const Ee=Le.data[4*(Ie*R+he)+3]/255;if(Ee===0)continue;const Oe=(Ie+de)*L+he+de;if(Ee===1)be[Oe]=0,ye[Oe]=RC;else{const Ve=.5-Ee;be[Oe]=Ve>0?Ve*Ve:0,ye[Oe]=Ve<0?Ve*Ve:0}}EV(be,0,0,L,$,L,this.f,this.v,this.z),EV(ye,de,de,R,P,L,this.f,this.v,this.z);for(let Ie=0;Ie<q;Ie++){const he=Math.sqrt(be[Ie])-Math.sqrt(ye[Ie]);Y[Ie]=Math.round(255-255*(he/this.radius+this.cutoff))}return ne}};const Y_=G_;function MV(u,o){return u+o[1]-o[0]}function AV(u,o,l,f,g=1){const b=[],w=u.imagePrimary,R=w.pixelRatio,P=w.paddedRect.w-2*Y_,L=w.paddedRect.h-2*Y_,$=(u.right-u.left)*g,q=(u.bottom-u.top)*g,Y=w.stretchX||[[0,P]],ne=w.stretchY||[[0,L]],re=Y.reduce(MV,0),de=ne.reduce(MV,0),ye=P-re,be=L-de;let Le=0,Ie=re,he=0,Ee=de,Oe=0,Ve=ye,tt=0,it=be;if(w.content&&f){const ht=w.content;Le=DC(Y,0,ht[0]),he=DC(ne,0,ht[1]),Ie=DC(Y,ht[0],ht[2]),Ee=DC(ne,ht[1],ht[3]),Oe=ht[0]-Le,tt=ht[1]-he,Ve=ht[2]-ht[0]-Ie,it=ht[3]-ht[1]-Ee}const at=(ht,zt,nn,Xt)=>{const Qt=PC(ht.stretch-Le,Ie,$,u.left*g),ln=IC(ht.fixed-Oe,Ve,ht.stretch,re),It=PC(zt.stretch-he,Ee,q,u.top*g),Kt=IC(zt.fixed-tt,it,zt.stretch,de),At=PC(nn.stretch-Le,Ie,$,u.left*g),kt=IC(nn.fixed-Oe,Ve,nn.stretch,re),un=PC(Xt.stretch-he,Ee,q,u.top*g),pn=IC(Xt.fixed-tt,it,Xt.stretch,de),er=new mn(Qt,It),qn=new mn(At,It),Tn=new mn(At,un),cn=new mn(Qt,un),Rr=new mn(ln/R,Kt/R),Zn=new mn(kt/R,pn/R),Kn=o*Math.PI/180;if(Kn){const Vr=Math.sin(Kn),Zi=Math.cos(Kn),so=[Zi,-Vr,Vr,Zi];er._matMult(so),qn._matMult(so),cn._matMult(so),Tn._matMult(so)}const wr=ht.stretch+ht.fixed,zr=nn.stretch+nn.fixed,jr=zt.stretch+zt.fixed,Gr=Xt.stretch+Xt.fixed,Hr=u.imageSecondary;return{tl:er,tr:qn,bl:cn,br:Tn,texPrimary:{x:w.paddedRect.x+Y_+wr,y:w.paddedRect.y+Y_+jr,w:zr-wr,h:Gr-jr},texSecondary:Hr?{x:Hr.paddedRect.x+Y_+wr,y:Hr.paddedRect.y+Y_+jr,w:zr-wr,h:Gr-jr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:Zn,minFontScaleX:Ve/R/$,minFontScaleY:it/R/q,isSDF:l}};if(f&&(w.stretchX||w.stretchY)){const ht=RV(Y,ye,re),zt=RV(ne,be,de);for(let nn=0;nn<ht.length-1;nn++){const Xt=ht[nn],Qt=ht[nn+1];for(let ln=0;ln<zt.length-1;ln++)b.push(at(Xt,zt[ln],Qt,zt[ln+1]))}}else b.push(at({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:L+1}));return b}function DC(u,o,l){let f=0;for(const g of u)f+=Math.max(o,Math.min(l,g[1]))-Math.max(o,Math.min(l,g[0]));return f}function RV(u,o,l){const f=[{fixed:-1,stretch:0}];for(const[g,b]of u){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return f.push({fixed:o+Y_,stretch:l}),f}function PC(u,o,l,f){return u/o*l+f}function IC(u,o,l,f){return u-o*l/f}function wse(u,o,l,f){const g=o+u.positionedLines[f].lineOffset;return f===0?l+g/2:l+(g+(o+u.positionedLines[f-1].lineOffset))/2}function Sse(u,o=1,l=!1){let f=1/0,g=1/0,b=-1/0,w=-1/0;const R=u[0];for(let ne=0;ne<R.length;ne++){const re=R[ne];(!ne||re.x<f)&&(f=re.x),(!ne||re.y<g)&&(g=re.y),(!ne||re.x>b)&&(b=re.x),(!ne||re.y>w)&&(w=re.y)}const P=Math.min(b-f,w-g);let L=P/2;const $=new Nm([],Tse);if(P===0)return new mn(f,g);for(let ne=f;ne<b;ne+=P)for(let re=g;re<w;re+=P)$.push(new rb(ne+L,re+L,L,u));let q=function(ne){let re=0,de=0,ye=0;const be=ne[0];for(let Le=0,Ie=be.length,he=Ie-1;Le<Ie;he=Le++){const Ee=be[Le],Oe=be[he],Ve=Ee.x*Oe.y-Oe.x*Ee.y;de+=(Ee.x+Oe.x)*Ve,ye+=(Ee.y+Oe.y)*Ve,re+=3*Ve}return new rb(de/re,ye/re,0,ne)}(u),Y=$.length;for(;$.length;){const ne=$.pop();(ne.d>q.d||!q.d)&&(q=ne,l&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,Y)),ne.max-q.d<=o||(L=ne.h/2,$.push(new rb(ne.p.x-L,ne.p.y-L,L,u)),$.push(new rb(ne.p.x+L,ne.p.y-L,L,u)),$.push(new rb(ne.p.x-L,ne.p.y+L,L,u)),$.push(new rb(ne.p.x+L,ne.p.y+L,L,u)),Y+=4)}return l&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${q.d}`)),q.p}function Tse(u,o){return o.max-u.max}class rb{constructor(o,l,f,g){this.p=new mn(o,l),this.h=f,this.d=function(b,w){let R=!1,P=1/0;for(let L=0;L<w.length;L++){const $=w[L];for(let q=0,Y=$.length,ne=Y-1;q<Y;ne=q++){const re=$[q],de=$[ne];re.y>b.y!=de.y>b.y&&b.x<(de.x-re.x)*(b.y-re.y)/(de.y-re.y)+re.x&&(R=!R),P=Math.min(P,Kr(b,re,de))}}return(R?1:-1)*Math.sqrt(P)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const Ese=Object.keys,dI=Number.POSITIVE_INFINITY,Cse=Math.sqrt(2);function DV(u,[o,l]){let f=0,g=0;if(l===dI){o<0&&(o=0);const b=o/Cse;switch(u){case"top-right":case"top-left":g=b-7;break;case"bottom-right":case"bottom-left":g=7-b;break;case"bottom":g=7-o;break;case"top":g=o-7}switch(u){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),l=Math.abs(l),u){case"top-right":case"top-left":case"top":g=l-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-l}switch(u){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function kC(u,o,l,f,g,b,w,R,P){if(!o||!o.usvg)return;const L=gV(f),$=gV(g),q=b!=="both"&&b!=="width"||!pV(f)?1:Math.max(1,$.width/L.width),Y=b!=="both"&&b!=="height"||!mV(f)?1:Math.max(1,$.height/L.height);l.scaleSelf(q,Y);const ne=l.toString();w.set(ne,l),R.set(ne,o);const{imagePosition:re}=cI(ne,o,G_);P.set(ne,re)}function PV(u,o,l,f,g,b,w,R){if(!u)return;const P=function(L,$,q,Y,ne){if(L.kind==="camera")return L.maxSize;if(L.kind==="composite"){const re=$.possiblyEvaluate(new Li(L.maxZoom),q).evaluate(ne,{},q),de=$.possiblyEvaluate(new Li(L.minZoom),q).evaluate(ne,{},q);return Math.max(re,de)}return $.possiblyEvaluate(new Li(Y)).evaluate(ne,{},q)}(o,l,f,g,b);return u.scaleSelf(P*R*w)}function IV(u,o,l,f,g,b,w,R){return{iconPrimary:PV(u.getPrimary(),o,l,f,g,b,w,R),iconSecondary:PV(u.getSecondary(),o,l,f,g,b,w,R)}}function kV(u,o,l,f){if(!u)return;const g=o.get(l.toString());if(u.imagePrimary=g,f){const b=o.get(f.toString());u.imageSecondary=b}}function Mse(u,o){for(const l in u.horizontal)OV(u.horizontal[l],o);OV(u.vertical,o)}function OV(u,o){if(u){for(const l of u.positionedLines)for(const f of l.positionedGlyphs)if(f.image!==null){const g=f.image.toString();f.rect=o.get(g).paddedRect}}}function hI(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ase(u,o,l,f,g,b,w,R,P){const L=fI(b.horizontal)||b.vertical,$=l.get("icon-text-fit-padding").evaluate(f,{},g);let q,Y=o;return o&&P!=="none"&&(u.allowVerticalPlacement&&b.vertical&&(q=fV(o,b.vertical,P,$,R,w)),L&&(Y=fV(o,L,P,$,R,w))),{defaultShapedIcon:Y,verticallyShapedIcon:q}}function Rse(u,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be,Le,Ie){let he=w.textMaxSize.evaluate(o,{},Y);he===void 0?he=R*w.textScaleFactor:he*=w.textScaleFactor;const Ee=u.layers[0].layout,Oe=fI(l.horizontal)||l.vertical,Ve=ne.name==="globe",tt=aa,it=u.tilePixelRatio*he/tt,at=(ln=u.overscaling,u.zoom>18&&ln>2&&(ln>>=1),Math.max(xn/(512*ln),1)*Ee.get("symbol-spacing")),ht=Ee.get("text-padding")*u.tilePixelRatio,zt=Ee.get("icon-padding")*u.tilePixelRatio,nn=ie(Ee.get("text-max-angle")),Xt=Ee.get("icon-rotation-alignment")==="map"&&Ie!=="point",Qt=at/2;var ln;u.hasAnyIconTextFit===!1&&ye!=="none"&&(u.hasAnyIconTextFit=!0);const It=o.properties?+o.properties[Cg]:null,Kt=It&&u.elevationFeatureIdToIndex?u.elevationFeatureIdToIndex.get(It):65535,At=(kt,un,pn)=>{if(un.x<0||un.x>=xn||un.y<0||un.y>=xn)return;let er=null;if(Ve){const{x:qn,y:Tn,z:cn}=ne.projectTilePoint(un.x,un.y,pn);er={anchor:new Pg(qn,Tn,cn,0,void 0),up:ne.upVector(pn,un.x,un.y)}}(function(qn,Tn,cn,Rr,Zn,Kn,wr,zr,jr,Gr,Hr,Vr,Zi,so,je,qe,Vt,_n,An,Cn,Jn,yr,ii,oi,$r,Ni,ro,si,Po){const ao=qn.addToLineVertexArray(Tn,Rr);let Bi,jo,po,io,lo,Hi,Wr,Yi=0,Io=0,gr=0,mi=0,mo=-1,Oo=-1;const xo={};let Ss=cl("");const Ki=cn?cn.anchor:Tn,ps=si!=="none";let dc=0,Na=0;if(jr._unevaluatedLayout.getValue("text-radial-offset")===void 0){const Ts=jr.layout.get("text-offset").evaluate(Jn,{},$r);dc=Ts[0]*aa,Na=Ts[1]*aa}else dc=jr.layout.get("text-radial-offset").evaluate(Jn,{},$r)*aa,Na=dI;if(qn.allowVerticalPlacement&&Zn.vertical){const Ts=Zn.vertical;if(je)Hi=pI(Ts),zr&&(Wr=pI(zr));else{const Bs=jr.layout.get("text-rotate").evaluate(Jn,{},$r)+90;po=OC(Gr,Ki,Tn,Hr,Vr,Zi,Ts,so,Bs,qe),zr&&(io=OC(Gr,Ki,Tn,Hr,Vr,Zi,zr,_n,Bs))}}if(Kn){const Ts=qn.iconSizeData,Bs=jr.layout.get("icon-rotate").evaluate(Jn,{},$r),Va=AV(Kn,Bs,ii,ps,yr.iconScaleFactor),wl=zr?AV(zr,Bs,ii,ps,yr.iconScaleFactor):void 0;jo=OC(Gr,Ki,Tn,Hr,Vr,Zi,Kn,_n,Bs,null),Yi=4*Va.length;let nl=null;Ts.kind==="source"?(nl=[Hp*jr.layout.get("icon-size").evaluate(Jn,{},$r)*yr.iconScaleFactor],nl[0]>Gy&&Ir(`${qn.layerIds[0]}: Value for "icon-size" is >= ${kw}. Reduce your "icon-size".`)):Ts.kind==="composite"&&(nl=[Hp*yr.compositeIconSizes[0].evaluate(Jn,{},$r)*yr.iconScaleFactor,Hp*yr.compositeIconSizes[1].evaluate(Jn,{},$r)*yr.iconScaleFactor],(nl[0]>Gy||nl[1]>Gy)&&Ir(`${qn.layerIds[0]}: Value for "icon-size" is >= ${kw}. Reduce your "icon-size".`)),qn.addSymbols(qn.icon,Va,nl,Cn,An,Jn,void 0,cn,Tn,ao.lineStartIndex,ao.lineLength,-1,oi,$r,Ni,ro),mo=qn.icon.placedSymbolArray.length-1,wl&&(Io=4*wl.length,qn.addSymbols(qn.icon,wl,nl,Cn,An,Jn,Gc.vertical,cn,Tn,ao.lineStartIndex,ao.lineLength,-1,oi,$r,Ni,ro),Oo=qn.icon.placedSymbolArray.length-1)}for(const Ts in Zn.horizontal){const Bs=Ts,Va=Zn.horizontal[Bs];Bi||(Ss=cl(Va.text),je?lo=pI(Va):Bi=OC(Gr,Ki,Tn,Hr,Vr,Zi,Va,so,jr.layout.get("text-rotate").evaluate(Jn,{},$r),qe));const wl=Va.positionedLines.length===1;if(gr+=LV(qn,cn,Tn,Va,wr,jr,je,Jn,qe,ao,Zn.vertical?Gc.horizontal:Gc.horizontalOnly,wl?Ese(Zn.horizontal):[Bs],xo,mo,yr,oi,$r,Ni),wl)break}Zn.vertical&&(mi+=LV(qn,cn,Tn,Zn.vertical,wr,jr,je,Jn,qe,ao,Gc.vertical,["vertical"],xo,Oo,yr,oi,$r,Ni));let ba=-1;const hc=(Ts,Bs)=>Ts?Math.max(Ts,Bs):Bs;ba=hc(lo,ba),ba=hc(Hi,ba),ba=hc(Wr,ba);const Wp=ba>-1?1:0;qn.glyphOffsetArray.length>=65535&&Ir("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&qn.addToSortKeyRanges(qn.symbolInstances.length,Jn.sortKey),qn.symbolInstances.emplaceBack(Tn.x,Tn.y,Ki.x,Ki.y,Ki.z,xo.right>=0?xo.right:-1,xo.center>=0?xo.center:-1,xo.left>=0?xo.left:-1,xo.vertical>=0?xo.vertical:-1,mo,Oo,Ss,Bi!==void 0?Bi:qn.collisionBoxArray.length,Bi!==void 0?Bi+1:qn.collisionBoxArray.length,po!==void 0?po:qn.collisionBoxArray.length,po!==void 0?po+1:qn.collisionBoxArray.length,jo!==void 0?jo:qn.collisionBoxArray.length,jo!==void 0?jo+1:qn.collisionBoxArray.length,io||qn.collisionBoxArray.length,io?io+1:qn.collisionBoxArray.length,Hr,gr,mi,Yi,Io,Wp,0,dc,Na,ba,0,ps?1:0,Po)})(u,un,er,kt,l,f,b,g,u.layers[0],u.collisionBoxArray,o.index,o.sourceLayerIndex,u.index,ht,Le,L,0,zt,Xt,be,o,w,$,q,Y,re,de,ye,Kt)};if(Ie==="line")for(const kt of p(o.geometry,0,0,xn,xn)){const un=bse(kt,at,nn,l.vertical||Oe,f,tt,it,u.overscaling,xn);for(const pn of un)Oe&&Dse(u,Oe.text,Qt,pn)||At(kt,pn,Y)}else if(Ie==="line-center"){for(const kt of o.geometry)if(kt.length>1){const un=xse(kt,nn,l.vertical||Oe,f,tt,it);un&&At(kt,un,Y)}}else if(o.type==="Polygon")for(const kt of zx(o.geometry,0)){const un=Sse(kt,16);At(kt[0],new Pg(un.x,un.y,0,0,void 0),Y)}else if(o.type==="LineString")for(const kt of o.geometry)At(kt,new Pg(kt[0].x,kt[0].y,0,0,void 0),Y);else if(o.type==="Point")for(const kt of o.geometry)for(const un of kt)At([un],new Pg(un.x,un.y,0,0,void 0),Y)}const kw=255,Gy=kw*Hp;function LV(u,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye,be){const Le=function(Ee,Oe,Ve,tt,it,at,ht,zt){const nn=[];if(Oe.positionedLines.length===0)return nn;const Xt=tt.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,Qt=function(kt){const un=kt[0],pn=kt[1],er=un*pn;return er>0?[un,-pn]:er<0?[-un,pn]:un===0?[pn,un]:[pn,-un]}(Ve);let ln=Math.abs(Oe.top-Oe.bottom);for(const kt of Oe.positionedLines)ln-=kt.lineOffset;const It=Oe.positionedLines.length,Kt=ln/It;let At=Oe.top-Ve[1];for(let kt=0;kt<It;++kt){const un=Oe.positionedLines[kt];At=wse(Oe,Kt,At,kt);for(const pn of un.positionedGlyphs){if(!pn.rect)continue;const er=pn.rect||{};let qn=gse+1,Tn=!0,cn=1,Rr=0;if(pn.image){const Jn=ht.get(pn.image.toString());if(!Jn)continue;if(Jn.sdf){Ir("SDF images are not supported in formatted text and will be ignored.");continue}Tn=!1,cn=Jn.pixelRatio,qn=G_/cn}const Zn=(it||zt)&&pn.vertical,Kn=pn.metrics.advance*pn.scale/2,wr=pn.metrics,zr=pn.rect;if(zr===null)continue;zt&&Oe.verticalizable&&(Rr=pn.image?Kn-pn.metrics.width*pn.scale/2:0);const jr=it?[pn.x+Kn,pn.y]:[0,0];let Gr=[0,0],Hr=[0,0],Vr=!1;it||(Zn?(Hr=[pn.x+Kn+Qt[0],pn.y+Qt[1]-Rr],Vr=!0):Gr=[pn.x+Kn+Ve[0],pn.y+Ve[1]-Rr]);const Zi=zr.w*pn.scale/(cn*(pn.localGlyph?Ff:1)),so=zr.h*pn.scale/(cn*(pn.localGlyph?Ff:1));let je,qe,Vt,_n;if(Zn){const Jn=pn.y-At,yr=new mn(-Kn,Kn-Jn),ii=-Math.PI/2,oi=new mn(...Hr);je=new mn(-Kn+Gr[0],Gr[1]),je._rotateAround(ii,yr)._add(oi),je.x+=-Jn+Kn,je.y-=(wr.left-qn)*pn.scale;const $r=pn.image?wr.advance*pn.scale:aa*pn.scale,Ni=String.fromCodePoint(pn.glyph);use(Ni)?je.x+=(1-qn)*pn.scale:dse(Ni)?je.x+=$r-wr.height*pn.scale+(-qn-1)*pn.scale:je.x+=pn.image||wr.width+2*qn===zr.w&&wr.height+2*qn===zr.h?($r-so)/2:($r-(wr.height+2*qn)*pn.scale)/2,qe=new mn(je.x,je.y-Zi),Vt=new mn(je.x+so,je.y),_n=new mn(je.x+so,je.y-Zi)}else{const Jn=(wr.left-qn)*pn.scale-Kn+Gr[0],yr=(-wr.top-qn)*pn.scale+Gr[1],ii=Jn+Zi,oi=yr+so;je=new mn(Jn,yr),qe=new mn(ii,yr),Vt=new mn(Jn,oi),_n=new mn(ii,oi)}if(Xt){let Jn;Jn=it?new mn(0,0):Vr?new mn(Qt[0],Qt[1]):new mn(Ve[0],Ve[1]),je._rotateAround(Xt,Jn),qe._rotateAround(Xt,Jn),Vt._rotateAround(Xt,Jn),_n._rotateAround(Xt,Jn)}const An=new mn(0,0),Cn=new mn(0,0);nn.push({tl:je,tr:qe,bl:Vt,br:_n,texPrimary:er,texSecondary:void 0,writingMode:Oe.writingMode,glyphOffset:jr,sectionIndex:pn.sectionIndex,isSDF:Tn,pixelOffsetTL:An,pixelOffsetBR:Cn,minFontScaleX:0,minFontScaleY:0})}}return nn}(0,f,P,b,w,R,g,u.allowVerticalPlacement),Ie=u.textSizeData;let he=null;Ie.kind==="source"?(he=[Hp*b.layout.get("text-size").evaluate(R,{},ye)*re.textScaleFactor],he[0]>Gy&&Ir(`${u.layerIds[0]}: Value for "text-size" is >= ${kw}. Reduce your "text-size".`)):Ie.kind==="composite"&&(he=[Hp*re.compositeTextSizes[0].evaluate(R,{},ye)*re.textScaleFactor,Hp*re.compositeTextSizes[1].evaluate(R,{},ye)*re.textScaleFactor],(he[0]>Gy||he[1]>Gy)&&Ir(`${u.layerIds[0]}: Value for "text-size" is >= ${kw}. Reduce your "text-size".`)),u.addSymbols(u.text,Le,he,P,w,R,$,o,l,L.lineStartIndex,L.lineLength,ne,de,ye,be,!1);for(const Ee of q)Y[Ee]=u.text.placedSymbolArray.length-1;return 4*Le.length}function fI(u){for(const o in u)return u[o];return null}function OC(u,o,l,f,g,b,w,R,P,L){let $=w.top,q=w.bottom,Y=w.left,ne=w.right;if(hV(w)&&w.collisionPadding){const re=w.collisionPadding;Y-=re[0],$-=re[1],ne+=re[2],q+=re[3]}if(P){const re=new mn(Y,$),de=new mn(ne,$),ye=new mn(Y,q),be=new mn(ne,q),Le=ie(P);let Ie=new mn(0,0);L&&(Ie=new mn(L[0],L[1])),re._rotateAround(Le,Ie),de._rotateAround(Le,Ie),ye._rotateAround(Le,Ie),be._rotateAround(Le,Ie),Y=Math.min(re.x,de.x,ye.x,be.x),ne=Math.max(re.x,de.x,ye.x,be.x),$=Math.min(re.y,de.y,ye.y,be.y),q=Math.max(re.y,de.y,ye.y,be.y)}return u.emplaceBack(o.x,o.y,o.z,l.x,l.y,Y,$,ne,q,R,f,g,b),u.length-1}function pI(u){hV(u)&&u.collisionPadding&&(u.top-=u.collisionPadding[1],u.bottom+=u.collisionPadding[3]);const o=u.bottom-u.top;return o>0?Math.max(10,o):null}function Dse(u,o,l,f){const g=u.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(f.dist(b[w])<l)return!0}else g[o]=[];return g[o].push(f),!1}function zV(u,o){const l=u.fovAboveCenter,f=u.elevation?u.elevation.getMinElevationBelowMSL()*o:0,g=(u._camera.position[2]*u.worldSize-f)/Math.cos(u._pitch),b=Math.sin(l)*g/Math.sin(Math.max(Math.PI/2-u._pitch-l,.01));let w=Math.sin(u._pitch)*b+g;const R=g*(1/u._horizonShift);if(!u.elevation||u.elevation.exaggeration()===0){let P=Math.max(u.zoom-17,0);u.isOrthographic&&(P/=10),w*=1+P}return Math.min(1.01*w,R)}function Ow(u,o){if(!o.isReprojectedInTileSpace)return{scale:1<<u.z,x:u.x,y:u.y,x2:u.x+1,y2:u.y+1,projection:o};const l=Math.pow(2,-u.z),f=u.x*l,g=(u.x+1)*l,b=u.y*l,w=(u.y+1)*l,R=Je(f),P=Je(g),L=nt(b),$=nt(w),q=o.project(R,L),Y=o.project(P,L),ne=o.project(P,$),re=o.project(R,$);let de=Math.min(q.x,Y.x,ne.x,re.x),ye=Math.min(q.y,Y.y,ne.y,re.y),be=Math.max(q.x,Y.x,ne.x,re.x),Le=Math.max(q.y,Y.y,ne.y,re.y);const Ie=l/16;function he(Oe,Ve,tt,it,at,ht){const zt=(tt+at)/2,nn=(it+ht)/2,Xt=o.project(Je(zt),nt(nn)),Qt=Math.max(0,de-Xt.x,ye-Xt.y,Xt.x-be,Xt.y-Le);de=Math.min(de,Xt.x),be=Math.max(be,Xt.x),ye=Math.min(ye,Xt.y),Le=Math.max(Le,Xt.y),Qt>Ie&&(he(Oe,Xt,tt,it,zt,nn),he(Xt,Ve,zt,nn,at,ht))}he(q,Y,f,b,g,b),he(Y,ne,g,b,g,w),he(ne,re,g,w,f,w),he(re,q,f,w,f,b),de-=Ie,ye-=Ie,be+=Ie,Le+=Ie;const Ee=1/Math.max(be-de,Le-ye);return{scale:Ee,x:de*Ee,y:ye*Ee,x2:be*Ee,y2:Le*Ee,projection:o}}function FV(u,{x:o,y:l},f=0){return new mn(((o-f)*u.scale-u.x)*xn,(l*u.scale-u.y)*xn)}const Pse=B(new Float32Array(16));class Yy{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,l){return{x:0,y:0,z:0}}unproject(o,l){return new me(0,0)}projectTilePoint(o,l,f){return{x:o,y:l,z:0}}locationPoint(o,l,f,g=!0){return o._coordinatePoint(o.locationCoordinate(l,f),g)}pixelsPerMeter(o,l){return Ne(1,o)*l}pixelSpaceConversion(o,l,f){return 1}farthestPixelDistance(o){return zV(o,o.pixelsPerMeter)}pointCoordinate(o,l,f,g){const b=o.horizonLineFromTop(!1),w=new mn(l,Math.max(b,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,l,f){const g=new mn(l,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,l){if(o.elevation&&o.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(o,l.x,l.y);const f=o.horizonLineFromTop();return l.y<f}createInversionMatrix(o,l){return Pse}createTileMatrix(o,l,f){let g,b,w;const R=f.canonical,P=B(new Float64Array(16));if(this.isReprojectedInTileSpace){const L=Ow(R,this);g=1,b=L.x+f.wrap*L.scale,w=L.y,G(P,P,[g/L.scale,g/L.scale,o.pixelsPerMeter/l])}else g=l/o.zoomScale(R.z),b=(R.x+Math.pow(2,R.z)*f.wrap)*g,w=R.y*g;return H(P,P,[b,w,0]),G(P,P,[g/xn,g/xn,1]),P}upVector(o,l,f){return[0,0,1]}upVectorScale(o,l,f){return{metersToTile:1}}}class Ise extends Yy{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[l,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(ie(l));this.n=(g+Math.sin(ie(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,l){const{n:f,c:g,r0:b}=this,w=ie(o-this.center[0]),R=ie(l),P=Math.sqrt(g-2*f*Math.sin(R))/f;return{x:P*Math.sin(w*f),y:P*Math.cos(w*f)-b,z:0}}unproject(o,l){const{n:f,c:g,r0:b}=this,w=b+l;let R=Math.atan2(o,Math.abs(w))*Math.sign(w);w*f<0&&(R-=Math.PI*Math.sign(o)*Math.sign(w));const P=ie(this.center[0])*f;R=ct(R,-Math.PI-P,Math.PI-P);const L=Ze(le(R/f)+this.center[0],-180,180),$=Math.asin(Ze((g-(o*o+w*w)*f*f)/(2*f),-1,1)),q=Ze(le($),-85.051129,mt);return new me(L,q)}}const Lw=1.340264,zw=-.081106,Fw=893e-6,Bw=.003796,LC=Math.sqrt(3)/2;class kse extends Yy{project(o,l){l=l/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(LC*Math.sin(l)),g=f*f,b=g*g*g;return{x:.5*(o*Math.cos(f)/(LC*(Lw+3*zw*g+b*(7*Fw+9*Bw*g)))/Math.PI+.5),y:1-.5*(f*(Lw+zw*g+b*(Fw+Bw*g))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let f=l=(2*(1-l)-1)*Math.PI,g=f*f,b=g*g*g;for(let $,q,Y,ne=0;ne<12&&(q=f*(Lw+zw*g+b*(Fw+Bw*g))-l,Y=Lw+3*zw*g+b*(7*Fw+9*Bw*g),$=q/Y,f=Ze(f-$,-Math.PI/3,Math.PI/3),g=f*f,b=g*g*g,!(Math.abs($)<1e-12));++ne);const w=LC*o*(Lw+3*zw*g+b*(7*Fw+9*Bw*g))/Math.cos(f),R=Math.asin(Math.sin(f)/LC),P=Ze(180*w/Math.PI,-180,180),L=Ze(180*R/Math.PI,-85.051129,mt);return new me(P,L)}}class Ose extends Yy{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){return{x:.5+o/360,y:.5-l/360,z:0}}unproject(o,l){const f=360*(o-.5),g=Ze(360*(.5-l),-85.051129,mt);return new me(f,g)}}const ib=Math.PI/2;function zC(u){return Math.tan((ib+u)/2)}class Lse extends Yy{constructor(o){super(o),this.center=o.center||[0,30];const[l,f]=this.parallels=o.parallels||[30,30];let g=ie(l),b=ie(f);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),R=zC(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(zC(b)/R),this.f=w*Math.pow(zC(g),this.n)/this.n}project(o,l){l=ie(l),this.southernCenter&&(l=-l),o=ie(o-this.center[0]);const f=1e-6,{n:g,f:b}=this;b>0?l<-ib+f&&(l=-ib+f):l>ib-f&&(l=ib-f);const w=b/Math.pow(zC(l),g);let R=w*Math.sin(g*o),P=b-w*Math.cos(g*o);return R=.5*(R/Math.PI+.5),P=.5*(P/Math.PI+.5),{x:R,y:this.southernCenter?P:1-P,z:0}}unproject(o,l){o=(2*o-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:f,f:g}=this,b=g-l,w=Math.sign(b),R=Math.sign(f)*Math.sqrt(o*o+b*b);let P=Math.atan2(o,Math.abs(b))*w;b*f<0&&(P-=Math.PI*Math.sign(o)*w);const L=Ze(le(P/f)+this.center[0],-180,180),$=Ze(le(2*Math.atan(Math.pow(g/R,1/f))-ib),-85.051129,mt);return new me(L,this.southernCenter?-$:$)}}class BV extends Yy{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,l){return{x:Ye(o),y:Ge(l),z:0}}unproject(o,l){const f=Je(o),g=nt(l);return new me(f,g)}}const jV=ie(mt);class zse extends Yy{project(o,l){const f=(l=ie(l))*l,g=f*f;return{x:.5*((o=ie(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,l){o=(2*o-.5)*Math.PI;let f=l=(2*(1-l)-1)*Math.PI,g=25,b=0,w=f*f;do{w=f*f;const L=w*w;b=(f*(1.007226+w*(.015085+L*(.028874*w-.044475-.005916*L)))-l)/(1.007226+w*(.045255+L*(.259866*w-.311325-.005916*11*L))),f=Ze(f-b,-jV,jV)}while(Math.abs(b)>1e-6&&--g>0);w=f*f;const R=Ze(le(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),P=le(f);return new me(R,P)}}const NV=ie(mt);class Fse extends Yy{project(o,l){l=ie(l),o=ie(o);const f=Math.cos(l),g=2/Math.PI,b=Math.acos(f*Math.cos(o/2)),w=Math.sin(b)/b,R=.5*(o*g+2*f*Math.sin(o/2)/w)||0,P=.5*(l+Math.sin(l)/w)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(P/Math.PI+1),z:0}}unproject(o,l){let f=o=(2*o-.5)*Math.PI,g=l=(2*(1-l)-1)*Math.PI,b=25;const w=1e-6;let R=0,P=0;do{const L=Math.cos(g),$=Math.sin(g),q=2*$*L,Y=$*$,ne=L*L,re=Math.cos(f/2),de=Math.sin(f/2),ye=2*re*de,be=de*de,Le=1-ne*re*re,Ie=Le?1/Le:0,he=Le?Math.acos(L*re)*Math.sqrt(1/Le):0,Ee=.5*(2*he*L*de+2*f/Math.PI)-o,Oe=.5*(he*$+g)-l,Ve=.5*Ie*(ne*be+he*L*re*Y)+1/Math.PI,tt=Ie*(ye*q/4-he*$*de),it=.125*Ie*(q*de-he*$*ne*ye),at=.5*Ie*(Y*re+he*be*L)+.5,ht=tt*it-at*Ve;R=(Oe*tt-Ee*at)/ht,P=(Ee*it-Oe*Ve)/ht,f=Ze(f-R,-Math.PI,Math.PI),g=Ze(g-P,-NV,NV)}while((Math.abs(R)>w||Math.abs(P)>w)&&--b>0);return new me(le(f),le(g))}}class VV extends Yy{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ie(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,l){const{scale:f,cosPhi:g}=this;return{x:ie(o)*g*f+.5,y:-Math.sin(ie(l))/g*f+.5,z:0}}unproject(o,l){const{scale:f,cosPhi:g}=this,b=-(l-.5)/f,w=Ze(le((o-.5)/f)/g,-180,180),R=Math.asin(Ze(b*g,-1,1)),P=Ze(le(R),-85.051129,mt);return new me(w,P)}}class Bse extends BV{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,l,f){const g=Oy(o,l,f);return Dt(g,g,wg(nd(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,l,f){const g=ge(l.lat,l.lng),b=wt([],g),w=f?o._centerAltitude+f:o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(l),o._centerAltitude):o._centerAltitude;He(g,g,b,Ne(1,0)*xn*w);const R=B(new Float64Array(16));return V(R,o.pixelMatrix,o.globeMatrix),Dt(g,g,R),new mn(g[0],g[1])}pixelsPerMeter(o,l){return Ne(1,0)*l}pixelSpaceConversion(o,l,f){const g=Ne(1,o)*l,b=lr(Ne(1,45)*l,g,f);return this.pixelsPerMeter(o,l)/b}createTileMatrix(o,l,f){const g=Cx(nd(f.canonical));return V(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,l){const{center:f}=o,g=wg(nd(l));return Q(g,g,ie(f.lng)),X(g,g,ie(f.lat)),G(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,l,f,g){return xg(o,l,f,!0)||new Tt(0,0)}pointCoordinate3D(o,l,f){const g=this.pointCoordinate(o,l,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,l){return!xg(o,l.x,l.y,!1)}farthestPixelDistance(o){const l=function(g,b){const w=g.cameraToCenterDistance,R=g._centerAltitude*b,P=g._camera,L=g._camera.forward(),$=Ae([],Ce([],L,-w),[0,0,R]),q=g.worldSize/(2*Math.PI),Y=[0,0,-q],ne=g.width/g.height,re=Math.tan(g.fovAboveCenter),de=Ce([],P.up(),re),ye=Ce([],P.right(),re*ne),be=wt([],Ae([],Ae([],L,de),ye)),Le=[];let Ie;if(new jl($,be).closestPointOnSphere(Y,q,Le)){const he=Ae([],Le,Y),Ee=Ct([],he,$);Ie=Math.cos(g.fovAboveCenter)*Me(Ee)}else{const he=Ct([],$,Y),Ee=Ct([],Y,$);wt(Ee,Ee);const Oe=Me(he)-q;Ie=Math.sqrt(Oe*(Oe+2*q));const Ve=Math.acos(Ie/(q+Oe))-Math.acos(ot(L,Ee));Ie*=Math.cos(Ve)}return 1.01*Ie}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=Af(o.zoom);if(f>0){const g=zV(o,Ne(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return lr(l,g+b*(1-Math.cos(w)),Math.pow(f,10))}return l}upVector(o,l,f){return Oy(l,f,o,1)}upVectorScale(o){return{metersToTile:td(A_(nd(o)))}}}function $V(u){const o=u.parallels,l=!!o&&Math.abs(o[0]+o[1])<.01;switch(u.name){case"mercator":return new BV(u);case"equirectangular":return new Ose(u);case"naturalEarth":return new zse(u);case"equalEarth":return new kse(u);case"winkelTripel":return new Fse(u);case"albers":return l?new VV(u):new Ise(u);case"lambertConformalConic":return l?new VV(u):new Lse(u);case"globe":return new Bse(u)}throw new Error(`Invalid projection name: ${u.name}`)}const jse=oh.VectorTileFeature.types,Nse=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function FC(u,o,l,f,g,b,w,R,P,L,$,q,Y){const ne=R?Math.min(Gy,Math.round(R[0])):0,re=R?Math.min(Gy,Math.round(R[1])):0;u.emplaceBack(o,l,Math.round(32*f),Math.round(32*g),b,w,(ne<<1)+(P?1:0),re,16*L,16*$,256*q,256*Y)}function BC(u,o,l){u.emplaceBack(o,l)}function jC(u,o,l,f,g,b,w){u.emplaceBack(o,l,f,g,b,w)}function NC(u,o,l,f,g){u.emplaceBack(o,l,f,g),u.emplaceBack(o,l,f,g),u.emplaceBack(o,l,f,g),u.emplaceBack(o,l,f,g)}function Vse(u){for(const o of u.sections)if(Yu(o.text))return!0;return!1}class mI{constructor(o){this.layoutVertexArray=new Ku,this.indexArray=new Fo,this.programConfigurations=o,this.segments=new _o,this.dynamicLayoutVertexArray=new Uc,this.opacityVertexArray=new Kd,this.placedSymbolArray=new g_,this.iconTransitioningVertexArray=new Qu,this.globeExtVertexArray=new La,this.zOffsetVertexArray=new bf}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(o,l,f,g,b){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,tse.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,rse.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,Nse,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,ose.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,nse.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||b)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,ise.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}zn(mI,"SymbolBuffers");class gI{constructor(o,l,f){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new f,this.segments=new _o,this.collisionVertexArray=new Py,this.collisionVertexArrayExt=new Uc}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,sse.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,ase.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}zn(gI,"CollisionBuffers");class VC{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.lut=o.lut,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=B([]),this.placementViewportMatrix=B([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yV(this.zoom,l["text-size"]),this.iconSizeData=yV(this.zoom,l["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(w=>Gc[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new mI(new rh(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("text")||o.startsWith("symbol"))),this.icon=new mI(new rh(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("icon")||o.startsWith("symbol"))),this.glyphOffsetArray=new Fs,this.lineVertexArray=new ia,this.symbolInstances=new y_}calculateGlyphDependencies(o,l,f,g,b){for(const w of o){const R=w.codePointAt(0);if(R===void 0)break;if(l[R]=!0,g&&b&&R<=65535){const P=Rw[w];P&&(l[P.charCodeAt(0)]=!0)}}}updateFootprints(o,l){}updateReplacement(o,l){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const f=l.getReplacementRegionsForTile(o.toUnwrapped(),!0);return!$y(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(o,l,f,g){const b=this.layers[0],w=b.layout,R=this.projection.name==="globe",P=w.get("text-font"),L=w.get("text-field"),$=w.get("icon-image"),[q,Y]=w.get("icon-size-scale-range"),ne=Ze(l.scaleFactor||1,q,Y),re=(L.value.kind!=="constant"||L.value.value instanceof ga&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),de=$.value.kind!=="constant"||!!$.value.value||Object.keys($.parameters).length>0,ye=w.get("symbol-sort-key");if(this.features=[],!re&&!de)return;const be=l.iconDependencies,Le=l.glyphDependencies,Ie=l.availableImages,he=new Li(this.zoom);for(const{feature:Ee,id:Oe,index:Ve,sourceLayerIndex:tt}of o){const it=b._featureFilter.needGeometry,at=Gn(Ee,it);if(!b._featureFilter.filter(he,at,f))continue;if(it||(at.geometry=Vn(Ee,f,g)),R&&Ee.type!==1&&f.z<=5){const Qt=at.geometry,ln=.98078528056,It=(Kt,At)=>ot(Oy(Kt.x,Kt.y,f,1),Oy(At.x,At.y,f,1))<ln;for(let Kt=0;Kt<Qt.length;Kt++)Qt[Kt]=Jt(Qt[Kt],It)}let ht,zt;if(re){const Qt=b.getValueAndResolveTokens("text-field",at,f,Ie),ln=ga.factory(Qt);Vse(ln)&&(this.hasRTLText=!0),(!this.hasRTLText||Wd()==="unavailable"||this.hasRTLText&&rc.isParsed())&&(ht=cse(ln,b,at))}if(de){const Qt=b.getValueAndResolveTokens("icon-image",at,f,Ie);zt=typeof Qt=="string"?Ia.build(Qt):Qt}if(!ht&&!zt)continue;const nn=this.sortFeaturesByKey?ye.evaluate(at,{},f):void 0,Xt={id:Oe,text:ht,icon:zt,index:Ve,sourceLayerIndex:tt,geometry:at.geometry,properties:Ee.properties,type:jse[Ee.type],sortKey:nn};if(this.features.push(Xt),zt){const Qt=this.layers[0]._unevaluatedLayout._values,{iconPrimary:ln,iconSecondary:It}=IV(zt,this.iconSizeData,Qt["icon-size"],f,this.zoom,Xt,this.pixelRatio,ne),Kt=ln.id.toString();if(be.has(Kt)?be.get(Kt).push(ln):be.set(Kt,[ln]),It){const At=It.id.toString();be.has(At)?be.get(At).push(It):be.set(At,[It])}}if(ht){const Qt=P.evaluate(at,{},f).join(","),ln=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Gc.vertical)>=0;for(const It of ht.sections)if(It.image){const Kt=It.image.getPrimary().scaleSelf(this.pixelRatio),At=Kt.id.toString(),kt=be.get(At)||[];kt.push(Kt),be.set(At,kt)}else{const Kt=tg(ht.toString()),At=It.fontStack||Qt,kt=Le[At]=Le[At]||{};this.calculateGlyphDependencies(It.text,kt,ln,this.allowVerticalPlacement,Kt)}}}if(w.get("symbol-placement")==="line"&&(this.features=function(Ee){const Oe={},Ve={},tt=[];let it=0;function at(Xt){tt.push(Ee[Xt]),it++}function ht(Xt,Qt,ln){const It=Ve[Xt];return delete Ve[Xt],Ve[Qt]=It,tt[It].geometry[0].pop(),tt[It].geometry[0]=tt[It].geometry[0].concat(ln[0]),It}function zt(Xt,Qt,ln){const It=Oe[Qt];return delete Oe[Qt],Oe[Xt]=It,tt[It].geometry[0].shift(),tt[It].geometry[0]=ln[0].concat(tt[It].geometry[0]),It}function nn(Xt,Qt,ln){const It=ln?Qt[0][Qt[0].length-1]:Qt[0][0];return`${Xt}:${It.x}:${It.y}`}for(let Xt=0;Xt<Ee.length;Xt++){const Qt=Ee[Xt],ln=Qt.geometry,It=Qt.text?Qt.text.toString():null;if(!It){at(Xt);continue}const Kt=nn(It,ln),At=nn(It,ln,!0);if(Kt in Ve&&At in Oe&&Ve[Kt]!==Oe[At]){const kt=zt(Kt,At,ln),un=ht(Kt,At,tt[kt].geometry);delete Oe[Kt],delete Ve[At],Ve[nn(It,tt[un].geometry,!0)]=un,tt[kt].geometry=null}else Kt in Ve?ht(Kt,At,ln):At in Oe?zt(Kt,At,ln):(at(Xt),Oe[Kt]=it-1,Ve[At]=it-1)}return tt.filter(Xt=>Xt.geometry)}(this.features)),w.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",l.elevationFeatures){!this.elevationFeatures&&l.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const Ee of l.elevationFeatures)this.elevationFeatureIdToIndex.set(Ee.id,this.elevationFeatures.length),this.elevationFeatures.push(Ee)}}else w.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((Ee,Oe)=>Ee.sortKey-Oe.sortKey)}update(o,l,f,g,b,w,R){this.text.programConfigurations.updatePaintArrays(o,l,b,f,g,w,R),this.icon.programConfigurations.updatePaintArrays(o,l,b,f,g,w,R)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let o=!1;for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);if(f.elevationFeatureIndex===65535)continue;const g=this.elevationFeatures[f.elevationFeatureIndex];if(g){const b=.05+g.pointElevation(new mn(f.tileAnchorX,f.tileAnchorY));f.zOffset!==b&&(o=!0,f.zOffset=b)}}o&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const o=(b,w,R)=>{f+=w,f>b.length&&b.resize(f);for(let P=-w;P<0;P++)b.emplace(P+f,R)},l=(b,w,R)=>{g+=w,g>b.length&&b.resize(g);for(let P=-w;P<0;P++)b.emplace(P+g,R)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,g=0;for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b),{numHorizontalGlyphVertices:R,numVerticalGlyphVertices:P,numIconVertices:L}=w,$=w.zOffset,q=L>0;if((R>0||P>0)&&(o(this.text.zOffsetVertexArray,R,$),o(this.text.zOffsetVertexArray,P,$)),q){const{placedIconSymbolIndex:Y,verticalPlacedIconSymbolIndex:ne}=w;Y>=0&&l(this.icon.zOffsetVertexArray,L,$),ne>=0&&l(this.icon.zOffsetVertexArray,w.numVerticalIconVertices,$)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=$V(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of l)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de,ye){const be=o.indexArray,Le=o.layoutVertexArray,Ie=o.globeExtVertexArray,he=o.segments.prepareSegment(4*l.length,Le,be,this.canOverlap?w.sortKey:void 0),Ee=this.glyphOffsetArray.length,Oe=he.vertexLength,Ve=this.allowVerticalPlacement&&R===Gc.vertical?Math.PI/2:0,tt=w.text&&w.text.sections;for(let at=0;at<l.length;at++){const{tl:ht,tr:zt,bl:nn,br:Xt,texPrimary:Qt,texSecondary:ln,pixelOffsetTL:It,pixelOffsetBR:Kt,minFontScaleX:At,minFontScaleY:kt,glyphOffset:un,isSDF:pn,sectionIndex:er}=l[at],qn=he.vertexLength,Tn=un[1];if(FC(Le,L.x,L.y,ht.x,Tn+ht.y,Qt.x,Qt.y,f,pn,It.x,It.y,At,kt),FC(Le,L.x,L.y,zt.x,Tn+zt.y,Qt.x+Qt.w,Qt.y,f,pn,Kt.x,It.y,At,kt),FC(Le,L.x,L.y,nn.x,Tn+nn.y,Qt.x,Qt.y+Qt.h,f,pn,It.x,Kt.y,At,kt),FC(Le,L.x,L.y,Xt.x,Tn+Xt.y,Qt.x+Qt.w,Qt.y+Qt.h,f,pn,Kt.x,Kt.y,At,kt),P){const{x:cn,y:Rr,z:Zn}=P.anchor,[Kn,wr,zr]=P.up;jC(Ie,cn,Rr,Zn,Kn,wr,zr),jC(Ie,cn,Rr,Zn,Kn,wr,zr),jC(Ie,cn,Rr,Zn,Kn,wr,zr),jC(Ie,cn,Rr,Zn,Kn,wr,zr),NC(o.dynamicLayoutVertexArray,cn,Rr,Zn,Ve)}else NC(o.dynamicLayoutVertexArray,L.x,L.y,L.z,Ve);if(ye){const cn=ln||Qt;BC(o.iconTransitioningVertexArray,cn.x,cn.y),BC(o.iconTransitioningVertexArray,cn.x+cn.w,cn.y),BC(o.iconTransitioningVertexArray,cn.x,cn.y+cn.h),BC(o.iconTransitioningVertexArray,cn.x+cn.w,cn.y+cn.h)}be.emplaceBack(qn,qn+1,qn+2),be.emplaceBack(qn+1,qn+2,qn+3),he.vertexLength+=4,he.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(un[0]),at!==l.length-1&&er===l[at+1].sectionIndex||o.programConfigurations.populatePaintArrays(Le.length,w,w.index,{},ne,re,de,tt&&tt[er])}const it=P?P.anchor:L;o.placedSymbolArray.emplaceBack(it.x,it.y,it.z,L.x,L.y,Ee,this.glyphOffsetArray.length-Ee,Oe,$,q,L.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],R,0,0,0,Y,0)}_commitLayoutVertex(o,l,f,g,b,w,R){o.emplaceBack(l,f,g,b,w,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(o,l,f,g,b,w,R){const P=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),L=P.vertexLength,$=R.tileAnchorX,q=R.tileAnchorY;for(let ne=0;ne<4;ne++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,l,o.padding,R.zOffset),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,$,q,new mn(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,$,q,new mn(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,$,q,new mn(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,$,q,new mn(o.x1,o.y2)),P.vertexLength+=4;const Y=f.indexArray;Y.emplaceBack(L,L+1),Y.emplaceBack(L+1,L+2),Y.emplaceBack(L+2,L+3),Y.emplaceBack(L+3,L),P.primitiveLength+=4}_addTextDebugCollisionBoxes(o,l,f,g,b,w){for(let R=g;R<b;R++){const P=f.get(R),L=this.getSymbolInstanceTextSize(o,w,l,R);this._addCollisionDebugVertices(P,L,this.textCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,l,f,g,b,w){for(let R=g;R<b;R++){const P=f.get(R),L=this.getSymbolInstanceIconSize(o,l,w.placedIconSymbolIndex);this._addCollisionDebugVertices(P,L,this.iconCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,l,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gI(zl,rV.members,Qu),this.iconCollisionBox=new gI(zl,rV.members,Qu);const g=Pw(this.iconSizeData,o),b=Pw(this.textSizeData,o,f);for(let w=0;w<this.symbolInstances.length;w++){const R=this.symbolInstances.get(w);this._addTextDebugCollisionBoxes(b,o,l,R.textBoxStartIndex,R.textBoxEndIndex,R),this._addTextDebugCollisionBoxes(b,o,l,R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R),this._addIconDebugCollisionBoxes(g,o,l,R.iconBoxStartIndex,R.iconBoxEndIndex,R),this._addIconDebugCollisionBoxes(g,o,l,R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R)}}getSymbolInstanceTextSize(o,l,f,g){const b=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:g),w=lI(this.textSizeData,o,b)/aa;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,l,f){const g=this.icon.placedSymbolArray.get(f),b=lI(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,l,f,g){o.emplaceBack(l,-f,-f,g),o.emplaceBack(l,f,-f,g),o.emplaceBack(l,f,f,g),o.emplaceBack(l,-f,f,g)}_updateTextDebugCollisionBoxes(o,l,f,g,b,w,R){for(let P=g;P<b;P++){const L=f.get(P),$=this.getSymbolInstanceTextSize(o,w,l,P);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,$,L.padding,w.zOffset)}}_updateIconDebugCollisionBoxes(o,l,f,g,b,w,R){for(let P=g;P<b;P++){const L=f.get(P),$=this.getSymbolInstanceIconSize(o,l,w.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,$,L.padding,w.zOffset)}}updateCollisionDebugBuffers(o,l,f,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const b=Pw(this.iconSizeData,o,g),w=Pw(this.textSizeData,o,f);for(let R=0;R<this.symbolInstances.length;R++){const P=this.symbolInstances.get(R);this._updateTextDebugCollisionBoxes(w,o,l,P.textBoxStartIndex,P.textBoxEndIndex,P,f),this._updateTextDebugCollisionBoxes(w,o,l,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P,f),this._updateIconDebugCollisionBoxes(b,o,l,P.iconBoxStartIndex,P.iconBoxEndIndex,P,g),this._updateIconDebugCollisionBoxes(b,o,l,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex,P,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,l,f,g,b,w,R,P,L){const $={};if(l<f){const{x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he,featureIndex:Ee}=o.get(l);$.textBox={x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he},$.textFeatureIndex=Ee}if(g<b){const{x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he,featureIndex:Ee}=o.get(g);$.verticalTextBox={x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he},$.verticalTextFeatureIndex=Ee}if(w<R){const{x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he,featureIndex:Ee}=o.get(w);$.iconBox={x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he},$.iconFeatureIndex=Ee}if(P<L){const{x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he,featureIndex:Ee}=o.get(P);$.verticalIconBox={x1:q,y1:Y,x2:ne,y2:re,padding:de,projectedAnchorX:ye,projectedAnchorY:be,projectedAnchorZ:Le,tileAnchorX:Ie,tileAnchorY:he},$.verticalIconFeatureIndex=Ee}return $}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,l){const f=o.placedSymbolArray.get(l),g=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(o),f=Math.cos(o),g=[],b=[],w=[];for(let R=0;R<this.symbolInstances.length;++R){w.push(R);const P=this.symbolInstances.get(R);g.push(0|Math.round(l*P.tileAnchorX+f*P.tileAnchorY)),b.push(P.featureIndex)}return w.sort((R,P)=>g[R]-g[P]||b[P]-b[R]),w}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,l)=>this.symbolInstances.get(l).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:R,placedIconSymbolIndex:P,verticalPlacedIconSymbolIndex:L}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),R>=0&&this.addIndicesForPlacedSymbol(this.text,R),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P),L>=0&&this.addIndicesForPlacedSymbol(this.icon,L)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let UV,qV,yI;zn(VC,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),VC.addDynamicAttributes=NC;class HV{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Pd,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zn(HV,"FormatSectionOverride",{omit:["defaultValue"]});const vI=()=>yI||(yI={layout:UV||(UV=new To({"symbol-placement":new yn(_t.layout_symbol["symbol-placement"]),"symbol-spacing":new yn(_t.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yn(_t.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ln(_t.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yn(_t.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new yn(_t.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new yn(_t.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new yn(_t.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yn(_t.layout_symbol["icon-ignore-placement"]),"icon-optional":new yn(_t.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yn(_t.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ln(_t.layout_symbol["icon-size"]),"icon-size-scale-range":new yn(_t.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ln(_t.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ln(_t.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ln(_t.layout_symbol["icon-image"]),"icon-rotate":new Ln(_t.layout_symbol["icon-rotate"]),"icon-padding":new yn(_t.layout_symbol["icon-padding"]),"icon-keep-upright":new yn(_t.layout_symbol["icon-keep-upright"]),"icon-offset":new Ln(_t.layout_symbol["icon-offset"]),"icon-anchor":new Ln(_t.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yn(_t.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yn(_t.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yn(_t.layout_symbol["text-rotation-alignment"]),"text-field":new Ln(_t.layout_symbol["text-field"]),"text-font":new Ln(_t.layout_symbol["text-font"]),"text-size":new Ln(_t.layout_symbol["text-size"]),"text-size-scale-range":new yn(_t.layout_symbol["text-size-scale-range"]),"text-max-width":new Ln(_t.layout_symbol["text-max-width"]),"text-line-height":new Ln(_t.layout_symbol["text-line-height"]),"text-letter-spacing":new Ln(_t.layout_symbol["text-letter-spacing"]),"text-justify":new Ln(_t.layout_symbol["text-justify"]),"text-radial-offset":new Ln(_t.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yn(_t.layout_symbol["text-variable-anchor"]),"text-anchor":new Ln(_t.layout_symbol["text-anchor"]),"text-max-angle":new yn(_t.layout_symbol["text-max-angle"]),"text-writing-mode":new yn(_t.layout_symbol["text-writing-mode"]),"text-rotate":new Ln(_t.layout_symbol["text-rotate"]),"text-padding":new yn(_t.layout_symbol["text-padding"]),"text-keep-upright":new yn(_t.layout_symbol["text-keep-upright"]),"text-transform":new Ln(_t.layout_symbol["text-transform"]),"text-offset":new Ln(_t.layout_symbol["text-offset"]),"text-allow-overlap":new yn(_t.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yn(_t.layout_symbol["text-ignore-placement"]),"text-optional":new yn(_t.layout_symbol["text-optional"]),visibility:new yn(_t.layout_symbol.visibility)})),paint:qV||(qV=new To({"icon-opacity":new Ln(_t.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ln(_t.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ln(_t.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ln(_t.paint_symbol["text-emissive-strength"]),"icon-color":new Ln(_t.paint_symbol["icon-color"]),"icon-halo-color":new Ln(_t.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ln(_t.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ln(_t.paint_symbol["icon-halo-blur"]),"icon-translate":new yn(_t.paint_symbol["icon-translate"]),"icon-translate-anchor":new yn(_t.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new yn(_t.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ln(_t.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ln(_t.paint_symbol["text-occlusion-opacity"]),"text-color":new Ln(_t.paint_symbol["text-color"],{runtimeType:Ha,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Ln(_t.paint_symbol["text-halo-color"]),"text-halo-width":new Ln(_t.paint_symbol["text-halo-width"]),"text-halo-blur":new Ln(_t.paint_symbol["text-halo-blur"]),"text-translate":new yn(_t.paint_symbol["text-translate"]),"text-translate-anchor":new yn(_t.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new yn(_t.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new yn(_t.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new yn(_t.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new yn(_t.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ln(_t.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},yI);class $C extends va{constructor(o,l,f,g){super(o,vI(),l,f,g),this._colorAdjustmentMatrix=B([]),this.hasInitialOcclusionOpacityProperties=o.paint!==void 0&&("icon-occlusion-opacity"in o.paint||"text-occlusion-opacity"in o.paint)}recalculate(o,l){super.recalculate(o,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const b of f)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(o,l,f,g){return this._saturation===o&&this._contrast===l&&this._brightnessMin===f&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(b,w,R,P){b=fs(b),w=$o(w);const L=k(),$=b/3,q=1-2*$,Y=[q,$,$,0,$,q,$,0,$,$,q,0,0,0,0,1],ne=.5-.5*w,re=P-R;return V(L,[re,0,0,0,0,re,0,0,0,0,re,0,R,R,R,1],[w,0,0,0,0,w,0,0,0,0,w,0,ne,ne,ne,1]),V(L,L,Y),L}(o,l,f,g),this._saturation=o,this._contrast=l,this._brightnessMin=f,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(o,l,f,g){const b=this.layout.get(o).evaluate(l,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Nc(w.value)||!b?b:function(R,P){return P.replace(/{([^{}]+)}/g,(L,$)=>$ in R?String(R[$]):"")}(l.properties,b)}createBucket(o){return new VC(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of vI().paint.overridableProperties){if(!$C.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),f=new HV(l),g=new eg(f,l.property.specification,this.scope,this.options);let b=null;b=l.value.kind==="constant"||l.value.kind==="source"?new vo("source",g):new is("composite",g,l.value.zoomStops,l.value.interpolationType),this.paint._values[o]=new gf(l.property,b,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&$C.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const f=o.get("text-field"),g=vI().paint.properties[l];let b=!1;const w=R=>{for(const P of R)if(g.overrides&&g.overrides.hasOverride(P))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ga)w(f.value.value.sections);else if(f.value.kind==="source"){const R=L=>{b||(L instanceof Nr&&Uo(L.value)===km?w(L.value.sections):L instanceof Dc?w(L.sections):L.eachChild(R))},P=f.value;P._styleExpression&&R(P._styleExpression.expression)}return b}getProgramIds(){return["symbol"]}getDefaultProgramParams(o,l,f){return{config:new ed(this,{zoom:l,lut:f}),overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("symbol-elevation-reference")==="hd-road-markup"}}let WV,GV,YV,XV;var _I=fi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function xI(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function bI(u){switch(u){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class wI{constructor(o,l,f,g){this.context=o,this.format=f,this.useMipmap=g&&g.useMipmap,this.texture=o.gl.createTexture(),this.update(l,{premultiply:g&&g.premultiply})}update(o,l){const f=o&&o instanceof HTMLVideoElement&&o.width===0?o.videoWidth:o.width,g=o&&o instanceof HTMLVideoElement&&o.height===0?o.videoHeight:o.height,{context:b}=this,{gl:w}=b,{x:R,y:P}=l&&l.position?l.position:{x:0,y:0},L=R+f,$=P+g;!this.size||this.size[0]===L&&this.size[1]===$||(w.bindTexture(w.TEXTURE_2D,null),w.deleteTexture(this.texture),this.texture=w.createTexture(),this.size=null),w.bindTexture(w.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA8&&(!l||l.premultiply!==!1));const q=o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap;if(!this.size&&L>0&&$>0){const Y=this.useMipmap?Math.floor(Math.log2(Math.max(L,$)))+1:1;w.texStorage2D(w.TEXTURE_2D,Y,this.format,L,$),this.size=[L,$]}if(this.size)if(q)w.texSubImage2D(w.TEXTURE_2D,0,R,P,xI(this.format),bI(this.format),o);else{const Y=o.data;Y&&w.texSubImage2D(w.TEXTURE_2D,0,R,P,f,g,xI(this.format),bI(this.format),Y)}this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(o,l,f=!1){const{context:g}=this,{gl:b}=g;b.bindTexture(b.TEXTURE_2D,this.texture),o!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap&&!f?o===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),l!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,l),this.wrapS=l)}bindExtraParam(o,l,f,g){const{context:b}=this,{gl:w}=b;w.bindTexture(w.TEXTURE_2D,this.texture),l!==this.magFilter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,l),this.magFilter=l),o!==this.minFilter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,this.useMipmap?o===w.NEAREST?w.NEAREST_MIPMAP_NEAREST:w.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),f!==this.wrapS&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,f),this.wrapS=f),g!==this.wrapT&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class UC{constructor(o,l){this.context=o,this.texture=l}bind(o,l){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,o),this.minFilter=o),l!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,l),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,l),this.wrapS=l)}}function qC(u,o,l,f,g,b,w,R){const P=[u,o,1,l,f,1,g,b,1],L=[w,R,1],$=A([],P),[q,Y,ne]=Et(L,L,$);return I(P,P,[q,0,0,0,Y,0,0,0,ne])}function ZV(u,o,l,f,g,b,w,R){const P=function(L,$,q,Y,ne,re,de,ye){const be=qC(0,0,1,0,1,1,0,1),Le=qC(L,$,q,Y,ne,re,de,ye);return I(Le,Le,A([],be))}(u,o,l,f,g,b,w,R);return[P[2]/P[8]/xn,P[5]/P[8]/xn]}function HC(u){return[u[0],Math.min(Math.max(u[1],-85.051129),mt)]}class KV extends Dd{constructor(o,l,f,g){super(),this.id=o,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=l,this._dirty=!1}load(o,l){if(this._loaded=l||!1,this.fire(new au("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=$h(this.map._requestManager.transformRequest(this.url,up.Image),(f,g)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new Dm(f)):g&&(this.image=g instanceof HTMLImageElement?Dl.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new UC(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new au("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(o){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof UC||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let l=o[0][1],f=o[0][1];for(const b of o)b[1]>f&&(f=b[1]),b[1]<l&&(l=b[1]);const g=(f+l)/2;if(g>mt?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const b=o.map(Tt.fromLngLat);this.tileID=function(w){let R=1/0,P=1/0,L=-1/0,$=-1/0;for(const de of w)R=Math.min(R,de.x),P=Math.min(P,de.y),L=Math.max(L,de.x),$=Math.max($,de.y);const q=Math.max(L-R,$-P),Y=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),ne=Math.pow(2,Y);let re=Math.floor((R+L)/2*ne);return re>1&&(re-=1),new qi(Y,re,Math.floor((P+$)/2*ne))}(b),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new au("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const be in this.tiles){const Le=this.tiles[be];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const l=Ow(new qi(0,0,0),this.map.transform.projection),f=[l.projection.project(this.coordinates[0][0],this.coordinates[0][1]),l.projection.project(this.coordinates[1][0],this.coordinates[1][1]),l.projection.project(this.coordinates[2][0],this.coordinates[2][1]),l.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(be){const Le=be[1].x-be[0].x,Ie=be[1].y-be[0].y,he=be[2].x-be[1].x,Ee=be[2].y-be[1].y,Oe=be[3].x-be[2].x,Ve=be[3].y-be[2].y,tt=be[0].x-be[3].x,it=be[0].y-be[3].y,at=Le*Ee-he*Ie,ht=he*Ve-Oe*Ee,zt=Oe*it-tt*Ve,nn=tt*Ie-Le*it;return at>0&&ht>0&&zt>0&&nn>0||at<0&&ht<0&&zt<0&&nn<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=Ow(this.tileID,this.map.transform.projection),[b,w,R,P]=this.coordinates.map(be=>{const Le=g.projection.project(be[0],be[1]);return FV(g,Le)._round()});this.perspectiveTransform=ZV(b.x,b.y,w.x,w.y,R.x,R.y,P.x,P.y);const L=this._boundsArray=new Zd;L.emplaceBack(b.x,b.y,0,0),L.emplaceBack(w.x,w.y,xn,0),L.emplaceBack(P.x,P.y,0,xn),L.emplaceBack(R.x,R.y,xn,xn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(L,_I.members),this.boundsSegments=_o.simpleSegment(0,0,4,2);const $=[],q=[HC((Y=this.coordinates)[0]),HC(Y[1]),HC(Y[2]),HC(Y[3])];var Y;const[ne,re,de,ye]=function(be){let Le=be[0][0],Ie=Le,he=be[0][1],Ee=he;for(let Oe=1;Oe<be.length;Oe++)be[Oe][0]<Le?Le=be[Oe][0]:be[Oe][0]>Ie&&(Ie=be[Oe][0]),be[Oe][1]<he?he=be[Oe][1]:be[Oe][1]>Ee&&(Ee=be[Oe][1]);return[Le,he,Ie-Le,Ee-he]}(q);{const be=new Zd,[Le,Ie,he,Ee]=function(It){let Kt=It[0].x,At=Kt,kt=It[0].y,un=kt;for(let pn=1;pn<It.length;pn++)It[pn].x<Kt?Kt=It[pn].x:It[pn].x>At&&(At=It[pn].x),It[pn].y<kt?kt=It[pn].y:It[pn].y>un&&(un=It[pn].y);return[Kt,kt,At-Kt,un-kt]}(f),Oe=It=>[(It.x-Le)/he,(It.y-Ie)/Ee],[Ve,tt,it,at]=f.map(Oe),ht=function(It,Kt,At,kt,un,pn,er,qn){const Tn=qC(0,0,1,0,1,1,0,1);return I(Tn,Tn,A([],qC(It,Kt,At,kt,un,pn,er,qn)))}(Ve[0],Ve[1],tt[0],tt[1],it[0],it[1],at[0],at[1]);this.elevatedGlobePerspectiveTransform=ZV(Ve[0],Ve[1],tt[0],tt[1],it[0],it[1],at[0],at[1]);const zt=(It,Kt)=>{$.push(It.lng);const At=Math.round((It.lng-ne)/de*xn),kt=Math.round((It.lat-re)/ye*xn),un=Oe(Kt),pn=Et([],[un[0],un[1],1],ht),er=Math.round(pn[0]/pn[2]*xn),qn=Math.round(pn[1]/pn[2]*xn);be.emplaceBack(At,kt,er,qn)},nn=f[3].x-f[0].x,Xt=f[3].y-f[0].y,Qt=f[2].x-f[1].x,ln=f[2].y-f[1].y;for(let It=0;It<65;It++){const Kt=It/64,At=[f[0].x+Kt*nn,f[0].y+Kt*Xt],kt=[f[1].x+Kt*Qt,f[1].y+Kt*ln],un=kt[0]-At[0],pn=kt[1]-At[1];for(let er=0;er<65;er++){const qn=er/64,Tn={x:At[0]+un*qn,y:At[1]+pn*qn};zt(l.projection.unproject(Tn.x,Tn.y),Tn)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(be,_I.members)}{this.maxLongitudeTriangleSize=0;let be=[],Le=new Fo;const Ie=(he,Ee,Oe)=>{Le.emplaceBack(he,Ee,Oe);const Ve=$[he],tt=$[Ee],it=$[Oe],at=Math.min(Math.min(Ve,tt),it),ht=Math.max(Math.max(Ve,tt),it)-at;ht>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=ht),be.push(at+ht/2)};for(let he=0;he<64;he++)for(let Ee=0;Ee<64;Ee++){const Oe=65*he+Ee,Ve=Oe+1,tt=Oe+65,it=tt+1;Ie(Oe,tt,Ve),Ie(Ve,tt,it)}[be,Le]=function(he,Ee){const Oe=Array.from({length:he.length},(it,at)=>at);Oe.sort((it,at)=>he[it]-he[at]);const Ve=[],tt=new Fo;for(let it=0;it<Oe.length;it++){const at=Oe[it];Ve.push(he[at]);const ht=3*at,zt=ht+1;tt.emplaceBack(Ee.uint16[ht],Ee.uint16[zt],Ee.uint16[zt+1])}return[Ve,tt]}(be,Le),this.elevatedGlobeTrianglesCenterLongitudes=be,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(Le)}this.elevatedGlobeSegments=_o.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,de/xn,0,ye/xn,0,0,re,ne,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const l=this.map.painter.context,f=l.gl;!this._dirty||this.texture instanceof UC||(this.texture?this.texture.update(this.image):(this.texture=new wI(l,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(l)}loadTile(o,l){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},l(null)):(o.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const l=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!l)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let g=(b=o+180)+360*Math.round((f[0]-b)/360);var b;const w=new _o,R=(q,Y)=>{w.segments.push({vertexOffset:0,primitiveOffset:q,vertexLength:l.segments[0].vertexLength,primitiveLength:Y,sortKey:void 0,vaos:{}})},P=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-g)<=P){const q=$s(f,0,f.length,g+P);return q===f.length||R(q,go(f,q+1,f.length,g+360-P)-q),w}g<f[0]&&(g+=360);const L=go(f,0,f.length,g-P);if(L===f.length)return R(0,f.length),w;R(0,L-0);const $=$s(f,L+1,f.length,g+P);return $!==f.length&&R($,f.length-$),w}}const $se=(Math.pow(256,2)-1)/16907520;class QV extends va{constructor(o,l,f,g){super(o,{layout:YV||(YV=new To({visibility:new yn(_t.layout_raster.visibility)})),paint:XV||(XV=new To({"raster-opacity":new yn(_t.paint_raster["raster-opacity"]),"raster-color":new ic(_t.paint_raster["raster-color"]),"raster-color-mix":new yn(_t.paint_raster["raster-color-mix"]),"raster-color-range":new yn(_t.paint_raster["raster-color-range"]),"raster-hue-rotate":new yn(_t.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yn(_t.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yn(_t.paint_raster["raster-brightness-max"]),"raster-saturation":new yn(_t.paint_raster["raster-saturation"]),"raster-contrast":new yn(_t.paint_raster["raster-contrast"]),"raster-resampling":new yn(_t.paint_raster["raster-resampling"]),"raster-fade-duration":new yn(_t.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new yn(_t.paint_raster["raster-emissive-strength"]),"raster-array-band":new yn(_t.paint_raster["raster-array-band"]),"raster-elevation":new yn(_t.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},l,f,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(o){return!(o&&o._source instanceof KV&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const l=this._transitionablePaint._values["raster-color"].value.expression,[f,g]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(g)||f===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=Fy({expression:l,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,g])}}let JV,e$,t$,n$,r$;class i$ extends va{constructor(o,l,f,g){super(o,{layout:JV||(JV=new To({visibility:new yn(_t["layout_raster-particle"].visibility)})),paint:e$||(e$=new To({"raster-particle-array-band":new yn(_t["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new yn(_t["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new ic(_t["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new yn(_t["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new yn(_t["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new yn(_t["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new yn(_t["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new yn(_t["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},l,f,g),this._updateColorRamp(),this.lastInvalidatedAt=Dl.now()}onRemove(o){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,l=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=Fy({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:l}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Dl.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Use extends va{constructor(o,l){super(o,{},l,null),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(o){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}function SI(u,o,l){const f=[0,0,1],g=Nn([]);return vn(g,g,l?-ie(u)+Math.PI:ie(u)),ft(g,g,-ie(o)),yt(f,f,g),wt(f,f)}function o$(u,o){const l=WC(u.projection,u.zoom,u.width,u.height),f=function(b,w,R,P,L){const $=new me(R.lng-180*Xy,R.lat),q=new me(R.lng+180*Xy,R.lat),Y=b.project($.lng,$.lat),ne=b.project(q.lng,q.lat),re=-Math.atan2(ne.y-Y.y,ne.x-Y.x),de=Tt.fromLngLat(R);de.y=Ze(de.y,-1+Xy,1-Xy);const ye=de.toLngLat(),be=b.project(ye.lng,ye.lat),Le=Tt.fromLngLat(ye);Le.x+=Xy;const Ie=Le.toLngLat(),he=b.project(Ie.lng,Ie.lat),Ee=a$(he.x-be.x,he.y-be.y,re),Oe=Tt.fromLngLat(ye);Oe.y+=Xy;const Ve=Oe.toLngLat(),tt=b.project(Ve.lng,Ve.lat),it=a$(tt.x-be.x,tt.y-be.y,re),at=Math.abs(Ee.x)/Math.abs(it.y),ht=B([]);ee(ht,ht,-re*(1-(L?0:P)));const zt=B([]);return G(zt,zt,[1,1-(1-at)*P,1]),zt[4]=-it.x/it.y*P,ee(zt,zt,re),V(zt,ht,zt),zt}(u.projection,0,u.center,l,o),g=s$(u);return G(f,f,[g,g,1]),f}function s$(u){const o=u.projection,l=WC(u.projection,u.zoom,u.width,u.height),f=TI(o,u.center),g=TI(o,me.convert(o.center));return Math.pow(2,f*l+(1-l)*g)}function WC(u,o,l,f,g=1/0){const b=u.range;if(!b)return 0;const w=Math.min(g,Math.max(l,f)),R=Math.log(w/1024)/Math.LN2;return et(b[0]+R,b[1]+R,o)}const Xy=1/4e4;function TI(u,o){const l=Ze(o.lat,-85.051129,mt),f=new me(o.lng-180*Xy,l),g=new me(o.lng+180*Xy,l),b=u.project(f.lng,l),w=u.project(g.lng,l),R=Tt.fromLngLat(f),P=Tt.fromLngLat(g),L=w.x-b.x,$=w.y-b.y,q=P.x-R.x,Y=P.y-R.y,ne=Math.sqrt((q*q+Y*Y)/(L*L+$*$));return Math.log(ne)/Math.LN2}function a$(u,o,l){const f=Math.cos(l),g=Math.sin(l);return{x:u*f-o*g,y:u*g+o*f}}function l$(u,o,l){B(u),ee(u,u,ie(o[2])),X(u,u,ie(o[0])),Q(u,u,ie(o[1])),G(u,u,l),V(u,u,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function GC(u,o,l,f,g,b,w,R){const P=[l[0]-o[0],l[1]-o[1],0],L=[f[0]-o[0],f[1]-o[1],0];if(Me(P)<1e-12||Me(L)<1e-12)return Nn(u);const $=st([],P,L);wt($,$),_e(L,f,o),P[2]=(b-g)*R,L[2]=(w-g)*R;const q=P;return st(q,P,L),wt(q,q),or(u,$,q)}function EI(u,o,l=!1){const f=Af(o.zoom),g=function(b,w,R){const P=w.worldSize,L=[b[12],b[13],b[14]],$=nt(L[1]/P),q=Je(L[0]/P),Y=B([]),ne=Ne(1,$)*P,re=Ne(1,0)*P*jt($,w.zoom),de=1/Mx(P);let ye=re*de;if(R){const he=WC(w.projection,w.zoom,w.width,w.height,1024);ye=de*w.projection.pixelSpaceConversion(w.center.lat,P,he)}const be=ge($,q);Ae(be,be,Ce([],wt([],be),ne*ye*L[2]));const Le=function(he){const Ee=[he[0],he[1],he[2]];let Oe=[0,1,0];const Ve=st([],Oe,Ee);return st(Oe,Ee,Ve),gt(Oe)===0&&(Oe=[0,1,0],st(Ve,Ee,Oe)),wt(Ve,Ve),wt(Oe,Oe),wt(Ee,Ee),[Ve[0],Ve[1],Ve[2],0,Oe[0],Oe[1],Oe[2],0,Ee[0],Ee[1],Ee[2],0,he[0],he[1],he[2],1]}(be);G(Y,Y,[ye,ye,ye*ne]),H(Y,Y,[-L[0],-L[1],-L[2]]);const Ie=V([],w.globeMatrix,Le);return V(Ie,Ie,Y),V(Ie,Ie,b),Ie}(u,o,l);if(f>0){const b=function(w,R){const P=R.worldSize,L=Ne(1,0)*P*jt(R.center.lat,R.zoom)/Mx(P),$=Ne(1,R.center.lat)*P,q=B([]);return Q(q,q,ie(R.center.lng)),X(q,q,ie(R.center.lat)),H(q,q,[0,0,E]),G(q,q,[L,L,L*$]),H(q,q,[R.point.x-.5*P,R.point.y-.5*P,0]),V(q,q,w),V(q,R.globeMatrix,q)}(u,o);return function(w,R,P){const L=(re,de,ye)=>{const be=Me(re),Le=Me(de),Ie=rd(re,de,ye);return Ce(Ie,Ie,1/Me(Ie)*lr(be,Le,ye))},$=L([w[0],w[1],w[2]],[R[0],R[1],R[2]],P),q=L([w[4],w[5],w[6]],[R[4],R[5],R[6]],P),Y=L([w[8],w[9],w[10]],[R[8],R[9],R[10]],P),ne=rd([w[12],w[13],w[14]],[R[12],R[13],R[14]],P);return[$[0],$[1],$[2],0,q[0],q[1],q[2],0,Y[0],Y[1],Y[2],0,ne[0],ne[1],ne[2],1]}(g,b,f)}return g}function c$(u,o,l,f){const g=Fi.projectAabbCorners(f,l);let b=Number.MAX_VALUE,w=-1;for(let L=0;L<g.length;++L){const $=g[L];$[0]=(.5*$[0]+.5)*o.width,$[1]=(.5-.5*$[1])*o.height,$[2]<b&&(w=L,b=$[2])}const R=L=>new mn(g[L][0],g[L][1]);let P;switch(w){case 0:case 6:P=[R(1),R(5),R(4),R(7),R(3),R(2),R(1)];break;case 1:case 7:P=[R(0),R(4),R(5),R(6),R(2),R(3),R(0)];break;case 3:case 5:P=[R(1),R(0),R(4),R(7),R(6),R(2),R(1)];break;default:P=[R(1),R(5),R(6),R(7),R(3),R(0),R(1)]}if(hr(u,P))return b}const qse=fi([{name:"a_pos_3f",components:3,type:"Float32"}]),Hse=fi([{name:"a_color_3f",components:3,type:"Float32"}]),Wse=fi([{name:"a_color_4f",components:4,type:"Float32"}]),Gse=fi([{name:"a_uv_2f",components:2,type:"Float32"}]),Yse=fi([{name:"a_normal_3f",components:3,type:"Float32"}]),Xse=fi([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),Zse=fi([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),u$={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class YC{constructor(o,l,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function CI(u,o){const l=u.indexOf("://")===-1;try{return new URL(u,l&&o?"http://example.com":void 0),!0}catch{return!1}}class d${constructor(o,l){this.feature=o,this.instancedDataOffset=l,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class h${constructor(){this.instancedDataArray=new Cf,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class MI{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.fqid),this.projection=o.projection,this.index=o.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=o.styleDefinedModelURLs}updateFootprints(o,l){}populate(o,l,f,g){this.tileToMeter=pt(f);const b=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:w,id:R,index:P,sourceLayerIndex:L}of o){const $=R??(w.properties&&w.properties.hasOwnProperty("id")?w.properties.id:void 0),q=Gn(w,b);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),q,f))continue;const Y={id:$,sourceLayerIndex:L,index:P,geometry:b?q.geometry:Vn(w,f,g),properties:w.properties,type:w.type,patterns:{}},ne=this.addFeature(Y,Y.geometry,q);ne&&l.featureIndex.insert(w,Y.geometry,P,L,this.index,this.instancesPerModel[ne].instancedDataArray.length,xn/32)}this.lookup=null}update(o,l,f,g){for(const b in this.instancesPerModel){const w=this.instancesPerModel[b];for(const R in o)w.idToFeaturesIndex.hasOwnProperty(R)&&(this.evaluate(w.features[w.idToFeaturesIndex[R]],o[R],w,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const l in this.instancesPerModel){const f=this.instancesPerModel[l];for(const g of f.features){const b=this.layers[0],w=g.feature,R=this.canonical,P=b.paint.get("model-rotation").evaluate(w,{},R),L=b.paint.get("model-scale").evaluate(w,{},R),$=b.paint.get("model-translation").evaluate(w,{},R);Lt(g.rotation,P)&&Lt(g.scale,L)&&Lt(g.translation,$)||(this.evaluate(g,g.featureStates,f,!0),o=!0)}}return o}updateReplacement(o,l,f,g){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const b=l.getReplacementRegionsForTile(o.toUnwrapped(),!0);if($y(this.activeReplacements,b))return!1;this.activeReplacements=b;let w=!1;for(const R in this.instancesPerModel){const P=this.instancesPerModel[R],L=P.instancedDataArray;for(const $ of P.features){const q=$.instancedDataOffset,Y=$.instancedDataCount;for(let ne=0;ne<Y;ne++){const re=16*(ne+q);let de=L.float32[re+0];const ye=de>xn;de=ye?de-xn:de;const be=Math.floor(de),Le=L.float32[re+1];let Ie=!1;for(const he of this.activeReplacements)if(!Vy(he,f,u$.Model,g)&&!(he.min.x>be||be>he.max.x||he.min.y>Le||Le>he.max.y)&&(Ie=ww(_C(be,Le,o.canonical,he.footprintTileId.canonical),he.footprint),Ie))break;L.float32[re]=Ie?de+xn:de,w=w||Ie!==ye}}}return w}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const l in this.instancesPerModel){const f=this.instancesPerModel[l];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=o.createVertexBuffer(f.instancedDataArray,Xse.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const l in this.instancesPerModel){const f=this.instancesPerModel[l];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const o=this.layers[0].modelManager;if(o&&this.modelUris&&this.modelsRequested)for(const l of this.modelUris)o.removeModel(l,"",!0)}addFeature(o,l,f){const g=this.layers[0],b=g.layout.get("model-id").evaluate(f,{},this.canonical);if(!b)return Ir(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),b;(CI(b,!1)||this.styleDefinedModelURLs[b]!==void 0)&&(this.modelUris.includes(b)||this.modelUris.push(b)),this.instancesPerModel[b]||(this.instancesPerModel[b]=new h$);const w=this.instancesPerModel[b],R=w.instancedDataArray,P=new d$(f,R.length);for(const L of l)for(const $ of L){if($.x<0||$.x>=xn||$.y<0||$.y>=xn)continue;const q=(this.lookupDim-1)/xn,Y=this.lookupDim*($.y*q|0)+$.x*q|0;if(this.lookup){if(this.lookup[Y]!==0)continue;this.lookup[Y]=1}this.instanceCount++;const ne=R.length;R.resize(ne+1),w.instancesEvaluatedElevation.push(0),R.float32[16*ne]=$.x,R.float32[16*ne+1]=$.y}return P.instancedDataCount=w.instancedDataArray.length-P.instancedDataOffset,P.instancedDataCount>0&&(o.id&&(w.idToFeaturesIndex[o.id]=w.features.length),w.features.push(P),this.evaluate(P,{},w,!1)),b}getModelUris(){return this.modelUris}evaluate(o,l,f,g){const b=this.layers[0],w=o.feature,R=this.canonical,P=o.rotation=b.paint.get("model-rotation").evaluate(w,l,R),L=o.scale=b.paint.get("model-scale").evaluate(w,l,R),$=o.translation=b.paint.get("model-translation").evaluate(w,l,R),q=b.paint.get("model-color").evaluate(w,l,R);q.a=b.paint.get("model-color-mix-intensity").evaluate(w,l,R);const Y=[];this.maxVerticalOffset<$[2]&&(this.maxVerticalOffset=$[2]),this.maxScale=Math.max(Math.max(this.maxScale,L[0]),Math.max(L[1],L[2])),l$(Y,P,L);const ne=Math.round(100*q.a)+q.b/1.05;for(let re=0;re<o.instancedDataCount;++re){const de=o.instancedDataOffset+re,ye=16*de,be=f.instancedDataArray.float32;let Le=0;g&&(Le=be[ye+6]-f.instancesEvaluatedElevation[de]);const Ie=0|be[ye+1];be[ye]=(0|be[ye])+q.r/1.05,be[ye+1]=Ie+q.g/1.05,be[ye+2]=ne,be[ye+3]=1/(R.z>10?this.tileToMeter:pt(R,Ie)),be[ye+4]=$[0],be[ye+5]=$[1],be[ye+6]=$[2]+Le,be[ye+7]=Y[0],be[ye+8]=Y[1],be[ye+9]=Y[2],be[ye+10]=Y[4],be[ye+11]=Y[5],be[ye+12]=Y[6],be[ye+13]=Y[8],be[ye+14]=Y[9],be[ye+15]=Y[10],f.instancesEvaluatedElevation[de]=$[2]}}}let f$,p$;zn(MI,"ModelBucket",{omit:["layers"]}),zn(h$,"PerModelAttributes"),zn(d$,"ModelFeature");const X_=64,ob={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function m$(u,o,l,f,g,b,w,R,P,L=!1){const $=l.zoom,q=l.project(f),Y=jt(f.lat,$),ne=1/Y;B(u),H(u,u,[q.x+w[0]*ne,q.y+w[1]*ne,w[2]]);let re=1,de=1;const ye=l.worldSize;if(L){if(l.projection.name==="mercator"){let he=0;l.elevation&&(he=l.elevation.getAtPointOrZero(new Tt(q.x/ye,q.y/ye),0));const Ee=Bn([],[q.x,q.y,he,1],l.projMatrix)[3]/l.cameraToCenterDistance;re=Ee,de=Ee*jt(l.center.lat,$)}else if(l.projection.name==="globe"){const he=EI(u,l),Ee=[0,0,0,1];Bn(Ee,Ee,V([],l.projMatrix,he));const Oe=Ee[3]/l.cameraToCenterDistance,Ve=Af($),tt=l.projection.pixelsPerMeter(f.lat,ye)*jt(f.lat,$),it=l.projection.pixelsPerMeter(l.center.lat,ye)*jt(l.center.lat,$);re=Oe/lr(tt,$t(l.center.lat),Ve),de=Oe*Y/tt,re*=it,de*=it}}else re=ne;G(u,u,[re,re,de]);const be=[...u],Le=o.orientation,Ie=[];if(l$(Ie,[Le[0]+g[0],Le[1]+g[1],Le[2]+g[2]],b),V(u,be,Ie),R&&l.elevation){let he=0;const Ee=[];if(P&&l.elevation){he=function(Ve,tt,it,at,ht){const zt=tt.elevation;if(!zt)return 0;const nn=Fi.projectAabbCorners(it,at),Xt=Ne(1,ht.lat)*tt.worldSize,Qt=function(cn,Rr){const Zn=[0,0,1],Kn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const wr of Kn){const zr=cn[wr.corners[0]],jr=cn[wr.corners[1]],Gr=cn[wr.corners[2]],Hr=[jr[0]-zr[0],jr[1]-zr[1],Rr*(jr[2]-zr[2])],Vr=st(Hr,Hr,[Gr[0]-zr[0],Gr[1]-zr[1],Rr*(Gr[2]-zr[2])]);wt(Vr,Vr),wr.dotProductWithUp=ot(Vr,Zn)}return Kn.sort((wr,zr)=>wr.dotProductWithUp-zr.dotProductWithUp),Kn[0].corners}(nn,Xt),ln=nn[Qt[0]],It=nn[Qt[1]],Kt=nn[Qt[2]],At=nn[Qt[3]],kt=zt.getAtPointOrZero(new Tt(ln[0]/tt.worldSize,ln[1]/tt.worldSize),0),un=zt.getAtPointOrZero(new Tt(It[0]/tt.worldSize,It[1]/tt.worldSize),0),pn=zt.getAtPointOrZero(new Tt(Kt[0]/tt.worldSize,Kt[1]/tt.worldSize),0),er=zt.getAtPointOrZero(new Tt(At[0]/tt.worldSize,At[1]/tt.worldSize),0),qn=(kt+er)/2,Tn=(un+pn)/2;return qn>Tn?un<pn?GC(Ve,It,At,ln,un,er,kt,Xt):GC(Ve,Kt,ln,At,pn,kt,er,Xt):kt<er?GC(Ve,ln,It,Kt,kt,un,pn,Xt):GC(Ve,At,Kt,It,er,pn,un,Xt),Math.max(qn,Tn)}(Ee,l,o.aabb,u,f);const Oe=V([],ue([],Ee),Ie);V(u,be,Oe)}else he=l.elevation.getAtPointOrZero(new Tt(q.x/ye,q.y/ye),0);he!==0&&(u[14]+=he)}}function jw(u,o,l=!1){u.uploaded||(u.gfxTexture=new wI(o,u.image,l?o.gl.R8:o.gl.RGBA8,{useMipmap:u.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),u.uploaded=!0,u.image=null)}function Kse(u,o,l){u.indexBuffer=o.createIndexBuffer(u.indexArray,!1,!0),u.vertexBuffer=o.createVertexBuffer(u.vertexArray,qse.members,!1,!0),u.normalArray&&(u.normalBuffer=o.createVertexBuffer(u.normalArray,Yse.members,!1,!0)),u.texcoordArray&&(u.texcoordBuffer=o.createVertexBuffer(u.texcoordArray,Gse.members,!1,!0)),u.colorArray&&(u.colorBuffer=o.createVertexBuffer(u.colorArray,(u.colorArray.bytesPerElement===12?Hse:Wse).members,!1,!0)),u.featureArray&&(u.pbrBuffer=o.createVertexBuffer(u.featureArray,Zse.members,!0)),u.segments=_o.simpleSegment(0,0,u.vertexArray.length,u.indexArray.length);const f=u.material;f.pbrMetallicRoughness.baseColorTexture&&jw(f.pbrMetallicRoughness.baseColorTexture,o),f.pbrMetallicRoughness.metallicRoughnessTexture&&jw(f.pbrMetallicRoughness.metallicRoughnessTexture,o),f.normalTexture&&jw(f.normalTexture,o),f.occlusionTexture&&jw(f.occlusionTexture,o,l),f.emissionTexture&&jw(f.emissionTexture,o)}function AI(u,o,l){if(u.meshes)for(const f of u.meshes)Kse(f,o,l);if(u.children)for(const f of u.children)AI(f,o,l)}function XC(u){if(u.meshes)for(const o of u.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(u.children)for(const o of u.children)XC(o)}function RI(u){if(u.meshes)for(const l of u.meshes)l.vertexBuffer&&(l.vertexBuffer.destroy(),l.indexBuffer.destroy(),l.normalBuffer&&l.normalBuffer.destroy(),l.texcoordBuffer&&l.texcoordBuffer.destroy(),l.colorBuffer&&l.colorBuffer.destroy(),l.pbrBuffer&&l.pbrBuffer.destroy(),l.segments.destroy(),l.material&&((o=l.material).pbrMetallicRoughness.baseColorTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),o.pbrMetallicRoughness.metallicRoughnessTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),o.normalTexture&&o.normalTexture.gfxTexture&&o.normalTexture.gfxTexture.destroy(),o.emissionTexture&&o.emissionTexture.gfxTexture&&o.emissionTexture.gfxTexture.destroy(),o.occlusionTexture&&o.occlusionTexture.gfxTexture&&o.occlusionTexture.gfxTexture.destroy()));var o;if(u.children)for(const l of u.children)RI(l)}class sb{constructor(o,l,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=l,this._offset=f}static create(o,l,f){const g=f||o.findDEMTileFor(l);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,R=1<<l.canonical.z-w.canonical.z;return new sb(g,b.dim/xn/R,[(l.canonical.x/R-w.canonical.x)*b.dim,(l.canonical.y/R-w.canonical.y)*b.dim])}tileCoordToPixel(o,l){const f=l*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),b=Math.floor(f);return new mn(g,b)}getElevationAt(o,l,f,g){const b=o*this._scale+this._offset[0],w=l*this._scale+this._offset[1],R=Math.floor(b),P=Math.floor(w),L=this._dem;return g=!!g,f?lr(lr(L.get(R,P,g),L.get(R,P+1,g),w-P),lr(L.get(R+1,P,g),L.get(R+1,P+1,g),w-P),b-R):L.get(R,P,g)}getElevationAtPixel(o,l,f){return this._dem.get(o,l,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Ne(1,o)*this._dem.stride}}const DI=new Float32Array(262144),Z_=new Uint8Array(262144);function g$(u){let o=0;if(u.meshes)for(const l of u.meshes)o=Math.max(o,l.aabb.max[2]);if(u.children)for(const l of u.children)o=Math.max(o,g$(l));return o}function y$(u,o,l){if(u.meshes)for(const f of u.meshes){if(f.aabb.min[0]===1/0)continue;const g=Fi.applyTransform(f.aabb,u.matrix);l.insert(o,g.min[0],g.min[1],g.max[0],g.max[1])}if(u.children)for(const f of u.children)y$(f,o,l)}const v$=["","wall","door","roof","window","lamp","logo"];class _${constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:o.id,geometry:[],properties:{height:g$(o)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const l=new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==o&&(f.transformedAabb=Fi.applyTransformFast(f.aabb,this.node.matrix),l.encapsulate(f.transformedAabb)),o++;this.aabb=l}return this.aabb}}class ZC{constructor(o,l,f,g,b,w,R){this.id=f,this.layers=o,this.layerIds=this.layers.map(P=>P.fqid),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.modelTraits|=ob.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=ob.HasMapboxMeshFeatures),b&&(this.modelTraits|=ob.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=w,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const P of l)this.nodesInfo.push(new _$(P)),y$(P,R.featureIndexArray.length,R.grid),R.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,R.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(o,l){for(const f of this.getNodesInfo()){const g=f.node;g.footprint&&l.push({footprint:g.footprint,id:o})}}update(o){const l=Object.keys(o).length!==0;if(l&&!this.stateDependentLayers.length)return;const f=l?this.stateDependentLayers:this.layers;if(!ea(o,this.states))for(const g of f)this.evaluate(g,o);this.states=structuredClone(o)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const l=this.getNodesInfo();for(const f of l){const g=f.node;this.uploaded?this.updatePbrBuffer(g):AI(g,o,!0)}for(const f of l)XC(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let l=!1;if(!o.meshes)return l;for(const f of o.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),l=!0);return l}needsReEvaluation(o,l,f){const g=o.transform.projectionOptions,b=o.style.getBrightness(),w=this.brightness!==b;if(!this.uploaded||this.dirty||g.name!==this.projection.name||Nw(f.paint.get("model-color").value,w)||Nw(f.paint.get("model-color-mix-intensity").value,w)||Nw(f.paint.get("model-roughness").value,w)||Nw(f.paint.get("model-emissive-strength").value,w)||Nw(f.paint.get("model-height-based-emissive-strength-multiplier").value,w)){this.projection=g,this.brightness=b;const R=this.getNodesInfo();for(const P of R)P.state=null;return!0}return!1}evaluateScale(o,l){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const f=this.getNodesInfo(),g=this.id.canonical;for(const b of f){const w=b.feature;b.evaluatedScale=l.paint.get("model-scale").evaluate(w,{},g)}}evaluate(o,l){const f=this.getNodesInfo();for(const g of f){if(!g.node.meshes)continue;const b=g.feature,w=l&&l[b.id];if(ea(w,g.state))continue;g.state=structuredClone(w);const R=g.node.meshes&&g.node.meshes[0].featureData,P=g.evaluatedColor[2],L=g.evaluatedRMEA[2],$=this.id.canonical;if(g.hasTranslucentParts=!1,R){for(let q=0;q<v$.length;q++){const Y=v$[q];Y.length&&(b.properties.part=Y);const ne=o.paint.get("model-color").evaluate(b,w,$).toRenderColor(null),re=o.paint.get("model-color-mix-intensity").evaluate(b,w,$);g.evaluatedColor[q]=[ne.r,ne.g,ne.b,re],g.evaluatedRMEA[q][0]=o.paint.get("model-roughness").evaluate(b,w,$),g.evaluatedRMEA[q][2]=o.paint.get("model-emissive-strength").evaluate(b,w,$),g.evaluatedRMEA[q][3]=ne.a,g.emissionHeightBasedParams[q]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(b,w,$),!g.hasTranslucentParts&&ne.a<1&&(g.hasTranslucentParts=!0)}delete b.properties.part,Jse(g,P!==g.evaluatedColor[2]||L!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(b,w,$);g.evaluatedScale=o.paint.get("model-scale").evaluate(b,w,$),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,l,f,g){const b=o.findDEMTileFor(f);if(b&&(b.tileID.canonical!==this.terrainTile||l!==this.terrainExaggeration)){if(b.dem&&b.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=b.tileID.overscaledZ;const w=sb.create(o,f,b);if(!w)return;this.modelTraits&ob.HasMapboxMeshFeatures&&this.updateDEM(o,w,f,g);for(const R of this.getNodesInfo()){const P=R.node;if(!P.footprint||!P.footprint.vertices||!P.footprint.vertices.length)continue;const L=P.footprint.vertices;let $=w.getElevationAt(L[0].x,L[0].y,!0,!0);for(let q=1;q<L.length;q++)$=Math.min($,w.getElevationAt(L[q].x,L[q].y,!0,!0));P.elevation=$}}this.terrainTile=b.tileID.canonical,this.terrainExaggeration=l}}updateDEM(o,l,f,g){let b=l._dem._modifiedForSources[g];if(b===void 0&&(l._dem._modifiedForSources[g]=[],b=l._dem._modifiedForSources[g]),b.includes(f.canonical))return;const w=l._dem.dim;b.push(f.canonical);let R=!1;for(const P of this.getNodesInfo()){const L=P.node;if(!L.footprint||!L.footprint.grid)continue;const $=L.footprint.grid,q=l.tileCoordToPixel($.min.x,$.min.y),Y=l.tileCoordToPixel($.max.x,$.max.y),ne=Math.min(Math.min(w-Y.y,q.x),Math.min(q.y,w-Y.x));if(ne<0)continue;const re=Ze(ne,2,5);let de=Math.max(0,q.x-re),ye=Math.max(0,q.y-re),be=Math.min(Y.x+re,w-1),Le=Math.min(Y.y+re,w-1);for(let Oe=ye;Oe<=Le;++Oe)for(let Ve=de;Ve<=be;++Ve)Z_[Oe*w+Ve]=255;let Ie=0,he=0;for(let Oe=0;Oe<$.cellsY;++Oe)for(let Ve=0;Ve<$.cellsX;++Ve){if(!$.cells[Oe*$.cellsX+Ve])continue;const tt=l.tileCoordToPixel($.min.x+Ve/$.xScale,$.min.y+Oe/$.yScale),it=l.tileCoordToPixel($.min.x+(Ve+1)/$.xScale,$.min.y+(Oe+1)/$.yScale);for(let at=tt.y;at<=Math.min(it.y+1,w-1);++at)for(let ht=tt.x;ht<=Math.min(it.x+1,w-1);++ht)Z_[at*w+ht]===255&&(Z_[at*w+ht]=0,Ie+=l.getElevationAtPixel(ht,at),he++)}const Ee=Ie/he;de=Math.max(1,q.x-re),ye=Math.max(1,q.y-re),be=Math.min(Y.x+re,w-2),Le=Math.min(Y.y+re,w-2),R=!0;for(let Oe=ye;Oe<=Le;++Oe)for(let Ve=de;Ve<=be;++Ve)Z_[Oe*w+Ve]===0&&(DI[Oe*w+Ve]=l._dem.set(Ve,Oe,Ee));for(let Oe=1;Oe<re;++Oe){de=Math.max(1,q.x-Oe),ye=Math.max(1,q.y-Oe),be=Math.min(Y.x+Oe,w-2),Le=Math.min(Y.y+Oe,w-2);for(let Ve=ye;Ve<=Le;++Ve)for(let tt=de;tt<=be;++tt){const it=Ve*w+tt;if(Z_[it]===255){let at=0,ht=0,zt=-1,nn=-1;for(let Xt=-1;Xt<=1;++Xt)for(let Qt=-1;Qt<=1;++Qt){const ln=(Ve+Xt)*w+tt+Qt;if(Z_[ln]>=Oe)continue;const It=DI[ln],Kt=Math.abs(It);Kt>ht&&(at=It,ht=Kt,zt=Qt,nn=Xt)}if(ht>.1){const Xt=1-(Oe+.5*Math.abs(zt*nn))/re;let Qt=l._dem.get(tt,Ve)+at*Xt;const ln=l._dem.get(tt+zt,Ve+nn),It=l._dem.get(tt-zt,Ve-nn,!0);(Qt-ln)*(Qt-It)>0&&(Qt=(ln+It)/2),DI[it]=l._dem.set(tt,Ve,Qt),Z_[it]=Oe}}}}}R&&(l._demTile.needsDEMTextureUpload=!0,l._dem._timestamp=Dl.now())}setFilter(o){this.filter=o?Cy(o):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(o=>this.filter.filter(new Li(this.id.overscaledZ),o.feature,this.id.canonical)):this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const l of o)XC(l.node),RI(l.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,l){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const f=l.getReplacementRegionsForTile(o.toUnwrapped()),g=this.getNodesInfo();for(let b=0;b<this.nodesInfo.length;b++){const w=g[b].node;g[b].hiddenByReplacement=!!w.footprint&&!f.find(R=>R.footprint===w.footprint)}}getHeightAtTileCoord(o,l){const f=this.getNodesInfo(),g=[],b=[0,0,0],w=B([]);for(let R=0;R<this.nodesInfo.length;R++){const P=f[R],L=P.node.meshes[0],$=L.transformedAabb;if(o<$.min[0]||l<$.min[1]||o>$.max[0]||l>$.max[1])continue;if(P.node.hidden===!0)return{height:1/0,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};j(w,P.node.matrix),b[0]=o,b[1]=l,Dt(b,b,w);const q=(b[0]-L.aabb.min[0])/(L.aabb.max[0]-L.aabb.min[0])*X_|0,Y=Math.min(63,(b[1]-L.aabb.min[1])/(L.aabb.max[1]-L.aabb.min[1])*X_|0)*X_+Math.min(63,q),ne=L.heightmap[Y];if(!(ne<0&&P.node.footprint))return P.hiddenByReplacement?void 0:{height:ne,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};if(P.node.footprint.grid.query(new mn(o,l),new mn(o,l),g),g.length>0)return{height:void 0,maxHeight:P.feature.properties.height,hidden:P.hiddenByReplacement,verticalScale:P.evaluatedScale[2]}}}}function Nw(u,o){return u instanceof vo&&!u.isLightConstant&&o}function Qse(u,o,l,f,g,b,w,R){let P=(61440&o|(61440&o)>>4)>>8,L=(3840&o|(3840&o)>>4)>>4,$=240&o|(240&o)>>4;l[3]>0&&(P=lr(P,255*l[0],l[3]),L=lr(L,255*l[1],l[3]),$=lr($,255*l[2],l[3]));const q=P<<8|L,Y=$<<8|Math.floor(255*f[3]),ne=function(Oe){const Ve=Ze(Oe,0,2);return Math.min(Math.round(.5*Ve*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],re=Ze(g[0],0,1),de=Ze(g[1],0,1),ye=Ze(g[2],0,1),be=Ze(g[3],0,1);let Le,Ie,he,Ee;if(re!==de&&w!==b&&de!==re){const Oe=w-b;Ie=1/(Oe*(de-re)),he=-(b+Oe*re)/(Oe*(de-re));const Ve=Ze(g[4],-1,1);Ee=Math.pow(10,Ve),Le=255*ye<<8|255*be}else Le=65535,Ie=0,he=1,Ee=1;if(u.emplaceBack(q,Y,ne,Le,Ie,he,Ee),R){const Oe=R.length;R.clear();for(let Ve=0;Ve<Oe;Ve++)R.emplaceBack(q,Y,ne,Le,Ie,he,Ee)}}function Jse(u,o,l){const f=u.node;let g=0;const b=l&ob.HasMeshoptCompression;for(const w of f.meshes){if(f.lights&&f.lightMeshIndex===g||!w.featureData)continue;w.featureArray=new Lp,w.featureArray.reserve(w.featureData.length);let R=o;for(const P of w.featureData){const L=b?65535&P:P>>16&65535,$=b?P>>16&65535:65535&P,q=(15&$)<8?15&$:0,Y=u.evaluatedRMEA[q],ne=u.evaluatedColor[q],re=u.emissionHeightBasedParams[q];let de;if(R&&q===2&&f.lights&&(de=new Lp,de.resize(10*f.lights.length)),Qse(w.featureArray,L,ne,Y,re,w.aabb.min[2],w.aabb.max[2],de),de&&R){R=!1;const ye=f.meshes[f.lightMeshIndex];ye.featureArray=de,ye.featureArray._trim()}}w.featureArray._trim(),g++}}function x$(u,o,l,f){const g=1<<u.z;o.lat=nt((f/xn+u.y)/g),o.lng=Je((l/xn+u.x)/g)}zn(ZC,"Tiled3dModelBucket",{omit:["layers"]}),zn(_$,"Tiled3dModelFeature");const eae={circle:class extends va{constructor(u,o,l,f){super(u,{layout:yi||(yi=new To({"circle-sort-key":new Ln(_t.layout_circle["circle-sort-key"]),"circle-elevation-reference":new yn(_t.layout_circle["circle-elevation-reference"]),visibility:new yn(_t.layout_circle.visibility)})),paint:to||(to=new To({"circle-radius":new Ln(_t.paint_circle["circle-radius"]),"circle-color":new Ln(_t.paint_circle["circle-color"]),"circle-blur":new Ln(_t.paint_circle["circle-blur"]),"circle-opacity":new Ln(_t.paint_circle["circle-opacity"]),"circle-translate":new yn(_t.paint_circle["circle-translate"]),"circle-translate-anchor":new yn(_t.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yn(_t.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yn(_t.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ln(_t.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ln(_t.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ln(_t.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new yn(_t.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}createBucket(u){return new Wn(u)}queryRadius(u){const o=u;return Tr("circle-radius",this,o)+Tr("circle-stroke-width",this,o)+Ui(this.paint.get("circle-translate"))}queryIntersectsFeature(u,o,l,f,g,b,w,R){const P=gi(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),L=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l);return tw(u,f,b,w,R,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",P,L)}getProgramIds(){return["circle"]}getDefaultProgramParams(u,o,l){const f=eC(this);return{config:new ed(this,{zoom:o,lut:l}),defines:f,overrideFog:!1}}hasElevation(){return this.layout&&this.layout.get("circle-elevation-reference")!=="none"}},heatmap:class extends va{createBucket(u){return new Sg(u)}constructor(u,o,l,f){super(u,{layout:Rx||(Rx=new To({visibility:new yn(_t.layout_heatmap.visibility)})),paint:R_||(R_=new To({"heatmap-radius":new Ln(_t.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ln(_t.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yn(_t.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ic(_t.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yn(_t.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Fy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(u){return Tr("heatmap-radius",this,u)}queryIntersectsFeature(u,o,l,f,g,b,w,R){const P=this.paint.get("heatmap-radius").evaluate(o,l);return tw(u,f,b,w,R,!0,!0,new mn(0,0),P)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(u,o,l){return u==="heatmap"?{config:new ed(this,{zoom:o,lut:l}),overrideFog:!1}:{}}},hillshade:class extends va{constructor(u,o,l,f){super(u,{layout:Dx||(Dx=new To({visibility:new yn(_t.layout_hillshade.visibility)})),paint:Vp||(Vp=new To({"hillshade-illumination-direction":new yn(_t.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yn(_t.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yn(_t.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yn(_t.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yn(_t.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yn(_t.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new yn(_t.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(u,o,l){return{overrideFog:!1}}},fill:class extends va{constructor(u,o,l,f){super(u,{layout:Rg||(Rg=new To({"fill-sort-key":new Ln(_t.layout_fill["fill-sort-key"]),visibility:new yn(_t.layout_fill.visibility),"fill-elevation-reference":new yn(_t.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ln(_t.layout_fill["fill-construct-bridge-guard-rail"])})),paint:Ny||(Ny=new To({"fill-antialias":new yn(_t.paint_fill["fill-antialias"]),"fill-opacity":new Ln(_t.paint_fill["fill-opacity"]),"fill-color":new Ln(_t.paint_fill["fill-color"]),"fill-outline-color":new Ln(_t.paint_fill["fill-outline-color"]),"fill-translate":new yn(_t.paint_fill["fill-translate"]),"fill-translate-anchor":new yn(_t.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ln(_t.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new yn(_t.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new yn(_t.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ln(_t.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ln(_t.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ln(_t.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}getProgramIds(){const u=this.paint.get("fill-pattern"),o=u&&u.constantOr(1),l=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getDefaultProgramParams(u,o,l){return{config:new ed(this,{zoom:o,lut:l}),overrideFog:!1}}recalculate(u,o){super.recalculate(u,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new qx(u)}queryRadius(){return Ui(this.paint.get("fill-translate"))}queryIntersectsFeature(u,o,l,f,g,b){return!u.queryGeometry.isAboveHorizon&&ur(ai(u.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(u){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const o=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return u!=null?o&&!u:o}hasElevation(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}hasShadowPass(){return this.layout&&this.layout.get("fill-elevation-reference")!=="none"}},"fill-extrusion":class extends va{constructor(u,o,l,f){super(u,{layout:Wy||(Wy=new To({visibility:new yn(_t["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new yn(_t["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:eb||(eb=new To({"fill-extrusion-opacity":new yn(_t["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yn(_t["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yn(_t["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new yn(_t["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new yn(_t["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new yn(_t["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new yn(_t["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new yn(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new yn(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new yn(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new yn(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new yn(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new yn(_t["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new yn(_t["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new yn(_t["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new yn(_t["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new yn(_t["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new yn(_t["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ln(_t["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new yn(_t["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new Qx(u)}queryRadius(){return Ui(this.paint.get("fill-extrusion-translate"))}is3D(u){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(u,o,l,f,g,b,w,R,P){const L=gi(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),$=this.paint.get("fill-extrusion-height").evaluate(o,l),q=this.paint.get("fill-extrusion-base").evaluate(o,l),Y=[0,0],ne=R&&b.elevation,re=b.elevation?b.elevation.exaggeration():1,de=u.tile.getBucket(this);if(ne&&de instanceof Qx){const he=de.centroidVertexArray,Ee=P+1;Ee<he.length&&(Y[0]=he.geta_centroid_pos0(Ee),Y[1]=he.geta_centroid_pos1(Ee))}if(Y[0]===0&&Y[1]===1)return!1;b.projection.name==="globe"&&(f=H_([f],[new mn(0,0),new mn(xn,xn)],u.tileID.canonical).map(he=>he.polygon).flat());const ye=ne?R:null,[be,Le]=function(he,Ee,Oe,Ve,tt,it,at,ht,zt,nn,Xt){return he.projection.name==="globe"?function(Qt,ln,It,Kt,At,kt,un,pn,er,qn,Tn){const cn=[],Rr=[],Zn=Qt.projection.upVectorScale(Tn,Qt.center.lat,Qt.worldSize).metersToTile,Kn=[0,0,0,1],wr=[0,0,0,1],zr=(Gr,Hr,Vr,Zi)=>{Gr[0]=Hr,Gr[1]=Vr,Gr[2]=Zi,Gr[3]=1},jr=q_();It>0&&(It+=jr),Kt+=jr;for(const Gr of ln){const Hr=[],Vr=[];for(const Zi of Gr){const so=Zi.x+At.x,je=Zi.y+At.y,qe=Qt.projection.projectTilePoint(so,je,Tn),Vt=Qt.projection.upVector(Tn,Zi.x,Zi.y);let _n=It,An=Kt;if(un){const Cn=se(so,je,It,Kt,un,pn,er,qn);_n+=Cn.base,An+=Cn.top}It!==0?zr(Kn,qe.x+Vt[0]*Zn*_n,qe.y+Vt[1]*Zn*_n,qe.z+Vt[2]*Zn*_n):zr(Kn,qe.x,qe.y,qe.z),zr(wr,qe.x+Vt[0]*Zn*An,qe.y+Vt[1]*Zn*An,qe.z+Vt[2]*Zn*An),Dt(Kn,Kn,kt),Dt(wr,wr,kt),Hr.push(new ah(Kn[0],Kn[1],Kn[2])),Vr.push(new ah(wr[0],wr[1],wr[2]))}cn.push(Hr),Rr.push(Vr)}return[cn,Rr]}(he,Ee,Oe,Ve,tt,it,at,ht,zt,nn,Xt):at?function(Qt,ln,It,Kt,At,kt,un,pn,er){const qn=[],Tn=[],cn=[0,0,0,1];for(const Rr of Qt){const Zn=[],Kn=[];for(const wr of Rr){const zr=wr.x+Kt.x,jr=wr.y+Kt.y,Gr=se(zr,jr,ln,It,kt,un,pn,er);cn[0]=zr,cn[1]=jr,cn[2]=Gr.base,cn[3]=1,Bn(cn,cn,At),cn[3]=Math.max(cn[3],1e-5);const Hr=new ah(cn[0]/cn[3],cn[1]/cn[3],cn[2]/cn[3]);cn[0]=zr,cn[1]=jr,cn[2]=Gr.top,cn[3]=1,Bn(cn,cn,At),cn[3]=Math.max(cn[3],1e-5);const Vr=new ah(cn[0]/cn[3],cn[1]/cn[3],cn[2]/cn[3]);Zn.push(Hr),Kn.push(Vr)}qn.push(Zn),Tn.push(Kn)}return[qn,Tn]}(Ee,Oe,Ve,tt,it,at,ht,zt,nn):function(Qt,ln,It,Kt,At){const kt=[],un=[],pn=At[8]*ln,er=At[9]*ln,qn=At[10]*ln,Tn=At[11]*ln,cn=At[8]*It,Rr=At[9]*It,Zn=At[10]*It,Kn=At[11]*It;for(const wr of Qt){const zr=[],jr=[];for(const Gr of wr){const Hr=Gr.x+Kt.x,Vr=Gr.y+Kt.y,Zi=At[0]*Hr+At[4]*Vr+At[12],so=At[1]*Hr+At[5]*Vr+At[13],je=At[2]*Hr+At[6]*Vr+At[14],qe=At[3]*Hr+At[7]*Vr+At[15],Vt=Zi+pn,_n=so+er,An=je+qn,Cn=Math.max(qe+Tn,1e-5),Jn=Zi+cn,yr=so+Rr,ii=je+Zn,oi=Math.max(qe+Kn,1e-5);zr.push(new ah(Vt/Cn,_n/Cn,An/Cn)),jr.push(new ah(Jn/oi,yr/oi,ii/oi))}kt.push(zr),un.push(jr)}return[kt,un]}(Ee,Oe,Ve,tt,it)}(b,f,q,$,L,w,ye,Y,re,b.center.lat,u.tileID.canonical),Ie=u.queryGeometry;return function(he,Ee,Oe){let Ve=1/0;ur(Oe,Ee)&&(Ve=K(Oe,Ee[0]));for(let tt=0;tt<Ee.length;tt++){const it=Ee[tt],at=he[tt];for(let ht=0;ht<it.length-1;ht++){const zt=it[ht],nn=[zt,it[ht+1],at[ht+1],at[ht],zt];hr(Oe,nn)&&(Ve=Math.min(Ve,K(Oe,nn)))}}return Ve!==1/0&&Ve}(be,Le,Ie.isPointQuery()?Ie.screenBounds:Ie.screenGeometry)}},line:class extends va{constructor(u,o,l,f){const g=CC();super(u,g,o,l,f),g.layout&&(this.layout=new Gd(g.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof vp,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(u,o){super.recalculate(u,o),this.paint._values["line-floorwidth"]=(()=>{if(Aw)return Aw;const l=CC();return Aw=new ese(l.paint.properties["line-width"].specification),Aw.useIntegerZoom=!0,Aw})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Yt(u)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(u,o,l){const f=xa(this);return{config:new ed(this,{zoom:o,lut:l}),defines:f,overrideFog:!1}}queryRadius(u){const o=u,l=nV(Tr("line-width",this,o),Tr("line-gap-width",this,o)),f=Tr("line-offset",this,o);return l/2+Math.abs(f)+Ui(this.paint.get("line-translate"))}queryIntersectsFeature(u,o,l,f,g,b){if(u.queryGeometry.isAboveHorizon)return!1;const w=ai(u.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),R=u.pixelToTileUnitsFactor/2*nV(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),P=this.paint.get("line-offset").evaluate(o,l);return P&&(f=function(L,$){const q=[],Y=new mn(0,0);for(let ne=0;ne<L.length;ne++){const re=L[ne],de=[];for(let ye=0;ye<re.length;ye++){const be=re[ye],Le=re[ye+1],Ie=ye===0?Y:be.sub(re[ye-1])._unit()._perp(),he=ye===re.length-1?Y:Le.sub(be)._unit()._perp(),Ee=Ie._add(he)._unit();Ee._mult(1/(Ee.x*he.x+Ee.y*he.y)),de.push(Ee._mult($)._add(be))}q.push(de)}return q}(f,P*u.pixelToTileUnitsFactor)),function(L,$,q){for(let Y=0;Y<$.length;Y++){const ne=$[Y];if(L.length>=3){for(let re=0;re<ne.length;re++)if(pi(L,ne[re]))return!0}if(Lr(L,ne,q))return!0}return!1}(w,f,R)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(u){return!this.hasElevatedBuckets}hasElevation(){return this.layout&&this.layout.get("line-elevation-reference")!=="none"}},symbol:$C,background:class extends va{constructor(u,o,l,f){super(u,{layout:WV||(WV=new To({visibility:new yn(_t.layout_background.visibility)})),paint:GV||(GV=new To({"background-pitch-alignment":new yn(_t.paint_background["background-pitch-alignment"]),"background-color":new yn(_t.paint_background["background-color"]),"background-pattern":new yn(_t.paint_background["background-pattern"]),"background-opacity":new yn(_t.paint_background["background-opacity"]),"background-emissive-strength":new yn(_t.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(u,o,l){return{overrideFog:!1}}is3D(u){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:QV,"raster-particle":i$,sky:class extends va{constructor(u,o,l,f){super(u,{layout:t$||(t$=new To({visibility:new yn(_t.layout_sky.visibility)})),paint:n$||(n$=new To({"sky-type":new yn(_t.paint_sky["sky-type"]),"sky-atmosphere-sun":new yn(_t.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new yn(_t.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new yn(_t.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new yn(_t.paint_sky["sky-gradient-radius"]),"sky-gradient":new ic(_t.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new yn(_t.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new yn(_t.paint_sky["sky-atmosphere-color"]),"sky-opacity":new yn(_t.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="sky-gradient"?this._updateColorRamp():u!=="sky-atmosphere-sun"&&u!=="sky-atmosphere-halo-color"&&u!=="sky-atmosphere-color"&&u!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Fy({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(u){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=u.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(u,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,b=u.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&Ir("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?SI(w.azimuthal,90-w.polar,o):SI(f[0],90-f[1],o)}const l=this.paint.get("sky-gradient-center");return SI(l[0],90-l[1],o)}isSky(){return!0}markSkyboxValid(u){this._skyboxInvalidated=!1,this._lightPosition=u.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const u=this.paint.get("sky-type");return u==="atmosphere"?["skyboxCapture","skybox"]:u==="gradient"?["skyboxGradient"]:null}},slot:class extends va{constructor(u,o,l,f){super(u,{paint:r$||(r$=new To({}))},o,null)}},model:class extends va{constructor(u,o,l,f){super(u,{layout:f$||(f$=new To({visibility:new yn(_t.layout_model.visibility),"model-id":new Ln(_t.layout_model["model-id"])})),paint:p$||(p$=new To({"model-opacity":new Ln(_t.paint_model["model-opacity"]),"model-rotation":new Ln(_t.paint_model["model-rotation"]),"model-scale":new Ln(_t.paint_model["model-scale"]),"model-translation":new Ln(_t.paint_model["model-translation"]),"model-color":new Ln(_t.paint_model["model-color"]),"model-color-mix-intensity":new Ln(_t.paint_model["model-color-mix-intensity"]),"model-type":new yn(_t.paint_model["model-type"]),"model-cast-shadows":new yn(_t.paint_model["model-cast-shadows"]),"model-receive-shadows":new yn(_t.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new yn(_t.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ln(_t.paint_model["model-emissive-strength"]),"model-roughness":new Ln(_t.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ln(_t.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new yn(_t.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new yn(_t.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ln({type:"string",default:"default","property-type":"data-driven"})}))},o,l,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new MI(u)}getProgramIds(){return["model"]}is3D(u){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(u){return u instanceof ZC?xn-1:0}queryIntersectsFeature(u,o,l,f,g,b){if(!this.modelManager)return!1;const w=this.modelManager,R=u.tile.getBucket(this);if(!(R&&R instanceof MI))return!1;for(const P in R.instancesPerModel){const L=R.instancesPerModel[P],$=o.id!==void 0?o.id:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0;if(L.idToFeaturesIndex.hasOwnProperty($)){const q=L.features[L.idToFeaturesIndex[$]],Y=w.getModel(P,this.scope);if(!Y)return!1;let ne=k();const re=new me(0,0),de=R.canonical;let ye=Number.MAX_VALUE;for(let be=0;be<q.instancedDataCount;++be){const Le=16*(q.instancedDataOffset+be),Ie=L.instancedDataArray.float32,he=[Ie[Le+4],Ie[Le+5],Ie[Le+6]];x$(de,re,Ie[Le],0|Ie[Le+1]),m$(ne,Y,b,re,q.rotation,q.scale,he,!1,!1,!1),b.projection.name==="globe"&&(ne=EI(ne,b));const Ee=V([],b.projMatrix,ne),Oe=u.queryGeometry,Ve=c$(Oe.isPointQuery()?Oe.screenBounds:Oe.screenGeometry,b,Ee,Y.aabb);Ve!=null&&(ye=Math.min(Ve,ye))}return ye!==Number.MAX_VALUE&&ye}}return!1}_handleOverridablePaintPropertyUpdate(u,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven()||u!=="model-color"&&u!=="model-color-mix-intensity"&&u!=="model-rotation"&&u!=="model-scale"&&u!=="model-translation"&&u!=="model-emissive-strength")}_isPropertyZoomDependent(u){const o=this._transitionablePaint._values[u];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof is}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends va{constructor(u,o,l,f){super(u,{layout:gw||(gw=new To({"clip-layer-types":new yn(_t.layout_clip["clip-layer-types"]),"clip-layer-scope":new yn(_t.layout_clip["clip-layer-scope"])})),paint:pC||(pC=new To({}))},o,l,f)}recalculate(u,o){super.recalculate(u,o)}createBucket(u){return new yw(u)}is3D(u){return!0}}};class tae{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class nae{constructor(){this.tasks={},this.taskQueue=[],sr(["process"],this),this.invoker=new tae(this.process),this.nextId=0}add(o,l){const f=this.nextId++,g=function({type:b,isSymbolTile:w,zoom:R}){return R=R||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-R:b==="maybePrepare"&&w?400-R:500:200-R:100-R}(l);if(g===0){try{o()}finally{}return null}return this.tasks[f]={fn:o,metadata:l,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const l=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let o=null,l=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<l&&(l=b.priority,o=g)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class b${constructor(o,l,f){this.target=o,this.parent=l,this.mapId=f,this.callbacks={},this.cancelCallbacks={},sr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new nae}send(o,l,f,g,b=!1,w){const R=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=w,this.callbacks[R]=f);const P=new Set;return this.target.postMessage({id:R,type:o,hasCallback:!!f,targetMapId:g,mustQueue:b,sourceMapId:this.mapId,data:Gu(l,P)},P),{cancel:()=>{f&&delete this.callbacks[R],this.target.postMessage({id:R,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(o){const l=o.data;if(!l)return;const f=l.id;if(f&&(!l.targetMapId||this.mapId===l.targetMapId))if(l.type==="<cancel>"){const g=this.cancelCallbacks[f];delete this.cancelCallbacks[f],g&&g.cancel()}else if(l.mustQueue||ji(self)){const g=this.callbacks[f],b=this.scheduler.add(()=>this.processTask(f,l),g&&g.metadata||{type:"message"});b&&(this.cancelCallbacks[f]=b)}else this.processTask(f,l)}processTask(o,l){if(delete this.cancelCallbacks[o],l.type==="<response>"){const f=this.callbacks[o];delete this.callbacks[o],f&&(l.error?f(qd(l.error)):f(null,qd(l.data)))}else{const f=new Set,g=l.hasCallback?(w,R)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:w?Gu(w):null,data:Gu(R,f)},f)}:()=>{},b=qd(l.data);if(this.parent[l.type])this.parent[l.type](l.sourceMapId,b,g);else if(this.parent.getWorkerSource){const w=l.type.split("."),{source:R,scope:P}=b;this.parent.getWorkerSource(l.sourceMapId,w[0],R,P)[w[1]](b,g)}else g(new Error(`Could not find function ${l.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Vw={workerUrl:"",workerClass:null,workerParams:void 0};const PI="mapboxgl_preloaded_worker_pool";class K_{constructor(){this.active={}}acquire(o,l=K_.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<l;)this.workers.push(Vw.workerClass!=null?new Vw.workerClass:new self.Worker(Vw.workerUrl,Vw.workerParams));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[PI]}numActive(){return Object.keys(this.active).length}}K_.workerCount=2;class ab{constructor(o,l,f="Worker",g=K_.workerCount){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=dn();const b=this.workerPool.acquire(this.id,g);for(let w=0;w<b.length;w++){const R=new ab.Actor(b[w],l,this.id);R.name=`${f} ${w}`,this.actors.push(R)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,l,f){vt(this.actors,(g,b)=>{g.send(o,l,b)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}let $w,II;function KC(){return $w||($w=new K_),$w}ab.Actor=b$;const kI=new bi(0,0,0),OI={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},LI={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},QC={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},rae={PAINT_ORDER_FILL_AND_STROKE:1},Uw={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},w$={MASK_TYPE_LUMINANCE:1};function iae(u,o,l){u===1&&o.icons.push(function(f,g){return function(b){if(b.usvg_tree.height||(b.usvg_tree.height=b.usvg_tree.width),!b.metadata)return b;const{metadata:w}=b;if(w.content_area){const{content_area:R}=w;R.top==null&&(R.top=R.left),R.width==null&&(R.width=b.usvg_tree.width),R.height==null&&(R.height=R.width)}return w.stretch_x&&w.stretch_x.length&&S$(w,"x"),w.stretch_y&&w.stretch_y.length&&S$(w,"y"),b}(f.readFields(oae,{name:void 0},g))}(l,l.readVarint()+l.pos))}function S$(u,o){const l=[],f=u[`stretch_${o}`];let g=null;for(let b=0;b<f.length;b++)g===null?g=l.length===0?f[0]:l[l.length-1][1]+f[b]:(l.push([g,g+f[b]]),g=null);u[`stretch_${o}_areas`]=l}function oae(u,o,l){u===1?o.name=l.readString():u===2?o.metadata=function(f,g){return f.readFields(sae,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)}(l,l.readVarint()+l.pos):u===3&&(o.usvg_tree=function(f,g){return f.readFields(cae,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)}(l,l.readVarint()+l.pos),o.data="usvg_tree")}function sae(u,o,l){u===1?o.stretch_x=l.readPackedVarint():u===2?o.stretch_y=l.readPackedVarint():u===3?o.content_area=function(f,g){return f.readFields(aae,{left:0},g)}(l,l.readVarint()+l.pos):u===4&&o.variables.push(function(f,g){return f.readFields(lae,{name:void 0},g)}(l,l.readVarint()+l.pos))}function aae(u,o,l){u===1?o.left=l.readVarint():u===2?o.width=l.readVarint():u===3?o.top=l.readVarint():u===4&&(o.height=l.readVarint())}function lae(u,o,l){u===1?o.name=l.readString():u===2&&(o.rgb_color=tM(l.readVarint()),o.value="rgb_color")}function cae(u,o,l){u===1?o.width=o.height=l.readVarint():u===2?o.height=l.readVarint():u===3?o.children.push(JC(l,l.readVarint()+l.pos)):u===4?o.linear_gradients.push(function(f,g){return f.readFields(gae,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)}(l,l.readVarint()+l.pos)):u===5?o.radial_gradients.push(function(f,g){return f.readFields(vae,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)}(l,l.readVarint()+l.pos)):u===7?o.clip_paths.push(function(f,g){return f.readFields(_ae,{children:[]},g)}(l,l.readVarint()+l.pos)):u===8&&o.masks.push(function(f,g){const b=f.readFields(xae,{left:0,width:20,mask_type:w$.MASK_TYPE_LUMINANCE,children:[]},g);return b.height==null&&(b.height=b.width),b.top==null&&(b.top=b.left),b}(l,l.readVarint()+l.pos))}function JC(u,o){return u.readFields(uae,{},o)}function uae(u,o,l){u===1?(o.group=function(f,g){return f.readFields(dae,{opacity:255,children:[]},g)}(l,l.readVarint()+l.pos),o.node="group"):u===2&&(o.path=function(f,g){return f.readFields(fae,{paint_order:1,commands:[],step:1,diffs:[],rule:OI.PATH_RULE_NON_ZERO},g)}(l,l.readVarint()+l.pos),o.node="path")}function dae(u,o,l){u===1?o.transform=eM(l,l.readVarint()+l.pos):u===2?o.opacity=l.readVarint():u===5?o.clip_path_idx=l.readVarint():u===6?o.mask_idx=l.readVarint():u===7&&o.children.push(JC(l,l.readVarint()+l.pos))}function eM(u,o){return u.readFields(hae,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},o)}function hae(u,o,l){u===1?o.sx=l.readFloat():u===2?o.ky=l.readFloat():u===3?o.kx=l.readFloat():u===4?o.sy=l.readFloat():u===5?o.tx=l.readFloat():u===6&&(o.ty=l.readFloat())}function fae(u,o,l){u===1?o.fill=function(f,g){return f.readFields(pae,{rgb_color:kI,paint:"rgb_color",opacity:255},g)}(l,l.readVarint()+l.pos):u===2?o.stroke=function(f,g){return f.readFields(mae,{rgb_color:kI,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)}(l,l.readVarint()+l.pos):u===3?o.paint_order=l.readVarint():u===5?l.readPackedVarint(o.commands):u===6?o.step=l.readFloat():u===7?l.readPackedSVarint(o.diffs):u===8&&(o.rule=l.readVarint())}function pae(u,o,l){u===1?(o.rgb_color=tM(l.readVarint()),o.paint="rgb_color"):u===2?(o.linear_gradient_idx=l.readVarint(),o.paint="linear_gradient_idx"):u===3?(o.radial_gradient_idx=l.readVarint(),o.paint="radial_gradient_idx"):u===5&&(o.opacity=l.readVarint())}function tM(u){return new bi((u>>16&255)/255,(u>>8&255)/255,(255&u)/255,1)}function mae(u,o,l){u===1?(o.rgb_color=tM(l.readVarint()),o.paint="rgb_color"):u===2?(o.linear_gradient_idx=l.readVarint(),o.paint="linear_gradient_idx"):u===3?(o.radial_gradient_idx=l.readVarint(),o.paint="radial_gradient_idx"):u===5?l.readPackedFloat(o.dasharray):u===6?o.dashoffset=l.readFloat():u===7?o.miterlimit=l.readFloat():u===8?o.opacity=l.readVarint():u===9?o.width=l.readFloat():u===10?o.linecap=l.readVarint():u===11&&(o.linejoin=l.readVarint())}function gae(u,o,l){u===1?o.transform=eM(l,l.readVarint()+l.pos):u===2?o.spread_method=l.readVarint():u===3?o.stops.push(T$(l,l.readVarint()+l.pos)):u===4?o.x1=l.readFloat():u===5?o.y1=l.readFloat():u===6?o.x2=l.readFloat():u===7&&(o.y2=l.readFloat())}function T$(u,o){return u.readFields(yae,{offset:0,opacity:255,rgb_color:kI},o)}function yae(u,o,l){u===1?o.offset=l.readFloat():u===2?o.opacity=l.readVarint():u===3&&(o.rgb_color=tM(l.readVarint()))}function vae(u,o,l){u===1?o.transform=eM(l,l.readVarint()+l.pos):u===2?o.spread_method=l.readVarint():u===3?o.stops.push(T$(l,l.readVarint()+l.pos)):u===4?o.cx=l.readFloat():u===5?o.cy=l.readFloat():u===6?o.r=l.readFloat():u===7?o.fx=l.readFloat():u===8?o.fy=l.readFloat():u===9&&(o.fr=l.readFloat())}function _ae(u,o,l){u===1?o.transform=eM(l,l.readVarint()+l.pos):u===2?o.clip_path_idx=l.readVarint():u===3&&o.children.push(JC(l,l.readVarint()+l.pos))}function xae(u,o,l){u===1?o.left=o.top=l.readFloat():u===2?o.width=o.height=l.readFloat():u===3?o.top=l.readFloat():u===4?o.height=l.readFloat():u===5?o.mask_type=l.readVarint():u===6?o.mask_idx=l.readVarint():u===7&&o.children.push(JC(l,l.readVarint()+l.pos))}class bae{static calculate(o={},l=[]){const f=new Map,g=new Map;if(Object.keys(o).length===0)return f;l.forEach(b=>{g.set(b.name,b.rgb_color||new bi(0,0,0))});for(const[b,w]of Object.entries(o))g.has(b)?f.set(g.get(b).toStringPremultipliedAlpha(),w):console.warn(`Ignoring unknown image variable "${b}"`);return f}}function lb(u,o=255,l){const f=o/255,g=u.toStringPremultipliedAlpha(),b=l.has(g)?l.get(g).clone():u.clone();return b.a*=f,b.toString()}function qw(u,o){if(!sl()){const l=document.createElement("canvas");return l.width=u,l.height=o,l}return new OffscreenCanvas(u,o)}function wae(u,o){const l=bae.calculate(o.params,u.metadata?u.metadata.variables:[]),f=u.usvg_tree,g=f.width,b=f.height,w=o.transform?o.transform:new DOMMatrix,R=Math.max(1,Math.round(g*w.a)),P=Math.max(1,Math.round(b*w.d)),L=new DOMMatrix([R/g,0,0,P/b,0,0]),$=qw(R,P).getContext("2d");return zI($,L,f,f,l),$.getImageData(0,0,R,P)}function zI(u,o,l,f,g){for(const b of f.children)E$(u,o,l,b,g)}function E$(u,o,l,f,g){f.group?(u.save(),function(b,w,R,P,L){const $=P.mask_idx!=null?R.masks[P.mask_idx]:null,q=P.clip_path_idx!=null?R.clip_paths[P.clip_path_idx]:null;if(P.transform&&(w=nM(P.transform).preMultiplySelf(w)),!function(re,de,ye){return re.opacity!==255||de||ye}(P,q!=null,$!=null))return void zI(b,w,R,P,L);const Y=qw(b.canvas.width,b.canvas.height),ne=Y.getContext("2d");zI(ne,w,R,P,L),q&&I$(ne,w,R,q),$&&k$(ne,w,R,$,L),b.globalAlpha=P.opacity/255,b.drawImage(Y,0,0)}(u,o,l,f.group,g),u.restore()):f.path&&(u.save(),function(b,w,R,P,L){const $=O$(P);b.setTransform(w),P.paint_order===rae.PAINT_ORDER_FILL_AND_STROKE?(C$(b,R,P,$,L),A$(b,R,P,$,L)):(A$(b,R,P,$,L),C$(b,R,P,$,L))}(u,o,l,f.path,g),u.restore())}function C$(u,o,l,f,g){const b=l.fill;if(!b)return;const w=b.opacity/255;switch(b.paint){case"rgb_color":u.fillStyle=lb(b.rgb_color,b.opacity,g);break;case"linear_gradient_idx":u.fillStyle=R$(u,o.linear_gradients[b.linear_gradient_idx],w,g);break;case"radial_gradient_idx":u.fillStyle=D$(u,o.radial_gradients[b.radial_gradient_idx],w,g)}u.fill(f,M$(l))}function M$(u){return u.rule===OI.PATH_RULE_NON_ZERO?"nonzero":u.rule===OI.PATH_RULE_EVEN_ODD?"evenodd":void 0}function A$(u,o,l,f,g){const b=l.stroke;if(!b)return;u.lineWidth=b.width,u.miterLimit=b.miterlimit,u.setLineDash(b.dasharray),u.lineDashOffset=b.dashoffset;const w=b.opacity/255;switch(b.paint){case"rgb_color":u.strokeStyle=lb(b.rgb_color,b.opacity,g);break;case"linear_gradient_idx":u.strokeStyle=R$(u,o.linear_gradients[b.linear_gradient_idx],w,g);break;case"radial_gradient_idx":u.strokeStyle=D$(u,o.radial_gradients[b.radial_gradient_idx],w,g)}switch(b.linejoin){case QC.LINE_JOIN_MITER_CLIP:case QC.LINE_JOIN_MITER:u.lineJoin="miter";break;case QC.LINE_JOIN_ROUND:u.lineJoin="round";break;case QC.LINE_JOIN_BEVEL:u.lineJoin="bevel"}switch(b.linecap){case LI.LINE_CAP_BUTT:u.lineCap="butt";break;case LI.LINE_CAP_ROUND:u.lineCap="round";break;case LI.LINE_CAP_SQUARE:u.lineCap="square"}u.stroke(f)}function R$(u,o,l,f){if(o.stops.length===1){const Y=o.stops[0];return lb(Y.rgb_color,Y.opacity*l,f)}const g=nM(o.transform),{x1:b,y1:w,x2:R,y2:P}=o,L=g.transformPoint(new DOMPoint(b,w)),$=g.transformPoint(new DOMPoint(R,P)),q=u.createLinearGradient(L.x,L.y,$.x,$.y);for(const Y of o.stops)q.addColorStop(Y.offset,lb(Y.rgb_color,Y.opacity*l,f));return q}function D$(u,o,l,f){if(o.stops.length===1){const Y=o.stops[0];return lb(Y.rgb_color,Y.opacity*l,f)}const g=nM(o.transform),{fx:b,fy:w,cx:R,cy:P}=o,L=g.transformPoint(new DOMPoint(b,w)),$=g.transformPoint(new DOMPoint(R,P)),q=u.createRadialGradient(L.x,L.y,0,$.x,$.y,o.r*((g.a+g.d)/2));for(const Y of o.stops)q.addColorStop(Y.offset,lb(Y.rgb_color,Y.opacity*l,f));return q}function P$(u,o,l,f){const g=f.transform?nM(f.transform).preMultiplySelf(o):o,b=qw(u.canvas.width,u.canvas.height),w=b.getContext("2d");for(const P of f.children)if(P.group)P$(w,g,l,P.group);else if(P.path){const L=P.path,$=new Path2D;$.addPath(O$(L),g),w.fill($,M$(L))}const R=f.clip_path_idx!=null?l.clip_paths[f.clip_path_idx]:null;R&&I$(w,g,l,R),u.globalCompositeOperation="source-over",u.drawImage(b,0,0)}function I$(u,o,l,f){const g=qw(u.canvas.width,u.canvas.height);P$(g.getContext("2d"),o,l,f),u.globalCompositeOperation="destination-in",u.drawImage(g,0,0)}function k$(u,o,l,f,g){if(f.children.length===0)return;const b=f.mask_idx!=null?l.masks[f.mask_idx]:null;b&&k$(u,o,l,b,g);const w=u.canvas.width,R=u.canvas.height,P=qw(w,R),L=P.getContext("2d"),$=f.width,q=f.height,Y=f.left,ne=f.top,re=new Path2D,de=new Path2D;de.rect(Y,ne,$,q),re.addPath(de,o),L.clip(re);for(const Le of f.children)E$(L,o,l,Le,g);const ye=L.getImageData(0,0,w,R),be=ye.data;if(f.mask_type===w$.MASK_TYPE_LUMINANCE)for(let Le=0;Le<be.length;Le+=4)be[Le+3]=be[Le+3]/255*(.2126*be[Le]+.7152*be[Le+1]+.0722*be[Le+2]);L.putImageData(ye,0,0),u.globalCompositeOperation="destination-in",u.drawImage(P,0,0)}function nM(u){return u?new DOMMatrix([u.sx,u.ky,u.kx,u.sy,u.tx,u.ty]):new DOMMatrix}function O$(u){const o=new Path2D,l=u.step;let f=u.diffs[0]*l,g=u.diffs[1]*l;o.moveTo(f,g);for(let b=0,w=2;b<u.commands.length;b++)switch(u.commands[b]){case Uw.PATH_COMMAND_MOVE:f+=u.diffs[w++]*l,g+=u.diffs[w++]*l,o.moveTo(f,g);break;case Uw.PATH_COMMAND_LINE:f+=u.diffs[w++]*l,g+=u.diffs[w++]*l,o.lineTo(f,g);break;case Uw.PATH_COMMAND_QUAD:{const R=f+u.diffs[w++]*l,P=g+u.diffs[w++]*l;f=R+u.diffs[w++]*l,g=P+u.diffs[w++]*l,o.quadraticCurveTo(R,P,f,g);break}case Uw.PATH_COMMAND_CUBIC:{const R=f+u.diffs[w++]*l,P=g+u.diffs[w++]*l,L=R+u.diffs[w++]*l,$=P+u.diffs[w++]*l;f=L+u.diffs[w++]*l,g=$+u.diffs[w++]*l,o.bezierCurveTo(R,P,L,$,f,g);break}case Uw.PATH_COMMAND_CLOSE:o.closePath()}return o}class rM{constructor(o){this.capacity=o,this.cache=new Map}get(o){if(!this.cache.has(o))return;const l=this.cache.get(o);return this.cache.delete(o),this.cache.set(o,l),l}put(o,l){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(o,l)}delete(o){this.cache.delete(o)}}zn(rM,"LRUCache");class FI{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(o){return new qs(o,o.data)}getFromCache(o,l,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new rM(150)),this.cacheMap.get(f).get(Xd(o.toString(),l))}setInCache(o,l,f,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new rM(150));const b=this.cacheDependenciesMap.get(g),w=Xd(o.id.toString(),f);b.get(w)||b.set(w,new Set);const R=this.cacheMap.get(g),P=o.toString();b.get(w).add(P),R.put(Xd(o.toString(),f),l)}removeImagesFromCacheByIds(o,l,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const g=this.cacheMap.get(f),b=this.cacheDependenciesMap.get(f);for(const w of o){const R=Xd(w.toString(),l);if(b.has(R)){for(const P of b.get(R))g.delete(P);b.delete(R)}}}rasterize(o,l,f,g,b=wae){const w=this.getFromCache(o,f,g);if(w)return w.clone();const R=b(l.icon,o.options),P=FI._getImage(R);return this.setInCache(o,P,f,g),P.clone()}}class L${constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,l){const f=this.toIdx(o,l);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,l){return this.leaves[this.toIdx(o,l)]}toIdx(o,l){return l*this.size+o}}function z$(u,o,l,f){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(l[w]<u[w]||l[w]>o[w])return null}else{const R=1/f[w];let P=(u[w]-l[w])*R,L=(o[w]-l[w])*R;if(P>L){const $=P;P=L,L=$}if(P>g&&(g=P),L<b&&(b=L),g>b)return null}return g}function F$(u,o,l,f,g,b,w,R,P,L,$){const q=f-u,Y=g-o,ne=b-l,re=w-u,de=R-o,ye=P-l,be=$[1]*ye-$[2]*de,Le=$[2]*re-$[0]*ye,Ie=$[0]*de-$[1]*re,he=q*be+Y*Le+ne*Ie;if(Math.abs(he)<1e-15)return null;const Ee=1/he,Oe=L[0]-u,Ve=L[1]-o,tt=L[2]-l,it=(Oe*be+Ve*Le+tt*Ie)*Ee;if(it<0||it>1)return null;const at=Ve*ne-tt*Y,ht=tt*q-Oe*ne,zt=Oe*Y-Ve*q,nn=($[0]*at+$[1]*ht+$[2]*zt)*Ee;return nn<0||it+nn>1?null:(re*at+de*ht+ye*zt)*Ee}function B$(u,o,l){return(u-o)/(l-o)}function j$(u,o,l,f,g,b,w,R,P){const L=1<<l,$=b-f,q=w-g,Y=(u+1)/L*$+f,ne=(o+0)/L*q+g,re=(o+1)/L*q+g;R[0]=(u+0)/L*$+f,R[1]=ne,P[0]=Y,P[1]=re}class N${constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(b){const w=Math.ceil(Math.log2(b.dim/8)),R=[];let P=Math.ceil(Math.pow(2,w));const L=1/P,$=(ne,re,de,ye,be)=>{const Le=ye?1:0,Ie=(ne+1)*de-Le,he=re*de,Ee=(re+1)*de-Le;be[0]=ne*de,be[1]=he,be[2]=Ie,be[3]=Ee};let q=new L$(P);const Y=[];for(let ne=0;ne<P*P;ne++){$(ne%P,Math.floor(ne/P),L,!1,Y);const re=Zy(Y[0],Y[1],b),de=Zy(Y[2],Y[1],b),ye=Zy(Y[2],Y[3],b),be=Zy(Y[0],Y[3],b);q.minimums.push(Math.min(re,de,ye,be)),q.maximums.push(Math.max(re,de,ye,be)),q.leaves.push(1)}for(R.push(q),P/=2;P>=1;P/=2){const ne=R[R.length-1];q=new L$(P);for(let re=0;re<P*P;re++){$(re%P,Math.floor(re/P),2,!0,Y);const de=ne.getElevation(Y[0],Y[1]),ye=ne.getElevation(Y[2],Y[1]),be=ne.getElevation(Y[2],Y[3]),Le=ne.getElevation(Y[0],Y[3]),Ie=ne.isLeaf(Y[0],Y[1]),he=ne.isLeaf(Y[2],Y[1]),Ee=ne.isLeaf(Y[2],Y[3]),Oe=ne.isLeaf(Y[0],Y[3]),Ve=Math.min(de.min,ye.min,be.min,Le.min),tt=Math.max(de.max,ye.max,be.max,Le.max),it=Ie&&he&&Ee&&Oe;q.maximums.push(tt),q.minimums.push(Ve),q.leaves.push(tt-Ve<=5&&it?1:0)}R.push(q)}return R}(this.dem),f=l.length-1,g=l[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(l,0,0,f,0)}raycastRoot(o,l,f,g,b,w,R=1){return z$([o,l,-100],[f,g,this.maximums[0]*R],b,w)}raycast(o,l,f,g,b,w,R=1){if(!this.nodeCount)return null;const P=this.raycastRoot(o,l,f,g,b,w,R);if(P==null)return null;const L=[],$=[],q=[],Y=[],ne=[{idx:0,t:P,nodex:0,nodey:0,depth:0}];for(;ne.length>0;){const{idx:re,t:de,nodex:ye,nodey:be,depth:Le}=ne.pop();if(this.leaves[re]){j$(ye,be,Le,o,l,f,g,q,Y);const he=1<<Le,Ee=(ye+0)/he,Oe=(ye+1)/he,Ve=(be+0)/he,tt=(be+1)/he,it=Zy(Ee,Ve,this.dem)*R,at=Zy(Oe,Ve,this.dem)*R,ht=Zy(Oe,tt,this.dem)*R,zt=Zy(Ee,tt,this.dem)*R,nn=F$(q[0],q[1],it,Y[0],q[1],at,Y[0],Y[1],ht,b,w),Xt=F$(Y[0],Y[1],ht,q[0],Y[1],zt,q[0],q[1],it,b,w),Qt=Math.min(nn!==null?nn:Number.MAX_VALUE,Xt!==null?Xt:Number.MAX_VALUE);if(Qt!==Number.MAX_VALUE)return Qt;{const ln=He([],b,w,de);if(V$(it,at,zt,ht,B$(ln[0],q[0],Y[0]),B$(ln[1],q[1],Y[1]))>=ln[2])return de}continue}let Ie=0;for(let he=0;he<this._siblingOffset.length;he++){j$((ye<<1)+this._siblingOffset[he][0],(be<<1)+this._siblingOffset[he][1],Le+1,o,l,f,g,q,Y),q[2]=-100,Y[2]=this.maximums[this.childOffsets[re]+he]*R;const Ee=z$(q,Y,b,w);if(Ee!=null){const Oe=Ee;L[he]=Oe;let Ve=!1;for(let tt=0;tt<Ie&&!Ve;tt++)Oe>=L[$[tt]]&&($.splice(tt,0,he),Ve=!0);Ve||($[Ie]=he),Ie++}}for(let he=0;he<Ie;he++){const Ee=$[he];ne.push({idx:this.childOffsets[re]+Ee,t:L[Ee],nodex:(ye<<1)+this._siblingOffset[Ee][0],nodey:(be<<1)+this._siblingOffset[Ee][1],depth:Le+1})}}return null}_addNode(o,l,f){return this.minimums.push(o),this.maximums.push(l),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,l,f,g,b){if(o[g].isLeaf(l,f)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,R=o[w];let P=0,L=0;for(let $=0;$<this._siblingOffset.length;$++){const q=2*l+this._siblingOffset[$][0],Y=2*f+this._siblingOffset[$][1],ne=R.getElevation(q,Y),re=R.isLeaf(q,Y),de=this._addNode(ne.min,ne.max,re);re&&(P|=1<<$),L||(L=de)}for(let $=0;$<this._siblingOffset.length;$++)P&1<<$||this._construct(o,2*l+this._siblingOffset[$][0],2*f+this._siblingOffset[$][1],w,L+$)}}function V$(u,o,l,f,g,b){return lr(lr(u,l,b),lr(o,f,b),g)}function Zy(u,o,l){const f=l.dim,g=Ze(u*f-.5,0,f-1),b=Ze(o*f-.5,0,f-1),w=Math.floor(g),R=Math.floor(b),P=Math.min(w+1,f-1),L=Math.min(R+1,f-1);return V$(l.get(w,R),l.get(P,R),l.get(w,L),l.get(P,L),g-w,b-R)}const Sae={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Tae(u,o,l){return(256*u*256+256*o+l)/10-1e4}function Eae(u,o,l){return 256*u+o+l/256-32768}class iM{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,l,f,g=!1){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Ir(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const b=this.dim=l.height-2,w=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.floatView=new Float32Array(l.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let P=0;P<b;P++)w[this._idx(-1,P)]=w[this._idx(0,P)],w[this._idx(b,P)]=w[this._idx(b-1,P)],w[this._idx(P,-1)]=w[this._idx(P,0)],w[this._idx(P,b)]=w[this._idx(P,b-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(b,-1)]=w[this._idx(b-1,0)],w[this._idx(-1,b)]=w[this._idx(0,b-1)],w[this._idx(b,b)]=w[this._idx(b-1,b-1)]}const R=f==="terrarium"?Eae:Tae;for(let P=0;P<w.length;++P){const L=4*P;this.floatView[P]=R(this.pixels[L],this.pixels[L+1],this.pixels[L+2])}this._timestamp=Dl.now()}_buildQuadTree(){this._tree=new N$(this)}get(o,l,f=!1){f&&(o=Ze(o,-1,this.dim),l=Ze(l,-1,this.dim));const g=this._idx(o,l);return this.floatView[g]}set(o,l,f){const g=this._idx(o,l),b=this.floatView[g];return this.floatView[g]=f,f-b}static getUnpackVector(o){return Sae[o]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}static pack(o,l){const f=[0,0,0,0],g=iM.getUnpackVector(l);let b=Math.floor((o+g[3])/g[2]);return f[2]=b%256,b=Math.floor(b/256),f[1]=b%256,b=Math.floor(b/256),f[0]=b,f}getPixels(){return new rw({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,l,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,b=l*this.dim+this.dim,w=f*this.dim,R=f*this.dim+this.dim;switch(l){case-1:g=b-1;break;case 1:b=g+1}switch(f){case-1:w=R-1;break;case 1:R=w+1}const P=-l*this.dim,L=-f*this.dim;for(let $=w;$<R;$++)for(let q=g;q<b;q++){const Y=4*this._idx(q,$),ne=4*this._idx(q+P,$+L);this.pixels[Y+0]=o.pixels[ne+0],this.pixels[Y+1]=o.pixels[ne+1],this.pixels[Y+2]=o.pixels[ne+2],this.pixels[Y+3]=o.pixels[ne+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Cae(u,o,l){u===1?o.headerLength=l.readFixed32():u===2?o.x=l.readVarint():u===3?o.y=l.readVarint():u===4?o.z=l.readVarint():u===5&&o.layers.push(function(f,g){return f.readFields(Pae,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(l,l.readVarint()+l.pos))}function Mae(u,o,l){u===1?(o.delta_filter=function(f,g){return f.readFields(Aae,{blockSize:0},g)}(l,l.readVarint()+l.pos),o.filter="delta_filter"):u===2?(l.readVarint(),o.filter="zigzag_filter"):u===3?(l.readVarint(),o.filter="bitshuffle_filter"):u===4&&(l.readVarint(),o.filter="byteshuffle_filter")}function Aae(u,o,l){u===1&&(o.blockSize=l.readVarint())}function Rae(u,o,l){u===1?(l.readVarint(),o.codec="gzip_data"):u===2?(l.readVarint(),o.codec="jpeg_image"):u===3?(l.readVarint(),o.codec="webp_image"):u===4&&(l.readVarint(),o.codec="png_image")}function Dae(u,o,l){let f=0,g=0;u===1?o.firstByte=l.readFixed64():u===2?o.lastByte=l.readFixed64():u===3?o.filters.push(function(b,w){return b.readFields(Mae,{},w)}(l,l.readVarint()+l.pos)):u===4?o.codec=function(b,w){return b.readFields(Rae,{},w)}(l,l.readVarint()+l.pos):u===5?g=l.readFloat():u===6?f=l.readFloat():u===7?o.bands.push(l.readString()):u===8?o.offset=l.readDouble():u===9&&(o.scale=l.readDouble()),o.offset===0&&(o.offset=g),o.scale===0&&(o.scale=f)}function Pae(u,o,l){u===1?o.version=l.readVarint():u===2?o.name=l.readString():u===3?o.units=l.readString():u===4?o.tileSize=l.readVarint():u===5?o.buffer=l.readVarint():u===6?o.pixelFormat=l.readVarint():u===7&&o.dataIndex.push(function(f,g){return f.readFields(Dae,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(l,l.readVarint()+l.pos))}function Iae(u,o,l){if(u===2)(function(f,g,b){f.readFields(kae,b,g)})(l,l.readVarint()+l.pos,o);else if(u===3)throw new Error("Not implemented")}function kae(u,o,l){if(u===1){let f=0;const g=l.readVarint()+l.pos;for(;l.pos<g;)o[f++]=l.readVarint()}}function Oae(u,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let l=o[3];for(let f=2;f>=1;f--){const g=f===1?1:0,b=f===2?1:0;for(let w=0;w<o[0];w++){const R=o[1]*w;for(let P=g;P<o[1];P++){const L=o[2]*(P+R);for(let $=b;$<o[2];$++){const q=o[3]*($+L);for(let Y=0;Y<o[3];Y++){const ne=q+Y;u[ne]+=u[ne-l]}}}}l*=o[f]}return u}function Lae(u){for(let o=0,l=u.length;o<l;o++)u[o]=u[o]>>>1^-(1&u[o]);return u}function zae(u,o){switch(o){case"uint32":return u;case"uint16":for(let l=0;l<u.length;l+=2){const f=u[l],g=u[l+1];u[l]=(240&f)>>4|(61440&f)>>8|(240&g)<<4|61440&g,u[l+1]=15&f|(3840&f)>>4|(15&g)<<8|(3840&g)<<4}return u;case"uint8":for(let l=0;l<u.length;l+=4){const f=u[l],g=u[l+1],b=u[l+2],w=u[l+3];u[l+0]=(192&f)>>6|(192&g)>>4|(192&b)>>2|192&w,u[l+1]=(48&f)>>4|(48&g)>>2|48&b|(48&w)<<2,u[l+2]=(12&f)>>2|12&g|(12&b)<<2|(12&w)<<4,u[l+3]=3&f|(3&g)<<2|(3&b)<<4|(3&w)<<6}return u;default:throw new Error(`Invalid pixel format, "${o}"`)}}zn(iM,"DEMData"),zn(N$,"DemMinMaxQuadTree",{omit:["dem"]});var sd=Uint8Array,Hw=Uint16Array,Fae=Int32Array,$$=new sd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),U$=new sd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bae=new sd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q$=function(u,o){for(var l=new Hw(31),f=0;f<31;++f)l[f]=o+=1<<u[f-1];var g=new Fae(l[30]);for(f=1;f<30;++f)for(var b=l[f];b<l[f+1];++b)g[b]=b-l[f]<<5|f;return{b:l,r:g}},H$=q$($$,2),W$=H$.b,jae=H$.r;W$[28]=258,jae[258]=28;for(var Nae=q$(U$,0).b,G$=new Hw(32768),Rs=0;Rs<32768;++Rs){var cb=(43690&Rs)>>1|(21845&Rs)<<1;G$[Rs]=((65280&(cb=(61680&(cb=(52428&cb)>>2|(13107&cb)<<2))>>4|(3855&cb)<<4))>>8|(255&cb)<<8)>>1}var Ww=function(u,o,l){for(var f=u.length,g=0,b=new Hw(o);g<f;++g)u[g]&&++b[u[g]-1];var w,R=new Hw(o);for(g=1;g<o;++g)R[g]=R[g-1]+b[g-1]<<1;w=new Hw(1<<o);var P=15-o;for(g=0;g<f;++g)if(u[g])for(var L=g<<4|u[g],$=o-u[g],q=R[u[g]-1]++<<$,Y=q|(1<<$)-1;q<=Y;++q)w[G$[q]>>P]=L;return w},Gw=new sd(288);for(Rs=0;Rs<144;++Rs)Gw[Rs]=8;for(Rs=144;Rs<256;++Rs)Gw[Rs]=9;for(Rs=256;Rs<280;++Rs)Gw[Rs]=7;for(Rs=280;Rs<288;++Rs)Gw[Rs]=8;var Y$=new sd(32);for(Rs=0;Rs<32;++Rs)Y$[Rs]=5;var Vae=Ww(Gw,9),$ae=Ww(Y$,5),BI=function(u){for(var o=u[0],l=1;l<u.length;++l)u[l]>o&&(o=u[l]);return o},Bf=function(u,o,l){var f=o/8|0;return(u[f]|u[f+1]<<8)>>(7&o)&l},jI=function(u,o){var l=o/8|0;return(u[l]|u[l+1]<<8|u[l+2]<<16)>>(7&o)},Uae=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],jf=function(u,o,l){var f=new Error(o||Uae[u]);if(f.code=u,Error.captureStackTrace&&Error.captureStackTrace(f,jf),!l)throw f;return f},qae=new sd(0),Hae=typeof TextDecoder<"u"&&new TextDecoder;try{Hae.decode(qae,{stream:!0})}catch{}const Wae={gzip_data:"gzip"};class ch extends Error{constructor(o){super(o),this.name="MRTError"}}const Gae={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},X$={uint32:1,uint16:2,uint8:4},Yae={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let NI;class oM{constructor(o=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){const l=this.layers[o];if(!l)throw new ch(`Layer '${o}' not found`);return l}getHeaderLength(o){const l=new Uint8Array(o),f=new DataView(o);if(l[0]!==13)throw new ch("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(o){const l=new Uint8Array(o),f=this.getHeaderLength(o);if(l.length<f)throw new ch(`Expected header with length >= ${f} but got buffer of length ${l.length}`);const g=function(b,w){return b.readFields(Cae,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new NI(l.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new ch(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const b of g.layers)this.layers[b.name]=new Z$(b,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const l=[],f=this.getLayer(o.layerName);for(let g of o.blockIndices){const b=f.dataIndex[g],w=b.firstByte-o.firstByte,R=b.lastByte-o.firstByte;if(f._blocksInProgress.has(g))continue;const P={layerName:f.name,firstByte:w,lastByte:R,pixelFormat:f.pixelFormat,blockIndex:g,blockShape:[b.bands.length].concat(f.bandShape),buffer:f.buffer,codec:b.codec.codec,filters:b.filters.map(L=>L.filter)};f._blocksInProgress.add(g),l.push(P)}return new K$(l,()=>{l.forEach(g=>f._blocksInProgress.delete(g.blockIndex))},(g,b)=>{if(l.forEach(w=>f._blocksInProgress.delete(w.blockIndex)),g)throw g;b.forEach(w=>{this.getLayer(w.layerName).processDecodedData(w)})})}}class Z${constructor({version:o,name:l,units:f,tileSize:g,pixelFormat:b,buffer:w,dataIndex:R},P){if(this.version=o,this.version!==1)throw new ch(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=l,this.units=f,this.tileSize=g,this.buffer=w,this.pixelFormat=Gae[b],this.dataIndex=R,this.bandShape=[g+2*w,g+2*w,X$[this.pixelFormat]],this._decodedBlocks=new rM(P?P.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return X$[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:o})=>o).flat()}processDecodedData(o){const l=o.blockIndex.toString();this._decodedBlocks.get(l)||this._decodedBlocks.put(l,o.data)}getBlockForBand(o){let l=0;switch(typeof o){case"string":for(const[f,g]of this.dataIndex.entries()){for(const[b,w]of g.bands.entries())if(w===o)return{bandIndex:l+b,blockIndex:f,blockBandIndex:b};l+=g.bands.length}break;case"number":for(const[f,g]of this.dataIndex.entries()){if(o>=l&&o<l+g.bands.length)return{bandIndex:o,blockIndex:f,blockBandIndex:o-l};l+=g.bands.length}break;default:throw new ch(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(o){let l=1/0,f=-1/0;const g=[],b=new Set;for(const w of o){const{blockIndex:R}=this.getBlockForBand(w);if(R<0)throw new ch(`Invalid band: ${JSON.stringify(w)}`);const P=this.dataIndex[R];g.includes(R)||g.push(R),b.add(R),l=Math.min(l,P.firstByte),f=Math.max(f,P.lastByte)}if(b.size>this.cacheSize)throw new ch(`Number of blocks to decode (${b.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:l,lastByte:f,blockIndices:g}}hasBand(o){const{blockIndex:l}=this.getBlockForBand(o);return l>=0}hasDataForBand(o){const{blockIndex:l}=this.getBlockForBand(o);return l>=0&&!!this._decodedBlocks.get(l.toString())}getBandView(o){const{blockIndex:l,blockBandIndex:f}=this.getBlockForBand(o);if(l<0)throw new ch(`Band not found: ${JSON.stringify(o)}`);const g=this._decodedBlocks.get(l.toString());if(!g)throw new ch(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const b=this.dataIndex[l],w=this.bandShape.reduce((L,$)=>L*$,1),R=f*w,P=g.subarray(R,R+w);return{data:P,bytes:new Uint8Array(P.buffer).subarray(P.byteOffset,P.byteOffset+P.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:b.offset,scale:b.scale}}}oM.setPbf=function(u){NI=u};class K${constructor(o,l,f){this.tasks=o,this._onCancel=l,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,l){this._finalized||(this._onComplete(o,l),this._finalized=!0)}}oM.performDecoding=function(u,o){const l=new Uint8Array(u);return Promise.all(o.tasks.map(f=>{const{layerName:g,firstByte:b,lastByte:w,pixelFormat:R,blockShape:P,blockIndex:L,filters:$,codec:q}=f,Y=l.subarray(b,w+1),ne=new Uint32Array(P[0]*P[1]*P[2]);let re;if(q!=="gzip_data")throw new ch(`Unhandled codec: ${q}`);return re=function(de,ye){if(!globalThis.DecompressionStream&&ye==="gzip_data")return Promise.resolve(((he=function(Ve){Ve[0]==31&&Ve[1]==139&&Ve[2]==8||jf(6,"invalid gzip data");var tt=Ve[3],it=10;4&tt&&(it+=2+(Ve[10]|Ve[11]<<8));for(var at=(tt>>3&1)+(tt>>4&1);at>0;at-=!Ve[it++]);return it+(2&tt)}(Ie=de))+8>Ie.length&&jf(6,"invalid gzip data"),function(Ve,tt,it,at){var ht=Ve.length;if(!ht||tt.f&&!tt.l)return it||new sd(0);var zt=!it,nn=zt||tt.i!=2,Xt=tt.i;zt&&(it=new sd(3*ht));var Qt,ln,It=function(jo){var po=it.length;if(jo>po){var io=new sd(Math.max(2*po,jo));io.set(it),it=io}},Kt=tt.f||0,At=tt.p||0,kt=tt.b||0,un=tt.l,pn=tt.d,er=tt.m,qn=tt.n,Tn=8*ht;do{if(!un){Kt=Bf(Ve,At,1);var cn=Bf(Ve,At+1,3);if(At+=3,!cn){var Rr=Ve[(je=4+((At+7)/8|0))-4]|Ve[je-3]<<8,Zn=je+Rr;if(Zn>ht){Xt&&jf(0);break}nn&&It(kt+Rr),it.set(Ve.subarray(je,Zn),kt),tt.b=kt+=Rr,tt.p=At=8*Zn,tt.f=Kt;continue}if(cn==1)un=Vae,pn=$ae,er=9,qn=5;else if(cn==2){var Kn=Bf(Ve,At,31)+257,wr=Bf(Ve,At+10,15)+4,zr=Kn+Bf(Ve,At+5,31)+1;At+=14;for(var jr=new sd(zr),Gr=new sd(19),Hr=0;Hr<wr;++Hr)Gr[Bae[Hr]]=Bf(Ve,At+3*Hr,7);At+=3*wr;var Vr=BI(Gr),Zi=(1<<Vr)-1,so=Ww(Gr,Vr);for(Hr=0;Hr<zr;){var je,qe=so[Bf(Ve,At,Zi)];if(At+=15&qe,(je=qe>>4)<16)jr[Hr++]=je;else{var Vt=0,_n=0;for(je==16?(_n=3+Bf(Ve,At,3),At+=2,Vt=jr[Hr-1]):je==17?(_n=3+Bf(Ve,At,7),At+=3):je==18&&(_n=11+Bf(Ve,At,127),At+=7);_n--;)jr[Hr++]=Vt}}var An=jr.subarray(0,Kn),Cn=jr.subarray(Kn);er=BI(An),qn=BI(Cn),un=Ww(An,er),pn=Ww(Cn,qn)}else jf(1);if(At>Tn){Xt&&jf(0);break}}nn&&It(kt+131072);for(var Jn=(1<<er)-1,yr=(1<<qn)-1,ii=At;;ii=At){var oi=(Vt=un[jI(Ve,At)&Jn])>>4;if((At+=15&Vt)>Tn){Xt&&jf(0);break}if(Vt||jf(2),oi<256)it[kt++]=oi;else{if(oi==256){ii=At,un=null;break}var $r=oi-254;oi>264&&($r=Bf(Ve,At,(1<<(si=$$[Hr=oi-257]))-1)+W$[Hr],At+=si);var Ni=pn[jI(Ve,At)&yr],ro=Ni>>4;if(Ni||jf(3),At+=15&Ni,Cn=Nae[ro],ro>3){var si=U$[ro];Cn+=jI(Ve,At)&(1<<si)-1,At+=si}if(At>Tn){Xt&&jf(0);break}nn&&It(kt+131072);var Po=kt+$r;if(kt<Cn){var ao=0-Cn,Bi=Math.min(Cn,Po);for(ao+kt<0&&jf(3);kt<Bi;++kt)it[kt]=(void 0)[ao+kt]}for(;kt<Po;++kt)it[kt]=it[kt-Cn]}}tt.l=un,tt.p=ii,tt.b=kt,tt.f=Kt,un&&(Kt=1,tt.m=er,tt.d=pn,tt.n=qn)}while(!Kt);return kt!=it.length&&zt?(Qt=it,((ln=kt)==null||ln>Qt.length)&&(ln=Qt.length),new sd(Qt.subarray(0,ln))):it.subarray(0,kt)}(Ie.subarray(he,-8),{i:2},new sd(((be=Ie)[(Le=be.length)-4]|be[Le-3]<<8|be[Le-2]<<16|be[Le-1]<<24)>>>0))));var be,Le,Ie,he;const Ee=Wae[ye];if(!Ee)throw new Error(`Unhandled codec: ${ye}`);const Oe=new globalThis.DecompressionStream(Ee);return new Response(new Blob([de]).stream().pipeThrough(Oe)).arrayBuffer().then(Ve=>new Uint8Array(Ve))}(Y,q).then(de=>(function(ye,be){ye.readFields(Iae,be)}(new NI(de),ne),new Yae[R](ne.buffer))),re.then(de=>{for(let ye=$.length-1;ye>=0;ye--)switch($[ye]){case"delta_filter":Oae(de,P);break;case"zigzag_filter":Lae(de);break;case"bitshuffle_filter":zae(de,R);break;default:throw new ch(`Unhandled filter "${$[ye]}"`)}return{layerName:g,blockIndex:L,data:de}}).catch(de=>{throw de})}))},zn(K$,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),zn(oM,"MapboxRasterTile"),zn(Z$,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Yw,VI,Nf,ub,$I,db=null;function Q$(){return ji(self)&&self.worker.dracoUrl?self.worker.dracoUrl:VI||rs.DRACO_URL}function J$(){if(ji(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(ub)return ub;const u=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return ub=WebAssembly.validate(u)?rs.MESHOPT_SIMD_URL:rs.MESHOPT_URL,ub}const sM={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Xae={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Xw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function eU(u,o,l){const f=l.json.bufferViews.length,g=l.buffers.length;o.bufferView=f,l.json.bufferViews[f]={buffer:g,byteLength:u.byteLength},l.buffers[g]=u}const UI="KHR_draco_mesh_compression";function Zae(u,o){const l=u.extensions&&u.extensions[UI];if(!l)return;const f=new Nf.Decoder,g=iU(o,l.bufferView),b=new Nf.Mesh;if(!f.DecodeArrayToMesh(g,g.byteLength,b))throw new Error("Failed to decode Draco mesh");const w=o.json.accessors[u.indices],R=sM[w.componentType],P=w.count*R.BYTES_PER_ELEMENT,L=Nf._malloc(P);R===Uint16Array?f.GetTrianglesUInt16Array(b,P,L):f.GetTrianglesUInt32Array(b,P,L),eU(Nf.memory.buffer.slice(L,L+P),w,o),Nf._free(L);for(const $ of Object.keys(l.attributes)){const q=f.GetAttributeByUniqueId(b,l.attributes[$]),Y=o.json.accessors[u.attributes[$]],ne=Xae[Y.componentType],re=Y.count*Xw[Y.type]*sM[Y.componentType].BYTES_PER_ELEMENT,de=Nf._malloc(re);f.GetAttributeDataArrayForAllPoints(b,q,Nf[ne],re,de),eU(Nf.memory.buffer.slice(de,de+re),Y,o),Nf._free(de)}f.destroy(),b.destroy(),delete u.extensions[UI]}const aM="EXT_meshopt_compression";function Kae(u,o){if(!u.extensions||!u.extensions[aM])return;const l=u.extensions[aM],f=new Uint8Array(o.buffers[l.buffer],l.byteOffset||0,l.byteLength||0),g=new Uint8Array(l.count*l.byteStride);$I.decodeGltfBuffer(g,l.count,l.byteStride,f,l.mode,l.filter),u.buffer=o.buffers.length,u.byteOffset=0,o.buffers[u.buffer]=g.buffer,delete u.extensions[aM]}const tU=1179937895,nU=new TextDecoder("utf8");function rU(u,o){return new URL(u,o).href}function Qae(u,o,l,f){return fetch(rU(u.uri,f)).then(g=>g.arrayBuffer()).then(g=>{o.buffers[l]=g})}function iU(u,o){const l=u.json.bufferViews[o];return new Uint8Array(u.buffers[l.buffer],l.byteOffset||0,l.byteLength)}function Jae(u,o,l,f){if(u.uri){const g=rU(u.uri,f);return fetch(g).then(b=>b.blob()).then(b=>createImageBitmap(b)).then(b=>{o.images[l]=b})}if(u.bufferView!==void 0){const g=iU(o,u.bufferView),b=new Blob([g],{type:u.mimeType});return createImageBitmap(b).then(w=>{o.images[l]=w})}}function oU(u,o=0,l){const f={json:null,images:[],buffers:[]};if(new Uint32Array(u,o,1)[0]===tU){const $=new Uint32Array(u,o);let q=2;const Y=($[q++]>>2)-3,ne=$[q++]>>2;if(q++,f.json=JSON.parse(nU.decode($.subarray(q,q+ne))),q+=ne,q<Y){const re=$[q++];q++;const de=o+(q<<2);f.buffers[0]=u.slice(de,de+re)}}else f.json=JSON.parse(nU.decode(new Uint8Array(u,o)));const{buffers:g,images:b,meshes:w,extensionsUsed:R,bufferViews:P}=f.json;let L=Promise.resolve();if(g){const $=[];for(let q=0;q<g.length;q++){const Y=g[q];Y.uri?$.push(Qae(Y,f,q,l)):f.buffers[q]||(f.buffers[q]=null)}L=Promise.all($)}return L.then(()=>{const $=[],q=R&&R.includes(UI),Y=R&&R.includes(aM);if(q&&$.push(function(){if(!Nf)return Yw??(Yw=function(ne){let re,de=null;function ye(){re=new Uint8Array(de.buffer)}function be(){throw new Error("Unexpected Draco error.")}const Le={a:{a:be,d:function(Ie,he,Ee){return re.copyWithin(Ie,he,he+Ee)},c:function(Ie){const he=re.length,Ee=Math.max(Ie>>>0,Math.ceil(1.2*he)),Oe=Math.ceil((Ee-he)/65536);try{return de.grow(Oe),ye(),!0}catch{return!1}},b:be}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(ne,Le):ne.then(Ie=>Ie.arrayBuffer()).then(Ie=>WebAssembly.instantiate(Ie,Le))).then(Ie=>{const{Rb:he,Qb:Ee,P:Oe,T:Ve,X:tt,Ja:it,La:at,Qa:ht,Va:zt,Wa:nn,eb:Xt,jb:Qt,f:ln,e:It,yb:Kt,zb:At,Ab:kt,Bb:un,Db:pn,Gb:er}=Ie.instance.exports;de=It;const qn=(()=>{let Tn=0,cn=0,Rr=0,Zn=0;return Kn=>{Rr&&(he(Zn),he(Tn),cn+=Rr,Rr=Tn=0),Tn||(cn+=128,Tn=Ee(cn));const wr=Kn.length+7&-8;let zr=Tn;wr>=cn&&(Rr=wr,zr=Zn=Ee(wr));for(let jr=0;jr<Kn.length;jr++)re[zr+jr]=Kn[jr];return zr}})();return ye(),ln(),{memory:It,_free:he,_malloc:Ee,Mesh:class{constructor(){this.ptr=Oe()}destroy(){Ve(this.ptr)}},Decoder:class{constructor(){this.ptr=it()}destroy(){Qt(this.ptr)}DecodeArrayToMesh(Tn,cn,Rr){const Zn=qn(Tn),Kn=at(this.ptr,Zn,cn,Rr.ptr);return!!tt(Kn)}GetAttributeByUniqueId(Tn,cn){return{ptr:ht(this.ptr,Tn.ptr,cn)}}GetTrianglesUInt16Array(Tn,cn,Rr){zt(this.ptr,Tn.ptr,cn,Rr)}GetTrianglesUInt32Array(Tn,cn,Rr){nn(this.ptr,Tn.ptr,cn,Rr)}GetAttributeDataArrayForAllPoints(Tn,cn,Rr,Zn,Kn){Xt(this.ptr,Tn.ptr,cn.ptr,Rr,Zn,Kn)}},DT_INT8:Kt(),DT_UINT8:At(),DT_INT16:kt(),DT_UINT16:un(),DT_UINT32:pn(),DT_FLOAT32:er()}})}(fetch(Q$())),Yw.then(ne=>{Nf=ne,Yw=void 0}))}()),Y&&$.push(function(){if($I)return;const ne=function(re){let de;const ye=WebAssembly.instantiateStreaming(re,{}).then(Ie=>{de=Ie.instance,de.exports.__wasm_call_ctors()}),be={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Le={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:ye,supported:!0,decodeGltfBuffer(Ie,he,Ee,Oe,Ve,tt){(function(it,at,ht,zt,nn,Xt,Qt){const ln=it.exports.sbrk,It=zt+3&-4,Kt=ln(It*nn),At=ln(Xt.length),kt=new Uint8Array(it.exports.memory.buffer);kt.set(Xt,At);const un=at(Kt,zt,nn,At,Xt.length);if(un===0&&Qt&&Qt(Kt,It,nn),ht.set(kt.subarray(Kt,Kt+zt*nn)),ln(Kt-ln(0)),un!==0)throw new Error(`Malformed buffer data: ${un}`)})(de,de.exports[Le[Ve]],Ie,he,Ee,Oe,de.exports[be[tt]])}}}(fetch(J$()));return ne.ready.then(()=>{$I=ne})}()),b)for(let ne=0;ne<b.length;ne++)$.push(Jae(b[ne],f,ne,l));return($.length?Promise.all($):Promise.resolve()).then(()=>{if(q&&w)for(const{primitives:ne}of w)for(const re of ne)Zae(re,f);if(Y&&w&&P)for(const ne of P)Kae(ne,f);return f})})}function Q_(u,o){const l=u.json.bufferViews[o.bufferView],f=sM[o.componentType];return new f(u.buffers[l.buffer],(o.byteOffset||0)+(l.byteOffset||0),o.count*(l.byteStride&&l.byteStride!==Xw[o.type]*f.BYTES_PER_ELEMENT?l.byteStride/f.BYTES_PER_ELEMENT:Xw[o.type]))}function qI(u,o,l,f){const g=sM[o.componentType],b=function($){switch($){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),w=u.json.bufferViews[o.bufferView],R=w.byteStride?w.byteStride/g.BYTES_PER_ELEMENT:Xw[o.type],P=l.float32,L=P.length/l.capacity;for(let $=0,q=0;$<o.count*R;$+=R,q+=L)for(let Y=0;Y<L;Y++)P[q+Y]=f[$+Y]*b;l._trim()}function ele(u,o,l){const f=u.indices,g=u.attributes,b={};b.indexArray=new Fo;const w=o.json.accessors[f],R=w.count/3;b.indexArray.reserve(R);const P=Q_(o,w);for(let Y=0;Y<R;Y++)b.indexArray.emplaceBack(P[3*Y],P[3*Y+1],P[3*Y+2]);b.indexArray._trim(),b.vertexArray=new el;const L=o.json.accessors[g.POSITION];b.vertexArray.reserve(L.count);const $=Q_(o,L);for(let Y=0;Y<L.count;Y++)b.vertexArray.emplaceBack($[3*Y],$[3*Y+1],$[3*Y+2]);if(b.vertexArray._trim(),b.aabb=new Fi(L.min,L.max),b.centroid=function(Y,ne){const re=[0,0,0],de=Y.length;if(de>0){for(let ye=0;ye<de;ye++){const be=3*Y[ye];re[0]+=ne[be],re[1]+=ne[be+1],re[2]+=ne[be+2]}re[0]/=de,re[1]/=de,re[2]/=de}return re}(P,$),g.COLOR_0!==void 0){const Y=o.json.accessors[g.COLOR_0],ne=Xw[Y.type],re=Q_(o,Y);b.colorArray=ne===3?new el:new Uc,b.colorArray.resize(Y.count),qI(o,Y,b.colorArray,re)}if(g.NORMAL!==void 0){b.normalArray=new el;const Y=o.json.accessors[g.NORMAL];b.normalArray.resize(Y.count);const ne=Q_(o,Y);qI(o,Y,b.normalArray,ne)}if(g.TEXCOORD_0!==void 0&&l.length>0){b.texcoordArray=new Qd;const Y=o.json.accessors[g.TEXCOORD_0];b.texcoordArray.resize(Y.count);const ne=Q_(o,Y);qI(o,Y,b.texcoordArray,ne)}if(g._FEATURE_ID_RGBA4444!==void 0){const Y=o.json.accessors[g._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(b.featureData=Q_(o,Y))}g._FEATURE_RGBA4444!==void 0&&(b.featureData=new Uint32Array(Q_(o,o.json.accessors[g._FEATURE_RGBA4444]).buffer));const q=u.material;return b.material=function(Y,ne){const{emissiveFactor:re=[0,0,0],alphaMode:de="OPAQUE",alphaCutoff:ye=.5,normalTexture:be,occlusionTexture:Le,emissiveTexture:Ie,doubleSided:he}=Y,{baseColorFactor:Ee=[1,1,1,1],metallicFactor:Oe=1,roughnessFactor:Ve=1,baseColorTexture:tt,metallicRoughnessTexture:it}=Y.pbrMetallicRoughness||{},at=Le?ne[Le.index]:void 0;if(Le&&Le.extensions&&Le.extensions.KHR_texture_transform&&at){const ht=Le.extensions.KHR_texture_transform;at.offsetScale=[ht.offset[0],ht.offset[1],ht.scale[0],ht.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new bi(...Ee),metallicFactor:Oe,roughnessFactor:Ve,baseColorTexture:tt?ne[tt.index]:void 0,metallicRoughnessTexture:it?ne[it.index]:void 0},doubleSided:he,emissiveFactor:re,alphaMode:de,alphaCutoff:ye,normalTexture:be?ne[be.index]:void 0,occlusionTexture:at,emissionTexture:Ie?ne[Ie.index]:void 0,defined:Y.defined===void 0}}(q!==void 0?o.json.materials[q]:{defined:!1},l),b}function sU(u,o,l){const{matrix:f,rotation:g,translation:b,scale:w,mesh:R,extras:P,children:L}=u,$={};if($.matrix=f||function(q,Y,ne,re){var de=Y[0],ye=Y[1],be=Y[2],Le=Y[3],Ie=de+de,he=ye+ye,Ee=be+be,Oe=de*Ie,Ve=de*he,tt=de*Ee,it=ye*he,at=ye*Ee,ht=be*Ee,zt=Le*Ie,nn=Le*he,Xt=Le*Ee,Qt=re[0],ln=re[1],It=re[2];return q[0]=(1-(it+ht))*Qt,q[1]=(Ve+Xt)*Qt,q[2]=(tt-nn)*Qt,q[3]=0,q[4]=(Ve-Xt)*ln,q[5]=(1-(Oe+ht))*ln,q[6]=(at+zt)*ln,q[7]=0,q[8]=(tt+nn)*It,q[9]=(at-zt)*It,q[10]=(1-(Oe+it))*It,q[11]=0,q[12]=ne[0],q[13]=ne[1],q[14]=ne[2],q[15]=1,q}([],g||[0,0,0,1],b||[0,0,0],w||[1,1,1]),R!==void 0){$.meshes=l[R];const q=$.anchor=[0,0];for(const Y of $.meshes){const{min:ne,max:re}=Y.aabb;q[0]+=ne[0]+re[0],q[1]+=ne[1]+re[1]}q[0]=Math.floor(q[0]/$.meshes.length/2),q[1]=Math.floor(q[1]/$.meshes.length/2)}if(P&&(P.id&&($.id=P.id),P.lights&&($.lights=function(q){if(!q.length)return[];const Y=function(be){const Le=atob(be),Ie=new Uint8Array(Le.length);for(let he=0;he<Le.length;he++)Ie[he]=Le.codePointAt(he);return Ie}(q),ne=[],re=Y.length/24,de=new Uint16Array(Y.buffer),ye=new Float32Array(Y.buffer);for(let be=0;be<re;be++){const Le=de[2*be*6]/30,Ie=de[2*be*6+1]/30,he=de[2*be*6+10]/100,Ee=ye[6*be+1],Oe=ye[6*be+2],Ve=ye[6*be+3],tt=ye[6*be+4],it=Ve-Ee,at=tt-Oe,ht=Math.hypot(it,at);ne.push({pos:[Ee+.5*it,Oe+.5*at,Ie],normal:[at/ht,-it/ht,0],width:ht,height:Le,depth:he,points:[Ee,Oe,Ve,tt]})}return ne}(P.lights))),L){const q=[];for(const Y of L)q.push(sU(o.json.nodes[Y],o,l));$.children=q}return $}function tle(u){if(u.vertices.length===0||u.indices.length===0)return null;const o=new Up(u.vertices,u.indices,8,256),[l,f]=[o.min.clone(),o.max.clone()];return{vertices:u.vertices,indices:u.indices,grid:o,min:l,max:f}}function nle(u){if(!u.extras||!u.extras.ground)return null;const o=u.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const l=o[0];if(!l||!Array.isArray(l)||l.length===0)return null;const f=[];for(const w of l){if(!Array.isArray(w)||w.length!==2)continue;const R=w[0],P=w[1];typeof R=="number"&&typeof P=="number"&&f.push(new mn(R,P))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let g=0;for(let w=0;w<f.length;w++){const R=f[w],P=f[(w+1)%f.length],L=f[(w+2)%f.length];g+=(R.x-P.x)*(L.y-P.y)-(L.x-P.x)*(R.y-P.y)}g>0&&f.reverse();const b=D_(f.flatMap(w=>[w.x,w.y]),[]);return b.length===0?null:{vertices:f,indices:b}}function rle(u,o){const l=[],f=[];let g=0;const b=[];for(const w of u){g=l.length;const R=w.vertexArray.float32,P=w.indexArray.uint16;for(let L=0;L<w.vertexArray.length;L++)b[0]=R[3*L+0],b[1]=R[3*L+1],b[2]=R[3*L+2],Dt(b,b,o),l.push(new mn(b[0],b[1]));for(let L=0;L<3*w.indexArray.length;L++)f.push(P[L]+g)}if(f.length%3!=0)return null;for(let w=0;w<f.length;w+=3){const R=l[f[w+0]],P=l[f[w+1]],L=l[f[w+2]];(R.x-P.x)*(L.y-P.y)-(L.x-P.x)*(R.y-P.y)>0&&([f[w+1],f[w+2]]=[f[w+2],f[w+1]])}return{vertices:l,indices:f}}function aU(u){const o=function(P,L){const $=[],q=WebGL2RenderingContext;if(P.json.textures)for(const Y of P.json.textures){const ne={magFilter:q.LINEAR,minFilter:q.NEAREST,wrapS:q.REPEAT,wrapT:q.REPEAT};Y.sampler!==void 0&&Object.assign(ne,P.json.samplers[Y.sampler]),$.push({image:L[Y.source],sampler:ne,uploaded:!1})}return $}(u,u.images),l=function(P,L){const $=[];for(const q of P.json.meshes){const Y=[];for(const ne of q.primitives)Y.push(ele(ne,P,L));$.push(Y)}return $}(u,o),{scenes:f,scene:g,nodes:b}=u.json,w=f?f[g||0].nodes:b,R=[];for(const P of w)R.push(sU(b[P],u,l));return function(P,L,$){const q={},Y=new Set;for(let ne=0;ne<P.length;ne++){const re=$[L[ne]];if(!re.extras)continue;const de=re.extras["mapbox:footprint:version"],ye=re.extras["mapbox:footprint:id"];(de||ye)&&Y.add(ne),de==="1.0.0"&&ye&&(q[ye]=ne)}for(let ne=0;ne<P.length;ne++){if(Y.has(ne))continue;const re=P[ne],de=$[L[ne]];if(!de.extras)continue;let ye=null;re.id in q&&(ye=rle(P[q[re.id]].meshes,re.matrix)),ye||(ye=nle(de)),ye&&(re.footprint=tle(ye))}if(Y.size>0){const ne=Array.from(Y.values()).sort((re,de)=>re-de);for(let re=ne.length-1;re>=0;re--)P.splice(ne[re],1)}}(R,w,u.json.nodes),R}function ile(u){u.heightmap=new Float32Array(4096),u.heightmap.fill(-1);const o=u.vertexArray.float32,l=u.aabb.min[0]-1,f=u.aabb.min[1]-1,g=X_/(u.aabb.max[0]-l+2),b=X_/(u.aabb.max[1]-f+2);for(let w=0;w<o.length;w+=3){const R=o[w+2],P=(o[w+0]-l)*g|0,L=(o[w+1]-f)*b|0;R>u.heightmap[L*X_+P]&&(u.heightmap[L*X_+P]=R)}}function ole(u,o){const l={};l.indexArray=new Fo,l.indexArray.reserve(4*u.length),l.vertexArray=new el,l.vertexArray.reserve(10*u.length),l.colorArray=new Uc,l.vertexArray.reserve(10*u.length);let f=0;for(const w of u){const R=Math.min(10,Math.max(4,1.3*w.height))*o,P=[-w.normal[1],w.normal[0],0],L=Math.min(.29,.1*w.width/w.depth),$=w.width-2*w.depth*o*(L+.01),q=He([],w.pos,P,$/2),Y=He([],w.pos,P,-$/2),ne=[q[0],q[1],q[2]+w.height],re=[Y[0],Y[1],Y[2]+w.height],de=He([],w.normal,P,L);Ce(de,de,R);const ye=He([],w.normal,P,-L);Ce(ye,ye,R),Ae(de,q,de),Ae(ye,Y,ye),q[2]+=.1,Y[2]+=.1,l.vertexArray.emplaceBack(de[0],de[1],de[2]),l.vertexArray.emplaceBack(ye[0],ye[1],ye[2]),l.vertexArray.emplaceBack(q[0],q[1],q[2]),l.vertexArray.emplaceBack(Y[0],Y[1],Y[2]),l.vertexArray.emplaceBack(ne[0],ne[1],ne[2]),l.vertexArray.emplaceBack(re[0],re[1],re[2]),l.vertexArray.emplaceBack(q[0],q[1],q[2]),l.vertexArray.emplaceBack(Y[0],Y[1],Y[2]),l.vertexArray.emplaceBack(de[0],de[1],de[2]),l.vertexArray.emplaceBack(ye[0],ye[1],ye[2]);const be=$/R/2;l.colorArray.emplaceBack(-be-L,-1,be,.8),l.colorArray.emplaceBack(be+L,-1,be,.8),l.colorArray.emplaceBack(-be,0,be,1.3),l.colorArray.emplaceBack(be,0,be,1.3),l.colorArray.emplaceBack(be+L,-.8,be,.7),l.colorArray.emplaceBack(be+L,-.8,be,.7),l.colorArray.emplaceBack(0,0,be,1.3),l.colorArray.emplaceBack(0,0,be,1.3),l.colorArray.emplaceBack(be+L,-1.2,be,.8),l.colorArray.emplaceBack(be+L,-1.2,be,.8),l.indexArray.emplaceBack(6+f,4+f,8+f),l.indexArray.emplaceBack(7+f,9+f,5+f),l.indexArray.emplaceBack(0+f,1+f,2+f),l.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const g={defined:!0,emissiveFactor:[0,0,0]},b={};return b.baseColorFactor=bi.white,g.pbrMetallicRoughness=b,l.material=g,l.aabb=new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),l}class lU{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const f=o[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const sle=["id","tile","layer","source","sourceLayer","state"];class hb{constructor(o,l,f,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=l,this._x=f,this._y=g,this.properties=o.properties,this.id=b}clone(){const o=new hb(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(o.state=Object.assign({},this.state)),this.layer&&(o.layer=Object.assign({},this.layer)),this.source&&(o.source=this.source),this.sourceLayer&&(o.sourceLayer=this.sourceLayer),o}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const l of sle)this[l]!==void 0&&(o[l]=this[l]);return o}}class cU{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Ip(xn,16,0),this.featureIndexArray=new __,this.promoteId=l,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(o,l,f,g,b,w=0,R=0){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,b,w);const L=this.grid;for(let $=0;$<l.length;$++){const q=l[$],Y=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<q.length;ne++){const re=q[ne];Y[0]=Math.min(Y[0],re.x),Y[1]=Math.min(Y[1],re.y),Y[2]=Math.max(Y[2],re.x),Y[3]=Math.max(Y[3],re.y)}R!==0&&(Y[0]-=R,Y[1]-=R,Y[2]+=R,Y[3]+=R),Y[0]<xn&&Y[1]<xn&&Y[2]>=0&&Y[3]>=0&&L.insert(P,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new oh.VectorTile(new MC(this.rawTileData)).layers,this.sourceLayerCoder=new lU(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,l){const{tilespaceGeometry:f,transform:g,tileTransform:b,pixelPosMatrix:w,availableImages:R}=l;this.loadVTLayers(),this.serializedLayersCache.clear();const P=f.bufferedTilespaceBounds,L=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(ne,re,de,ye)=>Ci(f.bufferedTilespaceGeometry,ne,re,de,ye));L.sort(ale);let $=null;g.elevation&&L.length>0&&($=sb.create(g.elevation,this.tileID));const q={};let Y;for(let ne=0;ne<L.length;ne++){const re=L[ne];if(re===Y)continue;Y=re;const de=this.featureIndexArray.get(re);let ye=null;this.is3DTile?this.loadMatchingModelFeature(q,de,o,f,g):this.loadMatchingFeature(q,de,o,R,(be,Le,Ie,he=0)=>(ye||(ye=Vn(be,this.tileID.canonical,b)),Le.queryIntersectsFeature(f,be,Ie,ye,this.z,g,w,$,he)))}return q}loadMatchingFeature(o,l,f,g,b){const{featureIndex:w,bucketIndex:R,sourceLayerIndex:P,layoutVertexArrayOffset:L}=l,$=this.bucketLayerIDs[R],q=f.layers,Y=Object.keys(q);if(Y.length&&!function(be,Le){for(let Ie=0;Ie<be.length;Ie++)if(Le.indexOf(be[Ie])>=0)return!0;return!1}(Y,$))return;const ne=f.sourceCache,re=this.sourceLayerCoder.decode(P),de=this.vtLayers[re].feature(w),ye=this.getId(de,re);for(let be=0;be<$.length;be++){const Le=$[be];if(!q[Le])continue;const{styleLayer:Ie,targets:he}=q[Le];let Ee={};ye!==void 0&&(Ee=ne.getFeatureState(Ie.sourceLayer,ye));const Oe=!b||b(de,Ie,Ee,L);if(!Oe)continue;const Ve=new hb(de,this.z,this.x,this.y,ye);Ve.tile=this.tileID.canonical,Ve.state=Ee;let tt=this.serializedLayersCache.get(Le);tt||(tt=Ie.serialize(),tt.id=Le,this.serializedLayersCache.set(Le,tt)),Ve.source=tt.source,Ve.sourceLayer=tt["source-layer"],Ve.layer=lt({},tt),Ve.layer.paint=uU(tt.paint,Ie.paint,de,Ee,g),Ve.layer.layout=uU(tt.layout,Ie.layout,de,Ee,g);let it=!1;for(const at of he){this.updateFeatureProperties(Ve,at);const{filter:ht}=at;if(ht){if(de.properties=Ve.properties,ht.needGeometry){const zt=Gn(de,!0);if(!ht.filter(new Li(this.tileID.overscaledZ),zt,this.tileID.canonical))continue}else if(!ht.filter(new Li(this.tileID.overscaledZ),de))continue}it=!0,at.targetId&&this.addFeatureVariant(Ve,at)}it&&this.appendToResult(o,Le,w,Ve,Oe)}}loadMatchingModelFeature(o,l,f,g,b){const w=this.bucketLayerIDs[0][0],R=f.layers;if(!R[w])return;const{styleLayer:P,targets:L}=R[w];if(P.type!=="model")return;const $=g.tile,q=l.featureIndex,Y=$.getBucket(P);if(!(Y&&Y instanceof ZC))return;const ne=function(tt,it,at,ht){const zt=tt.getNodesInfo()[it];if(zt.hiddenByReplacement||!zt.node.meshes)return;let nn=Number.MAX_VALUE;const Xt=zt.node,Qt=at.tile,ln=ht.calculatePosMatrix(Qt.tileID.toUnwrapped(),ht.worldSize),It=zt.evaluatedScale;let Kt=0;ht.elevation&&Xt.elevation&&(Kt=Xt.elevation*ht.elevation.exaggeration()),H(ln,ln,[(Xt.anchor?Xt.anchor[0]:0)*(It[0]-1),(Xt.anchor?Xt.anchor[1]:0)*(It[1]-1),Kt]),G(ln,ln,It);const At=at.queryGeometry,kt=At.isPointQuery()?At.screenBounds:At.screenGeometry,un=function(er){const qn=V([],ln,er.matrix);V(qn,ht.expandedFarZProjMatrix,qn);for(let Tn=0;Tn<er.meshes.length;++Tn){const cn=er.meshes[Tn];if(Tn===er.lightMeshIndex)continue;const Rr=c$(kt,ht,qn,cn.aabb);Rr!=null&&(nn=Math.min(Rr,nn))}if(er.children)for(const Tn of er.children)un(Tn)};if(un(Xt),nn===Number.MAX_VALUE)return;const pn=new me(0,0);return x$(Qt.tileID.canonical,pn,zt.node.anchor[0],zt.node.anchor[1]),{intersectionZ:nn,position:pn,feature:zt.feature}}(Y,q,g,b);if(!ne)return;const{z:re,x:de,y:ye}=$.tileID.canonical,{feature:be,intersectionZ:Le,position:Ie}=ne;let he={};be.id!==void 0&&(he=f.sourceCache.getFeatureState(P.sourceLayer,be.id));const Ee=new hb({},re,de,ye,be.id);Ee.tile=this.tileID.canonical,Ee.state=he,Ee.properties=be.properties,Ee.geometry={type:"Point",coordinates:[Ie.lng,Ie.lat]};let Oe=this.serializedLayersCache.get(w);Oe||(Oe=P.serialize(),Oe.id=w,this.serializedLayersCache.set(w,Oe)),Ee.source=Oe.source,Ee.sourceLayer=Oe["source-layer"],Ee.layer=lt({},Oe);let Ve=!1;for(const tt of L){this.updateFeatureProperties(Ee,tt);const{filter:it}=tt;if(it){if(be.properties=Ee.properties,it.needGeometry){if(!it.filter(new Li(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!it.filter(new Li(this.tileID.overscaledZ),be))continue}Ve=!0,tt.targetId&&this.addFeatureVariant(Ee,tt)}Ve&&this.appendToResult(o,w,q,Ee,Le)}updateFeatureProperties(o,l,f){if(l.properties){const g={};for(const b in l.properties){const w=l.properties[b].evaluate({zoom:this.z},o._vectorTileFeature,o.state,o.tile,f);w!=null&&(g[b]=w)}o.properties=g}}addFeatureVariant(o,l,f){const g={target:l.target,namespace:l.namespace,uniqueFeatureID:l.uniqueFeatureID};l.properties&&(g.properties=o.properties),o.variants=o.variants||{},o.variants[l.targetId]=o.variants[l.targetId]||[],o.variants[l.targetId].push(g)}appendToResult(o,l,f,g,b){let w=o[l];w===void 0&&(w=o[l]=[]),w.push({featureIndex:f,feature:g,intersectionZ:b})}lookupSymbolFeatures(o,l,f,g,b){const w={};this.loadVTLayers();for(const R of o)this.loadMatchingFeature(w,{bucketIndex:l,sourceLayerIndex:f,featureIndex:R,layoutVertexArrayOffset:0},g,b);return w}loadFeature(o){const{featureIndex:l,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),b=this.vtFeatures[g];if(b[l])return b[l];const w=this.vtLayers[g].feature(l);return b[l]=w,w}hasLayer(o){for(const l of this.bucketLayerIDs)for(const f of l)if(o===f)return!0;return!1}getId(o,l){let f=o.id;if(this.promoteId){const g=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[l];if(g!=null)if(Array.isArray(g)){if(!this.promoteIdExpression){const b=Di(g);if(b.result!=="success"){const w=b.value.map(R=>`${R.key}: ${R.message}`).join(", ");return void Ir(`Failed to create expression for promoteId: ${w}`)}this.promoteIdExpression=b.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new fp),f=this.promoteIdExpression.evaluate({zoom:0},o)}else f=o.properties[g];typeof f=="boolean"&&(f=Number(f))}return f}}function uU(u,o,l,f,g){return nr(u,(b,w)=>{const R=o instanceof Gd?o.get(w):null;return R&&R.evaluate?R.evaluate(l,f,void 0,g):R})}function ale(u,o){return o-u}zn(cU,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const dU=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class HI{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(o,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=dU[15&f];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[R]=new Uint32Array(o,4,1);return new HI(R,w,b,o)}constructor(o,l=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=dU.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,R=o*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-R%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+R+P,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+R+P),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+R+P,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=o)}add(o,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=l,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return WI(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,l,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:R}=this,P=[0,b.length-1,0],L=[];for(;P.length;){const $=P.pop()||0,q=P.pop()||0,Y=P.pop()||0;if(q-Y<=R){for(let ye=Y;ye<=q;ye++){const be=w[2*ye],Le=w[2*ye+1];be>=o&&be<=f&&Le>=l&&Le<=g&&L.push(b[ye])}continue}const ne=Y+q>>1,re=w[2*ne],de=w[2*ne+1];re>=o&&re<=f&&de>=l&&de<=g&&L.push(b[ne]),($===0?o<=re:l<=de)&&(P.push(Y),P.push(ne-1),P.push(1-$)),($===0?f>=re:g>=de)&&(P.push(ne+1),P.push(q),P.push(1-$))}return L}within(o,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,R=[0,g.length-1,0],P=[],L=f*f;for(;R.length;){const $=R.pop()||0,q=R.pop()||0,Y=R.pop()||0;if(q-Y<=w){for(let ye=Y;ye<=q;ye++)fU(b[2*ye],b[2*ye+1],o,l)<=L&&P.push(g[ye]);continue}const ne=Y+q>>1,re=b[2*ne],de=b[2*ne+1];fU(re,de,o,l)<=L&&P.push(g[ne]),($===0?o-f<=re:l-f<=de)&&(R.push(Y),R.push(ne-1),R.push(1-$)),($===0?o+f>=re:l+f>=de)&&(R.push(ne+1),R.push(q),R.push(1-$))}return P}}function WI(u,o,l,f,g,b){if(g-f<=l)return;const w=f+g>>1;hU(u,o,w,f,g,b),WI(u,o,l,f,w-1,1-b),WI(u,o,l,w+1,g,1-b)}function hU(u,o,l,f,g,b){for(;g>f;){if(g-f>600){const L=g-f+1,$=l-f+1,q=Math.log(L),Y=.5*Math.exp(2*q/3),ne=.5*Math.sqrt(q*Y*(L-Y)/L)*($-L/2<0?-1:1);hU(u,o,l,Math.max(f,Math.floor(l-$*Y/L+ne)),Math.min(g,Math.floor(l+(L-$)*Y/L+ne)),b)}const w=o[2*l+b];let R=f,P=g;for(Zw(u,o,f,l),o[2*g+b]>w&&Zw(u,o,f,g);R<P;){for(Zw(u,o,R,P),R++,P--;o[2*R+b]<w;)R++;for(;o[2*P+b]>w;)P--}o[2*f+b]===w?Zw(u,o,f,P):(P++,Zw(u,o,P,g)),P<=l&&(f=P+1),l<=P&&(g=P-1)}}function Zw(u,o,l,f){GI(u,l,f),GI(o,2*l,2*f),GI(o,2*l+1,2*f+1)}function GI(u,o,l){const f=u[o];u[o]=u[l],u[l]=f}function fU(u,o,l,f){const g=u-l,b=o-f;return g*g+b*b}i.$=Us,i.A=au,i.B=Ql,i.C=Xd,i.D=ab,i.E=Dd,i.F=2,i.G=Iw,i.H=SV,i.I=ul,i.J=class extends YC{},i.K=br,i.L=Im,i.M=yl,i.N=Rp,i.O=jc,i.P=mn,i.Q=Qm,i.R=up,i.S=Nc,i.T=wI,i.U=Yd,i.V=YC,i.W=Nd,i.X=Di,i.Y=yp,i.Z=qo,i._=lf,i.a=function(u){return rs.API_CDN_URL_REGEX.test(u)},i.a$=dn,i.a0=Gh,i.a1=lg,i.a2=Bd,i.a3=Ap,i.a4=function(u){const o=u.value;let l=[];if(!o)return l;const f=br(o);return f!=="string"?(l=l.concat([new YC(u.key,o,`string expected, "${f}" found`)]),l):(CI(o,!0)||(l=l.concat([new YC(u.key,o,`invalid url "${o}"`)])),l)},i.a5=_t,i.a6=Ey,i.a7=To,i.a8=yn,i.a9=class{constructor(u){this.specification=u}possiblyEvaluate(u,o){return Ti(u.expression.evaluate(o))}interpolate(u,o,l){return{x:lr(u.x,o.x,l),y:lr(u.y,o.y,l),z:lr(u.z,o.z,l),azimuthal:lr(u.azimuthal,o.azimuthal,l),polar:lr(u.polar,o.polar,l)}}},i.aA=Bn,i.aB=pi,i.aC=Gt,i.aD=Ze,i.aE=E,i.aF=function(u,o){const l={};for(let f=0;f<o.length;f++){const g=o[f];g in u&&(l[g]=u[g])}return l},i.aG=Re,i.aH=Ge,i.aI=class{constructor(u){this.entries={},this.scheduler=u}request(u,o,l,f){const g=this.entries[u]=this.entries[u]||{callbacks:[]};if(g.result){const[b,w]=g.result;return this.scheduler?this.scheduler.add(()=>{f(b,w)},o):f(b,w),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=l((b,w)=>{g.result=[b,w];for(const R of g.callbacks)this.scheduler?this.scheduler.add(()=>{R(b,w)},o):R(b,w);setTimeout(()=>delete this.entries[u],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(b=>b!==f),g.callbacks.length||(g.cancel(),delete this.entries[u]))}}},i.aJ=function(u,o,l){const f=JSON.stringify(u.request);return u.data&&(this.deduped.entries[f]={result:[null,u.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:u.isSymbolTile,zoom:u.tileZoom},g=>{const b=Ad(u.request,(w,R,P,L)=>{w?g(w):R&&g(null,{vectorTile:l?void 0:new oh.VectorTile(new MC(R)),rawData:R,cacheControl:P,expires:L})});return()=>{b.cancel(),g()}},o)},i.aK=function(u){Cm++,Cm>Gl&&(u.getActor().send("enforceCacheSizeLimit",su),Cm=0)},i.aL=function(u){return u<=1?1:Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},i.aM=zi,i.aN=QV,i.aO=i$,i.aP=KV,i.aQ=function(u,o){const l=document.createElement("video");l.muted=!0,l.onloadstart=function(){o(null,l)};for(let f=0;f<u.length;f++){const g=document.createElement("source");Am(u[f])||(l.crossOrigin="Anonymous"),g.src=u[f],l.appendChild(g)}return{cancel:()=>{}}},i.aR=UC,i.aS=function(u){return fetch(u).then(o=>o.arrayBuffer()).then(o=>oU(o,0,u))},i.aT=aU,i.aU=class{constructor(u,o,l,f){this.id=u,this.position=o!=null?new me(o[0],o[1]):new me(0,0),this.orientation=l??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new Fi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(u,o){if(V(u.matrix,o,u.matrix),u.meshes)for(const l of u.meshes){const f=Fi.applyTransformFast(l.aabb,u.matrix);this.aabb.encapsulate(f)}if(u.children)for(const l of u.children)this._applyTransformations(l,u.matrix)}computeBoundsAndApplyParent(){const u=B([]);for(const o of this.nodes)this._applyTransformations(o,u)}computeModelMatrix(u,o,l,f,g,b,w=!1){m$(this.matrix,this,u.transform,this.position,o,l,f,g,b,w)}upload(u){if(!this.uploaded){for(const o of this.nodes)AI(o,u);for(const o of this.nodes)XC(o);this.uploaded=!0}}destroy(){for(const u of this.nodes)RI(u)}},i.aV=sr,i.aW=Ow,i.aX=Je,i.aY=nt,i.aZ=Zd,i.a_=Fo,i.aa=Li,i.ab=is,i.ac=Tt,i.ad=Dt,i.ae=Me,i.af=et,i.ag=Gd,i.ah=Af,i.ai=lr,i.aj=xn,i.ak=fx,i.al=ie,i.am=bi,i.an=class{constructor(u){this.specification=u}possiblyEvaluate(u,o){return function([l,f]){const g=Ti([1,l,f]);return{x:g.x,y:g.y,z:g.z}}(u.expression.evaluate(o))}interpolate(u,o,l){return{x:lr(u.x,o.x,l),y:lr(u.y,o.y,l),z:lr(u.z,o.z,l)}}},i.ao=function(u,o,l=0,f=!0){const g=new mn(l,l),b=u.sub(g),w=o.add(g),R=[b,new mn(w.x,b.y),w,new mn(b.x,w.y)];return f&&R.push(b.clone()),R},i.ap=function(u,o){const l=[];for(let f=0;f<u.length;f++){const g=ct(f-1,-1,u.length-1),b=ct(f+1,-1,u.length-1),w=u[f],R=u[b],P=u[g].sub(w).unit(),L=R.sub(w).unit(),$=L.angleWithSep(P.x,P.y),q=P.add(L).unit().mult(-1*o/Math.sin($/2));l.push(w.add(q))}return l},i.aq=FV,i.ar=Ci,i.as=function(u,o,l=0){return Se(((o.x-l)*u.scale-u.x)*xn,(o.y*u.scale-u.y)*xn,bt(o.z,o.y))},i.at=Ct,i.au=wt,i.av=jl,i.aw=qr,i.ax=function(u){let o=1/0,l=1/0,f=-1/0,g=-1/0;for(const b of u)o=Math.min(o,b.x),l=Math.min(l,b.y),f=Math.max(f,b.x),g=Math.max(g,b.y);return{min:new mn(o,l),max:new mn(f,g)}},i.ay=Ye,i.az=V,i.b=function(u){return rs.API_FONTS_REGEX.test(u)},i.b$=Ce,i.b0=zp,i.b1=VC,i.b2=function(){rc.isLoading()||rc.isLoaded()||Wd()!=="deferred"||o_()},i.b3=Cy,i.b4=Gn,i.b5=hb,i.b6=Xi,i.b7=Yt,i.b8=qx,i.b9=Vn,i.bA=function(u,o){const{x:l,y:f}=u.point,g=K1(l,f,u.worldSize/u._pixelsPerMercatorPixel,0,0);return V(g,g,Cx(nd(o)))},i.bB=T,i.bC=function(u){return u[0]=0,u[1]=0,u[2]=0,u},i.bD=function(u,o){return Math.hypot(o[0]-u[0],o[1]-u[1],o[2]-u[2])},i.bE=ot,i.bF=He,i.bG=st,i.bH=Pw,i.bI=Gc,i.bJ=lI,i.bK=function(u,o,l,f,g){const b=5*o+2;u.float32[b+0]=l,u.float32[b+1]=f,u.float32[b+2]=g},i.bL=NC,i.bM=p,i.bN=hr,i.bO=aa,i.bP=Vy,i.bQ=u$,i.bR=_C,i.bS=ww,i.bT=hI,i.bU=DV,i.bV=aI,i.bW=HI,i.bX=ct,i.bY=Nn,i.bZ=function(u,o,l){l*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],R=Math.sin(l),P=Math.cos(l);return u[0]=f*P+g*R,u[1]=g*P-f*R,u[2]=b*P+w*R,u[3]=w*P-b*R,u},i.b_=ft,i.ba=Vc,i.bb=Jd,i.bc=Wc,i.bd=_o,i.be=D_,i.bf=_I,i.bg=function(u,o){const l=Af(o.zoom);if(l===0)return nd(u);const f=Ex(u),g=X1(f),b=Ye(f.getWest())*o.worldSize,w=Ye(f.getEast())*o.worldSize,R=Ge(f.getNorth())*o.worldSize,P=Ge(f.getSouth())*o.worldSize,L=[b,R,0],$=[w,R,0],q=[b,P,0],Y=[w,P,0],ne=j([],o.globeMatrix);return Dt(L,L,ne),Dt($,$,ne),Dt(q,q,ne),Dt(Y,Y,ne),g[0]=rd(g[0],q,l),g[1]=rd(g[1],Y,l),g[2]=rd(g[2],$,l),g[3]=rd(g[3],L,l),Fi.fromPoints(g)},i.bh=wg,i.bi=j,i.bj=Oy,i.bk=rd,i.bl=xf,i.bm=xl,i.bn=ce,i.bo=H,i.bp=oM,i.bq=MC,i.br=Ad,i.bs=function(u,o){const l=[];for(const f in u)f in o||l.push(f);return l},i.bt=vt,i.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bv=ea,i.bw=function(u){var o=new x(16);return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],o},i.bx=B,i.by=ee,i.bz=k,i.c=zs,i.c$=function(u){return u({pluginStatus:Ja,pluginURL:Xu}),ag.on("pluginStateChange",u),u},i.c0=fn,i.c1=Jr,i.c2=function(u,o){return u[0]=-o[0],u[1]=-o[1],u[2]=-o[2],u[3]=o[3],u},i.c3=ue,i.c4=function(u,o,l,f,g){var b,w=1/Math.tan(o/2);return u[0]=w/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=w,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,g!=null&&g!==1/0?(u[10]=(g+f)*(b=1/(f-g)),u[14]=2*g*f*b):(u[10]=-1,u[14]=-2*f),u},i.c5=function(u,o,l,f,g,b,w){var R=1/(o-l),P=1/(f-g),L=1/(b-w);return u[0]=-2*R,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*P,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*L,u[11]=0,u[12]=(o+l)*R,u[13]=(g+f)*P,u[14]=(w+b)*L,u[15]=1,u},i.c6=Ne,i.c7=function(u,o,l){u[4*o+0]=l[0],u[4*o+1]=l[1],u[4*o+2]=l[2],u[4*o+3]=l[3]},i.c8=Bl,i.c9=ac,i.cA=WC,i.cB=ae,i.cC=o$,i.cD=function(u){const o=o$(u,!0);return T([],[o[0],o[1],o[4],o[5]])},i.cE=G,i.cF=sa,i.cG=X,i.cH=function(u){const{x:o,y:l}=u.point,{lng:f,lat:g}=u._center;return K1(o,l,u.worldSize,f,g)},i.cI=Pe,i.cJ=le,i.cK=Qo,i.cL=D,i.cM=function(u,o,l){let f=0;for(let g=0;g<2;++g)u[g]>0&&(f+=(u[g]-0)*(u[g]-0)),o[g]<0&&(f+=(0-o[g])*(0-o[g]));return f},i.cN=45,i.cO=ly,i.cP=Ke,i.cQ=Bp,i.cR=function(u,o,l){const f=Math.sqrt(u*u+o*o+l*l),g=f>0?Math.acos(l/f)*ke:0;let b=u!==0||o!==0?Math.atan2(-o,-u)*ke+90:0;return b<0&&(b+=360),[f,b,g]},i.cS=Se,i.cT=pt,i.cU=Ae,i.cV=Fi,i.cW=Ti,i.cX=function(u){return[Math.pow(u[0],1/2.2),Math.pow(u[1],1/2.2),Math.pow(u[2],1/2.2)]},i.cY=_e,i.cZ=CI,i.c_=function(u,o){return u.readFields(iae,{icons:[]},o)},i.ca=Fl,i.cb=Bo,i.cc=pg,i.cd=me,i.ce=$V,i.cf=function(){var u=new x(4);return x!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},i.cg=function(u,o,l){var f=o[0],g=o[1],b=o[2],w=o[3],R=Math.sin(l),P=Math.cos(l);return u[0]=f*P+b*R,u[1]=g*P+w*R,u[2]=f*-R+b*P,u[3]=g*-R+w*P,u},i.ch=function(u,o){return u[0]===o[0]&&u[1]===o[1]&&u[2]===o[2]&&u[3]===o[3]},i.ci=Lt,i.cj=function(u){return Math.hypot(u[0],u[1],u[2],u[3])},i.ck=Xn,i.cl=yt,i.cm=Wo,i.cn=vg,i.co=s$,i.cp=qi,i.cq=QE,i.cr=function(u,o,l,f,g,b,w,R,P){if(P.name==="globe")return QE(u,o,new qi(l,f,g),!1);const L=Ow({z:l,x:f,y:g},P);return new Fi([(b+L.x/L.scale)*o,o*(L.y/L.scale),w],[(b+L.x2/L.scale)*o,o*(L.y2/L.scale),R])},i.cs=function(u,o,l){return u[0]=Math.min(o[0],l[0]),u[1]=Math.min(o[1],l[1]),u[2]=Math.min(o[2],l[2]),u[3]=Math.min(o[3],l[3]),u},i.ct=function(u,o,l){return u[0]=Math.max(o[0],l[0]),u[1]=Math.max(o[1],l[1]),u[2]=Math.max(o[2],l[2]),u[3]=Math.max(o[3],l[3]),u},i.cu=function(u){const o=Math.round((u+45+360)%360/90)%4;return Te[o]},i.cv=mt,i.cw=Ut,i.cx=O,i.cy=function(u){const o=B(new Float64Array(16));V(o,u.pixelMatrix,u.globeMatrix);const l=[0,te,0],f=[0,J,0];return Dt(l,l,o),Dt(f,f,o),[l[0]>0&&l[0]<=u.width&&l[1]>0&&l[1]<=u.height&&!Ly(u,new me(u.center.lat,90)),f[0]>0&&f[0]<=u.width&&f[1]>0&&f[1]<=u.height&&!Ly(u,new me(u.center.lat,-90))]},i.cz=function(u,o){const{scale:l}=u.tileTransform,f=l*xn/(u.tileSize*Math.pow(2,o.zoom-u.tileID.overscaledZ+u.tileID.canonical.z));return function(g,b,w){var R=b[1],P=b[2],L=b[3],$=w[0],q=w[1];return g[0]=b[0]*$,g[1]=R*$,g[2]=P*q,g[3]=L*q,g}(new Float32Array(4),o.inverseAdjustmentMatrix,[f,f])},i.d=function(u){return rs.API_TILEJSON_REGEX.test(u)},i.d$=Iy,i.d0=KC,i.d1=nb,i.d2=uI,i.d3=ci,i.d4=Hd,i.d5=Ra,i.d6=cl,i.d7=kr,i.d8=function(u){const o=u.indexOf(vf);return o>=0?u.slice(0,o):u},i.d9=function(u){return u.indexOf(vf)>=0},i.dA=Z1,i.dB=fs,i.dC=$o,i.dD=256,i.dE=function(u,o){const l=[0,0,0];return Dt(l,l,wg(nd(o.canonical))),Dt(l,l,u),l},i.dF=u=>({u_camera_to_center_distance:new Bo(u),u_extrude_scale:new za(u),u_device_pixel_ratio:new Bo(u),u_matrix:new Bl(u),u_inv_rot_matrix:new Bl(u),u_merc_center:new ac(u),u_tile_id:new Fl(u),u_zoom_transition:new Bo(u),u_up_dir:new Fl(u),u_emissive_strength:new Bo(u)}),i.dG=u=>({u_matrix:new Bl(u),u_pixels_to_tile_units:new za(u),u_device_pixel_ratio:new Bo(u),u_width_scale:new Bo(u),u_floor_width_scale:new Bo(u),u_units_to_pixels:new ac(u),u_dash_image:new pg(u),u_gradient_image:new pg(u),u_image_height:new Bo(u),u_texsize:new ac(u),u_tile_units_to_pixels:new Bo(u),u_alpha_discard_threshold:new Bo(u),u_trim_offset:new ac(u),u_trim_fade_range:new ac(u),u_trim_color:new Bp(u),u_emissive_strength:new Bo(u),u_zbias_factor:new Bo(u),u_tile_to_meter:new Bo(u),u_ground_shadow_factor:new Fl(u)}),i.dH=u=>({u_matrix:new Bl(u),u_texsize:new ac(u),u_pixels_to_tile_units:new za(u),u_device_pixel_ratio:new Bo(u),u_width_scale:new Bo(u),u_floor_width_scale:new Bo(u),u_image:new pg(u),u_units_to_pixels:new ac(u),u_tile_units_to_pixels:new Bo(u),u_alpha_discard_threshold:new Bo(u),u_trim_offset:new ac(u),u_trim_fade_range:new ac(u),u_trim_color:new Bp(u),u_emissive_strength:new Bo(u),u_zbias_factor:new Bo(u),u_tile_to_meter:new Bo(u),u_ground_shadow_factor:new Fl(u),u_pattern_transition:new Bo(u)}),i.dI=oc,i.dJ=lse,i.dK=eC,i.dL=(u,o,l,f,g,b)=>{const w=u.transform,R=w.projection.name==="globe";let P;if(b.paint.get("circle-pitch-alignment")==="map")if(R){const $=Z1(w.zoom,o.canonical)*w._pixelsPerMercatorPixel;P=Float32Array.from([$,0,0,$])}else P=w.calculatePixelsToTileUnitsMatrix(l);else P=new Float32Array([w.pixelsToGLUnits[0],0,0,w.pixelsToGLUnits[1]]);const L={u_camera_to_center_distance:u.transform.getCameraToCenterDistance(w.projection),u_matrix:u.translatePosMatrix(o.projMatrix,l,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Dl.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:ew,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:b.paint.get("circle-emissive-strength")};if(R){L.u_inv_rot_matrix=f,L.u_merc_center=g,L.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],L.u_zoom_transition=Af(w.zoom);const $=g[0]*xn,q=g[1]*xn;L.u_up_dir=w.projection.upVector(new qi(0,0,0),$,q)}return L},i.dM=xa,i.dN=Ia,i.dO=(u,o,l,f,g,b,w,R,P,L)=>{const $=u.transform,q=$.pitch<15?no(.07,.7,Ze((14-$.zoom)/5,0,1)):.07,Y=l.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:_i(u,o,l,f),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:$.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:g,u_width_scale:b,u_floor_width_scale:w,u_image:0,u_tile_units_to_pixels:ri(o,$),u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:R,u_trim_fade_range:l.paint.get("line-trim-fade-range"),u_trim_color:l.paint.get("line-trim-color").toRenderColor(Y?null:l.lut).toArray01(),u_emissive_strength:l.paint.get("line-emissive-strength"),u_zbias_factor:q,u_tile_to_meter:pt(o.tileID.canonical,0),u_ground_shadow_factor:P,u_pattern_transition:L}},i.dP=(u,o,l,f,g,b,w,R,P,L)=>{const $=u.transform,q=$.calculatePixelsToTileUnitsMatrix(o),Y=l.paint.get("line-trim-color-use-theme").constantOr("default")==="none",ne=$.pitch<15?no(.07,.7,Ze((14-$.zoom)/5,0,1)):.07;return{u_matrix:_i(u,o,l,f),u_pixels_to_tile_units:q,u_device_pixel_ratio:b,u_width_scale:w,u_floor_width_scale:R,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:Do(l)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ri(o,u.transform),u_alpha_discard_threshold:0,u_trim_offset:P,u_trim_fade_range:l.paint.get("line-trim-fade-range"),u_trim_color:l.paint.get("line-trim-color").toRenderColor(Y?null:l.lut).toArray01(),u_emissive_strength:l.paint.get("line-emissive-strength"),u_zbias_factor:ne,u_tile_to_meter:pt(o.tileID.canonical,0),u_ground_shadow_factor:L}},i.dQ=wn,i.dR=Fy,i.dS=bt,i.dT=q_,i.dU=Fa,i.dV=Qx,i.dW=sh,i.dX=450,i.dY=7,i.dZ=$se,i.d_=fi,i.da=function(u){const o=u.lastIndexOf(vf);return o>=0?u.slice(o+1):""},i.db=function(u){const o=[],l=u.id;return l===void 0&&o.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&o.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},i.dc=function(u,o,l,f){return u.type==="custom"?new Use(u,o):new eae[u.type](u,o,l,f)},i.dd=rr,i.de=function(u){const o=u.indexOf(vf);return o>=0?u.slice(o+1):""},i.df=class extends hb{constructor(u,o){super(u._vectorTileFeature,u._z,u._x,u._y,u.id),u.state&&(this.state=Object.assign({},u.state)),this.target=o.target,this.namespace=o.namespace,o.properties&&(this.properties=o.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=u.source,this.sourceLayer=u.sourceLayer,this.layer=u.layer)}toJSON(){const u=super.toJSON();return u.target=this.target,u.namespace=this.namespace,u}},i.dg=ag,i.dh=ll,i.di=bx,i.dj=class extends sc{constructor(u){super(u),this.current=M_}set(u,o,l){if(this.fetchUniformLocation(u,o)){for(let f=0;f<9;f++)if(l[f]!==this.current[f]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},i.dk=ze,i.dl=function(u,o,l){const f=Af(l.zoom),g=u.style.map._antialias,b=u.terrain&&u.terrain.exaggeration()>0;return f===0&&!g&&!b},i.dm=function(u){const o=u.pixelsPerMeter,l=o/Ne(1,u.center.lat),f=B(new Float64Array(16));return H(f,f,[u.point.x,u.point.y,0]),G(f,f,[l,l,o]),Float32Array.from(f)},i.dn=Ex,i.dp=function(u){const o=mt-5;u=Ze(u,-80.051129,o)/o*90;const l=Math.pow(Math.abs(Math.sin(ie(u))),3);return Math.round(l*(Z.length-1))},i.dq=function(u,o,l,f){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),R=o.getEast(),P=1<<u.z,L=R-w,$=g-b,q=L/W,Y=-$/Z[l],ne=[0,q,0,Y,0,0,g,w,0];if(u.z>0){const re=180/f;I(ne,ne,[re/L+1,0,0,0,re/$+1,0,-.5*re/q,.5*re/Y,1])}return ne[2]=P,ne[5]=u.x,ne[8]=u.y,ne},i.dr=nd,i.ds=function(u,o,l){const f=B(new Float64Array(16)),g=(o/(1<<u)-.5)*Math.PI*2;return Q(f,l.globeMatrix,g),Float32Array.from(f)},i.dt=class{isDataAvailableAtPoint(u){const o=this._source();if(this.isUsingMockSource()||!o||u.y<0||u.y>1)return!1;const l=o.getSource().maxzoom,f=1<<l,g=Math.floor(u.x),b=Math.floor((u.x-g)*f),w=Math.floor(u.y*f),R=this.findDEMTileFor(new zi(l,g,l,b,w));return!(!R||!R.dem)}getAtPointOrZero(u,o=0){return this.getAtPoint(u,o)||0}getAtPoint(u,o,l=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||u.y<0||u.y>1)return o;const g=f.getSource().maxzoom,b=1<<g,w=Math.floor(u.x),R=u.x-w,P=new zi(g,w,g,Math.floor(R*b),Math.floor(u.y*b)),L=this.findDEMTileFor(P);if(!L||!L.dem)return o;const $=L.dem,q=1<<L.tileID.canonical.z,Y=(R*q-L.tileID.canonical.x)*$.dim,ne=(u.y*q-L.tileID.canonical.y)*$.dim,re=Math.floor(Y),de=Math.floor(ne);return(l?this.exaggeration():1)*lr(lr($.get(re,de),$.get(re,de+1),ne-de),lr($.get(re+1,de),$.get(re+1,de+1),ne-de),Y-re)}getAtTileOffset(u,o,l){const f=1<<u.canonical.z;return this.getAtPointOrZero(new Tt(u.wrap+(u.canonical.x+o/xn)/f,(u.canonical.y+l/xn)/f))}getAtTileOffsetFunc(u,o,l,f){return g=>{const b=this.getAtTileOffset(u,g.x,g.y),w=f.upVector(u.canonical,g.x,g.y);return Ce(w,w,b*f.upVectorScale(u.canonical,o,l).metersToTile),w}}getForTilePoints(u,o,l,f){if(this.isUsingMockSource())return!1;const g=sb.create(this,u,f);return!!g&&(o.forEach(b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],l)}),!0)}getMinMaxForTile(u){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(u);if(!o||!o.dem)return null;const l=o.dem.tree,f=o.tileID,g=1<<u.canonical.z-f.canonical.z;let b=u.canonical.x/g-f.canonical.x,w=u.canonical.y/g-f.canonical.y,R=0;for(let P=0;P<u.canonical.z-f.canonical.z&&!l.leaves[R];P++){b*=2,w*=2;const L=2*Math.floor(w)+Math.floor(b);R=l.childOffsets[R]+L,b%=1,w%=1}return{min:this.exaggeration()*l.minimums[R],max:this.exaggeration()*l.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(u,o,l){throw new Error("Pure virtual method called.")}pointCoordinate(u){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(u){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const u=this.visibleDemTiles;if(u.length===0)return null;let o=!1,l=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const g of u){const b=this.getMinMaxForTile(g.tileID);b&&(l=Math.min(l,b.min),f=Math.max(f,b.max),o=!0)}return o?{min:l,max:f}:null}},i.du=rw,i.dv=td,i.dw=function(u,o){return[Math.pow(u[0],2.2)*o,Math.pow(u[1],2.2)*o,Math.pow(u[2],2.2)*o]},i.dx=C,i.dy=function(u,o){var l=Math.sin(o),f=Math.cos(o);return u[0]=f,u[1]=l,u[2]=0,u[3]=-l,u[4]=f,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},i.dz=Et,i.e=rs,i.e$=lU,i.e0=256,i.e1=Cx,i.e2=el,i.e3=Q,i.e4=function(u,o){return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[4],u[4]=o[5],u[5]=o[6],u[6]=o[8],u[7]=o[9],u[8]=o[10],u},i.e5=Hc,i.e6=Ef,i.e7=function(u,o,l,f,g){return Ze((u-o)/(l-o)*(g-f)+f,f,g)},i.e8=vn,i.e9=function(u,o){var l=o[0],f=o[1],g=o[2],b=o[3],w=o[4],R=o[5],P=o[6],L=o[7],$=o[8],q=$*w-R*L,Y=-$*b+R*P,ne=L*b-w*P,re=l*q+f*Y+g*ne;return re?(u[0]=q*(re=1/re),u[1]=(-$*f+g*L)*re,u[2]=(R*f-g*w)*re,u[3]=Y*re,u[4]=($*l-g*P)*re,u[5]=(-R*l+g*b)*re,u[6]=ne*re,u[7]=(-L*l+f*P)*re,u[8]=(w*l-f*b)*re,u):null},i.eA=function(u,o,l){return u[0]=o[0]/l[0],u[1]=o[1]/l[1],u[2]=o[2]/l[2],u},i.eB=Wt,i.eC=ge,i.eD=gt,i.eE=function(u,o,l,f){return u[0]=o,u[1]=l,u[2]=f,u},i.eF=function([u,o,l]){const f=Math.hypot(u,o,l),g=Math.atan2(u,l),b=.5*Math.PI-Math.acos(-o/f);return new me(le(g),le(b))},i.eG=kn,i.eH=TI,i.eI=function(u){const o=u.navigator?u.navigator.userAgent:null;return!!function(l){if(Mo==null){const f=l.navigator?l.navigator.userAgent:null;Mo=!!l.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Mo}(u)&&!(!o||!(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},i.eJ=function(u,o){su=u,Gl=o},i.eK=Ly,i.eL=Q1,i.eM=function(u){const o=[0,0,0],l=B(new Float64Array(16));return V(l,u.pixelMatrix,u.globeMatrix),Dt(o,o,l),new mn(o[0],o[1])},i.eN=function(u,o,l=!1){if(Ja===kp||Ja===ig||Ja===og)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xu=Dl.resolveURL(u),Ja=kp,Ty=o,sg(),l||o_()},i.eO=Wd,i.eP=function(){KC().acquire(PI)},i.eQ=function(){const u=$w;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(PI),$w=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.eR=K_,i.eS=function(u){const o=sy();if(!o)return;const l=o.delete(Da);u&&l.then(()=>u()).catch(u)},i.eT=Vw,i.eU=Q$,i.eV=function(u){VI=Dl.resolveURL(u),db||(db=new ab(KC(),new Dd)),db.broadcast("setDracoUrl",VI)},i.eW=J$,i.eX=function(u){ub=Dl.resolveURL(u),db||(db=new ab(KC(),new Dd)),db.broadcast("setMeshoptUrl",ub)},i.eY=zn,i.eZ=Rf,i.e_=Ff,i.ea=e_,i.eb=Nt,i.ec=jt,i.ed=class{constructor(u,o,l,f){this.context=u,this.format=f,this.size=l,this.texture=u.gl.createTexture();const[g,b,w]=this.size,{gl:R}=u;R.bindTexture(R.TEXTURE_3D,this.texture),u.pixelStoreUnpackFlipY.set(!1),u.pixelStoreUnpack.set(1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),R.texImage3D(R.TEXTURE_3D,0,this.format,g,b,w,0,xI(this.format),bI(this.format),o.data)}bind(u,o){const{context:l}=this,{gl:f}=l;f.bindTexture(f.TEXTURE_3D,this.texture),u!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,u),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,u),this.minFilter=u),o!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,o),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,o),this.wrapS=o)}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}},i.ee=function(u,o){if(u===o){var l=o[1],f=o[2],g=o[3],b=o[6],w=o[7],R=o[11];u[1]=o[4],u[2]=o[8],u[3]=o[12],u[4]=l,u[6]=o[9],u[7]=o[13],u[8]=f,u[9]=b,u[11]=o[14],u[12]=g,u[13]=w,u[14]=R}else u[0]=o[0],u[1]=o[4],u[2]=o[8],u[3]=o[12],u[4]=o[1],u[5]=o[5],u[6]=o[9],u[7]=o[13],u[8]=o[2],u[9]=o[6],u[10]=o[10],u[11]=o[14],u[12]=o[3],u[13]=o[7],u[14]=o[11],u[15]=o[15];return u},i.ef=EI,i.eg=xe,i.eh=[1,1,1],i.ei=function(u,o,l,f){var g=new x(4);return g[0]=u,g[1]=o,g[2]=l,g[3]=f,g},i.ej=Zt,i.ek=function(u,o,l,f){var g=o[0],b=o[1],w=o[2],R=o[3];return u[0]=g+f*(l[0]-g),u[1]=b+f*(l[1]-b),u[2]=w+f*(l[2]-w),u[3]=R+f*(l[3]-R),u},i.el=sb,i.em=ob,i.en=Qu,i.eo=Qd,i.ep=function(u,o,l,f,g,b,w,R,P,L,$,q,Y,ne,re,de){var ye=new x(16);return ye[0]=u,ye[1]=o,ye[2]=l,ye[3]=f,ye[4]=g,ye[5]=b,ye[6]=w,ye[7]=R,ye[8]=P,ye[9]=L,ye[10]=$,ye[11]=q,ye[12]=Y,ye[13]=ne,ye[14]=re,ye[15]=de,ye},i.eq=pe,i.er=fg,i.es=hg,i.et=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new mn(1/0,1/0),max:new mn(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(u,o=!1){const l=j_(new mn(0,0),new mn(xn,xn),u),f=[];if(o&&!xw(l,this._globalClipBounds))return f;for(const g of this._activeRegions){if(g.hiddenByOverlap||!xw(l,g))continue;const b=bw(g.min,g.max,u);f.push({min:b.min,max:b.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return f}setSources(u){this._setSources(u.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const l=[];for(const f of o.cache.getVisibleCoordinates()){const g=o.cache.getTile(f).buckets[o.layer];g&&g.updateFootprints(f.toUnwrapped(),l)}return l},getOrder:()=>o.order,getClipMask:()=>o.clipMask,getClipScope:()=>o.clipScope})))}_addSource(u){const o=u.getFootprints();if(o.length===0)return;const l=u.getOrder(),f=u.getClipMask(),g=u.getClipScope();for(const b of o){if(!b.footprint)continue;const w=j_(b.footprint.min,b.footprint.max,b.id);this._activeRegions.push({min:w.min,max:w.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:b.id,footprint:b.footprint,order:l,clipMask:f,clipScope:g})}this._sourceIds.push(u.getSourceId())}_computeReplacement(){this._activeRegions.sort((o,l)=>o.priority-l.priority||Gx(o.min,l.min)||Gx(o.max,l.max)||o.order-l.order||o.clipMask-l.clipMask||function(f,g){const b=(w,R)=>w+R;return f.length-g.length||f.reduce(b,"").localeCompare(g.reduce(b,""))}(o.clipScope,l.clipScope));let u=this._activeRegions.length!==this._prevRegions.length;if(!u){let o=0;for(;!u&&o!==this._activeRegions.length;){const l=this._activeRegions[o],f=this._prevRegions[o];u=l.priority!==f.priority||!yC(l,f)||l.order!==f.order||l.clipMask!==f.clipMask||!ea(l.clipScope,f.clipScope),++o}}if(u){++this._updateTime;for(const l of this._activeRegions)l.order!==B_&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,l.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,l.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,l.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,l.max.y));const o=l=>{const f=this._activeRegions;if(l>=f.length)return l;const g=f[l].priority;for(;l<f.length&&f[l].priority===g;)++l;return l};if(this._sourceIds.length>1){let l=0,f=o(l);for(;l!==f;){let g=l;const b=l;for(;g!==f;){const w=this._activeRegions[g];w.hiddenByOverlap=!1;for(let R=0;R<b;R++){const P=this._activeRegions[R];if(!P.hiddenByOverlap&&w.order===B_&&xw(w,P)&&(w.hiddenByOverlap=Uy(w.footprint,w.tileId,P.footprint,P.tileId),w.hiddenByOverlap))break}++g}l=f,f=o(l)}}}}_setSources(u){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=u.length-1;o>=0;o--)this._addSource(u[o]);this._computeReplacement()}},i.eu=class{constructor(u){this._createGrid(u),this._createPoles(u)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const u of this._poleSegments)u.destroy();for(const u of this._gridSegments)u.withSkirts.destroy(),u.withoutSkirts.destroy()}_fillGridMeshWithLods(u,o){const l=new Vc,f=new Fo,g=[],b=u+1+2,w=o[0]+1,R=o[0]+1+(1+o.length),P=(L,$,q)=>{let Y=L===b-1?L-2:L===0?L:L-1;return Y+=q?24575:0,[Y,$]};for(let L=0;L<b;++L)l.emplaceBack(...P(L,0,!0));for(let L=0;L<w;++L)for(let $=0;$<b;++$)l.emplaceBack(...P($,L,($===0||$===b-1)&&!0));for(let L=0;L<o.length;++L){const $=o[L];for(let q=0;q<b;++q)l.emplaceBack(...P(q,$,!0))}for(let L=0;L<o.length;++L){const $=f.length,q=o[L]+1+2,Y=new Fo;for(let de=0;de<q-1;de++){const ye=de===q-2,be=ye?b*(R-o.length+L-de):b;for(let Le=0;Le<b-1;Le++){const Ie=de*b+Le;de===0||ye||Le===0||Le===b-2?(Y.emplaceBack(Ie+1,Ie,Ie+be),Y.emplaceBack(Ie+be,Ie+be+1,Ie+1)):(f.emplaceBack(Ie+1,Ie,Ie+be),f.emplaceBack(Ie+be,Ie+be+1,Ie+1))}}const ne=_o.simpleSegment(0,$,l.length,f.length-$);for(let de=0;de<Y.uint16.length;de+=3)f.emplaceBack(Y.uint16[de],Y.uint16[de+1],Y.uint16[de+2]);const re=_o.simpleSegment(0,$,l.length,f.length-$);g.push({withoutSkirts:ne,withSkirts:re})}return{vertices:l,indices:f,segments:g}}_createGrid(u){const o=this._fillGridMeshWithLods(W,Z);this._gridSegments=o.segments,this._gridBuffer=u.createVertexBuffer(o.vertices,Wc.members),this._gridIndexBuffer=u.createIndexBuffer(o.indices,!0)}_createPoles(u){const o=new Fo;for(let w=0;w<=W;w++)o.emplaceBack(0,w+1,w+2);this._poleIndexBuffer=u.createIndexBuffer(o,!0);const l=new Hc,f=new Hc,g=new Hc,b=new Hc;this._poleSegments=[];for(let w=0,R=0;w<D;w++){const P=360/(1<<w);l.emplaceBack(0,-E,0,.5,0),f.emplaceBack(0,-E,0,.5,1),g.emplaceBack(0,-E,0,.5,.5),b.emplaceBack(0,-E,0,.5,.5);for(let L=0;L<=W;L++){let $=L/W,q=0;const Y=lr(0,P,$),[ne,re,de]=oe(JE,ss,Y,E);l.emplaceBack(ne,re,de,$,q),f.emplaceBack(ne,re,de,$,1-q);const ye=ie(Y);$=.5+.5*Math.sin(ye),q=.5+.5*Math.cos(ye),g.emplaceBack(ne,re,de,$,q),b.emplaceBack(ne,re,de,$,1-q)}this._poleSegments.push(_o.simpleSegment(R,0,66,64)),R+=66}this._poleNorthVertexBuffer=u.createVertexBuffer(l,Ba,!1),this._poleSouthVertexBuffer=u.createVertexBuffer(f,Ba,!1),this._texturedPoleNorthVertexBuffer=u.createVertexBuffer(g,Ba,!1),this._texturedPoleSouthVertexBuffer=u.createVertexBuffer(b,Ba,!1)}getGridBuffers(u,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[u].withSkirts:this._gridSegments[u].withoutSkirts]}getPoleBuffers(u,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[u]]}},i.ev=B_,i.ew=$e,i.ex=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.ey=Qe,i.ez=an,i.f=function(u){return u.indexOf("mapbox:")===0},i.f0=cU,i.f1=gn,i.f2=Cg,i.f3="hd_road_elevation",i.f4=lc,i.f5=nr,i.f6=Nl,i.f7=cI,i.f8=G_,i.f9=function(u,o,l,f,g,b,w,R=1,P,L){u.createArrays(),u.tilePixelRatio=xn/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;const $=u.layers[0].layout,q=u.layers[0]._unevaluatedLayout._values,Y={};Y.scaleFactor=R,Y.textSizeScaleRange=$.get("text-size-scale-range"),Y.iconSizeScaleRange=$.get("icon-size-scale-range");const[ne,re]=Y.textSizeScaleRange,[de,ye]=Y.iconSizeScaleRange;Y.textScaleFactor=Ze(Y.scaleFactor,ne,re),Y.iconScaleFactor=Ze(Y.scaleFactor,de,ye);const be=q["text-size"],Le=q["icon-size"];if(u.textSizeData.kind==="composite"){const{minZoom:tt,maxZoom:it}=u.textSizeData;Y.compositeTextSizes=[be.possiblyEvaluate(new Li(tt),b),be.possiblyEvaluate(new Li(it),b)]}if(u.iconSizeData.kind==="composite"){const{minZoom:tt,maxZoom:it}=u.iconSizeData;Y.compositeIconSizes=[Le.possiblyEvaluate(new Li(tt),b),Le.possiblyEvaluate(new Li(it),b)]}Y.layoutTextSize=be.possiblyEvaluate(new Li(w+1),b),Y.layoutIconSize=Le.possiblyEvaluate(new Li(w+1),b),Y.textMaxSize=be.possiblyEvaluate(new Li(18),b);const Ie=$.get("symbol-placement"),he=$.get("text-rotation-alignment")==="map"&&Ie!=="point",Ee=$.get("text-size");let Oe=!1;const Ve=[];for(const tt of u.features){const it=$.get("text-font").evaluate(tt,{},b).join(","),at=Ee.evaluate(tt,{},b)*Y.textScaleFactor,ht=Y.layoutTextSize.evaluate(tt,{},b)*Y.textScaleFactor,zt=Y.layoutIconSize.evaluate(tt,{},b)*Y.iconScaleFactor,nn={horizontal:{},vertical:void 0},Xt=tt.text;let Qt,ln=[0,0];if(Xt){const Kn=Xt.toString(),wr=$.get("text-letter-spacing").evaluate(tt,{},b)*aa,zr=$.get("text-line-height").evaluate(tt,{},b)*aa,jr=r_(Kn)?wr:0,Gr=$.get("text-anchor").evaluate(tt,{},b),Hr=$.get("text-variable-anchor");if(!Hr){const qe=$.get("text-radial-offset").evaluate(tt,{},b);if(qe)ln=DV(Gr,[qe*aa,dI]);else{const Vt=$.get("text-offset").evaluate(tt,{},b);ln=[Vt[0]*aa,Vt[1]*aa]}}let Vr=he?"center":$.get("text-justify").evaluate(tt,{},b);const Zi=Ie==="point",so=Zi?$.get("text-max-width").evaluate(tt,{},b)*aa:1/0,je=qe=>{u.allowVerticalPlacement&&tg(Kn)&&(nn.vertical=sI(Xt,o,l,g,it,so,zr,Gr,qe,jr,ln,Gc.vertical,!0,ht,at,P))};if(!he&&Hr){const qe=Vr==="auto"?Hr.map(_n=>hI(_n)):[Vr];let Vt=!1;for(let _n=0;_n<qe.length;_n++){const An=qe[_n];if(!nn.horizontal[An])if(Vt)nn.horizontal[An]=nn.horizontal[0];else{const Cn=sI(Xt,o,l,g,it,so,zr,"center",An,jr,ln,Gc.horizontal,!1,ht,at,P);Cn&&(nn.horizontal[An]=Cn,Vt=Cn.positionedLines.length===1)}}je("left")}else{if(Vr==="auto"&&(Vr=hI(Gr)),Zi||$.get("text-writing-mode").indexOf("horizontal")>=0||!tg(Kn)){const qe=sI(Xt,o,l,g,it,so,zr,Gr,Vr,jr,ln,Gc.horizontal,!1,ht,at,P);qe&&(nn.horizontal[Vr]=qe)}je(Zi?"left":Vr)}}let It,Kt,At,kt,un,pn,er,qn=!1;if(tt.icon&&tt.icon.hasPrimary()){const Kn=IV(tt.icon,u.iconSizeData,q["icon-size"],b,u.zoom,tt,P,Y.iconScaleFactor);It=Kn.iconPrimary,At=Kn.iconSecondary;const wr=It.toString();if(Kt=f.get(wr),Kt&&(un=$.get("icon-offset").evaluate(tt,{},b),pn=$.get("icon-anchor").evaluate(tt,{},b),er=$.get("icon-text-fit").evaluate(tt,{},b),Qt=_se(g.get(wr),At?g.get(At.toString()):void 0,un,pn),qn=Kt.sdf,u.sdfIcons===void 0?u.sdfIcons=Kt.sdf:u.sdfIcons!==Kt.sdf&&Ir("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Kt.pixelRatio!==u.pixelRatio||$.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0)),At){const zr=At.toString();kt=f.get(zr)}}Oe=Oe||!(!tt.icon||!tt.icon.hasSecondary());const Tn=fI(nn.horizontal)||nn.vertical;u.iconsInText||(u.iconsInText=!!Tn&&Tn.iconsInText);const cn=ht*Y.textScaleFactor/aa,{defaultShapedIcon:Rr,verticallyShapedIcon:Zn}=Ase(u,Qt,$,tt,b,nn,cn,un,er);er!=="none"&&Qt&&(pV(Qt)||mV(Qt))&&(kC(0,Kt,It,Qt,Rr,er,L,f,g),kC(0,kt,At,Qt,Rr,er,L,f,g),Zn&&(kC(0,Kt,It,Qt,Zn,er,L,f,g),kC(0,kt,At,Qt,Zn,er,L,f,g))),Qt=Rr,Ve.push({feature:tt,shapedTextOrientations:nn,shapedText:Tn,shapedIcon:Qt,iconPrimary:It,iconSecondary:At,iconOffset:un,iconAnchor:pn,verticallyShapedIcon:Zn,layoutTextSize:ht,layoutIconSize:zt,textOffset:ln,isSDFIcon:qn,iconTextFit:er})}return{featureData:Ve,sizes:Y,hasAnySecondaryIcon:Oe,textAlongLine:he,symbolPlacement:Ie}},i.fa=TV,i.fb=function(u,o,l,f,g,b,w,R,P,L){const{featureData:$,hasAnySecondaryIcon:q,sizes:Y,textAlongLine:ne,symbolPlacement:re}=o;for(const de of $){const{shapedIcon:ye,verticallyShapedIcon:be,feature:Le,shapedTextOrientations:Ie,shapedText:he,layoutTextSize:Ee,textOffset:Oe,isSDFIcon:Ve,iconPrimary:tt,iconSecondary:it,iconTextFit:at,iconOffset:ht}=de;kV(ye,L.iconPositions,tt,it),kV(be,L.iconPositions,tt,it),Mse(Ie,L.iconPositions),(he||ye)&&Rse(u,Le,Ie,ye,be,P,Y,Ee,0,Oe,Ve,f,g,w,R,q,at,ht,ne,re)}l&&u.generateCollisionDebugBuffers(b,u.collisionBoxArray,Y.textScaleFactor)},i.fc=oh,i.fd=iM,i.fe=ma,i.ff=lw,i.fg=sV,i.fh=ki,i.fi=function(u){let o=0;if(new Uint32Array(u,0,1)[0]!==tU){const l=new Uint32Array(u,0,7),[,,f,g,b,w]=l;o=l.byteLength+g+b+w+b,(f!==u.byteLength||o>=u.byteLength)&&Ir("Invalid b3dm header information.")}return oU(u,o)},i.fj=function(u,o){const l=aU(u);for(const f of l){for(const g of f.meshes)ile(g);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(ole(f.lights,o)))}return l},i.fk=ZC,i.fl=ji,i.fm=b$,i.fn=rc,i.fo=function(u){Mc(),Yl!=null&&Yl.then(o=>{o.keys().then(l=>{for(let f=0;f<l.length-u;f++)o.delete(l[f]).catch(g=>Ir(g.message))}).catch(l=>Ir(l.message))}).catch(o=>Ir(o.message))},i.g=function(u,o){return ll(lt(u,{method:"GET"}),o)},i.h=ol,i.i=function(u){return rs.API_STYLE_REGEX.test(u)&&!zs(u)},i.j=function(u){return decodeURIComponent(atob(u).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(u){return btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,(o,l)=>String.fromCharCode(+("0x"+l))))},i.l=lt,i.m=jv,i.n=function(u,o){return ll(lt(u,{type:"json"}),o)},i.o=$h,i.p=function(u,o){return ll(lt(u,{method:"POST"}),o)},i.q=Dl,i.r=qs,i.s=function(u){try{const o=self[u];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=sl,i.u=function(){return function u(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()},i.v=function(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)},i.w=Ir,i.x=function(){return II||(II=new K_),II},i.y=FI,i.z=Dm}),c(["./shared"],function(i){function m(ke){const ie=ke?ke.url.toString():void 0;return ie?performance.getEntriesByName(ie):[]}function x(ke){if(typeof ke=="number"||typeof ke=="boolean"||typeof ke=="string"||ke==null)return JSON.stringify(ke);if(Array.isArray(ke)){let le="[";for(const Te of ke)le+=`${x(Te)},`;return`${le}]`}let ie="{";for(const le of Object.keys(ke).sort())ie+=`${le}:${x(ke[le])},`;return`${ie}}`}function T(ke){let ie="";for(const le of i.bu)(ke.type!=="model"||le!=="minzoom"&&le!=="maxzoom")&&(ie+=`/${x(ke[le])}`);return ie}class C{constructor(ie){this.keyCache={},this._layers={},this._layerConfigs={},ie&&this.replace(ie)}replace(ie,le){this._layerConfigs={},this._layers={},this.update(ie,[],le)}update(ie,le,Te){this._options=Te;for(const $e of ie)this._layerConfigs[$e.id]=$e,(this._layers[$e.id]=i.dc($e,this.scope,null,this._options)).compileFilter(Te),this.keyCache[$e.id]&&delete this.keyCache[$e.id];for(const $e of le)delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e];this.familiesBySource={};const ze=function($e,Qe){const Ze={};for(let ct=0;ct<$e.length;ct++){const vt=$e[ct];let lt=Qe&&Qe[vt.id];lt||(vt.type==="symbol"?lt=vt.id:(lt=T(vt),vt.type==="line"&&vt.paint&&function dn(wn){return typeof wn=="string"&&wn==="line-progress"||(Array.isArray(wn)?wn.some(dn):!(!wn||typeof wn!="object")&&Object.values(wn).some(dn))}(vt.paint["line-width"])&&(lt+=`/${x(vt.paint["line-width"])}`))),Qe&&(Qe[vt.id]=lt);let Ht=Ze[lt];Ht||(Ht=Ze[lt]=[]),Ht.push(vt)}const et=[];for(const ct in Ze)et.push(Ze[ct]);return et}(Object.values(this._layerConfigs),this.keyCache);for(const $e of ze){const Qe=$e.map(Ht=>this._layers[Ht.id]),Ze=Qe[0];if(Ze.visibility==="none")continue;const et=Ze.source||"";let ct=this.familiesBySource[et];ct||(ct=this.familiesBySource[et]={});const vt=Ze.sourceLayer||"_geojsonTileLayer";let lt=ct[vt];lt||(lt=ct[vt]=[]),lt.push(Qe)}}}const A=1*i.e_;class I{constructor(ie){const le={},Te=[];for(const Ze in ie){const et=ie[Ze],ct=le[Ze]={};for(const vt in et.glyphs){const lt=et.glyphs[+vt];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const Ht=lt.metrics.localGlyph?A:1,dn={x:0,y:0,w:lt.bitmap.width+2*Ht,h:lt.bitmap.height+2*Ht};Te.push(dn),ct[vt]=dn}}const{w:ze,h:$e}=i.H(Te),Qe=new i.eZ({width:ze||1,height:$e||1});for(const Ze in ie){const et=ie[Ze];for(const ct in et.glyphs){const vt=et.glyphs[+ct];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const lt=le[Ze][ct],Ht=vt.metrics.localGlyph?A:1;i.eZ.copy(vt.bitmap,Qe,{x:0,y:0},{x:lt.x+Ht,y:lt.y+Ht},vt.bitmap)}}this.image=Qe,this.positions=le}}i.eY(I,"GlyphAtlas");class k{constructor(ie){this.tileID=new i.aM(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.tileZoom=ie.tileZoom,this.uid=ie.uid,this.zoom=ie.zoom,this.lut=ie.lut,this.canonical=ie.tileID.canonical,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.scope=ie.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.request&&ie.request.collectResourceTiming,this.promoteId=ie.promoteId,this.isSymbolTile=ie.isSymbolTile,this.tileTransform=i.aW(ie.tileID.canonical,ie.projection),this.projection=ie.projection,this.worldview=ie.worldview,this.localizableLayerIds=ie.localizableLayerIds,this.brightness=ie.brightness,this.extraShadowCaster=!!ie.extraShadowCaster,this.tessellationStep=ie.tessellationStep,this.scaleFactor=ie.scaleFactor}parse(ie,le,Te,ze,$e,Qe){this.status="parsing",this.data=ie,this.collisionBoxArray=new i.b0;const Ze=new i.e$(Object.keys(ie.layers).sort()),et=new i.f0(this.tileID,this.promoteId);et.bucketLayerIDs=[];const ct={},vt=new i.f1(256,256),lt={featureIndex:et,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:vt,availableImages:Te,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Ht=le.familiesBySource[this.source];for(const ti in Ht){const Ti=ie.layers[ti];if(!Ti)continue;let ji=!1,Xi=!1,Mo=!1;for(const $o of Ht[ti])$o[0].type==="symbol"?ji=!0:Xi=!0,$o[0].is3D()&&$o[0].type!=="model"&&(Mo=!0);if(this.extraShadowCaster&&!Mo||this.isSymbolTile===!0&&!ji||this.isSymbolTile===!1&&!Xi)continue;Ti.version===1&&i.w(`Vector tile source "${this.source}" layer "${ti}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jr=Ze.encode(ti),go=[];let $s=!1;for(let $o=0,fs=0;$o<Ti.length;$o++){const Oi=Ti.feature($o),rs=et.getId(Oi,ti);if(this.localizableLayerIds&&this.localizableLayerIds.has(ti)){const ol=Oi.properties?Oi.properties.worldview:null;if(this.worldview&&typeof ol=="string")if(ol==="all")Oi.properties.$localized=!0;else{if(!ol.split(",").includes(this.worldview))continue;Oi.properties.$localized=!0,Oi.properties.worldview=this.worldview}}!$s&&Oi.properties&&Oi.properties.hasOwnProperty(i.f2)&&($s=!0),go.push({feature:Oi,id:rs,index:fs,sourceLayerIndex:Jr}),fs++}$s&&!lt.elevationFeatures&&ie.layers.hasOwnProperty(i.f3)&&(lt.elevationFeatures=i.f4.parseFrom(ie.layers[i.f3],this.canonical));for(const $o of Ht[ti]){const fs=$o[0];(!this.extraShadowCaster||fs.is3D()&&fs.type!=="model")&&(this.isSymbolTile!==void 0&&fs.type==="symbol"!==this.isSymbolTile||fs.minzoom&&this.zoom<Math.floor(fs.minzoom)||fs.maxzoom&&this.zoom>=fs.maxzoom||fs.visibility!=="none"&&(B($o,this.zoom,lt.brightness,Te),(ct[fs.id]=fs.createBucket({index:et.bucketLayerIDs.length,layers:$o,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jr,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:ze})).populate(go,lt,this.tileID.canonical,this.tileTransform),et.bucketLayerIDs.push($o.map(Oi=>i.C(Oi.id,Oi.scope)))))}}let dn,wn,sr,nr,rr,kr;vt.trim();const Si={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ir=()=>{if(dn)return this.status="done",Qe(dn);if(this.extraShadowCaster)this.status="done",Qe(null,{buckets:Object.values(ct).filter(ti=>!ti.isEmpty()),featureIndex:et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:lt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(wn&&sr&&nr){const ti=new I(wn),Ti=new Map;for(const[Mo,Jr]of sr.entries()){const{imagePosition:go}=i.f7(Mo,Jr,i.f8);Ti.set(Mo,go)}const ji={};for(const Mo in ct){const Jr=ct[Mo];Jr instanceof i.b1&&(B(Jr.layers,this.zoom,lt.brightness,Te),ji[Mo]=i.f9(Jr,wn,ti.positions,sr,Ti,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,rr))}const Xi={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded($e,sr,rr,()=>{Xi.iconsPending=!1,ui(ji,ti,Xi)}),this.rasterizeIfNeeded($e,nr,kr,()=>{Xi.patternsPending=!1,ui(ji,ti,Xi)})}},ui=(ti,Ti,ji,Xi)=>{if(ji.iconsPending||ji.patternsPending)return;const Mo=new i.fa(sr,nr,this.lut);for(const Jr in ct){const go=ct[Jr];if(Jr in ti)i.fb(go,ti[Jr],this.showCollisionBoxes,Te,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,sr,Mo);else if(go.hasPattern&&(go instanceof i.b7||go instanceof i.b8||go instanceof i.dV)){B(go.layers,this.zoom,lt.brightness,Te);const $s=Object.fromEntries(Mo.patternPositions);go.addFeatures(lt,this.tileID.canonical,$s,Te,this.tileTransform,this.brightness)}}this.status="done",Qe(null,{buckets:Object.values(ct).filter(Jr=>!Jr.isEmpty()),featureIndex:et,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ti.image,lineAtlas:vt,imageAtlas:Mo,brightness:lt.brightness})};if(!this.extraShadowCaster){const ti=i.f5(lt.glyphDependencies,Xi=>Object.keys(Xi).map(Number));Object.keys(ti).length?$e.send("getGlyphs",{uid:this.uid,stacks:ti,scope:this.scope},(Xi,Mo)=>{dn||(dn=Xi,wn=Mo,Ir())},void 0,!1,Si):wn={};const Ti=Array.from(lt.iconDependencies.keys()).map(Xi=>i.I.parse(Xi));Ti.length?$e.send("getImages",{images:Ti,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Xi,Mo)=>{dn||(dn=Xi,sr=new Map,rr=this.updateImageMapAndGetImageTaskQueue(sr,Mo,lt.iconDependencies),Ir())},void 0,!1,Si):(sr=new Map,rr=new Map);const ji=Array.from(lt.patternDependencies.keys()).map(Xi=>i.I.parse(Xi));ji.length?$e.send("getImages",{images:ji,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Xi,Mo)=>{dn||(dn=Xi,nr=new Map,kr=this.updateImageMapAndGetImageTaskQueue(nr,Mo,lt.patternDependencies),Ir())},void 0,!1,Si):(nr=new Map,kr=new Map)}if(lt.elevationFeatures&&lt.elevationFeatures.length>0){const ti=[];for(const ji of Object.values(ct))if(ji instanceof i.b8){const Xi=ji.getUnevaluatedPortalGraph();Xi&&ti.push(Xi)}const Ti=i.f6.evaluate(ti);for(const ji of Object.values(ct))ji instanceof i.b8&&ji.setEvaluatedPortalGraph(Ti)}Ir()}rasterizeIfNeeded(ie,le,Te,ze){Array.from(le.values()).some($e=>$e.usvg)?this.rasterize(ie,le,Te,ze):ze()}updateImageMapAndGetImageTaskQueue(ie,le,Te){const ze=new Map;for(const $e of le.keys()){const Qe=Te.get($e)||[];for(const Ze of Qe){const et=Ze.toString(),ct=le.get(Ze.id.toString());ct.usvg?ze.has(et)||(ze.set(et,Ze),ie.set(et,Object.assign({},ct))):ie.set(et,ct)}}return ze}rasterize(ie,le,Te,ze){this.rasterizeTask=ie.send("rasterizeImages",{scope:this.scope,tasks:Te},($e,Qe)=>{if(!$e)for(const[Ze,et]of Qe.entries()){const ct=Object.assign(le.get(Ze),{data:et});le.set(Ze,ct)}ze()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function B(ke,ie,le,Te){const ze=new i.aa(ie,{brightness:le});for(const $e of ke)$e.recalculate(ze,Te)}class j extends i.E{constructor(ie,le,Te,ze,$e,Qe,Ze){super(),this.actor=ie,this.layerIndex=le,this.availableImages=Te,this.availableModels=ze,this.loadVectorData=Qe||i.aJ,this.loading={},this.loaded={},this.deduped=new i.aI(ie.scheduler),this.isSpriteLoaded=$e,this.scheduler=ie.scheduler,this.brightness=Ze}loadTile(ie,le){const Te=ie.uid,ze=ie&&ie.request,$e=ze&&ze.collectResourceTiming,Qe=this.loading[Te]=new k(ie);Qe.abort=this.loadVectorData(ie,(Ze,et)=>{const ct=!this.loading[Te];if(delete this.loading[Te],Qe.cancelRasterize(),ct||Ze||!et)return Qe.status="done",ct||(this.loaded[Te]=Qe),le(Ze);const vt=et.rawData,lt={};et.expires&&(lt.expires=et.expires),et.cacheControl&&(lt.cacheControl=et.cacheControl),Qe.vectorTile=et.vectorTile||new i.fc.VectorTile(new i.bq(vt));const Ht=()=>{Qe.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(dn,wn)=>{if(dn||!wn)return le(dn);const sr={};if($e){const nr=m(ze);nr.length>0&&(sr.resourceTiming=JSON.parse(JSON.stringify(nr)))}le(null,i.l({rawTileData:vt.slice(0)},wn,lt,sr))})};this.isSpriteLoaded?Ht():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ht,{type:"parseTile",isSymbolTile:ie.isSymbolTile,zoom:ie.tileZoom}):Ht()}),this.loaded=this.loaded||{},this.loaded[Te]=Qe})}reloadTile(ie,le){const Te=this.loaded,ze=ie.uid;if(Te&&Te[ze]){const $e=Te[ze];$e.scaleFactor=ie.scaleFactor,$e.showCollisionBoxes=ie.showCollisionBoxes,$e.projection=ie.projection,$e.brightness=ie.brightness,$e.tileTransform=i.aW(ie.tileID.canonical,ie.projection),$e.extraShadowCaster=ie.extraShadowCaster,$e.lut=ie.lut;const Qe=(Ze,et)=>{const ct=$e.reloadCallback;ct&&(delete $e.reloadCallback,$e.parse($e.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,ct)),le(Ze,et)};$e.status==="parsing"?$e.reloadCallback=Qe:$e.status==="done"&&($e.vectorTile?$e.parse($e.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,Qe):Qe())}else le(null,void 0)}abortTile(ie,le){const Te=ie.uid,ze=this.loading[Te];ze&&(ze.abort&&ze.abort(),delete this.loading[Te]),le()}removeTile(ie,le){const Te=this.loaded,ze=ie.uid;Te&&Te[ze]&&delete Te[ze],le()}}class V{loadTile(ie,le){const{uid:Te,encoding:ze,rawImageData:$e,padding:Qe}=ie,Ze=ImageBitmap&&$e instanceof ImageBitmap?this.getImageData($e,Qe):$e;le(null,new i.fd(Te,Ze,ze,Qe<1))}reloadTile(ie,le){le(null,null)}abortTile(ie,le){le()}removeTile(ie,le){le()}getImageData(ie,le){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ie.width,ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ie.width,this.offscreenCanvas.height=ie.height,this.offscreenCanvasContext.drawImage(ie,0,0,ie.width,ie.height);const Te=this.offscreenCanvasContext.getImageData(-le,-le,ie.width+2*le,ie.height+2*le);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Te}}i.bp.setPbf(i.bq);class H{constructor(ie){this._mrt=new i.bp(ie.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=ie.uid,this.tileID=ie.tileID,this.source=ie.source}parse(ie,le){const Te=this._mrt;this.status="parsing",this._entireBuffer=ie;try{Te.parseHeader(ie),this._isHeaderLoaded=!0;const ze=[];for(const $e in Te.layers){const Qe=Te.getLayer($e),Ze=Qe.getDataRange(Qe.getBandList()),et=Te.createDecodingTask(Ze),ct=ie.slice(Ze.firstByte,Ze.lastByte+1),vt=i.bp.performDecoding(ct,et).then(lt=>et.complete(null,lt)).catch(lt=>et.complete(lt,null));ze.push(vt)}Promise.allSettled(ze).then(()=>le(null,Te)).catch($e=>le($e))}catch(ze){le(ze)}}}class G{constructor(ie){this.actor=ie,this.loading={},this.loaded={}}loadTile(ie,le){const Te=ie.uid,ze=ie.request,$e=this.loading[Te]=new H(ie),{cancel:Qe}=i.br(ze,(Ze,et,ct,vt)=>{const lt=!this.loading[Te];if(delete this.loading[Te],lt||Ze||!et)return $e.status="done",lt||(this.loaded[Te]=$e),le(Ze);$e.parse(et,(Ht,dn)=>{if(Ht||!dn)return le(Ht);le(null,dn,ct,vt)}),this.loaded[Te]=$e});$e.abort=Qe}reloadTile(ie,le){le(null,void 0)}abortTile(ie,le){const Te=ie.uid,ze=this.loading[Te];ze&&(ze.abort&&ze.abort(),delete this.loading[Te]),le()}removeTile(ie,le){const Te=ie.uid;this.loaded[Te]&&delete this.loaded[Te],le()}decodeRasterArray(ie,le){i.bp.performDecoding(ie.buffer,ie.task).then(Te=>le(null,Te)).catch(Te=>le(Te))}}const X=i.fc.VectorTileFeature.prototype.toGeoJSON;class Q{constructor(ie){this._feature=ie,this.extent=i.aj,this.type=ie.type,this.properties=ie.tags,"id"in ie&&!isNaN(ie.id)&&(this.id=parseInt(ie.id,10))}loadGeometry(){if(this._feature.type===1){const ie=[];for(const le of this._feature.geometry)ie.push([new i.P(le[0],le[1])]);return ie}{const ie=[];for(const le of this._feature.geometry){const Te=[];for(const ze of le)Te.push(new i.P(ze[0],ze[1]));ie.push(Te)}return ie}}toGeoJSON(ie,le,Te){return X.call(this,ie,le,Te)}}class ee{constructor(ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.aj,this.length=ie.length,this._features=ie}feature(ie){return new Q(this._features[ie])}}const ce=64/4096,fe=128;class ue{constructor(){this.features=new Map}clear(){this.features.clear()}load(ie=[],le){for(const Te of ie){const ze=Te.id;if(ze==null)continue;let $e=this.features.get(ze);$e&&this.updateCache($e,le),Te.geometry?($e=xe(Te),this.updateCache($e,le),this.features.set(ze,$e)):this.features.delete(ze),this.updateCache($e,le)}}updateCache(ie,le){for(const{canonical:Te,uid:ze}of Object.values(le)){const{z:$e,x:Qe,y:Ze}=Te;ae(ie,Math.pow(2,$e),Qe,Ze)&&delete le[ze]}}getTile(ie,le,Te){const ze=Math.pow(2,ie),$e=[];for(const Qe of this.features.values())ae(Qe,ze,le,Te)&&$e.push(Ae(Qe,ze,le,Te));return{features:$e}}getFeatures(){return[...this.features.values()]}}function ae({minX:ke,minY:ie,maxX:le,maxY:Te},ze,$e,Qe){return ke<($e+1+ce)/ze&&ie<(Qe+1+ce)/ze&&le>($e-ce)/ze&&Te>(Qe-ce)/ze}function xe(ke){const{id:ie,geometry:le,properties:Te}=ke;if(!le)return;if(le.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:ze,coordinates:$e}=le,Qe={id:ie,type:1,geometry:[],tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Ze=Qe.geometry;if(ze==="Point")we($e,Ze,Qe);else if(ze==="MultiPoint")for(const et of $e)we(et,Ze,Qe);else if(ze==="LineString")Qe.type=2,Me($e,Ze,Qe);else if(ze==="MultiLineString")Qe.type=2,Se($e,Ze,Qe);else if(ze==="Polygon")Qe.type=3,Se($e,Ze,Qe,!0);else{if(ze!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Qe.type=3;for(const et of $e)Se(et,Ze,Qe,!0)}return Qe}function we([ke,ie],le,Te){const ze=i.ay(ke);let $e=i.aH(ie);$e=$e<0?0:$e>1?1:$e,le.push(ze,$e),Te.minX=Math.min(Te.minX,ze),Te.minY=Math.min(Te.minY,$e),Te.maxX=Math.max(Te.maxX,ze),Te.maxY=Math.max(Te.maxY,$e)}function Me(ke,ie,le,Te=!1,ze=!1){const $e=[];for(const Qe of ke)we(Qe,$e,le);ie.push($e),Te&&function(Qe,Ze){let et=0;for(let ct=0,vt=Qe.length,lt=vt-2;ct<vt;lt=ct,ct+=2)et+=(Qe[ct]-Qe[lt])*(Qe[ct+1]+Qe[lt+1]);if(et>0===Ze)for(let ct=0,vt=Qe.length;ct<vt/2;ct+=2){const lt=Qe[ct],Ht=Qe[ct+1];Qe[ct]=Qe[vt-2-ct],Qe[ct+1]=Qe[vt-1-ct],Qe[vt-2-ct]=lt,Qe[vt-1-ct]=Ht}}($e,ze)}function Se(ke,ie,le,Te=!1){for(let ze=0;ze<ke.length;ze++)Me(ke[ze],ie,le,Te,ze===0)}function Ae(ke,ie,le,Te){const{id:ze,type:$e,geometry:Qe,tags:Ze}=ke,et=[];if($e===1)(function(ct,vt,lt,Ht,dn){for(let wn=0;wn<ct.length;wn+=2){const sr=Math.round(i.aj*(ct[wn+0]*vt-lt)),nr=Math.round(i.aj*(ct[wn+1]*vt-Ht));dn.push([sr,nr])}})(Qe,ie,le,Te,et);else for(const ct of Qe)_e(ct,ie,le,Te,et);return{id:ze,type:$e,geometry:et,tags:Ze}}function _e(ke,ie,le,Te,ze){const Qe=i.aj+fe;let Ze;for(let et=0;et<ke.length-2;et+=2){let ct=Math.round(i.aj*(ke[et+0]*ie-le)),vt=Math.round(i.aj*(ke[et+1]*ie-Te)),lt=Math.round(i.aj*(ke[et+2]*ie-le)),Ht=Math.round(i.aj*(ke[et+3]*ie-Te));const dn=lt-ct,wn=Ht-vt;ct<-128&&lt<-128||(ct<-128?(vt+=Math.round(wn*((-128-ct)/dn)),ct=-128):lt<-128&&(Ht=vt+Math.round(wn*((-128-ct)/dn)),lt=-128),vt<-128&&Ht<-128||(vt<-128?(ct+=Math.round(dn*((-128-vt)/wn)),vt=-128):Ht<-128&&(lt=ct+Math.round(dn*((-128-vt)/wn)),Ht=-128),ct>=Qe&&lt>=Qe||(ct>=Qe?(vt+=Math.round(wn*((Qe-ct)/dn)),ct=Qe):lt>=Qe&&(Ht=vt+Math.round(wn*((Qe-ct)/dn)),lt=Qe),vt>=Qe&&Ht>=Qe||(vt>=Qe?(ct+=Math.round(dn*((Qe-vt)/wn)),vt=Qe):Ht>=Qe&&(lt=ct+Math.round(dn*((Qe-vt)/wn)),Ht=Qe),Ze&&ct===Ze[Ze.length-1][0]&&vt===Ze[Ze.length-1][1]||(Ze=[[ct,vt]],ze.push(Ze)),Ze.push([lt,Ht])))))}}var Pe,We,Fe,Ce={exports:{}},He=function(){if(Fe)return Ce.exports;Fe=1;var ke=i.fg(),ie=function(){if(We)return Pe;We=1;var vt=i.fe(),lt=i.ff().VectorTileFeature;function Ht(wn,sr){this.options=sr||{},this.features=wn,this.length=wn.length}function dn(wn,sr){this.id=typeof wn.id=="number"?wn.id:void 0,this.type=wn.type,this.rawGeometry=wn.type===1?[wn.geometry]:wn.geometry,this.properties=wn.tags,this.extent=sr||4096}return Pe=Ht,Ht.prototype.feature=function(wn){return new dn(this.features[wn],this.options.extent)},dn.prototype.loadGeometry=function(){var wn=this.rawGeometry;this.geometry=[];for(var sr=0;sr<wn.length;sr++){for(var nr=wn[sr],rr=[],kr=0;kr<nr.length;kr++)rr.push(new vt(nr[kr][0],nr[kr][1]));this.geometry.push(rr)}return this.geometry},dn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var wn=this.geometry,sr=1/0,nr=-1/0,rr=1/0,kr=-1/0,Si=0;Si<wn.length;Si++)for(var Ir=wn[Si],ui=0;ui<Ir.length;ui++){var ti=Ir[ui];sr=Math.min(sr,ti.x),nr=Math.max(nr,ti.x),rr=Math.min(rr,ti.y),kr=Math.max(kr,ti.y)}return[sr,rr,nr,kr]},dn.prototype.toGeoJSON=lt.prototype.toGeoJSON,Pe}();function le(vt){var lt=new ke;return function(Ht,dn){for(var wn in Ht.layers)dn.writeMessage(3,Te,Ht.layers[wn])}(vt,lt),lt.finish()}function Te(vt,lt){var Ht;lt.writeVarintField(15,vt.version||1),lt.writeStringField(1,vt.name||""),lt.writeVarintField(5,vt.extent||4096);var dn={keys:[],values:[],keycache:{},valuecache:{}};for(Ht=0;Ht<vt.length;Ht++)dn.feature=vt.feature(Ht),lt.writeMessage(2,ze,dn);var wn=dn.keys;for(Ht=0;Ht<wn.length;Ht++)lt.writeStringField(3,wn[Ht]);var sr=dn.values;for(Ht=0;Ht<sr.length;Ht++)lt.writeMessage(4,ct,sr[Ht])}function ze(vt,lt){var Ht=vt.feature;Ht.id!==void 0&&lt.writeVarintField(1,Ht.id),lt.writeMessage(2,$e,vt),lt.writeVarintField(3,Ht.type),lt.writeMessage(4,et,Ht)}function $e(vt,lt){var Ht=vt.feature,dn=vt.keys,wn=vt.values,sr=vt.keycache,nr=vt.valuecache;for(var rr in Ht.properties){var kr=Ht.properties[rr],Si=sr[rr];if(kr!==null){Si===void 0&&(dn.push(rr),sr[rr]=Si=dn.length-1),lt.writeVarint(Si);var Ir=typeof kr;Ir!=="string"&&Ir!=="boolean"&&Ir!=="number"&&(kr=JSON.stringify(kr));var ui=Ir+":"+kr,ti=nr[ui];ti===void 0&&(wn.push(kr),nr[ui]=ti=wn.length-1),lt.writeVarint(ti)}}}function Qe(vt,lt){return(lt<<3)+(7&vt)}function Ze(vt){return vt<<1^vt>>31}function et(vt,lt){for(var Ht=vt.loadGeometry(),dn=vt.type,wn=0,sr=0,nr=Ht.length,rr=0;rr<nr;rr++){var kr=Ht[rr],Si=1;dn===1&&(Si=kr.length),lt.writeVarint(Qe(1,Si));for(var Ir=dn===3?kr.length-1:kr.length,ui=0;ui<Ir;ui++){ui===1&&dn!==1&&lt.writeVarint(Qe(2,Ir-1));var ti=kr[ui].x-wn,Ti=kr[ui].y-sr;lt.writeVarint(Ze(ti)),lt.writeVarint(Ze(Ti)),wn+=ti,sr+=Ti}dn===3&&lt.writeVarint(Qe(7,1))}}function ct(vt,lt){var Ht=typeof vt;Ht==="string"?lt.writeStringField(1,vt):Ht==="boolean"?lt.writeBooleanField(7,vt):Ht==="number"&&(vt%1!=0?lt.writeDoubleField(3,vt):vt<0?lt.writeSVarintField(6,vt):lt.writeVarintField(5,vt))}return Ce.exports=le,Ce.exports.fromVectorTileJs=le,Ce.exports.fromGeojsonVt=function(vt,lt){lt=lt||{};var Ht={};for(var dn in vt)Ht[dn]=new ie(vt[dn].features,lt),Ht[dn].name=dn,Ht[dn].version=lt.version,Ht[dn].extent=lt.extent;return le({layers:Ht})},Ce.exports.GeoJSONWrapper=ie,Ce.exports}(),dt=i.fh(He);const gt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},Nt=Math.fround||(wt=new Float32Array(1),ke=>(wt[0]=+ke,wt[0]));var wt;const ot=3,st=5,St=6;class Dt{constructor(ie){this.options=Object.assign(Object.create(gt),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:le,minZoom:Te,maxZoom:ze}=this.options;le&&console.time("total time");const $e=`prepare ${ie.length} points`;le&&console.time($e),this.points=ie;const Qe=[];for(let et=0;et<ie.length;et++){const ct=ie[et];if(!ct.geometry)continue;const[vt,lt]=ct.geometry.coordinates,Ht=Nt(Lt(vt)),dn=Nt(Ct(lt));Qe.push(Ht,dn,1/0,et,-1,1),this.options.reduce&&Qe.push(0)}let Ze=this.trees[ze+1]=this._createTree(Qe);le&&console.timeEnd($e);for(let et=ze;et>=Te;et--){const ct=+Date.now();Ze=this.trees[et]=this._createTree(this._cluster(Ze,et)),le&&console.log("z%d: %d clusters in %dms",et,Ze.numItems,+Date.now()-ct)}return le&&console.timeEnd("total time"),this}getClusters(ie,le){let Te=((ie[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,ie[1]));let $e=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)Te=-180,$e=180;else if(Te>$e){const lt=this.getClusters([Te,ze,180,Qe],le),Ht=this.getClusters([-180,ze,$e,Qe],le);return lt.concat(Ht)}const Ze=this.trees[this._limitZoom(le)],et=Ze.range(Lt(Te),Ct(Qe),Lt($e),Ct(ze)),ct=Ze.data,vt=[];for(const lt of et){const Ht=this.stride*lt;vt.push(ct[Ht+st]>1?Et(ct,Ht,this.clusterProps):this.points[ct[Ht+ot]])}return vt}getChildren(ie){const le=this._getOriginId(ie),Te=this._getOriginZoom(ie),ze="No cluster with the specified id.",$e=this.trees[Te];if(!$e)throw new Error(ze);const Qe=$e.data;if(le*this.stride>=Qe.length)throw new Error(ze);const Ze=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),et=$e.within(Qe[le*this.stride],Qe[le*this.stride+1],Ze),ct=[];for(const vt of et){const lt=vt*this.stride;Qe[lt+4]===ie&&ct.push(Qe[lt+st]>1?Et(Qe,lt,this.clusterProps):this.points[Qe[lt+ot]])}if(ct.length===0)throw new Error(ze);return ct}getLeaves(ie,le,Te){const ze=[];return this._appendLeaves(ze,ie,le=le||10,Te=Te||0,0),ze}getTile(ie,le,Te){const ze=this.trees[this._limitZoom(ie)],$e=Math.pow(2,ie),{extent:Qe,radius:Ze}=this.options,et=Ze/Qe,ct=(Te-et)/$e,vt=(Te+1+et)/$e,lt={features:[]};return this._addTileFeatures(ze.range((le-et)/$e,ct,(le+1+et)/$e,vt),ze.data,le,Te,$e,lt),le===0&&this._addTileFeatures(ze.range(1-et/$e,ct,1,vt),ze.data,$e,Te,$e,lt),le===$e-1&&this._addTileFeatures(ze.range(0,ct,et/$e,vt),ze.data,-1,Te,$e,lt),lt.features.length?lt:null}getClusterExpansionZoom(ie){let le=this._getOriginZoom(ie)-1;for(;le<=this.options.maxZoom;){const Te=this.getChildren(ie);if(le++,Te.length!==1)break;ie=Te[0].properties.cluster_id}return le}_appendLeaves(ie,le,Te,ze,$e){const Qe=this.getChildren(le);for(const Ze of Qe){const et=Ze.properties;if(et&&et.cluster?$e+et.point_count<=ze?$e+=et.point_count:$e=this._appendLeaves(ie,et.cluster_id,Te,ze,$e):$e<ze?$e++:ie.push(Ze),ie.length===Te)break}return $e}_createTree(ie){const le=new i.bW(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<ie.length;Te+=this.stride)le.add(ie[Te],ie[Te+1]);return le.finish(),le.data=ie,le}_addTileFeatures(ie,le,Te,ze,$e,Qe){for(const Ze of ie){const et=Ze*this.stride,ct=le[et+st]>1;let vt,lt,Ht;if(ct)vt=yt(le,et,this.clusterProps),lt=le[et],Ht=le[et+1];else{const sr=this.points[le[et+ot]];vt=sr.properties;const[nr,rr]=sr.geometry.coordinates;lt=Lt(nr),Ht=Ct(rr)}const dn={type:1,geometry:[[Math.round(this.options.extent*(lt*$e-Te)),Math.round(this.options.extent*(Ht*$e-ze))]],tags:vt};let wn;wn=ct||this.options.generateId?le[et+ot]:this.points[le[et+ot]].id,wn!==void 0&&(dn.id=wn),Qe.features.push(dn)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,le){const{radius:Te,extent:ze,reduce:$e,minPoints:Qe}=this.options,Ze=Te/(ze*Math.pow(2,le)),et=ie.data,ct=[],vt=this.stride;for(let lt=0;lt<et.length;lt+=vt){if(et[lt+2]<=le)continue;et[lt+2]=le;const Ht=et[lt],dn=et[lt+1],wn=ie.within(et[lt],et[lt+1],Ze),sr=et[lt+st];let nr=sr;for(const rr of wn){const kr=rr*vt;et[kr+2]>le&&(nr+=et[kr+st])}if(nr>sr&&nr>=Qe){let rr,kr=Ht*sr,Si=dn*sr,Ir=-1;const ui=(lt/vt<<5)+(le+1)+this.points.length;for(const ti of wn){const Ti=ti*vt;if(et[Ti+2]<=le)continue;et[Ti+2]=le;const ji=et[Ti+st];kr+=et[Ti]*ji,Si+=et[Ti+1]*ji,et[Ti+4]=ui,$e&&(rr||(rr=this._map(et,lt,!0),Ir=this.clusterProps.length,this.clusterProps.push(rr)),$e(rr,this._map(et,Ti)))}et[lt+4]=ui,ct.push(kr/nr,Si/nr,1/0,ui,-1,nr),$e&&ct.push(Ir)}else{for(let rr=0;rr<vt;rr++)ct.push(et[lt+rr]);if(nr>1)for(const rr of wn){const kr=rr*vt;if(!(et[kr+2]<=le)){et[kr+2]=le;for(let Si=0;Si<vt;Si++)ct.push(et[kr+Si])}}}}return ct}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,le,Te){if(ie[le+st]>1){const Qe=this.clusterProps[ie[le+St]];return Te?Object.assign({},Qe):Qe}const ze=this.points[ie[le+ot]].properties,$e=this.options.map(ze);return Te&&$e===ze?Object.assign({},$e):$e}}function Et(ke,ie,le){return{type:"Feature",id:ke[ie+ot],properties:yt(ke,ie,le),geometry:{type:"Point",coordinates:[(Te=ke[ie],360*(Te-.5)),Wt(ke[ie+1])]}};var Te}function yt(ke,ie,le){const Te=ke[ie+st],ze=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,$e=ke[ie+St],Qe=$e===-1?{}:Object.assign({},le[$e]);return Object.assign(Qe,{cluster:!0,cluster_id:ke[ie+ot],point_count:Te,point_count_abbreviated:ze})}function Lt(ke){return ke/360+.5}function Ct(ke){const ie=Math.sin(ke*Math.PI/180),le=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return le<0?0:le>1?1:le}function Wt(ke){const ie=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function fn(ke,ie,le,Te){let ze=Te;const $e=ie+(le-ie>>1);let Qe,Ze=le-ie;const et=ke[ie],ct=ke[ie+1],vt=ke[le],lt=ke[le+1];for(let Ht=ie+3;Ht<le;Ht+=3){const dn=Zt(ke[Ht],ke[Ht+1],et,ct,vt,lt);if(dn>ze)Qe=Ht,ze=dn;else if(dn===ze){const wn=Math.abs(Ht-$e);wn<Ze&&(Qe=Ht,Ze=wn)}}ze>Te&&(Qe-ie>3&&fn(ke,ie,Qe,Te),ke[Qe+2]=ze,le-Qe>3&&fn(ke,Qe,le,Te))}function Zt(ke,ie,le,Te,ze,$e){let Qe=ze-le,Ze=$e-Te;if(Qe!==0||Ze!==0){const et=((ke-le)*Qe+(ie-Te)*Ze)/(Qe*Qe+Ze*Ze);et>1?(le=ze,Te=$e):et>0&&(le+=Qe*et,Te+=Ze*et)}return Qe=ke-le,Ze=ie-Te,Qe*Qe+Ze*Ze}function Ut(ke,ie,le,Te){const ze={id:ke??null,type:ie,geometry:le,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")kn(ze,le);else if(ie==="Polygon")kn(ze,le[0]);else if(ie==="MultiLineString")for(const $e of le)kn(ze,$e);else if(ie==="MultiPolygon")for(const $e of le)kn(ze,$e[0]);return ze}function kn(ke,ie){for(let le=0;le<ie.length;le+=3)ke.minX=Math.min(ke.minX,ie[le]),ke.minY=Math.min(ke.minY,ie[le+1]),ke.maxX=Math.max(ke.maxX,ie[le]),ke.maxY=Math.max(ke.maxY,ie[le+1])}function Bn(ke,ie,le,Te){if(!ie.geometry)return;const ze=ie.geometry.coordinates;if(ze&&ze.length===0)return;const $e=ie.geometry.type,Qe=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let Ze=[],et=ie.id;if(le.promoteId?et=ie.properties[le.promoteId]:le.generateId&&(et=Te||0),$e==="Point")bn(ze,Ze);else if($e==="MultiPoint")for(const ct of ze)bn(ct,Ze);else if($e==="LineString")Nn(ze,Ze,Qe,!1);else if($e==="MultiLineString"){if(le.lineMetrics){for(const ct of ze)Ze=[],Nn(ct,Ze,Qe,!1),ke.push(Ut(et,"LineString",Ze,ie.properties));return}ft(ze,Ze,Qe,!1)}else if($e==="Polygon")ft(ze,Ze,Qe,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const ct of ie.geometry.geometries)Bn(ke,{id:et,geometry:ct,properties:ie.properties},le,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ct of ze){const vt=[];ft(ct,vt,Qe,!0),Ze.push(vt)}}ke.push(Ut(et,$e,Ze,ie.properties))}function bn(ke,ie){ie.push(vn(ke[0]),Ot(ke[1]),0)}function Nn(ke,ie,le,Te){let ze,$e,Qe=0;for(let et=0;et<ke.length;et++){const ct=vn(ke[et][0]),vt=Ot(ke[et][1]);ie.push(ct,vt,0),et>0&&(Qe+=Te?(ze*vt-ct*$e)/2:Math.sqrt(Math.pow(ct-ze,2)+Math.pow(vt-$e,2))),ze=ct,$e=vt}const Ze=ie.length-3;ie[2]=1,fn(ie,0,Ze,le),ie[Ze+2]=1,ie.size=Math.abs(Qe),ie.start=0,ie.end=ie.size}function ft(ke,ie,le,Te){for(let ze=0;ze<ke.length;ze++){const $e=[];Nn(ke[ze],$e,le,Te),ie.push($e)}}function vn(ke){return ke/360+.5}function Ot(ke){const ie=Math.sin(ke*Math.PI/180),le=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return le<0?0:le>1?1:le}function tn(ke,ie,le,Te,ze,$e,Qe,Ze){if(Te/=ie,$e>=(le/=ie)&&Qe<Te)return ke;if(Qe<le||$e>=Te)return null;const et=[];for(const ct of ke){const vt=ct.geometry;let lt=ct.type;const Ht=ze===0?ct.minX:ct.minY,dn=ze===0?ct.maxX:ct.maxY;if(Ht>=le&&dn<Te){et.push(ct);continue}if(dn<le||Ht>=Te)continue;let wn=[];if(lt==="Point"||lt==="MultiPoint")Rn(vt,wn,le,Te,ze);else if(lt==="LineString")Hn(vt,wn,le,Te,ze,!1,Ze.lineMetrics);else if(lt==="MultiLineString")Xn(vt,wn,le,Te,ze,!1);else if(lt==="Polygon")Xn(vt,wn,le,Te,ze,!0);else if(lt==="MultiPolygon")for(const sr of vt){const nr=[];Xn(sr,nr,le,Te,ze,!0),nr.length&&wn.push(nr)}if(wn.length){if(Ze.lineMetrics&&lt==="LineString"){for(const sr of wn)et.push(Ut(ct.id,lt,sr,ct.tags));continue}lt!=="LineString"&&lt!=="MultiLineString"||(wn.length===1?(lt="LineString",wn=wn[0]):lt="MultiLineString"),lt!=="Point"&&lt!=="MultiPoint"||(lt=wn.length===3?"Point":"MultiPoint"),et.push(Ut(ct.id,lt,wn,ct.tags))}}return et.length?et:null}function Rn(ke,ie,le,Te,ze){for(let $e=0;$e<ke.length;$e+=3){const Qe=ke[$e+ze];Qe>=le&&Qe<=Te&&or(ie,ke[$e],ke[$e+1],ke[$e+2])}}function Hn(ke,ie,le,Te,ze,$e,Qe){let Ze=mr(ke);const et=ze===0?Mn:Fr;let ct,vt,lt=ke.start;for(let nr=0;nr<ke.length-3;nr+=3){const rr=ke[nr],kr=ke[nr+1],Si=ke[nr+2],Ir=ke[nr+3],ui=ke[nr+4],ti=ze===0?rr:kr,Ti=ze===0?Ir:ui;let ji=!1;Qe&&(ct=Math.sqrt(Math.pow(rr-Ir,2)+Math.pow(kr-ui,2))),ti<le?Ti>le&&(vt=et(Ze,rr,kr,Ir,ui,le),Qe&&(Ze.start=lt+ct*vt)):ti>Te?Ti<Te&&(vt=et(Ze,rr,kr,Ir,ui,Te),Qe&&(Ze.start=lt+ct*vt)):or(Ze,rr,kr,Si),Ti<le&&ti>=le&&(vt=et(Ze,rr,kr,Ir,ui,le),ji=!0),Ti>Te&&ti<=Te&&(vt=et(Ze,rr,kr,Ir,ui,Te),ji=!0),!$e&&ji&&(Qe&&(Ze.end=lt+ct*vt),ie.push(Ze),Ze=mr(ke)),Qe&&(lt+=ct)}let Ht=ke.length-3;const dn=ke[Ht],wn=ke[Ht+1],sr=ze===0?dn:wn;sr>=le&&sr<=Te&&or(Ze,dn,wn,ke[Ht+2]),Ht=Ze.length-3,$e&&Ht>=3&&(Ze[Ht]!==Ze[0]||Ze[Ht+1]!==Ze[1])&&or(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&ie.push(Ze)}function mr(ke){const ie=[];return ie.size=ke.size,ie.start=ke.start,ie.end=ke.end,ie}function Xn(ke,ie,le,Te,ze,$e){for(const Qe of ke)Hn(Qe,ie,le,Te,ze,$e,!1)}function or(ke,ie,le,Te){ke.push(ie,le,Te)}function Mn(ke,ie,le,Te,ze,$e){const Qe=($e-ie)/(Te-ie);return or(ke,$e,le+(ze-le)*Qe,1),Qe}function Fr(ke,ie,le,Te,ze,$e){const Qe=($e-le)/(ze-le);return or(ke,ie+(Te-ie)*Qe,$e,1),Qe}function Cr(ke,ie){const le=[];for(let Te=0;Te<ke.length;Te++){const ze=ke[Te],$e=ze.type;let Qe;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")Qe=xr(ze.geometry,ie);else if($e==="MultiLineString"||$e==="Polygon"){Qe=[];for(const Ze of ze.geometry)Qe.push(xr(Ze,ie))}else if($e==="MultiPolygon"){Qe=[];for(const Ze of ze.geometry){const et=[];for(const ct of Ze)et.push(xr(ct,ie));Qe.push(et)}}le.push(Ut(ze.id,$e,Qe,ze.tags))}return le}function xr(ke,ie){const le=[];le.size=ke.size,ke.start!==void 0&&(le.start=ke.start,le.end=ke.end);for(let Te=0;Te<ke.length;Te+=3)le.push(ke[Te]+ie,ke[Te+1],ke[Te+2]);return le}function ir(ke,ie){if(ke.transformed)return ke;const le=1<<ke.z,Te=ke.x,ze=ke.y;for(const $e of ke.features){const Qe=$e.geometry,Ze=$e.type;if($e.geometry=[],Ze===1)for(let et=0;et<Qe.length;et+=2)$e.geometry.push(Yr(Qe[et],Qe[et+1],ie,le,Te,ze));else for(let et=0;et<Qe.length;et++){const ct=[];for(let vt=0;vt<Qe[et].length;vt+=2)ct.push(Yr(Qe[et][vt],Qe[et][vt+1],ie,le,Te,ze));$e.geometry.push(ct)}}return ke.transformed=!0,ke}function Yr(ke,ie,le,Te,ze,$e){return[Math.round(le*(ke*Te-ze)),Math.round(le*(ie*Te-$e))]}function Sr(ke,ie,le,Te,ze){const $e=ie===ze.maxZoom?0:ze.tolerance/((1<<ie)*ze.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:le,y:Te,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ze of ke)Dr(Qe,Ze,$e,ze);return Qe}function Dr(ke,ie,le,Te){const ze=ie.geometry,$e=ie.type,Qe=[];if(ke.minX=Math.min(ke.minX,ie.minX),ke.minY=Math.min(ke.minY,ie.minY),ke.maxX=Math.max(ke.maxX,ie.maxX),ke.maxY=Math.max(ke.maxY,ie.maxY),$e==="Point"||$e==="MultiPoint")for(let Ze=0;Ze<ze.length;Ze+=3)Qe.push(ze[Ze],ze[Ze+1]),ke.numPoints++,ke.numSimplified++;else if($e==="LineString")ki(Qe,ze,ke,le,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let Ze=0;Ze<ze.length;Ze++)ki(Qe,ze[Ze],ke,le,$e==="Polygon",Ze===0);else if($e==="MultiPolygon")for(let Ze=0;Ze<ze.length;Ze++){const et=ze[Ze];for(let ct=0;ct<et.length;ct++)ki(Qe,et[ct],ke,le,!0,ct===0)}if(Qe.length){let Ze=ie.tags||null;if($e==="LineString"&&Te.lineMetrics){Ze={};for(const ct in ie.tags)Ze[ct]=ie.tags[ct];Ze.mapbox_clip_start=ze.start/ze.size,Ze.mapbox_clip_end=ze.end/ze.size}const et={geometry:Qe,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:Ze};ie.id!==null&&(et.id=ie.id),ke.features.push(et)}}function ki(ke,ie,le,Te,ze,$e){const Qe=Te*Te;if(Te>0&&ie.size<(ze?Qe:Te))return void(le.numPoints+=ie.length/3);const Ze=[];for(let et=0;et<ie.length;et+=3)(Te===0||ie[et+2]>Qe)&&(le.numSimplified++,Ze.push(ie[et],ie[et+1])),le.numPoints++;ze&&function(et,ct){let vt=0;for(let lt=0,Ht=et.length,dn=Ht-2;lt<Ht;dn=lt,lt+=2)vt+=(et[lt]-et[dn])*(et[lt+1]+et[dn+1]);if(vt>0===ct)for(let lt=0,Ht=et.length;lt<Ht/2;lt+=2){const dn=et[lt],wn=et[lt+1];et[lt]=et[Ht-2-lt],et[lt+1]=et[Ht-1-lt],et[Ht-2-lt]=dn,et[Ht-1-lt]=wn}}(Ze,$e),ke.push(Ze)}const ns={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Vo{constructor(ie,le){const Te=(le=this.options=function($e,Qe){for(const Ze in Qe)$e[Ze]=Qe[Ze];return $e}(Object.create(ns),le)).debug;if(Te&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let ze=function($e,Qe){const Ze=[];if($e.type==="FeatureCollection")for(let et=0;et<$e.features.length;et++)Bn(Ze,$e.features[et],Qe,et);else Bn(Ze,$e.type==="Feature"?$e:{geometry:$e},Qe);return Ze}(ie,le);this.tiles={},this.tileCoords=[],Te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ze=function($e,Qe){const Ze=Qe.buffer/Qe.extent;let et=$e;const ct=tn($e,1,-1-Ze,Ze,0,-1,2,Qe),vt=tn($e,1,1-Ze,2+Ze,0,-1,2,Qe);return(ct||vt)&&(et=tn($e,1,-Ze,1+Ze,0,-1,2,Qe)||[],ct&&(et=Cr(ct,1).concat(et)),vt&&(et=et.concat(Cr(vt,-1)))),et}(ze,le),ze.length&&this.splitTile(ze,0,0,0),Te&&(ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,le,Te,ze,$e,Qe,Ze){const et=[ie,le,Te,ze],ct=this.options,vt=ct.debug;for(;et.length;){ze=et.pop(),Te=et.pop(),le=et.pop(),ie=et.pop();const lt=1<<le,Ht=zo(le,Te,ze);let dn=this.tiles[Ht];if(!dn&&(vt>1&&console.time("creation"),dn=this.tiles[Ht]=Sr(ie,le,Te,ze,ct),this.tileCoords.push({z:le,x:Te,y:ze}),vt)){vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,Te,ze,dn.numFeatures,dn.numPoints,dn.numSimplified),console.timeEnd("creation"));const ji=`z${le}`;this.stats[ji]=(this.stats[ji]||0)+1,this.total++}if(dn.source=ie,$e==null){if(le===ct.indexMaxZoom||dn.numPoints<=ct.indexMaxPoints)continue}else{if(le===ct.maxZoom||le===$e)continue;if($e!=null){const ji=$e-le;if(Te!==Qe>>ji||ze!==Ze>>ji)continue}}if(dn.source=null,ie.length===0)continue;vt>1&&console.time("clipping");const wn=.5*ct.buffer/ct.extent,sr=.5-wn,nr=.5+wn,rr=1+wn;let kr=null,Si=null,Ir=null,ui=null,ti=tn(ie,lt,Te-wn,Te+nr,0,dn.minX,dn.maxX,ct),Ti=tn(ie,lt,Te+sr,Te+rr,0,dn.minX,dn.maxX,ct);ie=null,ti&&(kr=tn(ti,lt,ze-wn,ze+nr,1,dn.minY,dn.maxY,ct),Si=tn(ti,lt,ze+sr,ze+rr,1,dn.minY,dn.maxY,ct),ti=null),Ti&&(Ir=tn(Ti,lt,ze-wn,ze+nr,1,dn.minY,dn.maxY,ct),ui=tn(Ti,lt,ze+sr,ze+rr,1,dn.minY,dn.maxY,ct),Ti=null),vt>1&&console.timeEnd("clipping"),et.push(kr||[],le+1,2*Te,2*ze),et.push(Si||[],le+1,2*Te,2*ze+1),et.push(Ir||[],le+1,2*Te+1,2*ze),et.push(ui||[],le+1,2*Te+1,2*ze+1)}}getTile(ie,le,Te){ie=+ie,le=+le,Te=+Te;const ze=this.options,{extent:$e,debug:Qe}=ze;if(ie<0||ie>24)return null;const Ze=1<<ie,et=zo(ie,le=le+Ze&Ze-1,Te);if(this.tiles[et])return ir(this.tiles[et],$e);Qe>1&&console.log("drilling down to z%d-%d-%d",ie,le,Te);let ct,vt=ie,lt=le,Ht=Te;for(;!ct&&vt>0;)vt--,lt>>=1,Ht>>=1,ct=this.tiles[zo(vt,lt,Ht)];return ct&&ct.source?(Qe>1&&(console.log("found parent tile z%d-%d-%d",vt,lt,Ht),console.time("drilling down")),this.splitTile(ct.source,vt,lt,Ht,ie,le,Te),Qe>1&&console.timeEnd("drilling down"),this.tiles[et]?ir(this.tiles[et],$e):null):null}}function zo(ke,ie,le){return 32*((1<<ke)*le+ie)+ke}function Rl(ke,ie){const le=ke.tileID.canonical;if(!this._geoJSONIndex)return void ie(null,null);const Te=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!Te)return void ie(null,null);const ze=new ee(Te.features);let $e=dt(ze);$e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),ie(null,{vectorTile:ze,rawData:$e.buffer})}class ma extends j{constructor(ie,le,Te,ze,$e,Qe,Ze){super(ie,le,Te,ze,$e,Rl,Ze),Qe&&(this.loadGeoJSON=Qe),this._dynamicIndex=new ue}loadData(ie,le){const Te=ie&&ie.request,ze=Te&&Te.collectResourceTiming;this.loadGeoJSON(ie,($e,Qe)=>{if($e||!Qe)return le($e);if(typeof Qe!="object")return le(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));{try{if(ie.filter){const et=i.X(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(et.result==="error")throw new Error(et.value.map(ct=>`${ct.key}: ${ct.message}`).join(", "));Qe.features=Qe.features.filter(ct=>et.value.evaluate({zoom:0},ct))}ie.dynamic?(Qe.type==="Feature"&&(Qe={type:"FeatureCollection",features:[Qe]}),ie.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Qe.features,this.loaded),ie.cluster&&(Qe.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ie.cluster?new Dt(function({superclusterOptions:et,clusterProperties:ct}){if(!ct||!et)return et;const vt={},lt={},Ht={accumulated:null,zoom:0},dn={properties:null},wn=Object.keys(ct);for(const sr of wn){const[nr,rr]=ct[sr],kr=i.X(rr),Si=i.X(typeof nr=="string"?[nr,["accumulated"],["get",sr]]:nr);vt[sr]=kr.value,lt[sr]=Si.value}return et.map=sr=>{dn.properties=sr;const nr={};for(const rr of wn)nr[rr]=vt[rr].evaluate(Ht,dn);return nr},et.reduce=(sr,nr)=>{dn.properties=nr;for(const rr of wn)Ht.accumulated=sr[rr],sr[rr]=lt[rr].evaluate(Ht,dn)},et}(ie)).load(Qe.features):ie.dynamic?this._dynamicIndex:function(et,ct){return new Vo(et,ct)}(Qe,ie.geojsonVtOptions)}catch(et){return le(et)}const Ze={};if(ze){const et=m(Te);et&&(Ze.resourceTiming={},Ze.resourceTiming[ie.source]=JSON.parse(JSON.stringify(et)))}le(null,Ze)}})}reloadTile(ie,le){const Te=this.loaded;return Te&&Te[ie.uid]?ie.partial?le(null,void 0):super.reloadTile(ie,le):this.loadTile(ie,le)}loadGeoJSON(ie,le){if(ie.request)i.n(ie.request,le);else{if(typeof ie.data!="string")return le(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));try{return le(null,JSON.parse(ie.data))}catch{return le(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ie,le){try{le(null,this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId))}catch(Te){le(Te)}}getClusterChildren(ie,le){try{le(null,this._geoJSONIndex.getChildren(ie.clusterId))}catch(Te){le(Te)}}getClusterLeaves(ie,le){try{le(null,this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset))}catch(Te){le(Te)}}}class mn{constructor(ie,le){this.tileID=new i.aM(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.tileZoom=ie.tileZoom,this.uid=ie.uid,this.zoom=ie.zoom,this.canonical=ie.tileID.canonical,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ie.projection,this.brightness=le}parse(ie,le,Te,ze){this.status="parsing";const $e=new i.aM(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),Qe=[],Ze=le.familiesBySource[Te.source],et=new i.f0($e,Te.promoteId);et.bucketLayerIDs=[],et.is3DTile=!0,i.fi(ie).then(ct=>{if(!ct)return ze(new Error("Could not parse tile"));const vt=i.fj(ct,1/i.cT(Te.tileID.canonical)),lt=ct.json.extensionsUsed&&ct.json.extensionsUsed.includes("MAPBOX_mesh_features")||ct.json.asset.extras&&ct.json.asset.extras.MAPBOX_mesh_features,Ht=ct.json.extensionsUsed&&ct.json.extensionsUsed.includes("EXT_meshopt_compression"),dn=new i.aa(this.zoom,{brightness:this.brightness});for(const wn in Ze)for(const sr of Ze[wn]){const nr=sr[0];et.bucketLayerIDs.push(sr.map(kr=>i.C(kr.id,kr.scope))),nr.recalculate(dn,[]);const rr=new i.fk(sr,vt,$e,lt,Ht,this.brightness,et);lt||(rr.needsUpload=!0),Qe.push(rr),rr.evaluate(nr)}this.status="done",ze(null,{buckets:Qe,featureIndex:et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(ct=>ze(new Error(ct.message)))}}class ea{constructor(ie,le,Te,ze,$e,Qe,Ze){this.actor=ie,this.layerIndex=le,this.availableImages=Te,this.availableModels=ze,this.brightness=Ze,this.loading={},this.loaded={}}loadTile(ie,le){const Te=ie.uid,ze=this.loading[Te]=new mn(ie,this.brightness);i.br(ie.request,($e,Qe)=>{const Ze=!this.loading[Te];return delete this.loading[Te],Ze||$e?(ze.status="done",Ze||(this.loaded[Te]=ze),le($e)):Qe&&Qe.byteLength!==0?void ze.parse(Qe,this.layerIndex,ie,(et,ct)=>{ze.status="done",this.loaded=this.loaded||{},this.loaded[Te]=ze,et||!ct?le(et):le(null,ct)}):(ze.status="done",this.loaded[Te]=ze,le())})}reloadTile(ie,le){const Te=this.loaded,ze=ie.uid;if(Te&&Te[ze]){const $e=Te[ze];$e.projection=ie.projection,$e.brightness=ie.brightness;const Qe=(Ze,et)=>{$e.reloadCallback&&(delete $e.reloadCallback,this.loadTile(ie,le)),le(Ze,et)};$e.status==="parsing"?$e.reloadCallback=Qe:$e.status==="done"&&this.loadTile(ie,le)}}abortTile(ie,le){const Te=ie.uid;this.loading[Te]&&delete this.loading[Te],le()}removeTile(ie,le){const Te=this.loaded,ze=ie.uid;Te&&Te[ze]&&delete Te[ze],le()}}class Pr{constructor(ie){this.self=ie,this.actor=new i.fm(ie,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new i.y,this.projections={},this.defaultProjection=i.ce({name:"mercator"}),this.workerSourceTypes={vector:j,geojson:ma,"raster-dem":V,"raster-array":G,"batched-model":ea},this.workerSources={},this.self.registerWorkerSource=(le,Te)=>{if(this.workerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.workerSourceTypes[le]=Te},this.self.registerRTLTextPlugin=le=>{if(i.fn.isParsed())throw new Error("RTL text plugin already registered.");i.fn.applyArabicShaping=le.applyArabicShaping,i.fn.processBidirectionalText=le.processBidirectionalText,i.fn.processStyledBidirectionalText=le.processStyledBidirectionalText}}clearCaches(ie,le,Te){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.availableModels[ie],delete this.workerSources[ie],Te()}checkIfReady(ie,le,Te){Te()}setReferrer(ie,le){this.referrer=le}spriteLoaded(ie,le){this.isSpriteLoaded[ie]||(this.isSpriteLoaded[ie]={});const{scope:Te,isLoaded:ze}=le;if(this.isSpriteLoaded[ie][Te]=ze,this.workerSources[ie]&&this.workerSources[ie][Te])for(const $e in this.workerSources[ie][Te]){const Qe=this.workerSources[ie][Te][$e];for(const Ze in Qe){const et=Qe[Ze];et instanceof j&&(et.isSpriteLoaded=ze,et.fire(new i.A("isSpriteLoaded")))}}}setImages(ie,le,Te){this.availableImages[ie]||(this.availableImages[ie]={});const{scope:ze,images:$e}=le;if(this.availableImages[ie][ze]=$e,this.workerSources[ie]&&this.workerSources[ie][ze]){for(const Qe in this.workerSources[ie][ze]){const Ze=this.workerSources[ie][ze][Qe];for(const et in Ze)Ze[et].availableImages=$e}Te()}else Te()}setModels(ie,{scope:le,models:Te},ze){if(this.availableModels[ie]||(this.availableModels[ie]={}),this.availableModels[ie][le]=Te,this.workerSources[ie]&&this.workerSources[ie][le]){for(const $e in this.workerSources[ie][le]){const Qe=this.workerSources[ie][le][$e];for(const Ze in Qe)Qe[Ze].availableModels=Te}ze()}else ze()}setProjection(ie,le){this.projections[ie]=i.ce(le)}setBrightness(ie,le,Te){this.brightness=le,Te()}setLayers(ie,le,Te){this.getLayerIndex(ie,le.scope).replace(le.layers,le.options),Te()}updateLayers(ie,le,Te){this.getLayerIndex(ie,le.scope).update(le.layers,le.removedIds,le.options),Te()}loadTile(ie,le,Te){le.projection=this.projections[ie]||this.defaultProjection,this.getWorkerSource(ie,le.type,le.source,le.scope).loadTile(le,Te)}decodeRasterArray(ie,le,Te){this.getWorkerSource(ie,le.type,le.source,le.scope).decodeRasterArray(le,Te)}reloadTile(ie,le,Te){le.projection=this.projections[ie]||this.defaultProjection,this.getWorkerSource(ie,le.type,le.source,le.scope).reloadTile(le,Te)}abortTile(ie,le,Te){this.getWorkerSource(ie,le.type,le.source,le.scope).abortTile(le,Te)}removeTile(ie,le,Te){this.getWorkerSource(ie,le.type,le.source,le.scope).removeTile(le,Te)}removeSource(ie,le,Te){if(!(this.workerSources[ie]&&this.workerSources[ie][le.scope]&&this.workerSources[ie][le.scope][le.type]&&this.workerSources[ie][le.scope][le.type][le.source]))return;const ze=this.workerSources[ie][le.scope][le.type][le.source];delete this.workerSources[ie][le.scope][le.type][le.source],ze.removeSource!==void 0?ze.removeSource(le,Te):Te()}loadWorkerSource(ie,le,Te){try{this.self.importScripts(le.url),Te()}catch(ze){Te(ze.toString())}}syncRTLPluginState(ie,le,Te){try{i.fn.setState(le);const ze=i.fn.getPluginURL();if(i.fn.isLoaded()&&!i.fn.isParsed()&&ze!=null){this.self.importScripts(ze);const $e=i.fn.isParsed();Te($e?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),$e)}}catch(ze){Te(ze.toString())}}setDracoUrl(ie,le){this.dracoUrl=le}getAvailableImages(ie,le){this.availableImages[ie]||(this.availableImages[ie]={});let Te=this.availableImages[ie][le];return Te||(Te=[]),Te}getAvailableModels(ie,le){this.availableModels[ie]||(this.availableModels[ie]={});let Te=this.availableModels[ie][le];return Te||(Te={}),Te}getLayerIndex(ie,le){this.layerIndexes[ie]||(this.layerIndexes[ie]={});let Te=this.layerIndexes[ie][le];return Te||(Te=this.layerIndexes[ie][le]=new C,Te.scope=le),Te}getWorkerSource(ie,le,Te,ze){const $e=this.workerSources;return $e[ie]||($e[ie]={}),$e[ie][ze]||($e[ie][ze]={}),$e[ie][ze][le]||($e[ie][ze][le]={}),this.isSpriteLoaded[ie]||(this.isSpriteLoaded[ie]={}),$e[ie][ze][le][Te]||($e[ie][ze][le][Te]=new this.workerSourceTypes[le]({send:(Qe,Ze,et,ct,vt,lt)=>this.actor.send(Qe,Ze,et,ie,vt,lt),scheduler:this.actor.scheduler},this.getLayerIndex(ie,ze),this.getAvailableImages(ie,ze),this.getAvailableModels(ie,ze),this.isSpriteLoaded[ie][ze],void 0,this.brightness)),$e[ie][ze][le][Te]}rasterizeImagesWorker(ie,le,Te){const ze=new Map;for(const[$e,{image:Qe,imageVariant:Ze}]of le.tasks.entries()){const et=this.imageRasterizer.rasterize(Ze,Qe,le.scope,ie);ze.set($e,et)}Te(void 0,ze)}removeRasterizedImages(ie,le,Te){this.imageRasterizer.removeImagesFromCacheByIds(le.imageIds,le.scope,ie),Te()}enforceCacheSizeLimit(ie,le){i.fo(le)}getWorkerPerformanceMetrics(ie,le,Te){Te(void 0,void 0)}}return i.fl(self)&&(self.worker=new Pr(self)),Pr}),c(["./shared"],function(i){var m="3.12.0";const x={create:"create",load:"load",fullLoad:"fullLoad"},T={mark(y){performance.mark(y)},measure(y,a,h){performance.measure(y,a,h)}};function C(y){const a=y.name.split("?")[0];return i.a(a)&&a.includes("mapbox-gl.js")?"javascript":i.a(a)&&a.includes("mapbox-gl.css")?"css":i.b(a)?"fontRange":i.c(a)?"sprite":i.i(a)?"style":i.d(a)?"tilejson":"other"}var A,I={},k=function(){if(A)return I;function y(v){return!a(v)}function a(v){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,D,O=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(O);try{D=new Worker(N),E=!0}catch{E=!1}return D&&D.terminate(),URL.revokeObjectURL(N),E}()?function(){var E=document.createElement("canvas");E.width=E.height=1;var D=E.getContext("2d");if(!D)return!1;var O=D.getImageData(0,0,1,1);return O&&O.width===E.width}()?(h[S=v&&v.failIfMajorPerformanceCaveat]===void 0&&(h[S]=function(E){var D,O=function(N){var W=document.createElement("canvas"),Z=Object.create(y.webGLContextAttributes);return Z.failIfMajorPerformanceCaveat=N,W.getContext("webgl2",Z)}(E);if(!O)return!1;try{D=O.createShader(O.VERTEX_SHADER)}catch{return!1}return!(!D||O.isContextLost())&&(O.shaderSource(D,"void main() {}"),O.compileShader(D),O.getShaderParameter(D,O.COMPILE_STATUS)===!0)}(S)),h[S]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var S}A=1,I.supported=y,I.notSupportedReason=a;var h={};return y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},I}();function B(y,a,h){const v=document.createElement(y);return a!=null&&(v.className=a),h&&h.appendChild(v),v}function j(y,a,h){const v=document.createElementNS("http://www.w3.org/2000/svg",y);for(const S of Object.keys(a))v.setAttributeNS(null,S,String(a[S]));return h&&h.appendChild(v),v}const V=typeof document<"u"?document.documentElement&&document.documentElement.style:null,H=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let G;function X(){V&&H&&(G=V[H],V[H]="none")}function Q(){V&&H&&(V[H]=G)}function ee(y){y.preventDefault(),y.stopPropagation(),window.removeEventListener("click",ee,!0)}function ce(){window.addEventListener("click",ee,!0),window.setTimeout(()=>{window.removeEventListener("click",ee,!0)},0)}function fe(y,a){const h=y.getBoundingClientRect();return xe(y,h,a)}function ue(y,a){const h=y.getBoundingClientRect(),v=[];for(let S=0;S<a.length;S++)v.push(xe(y,h,a[S]));return v}function ae(y){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&y.button===2&&y.ctrlKey?0:y.button}function xe(y,a,h){const v=y.offsetWidth===a.width?1:y.offsetWidth/a.width;return new i.P((h.clientX-a.left)*v,(h.clientY-a.top)*v)}const we="01",Me="NO_ACCESS_TOKEN";class Se{constructor(a,h,v){this._transformRequestFn=a,this._customAccessToken=h,this._silenceAuthErrors=!!v,this._createSkuToken()}_createSkuToken(){const a=function(){let h="";for(let v=0;v<10;v++)h+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",we,h].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,h){return this._transformRequestFn&&this._transformRequestFn(a,h)||{url:a}}normalizeStyleURL(a,h){if(!i.f(a))return a;const v=_e(a);return v.params.push(`sdk=js-${m}`),v.path=`/styles/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||h)}normalizeGlyphsURL(a,h){if(!i.f(a))return a;const v=_e(a);return v.path=`/fonts/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||h)}normalizeModelURL(a,h){if(!i.f(a))return a;const v=_e(a);return v.path=`/models/v1${v.path}`,this._makeAPIURL(v,this._customAccessToken||h)}normalizeSourceURL(a,h,v,S){if(!i.f(a))return a;const E=_e(a);return E.path=`/v4/${E.authority}.json`,E.params.push("secure"),v&&E.params.push(`language=${v}`),S&&E.params.push(`worldview=${S}`),this._makeAPIURL(E,this._customAccessToken||h)}normalizeIconsetURL(a,h){const v=_e(a);return i.f(a)?(v.path=`/styles/v1${v.path}/iconset.pbf`,this._makeAPIURL(v,this._customAccessToken||h)):Pe(v)}normalizeSpriteURL(a,h,v,S){const E=_e(a);return i.f(a)?(E.path=`/styles/v1${E.path}/sprite${h}${v}`,this._makeAPIURL(E,this._customAccessToken||S)):(E.path+=`${h}${v}`,Pe(E))}normalizeTileURL(a,h,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!i.f(a))return a;const S=_e(a);S.path=S.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${h||v&&S.authority!=="raster"&&v===512?"@2x":""}${i.m.supported?".webp":"$1"}`),S.authority==="raster"?S.path=`/${i.e.RASTER_URL_PREFIX}${S.path}`:S.authority==="rasterarrays"?S.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${S.path}`:S.authority==="3dtiles"?S.path=`/${i.e.TILES3D_URL_PREFIX}${S.path}`:(S.path=S.path.replace(/^.+\/v4\//,"/"),S.path=`/${i.e.TILE_URL_VERSION}${S.path}`);const E=this._customAccessToken||function(D){for(const O of D){const N=O.match(/^access_token=(.*)$/);if(N)return N[1]}return null}(S.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&S.params.push(`sku=${this._skuToken}`),this._makeAPIURL(S,E)}canonicalizeTileURL(a,h){const v=_e(a);if(!v.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!v.path.match(/\.[\w]+$/))return a;let S="mapbox://";v.path.match(/^\/raster\/v1\//)?S+=`raster/${v.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:v.path.match(/^\/rasterarrays\/v1\//)?S+=`rasterarrays/${v.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:S+=`tiles/${v.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let E=v.params;return h&&(E=E.filter(D=>!D.match(/^access_token=/))),E.length&&(S+=`?${E.join("&")}`),S}canonicalizeTileset(a,h){const v=!!h&&i.f(h),S=[];for(const E of a.tiles||[])i.h(E)?S.push(this.canonicalizeTileURL(E,v)):S.push(E);return S}_makeAPIURL(a,h){const v="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",S=_e(i.e.API_URL);if(a.protocol=S.protocol,a.authority=S.authority,a.protocol==="http"){const E=a.params.indexOf("secure");E>=0&&a.params.splice(E,1)}if(S.path!=="/"&&(a.path=`${S.path}${a.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return Pe(a);if(h=h||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!h)throw new Error(`An API access token is required to use Mapbox GL. ${v}`);if(h[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${v}`)}return a.params=a.params.filter(E=>E.indexOf("access_token")===-1),a.params.push(`access_token=${h||""}`),Pe(a)}}const Ae=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _e(y){const a=y.match(Ae);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Pe(y){const a=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${a}`}const We="mapbox.eventData";function Fe(y){if(!y)return null;const a=y.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(i.j(a[1]))}catch{return null}}class Ce{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const h=Fe(i.e.ACCESS_TOKEN);let v="";return v=h&&h.u?i.k(h.u):i.e.ACCESS_TOKEN||"",a?`${We}.${a}:${v}`:`${We}:${v}`}fetchEventData(){const a=i.s("localStorage"),h=this.getStorageKey(),v=this.getStorageKey("uuid");if(a)try{const S=localStorage.getItem(h);S&&(this.eventData=JSON.parse(S));const E=localStorage.getItem(v);E&&(this.anonId=E)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const a=i.s("localStorage"),h=this.getStorageKey(),v=this.getStorageKey("uuid"),S=this.anonId;if(a&&S)try{localStorage.setItem(v,S),Object.keys(this.eventData).length>=1&&localStorage.setItem(h,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,h,v,S){if(!i.e.EVENTS_URL)return;const E=_e(i.e.EVENTS_URL);E.params.push(`access_token=${S||i.e.ACCESS_TOKEN||""}`);const D={event:this.type,created:new Date(a).toISOString()},O=h?i.l(D,h):D,N={url:Pe(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([O])};this.pendingRequest=i.p(N,W=>{this.pendingRequest=null,v(W),this.saveEventData(),this.processRequests(S)})}queueRequest(a,h){this.queue.push(a),this.processRequests(h)}}const He=new class extends Ce{constructor(y){super("appUserTurnstile"),this._customAccessToken=y}postTurnstileEvent(y,a){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(y)&&y.some(h=>i.f(h)||i.h(h))&&this.queueRequest(Date.now(),a)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=Fe(i.e.ACCESS_TOKEN),h=a?a.u:i.e.ACCESS_TOKEN;let v=h!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),v=!0);const S=this.queue.shift();if(this.eventData.lastSuccess){const E=new Date(this.eventData.lastSuccess),D=new Date(S),O=(S-this.eventData.lastSuccess)/864e5;v=v||O>=1||O<-1||E.getDate()!==D.getDate()}else v=!0;v?this.postEvent(S,{sdkIdentifier:"mapbox-gl-js",sdkVersion:m,skuId:we,"enabled.telemetry":!1,userId:this.anonId},E=>{E||(this.eventData.lastSuccess=S,this.eventData.tokenU=h)},y):this.processRequests()}},dt=He.postTurnstileEvent.bind(He),gt=new class extends Ce{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(y,a,h,v){this.skuToken=a,this.errorCb=v,i.e.EVENTS_URL&&(h||i.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},h):this.errorCb(new Error(Me)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:h}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:m,skuId:we,skuToken:this.skuToken,userId:this.anonId},v=>{v?this.errorCb(v):a&&(this.success[a]=!0)},y))}remove(){this.errorCb=null}},Nt=gt.postMapLoadEvent.bind(gt),wt=new class extends Ce{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(y){let a=this.mapInstanceIdMap.get(y);return a||(a=i.u(),this.mapInstanceIdMap.set(y,a)),a}getEventId(y){const a=this.eventIdPerMapInstanceMap.get(y)||0;return this.eventIdPerMapInstanceMap.set(y,a+1),a}postStyleLoadEvent(y,a){const{map:h,style:v,importedStyles:S}=a;if(!i.e.EVENTS_URL||!y&&!i.e.ACCESS_TOKEN)return;const E=this.getMapInstanceId(h),D={mapInstanceId:E,eventId:this.getEventId(E),style:v};S.length&&(D.importedStyles=S),this.queueRequest({timestamp:Date.now(),payload:D},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,payload:h}=this.queue.shift();this.postEvent(a,h,()=>{},y)}},ot=wt.postStyleLoadEvent.bind(wt),st=new class extends Ce{constructor(){super("gljs.performance")}postPerformanceEvent(y,a){i.e.EVENTS_URL&&(y||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},y)}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:h}=this.queue.shift(),v=function(S){const E=performance.getEntriesByType("resource"),D=performance.getEntriesByType("mark"),O=function(oe){const ge={};if(oe){for(const pe in oe)if(pe!=="other")for(const ve of oe[pe]){const me=`${pe}ResolveRangeMin`,Re=`${pe}ResolveRangeMax`,Be=`${pe}RequestCount`,Ue=`${pe}RequestCachedCount`;ge[me]=Math.min(ge[me]||1/0,ve.startTime),ge[Re]=Math.max(ge[Re]||-1/0,ve.responseEnd);const Ke=Ye=>{ge[Ye]===void 0&&(ge[Ye]=0),++ge[Ye]};ve.transferSize!==void 0&&ve.transferSize===0&&Ke(Ue),Ke(Be)}}return ge}(function(oe,ge){const pe={};if(oe)for(const ve of oe){const me=ge(ve);pe[me]===void 0&&(pe[me]=[]),pe[me].push(ve)}return pe}(E,C)),N=window.devicePixelRatio,W=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Z=W?W.effectiveType:void 0,te={counters:[],metadata:[],attributes:[]},J=(oe,ge,pe)=>{pe!=null&&oe.push({name:ge,value:pe.toString()})};for(const oe in O)J(te.counters,oe,O[oe]);if(S.interactionRange[0]!==1/0&&S.interactionRange[1]!==-1/0&&(J(te.counters,"interactionRangeMin",S.interactionRange[0]),J(te.counters,"interactionRangeMax",S.interactionRange[1])),D)for(const oe of Object.keys(x)){const ge=x[oe],pe=D.find(ve=>ve.name===ge);pe&&J(te.counters,ge,pe.startTime)}return J(te.counters,"visibilityHidden",S.visibilityHidden),J(te.attributes,"style",function(oe){if(oe)for(const ge of oe){const pe=ge.name.split("?")[0];if(i.i(pe)){const ve=pe.split("/").slice(-2);if(ve.length===2)return`mapbox://styles/${ve[0]}/${ve[1]}`}}}(E)),J(te.attributes,"terrainEnabled",S.terrainEnabled?"true":"false"),J(te.attributes,"fogEnabled",S.fogEnabled?"true":"false"),J(te.attributes,"projection",S.projection),J(te.attributes,"zoom",S.zoom),J(te.metadata,"devicePixelRatio",N),J(te.metadata,"connectionEffectiveType",Z),J(te.metadata,"navigatorUserAgent",navigator.userAgent),J(te.metadata,"screenWidth",window.screen.width),J(te.metadata,"screenHeight",window.screen.height),J(te.metadata,"windowWidth",window.innerWidth),J(te.metadata,"windowHeight",window.innerHeight),J(te.metadata,"mapWidth",S.width/N),J(te.metadata,"mapHeight",S.height/N),J(te.metadata,"webglRenderer",S.renderer),J(te.metadata,"webglVendor",S.vendor),J(te.metadata,"sdkVersion",m),J(te.metadata,"sdkIdentifier","mapbox-gl-js"),te}(h);for(const S of v.metadata);for(const S of v.counters);for(const S of v.attributes);this.postEvent(a,v,()=>{},y)}},St=st.postPerformanceEvent.bind(st),Dt=new class extends Ce{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(y,a,h,v){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const S=_e(i.e.API_URL+i.e.SESSION_PATH);S.params.push(`sku=${a||""}`),S.params.push(`access_token=${v||i.e.ACCESS_TOKEN||""}`);const E={url:Pe(S),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(E,D=>{this.pendingRequest=null,h(D),this.saveEventData(),this.processRequests(v)})}getSessionAPI(y,a,h,v){this.skuToken=a,this.errorCb=v,i.e.SESSION_PATH&&i.e.API_URL&&(h||i.e.ACCESS_TOKEN?this.queueRequest({id:y,timestamp:Date.now()},h):this.errorCb(new Error(Me)))}processRequests(y){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:h}=this.queue.shift();a&&this.success[a]||this.getSession(h,this.skuToken,v=>{v?this.errorCb(v):a&&(this.success[a]=!0)},y)}remove(){this.errorCb=null}},Et=Dt.getSessionAPI.bind(Dt),yt=new Set;function Lt(y,a){a?yt.add(y):yt.delete(y)}class Ct{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(a,h){this._updatedSourceCaches[a]=h,this.setDirty()}discardSourceCacheUpdate(a){delete this._updatedSourceCaches[a]}updateLayer(a){const h=a.scope;this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._updatedLayers[h].add(a.id),this.setDirty()}removeLayer(a){const h=a.scope;this._removedLayers[h]=this._removedLayers[h]||{},this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._removedLayers[h][a.id]=a,this._updatedLayers[h].delete(a.id),this._updatedPaintProps.delete(a.fqid),this.setDirty()}getRemovedLayer(a){return this._removedLayers[a.scope]?this._removedLayers[a.scope][a.id]:null}discardLayerRemoval(a){this._removedLayers[a.scope]&&delete this._removedLayers[a.scope][a.id]}getLayerUpdatesByScope(){const a={};for(const h in this._updatedLayers)a[h]=a[h]||{},a[h].updatedIds=Array.from(this._updatedLayers[h].values());for(const h in this._removedLayers)a[h]=a[h]||{},a[h].removedIds=Object.keys(this._removedLayers[h]);return a}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(a){this._updatedPaintProps.add(a.fqid),this.setDirty()}getUpdatedImages(a){return this._updatedImages[a]?Array.from(this._updatedImages[a].values()):[]}updateImage(a,h){this._updatedImages[h]=this._updatedImages[h]||new Set,this._updatedImages[h].add(i.I.toString(a)),this.setDirty()}resetUpdatedImages(a){this._updatedImages[a]&&this._updatedImages[a].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function Wt(y){const{userImage:a}=y;return!!(a&&a.render&&a.render())&&(y.data.replace(new Uint8Array(a.data.buffer)),!0)}class fn extends i.E{constructor(a){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=a,a!=="raster"&&i.t()&&(this.imageRasterizerDispatcher=new i.D(i.x(),this,"Image Rasterizer Worker",1))}addScope(a){this.loaded.set(a,!1),this.imageProviders.set(a,new Map),this.images.set(a,new Map),this.updatedImages.set(a,new Set),this.callbackDispatchedThisFrame.set(a,new Set),this.patterns.set(a,new Map),this.atlasImage.set(a,new i.r({width:1,height:1}))}removeScope(a){this.loaded.delete(a),this.imageProviders.delete(a),this.images.delete(a),this.updatedImages.delete(a),this.callbackDispatchedThisFrame.delete(a),this.patterns.delete(a),this.atlasImage.delete(a);const h=this.atlasTexture.get(a);h&&(h.destroy(),this.atlasTexture.delete(a))}addImageProvider(a,h){this.imageProviders.has(h)||this.imageProviders.set(h,new Map),this.imageProviders.get(h).set(a.id,a)}removeImageProvider(a,h){this.imageProviders.has(h)&&this.imageProviders.get(h).delete(a)}getPendingImageProviders(){const a=[];for(const h of this.imageProviders.values())for(const v of h.values())v.hasPendingRequests()&&a.push(v);return a}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new i.y),this._imageRasterizer}isLoaded(){for(const a of this.loaded.keys())if(!this.loaded.get(a))return!1;return!0}setLoaded(a,h){if(this.loaded.get(h)!==a&&(this.loaded.set(h,a),a)){for(const{ids:v,callback:S}of this.requestors)this._notify(v,h,S);this.requestors=[]}}hasImage(a,h){return!!this.getImage(a,h)}getImage(a,h){return this.images.get(h).get(a.toString())}addImage(a,h,v){this._validate(a,v)&&this.images.get(h).set(a.toString(),v)}_validate(a,h){let v=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new i.z(new Error(`Image "${a.name}" has invalid "stretchX" value`))),v=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new i.z(new Error(`Image "${a.name}" has invalid "stretchY" value`))),v=!1),this._validateContent(h.content,h)||(this.fire(new i.z(new Error(`Image "${a.name}" has invalid "content" value`))),v=!1),v}_validateStretch(a,h){if(!a)return!0;let v=0;for(const S of a){if(S[0]<v||S[1]<S[0]||h<S[1])return!1;v=S[1]}return!0}_validateContent(a,h){return a?a.length!==4||!h.usvg&&(a[0]<0||h.data.width<a[0]||a[1]<0||h.data.height<a[1]||a[2]<0||h.data.width<a[2]||a[3]<0||h.data.height<a[3])?!1:!(a[2]<a[0]||a[3]<a[1]):!0}updateImage(a,h,v){const S=this.images.get(h).get(a.toString());v.version=S.version+1,this.images.get(h).set(a.toString(),v),this.updatedImages.get(h).add(a),this.removeFromImageRasterizerCache(a,h)}clearUpdatedImages(a){this.updatedImages.get(a).clear()}removeFromImageRasterizerCache(a,h){this.spriteFormat!=="raster"&&(i.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[a],scope:h}):this.imageRasterizer.removeImagesFromCacheByIds([a],h))}removeImage(a,h){const v=this.images.get(h),S=v.get(a.toString());v.delete(a.toString()),this.patterns.get(h).delete(a.toString()),this.removeFromImageRasterizerCache(a,h),S.userImage&&S.userImage.onRemove&&S.userImage.onRemove()}listImages(a){return Array.from(this.images.get(a).keys()).map(h=>i.I.from(h))}getImages(a,h,v){const S=[],E=[],D=this.imageProviders.get(h);for(const Z of a){if(!Z.iconsetId){S.push(Z);continue}const te=D.get(Z.iconsetId);te&&(this.getImage(Z,h)?E.push(Z):te.addPendingRequest(Z))}if(S.length===0)return void this._notify(E,h,v);let O=!0;const N=!!this.loaded.get(h),W=this.images.get(h);if(!N)for(const Z of S)W.has(Z.toString())||(O=!1);N||O?this._notify(S,h,v):this.requestors.push({ids:S,scope:h,callback:v})}rasterizeImages(a,h){const v=new Map,{tasks:S,scope:E}=a;for(const[D,O]of S.entries()){const N=this.getImage(O.id,E);N&&v.set(D,{image:N,imageVariant:O})}this._rasterizeImages(E,v,h)}_rasterizeImages(a,h,v){if(i.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:h,scope:a},v);else{const S=new Map;for(const[E,{image:D,imageVariant:O}]of h.entries())S.set(E,this.imageRasterizer.rasterize(O,D,a,0));v(void 0,S)}}getUpdatedImages(a){return this.updatedImages.get(a)||new Set}_notify(a,h,v){const S=this.images.get(h),E=new Map;for(const D of a){if(!S.get(D.toString())){if(D.iconsetId)continue;this.fire(new i.A("styleimagemissing",{id:D.name}))}const O=S.get(D.toString());if(!O){i.w(`Image "${D.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);continue}const N={data:O.usvg?null:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,usvg:O.usvg,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,hasRenderCallback:!!(O.userImage&&O.userImage.render)};O.usvg&&Object.assign(N,{width:O.icon.usvg_tree.width,height:O.icon.usvg_tree.height}),E.set(i.I.toString(D),N)}v(null,E)}getPixelSize(a){const{width:h,height:v}=this.atlasImage.get(a);return{width:h,height:v}}getPattern(a,h,v){const S=a.toString(),E=this.patterns.get(h),D=E.get(S),O=this.getImage(a,h);if(!O)return null;if(D){if(D.position.version===O.version)return D.position;D.position.version=O.version}else{if(O.usvg&&!O.data){const N=this.getPatternInFlightId(S,h);if(this.patternsInFlight.has(N))return null;this.patternsInFlight.add(N);const W=new i.B(a).scaleSelf(i.q.devicePixelRatio),Z=new Map([[W.toString(),{image:O,imageVariant:W}]]);return this._rasterizeImages(h,Z,(te,J)=>this.storePatternImage(W,h,O,v,J)),null}this.storePattern(a,h,O)}return this._updatePatternAtlas(h,v),E.get(S).position}getPatternInFlightId(a,h){return i.C(a,h)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(a,h,v,S,E){const D=a.toString(),O=E?E.get(D):void 0;O&&(v.data=O,this.storePattern(a.id,h,v),this._updatePatternAtlas(h,S),this.patternsInFlight.delete(this.getPatternInFlightId(a.id.toString(),h)))}storePattern(a,h,v){const S={w:v.data.width+2*i.F,h:v.data.height+2*i.F,x:0,y:0},E=new i.G(S,v,i.F);this.patterns.get(h).set(a.toString(),{bin:S,position:E})}bind(a,h){const v=a.gl;let S=this.atlasTexture.get(h);S?this.dirty&&(S.update(this.atlasImage.get(h)),this.dirty=!1):(S=new i.T(a,this.atlasImage.get(h),v.RGBA8),this.atlasTexture.set(h,S)),S.bind(v.LINEAR,v.CLAMP_TO_EDGE)}_updatePatternAtlas(a,h){const v=this.patterns.get(a),S=Array.from(v.values()).map(({bin:W})=>W),{w:E,h:D}=i.H(S),O=this.atlasImage.get(a);O.resize({width:E||1,height:D||1});const N=this.images.get(a);for(const[W,{bin:Z,position:te}]of v.entries()){let J=te.padding;const oe=Z.x+J,ge=Z.y+J,pe=N.get(W).data,ve=pe.width,me=pe.height;J=J>1?J-1:J,i.r.copy(pe,O,{x:0,y:0},{x:oe,y:ge},{width:ve,height:me},h),i.r.copy(pe,O,{x:0,y:me-J},{x:oe,y:ge-J},{width:ve,height:J},h),i.r.copy(pe,O,{x:0,y:0},{x:oe,y:ge+me},{width:ve,height:J},h),i.r.copy(pe,O,{x:ve-J,y:0},{x:oe-J,y:ge},{width:J,height:me},h),i.r.copy(pe,O,{x:0,y:0},{x:oe+ve,y:ge},{width:J,height:me},h),i.r.copy(pe,O,{x:ve-J,y:me-J},{x:oe-J,y:ge-J},{width:J,height:J},h),i.r.copy(pe,O,{x:0,y:me-J},{x:oe+ve,y:ge-J},{width:J,height:J},h),i.r.copy(pe,O,{x:0,y:0},{x:oe+ve,y:ge+me},{width:J,height:J},h),i.r.copy(pe,O,{x:ve-J,y:0},{x:oe-J,y:ge+me},{width:J,height:J},h)}this.dirty=!0}beginFrame(){for(const a of this.images.keys())this.callbackDispatchedThisFrame.set(a,new Set)}dispatchRenderCallbacks(a,h){const v=this.images.get(h);for(const S of a){if(this.callbackDispatchedThisFrame.get(h).has(S.toString()))continue;this.callbackDispatchedThisFrame.get(h).add(S.toString());const E=v.get(S.toString());Wt(E)&&this.updateImage(S,h,E)}}}function Zt(y){const a=y.key,h=y.value,v=y.valueSpec||{},S=y.objectElementValidators||{},E=y.style,D=y.styleSpec;let O=[];const N=i.K(h);if(N!=="object")return[new i.V(a,h,`object expected, ${N} found`)];for(const W in h){const Z=W.split(".")[0];let te;S[Z]?te=S[Z]:v[Z]?te=Dr:S["*"]?te=S["*"]:v["*"]&&(te=Dr),te?O=O.concat(te({key:(a&&`${a}.`)+W,value:h[W],valueSpec:v[Z]||v["*"],style:E,styleSpec:D,object:h,objectKey:W},h)):O.push(new i.J(a,h[W],`unknown property "${W}"`))}for(const W in v)S[W]||v[W].required&&v[W].default===void 0&&h[W]===void 0&&O.push(new i.V(a,h,`missing required property "${W}"`));return O}function Ut(y){const a=y.value,h=y.valueSpec,v=y.style,S=y.styleSpec,E=y.key,D=y.arrayElementValidator||Dr;if(i.K(a)!=="array")return[new i.V(E,a,`array expected, ${i.K(a)} found`)];if(h.length&&a.length!==h.length)return[new i.V(E,a,`array length ${h.length} expected, length ${a.length} found`)];if(h["min-length"]&&a.length<h["min-length"])return[new i.V(E,a,`array length at least ${h["min-length"]} expected, length ${a.length} found`)];let O={type:h.value,values:h.values,minimum:h.minimum,maximum:h.maximum,function:void 0};S.$version<7&&(O.function=h.function),i.K(h.value)==="object"&&(O=h.value);let N=[];for(let W=0;W<a.length;W++)N=N.concat(D({array:a,arrayIndex:W,value:a[W],valueSpec:O,style:v,styleSpec:S,key:`${E}[${W}]`},!0));return N}function kn(y){const a=y.key,h=y.value,v=y.valueSpec;let S=i.K(h);if(S==="number"&&h!=h&&(S="NaN"),S!=="number")return[new i.V(a,h,`number expected, ${S} found`)];if("minimum"in v){let E=v.minimum;if(i.K(v.minimum)==="array"&&(E=v.minimum[y.arrayIndex]),h<E)return[new i.V(a,h,`${h} is less than the minimum value ${E}`)]}if("maximum"in v){let E=v.maximum;if(i.K(v.maximum)==="array"&&(E=v.maximum[y.arrayIndex]),h>E)return[new i.V(a,h,`${h} is greater than the maximum value ${E}`)]}return[]}function Bn(y){const a=y.valueSpec,h=i.M(y.value.type);let v,S,E,D={};const O=h!=="categorical"&&y.value.property===void 0,N=!O,W=i.K(y.value.stops)==="array"&&i.K(y.value.stops[0])==="array"&&i.K(y.value.stops[0][0])==="object",Z=Zt({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(oe){if(h==="identity")return[new i.V(oe.key,oe.value,'identity function may not have a "stops" property')];let ge=[];const pe=oe.value;return ge=ge.concat(Ut({key:oe.key,value:pe,valueSpec:oe.valueSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:te})),i.K(pe)==="array"&&pe.length===0&&ge.push(new i.V(oe.key,pe,"array must have at least one stop")),ge},default:function(oe){return Dr({key:oe.key,value:oe.value,valueSpec:a,style:oe.style,styleSpec:oe.styleSpec})}}});return h==="identity"&&O&&Z.push(new i.V(y.key,y.value,'missing required property "property"')),h==="identity"||y.value.stops||Z.push(new i.V(y.key,y.value,'missing required property "stops"')),h==="exponential"&&y.valueSpec.expression&&!i.N(y.valueSpec)&&Z.push(new i.V(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(N&&!i.O(y.valueSpec)?Z.push(new i.V(y.key,y.value,"property functions not supported")):O&&!i.Q(y.valueSpec)&&Z.push(new i.V(y.key,y.value,"zoom functions not supported"))),h!=="categorical"&&!W||y.value.property!==void 0||Z.push(new i.V(y.key,y.value,'"property" property is required')),Z;function te(oe){let ge=[];const pe=oe.value,ve=oe.key;if(i.K(pe)!=="array")return[new i.V(ve,pe,`array expected, ${i.K(pe)} found`)];if(pe.length!==2)return[new i.V(ve,pe,`array length 2 expected, length ${pe.length} found`)];if(W){if(i.K(pe[0])!=="object")return[new i.V(ve,pe,`object expected, ${i.K(pe[0])} found`)];if(pe[0].zoom===void 0)return[new i.V(ve,pe,"object stop key must have zoom")];if(pe[0].value===void 0)return[new i.V(ve,pe,"object stop key must have value")];const me=i.M(pe[0].zoom);if(typeof me!="number")return[new i.V(ve,pe[0].zoom,"stop zoom values must be numbers")];if(E&&E>me)return[new i.V(ve,pe[0].zoom,"stop zoom values must appear in ascending order")];me!==E&&(E=me,S=void 0,D={}),ge=ge.concat(Zt({key:`${ve}[0]`,value:pe[0],valueSpec:{zoom:{}},style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:kn,value:J}}))}else ge=ge.concat(J({key:`${ve}[0]`,value:pe[0],style:oe.style,styleSpec:oe.styleSpec},pe));return i.S(i.U(pe[1]))?ge.concat([new i.V(`${ve}[1]`,pe[1],"expressions are not allowed in function stops.")]):ge.concat(Dr({key:`${ve}[1]`,value:pe[1],valueSpec:a,style:oe.style,styleSpec:oe.styleSpec}))}function J(oe,ge){const pe=i.K(oe.value),ve=i.M(oe.value),me=oe.value!==null?oe.value:ge;if(v){if(pe!==v)return[new i.V(oe.key,me,`${pe} stop domain type must match previous stop domain type ${v}`)]}else v=pe;if(pe!=="number"&&pe!=="string"&&pe!=="boolean"&&typeof ve!="number"&&typeof ve!="string"&&typeof ve!="boolean")return[new i.V(oe.key,me,"stop domain value must be a number, string, or boolean")];if(pe!=="number"&&h!=="categorical"){let Re=`number expected, ${pe} found`;return i.O(a)&&h===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(oe.key,me,Re)]}return h!=="categorical"||pe!=="number"||typeof ve=="number"&&isFinite(ve)&&Math.floor(ve)===ve?h!=="categorical"&&pe==="number"&&typeof ve=="number"&&typeof S=="number"&&S!==void 0&&ve<S?[new i.V(oe.key,me,"stop domain values must appear in ascending order")]:(S=ve,h==="categorical"&&ve in D?[new i.V(oe.key,me,"stop domain values must be unique")]:(D[ve]=!0,[])):[new i.V(oe.key,me,`integer expected, found ${String(ve)}`)]}}function bn(y){const a=(y.expressionContext==="property"?i.W:i.X)(i.U(y.value),y.valueSpec);if(a.result==="error")return a.value.map(v=>new i.V(`${y.key}${v.key}`,y.value,v.message));const h=a.value.expression||a.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!h.outputDefined())return[new i.V(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!i.Y(h))return[new i.V(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter")return Nn(h,y);if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!i.Z(h,["zoom","feature-state"]))return[new i.V(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!i._(h))return[new i.V(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Nn(y,a){const h=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const S of a.valueSpec.expression.parameters)h.delete(S);if(h.size===0)return[];const v=[];return y instanceof i.$&&h.has(y.name)?[new i.V(a.key,a.value,`["${y.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(y.eachChild(S=>{v.push(...Nn(S,a))}),v)}function ft(y){const a=y.key,h=y.value,v=y.valueSpec,S=[];return Array.isArray(v.values)?v.values.indexOf(i.M(h))===-1&&S.push(new i.V(a,h,`expected one of [${v.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(v.values).indexOf(i.M(h))===-1&&S.push(new i.V(a,h,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(h)} found`)),S}function vn(y){return i.a1(i.U(y.value))?bn(i.L({},y,{expressionContext:"filter",valueSpec:y.styleSpec[`filter_${y.layerType||"fill"}`]})):Ot(y)}function Ot(y){const a=y.value,h=y.key;if(i.K(a)!=="array")return[new i.V(h,a,`array expected, ${i.K(a)} found`)];const v=y.styleSpec;let S,E=[];if(a.length<1)return[new i.V(h,a,"filter array must have at least 1 element")];switch(E=E.concat(ft({key:`${h}[0]`,value:a[0],valueSpec:v.filter_operator,style:y.style,styleSpec:y.styleSpec})),i.M(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&i.M(a[1])==="$type"&&E.push(new i.V(h,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&E.push(new i.V(h,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(S=i.K(a[1]),S!=="string"&&E.push(new i.V(`${h}[1]`,a[1],`string expected, ${S} found`)));for(let D=2;D<a.length;D++)S=i.K(a[D]),i.M(a[1])==="$type"?E=E.concat(ft({key:`${h}[${D}]`,value:a[D],valueSpec:v.geometry_type,style:y.style,styleSpec:y.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&E.push(new i.V(`${h}[${D}]`,a[D],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let D=1;D<a.length;D++)E=E.concat(Ot({key:`${h}[${D}]`,value:a[D],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":S=i.K(a[1]),a.length!==2?E.push(new i.V(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):S!=="string"&&E.push(new i.V(`${h}[1]`,a[1],`string expected, ${S} found`))}return E}function tn(y,a){const h=y.key,v=y.style,S=y.layer,E=y.styleSpec,D=y.value,O=y.objectKey,N=E[`${a}_${y.layerType}`];if(!N)return[];const W=O.match(/^(.*)-use-theme$/);if(a==="paint"&&W&&N[W[1]])return i.S(D)?[].concat(Dr({key:y.key,value:D,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:v,styleSpec:E,expressionContext:"property",propertyType:a,propertyKey:O})):Dr({key:h,value:D,valueSpec:{type:"string"},style:v,styleSpec:E});const Z=O.match(/^(.*)-transition$/);if(a==="paint"&&Z&&N[Z[1]]&&N[Z[1]].transition)return Dr({key:h,value:D,valueSpec:E.transition,style:v,styleSpec:E});const te=y.valueSpec||N[O];if(!te)return[new i.J(h,D,`unknown property "${O}"`)];let J;if(i.K(D)==="string"&&i.O(te)&&!te.tokens&&(J=/^{([^}]+)}$/.exec(D))){const ge=`\`{ "type": "identity", "property": ${J?JSON.stringify(J[1]):'"_"'} }\``;return[new i.V(h,D,`"${O}" does not support interpolation syntax
Use an identity property function instead: ${ge}.`)]}const oe=[];if(y.layerType==="symbol")O!=="text-field"||!v||v.glyphs||v.imports||oe.push(new i.V(h,D,'use of "text-field" requires a style "glyphs" property')),O==="text-font"&&i.a2(i.U(D))&&i.M(D.type)==="identity"&&oe.push(new i.V(h,D,'"text-font" does not support identity functions'));else if(y.layerType==="model"&&a==="paint"&&S&&S.layout&&S.layout.hasOwnProperty("model-id")&&i.O(te)&&(i.a3(te)||i.Q(te))){const ge=i.W(i.U(D),te),pe=ge.value.expression||ge.value._styleExpression.expression;pe&&!i.Z(pe,["measure-light"])&&(O==="model-emissive-strength"&&i._(pe)&&i.Y(pe)||oe.push(new i.V(h,D,`${O} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return oe.concat(Dr({key:y.key,value:D,valueSpec:te,style:v,styleSpec:E,expressionContext:"property",propertyType:a,propertyKey:O}))}function Rn(y){return tn(y,"paint")}function Hn(y){return tn(y,"layout")}function mr(y){let a=[];const h=y.value,v=y.key,S=y.style,E=y.styleSpec;h.type||h.ref||a.push(new i.V(v,h,'either "type" or "ref" is required'));let D=i.M(h.type);const O=i.M(h.ref);if(h.id){const N=i.M(h.id);for(let W=0;W<y.arrayIndex;W++){const Z=S.layers[W];i.M(Z.id)===N&&a.push(new i.V(v,h.id,`duplicate layer id "${h.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in h){let N;["type","source","source-layer","filter","layout"].forEach(W=>{W in h&&a.push(new i.V(v,h[W],`"${W}" is prohibited for ref layers`))}),S.layers.forEach(W=>{i.M(W.id)===O&&(N=W)}),N?N.ref?a.push(new i.V(v,h.ref,"ref cannot reference another ref layer")):D=i.M(N.type):typeof O=="string"&&a.push(new i.V(v,h.ref,`ref layer "${O}" not found`))}else if(D!=="background"&&D!=="sky"&&D!=="slot")if(h.source){const N=S.sources&&S.sources[h.source],W=N&&i.M(N.type);N?W==="vector"&&D==="raster"?a.push(new i.V(v,h.source,`layer "${h.id}" requires a raster source`)):W==="raster"&&D!=="raster"?a.push(new i.V(v,h.source,`layer "${h.id}" requires a vector source`)):W!=="vector"||h["source-layer"]?W==="raster-dem"&&D!=="hillshade"?a.push(new i.V(v,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):W!=="raster-array"||["raster","raster-particle"].includes(D)?D==="line"&&h.paint&&(h.paint["line-gradient"]||h.paint["line-trim-offset"])&&W==="geojson"&&!N.lineMetrics?a.push(new i.V(v,h,`layer "${h.id}" specifies a line-gradient, which requires the GeoJSON source to have \`lineMetrics\` enabled.`)):D==="raster-particle"&&W!=="raster-array"&&a.push(new i.V(v,h.source,`layer "${h.id}" requires a 'raster-array' source.`)):a.push(new i.V(v,h.source,"raster-array source can only be used with layer type 'raster'.")):a.push(new i.V(v,h,`layer "${h.id}" must specify a "source-layer"`)):a.push(new i.V(v,h.source,`source "${h.source}" not found`))}else a.push(new i.V(v,h,'missing required property "source"'));return a=a.concat(Zt({key:v,value:h,valueSpec:E.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Dr({key:`${v}.type`,value:h.type,valueSpec:E.layer.type,style:y.style,styleSpec:y.styleSpec,object:h,objectKey:"type"}),filter:N=>vn(i.L({layerType:D},N)),layout:N=>Zt({layer:h,key:N.key,value:N.value,valueSpec:{},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":W=>Hn(i.L({layerType:D},W))}}),paint:N=>Zt({layer:h,key:N.key,value:N.value,valueSpec:{},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":W=>Rn(i.L({layerType:D,layer:h},W))}})}})),a}function Xn(y){const a=y.value,h=y.key,v=i.K(a);return v!=="string"?[new i.V(h,a,`string expected, ${v} found`)]:[]}const or={promoteId:function y({key:a,value:h}){if(i.K(h)==="string")return Xn({key:a,value:h});if(Array.isArray(h)){const v=[],S=i.U(h),E=i.X(S);return E.result==="error"&&E.value.forEach(D=>{v.push(new i.V(`${a}${D.key}`,null,`${D.message}`))}),i.Z(E.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||v.push(new i.V(`${a}`,null,"promoteId expression should be only feature dependent")),v}{const v=[];for(const S in h)v.push(...y({key:`${a}.${S}`,value:h[S]}));return v}}};function Mn(y){const a=y.value,h=y.key,v=y.styleSpec,S=y.style;if(!a.type)return[new i.V(h,a,'"type" is required')];const E=i.M(a.type);let D=[];switch(["vector","raster","raster-dem","raster-array"].includes(E)&&(a.url||a.tiles||D.push(new i.J(h,a,'Either "url" or "tiles" is required.'))),E){case"vector":case"raster":case"raster-dem":case"raster-array":return D=D.concat(Zt({key:h,value:a,valueSpec:v[`source_${E.replace("-","_")}`],style:y.style,styleSpec:v,objectElementValidators:or})),D;case"geojson":if(D=Zt({key:h,value:a,valueSpec:v.source_geojson,style:S,styleSpec:v,objectElementValidators:or}),a.cluster)for(const O in a.clusterProperties){const[N,W]=a.clusterProperties[O],Z=typeof N=="string"?[N,["accumulated"],["get",O]]:N;D.push(...bn({key:`${h}.${O}.map`,value:W,expressionContext:"cluster-map"})),D.push(...bn({key:`${h}.${O}.reduce`,value:Z,expressionContext:"cluster-reduce"}))}return D;case"video":return Zt({key:h,value:a,valueSpec:v.source_video,style:S,styleSpec:v});case"image":return Zt({key:h,value:a,valueSpec:v.source_image,style:S,styleSpec:v});case"canvas":return[new i.V(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ft({key:`${h}.type`,value:a.type,valueSpec:{values:Fr(v)}})}}function Fr(y){return y.source.reduce((a,h)=>{const v=y[h];return v.type.type==="enum"&&(a=a.concat(Object.keys(v.type.values))),a},[])}function Cr(y){const a=y.value,h=y.styleSpec,v=h.light,S=y.style;let E=[];const D=i.K(a);if(a===void 0)return E;if(D!=="object")return E=E.concat([new i.V("light",a,`object expected, ${D} found`)]),E;for(const O in a){const N=O.match(/^(.*)-transition$/),W=O.match(/^(.*)-use-theme$/);E=E.concat(W&&v[W[1]]?Dr({key:O,value:a[O],valueSpec:{type:"string"},style:S,styleSpec:h}):N&&v[N[1]]&&v[N[1]].transition?Dr({key:O,value:a[O],valueSpec:h.transition,style:S,styleSpec:h}):v[O]?Dr({key:O,value:a[O],valueSpec:v[O],style:S,styleSpec:h}):[new i.V(O,a[O],`unknown property "${O}"`)])}return E}function xr(y){const a=y.value;let h=[];if(!a)return h;const v=i.K(a);if(v!=="object")return h=h.concat([new i.V("light-3d",a,`object expected, ${v} found`)]),h;const S=y.styleSpec,E=S["light-3d"],D=y.key,O=y.style,N=y.style.lights;for(const te of["type","id"])if(!(te in a))return h=h.concat([new i.V("light-3d",a,`missing property ${te} on light`)]),h;if(a.type&&N)for(let te=0;te<y.arrayIndex;te++){const J=i.M(a.type),oe=N[te];i.M(oe.type)===J&&h.push(new i.V(D,a.id,`duplicate light type "${a.type}", previously defined at line ${oe.id.__line__}`))}const W=`properties_light_${a.type}`;if(!(W in S))return h=h.concat([new i.V("light-3d",a,`Invalid light type ${a.type}`)]),h;const Z=S[W];for(const te in a)if(te==="properties"){const J=a[te],oe=i.K(J);if(oe!=="object")return h=h.concat([new i.V("properties",J,`object expected, ${oe} found`)]),h;for(const ge in J)h=h.concat(Z[ge]?Dr({key:ge,value:J[ge],valueSpec:Z[ge],style:O,styleSpec:S}):[new i.J(y.key,J[ge],`unknown property "${ge}"`)])}else{const J=te.match(/^(.*)-transition$/),oe=te.match(/^(.*)-use-theme$/);h=h.concat(oe&&E[oe[1]]?Dr({key:te,value:a[te],valueSpec:{type:"string"},style:O,styleSpec:S}):J&&E[J[1]]&&E[J[1]].transition?Dr({key:te,value:a[te],valueSpec:S.transition,style:O,styleSpec:S}):E[te]?Dr({key:te,value:a[te],valueSpec:E[te],style:O,styleSpec:S}):[new i.J(te,a[te],`unknown property "${te}"`)])}return h}function ir(y){const a=y.value,h=y.key,v=y.style,S=y.styleSpec,E=S.terrain;let D=[];const O=i.K(a);if(a===void 0||O==="null")return D;if(O!=="object")return D=D.concat([new i.V("terrain",a,`object expected, ${O} found`)]),D;for(const N in a){const W=N.match(/^(.*)-transition$/),Z=N.match(/^(.*)-use-theme$/);D=D.concat(Z&&E[Z[1]]?Dr({key:N,value:a[N],valueSpec:{type:"string"},style:v,styleSpec:S}):W&&E[W[1]]&&E[W[1]].transition?Dr({key:N,value:a[N],valueSpec:S.transition,style:v,styleSpec:S}):E[N]?Dr({key:N,value:a[N],valueSpec:E[N],style:v,styleSpec:S}):[new i.J(N,a[N],`unknown property "${N}"`)])}if(a.source){const N=v.sources&&v.sources[a.source],W=N&&i.M(N.type);N?W!=="raster-dem"&&D.push(new i.V(h,a.source,`terrain cannot be used with a source of type ${String(W)}, it only be used with a "raster-dem" source type`)):D.push(new i.V(h,a.source,`source "${a.source}" not found`))}else D.push(new i.V(h,a,'terrain is missing required property "source"'));return D}function Yr(y){const a=y.value,h=y.style,v=y.styleSpec,S=v.fog;let E=[];const D=i.K(a);if(a===void 0)return E;if(D!=="object")return E=E.concat([new i.V("fog",a,`object expected, ${D} found`)]),E;for(const O in a){const N=O.match(/^(.*)-transition$/),W=O.match(/^(.*)-use-theme$/);E=E.concat(W&&S[W[1]]?Dr({key:O,value:a[O],valueSpec:{type:"string"},style:h,styleSpec:v}):N&&S[N[1]]&&S[N[1]].transition?Dr({key:O,value:a[O],valueSpec:v.transition,style:h,styleSpec:v}):S[O]?Dr({key:O,value:a[O],valueSpec:S[O],style:h,styleSpec:v}):[new i.J(O,a[O],`unknown property "${O}"`)])}return E}const Sr={"*":()=>[],array:Ut,boolean:function(y){const a=y.value,h=y.key,v=i.K(a);return v!=="boolean"?[new i.V(h,a,`boolean expected, ${v} found`)]:[]},number:kn,color:function(y){const a=y.key,h=y.value,v=i.K(h);return v!=="string"?[new i.V(a,h,`color expected, ${v} found`)]:i.a0.parseCSSColor(h)===null?[new i.V(a,h,`color expected, "${h}" found`)]:[]},enum:ft,filter:vn,function:Bn,layer:mr,object:Zt,source:Mn,model:i.a4,light:Cr,"light-3d":xr,terrain:ir,fog:Yr,string:Xn,formatted:function(y){return Xn(y).length===0?[]:bn(y)},resolvedImage:function(y){return Xn(y).length===0?[]:bn(y)},projection:function(y){const a=y.value,h=y.styleSpec,v=h.projection,S=y.style;let E=[];const D=i.K(a);if(D==="object")for(const O in a)E=E.concat(Dr({key:O,value:a[O],valueSpec:v[O],style:S,styleSpec:h}));else D!=="string"&&(E=E.concat([new i.V("projection",a,`object or string expected, ${D} found`)]));return E},import:function(y){const{value:a,styleSpec:h}=y,{data:v,...S}=a;Object.defineProperty(S,"__line__",{value:a.__line__,enumerable:!1});let E=Zt(i.L({},y,{value:S,valueSpec:h.import}));return i.M(S.id)===""&&E.push(new i.V(`${y.key}.id`,S,"import id can't be an empty string")),v&&(E=E.concat(ns(v,h,{key:`${y.key}.data`}))),E},iconset:function(y){const a=y.value,h=y.key,v=y.styleSpec,S=y.style;if(!a.type)return[new i.V(h,a,'"type" is required')];const E=i.M(a.type);let D=[];if(D=D.concat(Zt({key:h,value:a,valueSpec:v[`iconset_${E}`],style:S,styleSpec:v})),E==="source"&&a.source){const O=S.sources&&S.sources[a.source],N=O&&i.M(O.type);O?N!=="raster-array"&&D.push(new i.V(h,a.source,`iconset cannot be used with a source of type ${String(N)}, it only be used with a "raster-array" source type`)):D.push(new i.V(h,a.source,`source "${a.source}" not found`))}return D}};function Dr(y,a=!1){const h=y.value,v=y.valueSpec,S=y.styleSpec;if(v.expression&&i.a2(i.M(h)))return Bn(y);if(v.expression&&i.S(i.U(h)))return bn(y);if(v.type&&Sr[v.type]){const E=Sr[v.type](y);return a===!0&&E.length>0&&i.K(y.value)==="array"?bn(y):E}return Zt(i.L({},y,{valueSpec:v.type?S[v.type]:v}))}function ki(y){const a=y.value,h=y.key,v=Xn(y);return v.length||(a.indexOf("{fontstack}")===-1&&v.push(new i.V(h,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&v.push(new i.V(h,a,'"glyphs" url must include a "{range}" token'))),v}function ns(y,a=i.a5,h={}){return Dr({key:h.key||"",value:y,valueSpec:a.$root,styleSpec:a,style:y,objectElementValidators:{glyphs:ki,"*":()=>[]}})}function Vo(y,a=i.a5){return Qe(ns(y,a))}const zo=y=>Qe(Mn(y)),Rl=y=>Qe(Cr(y)),ma=y=>Qe(xr(y)),mn=y=>Qe(ir(y)),ea=y=>Qe(Yr(y)),Pr=y=>Qe(function(a){const h=a.value,v=a.style,S=a.styleSpec,E=S.snow;let D=[];const O=i.K(h);if(h===void 0)return D;if(O!=="object")return D=D.concat([new i.V("snow",h,`object expected, ${O} found`)]),D;for(const N in h){const W=N.match(/^(.*)-transition$/);D=D.concat(W&&E[W[1]]&&E[W[1]].transition?Dr({key:N,value:h[N],valueSpec:S.transition,style:v,styleSpec:S}):E[N]?Dr({key:N,value:h[N],valueSpec:E[N],style:v,styleSpec:S}):[new i.J(N,h[N],`unknown property "${N}"`)])}return D}(y)),ke=y=>Qe(function(a){const h=a.value,v=a.style,S=a.styleSpec,E=S.rain;let D=[];const O=i.K(h);if(h===void 0)return D;if(O!=="object")return D=D.concat([new i.V("rain",h,`object expected, ${O} found`)]),D;for(const N in h){const W=N.match(/^(.*)-transition$/);D=D.concat(W&&E[W[1]]&&E[W[1]].transition?Dr({key:N,value:h[N],valueSpec:S.transition,style:v,styleSpec:S}):E[N]?Dr({key:N,value:h[N],valueSpec:E[N],style:v,styleSpec:S}):[new i.J(N,h[N],`unknown property "${N}"`)])}return D}(y)),ie=y=>Qe(mr(y)),le=y=>Qe(vn(y)),Te=y=>Qe(Rn(y)),ze=y=>Qe(Hn(y)),$e=y=>Qe(i.a4(y));function Qe(y){return y.slice().sort((a,h)=>a.line&&h.line?a.line-h.line:0)}function Ze(y,a){let h=!1;if(a&&a.length)for(const v of a)v instanceof i.J?i.w(v.message):(y.fire(new i.z(new Error(v.message))),h=!0);return h}let et;class ct extends i.E{constructor(a,h="flat"){super(),this._transitionable=new i.a6(et||(et=new i.a7({anchor:new i.a8(i.a5.light.anchor),position:new i.a9(i.a5.light.position),color:new i.a8(i.a5.light.color),intensity:new i.a8(i.a5.light.intensity)}))),this.setLight(a,h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,h,v={}){this._validate(Rl,a,v)||(this._transitionable.setTransitionOrValue(a),this.id=h)}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,v){return(!v||v.validate!==!1)&&Ze(this,a.call(Vo,i.l({value:h,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}}let vt=class extends i.E{constructor(y,a,h,v){super(),this.scope=h,this._transitionable=new i.a6(new i.a7({source:new i.a8(i.a5.terrain.source),exaggeration:new i.a8(i.a5.terrain.exaggeration)}),h,v),this._transitionable.setTransitionOrValue(y,v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(y,a){this._transitionable.setTransitionOrValue(y,a)}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}getExaggeration(y){return this._transitioning.possiblyEvaluate(new i.aa(y)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const y=this._transitionable._values.exaggeration;if(!y)return null;const a=y.value.expression;if(!a)return null;let h=-1,v=-1,S=1;for(const E of a.zoomStops)S=a.evaluate(new i.aa(E)),S>.01?(h=E,v=-1):v=E;return S<.01&&h>0&&v>h?[h,v]:null}isZoomDependent(){const y=this._transitionable._values.exaggeration;return y!=null&&y.value!=null&&y.value.expression!=null&&y.value.expression instanceof i.ab}};const lt=45,Ht=65,dn=.05;function wn(y,a,h,v){const S=i.af(lt,Ht,h),[E,D]=sr(y,v);let O=1-Math.min(1,Math.exp((a-E)/(D-E)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*S*y.alpha}function sr(y,a){const h=.5/Math.tan(.5*a);return[y.range[0]+h,y.range[1]+h]}function nr(y,a,h,v,S){const E=i.ad([],[a,h,v],S.mercatorFogMatrix);return wn(y,i.ae(E),S.pitch,S._fov)}function rr(y,a,h,v,S,E,D){const O=[[h,v,0],[S,v,0],[S,E,0],[h,E,0]];let N=Number.MAX_VALUE,W=-Number.MAX_VALUE;for(const Z of O){const te=i.ad([],Z,a),J=i.ae(te);N=Math.min(N,J),W=Math.max(W,J)}return[wn(y,N,D.pitch,D._fov),wn(y,W,D.pitch,D._fov)]}class kr extends i.E{constructor(a,h,v,S){super();const E=new i.a7({range:new i.a8(i.a5.fog.range),color:new i.a8(i.a5.fog.color),"color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new i.a8(i.a5.fog["high-color"]),"high-color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new i.a8(i.a5.fog["space-color"]),"space-color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new i.a8(i.a5.fog["horizon-blend"]),"star-intensity":new i.a8(i.a5.fog["star-intensity"]),"vertical-range":new i.a8(i.a5.fog["vertical-range"])});this._transitionable=new i.a6(E,v,new Map(S)),this.set(a,S),this._transitioning=this._transitionable.untransitioned(),this._transform=h,this.properties=new i.ag(E),this.scope=v}get state(){const a=this._transform,h=a.projection.name==="globe",v=i.ah(a.zoom),S=this.properties.get("range"),E=[.5,3];return{range:h?[i.ai(E[0],S[0],v),i.ai(E[1],S[1],v)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,h,v={}){if(this._validate(ea,a,v))return;const S=i.l({},a);for(const E of Object.keys(i.a5.fog))S[E]===void 0&&(S[E]=i.a5.fog[E].default);this._options=S,this._transitionable.setTransitionOrValue(this._options,h)}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.af(lt,Ht,a))*h.a}getOpacityAtLatLng(a,h){return this._transform.projection.supportsFog?function(v,S,E){const D=i.ac.fromLngLat(S),O=E.elevation?E.elevation.getAtPointOrZero(D):0;return nr(v,D.x,D.y,O,E)}(this.state,a,h):0}getOpacityForTile(a){if(!this._transform.projection.supportsFog)return[1,1];const h=this._transform.calculateFogTileMatrix(a.toUnwrapped());return rr(this.state,h,0,0,i.aj,i.aj,this._transform)}getOpacityForBounds(a,h,v,S,E){return this._transform.projection.supportsFog?rr(this.state,a,h,v,S,E,this._transform):[1,1]}getFovAdjustedRange(a){return this._transform.projection.supportsFog?sr(this.state,a):[0,1]}isVisibleOnFrustum(a){if(!this._transform.projection.supportsFog)return!1;const h=[4,5,6,7];for(const v of h){const S=a.points[v];let E;if(S[2]>=0)E=S;else{const D=a.points[v-4];E=i.ak(D,S,D[2]/(D[2]-S[2]))}if(nr(this.state,E[0],E[1],0,this._transform)>=dn)return!0}return!1}updateConfig(a){this._transitionable.setTransitionOrValue(this._options,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,v){return(!v||v.validate!==!1)&&Ze(this,a.call(Vo,i.l({value:h,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}}let Si,Ir,ui,ti,Ti=class extends i.E{constructor(y,a,h,v){super();const S=Si||(Si=new i.a7({density:new i.a8(i.a5.snow.density),intensity:new i.a8(i.a5.snow.intensity),color:new i.a8(i.a5.snow.color),opacity:new i.a8(i.a5.snow.opacity),vignette:new i.a8(i.a5.snow.vignette),"vignette-color":new i.a8(i.a5.snow["vignette-color"]),"center-thinning":new i.a8(i.a5.snow["center-thinning"]),direction:new i.a8(i.a5.snow.direction),"flake-size":new i.a8(i.a5.snow["flake-size"])}));this._transitionable=new i.a6(S,h,new Map(v)),this.set(y,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.ag(S),this.scope=h}get state(){const y=this.properties.get("opacity"),a=this.properties.get("color"),h=this.properties.get("direction"),v=i.al(h[0]),S=-Math.max(i.al(h[1]),.01),E=[Math.cos(v)*Math.cos(S),Math.sin(v)*Math.cos(S),Math.sin(S)],D=this.properties.get("vignette"),O=this.properties.get("vignette-color");return O.a=D,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.am(a.r,a.g,a.b,a.a*y),direction:E,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:O}}get(){return this._transitionable.serialize()}set(y,a,h={}){if(this._validate(Pr,y,h))return;const v=i.l({},y);for(const S of Object.keys(i.a5.snow))v[S]===void 0&&(v[S]=i.a5.snow[S].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,a)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,a,h){return(!h||h.validate!==!1)&&Ze(this,y.call(Vo,i.l({value:a,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}},ji=class extends i.E{constructor(y,a,h,v){super();const S=Ir||(Ir=new i.a7({density:new i.a8(i.a5.rain.density),intensity:new i.a8(i.a5.rain.intensity),color:new i.a8(i.a5.rain.color),opacity:new i.a8(i.a5.rain.opacity),vignette:new i.a8(i.a5.rain.vignette),"vignette-color":new i.a8(i.a5.rain["vignette-color"]),"center-thinning":new i.a8(i.a5.rain["center-thinning"]),direction:new i.a8(i.a5.rain.direction),"droplet-size":new i.a8(i.a5.rain["droplet-size"]),"distortion-strength":new i.a8(i.a5.rain["distortion-strength"])}));this._transitionable=new i.a6(S,h,new Map(v)),this.set(y,v),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.ag(S),this.scope=h}get state(){const y=this.properties.get("opacity"),a=this.properties.get("color"),h=this.properties.get("direction"),v=i.al(h[0]),S=-Math.max(i.al(h[1]),.01),E=[Math.cos(v)*Math.cos(S),Math.sin(v)*Math.cos(S),Math.sin(S)],D=this.properties.get("vignette-color");return D.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.am(a.r,a.g,a.b,a.a*y),direction:E,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:D}}get(){return this._transitionable.serialize()}set(y,a,h={}){if(this._validate(ke,y,h))return;const v=i.l({},y);for(const S of Object.keys(i.a5.rain))v[S]===void 0&&(v[S]=i.a5.rain[S].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,a)}updateConfig(y){this._transitionable.setTransitionOrValue(this._options,new Map(y))}updateTransitions(y){this._transitioning=this._transitionable.transitioned(y,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(y){this.properties=this._transitioning.possiblyEvaluate(y)}_validate(y,a,h){return(!h||h.validate!==!1)&&Ze(this,y.call(Vo,i.l({value:a,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}};class Xi extends i.E{constructor(a,h,v,S){super(),this.scope=v,this._options=a,this.properties=new i.ag(h),this._transitionable=new i.a6(h,v,new Map(S)),this._transitionable.setTransitionOrValue(a.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(a){this._transitionable.setTransitionOrValue(this._options.properties,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(a,h){this._options=a,this._transitionable.setTransitionOrValue(a.properties,h)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Mo{constructor(a,h,v,S){this.screenBounds=a,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=v,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(a,h){let v,S;if(a instanceof i.P||typeof a[0]=="number"){const E=i.P.convert(a);v=[E],S=h.isPointAboveHorizon(E)}else{const E=i.P.convert(a[0]),D=i.P.convert(a[1]),O=E.add(D)._div(2);v=[E,D],S=i.ao(E,D).every(N=>h.isPointAboveHorizon(N))&&h.isPointAboveHorizon(O)}return new Mo(v,h.getCameraPoint(),S,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return i.ao(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const h=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],S=i.ao(h,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<v.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?S[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(S[3]=this.cameraPoint)),i.ap(S,a)}bufferedCameraGeometryGlobe(a){const h=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],S=i.ao(h,v,a),E=this.cameraPoint.clone();switch(3*((E.y>h.y)+(E.y>v.y))+((E.x>h.x)+(E.x>v.x))){case 0:S[0]=E,S[4]=E.clone();break;case 1:S.splice(1,0,E);break;case 2:S[1]=E;break;case 3:S.splice(4,0,E);break;case 5:S.splice(2,0,E);break;case 6:S[3]=E;break;case 7:S.splice(3,0,E);break;case 8:S[2]=E}return S}containsTile(a,h,v,S=0){const E=a.queryPadding/h._pixelsPerMercatorPixel+1,D=v?this._bufferedCameraMercator(E,h):this._bufferedScreenMercator(E,h);let O=a.tileID.wrap+(D.unwrapped?S:0);const N=D.polygon.map(ve=>i.aq(a.tileTransform,ve,O));if(!i.ar(N,0,0,i.aj,i.aj))return;O=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const W=this.screenGeometryMercator.polygon.map(ve=>i.as(a.tileTransform,ve,O)),Z=W.map(ve=>new i.P(ve[0],ve[1])),te=h.getFreeCameraOptions().position||new i.ac(0,0,0),J=i.as(a.tileTransform,te,O),oe=W.map(ve=>{const me=i.at(ve,ve,J);return i.au(me,me),new i.av(J,me)}),ge=i.aw(a,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Z,tilespaceRays:oe,bufferedTilespaceGeometry:N,bufferedTilespaceBounds:(pe=i.ax(N),pe.min.x=i.aD(pe.min.x,0,i.aj),pe.min.y=i.aD(pe.min.y,0,i.aj),pe.max.x=i.aD(pe.max.x,0,i.aj),pe.max.y=i.aD(pe.max.y,0,i.aj),pe),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:ge};var pe}_bufferedScreenMercator(a,h){const v=$s(a);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let S;return S=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),h):{polygon:this.bufferedScreenGeometry(a).map(E=>h.pointCoordinate3D(E)),unwrapped:!0},this._screenRaycastCache[v]=S,S}}_bufferedCameraMercator(a,h){const v=$s(a);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let S;return S=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),h):{polygon:this.bufferedCameraGeometry(a).map(E=>h.pointCoordinate3D(E)),unwrapped:!0},this._cameraRaycastCache[v]=S,S}}_projectAndResample(a,h){const v=function(E,D){const O=i.az([],D.pixelMatrix,D.globeMatrix),N=[0,-i.aE,0,1],W=[0,i.aE,0,1],Z=[0,0,0,1];i.aA(N,N,O),i.aA(W,W,O),i.aA(Z,Z,O);const te=new i.P(N[0]/N[3],N[1]/N[3]),J=new i.P(W[0]/W[3],W[1]/W[3]),oe=i.aB(E,te)&&N[3]<Z[3],ge=i.aB(E,J)&&W[3]<Z[3];if(!oe&&!ge)return null;const pe=function(Ge,Ne,Je){for(let nt=1;nt<Ge.length;nt++){const bt=go(Ne.pointCoordinate3D(Ge[nt-1]).x),mt=go(Ne.pointCoordinate3D(Ge[nt]).x);if(Je<0){if(bt<mt)return{idx:nt,t:-bt/(mt-1-bt)}}else if(mt<bt)return{idx:nt,t:(1-bt)/(mt+1-bt)}}return null}(E,D,oe?-1:1);if(!pe)return null;const{idx:ve,t:me}=pe;let Re=ve>1?Jr(E.slice(0,ve),D):[],Be=ve<E.length?Jr(E.slice(ve),D):[];Re=Re.map(Ge=>new i.P(go(Ge.x),Ge.y)),Be=Be.map(Ge=>new i.P(go(Ge.x),Ge.y));const Ue=[...Re];Ue.length===0&&Ue.push(Be[Be.length-1]);const Ke=i.ai(Ue[Ue.length-1].y,(Be.length===0?Re[0]:Be[0]).y,me);let Ye;return Ye=oe?[new i.P(0,Ke),new i.P(0,0),new i.P(1,0),new i.P(1,Ke)]:[new i.P(1,Ke),new i.P(1,1),new i.P(0,1),new i.P(0,Ke)],Ue.push(...Ye),Be.length===0?Ue.push(Re[0]):Ue.push(...Be),{polygon:Ue.map(Ge=>new i.ac(Ge.x,Ge.y)),unwrapped:!1}}(a,h);if(v)return v;const S=function(E,D){let O=!1,N=-1/0,W=0;for(let te=0;te<E.length-1;te++)E[te].x>N&&(N=E[te].x,W=te);for(let te=0;te<E.length-1;te++){const J=(W+te)%(E.length-1),oe=E[J],ge=E[J+1];Math.abs(oe.x-ge.x)>.5&&(oe.x<ge.x?(oe.x+=1,J===0&&(E[E.length-1].x+=1)):(ge.x+=1,J+1===E.length-1&&(E[0].x+=1)),O=!0)}const Z=i.ay(D.center.lng);return O&&Z<Math.abs(Z-1)&&E.forEach(te=>{te.x-=1}),{polygon:E,unwrapped:O}}(Jr(a,h).map(E=>new i.P(go(E.x),E.y)),h);return{polygon:S.polygon.map(E=>new i.ac(E.x,E.y)),unwrapped:S.unwrapped}}}function Jr(y,a){return i.aC(y,h=>{const v=a.pointCoordinate3D(h);h.x=v.x,h.y=v.y},1/256)}function go(y){return y<0?1+y%1:y%1}function $s(y){return 100*y|0}function $o(y,a,h,v,S){const E=function(O,N){if(O)return S(O);if(N){if(y.url&&N.tiles&&y.tiles&&delete y.tiles,N.variants){if(!Array.isArray(N.variants))return S(new Error("variants must be an array"));for(const Z of N.variants){if(Z==null||typeof Z!="object"||Z.constructor!==Object)return S(new Error("variant must be an object"));if(!Array.isArray(Z.capabilities))return S(new Error("capabilities must be an array"));if(Z.capabilities.length===1&&Z.capabilities[0]==="meshopt"){N=i.l(N,Z);break}}}const W=i.aF(i.l({},N,y),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);W.tiles=a.canonicalizeTileset(W,y.url),S(null,W)}},D=function(O,N,W){if(!O)return null;if(!N&&!W)return O;W=W||O.worldview_default;const Z=Object.values(O.language||{});if(Z.length===0)return null;const te=Object.values(O.worldview||{});if(te.length===0)return null;const J=Z.every(ge=>ge===N),oe=te.every(ge=>ge===W);return J&&oe?O:N in(O.language_options||{})||W in(O.worldview_options||{})?null:O.language_options&&O.worldview_options?O:null}(y.data,h,v);return D?i.q.frame(()=>E(null,D)):y.url?i.n(a.transformRequest(a.normalizeSourceURL(y.url,null,h,v),i.R.Source),E):i.q.frame(()=>{const{data:O,...N}=y;E(null,N)})}function fs(y,a){const h=Math.pow(2,a.z),v=Math.floor(i.ay(y.getWest())*h),S=Math.floor(i.aH(y.getNorth())*h),E=Math.ceil(i.ay(y.getEast())*h),D=Math.ceil(i.aH(y.getSouth())*h);return a.x>=v&&a.x<E&&a.y>=S&&a.y<D}class Oi{constructor(a,h,v){this.bounds=a?i.aG.convert(this.validateBounds(a)):null,this.minzoom=h||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}addExtraBounds(a){if(a){this.extraBounds||(this.extraBounds=[]);for(const h of a)this.extraBounds.push(i.aG.convert(this.validateBounds(h)))}}contains(a){if(a.z>this.maxzoom||a.z<this.minzoom||this.bounds&&!fs(this.bounds,a))return!1;if(!this.extraBounds)return!0;for(const h of this.extraBounds)if(fs(h,a))return!0;return!1}static fromTileJSON(a){if(!a.bounds&&!a.extra_bounds)return null;const h=new Oi(a.bounds,a.minzoom,a.maxzoom);return h.addExtraBounds(a.extra_bounds),h}}class rs extends i.E{constructor(a,h,v,S){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.aF(h,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},h),this._collectResourceTiming=!!h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new i.aI}load(a){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map.getWorldview();this._tileJSONRequest=$o(this._options,this.map._requestManager,h,v,(S,E)=>{if(this._tileJSONRequest=null,this._loaded=!0,S)h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),v&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new i.z(S));else if(E){if(i.l(this,E),this.hasWorldviews=!!E.worldview_options,E.worldview_default&&(this.worldviewDefault=E.worldview_default),E.vector_layers){this.vectorLayers=E.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const D of E.vector_layers)this.vectorLayerIds.push(D.id),E.worldview&&E.worldview[D.source]&&this.localizableLayerIds.add(D.id)}this.tileBounds=Oi.fromTileJSON(E),dt(E.tiles,this.map._requestManager._customAccessToken),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}a&&a(S)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(a,h){const v=a.tileID.canonical.url(this.tiles,this.scheme),S=this.map._requestManager.normalizeTileURL(v),E=this.map._requestManager.transformRequest(S,i.R.Tile),D=this.map.style?this.map.style.getLut(this.scope):null,O=D?{image:D.image.clone()}:null,N={request:E,data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,lut:O,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:a.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&i.f(v)&&(N.worldview=this.map.getWorldview()||this.worldviewDefault,N.localizableLayerIds=this.localizableLayerIds),N.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=h:a.request=a.actor.send("reloadTile",N,W.bind(this));else if(a.actor=this._tileWorkers[S]=this._tileWorkers[S]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",N,W.bind(this),void 0,!0);else{const Z=i.aJ.call({deduped:this._deduped},N,(te,J)=>{te||!J?W.call(this,te):(N.data={cacheControl:J.cacheControl,expires:J.expires,rawData:J.rawData.slice(0)},a.actor&&a.actor.send("loadTile",N,W.bind(this),void 0,!0))},!0);a.request={cancel:Z}}function W(Z,te){return delete a.request,a.aborted?h(null):Z&&Z.status!==404?h(Z):(te&&te.resourceTiming&&(a.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&a.setExpiryData(te),a.loadVectorData(te,this.map.painter),i.aK(this.dispatcher),h(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,h){a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope}),a.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ol extends i.E{constructor(a,h,v,S){super(),this.id=a,this.dispatcher=v,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},h),i.l(this,i.aF(h,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"})),this._tileJSONRequest=$o(this._options,this.map._requestManager,null,null,(h,v)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new i.z(h)):v&&(i.l(this,v),v.raster_layers&&(this.rasterLayers=v.raster_layers,this.rasterLayerIds=this.rasterLayers.map(S=>S.id)),this.tileBounds=Oi.fromTileJSON(v),dt(v.tiles),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))),a&&a(h)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=i.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,h){const v=i.q.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);a.request=i.o(this.map._requestManager.transformRequest(S,i.R.Tile),(E,D,O,N)=>(delete a.request,a.aborted?(a.state="unloaded",h(null)):E?(a.state="errored",h(E)):D?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:O,expires:N}),a.setTexture(D,this.map.painter),a.state="loaded",i.aK(this.dispatcher),void h(null)):h(null)))}abortTile(a,h){a.request&&(a.request.cancel(),delete a.request),h&&h()}unloadTile(a,h){a.texture&&a.texture instanceof i.T?(a.destroy(!0),a.texture&&a.texture instanceof i.T&&this.map.painter.saveTileTexture(a.texture)):a.destroy(),h&&h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class zs extends ol{constructor(a,h,v,S){super(a,h,v,S),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=i.l({type:"raster-array"},h)}triggerRepaint(a){const h=this.map.painter._terrain,v=this.map.style.getSourceCache(this.id);h&&h.enabled&&v&&h._clearRenderCacheForTile(v.id,a.tileID),this.map.triggerRepaint()}loadTile(a,h){const v=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),S=this.map._requestManager.transformRequest(v,i.R.Tile),E={request:S,uid:a.uid,tileID:a.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};a.source=this.id,a.scope=this.scope,a.requestParams=S,a.actor||(a.actor=this.dispatcher.getActor());const D=(O,N,W,Z)=>{if(delete a.request,a.aborted)return a.state="unloaded",h(null);if(O)return O.name==="AbortError"?void 0:(a.state="errored",h(O));if(this.map._refreshExpiredTiles&&N&&a.setExpiryData({cacheControl:W,expires:Z}),this.partial)a.state="empty";else{if(!N)return h(null);a.state="loaded",a._isHeaderLoaded=!0,a._mrt=N}h(null)};a.request=this.partial?a.fetchHeader(void 0,D.bind(this)):a.actor.send("loadTile",E,D.bind(this),void 0,!0)}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,h){const v=a.texture;v&&v instanceof i.T?(a.destroy(!0),this.map.painter.saveTileTexture(v)):(a.destroy(),a.flushQueues(),a._isHeaderLoaded=!1,delete a._mrt,delete a.textureDescriptor),a.fbo&&(a.fbo.destroy(),delete a.fbo),delete a.request,delete a.requestParams,delete a.neighboringTiles,a.state="unloaded"}prepareTile(a,h,v){a._isHeaderLoaded&&(a.state!=="empty"&&(a.state="reloading"),a.fetchBand(h,v,(S,E)=>{if(S)return a.state="errored",this.fire(new i.z(S)),void this.triggerRepaint(a);E&&(a._isHeaderLoaded=!0,a.setTexture(E,this.map.painter),a.state="loaded",this.triggerRepaint(a))}))}getInitialBand(a){if(!this.rasterLayers)return 0;const h=this.rasterLayers.find(({id:E})=>E===a),v=h&&h.fields,S=v&&v.bands&&v.bands;return S?S[0]:0}getTextureDescriptor(a,h,v){if(!a)return;const S=h.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!S)return;let E=null;h instanceof i.aN?E=h.paint.get("raster-array-band"):h instanceof i.aO&&(E=h.paint.get("raster-particle-array-band"));const D=E||this.getInitialBand(S);if(D!=null)if(a.textureDescriptor){if(!a.updateNeeded(S,D)||v)return Object.assign({},a.textureDescriptor,{texture:a.texture})}else this.prepareTile(a,S,D)}getImages(a,h){const v=new Map;for(const S of a)for(const E of h){const[D,O]=E.split("/"),N=S.getLayer(D);if(!N||!N.hasBand(O)||!N.hasDataForBand(O))continue;const{bytes:W,tileSize:Z,buffer:te}=N.getBandView(O),J=Z+2*te,oe={data:new i.r({width:J,height:J},W),pixelRatio:2,sdf:!1,usvg:!1,version:0};v.set(E,oe)}return v}}const op={vector:rs,raster:ol,"raster-dem":class extends ol{constructor(y,a,h,v){super(y,a,h,v),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(y,a){const h=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(S,E){S&&(y.state="errored",a(S)),E&&(y.dem=E,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",a(null))}y.request=i.o(this.map._requestManager.transformRequest(h,i.R.Tile),(function(S,E,D,O){if(delete y.request,y.aborted)y.state="unloaded",a(null);else if(S)y.state="errored",a(S);else if(E){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:D,expires:O});const N=ImageBitmap&&E instanceof ImageBitmap&&i.t(),W=1-(E.width-i.aL(E.width))/2;W<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const Z=N?E:i.q.getImageData(E,W),te={uid:y.uid,tileID:y.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:Z,encoding:this.encoding,padding:W};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadTile",te,v.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(y){const a=y.canonical,h=Math.pow(2,a.z),v=(a.x-1+h)%h,S=a.x===0?y.wrap-1:y.wrap,E=(a.x+1+h)%h,D=a.x+1===h?y.wrap+1:y.wrap,O={};return O[new i.aM(y.overscaledZ,S,a.z,v,a.y).key]={backfilled:!1},O[new i.aM(y.overscaledZ,D,a.z,E,a.y).key]={backfilled:!1},a.y>0&&(O[new i.aM(y.overscaledZ,S,a.z,v,a.y-1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,y.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,D,a.z,E,a.y-1).key]={backfilled:!1}),a.y+1<h&&(O[new i.aM(y.overscaledZ,S,a.z,v,a.y+1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,y.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},O[new i.aM(y.overscaledZ,D,a.z,E,a.y+1).key]={backfilled:!1}),O}},"raster-array":zs,geojson:class extends i.E{constructor(y,a,h,v){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(v),this._data=a.data,this._options=i.l({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.minzoom!==void 0&&(this.minzoom=a.minzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const S=i.aj/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*S,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*S,extent:i.aj,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:i.aj,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*S,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter,dynamic:a.dynamic},a.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}updateData(y){if(!this._options.dynamic)return this.fire(new i.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof y!="string"&&(y.type==="Feature"&&(y={type:"FeatureCollection",features:[y]}),y.type!=="FeatureCollection"))return this.fire(new i.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof y!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const a=new Map;for(const h of this._data.features)a.set(h.id,h);for(const h of y.features)a.set(h.id,h);this._data.features=[...a.values()]}else this._data=y;return this._updateWorkerData(!0),this}getClusterExpansionZoom(y,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id,scope:this.scope},a),this}getClusterChildren(y,a){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id,scope:this.scope},a),this}getClusterLeaves(y,a,h,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:y,limit:a,offset:h},v),this}_updateWorkerData(y=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.A("dataloading",{dataType:"source"})),this._loaded=!1;const a=i.l({append:y},this.workerOptions);a.scope=this.scope;const h=this._data;typeof h=="string"?(a.request=this.map._requestManager.transformRequest(i.q.resolveURL(h),i.R.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(h),this._pendingLoad=this.actor.send(`${this.type}.loadData`,a,(v,S)=>{if(this._loaded=!0,this._pendingLoad=null,v)this.fire(new i.z(v));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&S&&S.resourceTiming&&S.resourceTiming[this.id]&&(E.resourceTiming=S.resourceTiming[this.id]),y&&(this._partialReload=!0),this.fire(new i.A("data",E)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(y),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const y=i.C(this.id,this.scope);this.map.style.clearSource(y),this._updateWorkerData()}loadTile(y,a){const h=y.actor?"reloadTile":"loadTile";y.actor=this.actor;const v=this.map.style?this.map.style.getLut(this.scope):null,S=v?{image:v.image.clone()}:null,E=this._partialReload,D={type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:S,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:y.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:E};y.request=this.actor.send(h,D,(O,N)=>E&&!N?(y.state="loaded",a(null)):(delete y.request,y.destroy(),y.aborted?a(null):O?a(O):(y.loadVectorData(N,this.map.painter,h==="reloadTile"),a(null))),void 0,h==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y,a){this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id,scope:this.scope}),y.destroy()}onRemove(y){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aP{constructor(y,a,h,v){super(y,a,h,v),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const a of y.urls)this.urls.push(this.map._requestManager.transformRequest(a,i.R.Source).url);i.aQ(this.urls,(a,h)=>{this._loaded=!0,a?this.fire(new i.z(a)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const a=this.video.seekable;y<a.start(0)||y>a.end(0)?this.fire(new i.z(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,a=y.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(y,this.video,a.RGBA8),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aP,model:class extends i.E{constructor(y,a,h,v){super(),this.id=y,this.type="model",this.models=[],this._loaded=!1,this._options=a}load(){const y=[];for(const a in this._options.models){const h=this._options.models[a],v=i.aS(this.map._requestManager.transformRequest(h.uri,i.R.Model).url).then(S=>{if(!S)return;const E=i.aT(S),D=new i.aU(a,h.position,h.orientation,E);D.computeBoundsAndApplyParent(),this.models.push(D)}).catch(S=>{this.fire(new i.z(new Error(`Could not load model ${a} from ${h.uri}: ${S.message}`)))});y.push(v)}Promise.allSettled(y).then(()=>{this._loaded=!0,this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(a=>{this._loaded=!0,this.fire(new i.z(new Error(`Could not load models: ${a.message}`)))})}onAdd(y){this.map=y,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(y,a){}serialize(){return this._options}},"batched-model":class extends i.E{constructor(y,a,h,v){super(),this.type="batched-model",this.id=y,this.tileSize=512,this._options=a,this.tiles=this._options.tiles,this.maxzoom=a.maxzoom||19,this.minzoom=a.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=h,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(v)}onAdd(y){this.map=y,this.load()}reload(){this.cancelTileJSONRequest();const y=i.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(y))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(y){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,h=this.map.getWorldview();this._tileJSONRequest=$o(this._options,this.map._requestManager,a,h,(v,S)=>{this._tileJSONRequest=null,this._loaded=!0,v?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),h&&h.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${h}`),this.fire(new i.z(v))):S&&(i.l(this,S),S.bounds&&(this.tileBounds=new Oi(S.bounds,this.minzoom,this.maxzoom)),dt(S.tiles,this.map._requestManager._customAccessToken),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))),y&&y(v)})}hasTransition(){return!1}hasTile(y){return!this.tileBounds||this.tileBounds.contains(y.canonical)}loaded(){return this._loaded}loadTile(y,a){const h=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(h,i.R.Tile),data:void 0,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,tileSize:this.tileSize*y.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:y.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:i.q.devicePixelRatio,promoteId:this.promoteId};if(y.actor&&y.state!=="expired")if(y.state==="loading")y.reloadCallback=a;else{if(y.buckets){const E=Object.values(y.buckets);for(const D of E)D.dirty=!0;return void(y.state="loaded")}y.request=y.actor.send("reloadTile",v,S.bind(this))}else y.actor=this.dispatcher.getActor(),y.request=y.actor.send("loadTile",v,S.bind(this),void 0,!0);function S(E,D){return y.aborted?a(null):E&&E.status!==404?a(E):(this.map._refreshExpiredTiles&&D&&y.setExpiryData(D),y.loadModelData(D,this.map.painter),y.state="loaded",void a(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aP{constructor(y,a,h,v){super(y,a,h,v),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(E=>typeof E!="number"))||this.fire(new i.z(new i.V(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.z(new i.V(`sources.${y}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new i.z(new i.V(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new i.z(new i.V(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.z(new i.V(`sources.${y}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(y){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?!y&&!this._playing||this.texture instanceof i.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(a,this.canvas,a.gl.RGBA8,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends i.E{constructor(y,a,h,v){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=a,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Oi(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.aF(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this.map=y,this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:a,y:h,z:v}=y.canonical;return this._implementation.hasTile({x:a,y:h,z:v})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,a){const{x:h,y:v,z:S}=y.tileID.canonical,E=new AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:h,y:v,z:S},{signal:E.signal})).then((function(D){return delete y.request,y.aborted?(y.state="unloaded",a(null)):D===void 0?(y.state="errored",a(null)):D===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",a(null)):function(O){return O instanceof ImageData||O instanceof HTMLCanvasElement||O instanceof ImageBitmap||O instanceof HTMLImageElement}(D)?(this.loadTileData(y,D),y.state="loaded",void a(null)):(y.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(D=>{D.name!=="AbortError"&&(y.state="errored",a(D))}),y.request.cancel=()=>E.abort()}loadTileData(y,a){y.setTexture(a,this.map.painter)}unloadTile(y,a){if(y.texture&&y.texture instanceof i.T?(y.destroy(!0),y.texture&&y.texture instanceof i.T&&this.map.painter.saveTileTexture(y.texture)):y.destroy(),this._implementation.unloadTile){const{x:h,y:v,z:S}=y.tileID.canonical;this._implementation.unloadTile({x:h,y:v,z:S})}a&&a()}abortTile(y,a){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),a&&a()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){const y=i.C(this.id,this.scope);this.map.style.clearSource(y)}_update(){this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}}},sp=function(y,a,h,v){const S=new op[a.type](y,a,h,v);if(S.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${S.id}`);return i.aV(["load","abort","unload","serialize","prepare"],S),S};function Vh(y,a,h=""){return`${h}:${a.id||""}:${a.layer.id}:${function(v){if("layerId"in v)return`layer:${v.layerId}`;{const{featuresetId:S,importId:E}=v;return`featureset:${S}${E?`:import:${E}`:""}`}}(y.target)}`}function ap(y,a,h,v=""){if(y.uniqueFeatureID){const S=Vh(y,a,v);if(h.has(S))return!0;h.add(S)}return!1}function ou(y,a,h,v,S=!1){const E=a.sourceCache.transform,D=a.sourceCache.tilesIn(y,a.has3DLayers,S);D.sort(Dl);const O=[];for(const N of D){const W=N.tile.queryRenderedFeatures(a,N,h,v,E,S);Object.keys(W).length&&O.push({wrappedTileID:N.tile.tileID.wrapped().key,queryResults:W})}return O.length===0?{}:function(N){const W={},Z={};for(const te of N){const J=te.queryResults,oe=te.wrappedTileID,ge=Z[oe]=Z[oe]||{};for(const pe in J){const ve=J[pe],me=ge[pe]=ge[pe]||{},Re=W[pe]=W[pe]||[];for(const Be of ve)me[Be.featureIndex]||(me[Be.featureIndex]=!0,Re.push(Be))}}return W}(O)}function Em(y,a,h,v,S){const E={},D=v.queryRenderedSymbols(y),O=[];for(const N of Object.keys(D).map(Number))O.push(S[N]);O.sort(Dl);for(const N of O){const W=N.featureIndex.lookupSymbolFeatures(D[N.bucketInstanceId],N.bucketIndex,N.sourceLayerIndex,a,h);for(const Z in W){const te=E[Z]=E[Z]||[],J=W[Z];J.sort((oe,ge)=>{const pe=N.featureSortOrder;if(pe){const ve=pe.indexOf(oe.featureIndex);return pe.indexOf(ge.featureIndex)-ve}return ge.featureIndex-oe.featureIndex});for(const oe of J)te.push(oe)}}return E}function sl(y,a){const h=y.getRenderableIds().map(E=>y.getTileByID(E)),v=[],S={};for(let E=0;E<h.length;E++){const D=h[E],O=D.tileID.canonical.key;S[O]||(S[O]=!0,D.querySourceFeatures(v,a))}return v}function Dl(y,a){const h=y.tileID,v=a.tileID;return h.overscaledZ-v.overscaledZ||h.canonical.y-v.canonical.y||h.wrap-v.wrap||h.canonical.x-v.canonical.x}function oy(y,a){const h={};if(!a)return h;for(const v of y){const S=v.layerIds.map(E=>a.getLayer(E)).filter(Boolean);if(S.length!==0){v.layers=S,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(E=>S.filter(D=>D.id===E)[0]));for(const E of S)h[E.fqid]=v}}return h}const Ra=32,Da=33,su=new Uint16Array(8184);for(let y=0;y<2046;y++){let a=y+2,h=0,v=0,S=0,E=0,D=0,O=0;for(1&a?S=E=D=Ra:h=v=O=Ra;(a>>=1)>1;){const W=h+S>>1,Z=v+E>>1;1&a?(S=h,E=v,h=D,v=O):(h=S,v=E,S=D,E=O),D=W,O=Z}const N=4*y;su[N+0]=h,su[N+1]=v,su[N+2]=S,su[N+3]=E}const Gl=new Uint16Array(2178),al=new Uint8Array(1089),Yl=new Uint16Array(1089);function lp(y){return y===0?-.03125:y===32?.03125:0}const sy={type:2,extent:i.aj,loadGeometry:()=>[[new i.P(0,0),new i.P(i.aj+1,0),new i.P(i.aj+1,i.aj+1),new i.P(0,i.aj+1),new i.P(0,0)]]};class Mc{constructor(a,h,v,S,E){this.tileID=a,this.uid=i.a$(),this.uses=0,this.tileSize=h,this.tileZoom=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=E,S&&S.style&&(this._lastUpdatedBrightness=S.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",S&&S.transform&&(this.projection=S.transform.projection)}registerFadeDuration(a){const h=a+this.timeAdded;h<i.q.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,h,v){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=oy(a.buckets,h.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const E=this.buckets[S];if(E instanceof i.b1){if(this.hasSymbolBuckets=!0,!v)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const E=this.buckets[S];if(E instanceof i.b1&&E.hasRTLText){this.hasRTLText=!0,i.b2();break}}this.queryPadding=0;for(const S in this.buckets){const E=this.buckets[S],D=h.style.getOwnLayer(S);if(!D)continue;const O=D.queryRadius(E);this.queryPadding=Math.max(this.queryPadding,O)}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas),this._lastUpdatedBrightness=a.brightness}else this.collisionBoxArray=new i.b0}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(a,h,v){a&&(a.resourceTiming&&(this.resourceTiming=a.resourceTiming),this.buckets=Object.assign({},this.buckets,oy(a.buckets,h.style)),a.featureIndex&&(this.latestFeatureIndex=a.featureIndex))}getBucket(a){return this.buckets[a.fqid]}upload(a){for(const S in this.buckets){const E=this.buckets[S];E.uploadPending()&&E.upload(a)}const h=a.gl,v=this.imageAtlas;v&&!v.uploaded&&(this.imageAtlasTexture=new i.T(a,v.image,h.RGBA8,{useMipmap:!!v.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(a,this.glyphAtlasImage,h.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(a,this.lineAtlas.image,h.R8),this.lineAtlas.uploaded=!0)}prepare(a,h,v){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture,v),!h||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const S=h.style.getBrightness();(this._lastUpdatedBrightness||S)&&(this._lastUpdatedBrightness&&S&&Math.abs(this._lastUpdatedBrightness-S)<.001||(this.updateBuckets(h,this._lastUpdatedBrightness!==S),this._lastUpdatedBrightness=S))}queryRenderedFeatures(a,h,v,S,E,D){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const O=function(N,W){const Z=i.bn([],[.5*N.width,.5*-N.height,1]);return i.bo(Z,Z,[1,-1,0]),i.az(Z,Z,N.calculateProjMatrix(W.toUnwrapped())),Float32Array.from(Z)}(E,this.tileID);return this.latestFeatureIndex.query(a,{tilespaceGeometry:h,pixelPosMatrix:O,transform:S,availableImages:v,tileTransform:this.tileTransform})}querySourceFeatures(a,h){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const S=v.loadVTLayers(),E=h?h.sourceLayer:"",D=S._geojsonTileLayer||S[E];if(!D)return;const O=i.b3(h&&h.filter),{z:N,x:W,y:Z}=this.tileID.canonical,te={z:N,x:W,y:Z};for(let J=0;J<D.length;J++){const oe=D.feature(J);if(O.needGeometry){const ve=i.b4(oe,!0);if(!O.filter(new i.aa(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!O.filter(new i.aa(this.tileID.overscaledZ),oe))continue;const ge=v.getId(oe,E),pe=new i.b5(oe,N,W,Z,ge);pe.tile=te,a.push(pe)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(a){const h=this.expirationTime;if(a.cacheControl){const v=i.b6(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let S=!1;if(this.expirationTime>v)S=!1;else if(h)if(this.expirationTime<h)S=!0;else{const E=this.expirationTime-h;E?this.expirationTime=v+Math.max(E,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(a){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&a&&this.updateBuckets(a)}updateBuckets(a,h){if(!this.latestFeatureIndex||!a.style)return;const v=this.latestFeatureIndex.loadVTLayers(),S=a.style.listImages(),E=a.style.getBrightness();for(const D in this.buckets){if(!a.style.hasLayer(D))continue;const O=this.buckets[D],N=O.layers[0],W=N.sourceLayer||"_geojsonTileLayer",Z=v[W],te=a.style.getLayerSourceCache(N);let J={};te&&(J=te._state.getState(W,void 0));const oe=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},ge=Object.keys(J).length>0&&!h;ge&&!O.stateDependentLayers.length&&!h||O.update(J,Z,S,oe,ge?O.stateDependentLayers:O.layers,h,E),(O instanceof i.b7||O instanceof i.b8)&&a._terrain&&a._terrain.enabled&&te&&O.uploadPending()&&a._terrain._clearRenderCacheForTile(te.id,this.tileID);const pe=a&&a.style&&a.style.getOwnLayer(D);pe&&(this.queryPadding=Math.max(this.queryPadding,pe.queryRadius(O)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=i.q.now()+a}setTexture(a,h){const v=h.context,S=v.gl;this.texture=this.texture||h.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a):(this.texture=new i.T(v,a,S.RGBA8,{useMipmap:!0}),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE))}setDependencies(a,h){const v={};for(const S of h)v[S]=!0;this.dependencies[a]=v}hasDependency(a,h){for(const v of a){const S=this.dependencies[v];if(S){for(const E of h)if(S[E])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,h){if(!h||h.name==="mercator"||this._tileDebugBuffer)return;const v=i.b9(sy,this.tileID.canonical,this.tileTransform)[0],S=new i.ba,E=new i.bb;for(let D=0;D<v.length;D++){const{x:O,y:N}=v[D];S.emplaceBack(O,N),E.emplaceBack(D)}E.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(E),this._tileDebugBuffer=a.createVertexBuffer(S,i.bc.members),this._tileDebugSegments=i.bd.simpleSegment(0,0,S.length,E.length)}_makeTileBoundsBuffers(a,h){if(this._tileBoundsBuffer||!h||h.name==="mercator")return;const v=i.b9(sy,this.tileID.canonical,this.tileTransform)[0];let S,E;if(this.isRaster){const D=function(O,N){const W=i.aW(O,N),Z=Math.pow(2,O.z);for(let ve=0;ve<Da;ve++)for(let me=0;me<Da;me++){const Re=i.aX((O.x+(me+lp(me))/Ra)/Z),Be=i.aY((O.y+(ve+lp(ve))/Ra)/Z),Ue=N.project(Re,Be),Ke=ve*Da+me;Gl[2*Ke+0]=Math.round((Ue.x*W.scale-W.x)*i.aj),Gl[2*Ke+1]=Math.round((Ue.y*W.scale-W.y)*i.aj)}al.fill(0),Yl.fill(0);for(let ve=2045;ve>=0;ve--){const me=4*ve,Re=su[me+0],Be=su[me+1],Ue=su[me+2],Ke=su[me+3],Ye=Re+Ue>>1,Ge=Be+Ke>>1,Ne=Ye+Ge-Be,Je=Ge+Re-Ye,nt=Be*Da+Re,bt=Ke*Da+Ue,mt=Ge*Da+Ye,$t=Math.hypot((Gl[2*nt+0]+Gl[2*bt+0])/2-Gl[2*mt+0],(Gl[2*nt+1]+Gl[2*bt+1])/2-Gl[2*mt+1])>=16;al[mt]=al[mt]||($t?1:0),ve<1022&&(al[mt]=al[mt]||al[(Be+Je>>1)*Da+(Re+Ne>>1)]||al[(Ke+Je>>1)*Da+(Ue+Ne>>1)])}const te=new i.aZ,J=new i.a_;let oe=0;function ge(ve,me){const Re=me*Da+ve;return Yl[Re]===0&&(te.emplaceBack(Gl[2*Re+0],Gl[2*Re+1],ve*i.aj/Ra,me*i.aj/Ra),Yl[Re]=++oe),Yl[Re]-1}function pe(ve,me,Re,Be,Ue,Ke){const Ye=ve+Re>>1,Ge=me+Be>>1;if(Math.abs(ve-Ue)+Math.abs(me-Ke)>1&&al[Ge*Da+Ye])pe(Ue,Ke,ve,me,Ye,Ge),pe(Re,Be,Ue,Ke,Ye,Ge);else{const Ne=ge(ve,me),Je=ge(Re,Be),nt=ge(Ue,Ke);J.emplaceBack(Ne,Je,nt)}}return pe(0,0,Ra,Ra,Ra,0),pe(Ra,Ra,0,0,0,Ra),{vertices:te,indices:J}}(this.tileID.canonical,h);S=D.vertices,E=D.indices}else{S=new i.aZ,E=new i.a_;for(const{x:O,y:N}of v)S.emplaceBack(O,N,0,0);const D=i.be(S.int16.subarray(0,4*S.length),void 0,4);for(let O=0;O<D.length;O+=3)E.emplaceBack(D[O],D[O+1],D[O+2])}this._tileBoundsBuffer=a.createVertexBuffer(S,i.bf.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(E),this._tileBoundsSegments=i.bd.simpleSegment(0,0,S.length,E.length)}_makeGlobeTileDebugBuffers(a,h){const v=h.projection;if(!v||v.name!=="globe"||h.freezeTileCoverage)return;const S=this.tileID.canonical,E=i.bg(S,h),D=i.bh(E),O=i.ah(h.zoom);let N;O>0&&(N=i.bi(new Float64Array(16),h.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,S,h,D,N,O),this._makeGlobeTileDebugTextBuffer(a,S,h,D,N,O)}_globePoint(a,h,v,S,E,D,O){let N=i.bj(a,h,v);if(D){const W=1<<v.z,Z=i.ay(S.center.lng),te=i.aH(S.center.lat),J=(v.x+.5)/W-Z;let oe=0;J>.5?oe=-1:J<-.5&&(oe=1);let ge=(a/i.aj+v.x)/W+oe,pe=(h/i.aj+v.y)/W;ge=(ge-Z)*S._pixelsPerMercatorPixel+Z,pe=(pe-te)*S._pixelsPerMercatorPixel+te;const ve=[ge*S.worldSize,pe*S.worldSize,0];i.ad(ve,ve,D),N=i.bk(N,ve,O)}return i.ad(N,N,E)}_makeGlobeTileDebugBorderBuffer(a,h,v,S,E,D){const O=new i.ba,N=new i.bb,W=new i.bl,Z=(J,oe,ge,pe,ve)=>{const me=(ge-J)/(ve-1),Re=(pe-oe)/(ve-1),Be=O.length;for(let Ue=0;Ue<ve;Ue++){const Ke=J+Ue*me,Ye=oe+Ue*Re;O.emplaceBack(Ke,Ye);const Ge=this._globePoint(Ke,Ye,h,v,S,E,D);W.emplaceBack(Ge[0],Ge[1],Ge[2]),N.emplaceBack(Be+Ue)}},te=i.aj;Z(0,0,te,0,16),Z(te,0,te,te,16),Z(te,te,0,te,16),Z(0,te,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(N),this._tileDebugBuffer=a.createVertexBuffer(O,i.bc.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(W,i.bm.members),this._tileDebugSegments=i.bd.simpleSegment(0,0,O.length,N.length)}_makeGlobeTileDebugTextBuffer(a,h,v,S,E,D){const O=i.aj/4,N=new i.ba,W=new i.a_,Z=new i.bl,te=25;W.reserve(32),N.reserve(te),Z.reserve(te);const J=(oe,ge)=>te*oe+ge;for(let oe=0;oe<te;oe++){const ge=oe*O;for(let pe=0;pe<te;pe++){const ve=pe*O;N.emplaceBack(ve,ge);const me=this._globePoint(ve,ge,h,v,S,E,D);Z.emplaceBack(me[0],me[1],me[2])}}for(let oe=0;oe<4;oe++)for(let ge=0;ge<4;ge++){const pe=J(oe,ge),ve=J(oe,ge+1),me=J(oe+1,ge),Re=J(oe+1,ge+1);W.emplaceBack(pe,ve,me),W.emplaceBack(me,ve,Re)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(W),this._tileDebugTextBuffer=a.createVertexBuffer(N,i.bc.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(Z,i.bm.members),this._tileDebugTextSegments=i.bd.simpleSegment(0,0,te,32)}destroy(a=!1){for(const h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!a&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.bp.setPbf(i.bq);class Cm extends Mc{constructor(a,h,v,S,E){super(a,h,v,S,E),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(a){return this._mrt&&this._mrt.getLayer(a)}setTexture(a,h){const v=h.context,S=v.gl;this.texture=this.texture||h.getTileTexture(a.width),this.texture&&this.texture instanceof i.T?this.texture.update(a,{premultiply:!1}):this.texture=new i.T(v,a,S.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(a=16384,h){const v=this._mrt=new i.bp(30),S=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(a-1)}});return this.entireBuffer=null,this.request=i.br(S,(E,D,O,N)=>{if(E)h(E);else try{const W=v.getHeaderLength(D);if(W>a)return void(this.request=this.fetchHeader(W,h));v.parseHeader(D),this._isHeaderLoaded=!0;let Z=0;for(const te of Object.values(v.layers))Z=Math.max(Z,te.dataIndex[te.dataIndex.length-1].lastByte);D.byteLength>=Z&&(this.entireBuffer=D),h(null,this.entireBuffer||D,O,N)}catch(W){h(W)}}),this.request}fetchBand(a,h,v){const S=this._mrt;if(!this._isHeaderLoaded||!S)return void v(new Error("Tile header is not ready"));const E=this.actor;if(!E)return void v(new Error("Can't fetch tile band without an actor"));let D;const O=(te,J)=>{D.complete(te,J),te?v(te):(this.updateTextureDescriptor(a,h),v(null,this.textureDescriptor&&this.textureDescriptor.img))},N=(te,J)=>{if(te)return v(te);const oe=E.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:J,task:D},O,void 0,!0);this._workQueue.push(()=>{oe&&oe.cancel(),D.cancel()})},W=S.getLayer(a);if(!W)return void v(new Error(`Unknown sourceLayer "${a}"`));if(W.hasDataForBand(h))return this.updateTextureDescriptor(a,h),void v(null,this.textureDescriptor?this.textureDescriptor.img:null);const Z=W.getDataRange([h]);if(D=S.createDecodingTask(Z),!D||D.tasks.length)if(this.flushQueues(),this.entireBuffer)N(null,this.entireBuffer.slice(Z.firstByte,Z.lastByte+1));else{const te=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Z.firstByte}-${Z.lastByte}`}}),J=i.br(te,N);this._fetchQueue.push(()=>{J.cancel(),D.cancel()})}else v(null)}updateNeeded(a,h){return(!this.textureDescriptor||this.textureDescriptor.band!==h||this.textureDescriptor.layer!==a)&&this.state!=="errored"}updateTextureDescriptor(a,h){if(!this._mrt)return;const v=this._mrt.getLayer(a);if(!v||!v.hasBand(h)||!v.hasDataForBand(h))return;const{bytes:S,tileSize:E,buffer:D,offset:O,scale:N}=v.getBandView(h),W=E+2*D,Z=new i.r({width:W,height:W},S),te=this.texture;te&&te instanceof i.T&&te.update(Z,{premultiply:!1}),this.textureDescriptor={layer:a,band:h,img:Z,buffer:D,offset:O,tileSize:E,format:v.pixelFormat,mix:[N,256*N,65536*N,16777216*N]}}}class jv{constructor(a,h){this.max=a,this.onRemove=h,this.reset()}reset(){for(const a in this.data)for(const h of this.data[a])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(a,h,v){const S=a.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const E={value:h,timeout:void 0};if(v!==void 0&&(E.timeout=setTimeout(()=>{this.remove(a,E)},v)),this.data[S].push(E),this.order.push(S),this.order.length>this.max){const D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const h=this.data[a].shift();return h.timeout&&clearTimeout(h.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),h.value}getByKey(a){const h=this.data[a];return h?h[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,h){if(!this.has(a))return this;const v=a.wrapped().key,S=h===void 0?0:this.data[v].indexOf(h),E=this.data[v][S];return this.data[v].splice(S,1),E.timeout&&clearTimeout(E.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(E.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(a){const h=[];for(const v in this.data)for(const S of this.data[v])a(S.value)||h.push(S);for(const v of h)this.remove(v.value.tileID,v)}}class Md{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,h,v){const S=String(h);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][S]=this.stateChanges[a][S]||{},i.l(this.stateChanges[a][S],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const E in this.state[a])E!==S&&(this.deletedStates[a][E]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][S]===null){this.deletedStates[a][S]={};for(const E in this.state[a][S])v[E]||(this.deletedStates[a][S][E]=null)}else for(const E in v)this.deletedStates[a]&&this.deletedStates[a][S]&&this.deletedStates[a][S][E]===null&&delete this.deletedStates[a][S][E]}removeFeatureState(a,h,v){if(this.deletedStates[a]===null)return;const S=String(h);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&h!==void 0)this.deletedStates[a][S]!==null&&(this.deletedStates[a][S]=this.deletedStates[a][S]||{},this.deletedStates[a][S][v]=null);else if(h!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][S])for(v in this.deletedStates[a][S]={},this.stateChanges[a][S])this.deletedStates[a][S][v]=null;else this.deletedStates[a][S]=null;else this.deletedStates[a]=null}getState(a,h){const v=this.state[a]||{},S=this.stateChanges[a]||{},E=this.deletedStates[a];if(E===null)return{};if(h!==void 0){const O=String(h),N=i.l({},v[O],S[O]);if(E){const W=E[h];if(W===null)return{};for(const Z in W)delete N[Z]}return N}const D=i.l({},v,S);if(E)for(const O in E)delete D[O];return D}initializeTileState(a,h){a.refreshFeatureState(h)}coalesceChanges(a,h){const v={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const E={};for(const D in this.stateChanges[S])this.state[S][D]||(this.state[S][D]={}),i.l(this.state[S][D],this.stateChanges[S][D]),E[D]=this.state[S][D];v[S]=E}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const E={};if(this.deletedStates[S]===null)for(const D in this.state[S])E[D]={},this.state[S][D]={};else for(const D in this.deletedStates[S]){if(this.deletedStates[S][D]===null)this.state[S][D]={};else if(this.state[S][D])for(const O of Object.keys(this.deletedStates[S][D]))delete this.state[S][D][O];E[D]=this.state[S][D]}v[S]=v[S]||{},i.l(v[S],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const S in a)a[S].refreshFeatureState(h)}}class ta extends i.E{constructor(a,h,v){super(),this.id=a,this._onlySymbols=v,h.on("data",S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),h.on("error",()=>{this._sourceErrored=!0}),this._source=h,this._tiles={},this._cache=new jv(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Md,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles)if(!this._tiles[a].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,h){return a.isSymbolTile=this._onlySymbols,a.isExtraShadowCaster=this._shadowCasterTiles[a.tileID.key],this._source.loadTile(a,h)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a)}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a)}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const v=this._tiles[h];v.upload(a),v.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(cp).map(a=>a.key)}getRenderableIds(a,h){const v=[];for(const S in this._tiles)this._isIdRenderable(+S,a,h)&&v.push(this._tiles[S]);return a?v.sort((S,E)=>{const D=S.tileID,O=E.tileID,N=new i.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle),W=new i.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return D.overscaledZ-O.overscaledZ||W.y-N.y||W.x-N.x}).map(S=>S.tileID.key):v.map(S=>S.tileID).sort(cp).map(S=>S.key)}hasRenderableParent(a){const h=this.findLoadedParent(a,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(a,h,v){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(h||!this._tiles[a].holdingForFade())&&(v||!this._shadowCasterTiles[a])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,h){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=h),this._loadTile(v,this._tileLoaded.bind(this,v,a,h)))}_tileLoaded(a,h,v,S){if(S)if(a.state="errored",S.status!==404)this._source.fire(new i.z(S,{tile:a}));else{if(this._source.fire(new i.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:a})),!(a.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const E=this.map.painter.terrain;this.update(this.transform,E.getScaledDemTileSize(),!0),E.resetTileLookupCache(this.id)}else this.update(this.transform)}else a.timeAdded=i.q.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(h,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new i.A("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const h=this.getRenderableIds();for(let S=0;S<h.length;S++){const E=h[S];if(a.neighboringTiles&&a.neighboringTiles[E]){const D=this.getTileByID(E);v(a,D),v(D,a)}}function v(S,E){if(!S.dem||S.dem.borderReady)return;S.needsHillshadePrepare=!0,S.needsDEMTextureUpload=!0;let D=E.tileID.canonical.x-S.tileID.canonical.x;const O=E.tileID.canonical.y-S.tileID.canonical.y,N=Math.pow(2,S.tileID.canonical.z),W=E.tileID.key;D===0&&O===0||Math.abs(O)>1||(Math.abs(D)>1&&(Math.abs(D+N)===1?D+=N:Math.abs(D-N)===1&&(D-=N)),E.dem&&S.dem&&(S.dem.backfillBorder(E.dem,D,O),S.neighboringTiles&&S.neighboringTiles[W]&&(S.neighboringTiles[W].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,h,v,S){for(const E in this._tiles){let D=this._tiles[E];if(S[E]||!D.hasData()||D.tileID.overscaledZ<=h||D.tileID.overscaledZ>v)continue;let O=D.tileID;for(;D&&D.tileID.overscaledZ>h+1;){const W=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[W.key],D&&D.hasData()&&(O=W)}let N=O;for(;N.overscaledZ>h;)if(N=N.scaledTo(N.overscaledZ-1),a[N.key]){S[O.key]=O;break}}}findLoadedParent(a,h){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=h?v:null}for(let v=a.overscaledZ-1;v>=h;v--){const S=a.scaledTo(v),E=this._getLoadedTile(S);if(E)return E}}_getLoadedTile(a){const h=this._tiles[a.key];return h&&h.hasData()?h:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,h){h=h||this._source.tileSize;const v=Math.ceil(a.width/h)+1,S=Math.ceil(a.height/h)+1,E=Math.floor(v*S*5),D=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,E):E,O=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(O)}handleWrapJump(a){const h=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,h){const v={};for(const S in this._tiles){const E=this._tiles[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),v[E.tileID.key]=E}this._tiles=v;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(+S,this._tiles[S])}}update(a,h,v,S,E){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!v)return;this.updateCacheSize(a,h),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const D=this._source.type==="batched-model";let O,N=this._source.maxzoom;const W=this.map&&this.map.painter?this.map.painter._terrain:null;if(W&&W.sourceCache===this&&W.attenuationRange()){const J=W.attenuationRange()[0],oe=Math.floor(J)-Math.log2(W.getDemUpscale());N>oe&&(N=oe)}if(this.used||this.usedForTerrain){if(this._source.tileID)O=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new i.aM(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y));else if(this.tileCoverLift!==0){const J=a.clone();J.tileCoverLift=this.tileCoverLift,O=J.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:N,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:D}),this._source.minzoom<=1&&a.projection.name==="globe"&&(O.push(new i.aM(1,0,1,0,0)),O.push(new i.aM(1,0,1,1,0)),O.push(new i.aM(1,0,1,0,1)),O.push(new i.aM(1,0,1,1,1)))}else if(O=a.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:N,roundZoom:this._source.roundZoom&&!v,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:D}),this._source.hasTile){const J=this._source.hasTile.bind(this._source);O=O.filter(oe=>J(oe))}}else O=[];if(O.length>0&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!ku(this._source.type)){const J=a.coveringZoomLevel({tileSize:h||this._source.tileSize,roundZoom:this._source.roundZoom&&!v}),oe=Math.min(J,this._source.maxzoom);if(D){const ge=a.extendTileCover(O,oe);for(const pe of ge)O.push(pe)}else if(E){const ge=a.extendTileCover(O,oe,this.transform._camera.forward());for(const pe of ge)O.push(pe)}else if(this.castsShadows&&S){const ge=a.extendTileCover(O,oe,S);for(const pe of ge)this._shadowCasterTiles[pe.key]=!0,O.push(pe)}}const Z=this._updateRetainedTiles(O);if(ku(this._source.type)&&O.length!==0){const J={},oe={},ge=Object.keys(Z);for(const ve of ge){const me=Z[ve],Re=this._tiles[ve];if(!Re||Re.fadeEndTime&&Re.fadeEndTime<=i.q.now())continue;const Be=this.findLoadedParent(me,Math.max(me.overscaledZ-ta.maxOverzooming,this._source.minzoom));Be&&(this._addTile(Be.tileID),J[Be.tileID.key]=Be.tileID),oe[ve]=me}const pe=O[O.length-1].overscaledZ;for(const ve in this._tiles){const me=this._tiles[ve];if(Z[ve]||!me.hasData())continue;let Re=me.tileID;for(;Re.overscaledZ>pe;){Re=Re.scaledTo(Re.overscaledZ-1);const Be=this._tiles[Re.key];if(Be&&Be.hasData()&&oe[Re.key]){Z[ve]=me.tileID;break}}}for(const ve in J)Z[ve]||(this._coveredTiles[ve]=!0,Z[ve]=J[ve])}for(const J in Z)this._tiles[J].clearFadeHold();const te=i.bs(this._tiles,Z);for(const J of te){const oe=this._tiles[J];oe.hasSymbolBuckets&&!oe.holdingForFade()?oe.setHoldDuration(this.map._fadeDuration):oe.hasSymbolBuckets&&!oe.symbolFadeFinished()||this._removeTile(+J)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const h={};if(a.length===0)return h;const v={},S=a.reduce((W,Z)=>Math.min(W,Z.overscaledZ),1/0),E=a[0].overscaledZ,D=Math.max(E-ta.maxOverzooming,this._source.minzoom),O=Math.max(E+ta.maxUnderzooming,this._source.minzoom),N={};for(const W of a){const Z=this._addTile(W);h[W.key]=W,Z.hasData()||S<this._source.maxzoom&&(N[W.key]=W)}this._retainLoadedChildren(N,S,O,h);for(const W of a){let Z=this._tiles[W.key];if(Z.hasData())continue;if(W.canonical.z>=this._source.maxzoom){const J=W.children(this._source.maxzoom)[0],oe=this.getTile(J);if(oe&&oe.hasData()){h[J.key]=J;continue}}else{const J=W.children(this._source.maxzoom);if(h[J[0].key]&&h[J[1].key]&&h[J[2].key]&&h[J[3].key])continue}let te=Z.wasRequested();for(let J=W.overscaledZ-1;J>=D;--J){const oe=W.scaledTo(J);if(v[oe.key]||(v[oe.key]=!0,Z=this.getTile(oe),!Z&&te&&(Z=this._addTile(oe)),Z&&(h[oe.key]=oe,te=Z.wasRequested(),Z.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const h=[];let v,S=this._tiles[a].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){v=this._loadedParentTiles[S.key];break}h.push(S.key);const E=S.scaledTo(S.overscaledZ-1);if(v=this._getLoadedTile(E),v)break;S=E}for(const E of h)this._loadedParentTiles[E]=v}}_addTile(a){let h=this._tiles[a.key];if(h)return h.isExtraShadowCaster!==!0||this._shadowCasterTiles[a.key]||this._reloadTile(a.key,"reloading"),h;h=this._cache.getAndRemove(a),h&&(this._setTileReloadTimer(a.key,h),h.tileID=a,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,h)));const v=!!h;if(!v){const S=this.map?this.map.painter:null,E=this._source.tileSize*a.overscaleFactor();h=this._source.type==="raster-array"?new Cm(a,E,this.transform.tileZoom,S,this._isRaster):new Mc(a,E,this.transform.tileZoom,S,this._isRaster),this._loadTile(h,this._tileLoaded.bind(this,h,a.key,h.state))}return h.uses++,this._tiles[a.key]=h,v||this._source.fire(new i.A("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(a,h){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=h.getExpiryTimeout();v&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},v))}_removeTile(a){const h=this._tiles[a];h&&(h.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),h.uses>0||(h.hasData()&&h.state!=="reloading"||h.state==="empty"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,h,v){const S=[],E=this.transform;if(!E)return S;const D=E.projection.name==="globe",O=i.ay(E.center.lng);for(const N in this._tiles){const W=this._tiles[N];if(v&&W.clearQueryDebugViz(),W.holdingForFade())continue;let Z;if(D){const te=W.tileID.canonical;if(te.z===0){const J=[Math.abs(i.aD(O,...Ac(te,-1))-O),Math.abs(i.aD(O,...Ac(te,1))-O)];Z=[0,2*J.indexOf(Math.min(...J))-1]}else{const J=[Math.abs(i.aD(O,...Ac(te,-1))-O),Math.abs(i.aD(O,...Ac(te,0))-O),Math.abs(i.aD(O,...Ac(te,1))-O)];Z=[J.indexOf(Math.min(...J))-1]}}else Z=[0];for(const te of Z){const J=a.containsTile(W,E,h,te);J&&S.push(J)}}return S}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(a){return this._getRenderableCoordinates(a)}_getRenderableCoordinates(a,h){const v=this.getRenderableIds(a,h).map(E=>this._tiles[E].tileID),S=this.transform.projection.name==="globe";for(const E of v)E.projMatrix=this.transform.calculateProjMatrix(E.toUnwrapped()),E.expandedProjMatrix=S?this.transform.calculateProjMatrix(E.toUnwrapped(),!1,!0):E.projMatrix;return v}sortCoordinatesByDistance(a){const h=a.slice(),v=this.transform._camera.position,S=this.transform._camera.forward(),E={};for(const D of h){const O=1/(1<<D.canonical.z);E[D.key]=((D.canonical.x+.5)*O+D.wrap-v[0])*S[0]+((D.canonical.y+.5)*O-v[1])*S[1]-v[2]*S[2]}return h.sort((D,O)=>E[D.key]-E[O.key]),h}hasTransition(){if(this._source.hasTransition())return!0;if(ku(this._source.type))for(const a in this._tiles){const h=this._tiles[a];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(a,h,v){this._state.updateState(a=a||"_geojsonTileLayer",h,v)}removeFeatureState(a,h,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",h,v)}getFeatureState(a,h){return this._state.getState(a=a||"_geojsonTileLayer",h)}setDependencies(a,h,v){const S=this._tiles[a];S&&S.setDependencies(h,v)}reloadTilesForDependencies(a,h){for(const v in this._tiles)this._tiles[v].hasDependency(a,h)&&this._reloadTile(+v,"reloading");this._cache.filter(v=>!v.hasDependency(a,h))}_preloadTiles(a,h){if(!this._sourceLoaded){const N=()=>{this._sourceLoaded&&(this._source.off("data",N),this._preloadTiles(a,h))};return void this._source.on("data",N)}const v=new Map,S=Array.isArray(a)?a:[a],E=this.map.painter.terrain,D=this.usedForTerrain&&E?E.getScaledDemTileSize():this._source.tileSize;for(const N of S){const W=N.coveringTiles({tileSize:D,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Z of W)v.set(Z.key,Z);this.usedForTerrain&&N.updateElevation(!1)}const O=Array.from(v.values());i.bt(O,(N,W)=>{const Z=new Mc(N,this._source.tileSize*N.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Z,te=>{this._source.type==="raster-dem"&&Z.dem&&this._backfillDEM(Z),W(te,Z)})},h)}}function cp(y,a){const h=Math.abs(2*y.wrap)-+(y.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return y.overscaledZ-a.overscaledZ||v-h||a.canonical.y-y.canonical.y||a.canonical.x-y.canonical.x}function ku(y){return y==="raster"||y==="image"||y==="video"||y==="custom"}function Ac(y,a){const h=1<<y.z;return[y.x/h+a,(y.x+1)/h+a]}ta.maxOverzooming=10,ta.maxUnderzooming=3;class Nv{constructor(a){this.style=a,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const a=!1,h=!1;for(const v in this.style._mergedLayers){const S=this.style._mergedLayers[v];if(S.type==="fill-extrusion")this.layers.push({layer:S,visible:a,visibilityChanged:h});else if(S.type==="model"){const E=this.style.getLayerSource(S);E&&E.type==="batched-model"&&this.layers.push({layer:S,visible:a,visibilityChanged:h})}}}onNewFrame(a){this.layersGotHidden=!1;for(const h of this.layers){const v=h.layer;let S=!1;v.type==="fill-extrusion"?S=!v.isHidden(a)&&v.paint.get("fill-extrusion-opacity")>0:v.type==="model"&&(S=!v.isHidden(a)&&v.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!S&&h.visible,h.visible=S}}updateZOffset(a,h){this.currentBuildingBuckets=[];for(const S of this.layers){const E=S.layer,D=this.style.getLayerSourceCache(E);let O=1;E.type==="fill-extrusion"&&(O=S.visible?E.paint.get("fill-extrusion-vertical-scale"):0);let N=D?D.getTile(h):null;if(!N&&D&&h.canonical.z>D.getSource().minzoom){let W=h.scaledTo(Math.min(D.getSource().maxzoom,h.overscaledZ-1));for(;W.overscaledZ>=D.getSource().minzoom&&(N=D.getTile(W),!N&&W.overscaledZ!==0);)W=W.scaledTo(W.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:N?N.getBucket(E):null,tileID:N?N.tileID:h,verticalScale:O})}a.hasAnyZOffset=!1;let v=!1;for(let S=0;S<a.symbolInstances.length;S++){const E=a.symbolInstances.get(S),D=E.zOffset,O=this._getHeightAtTileOffset(h,E.tileAnchorX,E.tileAnchorY);E.zOffset=O!==Number.NEGATIVE_INFINITY?O:D,v||D===E.zOffset||(v=!0),a.hasAnyZOffset||E.zOffset===0||(a.hasAnyZOffset=!0)}v&&(a.zOffsetBuffersNeedUpload=!0,a.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(a,h,v,S){let E=h,D=v;if(a.canonical.z!==S.canonical.z){const O=S.canonical,N=1/(1<<a.canonical.z-O.z);E=(h+a.canonical.x*i.aj)*N-O.x*i.aj|0,D=(v+a.canonical.y*i.aj)*N-O.y*i.aj|0}return{tileX:E,tileY:D}}_getHeightAtTileOffset(a,h,v){let S,E;for(let D=0;D<this.layers.length;++D){if(this.layers[D].layer.type!=="fill-extrusion")continue;const{bucket:O,tileID:N,verticalScale:W}=this.currentBuildingBuckets[D];if(!O)continue;const{tileX:Z,tileY:te}=this._mapCoordToOverlappingTile(a,h,v,N),J=O.getHeightAtTileCoord(Z,te);J&&J.height!==void 0&&(J.hidden?S=J.height:E=Math.max(J.height*W,E||0))}if(E!==void 0)return E;for(let D=0;D<this.layers.length;++D){const O=this.layers[D];if(O.layer.type!=="model"||!O.visible)continue;const{bucket:N,tileID:W}=this.currentBuildingBuckets[D];if(!N)continue;const{tileX:Z,tileY:te}=this._mapCoordToOverlappingTile(a,h,v,W),J=N.getHeightAtTileCoord(Z,te);if(J&&!J.hidden)return J.height===void 0&&S!==void 0?Math.min(J.maxHeight,S)*J.verticalScale:J.height?J.height*J.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function up(y,a){const h={};for(const v in y)v!=="ref"&&(h[v]=y[v]);return i.bu.forEach(v=>{v in a&&(h[v]=a[v])}),h}function Mm(y){y=y.slice();const a=Object.create(null);for(let h=0;h<y.length;h++)a[y[h].id]=y[h];for(let h=0;h<y.length;h++)"ref"in y[h]&&(y[h]=up(y[h],a[y[h].ref]));return y}const ci={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function ll(y,a,h){h.push({command:ci.addSource,args:[y,a[y]]})}function Ad(y,a,h){a.push({command:ci.removeSource,args:[y]}),h[y]=!0}function Am(y,a,h,v){Ad(y,h,v),ll(y,a,h)}function Ou(y,a,h){let v;for(v in y[h])if(y[h].hasOwnProperty(v)&&v!=="data"&&!i.bv(y[h][v],a[h][v]))return!1;for(v in a[h])if(a[h].hasOwnProperty(v)&&v!=="data"&&!i.bv(y[h][v],a[h][v]))return!1;return!0}function Lu(y,a,h,v,S,E){let D;for(D in a=a||{},y=y||{})y.hasOwnProperty(D)&&(i.bv(y[D],a[D])||h.push({command:E,args:[v,D,a[D],S]}));for(D in a)a.hasOwnProperty(D)&&!y.hasOwnProperty(D)&&(i.bv(y[D],a[D])||h.push({command:E,args:[v,D,a[D],S]}))}function Rc(y){return y.id}function $h(y,a){return y[a.id]=a,y}class Rm{constructor(a,h){this.reset(a,h)}reset(a,h){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=i.aD(a,0,1);let h=1,v=this._distances[h];const S=a*this.paddedLength+this.padding;for(;v<S&&h<this._distances.length;)v=this._distances[++h];const E=h-1,D=this._distances[E],O=v-D,N=O>0?(S-D)/O:0;return this.points[E].mult(1-N).add(this.points[h].mult(N))}}class dp{constructor(a,h,v){const S=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(h/v);for(let D=0;D<this.xCellCount*this.yCellCount;D++)S.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=h,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,h,v,S,E){this._forEachCell(h,v,S,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(E)}insertCircle(a,h,v,S){this._forEachCell(h-S,v-S,h+S,v+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(h),this.circles.push(v),this.circles.push(S)}_insertBoxCell(a,h,v,S,E,D){this.boxCells[E].push(D)}_insertCircleCell(a,h,v,S,E,D){this.circleCells[E].push(D)}_query(a,h,v,S,E,D){if(v<0||a>this.width||S<0||h>this.height)return!E&&[];const O=[];if(a<=0&&h<=0&&this.width<=v&&this.height<=S){if(E)return!0;for(let N=0;N<this.boxKeys.length;N++)O.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const W=this.circles[3*N],Z=this.circles[3*N+1],te=this.circles[3*N+2];O.push({key:this.circleKeys[N],x1:W-te,y1:Z-te,x2:W+te,y2:Z+te})}return D?O.filter(D):O}return this._forEachCell(a,h,v,S,this._queryCell,O,{hitTest:E,seenUids:{box:{},circle:{}}},D),E?O.length>0:O}_queryCircle(a,h,v,S,E){const D=a-v,O=a+v,N=h-v,W=h+v;if(O<0||D>this.width||W<0||N>this.height)return!S&&[];const Z=[];return this._forEachCell(D,N,O,W,this._queryCellCircle,Z,{hitTest:S,circle:{x:a,y:h,radius:v},seenUids:{box:{},circle:{}}},E),S?Z.length>0:Z}query(a,h,v,S,E){return this._query(a,h,v,S,!1,E)}hitTest(a,h,v,S,E){return this._query(a,h,v,S,!0,E)}hitTestCircle(a,h,v,S){return this._queryCircle(a,h,v,!0,S)}_queryCell(a,h,v,S,E,D,O,N){const W=O.seenUids,Z=this.boxCells[E];if(Z!==null){const J=this.bboxes;for(const oe of Z)if(!W.box[oe]){W.box[oe]=!0;const ge=4*oe;if(a<=J[ge+2]&&h<=J[ge+3]&&v>=J[ge+0]&&S>=J[ge+1]&&(!N||N(this.boxKeys[oe]))){if(O.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[oe],x1:J[ge],y1:J[ge+1],x2:J[ge+2],y2:J[ge+3]})}}}const te=this.circleCells[E];if(te!==null){const J=this.circles;for(const oe of te)if(!W.circle[oe]){W.circle[oe]=!0;const ge=3*oe;if(this._circleAndRectCollide(J[ge],J[ge+1],J[ge+2],a,h,v,S)&&(!N||N(this.circleKeys[oe]))){if(O.hitTest)return D.push(!0),!0;{const pe=J[ge],ve=J[ge+1],me=J[ge+2];D.push({key:this.circleKeys[oe],x1:pe-me,y1:ve-me,x2:pe+me,y2:ve+me})}}}}}_queryCellCircle(a,h,v,S,E,D,O,N){const W=O.circle,Z=O.seenUids,te=this.boxCells[E];if(te!==null){const oe=this.bboxes;for(const ge of te)if(!Z.box[ge]){Z.box[ge]=!0;const pe=4*ge;if(this._circleAndRectCollide(W.x,W.y,W.radius,oe[pe+0],oe[pe+1],oe[pe+2],oe[pe+3])&&(!N||N(this.boxKeys[ge])))return D.push(!0),!0}}const J=this.circleCells[E];if(J!==null){const oe=this.circles;for(const ge of J)if(!Z.circle[ge]){Z.circle[ge]=!0;const pe=3*ge;if(this._circlesCollide(oe[pe],oe[pe+1],oe[pe+2],W.x,W.y,W.radius)&&(!N||N(this.circleKeys[ge])))return D.push(!0),!0}}}_forEachCell(a,h,v,S,E,D,O,N){const W=this._convertToXCellCoord(a),Z=this._convertToYCellCoord(h),te=this._convertToXCellCoord(v),J=this._convertToYCellCoord(S);for(let oe=W;oe<=te;oe++)for(let ge=Z;ge<=J;ge++)if(E.call(this,a,h,v,S,this.xCellCount*ge+oe,D,O,N))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,h,v,S,E,D){const O=S-a,N=E-h,W=v+D;return W*W>O*O+N*N}_circleAndRectCollide(a,h,v,S,E,D,O){const N=(D-S)/2,W=Math.abs(a-(S+N));if(W>N+v)return!1;const Z=(O-E)/2,te=Math.abs(h-(E+Z));if(te>Z+v)return!1;if(W<=N||te<=Z)return!0;const J=W-N,oe=te-Z;return J*J+oe*oe<=v*v}}const Rd={unknown:0,flipRequired:1,flipNotRequired:2},na=Math.tan(85*Math.PI/180);function Xl(y,a,h,v,S,E,D){const O=i.bz();if(h)if(E.name==="globe"){const N=i.bA(S,a);i.az(O,O,N)}else{const N=i.bB([],D);O[0]=N[0],O[1]=N[1],O[4]=N[2],O[5]=N[3],v||i.by(O,O,S.angle)}else i.az(O,S.labelPlaneMatrix,y);return O}function Uh(y,a,h,v,S,E,D){const O=Xl(y,a,h,v,S,E,D);return E.name==="globe"&&h||(O[2]=O[6]=O[10]=O[14]=0),O}function qh(y,a,h,v,S,E,D){if(h){if(E.name==="globe"){const O=Xl(y,a,h,v,S,E,D);return i.bi(O,O),i.az(O,y,O),O}{const O=i.bw(y),N=i.bx([]);return N[0]=D[0],N[1]=D[1],N[4]=D[2],N[5]=D[3],i.az(O,O,N),v||i.by(O,O,-S.angle),O}}return S.glCoordMatrix}function cl(y,a,h,v){const S=[y,a,h,1];h?i.aA(S,S,v):hx(S,S,v);const E=S[3];return S[0]/=E,S[1]/=E,S[2]/=E,S}function au(y,a){return Math.min(.5+y/a*.5,1.5)}function Dm(y,a){const h=y[0]/y[3],v=y[1]/y[3];return h>=-a[0]&&h<=a[0]&&v>=-a[1]&&v<=a[1]}function Hh(y,a,h,v,S,E,D,O,N,W){const Z=h.transform,te=v?y.textSizeData:y.iconSizeData,J=i.bH(te,h.transform.zoom),oe=Z.projection.name==="globe",ge=[256/h.width*2+1,256/h.height*2+1],pe=v?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;pe.clear();let ve=null;oe&&(ve=v?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const me=y.lineVertexArray,Re=v?y.text.placedSymbolArray:y.icon.placedSymbolArray,Be=h.transform.width/h.transform.height;let Ue,Ke=!1;for(let Ye=0;Ye<Re.length;Ye++){const Ge=Re.get(Ye),{numGlyphs:Ne,writingMode:Je}=Ge;if(Je!==i.bI.vertical||Ke||Ue===i.bI.horizontal||(Ke=!0),Ue=Je,(Ge.hidden||Je===i.bI.vertical)&&!Ke){bi(Ne,pe);continue}Ke=!1;const nt=new i.P(Ge.tileAnchorX,Ge.tileAnchorY);let{x:bt,y:mt,z:$t}=Z.projection.projectTilePoint(nt.x,nt.y,W.canonical);if(N){const[Vn,Gn,Fn]=N(nt);bt+=Vn,mt+=Gn,$t+=Fn}const jt=[bt,mt,$t,1];if(i.aA(jt,jt,a),!Dm(jt,ge)){bi(Ne,pe);continue}const an=jt[3],pt=au(h.transform.getCameraToCenterDistance(Z.projection),an),Tt=i.bJ(te,J,Ge),ut=D?Tt/pt:Tt*pt,Gt=cl(bt,mt,$t,S);if(Gt[3]<=0){bi(Ne,pe);continue}let Mt={};const Jt=i.al(y.layers[0].layout.get("text-max-angle")),qt=Math.cos(Jt),en=D?null:N,on=ul(Ge,ut,!1,O,a,S,E,y.glyphOffsetArray,me,pe,ve,Gt,nt,Mt,Be,en,Z.projection,W,D,qt);Ke=on.useVertical,en&&on.needsFlipping&&(Mt={}),(on.notEnoughRoom||Ke||on.needsFlipping&&ul(Ge,ut,!0,O,a,S,E,y.glyphOffsetArray,me,pe,ve,Gt,nt,Mt,Be,en,Z.projection,W,D,qt).notEnoughRoom)&&bi(Ne,pe)}v?(y.text.dynamicLayoutVertexBuffer.updateData(pe),ve&&y.text.globeExtVertexBuffer&&y.text.globeExtVertexBuffer.updateData(ve)):(y.icon.dynamicLayoutVertexBuffer.updateData(pe),ve&&y.icon.globeExtVertexBuffer&&y.icon.globeExtVertexBuffer.updateData(ve))}function Wh(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve){const{lineStartIndex:me,glyphStartIndex:Re,segment:Be}=O,Ue=Re+O.numGlyphs,Ke=me+O.lineLength,Ye=a.getoffsetX(Re),Ge=a.getoffsetX(Ue-1),Ne=Gh(y*Ye,h,v,S,E,D,Be,me,Ke,N,W,Z,te,J,!0,oe,ge,pe,ve);if(!Ne)return null;const Je=Gh(y*Ge,h,v,S,E,D,Be,me,Ke,N,W,Z,te,J,!0,oe,ge,pe,ve);return Je?{first:Ne,last:Je}:null}function Dd(y,a,h,v){return y===i.bI.horizontal&&Math.abs(v)>Math.abs(h)?{useVertical:!0}:y===i.bI.vertical?v>0?{needsFlipping:!0}:null:a!==Rd.unknown&&function(S,E){return S===0||Math.abs(E/S)>na}(h,v)?a===Rd.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function ul(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me,Re,Be){const Ue=a/24,Ke=y.lineOffsetX*Ue,Ye=y.lineOffsetY*Ue,{lineStartIndex:Ge,glyphStartIndex:Ne,numGlyphs:Je,segment:nt,writingMode:bt,flipState:mt}=y,$t=Ge+y.lineLength,jt=an=>{if(Z){const[Gt,Mt,Jt]=an.up,qt=W.length;i.bK(Z,qt+0,Gt,Mt,Jt),i.bK(Z,qt+1,Gt,Mt,Jt),i.bK(Z,qt+2,Gt,Mt,Jt),i.bK(Z,qt+3,Gt,Mt,Jt)}const[pt,Tt,ut]=an.point;i.bL(W,pt,Tt,ut,an.angle)};if(Je>1){const an=Wh(Ue,O,Ke,Ye,h,te,J,y,N,E,oe,pe,!1,ve,me,Re,Be);if(!an)return{notEnoughRoom:!0};if(v&&!h){let[pt,Tt,ut]=an.first.point,[Gt,Mt,Jt]=an.last.point;[pt,Tt]=cl(pt,Tt,ut,D),[Gt,Mt]=cl(Gt,Mt,Jt,D);const qt=Dd(bt,mt,(Gt-pt)*ge,Mt-Tt);if(y.flipState=qt&&qt.needsFlipping?Rd.flipRequired:Rd.flipNotRequired,qt)return qt}jt(an.first);for(let pt=Ne+1;pt<Ne+Je-1;pt++){const Tt=Gh(Ue*O.getoffsetX(pt),Ke,Ye,h,te,J,nt,Ge,$t,N,E,oe,pe,!1,!1,ve,me,Re,Be);if(!Tt)return W.length-=4*(pt-Ne),{notEnoughRoom:!0};jt(Tt)}jt(an.last)}else{if(v&&!h){const pt=cl(J.x,J.y,0,S),Tt=Ge+nt+1,ut=new i.P(N.getx(Tt),N.gety(Tt)),Gt=cl(ut.x,ut.y,0,S),Mt=Gt[3]>0?Gt:ay(J,ut,pt,1,S,void 0,ve,me.canonical),Jt=Dd(bt,mt,(Mt[0]-pt[0])*ge,Mt[1]-pt[1]);if(y.flipState=Jt&&Jt.needsFlipping?Rd.flipRequired:Rd.flipNotRequired,Jt)return Jt}const an=Gh(Ue*O.getoffsetX(Ne),Ke,Ye,h,te,J,nt,Ge,$t,N,E,oe,pe,!1,!1,ve,me,Re,Be);if(!an)return{notEnoughRoom:!0};jt(an)}return{}}function Vv(y,a,h,v,S){const{x:E,y:D,z:O}=v.projectTilePoint(y.x,y.y,a);if(!S)return cl(E,D,O,h);const[N,W,Z]=S(y);return cl(E+N,D+W,O+Z,h)}function ay(y,a,h,v,S,E,D,O){const N=Vv(y.sub(a)._unit()._add(y),O,S,D,E);return i.at(N,h,N),i.au(N,N),i.bF(N,h,N,v)}function Gh(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me,Re){const Be=v?y-a:y+a;let Ue=Be>0?1:-1,Ke=0;v&&(Ue*=-1,Ke=Math.PI),Ue<0&&(Ke+=Math.PI);let Ye=O+D+(Ue>0?0:1)|0,Ge=S,Ne=S,Je=0,nt=0;const bt=Math.abs(Be),mt=[],$t=[];let jt=E,an=jt,pt=i.bC([]);const Tt=()=>ay(an,jt,Ne,bt-Je+1,Z,J,pe,ve.canonical);for(;Je+nt<=bt;){if(Ye+=Ue,Ye<O||Ye>=N)return null;if(Ne=Ge,an=jt,mt.push(Ne),oe&&$t.push(an),jt=new i.P(W.getx(Ye),W.gety(Ye)),Ge=te[Ye],!Ge){const Fn=Vv(jt,ve.canonical,Z,pe,J);Ge=Fn[3]>0?te[Ye]=Fn:Tt()}Je+=nt;const Vn=i.at([],Ge,Ne),Gn=i.bD(Ne,Ge);if(h&&Gn>0&&nt>0&&i.bE(pt,Vn)/(nt*Gn)<Re)return null;nt=Gn,pt=Vn}ge&&J&&(te[Ye]&&(Ge=Tt(),nt=i.bD(Ne,Ge),pt=i.at([],Ge,Ne)),te[Ye]=Ge);const ut=(bt-Je)/nt,Gt=jt.sub(an)._mult(ut)._add(an),Mt=i.bF([],Ne,pt,ut);let Jt=[0,0,1],qt=pt[0],en=pt[1];if(me&&(Jt=pe.upVector(ve.canonical,Gt.x,Gt.y),Jt[0]!==0||Jt[1]!==0||Jt[2]!==1)){const Vn=[Jt[2],0,-Jt[0]],Gn=i.bG([],Jt,Vn);i.au(Vn,Vn),i.au(Gn,Gn),qt=i.bE(pt,Vn),en=i.bE(pt,Gn)}if(h){const Vn=i.bG([],Jt,pt);i.au(Vn,Vn),i.bF(Mt,Mt,Vn,h*Ue)}const on=Ke+Math.atan2(en,qt);return mt.push(Mt),oe&&$t.push(Gt),{point:Mt,angle:on,path:mt,tilePath:$t,up:Jt}}function bi(y,a){const h=a.length,v=h+4*y;a.resize(v),a.float32.fill(-1/0,4*h,4*v)}function hx(y,a,h){const v=a[0],S=a[1];return y[0]=h[0]*v+h[4]*S+h[12],y[1]=h[1]*v+h[5]*S+h[13],y[3]=h[3]*v+h[7]*S+h[15],y}const lr=100;class fx{constructor(a,h,v=new dp(a.width+200,a.height+200,25),S=new dp(a.width+200,a.height+200,25)){this.transform=a,this.grid=v,this.ignoredGrid=S,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+lr,this.screenBottomBoundary=a.height+lr,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=h}placeCollisionBox(a,h,v,S,E,D,O,N){let W=v.projectedAnchorX,Z=v.projectedAnchorY,te=v.projectedAnchorZ;const J=v.elevation,oe=v.tileID,ge=a.getProjection();if(J&&oe){const[Ye,Ge,Ne]=ge.upVector(oe.canonical,v.tileAnchorX,v.tileAnchorY),Je=ge.upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;W+=Ye*J*Je,Z+=Ge*J*Je,te+=Ne*J*Je}const pe=this.projectAndGetPerspectiveRatio(O,W,Z,te,v.tileID,ge.name==="globe"||!!J||this.transform.pitch>0,ge),ve=D*pe.perspectiveRatio,me=(v.x1*h+S.x-v.padding)*ve+pe.point.x,Re=(v.y1*h+S.y-v.padding)*ve+pe.point.y,Be=(v.x2*h+S.x+v.padding)*ve+pe.point.x,Ue=(v.y2*h+S.y+v.padding)*ve+pe.point.y,Ke=pe.perspectiveRatio<=.55||pe.occluded;return!this.isInsideGrid(me,Re,Be,Ue)||!E&&this.grid.hitTest(me,Re,Be,Ue,N)||Ke?{box:[],offscreen:!1,occluded:pe.occluded}:{box:[me,Re,Be,Ue],offscreen:this.isOffscreen(me,Re,Be,Ue),occluded:!1}}placeCollisionCircles(a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe){const ve=[],me=this.transform.elevation,Re=a.getProjection(),Be=me?me.getAtTileOffsetFunc(pe,this.transform.center.lat,this.transform.worldSize,Re):null,Ue=new i.P(v.tileAnchorX,v.tileAnchorY);let{x:Ke,y:Ye,z:Ge}=Re.projectTilePoint(Ue.x,Ue.y,pe.canonical);if(Be){const[Jt,qt,en]=Be(Ue);Ke+=Jt,Ye+=qt,Ge+=en}const Ne=Re.name==="globe",Je=this.projectAndGetPerspectiveRatio(O,Ke,Ye,Ge,pe,Ne||!!me||this.transform.pitch>0,Re),{perspectiveRatio:nt}=Je,bt=(te?D/nt:D*nt)/i.bO,mt=cl(Ke,Ye,Ge,N),$t=v.lineOffsetX*bt,jt=v.lineOffsetY*bt,an=i.al(a.layers[0].layout.get("text-max-angle")),pt=Math.cos(an),Tt=Je.signedDistanceFromCamera>0?Wh(bt,E,$t,jt,!1,mt,Ue,v,S,N,{},me&&!te?Be:null,te&&!!me,Re,pe,te,pt):null;let ut=!1,Gt=!1,Mt=!0;if(Tt&&!Je.occluded){const Jt=.5*oe*nt+ge,qt=new i.P(-100,-100),en=new i.P(this.screenRightBoundary,this.screenBottomBoundary),on=new Rm,{first:Vn,last:Gn}=Tt,Fn=Vn.path.length;let Qn=[];for(let Mr=Fn-1;Mr>=1;Mr--)Qn.push(Vn.path[Mr]);for(let Mr=1;Mr<Gn.path.length;Mr++)Qn.push(Gn.path[Mr]);const Wn=2.5*Jt;W&&(Qn=Qn.map(([Mr,ur,Lr],_r)=>(Be&&!Ne&&(Lr=Be(_r<Fn-1?Vn.tilePath[Fn-1-_r]:Gn.tilePath[_r-Fn+2])[2]),cl(Mr,ur,Lr,W))),Qn.some(Mr=>Mr[3]<=0)&&(Qn=[]));let hr=[];if(Qn.length>0){let Mr=1/0,ur=-1/0,Lr=1/0,_r=-1/0;for(const ar of Qn)Mr=Math.min(Mr,ar[0]),Lr=Math.min(Lr,ar[1]),ur=Math.max(ur,ar[0]),_r=Math.max(_r,ar[1]);ur>=qt.x&&Mr<=en.x&&_r>=qt.y&&Lr<=en.y&&(hr=[Qn.map(ar=>new i.P(ar[0],ar[1]))],(Mr<qt.x||ur>en.x||Lr<qt.y||_r>en.y)&&(hr=i.bM(hr,qt.x,qt.y,en.x,en.y)))}for(const Mr of hr){on.reset(Mr,.25*Jt);let ur=0;ur=on.length<=.5*Jt?1:Math.ceil(on.paddedLength/Wn)+1;for(let Lr=0;Lr<ur;Lr++){const _r=Lr/Math.max(ur-1,1),ar=on.lerp(_r),Zr=ar.x+lr,Ei=ar.y+lr;ve.push(Zr,Ei,Jt,0);const Ar=Zr-Jt,Kr=Ei-Jt,di=Zr+Jt,pi=Ei+Jt;if(Mt=Mt&&this.isOffscreen(Ar,Kr,di,pi),Gt=Gt||this.isInsideGrid(Ar,Kr,di,pi),!h&&this.grid.hitTestCircle(Zr,Ei,Jt,J)&&(ut=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:ut,occluded:!1}}}}return{circles:!Z&&ut||!Gt?[]:ve,offscreen:Mt,collisionDetected:ut,occluded:Je.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let v=1/0,S=1/0,E=-1/0,D=-1/0;for(const Z of a){const te=new i.P(Z.x+lr,Z.y+lr);v=Math.min(v,te.x),S=Math.min(S,te.y),E=Math.max(E,te.x),D=Math.max(D,te.y),h.push(te)}const O=this.grid.query(v,S,E,D).concat(this.ignoredGrid.query(v,S,E,D)),N={},W={};for(const Z of O){const te=Z.key;if(N[te.bucketInstanceId]===void 0&&(N[te.bucketInstanceId]={}),N[te.bucketInstanceId][te.featureIndex])continue;const J=[new i.P(Z.x1,Z.y1),new i.P(Z.x2,Z.y1),new i.P(Z.x2,Z.y2),new i.P(Z.x1,Z.y2)];i.bN(h,J)&&(N[te.bucketInstanceId][te.featureIndex]=!0,W[te.bucketInstanceId]===void 0&&(W[te.bucketInstanceId]=[]),W[te.bucketInstanceId].push(te.featureIndex))}return W}insertCollisionBox(a,h,v,S,E){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:E},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,h,v,S,E){const D=h?this.ignoredGrid:this.grid,O={bucketInstanceId:v,featureIndex:S,collisionGroupID:E};for(let N=0;N<a.length;N+=4)D.insertCircle(O,a[N],a[N+1],a[N+2])}projectAndGetPerspectiveRatio(a,h,v,S,E,D,O){const N=[h,v,S,1];let W=!1;S||this.transform.pitch>0?(i.aA(N,N,a),this.fogState&&E&&O.name!=="globe"&&(W=function(J,oe,ge,pe,ve,me){const Re=me.calculateFogTileMatrix(ve),Be=[oe,ge,pe];return i.ad(Be,Be,Re),wn(J,i.ae(Be),me.pitch,me._fov)}(this.fogState,h,v,S,E.toUnwrapped(),this.transform)>.9)):hx(N,N,a);const Z=N[3];return{point:new i.P((N[0]/Z+1)/2*this.transform.width+lr,(-N[1]/Z+1)/2*this.transform.height+lr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/Z*.5,1.5),signedDistanceFromCamera:Z,occluded:D&&N[2]>Z||W}}isOffscreen(a,h,v,S){return v<lr||a>=this.screenRightBoundary||S<lr||h>this.screenBottomBoundary}isInsideGrid(a,h,v,S){return v>=0&&a<this.gridRightBoundary&&S>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const a=i.bx([]);return i.bo(a,a,[-100,-100,0]),a}}function ly(y,a,h){const v=a.createTileMatrix(y,y.worldSize,h.toUnwrapped());return i.az(new Float32Array(16),y.projMatrix,v)}function Pm(y,a,h){if(a.projection.name===h.projection.name)return y.projMatrix;const v=h.clone();return v.setProjection(a.projection),ly(v,a.getProjection(),y)}function Im(y,a,h){return a.name===h.projection.name?y.projMatrix:ly(h,a,y)}class Zl{constructor(a,h,v,S){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?h:-h))):S&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Yh{constructor(a,h,v,S,E,D=!1){this.text=new Zl(a?a.text:null,h,v,E),this.icon=new Zl(a?a.icon:null,h,S,E),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pd{constructor(a,h,v,S=!1){this.text=a,this.icon=h,this.skipFade=v,this.clipped=S}}class tr{constructor(){this.invProjMatrix=i.bz(),this.viewportMatrix=i.bz(),this.circles=[]}}class $i{constructor(a,h,v,S,E){this.bucketInstanceId=a,this.featureIndex=h,this.sourceLayerIndex=v,this.bucketIndex=S,this.tileID=E}}class Ri{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const h=++this.maxGroupID;this.collisionGroups[a]={ID:h,predicate:v=>v.collisionGroupID===h}}return this.collisionGroups[a]}}function Ha(y,a,h,v,S){const{horizontalAlign:E,verticalAlign:D}=i.bV(y),O=-(E-.5)*a,N=-(D-.5)*h,W=i.bU(y,v);return new i.P(O+W[0]*S,N+W[1]*S)}function zu(y,a,h,v,S){const E=new i.P(y,a);return h&&E._rotate(v?S:-S),E}class Ai{constructor(a,h,v,S,E,D){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new fx(this.transform,E),this.buildingIndex=D,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Ri(v),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,h,v,S,E=1){const D=v.getBucket(h),O=v.latestFeatureIndex;if(!D||!O||h.fqid!==D.layerIds[0])return;const N=D.layers[0].layout,W=D.layers[0].paint,Z=v.collisionBoxArray,te=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),J=v.tileSize/i.aj,oe=v.tileID.toUnwrapped();this.transform.setProjection(D.projection);const ge=(pe=v.tileID,ve=D.getProjection(),me=this.transform,ve.name===this.projection?me.calculateProjMatrix(pe.toUnwrapped()):ly(me,ve,pe));var pe,ve,me;const Re=N.get("text-pitch-alignment")==="map",Be=N.get("text-rotation-alignment")==="map";h.compileFilter(h.options);const Ue=h.dynamicFilter(),Ke=h.dynamicFilterNeedsFeature(),Ye=this.transform.calculatePixelsToTileUnitsMatrix(v),Ge=Uh(ge,v.tileID.canonical,Re,Be,this.transform,D.getProjection(),Ye);let Ne=null;if(Re){const Tt=qh(ge,v.tileID.canonical,Re,Be,this.transform,D.getProjection(),Ye);Ne=i.az([],this.transform.labelPlaneMatrix,Tt)}let Je=null;Ue&&v.latestFeatureIndex&&(Je={unwrappedTileID:oe,dynamicFilter:Ue,dynamicFilterNeedsFeature:Ke}),this.retainedQueryData[D.bucketInstanceId]=new $i(D.bucketInstanceId,O,D.sourceLayerIndex,D.index,v.tileID);const[nt,bt]=D.layers[0].layout.get("text-size-scale-range"),mt=i.aD(E,nt,bt),[$t,jt]=N.get("icon-size-scale-range"),an=i.aD(E,$t,jt),pt={bucket:D,layout:N,paint:W,posMatrix:ge,textLabelPlaneMatrix:Ge,labelToScreenMatrix:Ne,clippingData:Je,scale:te,textPixelRatio:J,holdingForFade:v.holdingForFade(),collisionBoxArray:Z,partiallyEvaluatedTextSize:i.bH(D.textSizeData,this.transform.zoom,mt),partiallyEvaluatedIconSize:i.bH(D.iconSizeData,this.transform.zoom,an),collisionGroup:this.collisionGroups.get(D.sourceID),latestFeatureIndex:v.latestFeatureIndex};if(S)for(const Tt of D.sortKeyRanges){const{sortKey:ut,symbolInstanceStart:Gt,symbolInstanceEnd:Mt}=Tt;a.push({sortKey:ut,symbolInstanceStart:Gt,symbolInstanceEnd:Mt,parameters:pt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:pt})}attemptAnchorPlacement(a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me,Re){const{textOffset0:Be,textOffset1:Ue,crossTileID:Ke}=J,Ye=[Be,Ue],Ge=Ha(a,v,S,Ye,E),Ne=this.collisionIndex.placeCollisionBox(ge,E,h,zu(Ge.x,Ge.y,D,O,this.transform.angle),te,N,W,Z.predicate);if(ve){const Je=ge.getSymbolInstanceIconSize(Re,this.transform.zoom,J.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ge,Je,ve,zu(Ge.x,Ge.y,D,O,this.transform.angle),te,N,W,Z.predicate).box.length===0)return}if(Ne.box.length>0){let Je;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ke]&&this.prevPlacement.placements[Ke]&&this.prevPlacement.placements[Ke].text&&(Je=this.prevPlacement.variableOffsets[Ke].anchor),this.variableOffsets[Ke]={textOffset:Ye,width:v,height:S,anchor:a,textScale:E,prevAnchor:Je},this.markUsedJustification(ge,a,J,pe),ge.allowVerticalPlacement&&(this.markUsedOrientation(ge,pe,J),this.placedOrientations[Ke]=pe),{shift:Ge,placedGlyphBoxes:Ne}}}placeLayerBucketPart(a,h,v,S,E=1){const{bucket:D,layout:O,paint:N,posMatrix:W,textLabelPlaneMatrix:Z,labelToScreenMatrix:te,clippingData:J,textPixelRatio:oe,holdingForFade:ge,collisionBoxArray:pe,partiallyEvaluatedTextSize:ve,partiallyEvaluatedIconSize:me,collisionGroup:Re,latestFeatureIndex:Be}=a.parameters,Ue=O.get("text-optional"),Ke=O.get("icon-optional"),Ye=O.get("text-allow-overlap"),Ge=O.get("icon-allow-overlap"),Ne=O.get("text-rotation-alignment")==="map",Je=O.get("text-pitch-alignment")==="map",nt=N.get("symbol-z-offset"),bt=O.get("symbol-elevation-reference")==="sea",[mt,$t]=O.get("text-size-scale-range"),[jt,an]=O.get("icon-size-scale-range"),pt=i.aD(E,mt,$t),Tt=i.aD(E,jt,an);this.transform.setProjection(D.projection);let ut=Ye&&(Ge||!D.hasIconData()||Ke),Gt=Ge&&(Ye||!D.hasTextData()||Ue);const Mt=!nt.isConstant();!D.collisionArrays&&pe&&D.deserializeCollisionBoxes(pe),v&&S&&D.updateCollisionDebugBuffers(this.transform.zoom,pe,pt,Tt);const Jt=(qt,en,on)=>{const{crossTileID:Vn,numVerticalGlyphVertices:Gn}=qt;let Fn=null;if(J&&J.dynamicFilterNeedsFeature||Mt){const ai=this.retainedQueryData[D.bucketInstanceId];Fn=Be.loadFeature({featureIndex:qt.featureIndex,bucketIndex:ai.bucketIndex,sourceLayerIndex:ai.sourceLayerIndex,layoutVertexArrayOffset:0})}if(J&&!(0,J.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Fn,this.retainedQueryData[D.bucketInstanceId].tileID.canonical,new i.P(qt.tileAnchorX,qt.tileAnchorY),this.transform.calculateDistanceTileData(J.unwrappedTileID)))return this.placements[Vn]=new Pd(!1,!1,!1,!0),void h.add(Vn);const Qn=nt.evaluate(Fn,{});if(h.has(Vn))return;if(ge)return void(this.placements[Vn]=new Pd(!1,!1,!1));let Wn=!1,hr=!1,Mr=!0,ur=!1,Lr=!1,_r=null,ar={box:null,offscreen:null,occluded:null},Zr={box:null},Ei=null,Ar=null,Kr=null,di=0,pi=0,Ci=0;on.textFeatureIndex?di=on.textFeatureIndex:qt.useRuntimeCollisionCircles&&(di=qt.featureIndex),on.verticalTextFeatureIndex&&(pi=on.verticalTextFeatureIndex);const Ji=ai=>{ai.tileID=this.retainedQueryData[D.bucketInstanceId].tileID;const gi=this.transform.elevation;ai.elevation=bt?Qn:Qn+(gi?gi.getAtTileOffset(ai.tileID,ai.tileAnchorX,ai.tileAnchorY):0),ai.elevation+=qt.zOffset},Ao=on.textBox;if(Ao){Ji(Ao);const ai=yi=>{let to=i.bI.horizontal;if(D.allowVerticalPlacement&&!yi&&this.prevPlacement){const us=this.prevPlacement.placedOrientations[Vn];us&&(this.placedOrientations[Vn]=us,to=us,this.markUsedOrientation(D,to,qt))}return to},gi=(yi,to)=>{if(D.allowVerticalPlacement&&Gn>0&&on.verticalTextBox){for(const us of D.writingModes)if(us===i.bI.vertical?(ar=to(),Zr=ar):ar=yi(),ar&&ar.box&&ar.box.length)break}else ar=yi()};if(O.get("text-variable-anchor")){let yi=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Vn]){const qi=this.prevPlacement.variableOffsets[Vn];yi.indexOf(qi.anchor)>0&&(yi=yi.filter(Wo=>Wo!==qi.anchor),yi.unshift(qi.anchor))}const to=(qi,Wo,zi)=>{const Qo=D.getSymbolInstanceTextSize(ve,qt,this.transform.zoom,en),Fa=(qi.x2-qi.x1)*Qo+2*qi.padding,_l=(qi.y2-qi.y1)*Qo+2*qi.padding,Ba=qt.hasIconTextFit&&!Ge?Wo:null;Ba&&Ji(Ba);let xl={box:[],offscreen:!1,occluded:!1};const Wc=Ye?2*yi.length:yi.length;for(let bl=0;bl<Wc;++bl){const jl=this.attemptAnchorPlacement(yi[bl%yi.length],qi,Fa,_l,Qo,Ne,Je,oe,W,Re,bl>=yi.length,qt,en,D,zi,Ba,ve,me);if(jl&&(xl=jl.placedGlyphBoxes,xl&&xl.box&&xl.box.length)){Wn=!0,_r=jl.shift;break}}return xl};gi(()=>to(Ao,on.iconBox,i.bI.horizontal),()=>{const qi=on.verticalTextBox;return qi&&Ji(qi),D.allowVerticalPlacement&&!(ar&&ar.box&&ar.box.length)&&Gn>0&&qi?to(qi,on.verticalIconBox,i.bI.vertical):{box:null,offscreen:null,occluded:null}}),ar&&(Wn=ar.box,Mr=ar.offscreen,ur=ar.occluded);const us=ai(!(!ar||!ar.box));if(!Wn&&this.prevPlacement){const qi=this.prevPlacement.variableOffsets[Vn];qi&&(this.variableOffsets[Vn]=qi,this.markUsedJustification(D,qi.anchor,qt,us))}}else{const yi=(to,us)=>{const qi=D.getSymbolInstanceTextSize(ve,qt,this.transform.zoom,en,E),Wo=this.collisionIndex.placeCollisionBox(D,qi,to,new i.P(0,0),Ye,oe,W,Re.predicate);return Wo&&Wo.box&&Wo.box.length&&(this.markUsedOrientation(D,us,qt),this.placedOrientations[Vn]=us),Wo};gi(()=>yi(Ao,i.bI.horizontal),()=>{const to=on.verticalTextBox;return D.allowVerticalPlacement&&Gn>0&&to?(Ji(to),yi(to,i.bI.vertical)):{box:null,offscreen:null,occluded:null}}),ai(!!(ar&&ar.box&&ar.box.length))}}if(Ei=ar,Wn=Ei&&Ei.box&&Ei.box.length>0,Mr=Ei&&Ei.offscreen,ur=Ei&&Ei.occluded,qt.useRuntimeCollisionCircles){const ai=D.text.placedSymbolArray.get(qt.centerJustifiedTextSymbolIndex>=0?qt.centerJustifiedTextSymbolIndex:qt.verticalPlacedTextSymbolIndex),gi=i.bJ(D.textSizeData,ve,ai),yi=O.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(D,Ye,ai,D.lineVertexArray,D.glyphOffsetArray,gi,W,Z,te,v,Je,Re.predicate,qt.collisionCircleDiameter*gi/i.bO,yi,this.retainedQueryData[D.bucketInstanceId].tileID),Wn=Ye||Ar.circles.length>0&&!Ar.collisionDetected,Mr=Mr&&Ar.offscreen,ur=Ar.occluded}if(on.iconFeatureIndex&&(Ci=on.iconFeatureIndex),on.iconBox){const ai=gi=>{Ji(gi);const yi=qt.hasIconTextFit&&_r?zu(_r.x,_r.y,Ne,Je,this.transform.angle):new i.P(0,0),to=D.getSymbolInstanceIconSize(me,this.transform.zoom,qt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(D,to,gi,yi,Ge,oe,W,Re.predicate)};Zr&&Zr.box&&Zr.box.length&&on.verticalIconBox?(Kr=ai(on.verticalIconBox),hr=Kr.box.length>0):(Kr=ai(on.iconBox),hr=Kr.box.length>0),Mr=Mr&&Kr.offscreen,Lr=Kr.occluded}const eo=Ue||qt.numHorizontalGlyphVertices===0&&Gn===0,Tr=Ke||qt.numIconVertices===0;if(eo||Tr?Tr?eo||(hr=hr&&Wn):Wn=hr&&Wn:hr=Wn=hr&&Wn,Wn&&Ei&&Ei.box&&this.collisionIndex.insertCollisionBox(Ei.box,O.get("text-ignore-placement"),D.bucketInstanceId,Zr&&Zr.box&&pi?pi:di,Re.ID),hr&&Kr&&this.collisionIndex.insertCollisionBox(Kr.box,O.get("icon-ignore-placement"),D.bucketInstanceId,Ci,Re.ID),Ar&&(Wn&&this.collisionIndex.insertCollisionCircles(Ar.circles,O.get("text-ignore-placement"),D.bucketInstanceId,di,Re.ID),v)){const ai=D.bucketInstanceId;let gi=this.collisionCircleArrays[ai];gi===void 0&&(gi=this.collisionCircleArrays[ai]=new tr);for(let yi=0;yi<Ar.circles.length;yi+=4)gi.circles.push(Ar.circles[yi+0]),gi.circles.push(Ar.circles[yi+1]),gi.circles.push(Ar.circles[yi+2]),gi.circles.push(Ar.collisionDetected?1:0)}const Ui=D.projection.name!=="globe";ut=ut&&(Ui||!ur),Gt=Gt&&(Ui||!Lr),this.placements[Vn]=new Pd(Wn||ut,hr||Gt,Mr||D.justReloaded),h.add(Vn)};if(D.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(D,this.retainedQueryData[D.bucketInstanceId].tileID),D.elevationType==="road"&&D.updateRoadElevation(),D.updateZOffset(),D.sortFeaturesByY){const qt=D.getSortedSymbolIndexes(this.transform.angle);for(let en=qt.length-1;en>=0;--en){const on=qt[en];Jt(D.symbolInstances.get(on),on,D.collisionArrays[on])}D.hasAnyZOffset&&i.w(`${D.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(D.hasAnyZOffset){const qt=D.getSortedIndexesByZOffset();for(let en=0;en<qt.length;++en){const on=qt[en];Jt(D.symbolInstances.get(on),on,D.collisionArrays[on])}}else for(let qt=a.symbolInstanceStart;qt<a.symbolInstanceEnd;qt++)Jt(D.symbolInstances.get(qt),qt,D.collisionArrays[qt]);if(v&&D.bucketInstanceId in this.collisionCircleArrays){const qt=this.collisionCircleArrays[D.bucketInstanceId];i.bi(qt.invProjMatrix,W),qt.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(a,h,v,S){const{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:N,crossTileID:W}=v,Z=i.bT(h),te=S===i.bI.vertical?N:Z==="left"?E:Z==="center"?D:Z==="right"?O:-1;E>=0&&(a.text.placedSymbolArray.get(E).crossTileID=te>=0&&E!==te?0:W),D>=0&&(a.text.placedSymbolArray.get(D).crossTileID=te>=0&&D!==te?0:W),O>=0&&(a.text.placedSymbolArray.get(O).crossTileID=te>=0&&O!==te?0:W),N>=0&&(a.text.placedSymbolArray.get(N).crossTileID=te>=0&&N!==te?0:W)}markUsedOrientation(a,h,v){const S=h===i.bI.horizontal||h===i.bI.horizontalOnly?h:0,E=h===i.bI.vertical?h:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:N,verticalPlacedTextSymbolIndex:W}=v,Z=a.text.placedSymbolArray;D>=0&&(Z.get(D).placedOrientation=S),O>=0&&(Z.get(O).placedOrientation=S),N>=0&&(Z.get(N).placedOrientation=S),W>=0&&(Z.get(W).placedOrientation=E)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let v=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const S=h?h.symbolFadeChange(a):1,E=h?h.opacities:{},D=h?h.variableOffsets:{},O=h?h.placedOrientations:{};for(const N in this.placements){const W=this.placements[N],Z=E[N];Z?(this.opacities[N]=new Yh(Z,S,W.text,W.icon,null,W.clipped),v=v||W.text!==Z.text.placed||W.icon!==Z.icon.placed):(this.opacities[N]=new Yh(null,S,W.text,W.icon,W.skipFade,W.clipped),v=v||W.text||W.icon)}for(const N in E){const W=E[N];if(!this.opacities[N]){const Z=new Yh(W,S,!1,!1);Z.isHidden()||(this.opacities[N]=Z,v=v||W.text.placed||W.icon.placed)}}for(const N in D)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=D[N]);for(const N in O)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=O[N]);v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:a)}updateLayerOpacities(a,h,v,S){const E=new Set;for(const D of h){const O=D.getBucket(a);O&&D.latestFeatureIndex&&a.fqid===O.layerIds[0]&&(this.updateBucketOpacities(O,E,D,D.collisionBoxArray,v,S,D.tileID,a.scope),O.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(O,D.tileID),O.elevationType==="road"&&O.updateRoadElevation(),O.updateZOffset())}}updateBucketOpacities(a,h,v,S,E,D,O,N){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const W=a.layers[0].layout,Z=a.layers[0].paint,te=!!a.layers[0].dynamicFilter(),J=new Yh(null,0,!1,!1,!0),oe=W.get("text-allow-overlap"),ge=W.get("icon-allow-overlap"),pe=W.get("text-variable-anchor"),ve=W.get("text-rotation-alignment")==="map",me=W.get("text-pitch-alignment")==="map",Re=Z.get("symbol-z-offset"),Be=W.get("symbol-elevation-reference")==="sea",Ue=!Re.isConstant(),Ke=new Yh(null,0,oe&&(ge||!a.hasIconData()||W.get("icon-optional")),ge&&(oe||!a.hasTextData()||W.get("text-optional")),!0);!a.collisionArrays&&S&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(S);const Ye=(Ne,Je,nt)=>{for(let bt=0;bt<Je/4;bt++)Ne.opacityVertexArray.emplaceBack(nt)};let Ge=0;D&&a.updateReplacement(O,D);for(let Ne=0;Ne<a.symbolInstances.length;Ne++){const Je=a.symbolInstances.get(Ne),{numHorizontalGlyphVertices:nt,numVerticalGlyphVertices:bt,crossTileID:mt,numIconVertices:$t,tileAnchorX:jt,tileAnchorY:an}=Je;let pt=null;const Tt=this.retainedQueryData[a.bucketInstanceId];Ue&&Je&&Tt&&(pt=v.latestFeatureIndex.loadFeature({featureIndex:Je.featureIndex,bucketIndex:Tt.bucketIndex,sourceLayerIndex:Tt.sourceLayerIndex,layoutVertexArrayOffset:0}));const ut=Re.evaluate(pt,{}),Gt=h.has(mt);let Mt=this.opacities[mt];Gt?Mt=J:Mt||(Mt=Ke,this.opacities[mt]=Mt),h.add(mt);const Jt=nt>0||bt>0,qt=$t>0,en=this.placedOrientations[mt],on=en===i.bI.vertical,Vn=en===i.bI.horizontal||en===i.bI.horizontalOnly;!Jt&&!qt||Mt.isHidden()||Ge++;let Gn=!1;if((Jt||qt)&&D)for(const Fn of a.activeReplacements){if(i.bP(Fn,E,i.bQ.Symbol,N)||Fn.min.x>jt||jt>Fn.max.x||Fn.min.y>an||an>Fn.max.y)continue;const Qn=i.bR(jt,an,O.canonical,Fn.footprintTileId.canonical);if(Gn=i.bS(Qn,Fn.footprint),Gn)break}if(Jt){const Fn=Gn?Kl:Id(Mt.text);Ye(a.text,nt,on?Kl:Fn),Ye(a.text,bt,Vn?Kl:Fn);const Qn=Mt.text.isHidden(),{leftJustifiedTextSymbolIndex:Wn,centerJustifiedTextSymbolIndex:hr,rightJustifiedTextSymbolIndex:Mr,verticalPlacedTextSymbolIndex:ur}=Je,Lr=a.text.placedSymbolArray,_r=Qn||on?1:0;Wn>=0&&(Lr.get(Wn).hidden=_r),hr>=0&&(Lr.get(hr).hidden=_r),Mr>=0&&(Lr.get(Mr).hidden=_r),ur>=0&&(Lr.get(ur).hidden=Qn||Vn?1:0);const ar=this.variableOffsets[mt];ar&&this.markUsedJustification(a,ar.anchor,Je,en);const Zr=this.placedOrientations[mt];Zr&&(this.markUsedJustification(a,"left",Je,Zr),this.markUsedOrientation(a,Zr,Je))}if(qt){const Fn=Gn?Kl:Id(Mt.icon),{placedIconSymbolIndex:Qn,verticalPlacedIconSymbolIndex:Wn}=Je,hr=a.icon.placedSymbolArray,Mr=Mt.icon.isHidden()?1:0;Qn>=0&&(Ye(a.icon,$t,on?Kl:Fn),hr.get(Qn).hidden=Mr),Wn>=0&&(Ye(a.icon,Je.numVerticalIconVertices,Vn?Kl:Fn),hr.get(Wn).hidden=Mr)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Fn=a.collisionArrays[Ne];if(Fn){let Qn=new i.P(0,0),Wn=!0;if(Fn.textBox||Fn.verticalTextBox){if(pe){const Mr=this.variableOffsets[mt];Mr?(Qn=Ha(Mr.anchor,Mr.width,Mr.height,Mr.textOffset,Mr.textScale),ve&&Qn._rotate(me?this.transform.angle:-this.transform.angle)):Wn=!1}te&&(Wn=!Mt.clipped),Fn.textBox&&Xh(a.textCollisionBox.collisionVertexArray,Mt.text.placed,!Wn||on,ut,Be,Qn.x,Qn.y),Fn.verticalTextBox&&Xh(a.textCollisionBox.collisionVertexArray,Mt.text.placed,!Wn||Vn,ut,Be,Qn.x,Qn.y)}const hr=Wn&&!!(!Vn&&Fn.verticalIconBox);Fn.iconBox&&Xh(a.iconCollisionBox.collisionVertexArray,Mt.icon.placed,hr,ut,Be,Je.hasIconTextFit?Qn.x:0,Je.hasIconTextFit?Qn.y:0),Fn.verticalIconBox&&Xh(a.iconCollisionBox.collisionVertexArray,Mt.icon.placed,!hr,ut,Be,Je.hasIconTextFit?Qn.x:0,Je.hasIconTextFit?Qn.y:0)}}}if(a.fullyClipped=Ge===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Ne.invProjMatrix,a.placementViewportMatrix=Ne.viewportMatrix,a.collisionCircleArray=Ne.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,h){const v=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function Xh(y,a,h,v,S,E,D){y.emplaceBack(a?1:0,h?1:0,E||0,D||0,v,S?1:0),y.emplaceBack(a?1:0,h?1:0,E||0,D||0,v,S?1:0),y.emplaceBack(a?1:0,h?1:0,E||0,D||0,v,S?1:0),y.emplaceBack(a?1:0,h?1:0,E||0,D||0,v,S?1:0)}const km=Math.pow(2,25),Om=Math.pow(2,24),Pa=Math.pow(2,17),ls=Math.pow(2,16),W1=Math.pow(2,9),Lm=Math.pow(2,8),$v=Math.pow(2,1);function Id(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const a=y.placed?1:0,h=Math.floor(127*y.opacity);return h*km+a*Om+h*Pa+a*ls+h*W1+a*Lm+h*$v+a}const Kl=0;class cy{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,h,v,S,E,D){const O=this._bucketParts;for(;this._currentTileIndex<a.length;)if(h.getBucketParts(O,S,a[this._currentTileIndex],this._sortAcrossTiles,D),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((N,W)=>N.sortKey-W.sortKey));this._currentPartIndex<O.length;){const N=O[this._currentPartIndex];if(h.placeLayerBucketPart(N,this._seenCrossTileIDs,v,N.symbolInstanceStart===0,D),this._currentPartIndex++,E())return!0}return!1}}class ga{constructor(a,h,v,S,E,D,O,N,W){this.placement=new Ai(a,E,D,O,N,W),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(a,h,v,S,E){const D=i.q.now(),O=()=>{const N=i.q.now()-D;return!this._forceFullPlacement&&N>2};for(;this._currentPlacementIndex>=0;){const N=h[a[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=W)&&(!N.maxzoom||N.maxzoom>W)){const Z=N,te=Z.layout.get("symbol-z-elevate"),J=Z.layout.get("symbol-sort-key").constantOr(1)!==void 0,oe=Z.layout.get("symbol-z-order"),ge=oe==="viewport-y"||oe==="auto"&&!(oe!=="viewport-y"&&J),pe=Z.layout.get("text-allow-overlap")||Z.layout.get("icon-allow-overlap")||Z.layout.get("text-ignore-placement")||Z.layout.get("icon-ignore-placement"),ve=ge&&pe,me=this._inProgressLayer=this._inProgressLayer||new cy(Z),Re=i.C(N.source,N.scope);if(me.continuePlacement(te||ve?S[Re]:v[Re],this.placement,this._showCollisionBoxes,N,O,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Ql=512/i.aj/2;class Ia{constructor(a,h,v){this.tileID=a,this.bucketInstanceId=v,this.index=new i.bW(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=a.canonical.x*i.aj,E=a.canonical.y*i.aj;for(let D=0;D<h.length;D++){const{key:O,crossTileID:N,tileAnchorX:W,tileAnchorY:Z}=h.get(D),te=Math.floor((S+W)*Ql),J=Math.floor((E+Z)*Ql);this.index.add(te,J),this.keys.push(O),this.crossTileIDs.push(N)}this.index.finish()}findMatches(a,h,v){const S=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),E=Ql/Math.pow(2,h.canonical.z-this.tileID.canonical.z),D=h.canonical.x*i.aj,O=h.canonical.y*i.aj;for(let N=0;N<a.length;N++){const W=a.get(N);if(W.crossTileID)continue;const{key:Z,tileAnchorX:te,tileAnchorY:J}=W,oe=Math.floor((D+te)*E),ge=Math.floor((O+J)*E),pe=this.index.range(oe-S,ge-S,oe+S,ge+S).sort((ve,me)=>ve-me);for(const ve of pe){const me=this.crossTileIDs[ve];if(this.keys[ve]===Z&&!v.has(me)){v.add(me),W.crossTileID=me;break}}}}}class Uv{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const h=Math.round((a-this.lng)/360);if(h!==0)for(const v in this.indexes){const S=this.indexes[v],E={};for(const D in S){const O=S[D];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+h),E[O.tileID.key]=O}this.indexes[v]=E}this.lng=a}addBucket(a,h,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let E=0;E<h.symbolInstances.length;E++)h.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const S=this.usedCrossTileIDs[a.overscaledZ];for(const E in this.indexes){const D=this.indexes[E];if(Number(E)>a.overscaledZ)for(const O in D){const N=D[O];N.tileID.isChildOf(a)&&N.findMatches(h.symbolInstances,a,S)}else{const O=D[a.scaledTo(Number(E)).key];O&&O.findMatches(h.symbolInstances,a,S)}}for(let E=0;E<h.symbolInstances.length;E++){const D=h.symbolInstances.get(E);D.crossTileID||(D.crossTileID=v.generate(),S.add(D.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Ia(a,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(a,h){for(const v of h.crossTileIDs)this.usedCrossTileIDs[a].delete(v)}removeStaleBuckets(a){let h=!1;for(const v in this.indexes){const S=this.indexes[v];for(const E in S)a[S[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,S[E]),delete S[E],h=!0)}return h}}class Uo{constructor(){this.layerIndexes={},this.crossTileIDs=new Uv,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,h,v,S){let E=this.layerIndexes[a.fqid];E===void 0&&(E=this.layerIndexes[a.fqid]=new Zh);let D=!1;const O={};S.name!=="globe"&&E.handleWrapJump(v);for(const N of h){const W=N.getBucket(a);W&&a.fqid===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(N.tileID,W,this.crossTileIDs)&&(D=!0),O[W.bucketInstanceId]=!0)}return E.removeStaleBuckets(O)&&(D=!0),D}pruneUnusedLayers(a){const h={};a.forEach(v=>{h[v]=!0});for(const v in this.layerIndexes)h[v]||delete this.layerIndexes[v]}}const ka=771;class Nr{constructor(a,h,v,S){this.blendFunction=a,this.blendColor=h,this.mask=v,this.blendEquation=S}}Nr.Replace=[1,0,1,0],Nr.disabled=new Nr(Nr.Replace,i.am.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,i.am.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,ka,1,ka],i.am.transparent,[!0,!0,!0,!0]),Nr.alphaBlendedNonPremultiplied=new Nr([770,ka,770,ka],i.am.transparent,[!0,!0,!0,!0]),Nr.multiply=new Nr([774,0,774,0],i.am.transparent,[!0,!0,!0,!0]);class Un{constructor(a,h,v){this.func=a,this.mask=h,this.range=v}}Un.ReadOnly=!1,Un.ReadWrite=!0,Un.disabled=new Un(519,Un.ReadOnly,[0,1]);const hp=7680;class vr{constructor(a,h,v,S,E,D){this.test=a,this.ref=h,this.mask=v,this.fail=S,this.depthFail=E,this.pass=D}}vr.disabled=new vr({func:519,mask:0},0,0,hp,hp,hp);const Dc=1029,lu=2305;class br{constructor(a,h,v){this.enable=a,this.mode=h,this.frontFace=v}}function zm(y,a){const h=i.c1(y,3);i.c3(y,a),i.c7(y,3,h)}function Jl(y,a){const h=i.bY([]);return i.bZ(h,h,-a),i.b_(h,h,-y),h}function qv(y,a){const h=[y[0],y[1],0],v=[a[0],a[1],0];if(i.ae(h)>=1e-15){const D=i.au([],h);i.b$(v,D,i.bE(v,D)),a[0]=v[0],a[1]=v[1]}const S=i.bG([],a,y);if(i.c0(S)<1e-15)return null;const E=Math.atan2(-S[1],S[0]);return Jl(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),E)}br.disabled=new br(!1,Dc,lu),br.backCCW=new br(!0,Dc,lu),br.backCW=new br(!0,Dc,2304),br.frontCW=new br(!0,1028,2304),br.frontCCW=new br(!0,1028,lu);class fp{constructor(a,h){this.position=a,this.orientation=h}get position(){return this._position}set position(a){if(a){const h=a instanceof i.ac?a:new i.ac(a[0],a[1],a[2]);this._renderWorldCopies&&(h.x=i.bX(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(a,h){if(this.orientation=null,!this.position)return;const v=this.position,S=this._elevation?this._elevation.getAtPointOrZero(i.ac.fromLngLat(a)):0,E=i.ac.fromLngLat(a,S),D=[E.x-v.x,E.y-v.y,E.z-v.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=qv(D,h)}setPitchBearing(a,h){this.orientation=Jl(i.al(a),i.al(-h))}}class Us{constructor(a,h){this._transform=i.bx([]),this.orientation=h,this.position=a}get mercatorPosition(){const a=this.position;return new i.ac(a[0],a[1],a[2])}get position(){const a=i.c1(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var h;a&&i.c7(this._transform,3,[(h=a)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||i.bY([]),a&&zm(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,h){this._orientation=Jl(a,h),zm(this._transform,this._orientation)}forward(){const a=i.c1(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=i.c1(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=i.c1(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,h){const v=new Float64Array(16);return i.bi(v,this.getWorldToCamera(a,h)),v}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(a,h,v){const S=this.position;i.b$(S,S,-a);const E=new Float64Array(16);return i.bn(E,[v,v,v]),i.bo(E,E,S),E[10]*=h,E}getWorldToCamera(a,h){const v=new Float64Array(16),S=new Float64Array(4),E=this.position;return i.c2(S,this._orientation),i.b$(E,E,-a),i.c3(v,S),i.bo(v,v,E),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=h,v[9]*=h,v[10]*=h,v[11]*=h,v}getCameraToClipPerspective(a,h,v,S){const E=new Float64Array(16);return i.c4(E,a,h,v,S),E}getCameraToClipOrthographic(a,h,v,S,E,D){const O=new Float64Array(16);return i.c5(O,a,h,v,S,E,D),O}getDistanceToElevation(a,h=!1){const v=a===0?0:i.c6(a,h?i.aY(this.position[1]):this.position[1]),S=this.forward();return(v-this.position[2])/S[2]}clone(){return new Us([...this.position],[...this.orientation])}}const ya={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Kh{constructor(a=0,h=0,v=0,S=0){if(isNaN(a)||a<0||isNaN(h)||h<0||isNaN(v)||v<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=h,this.left=v,this.right=S}interpolate(a,h,v){return h.top!=null&&a.top!=null&&(this.top=i.ai(a.top,h.top,v)),h.bottom!=null&&a.bottom!=null&&(this.bottom=i.ai(a.bottom,h.bottom,v)),h.left!=null&&a.left!=null&&(this.left=i.ai(a.left,h.left,v)),h.right!=null&&a.right!=null&&(this.right=i.ai(a.right,h.right,v)),this}getCenter(a,h){const v=i.aD((this.left+a-this.right)/2,0,a),S=i.aD((this.top+h-this.bottom)/2,0,h);return new i.P(v,S)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Kh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Fu=15;class Qh{constructor(a,h,v,S,E,D,O){this.tileSize=512,this._renderWorldCopies=E===void 0||E,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=v??0,this._maxPitch=S??60,this.setProjection(D),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new i.cd(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Kh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Us,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const a=new Qh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a._allowWorldUnderZoom=this._allowWorldUnderZoom,a}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Fu}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(a,h=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||v)&&this._updateCameraOnTerrain(),(a||v)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return i.aF(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=i.ce(this.projectionOptions);const v=this.getProjection(),S=!i.bv(h,v);return S&&this._calcMatrices(),this.mercatorFromTransition=!1,S}setOrthographicProjectionAtLowPitch(a){return this._orthographicProjectionAtLowPitch!==a&&(this._orthographicProjectionAtLowPitch=a,this._calcMatrices(),!0)}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.ce({name:"mercator"});const h=a!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.c6(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bX(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const h=-a*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=i.cf(),i.cg(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const h=i.aD(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=i.al(a),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const h=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(a){this._tileCoverLift!==a&&(this._tileCoverLift=a)}_updateCameraOnTerrain(){const a=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,h=this.elevation&&a===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||a===Number.NEGATIVE_INFINITY&&(!h||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const v=this._elevation;h||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&v.exaggeration()&&this._centerAltitudeValidForExaggeration!==v.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*v.exaggeration(),this._centerAltitudeValidForExaggeration=v.exaggeration()):(this._centerAltitude=a||0,this._centerAltitudeValidForExaggeration=v.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let S=0,E=0;for(let D=0;D<h.length;D++){const O=new i.P(h[D][0]*this.width,v+h[D][1]*(this.height-v)),N=a.pointCoordinate(O);if(!N)continue;const W=1/Math.hypot(N[0]-this._camera.position[0],N[1]-this._camera.position[1]);S+=N[3]*W,E+=W}return E===0?NaN:S/E}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*h,S=this._mercatorZfromZoom(a),E=this._mercatorZfromZoom(this._maxZoom),D=Math.max(S-v,E);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let v;v=a.z<this._camera.position[2]?[h.x,h.y,h.z]:[a.x,a.y,a.z];const S=i.ae(i.at([],this._camera.position,v));return i.aD(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let h=!1;if(a.orientation&&!i.ch(a.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(a.orientation)),a.position){const v=[a.position.x,a.position.y,a.position.z];i.ci(v,this._camera.position)||(this._setCameraPosition(v),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,h=new fp;return h.position=new i.ac(a[0],a[1],a[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(a){if(!i.cj(a))return!1;i.ck(a,a);const h=i.cl([],[0,0,-1],a),v=i.cl([],[0,-1,0],a);if(v[2]<0)return!1;const S=qv(h,v);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(a){const h=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;a[2]=i.aD(a[2],S/v,S/h),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,h,v){this._unmodified=!1,this._edgeInsets.interpolate(a,h,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const h=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(a){const h=[new i.cm(0,a)];if(this.renderWorldCopies){const v=this.pointCoordinate(new i.P(0,0)),S=this.pointCoordinate(new i.P(this.width,0)),E=this.pointCoordinate(new i.P(this.width,this.height)),D=this.pointCoordinate(new i.P(0,this.height)),O=Math.floor(Math.min(v.x,S.x,E.x,D.x)),N=Math.floor(Math.max(v.x,S.x,E.x,D.x)),W=1;for(let Z=O-W;Z<=N+W;Z++)Z!==0&&h.push(new i.cm(Z,a))}return h}isLODDisabled(a){return(!a||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(a,h,v){let S=[];const E=v!=null,D=!E;if(D&&this.zoom<h||E&&v[0]===0&&v[1]===0)return S;const O=new Set,N=(Z,te,J,oe,ge)=>{const pe=i.cK(te,Z,J,oe,ge);O.has(pe)||(S.push(new i.aM(Z,te,J,oe,ge)),O.add(pe))};for(let Z=0;Z<a.length;Z++){const te=a[Z];if(D&&te.canonical.z!==h)continue;const J=te.canonical,oe=te.overscaledZ,ge=te.wrap,pe=1<<J.z,ve=J.x+1<pe,me=J.x>0,Re=J.y+1<pe,Be=J.y>0,Ue=te.wrap-(me?0:1),Ke=te.wrap+(ve?0:1),Ye=me?J.x-1:pe-1,Ge=ve?J.x+1:0;if(E)v[0]<0?(N(oe,Ke,J.z,Ge,J.y),v[1]<0&&Re&&(N(oe,ge,J.z,J.x,J.y+1),N(oe,Ke,J.z,Ge,J.y+1)),v[1]>0&&Be&&(N(oe,ge,J.z,J.x,J.y-1),N(oe,Ke,J.z,Ge,J.y-1))):v[0]>0?(N(oe,Ue,J.z,Ye,J.y),v[1]<0&&Re&&(N(oe,ge,J.z,J.x,J.y+1),N(oe,Ue,J.z,Ye,J.y+1)),v[1]>0&&Be&&(N(oe,ge,J.z,J.x,J.y-1),N(oe,Ue,J.z,Ye,J.y-1))):v[1]<0&&Re?N(oe,ge,J.z,J.x,J.y+1):Be&&N(oe,ge,J.z,J.x,J.y-1);else{const Ne=te.visibleQuadrants;1&Ne&&(N(oe,Ue,J.z,Ye,J.y),Be&&(N(oe,ge,J.z,J.x,J.y-1),N(oe,Ue,J.z,Ye,J.y-1))),2&Ne&&(N(oe,Ke,J.z,Ge,J.y),Be&&(N(oe,ge,J.z,J.x,J.y-1),N(oe,Ke,J.z,Ge,J.y-1))),4&Ne&&(N(oe,Ue,J.z,Ye,J.y),Re&&(N(oe,ge,J.z,J.x,J.y+1),N(oe,Ue,J.z,Ye,J.y+1))),8&Ne&&(N(oe,Ke,J.z,Ge,J.y),Re&&(N(oe,ge,J.z,J.x,J.y+1),N(oe,Ke,J.z,Ge,J.y+1)))}}const W=[];for(const Z of S)S.some(te=>Z.isChildOf(te))||W.push(Z);if(S=W.filter(Z=>!a.some(te=>!!(Z.overscaledZ<h&&te.isChildOf(Z))||Z.equals(te)||Z.isChildOf(te))),D){const Z=1<<h,te=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),J=[Z*te.x,Z*te.y],oe=4,ge=oe*oe;S=S.filter(pe=>{const ve=pe.canonical.x+.5-J[0],me=pe.canonical.y+.5-J[1];return ve*ve+me*me<ge})}return S}coveringTiles(a){let h=this.coveringZoomLevel(a);const v=h,S=this.elevation&&this.elevation.exaggeration(),E=S&&!a.isTerrainDEM,D=this.projection.name==="mercator";if(a.minzoom!==void 0&&h<a.minzoom)return[];a.maxzoom!==void 0&&h>a.maxzoom&&(h=a.maxzoom);const O=this.locationCoordinate(this.center),N=this.center.lat,W=1<<h,Z=[W*O.x,W*O.y,0],te=this.projection.name==="globe",J=!te,oe=i.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,J),ge=te?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=W*i.c6(1,this.center.lat),ve=this._camera.position[2]/i.c6(1,this.center.lat),me=[W*ge.x,W*ge.y,ve*(J?1:pe)],Re=te||S,Be=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),Ue=this.isLODDisabled(!0)?h:0;let Ke;if(this._elevation&&a.isTerrainDEM)Ke=1e4*this._elevation.exaggeration();else if(this._elevation){const ut=this._elevation.getMinMaxForVisibleTiles();Ke=ut?ut.max:this._centerAltitude}else Ke=this._centerAltitude;const Ye=a.isTerrainDEM?-Ke:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ge=this.projection.isReprojectedInTileSpace?i.co(this):1,Ne=ut=>{const Mt=new i.ac(ut.x+25e-6,ut.y,ut.z),Jt=new i.ac(ut.x,ut.y+25e-6,ut.z),qt=ut.toLngLat(),en=Mt.toLngLat(),on=Jt.toLngLat(),Vn=this.locationCoordinate(qt),Gn=this.locationCoordinate(en),Fn=this.locationCoordinate(on),Qn=Math.hypot(Gn.x-Vn.x,Gn.y-Vn.y),Wn=Math.hypot(Fn.x-Vn.x,Fn.y-Vn.y);return Math.sqrt(Qn*Wn)*Ge/25e-6},Je=ut=>{const Gt=Ke,Mt=Ye;return{aabb:i.cr(this,W,0,0,0,ut,Mt,Gt,this.projection),zoom:0,x:0,y:0,minZ:Mt,maxZ:Gt,wrap:ut,fullyVisible:!1}},nt=[];let bt=[];const mt=h,$t=a.reparseOverscaled?v:h,jt=(ve-this._centerAltitude)*pe,an=ut=>{if(!this._elevation||!ut.tileID||!D)return;const Gt=this._elevation.getMinMaxForTile(ut.tileID),Mt=ut.aabb;Gt?(Mt.min[2]=Gt.min,Mt.max[2]=Gt.max,Mt.center[2]=(Mt.min[2]+Mt.max[2])/2):(ut.shouldSplit=Tt(ut),ut.shouldSplit||(Mt.min[2]=Mt.max[2]=Mt.center[2]=this._centerAltitude))},pt=(ut,Gt)=>{if(.707*Gt<ut)return 1;const Mt=Gt/ut;return Mt/(1.4144271570014144+(Math.pow(1.1,Mt-1.4144271570014144+1)-1)/(1.1-1)-1)},Tt=ut=>{if(ut.zoom<Ue)return!0;if(ut.zoom===mt)return!1;if(ut.shouldSplit!=null)return ut.shouldSplit;const Gt=ut.aabb.distanceX(me),Mt=ut.aabb.distanceY(me);let Jt=jt,qt=1;if(te){Jt=ut.aabb.distanceZ(me);const Wn=Math.pow(2,ut.zoom),hr=i.aY((ut.y+1)/Wn),Mr=i.aY(ut.y/Wn),ur=Math.min(Math.max(N,hr),Mr),Lr=i.cP(ur)/i.cP(N);if(qt=ur===N?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Lr/this._mercatorScaleRatio),this.zoom<=i.cL&&ut.zoom===mt-1&&Lr>=.9)return!0}else if(E&&(Jt=ut.aabb.distanceZ(me)*pe),this.projection.isReprojectedInTileSpace&&v<=5){const Wn=Math.pow(2,ut.zoom),hr=Ne(new i.ac((ut.x+.5)/Wn,(ut.y+.5)/Wn));qt=hr>.85?1:hr}if(!D){const Wn=Math.sqrt(Gt*Gt+Mt*Mt+Jt*Jt);let hr=(1<<mt-ut.zoom)*Be*qt;return hr*=pt(Math.max(Jt,jt),Wn),Wn<hr}let en=Number.MAX_VALUE,on=0;const Vn=ut.aabb.getCorners(),Gn=[];for(const Wn of Vn){i.at(Gn,Wn,me),te||(E?Gn[2]*=pe:Gn[2]=jt);const hr=i.bE(Gn,this._camera.forward());hr<en&&(en=hr,on=Math.abs(Gn[2]))}let Fn=(1<<mt-ut.zoom)*Be*qt;if(Fn*=pt(Math.max(on,jt),en),en<Fn)return!0;const Qn=ut.aabb.closestPoint(Z);return Qn[0]===Z[0]&&Qn[1]===Z[1]};if(this.renderWorldCopies)for(let ut=1;ut<=3;ut++)nt.push(Je(-ut)),nt.push(Je(ut));for(nt.push(Je(0));nt.length>0;){const ut=nt.pop(),Gt=ut.x,Mt=ut.y;let Jt=ut.fullyVisible;const qt=()=>this.projection.name==="globe"&&(ut.y===0||ut.y===(1<<ut.zoom)-1);if(!Jt){let en=Re?ut.aabb.intersects(oe):ut.aabb.intersectsFlat(oe);if(en===0&&qt()){const on=new i.cp(ut.zoom,Gt,Mt);en=i.cq(this,W,on,!0).intersects(oe)}if(en===0)continue;Jt=en===2}if(ut.zoom!==mt&&Tt(ut))for(let en=0;en<4;en++){const on=(Gt<<1)+en%2,Vn=(Mt<<1)+(en>>1),Gn={aabb:D?ut.aabb.quadrant(en):i.cr(this,W,ut.zoom+1,on,Vn,ut.wrap,ut.minZ,ut.maxZ,this.projection),zoom:ut.zoom+1,x:on,y:Vn,wrap:ut.wrap,fullyVisible:Jt,tileID:void 0,shouldSplit:void 0,minZ:ut.minZ,maxZ:ut.maxZ};E&&!te&&(Gn.tileID=new i.aM(ut.zoom+1===mt?$t:ut.zoom+1,ut.wrap,ut.zoom+1,on,Vn),an(Gn)),nt.push(Gn)}else{const en=ut.zoom===mt?$t:ut.zoom;if(a.minzoom&&a.minzoom>en)continue;let on=0;if(!Jt){let Qn=Re?ut.aabb.intersectsPrecise(oe):ut.aabb.intersectsPreciseFlat(oe);if(Qn===0&&qt()){const Wn=new i.cp(ut.zoom,Gt,Mt);Qn=i.cq(this,W,Wn,!0).intersectsPrecise(oe)}if(Qn===0)continue;if(a.calculateQuadrantVisibility)if(oe.containsPoint(ut.aabb.center))on=15;else for(let Wn=0;Wn<4;Wn++)ut.aabb.quadrant(Wn).intersects(oe)!==0&&(on|=1<<Wn)}const Vn=Z[0]-(.5+Gt+(ut.wrap<<ut.zoom))*(1<<h-ut.zoom),Gn=Z[1]-.5-Mt,Fn=ut.tileID?ut.tileID:new i.aM(en,ut.wrap,ut.zoom,Gt,Mt);a.calculateQuadrantVisibility&&(Fn.visibleQuadrants=on),bt.push({tileID:Fn,distanceSq:Vn*Vn+Gn*Gn})}}if(this.fogCullDistSq){const ut=this.fogCullDistSq,Gt=this.horizonLineFromTop();bt=bt.filter(Mt=>{const Jt=[0,0,0,1],qt=[i.aj,i.aj,0,1],en=this.calculateFogTileMatrix(Mt.tileID.toUnwrapped());i.aA(Jt,Jt,en),i.aA(qt,qt,en);const on=i.cs([],Jt,qt),Vn=i.ct([],Jt,qt),Gn=i.cM(on,Vn);if(Gn===0)return!0;let Fn=!1;const Qn=this._elevation;if(Qn&&Gn>ut&&Gt!==0){const Wn=this.calculateProjMatrix(Mt.tileID.toUnwrapped());let hr;a.isTerrainDEM||(hr=Qn.getMinMaxForTile(Mt.tileID)),hr||(hr={min:Ye,max:Ke});const Mr=i.cu(this.rotation),ur=[Mr[0]*i.aj,Mr[1]*i.aj,hr.max];i.ad(ur,ur,Wn),Fn=(1-ur[1])*this.height*.5<Gt}return Gn<ut||Fn})}return bt.sort((ut,Gt)=>ut.distanceSq-Gt.distanceSq).map(ut=>ut.tileID)}resize(a,h){this.width=a,this.height=h,this.pixelsToGLUnits=[2/a,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const h=i.aD(a.lat,-i.cv,i.cv),v=this.projection.project(a.lng,h);return new i.P(v.x*this.worldSize,v.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.c6(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,h){let v,S;const E=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;v=(h.x-E.x)/O,S=(h.y-E.y)/O}else{const O=this.pointCoordinate(h),N=this.pointCoordinate(E);v=O.x-N.x,S=O.y-N.y}const D=this.locationCoordinate(a);this.setLocation(new i.ac(D.x-v,D.y-S))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a,h){return this.projection.locationPoint(this,a,h)}locationPoint3D(a,h){return this.projection.locationPoint(this,a,h,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a,h){return this.coordinateLocation(this.pointCoordinate3D(a,h))}locationCoordinate(a,h){const v=h?i.c6(h,a.lat):void 0,S=this.projection.project(a.lng,a.lat);return new i.ac(S.x,S.y,v)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,h){const v=h??this._centerAltitude,S=[a.x,a.y,0,1],E=[a.x,a.y,1,1];i.aA(S,S,this.pixelMatrixInverse),i.aA(E,E,this.pixelMatrixInverse);const D=E[3];i.cw(S,S,1/S[3]),i.cw(E,E,1/D);const O=S[2],N=E[2];return{p0:S,p1:E,t:O===N?0:(v-O)/(N-O)}}screenPointToMercatorRay(a){const h=[a.x,a.y,0,1],v=[a.x,a.y,1,1];return i.aA(h,h,this.pixelMatrixInverse),i.aA(v,v,this.pixelMatrixInverse),i.cw(h,h,1/h[3]),i.cw(v,v,1/v[3]),h[2]=i.c6(h[2],this._center.lat)*this.worldSize,v[2]=i.c6(v[2],this._center.lat)*this.worldSize,i.cw(h,h,1/this.worldSize),i.cw(v,v,1/this.worldSize),new i.av([h[0],h[1],h[2]],i.au([],i.at([],v,h)))}rayIntersectionCoordinate(a){const{p0:h,p1:v,t:S}=a,E=i.c6(h[2],this._center.lat),D=i.c6(v[2],this._center.lat);return new i.ac(i.ai(h[0],v[0],S)/this.worldSize,i.ai(h[1],v[1],S)/this.worldSize,i.ai(E,D,S))}pointCoordinate(a,h=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,h)}pointCoordinate3D(a,h){if(!this.elevation)return this.pointCoordinate(a,h);let v=this.projection.pointCoordinate3D(this,a.x,a.y);if(v)return new i.ac(v[0],v[1],v[2]);let S=0,E=this.horizonLineFromTop();if(a.y>E)return this.pointCoordinate(a,h);const D=.02*E,O=a.clone();for(let N=0;N<10&&E-S>D;N++){O.y=i.ai(S,E,.66);const W=this.projection.pointCoordinate3D(this,O.x,O.y);W?(E=O.y,v=W):S=O.y}return v?new i.ac(v[0],v[1],v[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=i.cx)return!this.isPointAboveHorizon(a);const h=this.pointCoordinate(a);return h.y>=0&&h.y<=1}_coordinatePoint(a,h){const v=h&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,S=[a.x*this.worldSize,a.y*this.worldSize,v+a.toAltitude(),1];return i.aA(S,S,this.pixelMatrix),S[3]>0?new i.P(S[0]/S[3],S[1]/S[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:h}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,E=this.pointLocation3D(new i.P(h,a)),D=this.pointLocation3D(new i.P(S,a)),O=this.pointLocation3D(new i.P(S,v)),N=this.pointLocation3D(new i.P(h,v));let W=Math.min(E.lng,D.lng,O.lng,N.lng),Z=Math.max(E.lng,D.lng,O.lng,N.lng),te=Math.min(E.lat,D.lat,O.lat,N.lat),J=Math.max(E.lat,D.lat,O.lat,N.lat);const oe=Math.pow(2,-this.zoom)/16*270,ge=this.projection.name==="globe"?1:4,pe=(ve,me,Re,Be,Ue)=>{const Ke=(ve+Re)/2,Ye=(me+Be)/2,Ge=new i.P(Ke,Ye),{lng:Ne,lat:Je}=this.pointLocation3D(Ge),nt=Math.max(0,W-Ne,te-Je,Ne-Z,Je-J);W=Math.min(W,Ne),Z=Math.max(Z,Ne),te=Math.min(te,Je),J=Math.max(J,Je),(Ue<ge||nt>oe)&&(pe(ve,me,Ke,Ye,Ue+1),pe(Ke,Ye,Re,Be,Ue+1))};if(pe(h,a,S,a,1),pe(S,a,S,v,1),pe(S,v,h,v,1),pe(h,v,h,a,1),this.projection.name==="globe"){const[ve,me]=i.cy(this);ve?(J=90,Z=180,W=-180):me&&(te=-90,Z=180,W=-180)}return new i.aG(new i.cd(W,te),new i.cd(Z,J))}_getBoundsRectangular(a,h){const{top:v,left:S}=this._edgeInsets,E=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,O=new i.P(S,v),N=new i.P(D,v),W=new i.P(D,E),Z=new i.P(S,E);let te=this.pointCoordinate(O,a),J=this.pointCoordinate(N,a);const oe=this.pointCoordinate(W,h),ge=this.pointCoordinate(Z,h),pe=(ve,me)=>(me.y-ve.y)/(me.x-ve.x);return te.y>1&&J.y>=0?te=new i.ac((1-ge.y)/pe(ge,te)+ge.x,1):te.y<0&&J.y<=1&&(te=new i.ac(-ge.y/pe(ge,te)+ge.x,0)),J.y>1&&te.y>=0?J=new i.ac((1-oe.y)/pe(oe,J)+oe.x,1):J.y<0&&te.y<=1&&(J=new i.ac(-oe.y/pe(oe,J)+oe.x,0)),new i.aG().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(J)).extend(this.coordinateLocation(ge)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=a.visibleDemTiles.reduce((v,S)=>{if(S.dem){const E=S.dem.tree;v.min=Math.min(v.min,E.minimums[0]),v.max=Math.max(v.max,E.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*a.exaggeration(),h.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,v=this.height/2-h*(1-this._horizonShift);return a?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-i.cv,this.maxLat=i.cv,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.ay(this.minLng)*this.tileSize,this.worldMaxX=i.ay(this.maxLng)*this.tileSize,this.worldMinY=i.aH(this.maxLat)*this.tileSize,this.worldMaxY=i.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,h){return this.projection.createTileMatrix(this,h,a)}calculateDistanceTileData(a){const h=a.key,v=this._distanceTileDataCache;if(v[h])return v[h];const S=a.canonical,E=1/this.height,D=this.cameraWorldSize,O=D/this.zoomScale(S.z),N=(S.x+Math.pow(2,S.z)*a.wrap)*O,W=S.y*O,Z=this.point;Z.x*=D/this.worldSize,Z.y*=D/this.worldSize;const te=this.angle,J=Math.sin(-te),oe=-Math.cos(-te);return v[h]={bearing:[J,oe],center:[(Z.x-N)*E,(Z.y-W)*E],scale:O/i.aj*E},v[h]}calculateFogTileMatrix(a){const h=a.key,v=this._fogTileMatrixCache;if(v[h])return v[h];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return i.az(S,this.worldToFogMatrix,S),v[h]=new Float32Array(S),v[h]}calculateProjMatrix(a,h=!1,v=!1){const S=a.key;let E;if(E=v?this._expandedProjMatrixCache:h?this._alignedProjMatrixCache:this._projMatrixCache,E[S])return E[S];const D=this.calculatePosMatrix(a,this.worldSize);let O;return O=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:v?this.expandedFarZProjMatrix:h?this.alignedProjMatrix:this.projMatrix,i.az(D,O,D),E[S]=new Float32Array(D),E[S]}calculatePixelsToTileUnitsMatrix(a){const h=a.tileID.key,v=this._pixelsToTileUnitsCache;if(v[h])return v[h];const S=i.cz(a,this);return v[h]=S,v[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,h=i.bn([],[a,a,a]);return i.az(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const h=i.c6(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(h),S=this._camera.forward(),E=i.c6(1,this._center.lat);v[2]/=E,S[2]/=E,i.au(S,S);const D=a.raycast(v,S,a.exaggeration());if(D){const O=i.bF([],v,S,D),N=new i.ac(O[0],O[1],i.c6(O[2],i.aY(O[1]))),W=(N.z+i.ae([N.x-v[0],N.y-v[1],N.z-v[2]*E]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(W),this._centerAltitude=N.toAltitude(),this._center=this.coordinateLocation(N),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const h=this._elevation,v=i.c6(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(v),E=h.getAtPointOrZero(new i.ac(...S)),D=this.pixelsPerMeter/this.worldSize*E,O=this._minimumHeightOverTerrain(),N=S[2]-D;if(N<=O)if(N<0||a){const W=this.locationCoordinate(this._center,this._centerAltitude),Z=[S[0],S[1],W.z-S[2]],te=i.ae(Z);Z[2]-=(O-N)/this._pixelsPerMercatorPixel;const J=i.ae(Z);if(J===0)return;i.b$(Z,Z,te/J*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],W.z*this._pixelsPerMercatorPixel-Z[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const J=this.center;return J.lat=i.aD(J.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(J.lng=i.aD(J.lng,this.minLng,this.maxLng)),this.center=J,void(this._constraining=!1)}const h=this._unmodified,{x:v,y:S}=this.point;let E=0,D=v,O=S;const N=this.width/2,W=this.height/2,Z=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(S-W<Z&&(O=Z+W),S+W>te&&(O=te-W),te-Z<this.height&&(E=Math.max(E,this.height/(te-Z)),O=(te+Z)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const J=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,ge=this.worldSize/2-(J+oe)/2;D=(v+ge+this.worldSize)%this.worldSize-ge,D-N<J&&(D=J+N),D+N>oe&&(D=oe-N),oe-J<this.width&&(E=Math.max(E,this.width/(oe-J)),D=(oe+J)/2)}D===v&&O===S||this._allowWorldUnderZoom||(this.center=this.unproject(new i.P(D,O))),E&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(E)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,h=this.projection.name==="globe",v=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.c6(1,this.center.lat)/i.c6(1,i.cN));const S=i.cA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,S),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E=this.projection.zAxisUnit==="meters"?v:1,D=this._camera.getWorldToCamera(this.worldSize,E);let O;const N=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(N[8]=2*-a.x/this.width,N[9]=2*a.y/this.height,this.isOrthographic){let Je=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),nt=Je*this.aspect,bt=-nt,mt=-Je;nt-=a.x,bt-=a.x,Je+=a.y,mt+=a.y,O=this._camera.getCameraToClipOrthographic(bt,nt,mt,Je,this._nearZ,this._farZ),(($t,jt,an,pt)=>{for(let Tt=0;Tt<16;Tt++)$t[Tt]=i.ai(jt[Tt],an[Tt],pt)})(O,O,N,i.cO(this.pitch>=Fu?1:this.pitch/Fu))}else O=N;const W=i.cB([],N,D);let Z=i.cB([],O,D);if(this.projection.isReprojectedInTileSpace){const Je=this.locationCoordinate(this.center),nt=i.bx([]);i.bo(nt,nt,[Je.x*this.worldSize,Je.y*this.worldSize,0]),i.az(nt,nt,i.cC(this)),i.bo(nt,nt,[-Je.x*this.worldSize,-Je.y*this.worldSize,0]),i.az(Z,Z,nt),i.az(W,W,nt),this.inverseAdjustmentMatrix=i.cD(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.cE([],Z,[this.worldSize,this.worldSize,this.worldSize/E,1]),this.projMatrix=Z,this.invProjMatrix=i.bi(new Float64Array(16),this.projMatrix),h){const Je=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Je[8]=2*-a.x/this.width,Je[9]=2*a.y/this.height,this.expandedFarZProjMatrix=i.cB([],Je,D)}else this.expandedFarZProjMatrix=this.projMatrix;const te=i.bi([],O);this.frustumCorners=i.cF.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!h);const J=new Float32Array(16);i.bx(J),i.cE(J,J,[1,-1,1]),i.cG(J,J,this._pitch),i.by(J,J,this.angle);const oe=i.c4(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.bw(oe);const ge=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;oe[8]=2*-a.x/this.width,oe[9]=2*(a.y+ge)/this.height,this.skyboxMatrix=i.az(J,oe,J);const pe=this.point,ve=pe.x,me=pe.y,Re=this.width%2/2,Be=this.height%2/2,Ue=Math.cos(this.angle),Ke=Math.sin(this.angle),Ye=ve-Math.round(ve)+Ue*Re+Ke*Be,Ge=me-Math.round(me)+Ue*Be+Ke*Re,Ne=new Float64Array(Z);if(i.bo(Ne,Ne,[Ye>.5?Ye-1:Ye,Ge>.5?Ge-1:Ge,0]),this.alignedProjMatrix=Ne,Z=i.bz(),i.cE(Z,Z,[this.width/2,-this.height/2,1]),i.bo(Z,Z,[1,-1,0]),this.labelPlaneMatrix=Z,Z=i.bz(),i.cE(Z,Z,[1,-1,1]),i.bo(Z,Z,[-1,-1,0]),i.cE(Z,Z,[2/this.width,2/this.height,1]),this.glCoordMatrix=Z,this.pixelMatrix=i.az(new Float64Array(16),this.labelPlaneMatrix,W),this._calcFogMatrices(),this._distanceTileDataCache={},Z=i.bi(new Float64Array(16),this.pixelMatrix),!Z)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Z,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.cH(this);const Je=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.ad(Je,Je,D),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Z;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,v=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,E=[a,a,h];i.b$(E,E,S),i.b$(v,v,-1),i.cI(v,v,E);const D=i.bz();i.bo(D,D,v),i.cE(D,D,E),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,h,S)}_computeCameraPosition(a){const h=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),S=this.point,E=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-a/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-v[0]*E,S.y/this.worldSize-v[1]*E,a/this.worldSize*this._centerAltitude-v[2]*E]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],S=a[2];let E=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(E=Math.min((h-v)/S,1)),this._camera.position=i.bF([],this._camera.position,a,E),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,h=this._camera.forward(),{pitch:v,bearing:S}=this._camera.getPitchBearing(),E=i.c6(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.al(this._maxPitch)),O=Math.max((a[2]-E)/Math.cos(v),D),N=this._zoomFromMercatorZ(O);i.bF(a,a,h,O),this._pitch=i.aD(v,i.al(this.minPitch),i.al(this.maxPitch)),this.angle=i.bX(S,-Math.PI,Math.PI),this._setZoom(i.aD(N,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.ac(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let h=0,v=i.cx,S=0,E=1/0;for(;v-h>1e-6&&v>h;){const D=h+.5*(v-h),O=this.tileSize*Math.pow(2,D),N=this.getCameraToCenterDistance(this.projection,D,O),W=this.scaleZoom(N/(a*this.tileSize)),Z=Math.abs(D-W);Z<E&&(E=Z,S=D),D<W?h=D:v=D}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,h){const v=Math.min(a.x,h.x),S=Math.max(a.x,h.x),E=Math.min(a.y,h.y),D=Math.max(a.y,h.y);if(E<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new i.P(v,E),new i.P(S,D),new i.P(v,D),new i.P(S,E)],N=this.renderWorldCopies?-3:0,W=this.renderWorldCopies?4:1;for(const Z of O){const te=this.pointRayIntersection(Z);if(te.t<0)return!0;const J=this.rayIntersectionCoordinate(te);if(J.x<N||J.y<0||J.x>W||J.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.cJ(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(a,h){const v=i.ae(i.at([],this._camera.position,a)),S=this._zoomFromMercatorZ(v)+h;return v-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([h,v,S],E){const D=[h,v,S,1];i.aA(D,D,E);const O=D[3]=Math.max(D[3],1e-6);return D[0]/=O,D[1]/=O,D[2]/=O,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,a))}}getCameraToCenterDistance(a,h=this.zoom,v=this.worldSize){const S=i.cA(a,h,this.width,this.height,1024),E=a.pixelSpaceConversion(this.center.lat,v,S);let D=.5/Math.tan(.5*this._fov)*this.height*E;return this.isOrthographic&&(D=i.ai(1,D,i.cO(this.pitch>=Fu?1:this.pitch/Fu))),D}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.az(a,a,this.globeMatrix),a}getFrustum(a){return i.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,this.projection.zAxisUnit==="meters")}}const Jh=(y,a)=>{if(a>0&&y.terrain&&i.w("Cutoff is currently disabled on terrain"),a<=0||y.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const h=y.transform,v=Math.max(Math.abs(h._zoom-(y.minCutoffZoom-1)),1),S=h.isLODDisabled(!1)?i.af(60,45,h.pitch):i.af(30,15,h.pitch),E=h._farZ-h._nearZ,D=a*h.height,O=((1-(N=S))*h.cameraToCenterDistance+N*(h._farZ+D))*v;var N;return{shouldRenderCutoff:S<1,uniformValues:{u_cutoff_params:[h._nearZ,h._farZ,(O-h._nearZ)/E,(O-D-h._nearZ)/E]}}},Oa={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Fm{constructor(a,h){this.aabb=a,this.lastCascade=h}}class Bm{add(a,h){const v=this.receivers[a.key];v!==void 0?(v.aabb.min[0]=Math.min(v.aabb.min[0],h.min[0]),v.aabb.min[1]=Math.min(v.aabb.min[1],h.min[1]),v.aabb.min[2]=Math.min(v.aabb.min[2],h.min[2]),v.aabb.max[0]=Math.max(v.aabb.max[0],h.max[0]),v.aabb.max[1]=Math.max(v.aabb.max[1],h.max[1]),v.aabb.max[2]=Math.max(v.aabb.max[2],h.max[2])):this.receivers[a.key]=new Fm(h,null)}clear(){this.receivers={}}get(a){return this.receivers[a.key]}computeRequiredCascades(a,h,v){const S=i.cV.fromPoints(a.points);let E=0;for(const D in this.receivers){const O=this.receivers[D];if(!O||!S.intersectsAabb(O.aabb))continue;O.aabb.min=S.closestPoint(O.aabb.min),O.aabb.max=S.closestPoint(O.aabb.max);const N=O.aabb.getCorners();for(let W=0;W<v.length;W++){let Z=!0;for(const te of N){const J=[te[0]*h,te[1]*h,te[2]];if(i.ad(J,J,v[W].matrix),J[0]<-1||J[0]>1||J[1]<-1||J[1]>1){Z=!1;break}}if(O.lastCascade=W,E=Math.max(E,W),Z)break}}return E+1}}class Pl{constructor(a){this.painter=a,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Bm,this._depthMode=new Un(a.context.gl.LEQUAL,Un.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,a.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),a.tp.registerParameter(Oa,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),a.tp.registerParameter(Oa,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),a.tp.registerParameter(Oa,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),a.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const a of this._cascades)a.texture.destroy(),a.framebuffer.destroy();this._cascades=[]}updateShadowParameters(a,h){const v=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!h||!h.properties)return;const S=h.properties.get("shadow-intensity");if(!h.shadowsEnabled()||S<=0||(this._shadowLayerCount=v.style.order.reduce((ge,pe)=>{const ve=v.style._mergedLayers[pe];return ge+(ve.hasShadowPass()&&!ve.isHidden(a.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const E=v.context,D=Oa.shadowMapResolution,O=Oa.shadowMapResolution;if(this._cascades.length===0||Oa.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let ge=0;ge<Oa.cascadeCount;++ge){const pe=v._shadowMapDebug,ve=E.gl,me=E.createFramebuffer(D,O,pe,"texture"),Re=new i.T(E,{width:D,height:O,data:null},ve.DEPTH_COMPONENT16);if(me.depthAttachment.set(Re.texture),pe){const Be=new i.T(E,{width:D,height:O,data:null},ve.RGBA8);me.colorAttachment.set(Be.texture)}this._cascades.push({framebuffer:me,texture:Re,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.cn,scale:0})}}this.shadowDirection=uy(h);let N=0;if(a.elevation){const ge=a.elevation,pe=[1e4,-1e4];ge.visibleDemTiles.filter(ve=>ve.dem).forEach(ve=>{const me=ve.dem.tree;pe[0]=Math.min(pe[0],me.minimums[0]),pe[1]=Math.max(pe[1],me.maximums[0])}),pe[0]!==1e4&&(N=(pe[1]-pe[0])*ge.exaggeration())}const W=1.5*a.cameraToCenterDistance,Z=3*W,te=new Float64Array(16);for(let ge=0;ge<this._cascades.length;++ge){const pe=this._cascades[ge];let ve=a.height/50,me=1;Oa.cascadeCount===1?me=Z:ge===0?me=W:(ve=W,me=Z);const[Re,Be]=dy(a,this.shadowDirection,ve,me,Oa.shadowMapResolution,N);pe.scale=a.scale,pe.matrix=Re,pe.boundingSphereRadius=Be,i.bi(te,pe.matrix),pe.frustum=i.cn.fromInvProjectionMatrix(te,1,0,!0),pe.far=me}const J=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[J].far,this._cascades[J].far],this._uniformValues.u_shadow_intensity=S,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Oa.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Oa.shadowMapResolution,this._uniformValues.u_shadowmap_0=ya.ShadowMap0,this._uniformValues.u_shadowmap_1=ya.ShadowMap0+1,this._groundShadowTiles=v.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const oe=v.transform.elevation;for(const ge of this._groundShadowTiles){let pe={min:0,max:0};if(oe){const ve=oe.getMinMaxForTile(ge);ve&&(pe=ve)}this.addShadowReceiver(ge.toUnwrapped(),pe.min,pe.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(a){this._enabled=a}drawShadowPass(a,h){if(!this.enabled)return;const v=this.painter,S=v.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(v.transform.getFrustum(0),v.transform.worldSize,this._cascades),S.viewport.set([0,0,Oa.shadowMapResolution,Oa.shadowMapResolution]);for(let E=0;E<this._numCascadesToRender;++E){v.currentShadowCascade=E,S.bindFramebuffer.set(this._cascades[E].framebuffer.framebuffer),S.clear({color:i.am.white,depth:1});for(const D of a.order){const O=a._mergedLayers[D];if(!O.hasShadowPass()||O.isHidden(v.transform.zoom))continue;const N=a.getLayerSourceCache(O),W=N?h[N.id]:void 0;(O.type==="model"||W&&W.length)&&v.renderLayer(v,N,O,W)}}v.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const a=this.painter,h=a.style,v=a.context,S=h.directionalLight,E=h.ambientLight;if(!S||!E)return;const D=[],O=Jh(a,a.longestCutoffRange);O.shouldRenderCutoff&&D.push("RENDER_CUTOFF"),D.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&D.push("NORMAL_OFFSET");const N=Pc(h,S,E),W=new Un(v.gl.LEQUAL,Un.ReadOnly,a.depthRangeFor3D);for(const Z of this._groundShadowTiles){const te=Z.toUnwrapped(),J=a.isTileAffectedByFog(Z),oe=a.getOrCreateProgram("groundShadow",{defines:D,overrideFog:J});this.setupShadows(te,oe),a.uploadCommonUniforms(v,oe,te,null,O);const ge={u_matrix:a.transform.calculateProjMatrix(te),u_ground_shadow_factor:N};oe.draw(a,v.gl.TRIANGLES,W,vr.disabled,Nr.multiply,br.disabled,ge,"ground_shadow",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments,null,a.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Nr.unblended:Nr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(a){const h=this.painter.transform,v=h.calculatePosMatrix(a,h.worldSize);return i.az(v,this._cascades[this.painter.currentShadowCascade].matrix,v),Float32Array.from(v)}calculateShadowPassMatrixFromMatrix(a){return i.az(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}setupShadows(a,h,v,S=0){if(!this.enabled)return;const E=this.painter.transform,D=this.painter.context,O=D.gl,N=this._uniformValues,W=new Float64Array(16),Z=E.calculatePosMatrix(a,E.worldSize);for(let te=0;te<this._cascades.length;te++)i.az(W,this._cascades[te].matrix,Z),N[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(W),D.activeTexture.set(O.TEXTURE0+ya.ShadowMap0+te),this._cascades[te].texture.bind(O.NEAREST,O.CLAMP_TO_EDGE);if(this.useNormalOffset=!!v,this.useNormalOffset){const te=i.cT(a.canonical),J=2/E.tileSize*i.aj/Oa.shadowMapResolution,oe=J*this._cascades[0].boundingSphereRadius,ge=J*this._cascades[this._cascades.length-1].boundingSphereRadius,pe=(v==="vector-tile"?1:3)/Math.pow(2,S-a.canonical.z-(1-E.zoom+Math.floor(E.zoom)));N.u_shadow_normal_offset=[te,oe*pe,ge*pe],N.u_shadow_bias=[6e-5,.0012,.012]}else N.u_shadow_bias=[36e-5,.0012,.012];h.setShadowUniformValues(D,N)}setupShadowsFromMatrix(a,h,v=!1){if(!this.enabled)return;const S=this.painter.context,E=S.gl,D=this._uniformValues,O=new Float64Array(16);for(let N=0;N<Oa.cascadeCount;N++)i.az(O,this._cascades[N].matrix,a),D[N===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(O),S.activeTexture.set(E.TEXTURE0+ya.ShadowMap0+N),this._cascades[N].texture.bind(E.NEAREST,E.CLAMP_TO_EDGE);if(this.useNormalOffset=v,v){const N=Oa.normalOffset;D.u_shadow_normal_offset=[1,N,N],D.u_shadow_bias=[6e-5,.0012,.012]}else D.u_shadow_bias=[36e-5,.0012,.012];h.setShadowUniformValues(S,D)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(a,h,v,S){if(S[2]>=0)return{};const E=function(N,W,Z){const te=Z/(1<<N.canonical.z);return new i.cV([N.canonical.x*te+N.wrap*Z,N.canonical.y*te+N.wrap*Z,0],[(N.canonical.x+1)*te+N.wrap*Z,(N.canonical.y+1)*te+N.wrap*Z,W])}(a,h,v).getCorners(),D=h/-S[2];S[0]<0?(i.cU(E[0],E[0],[S[0]*D,0,0]),i.cU(E[3],E[3],[S[0]*D,0,0])):S[0]>0&&(i.cU(E[1],E[1],[S[0]*D,0,0]),i.cU(E[2],E[2],[S[0]*D,0,0])),S[1]<0?(i.cU(E[0],E[0],[0,S[1]*D,0]),i.cU(E[1],E[1],[0,S[1]*D,0])):S[1]>0&&(i.cU(E[2],E[2],[0,S[1]*D,0]),i.cU(E[3],E[3],[0,S[1]*D,0]));const O={};return O.vertices=E,O.planes=[Il(E[1],E[0],E[4]),Il(E[2],E[1],E[5]),Il(E[3],E[2],E[6]),Il(E[0],E[3],E[7])],O}addShadowReceiver(a,h,v){this._receivers.add(a,i.cV.fromTileIdAndHeight(a,h,v))}getMaxCascadeForTile(a){const h=this._receivers.get(a);return h&&h.lastCascade?h.lastCascade:0}}function Il(y,a,h){const v=i.at([],h,a),S=i.at([],y,a),E=i.bG([],v,S),D=i.ae(E);return D===0?[0,0,1,0]:(i.b$(E,E,1/D),[E[0],E[1],E[2],-i.bE(E,a)])}function uy(y){const a=y.properties.get("direction"),h=i.cR(a.x,a.y,a.z);h[2]=i.aD(h[2],0,75);const v=i.cW([h[0],h[1],h[2]]);return i.cS(v.x,v.y,v.z)}function Pc(y,a,h){const v=a.properties.get("color-use-theme")==="none",S=a.properties.get("color"),E=a.properties.get("intensity"),D=a.properties.get("direction"),O=[D.x,D.y,D.z],N=h.properties.get("color-use-theme")==="none",W=h.properties.get("color"),Z=h.properties.get("intensity"),te=Math.max(i.bE([0,0,1],O),0),J=[0,0,0];i.b$(J,W.toRenderColor(N?null:y.getLut(a.scope)).toArray01Linear().slice(0,3),Z);const oe=[0,0,0];return i.b$(oe,S.toRenderColor(v?null:y.getLut(h.scope)).toArray01Linear().slice(0,3),te*E),i.cX([J[0]>0?J[0]/(J[0]+oe[0]):0,J[1]>0?J[1]/(J[1]+oe[1]):0,J[2]>0?J[2]/(J[2]+oe[2]):0])}function dy(y,a,h,v,S,E){const D=y.zoom,O=y.scale,N=y.worldSize,W=1/N,Z=y.aspect,te=Math.sqrt(1+Z*Z)*Math.tan(.5*y.fovX),J=te*te,oe=v-h,ge=v+h;let pe,ve;J>oe/ge?(pe=v,ve=v*te):(pe=.5*ge*(1+J),ve=.5*Math.sqrt(oe*oe+2*(v*v+h*h)*J+ge*ge*J*J));const me=y.projection.pixelsPerMeter(y.center.lat,N),Re=y._camera.getCameraToWorldMercator(),Be=[0,0,-pe*W];i.ad(Be,Be,Re);let Ue=ve*W;const Ke=y._edgeInsets;if(!(Ke.left===0&&Ke.top===0&&Ke.right===0&&Ke.bottom===0||Ke.left===Ke.right&&Ke.top===Ke.bottom)){const Jt=y._camera.getWorldToCamera(y.worldSize,y.projection.zAxisUnit==="meters"?me:1),qt=y._camera.getCameraToClipPerspective(y._fov,y.width/y.height,h,v);qt[8]=2*-y.centerOffset.x/y.width,qt[9]=2*y.centerOffset.y/y.height;const en=new Float64Array(16);i.cB(en,qt,Jt);const on=new Float64Array(16);i.bi(on,en);const Vn=i.cn.fromInvProjectionMatrix(on,N,D,!0);for(const Gn of Vn.points){const Fn=((Ye=Gn)[0]/=O,Ye[1]/=O,Ye[2]=i.c6(Ye[2],y._center.lat),Ye);Ue=Math.max(Ue,i.c0(i.cY([],Be,Fn)))}}var Ye;Ue*=S/(S-1);const Ge=Math.acos(a[2]),Ne=Math.atan2(-a[0],-a[1]),Je=new Us;Je.position=Be,Je.setPitchBearing(Ge,Ne);const nt=Je.getWorldToCamera(N,me),bt=Ue*N,mt=Math.min(y._mercatorZfromZoom(17)*N*-2,-2*bt),$t=Je.getCameraToClipOrthographic(-bt,bt,-bt,bt,mt,(bt+E*me)/a[2]),jt=new Float64Array(16);i.az(jt,$t,nt);const an=i.cS(Math.floor(1e6*Be[0])/1e6*N,Math.floor(1e6*Be[1])/1e6*N,0),pt=.5*S,Tt=[0,0,0];i.ad(Tt,an,jt),i.b$(Tt,Tt,pt);const ut=[Math.floor(Tt[0]),Math.floor(Tt[1]),Math.floor(Tt[2])],Gt=[0,0,0];i.at(Gt,Tt,ut),i.b$(Gt,Gt,-1/pt);const Mt=new Float64Array(16);return i.bx(Mt),i.bo(Mt,Mt,Gt),i.az(jt,Mt,jt),[jt,bt]}class Bu extends i.E{constructor(a){super(),this.requestManager=a,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(a,h){return i.aS(this.requestManager.transformRequest(h,i.R.Model).url).then(v=>{if(!v)return;const S=i.aT(v),E=new i.aU(a,void 0,void 0,S);return E.computeBoundsAndApplyParent(),E}).catch(v=>{if(v&&v.status===404)return null;this.fire(new i.z(new Error(`Could not load model ${a} from ${h}: ${v.message}`)))})}load(a,h,v={forceReload:!1}){this.models[h]||(this.models[h]={});const S=Object.keys(a),E=[],D=[];for(const O of S){const N=a[O];this.hasURLBeenRequested(N)&&!v.forceReload||(this.modelByURL[N]={modelId:O,scope:h},E.push(this.loadModel(O,N)),D.push(O)),this.models[h][O]||(this.models[h][O]={model:null,numReferences:1})}this.numModelsLoading[h]=(this.numModelsLoading[h]||0)+D.length,Promise.allSettled(E).then(O=>{for(let N=0;N<O.length;N++){const{status:W}=O[N];if(W==="rejected")continue;const{value:Z}=O[N];this.models[h][D[N]]||(this.models[h][D[N]]={model:null,numReferences:1}),this.models[h][D[N]].model=Z}this.numModelsLoading[h]-=D.length,this.fire(new i.A("data",{dataType:"style"}))}).catch(O=>{this.fire(new i.z(new Error(`Could not load models: ${O.message}`)))})}isLoaded(){for(const a in this.numModelsLoading)if(this.numModelsLoading[a]>0)return!1;return!0}hasModel(a,h,v={exactIdMatch:!1}){return!!(v.exactIdMatch?this.getModel(a,h):this.getModelByURL(this.modelUris[h][a]))}getModel(a,h){return this.models[h]||(this.models[h]={}),this.models[h][a]?this.models[h][a].model:void 0}getModelByURL(a){if(!a)return null;const h=this.modelByURL[a];return h?this.models[h.scope][h.modelId].model:null}hasModelBeenAdded(a,h){return this.models[h]&&this.models[h][a]!==void 0}getModelURIs(a){return this.modelUris[a]||{}}addModel(a,h,v){this.models[v]||(this.models[v]={}),this.modelUris[v]||(this.modelUris[v]={});const S=this.requestManager.normalizeModelURL(h);if((this.hasModel(a,v,{exactIdMatch:!0})||this.hasModelBeenAdded(a,v))&&this.modelUris[v][a]===S)this.models[v][a].numReferences++;else if(this.hasURLBeenRequested(S)){const{scope:E,modelId:D}=this.modelByURL[S];this.models[E][D].numReferences++}else this.modelUris[v][a]=S,this.load({[a]:this.modelUris[v][a]},v)}addModelURLs(a,h){this.models[h]||(this.models[h]={}),this.modelUris[h]||(this.modelUris[h]={});const v=this.modelUris[h];for(const S in a)v[S]=this.requestManager.normalizeModelURL(a[S])}reloadModels(a){this.load(this.modelUris[a],a,{forceReload:!0})}addModelsFromBucket(a,h){this.models[h]||(this.models[h]={}),this.modelUris[h]||(this.modelUris[h]={});const v={};for(const S of a)this.hasModel(S,h,{exactIdMatch:!0})||this.hasURLBeenRequested(S)?this.models[h][S].numReferences++:this.modelUris[h][S]&&!this.hasURLBeenRequested(S)?v[S]=this.modelUris[h][S]:!this.hasURLBeenRequested(S)&&i.cZ(S,!1)&&(this.modelUris[h][S]=this.requestManager.normalizeModelURL(S),v[S]=this.modelUris[h][S]);this.load(v,h)}hasURLBeenRequested(a){return this.modelByURL[a]!==void 0}removeModel(a,h,v=!1){if(this.models[h]&&this.models[h][a]&&(this.models[h][a].numReferences--,this.models[h][a].numReferences===0)){const S=this.modelUris[h][a];v||delete this.modelUris[h][a],delete this.modelByURL[S];const E=this.models[h][a].model;if(!E)return;delete this.models[h][a],E.destroy()}}destroy(){for(const a of Object.keys(this.models))for(const h of Object.keys(this.models[a])){const v=this.models[a][h].model;delete this.models[a][h],v&&v.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(a){return this.models[a]||(this.models[a]={}),Object.keys(this.models[a])}upload(a,h){this.models[h]||(this.models[h]={});for(const v in this.models[h])this.models[h][v].model&&this.models[h][v].model.upload(a.context)}}const Hv=new i.a7({data:new i.a8(i.a5.colorTheme.data)}),G1={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function ef(y){return y=y||{},Object.assign(y,G1)}class hy extends i.E{constructor(a){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},i.aV(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=a,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(a=>{a.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new i.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=a.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=a.stylesheet.indoor.buildingFeaturesetId,this._scope=a.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:a=>(a.feature&&a.feature.properties.floorplan&&this.selectFloorplan(a.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(a){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(D,O){const[N,W]=D,{center:Z,radius:te}=O,[J,oe]=Z,ge=Math.abs(N-J);return Math.sqrt((ge>180?360-ge:ge)**2+(W-oe)**2)<=te}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new i.A("floorplangone")));const h={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},v=new i.P(this._map.transform.width/2,this._map.transform.height/2),S=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],E=this._map.queryRenderedFeatures(a?S:v,h);E.length>0&&(this._selectedFloorplan&&E[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=E[0],this._floorplanSelected(!1)))}_floorplanSelected(a){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(E){const[[D,O],[N,W]]=E,Z=(N-D+360)%360,te=Z>180?360-Z:Z;return{center:[(D+te/2+360)%360,(O+W)/2],radius:Math.sqrt(te**2+(W-O)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const h=this._floorplanStates[this._indoorData.id].selectedBuilding,v=this._floorplanStates[this._indoorData.id].selectedLevel;let S;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const E of this._indoorData.levels)E.id===this._selectedLevel.id&&(S=E.id);if(this.fire(new i.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:S})),h){const E=this._indoorData.buildings.find(D=>D.id===h);this._buildingSelected(E,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(v){const E=this._indoorData.levels.find(D=>D.id===v);this._updateLevels(E,a)}else a&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(a,h){h&&a&&a.extent&&this._map.fitBounds(a.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=a?a.id:void 0;const v=this._indoorData.levels.filter(S=>a.levels.includes(S.id));this.fire(new i.A("buildingselected",{buildingId:a.id,levels:v}))}_levelSelected(a){if(a==="overview")this._updateLevels(void 0,!0);else{const h=this._indoorData.levels.find(v=>v.id===a);this._updateLevels(h,!0)}this.fire(new i.A("levelselected",{levelId:a==="overview"?void 0:a}))}_updateLevels(a,h){if(!a)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(h&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function v(W){const Z=W.indexOf("/floor/");if(Z===-1)return W;const te=Z+7,J=W.indexOf("/",te);return J===-1?W.slice(te):W.slice(te,J)}this._selectedLevel=a,this._floorplanStates[this._indoorData.id].selectedLevel=a?a.id:void 0;const S=[],E={},D={},O={},N={};for(const W of this._indoorData.levels)if(S.push(W.id),E[W.id]=W.height,D[W.id]=W.base,a){if(this.mergeFloors){const Z=v(a.id),te=v(W.id);O[W.id]=te===Z?"true":"false"}else O[W.id]=W.id===a.id?"true":"false";N[W.id]=W.base<a.base?"true":"false"}else N[W.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",E]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",D]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",O]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",N]),a&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!a.isUnderground),h&&a.extent)){const W=this._map.cameraForBounds(a.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),Z=this._map.getZoom(),te=W.zoom?Math.abs(Z-W.zoom):0;this._map.fitBounds(a.extent,te>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:Z})}}selectFloorplan(a){const h={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},v=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(v,h);if(S.length>0){for(const E of S)if(JSON.parse(E.properties["indoor-data"]).floorplanIDs.includes(a)){this._selectedFloorplan=E,this._floorplanSelected(!0);break}}}selectBuilding(a){const h=this._indoorData.buildings.find(v=>v.id===a);this._buildingSelected(h,!0)}selectLevel(a){this._levelSelected(a)}}function jm(y){if(!y.metadata||!y.metadata.content_area)return;const a=i.q.devicePixelRatio,{left:h,top:v,width:S,height:E}=y.metadata.content_area,D=h*a,O=v*a;return[D,O,D+S*a,O+E*a]}function pp(y){if(y)return y.map(([a,h])=>[a*i.q.devicePixelRatio,h*i.q.devicePixelRatio])}class Wv{constructor(a,h,v){this.id=a,this.scope=h,this.sourceCache=v,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(a){this.missingRequests.has(a.name)||this.pendingRequests.has(a.name)||this.pendingRequests.add(a.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const a=new Map;if(!this.sourceCache.loaded())return a;const h=this.sourceCache.getVisibleCoordinates();if(h.length===0)return a;const v=this.sourceCache.getSource();if(!(v instanceof zs))return a;const S=h.map(D=>this.sourceCache.getTile(D)),E=v.getImages(S,Array.from(this.pendingRequests));for(const[D,O]of E)a.set(i.I.from({name:D,iconsetId:this.id}),O),this.pendingRequests.delete(D);for(const D of this.pendingRequests)this.missingRequests.add(D);return this.pendingRequests.clear(),a}}const dl=(y,a)=>Ze(y,a&&a.filter(h=>h.identifier!=="source.canvas")),tf=i.aF(ci,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),fy=i.aF(ci,["setCenter","setZoom","setBearing","setPitch"]),cu=new Set(["background","sky","slot","custom"]),Ic={version:8,layers:[],sources:{}},py={duration:300,delay:0};class kl extends i.E{constructor(a,h={}){super(),this.map=a,this.scope=h.scope||"",this.globalId=null,this.fragments=[],this.importDepth=h.importDepth||0,this.importsCache=h.importsCache||new Map,this.resolvedImports=h.resolvedImports||new Set,this.transition=i.l({},py),this._buildingIndex=new Nv(this),this.crossTileSymbolIndex=new Uo,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=h.styleChanges||new Ct,this.dispatcher=h.dispatcher?h.dispatcher:new i.D(i.d0(),this),h.imageManager?this.imageManager=h.imageManager:(this.imageManager=new fn(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=h.glyphManager?h.glyphManager:new i.d1(a._requestManager,h.localFontFamily?i.d2.all:h.localIdeographFontFamily?i.d2.ideographs:i.d2.none,h.localFontFamily||h.localIdeographFontFamily),h.modelManager?this.modelManager=h.modelManager:(this.modelManager=new Bu(a._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=h.configOptions?h.configOptions:new Map,this._configDependentLayers=h.configDependentLayers?h.configDependentLayers:new Set,this._config=h.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:h.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=h.initialConfig,this.dispatcher.broadcast("setReferrer",i.d3());const v=this;this._rtlTextPluginCallback=kl.registerForPluginStateChange(S=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},(E,D)=>{if(i.d4(E),D&&D.every(O=>O))for(const O in v._sourceCaches){const N=v._sourceCaches[O],W=N.getSource().type;W!=="vector"&&W!=="geojson"||N.reload()}})}),this.on("data",S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const E=this.getOwnSource(S.sourceId);if(E&&E.vectorLayerIds)for(const D in this._layers){const O=this._layers[D];O.source===E.id&&this._validateLayer(O)}})}load(a){return a?(typeof a=="string"?this.loadURL(a):this.loadJSON(a),this):this}_getGlobalId(a){if(!a)return null;if(typeof a=="string"){if(i.f(a))return a;const h=i.d5(a);if(!h.startsWith("http"))try{return new URL(h,location.href).toString()}catch{return h}return h}return`json://${i.d6(JSON.stringify(a))}`}_diffStyle(a,h,v){this.globalId=this._getGlobalId(a);const S=(E,D)=>{try{D(null,this.setState(E,v))}catch(O){D(O,!1)}};if(typeof a=="string"){const E=this.map._requestManager.normalizeStyleURL(a),D=this.map._requestManager.transformRequest(E,i.R.Style);i.n(D,(O,N)=>{O?this.fire(new i.z(O)):N&&S(N,h)})}else typeof a=="object"&&S(a,h)}loadURL(a,h={}){this.fire(new i.A("dataloading",{dataType:"style"}));const v=typeof h.validate=="boolean"?h.validate:!i.f(a);this.globalId=this._getGlobalId(a),a=this.map._requestManager.normalizeStyleURL(a,h.accessToken),this.resolvedImports.add(a);const S=this.importsCache.get(a);if(S)return this._load(S,v);const E=this.map._requestManager.transformRequest(a,i.R.Style);this._request=i.n(E,(D,O)=>{if(this._request=null,D)this.fire(new i.z(D));else if(O)return this.importsCache.set(a,O),this._load(O,v)})}loadJSON(a,h={}){this.fire(new i.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(a),this._request=i.q.frame(()=>{this._request=null,this._load(a,h.validate!==!1)})}loadEmpty(){this.fire(new i.A("dataloading",{dataType:"style"})),this._load(Ic,!1)}_loadImports(a,h,v){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const S=[];for(const E of a){const D=this._createFragmentStyle(E),O=new Promise(Z=>{D.once("style.import.load",Z),D.once("error",Z)}).then(()=>this.mergeAll());if(S.push(O),this.resolvedImports.has(E.url)){D.loadEmpty();continue}const N=E.data||this.importsCache.get(E.url);N?(D.loadJSON(N,{validate:h}),this._isInternalStyle(N)&&(D.globalId=null)):E.url?D.loadURL(E.url,{validate:h}):D.loadEmpty();const W={style:D,id:E.id,config:E.config};if(v){const Z=this.fragments.findIndex(({id:te})=>te===v);this.fragments=this.fragments.slice(0,Z).concat(W).concat(this.fragments.slice(Z))}else this.fragments.push(W)}return Promise.allSettled(S)}getImportGlobalIds(a=this,h=new Set){for(const v of a.fragments)v.style.globalId&&h.add(v.style.globalId),this.getImportGlobalIds(v.style,h);return[...h.values()]}_createFragmentStyle(a){const h=this.scope?i.C(a.id,this.scope):a.id;let v;const S=this._initialConfig&&this._initialConfig[h];(a.config||S)&&(v=i.l({},a.config,S));const E=new kl(this.map,{scope:h,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:v,configOptions:this.options,colorThemeOverride:a["color-theme"],configDependentLayers:this._configDependentLayers});return E.setEventedParent(this.map,{style:E}),E}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(a){return this.isRootStyle()&&(a.fragment||!!a.schema&&a.fragment!==!1)}_load(a,h){const v=a.indoor?ef(a.schema):a.schema;if(this._isInternalStyle(a)){const D=i.l({},Ic,{imports:[{id:"basemap",data:a,url:""}]});return void this._load(D,h)}if(this.updateConfig(this._config,v),h&&dl(this,Vo(a)))return;this._loaded=!0,this.stylesheet=i.d7(a);const S=()=>{for(const W in a.sources)this.addSource(W,a.sources[W],{validate:!1,isInitialLoad:!0});if(a.iconsets)for(const W in a.iconsets)this.addIconset(W,a.iconsets[W]);a.sprite?this._loadIconset(a.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(a.glyphs);const D=Mm(this.stylesheet.layers);if(this._order=D.map(W=>W.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const W=this.stylesheet.lights[0];this.light=new ct(W.properties,W.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new ct(this.stylesheet.light)),this._layers={};for(const W of D){const Z=i.dc(W,this.scope,this._styleColorTheme.lut,this.options);Z.configDependencies.size!==0&&this._configDependentLayers.add(Z.fqid),Z.setEventedParent(this,{layer:{id:Z.id}}),this._layers[Z.id]=Z;const te=this.getOwnLayerSourceCache(Z),J=!!this.directionalLight&&this.directionalLight.shadowsEnabled();te&&Z.canCastShadows()&&J&&(te.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const O=this.stylesheet.terrain;O&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(O,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.A("data",{dataType:"style"}));const N=this.isRootStyle();a.imports?this._loadImports(a.imports,h).then(()=>{this._reloadImports(),this.fire(new i.A(N?"style.load":"style.import.load"))}).catch(W=>{this.fire(new i.z(new Error("Failed to load imports",W))),this.fire(new i.A(N?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.A(N?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const E=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(E){const D=this._evaluateColorThemeData(E);this._loadColorTheme(D).then(()=>{S()}).catch(O=>{i.w(`Couldn't load color theme from the stylesheet: ${O}`),S()})}else this._styleColorTheme.lut=null,S()}isRootStyle(){return this.importDepth===0}mergeAll(){let a,h,v,S,E,D,O,N,W,Z;const te={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(J=>{if(J.stylesheet){if(J.light!=null&&(a=J.light),J.stylesheet.lights)for(const oe of J.stylesheet.lights)oe.type==="ambient"&&J.ambientLight!=null&&(h=J.ambientLight),oe.type==="directional"&&J.directionalLight!=null&&(v=J.directionalLight);S=this._prioritizeTerrain(S,J.terrain,J.stylesheet.terrain),J.stylesheet.fog&&J.fog!=null&&(E=J.fog),J.stylesheet.snow&&J.snow!=null&&(D=J.snow),J.stylesheet.rain&&J.rain!=null&&(O=J.rain),J.stylesheet.camera!=null&&(Z=J.stylesheet.camera),J.stylesheet.projection!=null&&(N=J.stylesheet.projection),J.stylesheet.transition!=null&&(W=J.stylesheet.transition),te[J.scope]=J._styleColorTheme}}),this.light=a,this.ambientLight=h,this.directionalLight=v,this.fog=E,this.snow=D,this.rain=O,this._styleColorThemeForScope=te,S===null?delete this.terrain:this.terrain=S,this.camera=Z||{"camera-projection":"perspective"},this.projection=N||{name:"mercator"},this.transition=i.l({},py,W),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(a){const h=v=>{for(const S of v.fragments)h(S.style);a(v)};h(this)}_prioritizeTerrain(a,h,v){const S=a&&a.drapeRenderMode===0;return v===null?h&&h.drapeRenderMode===0?h:S?a:null:h!=null&&(!a||S||h&&h.drapeRenderMode===1)?h:a}mergeTerrain(){let a;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(h=>{a=this._prioritizeTerrain(a,h.terrain,h.stylesheet.terrain)}),a===null?delete this.terrain:this.terrain=a}mergeProjection(){let a;this.forEachFragmentStyle(h=>{h.stylesheet.projection!=null&&(a=h.stylesheet.projection)}),this.projection=a||{name:"mercator"}}mergeSources(){const a={},h={},v={};this.forEachFragmentStyle(S=>{for(const E in S._sourceCaches){const D=i.C(E,S.scope);a[D]=S._sourceCaches[E]}for(const E in S._otherSourceCaches){const D=i.C(E,S.scope);h[D]=S._otherSourceCaches[E]}for(const E in S._symbolSourceCaches){const D=i.C(E,S.scope);v[D]=S._symbolSourceCaches[E]}}),this._mergedSourceCaches=a,this._mergedOtherSourceCaches=h,this._mergedSymbolSourceCaches=v}mergeLayers(){const a={},h=[],v={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(E=>{for(const D of E._order){const O=E._layers[D];if(O.type==="slot"){const N=i.d8(D);if(a[N])continue;a[N]=[]}O.slot&&a[O.slot]?a[O.slot].push(O):h.push(O)}}),this._mergedOrder=[];const S=(E=[])=>{for(const D of E)if(D.type==="slot"){const O=i.d8(D.id);a[O]&&S(a[O]),this._mergedSlots.push(O)}else{const O=i.C(D.id,D.scope);this._mergedOrder.push(O),v[O]=D,D.is3D(!!this.terrain)&&(this._has3DLayers=!0),D.type==="circle"&&(this._hasCircleLayers=!0),D.type==="symbol"&&(this._hasSymbolLayers=!0),D.type==="clip"&&(this._clipLayerPresent=!0)}};S(h),this._mergedOrder.sort((E,D)=>{const O=v[E],N=v[D];return O.hasInitialOcclusionOpacityProperties?N.is3D(!!this.terrain)?1:0:O.is3D(!!this.terrain)&&N.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=v,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(a){return this.stylesheet.camera=i.l({},this.stylesheet.camera,a),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(a){return a.data?function(h,v,S){const E=i.l({},v);for(const O of Object.keys(i.a5.colorTheme))E[O]===void 0&&(E[O]=i.a5.colorTheme[O].default);const D=new i.a6(Hv,h,new Map(S));return D.setTransitionOrValue(E,S),D.untransitioned().possiblyEvaluate(new i.aa(0))}(this.scope,a,this.options).get("data"):null}_loadColorTheme(a){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const h=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((v,S)=>{const E="data:image/png;base64,";if(!a||a.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void v();let D=a;D.startsWith(E)||(D=E+D);const O=i.I.from("mapbox-reserved-lut"),N=new Image;N.src=D,N.onerror=()=>{this._styleColorTheme.lutLoading=!1,S(new Error("Failed to load image data"))},N.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==h)return void v();this._styleColorTheme.lutLoading=!1;const{width:W,height:Z,data:te}=i.q.getImageData(N);if(Z>32)return void S(new Error("The height of the image must be less than or equal to 32 pixels."));if(W!==Z*Z)return void S(new Error("The width of the image must be equal to the height squared."));this.getImage(O)&&this.removeImage(O),this.addImage(O,{data:new i.r({width:W,height:Z},te),pixelRatio:1,sdf:!1,usvg:!1,version:0});const J=this.imageManager.getImage(O,this.scope);J?(this._styleColorTheme.lut={image:J.data,data:a},v()):S(new Error("Missing LUT image."))}})}getLut(a){const h=this._styleColorThemeForScope[a];return h?h.lut:null}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(a){this._spriteRequest=function(h,v,S){let E,D,O;const N=i.q.devicePixelRatio>1?"@2x":"";let W=i.n(v.transformRequest(v.normalizeSpriteURL(h,N,".json"),i.R.SpriteJSON),(J,oe)=>{W=null,O||(O=J,E=oe,te())}),Z=i.o(v.transformRequest(v.normalizeSpriteURL(h,N,".png"),i.R.SpriteImage),(J,oe)=>{Z=null,O||(O=J,D=oe,te())});function te(){if(O)S(O);else if(E&&D){const J=i.q.getImageData(D),oe={};for(const ge in E){const{width:pe,height:ve,x:me,y:Re,sdf:Be,pixelRatio:Ue,stretchX:Ke,stretchY:Ye,content:Ge}=E[ge],Ne=new i.r({width:pe,height:ve});i.r.copy(J,Ne,{x:me,y:Re},{x:0,y:0},{width:pe,height:ve},null),oe[ge]={data:Ne,pixelRatio:Ue,sdf:Be,stretchX:Ke,stretchY:Ye,content:Ge,usvg:!1}}S(null,oe)}}return{cancel(){W&&(W.cancel(),W=null),Z&&(Z.cancel(),Z=null)}}}(a,this.map._requestManager,(h,v)=>{if(this._spriteRequest=null,h)this.fire(new i.z(h));else if(v){const S=new Map;for(const E in v)S.set(i.I.from(E),v[E]);this.addImages(S)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.A("data",{dataType:"style"}))})}addIconset(a,h){if(h.type==="sprite")return void this._loadSprite(h.url);const v=this.getOwnSourceCache(h.source);if(!v)return void this.fire(new i.z(new Error(`Source "${h.source}" as specified by iconset "${a}" does not exist and cannot be used as an iconset source`)));const S=v.getSource();if(S.type!=="raster-array")return void this.fire(new i.z(new Error(`Source "${h.source}" as specified by iconset "${a}" is not a "raster-array" source and cannot be used as an iconset source`)));S.partial=!1;const E=new Wv(a,this.scope,v);this.imageManager.addImageProvider(E,this.scope)}removeIconset(a){this.imageManager.removeImageProvider(a,this.scope)}_loadIconset(a){if(!i.f(a)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(a);const h=this.map._spriteFormat==="auto";var v,S;this._spriteRequest=(S=(E,D)=>{if(this._spriteRequest=null,E)h?this._loadSprite(a):this.fire(new i.z(E));else if(D){const O=new Map;for(const N in D)O.set(i.I.from(N),D[N]);this.addImages(O)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.A("data",{dataType:"style"}))},i.br((v=this.map._requestManager).transformRequest(v.normalizeIconsetURL(a),i.R.Iconset),(E,D)=>{if(E)return void S(E);const O={},N=i.c_(new i.bq(D));for(const W of N.icons){const Z={version:1,pixelRatio:i.q.devicePixelRatio,content:jm(W),stretchX:W.metadata?pp(W.metadata.stretch_x_areas):void 0,stretchY:W.metadata?pp(W.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:W};O[W.name]=Z}S(null,O)}))}_validateLayer(a){const h=this.getOwnSource(a.source);if(!h)return;const v=a.sourceLayer;v&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(v)===-1)&&this.fire(new i.z(new Error(`Source layer "${v}" does not exist on source "${h.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:a}of this.fragments)if(!a.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((a,h)=>{const v=this.fragments[h];return v&&v.style&&(a.data=v.style.serialize()),a})}_serializeSources(){const a={};for(const h in this._sourceCaches){const v=this._sourceCaches[h].getSource();a[v.id]||(a[v.id]=v.serialize())}return a}_serializeLayers(a){const h=[];for(const v of a){const S=this._layers[v];S&&S.type!=="custom"&&h.push(S.serialize())}return h}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(a){return a?this.order:this._mergedOrder}isLayerDraped(a){return!!this.terrain&&a.isDraped(this.getLayerSourceCache(a))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(a){const h=this.getOwnLayer(a);if(h)return h;this.fire(new i.z(new Error(`The layer '${a}' does not exist in the map's style.`)))}_checkSource(a){const h=this.getOwnSource(a);if(h)return h;this.fire(new i.z(new Error(`The source '${a}' does not exist in the map's style.`)))}precompilePrograms(a,h){const v=this.map.painter;if(v)for(let S=a.minzoom||0;S<(a.maxzoom||25.5);S++){const E=a.getProgramIds();if(E)for(const D of E){const O=a.getDefaultProgramParams(D,h.zoom,this._styleColorTheme.lut);O&&(v.style=this,this.fog&&(v._fogVisible=!0,O.overrideFog=!0,v.getOrCreateProgram(D,O)),v._fogVisible=!1,O.overrideFog=!1,v.getOrCreateProgram(D,O),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(O.overrideRtt=!0,v.getOrCreateProgram(D,O)))}}}update(a){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a);const h=this.calculateLightsBrightness();a.brightness=h||0,h!==this._brightness&&(this._brightness=h,this.dispatcher.broadcast("setBrightness",h));const v=this._changes.isDirty();let S=!1;if(this._changes.isDirty()){const O=this._changes.getLayerUpdatesByScope();for(const N in O){const{updatedIds:W,removedIds:Z}=O[N];(W||Z)&&(this._updateWorkerLayers(N,W,Z),S=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(a),this.light&&this.light.updateTransitions(a),this.ambientLight&&this.ambientLight.updateTransitions(a),this.directionalLight&&this.directionalLight.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this.snow&&this.snow.updateTransitions(a),this.rain&&this.rain.updateTransitions(a),this._changes.reset()}const E={};for(const O in this._mergedSourceCaches){const N=this._mergedSourceCaches[O];E[O]=N.used,N.used=!1,N.tileCoverLift=0}for(const O of this._mergedOrder){const N=this._mergedLayers[O];if(N.recalculate(a,this._availableImages),!N.isHidden(a.zoom)){const W=this.getLayerSourceCache(N);W&&(W.used=!0,W.tileCoverLift=Math.max(W.tileCoverLift,N.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(N,a)}):this.precompilePrograms(N,a))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&S&&this.mergeLayers();const D=this.imageManager.getPendingImageProviders();for(const O of D)O.sourceCache.used=!0;for(const O in E){const N=this._mergedSourceCaches[O];E[O]!==N.used&&N.getSource().fire(new i.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:N.getSource().id}))}this.light&&this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.snow&&this.snow.recalculate(a),this.rain&&this.rain.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),v&&this.fire(new i.A("data",{dataType:"style"}))}updateImageProviders(){const a=this.imageManager.getPendingImageProviders();for(const h of a){const v=h.resolvePendingRequests(),S=this.getFragmentStyle(h.scope);S&&S.addImages(v)}}_updateTilesForChangedImages(){const a={};for(const h in this._mergedSourceCaches){const v=this._mergedSourceCaches[h].getSource().scope;a[v]=a[v]||this._changes.getUpdatedImages(v),a[v].length!==0&&this._mergedSourceCaches[h].reloadTilesForDependencies(["icons","patterns"],a[v])}for(const h in a)this._changes.resetUpdatedImages(h)}_updateWorkerLayers(a,h,v){const S=this.getFragmentStyle(a);S&&this.dispatcher.broadcast("updateLayers",{layers:h?S._serializeLayers(h):[],scope:a,removedIds:v||[],options:S.options})}setState(a,h){if(this._checkLoaded(),dl(this,Vo(a)))return!1;(a=i.d7(a)).layers=Mm(a.layers);const v=function(D,O){if(!D)return[{command:ci.setStyle,args:[O]}];let N=[];try{if(!i.bv(D.version,O.version))return[{command:ci.setStyle,args:[O]}];if(i.bv(D.center,O.center)||N.push({command:ci.setCenter,args:[O.center]}),i.bv(D.zoom,O.zoom)||N.push({command:ci.setZoom,args:[O.zoom]}),i.bv(D.bearing,O.bearing)||N.push({command:ci.setBearing,args:[O.bearing]}),i.bv(D.pitch,O.pitch)||N.push({command:ci.setPitch,args:[O.pitch]}),i.bv(D.sprite,O.sprite)||N.push({command:ci.setSprite,args:[O.sprite]}),i.bv(D.glyphs,O.glyphs)||N.push({command:ci.setGlyphs,args:[O.glyphs]}),i.bv(D.imports,O.imports)||function(oe=[],ge=[],pe){ge=ge||[];const ve=(oe=oe||[]).map(Rc),me=ge.map(Rc),Re=oe.reduce($h,{}),Be=ge.reduce($h,{}),Ue=ve.slice();let Ke,Ye,Ge,Ne;for(Ke=0,Ye=0;Ke<ve.length;Ke++)Ge=ve[Ke],Be.hasOwnProperty(Ge)?Ye++:(pe.push({command:ci.removeImport,args:[Ge]}),Ue.splice(Ue.indexOf(Ge,Ye),1));for(Ke=0,Ye=0;Ke<me.length;Ke++)Ge=me[me.length-1-Ke],Ue[Ue.length-1-Ke]!==Ge&&(Re.hasOwnProperty(Ge)?(pe.push({command:ci.removeImport,args:[Ge]}),Ue.splice(Ue.lastIndexOf(Ge,Ue.length-Ye),1)):Ye++,Ne=Ue[Ue.length-Ke],pe.push({command:ci.addImport,args:[Be[Ge],Ne]}),Ue.splice(Ue.length-Ke,0,Ge));for(const Je of ge){const nt=Re[Je.id];nt&&!i.bv(nt,Je)&&pe.push({command:ci.updateImport,args:[Je.id,Je]})}}(D.imports,O.imports,N),i.bv(D.transition,O.transition)||N.push({command:ci.setTransition,args:[O.transition]}),i.bv(D.light,O.light)||N.push({command:ci.setLight,args:[O.light]}),i.bv(D.fog,O.fog)||N.push({command:ci.setFog,args:[O.fog]}),i.bv(D.snow,O.snow)||N.push({command:ci.setSnow,args:[O.snow]}),i.bv(D.rain,O.rain)||N.push({command:ci.setRain,args:[O.rain]}),i.bv(D.projection,O.projection)||N.push({command:ci.setProjection,args:[O.projection]}),i.bv(D.lights,O.lights)||N.push({command:ci.setLights,args:[O.lights]}),i.bv(D.camera,O.camera)||N.push({command:ci.setCamera,args:[O.camera]}),i.bv(D.iconsets,O.iconsets)||function(oe,ge,pe){let ve;for(ve in ge=ge||{},oe=oe||{})oe.hasOwnProperty(ve)&&(ge.hasOwnProperty(ve)||pe.push({command:ci.removeIconset,args:[ve]}));for(ve in ge){if(!ge.hasOwnProperty(ve))continue;const me=ge[ve];oe.hasOwnProperty(ve)?i.bv(oe[ve],me)||(pe.push({command:ci.removeIconset,args:[ve]}),pe.push({command:ci.addIconset,args:[ve,me]})):pe.push({command:ci.addIconset,args:[ve,me]})}}(D.iconsets,O.iconsets,N),!i.bv(D["color-theme"],O["color-theme"]))return[{command:ci.setStyle,args:[O]}];const W={},Z=[];(function(oe,ge,pe,ve){let me;for(me in ge=ge||{},oe=oe||{})oe.hasOwnProperty(me)&&(ge.hasOwnProperty(me)||Ad(me,pe,ve));for(me in ge){if(!ge.hasOwnProperty(me))continue;const Re=ge[me];oe.hasOwnProperty(me)?i.bv(oe[me],Re)||(oe[me].type==="geojson"&&Re.type==="geojson"&&Ou(oe,ge,me)?pe.push({command:ci.setGeoJSONSourceData,args:[me,Re.data]}):Am(me,ge,pe,ve)):ll(me,ge,pe)}})(D.sources,O.sources,Z,W);const te=[];D.layers&&D.layers.forEach(oe=>{oe.source&&W[oe.source]?N.push({command:ci.removeLayer,args:[oe.id]}):te.push(oe)});let J=D.terrain;J&&W[J.source]&&(N.push({command:ci.setTerrain,args:[void 0]}),J=void 0),N=N.concat(Z),i.bv(J,O.terrain)||N.push({command:ci.setTerrain,args:[O.terrain]}),function(oe,ge,pe){ge=ge||[];const ve=(oe=oe||[]).map(Rc),me=ge.map(Rc),Re=oe.reduce($h,{}),Be=ge.reduce($h,{}),Ue=ve.slice(),Ke=Object.create(null);let Ye,Ge,Ne,Je,nt,bt,mt;for(Ye=0,Ge=0;Ye<ve.length;Ye++)Ne=ve[Ye],Be.hasOwnProperty(Ne)?Ge++:(pe.push({command:ci.removeLayer,args:[Ne]}),Ue.splice(Ue.indexOf(Ne,Ge),1));for(Ye=0,Ge=0;Ye<me.length;Ye++)Ne=me[me.length-1-Ye],Ue[Ue.length-1-Ye]!==Ne&&(Re.hasOwnProperty(Ne)?(pe.push({command:ci.removeLayer,args:[Ne]}),Ue.splice(Ue.lastIndexOf(Ne,Ue.length-Ge),1)):Ge++,bt=Ue[Ue.length-Ye],pe.push({command:ci.addLayer,args:[Be[Ne],bt]}),Ue.splice(Ue.length-Ye,0,Ne),Ke[Ne]=!0);for(Ye=0;Ye<me.length;Ye++)if(Ne=me[Ye],Je=Re[Ne],nt=Be[Ne],!Ke[Ne]&&!i.bv(Je,nt))if(i.bv(Je.source,nt.source)&&i.bv(Je["source-layer"],nt["source-layer"])&&i.bv(Je.type,nt.type)){for(mt in Lu(Je.layout,nt.layout,pe,Ne,null,ci.setLayoutProperty),Lu(Je.paint,nt.paint,pe,Ne,null,ci.setPaintProperty),i.bv(Je.slot,nt.slot)||pe.push({command:ci.setSlot,args:[Ne,nt.slot]}),i.bv(Je.filter,nt.filter)||pe.push({command:ci.setFilter,args:[Ne,nt.filter]}),i.bv(Je.minzoom,nt.minzoom)&&i.bv(Je.maxzoom,nt.maxzoom)||pe.push({command:ci.setLayerZoomRange,args:[Ne,nt.minzoom,nt.maxzoom]}),Je)Je.hasOwnProperty(mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&mt!=="slot"&&(mt.indexOf("paint.")===0?Lu(Je[mt],nt[mt],pe,Ne,mt.slice(6),ci.setPaintProperty):i.bv(Je[mt],nt[mt])||pe.push({command:ci.setLayerProperty,args:[Ne,mt,nt[mt]]}));for(mt in nt)nt.hasOwnProperty(mt)&&!Je.hasOwnProperty(mt)&&mt!=="layout"&&mt!=="paint"&&mt!=="filter"&&mt!=="metadata"&&mt!=="minzoom"&&mt!=="maxzoom"&&mt!=="slot"&&(mt.indexOf("paint.")===0?Lu(Je[mt],nt[mt],pe,Ne,mt.slice(6),ci.setPaintProperty):i.bv(Je[mt],nt[mt])||pe.push({command:ci.setLayerProperty,args:[Ne,mt,nt[mt]]}))}else pe.push({command:ci.removeLayer,args:[Ne]}),bt=Ue[Ue.lastIndexOf(Ne)+1],pe.push({command:ci.addLayer,args:[nt,bt]})}(te,O.layers,N)}catch(W){console.warn("Unable to compute style diff:",W),N=[{command:ci.setStyle,args:[O]}]}return N}(this.serialize(),a).filter(D=>!(D.command in fy));if(v.length===0)return!1;const S=v.filter(D=>!(D.command in tf));if(S.length>0)throw new Error(`Unimplemented: ${S.map(D=>D.command).join(", ")}.`);const E=[];return v.forEach(D=>{E.push(this[D.command](...D.args))}),h&&Promise.all(E).then(h).catch(h),this.stylesheet=a,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(a){for(const[h,v]of a.entries()){if(this.getImage(h))return this.fire(new i.z(new Error(`An image with the name "${h.name}" already exists.`)));this.imageManager.addImage(h,this.scope,v),this._changes.updateImage(h,this.scope)}return this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})),this}addImage(a,h){return this.getImage(a)?this.fire(new i.z(new Error(`An image with the name "${a.name}" already exists.`))):(this.imageManager.addImage(a,this.scope,h),this._changes.updateImage(a,this.scope),this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})),this)}updateImage(a,h,v=!1){this.imageManager.updateImage(a,this.scope,h),v&&(this._changes.updateImage(a,this.scope),this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})))}getImage(a){return this.imageManager.getImage(a,this.scope)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a,this.scope),this._changes.updateImage(a,this.scope),this._updateWorkerImages(),this.fire(new i.A("data",{dataType:"style"})),this):this.fire(new i.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(a){return this.modelManager.addModelURLs(a,this.scope),this._updateWorkerModels(),this.fire(new i.A("data",{dataType:"style"})),this}addModel(a,h,v={}){return this._checkLoaded(),this._validate($e,`models.${a}`,h,null,v)||(this.modelManager.addModel(a,h,this.scope),this.fire(new i.A("data",{dataType:"style"}))),this}hasModel(a){return this.modelManager.hasModel(a,this.scope)}removeModel(a){return this.hasModel(a)?(this.modelManager.removeModel(a,this.scope),this.fire(new i.A("data",{dataType:"style"})),this):this.fire(new i.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(a,h,v={}){if(this._checkLoaded(),this.getOwnSource(a)!==void 0)throw new Error(`There is already a source with ID "${a}".`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(zo,`sources.${a}`,h,null,v))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const S=sp(a,h,this.dispatcher,this);S.scope=this.scope,S.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(S.id),source:S.serialize(),sourceId:S.id}));const E=D=>{const O=(D?"symbol:":"other:")+S.id,N=i.C(O,this.scope),W=this._sourceCaches[O]=new ta(N,S,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[S.id]=W,W.onAdd(this.map)};E(!1),h.type!=="vector"&&h.type!=="geojson"||E(!0),S.onAdd&&S.onAdd(this.map),v.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(a){this._checkLoaded();const h=this.getOwnSource(a);if(!h)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===a)return this.fire(new i.z(new Error(`Source "${a}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===a)return this.fire(new i.z(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const S=Object.entries(this.stylesheet.iconsets).find(([E,D])=>D.type==="source"&&D.source===a);if(S)return this.fire(new i.z(new Error(`Source "${a}" cannot be removed while iconset "${S[0]}" is using it.`)))}const v=this.getOwnSourceCaches(a);for(const S of v){const E=i.d8(S.id);delete this._sourceCaches[E],this._changes.discardSourceCacheUpdate(S.id),S.fire(new i.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles()}return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],this.mergeSources(),h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(a,h){this._checkLoaded(),this.getOwnSource(a).setData(h),this._changes.setDirty()}getOwnSource(a){const h=this.getOwnSourceCache(a);return h&&h.getSource()}getOwnSources(){const a=[];for(const h in this._otherSourceCaches){const v=this.getOwnSourceCache(h);v&&a.push(v.getSource())}return a}areTilesLoaded(){const a=this._mergedSourceCaches;for(const h in a){const v=a[h]._tiles;for(const S in v){const E=v[S];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}setLights(a){if(this._checkLoaded(),!a)return delete this.ambientLight,void delete this.directionalLight;const h=this._getTransitionParameters();for(const S of a){if(this._validate(ma,"lights",S))return;switch(S.type){case"ambient":if(this.ambientLight){const E=this.ambientLight;E.set(S),E.updateTransitions(h)}else this.ambientLight=new Xi(S,ui||(ui=new i.a7({color:new i.a8(i.a5.properties_light_ambient.color),"color-use-theme":new i.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a8(i.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const E=this.directionalLight;E.set(S),E.updateTransitions(h)}else this.directionalLight=new Xi(S,ti||(ti=new i.a7({direction:new i.an(i.a5.properties_light_directional.direction),color:new i.a8(i.a5.properties_light_directional.color),"color-use-theme":new i.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a8(i.a5.properties_light_directional.intensity),"cast-shadows":new i.a8(i.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new i.a8(i.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new i.a8(i.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const v=new i.aa(this.z||0,h);this.ambientLight&&this.ambientLight.recalculate(v),this.directionalLight&&this.directionalLight.recalculate(v),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const a=this.directionalLight,h=this.ambientLight;if(!a||!h)return;const v=J=>.2126*(J[0]<=.03928?J[0]/12.92:Math.pow((J[0]+.055)/1.055,2.4))+.7152*(J[1]<=.03928?J[1]/12.92:Math.pow((J[1]+.055)/1.055,2.4))+.0722*(J[2]<=.03928?J[2]/12.92:Math.pow((J[2]+.055)/1.055,2.4)),S=a.properties.get("color").toRenderColor(null).toArray01(),E=a.properties.get("intensity"),D=a.properties.get("direction"),O=1-i.cR(D.x,D.y,D.z)[2]/90,N=v(S)*E*O,W=h.properties.get("color").toRenderColor(null).toArray01(),Z=h.properties.get("intensity"),te=v(W)*Z;return Number(((N+te)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const a=[];return this.directionalLight&&a.push(this.directionalLight.get()),this.ambientLight&&a.push(this.ambientLight.get()),a}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(a){if(a==null||a===""&&this.isRootStyle())return this;if(i.d9(a)){const h=i.da(a),v=this.fragments.find(({id:E})=>E===h);if(!v)return;const S=i.d8(a);return v.style.getFragmentStyle(S)}{const h=this.fragments.find(({id:v})=>v===a);return h?h.style:void 0}}setFeaturesetSelectors(a){if(!a)return;const h={},v=(S,E="")=>`${S}::${E}`;this._featuresetSelectors={};for(const S in a){const E=this._featuresetSelectors[S]=[];for(const D of a[S].selectors){if(D.featureNamespace){const N=this.getOwnLayer(D.layer);if(!N){i.w(`Layer is undefined for selector: ${D.layer}`);continue}const W=v(N.source,N.sourceLayer);if(W in h&&h[W]!==D.featureNamespace){i.w(`"featureNamespace ${D.featureNamespace} of featureset ${S}'s selector is not associated to the same source, skip this selector`);continue}h[W]=D.featureNamespace}let O;if(D.properties)for(const N in D.properties){const W=i.X(D.properties[N]);W.result==="success"&&(O=O||{},O[N]=W.value)}E.push({layerId:D.layer,namespace:D.featureNamespace,properties:O,uniqueFeatureID:D._uniqueFeatureID})}}}getFeaturesetDescriptors(a){const h=this.getFragmentStyle(a);if(!h||!h.stylesheet.featuresets)return[];const v=[];for(const S in h.stylesheet.featuresets)v.push({featuresetId:S,importId:h.scope?h.scope:void 0});return v}getFeaturesetLayers(a,h){const v=this.getFragmentStyle(h),S=v.stylesheet.featuresets;if(!S||!S[a])return this.fire(new i.z(new Error(`The featureset '${a}' does not exist in the map's style and cannot be queried.`))),[];const E=[];for(const D of S[a].selectors){const O=v.getOwnLayer(D.layer);O&&E.push(O)}return E}getConfigProperty(a,h){const v=this.getFragmentStyle(a);if(!v)return null;const S=i.C(h,v.scope),E=v.options.get(S),D=E?E.value||E.default:null;return D?D.serialize():null}setConfigProperty(a,h,v){const S=this.getFragmentStyle(a);if(!S)return;const E=S.stylesheet.indoor?ef(S.stylesheet.schema):S.stylesheet.schema;if(!E||!E[h])return;const D=i.X(v);if(D.result!=="success")return void dl(this,D.value);const O=D.value.expression,N=i.C(h,S.scope),W=S.options.get(N);if(!W)return;let Z;const{minValue:te,maxValue:J,stepValue:oe,type:ge,values:pe}=E[h],ve=i.X(E[h].default);ve.result==="success"&&(Z=ve.value.expression),Z?(this.options.set(N,Object.assign({},W,{value:O,default:Z,minValue:te,maxValue:J,stepValue:oe,type:ge,values:pe})),this.updateConfigDependencies(h)):this.fire(new i.z(new Error(`No schema defined for the config option "${h}" in the "${a}" fragment.`)))}getConfig(a){const h=this.getFragmentStyle(a);if(!h)return null;const v=h.stylesheet.schema;if(!v)return null;const S={};for(const E in v){const D=i.C(E,h.scope),O=h.options.get(D),N=O?O.value||O.default:null;S[E]=N?N.serialize():null}return S}setConfig(a,h){const v=this.getFragmentStyle(a);v&&(v.updateConfig(h,v.stylesheet.schema),this.updateConfigDependencies())}getSchema(a){const h=this.getFragmentStyle(a);return h?h.stylesheet.schema:null}setSchema(a,h){const v=this.getFragmentStyle(a);v&&(v.stylesheet.schema=h,v.updateConfig(v._config,h),this.updateConfigDependencies())}updateConfig(a,h){if(this._config=a,a||h)if(h)for(const v in h){let S,E;const D=i.X(h[v].default);if(D.result==="success"&&(S=D.value.expression),a&&a[v]!==void 0){const J=i.X(a[v]);J.result==="success"&&(E=J.value.expression)}const{minValue:O,maxValue:N,stepValue:W,type:Z,values:te}=h[v];if(S){const J=i.C(v,this.scope);this.options.set(J,{default:S,value:E,minValue:O,maxValue:N,stepValue:W,type:Z,values:te})}else this.fire(new i.z(new Error(`No schema defined for config option "${v}".`)))}else this.fire(new i.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(a){for(const h of this._configDependentLayers){const v=this.getLayer(h);if(v){if(a&&!v.configDependencies.has(a))continue;v.possiblyEvaluateVisibility(),this._updateLayer(v)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(h=>{const v=h._styleColorTheme.colorThemeOverride?h._styleColorTheme.colorThemeOverride:h._styleColorTheme.colorTheme;if(v){const S=h._evaluateColorThemeData(v);(!h._styleColorTheme.lut&&S!==""||h._styleColorTheme.lut&&S!==h._styleColorTheme.lut.data)&&h.setColorTheme(v)}}),this._changes.setDirty()}addLayer(a,h,v={}){this._checkLoaded();const S=a.id;if(this._layers[S])return void this.fire(new i.z(new Error(`Layer with id "${S}" already exists on this map`)));let E;if(a.type==="custom"){if(dl(this,i.db(a)))return;E=i.dc(a,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof a.source=="object"&&(this.addSource(S,a.source),a=i.d7(a),a=i.l(a,{source:S})),this._validate(ie,`layers.${S}`,a,{arrayIndex:-1},v))return;E=i.dc(a,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(E),E.setEventedParent(this,{layer:{id:S}})}E.configDependencies.size!==0&&this._configDependentLayers.add(E.fqid);let D=this._order.length;if(h){const Z=this._order.indexOf(h);if(Z===-1)return void this.fire(new i.z(new Error(`Layer with id "${h}" does not exist on this map.`)));E.slot===this._layers[h].slot?D=Z:i.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(D,0,S),this._layerOrderChanged=!0,this._layers[S]=E;const O=this.getOwnLayerSourceCache(E),N=!!this.directionalLight&&this.directionalLight.shadowsEnabled();O&&E.canCastShadows()&&N&&(O.castsShadows=!0);const W=this._changes.getRemovedLayer(E);if(W&&E.source&&O&&E.type!=="custom"){this._changes.discardLayerRemoval(E);const Z=i.C(E.source,E.scope);W.type!==E.type?this._changes.updateSourceCache(Z,"clear"):(this._changes.updateSourceCache(Z,"reload"),O.pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map),E.scope=this.scope,this.mergeLayers()}moveLayer(a,h){this._checkLoaded();const v=this._checkLayer(a);if(!v||a===h)return;const S=this._order.indexOf(a);this._order.splice(S,1);let E=this._order.length;if(h){const D=this._order.indexOf(h);if(D===-1)return void this.fire(new i.z(new Error(`Layer with id "${h}" does not exist on this map.`)));v.slot===this._layers[h].slot?E=D:i.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,a),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(a){this._checkLoaded();const h=this._checkLayer(a);if(!h)return;h.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),delete this._layers[a],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(h.fqid),this._changes.removeLayer(h);const S=this.getOwnLayerSourceCache(h);if(S&&S.castsShadows){let E=!1;for(const D in this._layers)if(this._layers[D].source===h.source&&this._layers[D].canCastShadows()){E=!0;break}S.castsShadows=E}h.onRemove&&h.onRemove(this.map),this.mergeLayers()}getOwnLayer(a){return this._layers[a]}hasLayer(a){return a in this._mergedLayers}hasLayerType(a){for(const h in this._layers)if(this._layers[h].type===a)return!0;return!1}setLayerZoomRange(a,h,v){this._checkLoaded();const S=this._checkLayer(a);S&&(S.minzoom===h&&S.maxzoom===v||(h!=null&&(S.minzoom=h),v!=null&&(S.maxzoom=v),this._updateLayer(S)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(a,h){this._checkLoaded();const v=this._checkLayer(a);v&&v.slot!==h&&(v.slot=h,this._updateLayer(v))}setFilter(a,h,v={}){this._checkLoaded();const S=this._checkLayer(a);if(S&&!i.bv(S.filter,h))return h==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(le,`layers.${S.id}.filter`,h,{layerType:S.type},v)||(S.filter=i.d7(h),this._updateLayer(S)))}getFilter(a){const h=this._checkLayer(a);if(h)return i.d7(h.filter)}setLayoutProperty(a,h,v,S={}){this._checkLoaded();const E=this._checkLayer(a);if(E&&!i.bv(E.getLayoutProperty(h),v)){if(v!=null&&(!S||S.validate!==!1)&&dl(E,ze.call(Vo,{key:`layers.${a}.layout.${h}`,layerType:E.type,objectKey:h,value:v,styleSpec:i.a5,style:{glyphs:!0,sprite:!0}})))return;E.setLayoutProperty(h,v),E.configDependencies.size!==0&&this._configDependentLayers.add(E.fqid),this._updateLayer(E)}}getLayoutProperty(a,h){const v=this._checkLayer(a);if(v)return v.getLayoutProperty(h)}setPaintProperty(a,h,v,S={}){this._checkLoaded();const E=this._checkLayer(a);if(!E||i.bv(E.getPaintProperty(h),v)||v!=null&&(!S||S.validate!==!1)&&dl(E,Te.call(Vo,{key:`layers.${a}.paint.${h}`,layerType:E.type,objectKey:h,value:v,styleSpec:i.a5})))return;const D=E.setPaintProperty(h,v);E.configDependencies.size!==0&&this._configDependentLayers.add(E.fqid),D&&this._updateLayer(E),this._changes.updatePaintProperties(E)}getPaintProperty(a,h){const v=this._checkLayer(a);if(v)return v.getPaintProperty(h)}setFeatureState(a,h){if(this._checkLoaded(),"target"in a){if("featuresetId"in a.target){const{featuresetId:N,importId:W}=a.target,Z=this.getFragmentStyle(W),te=Z.getFeaturesetLayers(N);for(const{source:J,sourceLayer:oe}of te)Z.setFeatureState({id:a.id,source:J,sourceLayer:oe},h)}else if("layerId"in a.target){const{layerId:N}=a.target,W=this.getLayer(N);this.setFeatureState({id:a.id,source:W.source,sourceLayer:W.sourceLayer},h)}return}const v=a.source,S=a.sourceLayer,E=this._checkSource(v);if(!E)return;const D=E.type;if(D==="geojson"&&S)return void this.fire(new i.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(D==="vector"&&!S)return void this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new i.z(new Error("The feature id parameter must be provided.")));const O=this.getOwnSourceCaches(v);for(const N of O)N.setFeatureState(S,a.id,h)}removeFeatureState(a,h){if(this._checkLoaded(),"target"in a){if("featuresetId"in a.target){const{featuresetId:N,importId:W}=a.target,Z=this.getFragmentStyle(W),te=Z.getFeaturesetLayers(N);for(const{source:J,sourceLayer:oe}of te)Z.removeFeatureState({id:a.id,source:J,sourceLayer:oe},h)}else if("layerId"in a.target){const{layerId:N}=a.target,W=this.getLayer(N);this.removeFeatureState({id:a.id,source:W.source,sourceLayer:W.sourceLayer},h)}return}const v=a.source,S=this._checkSource(v);if(!S)return;const E=S.type,D=E==="vector"?a.sourceLayer:void 0;if(E==="vector"&&!D)return void this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new i.z(new Error("A feature id is required to remove its specific state property.")));const O=this.getOwnSourceCaches(v);for(const N of O)N.removeFeatureState(D,a.id,h)}getFeatureState(a){if(this._checkLoaded(),"target"in a){let E;if("featuresetId"in a.target){const{featuresetId:D,importId:O}=a.target,N=this.getFragmentStyle(O),W=N.getFeaturesetLayers(D);for(const{source:Z,sourceLayer:te}of W){const J=N.getFeatureState({id:a.id,source:Z,sourceLayer:te});if(J&&!E)E=J;else if(!i.bv(E,J))return void this.fire(new i.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in a.target){const{layerId:D}=a.target,O=this.getLayer(D);E=this.getFeatureState({id:a.id,source:O.source,sourceLayer:O.sourceLayer})}return E}const h=a.source,v=a.sourceLayer,S=this._checkSource(h);if(S){if(S.type!=="vector"||v)return a.id===void 0&&this.fire(new i.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(h)[0].getFeatureState(v,a.id);this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(a){return this.stylesheet.transition=i.l({},this.stylesheet.transition,a),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const a=this.getTerrain(),h=a&&this.terrain&&this.terrain.scope===this.scope?a:this.stylesheet.terrain;return i.dd({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:h,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},v=>v!==void 0)}_updateFilteredLayers(a){for(const h of Object.values(this._mergedLayers))a(h)&&this._updateLayer(h)}_updateLayer(a){this._changes.updateLayer(a);const h=this.getLayerSourceCache(a),v=i.C(a.source,a.scope),S=this._changes.getUpdatedSourceCaches();a.source&&!S[v]&&h&&h.getSource().type!=="raster"&&(this._changes.updateSourceCache(v,"reload"),h.pause()),a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const h=O=>this._mergedLayers[O].is3D(!!this.terrain),v=this.order,S={},E=[];for(let O=v.length-1;O>=0;O--){const N=v[O];if(h(N)){S[N]=O;for(const W of a){const Z=W[N];if(Z)for(const te of Z)E.push(te)}}}E.sort((O,N)=>N.intersectionZ-O.intersectionZ);const D=[];for(let O=v.length-1;O>=0;O--){const N=v[O];if(h(N))for(let W=E.length-1;W>=0;W--){const Z=E[W].feature;if(Z.layer&&S[Z.layer.id]<O)break;D.push(Z),E.pop()}else for(const W of a){const Z=W[N];if(Z)for(const te of Z)D.push(te.feature)}}return D}queryRenderedFeatures(a,h,v){let S;h&&!Array.isArray(h)&&h.filter&&(this._validate(le,"queryRenderedFeatures.filter",h.filter,null,h),S=i.b3(h.filter));const E={},D=Z=>{if(cu.has(Z.type))return;const te=this.getOwnLayerSourceCache(Z),J=E[te.id]=E[te.id]||{sourceCache:te,layers:{},has3DLayers:!1};Z.is3D(!!this.terrain)&&(J.has3DLayers=!0),J.layers[Z.fqid]=J.layers[Z.fqid]||{styleLayer:Z,targets:[]},J.layers[Z.fqid].targets.push({filter:S})};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new i.z(new Error("parameters.layers must be an Array."))),[];for(const Z of h.layers){const te=this._layers[Z];if(!te)return this.fire(new i.z(new Error(`The layer '${Z}' does not exist in the map's style and cannot be queried for features.`))),[];D(te)}}else for(const Z in this._layers)D(this._layers[Z]);const O=this._queryRenderedFeatures(a,E,v),N=this._flattenAndSortRenderedFeatures(O),W=[];for(const Z of N)i.de(Z.layer.id)===this.scope&&W.push(Z);return W}queryRenderedFeatureset(a,h,v){let S;h&&!Array.isArray(h)&&h.filter&&(this._validate(le,"queryRenderedFeatures.filter",h.filter,null,h),S=i.b3(h.filter));const E="mock",D=[];if(h&&h.target)D.push(Object.assign({},h,{targetId:E,filter:S}));else{const Z=this.getFeaturesetDescriptors();for(const te of Z)D.push({targetId:E,filter:S,target:te});for(const{style:te}of this.fragments){const J=te.getFeaturesetDescriptors();for(const oe of J)D.push({targetId:E,filter:S,target:oe})}}const O=this.queryRenderedTargets(a,D,v),N=[],W=new Set;for(const Z of O)for(const te of Z.variants[E])ap(te,Z,W)||N.push(new i.df(Z,te));return N}queryRenderedTargets(a,h,v){const S={},E=(O,N,W,Z)=>{const te=S[N.id]=S[N.id]||{sourceCache:N,layers:{},has3DLayers:!1};if(te.layers[O.fqid]=te.layers[O.fqid]||{styleLayer:O,targets:[]},O.is3D(!!this.terrain)&&(te.has3DLayers=!0),!Z)return W.uniqueFeatureID=!1,void te.layers[O.fqid].targets.push(W);te.layers[O.fqid].targets.push(Object.assign({},W,{namespace:Z.namespace,properties:Z.properties,uniqueFeatureID:Z.uniqueFeatureID}))};for(const O of h)if("featuresetId"in O.target){const{featuresetId:N,importId:W}=O.target,Z=this.getFragmentStyle(W);if(!Z||!Z._featuresetSelectors)continue;const te=Z._featuresetSelectors[N];if(!te){this.fire(new i.z(new Error(`The featureset '${N}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const J of te){const oe=Z.getOwnLayer(J.layerId);oe&&!cu.has(oe.type)&&E(oe,Z.getOwnLayerSourceCache(oe),O,J)}}else if("layerId"in O.target){const{layerId:N}=O.target,W=this.getLayer(N);if(!W||cu.has(W.type))continue;E(W,this.getLayerSourceCache(W),O)}const D=this._queryRenderedFeatures(a,S,v);return this._flattenAndSortRenderedFeatures(D)}_queryRenderedFeatures(a,h,v){const S=[],E=!!this.map._showQueryGeometry,D=Mo.createFromScreenPoints(a,v);for(const O in h){const N=ou(D,h[O],this._availableImages,v,E);Object.keys(N).length&&S.push(N)}if(this.placement)for(const O in h){if(!h[O].sourceCache._onlySymbols)continue;const N=Em(D.screenGeometry,h[O],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(N).length&&S.push(N)}return S}querySourceFeatures(a,h){const v=h&&h.filter;v&&this._validate(le,"querySourceFeatures.filter",v,null,h);let S=[];const E=this.getOwnSourceCaches(a);for(const D of E)S=S.concat(sl(D,h));return S}addSourceType(a,h,v){return kl.getSourceType(a)?v(new Error(`A source type called "${a}" already exists.`)):(kl.setSourceType(a,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:h.workerSourceURL},v):v(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(a,h,v={}){this._checkLoaded();const S=this.light.getLight();let E=!1;for(const O in a)if(!i.bv(a[O],S[O])){E=!0;break}if(!E)return;const D=this._getTransitionParameters();this.light.setLight(a,h,v),this.light.updateTransitions(D)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(a,h=1){if(this._checkLoaded(),!a)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),h===0&&delete this.terrain,a===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let v=a;const S=a.source==null;if(h===1){if(this.disableElevatedTerrain)return;if(typeof v.source=="object"){const O="terrain-dem-src";this.addSource(O,v.source),v=i.d7(v),v=i.l(v,{source:O})}const E=i.l({},v),D={};if(this.terrain&&S){E.source=this.terrain.get().source;const O=this.terrain?this.getFragmentStyle(this.terrain.scope):null;O&&(D.style=O.serialize())}if(this._validate(mn,"terrain",E,D))return}if(!this.terrain||this.terrain.scope!==this.scope&&!S||this.terrain&&h!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,h),this.fire(new i.A("data",{dataType:"style"}))}else{const E=this.terrain,D=E.get();for(const O of Object.keys(i.a5.terrain))!v.hasOwnProperty(O)&&i.a5.terrain[O].default&&(v[O]=i.a5.terrain[O].default);for(const O in a)if(!i.bv(a[O],D[O])){E.set(a,this.options),this.stylesheet.terrain=a;const N=this._getTransitionParameters({duration:0});E.updateTransitions(N),this.fire(new i.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const h=this.fog=new kr(a,this.map.transform,this.scope,this.options);this.stylesheet.fog=h.get();const v=this._getTransitionParameters({duration:0});h.updateTransitions(v)}_createSnow(a){const h=this.snow=new Ti(a,this.map.transform,this.scope,this.options);this.stylesheet.snow=h.get();const v=this._getTransitionParameters({duration:0});h.updateTransitions(v)}_createRain(a){const h=this.rain=new ji(a,this.map.transform,this.scope,this.options);this.stylesheet.rain=h.get();const v=this._getTransitionParameters({duration:0});h.updateTransitions(v)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog;if(!i.bv(h.get(),a)){h.set(a,this.options),this.stylesheet.fog=h.get();const v=this._getTransitionParameters({duration:0});h.updateTransitions(v)}}else this._createFog(a);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(a){if(this._checkLoaded(),!a)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const h=this.snow;if(!i.bv(h.get(),a)){h.set(a,this.options),this.stylesheet.snow=h.get();const v=this._getTransitionParameters({duration:0});h.updateTransitions(v)}}else this._createSnow(a);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(a){if(this._checkLoaded(),!a)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const h=this.rain;if(!i.bv(h.get(),a)){h.set(a,this.options),this.stylesheet.rain=h.get();const v=this._getTransitionParameters({duration:0});h.updateTransitions(v)}}else this._createRain(a);this._markersNeedUpdate=!0}_reloadColorTheme(){const a=()=>{for(const S in this._layers)this._layers[S].lut=this._styleColorTheme.lut;for(const S in this._sourceCaches)this._sourceCaches[S].clearTiles()},h=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!h)return this._styleColorTheme.lut=null,void a();const v=this._evaluateColorThemeData(h);this._loadColorTheme(v).then(()=>{this.fire(new i.A("colorthemeset")),a()}).catch(S=>{i.w(`Couldn't set color theme: ${S}`)})}setColorTheme(a){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&i.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=a,this._reloadColorTheme()}setImportColorTheme(a,h){const v=this.getFragmentStyle(a);v&&(v._styleColorTheme.colorThemeOverride=h,v._reloadColorTheme())}_getTransitionParameters(a){return{now:i.q.now(),transition:i.l(this.transition,a)}}updateDrapeFirstLayers(){if(!this.terrain)return;const a=[],h=[];for(const v of this._mergedOrder)this.isLayerDraped(this._mergedLayers[v])?a.push(v):h.push(v);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...h)}_createTerrain(a,h){const v=this.terrain=new vt(a,h,this.scope,this.options);h===1&&(this.stylesheet.terrain=a),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const S=this._getTransitionParameters({duration:0});v.updateTransitions(S)}_force3DLayerUpdate(){for(const a in this._layers){const h=this._layers[a];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const h=this._layers[a];h.type==="symbol"&&this._updateLayer(h)}}_validate(a,h,v,S,E={}){if(E&&E.validate===!1)return!1;const D=i.l({},this.serialize());return dl(this,a.call(Vo,i.l({key:h,style:D,value:v,styleSpec:i.a5},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.dg.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._mergedLayers)this._mergedLayers[a].setEventedParent(null);for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles(),this._mergedSourceCaches[a].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(a){const h=this.getSourceCaches(a);for(const v of h)v.clearTiles()}clearSources(){for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles()}reloadSource(a){const h=this.getSourceCaches(a);for(const v of h)v.resume(),v.reload()}reloadSources(){for(const a of this.getSources())a.reload&&a.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(a=>{a.modelManager.reloadModels(a.scope)})}updateSources(a){let h;this.directionalLight&&(h=uy(this.directionalLight));const v=new Set;for(const S in this._mergedLayers){const E=this._mergedLayers[S];E.hasElevation()&&!v.has(E.source)&&v.add(E.source)}for(const S in this._mergedSourceCaches){const E=this._mergedSourceCaches[S],D=v.has(E._source.id);E.update(a,void 0,void 0,h,D)}}_generateCollisionBoxes(){for(const a in this._sourceCaches){const h=this._sourceCaches[a];h.resume(),h.reload()}}_updatePlacement(a,h,v,S,E,D,O=!1){let N=!1,W=!1;const Z={},te={};for(const J of this._mergedOrder){const oe=this._mergedLayers[J];if(oe.type!=="symbol")continue;const ge=i.C(oe.source,oe.scope);let pe=Z[ge];if(!pe){const me=this.getLayerSourceCache(oe);if(!me)continue;const Re=me.getRenderableIds(!0).map(Be=>me.getTileByID(Be));te[ge]=Re.slice(),pe=Z[ge]=Re.sort((Be,Ue)=>Ue.tileID.overscaledZ-Be.tileID.overscaledZ||(Be.tileID.isLessThan(Ue.tileID)?-1:1))}const ve=this.crossTileSymbolIndex.addLayer(oe,pe,h.center.lng,h.projection);N=N||ve}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),O=O||this._layerOrderChanged||S===0,this._layerOrderChanged&&this.fire(new i.A("neworder")),(O||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),h.zoom))&&(this.pauseablePlacement=new ga(h,this._mergedOrder,O,v,S,E,this.placement,this.fog&&h.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Z,te,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),W=!0),N&&this.pauseablePlacement.placement.setStale()),W||N){this._buildingIndex.onNewFrame(h.zoom);for(let J=0;J<this._mergedOrder.length;J++){const oe=this._mergedLayers[this._mergedOrder[J]];if(oe.type!=="symbol")continue;const ge=this.isLayerClipped(oe);this.placement.updateLayerOpacities(oe,Z[i.C(oe.source,oe.scope)],J,ge?D:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}addImport(a,h){this._checkLoaded();const v=this.stylesheet.imports=this.stylesheet.imports||[];if(v.findIndex(({id:E})=>E===a.id)!==-1)return void this.fire(new i.z(new Error(`Import with id '${a.id}' already exists in the map's style.`)));if(!h)return v.push(a),this._loadImports([a],!0);const S=v.findIndex(({id:E})=>E===h);return S===-1&&this.fire(new i.z(new Error(`Import with id "${h}" does not exist on this map.`))),this.stylesheet.imports=v.slice(0,S).concat(a).concat(v.slice(S)),this._loadImports([a],!0,h)}updateImport(a,h){this._checkLoaded();const v=this.stylesheet.imports||[],S=this.getImportIndex(a);return S===-1?this:typeof h=="string"?(this.setImportUrl(a,h),this):(h.url&&h.url!==v[S].url&&this.setImportUrl(a,h.url),i.bv(h.config,v[S].config)||this.setImportConfig(a,h.config,h.data.schema),i.bv(h.data,v[S].data)||this.setImportData(a,h.data),this)}moveImport(a,h){this._checkLoaded();let v=this.stylesheet.imports||[];const S=this.getImportIndex(a);if(S===-1)return this;const E=this.getImportIndex(h);if(E===-1)return this;const D=v[S],O=this.fragments[S];return v=v.filter(({id:N})=>N!==a),this.fragments=this.fragments.filter(({id:N})=>N!==a),this.stylesheet.imports=v.slice(0,E).concat(D).concat(v.slice(E)),this.fragments=this.fragments.slice(0,E).concat(O).concat(this.fragments.slice(E)),this.mergeLayers(),this}setImportUrl(a,h){this._checkLoaded();const v=this.stylesheet.imports||[],S=this.getImportIndex(a);if(S===-1)return this;v[S].url=h;const E=this.fragments[S];return E.style=this._createFragmentStyle(v[S]),E.style.on("style.import.load",()=>this.mergeAll()),E.style.loadURL(h),this}setImportData(a,h){this._checkLoaded();const v=this.getImportIndex(a),S=this.stylesheet.imports||[];return v===-1?this:h?(this.fragments[v].style.setState(h),this._reloadImports(),this):(delete S[v].data,this.setImportUrl(a,S[v].url))}setImportConfig(a,h,v){this._checkLoaded();const S=this.getImportIndex(a),E=this.stylesheet.imports||[];if(S===-1)return this;h?E[S].config=h:delete E[S].config;const D=this.fragments[S];v&&D.style.stylesheet&&(D.style.stylesheet.schema=v);const O=D.style.stylesheet&&D.style.stylesheet.schema;return D.config=h,D.style.updateConfig(h,O),this.updateConfigDependencies(),this}removeImport(a){this._checkLoaded();const h=this.stylesheet.imports||[],v=this.getImportIndex(a);v!==-1&&(h.splice(v,1),this.fragments[v].style._remove(),this.fragments.splice(v,1),this._reloadImports())}getImportIndex(a){const h=(this.stylesheet.imports||[]).findIndex(v=>v.id===a);return h===-1&&this.fire(new i.z(new Error(`Import '${a}' does not exist in the map's style and cannot be updated.`))),h}getLayer(a){return this._mergedLayers[a]}getSources(){const a=[];for(const h in this._mergedOtherSourceCaches){const v=this._mergedOtherSourceCaches[h];v&&a.push(v.getSource())}return a}getSource(a,h){const v=this.getSourceCache(a,h);return v&&v.getSource()}getLayerSource(a){const h=this.getLayerSourceCache(a);return h&&h.getSource()}getSourceCache(a,h){const v=i.C(a,h);return this._mergedOtherSourceCaches[v]}getLayerSourceCache(a){const h=i.C(a.source,a.scope);return a.type==="symbol"?this._mergedSymbolSourceCaches[h]:this._mergedOtherSourceCaches[h]}getSourceCaches(a){if(a==null)return Object.values(this._mergedSourceCaches);const h=[];return this._mergedOtherSourceCaches[a]&&h.push(this._mergedOtherSourceCaches[a]),this._mergedSymbolSourceCaches[a]&&h.push(this._mergedSymbolSourceCaches[a]),h}updateSourceCaches(){const a=this._changes.getUpdatedSourceCaches();for(const h in a){const v=a[h];v==="reload"?this.reloadSource(h):v==="clear"&&this.clearSource(h)}}updateLayers(a){const h=this._changes.getUpdatedPaintProperties();for(const v of h){const S=this.getLayer(v);S&&S.updateTransitions(a)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(a){this.stylesheet.glyphs=a,this.glyphManager.setURL(a,this.scope)}getImages(a,h,v){this.imageManager.getImages(h.images,h.scope,v),this._updateTilesForChangedImages();const S=D=>{if(D){const O=h.images.map(N=>i.I.toString(N));D.setDependencies(h.tileID.key,h.type,O)}},E=i.C(h.source,h.scope);S(this._mergedOtherSourceCaches[E]),S(this._mergedSymbolSourceCaches[E])}rasterizeImages(a,h,v){this.imageManager.rasterizeImages(h,v)}getGlyphs(a,h,v){this.glyphManager.getGlyphs(h.stacks,h.scope,v)}getResource(a,h,v){return i.dh(h,v)}getOwnSourceCache(a){return this._otherSourceCaches[a]}getOwnLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}getOwnSourceCaches(a){const h=[];return this._otherSourceCaches[a]&&h.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&h.push(this._symbolSourceCaches[a]),h}_isSourceCacheLoaded(a){const h=this.getOwnSourceCaches(a);return h.length===0?(this.fire(new i.z(new Error(`There is no source with ID '${a}'`))),!1):h.every(v=>v.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(a,h){if(!this._clipLayerPresent&&a.type!=="fill-extrusion")return!1;const v=a.type==="fill-extrusion"&&a.sourceLayer==="building";if(a.is3D(!!this.terrain)){if(v||h&&h.type==="batched-model"||a.type==="model")return!0}else if(a.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(a=>{a.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}kl.getSourceType=function(y){return op[y]},kl.setSourceType=function(y,a){op[y]=a},kl.registerForPluginStateChange=i.c$;var nf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,mp=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Gv=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,my="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",hl=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Nm=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,xn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Ol=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Vm=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Wa=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,fl=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ec=[];of(nf,ec),of(Gv,ec),of(mp,ec);const pl={"_prelude_fog.vertex.glsl":Nm,"_prelude_terrain.vertex.glsl":hl,"_prelude_shadow.vertex.glsl":Wa,"_prelude_fog.fragment.glsl":xn,"_prelude_shadow.fragment.glsl":fl,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Ol,"_prelude_raster_particle.glsl":Vm},ju={};ni("",hl),ni(xn,Nm),ni(fl,Wa),ni(Ol,""),ni(Vm,"");const kc=ni(mp,Gv),rf=nf;var tc={background:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),building:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in highp vec3 v_normal;in highp float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
uniform lowp float u_opacity;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 apply_lighting_linear(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec4 color=vec4(v_color.rgb,1.0);vec3 normal=normalize(v_normal);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;
#ifdef RENDER_SHADOWS
shadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
shadowed_lighting_factor=dot(normal,u_lighting_directional_dir);
#endif
color.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,v_color.rgb,v_color.a);color*=u_opacity;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_height));
#endif
#ifdef RENDER_CUTOFF
color*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_height);
#endif
glFragColor=vec4(linearTosRGB(color.rgb),color.a);
#ifdef DEBUG_SHOW_NORMALS
color.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;in vec3 a_normal_3f;out vec4 v_color;out highp vec3 v_normal;out highp float v_height;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive
void main() {
#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive
vec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));vec3 pos=a_pos_3f;v_height=pos.z;gl_Position=u_matrix*vec4(pos,1.0);
#ifdef RENDER_SHADOWS
vec3 shadow_pos=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),buildingDepth:ni(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,"in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ni("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ni(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ni(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ni("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ni("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ni("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:ni(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:ni(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
#ifdef FILL_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:ni(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#ifdef FILL_EXTRUSION_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:ni(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:ni(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:ni(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;
#ifdef LINE_PATTERN_TRANSITION
uniform float u_pattern_transition;
#endif
in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LINE_PATTERN_TRANSITION
vec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: define mediump vec4 pattern_b
#endif
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#ifdef LINE_PATTERN_TRANSITION
#pragma mapbox: initialize mediump vec4 pattern_b
#endif
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:ni("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:ni("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:ni(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:ni(`#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
in highp float v_z_offset;
#endif
#endif
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(abs(v_z_offset) > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#endif
#endif
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef ELEVATED_ROADS
in vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
out highp float v_z_offset;
#endif
#endif
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;
#else
z+=u_pitch_with_map ? z_offset : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
#ifdef ELEVATED_ROADS
vec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;
#else
pos=vec3(projected_pos.xy/projected_pos.w+offset,z);
#endif
#endif
gl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
vec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#else
#ifdef Z_OFFSET
#ifdef RENDER_SHADOWS
v_z_offset=e;
#endif
#endif
#endif
}`),terrainRaster:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:ni("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:ni(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,my),skyboxGradient:ni(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,my),skyboxCapture:ni(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ni(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:ni(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:ni(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:ni(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:ni("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:ni("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:ni("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:ni("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function of(y,a){const h=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let v of h)if(v=v.trim(),v[0]==="#"&&v.includes("if")&&!v.includes("endif")){v=v.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=v.split(" ");for(const E of S)a.includes(E)||a.push(E)}}function ni(y,a){const h=/#include\s+"([^"]+)"/g,v=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let S=a.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);S&&(S=S.map(W=>{const Z=W.split(" ");return Z[Z.length-1]}),S=[...new Set(S)]);const E={},D=[],O=[];if(y=y.replace(h,(W,Z)=>(O.push(Z),"")),(a=a.replace(h,(W,Z)=>(D.push(Z),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let N=[...ec];of(y,N),of(a,N);for(const W of[...D,...O])pl[W]||console.error(`Undefined include: ${W}`),ju[W]||(ju[W]=[],of(pl[W],ju[W])),N=[...N,...ju[W]];return{fragmentSource:y=y.replace(v,(W,Z,te,J,oe)=>(E[oe]=!0,Z==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
in ${te} ${J} ${oe};
#else
uniform ${te} ${J} u_${oe};
#endif
`:Z==="initialize"?`
#ifdef HAS_UNIFORM_u_${oe}
    ${te} ${J} ${oe} = u_${oe};
#endif
`:Z==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    in ${te} ${J} ${oe};
#endif
`:Z==="initialize-attribute"?"":void 0)),vertexSource:a=a.replace(v,(W,Z,te,J,oe)=>{const ge=J==="float"?"vec2":J,pe=oe.match(/color/)?"color":ge;return Z==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
in ${te} ${J} a_${oe};
#endif
`:E[oe]?Z==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${te} ${ge} a_${oe};
out ${te} ${J} ${oe};
#else
uniform ${te} ${J} u_${oe};
#endif
`:Z==="initialize"?pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${te} ${J} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${pe}(a_${oe}, u_${oe}_t);
#else
    ${te} ${J} ${oe} = u_${oe};
#endif
`:Z==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    in ${te} ${J} a_${oe};
    out ${te} ${J} ${oe};
#endif
`:Z==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    ${oe} = a_${oe};
#endif
`:void 0:Z==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${te} ${ge} a_${oe};
#else
uniform ${te} ${J} u_${oe};
#endif
`:Z==="define-instanced"?pe==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${oe}0;
in vec4 a_${oe}1;
in vec4 a_${oe}2;
in vec4 a_${oe}3;
#else
uniform ${te} ${J} u_${oe};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${te} ${ge} a_${oe};
#else
uniform ${te} ${J} u_${oe};
#endif
`:Z==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${oe}
    ${te} ${J} ${oe} = a_${oe};
#endif
`:pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${te} ${J} ${oe} = a_${oe};
#else
    ${te} ${J} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${te} ${J} ${oe} = unpack_mix_${pe}(a_${oe}, u_${oe}_t);
#else
    ${te} ${J} ${oe} = u_${oe};
#endif
`}),staticAttributes:S,usedDefines:N,vertexIncludes:D,fragmentIncludes:O}}class kd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,h,v,S,E,D,O,N){this.context=a;let W=this.boundPaintVertexBuffers.length!==S.length;for(let te=0;!W&&te<S.length;te++)this.boundPaintVertexBuffers[te]!==S[te]&&(W=!0);let Z=this.boundDynamicVertexBuffers.length!==O.length;for(let te=0;!Z&&te<O.length;te++)this.boundDynamicVertexBuffers[te]!==O[te]&&(Z=!0);if(!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==v||W||Z||this.boundIndexBuffer!==E||this.boundVertexOffset!==D)this.freshBind(h,v,S,E,D,O,N);else{a.bindVertexArrayOES.set(this.vao);for(const te of O)te&&(te.bind(),N&&te.instanceCount&&te.setVertexAttribDivisor(a.gl,h,N));E&&E.dynamicDraw&&E.bind()}}freshBind(a,h,v,S,E,D,O){const N=a.numAttributes,W=this.context,Z=W.gl;this.vao&&this.destroy(),this.vao=W.gl.createVertexArray(),W.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=S,this.boundVertexOffset=E,this.boundDynamicVertexBuffers=D,h.enableAttributes(Z,a),h.bind(),h.setVertexAttribPointers(Z,a,E);for(const te of v)te.enableAttributes(Z,a),te.bind(),te.setVertexAttribPointers(Z,a,E);for(const te of D)te&&(te.enableAttributes(Z,a),te.bind(),te.setVertexAttribPointers(Z,a,E),O&&te.instanceCount&&te.setVertexAttribDivisor(Z,a,O));S&&S.bind(),W.currentNumAttributes=N}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Y1(y,a){const h=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new i.ac(0,v/h).toLngLat().lat,new i.ac(0,(v+1)/h).toLngLat().lat]}function ml(y,a,h,v,S,E,D){const O=y.context,N=O.gl,W=h.hillshadeFBO;if(!W)return;y.prepareDrawTile();const Z=y.isTileAffectedByFog(a),te=y.getOrCreateProgram("hillshade",{overrideFog:Z});O.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,W.colorAttachment.get());const J=((ve,me,Re,Be)=>{const Ue=Re.paint.get("hillshade-shadow-color"),Ke=Re.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ye=Re.paint.get("hillshade-highlight-color"),Ge=Re.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Ne=Re.paint.get("hillshade-accent-color"),Je=Re.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",nt=Re.paint.get("hillshade-emissive-strength");let bt=i.al(Re.paint.get("hillshade-illumination-direction"));if(Re.paint.get("hillshade-illumination-anchor")==="viewport")bt-=ve.transform.angle;else if(ve.style&&ve.style.enable3dLights()&&ve.style.directionalLight){const $t=ve.style.directionalLight.properties.get("direction"),jt=i.cR($t.x,$t.y,$t.z);bt=i.al(jt[1])}const mt=!ve.options.moving;return{u_matrix:Be||ve.transform.calculateProjMatrix(me.tileID.toUnwrapped(),mt),u_image:0,u_latrange:Y1(0,me.tileID),u_light:[Re.paint.get("hillshade-exaggeration"),bt],u_shadow:Ue.toRenderColor(Ke?null:Re.lut),u_highlight:Ye.toRenderColor(Ge?null:Re.lut),u_emissive_strength:nt,u_accent:Ne.toRenderColor(Je?null:Re.lut)}})(y,h,v,y.terrain?a.projMatrix:null);y.uploadCommonUniforms(O,te,a.toUnwrapped());const{tileBoundsBuffer:oe,tileBoundsIndexBuffer:ge,tileBoundsSegments:pe}=y.getTileBoundsBuffers(h);te.draw(y,N.TRIANGLES,S,E,D,br.disabled,J,v.id,oe,ge,pe)}function $m(y,a,h){if(!a.needsDEMTextureUpload)return;const v=y.context,S=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||y.getTileTexture(h.stride);const E=h.getPixels();a.demTexture?a.demTexture.update(E,{premultiply:!1}):a.demTexture=new i.T(v,E,S.R32F,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Oc(y,a,h){const v=y.context,S=v.gl;if(!a.dem)return;const E=a.dem;if(v.activeTexture.set(S.TEXTURE1),$m(y,a,E),!a.demTexture)return;a.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);const D=E.dim;v.activeTexture.set(S.TEXTURE0);let O=a.hillshadeFBO;if(!O){const J=new i.T(v,{width:D,height:D,data:null},S.RGBA8);J.bind(S.LINEAR,S.CLAMP_TO_EDGE),O=a.hillshadeFBO=v.createFramebuffer(D,D,!0,"renderbuffer"),O.colorAttachment.set(J.texture)}v.bindFramebuffer.set(O.framebuffer),v.viewport.set([0,0,D,D]);const{tileBoundsBuffer:N,tileBoundsIndexBuffer:W,tileBoundsSegments:Z}=y.getMercatorTileBoundsBuffers(),te=[];y.linearFloatFilteringSupported()&&te.push("TERRAIN_DEM_FLOAT_FORMAT"),y.getOrCreateProgram("hillshadePrepare",{defines:te}).draw(y,S.TRIANGLES,Un.disabled,vr.disabled,Nr.unblended,br.disabled,((J,oe)=>{const ge=oe.stride,pe=i.bz();return i.c5(pe,0,i.aj,-i.aj,0,0,1),i.bo(pe,pe,[0,-i.aj,0]),{u_matrix:pe,u_image:1,u_dimension:[ge,ge],u_zoom:J.overscaledZ}})(a.tileID,E),h.id,N,W,Z),a.needsHillshadePrepare=!1}class So{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gy extends So{getDefault(){return i.am.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class sf extends So{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Yv extends So{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class yy extends So{getDefault(){return[!0,!0,!0,!0]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class gp extends So{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Nu extends So{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class vy extends So{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const h=this.current;(a.func!==h.func||a.ref!==h.ref||a.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Um extends So{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class gl extends So{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=a,this.dirty=!1}}class Ga extends So{getDefault(){return[0,1]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Vu extends So{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=a,this.dirty=!1}}class Ya extends So{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Lc extends So{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.BLEND):h.disable(h.BLEND),this.current=a,this.dirty=!1}}class Od extends So{getDefault(){const a=this.gl;return[a.ONE,a.ZERO,a.ONE,a.ZERO]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class af extends So{getDefault(){return i.am.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class lf extends So{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(a,a),this.current=a,this.dirty=!1)}}class yp extends So{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=a,this.dirty=!1}}class ra extends So{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class qo extends So{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let yo=class extends So{getDefault(){return null}set(y){(y!==this.current||this.dirty)&&(this.gl.useProgram(y),this.current=y,this.dirty=!1)}};class $u extends So{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class zc extends So{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class qm extends So{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class uu extends So{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class vp extends So{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Xv extends So{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class _p extends So{getDefault(){return null}set(a){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class xp extends So{getDefault(){return null}set(a){this.gl&&(a!==this.current||this.dirty)&&(this.gl.bindVertexArray(a),this.current=a,this.dirty=!1)}}class cf extends So{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class bp extends So{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Zv extends So{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Uu extends So{constructor(a,h){super(a),this.context=a,this.parent=h}getDefault(){return null}}class qu extends Uu{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Fc extends Uu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Bc extends Uu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,this.attachment(),h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Hm extends Fc{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Wm=(y,a,h)=>({u_matrix:y,u_image0:0,u_skirt_height:a,u_ground_shadow_factor:h}),uf=(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:h,u_zoom_transition:S,u_merc_center:E,u_image0:0,u_frustum_tl:D,u_frustum_tr:O,u_frustum_br:N,u_frustum_bl:W,u_globe_pos:Z,u_globe_radius:te,u_viewport:J,u_grid_matrix:pe?Float32Array.from(pe):new Float32Array(9),u_skirt_height:oe,u_far_z_cutoff:ge});function wp(y,a){return y!=null&&a!=null&&!(!y.hasData()||!a.hasData())&&y.demTexture!=null&&a.demTexture!=null&&y.tileID.key!==a.tileID.key}const nc=new class{constructor(){this.operations={}}newMorphing(y,a,h,v,S){if(y in this.operations){const E=this.operations[y];E.to.tileID.key!==h.tileID.key&&(E.queued=h)}else this.operations[y]={startTime:v,phase:0,duration:S,from:a,to:h,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const a=this.operations[y];return{from:a.from,to:a.to,phase:a.phase}}update(y){for(const a in this.operations){const h=this.operations[a];for(h.phase=(y-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,y)){delete this.operations[a];break}}}_nextOp(y,a){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=a,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},Ms={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Hu(y,a,h){if(a===0)return 0;const v=a<1&&h===514?.25/a:1;return 6*Math.pow(1.5,22-y)*Math.max(a,1)*v}function Kv(y,a){const h=1<<y.z;return!a&&(y.x===0||y.x===h-1)||y.y===0||y.y===h-1}const Xa=y=>({u_matrix:y});function Gm(y,a,h,v,S){if(S>0){const E=i.q.now(),D=(E-y.timeAdded)/S,O=a?(E-a.timeAdded)/S:-1,N=h.getSource(),W=v.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),Z=!a||Math.abs(a.tileID.overscaledZ-W)>Math.abs(y.tileID.overscaledZ-W),te=Z&&y.refreshedUponExpiration?1:i.aD(Z?D:1-O,0,1);return y.refreshedUponExpiration&&D>=1&&(y.refreshedUponExpiration=!1),a?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class _y extends ta{constructor(a){const h={type:"raster-dem",maxzoom:a.transform.maxZoom},v=new i.D(i.d0(),null),S=sp("mock-dem",h,v,a.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,h){a.state="loaded",h(null)}}class ws extends ta{constructor(a){const h=sp("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new i.D(i.d0(),null),a.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,h,v){if(a.freezeTileCoverage)return;this.transform=a;const S=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((E,D)=>{if(E[D.key]="",!this._tiles[D.key]){const O=new Mc(D,this._source.tileSize*D.overscaleFactor(),a.tileZoom);O.state="loaded",this._tiles[D.key]=O}return E},{});for(const E in this._tiles)E in S||(this.freeFBO(E),this._tiles[E].unloadVectorData(),delete this._tiles[E])}freeFBO(a){const h=this.proxyCachedFBO[a];if(h!==void 0){const v=Object.values(h);this.renderCachePool.push(...v),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Sp extends i.aM{constructor(a,h,v){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=h,this.projMatrix=v}}class Ld extends i.dt{constructor(a,h){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},a.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,S,E]=function(N){const W=new i.ba,Z=new i.a_,te=131;W.reserve(17161),Z.reserve(33800);const J=i.aj/128,oe=i.aj+J/2,ge=oe+J;for(let ve=-J;ve<ge;ve+=J)for(let me=-J;me<ge;me+=J){const Re=me<0||me>oe||ve<0||ve>oe?24575:0,Be=i.aD(Math.round(me),0,i.aj),Ue=i.aD(Math.round(ve),0,i.aj);W.emplaceBack(Be+Re,Ue)}const pe=(ve,me)=>{const Re=me*te+ve;Z.emplaceBack(Re+1,Re,Re+te),Z.emplaceBack(Re+te,Re+te+1,Re+1)};for(let ve=1;ve<129;ve++)for(let me=1;me<129;me++)pe(me,ve);return[0,129].forEach(ve=>{for(let me=0;me<130;me++)pe(me,ve),pe(ve,me)}),[W,Z,32768]}(),D=a.context;this.gridBuffer=D.createVertexBuffer(v,i.bc.members),this.gridIndexBuffer=D.createIndexBuffer(S),this.gridSegments=i.bd.simpleSegment(0,0,v.length,S.length),this.gridNoSkirtSegments=i.bd.simpleSegment(0,0,v.length,E),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ws(h.map),this.orthoMatrix=i.bz(),i.c5(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.aj,0,i.aj,0,1);const O=D.gl;this._overlapStencilMode=new vr({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new _y(h.map),this._pendingGroundEffectLayers=[]}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),this._style=a,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,h,v){if(a&&a.terrain){this._style!==a&&(this.style=a,this._evaluationZoom=void 0);const S=a.terrain.properties,E=a.terrain.drapeRenderMode===0,D=a.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const O=a.terrain&&a.terrain.scope,N=S.get("source"),W=E?this._mockSourceCache:a.getSourceCache(N,O);if(!W)return void i.w(`Couldn't find terrain source "${N}".`);if(this.sourceCache=W,this._attenuationRange=a.terrain.getAttenuationRange(),this._exaggeration=D?this.calculateExaggeration(h):S.get("exaggeration"),!h.projection.requiresDraping&&D&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Z=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const te=this.getScaledDemTileSize();this.sourceCache.update(h,te,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Z(),this._initializing=!0),Z(),h.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0,this._previousZoom=h.zoom}else this._disable()}calculateExaggeration(a){if(this._attenuationRange&&a.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(a.zoom);const h=this._previousCameraAltitude,v=a.getFreeCameraOptions().position.z/a.pixelsPerMeter*a.worldSize;this._previousCameraAltitude=v;const S=h!=null?v-h:Number.MAX_VALUE;if(Math.abs(S)<2)return this._exaggeration;const E=a.zoom,D=this._style.terrain;if(!this._previousUpdateTimestamp)return D.getExaggeration(E);let O=E-this._previousZoom;const N=this._previousUpdateTimestamp;let W=E;this._evaluationZoom!=null&&(W=this._evaluationZoom,Math.abs(E-W)>.5&&(O=.5*(E-W+O)),O*S<0&&(W+=O)),this._evaluationZoom=W;const Z=D.getExaggeration(W),te=Z===D.getExaggeration(Math.max(0,W-.1));if(te&&Math.abs(Z-this._exaggeration)<.01)return Z;let J=Math.min(.1,.00375*(this._updateTimestamp-N));return(te||Z<.1||Math.abs(O)<1e-4)&&(J=Math.min(.2,4*J)),i.ai(this._exaggeration,Z,J)}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._mergedSourceCaches)this._style._mergedSourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=v._centerAltitude===0&&this.getAtPointOrZero(i.ac.fromLngLat(v.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=h.getIds().map(N=>{const W=h.getTileByID(N).tileID;return W.projMatrix=v.calculateProjMatrix(W.toUnwrapped()),W});(function(N,W){const Z=W.transform.pointCoordinate(W.transform.getCameraPoint()),te=new i.P(Z.x,Z.y);N.sort((J,oe)=>{if(oe.overscaledZ-J.overscaledZ)return oe.overscaledZ-J.overscaledZ;const ge=new i.P(J.canonical.x+(1<<J.canonical.z)*J.wrap,J.canonical.y),pe=new i.P(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),ve=te.mult(1<<J.canonical.z);return ve.x-=.5,ve.y-=.5,ve.distSqr(ge)-ve.distSqr(pe)})})(S,this.painter);const E=this.proxyToSource||{};this.proxyToSource={},S.forEach(N=>{this.proxyToSource[N.key]={}}),this.terrainTileForTile={};const D=this._style._mergedSourceCaches;for(const N in D){const W=D[N];if(!W.used||(W!==this.sourceCache&&this.resetTileLookupCache(W.id),this._setupProxiedCoordsForOrtho(W,a[N],E),W.usedForTerrain))continue;const Z=a[N];W.getSource().reparseOverscaled&&this._assignTerrainTiles(Z)}this.proxiedCoords[h.id]=S.map(N=>new Sp(N,N.key,this.orthoMatrix)),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(E),this.renderingToTexture=!1;const O={};this._visibleDemTiles=[];for(const N of this.proxyCoords){const W=this.terrainTileForTile[N.key];if(!W)continue;const Z=W.tileID.key;Z in O||(this._visibleDemTiles.push(W),O[Z]=Z)}}_assignTerrainTiles(a){this._initializing||a.forEach(h=>{if(this.terrainTileForTile[h.key])return;const v=this._findTileCoveringTileID(h,this.sourceCache);v&&(this.terrainTileForTile[h.key]=v)})}_prepareDEMTextures(){const a=this.painter.context,h=a.gl;for(const v in this.terrainTileForTile){const S=this.terrainTileForTile[v],E=S.dem;!E||S.demTexture&&!S.needsDEMTextureUpload||(a.activeTexture.set(h.TEXTURE1),$m(this.painter,S,E))}}_prepareDemTileUniforms(a,h,v,S){if(!h||h.demTexture==null)return!1;const E=a.tileID.canonical,D=Math.pow(2,h.tileID.canonical.z-E.z),O=S||"";return v[`u_dem_tl${O}`]=[E.x*D%1,E.y*D%1],v[`u_dem_scale${O}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let a=0;const h=this._visibleDemTiles.reduce((v,S)=>{if(!S.dem)return v;const E=S.dem.tree.minimums[0];return E>0&&a++,v+E},0);return a?h/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,h=a.gl;a.activeTexture.set(h.TEXTURE2);const v=this._getLoadedAreaMinimum(),S=new i.du({width:1,height:1},new Float32Array([v]));this._emptyDEMTextureDirty=!1;let E=this._emptyDEMTexture;return E?E.update(S,{premultiply:!1}):E=this._emptyDEMTexture=new i.T(a,S,h.R32F,{premultiply:!1}),E}setupElevationDraw(a,h,v){const S=this.painter.context,E=S.gl,D={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};D.u_exaggeration=this.exaggeration();let O=null,N=null,W=1;if(v&&v.morphing&&this._useVertexMorphing){const oe=v.morphing.srcDemTile,ge=v.morphing.dstDemTile;W=v.morphing.phase,oe&&ge&&(this._prepareDemTileUniforms(a,oe,D,"_prev")&&(N=oe),this._prepareDemTileUniforms(a,ge,D)&&(O=ge))}const Z=oe=>oe&&oe.demTexture&&this.painter.linearFloatFilteringSupported()?E.LINEAR:E.NEAREST;let te=null;var J;if(this.enabled?N&&O?(te=O.demTexture,S.activeTexture.set(E.TEXTURE4),N.demTexture.bind(Z(N),E.CLAMP_TO_EDGE),D.u_dem_lerp=W):(O=this.terrainTileForTile[a.tileID.key],te=this._prepareDemTileUniforms(a,O,D)?O.demTexture:this.emptyDEMTexture):te=this.emptyDEMTexture,S.activeTexture.set(E.TEXTURE2),te&&(D.u_dem_size=(J=te).size[0]===1?1:J.size[0]-2,te.bind(Z(O),E.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(v&&v.useDepthForOcclusion,h,D),v&&v.useMeterToDem&&O){const oe=(1<<O.tileID.canonical.z)*i.c6(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=oe}if(v&&v.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),h.setTerrainUniformValues(S,D),this.painter.transform.projection.name==="globe"){const oe=this.globeUniformValues(this.painter.transform,a.tileID.canonical,v&&v.useDenormalizedUpVectorScale);h.setGlobeUniformValues(S,oe)}}globeUniformValues(a,h,v){const S=a.projection;return{u_tile_tl_up:S.upVector(h,0,0),u_tile_tr_up:S.upVector(h,i.aj,0),u_tile_br_up:S.upVector(h,i.aj,i.aj),u_tile_bl_up:S.upVector(h,0,i.aj),u_tile_up_scale:v?i.dv(1):S.upVectorScale(h,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const h=this.painter,v=this.painter.context;a.length!==0&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(S,E,D,O,N){if(S.transform.projection.name==="globe")(function(W,Z,te,J,oe){const ge=W.context,pe=ge.gl;let ve,me;const Re=W.transform,Be=i.dl(W,ge,Re),Ue=($t,jt)=>{if(me===jt)return;const an=[Ms[jt],"PROJECTION_GLOBE_VIEW"];Be&&an.push("CUSTOM_ANTIALIASING");const pt=W.isTileAffectedByFog($t);ve=W.getOrCreateProgram("globeRaster",{defines:an,overrideFog:pt}),me=jt},Ke=W.colorModeForRenderPass(),Ye=new Un(pe.LEQUAL,Un.ReadWrite,W.depthRangeFor3D);nc.update(oe);const Ge=i.dm(Re),Ne=[i.ay(Re.center.lng),i.aH(Re.center.lat)],Je=W.globeSharedBuffers,nt=[Re.width*i.q.devicePixelRatio,Re.height*i.q.devicePixelRatio],bt=Float32Array.from(Re.globeMatrix),mt={useDenormalizedUpVectorScale:!0};{const $t=W.transform,jt=Hu($t.zoom,Z.exaggeration(),Z.sourceCache._source.tileSize);me=-1;const an=pe.TRIANGLES;for(const pt of J){const Tt=te.getTile(pt),ut=vr.disabled,Gt=Z.prevTerrainTileForTile[pt.key],Mt=Z.terrainTileForTile[pt.key];wp(Gt,Mt)&&nc.newMorphing(pt.key,Gt,Mt,oe,250),ge.activeTexture.set(pe.TEXTURE0),Tt.texture&&Tt.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const Jt=nc.getMorphValuesForProxy(pt.key),qt=Jt?1:0;Jt&&i.L(mt,{morphing:{srcDemTile:Jt.from,dstDemTile:Jt.to,phase:i.dk(Jt.phase)}});const en=i.dn(pt.canonical),on=i.dp(en.getCenter().lat),Vn=i.dq(pt.canonical,en,on,$t.worldSize/$t._pixelsPerMercatorPixel),Gn=i.bh(i.dr(pt.canonical)),Fn=uf($t.expandedFarZProjMatrix,bt,Ge,Gn,i.ah($t.zoom),Ne,$t.frustumCorners.TL,$t.frustumCorners.TR,$t.frustumCorners.BR,$t.frustumCorners.BL,$t.globeCenterInViewSpace,$t.globeRadius,nt,jt,$t._farZ,Vn);if(Ue(pt,qt),ve&&(Z.setupElevationDraw(Tt,ve,mt),W.uploadCommonUniforms(ge,ve,pt.toUnwrapped()),Je)){const[Qn,Wn,hr]=Je.getGridBuffers(on,jt!==0);ve.draw(W,an,Ye,ut,Ke,br.backCCW,Fn,"globe_raster",Qn,Wn,hr)}}}if(Je&&(W.renderDefaultNorthPole||W.renderDefaultSouthPole)){const $t=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Be&&$t.push("CUSTOM_ANTIALIASING"),ve=W.getOrCreateProgram("globeRaster",{defines:$t});for(const jt of J){const{x:an,y:pt,z:Tt}=jt.canonical,ut=pt===0,Gt=pt===(1<<Tt)-1,[Mt,Jt,qt,en]=Je.getPoleBuffers(Tt,!1);if(en&&(ut||Gt)){const on=te.getTile(jt);ge.activeTexture.set(pe.TEXTURE0),on.texture&&on.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);let Vn=i.ds(Tt,an,Re);const Gn=i.bh(i.dr(jt.canonical)),Fn=(Qn,Wn)=>Qn.draw(W,pe.TRIANGLES,Ye,vr.disabled,Ke,br.disabled,uf(Re.expandedFarZProjMatrix,Vn,Vn,Gn,0,Ne,Re.frustumCorners.TL,Re.frustumCorners.TR,Re.frustumCorners.BR,Re.frustumCorners.BL,Re.globeCenterInViewSpace,Re.globeRadius,nt,0,Re._farZ),"globe_pole_raster",Wn,qt,en);Z.setupElevationDraw(on,ve,mt),W.uploadCommonUniforms(ge,ve,jt.toUnwrapped()),ut&&W.renderDefaultNorthPole&&Fn(ve,Mt),Gt&&W.renderDefaultSouthPole&&(Vn=i.cE(i.bz(),Vn,[1,-1,1]),Fn(ve,Jt))}}}})(S,E,D,O,N);else{const W=S.context,Z=W.gl;let te,J;const oe=S.shadowRenderer,ge=Jh(S,S.longestCutoffRange),pe=Ke=>{if(J===Ke)return;const Ye=[];Ye.push(Ms[Ke]),ge.shouldRenderCutoff&&Ye.push("RENDER_CUTOFF"),oe&&(Ye.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&Ye.push("NORMAL_OFFSET")),te=S.getOrCreateProgram("terrainRaster",{defines:Ye}),J=Ke},ve=S.colorModeForRenderPass(),me=new Un(Z.LEQUAL,Un.ReadWrite,S.depthRangeFor3D);nc.update(N);const Re=S.transform,Be=Hu(Re.zoom,E.exaggeration(),E.sourceCache._source.tileSize);let Ue=[0,0,0];if(oe){const Ke=S.style.directionalLight,Ye=S.style.ambientLight;Ke&&Ye&&(Ue=Pc(S.style,Ke,Ye))}{J=-1;const Ke=Z.TRIANGLES,[Ye,Ge]=[E.gridIndexBuffer,E.gridSegments];for(const Ne of O){const Je=D.getTile(Ne),nt=vr.disabled,bt=E.prevTerrainTileForTile[Ne.key],mt=E.terrainTileForTile[Ne.key];wp(bt,mt)&&nc.newMorphing(Ne.key,bt,mt,N,250),W.activeTexture.set(Z.TEXTURE0),Je.texture&&Je.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);const $t=nc.getMorphValuesForProxy(Ne.key),jt=$t?1:0;let an;$t&&(an={morphing:{srcDemTile:$t.from,dstDemTile:$t.to,phase:i.dk($t.phase)}});const pt=Wm(Ne.projMatrix,Kv(Ne.canonical,Re.renderWorldCopies)?Be/10:Be,Ue);if(pe(jt),!te)continue;E.setupElevationDraw(Je,te,an);const Tt=Ne.toUnwrapped();oe&&oe.setupShadows(Tt,te),S.uploadCommonUniforms(W,te,Tt,null,ge),te.draw(S,Ke,me,nt,ve,br.backCCW,pt,"terrain_raster",E.gridBuffer,Ye,Ge)}}}}(h,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const h=this.painter,v=this.painter.context,S=this.proxySourceCache,E=this.proxiedCoords[S.id],D=this._drapedRenderBatches.shift(),O=h.style.order,N=[];let W=0;for(const Z of E){const te=S.getTileByID(Z.proxyTileKey),J=S.proxyCachedFBO[Z.key]?S.proxyCachedFBO[Z.key][a]:void 0,oe=J!==void 0?S.renderCache[J]:this.pool[W++],ge=J!==void 0;if(te.texture=oe.tex,ge&&!oe.dirty){N.push(te.tileID);continue}let pe;v.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(v.clear({color:i.am.transparent,stencil:0}),oe.dirty=!1);for(let ve=D.start;ve<=D.end;++ve){const me=h.style._mergedLayers[O[ve]];if(me.isHidden(h.transform.zoom))continue;const Re=h.style.getLayerSourceCache(me),Be=Re?this.proxyToSource[Z.key][Re.id]:[Z];if(!Be)continue;const Ue=Be;v.viewport.set([0,0,oe.fb.width,oe.fb.height]),pe!==(Re?Re.id:null)&&(this._setupStencil(oe,Be,me,Re),pe=Re?Re.id:null),h.renderLayer(h,Re,me,Ue)}if(this._drapedRenderBatches.length===0)for(const ve of this._pendingGroundEffectLayers){const me=h.style._mergedLayers[O[ve]];if(me.isHidden(h.transform.zoom))continue;const Re=h.style.getLayerSourceCache(me),Be=Re?this.proxyToSource[Z.key][Re.id]:[Z];if(!Be)continue;const Ue=Be;v.viewport.set([0,0,oe.fb.width,oe.fb.height]),pe!==(Re?Re.id:null)&&(this._setupStencil(oe,Be,me,Re),pe=Re?Re.id:null),h.renderLayer(h,Re,me,Ue)}this.renderedToTile?(oe.dirty=!0,N.push(te.tileID)):ge||--W,W===5&&(W=0,this.renderToBackBuffer(N))}return this.renderToBackBuffer(N),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,h.width,h.height]),D.end+1}postRender(){}isLayerOrderingCorrect(a){const h=a.order.length;let v=-1,S=h;for(let E=0;E<h;++E)this._style.isLayerDraped(a._mergedLayers[a.order[E]])?v=Math.max(v,E):S=Math.min(S,E);return S>v}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{a=Math.min(a,h.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,h,v){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter(E=>E.dem).map(E=>{const D=E.tileID,O=1<<D.overscaledZ,{x:N,y:W}=D.canonical,Z=N/O,te=(N+1)/O,J=W/O,oe=(W+1)/O;return{minx:Z,miny:J,maxx:te,maxy:oe,t:E.dem.tree.raycastRoot(Z,J,te,oe,a,h,v),tile:E}});S.sort((E,D)=>(E.t!==null?E.t:Number.MAX_VALUE)-(D.t!==null?D.t:Number.MAX_VALUE));for(const E of S){if(E.t==null)return null;const D=E.tile.dem.tree.raycast(E.minx,E.miny,E.maxx,E.maxy,a,h,v);if(D!=null)return D}return null}_createFBO(){const a=this.painter.context,h=a.gl,v=this.drapeBufferSize;a.activeTexture.set(h.TEXTURE0);const S=new i.T(a,{width:v[0],height:v[1],data:null},h.RGBA8);S.bind(h.LINEAR,h.CLAMP_TO_EDGE);const E=a.createFramebuffer(v[0],v[1],!0,null);return E.colorAttachment.set(S.texture),E.depthAttachment=new Hm(a,E.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,E.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):E.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&h.texParameterf(h.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:E,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const h=this._style._mergedLayers[a],v=h.isHidden(this.painter.transform.zoom);return h.type==="hillshade"||h.type==="custom"?!v&&h.shouldRedrape():!v&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const v of this._style.getSources())if(v instanceof rs){a=!0;break}if(!a)return;const h={};for(let v=0;v<this._style.order.length;++v){const S=this._style._mergedLayers[this._style.order[v]],E=this._style.getLayerSourceCache(S);if(E&&!h[E.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof i.ab){h[E.id]=!0;for(const D of this.proxyCoords){const O=this.proxyToSource[D.key][E.id];if(O)for(const N of O)this._clearRenderCacheForTile(E.id,N)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const v in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[v]._source instanceof ol){a=!0;break}if(!a)return;const h={};for(let v=0;v<this._style.order.length;++v){const S=this._style._mergedLayers[this._style.order[v]],E=this._style.getLayerSourceCache(S);if(!E||h[E.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const D=S.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const N=this.proxyToSource[O.key][E.id];if(N)for(const W of N){const Z=Gm(E.getTile(W),E.findLoadedParent(W,0),E,this.painter.transform,D);(Z.opacity!==1||Z.mix!==0)&&this._clearRenderCacheForTile(E.id,W)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const a=this._style.order,h=a.length;if(h===0)return;const v=[];this._pendingGroundEffectLayers=[];let S,E=0,D=this._style._mergedLayers[a[E]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++E<h;)D=this._style._mergedLayers[a[E]];for(;E<h;++E){const O=this._style._mergedLayers[a[E]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?S===void 0&&(S=E):(O.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(E),S!==void 0&&(v.push({start:S,end:E-1}),S=void 0)))}if(S!==void 0&&v.push({start:S,end:E-1}),v.length!==0){const O=v[v.length-1];this._pendingGroundEffectLayers.every(N=>N>O.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=v}_setupRenderCache(a){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const D=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let O=0;O<D.length;++O){const N=Object.values(D[O]);h.renderCachePool.push(...N)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,S=this._tilesDirty;for(let D=v.length-1;D>=0;D--){const O=v[D];if(h.getTileByID(O.key),h.proxyCachedFBO[O.key]!==void 0){const N=a[O.key],W=this.proxyToSource[O.key];let Z=0;for(const te in W){const J=W[te],oe=N[te];if(!oe||oe.length!==J.length||J.some((ge,pe)=>ge!==oe[pe]||S[te]&&S[te].hasOwnProperty(ge.key))){Z=-1;break}++Z}for(const te in h.proxyCachedFBO[O.key])h.renderCache[h.proxyCachedFBO[O.key][te]].dirty=Z<0||Z!==Object.values(N).length}}const E=[...this._drapedRenderBatches];E.sort((D,O)=>O.end-O.start-(D.end-D.start));for(const D of E)for(const O of v){if(h.proxyCachedFBO[O.key])continue;let N=h.renderCachePool.pop();N===void 0&&h.renderCache.length<50&&(N=h.renderCache.length,h.renderCache.push(this._createFBO())),N!==void 0&&(h.proxyCachedFBO[O.key]={},h.proxyCachedFBO[O.key][D.start]=N,h.renderCache[N].dirty=!0)}this._tilesDirty={}}_setupStencil(a,h,v,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const E=this.painter.context,D=E.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let O;if(v.isTileClipped())O=h.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(E.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):vr.disabled}_renderTileClippingMasks(a,h){const v=this.painter,S=this.painter.context,E=S.gl;v._tileClippingMaskIDs={},S.setColorMode(Nr.disabled),S.setDepthMode(Un.disabled);const D=v.getOrCreateProgram("clippingMask");for(const O of a){const N=v._tileClippingMaskIDs[O.key]=--h;D.draw(v,E.TRIANGLES,Un.disabled,new vr({func:E.ALWAYS,mask:0},N,255,E.KEEP,E.KEEP,E.REPLACE),Nr.disabled,br.disabled,Xa(O.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(a){const h=this.painter.transform;if(a.x<0||a.x>h.width||a.y<0||a.y>h.height)return null;const v=[a.x,a.y,1,1];i.aA(v,v,h.pixelMatrixInverse),i.cw(v,v,1/v[3]),v[0]/=h.worldSize,v[1]/=h.worldSize;const S=h._camera.position,E=i.c6(1,h.center.lat),D=[S[0],S[1],S[2]/E,0],O=i.cY([],v.slice(0,3),D);i.au(O,O);const N=this.raycast(D,O,this._exaggeration);return N!==null&&N?(i.bF(D,D,O,N),D[3]=D[2],D[2]*=E,D):null}_setupProxiedCoordsForOrtho(a,h,v){if(a.getSource()instanceof i.aP)return this._setupProxiedCoordsForImageSource(a,h,v);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const S=this.proxiedCoords[a.id]=[],E=this.proxyCoords;for(let N=0;N<E.length;N++){const W=E[N],Z=this._findTileCoveringTileID(W,a);if(Z){const te=this._createProxiedId(W,Z,v[W.key]&&v[W.key][a.id]);S.push(te),this.proxyToSource[W.key][a.id]=[te]}}let D=!1;const O=new Set;for(let N=0;N<h.length;N++){const W=a.getTile(h[N]);if(!W||!W.hasData())continue;const Z=this._findTileCoveringTileID(W.tileID,this.proxySourceCache);if(Z&&Z.tileID.canonical.z!==W.tileID.canonical.z){const te=this.proxyToSource[Z.tileID.key][a.id],J=this._createProxiedId(Z.tileID,W,v[Z.tileID.key]&&v[Z.tileID.key][a.id]);te?te.splice(te.length-1,0,J):this.proxyToSource[Z.tileID.key][a.id]=[J];const oe=this.proxyToSource[Z.tileID.key][a.id];O.has(oe)||O.add(oe),S.push(J),D=!0}}if(this._sourceTilesOverlap[a.id]=D,D&&this._debugParams.sortTilesHiZFirst)for(const N of O)N.sort((W,Z)=>Z.overscaledZ-W.overscaledZ)}_setupProxiedCoordsForImageSource(a,h,v){if(!a.getSource().loaded())return;const S=this.proxiedCoords[a.id]=[],E=this.proxyCoords,D=a.getSource(),O=D.tileID;if(!O)return;const N=new i.P(O.x,O.y)._div(1<<O.z),W=D.coordinates.map(i.ac.fromLngLat).reduce((te,J)=>(te.min.x=Math.min(te.min.x,J.x-N.x),te.min.y=Math.min(te.min.y,J.y-N.y),te.max.x=Math.max(te.max.x,J.x-N.x),te.max.y=Math.max(te.max.y,J.y-N.y),te),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Z=(te,J)=>{const oe=te.wrap+te.canonical.x/(1<<te.canonical.z),ge=te.canonical.y/(1<<te.canonical.z),pe=i.aj/(1<<te.canonical.z),ve=J.wrap+J.canonical.x/(1<<J.canonical.z),me=J.canonical.y/(1<<J.canonical.z);return oe+pe<ve+W.min.x||oe>ve+W.max.x||ge+pe<me+W.min.y||ge>me+W.max.y};for(let te=0;te<E.length;te++){const J=E[te];for(let oe=0;oe<h.length;oe++){const ge=a.getTile(h[oe]);if(!ge||!ge.hasData()||Z(J,ge.tileID))continue;const pe=this._createProxiedId(J,ge,v[J.key]&&v[J.key][a.id]),ve=this.proxyToSource[J.key][a.id];ve?ve.push(pe):this.proxyToSource[J.key][a.id]=[pe],S.push(pe)}}}_createProxiedId(a,h,v){let S=this.orthoMatrix;if(v){const E=v.find(D=>D.key===h.tileID.key);if(E)return E}if(h.tileID.key!==a.key){const E=a.canonical.z-h.tileID.canonical.z;let D,O,N;S=i.bz();const W=h.tileID.wrap-a.wrap<<a.overscaledZ;E>0?(D=i.aj>>E,O=D*((h.tileID.canonical.x<<E)-a.canonical.x+W),N=D*((h.tileID.canonical.y<<E)-a.canonical.y)):(D=i.aj<<-E,O=i.aj*(h.tileID.canonical.x-(a.canonical.x+W<<-E)),N=i.aj*(h.tileID.canonical.y-(a.canonical.y<<-E))),i.c5(S,0,D,0,D,0,1),i.bo(S,S,[O,N,0])}return new Sp(h.tileID,a.key,S)}_findTileCoveringTileID(a,h){let v=h.getTile(a);if(v&&v.hasData())return v;const S=this._findCoveringTileCache[h.id],E=S[a.key];if(v=E?h.getTileByID(E):null,v&&v.hasData()||E===null)return v;let D=v?v.tileID:a,O=D.overscaledZ;const N=h.getSource().minzoom,W=[];if(!E){const te=h.getSource().maxzoom;if(a.canonical.z>=te){const J=a.canonical.z-te;h.getSource().reparseOverscaled?(O=Math.max(a.canonical.z+2,h.transform.tileZoom),D=new i.aM(O,a.wrap,te,a.canonical.x>>J,a.canonical.y>>J)):J!==0&&(O=te,D=new i.aM(O,a.wrap,te,a.canonical.x>>J,a.canonical.y>>J))}D.key!==a.key&&(W.push(D.key),v=h.getTile(D))}const Z=te=>{W.forEach(J=>{S[J]=te}),W.length=0};for(O-=1;O>=N&&(!v||!v.hasData());O--){v&&Z(v.tileID.key);const te=D.calculateScaledKey(O);if(v=h.getTileByID(te),v&&v.hasData())break;const J=S[te];if(J===null)break;J===void 0?W.push(te):v=h.getTileByID(J)}return Z(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,h){let v=this._tilesDirty[a];v||(v=this._tilesDirty[a]={}),v[h.key]=!0}}function df(y,a,h){const v=function(O,N,W){const Z=i.bE(N,O),te=i.bE(W,[.2126,.7152,.0722]),J=(ge,pe,ve)=>(1-ve)*ge+ve*pe,oe=J(1-.3*Math.min(te,1),1,Math.min(Z+1,1));return J(.92,1,Math.asin(i.aD(N[2],-1,1))/Math.PI+.5)*oe}(y,[0,0,1],a),S=[0,0,0];i.b$(S,h.slice(0,3),v);const E=[0,0,0];i.b$(E,a.slice(0,3),y[2]);const D=[0,0,0];return i.cU(D,S,E),i.cX(D)}const Tp=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],zd=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Wu{static cacheKey(a,h,v,S){let E=`${h}${S?S.cacheKey:""}`;for(const D of v)a.usedDefines.includes(D)&&(E+=`/${D}`);return E}constructor(a,h,v,S,E,D){const O=a.gl;this.program=O.createProgram(),this.configuration=S,this.name=h,this.fixedDefines=[...D];const N=S?S.getBinderAttributes():[],W=(v.staticAttributes||[]).concat(N);let Z=S?S.defines():[];Z=Z.concat(D.map(ve=>`#define ${ve}`));const te=`#version 300 es
`;let J=te+Z.concat("precision mediump float;",rf,kc.fragmentSource).join(`
`);for(const ve of v.fragmentIncludes)J+=`
${pl[ve]}`;J+=`
${v.fragmentSource}`;let oe=te+Z.concat("precision highp float;",rf,kc.vertexSource).join(`
`);for(const ve of v.vertexIncludes)oe+=`
${pl[ve]}`;this.forceManualRenderingForInstanceIDShaders=a.forceManualRenderingForInstanceIDShaders&&v.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(oe+=`
uniform int u_instanceID;
`),oe+=`
${v.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(oe=oe.replaceAll("gl_InstanceID","u_instanceID"));const ge=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(ge,J),O.compileShader(ge),O.attachShader(this.program,ge);const pe=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(pe,oe),O.compileShader(pe),O.attachShader(this.program,pe),this.attributes={},this.numAttributes=W.length;for(let ve=0;ve<this.numAttributes;ve++)if(W[ve]){const me=W[ve].startsWith("a_")?W[ve]:`a_${W[ve]}`;O.bindAttribLocation(this.program,ve,me),this.attributes[me]=ve}O.linkProgram(this.program),O.deleteShader(pe),O.deleteShader(ge),this.fixedUniforms=E(a),this.binderUniforms=S?S.getUniforms(a):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(ve=>({u_instanceID:new i.cc(ve)}))(a)),(D.includes("TERRAIN")||h.indexOf("symbol")!==-1||h.indexOf("circle")!==-1)&&(this.terrainUniforms=(ve=>({u_dem:new i.cc(ve),u_dem_prev:new i.cc(ve),u_dem_tl:new i.c9(ve),u_dem_scale:new i.cb(ve),u_dem_tl_prev:new i.c9(ve),u_dem_scale_prev:new i.cb(ve),u_dem_size:new i.cb(ve),u_dem_lerp:new i.cb(ve),u_exaggeration:new i.cb(ve),u_depth:new i.cc(ve),u_depth_size_inv:new i.c9(ve),u_depth_range_unpack:new i.c9(ve),u_occluder_half_size:new i.cb(ve),u_occlusion_depth_offset:new i.cb(ve),u_meter_to_dem:new i.cb(ve),u_label_plane_matrix_inv:new i.c8(ve)}))(a)),D.includes("GLOBE")&&(this.globeUniforms=(ve=>({u_tile_tl_up:new i.ca(ve),u_tile_tr_up:new i.ca(ve),u_tile_br_up:new i.ca(ve),u_tile_bl_up:new i.ca(ve),u_tile_up_scale:new i.cb(ve)}))(a)),D.includes("FOG")&&(this.fogUniforms=(ve=>({u_fog_matrix:new i.c8(ve),u_fog_range:new i.c9(ve),u_fog_color:new i.cQ(ve),u_fog_horizon_blend:new i.cb(ve),u_fog_vertical_limit:new i.c9(ve),u_fog_temporal_offset:new i.cb(ve),u_frustum_tl:new i.ca(ve),u_frustum_tr:new i.ca(ve),u_frustum_br:new i.ca(ve),u_frustum_bl:new i.ca(ve),u_globe_pos:new i.ca(ve),u_globe_radius:new i.cb(ve),u_globe_transition:new i.cb(ve),u_is_globe:new i.cc(ve),u_viewport:new i.c9(ve)}))(a)),D.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ve=>({u_cutoff_params:new i.cQ(ve)}))(a)),D.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ve=>({u_lighting_ambient_color:new i.ca(ve),u_lighting_directional_dir:new i.ca(ve),u_lighting_directional_color:new i.ca(ve),u_ground_radiance:new i.ca(ve)}))(a)),D.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ve=>({u_light_matrix_0:new i.c8(ve),u_light_matrix_1:new i.c8(ve),u_fade_range:new i.c9(ve),u_shadow_normal_offset:new i.ca(ve),u_shadow_intensity:new i.cb(ve),u_shadow_texel_size:new i.cb(ve),u_shadow_map_resolution:new i.cb(ve),u_shadow_direction:new i.ca(ve),u_shadow_bias:new i.ca(ve),u_shadowmap_0:new i.cc(ve),u_shadowmap_1:new i.cc(ve)}))(a))}}setTerrainUniformValues(a,h){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in h)v[S]&&v[S].set(this.program,S,h[S])}}setGlobeUniformValues(a,h){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in h)v[S]&&v[S].set(this.program,S,h[S])}}setFogUniformValues(a,h){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in h)v[S].set(this.program,S,h[S])}}setCutoffUniformValues(a,h){if(!this.cutoffUniforms)return;const v=this.cutoffUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in h)v[S].set(this.program,S,h[S])}}setLightsUniformValues(a,h){if(!this.lightsUniforms)return;const v=this.lightsUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const S in h)v[S].set(this.program,S,h[S])}}setShadowUniformValues(a,h){if(this.failedToCreate||!this.shadowUniforms)return;const v=this.shadowUniforms;a.program.set(this.program);for(const S in h)v[S].set(this.program,S,h[S])}_drawDebugWireframe(a,h,v,S,E,D,O,N,W,Z){const te=a.options.wireframe;if(te.terrain===!1&&te.layers2D===!1&&te.layers3D===!1)return;const J=a.context;if(!(!(!te.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!te.layers2D||a._terrain&&a._terrain.renderingToTexture||!Tp.includes(this.name))||!(!te.layers3D||!zd.includes(this.name))))return;const oe=J.gl,ge=a.wireframeDebugCache.getLinesFromTrianglesBuffer(a.frameCounter,E,J);if(!ge)return;const pe=[...this.fixedDefines];pe.push("DEBUG_WIREFRAME");const ve=a.getOrCreateProgram(this.name,{config:this.configuration,defines:pe});J.program.set(ve.program);const me=(Ue,Ke,Ye)=>{if(Ke[Ue]&&Ye[Ue])for(const Ge in Ke[Ue])Ye[Ue][Ge]&&Ye[Ue][Ge].set(Ye.program,Ge,Ke[Ue][Ge].current)};W&&W.setUniforms(ve.program,J,ve.binderUniforms,O,{zoom:N}),me("fixedUniforms",this,ve),me("terrainUniforms",this,ve),me("globeUniforms",this,ve),me("fogUniforms",this,ve),me("lightsUniforms",this,ve),me("shadowUniforms",this,ve),ge.bind(),J.setColorMode(new Nr([oe.ONE,oe.ONE_MINUS_SRC_ALPHA,oe.ZERO,oe.ONE],i.am.transparent,[!0,!0,!0,!1])),J.setDepthMode(new Un(h.func===oe.LESS?oe.LEQUAL:h.func,Un.ReadOnly,h.range)),J.setStencilMode(vr.disabled);const Re=3*D.primitiveLength*2,Be=3*D.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Ue=Z||1;for(let Ke=0;Ke<Ue;++Ke)ve.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ke),oe.drawElements(oe.LINES,Re,oe.UNSIGNED_SHORT,Be)}else Z&&Z>1?oe.drawElementsInstanced(oe.LINES,Re,oe.UNSIGNED_SHORT,Be,Z):oe.drawElements(oe.LINES,Re,oe.UNSIGNED_SHORT,Be);E.bind(),J.program.set(this.program),J.setDepthMode(h),J.setStencilMode(v),J.setColorMode(S)}checkUniforms(a,h,v){if(this.fixedDefines.includes(h)){for(const S of Object.keys(v))if(!v[S].initialized)throw new Error(`Program '${this.name}', from draw '${a}': uniform ${S} not set but required by ${h} being defined`)}}draw(a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve){const me=a.context,Re=me.gl;if(this.failedToCreate)return;me.program.set(this.program),me.setDepthMode(v),me.setStencilMode(S),me.setColorMode(E),me.setCullFace(D);for(const Ke of Object.keys(this.fixedUniforms))this.fixedUniforms[Ke].set(this.program,Ke,O[Ke]);ge&&ge.setUniforms(this.program,me,this.binderUniforms,J,{zoom:oe});const Be={[Re.POINTS]:1,[Re.LINES]:2,[Re.TRIANGLES]:3,[Re.LINE_STRIP]:1}[h];this.checkUniforms(N,"RENDER_SHADOWS",this.shadowUniforms);const Ue=ve&&ve>0?1:void 0;for(const Ke of te.get()){const Ye=Ke.vaos||(Ke.vaos={});if((Ye[N]||(Ye[N]=new kd)).bind(me,this,W,ge?ge.getPaintVertexBuffers():[],Z,Ke.vertexOffset,pe||[],Ue),this.forceManualRenderingForInstanceIDShaders){const Ge=ve||1;for(let Ne=0;Ne<Ge;++Ne)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ne),Z?Re.drawElements(h,Ke.primitiveLength*Be,Re.UNSIGNED_SHORT,Ke.primitiveOffset*Be*2):Re.drawArrays(h,Ke.vertexOffset,Ke.vertexLength)}else ve&&ve>1?Re.drawElementsInstanced(h,Ke.primitiveLength*Be,Re.UNSIGNED_SHORT,Ke.primitiveOffset*Be*2,ve):Z?Re.drawElements(h,Ke.primitiveLength*Be,Re.UNSIGNED_SHORT,Ke.primitiveOffset*Be*2):Re.drawArrays(h,Ke.vertexOffset,Ke.vertexLength);h===Re.TRIANGLES&&Z&&this._drawDebugWireframe(a,v,S,E,Z,Ke,J,oe,ge,ve)}}}function Ym(y,a,h=0){const v=Math.pow(2,a.tileID.overscaledZ),S=a.tileSize*Math.pow(2,y.transform.tileZoom)/v,E=S*(a.tileID.canonical.x+a.tileID.wrap*v),D=S*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.aw(a,1,y.transform.tileZoom),u_pixel_coord_upper:[E>>16,D>>16],u_pixel_coord_lower:[65535&E,65535&D],u_pattern_transition:h}}const Ep={terrain:0,flat:1},px=i.bz(),Fd=(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me)=>{const Re=a.style.light,Be=Re.properties.get("position"),Ue=[Be.x,Be.y,Be.z],Ke=i.dx();Re.properties.get("anchor")==="viewport"&&(i.dy(Ke,-a.transform.angle),i.dz(Ue,Ue,Ke));const Ye=Re.properties.get("color"),Ge=a.transform,Ne={u_matrix:y,u_lightpos:Ue,u_lightintensity:Re.properties.get("intensity"),u_lightcolor:[Ye.r,Ye.g,Ye.b],u_vertical_gradient:+h,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:px,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Ep[W],u_base_type:Ep[Z],u_ao:S,u_edge_radius:E,u_width_scale:D,u_flood_light_color:ge,u_vertical_scale:pe,u_flood_light_intensity:ve,u_ground_shadow_factor:me};return Ge.projection.name==="globe"&&(Ne.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],Ne.u_zoom_transition=te,Ne.u_inv_rot_matrix=oe,Ne.u_merc_center=J,Ne.u_up_dir=Ge.projection.upVector(new i.cp(0,0,0),J[0]*i.aj,J[1]*i.aj),Ne.u_height_lift=N),Ne},hf=(y,a,h,v,S,E)=>({u_matrix:y,u_edge_radius:a,u_width_scale:h,u_vertical_scale:v,u_height_type:Ep[S],u_base_type:Ep[E]}),Qv=(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me)=>{const Re=Fd(y,a,h,v,S,E,D,O,W,Z,te,J,oe,ge,pe,ve,1,[0,0,0]),Be={u_height_factor:-Math.pow(2,O.overscaledZ)/N.tileSize/8};return i.l(Re,Ym(a,N,me),Be)},Xm=(y,a,h)=>({u_matrix:y,u_emissive_strength:a,u_ground_shadow_factor:h}),Jv=(y,a,h,v,S,E=0)=>i.l(Xm(y,a,S),Ym(h,v,E)),Zm=(y,a,h,v)=>({u_matrix:y,u_world:h,u_emissive_strength:a,u_ground_shadow_factor:v}),mx=(y,a,h,v,S,E,D=0)=>i.l(Jv(y,a,h,v,E,D),{u_world:S}),Cp=(y,a)=>({u_matrix:y,u_ground_shadow_factor:a}),ff=(y,a,h,v,S)=>({u_matrix:y,u_camera_pos:[a[0],a[1],a[2]],u_depth_bias:h,u_height_scale:v,u_reset_depth:S}),e_=(y,a,h,v)=>{const S=i.aj/h.tileSize;return{u_matrix:y,u_camera_to_center_distance:a.getCameraToCenterDistance(v),u_extrude_scale:[a.pixelsToGLUnits[0]/S,a.pixelsToGLUnits[1]/S]}},du=(y,a,h=1)=>({u_matrix:y,u_color:a.toRenderColor(null),u_overlay:0,u_overlay_scale:h}),t_=i.bz(),Mp=(y,a,h,v,S,E,D)=>{const O=y.transform,N=O.projection.name==="globe",W=N?i.dA(O.zoom,a.canonical)*O._pixelsPerMercatorPixel:i.aw(h,1,E),Z={u_matrix:a.projMatrix,u_extrude_scale:W,u_intensity:D,u_inv_rot_matrix:t_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(N){Z.u_inv_rot_matrix=v,Z.u_merc_center=S,Z.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],Z.u_zoom_transition=i.ah(O.zoom);const te=S[0]*i.aj,J=S[1]*i.aj;Z.u_up_dir=O.projection.upVector(new i.cp(0,0,0),te,J)}return Z};function xy(y,[a,h,v,S],[E,D]){if(E===D)return[0,0,0,0];const O=255*(y-1)/(y*(D-E));return[a*O,h*O,v*O,S*O]}function Km(y,a,[h,v]){return h===v?0:.5/y+(a-h)*(y-1)/(y*(v-h))}const Za=(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me,Re,Be,Ue)=>({u_matrix:y,u_normalize_matrix:a,u_globe_matrix:h,u_merc_matrix:v,u_grid_matrix:S,u_tl_parent:E,u_scale_parent:W,u_fade_t:Z.mix,u_opacity:Z.opacity*te.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:te.paint.get("raster-brightness-min"),u_brightness_high:te.paint.get("raster-brightness-max"),u_saturation_factor:i.dB(te.paint.get("raster-saturation")),u_contrast_factor:i.dC(te.paint.get("raster-contrast")),u_spin_weights:by(te.paint.get("raster-hue-rotate")),u_perspective_transform:J,u_raster_elevation:oe,u_zoom_transition:D,u_merc_center:O,u_cutoff_params:N,u_colorization_mix:xy(i.dD,pe,me),u_colorization_offset:Km(i.dD,ve,me),u_color_ramp:ge,u_texture_offset:[Be/(Re+2*Be),Re/(Re+2*Be)],u_texture_res:[Re+2*Be,Re+2*Be],u_emissive_strength:Ue});function by(y){y*=Math.PI/180;const a=Math.sin(y),h=Math.cos(y);return[(2*h+1)/3,(-Math.sqrt(3)*a-h+1)/3,(Math.sqrt(3)*a-h+1)/3]}const Ka=.05,hu=(y,a,h,v,S,E,D,O,N,W,Z,te)=>({u_matrix:y,u_normalize_matrix:a,u_globe_matrix:h,u_merc_matrix:v,u_grid_matrix:S,u_tl_parent:E,u_scale_parent:W,u_fade_t:Z.mix,u_opacity:Z.opacity,u_image0:0,u_image1:1,u_raster_elevation:te,u_zoom_transition:D,u_merc_center:O,u_cutoff_params:N}),jc=(y,a,h,v,S,E,D,O,N,W)=>({u_particle_texture:y,u_particle_texture_side_len:a,u_tile_offset:h,u_velocity:v,u_color_ramp:E,u_velocity_res:S,u_max_speed:D,u_uv_offset:O,u_data_scale:[255*N[0],255*N[1]],u_data_offset:W,u_particle_pos_scale:1.1,u_particle_pos_offset:[Ka,Ka]}),Ap=(y,a,h,v,S,E,D,O,N,W)=>({u_particle_texture:y,u_particle_texture_side_len:a,u_velocity:h,u_velocity_res:v,u_max_speed:S,u_speed_factor:E,u_reset_rate:D,u_rand_seed:Math.random(),u_uv_offset:O,u_data_scale:[255*N[0],255*N[1]],u_data_offset:W,u_particle_pos_scale:1.1,u_particle_pos_offset:[Ka,Ka]}),Qm=i.bz(),Rp=(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me,Re,Be,Ue,Ke,Ye)=>{const Ge=S.transform,Ne={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Ge.getCameraToCenterDistance(Re),u_rotate_symbol:+h,u_aspect_ratio:Ge.width/Ge.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:D,u_coord_matrix:O,u_is_text:+W,u_elevation_from_sea:N?1:0,u_pitch_with_map:+v,u_texsize:Z,u_texsize_icon:te,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Qm,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Qm,u_up_vector:[0,-1,0],u_color_adj_mat:Ue,u_icon_transition:Ke||0,u_gamma_scale:v?S.transform.getCameraToCenterDistance(Re)*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:1,u_scale_factor:Ye||1,u_ground_shadow_factor:Be,u_inv_matrix:i.bi(i.bz(),D)};return Re.name==="globe"&&(Ne.u_tile_id=[oe.canonical.x,oe.canonical.y,1<<oe.canonical.z],Ne.u_zoom_transition=ge,Ne.u_inv_rot_matrix=ve,Ne.u_merc_center=pe,Ne.u_camera_forward=Ge._camera.forward(),Ne.u_ecef_origin=i.dE(Ge.globeMatrix,oe.toUnwrapped()),Ne.u_tile_matrix=Float32Array.from(Ge.globeMatrix),Ne.u_up_vector=me),Ne},Bd=(y,a,h,v)=>({u_matrix:y,u_emissive_strength:a,u_opacity:h,u_color:v}),Dp=(y,a,h,v,S,E,D,O,N)=>i.l(function(W,Z,te,J,oe,ge){const{width:pe,height:ve}=J.imageManager.getPixelSize(Z),me=Math.pow(2,ge.tileID.overscaledZ),Re=ge.tileSize*Math.pow(2,J.transform.tileZoom)/me,Be=Re*(ge.tileID.canonical.x+ge.tileID.wrap*me),Ue=Re*ge.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[pe,ve],u_pattern_size:te.displaySize,u_pattern_units_to_pixels:oe?[J.transform.width,-1*J.transform.height]:[1/i.aw(ge,1,J.transform.tileZoom),1/i.aw(ge,1,J.transform.tileZoom)],u_pixel_coord_upper:[Be>>16,Ue>>16],u_pixel_coord_lower:[65535&Be,65535&Ue]}}(0,E,D,v,O,N),{u_matrix:y,u_emissive_strength:a,u_opacity:h}),Jm=new Float32Array(i.bx([])),jd=(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe=[0,0,0],ge)=>{const pe=S.style.light,ve=pe.properties.get("position"),me=[-ve.x,-ve.y,ve.z],Re=i.dx();pe.properties.get("anchor")==="viewport"&&(i.dy(Re,-S.transform.angle),i.dz(me,me,Re));const Be=Z.alphaMode==="MASK",Ue=pe.properties.get("color").toRenderColor(null),Ke=J.paint.get("model-ambient-occlusion-intensity"),Ye=J.paint.get("model-color").constantOr(i.am.white).toRenderColor(null),Ge=J.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:y,u_lighting_matrix:a,u_normal_matrix:h,u_node_matrix:v||Jm,u_lightpos:me,u_lightintensity:pe.properties.get("intensity"),u_lightcolor:[Ue.r,Ue.g,Ue.b],u_camera_pos:oe,u_opacity:E,u_baseTextureIsAlpha:0,u_alphaMask:+Be,u_alphaCutoff:Z.alphaCutoff,u_baseColorFactor:[D.r,D.g,D.b,D.a],u_emissiveFactor:[O[0],O[1],O[2],1],u_metallicFactor:N,u_roughnessFactor:W,u_baseColorTexture:ya.BaseColor,u_metallicRoughnessTexture:ya.MetallicRoughness,u_normalTexture:ya.Normal,u_occlusionTexture:ya.Occlusion,u_emissionTexture:ya.Emission,u_lutTexture:ya.LUT,u_color_mix:[Ye.r,Ye.g,Ye.b,Ge],u_aoIntensity:Ke,u_emissive_strength:te,u_occlusionTextureTransform:ge||[0,0,0,0]}},pf=(y,a=Jm,h=Jm)=>({u_matrix:y,u_instance:a,u_node_matrix:h}),wy={fillExtrusion:y=>({u_matrix:new i.c8(y),u_lightpos:new i.ca(y),u_lightintensity:new i.cb(y),u_lightcolor:new i.ca(y),u_vertical_gradient:new i.cb(y),u_opacity:new i.cb(y),u_edge_radius:new i.cb(y),u_width_scale:new i.cb(y),u_ao:new i.c9(y),u_height_type:new i.cc(y),u_base_type:new i.cc(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_up_dir:new i.ca(y),u_height_lift:new i.cb(y),u_flood_light_color:new i.ca(y),u_vertical_scale:new i.cb(y),u_flood_light_intensity:new i.cb(y),u_ground_shadow_factor:new i.ca(y)}),fillExtrusionDepth:y=>({u_matrix:new i.c8(y),u_edge_radius:new i.cb(y),u_width_scale:new i.cb(y),u_vertical_scale:new i.cb(y),u_height_type:new i.cc(y),u_base_type:new i.cc(y)}),fillExtrusionPattern:y=>({u_matrix:new i.c8(y),u_lightpos:new i.ca(y),u_lightintensity:new i.cb(y),u_lightcolor:new i.ca(y),u_vertical_gradient:new i.cb(y),u_height_factor:new i.cb(y),u_edge_radius:new i.cb(y),u_width_scale:new i.cb(y),u_ao:new i.c9(y),u_height_type:new i.cc(y),u_base_type:new i.cc(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_up_dir:new i.ca(y),u_height_lift:new i.cb(y),u_image:new i.cc(y),u_texsize:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_tile_units_to_pixels:new i.cb(y),u_opacity:new i.cb(y),u_pattern_transition:new i.cb(y)}),fillExtrusionGroundEffect:y=>({u_matrix:new i.c8(y),u_opacity:new i.cb(y),u_ao_pass:new i.cb(y),u_meter_to_tile:new i.cb(y),u_ao:new i.c9(y),u_flood_light_intensity:new i.cb(y),u_flood_light_color:new i.ca(y),u_attenuation:new i.cb(y),u_edge_radius:new i.cb(y),u_fb:new i.cc(y),u_fb_size:new i.cb(y),u_dynamic_offset:new i.cb(y)}),fill:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_ground_shadow_factor:new i.ca(y)}),fillPattern:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_image:new i.cc(y),u_texsize:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_tile_units_to_pixels:new i.cb(y),u_ground_shadow_factor:new i.ca(y),u_pattern_transition:new i.cb(y)}),fillOutline:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_world:new i.c9(y),u_ground_shadow_factor:new i.ca(y)}),fillOutlinePattern:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_world:new i.c9(y),u_image:new i.cc(y),u_texsize:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_tile_units_to_pixels:new i.cb(y),u_ground_shadow_factor:new i.ca(y),u_pattern_transition:new i.cb(y)}),building:y=>({u_matrix:new i.c8(y),u_normal_matrix:new i.c8(y),u_opacity:new i.cb(y)}),buildingDepth:y=>({u_matrix:new i.c8(y)}),elevatedStructuresDepth:y=>({u_matrix:new i.c8(y),u_depth_bias:new i.cb(y)}),elevatedStructures:y=>({u_matrix:new i.c8(y),u_ground_shadow_factor:new i.ca(y)}),elevatedStructuresDepthReconstruct:y=>({u_matrix:new i.c8(y),u_camera_pos:new i.ca(y),u_depth_bias:new i.cb(y),u_height_scale:new i.cb(y),u_reset_depth:new i.cb(y)}),circle:i.dF,collisionBox:y=>({u_matrix:new i.c8(y),u_camera_to_center_distance:new i.cb(y),u_extrude_scale:new i.c9(y)}),collisionCircle:y=>({u_matrix:new i.c8(y),u_inv_matrix:new i.c8(y),u_camera_to_center_distance:new i.cb(y),u_viewport_size:new i.c9(y)}),debug:y=>({u_color:new i.di(y),u_matrix:new i.c8(y),u_overlay:new i.cc(y),u_overlay_scale:new i.cb(y)}),clippingMask:y=>({u_matrix:new i.c8(y)}),heatmap:y=>({u_extrude_scale:new i.cb(y),u_intensity:new i.cb(y),u_matrix:new i.c8(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_up_dir:new i.ca(y)}),heatmapTexture:y=>({u_image:new i.cc(y),u_color_ramp:new i.cc(y),u_opacity:new i.cb(y)}),hillshade:y=>({u_matrix:new i.c8(y),u_image:new i.cc(y),u_latrange:new i.c9(y),u_light:new i.c9(y),u_shadow:new i.di(y),u_highlight:new i.di(y),u_emissive_strength:new i.cb(y),u_accent:new i.di(y)}),hillshadePrepare:y=>({u_matrix:new i.c8(y),u_image:new i.cc(y),u_dimension:new i.c9(y),u_zoom:new i.cb(y)}),line:i.dG,linePattern:i.dH,raster:y=>({u_matrix:new i.c8(y),u_normalize_matrix:new i.c8(y),u_globe_matrix:new i.c8(y),u_merc_matrix:new i.c8(y),u_grid_matrix:new i.dj(y),u_tl_parent:new i.c9(y),u_scale_parent:new i.cb(y),u_fade_t:new i.cb(y),u_opacity:new i.cb(y),u_image0:new i.cc(y),u_image1:new i.cc(y),u_brightness_low:new i.cb(y),u_brightness_high:new i.cb(y),u_saturation_factor:new i.cb(y),u_contrast_factor:new i.cb(y),u_spin_weights:new i.ca(y),u_perspective_transform:new i.c9(y),u_raster_elevation:new i.cb(y),u_zoom_transition:new i.cb(y),u_merc_center:new i.c9(y),u_cutoff_params:new i.cQ(y),u_colorization_mix:new i.cQ(y),u_colorization_offset:new i.cb(y),u_color_ramp:new i.cc(y),u_texture_offset:new i.c9(y),u_texture_res:new i.c9(y),u_emissive_strength:new i.cb(y)}),rasterParticle:y=>({u_matrix:new i.c8(y),u_normalize_matrix:new i.c8(y),u_globe_matrix:new i.c8(y),u_merc_matrix:new i.c8(y),u_grid_matrix:new i.dj(y),u_tl_parent:new i.c9(y),u_scale_parent:new i.cb(y),u_fade_t:new i.cb(y),u_opacity:new i.cb(y),u_image0:new i.cc(y),u_image1:new i.cc(y),u_raster_elevation:new i.cb(y),u_zoom_transition:new i.cb(y),u_merc_center:new i.c9(y),u_cutoff_params:new i.cQ(y)}),rasterParticleTexture:y=>({u_texture:new i.cc(y),u_opacity:new i.cb(y)}),rasterParticleDraw:y=>({u_particle_texture:new i.cc(y),u_particle_texture_side_len:new i.cb(y),u_tile_offset:new i.c9(y),u_velocity:new i.cc(y),u_color_ramp:new i.cc(y),u_velocity_res:new i.c9(y),u_max_speed:new i.cb(y),u_uv_offset:new i.c9(y),u_data_scale:new i.c9(y),u_data_offset:new i.cb(y),u_particle_pos_scale:new i.cb(y),u_particle_pos_offset:new i.c9(y)}),rasterParticleUpdate:y=>({u_particle_texture:new i.cc(y),u_particle_texture_side_len:new i.cb(y),u_velocity:new i.cc(y),u_velocity_res:new i.c9(y),u_max_speed:new i.cb(y),u_speed_factor:new i.cb(y),u_reset_rate:new i.cb(y),u_rand_seed:new i.cb(y),u_uv_offset:new i.c9(y),u_data_scale:new i.c9(y),u_data_offset:new i.cb(y),u_particle_pos_scale:new i.cb(y),u_particle_pos_offset:new i.c9(y)}),symbol:y=>({u_is_size_zoom_constant:new i.cc(y),u_is_size_feature_constant:new i.cc(y),u_size_t:new i.cb(y),u_size:new i.cb(y),u_camera_to_center_distance:new i.cb(y),u_rotate_symbol:new i.cc(y),u_aspect_ratio:new i.cb(y),u_fade_change:new i.cb(y),u_matrix:new i.c8(y),u_label_plane_matrix:new i.c8(y),u_coord_matrix:new i.c8(y),u_is_text:new i.cc(y),u_elevation_from_sea:new i.cc(y),u_pitch_with_map:new i.cc(y),u_texsize:new i.c9(y),u_texsize_icon:new i.c9(y),u_texture:new i.cc(y),u_texture_icon:new i.cc(y),u_gamma_scale:new i.cb(y),u_device_pixel_ratio:new i.cb(y),u_tile_id:new i.ca(y),u_zoom_transition:new i.cb(y),u_inv_rot_matrix:new i.c8(y),u_merc_center:new i.c9(y),u_camera_forward:new i.ca(y),u_tile_matrix:new i.c8(y),u_up_vector:new i.ca(y),u_ecef_origin:new i.ca(y),u_is_halo:new i.cc(y),u_icon_transition:new i.cb(y),u_color_adj_mat:new i.c8(y),u_scale_factor:new i.cb(y),u_ground_shadow_factor:new i.ca(y),u_inv_matrix:new i.c8(y)}),background:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_opacity:new i.cb(y),u_color:new i.di(y)}),backgroundPattern:y=>({u_matrix:new i.c8(y),u_emissive_strength:new i.cb(y),u_opacity:new i.cb(y),u_image:new i.cc(y),u_pattern_tl:new i.c9(y),u_pattern_br:new i.c9(y),u_texsize:new i.c9(y),u_pattern_size:new i.c9(y),u_pixel_coord_upper:new i.c9(y),u_pixel_coord_lower:new i.c9(y),u_pattern_units_to_pixels:new i.c9(y)}),terrainRaster:y=>({u_matrix:new i.c8(y),u_image0:new i.cc(y),u_skirt_height:new i.cb(y),u_ground_shadow_factor:new i.ca(y)}),skybox:y=>({u_matrix:new i.c8(y),u_sun_direction:new i.ca(y),u_cubemap:new i.cc(y),u_opacity:new i.cb(y),u_temporal_offset:new i.cb(y)}),skyboxGradient:y=>({u_matrix:new i.c8(y),u_color_ramp:new i.cc(y),u_center_direction:new i.ca(y),u_radius:new i.cb(y),u_opacity:new i.cb(y),u_temporal_offset:new i.cb(y)}),skyboxCapture:y=>({u_matrix_3f:new i.dj(y),u_sun_direction:new i.ca(y),u_sun_intensity:new i.cb(y),u_color_tint_r:new i.cQ(y),u_color_tint_m:new i.cQ(y),u_luminance:new i.cb(y)}),globeRaster:y=>({u_proj_matrix:new i.c8(y),u_globe_matrix:new i.c8(y),u_normalize_matrix:new i.c8(y),u_merc_matrix:new i.c8(y),u_zoom_transition:new i.cb(y),u_merc_center:new i.c9(y),u_image0:new i.cc(y),u_grid_matrix:new i.dj(y),u_skirt_height:new i.cb(y),u_far_z_cutoff:new i.cb(y),u_frustum_tl:new i.ca(y),u_frustum_tr:new i.ca(y),u_frustum_br:new i.ca(y),u_frustum_bl:new i.ca(y),u_globe_pos:new i.ca(y),u_globe_radius:new i.cb(y),u_viewport:new i.c9(y)}),globeAtmosphere:y=>({u_frustum_tl:new i.ca(y),u_frustum_tr:new i.ca(y),u_frustum_br:new i.ca(y),u_frustum_bl:new i.ca(y),u_horizon:new i.cb(y),u_transition:new i.cb(y),u_fadeout_range:new i.cb(y),u_color:new i.cQ(y),u_high_color:new i.cQ(y),u_space_color:new i.cQ(y),u_temporal_offset:new i.cb(y),u_horizon_angle:new i.cb(y)}),model:y=>({u_matrix:new i.c8(y),u_lighting_matrix:new i.c8(y),u_normal_matrix:new i.c8(y),u_node_matrix:new i.c8(y),u_lightpos:new i.ca(y),u_lightintensity:new i.cb(y),u_lightcolor:new i.ca(y),u_camera_pos:new i.ca(y),u_opacity:new i.cb(y),u_baseColorFactor:new i.cQ(y),u_emissiveFactor:new i.cQ(y),u_metallicFactor:new i.cb(y),u_roughnessFactor:new i.cb(y),u_baseTextureIsAlpha:new i.cc(y),u_alphaMask:new i.cc(y),u_alphaCutoff:new i.cb(y),u_baseColorTexture:new i.cc(y),u_metallicRoughnessTexture:new i.cc(y),u_normalTexture:new i.cc(y),u_occlusionTexture:new i.cc(y),u_emissionTexture:new i.cc(y),u_lutTexture:new i.cc(y),u_color_mix:new i.cQ(y),u_aoIntensity:new i.cb(y),u_emissive_strength:new i.cb(y),u_occlusionTextureTransform:new i.cQ(y)}),modelDepth:y=>({u_matrix:new i.c8(y),u_instance:new i.c8(y),u_node_matrix:new i.c8(y)}),groundShadow:y=>({u_matrix:new i.c8(y),u_ground_shadow_factor:new i.ca(y)}),stars:y=>({u_matrix:new i.c8(y),u_up:new i.ca(y),u_right:new i.ca(y),u_intensity_multiplier:new i.cb(y)}),snowParticle:y=>({u_modelview:new i.c8(y),u_projection:new i.c8(y),u_time:new i.cb(y),u_cam_pos:new i.ca(y),u_velocityConeAperture:new i.cb(y),u_velocity:new i.cb(y),u_horizontalOscillationRadius:new i.cb(y),u_horizontalOscillationRate:new i.cb(y),u_boxSize:new i.cb(y),u_billboardSize:new i.cb(y),u_simpleShapeParameters:new i.c9(y),u_screenSize:new i.c9(y),u_thinningCenterPos:new i.c9(y),u_thinningShape:new i.ca(y),u_thinningAffectedRatio:new i.cb(y),u_thinningParticleOffset:new i.cb(y),u_particleColor:new i.cQ(y),u_direction:new i.ca(y)}),rainParticle:y=>({u_modelview:new i.c8(y),u_projection:new i.c8(y),u_time:new i.cb(y),u_cam_pos:new i.ca(y),u_texScreen:new i.cc(y),u_velocityConeAperture:new i.cb(y),u_velocity:new i.cb(y),u_boxSize:new i.cb(y),u_rainDropletSize:new i.c9(y),u_distortionStrength:new i.cb(y),u_rainDirection:new i.ca(y),u_color:new i.cQ(y),u_screenSize:new i.c9(y),u_thinningCenterPos:new i.c9(y),u_thinningShape:new i.ca(y),u_thinningAffectedRatio:new i.cb(y),u_thinningParticleOffset:new i.cb(y),u_shapeDirectionalPower:new i.cb(y),u_shapeNormalPower:new i.cb(y),u_mode:new i.cb(y)}),vignette:y=>({u_vignetteShape:new i.ca(y),u_vignetteColor:new i.cQ(y)}),occlusion:y=>({u_matrix:new i.c8(y),u_anchorPos:new i.ca(y),u_screenSizePx:new i.c9(y),u_occluderSizePx:new i.c9(y),u_color:new i.cQ(y)})};class fu{constructor(a,h,v,S){this.id=fu.uniqueIdxCounter,fu.uniqueIdxCounter++,this.context=a;const E=a.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||S||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=fu.uniqueIdxCounter,fu.uniqueIdxCounter++;const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}fu.uniqueIdxCounter=0;const n_={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class eg{constructor(a,h,v,S,E,D){this.length=h.length,this.attributes=v,this.itemSize=h.bytesPerElement,this.dynamicDraw=S,this.instanceCount=D,this.context=a;const O=a.gl;this.buffer=O.createBuffer(),a.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||E||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,h){for(let v=0;v<this.attributes.length;v++){const S=h.attributes[this.attributes[v].name];S!==void 0&&a.enableVertexAttribArray(S)}}setVertexAttribPointers(a,h,v){for(let S=0;S<this.attributes.length;S++){const E=this.attributes[S],D=h.attributes[E.name];D!==void 0&&a.vertexAttribPointer(D,E.components,a[n_[E.type]],!1,this.itemSize,E.offset+this.itemSize*(v||0))}}setVertexAttribDivisor(a,h,v){for(let S=0;S<this.attributes.length;S++){const E=h.attributes[this.attributes[S].name];E!==void 0&&this.instanceCount&&this.instanceCount>0&&a.vertexAttribDivisor(E,v)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Nc{constructor(a,h,v,S,E){this.context=a,this.width=h,this.height=v;const D=this.framebuffer=a.gl.createFramebuffer();S&&(this.colorAttachment=new qu(a,D)),E&&(this.depthAttachmentType=E,this.depthAttachment=E==="renderbuffer"?new Fc(a,D):new Bc(a,D))}destroy(){const a=this.context.gl;if(this.colorAttachment){const h=this.colorAttachment.get();h&&a.deleteTexture(h)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const h=this.depthAttachment.get();h&&a.deleteRenderbuffer(h)}else{const h=this.depthAttachment.get();h&&a.deleteTexture(h)}a.deleteFramebuffer(this.framebuffer)}}class Di{constructor(a,h){this.gl=a,this.clearColor=new gy(this),this.clearDepth=new sf(this),this.clearStencil=new Yv(this),this.colorMask=new yy(this),this.depthMask=new gp(this),this.stencilMask=new Nu(this),this.stencilFunc=new vy(this),this.stencilOp=new Um(this),this.stencilTest=new gl(this),this.depthRange=new Ga(this),this.depthTest=new Vu(this),this.depthFunc=new Ya(this),this.blend=new Lc(this),this.blendFunc=new Od(this),this.blendColor=new af(this),this.blendEquation=new lf(this),this.cullFace=new yp(this),this.cullFaceSide=new ra(this),this.frontFace=new qo(this),this.program=new yo(this),this.activeTexture=new $u(this),this.viewport=new zc(this),this.bindFramebuffer=new qm(this),this.bindRenderbuffer=new uu(this),this.bindTexture=new vp(this),this.bindVertexBuffer=new Xv(this),this.bindElementBuffer=new _p(this),this.bindVertexArrayOES=new xp(this),this.pixelStoreUnpack=new cf(this),this.pixelStoreUnpackPremultiplyAlpha=new bp(this),this.pixelStoreUnpackFlipY=new Zv(this),this.options=h?Object.assign({},h):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=h&&!!h.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=a.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxPointSize=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,h,v){return new fu(this,a,h,v)}createVertexBuffer(a,h,v,S,E){return new eg(this,a,h,v,S,E)}createRenderbuffer(a,h,v){const S=this.gl,E=S.createRenderbuffer();return this.bindRenderbuffer.set(E),S.renderbufferStorage(S.RENDERBUFFER,a,h,v),this.bindRenderbuffer.set(null),E}createFramebuffer(a,h,v,S){return new Nc(this,a,h,v,S)}clear({color:a,depth:h,stencil:v,colorMask:S}){const E=this.gl;let D=0;a&&(D|=E.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set(S||[!0,!0,!0,!0])),h!==void 0&&(D|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),v!==void 0&&(D|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),E.clear(D)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){i.bv(a.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor),a.blendEquation?this.blendEquation.set(a.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(a.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let vo;function is(y,a,h,v,S,E,D){const O=y.context,N=O.gl,W=y.transform,Z=y.getOrCreateProgram("collisionBox"),te=[];let J=0,oe=0;for(let Ue=0;Ue<v.length;Ue++){const Ke=v[Ue],Ye=a.getTile(Ke),Ge=Ye.getBucket(h);if(!Ge)continue;const Ne=Pm(Ke,Ge,W);let Je=Ne;S[0]===0&&S[1]===0||(Je=y.translatePosMatrix(Ne,Ye,S,E));const nt=D?Ge.textCollisionBox:Ge.iconCollisionBox,bt=Ge.collisionCircleArray;if(bt.length>0){const mt=i.bz(),$t=Je;i.cB(mt,Ge.placementInvProjMatrix,W.glCoordMatrix),i.cB(mt,mt,Ge.placementViewportMatrix),te.push({circleArray:bt,circleOffset:oe,transform:$t,invTransform:mt,projection:Ge.getProjection()}),J+=bt.length/4,oe=J}nt&&(y.terrain&&y.terrain.setupElevationDraw(Ye,Z),Z.draw(y,N.LINES,Un.disabled,vr.disabled,y.colorModeForRenderPass(),br.disabled,e_(Je,W,Ye,Ge.getProjection()),h.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,null,W.zoom,null,[nt.collisionVertexBuffer,nt.collisionVertexBufferExt]))}if(!D||!te.length)return;const ge=y.getOrCreateProgram("collisionCircle"),pe=new i.dI;pe.resize(4*J),pe._trim();let ve=0;for(const Ue of te)for(let Ke=0;Ke<Ue.circleArray.length/4;Ke++){const Ye=4*Ke,Ge=Ue.circleArray[Ye+0],Ne=Ue.circleArray[Ye+1],Je=Ue.circleArray[Ye+2],nt=Ue.circleArray[Ye+3];pe.emplace(ve++,Ge,Ne,Je,nt,0),pe.emplace(ve++,Ge,Ne,Je,nt,1),pe.emplace(ve++,Ge,Ne,Je,nt,2),pe.emplace(ve++,Ge,Ne,Je,nt,3)}(!vo||vo.length<2*J)&&(vo=function(Ue){const Ke=2*Ue,Ye=new i.a_;Ye.resize(Ke),Ye._trim();for(let Ge=0;Ge<Ke;Ge++){const Ne=6*Ge;Ye.uint16[Ne+0]=4*Ge+0,Ye.uint16[Ne+1]=4*Ge+1,Ye.uint16[Ne+2]=4*Ge+2,Ye.uint16[Ne+3]=4*Ge+2,Ye.uint16[Ne+4]=4*Ge+3,Ye.uint16[Ne+5]=4*Ge+0}return Ye}(J));const me=O.createIndexBuffer(vo,!0),Re=O.createVertexBuffer(pe,i.dJ.members,!0);for(const Ue of te){const Ke={u_matrix:Ue.transform,u_inv_matrix:Ue.invTransform,u_camera_to_center_distance:(Be=W).getCameraToCenterDistance(Ue.projection),u_viewport_size:[Be.width,Be.height]};ge.draw(y,N.TRIANGLES,Un.disabled,vr.disabled,y.colorModeForRenderPass(),br.disabled,Ke,h.id,Re,me,i.bd.simpleSegment(0,2*Ue.circleOffset,Ue.circleArray.length,Ue.circleArray.length/2),null,W.zoom)}var Be;Re.destroy(),me.destroy()}const Nd=i.bz();function pu(y){const a=y._camera.getWorldToCamera(y.worldSize,1),h=i.az([],a,y.globeMatrix);i.bi(h,h);const v=[0,0,0],S=[0,1,0,0];return i.aA(S,S,h),v[0]=S[0],v[1]=S[1],v[2]=S[2],i.au(v,v),v}function mu({width:y,height:a,anchor:h,textOffset:v,textScale:S},E){const{horizontalAlign:D,verticalAlign:O}=i.bV(h),N=-(D-.5)*y,W=-(O-.5)*a,Z=i.bU(h,v);return new i.P((N/S+Z[0])*E,(W/S+Z[1])*E)}function Pp(y,a,h,v,S,E,D,O,N,W){const Z=y.text.placedSymbolArray,te=y.text.dynamicLayoutVertexArray,J=y.icon.dynamicLayoutVertexArray,oe={},ge=y.getProjection(),pe=Im(D,ge,S),ve=S.elevation,me=ge.upVectorScale(D.canonical,S.center.lat,S.worldSize).metersToTile;te.clear();for(let Re=0;Re<Z.length;Re++){const Be=Z.get(Re),{tileAnchorX:Ue,tileAnchorY:Ke,numGlyphs:Ye}=Be,Ge=Be.hidden||!Be.crossTileID||y.allowVerticalPlacement&&!Be.placedOrientation?null:v[Be.crossTileID];if(Ge){let Ne=0,Je=0,nt=0;if(ve){const Gt=ve?ve.getAtTileOffset(D,Ue,Ke):0,[Mt,Jt,qt]=ge.upVector(D.canonical,Ue,Ke);Ne=Gt*Mt*me,Je=Gt*Jt*me,nt=Gt*qt*me}let[bt,mt,$t,jt]=cl(Be.projectedAnchorX+Ne,Be.projectedAnchorY+Je,Be.projectedAnchorZ+nt,h?pe:E);const an=au(S.getCameraToCenterDistance(ge),jt);let pt=i.bJ(y.textSizeData,N,Be)*an/i.bO;h&&(pt*=y.tilePixelRatio/O);const Tt=mu(Ge,pt);h?({x:bt,y:mt,z:$t}=ge.projectTilePoint(Ue+Tt.x,Ke+Tt.y,D.canonical),[bt,mt,$t]=cl(bt+Ne,mt+Je,$t+nt,E)):(a&&Tt._rotate(-S.angle),bt+=Tt.x,mt+=Tt.y,$t=0);const ut=y.allowVerticalPlacement&&Be.placedOrientation===i.bI.vertical?Math.PI/2:0;for(let Gt=0;Gt<Ye;Gt++)i.bL(te,bt,mt,$t,ut);W&&Be.associatedIconIndex>=0&&(oe[Be.associatedIconIndex]={x:bt,y:mt,z:$t,angle:ut})}else bi(Ye,te)}if(W){J.clear();const Re=y.icon.placedSymbolArray;for(let Be=0;Be<Re.length;Be++){const Ue=Re.get(Be),{numGlyphs:Ke}=Ue,Ye=oe[Be];if(Ue.hidden||!Ye)bi(Ke,J);else{const{x:Ge,y:Ne,z:Je,angle:nt}=Ye;for(let bt=0;bt<Ke;bt++)i.bL(J,Ge,Ne,Je,nt)}}y.icon.dynamicLayoutVertexBuffer.updateData(J)}y.text.dynamicLayoutVertexBuffer.updateData(te)}function Vd(y,a,h,v,S,E,D={}){const O=h.paint.get("icon-translate"),N=h.paint.get("text-translate"),W=h.paint.get("icon-translate-anchor"),Z=h.paint.get("text-translate-anchor"),te=h.layout.get("icon-rotation-alignment"),J=h.layout.get("text-rotation-alignment"),oe=h.layout.get("icon-pitch-alignment"),ge=h.layout.get("text-pitch-alignment"),pe=h.layout.get("icon-keep-upright"),ve=h.layout.get("text-keep-upright"),me=h.paint.get("icon-color-saturation"),Re=h.paint.get("icon-color-contrast"),Be=h.paint.get("icon-color-brightness-min"),Ue=h.paint.get("icon-color-brightness-max"),Ke=h.layout.get("symbol-elevation-reference")==="sea",Ye=y.context,Ge=Ye.gl,Ne=y.transform,Je=te==="map",nt=J==="map",bt=oe==="map",mt=ge==="map",$t=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let jt=!1;const an=y.depthModeForSublayer(0,Un.ReadOnly),pt=new Un(y.context.gl.LEQUAL,Un.ReadOnly,y.depthRangeFor3D),Tt=[i.ay(Ne.center.lng),i.aH(Ne.center.lat)],ut=h.layout.get("text-variable-anchor"),Gt=Ne.projection.name==="globe",Mt=[],Jt=[0,-1,0];for(const qt of v){const en=a.getTile(qt),on=en.getBucket(h);if(!on||on.projection.name==="mercator"&&Gt||on.fullyClipped)continue;const Vn=on.projection.name==="globe",Gn=Vn?i.ah(Ne.zoom):0,Fn=Im(qt,on.getProjection(),Ne),Qn=Ne.calculatePixelsToTileUnitsMatrix(en),Wn=ut&&on.hasTextData(),hr=on.hasIconTextFit()&&Wn&&on.hasIconData(),Mr=on.elevationType==="road"?pt:an,ur=on.getProjection().createInversionMatrix(Ne,qt.canonical),Lr=y.shadowRenderer,_r=on.elevationType==="road"&&!!Lr&&Lr.enabled;let ar=[0,0,0];if(_r){const eo=y.style.directionalLight,Tr=y.style.ambientLight;eo&&Tr&&(ar=Pc(y.style,eo,Tr))}const Zr=eo=>{Ne.depthOcclusionForSymbolsAndCircles&&(h.hasInitialOcclusionOpacityProperties||y.terrain)&&(eo.push("DEPTH_D24"),eo.push("DEPTH_OCCLUSION"))},Ei=()=>{const eo=Je&&h.layout.get("symbol-placement")!=="point",Tr=[];Zr(Tr);const Ui=eo||hr,ai=h.paint.get("icon-image-cross-fade");y.terrainRenderModeElevated()&&bt&&Tr.push("PITCH_WITH_MAP_TERRAIN"),Vn&&(Tr.push("PROJECTION_GLOBE_VIEW"),Ui&&Tr.push("PROJECTED_POS_ON_VIEWPORT")),ai>0&&Tr.push("ICON_TRANSITION"),on.icon.zOffsetVertexBuffer&&Tr.push("Z_OFFSET"),me===0&&Re===0&&Be===0&&Ue===1||Tr.push("COLOR_ADJUSTMENT"),on.sdfIcons&&Tr.push("RENDER_SDF"),_r&&Tr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const gi=on.icon.programConfigurations.get(h.id),yi=y.getOrCreateProgram("symbol",{config:gi,defines:Tr}),to=en.imageAtlasTexture?en.imageAtlasTexture.size:[0,0],us=on.iconSizeData,qi=i.bH(us,Ne.zoom),Wo=bt||Ne.pitch!==0,zi=Xl(Fn,en.tileID.canonical,bt,Je,Ne,on.getProjection(),Qn),Qo=qh(Fn,en.tileID.canonical,bt,Je,Ne,on.getProjection(),Qn),Fa=y.translatePosMatrix(Qo,en,O,W,!0),_l=y.translatePosMatrix(Fn,en,O,W),Ba=Ui?Nd:zi,xl=Je&&!bt&&!eo;let Wc=Jt;!Gt&&!Ne.mercatorFromTransition||Je||(Wc=pu(Ne));const bl=Vn?Wc:Jt,jl=h.getColorAdjustmentMatrix(me,Re,Be,Ue),sa=Rp(us.kind,qi,xl,bt,y,_l,Ba,Fa,Ke,!1,to,[0,0],!0,qt,Gn,Tt,ur,bl,on.getProjection(),ar,jl,ai),ih=en.imageAtlasTexture?en.imageAtlasTexture:null,ja=h.layout.get("icon-size").constantOr(0)!==1||on.iconsNeedLinear,gg=on.sdfIcons||y.options.rotating||y.options.zooming||ja||Wo?Ge.LINEAR:Ge.NEAREST,yg=on.sdfIcons&&h.paint.get("icon-halo-width").constantOr(1)!==0,vg=y.terrain&&bt&&eo?i.bi(i.bz(),zi):Nd;if(eo&&on.icon){const Fi=Ne.elevation,td=Fi?Fi.getAtTileOffsetFunc(qt,Ne.center.lat,Ne.worldSize,on.getProjection()):null,_g=Uh(Fn,en.tileID.canonical,bt,Je,Ne,on.getProjection(),Qn);Hh(on,Fn,y,!1,_g,Qo,bt,pe,td,qt)}return{program:yi,buffers:on.icon,uniformValues:sa,atlasTexture:ih,atlasTextureIcon:null,atlasInterpolation:gg,atlasInterpolationIcon:null,isSDF:on.sdfIcons,hasHalo:yg,depthMode:Mr,tile:en,renderWithShadows:_r,labelPlaneMatrixInv:vg}},Ar=()=>{const eo=nt&&h.layout.get("symbol-placement")!=="point",Tr=[],Ui=eo||ut||hr;y.terrainRenderModeElevated()&&mt&&Tr.push("PITCH_WITH_MAP_TERRAIN"),Vn&&(Tr.push("PROJECTION_GLOBE_VIEW"),Ui&&Tr.push("PROJECTED_POS_ON_VIEWPORT")),on.text.zOffsetVertexBuffer&&Tr.push("Z_OFFSET"),on.iconsInText&&Tr.push("RENDER_TEXT_AND_SYMBOL"),Tr.push("RENDER_SDF"),_r&&Tr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Zr(Tr);const ai=on.text.programConfigurations.get(h.id),gi=y.getOrCreateProgram("symbol",{config:ai,defines:Tr});let yi,to=[0,0],us=null;const qi=on.textSizeData;on.iconsInText&&(to=en.imageAtlasTexture?en.imageAtlasTexture.size:[0,0],us=en.imageAtlasTexture?en.imageAtlasTexture:null,yi=mt||Ne.pitch!==0||y.options.rotating||y.options.zooming||qi.kind==="composite"||qi.kind==="camera"?Ge.LINEAR:Ge.NEAREST);const Wo=en.glyphAtlasTexture?en.glyphAtlasTexture.size:[0,0],zi=h.layout.get("text-size-scale-range"),Qo=i.aD(y.scaleFactor,zi[0],zi[1]),Fa=i.bH(qi,Ne.zoom,Qo),_l=Xl(Fn,en.tileID.canonical,mt,nt,Ne,on.getProjection(),Qn),Ba=qh(Fn,en.tileID.canonical,mt,nt,Ne,on.getProjection(),Qn),xl=y.translatePosMatrix(Ba,en,N,Z,!0),Wc=y.translatePosMatrix(Fn,en,N,Z),bl=Ui?Nd:_l,jl=nt&&!mt&&!eo;let sa=Jt;!Gt&&!Ne.mercatorFromTransition||nt||(sa=pu(Ne));const ih=Rp(qi.kind,Fa,jl,mt,y,Wc,bl,xl,Ke,!0,Wo,to,!0,qt,Gn,Tt,ur,Vn?sa:Jt,on.getProjection(),ar,null,null,Qo),ja=en.glyphAtlasTexture?en.glyphAtlasTexture:null,gg=Ge.LINEAR,yg=h.paint.get("text-halo-width").constantOr(1)!==0,vg=y.terrain&&mt&&eo?i.bi(i.bz(),_l):Nd;if(eo&&on.text){const Fi=Ne.elevation,td=Fi?Fi.getAtTileOffsetFunc(qt,Ne.center.lat,Ne.worldSize,on.getProjection()):null,_g=Uh(Fn,en.tileID.canonical,mt,nt,Ne,on.getProjection(),Qn);Hh(on,Fn,y,!0,_g,Ba,mt,ve,td,qt)}return{program:gi,buffers:on.text,uniformValues:ih,atlasTexture:ja,atlasTextureIcon:us,atlasInterpolation:gg,atlasInterpolationIcon:yi,isSDF:!0,hasHalo:yg,depthMode:Mr,tile:en,renderWithShadows:_r,labelPlaneMatrixInv:vg}},Kr=on.icon.segments.get().length,di=on.text.segments.get().length,pi=Kr&&!D.onlyText?Ei():null,Ci=di&&!D.onlyIcons?Ar():null,Ji=h.paint.get("icon-opacity").constantOr(1),Ao=h.paint.get("text-opacity").constantOr(1);if($t&&on.canOverlap){jt=!0;const eo=Ji&&!D.onlyText?on.icon.segments.get():[],Tr=Ao&&!D.onlyIcons?on.text.segments.get():[];for(const Ui of eo)Mt.push({segments:new i.bd([Ui]),sortKey:Ui.sortKey,state:pi});for(const Ui of Tr)Mt.push({segments:new i.bd([Ui]),sortKey:Ui.sortKey,state:Ci})}else D.onlyText||Mt.push({segments:Ji?on.icon.segments:new i.bd([]),sortKey:0,state:pi}),D.onlyIcons||Mt.push({segments:Ao?on.text.segments:new i.bd([]),sortKey:0,state:Ci})}jt&&Mt.sort((qt,en)=>qt.sortKey-en.sortKey);for(const qt of Mt){const en=qt.state;if(en)if(y.terrain?y.terrain.setupElevationDraw(en.tile,en.program,{useDepthForOcclusion:Ne.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:en.labelPlaneMatrixInv}):y.setupDepthForOcclusion(Ne.depthOcclusionForSymbolsAndCircles,en.program),Ye.activeTexture.set(Ge.TEXTURE0),en.atlasTexture&&en.atlasTexture.bind(en.atlasInterpolation,Ge.CLAMP_TO_EDGE,!0),en.atlasTextureIcon&&(Ye.activeTexture.set(Ge.TEXTURE1),en.atlasTextureIcon&&en.atlasTextureIcon.bind(en.atlasInterpolationIcon,Ge.CLAMP_TO_EDGE,!0)),en.renderWithShadows&&y.shadowRenderer.setupShadows(en.tile.tileID.toUnwrapped(),en.program,"vector-tile",en.tile.tileID.overscaledZ),y.uploadCommonLightUniforms(y.context,en.program),en.hasHalo){const on=en.uniformValues;on.u_is_halo=1,$d(en.buffers,qt.segments,h,y,en.program,en.depthMode,S,E,on,2),on.u_is_halo=0}else{if(en.isSDF){const on=en.uniformValues;en.hasHalo&&(on.u_is_halo=1,$d(en.buffers,qt.segments,h,y,en.program,en.depthMode,S,E,on,1)),on.u_is_halo=0}$d(en.buffers,qt.segments,h,y,en.program,en.depthMode,S,E,en.uniformValues,1)}}}function $d(y,a,h,v,S,E,D,O,N,W){const Z=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.iconTransitioningVertexBuffer,y.globeExtVertexBuffer,y.zOffsetVertexBuffer];S.draw(v,v.context.gl.TRIANGLES,E,D,O,br.disabled,N,h.id,y.layoutVertexBuffer,y.indexBuffer,a,h.paint,v.transform.zoom,y.programConfigurations.get(h.id),Z,W)}function Ip(y,a){const h=1<<y.canonical.z,v=(a.x*h-y.canonical.x-y.wrap*h)*i.aj,S=(a.y*h-y.canonical.y)*i.aj,E=i.dS(a.z,a.y);return i.cS(v,S,E)}function os(y,a,h,v,S){if(!h.layout||h.layout.get("fill-elevation-reference")==="none")return;const E=y.context.gl,D=new Un(y.context.gl.LEQUAL,Un.ReadWrite,y.depthRangeFor3D),O=new Un(y.context.gl.GREATER,Un.ReadWrite,y.depthRangeFor3D),N=function(oe){const ge=i.cJ(oe.pitch);let pe=.01;return oe.isOrthographic&&(pe=i.ai(1e-4,pe,i.cO(ge>=Fu?1:ge/Fu))),2*pe}(y.transform),W=y.transform.getFreeCameraOptions().position,Z="elevatedStructuresDepthReconstruct",te=y.getOrCreateProgram(Z,{defines:["DEPTH_RECONSTRUCTION"]}),J=y.getOrCreateProgram(Z);for(const oe of v){const ge=a.getTile(oe),pe=ge.getBucket(h);if(!pe)continue;const ve=pe.elevatedStructures;if(!ve)continue;const me=pe.elevationBufferData.heightRange,Re=Ip(oe.toUnwrapped(),W),Be=y.translatePosMatrix(oe.projMatrix,ge,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));let Ue,Ke,Ye,Ge;if(S==="initialize"){if(!me||me.min>=1||ve.depthSegments.segments[0].primitiveLength===0)continue;Ue=ff(Be,Re,N,1,0),Ke=D,Ye=ve.depthSegments,Ge=te}else if(S==="reset"){if(!me||me.min>=0||ve.maskSegments.segments[0].primitiveLength===0)continue;Ue=ff(Be,Re,0,0,1),Ke=O,Ye=ve.maskSegments,Ge=te}else if(S==="geometry"){if(ve.depthSegments.segments[0].primitiveLength===0)continue;Ue=ff(Be,Re,N,1,0),Ke=D,Ye=ve.depthSegments,Ge=J}Ge.draw(y,E.TRIANGLES,Ke,vr.disabled,Nr.disabled,br.disabled,Ue,h.id,ve.vertexBuffer,ve.indexBuffer,Ye,h.paint,y.transform.zoom)}}function zn(y,a,h){const{painter:v,sourceCache:S,layer:E,coords:D,colorMode:O,elevationType:N,terrainEnabled:W,pass:Z}=y,te=v.context.gl,J=E.paint.get("fill-pattern"),oe=E.paint.get("fill-pattern-cross-fade"),ge=J.constantOr(null);let pe=N;N!=="road"||a&&!W||(pe="none");const ve=pe==="road",me=y.painter.shadowRenderer,Re=ve&&!!me&&me.enabled,Be=new Un(v.context.gl.LEQUAL,Un.ReadOnly,v.depthRangeFor3D);let Ue=[0,0,0];if(Re){const Ge=v.style.directionalLight,Ne=v.style.ambientLight;Ge&&Ne&&(Ue=Pc(v.style,Ge,Ne))}const Ke=J&&J.constantOr(1),Ye=(Ge,Ne)=>{let Je,nt,bt,mt,$t;Ne?(Je=Ke&&!E.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",bt=te.LINES):(Je=Ke?"fillPattern":"fill",bt=te.TRIANGLES);for(const jt of D){const an=S.getTile(jt);if(Ke&&!an.patternsLoaded())continue;const pt=an.getBucket(E);if(!pt)continue;const Tt=a?pt.elevationBufferData:pt.bufferData;if(Tt.isEmpty())continue;v.prepareDrawTile();const ut=Tt.programConfigurations.get(E.id),Gt=v.isTileAffectedByFog(jt),Mt=[],Jt=[];ve&&(Mt.push("ELEVATED_ROADS"),Jt.push(Tt.elevatedLayoutVertexBuffer)),Re&&Mt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),Ke&&(v.context.activeTexture.set(te.TEXTURE0),an.imageAtlasTexture&&an.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),ut.updatePaintBuffers());let qt=!1;if(ge&&an.imageAtlas){const Fn=an.imageAtlas,Qn=i.dN.from(ge),Wn=Qn.getPrimary().scaleSelf(i.q.devicePixelRatio).toString(),hr=Qn.getSecondary(),Mr=Fn.patternPositions.get(Wn),ur=hr?Fn.patternPositions.get(hr.scaleSelf(i.q.devicePixelRatio).toString()):null;qt=!!Mr&&!!ur,Mr&&ut.setConstantPatternPositions(Mr,ur)}oe>0&&(qt||ut.getPatternTransitionVertexBuffer("fill-pattern"))&&Mt.push("FILL_PATTERN_TRANSITION");const en=v.getOrCreateProgram(Je,{config:ut,overrideFog:Gt,defines:Mt}),on=v.translatePosMatrix(jt.projMatrix,an,E.paint.get("fill-translate"),E.paint.get("fill-translate-anchor"));Re&&me.setupShadows(an.tileID.toUnwrapped(),en,"vector-tile",an.tileID.overscaledZ);const Vn=E.paint.get("fill-emissive-strength");if(Ne){mt=Tt.lineIndexBuffer,$t=Tt.lineSegments;const Fn=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[te.drawingBufferWidth,te.drawingBufferHeight];nt=Je==="fillOutlinePattern"&&Ke?mx(on,Vn,v,an,Fn,Ue,oe):Zm(on,Vn,Fn,Ue)}else mt=Tt.indexBuffer,$t=Tt.triangleSegments,nt=Ke?Jv(on,Vn,v,an,Ue,oe):Xm(on,Vn,Ue);v.uploadCommonUniforms(v.context,en,jt.toUnwrapped());let Gn=Ge;(N==="road"&&!W||N==="offset")&&(Gn=Be),en.draw(v,bt,Gn,h||v.stencilModeForClipping(jt),O,br.disabled,nt,E.id,Tt.layoutVertexBuffer,mt,$t,E.paint,v.transform.zoom,ut,Jt)}};v.renderPass===Z&&Ye(v.depthModeForSublayer(1,v.renderPass==="opaque"?Un.ReadWrite:Un.ReadOnly),!1),pe==="none"&&v.renderPass==="translucent"&&E.paint.get("fill-antialias")&&Ye(v.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Un.ReadOnly),!0)}function mf(y,a,h,v,S,E,D,O){h.resetLayerRenderingStats(y);const N=y.context,W=N.gl,Z=y.transform,te=h.paint.get("fill-extrusion-pattern"),J=h.paint.get("fill-extrusion-pattern-cross-fade"),oe=te.constantOr(null),ge=te.constantOr(1),pe=h.paint.get("fill-extrusion-opacity"),ve=y.style.enable3dLights(),me=h.paint.get(ve&&!ge?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Re=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),me],Be=h.layout.get("fill-extrusion-edge-radius"),Ue=Be>0&&!h.paint.get("fill-extrusion-rounded-roof"),Ke=Ue?0:Be,Ye=Z.projection.name==="globe"?i.dT():0,Ge=Z.projection.name==="globe",Ne=Ge?i.ah(Z.zoom):0,Je=[i.ay(Z.center.lng),i.aH(Z.center.lat)],nt=h.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",bt=h.paint.get("fill-extrusion-flood-light-color").toRenderColor(nt?null:h.lut).toArray01().slice(0,3),mt=h.paint.get("fill-extrusion-flood-light-intensity"),$t=h.paint.get("fill-extrusion-vertical-scale"),jt=h.paint.get("fill-extrusion-line-width").constantOr(1)!==0,an=h.paint.get("fill-extrusion-height-alignment"),pt=h.paint.get("fill-extrusion-base-alignment"),Tt=Jh(y,h.paint.get("fill-extrusion-cutoff-fade-range")),ut=[];let Gt;Ge&&ut.push("PROJECTION_GLOBE_VIEW"),Re[0]>0&&ut.push("FAUX_AO"),Ue&&ut.push("ZERO_ROOF_RADIUS"),O&&ut.push("HAS_CENTROID"),mt>0&&ut.push("FLOOD_LIGHT"),Tt.shouldRenderCutoff&&ut.push("RENDER_CUTOFF"),jt&&ut.push("RENDER_WALL_MODE");const Mt=y.renderPass==="shadow",Jt=y.shadowRenderer,qt=Mt&&!!Jt,en=Mt?br.disabled:br.backCCW;y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!0);let on=[0,0,0];if(Jt){const Fn=y.style.directionalLight,Qn=y.style.ambientLight;Fn&&Qn&&(on=Pc(y.style,Fn,Qn)),Mt||(ut.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Jt.useNormalOffset&&ut.push("NORMAL_OFFSET")),Gt=ut.concat(["SHADOWS_SINGLE_CASCADE"])}const Vn=qt?"fillExtrusionDepth":ge?"fillExtrusionPattern":"fillExtrusion",Gn=h.getLayerRenderingStats();for(const Fn of v){const Qn=a.getTile(Fn),Wn=Qn.getBucket(h);if(!Wn||Wn.projection.name!==Z.projection.name)continue;let hr=!1;Jt&&(hr=Jt.getMaxCascadeForTile(Fn.toUnwrapped())===0);const Mr=y.isTileAffectedByFog(Fn),ur=Wn.programConfigurations.get(h.id);let Lr=!1;if(oe&&Qn.imageAtlas){const di=Qn.imageAtlas,pi=i.dN.from(oe),Ci=pi.getPrimary().scaleSelf(i.q.devicePixelRatio).toString(),Ji=pi.getSecondary(),Ao=di.patternPositions.get(Ci),eo=Ji?di.patternPositions.get(Ji.scaleSelf(i.q.devicePixelRatio).toString()):null;Lr=!!Ao&&!!eo,Ao&&ur.setConstantPatternPositions(Ao,eo)}J>0&&(Lr||ur.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&ut.push("FILL_EXTRUSION_PATTERN_TRANSITION");const _r=y.getOrCreateProgram(Vn,{config:ur,defines:hr?Gt:ut,overrideFog:Mr});if(y.terrain&&y.terrain.setupElevationDraw(Qn,_r,{useMeterToDem:!0}),!Wn.centroidVertexBuffer){const di=_r.attributes.a_centroid_pos;di!==void 0&&W.vertexAttrib2f(di,0,0)}!Mt&&Jt&&Jt.setupShadows(Qn.tileID.toUnwrapped(),_r,"vector-tile",Qn.tileID.overscaledZ),ge&&(y.context.activeTexture.set(W.TEXTURE0),Qn.imageAtlasTexture&&Qn.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),ur.updatePaintBuffers());const ar=h.paint.get("fill-extrusion-vertical-gradient"),Zr=1/Wn.tileToMeter;let Ei;if(Mt&&Jt){if(r_(Qn.tileID,Wn,y))continue;const di=Jt.calculateShadowPassMatrixFromTile(Qn.tileID.toUnwrapped());Ei=hf(di,Ke,Zr,$t,an,pt)}else{const di=y.translatePosMatrix(Fn.expandedProjMatrix,Qn,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),pi=Z.projection.createInversionMatrix(Z,Fn.canonical);Ei=ge?Qv(di,y,ar,pe,Re,Ke,Zr,Fn,Qn,Ye,an,pt,Ne,Je,pi,bt,$t,J):Fd(di,y,ar,pe,Re,Ke,Zr,Fn,Ye,an,pt,Ne,Je,pi,bt,$t,mt,on)}y.uploadCommonUniforms(N,_r,Fn.toUnwrapped(),null,Tt);let Ar=Wn.segments;if(Z.projection.name==="mercator"&&!Mt&&(Ar=Wn.getVisibleSegments(Qn.tileID,y.terrain,y.transform.getFrustum(0)),!Ar.get().length))continue;if(Gn)if(Mt)for(const di of Ar.get())Gn.numRenderedVerticesInShadowPass+=di.primitiveLength;else for(const di of Ar.get())Gn.numRenderedVerticesInTransparentPass+=di.primitiveLength;const Kr=[];(y.terrain||O)&&Kr.push(Wn.centroidVertexBuffer),Ge&&Kr.push(Wn.layoutVertexExtBuffer),jt&&Kr.push(Wn.wallVertexBuffer),_r.draw(y,N.gl.TRIANGLES,S,E,D,en,Ei,h.id,Wn.layoutVertexBuffer,Wn.indexBuffer,Ar,h.paint,y.transform.zoom,ur,Kr)}y.shadowRenderer&&(y.shadowRenderer.useNormalOffset=!1)}function Ud(y,a,h,v,S,E,D,O,N,W,Z,te,J,oe,ge,pe,ve,me,Re){const Be=y.context,Ue=Be.gl,Ke=y.transform,Ye=y.transform.zoom,Ge=[],Ne=Jh(y,h.paint.get("fill-extrusion-cutoff-fade-range"));W==="clear"?(Ge.push("CLEAR_SUBPASS"),Re&&(Ge.push("CLEAR_FROM_TEXTURE"),Be.activeTexture.set(Ue.TEXTURE0),Re.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE))):W==="sdf"&&Ge.push("SDF_SUBPASS"),ve&&Ge.push("HAS_CENTROID"),Ne.shouldRenderCutoff&&Ge.push("RENDER_CUTOFF");const Je=h.layout.get("fill-extrusion-edge-radius"),nt=(bt,mt,$t,jt,an)=>{const pt=mt.programConfigurations.get(h.id),Tt=y.isTileAffectedByFog(bt),ut=y.getOrCreateProgram("fillExtrusionGroundEffect",{config:pt,defines:Ge,overrideFog:Tt}),Gt=((Jt,qt,en,on,Vn,Gn,Fn,Qn,Wn,hr,Mr)=>({u_matrix:qt,u_opacity:en,u_ao_pass:on?1:0,u_meter_to_tile:Vn,u_ao:Gn,u_flood_light_intensity:Fn,u_flood_light_color:Qn,u_attenuation:Wn,u_edge_radius:hr,u_fb:0,u_fb_size:Mr,u_dynamic_offset:1}))(0,jt,Z,N,an,[te,J*an],oe,ge,pe,Ye>=17?0:Je*an,Re?Re.size[0]:0),Mt=[];ve&&Mt.push(mt.hiddenByLandmarkVertexBuffer),y.uploadCommonUniforms(Be,ut,bt.toUnwrapped(),null,Ne),ut.draw(y,Be.gl.TRIANGLES,S,E,D,O,Gt,h.id,mt.vertexBuffer,mt.indexBuffer,$t,h.paint,Ye,pt,Mt)};for(const bt of v){const mt=a.getTile(bt),$t=mt.getBucket(h);if(!$t||$t.projection.name!==Ke.projection.name||!$t.groundEffect||$t.groundEffect&&!$t.groundEffect.hasData())continue;const jt=$t.groundEffect,an=1/$t.tileToMeter;{const pt=y.translatePosMatrix(bt.projMatrix,mt,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Tt=jt.getDefaultSegment();nt(bt,jt,Tt,pt,an)}if(me)for(let pt=0;pt<4;pt++){const Tt=i.dU[pt](bt),ut=a.getTile(Tt);if(!ut)continue;const Gt=ut.getBucket(h);if(!Gt||Gt.projection.name!==Ke.projection.name||!Gt.groundEffect||Gt.groundEffect&&!Gt.groundEffect.hasData())continue;const Mt=Gt.groundEffect;let Jt,qt;pt===0?(Jt=[-i.aj,0,0],qt=1):pt===1?(Jt=[i.aj,0,0],qt=0):pt===2?(Jt=[0,-i.aj,0],qt=3):(Jt=[0,i.aj,0],qt=2);const en=Mt.regionSegments[qt];if(!en)continue;const on=new Float32Array(16);i.bo(on,bt.projMatrix,Jt),nt(bt,Mt,en,y.translatePosMatrix(on,mt,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),an)}}}function Gu(y,a,h,v,S,E,D){v.centroidVertexArray.length===0&&v.createCentroidsBuffer();const O=E?E.findDEMTileFor(h):null;if(!(O&&O.dem||D))return;E&&O&&O.dem&&v.selfDEMTileTimestamp!==O.dem._timestamp&&(v.borderDoneWithNeighborZ=[-1,-1,-1,-1],v.selfDEMTileTimestamp=O.dem._timestamp);const N=me=>new i.P(Math.ceil((me+i.dX)*i.dY),0),W=me=>{const Re=a.getSource().minzoom,Be=Ke=>{const Ye=a.getTileByID(Ke);if(Ye&&Ye.hasData())return Ye.getBucket(S)},Ue=[0,-1,1];for(const Ke of Ue){if(me.overscaledZ+Ke<Re)continue;const Ye=Be(me.calculateScaledKey(me.overscaledZ+Ke));if(Ye)return Ye}},Z=[0,0,0],te=(me,Re)=>(Z[0]=Math.min(me.min.y,Re.min.y),Z[1]=Math.max(me.max.y,Re.max.y),Z[2]=i.aj-Re.min.x>me.max.x?Re.min.x-i.aj:me.max.x,Z),J=(me,Re)=>(Z[0]=Math.min(me.min.x,Re.min.x),Z[1]=Math.max(me.max.x,Re.max.x),Z[2]=i.aj-Re.min.y>me.max.y?Re.min.y-i.aj:me.max.y,Z),oe=[(me,Re)=>te(me,Re),(me,Re)=>te(Re,me),(me,Re)=>J(me,Re),(me,Re)=>J(Re,me)],ge=(me,Re,Be,Ue,Ke,Ye,Ge)=>{if(!E)return 0;const Ne=[[Ye?Be:me,Ye?me:Be,0],[Ye?Be:Re,Ye?Re:Be,0]],Je=Ge<0?i.aj+Ge:Ge,nt=[Ye?Je:(me+Re)/2,Ye?(me+Re)/2:Je,0];return Be===0&&Ge<0||Be!==0&&Ge>0?E.getForTilePoints(Ke,[nt],!0,Ue):Ne.push(nt),E.getForTilePoints(h,Ne,!0,O),Math.max(Ne[0][2],Ne[1][2],nt[2])/E.exaggeration()};for(let me=0;me<4;me++){const Re=v.borderFeatureIndices[me];if(Re.length===0)continue;const Be=i.dU[me](h),Ue=W(Be);if(!(Ue&&Ue instanceof i.dV))continue;const Ke=E?E.findDEMTileFor(Be):null;if(!(Ke&&Ke.dem||D)||(E&&Ke&&Ke.dem&&v.borderDEMTileTimestamp[me]!==Ke.dem._timestamp&&(v.borderDoneWithNeighborZ[me]=-1,v.borderDEMTileTimestamp[me]=Ke.dem._timestamp),v.borderDoneWithNeighborZ[me]===Ue.canonical.z))continue;Ue.centroidVertexArray.length===0&&Ue.createCentroidsBuffer();const Ye=(me<2?1:5)-me,Ge=Ue.borderDoneWithNeighborZ[Ye]!==v.canonical.z,Ne=Ue.borderFeatureIndices[Ye];let Je=0;if(v.canonical.z!==Ue.canonical.z){for(const nt of Re)v.showCentroid(v.featuresOnBorder[nt]);if(Ge)for(const nt of Ne)Ue.showCentroid(Ue.featuresOnBorder[nt]);v.borderDoneWithNeighborZ[me]=Ue.canonical.z,Ue.borderDoneWithNeighborZ[Ye]=v.canonical.z}for(const nt of Re){const bt=v.featuresOnBorder[nt],mt=v.centroidData[bt.centroidDataIndex],$t=bt.borders[me];let jt;for(;Je<Ne.length;){jt=Ue.featuresOnBorder[Ne[Je]];const an=jt.borders[Ye];if(an[1]>$t[0]+3||an[0]>$t[0]-3)break;Ue.showCentroid(jt),Je++}if(jt&&Je<Ne.length){const an=Je;let pt=0;for(;!(jt.borders[Ye][0]>$t[1]-3)&&(pt++,++Je!==Ne.length);)jt=Ue.featuresOnBorder[Ne[Je]];jt=Ue.featuresOnBorder[Ne[an]];let Tt=!1;if(pt>=1){const Mt=jt.borders[Ye];Math.abs($t[0]-Mt[0])<3&&Math.abs($t[1]-Mt[1])<3&&(pt=1,Tt=!0,Je=an+1)}else if(pt===0){v.showCentroid(bt);continue}const ut=Ue.centroidData[jt.centroidDataIndex];D&&Tt&&(((pe=mt).flags|(ve=ut).flags)&i.dW?(pe.flags|=i.dW,ve.flags|=i.dW):(pe.flags&=~i.dW,ve.flags&=~i.dW));const Gt=bt.intersectsCount()>1||jt.intersectsCount()>1;if(pt>1)Je=an,mt.centroidXY=ut.centroidXY=new i.P(0,0);else if(Ke&&Ke.dem&&!Gt){const Mt=oe[me](mt,ut),Jt=me%2?i.aj-1:0,qt=ge(Mt[0],Math.min(i.aj-1,Mt[1]),Jt,Ke,Be,me<2,Mt[2]);mt.centroidXY=ut.centroidXY=N(qt)}else Gt?mt.centroidXY=ut.centroidXY=new i.P(0,0):(mt.centroidXY=v.encodeBorderCentroid(bt),ut.centroidXY=Ue.encodeBorderCentroid(jt));v.writeCentroidToBuffer(mt),Ue.writeCentroidToBuffer(ut)}else v.showCentroid(bt)}v.borderDoneWithNeighborZ[me]=Ue.canonical.z,Ue.borderDoneWithNeighborZ[Ye]=v.canonical.z}var pe,ve;(v.needsCentroidUpdate||!v.centroidVertexBuffer&&v.centroidVertexArray.length!==0)&&v.uploadCentroid(y)}const qd=[1,0,0],cr=[0,1,0],tg=[0,0,1];function r_(y,a,h){const v=h.transform,S=h.shadowRenderer;if(!S)return!0;const E=y.toUnwrapped(),D=v.tileSize*S._cascades[h.currentShadowCascade].scale;let O=a.maxHeight;if(v.elevation){const pe=v.elevation.getMinMaxForTile(y);pe&&(O+=pe.max)}const N=[...S.shadowDirection];N[2]=-N[2];const W=S.computeSimplifiedTileShadowVolume(E,O,D,N);if(!W)return!1;const Z=[qd,cr,tg,N,[N[0],0,N[2]],[0,N[1],N[2]]],te=v.projection.name==="globe",J=v.scaleZoom(D),oe=i.cn.fromInvProjectionMatrix(v.invProjMatrix,v.worldSize,J,!te),ge=S.getCurrentCascadeFrustum();return oe.intersectsPrecise(W.vertices,W.planes,Z)===0||ge.intersectsPrecise(W.vertices,W.planes,Z)===0}function Qa(y){return[y[0]*i.dZ,y[1]*i.dZ,y[2]*i.dZ,0]}function cs(y,a,h,v,S,E,D,O,N){const W=v.getSource(),Z=h.globeSharedBuffers;if(!Z)return;let te,J,oe;if(a&&(te=v.getTile(a)),W instanceof i.aP?(J=W.texture,oe=i.ds(0,0,h.transform)):te&&a&&(J=te.texture,oe=i.ds(a.canonical.z,a.canonical.x,h.transform)),!J||!oe)return;y||(oe=i.cE(i.bz(),oe,[1,-1,1]));const ge=h.context,pe=ge.gl,ve=S.paint.get("raster-resampling")==="nearest"?pe.NEAREST:pe.LINEAR,me=h.colorModeForDrapableLayerRenderPass(E),Re=D.defines;Re.push("GLOBE_POLES");const Be=new Un(pe.LEQUAL,Un.ReadWrite,h.depthRangeFor3D),Ue=Float32Array.from(h.transform.expandedFarZProjMatrix),Ke=Float32Array.from(i.bh(i.dr(new i.cp(0,0,0))));h.terrain&&h.terrain.prepareDrawTile(),ge.activeTexture.set(pe.TEXTURE0),J.bind(ve,pe.CLAMP_TO_EDGE),ge.activeTexture.set(pe.TEXTURE1),J.bind(ve,pe.CLAMP_TO_EDGE),"useMipmap"in J&&ge.extTextureFilterAnisotropic&&h.transform.pitch>20&&pe.texParameterf(pe.TEXTURE_2D,ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ge.extTextureFilterAnisotropicMax);const[Ye,Ge,Ne,Je]=a?Z.getPoleBuffers(a.canonical.z,!1):Z.getPoleBuffers(0,!0),nt=S.paint.get("raster-elevation");let bt;y?(bt=Ye,h.renderDefaultNorthPole=nt!==0):(bt=Ge,h.renderDefaultSouthPole=nt!==0);const mt=Qa(D.mix),$t=((an,pt,Tt,ut,Gt,Mt,Jt,qt,en,on,Vn,Gn,Fn)=>Za(an,pt,Tt,new Float32Array(16),new Float32Array(9),[0,0],ut,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Mt,[0,0],qt,2,on,Vn,Gn,1,0,Fn))(Ue,Ke,oe,i.ah(h.transform.zoom),0,S,0,nt,0,mt,D.offset,D.range,E),jt=h.getOrCreateProgram("raster",{defines:Re});h.uploadCommonUniforms(ge,jt,null),jt.draw(h,pe.TRIANGLES,Be,N,me,O,$t,S.id,bt,Ne,Je)}function Sy(y){const a=y._nearZ,h=y.projection.farthestPixelDistance(y),v=h-a,S=.2*y.height,E=a+S;return[a,h,(E-S-a)/v,(E-a)/v]}function ng(y,a,h,v){if(y)return a instanceof zs&&y instanceof Cm?a.getTextureDescriptor(y,h,!0):{texture:y.texture,mix:Qa(v.mix),offset:v.offset,buffer:0,tileSize:1}}var rg=i.d_([{name:"a_index",type:"Int16",components:1}]);class i_{constructor(a,h,v,S){const E={width:v[0],height:v[1],data:null},D=a.gl;this.targetColorTexture=new i.T(a,E,D.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(a,E,D.RGBA8,{useMipmap:!1}),this.context=a,this.updateParticleTexture(h,S),this.lastInvalidatedAt=0}updateParticleTexture(a,h){if(this.particleTextureDimension===h.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const v=this.context.gl,S=h.width*h.height;this.particleTexture0=new i.T(this.context,h,v.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,h,v.RGBA8,{premultiply:!1,useMipmap:!1});const E=new i.d$;E.reserve(S);for(let D=0;D<S;D++)E.emplaceBack(D);this.particleIndexBuffer=this.context.createVertexBuffer(E,rg.members,!0),this.particleSegment=i.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=h.width}update(a){return!(this.lastInvalidatedAt<a&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Yu(y,a,h){if(!y)return null;const v=a.getTextureDescriptor(y,h,!0);if(!v)return null;let{texture:S,mix:E,offset:D,tileSize:O,buffer:N,format:W}=v;if(!S||!W)return null;let Z=!1;return W==="uint32"&&(Z=!0,E[3]=0,E=xy(i.e0,E,[0,h.paint.get("raster-particle-max-speed")]),D=Km(i.e0,D,[0,h.paint.get("raster-particle-max-speed")])),{texture:S,textureOffset:[N/(O+2*N),O/(O+2*N)],tileSize:O,scalarData:Z,scale:E,offset:D,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[W]]}}function kp(y){const a=y._nearZ,h=y.projection.farthestPixelDistance(y),v=h-a,S=.2*y.height,E=a+S;return[a,h,(E-S-a)/v,(E-a)/v]}const ig=new i.am(1,0,0,1),og=new i.am(0,1,0,1),Ty=new i.am(0,0,1,1),Ja=new i.am(1,0,1,1),Xu=new i.am(0,1,1,1);function Hd(y,a,h,v,S,E,D){const O=y.context,N=y.transform,W=O.gl,Z=N.projection.name==="globe",te=Z?["PROJECTION_GLOBE_VIEW"]:[];let J=i.bw(h.projMatrix);if(Z&&i.ah(N.zoom)>0){const mt=i.bg(h.canonical,N),$t=i.e1(mt);J=i.az(new Float32Array(16),N.globeMatrix,$t),i.az(J,N.projMatrix,J)}const oe=i.bz();oe[12]+=2*S/(i.q.devicePixelRatio*N.width),oe[13]+=2*E/(i.q.devicePixelRatio*N.height),i.az(J,oe,J);const ge=y.getOrCreateProgram("debug",{defines:te}),pe=a.getTileByID(h.key);y.terrain&&y.terrain.setupElevationDraw(pe,ge);const ve=Un.disabled,me=vr.disabled,Re=y.colorModeForRenderPass(),Be="$debug";O.activeTexture.set(W.TEXTURE0),y.emptyTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),Z?pe._makeGlobeTileDebugBuffers(y.context,N):pe._makeDebugTileBoundsBuffers(y.context,N.projection);const Ue=pe._tileDebugBuffer||y.debugBuffer,Ke=pe._tileDebugIndexBuffer||y.debugIndexBuffer,Ye=pe._tileDebugSegments||y.debugSegments;if(ge.draw(y,W.LINE_STRIP,ve,me,Re,br.disabled,du(J,v),Be,Ue,Ke,Ye,null,null,null,[pe._globeTileDebugBorderBuffer]),D){const mt=pe.latestRawTileData,$t=Math.floor((mt&&mt.byteLength||0)/1024);let jt=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(jt+=` => ${h.overscaledZ}`),jt+=` ${pe.state}`,jt+=` ${$t}kb`,function(an,pt){an.initDebugOverlayCanvas();const Tt=an.debugOverlayCanvas,ut=an.context.gl,Gt=an.debugOverlayCanvas.getContext("2d");Gt.clearRect(0,0,Tt.width,Tt.height),Gt.shadowColor="white",Gt.shadowBlur=2,Gt.lineWidth=1.5,Gt.strokeStyle="white",Gt.textBaseline="top",Gt.font="bold 36px Open Sans, sans-serif",Gt.fillText(pt,5,5),Gt.strokeText(pt,5,5),an.debugOverlayTexture.update(Tt),an.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(y,jt)}const Ge=a.getTile(h).tileSize,Ne=512/Math.min(Ge,512)*(h.overscaledZ/N.zoom)*.5,Je=pe._tileDebugTextBuffer||y.debugBuffer,nt=pe._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,bt=pe._tileDebugTextSegments||y.debugSegments;ge.draw(y,W.TRIANGLES,ve,me,Nr.alphaBlended,br.disabled,du(J,i.am.transparent,Ne),Be,Je,nt,bt,null,null,null,[pe._globeTileDebugTextBuffer])}function sg(y,a,h,v){Wd(y,0,a+h/2,y.transform.width,h,v)}function ag(y,a,h,v){Wd(y,a-h/2,0,h,y.transform.height,v)}function Wd(y,a,h,v,S,E){const D=y.context,O=D.gl;O.enable(O.SCISSOR_TEST),O.scissor(a*i.q.devicePixelRatio,h*i.q.devicePixelRatio,v*i.q.devicePixelRatio,S*i.q.devicePixelRatio),D.clear({color:E}),O.disable(O.SCISSOR_TEST)}const o_=i.d_([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:rc}=o_;function Li(y,a,h,v){y.emplaceBack(a,h,v)}class Op{constructor(a){this.vertexArray=new i.e2,this.indices=new i.a_,Li(this.vertexArray,-1,-1,1),Li(this.vertexArray,1,-1,1),Li(this.vertexArray,-1,1,1),Li(this.vertexArray,1,1,1),Li(this.vertexArray,-1,-1,-1),Li(this.vertexArray,1,-1,-1),Li(this.vertexArray,-1,1,-1),Li(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,rc),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=i.bd.simpleSegment(0,0,36,12)}}function Zu(y,a,h,v,S,E){const D=y.context.gl,O=a.paint.get("sky-atmosphere-color"),N=a.paint.get("sky-atmosphere-halo-color"),W=a.paint.get("sky-atmosphere-sun-intensity"),Z=((te,J,oe,ge,pe)=>({u_matrix_3f:te,u_sun_direction:J,u_sun_intensity:oe,u_color_tint_r:[ge.r,ge.g,ge.b,ge.a],u_color_tint_m:[pe.r,pe.g,pe.b,pe.a],u_luminance:5e-5}))(i.e4(i.dx(),v),S,W,O,N);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+E,a.skyboxTexture,0),h.draw(y,D.TRIANGLES,Un.disabled,vr.disabled,Nr.unblended,br.frontCW,Z,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const Ey=i.d_([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class s_{constructor(a){const h=new i.e5;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const v=new i.a_;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(h,Ey.members),this.indexBuffer=a.createIndexBuffer(v),this.segments=i.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const a_=i.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class gx{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class gf{constructor(a){this.colorModeAlphaBlendedWriteRGB=new Nr([1,ka,1,ka],i.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Nr([1,0,1,0],i.am.transparent,[!1,!1,!1,!0]),this.params=new gx,this.updateNeeded=!0,a.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),a.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(a){const h=a.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new s_(h);const v=this.params.sizeRange,S=this.params.intensityRange,E=function(Z){const te=i.ea(30),J=[];for(let oe=0;oe<Z;++oe){const ge=2*Math.PI*te(),pe=Math.acos(1-2*te())-.5*Math.PI;J.push(i.cS(Math.cos(pe)*Math.cos(ge),Math.cos(pe)*Math.sin(ge),Math.sin(pe)))}return J}(this.params.starsCount),D=i.ea(300),O=new i.e6,N=new i.a_;let W=0;for(let Z=0;Z<E.length;++Z){const te=i.b$([],E[Z],200),J=Math.max(0,1+.01*v*(1*D()-.5)),oe=Math.max(0,1+.01*S*(1*D()-.5));O.emplaceBack(te[0],te[1],te[2],-1,-1,J,oe),O.emplaceBack(te[0],te[1],te[2],1,-1,J,oe),O.emplaceBack(te[0],te[1],te[2],1,1,J,oe),O.emplaceBack(te[0],te[1],te[2],-1,1,J,oe),N.emplaceBack(W+0,W+1,W+2),N.emplaceBack(W+0,W+2,W+3),W+=4}this.starsVx=h.createVertexBuffer(O,a_.members),this.starsIdx=h.createIndexBuffer(N),this.starsSegments=i.bd.simpleSegment(0,0,O.length,N.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(a,h){const v=a.context,S=v.gl,E=a.transform,D=new Un(S.LEQUAL,Un.ReadOnly,[0,1]),O=i.ah(E.zoom),N=a.style.getLut(h.scope),W=h.properties.get("color-use-theme")==="none",Z=h.properties.get("color").toRenderColor(W?null:N).toArray01(),te=h.properties.get("high-color-use-theme")==="none",J=h.properties.get("high-color").toRenderColor(te?null:N).toArray01(),oe=h.properties.get("space-color-use-theme")==="none",ge=h.properties.get("space-color").toRenderColor(oe?null:N).toArray01PremultipliedAlpha(),pe=5e-4,ve=i.e7(h.properties.get("horizon-blend"),0,1,pe,.25),me=i.dl(a,v,E)&&ve===pe?E.worldSize/(2*Math.PI*1.025)-1:E.globeRadius,Re=a.frameCounter/1e3%1,Be=i.ae(E.globeCenterInViewSpace),Ue=Math.sqrt(Math.pow(Be,2)-Math.pow(me,2)),Ke=Math.acos(Ue/Be),Ye=Ge=>{const Ne=E.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ge&&Ne.push("ALPHA_PASS");const Je=a.getOrCreateProgram("globeAtmosphere",{defines:Ne}),nt=((mt,$t,jt,an,pt,Tt,ut,Gt,Mt,Jt,qt,en)=>({u_frustum_tl:mt,u_frustum_tr:$t,u_frustum_br:jt,u_frustum_bl:an,u_horizon:pt,u_transition:Tt,u_fadeout_range:ut,u_color:Gt,u_high_color:Mt,u_space_color:Jt,u_temporal_offset:qt,u_horizon_angle:en}))(E.frustumCorners.TL,E.frustumCorners.TR,E.frustumCorners.BR,E.frustumCorners.BL,E.frustumCorners.horizon,O,ve,Z,J,ge,Re,Ke);a.uploadCommonUniforms(v,Je);const bt=this.atmosphereBuffer;bt&&Je.draw(a,S.TRIANGLES,D,vr.disabled,Ge?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,br.backCW,nt,Ge?"atmosphere_glow_alpha":"atmosphere_glow",bt.vertexBuffer,bt.indexBuffer,bt.segments)};Ye(!1),Ye(!0)}drawStars(a,h){const v=i.aD(h.properties.get("star-intensity"),0,1);if(v===0)return;const S=a.context,E=S.gl,D=a.transform,O=a.getOrCreateProgram("stars"),N=i.bY([]);i.b_(N,N,-D._pitch),i.bZ(N,N,-D.angle),i.b_(N,N,i.al(D._center.lat)),i.e8(N,N,-i.al(D._center.lng));const W=i.c3(new Float32Array(16),N),Z=i.az([],D.starsProjMatrix,W),te=i.e4([],W),J=i.e9([],te),oe=[0,1,0];i.dz(oe,oe,J),i.b$(oe,oe,this.params.sizeMultiplier);const ge=[1,0,0];i.dz(ge,ge,J),i.b$(ge,ge,this.params.sizeMultiplier);const pe=(ve=oe,me=ge,Re=v,{u_matrix:Float32Array.from(Z),u_up:ve,u_right:me,u_intensity_multiplier:Re});var ve,me,Re;a.uploadCommonUniforms(S,O),this.starsVx&&this.starsIdx&&O.draw(a,E.TRIANGLES,Un.disabled,vr.disabled,this.colorModeAlphaBlendedWriteRGB,br.disabled,pe,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Gd(y,a){const h=[...y],v=a.cameraWorldSizeForFog/a.worldSize,S=i.bx([]);return i.cE(S,S,[v,v,1]),i.az(h,S,h),i.az(h,a.worldToFogMatrix,h),h}function yn(y,a,h,v,S){const E=h.material,D=v.context,{baseColorTexture:O,metallicRoughnessTexture:N}=E.pbrMetallicRoughness,{normalTexture:W,occlusionTexture:Z,emissionTexture:te}=E;function J(ge,pe,ve){if(ge&&(y.push(pe),D.activeTexture.set(D.gl.TEXTURE0+ve),ge.gfxTexture)){const{minFilter:me,magFilter:Re,wrapS:Be,wrapT:Ue}=ge.sampler;ge.gfxTexture.bindExtraParam(me,Re,Be,Ue)}}J(O,"HAS_TEXTURE_u_baseColorTexture",ya.BaseColor),J(N,"HAS_TEXTURE_u_metallicRoughnessTexture",ya.MetallicRoughness),J(W,"HAS_TEXTURE_u_normalTexture",ya.Normal),J(Z,"HAS_TEXTURE_u_occlusionTexture",ya.Occlusion),J(te,"HAS_TEXTURE_u_emissionTexture",ya.Emission),S&&(S.texture||(S.texture=new i.ed(v.context,S.image,[S.image.height,S.image.height,S.image.height],D.gl.RGBA8)),D.activeTexture.set(D.gl.TEXTURE0+ya.LUT),S.texture&&S.texture.bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),y.push("APPLY_LUT_ON_GPU")),h.texcoordBuffer&&(y.push("HAS_ATTRIBUTE_a_uv_2f"),a.push(h.texcoordBuffer)),h.colorBuffer&&(y.push(h.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),a.push(h.colorBuffer)),h.normalBuffer&&(y.push("HAS_ATTRIBUTE_a_normal_3f"),a.push(h.normalBuffer)),h.pbrBuffer&&(y.push("HAS_ATTRIBUTE_a_pbr"),y.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),a.push(h.pbrBuffer)),E.alphaMode!=="OPAQUE"&&E.alphaMode!=="MASK"||y.push("UNPREMULT_TEXTURE_IN_SHADER"),E.defined||y.push("DIFFUSE_SHADED");const oe=v.shadowRenderer;oe&&(y.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oe.useNormalOffset&&y.push("NORMAL_OFFSET"))}function Ln(y,a,h,v,S,E){const D=h.paint.get("model-opacity").constantOr(1),O=a.context,N=new Un(a.context.gl.LEQUAL,Un.ReadWrite,a.depthRangeFor3D),W=a.transform,Z=y.mesh,te=Z.material,J=te.pbrMetallicRoughness,oe=a.style.fog;let ge;ge=a.transform.projection.zAxisUnit==="pixels"?[...y.nodeModelMatrix]:i.az([],v.zScaleMatrix,y.nodeModelMatrix),i.az(ge,v.negCameraPosMatrix,ge);const pe=i.bi([],ge);i.ee(pe,pe);const ve=h.paint.get("model-color-use-theme").constantOr("default")==="none",me=h.paint.get("model-emissive-strength").constantOr(0),Re=jd(new Float32Array(y.worldViewProjection),new Float32Array(ge),new Float32Array(pe),null,a,D,J.baseColorFactor.toRenderColor(null),te.emissiveFactor,J.metallicFactor,J.roughnessFactor,te,me,h),Be={defines:[]},Ue=[],Ke=a.shadowRenderer;Ke&&(Ke.useNormalOffset=!1),yn(Be.defines,Ue,Z,a,ve?null:h.lut);let Ye=null;if(oe){const Je=Gd(y.nodeModelMatrix,a.transform);if(Ye=new Float32Array(Je),W.projection.name!=="globe"){const nt=Z.aabb.min,bt=Z.aabb.max,[mt,$t]=oe.getOpacityForBounds(Je,nt[0],nt[1],bt[0],bt[1]);Be.overrideFog=mt>=dn||$t>=dn}}const Ge=Jh(a,h.paint.get("model-cutoff-fade-range"));Ge.shouldRenderCutoff&&Be.defines.push("RENDER_CUTOFF");const Ne=a.getOrCreateProgram("model",Be);a.uploadCommonUniforms(O,Ne,null,Ye,Ge),a.renderPass!=="shadow"&&Ke&&Ke.setupShadowsFromMatrix(y.nodeModelMatrix,Ne),Ne.draw(a,O.gl.TRIANGLES,N,S,E,Z.material.doubleSided?br.disabled:br.backCCW,Re,h.id,Z.vertexBuffer,Z.indexBuffer,Z.segments,h.paint,a.transform.zoom,void 0,Ue)}function ic(y,a,h,v,S,E,D){let O;O=y.projection.name==="globe"?i.ef(h,y):[...h],i.az(O,O,a.matrix);const N=i.az([],v,O);if(a.meshes)for(const W of a.meshes){if(W.material.alphaMode!=="BLEND"){D.push({mesh:W,depth:0,modelIndex:S,worldViewProjection:N,nodeModelMatrix:O});continue}const Z=i.ad([],W.centroid,N);!y.isOrthographic&&Z[2]<=0||E.push({mesh:W,depth:Z[2],modelIndex:S,worldViewProjection:N,nodeModelMatrix:O})}if(a.children)for(const W of a.children)ic(y,W,h,v,S,E,D)}function To(y,a,h,v){const S=h.shadowRenderer;if(!S)return;const E=S.getShadowPassDepthMode(),D=S.getShadowPassColorMode(),O=S.calculateShadowPassMatrixFromMatrix(a),N=pf(O);h.getOrCreateProgram("modelDepth",{defines:h._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(h,h.context.gl.TRIANGLES,E,vr.disabled,D,br.backCCW,N,v.id,y.vertexBuffer,y.indexBuffer,y.segments,v.paint,h.transform.zoom,void 0,void 0)}function _t(y,a,h){const v=a.updateZoomBasedPaintProperties(),S=function(E,D,O){let N,W,Z,te=E.terrain?E.terrain.exaggeration():0;if(E.terrain&&te>0){const J=E.terrain,oe=J.findDEMTileFor(O);oe&&oe.dem?N=i.el.create(J,O,oe):te=0}if(te===0&&(D.terrainElevationMin=0,D.terrainElevationMax=0),te===D.validForExaggeration&&(te===0||N&&N._demTile&&N._demTile.tileID===D.validForDEMTile.id&&N._dem._timestamp===D.validForDEMTile.timestamp))return!1;for(const J in D.instancesPerModel){const oe=D.instancesPerModel[J];for(let ge=0;ge<oe.instancedDataArray.length;++ge){const pe=(N?te*N.getElevationAt(0|oe.instancedDataArray.float32[16*ge],0|oe.instancedDataArray.float32[16*ge+1],!0,!0):0)+oe.instancesEvaluatedElevation[ge];oe.instancedDataArray.float32[16*ge+6]=pe,W=W?Math.min(D.terrainElevationMin,pe):pe,Z=Z?Math.max(D.terrainElevationMax,pe):pe}}return D.terrainElevationMin=W||0,D.terrainElevationMax=Z||0,D.validForExaggeration=te,D.validForDEMTile=N&&N._demTile?{id:N._demTile.tileID,timestamp:N._dem._timestamp}:{id:void 0,timestamp:0},!0}(y,a,h);(v||S)&&(a.uploaded=!1,a.upload(y.context))}const yl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.cV([0,0,0],[i.aj,i.aj,0])};function Yd(y,a){const h=1<<y.canonical.z,v=a.getFreeCameraOptions().position,S=a.elevation,E=y.canonical.x/h,D=(y.canonical.x+1)/h,O=y.canonical.y/h,N=(y.canonical.y+1)/h;let W=a._centerAltitude;if(S){const oe=S.getMinMaxForTile(y);oe&&oe.max>W&&(W=oe.max)}const Z=i.aD(v.x,E,D)-v.x,te=i.aD(v.y,O,N)-v.y,J=i.c6(W,a.center.lat)-v.z;return a._zoomFromMercatorZ(Math.sqrt(Z*Z+te*te+J*J))}function lg(y,a,h,v,S,E,D){const O=y.context,N=y.renderPass==="shadow",W=y.shadowRenderer,Z=N&&W?W.getShadowPassDepthMode():new Un(O.gl.LEQUAL,Un.ReadWrite,y.depthRangeFor3D),te=y.isTileAffectedByFog(E);if(h.meshes)for(const J of h.meshes){const oe=["MODEL_POSITION_ON_GPU"],ge=[];let pe,ve,me;v.instancedDataArray.length>20&&oe.push("INSTANCED_ARRAYS");const Re=Jh(y,a.paint.get("model-cutoff-fade-range"));if(Re.shouldRenderCutoff&&oe.push("RENDER_CUTOFF"),N&&W)pe=y.getOrCreateProgram("modelDepth",{defines:oe}),ve=pf(D.shadowTileMatrix,D.shadowTileMatrix,Float32Array.from(h.matrix)),me=W.getShadowPassColorMode();else{yn(oe,ge,J,y,a.paint.get("model-color-use-theme").constantOr("default")==="none"?null:a.lut),pe=y.getOrCreateProgram("model",{defines:oe,overrideFog:te});const Ue=J.material,Ke=Ue.pbrMetallicRoughness,Ye=a.paint.get("model-opacity").constantOr(1),Ge=a.paint.get("model-emissive-strength").constantOr(0);ve=jd(E.expandedProjMatrix,Float32Array.from(h.matrix),new Float32Array(16),null,y,Ye,Ke.baseColorFactor.toRenderColor(null),Ue.emissiveFactor,Ke.metallicFactor,Ke.roughnessFactor,Ue,Ge,a,S),W&&(D.shadowUniformsInitialized?pe.setShadowUniformValues(O,W.getShadowUniformValues()):(W.setupShadows(E.toUnwrapped(),pe,"model-tile",E.overscaledZ),D.shadowUniformsInitialized=!0)),me=Re.shouldRenderCutoff||Ye<1||Ue.alphaMode!=="OPAQUE"?Nr.alphaBlended:Nr.unblended}y.uploadCommonUniforms(O,pe,E.toUnwrapped(),null,Re);const Be=J.material.doubleSided?br.disabled:br.backCCW;if(v.instancedDataArray.length>20)ge.push(v.instancedDataBuffer),pe.draw(y,O.gl.TRIANGLES,Z,vr.disabled,me,Be,ve,a.id,J.vertexBuffer,J.indexBuffer,J.segments,a.paint,y.transform.zoom,void 0,ge,v.instancedDataArray.length);else{const Ue=N?"u_instance":"u_normal_matrix";for(let Ke=0;Ke<v.instancedDataArray.length;++Ke)ve[Ue]=new Float32Array(v.instancedDataArray.arrayBuffer,64*Ke,16),pe.draw(y,O.gl.TRIANGLES,Z,vr.disabled,me,Be,ve,a.id,J.vertexBuffer,J.indexBuffer,J.segments,a.paint,y.transform.zoom,void 0,ge)}}if(h.children)for(const J of h.children)lg(y,a,J,v,S,E,D)}const Cy=[1,-1,1];function l_(y,a,h,v){if(!h.modelManager)return!0;const S=h.modelManager;if(!h.shadowRenderer)return!0;const E=h.shadowRenderer,D=a.aabb;let O=!0,N=y.maxHeight;if(N===0){let Z=0;for(const te in y.instancesPerModel){const J=S.getModel(te,v);J?Z=Math.max(Z,Math.max(Math.max(J.aabb.max[0],J.aabb.max[1]),J.aabb.max[2])):O=!1}N=y.maxScale*Z*1.41+y.maxVerticalOffset,O&&(y.maxHeight=N)}D.max[2]=N,D.min[2]+=y.terrainElevationMin,D.max[2]+=y.terrainElevationMax,i.ad(D.min,D.min,a.tileMatrix),i.ad(D.max,D.max,a.tileMatrix);const W=D.intersects(E.getCurrentCascadeFrustum());return h.currentShadowCascade===0&&(y.isInsideFirstShadowMapFrustum=W===2),W===0}function c_(y,a){const h=y.uniformValues.u_cutoff_params[0],v=y.uniformValues.u_cutoff_params[1],S=y.uniformValues.u_cutoff_params[2],E=y.uniformValues.u_cutoff_params[3];return v===h||E===S?1:i.aD(((a-h)/(v-h)-S)/(E-S),0,1)}function yf(y,a,h,v){if(a.pitch<20)return 1;const S=a.getWorldToCameraMatrix();i.az(S,S,y);const E=i.ei(h.min[0],h.min[1],h.min[2],1);let D=i.aA(i.ej(),E,S),O=D,N=D;E[1]=h.max[1],D=i.aA(i.ej(),E,S),O=D[1]<O[1]?D:O,N=D[1]>N[1]?D:N,E[0]=h.max[0],D=i.aA(i.ej(),E,S),O=D[1]<O[1]?D:O,N=D[1]>N[1]?D:N,E[1]=h.min[1],D=i.aA(i.ej(),E,S),O=D[1]<O[1]?D:O,N=D[1]>N[1]?D:N;const W=i.aD(v[0],0,1),Z=100*a.pixelsPerMeter*i.aD(v[1],0,1),te=i.aD(v[2],0,1),J=i.ek(i.ej(),O,N,W),oe=Math.tan(.5*a.fovX),ge=-J[2]*oe;if(Z===0)return J[1]<-Math.abs(ge)?te:1;const pe=(-Math.abs(ge)-J[1])/Z,ve=(Re,Be,Ue)=>(1-Ue)*Re+Ue*Be,me=i.aD(ve(1,te,pe),te,1);return ve(1,me,i.aD((a.pitch-20)/20,0,1))}class yx{}class u_{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(a,h,v){{const te=this._storage.get(h.id);if(te)return te.lastUsedFrameIdx=a,te.buf}const S=v.gl,E=S.getBufferParameter(S.ELEMENT_ARRAY_BUFFER,S.BUFFER_SIZE),D=new ArrayBuffer(E),O=new Int16Array(D);S.getBufferSubData(S.ELEMENT_ARRAY_BUFFER,0,new Int16Array(D));const N=new i.en;for(let te=0;te<E/2;te+=3){const J=O[te],oe=O[te+1],ge=O[te+2];N.emplaceBack(J,oe),N.emplaceBack(oe,ge),N.emplaceBack(ge,J)}const W=v.bindVertexArrayOES.current,Z=new yx;return Z.buf=new fu(v,N),Z.lastUsedFrameIdx=a,this._storage.set(h.id,Z),v.bindVertexArrayOES.set(W),Z.buf}update(a){for(const[h,v]of this._storage)a-v.lastUsedFrameIdx>30&&(v.buf.destroy(),this._storage.delete(h))}destroy(){for(const[a,h]of this._storage)h.buf.destroy(),this._storage.delete(a)}}class d_{constructor(a){this.occluderSize=30,this.depthOffset=-1e-4,a.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),a.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const cg=i.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class ug{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class My{constructor(a,h){this.revealStart=11,this.revealRange=2,a.registerParameter(this,[...h,"Reveal"],"revealStart",{min:0,max:17,step:.05}),a.registerParameter(this,[...h,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const h_=i.d_([{type:"Float32",name:"a_pos_2f",components:2}]);class Ay{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(a,h){const v=a.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const D=new i.eo,O=new i.a_;D.emplaceBack(-1,-1),D.emplaceBack(1,-1),D.emplaceBack(1,1),D.emplaceBack(-1,1),O.emplaceBack(0,1,2),O.emplaceBack(0,2,3),this.vignetteVx=a.context.createVertexBuffer(D,h_.members),this.vignetteIdx=a.context.createIndexBuffer(O)}const S=i.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){a.uploadCommonUniforms(a.context,v);const D={u_vignetteShape:(E={vignetteShape:[h.start,h.range,Math.pow(10,h.fadePower)],vignetteColor:[h.color.r,h.color.g,h.color.b,h.color.a*h.strength]}).vignetteShape,u_vignetteColor:E.vignetteColor};v.draw(a,a.context.gl.TRIANGLES,Un.disabled,vr.disabled,Nr.alphaBlended,br.disabled,D,"vignette",this.vignetteVx,this.vignetteIdx,S)}var E}}class vf{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(a,h){const v=a.getFreeCameraOptions().position,S=v.toAltitude(),E=v.toLngLat(),D=i.al(E.lng),O=i.al(E.lat),N=a.pixelsPerMeter/h,W=D*i.eq,Z=i.eq*Math.log(Math.tan(Math.PI/4+O/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const te=-this._offsetYPrev+Z,J=-this._elevationPrev+S;this._accumulatedOffsetX+=(-this._offsetXPrev+W)*N,this._accumulatedOffsetY+=te*N,this._accumulatedElevation+=J*N,this._offsetXPrev=W,this._offsetYPrev=Z,this._elevationPrev=S}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Xd(y,a){return[-(y[0]-Math.floor(y[0]/a)*a),-(y[1]-Math.floor(y[1]/a)*a),-(y[2]-Math.floor(y[2]/a)*a)]}function Ry(y){const a=i.ea(1323123451230),h=[];for(let v=0;v<y;++v){const S=2*a()-1,E=2*a()-1,D=2*a()-1;h.push(i.cS(S,E,D))}return h}function gu(y,a,h,v,S){const E=i.aD((S-h)/(v-h),0,1);return(1-E)*y+E*a}class va{constructor(a){this._movement=new vf,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Ay,this._ppmScaleFactor=a}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(a,h){const v=a.transform;this._movement.update(v,this._ppmScaleFactor);const S=v.starsProjMatrix,E=i.bY([]);i.b_(E,E,i.al(90)-v._pitch),i.bZ(E,E,-v.angle);const D=i.c3(new Float32Array(16),E),O=i.ep(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),N=i.ee([],O),W=i.az([],N,D),Z=Date.now()/1e3;return this._accumulatedTimeFromStart+=(Z-this._prevTime)*h,this._prevTime=Z,{projectionMatrix:S,modelviewMatrix:W}}}class vx extends va{constructor(a){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new My(a.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(a){const h=a.context;if(!this.particlesVx){const v=Ry(this.particlesCount),S=new i.er,E=new i.a_;let D=0;const O=i.ea(1323123451230);for(let N=0;N<v.length;++N){const W=v[N],Z=[2*O()-1,O(),O(),O()];S.emplaceBack(W[0],W[1],W[2],-1,-1,...Z),S.emplaceBack(W[0],W[1],W[2],1,-1,...Z),S.emplaceBack(W[0],W[1],W[2],1,1,...Z),S.emplaceBack(W[0],W[1],W[2],-1,1,...Z),E.emplaceBack(D+0,D+1,D+2),E.emplaceBack(D+0,D+2,D+3),D+=4}this.particlesVx=h.createVertexBuffer(S,cg.members),this.particlesIdx=h.createIndexBuffer(E)}}draw(a){if(!this._params.overrideStyleParameters&&!a.style.rain)return;const h=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},v=a.transform.zoom;if(h.revealStart>v)return;const S=gu(0,1,h.revealStart,h.revealStart+h.revealRange,v);if(!this.particlesVx||!this.particlesIdx)return;const E=structuredClone(this._params);let D=[-E.direction.x,E.direction.y,-100];i.au(D,D);const O=structuredClone(this._vignetteParams);O.strength*=S,E.overrideStyleParameters||(E.intensity=a.style.rain.state.density,E.timeFactor=a.style.rain.state.intensity,E.color=structuredClone(a.style.rain.state.color),D=structuredClone(a.style.rain.state.direction),E.screenThinning.intensity=a.style.rain.state.centerThinning,E.dropletSizeX=a.style.rain.state.dropletSize[0],E.dropletSizeYScale=a.style.rain.state.dropletSize[1]/a.style.rain.state.dropletSize[0],E.distortionStrength=100*a.style.rain.state.distortionStrength,O.strength=1,O.color=structuredClone(a.style.rain.state.vignetteColor));const N=this.updateOnRender(a,E.timeFactor),W=a.context,Z=W.gl,te=a.transform;this.screenTexture&&this.screenTexture.size[0]===a.width&&this.screenTexture.size[1]===a.height||(this.screenTexture=new i.T(W,{width:a.width,height:a.height,data:null},Z.RGBA8)),E.distortionStrength>0&&(W.activeTexture.set(Z.TEXTURE0),this.screenTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Z.copyTexSubImage2D(Z.TEXTURE_2D,0,0,0,0,0,a.width,a.height));const J=a.getOrCreateProgram("rainParticle");a.uploadCommonUniforms(W,J),W.activeTexture.set(Z.TEXTURE0),this.screenTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);const oe=[E.color.r,E.color.g,E.color.b,E.color.a],ge=(pe,ve)=>{const me=Xd(this._movement.getPosition(),pe),Re=E.dropletSizeX,Be=E.dropletSizeX*E.dropletSizeYScale,Ue=a.width/2,Ke=a.height/2,Ye=gu(0,E.screenThinning.start,0,1,E.screenThinning.intensity),Ge=gu(.001,E.screenThinning.range,0,1,E.screenThinning.intensity),Ne=gu(0,E.screenThinning.particleOffset,0,1,E.screenThinning.intensity),Je=(nt={modelview:N.modelviewMatrix,projection:N.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:me,velocityConeAperture:E.velocityConeAperture,velocity:E.velocity,boxSize:pe,rainDropletSize:[Re,Be],distortionStrength:E.distortionStrength,rainDirection:D,color:oe,screenSize:[te.width,te.height],thinningCenterPos:[Ue,Ke],thinningShape:[Ye,Ge,Math.pow(10,E.screenThinning.fadePower)],thinningAffectedRatio:E.screenThinning.affectedRatio,thinningParticleOffset:Ne,shapeDirectionalPower:E.shapeDirPower,shapeNormalPower:E.shapeNormalPower,mode:ve?0:1},{u_modelview:Float32Array.from(nt.modelview),u_projection:Float32Array.from(nt.projection),u_time:nt.time,u_cam_pos:nt.camPos,u_texScreen:0,u_velocityConeAperture:nt.velocityConeAperture,u_velocity:nt.velocity,u_boxSize:nt.boxSize,u_rainDropletSize:nt.rainDropletSize,u_distortionStrength:nt.distortionStrength,u_rainDirection:nt.rainDirection,u_color:nt.color,u_screenSize:nt.screenSize,u_thinningCenterPos:nt.thinningCenterPos,u_thinningShape:nt.thinningShape,u_thinningAffectedRatio:nt.thinningAffectedRatio,u_thinningParticleOffset:nt.thinningParticleOffset,u_shapeDirectionalPower:nt.shapeDirectionalPower,u_shapeNormalPower:nt.shapeNormalPower,u_mode:nt.mode});var nt;const bt=Math.round(E.intensity*this.particlesCount),mt=i.bd.simpleSegment(0,0,4*bt,2*bt);J.draw(a,Z.TRIANGLES,Un.disabled,vr.disabled,Nr.alphaBlended,br.disabled,Je,"rain_particles",this.particlesVx,this.particlesIdx,mt)};E.distortionStrength>0&&ge(E.boxSize,!0),ge(E.boxSize,!1),this._vignette.draw(a,O)}}const dg=i.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class ho extends va{constructor(a){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new My(a.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(a){const h=a.context;if(!this.particlesVx){const v=Ry(this.particlesCount),S=new i.es,E=new i.a_;let D=0;const O=i.ea(1323123451230);for(let N=0;N<v.length;++N){const W=v[N],Z=O(),te=O(),J=O(),oe=[N/v.length,Z,te,J],ge=[O(),O()];S.emplaceBack(W[0],W[1],W[2],-1,-1,...oe,...ge),S.emplaceBack(W[0],W[1],W[2],1,-1,...oe,...ge),S.emplaceBack(W[0],W[1],W[2],1,1,...oe,...ge),S.emplaceBack(W[0],W[1],W[2],-1,1,...oe,...ge),E.emplaceBack(D+0,D+1,D+2),E.emplaceBack(D+0,D+2,D+3),D+=4}this.particlesVx=h.createVertexBuffer(S,dg.members),this.particlesIdx=h.createIndexBuffer(E)}}draw(a){if(!this._params.overrideStyleParameters&&!a.style.snow)return;const h=structuredClone(this._params);let v=[-h.direction.x,h.direction.y,-100];i.au(v,v);const S=structuredClone(this._vignetteParams),E=h.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},D=a.transform.zoom;if(E.revealStart>D)return;const O=gu(0,1,E.revealStart,E.revealStart+E.revealRange,D);S.strength*=O,h.overrideStyleParameters||(h.intensity=a.style.snow.state.density,h.timeFactor=a.style.snow.state.intensity,h.color=structuredClone(a.style.snow.state.color),v=structuredClone(a.style.snow.state.direction),h.screenThinning.intensity=a.style.snow.state.centerThinning,h.billboardSize=2.79*a.style.snow.state.flakeSize,S.strength=1,S.color=structuredClone(a.style.snow.state.vignetteColor));const N=this.updateOnRender(a,h.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const W=a.context,Z=W.gl,te=a.transform,J=a.getOrCreateProgram("snowParticle");a.uploadCommonUniforms(W,J),((oe,ge,pe)=>{const ve=Xd(this._movement.getPosition(),oe),me=te.width/2,Re=te.height/2,Be=gu(0,pe.screenThinning.start,0,1,pe.screenThinning.intensity),Ue=gu(.001,pe.screenThinning.range,0,1,pe.screenThinning.intensity),Ke=gu(0,pe.screenThinning.particleOffset,0,1,pe.screenThinning.intensity),Ye=(Ge={modelview:N.modelviewMatrix,projection:N.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:ve,velocityConeAperture:pe.velocityConeAperture,velocity:pe.velocity,horizontalOscillationRadius:pe.horizontalOscillationRadius,horizontalOscillationRate:pe.horizontalOscillationRate,boxSize:oe,billboardSize:1*pe.billboardSize,simpleShapeParameters:[pe.shapeFadeStart,pe.shapeFadePower],screenSize:[te.width,te.height],thinningCenterPos:[me,Re],thinningShape:[Be,Ue,Math.pow(10,pe.screenThinning.fadePower)],thinningAffectedRatio:pe.screenThinning.affectedRatio,thinningParticleOffset:Ke,color:[pe.color.r,pe.color.g,pe.color.b,pe.color.a],direction:v},{u_modelview:Float32Array.from(Ge.modelview),u_projection:Float32Array.from(Ge.projection),u_time:Ge.time,u_cam_pos:Ge.camPos,u_velocityConeAperture:Ge.velocityConeAperture,u_velocity:Ge.velocity,u_horizontalOscillationRadius:Ge.horizontalOscillationRadius,u_horizontalOscillationRate:Ge.horizontalOscillationRate,u_boxSize:Ge.boxSize,u_billboardSize:Ge.billboardSize,u_simpleShapeParameters:Ge.simpleShapeParameters,u_screenSize:Ge.screenSize,u_thinningCenterPos:Ge.thinningCenterPos,u_thinningShape:Ge.thinningShape,u_thinningAffectedRatio:Ge.thinningAffectedRatio,u_thinningParticleOffset:Ge.thinningParticleOffset,u_particleColor:Ge.color,u_direction:Ge.direction});var Ge;const Ne=Math.round(pe.intensity*this.particlesCount),Je=i.bd.simpleSegment(0,0,4*Ne,2*Ne);this.particlesVx&&this.particlesIdx&&J.draw(a,Z.TRIANGLES,Un.disabled,vr.disabled,Nr.alphaBlended,br.disabled,Ye,"snow_particles",this.particlesVx,this.particlesIdx,Je)})(h.boxSize,0,h),this._vignette.draw(a,S)}}const fi={symbol:function(y,a,h,v,S){if(y.renderPass!=="translucent")return;const E=vr.disabled,D=y.colorModeForRenderPass(),O=h.layout.get("text-variable-anchor"),N=h.layout.get("text-size-scale-range"),W=i.aD(y.scaleFactor,N[0],N[1]);O&&function(J,oe,ge,pe,ve,me,Re,Be){const Ue=oe.transform,Ke=ve==="map",Ye=me==="map";for(const Ge of J){const Ne=pe.getTile(Ge),Je=Ne.getBucket(ge);if(!Je||!Je.text||!Je.text.segments.get().length)continue;const nt=i.bH(Je.textSizeData,Ue.zoom,Be),bt=Im(Ge,Je.getProjection(),Ue),mt=Ue.calculatePixelsToTileUnitsMatrix(Ne),$t=Xl(bt,Ne.tileID.canonical,Ye,Ke,Ue,Je.getProjection(),mt),jt=Je.hasIconTextFit()&&Je.hasIconData();nt&&Pp(Je,Ke,Ye,Re,Ue,$t,Ge,Math.pow(2,Ue.zoom-Ne.tileID.overscaledZ),nt,jt)}}(v,y,h,a,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),S,W);const Z=h.paint.get("icon-opacity").constantOr(1)!==0,te=h.paint.get("text-opacity").constantOr(1)!==0;h.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(Z||te)?Vd(y,a,h,v,E,D):(Z&&Vd(y,a,h,v,E,D,{onlyIcons:!0}),te&&Vd(y,a,h,v,E,D,{onlyText:!0})),a.map.showCollisionBoxes&&(is(y,a,h,v,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),is(y,a,h,v,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(y,a,h,v){if(y.renderPass!=="translucent")return;const S=h.paint.get("circle-opacity"),E=h.paint.get("circle-stroke-width"),D=h.paint.get("circle-stroke-opacity"),O=h.layout.get("circle-sort-key").constantOr(1)!==void 0,N=h.paint.get("circle-emissive-strength");if(S.constantOr(1)===0&&(E.constantOr(1)===0||D.constantOr(1)===0))return;const W=y.context,Z=W.gl,te=y.transform,J=y.depthModeForSublayer(0,Un.ReadOnly),oe=vr.disabled,ge=y.colorModeForDrapableLayerRenderPass(N),pe=te.projection.name==="globe",ve=[i.ay(te.center.lng),i.aH(te.center.lat)],me=[];for(let Be=0;Be<v.length;Be++){const Ue=v[Be],Ke=a.getTile(Ue),Ye=Ke.getBucket(h);if(!Ye||Ye.projection.name!==te.projection.name)continue;const Ge=Ye.programConfigurations.get(h.id),Ne=i.dK(h),Je=y.isTileAffectedByFog(Ue);pe&&Ne.push("PROJECTION_GLOBE_VIEW"),Ne.push("DEPTH_D24"),y.terrain&&te.depthOcclusionForSymbolsAndCircles&&Ne.push("DEPTH_OCCLUSION");const nt=y.getOrCreateProgram("circle",{config:Ge,defines:Ne,overrideFog:Je}),bt=Ye.layoutVertexBuffer,mt=Ye.globeExtVertexBuffer,$t=Ye.indexBuffer,jt=te.projection.createInversionMatrix(te,Ue.canonical),an={programConfiguration:Ge,program:nt,layoutVertexBuffer:bt,globeExtVertexBuffer:mt,indexBuffer:$t,uniformValues:i.dL(y,Ue,Ke,jt,ve,h),tile:Ke};if(O){const pt=Ye.segments.get();for(const Tt of pt)me.push({segments:new i.bd([Tt]),sortKey:Tt.sortKey,state:an})}else me.push({segments:Ye.segments,sortKey:0,state:an})}O&&me.sort((Be,Ue)=>Be.sortKey-Ue.sortKey);const Re={useDepthForOcclusion:te.depthOcclusionForSymbolsAndCircles};for(const Be of me){const{programConfiguration:Ue,program:Ke,layoutVertexBuffer:Ye,globeExtVertexBuffer:Ge,indexBuffer:Ne,uniformValues:Je,tile:nt}=Be.state,bt=Be.segments;y.terrain&&y.terrain.setupElevationDraw(nt,Ke,Re),y.uploadCommonUniforms(W,Ke,nt.tileID.toUnwrapped()),Ke.draw(y,Z.TRIANGLES,J,oe,ge,br.disabled,Je,h.id,Ye,Ne,bt,h.paint,te.zoom,Ue,[Ge])}},heatmap:function(y,a,h,v){if(h.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const S=y.context,E=S.gl,D=vr.disabled,O=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],i.am.transparent,[!0,!0,!0,!0]);(function(oe,ge,pe,ve){const me=oe.gl,Re=ge.width*ve,Be=ge.height*ve;oe.activeTexture.set(me.TEXTURE1),oe.viewport.set([0,0,Re,Be]);let Ue=pe.heatmapFbo;if(!Ue||Ue&&(Ue.width!==Re||Ue.height!==Be)){Ue&&Ue.destroy();const Ke=me.createTexture();me.bindTexture(me.TEXTURE_2D,Ke),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),Ue=pe.heatmapFbo=oe.createFramebuffer(Re,Be,!0,null),function(Ye,Ge,Ne,Je,nt,bt){const mt=Ye.gl;mt.texImage2D(mt.TEXTURE_2D,0,Ye.extRenderToTextureHalfFloat?mt.RGBA16F:mt.RGBA,nt,bt,0,mt.RGBA,Ye.extRenderToTextureHalfFloat?mt.HALF_FLOAT:mt.UNSIGNED_BYTE,null),Je.colorAttachment.set(Ne)}(oe,0,Ke,Ue,Re,Be)}else me.bindTexture(me.TEXTURE_2D,Ue.colorAttachment.get()),oe.bindFramebuffer.set(Ue.framebuffer)})(S,y,h,y.transform.projection.name==="globe"?.5:.25),S.clear({color:i.am.transparent});const N=y.transform,W=N.projection.name==="globe",Z=W?["PROJECTION_GLOBE_VIEW"]:[],te=W?br.frontCCW:br.disabled,J=[i.ay(N.center.lng),i.aH(N.center.lat)];for(let oe=0;oe<v.length;oe++){const ge=v[oe];if(a.hasRenderableParent(ge))continue;const pe=a.getTile(ge),ve=pe.getBucket(h);if(!ve||ve.projection.name!==N.projection.name)continue;const me=y.isTileAffectedByFog(ge),Re=ve.programConfigurations.get(h.id),Be=y.getOrCreateProgram("heatmap",{config:Re,defines:Z,overrideFog:me}),{zoom:Ue}=y.transform;y.terrain&&y.terrain.setupElevationDraw(pe,Be),y.uploadCommonUniforms(S,Be,ge.toUnwrapped());const Ke=N.projection.createInversionMatrix(N,ge.canonical);Be.draw(y,E.TRIANGLES,Un.disabled,D,O,te,Mp(y,ge,pe,Ke,J,Ue,h.paint.get("heatmap-intensity")),h.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,h.paint,y.transform.zoom,Re,W?[ve.globeExtVertexBuffer]:null)}S.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(S,E){const D=S.context,O=D.gl,N=E.heatmapFbo;if(!N)return;D.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,N.colorAttachment.get()),D.activeTexture.set(O.TEXTURE1);let W=E.colorRampTexture;W||(W=E.colorRampTexture=new i.T(D,E.colorRamp,O.RGBA8)),W.bind(O.LINEAR,O.CLAMP_TO_EDGE),S.getOrCreateProgram("heatmapTexture").draw(S,O.TRIANGLES,Un.disabled,vr.disabled,S.colorModeForRenderPass(),br.disabled,((Z,te,J,oe)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,E),E.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,E.paint,S.transform.zoom)}(y,h))},line:function(y,a,h,v){if(y.renderPass!=="translucent")return;const S=h.paint.get("line-opacity"),E=h.paint.get("line-width");if(S.constantOr(1)===0||E.constantOr(1)===0)return;const D=h.paint.get("line-emissive-strength"),O=h.paint.get("line-occlusion-opacity"),N=h.layout.get("line-elevation-reference"),W=h.layout.get("line-width-unit")==="meters",Z=N==="sea",te=!(!y.terrain||!y.terrain.enabled),J=y.context,oe=J.gl;if(h.hasElevatedBuckets&&y.transform.projection.name==="globe")return;const ge=h.layout.get("line-cross-slope"),pe=ge!==void 0,ve=ge<1,me=y.colorModeForDrapableLayerRenderPass(D),Re=y.terrain&&y.terrain.renderingToTexture,Be=Re?1:i.q.devicePixelRatio,Ue=h.paint.get("line-dasharray"),Ke=Ue.constantOr(1),Ye=h.layout.get("line-cap"),Ge=Ue.constantOr(null),Ne=Ye.constantOr(null),Je=h.paint.get("line-pattern"),nt=Je.constantOr(1),bt=h.paint.get("line-pattern-cross-fade"),mt=Je.constantOr(null),$t=h.paint.get("line-opacity").constantOr(1);let jt=!nt&&$t!==1||y.depthOcclusion&&O>0&&O<1;const an=h.paint.get("line-gradient"),pt=nt?"linePattern":"line",Tt=i.dM(h);let ut;if(Re&&y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(jt=!1),O!==0&&y.depthOcclusion){const qt=h.paint._values["line-opacity"];qt&&qt.value&&qt.value.kind==="constant"?ut=qt.value:i.w(`Occlusion opacity for layer ${h.id} is supported only when line-opacity isn't data-driven.`)}E.value.kind!=="constant"&&E.value.isLineProgressConstant===!1&&Tt.push("VARIABLE_LINE_WIDTH");const Gt=(qt,en,on,Vn,Gn,Fn)=>{for(const Qn of qt){const Wn=a.getTile(Qn);if(nt&&!Wn.patternsLoaded())continue;const hr=Wn.getBucket(h);if(!hr||hr.elevationType!=="none"&&!Gn||hr.elevationType==="none"&&Gn)continue;y.prepareDrawTile();const Mr=[...en],ur=y.shadowRenderer,Lr=hr.elevationType==="road"&&!!ur&&ur.enabled;let _r=[0,0,0];if(Lr){const Tr=y.style.directionalLight,Ui=y.style.ambientLight;Tr&&Ui&&(_r=Pc(y.style,Tr,Ui)),Mr.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const ar=hr.programConfigurations.get(h.id);let Zr=!1;if(mt&&Wn.imageAtlas){const Tr=i.dN.from(mt),Ui=Tr.getPrimary().scaleSelf(Be).toString(),ai=Wn.imageAtlas.patternPositions.get(Ui),gi=Tr.getSecondary(),yi=gi?Wn.imageAtlas.patternPositions.get(gi.scaleSelf(Be).toString()):null;Zr=!!ai&&!!yi,ai&&ar.setConstantPatternPositions(ai,yi)}bt>0&&(Zr||ar.getPatternTransitionVertexBuffer("line-pattern"))&&Mr.push("LINE_PATTERN_TRANSITION");const Ei=y.isTileAffectedByFog(Qn),Ar=y.getOrCreateProgram(pt,{config:ar,defines:Mr,overrideFog:Ei,overrideRtt:!Gn&&void 0});if(!nt&&Ge&&Ne&&Wn.lineAtlas){const Tr=Wn.lineAtlas.getDash(Ge,Ne);Tr&&ar.setConstantPatternPositions(Tr)}Lr&&ur.setupShadows(Wn.tileID.toUnwrapped(),Ar,"vector-tile",Wn.tileID.overscaledZ);let[Kr,di]=h.paint.get("line-trim-offset");(Ne==="round"||Ne==="square")&&Kr!==di&&(Kr===0&&(Kr-=1),di===1&&(di+=1));const pi=Re?Qn.projMatrix:null,Ci=W?1/hr.tileToMeter/i.aw(Wn,1,y.transform.zoom):1,Ji=W?1/hr.tileToMeter/i.aw(Wn,1,Math.floor(y.transform.zoom)):1,Ao=nt?i.dO(y,Wn,h,pi,Be,Ci,Ji,[Kr,di],_r,bt):i.dP(y,Wn,h,pi,hr.lineClipsArray.length,Be,Ci,Ji,[Kr,di],_r);if(an){const Tr=hr.gradients[h.id];let Ui=Tr.texture;if(h.gradientVersion!==Tr.version){let ai=256;if(h.stepInterpolant){const gi=a.getSource().maxzoom,yi=Qn.canonical.z===gi?Math.ceil(1<<y.transform.maxZoom-Qn.canonical.z):1;ai=i.aD(i.dQ(hr.maxLineLength/i.aj*1024*yi),256,J.maxTextureSize)}Tr.gradient=i.dR({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:ai,image:Tr.gradient||void 0,clips:hr.lineClipsArray}),Tr.texture?Tr.texture.update(Tr.gradient):Tr.texture=new i.T(J,Tr.gradient,oe.RGBA8),Tr.version=h.gradientVersion,Ui=Tr.texture}J.activeTexture.set(oe.TEXTURE1),Ui.bind(h.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}Ke&&(J.activeTexture.set(oe.TEXTURE0),Wn.lineAtlasTexture&&Wn.lineAtlasTexture.bind(oe.LINEAR,oe.REPEAT),ar.updatePaintBuffers()),nt&&(J.activeTexture.set(oe.TEXTURE0),Wn.imageAtlasTexture&&Wn.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),ar.updatePaintBuffers()),Gn&&!Z&&y.terrain.setupElevationDraw(Wn,Ar),y.uploadCommonUniforms(J,Ar,Qn.toUnwrapped());const eo=Tr=>{ut!=null&&(ut.value=$t*O),Ar.draw(y,oe.TRIANGLES,on,Tr,me,br.disabled,Ao,h.id,hr.layoutVertexBuffer,hr.indexBuffer,hr.segments,h.paint,y.transform.zoom,ar,[hr.layoutVertexBuffer2,hr.patternVertexBuffer,hr.zOffsetVertexBuffer]),ut!=null&&(ut.value=$t)};if(jt&&!Gn){const Tr=y.stencilModeForClipping(Qn).ref;Tr===0&&Re&&J.clear({stencil:0});const Ui={func:oe.EQUAL,mask:255};Ao.u_alpha_discard_threshold=.8,eo(new vr(Ui,Tr,255,oe.KEEP,oe.KEEP,oe.INVERT)),Ao.u_alpha_discard_threshold=0,eo(new vr(Ui,Tr,255,oe.KEEP,oe.KEEP,oe.KEEP))}else Ao.u_alpha_discard_threshold=jt&&Gn&&Fn?.8:0,eo(Gn?Vn:y.stencilModeForClipping(Qn))}};let Mt=y.depthModeForSublayer(0,Un.ReadOnly);const Jt=new Un(y.depthOcclusion?oe.GREATER:oe.LEQUAL,Un.ReadOnly,y.depthRangeFor3D);if(h.hasNonElevatedBuckets){const qt=!Re&&y.terrain;O!==0&&qt?i.w(`Occlusion opacity for layer ${h.id} is supported on terrain only if the layer has line-z-offset enabled.`):qt?i.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${h.id}.`):Gt(v,Tt,Mt,vr.disabled,!1,!0)}if(h.hasElevatedBuckets){N==="hd-road-markup"?te||(Mt=Jt,Tt.push("ELEVATED_ROADS")):(Tt.push("ELEVATED"),Mt=Jt,pe&&Tt.push(ve?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),Z&&Tt.push("ELEVATION_REFERENCE_SEA"));const qt=jt?y.stencilModeFor3D():vr.disabled;y.forceTerrainMode=!0,Gt(v,Tt,Mt,qt,!0,!0),jt&&Gt(v,Tt,Mt,qt,!0,!1),y.forceTerrainMode=!1}jt&&(y.resetStencilClippingMasks(),Re&&J.clear({stencil:0})),O===0||y.depthOcclusion||Re||y.layersWithOcclusionOpacity.push(y.currentLayer)},fill:function(y,a,h,v){const S=h.paint.get("fill-color"),E=h.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const D=h.paint.get("fill-emissive-strength"),O=y.colorModeForDrapableLayerRenderPass(D),N=h.paint.get("fill-pattern"),W=y.opaquePassEnabledForLayer()&&!N.constantOr(1)&&S.constantOr(i.am.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";let Z="none";h.layout.get("fill-elevation-reference")!=="none"?Z="road":h.paint.get("fill-z-offset").constantOr(1)!==0&&(Z="offset");const te=!(!y.terrain||!y.terrain.enabled),J={painter:y,sourceCache:a,layer:h,coords:v,colorMode:O,elevationType:Z,terrainEnabled:te,pass:W};if(y.renderPass!=="shadow")if(Z!=="offset"){if(zn(J,!1),Z==="road"){const oe=!te&&y.renderPass==="translucent";oe&&os(y,a,h,v,"geometry"),zn(J,!0,vr.disabled),oe&&function(ge){const{painter:pe,sourceCache:ve,layer:me,coords:Re,colorMode:Be}=ge,Ue=pe.context.gl,Ke=ge.painter.shadowRenderer,Ye=!!Ke&&Ke.enabled,Ge=new Un(pe.context.gl.LEQUAL,Un.ReadOnly,pe.depthRangeFor3D);let Ne=[0,0,0];if(Ye){const Je=pe.style.directionalLight,nt=pe.style.ambientLight;Je&&nt&&(Ne=Pc(pe.style,Je,nt))}for(const Je of Re){const nt=ve.getTile(Je),bt=nt.getBucket(me);if(!bt)continue;const mt=bt.elevatedStructures;if(!mt||!mt.renderableSegments||mt.renderableSegments.segments[0].primitiveLength===0)continue;pe.prepareDrawTile();const $t=bt.bufferData.programConfigurations.get(me.id),jt=pe.isTileAffectedByFog(Je),an=[];Ye&&an.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const pt=pe.getOrCreateProgram("elevatedStructures",{config:$t,overrideFog:jt,defines:an}),Tt=pe.translatePosMatrix(Je.projMatrix,nt,me.paint.get("fill-translate"),me.paint.get("fill-translate-anchor"));Ye&&Ke.setupShadows(nt.tileID.toUnwrapped(),pt,"vector-tile",nt.tileID.overscaledZ);const ut=Cp(Tt,Ne);pe.uploadCommonUniforms(pe.context,pt,Je.toUnwrapped()),pt.draw(pe,Ue.TRIANGLES,Ge,vr.disabled,Be,br.backCCW,ut,me.id,mt.vertexBuffer,mt.indexBuffer,mt.renderableSegments,me.paint,pe.transform.zoom,$t,[mt.vertexBufferNormal])}}(J)}}else zn(J,!1,y.stencilModeFor3D());else y.shadowRenderer&&Z==="road"&&!te&&function(oe){const{painter:ge,sourceCache:pe,layer:ve,coords:me}=oe,Re=ge.context.gl,Be=oe.painter.shadowRenderer;for(const Ue of me){const Ke=pe.getTile(Ue),Ye=Ke.getBucket(ve);if(!Ye)continue;const Ge=Ye.elevatedStructures;if(!Ge||!Ge.shadowCasterSegments||Ge.shadowCasterSegments.segments[0].primitiveLength===0)continue;ge.prepareDrawTile();const Ne=Ye.bufferData.programConfigurations.get(ve.id),Je=ge.isTileAffectedByFog(Ue),nt=ge.getOrCreateProgram("elevatedStructuresDepth",{config:Ne,overrideFog:Je}),bt=Be.calculateShadowPassMatrixFromTile(Ke.tileID.toUnwrapped());ge.uploadCommonUniforms(ge.context,nt,Ue.toUnwrapped());const mt={u_matrix:bt,u_depth_bias:.001};nt.draw(ge,Re.TRIANGLES,Be.getShadowPassDepthMode(),vr.disabled,Be.getShadowPassColorMode(),br.disabled,mt,ve.id,Ge.vertexBuffer,Ge.indexBuffer,Ge.shadowCasterSegments,ve.paint,ge.transform.zoom,Ne)}}(J)},"fill-extrusion":function(y,a,h,v){const S=h.paint.get("fill-extrusion-opacity"),E=y.context,D=E.gl,O=y.terrain,N=O&&O.renderingToTexture;if(S===0)return;const W=y.conflationActive&&y.style.isLayerClipped(h,a.getSource()),Z=y.style.order.indexOf(h.fqid);if(W&&function(te,J,oe,ge,pe){for(const ve of ge){const me=J.getTile(ve).getBucket(oe);me&&(me.updateReplacement(ve,te.replacementSource,pe),me.uploadCentroid(te.context))}}(y,a,h,v,Z),O||W)for(const te of v){const J=a.getTile(te).getBucket(h);J&&Gu(y.context,a,te,J,h,O,W)}if(y.renderPass==="shadow"&&y.shadowRenderer){const te=y.shadowRenderer;if(O&&S<.65&&h._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.ab)return;const J=te.getShadowPassDepthMode(),oe=te.getShadowPassColorMode();mf(y,a,h,v,J,vr.disabled,oe,W)}else if(y.renderPass==="translucent"){const te=!h.paint.get("fill-extrusion-pattern").constantOr(1),J=h.paint.get("fill-extrusion-color").constantOr(i.am.white);if(!N&&J.a!==0){const oe=new Un(y.context.gl.LEQUAL,Un.ReadWrite,y.depthRangeFor3D);S===1&&te?mf(y,a,h,v,oe,vr.disabled,Nr.unblended,W):(mf(y,a,h,v,oe,vr.disabled,Nr.disabled,W),mf(y,a,h,v,oe,y.stencilModeFor3D(),y.colorModeForRenderPass(),W),y.resetStencilClippingMasks())}if(y.style.enable3dLights()&&te&&(!O&&y.transform.projection.name!=="globe"||N)){const oe=h.paint.get("fill-extrusion-opacity"),ge=h.paint.get("fill-extrusion-ambient-occlusion-intensity"),pe=h.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ve=h.paint.get("fill-extrusion-flood-light-intensity"),me=h.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Re=h.paint.get("fill-extrusion-flood-light-color").toRenderColor(me?null:h.lut).toArray01().slice(0,3),Be=ge>0&&pe>0,Ue=ve>0,Ke=(Ge,Ne,Je)=>(1-Je)*Ge+Je*Ne,Ye=Ge=>{const Ne=y.depthModeForSublayer(1,Un.ReadOnly,D.LEQUAL,!0),Je=h.paint.get(Ge?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),nt=Ke(.1,3,Je),bt=y._showOverdrawInspector;if(!bt){const mt=new vr({func:D.ALWAYS,mask:255},255,255,D.KEEP,D.KEEP,D.REPLACE),$t=new Nr([D.ONE,D.ONE,D.ONE,D.ONE],i.am.transparent,[!1,!1,!1,!0],D.MIN);Ud(y,a,h,v,Ne,mt,$t,br.disabled,Ge,"sdf",oe,ge,pe,ve,Re,nt,W,!1)}{const mt=bt?vr.disabled:new vr({func:D.EQUAL,mask:255},255,255,D.KEEP,D.DECR,D.DECR),$t=bt?y.colorModeForRenderPass():new Nr([D.ONE_MINUS_DST_ALPHA,D.DST_ALPHA,D.ONE,D.ONE],i.am.transparent,[!0,!0,!0,!0]);Ud(y,a,h,v,Ne,mt,$t,br.disabled,Ge,"color",oe,ge,pe,ve,Re,nt,W,!1)}};if(N){const Ge=(Ne,Je,nt)=>{const bt=y.depthModeForSublayer(1,Un.ReadOnly,D.LEQUAL,!1),mt=h.paint.get(Ne?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),$t=Ke(.1,3,mt);{const jt=new Nr([D.ONE,D.ONE,D.ONE,D.ONE],i.am.transparent,[!1,!1,!1,!0]);Ud(y,a,h,v,bt,vr.disabled,jt,br.disabled,Ne,"clear",oe,ge,pe,ve,Re,$t,W,Je)}{const jt=new vr({func:D.ALWAYS,mask:255},255,255,D.KEEP,D.KEEP,D.REPLACE),an=new Nr([D.ONE,D.ONE,D.ONE,D.ONE],i.am.transparent,[!1,!1,!1,!0],D.MIN);Ud(y,a,h,v,bt,jt,an,br.disabled,Ne,"sdf",oe,ge,pe,ve,Re,$t,W,Je)}{const jt=Ne?D.ZERO:D.ONE_MINUS_DST_ALPHA,an=new vr({func:D.EQUAL,mask:255},255,255,D.KEEP,D.DECR,D.DECR),pt=new Nr([jt,D.DST_ALPHA,D.ONE_MINUS_DST_ALPHA,D.ZERO],i.am.transparent,[!0,!0,!0,!0]);Ud(y,a,h,v,bt,an,pt,br.disabled,Ne,"color",oe,ge,pe,ve,Re,$t,W,Je)}{const jt=new Nr([D.ONE,D.ONE,D.ONE,Ne?D.ZERO:D.ONE],i.am.transparent,[!1,!1,!1,!0],Ne?D.FUNC_ADD:D.MAX);Ud(y,a,h,v,bt,vr.disabled,jt,br.disabled,Ne,"clear",oe,ge,pe,ve,Re,$t,W,Je,nt)}};if(Be||Ue){let Ne;if(y.prepareDrawTile(),O){const Je=O.drapeBufferSize[0],nt=O.drapeBufferSize[1];Ne=O.framebufferCopyTexture,Ne&&(!Ne||Ne.size[0]===Je&&Ne.size[1]===nt)||(Ne&&Ne.destroy(),Ne=O.framebufferCopyTexture=new i.T(E,new i.r({width:Je,height:nt}),D.RGBA8)),Ne.bind(D.LINEAR,D.CLAMP_TO_EDGE),D.copyTexSubImage2D(D.TEXTURE_2D,0,0,0,0,0,Je,nt)}Be&&Ge(!0,!1,Ne),Ue&&Ge(!1,!0,Ne)}}else Be&&Ye(!0),Ue&&Ye(!1),(Be||Ue)&&y.resetStencilClippingMasks()}}},hillshade:function(y,a,h,v){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent"||y.style.disableElevatedTerrain)return;const S=y.context,E=y.terrain&&y.terrain.renderingToTexture,[D,O]=y.renderPass!=="translucent"||E?[{},v]:y.stencilConfigForOverlap(v);for(const N of O){const W=a.getTile(N);if(W.needsHillshadePrepare&&y.renderPass==="offscreen")Oc(y,W,h);else if(y.renderPass==="translucent"){const Z=y.depthModeForSublayer(0,Un.ReadOnly),te=h.paint.get("hillshade-emissive-strength"),J=y.colorModeForDrapableLayerRenderPass(te),oe=E&&y.terrain?y.terrain.stencilModeForRTTOverlap(N):D[N.overscaledZ];ml(y,N,W,h,Z,oe,J)}}S.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,a,h,v,S,E){if(y.renderPass!=="translucent"||h.paint.get("raster-opacity")===0)return;const D=y.transform.projection.name==="globe",O=h.paint.get("raster-elevation")!==0,N=O&&D;if(y.renderElevatedRasterBackface&&!N)return;const W=y.context,Z=W.gl,te=a.getSource(),J=function(Ye,Ge,Ne,Je){const nt=Ge.paint.get("raster-color"),bt=Ye.type==="raster-array",mt=[],$t=Ge.paint.get("raster-resampling"),jt=Ge.paint.get("raster-color-mix");let an=Ge.paint.get("raster-color-range");const pt=[jt[0],jt[1],jt[2],0],Tt=jt[3];let ut=$t==="nearest"?Je.NEAREST:Je.LINEAR;if(bt&&(mt.push("RASTER_ARRAY"),nt||mt.push("RASTER_COLOR"),$t==="linear"&&mt.push("RASTER_ARRAY_LINEAR"),ut=Je.NEAREST,!an&&Ye.rasterLayers)){const Gt=Ye.rasterLayers.find(({id:Mt})=>Mt===Ge.sourceLayer);Gt&&Gt.fields&&Gt.fields.range&&(an=Gt.fields.range)}if(an=an||[0,1],nt){mt.push("RASTER_COLOR"),Ne.activeTexture.set(Je.TEXTURE2),Ge.updateColorRamp(an);let Gt=Ge.colorRampTexture;Gt||(Gt=Ge.colorRampTexture=new i.T(Ne,Ge.colorRamp,Je.RGBA8)),Gt.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}return{mix:pt,range:an,offset:Tt,defines:mt,resampling:ut}}(te,h,W,Z);if(te instanceof i.aP&&!v.length&&!D)return;const oe=h.paint.get("raster-emissive-strength"),ge=y.colorModeForDrapableLayerRenderPass(oe),pe=y.terrain&&y.terrain.renderingToTexture,ve=!y.options.moving,me=h.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;if(te instanceof i.aP&&!v.length&&(te.onNorthPole||te.onSouthPole)){const Ye=O?y.stencilModeFor3D():vr.disabled;return void cs(!!te.onNorthPole,null,y,a,h,oe,J,br.disabled,Ye)}if(!v.length)return;const[Re,Be]=te instanceof i.aP||pe?[{},v]:y.stencilConfigForOverlap(v),Ue=Be[Be.length-1].overscaledZ;N&&J.defines.push("PROJECTION_GLOBE_VIEW"),O&&J.defines.push("RENDER_CUTOFF");const Ke=(Ye,Ge,Ne)=>{for(const Je of Ye){const nt=Je.toUnwrapped(),bt=a.getTile(Je);if(pe&&(!bt||!bt.hasData()))continue;W.activeTexture.set(Z.TEXTURE0);const mt=ng(bt,te,h,J);if(!mt||!mt.texture)continue;const{texture:$t,mix:jt,offset:an,tileSize:pt,buffer:Tt}=mt;let ut,Gt;pe?(ut=Un.disabled,Gt=Je.projMatrix):O?(ut=new Un(Z.LEQUAL,Un.ReadWrite,y.depthRangeFor3D),Gt=D?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(nt,ve)):(ut=y.depthModeForSublayer(Je.overscaledZ-Ue,h.paint.get("raster-opacity")===1?Un.ReadWrite:Un.ReadOnly,Z.LESS),Gt=y.transform.calculateProjMatrix(nt,ve));const Mt=y.terrain&&pe?y.terrain.stencilModeForRTTOverlap(Je):Re[Je.overscaledZ],Jt=E?0:h.paint.get("raster-fade-duration");bt.registerFadeDuration(Jt);const qt=a.findLoadedParent(Je,0),en=Gm(bt,qt,a,y.transform,Jt);let on,Vn;y.terrain&&y.terrain.prepareDrawTile(),W.activeTexture.set(Z.TEXTURE0),$t.bind(me,Z.CLAMP_TO_EDGE),W.activeTexture.set(Z.TEXTURE1),qt?(qt.texture&&qt.texture.bind(me,Z.CLAMP_TO_EDGE),on=Math.pow(2,qt.tileID.overscaledZ-bt.tileID.overscaledZ),Vn=[bt.tileID.canonical.x*on%1,bt.tileID.canonical.y*on%1]):$t.bind(me,Z.CLAMP_TO_EDGE),"useMipmap"in $t&&W.extTextureFilterAnisotropic&&y.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const Gn=y.transform;let Fn;const Qn=O?Sy(Gn):[0,0,0,0];let Wn,hr,Mr,ur,Lr,_r=0;if(N&&te instanceof i.aP&&te.coordinates.length>3)Wn=Float32Array.from(i.bh(i.dr(new i.cp(0,0,0)))),hr=Float32Array.from(Gn.globeMatrix),Mr=Float32Array.from(i.dm(Gn)),ur=[i.ay(Gn.center.lng),i.aH(Gn.center.lat)],Fn=te.elevatedGlobePerspectiveTransform,Lr=te.elevatedGlobeGridMatrix||new Float32Array(9);else if(N){const Ar=i.dn(Je.canonical);_r=i.dp(Ar.getCenter().lat),Wn=Float32Array.from(i.bh(i.dr(Je.canonical))),hr=Float32Array.from(Gn.globeMatrix),Mr=Float32Array.from(i.dm(Gn)),ur=[i.ay(Gn.center.lng),i.aH(Gn.center.lat)],Fn=[0,0],Lr=Float32Array.from(i.dq(Je.canonical,Ar,_r,Gn.worldSize/Gn._pixelsPerMercatorPixel))}else Fn=te instanceof i.aP?te.perspectiveTransform:[0,0],Wn=new Float32Array(16),hr=new Float32Array(9),Mr=new Float32Array(16),ur=[0,0],Lr=new Float32Array(9);const ar=Za(Gt,Wn,hr,Mr,Lr,Vn||[0,0],i.ah(y.transform.zoom),ur,Qn,on||1,en,h,Fn,O?h.paint.get("raster-elevation"):0,2,jt,an,J.range,pt,Tt,oe),Zr=y.isTileAffectedByFog(Je),Ei=y.getOrCreateProgram("raster",{defines:J.defines,overrideFog:Zr});if(y.uploadCommonUniforms(W,Ei,nt),te instanceof i.aP){const Ar=te.elevatedGlobeVertexBuffer,Kr=te.elevatedGlobeIndexBuffer;if(pe||!D)te.boundsBuffer&&te.boundsSegments&&Ei.draw(y,Z.TRIANGLES,ut,vr.disabled,ge,br.disabled,ar,h.id,te.boundsBuffer,y.quadTriangleIndexBuffer,te.boundsSegments);else if(Ar&&Kr){const di=Gn.zoom<=i.cL?te.elevatedGlobeSegments:te.getSegmentsForLongitude(Gn.center.lng);di&&Ei.draw(y,Z.TRIANGLES,ut,vr.disabled,ge,Ge,ar,h.id,Ar,Kr,di)}}else if(N){ut=new Un(Z.LEQUAL,Un.ReadOnly,y.depthRangeFor3D);const Ar=y.globeSharedBuffers;if(Ar){const[Kr,di,pi]=Ar.getGridBuffers(_r,!1);Ei.draw(y,Z.TRIANGLES,ut,Ne||Mt,y.colorModeForRenderPass(),Ge,ar,h.id,Kr,di,pi)}}else{const{tileBoundsBuffer:Ar,tileBoundsIndexBuffer:Kr,tileBoundsSegments:di}=y.getTileBoundsBuffers(bt);Ei.draw(y,Z.TRIANGLES,ut,Mt,ge,br.disabled,ar,h.id,Ar,Kr,di)}}if(!(te instanceof i.aP)&&N)for(const Je of Ye){const nt=Je.canonical.y===(1<<Je.canonical.z)-1;Je.canonical.y===0&&cs(!0,Je,y,a,h,oe,J,Ge,Ne||vr.disabled),nt&&cs(!1,Je,y,a,h,oe,J,Ge===br.frontCW?br.backCW:br.frontCW,Ne||vr.disabled)}};N?Ke(Be,y.renderElevatedRasterBackface?br.backCW:br.frontCW,y.stencilModeFor3D()):Ke(Be,br.disabled,void 0),y.resetStencilClippingMasks()},"raster-particle":function(y,a,h,v,S,E){y.renderPass==="offscreen"&&function(D,O,N,W){if(!W.length)return;const Z=D.context,te=Z.gl,J=O.getSource();if(!(J instanceof zs))return;const oe=Math.ceil(Math.sqrt(N.paint.get("raster-particle-count")));let ge=N.particlePositionRGBAImage;if(!ge||ge.width!==oe){const Be=function(Ue){const Ke=Ue*Ue,Ye=new Uint8Array(4*Ke),Ge=function(Je){return Je|=0,Je=Math.imul(2747636419^Je,2654435769),Je=Math.imul(Je^Je>>>16,2654435769),((Je=Math.imul(Je^Je>>>16,2654435769))>>>0)/4294967296},Ne=1/1.1;for(let Je=0;Je<Ke;Je++){const nt=Ne*(Ge(2*Je+0)+Ka),bt=Ne*(Ge(2*Je+1)+Ka),mt=255*nt%1,$t=255*bt%1,jt=mt,an=bt-$t/255,pt=$t;Ye[4*Je+0]=255*(nt-mt/255),Ye[4*Je+1]=255*jt,Ye[4*Je+2]=255*an,Ye[4*Je+3]=255*pt}return Ye}(oe);ge=N.particlePositionRGBAImage=new i.r({width:oe,height:oe},Be)}let pe=N.particleFramebuffer;pe?pe.width!==oe&&(pe.destroy(),pe=N.particleFramebuffer=Z.createFramebuffer(oe,oe,!0,null)):pe=N.particleFramebuffer=Z.createFramebuffer(oe,oe,!0,null);const ve=[];for(const Be of W){const Ue=O.getTile(Be);if(!(Ue instanceof Cm))continue;const Ke=Yu(Ue,J,N);if(!Ke)continue;const Ye=[Ue.tileSize,Ue.tileSize];let Ge=N.tileFramebuffer;Ge||(Ge=N.tileFramebuffer=Z.createFramebuffer(Ye[0],Ye[1],!0,null));let Ne=Ue.rasterParticleState;Ne||(Ne=Ue.rasterParticleState=new i_(Z,Be,Ye,ge));const Je=Ne.update(N.lastInvalidatedAt);Ne.particleTextureDimension!==oe&&Ne.updateParticleTexture(Be,ge);const nt=Ne.targetColorTexture;Ne.targetColorTexture=Ne.backgroundColorTexture,Ne.backgroundColorTexture=nt;const bt=Ne.particleTexture0;Ne.particleTexture0=Ne.particleTexture1,Ne.particleTexture1=bt,ve.push([Be,Ke,Ne,Je])}if(ve.length===0)return;const me=i.q.now(),Re=N.previousDrawTimestamp?.001*(me-N.previousDrawTimestamp):.0167;if(N.previousDrawTimestamp=me,N.hasColorMap()){Z.activeTexture.set(te.TEXTURE0+2);let Be=N.colorRampTexture;Be||(Be=N.colorRampTexture=new i.T(Z,N.colorRamp,te.RGBA8)),Be.bind(te.LINEAR,te.CLAMP_TO_EDGE)}Z.bindFramebuffer.set(N.tileFramebuffer.framebuffer),function(Be,Ue,Ke){const Ye=Be.context,Ge=Ye.gl,Ne=Ue.tileFramebuffer;Ye.activeTexture.set(Ge.TEXTURE0);const Je={u_texture:0,u_opacity:1.05*(bt=Ue.paint.get("raster-particle-fade-opacity-factor"))/(bt+.05)},nt=Be.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var bt;for(const mt of Ke){const[,,$t,jt]=mt;Ne.colorAttachment.set($t.targetColorTexture.texture),Ye.viewport.set([0,0,Ne.width,Ne.height]),Ye.clear({color:i.am.transparent}),jt&&($t.backgroundColorTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE),nt.draw(Be,Ge.TRIANGLES,Un.disabled,vr.disabled,Nr.alphaBlended,br.disabled,Je,Ue.id,Be.viewportBuffer,Be.quadTriangleIndexBuffer,Be.viewportSegments))}}(D,N,ve),function(Be,Ue,Ke,Ye){const Ge=Be.context,Ne=Ge.gl,Je=Ke.tileFramebuffer,nt=Be.transform.projection.name==="globe",bt=Ke.paint.get("raster-particle-max-speed");for(const mt of Ye){const[$t,jt,an]=mt;Ge.activeTexture.set(Ne.TEXTURE0+0),jt.texture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Je.colorAttachment.set(an.targetColorTexture.texture);const pt=Be.getOrCreateProgram("rasterParticleDraw",{defines:jt.defines,overrideFog:!1});Ge.activeTexture.set(Ne.TEXTURE0+1);const Tt=jt.scalarData?[]:[0,1,2,3].map(Mt=>i.dU[Mt]($t));Tt.push($t);const ut=$t.canonical.x,Gt=$t.canonical.y;for(const Mt of Tt){const Jt=Ue.getTile(nt?Mt.wrapped():Mt);if(!Jt)continue;const qt=Jt.rasterParticleState;if(!qt)continue;const en=Mt.canonical.x+(1<<Mt.canonical.z)*(Mt.wrap-$t.wrap),on=Mt.canonical.y;qt.particleTexture0.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);const Vn=jc(1,qt.particleTexture0.size[0],[en-ut,on-Gt],0,jt.texture.size,2,bt,jt.textureOffset,jt.scale,jt.offset);pt.draw(Be,Ne.POINTS,Un.disabled,vr.disabled,Nr.alphaBlended,br.disabled,Vn,Ke.id,qt.particleIndexBuffer,void 0,qt.particleSegment)}}}(D,O,N,ve),Z.bindFramebuffer.set(N.particleFramebuffer.framebuffer),function(Be,Ue,Ke,Ye){const Ge=Be.context,Ne=Ge.gl,Je=Ue.paint.get("raster-particle-max-speed"),nt=Ye*Ue.paint.get("raster-particle-speed-factor")*.15,bt=function($t){return Math.pow($t,6)}(.01+1*Ue.paint.get("raster-particle-reset-rate-factor")),mt=Ue.particleFramebuffer;Ge.viewport.set([0,0,mt.width,mt.height]);for(const $t of Ke){const[,jt,an]=$t;Ge.activeTexture.set(Ne.TEXTURE0+0),jt.texture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Ge.activeTexture.set(Ne.TEXTURE0+1);const pt=an.particleTexture0;pt.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);const Tt=Ap(1,pt.size[0],0,jt.texture.size,Je,nt,bt,jt.textureOffset,jt.scale,jt.offset);mt.colorAttachment.set(an.particleTexture1.texture),Ge.clear({color:i.am.transparent}),Be.getOrCreateProgram("rasterParticleUpdate",{defines:jt.defines}).draw(Be,Ne.TRIANGLES,Un.disabled,vr.disabled,Nr.unblended,br.disabled,Tt,Ue.id,Be.viewportBuffer,Be.quadTriangleIndexBuffer,Be.viewportSegments)}}(D,N,ve,Re)}(y,a,h,v),y.renderPass==="translucent"&&(function(D,O,N,W,Z){const te=D.context,J=te.gl,oe=O.getSource().tileSize,ge=5*(1-i.af(i.cx,i.cx+1,D.transform.zoom))*oe+N.paint.get("raster-particle-elevation"),pe=!D.options.moving,ve=D.transform.projection.name==="globe";if(!W.length)return;const[me,Re]=D.stencilConfigForOverlap(W),Be=[];ve&&Be.push("PROJECTION_GLOBE_VIEW");const Ue=D.stencilModeFor3D();for(const Ke of Re){const Ye=Ke.toUnwrapped(),Ge=O.getTile(Ke);if(!Ge.rasterParticleState)continue;const Ne=Ge.rasterParticleState,Je=100;Ge.registerFadeDuration(Je);const nt=O.findLoadedParent(Ke,0),bt=Gm(Ge,nt,O,D.transform,Je);let mt,$t;D.terrain&&D.terrain.prepareDrawTile(),te.activeTexture.set(J.TEXTURE0),Ne.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),te.activeTexture.set(J.TEXTURE1),nt&&nt.rasterParticleState?(nt.rasterParticleState.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),mt=Math.pow(2,nt.tileID.overscaledZ-Ge.tileID.overscaledZ),$t=[Ge.tileID.canonical.x*mt%1,Ge.tileID.canonical.y*mt%1]):Ne.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const jt=ve?Float32Array.from(D.transform.expandedFarZProjMatrix):D.transform.calculateProjMatrix(Ye,pe),an=D.transform,pt=kp(an),Tt=i.dn(Ke.canonical),ut=i.dp(Tt.getCenter().lat);let Gt,Mt,Jt,qt,en;ve?(Gt=Float32Array.from(i.bh(i.dr(Ke.canonical))),Mt=Float32Array.from(an.globeMatrix),Jt=Float32Array.from(i.dm(an)),qt=[i.ay(an.center.lng),i.aH(an.center.lat)],en=Float32Array.from(i.dq(Ke.canonical,Tt,ut,an.worldSize/an._pixelsPerMercatorPixel))):(Gt=new Float32Array(16),Mt=new Float32Array(9),Jt=new Float32Array(16),qt=[0,0],en=new Float32Array(9));const on=hu(jt,Gt,Mt,Jt,en,$t||[0,0],i.ah(D.transform.zoom),qt,pt,mt||1,bt,ge),Vn=D.isTileAffectedByFog(Ke),Gn=D.getOrCreateProgram("rasterParticle",{defines:Be,overrideFog:Vn});if(D.uploadCommonUniforms(te,Gn,Ye),ve){const Fn=new Un(J.LEQUAL,Un.ReadOnly,D.depthRangeFor3D),Qn=0,Wn=D.globeSharedBuffers;if(Wn){const[hr,Mr,ur]=Wn.getGridBuffers(ut,Qn!==0);Gn.draw(D,J.TRIANGLES,Fn,Ue,Nr.alphaBlended,D.renderElevatedRasterBackface?br.frontCCW:br.backCCW,on,N.id,hr,Mr,ur)}}else{const Fn=D.depthModeForSublayer(0,Un.ReadOnly),Qn=me[Ke.overscaledZ],{tileBoundsBuffer:Wn,tileBoundsIndexBuffer:hr,tileBoundsSegments:Mr}=D.getTileBoundsBuffers(Ge);Gn.draw(D,J.TRIANGLES,Fn,Qn,Nr.alphaBlended,br.disabled,on,N.id,Wn,hr,Mr)}}D.resetStencilClippingMasks()}(y,a,h,v),y.style.map.triggerRepaint())},background:function(y,a,h,v){const S=h.paint.get("background-color"),E=h.paint.get("background-color-use-theme").constantOr("default")==="none",D=h.paint.get("background-opacity"),O=h.paint.get("background-emissive-strength"),N=h.paint.get("background-pitch-alignment")==="viewport";if(D===0)return;const W=y.context,Z=W.gl,te=y.transform,J=te.tileSize,oe=h.paint.get("background-pattern");let ge;if(oe!==void 0&&(oe===null||(ge=y.imageManager.getPattern(i.I.from(oe.toString()),h.scope,y.style.getLut(h.scope)),!ge)))return;const pe=!oe&&S.a===1&&D===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==pe)return;const ve=vr.disabled,me=y.depthModeForSublayer(0,pe==="opaque"?Un.ReadWrite:Un.ReadOnly),Re=y.colorModeForDrapableLayerRenderPass(O),Be=oe?"backgroundPattern":"background";let Ue,Ke=v;if(Ke||(Ue=y.getBackgroundTiles(),Ke=Object.values(Ue).map(Ye=>Ye.tileID)),oe&&(W.activeTexture.set(Z.TEXTURE0),y.imageManager.bind(y.context,h.scope)),N){const Ye=y.getOrCreateProgram(Be,{overrideFog:!1,overrideRtt:!0}),Ge=new Float32Array(i.bx([])),Ne=new i.aM(0,0,0,0,0),Je=oe?Dp(Ge,O,D,y,0,h.scope,ge,N,{tileID:Ne,tileSize:J}):Bd(Ge,O,D,S.toRenderColor(E?null:h.lut));Ye.draw(y,Z.TRIANGLES,me,ve,Re,br.disabled,Je,h.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments)}else for(const Ye of Ke){const Ge=y.isTileAffectedByFog(Ye),Ne=y.getOrCreateProgram(Be,{overrideFog:Ge}),Je=Ye.toUnwrapped(),nt=v?Ye.projMatrix:y.transform.calculateProjMatrix(Je);y.prepareDrawTile();const bt=a?a.getTile(Ye):Ue?Ue[Ye.key]:new Mc(Ye,J,te.zoom,y),mt=oe?Dp(nt,O,D,y,0,h.scope,ge,N,{tileID:Ye,tileSize:J}):Bd(nt,O,D,S.toRenderColor(E?null:h.lut));y.uploadCommonUniforms(W,Ne,Je);const{tileBoundsBuffer:$t,tileBoundsIndexBuffer:jt,tileBoundsSegments:an}=y.getTileBoundsBuffers(bt);Ne.draw(y,Z.TRIANGLES,me,ve,Re,br.disabled,mt,h.id,$t,jt,an)}},sky:function(y,a,h){const v=y._atmosphere?i.ah(y.transform.zoom):1,S=h.paint.get("sky-opacity")*v;if(S===0)return;const E=y.context,D=h.paint.get("sky-type"),O=new Un(E.gl.LEQUAL,Un.ReadOnly,[0,1]),N=y.frameCounter/1e3%1;D==="atmosphere"?y.renderPass==="offscreen"?h.needsSkyboxCapture(y)&&(function(W,Z,te,J){const oe=W.context,ge=oe.gl;let pe=Z.skyboxFbo;if(!pe){pe=Z.skyboxFbo=oe.createFramebuffer(32,32,!0,null),Z.skyboxGeometry=new Op(oe),Z.skyboxTexture=oe.gl.createTexture(),ge.bindTexture(ge.TEXTURE_CUBE_MAP,Z.skyboxTexture),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MAG_FILTER,ge.LINEAR);for(let Be=0;Be<6;++Be)ge.texImage2D(ge.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ge.RGBA,32,32,0,ge.RGBA,ge.UNSIGNED_BYTE,null)}oe.bindFramebuffer.set(pe.framebuffer),oe.viewport.set([0,0,32,32]);const ve=Z.getCenter(W,!0),me=W.getOrCreateProgram("skyboxCapture"),Re=new Float64Array(16);i.bx(Re),i.e3(Re,Re,.5*-Math.PI),Zu(W,Z,me,Re,ve,0),i.bx(Re),i.e3(Re,Re,.5*Math.PI),Zu(W,Z,me,Re,ve,1),i.bx(Re),i.cG(Re,Re,.5*-Math.PI),Zu(W,Z,me,Re,ve,2),i.bx(Re),i.cG(Re,Re,.5*Math.PI),Zu(W,Z,me,Re,ve,3),i.bx(Re),Zu(W,Z,me,Re,ve,4),i.bx(Re),i.e3(Re,Re,Math.PI),Zu(W,Z,me,Re,ve,5),oe.viewport.set([0,0,W.width,W.height])}(y,h),h.markSkyboxValid(y)):y.renderPass==="sky"&&function(W,Z,te,J,oe){const ge=W.context,pe=ge.gl,ve=W.transform,me=W.getOrCreateProgram("skybox");ge.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_CUBE_MAP,Z.skyboxTexture);const Re=((Be,Ue,Ke,Ye,Ge)=>({u_matrix:Be,u_sun_direction:Ue,u_cubemap:0,u_opacity:Ye,u_temporal_offset:Ge}))(ve.skyboxMatrix,Z.getCenter(W,!1),0,J,oe);W.uploadCommonUniforms(ge,me),me.draw(W,pe.TRIANGLES,te,vr.disabled,W.colorModeForRenderPass(),br.backCW,Re,"skybox",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(y,h,O,S,N):D==="gradient"&&y.renderPass==="sky"&&function(W,Z,te,J,oe){const ge=W.context,pe=ge.gl,ve=W.transform,me=W.getOrCreateProgram("skyboxGradient");Z.skyboxGeometry||(Z.skyboxGeometry=new Op(ge)),ge.activeTexture.set(pe.TEXTURE0);let Re=Z.colorRampTexture;Re||(Re=Z.colorRampTexture=new i.T(ge,Z.colorRamp,pe.RGBA8)),Re.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const Be=((Ue,Ke,Ye,Ge,Ne)=>({u_matrix:Ue,u_color_ramp:0,u_center_direction:Ke,u_radius:i.al(Ye),u_opacity:Ge,u_temporal_offset:Ne}))(ve.skyboxMatrix,Z.getCenter(W,!1),Z.paint.get("sky-gradient-radius"),J,oe);W.uploadCommonUniforms(ge,me),me.draw(W,pe.TRIANGLES,te,vr.disabled,W.colorModeForRenderPass(),br.backCW,Be,"skyboxGradient",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(y,h,O,S,N)},debug:function(y,a,h,v,S,E){for(let D=0;D<h.length;D++)if(S){const W=new i.am(v.r*.8,v.g*.8,v.b*.8,1);Hd(y,a,h[D],v,-1,-1,E),Hd(y,a,h[D],v,-1,1,E),Hd(y,a,h[D],v,1,1,E),Hd(y,a,h[D],v,1,-1,E),Hd(y,a,h[D],W,0,0,E)}else Hd(y,a,h[D],v,0,0,E)},custom:function(y,a,h,v){const S=y.context,E=h.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&h.isDraped(a)){if(y.renderPass==="offscreen"){const D=E.prerender;if(D){if(y.setCustomLayerDefaults(),S.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const O=y.transform.pointMerc;D.call(E,S.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),i.ah(y.transform.zoom),[O.x,O.y],y.transform.pixelsPerMeterRatio)}else D.call(E,S.gl,y.transform.customLayerMatrix());S.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const O=E.renderToTile;if(O){const N=v[0].canonical,W={x:N.x+v[0].wrap*(E.wrapTileId?0:1<<N.z),y:N.y,z:N.z};S.setDepthMode(Un.disabled),S.setStencilMode(vr.disabled),S.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),O.call(E,S.gl,W),S.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),S.setColorMode(y.colorModeForRenderPass()),S.setStencilMode(vr.disabled);const D=E.renderingMode==="3d"?new Un(y.context.gl.LEQUAL,Un.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Un.ReadOnly);if(S.setDepthMode(D),y.transform.projection.name==="globe"){const O=y.transform.pointMerc;E.render(S.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),i.ah(y.transform.zoom),[O.x,O.y],y.transform.pixelsPerMeterRatio)}else E.render(S.gl,y.transform.customLayerMatrix());S.setDirty(),y.setBaseState(),S.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(y,a,h,v){if(y.renderPass==="opaque")return;const S=h.paint.get("model-opacity").constantOr(1);if(S===0)return;const E=h.paint.get("model-cast-shadows");if(y.renderPass==="shadow"&&(!E||y.terrain&&S<.65&&h._transitionablePaint._values["model-opacity"].value.expression instanceof i.ab))return;const D=y.shadowRenderer,O=h.paint.get("model-receive-shadows");D&&(D.useNormalOffset=!0,O||(D.enabled=!1));const N=()=>{D&&(D.useNormalOffset=!0,O||(D.enabled=!0))},W=a.getSource();if(y.renderPass==="light-beam"&&W.type!=="batched-model")return;if(W.type==="vector"||W.type==="geojson")return function(me,Re,Be,Ue,Ke){const Ye=me.transform;if(Ye.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${Ye.projection.name} projection is not yet implemented`);const Ge=Ye.getFreeCameraOptions().position;if(!me.modelManager)return;const Ne=me.modelManager;Be.modelManager=Ne;const Je=me.shadowRenderer;if(!Be._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const nt=Be._unevaluatedLayout._values["model-id"],bt=Object.assign({},Be.layout.get("model-id").parameters),mt=me.style.order.indexOf(Be.fqid);for(const $t of Ue){const jt=Re.getTile($t).getBucket(Be);if(!jt||jt.projection.name!==Ye.projection.name)continue;const an=jt.getModelUris();an&&!jt.modelsRequested&&(Ne.addModelsFromBucket(an,Ke),jt.modelsRequested=!0);const pt=Yd($t,Ye);bt.zoom=pt;const Tt=nt.possiblyEvaluate(bt);if(_t(me,jt,$t),yl.shadowUniformsInitialized=!1,yl.useSingleShadowCascade=!!Je&&Je.getMaxCascadeForTile($t.toUnwrapped())===0,me.renderPass==="shadow"&&Je){if(me.currentShadowCascade===1&&jt.isInsideFirstShadowMapFrustum)continue;const Mt=Ye.calculatePosMatrix($t.toUnwrapped(),Ye.worldSize);if(yl.tileMatrix.set(Mt),yl.shadowTileMatrix=Float32Array.from(Je.calculateShadowPassMatrixFromMatrix(Mt)),yl.aabb.min.fill(0),yl.aabb.max[0]=yl.aabb.max[1]=i.aj,yl.aabb.max[2]=0,l_(jt,yl,me,Be.scope))continue}const ut=1<<$t.canonical.z,Gt=[((Ge.x-$t.wrap)*ut-$t.canonical.x)*i.aj,(Ge.y*ut-$t.canonical.y)*i.aj,Ge.z*ut*i.aj];me.conflationActive&&Object.keys(jt.instancesPerModel).length>0&&me.style.isLayerClipped(Be,Re.getSource())&&jt.updateReplacement($t,me.replacementSource,mt,Ke)&&(jt.uploaded=!1,jt.upload(me.context));for(let Mt in jt.instancesPerModel){const Jt=jt.instancesPerModel[Mt];Jt.features.length>0&&(Mt=Tt.evaluate(Jt.features[0].feature,{}));const qt=Ne.getModel(Mt,Ke);if(qt||Ne.hasURLBeenRequested(Mt)||jt.modelUris.includes(Mt)||(jt.modelUris.push(Mt),jt.modelsRequested=!1),qt&&qt.uploaded)for(const en of qt.nodes)lg(me,Be,en,Jt,Gt,$t,yl)}}}(y,a,h,v,W.type==="vector"?h.scope:""),void N();if(!W.loaded())return;if(W.type==="batched-model")return function(me,Re,Be,Ue){Be.resetLayerRenderingStats(me);const Ke=me.context,Ye=me.transform,Ge=me.style.fog,Ne=me.shadowRenderer;if(Ye.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${Ye.projection.name} projection is not yet implemented`);const Je=me.transform.getFreeCameraOptions().position,nt=i.b$([],[Je.x,Je.y,Je.z],me.transform.worldSize),bt=i.eb([],nt),mt=i.bx([]),$t=i.ec(Ye.center.lat,Ye.zoom),jt=i.bn([],[1,1,1/$t]);i.bo(mt,mt,bt);const an=Be.paint.get("model-opacity").constantOr(1),pt=new Un(Ke.gl.LEQUAL,Un.ReadWrite,me.depthRangeFor3D),Tt=new Un(Ke.gl.LEQUAL,Un.ReadOnly,me.depthRangeFor3D),ut=new i.cV([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Gt=me.renderPass==="shadow",Mt=Gt&&Ne?Ne.getCurrentCascadeFrustum():Ye.getFrustum(Ye.scaleZoom(Ye.worldSize)),Jt=Be.paint.get("model-front-cutoff"),qt=Jt[2]<1,en=Jh(me,Be.paint.get("model-cutoff-fade-range")),on=Be.getLayerRenderingStats();(function(Vn,Gn,Fn,Qn){const Wn=Vn.terrain?Vn.terrain.exaggeration():0,hr=Vn.transform.zoom;for(const Mr of Qn){const ur=Gn.getTile(Mr).getBucket(Fn);ur&&(ur.setFilter(Fn.filter),Vn.conflationActive&&ur.updateReplacement(Mr,Vn.replacementSource),ur.evaluateScale(Vn,Fn),Vn.terrain&&Wn>0&&ur.elevationUpdate(Vn.terrain,Wn,Mr,Fn.source),ur.needsReEvaluation(Vn,hr,Fn)&&ur.evaluate(Fn))}})(me,Re,Be,Ue),function(){let Vn,Gn,Fn;qt?(Vn=Ue.length-1,Gn=-1,Fn=-1):(Vn=0,Gn=Ue.length,Fn=1);const Qn=new Float64Array(16),Wn=i.eg(),hr=new i.P(0,0);for(let Mr=Vn;Mr!==Gn;Mr+=Fn){const ur=Ue[Mr],Lr=Re.getTile(ur).getBucket(Be);if(!Lr||!Lr.uploaded)continue;let _r=!1;Ne&&(_r=Ne.getMaxCascadeForTile(ur.toUnwrapped())===0);const ar=Ye.calculatePosMatrix(ur.toUnwrapped(),Ye.worldSize),Zr=Lr.modelTraits;!Gt&&qt&&(i.bi(Qn,ar),i.ad(Wn,nt,Qn),hr.x=Wn[0],hr.y=Wn[1]);const Ei=[];Lr.setFilter(Be.filter);for(const Ar of Lr.getNodesInfo()){if(Ar.hiddenByReplacement||!Ar.node.meshes)continue;const Kr=Ar.node;let di=0;me.terrain&&Kr.elevation&&(di=Kr.elevation*me.terrain.exaggeration());const pi=(()=>{const to=Ar.aabb;return ut.min=[...to.min],ut.max=[...to.max],ut.min[2]+=di,ut.max[2]+=di,i.ad(ut.min,ut.min,ar),i.ad(ut.max,ut.max,ar),ut})(),Ci=Ar.evaluatedScale;if(Ci[0]<=1&&Ci[1]<=1&&Ci[2]<=1&&pi.intersects(Mt)===0)continue;if(!Gt&&qt){const to=.16666666666666666;Ar.cameraCollisionOpacity=nt[0]>pi.min[0]&&nt[0]<pi.max[0]&&nt[1]>pi.min[1]&&nt[1]<pi.max[1]&&nt[2]*$t<pi.max[2]&&Kr.footprint&&i.bS(hr,Kr.footprint)?Math.max(Ar.cameraCollisionOpacity-to,0):Math.min(1,Ar.cameraCollisionOpacity+to)}const Ji=[...ar],Ao=Kr.anchor?Kr.anchor[0]:0,eo=Kr.anchor?Kr.anchor[1]:0;i.bo(Ji,Ji,[Ao*(Ci[0]-1),eo*(Ci[1]-1),di]),i.ci(Ci,i.eh)||i.cE(Ji,Ji,Ci);const Tr=i.az([],Ji,Kr.matrix),Ui=i.az([],Ye.expandedFarZProjMatrix,Tr),ai=i.az([],Ye.expandedFarZProjMatrix,Ji),gi=i.aA([],[Ao,eo,di,1],Ui)[2];Kr.hidden=!1;let yi=an;Gt||(qt&&(yi*=Ar.cameraCollisionOpacity,yi*=yf(Ji,Ye,Ar.aabb,Jt)),yi*=c_(en,gi)),yi!==0?Ei.push({nodeInfo:Ar,depth:gi,opacity:yi,wvpForNode:Ui,wvpForTile:ai,nodeModelMatrix:Tr,tileModelMatrix:Ji}):Kr.hidden=!0}Gt||Ei.sort((Ar,Kr)=>!qt||Ar.opacity===1&&Kr.opacity===1?Ar.depth<Kr.depth?-1:1:Ar.opacity===1?-1:Kr.opacity===1?1:Ar.depth>Kr.depth?-1:1);for(const Ar of Ei){const Kr=Ar.nodeInfo,di=Kr.node;let pi=i.az([],jt,Ar.tileModelMatrix);i.az(pi,mt,pi);const Ci=i.bi([],pi);i.ee(Ci,Ci),i.cE(Ci,Ci,Cy),pi=i.az(pi,pi,di.matrix);const Ji=me.renderPass==="light-beam",Ao=Be.paint.get("model-color-use-theme").constantOr("default")==="none",eo=Zr&i.em.HasMapboxMeshFeatures,Tr=eo?0:Kr.evaluatedRMEA[0][2];for(let Ui=0;Ui<di.meshes.length;++Ui){const ai=di.meshes[Ui],gi=Ui===di.lightMeshIndex;let yi=Ar.wvpForNode;if(gi){if(!Ji&&!me.terrain&&me.shadowRenderer){me.currentLayer<me.firstLightBeamLayer&&(me.firstLightBeamLayer=me.currentLayer);continue}yi=Ar.wvpForTile}else if(Ji)continue;const to={defines:[]},us=[];if(!Gt&&Ne&&(Ne.useNormalOffset=!!ai.normalBuffer),yn(to.defines,us,ai,me,Ao?null:Be.lut),eo||to.defines.push("DIFFUSE_SHADED"),_r&&to.defines.push("SHADOWS_SINGLE_CASCADE"),on&&(Gt?on.numRenderedVerticesInShadowPass+=ai.vertexArray.length:on.numRenderedVerticesInTransparentPass+=ai.vertexArray.length),Gt){To(ai,Ar.nodeModelMatrix,me,Be);continue}let qi=null;if(Ge){const Ba=Gd(Ar.nodeModelMatrix,me.transform);if(qi=new Float32Array(Ba),Ye.projection.name!=="globe"){const xl=ai.aabb.min,Wc=ai.aabb.max,[bl,jl]=Ge.getOpacityForBounds(Ba,xl[0],xl[1],Wc[0],Wc[1]);to.overrideFog=bl>=dn||jl>=dn}}const Wo=ai.material;let zi;Wo.occlusionTexture&&Wo.occlusionTexture.offsetScale&&(zi=Wo.occlusionTexture.offsetScale,to.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Qo=me.getOrCreateProgram("model",to);!Gt&&Ne&&Ne.setupShadowsFromMatrix(Ar.tileModelMatrix,Qo,Ne.useNormalOffset),me.uploadCommonUniforms(Ke,Qo,null,qi);const Fa=Wo.pbrMetallicRoughness;Fa.metallicFactor=.9,Fa.roughnessFactor=.5;const _l=jd(new Float32Array(yi),new Float32Array(pi),new Float32Array(Ci),new Float32Array(di.matrix),me,Ar.opacity,Fa.baseColorFactor.toRenderColor(null),Wo.emissiveFactor,Fa.metallicFactor,Fa.roughnessFactor,Wo,Tr,Be,[0,0,0],zi);!gi&&(Kr.hasTranslucentParts||Ar.opacity<1)&&Qo.draw(me,Ke.gl.TRIANGLES,pt,vr.disabled,Nr.disabled,br.backCCW,_l,Be.id,ai.vertexBuffer,ai.indexBuffer,ai.segments,Be.paint,me.transform.zoom,void 0,us),Qo.draw(me,Ke.gl.TRIANGLES,gi?Tt:pt,vr.disabled,gi||Ar.opacity<1||Kr.hasTranslucentParts?Nr.alphaBlended:Nr.unblended,br.backCCW,_l,Be.id,ai.vertexBuffer,ai.indexBuffer,ai.segments,Be.paint,me.transform.zoom,void 0,us)}}}}()}(y,a,h,v),void N();if(W.type!=="model")return;const Z=W.getModels(),te=[],J=y.transform.getFreeCameraOptions().position,oe=i.b$([],[J.x,J.y,J.z],y.transform.worldSize);i.eb(oe,oe);const ge=[],pe=[];let ve=0;for(const me of Z){const Re=h.paint.get("model-rotation").constantOr(null),Be=h.paint.get("model-scale").constantOr(null),Ue=h.paint.get("model-translation").constantOr(null);me.computeModelMatrix(y,Re,Be,Ue,!0,!0,!1);const Ke=i.bx([]),Ye=i.ec(me.position.lat,y.transform.zoom),Ge=i.bn([],[1,1,1/Ye]);i.bo(Ke,Ke,oe),te.push({zScaleMatrix:Ge,negCameraPosMatrix:Ke});for(const Ne of me.nodes)ic(y.transform,Ne,me.matrix,y.transform.expandedFarZProjMatrix,ve,ge,pe);ve++}if(ge.sort((me,Re)=>Re.depth-me.depth),y.renderPass!=="shadow"){if(S===1)for(const me of pe)Ln(me,y,h,te[me.modelIndex],vr.disabled,y.colorModeForRenderPass());else{for(const me of pe)Ln(me,y,h,te[me.modelIndex],vr.disabled,Nr.disabled);for(const me of pe)Ln(me,y,h,te[me.modelIndex],y.stencilModeFor3D(),y.colorModeForRenderPass());y.resetStencilClippingMasks()}for(const me of ge)Ln(me,y,h,te[me.modelIndex],vr.disabled,y.colorModeForRenderPass());N()}else{for(const me of pe)To(me.mesh,me.nodeModelMatrix,y,h);for(const me of ge)To(me.mesh,me.nodeModelMatrix,y,h);N()}}},_f={line:function(y,a,h){if(y.hasElevatedBuckets=!1,y.hasNonElevatedBuckets=!1,y._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||y._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(a){const v=a.getVisibleCoordinates();for(const S of v){const E=a.getTile(S).getBucket(y);if(E&&(E.elevationType!=="none"?y.hasElevatedBuckets=!0:y.hasNonElevatedBuckets=!0,y.hasElevatedBuckets&&y.hasNonElevatedBuckets))break}}}else y.hasNonElevatedBuckets=!0},model:function(y,a,h){const v=a.getSource();if(!v.loaded())return;if(v.type==="vector"||v.type==="geojson")return void(h.modelManager&&h.modelManager.upload(h,v.type==="vector"?y.scope:""));if(v.type==="batched-model"||v.type!=="model")return;const S=v.getModels();for(const E of S)E.upload(h.context)},raster:function(y,a,h){const v=a.getSource();if(!(v instanceof zs&&v.loaded()))return;const S=y.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!S)return;const E=y.paint.get("raster-array-band")||v.getInitialBand(S);if(E==null)return;const D=a.getIds().map(O=>a.getTileByID(O));for(const O of D)O.updateNeeded(S,E)&&v.prepareTile(O,S,E)},"raster-particle":function(y,a,h){const v=a.getSource();if(!(v instanceof zs&&v.loaded()))return;const S=y.sourceLayer||v.rasterLayerIds&&v.rasterLayerIds[0];if(!S)return;const E=y.paint.get("raster-particle-array-band")||v.getInitialBand(S);if(E==null)return;const D=a.getIds().map(O=>a.getTileByID(O));for(const O of D)O.updateNeeded(S,E)&&v.prepareTile(O,S,E)}},Vc={fill:os};class xf{constructor(a,h,v,S,E){this.context=new Di(a,h),this.transform=v,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=E,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const D=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const N of D)this._debugParams.enabledLayers[N]=!0;E.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),E.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),E.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),E.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const N of D)E.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],N);this.occlusionParams=new d_(E),this.setup(),this.numSublayers=ta.maxUnderzooming+ta.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.et,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Pl(this),this._wireframeDebugCache=new u_,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const O=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,O,a.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=S}updateTerrain(a,h){const v=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ld(this,a));const S=this._terrain;this.transform.elevation=v?S:null,S.update(a,this.transform,h),this.transform.elevation&&!S.enabled&&(this.transform.elevation=null)}_updateFog(a){const h=a.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,S]=h.getFovAdjustedRange(this.transform._fov);if(v>S)return void(this.transform.fogCullDistSq=null);const E=v+.78*(S-v);this.transform.fogCullDistSq=E*E}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(a){a&&!this._terrain&&(this._terrain=new Ld(this,this.style)),this._forceTerrainMode=a}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(a,h){if(this.width=a*i.q.devicePixelRatio,this.height=h*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._mergedLayers[v].resize()}setup(){const a=this.context,h=new i.ba;h.emplaceBack(0,0),h.emplaceBack(i.aj,0),h.emplaceBack(0,i.aj),h.emplaceBack(i.aj,i.aj),this.tileExtentBuffer=a.createVertexBuffer(h,i.bc.members),this.tileExtentSegments=i.bd.simpleSegment(0,0,4,2);const v=new i.ba;v.emplaceBack(0,0),v.emplaceBack(i.aj,0),v.emplaceBack(0,i.aj),v.emplaceBack(i.aj,i.aj),this.debugBuffer=a.createVertexBuffer(v,i.bc.members),this.debugSegments=i.bd.simpleSegment(0,0,4,5);const S=new i.ba;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(S,i.bc.members),this.viewportSegments=i.bd.simpleSegment(0,0,4,2);const E=new i.aZ;E.emplaceBack(0,0,0,0),E.emplaceBack(i.aj,0,i.aj,0),E.emplaceBack(0,i.aj,0,i.aj),E.emplaceBack(i.aj,i.aj,i.aj,i.aj),this.mercatorBoundsBuffer=a.createVertexBuffer(E,i.bf.members),this.mercatorBoundsSegments=i.bd.simpleSegment(0,0,4,2);const D=new i.a_;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(D);const O=new i.bb;for(const W of[0,1,3,2,0])O.emplaceBack(W);this.debugIndexBuffer=a.createIndexBuffer(O),this.emptyTexture=new i.T(a,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA8),this.identityMat=i.bz();const N=this.context.gl;this.stencilClearMode=new vr({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,a.TRIANGLES,Un.disabled,this.stencilClearMode,Nr.disabled,br.disabled,Xa(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,h,v){if(!h||this.currentStencilSource===h.id||!a.isTileClipped()||!v||v.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const N of v)if(this._tileClippingMaskIDs[N.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=h.id;const S=this.context,E=S.gl;this.nextStencilID+v.length>256&&this.clearStencil(),S.setColorMode(Nr.disabled),S.setDepthMode(Un.disabled);const D=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of v){const N=h.getTile(O),W=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:Z,tileBoundsIndexBuffer:te,tileBoundsSegments:J}=this.getTileBoundsBuffers(N);D.draw(this,E.TRIANGLES,Un.disabled,new vr({func:E.ALWAYS,mask:0},W,255,E.KEEP,E.KEEP,E.REPLACE),Nr.disabled,br.disabled,Xa(O.projMatrix),"$clipping",Z,te,J)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,h=this.context.gl;return new vr({func:h.NOTEQUAL,mask:255},a,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const h=this.context.gl;return new vr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(a){const h=this.context.gl,v=a.sort((D,O)=>O.overscaledZ-D.overscaledZ),S=v[v.length-1].overscaledZ,E=v[0].overscaledZ-S+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const D={};for(let O=0;O<E;O++)D[O+S]=new vr({func:h.GEQUAL,mask:255},O+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=E,[D,v]}return[{[S]:vr.disabled},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Nr([a.CONSTANT_COLOR,a.ONE,a.CONSTANT_COLOR,a.ONE],new i.am(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}colorModeForDrapableLayerRenderPass(a){const h=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Nr([h.ONE,h.ONE_MINUS_SRC_ALPHA,h.CONSTANT_ALPHA,h.ONE_MINUS_SRC_ALPHA],new i.am(0,0,0,a===void 0?0:a),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(a,h,v,S=!1){if(this.depthOcclusion)return new Un(this.context.gl.GREATER,Un.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!S)return Un.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Un(v||this.context.gl.LEQUAL,h,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const a=this.context.gl,h=Math.ceil(this.width),v=Math.ceil(this.height),S=this.context.bindFramebuffer.get(),E=a.getParameter(a.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===h&&this.depthFBO.height===v||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),h!==0&&v!==0&&(this.depthFBO=new Nc(this.context,h,v,!1,"texture"),this.depthTexture=new i.T(this.context,{width:h,height:v,data:null},a.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(S),a.bindTexture(a.TEXTURE_2D,E),this.depthFBO&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),a.blitFramebuffer(0,0,h,v,0,0,h,v,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((a,h)=>a+h/this._fpsHistory.length,0))}render(a,h){const v=i.q.now();this._dt=v-this._timeStamp,this._timeStamp=v,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=a.map.repaint,this.style=a,this.options=h;const S=this.style._mergedLayers,E=!(!this.terrain||!this.terrain.enabled),D=()=>this.style._getOrder(E).filter(pt=>{const Tt=S[pt];return!(Tt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Tt.type]});let O=D(),N=!1,W=!1;for(const pt of O){const Tt=S[pt];Tt.type==="circle"&&(N=!0),Tt.type==="symbol"&&(Tt.hasInitialOcclusionOpacityProperties?W=!0:N=!0)}let Z=O.map(pt=>S[pt]);const te=this.style._mergedSourceCaches;this.imageManager=a.imageManager,this.modelManager=a.modelManager,this.symbolFadeChange=a.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let J=0,oe=!1;for(const pt in te){const Tt=te[pt];Tt.used&&(Tt.prepare(this.context),Tt.getSource().usedInConflation&&++J)}let ge=!1;for(const pt of Z)pt.isHidden(this.transform.zoom)||(pt.type==="clip"&&(ge=!0),this.prepareLayer(pt));const pe={},ve={},me={},Re={},Be={};for(const pt in te){const Tt=te[pt];pe[pt]=Tt.getVisibleCoordinates(),ve[pt]=pe[pt].slice().reverse(),me[pt]=Tt.getVisibleCoordinates(!0).reverse(),Re[pt]=Tt.getShadowCasterCoordinates(),Be[pt]=Tt.sortCoordinatesByDistance(pe[pt])}const Ue=pt=>{const Tt=this.style.getLayerSourceCache(pt);return Tt&&Tt.used?Tt.getSource():null};if(J||ge||this._clippingActiveLastFrame){const pt=[],Tt=[];let ut=0;for(const Gt of Z)this.isSourceForClippingOrConflation(Gt,Ue(Gt))&&(pt.push(Gt),Tt.push(ut)),ut++;if(pt&&(ge||pt.length>1)||this._clippingActiveLastFrame){ge=!1;const Gt=[];for(let Mt=0;Mt<pt.length;Mt++){const Jt=pt[Mt],qt=Tt[Mt],en=this.style.getLayerSourceCache(Jt);if(!en||!en.used||!en.getSource().usedInConflation&&Jt.type!=="clip")continue;let on=i.ev,Vn=i.bQ.None;const Gn=[];let Fn=!0;if(Jt.type==="clip"){on=qt;for(const Qn of Jt.layout.get("clip-layer-types"))Vn|=Qn==="model"?i.bQ.Model:Qn==="symbol"?i.bQ.Symbol:i.bQ.FillExtrusion;for(const Qn of Jt.layout.get("clip-layer-scope"))Gn.push(Qn);Jt.isHidden(this.transform.zoom)?Fn=!1:ge=!0}Fn&&Gt.push({layer:Jt.fqid,cache:en,order:on,clipMask:Vn,clipScope:Gn})}this.replacementSource.setSources(Gt),oe=!0}}this._clippingActiveLastFrame=ge,oe||this.replacementSource.clear(),this.conflationActive=oe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let pt=0;pt<Z.length;pt++){const Tt=Z[pt],ut=Tt.cutoffRange();if(this.longestCutoffRange=Math.max(ut,this.longestCutoffRange),ut>0){const Gt=Ue(Tt);Gt&&(this.minCutoffZoom=Math.max(Gt.minzoom,this.minCutoffZoom)),Tt.minzoom&&(this.minCutoffZoom=Math.max(Tt.minzoom,this.minCutoffZoom))}Tt.is3D(E)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=pt),this._lastOcclusionLayer=pt)}const Ke=this.style&&this.style.fog;Ke?(this._fogVisible=Ke.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Ke.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(me),this.opaquePassCutoff=0,O=D(),Z=O.map(pt=>S[pt]));const Ye=this._shadowRenderer;if(Ye){Ye.updateShadowParameters(this.transform,this.style.directionalLight);for(const pt in te)for(const Tt of pe[pt]){let ut={min:0,max:0};this.terrain&&(ut=this.terrain.getMinMaxForTile(Tt)||ut),Ye.addShadowReceiver(Tt.toUnwrapped(),ut.min,ut.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.eu(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new gf(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Ge=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Ne=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Ge&&!this._snow&&(this._snow=new ho(this)),!Ge&&this._snow&&(this._snow.destroy(),delete this._snow),Ne&&!this._rain&&(this._rain=new vx(this)),!Ne&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!yt.has(this.context.gl))return;this.renderPass="offscreen";for(const pt of Z){const Tt=a.getLayerSourceCache(pt);if(!pt.hasOffscreenPass()||pt.isHidden(this.transform.zoom))continue;const ut=Tt?ve[Tt.id]:void 0;(pt.type==="custom"||pt.type==="raster"||pt.type==="raster-particle"||pt.isSky()||ut&&ut.length)&&this.renderLayer(this,Tt,pt,ut)}this.depthRangeFor3D=[0,1-(Z.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Re)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Je=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),nt=(()=>{if(h.showOverdrawInspector)return i.am.black;const pt=this.style.fog;if(pt&&this.transform.projection.supportsFog){const Tt=this.style.getLut(pt.scope);if(!Je){const ut=pt.properties.get("color-use-theme")==="none",Gt=pt.properties.get("color").toRenderColor(ut?null:Tt).toArray01();return new i.am(...Gt)}if(Je){const ut=pt.properties.get("space-color-use-theme")==="none",Gt=pt.properties.get("space-color").toRenderColor(ut?null:Tt).toArray01();return new i.am(...Gt)}}return i.am.transparent})();if(this.context.clear({color:nt,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Je&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){const pt=Z[this.currentLayer],Tt=a.getLayerSourceCache(pt);if(pt.isSky())continue;const ut=Tt?(pt.is3D(E)?Be:ve)[Tt.id]:void 0;this._renderTileClippingMasks(pt,Tt,ut),this.renderLayer(this,Tt,pt,ut)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Je&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.ah(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){const pt=Z[this.currentLayer],Tt=a.getLayerSourceCache(pt);pt.isSky()&&this.renderLayer(this,Tt,pt,Tt?ve[Tt.id]:void 0)}function bt(pt,Tt){let ut;return Tt&&(ut=(pt.type==="symbol"?me:pt.is3D(E)?Be:ve)[Tt.id]),ut}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<O.length;){const pt=Z[this.currentLayer];if(pt.type==="raster"||pt.type==="raster-particle"){const Tt=a.getLayerSourceCache(pt);this.renderLayer(this,Tt,pt,bt(pt,Tt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let mt=0;Ye&&(mt=Ye.getShadowCastingLayerCount());let $t=!1,jt=-1;for(let pt=0;pt<O.length;++pt){const Tt=Z[pt];Tt.isHidden(this.transform.zoom)||Tt.is3D(E)&&(jt=pt)}W&&jt===-1&&(N=!0);let an=!1;for(;this.currentLayer<O.length;){const pt=Z[this.currentLayer],Tt=a.getLayerSourceCache(pt);if(pt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(pt)){if(pt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!an&&pt.is3D(E)&&!E){const ut=this.currentLayer,Gt=Mt=>{for(this.currentLayer=0;this.currentLayer<Z.length;this.currentLayer++){const Jt=Z[this.currentLayer];if(Vc[Jt.type]){const qt=this.style.getLayerSourceCache(Jt);Vc[Jt.type](this,qt,Jt,bt(Jt,qt),Mt)}}};Gt("initialize"),Gt("reset"),this.currentLayer=ut,an=!0}if(N&&!$t&&this.terrain&&!this.transform.isOrthographic&&($t=!0,this.blitDepth()),W&&jt!==-1&&this.currentLayer===jt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(pt,Tt,Tt?pe[Tt.id]:void 0),this.renderLayer(this,Tt,pt,bt(pt,Tt)),!this.terrain&&Ye&&mt>0&&pt.hasShadowPass()&&--mt==0&&(Ye.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const ut=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=ut;this.currentLayer++){const Gt=Z[this.currentLayer];if(!Gt.hasLightBeamPass())continue;const Mt=a.getLayerSourceCache(Gt);this.renderLayer(this,Mt,Gt,Mt?ve[Mt.id]:void 0)}this.currentLayer=ut,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const ut=this.currentLayer;this.depthOcclusion=!0;for(const Gt of this.layersWithOcclusionOpacity){this.currentLayer=Gt;const Mt=Z[this.currentLayer],Jt=a.getLayerSourceCache(Mt),qt=Jt?ve[Jt.id]:void 0;this.terrain||this._renderTileClippingMasks(Mt,Jt,Jt?pe[Jt.id]:void 0),this.renderLayer(this,Jt,Mt,qt)}this.depthOcclusion=!1,this.currentLayer=ut,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let pt=null;Z.forEach(Tt=>{const ut=a.getLayerSourceCache(Tt);ut&&!Tt.isHidden(this.transform.zoom)&&ut.getVisibleCoordinates().length&&(!pt||pt.getSource().maxzoom<ut.getSource().maxzoom)&&(pt=ut)}),pt&&this.options.showTileBoundaries&&fi.debug(this,pt,pt.getVisibleCoordinates(),i.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&fi.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(pt){const Tt=pt.transform.padding;sg(pt,pt.transform.height-(Tt.top||0),3,ig),sg(pt,Tt.bottom||0,3,og),ag(pt,Tt.left||0,3,Ty),ag(pt,pt.transform.width-(Tt.right||0),3,Ja);const ut=pt.transform.centerPoint;(function(Gt,Mt,Jt,qt){Wd(Gt,Mt-1,Jt-10,2,20,qt),Wd(Gt,Mt-10,Jt-1,20,2,qt)})(pt,ut.x,pt.transform.height-ut.y,Xu)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),oe||(this.conflationActive=!1)}prepareLayer(a){this.gpuTimingStart(a);const{unsupportedLayers:h}=this.transform.projection,v=!h||!h.includes(a.type);if(_f[a.type]&&(v||this.terrain&&a.type==="custom")){const S=this.style.getLayerSourceCache(a);_f[a.type](a,S,this)}this.gpuTimingEnd()}renderLayer(a,h,v,S){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="sky"||v.type==="custom"||v.type==="model"||v.type==="raster"||v.type==="raster-particle"||S&&S.length)&&(this.id=v.id,this.gpuTimingStart(v),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(v.type)&&(!a.terrain||v.type!=="custom")||v.type==="clip"||fi[v.type](a,h,v,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery,v=this.context.gl;let S=this.gpuTimers[a.id];S||(S=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:v.createQuery()}),S.calls++,v.beginQuery(h.TIME_ELAPSED_EXT,S.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,h=this.context.gl,v=h.createQuery();this.deferredRenderGpuTimeQueries.push(v),h.beginQuery(a.TIME_ELAPSED_EXT,v)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const h={};for(const v in a){const S=a[v],E=this.context.extTimerQuery,D=E.getQueryParameter(S.query,this.context.gl.QUERY_RESULT)/1e6;E.deleteQueryEXT(S.query),h[v]=D}return h}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.gl;let v=0;for(const S of a)v+=h.getQueryParameter(S,h.QUERY_RESULT)/1e6,h.deleteQuery(S);return v}translatePosMatrix(a,h,v,S,E){if(!v[0]&&!v[1])return a;const D=E?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(D){const W=Math.sin(D),Z=Math.cos(D);v=[v[0]*Z-v[1]*W,v[0]*W+v[1]*Z]}const O=[E?v[0]:i.aw(h,v[0],this.transform.zoom),E?v[1]:i.aw(h,v[1],this.transform.zoom),0],N=new Float32Array(16);return i.bo(N,a,O),N}saveTileTexture(a){const h=a.size[0],v=this._tileTextures[h];v?v.push(a):this._tileTextures[h]=[a]}getTileTexture(a){const h=this._tileTextures[a];return h&&h.length>0?h.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(a,h,v){const S=v===void 0?this.terrain&&this.terrain.renderingToTexture:v,E=[];return this.style&&this.style.enable3dLights()&&(a==="globeRaster"||a==="terrainRaster"?(E.push("LIGHTING_3D_MODE"),E.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):S||E.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||E.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(E.push("TERRAIN"),this.linearFloatFilteringSupported()&&E.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&E.push("GLOBE"),!this._fogVisible||S||h!==void 0&&!h||E.push("FOG","FOG_DITHERING"),S&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}getOrCreateProgram(a,h){this.cache=this.cache||{};const v=h&&h.defines||[],S=h&&h.config,E=this.currentGlobalDefines(a,h&&h.overrideFog,h&&h.overrideRtt).concat(v),D=Wu.cacheKey(tc[a],a,E,S);return this.cache[D]||(this.cache[D]=new Wu(this.context,a,tc[a],S,wy[a],E)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(a,h){if(this.style.enable3dLights()){const v=this.style.directionalLight,S=this.style.ambientLight;if(v&&S){const E=((D,O,N)=>{const W=D.properties.get("direction"),Z=D.properties.get("color-use-theme")==="none",te=D.properties.get("color").toRenderColor(Z?null:N.getLut(D.scope)).toArray01(),J=D.properties.get("intensity"),oe=O.properties.get("color-use-theme")==="none",ge=O.properties.get("color").toRenderColor(oe?null:N.getLut(O.scope)).toArray01(),pe=O.properties.get("intensity"),ve=[W.x,W.y,W.z],me=i.dw(ge,pe),Re=i.dw(te,J);return{u_lighting_ambient_color:me,u_lighting_directional_dir:ve,u_lighting_directional_color:Re,u_ground_radiance:df(ve,Re,me)}})(v,S,this.style);h.setLightsUniformValues(a,E)}}}uploadCommonUniforms(a,h,v,S,E){if(this.uploadCommonLightUniforms(a,h),this.terrain&&this.terrain.renderingToTexture)return;const D=this.style.fog;if(D){const O=D.getOpacity(this.transform.pitch),N=((W,Z,te,J,oe,ge,pe,ve,me,Re,Be,Ue)=>{const Ke=W.transform,Ye=Z.properties.get("color-use-theme")==="none",Ge=Z.properties.get("color").toRenderColor(Ye?null:W.style.getLut(Z.scope)).toArray01();Ge[3]=J;const Ne=W.frameCounter/1e3%1,[Je,nt]=Z.properties.get("vertical-range");return{u_fog_matrix:te?Ke.calculateFogTileMatrix(te):Ue||W.identityMat,u_fog_range:Z.getFovAdjustedRange(Ke._fov),u_fog_color:Ge,u_fog_horizon_blend:Z.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Je,nt),nt],u_fog_temporal_offset:Ne,u_frustum_tl:oe,u_frustum_tr:ge,u_frustum_br:pe,u_frustum_bl:ve,u_globe_pos:me,u_globe_radius:Re,u_viewport:Be,u_globe_transition:i.ah(Ke.zoom),u_is_globe:+(Ke.projection.name==="globe")}})(this,D,v,O,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],S);h.setFogUniformValues(a,N)}E&&h.setCutoffUniformValues(a,E.uniformValues)}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,h=a.createTexture();return a.bindTexture(a.TEXTURE_2D,h),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,h=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const S of v)h[S.key]=a[S.key]||new Mc(S,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(a,h){return!(!a.is3D(!(!this.terrain||!this.terrain.enabled))||a.type!=="clip"&&(a.minzoom&&a.minzoom>this.transform.zoom||(this.style._clipLayerPresent||a.sourceLayer!=="building")&&(!h||h.type!=="batched-model")))}isTileAffectedByFog(a){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let h=this._cachedTileFogOpacities[a.key];return h||(this._cachedTileFogOpacities[a.key]=h=this.style.fog.getOpacityForTile(a)),h[0]>=dn||h[1]>=dn}setupDepthForOcclusion(a,h,v){const S=this.context,E=S.gl,D=!!v;var O;v||(v={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),S.activeTexture.set(E.TEXTURE3),a&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE),v.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],v.u_depth_range_unpack=[2/((O=this.depthRangeFor3D)[1]-O[0]),-1-2*O[0]/(O[1]-O[0])],v.u_occluder_half_size=.5*this.occlusionParams.occluderSize,v.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE),S.activeTexture.set(E.TEXTURE0),D||h.setTerrainUniformValues(S,v)}}function Zd(y,a){let h=!1,v=null;const S=()=>{v=null,h&&(y(),v=setTimeout(S,a),h=!1)};return()=>(h=!0,v||S(),v)}class bf{constructor(a){this._hashName=a&&encodeURIComponent(a),i.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Zd(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const h=wf(a);if(this._hashName){const v=this._hashName;let S=!1;const E=location.hash.slice(1).split("&").map(D=>{const O=D.split("=")[0];return O===v?(S=!0,`${O}=${h}`):D}).filter(D=>D);return S||E.push(`${v}=${h}`),`#${E.join("&")}`}return`#${h}`}_getCurrentHash(){const a=location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(h=v)}),(h&&h[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(v=>isNaN(Number(v)))){const v=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(h[3]||0):a.getBearing();return a.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:v,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function wf(y,a){const h=y.getCenter(),v=Math.round(100*y.getZoom())/100,S=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,S),D=Math.round(h.lng*E)/E,O=Math.round(h.lat*E)/E,N=y.getBearing(),W=y.getPitch();let Z=a?`/${D}/${O}/${v}`:`${v}/${O}/${D}`;return(N||W)&&(Z+="/"+Math.round(10*N)/10),W&&(Z+=`/${Math.round(W)}`),Z}const Sf={linearity:.3,easing:i.ew(0,0,.3,1)},Dy=i.l({deceleration:2500,maxSpeed:1400},Sf),f_=i.l({deceleration:20,maxSpeed:1400},Sf),el=i.l({deceleration:1e3,maxSpeed:360},Sf),Ll=i.l({deceleration:1e3,maxSpeed:90},Sf);class Tf{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,h=i.q.now();for(;a.length>0&&h-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)h.zoom+=E.zoomDelta||0,h.bearing+=E.bearingDelta||0,h.pitch+=E.pitchDelta||0,E.panDelta&&h.pan._add(E.panDelta),E.around&&(h.around=E.around),E.pinchAround&&(h.pinchAround=E.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(h.pan.mag()){const E=Ku(h.pan.mag(),v,i.l({},Dy,a||{}));S.offset=h.pan.mult(E.amount/h.pan.mag()),S.center=this._map.transform.center,$c(S,E)}if(h.zoom){const E=Ku(h.zoom,v,f_);S.zoom=this._map.transform.zoom+E.amount,$c(S,E)}if(h.bearing){const E=Ku(h.bearing,v,el);S.bearing=this._map.transform.bearing+i.aD(E.amount,-179,179),$c(S,E)}if(h.pitch){const E=Ku(h.pitch,v,Ll);S.pitch=this._map.transform.pitch+E.amount,$c(S,E)}if(S.zoom||S.bearing){const E=h.pinchAround===void 0?h.around:h.pinchAround;S.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function $c(y,a){(!y.duration||y.duration<a.duration)&&(y.duration=a.duration,y.easing=a.easing)}function Ku(y,a,h){const{maxSpeed:v,linearity:S,deceleration:E}=h,D=i.aD(y*S/(a/1e3),-v,v),O=Math.abs(D)/(E*S);return{easing:h.easing,duration:1e3*O,amount:D*(O/2)}}class La extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,v,S={}){const E=fe(h.getCanvasContainer(),v),D=h.unproject(E);super(a,i.l({point:E,lngLat:D,originalEvent:v},S)),this._defaultPrevented=!1,this.target=h}}class Uc extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,v){const S=a==="touchend"?v.changedTouches:v.touches,E=ue(h.getCanvasContainer(),S),D=E.map(N=>h.unproject(N)),O=E.reduce((N,W,Z,te)=>N.add(W.div(te.length)),new i.P(0,0));super(a,{points:E,point:O,lngLats:D,lngLat:h.unproject(O),originalEvent:v}),this._defaultPrevented=!1}}class Kd extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h){super("wheel",{originalEvent:h}),this._defaultPrevented=!1}}class Qu{constructor(a,h){this._map=a,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new Kd(this._map,a))}mousedown(a,h){return this._mousedownPos=h,this._firePreventable(new La(a.type,this._map,a))}mouseup(a){this._map.fire(new La(a.type,this._map,a))}preclick(a){const h=i.l({},a);h.type="preclick",this._map.fire(new La(h.type,this._map,h))}click(a,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(a),this._map.fire(new La(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new La(a.type,this._map,a))}mouseover(a){this._map.fire(new La(a.type,this._map,a))}mouseout(a){this._map.fire(new La(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Uc(a.type,this._map,a))}touchmove(a){this._map.fire(new Uc(a.type,this._map,a))}touchend(a){this._map.fire(new Uc(a.type,this._map,a))}touchcancel(a){this._map.fire(new Uc(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vl{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new La(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new La("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new La(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zl{constructor(a,h){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,h){this.isEnabled()&&a.shiftKey&&a.button===0&&(X(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(a,h){if(!this._active)return;const v=h,S=this._startPos,E=this._lastPos;if(!S||!E||E.equals(v)||!this._box&&v.dist(S)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=B("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const D=Math.min(S.x,v.x),O=Math.max(S.x,v.x),N=Math.min(S.y,v.y),W=Math.max(S.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${N}px)`,this._box.style.width=O-D+"px",this._box.style.height=W-N+"px")})}mouseupWindow(a,h){if(!this._active)return;const v=this._startPos,S=h;if(v&&a.button===0){if(this.reset(),ce(),v.x!==S.x||v.y!==S.y)return this._map.fire(new i.A("boxzoomend",{originalEvent:a})),{cameraAnimation:E=>E.fitScreenCoordinates(v,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Q(),delete this._startPos,delete this._lastPos}_fireEvent(a,h){return this._map.fire(new i.A(a,{originalEvent:h}))}}function oc(y,a){const h={};for(let v=0;v<y.length;v++)h[y[v].identifier]=a[v];return h}class Py{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,h,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=function(S){const E=new i.P(0,0);for(const D of S)E._add(D);return E.div(S.length)}(h),this.touches=oc(v,h)))}touchmove(a,h,v){if(this.aborted||!this.centroid)return;const S=oc(v,h);for(const E in this.touches){const D=S[E];(!D||D.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(a,h,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Fo{constructor(a){this.singleTap=new Py(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,h,v){this.singleTap.touchstart(a,h,v)}touchmove(a,h,v){this.singleTap.touchmove(a,h,v)}touchend(a,h,v){const S=this.singleTap.touchend(a,h,v);if(S){const E=a.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(S)<30;if(E&&D||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class qc{constructor(){this._zoomIn=new Fo({numTouches:1,numTaps:2}),this._zoomOut=new Fo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,h,v){this._zoomIn.touchstart(a,h,v),this._zoomOut.touchstart(a,h,v)}touchmove(a,h,v){this._zoomIn.touchmove(a,h,v),this._zoomOut.touchmove(a,h,v)}touchend(a,h,v){const S=this._zoomIn.touchend(a,h,v),E=this._zoomOut.touchend(a,h,v);return S?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(S)},{originalEvent:a})}):E?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(E)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const As={0:1,2:2},Hc={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class Ef{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,h){return!1}_move(a,h){return{}}mousedown(a,h){if(this._lastPoint)return;const v=ae(a);this._correctButton(a,v)&&(this._lastPoint=h,this._eventButton=v)}mousemoveWindow(a,h){const v=this._lastPoint;if(v){if(a.preventDefault(),this._eventButton!=null&&function(S,E){const D=As[E];return S.buttons===void 0||(S.buttons&D)!==D}(a,this._eventButton))this.reset();else if(this._moved||!(h.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(v,h)}}mouseupWindow(a){this._lastPoint&&ae(a)===this._eventButton&&(this._moved&&ce(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hg extends Ef{mousedown(a,h){super.mousedown(a,h),this._lastPoint&&(this._active=!0)}_correctButton(a,h){return h===0&&!a.ctrlKey}_move(a,h){return{around:h,panDelta:h.sub(a)}}}class fg extends Ef{constructor(a){super(a),this._pitchRotateKey=a.pitchRotateKey?Hc[a.pitchRotateKey]:void 0}_correctButton(a,h){return this._pitchRotateKey?h===0&&a[this._pitchRotateKey]:h===0&&a.ctrlKey||h===2}_move(a,h){const v=.8*(h.x-a.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(a){this._pitchRotateKey||a.preventDefault()}}class Qd extends Ef{constructor(a){super(a),this._pitchRotateKey=a.pitchRotateKey?Hc[a.pitchRotateKey]:void 0}_correctButton(a,h){return this._pitchRotateKey?h===0&&a[this._pitchRotateKey]:h===0&&a.ctrlKey||h===2}_move(a,h){const v=-.5*(h.y-a.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(a){this._pitchRotateKey||a.preventDefault()}}class Ju{constructor(a,h){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),i.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(a,h,v){return this._calculateTransform(a,h,v)}touchmove(a,h,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(v.length===1&&!i.ex())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,h,v)}}touchend(a,h,v){this._calculateTransform(a,h,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,h,v){v.length>0&&(this._active=!0);const S=oc(v,h),E=new i.P(0,0),D=new i.P(0,0);let O=0;for(const W in S){const Z=S[W],te=this._touches[W];te&&(E._add(Z),D._add(Z.sub(te)),O++,S[W]=Z)}if(this._touches=S,O<this._minTouches||!D.mag())return;const N=D.div(O);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(O),panDelta:N}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=B("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Jd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,h,v){return{}}touchstart(a,h,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([h[0],h[1]]))}touchmove(a,h,v){const S=this._firstTwoTouches;if(!S)return;a.preventDefault();const[E,D]=S,O=Cf(v,h,E),N=Cf(v,h,D);if(!O||!N)return;const W=this._aroundCenter?null:O.add(N).div(2);return this._move([O,N],W,a)}touchend(a,h,v){if(!this._firstTwoTouches)return;const[S,E]=this._firstTwoTouches,D=Cf(v,h,S),O=Cf(v,h,E);D&&O||(this._active&&ce(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Cf(y,a,h){for(let v=0;v<y.length;v++)if(y[v].identifier===h)return a[v]}function Lp(y,a){return Math.log(y/a)/Math.LN2}class Iy extends Jd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,h){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Lp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Lp(this._distance,v),pinchAround:h}}}function Mf(y,a){return 180*y.angleWith(a)/Math.PI}class p_ extends Jd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,h){const v=this._vector;if(this._vector=a[0].sub(a[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Mf(this._vector,v),pinchAround:h}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const h=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const S=Mf(a,v);return Math.abs(S)<h}}function zp(y){return Math.abs(y.y)>Math.abs(y.x)}class m_ extends Jd{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,zp(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,h,v){const S=this._lastPoints;if(!S)return;const E=a[0].sub(S[0]),D=a[1].sub(S[1]);return this._map._cooperativeGestures&&!i.ex()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(E,D,v.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(E.y+D.y)/2*-.5})}gestureBeginsVertically(a,h,v){if(this._valid!==void 0)return this._valid;const S=a.mag()>=2,E=h.mag()>=2;if(!S&&!E)return;if(!S||!E)return this._firstMove==null&&(this._firstMove=v),v-this._firstMove<100&&void 0;const D=a.y>0==h.y>0;return zp(a)&&zp(h)&&D}}const g_={panStep:100,bearingStep:15,pitchStep:10};class _x{constructor(){const a=g_;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let h=0,v=0,S=0,E=0,D=0;switch(a.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),E=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),E=1);break;case 38:a.shiftKey?S=1:(a.preventDefault(),D=-1);break;case 40:a.shiftKey?S=-1:(a.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(v=0,S=0),{cameraAnimation:O=>{const N=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:y_,zoom:h?Math.round(N)+h*(a.shiftKey?2:1):N,bearing:O.getBearing()+v*this._bearingStep,pitch:O.getPitch()+S*this._pitchStep,offset:[-E*this._panStep,-D*this._panStep],center:O.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function y_(y){return y*(2-y)}const Fs=4.000244140625,ia=1/450;class v_{constructor(a,h){this._map=a,this._el=a.getCanvasContainer(),this._handler=h,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=ia,i.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||i.ex()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=i.q.now(),S=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,h!==0&&h%Fs==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=h,this._timeout=window.setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(S*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),a.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=a,this._delta-=h,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=fe(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const W=this._type==="wheel"&&Math.abs(this._delta)>Fs?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*W)));this._delta<0&&Z!==0&&(Z=1/Z);const te=h(),J=Math.pow(2,te),oe=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):J;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(oe*Z))),this._type==="wheel"&&(this._startZoom=te,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:h(),S=this._startZoom,E=this._easing;let D,O=!1;if(this._type==="wheel"&&S&&E){const W=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),Z=E(W);D=i.ai(S,v,Z),W<1?this._frameId||(this._frameId=!0):O=!0}else D=v,O=!0;this._active=!0,O&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let N=D-h();return N*this._lastDelta<0&&(N=0),{noInertia:!0,needsRenderFrame:!O,zoomDelta:N,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let h=i.ey;if(this._prevEase){const v=this._prevEase,S=(i.q.now()-v.start)/v.duration,E=v.easing(S+.01)-v.easing(S),D=.27/Math.sqrt(E*E+1e-4)*.01,O=Math.sqrt(.0729-D*D);h=i.ew(D,O,.25,1)}return this._prevEase={start:i.q.now(),duration:a,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=B("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class __{constructor(a,h){this._clickZoom=a,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class x_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,h){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(a.shiftKey?-1:1),around:v.unproject(h)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class b_{constructor(){this._tap=new Fo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,h,v){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=h[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(a,h,v))}touchmove(a,h,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const S=h[0],E=S.y-this._swipePoint.y;return this._swipePoint=S,a.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(a,h,v)}touchend(a,h,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(a,h,v)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class w_{constructor(a,h,v){this._el=a,this._mousePan=h,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ky{constructor(a,h,v){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=h,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class S_{constructor(a,h,v,S){this._el=a,this._touchZoom=h,this._touchRotate=v,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _o=y=>y.zoom||y.drag||y.pitch||y.rotate;class T_ extends i.A{}class xx{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,h){const v=i.at([],h,a);this.radius=i.ae(v[2]<0?i.eA([],v,this.constants):[v[0],v[1],0])}projectRay(a){i.eA(a,a,this.constants),i.au(a,a),i.eB(a,a,this.constants);const h=i.b$([],a,this.radius);if(h[2]>0){const v=i.b$([],[0,0,1],i.bE(h,[0,0,1])),S=i.b$([],i.au([],[h[0],h[1],0]),this.radius),E=i.cU([],h,i.b$([],i.at([],i.cU([],S,v),h),2));h[0]=E[0],h[1]=E[1]}return h}}function eh(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class E_{constructor(a,h){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Tf(a),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new xx,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),i.aV(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,E,D]of this._listeners){const O=S===document?this.handleWindowEvent:this.handleEvent;S.addEventListener(E,O,D)}}destroy(){for(const[a,h,v]of this._listeners){const S=a===document?this.handleWindowEvent:this.handleEvent;a.removeEventListener(h,S,v)}}_addDefaultHandlers(a){const h=this._map,v=h.getCanvasContainer();this._add("mapEvent",new Qu(h,a));const S=h.boxZoom=new zl(h,a);this._add("boxZoom",S);const E=new qc,D=new x_;h.doubleClickZoom=new __(D,E),this._add("tapZoom",E),this._add("clickZoom",D);const O=new b_;this._add("tapDragZoom",O);const N=h.touchPitch=new m_(h);this._add("touchPitch",N);const W=new fg(a),Z=new Qd(a);h.dragRotate=new ky(a,W,Z),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);const te=new hg(a),J=new Ju(h,a);h.dragPan=new w_(v,te,J),this._add("mousePan",te),this._add("touchPan",J,["touchZoom","touchRotate"]);const oe=new p_,ge=new Iy;h.touchZoomRotate=new S_(v,ge,oe,O),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),this._add("blockableMapEvent",new vl(h));const pe=h.scrollZoom=new v_(h,this);this._add("scrollZoom",pe,["mousePan"]);const ve=h.keyboard=new _x;this._add("keyboard",ve);for(const me of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[me]&&h[me].enable(a[me])}_add(a,h,v){this._handlers.push({handlerName:a,handler:h,allowed:v}),this._handlersById[a]=h}stop(a){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_o(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,h,v){for(const S in a)if(S!==v&&(!h||h.indexOf(S)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const h=[];for(const v of a)this._el.contains(v.target)&&h.push(v);return h}handleEvent(a,h){this._updatingCamera=!0;const v=a.type==="renderFrame",S=v?void 0:a,E={needsRenderFrame:!1},D={},O={},N=a.touches?this._getMapTouches(a.touches):void 0,W=N?ue(this._el,N):v?void 0:fe(this._el,a);for(const{handlerName:J,handler:oe,allowed:ge}of this._handlers){if(!oe.isEnabled())continue;let pe;this._blockedByActive(O,ge,J)?oe.reset():oe[h||a.type]&&(pe=oe[h||a.type](a,W,N),this.mergeHandlerResult(E,D,pe,J,S),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()),(pe||oe.isActive())&&(O[J]=oe)}const Z={};for(const J in this._previousActiveHandlers)O[J]||(Z[J]=S);this._previousActiveHandlers=O,(Object.keys(Z).length||eh(E))&&(this._changes.push([E,D,Z]),this._triggerRenderFrame()),(Object.keys(O).length||eh(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=E;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(a,h,v,S,E){if(!v)return;i.l(a,v);const D={handlerName:S,originalEvent:v.originalEvent||E};v.zoomDelta!==void 0&&(h.zoom=D),v.panDelta!==void 0&&(h.drag=D),v.pitchDelta!==void 0&&(h.pitch=D),v.bearingDelta!==void 0&&(h.rotate=D)}_applyChanges(){const a={},h={},v={};for(const[S,E,D]of this._changes)S.panDelta&&(a.panDelta=(a.panDelta||new i.P(0,0))._add(S.panDelta)),S.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(a.around=S.around),S.aroundCoord!==void 0&&(a.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(a.pinchAround=S.pinchAround),S.noInertia&&(a.noInertia=S.noInertia),i.l(h,E),i.l(v,D);this._updateMapTransform(a,h,v),this._changes=[]}_updateMapTransform(a,h,v){const S=this._map,E=S.transform,D=Re=>[Re.x,Re.y,Re.z];if((Re=>{const Be=this._eventsInProgress.drag;return Be&&!this._handlersById[Be.handlerName].isActive()})()&&!eh(a)){const Re=E.zoom;E.cameraElevationReference="sea",this._originalZoom!=null&&E._orthographicProjectionAtLowPitch&&E.projection.name!=="globe"&&E.pitch===0?(E.cameraElevationReference="ground",E.zoom=this._originalZoom):(E.recenterOnTerrain(),E.cameraElevationReference="ground"),Re!==E.zoom&&this._map._update(!0)}if(E._isCameraConstrained&&S._stop(!0),!eh(a))return void this._fireEvents(h,v,!0);let{panDelta:O,zoomDelta:N,bearingDelta:W,pitchDelta:Z,around:te,aroundCoord:J,pinchAround:oe}=a;E._isCameraConstrained&&(N>0&&(N=0),E._isCameraConstrained=!1),oe!==void 0&&(te=oe),(N||(Re=>h[Re]&&!this._eventsInProgress[Re])("drag"))&&te&&(this._dragOrigin=D(E.pointCoordinate3D(te)),this._originalZoom=E.zoom,this._trackingEllipsoid.setup(E._camera.position,this._dragOrigin)),E.cameraElevationReference="sea",S._stop(!0),te=te||S.transform.centerPoint,W&&(E.bearing+=W),Z&&(E.pitch+=Z),E._updateCameraState();const ge=[0,0,0];if(O)if(E.projection.name==="mercator"){const Re=this._trackingEllipsoid.projectRay(E.screenPointToMercatorRay(te).dir),Be=this._trackingEllipsoid.projectRay(E.screenPointToMercatorRay(te.sub(O)).dir);ge[0]=Be[0]-Re[0],ge[1]=Be[1]-Re[1]}else{const Re=E.pointCoordinate(te);if(E.projection.name==="globe"){O=O.rotate(-E.angle);const Be=E._pixelsPerMercatorPixel/E.worldSize;ge[0]=-O.x*i.ez(i.aY(Re.y))*Be,ge[1]=-O.y*i.ez(E.center.lat)*Be}else{const Be=E.pointCoordinate(te.sub(O));Re&&Be&&(ge[0]=Be.x-Re.x,ge[1]=Be.y-Re.y)}}const pe=E.zoom,ve=[0,0,0];if(N){const Re=D(J||E.pointCoordinate3D(te)),Be={dir:i.au([],i.at([],Re,E._camera.position))};if(Be.dir[2]<0){const Ue=E.zoomDeltaToMovement(Re,N);i.b$(ve,Be.dir,Ue)}}const me=i.cU(ge,ge,ve);E._translateCameraConstrained(me),N&&Math.abs(E.zoom-pe)>1e-4&&E.recenterOnTerrain(),E.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(h,v,!0)}_fireEvents(a,h,v){const S=_o(this._eventsInProgress),E=_o(a),D={};for(const Z in a){const{originalEvent:te}=a[Z];this._eventsInProgress[Z]||(D[`${Z}start`]=te),this._eventsInProgress[Z]=a[Z]}!S&&E&&this._fireEvent("movestart",E.originalEvent);for(const Z in D)this._fireEvent(Z,D[Z]);E&&this._fireEvent("move",E.originalEvent);for(const Z in a){const{originalEvent:te}=a[Z];this._fireEvent(Z,te)}const O={};let N;for(const Z in this._eventsInProgress){const{handlerName:te,originalEvent:J}=this._eventsInProgress[Z];this._handlersById[te].isActive()||(delete this._eventsInProgress[Z],N=h[te]||J,O[`${Z}end`]=N)}for(const Z in O)this._fireEvent(Z,O[Z]);const W=_o(this._eventsInProgress);if(v&&(S||E)&&!W){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;Z?(te(Z.bearing||this._map.getBearing())&&(Z.bearing=0),this._map.easeTo(Z,{originalEvent:N})):(this._map.fire(new i.A("moveend",{originalEvent:N})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,h){this._map.fire(new i.A(a,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new T_("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const th="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class C_ extends i.E{constructor(a,h){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,i.aV(["_renderFrameCallback"],this)}getCenter(){return new i.cd(this.transform.center.lng,this.transform.center.lat)}setCenter(a,h){return this.jumpTo({center:a},h)}panBy(a,h,v){return a=i.P.convert(a).mult(-1),this.panTo(this.transform.center,i.l({offset:a},h),v)}panTo(a,h,v){return this.easeTo(i.l({center:a},h),v)}getZoom(){return this.transform.zoom}setZoom(a,h){return this.jumpTo({zoom:a},h),this}zoomTo(a,h,v){return this.easeTo(i.l({zoom:a},h),v)}zoomIn(a,h){return this.zoomTo(this.getZoom()+1,a,h),this}zoomOut(a,h){return this.zoomTo(this.getZoom()-1,a,h),this}getBearing(){return this.transform.bearing}setBearing(a,h){return this.jumpTo({bearing:a},h),this}getPadding(){return this.transform.padding}setPadding(a,h){return this.jumpTo({padding:a},h),this}rotateTo(a,h,v){return this.easeTo(i.l({bearing:a},h),v)}resetNorth(a,h){return this.rotateTo(0,i.l({duration:1e3},a),h),this}resetNorthPitch(a,h){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},a),h),this}snapToNorth(a,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,h):this}getPitch(){return this.transform.pitch}setPitch(a,h){return this.jumpTo({pitch:a},h),this}cameraForBounds(a,h){a=i.aG.convert(a);const v=h&&h.bearing||0,S=h&&h.pitch||0,E=a.getNorthWest(),D=a.getSouthEast();return this._cameraForBounds(this.transform,E,D,v,S,h)}_extendPadding(a){const h={top:0,right:0,bottom:0,left:0};return a==null?i.l({},h,this.transform.padding):typeof a=="number"?{top:a,bottom:a,right:a,left:a}:i.l({},h,a)}_extendCameraOptions(a){return(a=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=this._extendPadding(a.padding),a}_minimumAABBFrustumDistance(a,h){const v=h.max[0]-h.min[0],S=h.max[1]-h.min[1];return v/S>a.aspect?v/(2*Math.tan(.5*a.fovX)*a.aspect):S/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,h,v,S,E,D){const O=a.clone(),N=this._extendCameraOptions(D);O.bearing=S,O.pitch=E;const W=i.cd.convert(h),Z=i.cd.convert(v),te=.5*(W.lat+Z.lat),J=.5*(W.lng+Z.lng),oe=i.eC(te,J),ge=i.au([],oe),pe=i.au([],i.bG([],ge,[0,1,0])),ve=i.bG([],pe,ge),me=[pe[0],pe[1],pe[2],0,ve[0],ve[1],ve[2],0,ge[0],ge[1],ge[2],0,0,0,0,1],Re=[oe,i.eC(W.lat,W.lng),i.eC(Z.lat,W.lng),i.eC(Z.lat,Z.lng),i.eC(W.lat,Z.lng),i.eC(te,W.lng),i.eC(te,Z.lng),i.eC(W.lat,J),i.eC(Z.lat,J)];let Be=i.cV.fromPoints(Re.map(Mt=>[i.bE(pe,Mt),i.bE(ve,Mt),i.bE(ge,Mt)]));const Ue=i.ad([],Be.center,me);i.eD(Ue)===0&&i.eE(Ue,0,0,1),i.au(Ue,Ue),i.b$(Ue,Ue,i.aE),O.center=i.eF(Ue);const Ke=O.getWorldToCameraMatrix(),Ye=i.bi(new Float64Array(16),Ke);Be=i.cV.applyTransform(Be,i.az([],Ke,me));const Ge=this._extendAABB(Be,O,N,S);if(!Ge)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Be=Ge,i.ad(Ue,Ue,Ke);const Ne=.5*(Be.max[2]-Be.min[2]),Je=this._minimumAABBFrustumDistance(O,Be),nt=i.b$([],[0,0,1],Ne),bt=i.cU(nt,Ue,nt),mt=Je+(O.pitch===0?0:i.bD(Ue,bt)),$t=O.globeCenterInViewSpace,jt=i.at([],Ue,[$t[0],$t[1],$t[2]]);i.au(jt,jt),i.b$(jt,jt,mt);const an=i.cU([],Ue,jt);i.ad(an,an,Ye);const pt=i.eq/i.aE,Tt=i.ae(an),ut=i.c6(Math.max(Tt*pt-i.eq,Number.EPSILON),0),Gt=Math.min(O.zoomFromMercatorZAdjusted(ut),N.maxZoom);return Gt>.5*(i.cL+i.cx)?(O.setProjection({name:"mercator"}),O.zoom=Gt,this._cameraForBounds(O,h,v,S,E,D)):{center:O.center,zoom:Gt,bearing:S,pitch:E}}_extendAABB(a,h,v,S){const E=.5*((v.padding.left||0)+(v.padding.right||0)),D=.5*((v.padding.top||0)+(v.padding.bottom||0)),O=D,N=E,W=E,Z=D,te=h.width-(N+W),J=h.height-(O+Z),oe=i.at([],a.max,a.min),ge=Math.min(te/oe[0],J/oe[1]),pe=Math.min(h.scaleZoom(h.scale*ge),v.maxZoom);if(isNaN(pe))return null;const ve=h.scale/h.zoomScale(pe),me=new i.cV([a.min[0]-N*ve,a.min[1]-Z*ve,a.min[2]],[a.max[0]+W*ve,a.max[1]+O*ve,a.max[2]]),Re=(typeof v.offset.x=="number"&&typeof v.offset.y=="number"?new i.P(v.offset.x,v.offset.y):i.P.convert(v.offset)).rotate(-i.al(S));return me.center[0]-=Re.x*ve,me.center[1]+=Re.y*ve,me}queryTerrainElevation(a,h){const v=this.transform.elevation;return v?(h=i.l({},{exaggerated:!0},h),v.getAtPoint(i.ac.fromLngLat(a),null,h.exaggerated)):null}_cameraForBounds(a,h,v,S,E,D){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,h,v,S,E,D);const O=a.clone(),N=this._extendCameraOptions(D);O.bearing=S,O.pitch=E;const W=i.cd.convert(h),Z=i.cd.convert(v),te=new i.cd(W.lng,Z.lat),J=new i.cd(Z.lng,W.lat),oe=O.project(W),ge=O.project(Z),pe=this.queryTerrainElevation(W),ve=this.queryTerrainElevation(Z),me=this.queryTerrainElevation(te),Re=this.queryTerrainElevation(J),Be=[[oe.x,oe.y,Math.min(pe||0,ve||0,me||0,Re||0)],[ge.x,ge.y,Math.max(pe||0,ve||0,me||0,Re||0)]];let Ue=i.cV.fromPoints(Be);const Ke=O.getWorldToCameraMatrix(),Ye=i.bi(new Float64Array(16),Ke);Ue=i.cV.applyTransform(Ue,Ke);const Ge=this._extendAABB(Ue,O,N,S);if(!Ge)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ue=Ge;const Ne=.5*i.at([],Ue.max,Ue.min)[2],Je=this._minimumAABBFrustumDistance(O,Ue),nt=[0,0,1,0];i.aA(nt,nt,Ke),i.eG(nt,nt);const bt=i.b$([],nt,Je+Ne),mt=i.cU([],Ue.center,bt);i.ad(Ue.center,Ue.center,Ye),i.ad(mt,mt,Ye);const $t=O.unproject(new i.P(Ue.center[0],Ue.center[1])),jt=i.eH(O.projection,$t),an=Math.pow(2,jt),pt=Math.min(O._zoomFromMercatorZ(mt[2]*O.pixelsPerMeter*an/O.worldSize),N.maxZoom);return O.mercatorFromTransition&&pt<.5*(i.cL+i.cx)?(O.setProjection({name:"globe"}),O.zoom=pt,this._cameraForBounds(O,h,v,S,E,D)):{center:$t,zoom:pt,bearing:S,pitch:E}}fitBounds(a,h,v){const S=this.cameraForBounds(a,h);return this._fitInternal(S,h,v)}fitScreenCoordinates(a,h,v,S,E){const D=i.P.convert(a),O=i.P.convert(h),N=new i.P(Math.min(D.x,O.x),Math.min(D.y,O.y)),W=new i.P(Math.max(D.x,O.x),Math.max(D.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(D,O))return this;const Z=this.transform.pointLocation3D(N),te=this.transform.pointLocation3D(W),J=this.transform.pointLocation3D(new i.P(N.x,W.y)),oe=this.transform.pointLocation3D(new i.P(W.x,N.y)),ge=[Math.min(Z.lng,te.lng,J.lng,oe.lng),Math.min(Z.lat,te.lat,J.lat,oe.lat)],pe=[Math.max(Z.lng,te.lng,J.lng,oe.lng),Math.max(Z.lat,te.lat,J.lat,oe.lat)],ve=S&&S.pitch?S.pitch:this.getPitch(),me=this._cameraForBounds(this.transform,ge,pe,v,ve,S);return this._fitInternal(me,S,E)}_fitInternal(a,h,v){return a?(h=i.l(a,h)).linear?this.easeTo(h,v):this.flyTo(h,v):this}jumpTo(a,h){this.stop();const v=a.preloadOnly?this.transform.clone():this.transform;let S=!1,E=!1,D=!1;"zoom"in a&&v.zoom!==+a.zoom&&(S=!0,v.zoom=+a.zoom),a.center!==void 0&&(v.center=i.cd.convert(a.center)),"bearing"in a&&v.bearing!==+a.bearing&&(E=!0,v.bearing=+a.bearing),"pitch"in a&&v.pitch!==+a.pitch&&(D=!0,v.pitch=+a.pitch);const O=typeof a.padding=="number"?this._extendPadding(a.padding):a.padding;if(a.padding!=null&&!v.isPaddingEqual(O))if(a.retainPadding===!1){const N=v.clone();N.padding=O,v.setLocationAtPoint(v.center,N.centerPoint)}else v.padding=O;return a.preloadOnly?(this._preloadTiles(v),this):(this.fire(new i.A("movestart",h)).fire(new i.A("move",h)),S&&this.fire(new i.A("zoomstart",h)).fire(new i.A("zoom",h)).fire(new i.A("zoomend",h)),E&&this.fire(new i.A("rotatestart",h)).fire(new i.A("rotate",h)).fire(new i.A("rotateend",h)),D&&this.fire(new i.A("pitchstart",h)).fire(new i.A("pitch",h)).fire(new i.A("pitchend",h)),this.fire(new i.A("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(th),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,h){const v=this.transform;if(!v.projection.supportsFreeCamera)return i.w(th),this;this.stop();const S=v.zoom,E=v.pitch,D=v.bearing;v.setFreeCameraOptions(a);const O=S!==v.zoom,N=E!==v.pitch,W=D!==v.bearing;return this.fire(new i.A("movestart",h)).fire(new i.A("move",h)),O&&this.fire(new i.A("zoomstart",h)).fire(new i.A("zoom",h)).fire(new i.A("zoomend",h)),W&&this.fire(new i.A("rotatestart",h)).fire(new i.A("rotate",h)).fire(new i.A("rotateend",h)),N&&this.fire(new i.A("pitchstart",h)).fire(new i.A("pitch",h)).fire(new i.A("pitchend",h)),this.fire(new i.A("moveend",h)),this}easeTo(a,h){this._stop(!1,a.easeId),((a=i.l({offset:[0,0],duration:500,easing:i.ey},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const v=this.transform,S=this.getZoom(),E=this.getBearing(),D=this.getPitch(),O=this.getPadding(),N="zoom"in a?+a.zoom:S,W="bearing"in a?this._normalizeBearing(a.bearing,E):E,Z="pitch"in a?+a.pitch:D,te=this._extendPadding(a.padding),J=i.P.convert(a.offset);let oe,ge,pe;if(v.projection.name==="globe"){const nt=i.ac.fromLngLat(v.center),bt=J.rotate(-v.angle);nt.x+=bt.x/v.worldSize,nt.y+=bt.y/v.worldSize;const mt=nt.toLngLat(),$t=i.cd.convert(a.center||mt);this._normalizeCenter($t),oe=v.centerPoint.add(bt),ge=new i.P(nt.x,nt.y).mult(v.worldSize),pe=new i.P(i.ay($t.lng),i.aH($t.lat)).mult(v.worldSize).sub(ge)}else{oe=v.centerPoint.add(J);const nt=v.pointLocation(oe),bt=i.cd.convert(a.center||nt);this._normalizeCenter(bt),ge=v.project(nt),pe=v.project(bt).sub(ge)}const ve=v.zoomScale(N-S);let me,Re;a.around&&(me=i.cd.convert(a.around),Re=v.locationPoint(me));const Be=this._zooming||N!==S,Ue=this._rotating||E!==W,Ke=this._pitching||Z!==D,Ye=!v.isPaddingEqual(te),Ge=a.retainPadding===!1?v.clone():v,Ne=nt=>bt=>{if(Be&&(nt.zoom=i.ai(S,N,bt)),Ue&&(nt.bearing=i.ai(E,W,bt)),Ke&&(nt.pitch=i.ai(D,Z,bt)),Ye&&(Ge.interpolatePadding(O,te,bt),oe=Ge.centerPoint.add(J)),me)nt.setLocationAtPoint(me,Re);else{const mt=nt.zoomScale(nt.zoom-S),$t=N>S?Math.min(2,ve):Math.max(.5,ve),jt=Math.pow($t,1-bt),an=nt.unproject(ge.add(pe.mult(bt*jt)).mult(mt));nt.setLocationAtPoint(nt.renderWorldCopies?an.wrap():an,oe)}return a.preloadOnly||this._fireMoveEvents(h),nt};if(a.preloadOnly){const nt=this._emulate(Ne,a.duration,v);return this._preloadTiles(nt),this}const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Be,this._rotating=Ue,this._pitching=Ke,this._padding=Ye,this._easeId=a.easeId,this._prepareEase(h,a.noMoveStart,Je),this._ease(Ne(v),nt=>{v.cameraElevationReference==="sea"&&v.recenterOnTerrain(),this._afterEase(h,nt)},a),this}_prepareEase(a,h,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),h||v.moving||this.fire(new i.A("movestart",a)),this._zooming&&!v.zooming&&this.fire(new i.A("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new i.A("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new i.A("pitchstart",a))}_fireMoveEvents(a){this.fire(new i.A("move",a)),this._zooming&&this.fire(new i.A("zoom",a)),this._rotating&&this.fire(new i.A("rotate",a)),this._pitching&&this.fire(new i.A("pitch",a))}_afterEase(a,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,S=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new i.A("zoomend",a)),S&&this.fire(new i.A("rotateend",a)),E&&this.fire(new i.A("pitchend",a)),this.fire(new i.A("moveend",a))}flyTo(a,h){if(this._prefersReducedMotion(a)){const Mt=i.aF(a,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Mt,h)}this.stop(),a=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.ey},a);const v=this.transform,S=this.getZoom(),E=this.getBearing(),D=this.getPitch(),O=this.getPadding(),N="zoom"in a?i.aD(+a.zoom,v.minZoom,v.maxZoom):S,W="bearing"in a?this._normalizeBearing(a.bearing,E):E,Z="pitch"in a?+a.pitch:D,te=this._extendPadding(a.padding),J=v.zoomScale(N-S),oe=i.P.convert(a.offset);let ge=v.centerPoint.add(oe);const pe=v.pointLocation(ge),ve=i.cd.convert(a.center||pe);this._normalizeCenter(ve);const me=v.project(pe),Re=v.project(ve).sub(me);let Be=a.curve;const Ue=Math.max(v.width,v.height),Ke=Ue/J,Ye=Re.mag();if("minZoom"in a){const Mt=i.aD(Math.min(a.minZoom,S,N),v.minZoom,v.maxZoom),Jt=Ue/v.zoomScale(Mt-S);Be=Math.sqrt(Jt/Ye*2)}const Ge=Be*Be;function Ne(Mt){const Jt=(Ke*Ke-Ue*Ue+(Mt?-1:1)*Ge*Ge*Ye*Ye)/(2*(Mt?Ke:Ue)*Ge*Ye);return Math.log(Math.sqrt(Jt*Jt+1)-Jt)}function Je(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function nt(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}const bt=Ne(0);let mt=function(Mt){return nt(bt)/nt(bt+Be*Mt)},$t=function(Mt){return Ue*((nt(bt)*(Je(Jt=bt+Be*Mt)/nt(Jt))-Je(bt))/Ge)/Ye;var Jt},jt=(Ne(1)-bt)/Be;if(Math.abs(Ye)<1e-6||!isFinite(jt)){if(Math.abs(Ue-Ke)<1e-6)return this.easeTo(a,h);const Mt=Ke<Ue?-1:1;jt=Math.abs(Math.log(Ke/Ue))/Be,$t=function(){return 0},mt=function(Jt){return Math.exp(Mt*Be*Jt)}}a.duration="duration"in a?+a.duration:1e3*jt/("screenSpeed"in a?+a.screenSpeed/Be:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const an=E!==W,pt=Z!==D,Tt=!v.isPaddingEqual(te),ut=a.retainPadding===!1?v.clone():v,Gt=Mt=>Jt=>{const qt=Jt*jt,en=1/mt(qt);Mt.zoom=Jt===1?N:S+Mt.scaleZoom(en),an&&(Mt.bearing=i.ai(E,W,Jt)),pt&&(Mt.pitch=i.ai(D,Z,Jt)),Tt&&(ut.interpolatePadding(O,te,Jt),ge=ut.centerPoint.add(oe));const on=Jt===1?ve:Mt.unproject(me.add(Re.mult($t(qt))).mult(en));return Mt.setLocationAtPoint(Mt.renderWorldCopies?on.wrap():on,ge),Mt._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(h),Mt};if(a.preloadOnly){const Mt=this._emulate(Gt,a.duration,v);return this._preloadTiles(Mt),this}return this._zooming=!0,this._rotating=an,this._pitching=pt,this._padding=Tt,this._prepareEase(h,!1),this._ease(Gt(v),()=>this._afterEase(h),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(a){}_cancelRenderFrame(a){}_stop(a,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,h)}if(!a){const v=this.handlers;v&&v.stop(!1)}return this}_ease(a,h,v){v.animate===!1||v.duration===0?(a(1),h()):(this._easeStart=i.q.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,h){a=i.bX(a,-180,180);const v=Math.abs(a-h);return Math.abs(a-360-h)<v&&(a-=360),Math.abs(a+360-h)<v&&(a+=360),a}_normalizeCenter(a){const h=this.transform;if(h.maxBounds||h.projection.name!=="globe"&&!h.renderWorldCopies)return;const v=a.lng-h.center.lng;a.lng+=v>180?-360:v<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,h,v){const S=Math.ceil(15*h/1e3),E=[],D=a(v.clone());for(let O=0;O<=S;O++){const N=D(O/S);E.push(N.clone())}return E}_preloadTiles(a,h){}}class Fp{constructor(a={}){this.options=a,i.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const h=this.options&&this.options.compact,v=a._getUIString("AttributionControl.ToggleAttribution");this._map=a,this._container=B("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=B("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",v);const S=B("span","mapboxgl-ctrl-icon",this._compactButton);return S.setAttribute("aria-hidden","true"),S.setAttribute("title",v),this._innerContainer=B("div","mapboxgl-ctrl-attrib-inner",this._container),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(a){const v=h.reduce((S,E,D)=>(E.value&&(S+=`${E.key}=${E.value}${D<h.length-1?"&":""}`),S),"?");a.href=`${i.e.FEEDBACK_URL}/${v}#${wf(this._map,!0)}`,a.rel="noopener nofollow"}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const h=this._map.style._mergedSourceCaches;for(const S in h){const E=h[S];if(E.used){const D=E.getSource();D.attribution&&a.indexOf(D.attribution)<0&&a.push(D.attribution)}}a.sort((S,E)=>S.length-E.length),a=a.filter((S,E)=>{for(let D=E+1;D<a.length;D++)if(a[D].indexOf(S)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class nh{constructor(){i.aV(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=B("div","mapboxgl-ctrl");const h=B("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const h in a){const v=a[h].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const h=a[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class sc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const h=++this._id;return this._queue.push({callback:a,id:h,cancelled:!1}),h}remove(a){const h=this._currentlyRunning,v=h?this._queue.concat(h):this._queue;for(const S of v)if(S.id===a)return void(S.cancelled=!0)}run(a=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const v of h)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class pg{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const h=i.dk((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,h,v){this._start=this.getValue(h),this._end=a,this._startTime=h,this._endTime=h+v}}const Bo={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class ac extends i.A{constructor(a,h,v,S){const{point:E,lngLat:D,originalEvent:O,target:N}=a;super(a.type,{point:E,lngLat:D,originalEvent:O,target:N}),this.preventDefault=()=>{a.preventDefault()},this.id=h,this.interaction=v,this.feature=S}}class Fl{constructor(a){this.map=a,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(a,h){if(this.typeById.has(a))throw new Error(`Interaction id "${a}" already exists.`);const v=h.filter;let S=h.type;v&&this.filters.set(a,i.b3(v)),S==="mouseover"&&(S="mouseenter"),S==="mouseout"&&(S="mouseleave");const E=this.interactionsByType.get(S)||new Map;S==="mouseenter"||S==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(a,h)):E.size===0&&this.map.on(S,this.handleType),E.size===0&&this.interactionsByType.set(S,E),E.set(a,h),this.typeById.set(a,S)}get(a){const h=this.typeById.get(a);if(!h)return;const v=this.interactionsByType.get(h);return v?v.get(a):void 0}remove(a){const h=this.typeById.get(a);if(!h)return;this.typeById.delete(a),this.filters.delete(a);const v=this.interactionsByType.get(h);v&&(v.delete(a),h==="mouseenter"||h==="mouseleave"?(this.delegatedInteractions.delete(a),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):v.size===0&&this.map.off(h,this.handleType))}queryTargets(a,h){const v=[];for(const[S,E]of h)E.target&&v.push({targetId:S,target:E.target,filter:this.filters.get(S)});return this.map.style.queryRenderedTargets(a,v,this.map.transform)}handleMove(a){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const h=this.queryTargets(a.point,Array.from(this.delegatedInteractions).reverse());h.length&&(a.type="mouseenter",this.handleType(a,h));const v=new Map;for(const[S,{feature:E}]of this.prevHoveredFeatures)this.hoveredFeatures.has(S)||v.set(E.id,E);v.size&&(a.type="mouseleave",this.handleType(a,Array.from(v.values())))}handleOut(a){const h=Array.from(this.hoveredFeatures.values()).map(({feature:v})=>v);h.length&&(a.type="mouseleave",this.handleType(a,h)),this.hoveredFeatures.clear()}handleType(a,h){const v=Array.from(this.interactionsByType.get(a.type)).reverse(),S=!!h;h=h||this.queryTargets(a.point,v);const E=a.type==="mouseenter";let D=!1;const O=new Set;for(const N of h){for(const[W,Z]of v){if(!Z.target)continue;const te=N.variants?N.variants[W]:null;if(te){for(const J of te){if(ap(J,N,O,W))continue;const oe=new i.df(N,J),ge=Vh(J,N,W);S&&(oe.state=this.map.getFeatureState(oe));const pe=E?this.prevHoveredFeatures.get(ge):null,ve=new ac(a,W,Z,oe),me=pe?pe.stop:Z.handler(ve);if(E&&this.hoveredFeatures.set(ge,{feature:N,stop:me}),me!==!1){D=!0;break}}if(D)break}}if(D)break}if(!D)for(const[N,W]of v){const{handler:Z,target:te}=W;if(!te&&Z(new ac(a,N,W,null))!==!1)break}}}function Bp(y,a){if(Array.isArray(y)&&Array.isArray(a)){const h=new Set(y),v=new Set(a);return h.size===v.size&&y.every(S=>v.has(S))}return i.bv(y,a)}const bx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},wx={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bl{constructor(a,h,v=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new fg({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,v&&(this.mousePitch=new Qd({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),i.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(a,h){this.mouseRotate.mousedown(a,h),this.mousePitch&&this.mousePitch.mousedown(a,h),X()}move(a,h){const v=this.map,S=this.mouseRotate.mousemoveWindow(a,h),E=S&&S.bearingDelta;if(E&&v.setBearing(v.getBearing()+E),this.mousePitch){const D=this.mousePitch.mousemoveWindow(a,h),O=D&&D.pitchDelta;O&&v.setPitch(v.getPitch()+O)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Q(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(i.l({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),fe(this.element,a)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,fe(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ue(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=ue(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function M_(y,a,h){if(y=new i.cd(y.lng,y.lat),a){const v=new i.cd(y.lng-360,y.lat),S=new i.cd(y.lng+360,y.lat),E=360*Math.ceil(Math.abs(y.lng-h.center.lng)/360),D=h.locationPoint3D(y).distSqr(a),O=a.x<0||a.y<0||a.x>h.width||a.y>h.height;h.locationPoint3D(v).distSqr(a)<D&&(O||Math.abs(v.lng-h.center.lng)<E)?y=v:h.locationPoint3D(S).distSqr(a)<D&&(O||Math.abs(S.lng-h.center.lng)<E)&&(y=S)}for(;Math.abs(y.lng-h.center.lng)>180;){const v=h.locationPoint3D(y);if(v.x>=0&&v.y>=0&&v.x<=h.width&&v.y<=h.height)break;y.lng>h.center.lng?y.lng-=360:y.lng+=360}return y}const jp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},za={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Ho extends i.E{constructor(a,h){super(),(a instanceof HTMLElement||h)&&(a=i.l({element:a},h)),i.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:v="center",color:S="#3FB1CE",scale:E=1,draggable:D=!1,clickTolerance:O=0,rotation:N=za.rotation,rotationAlignment:W=za.rotationAlignment,pitchAlignment:Z=za.pitchAlignment,occludedOpacity:te=za.occludedOpacity,altitude:J=za.altitude}=a||{};this._anchor=v,this._color=S,this._scale=E,this._draggable=D,this._clickTolerance=O,this._rotation=N,this._rotationAlignment=W,this._pitchAlignment=Z,this._occludedOpacity=te,this._altitude=J,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),a&&a.element?(this._element=a.element,this._offset=i.P.convert(a&&a.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=i.P.convert(a&&a.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",pe=>{pe.preventDefault()}),this._element.addEventListener("mousedown",pe=>{pe.preventDefault()});const oe=this._element.classList;for(const pe in jp)oe.remove(`mapboxgl-marker-anchor-${pe}`);oe.add(`mapboxgl-marker-anchor-${this._anchor}`);const ge=a&&a.className?a.className.trim().split(/\s+/):[];oe.add(...ge),this._popup=null}_createDefaultMarker(){const a=B("div"),h=j("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},a);if(this._altitude===0){const v=j("radialGradient",{id:"shadowGradient"},j("defs",{},h));j("stop",{offset:"10%","stop-opacity":.4},v),j("stop",{offset:"100%","stop-opacity":.05},v),j("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},h)}return j("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},h),j("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},h),j("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},h),a}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=i.cd.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(a){return a===this._altitude||(this._defaultMarker&&(this._altitude===0&&a!==0||this._altitude!==0&&a===0)&&(this._element=this._createDefaultMarker()),this._altitude=a||za.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,a._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const h=a.code,v=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(a){const h=a.originalEvent.target,v=this._element;this._popup&&(h===v||v.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,h=this._pos;if(!a||!h)return!1;const v=a.unproject(h,this._altitude),S=a.getFreeCameraOptions();if(!S.position)return!1;const E=S.position.toLngLat();return E.distanceTo(v)<.9*E.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const h=this._pos;if(!h||h.x<0||h.x>a.transform.width||h.y<0||h.y>a.transform.height)return void this._clearFadeTimer();const v=a.unproject(h,this._altitude);let S;a._showingGlobe()&&i.eK(a.transform,this._lngLat)?S=0:(S=1-a._queryFogOpacity(v),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${jp[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const a=this._pos,h=this._map,v=this.getPitchAlignment();if(!h||!a||v!=="map")return"";if(!h._showingGlobe()){const N=h.getPitch();return N?`rotateX(${N}deg)`:""}const S=i.cJ(i.eL(h.transform,this._lngLat)),E=a.sub(i.eM(h.transform)),D=Math.abs(E.x)+Math.abs(E.y);if(D===0)return"";const O=S/D;return`rotateX(${-E.y*O}deg) rotateY(${E.x*O}deg)`}_calculateZTransform(){const a=this._pos,h=this._map;if(!h||!a)return"";let v=0;const S=this.getRotationAlignment();if(S==="map")if(h._showingGlobe()){const E=h.project(new i.cd(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),D=h.project(new i.cd(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(E);v=i.cJ(Math.atan2(D.y,D.x))-90}else v=-h.getBearing();else if(S==="horizon"){const E=i.af(4,6,h.getZoom()),D=i.eM(h.transform);D.y+=E*h.transform.height;const O=a.sub(D),N=i.cJ(Math.atan2(O.y,O.x));v=(N>90?N-270:N+90)*(1-E)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(a){cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=M_(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat,this._altitude),a===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=i.P.convert(a),this._update(),this}addClassName(a){return this._element.classList.add(a),this}removeClassName(a){return this._element.classList.remove(a),this}toggleClassName(a){return this._element.classList.toggle(a)}_onMove(a){const h=this._map;if(!h)return;const v=this._pointerdownPos,S=this._positionDelta;if(v&&S){if(!this._isDragging){const E=this._clickTolerance||h._clickTolerance;if(a.point.dist(v)<E)return;this._isDragging=!0}this._pos=a.point.sub(S),this._lngLat=h.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.A("dragstart"))),this.fire(new i.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.A("dragend")),this._state="inactive"}_addDragHandler(a){const h=this._map,v=this._pos;h&&v&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(v),this._pointerdownPos=a.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const h=this._map;return h&&(a?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||za.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||za.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||za.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||za.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const mg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Np={maxWidth:100,unit:"metric"},yu={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},tl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},oa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ed(y=new i.P(0,0),a="bottom"){if(typeof y=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(a){case"top":return new i.P(0,y);case"top-left":return new i.P(h,h);case"top-right":return new i.P(-h,h);case"bottom":return new i.P(0,-y);case"bottom-left":return new i.P(h,-h);case"bottom-right":return new i.P(-h,-h);case"left":return new i.P(y,0);case"right":return new i.P(-y,0)}return new i.P(0,0)}return y instanceof i.P||Array.isArray(y)?i.P.convert(y):i.P.convert(y[a]||[0,0])}return{version:m,supported:k.supported,setRTLTextPlugin:i.eN,getRTLTextPluginStatus:i.eO,Map:class extends C_{constructor(y){T.mark(x.create);const a=y;if((y=i.l({},bx,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&i.eI(window)&&(y.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Qh(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies,null,null),y),this._repaint=!!y.repaint,this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new sc,this._domRenderTaskQueue=new sc,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.a$(),this._locale=i.l({},Bo,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._tessellationStep=y.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=y.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new pg(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=y.scaleFactor,this._requestManager=new Se(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,this._contextCreateOptions=y.contextCreateOptions?Object.assign({},y.contextCreateOptions):{},typeof y.container=="string"){const h=document.getElementById(y.container);if(!h)throw new Error(`Container '${y.container.toString()}' not found.`);this._container=h}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._spriteFormat=y.spriteFormat,i.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new ug),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new E_(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,(y.style||!y.testMode)&&this.setStyle(y.style||i.e.DEFAULT_STYLE,{config:y.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this.indoor=new hy(this),y.hash&&(this._hash=new bf(typeof y.hash=="string"&&y.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){a.center==null&&a.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch});const h=y.bounds;h&&(this.resize(),this.fitBounds(h,i.l({},y.fitBoundsOptions,{duration:0})))}this.resize(),y.attributionControl&&this.addControl(new Fp({customAttribution:y.customAttribution})),this._logoControl=new nh,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new i.A(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new i.A(`${h.dataType}dataloading`,h))}),this._interactions=new Fl(this)}_getMapId(){return this._mapId}addControl(y,a){if(a===void 0&&(a=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new i.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=y.onAdd(this);this._controls.push(y);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(h,v.firstChild):v.appendChild(h),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new i.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(y);return a>-1&&this._controls.splice(a,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new i.A("movestart",y)).fire(new i.A("move",y)),this.fire(new i.A("resize",y)),a&&this.fire(new i.A("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(i.aG.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new i.A("zoomstart")).fire(new i.A("zoom")).fire(new i.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new i.A("zoomstart")).fire(new i.A("zoom")).fire(new i.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new i.A("pitchstart")).fire(new i.A("pitch")).fire(new i.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new i.A("pitchstart")).fire(new i.A("pitch")).fire(new i.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(y){return this._scaleFactor=y,this.painter.scaleFactor=y,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(a=>a.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(a=>a==="auto"?navigator.language:a):y}setLanguage(y){const a=this._parseLanguage(y);if(!this.style||a===this._language)return this;this._language=a,this.style.reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,a=y.projection.name;let h;a==="globe"&&y.zoom>=i.cx?(y.setMercatorFromTransition(),h=!0):a==="mercator"&&y.zoom<i.cx&&(y.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,a){return this._updateProjection(y||a||{name:"mercator"})}_updateProjection(y){let a;return a=y.name==="globe"&&this.transform.zoom>=i.cx?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),a&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(y,a){return this.transform.locationPoint3D(i.cd.convert(y),a)}unproject(y,a){return this.transform.pointLocation3D(i.P.convert(y),a)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,a,h){const v=S=>{let E=[];if(Array.isArray(a)){const D=a.filter(O=>this.getLayer(O));E=D.length?this.queryRenderedFeatures(S,{layers:D}):[]}else E=this.queryRenderedFeatures(S,{target:a});return E};if(y==="mouseenter"||y==="mouseover"){let S=!1;return{listener:h,targets:a,delegates:{mousemove:D=>{const O=v(D.point);O.length?S||(S=!0,h.call(this,new La(y,this,D.originalEvent,{features:O}))):S=!1},mouseout:()=>{S=!1}}}}if(y==="mouseleave"||y==="mouseout"){let S=!1;return{listener:h,targets:a,delegates:{mousemove:O=>{v(O.point).length?S=!0:S&&(S=!1,h.call(this,new La(y,this,O.originalEvent)))},mouseout:O=>{S&&(S=!1,h.call(this,new La(y,this,O.originalEvent)))}}}}{const S=E=>{const D=v(E.point);D.length&&(E.features=D,h.call(this,E),delete E.features)};return{listener:h,targets:a,delegates:{[y]:S}}}}on(y,a,h){if(typeof a=="function"||h===void 0)return super.on(y,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const v=this._createDelegatedListener(y,a,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(v);for(const S in v.delegates)this.on(S,v.delegates[S]);return this}once(y,a,h){if(typeof a=="function"||h===void 0)return super.once(y,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const v=this._createDelegatedListener(y,a,h);for(const S in v.delegates)this.once(S,v.delegates[S]);return this}off(y,a,h){if(typeof a=="function"||h===void 0)return super.off(y,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const v=this._delegatedListeners?this._delegatedListeners[y]:void 0;return v&&(S=>{for(let E=0;E<S.length;E++){const D=S[E];if(D.listener===h&&Bp(D.targets,a)){for(const O in D.delegates)this.off(O,D.delegates[O]);return S.splice(E,1),this}}})(v),this}queryRenderedFeatures(y,a){if(!this.style)return[];if(y===void 0||y instanceof i.P||Array.isArray(y)||a!==void 0||(a=y,y=void 0),y=y||[[0,0],[this.transform.width,this.transform.height]],!a){const E=this.style.queryRenderedFeatures(y,void 0,this.transform),D=this.style.queryRenderedFeatureset(y,void 0,this.transform);return E.concat(D)}let h=!0;if(a.target&&(h=this._isTargetValid(a.target),h&&!a.layers))return this.style.queryRenderedFeatureset(y,a,this.transform);let v=!0;if(a.layers&&Array.isArray(a.layers)){for(const E of a.layers)if(!this._isValidId(E)){v=!1;break}if(v&&!a.target)return this.style.queryRenderedFeatures(y,a,this.transform)}let S=[];return v&&(S=S.concat(this.style.queryRenderedFeatures(y,a,this.transform))),h&&(S=S.concat(this.style.queryRenderedFeatureset(y,a,this.transform))),S}querySourceFeatures(y,a){return!y||typeof y=="string"&&!this._isValidId(y)?[]:this.style.querySourceFeatures(y,a)}isPointOnSurface(y){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&i.w(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(y))}addInteraction(y,a){return this._interactions.add(y,a),this}removeInteraction(y){return this._interactions.remove(y),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this}setStyle(y,a){return a=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a),this.style&&y&&a.diff!==!1&&a.localFontFamily===this._localFontFamily&&a.localIdeographFontFamily===this._localIdeographFontFamily&&!a.config?(this.style._diffStyle(y,(h,v)=>{if(h){const S=typeof h=="string"?h:h instanceof Error?h.message:h.error;i.w(`Unable to perform style diff: ${S}. Rebuilding the style from scratch.`),this._updateStyle(y,a)}else v&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(y,a))}_getUIString(y){const a=this._locale[y];if(a==null)throw new Error(`Missing UI string '${y}'`);return a}_updateStyle(y,a){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y){const h=i.l({},a);a&&a.config&&(h.initialConfig=a.config,delete h.config),this.style=new kl(this,h).load(y),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new kl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(y){return y==null?(this.fire(new i.z(new Error("IDs can't be empty."))),!1):!i.d9(y)||(this.fire(new i.z(new Error(`IDs can't contain special symbols: "${y}".`))),!1)}_isTargetValid(y){return"featuresetId"in y?this._isValidId("importId"in y?y.importId:y.featuresetId):"layerId"in y&&this._isValidId(y.layerId)}_areTargetsValid(y){if(Array.isArray(y)){for(const a of y)if(!this._isValidId(a))return!1;return!0}return this._isTargetValid(y)}addSource(y,a){return this._isValidId(y)?(this._lazyInitEmptyStyle(),this.style.addSource(y,a),this._update(!0)):this}isSourceLoaded(y){return!!this._isValidId(y)&&!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(y,a,h){this._lazyInitEmptyStyle(),this.style.addSourceType(y,a,h)}removeSource(y){return this._isValidId(y)?(this.style.removeSource(y),this._updateTerrain(),this._update(!0)):this}getSource(y){return this._isValidId(y)?this.style.getOwnSource(y):null}addImage(y,a,{pixelRatio:h=1,sdf:v=!1,stretchX:S,stretchY:E,content:D}={}){this._lazyInitEmptyStyle();const O=i.I.from(y);if(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap){const{width:N,height:W,data:Z}=i.q.getImageData(a);this.style.addImage(O,{data:new i.r({width:N,height:W},Z),pixelRatio:h,stretchX:S,stretchY:E,content:D,sdf:v,version:0,usvg:!1})}else if(a.width===void 0||a.height===void 0)this.fire(new i.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:N,height:W}=a,Z=a;this.style.addImage(O,{data:new i.r({width:N,height:W},new Uint8Array(Z.data)),pixelRatio:h,stretchX:S,stretchY:E,content:D,sdf:v,usvg:!1,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,y)}}updateImage(y,a){this._lazyInitEmptyStyle();const h=i.I.from(y),v=this.style.getImage(h);if(!v)return void this.fire(new i.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap?i.q.getImageData(a):a,{width:E,height:D,data:O}=S;if(E===void 0||D===void 0)return void this.fire(new i.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==(v.usvg?v.icon.usvg_tree.width:v.data.width)||D!==(v.usvg?v.icon.usvg_tree.height:v.data.height))return void this.fire(new i.z(new Error(`The width and height of the updated image (${E}, ${D})
                must be that same as the previous version of the image
                (${v.data.width}, ${v.data.height})`)));const N=!(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap);let W=!1;v.usvg?(v.data=new i.r({width:E,height:D},new Uint8Array(O)),v.usvg=!1,v.icon=void 0,W=!0):v.data.replace(O,N),this.style.updateImage(h,v,W)}hasImage(y){return y?!!this.style&&!!this.style.getImage(i.I.from(y)):(this.fire(new i.z(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(i.I.from(y))}loadImage(y,a){i.o(this._requestManager.transformRequest(y,i.R.Image),(h,v)=>{a(h,v instanceof HTMLImageElement?i.q.getImageData(v):v)})}listImages(){return this.style.listImages().map(y=>y.name)}addModel(y,a){this._lazyInitEmptyStyle(),this.style.addModel(y,a)}hasModel(y){return y?this.style.hasModel(y):(this.fire(new i.z(new Error("Missing required model id"))),!1)}removeModel(y){this.style.removeModel(y)}listModels(){return this.style.listModels()}addLayer(y,a){return this._isValidId(y.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(y,a),this._update(!0)):this}getSlot(y){const a=this.getLayer(y);return a&&a.slot||null}setSlot(y,a){return this.style.setSlot(y,a),this.style.mergeLayers(),this._update(!0)}addImport(y,a){return this.style.addImport(y,a).catch(h=>this.fire(new i.z(new Error("Failed to add import",h)))),this}updateImport(y,a){return typeof a!="string"&&a.id!==y?(this.removeImport(y),this.addImport(a)):(this.style.updateImport(y,a),this._update(!0))}removeImport(y){return this.style.removeImport(y),this}moveImport(y,a){return this.style.moveImport(y,a),this._update(!0)}moveLayer(y,a){return this._isValidId(y)?(this.style.moveLayer(y,a),this._update(!0)):this}removeLayer(y){return this._isValidId(y)?(this.style.removeLayer(y),this._update(!0)):this}getLayer(y){if(!this._isValidId(y))return null;const a=this.style.getOwnLayer(y);return a?a.type==="custom"?a.implementation:a.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(y,a,h){return this._isValidId(y)?(this.style.setLayerZoomRange(y,a,h),this._update(!0)):this}setFilter(y,a,h={}){return this._isValidId(y)?(this.style.setFilter(y,a,h),this._update(!0)):this}getFilter(y){return this._isValidId(y)?this.style.getFilter(y):null}setPaintProperty(y,a,h,v={}){return this._isValidId(y)?(this.style.setPaintProperty(y,a,h,v),this._update(!0)):this}getPaintProperty(y,a){return this._isValidId(y)?this.style.getPaintProperty(y,a):null}setLayoutProperty(y,a,h,v={}){return this._isValidId(y)?(this.style.setLayoutProperty(y,a,h,v),this._update(!0)):this}getLayoutProperty(y,a){return this._isValidId(y)?this.style.getLayoutProperty(y,a):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(y){return this.style.setGlyphsUrl(y),this._update(!0)}getSchema(y){return this.style.getSchema(y)}setSchema(y,a){return this.style.setSchema(y,a),this._update(!0)}getConfig(y){return this.style.getConfig(y)}setConfig(y,a){return this.style.setConfig(y,a),this._update(!0)}getConfigProperty(y,a){return this.style.getConfigProperty(y,a)}setConfigProperty(y,a,h){return this.style.setConfigProperty(y,a,h),this._update(!0)}getFeaturesetDescriptors(y){return this.style.getFeaturesetDescriptors(y)}setLights(y){if(this._lazyInitEmptyStyle(),y&&y.length===1&&y[0].type==="flat"){const a=y[0];a.properties?this.style.setFlatLight(a.properties,a.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(y),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const y=this.style.getLights()||[];return y.length===0&&y.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),y}setLight(y,a={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:y}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(y){return this._lazyInitEmptyStyle(),this.style.setSnow(y),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(y){return this._lazyInitEmptyStyle(),this.style.setRain(y),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(y){return this._lazyInitEmptyStyle(),this.style.setColorTheme(y),this._update(!0)}setImportColorTheme(y,a){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(y,a),this._update(!0)}setCamera(y){return this.style.setCamera(y),this._triggerCameraUpdate(y)}_triggerCameraUpdate(y){return this._update(this.transform.setOrthographicProjectionAtLowPitch(y["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.cd.convert(y),this.transform):0}setFeatureState(y,a){return y.source&&!this._isValidId(y.source)?this:(this.style.setFeatureState(y,a),this._update())}removeFeatureState(y,a){return y.source&&!this._isValidId(y.source)?this:(this.style.removeFeatureState(y,a),this._update())}getFeatureState(y){return y.source&&!this._isValidId(y.source)?null:this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let h,v,S,E=this._container;for(;E&&(!v||!S);){const D=window.getComputedStyle(E).transform;D&&D!=="none"&&(h=D.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(v=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(S=h[3])),E=E.parentElement}this._containerWidth=v?Math.abs(y/v):y,this._containerHeight=S?Math.abs(a/S):a}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=B("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=B("div","mapboxgl-canvas-container",y);this._canvas=B("canvas","mapboxgl-canvas",a),this._interactive&&(a.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=B("div","mapboxgl-control-container",y),v=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(S=>{v[S]=B("div",`mapboxgl-ctrl-${S}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,a){const h=i.q.devicePixelRatio||1;this._canvas.width=h*Math.ceil(y),this._canvas.height=h*Math.ceil(a),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${a}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const a=this._markers.indexOf(y);a!==-1&&this._markers.splice(a,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const a=this._popups.indexOf(y);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const y=i.l({},k.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl2",y);a?(Lt(a,!0),this.painter=new xf(a,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",h=>{h.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(a)):this.fire(new i.z(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.A("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new i.A("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let a;this.fire(new i.A("renderstart")),++this._frameId;const h=this.painter.context.extTimerQuery,v=i.q.now(),S=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(a=S.createQuery(),S.beginQuery(h.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const E=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,Z=this.transform.pitch,te=i.q.now(),J=new i.aa(W,{now:te,fadeDuration:E,pitch:Z,transition:this.style.transition});this.style.update(J)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let D=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),D=this._updateAverageElevation(v),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):D=this._updateAverageElevation(v);const O=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),O&&(this._placementDirty=O.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,T.mark(x.load),this.fire(new i.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const W=i.q.now()-v;S.endQuery(h.TIME_ELAPSED_EXT),setTimeout(()=>{const Z=S.getQueryParameter(a,S.QUERY_RESULT)/1e6;S.deleteQuery(a),this.fire(new i.A("gpu-timing-frame",{cpuTime:W,gpuTime:Z}))},50)}if(this.listens("gpu-timing-layer")){const W=this.painter.collectGpuTimers();setTimeout(()=>{const Z=this.painter.queryGpuTimers(W);this.fire(new i.A("gpu-timing-layer",{layerTimes:Z}))},50)}if(this.listens("gpu-timing-deferred-render")){const W=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Z=this.painter.queryGpuTimeDeferredRender(W);this.fire(new i.A("gpu-timing-deferred-render",{gpuTime:Z}))},50)}const N=this._sourcesDirty||this._styleDirty||this._placementDirty||D;if(N||this._repaint)this.triggerRepaint();else{const W=this.idle();if(W&&(D=this._updateAverageElevation(v,!0)),D)this.triggerRepaint();else if(this._triggerFrame(!1),W&&(this.fire(new i.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Z=this._calculateSpeedIndex();this.fire(new i.A("speedindexcompleted",{speedIndex:Z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||N||(this._fullyLoaded=!0,T.mark(x.fullLoad),this._performanceMetricsCollection&&St(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const a of this._markers)y&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!y||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(y,a=!1){const h=S=>(this.transform.averageElevation=S,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);const v=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(v||(a||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const S=this.transform.averageElevation;let E=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=y;const D=Math.abs(S-E);if(D>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(E),h(E);this._averageElevation.easeTo(E,y,300)}else if(D>1e-4)return this._averageElevation.jumpTo(E),h(E)}return!!this._averageElevation.isEasing(y)&&h(this._averageElevation.getValue(y))}_authenticate(){Et(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===Me||y.status===401)){const a=this.painter.context.gl;Lt(a,!1),this._logoControl instanceof nh&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Nt(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&ot(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const h=this.painter.context.gl,v=h.createFramebuffer();function S(E){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,E,0);const D=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,D),D}return h.bindFramebuffer(h.FRAMEBUFFER,v),this._canvasPixelComparison(S(y),a.canvasCopies.map(S),a.timeStamps)}_canvasPixelComparison(y,a,h){let v=h[1]-h[0];const S=y.length/4;for(let E=0;E<a.length;E++){const D=a[E];let O=0;for(let N=0;N<D.length;N+=4)D[N]===y[N]&&D[N+1]===y[N+1]&&D[N+2]===y[N+2]&&D[N+3]===y[N+3]&&(O+=1);v+=(h[E+2]-h[E+1])*(1-O/S)}return v}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),yt.delete(this.painter.context.gl),Dt.remove(),gt.remove(),this._removed=!0,this.fire(new i.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=i.q.frame(a=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(a)}))}_preloadTiles(y){const a=this.style?this.style.getSourceCaches():[];return i.bt(a,(h,v)=>h._preloadTiles(y,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(y){this._showParseStatus!==y&&(this._showParseStatus=y,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(y){this._showLayers2DWireframe!==y&&(this._showLayers2DWireframe=y,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(y){this._showLayers3DWireframe!==y&&(this._showLayers3DWireframe=y,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,this._tp.refreshUI(),y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,this._tp.refreshUI(),y&&this._update())}_setCacheLimits(y,a){i.eJ(y,a)}get version(){return m}},NavigationControl:class{constructor(y={}){this.options=i.l({},wx,y),this._container=B("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(i.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),B("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),B("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:a}):h.resetNorth({},{originalEvent:a}))}),this._compassIcon=B("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const a=y.getZoom(),h=a===y.getMaxZoom(),v=a===y.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bl(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,a){const h=B("button",y,this._container);return h.type="button",h.addEventListener("click",a),h}_setButtonTitle(y,a){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${a}`);y.setAttribute("aria-label",h),y.firstElementChild&&y.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends i.E{constructor(y={}){super();const a=navigator.geolocation;this.options=i.l({geolocation:a},mg,y),i.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Zd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=B("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const a=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,y(h)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(h=>a(h.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(y){const a=this._map.getMaxBounds(),h=y.coords;return!!a&&(h.longitude<a.getWest()||h.longitude>a.getEast()||h.latitude<a.getSouth()||h.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new i.A("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.A("geolocate",y)),this._finish()}}_updateCamera(y){const a=new i.cd(y.coords.longitude,y.coords.latitude),h=y.coords.accuracy,v=this._map.getBearing(),S=i.l({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(h),S,{geolocateSource:!0})}_updateMarker(y){if(y){const a=new i.cd(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,a=i.c6(1,y._center.lat)*y.worldSize,h=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.A("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=B("button","mapboxgl-ctrl-geolocate",this._container),B("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=B("div","mapboxgl-user-location"),this._dotElement.appendChild(B("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(B("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ho({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=B("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ho({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.A("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Fp,ScaleControl:class{constructor(y={}){this.options=i.l({},Np,y),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,a=this._map,h=a._containerHeight/2,v=a._containerWidth/2-y/2,S=a.unproject([v,h]),E=a.unproject([v+y,h]),D=S.distanceTo(E);if(this.options.unit==="imperial"){const O=3.2808*D;O>5280?this._setScale(y,O/5280,"mile"):this._setScale(y,O,"foot")}else this.options.unit==="nautical"?this._setScale(y,D/1852,"nautical-mile"):D>=1e3?this._setScale(y,D/1e3,"kilometer"):this._setScale(y,D,"meter")}_setScale(y,a,h){this._map._requestDomTask(()=>{const v=function(E){const D=Math.pow(10,`${Math.floor(E)}`.length-1);let O=E/D;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(N){const W=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*W)/W}(O),D*O}(a),S=v/a;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(v):`${v}&nbsp;${yu[h]}`,this._container.style.width=y*S+"px"})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=B("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y={}){this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:i.w("Full screen control 'container' must be a DOM element.")),i.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=B("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=B("button","mapboxgl-ctrl-fullscreen",this._controlContainer);B("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(y){super(),this.options=i.l(Object.create(tl),y),this._altitude=this.options.altitude,i.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new i.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new i.A("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=i.cd.convert(y),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(y){return this._altitude=y,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const a=document.createDocumentFragment(),h=document.createElement("body");let v;for(h.innerHTML=y;v=h.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=B("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(y),this.options.closeButton){const h=this._closeButton=B("button","mapboxgl-popup-close-button",a);h.type="button",h.setAttribute("aria-label","Close popup"),h.innerHTML='<span aria-hidden="true">&#215;</span>',h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let a;return this._classList.delete(y)?a=!1:(this._classList.add(y),a=!0),this._updateClassList(),a}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const a=this._map,h=this._container,v=this._pos;if(!a||!h||!v)return"bottom";const S=h.offsetWidth,E=h.offsetHeight,D=v.x<S/2,O=v.x>a.transform.width-S/2;if(v.y+y<E)return D?"top-left":O?"top-right":"top";if(v.y>a.transform.height-E){if(D)return"bottom-left";if(O)return"bottom-right"}return D?"left":O?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),y.className=a.join(" ")}_update(y){const a=this._map,h=this._content;if(!a||!this._lngLat&&!this._trackPointer||!h)return;let v=this._container;if(v||(v=this._container=B("div","mapboxgl-popup",a.getContainer()),this._tip=B("div","mapboxgl-popup-tip",v),v.appendChild(h)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=M_(this._lngLat,this._pos,a.transform)),!this._trackPointer||y){const S=this._pos=this._trackPointer&&y instanceof i.P?y:a.project(this._lngLat,this._altitude),E=ed(this.options.offset),D=this._anchor=this._getAnchor(E.y),O=ed(this.options.offset,D),N=S.add(O).round();a._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${jp[D]} translate(${N.x}px,${N.y}px)`)})}if(!this._marker&&a._showingGlobe()){const S=i.eK(a.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(oa);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Ho,Style:kl,LngLat:i.cd,LngLatBounds:i.aG,Point:i.P,MercatorCoordinate:i.ac,FreeCameraOptions:fp,Evented:i.E,config:i.e,prewarm:i.eP,clearPrewarmedResources:i.eQ,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(y){i.e.ACCESS_TOKEN=y},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(y){i.e.API_URL=y},get workerCount(){return i.eR.workerCount},set workerCount(y){i.eR.workerCount=y},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){i.e.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){i.eS(y)},get workerUrl(){return i.eT.workerUrl},set workerUrl(y){i.eT.workerUrl=y},get workerClass(){return i.eT.workerClass},set workerClass(y){i.eT.workerClass=y},get workerParams(){return i.eT.workerParams},set workerParams(y){i.eT.workerParams=y},get dracoUrl(){return i.eU()},set dracoUrl(y){i.eV(y)},get meshoptUrl(){return i.eW()},set meshoptUrl(y){i.eX(y)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var d=s;return d})}(kA)),kA.exports}var E4e=T4e();const Sh=Ls(E4e),fj=function(e,t){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on(c,d,i){if(n[c]===void 0)throw new Error(`Invalid event type: ${c}`);n[c].push({selector:d,fn:i})},render(c){t.store.featureChanged(c)}},s=function(c,d){const i=n[c];let m=i.length;for(;m--;){const x=i[m];if(x.selector(d)){x.fn.call(r,d)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(c){s("drag",c)},click(c){s("click",c)},mousemove(c){s("mousemove",c)},mousedown(c){s("mousedown",c)},mouseup(c){s("mouseup",c)},mouseout(c){s("mouseout",c)},keydown(c){s("keydown",c)},keyup(c){s("keyup",c)},touchstart(c){s("touchstart",c)},touchmove(c){s("touchmove",c)},touchend(c){s("touchend",c)},tap(c){s("tap",c)}}};var ZM={},ES={},wW;function C4e(){return wW||(wW=1,ES.RADIUS=6378137,ES.FLATTENING=1/298.257223563,ES.POLAR_RADIUS=63567523142e-4),ES}var SW;function M4e(){if(SW)return ZM;SW=1;var e=C4e();ZM.geometry=t,ZM.ring=r;function t(c){var d=0,i;switch(c.type){case"Polygon":return n(c.coordinates);case"MultiPolygon":for(i=0;i<c.coordinates.length;i++)d+=n(c.coordinates[i]);return d;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)d+=t(c.geometries[i]);return d}}function n(c){var d=0;if(c&&c.length>0){d+=Math.abs(r(c[0]));for(var i=1;i<c.length;i++)d-=Math.abs(r(c[i]))}return d}function r(c){var d,i,m,x,T,C,A,I=0,k=c.length;if(k>2){for(A=0;A<k;A++)A===k-2?(x=k-2,T=k-1,C=0):A===k-1?(x=k-1,T=0,C=1):(x=A,T=A+1,C=A+2),d=c[x],i=c[T],m=c[C],I+=(s(m[0])-s(d[0]))*Math.sin(s(i[1]));I=I*e.RADIUS*e.RADIUS/2}return I}function s(c){return c*Math.PI/180}return ZM}var A4e=M4e();const pj=Ls(A4e),_u={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},wh={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},Vs={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},xu={POLYGON:"polygon",LINE:"line_string",POINT:"point"},hi={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},Ro={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},ru={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},BE={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},bc={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},El={ACTIVE:"true",INACTIVE:"false"},Cre=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],R4e=-90,mj=-85,D4e=90,gj=85,P4e=-270,I4e=270,Mre=Object.freeze(Object.defineProperty({__proto__:null,LAT_MAX:D4e,LAT_MIN:R4e,LAT_RENDERED_MAX:gj,LAT_RENDERED_MIN:mj,LNG_MAX:I4e,LNG_MIN:P4e,activeStates:El,classes:_u,cursors:Vs,events:ru,geojsonTypes:hi,interactions:Cre,meta:bc,modes:Ro,sources:wh,types:xu,updateActions:BE},Symbol.toStringTag,{value:"Module"})),TW={Point:0,LineString:1,MultiLineString:1,Polygon:2};function k4e(e,t){const n=TW[e.geometry.type]-TW[t.geometry.type];return n===0&&e.geometry.type===hi.POLYGON?e.area-t.area:n}function Are(e){return e.map(t=>(t.geometry.type===hi.POLYGON&&(t.area=pj.geometry({type:hi.FEATURE,property:{},geometry:t.geometry})),t)).sort(k4e).map(t=>(delete t.area,t))}function Rre(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function Rh(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}Rh.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};Rh.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};Rh.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};Rh.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,n)=>t.v-n.v).map(t=>t.k)};Rh.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const O4e=[bc.FEATURE,bc.MIDPOINT,bc.VERTEX],_1={click:L4e,touch:z4e};function L4e(e,t,n){return Dre(e,t,n,n.options.clickBuffer)}function z4e(e,t,n){return Dre(e,t,n,n.options.touchBuffer)}function Dre(e,t,n,r){if(n.map===null)return[];const s=e?Rre(e,r):t,c={};n.options.styles&&(c.layers=n.options.styles.map(x=>x.id).filter(x=>n.map.getLayer(x)!=null));const d=n.map.queryRenderedFeatures(s,c).filter(x=>O4e.indexOf(x.properties.meta)!==-1),i=new Rh,m=[];return d.forEach(x=>{const T=x.properties.id;i.has(T)||(i.add(T),m.push(x))}),Are(m)}function OA(e,t){const n=_1.click(e,null,t),r={mouse:Vs.NONE};return n[0]&&(r.mouse=n[0].properties.active===El.ACTIVE?Vs.MOVE:Vs.POINTER,r.feature=n[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(r.mouse=Vs.ADD),t.ui.queueMapClasses(r),t.ui.updateMapClasses(),n[0]}function l4(e,t){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}const F4e=4,B4e=12,j4e=500;function yj(e,t,n={}){const r=n.fineTolerance!=null?n.fineTolerance:F4e,s=n.grossTolerance!=null?n.grossTolerance:B4e,c=n.interval!=null?n.interval:j4e;e.point=e.point||t.point,e.time=e.time||t.time;const d=l4(e.point,t.point);return d<r||d<s&&t.time-e.time<c}const N4e=25,V4e=250;function vj(e,t,n={}){const r=n.tolerance!=null?n.tolerance:N4e,s=n.interval!=null?n.interval:V4e;return e.point=e.point||t.point,e.time=e.time||t.time,l4(e.point,t.point)<r&&t.time-e.time<s}let $4e=(e,t=21)=>(n=t)=>{let r="",s=n|0;for(;s--;)r+=e[Math.random()*e.length|0];return r};const U4e=$4e("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function c4(){return U4e()}const iu=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||c4(),this.type=t.geometry.type};iu.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};iu.prototype.incomingCoords=function(e){this.setCoordinates(e)};iu.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};iu.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};iu.prototype.setProperty=function(e,t){this.properties[e]=t};iu.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:hi.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};iu.prototype.internal=function(e){const t={id:this.id,meta:bc.FEATURE,"meta:type":this.type,active:El.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t[`user_${n}`]=this.properties[n];return{type:hi.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const Lv=function(e,t){iu.call(this,e,t)};Lv.prototype=Object.create(iu.prototype);Lv.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};Lv.prototype.updateCoordinate=function(e,t,n){arguments.length===3?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()};Lv.prototype.getCoordinate=function(){return this.getCoordinates()};const wm=function(e,t){iu.call(this,e,t)};wm.prototype=Object.create(iu.prototype);wm.prototype.isValid=function(){return this.coordinates.length>1};wm.prototype.addCoordinate=function(e,t,n){this.changed();const r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])};wm.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};wm.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};wm.prototype.updateCoordinate=function(e,t,n){const r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};const Cd=function(e,t){iu.call(this,e,t),this.coordinates=this.coordinates.map(n=>n.slice(0,-1))};Cd.prototype=Object.create(iu.prototype);Cd.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Cd.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Cd.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Cd.prototype.addCoordinate=function(e,t,n){this.changed();const r=e.split(".").map(c=>parseInt(c,10));this.coordinates[r[0]].splice(r[1],0,[t,n])};Cd.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(r=>parseInt(r,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))};Cd.prototype.getCoordinate=function(e){const t=e.split(".").map(r=>parseInt(r,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))};Cd.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Cd.prototype.updateCoordinate=function(e,t,n){this.changed();const r=e.split("."),s=parseInt(r[0],10),c=parseInt(r[1],10);this.coordinates[s]===void 0&&(this.coordinates[s]=[]),this.coordinates[s][c]=[t,n]};const q4e={MultiPoint:Lv,MultiLineString:wm,MultiPolygon:Cd},yP=(e,t,n,r,s)=>{const c=n.split("."),d=parseInt(c[0],10),i=c[1]?c.slice(1).join("."):null;return e[d][t](i,r,s)},Jc=function(e,t){if(iu.call(this,e,t),delete this.coordinates,this.model=q4e[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};Jc.prototype=Object.create(iu.prototype);Jc.prototype._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(n=>new t(this.ctx,{id:c4(),type:hi.FEATURE,properties:{},geometry:{coordinates:n,type:this.type.replace("Multi","")}}))};Jc.prototype.isValid=function(){return this.features.every(e=>e.isValid())};Jc.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};Jc.prototype.getCoordinate=function(e){return yP(this.features,"getCoordinate",e)};Jc.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===hi.POLYGON?e.getCoordinates():e.coordinates)))};Jc.prototype.updateCoordinate=function(e,t,n){yP(this.features,"updateCoordinate",e,t,n),this.changed()};Jc.prototype.addCoordinate=function(e,t,n){yP(this.features,"addCoordinate",e,t,n),this.changed()};Jc.prototype.removeCoordinate=function(e){yP(this.features,"removeCoordinate",e),this.changed()};Jc.prototype.getFeatures=function(){return this.features};function uo(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}uo.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};uo.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,n)=>(t[n.feature_id]===void 0&&(t[n.feature_id]=!0,this._ctx.store.get(n.feature_id).changed()),t),{})};uo.prototype.getSelected=function(){return this._ctx.store.getSelected()};uo.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};uo.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};uo.prototype.getFeature=function(e){return this._ctx.store.get(e)};uo.prototype.select=function(e){return this._ctx.store.select(e)};uo.prototype.deselect=function(e){return this._ctx.store.deselect(e)};uo.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};uo.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};uo.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};uo.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};uo.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};uo.prototype.changeMode=function(e,t={},n={}){return this._ctx.events.changeMode(e,t,n)};uo.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};uo.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};uo.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};uo.prototype.featuresAt=function(e,t,n="click"){if(n!=="click"&&n!=="touch")throw new Error("invalid buffer type");return _1[n](e,t,this._ctx)};uo.prototype.newFeature=function(e){const t=e.geometry.type;return t===hi.POINT?new Lv(this._ctx,e):t===hi.LINE_STRING?new wm(this._ctx,e):t===hi.POLYGON?new Cd(this._ctx,e):new Jc(this._ctx,e)};uo.prototype.isInstanceOf=function(e,t){if(e===hi.POINT)return t instanceof Lv;if(e===hi.LINE_STRING)return t instanceof wm;if(e===hi.POLYGON)return t instanceof Cd;if(e==="MultiFeature")return t instanceof Jc;throw new Error(`Unknown feature class: ${e}`)};uo.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};uo.prototype.onSetup=function(){};uo.prototype.onDrag=function(){};uo.prototype.onClick=function(){};uo.prototype.onMouseMove=function(){};uo.prototype.onMouseDown=function(){};uo.prototype.onMouseUp=function(){};uo.prototype.onMouseOut=function(){};uo.prototype.onKeyUp=function(){};uo.prototype.onKeyDown=function(){};uo.prototype.onTouchStart=function(){};uo.prototype.onTouchMove=function(){};uo.prototype.onTouchEnd=function(){};uo.prototype.onTap=function(){};uo.prototype.onStop=function(){};uo.prototype.onTrash=function(){};uo.prototype.onCombineFeature=function(){};uo.prototype.onUncombineFeature=function(){};uo.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const Pre={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},H4e=Object.keys(Pre);function W4e(e){const t=Object.keys(e);return function(n,r={}){let s={};const c=t.reduce((i,m)=>(i[m]=e[m],i),new uo(n));function d(i){return m=>c[i](s,m)}return{start(){s=c.onSetup(r),H4e.forEach(i=>{const m=Pre[i];let x=()=>!1;e[m]&&(x=()=>!0),this.on(i,x,d(m))})},stop(){c.onStop(s)},trash(){c.onTrash(s)},combineFeatures(){c.onCombineFeatures(s)},uncombineFeatures(){c.onUncombineFeatures(s)},render(i,m){c.toDisplayFeatures(s,i,m)}}}}function G4e(e){const t=Object.keys(e.options.modes).reduce((A,I)=>(A[I]=W4e(e.options.modes[I]),A),{});let n={},r={};const s={};let c=null,d=null;s.drag=function(A,I){I({point:A.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:Vs.DRAG}),d.drag(A)):A.originalEvent.stopPropagation()},s.mousedrag=function(A){s.drag(A,I=>!yj(n,I))},s.touchdrag=function(A){s.drag(A,I=>!vj(r,I))},s.mousemove=function(A){if((A.originalEvent.buttons!==void 0?A.originalEvent.buttons:A.originalEvent.which)===1)return s.mousedrag(A);const k=OA(A,e);A.featureTarget=k,d.mousemove(A)},s.mousedown=function(A){n={time:new Date().getTime(),point:A.point};const I=OA(A,e);A.featureTarget=I,d.mousedown(A)},s.mouseup=function(A){const I=OA(A,e);A.featureTarget=I,yj(n,{point:A.point,time:new Date().getTime()})?d.click(A):d.mouseup(A)},s.mouseout=function(A){d.mouseout(A)},s.touchstart=function(A){if(!e.options.touchEnabled)return;r={time:new Date().getTime(),point:A.point};const I=_1.touch(A,null,e)[0];A.featureTarget=I,d.touchstart(A)},s.touchmove=function(A){if(e.options.touchEnabled)return d.touchmove(A),s.touchdrag(A)},s.touchend=function(A){if(A.originalEvent.preventDefault(),!e.options.touchEnabled)return;const I=_1.touch(A,null,e)[0];A.featureTarget=I,vj(r,{time:new Date().getTime(),point:A.point})?d.tap(A):d.touchend(A)};const i=A=>!(A===8||A===46||A>=48&&A<=57);s.keydown=function(A){(A.srcElement||A.target).classList.contains(_u.CANVAS)&&((A.keyCode===8||A.keyCode===46)&&e.options.controls.trash?(A.preventDefault(),d.trash()):i(A.keyCode)?d.keydown(A):A.keyCode===49&&e.options.controls.point?m(Ro.DRAW_POINT):A.keyCode===50&&e.options.controls.line_string?m(Ro.DRAW_LINE_STRING):A.keyCode===51&&e.options.controls.polygon&&m(Ro.DRAW_POLYGON))},s.keyup=function(A){i(A.keyCode)&&d.keyup(A)},s.zoomend=function(){e.store.changeZoom()},s.data=function(A){if(A.dataType==="style"){const{setup:I,map:k,options:B,store:j}=e;B.styles.some(H=>k.getLayer(H.id))||(I.addLayers(),j.setDirty(),j.render())}};function m(A,I,k={}){d.stop();const B=t[A];if(B===void 0)throw new Error(`${A} is not valid`);c=A;const j=B(e,I);d=fj(j,e),k.silent||e.map.fire(ru.MODE_CHANGE,{mode:A}),e.store.setDirty(),e.store.render()}const x={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function T(A){let I=!1;Object.keys(A).forEach(k=>{if(x[k]===void 0)throw new Error("Invalid action type");x[k]!==A[k]&&(I=!0),x[k]=A[k]}),I&&e.map.fire(ru.ACTIONABLE,{actions:x})}return{start(){c=e.options.defaultMode,d=fj(t[c](e),e)},changeMode:m,actionable:T,currentModeName(){return c},currentModeRender(A,I){return d.render(A,I)},fire(A,I){e.map&&e.map.fire(A,I)},addEventListeners(){e.map.on("mousemove",s.mousemove),e.map.on("mousedown",s.mousedown),e.map.on("mouseup",s.mouseup),e.map.on("data",s.data),e.map.on("touchmove",s.touchmove),e.map.on("touchstart",s.touchstart),e.map.on("touchend",s.touchend),e.container.addEventListener("mouseout",s.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",s.keydown),e.container.addEventListener("keyup",s.keyup))},removeEventListeners(){e.map.off("mousemove",s.mousemove),e.map.off("mousedown",s.mousedown),e.map.off("mouseup",s.mouseup),e.map.off("data",s.data),e.map.off("touchmove",s.touchmove),e.map.off("touchstart",s.touchstart),e.map.off("touchend",s.touchend),e.container.removeEventListener("mouseout",s.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",s.keydown),e.container.removeEventListener("keyup",s.keyup))},trash(A){d.trash(A)},combineFeatures(){d.combineFeatures()},uncombineFeatures(){d.uncombineFeatures()},getMode(){return c}}}function jE(e){return[].concat(e).filter(t=>t!==void 0)}function Y4e(){const e=this;if(!(e.ctx.map&&e.ctx.map.getSource(wh.HOT)!==void 0))return m();const n=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:n});let r=[],s=[];e.isDirty?s=e.getAllIds():(r=e.getChangedIds().filter(x=>e.get(x)!==void 0),s=e.sources.hot.filter(x=>x.properties.id&&r.indexOf(x.properties.id)===-1&&e.get(x.properties.id)!==void 0).map(x=>x.properties.id)),e.sources.hot=[];const c=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(x=>{const T=x.properties.id||x.properties.parent;return r.indexOf(T)===-1});const d=c!==e.sources.cold.length||s.length>0;r.forEach(x=>i(x,"hot")),s.forEach(x=>i(x,"cold"));function i(x,T){const A=e.get(x).internal(n);e.ctx.events.currentModeRender(A,I=>{I.properties.mode=n,e.sources[T].push(I)})}d&&e.ctx.map.getSource(wh.COLD).setData({type:hi.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(wh.HOT).setData({type:hi.FEATURE_COLLECTION,features:e.sources.hot}),m();function m(){e.isDirty=!1,e.clearChangedIds()}}function Cs(e){this._features={},this._featureIds=new Rh,this._selectedFeatureIds=new Rh,this._selectedCoordinates=[],this._changedFeatureIds=new Rh,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,Y4e.call(this),this._emitSelectionChange&&(this.ctx.events.fire(ru.SELECTION_CHANGE,{features:this.getSelected().map(n=>n.toGeoJSON()),points:this.getSelectedCoordinates().map(n=>({type:hi.FEATURE,properties:{},geometry:{type:hi.POINT,coordinates:n.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(ru.RENDER,{})}))},this.isDirty=!1}Cs.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Cs.prototype.setDirty=function(){return this.isDirty=!0,this};Cs.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){const r=this.get(e);this.ctx.events.fire(ru.CREATE,{features:[r.toGeoJSON()]})}return this};Cs.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(ru.UPDATE,{action:t.action?t.action:BE.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Cs.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Cs.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Cs.prototype.getAllIds=function(){return this._featureIds.values()};Cs.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Cs.prototype.delete=function(e,t={}){const n=[];return jE(e).forEach(r=>{this._featureIds.has(r)&&(this._featureIds.delete(r),this._selectedFeatureIds.delete(r),t.silent||n.indexOf(this._features[r])===-1&&n.push(this._features[r].toGeoJSON()),delete this._features[r],this.isDirty=!0)}),n.length&&this.ctx.events.fire(ru.DELETE,{features:n}),Ire(this,t),this};Cs.prototype.get=function(e){return this._features[e]};Cs.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Cs.prototype.select=function(e,t={}){return jE(e).forEach(n=>{this._selectedFeatureIds.has(n)||(this._selectedFeatureIds.add(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),this};Cs.prototype.deselect=function(e,t={}){return jE(e).forEach(n=>{this._selectedFeatureIds.has(n)&&(this._selectedFeatureIds.delete(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),Ire(this,t),this};Cs.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Cs.prototype.setSelected=function(e,t={}){return e=jE(e),this.deselect(this._selectedFeatureIds.values().filter(n=>e.indexOf(n)===-1),{silent:t.silent}),this.select(e.filter(n=>!this._selectedFeatureIds.has(n)),{silent:t.silent}),this};Cs.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Cs.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Cs.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Cs.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Cs.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Cs.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Cs.prototype.setFeatureProperty=function(e,t,n,r={}){this.get(e).setProperty(t,n),this.featureChanged(e,{silent:r.silent,action:BE.CHANGE_PROPERTIES})};function Ire(e,t={}){const n=e._selectedCoordinates.filter(r=>e._selectedFeatureIds.has(r.feature_id));e._selectedCoordinates.length!==n.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=n}Cs.prototype.storeMapConfig=function(){Cre.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Cs.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Cs.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};const X4e=["mode","feature","mouse"];function Z4e(e){const t={};let n=null,r={mode:null,feature:null,mouse:null},s={mode:null,feature:null,mouse:null};function c(){d({mode:null,feature:null,mouse:null}),i()}function d(I){s=Object.assign(s,I)}function i(){if(!e.container)return;const I=[],k=[];X4e.forEach(B=>{s[B]!==r[B]&&(I.push(`${B}-${r[B]}`),s[B]!==null&&k.push(`${B}-${s[B]}`))}),I.length>0&&e.container.classList.remove(...I),k.length>0&&e.container.classList.add(...k),r=Object.assign(r,s)}function m(I,k={}){const B=document.createElement("button");return B.className=`${_u.CONTROL_BUTTON} ${k.className}`,B.setAttribute("title",k.title),k.container.appendChild(B),B.addEventListener("click",j=>{if(j.preventDefault(),j.stopPropagation(),j.target===n){x(),k.onDeactivate();return}T(I),k.onActivate()},!0),B}function x(){n&&(n.classList.remove(_u.ACTIVE_BUTTON),n=null)}function T(I){x();const k=t[I];k&&k&&I!=="trash"&&(k.classList.add(_u.ACTIVE_BUTTON),n=k)}function C(){const I=e.options.controls,k=document.createElement("div");return k.className=`${_u.CONTROL_GROUP} ${_u.CONTROL_BASE}`,I&&(I[xu.LINE]&&(t[xu.LINE]=m(xu.LINE,{container:k,className:_u.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(Ro.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),I[xu.POLYGON]&&(t[xu.POLYGON]=m(xu.POLYGON,{container:k,className:_u.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(Ro.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),I[xu.POINT]&&(t[xu.POINT]=m(xu.POINT,{container:k,className:_u.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(Ro.DRAW_POINT),onDeactivate:()=>e.events.trash()})),I.trash&&(t.trash=m("trash",{container:k,className:_u.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),I.combine_features&&(t.combine_features=m("combineFeatures",{container:k,className:_u.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),I.uncombine_features&&(t.uncombine_features=m("uncombineFeatures",{container:k,className:_u.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),k}function A(){Object.keys(t).forEach(I=>{const k=t[I];k.parentNode&&k.parentNode.removeChild(k),delete t[I]})}return{setActiveButton:T,queueMapClasses:d,updateMapClasses:i,clearMapClasses:c,addButtons:C,removeButtons:A}}function K4e(e){let t=null,n=null;const r={onRemove(){return e.map.off("load",r.connect),clearInterval(n),r.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",r.connect),clearInterval(n),r.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(s){if(e.map=s,e.events=G4e(e),e.ui=Z4e(e),e.container=s.getContainer(),e.store=new Cs(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=s.boxZoom.isEnabled(),s.boxZoom.disable();const c=s.dragPan.isEnabled();s.dragPan.disable(),s.dragPan.enable(),c||s.dragPan.disable()}return s.loaded()?r.connect():(s.on("load",r.connect),n=setInterval(()=>{s.loaded()&&r.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(wh.COLD,{data:{type:hi.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(wh.HOT,{data:{type:hi.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(s=>{e.map.addLayer(s)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(s=>{e.map.getLayer(s.id)&&e.map.removeLayer(s.id)}),e.map.getSource(wh.COLD)&&e.map.removeSource(wh.COLD),e.map.getSource(wh.HOT)&&e.map.removeSource(wh.HOT)}};return e.setup=r,r}const EO="#3bb2d0",CS="#fbb03b",EW="#fff",kre=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],CS,EO],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],CS,EO],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":EW}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],CS,EO]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":EW}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":CS}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":CS}}];function vP(e){return function(t){const n=t.featureTarget;return!n||!n.properties?!1:n.properties.meta===e}}function Ore(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function ux(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===El.ACTIVE&&e.featureTarget.properties.meta===bc.FEATURE}function u4(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===El.INACTIVE&&e.featureTarget.properties.meta===bc.FEATURE}function _P(e){return e.featureTarget===void 0}function d4(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===bc.FEATURE}function NE(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===bc.VERTEX}function HR(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function xP(e){return e.keyCode===27}function bP(e){return e.keyCode===13}function Q4e(){return!0}const J4e=Object.freeze(Object.defineProperty({__proto__:null,isActiveFeature:ux,isEnterKey:bP,isEscapeKey:xP,isFeature:d4,isInactiveFeature:u4,isOfMetaType:vP,isShiftDown:HR,isShiftMousedown:Ore,isTrue:Q4e,isVertex:NE,noTarget:_P},Symbol.toStringTag,{value:"Module"}));function lv(e,t){this.x=e,this.y=t}lv.prototype={clone(){return new lv(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,s=n*this.x+t*this.y;return this.x=r,this.y=s,this},_rotateAround(e,t){const n=Math.cos(e),r=Math.sin(e),s=t.x+n*(this.x-t.x)-r*(this.y-t.y),c=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=s,this.y=c,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:lv};lv.convert=function(e){if(e instanceof lv)return e;if(Array.isArray(e))return new lv(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new lv(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function h4(e,t){const n=t.getBoundingClientRect();return new lv(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function x1(e,t,n,r){return{type:hi.FEATURE,properties:{meta:bc.VERTEX,parent:e,coord_path:n,active:r?El.ACTIVE:El.INACTIVE},geometry:{type:hi.POINT,coordinates:t}}}function Lre(e,t,n){const r=t.geometry.coordinates,s=n.geometry.coordinates;if(r[1]>gj||r[1]<mj||s[1]>gj||s[1]<mj)return null;const c={lng:(r[0]+s[0])/2,lat:(r[1]+s[1])/2};return{type:hi.FEATURE,properties:{meta:bc.MIDPOINT,parent:e,lng:c.lng,lat:c.lat,coord_path:n.properties.coord_path},geometry:{type:hi.POINT,coordinates:[c.lng,c.lat]}}}function wP(e,t={},n=null){const{type:r,coordinates:s}=e.geometry,c=e.properties&&e.properties.id;let d=[];r===hi.POINT?d.push(x1(c,s,n,m(n))):r===hi.POLYGON?s.forEach((T,C)=>{i(T,n!==null?`${n}.${C}`:String(C))}):r===hi.LINE_STRING?i(s,n):r.indexOf(hi.MULTI_PREFIX)===0&&x();function i(T,C){let A="",I=null;T.forEach((k,B)=>{const j=C!=null?`${C}.${B}`:String(B),V=x1(c,k,j,m(j));if(t.midpoints&&I){const G=Lre(c,I,V);G&&d.push(G)}I=V;const H=JSON.stringify(k);A!==H&&d.push(V),B===0&&(A=H)})}function m(T){return t.selectedPaths?t.selectedPaths.indexOf(T)!==-1:!1}function x(){const T=r.replace(hi.MULTI_PREFIX,"");s.forEach((C,A)=>{const I={type:hi.FEATURE,properties:e.properties,geometry:{type:T,coordinates:C}};d=d.concat(wP(I,t,A))})}return d}const Zf={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},{LAT_MIN:KM,LAT_MAX:QM,LAT_RENDERED_MIN:CW,LAT_RENDERED_MAX:MW,LNG_MIN:AW,LNG_MAX:RW}=Mre;function eVe(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],n=[e.geometry.coordinates].flat(t),r=n.map(i=>i[0]),s=n.map(i=>i[1]),c=i=>Math.min.apply(null,i),d=i=>Math.max.apply(null,i);return[c(r),c(s),d(r),d(s)]}function f4(e,t){let n=KM,r=QM,s=KM,c=QM,d=RW,i=AW;e.forEach(x=>{const T=eVe(x),C=T[1],A=T[3],I=T[0],k=T[2];C>n&&(n=C),A<r&&(r=A),A>s&&(s=A),C<c&&(c=C),I<d&&(d=I),k>i&&(i=k)});const m=t;return n+m.lat>MW&&(m.lat=MW-n),s+m.lat>QM&&(m.lat=QM-s),r+m.lat<CW&&(m.lat=CW-r),c+m.lat<KM&&(m.lat=KM-c),d+m.lng<=AW&&(m.lng+=Math.ceil(Math.abs(m.lng)/360)*360),i+m.lng>=RW&&(m.lng-=Math.ceil(Math.abs(m.lng)/360)*360),m}function p4(e,t){const n=f4(e.map(r=>r.toGeoJSON()),t);e.forEach(r=>{const s=r.getCoordinates(),c=x=>{const T={lng:x[0]+n.lng,lat:x[1]+n.lat};return[T.lng,T.lat]},d=x=>x.map(T=>c(T)),i=x=>x.map(T=>d(T));let m;r.type===hi.POINT?m=c(s):r.type===hi.LINE_STRING||r.type===hi.MULTI_POINT?m=s.map(c):r.type===hi.POLYGON||r.type===hi.MULTI_LINE_STRING?m=s.map(d):r.type===hi.MULTI_POLYGON&&(m=s.map(i)),r.incomingCoords(m)})}const _s={};_s.onSetup=function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(n=>this.getFeature(n)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};_s.fireUpdate=function(){this.fire(ru.UPDATE,{action:BE.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};_s.fireActionable=function(){const e=this.getSelected(),t=e.filter(c=>this.isInstanceOf("MultiFeature",c));let n=!1;if(e.length>1){n=!0;const c=e[0].type.replace("Multi","");e.forEach(d=>{d.type.replace("Multi","")!==c&&(n=!1)})}const r=t.length>0,s=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:r,trash:s})};_s.getUniqueIds=function(e){return e.length?e.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,r)=>(n.add(r),n),new Rh).values():[]};_s.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};_s.onStop=function(){Zf.enable(this)};_s.onMouseMove=function(e,t){return d4(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};_s.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};_s.onTap=_s.onClick=function(e,t){if(_P(t))return this.clickAnywhere(e,t);if(vP(bc.VERTEX)(t))return this.clickOnVertex(e,t);if(d4(t))return this.clickOnFeature(e,t)};_s.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(n=>this.doRender(n))),Zf.enable(this),this.stopExtendedInteractions(e)};_s.clickOnVertex=function(e,t){this.changeMode(Ro.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:Vs.MOVE})};_s.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};_s.clickOnFeature=function(e,t){Zf.disable(this),this.stopExtendedInteractions(e);const n=HR(t),r=this.getSelectedIds(),s=t.featureTarget.properties.id,c=this.isSelected(s);if(!n&&c&&this.getFeature(s).type!==hi.POINT)return this.changeMode(Ro.DIRECT_SELECT,{featureId:s});c&&n?(this.deselect(s),this.updateUIClasses({mouse:Vs.POINTER}),r.length===1&&Zf.enable(this)):!c&&n?(this.select(s),this.updateUIClasses({mouse:Vs.MOVE})):!c&&!n&&(r.forEach(d=>this.doRender(d)),this.setSelected(s),this.updateUIClasses({mouse:Vs.MOVE})),this.doRender(s)};_s.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),ux(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&Ore(t))return this.startBoxSelect(e,t)};_s.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=h4(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};_s.onTouchStart=function(e,t){if(ux(t))return this.startOnActiveFeature(e,t)};_s.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};_s.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:Vs.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(_u.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=h4(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),s=Math.max(e.boxSelectStartLocation.x,n.x),c=Math.min(e.boxSelectStartLocation.y,n.y),d=Math.max(e.boxSelectStartLocation.y,n.y),i=`translate(${r}px, ${c}px)`;e.boxSelectElement.style.transform=i,e.boxSelectElement.style.WebkitTransform=i,e.boxSelectElement.style.width=`${s-r}px`,e.boxSelectElement.style.height=`${d-c}px`};_s.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};p4(this.getSelected(),n),e.dragMoveLocation=t.lngLat};_s.onTouchEnd=_s.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,h4(t.originalEvent,this.map.getContainer())],r=this.featuresAt(null,n,"click"),s=this.getUniqueIds(r).filter(c=>!this.isSelected(c));s.length&&(this.select(s),s.forEach(c=>this.doRender(c)),this.updateUIClasses({mouse:Vs.MOVE}))}this.stopExtendedInteractions(e)};_s.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?El.ACTIVE:El.INACTIVE,n(t),this.fireActionable(),!(t.properties.active!==El.ACTIVE||t.geometry.type===hi.POINT)&&wP(t).forEach(n)};_s.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};_s.onCombineFeatures=function(){const e=this.getSelected();if(e.length===0||e.length<2)return;const t=[],n=[],r=e[0].type.replace("Multi","");for(let s=0;s<e.length;s++){const c=e[s];if(c.type.replace("Multi","")!==r)return;c.type.includes("Multi")?c.getCoordinates().forEach(d=>{t.push(d)}):t.push(c.getCoordinates()),n.push(c.toGeoJSON())}if(n.length>1){const s=this.newFeature({type:hi.FEATURE,properties:n[0].properties,geometry:{type:`Multi${r}`,coordinates:t}});this.addFeature(s),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([s.id]),this.fire(ru.COMBINE_FEATURES,{createdFeatures:[s.toGeoJSON()],deletedFeatures:n})}this.fireActionable()};_s.onUncombineFeatures=function(){const e=this.getSelected();if(e.length===0)return;const t=[],n=[];for(let r=0;r<e.length;r++){const s=e[r];this.isInstanceOf("MultiFeature",s)&&(s.getFeatures().forEach(c=>{this.addFeature(c),c.properties=s.properties,t.push(c.toGeoJSON()),this.select([c.id])}),this.deleteFeature(s.id,{silent:!0}),n.push(s.toGeoJSON()))}t.length>1&&this.fire(ru.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const zre=vP(bc.VERTEX),Fre=vP(bc.MIDPOINT),xs={};xs.fireUpdate=function(){this.fire(ru.UPDATE,{action:BE.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};xs.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};xs.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};xs.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};xs.onVertex=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);!HR(t)&&r===-1?e.selectedCoordPaths=[n.coord_path]:HR(t)&&r===-1&&e.selectedCoordPaths.push(n.coord_path);const s=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(s)};xs.onMidpoint=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]};xs.pathsToCoordinates=function(e,t){return t.map(n=>({feature_id:e,coord_path:n}))};xs.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};xs.dragFeature=function(e,t,n){p4(this.getSelected(),n),e.dragMoveLocation=t.lngLat};xs.dragVertex=function(e,t,n){const r=e.selectedCoordPaths.map(d=>e.feature.getCoordinate(d)),s=r.map(d=>({type:hi.FEATURE,properties:{},geometry:{type:hi.POINT,coordinates:d}})),c=f4(s,n);for(let d=0;d<r.length;d++){const i=r[d];e.feature.updateCoordinate(e.selectedCoordPaths[d],i[0]+c.lng,i[1]+c.lat)}};xs.clickNoTarget=function(){this.changeMode(Ro.SIMPLE_SELECT)};xs.clickInactive=function(){this.changeMode(Ro.SIMPLE_SELECT)};xs.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};xs.onSetup=function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===hi.POINT)throw new TypeError("direct_select mode doesn't handle point features");const r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),Zf.disable(this),this.setActionableState({trash:!0}),r};xs.onStop=function(){Zf.enable(this),this.clearSelectedCoordinates()};xs.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=El.ACTIVE,n(t),wP(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=El.INACTIVE,n(t)),this.fireActionable(e)};xs.onTrash=function(e){e.selectedCoordPaths.sort((t,n)=>n.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(Ro.SIMPLE_SELECT,{}))};xs.onMouseMove=function(e,t){const n=ux(t),r=zre(t),s=Fre(t),c=e.selectedCoordPaths.length===0;return n&&c?this.updateUIClasses({mouse:Vs.MOVE}):r&&!c?this.updateUIClasses({mouse:Vs.MOVE}):this.updateUIClasses({mouse:Vs.NONE}),(r||n||s)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};xs.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};xs.onTouchStart=xs.onMouseDown=function(e,t){if(zre(t))return this.onVertex(e,t);if(ux(t))return this.onFeature(e,t);if(Fre(t))return this.onMidpoint(e,t)};xs.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat};xs.onClick=function(e,t){if(_P(t))return this.clickNoTarget(e,t);if(ux(t))return this.clickActiveFeature(e,t);if(u4(t))return this.clickInactive(e,t);this.stopDragging(e)};xs.onTap=function(e,t){if(_P(t))return this.clickNoTarget(e,t);if(ux(t))return this.clickActiveFeature(e,t);if(u4(t))return this.clickInactive(e,t)};xs.onTouchEnd=xs.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const _m={};_m.onSetup=function(){const e=this.newFeature({type:hi.FEATURE,properties:{},geometry:{type:hi.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Vs.ADD}),this.activateUIButton(xu.POINT),this.setActionableState({trash:!0}),{point:e}};_m.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT)};_m.onTap=_m.onClick=function(e,t){this.updateUIClasses({mouse:Vs.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(ru.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.point.id]})};_m.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};_m.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.point.id;if(t.properties.active=r?El.ACTIVE:El.INACTIVE,!r)return n(t)};_m.onTrash=_m.stopDrawingAndRemove;_m.onKeyUp=function(e,t){if(xP(t)||bP(t))return this.stopDrawingAndRemove(e,t)};function WR(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}const Kf={};Kf.onSetup=function(){const e=this.newFeature({type:hi.FEATURE,properties:{},geometry:{type:hi.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Zf.disable(this),this.updateUIClasses({mouse:Vs.ADD}),this.activateUIButton(xu.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};Kf.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&WR(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:Vs.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};Kf.clickOnVertex=function(e){return this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};Kf.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),NE(t)&&this.updateUIClasses({mouse:Vs.POINTER})};Kf.onTap=Kf.onClick=function(e,t){return NE(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};Kf.onKeyUp=function(e,t){xP(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT)):bP(t)&&this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};Kf.onStop=function(e){this.updateUIClasses({mouse:Vs.NONE}),Zf.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(ru.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT,{},{silent:!0})))};Kf.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.polygon.id;if(t.properties.active=r?El.ACTIVE:El.INACTIVE,!r)return n(t);if(t.geometry.coordinates.length===0)return;const s=t.geometry.coordinates[0].length;if(!(s<3)){if(t.properties.meta=bc.FEATURE,n(x1(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),s>3){const c=t.geometry.coordinates[0].length-3;n(x1(e.polygon.id,t.geometry.coordinates[0][c],`0.${c}`,!1))}if(s<=4){const c=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:hi.FEATURE,properties:t.properties,geometry:{coordinates:c,type:hi.LINE_STRING}}),s===3)return}return n(t)}};Kf.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT)};const Qf={};Qf.onSetup=function(e){e=e||{};const t=e.featureId;let n,r,s="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let c=e.from;if(c&&c.type==="Feature"&&c.geometry&&c.geometry.type==="Point"&&(c=c.geometry),c&&c.type==="Point"&&c.coordinates&&c.coordinates.length===2&&(c=c.coordinates),!c||!Array.isArray(c))throw new Error("Please use the `from` property to indicate which point to continue the line from");const d=n.coordinates.length-1;if(n.coordinates[d][0]===c[0]&&n.coordinates[d][1]===c[1])r=d+1,n.addCoordinate(r,...n.coordinates[d]);else if(n.coordinates[0][0]===c[0]&&n.coordinates[0][1]===c[1])s="backwards",r=0,n.addCoordinate(r,...n.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else n=this.newFeature({type:hi.FEATURE,properties:{},geometry:{type:hi.LINE_STRING,coordinates:[]}}),r=0,this.addFeature(n);return this.clearSelectedFeatures(),Zf.disable(this),this.updateUIClasses({mouse:Vs.ADD}),this.activateUIButton(xu.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:r,direction:s}};Qf.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&WR(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&WR(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:Vs.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};Qf.clickOnVertex=function(e){return this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.line.id]})};Qf.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),NE(t)&&this.updateUIClasses({mouse:Vs.POINTER})};Qf.onTap=Qf.onClick=function(e,t){if(NE(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};Qf.onKeyUp=function(e,t){bP(t)?this.changeMode(Ro.SIMPLE_SELECT,{featureIds:[e.line.id]}):xP(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT))};Qf.onStop=function(e){Zf.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(ru.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT,{},{silent:!0})))};Qf.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Ro.SIMPLE_SELECT)};Qf.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.line.id;if(t.properties.active=r?El.ACTIVE:El.INACTIVE,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=bc.FEATURE,n(x1(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),n(t))};const Bre={simple_select:_s,direct_select:xs,draw_point:_m,draw_polygon:Kf,draw_line_string:Qf},tVe={defaultMode:Ro.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:kre,modes:Bre,controls:{},userProperties:!1,suppressAPIEvents:!0},nVe={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},rVe={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function DW(e,t){return e.map(n=>n.source?n:Object.assign({},n,{id:`${n.id}.${t}`,source:t==="hot"?wh.HOT:wh.COLD}))}function iVe(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},rVe,e.controls):t.controls=Object.assign({},nVe,e.controls),t=Object.assign({},tVe,t),t.styles=DW(t.styles,"cold").concat(DW(t.styles,"hot")),t}var CO,PW;function oVe(){return PW||(PW=1,CO=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,c;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(c=Object.keys(t),r=c.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[s]))return!1;for(s=r;s--!==0;){var d=c[s];if(!e(t[d],n[d]))return!1}return!0}return t!==t&&n!==n}),CO}var sVe=oVe();const IW=Ls(sVe);var MO,kW;function aVe(){if(kW)return MO;kW=1,MO=t;var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function t(n){if(!n||!n.type)return null;var r=e[n.type];if(!r)return null;if(r==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]};if(r==="feature")return{type:"FeatureCollection",features:[n]};if(r==="featurecollection")return n}return MO}var lVe=aVe();const cVe=Ls(lVe);function jre(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(n=>n).sort())===JSON.stringify(t.map(n=>n).sort())}const uVe={Polygon:Cd,LineString:wm,Point:Lv,MultiPolygon:Jc,MultiLineString:Jc,MultiPoint:Jc};function dVe(e,t){t.modes=Ro;const n=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(r){return _1.click({point:r},null,e).map(c=>c.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:hi.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(r=>e.store.get(r)).map(r=>r.toGeoJSON())}},t.getSelectedPoints=function(){return{type:hi.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(r=>({type:hi.FEATURE,properties:{},geometry:{type:hi.POINT,coordinates:r.coordinates}}))}},t.set=function(r){if(r.type===void 0||r.type!==hi.FEATURE_COLLECTION||!Array.isArray(r.features))throw new Error("Invalid FeatureCollection");const s=e.store.createRenderBatch();let c=e.store.getAllIds().slice();const d=t.add(r),i=new Rh(d);return c=c.filter(m=>!i.has(m)),c.length&&t.delete(c),s(),d},t.add=function(r){const c=JSON.parse(JSON.stringify(cVe(r))).features.map(d=>{if(d.id=d.id||c4(),d.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(d.id)===void 0||e.store.get(d.id).type!==d.geometry.type){const i=uVe[d.geometry.type];if(i===void 0)throw new Error(`Invalid geometry type: ${d.geometry.type}.`);const m=new i(e,d);e.store.add(m,{silent:n})}else{const i=e.store.get(d.id),m=i.properties;i.properties=d.properties,IW(m,d.properties)||e.store.featureChanged(i.id,{silent:n}),IW(i.getCoordinates(),d.geometry.coordinates)||i.incomingCoords(d.geometry.coordinates)}return d.id});return e.store.render(),c},t.get=function(r){const s=e.store.get(r);if(s)return s.toGeoJSON()},t.getAll=function(){return{type:hi.FEATURE_COLLECTION,features:e.store.getAll().map(r=>r.toGeoJSON())}},t.delete=function(r){return e.store.delete(r,{silent:n}),t.getMode()===Ro.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(Ro.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:n}),t.getMode()===Ro.DIRECT_SELECT?e.events.changeMode(Ro.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.changeMode=function(r,s={}){return r===Ro.SIMPLE_SELECT&&t.getMode()===Ro.SIMPLE_SELECT?(jre(s.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(s.featureIds,{silent:n}),e.store.render()),t):(r===Ro.DIRECT_SELECT&&t.getMode()===Ro.DIRECT_SELECT&&s.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(r,s,{silent:n}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:n}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:n}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:n}),t},t.setFeatureProperty=function(r,s,c){return e.store.setFeatureProperty(r,s,c,{silent:n}),t},t}const hVe=Object.freeze(Object.defineProperty({__proto__:null,CommonSelectors:J4e,ModeHandler:fj,StringSet:Rh,constrainFeatureMovement:f4,createMidPoint:Lre,createSupplementaryPoints:wP,createVertex:x1,doubleClickZoom:Zf,euclideanDistance:l4,featuresAt:_1,getFeatureAtAndSetCursors:OA,isClick:yj,isEventAtCoordinates:WR,isTap:vj,mapEventToBoundingBox:Rre,moveFeatures:p4,sortFeatures:Are,stringSetsAreEqual:jre,theme:kre,toDenseArray:jE},Symbol.toStringTag,{value:"Module"})),fVe=function(e,t){e=iVe(e);const n={options:e};t=dVe(n,t),n.api=t;const r=K4e(n);return t.onAdd=r.onAdd,t.onRemove=r.onRemove,t.types=xu,t.options=e,t};function SP(e){fVe(e,this)}SP.modes=Bre;SP.constants=Mre;SP.lib=hVe;Sh.accessToken="YOUR_MAPBOX_ACCESS_TOKEN";const pVe=Gi(z.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),mVe=({project:e})=>{const[t,n]=Rt.useState(null),r=!!t,s=bv(),c=m=>n(m.currentTarget),d=()=>n(null),i=()=>{s("1")};return z.jsxs(L0,{elevation:3,sx:{position:"relative",width:250,borderRadius:3,overflow:"hidden",cursor:"pointer",transition:"0.3s","&:hover":{boxShadow:6}},children:[z.jsx(nJ,{component:"img",height:"140",image:e.image,alt:e.title,sx:{objectFit:"cover"}}),z.jsxs(SD,{sx:{paddingBottom:"8px !important"},children:[z.jsx(En,{variant:"subtitle1",fontWeight:600,children:e.title}),z.jsx(En,{variant:"body2",color:"text.secondary",children:e.description})]}),z.jsxs(Pn,{sx:{position:"absolute",bottom:8,right:8},children:[z.jsx(Kc,{onClick:c,children:z.jsx(pVe,{fontSize:"small"})}),z.jsxs(yJ,{anchorEl:t,open:r,onClose:d,children:[z.jsx(ko,{onClick:i,children:"View"}),z.jsx(ko,{onClick:d,children:"Edit"}),z.jsx(ko,{onClick:d,children:"Delete"})]})]})]})},gVe=[{name:"User I",role:"Project Manager"},{name:"User II",role:"Lead Engineer"},{name:"User III",role:"GIS Specialist"}],yVe=[{title:"Day I",description:"Track changes over time",image:"https://picsum.photos/200/300?1"},{title:"Day II",description:"High-res structural analysis",image:"https://picsum.photos/200/300?2"},{title:"Day III",description:"Thermal imaging results",image:"https://picsum.photos/200/300?3"}];function vVe(){const[e,t]=U.useState(""),[n,r]=U.useState(["someone@example.com"]),s=Zo(),c=i=>{i.key==="Enter"&&e&&(i.preventDefault(),n.includes(e)||r([...n,e]),t(""))},d=i=>{r(n.filter(m=>m!==i))};return z.jsxs(Pn,{p:4,children:[z.jsx(En,{variant:"h2",fontWeight:600,gutterBottom:!0,children:"Project I Overview"}),z.jsxs(Ns,{direction:"row",spacing:4,mb:4,children:[z.jsxs(Pn,{flex:1,children:[z.jsx(En,{variant:"h5",gutterBottom:!0,children:"Project Details"}),z.jsxs(Ns,{spacing:1,children:[z.jsx(En,{children:"Name: Project I"}),z.jsx(En,{children:"Status: In Progress"}),z.jsx(En,{children:"Remarks: Site is under survey"})]})]}),z.jsxs(Pn,{flex:1,children:[z.jsx(En,{variant:"h5",gutterBottom:!0,children:"Collaborators"}),z.jsx(Rv,{dense:!0,children:gVe.map((i,m)=>z.jsxs(YN,{children:[z.jsx(pJ,{children:z.jsx(sx,{children:i.name.charAt(0)})}),z.jsx(XD,{primary:i.name,secondary:i.role})]},m))})]})]}),z.jsxs(Pn,{mb:5,children:[z.jsx(En,{variant:"h6",gutterBottom:!0,children:"Invite More People"}),z.jsxs(tu,{sx:{...s.typography.customInput,width:300},children:[z.jsx(Xg,{htmlFor:"teamInvite",children:"Email"}),z.jsx(ZD,{id:"teamInvite",label:"Email",value:e,onChange:i=>t(i.target.value),onKeyDown:c,sx:{mb:2}})]}),z.jsx(Ns,{direction:"row",spacing:1,flexWrap:"wrap",mb:2,children:n.map((i,m)=>z.jsx(yd,{label:i,onDelete:()=>d(i),color:"primary"},m))}),z.jsx(Wi,{variant:"contained",color:"secondary",children:"Send Invite"})]}),z.jsxs(Pn,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[z.jsx(En,{variant:"h4",children:"Work Days"}),z.jsx(Wi,{variant:"contained",color:"secondary",startIcon:z.jsx(N5,{}),children:"Create New Entry"})]}),z.jsx(Ii,{container:!0,spacing:3,children:yVe.map((i,m)=>z.jsx(mVe,{project:i}))})]})}Sh.accessToken=void 0;const Nre=Gi(z.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),OW=Gi(z.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"})),_Ve=e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":return z.jsx($ke,{size:32,color:"red"});case"doc":case"docx":return z.jsx(Uke,{size:32,color:"blue"});case"xls":case"xlsx":return z.jsx(Nke,{size:32,color:"green"});case"txt":return z.jsx(Vke,{size:32});default:return z.jsx(qke,{size:32})}},Cb=()=>new Date().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});function Vre(){const[e,t]=U.useState([{name:"report.pdf",uploadedAt:Cb()},{name:"site-notes.docx",uploadedAt:Cb()},{name:"data-sheet.xlsx",uploadedAt:Cb()}]),[n,r]=U.useState([{name:"Sample Folder",createdAt:Cb()}]),[s,c]=U.useState(!1),[d,i]=U.useState(""),[m,x]=U.useState(0),[T,C]=U.useState(""),[A,I]=U.useState("latest"),k=Zo(),{enqueueSnackbar:B}=k1(),[j,V]=U.useState(!1),[H,G]=U.useState(null),X=we=>{const Me=we.target.files[0];if(!Me)return;x(0);const Se=setInterval(()=>{x(Ae=>(Ae>=100&&(clearInterval(Se),t(_e=>[..._e,{name:Me.name,uploadedAt:Cb()}])),Math.min(Ae+10,100)))},200)},Q=we=>{B(`Downloading "${we.name}"...`,{variant:"info"}),setTimeout(()=>{B(`"${we.name}" downloaded`,{variant:"success"})},1500)},ee=()=>{d.trim()&&!n.find(we=>we.name===d.trim())&&(r([...n,{name:d.trim(),createdAt:Cb()}]),i(""),c(!1))},ce=we=>{G(we),V(!0)},fe=()=>{r(n.filter(we=>we.name!==H)),G(null),V(!1)},ue=()=>{G(null),V(!1)},ae=e.filter(we=>we.name.toLowerCase().includes(T.toLowerCase())).sort((we,Me)=>A==="az"?we.name.localeCompare(Me.name):A==="za"?Me.name.localeCompare(we.name):0),xe=[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",to:"/project/1/View",icon:ax},{title:"Project Files",icon:Ete}];return z.jsxs(Ph,{children:[z.jsxs(Pn,{children:[z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Project Files"}),z.jsx(ry,{links:xe,card:!0,custom:!0,rightAlign:!1})]}),z.jsxs(SR,{open:s,onClose:()=>c(!1),children:[z.jsx(xB,{children:"Create New Folder"}),z.jsx(ER,{children:z.jsx(Vi,{autoFocus:!0,margin:"dense",label:"Folder Name",fullWidth:!0,value:d,onChange:we=>i(we.target.value),onKeyDown:we=>{we.key==="Enter"&&ee()}})}),z.jsxs(TR,{children:[z.jsx(Wi,{onClick:()=>c(!1),children:"Cancel"}),z.jsx(Wi,{onClick:ee,variant:"contained",children:"Create"})]})]}),z.jsxs(Ns,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[z.jsx(Vi,{label:"Search files...",variant:"outlined",size:"small",value:T,onChange:we=>C(we.target.value),sx:{width:{xs:"100%",sm:300}}}),z.jsxs(Vi,{select:!0,label:"Sort By",variant:"outlined",size:"small",value:A,onChange:we=>I(we.target.value),sx:{width:150},children:[z.jsx(ko,{value:"latest",children:"Latest"}),z.jsx(ko,{value:"extension",children:"Extension"}),z.jsx(ko,{value:"az",children:"A–Z"}),z.jsx(ko,{value:"za",children:"Z–A"})]})]}),z.jsxs(Ns,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[z.jsx(Wi,{variant:"contained",startIcon:z.jsx(OW,{}),onClick:()=>c(!0),children:"Create Folder"}),z.jsxs(Wi,{variant:"contained",component:"label",children:["Upload Files",z.jsx("input",{type:"file",hidden:!0,onChange:X})]})]}),m>0&&m<100&&z.jsx(fN,{variant:"determinate",value:m,sx:{mb:3,borderRadius:2}}),z.jsx(En,{variant:"h5",gutterBottom:!0,children:"Explorer"}),z.jsxs(Ii,{container:!0,spacing:2,sx:{mb:2},children:[n.map(we=>z.jsx(Ii,{item:!0,xs:12,sm:6,md:4,children:z.jsxs(fa,{elevation:2,sx:{p:2,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[z.jsxs(Ns,{direction:"row",spacing:2,alignItems:"center",children:[z.jsx(OW,{color:"primary"}),z.jsxs(Pn,{children:[z.jsx(En,{variant:"subtitle1",fontWeight:"bold",children:we.name}),z.jsxs(En,{variant:"caption",color:"text.secondary",children:["Created on: ",we.createdAt]})]})]}),z.jsx(Kc,{"aria-label":"delete",onClick:()=>ce(we.name),children:z.jsx(Nre,{color:"error"})})]})},"folder-"+we.name)),z.jsxs(SR,{open:j,onClose:ue,children:[z.jsx(xB,{children:"Delete Folder?"}),z.jsx(ER,{children:z.jsxs(En,{children:["Are you sure you want to delete the folder ",z.jsx("b",{children:H}),"?",z.jsx("br",{}),z.jsx("br",{}),z.jsx("b",{children:"All files in this folder will be deleted."})]})}),z.jsxs(TR,{children:[z.jsx(Wi,{onClick:ue,children:"Cancel"}),z.jsx(Wi,{onClick:fe,color:"error",variant:"contained",children:"Delete"})]})]}),ae.map(we=>z.jsx(Ii,{item:!0,xs:12,sm:6,md:4,children:z.jsx(fa,{elevation:3,onClick:()=>Q(we),sx:{p:2,borderRadius:2,cursor:"pointer",transition:"all 0.2s ease","&:hover":{boxShadow:`0 0 0 2px ${k.palette.primary.main}`}},children:z.jsxs(Ns,{direction:"row",spacing:2,alignItems:"center",children:[_Ve(we.name),z.jsxs(Pn,{children:[z.jsx(En,{variant:"subtitle1",fontWeight:"bold",children:we.name}),z.jsxs(En,{variant:"caption",color:"text.secondary",children:["Uploaded on: ",we.uploadedAt]})]})]})})},"file-"+we.name))]})]})}function xVe(){return z.jsxs(Pn,{children:[z.jsx(En,{variant:"h6",children:"Other Tab"}),z.jsx(En,{children:"This is an empty tab for future content."})]})}var $re=U.forwardRef(({transition:e,...t},n)=>{let r={position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:e?`clip-path ${e}`:void 0,userSelect:"none",willChange:"clip-path, transition",KhtmlUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"};return z.jsx("div",{...t,style:r,"data-rcs":"clip-item",ref:n})});$re.displayName="ContainerClip";var Ure=U.forwardRef(({children:e,disabled:t,portrait:n,position:r,transition:s},c)=>{let d={position:"absolute",top:0,width:n?"100%":void 0,height:n?void 0:"100%",background:"none",border:0,padding:0,pointerEvents:"all",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:0,transform:n?"translate3d(0, -50% ,0)":"translate3d(-50%, 0, 0)",transition:s?`${n?"top":"left"} ${s}`:void 0};return z.jsx("button",{ref:c,"aria-label":"Drag to move or focus and use arrow keys","aria-orientation":n?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r,"data-rcs":"handle-container",disabled:t,role:"slider",style:d,children:e})});Ure.displayName="ThisHandleContainer";var LW=({flip:e})=>z.jsx("div",{className:"__rcs-handle-arrow",style:{width:0,height:0,borderTop:"8px solid transparent",borderRight:"10px solid",borderBottom:"8px solid transparent",transform:e?"rotate(180deg)":void 0}}),bVe=({className:e="__rcs-handle-root",disabled:t,buttonStyle:n,linesStyle:r,portrait:s,style:c,...d})=>{let i={display:"flex",flexDirection:s?"row":"column",placeItems:"center",height:"100%",cursor:t?"not-allowed":s?"ns-resize":"ew-resize",pointerEvents:"none",color:"#fff",...c},m={flexGrow:1,height:s?2:"100%",width:s?"100%":2,backgroundColor:"currentColor",pointerEvents:"auto",boxShadow:"0 0 4px rgba(0,0,0,.5)",...r},x={display:"grid",gridAutoFlow:"column",gap:8,placeContent:"center",flexShrink:0,width:56,height:56,borderRadius:"50%",borderStyle:"solid",borderWidth:2,pointerEvents:"auto",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",backgroundColor:"rgba(0, 0, 0, 0.125)",boxShadow:"0 0 4px rgba(0,0,0,.35)",transform:s?"rotate(90deg)":void 0,...n};return z.jsxs("div",{...d,className:e,style:i,children:[z.jsx("div",{className:"__rcs-handle-line",style:m}),z.jsxs("div",{className:"__rcs-handle-button",style:x,children:[z.jsx(LW,{}),z.jsx(LW,{flip:!0})]}),z.jsx("div",{className:"__rcs-handle-line",style:m})]})},qre=(e=>(e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e))(qre||{}),wVe=({boxSizing:e="border-box",objectFit:t="cover",objectPosition:n="center center",...r}={})=>({display:"block",width:"100%",height:"100%",maxWidth:"100%",boxSizing:e,objectFit:t,objectPosition:n,...r}),SVe=e=>{let t=U.useRef(e);return U.useEffect(()=>{t.current=e}),t.current},AO=(e,t,n,r)=>{let s=U.useRef();U.useEffect(()=>{s.current=t},[t]),U.useEffect(()=>{if(!(n&&n.addEventListener))return;let c=d=>s.current&&s.current(d);return n.addEventListener(e,c,r),()=>{n.removeEventListener(e,c,r)}},[e,n,r])},TVe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?U.useLayoutEffect:U.useEffect,EVe=(e,t)=>{let n=U.useRef(),r=U.useCallback(()=>{e.current&&n.current&&n.current.observe(e.current)},[e]);TVe(()=>(n.current=new ResizeObserver(([s])=>t(s.contentRect)),r(),()=>{n.current&&n.current.disconnect()}),[t,r])},JM={capture:!1,passive:!0},RO={capture:!0,passive:!1},CVe=e=>{e.preventDefault(),e.currentTarget.focus()},m4=U.forwardRef(({boundsPadding:e=0,browsingContext:t=globalThis,changePositionOnHover:n=!1,disabled:r=!1,handle:s,itemOne:c,itemTwo:d,keyboardIncrement:i="5%",onlyHandleDraggable:m=!1,onPositionChange:x,portrait:T=!1,position:C=50,style:A,transition:I,...k},B)=>{let j=U.useRef(null),V=U.useRef(null),H=U.useRef(null),G=U.useRef(C),[X,Q]=U.useState(!1),[ee,ce]=U.useState(!0),fe=U.useRef(!1),[ue,ae]=U.useState(),xe=SVe(C),we=U.useCallback(function({x:He,y:dt,isOffset:gt}){let Nt=j.current,wt=H.current,ot=V.current,{width:st,height:St,left:Dt,top:Et}=Nt.getBoundingClientRect();if(st===0||St===0)return;let yt=T?gt?dt-Et-t.scrollY:dt:gt?He-Dt-t.scrollX:He,Lt=Math.min(Math.max(yt/(T?St:st)*100,0),100),Ct=T?St/(Nt.offsetHeight||1):st/(Nt.offsetWidth||1),Wt=e*Ct/(T?St:st)*100,fn=Math.min(Math.max(Lt,Wt*Ct),100-Wt*Ct);G.current=Lt,wt.setAttribute("aria-valuenow",`${Math.round(G.current)}`),wt.style.top=T?`${fn}%`:"0",wt.style.left=T?"0":`${fn}%`,ot.style.clipPath=T?`inset(${fn}% 0 0 0)`:`inset(0 0 0 ${fn}%)`,x&&x(G.current)},[e,x,T,t]);U.useEffect(()=>{let{width:He,height:dt}=j.current.getBoundingClientRect(),gt=C===xe?G.current:C;we({x:He/100*gt,y:dt/100*gt})},[e,C,T,xe,we]);let Me=U.useCallback(He=>{He.preventDefault(),!(r||He.button!==0)&&(we({isOffset:!0,x:He.pageX,y:He.pageY}),Q(!0),ce(!0))},[r,we]),Se=U.useCallback(function(He){we({isOffset:!0,x:He.pageX,y:He.pageY}),ce(!1)},[we]),Ae=U.useCallback(()=>{Q(!1),ce(!0)},[]),_e=U.useCallback(({width:He,height:dt})=>{let{width:gt,height:Nt}=j.current.getBoundingClientRect();we({x:He/100*G.current*gt/He,y:dt/100*G.current*Nt/dt})},[we]),Pe=U.useCallback(He=>{if(!Object.values(qre).includes(He.key))return;He.preventDefault(),ce(!0);let{top:dt,left:gt}=H.current.getBoundingClientRect(),{width:Nt,height:wt}=j.current.getBoundingClientRect(),ot=typeof i=="string"?parseFloat(i):i/Nt*100,st=T?He.key==="ArrowLeft"||He.key==="ArrowDown":He.key==="ArrowRight"||He.key==="ArrowUp",St=Math.min(Math.max(st?G.current+ot:G.current-ot,0),100);we({x:T?gt:Nt*St/100,y:T?wt*St/100:dt})},[i,T,we]);U.useEffect(()=>{ae(m?H.current:j.current)},[m]),U.useEffect(()=>{let He=j.current,dt=()=>{X||Ae()};return n&&(He.addEventListener("pointermove",Se,JM),He.addEventListener("pointerleave",dt,JM)),()=>{He.removeEventListener("pointermove",Se),He.removeEventListener("pointerleave",dt)}},[n,Se,Ae,X]),U.useEffect(()=>(X&&!fe.current&&(t.addEventListener("pointermove",Se,JM),t.addEventListener("pointerup",Ae,JM),fe.current=!0),()=>{fe.current&&(t.removeEventListener("pointermove",Se),t.removeEventListener("pointerup",Ae),fe.current=!1)}),[Se,Ae,X,t]),U.useImperativeHandle(B,()=>({rootContainer:j.current,handleContainer:H.current,setPosition(He){let{width:dt,height:gt}=j.current.getBoundingClientRect();we({x:dt/100*He,y:gt/100*He})}}),[we]),EVe(j,_e),AO("keydown",Pe,H.current,RO),AO("click",CVe,H.current,RO),AO("pointerdown",Me,ue,RO);let We=s||z.jsx(bVe,{disabled:r,portrait:T}),Fe=ee?I:void 0,Ce={position:"relative",display:"flex",overflow:"hidden",cursor:X?T?"ns-resize":"ew-resize":void 0,touchAction:"none",userSelect:"none",KhtmlUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",...A};return z.jsxs("div",{...k,ref:j,style:Ce,"data-rcs":"root",children:[c,z.jsx($re,{ref:V,transition:Fe,children:d}),z.jsx(Ure,{disabled:r,portrait:T,position:Math.round(G.current),ref:H,transition:Fe,children:We})]})});m4.displayName="ReactCompareSlider";var MVe=U.forwardRef(({style:e,...t},n)=>{let r=wVe(e);return z.jsx("img",{ref:n,...t,style:r,"data-rcs":"image"})});MVe.displayName="ReactCompareSliderImage";var eA={},Mb={},Hs={},DO={},zW;function g4(){return zW||(zW=1,function(e){function t(d,i,m){var x=i.slidesToShow,T=i.currentSlide;return m.length>2*x?d+2*x:T>=m.length?m.length+d:d}function n(d,i){if(i.length>2*d){for(var m={},x=i.length-2*d,T=i.length-x,C=x,A=0;A<T;A++)m[A]=C,C++;var I=i.length+T,k=I+i.slice(0,2*d).length,B=0;for(A=I;A<=k;A++)m[A]=B,B++;var j=I,V=0;for(A=T;A<j;A++)m[A]=V,V++;return m}m={};var H=3*i.length,G=0;for(A=0;A<H;A++)m[A]=G,++G===i.length&&(G=0);return m}function r(d,i){return i.length<d?i:i.length>2*d?i.slice(i.length-2*d,i.length).concat(i,i.slice(0,2*d)):i.concat(i,i)}function s(d,i){return i.length>2*d?2*d:i.length}function c(d,i,m){var x,T=d.currentSlide,C=d.slidesToShow,A=d.itemWidth,I=d.totalItems,k=0,B=0,j=T===0,V=i.length-(i.length-2*C);return i.length<C?(B=k=0,j=x=!1):i.length>2*C?((x=T>=V+i.length)&&(B=-A*(k=T-i.length)),j&&(B=-A*(k=V+(i.length-2*C)))):((x=T>=2*i.length)&&(B=-A*(k=T-i.length)),j&&(B=m.showDots?-A*(k=i.length):-A*(k=I/3))),{isReachingTheEnd:x,isReachingTheStart:j,nextSlide:k,nextPosition:B}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOriginalCounterPart=t,e.getOriginalIndexLookupTableByClones=n,e.getClones=r,e.getInitialSlideInInfiniteMode=s,e.checkClonesPosition=c}(DO)),DO}var Ab={},FW;function Hre(){if(FW)return Ab;FW=1,Object.defineProperty(Ab,"__esModule",{value:!0});function e(r,s,c,d){var i=0,m=d||c;return s&&m&&(i=r[m].partialVisibilityGutter||r[m].paritialVisibilityGutter),i}function t(r,s){var c;return s[r]&&(c=(100/s[r].items).toFixed(1)),c}function n(r,s,c){return Math.round(c/(s+(r.centerMode?1:0)))}return Ab.getPartialVisibilityGutter=e,Ab.getWidthFromDeviceType=t,Ab.getItemClientSideWidth=n,Ab}var ad={},BW;function U0(){if(BW)return ad;BW=1,Object.defineProperty(ad,"__esModule",{value:!0});var e=Hre();function t(C){var A=C.slidesToShow;return C.totalItems<A}function n(C,A){var I,k=C.domLoaded,B=C.slidesToShow,j=C.containerWidth,V=C.itemWidth,H=A.deviceType,G=A.responsive,X=A.ssr,Q=A.partialVisbile,ee=A.partialVisible,ce=!!(k&&B&&j&&V);X&&H&&!ce&&(I=e.getWidthFromDeviceType(H,G));var fe=!!(X&&H&&!ce&&I);return{shouldRenderOnSSR:fe,flexBisis:I,domFullyLoaded:ce,partialVisibilityGutter:e.getPartialVisibilityGutter(G,Q||ee,H,C.deviceType),shouldRenderAtAll:fe||ce}}function r(C,A){var I=A.currentSlide,k=A.slidesToShow;return I<=C&&C<I+k}function s(C,A,I){var k=I||C.transform;return!A.infinite&&C.currentSlide===0||t(C)?k:k+C.itemWidth/2}function c(C){return!(0<C.currentSlide)}function d(C){var A=C.currentSlide,I=C.totalItems;return!(A+C.slidesToShow<I)}function i(C,A,I,k){A===void 0&&(A=0);var B=C.currentSlide,j=C.slidesToShow,V=d(C),H=!I.infinite&&V,G=k||C.transform;if(t(C))return G;var X=G+B*A;return H?X+(C.containerWidth-(C.itemWidth-A)*j):X}function m(C,A){return C.rtl?-1*A:A}function x(C,A,I){var k=A.partialVisbile,B=A.partialVisible,j=A.responsive,V=A.deviceType,H=A.centerMode,G=I||C.transform,X=e.getPartialVisibilityGutter(j,k||B,V,C.deviceType);return m(A,B||k?i(C,X,A,I):H?s(C,A,I):G)}function T(C,A){var I=C.domLoaded,k=C.slidesToShow,B=C.containerWidth,j=C.itemWidth,V=A.deviceType,H=A.responsive,G=A.slidesToSlide||1,X=!!(I&&k&&B&&j);return A.ssr&&A.deviceType&&!X&&Object.keys(H).forEach(function(Q){var ee=H[Q].slidesToSlide;V===Q&&ee&&(G=ee)}),X&&Object.keys(H).forEach(function(Q){var ee=H[Q],ce=ee.breakpoint,fe=ee.slidesToSlide,ue=ce.max,ae=ce.min;fe&&window.innerWidth>=ae&&window.innerWidth<=ue&&(G=fe)}),G}return ad.notEnoughChildren=t,ad.getInitialState=n,ad.getIfSlideIsVisbile=r,ad.getTransformForCenterMode=s,ad.isInLeftEnd=c,ad.isInRightEnd=d,ad.getTransformForPartialVsibile=i,ad.parsePosition=m,ad.getTransform=x,ad.getSlidesToSlide=T,ad}var tA={},jW;function AVe(){if(jW)return tA;jW=1,Object.defineProperty(tA,"__esModule",{value:!0});var e=function(t,n,r){var s;return function(){var c=arguments;s||(t.apply(this,c),s=!0,typeof r=="function"&&r(!0),setTimeout(function(){s=!1,typeof r=="function"&&r(!1)},n))}};return tA.default=e,tA}var PO={},NW;function RVe(){return NW||(NW=1,function(e){function t(n,r){var s=r.partialVisbile,c=r.partialVisible,d=r.centerMode,i=r.ssr,m=r.responsive;if((s||c)&&d)throw new Error("center mode can not be used at the same time with partialVisible");if(!m)throw i?new Error("ssr mode need to be used in conjunction with responsive prop"):new Error("Responsive prop is needed for deciding the amount of items to show on the screen");if(m&&typeof m!="object")throw new Error("responsive prop must be an object")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}(PO)),PO}var nA={},VW;function DVe(){if(VW)return nA;VW=1,Object.defineProperty(nA,"__esModule",{value:!0});var e=U0();function t(n,r,s){s===void 0&&(s=0);var c,d,i=n.slidesToShow,m=n.currentSlide,x=n.itemWidth,T=n.totalItems,C=e.getSlidesToSlide(n,r),A=m+1+s+i+(0<s?0:C);return d=A<=T?-x*(c=m+s+(0<s?0:C)):T<A&&m!==T-i?-x*(c=T-i):c=void 0,{nextSlides:c,nextPosition:d}}return nA.populateNextSlides=t,nA}var rA={},$W;function PVe(){if($W)return rA;$W=1,Object.defineProperty(rA,"__esModule",{value:!0});var e=Fh(),t=U0(),n=U0();function r(s,c,d){d===void 0&&(d=0);var i,m,x=s.currentSlide,T=s.itemWidth,C=s.slidesToShow,A=c.children,I=c.showDots,k=c.infinite,B=t.getSlidesToSlide(s,c),j=x-d-(0<d?0:B),V=(e.Children.toArray(A).length-C)%B;return m=0<=j?(i=j,I&&!k&&0<V&&n.isInRightEnd(s)&&(i=x-V),-T*i):i=j<0&&x!==0?0:void 0,{nextSlides:i,nextPosition:m}}return rA.populatePreviousSlides=r,rA}var IO={},UW;function IVe(){return UW||(UW=1,function(e){function t(n,r,s,c,d,i){var m,x,T=n.itemWidth,C=n.slidesToShow,A=n.totalItems,I=n.currentSlide,k=r.infinite,B=!1,j=Math.round((s-c)/T),V=Math.round((c-s)/T),H=s<d;if(d<s&&j<=C){m="right";var G=Math.abs(-T*(A-C)),X=i-(c-d),Q=I===A-C;(Math.abs(X)<=G||Q&&k)&&(x=X,B=!0)}return H&&V<=C&&(m="left",((X=i+(d-c))<=0||I===0&&k)&&(B=!0,x=X)),{direction:m,nextPosition:x,canContinue:B}}Object.defineProperty(e,"__esModule",{value:!0}),e.populateSlidesOnMouseTouchMove=t}(IO)),IO}var qW;function Wre(){if(qW)return Hs;qW=1,Object.defineProperty(Hs,"__esModule",{value:!0});var e=g4();Hs.getOriginalCounterPart=e.getOriginalCounterPart,Hs.getClones=e.getClones,Hs.checkClonesPosition=e.checkClonesPosition,Hs.getInitialSlideInInfiniteMode=e.getInitialSlideInInfiniteMode;var t=Hre();Hs.getWidthFromDeviceType=t.getWidthFromDeviceType,Hs.getPartialVisibilityGutter=t.getPartialVisibilityGutter,Hs.getItemClientSideWidth=t.getItemClientSideWidth;var n=U0();Hs.getInitialState=n.getInitialState,Hs.getIfSlideIsVisbile=n.getIfSlideIsVisbile,Hs.getTransformForCenterMode=n.getTransformForCenterMode,Hs.getTransformForPartialVsibile=n.getTransformForPartialVsibile,Hs.isInLeftEnd=n.isInLeftEnd,Hs.isInRightEnd=n.isInRightEnd,Hs.notEnoughChildren=n.notEnoughChildren,Hs.getSlidesToSlide=n.getSlidesToSlide;var r=AVe();Hs.throttle=r.default;var s=RVe();Hs.throwError=s.default;var c=DVe();Hs.populateNextSlides=c.populateNextSlides;var d=PVe();Hs.populatePreviousSlides=d.populatePreviousSlides;var i=IVe();return Hs.populateSlidesOnMouseTouchMove=i.populateSlidesOnMouseTouchMove,Hs}var s0={},HW;function kVe(){if(HW)return s0;HW=1;var e=s0&&s0.__extends||function(){var s=function(c,d){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,m){i.__proto__=m}||function(i,m){for(var x in m)m.hasOwnProperty(x)&&(i[x]=m[x])})(c,d)};return function(c,d){function i(){this.constructor=c}s(c,d),c.prototype=d===null?Object.create(d):(i.prototype=d.prototype,new i)}}();Object.defineProperty(s0,"__esModule",{value:!0});var t=Fh();function n(s){return"clientY"in s}s0.isMouseMoveEvent=n;var r=function(s){function c(){return s!==null&&s.apply(this,arguments)||this}return e(c,s),c}(t.Component);return s0.default=r,s0}var iA={},oA={},WW;function OVe(){if(WW)return oA;WW=1,Object.defineProperty(oA,"__esModule",{value:!0});var e=g4(),t=U0();function n(r,s,c,d){var i={},m=t.getSlidesToSlide(s,c);return Array(r).fill(0).forEach(function(x,T){var C=e.getOriginalCounterPart(T,s,d);if(T===0)i[0]=C;else{var A=i[T-1]+m;i[T]=A}}),i}return oA.getLookupTableForNextSlides=n,oA}var GW;function LVe(){if(GW)return iA;GW=1,Object.defineProperty(iA,"__esModule",{value:!0});var e=Fh(),t=g4(),n=OVe(),r=U0(),s=function(c){var d=c.props,i=c.state,m=c.goToSlide,x=c.getState,T=d.showDots,C=d.customDot,A=d.dotListClass,I=d.infinite,k=d.children;if(!T||r.notEnoughChildren(i))return null;var B,j=i.currentSlide,V=i.slidesToShow,H=r.getSlidesToSlide(i,d),G=e.Children.toArray(k);B=I?Math.ceil(G.length/H):Math.ceil((G.length-V)/H)+1;var X=n.getLookupTableForNextSlides(B,i,d,G),Q=t.getOriginalIndexLookupTableByClones(V,G),ee=Q[j];return e.createElement("ul",{className:"react-multi-carousel-dot-list "+A},Array(B).fill(0).map(function(ce,fe){var ue,ae;if(I){ae=X[fe];var xe=Q[ae];ue=ee===xe||xe<=ee&&ee<xe+H}else{var we=G.length-V,Me=fe*H;ue=(ae=we<Me?we:Me)===j||ae<j&&j<ae+H&&j<G.length-V}return C?e.cloneElement(C,{index:fe,active:ue,key:fe,onClick:function(){return m(ae)},carouselState:x()}):e.createElement("li",{"data-index":fe,key:fe,className:"react-multi-carousel-dot "+(ue?"react-multi-carousel-dot--active":"")},e.createElement("button",{"aria-label":"Go to slide "+(fe+1),onClick:function(){return m(ae)}}))}))};return iA.default=s,iA}var MS={},YW;function zVe(){if(YW)return MS;YW=1,Object.defineProperty(MS,"__esModule",{value:!0});var e=Fh(),t=function(r){var s=r.customLeftArrow,c=r.getState,d=r.previous,i=r.disabled,m=r.rtl;if(s)return e.cloneElement(s,{onClick:function(){return d()},carouselState:c(),disabled:i,rtl:m});var x=m?"rtl":"";return e.createElement("button",{"aria-label":"Go to previous slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left "+x,onClick:function(){return d()},type:"button",disabled:i})};MS.LeftArrow=t;var n=function(r){var s=r.customRightArrow,c=r.getState,d=r.next,i=r.disabled,m=r.rtl;if(s)return e.cloneElement(s,{onClick:function(){return d()},carouselState:c(),disabled:i,rtl:m});var x=m?"rtl":"";return e.createElement("button",{"aria-label":"Go to next slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right "+x,onClick:function(){return d()},type:"button",disabled:i})};return MS.RightArrow=n,MS}var sA={},XW;function FVe(){if(XW)return sA;XW=1,Object.defineProperty(sA,"__esModule",{value:!0});var e=Fh(),t=Wre(),n=function(r){var s=r.props,c=r.state,d=r.goToSlide,i=r.clones,m=r.notEnoughChildren,x=c.itemWidth,T=s.children,C=s.infinite,A=s.itemClass,I=s.itemAriaLabel,k=s.partialVisbile,B=s.partialVisible,j=t.getInitialState(c,s),V=j.flexBisis,H=j.shouldRenderOnSSR,G=j.domFullyLoaded,X=j.partialVisibilityGutter;return j.shouldRenderAtAll?(k&&console.warn('WARNING: Please correct props name: "partialVisible" as old typo will be removed in future versions!'),e.createElement(e.Fragment,null,(C?i:e.Children.toArray(T)).map(function(Q,ee){return e.createElement("li",{key:ee,"data-index":ee,onClick:function(){s.focusOnSelect&&d(ee)},"aria-hidden":t.getIfSlideIsVisbile(ee,c)?"false":"true","aria-label":I||(Q.props.ariaLabel?Q.props.ariaLabel:null),style:{flex:H?"1 0 "+V+"%":"auto",position:"relative",width:G?((k||B)&&X&&!m?x-X:x)+"px":"auto"},className:"react-multi-carousel-item "+(t.getIfSlideIsVisbile(ee,c)?"react-multi-carousel-item--active":"")+" "+A},Q)}))):null};return sA.default=n,sA}var ZW;function BVe(){if(ZW)return Mb;ZW=1;var e=Mb&&Mb.__extends||function(){var C=function(A,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,B){k.__proto__=B}||function(k,B){for(var j in B)B.hasOwnProperty(j)&&(k[j]=B[j])})(A,I)};return function(A,I){function k(){this.constructor=A}C(A,I),A.prototype=I===null?Object.create(I):(k.prototype=I.prototype,new k)}}();Object.defineProperty(Mb,"__esModule",{value:!0});var t=Fh(),n=Wre(),r=kVe(),s=LVe(),c=zVe(),d=FVe(),i=U0(),m=400,x="transform 400ms ease-in-out",T=function(C){function A(I){var k=C.call(this,I)||this;return k.containerRef=t.createRef(),k.listRef=t.createRef(),k.state={itemWidth:0,slidesToShow:0,currentSlide:0,totalItems:t.Children.count(I.children),deviceType:"",domLoaded:!1,transform:0,containerWidth:0},k.onResize=k.onResize.bind(k),k.handleDown=k.handleDown.bind(k),k.handleMove=k.handleMove.bind(k),k.handleOut=k.handleOut.bind(k),k.onKeyUp=k.onKeyUp.bind(k),k.handleEnter=k.handleEnter.bind(k),k.setIsInThrottle=k.setIsInThrottle.bind(k),k.next=n.throttle(k.next.bind(k),I.transitionDuration||m,k.setIsInThrottle),k.previous=n.throttle(k.previous.bind(k),I.transitionDuration||m,k.setIsInThrottle),k.goToSlide=n.throttle(k.goToSlide.bind(k),I.transitionDuration||m,k.setIsInThrottle),k.onMove=!1,k.initialX=0,k.lastX=0,k.isAnimationAllowed=!1,k.direction="",k.initialY=0,k.isInThrottle=!1,k.transformPlaceHolder=0,k}return e(A,C),A.prototype.resetTotalItems=function(){var I=this,k=t.Children.count(this.props.children),B=n.notEnoughChildren(this.state)?0:Math.max(0,Math.min(this.state.currentSlide,k));this.setState({totalItems:k,currentSlide:B},function(){I.setContainerAndItemWidth(I.state.slidesToShow,!0)})},A.prototype.setIsInThrottle=function(I){I===void 0&&(I=!1),this.isInThrottle=I},A.prototype.setTransformDirectly=function(I,k){var B=this.props.additionalTransfrom;this.transformPlaceHolder=I;var j=i.getTransform(this.state,this.props,this.transformPlaceHolder);this.listRef&&this.listRef.current&&(this.setAnimationDirectly(k),this.listRef.current.style.transform="translate3d("+(j+B)+"px,0,0)")},A.prototype.setAnimationDirectly=function(I){this.listRef&&this.listRef.current&&(this.listRef.current.style.transition=I?this.props.customTransition||x:"none")},A.prototype.componentDidMount=function(){this.setState({domLoaded:!0}),this.setItemsToShow(),window.addEventListener("resize",this.onResize),this.onResize(!0),this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),this.props.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},A.prototype.setClones=function(I,k,B,j){var V=this;j===void 0&&(j=!1),this.isAnimationAllowed=!1;var H=t.Children.toArray(this.props.children),G=n.getInitialSlideInInfiniteMode(I||this.state.slidesToShow,H),X=n.getClones(this.state.slidesToShow,H),Q=H.length<this.state.slidesToShow?0:this.state.currentSlide;this.setState({totalItems:X.length,currentSlide:B&&!j?Q:G},function(){V.correctItemsPosition(k||V.state.itemWidth)})},A.prototype.setItemsToShow=function(I,k){var B=this,j=this.props.responsive;Object.keys(j).forEach(function(V){var H=j[V],G=H.breakpoint,X=H.items,Q=G.max,ee=G.min,ce=[window.innerWidth];window.screen&&window.screen.width&&ce.push(window.screen.width);var fe=Math.min.apply(Math,ce);ee<=fe&&fe<=Q&&(B.setState({slidesToShow:X,deviceType:V}),B.setContainerAndItemWidth(X,I,k))})},A.prototype.setContainerAndItemWidth=function(I,k,B){var j=this;if(this.containerRef&&this.containerRef.current){var V=this.containerRef.current.offsetWidth,H=n.getItemClientSideWidth(this.props,I,V);this.setState({containerWidth:V,itemWidth:H},function(){j.props.infinite&&j.setClones(I,H,k,B)}),k&&this.correctItemsPosition(H)}},A.prototype.correctItemsPosition=function(I,k,B){k&&(this.isAnimationAllowed=!0),!k&&this.isAnimationAllowed&&(this.isAnimationAllowed=!1);var j=this.state.totalItems<this.state.slidesToShow?0:-I*this.state.currentSlide;B&&this.setTransformDirectly(j,!0),this.setState({transform:j})},A.prototype.onResize=function(I){var k;k=!!this.props.infinite&&(typeof I!="boolean"||!I),this.setItemsToShow(k)},A.prototype.componentDidUpdate=function(I,k){var B=this,j=I.keyBoardControl,V=I.autoPlay,H=I.children,G=k.containerWidth,X=k.domLoaded,Q=k.currentSlide;if(this.containerRef&&this.containerRef.current&&this.containerRef.current.offsetWidth!==G&&(this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),this.itemsToShowTimeout=setTimeout(function(){B.setItemsToShow(!0)},this.props.transitionDuration||m)),j&&!this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),!j&&this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),V&&!this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),V||!this.props.autoPlay||this.autoPlay||(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed)),H.length!==this.props.children.length?A.clonesTimeout=setTimeout(function(){B.props.infinite?B.setClones(B.state.slidesToShow,B.state.itemWidth,!0,!0):B.resetTotalItems()},this.props.transitionDuration||m):this.props.infinite&&this.state.currentSlide!==Q&&this.correctClonesPosition({domLoaded:X}),this.transformPlaceHolder!==this.state.transform&&(this.transformPlaceHolder=this.state.transform),this.props.autoPlay&&this.props.rewind&&!this.props.infinite&&n.isInRightEnd(this.state)){var ee=this.props.transitionDuration||m;A.isInThrottleTimeout=setTimeout(function(){B.setIsInThrottle(!1),B.resetAutoplayInterval(),B.goToSlide(0,void 0,!!B.props.rewindWithAnimation)},ee+this.props.autoPlaySpeed)}},A.prototype.correctClonesPosition=function(I){var k=this,B=I.domLoaded,j=t.Children.toArray(this.props.children),V=n.checkClonesPosition(this.state,j,this.props),H=V.isReachingTheEnd,G=V.isReachingTheStart,X=V.nextSlide,Q=V.nextPosition;this.state.domLoaded&&B&&(H||G)&&(this.isAnimationAllowed=!1,A.transformTimeout=setTimeout(function(){k.setState({transform:Q,currentSlide:X})},this.props.transitionDuration||m))},A.prototype.next=function(I){var k=this;I===void 0&&(I=0);var B=this.props,j=B.afterChange,V=B.beforeChange;if(!n.notEnoughChildren(this.state)){var H=n.populateNextSlides(this.state,this.props,I),G=H.nextSlides,X=H.nextPosition,Q=this.state.currentSlide;G!==void 0&&X!==void 0&&(typeof V=="function"&&V(G,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:X,currentSlide:G},function(){typeof j=="function"&&(A.afterChangeTimeout=setTimeout(function(){j(Q,k.getState())},k.props.transitionDuration||m))}))}},A.prototype.previous=function(I){var k=this;I===void 0&&(I=0);var B=this.props,j=B.afterChange,V=B.beforeChange;if(!n.notEnoughChildren(this.state)){var H=n.populatePreviousSlides(this.state,this.props,I),G=H.nextSlides,X=H.nextPosition;if(G!==void 0&&X!==void 0){var Q=this.state.currentSlide;typeof V=="function"&&V(G,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:X,currentSlide:G},function(){typeof j=="function"&&(A.afterChangeTimeout2=setTimeout(function(){j(Q,k.getState())},k.props.transitionDuration||m))})}}},A.prototype.resetAutoplayInterval=function(){this.props.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},A.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),A.clonesTimeout&&clearTimeout(A.clonesTimeout),A.isInThrottleTimeout&&clearTimeout(A.isInThrottleTimeout),A.transformTimeout&&clearTimeout(A.transformTimeout),A.afterChangeTimeout&&clearTimeout(A.afterChangeTimeout),A.afterChangeTimeout2&&clearTimeout(A.afterChangeTimeout2),A.afterChangeTimeout3&&clearTimeout(A.afterChangeTimeout3)},A.prototype.resetMoveStatus=function(){this.onMove=!1,this.initialX=0,this.lastX=0,this.direction="",this.initialY=0},A.prototype.getCords=function(I){var k=I.clientX,B=I.clientY;return{clientX:i.parsePosition(this.props,k),clientY:i.parsePosition(this.props,B)}},A.prototype.handleDown=function(I){if(!(!r.isMouseMoveEvent(I)&&!this.props.swipeable||r.isMouseMoveEvent(I)&&!this.props.draggable||this.isInThrottle)){var k=this.getCords(r.isMouseMoveEvent(I)?I:I.touches[0]),B=k.clientX,j=k.clientY;this.onMove=!0,this.initialX=B,this.initialY=j,this.lastX=B,this.isAnimationAllowed=!1}},A.prototype.handleMove=function(I){if(!(!r.isMouseMoveEvent(I)&&!this.props.swipeable||r.isMouseMoveEvent(I)&&!this.props.draggable||n.notEnoughChildren(this.state))){var k=this.getCords(r.isMouseMoveEvent(I)?I:I.touches[0]),B=k.clientX,j=k.clientY,V=this.initialX-B,H=this.initialY-j;if(this.onMove){if(!(Math.abs(V)>Math.abs(H)))return;var G=n.populateSlidesOnMouseTouchMove(this.state,this.props,this.initialX,this.lastX,B,this.transformPlaceHolder),X=G.direction,Q=G.nextPosition,ee=G.canContinue;X&&(this.direction=X,ee&&Q!==void 0&&this.setTransformDirectly(Q)),this.lastX=B}}},A.prototype.handleOut=function(I){this.props.autoPlay&&!this.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed));var k=I.type==="touchend"&&!this.props.swipeable,B=(I.type==="mouseleave"||I.type==="mouseup")&&!this.props.draggable;if(!k&&!B&&this.onMove){if(this.setAnimationDirectly(!0),this.direction==="right")if(this.initialX-this.lastX>=this.props.minimumTouchDrag){var j=Math.round((this.initialX-this.lastX)/this.state.itemWidth);this.next(j)}else this.correctItemsPosition(this.state.itemWidth,!0,!0);this.direction==="left"&&(this.lastX-this.initialX>this.props.minimumTouchDrag?(j=Math.round((this.lastX-this.initialX)/this.state.itemWidth),this.previous(j)):this.correctItemsPosition(this.state.itemWidth,!0,!0)),this.resetMoveStatus()}},A.prototype.isInViewport=function(I){var k=I.getBoundingClientRect(),B=k.top,j=B===void 0?0:B,V=k.left,H=V===void 0?0:V,G=k.bottom,X=G===void 0?0:G,Q=k.right,ee=Q===void 0?0:Q;return 0<=j&&0<=H&&X<=(window.innerHeight||document.documentElement.clientHeight)&&ee<=(window.innerWidth||document.documentElement.clientWidth)},A.prototype.isChildOfCarousel=function(I){return!!(I instanceof Element&&this.listRef&&this.listRef.current)&&this.listRef.current.contains(I)},A.prototype.onKeyUp=function(I){var k=I.target;switch(I.keyCode){case 37:if(this.isChildOfCarousel(k))return this.previous();break;case 39:if(this.isChildOfCarousel(k))return this.next();break;case 9:if(this.isChildOfCarousel(k)&&k instanceof HTMLInputElement&&this.isInViewport(k))return this.next()}},A.prototype.handleEnter=function(I){r.isMouseMoveEvent(I)&&this.autoPlay&&this.props.autoPlay&&this.props.pauseOnHover&&(clearInterval(this.autoPlay),this.autoPlay=void 0)},A.prototype.goToSlide=function(I,k,B){var j=this;if(B===void 0&&(B=!0),!this.isInThrottle){var V=this.state.itemWidth,H=this.props,G=H.afterChange,X=H.beforeChange,Q=this.state.currentSlide;typeof X!="function"||k&&(typeof k!="object"||k.skipBeforeChange)||X(I,this.getState()),this.isAnimationAllowed=B,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({currentSlide:I,transform:-V*I},function(){j.props.infinite&&j.correctClonesPosition({domLoaded:!0}),typeof G!="function"||k&&(typeof k!="object"||k.skipAfterChange)||(A.afterChangeTimeout3=setTimeout(function(){G(Q,j.getState())},j.props.transitionDuration||m))})}},A.prototype.getState=function(){return this.state},A.prototype.renderLeftArrow=function(I){var k=this,B=this.props,j=B.customLeftArrow,V=B.rtl;return t.createElement(c.LeftArrow,{customLeftArrow:j,getState:function(){return k.getState()},previous:this.previous,disabled:I,rtl:V})},A.prototype.renderRightArrow=function(I){var k=this,B=this.props,j=B.customRightArrow,V=B.rtl;return t.createElement(c.RightArrow,{customRightArrow:j,getState:function(){return k.getState()},next:this.next,disabled:I,rtl:V})},A.prototype.renderButtonGroups=function(){var I=this,k=this.props.customButtonGroup;return k?t.cloneElement(k,{previous:function(){return I.previous()},next:function(){return I.next()},goToSlide:function(B,j){return I.goToSlide(B,j)},carouselState:this.getState()}):null},A.prototype.renderDotsList=function(){var I=this;return t.createElement(s.default,{state:this.state,props:this.props,goToSlide:this.goToSlide,getState:function(){return I.getState()}})},A.prototype.renderCarouselItems=function(){var I=[];if(this.props.infinite){var k=t.Children.toArray(this.props.children);I=n.getClones(this.state.slidesToShow,k)}return t.createElement(d.default,{clones:I,goToSlide:this.goToSlide,state:this.state,notEnoughChildren:n.notEnoughChildren(this.state),props:this.props})},A.prototype.render=function(){var I=this.props,k=I.deviceType,B=I.arrows,j=I.renderArrowsWhenDisabled,V=I.removeArrowOnDeviceType,H=I.infinite,G=I.containerClass,X=I.sliderClass,Q=I.customTransition,ee=I.additionalTransfrom,ce=I.renderDotsOutside,fe=I.renderButtonGroupOutside,ue=I.className,ae=I.rtl,xe=n.getInitialState(this.state,this.props),we=xe.shouldRenderOnSSR,Me=xe.shouldRenderAtAll,Se=n.isInLeftEnd(this.state),Ae=n.isInRightEnd(this.state),_e=B&&!(V&&(k&&-1<V.indexOf(k)||this.state.deviceType&&-1<V.indexOf(this.state.deviceType)))&&!n.notEnoughChildren(this.state)&&Me,Pe=!H&&Se,We=!H&&Ae,Fe=i.getTransform(this.state,this.props);return t.createElement(t.Fragment,null,t.createElement("div",{className:"react-multi-carousel-list "+G+" "+ue,dir:ae?"rtl":"ltr",ref:this.containerRef},t.createElement("ul",{ref:this.listRef,className:"react-multi-carousel-track "+X,style:{transition:this.isAnimationAllowed?Q||x:"none",overflow:we?"hidden":"unset",transform:"translate3d("+(Fe+ee)+"px,0,0)"},onMouseMove:this.handleMove,onMouseDown:this.handleDown,onMouseUp:this.handleOut,onMouseEnter:this.handleEnter,onMouseLeave:this.handleOut,onTouchStart:this.handleDown,onTouchMove:this.handleMove,onTouchEnd:this.handleOut},this.renderCarouselItems()),_e&&(!Pe||j)&&this.renderLeftArrow(Pe),_e&&(!We||j)&&this.renderRightArrow(We),Me&&!fe&&this.renderButtonGroups(),Me&&!ce&&this.renderDotsList()),Me&&ce&&this.renderDotsList(),Me&&fe&&this.renderButtonGroups())},A.defaultProps={slidesToSlide:1,infinite:!1,draggable:!0,swipeable:!0,arrows:!0,renderArrowsWhenDisabled:!1,containerClass:"",sliderClass:"",itemClass:"",keyBoardControl:!0,autoPlaySpeed:3e3,showDots:!1,renderDotsOutside:!1,renderButtonGroupOutside:!1,minimumTouchDrag:80,className:"",dotListClass:"",focusOnSelect:!1,centerMode:!1,additionalTransfrom:0,pauseOnHover:!0,shouldResetAutoplay:!0,rewind:!1,rtl:!1,rewindWithAnimation:!1},A}(t.Component);return Mb.default=T,Mb}var KW;function jVe(){if(KW)return eA;KW=1,Object.defineProperty(eA,"__esModule",{value:!0});var e=BVe();return eA.default=e.default,eA}var kO,QW;function NVe(){return QW||(QW=1,kO=jVe()),kO}var VVe=NVe();const $Ve=Ls(VVe);Sh.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";const Rb=new Array(10).fill(null).map((e,t)=>({id:t,label:`Day ${t+1}`,center:[72.5714+t*.1,23.0225+t*.1],zoom:10+t%3})),JW=({center:e,zoom:t,mapStyle:n})=>{const r=U.useRef(null);return U.useEffect(()=>{if(!r.current)return;const s=new Sh.Map({container:r.current,style:n,center:e,zoom:t});return()=>s.remove()},[e,t,n]),z.jsx(Pn,{ref:r,sx:{width:"100%",height:"100%"}})};function UVe(){const[e,t]=U.useState(Rb[0]),[n,r]=U.useState(Rb[1]),s=Zo(),c=(i,m)=>{const x=Rb.find(T=>T.id===m);i==="first"?t(x):r(x)},d={superLargeDesktop:{breakpoint:{max:4e3,min:1536},items:5},desktop:{breakpoint:{max:1536,min:1024},items:4},tablet:{breakpoint:{max:1024,min:640},items:3},mobile:{breakpoint:{max:640,min:0},items:2}};return z.jsxs(Pn,{p:3,children:[z.jsx(En,{variant:"h4",gutterBottom:!0,children:"Compare Progress"}),z.jsx(Pn,{sx:{mt:4,mb:4,height:100},children:z.jsx($Ve,{responsive:d,centerMode:!0,infinite:!0,autoPlay:!0,autoPlaySpeed:5e3,itemClass:"carousel-item-padding-40-px",children:Rb.map((i,m)=>z.jsx(L0,{sx:{mx:1,borderColor:s.palette.primary,borderRadius:2,border:1,boxShadow:6,height:"80px"},children:z.jsx(SD,{children:z.jsx(En,{align:"center",variant:"subtitle1",children:i.label})})},i.id))})}),z.jsxs(Pn,{display:"flex",gap:2,mb:3,children:[z.jsx(tu,{fullWidth:!0,children:z.jsx(nu,{value:e.id,onChange:i=>c("first",i.target.value),children:Rb.map(i=>z.jsx(ko,{value:i.id,children:i.label},i.id))})}),z.jsx(tu,{fullWidth:!0,children:z.jsx(nu,{value:n.id,onChange:i=>c("second",i.target.value),children:Rb.map(i=>z.jsx(ko,{value:i.id,children:i.label},i.id))})})]}),z.jsx(Pn,{mb:5,borderRadius:2,overflow:"hidden",sx:{height:400},children:z.jsx(m4,{itemOne:z.jsx(Pn,{sx:{width:"100%",height:"100%"},children:z.jsx(JW,{center:e.center,zoom:e.zoom,mapStyle:"mapbox://styles/mapbox/streets-v11"})}),itemTwo:z.jsx(Pn,{sx:{width:"100%",height:"100%"},children:z.jsx(JW,{center:n.center,zoom:n.zoom,mapStyle:"mapbox://styles/mapbox/satellite-v9"})}),style:{height:"100%"}})})]})}const qVe=["Info","Files","Compare","DPR FORM"],HVe=()=>{const[e,t]=U.useState(0),n=(r,s)=>{t(s)};return z.jsxs(fa,{elevation:3,sx:{p:2},children:[z.jsx(RJ,{value:e,onChange:n,variant:"fullWidth",sx:{mb:2,borderBottom:"1px solid #e0e0e0"},children:qVe.map((r,s)=>z.jsx(TJ,{label:r},s))}),z.jsxs(Pn,{children:[e===0?z.jsx(vVe,{}):null,e===1?z.jsx(Vre,{}):null,e===2?z.jsx(UVe,{}):null,e===3?z.jsx(xVe,{}):null]})]})};var LA={exports:{}},WVe=LA.exports,eG;function GVe(){return eG||(eG=1,function(e,t){(function(n,r){e.exports=r()})(WVe,function(){var n=1e3,r=6e4,s=36e5,c="millisecond",d="second",i="minute",m="hour",x="day",T="week",C="month",A="quarter",I="year",k="date",B="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,V=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Se){var Ae=["th","st","nd","rd"],_e=Se%100;return"["+Se+(Ae[(_e-20)%10]||Ae[_e]||Ae[0])+"]"}},G=function(Se,Ae,_e){var Pe=String(Se);return!Pe||Pe.length>=Ae?Se:""+Array(Ae+1-Pe.length).join(_e)+Se},X={s:G,z:function(Se){var Ae=-Se.utcOffset(),_e=Math.abs(Ae),Pe=Math.floor(_e/60),We=_e%60;return(Ae<=0?"+":"-")+G(Pe,2,"0")+":"+G(We,2,"0")},m:function Se(Ae,_e){if(Ae.date()<_e.date())return-Se(_e,Ae);var Pe=12*(_e.year()-Ae.year())+(_e.month()-Ae.month()),We=Ae.clone().add(Pe,C),Fe=_e-We<0,Ce=Ae.clone().add(Pe+(Fe?-1:1),C);return+(-(Pe+(_e-We)/(Fe?We-Ce:Ce-We))||0)},a:function(Se){return Se<0?Math.ceil(Se)||0:Math.floor(Se)},p:function(Se){return{M:C,y:I,w:T,d:x,D:k,h:m,m:i,s:d,ms:c,Q:A}[Se]||String(Se||"").toLowerCase().replace(/s$/,"")},u:function(Se){return Se===void 0}},Q="en",ee={};ee[Q]=H;var ce="$isDayjsObject",fe=function(Se){return Se instanceof we||!(!Se||!Se[ce])},ue=function Se(Ae,_e,Pe){var We;if(!Ae)return Q;if(typeof Ae=="string"){var Fe=Ae.toLowerCase();ee[Fe]&&(We=Fe),_e&&(ee[Fe]=_e,We=Fe);var Ce=Ae.split("-");if(!We&&Ce.length>1)return Se(Ce[0])}else{var He=Ae.name;ee[He]=Ae,We=He}return!Pe&&We&&(Q=We),We||!Pe&&Q},ae=function(Se,Ae){if(fe(Se))return Se.clone();var _e=typeof Ae=="object"?Ae:{};return _e.date=Se,_e.args=arguments,new we(_e)},xe=X;xe.l=ue,xe.i=fe,xe.w=function(Se,Ae){return ae(Se,{locale:Ae.$L,utc:Ae.$u,x:Ae.$x,$offset:Ae.$offset})};var we=function(){function Se(_e){this.$L=ue(_e.locale,null,!0),this.parse(_e),this.$x=this.$x||_e.x||{},this[ce]=!0}var Ae=Se.prototype;return Ae.parse=function(_e){this.$d=function(Pe){var We=Pe.date,Fe=Pe.utc;if(We===null)return new Date(NaN);if(xe.u(We))return new Date;if(We instanceof Date)return new Date(We);if(typeof We=="string"&&!/Z$/i.test(We)){var Ce=We.match(j);if(Ce){var He=Ce[2]-1||0,dt=(Ce[7]||"0").substring(0,3);return Fe?new Date(Date.UTC(Ce[1],He,Ce[3]||1,Ce[4]||0,Ce[5]||0,Ce[6]||0,dt)):new Date(Ce[1],He,Ce[3]||1,Ce[4]||0,Ce[5]||0,Ce[6]||0,dt)}}return new Date(We)}(_e),this.init()},Ae.init=function(){var _e=this.$d;this.$y=_e.getFullYear(),this.$M=_e.getMonth(),this.$D=_e.getDate(),this.$W=_e.getDay(),this.$H=_e.getHours(),this.$m=_e.getMinutes(),this.$s=_e.getSeconds(),this.$ms=_e.getMilliseconds()},Ae.$utils=function(){return xe},Ae.isValid=function(){return this.$d.toString()!==B},Ae.isSame=function(_e,Pe){var We=ae(_e);return this.startOf(Pe)<=We&&We<=this.endOf(Pe)},Ae.isAfter=function(_e,Pe){return ae(_e)<this.startOf(Pe)},Ae.isBefore=function(_e,Pe){return this.endOf(Pe)<ae(_e)},Ae.$g=function(_e,Pe,We){return xe.u(_e)?this[Pe]:this.set(We,_e)},Ae.unix=function(){return Math.floor(this.valueOf()/1e3)},Ae.valueOf=function(){return this.$d.getTime()},Ae.startOf=function(_e,Pe){var We=this,Fe=!!xe.u(Pe)||Pe,Ce=xe.p(_e),He=function(Dt,Et){var yt=xe.w(We.$u?Date.UTC(We.$y,Et,Dt):new Date(We.$y,Et,Dt),We);return Fe?yt:yt.endOf(x)},dt=function(Dt,Et){return xe.w(We.toDate()[Dt].apply(We.toDate("s"),(Fe?[0,0,0,0]:[23,59,59,999]).slice(Et)),We)},gt=this.$W,Nt=this.$M,wt=this.$D,ot="set"+(this.$u?"UTC":"");switch(Ce){case I:return Fe?He(1,0):He(31,11);case C:return Fe?He(1,Nt):He(0,Nt+1);case T:var st=this.$locale().weekStart||0,St=(gt<st?gt+7:gt)-st;return He(Fe?wt-St:wt+(6-St),Nt);case x:case k:return dt(ot+"Hours",0);case m:return dt(ot+"Minutes",1);case i:return dt(ot+"Seconds",2);case d:return dt(ot+"Milliseconds",3);default:return this.clone()}},Ae.endOf=function(_e){return this.startOf(_e,!1)},Ae.$set=function(_e,Pe){var We,Fe=xe.p(_e),Ce="set"+(this.$u?"UTC":""),He=(We={},We[x]=Ce+"Date",We[k]=Ce+"Date",We[C]=Ce+"Month",We[I]=Ce+"FullYear",We[m]=Ce+"Hours",We[i]=Ce+"Minutes",We[d]=Ce+"Seconds",We[c]=Ce+"Milliseconds",We)[Fe],dt=Fe===x?this.$D+(Pe-this.$W):Pe;if(Fe===C||Fe===I){var gt=this.clone().set(k,1);gt.$d[He](dt),gt.init(),this.$d=gt.set(k,Math.min(this.$D,gt.daysInMonth())).$d}else He&&this.$d[He](dt);return this.init(),this},Ae.set=function(_e,Pe){return this.clone().$set(_e,Pe)},Ae.get=function(_e){return this[xe.p(_e)]()},Ae.add=function(_e,Pe){var We,Fe=this;_e=Number(_e);var Ce=xe.p(Pe),He=function(Nt){var wt=ae(Fe);return xe.w(wt.date(wt.date()+Math.round(Nt*_e)),Fe)};if(Ce===C)return this.set(C,this.$M+_e);if(Ce===I)return this.set(I,this.$y+_e);if(Ce===x)return He(1);if(Ce===T)return He(7);var dt=(We={},We[i]=r,We[m]=s,We[d]=n,We)[Ce]||1,gt=this.$d.getTime()+_e*dt;return xe.w(gt,this)},Ae.subtract=function(_e,Pe){return this.add(-1*_e,Pe)},Ae.format=function(_e){var Pe=this,We=this.$locale();if(!this.isValid())return We.invalidDate||B;var Fe=_e||"YYYY-MM-DDTHH:mm:ssZ",Ce=xe.z(this),He=this.$H,dt=this.$m,gt=this.$M,Nt=We.weekdays,wt=We.months,ot=We.meridiem,st=function(Et,yt,Lt,Ct){return Et&&(Et[yt]||Et(Pe,Fe))||Lt[yt].slice(0,Ct)},St=function(Et){return xe.s(He%12||12,Et,"0")},Dt=ot||function(Et,yt,Lt){var Ct=Et<12?"AM":"PM";return Lt?Ct.toLowerCase():Ct};return Fe.replace(V,function(Et,yt){return yt||function(Lt){switch(Lt){case"YY":return String(Pe.$y).slice(-2);case"YYYY":return xe.s(Pe.$y,4,"0");case"M":return gt+1;case"MM":return xe.s(gt+1,2,"0");case"MMM":return st(We.monthsShort,gt,wt,3);case"MMMM":return st(wt,gt);case"D":return Pe.$D;case"DD":return xe.s(Pe.$D,2,"0");case"d":return String(Pe.$W);case"dd":return st(We.weekdaysMin,Pe.$W,Nt,2);case"ddd":return st(We.weekdaysShort,Pe.$W,Nt,3);case"dddd":return Nt[Pe.$W];case"H":return String(He);case"HH":return xe.s(He,2,"0");case"h":return St(1);case"hh":return St(2);case"a":return Dt(He,dt,!0);case"A":return Dt(He,dt,!1);case"m":return String(dt);case"mm":return xe.s(dt,2,"0");case"s":return String(Pe.$s);case"ss":return xe.s(Pe.$s,2,"0");case"SSS":return xe.s(Pe.$ms,3,"0");case"Z":return Ce}return null}(Et)||Ce.replace(":","")})},Ae.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ae.diff=function(_e,Pe,We){var Fe,Ce=this,He=xe.p(Pe),dt=ae(_e),gt=(dt.utcOffset()-this.utcOffset())*r,Nt=this-dt,wt=function(){return xe.m(Ce,dt)};switch(He){case I:Fe=wt()/12;break;case C:Fe=wt();break;case A:Fe=wt()/3;break;case T:Fe=(Nt-gt)/6048e5;break;case x:Fe=(Nt-gt)/864e5;break;case m:Fe=Nt/s;break;case i:Fe=Nt/r;break;case d:Fe=Nt/n;break;default:Fe=Nt}return We?Fe:xe.a(Fe)},Ae.daysInMonth=function(){return this.endOf(C).$D},Ae.$locale=function(){return ee[this.$L]},Ae.locale=function(_e,Pe){if(!_e)return this.$L;var We=this.clone(),Fe=ue(_e,Pe,!0);return Fe&&(We.$L=Fe),We},Ae.clone=function(){return xe.w(this.$d,this)},Ae.toDate=function(){return new Date(this.valueOf())},Ae.toJSON=function(){return this.isValid()?this.toISOString():null},Ae.toISOString=function(){return this.$d.toISOString()},Ae.toString=function(){return this.$d.toUTCString()},Se}(),Me=we.prototype;return ae.prototype=Me,[["$ms",c],["$s",d],["$m",i],["$H",m],["$W",x],["$M",C],["$y",I],["$D",k]].forEach(function(Se){Me[Se[1]]=function(Ae){return this.$g(Ae,Se[0],Se[1])}}),ae.extend=function(Se,Ae){return Se.$i||(Se(Ae,we,ae),Se.$i=!0),ae},ae.locale=ue,ae.isDayjs=fe,ae.unix=function(Se){return ae(1e3*Se)},ae.en=ee[Q],ae.Ls=ee,ae.p={},ae})}(LA)),LA.exports}var YVe=GVe();const zA=Ls(YVe);var ld=63710088e-1,Gre={centimeters:ld*100,centimetres:ld*100,degrees:360/(2*Math.PI),feet:ld*3.28084,inches:ld*39.37,kilometers:ld/1e3,kilometres:ld/1e3,meters:ld,metres:ld,miles:ld/1609.344,millimeters:ld*1e3,millimetres:ld*1e3,nauticalmiles:ld/1852,radians:1,yards:ld*1.0936};function GR(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function _j(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!tG(e[0])||!tG(e[1]))throw new Error("coordinates must contain numbers");return GR({type:"Point",coordinates:e},t,n)}function XVe(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return GR({type:"LineString",coordinates:e},t,n)}function ZVe(e,t="kilometers"){const n=Gre[t];if(!n)throw new Error(t+" units is invalid");return e*n}function KVe(e,t="kilometers"){const n=Gre[t];if(!n)throw new Error(t+" units is invalid");return e/n}function xj(e){return e%(2*Math.PI)*180/Math.PI}function qf(e){return e%360*Math.PI/180}function tG(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function VT(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function QVe(e){return e.type==="Feature"?e.geometry:e}function Yre(e,t,n={}){if(n.final===!0)return JVe(e,t);const r=VT(e),s=VT(t),c=qf(r[0]),d=qf(s[0]),i=qf(r[1]),m=qf(s[1]),x=Math.sin(d-c)*Math.cos(m),T=Math.cos(i)*Math.sin(m)-Math.sin(i)*Math.cos(m)*Math.cos(d-c);return xj(Math.atan2(x,T))}function JVe(e,t){let n=Yre(t,e);return n=(n+180)%360,n}function e$e(e,t,n,r={}){const s=VT(e),c=qf(s[0]),d=qf(s[1]),i=qf(n),m=KVe(t,r.units),x=Math.asin(Math.sin(d)*Math.cos(m)+Math.cos(d)*Math.sin(m)*Math.cos(i)),T=c+Math.atan2(Math.sin(i)*Math.sin(m)*Math.cos(d),Math.cos(m)-Math.sin(d)*Math.sin(x)),C=xj(T),A=xj(x);return _j([C,A],r.properties)}function Xre(e,t,n={}){var r=VT(e),s=VT(t),c=qf(s[1]-r[1]),d=qf(s[0]-r[0]),i=qf(r[1]),m=qf(s[1]),x=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(d/2),2)*Math.cos(i)*Math.cos(m);return ZVe(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)),n.units)}function t$e(e,t,n={}){const s=QVe(e).coordinates;let c=0;for(let d=0;d<s.length&&!(t>=c&&d===s.length-1);d++)if(c>=t){const i=t-c;if(i){const m=Yre(s[d],s[d-1])-180;return e$e(s[d],i,m,n)}else return _j(s[d])}else c+=Xre(s[d],s[d+1],n);return _j(s[s.length-1])}function Zre(e,t,n){if(e!==null)for(var r,s,c,d,i,m,x,T=0,C=0,A,I=e.type,k=I==="FeatureCollection",B=I==="Feature",j=k?e.features.length:1,V=0;V<j;V++){x=k?e.features[V].geometry:B?e.geometry:e,A=x?x.type==="GeometryCollection":!1,i=A?x.geometries.length:1;for(var H=0;H<i;H++){var G=0,X=0;if(d=A?x.geometries[H]:x,d!==null){m=d.coordinates;var Q=d.type;switch(T=0,Q){case null:break;case"Point":if(t(m,C,V,G,X)===!1)return!1;C++,G++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(t(m[r],C,V,G,X)===!1)return!1;C++,Q==="MultiPoint"&&G++}Q==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(s=0;s<m[r].length-T;s++){if(t(m[r][s],C,V,G,X)===!1)return!1;C++}Q==="MultiLineString"&&G++,Q==="Polygon"&&X++}Q==="Polygon"&&G++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(X=0,s=0;s<m[r].length;s++){for(c=0;c<m[r][s].length-T;c++){if(t(m[r][s][c],C,V,G,X)===!1)return!1;C++}X++}G++}break;case"GeometryCollection":for(r=0;r<d.geometries.length;r++)if(Zre(d.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n$e(e,t){var n,r,s,c,d,i,m,x,T,C,A=0,I=e.type==="FeatureCollection",k=e.type==="Feature",B=I?e.features.length:1;for(n=0;n<B;n++){for(i=I?e.features[n].geometry:k?e.geometry:e,x=I?e.features[n].properties:k?e.properties:{},T=I?e.features[n].bbox:k?e.bbox:void 0,C=I?e.features[n].id:k?e.id:void 0,m=i?i.type==="GeometryCollection":!1,d=m?i.geometries.length:1,s=0;s<d;s++){if(c=m?i.geometries[s]:i,c===null){if(t(null,A,x,T,C)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(c,A,x,T,C)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<c.geometries.length;r++)if(t(c.geometries[r],A,x,T,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}A++}}function r$e(e,t){n$e(e,function(n,r,s,c,d){var i=n===null?null:n.type;switch(i){case null:case"Point":case"LineString":case"Polygon":return t(GR(n,s,{bbox:c,id:d}),r,0)===!1?!1:void 0}var m;switch(i){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var x=0;x<n.coordinates.length;x++){var T=n.coordinates[x],C={type:m,coordinates:T};if(t(GR(C,s),r,x)===!1)return!1}})}function i$e(e,t){r$e(e,function(n,r,s){var c=0;if(n.geometry){var d=n.geometry.type;if(!(d==="Point"||d==="MultiPoint")){var i,m=0,x=0,T=0;if(Zre(n,function(C,A,I,k,B){if(i===void 0||r>m||k>x||B>T){i=C,m=r,x=k,T=B,c=0;return}var j=XVe([i,C],n.properties);if(t(j,r,s,B,c)===!1)return!1;c++,i=C})===!1)return!1}}})}function o$e(e,t,n){var r=n,s=!1;return i$e(e,function(c,d,i,m,x){s===!1&&n===void 0?r=c:r=t(r,c,d,i,m,x),s=!0}),r}function s$e(e,t={}){return o$e(e,(n,r)=>{const s=r.geometry.coordinates;return n+Xre(s[0],s[1],t)},0)}const a$e=({open:e=!1,onClose:t,onSave:n})=>{const[r,s]=U.useState(null),[c,d]=U.useState(!1),[i,m]=U.useState(0),[x,T]=U.useState({date:new Date().toISOString().split("T")[0],file:null}),{enqueueSnackbar:C}=k1(),A=Pu(X=>X.auth.token),I=Pu(X=>X.project.selectedProjectId);U.useEffect(()=>{e||(s(null),d(!1),m(0),T({date:new Date().toISOString().split("T")[0],file:null}))},[e]);const k=(X,Q)=>{T(ee=>({...ee,[X]:Q}))},B=X=>{X.length&&(s(X[0]),k("file",X[0]))},{getRootProps:j,getInputProps:V,isDragActive:H}=a4({onDrop:B,multiple:!1,accept:{"application/zip":[".zip"]}}),G=async()=>{var X,Q,ee;if(!x.file){C("Please select a file to upload.",{variant:"warning"});return}d(!0),m(0);try{const fe=(await Ps.post("/work-day/get-url",{projectId:I,name:x.date,filename:x.file.name,contentType:x.file.type,size:x.file.size},{headers:{Authorization:A}})).data.data;if(console.log(fe),fe.uploadType==="single")await Ps.put(fe.url,x.file,{headers:{"Content-Type":x.file.type},onUploadProgress:ue=>{const ae=Math.round(ue.loaded*100/ue.total);m(ae)}});else if(fe.uploadType==="multipart"){const{parts:ue,uploadId:ae,key:xe,partSize:we}=fe,Me=[];let Se=0;for(;Se<x.file.size;){const _e=Math.min(Se+we,x.file.size);Me.push(r.slice(Se,_e)),Se=_e}const Ae=[];for(let _e=0;_e<ue.length;_e++){const We=(X=(await fetch(ue[_e].url,{method:"PUT",body:Me[_e]})).headers.get("ETag"))==null?void 0:X.replace(/"/g,"");Ae.push({PartNumber:ue[_e].partNumber,ETag:We});const Fe=Math.round((_e+1)/ue.length*100);m(Fe)}await Ps.post("/work-day/complete-upload",{projectId:I,name:x.date,key:xe,uploadId:ae,parts:Ae},{headers:{Authorization:A}})}C("Upload successful!",{variant:"success"}),fe.uploadType==="single"&&C("SuccessFully Created Historical Data",{variant:"success"}),n&&n(),t()}catch(ce){console.log(ce),C(((ee=(Q=ce==null?void 0:ce.response)==null?void 0:Q.data)==null?void 0:ee.message)||ce.message||"Upload failed.",{variant:"error"})}finally{d(!1),m(0)}};return z.jsx(CE,{open:e,onClose:t,children:z.jsxs(Pn,{sx:{outline:"none",width:400,maxWidth:"90vw",bgcolor:"background.paper",borderRadius:2,boxShadow:24,mx:"auto",mt:"10vh",p:3},children:[z.jsx(En,{variant:"h5",sx:{mb:2},children:"Upload New Capture Into Historical Data"}),z.jsxs(Pn,{sx:{display:"flex",flexDirection:"column",gap:2},children:[z.jsx(Vi,{label:"Date of Capture",type:"date",value:x.date,onChange:X=>k("date",X.target.value),fullWidth:!0,size:"small",disabled:c,InputLabelProps:{shrink:!0}}),z.jsxs(Pn,{...j(),sx:{border:"2px dashed #ccc",borderRadius:"8px",padding:4,textAlign:"center",cursor:c?"not-allowed":"pointer",backgroundColor:H?"#f0f0f0":"transparent",mb:2,opacity:c?.5:1,pointerEvents:c?"none":"auto"},children:[z.jsx("input",{...V()}),z.jsx(Tte,{size:32}),z.jsx(En,{variant:"h6",gutterBottom:!0,children:"Upload Zip File"}),z.jsx(En,{variant:"body2",sx:{mb:2},children:"Drag & drop your .zip file or click below to browse"}),z.jsx(Wi,{variant:"outlined",disabled:c,children:"Browse Files"}),r&&z.jsxs(En,{variant:"subtitle1",sx:{mt:1},children:["Selected: ",r.name]})]}),c&&z.jsxs(Pn,{children:[z.jsxs(En,{variant:"body2",gutterBottom:!0,children:["Uploading... ",i,"%"]}),z.jsx(fN,{variant:"determinate",value:i})]}),z.jsxs(Pn,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[z.jsx(Wi,{onClick:t,disabled:c,children:"Cancel"}),z.jsx(Wi,{variant:"contained",onClick:G,disabled:!x.file||c,startIcon:c&&z.jsx(wT,{size:16}),children:c?"Uploading...":"Upload"})]})]})]})})};Sh.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";const l$e=[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",icon:ax},{title:"Exterior(Map View)",icon:Pte}];function c$e(){var dt,gt,Nt,wt,ot;const e=U.useRef(null),t=U.useRef(null),n=U.useRef(null),[r,s]=U.useState(!1),[c,d]=U.useState(""),[i,m]=U.useState({orthomosaic:!0,annotations:!0}),[x,T]=U.useState(!1),[C,A]=U.useState([]),[I,k]=U.useState([]),[B,j]=U.useState(!1),[V,H]=U.useState(null),[G,X]=U.useState(!1),[Q,ee]=U.useState([]),[ce,fe]=U.useState({open:!1,area:0,position:{x:0,y:0}}),[ue,ae]=U.useState({open:!1,feature:null,isEdit:!1,position:{x:0,y:0}}),xe=Pu(st=>st.project.selectedProjectId),we=Pu(st=>st.auth.token);U.useEffect(()=>{if(!xe)return;(async()=>{var St,Dt,Et,yt;try{j(!0),H(null);const Ct=((Dt=(St=(await Ps.get("/work-day",{params:{projectId:xe,status:"completed"},headers:{Authorization:we}})).data)==null?void 0:St.data)==null?void 0:Dt.results)||[];A(Ct.map(Wt=>Wt.name)),k(Ct),Ct.length>0?d(Ct[0].name):H("No completed work days found for this project.")}catch(Lt){H(((yt=(Et=Lt.response)==null?void 0:Et.data)==null?void 0:yt.message)||"Failed to load project data. Please try again."),A([]),k([])}finally{j(!1)}})()},[xe,we]),U.useEffect(()=>{if(!e.current||t.current)return;if(!Sh.accessToken){H("Mapbox API key is not configured.");return}const st=new Sh.Map({container:e.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[72.5714,23.0225],zoom:15,attributionControl:!1,preserveDrawingBuffer:!0,minZoom:0,maxZoom:23});return st.on("load",()=>{t.current=st,s(!0),H(null),st.addControl(new Sh.FullscreenControl,"top-right"),st.addControl(new Sh.NavigationControl({visualizePitch:!0}),"top-right");const St=new Sh.ScaleControl({unit:"metric",maxWidth:100});st.addControl(St,"bottom-left"),setTimeout(()=>{const yt=st.getContainer().querySelector(".mapboxgl-ctrl-scale");yt&&(yt.style.display="block",yt.style.visibility="visible",yt.style.opacity="1")},1e3);const Dt=new SP({displayControlsDefault:!1,controls:{polygon:!0,line_string:!0,point:!0,trash:!0},styles:[,{id:"gl-draw-line",type:"line",paint:{"line-color":"#ff0000","line-width":1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","$type","Polygon"],["==","active","true"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","$type","Polygon"],["==","active","false"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-dasharray":[.2,2],"line-width":3}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","$type","Polygon"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":4,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":2}},{id:"gl-draw-polygon-vertex-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["==","active","true"]],paint:{"circle-radius":6,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":3}},{id:"gl-draw-polygon-vertex-inactive",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["==","active","false"]],paint:{"circle-radius":5,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":2}},{id:"gl-draw-line-vertex-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["==","$type","LineString"],["==","active","true"]],paint:{"circle-radius":6,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":3}},{id:"gl-draw-line-vertex-inactive",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["==","$type","LineString"],["==","active","false"]],paint:{"circle-radius":5,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":2}},{id:"gl-draw-point-point-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["==","$type","Point"],["==","active","true"]],paint:{"circle-radius":6,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":3}},{id:"gl-draw-point-point-inactive",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["==","$type","Point"],["==","active","false"]],paint:{"circle-radius":5,"circle-color":"#3bb2d0","circle-stroke-color":"#ffffff","circle-stroke-width":2}}]});function Et(yt){const Lt=yt.features[0],Ct=s$e(Lt,{units:"kilometers"}),fn=`${(Ct*1e3).toFixed(2)} m`,Zt=t$e(Lt,Ct/2,{units:"kilometers"});st.getSource("scale-label")?st.getSource("scale-label").setData({type:"FeatureCollection",features:[{type:"Feature",geometry:Zt.geometry,properties:{text:fn}}]}):(st.addSource("scale-label",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:Zt.geometry,properties:{text:fn}}]}}),st.addLayer({id:"scale-label-layer",type:"symbol",source:"scale-label",layout:{"text-field":["get","text"],"text-size":14,"text-offset":[0,-1.5],"text-anchor":"top"},paint:{"text-color":"#ff0000","text-halo-color":"#ffffff","text-halo-width":2}})),jb(fn,{variant:"success"})}if(st.addControl(Dt,"top-right"),n.current=Dt,st.on("draw.create",yt=>{const Lt=yt.features[0];if(Lt.geometry.type==="LineString"&&Et(yt),Lt.geometry.type==="Polygon"){const Ct=pj.geometry(Lt.geometry),Wt=(Ct/1e6).toFixed(2),fn=Ct.toFixed(2),Ut=st.getCanvas().getBoundingClientRect();fe({open:!0,area:{km2:Wt,m2:fn},position:{x:Ut.width/2,y:Ut.height/2}})}if(Lt.geometry.type==="Point"){const Wt=st.getCanvas().getBoundingClientRect(),fn=`comment-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Zt={type:"Feature",geometry:Lt.geometry,id:fn,properties:{comment:"",created:new Date().toISOString(),type:"comment"}};console.log("=== COMMENT CREATION DEBUG ==="),console.log("Creating new comment with stable ID:",fn),console.log("Complete comment feature:",Zt),console.log("Current commentFeatures before adding:",Q);const Ut=[...Q,Zt];console.log("Updated commentFeatures after adding:",Ut),ee(Ut),We(Ut),ae({open:!0,feature:Zt,isEdit:!1,position:{x:Wt.width/2,y:Wt.height/2}}),console.log("Comment input set with feature ID:",Zt.id),console.log("=== END COMMENT CREATION DEBUG ===")}}),st.on("draw.update",yt=>{const Lt=yt.features[0];if(Lt.geometry.type==="LineString"&&Et(yt),Lt.geometry.type==="Polygon"){const Ct=pj.geometry(Lt.geometry),Wt=(Ct/1e6).toFixed(2),fn=Ct.toFixed(2);fe({open:!0,area:{km2:Wt,m2:fn},position:{x:0,y:0}})}}),st.on("click","comment-points",yt=>{var Zt;yt.preventDefault();const Lt=yt.features[0],Wt=st.getCanvas().getBoundingClientRect();console.log("Clicked comment feature:",Lt),console.log("Feature ID:",Lt.id),console.log("Feature properties:",Lt.properties);const fn={type:"Feature",geometry:Lt.geometry,id:Lt.id,properties:{...Lt.properties,comment:((Zt=Lt.properties)==null?void 0:Zt.comment)||"",type:"comment",lastEdited:new Date().toISOString()}};console.log("Complete comment feature for editing:",fn),ae({open:!0,feature:fn,isEdit:!0,position:{x:Wt.width/2,y:Wt.height/2}})}),I.length>0&&c){const yt=I.find(Lt=>Lt.name===c);yt&&yt.tileBaseUrl&&Se(yt)}}),st.on("sourcedata",St=>{var Dt;(Dt=St.sourceId)!=null&&Dt.includes("ortho-")&&St.isSourceLoaded&&X(!1)}),()=>{st&&st.remove&&st.remove(),t.current=null,s(!1)}},[]),U.useEffect(()=>{if(!c||!t.current||!r||!I.length)return;const st=I.find(St=>St.name===c);if(st){if(console.log("Loading work day:",st.name,"Tile URL:",st.tileBaseUrl),Me(st.id),i.orthomosaic&&st.tileBaseUrl?(X(!0),console.log("Adding tile layer for:",st.id),Se(st)):console.log("Skipping tile layer - orthomosaic:",i.orthomosaic,"tileBaseUrl:",!!st.tileBaseUrl),!(i.annotations&&st.kmlFile)){const St=t.current;St&&St.getLayer("annotations")&&St.removeLayer("annotations"),St&&St.getSource("annotations")&&St.removeSource("annotations")}st.tileBounds&&Ae(st.tileBounds),setTimeout(()=>{We(Q)},500)}},[c,r,i,I,Q]);const Me=st=>{const St=t.current;if(!St)return;[`ortho-${st}`,"comment-points"].forEach(yt=>{St.getLayer(yt)&&(console.log("Removing layer:",yt),St.removeLayer(yt))}),[`ortho-${st}`,"comments"].forEach(yt=>{St.getSource(yt)&&(console.log("Removing source:",yt),St.removeSource(yt))})},Se=st=>{const St=t.current;if(!St||!st.tileBaseUrl)return;const Dt=`ortho-${st.id}`;try{St.getLayer(Dt)&&St.removeLayer(Dt),St.getSource(Dt)&&St.removeSource(Dt),St.addSource(Dt,{type:"raster",tiles:[`${st.tileBaseUrl}/{z}/{x}/{y}.png`],tileSize:256,minzoom:18,maxzoom:24});const Et=St.getStyle().layers.find(yt=>yt.id.startsWith("gl-draw-")).id;St.addLayer({id:Dt,type:"raster",source:Dt,paint:{"raster-opacity":i.orthomosaic?1:0,"raster-brightness-min":0,"raster-brightness-max":1}},Et),console.log("Raster layer added:",Dt,"URL:",st.tileBaseUrl),setTimeout(()=>{const yt=St.getLayer(Dt),Lt=St.getSource(Dt);console.log("Layer check:",{layerExists:!!yt,sourceExists:!!Lt,layerVisible:St.getLayoutProperty(Dt,"visibility")!=="none",paintOpacity:St.getPaintProperty(Dt,"raster-opacity")})},1e3),X(!1),console.log(St.getStyle().layers.map(yt=>yt.id),"<=%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%")}catch(Et){console.error("Error adding tile layer:",Et),H("Failed to load orthomosaic tiles."),X(!1)}},Ae=st=>{const St=t.current;if(!St)return;const{north:Dt,south:Et,east:yt,west:Lt}=st;St.fitBounds([[Lt,Et],[yt,Dt]],{padding:50,maxZoom:18})},_e=st=>{m(St=>({...St,[st.target.name]:st.target.checked}))},Pe=st=>{d(st.target.value)},We=st=>{const St=t.current;if(!(!St||!r)){if(console.log("Updating comment layer with features:",st),St.getLayer("comment-points")&&(console.log("Removing existing comment layer"),St.removeLayer("comment-points")),St.getSource("comments")&&(console.log("Removing existing comment source"),St.removeSource("comments")),st&&st.length>0){console.log("Adding new comment layer with",st.length,"features"),St.addSource("comments",{type:"geojson",data:{type:"FeatureCollection",features:st}}),St.addLayer({id:"comment-points",type:"symbol",source:"comments",layout:{"icon-image":"marker-15","icon-size":1.5,"text-field":["get","comment"],"text-offset":[0,1.5],"text-anchor":"top"},paint:{"text-color":"#000","text-halo-color":"#fff","text-halo-width":2}});const Dt=St.getLayer("comment-points");Dt&&console.log("Comment layer added successfully with ID:",Dt.id)}else console.log("No features to display, comment layer removed");St.isStyleLoaded()&&St.triggerRepaint(),console.log("Comment layer update complete")}},Fe=()=>{const st=t.current;!st||!r||(console.log("Force refreshing comment layer..."),We(Q),st.isStyleLoaded()&&st.triggerRepaint())},Ce=st=>{var St,Dt;if(st.trim()){if(console.log("=== COMMENT SUBMISSION DEBUG ==="),console.log("Submitting comment:",st),console.log("Comment input feature:",ue.feature),console.log("Feature ID:",(St=ue.feature)==null?void 0:St.id),console.log("Is edit mode:",ue.isEdit),!((Dt=ue.feature)!=null&&Dt.id)){console.error("Cannot submit comment: No feature ID found"),alert("Error: Cannot submit comment. Please try again.");return}if(ue.isEdit){console.log("1231312321######################################################");const Et=Q.map(yt=>yt.id===ue.feature.id?{...yt,properties:{...yt.properties,comment:st}}:yt);ee(Et),We(Et)}else{console.log("######################################################"),console.log(Q,"<==== comment Feaures"),console.log(ue,"<==");const Et=Q.map(yt=>(console.log("i ran wowowoowowwowo"),console.log(yt.id,ue.feature.id,yt.id===ue.feature.id,"<=== dimagh ki dahi"),yt.id===ue.feature.id?{...yt,properties:{...yt.properties,comment:st}}:yt));ee(Et),We(Et)}ae({open:!1,feature:null,isEdit:!1,position:{x:0,y:0}}),console.log("=== END SUBMISSION DEBUG ===")}},He=st=>{console.log("=== COMMENT DELETION DEBUG ==="),console.log("Attempting to delete comment",st),console.log("Current commentFeatures:",Q),console.log(Q[0].properties.comment),console.log(st.properties.comment);const St=Q.filter(Dt=>Dt.properties.comment!==st.properties.comment);console.log("Updated commentFeatures after deletion:",St),ee(St),Fe(),ae({open:!1,feature:null,isEdit:!1,position:{x:0,y:0}}),console.log("=== END DELETION DEBUG ===")};return xe?z.jsxs(Ph,{children:[z.jsxs(Pn,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Exterior (Map View)"}),z.jsx(Wi,{variant:"contained",onClick:()=>T(!0),disabled:B,children:"Upload New"})]}),z.jsx(a$e,{open:x,onClose:()=>T(!1)}),z.jsx(ry,{links:l$e,card:!0,custom:!0,rightAlign:!1}),z.jsx(xc,{sx:{my:2}}),V&&z.jsx(zk,{severity:"error",sx:{mb:2},children:V}),z.jsxs(Pn,{display:"flex",height:"calc(100vh - 200px)",gap:2,children:[z.jsxs(Pn,{sx:{width:"300px",pr:2,overflowY:"auto"},children:[z.jsx(En,{variant:"h3",gutterBottom:!0,children:"Layers"}),z.jsxs(LTe,{children:[z.jsx(v8,{control:z.jsx(f8,{checked:i.orthomosaic,onChange:_e,name:"orthomosaic",disabled:B}),label:"Orthomosaic"}),z.jsx(v8,{control:z.jsx(f8,{checked:i.annotations,onChange:_e,name:"annotations",disabled:B}),label:"Annotations (KML)"})]}),z.jsxs(tu,{fullWidth:!0,sx:{mt:3},children:[z.jsx(Xg,{children:"Historical Data"}),z.jsx(nu,{value:c||"",onChange:Pe,label:"Historical Data",disabled:B||C.length===0,children:C.map(st=>z.jsx(ko,{value:st,children:zA(st).format("DD-MM-YYYY")},st))})]}),B&&z.jsx(Pn,{sx:{display:"flex",justifyContent:"center",mt:2},children:z.jsx(wT,{size:24})}),!B&&C.length===0&&z.jsx(zk,{severity:"info",sx:{mt:2},children:"No historical data available for this project."})]}),z.jsxs(Pn,{ref:e,sx:{flex:1,borderRadius:2,overflow:"hidden",height:"100%",position:"relative",border:"1px solid #e0e0e0","& .mapboxgl-ctrl-scale":{border:"2px solid #333",borderTop:"none",color:"#333",backgroundColor:"rgba(255, 255, 255, 0.8)",padding:"2px 6px",fontSize:"12px",fontWeight:"bold"}},children:[G&&z.jsxs(Pn,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",zIndex:1e3},children:[z.jsx(wT,{}),z.jsx(En,{variant:"body1",sx:{ml:2},children:"Loading tiles..."})]}),z.jsx(gm,{in:ce.open,children:z.jsxs(fa,{elevation:4,sx:{position:"absolute",top:20,left:20,zIndex:2e3,p:1.5,minWidth:150,backgroundColor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",border:"1px solid #3bb2d0",borderRadius:1.5},children:[z.jsxs(Pn,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[z.jsx(En,{variant:"subtitle2",color:"primary",sx:{fontSize:"0.875rem"},children:"Area"}),z.jsx(Kc,{size:"small",onClick:()=>fe({...ce,open:!1}),sx:{p:.5},children:z.jsx(mH,{size:14})})]}),z.jsxs(En,{variant:"body2",sx:{fontWeight:"bold",mb:.5},children:[ce.area.km2," km²"]}),z.jsxs(En,{variant:"caption",color:"textSecondary",children:["(",ce.area.m2," m²)"]})]})}),z.jsx(gm,{in:ue.open,children:z.jsxs(fa,{elevation:4,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2e3,p:1.5,width:250,backgroundColor:"#ffffff",border:"1px solid #e0e0e0",borderRadius:1.5},children:[z.jsxs(Pn,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[z.jsx(En,{variant:"subtitle2",sx:{fontSize:"0.875rem"},children:ue.isEdit?"Edit Comment":"Add Comment"}),z.jsx(Kc,{size:"small",onClick:()=>ae({open:!1,feature:null,isEdit:!1,position:{x:0,y:0}}),sx:{p:.5},children:z.jsx(mH,{size:14})})]}),z.jsx(Vi,{autoFocus:!0,size:"small",fullWidth:!0,variant:"outlined",multiline:!0,rows:2,placeholder:"Enter comment...",value:((gt=(dt=ue.feature)==null?void 0:dt.properties)==null?void 0:gt.comment)||"",onChange:st=>{if(ue.feature){const St={...ue.feature,properties:{...ue.feature.properties,comment:st.target.value}};ae({...ue,feature:St})}},sx:{mb:1}}),z.jsxs(Pn,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[ue.isEdit&&ue.feature&&z.jsx(Wi,{size:"small",variant:"contained",color:"error",startIcon:z.jsx(Yke,{size:14}),onClick:()=>{He(ue.feature)},sx:{fontSize:"0.75rem",py:.5},children:"Delete"}),z.jsx(Wi,{size:"small",variant:"contained",onClick:()=>{var st,St;return Ce(((St=(st=ue.feature)==null?void 0:st.properties)==null?void 0:St.comment)||"")},disabled:!((ot=(wt=(Nt=ue.feature)==null?void 0:Nt.properties)==null?void 0:wt.comment)!=null&&ot.trim()),sx:{fontSize:"0.75rem",py:.5},children:ue.isEdit?"Update":"Add"})]})]})})]})]})]}):z.jsx(Ph,{children:z.jsx(zk,{severity:"warning",children:"No project selected. Please select a project first."})})}Sh.accessToken="pk.eyJ1IjoiaGlyYWtyYWoiLCJhIjoiY21icXd5eHRnMDNtaTJxczcxd2RmbTZwOCJ9.P6kpsuLMDdeK2DIMJZMrmw";function u$e(e,t){return new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()))}const d$e=new Date(2024,0,1),h$e=new Date(2025,0,1),AS=new Array(10).fill(null).map((e,t)=>{const n=u$e(d$e,h$e);return{id:t,label:n.toDateString(),center:[72.5714+t*.1,23.0225+t*.1],zoom:10+t%3}}),nG=({center:e,zoom:t,mapStyle:n})=>{const r=U.useRef(null);return U.useEffect(()=>{if(!r.current)return;const s=new Sh.Map({container:r.current,style:n,center:e,zoom:t});return()=>s.remove()},[e,t,n]),z.jsx(Pn,{ref:r,sx:{width:"100%",height:"100%"}})};function f$e(){const[e,t]=U.useState(AS[0]),[n,r]=U.useState(AS[1]);Zo();const s=(d,i)=>{const m=AS.find(x=>x.id===i);d==="first"?t(m):r(m)},c=[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",to:"/project/1/View",icon:ax},{title:"Comapre View",icon:Cte}];return z.jsxs(Ph,{children:[z.jsx(Pn,{sx:{justifyContent:"space-between",alignItems:"center"},children:z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Compare View"})}),z.jsx(Pn,{justifyContent:"left",children:z.jsx(ry,{links:c,card:!0,custom:!0,rightAlign:!1})}),z.jsxs(Pn,{display:"flex",gap:2,mb:3,children:[z.jsx(tu,{fullWidth:!0,children:z.jsx(nu,{value:e.id,onChange:d=>s("first",d.target.value),children:AS.map(d=>z.jsx(ko,{value:d.id,children:d.label},d.id))})}),z.jsx(tu,{fullWidth:!0,children:z.jsx(nu,{value:n.id,onChange:d=>s("second",d.target.value),children:AS.map(d=>z.jsx(ko,{value:d.id,children:d.label},d.id))})})]}),z.jsx(Pn,{mb:5,borderRadius:2,overflow:"hidden",sx:{height:400},children:z.jsx(m4,{itemOne:z.jsx(Pn,{sx:{width:"100%",height:"100%"},children:z.jsx(nG,{center:e.center,zoom:e.zoom,mapStyle:"mapbox://styles/mapbox/streets-v11"})}),itemTwo:z.jsx(Pn,{sx:{width:"100%",height:"100%"},children:z.jsx(nG,{center:n.center,zoom:n.zoom,mapStyle:"mapbox://styles/mapbox/satellite-v9"})}),style:{height:"100%"}})})]})}function Kre({captionLabel:e,currencies:t,formState:n,iconPrimary:r,iconSecondary:s,selected:c,textPrimary:d,textSecondary:i}){const m=r,x=r?z.jsx(m,{fontSize:"small",sx:{color:"grey.700"}}):null,T=s,C=s?z.jsx(T,{fontSize:"small",sx:{color:"grey.700"}}):null,A=n==="error",I=c||"",[k,B]=U.useState(I),j=V=>{V!=null&&V.target.value&&B(V==null?void 0:V.target.value)};return z.jsx(tu,{fullWidth:!0,error:A,children:z.jsx(Vi,{id:"outlined-select-currency",select:!0,fullWidth:!0,label:e,value:k,onChange:j,slotProps:{input:{startAdornment:z.jsxs(z.Fragment,{children:[x&&z.jsx(BS,{position:"start",children:x}),d&&z.jsxs(z.Fragment,{children:[z.jsx(BS,{position:"start",children:d}),z.jsx(xc,{sx:{height:28,m:.5},orientation:"vertical"})]})]}),endAdornment:z.jsxs(z.Fragment,{children:[C&&z.jsx(BS,{position:"end",children:C}),i&&z.jsxs(z.Fragment,{children:[z.jsx(xc,{sx:{height:28,m:.5},orientation:"vertical"}),z.jsx(BS,{position:"end",children:i})]})]})}},children:t==null?void 0:t.map((V,H)=>z.jsx(ko,{value:V.value,children:V.label},H))})})}Kre.propTypes={captionLabel:rt.string,currencies:rt.object,formState:rt.string,iconPrimary:rt.any,iconSecondary:rt.any,selected:rt.string,textPrimary:rt.string,textSecondary:rt.string};const p$e=[{value:"sunny",label:"Sunny"},{value:"cloudy",label:"Cloudy"},{value:"windy",label:"Windy"},{value:"rainy",label:"Rainy"}],m$e=[{value:"completed",label:"Completed"},{value:"in_progress",label:"In Progress"},{value:"delayed",label:"Delayed"},{value:"planned",label:"Planned Further"}],g$e=()=>{const[e,t]=U.useState({name:"",location:"",contractId:"",team:[]}),[n,r]=U.useState(()=>new Date().toISOString().split("T")[0]),[s,c]=U.useState(()=>{const Fe=new Date;return Fe.setDate(Fe.getDate()+1),Fe.toISOString().split("T")[0]}),[d,i]=U.useState(""),[m,x]=U.useState(""),[T,C]=U.useState(""),[A,I]=U.useState(""),[k,B]=U.useState([{name:"",quantity:"",unit:"",status:"",cost:""}]),[j,V]=U.useState(""),[H,G]=U.useState(""),[X,Q]=U.useState(""),[ee,ce]=U.useState(""),[fe,ue]=U.useState([]),[ae,xe]=U.useState(""),[we,Me]=U.useState([]),Se=(Fe,Ce,He)=>{const dt=[...k];dt[Fe][Ce]=He,B(dt)},Ae=()=>{B([...k,{name:"",quantity:"",unit:"",status:"",cost:""}])},_e=()=>{ae.trim()&&(Me([...we,ae.trim()]),xe(""))},Pe=Fe=>{const Ce=Array.from(Fe.target.files);ue(He=>[...He,...Ce])},We=[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",to:"/project/1/View",icon:ax},{title:"Progress Report",icon:Mte}];return z.jsxs(Ph,{children:[z.jsxs(Pn,{children:[z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Generate Progress Report"}),z.jsx(ry,{links:We,card:!0,custom:!0,rightAlign:!1})]}),z.jsx(En,{variant:"subtitle1",sx:{mb:2},children:"Fill in the details for today's progress report"}),z.jsxs(Pn,{component:"form",noValidate:!0,autoComplete:"off",children:[z.jsxs(Ii,{container:!0,spacing:2,sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:2,p:2,flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},children:[z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"20%"},children:z.jsx(Vi,{label:"Project",value:e.name,sx:{mb:1},fullWidth:!0})}),z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"20%"},children:z.jsx(Vi,{label:"Project Location",value:e.location,fullWidth:!0,sx:{mb:1}})}),z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"20%"},children:z.jsx(Vi,{label:"Contract ID/Project number",value:e.contractId,fullWidth:!0,sx:{mb:1}})}),z.jsx(Ii,{item:!0,xs:12,md:6,sx:{width:"20%"},children:z.jsx(Vi,{label:"From",type:"date",value:n,onChange:Fe=>setDate(Fe.target.value),fullWidth:!0,sx:{mb:1}})}),z.jsx(Ii,{item:!0,xs:12,md:6,sx:{width:"20%"},children:z.jsx(Vi,{label:"To",type:"date",value:s,onChange:Fe=>setDate(Fe.target.value),fullWidth:!0,sx:{mb:1}})}),z.jsx(Ii,{item:!0,xs:12,md:6,sx:{width:"20%"},children:z.jsxs(tu,{fullWidth:!0,sx:{mb:1},children:[z.jsx(Xg,{id:"project-team-label",children:"Project Team"}),z.jsxs(nu,{labelId:"project-team-label",label:"Project Team",multiple:!0,value:e.team,onChange:Fe=>t(Ce=>({...Ce,team:Fe.target.value})),renderValue:Fe=>Fe.join(", "),children:[z.jsx(ko,{value:"alice@example.com",children:"alice@example.com"}),z.jsx(ko,{value:"bob@example.com",children:"bob@example.com"}),z.jsx(ko,{value:"carol@example.com",children:"carol@example.com"}),z.jsx(ko,{value:"dave@example.com",children:"dave@example.com"})]})]})})]}),e.team.length>0&&z.jsxs(fa,{spacing:2,sx:{mt:2,mb:2,p:2,border:"1px solid #e0e0e0",borderRadius:2,width:"100%"},children:[z.jsx(En,{variant:"subtitle2",sx:{mb:1,color:"text.secondary"},children:"Project Team Members"}),z.jsx(Ns,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:e.team.map((Fe,Ce)=>{var He;return z.jsx(yd,{label:Fe,avatar:z.jsx(sx,{sx:{bgcolor:"primary.main",width:24,height:24,fontSize:14},children:(He=Fe[0])==null?void 0:He.toUpperCase()}),sx:{mb:1}},Ce)})})]}),z.jsx(Pn,{sx:{mb:2},children:z.jsx(Kre,{captionLabel:"Weather Conditions",currencies:p$e,selected:d,formState:"",textPrimary:null,textSecondary:null,iconPrimary:null,iconSecondary:null})}),z.jsxs(Ii,{container:!0,justifyContent:"space-between",sx:{mb:2,flexWrap:"nowrap",borderRadius:2},children:[z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"33%"},children:z.jsx(Vi,{label:"Manpower",value:m,onChange:Fe=>x(Fe.target.value),fullWidth:!0})}),z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"33%"},children:z.jsx(Vi,{label:"Material",value:T,onChange:Fe=>C(Fe.target.value),fullWidth:!0})}),z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"33%"},children:z.jsx(Vi,{label:"Machinery",value:A,onChange:Fe=>I(Fe.target.value),fullWidth:!0})})]}),z.jsxs(Pn,{sx:{mb:2,border:"1px solid #e0e0e0",borderRadius:2,p:2},children:[z.jsx(En,{variant:"h5",sx:{mb:1},children:"Activity Progress"}),k.map((Fe,Ce)=>z.jsxs(Ii,{container:!0,spacing:2,sx:{mb:1},children:[z.jsx(Ii,{item:!0,xs:12,md:5,children:z.jsx(Vi,{label:"Activity Name",value:Fe.name,onChange:He=>Se(Ce,"name",He.target.value),fullWidth:!0})}),z.jsx(Ii,{item:!0,xs:12,md:3,children:z.jsx(Vi,{label:"Quantity",value:Fe.quantity,onChange:He=>Se(Ce,"quantity",He.target.value),fullWidth:!0,type:"number"})}),z.jsx(Ii,{item:!0,xs:12,md:3,children:z.jsx(Vi,{label:"Unit",value:Fe.unit,onChange:He=>Se(Ce,"unit",He.target.value),fullWidth:!0,type:"text"})}),z.jsx(Ii,{item:!0,xs:12,md:4,children:z.jsxs(tu,{fullWidth:!0,children:[z.jsx(Xg,{children:"Status"}),z.jsx(nu,{label:"Status",value:Fe.status,onChange:He=>Se(Ce,"status",He.target.value),inputComponent:({inputRef:He,...dt})=>z.jsxs("select",{ref:He,...dt,style:{width:"100%",height:"100%",border:"none",background:"none"},children:[z.jsx("option",{value:""}),m$e.map(gt=>z.jsx("option",{value:gt.value,children:gt.label},gt.value))]})})]})}),z.jsx(Ii,{item:!0,xs:12,md:3,children:z.jsx(Vi,{label:"Cost",value:Fe.cost,onChange:He=>Se(Ce,"cost",He.target.value),fullWidth:!0,type:"text"})})]},Ce)),z.jsx(Wi,{variant:"outlined",startIcon:z.jsx(N5,{}),onClick:Ae,sx:{mt:1},children:"Add Activity"})]}),z.jsx(Pn,{sx:{mb:2},children:z.jsx(Vi,{label:"Hindrances and Challenges",value:j,onChange:Fe=>V(Fe.target.value),fullWidth:!0,multiline:!0,minRows:2,placeholder:"Describe any issues or challenges encountered"})}),z.jsxs(Ii,{container:!0,spacing:2,sx:{mb:2,borderRadius:2,border:"1px solid #e0e0e0",flexWrap:"nowrap"},children:[z.jsx(Ii,{item:!0,xs:12,sx:{display:"flex",flexDirection:"column",width:"33%"},children:z.jsx(Vi,{label:"Key Milestones Achieved",value:H,onChange:Fe=>G(Fe.target.value),fullWidth:!0,multiline:!0,minRows:2})}),z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"33%"},children:z.jsx(Vi,{label:"Quality Observations",value:X,onChange:Fe=>Q(Fe.target.value),fullWidth:!0,multiline:!0,minRows:2})}),z.jsx(Ii,{item:!0,xs:12,md:4,sx:{width:"33%"},children:z.jsx(Vi,{label:"Safety Remarks",value:ee,onChange:Fe=>ce(Fe.target.value),fullWidth:!0,multiline:!0,minRows:2})})]}),z.jsxs(Wi,{variant:"outlined",component:"label",sx:{mt:1,mb:2},children:["Add Photos",z.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:Pe})]}),fe.length>0&&z.jsx(Pn,{sx:{mt:1},children:z.jsx(Ii,{container:!0,spacing:1,children:fe.map((Fe,Ce)=>z.jsx(Ii,{item:!0,children:z.jsx("img",{src:URL.createObjectURL(Fe),alt:`uploaded-${Ce}`,style:{width:60,height:60,objectFit:"cover",borderRadius:4,border:"1px solid #ccc"}})},Ce))})}),z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",mb:2},children:[z.jsx(Vi,{label:"Create New Field",value:ae,onChange:Fe=>xe(Fe.target.value),sx:{flex:1,mr:2}}),z.jsx(Wi,{variant:"contained",onClick:_e,disabled:!ae.trim(),children:"Add +"})]}),we.length>0&&z.jsx(Ns,{spacing:2,sx:{mb:2},children:we.map((Fe,Ce)=>z.jsx(Vi,{fullWidth:!0,label:`Custom Field ${Ce+1}`,value:Fe,onChange:He=>{const dt=[...we];dt[Ce]=He.target.value,Me(dt)}},Ce))}),z.jsx(Wi,{variant:"contained",color:"primary",fullWidth:!0,children:"Submit"})]})]})};function y$e(){return z.jsx(Pn,{sx:{flex:1,height:"100%",bgcolor:"#e0e0e0",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:z.jsx(En,{variant:"h6",children:"Map View (Mapbox Placeholder)"})})}const Qre=Gi([z.jsx("path",{d:"m12 2-5.5 9h11z"},"0"),z.jsx("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),z.jsx("path",{d:"M3 13.5h8v8H3z"},"2")]),v$e=Gi(z.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}));function _$e({ticketList:e}){const t=Zo(),n=r=>r==="High"?t.palette.error:r==="Medium"?t.palette.warning:t.palette.success;return z.jsxs(Pn,{children:[z.jsx(En,{variant:"h6",sx:{mb:2},children:"Ticket List"}),z.jsx(Ns,{spacing:2,children:e.map(r=>{const s=n(r.priority);return z.jsxs(fa,{elevation:2,sx:{p:2,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,flexWrap:"wrap",boxShadow:t.shadows[3]},children:[z.jsxs(Pn,{sx:{flexGrow:1,minWidth:240},children:[z.jsx(En,{variant:"h6",fontWeight:600,sx:{mb:.5,color:t.palette.text.primary},children:r.issue}),z.jsxs(En,{variant:"caption",color:"text.secondary",children:["Created At: ",r.createdAt.toLocaleString()]})]}),z.jsxs(Ns,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap",justifyContent:"flex-end",minWidth:300},children:[z.jsx(nT,{title:"Issue Type",children:z.jsx(yd,{icon:z.jsx(Qre,{}),label:r.type,variant:"outlined",size:"small",sx:{fontWeight:500,borderColor:t.palette.grey[300]}})}),z.jsx(nT,{title:"Assigned To",children:z.jsx(yd,{icon:z.jsx(V5,{}),label:r.assignedTo,size:"small",color:"primary",sx:{fontWeight:500}})}),z.jsx(nT,{title:"Priority",children:z.jsx(yd,{icon:z.jsx(v$e,{}),label:r.priority,size:"small",sx:{bgcolor:s.light,color:s.dark,fontWeight:600}})})]})]},r.id)})})]})}function ey(e){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(e)}function x$e(e,t){if(ey(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jre(e){var t=x$e(e,"string");return ey(t)=="symbol"?t:t+""}function y0(e,t,n){return(t=Jre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rG(Object(n),!0).forEach(function(r){y0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rG(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xm(e,t){if(e==null)return{};var n,r,s=xi(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function rl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jre(r.key),r)}}function il(e,t,n){return t&&iG(e.prototype,t),n&&iG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function YR(e){return YR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YR(e)}function eie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eie=function(){return!!e})()}function b$e(e,t){if(t&&(ey(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kQ(e)}function Ec(e,t,n){return t=YR(t),b$e(e,eie()?Reflect.construct(t,n||[],YR(e).constructor):t.apply(e,n))}function Cc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yR(e,t)}function tie(e){if(Array.isArray(e))return e}function w$e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,c,d,i=[],m=!0,x=!1;try{if(c=(n=n.call(e)).next,t!==0)for(;!(m=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);m=!0);}catch(T){x=!0,s=T}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(x)throw s}}return i}}function bj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y4(e,t){if(e){if(typeof e=="string")return bj(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bj(e,t):void 0}}function nie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(e,t){return tie(e)||w$e(e,t)||y4(e,t)||nie()}function rie(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=rie(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ha(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=rie(e))&&(r&&(r+=" "),r+=t);return r}var OO,oG;function S$e(){if(oG)return OO;oG=1;var e=function(t,n,r,s,c,d,i,m){if(!t){var x;if(n===void 0)x=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var T=[r,s,c,d,i,m],C=0;x=new Error(n.replace(/%s/g,function(){return T[C++]})),x.name="Invariant Violation"}throw x.framesToPop=1,x}};return OO=e,OO}var T$e=S$e();const $T=Ls(T$e);var E$e=function(){};function C$e(e,t){var n={};return Object.keys(e).forEach(function(r){n[FA(r)]=E$e}),n}function sG(e,t){return e[t]!==void 0}function FA(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function M$e(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function iie(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function oie(e){function t(n){var r=this.constructor.getDerivedStateFromProps(e,n);return r??null}this.setState(t.bind(this))}function sie(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}iie.__suppressDeprecationWarning=!0;oie.__suppressDeprecationWarning=!0;sie.__suppressDeprecationWarning=!0;function A$e(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,r=null,s=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),n!==null||r!==null||s!==null){var c=e.displayName||e.name,d=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+c+" uses "+d+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=iie,t.componentWillReceiveProps=oie),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=sie;var i=t.componentDidUpdate;t.componentDidUpdate=function(x,T,C){var A=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:C;i.call(this,x,T,A)}}return e}var R$e="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function aie(e,t,n){n===void 0&&(n=[]);var r=e.displayName||e.name||"Component",s=M$e(e),c=Object.keys(t),d=c.map(FA);s||!n.length||$T(!1);var i=function(x){jD(T,x);function T(){for(var A,I=arguments.length,k=new Array(I),B=0;B<I;B++)k[B]=arguments[B];A=x.call.apply(x,[this].concat(k))||this,A.handlers=Object.create(null),c.forEach(function(V){var H=t[V],G=function(Q){if(A.props[H]){var ee;A._notifying=!0;for(var ce=arguments.length,fe=new Array(ce>1?ce-1:0),ue=1;ue<ce;ue++)fe[ue-1]=arguments[ue];(ee=A.props)[H].apply(ee,[Q].concat(fe)),A._notifying=!1}A.unmounted||A.setState(function(ae){var xe,we=ae.values;return{values:Pt(Object.create(null),we,(xe={},xe[V]=Q,xe))}})};A.handlers[H]=G}),n.length&&(A.attachRef=function(V){A.inner=V});var j=Object.create(null);return c.forEach(function(V){j[V]=A.props[FA(V)]}),A.state={values:j,prevProps:{}},A}var C=T.prototype;return C.shouldComponentUpdate=function(){return!this._notifying},T.getDerivedStateFromProps=function(I,k){var B=k.values,j=k.prevProps,V={values:Pt(Object.create(null),B),prevProps:{}};return c.forEach(function(H){V.prevProps[H]=I[H],!sG(I,H)&&sG(j,H)&&(V.values[H]=I[FA(H)])}),V},C.componentWillUnmount=function(){this.unmounted=!0},C.render=function(){var I=this,k=this.props,B=k.innerRef,j=xi(k,["innerRef"]);d.forEach(function(H){delete j[H]});var V={};return c.forEach(function(H){var G=I.props[H];V[H]=G!==void 0?G:I.state.values[H]}),Rt.createElement(e,Pt({},j,V,this.handlers,{ref:B||this.attachRef}))},T}(Rt.Component);A$e(i),i.displayName="Uncontrolled("+r+")",i.propTypes=Pt({innerRef:function(){}},C$e(t)),n.forEach(function(x){i.prototype[x]=function(){var C;return(C=this.inner)[x].apply(C,arguments)}});var m=i;return Rt.forwardRef&&(m=Rt.forwardRef(function(x,T){return Rt.createElement(i,Pt({},x,{innerRef:T,__source:{fileName:R$e,lineNumber:128},__self:this}))}),m.propTypes=i.propTypes),m.ControlledComponent=e,m.deferControlTo=function(x,T,C){return T===void 0&&(T={}),aie(x,Pt({},t,T),C)},m}var XR="milliseconds",UT="seconds",qT="minutes",HT="hours",H0="day",b1="week",WT="month",W0="year",G0="decade",Y0="century",lie={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},D$e={month:1,year:12,decade:10*12,century:100*12};function P$e(e){return[31,I$e(e),31,30,31,30,31,31,30,31,30,31]}function I$e(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Jf(e,t,n){switch(e=new Date(e),n){case XR:case UT:case qT:case HT:case H0:case b1:return k$e(e,t*lie[n]);case WT:case W0:case G0:case Y0:return O$e(e,t*D$e[n])}throw new TypeError('Invalid units: "'+n+'"')}function k$e(e,t){var n=new Date(+e+t);return L$e(e,n)}function O$e(e,t){var n=e.getFullYear(),r=e.getMonth(),s=e.getDate(),c=n*12+r+t,d=Math.trunc(c/12),i=c%12,m=Math.min(s,P$e(d)[i]),x=new Date(e);return x.setFullYear(d),x.setDate(1),x.setMonth(i),x.setDate(m),x}function L$e(e,t){var n=e.getTimezoneOffset(),r=t.getTimezoneOffset(),s=r-n;return new Date(+t+s*lie.minutes)}function GT(e,t,n){return Jf(e,-t,n)}function Hl(e,t,n){switch(e=new Date(e),t){case Y0:case G0:case W0:e=KR(e,0);case WT:e=fie(e,1);case b1:case H0:e=ZT(e,0);case HT:e=w1(e,0);case qT:e=XT(e,0);case UT:e=YT(e,0)}return t===G0&&(e=GT(e,X0(e)%10,"year")),t===Y0&&(e=GT(e,X0(e)%100,"year")),t===b1&&(e=pie(e,0,n)),e}function ZR(e,t,n){switch(e=new Date(e),e=Hl(e,t,n),t){case Y0:case G0:case W0:case WT:case b1:e=Jf(e,1,t),e=GT(e,1,H0),e.setHours(23,59,59,999);break;case H0:e.setHours(23,59,59,999);break;case HT:case qT:case UT:e=Jf(e,1,t),e=GT(e,1,XR)}return e}var N1=$1(function(e,t){return e===t}),v4=$1(function(e,t){return e!==t}),TP=$1(function(e,t){return e>t}),VE=$1(function(e,t){return e>=t}),_4=$1(function(e,t){return e<t}),V1=$1(function(e,t){return e<=t});function cie(){return new Date(Math.min.apply(Math,arguments))}function uie(){return new Date(Math.max.apply(Math,arguments))}function die(e,t,n,r){return r=r||"day",(!t||VE(e,t,r))&&(!n||V1(e,n,r))}var YT=zv("Milliseconds"),XT=zv("Seconds"),w1=zv("Minutes"),ZT=zv("Hours"),hie=zv("Day"),fie=zv("Date"),KR=zv("Month"),X0=zv("FullYear");function z$e(e,t){return t===void 0?X0(Hl(e,G0)):Jf(e,t+10,W0)}function F$e(e,t){return t===void 0?X0(Hl(e,Y0)):Jf(e,t+100,W0)}function pie(e,t,n){var r=(hie(e)+7-(n||0))%7;return t===void 0?r:Jf(e,t-r,H0)}function B$e(e,t,n,r){var s,c,d;switch(n){case XR:case UT:case qT:case HT:case H0:case b1:s=t.getTime()-e.getTime();break;case WT:case W0:case G0:case Y0:s=(X0(t)-X0(e))*12+KR(t)-KR(e);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case XR:c=1;break;case UT:c=1e3;break;case qT:c=1e3*60;break;case HT:c=1e3*60*60;break;case H0:c=1e3*60*60*24;break;case b1:c=1e3*60*60*24*7;break;case WT:c=1;break;case W0:c=12;break;case G0:c=120;break;case Y0:c=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return d=s/c,r?d:Math.round(d)}function zv(e){var t=function(n){switch(n){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(n,r){if(r===void 0)return n["get"+e]();var s=new Date(n);return s["set"+e](r),t&&s["get"+e]()!=r&&(e==="Hours"||r>=t&&s.getHours()-n.getHours()<Math.floor(r/t))&&s["set"+e](r+t),s}}function $1(e){return function(t,n,r){return e(+Hl(t,r),+Hl(n,r))}}const aG=Object.freeze(Object.defineProperty({__proto__:null,add:Jf,century:F$e,date:fie,day:hie,decade:z$e,diff:B$e,endOf:ZR,eq:N1,gt:TP,gte:VE,hours:ZT,inRange:die,lt:_4,lte:V1,max:uie,milliseconds:YT,min:cie,minutes:w1,month:KR,neq:v4,seconds:XT,startOf:Hl,subtract:GT,weekday:pie,year:X0},Symbol.toStringTag,{value:"Module"}));function j$e(e){if(Array.isArray(e))return bj(e)}function mie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function N$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BA(e){return j$e(e)||mie(e)||y4(e)||N$e()}var LO,lG;function gie(){if(lG)return LO;lG=1;function e(t,n,r){var s=-1,c=t.length;n<0&&(n=-n>c?0:c+n),r=r>c?c:r,r<0&&(r+=c),c=n>r?0:r-n>>>0,n>>>=0;for(var d=Array(c);++s<c;)d[s]=t[s+n];return d}return LO=e,LO}var zO,cG;function $E(){if(cG)return zO;cG=1;function e(t,n){return t===n||t!==t&&n!==n}return zO=e,zO}var FO,uG;function yie(){if(uG)return FO;uG=1;var e=typeof window=="object"&&window&&window.Object===Object&&window;return FO=e,FO}var BO,dG;function Sm(){if(dG)return BO;dG=1;var e=yie(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return BO=n,BO}var jO,hG;function U1(){if(hG)return jO;hG=1;var e=Sm(),t=e.Symbol;return jO=t,jO}var NO,fG;function V$e(){if(fG)return NO;fG=1;var e=U1(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function c(d){var i=n.call(d,s),m=d[s];try{d[s]=void 0;var x=!0}catch{}var T=r.call(d);return x&&(i?d[s]=m:delete d[s]),T}return NO=c,NO}var VO,pG;function $$e(){if(pG)return VO;pG=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return VO=n,VO}var $O,mG;function q1(){if(mG)return $O;mG=1;var e=U1(),t=V$e(),n=$$e(),r="[object Null]",s="[object Undefined]",c=e?e.toStringTag:void 0;function d(i){return i==null?i===void 0?s:r:c&&c in Object(i)?t(i):n(i)}return $O=d,$O}var UO,gG;function iy(){if(gG)return UO;gG=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return UO=e,UO}var qO,yG;function x4(){if(yG)return qO;yG=1;var e=q1(),t=iy(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";function d(i){if(!t(i))return!1;var m=e(i);return m==r||m==s||m==n||m==c}return qO=d,qO}var HO,vG;function b4(){if(vG)return HO;vG=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return HO=t,HO}var WO,_G;function UE(){if(_G)return WO;_G=1;var e=x4(),t=b4();function n(r){return r!=null&&t(r.length)&&!e(r)}return WO=n,WO}var GO,xG;function w4(){if(xG)return GO;xG=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,s){var c=typeof r;return s=s??e,!!s&&(c=="number"||c!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return GO=n,GO}var YO,bG;function EP(){if(bG)return YO;bG=1;var e=$E(),t=UE(),n=w4(),r=iy();function s(c,d,i){if(!r(i))return!1;var m=typeof d;return(m=="number"?t(i)&&n(d,i.length):m=="string"&&d in i)?e(i[d],c):!1}return YO=s,YO}var XO,wG;function U$e(){if(wG)return XO;wG=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return XO=t,XO}var ZO,SG;function q$e(){if(SG)return ZO;SG=1;var e=U$e(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return ZO=n,ZO}var KO,TG;function Fv(){if(TG)return KO;TG=1;function e(t){return t!=null&&typeof t=="object"}return KO=e,KO}var QO,EG;function qE(){if(EG)return QO;EG=1;var e=q1(),t=Fv(),n="[object Symbol]";function r(s){return typeof s=="symbol"||t(s)&&e(s)==n}return QO=r,QO}var JO,CG;function H$e(){if(CG)return JO;CG=1;var e=q$e(),t=iy(),n=qE(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,i=parseInt;function m(x){if(typeof x=="number")return x;if(n(x))return r;if(t(x)){var T=typeof x.valueOf=="function"?x.valueOf():x;x=t(T)?T+"":T}if(typeof x!="string")return x===0?x:+x;x=e(x);var C=c.test(x);return C||d.test(x)?i(x.slice(2),C?2:8):s.test(x)?r:+x}return JO=m,JO}var eL,MG;function vie(){if(MG)return eL;MG=1;var e=H$e(),t=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-1/0){var c=s<0?-1:1;return c*n}return s===s?s:0}return eL=r,eL}var tL,AG;function _ie(){if(AG)return tL;AG=1;var e=vie();function t(n){var r=e(n),s=r%1;return r===r?s?r-s:r:0}return tL=t,tL}var nL,RG;function W$e(){if(RG)return nL;RG=1;var e=gie(),t=EP(),n=_ie(),r=Math.ceil,s=Math.max;function c(d,i,m){(m?t(d,i,m):i===void 0)?i=1:i=s(n(i),0);var x=d==null?0:d.length;if(!x||i<1)return[];for(var T=0,C=0,A=Array(r(x/i));T<x;)A[C++]=e(d,T,T+=i);return A}return nL=c,nL}var G$e=W$e();const Y$e=Ls(G$e);function HE(e){return e&&e.ownerDocument||document}function X$e(e){var t=HE(e);return t&&t.defaultView||window}function Z$e(e,t){return X$e(e).getComputedStyle(e,t)}var K$e=/([A-Z])/g;function Q$e(e){return e.replace(K$e,"-$1").toLowerCase()}var J$e=/^ms-/;function aA(e){return Q$e(e).replace(J$e,"-ms-")}var eUe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function tUe(e){return!!(e&&eUe.test(e))}function Lb(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(aA(t))||Z$e(e).getPropertyValue(aA(t));Object.keys(t).forEach(function(s){var c=t[s];!c&&c!==0?e.style.removeProperty(aA(s)):tUe(s)?r+=s+"("+c+") ":n+=aA(s)+": "+c+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}function KT(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function nUe(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function S4(e){return"window"in e&&e.window===e?e:nUe(e)&&e.defaultView||!1}function xie(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function n(r,s){var c=S4(r);if(s===void 0)return c?c[e]:r[t];c?c.scrollTo(c[e],s):r[t]=s}return n}const bie=xie("pageXOffset"),wie=xie("pageYOffset");function P0(e){var t=HE(e),n={top:0,left:0,height:0,width:0},r=t&&t.documentElement;return!r||!KT(r,e)||(e.getBoundingClientRect!==void 0&&(n=e.getBoundingClientRect()),n={top:n.top+wie(r)-(r.clientTop||0),left:n.left+bie(r)-(r.clientLeft||0),width:n.width,height:n.height}),n}var rUe=function(t){return!!t&&"offsetParent"in t};function iUe(e){for(var t=HE(e),n=e&&e.offsetParent;rUe(n)&&n.nodeName!=="HTML"&&Lb(n,"position")==="static";)n=n.offsetParent;return n||t.documentElement}var oUe=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function Sie(e,t){var n={top:0,left:0},r;if(Lb(e,"position")==="fixed")r=e.getBoundingClientRect();else{var s=t||iUe(e);r=P0(e),oUe(s)!=="html"&&(n=P0(s));var c=String(Lb(s,"borderTopWidth")||0);n.top+=parseInt(c,10)-wie(s)||0;var d=String(Lb(s,"borderLeftWidth")||0);n.left+=parseInt(d,10)-bie(s)||0}var i=String(Lb(e,"marginTop")||0),m=String(Lb(e,"marginLeft")||0);return Pt({},r,{top:r.top-n.top-(parseInt(i,10)||0),left:r.left-n.left-(parseInt(m,10)||0)})}const T4=!!(typeof window<"u"&&window.document&&window.document.createElement);var DG=new Date().getTime();function sUe(e){var t=new Date().getTime(),n=Math.max(0,16-(t-DG)),r=setTimeout(e,n);return DG=t,r}var aUe=["","webkit","moz","o","ms"],wj="clearTimeout",Sj=sUe,PG=function(t,n){return t+(t?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};T4&&aUe.some(function(e){var t=PG(e,"request");return t in window&&(wj=PG(e,"cancel"),Sj=function(r){return window[t](r)}),!!Sj});var IG=function(t){typeof window[wj]=="function"&&window[wj](t)},Tie=Sj,rL;function lUe(e,t){if(!rL){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;rL=function(c,d){return r.call(c,d)}}return rL(e,t)}var cUe=Function.prototype.bind.call(Function.prototype.call,[].slice);function uUe(e,t){return cUe(e.querySelectorAll(t))}var Tj=!1,Ej=!1;try{var iL={get passive(){return Tj=!0},get once(){return Ej=Tj=!0}};T4&&(window.addEventListener("test",iL,iL),window.removeEventListener("test",iL,!0))}catch{}function dUe(e,t,n,r){if(r&&typeof r!="boolean"&&!Ej){var s=r.once,c=r.capture,d=n;!Ej&&s&&(d=n.__once||function i(m){this.removeEventListener(t,i,c),n.call(this,m)},n.__once=d),e.addEventListener(t,d,Tj?r:c)}e.addEventListener(t,n,r)}function hUe(e){const t=U.useRef(e);return U.useEffect(()=>{t.current=e},[e]),t}function kG(e){const t=hUe(e);return U.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function OG(){return U.useState(null)}function fUe(){const e=U.useRef(!0),t=U.useRef(()=>e.current);return U.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function pUe(e){const t=fUe();return[e[0],U.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var mUe=QQ({defaultModifiers:[YQ,ZQ,UQ,qQ,XQ,GQ,KQ,$Q]}),LG=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},gUe={name:"applyStyles",enabled:!1},yUe={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var n=t.state;return function(){var r=n.elements,s=r.reference,c=r.popper;if("removeAttribute"in s){var d=(s.getAttribute("aria-describedby")||"").split(",").filter(function(i){return i.trim()!==c.id});d.length?s.setAttribute("aria-describedby",d.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(t){var n,r=t.state,s=r.elements,c=s.popper,d=s.reference,i=(n=c.getAttribute("role"))==null?void 0:n.toLowerCase();if(c.id&&i==="tooltip"&&"setAttribute"in d){var m=d.getAttribute("aria-describedby");if(m&&m.split(",").indexOf(c.id)!==-1)return;d.setAttribute("aria-describedby",m?m+","+c.id:c.id)}}},vUe=[];function _Ue(e,t,n){var r=n===void 0?{}:n,s=r.enabled,c=s===void 0?!0:s,d=r.placement,i=d===void 0?"bottom":d,m=r.strategy,x=m===void 0?"absolute":m,T=r.modifiers,C=T===void 0?vUe:T,A=xi(r,["enabled","placement","strategy","modifiers"]),I=U.useRef(),k=U.useCallback(function(){var X;(X=I.current)==null||X.update()},[]),B=U.useCallback(function(){var X;(X=I.current)==null||X.forceUpdate()},[]),j=pUe(U.useState({placement:i,update:k,forceUpdate:B,attributes:{},styles:{popper:LG(x),arrow:{}}})),V=j[0],H=j[1],G=U.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(Q){var ee=Q.state,ce={},fe={};Object.keys(ee.elements).forEach(function(ue){ce[ue]=ee.styles[ue],fe[ue]=ee.attributes[ue]}),H({state:ee,styles:ce,attributes:fe,update:k,forceUpdate:B,placement:ee.placement})}}},[k,B,H]);return U.useEffect(function(){!I.current||!c||I.current.setOptions({placement:i,strategy:x,modifiers:[].concat(C,[G,gUe])})},[x,i,G,c]),U.useEffect(function(){if(!(!c||e==null||t==null))return I.current=mUe(e,t,Pt({},A,{placement:i,strategy:x,modifiers:[].concat(C,[yUe,G])})),function(){I.current!=null&&(I.current.destroy(),I.current=void 0,H(function(X){return Pt({},X,{attributes:{},styles:{popper:LG(x)}})}))}},[c,e,t]),V}function xUe(e,t,n,r){var s=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,s),n.__once&&e.removeEventListener(t,n.__once,s)}function $S(e,t,n,r){return dUe(e,t,n,r),function(){xUe(e,t,n,r)}}var oL,zG;function bUe(){if(zG)return oL;zG=1;var e=function(){};return oL=e,oL}var wUe=bUe();const SUe=Ls(wUe);function TUe(e){return e&&"setState"in e?zb.findDOMNode(e):e??null}const EUe=function(e){return HE(TUe(e))};var CUe=27,FG=function(){};function MUe(e){return e.button===0}function AUe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var BG=function(t){return t&&("current"in t?t.current:t)};function RUe(e,t,n){var r=n===void 0?{}:n,s=r.disabled,c=r.clickTrigger,d=c===void 0?"click":c,i=U.useRef(!1),m=t||FG,x=U.useCallback(function(A){var I,k=BG(e);SUe(!!k,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),i.current=!k||AUe(A)||!MUe(A)||!!KT(k,(I=A.composedPath==null?void 0:A.composedPath()[0])!=null?I:A.target)},[e]),T=kG(function(A){i.current||m(A)}),C=kG(function(A){A.keyCode===CUe&&m(A)});U.useEffect(function(){if(!(s||e==null)){var A=window.event,I=EUe(BG(e)),k=$S(I,d,x,!0),B=$S(I,d,function(H){if(H===A){A=void 0;return}T(H)}),j=$S(I,"keyup",function(H){if(H===A){A=void 0;return}C(H)}),V=[];return"ontouchstart"in I.documentElement&&(V=[].slice.call(I.body.children).map(function(H){return $S(H,"mousemove",FG)})),function(){k(),B(),j(),V.forEach(function(H){return H()})}}},[e,s,d,x,T,C])}function DUe(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(n){t[n.name]=n}),t):e||t}function PUe(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function IUe(e){var t,n,r,s,c=e.enabled,d=e.enableEvents,i=e.placement,m=e.flip,x=e.offset,T=e.fixed,C=e.containerPadding,A=e.arrowElement,I=e.popperConfig,k=I===void 0?{}:I,B=DUe(k.modifiers);return Pt({},k,{placement:i,enabled:c,strategy:T?"fixed":k.strategy,modifiers:PUe(Pt({},B,{eventListeners:{enabled:d},preventOverflow:Pt({},B.preventOverflow,{options:C?Pt({padding:C},(t=B.preventOverflow)==null?void 0:t.options):(n=B.preventOverflow)==null?void 0:n.options}),offset:{options:Pt({offset:x},(r=B.offset)==null?void 0:r.options)},arrow:Pt({},B.arrow,{enabled:!!A,options:Pt({},(s=B.arrow)==null?void 0:s.options,{element:A})}),flip:Pt({enabled:!!m},B.flip)}))})}var lA;function E4(e){if((!lA&&lA!==0||e)&&T4){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),lA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return lA}var sL=function(t){var n;return typeof document>"u"?null:t==null?HE().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(n=t)!=null&&n.nodeType&&t||null)};function jG(e,t){var n=U.useState(function(){return sL(e)}),r=n[0],s=n[1];if(!r){var c=sL(e);c&&s(c)}return U.useEffect(function(){},[t,r]),U.useEffect(function(){var d=sL(e);d!==r&&s(d)},[e,r]),r}const NG=e=>!e||typeof e=="function"?e:t=>{e.current=t};function kUe(e,t){const n=NG(e),r=NG(t);return s=>{n&&n(s),r&&r(s)}}function OUe(e,t){return U.useMemo(()=>kUe(e,t),[e,t])}var C4=Rt.forwardRef(function(e,t){var n=e.flip,r=e.offset,s=e.placement,c=e.containerPadding,d=c===void 0?5:c,i=e.popperConfig,m=i===void 0?{}:i,x=e.transition,T=OG(),C=T[0],A=T[1],I=OG(),k=I[0],B=I[1],j=OUe(A,t),V=jG(e.container),H=jG(e.target),G=U.useState(!e.show),X=G[0],Q=G[1],ee=_Ue(H,C,IUe({placement:s,enableEvents:!!e.show,containerPadding:d||5,flip:n,offset:r,arrowElement:k,popperConfig:m})),ce=ee.styles,fe=ee.attributes,ue=xi(ee,["styles","attributes"]);e.show?X&&Q(!1):!e.transition&&!X&&Q(!0);var ae=function(){Q(!0),e.onExited&&e.onExited.apply(e,arguments)},xe=e.show||x&&!X;if(RUe(C,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!xe)return null;var we=e.children(Pt({},ue,{show:!!e.show,props:Pt({},fe.popper,{style:ce.popper,ref:j}),arrowProps:Pt({},fe.arrow,{style:ce.arrow,ref:B})}));if(x){var Me=e.onExit,Se=e.onExiting,Ae=e.onEnter,_e=e.onEntering,Pe=e.onEntered;we=Rt.createElement(x,{in:e.show,appear:!0,onExit:Me,onExiting:Se,onExited:ae,onEnter:Ae,onEntering:_e,onEntered:Pe},we)}return V?zb.createPortal(we,V):null});C4.displayName="Overlay";C4.propTypes={show:rt.bool,placement:rt.oneOf(BN),target:rt.any,container:rt.any,flip:rt.bool,children:rt.func.isRequired,containerPadding:rt.number,popperConfig:rt.object,rootClose:rt.bool,rootCloseEvent:rt.oneOf(["click","mousedown"]),rootCloseDisabled:rt.bool,onHide:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(t.rootClose){var c;return(c=rt.func).isRequired.apply(c,[t].concat(r))}return rt.func.apply(rt,[t].concat(r))},transition:rt.elementType,onEnter:rt.func,onEntering:rt.func,onEntered:rt.func,onExit:rt.func,onExiting:rt.func,onExited:rt.func};var aL,VG;function LUe(){if(VG)return aL;VG=1;function e(){this.__data__=[],this.size=0}return aL=e,aL}var lL,$G;function CP(){if($G)return lL;$G=1;var e=$E();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return lL=t,lL}var cL,UG;function zUe(){if(UG)return cL;UG=1;var e=CP(),t=Array.prototype,n=t.splice;function r(s){var c=this.__data__,d=e(c,s);if(d<0)return!1;var i=c.length-1;return d==i?c.pop():n.call(c,d,1),--this.size,!0}return cL=r,cL}var uL,qG;function FUe(){if(qG)return uL;qG=1;var e=CP();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return uL=t,uL}var dL,HG;function BUe(){if(HG)return dL;HG=1;var e=CP();function t(n){return e(this.__data__,n)>-1}return dL=t,dL}var hL,WG;function jUe(){if(WG)return hL;WG=1;var e=CP();function t(n,r){var s=this.__data__,c=e(s,n);return c<0?(++this.size,s.push([n,r])):s[c][1]=r,this}return hL=t,hL}var fL,GG;function MP(){if(GG)return fL;GG=1;var e=LUe(),t=zUe(),n=FUe(),r=BUe(),s=jUe();function c(d){var i=-1,m=d==null?0:d.length;for(this.clear();++i<m;){var x=d[i];this.set(x[0],x[1])}}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=r,c.prototype.set=s,fL=c,fL}var pL,YG;function NUe(){if(YG)return pL;YG=1;var e=MP();function t(){this.__data__=new e,this.size=0}return pL=t,pL}var mL,XG;function VUe(){if(XG)return mL;XG=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return mL=e,mL}var gL,ZG;function $Ue(){if(ZG)return gL;ZG=1;function e(t){return this.__data__.get(t)}return gL=e,gL}var yL,KG;function UUe(){if(KG)return yL;KG=1;function e(t){return this.__data__.has(t)}return yL=e,yL}var vL,QG;function qUe(){if(QG)return vL;QG=1;var e=Sm(),t=e["__core-js_shared__"];return vL=t,vL}var _L,JG;function HUe(){if(JG)return _L;JG=1;var e=qUe(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return _L=n,_L}var xL,e9;function Eie(){if(e9)return xL;e9=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return xL=n,xL}var bL,t9;function WUe(){if(t9)return bL;t9=1;var e=x4(),t=HUe(),n=iy(),r=Eie(),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,d=Function.prototype,i=Object.prototype,m=d.toString,x=i.hasOwnProperty,T=RegExp("^"+m.call(x).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function C(A){if(!n(A)||t(A))return!1;var I=e(A)?T:c;return I.test(r(A))}return bL=C,bL}var wL,n9;function GUe(){if(n9)return wL;n9=1;function e(t,n){return t==null?void 0:t[n]}return wL=e,wL}var SL,r9;function dx(){if(r9)return SL;r9=1;var e=WUe(),t=GUe();function n(r,s){var c=t(r,s);return e(c)?c:void 0}return SL=n,SL}var TL,i9;function M4(){if(i9)return TL;i9=1;var e=dx(),t=Sm(),n=e(t,"Map");return TL=n,TL}var EL,o9;function AP(){if(o9)return EL;o9=1;var e=dx(),t=e(Object,"create");return EL=t,EL}var CL,s9;function YUe(){if(s9)return CL;s9=1;var e=AP();function t(){this.__data__=e?e(null):{},this.size=0}return CL=t,CL}var ML,a9;function XUe(){if(a9)return ML;a9=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return ML=e,ML}var AL,l9;function ZUe(){if(l9)return AL;l9=1;var e=AP(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(c){var d=this.__data__;if(e){var i=d[c];return i===t?void 0:i}return r.call(d,c)?d[c]:void 0}return AL=s,AL}var RL,c9;function KUe(){if(c9)return RL;c9=1;var e=AP(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var c=this.__data__;return e?c[s]!==void 0:n.call(c,s)}return RL=r,RL}var DL,u9;function QUe(){if(u9)return DL;u9=1;var e=AP(),t="__lodash_hash_undefined__";function n(r,s){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=e&&s===void 0?t:s,this}return DL=n,DL}var PL,d9;function JUe(){if(d9)return PL;d9=1;var e=YUe(),t=XUe(),n=ZUe(),r=KUe(),s=QUe();function c(d){var i=-1,m=d==null?0:d.length;for(this.clear();++i<m;){var x=d[i];this.set(x[0],x[1])}}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=r,c.prototype.set=s,PL=c,PL}var IL,h9;function e6e(){if(h9)return IL;h9=1;var e=JUe(),t=MP(),n=M4();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return IL=r,IL}var kL,f9;function t6e(){if(f9)return kL;f9=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return kL=e,kL}var OL,p9;function RP(){if(p9)return OL;p9=1;var e=t6e();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return OL=t,OL}var LL,m9;function n6e(){if(m9)return LL;m9=1;var e=RP();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return LL=t,LL}var zL,g9;function r6e(){if(g9)return zL;g9=1;var e=RP();function t(n){return e(this,n).get(n)}return zL=t,zL}var FL,y9;function i6e(){if(y9)return FL;y9=1;var e=RP();function t(n){return e(this,n).has(n)}return FL=t,FL}var BL,v9;function o6e(){if(v9)return BL;v9=1;var e=RP();function t(n,r){var s=e(this,n),c=s.size;return s.set(n,r),this.size+=s.size==c?0:1,this}return BL=t,BL}var jL,_9;function A4(){if(_9)return jL;_9=1;var e=e6e(),t=n6e(),n=r6e(),r=i6e(),s=o6e();function c(d){var i=-1,m=d==null?0:d.length;for(this.clear();++i<m;){var x=d[i];this.set(x[0],x[1])}}return c.prototype.clear=e,c.prototype.delete=t,c.prototype.get=n,c.prototype.has=r,c.prototype.set=s,jL=c,jL}var NL,x9;function s6e(){if(x9)return NL;x9=1;var e=MP(),t=M4(),n=A4(),r=200;function s(c,d){var i=this.__data__;if(i instanceof e){var m=i.__data__;if(!t||m.length<r-1)return m.push([c,d]),this.size=++i.size,this;i=this.__data__=new n(m)}return i.set(c,d),this.size=i.size,this}return NL=s,NL}var VL,b9;function R4(){if(b9)return VL;b9=1;var e=MP(),t=NUe(),n=VUe(),r=$Ue(),s=UUe(),c=s6e();function d(i){var m=this.__data__=new e(i);this.size=m.size}return d.prototype.clear=t,d.prototype.delete=n,d.prototype.get=r,d.prototype.has=s,d.prototype.set=c,VL=d,VL}var $L,w9;function a6e(){if(w9)return $L;w9=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return $L=t,$L}var UL,S9;function l6e(){if(S9)return UL;S9=1;function e(t){return this.__data__.has(t)}return UL=e,UL}var qL,T9;function c6e(){if(T9)return qL;T9=1;var e=A4(),t=a6e(),n=l6e();function r(s){var c=-1,d=s==null?0:s.length;for(this.__data__=new e;++c<d;)this.add(s[c])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,qL=r,qL}var HL,E9;function u6e(){if(E9)return HL;E9=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(t[r],r,t))return!0;return!1}return HL=e,HL}var WL,C9;function d6e(){if(C9)return WL;C9=1;function e(t,n){return t.has(n)}return WL=e,WL}var GL,M9;function Cie(){if(M9)return GL;M9=1;var e=c6e(),t=u6e(),n=d6e(),r=1,s=2;function c(d,i,m,x,T,C){var A=m&r,I=d.length,k=i.length;if(I!=k&&!(A&&k>I))return!1;var B=C.get(d),j=C.get(i);if(B&&j)return B==i&&j==d;var V=-1,H=!0,G=m&s?new e:void 0;for(C.set(d,i),C.set(i,d);++V<I;){var X=d[V],Q=i[V];if(x)var ee=A?x(Q,X,V,i,d,C):x(X,Q,V,d,i,C);if(ee!==void 0){if(ee)continue;H=!1;break}if(G){if(!t(i,function(ce,fe){if(!n(G,fe)&&(X===ce||T(X,ce,m,x,C)))return G.push(fe)})){H=!1;break}}else if(!(X===Q||T(X,Q,m,x,C))){H=!1;break}}return C.delete(d),C.delete(i),H}return GL=c,GL}var YL,A9;function Mie(){if(A9)return YL;A9=1;var e=Sm(),t=e.Uint8Array;return YL=t,YL}var XL,R9;function h6e(){if(R9)return XL;R9=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s,c){r[++n]=[c,s]}),r}return XL=e,XL}var ZL,D9;function f6e(){if(D9)return ZL;D9=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s){r[++n]=s}),r}return ZL=e,ZL}var KL,P9;function p6e(){if(P9)return KL;P9=1;var e=U1(),t=Mie(),n=$E(),r=Cie(),s=h6e(),c=f6e(),d=1,i=2,m="[object Boolean]",x="[object Date]",T="[object Error]",C="[object Map]",A="[object Number]",I="[object RegExp]",k="[object Set]",B="[object String]",j="[object Symbol]",V="[object ArrayBuffer]",H="[object DataView]",G=e?e.prototype:void 0,X=G?G.valueOf:void 0;function Q(ee,ce,fe,ue,ae,xe,we){switch(fe){case H:if(ee.byteLength!=ce.byteLength||ee.byteOffset!=ce.byteOffset)return!1;ee=ee.buffer,ce=ce.buffer;case V:return!(ee.byteLength!=ce.byteLength||!xe(new t(ee),new t(ce)));case m:case x:case A:return n(+ee,+ce);case T:return ee.name==ce.name&&ee.message==ce.message;case I:case B:return ee==ce+"";case C:var Me=s;case k:var Se=ue&d;if(Me||(Me=c),ee.size!=ce.size&&!Se)return!1;var Ae=we.get(ee);if(Ae)return Ae==ce;ue|=i,we.set(ee,ce);var _e=r(Me(ee),Me(ce),ue,ae,xe,we);return we.delete(ee),_e;case j:if(X)return X.call(ee)==X.call(ce)}return!1}return KL=Q,KL}var QL,I9;function D4(){if(I9)return QL;I9=1;function e(t,n){for(var r=-1,s=n.length,c=t.length;++r<s;)t[c+r]=n[r];return t}return QL=e,QL}var JL,k9;function Nh(){if(k9)return JL;k9=1;var e=Array.isArray;return JL=e,JL}var ez,O9;function Aie(){if(O9)return ez;O9=1;var e=D4(),t=Nh();function n(r,s,c){var d=s(r);return t(r)?d:e(d,c(r))}return ez=n,ez}var tz,L9;function m6e(){if(L9)return tz;L9=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,c=0,d=[];++r<s;){var i=t[r];n(i,r,t)&&(d[c++]=i)}return d}return tz=e,tz}var nz,z9;function Rie(){if(z9)return nz;z9=1;function e(){return[]}return nz=e,nz}var rz,F9;function P4(){if(F9)return rz;F9=1;var e=m6e(),t=Rie(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(d){return d==null?[]:(d=Object(d),e(s(d),function(i){return r.call(d,i)}))}:t;return rz=c,rz}var iz,B9;function g6e(){if(B9)return iz;B9=1;function e(t,n){for(var r=-1,s=Array(t);++r<t;)s[r]=n(r);return s}return iz=e,iz}var oz,j9;function y6e(){if(j9)return oz;j9=1;var e=q1(),t=Fv(),n="[object Arguments]";function r(s){return t(s)&&e(s)==n}return oz=r,oz}var sz,N9;function I4(){if(N9)return sz;N9=1;var e=y6e(),t=Fv(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,c=e(function(){return arguments}())?e:function(d){return t(d)&&r.call(d,"callee")&&!s.call(d,"callee")};return sz=c,sz}var US={exports:{}},az,V9;function v6e(){if(V9)return az;V9=1;function e(){return!1}return az=e,az}US.exports;var $9;function DP(){return $9||($9=1,function(e,t){var n=Sm(),r=v6e(),s=t&&!t.nodeType&&t,c=s&&!0&&e&&!e.nodeType&&e,d=c&&c.exports===s,i=d?n.Buffer:void 0,m=i?i.isBuffer:void 0,x=m||r;e.exports=x}(US,US.exports)),US.exports}var lz,U9;function _6e(){if(U9)return lz;U9=1;var e=q1(),t=b4(),n=Fv(),r="[object Arguments]",s="[object Array]",c="[object Boolean]",d="[object Date]",i="[object Error]",m="[object Function]",x="[object Map]",T="[object Number]",C="[object Object]",A="[object RegExp]",I="[object Set]",k="[object String]",B="[object WeakMap]",j="[object ArrayBuffer]",V="[object DataView]",H="[object Float32Array]",G="[object Float64Array]",X="[object Int8Array]",Q="[object Int16Array]",ee="[object Int32Array]",ce="[object Uint8Array]",fe="[object Uint8ClampedArray]",ue="[object Uint16Array]",ae="[object Uint32Array]",xe={};xe[H]=xe[G]=xe[X]=xe[Q]=xe[ee]=xe[ce]=xe[fe]=xe[ue]=xe[ae]=!0,xe[r]=xe[s]=xe[j]=xe[c]=xe[V]=xe[d]=xe[i]=xe[m]=xe[x]=xe[T]=xe[C]=xe[A]=xe[I]=xe[k]=xe[B]=!1;function we(Me){return n(Me)&&t(Me.length)&&!!xe[e(Me)]}return lz=we,lz}var cz,q9;function PP(){if(q9)return cz;q9=1;function e(t){return function(n){return t(n)}}return cz=e,cz}var qS={exports:{}};qS.exports;var H9;function k4(){return H9||(H9=1,function(e,t){var n=yie(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,c=s&&s.exports===r,d=c&&n.process,i=function(){try{var m=s&&s.require&&s.require("util").types;return m||d&&d.binding&&d.binding("util")}catch{}}();e.exports=i}(qS,qS.exports)),qS.exports}var uz,W9;function O4(){if(W9)return uz;W9=1;var e=_6e(),t=PP(),n=k4(),r=n&&n.isTypedArray,s=r?t(r):e;return uz=s,uz}var dz,G9;function Die(){if(G9)return dz;G9=1;var e=g6e(),t=I4(),n=Nh(),r=DP(),s=w4(),c=O4(),d=Object.prototype,i=d.hasOwnProperty;function m(x,T){var C=n(x),A=!C&&t(x),I=!C&&!A&&r(x),k=!C&&!A&&!I&&c(x),B=C||A||I||k,j=B?e(x.length,String):[],V=j.length;for(var H in x)(T||i.call(x,H))&&!(B&&(H=="length"||I&&(H=="offset"||H=="parent")||k&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||s(H,V)))&&j.push(H);return j}return dz=m,dz}var hz,Y9;function L4(){if(Y9)return hz;Y9=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||e;return n===s}return hz=t,hz}var fz,X9;function Pie(){if(X9)return fz;X9=1;function e(t,n){return function(r){return t(n(r))}}return fz=e,fz}var pz,Z9;function x6e(){if(Z9)return pz;Z9=1;var e=Pie(),t=e(Object.keys,Object);return pz=t,pz}var mz,K9;function b6e(){if(K9)return mz;K9=1;var e=L4(),t=x6e(),n=Object.prototype,r=n.hasOwnProperty;function s(c){if(!e(c))return t(c);var d=[];for(var i in Object(c))r.call(c,i)&&i!="constructor"&&d.push(i);return d}return mz=s,mz}var gz,Q9;function WE(){if(Q9)return gz;Q9=1;var e=Die(),t=b6e(),n=UE();function r(s){return n(s)?e(s):t(s)}return gz=r,gz}var yz,J9;function Iie(){if(J9)return yz;J9=1;var e=Aie(),t=P4(),n=WE();function r(s){return e(s,n,t)}return yz=r,yz}var vz,e7;function w6e(){if(e7)return vz;e7=1;var e=Iie(),t=1,n=Object.prototype,r=n.hasOwnProperty;function s(c,d,i,m,x,T){var C=i&t,A=e(c),I=A.length,k=e(d),B=k.length;if(I!=B&&!C)return!1;for(var j=I;j--;){var V=A[j];if(!(C?V in d:r.call(d,V)))return!1}var H=T.get(c),G=T.get(d);if(H&&G)return H==d&&G==c;var X=!0;T.set(c,d),T.set(d,c);for(var Q=C;++j<I;){V=A[j];var ee=c[V],ce=d[V];if(m)var fe=C?m(ce,ee,V,d,c,T):m(ee,ce,V,c,d,T);if(!(fe===void 0?ee===ce||x(ee,ce,i,m,T):fe)){X=!1;break}Q||(Q=V=="constructor")}if(X&&!Q){var ue=c.constructor,ae=d.constructor;ue!=ae&&"constructor"in c&&"constructor"in d&&!(typeof ue=="function"&&ue instanceof ue&&typeof ae=="function"&&ae instanceof ae)&&(X=!1)}return T.delete(c),T.delete(d),X}return vz=s,vz}var _z,t7;function S6e(){if(t7)return _z;t7=1;var e=dx(),t=Sm(),n=e(t,"DataView");return _z=n,_z}var xz,n7;function T6e(){if(n7)return xz;n7=1;var e=dx(),t=Sm(),n=e(t,"Promise");return xz=n,xz}var bz,r7;function E6e(){if(r7)return bz;r7=1;var e=dx(),t=Sm(),n=e(t,"Set");return bz=n,bz}var wz,i7;function C6e(){if(i7)return wz;i7=1;var e=dx(),t=Sm(),n=e(t,"WeakMap");return wz=n,wz}var Sz,o7;function IP(){if(o7)return Sz;o7=1;var e=S6e(),t=M4(),n=T6e(),r=E6e(),s=C6e(),c=q1(),d=Eie(),i="[object Map]",m="[object Object]",x="[object Promise]",T="[object Set]",C="[object WeakMap]",A="[object DataView]",I=d(e),k=d(t),B=d(n),j=d(r),V=d(s),H=c;return(e&&H(new e(new ArrayBuffer(1)))!=A||t&&H(new t)!=i||n&&H(n.resolve())!=x||r&&H(new r)!=T||s&&H(new s)!=C)&&(H=function(G){var X=c(G),Q=X==m?G.constructor:void 0,ee=Q?d(Q):"";if(ee)switch(ee){case I:return A;case k:return i;case B:return x;case j:return T;case V:return C}return X}),Sz=H,Sz}var Tz,s7;function M6e(){if(s7)return Tz;s7=1;var e=R4(),t=Cie(),n=p6e(),r=w6e(),s=IP(),c=Nh(),d=DP(),i=O4(),m=1,x="[object Arguments]",T="[object Array]",C="[object Object]",A=Object.prototype,I=A.hasOwnProperty;function k(B,j,V,H,G,X){var Q=c(B),ee=c(j),ce=Q?T:s(B),fe=ee?T:s(j);ce=ce==x?C:ce,fe=fe==x?C:fe;var ue=ce==C,ae=fe==C,xe=ce==fe;if(xe&&d(B)){if(!d(j))return!1;Q=!0,ue=!1}if(xe&&!ue)return X||(X=new e),Q||i(B)?t(B,j,V,H,G,X):n(B,j,ce,V,H,G,X);if(!(V&m)){var we=ue&&I.call(B,"__wrapped__"),Me=ae&&I.call(j,"__wrapped__");if(we||Me){var Se=we?B.value():B,Ae=Me?j.value():j;return X||(X=new e),G(Se,Ae,V,H,X)}}return xe?(X||(X=new e),r(B,j,V,H,G,X)):!1}return Tz=k,Tz}var Ez,a7;function z4(){if(a7)return Ez;a7=1;var e=M6e(),t=Fv();function n(r,s,c,d,i){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:e(r,s,c,d,n,i)}return Ez=n,Ez}var Cz,l7;function A6e(){if(l7)return Cz;l7=1;var e=z4();function t(n,r){return e(n,r)}return Cz=t,Cz}var R6e=A6e();const D6e=Ls(R6e);function Mz(e,t){var n=S4(e);return n?n.innerHeight:P0(e).height}function kie(e,t,n){e.closest&&!n&&e.closest(t);var r=e;do{if(lUe(r,t))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}var Az,c7;function P6e(){if(c7)return Az;c7=1;function e(t,n,r,s){for(var c=t.length,d=r+(s?1:-1);s?d--:++d<c;)if(n(t[d],d,t))return d;return-1}return Az=e,Az}var Rz,u7;function I6e(){if(u7)return Rz;u7=1;var e=R4(),t=z4(),n=1,r=2;function s(c,d,i,m){var x=i.length,T=x,C=!m;if(c==null)return!T;for(c=Object(c);x--;){var A=i[x];if(C&&A[2]?A[1]!==c[A[0]]:!(A[0]in c))return!1}for(;++x<T;){A=i[x];var I=A[0],k=c[I],B=A[1];if(C&&A[2]){if(k===void 0&&!(I in c))return!1}else{var j=new e;if(m)var V=m(k,B,I,c,d,j);if(!(V===void 0?t(B,k,n|r,m,j):V))return!1}}return!0}return Rz=s,Rz}var Dz,d7;function Oie(){if(d7)return Dz;d7=1;var e=iy();function t(n){return n===n&&!e(n)}return Dz=t,Dz}var Pz,h7;function k6e(){if(h7)return Pz;h7=1;var e=Oie(),t=WE();function n(r){for(var s=t(r),c=s.length;c--;){var d=s[c],i=r[d];s[c]=[d,i,e(i)]}return s}return Pz=n,Pz}var Iz,f7;function Lie(){if(f7)return Iz;f7=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Iz=e,Iz}var kz,p7;function O6e(){if(p7)return kz;p7=1;var e=I6e(),t=k6e(),n=Lie();function r(s){var c=t(s);return c.length==1&&c[0][2]?n(c[0][0],c[0][1]):function(d){return d===s||e(d,s,c)}}return kz=r,kz}var Oz,m7;function F4(){if(m7)return Oz;m7=1;var e=Nh(),t=qE(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(c,d){if(e(c))return!1;var i=typeof c;return i=="number"||i=="symbol"||i=="boolean"||c==null||t(c)?!0:r.test(c)||!n.test(c)||d!=null&&c in Object(d)}return Oz=s,Oz}var Lz,g7;function L6e(){if(g7)return Lz;g7=1;var e=A4(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var c=function(){var d=arguments,i=s?s.apply(this,d):d[0],m=c.cache;if(m.has(i))return m.get(i);var x=r.apply(this,d);return c.cache=m.set(i,x)||m,x};return c.cache=new(n.Cache||e),c}return n.Cache=e,Lz=n,Lz}var zz,y7;function z6e(){if(y7)return zz;y7=1;var e=L6e(),t=500;function n(r){var s=e(r,function(d){return c.size===t&&c.clear(),d}),c=s.cache;return s}return zz=n,zz}var Fz,v7;function F6e(){if(v7)return Fz;v7=1;var e=z6e(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(t,function(d,i,m,x){c.push(m?x.replace(n,"$1"):i||d)}),c});return Fz=r,Fz}var Bz,_7;function B4(){if(_7)return Bz;_7=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,c=Array(s);++r<s;)c[r]=n(t[r],r,t);return c}return Bz=e,Bz}var jz,x7;function B6e(){if(x7)return jz;x7=1;var e=U1(),t=B4(),n=Nh(),r=qE(),s=e?e.prototype:void 0,c=s?s.toString:void 0;function d(i){if(typeof i=="string")return i;if(n(i))return t(i,d)+"";if(r(i))return c?c.call(i):"";var m=i+"";return m=="0"&&1/i==-1/0?"-0":m}return jz=d,jz}var Nz,b7;function j6e(){if(b7)return Nz;b7=1;var e=B6e();function t(n){return n==null?"":e(n)}return Nz=t,Nz}var Vz,w7;function kP(){if(w7)return Vz;w7=1;var e=Nh(),t=F4(),n=F6e(),r=j6e();function s(c,d){return e(c)?c:t(c,d)?[c]:n(r(c))}return Vz=s,Vz}var $z,S7;function GE(){if(S7)return $z;S7=1;var e=qE();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return $z=t,$z}var Uz,T7;function OP(){if(T7)return Uz;T7=1;var e=kP(),t=GE();function n(r,s){s=e(s,r);for(var c=0,d=s.length;r!=null&&c<d;)r=r[t(s[c++])];return c&&c==d?r:void 0}return Uz=n,Uz}var qz,E7;function N6e(){if(E7)return qz;E7=1;var e=OP();function t(n,r,s){var c=n==null?void 0:e(n,r);return c===void 0?s:c}return qz=t,qz}var Hz,C7;function V6e(){if(C7)return Hz;C7=1;function e(t,n){return t!=null&&n in Object(t)}return Hz=e,Hz}var Wz,M7;function $6e(){if(M7)return Wz;M7=1;var e=kP(),t=I4(),n=Nh(),r=w4(),s=b4(),c=GE();function d(i,m,x){m=e(m,i);for(var T=-1,C=m.length,A=!1;++T<C;){var I=c(m[T]);if(!(A=i!=null&&x(i,I)))break;i=i[I]}return A||++T!=C?A:(C=i==null?0:i.length,!!C&&s(C)&&r(I,C)&&(n(i)||t(i)))}return Wz=d,Wz}var Gz,A7;function U6e(){if(A7)return Gz;A7=1;var e=V6e(),t=$6e();function n(r,s){return r!=null&&t(r,s,e)}return Gz=n,Gz}var Yz,R7;function q6e(){if(R7)return Yz;R7=1;var e=z4(),t=N6e(),n=U6e(),r=F4(),s=Oie(),c=Lie(),d=GE(),i=1,m=2;function x(T,C){return r(T)&&s(C)?c(d(T),C):function(A){var I=t(A,T);return I===void 0&&I===C?n(A,T):e(C,I,i|m)}}return Yz=x,Yz}var Xz,D7;function LP(){if(D7)return Xz;D7=1;function e(t){return t}return Xz=e,Xz}var Zz,P7;function H6e(){if(P7)return Zz;P7=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Zz=e,Zz}var Kz,I7;function W6e(){if(I7)return Kz;I7=1;var e=OP();function t(n){return function(r){return e(r,n)}}return Kz=t,Kz}var Qz,k7;function G6e(){if(k7)return Qz;k7=1;var e=H6e(),t=W6e(),n=F4(),r=GE();function s(c){return n(c)?e(r(c)):t(c)}return Qz=s,Qz}var Jz,O7;function zP(){if(O7)return Jz;O7=1;var e=O6e(),t=q6e(),n=LP(),r=Nh(),s=G6e();function c(d){return typeof d=="function"?d:d==null?n:typeof d=="object"?r(d)?t(d[0],d[1]):e(d):s(d)}return Jz=c,Jz}var e3,L7;function Y6e(){if(L7)return e3;L7=1;var e=P6e(),t=zP(),n=_ie(),r=Math.max;function s(c,d,i){var m=c==null?0:c.length;if(!m)return-1;var x=i==null?0:n(i);return x<0&&(x=r(m+x,0)),e(c,t(d,3),x)}return e3=s,e3}var X6e=Y6e();const Z6e=Ls(X6e);var t3,z7;function K6e(){if(z7)return t3;z7=1;var e=Math.ceil,t=Math.max;function n(r,s,c,d){for(var i=-1,m=t(e((s-r)/(c||1)),0),x=Array(m);m--;)x[d?m:++i]=r,r+=c;return x}return t3=n,t3}var n3,F7;function Q6e(){if(F7)return n3;F7=1;var e=K6e(),t=EP(),n=vie();function r(s){return function(c,d,i){return i&&typeof i!="number"&&t(c,d,i)&&(d=i=void 0),c=n(c),d===void 0?(d=c,c=0):d=n(d),i=i===void 0?c<d?1:-1:n(i),e(c,d,i,s)}}return n3=r,n3}var r3,B7;function J6e(){if(B7)return r3;B7=1;var e=Q6e(),t=e();return r3=t,r3}var e2e=J6e();const t2e=Ls(e2e);var j7=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function n2e(e,t){return!!(e===t||j7(e)&&j7(t))}function r2e(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!n2e(e[n],t[n]))return!1;return!0}function zie(e,t){t===void 0&&(t=r2e);var n=null;function r(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var d=e.apply(this,s);return n={lastResult:d,lastArgs:s,lastThis:this},d}return r.clear=function(){n=null},r}function Cj(e,t){var n=S4(e);return n?n.innerWidth:P0(e).width}var i3,N7;function i2e(){if(N7)return i3;N7=1;var e=U1(),t=I4(),n=Nh(),r=e?e.isConcatSpreadable:void 0;function s(c){return n(c)||t(c)||!!(r&&c&&c[r])}return i3=s,i3}var o3,V7;function Fie(){if(V7)return o3;V7=1;var e=D4(),t=i2e();function n(r,s,c,d,i){var m=-1,x=r.length;for(c||(c=t),i||(i=[]);++m<x;){var T=r[m];s>0&&c(T)?s>1?n(T,s-1,c,d,i):e(i,T):d||(i[i.length]=T)}return i}return o3=n,o3}var s3,$7;function o2e(){if($7)return s3;$7=1;function e(t){return function(n,r,s){for(var c=-1,d=Object(n),i=s(n),m=i.length;m--;){var x=i[t?m:++c];if(r(d[x],x,d)===!1)break}return n}}return s3=e,s3}var a3,U7;function s2e(){if(U7)return a3;U7=1;var e=o2e(),t=e();return a3=t,a3}var l3,q7;function j4(){if(q7)return l3;q7=1;var e=s2e(),t=WE();function n(r,s){return r&&e(r,s,t)}return l3=n,l3}var c3,H7;function a2e(){if(H7)return c3;H7=1;var e=UE();function t(n,r){return function(s,c){if(s==null)return s;if(!e(s))return n(s,c);for(var d=s.length,i=r?d:-1,m=Object(s);(r?i--:++i<d)&&c(m[i],i,m)!==!1;);return s}}return c3=t,c3}var u3,W7;function l2e(){if(W7)return u3;W7=1;var e=j4(),t=a2e(),n=t(e);return u3=n,u3}var d3,G7;function c2e(){if(G7)return d3;G7=1;var e=l2e(),t=UE();function n(r,s){var c=-1,d=t(r)?Array(r.length):[];return e(r,function(i,m,x){d[++c]=s(i,m,x)}),d}return d3=n,d3}var h3,Y7;function u2e(){if(Y7)return h3;Y7=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return h3=e,h3}var f3,X7;function d2e(){if(X7)return f3;X7=1;var e=qE();function t(n,r){if(n!==r){var s=n!==void 0,c=n===null,d=n===n,i=e(n),m=r!==void 0,x=r===null,T=r===r,C=e(r);if(!x&&!C&&!i&&n>r||i&&m&&T&&!x&&!C||c&&m&&T||!s&&T||!d)return 1;if(!c&&!i&&!C&&n<r||C&&s&&d&&!c&&!i||x&&s&&d||!m&&d||!T)return-1}return 0}return f3=t,f3}var p3,Z7;function h2e(){if(Z7)return p3;Z7=1;var e=d2e();function t(n,r,s){for(var c=-1,d=n.criteria,i=r.criteria,m=d.length,x=s.length;++c<m;){var T=e(d[c],i[c]);if(T){if(c>=x)return T;var C=s[c];return T*(C=="desc"?-1:1)}}return n.index-r.index}return p3=t,p3}var m3,K7;function f2e(){if(K7)return m3;K7=1;var e=B4(),t=OP(),n=zP(),r=c2e(),s=u2e(),c=PP(),d=h2e(),i=LP(),m=Nh();function x(T,C,A){C.length?C=e(C,function(B){return m(B)?function(j){return t(j,B.length===1?B[0]:B)}:B}):C=[i];var I=-1;C=e(C,c(n));var k=r(T,function(B,j,V){var H=e(C,function(G){return G(B)});return{criteria:H,index:++I,value:B}});return s(k,function(B,j){return d(B,j,A)})}return m3=x,m3}var g3,Q7;function p2e(){if(Q7)return g3;Q7=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return g3=e,g3}var y3,J7;function Bie(){if(J7)return y3;J7=1;var e=p2e(),t=Math.max;function n(r,s,c){return s=t(s===void 0?r.length-1:s,0),function(){for(var d=arguments,i=-1,m=t(d.length-s,0),x=Array(m);++i<m;)x[i]=d[s+i];i=-1;for(var T=Array(s+1);++i<s;)T[i]=d[i];return T[s]=c(x),e(r,this,T)}}return y3=n,y3}var v3,eY;function m2e(){if(eY)return v3;eY=1;function e(t){return function(){return t}}return v3=e,v3}var _3,tY;function jie(){if(tY)return _3;tY=1;var e=dx(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return _3=t,_3}var x3,nY;function g2e(){if(nY)return x3;nY=1;var e=m2e(),t=jie(),n=LP(),r=t?function(s,c){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(c),writable:!0})}:n;return x3=r,x3}var b3,rY;function y2e(){if(rY)return b3;rY=1;var e=800,t=16,n=Date.now;function r(s){var c=0,d=0;return function(){var i=n(),m=t-(i-d);if(d=i,m>0){if(++c>=e)return arguments[0]}else c=0;return s.apply(void 0,arguments)}}return b3=r,b3}var w3,iY;function Nie(){if(iY)return w3;iY=1;var e=g2e(),t=y2e(),n=t(e);return w3=n,w3}var S3,oY;function Vie(){if(oY)return S3;oY=1;var e=LP(),t=Bie(),n=Nie();function r(s,c){return n(t(s,c,e),s+"")}return S3=r,S3}var T3,sY;function v2e(){if(sY)return T3;sY=1;var e=Fie(),t=f2e(),n=Vie(),r=EP(),s=n(function(c,d){if(c==null)return[];var i=d.length;return i>1&&r(c,d[0],d[1])?d=[]:i>2&&r(d[0],d[1],d[2])&&(d=[d[0]]),t(c,e(d,1),[])});return T3=s,T3}var _2e=v2e();const x2e=Ls(_2e);function $ie(e){return tie(e)||mie(e)||y4(e)||nie()}var E3,aY;function b2e(){if(aY)return E3;aY=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return E3=e,E3}var C3,lY;function w2e(){if(lY)return C3;lY=1;var e=iy(),t=L4(),n=b2e(),r=Object.prototype,s=r.hasOwnProperty;function c(d){if(!e(d))return n(d);var i=t(d),m=[];for(var x in d)x=="constructor"&&(i||!s.call(d,x))||m.push(x);return m}return C3=c,C3}var M3,cY;function FP(){if(cY)return M3;cY=1;var e=Die(),t=w2e(),n=UE();function r(s){return n(s)?e(s,!0):t(s)}return M3=r,M3}var A3,uY;function S2e(){if(uY)return A3;uY=1;var e=Vie(),t=$E(),n=EP(),r=FP(),s=Object.prototype,c=s.hasOwnProperty,d=e(function(i,m){i=Object(i);var x=-1,T=m.length,C=T>2?m[2]:void 0;for(C&&n(m[0],m[1],C)&&(T=1);++x<T;)for(var A=m[x],I=r(A),k=-1,B=I.length;++k<B;){var j=I[k],V=i[j];(V===void 0||t(V,s[j])&&!c.call(i,j))&&(i[j]=A[j])}return i});return A3=d,A3}var T2e=S2e();const E2e=Ls(T2e);var R3,dY;function N4(){if(dY)return R3;dY=1;var e=jie();function t(n,r,s){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return R3=t,R3}var D3,hY;function C2e(){if(hY)return D3;hY=1;var e=N4(),t=j4(),n=zP();function r(s,c){var d={};return c=n(c,3),t(s,function(i,m,x){e(d,m,c(i,m,x))}),d}return D3=r,D3}var M2e=C2e();const A2e=Ls(M2e);var P3,fY;function Uie(){if(fY)return P3;fY=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s&&n(t[r],r,t)!==!1;);return t}return P3=e,P3}var I3,pY;function qie(){if(pY)return I3;pY=1;var e=N4(),t=$E(),n=Object.prototype,r=n.hasOwnProperty;function s(c,d,i){var m=c[d];(!(r.call(c,d)&&t(m,i))||i===void 0&&!(d in c))&&e(c,d,i)}return I3=s,I3}var k3,mY;function YE(){if(mY)return k3;mY=1;var e=qie(),t=N4();function n(r,s,c,d){var i=!c;c||(c={});for(var m=-1,x=s.length;++m<x;){var T=s[m],C=d?d(c[T],r[T],T,c,r):void 0;C===void 0&&(C=r[T]),i?t(c,T,C):e(c,T,C)}return c}return k3=n,k3}var O3,gY;function R2e(){if(gY)return O3;gY=1;var e=YE(),t=WE();function n(r,s){return r&&e(s,t(s),r)}return O3=n,O3}var L3,yY;function D2e(){if(yY)return L3;yY=1;var e=YE(),t=FP();function n(r,s){return r&&e(s,t(s),r)}return L3=n,L3}var HS={exports:{}};HS.exports;var vY;function P2e(){return vY||(vY=1,function(e,t){var n=Sm(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,c=s&&s.exports===r,d=c?n.Buffer:void 0,i=d?d.allocUnsafe:void 0;function m(x,T){if(T)return x.slice();var C=x.length,A=i?i(C):new x.constructor(C);return x.copy(A),A}e.exports=m}(HS,HS.exports)),HS.exports}var z3,_Y;function I2e(){if(_Y)return z3;_Y=1;function e(t,n){var r=-1,s=t.length;for(n||(n=Array(s));++r<s;)n[r]=t[r];return n}return z3=e,z3}var F3,xY;function k2e(){if(xY)return F3;xY=1;var e=YE(),t=P4();function n(r,s){return e(r,t(r),s)}return F3=n,F3}var B3,bY;function BP(){if(bY)return B3;bY=1;var e=Pie(),t=e(Object.getPrototypeOf,Object);return B3=t,B3}var j3,wY;function Hie(){if(wY)return j3;wY=1;var e=D4(),t=BP(),n=P4(),r=Rie(),s=Object.getOwnPropertySymbols,c=s?function(d){for(var i=[];d;)e(i,n(d)),d=t(d);return i}:r;return j3=c,j3}var N3,SY;function O2e(){if(SY)return N3;SY=1;var e=YE(),t=Hie();function n(r,s){return e(r,t(r),s)}return N3=n,N3}var V3,TY;function Wie(){if(TY)return V3;TY=1;var e=Aie(),t=Hie(),n=FP();function r(s){return e(s,n,t)}return V3=r,V3}var $3,EY;function L2e(){if(EY)return $3;EY=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var s=r.length,c=new r.constructor(s);return s&&typeof r[0]=="string"&&t.call(r,"index")&&(c.index=r.index,c.input=r.input),c}return $3=n,$3}var U3,CY;function V4(){if(CY)return U3;CY=1;var e=Mie();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return U3=t,U3}var q3,MY;function z2e(){if(MY)return q3;MY=1;var e=V4();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.byteLength)}return q3=t,q3}var H3,AY;function F2e(){if(AY)return H3;AY=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return H3=t,H3}var W3,RY;function B2e(){if(RY)return W3;RY=1;var e=U1(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(s){return n?Object(n.call(s)):{}}return W3=r,W3}var G3,DY;function j2e(){if(DY)return G3;DY=1;var e=V4();function t(n,r){var s=r?e(n.buffer):n.buffer;return new n.constructor(s,n.byteOffset,n.length)}return G3=t,G3}var Y3,PY;function N2e(){if(PY)return Y3;PY=1;var e=V4(),t=z2e(),n=F2e(),r=B2e(),s=j2e(),c="[object Boolean]",d="[object Date]",i="[object Map]",m="[object Number]",x="[object RegExp]",T="[object Set]",C="[object String]",A="[object Symbol]",I="[object ArrayBuffer]",k="[object DataView]",B="[object Float32Array]",j="[object Float64Array]",V="[object Int8Array]",H="[object Int16Array]",G="[object Int32Array]",X="[object Uint8Array]",Q="[object Uint8ClampedArray]",ee="[object Uint16Array]",ce="[object Uint32Array]";function fe(ue,ae,xe){var we=ue.constructor;switch(ae){case I:return e(ue);case c:case d:return new we(+ue);case k:return t(ue,xe);case B:case j:case V:case H:case G:case X:case Q:case ee:case ce:return s(ue,xe);case i:return new we;case m:case C:return new we(ue);case x:return n(ue);case T:return new we;case A:return r(ue)}}return Y3=fe,Y3}var X3,IY;function Gie(){if(IY)return X3;IY=1;var e=iy(),t=Object.create,n=function(){function r(){}return function(s){if(!e(s))return{};if(t)return t(s);r.prototype=s;var c=new r;return r.prototype=void 0,c}}();return X3=n,X3}var Z3,kY;function V2e(){if(kY)return Z3;kY=1;var e=Gie(),t=BP(),n=L4();function r(s){return typeof s.constructor=="function"&&!n(s)?e(t(s)):{}}return Z3=r,Z3}var K3,OY;function $2e(){if(OY)return K3;OY=1;var e=IP(),t=Fv(),n="[object Map]";function r(s){return t(s)&&e(s)==n}return K3=r,K3}var Q3,LY;function U2e(){if(LY)return Q3;LY=1;var e=$2e(),t=PP(),n=k4(),r=n&&n.isMap,s=r?t(r):e;return Q3=s,Q3}var J3,zY;function q2e(){if(zY)return J3;zY=1;var e=IP(),t=Fv(),n="[object Set]";function r(s){return t(s)&&e(s)==n}return J3=r,J3}var eF,FY;function H2e(){if(FY)return eF;FY=1;var e=q2e(),t=PP(),n=k4(),r=n&&n.isSet,s=r?t(r):e;return eF=s,eF}var tF,BY;function W2e(){if(BY)return tF;BY=1;var e=R4(),t=Uie(),n=qie(),r=R2e(),s=D2e(),c=P2e(),d=I2e(),i=k2e(),m=O2e(),x=Iie(),T=Wie(),C=IP(),A=L2e(),I=N2e(),k=V2e(),B=Nh(),j=DP(),V=U2e(),H=iy(),G=H2e(),X=WE(),Q=FP(),ee=1,ce=2,fe=4,ue="[object Arguments]",ae="[object Array]",xe="[object Boolean]",we="[object Date]",Me="[object Error]",Se="[object Function]",Ae="[object GeneratorFunction]",_e="[object Map]",Pe="[object Number]",We="[object Object]",Fe="[object RegExp]",Ce="[object Set]",He="[object String]",dt="[object Symbol]",gt="[object WeakMap]",Nt="[object ArrayBuffer]",wt="[object DataView]",ot="[object Float32Array]",st="[object Float64Array]",St="[object Int8Array]",Dt="[object Int16Array]",Et="[object Int32Array]",yt="[object Uint8Array]",Lt="[object Uint8ClampedArray]",Ct="[object Uint16Array]",Wt="[object Uint32Array]",fn={};fn[ue]=fn[ae]=fn[Nt]=fn[wt]=fn[xe]=fn[we]=fn[ot]=fn[st]=fn[St]=fn[Dt]=fn[Et]=fn[_e]=fn[Pe]=fn[We]=fn[Fe]=fn[Ce]=fn[He]=fn[dt]=fn[yt]=fn[Lt]=fn[Ct]=fn[Wt]=!0,fn[Me]=fn[Se]=fn[gt]=!1;function Zt(Ut,kn,Bn,bn,Nn,ft){var vn,Ot=kn&ee,tn=kn&ce,Rn=kn&fe;if(Bn&&(vn=Nn?Bn(Ut,bn,Nn,ft):Bn(Ut)),vn!==void 0)return vn;if(!H(Ut))return Ut;var Hn=B(Ut);if(Hn){if(vn=A(Ut),!Ot)return d(Ut,vn)}else{var mr=C(Ut),Xn=mr==Se||mr==Ae;if(j(Ut))return c(Ut,Ot);if(mr==We||mr==ue||Xn&&!Nn){if(vn=tn||Xn?{}:k(Ut),!Ot)return tn?m(Ut,s(vn,Ut)):i(Ut,r(vn,Ut))}else{if(!fn[mr])return Nn?Ut:{};vn=I(Ut,mr,Ot)}}ft||(ft=new e);var or=ft.get(Ut);if(or)return or;ft.set(Ut,vn),G(Ut)?Ut.forEach(function(Cr){vn.add(Zt(Cr,kn,Bn,Cr,Ut,ft))}):V(Ut)&&Ut.forEach(function(Cr,xr){vn.set(xr,Zt(Cr,kn,Bn,xr,Ut,ft))});var Mn=Rn?tn?T:x:tn?Q:X,Fr=Hn?void 0:Mn(Ut);return t(Fr||Ut,function(Cr,xr){Fr&&(xr=Cr,Cr=Ut[xr]),n(vn,xr,Zt(Cr,kn,Bn,xr,Ut,ft))}),vn}return tF=Zt,tF}var nF,jY;function G2e(){if(jY)return nF;jY=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return nF=e,nF}var rF,NY;function Y2e(){if(NY)return rF;NY=1;var e=OP(),t=gie();function n(r,s){return s.length<2?r:e(r,t(s,0,-1))}return rF=n,rF}var iF,VY;function X2e(){if(VY)return iF;VY=1;var e=kP(),t=G2e(),n=Y2e(),r=GE();function s(c,d){return d=e(d,c),c=n(c,d),c==null||delete c[r(t(d))]}return iF=s,iF}var oF,$Y;function Z2e(){if($Y)return oF;$Y=1;var e=q1(),t=BP(),n=Fv(),r="[object Object]",s=Function.prototype,c=Object.prototype,d=s.toString,i=c.hasOwnProperty,m=d.call(Object);function x(T){if(!n(T)||e(T)!=r)return!1;var C=t(T);if(C===null)return!0;var A=i.call(C,"constructor")&&C.constructor;return typeof A=="function"&&A instanceof A&&d.call(A)==m}return oF=x,oF}var sF,UY;function K2e(){if(UY)return sF;UY=1;var e=Z2e();function t(n){return e(n)?void 0:n}return sF=t,sF}var aF,qY;function Q2e(){if(qY)return aF;qY=1;var e=Fie();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return aF=t,aF}var lF,HY;function J2e(){if(HY)return lF;HY=1;var e=Q2e(),t=Bie(),n=Nie();function r(s){return n(t(s,void 0,e),s+"")}return lF=r,lF}var cF,WY;function e8e(){if(WY)return cF;WY=1;var e=B4(),t=W2e(),n=X2e(),r=kP(),s=YE(),c=K2e(),d=J2e(),i=Wie(),m=1,x=2,T=4,C=d(function(A,I){var k={};if(A==null)return k;var B=!1;I=e(I,function(V){return V=r(V,A),B||(B=V.length>1),V}),s(A,i(A),k),B&&(k=t(k,m|x|T,c));for(var j=I.length;j--;)n(k,I[j]);return k});return cF=C,cF}var t8e=e8e();const n8e=Ls(t8e);var uF,GY;function r8e(){if(GY)return uF;GY=1;var e=Uie(),t=Gie(),n=j4(),r=zP(),s=BP(),c=Nh(),d=DP(),i=x4(),m=iy(),x=O4();function T(C,A,I){var k=c(C),B=k||d(C)||x(C);if(A=r(A,4),I==null){var j=C&&C.constructor;B?I=k?new j:[]:m(C)?I=i(j)?t(s(C)):{}:I={}}return(B?e:n)(C,function(V,H,G){return A(I,V,H,G)}),I}return uF=T,uF}var i8e=r8e();const o8e=Ls(i8e);var jA={exports:{}},s8e=jA.exports,YY;function a8e(){return YY||(YY=1,function(e,t){(function(n,r){e.exports=r()})(s8e,function(){return function(n,r,s){r.prototype.isBetween=function(c,d,i,m){var x=s(c),T=s(d),C=(m=m||"()")[0]==="(",A=m[1]===")";return(C?this.isAfter(x,i):!this.isBefore(x,i))&&(A?this.isBefore(T,i):!this.isAfter(T,i))||(C?this.isBefore(x,i):!this.isAfter(x,i))&&(A?this.isAfter(T,i):!this.isBefore(T,i))}}})}(jA)),jA.exports}a8e();var NA={exports:{}},l8e=NA.exports,XY;function c8e(){return XY||(XY=1,function(e,t){(function(n,r){e.exports=r()})(l8e,function(){return function(n,r){r.prototype.isSameOrAfter=function(s,c){return this.isSame(s,c)||this.isAfter(s,c)}}})}(NA)),NA.exports}c8e();var VA={exports:{}},u8e=VA.exports,ZY;function d8e(){return ZY||(ZY=1,function(e,t){(function(n,r){e.exports=r()})(u8e,function(){return function(n,r){r.prototype.isSameOrBefore=function(s,c){return this.isSame(s,c)||this.isBefore(s,c)}}})}(VA)),VA.exports}d8e();var $A={exports:{}},h8e=$A.exports,KY;function f8e(){return KY||(KY=1,function(e,t){(function(n,r){e.exports=r()})(h8e,function(){return function(n,r,s){var c=r.prototype,d=function(C){return C&&(C.indexOf?C:C.s)},i=function(C,A,I,k,B){var j=C.name?C:C.$locale(),V=d(j[A]),H=d(j[I]),G=V||H.map(function(Q){return Q.slice(0,k)});if(!B)return G;var X=j.weekStart;return G.map(function(Q,ee){return G[(ee+(X||0))%7]})},m=function(){return s.Ls[s.locale()]},x=function(C,A){return C.formats[A]||function(I){return I.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(k,B,j){return B||j.slice(1)})}(C.formats[A.toUpperCase()])},T=function(){var C=this;return{months:function(A){return A?A.format("MMMM"):i(C,"months")},monthsShort:function(A){return A?A.format("MMM"):i(C,"monthsShort","months",3)},firstDayOfWeek:function(){return C.$locale().weekStart||0},weekdays:function(A){return A?A.format("dddd"):i(C,"weekdays")},weekdaysMin:function(A){return A?A.format("dd"):i(C,"weekdaysMin","weekdays",2)},weekdaysShort:function(A){return A?A.format("ddd"):i(C,"weekdaysShort","weekdays",3)},longDateFormat:function(A){return x(C.$locale(),A)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};c.localeData=function(){return T.bind(this)()},s.localeData=function(){var C=m();return{firstDayOfWeek:function(){return C.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(A){return x(C,A)},meridiem:C.meridiem,ordinal:C.ordinal}},s.months=function(){return i(m(),"months")},s.monthsShort=function(){return i(m(),"monthsShort","months",3)},s.weekdays=function(C){return i(m(),"weekdays",null,null,C)},s.weekdaysShort=function(C){return i(m(),"weekdaysShort","weekdays",3,C)},s.weekdaysMin=function(C){return i(m(),"weekdaysMin","weekdays",2,C)}}})}($A)),$A.exports}f8e();var UA={exports:{}},p8e=UA.exports,QY;function m8e(){return QY||(QY=1,function(e,t){(function(n,r){e.exports=r()})(p8e,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,s,c){var d=s.prototype,i=d.format;c.en.formats=n,d.format=function(m){m===void 0&&(m="YYYY-MM-DDTHH:mm:ssZ");var x=this.$locale().formats,T=function(C,A){return C.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(I,k,B){var j=B&&B.toUpperCase();return k||A[B]||n[B]||A[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(V,H,G){return H||G.slice(1)})})}(m,x===void 0?{}:x);return i.call(this,T)}}})}(UA)),UA.exports}m8e();var qA={exports:{}},g8e=qA.exports,JY;function y8e(){return JY||(JY=1,function(e,t){(function(n,r){e.exports=r()})(g8e,function(){return function(n,r,s){var c=function(d,i){if(!i||!i.length||i.length===1&&!i[0]||i.length===1&&Array.isArray(i[0])&&!i[0].length)return null;var m;i.length===1&&i[0].length>0&&(i=i[0]),m=(i=i.filter(function(T){return T}))[0];for(var x=1;x<i.length;x+=1)i[x].isValid()&&!i[x][d](m)||(m=i[x]);return m};s.max=function(){var d=[].slice.call(arguments,0);return c("isAfter",d)},s.min=function(){var d=[].slice.call(arguments,0);return c("isBefore",d)}}})}(qA)),qA.exports}y8e();var HA={exports:{}},v8e=HA.exports,eX;function _8e(){return eX||(eX=1,function(e,t){(function(n,r){e.exports=r()})(v8e,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(c,d,i){var m=d.prototype;i.utc=function(B){var j={date:B,utc:!0,args:arguments};return new d(j)},m.utc=function(B){var j=i(this.toDate(),{locale:this.$L,utc:!0});return B?j.add(this.utcOffset(),n):j},m.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var x=m.parse;m.parse=function(B){B.utc&&(this.$u=!0),this.$utils().u(B.$offset)||(this.$offset=B.$offset),x.call(this,B)};var T=m.init;m.init=function(){if(this.$u){var B=this.$d;this.$y=B.getUTCFullYear(),this.$M=B.getUTCMonth(),this.$D=B.getUTCDate(),this.$W=B.getUTCDay(),this.$H=B.getUTCHours(),this.$m=B.getUTCMinutes(),this.$s=B.getUTCSeconds(),this.$ms=B.getUTCMilliseconds()}else T.call(this)};var C=m.utcOffset;m.utcOffset=function(B,j){var V=this.$utils().u;if(V(B))return this.$u?0:V(this.$offset)?C.call(this):this.$offset;if(typeof B=="string"&&(B=function(Q){Q===void 0&&(Q="");var ee=Q.match(r);if(!ee)return null;var ce=(""+ee[0]).match(s)||["-",0,0],fe=ce[0],ue=60*+ce[1]+ +ce[2];return ue===0?0:fe==="+"?ue:-ue}(B),B===null))return this;var H=Math.abs(B)<=16?60*B:B,G=this;if(j)return G.$offset=H,G.$u=B===0,G;if(B!==0){var X=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(G=this.local().add(H+X,n)).$offset=H,G.$x.$localOffset=X}else G=this.utc();return G};var A=m.format;m.format=function(B){var j=B||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return A.call(this,j)},m.valueOf=function(){var B=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*B},m.isUTC=function(){return!!this.$u},m.toISOString=function(){return this.toDate().toISOString()},m.toString=function(){return this.toDate().toUTCString()};var I=m.toDate;m.toDate=function(B){return B==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():I.call(this)};var k=m.diff;m.diff=function(B,j,V){if(B&&this.$u===B.$u)return k.call(this,B,j,V);var H=this.local(),G=i(B).local();return k.call(H,G,j,V)}}})}(HA)),HA.exports}_8e();var WA={exports:{}},x8e=WA.exports,tX;function b8e(){return tX||(tX=1,function(e,t){(function(n,r){e.exports=r()})(x8e,function(){return function(n,r){r.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})}(WA)),WA.exports}b8e();function Kp(e){return e.children}var Ru={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Zc={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},nX=Object.keys(Zc).map(function(e){return Zc[e]});rt.oneOfType([rt.string,rt.func]);rt.any;rt.func;rt.oneOfType([rt.arrayOf(rt.oneOf(nX)),rt.objectOf(function(e,t){var n=nX.indexOf(t)!==-1&&typeof e[t]=="boolean";if(n)return null;for(var r=arguments.length,s=new Array(r>2?r-2:0),c=2;c<r;c++)s[c-2]=arguments[c];return rt.elementType.apply(rt,[e,t].concat(s))})]);rt.oneOfType([rt.oneOf(["overlap","no-overlap"]),rt.func]);var rX={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function Yie(e,t){var n=Hl(e,"month");return Hl(n,"week",t.startOfWeek())}function Xie(e,t){var n=ZR(e,"month");return ZR(n,"week",t.startOfWeek())}function w8e(e,t){for(var n=Yie(e,t),r=Xie(e,t),s=[];V1(n,r,"day");)s.push(n),n=Jf(n,1,"day");return s}function S8e(e,t){var n=Hl(e,t);return N1(n,e)?n:Jf(n,1,t)}function T8e(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",r=e,s=[];V1(r,t,n);)s.push(r),r=Jf(r,1,n);return s}function E8e(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Hl(e,"day"),e=ZT(e,ZT(t)),e=w1(e,w1(t)),e=XT(e,XT(t)),YT(e,YT(t)))}function iX(e){return ZT(e)===0&&w1(e)===0&&XT(e)===0&&YT(e)===0}function C8e(e,t,n,r){return n==="day"&&(n="date"),Math.abs(aG[n](e,void 0,r)-aG[n](t,void 0,r))}function $4(e,t,n){return!n||n==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Hl(e,n)/rX[n]-+Hl(t,n)/rX[n]))}var M8e=rt.oneOfType([rt.string,rt.func]);function A8e(e,t,n,r,s){var c=typeof r=="function"?r(n,s,e):t.call(e,n,r,s);return $T(c==null||typeof c=="string","`localizer format(..)` must return a string, null, or undefined"),c}function R8e(e,t,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+n,0,0)}function U4(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function D8e(e,t){return $4(e,t,"minutes")+U4(e,t)}function P8e(e){var t=Hl(e,"day");return $4(t,e,"minutes")+U4(t,e)}function I8e(e,t){return _4(e,t,"day")}function k8e(e,t,n){var r=N1(e,t,"minutes");return r?VE(t,n,"minutes"):TP(t,n,"minutes")}function Mj(e,t){return C8e(e,t,"day")}function O8e(e){var t=e.evtA,n=t.start,r=t.end,s=t.allDay,c=e.evtB,d=c.start,i=c.end,m=c.allDay,x=+Hl(n,"day")-+Hl(d,"day"),T=Mj(n,r),C=Mj(d,i);return x||C-T||!!m-!!s||+n-+d||+r-+i}function L8e(e){var t=e.event,n=t.start,r=t.end,s=e.range,c=s.start,d=s.end,i=Hl(n,"day"),m=V1(i,d,"day"),x=v4(i,r,"minutes"),T=x?TP(r,c,"minutes"):VE(r,c,"minutes");return m&&T}function z8e(e,t){return N1(e,t,"day")}function F8e(e,t){return iX(e)&&iX(t)}var B8e=il(function e(t){var n=this;rl(this,e),$T(typeof t.format=="function","date localizer `format(..)` must be a function"),$T(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||M8e,this.formats=t.formats,this.format=function(){for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return A8e.apply(void 0,[n,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||E8e,this.inRange=t.inRange||die,this.lt=t.lt||_4,this.lte=t.lte||V1,this.gt=t.gt||TP,this.gte=t.gte||VE,this.eq=t.eq||N1,this.neq=t.neq||v4,this.startOf=t.startOf||Hl,this.endOf=t.endOf||ZR,this.add=t.add||Jf,this.range=t.range||T8e,this.diff=t.diff||$4,this.ceil=t.ceil||S8e,this.min=t.min||cie,this.max=t.max||uie,this.minutes=t.minutes||w1,this.daySpan=t.daySpan||Mj,this.firstVisibleDay=t.firstVisibleDay||Yie,this.lastVisibleDay=t.lastVisibleDay||Xie,this.visibleDays=t.visibleDays||w8e,this.getSlotDate=t.getSlotDate||R8e,this.getTimezoneOffset=t.getTimezoneOffset||function(r){return r.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||U4,this.getTotalMin=t.getTotalMin||D8e,this.getMinutesFromMidnight=t.getMinutesFromMidnight||P8e,this.continuesPrior=t.continuesPrior||I8e,this.continuesAfter=t.continuesAfter||k8e,this.sortEvents=t.sortEvents||O8e,this.inEventRange=t.inEventRange||L8e,this.isSameDate=t.isSameDate||z8e,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||F8e,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function j8e(e,t,n,r){var s=ys(ys({},e.formats),n);return ys(ys({},e),{},{messages:r,startOfWeek:function(){return e.startOfWeek(t)},format:function(d,i){return e.format(d,s[i]||i,t)}})}var N8e=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.navigate=function(d){n.props.onNavigate(d)},n.view=function(d){n.props.onView(d)},n}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.localizer.messages,c=r.label;return Rt.createElement("div",{className:"rbc-toolbar"},Rt.createElement("span",{className:"rbc-btn-group"},Rt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ru.TODAY)},s.today),Rt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ru.PREVIOUS)},s.previous),Rt.createElement("button",{type:"button",onClick:this.navigate.bind(null,Ru.NEXT)},s.next)),Rt.createElement("span",{className:"rbc-toolbar-label"},c),Rt.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(r){var s=this,c=this.props.views,d=this.props.view;if(c.length>1)return c.map(function(i){return Rt.createElement("button",{type:"button",key:i,className:ha({"rbc-active":d===i}),onClick:s.view.bind(null,i)},r[i])})}}])}(Rt.Component);function Is(e,t){e&&e.apply(null,[].concat(t))}var V8e={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function $8e(e){return ys(ys({},V8e),e)}function U8e(e){var t=e.ref,n=e.callback;U.useEffect(function(){var r=function(c){t.current&&!t.current.contains(c.target)&&n()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[t,n])}var q8e=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Zie=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.style,c=r.className,d=r.event,i=r.selected,m=r.isAllDay,x=r.onSelect,T=r.onDoubleClick,C=r.onKeyPress,A=r.localizer,I=r.continuesPrior,k=r.continuesAfter,B=r.accessors,j=r.getters,V=r.children,H=r.components,G=H.event,X=H.eventWrapper,Q=r.slotStart,ee=r.slotEnd,ce=xm(r,q8e);delete ce.resizable;var fe=B.title(d),ue=B.tooltip(d),ae=B.end(d),xe=B.start(d),we=B.allDay(d),Me=m||we||A.diff(xe,A.ceil(ae,"day"),"day")>1,Se=j.eventProp(d,xe,ae,i),Ae=Rt.createElement("div",{className:"rbc-event-content",title:ue||void 0},G?Rt.createElement(G,{event:d,continuesPrior:I,continuesAfter:k,title:fe,isAllDay:we,localizer:A,slotStart:Q,slotEnd:ee}):fe);return Rt.createElement(X,Object.assign({},this.props,{type:"date"}),Rt.createElement("div",Object.assign({},ce,{style:ys(ys({},Se.style),s),className:ha("rbc-event",c,Se.className,{"rbc-selected":i,"rbc-event-allday":Me,"rbc-event-continues-prior":I,"rbc-event-continues-after":k}),onClick:function(Pe){return x&&x(d,Pe)},onDoubleClick:function(Pe){return T&&T(d,Pe)},onKeyDown:function(Pe){return C&&C(d,Pe)}}),typeof V=="function"?V(Ae):Ae))}}])}(Rt.Component);function jP(e,t){return!e||t==null?!1:D6e(e,t)}function Kie(e,t){var n=e.right-e.left,r=n/t;return r}function Qie(e,t,n,r){var s=Kie(e,r);return n?r-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function H8e(e,t){var n=t.x,r=t.y;return r>=e.top&&r<=e.bottom&&n>=e.left&&n<=e.right}function W8e(e,t,n,r,s){var c=-1,d=-1,i=r-1,m=Kie(t,r),x=Qie(t,n.x,s,r),T=t.top<n.y&&t.bottom>n.y,C=t.top<e.y&&t.bottom>e.y,A=e.y>t.bottom,I=t.top>e.y,k=n.top<t.top&&n.bottom>t.bottom;return k&&(c=0,d=i),T&&(I?(c=0,d=x):A&&(c=x,d=i)),C&&(c=d=s?i-Math.floor((e.x-t.left)/m):Math.floor((e.x-t.left)/m),T?x<c?c=x:d=x:e.y<n.y?d=i:c=0),{startIdx:c,endIdx:d}}function G8e(e){var t=e.target,n=e.offset,r=e.container,s=e.box,c=P0(t),d=c.top,i=c.left,m=c.width,x=c.height,T=P0(r),C=T.top,A=T.left,I=T.width,k=T.height,B=P0(s),j=B.width,V=B.height,H=C+k,G=A+I,X=d+V,Q=i+j,ee=n.x,ce=n.y,fe=X>H?d-V-ce:d+ce+x,ue=Q>G?i+ee-j+m:i+ee;return{topOffset:fe,leftOffset:ue}}function Y8e(e){var t=e.containerRef,n=e.accessors,r=e.getters,s=e.selected,c=e.components,d=e.localizer,i=e.position,m=e.show,x=e.events,T=e.slotStart,C=e.slotEnd,A=e.onSelect,I=e.onDoubleClick,k=e.onKeyPress,B=e.handleDragStart,j=e.popperRef,V=e.target,H=e.offset;U8e({ref:j,callback:m}),U.useLayoutEffect(function(){var Q=G8e({target:V,offset:H,container:t.current,box:j.current}),ee=Q.topOffset,ce=Q.leftOffset;j.current.style.top="".concat(ee,"px"),j.current.style.left="".concat(ce,"px")},[H.x,H.y,V]);var G=i.width,X={minWidth:G+G/2};return Rt.createElement("div",{style:X,className:"rbc-overlay",ref:j},Rt.createElement("div",{className:"rbc-overlay-header"},d.format(T,"dayHeaderFormat")),x.map(function(Q,ee){return Rt.createElement(Zie,{key:ee,type:"popup",localizer:d,event:Q,getters:r,onSelect:A,accessors:n,components:c,onDoubleClick:I,onKeyPress:k,continuesPrior:d.lt(n.end(Q),T,"day"),continuesAfter:d.gte(n.start(Q),C,"day"),slotStart:T,slotEnd:C,selected:jP(Q,s),draggable:!0,onDragStart:function(){return B(Q)},onDragEnd:function(){return m()}})}))}var Jie=Rt.forwardRef(function(e,t){return Rt.createElement(Y8e,Object.assign({},e,{popperRef:t}))});Jie.propTypes={accessors:rt.object.isRequired,getters:rt.object.isRequired,selected:rt.object,components:rt.object.isRequired,localizer:rt.object.isRequired,position:rt.object.isRequired,show:rt.func.isRequired,events:rt.array.isRequired,slotStart:rt.instanceOf(Date).isRequired,slotEnd:rt.instanceOf(Date),onSelect:rt.func,onDoubleClick:rt.func,onKeyPress:rt.func,handleDragStart:rt.func,style:rt.object,offset:rt.shape({x:rt.number,y:rt.number})};function X8e(e){var t=e.containerRef,n=e.popupOffset,r=n===void 0?5:n,s=e.overlay,c=e.accessors,d=e.localizer,i=e.components,m=e.getters,x=e.selected,T=e.handleSelectEvent,C=e.handleDoubleClickEvent,A=e.handleKeyPressEvent,I=e.handleDragStart,k=e.onHide,B=e.overlayDisplay,j=U.useRef(null);if(!s.position)return null;var V=r;isNaN(r)||(V={x:r,y:r});var H=s.position,G=s.events,X=s.date,Q=s.end;return Rt.createElement(C4,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:k,target:s.target},function(ee){var ce=ee.props;return Rt.createElement(Jie,Object.assign({},ce,{containerRef:t,ref:j,target:s.target,offset:V,accessors:c,getters:m,selected:x,components:i,localizer:d,position:H,show:B,events:G,slotStart:X,slotEnd:Q,onSelect:T,onDoubleClick:C,onKeyPress:A,handleDragStart:I}))})}var q4=Rt.forwardRef(function(e,t){return Rt.createElement(X8e,Object.assign({},e,{containerRef:t}))});q4.propTypes={popupOffset:rt.oneOfType([rt.number,rt.shape({x:rt.number,y:rt.number})]),overlay:rt.shape({position:rt.object,events:rt.array,date:rt.instanceOf(Date),end:rt.instanceOf(Date)}),accessors:rt.object.isRequired,localizer:rt.object.isRequired,components:rt.object.isRequired,getters:rt.object.isRequired,selected:rt.object,handleSelectEvent:rt.func,handleDoubleClickEvent:rt.func,handleKeyPressEvent:rt.func,handleDragStart:rt.func,onHide:rt.func,overlayDisplay:rt.func};function pc(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return $S(n,e,t,{passive:!1})}function Z8e(e,t,n){return!e||KT(e,document.elementFromPoint(t,n))}function K8e(e,t){var n=t.clientX,r=t.clientY,s=document.elementFromPoint(n,r);return kie(s,".rbc-event",e)}function Q8e(e,t){var n=t.clientX,r=t.clientY,s=document.elementFromPoint(n,r);return kie(s,".rbc-show-more",e)}function QR(e,t){return!!K8e(e,t)}function J8e(e,t){return!!Q8e(e,t)}function RS(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var oX=5,eqe=250,eoe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.global,s=r===void 0?!1:r,c=n.longPressThreshold,d=c===void 0?250:c,i=n.validContainers,m=i===void 0?[]:i;rl(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=d,this.validContainers=m,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=pc("touchmove",function(){},window),this._removeKeyDownListener=pc("keydown",this._keyListener),this._removeKeyUpListener=pc("keyup",this._keyListener),this._removeDropFromOutsideListener=pc("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=pc("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return il(e,[{key:"on",value:function(n,r){var s=this._listeners[n]||(this._listeners[n]=[]);return s.push(r),{remove:function(){var d=s.indexOf(r);d!==-1&&s.splice(d,1)}}}},{key:"emit",value:function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),c=1;c<r;c++)s[c-1]=arguments[c];var d,i=this._listeners[n]||[];return i.forEach(function(m){d===void 0&&(d=m.apply(void 0,s))}),d}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var r=this._selectRect;return!r||!this.selecting?!1:sX(r,Z0(n))}},{key:"filter",value:function(n){var r=this._selectRect;return!r||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,r){var s=this,c=null,d=null,i=null,m=function(A){c=setTimeout(function(){T(),n(A)},s.longPressThreshold),d=pc("touchmove",function(){return T()}),i=pc("touchend",function(){return T()})},x=pc("touchstart",m),T=function(){c&&clearTimeout(c),d&&d(),i&&i(),c=null,d=null,i=null};return r&&m(r),function(){T(),x()}}},{key:"_addInitialEventListener",value:function(){var n=this,r=pc("mousedown",function(c){n._removeInitialEventListener(),n._handleInitialEvent(c),n._removeInitialEventListener=pc("mousedown",n._handleInitialEvent)}),s=pc("touchstart",function(c){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,c)});this._removeInitialEventListener=function(){r(),s()}}},{key:"_dropFromOutsideListener",value:function(n){var r=RS(n),s=r.pageX,c=r.pageY,d=r.clientX,i=r.clientY;this.emit("dropFromOutside",{x:s,y:c,clientX:d,clientY:i}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var r=RS(n),s=r.pageX,c=r.pageY,d=r.clientX,i=r.clientY;this.emit("dragOverFromOutside",{x:s,y:c,clientX:d,clientY:i}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var r=RS(n),s=r.clientX,c=r.clientY,d=r.pageX,i=r.pageY,m=this.container(),x,T;if(!(n.which===3||n.button===2||!Z8e(m,s,c))){if(!this.globalMouse&&m&&!KT(m,n.target)){var C=tqe(0),A=C.top,I=C.left,k=C.bottom,B=C.right;if(T=Z0(m),x=sX({top:T.top-A,left:T.left-I,bottom:T.bottom+k,right:T.right+B},{top:i,left:d}),!x)return}var j=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:d,y:i,clientX:s,clientY:c});if(j!==!1)switch(n.type){case"mousedown":this._removeEndListener=pc("mouseup",this._handleTerminatingEvent),this._onEscListener=pc("keydown",this._handleTerminatingEvent),this._removeMoveListener=pc("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=pc("touchend",this._handleTerminatingEvent),this._removeMoveListener=pc("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var r=n.target,s=this.validContainers;return!s||!s.length||!r?!0:s.some(function(c){return!!r.closest(c)})}},{key:"_handleTerminatingEvent",value:function(n){var r=this.selecting,s=this._selectRect;if(!r&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var c=!this.container||KT(this.container(),n.target),d=this._isWithinValidContainer(n);return n.key==="Escape"||!d?this.emit("reset"):!r&&c?this._handleClickEvent(n):r?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var r=RS(n),s=r.pageX,c=r.pageY,d=r.clientX,i=r.clientY,m=new Date().getTime();return this._lastClickData&&m-this._lastClickData.timestamp<eqe?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:c,clientX:d,clientY:i})):(this._lastClickData={timestamp:m},this.emit("click",{x:s,y:c,clientX:d,clientY:i}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,s=r.x,c=r.y,d=RS(n),i=d.pageX,m=d.pageY,x=Math.abs(s-i),T=Math.abs(c-m),C=Math.min(i,s),A=Math.min(m,c),I=this.selecting,k=this.isClick(i,m);k&&!I&&!(x||T)||(!I&&!k&&this.emit("selectStart",this._initialEventData),k||(this.selecting=!0,this._selectRect={top:A,left:C,x:i,y:m,right:C+x,bottom:A+T},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,r){var s=this._initialEventData,c=s.x,d=s.y,i=s.isTouch;return!i&&Math.abs(n-c)<=oX&&Math.abs(r-d)<=oX}}])}();function tqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return ey(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function sX(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Z0(e),s=r.top,c=r.left,d=r.right,i=d===void 0?c:d,m=r.bottom,x=m===void 0?s:m,T=Z0(t),C=T.top,A=T.left,I=T.right,k=I===void 0?A:I,B=T.bottom,j=B===void 0?C:B;return!(x-n<C||s+n>j||i-n<A||c+n>k)}function Z0(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+aX("left"),r=t.top+aX("top");return{top:r,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+r}}function aX(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var nqe=function(e){function t(n,r){var s;return rl(this,t),s=Ec(this,t,[n,r]),s.state={selecting:!1},s.containerRef=U.createRef(),s}return Cc(t,e),il(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(r){!r.selectable&&this.props.selectable&&this._selectable(),r.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var r=this.props,s=r.range,c=r.getNow,d=r.getters,i=r.date,m=r.components.dateCellWrapper,x=r.localizer,T=this.state,C=T.selecting,A=T.startIdx,I=T.endIdx,k=c();return Rt.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(B,j){var V=C&&j>=A&&j<=I,H=d.dayProp(B),G=H.className,X=H.style;return Rt.createElement(m,{key:j,value:B,range:s},Rt.createElement("div",{style:X,className:ha("rbc-day-bg",G,V&&"rbc-selected-cell",x.isSameDate(B,k)&&"rbc-today",i&&x.neq(i,B,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var r=this,s=this.containerRef.current,c=this._selector=new eoe(this.props.container,{longPressThreshold:this.props.longPressThreshold}),d=function(m,x){if(!QR(s,m)&&!J8e(s,m)){var T=Z0(s),C=r.props,A=C.range,I=C.rtl;if(H8e(T,m)){var k=Qie(T,m.x,I,A.length);r._selectSlot({startIdx:k,endIdx:k,action:x,box:m})}}r._initial={},r.setState({selecting:!1})};c.on("selecting",function(i){var m=r.props,x=m.range,T=m.rtl,C=-1,A=-1;if(r.state.selecting||(Is(r.props.onSelectStart,[i]),r._initial={x:i.x,y:i.y}),c.isSelected(s)){var I=Z0(s),k=W8e(r._initial,I,i,x.length,T);C=k.startIdx,A=k.endIdx}r.setState({selecting:!0,startIdx:C,endIdx:A})}),c.on("beforeSelect",function(i){if(r.props.selectable==="ignoreEvents")return!QR(r.containerRef.current,i)}),c.on("click",function(i){return d(i,"click")}),c.on("doubleClick",function(i){return d(i,"doubleClick")}),c.on("select",function(i){r._selectSlot(ys(ys({},r.state),{},{action:"select",bounds:i})),r._initial={},r.setState({selecting:!1}),Is(r.props.onSelectEnd,[r.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(r){var s=r.endIdx,c=r.startIdx,d=r.action,i=r.bounds,m=r.box;s!==-1&&c!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:c,end:s,action:d,bounds:i,box:m,resourceId:this.props.resourceId})}}])}(Rt.Component),xh={propTypes:{slotMetrics:rt.object.isRequired,selected:rt.object,isAllDay:rt.bool,accessors:rt.object.isRequired,localizer:rt.object.isRequired,components:rt.object.isRequired,getters:rt.object.isRequired,onSelect:rt.func,onDoubleClick:rt.func,onKeyPress:rt.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,n){var r=t.selected;t.isAllDay;var s=t.accessors,c=t.getters,d=t.onSelect,i=t.onDoubleClick,m=t.onKeyPress,x=t.localizer,T=t.slotMetrics,C=t.components,A=t.resizable,I=T.continuesPrior(n),k=T.continuesAfter(n);return Rt.createElement(Zie,{event:n,getters:c,localizer:x,accessors:s,components:C,onSelect:d,onDoubleClick:i,onKeyPress:m,continuesPrior:I,continuesAfter:k,slotStart:T.first,slotEnd:T.last,selected:jP(n,r),resizable:A})},renderSpan:function(t,n,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",c=Math.abs(n)/t*100+"%";return Rt.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:c,flexBasis:c,maxWidth:c}},s)}},toe=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this,s=this.props,c=s.segments,d=s.slotMetrics.slots,i=s.className,m=1;return Rt.createElement("div",{className:ha(i,"rbc-row")},c.reduce(function(x,T,C){var A=T.event,I=T.left,k=T.right,B=T.span,j="_lvl_"+C,V=I-m,H=xh.renderEvent(r.props,A);return V&&x.push(xh.renderSpan(d,V,"".concat(j,"_gap"))),x.push(xh.renderSpan(d,B,j,H)),m=k+1,x},[]))}}])}(Rt.Component);toe.defaultProps=ys({},xh.defaultProps);function noe(e){var t=e.dateRange,n=e.unit,r=n===void 0?"day":n,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,r)}}function rqe(e,t,n,r){var s=noe({dateRange:t,localizer:r}),c=s.first,d=s.last,i=r.diff(c,d,"day"),m=r.max(r.startOf(n.start(e),"day"),c),x=r.min(r.ceil(n.end(e),"day"),d),T=Z6e(t,function(A){return r.isSameDate(A,m)}),C=r.diff(m,x,"day");return C=Math.min(C,i),C=Math.max(C-r.segmentOffset,1),{event:e,span:C,left:T+1,right:Math.max(T+C,1)}}function Aj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,r,s,c=[],d=[];for(n=0;n<e.length;n++){for(s=e[n],r=0;r<c.length&&iqe(s,c[r]);r++);r>=t?d.push(s):(c[r]||(c[r]=[])).push(s)}for(n=0;n<c.length;n++)c[n].sort(function(i,m){return i.left-m.left});return{levels:c,extra:d}}function QT(e,t,n,r,s){var c={start:r.start(e),end:r.end(e)},d={start:t,end:n};return s.inEventRange({event:c,range:d})}function iqe(e,t){return t.some(function(n){return n.left<=e.right&&n.right>=e.left})}function oqe(e,t,n){var r=BA(e),s=[],c=[];r.forEach(function(m){var x=t.start(m),T=t.end(m);n.daySpan(x,T)>1?s.push(m):c.push(m)});var d=s.sort(function(m,x){return Rj(m,x,t,n)}),i=c.sort(function(m,x){return Rj(m,x,t,n)});return[].concat(BA(d),BA(i))}function Rj(e,t,n,r){var s={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},c={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return r.sortEvents({evtA:s,evtB:c})}var Dj=function(t,n){return t.left<=n&&t.right>=n},dF=function(t,n){return t.filter(function(r){return Dj(r,n)}).map(function(r){return r.event})},roe=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){for(var r=this.props,s=r.segments,c=r.slotMetrics.slots,d=Aj(s).levels[0],i=1,m=1,x=[];i<=c;){var T="_lvl_"+i,C=d.filter(function(X){return Dj(X,i)})[0]||{},A=C.event,I=C.left,k=C.right,B=C.span;if(!A){var j=this.getHiddenEventsForSlot(s,i);if(j.length>0){var V=i-m;V&&x.push(xh.renderSpan(c,V,T+"_gap")),x.push(xh.renderSpan(c,1,T,this.renderShowMore(s,i))),m=i=i+1;continue}i++;continue}var H=Math.max(0,I-m);if(this.canRenderSlotEvent(I,B)){var G=xh.renderEvent(this.props,A);H&&x.push(xh.renderSpan(c,H,T+"_gap")),x.push(xh.renderSpan(c,B,T,G)),m=i=k+1}else H&&x.push(xh.renderSpan(c,H,T+"_gap")),x.push(xh.renderSpan(c,1,T,this.renderShowMore(s,i))),m=i=i+1}return Rt.createElement("div",{className:"rbc-row"},x)}},{key:"getHiddenEventsForSlot",value:function(r,s){var c=dF(r,s),d=Aj(r).levels[0],i=d.filter(function(m){return Dj(m,s)}).map(function(m){return m.event});return c.filter(function(m){return!i.some(function(x){return x===m})})}},{key:"canRenderSlotEvent",value:function(r,s){var c=this.props.segments;return t2e(r,r+s).every(function(d){var i=dF(c,d).length;return i===1})}},{key:"renderShowMore",value:function(r,s){var c=this,d=this.props,i=d.localizer,m=d.slotMetrics,x=d.components,T=m.getEventsForSlot(s),C=dF(r,s),A=C.length;if(x!=null&&x.showMore){var I=x.showMore,k=m.getDateForSlot(s-1);return A?Rt.createElement(I,{localizer:i,slotDate:k,slot:s,count:A,events:T,remainingEvents:C}):!1}return A?Rt.createElement("button",{type:"button",key:"sm_"+s,className:ha("rbc-button-link","rbc-show-more"),onClick:function(j){return c.showMore(s,j)}},i.messages.showMore(A,C,T)):!1}},{key:"showMore",value:function(r,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(r,s.target)}}])}(Rt.Component);roe.defaultProps=ys({},xh.defaultProps);var sqe=function(t){var n=t.children;return Rt.createElement("div",{className:"rbc-row-content-scroll-container"},n)},aqe=function(t,n){return t.left<=n&&t.right>=n},lqe=function(t,n){return t[0].range===n[0].range&&t[0].events===n[0].events};function ioe(){return zie(function(e){for(var t=e.range,n=e.events,r=e.maxRows,s=e.minRows,c=e.accessors,d=e.localizer,i=noe({dateRange:t,localizer:d}),m=i.first,x=i.last,T=n.map(function(B){return rqe(B,t,c,d)}),C=Aj(T,Math.max(r-1,1)),A=C.levels,I=C.extra,k=I.length>0?s-1:s;A.length<k;)A.push([]);return{first:m,last:x,levels:A,extra:I,range:t,slots:t.length,clone:function(j){var V=ioe();return V(ys(ys({},e),j))},getDateForSlot:function(j){return t[j]},getSlotForDate:function(j){return t.find(function(V){return d.isSameDate(V,j)})},getEventsForSlot:function(j){return T.filter(function(V){return aqe(V,j)}).map(function(V){return V.event})},continuesPrior:function(j){return d.continuesPrior(c.start(j),m)},continuesAfter:function(j){var V=c.start(j),H=c.end(j);return d.continuesAfter(V,H,x)}}},lqe)}var JT=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.handleSelectSlot=function(d){var i=n.props,m=i.range,x=i.onSelectSlot;x(m.slice(d.start,d.end+1),d)},n.handleShowMore=function(d,i){var m=n.props,x=m.range,T=m.onShowMore,C=n.slotMetrics(n.props),A=uUe(n.containerRef.current,".rbc-row-bg")[0],I;A&&(I=A.children[d-1]);var k=C.getEventsForSlot(d);T(k,x[d-1],I,d,i)},n.getContainer=function(){var d=n.props.container;return d?d():n.containerRef.current},n.renderHeadingCell=function(d,i){var m=n.props,x=m.renderHeader,T=m.getNow,C=m.localizer;return x({date:d,key:"header_".concat(i),className:ha("rbc-date-cell",C.isSameDate(d,T())&&"rbc-now")})},n.renderDummy=function(){var d=n.props,i=d.className,m=d.range,x=d.renderHeader,T=d.showAllEvents;return Rt.createElement("div",{className:i,ref:n.containerRef},Rt.createElement("div",{className:ha("rbc-row-content",T&&"rbc-row-content-scrollable")},x&&Rt.createElement("div",{className:"rbc-row",ref:n.headingRowRef},m.map(n.renderHeadingCell)),Rt.createElement("div",{className:"rbc-row",ref:n.eventRowRef},Rt.createElement("div",{className:"rbc-row-segment"},Rt.createElement("div",{className:"rbc-event"},Rt.createElement("div",{className:"rbc-event-content"}," "))))))},n.containerRef=U.createRef(),n.headingRowRef=U.createRef(),n.eventRowRef=U.createRef(),n.slotMetrics=ioe(),n}return Cc(t,e),il(t,[{key:"getRowLimit",value:function(){var r,s=Mz(this.eventRowRef.current),c=(r=this.headingRowRef)!==null&&r!==void 0&&r.current?Mz(this.headingRowRef.current):0,d=Mz(this.containerRef.current)-c;return Math.max(Math.floor(d/s),1)}},{key:"render",value:function(){var r=this.props,s=r.date,c=r.rtl,d=r.range,i=r.className,m=r.selected,x=r.selectable,T=r.renderForMeasure,C=r.accessors,A=r.getters,I=r.components,k=r.getNow,B=r.renderHeader,j=r.onSelect,V=r.localizer,H=r.onSelectStart,G=r.onSelectEnd,X=r.onDoubleClick,Q=r.onKeyPress,ee=r.resourceId,ce=r.longPressThreshold,fe=r.isAllDay,ue=r.resizable,ae=r.showAllEvents;if(T)return this.renderDummy();var xe=this.slotMetrics(this.props),we=xe.levels,Me=xe.extra,Se=ae?sqe:Kp,Ae=I.weekWrapper,_e={selected:m,accessors:C,getters:A,localizer:V,components:I,onSelect:j,onDoubleClick:X,onKeyPress:Q,resourceId:ee,slotMetrics:xe,resizable:ue};return Rt.createElement("div",{className:i,role:"rowgroup",ref:this.containerRef},Rt.createElement(nqe,{localizer:V,date:s,getNow:k,rtl:c,range:d,selectable:x,container:this.getContainer,getters:A,onSelectStart:H,onSelectEnd:G,onSelectSlot:this.handleSelectSlot,components:I,longPressThreshold:ce,resourceId:ee}),Rt.createElement("div",{className:ha("rbc-row-content",ae&&"rbc-row-content-scrollable"),role:"row"},B&&Rt.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},d.map(this.renderHeadingCell)),Rt.createElement(Se,null,Rt.createElement(Ae,Object.assign({isAllDay:fe},_e,{rtl:this.props.rtl}),we.map(function(Pe,We){return Rt.createElement(toe,Object.assign({key:We,segments:Pe},_e))}),!!Me.length&&Rt.createElement(roe,Object.assign({segments:Me,onShowMore:this.handleShowMore},_e))))))}}])}(Rt.Component);JT.defaultProps={minRows:0,maxRows:1/0};var H4=function(t){var n=t.label;return Rt.createElement("span",{role:"columnheader","aria-sort":"none"},n)},cqe=function(t){var n=t.label,r=t.drilldownView,s=t.onDrillDown;return r?Rt.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},n):Rt.createElement("span",null,n)},uqe=["date","className"],dqe=function(t,n,r,s,c){return t.filter(function(d){return QT(d,n,r,s,c)})},NP=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.getContainer=function(){return n.containerRef.current},n.renderWeek=function(d,i){var m=n.props,x=m.events,T=m.components,C=m.selectable,A=m.getNow,I=m.selected,k=m.date,B=m.localizer,j=m.longPressThreshold,V=m.accessors,H=m.getters,G=m.showAllEvents,X=n.state,Q=X.needLimitMeasure,ee=X.rowLimit,ce=dqe(BA(x),d[0],d[d.length-1],V,B),fe=oqe(ce,V,B);return Rt.createElement(JT,{key:i,ref:i===0?n.slotRowRef:void 0,container:n.getContainer,className:"rbc-month-row",getNow:A,date:k,range:d,events:fe,maxRows:G?1/0:ee,selected:I,selectable:C,components:T,accessors:V,getters:H,localizer:B,renderHeader:n.readerDateHeading,renderForMeasure:Q,onShowMore:n.handleShowMore,onSelect:n.handleSelectEvent,onDoubleClick:n.handleDoubleClickEvent,onKeyPress:n.handleKeyPressEvent,onSelectSlot:n.handleSelectSlot,longPressThreshold:j,rtl:n.props.rtl,resizable:n.props.resizable,showAllEvents:G})},n.readerDateHeading=function(d){var i=d.date,m=d.className,x=xm(d,uqe),T=n.props,C=T.date,A=T.getDrilldownView,I=T.localizer,k=I.neq(C,i,"month"),B=I.isSameDate(i,C),j=A(i),V=I.format(i,"dateFormat"),H=n.props.components.dateHeader||cqe;return Rt.createElement("div",Object.assign({},x,{className:ha(m,k&&"rbc-off-range",B&&"rbc-current"),role:"cell"}),Rt.createElement(H,{label:V,date:i,drilldownView:j,isOffRange:k,onDrillDown:function(X){return n.handleHeadingClick(i,j,X)}}))},n.handleSelectSlot=function(d,i){n._pendingSelection=n._pendingSelection.concat(d),clearTimeout(n._selectTimer),n._selectTimer=setTimeout(function(){return n.selectDates(i)})},n.handleHeadingClick=function(d,i,m){m.preventDefault(),n.clearSelection(),Is(n.props.onDrillDown,[d,i])},n.handleSelectEvent=function(){n.clearSelection();for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onDoubleClickEvent,i)},n.handleKeyPressEvent=function(){n.clearSelection();for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onKeyPressEvent,i)},n.handleShowMore=function(d,i,m,x,T){var C=n.props,A=C.popup,I=C.onDrillDown,k=C.onShowMore,B=C.getDrilldownView,j=C.doShowMoreDrillDown;if(n.clearSelection(),A){var V=Sie(m,n.containerRef.current);n.setState({overlay:{date:i,events:d,position:V,target:T}})}else j&&Is(I,[i,B(i)||Zc.DAY]);Is(k,[d,i,x])},n.overlayDisplay=function(){n.setState({overlay:null})},n.state={rowLimit:5,needLimitMeasure:!0,date:null},n.containerRef=U.createRef(),n.slotRowRef=U.createRef(),n._bgRows=[],n._pendingSelection=[],n}return Cc(t,e),il(t,[{key:"componentDidMount",value:function(){var r=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||Tie(function(){s=!1,r.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,d=r.className,i=c.visibleDays(s,c),m=Y$e(i,7);return this._weekCount=m.length,Rt.createElement("div",{className:ha("rbc-month-view",d),role:"table","aria-label":"Month View",ref:this.containerRef},Rt.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(m[0])),m.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(r){var s=this.props,c=s.localizer,d=s.components,i=r[0],m=r[r.length-1],x=d.header||H4;return c.range(i,m,"day").map(function(T,C){return Rt.createElement("div",{key:"header_"+C,className:"rbc-header"},Rt.createElement(x,{date:T,localizer:c,label:c.format(T,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var r,s,c=this,d=(r=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&r!==void 0?r:{},i=this.props,m=i.accessors,x=i.localizer,T=i.components,C=i.getters,A=i.selected,I=i.popupOffset,k=i.handleDragStart,B=function(){return c.setState({overlay:null})};return Rt.createElement(q4,{overlay:d,accessors:m,localizer:x,components:T,getters:C,selected:A,popupOffset:I,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:k,show:!!d.position,overlayDisplay:this.overlayDisplay,onHide:B})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(r){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(i,m){return+i-+m});var c=new Date(s[0]),d=new Date(s[s.length-1]);d.setDate(s[s.length-1].getDate()+1),Is(this.props.onSelectSlot,{slots:s,start:c,end:d,action:r.action,bounds:r.bounds,box:r.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(r,s){var c=r.date,d=r.localizer;return{date:c,needLimitMeasure:d.neq(c,s.date,"month")}}}])}(Rt.Component);NP.range=function(e,t){var n=t.localizer,r=n.firstVisibleDay(e,n),s=n.lastVisibleDay(e,n);return{start:r,end:s}};NP.navigate=function(e,t,n){var r=n.localizer;switch(t){case Ru.PREVIOUS:return r.add(e,-1,"month");case Ru.NEXT:return r.add(e,1,"month");default:return e}};NP.title=function(e,t){var n=t.localizer;return n.format(e,"monthHeaderFormat")};var lX=function(t){var n=t.min,r=t.max,s=t.step,c=t.slots,d=t.localizer;return"".concat(+d.startOf(n,"minutes"))+"".concat(+d.startOf(r,"minutes"))+"".concat(s,"-").concat(c)};function W4(e){for(var t=e.min,n=e.max,r=e.step,s=e.timeslots,c=e.localizer,d=lX({step:r,localizer:c}),i=1+c.getTotalMin(t,n),m=c.getMinutesFromMidnight(t),x=Math.ceil((i-1)/(r*s)),T=x*s,C=new Array(x),A=new Array(T),I=0;I<x;I++){C[I]=new Array(s);for(var k=0;k<s;k++){var B=I*s+k,j=B*r;A[B]=C[I][k]=c.getSlotDate(t,m,j)}}var V=A.length*r;A.push(c.getSlotDate(t,m,V));function H(G){var X=c.diff(t,G,"minutes")+c.getDstOffset(t,G);return Math.min(X,i)}return{groups:C,update:function(X){return lX(X)!==d?W4(X):this},dateIsInGroup:function(X,Q){var ee=C[Q+1];return c.inRange(X,C[Q][0],ee?ee[0]:n,"minutes")},nextSlot:function(X){var Q=A[Math.min(A.findIndex(function(ee){return ee===X||c.eq(ee,X)})+1,A.length-1)];return c.eq(Q,X)&&(Q=c.add(X,r,"minutes")),Q},closestSlotToPosition:function(X){var Q=Math.min(A.length-1,Math.max(0,Math.floor(X*T)));return A[Q]},closestSlotFromPoint:function(X,Q){var ee=Math.abs(Q.top-Q.bottom);return this.closestSlotToPosition((X.y-Q.top)/ee)},closestSlotFromDate:function(X){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(c.lt(X,t,"minutes"))return A[0];if(c.gt(X,n,"minutes"))return A[A.length-1];var ee=c.diff(t,X,"minutes");return A[(ee-ee%r)/r+Q]},startsBeforeDay:function(X){return c.lt(X,t,"day")},startsAfterDay:function(X){return c.gt(X,n,"day")},startsBefore:function(X){return c.lt(c.merge(t,X),t,"minutes")},startsAfter:function(X){return c.gt(c.merge(n,X),n,"minutes")},getRange:function(X,Q,ee,ce){ee||(X=c.min(n,c.max(t,X))),ce||(Q=c.min(n,c.max(t,Q)));var fe=H(X),ue=H(Q),ae=ue>r*T&&!c.eq(n,Q)?(fe-r)/(r*T)*100:fe/(r*T)*100;return{top:ae,height:ue/(r*T)*100-ae,start:H(X),startDate:X,end:H(Q),endDate:Q}},getCurrentTimePosition:function(X){var Q=H(X),ee=Q/(r*T)*100;return ee}}}var hqe=function(){function e(t,n){var r=n.accessors,s=n.slotMetrics;rl(this,e);var c=s.getRange(r.start(t),r.end(t)),d=c.start,i=c.startDate,m=c.end,x=c.endDate,T=c.top,C=c.height;this.start=d,this.end=m,this.startMs=+i,this.endMs=+x,this.top=T,this.height=C,this.data=t}return il(e,[{key:"_width",get:function(){if(this.rows){var n=this.rows.reduce(function(s,c){return Math.max(s,c.leaves.length+1)},0)+1;return 100/n}if(this.leaves){var r=100-this.container._width;return r/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var n=this._width,r=Math.min(100,this._width*1.7);if(this.rows)return r;if(this.leaves)return this.leaves.length>0?r:n;var s=this.row.leaves,c=s.indexOf(this);return c===s.length-1?n:r}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var n=this.row,r=n.leaves,s=n.xOffset,c=n._width,d=r.indexOf(this)+1;return s+d*c}}])}();function fqe(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function pqe(e){for(var t=x2e(e,["startMs",function(i){return-i.endMs}]),n=[];t.length>0;){var r=t.shift();n.push(r);for(var s=0;s<t.length;s++){var c=t[s];if(!(r.endMs>c.startMs)){if(s>0){var d=t.splice(s,1)[0];n.push(d)}break}}}return n}function ooe(e){for(var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,s=e.accessors,c=t.map(function(T){return new hqe(T,{slotMetrics:r,accessors:s})}),d=pqe(c),i=[],m=function(){var C=d[x],A=i.find(function(B){return B.end>C.start||Math.abs(C.start-B.start)<n});if(!A)return C.rows=[],i.push(C),1;C.container=A;for(var I=null,k=A.rows.length-1;!I&&k>=0;k--)fqe(A.rows[k],C,n)&&(I=A.rows[k]);I?(I.leaves.push(C),C.row=I):(C.leaves=[],A.rows.push(C))},x=0;x<d.length;x++)m();return d.map(function(T){return{event:T.data,style:{top:T.top,height:T.height,width:T.width,xOffset:Math.max(0,T.xOffset)}}})}function soe(e,t,n){for(var r=0;r<e.friends.length;++r)if(!(n.indexOf(e.friends[r])>-1)){t=t>e.friends[r].idx?t:e.friends[r].idx,n.push(e.friends[r]);var s=soe(e.friends[r],t,n);t=t>s?t:s}return t}function mqe(e){var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,s=e.accessors,c=ooe({events:t,minimumStartDifference:n,slotMetrics:r,accessors:s});c.sort(function(Ae,_e){return Ae=Ae.style,_e=_e.style,Ae.top!==_e.top?Ae.top>_e.top?1:-1:Ae.height!==_e.height?Ae.top+Ae.height<_e.top+_e.height?1:-1:0});for(var d=0;d<c.length;++d)c[d].friends=[],delete c[d].style.left,delete c[d].style.left,delete c[d].idx,delete c[d].size;for(var i=0;i<c.length-1;++i)for(var m=c[i],x=m.style.top,T=m.style.top+m.style.height,C=i+1;C<c.length;++C){var A=c[C],I=A.style.top,k=A.style.top+A.style.height;(I>=x&&k<=T||k>x&&k<=T||I>=x&&I<T)&&(m.friends.push(A),A.friends.push(m))}for(var B=0;B<c.length;++B){for(var j=c[B],V=[],H=0;H<100;++H)V.push(1);for(var G=0;G<j.friends.length;++G)j.friends[G].idx!==void 0&&(V[j.friends[G].idx]=0);j.idx=V.indexOf(1)}for(var X=0;X<c.length;++X){var Q=0;if(!c[X].size){var ee=[],ce=soe(c[X],0,ee);Q=100/(ce+1),c[X].size=Q;for(var fe=0;fe<ee.length;++fe)ee[fe].size=Q}}for(var ue=0;ue<c.length;++ue){var ae=c[ue];ae.style.left=ae.idx*ae.size;for(var xe=0,we=0;we<ae.friends.length;++we){var Me=ae.friends[we].idx;xe=xe>Me?xe:Me}xe<=ae.idx&&(ae.size=100-ae.idx*ae.size);var Se=ae.idx===0?0:3;ae.style.width="calc(".concat(ae.size,"% - ").concat(Se,"px)"),ae.style.height="calc(".concat(ae.style.height,"% - 2px)"),ae.style.xOffset="calc(".concat(ae.style.left,"% + ").concat(Se,"px)")}return c}var cX={overlap:ooe,"no-overlap":mqe};function gqe(e){return!!(e&&e.constructor&&e.call&&e.apply)}function yqe(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,n=t;return t in cX&&(n=cX[t]),gqe(n)?n.apply(this,arguments):[]}var aoe=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.renderSlot,c=r.resource,d=r.group,i=r.getters,m=r.components,x=m===void 0?{}:m,T=x.timeSlotWrapper,C=T===void 0?Kp:T,A=i?i.slotGroupProp(d):{};return Rt.createElement("div",Object.assign({className:"rbc-timeslot-group"},A),d.map(function(I,k){var B=i?i.slotProp(I,c):{};return Rt.createElement(C,{key:k,value:I,resource:c},Rt.createElement("div",Object.assign({},B,{className:ha("rbc-time-slot",B.className)}),s&&s(I,k)))}))}}])}(U.Component);function cA(e){return typeof e=="string"?e:e+"%"}function vqe(e){var t=e.style,n=e.className,r=e.event,s=e.accessors,c=e.rtl,d=e.selected,i=e.label,m=e.continuesPrior,x=e.continuesAfter,T=e.getters,C=e.onClick,A=e.onDoubleClick,I=e.isBackgroundEvent,k=e.onKeyPress,B=e.components,j=B.event,V=B.eventWrapper,H=s.title(r),G=s.tooltip(r),X=s.end(r),Q=s.start(r),ee=T.eventProp(r,Q,X,d),ce=[Rt.createElement("div",{key:"1",className:"rbc-event-label"},i),Rt.createElement("div",{key:"2",className:"rbc-event-content"},j?Rt.createElement(j,{event:r,title:H}):H)],fe=t.height,ue=t.top,ae=t.width,xe=t.xOffset,we=ys(ys({},ee.style),{},y0({top:cA(ue),height:cA(fe),width:cA(ae)},c?"right":"left",cA(xe)));return Rt.createElement(V,Object.assign({type:"time"},e),Rt.createElement("div",{role:"button",tabIndex:0,onClick:C,onDoubleClick:A,style:we,onKeyDown:k,title:G?(typeof i=="string"?i+": ":"")+G:void 0,className:ha(I?"rbc-background-event":"rbc-event",n,ee.className,{"rbc-selected":d,"rbc-event-continues-earlier":m,"rbc-event-continues-later":x})},ce))}var _qe=function(t){var n=t.children,r=t.className,s=t.style,c=t.innerRef;return Rt.createElement("div",{className:r,style:s,ref:c},n)},xqe=Rt.forwardRef(function(e,t){return Rt.createElement(_qe,Object.assign({},e,{innerRef:t}))}),bqe=["dayProp"],wqe=["eventContainerWrapper","timeIndicatorWrapper"],loe=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.state={selecting:!1,timeIndicatorPosition:null},n.intervalTriggered=!1,n.renderEvents=function(d){var i=d.events,m=d.isBackgroundEvent,x=n.props,T=x.rtl,C=x.selected,A=x.accessors,I=x.localizer,k=x.getters,B=x.components,j=x.step,V=x.timeslots,H=x.dayLayoutAlgorithm,G=x.resizable,X=n,Q=X.slotMetrics,ee=I.messages,ce=yqe({events:i,accessors:A,slotMetrics:Q,minimumStartDifference:Math.ceil(j*V/2),dayLayoutAlgorithm:H});return ce.map(function(fe,ue){var ae,xe=fe.event,we=fe.style,Me=A.end(xe),Se=A.start(xe),Ae=(ae=A.eventId(xe))!==null&&ae!==void 0?ae:"evt_"+ue,_e="eventTimeRangeFormat",Pe,We=Q.startsBeforeDay(Se),Fe=Q.startsAfterDay(Me);We?_e="eventTimeRangeEndFormat":Fe&&(_e="eventTimeRangeStartFormat"),We&&Fe?Pe=ee.allDay:Pe=I.format({start:Se,end:Me},_e);var Ce=We||Q.startsBefore(Se),He=Fe||Q.startsAfter(Me);return Rt.createElement(vqe,{style:we,event:xe,label:Pe,key:Ae,getters:k,rtl:T,components:B,continuesPrior:Ce,continuesAfter:He,accessors:A,resource:n.props.resource,selected:jP(xe,C),onClick:function(gt){return n._select(ys(ys(ys({},xe),n.props.resource&&{sourceResource:n.props.resource}),m&&{isBackgroundEvent:!0}),gt)},onDoubleClick:function(gt){return n._doubleClick(xe,gt)},isBackgroundEvent:m,onKeyPress:function(gt){return n._keyPress(xe,gt)},resizable:G})})},n._selectable=function(){var d=n.containerRef.current,i=n.props,m=i.longPressThreshold,x=i.localizer,T=n._selector=new eoe(function(){return d},{longPressThreshold:m}),C=function(B){var j=n.props.onSelecting,V=n.state||{},H=A(B),G=H.startDate,X=H.endDate;j&&(x.eq(V.startDate,G,"minutes")&&x.eq(V.endDate,X,"minutes")||j({start:G,end:X,resourceId:n.props.resource})===!1)||(n.state.start!==H.start||n.state.end!==H.end||n.state.selecting!==H.selecting)&&n.setState(H)},A=function(B){var j=n.slotMetrics.closestSlotFromPoint(B,Z0(d));n.state.selecting||(n._initialSlot=j);var V=n._initialSlot;x.lte(V,j)?j=n.slotMetrics.nextSlot(j):x.gt(V,j)&&(V=n.slotMetrics.nextSlot(V));var H=n.slotMetrics.getRange(x.min(V,j),x.max(V,j));return ys(ys({},H),{},{selecting:!0,top:"".concat(H.top,"%"),height:"".concat(H.height,"%")})},I=function(B,j){if(!QR(n.containerRef.current,B)){var V=A(B),H=V.startDate,G=V.endDate;n._selectSlot({startDate:H,endDate:G,action:j,box:B})}n.setState({selecting:!1})};T.on("selecting",C),T.on("selectStart",C),T.on("beforeSelect",function(k){if(n.props.selectable==="ignoreEvents")return!QR(n.containerRef.current,k)}),T.on("click",function(k){return I(k,"click")}),T.on("doubleClick",function(k){return I(k,"doubleClick")}),T.on("select",function(k){n.state.selecting&&(n._selectSlot(ys(ys({},n.state),{},{action:"select",bounds:k})),n.setState({selecting:!1}))}),T.on("reset",function(){n.state.selecting&&n.setState({selecting:!1})})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n._selectSlot=function(d){for(var i=d.startDate,m=d.endDate,x=d.action,T=d.bounds,C=d.box,A=i,I=[];n.props.localizer.lte(A,m);)I.push(A),A=new Date(+A+n.props.step*60*1e3);Is(n.props.onSelectSlot,{slots:I,start:i,end:m,resourceId:n.props.resource,action:x,bounds:T,box:C})},n._select=function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onSelectEvent,i)},n._doubleClick=function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onDoubleClickEvent,i)},n._keyPress=function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onKeyPressEvent,i)},n.slotMetrics=W4(n.props),n.containerRef=U.createRef(),n}return Cc(t,e),il(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(r,s){this.props.selectable&&!r.selectable&&this._selectable(),!this.props.selectable&&r.selectable&&this._teardownSelectable();var c=this.props,d=c.getNow,i=c.isNow,m=c.localizer,x=c.date,T=c.min,C=c.max,A=m.neq(r.getNow(),d(),"minutes");if(r.isNow!==i||A){if(this.clearTimeIndicatorInterval(),i){var I=!A&&m.eq(r.date,x,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(I)}}else i&&(m.neq(r.min,T,"minutes")||m.neq(r.max,C,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){r.intervalTriggered=!0,r.positionTimeIndicator(),r.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var r=this.props,s=r.min,c=r.max,d=r.getNow,i=d();if(i>=s&&i<=c){var m=this.slotMetrics.getCurrentTimePosition(i);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:m})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var r=this.props,s=r.date,c=r.max,d=r.rtl,i=r.isNow,m=r.resource,x=r.accessors,T=r.localizer,C=r.getters,A=C.dayProp,I=xm(C,bqe),k=r.components,B=k.eventContainerWrapper,j=k.timeIndicatorWrapper,V=xm(k,wqe);this.slotMetrics=this.slotMetrics.update(this.props);var H=this.slotMetrics,G=this.state,X=G.selecting,Q=G.top,ee=G.height,ce=G.startDate,fe=G.endDate,ue={start:ce,end:fe},ae=A(c,m),xe=ae.className,we=ae.style,Me={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},Se=V.dayColumnWrapper||xqe;return Rt.createElement(Se,{ref:this.containerRef,date:s,style:we,className:ha(xe,"rbc-day-slot","rbc-time-column",i&&"rbc-now",i&&"rbc-today",X&&"rbc-slot-selecting"),slotMetrics:H,resource:m},H.groups.map(function(Ae,_e){return Rt.createElement(aoe,{key:_e,group:Ae,resource:m,getters:I,components:V})}),Rt.createElement(B,{localizer:T,resource:m,accessors:x,getters:I,components:V,slotMetrics:H},Rt.createElement("div",{className:ha("rbc-events-container",d&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),X&&Rt.createElement("div",{className:"rbc-slot-selection",style:{top:Q,height:ee}},Rt.createElement("span",null,T.format(ue,"selectRangeFormat"))),i&&this.intervalTriggered&&Rt.createElement(j,Me,Rt.createElement("div",Me)))}}])}(Rt.Component);loe.defaultProps={dragThroughEvents:!0,timeslots:2};var coe=function(t){var n=t.label;return Rt.createElement(Rt.Fragment,null,n)},Sqe=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.handleHeaderClick=function(d,i,m){m.preventDefault(),Is(n.props.onDrillDown,[d,i])},n.renderRow=function(d){var i=n.props,m=i.events,x=i.rtl,T=i.selectable,C=i.getNow,A=i.range,I=i.getters,k=i.localizer,B=i.accessors,j=i.components,V=i.resizable,H=B.resourceId(d),G=d?m.filter(function(X){return B.resource(X)===H}):m;return Rt.createElement(JT,{isAllDay:!0,rtl:x,getNow:C,minRows:2,maxRows:n.props.allDayMaxRows+1,range:A,events:G,resourceId:H,className:"rbc-allday-cell",selectable:T,selected:n.props.selected,components:j,accessors:B,getters:I,localizer:k,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyPress:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:V})},n}return Cc(t,e),il(t,[{key:"renderHeaderCells",value:function(r){var s=this,c=this.props,d=c.localizer,i=c.getDrilldownView,m=c.getNow,x=c.getters.dayProp,T=c.components.header,C=T===void 0?H4:T,A=m();return r.map(function(I,k){var B=i(I),j=d.format(I,"dayFormat"),V=x(I),H=V.className,G=V.style,X=Rt.createElement(C,{date:I,label:j,localizer:d});return Rt.createElement("div",{key:k,style:G,className:ha("rbc-header",H,d.isSameDate(I,A)&&"rbc-today")},B?Rt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(ee){return s.handleHeaderClick(I,B,ee)}},X):Rt.createElement("span",null,X))})}},{key:"render",value:function(){var r=this,s=this.props,c=s.width,d=s.rtl,i=s.resources,m=s.range,x=s.events,T=s.getNow,C=s.accessors,A=s.selectable,I=s.components,k=s.getters,B=s.scrollRef,j=s.localizer,V=s.isOverflowing,H=s.components,G=H.timeGutterHeader,X=H.resourceHeader,Q=X===void 0?coe:X,ee=s.resizable,ce={};V&&(ce[d?"marginLeft":"marginRight"]="".concat(E4()-1,"px"));var fe=i.groupEvents(x);return Rt.createElement("div",{style:ce,ref:B,className:ha("rbc-time-header",V&&"rbc-overflowing")},Rt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:c,minWidth:c,maxWidth:c}},G&&Rt.createElement(G,null)),i.map(function(ue,ae){var xe=q0(ue,2),we=xe[0],Me=xe[1];return Rt.createElement("div",{className:"rbc-time-header-content",key:we||ae},Me&&Rt.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(ae)},Rt.createElement("div",{className:"rbc-header"},Rt.createElement(Q,{index:ae,label:C.resourceTitle(Me),resource:Me}))),Rt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(m.length<=1?" rbc-time-header-cell-single-day":"")},r.renderHeaderCells(m)),Rt.createElement(JT,{isAllDay:!0,rtl:d,getNow:T,minRows:2,maxRows:r.props.allDayMaxRows+1,range:m,events:fe.get(we)||[],resourceId:Me&&we,className:"rbc-allday-cell",selectable:A,selected:r.props.selected,components:I,accessors:C,getters:k,localizer:j,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:ee}))}))}}])}(Rt.Component),Tqe=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.handleHeaderClick=function(d,i,m){m.preventDefault(),Is(n.props.onDrillDown,[d,i])},n}return Cc(t,e),il(t,[{key:"renderHeaderCells",value:function(r){var s=this,c=this.props,d=c.localizer,i=c.getDrilldownView,m=c.getNow,x=c.getters.dayProp,T=c.components,C=T.header,A=C===void 0?H4:C,I=T.resourceHeader,k=I===void 0?coe:I,B=c.resources,j=c.accessors,V=c.events,H=c.rtl,G=c.selectable,X=c.components,Q=c.getters,ee=c.resizable,ce=m(),fe=B.groupEvents(V);return r.map(function(ue,ae){var xe=i(ue),we=d.format(ue,"dayFormat"),Me=x(ue),Se=Me.className,Ae=Me.style,_e=Rt.createElement(A,{date:ue,label:we,localizer:d});return Rt.createElement("div",{key:ae,className:"rbc-time-header-content rbc-resource-grouping"},Rt.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(r.length<=1?" rbc-time-header-cell-single-day":"")},Rt.createElement("div",{style:Ae,className:ha("rbc-header",Se,d.isSameDate(ue,ce)&&"rbc-today")},xe?Rt.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(We){return s.handleHeaderClick(ue,xe,We)}},_e):Rt.createElement("span",null,_e))),Rt.createElement("div",{className:"rbc-row"},B.map(function(Pe,We){var Fe=q0(Pe,2),Ce=Fe[0],He=Fe[1];return Rt.createElement("div",{key:"resource_".concat(Ce,"_").concat(We),className:ha("rbc-header",Se,d.isSameDate(ue,ce)&&"rbc-today")},Rt.createElement(k,{index:We,label:j.resourceTitle(He),resource:He}))})),Rt.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},B.map(function(Pe,We){var Fe=q0(Pe,2),Ce=Fe[0],He=Fe[1],dt=(fe.get(Ce)||[]).filter(function(gt){return d.isSameDate(gt.start,ue)||d.isSameDate(gt.end,ue)});return Rt.createElement(JT,{key:"resource_".concat(Ce,"_").concat(We),isAllDay:!0,rtl:H,getNow:m,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[ue],events:dt,resourceId:He&&Ce,className:"rbc-allday-cell",selectable:G,selected:s.props.selected,components:X,accessors:j,getters:Q,localizer:d,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:ee})})))})}},{key:"render",value:function(){var r=this.props,s=r.width,c=r.rtl,d=r.range,i=r.scrollRef,m=r.isOverflowing,x=r.components.timeGutterHeader,T={};return m&&(T[c?"marginLeft":"marginRight"]="".concat(E4()-1,"px")),Rt.createElement("div",{style:T,ref:i,className:ha("rbc-time-header",m&&"rbc-overflowing")},Rt.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},x&&Rt.createElement(x,null)),this.renderHeaderCells(d))}}])}(Rt.Component);function Eqe(e){var t=e.min,n=e.max,r=e.localizer;return r.getTimezoneOffset(t)!==r.getTimezoneOffset(n)?{start:r.add(t,-1,"day"),end:r.add(n,-1,"day")}:{start:t,end:n}}var Cqe=function(t){var n=t.min,r=t.max,s=t.timeslots,c=t.step,d=t.localizer,i=t.getNow,m=t.resource,x=t.components,T=t.getters,C=t.gutterRef,A=x.timeGutterWrapper,I=U.useMemo(function(){return Eqe({min:n,max:r,localizer:d})},[n==null?void 0:n.toISOString(),r==null?void 0:r.toISOString(),d]),k=I.start,B=I.end,j=U.useState(W4({min:k,max:B,timeslots:s,step:c,localizer:d})),V=q0(j,2),H=V[0],G=V[1];U.useEffect(function(){H&&G(H.update({min:k,max:B,timeslots:s,step:c,localizer:d}))},[k==null?void 0:k.toISOString(),B==null?void 0:B.toISOString(),s,c]);var X=U.useCallback(function(Q,ee){if(ee)return null;var ce=H.dateIsInGroup(i(),ee);return Rt.createElement("span",{className:ha("rbc-label",ce&&"rbc-now")},d.format(Q,"timeGutterFormat"))},[H,d,i]);return Rt.createElement(A,{slotMetrics:H},Rt.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:C},H.groups.map(function(Q,ee){return Rt.createElement(aoe,{key:ee,group:Q,resource:m,components:x,renderSlot:X,getters:T})})))},Mqe=Rt.forwardRef(function(e,t){return Rt.createElement(Cqe,Object.assign({gutterRef:t},e))}),hF={};function Aqe(e,t){return{map:function(r){return e?e.map(function(s,c){return r([t.resourceId(s),s],c)}):[r([hF,null],0)]},groupEvents:function(r){var s=new Map;return e?(r.forEach(function(c){var d=t.resource(c)||hF;if(Array.isArray(d))d.forEach(function(m){var x=s.get(m)||[];x.push(c),s.set(m,x)});else{var i=s.get(d)||[];i.push(c),s.set(d,i)}}),s):(s.set(hF,r),s)}}}var H1=function(e){function t(n){var r;return rl(this,t),r=Ec(this,t,[n]),r.handleScroll=function(s){r.scrollRef.current&&(r.scrollRef.current.scrollLeft=s.target.scrollLeft)},r.handleResize=function(){IG(r.rafHandle),r.rafHandle=Tie(r.checkOverflow)},r.handleKeyPressEvent=function(){r.clearSelection();for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];Is(r.props.onKeyPressEvent,c)},r.handleSelectEvent=function(){r.clearSelection();for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];Is(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];Is(r.props.onDoubleClickEvent,c)},r.handleShowMore=function(s,c,d,i,m){var x=r.props,T=x.popup,C=x.onDrillDown,A=x.onShowMore,I=x.getDrilldownView,k=x.doShowMoreDrillDown;if(r.clearSelection(),T){var B=Sie(d,r.containerRef.current);r.setState({overlay:{date:c,events:s,position:ys(ys({},B),{},{width:"200px"}),target:m}})}else k&&Is(C,[c,I(c)||Zc.DAY]);Is(A,[s,c,i])},r.handleSelectAllDaySlot=function(s,c){var d=r.props.onSelectSlot,i=new Date(s[0]),m=new Date(s[s.length-1]);m.setDate(s[s.length-1].getDate()+1),Is(d,{slots:s,start:i,end:m,action:c.action,resourceId:c.resourceId})},r.overlayDisplay=function(){r.setState({overlay:null})},r.checkOverflow=function(){if(!r._updatingOverflow){var s=r.contentRef.current;if(s!=null&&s.scrollHeight){var c=s.scrollHeight>s.clientHeight;r.state.isOverflowing!==c&&(r._updatingOverflow=!0,r.setState({isOverflowing:c},function(){r._updatingOverflow=!1}))}}},r.memoizedResources=zie(function(s,c){return Aqe(s,c)}),r.state={gutterWidth:void 0,isOverflowing:null},r.scrollRef=Rt.createRef(),r.contentRef=Rt.createRef(),r.containerRef=Rt.createRef(),r._scrollRatio=null,r.gutterRef=U.createRef(),r}return Cc(t,e),il(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),IG(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(r,s,c,d,i,m,x,T,C,A){var I=this.props,k=I.min,B=I.max,j=(d.get(s)||[]).filter(function(H){return m.inRange(r,x.start(H),x.end(H),"day")}),V=(i.get(s)||[]).filter(function(H){return m.inRange(r,x.start(H),x.end(H),"day")});return Rt.createElement(loe,Object.assign({},this.props,{localizer:m,min:m.merge(r,k),max:m.merge(r,B),resource:c&&s,components:T,isNow:m.isSameDate(r,A),key:"".concat(s,"-").concat(r),date:r,events:j,backgroundEvents:V,dayLayoutAlgorithm:C}))}},{key:"renderResourcesFirst",value:function(r,s,c,d,i,m,x,T,C){var A=this;return s.map(function(I){var k=q0(I,2),B=k[0],j=k[1];return r.map(function(V){return A.renderDayColumn(V,B,j,c,d,i,m,T,C,x)})})}},{key:"renderRangeFirst",value:function(r,s,c,d,i,m,x,T,C){var A=this;return r.map(function(I){return Rt.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:I},s.map(function(k){var B=q0(k,2),j=B[0],V=B[1];return Rt.createElement("div",{style:{flex:1},key:m.resourceId(V)},A.renderDayColumn(I,j,V,c,d,i,m,T,C,x))}))})}},{key:"renderEvents",value:function(r,s,c,d){var i=this.props,m=i.accessors,x=i.localizer,T=i.resourceGroupingLayout,C=i.components,A=i.dayLayoutAlgorithm,I=this.memoizedResources(this.props.resources,m),k=I.groupEvents(s),B=I.groupEvents(c);return T?this.renderRangeFirst(r,I,k,B,x,m,d,C,A):this.renderResourcesFirst(r,I,k,B,x,m,d,C,A)}},{key:"render",value:function(){var r,s=this.props,c=s.events,d=s.backgroundEvents,i=s.range,m=s.width,x=s.rtl,T=s.selected,C=s.getNow,A=s.resources,I=s.components,k=s.accessors,B=s.getters,j=s.localizer,V=s.min,H=s.max,G=s.showMultiDayTimes,X=s.longPressThreshold,Q=s.resizable,ee=s.resourceGroupingLayout;m=m||this.state.gutterWidth;var ce=i[0],fe=i[i.length-1];this.slots=i.length;var ue=[],ae=[],xe=[];c.forEach(function(Me){if(QT(Me,ce,fe,k,j)){var Se=k.start(Me),Ae=k.end(Me);k.allDay(Me)||j.startAndEndAreDateOnly(Se,Ae)||!G&&!j.isSameDate(Se,Ae)?ue.push(Me):ae.push(Me)}}),d.forEach(function(Me){QT(Me,ce,fe,k,j)&&xe.push(Me)}),ue.sort(function(Me,Se){return Rj(Me,Se,k,j)});var we={range:i,events:ue,width:m,rtl:x,getNow:C,localizer:j,selected:T,allDayMaxRows:this.props.showAllEvents?1/0:(r=this.props.allDayMaxRows)!==null&&r!==void 0?r:1/0,resources:this.memoizedResources(A,k),selectable:this.props.selectable,accessors:k,getters:B,components:I,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:X,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:Q};return Rt.createElement("div",{className:ha("rbc-time-view",A&&"rbc-time-view-resources"),ref:this.containerRef},A&&A.length>1&&ee?Rt.createElement(Tqe,we):Rt.createElement(Sqe,we),this.props.popup&&this.renderOverlay(),Rt.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},Rt.createElement(Mqe,{date:ce,ref:this.gutterRef,localizer:j,min:j.merge(ce,V),max:j.merge(ce,H),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:I,className:"rbc-time-gutter",getters:B}),this.renderEvents(i,ae,xe,C())))}},{key:"renderOverlay",value:function(){var r,s,c=this,d=(r=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&r!==void 0?r:{},i=this.props,m=i.accessors,x=i.localizer,T=i.components,C=i.getters,A=i.selected,I=i.popupOffset,k=i.handleDragStart,B=function(){return c.setState({overlay:null})};return Rt.createElement(q4,{overlay:d,accessors:m,localizer:x,components:T,getters:C,selected:A,popupOffset:I,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:k,show:!!d.position,overlayDisplay:this.overlayDisplay,onHide:B})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var r=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,c=(s=r.gutterRef)!==null&&s!==void 0&&s.current?Cj(r.gutterRef.current):void 0;c&&r.state.gutterWidth!==c&&r.setState({gutterWidth:c})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var r=this.contentRef.current;r.scrollTop=r.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=r.min,c=r.max,d=r.scrollToTime,i=r.localizer,m=i.diff(i.merge(d,s),d,"milliseconds"),x=i.diff(s,c,"milliseconds");this._scrollRatio=m/x}}])}(U.Component);H1.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var Rqe=["date","localizer","min","max","scrollToTime","enableAutoScroll"],VP=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,d=r.min,i=d===void 0?c.startOf(new Date,"day"):d,m=r.max,x=m===void 0?c.endOf(new Date,"day"):m,T=r.scrollToTime,C=T===void 0?c.startOf(new Date,"day"):T,A=r.enableAutoScroll,I=A===void 0?!0:A,k=xm(r,Rqe),B=t.range(s,{localizer:c});return Rt.createElement(H1,Object.assign({},k,{range:B,eventOffset:10,localizer:c,min:i,max:x,scrollToTime:C,enableAutoScroll:I}))}}])}(Rt.Component);VP.range=function(e,t){var n=t.localizer;return[n.startOf(e,"day")]};VP.navigate=function(e,t,n){var r=n.localizer;switch(t){case Ru.PREVIOUS:return r.add(e,-1,"day");case Ru.NEXT:return r.add(e,1,"day");default:return e}};VP.title=function(e,t){var n=t.localizer;return n.format(e,"dayHeaderFormat")};var Dqe=["date","localizer","min","max","scrollToTime","enableAutoScroll"],_v=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,d=r.min,i=d===void 0?c.startOf(new Date,"day"):d,m=r.max,x=m===void 0?c.endOf(new Date,"day"):m,T=r.scrollToTime,C=T===void 0?c.startOf(new Date,"day"):T,A=r.enableAutoScroll,I=A===void 0?!0:A,k=xm(r,Dqe),B=t.range(s,this.props);return Rt.createElement(H1,Object.assign({},k,{range:B,eventOffset:15,localizer:c,min:i,max:x,scrollToTime:C,enableAutoScroll:I}))}}])}(Rt.Component);_v.defaultProps=H1.defaultProps;_v.navigate=function(e,t,n){var r=n.localizer;switch(t){case Ru.PREVIOUS:return r.add(e,-1,"week");case Ru.NEXT:return r.add(e,1,"week");default:return e}};_v.range=function(e,t){var n=t.localizer,r=n.startOfWeek(),s=n.startOf(e,"week",r),c=n.endOf(e,"week",r);return n.range(s,c)};_v.title=function(e,t){var n=t.localizer,r=_v.range(e,{localizer:n}),s=$ie(r),c=s[0],d=s.slice(1);return n.format({start:c,end:d.pop()},"dayRangeHeaderFormat")};var Pqe=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function G4(e,t){return _v.range(e,t).filter(function(n){return[6,0].indexOf(n.getDay())===-1})}var XE=function(e){function t(){return rl(this,t),Ec(this,t,arguments)}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.date,c=r.localizer,d=r.min,i=d===void 0?c.startOf(new Date,"day"):d,m=r.max,x=m===void 0?c.endOf(new Date,"day"):m,T=r.scrollToTime,C=T===void 0?c.startOf(new Date,"day"):T,A=r.enableAutoScroll,I=A===void 0?!0:A,k=xm(r,Pqe),B=G4(s,this.props);return Rt.createElement(H1,Object.assign({},k,{range:B,eventOffset:15,localizer:c,min:i,max:x,scrollToTime:C,enableAutoScroll:I}))}}])}(Rt.Component);XE.defaultProps=H1.defaultProps;XE.range=G4;XE.navigate=_v.navigate;XE.title=function(e,t){var n=t.localizer,r=G4(e,{localizer:n}),s=$ie(r),c=s[0],d=s.slice(1);return n.format({start:c,end:d.pop()},"dayRangeHeaderFormat")};var $P=30;function UP(e){var t=e.accessors,n=e.components,r=e.date,s=e.events,c=e.getters,d=e.length,i=d===void 0?$P:d,m=e.localizer,x=e.onDoubleClickEvent,T=e.onSelectEvent,C=e.selected,A=U.useRef(null),I=U.useRef(null),k=U.useRef(null),B=U.useRef(null),j=U.useRef(null);U.useEffect(function(){G()});var V=function(fe,ue,ae){var xe=n.event,we=n.date;return ue=ue.filter(function(Me){return QT(Me,m.startOf(fe,"day"),m.endOf(fe,"day"),t,m)}),ue.map(function(Me,Se){var Ae=t.title(Me),_e=t.end(Me),Pe=t.start(Me),We=c.eventProp(Me,Pe,_e,jP(Me,C)),Fe=Se===0&&m.format(fe,"agendaDateFormat"),Ce=Se===0?Rt.createElement("td",{rowSpan:ue.length,className:"rbc-agenda-date-cell"},we?Rt.createElement(we,{day:fe,label:Fe}):Fe):!1;return Rt.createElement("tr",{key:ae+"_"+Se,className:We.className,style:We.style},Ce,Rt.createElement("td",{className:"rbc-agenda-time-cell"},H(fe,Me)),Rt.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(dt){return T&&T(Me,dt)},onDoubleClick:function(dt){return x&&x(Me,dt)}},xe?Rt.createElement(xe,{event:Me,title:Ae}):Ae))},[])},H=function(fe,ue){var ae="",xe=n.time,we=m.messages.allDay,Me=t.end(ue),Se=t.start(ue);return t.allDay(ue)||(m.eq(Se,Me)?we=m.format(Se,"agendaTimeFormat"):m.isSameDate(Se,Me)?we=m.format({start:Se,end:Me},"agendaTimeRangeFormat"):m.isSameDate(fe,Se)?we=m.format(Se,"agendaTimeFormat"):m.isSameDate(fe,Me)&&(we=m.format(Me,"agendaTimeFormat"))),m.gt(fe,Se,"day")&&(ae="rbc-continues-prior"),m.lt(fe,Me,"day")&&(ae+=" rbc-continues-after"),Rt.createElement("span",{className:ae.trim()},xe?Rt.createElement(xe,{event:ue,day:fe,label:we}):we)},G=function(){if(j.current){var fe=A.current,ue=j.current.firstChild;if(ue){var ae=B.current.scrollHeight>B.current.clientHeight,xe=[],we=xe;xe=[Cj(ue.children[0]),Cj(ue.children[1])],(we[0]!==xe[0]||we[1]!==xe[1])&&(I.current.style.width=xe[0]+"px",k.current.style.width=xe[1]+"px"),ae?(DQ(fe,"rbc-header-overflowing"),fe.style.marginRight=E4()+"px"):PQ(fe,"rbc-header-overflowing")}}},X=m.messages,Q=m.add(r,i,"day"),ee=m.range(r,Q,"day");return s=s.filter(function(ce){return QT(ce,m.startOf(r,"day"),m.endOf(Q,"day"),t,m)}),s.sort(function(ce,fe){return+t.start(ce)-+t.start(fe)}),Rt.createElement("div",{className:"rbc-agenda-view"},s.length!==0?Rt.createElement(Rt.Fragment,null,Rt.createElement("table",{ref:A,className:"rbc-agenda-table"},Rt.createElement("thead",null,Rt.createElement("tr",null,Rt.createElement("th",{className:"rbc-header",ref:I},X.date),Rt.createElement("th",{className:"rbc-header",ref:k},X.time),Rt.createElement("th",{className:"rbc-header"},X.event)))),Rt.createElement("div",{className:"rbc-agenda-content",ref:B},Rt.createElement("table",{className:"rbc-agenda-table"},Rt.createElement("tbody",{ref:j},ee.map(function(ce,fe){return V(ce,s,fe)}))))):Rt.createElement("span",{className:"rbc-agenda-empty"},X.noEventsInRange))}UP.range=function(e,t){var n=t.length,r=n===void 0?$P:n,s=t.localizer,c=s.add(e,r,"day");return{start:e,end:c}};UP.navigate=function(e,t,n){var r=n.length,s=r===void 0?$P:r,c=n.localizer;switch(t){case Ru.PREVIOUS:return c.add(e,-s,"day");case Ru.NEXT:return c.add(e,s,"day");default:return e}};UP.title=function(e,t){var n=t.length,r=n===void 0?$P:n,s=t.localizer,c=s.add(e,r,"day");return s.format({start:e,end:c},"agendaHeaderFormat")};var GA=y0(y0(y0(y0(y0({},Zc.MONTH,NP),Zc.WEEK,_v),Zc.WORK_WEEK,XE),Zc.DAY,VP),Zc.AGENDA,UP),Iqe=["action","date","today"];function kqe(e,t){var n=t.action,r=t.date,s=t.today,c=xm(t,Iqe);switch(e=typeof e=="string"?GA[e]:e,n){case Ru.TODAY:r=s||new Date;break;case Ru.DATE:break;default:$T(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),r=e.navigate(r,n,c)}return r}function Oqe(e,t){var n=null;return typeof t=="function"?n=t(e):typeof t=="string"&&ey(e)==="object"&&e!=null&&t in e&&(n=e[t]),n}var Fg=function(t){return function(n){return Oqe(n,t)}},Lqe=["view","date","getNow","onNavigate"],zqe=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function uoe(e){if(Array.isArray(e))return e;for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var s=q0(r[n],2),c=s[0],d=s[1];d&&t.push(c)}return t}function Fqe(e,t){var n=t.views,r=uoe(n);return r.indexOf(e)!==-1}var doe=function(e){function t(){var n;rl(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=Ec(this,t,[].concat(s)),n.getViews=function(){var d=n.props.views;return Array.isArray(d)?o8e(d,function(i,m){return i[m]=GA[m]},{}):ey(d)==="object"?A2e(d,function(i,m){return i===!0?GA[m]:i}):GA},n.getView=function(){var d=n.getViews();return d[n.props.view]},n.getDrilldownView=function(d){var i=n.props,m=i.view,x=i.drilldownView,T=i.getDrilldownView;return T?T(d,m,Object.keys(n.getViews())):x},n.handleRangeChange=function(d,i,m){var x=n.props,T=x.onRangeChange,C=x.localizer;T&&i.range&&T(i.range(d,{localizer:C}),m)},n.handleNavigate=function(d,i){var m=n.props,x=m.view,T=m.date,C=m.getNow,A=m.onNavigate,I=xm(m,Lqe),k=n.getView(),B=C();T=kqe(k,ys(ys({},I),{},{action:d,date:i||T||B,today:B})),A(T,x,d),n.handleRangeChange(T,k)},n.handleViewChange=function(d){d!==n.props.view&&Fqe(d,n.props)&&n.props.onView(d);var i=n.getViews();n.handleRangeChange(n.props.date||n.props.getNow(),i[d],d)},n.handleSelectEvent=function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onDoubleClickEvent,i)},n.handleKeyPressEvent=function(){for(var d=arguments.length,i=new Array(d),m=0;m<d;m++)i[m]=arguments[m];Is(n.props.onKeyPressEvent,i)},n.handleSelectSlot=function(d){Is(n.props.onSelectSlot,d)},n.handleDrillDown=function(d,i){var m=n.props.onDrillDown;if(m){m(d,i,n.drilldownView);return}i&&n.handleViewChange(i),n.handleNavigate(Ru.DATE,d)},n.state={context:t.getContext(n.props)},n}return Cc(t,e),il(t,[{key:"render",value:function(){var r=this.props,s=r.view,c=r.toolbar,d=r.events,i=r.backgroundEvents,m=r.resourceGroupingLayout,x=r.style,T=r.className,C=r.elementProps,A=r.date,I=r.getNow,k=r.length,B=r.showMultiDayTimes,j=r.onShowMore,V=r.doShowMoreDrillDown;r.components,r.formats,r.messages,r.culture;var H=xm(r,zqe);A=A||I();var G=this.getView(),X=this.state.context,Q=X.accessors,ee=X.components,ce=X.getters,fe=X.localizer,ue=X.viewNames,ae=ee.toolbar||N8e,xe=G.title(A,{localizer:fe,length:k});return Rt.createElement("div",Object.assign({},C,{className:ha(T,"rbc-calendar",H.rtl&&"rbc-rtl"),style:x}),c&&Rt.createElement(ae,{date:A,view:s,views:ue,label:xe,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:fe}),Rt.createElement(G,Object.assign({},H,{events:d,backgroundEvents:i,date:A,getNow:I,length:k,localizer:fe,getters:ce,components:ee,accessors:Q,showMultiDayTimes:B,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:j,doShowMoreDrillDown:V,resourceGroupingLayout:m})))}}],[{key:"getDerivedStateFromProps",value:function(r){return{context:t.getContext(r)}}},{key:"getContext",value:function(r){var s=r.startAccessor,c=r.endAccessor,d=r.allDayAccessor,i=r.tooltipAccessor,m=r.titleAccessor,x=r.resourceAccessor,T=r.resourceIdAccessor,C=r.resourceTitleAccessor,A=r.eventIdAccessor,I=r.eventPropGetter,k=r.backgroundEventPropGetter,B=r.slotPropGetter,j=r.slotGroupPropGetter,V=r.dayPropGetter,H=r.view,G=r.views,X=r.localizer,Q=r.culture,ee=r.messages,ce=ee===void 0?{}:ee,fe=r.components,ue=fe===void 0?{}:fe,ae=r.formats,xe=ae===void 0?{}:ae,we=uoe(G),Me=$8e(ce);return{viewNames:we,localizer:j8e(X,Q,xe,Me),getters:{eventProp:function(){return I&&I.apply(void 0,arguments)||{}},backgroundEventProp:function(){return k&&k.apply(void 0,arguments)||{}},slotProp:function(){return B&&B.apply(void 0,arguments)||{}},slotGroupProp:function(){return j&&j.apply(void 0,arguments)||{}},dayProp:function(){return V&&V.apply(void 0,arguments)||{}}},components:E2e(ue[H]||{},n8e(ue,we),{eventWrapper:Kp,backgroundEventWrapper:Kp,eventContainerWrapper:Kp,dateCellWrapper:Kp,weekWrapper:Kp,timeSlotWrapper:Kp,timeGutterWrapper:Kp,timeIndicatorWrapper:Kp}),accessors:{start:Fg(s),end:Fg(c),allDay:Fg(d),tooltip:Fg(i),title:Fg(m),resource:Fg(x),resourceId:Fg(T),resourceTitle:Fg(C),eventId:Fg(A)}}}}])}(Rt.Component);doe.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Zc.MONTH,views:[Zc.MONTH,Zc.WEEK,Zc.DAY,Zc.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Zc.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Bqe=aie(doe,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),jqe=function(t,n,r){var s=t.start,c=t.end;return"".concat(r.format(s,"P",n)," – ").concat(r.format(c,"P",n))},fF=function(t,n,r){var s=t.start,c=t.end;return"".concat(r.format(s,"p",n)," – ").concat(r.format(c,"p",n))},Nqe=function(t,n,r){var s=t.start;return"".concat(r.format(s,"h:mma",n)," – ")},Vqe=function(t,n,r){var s=t.end;return" – ".concat(r.format(s,"h:mma",n))},$qe=function(t,n,r){var s=t.start,c=t.end;return"".concat(r.format(s,"MMMM dd",n)," – ").concat(r.format(c,N1(s,c,"month")?"dd":"MMMM dd",n))},Uqe={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:fF,eventTimeRangeFormat:fF,eventTimeRangeStartFormat:Nqe,eventTimeRangeEndFormat:Vqe,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:$qe,agendaHeaderFormat:jqe,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:fF},qqe=function(t){var n=t.startOfWeek,r=t.getDay,s=t.format,c=t.locales;return new B8e({formats:Uqe,firstOfWeek:function(i){return r(n(new Date,{locale:c[i]}))},format:function(i,m,x){return s(new Date(i),m,{locale:c[x]})}})};const Hqe={"en-US":OE},Wqe=qqe({format:dne,startOfWeek:()=>ym(new Date,{weekStartsOn:1}),getDay:Sze,locales:Hqe});function Gqe({calendarEvents:e}){const t=Zo();return z.jsx(fa,{elevation:2,sx:{p:2,height:500,backgroundColor:t.palette.background.paper,borderRadius:2,border:`1px solid ${t.palette.divider}`},children:z.jsx(Pn,{sx:{height:"100%"},children:z.jsx(Bqe,{localizer:Wqe,events:e,startAccessor:"start",endAccessor:"end",style:{height:"100%"}})})})}const Yqe=Gi([z.jsx("circle",{cx:"12",cy:"19",r:"2"},"0"),z.jsx("path",{d:"M10 3h4v12h-4z"},"1")]),Xqe=Gi(z.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),Zqe=Gi(z.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}));function Kqe(e){const n=Math.floor((new Date-e)/1e3);if(n<60)return"just now";const r=Math.floor(n/60);if(r<60)return`${r} min ago`;const s=Math.floor(r/60);if(s<24)return`${s} hr ago`;const c=Math.floor(s/24);return c<7?`${c} day${c>1?"s":""} ago`:e.toLocaleString()}function Qqe({sampleIssue:e,placeholderImages:t}){const[n,r]=U.useState(""),[s,c]=U.useState([{id:1,author:"John Doe",text:"This issue needs immediate attention. Please prioritize.",timestamp:new Date("2024-01-15T10:30:00")},{id:2,author:"Jane Smith",text:"I've assigned this to the development team.",timestamp:new Date("2024-01-15T14:20:00")}]),d=()=>{if(n.trim()){const i={id:s.length+1,author:"Current User",text:n,timestamp:new Date};c([...s,i]),r("")}};return z.jsxs(fa,{sx:{flex:1,minWidth:280,maxWidth:320,p:2,display:"flex",flexDirection:"column",gap:.5,borderRadius:2,boxShadow:1,border:"1px solid #f0f0f0",maxHeight:"80vh",overflow:"auto"},children:[z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[z.jsx(En,{variant:"h3",fontWeight:600,children:"Log Details"}),z.jsxs(En,{variant:"caption",color:"text.secondary",sx:{ml:1},children:[e.createdAt.toLocaleDateString()," "]})]}),z.jsx(En,{variant:"caption",color:"text.secondary",sx:{mb:1},children:"Information about the selected issue"}),z.jsx(xc,{}),z.jsxs(Pn,{sx:{display:"flex",alignItems:"center"},children:[z.jsx(En,{variant:"h5",fontWeight:600,sx:{flex:1},children:e.title}),z.jsx(yd,{label:e.status,size:"small",sx:{bgcolor:e.status==="Open"?"#f44336":"#4caf50",color:"#fff",fontWeight:600,ml:.5,textTransform:"capitalize",fontSize:"0.7rem"}})]}),z.jsx(En,{variant:"caption",sx:{mb:1,lineHeight:1.3},children:e.description}),z.jsx(Ii,{container:!0,direction:"column",gap:1,children:z.jsxs(Ii,{container:!0,item:!0,spacing:2,justifyContent:"space-evenly",children:[z.jsxs(Ii,{item:!0,xs:6,children:[z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",mb:.5},children:[z.jsx(Yqe,{fontSize:"small",color:"error",sx:{mr:.5}}),z.jsx(En,{variant:"caption",fontWeight:500,color:e.priority==="High"?"error.main":"text.primary",children:e.priority})]}),z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",mb:.5},children:[z.jsx(Qre,{fontSize:"small",color:"action",sx:{mr:.5}}),z.jsx(En,{variant:"caption",fontWeight:500,children:e.category})]})]}),z.jsxs(Ii,{item:!0,xs:6,children:[z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",mb:.5},children:[z.jsx(V5,{fontSize:"small",color:"action",sx:{mr:.5}}),z.jsx(En,{variant:"caption",fontWeight:500,children:e.assignee})]}),z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",mb:1},children:[z.jsx(Xqe,{fontSize:"small",color:"action",sx:{mr:.5}}),z.jsx(En,{variant:"caption",fontWeight:500,children:e.dueDate||new Date().toLocaleDateString()})]})]})]})}),z.jsx(xc,{sx:{my:.5}}),z.jsx(En,{variant:"caption",fontWeight:600,children:"Photos"}),z.jsx(Pn,{sx:{display:"flex",flexDirection:"row",gap:1,overflowX:"auto"},children:t.map((i,m)=>z.jsx(Pn,{sx:{minWidth:60,height:40,bgcolor:"#f3f3f3",borderRadius:.5,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:z.jsx("img",{src:i,alt:`placeholder-${m}`,style:{objectFit:"cover",width:"100%",height:"100%"}})},m))}),z.jsx(xc,{sx:{mb:1}}),z.jsxs(En,{variant:"h5",fontWeight:600,sx:{mb:1},children:["Comments (",s.length,")"]}),z.jsx(Pn,{sx:{maxHeight:320,minHeight:220,overflow:"auto",mb:1},children:z.jsx(Rv,{dense:!0,sx:{p:0},children:s.map(i=>z.jsxs(YN,{disableGutters:!0,sx:{display:"flex",alignItems:"flex-start",mb:1,px:0,py:0,bgcolor:"transparent",minHeight:36},children:[z.jsx(pJ,{sx:{minWidth:32,mr:1,mt:.5},children:z.jsx(sx,{sx:{width:28,height:28,fontSize:"0.9rem",bgcolor:"primary.main",color:"#fff"},children:i.author.split(" ").map(m=>m[0]).join("")})}),z.jsxs(Pn,{sx:{bgcolor:"#f0f2f5",borderRadius:2,boxShadow:1,px:1.5,py:1,minWidth:0,flex:1,display:"flex",flexDirection:"column"},children:[z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",gap:1},children:[z.jsx(En,{variant:"subtitle2",fontWeight:700,sx:{fontSize:"0.85rem",color:"text.primary",mr:1},children:i.author}),z.jsx(En,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem",mt:"2px"},children:Kqe(i.timestamp)})]}),z.jsx(En,{variant:"body2",sx:{fontSize:"0.85rem",color:"text.primary",mt:.5,wordBreak:"break-word"},children:i.text})]})]},i.id))})}),z.jsxs(Pn,{sx:{display:"flex",gap:.5},children:[z.jsx(Vi,{size:"small",placeholder:"Add a comment...",value:n,onChange:i=>r(i.target.value),onKeyPress:i=>i.key==="Enter"&&d(),sx:{flex:1,"& .MuiInputBase-root":{fontSize:"0.7rem",height:32}}}),z.jsx(Wi,{size:"small",variant:"contained",onClick:d,disabled:!n.trim(),sx:{minWidth:32,height:32,px:1,"& .MuiButton-startIcon":{margin:0}},children:z.jsx(Zqe,{sx:{fontSize:"0.8rem"}})})]})]})}const Jqe=({open:e=!1,onClose:t,onSave:n})=>{const[r,s]=U.useState({date:new Date().toISOString().split("T")[0],title:"",description:"",priority:"",category:"",assignee:"",photos:[]}),c=["Issue","Task"],d=["John Smith","Sarah Johnson","Alex Lee","Priya Patel"],i=["Architecture","Structure","MEPF","Safety","Quality","Other"],m=["Low","Medium","High"],x=(A,I)=>{s(k=>({...k,[A]:I}))},T=A=>{s(I=>({...I,photos:Array.from(A.target.files)}))},C=()=>{n&&n(r)};return z.jsx(CE,{open:e,onClose:t,children:z.jsxs(Pn,{sx:{outline:"none",width:500,maxWidth:"90vw",bgcolor:"background.paper",borderRadius:2,boxShadow:24,mx:"auto",mt:"5%",p:3},children:[z.jsx(En,{variant:"h3",sx:{mb:2},children:"New Log"}),z.jsxs(Pn,{sx:{display:"flex",flexDirection:"column",gap:2},children:[z.jsx(Vi,{select:!0,label:"Type",value:r.assignee,onChange:A=>x("assignee",A.target.value),fullWidth:!0,size:"small",children:c.map(A=>z.jsx(ko,{value:A,children:A},A))}),z.jsx(Vi,{label:"Due Date",type:"date",value:r.date,onChange:A=>x("date",A.target.value),fullWidth:!0,size:"small"}),z.jsx(Vi,{label:"Title",value:r.title,onChange:A=>x("title",A.target.value),fullWidth:!0,size:"small"}),z.jsx(Vi,{label:"Description",value:r.description,onChange:A=>x("description",A.target.value),fullWidth:!0,size:"small",multiline:!0,minRows:2}),z.jsx(Vi,{select:!0,label:"Priority",value:r.priority,onChange:A=>x("priority",A.target.value),fullWidth:!0,size:"small",children:m.map(A=>z.jsx(ko,{value:A,children:A},A))}),z.jsx(Vi,{select:!0,label:"Category",value:r.category,onChange:A=>x("category",A.target.value),fullWidth:!0,size:"small",children:i.map(A=>z.jsx(ko,{value:A,children:A},A))}),z.jsx(Vi,{select:!0,label:"Assign To",value:r.assignee,onChange:A=>x("assignee",A.target.value),fullWidth:!0,size:"small",children:d.map(A=>z.jsx(ko,{value:A,children:A},A))}),z.jsxs(Wi,{variant:"outlined",component:"label",children:["Attach Photos",z.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:T})]}),r.photos.length>0&&z.jsx(Pn,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:r.photos.map((A,I)=>z.jsx(En,{variant:"caption",children:A.name},I))}),z.jsxs(Pn,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[z.jsx(Wi,{onClick:t,children:"Cancel"}),z.jsx(Wi,{variant:"contained",onClick:C,children:"Save Log"})]})]})]})})},eHe=[{label:"Map View",value:"map"},{label:"List View",value:"list"},{label:"Calendar View",value:"calendar"}],tHe=["/src/assets/images/landing_page_industry_capture/1.jpg","/src/assets/images/landing_page_industry_capture/2.jpg","/src/assets/images/landing_page_industry_capture/3.jpg"],nHe=[{user:"John Smith",avatar:"/src/assets/images/users/user-round.svg",text:"Inspected the issue.",date:"Jun 12, 10:30 AM"},{user:"Sarah Johnson",avatar:"/src/assets/images/users/user-round.svg",text:"Materials ordered.",date:"Jun 12, 2:15 PM"}],rHe={title:"Structural alignment issue",description:"Column alignment shows 2.5cm deviation.",priority:"High",category:"Structural",assignee:"John Smith",createdAt:new Date("2023-06-12T10:00:00"),status:"Open"},uX=[{id:1,issue:"Alignment issue",type:"Structural",assignedTo:"John Smith",priority:"High",createdAt:new Date(2023,5,12,10,0)},{id:2,issue:"Wiring incomplete",type:"Electrical",assignedTo:"Sarah Johnson",priority:"Medium",createdAt:new Date(2023,5,13,15,0)}];function iHe(){const[e,t]=U.useState("map"),[n,r]=U.useState(!1),[s,c]=U.useState(""),[d,i]=U.useState(nHe),m=()=>{s.trim()&&(i([...d,{user:"You",avatar:"/src/assets/images/users/user-round.svg",text:s,date:new Date().toLocaleString()}]),c(""))},x=U.useMemo(()=>uX.map(C=>({title:`${C.issue} (${C.assignedTo})`,start:C.createdAt,end:new Date(C.createdAt.getTime()+60*60*1e3)})),[]),T=[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",to:"/project/1/View",icon:ax},{title:"Coordination Logs",icon:Ate}];return z.jsxs(Ph,{children:[z.jsxs(Pn,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[z.jsx(Pn,{children:z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Coordination Logs"})}),z.jsx(Pn,{sx:{display:"flex",gap:1},children:z.jsx(Wi,{variant:"contained",onClick:()=>r(!0),children:"+ New Log"})})]}),z.jsx(ry,{links:T,card:!0,custom:!0,rightAlign:!1}),z.jsx(RJ,{value:e,onChange:(C,A)=>t(A),children:eHe.map(C=>z.jsx(TJ,{label:C.label,value:C.value},C.value))}),z.jsxs(Pn,{sx:{display:"flex",gap:2},children:[z.jsxs(Pn,{sx:{flex:2},children:[e==="map"&&z.jsx(y$e,{}),e==="list"&&z.jsx(_$e,{ticketList:uX}),e==="calendar"&&z.jsx(Gqe,{calendarEvents:x})]}),e==="map"&&z.jsx(Qqe,{sampleIssue:rHe,comments:d,comment:s,setComment:c,handleAddComment:m,placeholderImages:tHe})]}),z.jsx(Jqe,{open:n,onClose:()=>r(!1),onSave:C=>{console.log("Form submitted:",C),r(!1)}})]})}const oHe=Gi(z.jsx("path",{d:"M14.94 4.66h-4.72l2.36-2.36zm-4.69 14.71h4.66l-2.33 2.33zM6.1 6.27 1.6 17.73h1.84l.92-2.45h5.11l.92 2.45h1.84L7.74 6.27zm-1.13 7.37 1.94-5.18 1.94 5.18zm10.76 2.5h6.12v1.59h-8.53v-1.29l5.92-8.56h-5.88v-1.6h8.3v1.26z"})),sHe=Array.from({length:23},(e,t)=>({serial:t+1,date:new Date(2024,0,t+1).toLocaleDateString(),description:`Sample description ${t%2===0?"Alpha":"Beta"} #${t+1}`})),aHe=()=>{const e=Zo(),[t,n]=U.useState(0),[r,s]=U.useState(10),[c,d]=U.useState(""),[i,m]=U.useState(!0),x=(B,j)=>{n(j)},T=B=>{s(parseInt(B.target.value,10)),n(0)},C=B=>{alert(`Viewing serial no: ${B.serial}`)},I=[...sHe.filter(B=>B.description.toLowerCase().includes(c.toLowerCase()))].sort((B,j)=>B.description<j.description?i?-1:1:B.description>j.description?i?1:-1:0),k=I.slice(t*r,t*r+r);return z.jsxs(Ph,{children:[z.jsxs(Pn,{children:[z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Interior (360 View)"}),z.jsx(ry,{links:[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",to:"/project/1/View",icon:ax},{title:"Interior (360 View)",icon:Dte}],card:!0,custom:!0,rightAlign:!1})]}),z.jsxs(Pn,{sx:{display:"flex",alignItems:"center",pb:2,gap:2},children:[z.jsx(Vi,{label:"Search By Description",variant:"outlined",size:"small",value:c,onChange:B=>{d(B.target.value),n(0)}}),z.jsx(Kc,{onClick:()=>m(B=>!B),sx:{color:e.palette.primary.main},title:`Sort by description (${i?"A-Z":"Z-A"})`,children:z.jsx(oHe,{sx:{transform:i?"scaleY(1)":"scaleY(-1)"}})})]}),z.jsx(eP,{children:z.jsxs(KD,{size:"small",children:[z.jsx(tP,{children:z.jsxs(Mh,{sx:{bgcolor:e.palette.primary.light},children:[z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Serial No"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Date"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Description"}),z.jsx(Qr,{align:"center",sx:{color:e.palette.primary.contrastText},children:"Action"})]})}),z.jsxs(JD,{children:[k.map(B=>z.jsxs(Mh,{children:[z.jsx(Qr,{children:B.serial}),z.jsx(Qr,{children:B.date}),z.jsx(Qr,{children:B.description}),z.jsx(Qr,{align:"center",children:z.jsx(Wi,{variant:"outlined",size:"small",onClick:()=>C(B),color:"primary",children:"View"})})]},B.serial)),k.length===0&&z.jsx(Mh,{children:z.jsx(Qr,{colSpan:4,align:"center",sx:{color:e.palette.text.disabled},children:"No results found."})})]})]})}),z.jsx(xMe,{component:"div",count:I.length,page:t,onPageChange:x,rowsPerPage:r,onRowsPerPageChange:T,rowsPerPageOptions:[5,10,20],sx:{bgcolor:e.palette.background.default}})]})},lHe=Gi(z.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),cHe=()=>{const e=Zo(),{enqueueSnackbar:t}=k1(),[n,r]=U.useState([]),[s,c]=U.useState(""),[d,i]=U.useState("viewer"),[m,x]=U.useState(!0),[T,C]=U.useState(null),A=Pu(H=>H.project.selectedProjectId),I=Pu(H=>H.auth.token);U.useEffect(()=>{if(!A)return;(async()=>{var G,X,Q;x(!0);try{const ee=await Ps.get("/project-members",{params:{projectId:A},headers:{Authorization:I}});r(((G=ee.data.data)==null?void 0:G.results)||[])}catch(ee){C(((Q=(X=ee.response)==null?void 0:X.data)==null?void 0:Q.message)||ee.message)}finally{x(!1)}})()},[A,I]);const k=async()=>{var G,X,Q,ee;if(!s)return;let H=s.trim();c("");try{const ce=await Ps.post("/project-members",{projectId:A,email:H,role:d,status:"invited"},{headers:{Authorization:I}});r(fe=>[...fe,ce.data.data]),i("viewer"),t("Team member invited successfully!",{variant:"success"})}catch(ce){C(((X=(G=ce.response)==null?void 0:G.data)==null?void 0:X.message)||ce.message),t(((ee=(Q=ce.response)==null?void 0:Q.data)==null?void 0:ee.message)||ce.message||"Failed to invite member",{variant:"error"})}},B=async(H,G)=>{var X,Q,ee,ce;try{await Ps.patch(`/project-members/${H}`,{role:G},{headers:{Authorization:I}}),r(fe=>fe.map(ue=>ue._id===H||ue.id===H?{...ue,role:G}:ue)),t("Role updated successfully!",{variant:"success"})}catch(fe){C(((Q=(X=fe.response)==null?void 0:X.data)==null?void 0:Q.message)||fe.message),t(((ce=(ee=fe.response)==null?void 0:ee.data)==null?void 0:ce.message)||fe.message||"Failed to update role",{variant:"error"})}},j=async H=>{var G,X,Q,ee;try{await Ps.delete(`/project-members/${H}`,{headers:{Authorization:I}}),r(n.filter(ce=>ce._id!==H)),t("Team member removed successfully!",{variant:"success"})}catch(ce){C(((X=(G=ce.response)==null?void 0:G.data)==null?void 0:X.message)||ce.message),t(((ee=(Q=ce.response)==null?void 0:Q.data)==null?void 0:ee.message)||ce.message||"Failed to remove member",{variant:"error"})}},V=[{title:"Projects",to:"/project",icon:Pv},{title:"Project Name",to:"/project/1/View",icon:ax},{title:"Project Files",icon:Rte}];return z.jsxs(Ph,{children:[z.jsxs(Pn,{children:[z.jsx(En,{variant:"h1",gutterBottom:!0,children:"Project Team"}),z.jsx(ry,{links:V,card:!0,custom:!0,rightAlign:!1})]}),m?z.jsx(En,{variant:"body1",children:"Loading team members..."}):T?z.jsx(En,{color:"error",children:T}):z.jsxs(fa,{sx:{p:3,mx:"auto",mt:3,boxShadow:4},children:[z.jsxs(Pn,{sx:{display:"flex",gap:2,mb:3,alignItems:"center"},children:[z.jsx(Vi,{label:"Invite by Email",size:"small",value:s,onChange:H=>c(H.target.value),sx:{flex:1}}),z.jsxs(Vi,{select:!0,label:"Permission",size:"small",value:d,onChange:H=>i(H.target.value),sx:{flex:1,minWidth:120},children:[z.jsx(ko,{value:"editor",children:"editor"}),z.jsx(ko,{value:"viewer",children:"viewer"})]}),z.jsx(Wi,{variant:"contained",color:"primary",startIcon:z.jsx(lHe,{}),onClick:k,disabled:!s,children:"Invite"})]}),z.jsx(eP,{children:z.jsxs(KD,{size:"small",children:[z.jsx(tP,{children:z.jsxs(Mh,{sx:{bgcolor:e.palette.primary.light},children:[z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Email"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Name"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Organization"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Designation"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Permission"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Status"}),z.jsx(Qr,{align:"center",sx:{color:e.palette.primary.contrastText},children:"Action"})]})}),z.jsxs(JD,{children:[n.map(H=>{var G,X,Q,ee;return z.jsxs(Mh,{children:[z.jsx(Qr,{children:H.email}),z.jsx(Qr,{children:H.userId?H.userId.firstName+" "+H.userId.lastName:"Not Registered"}),z.jsx(Qr,{children:(G=H.userId)!=null&&G.organization?(X=H.userId)==null?void 0:X.organization:"Not Registered"}),z.jsx(Qr,{children:(Q=H.userId)!=null&&Q.designation?(ee=H.userId)==null?void 0:ee.designation:"Not Registered"}),z.jsx(Qr,{children:z.jsxs(nu,{size:"small",value:H.role,onChange:ce=>B(H._id,ce.target.value),sx:{minWidth:90},disabled:H.role==="owner",children:[z.jsx(ko,{value:"editor",children:"editor"}),z.jsx(ko,{value:"viewer",children:"viewer"}),H.role==="owner"?z.jsx(ko,{value:"owner",children:"owner"}):null]})}),z.jsx(Qr,{children:z.jsx(yd,{label:H.status,color:H.status==="active"?"success":"warning",size:"small"})}),z.jsx(Qr,{align:"center",children:z.jsx(Kc,{color:"error",onClick:()=>j(H._id),children:z.jsx(Nre,{})})})]},H.id)}),n.length===0&&z.jsx(Mh,{children:z.jsx(Qr,{colSpan:4,align:"center",sx:{color:e.palette.text.disabled},children:"No team members yet."})})]})]})})]})]})},uHe=()=>{const[e,t]=U.useState([]),[n,r]=U.useState(!0),[s,c]=U.useState(null),[d,i]=U.useState(1),[m]=U.useState(10),[x,T]=U.useState(0),[C,A]=U.useState(""),[I,k]=U.useState(""),[B,j]=U.useState({email:"",name:""}),[V,H]=U.useState("createdAt:desc"),[G,X]=U.useState(!1),{enqueueSnackbar:Q}=k1(),ee=Pu(ue=>ue.auth.token),ce=()=>{j({email:C,name:I}),i(1)};U.useEffect(()=>{(async()=>{var ae,xe,we,Me;console.log(ee,"<===== ow wow owo wowo"),r(!0);try{const Se={page:d,limit:m,email:B.email||void 0,firstName:B.name||void 0,sortBy:V||void 0},Ae=await Ps.get("/user",{params:Se,headers:{Authorization:ee}});t(((ae=Ae.data.data)==null?void 0:ae.results)||[]),T(((xe=Ae.data.data)==null?void 0:xe.totalResults)||0)}catch(Se){c(((Me=(we=Se.response)==null?void 0:we.data)==null?void 0:Me.message)||Se.message)}finally{r(!1)}})()},[ee,d,m,B,V,G]);const fe=async(ue,ae)=>{var xe,we;try{await Ps.patch(`/user/${ue}`,{status:ae},{headers:{Authorization:ee}}),X(Me=>!Me),Q(`User ${ae==="enabled"?"enabled":"disabled"} successfully!`,{variant:"success"})}catch(Me){Q(((we=(xe=Me.response)==null?void 0:xe.data)==null?void 0:we.message)||Me.message||"Failed to update user status",{variant:"error"})}};return z.jsxs(Ph,{children:[z.jsx(En,{variant:"h2",mb:2,children:"User Control Panel"}),z.jsxs(Pn,{mb:2,display:"flex",alignItems:"center",gap:2,children:[z.jsx(Vi,{label:"Search by Email",size:"small",value:C,onChange:ue=>A(ue.target.value)}),z.jsx(Vi,{label:"Search by Name",size:"small",value:I,onChange:ue=>k(ue.target.value)}),z.jsxs(tu,{size:"small",sx:{minWidth:150},children:[z.jsx(Xg,{children:"Sort By"}),z.jsxs(nu,{value:V,label:"Sort By",onChange:ue=>H(ue.target.value+":asc"),children:[z.jsx(ko,{value:"createdAt:desc",children:"None"}),z.jsx(ko,{value:"firstName:asc",children:"Name"}),z.jsx(ko,{value:"status:asc",children:"Status"})]})]}),z.jsx(Wi,{variant:"contained",color:"primary",onClick:ce,children:"Search"})]}),n?z.jsx(En,{children:"Loading users..."}):s?z.jsx(En,{color:"error",children:s}):z.jsxs(z.Fragment,{children:[z.jsx(eP,{children:z.jsxs(KD,{size:"small",children:[z.jsx(tP,{children:z.jsxs(Mh,{children:[z.jsx(Qr,{children:"Name"}),z.jsx(Qr,{children:"Email"}),z.jsx(Qr,{children:"Designation"}),z.jsx(Qr,{children:"Organization"}),z.jsx(Qr,{children:"Gender"}),z.jsx(Qr,{children:"Role"}),z.jsx(Qr,{children:"Type"}),z.jsx(Qr,{children:"Status"}),z.jsx(Qr,{children:"Action"})]})}),z.jsxs(JD,{children:[e.map(ue=>z.jsxs(Mh,{children:[z.jsxs(Qr,{children:[ue==null?void 0:ue.firstName," ",ue==null?void 0:ue.lastName]}),z.jsx(Qr,{children:ue==null?void 0:ue.email}),z.jsx(Qr,{children:ue==null?void 0:ue.designation}),z.jsx(Qr,{children:ue==null?void 0:ue.organization}),z.jsx(Qr,{children:ue==null?void 0:ue.gender}),z.jsx(Qr,{children:ue==null?void 0:ue.role}),z.jsx(Qr,{children:ue==null?void 0:ue.type}),z.jsx(Qr,{children:z.jsx(yd,{label:ue.status,color:ue.status==="enabled"?"success":"warning",size:"small"})}),z.jsx(Qr,{children:z.jsx(Wi,{variant:"contained",color:ue.status==="enabled"?"error":"success",size:"small",onClick:()=>fe(ue.id,ue.status!=="enabled"?"enabled":"disabled"),children:ue.status==="enabled"?"Disable":"Enable"})})]},ue.id)),e.length===0&&z.jsx(Mh,{children:z.jsx(Qr,{colSpan:8,align:"center",children:"No users found."})})]})]})}),z.jsx(KN,{count:Math.ceil(x/m),page:d,onChange:(ue,ae)=>i(ae),color:"primary",sx:{mt:2,display:"flex",justifyContent:"center"}})]})]})},dHe=Gi(z.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),hHe=Gi(z.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),fHe=[{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],pHe=[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],mHe=()=>{const e=Zo(),{enqueueSnackbar:t}=k1(),[n,r]=U.useState([]),[s,c]=U.useState(!0),[d,i]=U.useState(null),[m,x]=U.useState(1),[T]=U.useState(10),[C,A]=U.useState(0),[I,k]=U.useState(""),[B,j]=U.useState("createdAt:desc"),[V,H]=U.useState(""),G=Pu(ot=>ot.auth.token),[X,Q]=U.useState({}),ee=U.useRef(null),[ce,fe]=U.useState({type:"",workDay:null}),[ue,ae]=U.useState({}),[xe,we]=U.useState({}),[Me,Se]=U.useState({open:!1,workDayId:null}),[Ae,_e]=U.useState(!1);U.useEffect(()=>{(async()=>{var st,St,Dt,Et,yt,Lt;c(!0),i(null);try{const Ct={page:m,limit:T,sortBy:B};V&&(Ct.name=V);const Wt=await Ps.get("/work-day",{params:Ct,headers:{Authorization:G}});r(((st=Wt.data.data)==null?void 0:st.results)||[]),A(((St=Wt.data.data)==null?void 0:St.totalResults)||0)}catch(Ct){console.log(Ct,"<===== error fetching workdays"),i(((Et=(Dt=Ct.response)==null?void 0:Dt.data)==null?void 0:Et.message)||Ct.message),t(((Lt=(yt=Ct.response)==null?void 0:yt.data)==null?void 0:Lt.message)||Ct.message||"Failed to fetch work days",{variant:"error"})}finally{c(!1)}})()},[G,m,T,B,V,t]);const Pe=ot=>ot?ot.url?ot.url:ot.Location?ot.Location:null:null,We=async ot=>{var St,Dt,Et;const st=ot.rawFile;if(!st){t("No file found to download",{variant:"warning"});return}try{const Lt=(St=(await Ps.get(`/work-day/get-download-url/${st}`,{headers:{Authorization:G}})).data)==null?void 0:St.data;Lt?(window.open(Lt,"_blank"),t("Download started",{variant:"success"})):t("No download link available.",{variant:"warning"})}catch(yt){t(((Et=(Dt=yt.response)==null?void 0:Dt.data)==null?void 0:Et.message)||yt.message||"Download failed",{variant:"error"})}},Fe=async(ot,st)=>{var St,Dt;Q(Et=>({...Et,[ot._id||ot.id]:!0}));try{await Ps.patch(`/work-day/${ot._id||ot.id}`,{status:st},{headers:{Authorization:G}}),r(Et=>Et.map(yt=>(yt._id||yt.id)===(ot._id||ot.id)?{...yt,status:st}:yt)),t("Status updated!",{variant:"success"})}catch(Et){t(((Dt=(St=Et.response)==null?void 0:St.data)==null?void 0:Dt.message)||Et.message||"Failed to update status",{variant:"error"})}finally{Q(Et=>({...Et,[ot._id||ot.id]:!1}))}},Ce=()=>{x(1),H(I)},He=(ot,st)=>{fe({workDay:ot,type:st}),ee.current&&ee.current.click()},dt=async ot=>{var Lt,Ct,Wt,fn;const st=(Lt=ot.target.files)==null?void 0:Lt[0];if(!st||!ce.type||!ce.workDay)return;const{type:St,workDay:Dt}=ce,Et=st.name.split(".").pop().toLowerCase(),yt=`${Dt.id||Dt._id}_${St}`;if(St==="tiff"&&Et!=="tiff"&&Et!=="tiff"){t(`Only .${St.toUpperCase()} files are allowed`,{variant:"error"});return}we(Zt=>({...Zt,[yt]:!0})),ae(Zt=>({...Zt,[yt]:0}));try{const kn=(await Ps.post("/work-day/upload-resultFile",{workDayId:Dt.id||Dt._id,type:St,filename:st.name,contentType:st.type,size:st.size},{headers:{Authorization:G}})).data.data;if(St==="kml"||St==="jpg"&&st.size<=52428800)await Ps.put(kn.url,st,{headers:{"Content-Type":st.type},onUploadProgress:Bn=>{const bn=Math.round(Bn.loaded*100/Bn.total);ae(Nn=>({...Nn,[yt]:bn}))}}),t(`${St.toUpperCase()} uploaded successfully`,{variant:"success"});else if(St==="jpg"&&st.size>52428800){console.log(St,st.size,"<==="),console.log(kn,"<==== wow owowowo");const{parts:Bn,uploadId:bn,key:Nn,partSize:ft}=kn,vn=[];let Ot=0;for(;Ot<st.size;){const Rn=Math.min(Ot+ft,st.size);vn.push(st.slice(Ot,Rn)),Ot=Rn}const tn=[];for(let Rn=0;Rn<Bn.length;Rn++){const mr=(Ct=(await fetch(Bn[Rn].url,{method:"PUT",body:vn[Rn]})).headers.get("ETag"))==null?void 0:Ct.replace(/"/g,"");tn.push({PartNumber:Bn[Rn].partNumber,ETag:mr});const Xn=Math.round((Rn+1)/Bn.length*100);ae(or=>({...or,[yt]:Xn}))}await Ps.post("/work-day/complete-upload",{workDayId:Dt.id||Dt._id,type:St,key:Nn,uploadId:bn,parts:tn},{headers:{Authorization:G}}),t("JPG uploaded successfully (multipart)",{variant:"success"})}}catch(Zt){t(((fn=(Wt=Zt.response)==null?void 0:Wt.data)==null?void 0:fn.message)||Zt.message||"Upload failed",{variant:"error"})}finally{we(Zt=>({...Zt,[yt]:!1})),setTimeout(()=>{ae(Zt=>({...Zt,[yt]:0}))},2e3),ee.current&&(ee.current.value=""),fe({type:"",workDay:null})}},gt=ot=>{const st=n.find(Dt=>(Dt._id||Dt.id)===ot);if(!st){t("Work day not found",{variant:"error"});return}if(!(st.tiffFile&&st.tiffFile.trim()!=="")){t("Please upload .tiff first before generating tiles.",{variant:"warning"});return}Se({open:!0,workDayId:ot})},Nt=async()=>{var st,St,Dt;const{workDayId:ot}=Me;_e(!0);try{(st=(await Ps.get(`/work-day/generate-tiles/${ot}`,{headers:{Authorization:G}})).data)!=null&&st.success?(t("Tile generation started successfully! This process will take at least 10 minutes to complete.",{variant:"success"}),Se({open:!1,workDayId:null})):t("Failed to start tile generation",{variant:"error"})}catch(Et){t(((Dt=(St=Et.response)==null?void 0:St.data)==null?void 0:Dt.message)||Et.message||"Failed to generate tiles",{variant:"error"})}finally{_e(!1)}},wt=()=>{Se({open:!1,workDayId:null})};return z.jsxs(Ph,{children:[z.jsx(Pn,{children:z.jsx(En,{variant:"h2",mb:2,gutterBottom:!0,children:"Historical Work Days"})}),z.jsxs(Ns,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,alignItems:"center",children:[z.jsx(Vi,{label:"Search by Project",size:"small",value:I,onChange:ot=>k(ot.target.value),onKeyDown:ot=>{ot.key==="Enter"&&Ce()}}),z.jsx(Wi,{variant:"contained",onClick:Ce,sx:{minWidth:100},children:"Search"}),z.jsxs(tu,{size:"small",sx:{minWidth:150},children:[z.jsx(Xg,{children:"Sort By"}),z.jsx(nu,{value:B,label:"Sort By",onChange:ot=>{j(ot.target.value),x(1)},children:pHe.map(ot=>z.jsx(ko,{value:ot.value,children:ot.label},ot.value))})]})]}),s?z.jsx(En,{variant:"body1",children:"Loading work days..."}):d?z.jsx(En,{color:"error",children:d}):z.jsx(z.Fragment,{children:z.jsxs(fa,{sx:{p:3,mx:"auto",mt:3},children:[z.jsx(eP,{children:z.jsxs(KD,{size:"small",children:[z.jsx(tP,{children:z.jsxs(Mh,{sx:{bgcolor:e.palette.primary.light},children:[z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Time Stamp"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Historical Date"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Project Name"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Project"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Owner"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Status"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Tiff"}),z.jsx(Qr,{sx:{color:e.palette.primary.contrastText},children:"Action"})]})}),z.jsx(JD,{children:n.length===0?z.jsx(Mh,{children:z.jsx(Qr,{colSpan:7,align:"center",children:"No work days found."})}):n.map(ot=>{var Lt;const st=(Lt=ot.resultFiles)==null?void 0:Lt[0],St=!!Pe(st),Dt=ot._id||ot.id,Et=ot.projectId||{},yt=Et.owner||{};return z.jsxs(Mh,{children:[z.jsx(Qr,{children:ot.createdAt?zA(ot.createdAt).format("DD/MM/YYYY"):ot.name}),z.jsx(Qr,{children:zA(ot.name,"YYYY-MM-DD",!0).isValid()?zA(ot.name).format("DD/MM/YYYY"):ot.name||"-"}),z.jsx(Qr,{children:Et.name||"-"}),z.jsx(Qr,{children:Et.location||"-"}),z.jsx(Qr,{children:yt.firstName||yt.lastName?`${yt.firstName||""} ${yt.lastName||""}`.trim():yt.email||"-"}),z.jsx(Qr,{children:z.jsx(tu,{size:"small",sx:{minWidth:120},children:z.jsx(nu,{value:ot.status||"",onChange:Ct=>Fe(ot,Ct.target.value),disabled:X[Dt],children:fHe.map(Ct=>z.jsx(ko,{value:Ct.value,children:Ct.label},Ct.value))})})}),z.jsx(Qr,{children:ot.tiffFile?ot.tiffFile.split("-")[5]:"-"}),z.jsx(Qr,{children:z.jsxs(Ns,{spacing:1,sx:{minWidth:200},children:[z.jsx(Wi,{variant:"outlined",color:"primary",size:"small",startIcon:z.jsx(dHe,{}),onClick:()=>We(ot),disabled:!St&&!ot.rawFile,fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Download"}),z.jsxs(Pn,{children:[z.jsx(Wi,{variant:"outlined",color:"primary",size:"small",startIcon:z.jsx(hHe,{}),onClick:()=>He(ot,"jpg"),disabled:xe[`${Dt}_jpg`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload Tiff"}),xe[`${Dt}_jpg`]&&z.jsxs(Pn,{sx:{mt:.5},children:[z.jsxs(En,{variant:"caption",color:"text.secondary",children:["Uploading..."," ",ue[`${Dt}_jpg`]||0,"%"]}),z.jsx(Pn,{sx:{width:"100%",mt:.5},children:z.jsx(Pn,{sx:{height:3,bgcolor:"grey.200",borderRadius:1.5,overflow:"hidden"},children:z.jsx(Pn,{sx:{width:`${ue[`${Dt}_jpg`]||0}%`,height:"100%",bgcolor:"secondary.main",transition:"width 0.3s ease"}})})})]})]}),z.jsx(Wi,{variant:"outlined",color:"primary",size:"small",startIcon:z.jsx(lO,{}),onClick:()=>gt(Dt),disabled:xe[`${Dt}_jpg`]||xe[`${Dt}_kml`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Generate Tiles"})]})})]},Dt)})})]})}),z.jsx(Pn,{display:"flex",justifyContent:"center",mt:2,children:z.jsx(KN,{count:Math.ceil(C/T),page:m,onChange:(ot,st)=>x(st),color:"primary"})})]})}),z.jsx("input",{type:"file",ref:ee,style:{display:"none"},onChange:dt}),z.jsxs(SR,{open:Me.open,onClose:Ae?void 0:wt,"aria-labelledby":"generate-tiles-dialog-title","aria-describedby":"generate-tiles-dialog-description",PaperProps:{sx:{borderRadius:2,minWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[z.jsx(xB,{id:"generate-tiles-dialog-title",sx:{bgcolor:"primary.light",color:"warning.contrastText",fontWeight:600,fontSize:"1.1rem"},children:"⚠️ Confirmation"}),z.jsx(ER,{sx:{pt:3,pb:2},children:Ae?z.jsxs(Pn,{sx:{textAlign:"center",py:4},children:[z.jsx(Pn,{sx:{width:64,height:64,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:z.jsx(lO,{sx:{color:"primary.light",fontSize:32}})}),z.jsx(En,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Generating Tiles..."}),z.jsx(En,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6,mb:3},children:"Please wait while we process your request. This may take several minutes."}),z.jsx(Pn,{sx:{width:"100%",maxWidth:300,mx:"auto"},children:z.jsx(pN,{})})]}):z.jsxs(Pn,{sx:{display:"flex",alignItems:"flex-start",gap:2,mt:2},children:[z.jsx(Pn,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,mt:.5},children:z.jsx(lO,{sx:{color:"primary.light",fontSize:24}})}),z.jsxs(Pn,{children:[z.jsx(En,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Time-Intensive Operation"}),z.jsxs(En,{variant:"body1",id:"generate-tiles-dialog-description",sx:{color:"text.secondary",lineHeight:1.6},children:["This tile generation process will take at least"," ",z.jsx("strong",{children:"10 minutes"})," to complete. The system will process your data in the background."]})]})]})}),z.jsxs(TR,{sx:{p:3,pt:1,gap:1},children:[z.jsx(Wi,{onClick:wt,variant:"outlined",disabled:Ae,sx:{color:"error.main",borderColor:"error.main",fontWeight:500,px:3,py:1,"&:hover":{bgcolor:"error.50",borderColor:"error.dark"},"&:disabled":{color:"grey.400",borderColor:"grey.300"}},children:"Cancel"}),z.jsx(Wi,{onClick:Nt,variant:"contained",disabled:Ae,sx:{bgcolor:"primary.main",color:"white",fontWeight:500,px:3,py:1,"&:hover":{bgcolor:"secondary.light",color:"black"},"&:focus":{bgcolor:"primary.main"},"&:disabled":{bgcolor:"grey.300",color:"grey.500"}},children:Ae?"Processing...":"Proceed"})]})]})]})},gHe=fE(U.lazy(()=>oE(()=>import("./index-yn0ue4vK.js"),[]))),yHe={path:"/",element:z.jsx(sLe,{}),children:[{path:"/dashboard",element:z.jsx(Eb,{element:gHe})},{path:"createProject",element:z.jsx(Eb,{element:b4e})},{path:"/project",element:z.jsx(Eb,{element:UH})},{path:"/project/:id/viewer",element:z.jsx(Eb,{element:UH})},{path:"/project/:id/compare",element:z.jsx(Eb,{element:f$e})},{path:"/project/:projectID/issue",element:z.jsx(iHe,{})},{path:"/project/:projectID/dpr",element:z.jsx(g$e,{})},{path:"/project/:projectID",element:z.jsx(HVe,{})},{path:"/project/:projectID/files",element:z.jsx(Vre,{})},{path:"/project/:projectID/360view",element:z.jsx(aHe,{})},{path:"/project/:projectID/team",element:z.jsx(cHe,{})},{path:"/user-control-panel",element:z.jsx(uHe,{})},{path:"/work-days",element:z.jsx(Eb,{element:mHe})},{path:"/project/:projectID/:projectWorkDayID",element:z.jsx(c$e,{})}]},DS="/assets/1-D1AFDyGj.png",vHe=[{prefix:" Trusted by Industry Leaders.",word:"",suffix:"",logos:[DS,DS,DS,DS,DS]}],_He=()=>{const[e,t]=U.useState(0),[n,r]=U.useState(!0),{prefix:s,word:c,suffix:d,logos:i}=vHe[e];return z.jsxs("div",{className:"company-group",children:[z.jsxs("h2",{className:"company-group__heading",children:[s,z.jsx("span",{className:`highlight animated-word ${n?"in":"out"}`,children:c}),d]}),z.jsx("div",{className:"company-group__logos",children:i.map((m,x)=>z.jsx("img",{src:m,alt:`Logo ${x+1}`,className:"company-group__logo",style:{animationDelay:`${x*.05}s`}},x))})]})},hoe="/assets/hero-KKkz536v.mp4",xHe=()=>{const[e,t]=U.useState({opacity:1,transform:"scale(1)"});return U.useEffect(()=>{const n=()=>{const r=window.scrollY,s=300,c=Math.max(1-r/s,0),d=Math.max(1-r/(s*2),.85);t({opacity:c,transform:`scale(${d})`})};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),z.jsxs("section",{className:"hero",children:[z.jsxs("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0},children:[z.jsx("source",{src:hoe,type:"video/mp4"}),"Your browser does not support the video tag."]}),z.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:0}}),z.jsx("div",{className:"hero__overlay",children:z.jsxs("div",{className:"hero__left",style:{...e},children:[z.jsx("h1",{className:"hero__title",children:"Every corner of your site always in sight"}),z.jsx("h2",{className:"hero__running",children:"See Everything. Control What Matters."}),z.jsx("p",{className:"hero__description",children:"InfraX transforms how you manage your sites—combining real-time progress tracking, quality control, and safety oversight in one place."})]})})]})},bHe="/assets/1-Dno5NRNN.jpg",wHe="/assets/2-J640JdC3.jpg",SHe="/assets/3-DvkoTwvw.jpg",dX="/assets/4-CWXh9BDz.jpg",THe=[{id:1,text:"Construction & Infrastructure ",image:bHe},{id:2,text:"Energy, Utilities & Industrial ",image:wHe},{id:3,text:"Heritage & Conservation",image:SHe},{id:4,text:"Agriculture & Forest",image:dX},{id:5,text:"Surveying & land development",image:dX}],EHe=()=>z.jsx("div",{className:"feature-section",children:z.jsxs("div",{className:"content",children:[z.jsx("h2",{className:"section-heading",children:"Explore the Industries embracing the innovation."}),z.jsx("div",{className:"boxes",children:THe.map(({id:e,text:t,image:n})=>z.jsx("div",{className:"box",style:{backgroundImage:`url(${n})`},children:z.jsx("span",{className:"box-text",children:t})},e))})]})}),cT="generated",CHe="pointerdown",MHe="pointerup",Pj="pointerleave",AHe="pointerout",K0="pointermove",RHe="touchstart",hX="touchend",DHe="touchmove",PHe="touchcancel",IHe="resize",kHe="visibilitychange",zh="tsParticles - Error";class dd{constructor(t,n,r){if(this._updateFromAngle=(s,c)=>{this.x=Math.cos(s)*c,this.y=Math.sin(s)*c},!Wf(t)&&t){this.x=t.x,this.y=t.y;const s=t;this.z=s.z?s.z:0}else if(t!==void 0&&n!==void 0)this.x=t,this.y=n,this.z=r??0;else throw new Error(`${zh} Vector3d not initialized correctly`)}static get origin(){return dd.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return dd.create(t.x,t.y,t.z)}static create(t,n,r){return new dd(t,n,r)}add(t){return dd.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return dd.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return dd.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**2+this.y**2}mult(t){return dd.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(1/t)}rotate(t){return dd.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),0)}setTo(t){this.x=t.x,this.y=t.y;const n=t;this.z=n.z?n.z:0}sub(t){return dd.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class Cl extends dd{constructor(t,n){super(t,n,0)}static get origin(){return Cl.create(0,0)}static clone(t){return Cl.create(t.x,t.y)}static create(t,n){return new Cl(t,n)}}let OHe=Math.random;const Ij=new Map;function pF(e,t){Ij.get(e)||Ij.set(e,t)}function foe(e){return Ij.get(e)||(t=>t)}function ks(){return ep(OHe(),0,1-1e-16)}function ep(e,t,n){return Math.min(Math.max(e,t),n)}function mF(e,t,n,r){return Math.floor((e*n+t*r)/(n+r))}function Tu(e){const t=cv(e);let n=Y4(e);return t===n&&(n=0),ks()*(t-n)+n}function wi(e){return Wf(e)?e:Tu(e)}function Y4(e){return Wf(e)?e:e.min}function cv(e){return Wf(e)?e:e.max}function co(e,t){if(e===t||t===void 0&&Wf(e))return e;const n=Y4(e),r=cv(e);return t!==void 0?{min:Math.min(n,t),max:Math.max(r,t)}:co(n,r)}function Q0(e){const t=e.random,{enable:n,minimumValue:r}=uv(t)?{enable:t,minimumValue:0}:t;return wi(n?co(e.value,r):e.value)}function eu(e,t){const n=e.x-t.x,r=e.y-t.y;return{dx:n,dy:r,distance:Math.sqrt(n**2+r**2)}}function vd(e,t){return eu(e,t).distance}function LHe(e,t,n){if(Wf(e))return e*Math.PI/180;switch(e){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-t.y,n.x-t.x);case"outside":return Math.atan2(t.y-n.y,t.x-n.x);default:return ks()*Math.PI*2}}function zHe(e){const t=Cl.origin;return t.length=1,t.angle=e,t}function fX(e,t,n,r){return Cl.create(e.x*(n-r)/(n+r)+t.x*2*r/(n+r),e.y)}function FHe(e){var t,n;return{x:((t=e.position)==null?void 0:t.x)??ks()*e.size.width,y:((n=e.position)==null?void 0:n.y)??ks()*e.size.height}}function poe(e){return e?e.endsWith("%")?parseFloat(e)/100:parseFloat(e):1}const BHe={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function J0(){return BHe}function pX(e){const t={bounced:!1},{pSide:n,pOtherSide:r,rectSide:s,rectOtherSide:c,velocity:d,factor:i}=e;return r.min<c.min||r.min>c.max||r.max<c.min||r.max>c.max||(n.max>=s.min&&n.max<=(s.max+s.min)/2&&d>0||n.min<=s.max&&n.min>(s.max+s.min)/2&&d<0)&&(t.velocity=d*-i,t.bounced=!0),t}function jHe(e,t){const n=Ml(t,r=>e.matches(r));return _d(n)?n.some(r=>r):n}function S1(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function NHe(){return!S1()&&typeof matchMedia<"u"}function moe(e){if(NHe())return matchMedia(e)}function VHe(e){if(!(S1()||typeof MutationObserver>"u"))return new MutationObserver(e)}function Ea(e,t){return e===t||_d(t)&&t.indexOf(e)>-1}async function $He(e,t){try{await document.fonts.load(`${t??"400"} 36px '${e??"Verdana"}'`)}catch{}}function UHe(e){return Math.floor(ks()*e.length)}function qP(e,t,n=!0){return e[t!==void 0&&n?t%e.length:UHe(e)]}function X4(e,t,n,r,s){return qHe(ZE(e,r??0),t,n,s)}function qHe(e,t,n,r){let s=!0;return(!r||r==="bottom")&&(s=e.top<t.height+n.x),s&&(!r||r==="left")&&(s=e.right>n.x),s&&(!r||r==="right")&&(s=e.left<t.width+n.y),s&&(!r||r==="top")&&(s=e.bottom>n.y),s}function ZE(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function wc(e,...t){for(const n of t){if(n==null)continue;if(!Yb(n)){e=n;continue}const r=Array.isArray(n);r&&(Yb(e)||!e||!Array.isArray(e))?e=[]:!r&&(Yb(e)||!e||Array.isArray(e))&&(e={});for(const s in n){if(s==="__proto__")continue;const c=n,d=c[s],i=e;i[s]=Yb(d)&&Array.isArray(d)?d.map(m=>wc(i[s],m)):wc(i[s],d)}}return e}function Z4(e,t){return!!voe(t,n=>n.enable&&Ea(e,n.mode))}function K4(e,t,n){Ml(t,r=>{const s=r.mode;r.enable&&Ea(e,s)&&HHe(r,n)})}function HHe(e,t){const n=e.selectors;Ml(n,r=>{t(r,e)})}function goe(e,t){if(!(!t||!e))return voe(e,n=>jHe(t,n.selectors))}function kj(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:Cl.create(Q0(e.options.bounce.horizontal),Q0(e.options.bounce.vertical))}}function yoe(e,t){const{x:n,y:r}=e.velocity.sub(t.velocity),[s,c]=[e.position,t.position],{dx:d,dy:i}=eu(c,s);if(n*d+r*i<0)return;const m=-Math.atan2(i,d),x=e.mass,T=t.mass,C=e.velocity.rotate(m),A=t.velocity.rotate(m),I=fX(C,A,x,T),k=fX(A,C,x,T),B=I.rotate(-m),j=k.rotate(-m);e.velocity.x=B.x*e.factor.x,e.velocity.y=B.y*e.factor.y,t.velocity.x=j.x*t.factor.x,t.velocity.y=j.y*t.factor.y}function WHe(e,t){const n=e.getPosition(),r=e.getRadius(),s=ZE(n,r),c=pX({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:Q0(e.options.bounce.horizontal)});c.bounced&&(c.velocity!==void 0&&(e.velocity.x=c.velocity),c.position!==void 0&&(e.position.x=c.position));const d=pX({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:Q0(e.options.bounce.vertical)});d.bounced&&(d.velocity!==void 0&&(e.velocity.y=d.velocity),d.position!==void 0&&(e.position.y=d.position))}function Ml(e,t){return _d(e)?e.map((n,r)=>t(n,r)):t(e,0)}function Hg(e,t,n){return _d(e)?qP(e,t,n):e}function voe(e,t){return _d(e)?e.find((n,r)=>t(n,r)):t(e,0)?e:void 0}function _oe(e,t){const n=e.value,r=e.animation,s={delayTime:wi(r.delay)*1e3,enable:r.enable,value:wi(e.value)*t,max:cv(n)*t,min:Y4(n)*t,loops:0,maxLoops:wi(r.count),time:0};if(r.enable){switch(s.decay=1-wi(r.decay),r.mode){case"increase":s.status="increasing";break;case"decrease":s.status="decreasing";break;case"random":s.status=ks()>=.5?"increasing":"decreasing";break}const c=r.mode==="auto";switch(r.startValue){case"min":s.value=s.min,c&&(s.status="increasing");break;case"max":s.value=s.max,c&&(s.status="decreasing");break;case"random":default:s.value=Tu(s),c&&(s.status=ks()>=.5?"increasing":"decreasing");break}}return s.initialValue=s.value,s}function GHe(e,t){if(!(e.mode==="percent")){const{mode:s,...c}=e;return c}return"x"in e?{x:e.x/100*t.width,y:e.y/100*t.height}:{width:e.width/100*t.width,height:e.height/100*t.height}}function xoe(e,t){return GHe(e,t)}function uv(e){return typeof e=="boolean"}function Hf(e){return typeof e=="string"}function Wf(e){return typeof e=="number"}function boe(e){return typeof e=="function"}function Yb(e){return typeof e=="object"&&e!==null}function _d(e){return Array.isArray(e)}const JR="random",YA="mid",HP=new Map;function mX(e){HP.set(e.key,e)}function gF(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function YHe(e){for(const[,c]of HP)if(e.startsWith(c.stringPrefix))return c.parseString(e);const t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,n=e.replace(t,(c,d,i,m,x)=>d+d+i+i+m+m+(x!==void 0?x+x:"")),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=r.exec(n);return s?{a:s[4]!==void 0?parseInt(s[4],16)/255:1,b:parseInt(s[3],16),g:parseInt(s[2],16),r:parseInt(s[1],16)}:void 0}function Gf(e,t,n=!0){if(!e)return;const r=Hf(e)?{value:e}:e;if(Hf(r.value))return woe(r.value,t,n);if(_d(r.value))return Gf({value:qP(r.value,t,n)});for(const[,s]of HP){const c=s.handleRangeColor(r);if(c)return c}}function woe(e,t,n=!0){if(!e)return;const r=Hf(e)?{value:e}:e;if(Hf(r.value))return r.value===JR?Toe():XHe(r.value);if(_d(r.value))return woe({value:qP(r.value,t,n)});for(const[,s]of HP){const c=s.handleColor(r);if(c)return c}}function eE(e,t,n=!0){const r=Gf(e,t,n);return r?Soe(r):void 0}function Soe(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),c=Math.min(t,n,r),d={h:0,l:(s+c)/2,s:0};return s!==c&&(d.s=d.l<.5?(s-c)/(s+c):(s-c)/(2-s-c),d.h=t===s?(n-r)/(s-c):d.h=n===s?2+(r-t)/(s-c):4+(t-n)/(s-c)),d.l*=100,d.s*=100,d.h*=60,d.h<0&&(d.h+=360),d.h>=360&&(d.h-=360),d}function XHe(e){return YHe(e)}function T1(e){const t={b:0,g:0,r:0},n={h:e.h/360,l:e.l/100,s:e.s/100};if(!n.s)t.r=t.g=t.b=n.l;else{const r=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,s=2*n.l-r;t.r=gF(s,r,n.h+1/3),t.g=gF(s,r,n.h),t.b=gF(s,r,n.h-1/3)}return t.r=Math.floor(t.r*255),t.g=Math.floor(t.g*255),t.b=Math.floor(t.b*255),t}function ZHe(e){const t=T1(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}function Toe(e){return{b:Math.floor(Tu(co(0,256))),g:Math.floor(Tu(co(0,256))),r:Math.floor(Tu(co(0,256)))}}function Wg(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t??1})`}function tE(e,t){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${t??1})`}function Q4(e,t,n,r){let s=e,c=t;return s.r===void 0&&(s=T1(e)),c.r===void 0&&(c=T1(t)),{b:mF(s.b,c.b,n,r),g:mF(s.g,c.g,n,r),r:mF(s.r,c.r,n,r)}}function Oj(e,t,n){if(n===JR)return Toe();if(n===YA){const r=e.getFillColor()??e.getStrokeColor(),s=(t==null?void 0:t.getFillColor())??(t==null?void 0:t.getStrokeColor());if(r&&s&&t)return Q4(r,s,e.getRadius(),t.getRadius());{const c=r??s;if(c)return T1(c)}}else return n}function Eoe(e,t,n){const r=Hf(e)?e:e.value;return r===JR?n?Gf({value:r}):t?JR:YA:r===YA?YA:Gf({value:r})}function gX(e){return e!==void 0?{h:e.h.value,s:e.s.value,l:e.l.value}:void 0}function Coe(e,t,n){const r={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(yF(r.h,t.h,n),yF(r.s,t.s,n),yF(r.l,t.l,n)),r}function yF(e,t,n){e.enable=t.enable,e.enable?(e.velocity=wi(t.speed)/100*n,e.decay=1-wi(t.decay),e.status="increasing",e.loops=0,e.maxLoops=wi(t.count),e.time=0,e.delayTime=wi(t.delay)*1e3,t.sync||(e.velocity*=ks(),e.value*=ks()),e.initialValue=e.value):e.velocity=0}function uT(e,t,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath()}function KHe(e,t,n,r){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.lineTo(r.x,r.y),e.closePath()}function QHe(e,t,n){e.fillStyle=n??"rgba(0,0,0,0)",e.fillRect(0,0,t.width,t.height)}function JHe(e,t,n,r){n&&(e.globalAlpha=r,e.drawImage(n,0,0,t.width,t.height),e.globalAlpha=1)}function vF(e,t){e.clearRect(0,0,t.width,t.height)}function eWe(e){const{container:t,context:n,particle:r,delta:s,colorStyles:c,backgroundMask:d,composite:i,radius:m,opacity:x,shadow:T,transform:C}=e,A=r.getPosition(),I=r.rotation+(r.pathRotation?r.velocity.angle:0),k={sin:Math.sin(I),cos:Math.cos(I)},B={a:k.cos*(C.a??1),b:k.sin*(C.b??1),c:-k.sin*(C.c??1),d:k.cos*(C.d??1)};n.setTransform(B.a,B.b,B.c,B.d,A.x,A.y),n.beginPath(),d&&(n.globalCompositeOperation=i);const j=r.shadowColor;T.enable&&j&&(n.shadowBlur=T.blur,n.shadowColor=Wg(j),n.shadowOffsetX=T.offset.x,n.shadowOffsetY=T.offset.y),c.fill&&(n.fillStyle=c.fill);const V=r.strokeWidth??0;n.lineWidth=V,c.stroke&&(n.strokeStyle=c.stroke),tWe(t,n,r,m,x,s),V>0&&n.stroke(),r.close&&n.closePath(),r.fill&&n.fill(),nWe(t,n,r,m,x,s),n.globalCompositeOperation="source-over",n.setTransform(1,0,0,1,0,0)}function tWe(e,t,n,r,s,c){if(!n.shape)return;const d=e.drawers.get(n.shape);d&&d.draw(t,n,r,s,c,e.retina.pixelRatio)}function nWe(e,t,n,r,s,c){if(!n.shape)return;const d=e.drawers.get(n.shape);!d||!d.afterEffect||d.afterEffect(t,n,r,s,c,e.retina.pixelRatio)}function rWe(e,t,n){t.draw&&t.draw(e,n)}function iWe(e,t,n,r){t.drawParticle&&t.drawParticle(e,n,r)}function oWe(e,t,n){return{h:e.h,s:e.s,l:e.l+(t==="darken"?-1:1)*n}}function sWe(e,t,n){const r=t[n];r!==void 0&&(e[n]=(e[n]??1)*r)}class aWe{constructor(t){this.container=t,this._applyPostDrawUpdaters=n=>{for(const r of this._postDrawUpdaters)r.afterDraw&&r.afterDraw(n)},this._applyPreDrawUpdaters=(n,r,s,c,d,i)=>{for(const m of this._preDrawUpdaters){if(m.getColorStyles){const{fill:x,stroke:T}=m.getColorStyles(r,n,s,c);x&&(d.fill=x),T&&(d.stroke=T)}if(m.getTransformValues){const x=m.getTransformValues(r);for(const T in x)sWe(i,x,T)}m.beforeDraw&&m.beforeDraw(r)}},this._applyResizePlugins=()=>{for(const n of this._resizePlugins)n.resize&&n.resize()},this._getPluginParticleColors=n=>{let r,s;for(const c of this._colorPlugins)if(!r&&c.particleFillColor&&(r=eE(c.particleFillColor(n))),!s&&c.particleStrokeColor&&(s=eE(c.particleStrokeColor(n))),r&&s)break;return[r,s]},this._initCover=()=>{const n=this.container.actualOptions,r=n.backgroundMask.cover,s=r.color,c=Gf(s);if(c){const d={...c,a:r.opacity};this._coverColorStyle=Wg(d,d.a)}},this._initStyle=()=>{const n=this.element,r=this.container.actualOptions;if(n){this._fullScreen?(this._originalStyle=wc({},n.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in r.style){if(!s||!r.style)continue;const c=r.style[s];c&&n.style.setProperty(s,c,"important")}}},this._initTrail=async()=>{const n=this.container.actualOptions,r=n.particles.move.trail,s=r.fill;if(r.enable)if(s.color){const c=Gf(s.color);if(!c)return;const d=n.particles.move.trail;this._trailFill={color:{...c},opacity:1/d.length}}else await new Promise((c,d)=>{if(!s.image)return;const i=document.createElement("img");i.addEventListener("load",()=>{this._trailFill={image:i,opacity:1/r.length},c()}),i.addEventListener("error",m=>{d(m.error)}),i.src=s.image})},this._paintBase=n=>{this.draw(r=>QHe(r,this.size,n))},this._paintImage=(n,r)=>{this.draw(s=>JHe(s,this.size,n,r))},this._repairStyle=()=>{const n=this.element;n&&(this._safeMutationObserver(r=>r.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(r=>r.observe(n,{attributes:!0})))},this._resetOriginalStyle=()=>{const n=this.element,r=this._originalStyle;if(!(n&&r))return;const s=n.style;s.position=r.position,s.zIndex=r.zIndex,s.top=r.top,s.left=r.left,s.width=r.width,s.height=r.height},this._safeMutationObserver=n=>{this._mutationObserver&&n(this._mutationObserver)},this._setFullScreenStyle=()=>{const n=this.element;if(!n)return;const r="important",s=n.style;s.setProperty("position","fixed",r),s.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),r),s.setProperty("top","0",r),s.setProperty("left","0",r),s.setProperty("width","100%",r),s.setProperty("height","100%",r)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const t=this.container.actualOptions,n=t.particles.move.trail,r=this._trailFill;t.backgroundMask.enable?this.paint():n.enable&&n.length>0&&r?r.color?this._paintBase(Wg(r.color,r.opacity)):r.image&&this._paintImage(r.image,r.opacity):this.draw(s=>{vF(s,this.size)})}destroy(){if(this.stop(),this._generated){const t=this.element;t&&t.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(t){const n=this._context;if(n)return t(n)}drawParticle(t,n){if(t.spawning||t.destroyed)return;const r=t.getRadius();if(r<=0)return;const s=t.getFillColor(),c=t.getStrokeColor()??s;let[d,i]=this._getPluginParticleColors(t);d||(d=s),i||(i=c),!(!d&&!i)&&this.draw(m=>{var G;const x=this.container,T=x.actualOptions,C=t.options.zIndex,A=(1-t.zIndexFactor)**C.opacityRate,I=t.bubble.opacity??((G=t.opacity)==null?void 0:G.value)??1,k=t.strokeOpacity??I,B=I*A,j=k*A,V={},H={fill:d?tE(d,B):void 0};H.stroke=i?tE(i,j):H.fill,this._applyPreDrawUpdaters(m,t,r,B,H,V),eWe({container:x,context:m,particle:t,delta:n,colorStyles:H,backgroundMask:T.backgroundMask.enable,composite:T.backgroundMask.composite,radius:r*(1-t.zIndexFactor)**C.sizeRate,opacity:B,shadow:t.options.shadow,transform:V}),this._applyPostDrawUpdaters(t)})}drawParticlePlugin(t,n,r){this.draw(s=>iWe(s,t,n,r))}drawPlugin(t,n){this.draw(r=>rWe(r,t,n))}async init(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=VHe(t=>{for(const n of t)n.type==="attributes"&&n.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(t){J0().error(t)}this.initBackground(),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const t=this.container.actualOptions,n=t.background,r=this.element;if(!r)return;const s=r.style;if(s){if(n.color){const c=Gf(n.color);s.backgroundColor=c?Wg(c,n.opacity):""}else s.backgroundColor="";s.backgroundImage=n.image||"",s.backgroundPosition=n.position||"",s.backgroundRepeat=n.repeat||"",s.backgroundSize=n.size||""}}initPlugins(){this._resizePlugins=[];for(const[,t]of this.container.plugins)t.resize&&this._resizePlugins.push(t),(t.particleFillColor||t.particleStrokeColor)&&this._colorPlugins.push(t)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const t of this.container.particles.updaters)t.afterDraw&&this._postDrawUpdaters.push(t),(t.getColorStyles||t.getTransformValues||t.beforeDraw)&&this._preDrawUpdaters.push(t)}loadCanvas(t){this._generated&&this.element&&this.element.remove(),this._generated=t.dataset&&cT in t.dataset?t.dataset[cT]==="true":this._generated,this.element=t,this.element.ariaHidden="true",this._originalStyle=wc({},this.element.style),this.size.height=t.offsetHeight,this.size.width=t.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(n=>{this.element&&n.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const t=this.container.actualOptions;this.draw(n=>{t.backgroundMask.enable&&t.backgroundMask.cover?(vF(n,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const t=this.container,n=t.retina.pixelRatio,r=t.canvas.size,s={width:this.element.offsetWidth*n,height:this.element.offsetHeight*n};if(s.height===r.height&&s.width===r.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const c={...r};return this.element.width=r.width=this.element.offsetWidth*n,this.element.height=r.height=this.element.offsetHeight*n,this.container.started&&(this.resizeFactor={width:r.width/c.width,height:r.height/c.height}),!0}stop(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=void 0,this.draw(t=>vF(t,this.size))}async windowResize(){if(!this.element||!this.resize())return;const t=this.container,n=t.updateActualOptions();t.particles.setDensity(),this._applyResizePlugins(),n&&await t.refresh()}}function ph(e,t,n,r,s){if(r){let c={passive:!0};uv(s)?c.capture=s:s!==void 0&&(c=s),e.addEventListener(t,n,c)}else{const c=s;e.removeEventListener(t,n,c)}}class lWe{constructor(t){this.container=t,this._doMouseTouchClick=n=>{const r=this.container,s=r.actualOptions;if(this._canPush){const c=r.interactivity.mouse,d=c.position;if(!d)return;c.clickPosition={...d},c.clickTime=new Date().getTime();const i=s.interactivity.events.onClick;Ml(i.mode,m=>this.container.handleClickMode(m))}n.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=n=>{const r=n,s=this.container,c=s.options,d=c.defaultThemes,i=r.matches?d.dark:d.light,m=c.themes.find(x=>x.name===i);m&&m.default.auto&&s.loadTheme(i)},this._handleVisibilityChange=()=>{const n=this.container,r=n.actualOptions;this._mouseTouchFinish(),r.pauseOnBlur&&(document&&document.hidden?(n.pageHidden=!0,n.pause()):(n.pageHidden=!1,n.getAnimationStatus()?n.play(!0):n.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const n=this.container.canvas;n&&await n.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(n,r)=>{const s=this._handlers,c=this.container,d=c.actualOptions,i=c.interactivity.element;if(!i)return;const m=i,x=c.canvas.element;x&&(x.style.pointerEvents=m===x?"initial":"none"),(d.interactivity.events.onHover.enable||d.interactivity.events.onClick.enable)&&(ph(i,K0,s.mouseMove,r),ph(i,RHe,s.touchStart,r),ph(i,DHe,s.touchMove,r),d.interactivity.events.onClick.enable?(ph(i,hX,s.touchEndClick,r),ph(i,MHe,s.mouseUp,r),ph(i,CHe,s.mouseDown,r)):ph(i,hX,s.touchEnd,r),ph(i,n,s.mouseLeave,r),ph(i,PHe,s.touchCancel,r))},this._manageListeners=n=>{const r=this._handlers,s=this.container,c=s.actualOptions,d=c.interactivity.detectsOn,i=s.canvas.element;let m=Pj;d==="window"?(s.interactivity.element=window,m=AHe):d==="parent"&&i?s.interactivity.element=i.parentElement??i.parentNode:s.interactivity.element=i,this._manageMediaMatch(n),this._manageResize(n),this._manageInteractivityListeners(m,n),document&&ph(document,kHe,r.visibilityChange,n,!1)},this._manageMediaMatch=n=>{const r=this._handlers,s=moe("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){ph(s,"change",r.themeChange,n);return}s.addListener!==void 0&&(n?s.addListener(r.oldThemeChange):s.removeListener(r.oldThemeChange))}},this._manageResize=n=>{const r=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){ph(window,IHe,r.resize,n);return}const d=s.canvas.element;this._resizeObserver&&!n?(d&&this._resizeObserver.unobserve(d),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&n&&d&&(this._resizeObserver=new ResizeObserver(async i=>{i.find(x=>x.target===d)&&await this._handleWindowResize()}),this._resizeObserver.observe(d))},this._mouseDown=()=>{const{interactivity:n}=this.container;if(!n)return;const{mouse:r}=n;r.clicking=!0,r.downPosition=r.position},this._mouseTouchClick=n=>{const r=this.container,s=r.actualOptions,{mouse:c}=r.interactivity;c.inside=!0;let d=!1;const i=c.position;if(!(!i||!s.interactivity.events.onClick.enable)){for(const[,m]of r.plugins)if(m.clickPositionValid&&(d=m.clickPositionValid(i),d))break;d||this._doMouseTouchClick(n),c.clicking=!1}},this._mouseTouchFinish=()=>{const n=this.container.interactivity;if(!n)return;const r=n.mouse;delete r.position,delete r.clickPosition,delete r.downPosition,n.status=Pj,r.inside=!1,r.clicking=!1},this._mouseTouchMove=n=>{const r=this.container,s=r.actualOptions,c=r.interactivity,d=r.canvas.element;if(!c||!c.element)return;c.mouse.inside=!0;let i;if(n.type.startsWith("pointer")){this._canPush=!0;const x=n;if(c.element===window){if(d){const T=d.getBoundingClientRect();i={x:x.clientX-T.left,y:x.clientY-T.top}}}else if(s.interactivity.detectsOn==="parent"){const T=x.target,C=x.currentTarget;if(T&&C&&d){const A=T.getBoundingClientRect(),I=C.getBoundingClientRect(),k=d.getBoundingClientRect();i={x:x.offsetX+2*A.left-(I.left+k.left),y:x.offsetY+2*A.top-(I.top+k.top)}}else i={x:x.offsetX??x.clientX,y:x.offsetY??x.clientY}}else x.target===d&&(i={x:x.offsetX??x.clientX,y:x.offsetY??x.clientY})}else if(this._canPush=n.type!=="touchmove",d){const x=n,T=x.touches[x.touches.length-1],C=d.getBoundingClientRect();i={x:T.clientX-(C.left??0),y:T.clientY-(C.top??0)}}const m=r.retina.pixelRatio;i&&(i.x*=m,i.y*=m),c.mouse.position=i,c.status=K0},this._touchEnd=n=>{const r=n,s=Array.from(r.changedTouches);for(const c of s)this._touches.delete(c.identifier);this._mouseTouchFinish()},this._touchEndClick=n=>{const r=n,s=Array.from(r.changedTouches);for(const c of s)this._touches.delete(c.identifier);this._mouseTouchClick(n)},this._touchStart=n=>{const r=n,s=Array.from(r.changedTouches);for(const c of s)this._touches.set(c.identifier,performance.now());this._mouseTouchMove(n)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:n=>this._mouseTouchMove(n),mouseUp:n=>this._mouseTouchClick(n),touchStart:n=>this._touchStart(n),touchMove:n=>this._mouseTouchMove(n),touchEnd:n=>this._touchEnd(n),touchCancel:n=>this._touchEnd(n),touchEndClick:n=>this._touchEndClick(n),visibilityChange:()=>this._handleVisibilityChange(),themeChange:n=>this._handleThemeChange(n),oldThemeChange:n=>this._handleThemeChange(n),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class Wl{constructor(){this.value=""}static create(t,n){const r=new Wl;return r.load(t),n!==void 0&&(Hf(n)||_d(n)?r.load({value:n}):r.load(n)),r}load(t){(t==null?void 0:t.value)!==void 0&&(this.value=t.value)}}class cWe{constructor(){this.color=new Wl,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=Wl.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.position!==void 0&&(this.position=t.position),t.repeat!==void 0&&(this.repeat=t.repeat),t.size!==void 0&&(this.size=t.size),t.opacity!==void 0&&(this.opacity=t.opacity))}}class uWe{constructor(){this.color=new Wl,this.color.value="#fff",this.opacity=1}load(t){t&&(t.color!==void 0&&(this.color=Wl.create(this.color,t.color)),t.opacity!==void 0&&(this.opacity=t.opacity))}}class dWe{constructor(){this.composite="destination-out",this.cover=new uWe,this.enable=!1}load(t){if(t){if(t.composite!==void 0&&(this.composite=t.composite),t.cover!==void 0){const n=t.cover,r=Hf(t.cover)?{color:t.cover}:t.cover;this.cover.load(n.color!==void 0?n:{color:r})}t.enable!==void 0&&(this.enable=t.enable)}}}class hWe{constructor(){this.enable=!0,this.zIndex=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.zIndex!==void 0&&(this.zIndex=t.zIndex))}}class fWe{constructor(){this.enable=!1,this.mode=[]}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode))}}class yX{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(t){this.elementId=t}get elementId(){return this.ids}set elementId(t){this.ids=t}get ids(){return Ml(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Ml(t,n=>`#${n}`)}load(t){if(!t)return;const n=t.ids??t.elementId??t.el;n!==void 0&&(this.ids=n),t.selectors!==void 0&&(this.selectors=t.selectors),t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),t.type!==void 0&&(this.type=t.type)}}class pWe{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.force!==void 0&&(this.force=t.force),t.smooth!==void 0&&(this.smooth=t.smooth))}}class mWe{constructor(){this.enable=!1,this.mode=[],this.parallax=new pWe}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),this.parallax.load(t.parallax))}}class gWe{constructor(){this.delay=.5,this.enable=!0}load(t){t!==void 0&&(t.delay!==void 0&&(this.delay=t.delay),t.enable!==void 0&&(this.enable=t.enable))}}class yWe{constructor(){this.onClick=new fWe,this.onDiv=new yX,this.onHover=new mWe,this.resize=new gWe}get onclick(){return this.onClick}set onclick(t){this.onClick=t}get ondiv(){return this.onDiv}set ondiv(t){this.onDiv=t}get onhover(){return this.onHover}set onhover(t){this.onHover=t}load(t){if(!t)return;this.onClick.load(t.onClick??t.onclick);const n=t.onDiv??t.ondiv;n!==void 0&&(this.onDiv=Ml(n,r=>{const s=new yX;return s.load(r),s})),this.onHover.load(t.onHover??t.onhover),uv(t.resize)?this.resize.enable=t.resize:this.resize.load(t.resize)}}class vWe{constructor(t,n){this._engine=t,this._container=n}load(t){if(!t||!this._container)return;const n=this._engine.plugins.interactors.get(this._container);if(n)for(const r of n)r.loadModeOptions&&r.loadModeOptions(this,t)}}class Moe{constructor(t,n){this.detectsOn="window",this.events=new yWe,this.modes=new vWe(t,n)}get detect_on(){return this.detectsOn}set detect_on(t){this.detectsOn=t}load(t){if(!t)return;const n=t.detectsOn??t.detect_on;n!==void 0&&(this.detectsOn=n),this.events.load(t.events),this.modes.load(t.modes)}}class _We{load(t){t&&(t.position&&(this.position={x:t.position.x??50,y:t.position.y??50,mode:t.position.mode??"percent"}),t.options&&(this.options=wc({},t.options)))}}class xWe{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(t){t&&(t.maxWidth!==void 0&&(this.maxWidth=t.maxWidth),t.mode!==void 0&&(t.mode==="screen"?this.mode="screen":this.mode="canvas"),t.options!==void 0&&(this.options=wc({},t.options)))}}class bWe{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(t){t&&(t.auto!==void 0&&(this.auto=t.auto),t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class wWe{constructor(){this.name="",this.default=new bWe}load(t){t&&(t.name!==void 0&&(this.name=t.name),this.default.load(t.default),t.options!==void 0&&(this.options=wc({},t.options)))}}class _F{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(t){t&&(t.count!==void 0&&(this.count=co(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(this.offset=co(t.offset)),t.speed!==void 0&&(this.speed=co(t.speed)),t.decay!==void 0&&(this.decay=co(t.decay)),t.delay!==void 0&&(this.delay=co(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class SWe{constructor(){this.h=new _F,this.s=new _F,this.l=new _F}load(t){t&&(this.h.load(t.h),this.s.load(t.s),this.l.load(t.l))}}class nE extends Wl{constructor(){super(),this.animation=new SWe}static create(t,n){const r=new nE;return r.load(t),n!==void 0&&(Hf(n)||_d(n)?r.load({value:n}):r.load(n)),r}load(t){if(super.load(t),!t)return;const n=t.animation;n!==void 0&&(n.enable!==void 0?this.animation.h.load(n):this.animation.load(t.animation))}}class TWe{constructor(){this.speed=2}load(t){t&&t.speed!==void 0&&(this.speed=t.speed)}}class EWe{constructor(){this.enable=!0,this.retries=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.retries!==void 0&&(this.retries=t.retries))}}class CWe{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(t){t&&(t.count!==void 0&&(this.count=co(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=co(t.speed)),t.decay!==void 0&&(this.decay=co(t.decay)),t.delay!==void 0&&(this.delay=co(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class Aoe extends CWe{constructor(){super(),this.mode="auto",this.startValue="random"}load(t){super.load(t),t&&(t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue),t.mode!==void 0&&(this.mode=t.mode),t.startValue!==void 0&&(this.startValue=t.startValue))}}class MWe{constructor(){this.enable=!1,this.minimumValue=0}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.minimumValue!==void 0&&(this.minimumValue=t.minimumValue))}}class Bv{constructor(){this.random=new MWe,this.value=0}load(t){t&&(uv(t.random)?this.random.enable=t.random:this.random.load(t.random),t.value!==void 0&&(this.value=co(t.value,this.random.enable?this.random.minimumValue:void 0)))}}class vX extends Bv{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class Roe{constructor(){this.horizontal=new vX,this.vertical=new vX}load(t){t&&(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}class AWe{constructor(){this.absorb=new TWe,this.bounce=new Roe,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new EWe}load(t){t&&(this.absorb.load(t.absorb),this.bounce.load(t.bounce),t.enable!==void 0&&(this.enable=t.enable),t.maxSpeed!==void 0&&(this.maxSpeed=co(t.maxSpeed)),t.mode!==void 0&&(this.mode=t.mode),this.overlap.load(t.overlap))}}class RWe{constructor(){this.offset=0,this.value=90}load(t){t&&(t.offset!==void 0&&(this.offset=co(t.offset)),t.value!==void 0&&(this.value=co(t.value)))}}class DWe{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(t){this.rotate.x=t}get rotateY(){return this.rotate.y}set rotateY(t){this.rotate.y=t}load(t){var s,c;if(!t)return;t.distance!==void 0&&(this.distance=co(t.distance)),t.enable!==void 0&&(this.enable=t.enable);const n=((s=t.rotate)==null?void 0:s.x)??t.rotateX;n!==void 0&&(this.rotate.x=n);const r=((c=t.rotate)==null?void 0:c.y)??t.rotateY;r!==void 0&&(this.rotate.y=r)}}class PWe{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(t){t&&(t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.mode!==void 0&&(this.mode=t.mode),t.radius!==void 0&&(this.radius=t.radius))}}class IWe{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=co(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.inverse!==void 0&&(this.inverse=t.inverse),t.maxSpeed!==void 0&&(this.maxSpeed=co(t.maxSpeed)))}}class kWe{constructor(){this.clamp=!0,this.delay=new Bv,this.enable=!1,this.options={}}load(t){t&&(t.clamp!==void 0&&(this.clamp=t.clamp),this.delay.load(t.delay),t.enable!==void 0&&(this.enable=t.enable),this.generator=t.generator,t.options&&(this.options=wc(this.options,t.options)))}}class OWe{load(t){t&&(t.color!==void 0&&(this.color=Wl.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image))}}class LWe{constructor(){this.enable=!1,this.length=10,this.fill=new OWe}get fillColor(){return this.fill.color}set fillColor(t){this.fill.load({color:t})}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),(t.fill!==void 0||t.fillColor!==void 0)&&this.fill.load(t.fill||{color:t.fillColor}),t.length!==void 0&&(this.length=t.length))}}class zWe{constructor(){this.default="out"}load(t){t&&(t.default!==void 0&&(this.default=t.default),this.bottom=t.bottom??t.default,this.left=t.left??t.default,this.right=t.right??t.default,this.top=t.top??t.default)}}class FWe{constructor(){this.acceleration=0,this.enable=!1}load(t){t&&(t.acceleration!==void 0&&(this.acceleration=co(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.position&&(this.position=wc({},t.position)))}}class BWe{constructor(){this.angle=new RWe,this.attract=new DWe,this.center=new PWe,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new IWe,this.path=new kWe,this.outModes=new zWe,this.random=!1,this.size=!1,this.speed=2,this.spin=new FWe,this.straight=!1,this.trail=new LWe,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(t){this.collisions=t}get collisions(){return!1}set collisions(t){}get noise(){return this.path}set noise(t){this.path=t}get outMode(){return this.outModes.default}set outMode(t){this.outModes.default=t}get out_mode(){return this.outMode}set out_mode(t){this.outMode=t}load(t){if(!t)return;this.angle.load(Wf(t.angle)?{value:t.angle}:t.angle),this.attract.load(t.attract),this.center.load(t.center),t.decay!==void 0&&(this.decay=co(t.decay)),t.direction!==void 0&&(this.direction=t.direction),t.distance!==void 0&&(this.distance=Wf(t.distance)?{horizontal:t.distance,vertical:t.distance}:{...t.distance}),t.drift!==void 0&&(this.drift=co(t.drift)),t.enable!==void 0&&(this.enable=t.enable),this.gravity.load(t.gravity);const n=t.outModes??t.outMode??t.out_mode;n!==void 0&&(Yb(n)?this.outModes.load(n):this.outModes.load({default:n})),this.path.load(t.path??t.noise),t.random!==void 0&&(this.random=t.random),t.size!==void 0&&(this.size=t.size),t.speed!==void 0&&(this.speed=co(t.speed)),this.spin.load(t.spin),t.straight!==void 0&&(this.straight=t.straight),this.trail.load(t.trail),t.vibrate!==void 0&&(this.vibrate=t.vibrate),t.warp!==void 0&&(this.warp=t.warp)}}class jWe extends Aoe{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.opacity_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.opacity_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class NWe extends Bv{constructor(){super(),this.animation=new jWe,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(!t)return;super.load(t);const n=t.animation??t.anim;n!==void 0&&(this.animation.load(n),this.value=co(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class VWe{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(t){this.width=t}get factor(){return this.height}set factor(t){this.height=t}get value_area(){return this.area}set value_area(t){this.area=t}load(t){if(!t)return;t.enable!==void 0&&(this.enable=t.enable);const n=t.width??t.area??t.value_area;n!==void 0&&(this.width=n);const r=t.height??t.factor;r!==void 0&&(this.height=r)}}class $We{constructor(){this.density=new VWe,this.limit=0,this.value=0}get max(){return this.limit}set max(t){this.limit=t}load(t){if(!t)return;this.density.load(t.density);const n=t.limit??t.max;n!==void 0&&(this.limit=n),t.value!==void 0&&(this.value=t.value)}}class UWe{constructor(){this.blur=0,this.color=new Wl,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=Wl.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(t.offset.x!==void 0&&(this.offset.x=t.offset.x),t.offset.y!==void 0&&(this.offset.y=t.offset.y)))}}const xF="character",bF="char",wF="image",SF="images",TF="polygon",EF="star";class qWe{constructor(){this.loadShape=(t,n,r,s)=>{if(!t)return;const c=_d(t),d=c?[]:{},i=c!==_d(this.options[n]),m=c!==_d(this.options[r]);i&&(this.options[n]=d),m&&s&&(this.options[r]=d),this.options[n]=wc(this.options[n]??d,t),(!this.options[r]||s)&&(this.options[r]=wc(this.options[r]??d,t))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[xF]??this.options[bF]}set character(t){this.options[bF]=this.options[xF]=t}get custom(){return this.options}set custom(t){this.options=t}get image(){return this.options[wF]??this.options[SF]}set image(t){this.options[SF]=this.options[wF]=t}get images(){return this.image}set images(t){this.image=t}get polygon(){return this.options[TF]??this.options[EF]}set polygon(t){this.options[EF]=this.options[TF]=t}get stroke(){return[]}set stroke(t){}load(t){if(!t)return;const n=t.options??t.custom;if(n!==void 0)for(const r in n){const s=n[r];s&&(this.options[r]=wc(this.options[r]??{},s))}this.loadShape(t.character,xF,bF,!0),this.loadShape(t.polygon,TF,EF,!1),this.loadShape(t.image??t.images,wF,SF,!0),t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class HWe extends Aoe{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(t){this.minimumValue=t}load(t){(t==null?void 0:t.size_min)!==void 0&&t.minimumValue===void 0&&(t.minimumValue=t.size_min),super.load(t),t&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class WWe extends Bv{constructor(){super(),this.animation=new HWe,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(t){this.animation=t}load(t){if(super.load(t),!t)return;const n=t.animation??t.anim;n!==void 0&&(this.animation.load(n),this.value=co(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class _X{constructor(){this.width=0}load(t){t&&(t.color!==void 0&&(this.color=nE.create(this.color,t.color)),t.width!==void 0&&(this.width=co(t.width)),t.opacity!==void 0&&(this.opacity=co(t.opacity)))}}class GWe extends Bv{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(t){super.load(t),t&&(t.opacityRate!==void 0&&(this.opacityRate=t.opacityRate),t.sizeRate!==void 0&&(this.sizeRate=t.sizeRate),t.velocityRate!==void 0&&(this.velocityRate=t.velocityRate))}}class YWe{constructor(t,n){this._engine=t,this._container=n,this.bounce=new Roe,this.collisions=new AWe,this.color=new nE,this.color.value="#fff",this.groups={},this.move=new BWe,this.number=new $We,this.opacity=new NWe,this.reduceDuplicates=!1,this.shadow=new UWe,this.shape=new qWe,this.size=new WWe,this.stroke=new _X,this.zIndex=new GWe}load(t){var s,c,d;if(!t)return;if(this.bounce.load(t.bounce),this.color.load(nE.create(this.color,t.color)),t.groups!==void 0)for(const i in t.groups){const m=t.groups[i];m!==void 0&&(this.groups[i]=wc(this.groups[i]??{},m))}this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),t.reduceDuplicates!==void 0&&(this.reduceDuplicates=t.reduceDuplicates),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.zIndex.load(t.zIndex);const n=((s=t.move)==null?void 0:s.collisions)??((c=t.move)==null?void 0:c.bounce);n!==void 0&&(this.collisions.enable=n),this.collisions.load(t.collisions),t.interactivity!==void 0&&(this.interactivity=wc({},t.interactivity));const r=t.stroke??((d=t.shape)==null?void 0:d.stroke);if(r&&(this.stroke=Ml(r,i=>{const m=new _X;return m.load(i),m})),this._container){const i=this._engine.plugins.updaters.get(this._container);if(i)for(const x of i)x.loadOptions&&x.loadOptions(this,t);const m=this._engine.plugins.interactors.get(this._container);if(m)for(const x of m)x.loadParticlesOptions&&x.loadParticlesOptions(this,t)}}}function Doe(e,...t){for(const n of t)e.load(n)}function Poe(e,t,...n){const r=new YWe(e,t);return Doe(r,...n),r}class XWe{constructor(t,n){this._findDefaultTheme=r=>this.themes.find(s=>s.default.value&&s.default.mode===r)??this.themes.find(s=>s.default.value&&s.default.mode==="any"),this._importPreset=r=>{this.load(this._engine.plugins.getPreset(r))},this._engine=t,this._container=n,this.autoPlay=!0,this.background=new cWe,this.backgroundMask=new dWe,this.defaultThemes={},this.delay=0,this.fullScreen=new hWe,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Moe(t,n),this.manualParticles=[],this.particles=Poe(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(t){this.fullScreen.load(t)}get fps_limit(){return this.fpsLimit}set fps_limit(t){this.fpsLimit=t}get retina_detect(){return this.detectRetina}set retina_detect(t){this.detectRetina=t}load(t){var d,i;if(!t)return;t.preset!==void 0&&Ml(t.preset,m=>this._importPreset(m)),t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.delay!==void 0&&(this.delay=co(t.delay));const n=t.detectRetina??t.retina_detect;n!==void 0&&(this.detectRetina=n),t.duration!==void 0&&(this.duration=co(t.duration));const r=t.fpsLimit??t.fps_limit;r!==void 0&&(this.fpsLimit=r),t.pauseOnBlur!==void 0&&(this.pauseOnBlur=t.pauseOnBlur),t.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),t.zLayers!==void 0&&(this.zLayers=t.zLayers),this.background.load(t.background);const s=t.fullScreen??t.backgroundMode;uv(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(t.backgroundMask),this.interactivity.load(t.interactivity),t.manualParticles&&(this.manualParticles=t.manualParticles.map(m=>{const x=new _We;return x.load(m),x})),this.particles.load(t.particles),this.style=wc(this.style,t.style),this._engine.plugins.loadOptions(this,t),t.smooth!==void 0&&(this.smooth=t.smooth);const c=this._engine.plugins.interactors.get(this._container);if(c)for(const m of c)m.loadOptions&&m.loadOptions(this,t);if(t.responsive!==void 0)for(const m of t.responsive){const x=new xWe;x.load(m),this.responsive.push(x)}if(this.responsive.sort((m,x)=>m.maxWidth-x.maxWidth),t.themes!==void 0)for(const m of t.themes){const x=this.themes.find(T=>T.name===m.name);if(x)x.load(m);else{const T=new wWe;T.load(m),this.themes.push(T)}}this.defaultThemes.dark=(d=this._findDefaultTheme("dark"))==null?void 0:d.name,this.defaultThemes.light=(i=this._findDefaultTheme("light"))==null?void 0:i.name}setResponsive(t,n,r){this.load(r);const s=this.responsive.find(c=>c.mode==="screen"&&screen?c.maxWidth>screen.availWidth:c.maxWidth*n>t);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(t){if(t){const n=this.themes.find(r=>r.name===t);n&&this.load(n.options)}else{const n=moe("(prefers-color-scheme: dark)"),r=n&&n.matches,s=this._findDefaultTheme(r?"dark":"light");s&&this.load(s.options)}}}class ZWe{constructor(t,n){this.container=n,this._engine=t,this._interactors=t.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(t){for(const n of this._externalInteractors)n.isEnabled()&&await n.interact(t)}handleClickMode(t){for(const n of this._externalInteractors)n.handleClickMode&&n.handleClickMode(t)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const t of this._interactors){switch(t.type){case"external":this._externalInteractors.push(t);break;case"particles":this._particleInteractors.push(t);break}t.init()}}async particlesInteract(t,n){for(const r of this._externalInteractors)r.clear(t,n);for(const r of this._particleInteractors)r.isEnabled(t)&&await r.interact(t,n)}async reset(t){for(const n of this._externalInteractors)n.isEnabled()&&n.reset(t);for(const n of this._particleInteractors)n.isEnabled(t)&&n.reset(t)}}const xX=e=>{if(!Ea(e.outMode,e.checkModes))return;const t=e.radius*2;e.coord>e.maxCoord-t?e.setCb(-e.radius):e.coord<t&&e.setCb(e.radius)};class KWe{constructor(t,n,r,s,c,d){this.container=r,this._calcPosition=(i,m,x,T=0)=>{for(const[,H]of i.plugins){const G=H.particlePosition!==void 0?H.particlePosition(m,this):void 0;if(G)return dd.create(G.x,G.y,x)}const C=i.canvas.size,A=FHe({size:C,position:m}),I=dd.create(A.x,A.y,x),k=this.getRadius(),B=this.options.move.outModes,j=H=>{xX({outMode:H,checkModes:["bounce","bounce-horizontal"],coord:I.x,maxCoord:i.canvas.size.width,setCb:G=>I.x+=G,radius:k})},V=H=>{xX({outMode:H,checkModes:["bounce","bounce-vertical"],coord:I.y,maxCoord:i.canvas.size.height,setCb:G=>I.y+=G,radius:k})};return j(B.left??B.default),j(B.right??B.default),V(B.top??B.default),V(B.bottom??B.default),this._checkOverlap(I,T)?this._calcPosition(i,void 0,x,T+1):I},this._calculateVelocity=()=>{const i=zHe(this.direction),m=i.copy(),x=this.options.move;if(x.direction==="inside"||x.direction==="outside")return m;const T=Math.PI/180*wi(x.angle.value),C=Math.PI/180*wi(x.angle.offset),A={left:C-T/2,right:C+T/2};return x.straight||(m.angle+=Tu(co(A.left,A.right))),x.random&&typeof x.speed=="number"&&(m.length*=ks()),m},this._checkOverlap=(i,m=0)=>{const x=this.options.collisions,T=this.getRadius();if(!x.enable)return!1;const C=x.overlap;if(C.enable)return!1;const A=C.retries;if(A>=0&&m>A)throw new Error(`${zh} particle is overlapping and can't be placed`);return!!this.container.particles.find(I=>vd(i,I.position)<T+I.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const m=this.roll.horizontal&&this.roll.vertical?2:1,x=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+x)/(Math.PI/m))%2?this.backColor?this.backColor:this.roll.alter?oWe(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const m=this.container,x=wi(this.options.zIndex.value);this.position=this._calcPosition(m,i,ep(x,0,m.zLayers)),this.initialPosition=this.position.copy();const T=m.canvas.size;switch(this.moveCenter={...xoe(this.options.move.center,T),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=LHe(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=Cl.origin},this._loadShapeData=(i,m)=>{const x=i.options[this.shape];if(x)return wc({close:i.close,fill:i.fill},Hg(x,this.id,m))},this._engine=t,this.init(n,s,c,d)}destroy(t){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const n=this.container,r=this.pathGenerator;for(const[,s]of n.plugins)s.particleDestroyed&&s.particleDestroyed(this,t);for(const s of n.particles.updaters)s.particleDestroyed&&s.particleDestroyed(this,t);r&&r.reset(this)}draw(t){const n=this.container;for(const[,r]of n.plugins)n.canvas.drawParticlePlugin(r,this,t);n.canvas.drawParticle(this,t)}getFillColor(){return this._getRollColor(this.bubble.color??gX(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??gX(this.strokeColor))}init(t,n,r,s){const c=this.container,d=this._engine;this.id=t,this.group=s,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const i=c.retina.pixelRatio,m=c.actualOptions,x=Poe(this._engine,c,m.particles),T=x.shape.type,{reduceDuplicates:C}=x;this.shape=Hg(T,this.id,C);const A=x.shape;if(r&&r.shape&&r.shape.type){const G=r.shape.type,X=Hg(G,this.id,C);X&&(this.shape=X,A.load(r.shape))}this.shapeData=this._loadShapeData(A,C),x.load(r);const I=this.shapeData;I&&x.load(I.particles);const k=new Moe(d,c);k.load(c.actualOptions.interactivity),k.load(x.interactivity),this.interactivity=k,this.fill=(I==null?void 0:I.fill)??x.shape.fill,this.close=(I==null?void 0:I.close)??x.shape.close,this.options=x;const B=this.options.move.path;this.pathDelay=Q0(B.delay)*1e3,B.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(B.generator),this.pathGenerator&&c.addPath(B.generator,this.pathGenerator)&&this.pathGenerator.init(c)),c.retina.initParticle(this),this.size=_oe(this.options.size,i),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(n),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-wi(this.options.move.decay);const j=c.particles;j.needsSort=j.needsSort||j.lastZIndex<this.position.z,j.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/c.zLayers,this.sides=24;let V=c.drawers.get(this.shape);V||(V=this._engine.plugins.getShapeDrawer(this.shape),V&&c.drawers.set(this.shape,V)),V&&V.loadShape&&V.loadShape(this);const H=V==null?void 0:V.getSidesCount;H&&(this.sides=H(this)),this.spawning=!1,this.shadowColor=Gf(this.options.shadow.color);for(const G of c.particles.updaters)G.init(this);for(const G of c.particles.movers)G.init&&G.init(this);V&&V.particleInit&&V.particleInit(c,this);for(const[,G]of c.plugins)G.particleCreated&&G.particleCreated(this)}isInsideCanvas(){const t=this.getRadius(),n=this.container.canvas.size,r=this.position;return r.x>=-t&&r.y>=-t&&r.y<=n.height+t&&r.x<=n.width+t}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const t of this.container.particles.updaters)t.reset&&t.reset(this)}}class QWe{constructor(t,n){this.position=t,this.particle=n}}class Ioe{constructor(t,n){this.position={x:t,y:n}}}class tp extends Ioe{constructor(t,n,r,s){super(t,n),this.size={height:s,width:r}}contains(t){const n=this.size.width,r=this.size.height,s=this.position;return t.x>=s.x&&t.x<=s.x+n&&t.y>=s.y&&t.y<=s.y+r}intersects(t){t instanceof Sc&&t.intersects(this);const n=this.size.width,r=this.size.height,s=this.position,c=t.position,d=t instanceof tp?t.size:{width:0,height:0},i=d.width,m=d.height;return c.x<s.x+n&&c.x+i>s.x&&c.y<s.y+r&&c.y+m>s.y}}class Sc extends Ioe{constructor(t,n,r){super(t,n),this.radius=r}contains(t){return vd(t,this.position)<=this.radius}intersects(t){const n=this.position,r=t.position,s={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},c=this.radius;if(t instanceof Sc){const d=c+t.radius,i=Math.sqrt(s.x**2+s.y**2);return d>i}else if(t instanceof tp){const{width:d,height:i}=t.size;return Math.pow(s.x-d,2)+Math.pow(s.y-i,2)<=c**2||s.x<=c+d&&s.y<=c+i||s.x<=d||s.y<=i}return!1}}class eD{constructor(t,n){this.rectangle=t,this.capacity=n,this._subdivide=()=>{const{x:r,y:s}=this.rectangle.position,{width:c,height:d}=this.rectangle.size,{capacity:i}=this;for(let m=0;m<4;m++)this._subs.push(new eD(new tp(r+c/2*(m%2),s+d/2*(Math.round(m/2)-m%2),c/2,d/2),i));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(t){return this.rectangle.contains(t.position)?this._points.length<this.capacity?(this._points.push(t),!0):(this._divided||this._subdivide(),this._subs.some(n=>n.insert(t))):!1}query(t,n,r){const s=r||[];if(!t.intersects(this.rectangle))return[];for(const c of this._points)!t.contains(c.position)&&vd(t.position,c.position)>c.particle.getRadius()&&(!n||n(c.particle))||s.push(c.particle);if(this._divided)for(const c of this._subs)c.query(t,n,s);return s}queryCircle(t,n,r){return this.query(new Sc(t.x,t.y,n),r)}queryRectangle(t,n,r){return this.query(new tp(t.x,t.y,n.width,n.height),r)}}const bX=4,wX=e=>new tp(-e.width/4,-e.height/4,e.width*3/2,e.height*3/2);let JWe=class{constructor(t,n){this._applyDensity=(s,c,d)=>{var I;if(!((I=s.number.density)!=null&&I.enable))return;const i=s.number,m=this._initDensityFactor(i.density),x=i.value,T=i.limit>0?i.limit:x,C=Math.min(x,T)*m+c,A=Math.min(this.count,this.filter(k=>k.group===d).length);this.limit=i.limit*m,A<C?this.push(Math.abs(C-A),void 0,s,d):A>C&&this.removeQuantity(A-C,d)},this._initDensityFactor=s=>{const c=this._container;if(!c.canvas.element||!s.enable)return 1;const d=c.canvas.element,i=c.retina.pixelRatio;return d.width*d.height/(s.factor*i**2*s.area)},this._pushParticle=(s,c,d,i)=>{try{let m=this.pool.pop();m?m.init(this._nextId,s,c,d):m=new KWe(this._engine,this._nextId,this._container,s,c,d);let x=!0;return i&&(x=i(m)),x?(this._array.push(m),this._zArray.push(m),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:m}}),m):void 0}catch(m){J0().warning(`${zh} adding particle: ${m}`);return}},this._removeParticle=(s,c,d)=>{const i=this._array[s];if(!i||i.group!==c)return!1;i.destroy(d);const m=this._zArray.indexOf(i);return this._array.splice(s,1),this._zArray.splice(m,1),this.pool.push(i),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:i}}),!0},this._engine=t,this._container=n,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new ZWe(t,n);const r=n.canvas.size;this.quadTree=new eD(wX(r),bX),this.movers=this._engine.plugins.getMovers(n,!0),this.updaters=this._engine.plugins.getUpdaters(n,!0)}get count(){return this._array.length}addManualParticles(){const t=this._container,n=t.actualOptions;for(const r of n.manualParticles)this.addParticle(r.position?xoe(r.position,t.canvas.size):void 0,r.options)}addParticle(t,n,r,s){const c=this._container,d=c.actualOptions,i=d.particles.number.limit;if(i>0){const m=this.count+1-i;m>0&&this.removeQuantity(m)}return this._pushParticle(t,n,r,s)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(t){const n=this._container;n.canvas.clear(),await this.update(t);for(const[,r]of n.plugins)n.canvas.drawPlugin(r,t);for(const r of this._zArray)r.draw(t)}filter(t){return this._array.filter(t)}find(t){return this._array.find(t)}handleClickMode(t){this._interactionManager.handleClickMode(t)}init(){var s;const t=this._container,n=t.actualOptions;this.lastZIndex=0,this.needsSort=!1;let r=!1;this.updaters=this._engine.plugins.getUpdaters(t,!0),this._interactionManager.init();for(const[,c]of t.plugins)if(c.particlesInitialization!==void 0&&(r=c.particlesInitialization()),r)break;this._interactionManager.init();for(const[,c]of t.pathGenerators)c.init(t);if(this.addManualParticles(),!r){for(const c in n.particles.groups){const d=n.particles.groups[c];for(let i=this.count,m=0;m<((s=d.number)==null?void 0:s.value)&&i<n.particles.number.value;i++,m++)this.addParticle(void 0,d,c)}for(let c=this.count;c<n.particles.number.value;c++)this.addParticle()}}push(t,n,r,s){this.pushing=!0;for(let c=0;c<t;c++)this.addParticle(n==null?void 0:n.position,r,s);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(t,n,r){this.removeAt(this._array.indexOf(t),void 0,n,r)}removeAt(t,n=1,r,s){if(t<0||t>this.count)return;let c=0;for(let d=t;c<n&&d<this.count;d++)this._removeParticle(d--,r,s)&&c++}removeQuantity(t,n){this.removeAt(0,t,n)}setDensity(){const t=this._container.actualOptions,n=t.particles.groups;for(const r in n)this._applyDensity(n[r],0,r);this._applyDensity(t.particles,t.manualParticles.length)}async update(t){const n=this._container,r=new Set;this.quadTree=new eD(wX(n.canvas.size),bX);for(const[,s]of n.pathGenerators)s.update();for(const[,s]of n.plugins)s.update&&s.update(t);for(const s of this._array){const c=n.canvas.resizeFactor;c&&!s.ignoresResizeRatio&&(s.position.x*=c.width,s.position.y*=c.height,s.initialPosition.x*=c.width,s.initialPosition.y*=c.height),s.ignoresResizeRatio=!1,await this._interactionManager.reset(s);for(const[,d]of this._container.plugins){if(s.destroyed)break;d.particleUpdate&&d.particleUpdate(s,t)}for(const d of this.movers)d.isEnabled(s)&&d.move(s,t);if(s.destroyed){r.add(s);continue}this.quadTree.insert(new QWe(s.getPosition(),s))}if(r.size){const s=c=>!r.has(c);this._array=this.filter(s),this._zArray=this._zArray.filter(s),this.pool.push(...r)}await this._interactionManager.externalInteract(t);for(const s of this._array){for(const c of this.updaters)c.update(s,t);!s.destroyed&&!s.spawning&&await this._interactionManager.particlesInteract(s,t)}if(delete n.canvas.resizeFactor,this.needsSort){const s=this._zArray;s.sort((c,d)=>d.position.z-c.position.z||c.id-d.id),this.lastZIndex=s[s.length-1].position.z,this.needsSort=!1}}};class eGe{constructor(t){this.container=t,this.pixelRatio=1,this.reduceFactor=1}init(){const t=this.container,n=t.actualOptions;this.pixelRatio=!n.detectRetina||S1()?1:window.devicePixelRatio,this.reduceFactor=1;const r=this.pixelRatio;if(t.canvas.element){const d=t.canvas.element;t.canvas.size.width=d.offsetWidth*r,t.canvas.size.height=d.offsetHeight*r}const s=n.particles,c=s.move;this.attractDistance=wi(c.attract.distance)*r,this.maxSpeed=wi(c.gravity.maxSpeed)*r,this.sizeAnimationSpeed=wi(s.size.animation.speed)*r}initParticle(t){const n=t.options,r=this.pixelRatio,s=n.move,c=s.distance,d=t.retina;d.attractDistance=wi(s.attract.distance)*r,d.moveDrift=wi(s.drift)*r,d.moveSpeed=wi(s.speed)*r,d.sizeAnimationSpeed=wi(n.size.animation.speed)*r;const i=d.maxDistance;i.horizontal=c.horizontal!==void 0?c.horizontal*r:void 0,i.vertical=c.vertical!==void 0?c.vertical*r:void 0,d.maxSpeed=wi(s.gravity.maxSpeed)*r}}function Ws(e){return e&&!e.destroyed}function tGe(e,t=60,n=!1){return{value:e,factor:n?60/t:60*e/1e3}}function Db(e,t,...n){const r=new XWe(e,t);return Doe(r,...n),r}const nGe="default",SX={generate:e=>e.velocity,init:()=>{},update:()=>{},reset:()=>{}};class rGe{constructor(t,n,r){this.id=n,this._intersectionManager=s=>{if(!(!Ws(this)||!this.actualOptions.pauseOnOutsideViewport))for(const c of s)c.target===this.interactivity.element&&(c.isIntersecting?this.play:this.pause)()},this._nextFrame=async s=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&s<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=s);const c=tGe(s-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(c.value),this.lastFrameTime=s,c.value>1e3){this.draw(!1);return}if(await this.particles.draw(c),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(c){J0().error(`${zh} in animation loop`,c)}},this._engine=t,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=r,this._initialSourceOptions=r,this.retina=new eGe(this),this.canvas=new aWe(this),this.particles=new JWe(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Db(this._engine,this),this.actualOptions=Db(this._engine,this),this._eventListeners=new lWe(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(s=>this._intersectionManager(s))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(t){if(!Ws(this))return;const n=this.interactivity.element;if(!n)return;const r=(C,A,I)=>{if(!Ws(this))return;const k=this.retina.pixelRatio,B={x:A.x*k,y:A.y*k},j=this.particles.quadTree.queryCircle(B,I*k);t(C,j)},s=C=>{if(!Ws(this))return;const A=C,I={x:A.offsetX||A.clientX,y:A.offsetY||A.clientY};r(C,I,1)},c=()=>{Ws(this)&&(x=!0,T=!1)},d=()=>{Ws(this)&&(T=!0)},i=C=>{if(Ws(this)){if(x&&!T){const A=C;let I=A.touches[A.touches.length-1];if(!I&&(I=A.changedTouches[A.changedTouches.length-1],!I))return;const k=this.canvas.element,B=k?k.getBoundingClientRect():void 0,j={x:I.clientX-(B?B.left:0),y:I.clientY-(B?B.top:0)};r(C,j,Math.max(I.radiusX,I.radiusY))}x=!1,T=!1}},m=()=>{Ws(this)&&(x=!1,T=!1)};let x=!1,T=!1;n.addEventListener("click",s),n.addEventListener("touchstart",c),n.addEventListener("touchmove",d),n.addEventListener("touchend",i),n.addEventListener("touchcancel",m)}addLifeTime(t){this._lifeTime+=t}addPath(t,n,r=!1){return!Ws(this)||!r&&this.pathGenerators.has(t)?!1:(this.pathGenerators.set(t,n??SX),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!Ws(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,r]of this.drawers)r.destroy&&r.destroy(this);for(const r of this.drawers.keys())this.drawers.delete(r);this._engine.plugins.destroy(this),this.destroyed=!0;const t=this._engine.dom(),n=t.findIndex(r=>r===this);n>=0&&t.splice(n,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(t){if(!Ws(this))return;let n=t;this._drawAnimationFrame=requestAnimationFrame(async r=>{n&&(this.lastFrameTime=void 0,n=!1),await this._nextFrame(r)})}async export(t,n={}){for(const[,r]of this.plugins){if(!r.export)continue;const s=await r.export(t,n);if(s.supported)return s.blob}J0().error(`${zh} - Export plugin with type ${t} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&Ws(this)}handleClickMode(t){if(Ws(this)){this.particles.handleClickMode(t);for(const[,n]of this.plugins)n.handleClickMode&&n.handleClickMode(t)}}async init(){if(!Ws(this))return;const t=this._engine.plugins.getSupportedShapes();for(const r of t){const s=this._engine.plugins.getShapeDrawer(r);s&&this.drawers.set(r,s)}this._options=Db(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Db(this._engine,this,this._options);const n=this._engine.plugins.getAvailablePlugins(this);for(const[r,s]of n)this.plugins.set(r,s);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=wi(this.actualOptions.duration)*1e3,this._delay=wi(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,r]of this.drawers)r.init&&await r.init(this);for(const[,r]of this.plugins)r.init&&await r.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,r]of this.plugins)r.particlesSetup&&r.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(t){Ws(this)&&(this._currentTheme=t,await this.refresh())}pause(){if(Ws(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,t]of this.plugins)t.pause&&t.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(t){if(!Ws(this))return;const n=this._paused||t;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),n)for(const[,r]of this.plugins)r.play&&r.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(n||!1)}async refresh(){if(Ws(this))return this.stop(),this.start()}async reset(){if(Ws(this))return this._initialSourceOptions=void 0,this._options=Db(this._engine,this),this.actualOptions=Db(this._engine,this,this._options),this.refresh()}setNoise(t,n,r){Ws(this)&&this.setPath(t,n,r)}setPath(t,n,r){if(!t||!Ws(this))return;const s={...SX};if(boe(t))s.generate=t,n&&(s.init=n),r&&(s.update=r);else{const c=s;s.generate=t.generate||c.generate,s.init=t.init||c.init,s.update=t.update||c.update}this.addPath(nGe,s,!0)}async start(){!Ws(this)||this.started||(await this.init(),this.started=!0,await new Promise(t=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,n]of this.plugins)n.start&&await n.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),t()},this._delay)}))}stop(){if(!(!Ws(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,t]of this.plugins)t.stop&&t.stop();for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const t=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===t?!1:(this.responsiveMaxWidth=t,!0)}}class iGe{constructor(){this._listeners=new Map}addEventListener(t,n){this.removeEventListener(t,n);let r=this._listeners.get(t);r||(r=[],this._listeners.set(t,r)),r.push(n)}dispatchEvent(t,n){const r=this._listeners.get(t);r&&r.forEach(s=>s(n))}hasEventListener(t){return!!this._listeners.get(t)}removeAllEventListeners(t){t?this._listeners.delete(t):this._listeners=new Map}removeEventListener(t,n){const r=this._listeners.get(t);if(!r)return;const s=r.length,c=r.indexOf(n);c<0||(s===1?this._listeners.delete(t):r.splice(c,1))}}function CF(e,t,n,r=!1){let s=t.get(e);return(!s||r)&&(s=[...n.values()].map(c=>c(e)),t.set(e,s)),s}class oGe{constructor(t){this._engine=t,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(t,n){this._initializers.interactors.set(t,n)}addParticleMover(t,n){this._initializers.movers.set(t,n)}addParticleUpdater(t,n){this._initializers.updaters.set(t,n)}addPathGenerator(t,n){!this.getPathGenerator(t)&&this.pathGenerators.set(t,n)}addPlugin(t){!this.getPlugin(t.id)&&this.plugins.push(t)}addPreset(t,n,r=!1){(r||!this.getPreset(t))&&this.presets.set(t,n)}addShapeDrawer(t,n){Ml(t,r=>{!this.getShapeDrawer(r)&&this.drawers.set(r,n)})}destroy(t){this.updaters.delete(t),this.movers.delete(t),this.interactors.delete(t)}getAvailablePlugins(t){const n=new Map;for(const r of this.plugins)r.needsPlugin(t.actualOptions)&&n.set(r.id,r.getPlugin(t));return n}getInteractors(t,n=!1){return CF(t,this.interactors,this._initializers.interactors,n)}getMovers(t,n=!1){return CF(t,this.movers,this._initializers.movers,n)}getPathGenerator(t){return this.pathGenerators.get(t)}getPlugin(t){return this.plugins.find(n=>n.id===t)}getPreset(t){return this.presets.get(t)}getShapeDrawer(t){return this.drawers.get(t)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(t,n=!1){return CF(t,this.updaters,this._initializers.updaters,n)}loadOptions(t,n){for(const r of this.plugins)r.loadOptions(t,n)}loadParticlesOptions(t,n,...r){const s=this.updaters.get(t);if(s)for(const c of s)c.loadOptions&&c.loadOptions(n,...r)}}async function sGe(e){const t=Hg(e.url,e.index);if(!t)return e.fallback;const n=await fetch(t);return n.ok?n.json():(J0().error(`${zh} ${n.status} while retrieving config file`),e.fallback)}function aGe(e){return!e.id&&!e.element&&!e.url&&!e.options}function lGe(e){return!aGe(e)}class cGe{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new iGe,this._initialized=!1,this.plugins=new oGe(this)}get configs(){const t={};for(const[n,r]of this._configs)t[n]=r;return t}get version(){return"2.12.0"}addConfig(t,n){Hf(t)?n&&(n.name=t,this._configs.set(t,n)):this._configs.set(t.name??"default",t)}addEventListener(t,n){this._eventDispatcher.addEventListener(t,n)}async addInteractor(t,n,r=!0){this.plugins.addInteractor(t,n),await this.refresh(r)}async addMover(t,n,r=!0){this.plugins.addParticleMover(t,n),await this.refresh(r)}async addParticleUpdater(t,n,r=!0){this.plugins.addParticleUpdater(t,n),await this.refresh(r)}async addPathGenerator(t,n,r=!0){this.plugins.addPathGenerator(t,n),await this.refresh(r)}async addPlugin(t,n=!0){this.plugins.addPlugin(t),await this.refresh(n)}async addPreset(t,n,r=!1,s=!0){this.plugins.addPreset(t,n,r),await this.refresh(s)}async addShape(t,n,r,s,c,d=!0){let i,m=d,x,T,C;uv(r)?(m=r,x=void 0):x=r,uv(s)?(m=s,T=void 0):T=s,uv(c)?(m=c,C=void 0):C=c,boe(n)?i={afterEffect:T,destroy:C,draw:n,init:x}:i=n,this.plugins.addShapeDrawer(t,i),await this.refresh(m)}dispatchEvent(t,n){this._eventDispatcher.dispatchEvent(t,n)}dom(){return this._domArray}domItem(t){const n=this.dom(),r=n[t];if(!r||r.destroyed){n.splice(t,1);return}return r}init(){this._initialized||(this._initialized=!0)}async load(t,n){return this.loadFromArray(t,n)}async loadFromArray(t,n,r){let s;return lGe(t)?s=t:(s={},Hf(t)?s.id=t:s.options=t,Wf(n)?s.index=n:s.options=n??s.options,s.index=r??s.index),this._loadParams(s)}async loadJSON(t,n,r){let s,c;return Wf(n)||n===void 0?s=t:(c=t,s=n),this._loadParams({id:c,url:s,index:r})}async refresh(t=!0){t&&this.dom().forEach(n=>n.refresh())}removeEventListener(t,n){this._eventDispatcher.removeEventListener(t,n)}async set(t,n,r,s){const c={index:s};return Hf(t)?c.id=t:c.element=t,n instanceof HTMLElement?c.element=n:c.options=n,Wf(r)?c.index=r:c.options=r??c.options,this._loadParams(c)}async setJSON(t,n,r,s){const c={};return t instanceof HTMLElement?(c.element=t,c.url=n,c.index=r):(c.id=t,c.element=n,c.url=r,c.index=s),this._loadParams(c)}setOnClickHandler(t){const n=this.dom();if(!n.length)throw new Error(`${zh} can only set click handlers after calling tsParticles.load()`);for(const r of n)r.addClickHandler(t)}async _loadParams(t){const n=t.id??`tsparticles${Math.floor(ks()*1e4)}`,{index:r,url:s}=t,c=s?await sGe({fallback:t.options,url:s,index:r}):t.options;let d=t.element??document.getElementById(n);d||(d=document.createElement("div"),d.id=n,document.body.append(d));const i=Hg(c,r),m=this.dom(),x=m.findIndex(A=>A.id===n);if(x>=0){const A=this.domItem(x);A&&!A.destroyed&&(A.destroy(),m.splice(x,1))}let T;if(d.tagName.toLowerCase()==="canvas")T=d,T.dataset[cT]="false";else{const A=d.getElementsByTagName("canvas");A.length?(T=A[0],T.dataset[cT]="false"):(T=document.createElement("canvas"),T.dataset[cT]="true",d.appendChild(T))}T.style.width||(T.style.width="100%"),T.style.height||(T.style.height="100%");const C=new rGe(this,n,i);return x>=0?m.splice(x,0,C):m.push(C),C.canvas.loadCanvas(T),await C.start(),C}}class uGe{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(t){const n=t.value,r=n.hsl??t.value;if(r.h!==void 0&&r.s!==void 0&&r.l!==void 0)return T1(r)}handleRangeColor(t){const n=t.value,r=n.hsl??t.value;if(r.h!==void 0&&r.l!==void 0)return T1({h:wi(r.h),l:wi(r.l),s:wi(r.s)})}parseString(t){if(!t.startsWith("hsl"))return;const n=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,r=n.exec(t);return r?ZHe({a:r.length>4?poe(r[5]):1,h:parseInt(r[1],10),l:parseInt(r[3],10),s:parseInt(r[2],10)}):void 0}}class dGe{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(t){const n=t.value,r=n.rgb??t.value;if(r.r!==void 0)return r}handleRangeColor(t){const n=t.value,r=n.rgb??t.value;if(r.r!==void 0)return{r:wi(r.r),g:wi(r.g),b:wi(r.b)}}parseString(t){if(!t.startsWith(this.stringPrefix))return;const n=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,r=n.exec(t);return r?{a:r.length>4?poe(r[5]):1,b:parseInt(r[3],10),g:parseInt(r[2],10),r:parseInt(r[1],10)}:void 0}}function hGe(){const e=new dGe,t=new uGe;mX(e),mX(t);const n=new cGe;return n.init(),n}class Tm{constructor(t){this.container=t,this.type="external"}}class J4{constructor(t){this.container=t,this.type="particles"}}const tD=hGe();S1()||(window.tsParticles=tD);const Xb=e=>typeof e=="object"&&e!==null;function nD(e,t,n=()=>!1){if(!Xb(e)||!Xb(t))return e===t;const r=Object.keys(e).filter(c=>!n(c)),s=Object.keys(t).filter(c=>!n(c));if(r.length!==s.length)return!1;for(const c of r){const d=e[c],i=t[c];if(Xb(d)&&Xb(i)){if(d===t&&i===e)continue;if(!nD(d,i,n))return!1}else if(Array.isArray(d)&&Array.isArray(i)){if(!koe(d,i,n))return!1}else if(d!==i)return!1}return!0}function koe(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],c=t[r];if(Array.isArray(s)&&Array.isArray(c)){if(!koe(s,c,n))return!1}else if(Xb(s)&&Xb(c)){if(!nD(s,c,n))return!1}else if(s!==c)return!1}return!0}const Ooe="tsparticles";let Loe=class zoe extends U.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const n=t.options??t.params,r=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!nD(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!nD(n,r,s=>s.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(tD),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:n,className:r,canvasClassName:s,id:c}=this.props;return Rt.createElement("div",{className:r,id:c},Rt.createElement("canvas",{className:s,style:{...this.props.style,width:t,height:n}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??zoe.defaultProps.id??Ooe,n=await tD.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=n),this.setState({library:n}),this.props.loaded&&await this.props.loaded(n)}};Loe.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:Ooe};class rD{static init(t){var c;const n=new rD,r=t.selector;if(!r)throw new Error("No selector provided");const s=document.querySelector(r);if(!s)throw new Error("No element found for selector");return tD.set(r.replace(".","").replace("!",""),s,{fullScreen:{enable:!1},particles:{color:{value:t.color??"!000000"},links:{color:"random",distance:t.minDistance??120,enable:t.connectParticles??!1},move:{enable:!0,speed:t.speed??.5},number:{value:t.maxParticles??100},size:{value:{min:1,max:t.sizeVariations??3}}},responsive:(c=t.responsive)==null?void 0:c.map(d=>{var i,m,x,T,C;return{maxWidth:d.breakpoint,options:{particles:{color:{value:(i=d.options)==null?void 0:i.color},links:{distance:(m=d.options)==null?void 0:m.minDistance,enable:(x=d.options)==null?void 0:x.connectParticles},number:{value:t.maxParticles},move:{enable:!0,speed:(T=d.options)==null?void 0:T.speed},size:{value:(C=d.options)==null?void 0:C.sizeVariations}}}}})}).then(d=>{n._container=d}),n}destroy(){const t=this._container;t&&t.destroy()}pauseAnimation(){const t=this._container;t&&t.pause()}resumeAnimation(){const t=this._container;t&&t.play()}}const fGe=e=>{const t=(r,s)=>e.load(r,s);t.load=(r,s,c)=>{e.loadJSON(r,s).then(d=>{d&&c(d)}).catch(()=>{c(void 0)})},t.setOnClickHandler=r=>{e.setOnClickHandler(r)};const n=e.dom();return{particlesJS:t,pJSDom:n}},pGe=e=>{const{particlesJS:t,pJSDom:n}=fGe(e);return window.particlesJS=t,window.pJSDom=n,window.Particles=rD,{particlesJS:t,pJSDom:n,Particles:rD}};function mGe(e){const t=e.initialPosition,{dx:n,dy:r}=eu(t,e.position),s=Math.abs(n),c=Math.abs(r),{maxDistance:d}=e.retina,i=d.horizontal,m=d.vertical;if(!(!i&&!m)){if((i&&s>=i||m&&c>=m)&&!e.misplaced)e.misplaced=!!i&&s>i||!!m&&c>m,i&&(e.velocity.x=e.velocity.y/2-e.velocity.x),m&&(e.velocity.y=e.velocity.x/2-e.velocity.y);else if((!i||s<i)&&(!m||c<m)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const x=e.position,T=e.velocity;i&&(x.x<t.x&&T.x<0||x.x>t.x&&T.x>0)&&(T.x*=-ks()),m&&(x.y<t.y&&T.y<0||x.y>t.y&&T.y>0)&&(T.y*=-ks())}}}function gGe(e,t,n,r,s,c){vGe(e,c);const d=e.gravity,i=d!=null&&d.enable&&d.inverse?-1:1;s&&n&&(e.velocity.x+=s*c.factor/(60*n)),d!=null&&d.enable&&n&&(e.velocity.y+=i*(d.acceleration*c.factor)/(60*n));const m=e.moveDecay;e.velocity.multTo(m);const x=e.velocity.mult(n);d!=null&&d.enable&&r>0&&(!d.inverse&&x.y>=0&&x.y>=r||d.inverse&&x.y<=0&&x.y<=-r)&&(x.y=i*r,n&&(e.velocity.y=x.y/n));const T=e.options.zIndex,C=(1-e.zIndexFactor)**T.velocityRate;x.multTo(C);const{position:A}=e;A.addTo(x),t.vibrate&&(A.x+=Math.sin(A.x*Math.cos(A.y)),A.y+=Math.cos(A.y*Math.sin(A.x)))}function yGe(e,t){const n=e.container;if(!e.spin)return;const r={x:e.spin.direction==="clockwise"?Math.cos:Math.sin,y:e.spin.direction==="clockwise"?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*r.x(e.spin.angle),e.position.y=e.spin.center.y+e.spin.radius*r.y(e.spin.angle),e.spin.radius+=e.spin.acceleration;const s=Math.max(n.canvas.size.width,n.canvas.size.height);e.spin.radius>s/2?(e.spin.radius=s/2,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=t/100*(1-e.spin.radius/s)}function vGe(e,t){var d;const n=e.options,r=n.move.path;if(!r.enable)return;if(e.lastPathTime<=e.pathDelay){e.lastPathTime+=t.value;return}const c=(d=e.pathGenerator)==null?void 0:d.generate(e,t);c&&e.velocity.addTo(c),r.clamp&&(e.velocity.x=ep(e.velocity.x,-1,1),e.velocity.y=ep(e.velocity.y,-1,1)),e.lastPathTime-=e.pathDelay}function _Ge(e){return e.slow.inRange?e.slow.factor:1}const xGe=2;class bGe{constructor(){this._initSpin=t=>{const n=t.container,r=t.options,s=r.move.spin;if(!s.enable)return;const c=s.position??{x:50,y:50},d={x:c.x/100*n.canvas.size.width,y:c.y/100*n.canvas.size.height},i=t.getPosition(),m=vd(i,d),x=wi(s.acceleration);t.retina.spinAcceleration=x*n.retina.pixelRatio,t.spin={center:d,direction:t.velocity.x>=0?"clockwise":"counter-clockwise",angle:t.velocity.angle,radius:m,acceleration:t.retina.spinAcceleration}}}init(t){const n=t.options,r=n.move.gravity;t.gravity={enable:r.enable,acceleration:wi(r.acceleration),inverse:r.inverse},this._initSpin(t)}isEnabled(t){return!t.destroyed&&t.options.move.enable}move(t,n){var k,B;const r=t.options,s=r.move;if(!s.enable)return;const c=t.container,d=c.retina.pixelRatio,i=_Ge(t),m=((k=t.retina).moveSpeed??(k.moveSpeed=wi(s.speed)*d))*c.retina.reduceFactor,x=(B=t.retina).moveDrift??(B.moveDrift=wi(t.options.move.drift)*d),T=cv(r.size.value)*d,C=s.size?t.getRadius()/T:1,A=m*C*i*(n.factor||1)/xGe,I=t.retina.maxSpeed??c.retina.maxSpeed;s.spin.enable?yGe(t,A):gGe(t,s,A,I,x,n),mGe(t)}}async function wGe(e,t=!0){await e.addMover("base",()=>new bGe,t)}class SGe{draw(t,n,r){n.circleRange||(n.circleRange={min:0,max:Math.PI*2});const s=n.circleRange;t.arc(0,0,r,s.min,s.max,!1)}getSidesCount(){return 12}particleInit(t,n){const r=n.shapeData,s=(r==null?void 0:r.angle)??{max:360,min:0};n.circleRange=Yb(s)?{min:s.min*Math.PI/180,max:s.max*Math.PI/180}:{min:0,max:s*Math.PI/180}}}async function TGe(e,t=!0){await e.addShape("circle",new SGe,t)}function MF(e,t,n,r,s){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const c=Tu(n.offset),d=(t.velocity??0)*e.factor+c*3.6,i=t.decay??1;!s||t.status==="increasing"?(t.value+=d,t.value>r&&(t.loops||(t.loops=0),t.loops++,s&&(t.status="decreasing",t.value-=t.value%r))):(t.value-=d,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&i!==1&&(t.velocity*=i),t.value>r&&(t.value%=r)}function EGe(e,t){const{h:n,s:r,l:s}=e.options.color.animation,{color:c}=e;if(!c)return;const{h:d,s:i,l:m}=c;d&&MF(t,d,n,360,!1),i&&MF(t,i,r,100,!0),m&&MF(t,m,s,100,!0)}class CGe{constructor(t){this.container=t}init(t){const n=eE(t.options.color,t.id,t.options.reduceDuplicates);n&&(t.color=Coe(n,t.options.color.animation,this.container.retina.reduceFactor))}isEnabled(t){const{h:n,s:r,l:s}=t.options.color.animation,{color:c}=t;return!t.destroyed&&!t.spawning&&((c==null?void 0:c.h.value)!==void 0&&n.enable||(c==null?void 0:c.s.value)!==void 0&&r.enable||(c==null?void 0:c.l.value)!==void 0&&s.enable)}update(t,n){EGe(t,n)}}async function MGe(e,t=!0){await e.addParticleUpdater("color",n=>new CGe(n),t)}function AGe(e,t,n,r){switch(e.options.opacity.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=n&&e.destroy();break}}function RGe(e,t){const n=e.opacity;if(e.destroyed||!(n!=null&&n.enable)||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const r=n.min,s=n.max,c=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=s?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=(n.velocity??0)*t.factor;break;case"decreasing":n.value<=r?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=(n.velocity??0)*t.factor;break}n.velocity&&n.decay!==1&&(n.velocity*=c),AGe(e,n.value,r,s),e.destroyed||(n.value=ep(n.value,r,s))}}class DGe{constructor(t){this.container=t}init(t){const n=t.options.opacity;t.opacity=_oe(n,1);const r=n.animation;r.enable&&(t.opacity.velocity=wi(r.speed)/100*this.container.retina.reduceFactor,r.sync||(t.opacity.velocity*=ks()))}isEnabled(t){return!t.destroyed&&!t.spawning&&!!t.opacity&&t.opacity.enable&&((t.opacity.maxLoops??0)<=0||(t.opacity.maxLoops??0)>0&&(t.opacity.loops??0)<(t.opacity.maxLoops??0))}reset(t){t.opacity&&(t.opacity.time=0,t.opacity.loops=0)}update(t,n){this.isEnabled(t)&&RGe(t,n)}}async function PGe(e,t=!0){await e.addParticleUpdater("opacity",n=>new DGe(n),t)}function IGe(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-horizontal"&&e.outMode!=="bounceHorizontal"&&e.outMode!=="split"||e.direction!=="left"&&e.direction!=="right")return;e.bounds.right<0&&e.direction==="left"?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&e.direction==="right"&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let n=!1;if(e.direction==="right"&&e.bounds.right>=e.canvasSize.width&&t>0||e.direction==="left"&&e.bounds.left<=0&&t<0){const s=Q0(e.particle.options.bounce.horizontal);e.particle.velocity.x*=-s,n=!0}if(!n)return;const r=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&e.direction==="right"?e.particle.position.x=e.canvasSize.width-r:e.bounds.left<=0&&e.direction==="left"&&(e.particle.position.x=r),e.outMode==="split"&&e.particle.destroy()}function kGe(e){if(e.outMode!=="bounce"&&e.outMode!=="bounce-vertical"&&e.outMode!=="bounceVertical"&&e.outMode!=="split"||e.direction!=="bottom"&&e.direction!=="top")return;e.bounds.bottom<0&&e.direction==="top"?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&e.direction==="bottom"&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let n=!1;if(e.direction==="bottom"&&e.bounds.bottom>=e.canvasSize.height&&t>0||e.direction==="top"&&e.bounds.top<=0&&t<0){const s=Q0(e.particle.options.bounce.vertical);e.particle.velocity.y*=-s,n=!0}if(!n)return;const r=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&e.direction==="bottom"?e.particle.position.y=e.canvasSize.height-r:e.bounds.top<=0&&e.direction==="top"&&(e.particle.position.y=r),e.outMode==="split"&&e.particle.destroy()}class OGe{constructor(t){this.container=t,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(t,n,r,s){if(!this.modes.includes(s))return;const c=this.container;let d=!1;for(const[,A]of c.plugins)if(A.particleBounce!==void 0&&(d=A.particleBounce(t,r,n)),d)break;if(d)return;const i=t.getPosition(),m=t.offset,x=t.getRadius(),T=ZE(i,x),C=c.canvas.size;IGe({particle:t,outMode:s,direction:n,bounds:T,canvasSize:C,offset:m,size:x}),kGe({particle:t,outMode:s,direction:n,bounds:T,canvasSize:C,offset:m,size:x})}}class LGe{constructor(t){this.container=t,this.modes=["destroy"]}update(t,n,r,s){if(!this.modes.includes(s))return;const c=this.container;switch(t.outType){case"normal":case"outside":if(X4(t.position,c.canvas.size,Cl.origin,t.getRadius(),n))return;break;case"inside":{const{dx:d,dy:i}=eu(t.position,t.moveCenter),{x:m,y:x}=t.velocity;if(m<0&&d>t.moveCenter.radius||x<0&&i>t.moveCenter.radius||m>=0&&d<-t.moveCenter.radius||x>=0&&i<-t.moveCenter.radius)return;break}}c.particles.remove(t,void 0,!0)}}class zGe{constructor(t){this.container=t,this.modes=["none"]}update(t,n,r,s){if(!this.modes.includes(s)||t.options.move.distance.horizontal&&(n==="left"||n==="right")||t.options.move.distance.vertical&&(n==="top"||n==="bottom"))return;const c=t.options.move.gravity,d=this.container,i=d.canvas.size,m=t.getRadius();if(c.enable){const x=t.position;(!c.inverse&&x.y>i.height+m&&n==="bottom"||c.inverse&&x.y<-m&&n==="top")&&d.particles.remove(t)}else{if(t.velocity.y>0&&t.position.y<=i.height+m||t.velocity.y<0&&t.position.y>=-m||t.velocity.x>0&&t.position.x<=i.width+m||t.velocity.x<0&&t.position.x>=-m)return;X4(t.position,d.canvas.size,Cl.origin,m,n)||d.particles.remove(t)}}}class FGe{constructor(t){this.container=t,this.modes=["out"]}update(t,n,r,s){if(!this.modes.includes(s))return;const c=this.container;switch(t.outType){case"inside":{const{x:d,y:i}=t.velocity,m=Cl.origin;m.length=t.moveCenter.radius,m.angle=t.velocity.angle+Math.PI,m.addTo(Cl.create(t.moveCenter));const{dx:x,dy:T}=eu(t.position,m);if(d<=0&&x>=0||i<=0&&T>=0||d>=0&&x<=0||i>=0&&T<=0)return;t.position.x=Math.floor(Tu({min:0,max:c.canvas.size.width})),t.position.y=Math.floor(Tu({min:0,max:c.canvas.size.height}));const{dx:C,dy:A}=eu(t.position,t.moveCenter);t.direction=Math.atan2(-A,-C),t.velocity.angle=t.direction;break}default:{if(X4(t.position,c.canvas.size,Cl.origin,t.getRadius(),n))return;switch(t.outType){case"outside":{t.position.x=Math.floor(Tu({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.x,t.position.y=Math.floor(Tu({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.y;const{dx:d,dy:i}=eu(t.position,t.moveCenter);t.moveCenter.radius&&(t.direction=Math.atan2(i,d),t.velocity.angle=t.direction);break}case"normal":{const d=t.options.move.warp,i=c.canvas.size,m={bottom:i.height+t.getRadius()+t.offset.y,left:-t.getRadius()-t.offset.x,right:i.width+t.getRadius()+t.offset.x,top:-t.getRadius()-t.offset.y},x=t.getRadius(),T=ZE(t.position,x);n==="right"&&T.left>i.width+t.offset.x?(t.position.x=m.left,t.initialPosition.x=t.position.x,d||(t.position.y=ks()*i.height,t.initialPosition.y=t.position.y)):n==="left"&&T.right<-t.offset.x&&(t.position.x=m.right,t.initialPosition.x=t.position.x,d||(t.position.y=ks()*i.height,t.initialPosition.y=t.position.y)),n==="bottom"&&T.top>i.height+t.offset.y?(d||(t.position.x=ks()*i.width,t.initialPosition.x=t.position.x),t.position.y=m.top,t.initialPosition.y=t.position.y):n==="top"&&T.bottom<-t.offset.y&&(d||(t.position.x=ks()*i.width,t.initialPosition.x=t.position.x),t.position.y=m.bottom,t.initialPosition.y=t.position.y);break}}break}}}}class BGe{constructor(t){this.container=t,this._updateOutMode=(n,r,s,c)=>{for(const d of this.updaters)d.update(n,c,r,s)},this.updaters=[new OGe(t),new LGe(t),new FGe(t),new zGe(t)]}init(){}isEnabled(t){return!t.destroyed&&!t.spawning}update(t,n){const r=t.options.move.outModes;this._updateOutMode(t,n,r.bottom??r.default,"bottom"),this._updateOutMode(t,n,r.left??r.default,"left"),this._updateOutMode(t,n,r.right??r.default,"right"),this._updateOutMode(t,n,r.top??r.default,"top")}}async function jGe(e,t=!0){await e.addParticleUpdater("outModes",n=>new BGe(n),t)}function NGe(e,t,n,r){switch(e.options.size.animation.destroy){case"max":t>=r&&e.destroy();break;case"min":t<=n&&e.destroy();break}}function VGe(e,t){const n=e.size;if(e.destroyed||!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const r=(n.velocity??0)*t.factor,s=n.min,c=n.max,d=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=t.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=c?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=r;break;case"decreasing":n.value<=s?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=r}n.velocity&&d!==1&&(n.velocity*=d),NGe(e,n.value,s,c),e.destroyed||(n.value=ep(n.value,s,c))}}class $Ge{init(t){const n=t.container,r=t.options.size,s=r.animation;s.enable&&(t.size.velocity=(t.retina.sizeAnimationSpeed??n.retina.sizeAnimationSpeed)/100*n.retina.reduceFactor,s.sync||(t.size.velocity*=ks()))}isEnabled(t){return!t.destroyed&&!t.spawning&&t.size.enable&&((t.size.maxLoops??0)<=0||(t.size.maxLoops??0)>0&&(t.size.loops??0)<(t.size.maxLoops??0))}reset(t){t.size.loops=0}update(t,n){this.isEnabled(t)&&VGe(t,n)}}async function UGe(e,t=!0){await e.addParticleUpdater("size",()=>new $Ge,t)}async function qGe(e,t=!0){await wGe(e,!1),await TGe(e,!1),await MGe(e,!1),await PGe(e,!1),await jGe(e,!1),await UGe(e,!1),await e.refresh(t)}async function HGe(){pF("ease-in-quad",e=>e**2),pF("ease-out-quad",e=>1-(1-e)**2),pF("ease-in-out-quad",e=>e<.5?2*e**2:1-(-2*e+2)**2/2)}class WGe{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}let GGe=class extends Tm{constructor(t,n){super(n),this._clickAttract=()=>{const r=this.container;r.attract||(r.attract={particles:[]});const{attract:s}=r;if(s.finish||(s.count||(s.count=0),s.count++,s.count===r.particles.count&&(s.finish=!0)),s.clicking){const c=r.interactivity.mouse.clickPosition,d=r.retina.attractModeDistance;if(!d||d<0||!c)return;this._processAttract(c,d,new Sc(c.x,c.y,d))}else s.clicking===!1&&(s.particles=[])},this._hoverAttract=()=>{const r=this.container,s=r.interactivity.mouse.position,c=r.retina.attractModeDistance;!c||c<0||!s||this._processAttract(s,c,new Sc(s.x,s.y,c))},this._processAttract=(r,s,c)=>{const d=this.container,i=d.actualOptions.interactivity.modes.attract;if(!i)return;const m=d.particles.quadTree.query(c,x=>this.isEnabled(x));for(const x of m){const{dx:T,dy:C,distance:A}=eu(x.position,r),I=i.speed*i.factor,k=ep(foe(i.easing)(1-A/s)*I,0,i.maxSpeed),B=Cl.create(A===0?I:T/A*k,A===0?I:C/A*k);x.position.subFrom(B)}},this._engine=t,n.attract||(n.attract={particles:[]}),this.handleClickMode=r=>{const s=this.container.actualOptions,c=s.interactivity.modes.attract;if(!(!c||r!=="attract")){n.attract||(n.attract={particles:[]}),n.attract.clicking=!0,n.attract.count=0;for(const d of n.attract.particles)this.isEnabled(d)&&d.velocity.setTo(d.initialVelocity);n.attract.particles=[],n.attract.finish=!1,setTimeout(()=>{n.destroyed||(n.attract||(n.attract={particles:[]}),n.attract.clicking=!1)},c.duration*1e3)}}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.attract;n&&(t.retina.attractModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,r=t.interactivity.status===K0,s=n.interactivity.events,c=s.onHover.enable,d=s.onHover.mode,i=s.onClick.enable,m=s.onClick.mode;r&&c&&Ea("attract",d)?this._hoverAttract():i&&Ea("attract",m)&&this._clickAttract()}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events;if((!s.position||!c.onHover.enable)&&(!s.clickPosition||!c.onClick.enable))return!1;const d=c.onHover.mode,i=c.onClick.mode;return Ea("attract",d)||Ea("attract",i)}loadModeOptions(t,...n){t.attract||(t.attract=new WGe);for(const r of n)t.attract.load(r==null?void 0:r.attract)}reset(){}};async function YGe(e,t=!0){await e.addInteractor("externalAttract",n=>new GGe(e,n),t)}class XGe{constructor(){this.distance=200}load(t){t&&t.distance!==void 0&&(this.distance=t.distance)}}class ZGe extends Tm{constructor(t){super(t),this._processBounce=(n,r,s)=>{const c=this.container.particles.quadTree.query(s,d=>this.isEnabled(d));for(const d of c)s instanceof Sc?yoe(kj(d),{position:n,mass:r**2*Math.PI/2,velocity:Cl.origin,factor:Cl.origin}):s instanceof tp&&WHe(d,ZE(n,r))},this._processMouseBounce=()=>{const n=this.container,r=n.retina.pixelRatio,s=10*r,c=n.interactivity.mouse.position,d=n.retina.bounceModeDistance;!d||d<0||!c||this._processBounce(c,d,new Sc(c.x,c.y,d+s))},this._singleSelectorBounce=(n,r)=>{const s=this.container,c=document.querySelectorAll(n);c.length&&c.forEach(d=>{const i=d,m=s.retina.pixelRatio,x={x:(i.offsetLeft+i.offsetWidth/2)*m,y:(i.offsetTop+i.offsetHeight/2)*m},T=i.offsetWidth/2*m,C=10*m,A=r.type==="circle"?new Sc(x.x,x.y,T+C):new tp(i.offsetLeft*m-C,i.offsetTop*m-C,i.offsetWidth*m+C*2,i.offsetHeight*m+C*2);this._processBounce(x,T,A)})}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.bounce;n&&(t.retina.bounceModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,r=n.interactivity.events,s=t.interactivity.status===K0,c=r.onHover.enable,d=r.onHover.mode,i=r.onDiv;s&&c&&Ea("bounce",d)?this._processMouseBounce():K4("bounce",i,(m,x)=>this._singleSelectorBounce(m,x))}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events,d=c.onDiv;return s.position&&c.onHover.enable&&Ea("bounce",c.onHover.mode)||Z4("bounce",d)}loadModeOptions(t,...n){t.bounce||(t.bounce=new XGe);for(const r of n)t.bounce.load(r==null?void 0:r.bounce)}reset(){}}async function KGe(e,t=!0){await e.addInteractor("externalBounce",n=>new ZGe(n),t)}class Foe{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(t){if(t){if(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.mix!==void 0&&(this.mix=t.mix),t.opacity!==void 0&&(this.opacity=t.opacity),t.color!==void 0){const n=_d(this.color)?void 0:this.color;this.color=Ml(t.color,r=>Wl.create(n,r))}t.size!==void 0&&(this.size=t.size)}}}class QGe extends Foe{constructor(){super(),this.selectors=[]}get ids(){return Ml(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Ml(t,n=>`#${n}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class JGe extends Foe{load(t){super.load(t),t&&(this.divs=Ml(t.divs,n=>{const r=new QGe;return r.load(n),r}))}}function TX(e,t,n,r){if(t>=n){const s=e+(t-n)*r;return ep(s,e,t)}else if(t<n){const s=e-(n-t)*r;return ep(s,t,e)}}class e9e extends Tm{constructor(t){super(t),this._clickBubble=()=>{var x;const n=this.container,r=n.actualOptions,s=n.interactivity.mouse.clickPosition,c=r.interactivity.modes.bubble;if(!c||!s)return;n.bubble||(n.bubble={});const d=n.retina.bubbleModeDistance;if(!d||d<0)return;const i=n.particles.quadTree.queryCircle(s,d,T=>this.isEnabled(T)),{bubble:m}=n;for(const T of i){if(!m.clicking)continue;T.bubble.inRange=!m.durationEnd;const C=T.getPosition(),A=vd(C,s),I=(new Date().getTime()-(n.interactivity.mouse.clickTime||0))/1e3;I>c.duration&&(m.durationEnd=!0),I>c.duration*2&&(m.clicking=!1,m.durationEnd=!1);const k={bubbleObj:{optValue:n.retina.bubbleModeSize,value:T.bubble.radius},particlesObj:{optValue:cv(T.options.size.value)*n.retina.pixelRatio,value:T.size.value},type:"size"};this._process(T,A,I,k);const B={bubbleObj:{optValue:c.opacity,value:T.bubble.opacity},particlesObj:{optValue:cv(T.options.opacity.value),value:((x=T.opacity)==null?void 0:x.value)??1},type:"opacity"};this._process(T,A,I,B),!m.durationEnd&&A<=d?this._hoverBubbleColor(T,A):delete T.bubble.color}},this._hoverBubble=()=>{const n=this.container,r=n.interactivity.mouse.position,s=n.retina.bubbleModeDistance;if(!s||s<0||r===void 0)return;const c=n.particles.quadTree.queryCircle(r,s,d=>this.isEnabled(d));for(const d of c){d.bubble.inRange=!0;const i=d.getPosition(),m=vd(i,r),x=1-m/s;m<=s?x>=0&&n.interactivity.status===K0&&(this._hoverBubbleSize(d,x),this._hoverBubbleOpacity(d,x),this._hoverBubbleColor(d,x)):this.reset(d),n.interactivity.status===Pj&&this.reset(d)}},this._hoverBubbleColor=(n,r,s)=>{const c=this.container.actualOptions,d=s??c.interactivity.modes.bubble;if(d){if(!n.bubble.finalColor){const i=d.color;if(!i)return;const m=Hg(i);n.bubble.finalColor=eE(m)}if(n.bubble.finalColor)if(d.mix){n.bubble.color=void 0;const i=n.getFillColor();n.bubble.color=i?Soe(Q4(i,n.bubble.finalColor,1-r,r)):n.bubble.finalColor}else n.bubble.color=n.bubble.finalColor}},this._hoverBubbleOpacity=(n,r,s)=>{var C,A;const c=this.container,d=c.actualOptions,i=(s==null?void 0:s.opacity)??((C=d.interactivity.modes.bubble)==null?void 0:C.opacity);if(!i)return;const m=n.options.opacity.value,x=((A=n.opacity)==null?void 0:A.value)??1,T=TX(x,i,cv(m),r);T!==void 0&&(n.bubble.opacity=T)},this._hoverBubbleSize=(n,r,s)=>{const c=this.container,d=s!=null&&s.size?s.size*c.retina.pixelRatio:c.retina.bubbleModeSize;if(d===void 0)return;const i=cv(n.options.size.value)*c.retina.pixelRatio,m=n.size.value,x=TX(m,d,i,r);x!==void 0&&(n.bubble.radius=x)},this._process=(n,r,s,c)=>{const d=this.container,i=c.bubbleObj.optValue,m=d.actualOptions,x=m.interactivity.modes.bubble;if(!x||i===void 0)return;const T=x.duration,C=d.retina.bubbleModeDistance,A=c.particlesObj.optValue,I=c.bubbleObj.value,k=c.particlesObj.value||0,B=c.type;if(!(!C||C<0||i===A))if(d.bubble||(d.bubble={}),d.bubble.durationEnd)I&&(B==="size"&&delete n.bubble.radius,B==="opacity"&&delete n.bubble.opacity);else if(r<=C){if((I??k)!==i){const V=k-s*(k-i)/T;B==="size"&&(n.bubble.radius=V),B==="opacity"&&(n.bubble.opacity=V)}}else B==="size"&&delete n.bubble.radius,B==="opacity"&&delete n.bubble.opacity},this._singleSelectorHover=(n,r,s)=>{const c=this.container,d=document.querySelectorAll(r),i=c.actualOptions.interactivity.modes.bubble;!i||!d.length||d.forEach(m=>{const x=m,T=c.retina.pixelRatio,C={x:(x.offsetLeft+x.offsetWidth/2)*T,y:(x.offsetTop+x.offsetHeight/2)*T},A=x.offsetWidth/2*T,I=s.type==="circle"?new Sc(C.x,C.y,A):new tp(x.offsetLeft*T,x.offsetTop*T,x.offsetWidth*T,x.offsetHeight*T),k=c.particles.quadTree.query(I,B=>this.isEnabled(B));for(const B of k){if(!I.contains(B.getPosition()))continue;B.bubble.inRange=!0;const j=i.divs,V=goe(j,x);(!B.bubble.div||B.bubble.div!==x)&&(this.clear(B,n,!0),B.bubble.div=x),this._hoverBubbleSize(B,1,V),this._hoverBubbleOpacity(B,1,V),this._hoverBubbleColor(B,1,V)}})},t.bubble||(t.bubble={}),this.handleClickMode=n=>{n==="bubble"&&(t.bubble||(t.bubble={}),t.bubble.clicking=!0)}}clear(t,n,r){t.bubble.inRange&&!r||(delete t.bubble.div,delete t.bubble.opacity,delete t.bubble.radius,delete t.bubble.color)}init(){const t=this.container,n=t.actualOptions.interactivity.modes.bubble;n&&(t.retina.bubbleModeDistance=n.distance*t.retina.pixelRatio,n.size!==void 0&&(t.retina.bubbleModeSize=n.size*t.retina.pixelRatio))}async interact(t){const n=this.container.actualOptions,r=n.interactivity.events,s=r.onHover,c=r.onClick,d=s.enable,i=s.mode,m=c.enable,x=c.mode,T=r.onDiv;d&&Ea("bubble",i)?this._hoverBubble():m&&Ea("bubble",x)?this._clickBubble():K4("bubble",T,(C,A)=>this._singleSelectorHover(t,C,A))}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events,{onClick:d,onDiv:i,onHover:m}=c,x=Z4("bubble",i);return x||m.enable&&s.position||d.enable&&s.clickPosition?Ea("bubble",m.mode)||Ea("bubble",d.mode)||x:!1}loadModeOptions(t,...n){t.bubble||(t.bubble=new JGe);for(const r of n)t.bubble.load(r==null?void 0:r.bubble)}reset(t){t.bubble.inRange=!1}}async function t9e(e,t=!0){await e.addInteractor("externalBubble",n=>new e9e(n),t)}class n9e{constructor(){this.opacity=.5}load(t){t&&t.opacity!==void 0&&(this.opacity=t.opacity)}}class r9e{constructor(){this.distance=80,this.links=new n9e,this.radius=60}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked),t.radius!==void 0&&(this.radius=t.radius))}}function i9e(e,t,n,r){const s=Math.floor(n.getRadius()/t.getRadius()),c=t.getFillColor(),d=n.getFillColor();if(!c||!d)return;const i=t.getPosition(),m=n.getPosition(),x=Q4(c,d,t.getRadius(),n.getRadius()),T=e.createLinearGradient(i.x,i.y,m.x,m.y);return T.addColorStop(0,tE(c,r)),T.addColorStop(s>1?1:s,Wg(x,r)),T.addColorStop(1,tE(d,r)),T}function o9e(e,t,n,r,s){uT(e,r,s),e.lineWidth=t,e.strokeStyle=n,e.stroke()}function s9e(e,t,n,r){const s=e.actualOptions,c=s.interactivity.modes.connect;if(c)return i9e(t,n,r,c.links.opacity)}function a9e(e,t,n){e.canvas.draw(r=>{const s=s9e(e,r,t,n);if(!s)return;const c=t.getPosition(),d=n.getPosition();o9e(r,t.retina.linksWidth??0,s,c,d)})}class l9e extends Tm{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.connect;n&&(t.retina.connectModeDistance=n.distance*t.retina.pixelRatio,t.retina.connectModeRadius=n.radius*t.retina.pixelRatio)}async interact(){const t=this.container;if(t.actualOptions.interactivity.events.onHover.enable&&t.interactivity.status==="pointermove"){const r=t.interactivity.mouse.position;if(!t.retina.connectModeDistance||t.retina.connectModeDistance<0||!t.retina.connectModeRadius||t.retina.connectModeRadius<0||!r)return;const s=Math.abs(t.retina.connectModeRadius),c=t.particles.quadTree.queryCircle(r,s,i=>this.isEnabled(i));let d=0;for(const i of c){const m=i.getPosition();for(const x of c.slice(d+1)){const T=x.getPosition(),C=Math.abs(t.retina.connectModeDistance),A=Math.abs(m.x-T.x),I=Math.abs(m.y-T.y);A<C&&I<C&&a9e(t,i,x)}++d}}}isEnabled(t){const n=this.container,r=n.interactivity.mouse,s=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&r.position?Ea("connect",s.onHover.mode):!1}loadModeOptions(t,...n){t.connect||(t.connect=new r9e);for(const r of n)t.connect.load(r==null?void 0:r.connect)}reset(){}}async function c9e(e,t=!0){await e.addInteractor("externalConnect",n=>new l9e(n),t)}class u9e{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(t){t&&(t.blink!==void 0&&(this.blink=t.blink),t.color!==void 0&&(this.color=Wl.create(this.color,t.color)),t.consent!==void 0&&(this.consent=t.consent),t.opacity!==void 0&&(this.opacity=t.opacity))}}class d9e{constructor(){this.distance=100,this.links=new u9e}get lineLinked(){return this.links}set lineLinked(t){this.links=t}get line_linked(){return this.links}set line_linked(t){this.links=t}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links??t.lineLinked??t.line_linked))}}function h9e(e,t,n,r,s,c){uT(e,n,r),e.strokeStyle=Wg(s,c),e.lineWidth=t,e.stroke()}function f9e(e,t,n,r,s){e.canvas.draw(c=>{const d=t.getPosition();h9e(c,t.retina.linksWidth??0,d,s,n,r)})}class p9e extends Tm{constructor(t){super(t)}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.grab;n&&(t.retina.grabModeDistance=n.distance*t.retina.pixelRatio)}async interact(){var i;const t=this.container,n=t.actualOptions,r=n.interactivity;if(!r.modes.grab||!r.events.onHover.enable||t.interactivity.status!==K0)return;const s=t.interactivity.mouse.position;if(!s)return;const c=t.retina.grabModeDistance;if(!c||c<0)return;const d=t.particles.quadTree.queryCircle(s,c,m=>this.isEnabled(m));for(const m of d){const x=m.getPosition(),T=vd(x,s);if(T>c)continue;const C=r.modes.grab.links,A=C.opacity,I=A-T*A/c;if(I<=0)continue;const k=C.color??((i=m.options.links)==null?void 0:i.color);if(!t.particles.grabLineColor&&k){const j=r.modes.grab.links;t.particles.grabLineColor=Eoe(k,j.blink,j.consent)}const B=Oj(m,void 0,t.particles.grabLineColor);B&&f9e(t,m,B,I,s)}}isEnabled(t){const n=this.container,r=n.interactivity.mouse,s=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&!!r.position&&Ea("grab",s.onHover.mode)}loadModeOptions(t,...n){t.grab||(t.grab=new d9e);for(const r of n)t.grab.load(r==null?void 0:r.grab)}reset(){}}async function m9e(e,t=!0){await e.addInteractor("externalGrab",n=>new p9e(n),t)}class g9e extends Tm{constructor(t){super(t),this.handleClickMode=n=>{if(n!=="pause")return;const r=this.container;r.getAnimationStatus()?r.pause():r.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function y9e(e,t=!0){await e.addInteractor("externalPause",n=>new g9e(n),t)}class v9e{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=co(t)}load(t){if(!t)return;t.default!==void 0&&(this.default=t.default),t.groups!==void 0&&(this.groups=t.groups.map(r=>r)),this.groups.length||(this.default=!0);const n=t.quantity??t.particles_nb;n!==void 0&&(this.quantity=co(n))}}class _9e extends Tm{constructor(t){super(t),this.handleClickMode=n=>{if(n!=="push")return;const r=this.container,s=r.actualOptions,c=s.interactivity.modes.push;if(!c)return;const d=wi(c.quantity);if(d<=0)return;const i=qP([void 0,...c.groups]),m=i!==void 0?r.actualOptions.particles.groups[i]:void 0;r.particles.push(d,r.interactivity.mouse,m,i)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...n){t.push||(t.push=new v9e);for(const r of n)t.push.load(r==null?void 0:r.push)}reset(){}}async function x9e(e,t=!0){await e.addInteractor("externalPush",n=>new _9e(n),t)}class b9e{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(t){this.quantity=co(t)}load(t){if(!t)return;const n=t.quantity??t.particles_nb;n!==void 0&&(this.quantity=co(n))}}class w9e extends Tm{constructor(t){super(t),this.handleClickMode=n=>{const r=this.container,s=r.actualOptions;if(!s.interactivity.modes.remove||n!=="remove")return;const c=wi(s.interactivity.modes.remove.quantity);r.particles.removeQuantity(c)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(t,...n){t.remove||(t.remove=new b9e);for(const r of n)t.remove.load(r==null?void 0:r.remove)}reset(){}}async function S9e(e,t=!0){await e.addInteractor("externalRemove",n=>new w9e(n),t)}class Boe{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(t){t&&(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.speed!==void 0&&(this.speed=t.speed),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed))}}class T9e extends Boe{constructor(){super(),this.selectors=[]}get ids(){return Ml(this.selectors,t=>t.replace("#",""))}set ids(t){this.selectors=Ml(t,n=>`#${n}`)}load(t){super.load(t),t&&(t.ids!==void 0&&(this.ids=t.ids),t.selectors!==void 0&&(this.selectors=t.selectors))}}class E9e extends Boe{load(t){super.load(t),t&&(this.divs=Ml(t.divs,n=>{const r=new T9e;return r.load(n),r}))}}class C9e extends Tm{constructor(t,n){super(n),this._clickRepulse=()=>{const r=this.container,s=r.actualOptions.interactivity.modes.repulse;if(!s)return;const c=r.repulse||{particles:[]};if(c.finish||(c.count||(c.count=0),c.count++,c.count===r.particles.count&&(c.finish=!0)),c.clicking){const d=r.retina.repulseModeDistance;if(!d||d<0)return;const i=Math.pow(d/6,3),m=r.interactivity.mouse.clickPosition;if(m===void 0)return;const x=new Sc(m.x,m.y,i),T=r.particles.quadTree.query(x,C=>this.isEnabled(C));for(const C of T){const{dx:A,dy:I,distance:k}=eu(m,C.position),B=k**2,j=s.speed,V=-i*j/B;if(B<=i){c.particles.push(C);const H=Cl.create(A,I);H.length=V,C.velocity.setTo(H)}}}else if(c.clicking===!1){for(const d of c.particles)d.velocity.setTo(d.initialVelocity);c.particles=[]}},this._hoverRepulse=()=>{const r=this.container,s=r.interactivity.mouse.position,c=r.retina.repulseModeDistance;!c||c<0||!s||this._processRepulse(s,c,new Sc(s.x,s.y,c))},this._processRepulse=(r,s,c,d)=>{const i=this.container,m=i.particles.quadTree.query(c,T=>this.isEnabled(T)),x=i.actualOptions.interactivity.modes.repulse;if(x)for(const T of m){const{dx:C,dy:A,distance:I}=eu(T.position,r),k=((d==null?void 0:d.speed)??x.speed)*x.factor,B=ep(foe(x.easing)(1-I/s)*k,0,x.maxSpeed),j=Cl.create(I===0?k:C/I*B,I===0?k:A/I*B);T.position.addTo(j)}},this._singleSelectorRepulse=(r,s)=>{const c=this.container,d=c.actualOptions.interactivity.modes.repulse;if(!d)return;const i=document.querySelectorAll(r);i.length&&i.forEach(m=>{const x=m,T=c.retina.pixelRatio,C={x:(x.offsetLeft+x.offsetWidth/2)*T,y:(x.offsetTop+x.offsetHeight/2)*T},A=x.offsetWidth/2*T,I=s.type==="circle"?new Sc(C.x,C.y,A):new tp(x.offsetLeft*T,x.offsetTop*T,x.offsetWidth*T,x.offsetHeight*T),k=d.divs,B=goe(k,x);this._processRepulse(C,A,I,B)})},this._engine=t,n.repulse||(n.repulse={particles:[]}),this.handleClickMode=r=>{const s=this.container.actualOptions,c=s.interactivity.modes.repulse;if(!c||r!=="repulse")return;n.repulse||(n.repulse={particles:[]});const d=n.repulse;d.clicking=!0,d.count=0;for(const i of n.repulse.particles)this.isEnabled(i)&&i.velocity.setTo(i.initialVelocity);d.particles=[],d.finish=!1,setTimeout(()=>{n.destroyed||(d.clicking=!1)},c.duration*1e3)}}clear(){}init(){const t=this.container,n=t.actualOptions.interactivity.modes.repulse;n&&(t.retina.repulseModeDistance=n.distance*t.retina.pixelRatio)}async interact(){const t=this.container,n=t.actualOptions,r=t.interactivity.status===K0,s=n.interactivity.events,c=s.onHover,d=c.enable,i=c.mode,m=s.onClick,x=m.enable,T=m.mode,C=s.onDiv;r&&d&&Ea("repulse",i)?this._hoverRepulse():x&&Ea("repulse",T)?this._clickRepulse():K4("repulse",C,(A,I)=>this._singleSelectorRepulse(A,I))}isEnabled(t){const n=this.container,r=n.actualOptions,s=n.interactivity.mouse,c=((t==null?void 0:t.interactivity)??r.interactivity).events,d=c.onDiv,i=c.onHover,m=c.onClick,x=Z4("repulse",d);if(!(x||i.enable&&s.position||m.enable&&s.clickPosition))return!1;const T=i.mode,C=m.mode;return Ea("repulse",T)||Ea("repulse",C)||x}loadModeOptions(t,...n){t.repulse||(t.repulse=new E9e);for(const r of n)t.repulse.load(r==null?void 0:r.repulse)}reset(){}}async function M9e(e,t=!0){await e.addInteractor("externalRepulse",n=>new C9e(e,n),t)}class A9e{constructor(){this.factor=3,this.radius=200}load(t){t&&(t.factor!==void 0&&(this.factor=t.factor),t.radius!==void 0&&(this.radius=t.radius))}}class R9e extends Tm{constructor(t){super(t)}clear(t,n,r){t.slow.inRange&&!r||(t.slow.factor=1)}init(){const t=this.container,n=t.actualOptions.interactivity.modes.slow;n&&(t.retina.slowModeRadius=n.radius*t.retina.pixelRatio)}async interact(){}isEnabled(t){const n=this.container,r=n.interactivity.mouse,s=((t==null?void 0:t.interactivity)??n.actualOptions.interactivity).events;return s.onHover.enable&&!!r.position&&Ea("slow",s.onHover.mode)}loadModeOptions(t,...n){t.slow||(t.slow=new A9e);for(const r of n)t.slow.load(r==null?void 0:r.slow)}reset(t){t.slow.inRange=!1;const n=this.container,r=n.actualOptions,s=n.interactivity.mouse.position,c=n.retina.slowModeRadius,d=r.interactivity.modes.slow;if(!d||!c||c<0||!s)return;const i=t.getPosition(),m=vd(s,i),x=m/c,T=d.factor,{slow:C}=t;m>c||(C.inRange=!0,C.factor=x/T)}}async function D9e(e,t=!0){await e.addInteractor("externalSlow",n=>new R9e(n),t)}const AF=[0,4,2,1],EX=[8,8,4,2];class P9e{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t)}getString(t){const n=this.data.slice(this.pos,this.pos+t);return this.pos+=n.length,n.reduce((r,s)=>r+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let t="",n=0;do{n=this.data[this.pos++];for(let r=n;--r>=0;t+=String.fromCharCode(this.data[this.pos++]));}while(n!==0);return t}readSubBlocksBin(){let t=0,n=0;for(let s=0;(t=this.data[this.pos+s])!==0;s+=t+1)n+=t;const r=new Uint8Array(n);for(let s=0;(t=this.data[this.pos++])!==0;)for(let c=t;--c>=0;r[s++]=this.data[this.pos++]);return r}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function joe(e,t){const n=[];for(let r=0;r<t;r++)n.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return n}async function I9e(e,t,n,r){switch(e.nextByte()){case 249:{const s=t.frames[n(!1)];e.pos++;const c=e.nextByte();s.GCreserved=(c&224)>>>5,s.disposalMethod=(c&28)>>>2,s.userInputDelayFlag=(c&2)===2;const d=(c&1)===1;s.delayTime=e.nextTwoBytes()*10;const i=e.nextByte();d&&r(i),e.pos++;break}case 255:{e.pos++;const s={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(s);break}case 254:{t.comments.push([n(!1),e.readSubBlocks()]);break}case 1:{if(t.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[n(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break}default:e.skipSubBlocks();break}}async function k9e(e,t,n,r,s,c){const d=t.frames[r(!0)];d.left=e.nextTwoBytes(),d.top=e.nextTwoBytes(),d.width=e.nextTwoBytes(),d.height=e.nextTwoBytes();const i=e.nextByte(),m=(i&128)===128,x=(i&64)===64;d.sortFlag=(i&32)===32,d.reserved=(i&24)>>>3;const T=1<<(i&7)+1;m&&(d.localColorTable=joe(e,T));const C=V=>{const{r:H,g:G,b:X}=(m?d.localColorTable:t.globalColorTable)[V];return{r:H,g:G,b:X,a:V===s(null)?n?~~((H+G+X)/3):0:255}},A=(()=>{try{return new ImageData(d.width,d.height,{colorSpace:"srgb"})}catch(V){if(V instanceof DOMException&&V.name==="IndexSizeError")return null;throw V}})();if(A==null)throw new EvalError("GIF frame size is to large");const I=e.nextByte(),k=e.readSubBlocksBin(),B=1<<I,j=(V,H)=>{const G=V>>>3,X=V&7;return(k[G]+(k[G+1]<<8)+(k[G+2]<<16)&(1<<H)-1<<X)>>>X};if(x){for(let V=0,H=I+1,G=0,X=[[0]],Q=0;Q<4;Q++)if(AF[Q]<d.height)for(let ee=0,ce=0;;){const fe=V;if(V=j(G,H),G+=H+1,V===B){H=I+1,X.length=B+2;for(let ue=0;ue<X.length;ue++)X[ue]=ue<B?[ue]:[]}else{V>=X.length?X.push(X[fe].concat(X[fe][0])):fe!==B&&X.push(X[fe].concat(X[V][0]));for(let ue=0;ue<X[V].length;ue++){const{r:ae,g:xe,b:we,a:Me}=C(X[V][ue]);A.data.set([ae,xe,we,Me],AF[Q]*d.width+EX[Q]*ce+ee%(d.width*4)),ee+=4}X.length===1<<H&&H<12&&H++}if(ee===d.width*4*(ce+1)&&(ce++,AF[Q]+EX[Q]*ce>=d.height))break}d.image=A,d.bitmap=await createImageBitmap(A)}else{for(let V=0,H=I+1,G=0,X=[[0]],Q=-4;;){const ee=V;if(V=j(G,H),G+=H,V===B){H=I+1,X.length=B+2;for(let ce=0;ce<X.length;ce++)X[ce]=ce<B?[ce]:[]}else{if(V===B+1)break;V>=X.length?X.push(X[ee].concat(X[ee][0])):ee!==B&&X.push(X[ee].concat(X[V][0]));for(let ce=0;ce<X[V].length;ce++){const{r:fe,g:ue,b:ae,a:xe}=C(X[V][ce]);A.data.set([fe,ue,ae,xe],Q+=4)}X.length>=1<<H&&H<12&&H++}}d.image=A,d.bitmap=await createImageBitmap(A)}}async function O9e(e,t,n,r,s,c){switch(e.nextByte()){case 59:return!0;case 44:await k9e(e,t,n,r,s);break;case 33:await I9e(e,t,r,s);break;default:throw new EvalError("undefined block found")}return!1}function L9e(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}async function z9e(e,t,n){n||(n=!1);const r=await fetch(e);if(!r.ok&&r.status===404)throw new EvalError("file not found");const s=await r.arrayBuffer(),c={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},d=new P9e(new Uint8ClampedArray(s));if(d.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");c.width=d.nextTwoBytes(),c.height=d.nextTwoBytes();const i=d.nextByte(),m=(i&128)===128;c.colorRes=(i&112)>>>4,c.sortFlag=(i&8)===8;const x=1<<(i&7)+1,T=d.nextByte();c.pixelAspectRatio=d.nextByte(),c.pixelAspectRatio!==0&&(c.pixelAspectRatio=(c.pixelAspectRatio+15)/64),m&&(c.globalColorTable=joe(d,x));const C=(()=>{try{return new ImageData(c.width,c.height,{colorSpace:"srgb"})}catch(X){if(X instanceof DOMException&&X.name==="IndexSizeError")return null;throw X}})();if(C==null)throw new Error("GIF frame size is to large");const{r:A,g:I,b:k}=c.globalColorTable[T];C.data.set(m?[A,I,k,255]:[0,0,0,0]);for(let X=4;X<C.data.length;X*=2)C.data.copyWithin(X,0,X);c.backgroundImage=C;let B=-1,j=!0,V=-1;const H=X=>(X&&(j=!0),B),G=X=>(X!=null&&(V=X),V);try{do j&&(c.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),B++,V=-1,j=!1);while(!await O9e(d,c,n,H,G,t));c.frames.length--;for(const X of c.frames){if(X.userInputDelayFlag&&X.delayTime===0){c.totalTime=1/0;break}c.totalTime+=X.delayTime}return c}catch(X){throw X instanceof EvalError?new Error(`error while parsing frame ${B} "${X.message}"`):X}}const F9e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function B9e(e,t,n){const{svgData:r}=e;if(!r)return"";const s=tE(t,n);if(r.includes("fill"))return r.replace(F9e,()=>s);const c=r.indexOf(">");return`${r.substring(0,c)} fill="${s}"${r.substring(c)}`}async function WP(e){return new Promise(t=>{e.loading=!0;const n=new Image;e.element=n,n.addEventListener("load",()=>{e.loading=!1,t()}),n.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,J0().error(`${zh} loading image: ${e.source}`),t()}),n.src=e.source})}async function j9e(e){if(e.type!=="gif"){await WP(e);return}e.loading=!0;try{e.gifData=await z9e(e.source),e.gifLoopCount=L9e(e.gifData)??0,e.gifLoopCount===0&&(e.gifLoopCount=1/0)}catch{e.error=!0}e.loading=!1}async function N9e(e){if(e.type!=="svg"){await WP(e);return}e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(J0().error(`${zh} Image not found`),e.error=!0),e.loading=!1}function V9e(e,t,n,r){var d;const s=B9e(e,n,((d=r.opacity)==null?void 0:d.value)??1),c={color:n,gif:t.gif,data:{...e,svgData:s},loaded:!1,ratio:t.width/t.height,replaceColor:t.replaceColor??t.replace_color,source:t.src};return new Promise(i=>{const m=new Blob([s],{type:"image/svg+xml"}),x=URL||window.URL||window.webkitURL||window,T=x.createObjectURL(m),C=new Image;C.addEventListener("load",()=>{c.loaded=!0,c.element=C,i(c),x.revokeObjectURL(T)}),C.addEventListener("error",async()=>{x.revokeObjectURL(T);const A={...e,error:!1,loading:!0};await WP(A),c.loaded=!0,c.element=A.element,i(c)}),C.src=T})}class $9e{constructor(t){this.loadImageShape=async n=>{if(!this._engine.loadImage)throw new Error(`${zh} image shape not initialized`);await this._engine.loadImage({gif:n.gif,name:n.name,replaceColor:n.replaceColor??n.replace_color??!1,src:n.src})},this._engine=t}addImage(t){this._engine.images||(this._engine.images=[]),this._engine.images.push(t)}draw(t,n,r,s,c){const d=n.image,i=d==null?void 0:d.element;if(d){if(t.globalAlpha=s,d.gif&&d.gifData){const m=new OffscreenCanvas(d.gifData.width,d.gifData.height),x=m.getContext("2d");if(!x)throw new Error("could not create offscreen canvas context");x.imageSmoothingQuality="low",x.imageSmoothingEnabled=!1,x.clearRect(0,0,m.width,m.height),n.gifLoopCount===void 0&&(n.gifLoopCount=d.gifLoopCount??0);let T=n.gifFrame??0;const C={x:-d.gifData.width*.5,y:-d.gifData.height*.5},A=d.gifData.frames[T];if(n.gifTime===void 0&&(n.gifTime=0),!A.bitmap)return;switch(t.scale(r/d.gifData.width,r/d.gifData.height),A.disposalMethod){case 4:case 5:case 6:case 7:case 0:x.drawImage(A.bitmap,A.left,A.top),t.drawImage(m,C.x,C.y),x.clearRect(0,0,m.width,m.height);break;case 1:x.drawImage(A.bitmap,A.left,A.top),t.drawImage(m,C.x,C.y);break;case 2:x.drawImage(A.bitmap,A.left,A.top),t.drawImage(m,C.x,C.y),x.clearRect(0,0,m.width,m.height),d.gifData.globalColorTable.length===0?x.putImageData(d.gifData.frames[0].image,C.x+A.left,C.y+A.top):x.putImageData(d.gifData.backgroundImage,C.x,C.y);break;case 3:{const I=x.getImageData(0,0,m.width,m.height);x.drawImage(A.bitmap,A.left,A.top),t.drawImage(m,C.x,C.y),x.clearRect(0,0,m.width,m.height),x.putImageData(I,0,0)}break}if(n.gifTime+=c.value,n.gifTime>A.delayTime){if(n.gifTime-=A.delayTime,++T>=d.gifData.frames.length){if(--n.gifLoopCount<=0)return;T=0,x.clearRect(0,0,m.width,m.height)}n.gifFrame=T}t.scale(d.gifData.width/r,d.gifData.height/r)}else if(i){const m=d.ratio,x={x:-r,y:-r};t.drawImage(i,x.x,x.y,r*2,r*2/m)}t.globalAlpha=1}}getSidesCount(){return 12}async init(t){const n=t.actualOptions;if(!(!n.preload||!this._engine.loadImage))for(const r of n.preload)await this._engine.loadImage(r)}loadShape(t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const n=t.shapeData;this._engine.images.find(s=>s.name===n.name||s.source===n.src)||this.loadImageShape(n).then(()=>{this.loadShape(t)})}particleInit(t,n){if(n.shape!=="image"&&n.shape!=="images")return;this._engine.images||(this._engine.images=[]);const r=this._engine.images,s=n.shapeData,c=n.getFillColor(),d=r.find(m=>m.name===s.name||m.source===s.src);if(!d)return;const i=s.replaceColor??s.replace_color??d.replaceColor;if(d.loading){setTimeout(()=>{this.particleInit(t,n)});return}(async()=>{let m;d.svgData&&c?m=await V9e(d,s,c,n):m={color:c,data:d,element:d.element,gif:d.gif,gifData:d.gifData,gifLoopCount:d.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:d.ratio??1,replaceColor:i,source:s.src},m.ratio||(m.ratio=1);const x=s.fill??n.fill,T=s.close??n.close,C={image:m,fill:x,close:T};n.image=C.image,n.fill=C.fill,n.close=C.close})()}}class U9e{constructor(){this.src="",this.gif=!1}load(t){t&&(t.gif!==void 0&&(this.gif=t.gif),t.height!==void 0&&(this.height=t.height),t.name!==void 0&&(this.name=t.name),t.replaceColor!==void 0&&(this.replaceColor=t.replaceColor),t.src!==void 0&&(this.src=t.src),t.width!==void 0&&(this.width=t.width))}}class q9e{constructor(t){this.id="imagePreloader",this._engine=t}getPlugin(){return{}}loadOptions(t,n){if(!n||!n.preload)return;t.preload||(t.preload=[]);const r=t.preload;for(const s of n.preload){const c=r.find(d=>d.name===s.name||d.src===s.src);if(c)c.load(s);else{const d=new U9e;d.load(s),r.push(d)}}}needsPlugin(){return!0}}function H9e(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error(`${zh} no image source provided`);if(e.images||(e.images=[]),!e.images.find(n=>n.name===t.name||n.source===t.src))try{const n={gif:t.gif??!1,name:t.name??t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};e.images.push(n),await(t.gif?j9e:t.replaceColor?N9e:WP)(n)}catch{throw new Error(`${zh} ${t.name??t.src} not found`)}})}async function W9e(e,t=!0){H9e(e);const n=new q9e(e);await e.addPlugin(n,t),await e.addShape(["image","images"],new $9e(e),t)}class G9e extends Bv{constructor(){super(),this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class Y9e extends Bv{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(t){t&&(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class X9e{constructor(){this.count=0,this.delay=new G9e,this.duration=new Y9e}load(t){t&&(t.count!==void 0&&(this.count=t.count),this.delay.load(t.delay),this.duration.load(t.duration))}}class Z9e{constructor(t){this.container=t}init(t){const n=this.container,r=t.options,s=r.life;s&&(t.life={delay:n.retina.reduceFactor?wi(s.delay.value)*(s.delay.sync?1:ks())/n.retina.reduceFactor*1e3:0,delayTime:0,duration:n.retina.reduceFactor?wi(s.duration.value)*(s.duration.sync?1:ks())/n.retina.reduceFactor*1e3:0,time:0,count:s.count},t.life.duration<=0&&(t.life.duration=-1),t.life.count<=0&&(t.life.count=-1),t.life&&(t.spawning=t.life.delay>0))}isEnabled(t){return!t.destroyed}loadOptions(t,...n){t.life||(t.life=new X9e);for(const r of n)t.life.load(r==null?void 0:r.life)}update(t,n){if(!this.isEnabled(t)||!t.life)return;const r=t.life;let s=!1;if(t.spawning)if(r.delayTime+=n.value,r.delayTime>=t.life.delay)s=!0,t.spawning=!1,r.delayTime=0,r.time=0;else return;if(r.duration===-1||t.spawning||(s?r.time=0:r.time+=n.value,r.time<r.duration))return;if(r.time=0,t.life.count>0&&t.life.count--,t.life.count===0){t.destroy();return}const c=this.container.canvas.size,d=co(0,c.width),i=co(0,c.width);t.position.x=Tu(d),t.position.y=Tu(i),t.spawning=!0,r.delayTime=0,r.time=0,t.reset();const m=t.options.life;m&&(r.delay=wi(m.delay.value)*1e3,r.duration=wi(m.duration.value)*1e3)}}async function K9e(e,t=!0){await e.addParticleUpdater("life",n=>new Z9e(n),t)}class Q9e{draw(t,n,r){const s=n.shapeData;t.moveTo(-r/2,0),t.lineTo(r/2,0),t.lineCap=(s==null?void 0:s.cap)??"butt"}getSidesCount(){return 1}}async function J9e(e,t=!0){await e.addShape("line",new Q9e,t)}class e7e{init(){}isEnabled(t){return!S1()&&!t.destroyed&&t.container.actualOptions.interactivity.events.onHover.parallax.enable}move(t){const n=t.container,r=n.actualOptions,s=r.interactivity.events.onHover.parallax;if(S1()||!s.enable)return;const c=s.force,d=n.interactivity.mouse.position;if(!d)return;const i=n.canvas.size,m={x:i.width/2,y:i.height/2},x=s.smooth,T=t.getRadius()/c,C={x:(d.x-m.x)*T,y:(d.y-m.y)*T},{offset:A}=t;A.x+=(C.x-A.x)/x,A.y+=(C.y-A.y)/x}}async function t7e(e,t=!0){await e.addMover("parallax",()=>new e7e,t)}class n7e extends J4{constructor(t){super(t)}clear(){}init(){}async interact(t){const n=this.container,r=t.retina.attractDistance??n.retina.attractDistance,s=t.getPosition(),c=n.particles.quadTree.queryCircle(s,r);for(const d of c){if(t===d||!d.options.move.attract.enable||d.destroyed||d.spawning)continue;const i=d.getPosition(),{dx:m,dy:x}=eu(s,i),T=t.options.move.attract.rotate,C=m/(T.x*1e3),A=x/(T.y*1e3),I=d.size.value/t.size.value,k=1/I;t.velocity.x-=C*I,t.velocity.y-=A*I,d.velocity.x+=C*k,d.velocity.y+=A*k}}isEnabled(t){return t.options.move.attract.enable}reset(){}}async function r7e(e,t=!0){await e.addInteractor("particlesAttract",n=>new n7e(n),t)}function CX(e,t,n,r,s,c){const d=ep(e.options.collisions.absorb.speed*s.factor/10,0,r);e.size.value+=d/2,n.size.value-=d,r<=c&&(n.size.value=0,n.destroy())}function i7e(e,t,n,r){const s=e.getRadius(),c=t.getRadius();s===void 0&&c!==void 0?e.destroy():s!==void 0&&c===void 0?t.destroy():s!==void 0&&c!==void 0&&(s>=c?CX(e,s,t,c,n,r):CX(t,c,e,s,n,r))}const MX=e=>{e.collisionMaxSpeed===void 0&&(e.collisionMaxSpeed=wi(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function Noe(e,t){yoe(kj(e),kj(t)),MX(e),MX(t)}function o7e(e,t){!e.unbreakable&&!t.unbreakable&&Noe(e,t),e.getRadius()===void 0&&t.getRadius()!==void 0?e.destroy():e.getRadius()!==void 0&&t.getRadius()===void 0?t.destroy():e.getRadius()!==void 0&&t.getRadius()!==void 0&&(e.getRadius()>=t.getRadius()?t:e).destroy()}function s7e(e,t,n,r){switch(e.options.collisions.mode){case"absorb":{i7e(e,t,n,r);break}case"bounce":{Noe(e,t);break}case"destroy":{o7e(e,t);break}}}class a7e extends J4{constructor(t){super(t)}clear(){}init(){}async interact(t,n){if(t.destroyed||t.spawning)return;const r=this.container,s=t.getPosition(),c=t.getRadius(),d=r.particles.quadTree.queryCircle(s,c*2);for(const i of d){if(t===i||!i.options.collisions.enable||t.options.collisions.mode!==i.options.collisions.mode||i.destroyed||i.spawning)continue;const m=i.getPosition(),x=i.getRadius();if(Math.abs(Math.round(s.z)-Math.round(m.z))>c+x)continue;const T=vd(s,m),C=c+x;T>C||s7e(t,i,n,r.retina.pixelRatio)}}isEnabled(t){return t.options.collisions.enable}reset(){}}async function l7e(e,t=!0){await e.addInteractor("particlesCollisions",n=>new a7e(n),t)}class c7e extends Sc{constructor(t,n,r,s){super(t,n,r),this.canvasSize=s,this.canvasSize={...s}}contains(t){const{width:n,height:r}=this.canvasSize,{x:s,y:c}=t;return super.contains(t)||super.contains({x:s-n,y:c})||super.contains({x:s-n,y:c-r})||super.contains({x:s,y:c-r})}intersects(t){if(super.intersects(t))return!0;const n=t,r=t,s={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(r.radius!==void 0){const c=new Sc(s.x,s.y,r.radius*2);return super.intersects(c)}else if(n.size!==void 0){const c=new tp(s.x,s.y,n.size.width*2,n.size.height*2);return super.intersects(c)}return!1}}class u7e{constructor(){this.blur=5,this.color=new Wl,this.color.value="#000",this.enable=!1}load(t){t&&(t.blur!==void 0&&(this.blur=t.blur),this.color=Wl.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable))}}class d7e{constructor(){this.enable=!1,this.frequency=1}load(t){t&&(t.color!==void 0&&(this.color=Wl.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity))}}class h7e{constructor(){this.blink=!1,this.color=new Wl,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new u7e,this.triangles=new d7e,this.width=1,this.warp=!1}load(t){t&&(t.id!==void 0&&(this.id=t.id),t.blink!==void 0&&(this.blink=t.blink),this.color=Wl.create(this.color,t.color),t.consent!==void 0&&(this.consent=t.consent),t.distance!==void 0&&(this.distance=t.distance),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),t.width!==void 0&&(this.width=t.width),t.warp!==void 0&&(this.warp=t.warp))}}function f7e(e,t,n,r,s){const{dx:c,dy:d,distance:i}=eu(e,t);if(!s||i<=n)return i;const m={x:Math.abs(c),y:Math.abs(d)},x={x:Math.min(m.x,r.width-m.x),y:Math.min(m.y,r.height-m.y)};return Math.sqrt(x.x**2+x.y**2)}class p7e extends J4{constructor(t){super(t),this._setColor=n=>{if(!n.options.links)return;const r=this.linkContainer,s=n.options.links;let c=s.id===void 0?r.particles.linksColor:r.particles.linksColors.get(s.id);if(c)return;const d=s.color;c=Eoe(d,s.blink,s.consent),s.id===void 0?r.particles.linksColor=c:r.particles.linksColors.set(s.id,c)},this.linkContainer=t}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(t){if(!t.options.links)return;t.links=[];const n=t.getPosition(),r=this.container,s=r.canvas.size;if(n.x<0||n.y<0||n.x>s.width||n.y>s.height)return;const c=t.options.links,d=c.opacity,i=t.retina.linksDistance??0,m=c.warp,x=m?new c7e(n.x,n.y,i,s):new Sc(n.x,n.y,i),T=r.particles.quadTree.query(x);for(const C of T){const A=C.options.links;if(t===C||!(A!=null&&A.enable)||c.id!==A.id||C.spawning||C.destroyed||!C.links||t.links.some(j=>j.destination===C)||C.links.some(j=>j.destination===t))continue;const I=C.getPosition();if(I.x<0||I.y<0||I.x>s.width||I.y>s.height)continue;const k=f7e(n,I,i,s,m&&A.warp);if(k>i)continue;const B=(1-k/i)*d;this._setColor(t),t.links.push({destination:C,opacity:B})}}isEnabled(t){var n;return!!((n=t.options.links)!=null&&n.enable)}loadParticlesOptions(t,...n){t.links||(t.links=new h7e);for(const r of n)t.links.load((r==null?void 0:r.links)??(r==null?void 0:r.lineLinked)??(r==null?void 0:r.line_linked))}reset(){}}async function m7e(e,t=!0){await e.addInteractor("particlesLinks",n=>new p7e(n),t)}function g7e(e){let t=!1;const{begin:n,end:r,maxDistance:s,context:c,canvasSize:d,width:i,backgroundMask:m,colorLine:x,opacity:T,links:C}=e;if(vd(n,r)<=s)uT(c,n,r),t=!0;else if(C.warp){let I,k;const B={x:r.x-d.width,y:r.y},j=eu(n,B);if(j.distance<=s){const V=n.y-j.dy/j.dx*n.x;I={x:0,y:V},k={x:d.width,y:V}}else{const V={x:r.x,y:r.y-d.height},H=eu(n,V);if(H.distance<=s){const X=-(n.y-H.dy/H.dx*n.x)/(H.dy/H.dx);I={x:X,y:0},k={x:X,y:d.height}}else{const G={x:r.x-d.width,y:r.y-d.height},X=eu(n,G);if(X.distance<=s){const Q=n.y-X.dy/X.dx*n.x;I={x:-Q/(X.dy/X.dx),y:Q},k={x:I.x+d.width,y:I.y+d.height}}}}I&&k&&(uT(c,n,I),uT(c,r,k),t=!0)}if(!t)return;c.lineWidth=i,m.enable&&(c.globalCompositeOperation=m.composite),c.strokeStyle=Wg(x,T);const{shadow:A}=C;if(A.enable){const I=Gf(A.color);I&&(c.shadowBlur=A.blur,c.shadowColor=Wg(I))}c.stroke()}function y7e(e){const{context:t,pos1:n,pos2:r,pos3:s,backgroundMask:c,colorTriangle:d,opacityTriangle:i}=e;KHe(t,n,r,s),c.enable&&(t.globalCompositeOperation=c.composite),t.fillStyle=Wg(d,i),t.fill()}function v7e(e){return e.sort((t,n)=>t-n),e.join("_")}function AX(e,t){const n=v7e(e.map(s=>s.id));let r=t.get(n);return r===void 0&&(r=ks(),t.set(n,r)),r}class _7e{constructor(t){this.container=t,this._drawLinkLine=(n,r)=>{const s=n.options.links;if(!(s!=null&&s.enable))return;const c=this.container,d=c.actualOptions,i=r.destination,m=n.getPosition(),x=i.getPosition();let T=r.opacity;c.canvas.draw(C=>{var V;let A;const I=(V=n.options.twinkle)==null?void 0:V.lines;if(I!=null&&I.enable){const H=I.frequency,G=Gf(I.color);ks()<H&&G&&(A=G,T=wi(I.opacity))}if(!A){const H=s.id!==void 0?c.particles.linksColors.get(s.id):c.particles.linksColor;A=Oj(n,i,H)}if(!A)return;const k=n.retina.linksWidth??0,B=n.retina.linksDistance??0,{backgroundMask:j}=d;g7e({context:C,width:k,begin:m,end:x,maxDistance:B,canvasSize:c.canvas.size,links:s,backgroundMask:j,colorLine:A,opacity:T})})},this._drawLinkTriangle=(n,r,s)=>{const c=n.options.links;if(!(c!=null&&c.enable))return;const d=c.triangles;if(!d.enable)return;const i=this.container,m=i.actualOptions,x=r.destination,T=s.destination,C=d.opacity??(r.opacity+s.opacity)/2;C<=0||i.canvas.draw(A=>{const I=n.getPosition(),k=x.getPosition(),B=T.getPosition(),j=n.retina.linksDistance??0;if(vd(I,k)>j||vd(B,k)>j||vd(B,I)>j)return;let V=Gf(d.color);if(!V){const H=c.id!==void 0?i.particles.linksColors.get(c.id):i.particles.linksColor;V=Oj(n,x,H)}V&&y7e({context:A,pos1:I,pos2:k,pos3:B,backgroundMask:m.backgroundMask,colorTriangle:V,opacityTriangle:C})})},this._drawTriangles=(n,r,s,c)=>{var m,x,T;const d=s.destination;if(!((m=n.links)!=null&&m.triangles.enable&&((x=d.options.links)!=null&&x.triangles.enable)))return;const i=(T=d.links)==null?void 0:T.filter(C=>{const A=this._getLinkFrequency(d,C.destination);return d.options.links&&A<=d.options.links.frequency&&c.findIndex(I=>I.destination===C.destination)>=0});if(i!=null&&i.length)for(const C of i){const A=C.destination;this._getTriangleFrequency(r,d,A)>n.links.triangles.frequency||this._drawLinkTriangle(r,s,C)}},this._getLinkFrequency=(n,r)=>AX([n,r],this._freqs.links),this._getTriangleFrequency=(n,r,s)=>AX([n,r,s],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(t,n){const{links:r,options:s}=n;if(!r||r.length<=0)return;const c=r.filter(d=>s.links&&this._getLinkFrequency(n,d.destination)<=s.links.frequency);for(const d of c)this._drawTriangles(s,n,d,c),d.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,d)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(t){if(t.links=[],!t.options.links)return;const n=this.container.retina.pixelRatio,{retina:r}=t,{distance:s,width:c}=t.options.links;r.linksDistance=s*n,r.linksWidth=c*n}particleDestroyed(t){t.links=[]}}class x7e{constructor(){this.id="links"}getPlugin(t){return new _7e(t)}loadOptions(){}needsPlugin(){return!0}}async function b7e(e,t=!0){const n=new x7e;await e.addPlugin(n,t)}async function w7e(e,t=!0){await m7e(e,t),await b7e(e,t)}class Voe{draw(t,n,r){const s=this.getCenter(n,r),c=this.getSidesData(n,r),d=c.count.numerator*c.count.denominator,i=c.count.numerator/c.count.denominator,m=180*(i-2)/i,x=Math.PI-Math.PI*m/180;if(t){t.beginPath(),t.translate(s.x,s.y),t.moveTo(0,0);for(let T=0;T<d;T++)t.lineTo(c.length,0),t.translate(c.length,0),t.rotate(x)}}getSidesCount(t){const n=t.shapeData;return Math.round(wi((n==null?void 0:n.sides)??(n==null?void 0:n.nb_sides)??5))}}class S7e extends Voe{getCenter(t,n){return{x:-n/(t.sides/3.5),y:-n/(2.66/3.5)}}getSidesData(t,n){const r=t.sides;return{count:{denominator:1,numerator:r},length:n*2.66/(r/3)}}}class T7e extends Voe{getCenter(t,n){return{x:-n,y:n/1.66}}getSidesCount(){return 3}getSidesData(t,n){return{count:{denominator:2,numerator:3},length:n*2}}}async function E7e(e,t=!0){await e.addShape("polygon",new S7e,t)}async function C7e(e,t=!0){await e.addShape("triangle",new T7e,t)}async function M7e(e,t=!0){await E7e(e,t),await C7e(e,t)}class A7e{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(t){t&&(t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=co(t.speed)),t.decay!==void 0&&(this.decay=co(t.decay)),t.sync!==void 0&&(this.sync=t.sync))}}class R7e extends Bv{constructor(){super(),this.animation=new A7e,this.direction="clockwise",this.path=!1,this.value=0}load(t){t&&(super.load(t),t.direction!==void 0&&(this.direction=t.direction),this.animation.load(t.animation),t.path!==void 0&&(this.path=t.path))}}function D7e(e,t){const n=e.rotate,r=e.options.rotate;if(!n||!r)return;const s=r.animation,c=(n.velocity??0)*t.factor,d=2*Math.PI,i=n.decay??1;if(s.enable){switch(n.status){case"increasing":n.value+=c,n.value>d&&(n.value-=d);break;case"decreasing":default:n.value-=c,n.value<0&&(n.value+=d);break}n.velocity&&i!==1&&(n.velocity*=i)}}class P7e{constructor(t){this.container=t}init(t){const n=t.options.rotate;if(!n)return;t.rotate={enable:n.animation.enable,value:wi(n.value)*Math.PI/180},t.pathRotation=n.path;let r=n.direction;switch(r==="random"&&(r=Math.floor(ks()*2)>0?"counter-clockwise":"clockwise"),r){case"counter-clockwise":case"counterClockwise":t.rotate.status="decreasing";break;case"clockwise":t.rotate.status="increasing";break}const s=n.animation;s.enable&&(t.rotate.decay=1-wi(s.decay),t.rotate.velocity=wi(s.speed)/360*this.container.retina.reduceFactor,s.sync||(t.rotate.velocity*=ks())),t.rotation=t.rotate.value}isEnabled(t){const n=t.options.rotate;return n?!t.destroyed&&!t.spawning&&n.animation.enable&&!n.path:!1}loadOptions(t,...n){t.rotate||(t.rotate=new R7e);for(const r of n)t.rotate.load(r==null?void 0:r.rotate)}update(t,n){var r;this.isEnabled(t)&&(D7e(t,n),t.rotation=((r=t.rotate)==null?void 0:r.value)??0)}}async function I7e(e,t=!0){await e.addParticleUpdater("rotate",n=>new P7e(n),t)}const k7e=Math.sqrt(2);class O7e{draw(t,n,r){const s=r/k7e,c=s*2;t.rect(-s,-s,c,c)}getSidesCount(){return 4}}async function L7e(e,t=!0){await e.addShape(["edge","square"],new O7e,t)}class z7e{draw(t,n,r){const s=n.sides,c=n.starInset??2;t.moveTo(0,0-r);for(let d=0;d<s;d++)t.rotate(Math.PI/s),t.lineTo(0,0-r*c),t.rotate(Math.PI/s),t.lineTo(0,0-r)}getSidesCount(t){const n=t.shapeData;return Math.round(wi((n==null?void 0:n.sides)??(n==null?void 0:n.nb_sides)??5))}particleInit(t,n){const r=n.shapeData,s=wi((r==null?void 0:r.inset)??2);n.starInset=s}}async function F7e(e,t=!0){await e.addShape("star",new z7e,t)}function RF(e,t,n,r,s){if(!t||!n.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0)||(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),(t.delayTime??0)>0&&t.time<(t.delayTime??0)))return;const c=Tu(n.offset),d=(t.velocity??0)*e.factor+c*3.6,i=t.decay??1;!s||t.status==="increasing"?(t.value+=d,t.value>r&&(t.loops||(t.loops=0),t.loops++,s&&(t.status="decreasing",t.value-=t.value%r))):(t.value-=d,t.value<0&&(t.loops||(t.loops=0),t.loops++,t.status="increasing",t.value+=t.value)),t.velocity&&i!==1&&(t.velocity*=i),t.value>r&&(t.value%=r)}function B7e(e,t){if(!e.strokeColor||!e.strokeAnimation)return;const{h:n,s:r,l:s}=e.strokeColor,{h:c,s:d,l:i}=e.strokeAnimation;n&&RF(t,n,c,360,!1),r&&RF(t,r,d,100,!0),s&&RF(t,s,i,100,!0)}class j7e{constructor(t){this.container=t}init(t){var d;const n=this.container,r=t.options,s=Hg(r.stroke,t.id,r.reduceDuplicates);t.strokeWidth=wi(s.width)*n.retina.pixelRatio,t.strokeOpacity=wi(s.opacity??1),t.strokeAnimation=(d=s.color)==null?void 0:d.animation;const c=eE(s.color)??t.getFillColor();c&&(t.strokeColor=Coe(c,t.strokeAnimation,n.retina.reduceFactor))}isEnabled(t){const n=t.strokeAnimation,{strokeColor:r}=t;return!t.destroyed&&!t.spawning&&!!n&&((r==null?void 0:r.h.value)!==void 0&&r.h.enable||(r==null?void 0:r.s.value)!==void 0&&r.s.enable||(r==null?void 0:r.l.value)!==void 0&&r.l.enable)}update(t,n){this.isEnabled(t)&&B7e(t,n)}}async function N7e(e,t=!0){await e.addParticleUpdater("strokeColor",n=>new j7e(n),t)}const XA=["text","character","char"];class V7e{draw(t,n,r,s){const c=n.shapeData;if(c===void 0)return;const d=c.value;if(d===void 0)return;n.text===void 0&&(n.text=Hg(d,n.randomIndexData));const i=n.text,m=c.style??"",x=c.weight??"400",T=Math.round(r)*2,C=c.font??"Verdana",A=n.fill,I=i.length*r/2;t.font=`${m} ${x} ${T}px "${C}"`;const k={x:-I,y:r/2};t.globalAlpha=s,A?t.fillText(i,k.x,k.y):t.strokeText(i,k.x,k.y),t.globalAlpha=1}getSidesCount(){return 12}async init(t){const n=t.actualOptions;if(XA.find(r=>Ea(r,n.particles.shape.type))){const r=XA.map(c=>n.particles.shape.options[c]).find(c=>!!c),s=[];Ml(r,c=>{s.push($He(c.font,c.weight))}),await Promise.all(s)}}particleInit(t,n){if(!n.shape||!XA.includes(n.shape))return;const r=n.shapeData;if(r===void 0)return;const s=r.value;s!==void 0&&(n.text=Hg(s,n.randomIndexData))}}async function $7e(e,t=!0){await e.addShape(XA,new V7e,t)}async function U7e(e,t=!0){pGe(e),await t7e(e,!1),await YGe(e,!1),await KGe(e,!1),await t9e(e,!1),await c9e(e,!1),await m9e(e,!1),await y9e(e,!1),await x9e(e,!1),await S9e(e,!1),await M9e(e,!1),await D9e(e,!1),await r7e(e,!1),await l7e(e,!1),await w7e(e,!1),await HGe(),await W9e(e,!1),await J9e(e,!1),await M7e(e,!1),await L7e(e,!1),await F7e(e,!1),await $7e(e,!1),await K9e(e,!1),await I7e(e,!1),await N7e(e,!1),await qGe(e,t)}const q7e=()=>{const e=U.useCallback(async t=>{await U7e(t)},[]);return z.jsx(Loe,{id:"tsparticles",init:e,options:{background:{color:{value:"#000000"}},fullScreen:{enable:!1},fpsLimit:120,particles:{number:{value:120,density:{enable:!0,area:1e3}},color:{value:"#2563EB"},links:{enable:!0,color:"#2563EB",distance:130,opacity:.5,width:1},move:{enable:!0,speed:2,direction:"none",outModes:{default:"bounce"},trail:{enable:!0,length:5,fillColor:"#000000"}},shape:{type:"square"},opacity:{value:.7},size:{value:{min:1.5,max:3.5},animation:{enable:!0,speed:3,minimumValue:1,sync:!1}}},interactivity:{events:{onHover:{enable:!0,mode:"repulse"},onClick:{enable:!0,mode:"push"},resize:!0},modes:{repulse:{distance:50,duration:.4},push:{quantity:4}}}}})},H7e=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo (Congo-Brazzaville)","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini (fmr. 'Swaziland')","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar (formerly Burma)","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine State","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],cd=e=>{var t;(t=document.querySelector(e))==null||t.scrollIntoView({behavior:"smooth"})};function W7e(){const{enqueueSnackbar:e}=k1(),t=MN().shape({firstName:vh().required("First name is required"),lastName:vh().required("Last name is required"),email:vh().email("Invalid email").required("Email is required"),phone:vh(),company:vh(),country:vh().required("Country is required"),message:vh().required("Message is required")}),n=kK({initialValues:{firstName:"",lastName:"",email:"",phone:"",company:"",country:"",message:""},validationSchema:t,onSubmit:async(r,{resetForm:s})=>{var c,d,i,m;try{(await Ps.post("/user/contact",r)).status===200&&(e("Message sent successfully!",{variant:"success"}),s())}catch(x){(d=(c=x==null?void 0:x.response)==null?void 0:c.data)!=null&&d.message?e((m=(i=x==null?void 0:x.response)==null?void 0:i.data)==null?void 0:m.message,{variant:"error"}):(e("Failed to send message. Please try again later.",{variant:"error"}),console.log(x))}}});return z.jsxs("footer",{className:"footer",children:[z.jsx(q7e,{}),z.jsxs("div",{className:"footer__main",children:[z.jsx("div",{className:"logo",children:z.jsx(D5,{})}),z.jsx("div",{className:"footer__column",children:z.jsxs("form",{className:"contact-form",onSubmit:n.handleSubmit,children:[z.jsxs("div",{className:"form-row",children:[z.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:n.values.firstName,onChange:n.handleChange,onBlur:n.handleBlur}),z.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:n.values.lastName,onChange:n.handleChange,onBlur:n.handleBlur})]}),n.touched.firstName&&n.errors.firstName&&z.jsx("small",{className:"form-error",children:n.errors.firstName}),n.touched.lastName&&n.errors.lastName&&z.jsx("small",{className:"form-error",children:n.errors.lastName}),z.jsx("input",{type:"email",name:"email",placeholder:"Email",value:n.values.email,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.email&&n.errors.email&&z.jsx("small",{className:"form-error",children:n.errors.email}),z.jsx("input",{type:"tel",name:"phone",placeholder:"Phone",value:n.values.phone,onChange:n.handleChange}),z.jsx("input",{type:"text",name:"company",placeholder:"Company",value:n.values.company,onChange:n.handleChange}),z.jsxs("select",{name:"country",value:n.values.country,onChange:n.handleChange,onBlur:n.handleBlur,children:[z.jsx("option",{value:"",children:"Select Country"}),H7e.map((r,s)=>z.jsx("option",{value:r,children:r},s))]}),n.touched.country&&n.errors.country&&z.jsx("small",{className:"form-error",children:n.errors.country}),z.jsx("textarea",{name:"message",placeholder:"Message",rows:"3",value:n.values.message,onChange:n.handleChange,onBlur:n.handleBlur}),n.touched.message&&n.errors.message&&z.jsx("small",{className:"form-error",children:n.errors.message}),z.jsx("button",{type:"submit",disabled:n.isSubmitting,children:n.isSubmitting?"Sending...":"Send"}),status==="success"&&z.jsx("div",{className:"form-success",children:"Message sent successfully!"}),status==="error"&&z.jsx("div",{className:"form-error",children:"Failed to send. Try again."})]})}),z.jsx("div",{className:"footer__column",children:z.jsx("h4",{onClick:()=>cd(".hero"),children:"Platform"})}),z.jsxs("div",{className:"footer__column",children:[z.jsx("h4",{onClick:()=>cd(".feature-section"),children:"Industries"}),z.jsx("a",{onClick:()=>cd(".feature-section"),children:"Construction & Infrastucture"}),z.jsx("a",{onClick:()=>cd(".feature-section"),children:"Energy, Utilities & Industrial"}),z.jsx("a",{onClick:()=>cd(".feature-section"),children:"Heritage & Conservation"}),z.jsx("a",{onClick:()=>cd(".feature-section"),children:"Agriculture & forest"}),z.jsx("a",{onClick:()=>cd(".feature-section"),children:"Surveying & Land Developement"})]}),z.jsxs("div",{className:"footer__column",children:[z.jsx("h4",{onClick:()=>cd(".simple-tabs-container"),children:"Solutions"}),z.jsx("a",{onClick:()=>cd(".simple-tabs-container"),children:"Orthomosaic Viewer"}),z.jsx("a",{onClick:()=>cd(".simple-tabs-container"),children:"Comparision Slider"}),z.jsx("a",{onClick:()=>cd(".simple-tabs-container"),children:"Automated Customized Reporting"}),z.jsx("a",{onClick:()=>cd(".simple-tabs-container"),children:"Issue Tagging & Coordination"}),z.jsx("a",{onClick:()=>cd(".simple-tabs-container"),children:"360 Virtual Tour"})]})]}),z.jsxs("div",{className:"footer__bottom",children:[z.jsx("p",{children:"© 2025 Infra-X. All rights reserved."}),z.jsx("div",{className:"footer__socials",children:z.jsxs("div",{className:"icons",children:[z.jsx("a",{href:"#",children:z.jsx(Kke,{})}),z.jsx("a",{href:"#",children:z.jsx(Jke,{})}),z.jsx("a",{href:"#",children:z.jsx(Qke,{})}),z.jsx("a",{href:"#",children:z.jsx(Zke,{})}),z.jsx("a",{href:"#",children:z.jsx(zke,{})})]})}),z.jsxs("div",{className:"footer__legal",children:[z.jsx("a",{href:"#",children:"Privacy Policy"}),z.jsx("a",{href:"#",children:"Terms of Service"})]})]})]})}const G7e=()=>{const[e,t]=U.useState(!1),[n,r]=U.useState(0),s=bv(),c=()=>{const i=window.scrollY;t(i>n&&i>50),r(i)},d=i=>{var m;(m=document.querySelector(i))==null||m.scrollIntoView({behavior:"smooth"})};return U.useEffect(()=>(window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[n]),z.jsx("header",{className:`transparent-header ${e?"hide":""}`,children:z.jsxs("div",{className:"header-main",children:[z.jsxs("div",{className:"header-main-left",children:[z.jsx("div",{className:"header-main-left-logo",children:z.jsx(D5,{})}),z.jsxs("div",{className:"header-main-left-tabs",children:[z.jsx("button",{onClick:()=>d(".hero"),className:"button-tabs",children:"Platform"}),z.jsx("button",{onClick:()=>d(".feature-section"),className:"button-tabs",children:"Industries"}),z.jsx("button",{onClick:()=>d(".simple-tabs-container"),className:"button-tabs",children:"Solutions"}),z.jsx("button",{onClick:()=>d(".footer"),className:"button-tabs",children:"Contact Us"})]})]}),z.jsxs("div",{className:"header-main-right",children:[z.jsx("button",{onClick:()=>s("/register"),className:"login-btn",children:"Get Started"}),z.jsx("button",{onClick:()=>s("/login"),className:"login-btn",children:"Log In"})]})]})})};function Y7e({children:e}){return z.jsx("div",{className:"main-layout",children:e})}const RX=["Orthomosaic Viewer ","Comparison Slider"," Automated Customized Reporting","Issue Tagging & coordination "," 360 Virtual Tour"];function X7e(){const[e,t]=U.useState(0),n=U.useRef(null);return U.useEffect(()=>{const r=n.current;if(!r)return;const s=()=>{t(c=>(c+1)%RX.length)};return r.addEventListener("ended",s),()=>r.removeEventListener("ended",s)},[]),z.jsxs("div",{className:"simple-tabs-container",children:[z.jsxs("div",{className:"headings",children:[z.jsx("h4",{className:"small-heading",children:"Visualize your site like never before"}),z.jsx("h1",{className:"big-heading",children:"All in one platform to visualize, track, and manage every site throughout entire project lifecycle"})]}),z.jsxs("div",{className:"content-wrapper",children:[z.jsx("div",{className:"tabs-left",children:RX.map((r,s)=>z.jsx("div",{className:`tab-item ${s===e?"active":""}`,onClick:()=>t(s),children:r},s))}),z.jsx("div",{className:"tabs-right",children:z.jsx("video",{ref:n,src:hoe,autoPlay:!0,muted:!0,loop:!1,controls:!1,playsInline:!0},e)})]})]})}function Z7e(){return z.jsx(z.Fragment,{children:z.jsxs(Y7e,{children:[z.jsx(G7e,{}),z.jsx(xHe,{}),z.jsx(X7e,{}),z.jsx(EHe,{}),z.jsx(_He,{}),z.jsx(W7e,{})]})})}const K7e=_ue([{path:"/",element:z.jsx(Z7e,{})},Oke,yHe],{basename:"/"});function $oe({children:e}){return U.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[]),e||null}$oe.propTypes={children:rt.oneOfType([rt.any,rt.node])};const Q7e="#ffffff",J7e="#e3f2fd",eYe="#90caf9",tYe="#2563EB",nYe="#999999",rYe="#1565c0",iYe="#D6E6F5",oYe="#B3D3F0",sYe="#578FCA",aYe="#3E6EA3",lYe="#1F3F66",cYe="#b9f6ca",uYe="#69f0ae",dYe="#00e676",hYe="#00c853",fYe="#ef9a9a",pYe="#f44336",mYe="#c62828",gYe="#fbe9e7",yYe="#ffab91",vYe="#d84315",_Ye="#fff8e1",xYe="#ffe57f",bYe="#ffc107",wYe="#f8fafc",SYe="#eef2f6",TYe="#e3e8ef",EYe="#cdd5df",CYe="#697586",MYe="#4b5565",AYe="#364152",RYe="#121926",DYe="#111936",PYe="#1a223f",IYe="#29314f",kYe="#212946",OYe="#d7dcec",LYe="#bdc8f0",zYe="#8492c4",FYe="#e3f2fd",BYe="#2196f3",jYe="#1e88e5",NYe="#90caf9",VYe="#1565c0",$Ye="#d1c4e9",UYe="#7c4dff",qYe="#651fff",HYe="#b39ddb",WYe="#6200ea",GYe={paper:Q7e,primaryLight:J7e,primary200:eYe,primaryMain:tYe,primaryDark:nYe,primary800:rYe,secondaryLight:iYe,secondary200:oYe,secondaryMain:sYe,secondaryDark:aYe,secondary800:lYe,successLight:cYe,success200:uYe,successMain:dYe,successDark:hYe,errorLight:fYe,errorMain:pYe,errorDark:mYe,orangeLight:gYe,orangeMain:yYe,orangeDark:vYe,warningLight:_Ye,warningMain:xYe,warningDark:bYe,grey50:wYe,grey100:SYe,grey200:TYe,grey300:EYe,grey500:CYe,grey600:MYe,grey700:AYe,grey900:RYe,darkPaper:DYe,darkBackground:PYe,darkLevel1:IYe,darkLevel2:kYe,darkTextTitle:OYe,darkTextPrimary:LYe,darkTextSecondary:zYe,darkPrimaryLight:FYe,darkPrimaryMain:BYe,darkPrimaryDark:jYe,darkPrimary200:NYe,darkPrimary800:VYe,darkSecondaryLight:$Ye,darkSecondaryMain:UYe,darkSecondaryDark:qYe,darkSecondary200:HYe,darkSecondary800:WYe};function YYe(e,t){let n;switch(t){case"default":default:n=GYe}return hE({palette:{mode:e,common:{black:n.darkPaper},primary:{light:n.primaryLight,main:n.primaryMain,dark:n.primaryDark,200:n.primary200,800:n.primary800},secondary:{light:n.secondaryLight,main:n.secondaryMain,dark:n.secondaryDark,200:n.secondary200,800:n.secondary800},error:{light:n.errorLight,main:n.errorMain,dark:n.errorDark},orange:{light:n.orangeLight,main:n.orangeMain,dark:n.orangeDark},warning:{light:n.warningLight,main:n.warningMain,dark:n.warningDark,contrastText:n.grey700},success:{light:n.successLight,200:n.success200,main:n.successMain,dark:n.successDark},grey:{50:n.grey50,100:n.grey100,500:n.grey500,600:n.grey600,700:n.grey700,900:n.grey900},dark:{light:n.darkTextPrimary,main:n.darkLevel1,dark:n.darkLevel2,800:n.darkBackground,900:n.darkPaper},text:{primary:n.grey700,secondary:n.grey500,dark:n.grey900,hint:n.grey100},divider:n.grey200,background:{paper:n.paper,default:n.paper}}})}function XYe(e,t,n){return{fontFamily:n,h6:{fontWeight:500,color:e.palette.grey[900],fontSize:"0.75rem"},h5:{fontSize:"0.875rem",color:e.palette.grey[900],fontWeight:500},h4:{fontSize:"1rem",color:e.palette.grey[900],fontWeight:600},h3:{fontSize:"1.25rem",color:e.palette.grey[900],fontWeight:600},h2:{fontSize:"1.5rem",color:e.palette.grey[900],fontWeight:700},h1:{fontSize:"2.125rem",color:e.palette.grey[900],fontWeight:700},subtitle1:{fontSize:"0.875rem",fontWeight:500,color:e.palette.text.dark},subtitle2:{fontSize:"0.75rem",fontWeight:400,color:e.palette.text.secondary},caption:{fontSize:"0.75rem",color:e.palette.text.secondary,fontWeight:400},body1:{fontSize:"0.875rem",fontWeight:400,lineHeight:"1.334em"},body2:{letterSpacing:"0em",fontWeight:400,lineHeight:"1.5em",color:e.palette.text.primary},button:{textTransform:"capitalize"},customInput:{marginTop:1,marginBottom:1,"& > label":{top:23,left:0,color:e.palette.grey[500],'&[data-shrink="false"]':{top:5}},"& > div > input":{padding:"30.5px 14px 11.5px !important"},"& legend":{display:"none"},"& fieldset":{top:0}},customMultiSelect:{marginTop:1,marginBottom:1,"& > label":{top:20,left:0,color:e.grey500,'&[data-shrink="false"]':{top:5}},"& > div > input, & > div > select, & > div > div":{padding:"30px 14px 10px !important",height:"56px"},"& legend":{display:"none"},"& fieldset":{top:0}},customSelect:{"& > label":{top:23,left:0,color:e.palette.grey[500],'&[data-shrink="false"]':{top:5}},"& .MuiOutlinedInput-root":{height:"64px",paddingRight:"14px"},"& .MuiOutlinedInput-input":{padding:"30.5px 14px 11.5px !important",display:"flex",alignItems:"center"},"& legend":{display:"none"},"& fieldset":{top:0}},customSelect2:{"& .MuiInputLabel-root":{top:"-6px",'&[data-shrink="false"]':{top:"-8px"}}},mainContent:{backgroundColor:e.palette.grey[100],width:"100%",minHeight:"calc(100vh - 88px)",flexGrow:1,padding:"20px",marginTop:"88px",marginRight:"20px",borderRadius:`${t}px`},menuCaption:{fontSize:"0.875rem",fontWeight:500,color:e.palette.grey[900],padding:"6px",textTransform:"capitalize",marginTop:"10px"},subMenuCaption:{fontSize:"0.6875rem",fontWeight:500,color:e.palette.text.secondary,textTransform:"capitalize"},commonAvatar:{cursor:"pointer",borderRadius:"8px"},smallAvatar:{width:"22px",height:"22px",fontSize:"1rem"},mediumAvatar:{width:"34px",height:"34px",fontSize:"1.2rem"},largeAvatar:{width:"44px",height:"44px",fontSize:"1.5rem"}}}function Uoe(e){return e}function ZYe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var KYe=800,QYe=16,JYe=Date.now;function eXe(e){var t=0,n=0;return function(){var r=JYe(),s=QYe-(r-n);if(n=r,s>0){if(++t>=KYe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function tXe(e){return function(){return e}}var nXe=uR?function(e,t){return uR(e,"toString",{configurable:!0,enumerable:!1,value:tXe(t),writable:!0})}:Uoe,rXe=eXe(nXe),DX=Math.max;function iXe(e,t,n){return t=DX(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,c=DX(r.length-t,0),d=Array(c);++s<c;)d[s]=r[t+s];s=-1;for(var i=Array(t+1);++s<t;)i[s]=r[s];return i[t]=n(d),ZYe(e,this,i)}}function oXe(e,t){return rXe(iXe(e,t,Uoe),e+"")}function sXe(e,t,n){if(!Tv(n))return!1;var r=typeof t;return(r=="number"?MD(n)&&hK(t,n.length):r=="string"&&t in n)?TD(n[t],e):!1}function aXe(e){return oXe(function(t,n){var r=-1,s=n.length,c=s>1?n[s-1]:void 0,d=s>2?n[2]:void 0;for(c=e.length>3&&typeof c=="function"?(s--,c):void 0,d&&sXe(n[0],n[1],d)&&(c=s<3?void 0:c,s=1),t=Object(t);++r<s;){var i=n[r];i&&e(t,i,r,c)}return t})}function lXe(e){return function(t,n,r){for(var s=-1,c=Object(t),d=r(t),i=d.length;i--;){var m=d[++s];if(n(c[m],m,c)===!1)break}return t}}var cXe=lXe();function Lj(e,t,n){(n!==void 0&&!TD(e[t],n)||n===void 0&&!(t in e))&&yN(e,t,n)}function uXe(e){return Sv(e)&&MD(e)}function zj(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function dXe(e){return pE(e,mE(e))}function hXe(e,t,n,r,s,c,d){var i=zj(e,n),m=zj(t,n),x=d.get(m);if(x){Lj(e,n,x);return}var T=c?c(i,m,n+"",e,t,d):void 0,C=T===void 0;if(C){var A=F0(m),I=!A&&vN(m),k=!A&&!I&&mK(m);T=m,A||I||k?F0(i)?T=i:uXe(i)?T=wN(i):I?(C=!1,T=vK(m,!0)):k?(C=!1,T=SK(m,!0)):T=[]:GF(m)||YF(m)?(T=i,YF(i)?T=dXe(i):(!Tv(i)||gN(i))&&(T=TK(m))):C=!1}C&&(d.set(m,T),s(T,m,r,c,d),d.delete(m)),Lj(e,n,T)}function qoe(e,t,n,r,s){e!==t&&cXe(t,function(c,d){if(s||(s=new ix),Tv(c))hXe(e,t,d,n,qoe,r,s);else{var i=r?r(zj(e,d),c,d+"",e,t,s):void 0;i===void 0&&(i=c),Lj(e,d,i)}},mE)}var fXe=aXe(function(e,t,n){qoe(e,t,n)});function pXe(e){return{MuiChip:{defaultProps:{color:"primary",variant:"light"},styleOverrides:{root:{"&.MuiChip-deletable .MuiChip-deleteIcon":{color:"inherit"},variants:[{props:{variant:"light"},style:({ownerState:t})=>{const n=e.palette[t.color];return{...n&&{color:n.main,backgroundColor:n.light,...t.color==="error"&&{backgroundColor:ei(n.light,.25)},...t.color==="success"&&{backgroundColor:ei(n.light,.5)},...(t.color==="warning"||t.color==="success")&&{color:n.dark},"&.MuiChip-clickable":{"&:hover":{color:n.light,backgroundColor:n.dark}}}}}},{props:{variant:"outlined",color:"warning"},style:{borderColor:e.palette.warning.dark,color:e.palette.warning.dark}},{props:{variant:"outlined",color:"success"},style:{borderColor:e.palette.success.dark,color:e.palette.success.dark}}]}}}}}function mXe(e){return fXe(pXe(e))}function gXe(e,t,n){const r=e.palette.grey[50],s=e.palette.secondary.light,c=e.palette.secondary.dark;return{MuiButton:{styleOverrides:{root:{fontWeight:500,borderRadius:"4px"}}},MuiCheckbox:{styleOverrides:{root:{"& + .MuiFormControlLabel-label":{marginTop:2}}}},MuiPaper:{defaultProps:{elevation:0},styleOverrides:{root:{backgroundImage:"none"},rounded:{borderRadius:`${t}px`}}},MuiCardHeader:{styleOverrides:{root:{color:e.palette.text.dark,padding:"24px"},title:{fontSize:"1.125rem"}}},MuiCardContent:{styleOverrides:{root:{padding:"24px"}}},MuiCardActions:{styleOverrides:{root:{padding:"24px"}}},MuiAlert:{styleOverrides:{root:{alignItems:"center"},outlined:{border:"1px dashed"}}},MuiListItemButton:{styleOverrides:{root:{color:e.palette.text.primary,paddingTop:"10px",paddingBottom:"10px","&.Mui-selected":{color:c,backgroundColor:s,"&:hover":{backgroundColor:s},"& .MuiListItemIcon-root":{color:c}},"&:hover":{backgroundColor:s,color:c,"& .MuiListItemIcon-root":{color:c}}}}},MuiListItemIcon:{styleOverrides:{root:{color:e.palette.text.primary,minWidth:"36px"}}},MuiListItemText:{styleOverrides:{primary:{color:e.palette.text.dark}}},MuiInputBase:{styleOverrides:{input:{color:e.palette.text.dark,"&::placeholder":{color:e.palette.text.secondary,fontSize:"0.875rem"}}}},MuiOutlinedInput:{styleOverrides:{root:{background:n?r:"transparent",borderRadius:`${t}px`,"& .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.grey[400]},"&:hover $notchedOutline":{borderColor:e.palette.primary.light},"&.MuiInputBase-multiline":{padding:1}},input:{fontWeight:500,background:n?r:"transparent",padding:"15.5px 14px",borderRadius:`${t}px`,"&.MuiInputBase-inputSizeSmall":{padding:"10px 14px","&.MuiInputBase-inputAdornedStart":{paddingLeft:0}}},inputAdornedStart:{paddingLeft:4},notchedOutline:{borderRadius:`${t}px`}}},MuiSlider:{styleOverrides:{root:{"&.Mui-disabled":{color:e.palette.grey[300]}},mark:{backgroundColor:e.palette.background.paper,width:"4px"},valueLabel:{color:e.palette.primary.light}}},MuiAutocomplete:{styleOverrides:{root:{"& .MuiAutocomplete-tag":{background:e.palette.secondary.light,borderRadius:4,color:e.palette.text.dark,".MuiChip-deleteIcon":{color:e.palette.secondary[200]}}},popper:{borderRadius:`${t}px`,boxShadow:"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)"}}},MuiDivider:{styleOverrides:{root:{borderColor:e.palette.divider}}},MuiSelect:{styleOverrides:{select:{"&:focus":{backgroundColor:"transparent"}}}},MuiAvatar:{styleOverrides:{root:{color:e.palette.primary.dark,background:e.palette.primary[200]}}},MuiTimelineContent:{styleOverrides:{root:{color:e.palette.text.dark,fontSize:"16px"}}},MuiTreeItem:{styleOverrides:{label:{marginTop:14,marginBottom:14}}},MuiTimelineDot:{styleOverrides:{root:{boxShadow:"none"}}},MuiInternalDateTimePickerTabs:{styleOverrides:{tabs:{backgroundColor:e.palette.primary.light,"& .MuiTabs-flexContainer":{borderColor:e.palette.primary[200]},"& .MuiTab-root":{color:e.palette.text.dark},"& .MuiTabs-indicator":{backgroundColor:e.palette.primary.dark},"& .Mui-selected":{color:e.palette.primary.dark}}}},MuiTabs:{styleOverrides:{flexContainer:{borderBottom:"1px solid",borderColor:e.palette.grey[200]}}},MuiDialog:{styleOverrides:{paper:{padding:"12px 0 12px 0"}}},MuiTableCell:{styleOverrides:{root:{borderColor:e.palette.grey[200],"&.MuiTableCell-head":{fontSize:"0.875rem",color:e.palette.grey[900],fontWeight:500}}}},MuiDateTimePickerToolbar:{styleOverrides:{timeDigitsContainer:{alignItems:"center"}}},MuiTooltip:{styleOverrides:{tooltip:{margin:0,lineHeight:1.4,color:e.palette.background.paper,background:e.palette.text.primary}}},MuiDialogTitle:{styleOverrides:{root:{fontSize:"1.25rem"}}},MuiPaginationItem:{styleOverrides:{root:{margin:"3px"}}},MuiDataGrid:{defaultProps:{rowHeight:54},styleOverrides:{root:{borderWidth:0,"& .MuiDataGrid-columnHeader--filledGroup":{borderBottomWidth:0},"& .MuiDataGrid-columnHeader--emptyGroup":{borderBottomWidth:0},"& .MuiFormControl-root>.MuiInputBase-root":{backgroundColor:`${e.palette.background.default} !important`,borderColor:`${e.palette.divider} !important`}},withBorderColor:{borderColor:e.palette.divider},toolbarContainer:{"& .MuiButton-root":{paddingLeft:"16px !important",paddingRight:"16px !important"}},columnHeader:{color:e.palette.grey[600],paddingLeft:24,paddingRight:24},footerContainer:{"&.MuiDataGrid-withBorderColor":{borderBottom:"none"}},columnHeaderCheckbox:{paddingLeft:0,paddingRight:0},cellCheckbox:{paddingLeft:0,paddingRight:0},cell:{borderWidth:1,paddingLeft:24,paddingRight:24,borderColor:e.palette.divider,"&.MuiDataGrid-cell--withRenderer > div ":{" > .high":{background:e.palette.success.light},"& > .medium":{background:e.palette.warning.light},"& > .low":{background:e.palette.error.light}}}}},...mXe(e)}}function yXe(e,t){const n=ei(t,.24);return{z1:`0 1px 2px 0 ${n}`,z8:`0 8px 16px 0 ${n}`,z12:`0 12px 24px 0 ${n} 0 10px 20px 0 ${n}`,z16:`0 0 3px 0 ${n} 0 14px 28px -5px ${n}`,z20:`0 0 3px 0 ${n} 0 18px 36px -5px ${n}`,z24:`0 0 6px 0 ${n} 0 21px 44px 0 ${n}`,primary:`0px 12px 14px 0px ${ei(e.palette.primary.main,.3)}`,secondary:`0px 12px 14px 0px ${ei(e.palette.secondary.main,.3)}`,orange:`0px 12px 14px 0px ${ei(e.palette.orange.main,.3)}`,success:`0px 12px 14px 0px ${ei(e.palette.success.main,.3)}`,warning:`0px 12px 14px 0px ${ei(e.palette.warning.main,.3)}`,error:`0px 12px 14px 0px ${ei(e.palette.error.main,.3)}`}}function vXe(e,t){return yXe(t,t.palette.grey[900])}function Hoe({children:e}){const{borderRadius:t,fontFamily:n,mode:r,outlinedFilled:s,presetColor:c}=F1(),d=U.useMemo(()=>YYe(r,c),[r,c]),i=U.useMemo(()=>XYe(d,t,n),[d,t,n]),m=U.useMemo(()=>vXe(r,d),[r,d]),x=U.useMemo(()=>({direction:"ltr",palette:d.palette,mixins:{toolbar:{minHeight:"48px",padding:"16px","@media (min-width: 600px)":{minHeight:"48px"}}},typography:i,customShadows:m}),[d,m,i]),T=hE(x);return T.components=U.useMemo(()=>gXe(T,t,s),[T,t,s]),z.jsx(zhe,{injectFirst:!0,children:z.jsxs(Npe,{theme:T,children:[z.jsx(ISe,{enableColorScheme:!0}),e]})})}Hoe.propTypes={children:rt.node};function _Xe(){return z.jsx(Hoe,{children:z.jsx($oe,{children:z.jsx(z.Fragment,{children:z.jsx(Pue,{router:K7e})})})})}window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function xXe(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}var eV="persist:",Woe="persist/FLUSH",tV="persist/REHYDRATE",Goe="persist/PAUSE",Yoe="persist/PERSIST",Xoe="persist/PURGE",Zoe="persist/REGISTER",bXe=-1;function ZA(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ZA=function(n){return typeof n}:ZA=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ZA(e)}function PX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function wXe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PX(n,!0).forEach(function(r){SXe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PX(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SXe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TXe(e,t,n,r){r.debug;var s=wXe({},n);return e&&ZA(e)==="object"&&Object.keys(e).forEach(function(c){c!=="_persist"&&t[c]===n[c]&&(s[c]=e[c])}),s}function EXe(e){var t=e.blacklist||null,n=e.whitelist||null,r=e.transforms||[],s=e.throttle||0,c="".concat(e.keyPrefix!==void 0?e.keyPrefix:eV).concat(e.key),d=e.storage,i;e.serialize===!1?i=function(Q){return Q}:typeof e.serialize=="function"?i=e.serialize:i=CXe;var m=e.writeFailHandler||null,x={},T={},C=[],A=null,I=null,k=function(Q){Object.keys(Q).forEach(function(ee){V(ee)&&x[ee]!==Q[ee]&&C.indexOf(ee)===-1&&C.push(ee)}),Object.keys(x).forEach(function(ee){Q[ee]===void 0&&V(ee)&&C.indexOf(ee)===-1&&x[ee]!==void 0&&C.push(ee)}),A===null&&(A=setInterval(B,s)),x=Q};function B(){if(C.length===0){A&&clearInterval(A),A=null;return}var X=C.shift(),Q=r.reduce(function(ee,ce){return ce.in(ee,X,x)},x[X]);if(Q!==void 0)try{T[X]=i(Q)}catch(ee){console.error("redux-persist/createPersistoid: error serializing state",ee)}else delete T[X];C.length===0&&j()}function j(){Object.keys(T).forEach(function(X){x[X]===void 0&&delete T[X]}),I=d.setItem(c,i(T)).catch(H)}function V(X){return!(n&&n.indexOf(X)===-1&&X!=="_persist"||t&&t.indexOf(X)!==-1)}function H(X){m&&m(X)}var G=function(){for(;C.length!==0;)B();return I||Promise.resolve()};return{update:k,flush:G}}function CXe(e){return JSON.stringify(e)}function MXe(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:eV).concat(e.key),r=e.storage;e.debug;var s;return e.deserialize===!1?s=function(d){return d}:typeof e.deserialize=="function"?s=e.deserialize:s=AXe,r.getItem(n).then(function(c){if(c)try{var d={},i=s(c);return Object.keys(i).forEach(function(m){d[m]=t.reduceRight(function(x,T){return T.out(x,m,i)},s(i[m]))}),d}catch(m){throw m}else return})}function AXe(e){return JSON.parse(e)}function RXe(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:eV).concat(e.key);return t.removeItem(n,DXe)}function DXe(e){}function IX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IX(n,!0).forEach(function(r){PXe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IX(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PXe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IXe(e,t){if(e==null)return{};var n=kXe(e,t),r,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var OXe=5e3;function LXe(e,t){var n=e.version!==void 0?e.version:bXe;e.debug;var r=e.stateReconciler===void 0?TXe:e.stateReconciler,s=e.getStoredState||MXe,c=e.timeout!==void 0?e.timeout:OXe,d=null,i=!1,m=!0,x=function(C){return C._persist.rehydrated&&d&&!m&&d.update(C),C};return function(T,C){var A=T||{},I=A._persist,k=IXe(A,["_persist"]),B=k;if(C.type===Yoe){var j=!1,V=function(fe,ue){j||(C.rehydrate(e.key,fe,ue),j=!0)};if(c&&setTimeout(function(){!j&&V(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},c),m=!1,d||(d=EXe(e)),I)return Bg({},t(B,C),{_persist:I});if(typeof C.rehydrate!="function"||typeof C.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return C.register(e.key),s(e).then(function(ce){var fe=e.migrate||function(ue,ae){return Promise.resolve(ue)};fe(ce,n).then(function(ue){V(ue)},function(ue){V(void 0,ue)})},function(ce){V(void 0,ce)}),Bg({},t(B,C),{_persist:{version:n,rehydrated:!1}})}else{if(C.type===Xoe)return i=!0,C.result(RXe(e)),Bg({},t(B,C),{_persist:I});if(C.type===Woe)return C.result(d&&d.flush()),Bg({},t(B,C),{_persist:I});if(C.type===Goe)m=!0;else if(C.type===tV){if(i)return Bg({},B,{_persist:Bg({},I,{rehydrated:!0})});if(C.key===e.key){var H=t(B,C),G=C.payload,X=r!==!1&&G!==void 0?r(G,T,H,e):H,Q=Bg({},X,{_persist:Bg({},I,{rehydrated:!0})});return x(Q)}}}if(!I)return t(T,C);var ee=t(B,C);return ee===B?T:x(Bg({},ee,{_persist:I}))}}function kX(e){return BXe(e)||FXe(e)||zXe()}function zXe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function FXe(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function BXe(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function OX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OX(n,!0).forEach(function(r){jXe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OX(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jXe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Koe={registry:[],bootstrapped:!1},NXe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Koe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Zoe:return Fj({},t,{registry:[].concat(kX(t.registry),[n.key])});case tV:var r=t.registry.indexOf(n.key),s=kX(t.registry);return s.splice(r,1),Fj({},t,{registry:s,bootstrapped:s.length===0});default:return t}};function VXe(e,t,n){var r=k5(NXe,Koe,void 0),s=function(m){r.dispatch({type:Zoe,key:m})},c=function(m,x,T){var C={type:tV,payload:x,err:T,key:m};e.dispatch(C),r.dispatch(C)},d=Fj({},r,{purge:function(){var m=[];return e.dispatch({type:Xoe,result:function(T){m.push(T)}}),Promise.all(m)},flush:function(){var m=[];return e.dispatch({type:Woe,result:function(T){m.push(T)}}),Promise.all(m)},pause:function(){e.dispatch({type:Goe})},persist:function(){e.dispatch({type:Yoe,register:s,rehydrate:c})}});return d.persist(),d}var PS={},uA={},dA={},LX;function $Xe(){if(LX)return dA;LX=1,dA.__esModule=!0,dA.default=s;function e(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(i){return typeof i}:e=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e(c)}function t(){}var n={getItem:t,setItem:t,removeItem:t};function r(c){if((typeof self>"u"?"undefined":e(self))!=="object"||!(c in self))return!1;try{var d=self[c],i="redux-persist ".concat(c," test");d.setItem(i,"test"),d.getItem(i),d.removeItem(i)}catch{return!1}return!0}function s(c){var d="".concat(c,"Storage");return r(d)?self[d]:n}return dA}var zX;function UXe(){if(zX)return uA;zX=1,uA.__esModule=!0,uA.default=n;var e=t($Xe());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=(0,e.default)(r);return{getItem:function(d){return new Promise(function(i,m){i(s.getItem(d))})},setItem:function(d,i){return new Promise(function(m,x){m(s.setItem(d,i))})},removeItem:function(d){return new Promise(function(i,m){i(s.removeItem(d))})}}}return uA}var FX;function qXe(){if(FX)return PS;FX=1,PS.__esModule=!0,PS.default=void 0;var e=t(UXe());function t(r){return r&&r.__esModule?r:{default:r}}var n=(0,e.default)("local");return PS.default=n,PS}var HXe=qXe();const WXe=Ls(HXe),GXe=lte({auth:Rke,project:$3e}),YXe={key:"InfraXLockedKey",storage:WXe,whitelist:["auth","project"]},XXe=LXe(YXe,GXe),Qoe=mke({reducer:XXe,middleware:e=>e({serializableCheck:!1})}),ZXe=VXe(Qoe);function KA(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?KA=function(n){return typeof n}:KA=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},KA(e)}function KXe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QXe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JXe(e,t,n){return t&&QXe(e.prototype,t),e}function eZe(e,t){return t&&(KA(t)==="object"||typeof t=="function")?t:QA(e)}function Bj(e){return Bj=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Bj(e)}function QA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jj(e,t)}function jj(e,t){return jj=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},jj(e,t)}function JA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Joe=function(e){tZe(t,e);function t(){var n,r;KXe(this,t);for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return r=eZe(this,(n=Bj(t)).call.apply(n,[this].concat(c))),JA(QA(r),"state",{bootstrapped:!1}),JA(QA(r),"_unsubscribe",void 0),JA(QA(r),"handlePersistorState",function(){var i=r.props.persistor,m=i.getState(),x=m.bootstrapped;x&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return JXe(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(U.PureComponent);JA(Joe,"defaultProps",{children:null,loading:null});const nZe=document.getElementById("root"),rZe=Sle.createRoot(nZe);rZe.render(z.jsx(kte,{children:z.jsx(VIe,{store:Qoe,children:z.jsx(Joe,{loading:null,persistor:ZXe,children:z.jsx(ibe,{maxSnack:3,children:z.jsx(_Xe,{})})})})}));xXe();export{CIe as A,Pn as B,f8 as C,xc as D,Gi as E,tu as F,Ii as G,ple as H,Xg as I,Fh as J,cZ as K,iv as L,ko as M,Ft as N,ZD as O,rt as P,Ph as Q,DZe as R,Ns as S,En as T,bv as a,k1 as b,ate as c,Pu as d,kK as e,MN as f,vh as g,BS as h,Kc as i,z as j,v8 as k,Wi as l,Ps as m,bhe as n,D1 as o,sZe as p,mme as q,U as r,AZe as s,D5 as t,Zo as u,F_e as v,aZe as w,hJ as x,nu as y,Ed as z};
