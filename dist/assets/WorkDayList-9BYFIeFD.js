import{r as g,ab as yt,by as $e,ad as vt,ae as kt,ac as Ge,ar as Oe,bz as Ze,bA as et,bB as _e,a6 as St,a5 as wt,j as t,a9 as Ne,aL as jt,a7 as Ct,a8 as me,J as ve,ak as fe,aa as Tt,aN as Le,aQ as He,aP as tt,aO as at,ag as rt,bC as mt,aR as Lt,y as ft,ay as zt,bj as It,aA as At,B as _,T as oe,bD as Pt,au as Mt,i as ye,u as Rt,b as $t,d as Nt,K as Ft,S as nt,V as Dt,F as ot,I as Et,w as st,M as it,as as Wt,br as Vt,bs as Ot,bt as _t,bu as qe,bn as W,bv as Ut,X as Yt,k as xe}from"./index-q9geJBwq.js";import{d as Je}from"./dayjs.min-Be5xyMJc.js";import{v as Bt}from"./visuallyHidden-Dan1xhjv.js";function Kt(e,a,s=(l,b)=>l===b){return e.length===a.length&&e.every((l,b)=>s(l,a[b]))}const Xt=2;function Te(e,a,s,l,b){return s===1?Math.min(e+a,b):Math.max(e-a,l)}function ht(e,a){return e-a}function lt(e,a){const{index:s}=e.reduce((l,b,z)=>{const R=Math.abs(a-b);return l===null||R<l.distance||R===l.distance?{distance:R,index:z}:l},null)??{};return s}function De(e,a){if(a.current!==void 0&&e.changedTouches){const s=e;for(let l=0;l<s.changedTouches.length;l+=1){const b=s.changedTouches[l];if(b.identifier===a.current)return{x:b.clientX,y:b.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ue(e,a,s){return(e-a)*100/(s-a)}function Gt(e,a,s){return(s-a)*e+a}function Zt(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),l=s[0].split(".")[1];return(l?l.length:0)+parseInt(s[1],10)}const a=e.toString().split(".")[1];return a?a.length:0}function qt(e,a,s){const l=Math.round((e-s)/a)*a+s;return Number(l.toFixed(Zt(a)))}function ct({values:e,newValue:a,index:s}){const l=e.slice();return l[s]=a,l.sort(ht)}function Ee({sliderRef:e,activeIndex:a,setActive:s}){var b,z,R;const l=Oe(e.current);(!((b=e.current)!=null&&b.contains(l.activeElement))||Number((z=l==null?void 0:l.activeElement)==null?void 0:z.getAttribute("data-index"))!==a)&&((R=e.current)==null||R.querySelector(`[type="range"][data-index="${a}"]`).focus()),s&&s(a)}function We(e,a){return typeof e=="number"&&typeof a=="number"?e===a:typeof e=="object"&&typeof a=="object"?Kt(e,a):!1}const Jt={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},Qt=e=>e;let Ve;function dt(){return Ve===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Ve=CSS.supports("touch-action","none"):Ve=!0),Ve}function Ht(e){const{"aria-labelledby":a,defaultValue:s,disabled:l=!1,disableSwap:b=!1,isRtl:z=!1,marks:R=!1,max:w=100,min:y=0,name:P,onChange:O,onChangeCommitted:G,orientation:se="horizontal",rootRef:ze,scale:he=Qt,step:U=1,shiftStep:Z=10,tabIndex:ke,value:ge}=e,Y=g.useRef(void 0),[$,ie]=g.useState(-1),[Ie,B]=g.useState(-1),[Q,le]=g.useState(!1),H=g.useRef(0),ee=g.useRef(null),[N,x]=yt({controlled:ge,default:s??y,name:"Slider"}),h=O&&((r,n,i)=>{const u=r.nativeEvent||r,S=new u.constructor(u.type,u);Object.defineProperty(S,"target",{writable:!0,value:{value:n,name:P}}),ee.current=n,O(S,n,i)}),q=Array.isArray(N);let L=q?N.slice().sort(ht):[N];L=L.map(r=>r==null?y:$e(r,y,w));const ce=R===!0&&U!==null?[...Array(Math.floor((w-y)/U)+1)].map((r,n)=>({value:y+U*n})):R||[],T=ce.map(r=>r.value),[J,de]=g.useState(-1),k=g.useRef(null),te=vt(ze,k),Ae=r=>n=>{var u;const i=Number(n.currentTarget.getAttribute("data-index"));et(n.target)&&de(i),B(i),(u=r==null?void 0:r.onFocus)==null||u.call(r,n)},Pe=r=>n=>{var i;et(n.target)||de(-1),B(-1),(i=r==null?void 0:r.onBlur)==null||i.call(r,n)},Se=(r,n)=>{const i=Number(r.currentTarget.getAttribute("data-index")),u=L[i],S=T.indexOf(u);let c=n;if(ce&&U==null){const I=T[T.length-1];c>=I?c=I:c<=T[0]?c=T[0]:c=c<u?T[S-1]:T[S+1]}if(c=$e(c,y,w),q){b&&(c=$e(c,L[i-1]||-1/0,L[i+1]||1/0));const I=c;c=ct({values:L,newValue:c,index:i});let D=i;b||(D=c.indexOf(I)),Ee({sliderRef:k,activeIndex:D})}x(c),de(i),h&&!We(c,N)&&h(r,c,i),G&&G(r,ee.current??c)},Me=r=>n=>{var i;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const u=Number(n.currentTarget.getAttribute("data-index")),S=L[u];let c=null;if(U!=null){const I=n.shiftKey?Z:U;switch(n.key){case"ArrowUp":c=Te(S,I,1,y,w);break;case"ArrowRight":c=Te(S,I,z?-1:1,y,w);break;case"ArrowDown":c=Te(S,I,-1,y,w);break;case"ArrowLeft":c=Te(S,I,z?1:-1,y,w);break;case"PageUp":c=Te(S,Z,1,y,w);break;case"PageDown":c=Te(S,Z,-1,y,w);break;case"Home":c=y;break;case"End":c=w;break}}else if(ce){const I=T[T.length-1],D=T.indexOf(S),M=[z?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],K=[z?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];M.includes(n.key)?D===0?c=T[0]:c=T[D-1]:K.includes(n.key)&&(D===T.length-1?c=I:c=T[D+1])}c!=null&&Se(n,c)}(i=r==null?void 0:r.onKeyDown)==null||i.call(r,n)};kt(()=>{var r;l&&k.current.contains(document.activeElement)&&((r=document.activeElement)==null||r.blur())},[l]),l&&$!==-1&&ie(-1),l&&J!==-1&&de(-1);const we=r=>n=>{var i;(i=r.onChange)==null||i.call(r,n),Se(n,n.target.valueAsNumber)},ae=g.useRef(void 0);let o=se;z&&se==="horizontal"&&(o+="-reverse");const m=({finger:r,move:n=!1})=>{const{current:i}=k,{width:u,height:S,bottom:c,left:I}=i.getBoundingClientRect();let D;o.startsWith("vertical")?D=(c-r.y)/S:D=(r.x-I)/u,o.includes("-reverse")&&(D=1-D);let M;if(M=Gt(D,y,w),U)M=qt(M,U,y);else{const Re=lt(T,M);M=T[Re]}M=$e(M,y,w);let K=0;if(q){n?K=ae.current:K=lt(L,M),b&&(M=$e(M,L[K-1]||-1/0,L[K+1]||1/0));const Re=M;M=ct({values:L,newValue:M,index:K}),b&&n||(K=M.indexOf(Re),ae.current=K)}return{newValue:M,activeIndex:K}},v=Ge(r=>{const n=De(r,Y);if(!n)return;if(H.current+=1,r.type==="mousemove"&&r.buttons===0){d(r);return}const{newValue:i,activeIndex:u}=m({finger:n,move:!0});Ee({sliderRef:k,activeIndex:u,setActive:ie}),x(i),!Q&&H.current>Xt&&le(!0),h&&!We(i,N)&&h(r,i,u)}),d=Ge(r=>{const n=De(r,Y);if(le(!1),!n)return;const{newValue:i}=m({finger:n,move:!0});ie(-1),r.type==="touchend"&&B(-1),G&&G(r,ee.current??i),Y.current=void 0,f()}),p=Ge(r=>{if(l)return;dt()||r.preventDefault();const n=r.changedTouches[0];n!=null&&(Y.current=n.identifier);const i=De(r,Y);if(i!==!1){const{newValue:S,activeIndex:c}=m({finger:i});Ee({sliderRef:k,activeIndex:c,setActive:ie}),x(S),h&&!We(S,N)&&h(r,S,c)}H.current=0;const u=Oe(k.current);u.addEventListener("touchmove",v,{passive:!0}),u.addEventListener("touchend",d,{passive:!0})}),f=g.useCallback(()=>{const r=Oe(k.current);r.removeEventListener("mousemove",v),r.removeEventListener("mouseup",d),r.removeEventListener("touchmove",v),r.removeEventListener("touchend",d)},[d,v]);g.useEffect(()=>{const{current:r}=k;return r.addEventListener("touchstart",p,{passive:dt()}),()=>{r.removeEventListener("touchstart",p),f()}},[f,p]),g.useEffect(()=>{l&&f()},[l,f]);const F=r=>n=>{var S;if((S=r.onMouseDown)==null||S.call(r,n),l||n.defaultPrevented||n.button!==0)return;n.preventDefault();const i=De(n,Y);if(i!==!1){const{newValue:c,activeIndex:I}=m({finger:i});Ee({sliderRef:k,activeIndex:I,setActive:ie}),x(c),h&&!We(c,N)&&h(n,c,I)}H.current=0;const u=Oe(k.current);u.addEventListener("mousemove",v,{passive:!0}),u.addEventListener("mouseup",d)},j=Ue(q?L[0]:y,y,w),C=Ue(L[L.length-1],y,w)-j,ue=(r={})=>{const n=Ze(r),i={onMouseDown:F(n||{})},u={...n,...i};return{...r,ref:te,...u}},V=r=>n=>{var u;(u=r.onMouseOver)==null||u.call(r,n);const i=Number(n.currentTarget.getAttribute("data-index"));B(i)},be=r=>n=>{var i;(i=r.onMouseLeave)==null||i.call(r,n),B(-1)},re=(r={})=>{const n=Ze(r),i={onMouseOver:V(n||{}),onMouseLeave:be(n||{})};return{...r,...n,...i}},je=r=>({pointerEvents:$!==-1&&$!==r?"none":void 0});let pe;return se==="vertical"&&(pe=z?"vertical-rl":"vertical-lr"),{active:$,axis:o,axisProps:Jt,dragging:Q,focusedThumbIndex:J,getHiddenInputProps:(r={})=>{const n=Ze(r),i={onChange:we(n||{}),onFocus:Ae(n||{}),onBlur:Pe(n||{}),onKeyDown:Me(n||{})},u={...n,...i};return{tabIndex:ke,"aria-labelledby":a,"aria-orientation":se,"aria-valuemax":he(w),"aria-valuemin":he(y),name:P,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:l,...r,...u,style:{...Bt,direction:z?"rtl":"ltr",width:"100%",height:"100%",writingMode:pe}}},getRootProps:ue,getThumbProps:re,marks:ce,open:Ie,range:q,rootRef:te,trackLeap:C,trackOffset:j,values:L,getThumbStyle:je}}const ea=e=>!e||!_e(e);function ta(e){return wt("MuiSlider",e)}const X=St("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),aa=e=>{const{open:a}=e;return{offset:Ne(a&&X.valueLabelOpen),circle:X.valueLabelCircle,label:X.valueLabelLabel}};function ra(e){const{children:a,className:s,value:l}=e,b=aa(e);return a?g.cloneElement(a,{className:a.props.className},t.jsxs(g.Fragment,{children:[a.props.children,t.jsx("span",{className:Ne(b.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:b.circle,children:t.jsx("span",{className:b.label,children:l})})})]})):null}function ut(e){return e}const na=ve("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.root,a[`color${fe(s.color)}`],s.size!=="medium"&&a[`size${fe(s.size)}`],s.marked&&a.marked,s.orientation==="vertical"&&a.vertical,s.track==="inverted"&&a.trackInverted,s.track===!1&&a.trackFalse]}})(Le(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${X.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${X.dragging}`]:{[`& .${X.thumb}, & .${X.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(He()).map(([a])=>({props:{color:a},style:{color:(e.vars||e).palette[a].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),oa=ve("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),sa=ve("span",{name:"MuiSlider",slot:"Track"})(Le(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(He()).map(([a])=>({props:{color:a,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${a}Track`],borderColor:e.vars.palette.Slider[`${a}Track`]}:{backgroundColor:tt(e.palette[a].main,.62),borderColor:tt(e.palette[a].main,.62),...e.applyStyles("dark",{backgroundColor:at(e.palette[a].main,.5)}),...e.applyStyles("dark",{borderColor:at(e.palette[a].main,.5)})}}}))]}))),ia=ve("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,a)=>{const{ownerState:s}=e;return[a.thumb,a[`thumbColor${fe(s.color)}`],s.size!=="medium"&&a[`thumbSize${fe(s.size)}`]]}})(Le(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${X.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(He()).map(([a])=>({props:{color:a},style:{[`&:hover, &.${X.focusVisible}`]:{...e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${rt(e.palette[a].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${X.active}`]:{...e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[a].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${rt(e.palette[a].main,.16)}`}}}}))]}))),la=ve(ra,{name:"MuiSlider",slot:"ValueLabel"})(Le(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${X.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),ca=ve("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>mt(e)&&e!=="markActive",overridesResolver:(e,a)=>{const{markActive:s}=e;return[a.mark,s&&a.markActive]}})(Le(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),da=ve("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>mt(e)&&e!=="markLabelActive"})(Le(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),ua=e=>{const{disabled:a,dragging:s,marked:l,orientation:b,track:z,classes:R,color:w,size:y}=e,P={root:["root",a&&"disabled",s&&"dragging",l&&"marked",b==="vertical"&&"vertical",z==="inverted"&&"trackInverted",z===!1&&"trackFalse",w&&`color${fe(w)}`,y&&`size${fe(y)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",a&&"disabled",y&&`thumbSize${fe(y)}`,w&&`thumbColor${fe(w)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Tt(P,ta,R)},pa=({children:e})=>e,ma=g.forwardRef(function(a,s){const l=jt({props:a,name:"MuiSlider"}),b=Ct(),{"aria-label":z,"aria-valuetext":R,"aria-labelledby":w,component:y="span",components:P={},componentsProps:O={},color:G="primary",classes:se,className:ze,disableSwap:he=!1,disabled:U=!1,getAriaLabel:Z,getAriaValueText:ke,marks:ge=!1,max:Y=100,min:$=0,name:ie,onChange:Ie,onChangeCommitted:B,orientation:Q="horizontal",shiftStep:le=10,size:H="medium",step:ee=1,scale:N=ut,slotProps:x,slots:h,tabIndex:q,track:L="normal",value:ce,valueLabelDisplay:T="off",valueLabelFormat:J=ut,...de}=l,k={...l,isRtl:b,max:Y,min:$,classes:se,disabled:U,disableSwap:he,orientation:Q,marks:ge,color:G,size:H,step:ee,shiftStep:le,scale:N,track:L,valueLabelDisplay:T,valueLabelFormat:J},{axisProps:te,getRootProps:Ae,getHiddenInputProps:Pe,getThumbProps:Se,open:Me,active:we,axis:ae,focusedThumbIndex:o,range:m,dragging:v,marks:d,values:p,trackOffset:f,trackLeap:F,getThumbStyle:j}=Ht({...k,rootRef:s});k.marked=d.length>0&&d.some(A=>A.label),k.dragging=v,k.focusedThumbIndex=o;const C=ua(k),ue=(h==null?void 0:h.root)??P.Root??na,V=(h==null?void 0:h.rail)??P.Rail??oa,be=(h==null?void 0:h.track)??P.Track??sa,re=(h==null?void 0:h.thumb)??P.Thumb??ia,je=(h==null?void 0:h.valueLabel)??P.ValueLabel??la,pe=(h==null?void 0:h.mark)??P.Mark??ca,Ce=(h==null?void 0:h.markLabel)??P.MarkLabel??da,r=(h==null?void 0:h.input)??P.Input??"input",n=(x==null?void 0:x.root)??O.root,i=(x==null?void 0:x.rail)??O.rail,u=(x==null?void 0:x.track)??O.track,S=(x==null?void 0:x.thumb)??O.thumb,c=(x==null?void 0:x.valueLabel)??O.valueLabel,I=(x==null?void 0:x.mark)??O.mark,D=(x==null?void 0:x.markLabel)??O.markLabel,M=(x==null?void 0:x.input)??O.input,K=me({elementType:ue,getSlotProps:Ae,externalSlotProps:n,externalForwardedProps:de,additionalProps:{...ea(ue)&&{as:y}},ownerState:{...k,...n==null?void 0:n.ownerState},className:[C.root,ze]}),Re=me({elementType:V,externalSlotProps:i,ownerState:k,className:C.rail}),gt=me({elementType:be,externalSlotProps:u,additionalProps:{style:{...te[ae].offset(f),...te[ae].leap(F)}},ownerState:{...k,...u==null?void 0:u.ownerState},className:C.track}),Ye=me({elementType:re,getSlotProps:Se,externalSlotProps:S,ownerState:{...k,...S==null?void 0:S.ownerState},className:C.thumb}),bt=me({elementType:je,externalSlotProps:c,ownerState:{...k,...c==null?void 0:c.ownerState},className:C.valueLabel}),Be=me({elementType:pe,externalSlotProps:I,ownerState:k,className:C.mark}),Ke=me({elementType:Ce,externalSlotProps:D,ownerState:k,className:C.markLabel}),xt=me({elementType:r,getSlotProps:Pe,externalSlotProps:M,ownerState:k});return t.jsxs(ue,{...K,children:[t.jsx(V,{...Re}),t.jsx(be,{...gt}),d.filter(A=>A.value>=$&&A.value<=Y).map((A,E)=>{const Xe=Ue(A.value,$,Y),Fe=te[ae].offset(Xe);let ne;return L===!1?ne=p.includes(A.value):ne=L==="normal"&&(m?A.value>=p[0]&&A.value<=p[p.length-1]:A.value<=p[0])||L==="inverted"&&(m?A.value<=p[0]||A.value>=p[p.length-1]:A.value>=p[0]),t.jsxs(g.Fragment,{children:[t.jsx(pe,{"data-index":E,...Be,...!_e(pe)&&{markActive:ne},style:{...Fe,...Be.style},className:Ne(Be.className,ne&&C.markActive)}),A.label!=null?t.jsx(Ce,{"aria-hidden":!0,"data-index":E,...Ke,...!_e(Ce)&&{markLabelActive:ne},style:{...Fe,...Ke.style},className:Ne(C.markLabel,Ke.className,ne&&C.markLabelActive),children:A.label}):null]},E)}),p.map((A,E)=>{const Xe=Ue(A,$,Y),Fe=te[ae].offset(Xe),ne=T==="off"?pa:je;return t.jsx(ne,{...!_e(ne)&&{valueLabelFormat:J,valueLabelDisplay:T,value:typeof J=="function"?J(N(A),E):J,index:E,open:Me===E||we===E||T==="on",disabled:U},...bt,children:t.jsx(re,{"data-index":E,...Ye,className:Ne(C.thumb,Ye.className,we===E&&C.active,o===E&&C.focusVisible),style:{...Fe,...j(E),...Ye.style},children:t.jsx(r,{"data-index":E,"aria-label":Z?Z(E):z,"aria-valuenow":N(A),"aria-labelledby":w,"aria-valuetext":ke?ke(N(A),E):R,value:p[E],...xt})})},E)})]})});/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qe=Lt("outline","photo-edit","IconPhotoEdit",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4",key:"svg-1"}],["path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596",key:"svg-3"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-4"}]]);const fa=ft(t.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),pt=ft(t.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),ha=({confirmDialog:e,generateTilesLoading:a,handleCancelGenerateTiles:s,handleConfirmGenerateTiles:l})=>{const[b,z]=g.useState(18),R=(y,P)=>{z(P)},w=()=>{l(b)};return t.jsxs(zt,{open:e.open,onClose:a?void 0:s,"aria-labelledby":"generate-tiles-dialog-title","aria-describedby":"generate-tiles-dialog-description",PaperProps:{sx:{borderRadius:2,minWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"}},children:[t.jsx(It,{id:"generate-tiles-dialog-title",sx:{bgcolor:"primary.light",color:"warning.contrastText",fontWeight:600,fontSize:"1.1rem"},children:"⚠️ Confirmation"}),t.jsx(At,{sx:{pt:3,pb:2},children:a?t.jsxs(_,{sx:{textAlign:"center",py:4},children:[t.jsx(_,{sx:{width:64,height:64,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:t.jsx(Qe,{sx:{color:"primary.light",fontSize:32}})}),t.jsx(oe,{variant:"h6",sx:{fontWeight:600,mb:2,color:"text.primary"},children:"Generating Tiles..."}),t.jsx(oe,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6,mb:3},children:"Please wait while we process your request. This may take several minutes."}),t.jsx(_,{sx:{width:"100%",maxWidth:300,mx:"auto"},children:t.jsx(Pt,{})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(_,{sx:{display:"flex",alignItems:"flex-start",gap:2,mt:2},children:[t.jsx(_,{sx:{width:48,height:48,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,mt:.5},children:t.jsx(Qe,{sx:{color:"primary.light",fontSize:24}})}),t.jsxs(_,{children:[t.jsx(oe,{variant:"h6",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"Time-Intensive Operation"}),t.jsxs(oe,{variant:"body1",id:"generate-tiles-dialog-description",sx:{color:"text.secondary",lineHeight:1.6},children:["This tile generation process will take at least"," ",t.jsx("strong",{children:"10 minutes"})," to complete. The system will process your data in the background."]})]})]}),t.jsxs(_,{sx:{mt:4},children:[t.jsxs(oe,{variant:"body2",sx:{fontWeight:500,mb:1},children:["Maximum Zoom Level: ",t.jsx("strong",{children:b})]}),t.jsx(ma,{value:b,onChange:R,min:10,max:24,step:1,marks:!0,valueLabelDisplay:"auto"})]})]})}),t.jsxs(Mt,{sx:{p:3,pt:1,gap:1},children:[t.jsx(ye,{onClick:s,variant:"outlined",disabled:a,sx:{color:"error.main",borderColor:"error.main",fontWeight:500,px:3,py:1,"&:hover":{bgcolor:"error.50",borderColor:"error.dark"},"&:disabled":{color:"grey.400",borderColor:"grey.300"}},children:"Cancel"}),t.jsx(ye,{onClick:w,variant:"contained",disabled:a,sx:{bgcolor:"primary.main",color:"white",fontWeight:500,px:3,py:1,"&:hover":{bgcolor:"secondary.light",color:"black"},"&:focus":{bgcolor:"primary.main"},"&:disabled":{bgcolor:"grey.300",color:"grey.500"}},children:a?"Processing...":"Proceed"})]})]})},ga=[{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],ba=[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"name:asc",label:"Name (A-Z)"},{value:"name:desc",label:"Name (Z-A)"}],ka=()=>{const e=g.useRef(null),a=Rt(),{enqueueSnackbar:s}=$t(),[l,b]=g.useState([]),[z,R]=g.useState(!0),[w,y]=g.useState(null),[P,O]=g.useState(1),[G]=g.useState(10),[se,ze]=g.useState(0),[he,U]=g.useState(""),[Z,ke]=g.useState("createdAt:desc"),[ge,Y]=g.useState(""),$=Nt(o=>o.auth.token),[ie,Ie]=g.useState({}),B=g.useRef(null),[Q,le]=g.useState({type:"",workDay:null}),[H,ee]=g.useState({}),[N,x]=g.useState({}),[h,q]=g.useState({open:!1,workDayId:null}),[L,ce]=g.useState(!1);g.useEffect(()=>{(async()=>{var m,v,d,p,f,F;R(!0),y(null);try{const j={page:P,limit:G,sortBy:Z};ge&&(j.name=ge);const C=await xe.get("/work-day",{params:j,headers:{Authorization:$}});b(((m=C.data.data)==null?void 0:m.results)||[]),ze(((v=C.data.data)==null?void 0:v.totalResults)||0)}catch(j){console.log(j,"<===== error fetching workdays"),y(((p=(d=j.response)==null?void 0:d.data)==null?void 0:p.message)||j.message),s(((F=(f=j.response)==null?void 0:f.data)==null?void 0:F.message)||j.message||"Failed to fetch work days",{variant:"error"})}finally{R(!1)}})()},[$,P,G,Z,ge,s]);const T=o=>o?o.url?o.url:o.Location?o.Location:null:null,J=async o=>{var v,d,p;const m=o.rawFile;if(!m){s("No file found to download",{variant:"warning"});return}try{const F=(v=(await xe.get(`/work-day/get-download-url/${m}`,{headers:{Authorization:$}})).data)==null?void 0:v.data;F?(window.open(F,"_blank"),s("Download started",{variant:"success"})):s("No download link available.",{variant:"warning"})}catch(f){s(((p=(d=f.response)==null?void 0:d.data)==null?void 0:p.message)||f.message||"Download failed",{variant:"error"})}},de=async(o,m)=>{var v,d;Ie(p=>({...p,[o._id||o.id]:!0}));try{await xe.patch(`/work-day/${o._id||o.id}`,{status:m},{headers:{Authorization:$}}),b(p=>p.map(f=>(f._id||f.id)===(o._id||o.id)?{...f,status:m}:f)),s("Status updated!",{variant:"success"})}catch(p){s(((d=(v=p.response)==null?void 0:v.data)==null?void 0:d.message)||p.message||"Failed to update status",{variant:"error"})}finally{Ie(p=>({...p,[o._id||o.id]:!1}))}},k=()=>{O(1),Y(he)},te=(o,m)=>{le({workDay:o,type:m}),B.current&&B.current.click()},Ae=async o=>{var F,j,C,ue;const m=(F=o.target.files)==null?void 0:F[0];if(!m||!Q.type||!Q.workDay)return;const{type:v,workDay:d}=Q,p=m.name.split(".").pop().toLowerCase(),f=`${d.id||d._id}_${v}`;if(v==="tiff"&&p!=="tiff"){s(`Only .${v.toUpperCase()} files are allowed`,{variant:"error"});return}x(V=>({...V,[f]:!0})),ee(V=>({...V,[f]:0}));try{const be=(await xe.post("/work-day/upload-resultFile",{workDayId:d.id||d._id,type:v,filename:m.name,contentType:m.type,size:m.size},{headers:{Authorization:$}})).data.data;console.log(be,"<=== upload response");const{parts:re,uploadId:je,key:pe,partSize:Ce}=be,r=[];let n=0;for(;n<m.size;){const u=Math.min(n+Ce,m.size);r.push(m.slice(n,u)),n=u}const i=[];for(let u=0;u<re.length;u++){const c=(j=(await fetch(re[u].url,{method:"PUT",body:r[u]})).headers.get("ETag"))==null?void 0:j.replace(/"/g,"");i.push({PartNumber:re[u].partNumber,ETag:c});const I=Math.round((u+1)/re.length*100);ee(D=>({...D,[f]:I}))}await xe.post("/work-day/complete-upload",{workDayId:d.id||d._id,type:v,key:pe,uploadId:je,parts:i},{headers:{Authorization:$}}),s(`${v.toUpperCase()} uploaded successfully (multipart)`,{variant:"success"})}catch(V){s(((ue=(C=V.response)==null?void 0:C.data)==null?void 0:ue.message)||V.message||"Upload failed",{variant:"error"})}finally{x(V=>({...V,[f]:!1})),setTimeout(()=>{ee(V=>({...V,[f]:0}))},2e3),B.current&&(B.current.value=""),le({type:"",workDay:null})}},Pe=o=>{const m=l.find(d=>(d._id||d.id)===o);if(!m){s("Work day not found",{variant:"error"});return}if(!(m.tiffFile&&m.tiffFile.trim()!=="")){s("Please upload .tiff first before generating tiles.",{variant:"warning"});return}q({open:!0,workDayId:o})},Se=async o=>{var v,d,p;const{workDayId:m}=h;ce(!0);try{(v=(await xe.get(`/work-day/generate-tiles/${m}`,{headers:{Authorization:$},params:{maxzoom:o}})).data)!=null&&v.success?(s("Tile generation started successfully! This process will take at least 10 minutes to complete.",{variant:"success"}),q({open:!1,workDayId:null})):s("Failed to start tile generation",{variant:"error"})}catch(f){s(((p=(d=f.response)==null?void 0:d.data)==null?void 0:p.message)||f.message||"Failed to generate tiles",{variant:"error"})}finally{ce(!1)}},Me=()=>{q({open:!1,workDayId:null})},we=o=>{le({workDay:o,type:"dxf"}),e.current&&e.current.click()},ae=async()=>{var p,f,F,j;const{workDay:o}=Q,m=(f=(p=e.current)==null?void 0:p.files)==null?void 0:f[0];if(!m){s("Please select a .dxf file",{variant:"warning"});return}if(m.name.split(".").pop().toLowerCase()!=="dxf"){s("Only .dxf files are allowed",{variant:"error"});return}s("Uploading DXF file",{variant:"info"});const d=new FormData;d.append("file",m);try{await xe.post(`/mapFeature/overlayUpload/${o._id||o.id}`,d,{headers:{Authorization:$,"Content-Type":"multipart/form-data"}}),s("DXF uploaded successfully!",{variant:"success"}),e.current&&(e.current.value="")}catch(C){console.error("DXF upload failed",C),s(((j=(F=C.response)==null?void 0:F.data)==null?void 0:j.message)||C.message,{variant:"error"})}};return t.jsxs(Ft,{children:[t.jsx(_,{children:t.jsx(oe,{variant:"h2",mb:2,gutterBottom:!0,children:"Historical Work Days"})}),t.jsxs(nt,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,alignItems:"center",children:[t.jsx(Dt,{label:"Search by Project",size:"small",value:he,onChange:o=>U(o.target.value),onKeyDown:o=>{o.key==="Enter"&&k()}}),t.jsx(ye,{variant:"contained",onClick:k,sx:{minWidth:100},children:"Search"}),t.jsxs(ot,{size:"small",sx:{minWidth:150},children:[t.jsx(Et,{children:"Sort By"}),t.jsx(st,{value:Z,label:"Sort By",onChange:o=>{ke(o.target.value),O(1)},children:ba.map(o=>t.jsx(it,{value:o.value,children:o.label},o.value))})]})]}),z?t.jsx(oe,{variant:"body1",children:"Loading work days..."}):w?t.jsx(oe,{color:"error",children:w}):t.jsx(t.Fragment,{children:t.jsxs(Wt,{sx:{p:3,mx:"auto",mt:3},children:[t.jsx(Vt,{children:t.jsxs(Ot,{size:"small",children:[t.jsx(_t,{children:t.jsxs(qe,{sx:{bgcolor:a.palette.primary.light},children:[t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Time Stamp"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Historical Date"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Project Name"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Project"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Owner"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Status"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Tiff"}),t.jsx(W,{sx:{color:a.palette.primary.contrastText},children:"Action"})]})}),t.jsx(Ut,{children:l.length===0?t.jsx(qe,{children:t.jsx(W,{colSpan:7,align:"center",children:"No work days found."})}):l.map(o=>{var F;const m=(F=o.resultFiles)==null?void 0:F[0],v=!!T(m),d=o._id||o.id,p=o.projectId||{},f=p.owner||{};return t.jsxs(qe,{children:[t.jsx(W,{children:o.createdAt?Je(o.createdAt).format("DD/MM/YYYY"):o.name}),t.jsx(W,{children:Je(o.name,"YYYY-MM-DD",!0).isValid()?Je(o.name).format("DD/MM/YYYY"):o.name||"-"}),t.jsx(W,{children:p.name||"-"}),t.jsx(W,{children:p.location||"-"}),t.jsx(W,{children:f.firstName||f.lastName?`${f.firstName||""} ${f.lastName||""}`.trim():f.email||"-"}),t.jsx(W,{children:t.jsx(ot,{size:"small",sx:{minWidth:120},children:t.jsx(st,{value:o.status||"",onChange:j=>de(o,j.target.value),disabled:ie[d],children:ga.map(j=>t.jsx(it,{value:j.value,children:j.label},j.value))})})}),t.jsx(W,{children:o.tiffFile?o.tiffFile.split("-")[5]:"-"}),t.jsx(W,{children:t.jsxs(nt,{spacing:1,sx:{minWidth:200},children:[t.jsx(ye,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(fa,{}),onClick:()=>J(o),disabled:!v&&!o.rawFile,fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Download"}),t.jsxs(_,{children:[t.jsx(ye,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(pt,{}),onClick:()=>te(o,"jpg"),disabled:N[`${d}_jpg`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload Tiff"}),N[`${d}_jpg`]&&t.jsxs(_,{sx:{mt:.5},children:[t.jsxs(oe,{variant:"caption",color:"text.secondary",children:["Uploading..."," ",H[`${d}_jpg`]||0,"%"]}),t.jsx(_,{sx:{width:"100%",mt:.5},children:t.jsx(_,{sx:{height:3,bgcolor:"grey.200",borderRadius:1.5,overflow:"hidden"},children:t.jsx(_,{sx:{width:`${H[`${d}_jpg`]||0}%`,height:"100%",bgcolor:"secondary.main",transition:"width 0.3s ease"}})})})]})]}),t.jsx(ye,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(pt,{}),onClick:()=>we(o),disabled:N[`${o._id||o.id}_dxf`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Upload DXF"}),t.jsx(ye,{variant:"outlined",color:"primary",size:"small",startIcon:t.jsx(Qe,{}),onClick:()=>Pe(d),disabled:N[`${d}_jpg`]||N[`${d}_kml`],fullWidth:!0,sx:{height:36,fontSize:"0.75rem",fontWeight:500,textTransform:"none",borderWidth:1.5,"&:hover":{borderWidth:2}},children:"Generate Tiles"})]})})]},d)})})]})}),t.jsx(_,{display:"flex",justifyContent:"center",mt:2,children:t.jsx(Yt,{count:Math.ceil(se/G),page:P,onChange:(o,m)=>O(m),color:"primary"})})]})}),t.jsx("input",{type:"file",ref:B,style:{display:"none"},onChange:Ae}),t.jsx("input",{type:"file",ref:e,style:{display:"none"},accept:".dxf",onChange:ae}),t.jsx(ha,{confirmDialog:h,generateTilesLoading:L,handleCancelGenerateTiles:Me,handleConfirmGenerateTiles:Se})]})};export{ka as default};
