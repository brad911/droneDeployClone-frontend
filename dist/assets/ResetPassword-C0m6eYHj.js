import{u as z,a as B,r as A,b as D,e as R,f as q,g as p,w as L,j as e,F as w,I as j,O as g,h as f,i as y,T as i,G as r,B as $,A as F,l as V,z as W,m as M,n as O,o as T,p as Q,q as E,L as P,t as G,S as H,D as Z}from"./index-DuDI2oEP.js";import{V as b,a as v}from"./VisibilityOff-CUauVRmm.js";function N(){const n=z(),t=B(),[o,C]=A.useState(!1),c=()=>C(a=>!a),d=a=>a.preventDefault(),{enqueueSnackbar:l}=D(),I=/^(?=.*[A-Z])(?=.*\d)(?=.*[@!#$%^&*])[A-Za-z\d@!#$%^&*]{12,}$/,u=new URLSearchParams(W().search).get("token"),k=async(a,{setSubmitting:S})=>{var h,x;try{console.log(u,"<==== wew"),(await M.post("/auth/reset-password",a,{params:{token:u}})).status===200&&(l("Password has been succcessfully changed!",{variant:"success"}),t("/login"))}catch(m){l(((x=(h=m.response)==null?void 0:h.data)==null?void 0:x.message)||"Login failed. Please try again.",{variant:"error"})}finally{S(!1)}},s=R({initialValues:{password:"",confirmPassword:""},validationSchema:q({password:p().required("Password is required").matches(I,"Password must be at least 12 characters and include an uppercase letter, a number, and a special character (@!#$%^&*)"),confirmPassword:p().required("Confirm Password is required").oneOf([L("password"),null],"Passwords must match")}),onSubmit:k});return e.jsxs("form",{noValidate:!0,onSubmit:s.handleSubmit,children:[e.jsxs(w,{fullWidth:!0,sx:{...n.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsx(g,{id:"password",type:o?"text":"password",value:s.values.password,name:"password",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(f,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:d,edge:"end",size:"large",children:o?e.jsx(b,{}):e.jsx(v,{})})}),label:"Password"}),s.touched.password&&s.errors.password&&e.jsx(i,{color:"error",variant:"caption",children:s.errors.password})]}),e.jsxs(w,{fullWidth:!0,sx:{...n.typography.customInput},error:s.touched.password&&!!s.errors.password,children:[e.jsx(j,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(g,{id:"confirmPassword",type:o?"text":"password",value:s.values.confirmPassword,name:"confirmPassword",onBlur:s.handleBlur,onChange:s.handleChange,endAdornment:e.jsx(f,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:d,edge:"end",size:"large",children:o?e.jsx(b,{}):e.jsx(v,{})})}),label:"confirmPassword"})]}),s.touched.confirmPassword&&s.errors.confirmPassword&&e.jsx(i,{color:"error",variant:"caption",children:s.errors.confirmPassword}),e.jsx(r,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"}}),e.jsx($,{sx:{mt:2},children:e.jsx(F,{children:e.jsx(V,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Reset Password"})})})]})}function Y(){const n=O();return T(t=>t.breakpoints.down("md")),e.jsx(Q,{children:e.jsx(r,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:e.jsx(r,{size:12,children:e.jsx(r,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 38px)"},children:e.jsx(r,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(E,{children:e.jsxs(r,{container:!0,spacing:0,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{sx:{mb:3},children:e.jsx(P,{style:{textDecoration:"none"},to:"#","aria-label":"theme logo",children:e.jsx(G,{})})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(r,{children:e.jsx(H,{spacing:1,sx:{alignItems:"center",justifyContent:"center"}})})})}),e.jsx(r,{size:12,children:e.jsx(N,{})}),e.jsx(r,{size:12,children:e.jsx(Z,{})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(i,{component:P,to:"/login",variant:"subtitle1",sx:{textDecoration:"underline",textDecorationColor:n.palette.secondary[200],color:"inherit","&:hover":{textDecorationColor:n.palette.secondary[800]}},children:"Already have an account?"})})})]})})})})})})})}export{Y as default};
